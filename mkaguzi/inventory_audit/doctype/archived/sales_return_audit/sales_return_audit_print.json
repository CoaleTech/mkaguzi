{
  "doctype": "Print Format",
  "name": "Sales Return Audit Daily Summary",
  "doc_type": "Sales Return Audit",
  "module": "Inventory Audit",
  "standard": "Yes",
  "custom_format": 0,
  "print_format_type": "Jinja",
  "raw_printing": 0,
  "html": "{% set doc = frappe.get_doc('Sales Return Audit', doc.name) %}\n<style>\n  .audit-header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 15px; }\n  .audit-title { font-size: 24px; font-weight: bold; }\n  .audit-date { font-size: 16px; color: #666; margin-top: 5px; }\n  .info-grid { display: flex; flex-wrap: wrap; margin-bottom: 20px; }\n  .info-box { flex: 1; min-width: 200px; padding: 10px; border: 1px solid #ddd; margin: 5px; }\n  .info-label { font-size: 12px; color: #666; text-transform: uppercase; }\n  .info-value { font-size: 18px; font-weight: bold; }\n  .section-title { font-weight: bold; background: #333; color: #fff; padding: 8px 12px; margin-top: 20px; }\n  .items-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 11px; }\n  .items-table th { background: #f5f5f5; padding: 8px; text-align: left; border: 1px solid #ddd; }\n  .items-table td { padding: 8px; border: 1px solid #ddd; }\n  .items-table tr.discrepancy { background: #fff3cd; }\n  .items-table tr.match { background: #d4edda; }\n  .summary-row { display: flex; padding: 10px; border-bottom: 1px solid #eee; }\n  .summary-label { flex: 1; }\n  .summary-value { flex: 1; text-align: right; font-weight: bold; }\n  .status-badge { display: inline-block; padding: 3px 8px; border-radius: 3px; font-size: 11px; }\n  .status-pending { background: #ffc107; color: #333; }\n  .status-resolved { background: #28a745; color: #fff; }\n  .status-discrepancy { background: #dc3545; color: #fff; }\n  .approval-section { display: flex; margin-top: 30px; }\n  .approval-box { flex: 1; text-align: center; padding: 15px; border: 1px solid #ddd; margin: 5px; }\n  .approval-role { font-weight: bold; margin-bottom: 10px; }\n  .approval-line { border-top: 1px solid #333; margin-top: 40px; padding-top: 5px; }\n</style>\n\n<div class=\"audit-header\">\n  <div class=\"audit-title\">SALES RETURN AUDIT REPORT</div>\n  <div class=\"audit-date\">{{ doc.name }} | {{ frappe.format_value(doc.audit_date, {'fieldtype': 'Date'}) }}</div>\n</div>\n\n<div class=\"info-grid\">\n  <div class=\"info-box\">\n    <div class=\"info-label\">Warehouse</div>\n    <div class=\"info-value\">{{ doc.warehouse }}</div>\n  </div>\n  <div class=\"info-box\">\n    <div class=\"info-label\">Branch</div>\n    <div class=\"info-value\">{{ doc.branch or '-' }}</div>\n  </div>\n  <div class=\"info-box\">\n    <div class=\"info-label\">Status</div>\n    <div class=\"info-value\">{{ doc.status }}</div>\n  </div>\n  <div class=\"info-box\">\n    <div class=\"info-label\">Total Variance</div>\n    <div class=\"info-value\">{{ frappe.format_value(doc.total_variance_value, {'fieldtype': 'Currency'}) }}</div>\n  </div>\n</div>\n\n<div class=\"section-title\">Summary</div>\n<div class=\"summary-row\">\n  <div class=\"summary-label\">Total Items</div>\n  <div class=\"summary-value\">{{ doc.total_items or 0 }}</div>\n</div>\n<div class=\"summary-row\">\n  <div class=\"summary-label\">Items Pending</div>\n  <div class=\"summary-value\">{{ doc.items_pending or 0 }}</div>\n</div>\n<div class=\"summary-row\">\n  <div class=\"summary-label\">Items Verified (Match)</div>\n  <div class=\"summary-value\">{{ doc.items_verified_match or 0 }}</div>\n</div>\n<div class=\"summary-row\">\n  <div class=\"summary-label\">Items with Discrepancy</div>\n  <div class=\"summary-value\">{{ doc.items_verified_discrepancy or 0 }}</div>\n</div>\n<div class=\"summary-row\">\n  <div class=\"summary-label\">Items Resolved</div>\n  <div class=\"summary-value\">{{ doc.items_resolved or 0 }}</div>\n</div>\n\n<div class=\"section-title\">Return Items Detail</div>\n<table class=\"items-table\">\n  <thead>\n    <tr>\n      <th>#</th>\n      <th>Item Code</th>\n      <th>Description</th>\n      <th>Invoice</th>\n      <th>System Qty</th>\n      <th>Physical Qty</th>\n      <th>Variance</th>\n      <th>Value</th>\n      <th>Status</th>\n      <th>Resolution</th>\n    </tr>\n  </thead>\n  <tbody>\n    {% for item in doc.return_items %}\n    <tr class=\"{% if item.verification_status == 'Verified-Match' %}match{% elif item.verification_status == 'Verified-Discrepancy' %}discrepancy{% endif %}\">\n      <td>{{ loop.index }}</td>\n      <td>{{ item.item_code }}</td>\n      <td>{{ item.item_description or '-' }}</td>\n      <td>{{ item.invoice_no or '-' }}</td>\n      <td>{{ item.system_quantity or 0 }}</td>\n      <td>{{ item.physical_quantity if item.physical_quantity is not none else '-' }}</td>\n      <td>{{ item.variance_quantity or 0 }}</td>\n      <td>{{ frappe.format_value(item.variance_value or 0, {'fieldtype': 'Currency'}) }}</td>\n      <td>\n        <span class=\"status-badge {% if item.verification_status == 'Resolved' %}status-resolved{% elif item.verification_status == 'Verified-Discrepancy' %}status-discrepancy{% else %}status-pending{% endif %}\">\n          {{ item.verification_status or 'Pending' }}\n        </span>\n      </td>\n      <td>{{ item.resolution_type or '-' }}</td>\n    </tr>\n    {% endfor %}\n  </tbody>\n</table>\n\n<div class=\"section-title\">Workflow Approvals</div>\n<div class=\"approval-section\">\n  <div class=\"approval-box\">\n    <div class=\"approval-role\">Stock Analyst</div>\n    {% if doc.analyst_verified %}\n    <div>✓ Verified</div>\n    <small>{{ doc.stock_analyst }}<br>{{ frappe.format_value(doc.analyst_date, {'fieldtype': 'Datetime'}) }}</small>\n    {% else %}\n    <div>Pending</div>\n    {% endif %}\n  </div>\n  <div class=\"approval-box\">\n    <div class=\"approval-role\">Stock Taker</div>\n    {% if doc.taker_verified %}\n    <div>✓ Verified</div>\n    <small>{{ doc.stock_taker }}<br>{{ frappe.format_value(doc.taker_date, {'fieldtype': 'Datetime'}) }}</small>\n    {% else %}\n    <div>Pending</div>\n    {% endif %}\n  </div>\n  <div class=\"approval-box\">\n    <div class=\"approval-role\">Store Manager</div>\n    {% if doc.manager_confirmed %}\n    <div>✓ Confirmed</div>\n    <small>{{ doc.store_manager }}<br>{{ frappe.format_value(doc.manager_date, {'fieldtype': 'Datetime'}) }}</small>\n    {% else %}\n    <div>Pending</div>\n    {% endif %}\n  </div>\n  <div class=\"approval-box\">\n    <div class=\"approval-role\">HOD</div>\n    {% if doc.hod_approved %}\n    <div>✓ Approved</div>\n    <small>{{ doc.hod_approver }}<br>{{ frappe.format_value(doc.hod_approval_date, {'fieldtype': 'Datetime'}) }}</small>\n    {% else %}\n    <div>Pending</div>\n    {% endif %}\n  </div>\n</div>\n\n{% if doc.notes %}\n<div class=\"section-title\">Notes</div>\n<div style=\"padding: 10px;\">{{ doc.notes }}</div>\n{% endif %}"
}
