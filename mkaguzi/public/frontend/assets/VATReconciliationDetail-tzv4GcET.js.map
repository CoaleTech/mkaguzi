{"version":3,"file":"VATReconciliationDetail-tzv4GcET.js","sources":["../../../../frontend/src/pages/compliance/VATReconciliationDetail.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <!-- Header -->\n    <div class=\"bg-white border-b border-gray-200 px-6 py-4\">\n      <div class=\"flex justify-between items-center\">\n        <div class=\"flex items-center gap-4\">\n          <Button \n            variant=\"ghost\" \n            size=\"sm\" \n            @click=\"goBack\"\n            class=\"text-gray-600 hover:text-gray-900\"\n          >\n            <ArrowLeft class=\"w-5 h-5\" />\n          </Button>\n          <div>\n            <div class=\"flex items-center gap-3\">\n              <h1 class=\"text-2xl font-bold text-gray-900\">\n                {{ isNewMode ? 'New VAT Reconciliation' : reconciliation?.name || 'VAT Reconciliation' }}\n              </h1>\n              <Badge v-if=\"!isNewMode && reconciliation\" :variant=\"getStatusVariant(reconciliation.status)\">\n                {{ reconciliation.status }}\n              </Badge>\n            </div>\n            <p class=\"text-gray-600 mt-1\">\n              {{ isNewMode ? 'Create a new VAT reconciliation record' : 'Manage VAT data reconciliation' }}\n            </p>\n          </div>\n        </div>\n        <div class=\"flex gap-3\">\n          <Button \n            v-if=\"!isNewMode && canRunReconciliation\"\n            variant=\"solid\" \n            size=\"sm\" \n            @click=\"runReconciliation\"\n            :loading=\"runningReconciliation\"\n            class=\"bg-blue-600 hover:bg-blue-700 shadow-sm\"\n          >\n            <div class=\"flex items-center gap-2\">\n              <Play class=\"w-4 h-4\" />\n              <span>Run Reconciliation</span>\n            </div>\n          </Button>\n          <div v-if=\"!isNewMode\" class=\"relative\" ref=\"exportDropdownRef\">\n            <Button \n              variant=\"solid\" \n              size=\"sm\" \n              @click=\"showExportDropdown = !showExportDropdown\"\n              class=\"bg-gray-600 hover:bg-gray-700 shadow-sm\"\n            >\n              <div class=\"flex items-center gap-2\">\n                <Download class=\"w-4 h-4\" />\n                <span>Export</span>\n                <ChevronDown class=\"w-4 h-4\" />\n              </div>\n            </Button>\n            <div \n              v-if=\"showExportDropdown\" \n              class=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10\"\n            >\n              <button \n                @click=\"exportReport('excel')\"\n                class=\"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 rounded-t-lg flex items-center gap-2\"\n              >\n                <FileSpreadsheet class=\"w-4 h-4\" />\n                Export to Excel\n              </button>\n              <button \n                @click=\"exportReport('pdf')\"\n                class=\"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 rounded-b-lg flex items-center gap-2\"\n              >\n                <FileText class=\"w-4 h-4\" />\n                Export to PDF\n              </button>\n            </div>\n          </div>\n          <AskAIButton\n            v-if=\"!isNewMode && reconciliation\"\n            contextType=\"vat-reconciliation\"\n            pageComponent=\"VATReconciliationDetail\"\n            :contextData=\"getVATReconciliationContext()\"\n            variant=\"solid\"\n            size=\"sm\"\n            theme=\"purple\"\n          />\n          <Button \n            v-if=\"isNewMode\"\n            variant=\"solid\" \n            size=\"sm\" \n            @click=\"createReconciliation\"\n            :loading=\"saving\"\n            class=\"bg-green-600 hover:bg-green-700 shadow-sm\"\n          >\n            <div class=\"flex items-center gap-2\">\n              <Save class=\"w-4 h-4\" />\n              <span>Create</span>\n            </div>\n          </Button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Loading Overlay -->\n    <div v-if=\"loading\" class=\"flex items-center justify-center py-32\">\n      <div class=\"flex flex-col items-center gap-4\">\n        <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n        <span class=\"text-gray-600 font-medium\">Loading reconciliation data...</span>\n      </div>\n    </div>\n\n    <div v-else class=\"p-6 space-y-6\">\n      <!-- Configuration Section - Always show, but readonly for non-Draft -->\n      <div class=\"bg-white rounded-lg border border-gray-200 shadow-sm\">\n        <div class=\"px-6 py-4 border-b border-gray-200\">\n          <h3 class=\"text-lg font-semibold text-gray-900\">Reconciliation Configuration</h3>\n          <p class=\"text-sm text-gray-600 mt-1\">\n            {{ isNewMode ? 'Set up the basic parameters for this VAT reconciliation' : 'Configuration details for this reconciliation' }}\n          </p>\n        </div>\n        <div class=\"p-6\">\n          <div class=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n            <div>\n              <label class=\"block text-sm font-semibold text-gray-700 mb-2\">Reconciliation Month <span v-if=\"canEditConfig\" class=\"text-red-500\">*</span></label>\n              <select\n                v-model=\"form.reconciliation_month\"\n                class=\"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                :disabled=\"!canEditConfig\"\n              >\n                <option value=\"\">Select Month</option>\n                <option v-for=\"month in months\" :key=\"month\" :value=\"month\">{{ month }}</option>\n              </select>\n            </div>\n            <div>\n              <label class=\"block text-sm font-semibold text-gray-700 mb-2\">Fiscal Year <span v-if=\"canEditConfig\" class=\"text-red-500\">*</span></label>\n              <select\n                v-model=\"form.fiscal_year\"\n                class=\"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                :disabled=\"!canEditConfig\"\n              >\n                <option value=\"\">Select Year</option>\n                <option v-for=\"year in fiscalYears\" :key=\"year\" :value=\"year\">{{ year }}</option>\n              </select>\n            </div>\n            <div>\n              <label class=\"block text-sm font-semibold text-gray-700 mb-2\">Reconciliation Type <span v-if=\"canEditConfig\" class=\"text-red-500\">*</span></label>\n              <select\n                v-model=\"form.reconciliation_type\"\n                class=\"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                :disabled=\"!canEditConfig\"\n              >\n                <option value=\"\">Select Type</option>\n                <option value=\"System vs iTax\">System vs iTax</option>\n                <option value=\"System vs TIMs\">System vs TIMs</option>\n                <option value=\"iTax vs TIMs\">iTax vs TIMs</option>\n              </select>\n            </div>\n            <div>\n              <label class=\"block text-sm font-semibold text-gray-700 mb-2\">Tolerance (±)</label>\n              <input\n                v-model.number=\"form.tolerance\"\n                type=\"number\"\n                step=\"0.01\"\n                class=\"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                placeholder=\"0.01\"\n                :disabled=\"!canEditConfig\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Summary Cards (for existing reconciliations) -->\n      <div v-if=\"!isNewMode && reconciliation\" class=\"space-y-6\">\n        <!-- Record Count Cards - 6 equal columns -->\n        <div class=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4\">\n          <div class=\"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow\">\n            <div class=\"flex flex-col items-center text-center\">\n              <div class=\"bg-blue-100 p-3 rounded-full mb-3\">\n                <Database class=\"w-5 h-5 text-blue-600\" />\n              </div>\n              <p class=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">Source A</p>\n              <p class=\"text-2xl font-bold text-blue-600 mt-1 tabular-nums\">{{ reconciliation.total_source_a_records || 0 }}</p>\n              <p class=\"text-xs text-gray-400\">records</p>\n            </div>\n          </div>\n          <div class=\"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow\">\n            <div class=\"flex flex-col items-center text-center\">\n              <div class=\"bg-purple-100 p-3 rounded-full mb-3\">\n                <Database class=\"w-5 h-5 text-purple-600\" />\n              </div>\n              <p class=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">Source B</p>\n              <p class=\"text-2xl font-bold text-purple-600 mt-1 tabular-nums\">{{ reconciliation.total_source_b_records || 0 }}</p>\n              <p class=\"text-xs text-gray-400\">records</p>\n            </div>\n          </div>\n          <div class=\"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow\">\n            <div class=\"flex flex-col items-center text-center\">\n              <div class=\"bg-green-100 p-3 rounded-full mb-3\">\n                <CheckCircle class=\"w-5 h-5 text-green-600\" />\n              </div>\n              <p class=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">Matched</p>\n              <p class=\"text-2xl font-bold text-green-600 mt-1 tabular-nums\">{{ reconciliation.total_matched || 0 }}</p>\n              <p class=\"text-xs text-gray-400\">records</p>\n            </div>\n          </div>\n          <div class=\"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow\">\n            <div class=\"flex flex-col items-center text-center\">\n              <div class=\"bg-yellow-100 p-3 rounded-full mb-3\">\n                <AlertTriangle class=\"w-5 h-5 text-yellow-600\" />\n              </div>\n              <p class=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">Missing in B</p>\n              <p class=\"text-2xl font-bold text-yellow-600 mt-1 tabular-nums\">{{ reconciliation.total_unmatched_source_a || 0 }}</p>\n              <p class=\"text-xs text-gray-400\">CU Invoices</p>\n            </div>\n          </div>\n          <div class=\"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow\">\n            <div class=\"flex flex-col items-center text-center\">\n              <div class=\"bg-orange-100 p-3 rounded-full mb-3\">\n                <AlertTriangle class=\"w-5 h-5 text-orange-600\" />\n              </div>\n              <p class=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">Missing in A</p>\n              <p class=\"text-2xl font-bold text-orange-600 mt-1 tabular-nums\">{{ reconciliation.total_unmatched_source_b || 0 }}</p>\n              <p class=\"text-xs text-gray-400\">CU Invoices</p>\n            </div>\n          </div>\n          <div class=\"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow\">\n            <div class=\"flex flex-col items-center text-center\">\n              <div class=\"bg-red-100 p-3 rounded-full mb-3\">\n                <XCircle class=\"w-5 h-5 text-red-600\" />\n              </div>\n              <p class=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">Amount Mismatch</p>\n              <p class=\"text-2xl font-bold text-red-600 mt-1 tabular-nums\">{{ reconciliation.total_amount_discrepancies || 0 }}</p>\n              <p class=\"text-xs text-gray-400\">records</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Amount Summary Cards - 4 equal columns with consistent height -->\n        <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <div v-if=\"!loadingResults\" class=\"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border border-blue-200 p-5 shadow-sm hover:shadow-md transition-shadow min-h-[120px] flex flex-col justify-between\">\n            <div class=\"flex items-start justify-between\">\n              <p class=\"text-xs font-semibold text-blue-700 uppercase tracking-wide\">Source A Total</p>\n              <DollarSign class=\"w-5 h-5 text-blue-500 flex-shrink-0\" />\n            </div>\n            <div class=\"mt-auto\">\n              <p class=\"text-xl font-bold text-blue-800 tabular-nums truncate\" :title=\"formatCurrency(reconciliation.total_source_a_amount || 0)\">\n                {{ formatCurrency(reconciliation.total_source_a_amount || 0) }}\n              </p>\n            </div>\n          </div>\n          <div v-if=\"!loadingResults\" class=\"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200 p-5 shadow-sm hover:shadow-md transition-shadow min-h-[120px] flex flex-col justify-between\">\n            <div class=\"flex items-start justify-between\">\n              <p class=\"text-xs font-semibold text-purple-700 uppercase tracking-wide\">Source B Total</p>\n              <DollarSign class=\"w-5 h-5 text-purple-500 flex-shrink-0\" />\n            </div>\n            <div class=\"mt-auto\">\n              <p class=\"text-xl font-bold text-purple-800 tabular-nums truncate\" :title=\"formatCurrency(reconciliation.total_source_b_amount || 0)\">\n                {{ formatCurrency(reconciliation.total_source_b_amount || 0) }}\n              </p>\n            </div>\n          </div>\n          <div v-if=\"!loadingResults\" class=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg border border-gray-300 p-5 shadow-sm hover:shadow-md transition-shadow min-h-[120px] flex flex-col justify-between\">\n            <div class=\"flex items-start justify-between\">\n              <p class=\"text-xs font-semibold text-gray-700 uppercase tracking-wide\">Net Difference</p>\n              <TrendingUp class=\"w-5 h-5 text-gray-500 flex-shrink-0\" />\n            </div>\n            <div class=\"mt-auto\">\n              <p class=\"text-xl font-bold tabular-nums truncate\" \n                 :class=\"netDifference > 0 ? 'text-orange-600' : netDifference < 0 ? 'text-red-600' : 'text-green-600'\"\n                 :title=\"formatVariance(netDifference)\">\n                {{ formatVariance(netDifference) }}\n              </p>\n              <p class=\"text-xs mt-1\" :class=\"netDifference > 0 ? 'text-orange-500' : netDifference < 0 ? 'text-red-500' : 'text-green-500'\">\n                {{ netDifference > 0 ? '↑ Source A higher' : netDifference < 0 ? '↓ Source B higher' : '= Balanced' }}\n              </p>\n            </div>\n          </div>\n          <div v-if=\"!loadingResults\" class=\"bg-gradient-to-br from-red-50 to-red-100 rounded-lg border border-red-200 p-5 shadow-sm hover:shadow-md transition-shadow min-h-[120px] flex flex-col justify-between\">\n            <div class=\"flex items-start justify-between\">\n              <p class=\"text-xs font-semibold text-red-700 uppercase tracking-wide\">Total Variance</p>\n              <XCircle class=\"w-5 h-5 text-red-500 flex-shrink-0\" />\n            </div>\n            <div class=\"mt-auto\">\n              <p class=\"text-xl font-bold text-red-800 tabular-nums truncate\" :title=\"formatCurrency(reconciliation.total_variance_amount || 0)\">\n                {{ formatCurrency(reconciliation.total_variance_amount || 0) }}\n              </p>\n              <p class=\"text-xs text-red-500 mt-1\">Sum of all discrepancies</p>\n            </div>\n          </div>\n          \n          <!-- Loading state for summary cards -->\n          <div v-else class=\"col-span-4 flex items-center justify-center py-8\">\n            <div class=\"flex items-center gap-3\">\n              <div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n              <span class=\"text-gray-600\">Loading summary data...</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Match Rate Progress Bar -->\n        <div v-if=\"!loadingResults\" class=\"bg-white rounded-lg border border-gray-200 p-5 shadow-sm\">\n          <div class=\"flex items-center justify-between mb-3\">\n            <div class=\"flex items-center gap-2\">\n              <div class=\"w-3 h-3 rounded-full\" :class=\"matchRateBarColor\"></div>\n              <p class=\"text-sm font-semibold text-gray-700\">Match Rate</p>\n            </div>\n            <p class=\"text-lg font-bold tabular-nums\" :class=\"matchRateColor\">\n              {{ (reconciliation.match_percentage || 0).toFixed(1) }}%\n            </p>\n          </div>\n          <div class=\"w-full bg-gray-200 rounded-full h-3 overflow-hidden\">\n            <div \n              class=\"h-3 rounded-full transition-all duration-700 ease-out\" \n              :class=\"matchRateBarColor\"\n              :style=\"{ width: (reconciliation.match_percentage || 0) + '%' }\"\n            ></div>\n          </div>\n          <div class=\"flex justify-between mt-2 text-xs text-gray-500\">\n            <span>0%</span>\n            <span>50%</span>\n            <span>100%</span>\n          </div>\n        </div>\n        \n        <!-- Loading state for match rate -->\n        <div v-else class=\"bg-white rounded-lg border border-gray-200 p-5 shadow-sm flex items-center justify-center\">\n          <div class=\"flex items-center gap-3\">\n            <div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n            <span class=\"text-gray-600\">Loading match rate...</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- File Upload Section -->\n      <div v-if=\"!isNewMode\" class=\"bg-white rounded-lg border border-gray-200 shadow-sm\">\n        <div class=\"px-6 py-4 border-b border-gray-200\">\n          <div class=\"flex justify-between items-center\">\n            <div>\n              <h3 class=\"text-lg font-semibold text-gray-900\">Data Files</h3>\n              <p class=\"text-sm text-gray-600 mt-1\">Upload CSV files for reconciliation. Required files depend on reconciliation type.</p>\n            </div>\n            <div class=\"flex gap-2\">\n              <Button variant=\"outline\" size=\"sm\" @click=\"downloadAllTemplates\">\n                <Download class=\"w-4 h-4 mr-1\" /> Download All Templates\n              </Button>\n            </div>\n          </div>\n        </div>\n        <div class=\"p-6\">\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <!-- System Data File -->\n            <div \n              v-if=\"requiresSystemData\"\n              class=\"border-2 border-dashed rounded-lg p-6 text-center transition-colors\"\n              :class=\"reconciliation?.system_data_file ? 'border-green-300 bg-green-50' : 'border-gray-300 hover:border-blue-400'\"\n            >\n              <div v-if=\"reconciliation?.system_data_file\" class=\"flex flex-col items-center\">\n                <CheckCircle class=\"w-12 h-12 text-green-500 mb-3\" />\n                <p class=\"font-medium text-green-700 mb-1\">System Data Uploaded</p>\n                <p class=\"text-sm text-gray-600 mb-3\">{{ reconciliation.system_records_count || 0 }} records</p>\n                <div class=\"flex gap-2\">\n                  <Button variant=\"ghost\" size=\"sm\" @click=\"viewFileData('system')\">\n                    <Eye class=\"w-4 h-4 mr-1\" /> View\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" @click=\"triggerFileInput('system')\" :disabled=\"!canUploadFiles\">\n                    <RefreshCw class=\"w-4 h-4 mr-1\" /> Replace\n                  </Button>\n                </div>\n              </div>\n              <div v-else class=\"flex flex-col items-center\">\n                <Upload class=\"w-12 h-12 text-gray-400 mb-3\" />\n                <p class=\"font-medium text-gray-700 mb-1\">System Data</p>\n                <p class=\"text-sm text-gray-500 mb-3\">CSV with posting_date, invoice_number, cu_invoice_number, net_amount</p>\n                <div class=\"flex gap-2 mb-2\">\n                  <Button \n                    variant=\"solid\" \n                    size=\"sm\" \n                    @click=\"triggerFileInput('system')\"\n                    :disabled=\"!canUploadFiles\"\n                    :loading=\"uploadingFile === 'system'\"\n                    class=\"bg-blue-600 hover:bg-blue-700\"\n                  >\n                    <span class=\"flex items-center gap-1\">\n                      <Upload class=\"w-4 h-4 shrink-0\" />\n                      <span>Upload CSV</span>\n                    </span>\n                  </Button>\n                </div>\n                <button \n                  @click=\"downloadTemplate('system')\" \n                  class=\"text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1\"\n                >\n                  <Download class=\"w-3 h-3\" /> Download Template\n                </button>\n              </div>\n              <input \n                ref=\"systemFileInput\"\n                type=\"file\" \n                accept=\".csv\"\n                class=\"hidden\"\n                @change=\"(e) => handleFileUpload(e, 'system')\"\n              />\n            </div>\n\n            <!-- iTax Data File -->\n            <div \n              v-if=\"requiresItaxData\"\n              class=\"border-2 border-dashed rounded-lg p-6 text-center transition-colors\"\n              :class=\"reconciliation?.itax_data_file ? 'border-green-300 bg-green-50' : 'border-gray-300 hover:border-blue-400'\"\n            >\n              <div v-if=\"reconciliation?.itax_data_file\" class=\"flex flex-col items-center\">\n                <CheckCircle class=\"w-12 h-12 text-green-500 mb-3\" />\n                <p class=\"font-medium text-green-700 mb-1\">iTax Data Uploaded</p>\n                <p class=\"text-sm text-gray-600 mb-3\">{{ reconciliation.itax_records_count || 0 }} records</p>\n                <div class=\"flex gap-2\">\n                  <Button variant=\"ghost\" size=\"sm\" @click=\"viewFileData('itax')\">\n                    <Eye class=\"w-4 h-4 mr-1\" /> View\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" @click=\"triggerFileInput('itax')\" :disabled=\"!canUploadFiles\">\n                    <RefreshCw class=\"w-4 h-4 mr-1\" /> Replace\n                  </Button>\n                </div>\n              </div>\n              <div v-else class=\"flex flex-col items-center\">\n                <Upload class=\"w-12 h-12 text-gray-400 mb-3\" />\n                <p class=\"font-medium text-gray-700 mb-1\">iTax Data</p>\n                <p class=\"text-sm text-gray-500 mb-3\">CSV with posting_date, cu_invoice_number, amount</p>\n                <div class=\"flex gap-2 mb-2\">\n                  <Button \n                    variant=\"solid\" \n                    size=\"sm\" \n                    @click=\"triggerFileInput('itax')\"\n                    :disabled=\"!canUploadFiles\"\n                    :loading=\"uploadingFile === 'itax'\"\n                    class=\"bg-blue-600 hover:bg-blue-700\"\n                  >\n                    <span class=\"flex items-center gap-1\">\n                      <Upload class=\"w-4 h-4 shrink-0\" />\n                      <span>Upload CSV</span>\n                    </span>\n                  </Button>\n                </div>\n                <button \n                  @click=\"downloadTemplate('itax')\" \n                  class=\"text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1\"\n                >\n                  <Download class=\"w-3 h-3\" /> Download Template\n                </button>\n              </div>\n              <input \n                ref=\"itaxFileInput\"\n                type=\"file\" \n                accept=\".csv\"\n                class=\"hidden\"\n                @change=\"(e) => handleFileUpload(e, 'itax')\"\n              />\n            </div>\n\n            <!-- TIMs Data File -->\n            <div \n              v-if=\"requiresTimsData\"\n              class=\"border-2 border-dashed rounded-lg p-6 text-center transition-colors\"\n              :class=\"reconciliation?.tims_data_file ? 'border-green-300 bg-green-50' : 'border-gray-300 hover:border-blue-400'\"\n            >\n              <div v-if=\"reconciliation?.tims_data_file\" class=\"flex flex-col items-center\">\n                <CheckCircle class=\"w-12 h-12 text-green-500 mb-3\" />\n                <p class=\"font-medium text-green-700 mb-1\">TIMs Data Uploaded</p>\n                <p class=\"text-sm text-gray-600 mb-3\">{{ reconciliation.tims_records_count || 0 }} records</p>\n                <div class=\"flex gap-2\">\n                  <Button variant=\"ghost\" size=\"sm\" @click=\"viewFileData('tims')\">\n                    <Eye class=\"w-4 h-4 mr-1\" /> View\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" @click=\"triggerFileInput('tims')\" :disabled=\"!canUploadFiles\">\n                    <RefreshCw class=\"w-4 h-4 mr-1\" /> Replace\n                  </Button>\n                </div>\n              </div>\n              <div v-else class=\"flex flex-col items-center\">\n                <Upload class=\"w-12 h-12 text-gray-400 mb-3\" />\n                <p class=\"font-medium text-gray-700 mb-1\">TIMs Device Data</p>\n                <p class=\"text-sm text-gray-500 mb-3\">CSV with posting_date, cu_invoice_number, amount</p>\n                <div class=\"flex gap-2 mb-2\">\n                  <Button \n                    variant=\"solid\" \n                    size=\"sm\" \n                    @click=\"triggerFileInput('tims')\"\n                    :disabled=\"!canUploadFiles\"\n                    :loading=\"uploadingFile === 'tims'\"\n                    class=\"bg-blue-600 hover:bg-blue-700\"\n                  >\n                    <span class=\"flex items-center gap-1\">\n                      <Upload class=\"w-4 h-4 shrink-0\" />\n                      <span>Upload CSV</span>\n                    </span>\n                  </Button>\n                </div>\n                <button \n                  @click=\"downloadTemplate('tims')\" \n                  class=\"text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1\"\n                >\n                  <Download class=\"w-3 h-3\" /> Download Template\n                </button>\n              </div>\n              <input \n                ref=\"timsFileInput\"\n                type=\"file\" \n                accept=\".csv\"\n                class=\"hidden\"\n                @change=\"(e) => handleFileUpload(e, 'tims')\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Debug Section - Temporarily hidden for troubleshooting -->\n      <!-- \n      <div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm\">\n        <div class=\"flex justify-between items-start mb-3\">\n          <div>\n            <p class=\"font-semibold text-gray-800\">Performance Optimizations Applied:</p>\n            <p>✅ Database-level filtering and pagination</p>\n            <p>✅ Results caching (5-minute expiry)</p>\n            <p>✅ Increased page size to 100 items</p>\n            <p>✅ Optimized API calls for large datasets</p>\n          </div>\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            @click=\"clearCacheAndReload\"\n            class=\"text-xs\"\n          >\n            Clear Cache\n          </Button>\n        </div>\n        \n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3\">\n          <div class=\"bg-white p-3 rounded border\">\n            <p class=\"text-xs text-gray-600\">Reconciliation Status</p>\n            <p class=\"font-medium\">{{ reconciliation?.status || 'Not loaded' }}</p>\n          </div>\n          <div class=\"bg-white p-3 rounded border\">\n            <p class=\"text-xs text-gray-600\">Results Loaded</p>\n            <p class=\"font-medium\">{{ reconciliationResults.length > 0 ? 'Yes' : 'No' }} ({{ reconciliationResults.length }} items)</p>\n          </div>\n          <div class=\"bg-white p-3 rounded border\">\n            <p class=\"text-xs text-gray-600\">Cache Status</p>\n            <p class=\"font-medium\">{{ Object.keys(store.resultsCache).length }} queries cached</p>\n            <p class=\"text-xs text-gray-500 mt-1\">\n              {{ Object.keys(store.resultsCache).length > 0 ? 'Cache active' : 'No cached data yet' }}\n            </p>\n          </div>\n        </div>\n        \n        <div class=\"mt-2 text-xs text-gray-600\">\n          <p><strong>Note:</strong> Cache populates when viewing results tabs for completed reconciliations. Switch between \"All\", \"Matched\", \"Missing in A/B\", or \"Amount Mismatch\" tabs to see caching in action.</p>\n        </div>\n        \n        <div v-if=\"Object.keys(store.resultsCache).length > 0\" class=\"mt-3\">\n          <p class=\"text-xs font-medium text-gray-700 mb-2\">Cached Queries:</p>\n          <div class=\"bg-white p-2 rounded border text-xs font-mono max-h-20 overflow-y-auto\">\n            <div v-for=\"(cacheKey, index) in Object.keys(store.resultsCache)\" :key=\"cacheKey\" class=\"mb-1\">\n              {{ index + 1 }}. {{ cacheKey }}\n            </div>\n          </div>\n        </div>\n      </div>\n      -->\n\n      <!-- Reconciliation Results -->\n      <div v-if=\"!isNewMode && hasResults\" class=\"bg-white rounded-lg border border-gray-200 shadow-sm\">\n        <div class=\"px-6 py-4 border-b border-gray-200\">\n          <div class=\"flex justify-between items-center\">\n            <div>\n              <h3 class=\"text-lg font-semibold text-gray-900\">Reconciliation Results</h3>\n              <p class=\"text-sm text-gray-600 mt-1\">\n                Last reconciled: {{ reconciliation?.last_reconciled_at ? formatDate(reconciliation.last_reconciled_at) : 'Never' }}\n              </p>\n            </div>\n            <div class=\"flex gap-2\">\n              <Button \n                v-for=\"tab in resultTabs\" \n                :key=\"tab.key\"\n                variant=\"ghost\" \n                size=\"sm\"\n                :class=\"activeResultTab === tab.key ? 'bg-blue-100 text-blue-700' : ''\"\n                @click=\"activeResultTab = tab.key\"\n              >\n                {{ tab.label }} ({{ tab.count }})\n              </Button>\n            </div>\n          </div>\n        </div>\n        <div class=\"overflow-x-auto\">\n          <table v-if=\"!loadingResults\" class=\"min-w-full divide-y divide-gray-200\">\n            <thead class=\"bg-gray-50\">\n              <tr>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">CU Invoice No</th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Invoice No</th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date (Source A)</th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date (Source B)</th>\n                <th class=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Amount (Source A)</th>\n                <th class=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Amount (Source B)</th>\n                <th class=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Variance</th>\n                <th class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n              </tr>\n            </thead>\n            <tbody class=\"bg-white divide-y divide-gray-200\">\n              <tr v-for=\"item in filteredResults\" :key=\"item.name\" class=\"hover:bg-gray-50\">\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{{ item.cu_invoice_number }}</td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ item.invoice_number || '-' }}</td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ formatDate(item.posting_date_a) }}</td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ formatDate(item.posting_date_b) }}</td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 tabular-nums\">{{ formatCurrency(item.amount_a) }}</td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 tabular-nums\">{{ formatCurrency(item.amount_b) }}</td>\n                <td \n                  class=\"px-6 py-4 whitespace-nowrap text-sm text-right font-medium tabular-nums\" \n                  :class=\"getVarianceClass(item.variance, item.match_status)\"\n                  :title=\"getVarianceTooltip(item.variance, item.match_status)\"\n                >\n                  {{ formatVariance(item.variance) }}\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-center\">\n                  <Badge :variant=\"getMatchStatusVariant(item.match_status)\">{{ item.match_status }}</Badge>\n                </td>\n              </tr>\n              <tr v-if=\"filteredResults.length === 0 && !loadingResults\">\n                <td colspan=\"8\" class=\"px-6 py-12 text-center text-gray-500\">\n                  No records found for this filter\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          \n          <!-- Loading state -->\n          <div v-else class=\"flex items-center justify-center py-12\">\n            <div class=\"flex items-center gap-3\">\n              <div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n              <span class=\"text-gray-600\">Loading reconciliation results...</span>\n            </div>\n          </div>\n        </div>\n        <!-- Results Pagination -->\n        <div v-if=\"resultsTotalPages > 1\" class=\"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between\">\n          <p class=\"text-sm text-gray-700\">\n            Showing {{ (resultsPage - 1) * resultsPageSize + 1 }} - {{ Math.min(resultsPage * resultsPageSize, filteredResultsTotal) }} of {{ filteredResultsTotal }}\n          </p>\n          <div class=\"flex gap-2\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              :disabled=\"resultsPage === 1\" \n              @click=\"changePage(resultsPage - 1)\"\n            >\n              Previous\n            </Button>\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              :disabled=\"resultsPage === resultsTotalPages\" \n              @click=\"changePage(resultsPage + 1)\"\n            >\n              Next\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Historical Comparison -->\n      <div v-if=\"!isNewMode && reconciliation?.status === 'Reconciled'\" class=\"bg-white rounded-lg border border-gray-200 shadow-sm\">\n        <div class=\"px-6 py-4 border-b border-gray-200\">\n          <div class=\"flex justify-between items-center\">\n            <div>\n              <h3 class=\"text-lg font-semibold text-gray-900\">Historical Comparison</h3>\n              <p class=\"text-sm text-gray-600 mt-1\">Compare with previous month's reconciliation</p>\n            </div>\n            <Button \n              variant=\"solid\" \n              size=\"sm\" \n              @click=\"fetchHistoricalComparison\"\n              :loading=\"loadingHistorical\"\n              class=\"bg-gray-600 hover:bg-gray-700\"\n            >\n              <TrendingUp class=\"w-4 h-4 mr-1\" /> Load Comparison\n            </Button>\n          </div>\n        </div>\n        <div v-if=\"historicalComparison\" class=\"p-6\">\n          <div class=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n            <div class=\"text-center p-4 bg-gray-50 rounded-lg\">\n              <p class=\"text-sm text-gray-600 mb-1\">Match Rate Change</p>\n              <p class=\"text-2xl font-bold\" :class=\"historicalComparison.match_rate_change >= 0 ? 'text-green-600' : 'text-red-600'\">\n                {{ historicalComparison.match_rate_change >= 0 ? '+' : '' }}{{ historicalComparison.match_rate_change?.toFixed(1) }}%\n              </p>\n            </div>\n            <div class=\"text-center p-4 bg-gray-50 rounded-lg\">\n              <p class=\"text-sm text-gray-600 mb-1\">Discrepancy Change</p>\n              <p class=\"text-2xl font-bold\" :class=\"historicalComparison.discrepancy_change <= 0 ? 'text-green-600' : 'text-red-600'\">\n                {{ historicalComparison.discrepancy_change >= 0 ? '+' : '' }}{{ historicalComparison.discrepancy_change }}\n              </p>\n            </div>\n            <div class=\"text-center p-4 bg-gray-50 rounded-lg\">\n              <p class=\"text-sm text-gray-600 mb-1\">Variance Change</p>\n              <p class=\"text-2xl font-bold\" :class=\"historicalComparison.variance_change <= 0 ? 'text-green-600' : 'text-red-600'\">\n                {{ formatCurrency(historicalComparison.variance_change) }}\n              </p>\n            </div>\n            <div class=\"text-center p-4 bg-gray-50 rounded-lg\">\n              <p class=\"text-sm text-gray-600 mb-1\">Previous Month</p>\n              <p class=\"text-2xl font-bold text-gray-900\">{{ historicalComparison.previous_month }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- File Preview Modal -->\n    <Dialog v-model=\"showFilePreview\" :options=\"{ title: `${previewFileType} Data Preview`, size: 'xl' }\">\n      <template #body-content>\n        <div class=\"max-h-96 overflow-auto\">\n          <table class=\"min-w-full divide-y divide-gray-200\">\n            <thead class=\"bg-gray-50 sticky top-0\">\n              <tr>\n                <th v-for=\"col in previewColumns\" :key=\"col\" class=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">\n                  {{ col }}\n                </th>\n              </tr>\n            </thead>\n            <tbody class=\"bg-white divide-y divide-gray-200\">\n              <tr v-for=\"(row, idx) in previewData\" :key=\"idx\" class=\"hover:bg-gray-50\">\n                <td v-for=\"col in previewColumns\" :key=\"col\" class=\"px-4 py-2 text-sm text-gray-900\">\n                  {{ row[col] }}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </template>\n      <template #actions>\n        <Button variant=\"solid\" size=\"sm\" @click=\"showFilePreview = false\">Close</Button>\n      </template>\n    </Dialog>\n  </div>\n</template>\n\n<script setup>\nimport { useVATReconciliationStore } from \"@/stores/useVATReconciliationStore\"\nimport { Badge, Button, Dialog, call } from \"frappe-ui\"\nimport AskAIButton from \"@/components/AskAIButton.vue\"\nimport {\n\tAlertTriangle,\n\tArrowLeft,\n\tBrain,\n\tCheckCircle,\n\tChevronDown,\n\tDatabase,\n\tDollarSign,\n\tDownload,\n\tEye,\n\tFileSpreadsheet,\n\tFileText,\n\tPlay,\n\tRefreshCw,\n\tSave,\n\tTrendingUp,\n\tUpload,\n\tXCircle,\n} from \"lucide-vue-next\"\nimport { computed, onMounted, ref, watch } from \"vue\"\nimport { useRoute, useRouter } from \"vue-router\"\n\nconst props = defineProps({\n\tid: String,\n})\n\nconst router = useRouter()\nconst route = useRoute()\nconst store = useVATReconciliationStore()\n\n// Refs\nconst systemFileInput = ref(null)\nconst itaxFileInput = ref(null)\nconst timsFileInput = ref(null)\nconst exportDropdownRef = ref(null)\n\n// State\nconst loading = ref(false)\nconst saving = ref(false)\nconst runningReconciliation = ref(false)\nconst uploadingFile = ref(null)\nconst loadingHistorical = ref(false)\nconst loadingResults = ref(false)\nconst showExportDropdown = ref(false)\nconst showFilePreview = ref(false)\nconst previewFileType = ref(\"\")\nconst previewData = ref([])\nconst previewColumns = ref([])\nconst activeResultTab = ref(\"all\")\nconst resultsPage = ref(1)\nconst resultsPageSize = ref(100) // Increased for better performance\nconst historicalComparison = ref(null)\n\nconst reconciliation = ref(null)\nconst reconciliationResults = ref([])\n\nconst form = ref({\n\treconciliation_month: \"\",\n\tfiscal_year: \"\",\n\treconciliation_type: \"\",\n\ttolerance: 0.01,\n})\n\nconst months = [\n\t\"January\",\n\t\"February\",\n\t\"March\",\n\t\"April\",\n\t\"May\",\n\t\"June\",\n\t\"July\",\n\t\"August\",\n\t\"September\",\n\t\"October\",\n\t\"November\",\n\t\"December\",\n]\n\nconst fiscalYears = computed(() => {\n\tconst currentYear = new Date().getFullYear()\n\treturn Array.from({ length: 6 }, (_, i) => `FY ${currentYear - i}`)\n})\n\nconst isNewMode = computed(() => route.path.endsWith(\"/new\"))\n\nconst canEditConfig = computed(() => {\n\treturn isNewMode.value || reconciliation.value?.status === \"Draft\"\n})\n\nconst requiresSystemData = computed(() => {\n\tconst type =\n\t\treconciliation.value?.reconciliation_type || form.value.reconciliation_type\n\t// Handle both frontend format (system_vs_itax) and DocType format (System vs iTax)\n\treturn (\n\t\ttype === \"system_vs_itax\" ||\n\t\ttype === \"system_vs_tims\" ||\n\t\ttype === \"System vs iTax\" ||\n\t\ttype === \"System vs TIMs\"\n\t)\n})\n\nconst requiresItaxData = computed(() => {\n\tconst type =\n\t\treconciliation.value?.reconciliation_type || form.value.reconciliation_type\n\treturn (\n\t\ttype === \"system_vs_itax\" ||\n\t\ttype === \"itax_vs_tims\" ||\n\t\ttype === \"System vs iTax\" ||\n\t\ttype === \"iTax vs TIMs\"\n\t)\n})\n\nconst requiresTimsData = computed(() => {\n\tconst type =\n\t\treconciliation.value?.reconciliation_type || form.value.reconciliation_type\n\treturn (\n\t\ttype === \"system_vs_tims\" ||\n\t\ttype === \"itax_vs_tims\" ||\n\t\ttype === \"System vs TIMs\" ||\n\t\ttype === \"iTax vs TIMs\"\n\t)\n})\n\nconst canUploadFiles = computed(() => {\n\tif (!reconciliation.value) return false\n\t// Allow uploads in Draft, Files Uploaded, Validated, or Processing states\n\treturn [\"Draft\", \"Files Uploaded\", \"Validated\", \"Validating\"].includes(\n\t\treconciliation.value.status,\n\t)\n})\n\nconst canRunReconciliation = computed(() => {\n\tif (!reconciliation.value) return false\n\tif (\n\t\t![\"Draft\", \"Files Uploaded\", \"Validated\"].includes(\n\t\t\treconciliation.value.status,\n\t\t)\n\t)\n\t\treturn false\n\n\tconst type = reconciliation.value.reconciliation_type\n\tif (type === \"system_vs_itax\" || type === \"System vs iTax\") {\n\t\treturn (\n\t\t\treconciliation.value.system_data_file &&\n\t\t\treconciliation.value.itax_data_file\n\t\t)\n\t}\n\tif (type === \"system_vs_tims\" || type === \"System vs TIMs\") {\n\t\treturn (\n\t\t\treconciliation.value.system_data_file &&\n\t\t\treconciliation.value.tims_data_file\n\t\t)\n\t}\n\tif (type === \"itax_vs_tims\" || type === \"iTax vs TIMs\") {\n\t\treturn (\n\t\t\treconciliation.value.itax_data_file && reconciliation.value.tims_data_file\n\t\t)\n\t}\n\treturn false\n})\n\nconst hasResults = computed(() => {\n\treturn (\n\t\treconciliationResults.value.length > 0 ||\n\t\treconciliation.value?.status === \"Completed\" ||\n\t\treconciliation.value?.status === \"Reconciled\"\n\t)\n})\n\n// Use document summary counts for tabs (not the loaded subset)\nconst resultTabs = computed(() => {\n\tconst doc = reconciliation.value\n\tconst totalAll =\n\t\t(doc?.total_matched || 0) +\n\t\t(doc?.total_unmatched_source_a || 0) +\n\t\t(doc?.total_unmatched_source_b || 0) +\n\t\t(doc?.total_amount_discrepancies || 0)\n\treturn [\n\t\t{ key: \"all\", label: \"All\", count: totalAll },\n\t\t{ key: \"matched\", label: \"Matched\", count: doc?.total_matched || 0 },\n\t\t{\n\t\t\tkey: \"unmatched_a\",\n\t\t\tlabel: \"Missing in B\",\n\t\t\tcount: doc?.total_unmatched_source_a || 0,\n\t\t},\n\t\t{\n\t\t\tkey: \"unmatched_b\",\n\t\t\tlabel: \"Missing in A\",\n\t\t\tcount: doc?.total_unmatched_source_b || 0,\n\t\t},\n\t\t{\n\t\t\tkey: \"discrepancy\",\n\t\t\tlabel: \"Amount Mismatch\",\n\t\t\tcount: doc?.total_amount_discrepancies || 0,\n\t\t},\n\t]\n})\n\n// Results are already filtered by the API based on activeResultTab\nconst filteredResults = computed(() => {\n\tconst start = (resultsPage.value - 1) * resultsPageSize.value\n\treturn reconciliationResults.value.slice(start, start + resultsPageSize.value)\n})\n\n// Total for current filter comes from document summary\nconst filteredResultsTotal = computed(() => {\n\tconst doc = reconciliation.value\n\tif (!doc) return 0\n\n\tif (activeResultTab.value === \"matched\") {\n\t\treturn doc.total_matched || 0\n\t} else if (activeResultTab.value === \"unmatched_a\") {\n\t\treturn doc.total_unmatched_source_a || 0\n\t} else if (activeResultTab.value === \"unmatched_b\") {\n\t\treturn doc.total_unmatched_source_b || 0\n\t} else if (activeResultTab.value === \"discrepancy\") {\n\t\treturn doc.total_amount_discrepancies || 0\n\t}\n\t// \"all\" tab\n\treturn (\n\t\t(doc.total_matched || 0) +\n\t\t(doc.total_unmatched_source_a || 0) +\n\t\t(doc.total_unmatched_source_b || 0) +\n\t\t(doc.total_amount_discrepancies || 0)\n\t)\n})\n\nconst resultsTotalPages = computed(() =>\n\tMath.ceil(filteredResultsTotal.value / resultsPageSize.value),\n)\n\n// Amount difference computed properties\nconst netDifference = computed(() => {\n\tif (!reconciliation.value) return 0\n\treturn (\n\t\t(reconciliation.value.total_source_a_amount || 0) -\n\t\t(reconciliation.value.total_source_b_amount || 0)\n\t)\n})\n\nconst matchRateColor = computed(() => {\n\tconst rate = reconciliation.value?.match_percentage || 0\n\tif (rate >= 95) return \"text-green-600\"\n\tif (rate >= 80) return \"text-yellow-600\"\n\treturn \"text-red-600\"\n})\n\nconst matchRateBarColor = computed(() => {\n\tconst rate = reconciliation.value?.match_percentage || 0\n\tif (rate >= 95) return \"bg-green-500\"\n\tif (rate >= 80) return \"bg-yellow-500\"\n\treturn \"bg-red-500\"\n})\n\n// Close export dropdown on outside click\nconst handleClickOutside = (event) => {\n\tif (\n\t\texportDropdownRef.value &&\n\t\t!exportDropdownRef.value.contains(event.target)\n\t) {\n\t\tshowExportDropdown.value = false\n\t}\n}\n\nonMounted(async () => {\n\tdocument.addEventListener(\"click\", handleClickOutside)\n\tif (!isNewMode.value) {\n\t\tawait loadReconciliation()\n\t}\n})\n\nasync function loadReconciliation() {\n\tloading.value = true\n\ttry {\n\t\tconst id = props.id || route.params.id\n\t\tawait store.fetchReconciliation(id)\n\t\treconciliation.value = store.activeReconciliation\n\n\t\t// Sync form with loaded data\n\t\tif (reconciliation.value) {\n\t\t\tform.value = {\n\t\t\t\treconciliation_type: reconciliation.value.reconciliation_type,\n\t\t\t\treconciliation_month: reconciliation.value.reconciliation_month,\n\t\t\t\tfiscal_year: reconciliation.value.fiscal_year,\n\t\t\t\ttolerance: reconciliation.value.tolerance || 0.01,\n\t\t\t}\n\t\t}\n\n\t\t// Load results if completed or reconciled\n\t\tif (\n\t\t\treconciliation.value?.status === \"Completed\" ||\n\t\t\treconciliation.value?.status === \"Reconciled\"\n\t\t) {\n\t\t\tawait loadResults()\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error loading reconciliation:\", error)\n\t} finally {\n\t\tloading.value = false\n\t}\n}\n\nasync function loadResults(filterStatus = null, pageNum = 1) {\n\ttry {\n\t\tloadingResults.value = true\n\t\tconsole.log(\n\t\t\t\"loadResults called with filterStatus:\",\n\t\t\tfilterStatus,\n\t\t\t\"page:\",\n\t\t\tpageNum,\n\t\t)\n\t\tconsole.log(\"reconciliation.name:\", reconciliation.value?.name)\n\n\t\t// Map tab key to match_status value\n\t\tlet statusFilter = null\n\t\tif (filterStatus === \"matched\") statusFilter = \"Matched\"\n\t\telse if (filterStatus === \"unmatched_a\") statusFilter = \"Unmatched Source A\"\n\t\telse if (filterStatus === \"unmatched_b\") statusFilter = \"Unmatched Source B\"\n\t\telse if (filterStatus === \"discrepancy\") statusFilter = \"Amount Discrepancy\"\n\n\t\tconsole.log(\"statusFilter:\", statusFilter)\n\n\t\tconst fetchResult = await store.fetchResults(\n\t\t\treconciliation.value.name,\n\t\t\tstatusFilter,\n\t\t\tpageNum,\n\t\t)\n\t\tconsole.log(\"store.fetchResults result:\", fetchResult)\n\n\t\treconciliationResults.value = store.reconciliationResults\n\t\tconsole.log(\n\t\t\t\"reconciliationResults set to:\",\n\t\t\treconciliationResults.value.length,\n\t\t\t\"items\",\n\t\t)\n\n\t\treturn fetchResult\n\t} catch (error) {\n\t\tconsole.error(\"Error loading results:\", error)\n\t} finally {\n\t\tloadingResults.value = false\n\t}\n}\n\nasync function createReconciliation() {\n\tif (\n\t\t!form.value.reconciliation_month ||\n\t\t!form.value.fiscal_year ||\n\t\t!form.value.reconciliation_type\n\t) {\n\t\talert(\"Please fill in all required fields\")\n\t\treturn\n\t}\n\n\tsaving.value = true\n\ttry {\n\t\tconst result = await store.createReconciliation({\n\t\t\treconciliation_month: form.value.reconciliation_month,\n\t\t\tfiscal_year: form.value.fiscal_year,\n\t\t\treconciliation_type: form.value.reconciliation_type,\n\t\t\ttolerance: form.value.tolerance || 0.01,\n\t\t})\n\n\t\trouter.push(`/compliance/vat-reconciliation/${result.name}`)\n\t} catch (error) {\n\t\tconsole.error(\"Error creating reconciliation:\", error)\n\t\talert(\"Error creating reconciliation: \" + error.message)\n\t} finally {\n\t\tsaving.value = false\n\t}\n}\n\nfunction triggerFileInput(type) {\n\tif (type === \"system\") systemFileInput.value?.click()\n\telse if (type === \"itax\") itaxFileInput.value?.click()\n\telse if (type === \"tims\") timsFileInput.value?.click()\n}\n\n// CSV Template definitions - columns must match backend EXPECTED_HEADERS\nconst csvTemplates = {\n\tsystem: {\n\t\tfilename: \"system_data_template.csv\",\n\t\theaders: [\n\t\t\t\"posting_date\",\n\t\t\t\"invoice_number\",\n\t\t\t\"cu_invoice_number\",\n\t\t\t\"net_amount\",\n\t\t],\n\t\tsampleData: [\n\t\t\t[\"2024-01-15\", \"INV-001\", \"CU123456789\", \"10000.00\"],\n\t\t\t[\"2024-01-16\", \"INV-002\", \"CU123456790\", \"5000.00\"],\n\t\t\t[\"2024-01-17\", \"INV-003\", \"CU123456791\", \"15000.00\"],\n\t\t],\n\t},\n\titax: {\n\t\tfilename: \"itax_data_template.csv\",\n\t\theaders: [\"posting_date\", \"cu_invoice_number\", \"amount\"],\n\t\tsampleData: [\n\t\t\t[\"2024-01-15\", \"CU123456789\", \"10000.00\"],\n\t\t\t[\"2024-01-16\", \"CU123456790\", \"5000.00\"],\n\t\t\t[\"2024-01-17\", \"CU123456791\", \"15000.00\"],\n\t\t],\n\t},\n\ttims: {\n\t\tfilename: \"tims_data_template.csv\",\n\t\theaders: [\"posting_date\", \"cu_invoice_number\", \"amount\"],\n\t\tsampleData: [\n\t\t\t[\"2024-01-15\", \"CU123456789\", \"10000.00\"],\n\t\t\t[\"2024-01-16\", \"CU123456790\", \"5000.00\"],\n\t\t\t[\"2024-01-17\", \"CU123456791\", \"15000.00\"],\n\t\t],\n\t},\n}\n\nfunction downloadTemplate(type) {\n\tconst template = csvTemplates[type]\n\tif (!template) return\n\n\t// Create CSV content\n\tconst rows = [template.headers, ...template.sampleData]\n\tconst csvContent = rows.map((row) => row.join(\",\")).join(\"\\n\")\n\n\t// Create blob and download\n\tconst blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" })\n\tconst link = document.createElement(\"a\")\n\tconst url = URL.createObjectURL(blob)\n\n\tlink.setAttribute(\"href\", url)\n\tlink.setAttribute(\"download\", template.filename)\n\tlink.style.visibility = \"hidden\"\n\tdocument.body.appendChild(link)\n\tlink.click()\n\tdocument.body.removeChild(link)\n\tURL.revokeObjectURL(url)\n}\n\nfunction downloadAllTemplates() {\n\t// Download all templates based on reconciliation type\n\tconst type =\n\t\treconciliation.value?.reconciliation_type || form.value.reconciliation_type\n\n\tif (requiresSystemData.value) downloadTemplate(\"system\")\n\tsetTimeout(() => {\n\t\tif (requiresItaxData.value) downloadTemplate(\"itax\")\n\t}, 100)\n\tsetTimeout(() => {\n\t\tif (requiresTimsData.value) downloadTemplate(\"tims\")\n\t}, 200)\n}\n\nasync function handleFileUpload(event, fileType) {\n\tconst file = event.target.files[0]\n\tif (!file) return\n\n\tuploadingFile.value = fileType\n\ttry {\n\t\tawait store.uploadFile(reconciliation.value.name, fileType, file)\n\t\tawait loadReconciliation()\n\t} catch (error) {\n\t\tconsole.error(\"Error uploading file:\", error)\n\t\talert(\"Error uploading file: \" + error.message)\n\t} finally {\n\t\tuploadingFile.value = null\n\t\t// Reset file input\n\t\tevent.target.value = \"\"\n\t}\n}\n\nasync function runReconciliation() {\n\trunningReconciliation.value = true\n\ttry {\n\t\tawait store.runReconciliation(reconciliation.value.name)\n\t\tawait loadReconciliation()\n\t\tawait loadResults()\n\t} catch (error) {\n\t\tconsole.error(\"Error running reconciliation:\", error)\n\t\talert(\"Error running reconciliation: \" + error.message)\n\t} finally {\n\t\trunningReconciliation.value = false\n\t}\n}\n\nasync function exportReport(format) {\n\tshowExportDropdown.value = false\n\ttry {\n\t\tconst result = await store.exportReport(reconciliation.value.name, format)\n\n\t\tif (result.file_url) {\n\t\t\twindow.open(result.file_url, \"_blank\")\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Error exporting report:\", error)\n\t\talert(\"Error exporting report: \" + error.message)\n\t}\n}\n\nasync function viewFileData(fileType) {\n\tpreviewFileType.value = fileType.charAt(0).toUpperCase() + fileType.slice(1)\n\n\t// Fetch data from the appropriate child table\n\ttry {\n\t\tlet doctype = \"\"\n\t\tif (fileType === \"system\") doctype = \"VAT System Data\"\n\t\telse if (fileType === \"itax\") doctype = \"VAT iTax Data\"\n\t\telse if (fileType === \"tims\") doctype = \"VAT TIMs Data\"\n\n\t\tconst result = await call(\"frappe.client.get_list\", {\n\t\t\tdoctype: doctype,\n\t\t\tfilters: { parent: reconciliation.value.name },\n\t\t\tfields: [\"*\"],\n\t\t\tlimit_page_length: 100,\n\t\t})\n\n\t\tif (result.length > 0) {\n\t\t\tpreviewColumns.value = Object.keys(result[0]).filter(\n\t\t\t\t(k) =>\n\t\t\t\t\t!k.startsWith(\"_\") &&\n\t\t\t\t\tk !== \"name\" &&\n\t\t\t\t\tk !== \"parent\" &&\n\t\t\t\t\tk !== \"parenttype\" &&\n\t\t\t\t\tk !== \"parentfield\" &&\n\t\t\t\t\tk !== \"docstatus\" &&\n\t\t\t\t\tk !== \"idx\",\n\t\t\t)\n\t\t\tpreviewData.value = result\n\t\t}\n\n\t\tshowFilePreview.value = true\n\t} catch (error) {\n\t\tconsole.error(\"Error loading file data:\", error)\n\t}\n}\n\nasync function fetchHistoricalComparison() {\n\tloadingHistorical.value = true\n\ttry {\n\t\tawait store.fetchHistoricalComparison(reconciliation.value.name)\n\t\thistoricalComparison.value = store.historicalComparison\n\t} catch (error) {\n\t\tconsole.error(\"Error fetching historical comparison:\", error)\n\t} finally {\n\t\tloadingHistorical.value = false\n\t}\n}\n\nfunction goBack() {\n\trouter.push(\"/compliance/vat-reconciliation\")\n}\n\nasync function clearCacheAndReload() {\n\t// Clear the results cache\n\tstore.clearResultsCache(reconciliation.value?.name)\n\n\t// Reload results if we have a completed reconciliation\n\tif (\n\t\treconciliation.value?.status === \"Completed\" ||\n\t\treconciliation.value?.status === \"Reconciled\"\n\t) {\n\t\tawait loadResults()\n\t}\n}\n\nasync function changePage(newPage) {\n\tresultsPage.value = newPage\n\tconst filterStatus =\n\t\tactiveResultTab.value === \"all\" ? null : activeResultTab.value\n\tawait loadResults(filterStatus, newPage)\n}\n\nfunction getStatusVariant(status) {\n\tconst variants = {\n\t\tDraft: \"subtle\",\n\t\t\"Data Uploaded\": \"yellow\",\n\t\tReconciled: \"blue\",\n\t\tReviewed: \"purple\",\n\t\tApproved: \"green\",\n\t}\n\treturn variants[status] || \"gray\"\n}\n\nfunction getMatchStatusVariant(status) {\n\tconst variants = {\n\t\tMatched: \"green\",\n\t\t\"Unmatched Source A\": \"yellow\",\n\t\t\"Unmatched Source B\": \"orange\",\n\t\t\"Amount Discrepancy\": \"red\",\n\t}\n\treturn variants[status] || \"gray\"\n}\n\nfunction formatDate(date) {\n\tif (!date) return \"-\"\n\treturn new Date(date).toLocaleDateString(\"en-US\", {\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t\tyear: \"numeric\",\n\t})\n}\n\nfunction formatCurrency(amount) {\n\tif (amount === null || amount === undefined) return \"-\"\n\treturn new Intl.NumberFormat(\"en-KE\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"KES\",\n\t\tminimumFractionDigits: 2,\n\t}).format(amount)\n}\n\nfunction formatVariance(variance) {\n\tif (variance === null || variance === undefined || variance === 0)\n\t\treturn \"KES 0.00\"\n\tconst absAmount = Math.abs(variance)\n\tconst formatted = new Intl.NumberFormat(\"en-KE\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"KES\",\n\t\tminimumFractionDigits: 2,\n\t}).format(absAmount)\n\treturn variance > 0 ? `+${formatted}` : `-${formatted}`\n}\n\nfunction getVarianceClass(variance, matchStatus) {\n\tif (variance === 0 || matchStatus === \"Matched\") return \"text-green-600\"\n\tif (variance > 0) return \"text-orange-600\" // Source A higher\n\treturn \"text-red-600\" // Source B higher (negative variance)\n}\n\nfunction getVarianceTooltip(variance, matchStatus) {\n\tif (matchStatus === \"Matched\") return \"Amounts match within tolerance\"\n\tif (matchStatus === \"Unmatched Source A\") return \"Only exists in Source A\"\n\tif (matchStatus === \"Unmatched Source B\") return \"Only exists in Source B\"\n\tif (variance > 0)\n\t\treturn \"Source A amount is higher by \" + formatCurrency(variance)\n\tif (variance < 0)\n\t\treturn \"Source B amount is higher by \" + formatCurrency(Math.abs(variance))\n\treturn \"\"\n}\n\nfunction getVATReconciliationContext() {\n\treturn {\n\t\treconciliation_name: reconciliation.value?.name,\n\t\treconciliation_month: reconciliation.value?.reconciliation_month,\n\t\tfiscal_year: reconciliation.value?.fiscal_year,\n\t\treconciliation_type: reconciliation.value?.reconciliation_type,\n\t\tstatus: reconciliation.value?.status,\n\t\ttolerance: reconciliation.value?.tolerance,\n\t\tmatch_percentage: reconciliation.value?.match_percentage,\n\t\ttotal_matched: reconciliation.value?.total_matched,\n\t\ttotal_unmatched_source_a: reconciliation.value?.total_unmatched_source_a,\n\t\ttotal_unmatched_source_b: reconciliation.value?.total_unmatched_source_b,\n\t\ttotal_amount_discrepancies: reconciliation.value?.total_amount_discrepancies,\n\t\ttotal_source_a_amount: reconciliation.value?.total_source_a_amount,\n\t\ttotal_source_b_amount: reconciliation.value?.total_source_b_amount,\n\t\ttotal_variance_amount: reconciliation.value?.total_variance_amount,\n\t\tsystem_records_count: reconciliation.value?.system_records_count,\n\t\titax_records_count: reconciliation.value?.itax_records_count,\n\t\ttims_records_count: reconciliation.value?.tims_records_count,\n\t\tsample_discrepancies: reconciliationResults.value?.slice(0, 5).map(item => ({\n\t\t\tcu_invoice_number: item.cu_invoice_number,\n\t\t\tinvoice_number: item.invoice_number,\n\t\t\tamount_a: item.amount_a,\n\t\t\tamount_b: item.amount_b,\n\t\t\tvariance: item.variance,\n\t\t\tmatch_status: item.match_status\n\t\t}))\n\t}\n}\n\nfunction askAISpecialist() {\n\t// Collect current reconciliation context\n\tconst context = {\n\t\treconciliation_name: reconciliation.value.name,\n\t\treconciliation_month: reconciliation.value.reconciliation_month,\n\t\tfiscal_year: reconciliation.value.fiscal_year,\n\t\treconciliation_type: reconciliation.value.reconciliation_type,\n\t\tstatus: reconciliation.value.status,\n\t\ttolerance: reconciliation.value.tolerance,\n\t\tmatch_percentage: reconciliation.value.match_percentage,\n\t\ttotal_matched: reconciliation.value.total_matched,\n\t\ttotal_unmatched_source_a: reconciliation.value.total_unmatched_source_a,\n\t\ttotal_unmatched_source_b: reconciliation.value.total_unmatched_source_b,\n\t\ttotal_amount_discrepancies: reconciliation.value.total_amount_discrepancies,\n\t\ttotal_source_a_amount: reconciliation.value.total_source_a_amount,\n\t\ttotal_source_b_amount: reconciliation.value.total_source_b_amount,\n\t\ttotal_variance_amount: reconciliation.value.total_variance_amount,\n\t\tsystem_records_count: reconciliation.value.system_records_count,\n\t\titax_records_count: reconciliation.value.itax_records_count,\n\t\ttims_records_count: reconciliation.value.tims_records_count,\n\t\tlast_reconciled_at: reconciliation.value.last_reconciled_at,\n\t\t// Include summary of top discrepancies if available\n\t\tsample_discrepancies: reconciliationResults.value.slice(0, 5).map(item => ({\n\t\t\tcu_invoice_number: item.cu_invoice_number,\n\t\t\tinvoice_number: item.invoice_number,\n\t\t\tamount_a: item.amount_a,\n\t\t\tamount_b: item.amount_b,\n\t\t\tvariance: item.variance,\n\t\t\tmatch_status: item.match_status\n\t\t}))\n\t}\n\n\t// Store context in localStorage\n\tlocalStorage.setItem('vat_reconciliation_context', JSON.stringify(context))\n\n\t// Navigate to AI Specialist with context indicator\n\trouter.push('/ai-specialist?context=vat_reconciliation')\n}\n\n// Watch for tab changes to reload results with new filter\nwatch(activeResultTab, async (newTab) => {\n\tresultsPage.value = 1\n\tif (reconciliation.value?.name) {\n\t\tawait loadResults(newTab === \"all\" ? null : newTab, resultsPage.value)\n\t}\n})\n</script>\n"],"names":["props","__props","router","useRouter","route","useRoute","store","useVATReconciliationStore","systemFileInput","ref","itaxFileInput","timsFileInput","exportDropdownRef","loading","saving","runningReconciliation","uploadingFile","loadingHistorical","loadingResults","showExportDropdown","showFilePreview","previewFileType","previewData","previewColumns","activeResultTab","resultsPage","resultsPageSize","historicalComparison","reconciliation","reconciliationResults","form","months","fiscalYears","computed","currentYear","_","i","isNewMode","canEditConfig","_a","requiresSystemData","type","requiresItaxData","requiresTimsData","canUploadFiles","canRunReconciliation","hasResults","_b","resultTabs","doc","filteredResults","start","filteredResultsTotal","resultsTotalPages","netDifference","matchRateColor","rate","matchRateBarColor","handleClickOutside","event","onMounted","__async","loadReconciliation","id","loadResults","error","filterStatus","pageNum","statusFilter","fetchResult","createReconciliation","result","triggerFileInput","_c","csvTemplates","downloadTemplate","template","csvContent","row","blob","link","url","downloadAllTemplates","handleFileUpload","fileType","file","runReconciliation","exportReport","format","viewFileData","doctype","call","k","fetchHistoricalComparison","goBack","changePage","newPage","getStatusVariant","status","getMatchStatusVariant","formatDate","date","formatCurrency","amount","formatVariance","variance","absAmount","formatted","getVarianceClass","matchStatus","getVarianceTooltip","getVATReconciliationContext","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","item","watch","newTab","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_unref","Button","ArrowLeft","_hoisted_5","_hoisted_6","_toDisplayString","_createBlock","Badge","_createTextVNode","_hoisted_7","_hoisted_8","_hoisted_9","Play","_cache","$event","_hoisted_10","Download","ChevronDown","_hoisted_11","FileSpreadsheet","FileText","AskAIButton","_hoisted_12","Save","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_Fragment","_renderList","month","_hoisted_23","_vModelSelect","_hoisted_24","_hoisted_25","year","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","Database","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","CheckCircle","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","AlertTriangle","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","XCircle","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","DollarSign","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","TrendingUp","_hoisted_69","_normalizeClass","_hoisted_70","_hoisted_75","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_80","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_normalizeStyle","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","Eye","RefreshCw","_hoisted_90","Upload","_hoisted_91","_hoisted_92","e","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","tab","_hoisted_110","_hoisted_122","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","_hoisted_120","_hoisted_121","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","_hoisted_127","_hoisted_128","_hoisted_129","_hoisted_130","_hoisted_131","_hoisted_132","_hoisted_133","_hoisted_134","_hoisted_135","Dialog","_hoisted_136","_hoisted_137","_hoisted_138","col","_hoisted_139","idx"],"mappings":"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"}