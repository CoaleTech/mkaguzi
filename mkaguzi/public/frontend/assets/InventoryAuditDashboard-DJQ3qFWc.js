var j=(N,_,g)=>new Promise((f,c)=>{var h=m=>{try{x(g.next(m))}catch(p){c(p)}},b=m=>{try{x(g.throw(m))}catch(p){c(p)}},x=m=>m.done?f(m.value):Promise.resolve(m.value).then(h,b);x((g=g.apply(N,_)).next())});import{p as rt,a as v,c as w}from"./index-qIC3Tfxg.js";import{ab as dt,r as ct,j as y,Q as ut,l,p as i,q as t,s as o,u,v as a,z as d,A as n,$ as K,B as T,F as k,x as C,H as V,y as _t}from"./vue-DciwFjI_.js";import{$ as gt,N as mt,f as Q,v as I,T as Y,Y as vt,d as xt,b5 as pt,bp as ft,b3 as yt,a6 as ht,n as bt,x as wt}from"./icons-CtLkBOsu.js";import"./charts-DlPBe6v3.js";import"./utils-Bcd7wHeW.js";const kt={class:"p-6"},Ct={class:"flex justify-between items-center mb-6"},St={class:"flex gap-2"},At={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},jt={class:"bg-white rounded-lg border p-4 shadow-sm"},Tt={class:"flex items-center justify-between"},Vt={class:"text-2xl font-bold text-gray-900"},It={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},Nt={class:"mt-2 flex items-center gap-4 text-sm"},Pt={class:"text-green-600"},$t={class:"text-gray-500"},zt={class:"bg-white rounded-lg border p-4 shadow-sm"},Dt={class:"flex items-center justify-between"},Bt={class:"text-2xl font-bold text-gray-900"},Ft={class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},Rt={class:"mt-2 flex items-center gap-4 text-sm"},Lt={class:"text-yellow-600"},Mt={class:"bg-white rounded-lg border p-4 shadow-sm"},Ot={class:"flex items-center justify-between"},Ht={class:"text-2xl font-bold text-gray-900"},Ut={class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},qt={class:"mt-2 flex items-center gap-4 text-sm"},Et={class:"text-orange-600"},Gt={class:"text-red-600"},Kt={class:"bg-white rounded-lg border p-4 shadow-sm"},Qt={class:"flex items-center justify-between"},Yt={class:"text-2xl font-bold text-gray-900"},Jt={class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},Wt={class:"mt-2"},Xt={class:"w-full bg-gray-200 rounded-full h-2"},Zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},ts={class:"bg-white rounded-lg border p-4 shadow-sm"},ss={class:"flex items-center justify-between mb-4"},es={class:"flex items-center gap-8"},as={class:"text-center"},os={class:"text-3xl font-bold text-yellow-600"},ns={class:"text-center"},is={class:"text-3xl font-bold text-gray-600"},ls={class:"bg-white rounded-lg border p-4 shadow-sm"},rs={class:"flex items-center justify-between mb-4"},ds={class:"flex items-center gap-8"},cs={class:"text-center"},us={class:"text-3xl font-bold text-blue-600"},_s={class:"text-center"},gs={class:"text-3xl font-bold text-gray-600"},ms={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},vs={class:"bg-white rounded-lg border shadow-sm"},xs={class:"px-4 py-3 border-b flex items-center justify-between"},ps={key:0,class:"divide-y"},fs=["onClick"],ys={class:"flex items-center justify-between mb-2"},hs={class:"font-medium text-gray-900"},bs={class:"flex items-center gap-4 text-sm text-gray-500"},ws={class:"flex items-center gap-1"},ks={class:"flex items-center gap-1"},Cs={key:1,class:"p-8 text-center text-gray-500"},Ss={class:"bg-white rounded-lg border shadow-sm"},As={class:"px-4 py-3 border-b flex items-center justify-between"},js={key:0,class:"divide-y"},Ts=["onClick"],Vs={class:"flex items-center justify-between mb-2"},Is={class:"font-medium text-gray-900"},Ns={class:"flex items-center gap-4 text-sm text-gray-500"},Ps={class:"flex items-center gap-1"},$s={key:0,class:"flex items-center gap-1 text-orange-600"},zs={class:"mt-2 flex items-center gap-2"},Ds={key:0,class:"text-xs text-green-600"},Bs={key:1,class:"text-xs text-gray-400"},Fs={key:2,class:"text-xs text-green-600"},Rs={key:3,class:"text-xs text-gray-400"},Ls={key:4,class:"text-xs text-green-600"},Ms={key:5,class:"text-xs text-gray-400"},Os={key:1,class:"p-8 text-center text-gray-500"},Hs={class:"bg-white rounded-lg border shadow-sm"},Us={class:"px-4 py-3 border-b flex items-center justify-between"},qs={key:0,class:"divide-y"},Es=["onClick"],Gs={class:"flex items-center justify-between mb-2"},Ks={class:"font-medium text-gray-900"},Qs={class:"flex items-center gap-2"},Ys={class:"flex items-center gap-4 text-sm text-gray-500"},Js={class:"flex items-center gap-1"},Ws={class:"flex items-center gap-1"},Xs={key:0,class:"flex items-center gap-1"},Zs={key:1,class:"p-8 text-center text-gray-500"},te={class:"bg-white rounded-lg border shadow-sm"},se={class:"px-4 py-3 border-b flex items-center justify-between"},ee={key:0,class:"divide-y"},ae=["onClick"],oe={class:"flex items-center justify-between mb-2"},ne={class:"font-medium text-gray-900"},ie={class:"flex items-center gap-2"},le={class:"text-gray-500"},re={class:"w-full bg-gray-200 rounded-full h-2"},de={key:1,class:"p-8 text-center text-gray-500"},xe={__name:"InventoryAuditDashboard",setup(N){const _=dt(),g=rt(),f=ct(!1),c=y(()=>g.dashboardStats),h=y(()=>g.plans.slice(0,5)),b=y(()=>g.sessions.slice(0,5)),x=y(()=>g.getOpenVarianceCases.slice(0,5)),m=y(()=>g.scorecards);ut(()=>j(this,null,function*(){yield p()}));function p(){return j(this,null,function*(){f.value=!0;try{yield g.loadAllData()}finally{f.value=!1}})}function P(r){return{Planned:"blue","In Progress":"yellow",Completed:"green","On Hold":"gray",Cancelled:"red",New:"blue","Under Investigation":"yellow","Resolution Proposed":"orange",Resolved:"green",Closed:"gray"}[r]||"gray"}function J(r){return{Critical:"red",High:"orange",Medium:"yellow",Low:"blue"}[r]||"gray"}function $(r){return r>=90?"bg-green-500":r>=70?"bg-yellow-500":r>=50?"bg-orange-500":"bg-red-500"}function W(r){return{A:"text-green-600",B:"text-blue-600",C:"text-yellow-600",D:"text-orange-600",F:"text-red-600"}[r]||"text-gray-600"}function X(r){return new Intl.NumberFormat().format(r||0)}function Z(r){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(r||0)}function S(){_.push("/inventory-audit/plans")}function z(){_.push("/inventory-audit/sessions")}function tt(){_.push("/inventory-audit/variance-cases")}function st(){_.push("/inventory-audit/scorecards")}function et(){_.push("/inventory-audit/issues")}function at(){_.push("/inventory-audit/items")}function ot(r){_.push(`/inventory-audit/plans/${r}`)}function nt(r){_.push(`/inventory-audit/sessions/${r}`)}function it(r){_.push(`/inventory-audit/variance-cases/${r}`)}function lt(r){_.push(`/inventory-audit/scorecards/${r}`)}return(r,s)=>{var D,B,F,R,L,M,O,H,U,q,E,G;return i(),l("div",kt,[t("div",Ct,[s[1]||(s[1]=t("div",null,[t("h1",{class:"text-2xl font-bold"},"Inventory Audit Dashboard"),t("p",{class:"text-gray-600"},"Overview of stock take audits, variance analysis, and compliance metrics")],-1)),t("div",St,[o(a(v),{onClick:p,loading:f.value,variant:"outline",size:"sm"},{default:u(()=>[o(a(gt),{class:"w-4 h-4"})]),_:1},8,["loading"]),o(a(v),{onClick:S},{default:u(()=>[o(a(mt),{class:"w-4 h-4 mr-2"}),s[0]||(s[0]=d(" New Audit Plan ",-1))]),_:1})])]),t("div",At,[t("div",jt,[t("div",Tt,[t("div",null,[s[2]||(s[2]=t("p",{class:"text-sm text-gray-500"},"Audit Plans",-1)),t("p",Vt,n(((D=c.value.plans)==null?void 0:D.total)||0),1)]),t("div",It,[o(a(Q),{class:"w-6 h-6 text-blue-600"})])]),t("div",Nt,[t("span",Pt,n(((B=c.value.plans)==null?void 0:B.active)||0)+" active",1),t("span",$t,n(((F=c.value.plans)==null?void 0:F.completed)||0)+" completed",1)])]),t("div",zt,[t("div",Dt,[t("div",null,[s[3]||(s[3]=t("p",{class:"text-sm text-gray-500"},"Stock Take Sessions",-1)),t("p",Bt,n(((R=c.value.sessions)==null?void 0:R.total)||0),1)]),t("div",Ft,[o(a(I),{class:"w-6 h-6 text-green-600"})])]),t("div",Rt,[t("span",Lt,n(((L=c.value.sessions)==null?void 0:L.in_progress)||0)+" in progress",1)])]),t("div",Mt,[t("div",Ot,[t("div",null,[s[4]||(s[4]=t("p",{class:"text-sm text-gray-500"},"Variance Cases",-1)),t("p",Ht,n(((M=c.value.variance_cases)==null?void 0:M.total)||0),1)]),t("div",Ut,[o(a(Y),{class:"w-6 h-6 text-orange-600"})])]),t("div",qt,[t("span",Et,n(((O=c.value.variance_cases)==null?void 0:O.open)||0)+" open",1),t("span",Gt,n(((H=c.value.variance_cases)==null?void 0:H.sla_breached)||0)+" SLA breached",1)])]),t("div",Kt,[t("div",Qt,[t("div",null,[s[5]||(s[5]=t("p",{class:"text-sm text-gray-500"},"Avg Compliance Score",-1)),t("p",Yt,n(Math.round(c.value.avg_compliance_score||0))+"%",1)]),t("div",Jt,[o(a(vt),{class:"w-6 h-6 text-purple-600"})])]),t("div",Wt,[t("div",Xt,[t("div",{class:T(["h-2 rounded-full transition-all duration-300",$(c.value.avg_compliance_score)]),style:K({width:`${c.value.avg_compliance_score||0}%`})},null,6)])])])]),t("div",Zt,[t("div",ts,[t("div",ss,[s[7]||(s[7]=t("h3",{class:"font-semibold text-gray-900"},"Stock Take Issues",-1)),o(a(v),{variant:"ghost",size:"sm",onClick:et},{default:u(()=>[...s[6]||(s[6]=[d("View All",-1)])]),_:1})]),t("div",es,[t("div",as,[t("p",os,n(((U=c.value.issues)==null?void 0:U.open)||0),1),s[8]||(s[8]=t("p",{class:"text-sm text-gray-500"},"Open Issues",-1))]),t("div",ns,[t("p",is,n(((q=c.value.issues)==null?void 0:q.total)||0),1),s[9]||(s[9]=t("p",{class:"text-sm text-gray-500"},"Total Issues",-1))])])]),t("div",ls,[t("div",rs,[s[11]||(s[11]=t("h3",{class:"font-semibold text-gray-900"},"Inventory Items",-1)),o(a(v),{variant:"ghost",size:"sm",onClick:at},{default:u(()=>[...s[10]||(s[10]=[d("View All",-1)])]),_:1})]),t("div",ds,[t("div",cs,[t("p",us,n(((E=c.value.items)==null?void 0:E.active)||0),1),s[12]||(s[12]=t("p",{class:"text-sm text-gray-500"},"Active Items",-1))]),t("div",_s,[t("p",gs,n(((G=c.value.items)==null?void 0:G.total)||0),1),s[13]||(s[13]=t("p",{class:"text-sm text-gray-500"},"Total Items",-1))])])])]),t("div",ms,[t("div",vs,[t("div",xs,[s[15]||(s[15]=t("h3",{class:"font-semibold text-gray-900"},"Recent Audit Plans",-1)),o(a(v),{variant:"ghost",size:"sm",onClick:S},{default:u(()=>[...s[14]||(s[14]=[d("View All",-1)])]),_:1})]),h.value.length>0?(i(),l("div",ps,[(i(!0),l(k,null,C(h.value,e=>(i(),l("div",{key:e.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:A=>ot(e.name)},[t("div",ys,[t("span",hs,n(e.plan_title),1),o(a(w),{variant:P(e.status)},{default:u(()=>[d(n(e.status),1)]),_:2},1032,["variant"])]),t("div",bs,[t("span",ws,[o(a(xt),{class:"w-4 h-4"}),d(" "+n(e.audit_period),1)]),t("span",ks,[o(a(pt),{class:"w-4 h-4"}),d(" "+n(e.warehouse||e.branch||"All"),1)])])],8,fs))),128))])):(i(),l("div",Cs,[o(a(Q),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s[17]||(s[17]=t("p",null,"No audit plans yet",-1)),o(a(v),{variant:"outline",size:"sm",class:"mt-2",onClick:S},{default:u(()=>[...s[16]||(s[16]=[d(" Create First Plan ",-1)])]),_:1})]))]),t("div",Ss,[t("div",As,[s[19]||(s[19]=t("h3",{class:"font-semibold text-gray-900"},"Recent Stock Take Sessions",-1)),o(a(v),{variant:"ghost",size:"sm",onClick:z},{default:u(()=>[...s[18]||(s[18]=[d("View All",-1)])]),_:1})]),b.value.length>0?(i(),l("div",js,[(i(!0),l(k,null,C(b.value,e=>(i(),l("div",{key:e.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:A=>nt(e.name)},[t("div",Vs,[t("span",Is,n(e.session_title),1),o(a(w),{variant:P(e.status)},{default:u(()=>[d(n(e.status),1)]),_:2},1032,["variant"])]),t("div",Ns,[t("span",Ps,[o(a(I),{class:"w-4 h-4"}),d(" "+n(e.total_items_counted||0)+" items ",1)]),e.items_with_variance?(i(),l("span",$s,[o(a(Y),{class:"w-4 h-4"}),d(" "+n(e.items_with_variance)+" variances ",1)])):V("",!0)]),t("div",zs,[e.team_signoff?(i(),l("span",Ds,"✓ Team")):(i(),l("span",Bs,"○ Team")),e.supervisor_signoff?(i(),l("span",Fs,"✓ Supervisor")):(i(),l("span",Rs,"○ Supervisor")),e.auditor_signoff?(i(),l("span",Ls,"✓ Auditor")):(i(),l("span",Ms,"○ Auditor"))])],8,Ts))),128))])):(i(),l("div",Os,[o(a(I),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s[21]||(s[21]=t("p",null,"No stock take sessions yet",-1)),o(a(v),{variant:"outline",size:"sm",class:"mt-2",onClick:z},{default:u(()=>[...s[20]||(s[20]=[d(" Start Session ",-1)])]),_:1})]))]),t("div",Hs,[t("div",Us,[s[23]||(s[23]=t("h3",{class:"font-semibold text-gray-900"},"Open Variance Cases",-1)),o(a(v),{variant:"ghost",size:"sm",onClick:tt},{default:u(()=>[...s[22]||(s[22]=[d("View All",-1)])]),_:1})]),x.value.length>0?(i(),l("div",qs,[(i(!0),l(k,null,C(x.value,e=>(i(),l("div",{key:e.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:A=>it(e.name)},[t("div",Gs,[t("span",Ks,n(e.item_code),1),t("div",Qs,[e.is_sla_breached?(i(),_t(a(w),{key:0,variant:"red"},{default:u(()=>[...s[24]||(s[24]=[d("SLA Breached",-1)])]),_:1})):V("",!0),o(a(w),{variant:J(e.priority)},{default:u(()=>[d(n(e.priority),1)]),_:2},1032,["variant"])])]),t("div",Ys,[t("span",Js,[o(a(ft),{class:"w-4 h-4"}),d(" "+n(X(e.variance_quantity))+" units ",1)]),t("span",Ws,[o(a(yt),{class:"w-4 h-4"}),d(" "+n(Z(e.variance_value)),1)]),e.root_cause?(i(),l("span",Xs,[o(a(ht),{class:"w-4 h-4"}),d(" "+n(e.root_cause),1)])):V("",!0)])],8,Es))),128))])):(i(),l("div",Zs,[o(a(bt),{class:"w-12 h-12 mx-auto mb-3 text-green-300"}),s[25]||(s[25]=t("p",null,"No open variance cases",-1))]))]),t("div",te,[t("div",se,[s[27]||(s[27]=t("h3",{class:"font-semibold text-gray-900"},"Compliance Scorecards",-1)),o(a(v),{variant:"ghost",size:"sm",onClick:st},{default:u(()=>[...s[26]||(s[26]=[d("View All",-1)])]),_:1})]),m.value.length>0?(i(),l("div",ee,[(i(!0),l(k,null,C(m.value.slice(0,5),e=>(i(),l("div",{key:e.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:A=>lt(e.name)},[t("div",oe,[t("span",ne,n(e.audit_plan_title),1),t("div",ie,[t("span",{class:T(["text-lg font-bold",W(e.grade)])},n(e.grade),3),t("span",le,n(Math.round(e.overall_compliance_score||0))+"%",1)])]),t("div",re,[t("div",{class:T(["h-2 rounded-full transition-all duration-300",$(e.overall_compliance_score)]),style:K({width:`${e.overall_compliance_score||0}%`})},null,6)])],8,ae))),128))])):(i(),l("div",de,[o(a(wt),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s[28]||(s[28]=t("p",null,"No scorecards available",-1))]))])])])}}};export{xe as default};
//# sourceMappingURL=InventoryAuditDashboard-DJQ3qFWc.js.map
