var be=Object.defineProperty,xe=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var X=(x,k,v)=>k in x?be(x,k,{enumerable:!0,configurable:!0,writable:!0,value:v}):x[k]=v,z=(x,k)=>{for(var v in k||(k={}))we.call(k,v)&&X(x,v,k[v]);if(W)for(var v of W(k))he.call(k,v)&&X(x,v,k[v]);return x},Z=(x,k)=>xe(x,Ve(k));var P=(x,k,v)=>new Promise((_,a)=>{var U=V=>{try{d(v.next(V))}catch(g){a(g)}},h=V=>{try{d(v.throw(V))}catch(g){a(g)}},d=V=>V.done?_(V.value):Promise.resolve(V.value).then(U,h);d((v=v.apply(x,k)).next())});import{x as N,y as $e,z as te,b as c,d as u,g as l,i as y,t as p,e as o,f as w,B as F,r as I,c as B,D as Ce,F as D,q as E,p as Ae,h as r,j as t,k as j,G as ae,a as Re,u as Ue,w as Se,o as Me,A as Ie,_ as $,l as C,S as ee,J as De,K as m,m as L,T as se,P as O,L as Ee,M as Te,N as Pe}from"./index-BlKKK_3z.js";const Le={name:"Loading",props:{text:{type:String,default:"Loading..."}},components:{LoadingIndicator:$e}},je={class:"flex items-center text-base text-ink-gray-4"};function qe(x,k,v,_,a,U){const h=te("LoadingIndicator");return u(),c("div",je,[l(h,{class:"-ml-1 mr-2 h-3 w-3"}),y(" "+p(v.text),1)])}const ze=N(Le,[["render",qe]]),Fe={name:"Card",props:{title:{type:String},subtitle:{type:String},loading:{type:Boolean}},components:{LoadingText:ze}},Oe={class:"flex flex-col rounded-lg border bg-white px-6 py-5 shadow"},Be={class:"flex items-baseline justify-between"},Ne={class:"flex items-baseline space-x-2"},He={key:0,class:"flex items-center space-x-2"},Je={class:"text-xl font-semibold"},Ye={key:0,class:"flex items-center space-x-2"},Qe={key:0,class:"mt-1.5 text-base text-gray-600"},Ge={key:1,class:"mt-4 flex flex-auto flex-col items-center justify-center rounded-md"},Ke={key:2,class:"mt-4 flex-auto overflow-auto"};function We(x,k,v,_,a,U){const h=te("LoadingText");return u(),c("div",Oe,[o("div",Be,[o("div",Ne,[x.$slots["actions-left"]?(u(),c("div",He,[F(x.$slots,"actions-left")])):w("",!0),o("h2",Je,p(v.title),1)]),x.$slots.actions?(u(),c("div",Ye,[F(x.$slots,"actions")])):w("",!0)]),v.subtitle?(u(),c("p",Qe,p(v.subtitle),1)):w("",!0),v.loading?(u(),c("div",Ge,[l(h)])):x.$slots.default?(u(),c("div",Ke,[F(x.$slots,"default")])):w("",!0)])}const A=N(Fe,[["render",We]]),Xe={class:"risk-heat-map"},Ze={class:"grid grid-cols-6 gap-1 max-w-md mx-auto"},es={class:"text-center text-sm font-medium text-gray-700 p-2 flex items-center justify-center"},ss=["onClick"],ts={class:"space-y-4 max-h-96 overflow-y-auto"},as={key:0,class:"text-center text-gray-500 py-8"},ls={key:1,class:"space-y-3"},os={class:"flex items-start justify-between"},is={class:"flex-1"},rs={class:"font-medium text-sm"},ns={class:"text-sm text-gray-600 mt-1"},ds={class:"text-xs text-gray-500 mt-1"},us={__name:"RiskHeatMap",props:{risks:{type:Array,default:()=>[]},heatMapData:{type:Object,default:()=>({})}},setup(x){const k=x,v=I(!1),_=I({likelihood:0,impact:0}),a=B(()=>!_.value.likelihood||!_.value.impact?[]:k.risks.filter(g=>g.likelihood_score===_.value.likelihood&&g.impact_score===_.value.impact)),U=(g,i)=>{const f=g*i,T=h(g,i);let S="border-gray-200";return f>=19?S="bg-red-100 border-red-300 text-red-800":f>=13?S="bg-orange-100 border-orange-300 text-orange-800":f>=7?S="bg-yellow-100 border-yellow-300 text-yellow-800":S="bg-green-100 border-green-300 text-green-800",T>0&&(S+=" font-bold"),S},h=(g,i)=>{const f=`${g}-${i}`;return k.heatMapData[f]||0},d=(g,i)=>{_.value={likelihood:g,impact:i},v.value=!0},V=g=>g>=20?"destructive":g>=15?"warning":g>=10?"secondary":"success";return(g,i)=>(u(),c("div",Xe,[o("div",Ze,[i[1]||(i[1]=o("div",{class:"col-span-1"},null,-1)),(u(),c(D,null,E(5,f=>o("div",{key:`impact-${f}`,class:"text-center text-sm font-medium text-gray-700 p-2"},p(f),1)),64)),(u(),c(D,null,E(5,f=>o("div",{key:`likelihood-${f}`,class:"contents"},[o("div",es,p(f),1),(u(),c(D,null,E(5,T=>o("div",{key:`cell-${f}-${T}`,class:Ae([U(f,T),"aspect-square rounded border cursor-pointer transition-all duration-200 hover:scale-105 flex items-center justify-center text-xs font-medium"]),onClick:S=>d(f,T)},p(h(f,T)),11,ss)),64))])),64))]),i[2]||(i[2]=Ce('<div class="flex justify-center mt-6 space-x-4" data-v-a0f5a638><div class="flex items-center space-x-2" data-v-a0f5a638><div class="w-4 h-4 bg-green-100 border border-green-300 rounded" data-v-a0f5a638></div><span class="text-sm text-gray-600" data-v-a0f5a638>Low (1-6)</span></div><div class="flex items-center space-x-2" data-v-a0f5a638><div class="w-4 h-4 bg-yellow-100 border border-yellow-300 rounded" data-v-a0f5a638></div><span class="text-sm text-gray-600" data-v-a0f5a638>Medium (7-12)</span></div><div class="flex items-center space-x-2" data-v-a0f5a638><div class="w-4 h-4 bg-orange-100 border border-orange-300 rounded" data-v-a0f5a638></div><span class="text-sm text-gray-600" data-v-a0f5a638>High (13-18)</span></div><div class="flex items-center space-x-2" data-v-a0f5a638><div class="w-4 h-4 bg-red-100 border border-red-300 rounded" data-v-a0f5a638></div><span class="text-sm text-gray-600" data-v-a0f5a638>Critical (19-25)</span></div></div><div class="text-center mt-4" data-v-a0f5a638><div class="grid grid-cols-2 gap-8 max-w-md mx-auto" data-v-a0f5a638><div class="text-sm text-gray-600" data-v-a0f5a638><div class="font-medium" data-v-a0f5a638>Likelihood</div><div class="text-xs" data-v-a0f5a638>1 = Rare, 5 = Almost Certain</div></div><div class="text-sm text-gray-600" data-v-a0f5a638><div class="font-medium" data-v-a0f5a638>Impact</div><div class="text-xs" data-v-a0f5a638>1 = Minor, 5 = Catastrophic</div></div></div></div>',2)),l(t(ae),{modelValue:v.value,"onUpdate:modelValue":i[0]||(i[0]=f=>v.value=f)},{title:r(()=>[y("Risks in "+p(_.value.likelihood)+"x"+p(_.value.impact)+" Cell",1)]),default:r(()=>[o("div",ts,[a.value.length===0?(u(),c("div",as," No risks in this cell ")):(u(),c("div",ls,[(u(!0),c(D,null,E(a.value,f=>(u(),c("div",{key:f.risk_id,class:"p-3 border rounded-lg"},[o("div",os,[o("div",is,[o("div",rs,p(f.risk_id),1),o("div",ns,p(f.risk_description),1),o("div",ds," Category: "+p(f.risk_category),1)]),l(t(j),{variant:V(f.inherent_risk_score),class:"ml-2"},{default:r(()=>[y(p(f.inherent_risk_score)+"/25 ",1)]),_:2},1032,["variant"])])]))),128))]))])]),_:1},8,["modelValue"])]))}},ms=N(us,[["__scopeId","data-v-a0f5a638"]]),vs={class:"space-y-6"},ps={class:"flex items-center justify-between"},cs={class:"flex items-center space-x-4"},_s={class:"text-sm text-gray-600"},ys={class:"flex items-center space-x-2"},gs={key:0,class:"flex justify-center items-center py-12"},fs={key:1,class:"space-y-6"},ks={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},bs={class:"space-y-4"},xs={class:"flex items-end space-x-2"},Vs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ws={class:"space-y-4"},hs=["id","value","disabled"],$s=["for"],Cs={class:"space-y-4"},As={class:"flex justify-between items-center"},Rs={class:"overflow-x-auto"},Us={class:"min-w-full divide-y divide-gray-200"},Ss={class:"bg-white divide-y divide-gray-200"},Ms={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Is={class:"px-6 py-4 text-sm text-gray-900"},Ds={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Es={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ts={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ps={class:"px-6 py-4 whitespace-nowrap"},Ls={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},js={class:"flex justify-center"},qs={class:"space-y-4"},zs={class:"flex justify-between items-center"},Fs={class:"space-y-4"},Os={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Bs={class:"space-y-4"},Ns={class:"flex items-center justify-between"},Hs={class:"font-semibold"},Js={class:"text-sm text-gray-600"},Ys={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Qs={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Gs={class:"flex justify-end space-x-4"},Ks={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},Ws={class:"space-y-4"},Xs={class:"grid grid-cols-2 gap-4"},st={__name:"RiskAssessmentDetail",props:{assessmentId:{type:String,default:null},mode:{type:String,default:"view"}},setup(x){const k=Re(),v=Ue(),_=x,a=I(null),U=I(!0),h=I(!1),d=I(_.mode==="edit"||_.mode==="new"),V=I(!1),g=I(null),i=I({risk_id:"",risk_title:"",risk_description:"",risk_category:"",risk_subcategory:"",auditable_entity:"",threat_source:"",vulnerability:"",likelihood_score:1,impact_score:1,control_effectiveness:"",existing_controls:"",risk_owner:"",risk_response:"",target_risk_score:0,likelihood_rationale:"",impact_rationale:""}),f=[{label:"Annual",value:"Annual"},{label:"Mid-Year",value:"Mid-Year"},{label:"Quarterly",value:"Quarterly"},{label:"Ad-hoc",value:"Ad-hoc"}],T=[{label:"Planning",value:"Planning"},{label:"In Progress",value:"In Progress"},{label:"Review",value:"Review"},{label:"Finalized",value:"Finalized"},{label:"Approved",value:"Approved"}],S=[{label:"Interview",value:"interview"},{label:"Workshop",value:"workshop"},{label:"Survey",value:"survey"},{label:"Document Review",value:"document_review"},{label:"Data Analysis",value:"data_analysis"}],le=[{label:"Planned",value:"Planned"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Overdue",value:"Overdue"}],oe=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],ie=B(()=>{var n;return((n=a.value)==null?void 0:n.status)!=="Approved"}),re=B(()=>!0),q=()=>P(this,null,function*(){try{if(U.value=!0,_.mode==="new")a.value={assessment_id:"",assessment_name:"",assessment_date:new Date().toISOString().split("T")[0],fiscal_year:new Date().getFullYear().toString(),assessment_period:"Annual",assessment_team:[],assessment_scope:"",methodology:[],status:"Planning",risk_register:[],action_plan:[],risk_heat_map_data:{},top_risks:[],assessment_summary:"",recommendations:"",prepared_by:"",reviewed_by:"",approved_by:"",approval_date:""};else{const n=_.assessmentId||k.params.id;if(!n)throw new Error("Assessment ID is required");const e=yield fetch(`/api/resource/Risk Assessment/${n}`);if(e.ok)a.value=yield e.json();else throw new Error("Failed to load assessment")}}catch(n){if(console.error("Error loading assessment:",n),_.mode!=="new"){const e=_.assessmentId||k.params.id;a.value={name:e,assessment_id:`RA-2024-${String(e).padStart(4,"0")}`,assessment_name:"Annual Risk Assessment 2024",assessment_date:"2024-01-15",fiscal_year:"2024",assessment_period:"Annual",assessment_team:[{team_member:"John Doe",role:"Lead"},{team_member:"Jane Smith",role:"Member"}],assessment_scope:"Comprehensive risk assessment covering all business units and processes.",methodology:["interview","workshop","document_review"],status:"In Progress",risk_register:[{risk_id:"R001",risk_title:"Financial reporting errors",risk_description:"Financial reporting errors due to manual processes",risk_category:"Operational",risk_subcategory:"Financial Reporting",auditable_entity:"Finance Department",threat_source:"Human error",vulnerability:"Manual data entry",likelihood_score:4,impact_score:5,inherent_risk_score:20,control_effectiveness:"Adequate",existing_controls:"Basic review process",risk_owner:"Finance Manager",risk_response:"Mitigate",target_risk_score:10,likelihood_rationale:"High volume of manual entries",impact_rationale:"Material impact on financial statements"}],action_plan:[{action_id:"A001",action_description:"Implement automated financial reporting system",action_type:"System Enhancement",priority:"High",responsible_party:"IT Department",target_completion_date:"2024-06-30",estimated_cost:5e4,resource_required:"IT team and software licenses",status:"In Progress",actual_completion_date:"",effectiveness_review_date:"",review_notes:""}],risk_heat_map_data:{},top_risks:[],assessment_summary:"The assessment identified several key risks...",recommendations:"Implement automated systems and enhance training...",prepared_by:"John Doe",reviewed_by:"",approved_by:"",approval_date:""}}}finally{U.value=!1}}),ne=()=>{_.mode==="view"?v.push(`/audit-planning/risk-assessment/${_.assessmentId||k.params.id}/edit`):J()},H=()=>P(this,null,function*(){try{if(h.value=!0,a.value.risk_register.forEach(e=>{e.inherent_risk_score=e.likelihood_score*e.impact_score}),_.mode==="new"&&!a.value.assessment_id){const e=a.value.fiscal_year.slice(-2),M=Math.floor(Math.random()*1e3)+1;a.value.assessment_id=`RA-${a.value.fiscal_year}-${String(M).padStart(4,"0")}`}let n;if(_.mode==="new")n=yield fetch("/api/resource/Risk Assessment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value)});else{const e=_.assessmentId||k.params.id;n=yield fetch(`/api/resource/Risk Assessment/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value)})}if(n.ok){const e=yield n.json();_.mode==="new"?v.push(`/audit-planning/risk-assessment/${e.name}`):(d.value=!1,yield q())}else throw new Error("Failed to save changes")}catch(n){console.error("Error saving changes:",n)}finally{h.value=!1}}),J=()=>{_.mode==="new"?v.push("/audit-planning/risk-assessment"):_.mode==="edit"?v.push(`/audit-planning/risk-assessment/${_.assessmentId||k.params.id}`):(d.value=!1,q())},de=()=>P(this,null,function*(){try{a.value.status="Approved",a.value.approved_by="Current User",a.value.approval_date=new Date().toISOString().split("T")[0],yield H()}catch(n){console.error("Error approving assessment:",n)}}),ue=()=>{a.value.assessment_team.push({team_member:"",role:""})},me=n=>{a.value.assessment_team.splice(n,1)},ve=()=>{g.value=null,i.value={risk_id:`R${String(a.value.risk_register.length+1).padStart(3,"0")}`,risk_title:"",risk_description:"",risk_category:"",risk_subcategory:"",auditable_entity:"",threat_source:"",vulnerability:"",likelihood_score:1,impact_score:1,control_effectiveness:"",existing_controls:"",risk_owner:"",risk_response:"",target_risk_score:0,likelihood_rationale:"",impact_rationale:""},V.value=!0},pe=n=>{g.value=n,i.value=z({},a.value.risk_register[n]),V.value=!0},ce=n=>{a.value.risk_register.splice(n,1)},_e=()=>{const n=Z(z({},i.value),{inherent_risk_score:i.value.likelihood_score*i.value.impact_score});g.value!==null?a.value.risk_register[g.value]=n:a.value.risk_register.push(n),Y()},Y=()=>{V.value=!1,g.value=null,i.value={risk_id:"",risk_title:"",risk_description:"",risk_category:"",risk_subcategory:"",auditable_entity:"",threat_source:"",vulnerability:"",likelihood_score:1,impact_score:1,control_effectiveness:"",existing_controls:"",risk_owner:"",risk_response:"",target_risk_score:0,likelihood_rationale:"",impact_rationale:""}},ye=()=>{a.value.action_plan.push({action_id:`A${String(a.value.action_plan.length+1).padStart(3,"0")}`,action_description:"",action_type:"",priority:"Medium",responsible_party:"",target_completion_date:"",estimated_cost:0,resource_required:"",status:"Not Started",actual_completion_date:"",effectiveness_review_date:"",review_notes:""})},ge=n=>({Planning:"secondary","In Progress":"warning",Review:"info",Finalized:"success",Approved:"success"})[n]||"secondary",Q=n=>n>=20?"destructive":n>=15?"warning":n>=10?"secondary":"success",fe=n=>n>=20?"Critical":n>=15?"High":n>=10?"Medium":"Low";Se(()=>{var n;return(n=a.value)==null?void 0:n.risk_register},n=>{n&&ke()},{deep:!0});const ke=()=>{if(!a.value)return;const n={};a.value.risk_register.forEach(e=>{const M=`${e.likelihood_score}-${e.impact_score}`;n[M]=(n[M]||0)+1}),a.value.risk_heat_map_data=n,a.value.top_risks=[...a.value.risk_register].sort((e,M)=>M.inherent_risk_score-e.inherent_risk_score).slice(0,5)};return Me(()=>{q()}),(n,e)=>{var M,G,K;return u(),c("div",vs,[o("div",ps,[o("div",cs,[l(t($),{variant:"ghost",size:"sm",onClick:e[0]||(e[0]=s=>n.$router.go(-1)),class:"flex items-center space-x-2"},{default:r(()=>[l(t(Ie),{class:"h-4 w-4"}),e[30]||(e[30]=o("span",null,"Back",-1))]),_:1}),o("div",null,[e[31]||(e[31]=o("h1",{class:"text-2xl font-bold text-gray-900"}," Risk Assessment Details ",-1)),o("p",_s,p(((M=a.value)==null?void 0:M.assessment_id)||"Loading..."),1)])]),o("div",ys,[l(t(j),{variant:ge((G=a.value)==null?void 0:G.status),class:"capitalize"},{default:r(()=>{var s;return[y(p(((s=a.value)==null?void 0:s.status)||"Draft"),1)]}),_:1},8,["variant"]),ie.value?(u(),C(t($),{key:0,variant:"outline",size:"sm",onClick:ne},{default:r(()=>[l(t(ee),{class:"h-4 w-4 mr-2"}),y(" "+p(d.value?"Cancel":"Edit"),1)]),_:1})):w("",!0),re.value&&((K=a.value)==null?void 0:K.status)==="Review"?(u(),C(t($),{key:1,variant:"default",size:"sm",onClick:de},{default:r(()=>[l(t(De),{class:"h-4 w-4 mr-2"}),e[32]||(e[32]=y(" Approve ",-1))]),_:1})):w("",!0)])]),U.value?(u(),c("div",gs,[...e[33]||(e[33]=[o("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):a.value?(u(),c("div",fs,[l(t(A),null,{title:r(()=>[...e[34]||(e[34]=[y("Assessment Information",-1)])]),default:r(()=>[o("div",ks,[l(t(m),{label:"Assessment ID",value:a.value.assessment_id,readonly:""},null,8,["value"]),l(t(m),{label:"Assessment Name",modelValue:a.value.assessment_name,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.assessment_name=s),readonly:!d.value,required:""},null,8,["modelValue","readonly"]),l(t(m),{label:"Fiscal Year",modelValue:a.value.fiscal_year,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.fiscal_year=s),readonly:!d.value,required:""},null,8,["modelValue","readonly"]),l(t(m),{label:"Assessment Date",modelValue:a.value.assessment_date,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.assessment_date=s),type:"date",readonly:!d.value,required:""},null,8,["modelValue","readonly"]),l(t(m),{label:"Assessment Period",modelValue:a.value.assessment_period,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.assessment_period=s),readonly:!d.value,required:""},{input:r(()=>[l(t(L),{modelValue:a.value.assessment_period,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.assessment_period=s),disabled:!d.value,options:f},null,8,["modelValue","disabled"])]),_:1},8,["modelValue","readonly"]),l(t(m),{label:"Status",modelValue:a.value.status,"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.status=s),readonly:!d.value,required:""},{input:r(()=>[l(t(L),{modelValue:a.value.status,"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.status=s),disabled:!d.value,options:T},null,8,["modelValue","disabled"])]),_:1},8,["modelValue","readonly"])])]),_:1}),l(t(A),null,{title:r(()=>[...e[35]||(e[35]=[y("Assessment Team",-1)])]),default:r(()=>[o("div",bs,[(u(!0),c(D,null,E(a.value.assessment_team,(s,R)=>(u(),c("div",{key:R,class:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg"},[l(t(m),{label:"Team Member",modelValue:s.team_member,"onUpdate:modelValue":b=>s.team_member=b,readonly:!d.value},null,8,["modelValue","onUpdate:modelValue","readonly"]),l(t(m),{label:"Role",modelValue:s.role,"onUpdate:modelValue":b=>s.role=b,readonly:!d.value},null,8,["modelValue","onUpdate:modelValue","readonly"]),o("div",xs,[d.value?(u(),C(t($),{key:0,variant:"outline",size:"sm",onClick:b=>me(R),class:"text-red-600 hover:text-red-700"},{default:r(()=>[l(t(se),{class:"h-4 w-4"})]),_:1},8,["onClick"])):w("",!0)])]))),128)),d.value?(u(),C(t($),{key:0,variant:"outline",size:"sm",onClick:ue,class:"w-full"},{default:r(()=>[l(t(O),{class:"h-4 w-4 mr-2"}),e[36]||(e[36]=y(" Add Team Member ",-1))]),_:1})):w("",!0)])]),_:1}),o("div",Vs,[l(t(A),null,{title:r(()=>[...e[37]||(e[37]=[y("Assessment Scope",-1)])]),default:r(()=>[l(t(m),{modelValue:a.value.assessment_scope,"onUpdate:modelValue":e[8]||(e[8]=s=>a.value.assessment_scope=s),readonly:!d.value,type:"textarea",rows:"6"},null,8,["modelValue","readonly"])]),_:1}),l(t(A),null,{title:r(()=>[...e[38]||(e[38]=[y("Methodology",-1)])]),default:r(()=>[o("div",ws,[(u(),c(D,null,E(S,s=>o("div",{key:s.value,class:"flex items-center space-x-2"},[Ee(o("input",{id:`method-${s.value}`,"onUpdate:modelValue":e[9]||(e[9]=R=>a.value.methodology=R),value:s.value,type:"checkbox",disabled:!d.value,class:"rounded border-gray-300"},null,8,hs),[[Te,a.value.methodology]]),o("label",{for:`method-${s.value}`,class:"text-sm"},p(s.label),9,$s)])),64))])]),_:1})]),l(t(A),null,{title:r(()=>[...e[39]||(e[39]=[y("Risk Register",-1)])]),default:r(()=>[o("div",Cs,[o("div",As,[e[41]||(e[41]=o("h3",{class:"text-lg font-semibold"},"Identified Risks",-1)),d.value?(u(),C(t($),{key:0,variant:"outline",size:"sm",onClick:ve},{default:r(()=>[l(t(O),{class:"h-4 w-4 mr-2"}),e[40]||(e[40]=y(" Add Risk ",-1))]),_:1})):w("",!0)]),o("div",Rs,[o("table",Us,[e[42]||(e[42]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Risk ID "),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Likelihood "),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Impact "),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Inherent Risk "),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),o("tbody",Ss,[(u(!0),c(D,null,E(a.value.risk_register,(s,R)=>(u(),c("tr",{key:R},[o("td",Ms,p(s.risk_id),1),o("td",Is,p(s.risk_title),1),o("td",Ds,p(s.risk_category),1),o("td",Es,p(s.likelihood_score)+"/5 ",1),o("td",Ts,p(s.impact_score)+"/5 ",1),o("td",Ps,[l(t(j),{variant:Q(s.inherent_risk_score)},{default:r(()=>[y(p(s.inherent_risk_score)+"/25 ",1)]),_:2},1032,["variant"])]),o("td",Ls,[d.value?(u(),C(t($),{key:0,variant:"ghost",size:"sm",onClick:b=>pe(R)},{default:r(()=>[l(t(ee),{class:"h-4 w-4"})]),_:1},8,["onClick"])):w("",!0),d.value?(u(),C(t($),{key:1,variant:"ghost",size:"sm",onClick:b=>ce(R),class:"text-red-600 hover:text-red-700"},{default:r(()=>[l(t(se),{class:"h-4 w-4"})]),_:1},8,["onClick"])):w("",!0)])]))),128))])])])])]),_:1}),l(t(A),null,{title:r(()=>[...e[43]||(e[43]=[y("Risk Heat Map",-1)])]),default:r(()=>[o("div",js,[l(ms,{risks:a.value.risk_register,heatMapData:a.value.risk_heat_map_data},null,8,["risks","heatMapData"])])]),_:1}),l(t(A),null,{title:r(()=>[...e[44]||(e[44]=[y("Action Plan",-1)])]),default:r(()=>[o("div",qs,[o("div",zs,[e[46]||(e[46]=o("h3",{class:"text-lg font-semibold"},"Mitigation Actions",-1)),d.value?(u(),C(t($),{key:0,variant:"outline",size:"sm",onClick:ye},{default:r(()=>[l(t(O),{class:"h-4 w-4 mr-2"}),e[45]||(e[45]=y(" Add Action ",-1))]),_:1})):w("",!0)]),o("div",Fs,[(u(!0),c(D,null,E(a.value.action_plan,(s,R)=>(u(),c("div",{key:R,class:"p-4 border rounded-lg"},[o("div",Os,[l(t(m),{label:"Action ID",value:s.action_id,readonly:""},null,8,["value"]),l(t(m),{label:"Action Description",modelValue:s.action_description,"onUpdate:modelValue":b=>s.action_description=b,readonly:!d.value},null,8,["modelValue","onUpdate:modelValue","readonly"]),l(t(m),{label:"Responsible Party",modelValue:s.responsible_party,"onUpdate:modelValue":b=>s.responsible_party=b,readonly:!d.value},null,8,["modelValue","onUpdate:modelValue","readonly"]),l(t(m),{label:"Target Completion Date",modelValue:s.target_completion_date,"onUpdate:modelValue":b=>s.target_completion_date=b,type:"date",readonly:!d.value},null,8,["modelValue","onUpdate:modelValue","readonly"]),l(t(m),{label:"Status",modelValue:s.status,"onUpdate:modelValue":b=>s.status=b,readonly:!d.value},{input:r(()=>[l(t(L),{modelValue:s.status,"onUpdate:modelValue":b=>s.status=b,disabled:!d.value,options:le},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["modelValue","onUpdate:modelValue","readonly"]),l(t(m),{label:"Priority",modelValue:s.priority,"onUpdate:modelValue":b=>s.priority=b,readonly:!d.value},{input:r(()=>[l(t(L),{modelValue:s.priority,"onUpdate:modelValue":b=>s.priority=b,disabled:!d.value,options:oe},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["modelValue","onUpdate:modelValue","readonly"]),l(t(m),{label:"Estimated Cost",modelValue:s.estimated_cost,"onUpdate:modelValue":b=>s.estimated_cost=b,type:"number",readonly:!d.value},null,8,["modelValue","onUpdate:modelValue","readonly"]),l(t(m),{label:"Actual Completion Date",modelValue:s.actual_completion_date,"onUpdate:modelValue":b=>s.actual_completion_date=b,type:"date",readonly:!d.value},null,8,["modelValue","onUpdate:modelValue","readonly"])])]))),128))])])]),_:1}),l(t(A),null,{title:r(()=>[...e[47]||(e[47]=[y("Top Risks Summary",-1)])]),default:r(()=>[o("div",Bs,[(u(!0),c(D,null,E(a.value.top_risks,s=>(u(),c("div",{key:s.risk_id,class:"p-4 border rounded-lg"},[o("div",Ns,[o("div",null,[o("h4",Hs,p(s.risk_description),1),o("p",Js,"Risk Score: "+p(s.inherent_risk_score)+"/25",1)]),l(t(j),{variant:Q(s.inherent_risk_score)},{default:r(()=>[y(p(fe(s.inherent_risk_score)),1)]),_:2},1032,["variant"])])]))),128))])]),_:1}),o("div",Ys,[l(t(A),null,{title:r(()=>[...e[48]||(e[48]=[y("Assessment Summary",-1)])]),default:r(()=>[l(t(m),{modelValue:a.value.assessment_summary,"onUpdate:modelValue":e[10]||(e[10]=s=>a.value.assessment_summary=s),readonly:!d.value,type:"textarea",rows:"6"},null,8,["modelValue","readonly"])]),_:1}),l(t(A),null,{title:r(()=>[...e[49]||(e[49]=[y("Recommendations",-1)])]),default:r(()=>[l(t(m),{modelValue:a.value.recommendations,"onUpdate:modelValue":e[11]||(e[11]=s=>a.value.recommendations=s),readonly:!d.value,type:"textarea",rows:"6"},null,8,["modelValue","readonly"])]),_:1})]),l(t(A),null,{title:r(()=>[...e[50]||(e[50]=[y("Approval Information",-1)])]),default:r(()=>[o("div",Qs,[l(t(m),{label:"Prepared By",value:a.value.prepared_by,readonly:""},null,8,["value"]),l(t(m),{label:"Reviewed By",modelValue:a.value.reviewed_by,"onUpdate:modelValue":e[12]||(e[12]=s=>a.value.reviewed_by=s),readonly:!d.value},null,8,["modelValue","readonly"]),l(t(m),{label:"Approved By",modelValue:a.value.approved_by,"onUpdate:modelValue":e[13]||(e[13]=s=>a.value.approved_by=s),readonly:!d.value},null,8,["modelValue","readonly"]),l(t(m),{label:"Approval Date",value:a.value.approval_date,readonly:""},null,8,["value"])])]),_:1}),o("div",Gs,[d.value?(u(),C(t($),{key:0,variant:"outline",onClick:J},{default:r(()=>[...e[51]||(e[51]=[y(" Cancel ",-1)])]),_:1})):w("",!0),d.value?(u(),C(t($),{key:1,variant:"default",onClick:H,disabled:h.value},{default:r(()=>[h.value?(u(),c("div",Ks)):(u(),C(t(Pe),{key:0,class:"h-4 w-4 mr-2"})),y(" "+p(h.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])):w("",!0)])])):w("",!0),l(t(ae),{modelValue:V.value,"onUpdate:modelValue":e[29]||(e[29]=s=>V.value=s)},{title:r(()=>[y(p(g.value!==null?"Edit Risk Entry":"Add Risk Entry"),1)]),actions:r(()=>[l(t($),{variant:"outline",onClick:Y},{default:r(()=>[...e[52]||(e[52]=[y(" Cancel ",-1)])]),_:1}),l(t($),{onClick:_e},{default:r(()=>[y(p(g.value!==null?"Update":"Add")+" Risk ",1)]),_:1})]),default:r(()=>[o("div",Ws,[l(t(m),{label:"Risk ID",modelValue:i.value.risk_id,"onUpdate:modelValue":e[14]||(e[14]=s=>i.value.risk_id=s),required:""},null,8,["modelValue"]),l(t(m),{label:"Risk Title",modelValue:i.value.risk_title,"onUpdate:modelValue":e[15]||(e[15]=s=>i.value.risk_title=s),required:""},null,8,["modelValue"]),l(t(m),{label:"Risk Description",modelValue:i.value.risk_description,"onUpdate:modelValue":e[16]||(e[16]=s=>i.value.risk_description=s),type:"textarea",required:""},null,8,["modelValue"]),l(t(m),{label:"Risk Category",modelValue:i.value.risk_category,"onUpdate:modelValue":e[17]||(e[17]=s=>i.value.risk_category=s),required:""},null,8,["modelValue"]),l(t(m),{label:"Risk Subcategory",modelValue:i.value.risk_subcategory,"onUpdate:modelValue":e[18]||(e[18]=s=>i.value.risk_subcategory=s)},null,8,["modelValue"]),l(t(m),{label:"Auditable Entity",modelValue:i.value.auditable_entity,"onUpdate:modelValue":e[19]||(e[19]=s=>i.value.auditable_entity=s)},null,8,["modelValue"]),l(t(m),{label:"Threat Source",modelValue:i.value.threat_source,"onUpdate:modelValue":e[20]||(e[20]=s=>i.value.threat_source=s)},null,8,["modelValue"]),l(t(m),{label:"Vulnerability",modelValue:i.value.vulnerability,"onUpdate:modelValue":e[21]||(e[21]=s=>i.value.vulnerability=s)},null,8,["modelValue"]),o("div",Xs,[l(t(m),{label:"Likelihood Score (1-5)",modelValue:i.value.likelihood_score,"onUpdate:modelValue":e[22]||(e[22]=s=>i.value.likelihood_score=s),modelModifiers:{number:!0},type:"number",min:"1",max:"5",required:""},null,8,["modelValue"]),l(t(m),{label:"Impact Score (1-5)",modelValue:i.value.impact_score,"onUpdate:modelValue":e[23]||(e[23]=s=>i.value.impact_score=s),modelModifiers:{number:!0},type:"number",min:"1",max:"5",required:""},null,8,["modelValue"])]),l(t(m),{label:"Control Effectiveness",modelValue:i.value.control_effectiveness,"onUpdate:modelValue":e[24]||(e[24]=s=>i.value.control_effectiveness=s)},null,8,["modelValue"]),l(t(m),{label:"Existing Controls",modelValue:i.value.existing_controls,"onUpdate:modelValue":e[25]||(e[25]=s=>i.value.existing_controls=s),type:"textarea"},null,8,["modelValue"]),l(t(m),{label:"Risk Owner",modelValue:i.value.risk_owner,"onUpdate:modelValue":e[26]||(e[26]=s=>i.value.risk_owner=s)},null,8,["modelValue"]),l(t(m),{label:"Risk Response",modelValue:i.value.risk_response,"onUpdate:modelValue":e[27]||(e[27]=s=>i.value.risk_response=s)},null,8,["modelValue"]),l(t(m),{label:"Target Risk Score",modelValue:i.value.target_risk_score,"onUpdate:modelValue":e[28]||(e[28]=s=>i.value.target_risk_score=s),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])]),_:1},8,["modelValue"])])}}};export{st as default};
//# sourceMappingURL=RiskAssessmentDetail-Cr3qLIGF.js.map
