var N=(o,b,k)=>new Promise((A,V)=>{var g=x=>{try{h(k.next(x))}catch(S){V(S)}},t=x=>{try{h(k.throw(x))}catch(S){V(S)}},h=x=>x.done?A(x.value):Promise.resolve(x.value).then(g,t);h((k=k.apply(o,b)).next())});import{u as ke,a as xe,r as M,c as z,o as we,w as _e,b as f,d as u,e as l,f as p,g as i,h as r,i as m,j as s,A as Ve,_ as c,t as v,k as C,l as _,S as Ce,E as Ae,C as B,I as w,m as y,n as P,p as he,P as $,F as W,q as Q,X as K,s as G,H as Se,v as Ue}from"./index-Di0upoRY.js";const Re={class:"space-y-6"},Ie={class:"flex items-center justify-between"},Oe={class:"flex items-center space-x-4"},Me={class:"text-2xl font-bold text-gray-900"},Pe={class:"text-gray-600 mt-1"},Ee={key:0,class:"flex items-center space-x-3"},qe={class:"flex items-center space-x-2"},De={key:0,class:"flex justify-center items-center py-12"},Ne={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Le={class:"lg:col-span-2 space-y-6"},Fe={class:"bg-white rounded-lg border border-gray-200 p-6"},je={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Te={class:"md:col-span-2"},He={class:"md:col-span-2"},ze={class:"bg-white rounded-lg border border-gray-200 p-6"},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$e={class:"space-y-4"},We={class:"space-y-4"},Qe={class:"mt-6 p-4 bg-gray-50 rounded-lg"},Ke={class:"flex items-center justify-between"},Ge={class:"text-right"},Je={class:"text-sm text-gray-600"},Xe={class:"bg-white rounded-lg border border-gray-200 p-6"},Ye={class:"flex items-center justify-between mb-4"},Ze={class:"space-y-4"},el={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ll={class:"flex items-end space-x-2"},tl={class:"flex-1"},al={class:"mt-4"},sl={class:"bg-white rounded-lg border border-gray-200 p-6"},il={class:"flex items-center justify-between mb-4"},ol={class:"space-y-4"},nl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dl={class:"md:col-span-2"},rl={class:"flex items-end"},ul={class:"bg-white rounded-lg border border-gray-200 p-6"},ml={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vl={class:"md:col-span-2"},cl={class:"mt-4"},yl={class:"bg-white rounded-lg border border-gray-200 p-6"},bl={class:"space-y-4"},gl={key:0,class:"flex items-center justify-end space-x-3"},fl={class:"space-y-6"},pl={class:"bg-white rounded-lg border border-gray-200 p-6"},kl={class:"space-y-4"},xl={class:"flex items-center justify-between"},wl={class:"flex items-center justify-between"},_l={class:"flex items-center justify-between"},Vl={class:"bg-white rounded-lg border border-gray-200 p-6"},Cl={class:"space-y-4"},Al={class:"font-medium"},hl={class:"font-medium"},Sl={class:"font-medium"},Ul={key:0},Rl={key:0,class:"bg-white rounded-lg border border-gray-200 p-6"},Il={class:"space-y-3"},Pl={__name:"AuditUniverseDetail",props:{entityId:{type:String,default:null},mode:{type:String,default:"view",validator:o=>["view","edit","new"].includes(o)}},setup(o){const b=o,k=ke();xe();const A=M(!1),V=M(!1),g=M(null),t=M({auditable_entity:"",entity_type:"",department:"",location:"",description:"",process_owner:"",inherent_risk_rating:"",inherent_risk_score:1,control_environment_rating:"",control_effectiveness_score:1,residual_risk_rating:"",residual_risk_score:1,risk_factors:[],key_controls:[],audit_frequency:"",last_audit_date:"",last_audit_opinion:"",next_scheduled_audit:"",mandatory_audit:!1,regulatory_reference:"",notes:"",is_active:!0}),h=[{label:"Process",value:"Process"},{label:"Function",value:"Function"},{label:"Department",value:"Department"},{label:"Location",value:"Location"},{label:"System",value:"System"},{label:"Compliance Area",value:"Compliance Area"}],x=[{label:"Finance",value:"Finance"},{label:"IT",value:"IT"},{label:"Operations",value:"Operations"},{label:"HR",value:"HR"},{label:"Sales",value:"Sales"},{label:"Procurement",value:"Procurement"}],S=[{label:"Head Office",value:"Head Office"},{label:"Branch 1",value:"Branch 1"},{label:"Branch 2",value:"Branch 2"},{label:"Warehouse",value:"Warehouse"},{label:"All Locations",value:"All"}],J=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],X=[{label:"Strong",value:"Strong"},{label:"Adequate",value:"Adequate"},{label:"Weak",value:"Weak"},{label:"Not Assessed",value:"Not Assessed"}],Y=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"Strategic",value:"Strategic"},{label:"IT",value:"IT"},{label:"Reputational",value:"Reputational"}],Z=[{label:"Rare",value:"Rare"},{label:"Unlikely",value:"Unlikely"},{label:"Possible",value:"Possible"},{label:"Likely",value:"Likely"},{label:"Almost Certain",value:"Almost Certain"}],ee=[{label:"Insignificant",value:"Insignificant"},{label:"Minor",value:"Minor"},{label:"Moderate",value:"Moderate"},{label:"Major",value:"Major"},{label:"Catastrophic",value:"Catastrophic"}],le=[{label:"Preventive",value:"Preventive"},{label:"Detective",value:"Detective"},{label:"Corrective",value:"Corrective"}],te=[{label:"Continuous",value:"Continuous"},{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Annually",value:"Annually"}],ae=[{label:"Effective",value:"Effective"},{label:"Partially Effective",value:"Partially Effective"},{label:"Ineffective",value:"Ineffective"},{label:"Not Tested",value:"Not Tested"}],se=[{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"Bi-Annual",value:"Bi-Annual"},{label:"Tri-Annual",value:"Tri-Annual"},{label:"As Needed",value:"As Needed"}],ie=[{label:"Satisfactory",value:"Satisfactory"},{label:"Needs Improvement",value:"Needs Improvement"},{label:"Unsatisfactory",value:"Unsatisfactory"}],oe=z(()=>t.value.next_scheduled_audit?new Date(t.value.next_scheduled_audit)<new Date:!1),ne=z(()=>t.value.is_active&&t.value.auditable_entity),L=()=>{k.push("/audit-planning/universe")},E=n=>{n==="edit"?k.push(`/audit-planning/universe/${b.entityId}/edit`):k.push(`/audit-planning/universe/${b.entityId}`)},de=()=>N(this,null,function*(){if(b.mode!=="new"){A.value=!0;try{yield new Promise(n=>setTimeout(n,1e3)),g.value={universe_id:"AU-001",auditable_entity:"Accounts Payable",entity_type:"Process",department:"Finance",location:"Head Office",description:"Processing of vendor payments and expense reimbursements",process_owner:"John Doe",inherent_risk_rating:"High",inherent_risk_score:15,control_environment_rating:"Adequate",control_effectiveness_score:3,residual_risk_rating:"Medium",residual_risk_score:5,risk_factors:[{risk_category:"Financial",risk_description:"Payment errors leading to overpayments",likelihood:"Possible",impact:"Moderate",risk_score:12}],key_controls:[{control_description:"Three-way matching of PO, receipt, and invoice",control_type:"Preventive",control_frequency:"Continuous",control_effectiveness:"Effective"}],audit_frequency:"Quarterly",last_audit_date:"2023-10-15",last_audit_opinion:"Satisfactory",next_scheduled_audit:"2024-01-15",mandatory_audit:!1,regulatory_reference:"",notes:"Regular monitoring required due to high transaction volume",is_active:!0},Object.assign(t.value,g.value)}catch(n){console.error("Error loading entity:",n)}finally{A.value=!1}}}),F=()=>{const n={Critical:25,High:15,Medium:8,Low:3};t.value.inherent_risk_score=n[t.value.inherent_risk_rating]||1;const e={Strong:5,Adequate:3,Weak:1,"Not Assessed":1};t.value.control_effectiveness_score=e[t.value.control_environment_rating]||1,q()},q=()=>{const n=Math.round(t.value.inherent_risk_score/t.value.control_effectiveness_score);t.value.residual_risk_score=n,n>=20?t.value.residual_risk_rating="Critical":n>=12?t.value.residual_risk_rating="High":n>=6?t.value.residual_risk_rating="Medium":t.value.residual_risk_rating="Low"},j=n=>{const e={Rare:1,Unlikely:2,Possible:3,Likely:4,"Almost Certain":5},R={Insignificant:1,Minor:2,Moderate:3,Major:4,Catastrophic:5},I=e[n.likelihood]||1,O=R[n.impact]||1;n.risk_score=I*O},re=()=>{t.value.risk_factors.push({risk_category:"",risk_description:"",likelihood:"",impact:"",risk_score:1})},ue=n=>{t.value.risk_factors.splice(n,1)},me=()=>{t.value.key_controls.push({control_description:"",control_type:"",control_frequency:"",control_effectiveness:""})},ve=n=>{t.value.key_controls.splice(n,1)},D=n=>({Critical:"danger",High:"danger",Medium:"warning",Low:"success"})[n]||"secondary",ce=n=>({Strong:"success",Adequate:"warning",Weak:"danger","Not Assessed":"secondary"})[n]||"secondary",ye=n=>({Critical:"text-red-600",High:"text-red-600",Medium:"text-yellow-600",Low:"text-green-600"})[n]||"text-gray-600",T=n=>new Date(n).toLocaleDateString(),be=()=>N(this,null,function*(){V.value=!0;try{yield new Promise(n=>setTimeout(n,1e3)),b.mode==="new"?(console.log("Creating new entity:",t.value),k.push("/audit-planning/universe")):(console.log("Updating entity:",t.value),k.push(`/audit-planning/universe/${b.entityId}`))}catch(n){console.error("Error saving entity:",n)}finally{V.value=!1}}),ge=()=>{b.mode==="new"?L():E("view")},H=()=>{console.log("Schedule audit for entity:",b.entityId)},fe=()=>{console.log("View audit history for entity:",b.entityId)},pe=()=>{console.log("Generate report for entity:",b.entityId)};return we(()=>{de()}),_e(()=>b.mode,n=>{n==="edit"&&g.value&&Object.assign(t.value,g.value)}),(n,e)=>{var R,I,O;return u(),f("div",Re,[l("div",Ie,[l("div",Oe,[i(s(c),{variant:"ghost",onClick:L},{default:r(()=>[i(s(Ve),{class:"h-4 w-4 mr-2"}),e[20]||(e[20]=m(" Back to Audit Universe ",-1))]),_:1}),l("div",null,[l("h1",Me,v(o.mode==="new"?"New Audit Universe Entity":((R=g.value)==null?void 0:R.auditable_entity)||"Audit Universe Entity"),1),l("p",Pe,v(o.mode==="view"?"View entity details and risk assessment":o.mode==="edit"?"Edit entity information":"Create new auditable entity"),1)])]),o.mode!=="new"?(u(),f("div",Ee,[i(s(C),{variant:D((I=g.value)==null?void 0:I.residual_risk_rating)},{default:r(()=>{var a;return[m(v((a=g.value)==null?void 0:a.residual_risk_rating)+" Risk ",1)]}),_:1},8,["variant"]),i(s(C),{variant:(O=g.value)!=null&&O.is_active?"success":"secondary"},{default:r(()=>{var a;return[m(v((a=g.value)!=null&&a.is_active?"Active":"Inactive"),1)]}),_:1},8,["variant"]),l("div",qe,[o.mode==="view"?(u(),_(s(c),{key:0,variant:"outline",onClick:e[0]||(e[0]=a=>E("edit"))},{default:r(()=>[i(s(Ce),{class:"h-4 w-4 mr-2"}),e[21]||(e[21]=m(" Edit ",-1))]),_:1})):p("",!0),o.mode==="edit"?(u(),_(s(c),{key:1,variant:"outline",onClick:e[1]||(e[1]=a=>E("view"))},{default:r(()=>[i(s(Ae),{class:"h-4 w-4 mr-2"}),e[22]||(e[22]=m(" View ",-1))]),_:1})):p("",!0),o.mode==="view"&&ne.value?(u(),_(s(c),{key:2,variant:"outline",onClick:H},{default:r(()=>[i(s(B),{class:"h-4 w-4 mr-2"}),e[23]||(e[23]=m(" Schedule Audit ",-1))]),_:1})):p("",!0)])])):p("",!0)]),A.value?(u(),f("div",De,[...e[24]||(e[24]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),l("span",{class:"ml-3 text-gray-600"},"Loading...",-1)])])):(u(),f("div",Ne,[l("div",Le,[l("div",Fe,[e[31]||(e[31]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),l("div",je,[l("div",Te,[e[25]||(e[25]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Auditable Entity *",-1)),i(s(w),{modelValue:t.value.auditable_entity,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.auditable_entity=a),readonly:o.mode==="view",placeholder:"e.g., Accounts Payable, IT Security Controls",class:"w-full"},null,8,["modelValue","readonly"])]),l("div",null,[e[26]||(e[26]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Entity Type *",-1)),i(s(y),{modelValue:t.value.entity_type,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.entity_type=a),options:h,disabled:o.mode==="view",placeholder:"Select entity type"},null,8,["modelValue","disabled"])]),l("div",null,[e[27]||(e[27]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Department",-1)),i(s(y),{modelValue:t.value.department,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.department=a),options:x,disabled:o.mode==="view",placeholder:"Select department"},null,8,["modelValue","disabled"])]),l("div",null,[e[28]||(e[28]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),i(s(y),{modelValue:t.value.location,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.location=a),options:S,disabled:o.mode==="view",placeholder:"Select location"},null,8,["modelValue","disabled"])]),l("div",null,[e[29]||(e[29]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Process Owner",-1)),i(s(w),{modelValue:t.value.process_owner,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.process_owner=a),readonly:o.mode==="view",placeholder:"Name of responsible person",class:"w-full"},null,8,["modelValue","readonly"])]),l("div",He,[e[30]||(e[30]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),i(s(P),{modelValue:t.value.description,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.description=a),readonly:o.mode==="view",placeholder:"Detailed description of the auditable entity",rows:"3",class:"w-full"},null,8,["modelValue","readonly"])])])]),l("div",ze,[e[39]||(e[39]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Assessment",-1)),l("div",Be,[l("div",$e,[e[34]||(e[34]=l("h4",{class:"font-medium text-gray-900"},"Inherent Risk",-1)),l("div",null,[e[32]||(e[32]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Risk Rating",-1)),i(s(y),{modelValue:t.value.inherent_risk_rating,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.inherent_risk_rating=a),options:J,disabled:o.mode==="view",onChange:F},null,8,["modelValue","disabled"])]),l("div",null,[e[33]||(e[33]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Risk Score",-1)),i(s(w),{modelValue:t.value.inherent_risk_score,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.inherent_risk_score=a),modelModifiers:{number:!0},readonly:o.mode==="view",type:"number",min:"1",max:"25",onInput:q},null,8,["modelValue","readonly"])])]),l("div",We,[e[37]||(e[37]=l("h4",{class:"font-medium text-gray-900"},"Control Environment",-1)),l("div",null,[e[35]||(e[35]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Control Rating",-1)),i(s(y),{modelValue:t.value.control_environment_rating,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.control_environment_rating=a),options:X,disabled:o.mode==="view",onChange:F},null,8,["modelValue","disabled"])]),l("div",null,[e[36]||(e[36]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Effectiveness Score",-1)),i(s(w),{modelValue:t.value.control_effectiveness_score,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.control_effectiveness_score=a),modelModifiers:{number:!0},readonly:o.mode==="view",type:"number",min:"1",max:"5",onInput:q},null,8,["modelValue","readonly"])])])]),l("div",Qe,[l("div",Ke,[e[38]||(e[38]=l("div",null,[l("h4",{class:"font-medium text-gray-900"},"Residual Risk"),l("p",{class:"text-sm text-gray-600"},"Calculated based on inherent risk and control effectiveness")],-1)),l("div",Ge,[l("div",{class:he(["text-2xl font-bold",ye(t.value.residual_risk_rating)])},v(t.value.residual_risk_rating),3),l("div",Je,"Score: "+v(t.value.residual_risk_score),1)])])])]),l("div",Xe,[l("div",Ye,[e[41]||(e[41]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Risk Factors",-1)),o.mode!=="view"?(u(),_(s(c),{key:0,variant:"outline",size:"sm",onClick:re},{default:r(()=>[i(s($),{class:"h-4 w-4 mr-2"}),e[40]||(e[40]=m(" Add Factor ",-1))]),_:1})):p("",!0)]),l("div",Ze,[(u(!0),f(W,null,Q(t.value.risk_factors,(a,U)=>(u(),f("div",{key:U,class:"p-4 border border-gray-200 rounded-lg"},[l("div",el,[l("div",null,[e[42]||(e[42]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),i(s(y),{modelValue:a.risk_category,"onUpdate:modelValue":d=>a.risk_category=d,options:Y,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[43]||(e[43]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Likelihood",-1)),i(s(y),{modelValue:a.likelihood,"onUpdate:modelValue":d=>a.likelihood=d,options:Z,disabled:o.mode==="view",size:"sm",onChange:d=>j(a)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),l("div",null,[e[44]||(e[44]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Impact",-1)),i(s(y),{modelValue:a.impact,"onUpdate:modelValue":d=>a.impact=d,options:ee,disabled:o.mode==="view",size:"sm",onChange:d=>j(a)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),l("div",ll,[l("div",tl,[e[45]||(e[45]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Score",-1)),i(s(w),{modelValue:a.risk_score,"onUpdate:modelValue":d=>a.risk_score=d,modelModifiers:{number:!0},readonly:"",size:"sm",class:"text-center font-medium"},null,8,["modelValue","onUpdate:modelValue"])]),o.mode!=="view"?(u(),_(s(c),{key:0,variant:"ghost",size:"sm",onClick:d=>ue(U),class:"text-red-600 hover:text-red-700"},{default:r(()=>[i(s(K),{class:"h-4 w-4"})]),_:1},8,["onClick"])):p("",!0)])]),l("div",al,[e[46]||(e[46]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),i(s(P),{modelValue:a.risk_description,"onUpdate:modelValue":d=>a.risk_description=d,readonly:o.mode==="view",placeholder:"Describe the risk factor",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue","readonly"])])]))),128))])]),l("div",sl,[l("div",il,[e[48]||(e[48]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Key Controls",-1)),o.mode!=="view"?(u(),_(s(c),{key:0,variant:"outline",size:"sm",onClick:me},{default:r(()=>[i(s($),{class:"h-4 w-4 mr-2"}),e[47]||(e[47]=m(" Add Control ",-1))]),_:1})):p("",!0)]),l("div",ol,[(u(!0),f(W,null,Q(t.value.key_controls,(a,U)=>(u(),f("div",{key:U,class:"p-4 border border-gray-200 rounded-lg"},[l("div",nl,[l("div",dl,[e[49]||(e[49]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Control Description",-1)),i(s(P),{modelValue:a.control_description,"onUpdate:modelValue":d=>a.control_description=d,readonly:o.mode==="view",placeholder:"Describe the control activity",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue","readonly"])]),l("div",null,[e[50]||(e[50]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Control Type",-1)),i(s(y),{modelValue:a.control_type,"onUpdate:modelValue":d=>a.control_type=d,options:le,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[51]||(e[51]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Frequency",-1)),i(s(y),{modelValue:a.control_frequency,"onUpdate:modelValue":d=>a.control_frequency=d,options:te,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[52]||(e[52]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Effectiveness",-1)),i(s(y),{modelValue:a.control_effectiveness,"onUpdate:modelValue":d=>a.control_effectiveness=d,options:ae,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",rl,[o.mode!=="view"?(u(),_(s(c),{key:0,variant:"ghost",size:"sm",onClick:d=>ve(U),class:"text-red-600 hover:text-red-700"},{default:r(()=>[i(s(K),{class:"h-4 w-4"})]),_:1},8,["onClick"])):p("",!0)])])]))),128))])]),l("div",ul,[e[58]||(e[58]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Audit Information",-1)),l("div",ml,[l("div",null,[e[53]||(e[53]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Frequency",-1)),i(s(y),{modelValue:t.value.audit_frequency,"onUpdate:modelValue":e[12]||(e[12]=a=>t.value.audit_frequency=a),options:se,disabled:o.mode==="view"},null,8,["modelValue","disabled"])]),l("div",null,[e[54]||(e[54]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Date",-1)),i(s(w),{modelValue:t.value.last_audit_date,"onUpdate:modelValue":e[13]||(e[13]=a=>t.value.last_audit_date=a),readonly:o.mode==="view",type:"date"},null,8,["modelValue","readonly"])]),l("div",null,[e[55]||(e[55]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Opinion",-1)),i(s(y),{modelValue:t.value.last_audit_opinion,"onUpdate:modelValue":e[14]||(e[14]=a=>t.value.last_audit_opinion=a),options:ie,disabled:o.mode==="view"},null,8,["modelValue","disabled"])]),l("div",null,[e[56]||(e[56]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Next Scheduled Audit",-1)),i(s(w),{modelValue:t.value.next_scheduled_audit,"onUpdate:modelValue":e[15]||(e[15]=a=>t.value.next_scheduled_audit=a),readonly:o.mode==="view",type:"date"},null,8,["modelValue","readonly"])]),l("div",vl,[e[57]||(e[57]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Regulatory Reference",-1)),i(s(w),{modelValue:t.value.regulatory_reference,"onUpdate:modelValue":e[16]||(e[16]=a=>t.value.regulatory_reference=a),readonly:o.mode==="view",placeholder:"e.g., CBK Prudential Guidelines"},null,8,["modelValue","readonly"])])]),l("div",cl,[i(s(G),{modelValue:t.value.mandatory_audit,"onUpdate:modelValue":e[17]||(e[17]=a=>t.value.mandatory_audit=a),disabled:o.mode==="view",label:"Mandatory Regulatory Audit"},null,8,["modelValue","disabled"])])]),l("div",yl,[e[60]||(e[60]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Additional Information",-1)),l("div",bl,[l("div",null,[e[59]||(e[59]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),i(s(P),{modelValue:t.value.notes,"onUpdate:modelValue":e[18]||(e[18]=a=>t.value.notes=a),readonly:o.mode==="view",placeholder:"Additional notes and comments",rows:"3"},null,8,["modelValue","readonly"])]),l("div",null,[i(s(G),{modelValue:t.value.is_active,"onUpdate:modelValue":e[19]||(e[19]=a=>t.value.is_active=a),disabled:o.mode==="view",label:"Entity is Active"},null,8,["modelValue","disabled"])])])]),o.mode!=="view"?(u(),f("div",gl,[i(s(c),{variant:"outline",onClick:ge},{default:r(()=>[...e[61]||(e[61]=[m(" Cancel ",-1)])]),_:1}),i(s(c),{onClick:be,loading:V.value},{default:r(()=>[m(v(o.mode==="new"?"Create Entity":"Save Changes"),1)]),_:1},8,["loading"])])):p("",!0)]),l("div",fl,[l("div",pl,[e[65]||(e[65]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Summary",-1)),l("div",kl,[l("div",xl,[e[62]||(e[62]=l("span",{class:"text-sm text-gray-600"},"Inherent Risk:",-1)),i(s(C),{variant:D(t.value.inherent_risk_rating)},{default:r(()=>[m(v(t.value.inherent_risk_rating)+" ("+v(t.value.inherent_risk_score)+") ",1)]),_:1},8,["variant"])]),l("div",wl,[e[63]||(e[63]=l("span",{class:"text-sm text-gray-600"},"Control Effectiveness:",-1)),i(s(C),{variant:ce(t.value.control_environment_rating)},{default:r(()=>[m(v(t.value.control_environment_rating)+" ("+v(t.value.control_effectiveness_score)+") ",1)]),_:1},8,["variant"])]),l("div",_l,[e[64]||(e[64]=l("span",{class:"text-sm text-gray-600"},"Residual Risk:",-1)),i(s(C),{variant:D(t.value.residual_risk_rating)},{default:r(()=>[m(v(t.value.residual_risk_rating)+" ("+v(t.value.residual_risk_score)+") ",1)]),_:1},8,["variant"])])])]),l("div",Vl,[e[70]||(e[70]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Audit Schedule",-1)),l("div",Cl,[l("div",null,[e[66]||(e[66]=l("span",{class:"text-sm text-gray-600"},"Frequency:",-1)),l("p",Al,v(t.value.audit_frequency||"Not set"),1)]),l("div",null,[e[67]||(e[67]=l("span",{class:"text-sm text-gray-600"},"Last Audit:",-1)),l("p",hl,v(t.value.last_audit_date?T(t.value.last_audit_date):"Never"),1)]),l("div",null,[e[68]||(e[68]=l("span",{class:"text-sm text-gray-600"},"Next Scheduled:",-1)),l("p",Sl,v(t.value.next_scheduled_audit?T(t.value.next_scheduled_audit):"Not scheduled"),1)]),oe.value?(u(),f("div",Ul,[i(s(C),{variant:"danger"},{default:r(()=>[...e[69]||(e[69]=[m("Overdue",-1)])]),_:1})])):p("",!0)])]),o.mode==="view"?(u(),f("div",Rl,[e[74]||(e[74]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),l("div",Il,[i(s(c),{variant:"outline",class:"w-full justify-start",onClick:H},{default:r(()=>[i(s(B),{class:"h-4 w-4 mr-2"}),e[71]||(e[71]=m(" Schedule Audit ",-1))]),_:1}),i(s(c),{variant:"outline",class:"w-full justify-start",onClick:fe},{default:r(()=>[i(s(Se),{class:"h-4 w-4 mr-2"}),e[72]||(e[72]=m(" View Audit History ",-1))]),_:1}),i(s(c),{variant:"outline",class:"w-full justify-start",onClick:pe},{default:r(()=>[i(s(Ue),{class:"h-4 w-4 mr-2"}),e[73]||(e[73]=m(" Generate Report ",-1))]),_:1})])])):p("",!0)])]))])}}};export{Pl as default};
//# sourceMappingURL=AuditUniverseDetail-B0mq10hT.js.map
