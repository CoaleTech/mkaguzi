var _=(x,i,g)=>new Promise((v,u)=>{var n=y=>{try{C(g.next(y))}catch(w){u(w)}},p=y=>{try{C(g.throw(y))}catch(w){u(w)}},C=y=>y.done?v(y.value):Promise.resolve(y.value).then(n,p);C((g=g.apply(x,i)).next())});import{l as b,p as c,q as e,s as l,A as d,v as a,B as ae,r as V,j as R,Q as le,u as r,z as f,H as D,F as k,x as A,y as $,ac as oe,aq as re}from"./vue-DciwFjI_.js";import{F as T,E as q,_ as M,Y as ie,N as ne,a9 as E,$ as O}from"./icons-CtLkBOsu.js";import{u as de,a as m,c as B,b as h,D as P}from"./index-qIC3Tfxg.js";import"./charts-DlPBe6v3.js";import"./utils-Bcd7wHeW.js";const ue={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},pe={class:"bg-white p-4 rounded-lg border shadow-sm"},ce={class:"flex items-center justify-between"},ve={class:"text-2xl font-bold"},me={class:"bg-white p-4 rounded-lg border shadow-sm"},ge={class:"flex items-center justify-between"},fe={class:"text-2xl font-bold"},be={class:"bg-white p-4 rounded-lg border shadow-sm"},ye={class:"flex items-center justify-between"},_e={class:"text-2xl font-bold"},he={class:"bg-white p-4 rounded-lg border shadow-sm"},xe={class:"flex items-center justify-between"},we={__name:"ReportsStats",props:{activeAuditReports:{type:Array,default:()=>[]},activeBoardReports:{type:Array,default:()=>[]},activeDashboards:{type:Array,default:()=>[]},complianceScore:{type:Number,default:0}},setup(x){const i=g=>g>=80?"text-green-600":g>=60?"text-yellow-600":"text-red-600";return(g,v)=>(c(),b("div",ue,[e("div",pe,[e("div",ce,[e("div",null,[v[0]||(v[0]=e("p",{class:"text-sm text-gray-600"},"Audit Reports",-1)),e("p",ve,d(x.activeAuditReports.length),1)]),l(a(T),{class:"w-8 h-8 text-blue-500"})])]),e("div",me,[e("div",ge,[e("div",null,[v[1]||(v[1]=e("p",{class:"text-sm text-gray-600"},"Board Reports",-1)),e("p",fe,d(x.activeBoardReports.length),1)]),l(a(q),{class:"w-8 h-8 text-green-500"})])]),e("div",be,[e("div",ye,[e("div",null,[v[2]||(v[2]=e("p",{class:"text-sm text-gray-600"},"Active Dashboards",-1)),e("p",_e,d(x.activeDashboards.length),1)]),l(a(M),{class:"w-8 h-8 text-purple-500"})])]),e("div",he,[e("div",xe,[e("div",null,[v[3]||(v[3]=e("p",{class:"text-sm text-gray-600"},"Avg Compliance Score",-1)),e("p",{class:ae(["text-2xl font-bold",i(x.complianceScore)])},d(Math.round(x.complianceScore))+"% ",3)]),l(a(ie),{class:"w-8 h-8 text-orange-500"})])])]))}},De={class:"p-6"},Ce={class:"flex justify-between items-center mb-6"},Re={class:"flex gap-2"},Ve={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},ke={class:"bg-white rounded-lg border shadow-sm"},Ae={class:"p-4 border-b"},$e={class:"flex justify-between items-center"},Be={class:"p-4"},Me={class:"space-y-3"},Ee={class:"font-medium"},Te={class:"text-sm text-gray-600"},Ue={class:"flex items-center gap-2"},je={key:0,class:"text-center py-4 text-gray-500"},Ne={class:"bg-white rounded-lg border shadow-sm"},Se={class:"p-4 border-b"},ze={class:"flex justify-between items-center"},Qe={class:"p-4"},Oe={class:"space-y-3"},Pe={class:"font-medium"},qe={class:"text-sm text-gray-600"},Le={class:"flex items-center gap-2"},Fe={key:0,class:"text-center py-4 text-gray-500"},Ye={class:"bg-white rounded-lg border shadow-sm mb-6"},Ie={class:"p-4 border-b"},Ke={class:"flex justify-between items-center"},He={class:"flex gap-2"},Ge={class:"p-4"},Je={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},We={class:"flex items-center justify-between mb-3"},Xe={class:"flex items-center gap-2"},Ze={class:"font-medium"},et={class:"space-y-2 text-sm"},tt={class:"text-gray-600"},st={class:"grid grid-cols-2 gap-2"},at={class:"font-medium"},lt={class:"font-medium"},ot={class:"font-medium"},rt={class:"font-medium text-xs"},it={key:0,class:"col-span-full text-center py-8 text-gray-500"},nt={class:"bg-white rounded-lg border shadow-sm"},dt={class:"p-4 border-b"},ut={class:"flex justify-between items-center"},pt={class:"p-4"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},vt={class:"flex items-center justify-between mb-2"},mt={class:"font-medium"},gt={class:"text-sm text-gray-600 mb-2"},ft={class:"text-xs text-gray-500"},bt={key:0,class:"col-span-full text-center py-8 text-gray-500"},yt={class:"space-y-4"},_t={class:"space-y-4"},ht={class:"flex items-center gap-2"},kt={__name:"Reports",setup(x){const i=de(),g=V(!1),v=V(!1),u=V(!1),n=V({type:"audit",engagement:"",period:"",title:"",description:""}),p=V({type:"Management Overview",title:"",description:"",timePeriod:"Current Month",isDefault:!1}),C=R(()=>i.activeAuditReports),y=R(()=>i.activeBoardReports),w=R(()=>i.activeDashboards),L=R(()=>i.dashboardKPIs),U=R(()=>i.reportTemplates),j=R(()=>i.loading),F=[{label:"Audit Report",value:"audit"},{label:"Board Report",value:"board"}],Y=[{label:"Q1",value:"Q1"},{label:"Q2",value:"Q2"},{label:"Q3",value:"Q3"},{label:"Q4",value:"Q4"},{label:"Annual",value:"Annual"}],I=[{label:"Management Overview",value:"Management Overview"},{label:"Compliance Dashboard",value:"Compliance Dashboard"},{label:"Risk Dashboard",value:"Risk Dashboard"},{label:"Operational Dashboard",value:"Operational Dashboard"},{label:"Executive Summary",value:"Executive Summary"}],K=[{label:"Current Month",value:"Current Month"},{label:"Last Month",value:"Last Month"},{label:"Current Quarter",value:"Current Quarter"},{label:"Last Quarter",value:"Last Quarter"},{label:"Current Year",value:"Current Year"},{label:"Last Year",value:"Last Year"}],H=()=>_(this,null,function*(){try{u.value=!0,console.log("Create audit report")}catch(o){console.error("Error creating audit report:",o)}finally{u.value=!1}}),G=()=>_(this,null,function*(){try{u.value=!0,console.log("Create board report")}catch(o){console.error("Error creating board report:",o)}finally{u.value=!1}}),J=()=>_(this,null,function*(){try{u.value=!0,n.value.type==="audit"?yield i.createAuditReport({engagement_reference:n.value.engagement,report_title:n.value.title,report_type:"Full Audit Report",report_status:"Draft"}):n.value.type==="board"&&(yield i.createBoardReport({report_title:n.value.title,reporting_period:n.value.period,report_type:"Board Report",report_status:"Draft",is_active:1})),g.value=!1,n.value={type:"audit",engagement:"",period:"",title:"",description:""}}catch(o){console.error("Error creating report:",o)}finally{u.value=!1}}),W=()=>_(this,null,function*(){try{u.value=!0,yield i.createManagementDashboard({dashboard_title:p.value.title,dashboard_type:p.value.type,description:p.value.description,time_period:p.value.timePeriod,is_default:p.value.isDefault,is_active:1,kpi_section:1,compliance_section:1,chart_configuration:1}),v.value=!1,p.value={type:"Management Overview",title:"",description:"",timePeriod:"Current Month",isDefault:!1}}catch(o){console.error("Error creating dashboard:",o)}finally{u.value=!1}}),N=()=>_(this,null,function*(){try{u.value=!0,yield i.createDefaultDashboards()}catch(o){console.error("Error creating default dashboards:",o)}finally{u.value=!1}}),X=()=>_(this,null,function*(){try{for(const o of w.value)yield i.refreshDashboard(o.name)}catch(o){console.error("Error refreshing dashboards:",o)}}),Z=()=>_(this,null,function*(){yield i.fetchReportTemplates()}),ee=o=>{console.log("View audit report:",o)},te=o=>{console.log("View board report:",o)},se=o=>{console.log("View dashboard:",o)},S=o=>({Draft:"secondary","Under Review":"warning",Approved:"success",Finalized:"success",Issued:"success",Presented:"success",Archived:"secondary"})[o]||"secondary",z=o=>o?new Date(o).toLocaleDateString():"";return le(()=>_(this,null,function*(){yield i.fetchAuditReports(),yield i.fetchBoardReports(),yield i.fetchManagementDashboards(),yield i.fetchDataAnalyticsDashboards(),yield i.fetchReportTemplates()})),(o,t)=>(c(),b("div",De,[e("div",Ce,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-2xl font-bold"},"Reports & Analytics"),e("p",{class:"text-gray-600"},"Comprehensive reporting and dashboard analytics")],-1)),e("div",Re,[l(a(m),{onClick:t[0]||(t[0]=s=>g.value=!0),class:"flex items-center gap-2"},{default:r(()=>[l(a(ne),{class:"w-4 h-4"}),t[16]||(t[16]=f(" Create Report ",-1))]),_:1}),l(a(m),{onClick:t[1]||(t[1]=s=>v.value=!0),variant:"outline",class:"flex items-center gap-2"},{default:r(()=>[l(a(M),{class:"w-4 h-4"}),t[17]||(t[17]=f(" Create Dashboard ",-1))]),_:1})])]),l(we,{"active-audit-reports":C.value,"active-board-reports":y.value,"active-dashboards":w.value,"compliance-score":L.value.complianceScore},null,8,["active-audit-reports","active-board-reports","active-dashboards","compliance-score"]),e("div",Ve,[e("div",ke,[e("div",Ae,[e("div",$e,[t[20]||(t[20]=e("h2",{class:"text-lg font-semibold"},"Audit Reports",-1)),l(a(m),{onClick:H,loading:u.value,variant:"outline",size:"sm"},{default:r(()=>[...t[19]||(t[19]=[f(" New Audit Report ",-1)])]),_:1},8,["loading"])])]),e("div",Be,[e("div",Me,[(c(!0),b(k,null,A(C.value.slice(0,5),s=>(c(),b("div",{key:s.name,class:"flex items-center justify-between p-3 border rounded"},[e("div",null,[e("h4",Ee,d(s.report_title),1),e("p",Te,d(s.report_type)+" • "+d(z(s.report_date)),1)]),e("div",Ue,[l(a(B),{variant:S(s.report_status)},{default:r(()=>[f(d(s.report_status),1)]),_:2},1032,["variant"]),l(a(m),{onClick:Q=>ee(s),variant:"ghost",size:"sm"},{default:r(()=>[l(a(E),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128)),C.value.length===0?(c(),b("div",je,[l(a(T),{class:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t[21]||(t[21]=e("p",null,"No audit reports found",-1))])):D("",!0)])])]),e("div",Ne,[e("div",Se,[e("div",ze,[t[23]||(t[23]=e("h2",{class:"text-lg font-semibold"},"Board Reports",-1)),l(a(m),{onClick:G,loading:u.value,variant:"outline",size:"sm"},{default:r(()=>[...t[22]||(t[22]=[f(" New Board Report ",-1)])]),_:1},8,["loading"])])]),e("div",Qe,[e("div",Oe,[(c(!0),b(k,null,A(y.value.slice(0,5),s=>(c(),b("div",{key:s.name,class:"flex items-center justify-between p-3 border rounded"},[e("div",null,[e("h4",Pe,d(s.report_title),1),e("p",qe,d(s.reporting_period)+" • "+d(s.report_type),1)]),e("div",Le,[l(a(B),{variant:S(s.report_status)},{default:r(()=>[f(d(s.report_status),1)]),_:2},1032,["variant"]),l(a(m),{onClick:Q=>te(s),variant:"ghost",size:"sm"},{default:r(()=>[l(a(E),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128)),y.value.length===0?(c(),b("div",Fe,[l(a(q),{class:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t[24]||(t[24]=e("p",null,"No board reports found",-1))])):D("",!0)])])])]),e("div",Ye,[e("div",Ie,[e("div",Ke,[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold"},"Management Dashboards",-1)),e("div",He,[l(a(m),{onClick:N,loading:u.value,variant:"outline",size:"sm"},{default:r(()=>[...t[25]||(t[25]=[f(" Create Defaults ",-1)])]),_:1},8,["loading"]),l(a(m),{onClick:X,loading:j.value,variant:"outline",size:"sm"},{default:r(()=>[l(a(O),{class:"w-4 h-4"})]),_:1},8,["loading"])])])]),e("div",Ge,[e("div",Je,[(c(!0),b(k,null,A(w.value,s=>(c(),b("div",{key:s.name,class:"border rounded-lg p-4 hover:shadow-md transition-shadow"},[e("div",We,[e("div",Xe,[l(a(M),{class:"w-5 h-5 text-purple-500"}),e("h4",Ze,d(s.dashboard_title),1),s.is_default?(c(),$(a(B),{key:0,variant:"success",size:"sm"},{default:r(()=>[...t[27]||(t[27]=[f("Default",-1)])]),_:1})):D("",!0)]),l(a(m),{onClick:Q=>se(s),variant:"ghost",size:"sm"},{default:r(()=>[l(a(E),{class:"w-4 h-4"})]),_:1},8,["onClick"])]),e("div",et,[e("p",tt,d(s.dashboard_type),1),e("div",st,[e("div",null,[t[28]||(t[28]=e("span",{class:"text-gray-500"},"Engagements:",-1)),e("span",at,d(s.total_engagements||0),1)]),e("div",null,[t[29]||(t[29]=e("span",{class:"text-gray-500"},"Findings:",-1)),e("span",lt,d(s.total_findings||0),1)]),e("div",null,[t[30]||(t[30]=e("span",{class:"text-gray-500"},"Compliance:",-1)),e("span",ot,d(Math.round(s.compliance_score||0))+"%",1)]),e("div",null,[t[31]||(t[31]=e("span",{class:"text-gray-500"},"Updated:",-1)),e("span",rt,d(z(s.last_updated)),1)])])])]))),128)),w.value.length===0?(c(),b("div",it,[l(a(M),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),t[33]||(t[33]=e("p",{class:"text-lg font-medium mb-2"},"No dashboards found",-1)),t[34]||(t[34]=e("p",{class:"mb-4"},"Create default dashboards to get started with analytics",-1)),l(a(m),{onClick:N,loading:u.value},{default:r(()=>[...t[32]||(t[32]=[f(" Create Default Dashboards ",-1)])]),_:1},8,["loading"])])):D("",!0)])])]),e("div",nt,[e("div",dt,[e("div",ut,[t[35]||(t[35]=e("h2",{class:"text-lg font-semibold"},"Report Templates",-1)),l(a(m),{onClick:Z,loading:j.value,variant:"outline",size:"sm"},{default:r(()=>[l(a(O),{class:"w-4 h-4"})]),_:1},8,["loading"])])]),e("div",pt,[e("div",ct,[(c(!0),b(k,null,A(U.value.filter(s=>s.is_active),s=>(c(),b("div",{key:s.name,class:"border rounded-lg p-4"},[e("div",vt,[e("h4",mt,d(s.template_name),1),s.is_default?(c(),$(a(B),{key:0,variant:"success",size:"sm"},{default:r(()=>[...t[36]||(t[36]=[f("Default",-1)])]),_:1})):D("",!0)]),e("p",gt,d(s.template_type),1),e("p",ft,d(s.description),1)]))),128)),U.value.filter(s=>s.is_active).length===0?(c(),b("div",bt,[l(a(T),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),t[37]||(t[37]=e("p",null,"No active report templates found",-1))])):D("",!0)])])]),l(a(P),{modelValue:g.value,"onUpdate:modelValue":t[8]||(t[8]=s=>g.value=s),options:{title:"Create New Report"}},{"body-content":r(()=>[e("div",yt,[l(a(h),{label:"Report Type",modelValue:n.value.type,"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.type=s),type:"select",options:F,required:""},null,8,["modelValue"]),n.value.type==="audit"?(c(),$(a(h),{key:0,label:"Audit Engagement",modelValue:n.value.engagement,"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.engagement=s),type:"link",doctype:"Audit Engagement",required:""},null,8,["modelValue"])):D("",!0),n.value.type==="board"?(c(),$(a(h),{key:1,label:"Reporting Period",modelValue:n.value.period,"onUpdate:modelValue":t[4]||(t[4]=s=>n.value.period=s),type:"select",options:Y,required:""},null,8,["modelValue"])):D("",!0),l(a(h),{label:"Report Title",modelValue:n.value.title,"onUpdate:modelValue":t[5]||(t[5]=s=>n.value.title=s),type:"text",placeholder:"Enter report title",required:""},null,8,["modelValue"]),l(a(h),{label:"Description",modelValue:n.value.description,"onUpdate:modelValue":t[6]||(t[6]=s=>n.value.description=s),type:"textarea",placeholder:"Optional description"},null,8,["modelValue"])])]),actions:r(()=>[l(a(m),{variant:"outline",onClick:t[7]||(t[7]=s=>g.value=!1)},{default:r(()=>[...t[38]||(t[38]=[f("Cancel",-1)])]),_:1}),l(a(m),{onClick:J,loading:u.value},{default:r(()=>[...t[39]||(t[39]=[f("Create Report",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),l(a(P),{modelValue:v.value,"onUpdate:modelValue":t[15]||(t[15]=s=>v.value=s),options:{title:"Create New Dashboard"}},{"body-content":r(()=>[e("div",_t,[l(a(h),{label:"Dashboard Type",modelValue:p.value.type,"onUpdate:modelValue":t[9]||(t[9]=s=>p.value.type=s),type:"select",options:I,required:""},null,8,["modelValue"]),l(a(h),{label:"Dashboard Title",modelValue:p.value.title,"onUpdate:modelValue":t[10]||(t[10]=s=>p.value.title=s),type:"text",placeholder:"Enter dashboard title",required:""},null,8,["modelValue"]),l(a(h),{label:"Description",modelValue:p.value.description,"onUpdate:modelValue":t[11]||(t[11]=s=>p.value.description=s),type:"textarea",placeholder:"Optional description"},null,8,["modelValue"]),l(a(h),{label:"Time Period",modelValue:p.value.timePeriod,"onUpdate:modelValue":t[12]||(t[12]=s=>p.value.timePeriod=s),type:"select",options:K,required:""},null,8,["modelValue"]),e("div",ht,[oe(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=s=>p.value.isDefault=s),class:"rounded"},null,512),[[re,p.value.isDefault]]),t[40]||(t[40]=e("label",{class:"text-sm"},"Set as default dashboard",-1))])])]),actions:r(()=>[l(a(m),{variant:"outline",onClick:t[14]||(t[14]=s=>v.value=!1)},{default:r(()=>[...t[41]||(t[41]=[f("Cancel",-1)])]),_:1}),l(a(m),{onClick:W,loading:u.value},{default:r(()=>[...t[42]||(t[42]=[f("Create Dashboard",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])]))}};export{kt as default};
//# sourceMappingURL=Reports-BwNlWO1h.js.map
