var E=(D,A,m)=>new Promise((t,_)=>{var F=y=>{try{b(m.next(y))}catch(h){_(h)}},R=y=>{try{b(m.throw(y))}catch(h){_(h)}},b=y=>y.done?t(y.value):Promise.resolve(y.value).then(F,R);b((m=m.apply(D,A)).next())});import{a0 as W,a as O,r as N,c as K,o as U,B as Y,b as a,d as o,e,g as c,h as g,j as u,A as Z,_ as T,t as n,i as d,l as p,f as r,k as v,Z as G,V as J,F as f,p as H,a1 as Q,q as k,v as X,a2 as ee,x as te}from"./index-DyBJn5r4.js";/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=W("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),oe={class:"space-y-6"},ae={class:"flex items-center justify-between"},ne={class:"flex items-center space-x-3"},ie={class:"text-2xl font-bold text-gray-900"},re={class:"text-gray-600 mt-1"},le={class:"flex items-center space-x-3"},de={key:0,class:"flex justify-center items-center py-12"},ue={class:"grid grid-cols-2 md:grid-cols-6 gap-4"},ge={class:"bg-white rounded-lg border border-gray-200 p-4"},_e={class:"text-sm font-bold text-gray-900"},ce={class:"bg-white rounded-lg border border-gray-200 p-4"},pe={class:"text-sm font-bold text-gray-900"},ve={class:"bg-white rounded-lg border border-gray-200 p-4"},ye={class:"bg-white rounded-lg border border-gray-200 p-4"},me={class:"text-sm font-bold text-gray-900"},xe={class:"bg-white rounded-lg border border-gray-200 p-4"},fe={class:"bg-white rounded-lg border border-gray-200 p-4"},be={key:1,class:"text-sm text-gray-400"},he={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-center space-x-2"},ke={class:"text-sm text-yellow-800"},we={class:"bg-white rounded-lg border border-gray-200"},Ce={class:"border-b border-gray-200"},Le={class:"flex -mb-px overflow-x-auto"},Me=["onClick"],Re={key:0,class:"ml-1 text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded-full"},Te={class:"p-6"},He={key:0,class:"space-y-6"},Ae=["innerHTML"],Fe={key:1,class:"text-gray-500"},Ne=["innerHTML"],De={key:1,class:"text-gray-500"},Ve=["innerHTML"],Ie={key:1,class:"text-gray-500"},Se=["innerHTML"],Pe={key:1,class:"text-gray-500"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200"},qe={key:1,class:"text-gray-400"},Ee={class:"font-medium"},Be={class:"font-medium"},je={class:"font-medium"},ze={key:0},We=["innerHTML"],Oe={key:1,class:"space-y-4"},Ke={key:0},Ue={class:"flex items-center space-x-3"},Ye={class:"font-medium text-sm text-gray-900"},Ze={class:"text-xs text-gray-500"},Ge={key:1,class:"text-gray-500 text-center py-6"},Je={class:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200"},Qe={class:"bg-gray-50 rounded p-3"},Xe={class:"font-medium"},et={class:"bg-gray-50 rounded p-3"},tt={class:"font-medium"},st={class:"bg-gray-50 rounded p-3"},ot={class:"font-medium"},at={key:2,class:"space-y-4"},nt=["innerHTML"],it={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},rt={class:"bg-gray-50 rounded p-3"},lt={class:"font-medium text-sm"},dt={class:"bg-gray-50 rounded p-3"},ut={class:"font-medium text-sm"},gt={class:"bg-gray-50 rounded p-3"},_t={class:"font-medium text-sm"},ct={class:"bg-gray-50 rounded p-3"},pt={class:"font-medium text-sm"},vt={class:"pt-4 border-t border-gray-200"},yt={class:"grid grid-cols-3 gap-4"},mt={key:1,class:"text-gray-400 text-sm"},xt={class:"font-medium text-sm"},ft={class:"font-medium text-sm"},bt=["innerHTML"],ht={key:1,class:"pt-4 border-t border-gray-200"},kt={class:"space-y-2"},wt={class:"flex-1"},Ct={class:"text-sm font-medium text-gray-900"},Lt={class:"text-xs text-gray-500"},Mt={key:3,class:"space-y-4"},Rt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Tt={class:"bg-gray-50 rounded p-3"},Ht={class:"font-medium"},At={class:"bg-gray-50 rounded p-3"},Ft={class:"font-medium"},Nt={class:"bg-gray-50 rounded p-3"},Dt={class:"font-medium"},Vt={class:"bg-gray-50 rounded p-3"},It={key:1,class:"font-medium"},St={key:0},Pt={class:"space-y-3"},$t={class:"flex items-center justify-between"},qt={class:"text-sm font-medium text-gray-900"},Et={class:"text-xs text-gray-500"},Bt={key:0,class:"text-sm text-gray-600 mt-1"},jt={class:"text-xs text-gray-500 mt-1"},zt={key:1,class:"text-gray-500 text-center py-6"},Wt={key:4,class:"space-y-4"},Ot={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Kt={class:"bg-gray-50 rounded p-3"},Ut={key:1,class:"text-gray-400"},Yt={class:"bg-gray-50 rounded p-3"},Zt={key:1,class:"text-gray-400"},Gt={class:"bg-gray-50 rounded p-3"},Jt={class:"font-medium text-sm"},Qt={class:"bg-gray-50 rounded p-3"},Xt={class:"font-medium text-sm"},es={key:0},ts=["innerHTML"],ss={key:1},os=["innerHTML"],as={key:2},ns=["innerHTML"],is={key:3},rs={class:"text-sm text-gray-700 bg-gray-50 rounded-lg p-4"},ls={key:4,class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},ds={class:"text-sm text-gray-800"},us={key:5,class:"space-y-4"},gs={key:0,class:"bg-orange-50 border border-orange-200 rounded-lg p-3"},_s={class:"text-sm text-orange-800"},cs={key:1},ps=["onClick"],vs={class:"font-medium text-sm text-blue-600"},ys={key:0,class:"text-xs text-gray-500"},ms={key:2,class:"text-gray-500 text-center py-6"},xs={key:6,class:"space-y-4"},fs={key:0},bs={class:"space-y-3"},hs={class:"flex items-center space-x-2"},ks={key:0,class:"text-sm text-gray-600 mt-1"},ws={class:"text-xs text-gray-500 mt-1"},Cs={key:1,class:"text-gray-500 text-center py-6"},Ls={key:7,class:"space-y-4"},Ms={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Rs={class:"bg-gray-50 rounded p-3"},Ts={key:1,class:"font-medium text-sm"},Hs={class:"bg-gray-50 rounded p-3"},As={class:"font-medium text-sm"},Fs={class:"bg-gray-50 rounded p-3"},Ns={class:"font-medium text-sm"},Ds={class:"bg-gray-50 rounded p-3"},Vs={class:"font-medium text-sm"},Is={key:0},Ss=["innerHTML"],Ps={key:1,class:"pt-4 border-t border-gray-200"},$s={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},qs={class:"bg-green-50 rounded p-3"},Es={class:"font-medium text-sm"},Bs={class:"bg-green-50 rounded p-3"},js={class:"font-medium text-sm"},zs={class:"bg-green-50 rounded p-3"},Ws={class:"font-medium text-sm"},Os={key:0,class:"bg-green-50 rounded p-3"},Ks={class:"font-medium text-sm"},Us=["innerHTML"],Ys={key:2,class:"text-center py-12"},Js={__name:"FindingDetail",setup(D){const A=O(),m=N(!0),t=N(null),_=N("4c"),F=K(()=>{var l,s,w,C,L,i,M,S,P,$,q;return[{id:"4c",label:"4C Structure"},{id:"evidence",label:"Evidence",count:((s=(l=t.value)==null?void 0:l.evidence)==null?void 0:s.length)||0},{id:"action_plan",label:"Action Plan",count:((C=(w=t.value)==null?void 0:w.milestones)==null?void 0:C.length)||0},{id:"follow_up",label:"Follow-up",count:((i=(L=t.value)==null?void 0:L.follow_up_history)==null?void 0:i.length)||0},{id:"ai_review",label:"AI Review",count:(M=t.value)!=null&&M.ai_review_status?1:0},{id:"related",label:"Related",count:((P=(S=t.value)==null?void 0:S.related_findings)==null?void 0:P.length)||0},{id:"status_history",label:"Status History",count:((q=($=t.value)==null?void 0:$.status_history)==null?void 0:q.length)||0},{id:"verification",label:"Verification"}]}),R=()=>E(this,null,function*(){m.value=!0;try{const l=yield te({url:"frappe.client.get",params:{doctype:"Audit Finding",name:A.params.id}}).fetch();t.value=l}catch(l){console.error("Failed to load finding:",l)}finally{m.value=!1}}),b=l=>({Critical:"danger",High:"warning",Medium:"info",Low:"secondary"})[l]||"secondary",y=l=>({Open:"danger","Action in Progress":"warning","Pending Verification":"info",Closed:"success","Accepted as Risk":"secondary","Management Override":"danger"})[l]||"secondary",h=l=>({Pending:"warning",Reviewed:"success",Skipped:"secondary",Failed:"danger"})[l]||"secondary",B=l=>({Pending:"secondary","Verified-Closed":"success","Verified-Partially Implemented":"warning","Not Implemented":"danger"})[l]||"secondary",x=l=>l?new Date(l).toLocaleDateString():"-",V=l=>l?new Date(l).toLocaleString():"-",I=l=>l!=null?new Intl.NumberFormat(void 0,{style:"currency",currency:"KES"}).format(l):"-",j=l=>{l&&window.open(l)},z=()=>{t.value&&window.open(`/app/audit-finding/${t.value.name}`,"_blank")};return U(()=>{R()}),(l,s)=>{var C,L;const w=Y("router-link");return o(),a("div",oe,[e("div",ae,[e("div",ne,[c(u(T),{variant:"ghost",onClick:s[0]||(s[0]=i=>l.$router.push("/findings/list"))},{default:g(()=>[c(u(Z),{class:"h-4 w-4"})]),_:1}),e("div",null,[e("h1",ie,n(((C=t.value)==null?void 0:C.finding_title)||"Finding Details"),1),e("p",re,[d(n(((L=t.value)==null?void 0:L.finding_id)||"")+" ",1),t.value?(o(),p(u(v),{key:0,variant:b(t.value.severity||t.value.risk_rating),class:"ml-2"},{default:g(()=>[d(n(t.value.severity||t.value.risk_rating),1)]),_:1},8,["variant"])):r("",!0),t.value?(o(),p(u(v),{key:1,variant:y(t.value.finding_status),class:"ml-1"},{default:g(()=>[d(n(t.value.finding_status),1)]),_:1},8,["variant"])):r("",!0)])])]),e("div",le,[c(u(T),{variant:"outline",onClick:z},{default:g(()=>[c(u(G),{class:"h-4 w-4 mr-2"}),s[1]||(s[1]=d(" Edit in Desk ",-1))]),_:1})])]),m.value?(o(),a("div",de,[c(u(J),{class:"h-8 w-8"})])):t.value?(o(),a(f,{key:1},[e("div",ue,[e("div",ge,[s[2]||(s[2]=e("p",{class:"text-sm text-gray-600"},"Category",-1)),e("p",_e,n(t.value.finding_category),1)]),e("div",ce,[s[3]||(s[3]=e("p",{class:"text-sm text-gray-600"},"Risk Category",-1)),e("p",pe,n(t.value.risk_category||"-"),1)]),e("div",ve,[s[4]||(s[4]=e("p",{class:"text-sm text-gray-600"},"Financial Impact",-1)),e("p",{class:H(["text-sm font-bold",t.value.financial_impact?"text-red-600":"text-gray-900"])},n(t.value.financial_impact?I(t.value.financial_impact):"-"),3)]),e("div",ye,[s[5]||(s[5]=e("p",{class:"text-sm text-gray-600"},"Exception Rate",-1)),e("p",me,n(t.value.exception_rate!=null?t.value.exception_rate+"%":"-"),1)]),e("div",xe,[s[6]||(s[6]=e("p",{class:"text-sm text-gray-600"},"Overdue Days",-1)),e("p",{class:H(["text-sm font-bold",t.value.overdue_days>0?"text-red-600":"text-gray-900"])},n(t.value.overdue_days||0),3)]),e("div",fe,[s[7]||(s[7]=e("p",{class:"text-sm text-gray-600"},"AI Review",-1)),t.value.ai_review_status?(o(),p(u(v),{key:0,variant:h(t.value.ai_review_status)},{default:g(()=>[d(n(t.value.ai_review_status),1)]),_:1},8,["variant"])):(o(),a("span",be,"-"))])]),t.value.severity_mismatch?(o(),a("div",he,[c(u(Q),{class:"h-5 w-5 text-yellow-600 flex-shrink-0"}),e("p",ke,[s[8]||(s[8]=d(" AI suggests severity ",-1)),e("strong",null,n(t.value.ai_severity_suggestion),1),s[9]||(s[9]=d(" but current rating is ",-1)),e("strong",null,n(t.value.severity||t.value.risk_rating),1),s[10]||(s[10]=d(". ",-1))])])):r("",!0),e("div",we,[e("div",Ce,[e("nav",Le,[(o(!0),a(f,null,k(F.value,i=>(o(),a("button",{key:i.id,onClick:M=>_.value=i.id,class:H(["px-5 py-3 text-sm font-medium border-b-2 whitespace-nowrap",_.value===i.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[d(n(i.label)+" ",1),i.count>0?(o(),a("span",Re,n(i.count),1)):r("",!0)],10,Me))),128))])]),e("div",Te,[_.value==="4c"?(o(),a("div",He,[e("div",null,[s[11]||(s[11]=e("h3",{class:"font-semibold text-gray-900 mb-2 flex items-center"},[e("span",{class:"bg-red-100 text-red-700 text-xs font-bold px-2 py-0.5 rounded mr-2"},"Condition"),d(" What was found ")],-1)),t.value.condition?(o(),a("div",{key:0,class:"prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.condition},null,8,Ae)):(o(),a("p",Fe,"Not specified."))]),e("div",null,[s[12]||(s[12]=e("h3",{class:"font-semibold text-gray-900 mb-2 flex items-center"},[e("span",{class:"bg-blue-100 text-blue-700 text-xs font-bold px-2 py-0.5 rounded mr-2"},"Criteria"),d(" What should be ")],-1)),t.value.criteria?(o(),a("div",{key:0,class:"prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.criteria},null,8,Ne)):(o(),a("p",De,"Not specified."))]),e("div",null,[s[13]||(s[13]=e("h3",{class:"font-semibold text-gray-900 mb-2 flex items-center"},[e("span",{class:"bg-yellow-100 text-yellow-700 text-xs font-bold px-2 py-0.5 rounded mr-2"},"Cause"),d(" Why it happened ")],-1)),t.value.cause?(o(),a("div",{key:0,class:"prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.cause},null,8,Ve)):(o(),a("p",Ie,"Not specified."))]),e("div",null,[s[14]||(s[14]=e("h3",{class:"font-semibold text-gray-900 mb-2 flex items-center"},[e("span",{class:"bg-gray-100 text-gray-700 text-xs font-bold px-2 py-0.5 rounded mr-2"},"Consequence"),d(" What is the impact ")],-1)),t.value.consequence?(o(),a("div",{key:0,class:"prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.consequence},null,8,Se)):(o(),a("p",Pe,"Not specified."))]),e("div",$e,[e("div",null,[s[15]||(s[15]=e("p",{class:"text-sm text-gray-600"},"Engagement",-1)),t.value.engagement_reference?(o(),p(w,{key:0,to:`/engagements/${t.value.engagement_reference}`,class:"text-blue-600 hover:underline font-medium"},{default:g(()=>[d(n(t.value.engagement_reference),1)]),_:1},8,["to"])):(o(),a("span",qe,"-"))]),e("div",null,[s[16]||(s[16]=e("p",{class:"text-sm text-gray-600"},"Working Paper",-1)),e("span",Ee,n(t.value.working_paper_reference||"-"),1)]),e("div",null,[s[17]||(s[17]=e("p",{class:"text-sm text-gray-600"},"Likelihood / Impact",-1)),e("span",Be,n(t.value.likelihood||"-")+" / "+n(t.value.impact||"-"),1)]),e("div",null,[s[18]||(s[18]=e("p",{class:"text-sm text-gray-600"},"Risk Score",-1)),e("span",je,n(t.value.risk_score||"-"),1)])]),t.value.recommendation?(o(),a("div",ze,[s[19]||(s[19]=e("h3",{class:"font-semibold text-gray-900 mb-2"},"Recommendation",-1)),e("div",{class:"prose prose-sm max-w-none bg-blue-50 rounded-lg p-4",innerHTML:t.value.recommendation},null,8,We)])):r("",!0)])):r("",!0),_.value==="evidence"?(o(),a("div",Oe,[t.value.evidence&&t.value.evidence.length>0?(o(),a("div",Ke,[(o(!0),a(f,null,k(t.value.evidence,i=>(o(),a("div",{key:i.name,class:"border border-gray-200 rounded-lg p-4 flex items-center justify-between"},[e("div",Ue,[c(u(X),{class:"h-5 w-5 text-gray-400"}),e("div",null,[e("p",Ye,n(i.evidence_title||i.description||i.name),1),e("p",Ze,n(i.evidence_type||"-"),1)])]),i.file||i.attachment?(o(),p(u(T),{key:0,variant:"outline",size:"sm",onClick:M=>j(i.file||i.attachment)},{default:g(()=>[c(u(ee),{class:"h-3 w-3 mr-1"}),s[20]||(s[20]=d(" Download ",-1))]),_:1},8,["onClick"])):r("",!0)]))),128))])):(o(),a("p",Ge,"No evidence attached.")),e("div",Je,[e("div",Qe,[s[21]||(s[21]=e("p",{class:"text-xs text-gray-500"},"Sample Size",-1)),e("p",Xe,n(t.value.sample_size||"-"),1)]),e("div",et,[s[22]||(s[22]=e("p",{class:"text-xs text-gray-500"},"Exceptions Found",-1)),e("p",tt,n(t.value.exceptions_found||"-"),1)]),e("div",st,[s[23]||(s[23]=e("p",{class:"text-xs text-gray-500"},"Exception Rate",-1)),e("p",ot,n(t.value.exception_rate!=null?t.value.exception_rate+"%":"-"),1)])])])):r("",!0),_.value==="action_plan"?(o(),a("div",at,[t.value.action_plan_description?(o(),a("div",{key:0,class:"prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.action_plan_description},null,8,nt)):r("",!0),e("div",it,[e("div",rt,[s[24]||(s[24]=e("p",{class:"text-xs text-gray-500"},"Responsible Person",-1)),e("p",lt,n(t.value.responsible_person||"-"),1)]),e("div",dt,[s[25]||(s[25]=e("p",{class:"text-xs text-gray-500"},"Department",-1)),e("p",ut,n(t.value.responsible_department||"-"),1)]),e("div",gt,[s[26]||(s[26]=e("p",{class:"text-xs text-gray-500"},"Target Date",-1)),e("p",_t,n(x(t.value.target_completion_date)),1)]),e("div",ct,[s[27]||(s[27]=e("p",{class:"text-xs text-gray-500"},"Estimated Cost",-1)),e("p",pt,n(t.value.estimated_cost?I(t.value.estimated_cost):"-"),1)])]),e("div",vt,[s[31]||(s[31]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Management Response",-1)),e("div",yt,[e("div",null,[s[28]||(s[28]=e("p",{class:"text-sm text-gray-600"},"Agreement",-1)),t.value.management_agrees?(o(),p(u(v),{key:0,variant:t.value.management_agrees==="Agree"?"success":t.value.management_agrees==="Partially Agree"?"warning":"danger"},{default:g(()=>[d(n(t.value.management_agrees),1)]),_:1},8,["variant"])):(o(),a("span",mt,"Pending"))]),e("div",null,[s[29]||(s[29]=e("p",{class:"text-sm text-gray-600"},"Responded By",-1)),e("p",xt,n(t.value.responded_by||"-"),1)]),e("div",null,[s[30]||(s[30]=e("p",{class:"text-sm text-gray-600"},"Response Date",-1)),e("p",ft,n(x(t.value.response_date)),1)])]),t.value.management_comments?(o(),a("div",{key:0,class:"mt-3 prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.management_comments},null,8,bt)):r("",!0)]),t.value.milestones&&t.value.milestones.length>0?(o(),a("div",ht,[s[32]||(s[32]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Action Milestones",-1)),e("div",kt,[(o(!0),a(f,null,k(t.value.milestones,i=>(o(),a("div",{key:i.name,class:H(["flex items-center space-x-3 border-l-2 pl-4 py-2",i.status==="Completed"?"border-green-500":"border-gray-300"])},[e("div",wt,[e("p",Ct,n(i.milestone_name||i.title),1),e("p",Lt,"Due: "+n(x(i.due_date||i.target_date)),1)]),c(u(v),{variant:i.status==="Completed"?"success":"secondary"},{default:g(()=>[d(n(i.status||"Pending"),1)]),_:2},1032,["variant"])],2))),128))])])):r("",!0)])):r("",!0),_.value==="follow_up"?(o(),a("div",Mt,[e("div",Rt,[e("div",Tt,[s[33]||(s[33]=e("p",{class:"text-xs text-gray-500"},"Follow-up Required",-1)),e("p",Ht,n(t.value.follow_up_required?"Yes":"No"),1)]),e("div",At,[s[34]||(s[34]=e("p",{class:"text-xs text-gray-500"},"Frequency",-1)),e("p",Ft,n(t.value.follow_up_frequency||"-"),1)]),e("div",Nt,[s[35]||(s[35]=e("p",{class:"text-xs text-gray-500"},"Next Follow-up",-1)),e("p",Dt,n(x(t.value.next_follow_up_date)),1)]),e("div",Vt,[s[36]||(s[36]=e("p",{class:"text-xs text-gray-500"},"Escalation",-1)),t.value.escalation_required?(o(),p(u(v),{key:0,variant:"danger"},{default:g(()=>[d(n(t.value.escalation_level||"Required"),1)]),_:1})):(o(),a("span",It,"None"))])]),t.value.follow_up_history&&t.value.follow_up_history.length>0?(o(),a("div",St,[s[37]||(s[37]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Follow-up History",-1)),e("div",Pt,[(o(!0),a(f,null,k(t.value.follow_up_history,i=>(o(),a("div",{key:i.name,class:"border border-gray-200 rounded-lg p-3"},[e("div",$t,[e("p",qt,n(i.activity_type||i.follow_up_type||"Follow-up"),1),e("span",Et,n(x(i.follow_up_date||i.date)),1)]),i.notes||i.remarks?(o(),a("p",Bt,n(i.notes||i.remarks),1)):r("",!0),e("p",jt,"By: "+n(i.performed_by||i.user||"-"),1)]))),128))])])):(o(),a("p",zt,"No follow-up history."))])):r("",!0),_.value==="ai_review"?(o(),a("div",Wt,[e("div",Ot,[e("div",Kt,[s[38]||(s[38]=e("p",{class:"text-xs text-gray-500"},"AI Review Status",-1)),t.value.ai_review_status?(o(),p(u(v),{key:0,variant:h(t.value.ai_review_status)},{default:g(()=>[d(n(t.value.ai_review_status),1)]),_:1},8,["variant"])):(o(),a("span",Ut,"Not reviewed"))]),e("div",Yt,[s[39]||(s[39]=e("p",{class:"text-xs text-gray-500"},"AI Severity Suggestion",-1)),t.value.ai_severity_suggestion?(o(),p(u(v),{key:0,variant:b(t.value.ai_severity_suggestion)},{default:g(()=>[d(n(t.value.ai_severity_suggestion),1)]),_:1},8,["variant"])):(o(),a("span",Zt,"-"))]),e("div",Gt,[s[40]||(s[40]=e("p",{class:"text-xs text-gray-500"},"Model Used",-1)),e("p",Jt,n(t.value.ai_model_used||"-"),1)]),e("div",Qt,[s[41]||(s[41]=e("p",{class:"text-xs text-gray-500"},"Reviewed On",-1)),e("p",Xt,n(t.value.ai_reviewed_on?V(t.value.ai_reviewed_on):"-"),1)])]),t.value.ai_review_notes?(o(),a("div",es,[s[42]||(s[42]=e("h4",{class:"font-medium text-gray-900 mb-2"},"AI Review Notes",-1)),e("div",{class:"prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.ai_review_notes},null,8,ts)])):r("",!0),t.value.ai_root_cause_analysis?(o(),a("div",ss,[s[43]||(s[43]=e("h4",{class:"font-medium text-gray-900 mb-2"},"AI Root Cause Analysis",-1)),e("div",{class:"prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.ai_root_cause_analysis},null,8,os)])):r("",!0),t.value.ai_recommendation_refinement?(o(),a("div",as,[s[44]||(s[44]=e("h4",{class:"font-medium text-gray-900 mb-2"},"AI Recommendation Refinement",-1)),e("div",{class:"prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.ai_recommendation_refinement},null,8,ns)])):r("",!0),t.value.ai_risk_narrative?(o(),a("div",is,[s[45]||(s[45]=e("h4",{class:"font-medium text-gray-900 mb-2"},"AI Risk Narrative",-1)),e("p",rs,n(t.value.ai_risk_narrative),1)])):r("",!0),t.value.auto_generated?(o(),a("div",ls,[e("p",ds,[s[47]||(s[47]=d(" Auto-generated by ",-1)),e("strong",null,n(t.value.source_agent),1),s[48]||(s[48]=d(" agent. ",-1)),t.value.agent_execution_log?(o(),p(w,{key:0,to:`/audit-execution/agent-dashboard/${t.value.agent_execution_log}`,class:"text-gray-900 hover:underline ml-1"},{default:g(()=>[...s[46]||(s[46]=[d(" View execution log ",-1)])]),_:1},8,["to"])):r("",!0)])])):r("",!0)])):r("",!0),_.value==="related"?(o(),a("div",us,[t.value.repeat_finding?(o(),a("div",gs,[e("p",_s,[s[49]||(s[49]=d(" This is a ",-1)),s[50]||(s[50]=e("strong",null,"repeat finding",-1)),d(" ("+n(t.value.repeat_count||1)+"x). Previous: "+n(t.value.previous_finding_reference||"-")+" ("+n(x(t.value.previous_finding_date))+") ",1)])])):r("",!0),t.value.related_findings&&t.value.related_findings.length>0?(o(),a("div",cs,[s[51]||(s[51]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Related Findings",-1)),(o(!0),a(f,null,k(t.value.related_findings,i=>(o(),a("div",{key:i.name,class:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 cursor-pointer",onClick:M=>l.$router.push(`/findings/${i.related_finding}`)},[e("p",vs,n(i.related_finding),1),i.relationship_type?(o(),a("p",ys,n(i.relationship_type),1)):r("",!0)],8,ps))),128))])):(o(),a("p",ms,"No related findings linked."))])):r("",!0),_.value==="status_history"?(o(),a("div",xs,[t.value.status_history&&t.value.status_history.length>0?(o(),a("div",fs,[e("div",bs,[(o(!0),a(f,null,k(t.value.status_history,i=>(o(),a("div",{key:i.name,class:"flex items-start space-x-3 border-l-2 border-blue-200 pl-4 py-2"},[e("div",null,[e("div",hs,[c(u(v),{variant:"secondary"},{default:g(()=>[d(n(i.from_status||"-"),1)]),_:2},1024),c(u(se),{class:"h-3 w-3 text-gray-400"}),c(u(v),{variant:y(i.to_status)},{default:g(()=>[d(n(i.to_status),1)]),_:2},1032,["variant"])]),i.reason||i.notes?(o(),a("p",ks,n(i.reason||i.notes),1)):r("",!0),e("p",ws,n(i.changed_by||"-")+" on "+n(V(i.changed_on||i.creation)),1)])]))),128))])])):(o(),a("p",Cs,"No status changes recorded."))])):r("",!0),_.value==="verification"?(o(),a("div",Ls,[e("div",Ms,[e("div",Rs,[s[52]||(s[52]=e("p",{class:"text-xs text-gray-500"},"Verification Status",-1)),t.value.verification_status?(o(),p(u(v),{key:0,variant:B(t.value.verification_status)},{default:g(()=>[d(n(t.value.verification_status),1)]),_:1},8,["variant"])):(o(),a("span",Ts,"Pending"))]),e("div",Hs,[s[53]||(s[53]=e("p",{class:"text-xs text-gray-500"},"Method",-1)),e("p",As,n(t.value.verification_method||"-"),1)]),e("div",Fs,[s[54]||(s[54]=e("p",{class:"text-xs text-gray-500"},"Verified By",-1)),e("p",Ns,n(t.value.verified_by||"-"),1)]),e("div",Ds,[s[55]||(s[55]=e("p",{class:"text-xs text-gray-500"},"Verification Date",-1)),e("p",Vs,n(x(t.value.verification_date)),1)])]),t.value.verification_results?(o(),a("div",Is,[s[56]||(s[56]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Verification Results",-1)),e("div",{class:"prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.verification_results},null,8,Ss)])):r("",!0),t.value.closure_date?(o(),a("div",Ps,[s[61]||(s[61]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Closure Information",-1)),e("div",$s,[e("div",qs,[s[57]||(s[57]=e("p",{class:"text-xs text-gray-500"},"Closure Date",-1)),e("p",Es,n(x(t.value.closure_date)),1)]),e("div",Bs,[s[58]||(s[58]=e("p",{class:"text-xs text-gray-500"},"Closed By",-1)),e("p",js,n(t.value.closed_by||"-"),1)]),e("div",zs,[s[59]||(s[59]=e("p",{class:"text-xs text-gray-500"},"Closure Reason",-1)),e("p",Ws,n(t.value.closure_reason||"-"),1)]),t.value.closure_approved_by?(o(),a("div",Os,[s[60]||(s[60]=e("p",{class:"text-xs text-gray-500"},"Approved By",-1)),e("p",Ks,n(t.value.closure_approved_by),1)])):r("",!0)]),t.value.closure_notes?(o(),a("div",{key:0,class:"mt-3 prose prose-sm max-w-none bg-gray-50 rounded-lg p-4",innerHTML:t.value.closure_notes},null,8,Us)):r("",!0)])):r("",!0)])):r("",!0)])])],64)):(o(),a("div",Ys,[s[63]||(s[63]=e("p",{class:"text-gray-600"},"Failed to load finding details.",-1)),c(u(T),{onClick:R,class:"mt-4"},{default:g(()=>[...s[62]||(s[62]=[d("Retry",-1)])]),_:1})]))])}}};export{Js as default};
//# sourceMappingURL=FindingDetail-BsabJWzo.js.map
