var Ce=Object.defineProperty;var H=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var W=(i,d,r)=>d in i?Ce(i,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[d]=r,Q=(i,d)=>{for(var r in d||(d={}))Ae.call(d,r)&&W(i,r,d[r]);if(H)for(var r of H(d))Ue.call(d,r)&&W(i,r,d[r]);return i};var j=(i,d,r)=>new Promise((E,_)=>{var A=x=>{try{t(r.next(x))}catch(U){_(U)}},b=x=>{try{t(r.throw(x))}catch(U){_(U)}},t=x=>x.done?E(x.value):Promise.resolve(x.value).then(A,b);t((r=r.apply(i,d)).next())});import{u as Se,a as he,r as O,c as K,o as Re,w as Ie,b as p,d as v,e as l,f as k,g as o,h as m,i as c,j as s,A as Oe,_ as g,t as y,k as C,l as V,S as Me,E as Ee,C as G,I as w,m as f,n as M,p as Ne,P as X,F as J,q as Y,X as Z,s as ee,H as De,v as Le,x as q}from"./index-DyBJn5r4.js";const je={class:"space-y-6"},qe={class:"flex items-center justify-between"},Fe={class:"flex items-center space-x-4"},Pe={class:"text-2xl font-bold text-gray-900"},Te={class:"text-gray-600 mt-1"},$e={key:0,class:"flex items-center space-x-3"},ze={class:"flex items-center space-x-2"},Be={key:0,class:"flex justify-center items-center py-12"},He={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},We={class:"lg:col-span-2 space-y-6"},Qe={class:"bg-white rounded-lg border border-gray-200 p-6"},Ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"md:col-span-2"},Xe={class:"md:col-span-2"},Je={class:"bg-white rounded-lg border border-gray-200 p-6"},Ye={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ze={class:"space-y-4"},el={class:"space-y-4"},ll={class:"mt-6 p-4 bg-gray-50 rounded-lg"},tl={class:"flex items-center justify-between"},al={class:"text-right"},sl={class:"text-sm text-gray-600"},il={class:"bg-white rounded-lg border border-gray-200 p-6"},ol={class:"flex items-center justify-between mb-4"},nl={class:"space-y-4"},dl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},rl={class:"flex items-end space-x-2"},ul={class:"flex-1"},ml={class:"mt-4"},vl={class:"bg-white rounded-lg border border-gray-200 p-6"},cl={class:"flex items-center justify-between mb-4"},yl={class:"space-y-4"},bl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gl={class:"md:col-span-2"},fl={class:"flex items-end"},pl={class:"bg-white rounded-lg border border-gray-200 p-6"},kl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xl={class:"md:col-span-2"},wl={class:"mt-4"},Vl={class:"bg-white rounded-lg border border-gray-200 p-6"},_l={class:"space-y-4"},Cl={key:0,class:"flex items-center justify-end space-x-3"},Al={class:"space-y-6"},Ul={class:"bg-white rounded-lg border border-gray-200 p-6"},Sl={class:"space-y-4"},hl={class:"flex items-center justify-between"},Rl={class:"flex items-center justify-between"},Il={class:"flex items-center justify-between"},Ol={class:"bg-white rounded-lg border border-gray-200 p-6"},Ml={class:"space-y-4"},El={class:"font-medium"},Nl={class:"font-medium"},Dl={class:"font-medium"},Ll={key:0},jl={key:0,class:"bg-white rounded-lg border border-gray-200 p-6"},ql={class:"space-y-3"},Tl={__name:"AuditUniverseDetail",props:{entityId:{type:String,default:null},mode:{type:String,default:"view",validator:i=>["view","edit","new"].includes(i)}},setup(i){const d=i,r=Se(),E=he(),_=O(!1),A=O(!1),b=O(null),t=O({auditable_entity:"",entity_type:"",department:"",location:"",description:"",process_owner:"",inherent_risk_rating:"",inherent_risk_score:1,control_environment_rating:"",control_effectiveness_score:1,residual_risk_rating:"",residual_risk_score:1,risk_factors:[],key_controls:[],audit_frequency:"",last_audit_date:"",last_audit_opinion:"",next_scheduled_audit:"",mandatory_audit:!1,regulatory_reference:"",notes:"",is_active:!0}),x=[{label:"Process",value:"Process"},{label:"Function",value:"Function"},{label:"Department",value:"Department"},{label:"Location",value:"Location"},{label:"System",value:"System"},{label:"Compliance Area",value:"Compliance Area"}],U=[{label:"Finance",value:"Finance"},{label:"IT",value:"IT"},{label:"Operations",value:"Operations"},{label:"HR",value:"HR"},{label:"Sales",value:"Sales"},{label:"Procurement",value:"Procurement"}],le=[{label:"Head Office",value:"Head Office"},{label:"Branch 1",value:"Branch 1"},{label:"Branch 2",value:"Branch 2"},{label:"Warehouse",value:"Warehouse"},{label:"All Locations",value:"All"}],te=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],ae=[{label:"Strong",value:"Strong"},{label:"Adequate",value:"Adequate"},{label:"Weak",value:"Weak"},{label:"Not Assessed",value:"Not Assessed"}],se=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"Strategic",value:"Strategic"},{label:"IT",value:"IT"},{label:"Reputational",value:"Reputational"}],ie=[{label:"Rare",value:"Rare"},{label:"Unlikely",value:"Unlikely"},{label:"Possible",value:"Possible"},{label:"Likely",value:"Likely"},{label:"Almost Certain",value:"Almost Certain"}],oe=[{label:"Insignificant",value:"Insignificant"},{label:"Minor",value:"Minor"},{label:"Moderate",value:"Moderate"},{label:"Major",value:"Major"},{label:"Catastrophic",value:"Catastrophic"}],ne=[{label:"Preventive",value:"Preventive"},{label:"Detective",value:"Detective"},{label:"Corrective",value:"Corrective"}],de=[{label:"Continuous",value:"Continuous"},{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Annually",value:"Annually"}],re=[{label:"Effective",value:"Effective"},{label:"Partially Effective",value:"Partially Effective"},{label:"Ineffective",value:"Ineffective"},{label:"Not Tested",value:"Not Tested"}],ue=[{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"Bi-Annual",value:"Bi-Annual"},{label:"Tri-Annual",value:"Tri-Annual"},{label:"As Needed",value:"As Needed"}],me=[{label:"Satisfactory",value:"Satisfactory"},{label:"Needs Improvement",value:"Needs Improvement"},{label:"Unsatisfactory",value:"Unsatisfactory"}],ve=K(()=>t.value.next_scheduled_audit?new Date(t.value.next_scheduled_audit)<new Date:!1),ce=K(()=>t.value.is_active&&t.value.auditable_entity),F=()=>{r.push("/audit-planning/universe")},N=n=>{n==="edit"?r.push(`/audit-planning/universe/${d.entityId}/edit`):r.push(`/audit-planning/universe/${d.entityId}`)},P=()=>j(this,null,function*(){if(d.mode!=="new"){_.value=!0;try{const n=yield q({url:"frappe.client.get",params:{doctype:"Audit Universe",name:E.params.id}}).fetch();b.value=n,n&&Object.assign(t.value,n)}catch(n){console.error("Error loading entity:",n)}finally{_.value=!1}}}),T=()=>{const n={Critical:25,High:15,Medium:8,Low:3};t.value.inherent_risk_score=n[t.value.inherent_risk_rating]||1;const e={Strong:5,Adequate:3,Weak:1,"Not Assessed":1};t.value.control_effectiveness_score=e[t.value.control_environment_rating]||1,D()},D=()=>{const n=Math.round(t.value.inherent_risk_score/t.value.control_effectiveness_score);t.value.residual_risk_score=n,n>=20?t.value.residual_risk_rating="Critical":n>=12?t.value.residual_risk_rating="High":n>=6?t.value.residual_risk_rating="Medium":t.value.residual_risk_rating="Low"},$=n=>{const e={Rare:1,Unlikely:2,Possible:3,Likely:4,"Almost Certain":5},h={Insignificant:1,Minor:2,Moderate:3,Major:4,Catastrophic:5},R=e[n.likelihood]||1,I=h[n.impact]||1;n.risk_score=R*I},ye=()=>{t.value.risk_factors.push({risk_category:"",risk_description:"",likelihood:"",impact:"",risk_score:1})},be=n=>{t.value.risk_factors.splice(n,1)},ge=()=>{t.value.key_controls.push({control_description:"",control_type:"",control_frequency:"",control_effectiveness:""})},fe=n=>{t.value.key_controls.splice(n,1)},L=n=>({Critical:"danger",High:"danger",Medium:"warning",Low:"success"})[n]||"secondary",pe=n=>({Strong:"success",Adequate:"warning",Weak:"danger","Not Assessed":"secondary"})[n]||"secondary",ke=n=>({Critical:"text-red-600",High:"text-red-600",Medium:"text-yellow-600",Low:"text-green-600"})[n]||"text-gray-600",z=n=>new Date(n).toLocaleDateString(),xe=()=>j(this,null,function*(){A.value=!0;try{if(d.mode==="new"){const n=yield q({url:"frappe.client.insert",params:{doc:Q({doctype:"Audit Universe"},t.value)}}).fetch();n&&n.name?r.push(`/audit-planning/universe/${n.name}`):r.push("/audit-planning/universe")}else{for(const[n,e]of Object.entries(t.value))b.value&&b.value[n]!==e&&(yield q({url:"frappe.client.set_value",params:{doctype:"Audit Universe",name:b.value.name,fieldname:n,value:e}}).fetch());yield P(),r.push(`/audit-planning/universe/${d.entityId}`)}}catch(n){console.error("Error saving entity:",n)}finally{A.value=!1}}),we=()=>{d.mode==="new"?F():N("view")},B=()=>{console.log("Schedule audit for entity:",d.entityId)},Ve=()=>{console.log("View audit history for entity:",d.entityId)},_e=()=>{console.log("Generate report for entity:",d.entityId)};return Re(()=>{P()}),Ie(()=>d.mode,n=>{n==="edit"&&b.value&&Object.assign(t.value,b.value)}),(n,e)=>{var h,R,I;return v(),p("div",je,[l("div",qe,[l("div",Fe,[o(s(g),{variant:"ghost",onClick:F},{default:m(()=>[o(s(Oe),{class:"h-4 w-4 mr-2"}),e[20]||(e[20]=c(" Back to Audit Universe ",-1))]),_:1}),l("div",null,[l("h1",Pe,y(i.mode==="new"?"New Audit Universe Entity":((h=b.value)==null?void 0:h.auditable_entity)||"Audit Universe Entity"),1),l("p",Te,y(i.mode==="view"?"View entity details and risk assessment":i.mode==="edit"?"Edit entity information":"Create new auditable entity"),1)])]),i.mode!=="new"?(v(),p("div",$e,[o(s(C),{variant:L((R=b.value)==null?void 0:R.residual_risk_rating)},{default:m(()=>{var a;return[c(y((a=b.value)==null?void 0:a.residual_risk_rating)+" Risk ",1)]}),_:1},8,["variant"]),o(s(C),{variant:(I=b.value)!=null&&I.is_active?"success":"secondary"},{default:m(()=>{var a;return[c(y((a=b.value)!=null&&a.is_active?"Active":"Inactive"),1)]}),_:1},8,["variant"]),l("div",ze,[i.mode==="view"?(v(),V(s(g),{key:0,variant:"outline",onClick:e[0]||(e[0]=a=>N("edit"))},{default:m(()=>[o(s(Me),{class:"h-4 w-4 mr-2"}),e[21]||(e[21]=c(" Edit ",-1))]),_:1})):k("",!0),i.mode==="edit"?(v(),V(s(g),{key:1,variant:"outline",onClick:e[1]||(e[1]=a=>N("view"))},{default:m(()=>[o(s(Ee),{class:"h-4 w-4 mr-2"}),e[22]||(e[22]=c(" View ",-1))]),_:1})):k("",!0),i.mode==="view"&&ce.value?(v(),V(s(g),{key:2,variant:"outline",onClick:B},{default:m(()=>[o(s(G),{class:"h-4 w-4 mr-2"}),e[23]||(e[23]=c(" Schedule Audit ",-1))]),_:1})):k("",!0)])])):k("",!0)]),_.value?(v(),p("div",Be,[...e[24]||(e[24]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),l("span",{class:"ml-3 text-gray-600"},"Loading...",-1)])])):(v(),p("div",He,[l("div",We,[l("div",Qe,[e[31]||(e[31]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),l("div",Ke,[l("div",Ge,[e[25]||(e[25]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Auditable Entity *",-1)),o(s(w),{modelValue:t.value.auditable_entity,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.auditable_entity=a),readonly:i.mode==="view",placeholder:"e.g., Accounts Payable, IT Security Controls",class:"w-full"},null,8,["modelValue","readonly"])]),l("div",null,[e[26]||(e[26]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Entity Type *",-1)),o(s(f),{modelValue:t.value.entity_type,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.entity_type=a),options:x,disabled:i.mode==="view",placeholder:"Select entity type"},null,8,["modelValue","disabled"])]),l("div",null,[e[27]||(e[27]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Department",-1)),o(s(f),{modelValue:t.value.department,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.department=a),options:U,disabled:i.mode==="view",placeholder:"Select department"},null,8,["modelValue","disabled"])]),l("div",null,[e[28]||(e[28]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),o(s(f),{modelValue:t.value.location,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.location=a),options:le,disabled:i.mode==="view",placeholder:"Select location"},null,8,["modelValue","disabled"])]),l("div",null,[e[29]||(e[29]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Process Owner",-1)),o(s(w),{modelValue:t.value.process_owner,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.process_owner=a),readonly:i.mode==="view",placeholder:"Name of responsible person",class:"w-full"},null,8,["modelValue","readonly"])]),l("div",Xe,[e[30]||(e[30]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),o(s(M),{modelValue:t.value.description,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.description=a),readonly:i.mode==="view",placeholder:"Detailed description of the auditable entity",rows:"3",class:"w-full"},null,8,["modelValue","readonly"])])])]),l("div",Je,[e[39]||(e[39]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Assessment",-1)),l("div",Ye,[l("div",Ze,[e[34]||(e[34]=l("h4",{class:"font-medium text-gray-900"},"Inherent Risk",-1)),l("div",null,[e[32]||(e[32]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Risk Rating",-1)),o(s(f),{modelValue:t.value.inherent_risk_rating,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.inherent_risk_rating=a),options:te,disabled:i.mode==="view",onChange:T},null,8,["modelValue","disabled"])]),l("div",null,[e[33]||(e[33]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Risk Score",-1)),o(s(w),{modelValue:t.value.inherent_risk_score,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.inherent_risk_score=a),modelModifiers:{number:!0},readonly:i.mode==="view",type:"number",min:"1",max:"25",onInput:D},null,8,["modelValue","readonly"])])]),l("div",el,[e[37]||(e[37]=l("h4",{class:"font-medium text-gray-900"},"Control Environment",-1)),l("div",null,[e[35]||(e[35]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Control Rating",-1)),o(s(f),{modelValue:t.value.control_environment_rating,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.control_environment_rating=a),options:ae,disabled:i.mode==="view",onChange:T},null,8,["modelValue","disabled"])]),l("div",null,[e[36]||(e[36]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Effectiveness Score",-1)),o(s(w),{modelValue:t.value.control_effectiveness_score,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.control_effectiveness_score=a),modelModifiers:{number:!0},readonly:i.mode==="view",type:"number",min:"1",max:"5",onInput:D},null,8,["modelValue","readonly"])])])]),l("div",ll,[l("div",tl,[e[38]||(e[38]=l("div",null,[l("h4",{class:"font-medium text-gray-900"},"Residual Risk"),l("p",{class:"text-sm text-gray-600"},"Calculated based on inherent risk and control effectiveness")],-1)),l("div",al,[l("div",{class:Ne(["text-2xl font-bold",ke(t.value.residual_risk_rating)])},y(t.value.residual_risk_rating),3),l("div",sl,"Score: "+y(t.value.residual_risk_score),1)])])])]),l("div",il,[l("div",ol,[e[41]||(e[41]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Risk Factors",-1)),i.mode!=="view"?(v(),V(s(g),{key:0,variant:"outline",size:"sm",onClick:ye},{default:m(()=>[o(s(X),{class:"h-4 w-4 mr-2"}),e[40]||(e[40]=c(" Add Factor ",-1))]),_:1})):k("",!0)]),l("div",nl,[(v(!0),p(J,null,Y(t.value.risk_factors,(a,S)=>(v(),p("div",{key:S,class:"p-4 border border-gray-200 rounded-lg"},[l("div",dl,[l("div",null,[e[42]||(e[42]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),o(s(f),{modelValue:a.risk_category,"onUpdate:modelValue":u=>a.risk_category=u,options:se,disabled:i.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[43]||(e[43]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Likelihood",-1)),o(s(f),{modelValue:a.likelihood,"onUpdate:modelValue":u=>a.likelihood=u,options:ie,disabled:i.mode==="view",size:"sm",onChange:u=>$(a)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),l("div",null,[e[44]||(e[44]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Impact",-1)),o(s(f),{modelValue:a.impact,"onUpdate:modelValue":u=>a.impact=u,options:oe,disabled:i.mode==="view",size:"sm",onChange:u=>$(a)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),l("div",rl,[l("div",ul,[e[45]||(e[45]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Score",-1)),o(s(w),{modelValue:a.risk_score,"onUpdate:modelValue":u=>a.risk_score=u,modelModifiers:{number:!0},readonly:"",size:"sm",class:"text-center font-medium"},null,8,["modelValue","onUpdate:modelValue"])]),i.mode!=="view"?(v(),V(s(g),{key:0,variant:"ghost",size:"sm",onClick:u=>be(S),class:"text-red-600 hover:text-red-700"},{default:m(()=>[o(s(Z),{class:"h-4 w-4"})]),_:1},8,["onClick"])):k("",!0)])]),l("div",ml,[e[46]||(e[46]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),o(s(M),{modelValue:a.risk_description,"onUpdate:modelValue":u=>a.risk_description=u,readonly:i.mode==="view",placeholder:"Describe the risk factor",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue","readonly"])])]))),128))])]),l("div",vl,[l("div",cl,[e[48]||(e[48]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Key Controls",-1)),i.mode!=="view"?(v(),V(s(g),{key:0,variant:"outline",size:"sm",onClick:ge},{default:m(()=>[o(s(X),{class:"h-4 w-4 mr-2"}),e[47]||(e[47]=c(" Add Control ",-1))]),_:1})):k("",!0)]),l("div",yl,[(v(!0),p(J,null,Y(t.value.key_controls,(a,S)=>(v(),p("div",{key:S,class:"p-4 border border-gray-200 rounded-lg"},[l("div",bl,[l("div",gl,[e[49]||(e[49]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Control Description",-1)),o(s(M),{modelValue:a.control_description,"onUpdate:modelValue":u=>a.control_description=u,readonly:i.mode==="view",placeholder:"Describe the control activity",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue","readonly"])]),l("div",null,[e[50]||(e[50]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Control Type",-1)),o(s(f),{modelValue:a.control_type,"onUpdate:modelValue":u=>a.control_type=u,options:ne,disabled:i.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[51]||(e[51]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Frequency",-1)),o(s(f),{modelValue:a.control_frequency,"onUpdate:modelValue":u=>a.control_frequency=u,options:de,disabled:i.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[52]||(e[52]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Effectiveness",-1)),o(s(f),{modelValue:a.control_effectiveness,"onUpdate:modelValue":u=>a.control_effectiveness=u,options:re,disabled:i.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",fl,[i.mode!=="view"?(v(),V(s(g),{key:0,variant:"ghost",size:"sm",onClick:u=>fe(S),class:"text-red-600 hover:text-red-700"},{default:m(()=>[o(s(Z),{class:"h-4 w-4"})]),_:1},8,["onClick"])):k("",!0)])])]))),128))])]),l("div",pl,[e[58]||(e[58]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Audit Information",-1)),l("div",kl,[l("div",null,[e[53]||(e[53]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Frequency",-1)),o(s(f),{modelValue:t.value.audit_frequency,"onUpdate:modelValue":e[12]||(e[12]=a=>t.value.audit_frequency=a),options:ue,disabled:i.mode==="view"},null,8,["modelValue","disabled"])]),l("div",null,[e[54]||(e[54]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Date",-1)),o(s(w),{modelValue:t.value.last_audit_date,"onUpdate:modelValue":e[13]||(e[13]=a=>t.value.last_audit_date=a),readonly:i.mode==="view",type:"date"},null,8,["modelValue","readonly"])]),l("div",null,[e[55]||(e[55]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Opinion",-1)),o(s(f),{modelValue:t.value.last_audit_opinion,"onUpdate:modelValue":e[14]||(e[14]=a=>t.value.last_audit_opinion=a),options:me,disabled:i.mode==="view"},null,8,["modelValue","disabled"])]),l("div",null,[e[56]||(e[56]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Next Scheduled Audit",-1)),o(s(w),{modelValue:t.value.next_scheduled_audit,"onUpdate:modelValue":e[15]||(e[15]=a=>t.value.next_scheduled_audit=a),readonly:i.mode==="view",type:"date"},null,8,["modelValue","readonly"])]),l("div",xl,[e[57]||(e[57]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Regulatory Reference",-1)),o(s(w),{modelValue:t.value.regulatory_reference,"onUpdate:modelValue":e[16]||(e[16]=a=>t.value.regulatory_reference=a),readonly:i.mode==="view",placeholder:"e.g., CBK Prudential Guidelines"},null,8,["modelValue","readonly"])])]),l("div",wl,[o(s(ee),{modelValue:t.value.mandatory_audit,"onUpdate:modelValue":e[17]||(e[17]=a=>t.value.mandatory_audit=a),disabled:i.mode==="view",label:"Mandatory Regulatory Audit"},null,8,["modelValue","disabled"])])]),l("div",Vl,[e[60]||(e[60]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Additional Information",-1)),l("div",_l,[l("div",null,[e[59]||(e[59]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),o(s(M),{modelValue:t.value.notes,"onUpdate:modelValue":e[18]||(e[18]=a=>t.value.notes=a),readonly:i.mode==="view",placeholder:"Additional notes and comments",rows:"3"},null,8,["modelValue","readonly"])]),l("div",null,[o(s(ee),{modelValue:t.value.is_active,"onUpdate:modelValue":e[19]||(e[19]=a=>t.value.is_active=a),disabled:i.mode==="view",label:"Entity is Active"},null,8,["modelValue","disabled"])])])]),i.mode!=="view"?(v(),p("div",Cl,[o(s(g),{variant:"outline",onClick:we},{default:m(()=>[...e[61]||(e[61]=[c(" Cancel ",-1)])]),_:1}),o(s(g),{onClick:xe,loading:A.value},{default:m(()=>[c(y(i.mode==="new"?"Create Entity":"Save Changes"),1)]),_:1},8,["loading"])])):k("",!0)]),l("div",Al,[l("div",Ul,[e[65]||(e[65]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Summary",-1)),l("div",Sl,[l("div",hl,[e[62]||(e[62]=l("span",{class:"text-sm text-gray-600"},"Inherent Risk:",-1)),o(s(C),{variant:L(t.value.inherent_risk_rating)},{default:m(()=>[c(y(t.value.inherent_risk_rating)+" ("+y(t.value.inherent_risk_score)+") ",1)]),_:1},8,["variant"])]),l("div",Rl,[e[63]||(e[63]=l("span",{class:"text-sm text-gray-600"},"Control Effectiveness:",-1)),o(s(C),{variant:pe(t.value.control_environment_rating)},{default:m(()=>[c(y(t.value.control_environment_rating)+" ("+y(t.value.control_effectiveness_score)+") ",1)]),_:1},8,["variant"])]),l("div",Il,[e[64]||(e[64]=l("span",{class:"text-sm text-gray-600"},"Residual Risk:",-1)),o(s(C),{variant:L(t.value.residual_risk_rating)},{default:m(()=>[c(y(t.value.residual_risk_rating)+" ("+y(t.value.residual_risk_score)+") ",1)]),_:1},8,["variant"])])])]),l("div",Ol,[e[70]||(e[70]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Audit Schedule",-1)),l("div",Ml,[l("div",null,[e[66]||(e[66]=l("span",{class:"text-sm text-gray-600"},"Frequency:",-1)),l("p",El,y(t.value.audit_frequency||"Not set"),1)]),l("div",null,[e[67]||(e[67]=l("span",{class:"text-sm text-gray-600"},"Last Audit:",-1)),l("p",Nl,y(t.value.last_audit_date?z(t.value.last_audit_date):"Never"),1)]),l("div",null,[e[68]||(e[68]=l("span",{class:"text-sm text-gray-600"},"Next Scheduled:",-1)),l("p",Dl,y(t.value.next_scheduled_audit?z(t.value.next_scheduled_audit):"Not scheduled"),1)]),ve.value?(v(),p("div",Ll,[o(s(C),{variant:"danger"},{default:m(()=>[...e[69]||(e[69]=[c("Overdue",-1)])]),_:1})])):k("",!0)])]),i.mode==="view"?(v(),p("div",jl,[e[74]||(e[74]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),l("div",ql,[o(s(g),{variant:"outline",class:"w-full justify-start",onClick:B},{default:m(()=>[o(s(G),{class:"h-4 w-4 mr-2"}),e[71]||(e[71]=c(" Schedule Audit ",-1))]),_:1}),o(s(g),{variant:"outline",class:"w-full justify-start",onClick:Ve},{default:m(()=>[o(s(De),{class:"h-4 w-4 mr-2"}),e[72]||(e[72]=c(" View Audit History ",-1))]),_:1}),o(s(g),{variant:"outline",class:"w-full justify-start",onClick:_e},{default:m(()=>[o(s(Le),{class:"h-4 w-4 mr-2"}),e[73]||(e[73]=c(" Generate Report ",-1))]),_:1})])])):k("",!0)])]))])}}};export{Tl as default};
//# sourceMappingURL=AuditUniverseDetail-Dbav6fUD.js.map
