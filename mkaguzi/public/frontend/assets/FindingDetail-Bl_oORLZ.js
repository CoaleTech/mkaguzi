var O=Object.defineProperty,q=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var S=(c,d,l)=>d in c?O(c,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[d]=l,E=(c,d)=>{for(var l in d||(d={}))H.call(d,l)&&S(c,l,d[l]);if(F)for(var l of F(d))Q.call(d,l)&&S(c,l,d[l]);return c},R=(c,d)=>q(c,U(d));var B=(c,d,l)=>new Promise((i,x)=>{var k=v=>{try{f(l.next(v))}catch(_){x(_)}},C=v=>{try{f(l.throw(v))}catch(_){x(_)}},f=v=>v.done?i(v.value):Promise.resolve(v.value).then(k,C);f((l=l.apply(c,d)).next())});import{a as Y,r as V,o as G,b as u,d as g,e as t,t as a,g as n,h as m,i as p,j as o,Y as J,_ as y,S as K,a7 as W,k as A,F as h,q as w,z as X,v as Z,P as I,C as tt,a9 as st,aa as et}from"./index-DzpD5d1M.js";const it={class:"space-y-6"},at={class:"flex items-center justify-between"},nt={class:"text-2xl font-bold text-gray-900"},ot={class:"text-gray-600 mt-1"},lt={class:"flex items-center space-x-3"},rt={key:0,class:"flex justify-center items-center py-12"},dt={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ct={class:"lg:col-span-2 space-y-6"},ut={class:"bg-white rounded-lg border border-gray-200 p-6"},gt={class:"grid grid-cols-2 gap-4"},mt={class:"font-medium"},pt={class:"font-medium"},vt={class:"font-medium"},yt={class:"font-medium"},xt={class:"bg-white rounded-lg border border-gray-200 p-6"},ft={class:"prose prose-sm max-w-none"},_t={class:"bg-white rounded-lg border border-gray-200 p-6"},bt={class:"prose prose-sm max-w-none"},ht={class:"bg-white rounded-lg border border-gray-200 p-6"},wt={class:"space-y-4"},kt={class:"text-gray-700"},Ct={class:"text-gray-700"},At={class:"text-gray-700"},Dt={class:"bg-white rounded-lg border border-gray-200 p-6"},Ft={class:"space-y-2"},St={class:"text-gray-700"},Et={class:"bg-white rounded-lg border border-gray-200 p-6"},Rt={class:"space-y-4"},Bt={class:"flex items-start justify-between"},Vt={class:"flex-1"},It={class:"font-medium text-gray-900"},Pt={class:"text-gray-600 mt-1"},jt={class:"flex items-center space-x-4 mt-2"},Mt={class:"text-sm text-gray-500"},Lt={class:"text-sm text-gray-500"},Nt={class:"space-y-6"},Tt={class:"bg-white rounded-lg border border-gray-200 p-6"},$t={class:"space-y-3"},zt={class:"flex items-center"},Ot={class:"font-medium text-sm"},qt={class:"text-xs text-gray-600"},Ut={class:"bg-white rounded-lg border border-gray-200 p-6"},Ht={class:"space-y-4"},Qt={class:"ml-4"},Yt={class:"text-sm font-medium text-gray-900"},Gt={class:"text-xs text-gray-600"},Jt={class:"bg-white rounded-lg border border-gray-200 p-6"},Kt={class:"space-y-2"},Wt={key:2,class:"text-center py-12"},ts={__name:"FindingDetail",setup(c){const d=Y(),l=V(!0),i=V(null),x=()=>B(this,null,function*(){l.value=!0;try{const e=yield et({url:"frappe.client.get",params:{doctype:"Audit Finding",name:d.params.id}}).fetch();e&&(i.value=R(E({},e),{title:e.finding_title,description:e.finding_description,severity:e.risk_rating,status:e.finding_status,reportedBy:e.responsible_person,reportedDate:e.creation,engagement:e.engagement_reference,category:e.finding_category,rootCause:e.root_cause_analysis,impact:{financial:e.financial_impact,operational:e.operational_impact,compliance:e.compliance_impact},recommendations:e.recommendations?e.recommendations.split(`
`).filter(s=>s.trim()).map((s,b)=>({id:b+1,description:s.trim()})):[],correctiveActions:[],evidence:e.finding_evidence||[],timeline:[]}))}catch(e){console.error("Failed to load finding:",e)}finally{l.value=!1}}),k=e=>({High:"danger",Medium:"warning",Low:"success"})[e]||"secondary",C=e=>({Open:"danger","In Progress":"warning",Resolved:"success",Closed:"secondary"})[e]||"secondary",f=e=>({Pending:"secondary","In Progress":"warning",Completed:"success",Overdue:"danger"})[e]||"secondary",v=e=>new Date(e).toLocaleDateString(),_=()=>{},P=()=>{},j=e=>{},M=e=>{},L=()=>{},N=()=>{},T=()=>{},$=()=>{};return G(()=>{x()}),(e,s)=>{var b,D;return g(),u("div",it,[t("div",at,[t("div",null,[t("h1",nt,a(((b=i.value)==null?void 0:b.title)||"Finding Details"),1),t("p",ot,a(((D=i.value)==null?void 0:D.description)||"Loading finding details..."),1)]),t("div",lt,[n(o(y),{variant:"outline",onClick:_},{default:m(()=>[n(o(J),{class:"h-4 w-4 mr-2"}),s[0]||(s[0]=p(" Export ",-1))]),_:1}),n(o(y),{onClick:P},{default:m(()=>[n(o(K),{class:"h-4 w-4 mr-2"}),s[1]||(s[1]=p(" Edit ",-1))]),_:1})])]),l.value?(g(),u("div",rt,[n(o(W),{class:"h-8 w-8"})])):i.value?(g(),u("div",dt,[t("div",ct,[t("div",ut,[s[8]||(s[8]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Details",-1)),t("div",gt,[t("div",null,[s[2]||(s[2]=t("p",{class:"text-sm text-gray-600"},"Severity",-1)),n(o(A),{variant:k(i.value.severity),class:"mt-1"},{default:m(()=>[p(a(i.value.severity),1)]),_:1},8,["variant"])]),t("div",null,[s[3]||(s[3]=t("p",{class:"text-sm text-gray-600"},"Status",-1)),n(o(A),{variant:C(i.value.status),class:"mt-1"},{default:m(()=>[p(a(i.value.status),1)]),_:1},8,["variant"])]),t("div",null,[s[4]||(s[4]=t("p",{class:"text-sm text-gray-600"},"Reported By",-1)),t("p",mt,a(i.value.reportedBy),1)]),t("div",null,[s[5]||(s[5]=t("p",{class:"text-sm text-gray-600"},"Reported Date",-1)),t("p",pt,a(v(i.value.reportedDate)),1)]),t("div",null,[s[6]||(s[6]=t("p",{class:"text-sm text-gray-600"},"Engagement",-1)),t("p",vt,a(i.value.engagement),1)]),t("div",null,[s[7]||(s[7]=t("p",{class:"text-sm text-gray-600"},"Category",-1)),t("p",yt,a(i.value.category),1)])])]),t("div",xt,[s[9]||(s[9]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Description",-1)),t("div",ft,[t("p",null,a(i.value.description),1)])]),t("div",_t,[s[10]||(s[10]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Root Cause Analysis",-1)),t("div",bt,[t("p",null,a(i.value.rootCause),1)])]),t("div",ht,[s[14]||(s[14]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Impact Assessment",-1)),t("div",wt,[t("div",null,[s[11]||(s[11]=t("h3",{class:"font-medium text-gray-900"},"Financial Impact",-1)),t("p",kt,a(i.value.impact.financial),1)]),t("div",null,[s[12]||(s[12]=t("h3",{class:"font-medium text-gray-900"},"Operational Impact",-1)),t("p",Ct,a(i.value.impact.operational),1)]),t("div",null,[s[13]||(s[13]=t("h3",{class:"font-medium text-gray-900"},"Compliance Impact",-1)),t("p",At,a(i.value.impact.compliance),1)])])]),t("div",Dt,[s[15]||(s[15]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Recommendations",-1)),t("ul",Ft,[(g(!0),u(h,null,w(i.value.recommendations,r=>(g(),u("li",{key:r.id,class:"flex items-start"},[n(o(X),{class:"h-5 w-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),t("span",St,a(r.description),1)]))),128))])]),t("div",Et,[s[17]||(s[17]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Corrective Actions",-1)),t("div",Rt,[(g(!0),u(h,null,w(i.value.correctiveActions,r=>(g(),u("div",{key:r.id,class:"border border-gray-200 rounded-lg p-4"},[t("div",Bt,[t("div",Vt,[t("h3",It,a(r.title),1),t("p",Pt,a(r.description),1),t("div",jt,[n(o(A),{variant:f(r.status)},{default:m(()=>[p(a(r.status),1)]),_:2},1032,["variant"]),t("span",Mt," Due: "+a(v(r.dueDate)),1),t("span",Lt," Assigned to: "+a(r.assignedTo),1)])]),n(o(y),{variant:"ghost",size:"sm",onClick:z=>j()},{default:m(()=>[...s[16]||(s[16]=[p(" Update ",-1)])]),_:1},8,["onClick"])])]))),128))])])]),t("div",Nt,[t("div",Tt,[s[20]||(s[20]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Evidence",-1)),t("div",$t,[(g(!0),u(h,null,w(i.value.evidence,r=>(g(),u("div",{key:r.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",zt,[n(o(Z),{class:"h-5 w-5 text-gray-400 mr-3"}),t("div",null,[t("p",Ot,a(r.name),1),t("p",qt,a(r.type),1)])]),n(o(y),{variant:"ghost",size:"sm",onClick:z=>M()},{default:m(()=>[...s[18]||(s[18]=[p(" View ",-1)])]),_:1},8,["onClick"])]))),128))]),n(o(y),{variant:"outline",block:"",class:"mt-4",onClick:L},{default:m(()=>[n(o(I),{class:"h-4 w-4 mr-2"}),s[19]||(s[19]=p(" Add Evidence ",-1))]),_:1})]),t("div",Ut,[s[22]||(s[22]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),t("div",Ht,[(g(!0),u(h,null,w(i.value.timeline,r=>(g(),u("div",{key:r.id,class:"flex"},[s[21]||(s[21]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-2 h-2 bg-blue-600 rounded-full mt-2"})],-1)),t("div",Qt,[t("p",Yt,a(r.title),1),t("p",Gt,a(v(r.date)),1)])]))),128))])]),t("div",Jt,[s[26]||(s[26]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),t("div",Kt,[n(o(y),{variant:"outline",block:"",onClick:N},{default:m(()=>[n(o(I),{class:"h-4 w-4 mr-2"}),s[23]||(s[23]=p(" Add Action ",-1))]),_:1}),n(o(y),{variant:"outline",block:"",onClick:T},{default:m(()=>[n(o(tt),{class:"h-4 w-4 mr-2"}),s[24]||(s[24]=p(" Schedule Follow-up ",-1))]),_:1}),n(o(y),{variant:"outline",block:"",onClick:$},{default:m(()=>[n(o(st),{class:"h-4 w-4 mr-2"}),s[25]||(s[25]=p(" Notify Management ",-1))]),_:1})])])])])):(g(),u("div",Wt,[s[28]||(s[28]=t("p",{class:"text-gray-600"},"Failed to load finding details.",-1)),n(o(y),{onClick:x,class:"mt-4"},{default:m(()=>[...s[27]||(s[27]=[p("Retry",-1)])]),_:1})]))])}}};export{ts as default};
//# sourceMappingURL=FindingDetail-Bl_oORLZ.js.map
