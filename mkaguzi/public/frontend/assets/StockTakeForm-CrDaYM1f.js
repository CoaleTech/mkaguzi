var q=(M,h,k)=>new Promise((D,V)=>{var w=_=>{try{b(k.next(_))}catch(p){V(p)}},g=_=>{try{b(k.throw(_))}catch(p){V(p)}},b=_=>_.done?D(_.value):Promise.resolve(_.value).then(w,g);b((k=k.apply(M,h)).next())});import{g as I,a as m,b as c,D as pe}from"./index-qIC3Tfxg.js";import{ap as me,ab as ve,r as C,j as x,Q as ye,l as f,p as v,q as t,s as n,u,v as o,A as r,z as y,H as E,F as T,x as U,B as P,y as _e}from"./vue-DciwFjI_.js";import{aL as fe,ad as F,a0 as ge,U as xe,N as he,a7 as ke,K as be}from"./icons-CtLkBOsu.js";import"./charts-DlPBe6v3.js";import"./utils-Bcd7wHeW.js";const Ve={class:"p-6"},we={class:"flex items-center justify-between mb-6"},Se={class:"flex items-center gap-4"},Ce={class:"text-2xl font-bold text-gray-900"},De={class:"text-gray-500 mt-1"},qe={class:"flex items-center gap-2"},Ie={class:"flex items-center gap-2"},Te={class:"max-w-6xl"},Ue={class:"space-y-6"},Pe={class:"bg-white rounded-lg border p-6"},Re={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},Ee={class:"text-sm text-gray-600 bg-yellow-50 p-2 rounded"},Me={class:"text-sm text-gray-600 bg-blue-50 p-2 rounded"},Qe={class:"bg-white rounded-lg border p-6"},$e={class:"flex items-center justify-between mb-4"},Ne={class:"flex items-center gap-2"},Fe={class:"flex items-center gap-2"},Oe={class:"flex items-center gap-2"},We={class:"flex items-center gap-2"},Be={class:"bg-white rounded-lg border p-6"},je={class:"flex items-center justify-between mb-4"},ze={class:"text-lg font-semibold text-gray-900"},Le={class:"flex items-center gap-4 text-sm"},He={class:"text-gray-500"},Ke={class:"text-yellow-600"},Ge={class:"text-gray-500"},Je={class:"text-green-600"},Xe={class:"text-gray-500"},Ye={class:"text-red-600"},Ze={class:"overflow-x-auto"},et={class:"min-w-full divide-y divide-gray-200"},tt={class:"bg-white divide-y divide-gray-200"},at={class:"px-3 py-3 text-sm text-gray-500"},st={class:"px-3 py-3"},lt={class:"px-3 py-3"},ot={class:"px-3 py-3 text-right"},nt={class:"px-3 py-3 text-right"},it={class:"px-3 py-3 text-right"},rt={class:"px-3 py-3 text-right"},dt={class:"px-3 py-3 text-right"},ut={class:"px-3 py-3"},ct={class:"px-3 py-3"},pt={class:"px-3 py-3"},mt={class:"flex items-center gap-1"},vt={class:"px-3 py-3"},yt={key:0},_t={class:"mt-4 pt-4 border-t bg-gray-50 -mx-6 -mb-6 px-6 py-4 rounded-b-lg"},ft={class:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm"},gt={class:"font-semibold ml-2"},xt={class:"font-semibold ml-2"},ht={class:"font-semibold ml-2"},kt={class:"font-semibold ml-2 text-red-600"},bt={class:"bg-white rounded-lg border p-6"},Vt={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},wt={class:"flex items-center gap-2"},St={class:"space-y-4"},Ct={key:0,class:"border rounded p-3"},Dt={class:"overflow-x-auto text-xs"},qt={class:"min-w-full"},It={class:"bg-gray-100"},Mt={__name:"StockTakeForm",setup(M){const h=me(),k=ve(),D=C(!1),V=C([]),w=C(!1),g=C([]),b=C([]),_=C(""),p=x(()=>h.params.id&&h.params.id!=="new"),l=C({stock_take_type:"Daily Stock Take",audit_date:new Date().toISOString().split("T")[0],warehouse:"",branch:"",status:"Draft",stock_take_items:[],notes:""}),O=x(()=>{if(!l.value.audit_date)return"";const a=new Date(l.value.audit_date),e={"Sales Return":0,"Daily Stock Take":0,"Weekly Stock Take":2,"Monthly Stock Take":5}[l.value.stock_take_type]||0;return a.setDate(a.getDate()+e),a.toISOString().split("T")[0]}),W=x(()=>{if(!l.value.audit_date)return"";const a=new Date(l.value.audit_date);return a.setDate(a.getDate()+3),a.toISOString().split("T")[0]}),B=x(()=>l.value.stock_take_items.reduce((a,e)=>a+(e.system_quantity||0),0)),j=x(()=>l.value.stock_take_items.reduce((a,e)=>a+(e.physical_quantity||0),0)),Q=x(()=>l.value.stock_take_items.reduce((a,e)=>a+(e.variance_quantity||0),0)),z=x(()=>l.value.stock_take_items.reduce((a,e)=>a+Math.abs(e.variance_value||0),0)),L=x(()=>l.value.stock_take_items.filter(a=>!a.verification_status||a.verification_status==="Pending").length),H=x(()=>l.value.stock_take_items.filter(a=>a.verification_status==="Verified-Match").length),K=x(()=>l.value.stock_take_items.filter(a=>a.verification_status==="Verified-Discrepancy").length);ye(()=>q(this,null,function*(){yield G(),p.value&&(yield J())}));function G(){return q(this,null,function*(){try{const a=yield I("frappe.client.get_list",{doctype:"Warehouse Master",filters:{is_active:1},fields:["name","warehouse_code","warehouse_name","branch"],limit_page_length:0});V.value=a.map(e=>({label:`${e.warehouse_code} - ${e.warehouse_name}`,value:e.name,branch:e.branch}))}catch(a){console.error("Error loading warehouses:",a),V.value=[]}})}function J(){return q(this,null,function*(){try{const a=yield I("frappe.client.get",{doctype:"Stock Take Audit",name:h.params.id});l.value={stock_take_type:a.stock_take_type||"Daily Stock Take",audit_date:a.audit_date||"",warehouse:a.warehouse||"",branch:a.branch||"",status:a.status||"Draft",stock_take_items:a.stock_take_items||[],notes:a.notes||""}}catch(a){console.error("Error loading audit:",a)}})}function X(){const a=V.value.find(e=>e.value===l.value.warehouse);a&&(l.value.branch=a.branch)}function Y(){l.value.stock_take_items.push({item_code:"",item_description:"",system_quantity:0,unit_value:0,physical_quantity:null,pending_dispatch:0,variance_quantity:0,variance_value:0,reason_provided:"",verification_status:"Pending",resolution_type:""})}function Z(a){l.value.stock_take_items.splice(a,1)}function $(a){const e=l.value.stock_take_items[a];e.physical_quantity!==null&&e.physical_quantity!==void 0&&(e.variance_quantity=(e.system_quantity||0)-(e.physical_quantity||0)-(e.pending_dispatch||0),e.variance_value=e.variance_quantity*(e.unit_value||0),e.variance_quantity===0?e.verification_status="Verified-Match":e.verification_status="Verified-Discrepancy")}function ee(a,e){const s=l.value.stock_take_items[a];s.physical_quantity=s.system_quantity,s.pending_dispatch=0,s.variance_quantity=0,s.variance_value=0,s.verification_status="Verified-Match"}function te(a){return a.verification_status==="Verified-Match"?"bg-green-50":a.verification_status==="Verified-Discrepancy"?"bg-red-50":""}function ae(a){switch(a){case"Verified-Match":return"bg-green-100 text-green-800";case"Verified-Discrepancy":return"bg-red-100 text-red-800";case"Resolved":return"bg-blue-100 text-blue-800";default:return"bg-yellow-100 text-yellow-800"}}function se(a){const e=a.target.files[0];if(!e)return;const s=new FileReader;s.onload=d=>{_.value=d.target.result,le(_.value)},s.readAsText(e)}function le(a){const e=a.split(`
`).filter(s=>s.trim());e.length<2||(b.value=e[0].split(",").map(s=>s.trim().replace(/"/g,"")),g.value=e.slice(1).map(s=>{const d=s.split(",").map(S=>S.trim().replace(/"/g,"")),i={};return b.value.forEach((S,A)=>{i[S]=d[A]||""}),i}))}function oe(){const s=[["Item Code","Description","System Qty","Item Value","Physical Qty","Pending Dispatch","Reason Provided"],...[["ITEM001","Sample Item 1","100","150.00","95","3","Items in transit"],["ITEM002","Sample Item 2","50","200.00","52","0",""],["ITEM003","Sample Item 3","75","75.50","70","2","Damaged goods"]]].map(A=>A.map(ce=>`"${ce}"`).join(",")).join(`
`),d=new Blob([s],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),S=URL.createObjectURL(d);i.setAttribute("href",S),i.setAttribute("download","stock_take_template.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}function ne(){g.value.length!==0&&(g.value.forEach(a=>{const e={item_code:a["Item Code"]||"",item_description:a.Description||"",system_quantity:Number.parseFloat(a["System Qty"])||0,unit_value:Number.parseFloat(a["Item Value"])||0,physical_quantity:Number.parseFloat(a["Physical Qty"])||null,pending_dispatch:Number.parseFloat(a["Pending Dispatch"])||0,reason_provided:a["Reason Provided"]||"",variance_quantity:0,variance_value:0,verification_status:"Pending",resolution_type:""};e.physical_quantity!==null&&e.physical_quantity!==void 0&&(e.variance_quantity=(e.system_quantity||0)-(e.physical_quantity||0)-(e.pending_dispatch||0),e.variance_value=e.variance_quantity*(e.unit_value||0),e.variance_quantity===0?e.verification_status="Verified-Match":e.verification_status="Verified-Discrepancy"),l.value.stock_take_items.push(e)}),w.value=!1,g.value=[],b.value=[],_.value="")}function ie(a){return a==null?"KES 0":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(a)}function N(){return q(this,null,function*(){if(!l.value.audit_date){alert("Stock take date is required");return}if(!l.value.warehouse){alert("Warehouse is required");return}D.value=!0;try{const a={doctype:"Stock Take Audit",stock_take_type:l.value.stock_take_type,audit_date:l.value.audit_date,warehouse:l.value.warehouse,branch:l.value.branch,notes:l.value.notes,stock_take_items:l.value.stock_take_items.map(e=>({item_code:e.item_code,item_description:e.item_description,system_quantity:e.system_quantity,physical_quantity:e.physical_quantity,unit_value:e.unit_value,pending_dispatch:e.pending_dispatch,variance_quantity:e.variance_quantity,variance_value:e.variance_value,reason_provided:e.reason_provided,verification_status:e.verification_status,resolution_type:e.resolution_type}))};if(p.value)yield I("frappe.client.set_value",{doctype:"Stock Take Audit",name:h.params.id,fieldname:a}),k.push(`/inventory-audit/stock-take/${h.params.id}`);else{const e=yield I("frappe.client.insert",{doc:a});k.push(`/inventory-audit/stock-take/${e.name}`)}}catch(a){console.error("Error saving audit:",a),alert("Error saving stock take: "+a.message)}finally{D.value=!1}})}function R(){p.value?k.push(`/inventory-audit/stock-take/${h.params.id}`):k.push("/inventory-audit/stock-take")}const re=[{label:"Sales Return",value:"Sales Return"},{label:"Daily Stock Take",value:"Daily Stock Take"},{label:"Weekly Stock Take",value:"Weekly Stock Take"},{label:"Monthly Stock Take",value:"Monthly Stock Take"}],de=[{label:"Draft",value:"Draft"},{label:"Physical Count Submitted",value:"Physical Count Submitted"},{label:"Analyst Reviewed",value:"Analyst Reviewed"},{label:"HOD Approved",value:"HOD Approved"},{label:"Under Investigation",value:"Under Investigation"}],ue=[{label:"Select Resolution...",value:""},{label:"Stock Amendment",value:"Stock Amendment"},{label:"Charge Staff",value:"Charge Staff"},{label:"Write-off",value:"Write-off"},{label:"Under Investigation",value:"Under Investigation"}];return(a,e)=>(v(),f("div",Ve,[t("div",we,[t("div",Se,[n(o(m),{variant:"ghost",onClick:R},{default:u(()=>[n(o(fe),{class:"w-5 h-5"})]),_:1}),t("div",null,[t("h1",Ce,r(p.value?"Edit Stock Take":"New Stock Take"),1),t("p",De,r(p.value?`Editing ${o(h).params.id}`:"Stock take for physical verification"),1)])]),t("div",qe,[n(o(m),{variant:"outline",onClick:R},{default:u(()=>[...e[8]||(e[8]=[y("Cancel",-1)])]),_:1}),n(o(m),{variant:"solid",onClick:N,loading:D.value},{default:u(()=>[t("div",Ie,[n(o(F),{class:"w-4 h-4"}),t("span",null,r(p.value?"Save Changes":"Create Stock Take"),1)])]),_:1},8,["loading"])])]),t("div",Te,[t("div",Ue,[t("div",Pe,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Stock Take Information",-1)),t("div",Re,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Stock Take Type "),t("span",{class:"text-red-500"},"*")],-1)),n(o(c),{type:"select",modelValue:l.value.stock_take_type,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.stock_take_type=s),options:re,disabled:p.value},null,8,["modelValue","disabled"])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Stock Take Date "),t("span",{class:"text-red-500"},"*")],-1)),n(o(c),{type:"date",modelValue:l.value.audit_date,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.audit_date=s)},null,8,["modelValue"])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Warehouse "),t("span",{class:"text-red-500"},"*")],-1)),n(o(c),{type:"select",modelValue:l.value.warehouse,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.warehouse=s),options:V.value,placeholder:"Select warehouse",onChange:X},null,8,["modelValue","options"])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),n(o(c),{type:"select",modelValue:l.value.status,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.status=s),options:de,disabled:!0},null,8,["modelValue"])])]),t("div",Ae,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Deadline",-1)),t("div",Ee,[y(r(O.value||"Deadline based on stock take type")+" ",1),e[13]||(e[13]=t("span",{class:"text-yellow-700 ml-2"},"(Resolution required)",-1))])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Investigation Deadline",-1)),t("div",Me,[y(r(W.value||"3 days from stock take date")+" ",1),e[15]||(e[15]=t("span",{class:"text-blue-700 ml-2"},"(For items under investigation)",-1))])])])]),t("div",Qe,[t("div",$e,[e[21]||(e[21]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Import Stock Items",-1)),t("div",Ne,[n(o(m),{variant:"outline",size:"sm",onClick:oe},{default:u(()=>[t("div",Fe,[n(o(ge),{class:"w-4 h-4"}),e[18]||(e[18]=t("span",null,"Download Template",-1))])]),_:1}),n(o(m),{variant:"outline",size:"sm",onClick:e[4]||(e[4]=s=>w.value=!0)},{default:u(()=>[t("div",Oe,[n(o(xe),{class:"w-4 h-4"}),e[19]||(e[19]=t("span",null,"Import from CSV",-1))])]),_:1}),n(o(m),{variant:"outline",size:"sm",onClick:Y},{default:u(()=>[t("div",We,[n(o(he),{class:"w-4 h-4"}),e[20]||(e[20]=t("span",null,"Add Item Manually",-1))])]),_:1})])]),e[22]||(e[22]=t("div",{class:"text-sm text-gray-500 mb-4"}," Import stock items from Business Central CSV export. Download the template to see the required format. Expected columns: Item Code, Description, System Qty, Item Value, Physical Qty, Pending Dispatch, Reason Provided ",-1))]),t("div",Be,[t("div",je,[t("h3",ze,"Stock Take Items ("+r(l.value.stock_take_items.length)+")",1),t("div",Le,[t("span",He,[e[23]||(e[23]=y("Pending: ",-1)),t("strong",Ke,r(L.value),1)]),t("span",Ge,[e[24]||(e[24]=y("Verified: ",-1)),t("strong",Je,r(H.value),1)]),t("span",Xe,[e[25]||(e[25]=y("Discrepancy: ",-1)),t("strong",Ye,r(K.value),1)])])]),t("div",Ze,[t("table",et,[e[27]||(e[27]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"#"),t("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Item Code"),t("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),t("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"System Qty"),t("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Item Value"),t("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Physical Qty"),t("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Pending Dispatch"),t("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Variance"),t("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Reason Provided"),t("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Proposed Resolution"),t("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Action"),t("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status")])],-1)),t("tbody",tt,[(v(!0),f(T,null,U(l.value.stock_take_items,(s,d)=>(v(),f("tr",{key:d,class:P([te(s),"hover:bg-gray-50"])},[t("td",at,r(d+1),1),t("td",st,[n(o(c),{type:"text",modelValue:s.item_code,"onUpdate:modelValue":i=>s.item_code=i,placeholder:"Item code",class:"w-32"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",lt,[n(o(c),{type:"text",modelValue:s.item_description,"onUpdate:modelValue":i=>s.item_description=i,placeholder:"Description",class:"w-48"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",ot,[n(o(c),{type:"number",modelValue:s.system_quantity,"onUpdate:modelValue":i=>s.system_quantity=i,placeholder:"0",class:"w-20 text-right",disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),t("td",nt,[n(o(c),{type:"number",modelValue:s.unit_value,"onUpdate:modelValue":i=>s.unit_value=i,placeholder:"0.00",class:"w-20 text-right",step:"0.01"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",it,[n(o(c),{type:"number",modelValue:s.physical_quantity,"onUpdate:modelValue":i=>s.physical_quantity=i,placeholder:"Count",class:"w-20 text-right",onChange:i=>$(d)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),t("td",rt,[n(o(c),{type:"number",modelValue:s.pending_dispatch,"onUpdate:modelValue":i=>s.pending_dispatch=i,placeholder:"0",class:"w-20 text-right",onChange:i=>$(d)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),t("td",dt,[t("span",{class:P(s.variance_quantity!==0?"text-red-600 font-medium":"text-green-600")},r(s.variance_quantity||0),3)]),t("td",ut,[n(o(c),{type:"text",modelValue:s.reason_provided,"onUpdate:modelValue":i=>s.reason_provided=i,placeholder:"Reason for variance",class:"w-40"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",ct,[n(o(c),{type:"select",modelValue:s.resolution_type,"onUpdate:modelValue":i=>s.resolution_type=i,options:ue,class:"w-36",disabled:s.verification_status!=="Verified-Discrepancy"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),t("td",pt,[t("div",mt,[!s.physical_quantity&&s.physical_quantity!==0?(v(),_e(o(m),{key:0,variant:"ghost",size:"sm",onClick:i=>ee(d),title:"Mark as Match (Physical = System)"},{default:u(()=>[n(o(ke),{class:"w-4 h-4 text-green-600"})]),_:1},8,["onClick"])):E("",!0),n(o(m),{variant:"ghost",size:"sm",onClick:i=>Z(d),title:"Remove"},{default:u(()=>[n(o(be),{class:"w-4 h-4 text-red-600"})]),_:1},8,["onClick"])])]),t("td",vt,[t("span",{class:P([ae(s.verification_status),"px-2 py-1 text-xs rounded-full"])},r(s.verification_status||"Pending"),3)])],2))),128)),l.value.stock_take_items.length===0?(v(),f("tr",yt,[...e[26]||(e[26]=[t("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"}," No stock take items. Import from CSV or add items manually. ",-1)])])):E("",!0)])])]),t("div",_t,[t("div",ft,[t("div",null,[e[28]||(e[28]=t("span",{class:"text-gray-500"},"Total Items:",-1)),t("span",gt,r(l.value.stock_take_items.length),1)]),t("div",null,[e[29]||(e[29]=t("span",{class:"text-gray-500"},"System Qty:",-1)),t("span",xt,r(B.value),1)]),t("div",null,[e[30]||(e[30]=t("span",{class:"text-gray-500"},"Physical Qty:",-1)),t("span",ht,r(j.value),1)]),t("div",null,[e[31]||(e[31]=t("span",{class:"text-gray-500"},"Total Variance:",-1)),t("span",{class:P(["font-semibold ml-2",Q.value!==0?"text-red-600":"text-green-600"])},r(Q.value),3)]),t("div",null,[e[32]||(e[32]=t("span",{class:"text-gray-500"},"Variance Value:",-1)),t("span",kt,r(ie(z.value)),1)])])])]),t("div",bt,[e[33]||(e[33]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),n(o(c),{type:"textarea",modelValue:l.value.notes,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.notes=s),placeholder:"Additional notes or observations from the stock take...",rows:4},null,8,["modelValue"])])]),t("div",Vt,[n(o(m),{variant:"outline",onClick:R},{default:u(()=>[...e[34]||(e[34]=[y("Cancel",-1)])]),_:1}),n(o(m),{variant:"solid",onClick:N,loading:D.value},{default:u(()=>[t("div",wt,[n(o(F),{class:"w-4 h-4"}),t("span",null,r(p.value?"Save Changes":"Create Stock Take"),1)])]),_:1},8,["loading"])])]),n(o(pe),{modelValue:w.value,"onUpdate:modelValue":e[7]||(e[7]=s=>w.value=s),options:{title:"Import Stock Items from CSV"}},{"body-content":u(()=>[t("div",St,[t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Upload CSV File",-1)),t("input",{type:"file",accept:".csv",onChange:se,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),e[37]||(e[37]=t("div",{class:"text-sm text-gray-500 bg-gray-50 p-3 rounded"},[t("p",{class:"font-medium mb-1"},"Expected CSV columns:"),t("p",null,"Item Code, Description, System Qty, Item Value, Physical Qty, Pending Dispatch, Reason Provided")],-1)),g.value.length>0?(v(),f("div",Ct,[e[36]||(e[36]=t("p",{class:"text-sm font-medium mb-2"},"Preview (first 5 rows):",-1)),t("div",Dt,[t("table",qt,[t("thead",null,[t("tr",It,[(v(!0),f(T,null,U(b.value,s=>(v(),f("th",{key:s,class:"px-2 py-1 text-left"},r(s),1))),128))])]),t("tbody",null,[(v(!0),f(T,null,U(g.value.slice(0,5),(s,d)=>(v(),f("tr",{key:d},[(v(!0),f(T,null,U(s,(i,S)=>(v(),f("td",{key:S,class:"px-2 py-1 border-t"},r(i),1))),128))]))),128))])])])])):E("",!0)])]),actions:u(()=>[n(o(m),{variant:"outline",onClick:e[6]||(e[6]=s=>w.value=!1)},{default:u(()=>[...e[38]||(e[38]=[y("Cancel",-1)])]),_:1}),n(o(m),{variant:"solid",onClick:ne,disabled:g.value.length===0},{default:u(()=>[y(" Import "+r(g.value.length)+" Items ",1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]))}};export{Mt as default};
//# sourceMappingURL=StockTakeForm-CrDaYM1f.js.map
