var D=(H,P,k)=>new Promise((C,V)=>{var I=c=>{try{g(k.next(c))}catch(y){V(y)}},S=c=>{try{g(k.throw(c))}catch(y){V(y)}},g=c=>c.done?C(c.value):Promise.resolve(c.value).then(I,S);g((k=k.apply(H,P)).next())});import{ab as fe,r as m,j as U,Q as be,l as d,p as i,q as e,s as n,u as v,v as l,H as T,ac as h,ao as A,am as K,F as j,x as z,A as a,ah as N,aq as ye,y as xe,z as u,B as M}from"./vue-DciwFjI_.js";import{p as _e,g as J,a as w,c as $,D as he}from"./index-qIC3Tfxg.js";import{U as X,$ as we,N as Y,f as Z,T as R,n as ke,br as Se,b5 as Ce,d as De}from"./icons-CtLkBOsu.js";import"./charts-DlPBe6v3.js";import"./utils-Bcd7wHeW.js";const Ve={class:"min-h-screen bg-gray-50"},Ie={class:"bg-white border-b border-gray-200 px-6 py-4"},Ue={class:"flex justify-between items-center"},Te={class:"flex gap-3"},Ae={class:"flex items-center gap-2"},Me={class:"flex items-center gap-2"},Re={key:0},Pe={class:"flex items-center gap-2"},Oe={class:"p-6 space-y-6"},We={class:"bg-white rounded-lg border border-gray-200 shadow-sm"},je={class:"p-6"},ze={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},Fe=["value"],Ne={class:"flex items-end"},$e={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer"},He={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},Be={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},Ee={class:"flex items-center justify-between"},Le={class:"text-3xl font-bold text-gray-900 mt-1"},Qe={class:"bg-blue-100 p-3 rounded-full"},qe={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},Ge={class:"flex items-center justify-between"},Ke={class:"text-3xl font-bold text-yellow-600 mt-1"},Je={class:"bg-yellow-100 p-3 rounded-full"},Xe={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},Ye={class:"flex items-center justify-between"},Ze={class:"text-3xl font-bold text-red-600 mt-1"},et={class:"bg-red-100 p-3 rounded-full"},tt={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},st={class:"flex items-center justify-between"},ot={class:"text-3xl font-bold text-orange-600 mt-1"},at={class:"bg-orange-100 p-3 rounded-full"},lt={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},nt={class:"flex items-center justify-between"},rt={class:"text-3xl font-bold text-green-600 mt-1"},it={class:"bg-green-100 p-3 rounded-full"},dt={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},ut={class:"flex items-center justify-between"},vt={class:"text-3xl font-bold text-red-600 mt-1"},mt={class:"bg-red-100 p-3 rounded-full"},gt={class:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden"},ct={key:0,class:"p-12 text-center"},pt={key:1,class:"divide-y divide-gray-200"},ft=["onClick"],bt={class:"flex items-start justify-between"},yt={class:"flex-1"},xt={class:"flex items-center gap-3 mb-2"},_t={class:"font-medium text-gray-900"},ht={class:"flex items-center gap-6 text-sm text-gray-500"},wt={class:"flex items-center gap-1"},kt={key:0,class:"flex items-center gap-1"},St={class:"flex items-center gap-1"},Ct={class:"flex items-center gap-6 mt-3 text-sm"},Dt={class:"text-gray-700"},Vt={class:"text-yellow-600"},It={class:"text-green-600"},Ut={class:"text-red-600"},Tt={class:"text-blue-600"},At={class:"flex items-center gap-2 mt-3"},Mt={class:"text-right"},Rt={class:"text-xs text-gray-400 mt-1"},Pt={key:2,class:"p-16 text-center"},Ot={class:"bg-gray-100 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center"},Wt={class:"flex gap-4 justify-center"},jt={class:"flex items-center gap-2"},zt={class:"flex items-center gap-2"},Ft={key:3,class:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between"},Nt={class:"text-sm text-gray-700 font-medium"},$t={class:"font-semibold"},Ht={class:"font-semibold"},Bt={class:"font-semibold"},Et={class:"flex gap-3"},Lt={class:"space-y-4"},Qt=["value"],qt={key:0,class:"border rounded p-3"},Gt={class:"text-sm font-medium mb-2"},Kt={class:"max-h-40 overflow-y-auto text-xs"},Jt={key:0,class:"py-1 text-gray-500"},os={__name:"StockTakeList",setup(H){const P=fe(),k=_e(),C=m(!1),V=m(!1),I=m(!1),S=m(!1),g=m([]),c=m([]),y=m(0),x=m(1),O=m(20),r=m({stock_take_type:"",status:"",warehouse:"",date_from:"",date_to:""}),p=m({stock_take_type:"Daily Stock Take",warehouse:"",audit_date:new Date().toISOString().split("T")[0]}),_=m([]),W=m(""),B=U(()=>Math.ceil(y.value/O.value)),ee=U(()=>g.value.filter(o=>["Draft","Physical Count Submitted"].includes(o.status)).length),te=U(()=>g.value.filter(o=>(o.items_verified_discrepancy||0)>0).length),se=U(()=>g.value.filter(o=>o.status==="Under Investigation").length),oe=U(()=>g.value.filter(o=>o.status==="HOD Approved").length),ae=U(()=>g.value.reduce((o,t)=>o+Math.abs(t.total_variance_value||0),0));be(()=>D(this,null,function*(){yield Promise.all([f(),le()])}));function le(){return D(this,null,function*(){try{const o=yield J("frappe.client.get_list",{doctype:"Warehouse Master",filters:{is_active:1},fields:["name","warehouse_code","warehouse_name"],limit_page_length:0});c.value=o}catch(o){console.error("Error loading warehouses:",o)}})}function f(){return D(this,null,function*(){C.value=!0;try{const o={};r.value.stock_take_type&&(o.stock_take_type=r.value.stock_take_type),r.value.status&&(o.status=r.value.status),r.value.warehouse&&(o.warehouse=r.value.warehouse),r.value.date_from&&(o.audit_date=[">=",r.value.date_from]),r.value.date_to&&(o.audit_date?o.audit_date=["between",[r.value.date_from,r.value.date_to]]:o.audit_date=["<=",r.value.date_to]),I.value&&(o.resolution_deadline=["<",new Date().toISOString().split("T")[0]],o.status=["not in",["Resolved","Closed"]]),yield k.loadStockTakeAudits(o,x.value,O.value),g.value=k.returnAudits,y.value=k.returnAuditsTotalCount}catch(o){console.error("Error loading stock takes:",o)}finally{C.value=!1}})}function ne(){return D(this,null,function*(){r.value={stock_take_type:"",status:"",warehouse:"",date_from:"",date_to:""},I.value=!1,x.value=1,yield f()})}function E(o){return D(this,null,function*(){x.value=o,yield f()})}function L(){P.push("/inventory-audit/stock-take/new")}function re(o){P.push(`/inventory-audit/stock-take/${o}`)}function ie(o){return!o.resolution_deadline||["HOD Approved","Under Investigation"].includes(o.status)?!1:new Date(o.resolution_deadline)<new Date}function de(o){return{"Sales Return":"orange","Daily Stock Take":"blue","Weekly Stock Take":"purple","Monthly Stock Take":"green"}[o]||"gray"}function ue(o){return{Draft:"subtle","Physical Count Submitted":"yellow","Analyst Reviewed":"blue","HOD Approved":"green","Under Investigation":"red"}[o]||"gray"}function Q(o){return o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function q(o){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(o||0)}function ve(o){const t=o.target.files[0];if(!t)return;const s=new FileReader;s.onload=b=>{W.value=b.target.result,me(W.value)},s.readAsText(t)}function me(o){const t=o.split(`
`).filter(b=>b.trim());if(t.length<2)return;const s=t[0].split(",").map(b=>b.trim().replace(/"/g,""));_.value=t.slice(1).map(b=>{const ce=b.split(",").map(F=>F.trim().replace(/"/g,"")),G={};return s.forEach((F,pe)=>{G[F]=ce[pe]||""}),G})}function ge(){return D(this,null,function*(){if(!p.value.warehouse){alert("Please select a warehouse");return}V.value=!0;try{const o=yield J("mkaguzi.inventory_audit.doctype.stock_take_audit.stock_take_audit.import_stock_take_from_csv",{file_content:W.value,warehouse:p.value.warehouse,stock_take_type:p.value.stock_take_type,audit_date:p.value.audit_date});alert(`Successfully created ${o.audits.length} stock take(s)`),S.value=!1,_.value=[],W.value="",yield f()}catch(o){console.error("Import error:",o),alert("Import failed: "+o.message)}finally{V.value=!1}})}return(o,t)=>(i(),d("div",Ve,[e("div",Ie,[e("div",Ue,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Stock Take Management"),e("p",{class:"text-gray-600 mt-1"},"Comprehensive physical verification of stock items across all warehouses")],-1)),e("div",Te,[n(l(w),{variant:"solid",size:"sm",onClick:t[0]||(t[0]=s=>S.value=!0),class:"bg-blue-600 hover:bg-blue-700 shadow-sm"},{default:v(()=>[e("div",Ae,[n(l(X),{class:"w-4 h-4"}),t[15]||(t[15]=e("span",null,"Import CSV",-1))])]),_:1}),n(l(w),{variant:"solid",size:"sm",onClick:ne,loading:C.value,class:"bg-gray-600 hover:bg-gray-700 shadow-sm"},{default:v(()=>[e("div",Me,[n(l(we),{class:"w-4 h-4"}),C.value?T("",!0):(i(),d("span",Re,"Refresh"))])]),_:1},8,["loading"]),n(l(w),{variant:"solid",size:"sm",onClick:L,class:"bg-green-600 hover:bg-green-700 shadow-sm"},{default:v(()=>[e("div",Pe,[n(l(Y),{class:"w-4 h-4"}),t[16]||(t[16]=e("span",null,"New Stock Take",-1))])]),_:1})])])]),e("div",Oe,[e("div",We,[t[27]||(t[27]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Filters & Search"),e("p",{class:"text-sm text-gray-600 mt-1"},"Filter stock takes by type, status, warehouse, and date range")],-1)),e("div",je,[e("div",ze,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Stock Take Type",-1)),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.stock_take_type=s),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:f},[...t[18]||(t[18]=[K('<option value="">All Types</option><option value="Sales Return">Sales Return</option><option value="Daily Stock Take">Daily Stock Take</option><option value="Weekly Stock Take">Weekly Stock Take</option><option value="Monthly Stock Take">Monthly Stock Take</option>',5)])],544),[[A,r.value.stock_take_type]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Status",-1)),h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.status=s),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:f},[...t[20]||(t[20]=[K('<option value="">All Statuses</option><option value="Draft">Draft</option><option value="Physical Count Submitted">Physical Count Submitted</option><option value="Analyst Reviewed">Analyst Reviewed</option><option value="HOD Approved">HOD Approved</option><option value="Under Investigation">Under Investigation</option>',6)])],544),[[A,r.value.status]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Warehouse",-1)),h(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.value.warehouse=s),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:f},[t[22]||(t[22]=e("option",{value:""},"All Warehouses",-1)),(i(!0),d(j,null,z(c.value,s=>(i(),d("option",{key:s.name,value:s.name},a(s.warehouse_code)+" - "+a(s.warehouse_name),9,Fe))),128))],544),[[A,r.value.warehouse]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Date From",-1)),h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.date_from=s),type:"date",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:f},null,544),[[N,r.value.date_from]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Date To",-1)),h(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.date_to=s),type:"date",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:f},null,544),[[N,r.value.date_to]])]),e("div",Ne,[e("label",$e,[h(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>I.value=s),onChange:f,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,544),[[ye,I.value]]),t[26]||(t[26]=e("div",null,[e("span",{class:"text-sm font-medium text-gray-700"},"Overdue Only"),e("p",{class:"text-xs text-gray-500"},"Show only overdue stock takes")],-1))])])])])]),e("div",He,[e("div",Be,[e("div",Ee,[e("div",null,[t[28]||(t[28]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Stock Takes",-1)),e("p",Le,a(y.value),1)]),e("div",Qe,[n(l(Z),{class:"w-6 h-6 text-blue-600"})])])]),e("div",qe,[e("div",Ge,[e("div",null,[t[29]||(t[29]=e("p",{class:"text-sm font-medium text-gray-600"},"Pending Count",-1)),e("p",Ke,a(ee.value),1)]),e("div",Je,[n(l(R),{class:"w-6 h-6 text-yellow-600"})])])]),e("div",Xe,[e("div",Ye,[e("div",null,[t[30]||(t[30]=e("p",{class:"text-sm font-medium text-gray-600"},"With Discrepancy",-1)),e("p",Ze,a(te.value),1)]),e("div",et,[n(l(R),{class:"w-6 h-6 text-red-600"})])])]),e("div",tt,[e("div",st,[e("div",null,[t[31]||(t[31]=e("p",{class:"text-sm font-medium text-gray-600"},"Under Investigation",-1)),e("p",ot,a(se.value),1)]),e("div",at,[n(l(R),{class:"w-6 h-6 text-orange-600"})])])]),e("div",lt,[e("div",nt,[e("div",null,[t[32]||(t[32]=e("p",{class:"text-sm font-medium text-gray-600"},"Resolved",-1)),e("p",rt,a(oe.value),1)]),e("div",it,[n(l(ke),{class:"w-6 h-6 text-green-600"})])])]),e("div",dt,[e("div",ut,[e("div",null,[t[33]||(t[33]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Variance",-1)),e("p",vt,a(q(ae.value)),1)]),e("div",mt,[n(l(R),{class:"w-6 h-6 text-red-600"})])])])]),e("div",gt,[t[52]||(t[52]=e("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Stock Take Records"),e("p",{class:"text-sm text-gray-600 mt-1"},"Click on any record to view details and manage the stock take process")],-1)),C.value?(i(),d("div",ct,[...t[34]||(t[34]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"text-gray-500 mt-4 text-lg"},"Loading stock takes...",-1)])])):g.value.length>0?(i(),d("div",pt,[(i(!0),d(j,null,z(g.value,s=>(i(),d("div",{key:s.name,class:"p-6 hover:bg-blue-50 cursor-pointer transition-all duration-200 hover:shadow-sm border-l-4 hover:border-l-blue-500",onClick:b=>re(s.name)},[e("div",bt,[e("div",yt,[e("div",xt,[e("h4",_t,a(s.name),1),n(l($),{variant:de(s.stock_take_type)},{default:v(()=>[u(a(s.stock_take_type),1)]),_:2},1032,["variant"]),n(l($),{variant:ue(s.status)},{default:v(()=>[u(a(s.status),1)]),_:2},1032,["variant"]),ie(s)?(i(),xe(l($),{key:0,variant:"red"},{default:v(()=>[n(l(R),{class:"w-3 h-3 mr-1"}),t[35]||(t[35]=u(" Overdue ",-1))]),_:1})):T("",!0)]),e("div",ht,[e("span",wt,[n(l(Se),{class:"w-4 h-4"}),u(" "+a(s.warehouse),1)]),s.branch?(i(),d("span",kt,[n(l(Ce),{class:"w-4 h-4"}),u(" "+a(s.branch),1)])):T("",!0),e("span",St,[n(l(De),{class:"w-4 h-4"}),u(" "+a(Q(s.audit_date)),1)])]),e("div",Ct,[e("span",Dt,[t[36]||(t[36]=u(" Total Items: ",-1)),e("strong",null,a(s.total_items||0),1)]),e("span",Vt,[t[37]||(t[37]=u(" Pending: ",-1)),e("strong",null,a(s.items_pending||0),1)]),e("span",It,[t[38]||(t[38]=u(" Match: ",-1)),e("strong",null,a(s.items_verified_match||0),1)]),e("span",Ut,[t[39]||(t[39]=u(" Discrepancy: ",-1)),e("strong",null,a(s.items_verified_discrepancy||0),1)]),e("span",Tt,[t[40]||(t[40]=u(" Resolved: ",-1)),e("strong",null,a(s.items_resolved||0),1)])]),e("div",At,[e("span",{class:M(["text-xs px-2 py-1 rounded-full",s.analyst_verified?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},a(s.analyst_verified?"✓":"○")+" Analyst ",3),e("span",{class:M(["text-xs px-2 py-1 rounded-full",s.taker_verified?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},a(s.taker_verified?"✓":"○")+" Stock Taker ",3),e("span",{class:M(["text-xs px-2 py-1 rounded-full",s.manager_confirmed?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},a(s.manager_confirmed?"✓":"○")+" Manager ",3),e("span",{class:M(["text-xs px-2 py-1 rounded-full",s.hod_approved?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},a(s.hod_approved?"✓":"○")+" HOD ",3)])]),e("div",Mt,[t[41]||(t[41]=e("p",{class:"text-sm text-gray-500"},"Variance Value",-1)),e("p",{class:M(["text-xl font-bold",(s.total_variance_value||0)>0?"text-red-600":"text-green-600"])},a(q(s.total_variance_value||0)),3),e("p",Rt," Deadline: "+a(Q(s.resolution_deadline)),1)])])],8,ft))),128))])):(i(),d("div",Pt,[e("div",Ot,[n(l(Z),{class:"w-12 h-12 text-gray-400"})]),t[44]||(t[44]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"No Stock Takes Found",-1)),t[45]||(t[45]=e("p",{class:"text-gray-600 mb-8 max-w-md mx-auto"},"Get started by importing stock data from CSV or creating a new stock take record to begin the physical verification process.",-1)),e("div",Wt,[n(l(w),{variant:"solid",size:"sm",onClick:t[7]||(t[7]=s=>S.value=!0),class:"bg-blue-600 hover:bg-blue-700 shadow-sm px-6 py-3"},{default:v(()=>[e("div",jt,[n(l(X),{class:"w-5 h-5"}),t[42]||(t[42]=e("span",null,"Import CSV",-1))])]),_:1}),n(l(w),{variant:"solid",size:"sm",onClick:L,class:"bg-green-600 hover:bg-green-700 shadow-sm px-6 py-3"},{default:v(()=>[e("div",zt,[n(l(Y),{class:"w-5 h-5"}),t[43]||(t[43]=e("span",null,"New Stock Take",-1))])]),_:1})])])),B.value>1?(i(),d("div",Ft,[e("p",Nt,[t[46]||(t[46]=u(" Showing ",-1)),e("span",$t,a((x.value-1)*O.value+1),1),t[47]||(t[47]=u(" - ",-1)),e("span",Ht,a(Math.min(x.value*O.value,y.value)),1),t[48]||(t[48]=u(" of ",-1)),e("span",Bt,a(y.value),1),t[49]||(t[49]=u(" stock takes ",-1))]),e("div",Et,[n(l(w),{variant:"solid",size:"sm",disabled:x.value===1,onClick:t[8]||(t[8]=s=>E(x.value-1)),class:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-sm px-4 py-2"},{default:v(()=>[...t[50]||(t[50]=[e("span",null,"Previous",-1)])]),_:1},8,["disabled"]),n(l(w),{variant:"solid",size:"sm",disabled:x.value===B.value,onClick:t[9]||(t[9]=s=>E(x.value+1)),class:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-sm px-4 py-2"},{default:v(()=>[...t[51]||(t[51]=[e("span",null,"Next",-1)])]),_:1},8,["disabled"])])])):T("",!0)]),n(l(he),{modelValue:S.value,"onUpdate:modelValue":t[14]||(t[14]=s=>S.value=s),options:{title:"Import Stock Take from CSV"}},{"body-content":v(()=>[e("div",Lt,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u(" Stock Take Type "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>p.value.stock_take_type=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...t[53]||(t[53]=[e("option",{value:"Daily Stock Take"},"Daily Stock Take",-1),e("option",{value:"Weekly Stock Take"},"Weekly Stock Take",-1),e("option",{value:"Monthly Stock Take"},"Monthly Stock Take",-1),e("option",{value:"Sales Return"},"Sales Return",-1)])],512),[[A,p.value.stock_take_type]])]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u(" Warehouse "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>p.value.warehouse=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[t[55]||(t[55]=e("option",{value:""},"Select Warehouse",-1)),(i(!0),d(j,null,z(c.value,s=>(i(),d("option",{key:s.name,value:s.name},a(s.warehouse_code)+" - "+a(s.warehouse_name),9,Qt))),128))],512),[[A,p.value.warehouse]])]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock Take Date",-1)),h(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>p.value.audit_date=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[N,p.value.audit_date]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Upload CSV File",-1)),e("input",{type:"file",accept:".csv",onChange:ve,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),t[59]||(t[59]=e("div",{class:"text-sm text-gray-500 bg-gray-50 p-3 rounded"},[e("p",{class:"font-medium mb-1"},"Expected CSV columns:"),e("p",null,"Item Code, Description, System Qty, Value, Warehouse, Date")],-1)),_.value.length>0?(i(),d("div",qt,[e("p",Gt,"Preview ("+a(_.value.length)+" items):",1),e("div",Kt,[(i(!0),d(j,null,z(_.value.slice(0,5),(s,b)=>(i(),d("div",{key:b,class:"py-1 border-b"},a(s["Item Code"])+" - "+a(s.Description)+" (Qty: "+a(s["System Qty"]||s["Return Qty"])+") ",1))),128)),_.value.length>5?(i(),d("div",Jt," ... and "+a(_.value.length-5)+" more items ",1)):T("",!0)])])):T("",!0)])]),actions:v(()=>[n(l(w),{variant:"solid",size:"sm",onClick:t[13]||(t[13]=s=>S.value=!1),class:"bg-gray-600 hover:bg-gray-700"},{default:v(()=>[...t[60]||(t[60]=[e("span",null,"Cancel",-1)])]),_:1}),n(l(w),{variant:"solid",size:"sm",onClick:ge,disabled:!p.value.warehouse||_.value.length===0,loading:V.value,class:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400"},{default:v(()=>[e("span",null,"Import "+a(_.value.length)+" Items",1)]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])])]))}};export{os as default};
//# sourceMappingURL=StockTakeList-D1oDLnJ4.js.map
