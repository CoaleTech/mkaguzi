var B=(A,D,d)=>new Promise((s,f)=>{var k=o=>{try{y(d.next(o))}catch(_){f(_)}},b=o=>{try{y(d.throw(o))}catch(_){f(_)}},y=o=>o.done?s(o.value):Promise.resolve(o.value).then(k,b);y((d=d.apply(A,D)).next())});import{a as x,A as V,S as J,c as O,w as z}from"./index-qIC3Tfxg.js";import{ap as U,r as L,Q as q,l as u,p as g,q as t,A as a,s as n,u as p,z as v,v as i,F as P,x as M,$ as N}from"./vue-DciwFjI_.js";import{a0 as H,aa as Q,n as G,N as K,d as W,U as X}from"./icons-CtLkBOsu.js";import"./charts-DlPBe6v3.js";import"./utils-Bcd7wHeW.js";const Y={class:"space-y-6"},Z={class:"flex items-center justify-between"},tt={class:"text-2xl font-bold text-gray-900"},et={class:"text-gray-600 mt-1"},st={class:"flex items-center space-x-3"},at={key:0,class:"flex justify-center items-center py-12"},nt={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},it={class:"lg:col-span-2 space-y-6"},lt={class:"bg-white rounded-lg border border-gray-200 p-6"},ot={class:"grid grid-cols-2 gap-4"},dt={class:"font-medium"},rt={class:"font-medium"},ut={class:"font-medium"},gt={class:"font-medium"},ct={class:"font-medium"},mt={class:"bg-white rounded-lg border border-gray-200 p-6"},pt={class:"space-y-2"},vt={class:"text-gray-700"},xt={class:"bg-white rounded-lg border border-gray-200 p-6"},ft={class:"prose prose-sm max-w-none"},yt={class:"bg-white rounded-lg border border-gray-200 p-6"},_t={class:"grid grid-cols-3 gap-4"},ht={class:"text-center"},bt={class:"text-2xl font-bold text-red-600"},wt={class:"text-center"},Dt={class:"text-2xl font-bold text-yellow-600"},kt={class:"text-center"},At={class:"text-2xl font-bold text-green-600"},St={class:"space-y-6"},$t={class:"bg-white rounded-lg border border-gray-200 p-6"},Ct={class:"space-y-3"},jt={class:"font-medium text-sm"},Et={class:"text-xs text-gray-600"},Ft={class:"bg-white rounded-lg border border-gray-200 p-6"},Bt={class:"space-y-2"},Lt={class:"flex justify-between text-sm"},Pt={class:"w-full bg-gray-200 rounded-full h-2"},Mt={class:"space-y-2 mt-4"},Nt={class:"flex justify-between text-sm"},Tt={class:"w-full bg-gray-200 rounded-full h-2"},It={class:"bg-white rounded-lg border border-gray-200 p-6"},Rt={class:"space-y-2"},Vt={key:2,class:"text-center py-12"},Qt={__name:"EngagementDetail",setup(A){const D=U(),d=L(!0),s=L(null),f=()=>B(this,null,function*(){d.value=!0;try{s.value={id:D.params.id,title:"Annual Financial Audit 2024",description:"Comprehensive audit of financial statements and internal controls",status:"In Progress",type:"Financial Audit",startDate:"2024-01-01",endDate:"2024-12-31",leadAuditor:"John Doe",budget:15e4,objectives:[{id:1,description:"Assess effectiveness of internal controls"},{id:2,description:"Verify accuracy of financial statements"},{id:3,description:"Identify areas for process improvement"}],scope:"The audit will cover all financial processes, including accounts payable, accounts receivable, payroll, and fixed assets. The scope includes all company locations and subsidiaries.",findings:{high:2,medium:5,low:8},team:[{id:1,name:"John Doe",role:"Lead Auditor"},{id:2,name:"Jane Smith",role:"Senior Auditor"},{id:3,name:"Bob Johnson",role:"Staff Auditor"}],progress:{planning:100,execution:65}}}catch(l){console.error("Failed to load engagement:",l)}finally{d.value=!1}}),k=l=>({"Not Started":"secondary","In Progress":"warning",Completed:"success","On Hold":"danger"})[l]||"secondary",b=l=>new Date(l).toLocaleDateString(),y=()=>{},o=()=>{},_=()=>{},T=()=>{},I=()=>{};q(()=>{f()});function R(){var h;if(!s.value)return null;const l=s.value.objectives||[],e=s.value.findings||{high:0,medium:0,low:0},r=e.high+e.medium+e.low,c=s.value.startDate&&s.value.endDate?Math.ceil((new Date(s.value.endDate)-new Date(s.value.startDate))/(1e3*60*60*24)):0;return{page_type:"engagement",page_title:`Engagement: ${s.value.title}`,title:s.value.title,description:s.value.description,status:s.value.status,type:s.value.type,start_date:s.value.startDate,end_date:s.value.endDate,duration_days:c,lead_auditor:s.value.leadAuditor,budget:s.value.budget,objectives_count:l.length,objectives:l.map(w=>w.description),scope:s.value.scope,findings_summary:{total:r,high:e.high,medium:e.medium,low:e.low,high_percentage:r>0?(e.high/r*100).toFixed(1):0},risk_assessment:{complexity:s.value.type==="Financial Audit"?"high":s.value.type==="Operational Audit"?"medium":"low",critical_findings:e.high>0,timeline_pressure:c<90?"high":c<180?"medium":"low",budget_utilization:s.value.budget>1e5?"high":s.value.budget>5e4?"medium":"low"},progress_indicators:{has_scope_defined:!!s.value.scope,has_objectives:l.length>0,has_findings:r>0,is_on_track:s.value.status==="In Progress"||s.value.status==="Completed"},summary:{description:`${s.value.type} engagement: ${s.value.description}`,key_metrics:[`${l.length} audit objectives defined`,`${r} findings identified (${e.high} high risk)`,`Budget: $${((h=s.value.budget)==null?void 0:h.toLocaleString())||"Not set"}`,`Duration: ${c} days`]}}}return(l,e)=>{var r,c,h,w,S,$,C,j,E,F;return g(),u("div",Y,[t("div",Z,[t("div",null,[t("h1",tt,a(((r=s.value)==null?void 0:r.title)||"Engagement Details"),1),t("p",et,a(((c=s.value)==null?void 0:c.description)||"Loading engagement details..."),1)]),t("div",st,[n(i(x),{variant:"outline",onClick:y},{default:p(()=>[n(i(H),{class:"h-4 w-4 mr-2"}),e[0]||(e[0]=v(" Export ",-1))]),_:1}),n(V,{contextType:"engagement",contextData:R()},null,8,["contextData"]),n(i(x),{onClick:o},{default:p(()=>[n(i(Q),{class:"h-4 w-4 mr-2"}),e[1]||(e[1]=v(" Edit ",-1))]),_:1})])]),d.value?(g(),u("div",at,[n(i(J),{class:"h-8 w-8"})])):s.value?(g(),u("div",nt,[t("div",it,[t("div",lt,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Overview",-1)),t("div",ot,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-600"},"Status",-1)),n(i(O),{variant:k(s.value.status),class:"mt-1"},{default:p(()=>[v(a(s.value.status),1)]),_:1},8,["variant"])]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-600"},"Type",-1)),t("p",dt,a(s.value.type),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-600"},"Start Date",-1)),t("p",rt,a(b(s.value.startDate)),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-600"},"End Date",-1)),t("p",ut,a(b(s.value.endDate)),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-600"},"Lead Auditor",-1)),t("p",gt,a(s.value.leadAuditor),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-600"},"Budget",-1)),t("p",ct,"$"+a((h=s.value.budget)==null?void 0:h.toLocaleString()),1)])])]),t("div",mt,[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Objectives",-1)),t("ul",pt,[(g(!0),u(P,null,M(s.value.objectives,m=>(g(),u("li",{key:m.id,class:"flex items-start"},[n(i(G),{class:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),t("span",vt,a(m.description),1)]))),128))])]),t("div",xt,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Scope",-1)),t("div",ft,[t("p",null,a(s.value.scope),1)])]),t("div",yt,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Findings Summary",-1)),t("div",_t,[t("div",ht,[t("p",bt,a(((w=s.value.findings)==null?void 0:w.high)||0),1),e[11]||(e[11]=t("p",{class:"text-sm text-gray-600"},"High Risk",-1))]),t("div",wt,[t("p",Dt,a(((S=s.value.findings)==null?void 0:S.medium)||0),1),e[12]||(e[12]=t("p",{class:"text-sm text-gray-600"},"Medium Risk",-1))]),t("div",kt,[t("p",At,a((($=s.value.findings)==null?void 0:$.low)||0),1),e[13]||(e[13]=t("p",{class:"text-sm text-gray-600"},"Low Risk",-1))])])])]),t("div",St,[t("div",$t,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Team Members",-1)),t("div",Ct,[(g(!0),u(P,null,M(s.value.team,m=>(g(),u("div",{key:m.id,class:"flex items-center"},[n(i(z),{label:m.name,class:"mr-3"},null,8,["label"]),t("div",null,[t("p",jt,a(m.name),1),t("p",Et,a(m.role),1)])]))),128))])]),t("div",Ft,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Progress",-1)),t("div",Bt,[t("div",Lt,[e[16]||(e[16]=t("span",null,"Planning",-1)),t("span",null,a(((C=s.value.progress)==null?void 0:C.planning)||0)+"%",1)]),t("div",Pt,[t("div",{class:"bg-blue-600 h-2 rounded-full",style:N({width:`${((j=s.value.progress)==null?void 0:j.planning)||0}%`})},null,4)])]),t("div",Mt,[t("div",Nt,[e[17]||(e[17]=t("span",null,"Execution",-1)),t("span",null,a(((E=s.value.progress)==null?void 0:E.execution)||0)+"%",1)]),t("div",Tt,[t("div",{class:"bg-green-600 h-2 rounded-full",style:N({width:`${((F=s.value.progress)==null?void 0:F.execution)||0}%`})},null,4)])])]),t("div",It,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),t("div",Rt,[n(i(x),{variant:"outline",block:"",onClick:_},{default:p(()=>[n(i(K),{class:"h-4 w-4 mr-2"}),e[19]||(e[19]=v(" Add Finding ",-1))]),_:1}),n(i(x),{variant:"outline",block:"",onClick:T},{default:p(()=>[n(i(W),{class:"h-4 w-4 mr-2"}),e[20]||(e[20]=v(" Schedule Meeting ",-1))]),_:1}),n(i(x),{variant:"outline",block:"",onClick:I},{default:p(()=>[n(i(X),{class:"h-4 w-4 mr-2"}),e[21]||(e[21]=v(" Upload Document ",-1))]),_:1})])])])])):(g(),u("div",Vt,[e[24]||(e[24]=t("p",{class:"text-gray-600"},"Failed to load engagement details.",-1)),n(i(x),{onClick:f,class:"mt-4"},{default:p(()=>[...e[23]||(e[23]=[v("Retry",-1)])]),_:1})]))])}}};export{Qt as default};
//# sourceMappingURL=EngagementDetail-DI2t4m8s.js.map
