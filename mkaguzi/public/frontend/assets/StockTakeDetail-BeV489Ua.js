var U=(m,n,o)=>new Promise((r,d)=>{var y=C=>{try{$(o.next(C))}catch(j){d(j)}},s=C=>{try{$(o.throw(C))}catch(j){d(j)}},$=C=>C.done?r(C.value):Promise.resolve(C.value).then(y,s);$((o=o.apply(m,n)).next())});import{i as H,l as f,p as i,I as P,q as e,y as R,H as _,A as p,v as a,_ as B,r as M,j as k,a1 as F,a2 as G,B as D,a6 as oe,F as Q,x as se,$ as X,s as c,C as te,u as w,z as S,aj as Ke,a9 as We,b as Be,w as ye,P as Ge,ap as Qe,ab as Xe,Q as Je,ac as Ye,ao as Ze,am as et}from"./vue-DciwFjI_.js";import{a as V,q as tt,i as de,r as st,_ as at,g as N,c as _e,A as lt,b as re,D as ot}from"./index-qIC3Tfxg.js";import{aL as nt,aa as it,b2 as rt,a0 as ut,n as Z,U as xe,F as ue,a9 as we,K as dt,b1 as ct,a7 as ee}from"./icons-CtLkBOsu.js";import"./charts-DlPBe6v3.js";import"./utils-Bcd7wHeW.js";const pt={class:"flex h-full w-full flex-col items-center justify-center text-base"},mt={class:"text-xl font-medium text-ink-gray-8 mt-6"},vt={class:"mt-1 text-base text-ink-gray-5"},ft={__name:"ListEmptyState",setup(m){const n=H("list");return(o,r)=>(i(),f("div",pt,[P(o.$slots,"default",{},()=>[e("div",mt,p(a(n).options.emptyState.title),1),e("div",vt,p(a(n).options.emptyState.description),1),a(n).options.emptyState.button?(i(),R(a(V),B({key:0},a(n).options.emptyState.button,{class:"mt-4"}),null,16)):_("",!0)])]))}};function he(m,n=!0){let o=n?"14px ":"",r=m.map(d=>{let y=d.width||1;return typeof y=="number"?y+"fr":y}).join(" ");return o+r}const ce={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},gt={class:"truncate"},yt={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(m,{emit:n}){const o=m,r=n,d=M(null),y=M(null),s=k(()=>{if(typeof o.item.width=="string"){const A=parseInt(o.item.width);if(o.item.width.includes("rem"))return A*16;if(o.item.width.includes("px"))return A}return y.value.offsetWidth}),$=A=>{const h=A.clientX,E=s.value,T=x=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),d.value.style.backgroundColor="rgb(199 199 199)";let b=E+(x.clientX-h);o.item.width=`${b<50?50:b}px`,C(o.item.width)},v=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),d.value.style.backgroundColor="",window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",v)};window.addEventListener("mousemove",T),window.addEventListener("mouseup",v)},C=tt(A=>{o.item.width=A,r("columnWidthUpdated")},o.debounce),j=H("list");return(A,h)=>(i(),f("div",{ref_key:"columnRef",ref:y,class:D(["group relative flex items-center",m.item.align?a(ce)[m.item.align]:"justify-between"])},[e("div",{class:D(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",A.$attrs.class])},[P(A.$slots,"prefix",F(G({item:m.item}))),P(A.$slots,"default",{},()=>[e("div",gt,p(m.item.label),1)]),P(A.$slots,"suffix",F(G({item:m.item})))],2),a(j).options.resizeColumn?P(A.$slots,"resizer",F(B({key:0},{item:m.item})),()=>[e("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:$},[e("div",{ref_key:"resizer",ref:d,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):_("",!0)],2))}},_t={__name:"ListHeader",emits:["columnWidthUpdated"],setup(m,{emit:n}){const o=n,r=H("list");return(d,y)=>(i(),f("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:X({gridTemplateColumns:a(he)(a(r).columns,a(r).options.selectable)})},[a(r).options.selectable?(i(),R(de,{key:0,class:"cursor-pointer duration-300",modelValue:a(r).allRowsSelected,onClick:oe(a(r).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):_("",!0),P(d.$slots,"default",{},()=>[(i(!0),f(Q,null,se(a(r).columns,s=>(i(),R(yt,{key:s.key,item:s,onColumnWidthUpdated:$=>o("columnWidthUpdated",s)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},xt={class:"truncate text-base"},wt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(m){const n=m,o=k(()=>{var s,$;return(s=n.column)!=null&&s.getLabel?($=n.column)==null?void 0:$.getLabel({row:n.row}):d(n.item).label||""}),r=k(()=>y.value.options.showTooltip?n.column.getTooltip?n.column.getTooltip(n.row):d(n.item).label:"");function d(s){return s&&typeof s=="object"?s:{label:s}}const y=H("list");return(s,$)=>(i(),f("div",{class:D(["flex items-center space-x-2",a(ce)[m.align]])},[P(s.$slots,"prefix",{},()=>[m.column.prefix?(i(),R(te(typeof m.column.prefix=="function"?m.column.prefix({row:m.row}):m.column.prefix),{key:0})):_("",!0)]),c(a(st),F(G(a(y).options.showTooltip?{text:r.value}:{text:""})),{default:w(()=>[P(s.$slots,"default",F(G({label:o.value})),()=>[e("div",xt,p(o.value),1)])]),_:3},16),P(s.$slots,"suffix")],2))}},be={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(m){const n=m,o=H("list"),r=k(()=>{var h;return(h=o.value.rows)!=null&&h.length?o.value.rows[o.value.rows.length-1][o.value.rowKey]===n.row[o.value.rowKey]:!1}),d=k(()=>o.value.selections.has(n.row[o.value.rowKey])),y=k(()=>o.value.options.enableActive&&o.value.activeRow.value===n.row.name),s=k(()=>o.value.options.getRowRoute||o.value.options.onRowClick),$=k(()=>typeof o.value.options.rowHeight=="number"?`${o.value.options.rowHeight}px`:o.value.options.rowHeight),C=k(()=>{var T,v,x;if(!d.value)return"rounded";const h=[...o.value.selections];let E=(T=o.value.rows[0])!=null&&T.group?o.value.rows.map(b=>b.rows):[o.value.rows];for(let b of E){let W=b.findIndex(J=>J==n.row);if(W===-1)continue;let K=!h.includes((v=b[W+1])==null?void 0:v.name),L=!h.includes((x=b[W-1])==null?void 0:x.name);return(K?"rounded-b ":"")+(L?"rounded-t":"")}}),j=h=>{o.value.options.onRowClick&&o.value.options.onRowClick(n.row,h),o.value.activeRow.value===n.row.name?o.value.activeRow.value=null:o.value.activeRow.value=n.row.name},A=h=>{const E=n.row[o.value.rowKey];if(h.shiftKey&&!o.value.selections.has(E)){const T=Array.from(o.value.selections).pop(),v=o.value.rows.find(L=>L.group)?o.value.rows.reduce((L,J)=>L.concat(J.rows),[]):o.value.rows,x=v.findIndex(L=>T===L[o.value.rowKey]),b=v.findIndex(L=>E===L[o.value.rowKey]),W=Math.min(x,b),K=Math.max(x,b);for(let L=W;L<=K;L++)o.value.selections.add(v[L][o.value.rowKey])}else o.value.toggleRow(E)};return(h,E)=>(i(),R(te(a(o).options.getRowRoute?"router-link":"div"),B({class:[[C.value,d.value||y.value?"bg-surface-gray-2":"",s.value?"cursor-pointer":"",s.value?d.value||y.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:a(o).options.getRowRoute?a(o).options.getRowRoute(m.row):void 0,onClick:j}),{default:w(()=>[(i(),R(te(a(o).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:w(()=>{var T,v;return[e("div",{class:"grid items-center space-x-4 px-2",style:X({height:$.value,gridTemplateColumns:a(he)(a(o).columns,a(o).options.selectable)})},[a(o).options.selectable?(i(),f("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:E[0]||(E[0]=oe(()=>{},["stop","prevent"])),onDblclick:E[1]||(E[1]=oe(()=>{},["stop"]))},[c(de,{modelValue:d.value,class:"cursor-pointer duration-300",onClick:oe(A,["stop"])},null,8,["modelValue"])],32)):_("",!0),(i(!0),f(Q,null,se(a(o).columns,(x,b)=>(i(),f("div",{key:x.key,class:D([a(ce)[x.align],b==0?"text-ink-gray-9":"text-ink-gray-7"])},[P(h.$slots,"default",B({ref_for:!0},{idx:b,column:x,item:m.row[x.key],isActive:y.value}),()=>[a(o).slots.cell?(i(),R(te(a(o).slots.cell),B({key:0,ref_for:!0},{column:x,row:m.row,item:m.row[x.key],align:x.align}),null,16)):(i(),R(wt,{key:1,column:x,row:m.row,item:m.row[x.key],align:x.align},null,8,["column","row","item","align"]))])],2))),128))],4),r.value?_("",!0):(i(),f("div",{key:0,class:D(["h-px border-t",C.value==="rounded"||(v=(T=C.value)==null?void 0:T.includes)!=null&&v.call(T,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},ht={class:"h-full overflow-y-auto"},bt={__name:"ListRows",setup(m){const n=H("list");return(o,r)=>(i(),f("div",ht,[P(o.$slots,"default",{},()=>[(i(!0),f(Q,null,se(a(n).rows,d=>(i(),R(be,{key:d[a(n).rowKey],row:d},null,8,["row"]))),128))])]))}},kt={},Ct={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function St(m,n){return i(),f("svg",Ct,[...n[0]||(n[0]=[e("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)])])}const Rt=at(kt,[["render",St]]),$t={class:"flex items-center"},At={class:"w-full py-1.5 pr-2"},Tt={key:1,class:"text-base font-medium leading-6"},Dt={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(m){const n=m,o=H("list");function r(){n.group.collapsed==null&&(n.group.collapsed=!1),n.group.collapsed=!n.group.collapsed}return(d,y)=>(i(),f(Q,null,[e("div",$t,[e("button",{onClick:r,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[c(Rt,{class:D(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[m.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),P(d.$slots,"default",{},()=>[e("div",At,[a(o).slots["group-header"]?(i(),R(te(a(o).slots["group-header"]),F(B({key:0},{group:m.group})),null,16)):(i(),f("span",Tt,p(m.group.group),1))])])]),y[0]||(y[0]=e("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},jt={key:0,class:"mb-5 mt-2"},Vt={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(m){const n=H("list");return(o,r)=>m.group.collapsed?_("",!0):(i(),f("div",jt,[P(o.$slots,"default",{},()=>[(i(!0),f(Q,null,se(m.group.rows,d=>(i(),R(be,{key:d[a(n).rowKey],row:d},null,8,["row"]))),128))])]))}},Pt={class:"h-full overflow-y-auto"},Et={__name:"ListGroups",setup(m){const n=H("list");return(o,r)=>(i(),f("div",Pt,[(i(!0),f(Q,null,se(a(n).rows,d=>(i(),f("div",{key:d.group},[P(o.$slots,"default",{},()=>[c(Dt,{group:d},{default:w(()=>[o.$slots["group-header"]?P(o.$slots,"group-header",B({key:0,ref_for:!0},{group:d})):_("",!0)]),_:2},1032,["group"]),c(Vt,{group:d},null,8,["group"])])]))),128))]))}},qt={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},It={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Lt={class:"flex items-center space-x-3"},zt={class:"mr-3"},Mt={class:"flex items-center space-x-1"},Ut=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(m){const n=H("list");let o=k(()=>n.value.options.selectionText(n.value.selections.size));return(r,d)=>(i(),R(Ke,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:w(()=>[a(n).selections.size?(i(),f("div",qt,[e("div",{class:D(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",r.$attrs.class])},[P(r.$slots,"default",F(G({selections:a(n).selections,allRowsSelected:a(n).allRowsSelected,selectAll:()=>a(n).toggleAllRows(!0),unselectAll:()=>a(n).toggleAllRows(!1)})),()=>[e("div",It,[e("div",Lt,[c(de,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),e("div",null,p(a(o)),1)]),e("div",zt,[P(r.$slots,"actions",F(G({selections:a(n).selections,allRowsSelected:a(n).allRowsSelected,selectAll:()=>a(n).toggleAllRows(!0),unselectAll:()=>a(n).toggleAllRows(!1)})))])]),e("div",Mt,[c(a(V),{class:D(["w- text-ink-gray-7",a(n).allRowsSelected?"cursor-not-allowed":""]),disabled:a(n).allRowsSelected,variant:"ghost",onClick:d[0]||(d[0]=y=>a(n).toggleAllRows(!0))},{default:w(()=>[...d[2]||(d[2]=[S(" Select all ",-1)])]),_:1},8,["disabled","class"]),c(a(V),{icon:"x",variant:"ghost",onClick:d[1]||(d[1]=y=>a(n).toggleAllRows(!1))})])])],2)])):_("",!0)]),_:3}))}}),Ot={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Ht=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(m,{expose:n,emit:o}){const r=m,d=We();let y=Be(new Set),s=M(null);const $=o;ye(y,v=>{y.size&&(s.value=null),$("update:selections",v)}),ye(s,v=>{$("update:active-row",v)});let C=k(()=>{function v(b){return b===void 0?!0:b}function x(b){return b===void 0?!1:b}return{getRowRoute:r.options.getRowRoute||null,onRowClick:r.options.onRowClick||null,showTooltip:v(r.options.showTooltip),selectionText:r.options.selectionText||(b=>b===1?"1 row selected":`${b} rows selected`),enableActive:x(r.options.enableActive),selectable:v(r.options.selectable),resizeColumn:x(r.options.resizeColumn),rowHeight:r.options.rowHeight||40,emptyState:r.options.emptyState}});const j=k(()=>r.rows.length?h.value?y.size===r.rows.reduce((v,x)=>v+x.rows.length,0):y.size===r.rows.length:!1),A=k(()=>C.value.selectable);let h=k(()=>r.rows.every(v=>v.group&&v.rows&&Array.isArray(v.rows)));function E(v){y.delete(v)||y.add(v)}function T(v){if(!v||j.value){y.clear();return}if(h.value){r.rows.forEach(x=>{x.rows.forEach(b=>y.add(b[r.rowKey]))});return}r.rows.forEach(x=>y.add(x[r.rowKey]))}return Ge("list",k(()=>({rowKey:r.rowKey,rows:r.rows,columns:r.columns,options:C.value,selections:y,activeRow:s,allRowsSelected:j.value,slots:d,toggleRow:E,toggleAllRows:T}))),n({selections:y,allRowsSelected:j,toggleRow:E,toggleAllRows:T}),(v,x)=>(i(),f("div",Ot,[e("div",{class:D(["flex w-max min-w-full flex-col overflow-y-hidden",v.$attrs.class]),style:X(v.$attrs.style)},[P(v.$slots,"default",F(G({showGroupedRows:a(h),selectable:A.value})),()=>[c(_t),r.rows.length?(i(),f(Q,{key:0},[a(h)?(i(),R(Et,{key:0})):(i(),R(bt,{key:1}))],64)):(i(),R(ft,{key:1})),A.value?(i(),R(Ut,{key:2})):_("",!0)])],6)]))}}),Nt={class:"p-6"},Ft={class:"flex items-center justify-between mb-6"},Kt={class:"flex items-center gap-4"},Wt={class:"text-2xl font-bold text-gray-900"},Bt={class:"text-gray-500 mt-1"},Gt={class:"flex items-center gap-2"},Qt={class:"flex items-center gap-2 ml-auto"},Xt={key:0,class:"flex items-center justify-center py-20"},Jt={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Yt={class:"lg:col-span-2 space-y-6"},Zt={key:0,class:"bg-white rounded-lg border p-6"},es={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},ts={class:"flex items-start gap-3"},ss={class:"space-y-4"},as={class:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors"},ls={key:0,class:"space-y-2"},os={key:1,class:"space-y-2"},ns={class:"text-xs text-gray-500"},is={class:"flex gap-2 justify-center"},rs={class:"bg-gray-50 rounded-lg p-4"},us={class:"grid grid-cols-2 gap-4 text-sm"},ds={class:"font-medium ml-2"},cs={key:0,class:"mt-2 text-xs text-red-600"},ps={key:0},ms={key:1},vs={key:1,class:"bg-white rounded-lg border p-6"},fs={class:"border border-gray-200 rounded-lg p-4"},gs={class:"flex items-center gap-4"},ys={class:"flex-1"},_s={class:"text-xs text-gray-500"},xs={class:"bg-white rounded-lg border p-6"},ws={class:"flex items-center justify-between mb-4"},hs={class:"flex items-center gap-2"},bs={class:"ml-2"},ks={class:"text-xs text-gray-500"},Cs={class:"flex-1 h-1 mx-4 bg-gray-200 rounded"},Ss={class:"flex items-center gap-2"},Rs={class:"ml-2"},$s={class:"text-xs text-gray-500"},As={class:"flex-1 h-1 mx-4 bg-gray-200 rounded"},Ts={class:"flex items-center gap-2"},Ds={class:"ml-2"},js={class:"text-xs text-gray-500"},Vs={class:"flex-1 h-1 mx-4 bg-gray-200 rounded"},Ps={class:"flex items-center gap-2"},Es={class:"ml-2"},qs={class:"text-xs text-gray-500"},Is={class:"flex items-center gap-3 pt-4 border-t"},Ls={key:3,class:"text-green-600 font-medium flex items-center"},zs={class:"bg-white rounded-lg border p-6"},Ms={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},Us={class:"text-center p-4 bg-gray-50 rounded-lg"},Os={class:"text-2xl font-bold text-gray-900"},Hs={class:"text-center p-4 bg-yellow-50 rounded-lg"},Ns={class:"text-2xl font-bold text-yellow-600"},Fs={class:"text-center p-4 bg-green-50 rounded-lg"},Ks={class:"text-2xl font-bold text-green-600"},Ws={class:"text-center p-4 bg-red-50 rounded-lg"},Bs={class:"text-2xl font-bold text-red-600"},Gs={class:"text-center p-4 bg-blue-50 rounded-lg"},Qs={class:"text-2xl font-bold text-blue-600"},Xs={class:"mt-4 pt-4 border-t text-center"},Js={class:"bg-white rounded-lg border p-6"},Ys={class:"flex items-center justify-between mb-4"},Zs={class:"flex items-center gap-2"},ea={key:0,class:"flex items-center justify-center"},ta={key:1,class:"text-right"},sa={class:"flex items-center gap-1"},aa={key:2,class:"bg-white rounded-lg border p-6"},la=["innerHTML"],oa={class:"space-y-6"},na={class:"bg-white rounded-lg border p-6"},ia={class:"space-y-4"},ra={key:0,class:"text-xs ml-2 bg-red-100 text-red-700 px-2 py-1 rounded"},ua={class:"bg-white rounded-lg border p-6"},da={class:"space-y-3"},ca={class:"flex justify-between"},pa={class:"font-medium"},ma={class:"flex justify-between"},va={class:"font-medium"},fa={class:"flex justify-between"},ga={class:"font-medium"},ya={class:"flex justify-between"},_a={class:"font-medium"},xa={class:"bg-white rounded-lg border p-6"},wa={class:"space-y-4"},ha={key:0,class:"flex gap-3"},ba={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},ka={class:"text-xs text-gray-500"},Ca={class:"text-xs text-gray-400"},Sa={key:1,class:"flex gap-3"},Ra={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},$a={class:"text-xs text-gray-500"},Aa={class:"text-xs text-gray-400"},Ta={key:2,class:"flex gap-3"},Da={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},ja={class:"text-xs text-gray-500"},Va={class:"text-xs text-gray-400"},Pa={key:3,class:"flex gap-3"},Ea={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},qa={class:"text-xs text-gray-500"},Ia={class:"text-xs text-gray-400"},La={key:4,class:"flex gap-3"},za={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},Ma={class:"text-xs text-gray-500"},Ua={key:5,class:"text-sm text-gray-500 text-center py-4"},Oa={class:"space-y-4"},Ha={class:"bg-gray-50 p-4 rounded-lg"},Na={class:"text-sm"},Fa={class:"text-sm"},Ka={class:"text-sm"},Ya={__name:"StockTakeDetail",setup(m){const n=Qe(),o=Xe(),r=M(!0),d=M(!1),y=M(!1),s=M(null),$=M(""),C=M(!1),j=M(null),A=M([]),h=M({employee:"",reason:""}),E=M(null),T=M(null);Je(()=>U(this,null,function*(){yield Promise.all([v(),x()])}));function v(){return U(this,null,function*(){r.value=!0;try{const l=yield N("frappe.client.get",{doctype:"Stock Take Audit",name:n.params.id});s.value=l}catch(l){console.error("Error loading audit:",l)}finally{r.value=!1}})}function x(){return U(this,null,function*(){try{const l=yield N("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});A.value=l.map(t=>({label:t.full_name||t.name,value:t.name}))}catch(l){console.error("Error loading users:",l)}})}const b=k(()=>{var t;return{Draft:"subtle","Physical Count Submitted":"yellow","Analyst Reviewed":"blue","HOD Approved":"green","Under Investigation":"red"}[(t=s.value)==null?void 0:t.status]||"subtle"}),W=k(()=>{var l;return!["HOD Approved","Under Investigation"].includes((l=s.value)==null?void 0:l.status)}),K=k(()=>{var q;if(!((q=s.value)!=null&&q.stock_take_items))return!1;const l=s.value.stock_take_items.every(z=>z.physical_quantity!==null),t=s.value.signed_stock_take_copy;return l&&t}),L=k(()=>{var l;return((l=s.value)==null?void 0:l.status)==="Physical Count Submitted"}),J=k(()=>{var l;return((l=s.value)==null?void 0:l.status)==="Analyst Reviewed"}),ke=k(()=>{var l,t;return((t=(l=s.value)==null?void 0:l.stock_take_items)==null?void 0:t.length)||0}),Ce=k(()=>{var l;return(l=s.value)!=null&&l.stock_take_items?s.value.stock_take_items.filter(t=>t.physical_quantity!==null&&t.physical_quantity!==void 0).length:0}),Se=k(()=>{var l;return(l=s.value)!=null&&l.stock_take_items?s.value.stock_take_items.every(t=>t.physical_quantity!==null&&t.physical_quantity!==void 0):!1}),Re=k(()=>{var l;return(l=s.value)!=null&&l.stock_take_items?$.value?s.value.stock_take_items.filter(t=>t.verification_status===$.value):s.value.stock_take_items:[]});function ae(l){var z,g,I,u;const t={1:((z=s.value)==null?void 0:z.status)!=="Draft",2:(g=s.value)==null?void 0:g.physical_count_submitted,3:(I=s.value)==null?void 0:I.analyst_reviewed,4:(u=s.value)==null?void 0:u.hod_approved};return t[l]?"bg-green-500 text-white":(l===1?!0:t[l-1])&&!t[l]?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}function $e(l){return{"Verified-Match":"green","Verified-Discrepancy":"red",Resolved:"blue",Pending:"yellow"}[l]||"subtle"}function Ae(l){return!l||l===0?"green":"red"}function Te(l){return{"Verified-Match":"bg-surface-green-3","Verified-Discrepancy":"bg-surface-red-5",Resolved:"bg-surface-blue-3",Pending:"bg-surface-yellow-3"}[l]||"bg-surface-gray-3"}function De(l){return{"Stock Amendment":"blue","Charge Staff":"red","Write-off":"gray","Under Investigation":"yellow"}[l]||"gray"}function ne(l){return l?new Date(l)<new Date:!1}function le(l){return l?new Date(l).toLocaleDateString():"-"}function Y(l){return l?new Date(l).toLocaleString():"-"}function pe(l){return l==null?"KES 0":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(l)}function je(){return U(this,null,function*(){d.value=!0;try{yield N("run_doc_method",{dt:"Stock Take Audit",dn:n.params.id,method:"submit_physical_count"}),yield v()}catch(l){console.error("Error:",l),alert(l.message)}finally{d.value=!1}})}function Ve(){return U(this,null,function*(){d.value=!0;try{yield N("run_doc_method",{dt:"Stock Take Audit",dn:n.params.id,method:"analyst_review"}),yield v()}catch(l){console.error("Error:",l),alert(l.message)}finally{d.value=!1}})}function Pe(){return U(this,null,function*(){d.value=!0;try{yield N("run_doc_method",{dt:"Stock Take Audit",dn:n.params.id,method:"hod_approve"}),yield v()}catch(l){console.error("Error:",l),alert(l.message)}finally{d.value=!1}})}function Ee(l){j.value=l,h.value={employee:"",reason:`Stock discrepancy for ${l.item_code}`},C.value=!0}function qe(){return U(this,null,function*(){if(!h.value.employee){alert("Please select an employee");return}y.value=!0;try{yield N("run_doc_method",{dt:"Stock Take Audit",dn:n.params.id,method:"create_staff_charge",args:{item_row_name:j.value.name,employee:h.value.employee,charge_reason:h.value.reason}}),C.value=!1,yield v()}catch(l){console.error("Error:",l),alert(l.message)}finally{y.value=!1}})}function Ie(l){window.open(`/app/staff-charge-record/${l}`,"_blank")}function Le(){o.push("/inventory-audit/stock-take")}function ze(){o.push(`/inventory-audit/stock-take/${n.params.id}/edit`)}function Me(){window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=Stock Take Audit&name=${n.params.id}&format=Stock Take Audit Daily Summary`,"_blank")}function Ue(){console.log("Export to Excel")}function Oe(l){return U(this,null,function*(){const t=l.target.files[0];if(!t)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png"].includes(t.type)){alert("Please upload a PDF, DOC, DOCX, JPG, or PNG file");return}const z=10*1024*1024;if(t.size>z){alert("File size must be less than 10MB");return}try{const g=new FormData;g.append("file",t),g.append("is_private","1"),g.append("doctype","Stock Take Audit"),g.append("docname",n.params.id),g.append("fieldname","signed_stock_take_copy");const I=yield fetch("/api/method/upload_file",{method:"POST",body:g,headers:{Accept:"application/json"}});if(!I.ok){const O=yield I.text();throw new Error(`Upload failed: ${I.status} ${O}`)}const u=yield I.json();if(u.message&&u.message.file_url)yield N("frappe.client.set_value",{doctype:"Stock Take Audit",name:n.params.id,fieldname:"signed_stock_take_copy",value:u.message.file_url}),yield v();else throw new Error("Invalid response from server")}catch(g){console.error("Error uploading file:",g),alert("Error uploading file: "+g.message)}})}function me(l){return l?l.split("/").pop():""}function ve(l){l&&window.open(l,"_blank")}function He(){return U(this,null,function*(){if(confirm("Are you sure you want to remove the signed stock take copy?"))try{yield N("frappe.client.set_value",{doctype:"Stock Take Audit",name:n.params.id,fieldname:"signed_stock_take_copy",value:""}),yield v()}catch(l){console.error("Error removing attachment:",l),alert("Error removing attachment: "+l.message)}})}function Ne(l,t){return U(this,null,function*(){if(!T.value){T.value=l.name;try{yield N("frappe.client.set_value",{doctype:"Stock Take Audit Item",name:l.name,fieldname:"physical_quantity",value:Number.parseFloat(t)||0}),yield v()}catch(q){console.error("Error updating physical quantity:",q),alert("Error updating physical quantity: "+q.message)}finally{T.value=null}}})}function Fe(){if(!s.value)return null;const l=s.value.items||[],t=l.filter(g=>g.variance!==0),q=l.reduce((g,I)=>g+I.system_quantity*I.rate,0),z=t.reduce((g,I)=>g+I.variance*I.rate,0);return{page_type:"stock-take",page_title:`Stock Take: ${s.value.name}`,stock_take_type:s.value.stock_take_type,warehouse:s.value.warehouse,audit_date:s.value.audit_date,status:s.value.status,total_items:l.length,items_with_variance:t.length,total_system_value:q,total_variance_value:Math.abs(z),variance_percentage:q>0?Math.abs(z/q*100):0,high_variance_items:t.filter(g=>Math.abs(g.variance)>10).map(g=>({item_code:g.item_code,item_name:g.item_name,system_quantity:g.system_quantity,physical_quantity:g.physical_quantity,variance:g.variance,variance_value:Math.abs(g.variance*g.rate),rate:g.rate})),risk_indicators:{large_variances:t.filter(g=>Math.abs(g.variance)>50).length,high_value_variances:t.filter(g=>Math.abs(g.variance*g.rate)>1e3).length,negative_variances:t.filter(g=>g.variance<0).length,positive_variances:t.filter(g=>g.variance>0).length},summary:{description:`Stock take audit for ${s.value.warehouse} conducted on ${s.value.audit_date}`,key_findings:[`${t.length} out of ${l.length} items have variances`,`Total variance value: ${Math.abs(z).toFixed(2)}`,`Variance percentage: ${(q>0?Math.abs(z/q*100):0).toFixed(2)}%`]}}}return(l,t)=>{var q,z,g,I;return i(),f("div",Nt,[e("div",Ft,[e("div",Kt,[c(a(V),{variant:"ghost",onClick:Le,class:"p-2"},{default:w(()=>[c(a(nt),{class:"w-4 h-4"})]),_:1}),e("div",null,[e("h1",Wt,p(((q=s.value)==null?void 0:q.name)||"Loading..."),1),e("p",Bt,p((z=s.value)==null?void 0:z.stock_take_type)+" | "+p((g=s.value)==null?void 0:g.warehouse)+" | "+p(le((I=s.value)==null?void 0:I.audit_date)),1)])]),e("div",Gt,[c(a(_e),{variant:b.value},{default:w(()=>{var u;return[S(p((u=s.value)==null?void 0:u.status),1)]}),_:1},8,["variant"]),c(lt,{contextType:"stock-take",contextData:Fe()},null,8,["contextData"]),e("div",Qt,[W.value?(i(),R(a(V),{key:0,variant:"outline",onClick:ze},{default:w(()=>[c(a(it),{class:"w-4 h-4 mr-2"}),t[8]||(t[8]=S(" Edit ",-1))]),_:1})):_("",!0),c(a(V),{variant:"outline",onClick:Me},{default:w(()=>[c(a(rt),{class:"w-4 h-4 mr-2"}),t[9]||(t[9]=S(" Print ",-1))]),_:1}),c(a(V),{variant:"outline",size:"sm",onClick:Ue},{default:w(()=>[c(a(ut),{class:"w-4 h-4 mr-2"}),t[10]||(t[10]=S(" Export ",-1))]),_:1})])])]),r.value?(i(),f("div",Xt,[...t[11]||(t[11]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):s.value?(i(),f("div",Jt,[e("div",Yt,[s.value.status==="Draft"?(i(),f("div",Zt,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Stock Take Preparation",-1)),e("div",es,[e("div",ts,[c(a(Z),{class:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),t[12]||(t[12]=e("div",null,[e("h4",{class:"text-sm font-medium text-blue-900 mb-1"},"Stock Taker Tasks"),e("ul",{class:"text-sm text-blue-800 space-y-1"},[e("li",null,"• Enter physical quantities for all items in the table below"),e("li",null,"• Upload the manager-signed physical stock take copy"),e("li",null,"• Review and verify all counts are accurate"),e("li",null,"• Submit for analyst review once everything is complete")])],-1))])]),e("div",ss,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[S(" Signed Stock Take Copy "),e("span",{class:"text-red-500"},"*")],-1)),e("div",as,[s.value.signed_stock_take_copy?(i(),f("div",os,[c(a(ue),{class:"w-8 h-8 text-green-500 mx-auto"}),e("div",null,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-green-700"},"Signed copy attached",-1)),e("p",ns,p(me(s.value.signed_stock_take_copy)),1)]),e("div",is,[c(a(V),{variant:"outline",size:"sm",onClick:t[1]||(t[1]=u=>ve(s.value.signed_stock_take_copy))},{default:w(()=>[c(a(we),{class:"w-4 h-4 mr-2"}),t[16]||(t[16]=S(" View ",-1))]),_:1}),c(a(V),{variant:"outline",size:"sm",onClick:He},{default:w(()=>[c(a(dt),{class:"w-4 h-4 mr-2"}),t[17]||(t[17]=S(" Remove ",-1))]),_:1})])])):(i(),f("div",ls,[c(a(xe),{class:"w-8 h-8 text-gray-400 mx-auto"}),t[14]||(t[14]=e("div",null,[e("p",{class:"text-sm text-gray-600"},"Upload the manager-signed physical stock take copy"),e("p",{class:"text-xs text-gray-500 mt-1"},"PDF, DOC, DOCX, JPG, PNG files accepted")],-1)),e("input",{type:"file",ref_key:"fileInput",ref:E,onChange:Oe,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",class:"hidden"},null,544),c(a(V),{variant:"outline",size:"sm",onClick:t[0]||(t[0]=u=>l.$refs.fileInput.click())},{default:w(()=>[c(a(xe),{class:"w-4 h-4 mr-2"}),t[13]||(t[13]=S(" Choose File ",-1))]),_:1})]))]),t[19]||(t[19]=e("p",{class:"text-xs text-gray-500 mt-2"}," This signed document is required before submitting the physical count for review. ",-1))]),e("div",rs,[t[22]||(t[22]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Physical Count Status",-1)),e("div",us,[e("div",null,[t[20]||(t[20]=e("span",{class:"text-gray-500"},"Items Counted:",-1)),e("span",ds,p(Ce.value)+" / "+p(ke.value),1)]),e("div",null,[t[21]||(t[21]=e("span",{class:"text-gray-500"},"Ready to Submit:",-1)),e("span",{class:D([K.value?"text-green-600 font-medium":"text-red-600","ml-2"])},p(K.value?"Yes":"No"),3)])]),K.value?_("",!0):(i(),f("div",cs,[Se.value?_("",!0):(i(),f("p",ps,"• All items must have physical quantities entered")),s.value.signed_stock_take_copy?_("",!0):(i(),f("p",ms,"• Signed stock take copy must be attached"))]))])])])):_("",!0),s.value.signed_stock_take_copy&&(s.value.status==="Physical Count Submitted"||s.value.status==="Analyst Reviewed"||s.value.status==="HOD Approved")?(i(),f("div",vs,[t[27]||(t[27]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Attached Physical Stock Take",-1)),e("div",fs,[e("div",gs,[c(a(ue),{class:"w-8 h-8 text-blue-500 flex-shrink-0"}),e("div",ys,[t[24]||(t[24]=e("p",{class:"text-sm font-medium text-gray-900"},"Signed Stock Take Copy",-1)),e("p",_s,p(me(s.value.signed_stock_take_copy)),1),t[25]||(t[25]=e("p",{class:"text-xs text-gray-400 mt-1"},"Uploaded during physical count preparation",-1))]),c(a(V),{variant:"outline",size:"sm",onClick:t[2]||(t[2]=u=>ve(s.value.signed_stock_take_copy))},{default:w(()=>[c(a(we),{class:"w-4 h-4 mr-2"}),t[26]||(t[26]=S(" View Document ",-1))]),_:1})])]),t[28]||(t[28]=e("div",{class:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},[e("p",{class:"text-sm text-blue-800"},[e("strong",null,"Note:"),S(" This is the original signed physical stock take document submitted by the stock taker. Review this document to verify the authenticity and completeness of the physical count process. ")])],-1))])):_("",!0),e("div",xs,[t[41]||(t[41]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Approval Workflow",-1)),e("div",ws,[e("div",hs,[e("div",{class:D([ae(1),"w-10 h-10 rounded-full flex items-center justify-center"])},[...t[29]||(t[29]=[e("span",{class:"text-sm font-medium"},"1",-1)])],2),e("div",bs,[t[30]||(t[30]=e("p",{class:"text-sm font-medium"},"Analyst",-1)),e("p",ks,p(s.value.created_by||"Not assigned"),1)])]),e("div",Cs,[e("div",{class:D([s.value.status!=="Draft"?"bg-green-500":"bg-gray-200","h-full rounded"]),style:X({width:s.value.status!=="Draft"?"100%":"0%"})},null,6)]),e("div",Ss,[e("div",{class:D([ae(2),"w-10 h-10 rounded-full flex items-center justify-center"])},[...t[31]||(t[31]=[e("span",{class:"text-sm font-medium"},"2",-1)])],2),e("div",Rs,[t[32]||(t[32]=e("p",{class:"text-sm font-medium"},"Stock Taker",-1)),e("p",$s,p(s.value.physical_count_submitted_by||"Not assigned"),1)])]),e("div",As,[e("div",{class:D([s.value.physical_count_submitted?"bg-green-500":"bg-gray-200","h-full rounded"]),style:X({width:s.value.physical_count_submitted?"100%":"0%"})},null,6)]),e("div",Ts,[e("div",{class:D([ae(3),"w-10 h-10 rounded-full flex items-center justify-center"])},[...t[33]||(t[33]=[e("span",{class:"text-sm font-medium"},"3",-1)])],2),e("div",Ds,[t[34]||(t[34]=e("p",{class:"text-sm font-medium"},"Analyst Review",-1)),e("p",js,p(s.value.stock_analyst||"Not assigned"),1)])]),e("div",Vs,[e("div",{class:D([s.value.analyst_reviewed?"bg-green-500":"bg-gray-200","h-full rounded"]),style:X({width:s.value.analyst_reviewed?"100%":"0%"})},null,6)]),e("div",Ps,[e("div",{class:D([ae(4),"w-10 h-10 rounded-full flex items-center justify-center"])},[...t[35]||(t[35]=[e("span",{class:"text-sm font-medium"},"4",-1)])],2),e("div",Es,[t[36]||(t[36]=e("p",{class:"text-sm font-medium"},"HOD",-1)),e("p",qs,p(s.value.hod_approver||"Not assigned"),1)])])]),e("div",Is,[s.value.status==="Draft"&&K.value?(i(),R(a(V),{key:0,variant:"solid",onClick:je,loading:d.value},{default:w(()=>[c(a(Z),{class:"w-4 h-4 mr-2"}),t[37]||(t[37]=S(" Submit Physical Count ",-1))]),_:1},8,["loading"])):_("",!0),s.value.status==="Physical Count Submitted"&&L.value?(i(),R(a(V),{key:1,variant:"solid",onClick:Ve,loading:d.value},{default:w(()=>[c(a(Z),{class:"w-4 h-4 mr-2"}),t[38]||(t[38]=S(" Analyst Review ",-1))]),_:1},8,["loading"])):_("",!0),s.value.status==="Analyst Reviewed"&&J.value?(i(),R(a(V),{key:2,variant:"solid",onClick:Pe,loading:d.value},{default:w(()=>[c(a(Z),{class:"w-4 h-4 mr-2"}),t[39]||(t[39]=S(" HOD Approve ",-1))]),_:1},8,["loading"])):_("",!0),s.value.status==="HOD Approved"?(i(),f("span",Ls,[c(a(Z),{class:"w-4 h-4 mr-2"}),t[40]||(t[40]=S(" Fully Approved ",-1))])):_("",!0)])]),e("div",zs,[t[48]||(t[48]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Summary",-1)),e("div",Ms,[e("div",Us,[e("p",Os,p(s.value.total_items||0),1),t[42]||(t[42]=e("p",{class:"text-sm text-gray-500"},"Total Items",-1))]),e("div",Hs,[e("p",Ns,p(s.value.items_pending||0),1),t[43]||(t[43]=e("p",{class:"text-sm text-gray-500"},"Pending",-1))]),e("div",Fs,[e("p",Ks,p(s.value.items_verified_match||0),1),t[44]||(t[44]=e("p",{class:"text-sm text-gray-500"},"Matched",-1))]),e("div",Ws,[e("p",Bs,p(s.value.items_verified_discrepancy||0),1),t[45]||(t[45]=e("p",{class:"text-sm text-gray-500"},"Discrepancy",-1))]),e("div",Gs,[e("p",Qs,p(s.value.items_resolved||0),1),t[46]||(t[46]=e("p",{class:"text-sm text-gray-500"},"Resolved",-1))])]),e("div",Xs,[t[47]||(t[47]=e("p",{class:"text-sm text-gray-500"},"Total Variance Value",-1)),e("p",{class:D(["text-2xl font-bold",s.value.total_variance_value>0?"text-red-600":"text-green-600"])},p(pe(s.value.total_variance_value||0)),3)])]),e("div",Js,[e("div",Ys,[t[50]||(t[50]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Stock Take Items",-1)),e("div",Zs,[Ye(e("select",{"onUpdate:modelValue":t[3]||(t[3]=u=>$.value=u),class:"text-sm border rounded px-3 py-1.5"},[...t[49]||(t[49]=[et('<option value="">All Items</option><option value="Pending">Pending</option><option value="Verified-Match">Matched</option><option value="Verified-Discrepancy">Discrepancy</option><option value="Resolved">Resolved</option>',5)])],512),[[Ze,$.value]])])]),c(a(Ht),{columns:[{label:"#",key:"index",width:"60px"},{label:"Item",key:"item",width:"2fr"},{label:"System Qty",key:"system_quantity",width:"120px",align:"right"},{label:"Physical Qty",key:"physical_quantity",width:"140px",align:"right"},{label:"Variance",key:"variance",width:"120px",align:"right"},{label:"Status",key:"status",width:"140px"},{label:"Resolution",key:"resolution",width:"140px"},{label:"Actions",key:"actions",width:"120px"}],rows:Re.value.map((u,O)=>({id:u.name,index:{label:(O+1).toString()},item:{label:u.item_code,description:u.item_description},system_quantity:{label:(u.system_quantity||0).toString()},physical_quantity:{label:s.value.status==="Draft"?"":u.physical_quantity!==null?u.physical_quantity.toString():"-",editable:s.value.status==="Draft",value:u.physical_quantity},variance:{label:(u.variance_quantity||0).toString(),color:Ae(u.variance_quantity)},status:{label:u.verification_status||"Pending",bg_color:Te(u.verification_status)},resolution:{label:u.resolution_type||"-",color:De(u.resolution_type)},actions:{item:u}})),options:{onRowClick:u=>console.log(u),selectable:!1,showTooltip:!0,resizeColumn:!1},"row-key":"id"},{physical_quantity:w(({item:u})=>[s.value.status==="Draft"?(i(),f("div",ea,[c(a(re),{type:"number",modelValue:u.value,"onUpdate:modelValue":O=>Ne(u.item,O),placeholder:"Count",class:"w-20 text-right",disabled:T.value===u.item.name},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(i(),f("div",ta,p(u.label),1))]),status:w(({item:u})=>[c(a(_e),{variant:$e(u.label)},{default:w(()=>[S(p(u.label),1)]),_:2},1032,["variant"])]),actions:w(({item:u})=>[e("div",sa,[u.item.resolution_type==="Charge Staff"&&!u.item.staff_charge_record?(i(),R(a(V),{key:0,variant:"ghost",size:"sm",onClick:O=>Ee(u.item),title:"Create Staff Charge",class:"p-1"},{default:w(()=>[c(a(ct),{class:"w-4 h-4 text-red-600"})]),_:1},8,["onClick"])):_("",!0),u.item.staff_charge_record?(i(),R(a(V),{key:1,variant:"ghost",size:"sm",onClick:O=>Ie(u.item.staff_charge_record),title:"View Staff Charge",class:"p-1"},{default:w(()=>[c(a(ue),{class:"w-4 h-4 text-blue-600"})]),_:1},8,["onClick"])):_("",!0)])]),"empty-state":w(()=>[...t[51]||(t[51]=[e("div",{class:"text-center py-8 text-gray-500"}," No items found ",-1)])]),_:1},8,["rows","options"])]),s.value.notes?(i(),f("div",aa,[t[52]||(t[52]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),e("div",{class:"prose max-w-none text-gray-600",innerHTML:s.value.notes},null,8,la)])):_("",!0)]),e("div",oa,[e("div",na,[t[55]||(t[55]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Deadlines",-1)),e("div",ia,[e("div",null,[t[53]||(t[53]=e("p",{class:"text-sm text-gray-500"},"Resolution Deadline",-1)),e("p",{class:D(["font-medium",ne(s.value.resolution_deadline)?"text-red-600":""])},[S(p(le(s.value.resolution_deadline))+" ",1),ne(s.value.resolution_deadline)?(i(),f("span",ra,"OVERDUE")):_("",!0)],2)]),e("div",null,[t[54]||(t[54]=e("p",{class:"text-sm text-gray-500"},"Investigation Deadline",-1)),e("p",{class:D(["font-medium",ne(s.value.investigation_deadline)?"text-red-600":""])},p(le(s.value.investigation_deadline)),3)])])]),e("div",ua,[t[60]||(t[60]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Stock Take Info",-1)),e("div",da,[e("div",ca,[t[56]||(t[56]=e("span",{class:"text-gray-500"},"Stock Take Type",-1)),e("span",pa,p(s.value.stock_take_type),1)]),e("div",ma,[t[57]||(t[57]=e("span",{class:"text-gray-500"},"Warehouse",-1)),e("span",va,p(s.value.warehouse),1)]),e("div",fa,[t[58]||(t[58]=e("span",{class:"text-gray-500"},"Branch",-1)),e("span",ga,p(s.value.branch||"-"),1)]),e("div",ya,[t[59]||(t[59]=e("span",{class:"text-gray-500"},"Audit Date",-1)),e("span",_a,p(le(s.value.audit_date)),1)])])]),e("div",xa,[t[66]||(t[66]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Approval Timeline",-1)),e("div",wa,[s.value.status!=="Draft"?(i(),f("div",ha,[e("div",ba,[c(a(ee),{class:"w-4 h-4 text-green-600"})]),e("div",null,[t[61]||(t[61]=e("p",{class:"font-medium text-sm"},"Data Imported",-1)),e("p",ka,p(Y(s.value.import_date)),1),e("p",Ca,p(s.value.created_by),1)])])):_("",!0),s.value.physical_count_submitted_date?(i(),f("div",Sa,[e("div",Ra,[c(a(ee),{class:"w-4 h-4 text-green-600"})]),e("div",null,[t[62]||(t[62]=e("p",{class:"font-medium text-sm"},"Physical Count Submitted",-1)),e("p",$a,p(Y(s.value.physical_count_submitted_date)),1),e("p",Aa,p(s.value.physical_count_submitted_by),1)])])):_("",!0),s.value.analyst_review_date?(i(),f("div",Ta,[e("div",Da,[c(a(ee),{class:"w-4 h-4 text-green-600"})]),e("div",null,[t[63]||(t[63]=e("p",{class:"font-medium text-sm"},"Analyst Reviewed",-1)),e("p",ja,p(Y(s.value.analyst_review_date)),1),e("p",Va,p(s.value.stock_analyst),1)])])):_("",!0),s.value.hod_approval_date?(i(),f("div",Pa,[e("div",Ea,[c(a(ee),{class:"w-4 h-4 text-green-600"})]),e("div",null,[t[64]||(t[64]=e("p",{class:"font-medium text-sm"},"HOD Approved",-1)),e("p",qa,p(Y(s.value.hod_approval_date)),1),e("p",Ia,p(s.value.hod_approver),1)])])):_("",!0),s.value.final_report_date?(i(),f("div",La,[e("div",za,[c(a(ee),{class:"w-4 h-4 text-green-600"})]),e("div",null,[t[65]||(t[65]=e("p",{class:"font-medium text-sm"},"Report Generated",-1)),e("p",Ma,p(Y(s.value.final_report_date)),1)])])):_("",!0),s.value.status==="Draft"&&!s.value.physical_count_submitted_date&&!s.value.analyst_review_date&&!s.value.hod_approval_date?(i(),f("div",Ua," No actions yet ")):_("",!0)])])])])):_("",!0),c(a(ot),{modelValue:C.value,"onUpdate:modelValue":t[7]||(t[7]=u=>C.value=u),options:{title:"Create Staff Charge"}},{"body-content":w(()=>{var u,O,fe,ge;return[e("div",Oa,[e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Employee to Charge",-1)),c(a(re),{type:"select",modelValue:h.value.employee,"onUpdate:modelValue":t[4]||(t[4]=ie=>h.value.employee=ie),options:A.value,placeholder:"Select employee"},null,8,["modelValue","options"])]),e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Charge Reason",-1)),c(a(re),{type:"textarea",modelValue:h.value.reason,"onUpdate:modelValue":t[5]||(t[5]=ie=>h.value.reason=ie),placeholder:"Reason for the charge...",rows:3},null,8,["modelValue"])]),e("div",Ha,[e("p",Na,[t[69]||(t[69]=e("strong",null,"Item:",-1)),S(" "+p((u=j.value)==null?void 0:u.item_code)+" - "+p((O=j.value)==null?void 0:O.item_description),1)]),e("p",Fa,[t[70]||(t[70]=e("strong",null,"Variance:",-1)),S(" "+p((fe=j.value)==null?void 0:fe.variance_quantity)+" units",1)]),e("p",Ka,[t[71]||(t[71]=e("strong",null,"Charge Amount:",-1)),S(" "+p(pe(Math.abs(((ge=j.value)==null?void 0:ge.variance_value)||0))),1)])])])]}),actions:w(()=>[c(a(V),{variant:"outline",onClick:t[6]||(t[6]=u=>C.value=!1)},{default:w(()=>[...t[72]||(t[72]=[S(" Cancel ",-1)])]),_:1}),c(a(V),{variant:"solid",onClick:qe,loading:y.value},{default:w(()=>[...t[73]||(t[73]=[S(" Create Charge ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])])}}};export{Ya as default};
//# sourceMappingURL=StockTakeDetail-BeV489Ua.js.map
