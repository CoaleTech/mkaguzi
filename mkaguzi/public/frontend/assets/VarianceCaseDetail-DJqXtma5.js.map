{"version":3,"file":"VarianceCaseDetail-DJqXtma5.js","sources":["../../../../frontend/src/pages/inventory/VarianceCaseDetail.vue"],"sourcesContent":["<template>\n  <div class=\"p-6\">\n    <!-- Header -->\n    <div class=\"flex items-center justify-between mb-6\">\n      <div class=\"flex items-center gap-4\">\n        <Button variant=\"ghost\" @click=\"goBack\">\n          <ArrowLeft class=\"w-5 h-5\" />\n        </Button>\n        <div>\n          <h1 class=\"text-2xl font-bold text-gray-900\">{{ varianceCase?.name || 'Loading...' }}</h1>\n          <p class=\"text-gray-500 mt-1\">Inventory Variance Case</p>\n        </div>\n      </div>\n      <div class=\"flex items-center gap-2\">\n        <Badge :variant=\"statusVariant\">{{ varianceCase?.status }}</Badge>\n        <Badge :variant=\"priorityVariant\">{{ varianceCase?.priority }} Priority</Badge>\n        <AskAIButton contextType=\"variance-case\" :contextData=\"getVarianceCaseContext()\" />\n        <Button variant=\"outline\" @click=\"editCase\">\n          <Edit class=\"w-4 h-4 mr-2\" />\n          Edit\n        </Button>\n      </div>\n    </div>\n\n    <div v-if=\"loading\" class=\"flex items-center justify-center py-20\">\n      <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n    </div>\n\n    <div v-else-if=\"varianceCase\" class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n      <!-- Main Content -->\n      <div class=\"lg:col-span-2 space-y-6\">\n        <!-- Variance Overview -->\n        <div class=\"bg-white rounded-lg border p-6\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Variance Details</h3>\n          <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div>\n              <span class=\"text-sm text-gray-500\">Item Code</span>\n              <p class=\"font-medium font-mono\">{{ varianceCase.item_code }}</p>\n            </div>\n            <div>\n              <span class=\"text-sm text-gray-500\">Item Name</span>\n              <p class=\"font-medium\">{{ varianceCase.item_name || '-' }}</p>\n            </div>\n            <div>\n              <span class=\"text-sm text-gray-500\">Warehouse</span>\n              <p class=\"font-medium\">{{ varianceCase.warehouse || '-' }}</p>\n            </div>\n            <div>\n              <span class=\"text-sm text-gray-500\">Branch</span>\n              <p class=\"font-medium\">{{ varianceCase.branch || '-' }}</p>\n            </div>\n          </div>\n          \n          <!-- Variance Breakdown -->\n          <div class=\"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div class=\"p-4 bg-blue-50 rounded-lg\">\n              <span class=\"text-sm text-blue-700\">System Qty</span>\n              <p class=\"text-2xl font-bold text-blue-800\">{{ varianceCase.system_qty || 0 }}</p>\n            </div>\n            <div class=\"p-4 bg-green-50 rounded-lg\">\n              <span class=\"text-sm text-green-700\">Counted Qty</span>\n              <p class=\"text-2xl font-bold text-green-800\">{{ varianceCase.counted_qty || 0 }}</p>\n            </div>\n            <div :class=\"['p-4 rounded-lg', varianceQtyClass]\">\n              <span :class=\"['text-sm', varianceTextClass]\">Variance Qty</span>\n              <p :class=\"['text-2xl font-bold', varianceTextClass]\">\n                {{ varianceCase.variance_qty > 0 ? '+' : '' }}{{ varianceCase.variance_qty || 0 }}\n              </p>\n            </div>\n            <div :class=\"['p-4 rounded-lg', varianceQtyClass]\">\n              <span :class=\"['text-sm', varianceTextClass]\">Variance Value</span>\n              <p :class=\"['text-2xl font-bold', varianceTextClass]\">\n                {{ formatCurrency(varianceCase.variance_value) }}\n              </p>\n            </div>\n          </div>\n\n          <!-- Variance Type -->\n          <div class=\"mt-4 p-4 border rounded-lg\">\n            <div class=\"flex items-center gap-3\">\n              <div :class=\"['w-10 h-10 rounded-full flex items-center justify-center', varianceIconBg]\">\n                <TrendingDown v-if=\"varianceCase.variance_qty < 0\" class=\"w-5 h-5 text-red-600\" />\n                <TrendingUp v-else class=\"w-5 h-5 text-green-600\" />\n              </div>\n              <div>\n                <p class=\"font-medium\">\n                  {{ varianceCase.variance_qty < 0 ? 'Shortage' : 'Overage' }}\n                </p>\n                <p class=\"text-sm text-gray-500\">\n                  {{ Math.abs(varianceCase.variance_qty) }} units \n                  {{ varianceCase.variance_qty < 0 ? 'less' : 'more' }} than system\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Investigation Section -->\n        <div class=\"bg-white rounded-lg border p-6\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Investigation</h3>\n          \n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Root Cause</label>\n              <div class=\"p-3 bg-gray-50 rounded-lg\">\n                {{ varianceCase.root_cause || 'Not yet determined' }}\n              </div>\n            </div>\n            \n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Investigation Notes</label>\n              <div class=\"p-3 bg-gray-50 rounded-lg whitespace-pre-wrap\">\n                {{ varianceCase.investigation_notes || 'No investigation notes' }}\n              </div>\n            </div>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 mb-1\">Assigned Investigator</label>\n                <div class=\"p-3 bg-gray-50 rounded-lg\">\n                  {{ varianceCase.assigned_to || 'Not assigned' }}\n                </div>\n              </div>\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 mb-1\">Due Date</label>\n                <div class=\"p-3 bg-gray-50 rounded-lg\">\n                  {{ formatDate(varianceCase.due_date) || 'Not set' }}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Resolution Section -->\n        <div v-if=\"varianceCase.status === 'Resolved' || varianceCase.resolution_type\" class=\"bg-white rounded-lg border p-6\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Resolution</h3>\n          \n          <div class=\"space-y-4\">\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 mb-1\">Resolution Type</label>\n                <Badge :variant=\"getResolutionVariant(varianceCase.resolution_type)\">\n                  {{ varianceCase.resolution_type || '-' }}\n                </Badge>\n              </div>\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 mb-1\">Resolved Date</label>\n                <p class=\"font-medium\">{{ formatDate(varianceCase.resolved_date) || '-' }}</p>\n              </div>\n            </div>\n            \n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Resolution Notes</label>\n              <div class=\"p-3 bg-gray-50 rounded-lg whitespace-pre-wrap\">\n                {{ varianceCase.resolution_notes || 'No resolution notes' }}\n              </div>\n            </div>\n\n            <div v-if=\"varianceCase.adjustment_entry\" class=\"p-4 border rounded-lg\">\n              <div class=\"flex items-center justify-between\">\n                <div class=\"flex items-center gap-3\">\n                  <FileText class=\"w-5 h-5 text-blue-600\" />\n                  <div>\n                    <p class=\"font-medium\">Stock Adjustment Entry</p>\n                    <p class=\"text-sm text-gray-500\">{{ varianceCase.adjustment_entry }}</p>\n                  </div>\n                </div>\n                <Button variant=\"outline\" size=\"sm\" @click=\"viewAdjustment\">\n                  <ExternalLink class=\"w-4 h-4 mr-1\" />\n                  View\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Evidence Section -->\n        <div class=\"bg-white rounded-lg border p-6\">\n          <div class=\"flex items-center justify-between mb-4\">\n            <h3 class=\"text-lg font-semibold text-gray-900\">Evidence & Attachments</h3>\n            <Button variant=\"outline\" size=\"sm\" @click=\"addEvidence\">\n              <Upload class=\"w-4 h-4 mr-2\" />\n              Add Evidence\n            </Button>\n          </div>\n          \n          <div v-if=\"evidence.length > 0\" class=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n            <div \n              v-for=\"item in evidence\" \n              :key=\"item.name\"\n              class=\"p-4 border rounded-lg\"\n            >\n              <div class=\"flex items-center gap-3 mb-2\">\n                <Image v-if=\"isImage(item.file_url)\" class=\"w-5 h-5 text-gray-500\" />\n                <FileText v-else class=\"w-5 h-5 text-gray-500\" />\n                <span class=\"text-sm font-medium truncate\">{{ item.file_name }}</span>\n              </div>\n              <div class=\"flex items-center gap-2\">\n                <Button variant=\"ghost\" size=\"sm\" @click=\"previewFile(item)\">\n                  <Eye class=\"w-4 h-4\" />\n                </Button>\n                <Button variant=\"ghost\" size=\"sm\" @click=\"downloadFile(item)\">\n                  <Download class=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n          \n          <div v-else class=\"text-center py-8 text-gray-500\">\n            <Camera class=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n            <p>No evidence attached yet</p>\n          </div>\n        </div>\n\n        <!-- Comments/Activity -->\n        <div class=\"bg-white rounded-lg border p-6\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Activity</h3>\n          \n          <div v-if=\"comments.length > 0\" class=\"space-y-4\">\n            <div \n              v-for=\"comment in comments\" \n              :key=\"comment.name\"\n              class=\"flex gap-3\"\n            >\n              <div class=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n                <User class=\"w-4 h-4 text-blue-600\" />\n              </div>\n              <div class=\"flex-1\">\n                <div class=\"flex items-center gap-2 mb-1\">\n                  <span class=\"font-medium text-sm\">{{ comment.comment_by }}</span>\n                  <span class=\"text-xs text-gray-500\">{{ formatDateTime(comment.creation) }}</span>\n                </div>\n                <p class=\"text-sm text-gray-700\">{{ comment.content }}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div v-else class=\"text-center py-4 text-gray-500\">\n            <p>No activity yet</p>\n          </div>\n\n          <!-- Add Comment -->\n          <div class=\"mt-4 pt-4 border-t\">\n            <div class=\"flex gap-2\">\n              <FormControl\n                type=\"textarea\"\n                v-model=\"newComment\"\n                placeholder=\"Add a comment...\"\n                :rows=\"2\"\n                class=\"flex-1\"\n              />\n              <Button variant=\"solid\" @click=\"addComment\" :disabled=\"!newComment.trim()\">\n                <Send class=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Sidebar -->\n      <div class=\"space-y-6\">\n        <!-- Quick Actions -->\n        <div class=\"bg-white rounded-lg border p-6\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Actions</h3>\n          <div class=\"space-y-2\">\n            <Button \n              v-if=\"varianceCase.status === 'Open'\"\n              variant=\"solid\" \n              class=\"w-full justify-start\"\n              @click=\"startInvestigation\"\n            >\n              <Search class=\"w-4 h-4 mr-2\" />\n              Start Investigation\n            </Button>\n            <Button \n              v-if=\"varianceCase.status === 'Under Investigation'\"\n              variant=\"solid\" \n              class=\"w-full justify-start\"\n              @click=\"resolveCase\"\n            >\n              <CheckCircle class=\"w-4 h-4 mr-2\" />\n              Mark as Resolved\n            </Button>\n            <Button \n              v-if=\"varianceCase.status === 'Under Investigation'\"\n              variant=\"outline\" \n              class=\"w-full justify-start\"\n              @click=\"createAdjustment\"\n            >\n              <FileText class=\"w-4 h-4 mr-2\" />\n              Create Stock Adjustment\n            </Button>\n            <Button \n              v-if=\"varianceCase.status === 'Under Investigation'\"\n              variant=\"outline\" \n              class=\"w-full justify-start text-orange-600\"\n              @click=\"writeOff\"\n            >\n              <AlertTriangle class=\"w-4 h-4 mr-2\" />\n              Write Off\n            </Button>\n          </div>\n        </div>\n\n        <!-- Linked Documents -->\n        <div class=\"bg-white rounded-lg border p-6\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Linked Documents</h3>\n          <div class=\"space-y-3\">\n            <div \n              v-if=\"varianceCase.stock_take_session\"\n              class=\"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100\"\n              @click=\"viewSession\"\n            >\n              <div class=\"flex items-center gap-2\">\n                <ClipboardList class=\"w-4 h-4 text-gray-500\" />\n                <span class=\"text-sm font-medium\">Stock Take Session</span>\n              </div>\n              <p class=\"text-sm text-gray-500 mt-1\">{{ varianceCase.stock_take_session }}</p>\n            </div>\n            \n            <div \n              v-if=\"varianceCase.audit_plan\"\n              class=\"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100\"\n              @click=\"viewAuditPlan\"\n            >\n              <div class=\"flex items-center gap-2\">\n                <Calendar class=\"w-4 h-4 text-gray-500\" />\n                <span class=\"text-sm font-medium\">Audit Plan</span>\n              </div>\n              <p class=\"text-sm text-gray-500 mt-1\">{{ varianceCase.audit_plan }}</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Timeline -->\n        <div class=\"bg-white rounded-lg border p-6\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Timeline</h3>\n          <div class=\"space-y-4\">\n            <div class=\"flex gap-3\">\n              <div class=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n                <Plus class=\"w-4 h-4 text-blue-600\" />\n              </div>\n              <div>\n                <p class=\"font-medium text-sm\">Created</p>\n                <p class=\"text-xs text-gray-500\">{{ formatDateTime(varianceCase.creation) }}</p>\n              </div>\n            </div>\n            \n            <div v-if=\"varianceCase.investigation_start_date\" class=\"flex gap-3\">\n              <div class=\"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0\">\n                <Search class=\"w-4 h-4 text-yellow-600\" />\n              </div>\n              <div>\n                <p class=\"font-medium text-sm\">Investigation Started</p>\n                <p class=\"text-xs text-gray-500\">{{ formatDate(varianceCase.investigation_start_date) }}</p>\n              </div>\n            </div>\n            \n            <div v-if=\"varianceCase.resolved_date\" class=\"flex gap-3\">\n              <div class=\"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0\">\n                <CheckCircle class=\"w-4 h-4 text-green-600\" />\n              </div>\n              <div>\n                <p class=\"font-medium text-sm\">Resolved</p>\n                <p class=\"text-xs text-gray-500\">{{ formatDate(varianceCase.resolved_date) }}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { Badge, Button, FormControl } from \"frappe-ui\"\nimport { call } from \"frappe-ui\"\nimport {\n\tAlertTriangle,\n\tArrowLeft,\n\tCalendar,\n\tCamera,\n\tCheckCircle,\n\tClipboardList,\n\tDownload,\n\tEdit,\n\tExternalLink,\n\tEye,\n\tFileText,\n\tImage,\n\tPlus,\n\tSearch,\n\tSend,\n\tTrendingDown,\n\tTrendingUp,\n\tUpload,\n\tUser,\n} from \"lucide-vue-next\"\nimport AskAIButton from \"@/components/AskAIButton.vue\"\nimport { computed, onMounted, ref } from \"vue\"\nimport { useRoute, useRouter } from \"vue-router\"\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst loading = ref(true)\nconst varianceCase = ref(null)\nconst evidence = ref([])\nconst comments = ref([])\nconst newComment = ref(\"\")\n\nonMounted(async () => {\n\tawait Promise.all([loadVarianceCase(), loadEvidence(), loadComments()])\n})\n\nasync function loadVarianceCase() {\n\tloading.value = true\n\ttry {\n\t\tconst doc = await call(\"frappe.client.get\", {\n\t\t\tdoctype: \"Inventory Variance Case\",\n\t\t\tname: route.params.id,\n\t\t})\n\t\tvarianceCase.value = doc\n\t} catch (error) {\n\t\tconsole.error(\"Error loading variance case:\", error)\n\t} finally {\n\t\tloading.value = false\n\t}\n}\n\nasync function loadEvidence() {\n\ttry {\n\t\tconst files = await call(\"frappe.client.get_list\", {\n\t\t\tdoctype: \"File\",\n\t\t\tfilters: {\n\t\t\t\tattached_to_doctype: \"Inventory Variance Case\",\n\t\t\t\tattached_to_name: route.params.id,\n\t\t\t},\n\t\t\tfields: [\"name\", \"file_name\", \"file_url\"],\n\t\t})\n\t\tevidence.value = files\n\t} catch (error) {\n\t\tconsole.error(\"Error loading evidence:\", error)\n\t}\n}\n\nasync function loadComments() {\n\ttry {\n\t\tconst result = await call(\"frappe.client.get_list\", {\n\t\t\tdoctype: \"Comment\",\n\t\t\tfilters: {\n\t\t\t\treference_doctype: \"Inventory Variance Case\",\n\t\t\t\treference_name: route.params.id,\n\t\t\t\tcomment_type: \"Comment\",\n\t\t\t},\n\t\t\tfields: [\"name\", \"content\", \"comment_by\", \"creation\"],\n\t\t\torder_by: \"creation desc\",\n\t\t})\n\t\tcomments.value = result\n\t} catch (error) {\n\t\tconsole.error(\"Error loading comments:\", error)\n\t}\n}\n\nconst statusVariant = computed(() => {\n\tconst variants = {\n\t\tOpen: \"warning\",\n\t\t\"Under Investigation\": \"outline\",\n\t\tResolved: \"success\",\n\t\t\"Written Off\": \"subtle\",\n\t\tClosed: \"subtle\",\n\t}\n\treturn variants[varianceCase.value?.status] || \"subtle\"\n})\n\nconst priorityVariant = computed(() => {\n\tconst variants = {\n\t\tCritical: \"solid\",\n\t\tHigh: \"warning\",\n\t\tMedium: \"outline\",\n\t\tLow: \"subtle\",\n\t}\n\treturn variants[varianceCase.value?.priority] || \"subtle\"\n})\n\nconst varianceQtyClass = computed(() => {\n\tif (!varianceCase.value) return \"bg-gray-50\"\n\treturn varianceCase.value.variance_qty < 0 ? \"bg-red-50\" : \"bg-green-50\"\n})\n\nconst varianceTextClass = computed(() => {\n\tif (!varianceCase.value) return \"text-gray-700\"\n\treturn varianceCase.value.variance_qty < 0 ? \"text-red-700\" : \"text-green-700\"\n})\n\nconst varianceIconBg = computed(() => {\n\tif (!varianceCase.value) return \"bg-gray-100\"\n\treturn varianceCase.value.variance_qty < 0 ? \"bg-red-100\" : \"bg-green-100\"\n})\n\nfunction formatDate(date) {\n\tif (!date) return \"-\"\n\treturn new Date(date).toLocaleDateString()\n}\n\nfunction formatDateTime(datetime) {\n\tif (!datetime) return \"-\"\n\treturn new Date(datetime).toLocaleString()\n}\n\nfunction formatCurrency(value) {\n\tif (value === null || value === undefined) return \"-\"\n\treturn new Intl.NumberFormat(\"en-KE\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"KES\",\n\t}).format(value)\n}\n\nfunction getResolutionVariant(type) {\n\tconst variants = {\n\t\tAdjusted: \"success\",\n\t\t\"Written Off\": \"warning\",\n\t\t\"No Action Required\": \"subtle\",\n\t\tTransferred: \"outline\",\n\t}\n\treturn variants[type] || \"subtle\"\n}\n\nfunction isImage(url) {\n\tif (!url) return false\n\treturn /\\.(jpg|jpeg|png|gif|webp)$/i.test(url)\n}\n\nfunction goBack() {\n\trouter.push(\"/inventory-audit/variance-cases\")\n}\n\nfunction editCase() {\n\trouter.push(`/inventory-audit/variance-cases/${route.params.id}/edit`)\n}\n\nfunction viewSession() {\n\tif (varianceCase.value?.stock_take_session) {\n\t\trouter.push(\n\t\t\t`/inventory-audit/sessions/${varianceCase.value.stock_take_session}`,\n\t\t)\n\t}\n}\n\nfunction viewAuditPlan() {\n\tif (varianceCase.value?.audit_plan) {\n\t\trouter.push(`/inventory-audit/plans/${varianceCase.value.audit_plan}`)\n\t}\n}\n\nfunction viewAdjustment() {\n\tif (varianceCase.value?.adjustment_entry) {\n\t\twindow.open(\n\t\t\t`/app/stock-entry/${varianceCase.value.adjustment_entry}`,\n\t\t\t\"_blank\",\n\t\t)\n\t}\n}\n\nasync function startInvestigation() {\n\ttry {\n\t\tawait call(\"frappe.client.set_value\", {\n\t\t\tdoctype: \"Inventory Variance Case\",\n\t\t\tname: route.params.id,\n\t\t\tfieldname: {\n\t\t\t\tstatus: \"Under Investigation\",\n\t\t\t\tinvestigation_start_date: new Date().toISOString().split(\"T\")[0],\n\t\t\t},\n\t\t})\n\t\tawait loadVarianceCase()\n\t} catch (error) {\n\t\tconsole.error(\"Error starting investigation:\", error)\n\t}\n}\n\nasync function resolveCase() {\n\t// Navigate to resolution form\n\trouter.push(`/inventory-audit/variance-cases/${route.params.id}/resolve`)\n}\n\nfunction createAdjustment() {\n\t// Navigate to create stock adjustment\n\twindow.open(\n\t\t`/app/stock-entry/new-stock-entry-1?from_variance_case=${route.params.id}`,\n\t\t\"_blank\",\n\t)\n}\n\nasync function writeOff() {\n\tif (!confirm(\"Are you sure you want to write off this variance?\")) return\n\n\ttry {\n\t\tawait call(\"frappe.client.set_value\", {\n\t\t\tdoctype: \"Inventory Variance Case\",\n\t\t\tname: route.params.id,\n\t\t\tfieldname: {\n\t\t\t\tstatus: \"Written Off\",\n\t\t\t\tresolution_type: \"Written Off\",\n\t\t\t\tresolved_date: new Date().toISOString().split(\"T\")[0],\n\t\t\t},\n\t\t})\n\t\tawait loadVarianceCase()\n\t} catch (error) {\n\t\tconsole.error(\"Error writing off:\", error)\n\t}\n}\n\nfunction addEvidence() {\n\t// Trigger file upload\n\tconsole.log(\"Add evidence - implement file upload\")\n}\n\nfunction previewFile(item) {\n\twindow.open(item.file_url, \"_blank\")\n}\n\nfunction downloadFile(item) {\n\tconst a = document.createElement(\"a\")\n\ta.href = item.file_url\n\ta.download = item.file_name\n\ta.click()\n}\n\nasync function addComment() {\n\tif (!newComment.value.trim()) return\n\n\ttry {\n\t\tawait call(\"frappe.client.insert\", {\n\t\t\tdoc: {\n\t\t\t\tdoctype: \"Comment\",\n\t\t\t\tcomment_type: \"Comment\",\n\t\t\t\treference_doctype: \"Inventory Variance Case\",\n\t\t\t\treference_name: route.params.id,\n\t\t\t\tcontent: newComment.value,\n\t\t\t},\n\t\t})\n\t\tnewComment.value = \"\"\n\t\tawait loadComments()\n\t} catch (error) {\n\t\tconsole.error(\"Error adding comment:\", error)\n\t}\n}\n\nfunction getVarianceCaseContext() {\n\tif (!varianceCase.value) return null\n\n\tconst varianceValue = Math.abs(varianceCase.value.variance_quantity * varianceCase.value.rate)\n\tconst isPositive = varianceCase.value.variance_quantity > 0\n\tconst isHighValue = varianceValue > 1000\n\n\treturn {\n\t\tpage_type: 'variance-case',\n\t\tpage_title: `Variance Case: ${varianceCase.value.name}`,\n\t\titem_code: varianceCase.value.item_code,\n\t\titem_name: varianceCase.value.item_name,\n\t\twarehouse: varianceCase.value.warehouse,\n\t\tbranch: varianceCase.value.branch,\n\t\tstatus: varianceCase.value.status,\n\t\tpriority: varianceCase.value.priority,\n\t\tsystem_quantity: varianceCase.value.system_quantity,\n\t\tphysical_quantity: varianceCase.value.physical_quantity,\n\t\tvariance_quantity: varianceCase.value.variance_quantity,\n\t\tvariance_value: varianceValue,\n\t\trate: varianceCase.value.rate,\n\t\tvariance_type: isPositive ? 'positive' : 'negative',\n\t\tis_high_value: isHighValue,\n\t\treported_date: varianceCase.value.reported_date,\n\t\tinvestigation_status: varianceCase.value.investigation_status,\n\t\troot_cause: varianceCase.value.root_cause,\n\t\tcorrective_action: varianceCase.value.corrective_action,\n\t\tresponsible_person: varianceCase.value.responsible_person,\n\t\ttarget_resolution_date: varianceCase.value.target_resolution_date,\n\t\tactual_resolution_date: varianceCase.value.actual_resolution_date,\n\t\tevidence_count: evidence.value.length,\n\t\tcomments_count: comments.value.length,\n\t\trisk_assessment: {\n\t\t\tfinancial_impact: varianceValue,\n\t\t\toperational_impact: isHighValue ? 'high' : 'medium',\n\t\t\turgency: varianceCase.value.priority === 'High' ? 'high' : varianceCase.value.priority === 'Medium' ? 'medium' : 'low',\n\t\t\tlikelihood_of_fraud: varianceCase.value.suspected_fraud ? 'high' : 'low'\n\t\t},\n\t\tinvestigation_details: {\n\t\t\thas_evidence: evidence.value.length > 0,\n\t\t\thas_comments: comments.value.length > 0,\n\t\t\thas_root_cause: !!varianceCase.value.root_cause,\n\t\t\thas_corrective_action: !!varianceCase.value.corrective_action,\n\t\t\tis_overdue: varianceCase.value.target_resolution_date && new Date(varianceCase.value.target_resolution_date) < new Date()\n\t\t},\n\t\tsummary: {\n\t\t\tdescription: `${isPositive ? 'Positive' : 'Negative'} variance of ${Math.abs(varianceCase.value.variance_quantity)} units for ${varianceCase.value.item_name} in ${varianceCase.value.warehouse}`,\n\t\t\tkey_findings: [\n\t\t\t\t`Variance Value: $${varianceValue.toFixed(2)}`,\n\t\t\t\t`Priority: ${varianceCase.value.priority}`,\n\t\t\t\t`Status: ${varianceCase.value.status}`,\n\t\t\t\t`Evidence Available: ${evidence.value.length} items`\n\t\t\t]\n\t\t}\n\t}\n}\n</script>\n"],"names":["route","useRoute","router","useRouter","loading","ref","varianceCase","evidence","comments","newComment","onMounted","__async","loadVarianceCase","loadEvidence","loadComments","doc","call","error","files","result","statusVariant","computed","_a","priorityVariant","varianceQtyClass","varianceTextClass","varianceIconBg","formatDate","date","formatDateTime","datetime","formatCurrency","value","getResolutionVariant","type","isImage","url","goBack","editCase","viewSession","viewAuditPlan","viewAdjustment","startInvestigation","resolveCase","createAdjustment","writeOff","addEvidence","previewFile","item","downloadFile","a","addComment","getVarianceCaseContext","varianceValue","isPositive","isHighValue","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_unref","Button","ArrowLeft","_hoisted_4","_toDisplayString","_cache","_hoisted_5","Badge","_createTextVNode","AskAIButton","Edit","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_createBlock","TrendingDown","TrendingUp","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","FileText","_hoisted_39","ExternalLink","_hoisted_40","_hoisted_41","Upload","_hoisted_42","_Fragment","_renderList","_hoisted_43","Image","_hoisted_44","_hoisted_45","$event","Eye","Download","_hoisted_46","Camera","_hoisted_47","_hoisted_48","comment","_hoisted_49","User","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","FormControl","Send","_hoisted_58","_hoisted_59","_hoisted_60","Search","CheckCircle","AlertTriangle","_hoisted_61","_hoisted_62","_hoisted_63","ClipboardList","_hoisted_64","_hoisted_65","Calendar","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","Plus","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77"],"mappings":"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"}