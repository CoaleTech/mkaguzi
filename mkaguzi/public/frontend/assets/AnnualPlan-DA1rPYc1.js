var nt=Object.defineProperty,ot=Object.defineProperties;var it=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable;var Oe=(g,_,x)=>_ in g?nt(g,_,{enumerable:!0,configurable:!0,writable:!0,value:x}):g[_]=x,ae=(g,_)=>{for(var x in _||(_={}))rt.call(_,x)&&Oe(g,x,_[x]);if(Be)for(var x of Be(_))dt.call(_,x)&&Oe(g,x,_[x]);return g},ne=(g,_)=>ot(g,it(_));var O=(g,_,x)=>new Promise((V,Q)=>{var h=l=>{try{v(x.next(l))}catch($){Q($)}},b=l=>{try{v(x.throw(l))}catch($){Q($)}},v=l=>l.done?V(l.value):Promise.resolve(l.value).then(h,b);v((x=x.apply(g,_)).next())});import{j as S,r as D,b as Ie,w as Re,y as Y,p as c,u as p,q as e,B as P,A as d,s as n,v as o,z as y,H as j,l as m,F as M,x as B,$ as J,ac as k,ah as U,ao as Se,ad as N,ab as ut,Q as ct,a6 as De,C as pt}from"./vue-DciwFjI_.js";import{a as C,o as L,L as mt,I as Ne,D as _e,b as Ve,f as bt,c as ze}from"./index-qIC3Tfxg.js";import{b as gt,C as vt,N as Te,a7 as Ue,a4 as de,m as Qe,ag as ft,ah as xt,e as yt,ai as _t,ae as ht,f as Je,E as wt,d as he,o as kt,a0 as Le,F as Ye,_ as $t,$ as He,a2 as Ct,a8 as Ke,a9 as Xe,aa as Ge,ak as je,ab as We,q as At,al as Pt}from"./icons-CtLkBOsu.js";import"./charts-DlPBe6v3.js";import"./utils-Bcd7wHeW.js";const Ft={class:"h-[80vh] flex"},St={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},Dt={class:"p-5"},Vt={class:"space-y-1"},zt=["onClick"],Ut={key:1},jt={class:"flex-1 min-w-0"},Tt={class:"text-sm font-medium truncate"},Qt={class:"text-xs text-gray-500"},Et={class:"mt-6 p-4 bg-white rounded-lg border border-gray-200"},qt={class:"flex items-center justify-between mb-2"},Mt={class:"text-sm font-bold text-blue-600"},Bt={class:"w-full bg-gray-200 rounded-full h-2"},Ot={class:"text-xs text-gray-500 mt-2"},It={class:"flex-1 overflow-y-auto"},Rt={class:"p-6 max-w-5xl mx-auto"},Nt={class:"space-y-6"},Lt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Yt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ht={class:"md:col-span-2"},Kt={key:0,class:"mt-1 text-xs text-red-500"},Xt=["value"],Gt={key:0,class:"mt-1 text-xs text-red-500"},Wt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-6"},Jt=["value"],Zt=["value"],es={key:0,class:"mt-1 text-xs text-red-500"},ts={key:0,class:"mt-1 text-xs text-red-500"},ss={class:"mt-6 max-w-md"},ls={class:"space-y-6"},as={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},ns={key:0,class:"mt-1 text-xs text-red-500"},os={key:0,class:"mt-1 text-xs text-red-500"},is={class:"space-y-6"},rs={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},ds={class:"mt-6 border-t border-gray-200 pt-6"},us={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},cs={class:"bg-blue-50 rounded-lg p-4"},ps={class:"bg-amber-50 rounded-lg p-4"},ms={class:"bg-green-50 rounded-lg p-4"},bs={class:"text-2xl font-bold text-green-700"},gs={class:"space-y-6"},vs={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},fs={class:"space-y-6"},xs={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},ys={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},_s={class:"relative"},hs={class:"relative"},ws={class:"relative"},ks={class:"bg-gray-50 rounded-lg p-4"},$s={class:"flex items-center justify-between mb-2"},Cs={class:"w-full bg-gray-200 rounded-full h-3"},As={class:"space-y-6"},Ps={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},Fs={class:"space-y-6"},Ss={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},Ds={class:"max-w-md"},Vs={class:"relative"},zs={class:"space-y-6"},Us={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},js={class:"space-y-6"},Ts={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Qs={class:"space-y-4"},Es={class:"space-y-2"},qs={class:"mt-6 border-t border-gray-200 pt-6"},Ms={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Bs={class:"bg-gray-50 rounded-lg p-4"},Os={class:"text-lg font-semibold text-gray-900"},Is={class:"bg-gray-50 rounded-lg p-4"},Rs={class:"text-lg font-semibold text-gray-900"},Ns={class:"bg-gray-50 rounded-lg p-4"},Ls={class:"text-lg font-semibold text-gray-900"},Ys={class:"bg-gray-50 rounded-lg p-4"},Hs={class:"text-lg font-semibold text-gray-900"},Ks={class:"flex items-center justify-between w-full"},Xs={class:"flex items-center space-x-4"},Gs={class:"flex items-center space-x-2"},Ws={class:"flex items-center space-x-2"},Js={class:"flex items-center space-x-3"},Zs={__name:"AnnualPlanFormNew",props:{modelValue:{type:Boolean,default:!1},plan:{type:Object,default:null}},emits:["update:modelValue","created","updated","cancelled"],setup(g,{emit:_}){const x=g,V=_,Q=S({get:()=>x.modelValue,set:i=>V("update:modelValue",i)}),h=S(()=>{var i;return!!((i=x.plan)!=null&&i.name)}),b=[{id:"basic",label:"Basic Information",description:"Core details"},{id:"overview",label:"Plan Overview",description:"Summary & objectives"},{id:"resources",label:"Resources",description:"Team allocation"},{id:"audits",label:"Planned Audits",description:"Audit schedule"},{id:"budget",label:"Budget",description:"Financial planning"},{id:"risk",label:"Risk",description:"Risk considerations"},{id:"contingency",label:"Contingency",description:"Backup plans"},{id:"additional",label:"Additional",description:"Notes & extras"},{id:"review",label:"Review & Submit",description:"Final review"}],v=D("basic"),l=Ie({plan_title:"",fiscal_year:new Date().getFullYear().toString(),status:"Draft",plan_period:"Annual",plan_start_date:"",plan_end_date:"",plan_owner:"",executive_summary:"",objectives:"",scope:"",methodology:"",resource_allocation:[],total_available_days:0,total_planned_days:0,planned_audits:[],total_budget:0,allocated_budget:0,actual_spend:0,budget_notes:"",key_risks:"",risk_mitigation:"",contingency_plan:"",contingency_budget:0,additional_notes:""}),$=Ie({}),w=D(!1),f=D(!1),F=S(()=>{const i=new Date().getFullYear();return[i-1,i,i+1,i+2].map(String)}),Z=[{label:"Draft",value:"Draft"},{label:"Pending Approval",value:"Pending Approval"},{label:"Approved",value:"Approved"},{label:"Active",value:"Active"},{label:"Completed",value:"Completed"},{label:"Archived",value:"Archived"}],ee=[{label:"Annual",value:"Annual"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Quarterly",value:"Quarterly"}],te=[{key:"team_member",label:"Team Member",width:"200px",fieldType:"text",required:!0,placeholder:"Enter name"},{key:"role",label:"Role",width:"150px",fieldType:"select",options:[{label:"Chief Audit Executive",value:"Chief Audit Executive"},{label:"Audit Manager",value:"Audit Manager"},{label:"Senior Auditor",value:"Senior Auditor"},{label:"Staff Auditor",value:"Staff Auditor"},{label:"IT Auditor",value:"IT Auditor"},{label:"External Consultant",value:"External Consultant"}],required:!0},{key:"allocated_hours",label:"Hours",width:"100px",fieldType:"number",placeholder:"0"},{key:"availability",label:"Availability",width:"120px",fieldType:"select",options:[{label:"Full-time",value:"Full-time"},{label:"Part-time",value:"Part-time"},{label:"Contract",value:"Contract"}],defaultValue:"Full-time"}],H=i=>{const t={};return i.team_member||(t.team_member="Team member is required"),i.role||(t.role="Role is required"),Object.keys(t).length?t:null},A=[{key:"audit_name",label:"Audit Name",width:"200px",fieldType:"text",required:!0,placeholder:"Enter audit name"},{key:"audit_type",label:"Type",width:"130px",fieldType:"select",options:[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Performance",value:"Performance"},{label:"Integrated",value:"Integrated"}],required:!0},{key:"quarter",label:"Quarter",width:"90px",fieldType:"select",options:[{label:"Q1",value:"Q1"},{label:"Q2",value:"Q2"},{label:"Q3",value:"Q3"},{label:"Q4",value:"Q4"}],required:!0},{key:"planned_start_date",label:"Start Date",width:"130px",fieldType:"date"},{key:"planned_end_date",label:"End Date",width:"130px",fieldType:"date"},{key:"priority",label:"Priority",width:"110px",fieldType:"select",options:[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],defaultValue:"Medium",component:"Badge",badgeTheme:{Low:"gray",Medium:"blue",High:"orange",Critical:"red"}},{key:"status",label:"Status",width:"110px",fieldType:"select",options:[{label:"Planned",value:"Planned"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Deferred",value:"Deferred"}],defaultValue:"Planned",component:"Badge",badgeTheme:{Planned:"gray","In Progress":"blue",Completed:"green",Deferred:"orange"}}],oe=i=>{const t={};return i.audit_name||(t.audit_name="Audit name is required"),i.audit_type||(t.audit_type="Audit type is required"),i.quarter||(t.quarter="Quarter is required"),i.planned_start_date&&i.planned_end_date&&new Date(i.planned_end_date)<new Date(i.planned_start_date)&&(t.planned_end_date="End date must be after start date"),Object.keys(t).length?t:null},R=S(()=>b.findIndex(i=>i.id===v.value)),K=S(()=>l.total_available_days?Math.round(l.total_planned_days/l.total_available_days*100):0),I=S(()=>l.total_budget?Math.round(l.actual_spend/l.total_budget*100):0),E=S(()=>I.value>90?"text-red-600":I.value>75?"text-amber-600":"text-green-600"),we=S(()=>I.value>90?"bg-red-500":I.value>75?"bg-amber-500":"bg-green-500"),se=i=>{switch(i){case"basic":return l.plan_title&&l.fiscal_year&&l.plan_start_date&&l.plan_end_date?"complete":l.plan_title||l.fiscal_year?"partial":"incomplete";case"overview":return l.executive_summary&&l.objectives?"complete":l.executive_summary||l.objectives?"partial":"incomplete";case"resources":return l.resource_allocation.length>0?"complete":"incomplete";case"audits":return l.planned_audits.length>0?"complete":"incomplete";case"budget":return l.total_budget>0?"complete":"incomplete";case"risk":return l.key_risks?"complete":"incomplete";case"contingency":return l.contingency_plan?"complete":"incomplete";case"additional":return"complete";case"review":return"complete";default:return"incomplete"}},be=i=>{const t=se(i);return t==="complete"?"bg-green-500 text-white":t==="partial"?"bg-amber-500 text-white":"bg-gray-300 text-gray-600"},ge=S(()=>b.filter(i=>se(i.id)==="complete").length),X=S(()=>Math.round(ge.value/b.length*100)),ve=S(()=>[{label:"Plan title provided",valid:!!l.plan_title},{label:"Fiscal year selected",valid:!!l.fiscal_year},{label:"Plan dates specified",valid:!!l.plan_start_date&&!!l.plan_end_date},{label:"Executive summary provided",valid:!!l.executive_summary},{label:"Objectives defined",valid:!!l.objectives},{label:"At least one audit planned",valid:l.planned_audits.length>0}]),le=S(()=>!!(l.plan_title&&l.fiscal_year&&l.plan_start_date&&l.plan_end_date&&l.executive_summary&&l.objectives&&l.planned_audits.length>0)),ue=i=>i?i.toLocaleString():"0",fe=()=>{const i=R.value;i>0&&(v.value=b[i-1].id)},ke=()=>{const i=R.value;i<b.length-1&&(v.value=b[i+1].id)},$e=()=>{const i={};return l.plan_title||(i.plan_title="Plan title is required"),l.fiscal_year||(i.fiscal_year="Fiscal year is required"),l.plan_start_date||(i.plan_start_date="Start date is required"),l.plan_end_date||(i.plan_end_date="End date is required"),l.executive_summary||(i.executive_summary="Executive summary is required"),l.objectives||(i.objectives="Objectives are required"),l.plan_start_date&&l.plan_end_date&&new Date(l.plan_end_date)<new Date(l.plan_start_date)&&(i.plan_end_date="End date must be after start date"),l.planned_audits.length===0&&(i.planned_audits="At least one audit is required"),Object.assign($,i),Object.keys(i).length===0},xe=()=>ne(ae({},l),{resource_allocation:l.resource_allocation.map(i=>ne(ae({},i),{doctype:"Annual Audit Plan Resource"})),planned_audits:l.planned_audits.map(i=>ne(ae({},i),{doctype:"Annual Audit Plan Item"}))}),Ce=()=>O(this,null,function*(){if(!$e()){const i=b.find(t=>se(t.id)!=="complete");i&&(v.value=i.id);return}try{w.value=!0;const i=xe();h.value?V("updated",ne(ae({},i),{name:x.plan.name})):V("created",i),Q.value=!1}catch(i){console.error("Error saving plan:",i)}finally{w.value=!1}}),Ae=()=>O(this,null,function*(){try{f.value=!0;const i=xe();V("created",ne(ae({},i),{status:"Draft"})),Q.value=!1}catch(i){console.error("Error saving draft:",i)}finally{f.value=!1}}),ce=()=>{V("cancelled"),Q.value=!1},ie=()=>{Object.keys(l).forEach(i=>{Array.isArray(l[i])?l[i]=[]:typeof l[i]=="number"?l[i]=0:l[i]=""}),l.status="Draft",l.plan_period="Annual",l.fiscal_year=new Date().getFullYear().toString(),Object.keys($).forEach(i=>delete $[i]),v.value="basic"},ye=i=>{i&&Object.keys(l).forEach(t=>{i[t]!==void 0&&(l[t]=i[t])})};return Re(()=>x.modelValue,i=>{i&&(x.plan?ye(x.plan):ie())}),Re(()=>x.plan,i=>{i&&x.modelValue&&ye(i)},{deep:!0}),(i,t)=>(c(),Y(o(_e),{modelValue:Q.value,"onUpdate:modelValue":t[24]||(t[24]=G=>Q.value=G),options:{title:h.value?"Edit Annual Audit Plan":"Create Annual Audit Plan",size:"full"}},{"body-content":p(()=>{var G,pe;return[e("div",Ft,[e("div",St,[e("div",Dt,[t[26]||(t[26]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Form Sections",-1)),e("nav",Vt,[(c(),m(M,null,B(b,(r,Pe)=>e("button",{key:r.id,onClick:Ee=>v.value=r.id,class:P(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-left transition-all",[v.value===r.id?"bg-blue-100 border border-blue-300 text-blue-800":"hover:bg-gray-100 text-gray-700"]])},[e("div",{class:P(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold flex-shrink-0",be(r.id)])},[se(r.id)==="complete"?(c(),Y(o(Ue),{key:0,class:"h-3 w-3"})):(c(),m("span",Ut,d(Pe+1),1))],2),e("div",jt,[e("div",Tt,d(r.label),1),e("div",Qt,d(r.description),1)])],10,zt)),64))]),e("div",Et,[e("div",qt,[t[25]||(t[25]=e("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),e("span",Mt,d(X.value)+"%",1)]),e("div",Bt,[e("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:J({width:`${X.value}%`})},null,4)]),e("p",Ot,d(ge.value)+" of "+d(b.length)+" sections complete ",1)])])]),e("div",It,[e("div",Rt,[k(e("div",Nt,[n(L,{title:"Basic Information",description:"Essential plan details and identification",icon:"calendar",step:"1"}),e("div",Lt,[e("div",Yt,[e("div",Ht,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[y(" Plan Title "),e("span",{class:"text-red-500"},"*")],-1)),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>l.plan_title=r),type:"text",placeholder:"e.g., Annual Audit Plan 2025",class:P(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",$.plan_title?"border-red-300":"border-gray-300"])},null,2),[[U,l.plan_title]]),$.plan_title?(c(),m("p",Kt,d($.plan_title),1)):j("",!0)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[y(" Fiscal Year "),e("span",{class:"text-red-500"},"*")],-1)),k(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>l.fiscal_year=r),class:P(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",$.fiscal_year?"border-red-300":"border-gray-300"])},[(c(!0),m(M,null,B(F.value,r=>(c(),m("option",{key:r,value:r},d(r),9,Xt))),128))],2),[[Se,l.fiscal_year]]),$.fiscal_year?(c(),m("p",Gt,d($.fiscal_year),1)):j("",!0)])]),e("div",Wt,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[y(" Status "),e("span",{class:"text-red-500"},"*")],-1)),k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>l.status=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(c(),m(M,null,B(Z,r=>e("option",{key:r.value,value:r.value},d(r.label),9,Jt)),64))],512),[[Se,l.status]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Plan Period ",-1)),k(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>l.plan_period=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(c(),m(M,null,B(ee,r=>e("option",{key:r.value,value:r.value},d(r.label),9,Zt)),64))],512),[[Se,l.plan_period]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[y(" Plan Start Date "),e("span",{class:"text-red-500"},"*")],-1)),k(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>l.plan_start_date=r),type:"date",class:P(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",$.plan_start_date?"border-red-300":"border-gray-300"])},null,2),[[U,l.plan_start_date]]),$.plan_start_date?(c(),m("p",es,d($.plan_start_date),1)):j("",!0)]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[y(" Plan End Date "),e("span",{class:"text-red-500"},"*")],-1)),k(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>l.plan_end_date=r),type:"date",class:P(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",$.plan_end_date?"border-red-300":"border-gray-300"])},null,2),[[U,l.plan_end_date]]),$.plan_end_date?(c(),m("p",ts,d($.plan_end_date),1)):j("",!0)])]),e("div",ss,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Plan Owner ",-1)),n(mt,{modelValue:l.plan_owner,"onUpdate:modelValue":t[6]||(t[6]=r=>l.plan_owner=r),doctype:"User",filters:{enabled:1},placeholder:"Select plan owner"},null,8,["modelValue"])])])],512),[[N,v.value==="basic"]]),k(e("div",ls,[n(L,{title:"Plan Overview",description:"Executive summary, objectives, scope, and methodology",icon:"file-text",step:"2"}),e("div",as,[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[y(" Executive Summary "),e("span",{class:"text-red-500"},"*")],-1)),k(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=r=>l.executive_summary=r),rows:"4",placeholder:"Provide a high-level summary of the annual audit plan...",class:P(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",$.executive_summary?"border-red-300":"border-gray-300"])},null,2),[[U,l.executive_summary]]),$.executive_summary?(c(),m("p",ns,d($.executive_summary),1)):j("",!0)]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[y(" Objectives "),e("span",{class:"text-red-500"},"*")],-1)),k(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=r=>l.objectives=r),rows:"4",placeholder:"Define the primary objectives of this audit plan...",class:P(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",$.objectives?"border-red-300":"border-gray-300"])},null,2),[[U,l.objectives]]),$.objectives?(c(),m("p",os,d($.objectives),1)):j("",!0)]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Scope ",-1)),k(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=r=>l.scope=r),rows:"4",placeholder:"Define the boundaries and areas covered by this audit plan...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.scope]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Methodology ",-1)),k(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=r=>l.methodology=r),rows:"4",placeholder:"Describe the audit approach and methodology...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.methodology]])])])],512),[[N,v.value==="overview"]]),k(e("div",is,[n(L,{title:"Resource Allocation",description:"Team members, roles, and capacity planning",icon:"users",step:"3"}),e("div",rs,[n(Ne,{modelValue:l.resource_allocation,"onUpdate:modelValue":t[11]||(t[11]=r=>l.resource_allocation=r),title:"Team Resources","modal-title":"Resource",columns:te,validate:H,"auto-add-row":!0},null,8,["modelValue"]),e("div",ds,[e("div",us,[e("div",cs,[t[38]||(t[38]=e("h5",{class:"text-sm font-medium text-blue-800 mb-1"},"Total Available Days",-1)),k(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>l.total_available_days=r),type:"number",min:"0",placeholder:"0",class:"w-full px-2 py-1.5 text-sm border border-blue-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.total_available_days,void 0,{number:!0}]])]),e("div",ps,[t[39]||(t[39]=e("h5",{class:"text-sm font-medium text-amber-800 mb-1"},"Total Planned Days",-1)),k(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>l.total_planned_days=r),type:"number",min:"0",placeholder:"0",class:"w-full px-2 py-1.5 text-sm border border-amber-200 rounded focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[U,l.total_planned_days,void 0,{number:!0}]])]),e("div",ms,[t[40]||(t[40]=e("h5",{class:"text-sm font-medium text-green-800 mb-1"},"Utilization %",-1)),e("div",bs,d(K.value)+"% ",1)])])])])],512),[[N,v.value==="resources"]]),k(e("div",gs,[n(L,{title:"Planned Audits",description:"Schedule and prioritize audit engagements",icon:"clipboard-list",step:"4"}),e("div",vs,[n(Ne,{modelValue:l.planned_audits,"onUpdate:modelValue":t[14]||(t[14]=r=>l.planned_audits=r),title:"Audit Schedule","modal-title":"Planned Audit",columns:A,validate:oe,"auto-add-row":!0,required:!0},null,8,["modelValue"])])],512),[[N,v.value==="audits"]]),k(e("div",fs,[n(L,{title:"Budget Information",description:"Financial allocation and tracking",icon:"dollar-sign",step:"5"}),e("div",xs,[e("div",ys,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Total Budget ",-1)),e("div",_s,[t[41]||(t[41]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},"$",-1)),k(e("input",{"onUpdate:modelValue":t[15]||(t[15]=r=>l.total_budget=r),type:"number",min:"0",step:"1000",placeholder:"0.00",class:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.total_budget,void 0,{number:!0}]])])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Allocated Budget ",-1)),e("div",hs,[t[43]||(t[43]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},"$",-1)),k(e("input",{"onUpdate:modelValue":t[16]||(t[16]=r=>l.allocated_budget=r),type:"number",min:"0",step:"1000",placeholder:"0.00",class:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.allocated_budget,void 0,{number:!0}]])])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Actual Spend ",-1)),e("div",ws,[t[45]||(t[45]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},"$",-1)),k(e("input",{"onUpdate:modelValue":t[17]||(t[17]=r=>l.actual_spend=r),type:"number",min:"0",step:"100",placeholder:"0.00",class:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.actual_spend,void 0,{number:!0}]])])])]),e("div",ks,[e("div",$s,[t[47]||(t[47]=e("span",{class:"text-sm font-medium text-gray-700"},"Budget Utilization",-1)),e("span",{class:P(["text-sm font-bold",E.value])},d(I.value)+"%",3)]),e("div",Cs,[e("div",{class:P(["h-3 rounded-full transition-all duration-300",we.value]),style:J({width:`${Math.min(I.value,100)}%`})},null,6)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Budget Notes ",-1)),k(e("textarea",{"onUpdate:modelValue":t[18]||(t[18]=r=>l.budget_notes=r),rows:"3",placeholder:"Additional budget notes or comments...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.budget_notes]])])])],512),[[N,v.value==="budget"]]),k(e("div",As,[n(L,{title:"Risk Considerations",description:"Key risks and mitigation strategies",icon:"alert-triangle",step:"6"}),e("div",Ps,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Key Risks ",-1)),k(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=r=>l.key_risks=r),rows:"4",placeholder:"Identify key risks that may impact the audit plan...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.key_risks]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Risk Mitigation Strategies ",-1)),k(e("textarea",{"onUpdate:modelValue":t[20]||(t[20]=r=>l.risk_mitigation=r),rows:"4",placeholder:"Describe strategies to mitigate identified risks...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.risk_mitigation]])])])],512),[[N,v.value==="risk"]]),k(e("div",Fs,[n(L,{title:"Contingency Planning",description:"Backup plans and contingency budget",icon:"shield",step:"7"}),e("div",Ss,[e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Contingency Plan ",-1)),k(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=r=>l.contingency_plan=r),rows:"4",placeholder:"Describe contingency measures and backup plans...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.contingency_plan]])]),e("div",Ds,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Contingency Budget ",-1)),e("div",Vs,[t[52]||(t[52]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},"$",-1)),k(e("input",{"onUpdate:modelValue":t[22]||(t[22]=r=>l.contingency_budget=r),type:"number",min:"0",step:"1000",placeholder:"0.00",class:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.contingency_budget,void 0,{number:!0}]])])])])],512),[[N,v.value==="contingency"]]),k(e("div",zs,[n(L,{title:"Additional Information",description:"Notes and supplementary details",icon:"info",step:"8"}),e("div",Us,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Additional Notes ",-1)),k(e("textarea",{"onUpdate:modelValue":t[23]||(t[23]=r=>l.additional_notes=r),rows:"5",placeholder:"Any additional information or comments...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[U,l.additional_notes]])])])],512),[[N,v.value==="additional"]]),k(e("div",js,[n(L,{title:"Review & Submit",description:"Review your plan before saving",icon:"check-circle",step:"9"}),e("div",Ts,[e("div",Qs,[t[55]||(t[55]=e("h4",{class:"font-semibold text-gray-900"},"Validation Checklist",-1)),e("div",Es,[(c(!0),m(M,null,B(ve.value,r=>(c(),m("div",{key:r.label,class:P(["flex items-center space-x-3 p-3 rounded-lg",r.valid?"bg-green-50":"bg-red-50"])},[e("div",{class:P(["w-6 h-6 rounded-full flex items-center justify-center",r.valid?"bg-green-500 text-white":"bg-red-500 text-white"])},[r.valid?(c(),Y(o(Ue),{key:0,class:"h-4 w-4"})):(c(),Y(o(de),{key:1,class:"h-4 w-4"}))],2),e("span",{class:P(r.valid?"text-green-800":"text-red-800")},d(r.label),3)],2))),128))])]),e("div",qs,[t[60]||(t[60]=e("h4",{class:"font-semibold text-gray-900 mb-4"},"Plan Summary",-1)),e("div",Ms,[e("div",Bs,[t[56]||(t[56]=e("p",{class:"text-xs text-gray-500"},"Fiscal Year",-1)),e("p",Os,d(l.fiscal_year),1)]),e("div",Is,[t[57]||(t[57]=e("p",{class:"text-xs text-gray-500"},"Planned Audits",-1)),e("p",Rs,d(((G=l.planned_audits)==null?void 0:G.length)||0),1)]),e("div",Ns,[t[58]||(t[58]=e("p",{class:"text-xs text-gray-500"},"Team Members",-1)),e("p",Ls,d(((pe=l.resource_allocation)==null?void 0:pe.length)||0),1)]),e("div",Ys,[t[59]||(t[59]=e("p",{class:"text-xs text-gray-500"},"Total Budget",-1)),e("p",Hs,"$"+d(ue(l.total_budget)),1)])])])])],512),[[N,v.value==="review"]])])])])]}),actions:p(()=>[e("div",Ks,[e("div",Xs,[e("div",Gs,[e("div",{class:P(["w-3 h-3 rounded-full",le.value?"bg-green-500":"bg-amber-500"])},null,2),e("span",{class:P(["text-sm font-medium",le.value?"text-green-700":"text-amber-700"])},d(le.value?"Ready to save":"Complete required fields"),3)]),e("div",Ws,[n(o(C),{variant:"ghost",size:"sm",disabled:R.value===0,onClick:fe},{default:p(()=>[n(o(gt),{class:"h-4 w-4 mr-1"}),t[61]||(t[61]=y(" Previous ",-1))]),_:1},8,["disabled"]),n(o(C),{variant:"ghost",size:"sm",disabled:R.value===b.length-1,onClick:ke},{default:p(()=>[t[62]||(t[62]=y(" Next ",-1)),n(o(vt),{class:"h-4 w-4 ml-1"})]),_:1},8,["disabled"])])]),e("div",Js,[n(o(C),{variant:"outline",onClick:ce,disabled:w.value},{default:p(()=>[...t[63]||(t[63]=[y(" Cancel ",-1)])]),_:1},8,["disabled"]),h.value?j("",!0):(c(),Y(o(C),{key:0,variant:"outline",theme:"gray",onClick:Ae,loading:f.value,disabled:w.value},{default:p(()=>[...t[64]||(t[64]=[y(" Save as Draft ",-1)])]),_:1},8,["loading","disabled"])),n(o(C),{variant:"solid",theme:"blue",onClick:Ce,loading:w.value},{prefix:p(()=>[h.value?(c(),Y(o(Ue),{key:1,class:"h-4 w-4"})):(c(),Y(o(Te),{key:0,class:"h-4 w-4"}))]),default:p(()=>[y(" "+d(h.value?"Update Plan":"Create Plan"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","options"]))}},el={class:"flex flex-wrap items-center gap-3 mb-6"},tl={class:"flex-1 min-w-[250px] max-w-md"},sl={class:"relative"},ll=["value"],al={class:"w-40"},nl={class:"w-32"},ol={class:"w-40"},il={class:"flex items-center gap-1 bg-gray-100 rounded-lg p-1"},rl={key:0,class:"flex flex-wrap gap-2 mb-4"},dl={key:0,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium"},ul={key:1,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},cl={key:2,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium"},pl={key:3,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium"},ml={__name:"PlanFilters",props:{searchQuery:{type:String,default:""},statusFilter:{type:String,default:""},yearFilter:{type:[String,Number],default:""},periodFilter:{type:String,default:""},viewMode:{type:String,default:"table"}},emits:["update:searchQuery","update:statusFilter","update:yearFilter","update:periodFilter","update:viewMode"],setup(g,{emit:_}){const x=g,V=_,Q=[{label:"All Status",value:""},{label:"Draft",value:"Draft"},{label:"Pending Approval",value:"Pending Approval"},{label:"Approved",value:"Approved"},{label:"Active",value:"Active"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}],h=[{label:"All Periods",value:""},{label:"Annual",value:"Annual"},{label:"Q1",value:"Q1"},{label:"Q2",value:"Q2"},{label:"Q3",value:"Q3"},{label:"Q4",value:"Q4"},{label:"H1",value:"H1"},{label:"H2",value:"H2"}],b=new Date().getFullYear(),v=S(()=>{const w=[{label:"All Years",value:""}];for(let f=b+2;f>=b-3;f--)w.push({label:String(f),value:f});return w}),l=S(()=>x.searchQuery||x.statusFilter||x.yearFilter||x.periodFilter),$=()=>{V("update:searchQuery",""),V("update:statusFilter",""),V("update:yearFilter",""),V("update:periodFilter","")};return(w,f)=>(c(),m(M,null,[e("div",el,[e("div",tl,[e("div",sl,[n(o(Qe),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e("input",{type:"text",value:g.searchQuery,onInput:f[0]||(f[0]=F=>w.$emit("update:searchQuery",F.target.value)),placeholder:"Search plans...",class:"w-full pl-10 pr-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,40,ll),g.searchQuery?(c(),m("button",{key:0,onClick:f[1]||(f[1]=F=>w.$emit("update:searchQuery","")),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},[n(o(de),{class:"h-4 w-4"})])):j("",!0)])]),e("div",al,[n(o(Ve),{type:"select",modelValue:g.statusFilter,"onUpdate:modelValue":f[2]||(f[2]=F=>w.$emit("update:statusFilter",F)),options:Q,size:"sm",placeholder:"All Status"},null,8,["modelValue"])]),e("div",nl,[n(o(Ve),{type:"select",modelValue:g.yearFilter,"onUpdate:modelValue":f[3]||(f[3]=F=>w.$emit("update:yearFilter",F)),options:v.value,size:"sm",placeholder:"All Years"},null,8,["modelValue","options"])]),e("div",ol,[n(o(Ve),{type:"select",modelValue:g.periodFilter,"onUpdate:modelValue":f[4]||(f[4]=F=>w.$emit("update:periodFilter",F)),options:h,size:"sm",placeholder:"All Periods"},null,8,["modelValue"])]),e("div",il,[e("button",{onClick:f[5]||(f[5]=F=>w.$emit("update:viewMode","table")),class:P(["p-2 rounded-md transition-all duration-200",g.viewMode==="table"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Table View"},[n(o(ft),{class:"h-4 w-4"})],2),e("button",{onClick:f[6]||(f[6]=F=>w.$emit("update:viewMode","cards")),class:P(["p-2 rounded-md transition-all duration-200",g.viewMode==="cards"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Card View"},[n(o(xt),{class:"h-4 w-4"})],2),e("button",{onClick:f[7]||(f[7]=F=>w.$emit("update:viewMode","timeline")),class:P(["p-2 rounded-md transition-all duration-200",g.viewMode==="timeline"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Timeline View"},[n(o(yt),{class:"h-4 w-4"})],2)]),l.value?(c(),m("button",{key:0,onClick:$,class:"flex items-center gap-1.5 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all"},[n(o(_t),{class:"h-4 w-4"}),f[12]||(f[12]=e("span",null,"Clear",-1))])):j("",!0)]),l.value?(c(),m("div",rl,[g.searchQuery?(c(),m("span",dl,[n(o(Qe),{class:"h-3 w-3"}),y(' "'+d(g.searchQuery)+'" ',1),e("button",{onClick:f[8]||(f[8]=F=>w.$emit("update:searchQuery","")),class:"hover:text-blue-600"},[n(o(de),{class:"h-3 w-3"})])])):j("",!0),g.statusFilter?(c(),m("span",ul,[y(" Status: "+d(g.statusFilter)+" ",1),e("button",{onClick:f[9]||(f[9]=F=>w.$emit("update:statusFilter","")),class:"hover:text-green-600"},[n(o(de),{class:"h-3 w-3"})])])):j("",!0),g.yearFilter?(c(),m("span",cl,[y(" Year: "+d(g.yearFilter)+" ",1),e("button",{onClick:f[10]||(f[10]=F=>w.$emit("update:yearFilter","")),class:"hover:text-amber-600"},[n(o(de),{class:"h-3 w-3"})])])):j("",!0),g.periodFilter?(c(),m("span",pl,[y(" Period: "+d(g.periodFilter)+" ",1),e("button",{onClick:f[11]||(f[11]=F=>w.$emit("update:periodFilter","")),class:"hover:text-purple-600"},[n(o(de),{class:"h-3 w-3"})])])):j("",!0)])):j("",!0)],64))}},bl={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4 mb-6"},gl={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-5 hover:shadow-lg transition-all duration-200"},vl={class:"flex items-center justify-between"},fl={class:"text-3xl font-bold text-green-900 mt-1"},xl={class:"text-xs text-green-600 mt-1"},yl={class:"p-3 bg-green-500 rounded-xl shadow-sm"},_l={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-5 hover:shadow-lg transition-all duration-200"},hl={class:"flex items-center justify-between"},wl={class:"text-3xl font-bold text-blue-900 mt-1"},kl={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},$l={class:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl border border-amber-200 p-5 hover:shadow-lg transition-all duration-200"},Cl={class:"flex items-center justify-between"},Al={class:"w-full"},Pl={class:"text-3xl font-bold text-amber-900 mt-1"},Fl={class:"w-full bg-amber-200 rounded-full h-2 mt-2"},Sl={class:"p-3 bg-amber-500 rounded-xl shadow-sm ml-3"},Dl={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-5 hover:shadow-lg transition-all duration-200"},Vl={class:"flex items-center justify-between"},zl={class:"text-3xl font-bold text-purple-900 mt-1"},Ul={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},jl={class:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200 p-5 hover:shadow-lg transition-all duration-200"},Tl={class:"flex items-center justify-between"},Ql={class:"text-3xl font-bold text-gray-900 mt-1"},El={class:"p-3 bg-gray-500 rounded-xl shadow-sm"},ql={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},Ml={class:"bg-white rounded-xl border border-gray-200 p-5"},Bl={class:"space-y-3"},Ol={class:"w-24 text-sm text-gray-600"},Il={class:"flex-1 mx-3"},Rl={class:"w-full bg-gray-100 rounded-full h-3"},Nl={class:"w-12 text-sm font-medium text-gray-900 text-right"},Ll={class:"bg-white rounded-xl border border-gray-200 p-5"},Yl={class:"grid grid-cols-4 gap-3"},Hl={class:"text-xs text-gray-500"},Kl={__name:"PlanStats",props:{stats:{type:Object,default:()=>({total:0,active:0,draft:0,approved:0,completed:0,plannedAudits:0,avgUtilization:0,upcoming:0,totalDays:0,byQuarter:{q1:0,q2:0,q3:0,q4:0}})},showDetails:{type:Boolean,default:!0}},setup(g){const _=g,x=S(()=>_.stats.total?Math.round(_.stats.active/_.stats.total*100):0),V=S(()=>{const h=_.stats.total||1;return[{label:"Draft",count:_.stats.draft||0,percentage:(_.stats.draft||0)/h*100,color:"bg-gray-400"},{label:"Approved",count:_.stats.approved||0,percentage:(_.stats.approved||0)/h*100,color:"bg-blue-500"},{label:"Active",count:_.stats.active||0,percentage:(_.stats.active||0)/h*100,color:"bg-green-500"},{label:"Completed",count:_.stats.completed||0,percentage:(_.stats.completed||0)/h*100,color:"bg-purple-500"}]}),Q=S(()=>{const h=_.stats.byQuarter||{q1:0,q2:0,q3:0,q4:0};return[{label:"Q1",count:h.q1,color:"text-blue-600"},{label:"Q2",count:h.q2,color:"text-green-600"},{label:"Q3",count:h.q3,color:"text-amber-600"},{label:"Q4",count:h.q4,color:"text-purple-600"}]});return(h,b)=>(c(),m(M,null,[e("div",bl,[e("div",gl,[e("div",vl,[e("div",null,[b[0]||(b[0]=e("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Active Plans",-1)),e("p",fl,d(g.stats.active||0),1),e("p",xl,d(x.value)+"% of total",1)]),e("div",yl,[n(o(ht),{class:"h-7 w-7 text-white"})])])]),e("div",_l,[e("div",hl,[e("div",null,[b[1]||(b[1]=e("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Planned Audits",-1)),e("p",wl,d(g.stats.plannedAudits||0),1),b[2]||(b[2]=e("p",{class:"text-xs text-blue-600 mt-1"},"Across all plans",-1))]),e("div",kl,[n(o(Je),{class:"h-7 w-7 text-white"})])])]),e("div",$l,[e("div",Cl,[e("div",Al,[b[3]||(b[3]=e("p",{class:"text-sm font-semibold text-amber-700 uppercase tracking-wide"},"Avg Utilization",-1)),e("p",Pl,d(g.stats.avgUtilization||0)+"%",1),e("div",Fl,[e("div",{class:"bg-amber-600 h-2 rounded-full transition-all duration-300",style:J({width:`${Math.min(g.stats.avgUtilization||0,100)}%`})},null,4)])]),e("div",Sl,[n(o(wt),{class:"h-7 w-7 text-white"})])])]),e("div",Dl,[e("div",Vl,[e("div",null,[b[4]||(b[4]=e("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Upcoming",-1)),e("p",zl,d(g.stats.upcoming||0),1),b[5]||(b[5]=e("p",{class:"text-xs text-purple-600 mt-1"},"Next 30 days",-1))]),e("div",Ul,[n(o(he),{class:"h-7 w-7 text-white"})])])]),e("div",jl,[e("div",Tl,[e("div",null,[b[6]||(b[6]=e("p",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Total Days",-1)),e("p",Ql,d(g.stats.totalDays||0),1),b[7]||(b[7]=e("p",{class:"text-xs text-gray-600 mt-1"},"Planned across all",-1))]),e("div",El,[n(o(kt),{class:"h-7 w-7 text-white"})])])])]),g.showDetails?(c(),m("div",ql,[e("div",Ml,[b[8]||(b[8]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Plans by Status",-1)),e("div",Bl,[(c(!0),m(M,null,B(V.value,v=>(c(),m("div",{key:v.label,class:"flex items-center"},[e("div",Ol,d(v.label),1),e("div",Il,[e("div",Rl,[e("div",{class:P(["h-3 rounded-full transition-all duration-300",v.color]),style:J({width:`${v.percentage}%`})},null,6)])]),e("div",Nl,d(v.count),1)]))),128))])]),e("div",Ll,[b[9]||(b[9]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Quarterly Audit Distribution",-1)),e("div",Yl,[(c(!0),m(M,null,B(Q.value,v=>(c(),m("div",{key:v.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[e("p",{class:P(["text-lg font-bold",v.color])},d(v.count),3),e("p",Hl,d(v.label),1)]))),128))])])])):j("",!0)],64))}},Xl={class:"space-y-6"},Gl={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},Wl={class:"flex items-center space-x-3"},Jl={class:"p-2 bg-blue-100 rounded-lg"},Zl={class:"flex flex-wrap items-center gap-2"},ea={class:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm"},ta={class:"flex flex-wrap items-center justify-between gap-4"},sa={class:"flex items-center gap-3"},la={class:"text-sm text-gray-600"},aa={class:"bg-white rounded-xl border border-gray-200 shadow-sm"},na={class:"px-6 py-4 border-b border-gray-200"},oa={class:"flex items-center justify-between"},ia={class:"flex items-center space-x-2"},ra={key:0,class:"overflow-x-auto"},da={class:"min-w-full divide-y divide-gray-200"},ua={class:"bg-gray-50"},ca={class:"px-6 py-3 text-left w-10"},pa=["checked"],ma={class:"flex items-center space-x-1"},ba={class:"flex items-center space-x-1"},ga={class:"bg-white divide-y divide-gray-200"},va={class:"px-6 py-4"},fa=["checked","onChange"],xa={class:"px-6 py-4 whitespace-nowrap"},ya={class:"flex items-center"},_a={class:"flex-shrink-0 h-10 w-10"},ha={class:"h-10 w-10 rounded-lg bg-blue-500 flex items-center justify-center text-white font-bold text-sm"},wa={class:"ml-4"},ka={class:"text-sm font-semibold text-gray-900"},$a={class:"text-sm text-gray-500"},Ca={class:"px-6 py-4 whitespace-nowrap"},Aa={class:"text-sm font-medium text-gray-900"},Pa={class:"px-6 py-4 whitespace-nowrap"},Fa={class:"px-6 py-4 whitespace-nowrap"},Sa={class:"flex items-center"},Da={class:"w-20 bg-gray-200 rounded-full h-2 mr-2"},Va={class:"text-sm text-gray-600"},za={class:"px-6 py-4 whitespace-nowrap"},Ua={class:"flex items-center"},ja={class:"text-sm font-medium text-gray-900"},Ta={class:"ml-2 w-12 bg-gray-200 rounded-full h-1.5"},Qa={class:"px-6 py-4 whitespace-nowrap"},Ea={class:"flex items-center space-x-2"},qa={class:"text-sm font-medium text-gray-900"},Ma={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ba={class:"flex items-center space-x-1"},Oa={key:1,class:"p-6"},Ia={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ra={class:"flex items-start justify-between mb-4"},Na={class:"flex items-center space-x-3"},La={class:"h-12 w-12 rounded-xl bg-blue-500 flex items-center justify-center text-white font-bold"},Ya={class:"text-lg font-semibold text-gray-900 group-hover:text-blue-900"},Ha={class:"text-sm text-gray-600"},Ka={class:"space-y-3"},Xa={class:"flex justify-between items-center mb-1"},Ga={class:"text-sm font-medium"},Wa={class:"w-full bg-gray-200 rounded-full h-2"},Ja={class:"flex justify-between items-center"},Za={class:"text-sm font-medium"},en={class:"flex justify-between items-center"},tn={class:"text-sm font-medium"},sn={class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200"},ln={class:"flex items-center space-x-1"},an={class:"text-xs text-gray-500"},nn={key:2,class:"p-6"},on={class:"relative"},rn={class:"flex-shrink-0 w-16 h-16 rounded-xl bg-blue-500 flex items-center justify-center text-white font-bold text-lg z-10"},dn={class:"ml-6 flex-1 bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow"},un={class:"flex items-start justify-between mb-3"},cn={class:"text-lg font-semibold text-gray-900"},pn={class:"text-sm text-gray-500"},mn={class:"grid grid-cols-3 gap-4 mb-4"},bn={class:"text-lg font-semibold text-gray-900"},gn={class:"text-lg font-semibold text-gray-900"},vn={class:"text-lg font-semibold text-gray-900"},fn={class:"flex items-center justify-end space-x-2"},xn={key:3,class:"px-6 py-20 text-center"},yn={class:"mx-auto h-20 w-20 rounded-2xl bg-blue-50 border-2 border-blue-100 flex items-center justify-center mb-8 shadow-sm"},_n={class:"max-w-md mx-auto"},hn={class:"flex flex-col sm:flex-row justify-center gap-3"},wn={key:4,class:"px-6 py-12 text-center"},kn={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4"},$n=["onClick"],Cn={class:"flex items-start space-x-3"},An={class:"p-2 bg-blue-100 rounded-lg"},Pn={class:"font-semibold text-gray-900"},Fn={class:"text-sm text-gray-500 mt-1"},Sn={class:"p-6 space-y-4"},Dn={class:"text-gray-600"},Vn={class:"grid grid-cols-2 gap-3"},zn={class:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6"},Un={class:"md:col-span-2"},jn={class:"bg-white border border-gray-200 rounded-lg p-6"},Tn={class:"space-y-4"},Qn={class:"w-32 text-sm text-gray-600"},En={class:"flex-1 mx-3"},qn={class:"w-full bg-gray-100 rounded-full h-4"},Mn={class:"w-16 text-sm font-medium text-gray-900 text-right"},Bn={class:"space-y-4"},On={class:"bg-blue-50 rounded-lg p-6"},In={class:"space-y-3 text-sm"},Rn={class:"flex justify-between"},Nn={class:"font-medium text-blue-900"},Ln={class:"flex justify-between"},Yn={class:"font-medium text-blue-900"},Hn={class:"flex justify-between"},Kn={class:"font-medium text-blue-900"},Xn={class:"bg-amber-50 rounded-lg p-6"},Gn={class:"space-y-3 text-sm"},Wn={class:"flex justify-between"},Jn={class:"font-medium text-amber-900"},Zn={class:"flex justify-between"},eo={class:"font-medium text-amber-900"},io={__name:"AnnualPlan",setup(g){const _=ut(),x=bt(),V=D(!1),Q=D(!1),h=D(!1),b=D(!1),v=D(!1),l=D(!1),$=D(!0),w=D(null),f=D("create"),F=D(""),Z=D(""),ee=D(""),te=D(""),H=D("table"),A=D([]),oe=D("plan_year"),R=D("desc"),K=S(()=>x.annualPlans||[]),I=S(()=>{const u=K.value,s=u.filter(T=>T.status==="Active").length,a=u.filter(T=>T.status==="Draft").length,q=u.filter(T=>T.status==="Approved").length,z=u.filter(T=>T.status==="Completed").length,re=u.reduce((T,W)=>{var me;return T+(((me=W.planned_audits)==null?void 0:me.length)||0)},0),st=u.reduce((T,W)=>T+(W.total_planned_days||0),0),Fe=u.filter(T=>["Active","Approved"].includes(T.status)),lt=Fe.length>0?Math.round(Fe.reduce((T,W)=>T+(W.utilization_percentage||0),0)/Fe.length):0,qe=new Date,at=new Date(qe.getTime()+30*24*60*60*1e3);let Me=0;return u.forEach(T=>{(T.planned_audits||[]).forEach(W=>{if(W.planned_start_date){const me=new Date(W.planned_start_date);me>=qe&&me<=at&&Me++}})}),{total:u.length,active:s,draft:a,approved:q,completed:z,plannedAudits:re,avgUtilization:lt,upcoming:Me,totalDays:st,byQuarter:{q1:0,q2:0,q3:0,q4:0}}}),E=S(()=>{let u=[...K.value];if(F.value){const s=F.value.toLowerCase();u=u.filter(a=>{var q,z,re;return((q=a.plan_id)==null?void 0:q.toLowerCase().includes(s))||((z=a.status)==null?void 0:z.toLowerCase().includes(s))||((re=a.plan_objectives)==null?void 0:re.toLowerCase().includes(s))})}return Z.value&&(u=u.filter(s=>s.status===Z.value)),ee.value&&(u=u.filter(s=>{var a;return((a=s.plan_year)==null?void 0:a.toString())===ee.value.toString()})),te.value&&(u=u.filter(s=>s.plan_period===te.value)),u.sort((s,a)=>{const q=s[oe.value]||"",z=a[oe.value]||"";return R.value==="asc"?q>z?1:-1:q<z?1:-1}),u}),we=S(()=>[{name:"Financial Audits",utilization:78},{name:"Operational Audits",utilization:65},{name:"Compliance Audits",utilization:82},{name:"IT Audits",utilization:45},{name:"Special Reviews",utilization:30}]),se=S(()=>K.value.reduce((u,s)=>u+(s.total_available_days||0),0)||1e3),be=S(()=>K.value.reduce((u,s)=>u+(s.total_planned_days||0),0)),ge=[{id:"standard",name:"Standard Annual Plan",description:"Comprehensive annual audit plan template",icon:he},{id:"financial",name:"Financial Focus",description:"Emphasis on financial audits and controls",icon:Je},{id:"compliance",name:"Compliance-Driven",description:"Focus on regulatory compliance audits",icon:At},{id:"operational",name:"Operational Excellence",description:"Emphasis on operational efficiency audits",icon:Pt}],X=()=>O(this,null,function*(){V.value=!0;try{yield Promise.all([x.fetchAnnualPlans(),x.fetchAuditUniverse()])}finally{V.value=!1}}),ve=()=>{w.value=null,f.value="create",h.value=!0},le=u=>O(this,null,function*(){w.value=u,f.value="edit",h.value=!0}),ue=u=>{_.push(`/audit-planning/annual-plan/${u.name}`)},fe=u=>O(this,null,function*(){try{const s=yield x.fetchAnnualPlanDetails(u.name);s&&(w.value=ne(ae({},s),{plan_id:`${s.plan_id}_copy`,status:"Draft",name:null}),f.value="create",h.value=!0)}catch(s){console.error("Error duplicating plan:",s)}}),ke=u=>O(this,null,function*(){if(confirm(`Are you sure you want to delete ${u.plan_id}?`))try{yield x.deleteAnnualPlan(u.name),yield X()}catch(s){console.error("Error deleting plan:",s)}}),$e=u=>O(this,null,function*(){try{yield x.createAnnualPlan(u),h.value=!1,w.value=null,yield X()}catch(s){console.error("Error creating plan:",s)}}),xe=u=>O(this,null,function*(){try{yield x.updateAnnualPlan(u.name,u),h.value=!1,w.value=null,yield X()}catch(s){console.error("Error updating plan:",s)}}),Ce=()=>{h.value=!1,w.value=null},Ae=u=>{w.value={template:u.id},f.value="create",b.value=!1,h.value=!0},ce=u=>({Draft:"subtle","Pending Approval":"warning",Approved:"success",Active:"info",Completed:"success",Cancelled:"subtle"})[u]||"subtle",ie=u=>Math.min(u.utilization_percentage||0,100),ye=u=>u>=90?"bg-red-500":u>=75?"bg-amber-500":u>=50?"bg-green-500":"bg-blue-500",i=u=>u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",t=u=>{const s=A.value.indexOf(u);s>-1?A.value.splice(s,1):A.value.push(u)},G=()=>{A.value.length===E.value.length?A.value=[]:A.value=E.value.map(u=>u.name)},pe=u=>{oe.value===u?R.value=R.value==="asc"?"desc":"asc":(oe.value=u,R.value="asc")},r=()=>{F.value="",Z.value="",ee.value="",te.value="",A.value=[]},Pe=()=>O(this,null,function*(){Q.value=!0;try{console.log("Exporting plans...",A.value.length||E.value.length,"plans")}finally{Q.value=!1}}),Ee=()=>{console.log("Bulk update status for:",A.value),v.value=!1},Ze=()=>{console.log("Bulk export for:",A.value),v.value=!1},et=()=>{console.log("Bulk duplicate for:",A.value),v.value=!1},tt=()=>{confirm(`Are you sure you want to delete ${A.value.length} plan(s)?`)&&(console.log("Bulk delete for:",A.value),v.value=!1,A.value=[])};return ct(()=>O(this,null,function*(){yield X()})),(u,s)=>(c(),m("div",Xl,[e("div",Gl,[e("div",null,[e("div",Wl,[e("div",Jl,[n(o(he),{class:"h-6 w-6 text-blue-600"})]),s[15]||(s[15]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Annual Audit Plan"),e("p",{class:"text-gray-600 mt-1"}," Create and manage comprehensive annual audit planning ")],-1))])]),e("div",Zl,[n(o(C),{variant:"outline",size:"sm",onClick:Pe,loading:Q.value},{prefix:p(()=>[n(o(Le),{class:"h-4 w-4"})]),default:p(()=>[s[16]||(s[16]=y(" Export ",-1))]),_:1},8,["loading"]),n(o(C),{variant:"outline",size:"sm",onClick:s[0]||(s[0]=a=>b.value=!0)},{prefix:p(()=>[n(o(Ye),{class:"h-4 w-4"})]),default:p(()=>[s[17]||(s[17]=y(" Templates ",-1))]),_:1}),n(o(C),{variant:"outline",size:"sm",onClick:s[1]||(s[1]=a=>l.value=!0)},{prefix:p(()=>[n(o($t),{class:"h-4 w-4"})]),default:p(()=>[s[18]||(s[18]=y(" Capacity ",-1))]),_:1}),n(o(C),{variant:"outline",size:"sm",onClick:X,loading:V.value},{prefix:p(()=>[n(o(He),{class:"h-4 w-4"})]),default:p(()=>[s[19]||(s[19]=y(" Refresh ",-1))]),_:1},8,["loading"]),n(o(C),{variant:"solid",theme:"blue",size:"sm",onClick:ve},{prefix:p(()=>[n(o(Te),{class:"h-4 w-4"})]),default:p(()=>[s[20]||(s[20]=y(" New Plan ",-1))]),_:1})])]),n(Kl,{stats:I.value,showDetails:$.value},null,8,["stats","showDetails"]),n(ml,{searchQuery:F.value,"onUpdate:searchQuery":s[2]||(s[2]=a=>F.value=a),statusFilter:Z.value,"onUpdate:statusFilter":s[3]||(s[3]=a=>Z.value=a),yearFilter:ee.value,"onUpdate:yearFilter":s[4]||(s[4]=a=>ee.value=a),periodFilter:te.value,"onUpdate:periodFilter":s[5]||(s[5]=a=>te.value=a),viewMode:H.value,"onUpdate:viewMode":s[6]||(s[6]=a=>H.value=a)},null,8,["searchQuery","statusFilter","yearFilter","periodFilter","viewMode"]),e("div",ea,[e("div",ta,[e("div",sa,[s[21]||(s[21]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Quick Actions",-1)),n(o(C),{variant:"outline",size:"sm",onClick:s[7]||(s[7]=a=>v.value=!0),disabled:A.value.length===0},{prefix:p(()=>[n(o(Ct),{class:"h-4 w-4"})]),default:p(()=>[y(" Bulk Actions ("+d(A.value.length)+") ",1)]),_:1},8,["disabled"])]),e("div",la," Showing "+d(E.value.length)+" of "+d(K.value.length)+" plans ",1)])]),e("div",aa,[e("div",na,[e("div",oa,[s[22]||(s[22]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Annual Audit Plans",-1)),e("div",ia,[H.value==="table"&&E.value.length>0?(c(),Y(o(C),{key:0,variant:"outline",size:"sm",onClick:G},{default:p(()=>[y(d(A.value.length===E.value.length?"Deselect All":"Select All"),1)]),_:1})):j("",!0)])])]),H.value==="table"?(c(),m("div",ra,[e("table",da,[e("thead",ua,[e("tr",null,[e("th",ca,[e("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:A.value.length===E.value.length&&E.value.length>0,onChange:G},null,40,pa)]),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:s[8]||(s[8]=a=>pe("plan_id"))},[e("div",ma,[s[23]||(s[23]=e("span",null,"Plan ID",-1)),n(o(Ke),{class:"h-3 w-3"})])]),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:s[9]||(s[9]=a=>pe("plan_year"))},[e("div",ba,[s[24]||(s[24]=e("span",null,"Year",-1)),n(o(Ke),{class:"h-3 w-3"})])]),s[25]||(s[25]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1)),s[26]||(s[26]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Progress",-1)),s[27]||(s[27]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilization",-1)),s[28]||(s[28]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Planned Audits",-1)),s[29]||(s[29]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",ga,[(c(!0),m(M,null,B(E.value,a=>{var q;return c(),m("tr",{key:a.name,class:P(["hover:bg-gray-50 transition-colors",{"bg-blue-50":A.value.includes(a.name)}])},[e("td",va,[e("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:A.value.includes(a.name),onChange:z=>t(a.name)},null,40,fa)]),e("td",xa,[e("div",ya,[e("div",_a,[e("div",ha,d(((q=a.plan_year)==null?void 0:q.toString().slice(-2))||"NA"),1)]),e("div",wa,[e("div",ka,d(a.plan_id),1),e("div",$a,d(a.plan_period),1)])])]),e("td",Ca,[e("div",Aa,d(a.plan_year),1)]),e("td",Pa,[n(o(ze),{variant:ce(a.status),size:"sm"},{default:p(()=>[y(d(a.status),1)]),_:2},1032,["variant"])]),e("td",Fa,[e("div",Sa,[e("div",Da,[e("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:J({width:`${ie(a)}%`})},null,4)]),e("span",Va,d(ie(a))+"%",1)])]),e("td",za,[e("div",Ua,[e("span",ja,d(a.utilization_percentage||0)+"%",1),e("div",Ta,[e("div",{class:P(["h-1.5 rounded-full transition-all duration-300",ye(a.utilization_percentage||0)]),style:J({width:`${Math.min(a.utilization_percentage||0,100)}%`})},null,6)])])]),e("td",Qa,[e("div",Ea,[e("span",qa,d((a.planned_audits||[]).length),1),s[30]||(s[30]=e("span",{class:"text-xs text-gray-500"},"audits",-1))])]),e("td",Ma,[e("div",Ba,[n(o(C),{variant:"ghost",size:"sm",onClick:z=>ue(a),class:"!p-1.5"},{default:p(()=>[n(o(Xe),{class:"h-4 w-4"})]),_:1},8,["onClick"]),n(o(C),{variant:"ghost",size:"sm",onClick:z=>le(a),class:"!p-1.5"},{default:p(()=>[n(o(Ge),{class:"h-4 w-4"})]),_:1},8,["onClick"]),n(o(C),{variant:"ghost",size:"sm",onClick:z=>fe(a),class:"!p-1.5"},{default:p(()=>[n(o(je),{class:"h-4 w-4"})]),_:1},8,["onClick"]),n(o(C),{variant:"ghost",size:"sm",onClick:z=>ke(a),class:"!p-1.5 text-red-500 hover:text-red-700"},{default:p(()=>[n(o(We),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2)}),128))])])])):H.value==="cards"?(c(),m("div",Oa,[e("div",Ia,[(c(!0),m(M,null,B(E.value,a=>{var q;return c(),m("div",{key:a.name,class:P(["bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",{"ring-2 ring-blue-500 bg-blue-50":A.value.includes(a.name)}])},[e("div",Ra,[e("div",Na,[e("div",La,d(((q=a.plan_year)==null?void 0:q.toString().slice(-2))||"NA"),1),e("div",null,[e("h3",Ya,d(a.plan_id),1),e("p",Ha,d(a.plan_period)+" Plan",1)])]),n(o(ze),{variant:ce(a.status),size:"sm"},{default:p(()=>[y(d(a.status),1)]),_:2},1032,["variant"])]),e("div",Ka,[e("div",null,[e("div",Xa,[s[31]||(s[31]=e("span",{class:"text-sm text-gray-600"},"Progress",-1)),e("span",Ga,d(ie(a))+"%",1)]),e("div",Wa,[e("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:J({width:`${ie(a)}%`})},null,4)])]),e("div",Ja,[s[32]||(s[32]=e("span",{class:"text-sm text-gray-600"},"Utilization",-1)),e("span",Za,d(a.utilization_percentage||0)+"%",1)]),e("div",en,[s[33]||(s[33]=e("span",{class:"text-sm text-gray-600"},"Planned Audits",-1)),e("span",tn,d((a.planned_audits||[]).length),1)])]),e("div",sn,[e("div",ln,[n(o(C),{variant:"ghost",size:"sm",onClick:De(z=>ue(a),["stop"]),class:"!p-1.5"},{default:p(()=>[n(o(Xe),{class:"h-4 w-4"})]),_:1},8,["onClick"]),n(o(C),{variant:"ghost",size:"sm",onClick:De(z=>le(a),["stop"]),class:"!p-1.5"},{default:p(()=>[n(o(Ge),{class:"h-4 w-4"})]),_:1},8,["onClick"]),n(o(C),{variant:"ghost",size:"sm",onClick:De(z=>fe(a),["stop"]),class:"!p-1.5"},{default:p(()=>[n(o(je),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),e("div",an,d(i(a.modified)),1)])],2)}),128))])])):H.value==="timeline"?(c(),m("div",nn,[e("div",on,[s[39]||(s[39]=e("div",{class:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200"},null,-1)),(c(!0),m(M,null,B(E.value,(a,q)=>{var z;return c(),m("div",{key:a.name,class:"relative flex items-start mb-8 last:mb-0"},[e("div",rn,d(((z=a.plan_year)==null?void 0:z.toString().slice(-2))||"NA"),1),e("div",dn,[e("div",un,[e("div",null,[e("h3",cn,d(a.plan_id),1),e("p",pn,d(a.plan_period)+"  "+d(a.plan_year),1)]),n(o(ze),{variant:ce(a.status),size:"sm"},{default:p(()=>[y(d(a.status),1)]),_:2},1032,["variant"])]),e("div",mn,[e("div",null,[s[34]||(s[34]=e("p",{class:"text-xs text-gray-500"},"Planned Audits",-1)),e("p",bn,d((a.planned_audits||[]).length),1)]),e("div",null,[s[35]||(s[35]=e("p",{class:"text-xs text-gray-500"},"Utilization",-1)),e("p",gn,d(a.utilization_percentage||0)+"%",1)]),e("div",null,[s[36]||(s[36]=e("p",{class:"text-xs text-gray-500"},"Days Planned",-1)),e("p",vn,d(a.total_planned_days||0),1)])]),e("div",fn,[n(o(C),{variant:"outline",size:"sm",onClick:re=>ue(a)},{default:p(()=>[...s[37]||(s[37]=[y("View",-1)])]),_:1},8,["onClick"]),n(o(C),{variant:"outline",size:"sm",onClick:re=>le(a)},{default:p(()=>[...s[38]||(s[38]=[y("Edit",-1)])]),_:1},8,["onClick"])])])])}),128))])])):j("",!0),E.value.length===0&&K.value.length===0?(c(),m("div",xn,[e("div",yn,[n(o(he),{class:"h-10 w-10 text-blue-500"})]),e("div",_n,[s[42]||(s[42]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Welcome to Annual Planning",-1)),s[43]||(s[43]=e("p",{class:"text-gray-600 mb-8 leading-relaxed"}," Create comprehensive annual audit plans. Set up your audit universe, allocate resources, and track planned activities. ",-1)),e("div",hn,[n(o(C),{variant:"solid",theme:"blue",size:"lg",onClick:ve},{prefix:p(()=>[n(o(Te),{class:"h-5 w-5"})]),default:p(()=>[s[40]||(s[40]=y(" Create Your First Plan ",-1))]),_:1}),n(o(C),{variant:"outline",size:"lg",onClick:s[10]||(s[10]=a=>b.value=!0)},{prefix:p(()=>[n(o(Ye),{class:"h-5 w-5"})]),default:p(()=>[s[41]||(s[41]=y(" Browse Templates ",-1))]),_:1})])])])):E.value.length===0?(c(),m("div",wn,[n(o(Qe),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s[45]||(s[45]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No plans found",-1)),s[46]||(s[46]=e("p",{class:"text-gray-600 mb-6"}," Try adjusting your search or filter criteria. ",-1)),n(o(C),{variant:"outline",onClick:r},{default:p(()=>[...s[44]||(s[44]=[y("Clear Filters",-1)])]),_:1})])):j("",!0)]),n(Zs,{modelValue:h.value,"onUpdate:modelValue":s[11]||(s[11]=a=>h.value=a),plan:w.value,onCreated:$e,onUpdated:xe,onCancelled:Ce},null,8,["modelValue","plan"]),n(o(_e),{modelValue:b.value,"onUpdate:modelValue":s[12]||(s[12]=a=>b.value=a),options:{title:"Plan Templates",size:"lg"}},{body:p(()=>[e("div",kn,[(c(),m(M,null,B(ge,a=>e("div",{key:a.id,class:"border border-gray-200 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition-all",onClick:q=>Ae(a)},[e("div",Cn,[e("div",An,[(c(),Y(pt(a.icon),{class:"h-5 w-5 text-blue-600"}))]),e("div",null,[e("h4",Pn,d(a.name),1),e("p",Fn,d(a.description),1)])])],8,$n)),64))])]),_:1},8,["modelValue"]),n(o(_e),{modelValue:v.value,"onUpdate:modelValue":s[13]||(s[13]=a=>v.value=a),options:{title:"Bulk Actions",size:"md"}},{body:p(()=>[e("div",Sn,[e("p",Dn,d(A.value.length)+" plan(s) selected",1),e("div",Vn,[n(o(C),{variant:"outline",onClick:Ee},{prefix:p(()=>[n(o(He),{class:"h-4 w-4"})]),default:p(()=>[s[47]||(s[47]=y(" Update Status ",-1))]),_:1}),n(o(C),{variant:"outline",onClick:Ze},{prefix:p(()=>[n(o(Le),{class:"h-4 w-4"})]),default:p(()=>[s[48]||(s[48]=y(" Export Selected ",-1))]),_:1}),n(o(C),{variant:"outline",onClick:et},{prefix:p(()=>[n(o(je),{class:"h-4 w-4"})]),default:p(()=>[s[49]||(s[49]=y(" Duplicate ",-1))]),_:1}),n(o(C),{variant:"outline",theme:"red",onClick:tt},{prefix:p(()=>[n(o(We),{class:"h-4 w-4"})]),default:p(()=>[s[50]||(s[50]=y(" Delete Selected ",-1))]),_:1})])])]),_:1},8,["modelValue"]),n(o(_e),{modelValue:l.value,"onUpdate:modelValue":s[14]||(s[14]=a=>l.value=a),options:{title:"Capacity Planning",size:"xl"}},{body:p(()=>[e("div",zn,[e("div",Un,[e("div",jn,[s[51]||(s[51]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resource Allocation Overview",-1)),e("div",Tn,[(c(!0),m(M,null,B(we.value,a=>(c(),m("div",{key:a.name,class:"flex items-center"},[e("div",Qn,d(a.name),1),e("div",En,[e("div",qn,[e("div",{class:P(["h-4 rounded-full transition-all duration-300",a.utilization>90?"bg-red-500":a.utilization>75?"bg-amber-500":"bg-green-500"]),style:J({width:`${a.utilization}%`})},null,6)])]),e("div",Mn,d(a.utilization)+"%",1)]))),128))])])]),e("div",Bn,[e("div",On,[s[55]||(s[55]=e("h3",{class:"text-lg font-semibold text-blue-900 mb-4"},"Summary",-1)),e("div",In,[e("div",Rn,[s[52]||(s[52]=e("span",{class:"text-blue-700"},"Total Capacity",-1)),e("span",Nn,d(se.value)+" days",1)]),e("div",Ln,[s[53]||(s[53]=e("span",{class:"text-blue-700"},"Allocated",-1)),e("span",Yn,d(be.value)+" days",1)]),e("div",Hn,[s[54]||(s[54]=e("span",{class:"text-blue-700"},"Available",-1)),e("span",Kn,d(se.value-be.value)+" days",1)])])]),e("div",Xn,[s[58]||(s[58]=e("h3",{class:"text-lg font-semibold text-amber-900 mb-4"},"Insights",-1)),e("div",Gn,[e("div",Wn,[s[56]||(s[56]=e("span",{class:"text-amber-700"},"Active Plans",-1)),e("span",Jn,d(I.value.active),1)]),e("div",Zn,[s[57]||(s[57]=e("span",{class:"text-amber-700"},"Upcoming Audits",-1)),e("span",eo,d(I.value.upcoming),1)])])])])])]),_:1},8,["modelValue"])]))}};export{io as default};
//# sourceMappingURL=AnnualPlan-DA1rPYc1.js.map
