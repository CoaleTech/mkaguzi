var k=(de,ce,F)=>new Promise((ae,y)=>{var le=C=>{try{B(F.next(C))}catch(I){y(I)}},oe=C=>{try{B(F.throw(C))}catch(I){y(I)}},B=C=>C.done?ae(C.value):Promise.resolve(C.value).then(le,oe);B((F=F.apply(de,ce)).next())});import{ab as rt,ap as ut,r as v,j as f,Q as dt,w as ct,l as r,p as i,q as t,s as n,u as m,v as o,y as te,H as p,A as u,z as g,ac as re,ao as we,F as z,x as j,ah as mt,B as h,$ as vt}from"./vue-DciwFjI_.js";import{v as pt,a as _,c as je,A as gt,D as xt,g as _t}from"./index-qIC3Tfxg.js";import{aL as ft,a3 as bt,a0 as se,c as yt,bv as ht,F as wt,ad as kt,D as Be,n as ue,T as Ne,af as Le,b3 as Pe,Y as Oe,a9 as ke,$ as Ce,U as Y}from"./icons-CtLkBOsu.js";import"./charts-DlPBe6v3.js";import"./utils-Bcd7wHeW.js";const Ct={class:"min-h-screen bg-gray-50"},Dt={class:"bg-white border-b border-gray-200 px-6 py-4"},St={class:"flex justify-between items-center"},Tt={class:"flex items-center gap-4"},Rt={class:"flex items-center gap-3"},At={class:"text-2xl font-bold text-gray-900"},Vt={class:"text-gray-600 mt-1"},Ut={class:"flex gap-3"},Mt={class:"flex items-center gap-2"},Ft={class:"flex items-center gap-2"},It={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10"},$t={class:"flex items-center gap-2"},Et={key:0,class:"flex items-center justify-center py-32"},zt={key:1,class:"p-6 space-y-6"},jt={class:"bg-white rounded-lg border border-gray-200 shadow-sm"},Bt={class:"px-6 py-4 border-b border-gray-200"},Nt={class:"text-sm text-gray-600 mt-1"},Lt={class:"p-6"},Pt={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Ot={class:"block text-sm font-semibold text-gray-700 mb-2"},Yt={key:0,class:"text-red-500"},qt=["disabled"],Ht=["value"],Kt={class:"block text-sm font-semibold text-gray-700 mb-2"},Jt={key:0,class:"text-red-500"},Wt=["disabled"],Qt=["value"],Xt={class:"block text-sm font-semibold text-gray-700 mb-2"},Gt={key:0,class:"text-red-500"},Zt=["disabled"],es=["disabled"],ts={key:0,class:"space-y-6"},ss={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4"},as={class:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow"},ls={class:"flex flex-col items-center text-center"},os={class:"bg-blue-100 p-3 rounded-full mb-3"},ns={class:"text-2xl font-bold text-blue-600 mt-1 tabular-nums"},is={class:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow"},rs={class:"flex flex-col items-center text-center"},us={class:"bg-purple-100 p-3 rounded-full mb-3"},ds={class:"text-2xl font-bold text-purple-600 mt-1 tabular-nums"},cs={class:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow"},ms={class:"flex flex-col items-center text-center"},vs={class:"bg-green-100 p-3 rounded-full mb-3"},ps={class:"text-2xl font-bold text-green-600 mt-1 tabular-nums"},gs={class:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow"},xs={class:"flex flex-col items-center text-center"},_s={class:"bg-yellow-100 p-3 rounded-full mb-3"},fs={class:"text-2xl font-bold text-yellow-600 mt-1 tabular-nums"},bs={class:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow"},ys={class:"flex flex-col items-center text-center"},hs={class:"bg-orange-100 p-3 rounded-full mb-3"},ws={class:"text-2xl font-bold text-orange-600 mt-1 tabular-nums"},ks={class:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow"},Cs={class:"flex flex-col items-center text-center"},Ds={class:"bg-red-100 p-3 rounded-full mb-3"},Ss={class:"text-2xl font-bold text-red-600 mt-1 tabular-nums"},Ts={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Rs={key:0,class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border border-blue-200 p-5 shadow-sm hover:shadow-md transition-shadow min-h-[120px] flex flex-col justify-between"},As={class:"flex items-start justify-between"},Vs={class:"mt-auto"},Us=["title"],Ms={key:1,class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200 p-5 shadow-sm hover:shadow-md transition-shadow min-h-[120px] flex flex-col justify-between"},Fs={class:"flex items-start justify-between"},Is={class:"mt-auto"},$s=["title"],Es={key:2,class:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg border border-gray-300 p-5 shadow-sm hover:shadow-md transition-shadow min-h-[120px] flex flex-col justify-between"},zs={class:"flex items-start justify-between"},js={class:"mt-auto"},Bs=["title"],Ns={key:3,class:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg border border-red-200 p-5 shadow-sm hover:shadow-md transition-shadow min-h-[120px] flex flex-col justify-between"},Ls={class:"flex items-start justify-between"},Ps={class:"mt-auto"},Os=["title"],Ys={key:4,class:"col-span-4 flex items-center justify-center py-8"},qs={key:0,class:"bg-white rounded-lg border border-gray-200 p-5 shadow-sm"},Hs={class:"flex items-center justify-between mb-3"},Ks={class:"flex items-center gap-2"},Js={class:"w-full bg-gray-200 rounded-full h-3 overflow-hidden"},Ws={key:1,class:"bg-white rounded-lg border border-gray-200 p-5 shadow-sm flex items-center justify-center"},Qs={key:1,class:"bg-white rounded-lg border border-gray-200 shadow-sm"},Xs={class:"px-6 py-4 border-b border-gray-200"},Gs={class:"flex justify-between items-center"},Zs={class:"flex gap-2"},ea={class:"p-6"},ta={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},sa={key:0,class:"flex flex-col items-center"},aa={class:"text-sm text-gray-600 mb-3"},la={class:"flex gap-2"},oa={key:1,class:"flex flex-col items-center"},na={class:"flex gap-2 mb-2"},ia={class:"flex items-center gap-1"},ra={key:0,class:"flex flex-col items-center"},ua={class:"text-sm text-gray-600 mb-3"},da={class:"flex gap-2"},ca={key:1,class:"flex flex-col items-center"},ma={class:"flex gap-2 mb-2"},va={class:"flex items-center gap-1"},pa={key:0,class:"flex flex-col items-center"},ga={class:"text-sm text-gray-600 mb-3"},xa={class:"flex gap-2"},_a={key:1,class:"flex flex-col items-center"},fa={class:"flex gap-2 mb-2"},ba={class:"flex items-center gap-1"},ya={key:2,class:"bg-white rounded-lg border border-gray-200 shadow-sm"},ha={class:"px-6 py-4 border-b border-gray-200"},wa={class:"flex justify-between items-center"},ka={class:"text-sm text-gray-600 mt-1"},Ca={class:"flex gap-2"},Da={class:"overflow-x-auto"},Sa={key:0,class:"min-w-full divide-y divide-gray-200"},Ta={class:"bg-white divide-y divide-gray-200"},Ra={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Aa={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Va={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ua={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ma={class:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 tabular-nums"},Fa={class:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 tabular-nums"},Ia=["title"],$a={class:"px-6 py-4 whitespace-nowrap text-center"},Ea={key:0},za={key:1,class:"flex items-center justify-center py-12"},ja={key:0,class:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between"},Ba={class:"text-sm text-gray-700"},Na={class:"flex gap-2"},La={key:3,class:"bg-white rounded-lg border border-gray-200 shadow-sm"},Pa={class:"px-6 py-4 border-b border-gray-200"},Oa={class:"flex justify-between items-center"},Ya={key:0,class:"p-6"},qa={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Ha={class:"text-center p-4 bg-gray-50 rounded-lg"},Ka={class:"text-center p-4 bg-gray-50 rounded-lg"},Ja={class:"text-center p-4 bg-gray-50 rounded-lg"},Wa={class:"text-center p-4 bg-gray-50 rounded-lg"},Qa={class:"text-2xl font-bold text-gray-900"},Xa={class:"max-h-96 overflow-auto"},Ga={class:"min-w-full divide-y divide-gray-200"},Za={class:"bg-gray-50 sticky top-0"},el={class:"bg-white divide-y divide-gray-200"},il={__name:"VATReconciliationDetail",props:{id:String},setup(de){const ce=de,F=rt(),ae=ut(),y=pt(),le=v(null),oe=v(null),B=v(null),C=v(null),I=v(!1),me=v(!1),ve=v(!1),q=v(null),pe=v(!1),A=v(!1),H=v(!1),ne=v(!1),De=v(""),Se=v([]),ge=v([]),V=v("all"),T=v(1),K=v(100),D=v(null),a=v(null),J=v([]),x=v({reconciliation_month:"",fiscal_year:"",reconciliation_type:"",tolerance:.01}),Ye=["January","February","March","April","May","June","July","August","September","October","November","December"],qe=f(()=>{const s=new Date().getFullYear();return Array.from({length:6},(e,c)=>`FY ${s-c}`)}),b=f(()=>ae.path.endsWith("/new")),$=f(()=>{var s;return b.value||((s=a.value)==null?void 0:s.status)==="Draft"}),Te=f(()=>{var e;const s=((e=a.value)==null?void 0:e.reconciliation_type)||x.value.reconciliation_type;return s==="system_vs_itax"||s==="system_vs_tims"||s==="System vs iTax"||s==="System vs TIMs"}),Re=f(()=>{var e;const s=((e=a.value)==null?void 0:e.reconciliation_type)||x.value.reconciliation_type;return s==="system_vs_itax"||s==="itax_vs_tims"||s==="System vs iTax"||s==="iTax vs TIMs"}),Ae=f(()=>{var e;const s=((e=a.value)==null?void 0:e.reconciliation_type)||x.value.reconciliation_type;return s==="system_vs_tims"||s==="itax_vs_tims"||s==="System vs TIMs"||s==="iTax vs TIMs"}),N=f(()=>a.value?["Draft","Files Uploaded","Validated","Validating"].includes(a.value.status):!1),He=f(()=>{if(!a.value||!["Draft","Files Uploaded","Validated"].includes(a.value.status))return!1;const s=a.value.reconciliation_type;return s==="system_vs_itax"||s==="System vs iTax"?a.value.system_data_file&&a.value.itax_data_file:s==="system_vs_tims"||s==="System vs TIMs"?a.value.system_data_file&&a.value.tims_data_file:s==="itax_vs_tims"||s==="iTax vs TIMs"?a.value.itax_data_file&&a.value.tims_data_file:!1}),Ke=f(()=>{var s,e;return J.value.length>0||((s=a.value)==null?void 0:s.status)==="Completed"||((e=a.value)==null?void 0:e.status)==="Reconciled"}),Je=f(()=>{const s=a.value;return[{key:"all",label:"All",count:((s==null?void 0:s.total_matched)||0)+((s==null?void 0:s.total_unmatched_source_a)||0)+((s==null?void 0:s.total_unmatched_source_b)||0)+((s==null?void 0:s.total_amount_discrepancies)||0)},{key:"matched",label:"Matched",count:(s==null?void 0:s.total_matched)||0},{key:"unmatched_a",label:"Missing in B",count:(s==null?void 0:s.total_unmatched_source_a)||0},{key:"unmatched_b",label:"Missing in A",count:(s==null?void 0:s.total_unmatched_source_b)||0},{key:"discrepancy",label:"Amount Mismatch",count:(s==null?void 0:s.total_amount_discrepancies)||0}]}),Ve=f(()=>{const s=(T.value-1)*K.value;return J.value.slice(s,s+K.value)}),xe=f(()=>{const s=a.value;return s?V.value==="matched"?s.total_matched||0:V.value==="unmatched_a"?s.total_unmatched_source_a||0:V.value==="unmatched_b"?s.total_unmatched_source_b||0:V.value==="discrepancy"?s.total_amount_discrepancies||0:(s.total_matched||0)+(s.total_unmatched_source_a||0)+(s.total_unmatched_source_b||0)+(s.total_amount_discrepancies||0):0}),Ue=f(()=>Math.ceil(xe.value/K.value)),U=f(()=>a.value?(a.value.total_source_a_amount||0)-(a.value.total_source_b_amount||0):0),We=f(()=>{var e;const s=((e=a.value)==null?void 0:e.match_percentage)||0;return s>=95?"text-green-600":s>=80?"text-yellow-600":"text-red-600"}),Me=f(()=>{var e;const s=((e=a.value)==null?void 0:e.match_percentage)||0;return s>=95?"bg-green-500":s>=80?"bg-yellow-500":"bg-red-500"}),Qe=s=>{C.value&&!C.value.contains(s.target)&&(H.value=!1)};dt(()=>k(this,null,function*(){document.addEventListener("click",Qe),b.value||(yield _e())}));function _e(){return k(this,null,function*(){var s,e;I.value=!0;try{const c=ce.id||ae.params.id;yield y.fetchReconciliation(c),a.value=y.activeReconciliation,a.value&&(x.value={reconciliation_type:a.value.reconciliation_type,reconciliation_month:a.value.reconciliation_month,fiscal_year:a.value.fiscal_year,tolerance:a.value.tolerance||.01}),(((s=a.value)==null?void 0:s.status)==="Completed"||((e=a.value)==null?void 0:e.status)==="Reconciled")&&(yield ie())}catch(c){console.error("Error loading reconciliation:",c)}finally{I.value=!1}})}function ie(s=null,e=1){return k(this,null,function*(){var c;try{A.value=!0,console.log("loadResults called with filterStatus:",s,"page:",e),console.log("reconciliation.name:",(c=a.value)==null?void 0:c.name);let d=null;s==="matched"?d="Matched":s==="unmatched_a"?d="Unmatched Source A":s==="unmatched_b"?d="Unmatched Source B":s==="discrepancy"&&(d="Amount Discrepancy"),console.log("statusFilter:",d);const R=yield y.fetchResults(a.value.name,d,e);return console.log("store.fetchResults result:",R),J.value=y.reconciliationResults,console.log("reconciliationResults set to:",J.value.length,"items"),R}catch(d){console.error("Error loading results:",d)}finally{A.value=!1}})}function Xe(){return k(this,null,function*(){if(!x.value.reconciliation_month||!x.value.fiscal_year||!x.value.reconciliation_type){alert("Please fill in all required fields");return}me.value=!0;try{const s=yield y.createReconciliation({reconciliation_month:x.value.reconciliation_month,fiscal_year:x.value.fiscal_year,reconciliation_type:x.value.reconciliation_type,tolerance:x.value.tolerance||.01});F.push(`/compliance/vat-reconciliation/${s.name}`)}catch(s){console.error("Error creating reconciliation:",s),alert("Error creating reconciliation: "+s.message)}finally{me.value=!1}})}function L(s){var e,c,d;s==="system"?(e=le.value)==null||e.click():s==="itax"?(c=oe.value)==null||c.click():s==="tims"&&((d=B.value)==null||d.click())}const Ge={system:{filename:"system_data_template.csv",headers:["posting_date","invoice_number","cu_invoice_number","net_amount"],sampleData:[["2024-01-15","INV-001","CU123456789","10000.00"],["2024-01-16","INV-002","CU123456790","5000.00"],["2024-01-17","INV-003","CU123456791","15000.00"]]},itax:{filename:"itax_data_template.csv",headers:["posting_date","cu_invoice_number","amount"],sampleData:[["2024-01-15","CU123456789","10000.00"],["2024-01-16","CU123456790","5000.00"],["2024-01-17","CU123456791","15000.00"]]},tims:{filename:"tims_data_template.csv",headers:["posting_date","cu_invoice_number","amount"],sampleData:[["2024-01-15","CU123456789","10000.00"],["2024-01-16","CU123456790","5000.00"],["2024-01-17","CU123456791","15000.00"]]}};function P(s){const e=Ge[s];if(!e)return;const d=[e.headers,...e.sampleData].map(E=>E.join(",")).join(`
`),R=new Blob([d],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a"),M=URL.createObjectURL(R);w.setAttribute("href",M),w.setAttribute("download",e.filename),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(M)}function Ze(){var s;(s=a.value)!=null&&s.reconciliation_type||x.value.reconciliation_type,Te.value&&P("system"),setTimeout(()=>{Re.value&&P("itax")},100),setTimeout(()=>{Ae.value&&P("tims")},200)}function fe(s,e){return k(this,null,function*(){const c=s.target.files[0];if(c){q.value=e;try{yield y.uploadFile(a.value.name,e,c),yield _e()}catch(d){console.error("Error uploading file:",d),alert("Error uploading file: "+d.message)}finally{q.value=null,s.target.value=""}}})}function et(){return k(this,null,function*(){ve.value=!0;try{yield y.runReconciliation(a.value.name),yield _e(),yield ie()}catch(s){console.error("Error running reconciliation:",s),alert("Error running reconciliation: "+s.message)}finally{ve.value=!1}})}function Fe(s){return k(this,null,function*(){H.value=!1;try{const e=yield y.exportReport(a.value.name,s);e.file_url&&window.open(e.file_url,"_blank")}catch(e){console.error("Error exporting report:",e),alert("Error exporting report: "+e.message)}})}function be(s){return k(this,null,function*(){De.value=s.charAt(0).toUpperCase()+s.slice(1);try{let e="";s==="system"?e="VAT System Data":s==="itax"?e="VAT iTax Data":s==="tims"&&(e="VAT TIMs Data");const c=yield _t("frappe.client.get_list",{doctype:e,filters:{parent:a.value.name},fields:["*"],limit_page_length:100});c.length>0&&(ge.value=Object.keys(c[0]).filter(d=>!d.startsWith("_")&&d!=="name"&&d!=="parent"&&d!=="parenttype"&&d!=="parentfield"&&d!=="docstatus"&&d!=="idx"),Se.value=c),ne.value=!0}catch(e){console.error("Error loading file data:",e)}})}function tt(){return k(this,null,function*(){pe.value=!0;try{yield y.fetchHistoricalComparison(a.value.name),D.value=y.historicalComparison}catch(s){console.error("Error fetching historical comparison:",s)}finally{pe.value=!1}})}function st(){F.push("/compliance/vat-reconciliation")}function Ie(s){return k(this,null,function*(){T.value=s;const e=V.value==="all"?null:V.value;yield ie(e,s)})}function at(s){return{Draft:"subtle","Data Uploaded":"yellow",Reconciled:"blue",Reviewed:"purple",Approved:"green"}[s]||"gray"}function lt(s){return{Matched:"green","Unmatched Source A":"yellow","Unmatched Source B":"orange","Amount Discrepancy":"red"}[s]||"gray"}function ye(s){return s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function S(s){return s==null?"-":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:2}).format(s)}function he(s){if(s==null||s===0)return"KES 0.00";const e=Math.abs(s),c=new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:2}).format(e);return s>0?`+${c}`:`-${c}`}function ot(s,e){return s===0||e==="Matched"?"text-green-600":s>0?"text-orange-600":"text-red-600"}function nt(s,e){return e==="Matched"?"Amounts match within tolerance":e==="Unmatched Source A"?"Only exists in Source A":e==="Unmatched Source B"?"Only exists in Source B":s>0?"Source A amount is higher by "+S(s):s<0?"Source B amount is higher by "+S(Math.abs(s)):""}function it(){var s,e,c,d,R,w,M,E,W,Q,X,G,l,Z,ee,$e,Ee,ze;return{reconciliation_name:(s=a.value)==null?void 0:s.name,reconciliation_month:(e=a.value)==null?void 0:e.reconciliation_month,fiscal_year:(c=a.value)==null?void 0:c.fiscal_year,reconciliation_type:(d=a.value)==null?void 0:d.reconciliation_type,status:(R=a.value)==null?void 0:R.status,tolerance:(w=a.value)==null?void 0:w.tolerance,match_percentage:(M=a.value)==null?void 0:M.match_percentage,total_matched:(E=a.value)==null?void 0:E.total_matched,total_unmatched_source_a:(W=a.value)==null?void 0:W.total_unmatched_source_a,total_unmatched_source_b:(Q=a.value)==null?void 0:Q.total_unmatched_source_b,total_amount_discrepancies:(X=a.value)==null?void 0:X.total_amount_discrepancies,total_source_a_amount:(G=a.value)==null?void 0:G.total_source_a_amount,total_source_b_amount:(l=a.value)==null?void 0:l.total_source_b_amount,total_variance_amount:(Z=a.value)==null?void 0:Z.total_variance_amount,system_records_count:(ee=a.value)==null?void 0:ee.system_records_count,itax_records_count:($e=a.value)==null?void 0:$e.itax_records_count,tims_records_count:(Ee=a.value)==null?void 0:Ee.tims_records_count,sample_discrepancies:(ze=J.value)==null?void 0:ze.slice(0,5).map(O=>({cu_invoice_number:O.cu_invoice_number,invoice_number:O.invoice_number,amount_a:O.amount_a,amount_b:O.amount_b,variance:O.variance,match_status:O.match_status}))}}return ct(V,s=>k(this,null,function*(){var e;T.value=1,(e=a.value)!=null&&e.name&&(yield ie(s==="all"?null:s,T.value))})),(s,e)=>{var c,d,R,w,M,E,W,Q,X,G;return i(),r("div",Ct,[t("div",Dt,[t("div",St,[t("div",Tt,[n(o(_),{variant:"ghost",size:"sm",onClick:st,class:"text-gray-600 hover:text-gray-900"},{default:m(()=>[n(o(ft),{class:"w-5 h-5"})]),_:1}),t("div",null,[t("div",Rt,[t("h1",At,u(b.value?"New VAT Reconciliation":((c=a.value)==null?void 0:c.name)||"VAT Reconciliation"),1),!b.value&&a.value?(i(),te(o(je),{key:0,variant:at(a.value.status)},{default:m(()=>[g(u(a.value.status),1)]),_:1},8,["variant"])):p("",!0)]),t("p",Vt,u(b.value?"Create a new VAT reconciliation record":"Manage VAT data reconciliation"),1)])]),t("div",Ut,[!b.value&&He.value?(i(),te(o(_),{key:0,variant:"solid",size:"sm",onClick:et,loading:ve.value,class:"bg-blue-600 hover:bg-blue-700 shadow-sm"},{default:m(()=>[t("div",Mt,[n(o(bt),{class:"w-4 h-4"}),e[26]||(e[26]=t("span",null,"Run Reconciliation",-1))])]),_:1},8,["loading"])):p("",!0),b.value?p("",!0):(i(),r("div",{key:1,class:"relative",ref_key:"exportDropdownRef",ref:C},[n(o(_),{variant:"solid",size:"sm",onClick:e[0]||(e[0]=l=>H.value=!H.value),class:"bg-gray-600 hover:bg-gray-700 shadow-sm"},{default:m(()=>[t("div",Ft,[n(o(se),{class:"w-4 h-4"}),e[27]||(e[27]=t("span",null,"Export",-1)),n(o(yt),{class:"w-4 h-4"})])]),_:1}),H.value?(i(),r("div",It,[t("button",{onClick:e[1]||(e[1]=l=>Fe("excel")),class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 rounded-t-lg flex items-center gap-2"},[n(o(ht),{class:"w-4 h-4"}),e[28]||(e[28]=g(" Export to Excel ",-1))]),t("button",{onClick:e[2]||(e[2]=l=>Fe("pdf")),class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 rounded-b-lg flex items-center gap-2"},[n(o(wt),{class:"w-4 h-4"}),e[29]||(e[29]=g(" Export to PDF ",-1))])])):p("",!0)],512)),!b.value&&a.value?(i(),te(gt,{key:2,contextType:"vat-reconciliation",pageComponent:"VATReconciliationDetail",contextData:it(),variant:"solid",size:"sm",theme:"purple"},null,8,["contextData"])):p("",!0),b.value?(i(),te(o(_),{key:3,variant:"solid",size:"sm",onClick:Xe,loading:me.value,class:"bg-green-600 hover:bg-green-700 shadow-sm"},{default:m(()=>[t("div",$t,[n(o(kt),{class:"w-4 h-4"}),e[30]||(e[30]=t("span",null,"Create",-1))])]),_:1},8,["loading"])):p("",!0)])])]),I.value?(i(),r("div",Et,[...e[31]||(e[31]=[t("div",{class:"flex flex-col items-center gap-4"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),t("span",{class:"text-gray-600 font-medium"},"Loading reconciliation data...")],-1)])])):(i(),r("div",zt,[t("div",jt,[t("div",Bt,[e[32]||(e[32]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Reconciliation Configuration",-1)),t("p",Nt,u(b.value?"Set up the basic parameters for this VAT reconciliation":"Configuration details for this reconciliation"),1)]),t("div",Lt,[t("div",Pt,[t("div",null,[t("label",Ot,[e[33]||(e[33]=g("Reconciliation Month ",-1)),$.value?(i(),r("span",Yt,"*")):p("",!0)]),re(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>x.value.reconciliation_month=l),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",disabled:!$.value},[e[34]||(e[34]=t("option",{value:""},"Select Month",-1)),(i(),r(z,null,j(Ye,l=>t("option",{key:l,value:l},u(l),9,Ht)),64))],8,qt),[[we,x.value.reconciliation_month]])]),t("div",null,[t("label",Kt,[e[35]||(e[35]=g("Fiscal Year ",-1)),$.value?(i(),r("span",Jt,"*")):p("",!0)]),re(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>x.value.fiscal_year=l),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",disabled:!$.value},[e[36]||(e[36]=t("option",{value:""},"Select Year",-1)),(i(!0),r(z,null,j(qe.value,l=>(i(),r("option",{key:l,value:l},u(l),9,Qt))),128))],8,Wt),[[we,x.value.fiscal_year]])]),t("div",null,[t("label",Xt,[e[37]||(e[37]=g("Reconciliation Type ",-1)),$.value?(i(),r("span",Gt,"*")):p("",!0)]),re(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>x.value.reconciliation_type=l),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",disabled:!$.value},[...e[38]||(e[38]=[t("option",{value:""},"Select Type",-1),t("option",{value:"System vs iTax"},"System vs iTax",-1),t("option",{value:"System vs TIMs"},"System vs TIMs",-1),t("option",{value:"iTax vs TIMs"},"iTax vs TIMs",-1)])],8,Zt),[[we,x.value.reconciliation_type]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Tolerance (±)",-1)),re(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>x.value.tolerance=l),type:"number",step:"0.01",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"0.01",disabled:!$.value},null,8,es),[[mt,x.value.tolerance,void 0,{number:!0}]])])])])]),!b.value&&a.value?(i(),r("div",ts,[t("div",ss,[t("div",as,[t("div",ls,[t("div",os,[n(o(Be),{class:"w-5 h-5 text-blue-600"})]),e[40]||(e[40]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Source A",-1)),t("p",ns,u(a.value.total_source_a_records||0),1),e[41]||(e[41]=t("p",{class:"text-xs text-gray-400"},"records",-1))])]),t("div",is,[t("div",rs,[t("div",us,[n(o(Be),{class:"w-5 h-5 text-purple-600"})]),e[42]||(e[42]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Source B",-1)),t("p",ds,u(a.value.total_source_b_records||0),1),e[43]||(e[43]=t("p",{class:"text-xs text-gray-400"},"records",-1))])]),t("div",cs,[t("div",ms,[t("div",vs,[n(o(ue),{class:"w-5 h-5 text-green-600"})]),e[44]||(e[44]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Matched",-1)),t("p",ps,u(a.value.total_matched||0),1),e[45]||(e[45]=t("p",{class:"text-xs text-gray-400"},"records",-1))])]),t("div",gs,[t("div",xs,[t("div",_s,[n(o(Ne),{class:"w-5 h-5 text-yellow-600"})]),e[46]||(e[46]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Missing in B",-1)),t("p",fs,u(a.value.total_unmatched_source_a||0),1),e[47]||(e[47]=t("p",{class:"text-xs text-gray-400"},"CU Invoices",-1))])]),t("div",bs,[t("div",ys,[t("div",hs,[n(o(Ne),{class:"w-5 h-5 text-orange-600"})]),e[48]||(e[48]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Missing in A",-1)),t("p",ws,u(a.value.total_unmatched_source_b||0),1),e[49]||(e[49]=t("p",{class:"text-xs text-gray-400"},"CU Invoices",-1))])]),t("div",ks,[t("div",Cs,[t("div",Ds,[n(o(Le),{class:"w-5 h-5 text-red-600"})]),e[50]||(e[50]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Amount Mismatch",-1)),t("p",Ss,u(a.value.total_amount_discrepancies||0),1),e[51]||(e[51]=t("p",{class:"text-xs text-gray-400"},"records",-1))])])]),t("div",Ts,[A.value?p("",!0):(i(),r("div",Rs,[t("div",As,[e[52]||(e[52]=t("p",{class:"text-xs font-semibold text-blue-700 uppercase tracking-wide"},"Source A Total",-1)),n(o(Pe),{class:"w-5 h-5 text-blue-500 flex-shrink-0"})]),t("div",Vs,[t("p",{class:"text-xl font-bold text-blue-800 tabular-nums truncate",title:S(a.value.total_source_a_amount||0)},u(S(a.value.total_source_a_amount||0)),9,Us)])])),A.value?p("",!0):(i(),r("div",Ms,[t("div",Fs,[e[53]||(e[53]=t("p",{class:"text-xs font-semibold text-purple-700 uppercase tracking-wide"},"Source B Total",-1)),n(o(Pe),{class:"w-5 h-5 text-purple-500 flex-shrink-0"})]),t("div",Is,[t("p",{class:"text-xl font-bold text-purple-800 tabular-nums truncate",title:S(a.value.total_source_b_amount||0)},u(S(a.value.total_source_b_amount||0)),9,$s)])])),A.value?p("",!0):(i(),r("div",Es,[t("div",zs,[e[54]||(e[54]=t("p",{class:"text-xs font-semibold text-gray-700 uppercase tracking-wide"},"Net Difference",-1)),n(o(Oe),{class:"w-5 h-5 text-gray-500 flex-shrink-0"})]),t("div",js,[t("p",{class:h(["text-xl font-bold tabular-nums truncate",U.value>0?"text-orange-600":U.value<0?"text-red-600":"text-green-600"]),title:he(U.value)},u(he(U.value)),11,Bs),t("p",{class:h(["text-xs mt-1",U.value>0?"text-orange-500":U.value<0?"text-red-500":"text-green-500"])},u(U.value>0?"↑ Source A higher":U.value<0?"↓ Source B higher":"= Balanced"),3)])])),A.value?(i(),r("div",Ys,[...e[57]||(e[57]=[t("div",{class:"flex items-center gap-3"},[t("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t("span",{class:"text-gray-600"},"Loading summary data...")],-1)])])):(i(),r("div",Ns,[t("div",Ls,[e[55]||(e[55]=t("p",{class:"text-xs font-semibold text-red-700 uppercase tracking-wide"},"Total Variance",-1)),n(o(Le),{class:"w-5 h-5 text-red-500 flex-shrink-0"})]),t("div",Ps,[t("p",{class:"text-xl font-bold text-red-800 tabular-nums truncate",title:S(a.value.total_variance_amount||0)},u(S(a.value.total_variance_amount||0)),9,Os),e[56]||(e[56]=t("p",{class:"text-xs text-red-500 mt-1"},"Sum of all discrepancies",-1))])]))]),A.value?(i(),r("div",Ws,[...e[60]||(e[60]=[t("div",{class:"flex items-center gap-3"},[t("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t("span",{class:"text-gray-600"},"Loading match rate...")],-1)])])):(i(),r("div",qs,[t("div",Hs,[t("div",Ks,[t("div",{class:h(["w-3 h-3 rounded-full",Me.value])},null,2),e[58]||(e[58]=t("p",{class:"text-sm font-semibold text-gray-700"},"Match Rate",-1))]),t("p",{class:h(["text-lg font-bold tabular-nums",We.value])},u((a.value.match_percentage||0).toFixed(1))+"% ",3)]),t("div",Js,[t("div",{class:h(["h-3 rounded-full transition-all duration-700 ease-out",Me.value]),style:vt({width:(a.value.match_percentage||0)+"%"})},null,6)]),e[59]||(e[59]=t("div",{class:"flex justify-between mt-2 text-xs text-gray-500"},[t("span",null,"0%"),t("span",null,"50%"),t("span",null,"100%")],-1))]))])):p("",!0),b.value?p("",!0):(i(),r("div",Qs,[t("div",Xs,[t("div",Gs,[e[62]||(e[62]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"},"Data Files"),t("p",{class:"text-sm text-gray-600 mt-1"},"Upload CSV files for reconciliation. Required files depend on reconciliation type.")],-1)),t("div",Zs,[n(o(_),{variant:"outline",size:"sm",onClick:Ze},{default:m(()=>[n(o(se),{class:"w-4 h-4 mr-1"}),e[61]||(e[61]=g(" Download All Templates ",-1))]),_:1})])])]),t("div",ea,[t("div",ta,[Te.value?(i(),r("div",{key:0,class:h(["border-2 border-dashed rounded-lg p-6 text-center transition-colors",(d=a.value)!=null&&d.system_data_file?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-400"])},[(R=a.value)!=null&&R.system_data_file?(i(),r("div",sa,[n(o(ue),{class:"w-12 h-12 text-green-500 mb-3"}),e[65]||(e[65]=t("p",{class:"font-medium text-green-700 mb-1"},"System Data Uploaded",-1)),t("p",aa,u(a.value.system_records_count||0)+" records",1),t("div",la,[n(o(_),{variant:"ghost",size:"sm",onClick:e[7]||(e[7]=l=>be("system"))},{default:m(()=>[n(o(ke),{class:"w-4 h-4 mr-1"}),e[63]||(e[63]=g(" View ",-1))]),_:1}),n(o(_),{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=l=>L("system")),disabled:!N.value},{default:m(()=>[n(o(Ce),{class:"w-4 h-4 mr-1"}),e[64]||(e[64]=g(" Replace ",-1))]),_:1},8,["disabled"])])])):(i(),r("div",oa,[n(o(Y),{class:"w-12 h-12 text-gray-400 mb-3"}),e[68]||(e[68]=t("p",{class:"font-medium text-gray-700 mb-1"},"System Data",-1)),e[69]||(e[69]=t("p",{class:"text-sm text-gray-500 mb-3"},"CSV with posting_date, invoice_number, cu_invoice_number, net_amount",-1)),t("div",na,[n(o(_),{variant:"solid",size:"sm",onClick:e[9]||(e[9]=l=>L("system")),disabled:!N.value,loading:q.value==="system",class:"bg-blue-600 hover:bg-blue-700"},{default:m(()=>[t("span",ia,[n(o(Y),{class:"w-4 h-4 shrink-0"}),e[66]||(e[66]=t("span",null,"Upload CSV",-1))])]),_:1},8,["disabled","loading"])]),t("button",{onClick:e[10]||(e[10]=l=>P("system")),class:"text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1"},[n(o(se),{class:"w-3 h-3"}),e[67]||(e[67]=g(" Download Template ",-1))])])),t("input",{ref_key:"systemFileInput",ref:le,type:"file",accept:".csv",class:"hidden",onChange:e[11]||(e[11]=l=>fe(l,"system"))},null,544)],2)):p("",!0),Re.value?(i(),r("div",{key:1,class:h(["border-2 border-dashed rounded-lg p-6 text-center transition-colors",(w=a.value)!=null&&w.itax_data_file?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-400"])},[(M=a.value)!=null&&M.itax_data_file?(i(),r("div",ra,[n(o(ue),{class:"w-12 h-12 text-green-500 mb-3"}),e[72]||(e[72]=t("p",{class:"font-medium text-green-700 mb-1"},"iTax Data Uploaded",-1)),t("p",ua,u(a.value.itax_records_count||0)+" records",1),t("div",da,[n(o(_),{variant:"ghost",size:"sm",onClick:e[12]||(e[12]=l=>be("itax"))},{default:m(()=>[n(o(ke),{class:"w-4 h-4 mr-1"}),e[70]||(e[70]=g(" View ",-1))]),_:1}),n(o(_),{variant:"ghost",size:"sm",onClick:e[13]||(e[13]=l=>L("itax")),disabled:!N.value},{default:m(()=>[n(o(Ce),{class:"w-4 h-4 mr-1"}),e[71]||(e[71]=g(" Replace ",-1))]),_:1},8,["disabled"])])])):(i(),r("div",ca,[n(o(Y),{class:"w-12 h-12 text-gray-400 mb-3"}),e[75]||(e[75]=t("p",{class:"font-medium text-gray-700 mb-1"},"iTax Data",-1)),e[76]||(e[76]=t("p",{class:"text-sm text-gray-500 mb-3"},"CSV with posting_date, cu_invoice_number, amount",-1)),t("div",ma,[n(o(_),{variant:"solid",size:"sm",onClick:e[14]||(e[14]=l=>L("itax")),disabled:!N.value,loading:q.value==="itax",class:"bg-blue-600 hover:bg-blue-700"},{default:m(()=>[t("span",va,[n(o(Y),{class:"w-4 h-4 shrink-0"}),e[73]||(e[73]=t("span",null,"Upload CSV",-1))])]),_:1},8,["disabled","loading"])]),t("button",{onClick:e[15]||(e[15]=l=>P("itax")),class:"text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1"},[n(o(se),{class:"w-3 h-3"}),e[74]||(e[74]=g(" Download Template ",-1))])])),t("input",{ref_key:"itaxFileInput",ref:oe,type:"file",accept:".csv",class:"hidden",onChange:e[16]||(e[16]=l=>fe(l,"itax"))},null,544)],2)):p("",!0),Ae.value?(i(),r("div",{key:2,class:h(["border-2 border-dashed rounded-lg p-6 text-center transition-colors",(E=a.value)!=null&&E.tims_data_file?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-400"])},[(W=a.value)!=null&&W.tims_data_file?(i(),r("div",pa,[n(o(ue),{class:"w-12 h-12 text-green-500 mb-3"}),e[79]||(e[79]=t("p",{class:"font-medium text-green-700 mb-1"},"TIMs Data Uploaded",-1)),t("p",ga,u(a.value.tims_records_count||0)+" records",1),t("div",xa,[n(o(_),{variant:"ghost",size:"sm",onClick:e[17]||(e[17]=l=>be("tims"))},{default:m(()=>[n(o(ke),{class:"w-4 h-4 mr-1"}),e[77]||(e[77]=g(" View ",-1))]),_:1}),n(o(_),{variant:"ghost",size:"sm",onClick:e[18]||(e[18]=l=>L("tims")),disabled:!N.value},{default:m(()=>[n(o(Ce),{class:"w-4 h-4 mr-1"}),e[78]||(e[78]=g(" Replace ",-1))]),_:1},8,["disabled"])])])):(i(),r("div",_a,[n(o(Y),{class:"w-12 h-12 text-gray-400 mb-3"}),e[82]||(e[82]=t("p",{class:"font-medium text-gray-700 mb-1"},"TIMs Device Data",-1)),e[83]||(e[83]=t("p",{class:"text-sm text-gray-500 mb-3"},"CSV with posting_date, cu_invoice_number, amount",-1)),t("div",fa,[n(o(_),{variant:"solid",size:"sm",onClick:e[19]||(e[19]=l=>L("tims")),disabled:!N.value,loading:q.value==="tims",class:"bg-blue-600 hover:bg-blue-700"},{default:m(()=>[t("span",ba,[n(o(Y),{class:"w-4 h-4 shrink-0"}),e[80]||(e[80]=t("span",null,"Upload CSV",-1))])]),_:1},8,["disabled","loading"])]),t("button",{onClick:e[20]||(e[20]=l=>P("tims")),class:"text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1"},[n(o(se),{class:"w-3 h-3"}),e[81]||(e[81]=g(" Download Template ",-1))])])),t("input",{ref_key:"timsFileInput",ref:B,type:"file",accept:".csv",class:"hidden",onChange:e[21]||(e[21]=l=>fe(l,"tims"))},null,544)],2)):p("",!0)])])])),!b.value&&Ke.value?(i(),r("div",ya,[t("div",ha,[t("div",wa,[t("div",null,[e[84]||(e[84]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Reconciliation Results",-1)),t("p",ka," Last reconciled: "+u((Q=a.value)!=null&&Q.last_reconciled_at?ye(a.value.last_reconciled_at):"Never"),1)]),t("div",Ca,[(i(!0),r(z,null,j(Je.value,l=>(i(),te(o(_),{key:l.key,variant:"ghost",size:"sm",class:h(V.value===l.key?"bg-blue-100 text-blue-700":""),onClick:Z=>V.value=l.key},{default:m(()=>[g(u(l.label)+" ("+u(l.count)+") ",1)]),_:2},1032,["class","onClick"]))),128))])])]),t("div",Da,[A.value?(i(),r("div",za,[...e[87]||(e[87]=[t("div",{class:"flex items-center gap-3"},[t("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t("span",{class:"text-gray-600"},"Loading reconciliation results...")],-1)])])):(i(),r("table",Sa,[e[86]||(e[86]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"CU Invoice No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Invoice No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date (Source A)"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date (Source B)"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount (Source A)"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount (Source B)"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Variance"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),t("tbody",Ta,[(i(!0),r(z,null,j(Ve.value,l=>(i(),r("tr",{key:l.name,class:"hover:bg-gray-50"},[t("td",Ra,u(l.cu_invoice_number),1),t("td",Aa,u(l.invoice_number||"-"),1),t("td",Va,u(ye(l.posting_date_a)),1),t("td",Ua,u(ye(l.posting_date_b)),1),t("td",Ma,u(S(l.amount_a)),1),t("td",Fa,u(S(l.amount_b)),1),t("td",{class:h(["px-6 py-4 whitespace-nowrap text-sm text-right font-medium tabular-nums",ot(l.variance,l.match_status)]),title:nt(l.variance,l.match_status)},u(he(l.variance)),11,Ia),t("td",$a,[n(o(je),{variant:lt(l.match_status)},{default:m(()=>[g(u(l.match_status),1)]),_:2},1032,["variant"])])]))),128)),Ve.value.length===0&&!A.value?(i(),r("tr",Ea,[...e[85]||(e[85]=[t("td",{colspan:"8",class:"px-6 py-12 text-center text-gray-500"}," No records found for this filter ",-1)])])):p("",!0)])]))]),Ue.value>1?(i(),r("div",ja,[t("p",Ba," Showing "+u((T.value-1)*K.value+1)+" - "+u(Math.min(T.value*K.value,xe.value))+" of "+u(xe.value),1),t("div",Na,[n(o(_),{variant:"ghost",size:"sm",disabled:T.value===1,onClick:e[22]||(e[22]=l=>Ie(T.value-1))},{default:m(()=>[...e[88]||(e[88]=[g(" Previous ",-1)])]),_:1},8,["disabled"]),n(o(_),{variant:"ghost",size:"sm",disabled:T.value===Ue.value,onClick:e[23]||(e[23]=l=>Ie(T.value+1))},{default:m(()=>[...e[89]||(e[89]=[g(" Next ",-1)])]),_:1},8,["disabled"])])])):p("",!0)])):p("",!0),!b.value&&((X=a.value)==null?void 0:X.status)==="Reconciled"?(i(),r("div",La,[t("div",Pa,[t("div",Oa,[e[91]||(e[91]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"},"Historical Comparison"),t("p",{class:"text-sm text-gray-600 mt-1"},"Compare with previous month's reconciliation")],-1)),n(o(_),{variant:"solid",size:"sm",onClick:tt,loading:pe.value,class:"bg-gray-600 hover:bg-gray-700"},{default:m(()=>[n(o(Oe),{class:"w-4 h-4 mr-1"}),e[90]||(e[90]=g(" Load Comparison ",-1))]),_:1},8,["loading"])])]),D.value?(i(),r("div",Ya,[t("div",qa,[t("div",Ha,[e[92]||(e[92]=t("p",{class:"text-sm text-gray-600 mb-1"},"Match Rate Change",-1)),t("p",{class:h(["text-2xl font-bold",D.value.match_rate_change>=0?"text-green-600":"text-red-600"])},u(D.value.match_rate_change>=0?"+":"")+u((G=D.value.match_rate_change)==null?void 0:G.toFixed(1))+"% ",3)]),t("div",Ka,[e[93]||(e[93]=t("p",{class:"text-sm text-gray-600 mb-1"},"Discrepancy Change",-1)),t("p",{class:h(["text-2xl font-bold",D.value.discrepancy_change<=0?"text-green-600":"text-red-600"])},u(D.value.discrepancy_change>=0?"+":"")+u(D.value.discrepancy_change),3)]),t("div",Ja,[e[94]||(e[94]=t("p",{class:"text-sm text-gray-600 mb-1"},"Variance Change",-1)),t("p",{class:h(["text-2xl font-bold",D.value.variance_change<=0?"text-green-600":"text-red-600"])},u(S(D.value.variance_change)),3)]),t("div",Wa,[e[95]||(e[95]=t("p",{class:"text-sm text-gray-600 mb-1"},"Previous Month",-1)),t("p",Qa,u(D.value.previous_month),1)])])])):p("",!0)])):p("",!0)])),n(o(xt),{modelValue:ne.value,"onUpdate:modelValue":e[25]||(e[25]=l=>ne.value=l),options:{title:`${De.value} Data Preview`,size:"xl"}},{"body-content":m(()=>[t("div",Xa,[t("table",Ga,[t("thead",Za,[t("tr",null,[(i(!0),r(z,null,j(ge.value,l=>(i(),r("th",{key:l,class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},u(l),1))),128))])]),t("tbody",el,[(i(!0),r(z,null,j(Se.value,(l,Z)=>(i(),r("tr",{key:Z,class:"hover:bg-gray-50"},[(i(!0),r(z,null,j(ge.value,ee=>(i(),r("td",{key:ee,class:"px-4 py-2 text-sm text-gray-900"},u(l[ee]),1))),128))]))),128))])])])]),actions:m(()=>[n(o(_),{variant:"solid",size:"sm",onClick:e[24]||(e[24]=l=>ne.value=!1)},{default:m(()=>[...e[96]||(e[96]=[g("Close",-1)])]),_:1})]),_:1},8,["modelValue","options"])])}}};export{il as default};
//# sourceMappingURL=VATReconciliationDetail-tzv4GcET.js.map
