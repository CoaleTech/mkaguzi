const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RiskAssessmentDetail-D0tBLF4M.js","assets/RiskAssessmentDetail-Cxq2ngei.css"])))=>i.map(i=>d[i]);
var Joe=Object.defineProperty,ele=Object.defineProperties;var tle=Object.getOwnPropertyDescriptors;var Ub=Object.getOwnPropertySymbols;var M6=Object.prototype.hasOwnProperty,$6=Object.prototype.propertyIsEnumerable;var MA=(t,e,n)=>e in t?Joe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,me=(t,e)=>{for(var n in e||(e={}))M6.call(e,n)&&MA(t,n,e[n]);if(Ub)for(var n of Ub(e))$6.call(e,n)&&MA(t,n,e[n]);return t},je=(t,e)=>ele(t,tle(e));var Si=(t,e)=>{var n={};for(var r in t)M6.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ub)for(var r of Ub(t))e.indexOf(r)<0&&$6.call(t,r)&&(n[r]=t[r]);return n};var ct=(t,e,n)=>MA(t,typeof e!="symbol"?e+"":e,n);var le=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{o(n.next(l))}catch(d){i(d)}},s=l=>{try{o(n.throw(l))}catch(d){i(d)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,s);o((n=n.apply(t,e)).next())});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function AD(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Mn={},Mm=[],kl=()=>{},_W=()=>!1,xS=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),TD=t=>t.startsWith("onUpdate:"),li=Object.assign,ED=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},nle=Object.prototype.hasOwnProperty,Fn=(t,e)=>nle.call(t,e),Dt=Array.isArray,$m=t=>H1(t)==="[object Map]",Tg=t=>H1(t)==="[object Set]",D6=t=>H1(t)==="[object Date]",Xt=t=>typeof t=="function",Sr=t=>typeof t=="string",To=t=>typeof t=="symbol",Xn=t=>t!==null&&typeof t=="object",xW=t=>(Xn(t)||Xt(t))&&Xt(t.then)&&Xt(t.catch),wW=Object.prototype.toString,H1=t=>wW.call(t),rle=t=>H1(t).slice(8,-1),kW=t=>H1(t)==="[object Object]",wS=t=>Sr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,$y=AD(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),kS=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},ile=/-\w/g,xa=kS(t=>t.replace(ile,e=>e.slice(1).toUpperCase())),ale=/\B([A-Z])/g,ld=kS(t=>t.replace(ale,"-$1").toLowerCase()),SS=kS(t=>t.charAt(0).toUpperCase()+t.slice(1)),Dy=kS(t=>t?`on${SS(t)}`:""),Na=(t,e)=>!Object.is(t,e),Jx=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},SW=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},CS=t=>{const e=parseFloat(t);return isNaN(e)?t:e},sle=t=>{const e=Sr(t)?Number(t):NaN;return isNaN(e)?t:e};let R6;const AS=()=>R6||(R6=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function nt(t){if(Dt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Sr(r)?dle(r):nt(r);if(i)for(const a in i)e[a]=i[a]}return e}else if(Sr(t)||Xn(t))return t}const ole=/;(?![^(]*\))/g,lle=/:([^]+)/,ule=/\/\*[^]*?\*\//g;function dle(t){const e={};return t.replace(ule,"").split(ole).forEach(n=>{if(n){const r=n.split(lle);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function fe(t){let e="";if(Sr(t))e=t;else if(Dt(t))for(let n=0;n<t.length;n++){const r=fe(t[n]);r&&(e+=r+" ")}else if(Xn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Tr(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Sr(e)&&(t.class=fe(e)),n&&(t.style=nt(n)),t}const cle="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fle=AD(cle);function CW(t){return!!t||t===""}function ple(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Lp(t[r],e[r]);return n}function Lp(t,e){if(t===e)return!0;let n=D6(t),r=D6(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=To(t),r=To(e),n||r)return t===e;if(n=Dt(t),r=Dt(e),n||r)return n&&r?ple(t,e):!1;if(n=Xn(t),r=Xn(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,a=Object.keys(e).length;if(i!==a)return!1;for(const s in t){const o=t.hasOwnProperty(s),l=e.hasOwnProperty(s);if(o&&!l||!o&&l||!Lp(t[s],e[s]))return!1}}return String(t)===String(e)}function MD(t,e){return t.findIndex(n=>Lp(n,e))}const AW=t=>!!(t&&t.__v_isRef===!0),E=t=>Sr(t)?t:t==null?"":Dt(t)||Xn(t)&&(t.toString===wW||!Xt(t.toString))?AW(t)?E(t.value):JSON.stringify(t,TW,2):String(t),TW=(t,e)=>AW(e)?TW(t,e.value):$m(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],a)=>(n[$A(r,a)+" =>"]=i,n),{})}:Tg(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>$A(n))}:To(e)?$A(e):Xn(e)&&!Dt(e)&&!kW(e)?String(e):e,$A=(t,e="")=>{var n;return To(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hi;class EW{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Hi,!e&&Hi&&(this.index=(Hi.scopes||(Hi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Hi;try{return Hi=this,e()}finally{Hi=n}}}on(){++this._on===1&&(this.prevScope=Hi,Hi=this)}off(){this._on>0&&--this._on===0&&(Hi=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function TS(t){return new EW(t)}function q1(){return Hi}function W1(t,e=!1){Hi&&Hi.cleanups.push(t)}let or;const DA=new WeakSet;class MW{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Hi&&Hi.active&&Hi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,DA.has(this)&&(DA.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||DW(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,P6(this),RW(this);const e=or,n=ko;or=this,ko=!0;try{return this.fn()}finally{PW(this),or=e,ko=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)RD(e);this.deps=this.depsTail=void 0,P6(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?DA.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){V5(this)&&this.run()}get dirty(){return V5(this)}}let $W=0,Ry,Py;function DW(t,e=!1){if(t.flags|=8,e){t.next=Py,Py=t;return}t.next=Ry,Ry=t}function $D(){$W++}function DD(){if(--$W>0)return;if(Py){let e=Py;for(Py=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ry;){let e=Ry;for(Ry=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function RW(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function PW(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),RD(r),hle(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function V5(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(IW(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function IW(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===C0)||(t.globalVersion=C0,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!V5(t))))return;t.flags|=2;const e=t.dep,n=or,r=ko;or=t,ko=!0;try{RW(t);const i=t.fn(t._value);(e.version===0||Na(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{or=n,ko=r,PW(t),t.flags&=-3}}function RD(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)RD(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function hle(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ko=!0;const OW=[];function qu(){OW.push(ko),ko=!1}function Wu(){const t=OW.pop();ko=t===void 0?!0:t}function P6(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=or;or=void 0;try{e()}finally{or=n}}}let C0=0,mle=class{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class ES{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!or||!ko||or===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==or)n=this.activeLink=new mle(or,this),or.deps?(n.prevDep=or.depsTail,or.depsTail.nextDep=n,or.depsTail=n):or.deps=or.depsTail=n,LW(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=or.depsTail,n.nextDep=void 0,or.depsTail.nextDep=n,or.depsTail=n,or.deps===n&&(or.deps=r)}return n}trigger(e){this.version++,C0++,this.notify(e)}notify(e){$D();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{DD()}}}function LW(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)LW(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Xw=new WeakMap,dp=Symbol(""),N5=Symbol(""),A0=Symbol("");function Yi(t,e,n){if(ko&&or){let r=Xw.get(t);r||Xw.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new ES),i.map=r,i.key=n),i.track()}}function Cu(t,e,n,r,i,a){const s=Xw.get(t);if(!s){C0++;return}const o=l=>{l&&l.trigger()};if($D(),e==="clear")s.forEach(o);else{const l=Dt(t),d=l&&wS(n);if(l&&n==="length"){const c=Number(r);s.forEach((f,p)=>{(p==="length"||p===A0||!To(p)&&p>=c)&&o(f)})}else switch((n!==void 0||s.has(void 0))&&o(s.get(n)),d&&o(s.get(A0)),e){case"add":l?d&&o(s.get("length")):(o(s.get(dp)),$m(t)&&o(s.get(N5)));break;case"delete":l||(o(s.get(dp)),$m(t)&&o(s.get(N5)));break;case"set":$m(t)&&o(s.get(dp));break}}DD()}function gle(t,e){const n=Xw.get(t);return n&&n.get(e)}function Ch(t){const e=ln(t);return e===t?e:(Yi(e,"iterate",A0),ss(t)?e:e.map(Eo))}function MS(t){return Yi(t=ln(t),"iterate",A0),t}function Vd(t,e){return Gu(t)?Vu(t)?Km(Eo(e)):Km(e):Eo(e)}const vle={__proto__:null,[Symbol.iterator](){return RA(this,Symbol.iterator,t=>Vd(this,t))},concat(...t){return Ch(this).concat(...t.map(e=>Dt(e)?Ch(e):e))},entries(){return RA(this,"entries",t=>(t[1]=Vd(this,t[1]),t))},every(t,e){return Jl(this,"every",t,e,void 0,arguments)},filter(t,e){return Jl(this,"filter",t,e,n=>n.map(r=>Vd(this,r)),arguments)},find(t,e){return Jl(this,"find",t,e,n=>Vd(this,n),arguments)},findIndex(t,e){return Jl(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Jl(this,"findLast",t,e,n=>Vd(this,n),arguments)},findLastIndex(t,e){return Jl(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Jl(this,"forEach",t,e,void 0,arguments)},includes(...t){return PA(this,"includes",t)},indexOf(...t){return PA(this,"indexOf",t)},join(t){return Ch(this).join(t)},lastIndexOf(...t){return PA(this,"lastIndexOf",t)},map(t,e){return Jl(this,"map",t,e,void 0,arguments)},pop(){return ev(this,"pop")},push(...t){return ev(this,"push",t)},reduce(t,...e){return I6(this,"reduce",t,e)},reduceRight(t,...e){return I6(this,"reduceRight",t,e)},shift(){return ev(this,"shift")},some(t,e){return Jl(this,"some",t,e,void 0,arguments)},splice(...t){return ev(this,"splice",t)},toReversed(){return Ch(this).toReversed()},toSorted(t){return Ch(this).toSorted(t)},toSpliced(...t){return Ch(this).toSpliced(...t)},unshift(...t){return ev(this,"unshift",t)},values(){return RA(this,"values",t=>Vd(this,t))}};function RA(t,e,n){const r=MS(t),i=r[e]();return r!==t&&!ss(t)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.done||(a.value=n(a.value)),a}),i}const yle=Array.prototype;function Jl(t,e,n,r,i,a){const s=MS(t),o=s!==t&&!ss(t),l=s[e];if(l!==yle[e]){const f=l.apply(t,a);return o?Eo(f):f}let d=n;s!==t&&(o?d=function(f,p){return n.call(this,Vd(t,f),p,t)}:n.length>2&&(d=function(f,p){return n.call(this,f,p,t)}));const c=l.call(s,d,r);return o&&i?i(c):c}function I6(t,e,n,r){const i=MS(t);let a=n;return i!==t&&(ss(t)?n.length>3&&(a=function(s,o,l){return n.call(this,s,o,l,t)}):a=function(s,o,l){return n.call(this,s,Vd(t,o),l,t)}),i[e](a,...r)}function PA(t,e,n){const r=ln(t);Yi(r,"iterate",A0);const i=r[e](...n);return(i===-1||i===!1)&&RS(n[0])?(n[0]=ln(n[0]),r[e](...n)):i}function ev(t,e,n=[]){qu(),$D();const r=ln(t)[e].apply(t,n);return DD(),Wu(),r}const ble=AD("__proto__,__v_isRef,__isVue"),VW=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(To));function _le(t){To(t)||(t=String(t));const e=ln(this);return Yi(e,"has",t),e.hasOwnProperty(t)}class NW{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(i?a?HW:UW:a?zW:BW).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=Dt(e);if(!i){let l;if(s&&(l=vle[n]))return l;if(n==="hasOwnProperty")return _le}const o=Reflect.get(e,n,Bn(e)?e:r);if((To(n)?VW.has(n):ble(n))||(i||Yi(e,"get",n),a))return o;if(Bn(o)){const l=s&&wS(n)?o:o.value;return i&&Xn(l)?zs(l):l}return Xn(o)?i?zs(o):Jt(o):o}}class jW extends NW{constructor(e=!1){super(!1,e)}set(e,n,r,i){let a=e[n];const s=Dt(e)&&wS(n);if(!this._isShallow){const d=Gu(a);if(!ss(r)&&!Gu(r)&&(a=ln(a),r=ln(r)),!s&&Bn(a)&&!Bn(r))return d||(a.value=r),!0}const o=s?Number(n)<e.length:Fn(e,n),l=Reflect.set(e,n,r,Bn(e)?e:i);return e===ln(i)&&(o?Na(r,a)&&Cu(e,"set",n,r):Cu(e,"add",n,r)),l}deleteProperty(e,n){const r=Fn(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Cu(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!To(n)||!VW.has(n))&&Yi(e,"has",n),r}ownKeys(e){return Yi(e,"iterate",Dt(e)?"length":dp),Reflect.ownKeys(e)}}class FW extends NW{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const xle=new jW,wle=new FW,kle=new jW(!0),Sle=new FW(!0),j5=t=>t,Hb=t=>Reflect.getPrototypeOf(t);function Cle(t,e,n){return function(...r){const i=this.__v_raw,a=ln(i),s=$m(a),o=t==="entries"||t===Symbol.iterator&&s,l=t==="keys"&&s,d=i[t](...r),c=n?j5:e?Km:Eo;return!e&&Yi(a,"iterate",l?N5:dp),{next(){const{value:f,done:p}=d.next();return p?{value:f,done:p}:{value:o?[c(f[0]),c(f[1])]:c(f),done:p}},[Symbol.iterator](){return this}}}}function qb(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ale(t,e){const n={get(i){const a=this.__v_raw,s=ln(a),o=ln(i);t||(Na(i,o)&&Yi(s,"get",i),Yi(s,"get",o));const{has:l}=Hb(s),d=e?j5:t?Km:Eo;if(l.call(s,i))return d(a.get(i));if(l.call(s,o))return d(a.get(o));a!==s&&a.get(i)},get size(){const i=this.__v_raw;return!t&&Yi(ln(i),"iterate",dp),i.size},has(i){const a=this.__v_raw,s=ln(a),o=ln(i);return t||(Na(i,o)&&Yi(s,"has",i),Yi(s,"has",o)),i===o?a.has(i):a.has(i)||a.has(o)},forEach(i,a){const s=this,o=s.__v_raw,l=ln(o),d=e?j5:t?Km:Eo;return!t&&Yi(l,"iterate",dp),o.forEach((c,f)=>i.call(a,d(c),d(f),s))}};return li(n,t?{add:qb("add"),set:qb("set"),delete:qb("delete"),clear:qb("clear")}:{add(i){!e&&!ss(i)&&!Gu(i)&&(i=ln(i));const a=ln(this);return Hb(a).has.call(a,i)||(a.add(i),Cu(a,"add",i,i)),this},set(i,a){!e&&!ss(a)&&!Gu(a)&&(a=ln(a));const s=ln(this),{has:o,get:l}=Hb(s);let d=o.call(s,i);d||(i=ln(i),d=o.call(s,i));const c=l.call(s,i);return s.set(i,a),d?Na(a,c)&&Cu(s,"set",i,a):Cu(s,"add",i,a),this},delete(i){const a=ln(this),{has:s,get:o}=Hb(a);let l=s.call(a,i);l||(i=ln(i),l=s.call(a,i)),o&&o.call(a,i);const d=a.delete(i);return l&&Cu(a,"delete",i,void 0),d},clear(){const i=ln(this),a=i.size!==0,s=i.clear();return a&&Cu(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Cle(i,t,e)}),n}function $S(t,e){const n=Ale(t,e);return(r,i,a)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Fn(n,i)&&i in r?n:r,i,a)}const Tle={get:$S(!1,!1)},Ele={get:$S(!1,!0)},Mle={get:$S(!0,!1)},$le={get:$S(!0,!0)},BW=new WeakMap,zW=new WeakMap,UW=new WeakMap,HW=new WeakMap;function Dle(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rle(t){return t.__v_skip||!Object.isExtensible(t)?0:Dle(rle(t))}function Jt(t){return Gu(t)?t:DS(t,!1,xle,Tle,BW)}function qW(t){return DS(t,!1,kle,Ele,zW)}function zs(t){return DS(t,!0,wle,Mle,UW)}function Ah(t){return DS(t,!0,Sle,$le,HW)}function DS(t,e,n,r,i){if(!Xn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=Rle(t);if(a===0)return t;const s=i.get(t);if(s)return s;const o=new Proxy(t,a===2?r:n);return i.set(t,o),o}function Vu(t){return Gu(t)?Vu(t.__v_raw):!!(t&&t.__v_isReactive)}function Gu(t){return!!(t&&t.__v_isReadonly)}function ss(t){return!!(t&&t.__v_isShallow)}function RS(t){return t?!!t.__v_raw:!1}function ln(t){const e=t&&t.__v_raw;return e?ln(e):t}function Vt(t){return!Fn(t,"__v_skip")&&Object.isExtensible(t)&&SW(t,"__v_skip",!0),t}const Eo=t=>Xn(t)?Jt(t):t,Km=t=>Xn(t)?zs(t):t;function Bn(t){return t?t.__v_isRef===!0:!1}function Q(t){return WW(t,!1)}function Sl(t){return WW(t,!0)}function WW(t,e){return Bn(t)?t:new Ple(t,e)}class Ple{constructor(e,n){this.dep=new ES,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ln(e),this._value=n?e:Eo(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ss(e)||Gu(e);e=r?e:ln(e),Na(e,n)&&(this._rawValue=e,this._value=r?e:Eo(e),this.dep.trigger())}}function O6(t){t.dep&&t.dep.trigger()}function y(t){return Bn(t)?t.value:t}function Fr(t){return Xt(t)?t():y(t)}const Ile={get:(t,e,n)=>e==="__v_raw"?t:y(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Bn(i)&&!Bn(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function GW(t){return Vu(t)?t:new Proxy(t,Ile)}class Ole{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new ES,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function PS(t){return new Ole(t)}function Zs(t){const e=Dt(t)?new Array(t.length):{};for(const n in t)e[n]=YW(t,n);return e}class Lle{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=ln(e);let i=!0,a=e;if(!Dt(e)||!wS(String(n)))do i=!RS(a)||ss(a);while(i&&(a=a.__v_raw));this._shallow=i}get value(){let e=this._object[this._key];return this._shallow&&(e=y(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&Bn(this._raw[this._key])){const n=this._object[this._key];if(Bn(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return gle(this._raw,this._key)}}class Vle{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Zw(t,e,n){return Bn(t)?t:Xt(t)?new Vle(t):Xn(t)&&arguments.length>1?YW(t,e,n):Q(t)}function YW(t,e,n){return new Lle(t,e,n)}class Nle{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ES(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=C0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&or!==this)return DW(this,!0),!0}get value(){const e=this.dep.track();return IW(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function jle(t,e,n=!1){let r,i;return Xt(t)?r=t:(r=t.get,i=t.set),new Nle(r,i,n)}const Wb={},Qw=new WeakMap;let Df;function Fle(t,e=!1,n=Df){if(n){let r=Qw.get(n);r||Qw.set(n,r=[]),r.push(t)}}function Ble(t,e,n=Mn){const{immediate:r,deep:i,once:a,scheduler:s,augmentJob:o,call:l}=n,d=k=>i?k:ss(k)||i===!1||i===0?Au(k,1):Au(k);let c,f,p,h,m=!1,g=!1;if(Bn(t)?(f=()=>t.value,m=ss(t)):Vu(t)?(f=()=>d(t),m=!0):Dt(t)?(g=!0,m=t.some(k=>Vu(k)||ss(k)),f=()=>t.map(k=>{if(Bn(k))return k.value;if(Vu(k))return d(k);if(Xt(k))return l?l(k,2):k()})):Xt(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){qu();try{p()}finally{Wu()}}const k=Df;Df=c;try{return l?l(t,3,[h]):t(h)}finally{Df=k}}:f=kl,e&&i){const k=f,S=i===!0?1/0:i;f=()=>Au(k(),S)}const v=q1(),_=()=>{c.stop(),v&&v.active&&ED(v.effects,c)};if(a&&e){const k=e;e=(...S)=>{k(...S),_()}}let x=g?new Array(t.length).fill(Wb):Wb;const w=k=>{if(!(!(c.flags&1)||!c.dirty&&!k))if(e){const S=c.run();if(i||m||(g?S.some((C,A)=>Na(C,x[A])):Na(S,x))){p&&p();const C=Df;Df=c;try{const A=[S,x===Wb?void 0:g&&x[0]===Wb?[]:x,h];x=S,l?l(e,3,A):e(...A)}finally{Df=C}}}else c.run()};return o&&o(w),c=new MW(f),c.scheduler=s?()=>s(w,!1):w,h=k=>Fle(k,!1,c),p=c.onStop=()=>{const k=Qw.get(c);if(k){if(l)l(k,4);else for(const S of k)S();Qw.delete(c)}},e?r?w(!0):x=c.run():s?s(w.bind(null,!0),!0):c.run(),_.pause=c.pause.bind(c),_.resume=c.resume.bind(c),_.stop=_,_}function Au(t,e=1/0,n){if(e<=0||!Xn(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Bn(t))Au(t.value,e,n);else if(Dt(t))for(let r=0;r<t.length;r++)Au(t[r],e,n);else if(Tg(t)||$m(t))t.forEach(r=>{Au(r,e,n)});else if(kW(t)){for(const r in t)Au(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Au(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function G1(t,e,n,r){try{return r?t(...r):t()}catch(i){Y1(i,e,n)}}function Mo(t,e,n,r){if(Xt(t)){const i=G1(t,e,n,r);return i&&xW(i)&&i.catch(a=>{Y1(a,e,n)}),i}if(Dt(t)){const i=[];for(let a=0;a<t.length;a++)i.push(Mo(t[a],e,n,r));return i}}function Y1(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||Mn;if(e){let o=e.parent;const l=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const c=o.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](t,l,d)===!1)return}o=o.parent}if(a){qu(),G1(a,null,10,[t,l,d]),Wu();return}}zle(t,n,i,r,s)}function zle(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const ha=[];let il=-1;const Dm=[];let Nd=null,lm=0;const KW=Promise.resolve();let Jw=null;function ir(t){const e=Jw||KW;return t?e.then(this?t.bind(this):t):e}function Ule(t){let e=il+1,n=ha.length;for(;e<n;){const r=e+n>>>1,i=ha[r],a=T0(i);a<t||a===t&&i.flags&2?e=r+1:n=r}return e}function PD(t){if(!(t.flags&1)){const e=T0(t),n=ha[ha.length-1];!n||!(t.flags&2)&&e>=T0(n)?ha.push(t):ha.splice(Ule(e),0,t),t.flags|=1,XW()}}function XW(){Jw||(Jw=KW.then(QW))}function Hle(t){Dt(t)?Dm.push(...t):Nd&&t.id===-1?Nd.splice(lm+1,0,t):t.flags&1||(Dm.push(t),t.flags|=1),XW()}function L6(t,e,n=il+1){for(;n<ha.length;n++){const r=ha[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;ha.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ZW(t){if(Dm.length){const e=[...new Set(Dm)].sort((n,r)=>T0(n)-T0(r));if(Dm.length=0,Nd){Nd.push(...e);return}for(Nd=e,lm=0;lm<Nd.length;lm++){const n=Nd[lm];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Nd=null,lm=0}}const T0=t=>t.id==null?t.flags&2?-1:1/0:t.id;function QW(t){try{for(il=0;il<ha.length;il++){const e=ha[il];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),G1(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;il<ha.length;il++){const e=ha[il];e&&(e.flags&=-2)}il=-1,ha.length=0,ZW(),Jw=null,(ha.length||Dm.length)&&QW()}}let Di=null,JW=null;function e2(t){const e=Di;return Di=t,JW=t&&t.type.__scopeId||null,e}function D(t,e=Di,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&r2(-1);const a=e2(e);let s;try{s=t(...i)}finally{e2(a),r._d&&r2(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function xe(t,e){if(Di===null)return t;const n=NS(Di),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[a,s,o,l=Mn]=e[i];a&&(Xt(a)&&(a={mounted:a,updated:a}),a.deep&&Au(s),r.push({dir:a,instance:n,value:s,oldValue:void 0,arg:o,modifiers:l}))}return t}function Zc(t,e,n,r){const i=t.dirs,a=e&&e.dirs;for(let s=0;s<i.length;s++){const o=i[s];a&&(o.oldValue=a[s].value);let l=o.dir[r];l&&(qu(),Mo(l,n,8,[t.el,o,t,e]),Wu())}}const eG=Symbol("_vte"),tG=t=>t.__isTeleport,Iy=t=>t&&(t.disabled||t.disabled===""),V6=t=>t&&(t.defer||t.defer===""),N6=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,j6=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,F5=(t,e)=>{const n=t&&t.to;return Sr(n)?e?e(n):null:n},nG={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,a,s,o,l,d){const{mc:c,pc:f,pbc:p,o:{insert:h,querySelector:m,createText:g,createComment:v}}=d,_=Iy(e.props);let{shapeFlag:x,children:w,dynamicChildren:k}=e;if(t==null){const S=e.el=g(""),C=e.anchor=g("");h(S,n,r),h(C,n,r);const A=($,R)=>{x&16&&c(w,$,R,i,a,s,o,l)},M=()=>{const $=e.target=F5(e.props,m),R=rG($,e,g,h);$&&(s!=="svg"&&N6($)?s="svg":s!=="mathml"&&j6($)&&(s="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add($),_||(A($,R),ew(e,!1)))};_&&(A(n,C),ew(e,!0)),V6(e.props)?(e.el.__isMounted=!1,la(()=>{M(),delete e.el.__isMounted},a)):M()}else{if(V6(e.props)&&t.el.__isMounted===!1){la(()=>{nG.process(t,e,n,r,i,a,s,o,l,d)},a);return}e.el=t.el,e.targetStart=t.targetStart;const S=e.anchor=t.anchor,C=e.target=t.target,A=e.targetAnchor=t.targetAnchor,M=Iy(t.props),$=M?n:C,R=M?S:A;if(s==="svg"||N6(C)?s="svg":(s==="mathml"||j6(C))&&(s="mathml"),k?(p(t.dynamicChildren,k,$,i,a,s,o),ND(t,e,!0)):l||f(t,e,$,R,i,a,s,o,!1),_)M?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Gb(e,n,S,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const I=e.target=F5(e.props,m);I&&Gb(e,I,null,d,0)}else M&&Gb(e,C,A,d,1);ew(e,_)}},remove(t,e,n,{um:r,o:{remove:i}},a){const{shapeFlag:s,children:o,anchor:l,targetStart:d,targetAnchor:c,target:f,props:p}=t;if(f&&(i(d),i(c)),a&&i(l),s&16){const h=a||!Iy(p);for(let m=0;m<o.length;m++){const g=o[m];r(g,e,n,h,!!g.dynamicChildren)}}},move:Gb,hydrate:qle};function Gb(t,e,n,{o:{insert:r},m:i},a=2){a===0&&r(t.targetAnchor,e,n);const{el:s,anchor:o,shapeFlag:l,children:d,props:c}=t,f=a===2;if(f&&r(s,e,n),(!f||Iy(c))&&l&16)for(let p=0;p<d.length;p++)i(d[p],e,n,2);f&&r(o,e,n)}function qle(t,e,n,r,i,a,{o:{nextSibling:s,parentNode:o,querySelector:l,insert:d,createText:c}},f){function p(g,v,_,x){v.anchor=f(s(g),v,o(g),n,r,i,a),v.targetStart=_,v.targetAnchor=x}const h=e.target=F5(e.props,l),m=Iy(e.props);if(h){const g=h._lpa||h.firstChild;if(e.shapeFlag&16)if(m)p(t,e,g,g&&s(g));else{e.anchor=s(t);let v=g;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,h._lpa=e.targetAnchor&&s(e.targetAnchor);break}}v=s(v)}e.targetAnchor||rG(h,e,c,d),f(g&&s(g),e,h,n,r,i,a)}ew(e,m)}else m&&e.shapeFlag&16&&p(t,e,t,s(t));return e.anchor&&s(e.anchor)}const ID=nG;function ew(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function rG(t,e,n,r){const i=e.targetStart=n(""),a=e.targetAnchor=n("");return i[eG]=a,t&&(r(i,t),r(a,t)),a}const xu=Symbol("_leaveCb"),Yb=Symbol("_enterCb");function Wle(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return bt(()=>{t.isMounted=!0}),jc(()=>{t.isUnmounting=!0}),t}const vs=[Function,Array],iG={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:vs,onEnter:vs,onAfterEnter:vs,onEnterCancelled:vs,onBeforeLeave:vs,onLeave:vs,onAfterLeave:vs,onLeaveCancelled:vs,onBeforeAppear:vs,onAppear:vs,onAfterAppear:vs,onAppearCancelled:vs},aG=t=>{const e=t.subTree;return e.component?aG(e.component):e},Gle={name:"BaseTransition",props:iG,setup(t,{slots:e}){const n=ra(),r=Wle();return()=>{const i=e.default&&lG(e.default(),!0);if(!i||!i.length)return;const a=sG(i),s=ln(t),{mode:o}=s;if(r.isLeaving)return IA(a);const l=F6(a);if(!l)return IA(a);let d=B5(l,s,r,n,f=>d=f);l.type!==pi&&E0(l,d);let c=n.subTree&&F6(n.subTree);if(c&&c.type!==pi&&!zf(c,l)&&aG(n).type!==pi){let f=B5(c,s,r,n);if(E0(c,f),o==="out-in"&&l.type!==pi)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,c=void 0},IA(a);o==="in-out"&&l.type!==pi?f.delayLeave=(p,h,m)=>{const g=oG(r,c);g[String(c.key)]=c,p[xu]=()=>{h(),p[xu]=void 0,delete d.delayedLeave,c=void 0},d.delayedLeave=()=>{m(),delete d.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return a}}};function sG(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==pi){e=n;break}}return e}const Yle=Gle;function oG(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function B5(t,e,n,r,i){const{appear:a,mode:s,persisted:o=!1,onBeforeEnter:l,onEnter:d,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:p,onLeave:h,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:_,onAfterAppear:x,onAppearCancelled:w}=e,k=String(t.key),S=oG(n,t),C=($,R)=>{$&&Mo($,r,9,R)},A=($,R)=>{const I=R[1];C($,R),Dt($)?$.every(B=>B.length<=1)&&I():$.length<=1&&I()},M={mode:s,persisted:o,beforeEnter($){let R=l;if(!n.isMounted)if(a)R=v||l;else return;$[xu]&&$[xu](!0);const I=S[k];I&&zf(t,I)&&I.el[xu]&&I.el[xu](),C(R,[$])},enter($){let R=d,I=c,B=f;if(!n.isMounted)if(a)R=_||d,I=x||c,B=w||f;else return;let j=!1;const z=$[Yb]=F=>{j||(j=!0,F?C(B,[$]):C(I,[$]),M.delayedLeave&&M.delayedLeave(),$[Yb]=void 0)};R?A(R,[$,z]):z()},leave($,R){const I=String(t.key);if($[Yb]&&$[Yb](!0),n.isUnmounting)return R();C(p,[$]);let B=!1;const j=$[xu]=z=>{B||(B=!0,R(),z?C(g,[$]):C(m,[$]),$[xu]=void 0,S[I]===t&&delete S[I])};S[I]=t,h?A(h,[$,j]):j()},clone($){const R=B5($,e,n,r,i);return i&&i(R),R}};return M}function IA(t){if(K1(t))return t=$o(t),t.children=null,t}function F6(t){if(!K1(t))return tG(t.type)&&t.children?sG(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Xt(n.default))return n.default()}}function E0(t,e){t.shapeFlag&6&&t.component?(t.transition=e,E0(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function lG(t,e=!1,n){let r=[],i=0;for(let a=0;a<t.length;a++){let s=t[a];const o=n==null?s.key:String(n)+String(s.key!=null?s.key:a);s.type===_e?(s.patchFlag&128&&i++,r=r.concat(lG(s.children,e,o))):(e||s.type!==pi)&&r.push(o!=null?$o(s,{key:o}):s)}if(i>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}function Ze(t,e){return Xt(t)?li({name:t.name},e,{setup:t}):t}function tw(){const t=ra();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function OD(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Oy(t){const e=ra(),n=Sl(null);if(e){const i=e.refs===Mn?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:a=>n.value=a})}return n}const t2=new WeakMap;function Ly(t,e,n,r,i=!1){if(Dt(t)){t.forEach((m,g)=>Ly(m,e&&(Dt(e)?e[g]:e),n,r,i));return}if(Rm(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ly(t,e,n,r.component.subTree);return}const a=r.shapeFlag&4?NS(r.component):r.el,s=i?null:a,{i:o,r:l}=t,d=e&&e.r,c=o.refs===Mn?o.refs={}:o.refs,f=o.setupState,p=ln(f),h=f===Mn?_W:m=>Fn(p,m);if(d!=null&&d!==l){if(B6(e),Sr(d))c[d]=null,h(d)&&(f[d]=null);else if(Bn(d)){d.value=null;const m=e;m.k&&(c[m.k]=null)}}if(Xt(l))G1(l,o,12,[s,c]);else{const m=Sr(l),g=Bn(l);if(m||g){const v=()=>{if(t.f){const _=m?h(l)?f[l]:c[l]:l.value;if(i)Dt(_)&&ED(_,a);else if(Dt(_))_.includes(a)||_.push(a);else if(m)c[l]=[a],h(l)&&(f[l]=c[l]);else{const x=[a];l.value=x,t.k&&(c[t.k]=x)}}else m?(c[l]=s,h(l)&&(f[l]=s)):g&&(l.value=s,t.k&&(c[t.k]=s))};if(s){const _=()=>{v(),t2.delete(t)};_.id=-1,t2.set(t,_),la(_,n)}else B6(t),v()}}}function B6(t){const e=t2.get(t);e&&(e.flags|=8,t2.delete(t))}const z6=t=>t.nodeType===8;AS().requestIdleCallback;AS().cancelIdleCallback;function Kle(t,e){if(z6(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(z6(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Rm=t=>!!t.type.__asyncLoader;function tv(t){Xt(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:a,timeout:s,suspensible:o=!0,onError:l}=t;let d=null,c,f=0;const p=()=>(f++,d=null,h()),h=()=>{let m;return d||(m=d=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),l)return new Promise((v,_)=>{l(g,()=>v(p()),()=>_(g),f+1)});throw g}).then(g=>m!==d&&d?d:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),c=g,g)))};return Ze({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(m,g,v){let _=!1;(g.bu||(g.bu=[])).push(()=>_=!0);const x=()=>{_||v()},w=a?()=>{const k=a(x,S=>Kle(m,S));k&&(g.bum||(g.bum=[])).push(k)}:x;c?w():h().then(()=>!g.isUnmounted&&w())},get __asyncResolved(){return c},setup(){const m=$i;if(OD(m),c)return()=>Kb(c,m);const g=w=>{d=null,Y1(w,m,13,!r)};if(o&&m.suspense||Xm)return h().then(w=>()=>Kb(w,m)).catch(w=>(g(w),()=>r?b(r,{error:w}):null));const v=Q(!1),_=Q(),x=Q(!!i);return i&&setTimeout(()=>{x.value=!1},i),s!=null&&setTimeout(()=>{if(!v.value&&!_.value){const w=new Error(`Async component timed out after ${s}ms.`);g(w),_.value=w}},s),h().then(()=>{v.value=!0,m.parent&&K1(m.parent.vnode)&&m.parent.update()}).catch(w=>{g(w),_.value=w}),()=>{if(v.value&&c)return Kb(c,m);if(_.value&&r)return b(r,{error:_.value});if(n&&!x.value)return Kb(n,m)}}})}function Kb(t,e){const{ref:n,props:r,children:i,ce:a}=e.vnode,s=b(t,r,i);return s.ref=n,s.ce=a,delete e.vnode.ce,s}const K1=t=>t.type.__isKeepAlive;function Xle(t,e){uG(t,"a",e)}function Zle(t,e){uG(t,"da",e)}function uG(t,e,n=$i){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(IS(e,r,n),n){let i=n.parent;for(;i&&i.parent;)K1(i.parent.vnode)&&Qle(r,e,n,i),i=i.parent}}function Qle(t,e,n,r){const i=IS(e,t,r,!0);Pi(()=>{ED(r[e],i)},n)}function IS(t,e,n=$i,r=!1){if(n){const i=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...s)=>{qu();const o=Z1(n),l=Mo(e,n,t,s);return o(),Wu(),l});return r?i.unshift(a):i.push(a),a}}const ud=t=>(e,n=$i)=>{(!Xm||t==="sp")&&IS(t,(...r)=>e(...r),n)},dG=ud("bm"),bt=ud("m"),cG=ud("bu"),Jle=ud("u"),jc=ud("bum"),Pi=ud("um"),eue=ud("sp"),tue=ud("rtg"),nue=ud("rtc");function rue(t,e=$i){IS("ec",t,e)}const fG="components";function Ji(t,e){return hG(fG,t,!0,e)||t}const pG=Symbol.for("v-ndc");function Lt(t){return Sr(t)?hG(fG,t,!1)||t:t||pG}function hG(t,e,n=!0,r=!1){const i=Di||$i;if(i){const a=i.type;{const o=Uue(a,!1);if(o&&(o===e||o===xa(e)||o===SS(xa(e))))return a}const s=U6(i[t]||a[t],e)||U6(i.appContext[t],e);return!s&&r?a:s}}function U6(t,e){return t&&(t[e]||t[xa(e)]||t[SS(xa(e))])}function we(t,e,n,r){let i;const a=n,s=Dt(t);if(s||Sr(t)){const o=s&&Vu(t);let l=!1,d=!1;o&&(l=!ss(t),d=Gu(t),t=MS(t)),i=new Array(t.length);for(let c=0,f=t.length;c<f;c++)i[c]=e(l?d?Km(Eo(t[c])):Eo(t[c]):t[c],c,void 0,a)}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,a)}else if(Xn(t))if(t[Symbol.iterator])i=Array.from(t,(o,l)=>e(o,l,void 0,a));else{const o=Object.keys(t);i=new Array(o.length);for(let l=0,d=o.length;l<d;l++){const c=o[l];i[l]=e(t[c],c,l,a)}}else i=[];return i}function OA(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Dt(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const a=r.fn(...i);return a&&(a.key=r.key),a}:r.fn)}return t}function Ye(t,e,n={},r,i){if(Di.ce||Di.parent&&Rm(Di.parent)&&Di.parent.ce){const d=Object.keys(n).length>0;return e!=="default"&&(n.name=e),T(),he(_e,null,[b("slot",n,r&&r())],d?-2:64)}let a=t[e];a&&a._c&&(a._d=!1),T();const s=a&&mG(a(n)),o=n.key||s&&s.key,l=he(_e,{key:(o&&!To(o)?o:`_${e}`)+(!s&&r?"_fb":"")},s||(r?r():[]),s&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),a&&a._c&&(a._d=!0),l}function mG(t){return t.some(e=>D0(e)?!(e.type===pi||e.type===_e&&!mG(e.children)):!0)?t:null}function iue(t,e){const n={};for(const r in t)n[Dy(r)]=t[r];return n}const z5=t=>t?NG(t)?NS(t):z5(t.parent):null,Vy=li(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>z5(t.parent),$root:t=>z5(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>bG(t),$forceUpdate:t=>t.f||(t.f=()=>{PD(t.update)}),$nextTick:t=>t.n||(t.n=ir.bind(t.proxy)),$watch:t=>vue.bind(t)}),LA=(t,e)=>t!==Mn&&!t.__isScriptSetup&&Fn(t,e),aue={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:a,accessCache:s,type:o,appContext:l}=t;if(e[0]!=="$"){const p=s[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return a[e]}else{if(LA(r,e))return s[e]=1,r[e];if(i!==Mn&&Fn(i,e))return s[e]=2,i[e];if(Fn(a,e))return s[e]=3,a[e];if(n!==Mn&&Fn(n,e))return s[e]=4,n[e];H5&&(s[e]=0)}}const d=Vy[e];let c,f;if(d)return e==="$attrs"&&Yi(t.attrs,"get",""),d(t);if((c=o.__cssModules)&&(c=c[e]))return c;if(n!==Mn&&Fn(n,e))return s[e]=4,n[e];if(f=l.config.globalProperties,Fn(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:a}=t;return LA(i,e)?(i[e]=n,!0):r!==Mn&&Fn(r,e)?(r[e]=n,!0):Fn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,props:a,type:s}},o){let l;return!!(n[o]||t!==Mn&&o[0]!=="$"&&Fn(t,o)||LA(e,o)||Fn(a,o)||Fn(r,o)||Fn(Vy,o)||Fn(i.config.globalProperties,o)||(l=s.__cssModules)&&l[o])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Fn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function OS(){return gG().slots}function nh(){return gG().attrs}function gG(t){const e=ra();return e.setupContext||(e.setupContext=FG(e))}function M0(t){return Dt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function vG(t,e){const n=M0(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?Dt(i)||Xt(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function U5(t,e){return!t||!e?t||e:Dt(t)&&Dt(e)?t.concat(e):li({},M0(t),M0(e))}let H5=!0;function sue(t){const e=bG(t),n=t.proxy,r=t.ctx;H5=!1,e.beforeCreate&&H6(e.beforeCreate,t,"bc");const{data:i,computed:a,methods:s,watch:o,provide:l,inject:d,created:c,beforeMount:f,mounted:p,beforeUpdate:h,updated:m,activated:g,deactivated:v,beforeDestroy:_,beforeUnmount:x,destroyed:w,unmounted:k,render:S,renderTracked:C,renderTriggered:A,errorCaptured:M,serverPrefetch:$,expose:R,inheritAttrs:I,components:B,directives:j,filters:z}=e;if(d&&oue(d,r,null),s)for(const N in s){const O=s[N];Xt(O)&&(r[N]=O.bind(n))}if(i){const N=i.call(n,n);Xn(N)&&(t.data=Jt(N))}if(H5=!0,a)for(const N in a){const O=a[N],V=Xt(O)?O.bind(n,n):Xt(O.get)?O.get.bind(n,n):kl,L=!Xt(O)&&Xt(O.set)?O.set.bind(n):kl,U=J({get:V,set:L});Object.defineProperty(r,N,{enumerable:!0,configurable:!0,get:()=>U.value,set:G=>U.value=G})}if(o)for(const N in o)yG(o[N],r,n,N);if(l){const N=Xt(l)?l.call(n):l;Reflect.ownKeys(N).forEach(O=>{Us(O,N[O])})}c&&H6(c,t,"c");function q(N,O){Dt(O)?O.forEach(V=>N(V.bind(n))):O&&N(O.bind(n))}if(q(dG,f),q(bt,p),q(cG,h),q(Jle,m),q(Xle,g),q(Zle,v),q(rue,M),q(nue,C),q(tue,A),q(jc,x),q(Pi,k),q(eue,$),Dt(R))if(R.length){const N=t.exposed||(t.exposed={});R.forEach(O=>{Object.defineProperty(N,O,{get:()=>n[O],set:V=>n[O]=V,enumerable:!0})})}else t.exposed||(t.exposed={});S&&t.render===kl&&(t.render=S),I!=null&&(t.inheritAttrs=I),B&&(t.components=B),j&&(t.directives=j),$&&OD(t)}function oue(t,e,n=kl){Dt(t)&&(t=q5(t));for(const r in t){const i=t[r];let a;Xn(i)?"default"in i?a=vi(i.from||r,i.default,!0):a=vi(i.from||r):a=vi(i),Bn(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):e[r]=a}}function H6(t,e,n){Mo(Dt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function yG(t,e,n,r){let i=r.includes(".")?wG(n,r):()=>n[r];if(Sr(t)){const a=e[t];Xt(a)&&Je(i,a)}else if(Xt(t))Je(i,t.bind(n));else if(Xn(t))if(Dt(t))t.forEach(a=>yG(a,e,n,r));else{const a=Xt(t.handler)?t.handler.bind(n):e[t.handler];Xt(a)&&Je(i,a,t)}}function bG(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:s}}=t.appContext,o=a.get(e);let l;return o?l=o:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(d=>n2(l,d,s,!0)),n2(l,e,s)),Xn(e)&&a.set(e,l),l}function n2(t,e,n,r=!1){const{mixins:i,extends:a}=e;a&&n2(t,a,n,!0),i&&i.forEach(s=>n2(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const o=lue[s]||n&&n[s];t[s]=o?o(t[s],e[s]):e[s]}return t}const lue={data:q6,props:W6,emits:W6,methods:ay,computed:ay,beforeCreate:oa,created:oa,beforeMount:oa,mounted:oa,beforeUpdate:oa,updated:oa,beforeDestroy:oa,beforeUnmount:oa,destroyed:oa,unmounted:oa,activated:oa,deactivated:oa,errorCaptured:oa,serverPrefetch:oa,components:ay,directives:ay,watch:due,provide:q6,inject:uue};function q6(t,e){return e?t?function(){return li(Xt(t)?t.call(this,this):t,Xt(e)?e.call(this,this):e)}:e:t}function uue(t,e){return ay(q5(t),q5(e))}function q5(t){if(Dt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function oa(t,e){return t?[...new Set([].concat(t,e))]:e}function ay(t,e){return t?li(Object.create(null),t,e):e}function W6(t,e){return t?Dt(t)&&Dt(e)?[...new Set([...t,...e])]:li(Object.create(null),M0(t),M0(e!=null?e:{})):e}function due(t,e){if(!t)return e;if(!e)return t;const n=li(Object.create(null),t);for(const r in e)n[r]=oa(t[r],e[r]);return n}function _G(){return{app:null,config:{isNativeTag:_W,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cue=0;function fue(t,e){return function(r,i=null){Xt(r)||(r=li({},r)),i!=null&&!Xn(i)&&(i=null);const a=_G(),s=new WeakSet,o=[];let l=!1;const d=a.app={_uid:cue++,_component:r,_props:i,_container:null,_context:a,_instance:null,version:que,get config(){return a.config},set config(c){},use(c,...f){return s.has(c)||(c&&Xt(c.install)?(s.add(c),c.install(d,...f)):Xt(c)&&(s.add(c),c(d,...f))),d},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),d},component(c,f){return f?(a.components[c]=f,d):a.components[c]},directive(c,f){return f?(a.directives[c]=f,d):a.directives[c]},mount(c,f,p){if(!l){const h=d._ceVNode||b(r,i);return h.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),t(h,c,p),l=!0,d._container=c,c.__vue_app__=d,NS(h.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Mo(o,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(c,f){return a.provides[c]=f,d},runWithContext(c){const f=cp;cp=d;try{return c()}finally{cp=f}}};return d}}let cp=null;function Us(t,e){if($i){let n=$i.provides;const r=$i.parent&&$i.parent.provides;r===n&&(n=$i.provides=Object.create(r)),n[t]=e}}function vi(t,e,n=!1){const r=ra();if(r||cp){let i=cp?cp._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Xt(e)?e.call(r&&r.proxy):e}}function pue(){return!!(ra()||cp)}const hue=Symbol.for("v-scx"),mue=()=>vi(hue);function Br(t,e){return X1(t,null,e)}function xG(t,e){return X1(t,null,{flush:"post"})}function gue(t,e){return X1(t,null,{flush:"sync"})}function Je(t,e,n){return X1(t,e,n)}function X1(t,e,n=Mn){const{immediate:r,deep:i,flush:a,once:s}=n,o=li({},n),l=e&&r||!e&&a!=="post";let d;if(Xm){if(a==="sync"){const h=mue();d=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=kl,h.resume=kl,h.pause=kl,h}}const c=$i;o.call=(h,m,g)=>Mo(h,c,m,g);let f=!1;a==="post"?o.scheduler=h=>{la(h,c&&c.suspense)}:a!=="sync"&&(f=!0,o.scheduler=(h,m)=>{m?h():PD(h)}),o.augmentJob=h=>{e&&(h.flags|=4),f&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const p=Ble(t,e,o);return Xm&&(d?d.push(p):l&&p()),p}function vue(t,e,n){const r=this.proxy,i=Sr(t)?t.includes(".")?wG(r,t):()=>r[t]:t.bind(r,r);let a;Xt(e)?a=e:(a=e.handler,n=e);const s=Z1(this),o=X1(i,a.bind(r),n);return s(),o}function wG(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function kG(t,e,n=Mn){const r=ra(),i=xa(e),a=ld(e),s=SG(t,i),o=PS((l,d)=>{let c,f=Mn,p;return gue(()=>{const h=t[i];Na(c,h)&&(c=h,d())}),{get(){return l(),n.get?n.get(c):c},set(h){const m=n.set?n.set(h):h;if(!Na(m,c)&&!(f!==Mn&&Na(h,f)))return;const g=r.vnode.props;g&&(e in g||i in g||a in g)&&(`onUpdate:${e}`in g||`onUpdate:${i}`in g||`onUpdate:${a}`in g)||(c=h,d()),r.emit(`update:${e}`,m),Na(h,m)&&Na(h,f)&&!Na(m,p)&&d(),f=h,p=m}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?s||Mn:o,done:!1}:{done:!0}}}},o}const SG=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${xa(e)}Modifiers`]||t[`${ld(e)}Modifiers`];function yue(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Mn;let i=n;const a=e.startsWith("update:"),s=a&&SG(r,e.slice(7));s&&(s.trim&&(i=n.map(c=>Sr(c)?c.trim():c)),s.number&&(i=n.map(CS)));let o,l=r[o=Dy(e)]||r[o=Dy(xa(e))];!l&&a&&(l=r[o=Dy(ld(e))]),l&&Mo(l,t,6,i);const d=r[o+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Mo(d,t,6,i)}}const bue=new WeakMap;function CG(t,e,n=!1){const r=n?bue:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const a=t.emits;let s={},o=!1;if(!Xt(t)){const l=d=>{const c=CG(d,e,!0);c&&(o=!0,li(s,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!a&&!o?(Xn(t)&&r.set(t,null),null):(Dt(a)?a.forEach(l=>s[l]=null):li(s,a),Xn(t)&&r.set(t,s),s)}function LS(t,e){return!t||!xS(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fn(t,e[0].toLowerCase()+e.slice(1))||Fn(t,ld(e))||Fn(t,e))}function G6(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[a],slots:s,attrs:o,emit:l,render:d,renderCache:c,props:f,data:p,setupState:h,ctx:m,inheritAttrs:g}=t,v=e2(t);let _,x;try{if(n.shapeFlag&4){const k=i||r,S=k;_=cl(d.call(S,k,c,f,h,p,m)),x=o}else{const k=e;_=cl(k.length>1?k(f,{attrs:o,slots:s,emit:l}):k(f,null)),x=e.props?o:_ue(o)}}catch(k){Ny.length=0,Y1(k,t,1),_=b(pi)}let w=_;if(x&&g!==!1){const k=Object.keys(x),{shapeFlag:S}=w;k.length&&S&7&&(a&&k.some(TD)&&(x=xue(x,a)),w=$o(w,x,!1,!0))}return n.dirs&&(w=$o(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&E0(w,n.transition),_=w,e2(v),_}const _ue=t=>{let e;for(const n in t)(n==="class"||n==="style"||xS(n))&&((e||(e={}))[n]=t[n]);return e},xue=(t,e)=>{const n={};for(const r in t)(!TD(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function wue(t,e,n){const{props:r,children:i,component:a}=t,{props:s,children:o,patchFlag:l}=e,d=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Y6(r,s,d):!!s;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const p=c[f];if(s[p]!==r[p]&&!LS(d,p))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===s?!1:r?s?Y6(r,s,d):!0:!!s;return!1}function Y6(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const a=r[i];if(e[a]!==t[a]&&!LS(n,a))return!0}return!1}function kue({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const AG={},TG=()=>Object.create(AG),EG=t=>Object.getPrototypeOf(t)===AG;function Sue(t,e,n,r=!1){const i={},a=TG();t.propsDefaults=Object.create(null),MG(t,e,i,a);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:qW(i):t.type.props?t.props=i:t.props=a,t.attrs=a}function Cue(t,e,n,r){const{props:i,attrs:a,vnode:{patchFlag:s}}=t,o=ln(i),[l]=t.propsOptions;let d=!1;if((r||s>0)&&!(s&16)){if(s&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let p=c[f];if(LS(t.emitsOptions,p))continue;const h=e[p];if(l)if(Fn(a,p))h!==a[p]&&(a[p]=h,d=!0);else{const m=xa(p);i[m]=W5(l,o,m,h,t,!1)}else h!==a[p]&&(a[p]=h,d=!0)}}}else{MG(t,e,i,a)&&(d=!0);let c;for(const f in o)(!e||!Fn(e,f)&&((c=ld(f))===f||!Fn(e,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=W5(l,o,f,void 0,t,!0)):delete i[f]);if(a!==o)for(const f in a)(!e||!Fn(e,f))&&(delete a[f],d=!0)}d&&Cu(t.attrs,"set","")}function MG(t,e,n,r){const[i,a]=t.propsOptions;let s=!1,o;if(e)for(let l in e){if($y(l))continue;const d=e[l];let c;i&&Fn(i,c=xa(l))?!a||!a.includes(c)?n[c]=d:(o||(o={}))[c]=d:LS(t.emitsOptions,l)||(!(l in r)||d!==r[l])&&(r[l]=d,s=!0)}if(a){const l=ln(n),d=o||Mn;for(let c=0;c<a.length;c++){const f=a[c];n[f]=W5(i,l,f,d[f],t,!Fn(d,f))}}return s}function W5(t,e,n,r,i,a){const s=t[n];if(s!=null){const o=Fn(s,"default");if(o&&r===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&Xt(l)){const{propsDefaults:d}=i;if(n in d)r=d[n];else{const c=Z1(i);r=d[n]=l.call(null,e),c()}}else r=l;i.ce&&i.ce._setProp(n,r)}s[0]&&(a&&!o?r=!1:s[1]&&(r===""||r===ld(n))&&(r=!0))}return r}const Aue=new WeakMap;function $G(t,e,n=!1){const r=n?Aue:e.propsCache,i=r.get(t);if(i)return i;const a=t.props,s={},o=[];let l=!1;if(!Xt(t)){const c=f=>{l=!0;const[p,h]=$G(f,e,!0);li(s,p),h&&o.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!a&&!l)return Xn(t)&&r.set(t,Mm),Mm;if(Dt(a))for(let c=0;c<a.length;c++){const f=xa(a[c]);K6(f)&&(s[f]=Mn)}else if(a)for(const c in a){const f=xa(c);if(K6(f)){const p=a[c],h=s[f]=Dt(p)||Xt(p)?{type:p}:li({},p),m=h.type;let g=!1,v=!0;if(Dt(m))for(let _=0;_<m.length;++_){const x=m[_],w=Xt(x)&&x.name;if(w==="Boolean"){g=!0;break}else w==="String"&&(v=!1)}else g=Xt(m)&&m.name==="Boolean";h[0]=g,h[1]=v,(g||Fn(h,"default"))&&o.push(f)}}const d=[s,o];return Xn(t)&&r.set(t,d),d}function K6(t){return t[0]!=="$"&&!$y(t)}const LD=t=>t==="_"||t==="_ctx"||t==="$stable",VD=t=>Dt(t)?t.map(cl):[cl(t)],Tue=(t,e,n)=>{if(e._n)return e;const r=D((...i)=>VD(e(...i)),n);return r._c=!1,r},DG=(t,e,n)=>{const r=t._ctx;for(const i in t){if(LD(i))continue;const a=t[i];if(Xt(a))e[i]=Tue(i,a,r);else if(a!=null){const s=VD(a);e[i]=()=>s}}},RG=(t,e)=>{const n=VD(e);t.slots.default=()=>n},PG=(t,e,n)=>{for(const r in e)(n||!LD(r))&&(t[r]=e[r])},Eue=(t,e,n)=>{const r=t.slots=TG();if(t.vnode.shapeFlag&32){const i=e._;i?(PG(r,e,n),n&&SW(r,"_",i,!0)):DG(e,r)}else e&&RG(t,e)},Mue=(t,e,n)=>{const{vnode:r,slots:i}=t;let a=!0,s=Mn;if(r.shapeFlag&32){const o=e._;o?n&&o===1?a=!1:PG(i,e,n):(a=!e.$stable,DG(e,i)),s=e}else e&&(RG(t,e),s={default:1});if(a)for(const o in i)!LD(o)&&s[o]==null&&delete i[o]},la=Iue;function $ue(t){return Due(t)}function Due(t,e){const n=AS();n.__VUE__=!0;const{insert:r,remove:i,patchProp:a,createElement:s,createText:o,createComment:l,setText:d,setElementText:c,parentNode:f,nextSibling:p,setScopeId:h=kl,insertStaticContent:m}=t,g=(Y,K,H,ae=null,be=null,ue=null,pe=void 0,ye=null,Me=!!K.dynamicChildren)=>{if(Y===K)return;Y&&!zf(Y,K)&&(ae=se(Y),G(Y,be,ue,!0),Y=null),K.patchFlag===-2&&(Me=!1,K.dynamicChildren=null);const{type:Te,ref:qe,shapeFlag:We}=K;switch(Te){case VS:v(Y,K,H,ae);break;case pi:_(Y,K,H,ae);break;case nw:Y==null&&x(K,H,ae,pe);break;case _e:B(Y,K,H,ae,be,ue,pe,ye,Me);break;default:We&1?S(Y,K,H,ae,be,ue,pe,ye,Me):We&6?j(Y,K,H,ae,be,ue,pe,ye,Me):(We&64||We&128)&&Te.process(Y,K,H,ae,be,ue,pe,ye,Me,ce)}qe!=null&&be?Ly(qe,Y&&Y.ref,ue,K||Y,!K):qe==null&&Y&&Y.ref!=null&&Ly(Y.ref,null,ue,Y,!0)},v=(Y,K,H,ae)=>{if(Y==null)r(K.el=o(K.children),H,ae);else{const be=K.el=Y.el;K.children!==Y.children&&d(be,K.children)}},_=(Y,K,H,ae)=>{Y==null?r(K.el=l(K.children||""),H,ae):K.el=Y.el},x=(Y,K,H,ae)=>{[Y.el,Y.anchor]=m(Y.children,K,H,ae,Y.el,Y.anchor)},w=({el:Y,anchor:K},H,ae)=>{let be;for(;Y&&Y!==K;)be=p(Y),r(Y,H,ae),Y=be;r(K,H,ae)},k=({el:Y,anchor:K})=>{let H;for(;Y&&Y!==K;)H=p(Y),i(Y),Y=H;i(K)},S=(Y,K,H,ae,be,ue,pe,ye,Me)=>{if(K.type==="svg"?pe="svg":K.type==="math"&&(pe="mathml"),Y==null)C(K,H,ae,be,ue,pe,ye,Me);else{const Te=Y.el&&Y.el._isVueCE?Y.el:null;try{Te&&Te._beginPatch(),$(Y,K,be,ue,pe,ye,Me)}finally{Te&&Te._endPatch()}}},C=(Y,K,H,ae,be,ue,pe,ye)=>{let Me,Te;const{props:qe,shapeFlag:We,transition:at,dirs:st}=Y;if(Me=Y.el=s(Y.type,ue,qe&&qe.is,qe),We&8?c(Me,Y.children):We&16&&M(Y.children,Me,null,ae,be,VA(Y,ue),pe,ye),st&&Zc(Y,null,ae,"created"),A(Me,Y,Y.scopeId,pe,ae),qe){for(const De in qe)De!=="value"&&!$y(De)&&a(Me,De,null,qe[De],ue,ae);"value"in qe&&a(Me,"value",null,qe.value,ue),(Te=qe.onVnodeBeforeMount)&&Uo(Te,ae,Y)}st&&Zc(Y,null,ae,"beforeMount");const Ve=Rue(be,at);Ve&&at.beforeEnter(Me),r(Me,K,H),((Te=qe&&qe.onVnodeMounted)||Ve||st)&&la(()=>{Te&&Uo(Te,ae,Y),Ve&&at.enter(Me),st&&Zc(Y,null,ae,"mounted")},be)},A=(Y,K,H,ae,be)=>{if(H&&h(Y,H),ae)for(let ue=0;ue<ae.length;ue++)h(Y,ae[ue]);if(be){let ue=be.subTree;if(K===ue||OG(ue.type)&&(ue.ssContent===K||ue.ssFallback===K)){const pe=be.vnode;A(Y,pe,pe.scopeId,pe.slotScopeIds,be.parent)}}},M=(Y,K,H,ae,be,ue,pe,ye,Me=0)=>{for(let Te=Me;Te<Y.length;Te++){const qe=Y[Te]=ye?jd(Y[Te]):cl(Y[Te]);g(null,qe,K,H,ae,be,ue,pe,ye)}},$=(Y,K,H,ae,be,ue,pe)=>{const ye=K.el=Y.el;let{patchFlag:Me,dynamicChildren:Te,dirs:qe}=K;Me|=Y.patchFlag&16;const We=Y.props||Mn,at=K.props||Mn;let st;if(H&&Qc(H,!1),(st=at.onVnodeBeforeUpdate)&&Uo(st,H,K,Y),qe&&Zc(K,Y,H,"beforeUpdate"),H&&Qc(H,!0),(We.innerHTML&&at.innerHTML==null||We.textContent&&at.textContent==null)&&c(ye,""),Te?R(Y.dynamicChildren,Te,ye,H,ae,VA(K,be),ue):pe||O(Y,K,ye,null,H,ae,VA(K,be),ue,!1),Me>0){if(Me&16)I(ye,We,at,H,be);else if(Me&2&&We.class!==at.class&&a(ye,"class",null,at.class,be),Me&4&&a(ye,"style",We.style,at.style,be),Me&8){const Ve=K.dynamicProps;for(let De=0;De<Ve.length;De++){const Le=Ve[De],Re=We[Le],Se=at[Le];(Se!==Re||Le==="value")&&a(ye,Le,Re,Se,be,H)}}Me&1&&Y.children!==K.children&&c(ye,K.children)}else!pe&&Te==null&&I(ye,We,at,H,be);((st=at.onVnodeUpdated)||qe)&&la(()=>{st&&Uo(st,H,K,Y),qe&&Zc(K,Y,H,"updated")},ae)},R=(Y,K,H,ae,be,ue,pe)=>{for(let ye=0;ye<K.length;ye++){const Me=Y[ye],Te=K[ye],qe=Me.el&&(Me.type===_e||!zf(Me,Te)||Me.shapeFlag&198)?f(Me.el):H;g(Me,Te,qe,null,ae,be,ue,pe,!0)}},I=(Y,K,H,ae,be)=>{if(K!==H){if(K!==Mn)for(const ue in K)!$y(ue)&&!(ue in H)&&a(Y,ue,K[ue],null,be,ae);for(const ue in H){if($y(ue))continue;const pe=H[ue],ye=K[ue];pe!==ye&&ue!=="value"&&a(Y,ue,ye,pe,be,ae)}"value"in H&&a(Y,"value",K.value,H.value,be)}},B=(Y,K,H,ae,be,ue,pe,ye,Me)=>{const Te=K.el=Y?Y.el:o(""),qe=K.anchor=Y?Y.anchor:o("");let{patchFlag:We,dynamicChildren:at,slotScopeIds:st}=K;st&&(ye=ye?ye.concat(st):st),Y==null?(r(Te,H,ae),r(qe,H,ae),M(K.children||[],H,qe,be,ue,pe,ye,Me)):We>0&&We&64&&at&&Y.dynamicChildren?(R(Y.dynamicChildren,at,H,be,ue,pe,ye),(K.key!=null||be&&K===be.subTree)&&ND(Y,K,!0)):O(Y,K,H,qe,be,ue,pe,ye,Me)},j=(Y,K,H,ae,be,ue,pe,ye,Me)=>{K.slotScopeIds=ye,Y==null?K.shapeFlag&512?be.ctx.activate(K,H,ae,pe,Me):z(K,H,ae,be,ue,pe,Me):F(Y,K,Me)},z=(Y,K,H,ae,be,ue,pe)=>{const ye=Y.component=jue(Y,ae,be);if(K1(Y)&&(ye.ctx.renderer=ce),Fue(ye,!1,pe),ye.asyncDep){if(be&&be.registerDep(ye,q,pe),!Y.el){const Me=ye.subTree=b(pi);_(null,Me,K,H),Y.placeholder=Me.el}}else q(ye,Y,K,H,be,ue,pe)},F=(Y,K,H)=>{const ae=K.component=Y.component;if(wue(Y,K,H))if(ae.asyncDep&&!ae.asyncResolved){N(ae,K,H);return}else ae.next=K,ae.update();else K.el=Y.el,ae.vnode=K},q=(Y,K,H,ae,be,ue,pe)=>{const ye=()=>{if(Y.isMounted){let{next:We,bu:at,u:st,parent:Ve,vnode:De}=Y;{const en=IG(Y);if(en){We&&(We.el=De.el,N(Y,We,pe)),en.asyncDep.then(()=>{Y.isUnmounted||ye()});return}}let Le=We,Re;Qc(Y,!1),We?(We.el=De.el,N(Y,We,pe)):We=De,at&&Jx(at),(Re=We.props&&We.props.onVnodeBeforeUpdate)&&Uo(Re,Ve,We,De),Qc(Y,!0);const Se=G6(Y),Ge=Y.subTree;Y.subTree=Se,g(Ge,Se,f(Ge.el),se(Ge),Y,be,ue),We.el=Se.el,Le===null&&kue(Y,Se.el),st&&la(st,be),(Re=We.props&&We.props.onVnodeUpdated)&&la(()=>Uo(Re,Ve,We,De),be)}else{let We;const{el:at,props:st}=K,{bm:Ve,m:De,parent:Le,root:Re,type:Se}=Y,Ge=Rm(K);Qc(Y,!1),Ve&&Jx(Ve),!Ge&&(We=st&&st.onVnodeBeforeMount)&&Uo(We,Le,K),Qc(Y,!0);{Re.ce&&Re.ce._def.shadowRoot!==!1&&Re.ce._injectChildStyle(Se);const en=Y.subTree=G6(Y);g(null,en,H,ae,Y,be,ue),K.el=en.el}if(De&&la(De,be),!Ge&&(We=st&&st.onVnodeMounted)){const en=K;la(()=>Uo(We,Le,en),be)}(K.shapeFlag&256||Le&&Rm(Le.vnode)&&Le.vnode.shapeFlag&256)&&Y.a&&la(Y.a,be),Y.isMounted=!0,K=H=ae=null}};Y.scope.on();const Me=Y.effect=new MW(ye);Y.scope.off();const Te=Y.update=Me.run.bind(Me),qe=Y.job=Me.runIfDirty.bind(Me);qe.i=Y,qe.id=Y.uid,Me.scheduler=()=>PD(qe),Qc(Y,!0),Te()},N=(Y,K,H)=>{K.component=Y;const ae=Y.vnode.props;Y.vnode=K,Y.next=null,Cue(Y,K.props,ae,H),Mue(Y,K.children,H),qu(),L6(Y),Wu()},O=(Y,K,H,ae,be,ue,pe,ye,Me=!1)=>{const Te=Y&&Y.children,qe=Y?Y.shapeFlag:0,We=K.children,{patchFlag:at,shapeFlag:st}=K;if(at>0){if(at&128){L(Te,We,H,ae,be,ue,pe,ye,Me);return}else if(at&256){V(Te,We,H,ae,be,ue,pe,ye,Me);return}}st&8?(qe&16&&de(Te,be,ue),We!==Te&&c(H,We)):qe&16?st&16?L(Te,We,H,ae,be,ue,pe,ye,Me):de(Te,be,ue,!0):(qe&8&&c(H,""),st&16&&M(We,H,ae,be,ue,pe,ye,Me))},V=(Y,K,H,ae,be,ue,pe,ye,Me)=>{Y=Y||Mm,K=K||Mm;const Te=Y.length,qe=K.length,We=Math.min(Te,qe);let at;for(at=0;at<We;at++){const st=K[at]=Me?jd(K[at]):cl(K[at]);g(Y[at],st,H,null,be,ue,pe,ye,Me)}Te>qe?de(Y,be,ue,!0,!1,We):M(K,H,ae,be,ue,pe,ye,Me,We)},L=(Y,K,H,ae,be,ue,pe,ye,Me)=>{let Te=0;const qe=K.length;let We=Y.length-1,at=qe-1;for(;Te<=We&&Te<=at;){const st=Y[Te],Ve=K[Te]=Me?jd(K[Te]):cl(K[Te]);if(zf(st,Ve))g(st,Ve,H,null,be,ue,pe,ye,Me);else break;Te++}for(;Te<=We&&Te<=at;){const st=Y[We],Ve=K[at]=Me?jd(K[at]):cl(K[at]);if(zf(st,Ve))g(st,Ve,H,null,be,ue,pe,ye,Me);else break;We--,at--}if(Te>We){if(Te<=at){const st=at+1,Ve=st<qe?K[st].el:ae;for(;Te<=at;)g(null,K[Te]=Me?jd(K[Te]):cl(K[Te]),H,Ve,be,ue,pe,ye,Me),Te++}}else if(Te>at)for(;Te<=We;)G(Y[Te],be,ue,!0),Te++;else{const st=Te,Ve=Te,De=new Map;for(Te=Ve;Te<=at;Te++){const $e=K[Te]=Me?jd(K[Te]):cl(K[Te]);$e.key!=null&&De.set($e.key,Te)}let Le,Re=0;const Se=at-Ve+1;let Ge=!1,en=0;const Ln=new Array(Se);for(Te=0;Te<Se;Te++)Ln[Te]=0;for(Te=st;Te<=We;Te++){const $e=Y[Te];if(Re>=Se){G($e,be,ue,!0);continue}let ke;if($e.key!=null)ke=De.get($e.key);else for(Le=Ve;Le<=at;Le++)if(Ln[Le-Ve]===0&&zf($e,K[Le])){ke=Le;break}ke===void 0?G($e,be,ue,!0):(Ln[ke-Ve]=Te+1,ke>=en?en=ke:Ge=!0,g($e,K[ke],H,null,be,ue,pe,ye,Me),Re++)}const Ne=Ge?Pue(Ln):Mm;for(Le=Ne.length-1,Te=Se-1;Te>=0;Te--){const $e=Ve+Te,ke=K[$e],Fe=K[$e+1],St=$e+1<qe?Fe.el||Fe.placeholder:ae;Ln[Te]===0?g(null,ke,H,St,be,ue,pe,ye,Me):Ge&&(Le<0||Te!==Ne[Le]?U(ke,H,St,2):Le--)}}},U=(Y,K,H,ae,be=null)=>{const{el:ue,type:pe,transition:ye,children:Me,shapeFlag:Te}=Y;if(Te&6){U(Y.component.subTree,K,H,ae);return}if(Te&128){Y.suspense.move(K,H,ae);return}if(Te&64){pe.move(Y,K,H,ce);return}if(pe===_e){r(ue,K,H);for(let We=0;We<Me.length;We++)U(Me[We],K,H,ae);r(Y.anchor,K,H);return}if(pe===nw){w(Y,K,H);return}if(ae!==2&&Te&1&&ye)if(ae===0)ye.beforeEnter(ue),r(ue,K,H),la(()=>ye.enter(ue),be);else{const{leave:We,delayLeave:at,afterLeave:st}=ye,Ve=()=>{Y.ctx.isUnmounted?i(ue):r(ue,K,H)},De=()=>{ue._isLeaving&&ue[xu](!0),We(ue,()=>{Ve(),st&&st()})};at?at(ue,Ve,De):De()}else r(ue,K,H)},G=(Y,K,H,ae=!1,be=!1)=>{const{type:ue,props:pe,ref:ye,children:Me,dynamicChildren:Te,shapeFlag:qe,patchFlag:We,dirs:at,cacheIndex:st}=Y;if(We===-2&&(be=!1),ye!=null&&(qu(),Ly(ye,null,H,Y,!0),Wu()),st!=null&&(K.renderCache[st]=void 0),qe&256){K.ctx.deactivate(Y);return}const Ve=qe&1&&at,De=!Rm(Y);let Le;if(De&&(Le=pe&&pe.onVnodeBeforeUnmount)&&Uo(Le,K,Y),qe&6)ee(Y.component,H,ae);else{if(qe&128){Y.suspense.unmount(H,ae);return}Ve&&Zc(Y,null,K,"beforeUnmount"),qe&64?Y.type.remove(Y,K,H,ce,ae):Te&&!Te.hasOnce&&(ue!==_e||We>0&&We&64)?de(Te,K,H,!1,!0):(ue===_e&&We&384||!be&&qe&16)&&de(Me,K,H),ae&&X(Y)}(De&&(Le=pe&&pe.onVnodeUnmounted)||Ve)&&la(()=>{Le&&Uo(Le,K,Y),Ve&&Zc(Y,null,K,"unmounted")},H)},X=Y=>{const{type:K,el:H,anchor:ae,transition:be}=Y;if(K===_e){re(H,ae);return}if(K===nw){k(Y);return}const ue=()=>{i(H),be&&!be.persisted&&be.afterLeave&&be.afterLeave()};if(Y.shapeFlag&1&&be&&!be.persisted){const{leave:pe,delayLeave:ye}=be,Me=()=>pe(H,ue);ye?ye(Y.el,ue,Me):Me()}else ue()},re=(Y,K)=>{let H;for(;Y!==K;)H=p(Y),i(Y),Y=H;i(K)},ee=(Y,K,H)=>{const{bum:ae,scope:be,job:ue,subTree:pe,um:ye,m:Me,a:Te}=Y;X6(Me),X6(Te),ae&&Jx(ae),be.stop(),ue&&(ue.flags|=8,G(pe,Y,K,H)),ye&&la(ye,K),la(()=>{Y.isUnmounted=!0},K)},de=(Y,K,H,ae=!1,be=!1,ue=0)=>{for(let pe=ue;pe<Y.length;pe++)G(Y[pe],K,H,ae,be)},se=Y=>{if(Y.shapeFlag&6)return se(Y.component.subTree);if(Y.shapeFlag&128)return Y.suspense.next();const K=p(Y.anchor||Y.el),H=K&&K[eG];return H?p(H):K};let te=!1;const ne=(Y,K,H)=>{Y==null?K._vnode&&G(K._vnode,null,null,!0):g(K._vnode||null,Y,K,null,null,null,H),K._vnode=Y,te||(te=!0,L6(),ZW(),te=!1)},ce={p:g,um:G,m:U,r:X,mt:z,mc:M,pc:O,pbc:R,n:se,o:t};return{render:ne,hydrate:void 0,createApp:fue(ne)}}function VA({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Qc({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Rue(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ND(t,e,n=!1){const r=t.children,i=e.children;if(Dt(r)&&Dt(i))for(let a=0;a<r.length;a++){const s=r[a];let o=i[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[a]=jd(i[a]),o.el=s.el),!n&&o.patchFlag!==-2&&ND(s,o)),o.type===VS&&o.patchFlag!==-1&&(o.el=s.el),o.type===pi&&!o.el&&(o.el=s.el)}}function Pue(t){const e=t.slice(),n=[0];let r,i,a,s,o;const l=t.length;for(r=0;r<l;r++){const d=t[r];if(d!==0){if(i=n[n.length-1],t[i]<d){e[r]=i,n.push(r);continue}for(a=0,s=n.length-1;a<s;)o=a+s>>1,t[n[o]]<d?a=o+1:s=o;d<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,s=n[a-1];a-- >0;)n[a]=s,s=e[s];return n}function IG(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:IG(e)}function X6(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const OG=t=>t.__isSuspense;function Iue(t,e){e&&e.pendingBranch?Dt(t)?e.effects.push(...t):e.effects.push(t):Hle(t)}const _e=Symbol.for("v-fgt"),VS=Symbol.for("v-txt"),pi=Symbol.for("v-cmt"),nw=Symbol.for("v-stc"),Ny=[];let is=null;function T(t=!1){Ny.push(is=t?null:[])}function Oue(){Ny.pop(),is=Ny[Ny.length-1]||null}let $0=1;function r2(t,e=!1){$0+=t,t<0&&is&&e&&(is.hasOnce=!0)}function LG(t){return t.dynamicChildren=$0>0?is||Mm:null,Oue(),$0>0&&is&&is.push(t),t}function P(t,e,n,r,i,a){return LG(u(t,e,n,r,i,a,!0))}function he(t,e,n,r,i){return LG(b(t,e,n,r,i,!0))}function D0(t){return t?t.__v_isVNode===!0:!1}function zf(t,e){return t.type===e.type&&t.key===e.key}const VG=({key:t})=>t!=null?t:null,rw=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Sr(t)||Bn(t)||Xt(t)?{i:Di,r:t,k:e,f:!!n}:t:null);function u(t,e=null,n=null,r=0,i=null,a=t===_e?0:1,s=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&VG(e),ref:e&&rw(e),scopeId:JW,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Di};return o?(jD(l,n),a&128&&t.normalize(l)):n&&(l.shapeFlag|=Sr(n)?8:16),$0>0&&!s&&is&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&is.push(l),l}const b=Lue;function Lue(t,e=null,n=null,r=0,i=null,a=!1){if((!t||t===pG)&&(t=pi),D0(t)){const o=$o(t,e,!0);return n&&jD(o,n),$0>0&&!a&&is&&(o.shapeFlag&6?is[is.indexOf(t)]=o:is.push(o)),o.patchFlag=-2,o}if(Hue(t)&&(t=t.__vccOpts),e){e=Xr(e);let{class:o,style:l}=e;o&&!Sr(o)&&(e.class=fe(o)),Xn(l)&&(RS(l)&&!Dt(l)&&(l=li({},l)),e.style=nt(l))}const s=Sr(t)?1:OG(t)?128:tG(t)?64:Xn(t)?4:Xt(t)?2:0;return u(t,e,n,r,i,s,a,!0)}function Xr(t){return t?RS(t)||EG(t)?li({},t):t:null}function $o(t,e,n=!1,r=!1){const{props:i,ref:a,patchFlag:s,children:o,transition:l}=t,d=e?Ct(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&VG(d),ref:e&&e.ref?n&&a?Dt(a)?a.concat(rw(e)):[a,rw(e)]:rw(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_e?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$o(t.ssContent),ssFallback:t.ssFallback&&$o(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&E0(c,l.clone(c)),c}function W(t=" ",e=0){return b(VS,null,t,e)}function ur(t,e){const n=b(nw,null,t);return n.staticCount=e,n}function ie(t="",e=!1){return e?(T(),he(pi,null,t)):b(pi,null,t)}function cl(t){return t==null||typeof t=="boolean"?b(pi):Dt(t)?b(_e,null,t.slice()):D0(t)?jd(t):b(VS,null,String(t))}function jd(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:$o(t)}function jD(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Dt(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),jD(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!EG(e)?e._ctx=Di:i===3&&Di&&(Di.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Xt(e)?(e={default:e,_ctx:Di},n=32):(e=String(e),r&64?(n=16,e=[W(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ct(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=fe([e.class,r.class]));else if(i==="style")e.style=nt([e.style,r.style]);else if(xS(i)){const a=e[i],s=r[i];s&&a!==s&&!(Dt(a)&&a.includes(s))&&(e[i]=a?[].concat(a,s):s)}else i!==""&&(e[i]=r[i])}return e}function Uo(t,e,n,r=null){Mo(t,e,7,[n,r])}const Vue=_G();let Nue=0;function jue(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Vue,a={uid:Nue++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EW(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$G(r,i),emitsOptions:CG(r,i),emit:null,emitted:null,propsDefaults:Mn,inheritAttrs:r.inheritAttrs,ctx:Mn,data:Mn,props:Mn,attrs:Mn,slots:Mn,refs:Mn,setupState:Mn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=yue.bind(null,a),t.ce&&t.ce(a),a}let $i=null;const ra=()=>$i||Di;let i2,G5;{const t=AS(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),a=>{i.length>1?i.forEach(s=>s(a)):i[0](a)}};i2=e("__VUE_INSTANCE_SETTERS__",n=>$i=n),G5=e("__VUE_SSR_SETTERS__",n=>Xm=n)}const Z1=t=>{const e=$i;return i2(t),t.scope.on(),()=>{t.scope.off(),i2(e)}},Z6=()=>{$i&&$i.scope.off(),i2(null)};function NG(t){return t.vnode.shapeFlag&4}let Xm=!1;function Fue(t,e=!1,n=!1){e&&G5(e);const{props:r,children:i}=t.vnode,a=NG(t);Sue(t,r,a,e),Eue(t,i,n||e);const s=a?Bue(t,e):void 0;return e&&G5(!1),s}function Bue(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,aue);const{setup:r}=n;if(r){qu();const i=t.setupContext=r.length>1?FG(t):null,a=Z1(t),s=G1(r,t,0,[t.props,i]),o=xW(s);if(Wu(),a(),(o||t.sp)&&!Rm(t)&&OD(t),o){if(s.then(Z6,Z6),e)return s.then(l=>{Q6(t,l)}).catch(l=>{Y1(l,t,0)});t.asyncDep=s}else Q6(t,s)}else jG(t)}function Q6(t,e,n){Xt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Xn(e)&&(t.setupState=GW(e)),jG(t)}function jG(t,e,n){const r=t.type;t.render||(t.render=r.render||kl);{const i=Z1(t);qu();try{sue(t)}finally{Wu(),i()}}}const zue={get(t,e){return Yi(t,"get",""),t[e]}};function FG(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,zue),slots:t.slots,emit:t.emit,expose:e}}function NS(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(GW(Vt(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Vy)return Vy[n](t)},has(e,n){return n in e||n in Vy}})):t.proxy}function Uue(t,e=!0){return Xt(t)?t.displayName||t.name:t.name||e&&t.__name}function Hue(t){return Xt(t)&&"__vccOpts"in t}const J=(t,e)=>jle(t,e,Xm);function dr(t,e,n){try{r2(-1);const r=arguments.length;return r===2?Xn(e)&&!Dt(e)?D0(e)?b(t,null,[e]):b(t,e):b(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&D0(n)&&(n=[n]),b(t,e,n))}finally{r2(1)}}const que="3.5.25";/**
* @vue/runtime-dom v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Y5;const J6=typeof window!="undefined"&&window.trustedTypes;if(J6)try{Y5=J6.createPolicy("vue",{createHTML:t=>t})}catch(t){}const BG=Y5?t=>Y5.createHTML(t):t=>t,Wue="http://www.w3.org/2000/svg",Gue="http://www.w3.org/1998/Math/MathML",vu=typeof document!="undefined"?document:null,eL=vu&&vu.createElement("template"),Yue={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?vu.createElementNS(Wue,t):e==="mathml"?vu.createElementNS(Gue,t):n?vu.createElement(t,{is:n}):vu.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>vu.createTextNode(t),createComment:t=>vu.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>vu.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,a){const s=n?n.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{eL.innerHTML=BG(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const o=eL.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},yd="transition",nv="animation",R0=Symbol("_vtc"),zG={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Kue=li({},iG,zG),Xue=t=>(t.displayName="Transition",t.props=Kue,t),UG=Xue((t,{slots:e})=>dr(Yle,Zue(t),e)),Jc=(t,e=[])=>{Dt(t)?t.forEach(n=>n(...e)):t&&t(...e)},tL=t=>t?Dt(t)?t.some(e=>e.length>1):t.length>1:!1;function Zue(t){const e={};for(const B in t)B in zG||(e[B]=t[B]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:a=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=a,appearActiveClass:d=s,appearToClass:c=o,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,m=Que(i),g=m&&m[0],v=m&&m[1],{onBeforeEnter:_,onEnter:x,onEnterCancelled:w,onLeave:k,onLeaveCancelled:S,onBeforeAppear:C=_,onAppear:A=x,onAppearCancelled:M=w}=e,$=(B,j,z,F)=>{B._enterCancelled=F,ef(B,j?c:o),ef(B,j?d:s),z&&z()},R=(B,j)=>{B._isLeaving=!1,ef(B,f),ef(B,h),ef(B,p),j&&j()},I=B=>(j,z)=>{const F=B?A:x,q=()=>$(j,B,z);Jc(F,[j,q]),nL(()=>{ef(j,B?l:a),eu(j,B?c:o),tL(F)||rL(j,r,g,q)})};return li(e,{onBeforeEnter(B){Jc(_,[B]),eu(B,a),eu(B,s)},onBeforeAppear(B){Jc(C,[B]),eu(B,l),eu(B,d)},onEnter:I(!1),onAppear:I(!0),onLeave(B,j){B._isLeaving=!0;const z=()=>R(B,j);eu(B,f),B._enterCancelled?(eu(B,p),sL(B)):(sL(B),eu(B,p)),nL(()=>{B._isLeaving&&(ef(B,f),eu(B,h),tL(k)||rL(B,r,v,z))}),Jc(k,[B,z])},onEnterCancelled(B){$(B,!1,void 0,!0),Jc(w,[B])},onAppearCancelled(B){$(B,!0,void 0,!0),Jc(M,[B])},onLeaveCancelled(B){R(B),Jc(S,[B])}})}function Que(t){if(t==null)return null;if(Xn(t))return[NA(t.enter),NA(t.leave)];{const e=NA(t);return[e,e]}}function NA(t){return sle(t)}function eu(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[R0]||(t[R0]=new Set)).add(e)}function ef(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[R0];n&&(n.delete(e),n.size||(t[R0]=void 0))}function nL(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Jue=0;function rL(t,e,n,r){const i=t._endId=++Jue,a=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(a,n);const{type:s,timeout:o,propCount:l}=ede(t,e);if(!s)return r();const d=s+"end";let c=0;const f=()=>{t.removeEventListener(d,p),a()},p=h=>{h.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},o+1),t.addEventListener(d,p)}function ede(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),i=r(`${yd}Delay`),a=r(`${yd}Duration`),s=iL(i,a),o=r(`${nv}Delay`),l=r(`${nv}Duration`),d=iL(o,l);let c=null,f=0,p=0;e===yd?s>0&&(c=yd,f=s,p=a.length):e===nv?d>0&&(c=nv,f=d,p=l.length):(f=Math.max(s,d),c=f>0?s>d?yd:nv:null,p=c?c===yd?a.length:l.length:0);const h=c===yd&&/\b(?:transform|all)(?:,|$)/.test(r(`${yd}Property`).toString());return{type:c,timeout:f,propCount:p,hasTransform:h}}function iL(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>aL(n)+aL(t[r])))}function aL(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function sL(t){return(t?t.ownerDocument:document).body.offsetHeight}function tde(t,e,n){const r=t[R0];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const a2=Symbol("_vod"),HG=Symbol("_vsh"),ot={name:"show",beforeMount(t,{value:e},{transition:n}){t[a2]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):rv(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),rv(t,!0),r.enter(t)):r.leave(t,()=>{rv(t,!1)}):rv(t,e))},beforeUnmount(t,{value:e}){rv(t,e)}};function rv(t,e){t.style.display=e?t[a2]:"none",t[HG]=!e}const nde=Symbol(""),rde=/(?:^|;)\s*display\s*:/;function ide(t,e,n){const r=t.style,i=Sr(n);let a=!1;if(n&&!i){if(e)if(Sr(e))for(const s of e.split(";")){const o=s.slice(0,s.indexOf(":")).trim();n[o]==null&&iw(r,o,"")}else for(const s in e)n[s]==null&&iw(r,s,"");for(const s in n)s==="display"&&(a=!0),iw(r,s,n[s])}else if(i){if(e!==n){const s=r[nde];s&&(n+=";"+s),r.cssText=n,a=rde.test(n)}}else e&&t.removeAttribute("style");a2 in t&&(t[a2]=a?r.display:"",t[HG]&&(r.display="none"))}const oL=/\s*!important$/;function iw(t,e,n){if(Dt(n))n.forEach(r=>iw(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ade(t,e);oL.test(n)?t.setProperty(ld(r),n.replace(oL,""),"important"):t[r]=n}}const lL=["Webkit","Moz","ms"],jA={};function ade(t,e){const n=jA[e];if(n)return n;let r=xa(e);if(r!=="filter"&&r in t)return jA[e]=r;r=SS(r);for(let i=0;i<lL.length;i++){const a=lL[i]+r;if(a in t)return jA[e]=a}return e}const uL="http://www.w3.org/1999/xlink";function dL(t,e,n,r,i,a=fle(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(uL,e.slice(6,e.length)):t.setAttributeNS(uL,e,n):n==null||a&&!CW(n)?t.removeAttribute(e):t.setAttribute(e,a?"":To(n)?String(n):n)}function cL(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?BG(n):n);return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const o=a==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(o!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=CW(n):n==null&&o==="string"?(n="",s=!0):o==="number"&&(n=0,s=!0)}try{t[e]=n}catch(o){}s&&t.removeAttribute(i||e)}function Tu(t,e,n,r){t.addEventListener(e,n,r)}function sde(t,e,n,r){t.removeEventListener(e,n,r)}const fL=Symbol("_vei");function ode(t,e,n,r,i=null){const a=t[fL]||(t[fL]={}),s=a[e];if(r&&s)s.value=r;else{const[o,l]=lde(e);if(r){const d=a[e]=cde(r,i);Tu(t,o,d,l)}else s&&(sde(t,o,s,l),a[e]=void 0)}}const pL=/(?:Once|Passive|Capture)$/;function lde(t){let e;if(pL.test(t)){e={};let r;for(;r=t.match(pL);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ld(t.slice(2)),e]}let FA=0;const ude=Promise.resolve(),dde=()=>FA||(ude.then(()=>FA=0),FA=Date.now());function cde(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Mo(fde(r,n.value),e,5,[r])};return n.value=t,n.attached=dde(),n}function fde(t,e){if(Dt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const hL=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,pde=(t,e,n,r,i,a)=>{const s=i==="svg";e==="class"?tde(t,r,s):e==="style"?ide(t,n,r):xS(e)?TD(e)||ode(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hde(t,e,r,s))?(cL(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&dL(t,e,r,s,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Sr(r))?cL(t,xa(e),r,a,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),dL(t,e,r,s))};function hde(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&hL(e)&&Xt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return hL(e)&&Sr(n)?!1:e in t}const Sc=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Dt(e)?n=>Jx(e,n):e};function mde(t){t.target.composing=!0}function mL(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Hs=Symbol("_assign");function gL(t,e,n){return e&&(t=t.trim()),n&&(t=CS(t)),t}const Mt={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Hs]=Sc(i);const a=r||i.props&&i.props.type==="number";Tu(t,e?"change":"input",s=>{s.target.composing||t[Hs](gL(t.value,n,a))}),(n||a)&&Tu(t,"change",()=>{t.value=gL(t.value,n,a)}),e||(Tu(t,"compositionstart",mde),Tu(t,"compositionend",mL),Tu(t,"change",mL))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:a}},s){if(t[Hs]=Sc(s),t.composing)return;const o=(a||t.type==="number")&&!/^0\d/.test(t.value)?CS(t.value):t.value,l=e==null?"":e;o!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},$n={deep:!0,created(t,e,n){t[Hs]=Sc(n),Tu(t,"change",()=>{const r=t._modelValue,i=Zm(t),a=t.checked,s=t[Hs];if(Dt(r)){const o=MD(r,i),l=o!==-1;if(a&&!l)s(r.concat(i));else if(!a&&l){const d=[...r];d.splice(o,1),s(d)}}else if(Tg(r)){const o=new Set(r);a?o.add(i):o.delete(i),s(o)}else s(qG(t,a))})},mounted:vL,beforeUpdate(t,e,n){t[Hs]=Sc(n),vL(t,e,n)}};function vL(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Dt(e))i=MD(e,r.props.value)>-1;else if(Tg(e))i=e.has(r.props.value);else{if(e===n)return;i=Lp(e,qG(t,!0))}t.checked!==i&&(t.checked=i)}const Ki={created(t,{value:e},n){t.checked=Lp(e,n.props.value),t[Hs]=Sc(n),Tu(t,"change",()=>{t[Hs](Zm(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Hs]=Sc(r),e!==n&&(t.checked=Lp(e,r.props.value))}},gn={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Tg(e);Tu(t,"change",()=>{const a=Array.prototype.filter.call(t.options,s=>s.selected).map(s=>n?CS(Zm(s)):Zm(s));t[Hs](t.multiple?i?new Set(a):a:a[0]),t._assigning=!0,ir(()=>{t._assigning=!1})}),t[Hs]=Sc(r)},mounted(t,{value:e}){yL(t,e)},beforeUpdate(t,e,n){t[Hs]=Sc(n)},updated(t,{value:e}){t._assigning||yL(t,e)}};function yL(t,e){const n=t.multiple,r=Dt(e);if(!(n&&!r&&!Tg(e))){for(let i=0,a=t.options.length;i<a;i++){const s=t.options[i],o=Zm(s);if(n)if(r){const l=typeof o;l==="string"||l==="number"?s.selected=e.some(d=>String(d)===String(o)):s.selected=MD(e,o)>-1}else s.selected=e.has(o);else if(Lp(Zm(s),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Zm(t){return"_value"in t?t._value:t.value}function qG(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const gde={created(t,e,n){Xb(t,e,n,null,"created")},mounted(t,e,n){Xb(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Xb(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Xb(t,e,n,r,"updated")}};function vde(t,e){switch(t){case"SELECT":return gn;case"TEXTAREA":return Mt;default:switch(e){case"checkbox":return $n;case"radio":return Ki;default:return Mt}}}function Xb(t,e,n,r,i){const s=vde(t.tagName,n.props&&n.props.type)[i];s&&s(t,e,n,r)}const yde=["ctrl","shift","alt","meta"],bde={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>yde.some(n=>t[`${n}Key`]&&!e.includes(n))},dt=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...a)=>{for(let s=0;s<e.length;s++){const o=bde[e[s]];if(o&&o(i,e))return}return t(i,...a)})},_de={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Eu=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const a=ld(i.key);if(e.some(s=>s===a||_de[s]===a))return t(i)})},xde=li({patchProp:pde},Yue);let bL;function WG(){return bL||(bL=$ue(xde))}const _L=(...t)=>{WG().render(...t)},FD=(...t)=>{const e=WG().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=kde(r);if(!i)return;const a=e._component;!Xt(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,wde(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function wde(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function kde(t){return Sr(t)?document.querySelector(t):t}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let GG;const jS=t=>GG=t,YG=Symbol();function K5(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var jy;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(jy||(jy={}));function Sde(){const t=TS(!0),e=t.run(()=>Q({}));let n=[],r=[];const i=Vt({install(a){jS(i),i._a=a,a.provide(YG,i),a.config.globalProperties.$pinia=i,r.forEach(s=>n.push(s)),r=[]},use(a){return this._a?n.push(a):r.push(a),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const KG=()=>{};function xL(t,e,n,r=KG){t.add(e);const i=()=>{t.delete(e)&&r()};return!n&&q1()&&W1(i),i}function Th(t,...e){t.forEach(n=>{n(...e)})}const Cde=t=>t(),wL=Symbol(),BA=Symbol();function X5(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];K5(i)&&K5(r)&&t.hasOwnProperty(n)&&!Bn(r)&&!Vu(r)?t[n]=X5(i,r):t[n]=r}return t}const Ade=Symbol();function Tde(t){return!K5(t)||!Object.prototype.hasOwnProperty.call(t,Ade)}const{assign:Rd}=Object;function Ede(t){return!!(Bn(t)&&t.effect)}function Mde(t,e,n,r){const{state:i,actions:a,getters:s}=e,o=n.state.value[t];let l;function d(){o||(n.state.value[t]=i?i():{});const c=Zs(n.state.value[t]);return Rd(c,a,Object.keys(s||{}).reduce((f,p)=>(f[p]=Vt(J(()=>{jS(n);const h=n._s.get(t);return s[p].call(h,h)})),f),{}))}return l=XG(t,d,e,n,r,!0),l}function XG(t,e,n={},r,i,a){let s;const o=Rd({actions:{}},n),l={deep:!0};let d,c,f=new Set,p=new Set,h;const m=r.state.value[t];!a&&!m&&(r.state.value[t]={}),Q({});let g;function v(M){let $;d=c=!1,typeof M=="function"?(M(r.state.value[t]),$={type:jy.patchFunction,storeId:t,events:h}):(X5(r.state.value[t],M),$={type:jy.patchObject,payload:M,storeId:t,events:h});const R=g=Symbol();ir().then(()=>{g===R&&(d=!0)}),c=!0,Th(f,$,r.state.value[t])}const _=a?function(){const{state:$}=n,R=$?$():{};this.$patch(I=>{Rd(I,R)})}:KG;function x(){s.stop(),f.clear(),p.clear(),r._s.delete(t)}const w=(M,$="")=>{if(wL in M)return M[BA]=$,M;const R=function(){jS(r);const I=Array.from(arguments),B=new Set,j=new Set;function z(N){B.add(N)}function F(N){j.add(N)}Th(p,{args:I,name:R[BA],store:S,after:z,onError:F});let q;try{q=M.apply(this&&this.$id===t?this:S,I)}catch(N){throw Th(j,N),N}return q instanceof Promise?q.then(N=>(Th(B,N),N)).catch(N=>(Th(j,N),Promise.reject(N))):(Th(B,q),q)};return R[wL]=!0,R[BA]=$,R},k={_p:r,$id:t,$onAction:xL.bind(null,p),$patch:v,$reset:_,$subscribe(M,$={}){const R=xL(f,M,$.detached,()=>I()),I=s.run(()=>Je(()=>r.state.value[t],B=>{($.flush==="sync"?c:d)&&M({storeId:t,type:jy.direct,events:h},B)},Rd({},l,$)));return R},$dispose:x},S=Jt(k);r._s.set(t,S);const A=(r._a&&r._a.runWithContext||Cde)(()=>r._e.run(()=>(s=TS()).run(()=>e({action:w}))));for(const M in A){const $=A[M];if(Bn($)&&!Ede($)||Vu($))a||(m&&Tde($)&&(Bn($)?$.value=m[M]:X5($,m[M])),r.state.value[t][M]=$);else if(typeof $=="function"){const R=w($,M);A[M]=R,o.actions[M]=$}}return Rd(S,A),Rd(ln(S),A),Object.defineProperty(S,"$state",{get:()=>r.state.value[t],set:M=>{v($=>{Rd($,M)})}}),r._p.forEach(M=>{Rd(S,s.run(()=>M({store:S,app:r._a,pinia:r,options:o})))}),m&&a&&n.hydrate&&n.hydrate(S.$state,m),d=!0,c=!0,S}/*! #__NO_SIDE_EFFECTS__ */function Ul(t,e,n){let r;const i=typeof e=="function";r=i?n:e;function a(s,o){const l=pue();return s=s||(l?vi(YG,null):null),s&&jS(s),s=GG,s._s.has(t)||(i?XG(t,e,r,s):Mde(t,r,s)),s._s.get(t)}return a.$id=t,a}const $de="modulepreload",Dde=function(t){return"/assets/mkaguzi/frontend/"+t},kL={},Va=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Dde(l),l in kL)return;kL[l]=!0;const d=l.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":$de,d||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),d)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const um=typeof document!="undefined";function ZG(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Rde(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ZG(t.default)}const jn=Object.assign;function zA(t,e){const n={};for(const r in e){const i=e[r];n[r]=Do(i)?i.map(t):t(i)}return n}const Fy=()=>{},Do=Array.isArray;function SL(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const QG=/#/g,Pde=/&/g,Ide=/\//g,Ode=/=/g,Lde=/\?/g,JG=/\+/g,Vde=/%5B/g,Nde=/%5D/g,eY=/%5E/g,jde=/%60/g,tY=/%7B/g,Fde=/%7C/g,nY=/%7D/g,Bde=/%20/g;function BD(t){return t==null?"":encodeURI(""+t).replace(Fde,"|").replace(Vde,"[").replace(Nde,"]")}function zde(t){return BD(t).replace(tY,"{").replace(nY,"}").replace(eY,"^")}function Z5(t){return BD(t).replace(JG,"%2B").replace(Bde,"+").replace(QG,"%23").replace(Pde,"%26").replace(jde,"`").replace(tY,"{").replace(nY,"}").replace(eY,"^")}function Ude(t){return Z5(t).replace(Ode,"%3D")}function Hde(t){return BD(t).replace(QG,"%23").replace(Lde,"%3F")}function qde(t){return Hde(t).replace(Ide,"%2F")}function P0(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch(e){}return""+t}const Wde=/\/$/,Gde=t=>t.replace(Wde,"");function UA(t,e,n="/"){let r,i={},a="",s="";const o=e.indexOf("#");let l=e.indexOf("?");return l=o>=0&&l>o?-1:l,l>=0&&(r=e.slice(0,l),a=e.slice(l,o>0?o:e.length),i=t(a.slice(1))),o>=0&&(r=r||e.slice(0,o),s=e.slice(o,e.length)),r=Zde(r!=null?r:e,n),{fullPath:r+a+s,path:r,query:i,hash:P0(s)}}function Yde(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function CL(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Kde(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Qm(e.matched[r],n.matched[i])&&rY(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Qm(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function rY(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Xde(t[n],e[n]))return!1;return!0}function Xde(t,e){return Do(t)?AL(t,e):Do(e)?AL(e,t):t===e}function AL(t,e){return Do(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Zde(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let a=n.length-1,s,o;for(s=0;s<r.length;s++)if(o=r[s],o!==".")if(o==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(s).join("/")}const bd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Q5=function(t){return t.pop="pop",t.push="push",t}({}),HA=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function Qde(t){if(!t)if(um){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Gde(t)}const Jde=/^[^#]+#/;function ece(t,e){return t.replace(Jde,"#")+e}function tce(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const FS=()=>({left:window.scrollX,top:window.scrollY});function nce(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=tce(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function TL(t,e){return(history.state?history.state.position-e:-1)+t}const J5=new Map;function rce(t,e){J5.set(t,e)}function ice(t){const e=J5.get(t);return J5.delete(t),e}function ace(t){return typeof t=="string"||t&&typeof t=="object"}function iY(t){return typeof t=="string"||typeof t=="symbol"}let $r=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const aY=Symbol("");$r.MATCHER_NOT_FOUND+"",$r.NAVIGATION_GUARD_REDIRECT+"",$r.NAVIGATION_ABORTED+"",$r.NAVIGATION_CANCELLED+"",$r.NAVIGATION_DUPLICATED+"";function Jm(t,e){return jn(new Error,{type:t,[aY]:!0},e)}function tu(t,e){return t instanceof Error&&aY in t&&(e==null||!!(t.type&e))}const sce=["params","query","hash"];function oce(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of sce)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function lce(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(JG," "),a=i.indexOf("="),s=P0(a<0?i:i.slice(0,a)),o=a<0?null:P0(i.slice(a+1));if(s in e){let l=e[s];Do(l)||(l=e[s]=[l]),l.push(o)}else e[s]=o}return e}function EL(t){let e="";for(let n in t){const r=t[n];if(n=Ude(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Do(r)?r.map(i=>i&&Z5(i)):[r&&Z5(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function uce(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Do(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const dce=Symbol(""),ML=Symbol(""),BS=Symbol(""),zD=Symbol(""),eE=Symbol("");function iv(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Fd(t,e,n,r,i,a=s=>s()){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,l)=>{const d=p=>{p===!1?l(Jm($r.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):ace(p)?l(Jm($r.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(s&&r.enterCallbacks[i]===s&&typeof p=="function"&&s.push(p),o())},c=a(()=>t.call(r&&r.instances[i],e,n,d));let f=Promise.resolve(c);t.length<3&&(f=f.then(d)),f.catch(p=>l(p))})}function qA(t,e,n,r,i=a=>a()){const a=[];for(const s of t)for(const o in s.components){let l=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(ZG(l)){const d=(l.__vccOpts||l)[e];d&&a.push(Fd(d,n,r,s,o,i))}else{let d=l();a.push(()=>d.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${o}" at "${s.path}"`);const f=Rde(c)?c.default:c;s.mods[o]=c,s.components[o]=f;const p=(f.__vccOpts||f)[e];return p&&Fd(p,n,r,s,o,i)()}))}}return a}function cce(t,e){const n=[],r=[],i=[],a=Math.max(e.matched.length,t.matched.length);for(let s=0;s<a;s++){const o=e.matched[s];o&&(t.matched.find(d=>Qm(d,o))?r.push(o):n.push(o));const l=t.matched[s];l&&(e.matched.find(d=>Qm(d,l))||i.push(l))}return[n,r,i]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let fce=()=>location.protocol+"//"+location.host;function sY(t,e){const{pathname:n,search:r,hash:i}=e,a=t.indexOf("#");if(a>-1){let s=i.includes(t.slice(a))?t.slice(a).length:1,o=i.slice(s);return o[0]!=="/"&&(o="/"+o),CL(o,"")}return CL(n,t)+r+i}function pce(t,e,n,r){let i=[],a=[],s=null;const o=({state:p})=>{const h=sY(t,location),m=n.value,g=e.value;let v=0;if(p){if(n.value=h,e.value=p,s&&s===m){s=null;return}v=g?p.position-g.position:0}else r(h);i.forEach(_=>{_(n.value,m,{delta:v,type:Q5.pop,direction:v?v>0?HA.forward:HA.back:HA.unknown})})};function l(){s=n.value}function d(p){i.push(p);const h=()=>{const m=i.indexOf(p);m>-1&&i.splice(m,1)};return a.push(h),h}function c(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(jn({},p.state,{scroll:FS()}),"")}}function f(){for(const p of a)p();a=[],window.removeEventListener("popstate",o),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",o),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:l,listen:d,destroy:f}}function $L(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?FS():null}}function hce(t){const{history:e,location:n}=window,r={value:sY(t,n)},i={value:e.state};i.value||a(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(l,d,c){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:fce()+t+l;try{e[c?"replaceState":"pushState"](d,"",p),i.value=d}catch(h){console.error(h),n[c?"replace":"assign"](p)}}function s(l,d){a(l,jn({},e.state,$L(i.value.back,l,i.value.forward,!0),d,{position:i.value.position}),!0),r.value=l}function o(l,d){const c=jn({},i.value,e.state,{forward:l,scroll:FS()});a(c.current,c,!0),a(l,jn({},$L(r.value,l,null),{position:c.position+1},d),!1),r.value=l}return{location:r,state:i,push:o,replace:s}}function mce(t){t=Qde(t);const e=hce(t),n=pce(t,e.state,e.location,e.replace);function r(a,s=!0){s||n.pauseListeners(),history.go(a)}const i=jn({location:"",base:t,go:r,createHref:ece.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}let Xf=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var Jr=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(Jr||{});const gce={type:Xf.Static,value:""},vce=/[a-zA-Z0-9_]/;function yce(t){if(!t)return[[]];if(t==="/")return[[gce]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${d}": ${h}`)}let n=Jr.Static,r=n;const i=[];let a;function s(){a&&i.push(a),a=[]}let o=0,l,d="",c="";function f(){d&&(n===Jr.Static?a.push({type:Xf.Static,value:d}):n===Jr.Param||n===Jr.ParamRegExp||n===Jr.ParamRegExpEnd?(a.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Xf.Param,value:d,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),d="")}function p(){d+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&n!==Jr.ParamRegExp){r=n,n=Jr.EscapeNext;continue}switch(n){case Jr.Static:l==="/"?(d&&f(),s()):l===":"?(f(),n=Jr.Param):p();break;case Jr.EscapeNext:p(),n=r;break;case Jr.Param:l==="("?n=Jr.ParamRegExp:vce.test(l)?p():(f(),n=Jr.Static,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case Jr.ParamRegExp:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=Jr.ParamRegExpEnd:c+=l;break;case Jr.ParamRegExpEnd:f(),n=Jr.Static,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:e("Unknown state");break}}return n===Jr.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),f(),s(),i}const DL="[^/]+?",bce={sensitive:!1,strict:!1,start:!0,end:!0};var ua=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(ua||{});const _ce=/[.+*?^${}()[\]/\\]/g;function xce(t,e){const n=jn({},bce,e),r=[];let i=n.start?"^":"";const a=[];for(const d of t){const c=d.length?[]:[ua.Root];n.strict&&!d.length&&(i+="/");for(let f=0;f<d.length;f++){const p=d[f];let h=ua.Segment+(n.sensitive?ua.BonusCaseSensitive:0);if(p.type===Xf.Static)f||(i+="/"),i+=p.value.replace(_ce,"\\$&"),h+=ua.Static;else if(p.type===Xf.Param){const{value:m,repeatable:g,optional:v,regexp:_}=p;a.push({name:m,repeatable:g,optional:v});const x=_||DL;if(x!==DL){h+=ua.BonusCustomRegExp;try{`${x}`}catch(k){throw new Error(`Invalid custom RegExp for param "${m}" (${x}): `+k.message)}}let w=g?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;f||(w=v&&d.length<2?`(?:/${w})`:"/"+w),v&&(w+="?"),i+=w,h+=ua.Dynamic,v&&(h+=ua.BonusOptional),g&&(h+=ua.BonusRepeatable),x===".*"&&(h+=ua.BonusWildcard)}c.push(h)}r.push(c)}if(n.strict&&n.end){const d=r.length-1;r[d][r[d].length-1]+=ua.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function o(d){const c=d.match(s),f={};if(!c)return null;for(let p=1;p<c.length;p++){const h=c[p]||"",m=a[p-1];f[m.name]=h&&m.repeatable?h.split("/"):h}return f}function l(d){let c="",f=!1;for(const p of t){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const h of p)if(h.type===Xf.Static)c+=h.value;else if(h.type===Xf.Param){const{value:m,repeatable:g,optional:v}=h,_=m in d?d[m]:"";if(Do(_)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const x=Do(_)?_.join("/"):_;if(!x)if(v)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);c+=x}}return c||"/"}return{re:s,score:r,keys:a,parse:o,stringify:l}}function wce(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===ua.Static+ua.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===ua.Static+ua.Segment?1:-1:0}function oY(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const a=wce(r[n],i[n]);if(a)return a;n++}if(Math.abs(i.length-r.length)===1){if(RL(r))return 1;if(RL(i))return-1}return i.length-r.length}function RL(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const kce={strict:!1,end:!0,sensitive:!1};function Sce(t,e,n){const r=xce(yce(t.path),n),i=jn(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Cce(t,e){const n=[],r=new Map;e=SL(kce,e);function i(f){return r.get(f)}function a(f,p,h){const m=!h,g=IL(f);g.aliasOf=h&&h.record;const v=SL(e,f),_=[g];if("alias"in f){const k=typeof f.alias=="string"?[f.alias]:f.alias;for(const S of k)_.push(IL(jn({},g,{components:h?h.record.components:g.components,path:S,aliasOf:h?h.record:g})))}let x,w;for(const k of _){const{path:S}=k;if(p&&S[0]!=="/"){const C=p.record.path,A=C[C.length-1]==="/"?"":"/";k.path=p.record.path+(S&&A+S)}if(x=Sce(k,p,v),h?h.alias.push(x):(w=w||x,w!==x&&w.alias.push(x),m&&f.name&&!OL(x)&&s(f.name)),lY(x)&&l(x),g.children){const C=g.children;for(let A=0;A<C.length;A++)a(C[A],x,h&&h.children[A])}h=h||x}return w?()=>{s(w)}:Fy}function s(f){if(iY(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(s),p.alias.forEach(s))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(s),f.alias.forEach(s))}}function o(){return n}function l(f){const p=Ece(f,n);n.splice(p,0,f),f.record.name&&!OL(f)&&r.set(f.record.name,f)}function d(f,p){let h,m={},g,v;if("name"in f&&f.name){if(h=r.get(f.name),!h)throw Jm($r.MATCHER_NOT_FOUND,{location:f});v=h.record.name,m=jn(PL(p.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),f.params&&PL(f.params,h.keys.map(w=>w.name))),g=h.stringify(m)}else if(f.path!=null)g=f.path,h=n.find(w=>w.re.test(g)),h&&(m=h.parse(g),v=h.record.name);else{if(h=p.name?r.get(p.name):n.find(w=>w.re.test(p.path)),!h)throw Jm($r.MATCHER_NOT_FOUND,{location:f,currentLocation:p});v=h.record.name,m=jn({},p.params,f.params),g=h.stringify(m)}const _=[];let x=h;for(;x;)_.unshift(x.record),x=x.parent;return{name:v,path:g,params:m,matched:_,meta:Tce(_)}}t.forEach(f=>a(f));function c(){n.length=0,r.clear()}return{addRoute:a,resolve:d,removeRoute:s,clearRoutes:c,getRoutes:o,getRecordMatcher:i}}function PL(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function IL(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Ace(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Ace(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function OL(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Tce(t){return t.reduce((e,n)=>jn(e,n.meta),{})}function Ece(t,e){let n=0,r=e.length;for(;n!==r;){const a=n+r>>1;oY(t,e[a])<0?r=a:n=a+1}const i=Mce(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function Mce(t){let e=t;for(;e=e.parent;)if(lY(e)&&oY(t,e)===0)return e}function lY({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function LL(t){const e=vi(BS),n=vi(zD),r=J(()=>{const l=y(t.to);return e.resolve(l)}),i=J(()=>{const{matched:l}=r.value,{length:d}=l,c=l[d-1],f=n.matched;if(!c||!f.length)return-1;const p=f.findIndex(Qm.bind(null,c));if(p>-1)return p;const h=VL(l[d-2]);return d>1&&VL(c)===h&&f[f.length-1].path!==h?f.findIndex(Qm.bind(null,l[d-2])):p}),a=J(()=>i.value>-1&&Ice(n.params,r.value.params)),s=J(()=>i.value>-1&&i.value===n.matched.length-1&&rY(n.params,r.value.params));function o(l={}){if(Pce(l)){const d=e[y(t.replace)?"replace":"push"](y(t.to)).catch(Fy);return t.viewTransition&&typeof document!="undefined"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:J(()=>r.value.href),isActive:a,isExactActive:s,navigate:o}}function $ce(t){return t.length===1?t[0]:t}const Dce=Ze({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:LL,setup(t,{slots:e}){const n=Jt(LL(t)),{options:r}=vi(BS),i=J(()=>({[NL(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[NL(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=e.default&&$ce(e.default(n));return t.custom?a:dr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},a)}}}),Rce=Dce;function Pce(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Ice(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Do(i)||i.length!==r.length||r.some((a,s)=>a!==i[s]))return!1}return!0}function VL(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const NL=(t,e,n)=>t!=null?t:e!=null?e:n,Oce=Ze({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=vi(eE),i=J(()=>t.route||r.value),a=vi(ML,0),s=J(()=>{let d=y(a);const{matched:c}=i.value;let f;for(;(f=c[d])&&!f.components;)d++;return d}),o=J(()=>i.value.matched[s.value]);Us(ML,J(()=>s.value+1)),Us(dce,o),Us(eE,i);const l=Q();return Je(()=>[l.value,o.value,t.name],([d,c,f],[p,h,m])=>{c&&(c.instances[f]=d,h&&h!==c&&d&&d===p&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),d&&c&&(!h||!Qm(c,h)||!p)&&(c.enterCallbacks[f]||[]).forEach(g=>g(d))},{flush:"post"}),()=>{const d=i.value,c=t.name,f=o.value,p=f&&f.components[c];if(!p)return jL(n.default,{Component:p,route:d});const h=f.props[c],m=h?h===!0?d.params:typeof h=="function"?h(d):h:null,v=dr(p,jn({},m,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return jL(n.default,{Component:v,route:d})||v}}});function jL(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Lce=Oce;function Vce(t){const e=Cce(t.routes,t),n=t.parseQuery||lce,r=t.stringifyQuery||EL,i=t.history,a=iv(),s=iv(),o=iv(),l=Sl(bd);let d=bd;um&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=zA.bind(null,se=>""+se),f=zA.bind(null,qde),p=zA.bind(null,P0);function h(se,te){let ne,ce;return iY(se)?(ne=e.getRecordMatcher(se),ce=te):ce=se,e.addRoute(ce,ne)}function m(se){const te=e.getRecordMatcher(se);te&&e.removeRoute(te)}function g(){return e.getRoutes().map(se=>se.record)}function v(se){return!!e.getRecordMatcher(se)}function _(se,te){if(te=jn({},te||l.value),typeof se=="string"){const H=UA(n,se,te.path),ae=e.resolve({path:H.path},te),be=i.createHref(H.fullPath);return jn(H,ae,{params:p(ae.params),hash:P0(H.hash),redirectedFrom:void 0,href:be})}let ne;if(se.path!=null)ne=jn({},se,{path:UA(n,se.path,te.path).path});else{const H=jn({},se.params);for(const ae in H)H[ae]==null&&delete H[ae];ne=jn({},se,{params:f(H)}),te.params=f(te.params)}const ce=e.resolve(ne,te),ve=se.hash||"";ce.params=c(p(ce.params));const Y=Yde(r,jn({},se,{hash:zde(ve),path:ce.path})),K=i.createHref(Y);return jn({fullPath:Y,hash:ve,query:r===EL?uce(se.query):se.query||{}},ce,{redirectedFrom:void 0,href:K})}function x(se){return typeof se=="string"?UA(n,se,l.value.path):jn({},se)}function w(se,te){if(d!==se)return Jm($r.NAVIGATION_CANCELLED,{from:te,to:se})}function k(se){return A(se)}function S(se){return k(jn(x(se),{replace:!0}))}function C(se,te){const ne=se.matched[se.matched.length-1];if(ne&&ne.redirect){const{redirect:ce}=ne;let ve=typeof ce=="function"?ce(se,te):ce;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=x(ve):{path:ve},ve.params={}),jn({query:se.query,hash:se.hash,params:ve.path!=null?{}:se.params},ve)}}function A(se,te){const ne=d=_(se),ce=l.value,ve=se.state,Y=se.force,K=se.replace===!0,H=C(ne,ce);if(H)return A(jn(x(H),{state:typeof H=="object"?jn({},ve,H.state):ve,force:Y,replace:K}),te||ne);const ae=ne;ae.redirectedFrom=te;let be;return!Y&&Kde(r,ce,ne)&&(be=Jm($r.NAVIGATION_DUPLICATED,{to:ae,from:ce}),U(ce,ce,!0,!1)),(be?Promise.resolve(be):R(ae,ce)).catch(ue=>tu(ue)?tu(ue,$r.NAVIGATION_GUARD_REDIRECT)?ue:L(ue):O(ue,ae,ce)).then(ue=>{if(ue){if(tu(ue,$r.NAVIGATION_GUARD_REDIRECT))return A(jn({replace:K},x(ue.to),{state:typeof ue.to=="object"?jn({},ve,ue.to.state):ve,force:Y}),te||ae)}else ue=B(ae,ce,!0,K,ve);return I(ae,ce,ue),ue})}function M(se,te){const ne=w(se,te);return ne?Promise.reject(ne):Promise.resolve()}function $(se){const te=re.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(se):se()}function R(se,te){let ne;const[ce,ve,Y]=cce(se,te);ne=qA(ce.reverse(),"beforeRouteLeave",se,te);for(const H of ce)H.leaveGuards.forEach(ae=>{ne.push(Fd(ae,se,te))});const K=M.bind(null,se,te);return ne.push(K),de(ne).then(()=>{ne=[];for(const H of a.list())ne.push(Fd(H,se,te));return ne.push(K),de(ne)}).then(()=>{ne=qA(ve,"beforeRouteUpdate",se,te);for(const H of ve)H.updateGuards.forEach(ae=>{ne.push(Fd(ae,se,te))});return ne.push(K),de(ne)}).then(()=>{ne=[];for(const H of Y)if(H.beforeEnter)if(Do(H.beforeEnter))for(const ae of H.beforeEnter)ne.push(Fd(ae,se,te));else ne.push(Fd(H.beforeEnter,se,te));return ne.push(K),de(ne)}).then(()=>(se.matched.forEach(H=>H.enterCallbacks={}),ne=qA(Y,"beforeRouteEnter",se,te,$),ne.push(K),de(ne))).then(()=>{ne=[];for(const H of s.list())ne.push(Fd(H,se,te));return ne.push(K),de(ne)}).catch(H=>tu(H,$r.NAVIGATION_CANCELLED)?H:Promise.reject(H))}function I(se,te,ne){o.list().forEach(ce=>$(()=>ce(se,te,ne)))}function B(se,te,ne,ce,ve){const Y=w(se,te);if(Y)return Y;const K=te===bd,H=um?history.state:{};ne&&(ce||K?i.replace(se.fullPath,jn({scroll:K&&H&&H.scroll},ve)):i.push(se.fullPath,ve)),l.value=se,U(se,te,ne,K),L()}let j;function z(){j||(j=i.listen((se,te,ne)=>{if(!ee.listening)return;const ce=_(se),ve=C(ce,ee.currentRoute.value);if(ve){A(jn(ve,{replace:!0,force:!0}),ce).catch(Fy);return}d=ce;const Y=l.value;um&&rce(TL(Y.fullPath,ne.delta),FS()),R(ce,Y).catch(K=>tu(K,$r.NAVIGATION_ABORTED|$r.NAVIGATION_CANCELLED)?K:tu(K,$r.NAVIGATION_GUARD_REDIRECT)?(A(jn(x(K.to),{force:!0}),ce).then(H=>{tu(H,$r.NAVIGATION_ABORTED|$r.NAVIGATION_DUPLICATED)&&!ne.delta&&ne.type===Q5.pop&&i.go(-1,!1)}).catch(Fy),Promise.reject()):(ne.delta&&i.go(-ne.delta,!1),O(K,ce,Y))).then(K=>{K=K||B(ce,Y,!1),K&&(ne.delta&&!tu(K,$r.NAVIGATION_CANCELLED)?i.go(-ne.delta,!1):ne.type===Q5.pop&&tu(K,$r.NAVIGATION_ABORTED|$r.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),I(ce,Y,K)}).catch(Fy)}))}let F=iv(),q=iv(),N;function O(se,te,ne){L(se);const ce=q.list();return ce.length?ce.forEach(ve=>ve(se,te,ne)):console.error(se),Promise.reject(se)}function V(){return N&&l.value!==bd?Promise.resolve():new Promise((se,te)=>{F.add([se,te])})}function L(se){return N||(N=!se,z(),F.list().forEach(([te,ne])=>se?ne(se):te()),F.reset()),se}function U(se,te,ne,ce){const{scrollBehavior:ve}=t;if(!um||!ve)return Promise.resolve();const Y=!ne&&ice(TL(se.fullPath,0))||(ce||!ne)&&history.state&&history.state.scroll||null;return ir().then(()=>ve(se,te,Y)).then(K=>K&&nce(K)).catch(K=>O(K,se,te))}const G=se=>i.go(se);let X;const re=new Set,ee={currentRoute:l,listening:!0,addRoute:h,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:g,resolve:_,options:t,push:k,replace:S,go:G,back:()=>G(-1),forward:()=>G(1),beforeEach:a.add,beforeResolve:s.add,afterEach:o.add,onError:q.add,isReady:V,install(se){se.component("RouterLink",Rce),se.component("RouterView",Lce),se.config.globalProperties.$router=ee,Object.defineProperty(se.config.globalProperties,"$route",{enumerable:!0,get:()=>y(l)}),um&&!X&&l.value===bd&&(X=!0,k(i.location).catch(ce=>{}));const te={};for(const ce in bd)Object.defineProperty(te,ce,{get:()=>l.value[ce],enumerable:!0});se.provide(BS,ee),se.provide(zD,qW(te)),se.provide(eE,l);const ne=se.unmount;re.add(se),se.unmount=function(){re.delete(se),re.size<1&&(d=bd,j&&j(),j=null,l.value=bd,X=!1,N=!1),ne()}}};function de(se){return se.reduce((te,ne)=>te.then(()=>$(ne)),Promise.resolve())}return ee}function xn(){return vi(BS)}function gs(t){return vi(zD)}/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nce=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),jce=t=>{const e=Nce(t);return e.charAt(0).toUpperCase()+e.slice(1)},Fce=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),BL=t=>t==="";/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var av={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bce=(c,{slots:d})=>{var f=c,{name:t,iconNode:e,absoluteStrokeWidth:n,"absolute-stroke-width":r,strokeWidth:i,"stroke-width":a,size:s=av.width,color:o=av.stroke}=f,l=Si(f,["name","iconNode","absoluteStrokeWidth","absolute-stroke-width","strokeWidth","stroke-width","size","color"]);return dr("svg",je(me(me({},av),l),{width:s,height:s,stroke:o,"stroke-width":BL(n)||BL(r)||n===!0||r===!0?Number(i||a||av["stroke-width"])*24/Number(s):i||a||av["stroke-width"],class:Fce("lucide",l.class,...t?[`lucide-${FL(jce(t))}-icon`,`lucide-${FL(t)}`]:["lucide-icon"])}),[...e.map(p=>dr(...p)),...d.default?[d.default()]:[]])};/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(t,e)=>(n,{slots:r,attrs:i})=>dr(Bce,je(me(me({},i),n),{iconNode:e,name:t}),r);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=He("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=He("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=He("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=He("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zce=He("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=He("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=He("book-user",[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=He("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=He("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=He("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uce=He("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=He("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=He("calendar-range",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=He("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hce=He("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=He("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=He("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=He("chart-no-axes-column",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qce=He("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=He("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=He("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=He("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=He("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=He("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=He("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=He("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=He("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=He("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=He("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=He("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=He("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=He("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=He("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=He("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wce=He("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=He("cog",[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=He("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gce=He("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=He("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=He("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=He("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=He("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=He("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=He("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=He("file-chart-column-increasing",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=He("file-check-corner",[["path",{d:"M10.5 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v6",key:"g5mvt7"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m14 20 2 2 4-4",key:"15kota"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=He("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=He("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yce=He("file-exclamation-point",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kce=He("file-pen",[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=He("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=He("file-x",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xce=He("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zce=He("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qce=He("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=He("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=He("funnel-x",[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=He("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=He("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jce=He("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=He("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const efe=He("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tfe=He("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nfe=He("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=He("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=He("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rfe=He("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=He("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ife=He("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=He("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const afe=He("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=He("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=He("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=He("list-checks",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=He("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sfe=He("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=He("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=He("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=He("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ofe=He("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=He("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=He("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=He("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lfe=He("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ufe=He("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dfe=He("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cfe=He("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=He("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=He("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ffe=He("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=He("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=He("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=He("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=He("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=He("presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=He("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=He("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=He("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=He("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=He("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=He("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pfe=He("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=He("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=He("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=He("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=He("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=He("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=He("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=He("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hfe=He("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=He("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=He("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=He("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mfe=He("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=He("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=He("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=He("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=He("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=He("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=He("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gfe=He("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vfe=He("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=He("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=He("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yfe=He("warehouse",[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bfe=He("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=He("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=He("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),_fe={class:"flex","aria-label":"Breadcrumb"},xfe={class:"flex items-center space-x-2"},wfe={__name:"Breadcrumbs",props:{items:{type:Array,default:()=>[]}},setup(t){return(e,n)=>{const r=Ji("router-link");return T(),P("nav",_fe,[u("ol",xfe,[u("li",null,[b(r,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:D(()=>[b(y(vY),{class:"h-4 w-4"})]),_:1})]),(T(!0),P(_e,null,we(t.items,(i,a)=>(T(),P("li",{key:a,class:"flex items-center"},[b(y(tr),{class:"h-4 w-4 text-gray-400"}),(T(),he(Lt(i.to&&!i.isActive?"router-link":"span"),{to:i.to,class:fe(["text-sm font-medium",i.isActive?"text-gray-900":"text-gray-500 hover:text-gray-700"])},{default:D(()=>[W(E(i.label),1)]),_:2},1032,["to","class"]))]))),128))])])}}},kfe={class:"lucide lucide-x",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Sfe(t,e){return T(),P("svg",kfe,[...e[0]||(e[0]=[u("path",{d:"M18 6 6 18"},null,-1),u("path",{d:"m6 6 12 12"},null,-1)])])}const Eg=Vt({name:"lucide-x",render:Sfe}),Cfe={class:"lucide lucide-info",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Afe(t,e){return T(),P("svg",Cfe,[...e[0]||(e[0]=[u("circle",{cx:"12",cy:"12",r:"10"},null,-1),u("path",{d:"M12 16v-4"},null,-1),u("path",{d:"M12 8h.01"},null,-1)])])}const Tfe=Vt({name:"lucide-info",render:Afe}),Efe={class:"lucide lucide-circle-x",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Mfe(t,e){return T(),P("svg",Efe,[...e[0]||(e[0]=[u("circle",{cx:"12",cy:"12",r:"10"},null,-1),u("path",{d:"m15 9-6 6"},null,-1),u("path",{d:"m9 9 6 6"},null,-1)])])}const $fe=Vt({name:"lucide-circle-x",render:Mfe}),Dfe={class:"lucide lucide-circle-check",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Rfe(t,e){return T(),P("svg",Dfe,[...e[0]||(e[0]=[u("circle",{cx:"12",cy:"12",r:"10"},null,-1),u("path",{d:"m9 12 2 2 4-4"},null,-1)])])}const Pfe=Vt({name:"lucide-circle-check",render:Rfe}),Ife={class:"lucide lucide-triangle-alert",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Ofe(t,e){return T(),P("svg",Ife,[...e[0]||(e[0]=[u("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"},null,-1),u("path",{d:"M12 9v4"},null,-1),u("path",{d:"M12 17h.01"},null,-1)])])}const Lfe=Vt({name:"lucide-triangle-alert",render:Ofe}),Vfe={class:"text-ink-gray-9"},Nfe={key:0,class:"text-ink-gray-6 prose-sm"},jfe=Ze({__name:"Alert",props:U5({title:{},theme:{},variant:{default:"subtle"},description:{},dismissable:{type:Boolean,default:!0}},{modelValue:{default:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=kG(t,"modelValue"),n=J(()=>{const a={yellow:"bg-surface-amber-2",blue:"bg-surface-blue-2",red:"bg-surface-red-2",green:"bg-surface-green-2"};return i.variant=="outline"?"border border-outline-gray-3":i.theme?a[i.theme]:"bg-surface-gray-2"}),r=J(()=>{const a={yellow:{component:Lfe,css:"text-ink-amber-3"},blue:{component:Tfe,css:"text-ink-blue-3"},red:{component:$fe,css:"text-ink-red-3"},green:{component:Pfe,css:"text-ink-green-3"}};return i.theme?a[i.theme]:null}),i=t;return(a,s)=>e.value?(T(),P("div",{key:0,role:"alert",class:fe([n.value,"grid grid-cols-[auto_1fr_auto] gap-3 rounded-md px-4 py-3.5 text-base items-start"])},[Ye(a.$slots,"icon",{},()=>[r.value?(T(),he(Lt(r.value.component),{key:0,class:fe(["size-4",r.value.css])},null,8,["class"])):ie("",!0)]),u("div",{class:fe(["grid gap-2",{"col-span-2":!a.$slots.icon&&!r.value}])},[u("span",Vfe,E(i.title),1),Ye(a.$slots,"description",{},()=>[i.description?(T(),P("p",Nfe,E(i.description),1)):ie("",!0)])],2),i.dismissable?(T(),P("button",{key:0,onClick:s[0]||(s[0]=o=>e.value=!1)},[b(y(Eg),{class:"size-4"})])):ie("",!0),Ye(a.$slots,"footer")],2)):ie("",!0)}});function Eh(t,e,n){var s;let r=(s=n.initialDeps)!=null?s:[],i;function a(){var o,l,d,c;let f;n.key&&((o=n.debug)!=null&&o.call(n))&&(f=Date.now());const p=t();if(!(p.length!==r.length||p.some((g,v)=>r[v]!==g)))return i;r=p;let m;if(n.key&&((l=n.debug)!=null&&l.call(n))&&(m=Date.now()),i=e(...p),n.key&&((d=n.debug)!=null&&d.call(n))){const g=Math.round((Date.now()-f)*100)/100,v=Math.round((Date.now()-m)*100)/100,_=v/16,x=(w,k)=>{for(w=String(w);w.length<k;)w=" "+w;return w};console.info(`%c ${x(v,5)} /${x(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*_,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(c=n==null?void 0:n.onChange)==null||c.call(n,i),i}return a.updateDeps=o=>{r=o},a}function YL(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const Ffe=(t,e)=>Math.abs(t-e)<1.01,Bfe=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},KL=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},zfe=t=>t,Ufe=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},Hfe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=s=>{const{width:o,height:l}=s;e({width:Math.round(o),height:Math.round(l)})};if(i(KL(n)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(s=>{const o=()=>{const l=s[0];if(l!=null&&l.borderBoxSize){const d=l.borderBoxSize[0];if(d){i({width:d.inlineSize,height:d.blockSize});return}}i(KL(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(n,{box:"border-box"}),()=>{a.unobserve(n)}},XL={passive:!0},ZL=typeof window=="undefined"?!0:"onscrollend"in window,qfe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const a=t.options.useScrollendEvent&&ZL?()=>{}:Bfe(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),s=c=>()=>{const{horizontal:f,isRtl:p}=t.options;i=f?n.scrollLeft*(p&&-1||1):n.scrollTop,a(),e(i,c)},o=s(!0),l=s(!1);l(),n.addEventListener("scroll",o,XL);const d=t.options.useScrollendEvent&&ZL;return d&&n.addEventListener("scrollend",l,XL),()=>{n.removeEventListener("scroll",o),d&&n.removeEventListener("scrollend",l)}},Wfe=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},Gfe=(t,{adjustments:e=0,behavior:n},r)=>{var i,a;const s=t+e;(a=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})};class Yfe{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const s=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var a;return(a=r())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=r())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i=="undefined"&&delete n[r]}),this.options=me({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:zfe,rangeExtractor:Ufe,onChange:()=>{},measureElement:Wfe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1},n)},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Eh(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var i;var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(i=(n=this.scrollElement)==null?void 0:n.window)!=null?i:null,this.elementsCache.forEach(a=>{this.observer.observe(a)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,a=>{this.scrollRect=a,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(a,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<a?"forward":"backward":null,this.scrollOffset=a,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>{var n;return this.options.enabled?(this.scrollRect=(n=this.scrollRect)!=null?n:this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0)},this.getScrollOffset=()=>{var n;return this.options.enabled?(this.scrollOffset=(n=this.scrollOffset)!=null?n:typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.scrollOffset):(this.scrollOffset=null,0)},this.getFurthestMeasurement=(n,r)=>{const i=new Map,a=new Map;for(let s=r-1;s>=0;s--){const o=n[s];if(i.has(o.lane))continue;const l=a.get(o.lane);if(l==null||o.end>l.end?a.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=Eh(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,a,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s}),{key:!1}),this.getMeasurements=Eh(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s},o)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,l);for(let c=l;c<n;c++){const f=a(c),p=this.options.lanes===1?d[c-1]:this.getFurthestMeasurement(d,c),h=p?p.end+this.options.gap:r+i,m=o.get(f),g=typeof m=="number"?m:this.options.estimateSize(c),v=h+g,_=p?p.lane:c%this.options.lanes;d[c]={index:c,start:h,size:g,end:v,key:f,lane:_}}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Eh(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,a)=>this.range=n.length>0&&r>0?Kfe({measurements:n,outerSize:r,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Eh(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,a,s)=>a===null||s===null?[]:n({startIndex:a,endIndex:s,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),a=this.measurementsCache[i];if(!a)return;const s=a.key,o=this.elementsCache.get(s);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(s,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{var o;const i=this.measurementsCache[n];if(!i)return;const a=(o=this.itemSizeCache.get(i.key))!=null?o:i.size,s=r-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Eh(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let a=0,s=n.length;a<s;a++){const o=n[a],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return YL(r[TY(0,r.length-1,i=>YL(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const a=this.getSize(),s=this.getScrollOffset();r==="auto"&&(r=n>=s+a?"end":"start"),r==="center"?n+=(i-a)/2:r==="end"&&(n-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const a=this.getSize(),s=this.getScrollOffset();if(r==="auto")if(i.end>=s+a-this.options.scrollPaddingEnd)r="end";else if(i.start<=s+this.options.scrollPaddingStart)r="start";else return[s,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let a=0;const s=10,o=d=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(n,d);if(!c){console.warn("Failed to get offset for index:",n);return}const[f,p]=c;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const h=this.getScrollOffset(),m=this.getOffsetForIndex(n,p);if(!m){console.warn("Failed to get offset for index:",n);return}Ffe(m[0],h)||l(p)})},l=d=>{this.targetWindow&&(a++,a<s?this.targetWindow.requestAnimationFrame(()=>o(d)):console.warn(`Failed to scroll to index ${n} after ${s} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var a;var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=(a=(n=r[r.length-1])==null?void 0:n.end)!=null?a:0;else{const s=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&s.some(l=>l===null);){const l=r[o];s[l.lane]===null&&(s[l.lane]=l.end),o--}i=Math.max(...s.filter(l=>l!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const TY=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,a=n(i);if(a<r)t=i+1;else if(a>r)e=i-1;else return i}return t>0?t-1:0};function Kfe({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,a=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let s=TY(0,i,a,n),o=s;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(c=>c<n+e);){const c=t[o];l[c.lane]=c.end,o++}const d=Array(r).fill(n+e);for(;s>=0&&d.some(c=>c>=n);){const c=t[s];d[c.lane]=c.start,s--}s=Math.max(0,s-s%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:s,endIndex:o}}function Xfe(t){const e=new Yfe(y(t)),n=Sl(e),r=e._didMount();return Je(()=>y(t).getScrollElement(),i=>{i&&e._willUpdate()},{immediate:!0}),Je(()=>y(t),i=>{e.setOptions(je(me({},i),{onChange:(a,s)=>{var o;O6(n),(o=i.onChange)==null||o.call(i,a,s)}})),e._willUpdate(),O6(n)},{immediate:!0}),W1(r),n}function Zfe(t){return Xfe(J(()=>me({observeElementRect:Hfe,observeElementOffset:qfe,scrollToFn:Gfe},y(t))))}function Qfe(t,e,n){let r=Q(n==null?void 0:n.value),i=J(()=>t.value!==void 0);return[J(()=>i.value?t.value:r.value),function(a){return i.value||(r.value=a),e==null?void 0:e(a)}]}function Jfe(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function l2(){let t=[],e={addEventListener(n,r,i,a){return n.addEventListener(r,i,a),e.add(()=>n.removeEventListener(r,i,a))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){e.requestAnimationFrame(()=>{e.requestAnimationFrame(...n)})},setTimeout(...n){let r=setTimeout(...n);e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Jfe(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let a=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:a})})},group(n){let r=l2();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function epe(){let t=l2();return Pi(()=>t.dispose()),t}function tpe(){let t=epe();return e=>{t.dispose(),t.nextFrame(e)}}var QL;let npe=Symbol("headlessui.useid"),rpe=0;const QD=(QL=tw)!=null?QL:function(){return vi(npe,()=>`${++rpe}`)()};function wr(t){var e;if(t==null||t.value==null)return null;let n=(e=t.value.$el)!=null?e:t.value;return n instanceof Node?n:null}function Mu(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Mu),r}var ipe=Object.defineProperty,ape=(t,e,n)=>e in t?ipe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JL=(t,e,n)=>(ape(t,typeof e!="symbol"?e+"":e,n),n);class spe{constructor(){JL(this,"current",this.detect()),JL(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window=="undefined"||typeof document=="undefined"?"server":"client"}}let JD=new spe;function eR(t){if(JD.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=wr(t);if(e)return e.ownerDocument}return document}let e8=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var ope=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(ope||{}),lpe=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(lpe||{}),upe=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(upe||{}),EY=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(EY||{});function dpe(t,e=0){var n;return t===((n=eR(t))==null?void 0:n.body)?!1:Mu(e,{0(){return t.matches(e8)},1(){let r=t;for(;r!==null;){if(r.matches(e8))return!0;r=r.parentElement}return!1}})}var cpe=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(cpe||{});typeof window!="undefined"&&typeof document!="undefined"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function fpe(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),a=e(r);if(i===null||a===null)return 0;let s=i.compareDocumentPosition(a);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ppe(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function hpe(){return/Android/gi.test(window.navigator.userAgent)}function MY(){return ppe()||hpe()}function Zb(t,e,n){JD.isServer||Br(r=>{document.addEventListener(t,e,n),r(()=>document.removeEventListener(t,e,n))})}function mpe(t,e,n){JD.isServer||Br(r=>{window.addEventListener(t,e,n),r(()=>window.removeEventListener(t,e,n))})}function gpe(t,e,n=J(()=>!0)){function r(a,s){if(!n.value||a.defaultPrevented)return;let o=s(a);if(o===null||!o.getRootNode().contains(o))return;let l=function d(c){return typeof c=="function"?d(c()):Array.isArray(c)||c instanceof Set?c:[c]}(t);for(let d of l){if(d===null)continue;let c=d instanceof HTMLElement?d:wr(d);if(c!=null&&c.contains(o)||a.composed&&a.composedPath().includes(c))return}return!dpe(o,EY.Loose)&&o.tabIndex!==-1&&a.preventDefault(),e(a,o)}let i=Q(null);Zb("pointerdown",a=>{var s,o;n.value&&(i.value=((o=(s=a.composedPath)==null?void 0:s.call(a))==null?void 0:o[0])||a.target)},!0),Zb("mousedown",a=>{var s,o;n.value&&(i.value=((o=(s=a.composedPath)==null?void 0:s.call(a))==null?void 0:o[0])||a.target)},!0),Zb("click",a=>{MY()||i.value&&(r(a,()=>i.value),i.value=null)},!0),Zb("touchend",a=>r(a,()=>a.target instanceof HTMLElement?a.target:null),!0),mpe("blur",a=>r(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function t8(t){return[t.screenX,t.screenY]}function vpe(){let t=Q([-1,-1]);return{wasMoved(e){let n=t8(e);return t.value[0]===n[0]&&t.value[1]===n[1]?!1:(t.value=n,!0)},update(e){t.value=t8(e)}}}function ype({container:t,accept:e,walk:n,enabled:r}){Br(()=>{let i=t.value;if(!i||r!==void 0&&!r.value)return;let a=eR(t);if(!a)return;let s=Object.assign(l=>e(l),{acceptNode:e}),o=a.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,s,!1);for(;o.nextNode();)n(o.currentNode)})}var L0=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(L0||{}),bpe=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(bpe||{});function rb(a){var s=a,{visible:t=!0,features:e=0,ourProps:n,theirProps:r}=s,i=Si(s,["visible","features","ourProps","theirProps"]);var o;let l=DY(r,n),d=Object.assign(i,{props:l});if(t||e&2&&l.static)return GA(d);if(e&1){let c=(o=l.unmount)==null||o?0:1;return Mu(c,{0(){return null},1(){return GA(je(me({},i),{props:je(me({},l),{hidden:!0,style:{display:"none"}})}))}})}return GA(d)}function GA({props:t,attrs:e,slots:n,slot:r,name:i}){var a,s;let f=GS(t,["unmount","static"]),{as:o}=f,l=Si(f,["as"]),d=(a=n.default)==null?void 0:a.call(n,r),c={};if(r){let p=!1,h=[];for(let[m,g]of Object.entries(r))typeof g=="boolean"&&(p=!0),g===!0&&h.push(m);p&&(c["data-headlessui-state"]=h.join(" "))}if(o==="template"){if(d=$Y(d!=null?d:[]),Object.keys(l).length>0||Object.keys(e).length>0){let[p,...h]=d!=null?d:[];if(!xpe(p)||h.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${i} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(e)).map(v=>v.trim()).filter((v,_,x)=>x.indexOf(v)===_).sort((v,_)=>v.localeCompare(_)).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`));let m=DY((s=p.props)!=null?s:{},l,c),g=$o(p,m,!0);for(let v in m)v.startsWith("on")&&(g.props||(g.props={}),g.props[v]=m[v]);return g}return Array.isArray(d)&&d.length===1?d[0]:d}return dr(o,Object.assign({},l,c),{default:()=>d})}function $Y(t){return t.flatMap(e=>e.type===_e?$Y(e.children):[e])}function DY(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](i,...a){let s=n[r];for(let o of s){if(i instanceof Event&&i.defaultPrevented)return;o(i,...a)}}});return e}function _pe(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function GS(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function xpe(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}var RY=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(RY||{});let wpe=Ze({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:e,attrs:n}){return()=>{var r;let o=t,{features:i}=o,a=Si(o,["features"]),s={"aria-hidden":(i&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(i&4)===4?!0:void 0,style:me({position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},(i&4)===4&&(i&2)!==2&&{display:"none"})};return rb({ourProps:s,theirProps:a,slot:{},attrs:n,slots:e,name:"Hidden"})}}}),PY=Symbol("Context");var V0=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(V0||{});function kpe(){return vi(PY,null)}function Spe(t){Us(PY,t)}var Zo=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Zo||{}),IY=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(IY||{});function Cpe(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window!="undefined"&&typeof document!="undefined"&&(document.addEventListener("DOMContentLoaded",e),e())}let Uf=[];Cpe(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&Uf[0]!==e.target&&(Uf.unshift(e.target),Uf=Uf.filter(n=>n!=null&&n.isConnected),Uf.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function Ape(t){throw new Error("Unexpected object: "+t)}var Wi=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Wi||{});function n8(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),i=r!=null?r:-1;switch(t.focus){case 0:{for(let a=0;a<n.length;++a)if(!e.resolveDisabled(n[a],a,n))return a;return r}case 1:{i===-1&&(i=n.length);for(let a=i-1;a>=0;--a)if(!e.resolveDisabled(n[a],a,n))return a;return r}case 2:{for(let a=i+1;a<n.length;++a)if(!e.resolveDisabled(n[a],a,n))return a;return r}case 3:{for(let a=n.length-1;a>=0;--a)if(!e.resolveDisabled(n[a],a,n))return a;return r}case 4:{for(let a=0;a<n.length;++a)if(e.resolveId(n[a],a,n)===t.id)return a;return r}case 5:return null;default:Ape(t)}}function OY(t={},e=null,n=[]){for(let[r,i]of Object.entries(t))VY(n,LY(e,r),i);return n}function LY(t,e){return t?t+"["+e+"]":e}function VY(t,e,n){if(Array.isArray(n))for(let[r,i]of n.entries())VY(t,LY(e,r.toString()),i);else n instanceof Date?t.push([e,n.toISOString()]):typeof n=="boolean"?t.push([e,n?"1":"0"]):typeof n=="string"?t.push([e,n]):typeof n=="number"?t.push([e,`${n}`]):n==null?t.push([e,""]):OY(n,e,t)}var Tpe={};function Epe(t,e){return t===e}var Mpe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Mpe||{}),$pe=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))($pe||{}),Dpe=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(Dpe||{});let NY=Symbol("ComboboxContext");function ib(t){let e=vi(NY,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ib),n}return e}let jY=Symbol("VirtualContext"),Rpe=Ze({name:"VirtualProvider",setup(t,{slots:e}){let n=ib("VirtualProvider"),r=J(()=>{let o=wr(n.optionsRef);if(!o)return{start:0,end:0};let l=window.getComputedStyle(o);return{start:parseFloat(l.paddingBlockStart||l.paddingTop),end:parseFloat(l.paddingBlockEnd||l.paddingBottom)}}),i=Zfe(J(()=>({scrollPaddingStart:r.value.start,scrollPaddingEnd:r.value.end,count:n.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return wr(n.optionsRef)},overscan:12}))),a=J(()=>{var o;return(o=n.virtual.value)==null?void 0:o.options}),s=Q(0);return Je([a],()=>{s.value+=1}),Us(jY,n.virtual.value?i:null),()=>[dr("div",{style:{position:"relative",width:"100%",height:`${i.value.getTotalSize()}px`},ref:o=>{if(o){if(typeof process!="undefined"&&Tpe.JEST_WORKER_ID!==void 0||n.activationTrigger.value===0)return;n.activeOptionIndex.value!==null&&n.virtual.value.options.length>n.activeOptionIndex.value&&i.value.scrollToIndex(n.activeOptionIndex.value)}}},i.value.getVirtualItems().map(o=>$o(e.default({option:n.virtual.value.options[o.index],open:n.comboboxState.value===0})[0],{key:`${s.value}-${o.index}`,"data-index":o.index,"aria-setsize":n.virtual.value.options.length,"aria-posinset":o.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${o.start}px)`,overflowAnchor:"none"}})))]}}),Ppe=Ze({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(t,{slots:e,attrs:n,emit:r}){let i=Q(1),a=Q(null),s=Q(null),o=Q(null),l=Q(null),d=Q({static:!1,hold:!1}),c=Q([]),f=Q(null),p=Q(2),h=Q(!1);function m(R=I=>I){let I=f.value!==null?c.value[f.value]:null,B=R(c.value.slice()),j=B.length>0&&B[0].dataRef.order.value!==null?B.sort((F,q)=>F.dataRef.order.value-q.dataRef.order.value):fpe(B,F=>wr(F.dataRef.domRef)),z=I?j.indexOf(I):null;return z===-1&&(z=null),{options:j,activeOptionIndex:z}}let g=J(()=>t.multiple?1:0),v=J(()=>t.nullable),[_,x]=Qfe(J(()=>t.modelValue),R=>r("update:modelValue",R),J(()=>t.defaultValue)),w=J(()=>_.value===void 0?Mu(g.value,{1:[],0:void 0}):_.value),k=null,S=null;function C(R){return Mu(g.value,{0(){return x==null?void 0:x(R)},1:()=>{let I=ln(M.value.value).slice(),B=ln(R),j=I.findIndex(z=>M.compare(B,ln(z)));return j===-1?I.push(B):I.splice(j,1),x==null?void 0:x(I)}})}let A=J(()=>{});Je([A],([R],[I])=>{if(M.virtual.value&&R&&I&&f.value!==null){let B=R.indexOf(I[f.value]);B!==-1?f.value=B:f.value=null}});let M={comboboxState:i,value:w,mode:g,compare(R,I){if(typeof t.by=="string"){let B=t.by;return(R==null?void 0:R[B])===(I==null?void 0:I[B])}return t.by===null?Epe(R,I):t.by(R,I)},calculateIndex(R){return M.virtual.value?t.by===null?M.virtual.value.options.indexOf(R):M.virtual.value.options.findIndex(I=>M.compare(I,R)):c.value.findIndex(I=>M.compare(I.dataRef.value,R))},defaultValue:J(()=>t.defaultValue),nullable:v,immediate:J(()=>!1),virtual:J(()=>null),inputRef:s,labelRef:a,buttonRef:o,optionsRef:l,disabled:J(()=>t.disabled),options:c,change(R){x(R)},activeOptionIndex:J(()=>{if(h.value&&f.value===null&&(M.virtual.value?M.virtual.value.options.length>0:c.value.length>0)){if(M.virtual.value){let I=M.virtual.value.options.findIndex(B=>{var j;return!((j=M.virtual.value)!=null&&j.disabled(B))});if(I!==-1)return I}let R=c.value.findIndex(I=>!I.dataRef.disabled);if(R!==-1)return R}return f.value}),activationTrigger:p,optionsPropsRef:d,closeCombobox(){h.value=!1,!t.disabled&&i.value!==1&&(i.value=1,f.value=null)},openCombobox(){if(h.value=!0,!t.disabled&&i.value!==0){if(M.value.value){let R=M.calculateIndex(M.value.value);R!==-1&&(f.value=R)}i.value=0}},setActivationTrigger(R){p.value=R},goToOption(R,I,B){h.value=!1,k!==null&&cancelAnimationFrame(k),k=requestAnimationFrame(()=>{if(t.disabled||l.value&&!d.value.static&&i.value===1)return;if(M.virtual.value){f.value=R===Wi.Specific?I:n8({focus:R},{resolveItems:()=>M.virtual.value.options,resolveActiveIndex:()=>{var F,q;return(q=(F=M.activeOptionIndex.value)!=null?F:M.virtual.value.options.findIndex(N=>{var O;return!((O=M.virtual.value)!=null&&O.disabled(N))}))!=null?q:null},resolveDisabled:F=>M.virtual.value.disabled(F),resolveId(){throw new Error("Function not implemented.")}}),p.value=B!=null?B:2;return}let j=m();if(j.activeOptionIndex===null){let F=j.options.findIndex(q=>!q.dataRef.disabled);F!==-1&&(j.activeOptionIndex=F)}let z=R===Wi.Specific?I:n8({focus:R},{resolveItems:()=>j.options,resolveActiveIndex:()=>j.activeOptionIndex,resolveId:F=>F.id,resolveDisabled:F=>F.dataRef.disabled});f.value=z,p.value=B!=null?B:2,c.value=j.options})},selectOption(R){let I=c.value.find(j=>j.id===R);if(!I)return;let{dataRef:B}=I;C(B.value)},selectActiveOption(){if(M.activeOptionIndex.value!==null){if(M.virtual.value)C(M.virtual.value.options[M.activeOptionIndex.value]);else{let{dataRef:R}=c.value[M.activeOptionIndex.value];C(R.value)}M.goToOption(Wi.Specific,M.activeOptionIndex.value)}},registerOption(R,I){let B=Jt({id:R,dataRef:I});if(M.virtual.value){c.value.push(B);return}S&&cancelAnimationFrame(S);let j=m(z=>(z.push(B),z));f.value===null&&M.isSelected(I.value.value)&&(j.activeOptionIndex=j.options.indexOf(B)),c.value=j.options,f.value=j.activeOptionIndex,p.value=2,j.options.some(z=>!wr(z.dataRef.domRef))&&(S=requestAnimationFrame(()=>{let z=m();c.value=z.options,f.value=z.activeOptionIndex}))},unregisterOption(R,I){if(k!==null&&cancelAnimationFrame(k),I&&(h.value=!0),M.virtual.value){c.value=c.value.filter(j=>j.id!==R);return}let B=m(j=>{let z=j.findIndex(F=>F.id===R);return z!==-1&&j.splice(z,1),j});c.value=B.options,f.value=B.activeOptionIndex,p.value=2},isSelected(R){return Mu(g.value,{0:()=>M.compare(ln(M.value.value),ln(R)),1:()=>ln(M.value.value).some(I=>M.compare(ln(I),ln(R)))})},isActive(R){return f.value===M.calculateIndex(R)}};gpe([s,o,l],()=>M.closeCombobox(),J(()=>i.value===0)),Us(NY,M),Spe(J(()=>Mu(i.value,{0:V0.Open,1:V0.Closed})));let $=J(()=>{var R;return(R=wr(s))==null?void 0:R.closest("form")});return bt(()=>{Je([$],()=>{if(!$.value||t.defaultValue===void 0)return;function R(){M.change(t.defaultValue)}return $.value.addEventListener("reset",R),()=>{var I;(I=$.value)==null||I.removeEventListener("reset",R)}},{immediate:!0})}),()=>{var R,I,B;let O=t,{name:j,disabled:z,form:F}=O,q=Si(O,["name","disabled","form"]),N={open:i.value===0,disabled:z,activeIndex:M.activeOptionIndex.value,activeOption:M.activeOptionIndex.value===null?null:M.virtual.value?M.virtual.value.options[(R=M.activeOptionIndex.value)!=null?R:0]:(B=(I=M.options.value[M.activeOptionIndex.value])==null?void 0:I.dataRef.value)!=null?B:null,value:w.value};return dr(_e,[...j!=null&&w.value!=null?OY({[j]:w.value}).map(([V,L])=>dr(wpe,_pe({features:RY.Hidden,key:V,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:F,disabled:z,name:V,value:L}))):[],rb({theirProps:me(me({},n),GS(q,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])),ourProps:{},slot:N,slots:e,attrs:n,name:"Combobox"})])}}}),Ipe=Ze({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:t=>!0},setup(t,{emit:e,attrs:n,slots:r,expose:i}){var a;let s=(a=t.id)!=null?a:`headlessui-combobox-input-${QD()}`,o=ib("ComboboxInput"),l=J(()=>eR(wr(o.inputRef))),d={value:!1};i({el:o.inputRef,$el:o.inputRef});function c(){o.change(null);let S=wr(o.optionsRef);S&&(S.scrollTop=0),o.goToOption(Wi.Nothing)}let f=J(()=>{var S;let C=o.value.value;return wr(o.inputRef)?typeof t.displayValue!="undefined"&&C!==void 0?(S=t.displayValue(C))!=null?S:"":typeof C=="string"?C:"":""});bt(()=>{Je([f,o.comboboxState,l],([S,C],[A,M])=>{if(d.value)return;let $=wr(o.inputRef);$&&((M===0&&C===1||S!==A)&&($.value=S),requestAnimationFrame(()=>{var R;if(d.value||!$||((R=l.value)==null?void 0:R.activeElement)!==$)return;let{selectionStart:I,selectionEnd:B}=$;Math.abs((B!=null?B:0)-(I!=null?I:0))===0&&I===0&&$.setSelectionRange($.value.length,$.value.length)}))},{immediate:!0}),Je([o.comboboxState],([S],[C])=>{if(S===0&&C===1){if(d.value)return;let A=wr(o.inputRef);if(!A)return;let M=A.value,{selectionStart:$,selectionEnd:R,selectionDirection:I}=A;A.value="",A.value=M,I!==null?A.setSelectionRange($,R,I):A.setSelectionRange($,R)}})});let p=Q(!1);function h(){p.value=!0}function m(){l2().nextFrame(()=>{p.value=!1})}let g=tpe();function v(S){switch(d.value=!0,g(()=>{d.value=!1}),S.key){case Zo.Enter:if(d.value=!1,o.comboboxState.value!==0||p.value)return;if(S.preventDefault(),S.stopPropagation(),o.activeOptionIndex.value===null){o.closeCombobox();return}o.selectActiveOption(),o.mode.value===0&&o.closeCombobox();break;case Zo.ArrowDown:return d.value=!1,S.preventDefault(),S.stopPropagation(),Mu(o.comboboxState.value,{0:()=>o.goToOption(Wi.Next),1:()=>o.openCombobox()});case Zo.ArrowUp:return d.value=!1,S.preventDefault(),S.stopPropagation(),Mu(o.comboboxState.value,{0:()=>o.goToOption(Wi.Previous),1:()=>{o.openCombobox(),ir(()=>{o.value.value||o.goToOption(Wi.Last)})}});case Zo.Home:if(S.shiftKey)break;return d.value=!1,S.preventDefault(),S.stopPropagation(),o.goToOption(Wi.First);case Zo.PageUp:return d.value=!1,S.preventDefault(),S.stopPropagation(),o.goToOption(Wi.First);case Zo.End:if(S.shiftKey)break;return d.value=!1,S.preventDefault(),S.stopPropagation(),o.goToOption(Wi.Last);case Zo.PageDown:return d.value=!1,S.preventDefault(),S.stopPropagation(),o.goToOption(Wi.Last);case Zo.Escape:if(d.value=!1,o.comboboxState.value!==0)return;S.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&S.stopPropagation(),o.nullable.value&&o.mode.value===0&&o.value.value===null&&c(),o.closeCombobox();break;case Zo.Tab:if(d.value=!1,o.comboboxState.value!==0)return;o.mode.value===0&&o.activationTrigger.value!==1&&o.selectActiveOption(),o.closeCombobox();break}}function _(S){e("change",S),o.nullable.value&&o.mode.value===0&&S.target.value===""&&c(),o.openCombobox()}function x(S){var C,A,M;let $=(C=S.relatedTarget)!=null?C:Uf.find(R=>R!==S.currentTarget);if(d.value=!1,!((A=wr(o.optionsRef))!=null&&A.contains($))&&!((M=wr(o.buttonRef))!=null&&M.contains($))&&o.comboboxState.value===0)return S.preventDefault(),o.mode.value===0&&(o.nullable.value&&o.value.value===null?c():o.activationTrigger.value!==1&&o.selectActiveOption()),o.closeCombobox()}function w(S){var C,A,M;let $=(C=S.relatedTarget)!=null?C:Uf.find(R=>R!==S.currentTarget);(A=wr(o.buttonRef))!=null&&A.contains($)||(M=wr(o.optionsRef))!=null&&M.contains($)||o.disabled.value||o.immediate.value&&o.comboboxState.value!==0&&(o.openCombobox(),l2().nextFrame(()=>{o.setActivationTrigger(1)}))}let k=J(()=>{var S,C,A,M;return(M=(A=(C=t.defaultValue)!=null?C:o.defaultValue.value!==void 0?(S=t.displayValue)==null?void 0:S.call(t,o.defaultValue.value):null)!=null?A:o.defaultValue.value)!=null?M:""});return()=>{var S,C,A,M,$,R,I;let B={open:o.comboboxState.value===0},N=t,{displayValue:j,onChange:z}=N,F=Si(N,["displayValue","onChange"]),q={"aria-controls":(S=o.optionsRef.value)==null?void 0:S.id,"aria-expanded":o.comboboxState.value===0,"aria-activedescendant":o.activeOptionIndex.value===null?void 0:o.virtual.value?(C=o.options.value.find(O=>!o.virtual.value.disabled(O.dataRef.value)&&o.compare(O.dataRef.value,o.virtual.value.options[o.activeOptionIndex.value])))==null?void 0:C.id:(A=o.options.value[o.activeOptionIndex.value])==null?void 0:A.id,"aria-labelledby":(R=(M=wr(o.labelRef))==null?void 0:M.id)!=null?R:($=wr(o.buttonRef))==null?void 0:$.id,"aria-autocomplete":"list",id:s,onCompositionstart:h,onCompositionend:m,onKeydown:v,onInput:_,onFocus:w,onBlur:x,role:"combobox",type:(I=n.type)!=null?I:"text",tabIndex:0,ref:o.inputRef,defaultValue:k.value,disabled:o.disabled.value===!0?!0:void 0};return rb({ourProps:q,theirProps:F,slot:B,attrs:n,slots:r,features:L0.RenderStrategy|L0.Static,name:"ComboboxInput"})}}}),Ope=Ze({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:e,slots:n,expose:r}){let i=ib("ComboboxOptions"),a=`headlessui-combobox-options-${QD()}`;r({el:i.optionsRef,$el:i.optionsRef}),Br(()=>{i.optionsPropsRef.value.static=t.static}),Br(()=>{i.optionsPropsRef.value.hold=t.hold});let s=kpe(),o=J(()=>s!==null?(s.value&V0.Open)===V0.Open:i.comboboxState.value===0);ype({container:J(()=>wr(i.optionsRef)),enabled:J(()=>i.comboboxState.value===0),accept(d){return d.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:d.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(d){d.setAttribute("role","none")}});function l(d){d.preventDefault()}return()=>{var d,c,f;let p={open:i.comboboxState.value===0},h={"aria-labelledby":(f=(d=wr(i.labelRef))==null?void 0:d.id)!=null?f:(c=wr(i.buttonRef))==null?void 0:c.id,id:a,ref:i.optionsRef,role:"listbox","aria-multiselectable":i.mode.value===1?!0:void 0,onMousedown:l},m=GS(t,["hold"]);return rb({ourProps:h,theirProps:m,slot:p,attrs:e,slots:i.virtual.value&&i.comboboxState.value===0?je(me({},n),{default:()=>[dr(Rpe,{},n.default)]}):n,features:L0.RenderStrategy|L0.Static,visible:o.value,name:"ComboboxOptions"})}}}),Lpe=Ze({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(t,{slots:e,attrs:n,expose:r}){let i=ib("ComboboxOption"),a=`headlessui-combobox-option-${QD()}`,s=Q(null),o=J(()=>t.disabled);r({el:s,$el:s});let l=J(()=>{var x;return i.virtual.value?i.activeOptionIndex.value===i.calculateIndex(t.value):i.activeOptionIndex.value===null?!1:((x=i.options.value[i.activeOptionIndex.value])==null?void 0:x.id)===a}),d=J(()=>i.isSelected(t.value)),c=vi(jY,null),f=J(()=>({disabled:t.disabled,value:t.value,domRef:s,order:J(()=>t.order)}));bt(()=>i.registerOption(a,f)),Pi(()=>i.unregisterOption(a,l.value)),Br(()=>{let x=wr(s);x&&(c==null||c.value.measureElement(x))}),Br(()=>{i.comboboxState.value===0&&l.value&&(i.virtual.value||i.activationTrigger.value!==0&&ir(()=>{var x,w;return(w=(x=wr(s))==null?void 0:x.scrollIntoView)==null?void 0:w.call(x,{block:"nearest"})}))});function p(x){x.preventDefault(),x.button===IY.Left&&(o.value||(i.selectOption(a),MY()||requestAnimationFrame(()=>{var w;return(w=wr(i.inputRef))==null?void 0:w.focus({preventScroll:!0})}),i.mode.value===0&&i.closeCombobox()))}function h(){var x;if(t.disabled||(x=i.virtual.value)!=null&&x.disabled(t.value))return i.goToOption(Wi.Nothing);let w=i.calculateIndex(t.value);i.goToOption(Wi.Specific,w)}let m=vpe();function g(x){m.update(x)}function v(x){var w;if(!m.wasMoved(x)||t.disabled||(w=i.virtual.value)!=null&&w.disabled(t.value)||l.value)return;let k=i.calculateIndex(t.value);i.goToOption(Wi.Specific,k,0)}function _(x){var w;m.wasMoved(x)&&(t.disabled||(w=i.virtual.value)!=null&&w.disabled(t.value)||l.value&&(i.optionsPropsRef.value.hold||i.goToOption(Wi.Nothing)))}return()=>{let{disabled:x}=t,w={active:l.value,selected:d.value,disabled:x},k={id:a,ref:s,role:"option",tabIndex:x===!0?void 0:-1,"aria-disabled":x===!0?!0:void 0,"aria-selected":d.value,disabled:void 0,onMousedown:p,onFocus:h,onPointerenter:g,onMouseenter:g,onPointermove:v,onMousemove:v,onPointerleave:_,onMouseleave:_},S=GS(t,["order","value"]);return rb({ourProps:k,theirProps:S,slot:w,attrs:n,slots:e,name:"ComboboxOption"})}}});function Xa(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[s=>{const o=vi(r,s);if(o||o===null)return o;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},s=>(Us(r,s),s)]}function qa(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function FY(t,e,n){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(i)}function tR(t){return t?t.flatMap(e=>e.type===_e?tR(e.children):[e]):[]}const Vpe=["INPUT","TEXTAREA"];function Npe(t,e,n,r={}){if(!e||r.enableIgnoredElement&&Vpe.includes(e.nodeName))return null;const{arrowKeyOptions:i="both",attributeName:a="[data-reka-collection-item]",itemsArray:s=[],loop:o=!0,dir:l="ltr",preventScroll:d=!0,focus:c=!1}=r,[f,p,h,m,g,v]=[t.key==="ArrowRight",t.key==="ArrowLeft",t.key==="ArrowUp",t.key==="ArrowDown",t.key==="Home",t.key==="End"],_=h||m,x=f||p;if(!g&&!v&&(!_&&!x||i==="vertical"&&x||i==="horizontal"&&_))return null;const w=n?Array.from(n.querySelectorAll(a)):s;if(!w.length)return null;d&&t.preventDefault();let k=null;return x||_?k=BY(w,e,{goForward:_?m:l==="ltr"?f:p,loop:o}):g?k=w.at(0)||null:v&&(k=w.at(-1)||null),c&&(k==null||k.focus()),k}function BY(t,e,n,r=t.length){if(--r===0)return null;const i=t.indexOf(e),a=n.goForward?i+1:i-1;if(!n.loop&&(a<0||a>=t.length))return null;const s=(a+t.length)%t.length,o=t[s];return o?o.hasAttribute("disabled")&&o.getAttribute("disabled")!=="false"?BY(t,o,n,r):o:null}const[zY]=Xa("ConfigProvider");function jpe(t,e){var n;const r=Sl();return Br(()=>{r.value=t()},je(me({},e),{flush:(n=void 0)!=null?n:"sync"})),zs(r)}function ab(t){return q1()?(W1(t),!0):!1}function Fpe(){const t=new Set,e=a=>{t.delete(a)};return{on:a=>{t.add(a);const s=()=>e(a);return ab(s),{off:s}},off:e,trigger:(...a)=>Promise.all(Array.from(t).map(s=>s(...a))),clear:()=>{t.clear()}}}function Bpe(t){let e=!1,n;const r=TS(!0);return(...i)=>(e||(n=r.run(()=>t(...i)),e=!0),n)}function UY(t){let e=0,n,r;const i=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...a)=>(e+=1,r||(r=TS(!0),n=r.run(()=>t(...a))),ab(i),n)}function zpe(t){if(!Bn(t))return Jt(t);const e=new Proxy({},{get(n,r,i){return y(Reflect.get(t.value,r,i))},set(n,r,i){return Bn(t.value[r])&&!Bn(i)?t.value[r].value=i:t.value[r]=i,!0},deleteProperty(n,r){return Reflect.deleteProperty(t.value,r)},has(n,r){return Reflect.has(t.value,r)},ownKeys(){return Object.keys(t.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return Jt(e)}function Upe(t){return zpe(J(t))}function Hpe(t,...e){const n=e.flat(),r=n[0];return Upe(()=>Object.fromEntries(typeof r=="function"?Object.entries(Zs(t)).filter(([i,a])=>!r(Fr(a),i)):Object.entries(Zs(t)).filter(i=>!n.includes(i[0]))))}const dd=typeof window!="undefined"&&typeof document!="undefined";typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;const qpe=t=>typeof t!="undefined",Wpe=Object.prototype.toString,Gpe=t=>Wpe.call(t)==="[object Object]",r8=Ype();function Ype(){var t,e;return dd&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Kpe(t){return ra()}function YA(t){return Array.isArray(t)?t:[t]}function HY(t,e=1e4){return PS((n,r)=>{let i=Fr(t),a;const s=()=>setTimeout(()=>{i=Fr(t),r()},Fr(e));return ab(()=>{clearTimeout(a)}),{get(){return n(),i},set(o){i=o,r(),clearTimeout(a),a=s()}}})}const Xpe=Fr;function Zpe(t,e){Kpe()&&jc(t,e)}function qY(t,e,n={}){const{immediate:r=!0,immediateCallback:i=!1}=n,a=Sl(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}function l(){a.value=!1,o()}function d(...c){i&&t(),o(),a.value=!0,s=setTimeout(()=>{a.value=!1,s=null,t(...c)},Fr(e))}return r&&(a.value=!0,dd&&d()),ab(l),{isPending:zs(a),start:d,stop:l}}function Qpe(t,e,n){return Je(t,e,je(me({},n),{immediate:!0}))}const nR=dd?window:void 0;function rh(t){var e;const n=Fr(t);return(e=n==null?void 0:n.$el)!=null?e:n}function eg(...t){const e=[],n=()=>{e.forEach(o=>o()),e.length=0},r=(o,l,d,c)=>(o.addEventListener(l,d,c),()=>o.removeEventListener(l,d,c)),i=J(()=>{const o=YA(Fr(t[0])).filter(l=>l!=null);return o.every(l=>typeof l!="string")?o:void 0}),a=Qpe(()=>{var o,l;return[(l=(o=i.value)==null?void 0:o.map(d=>rh(d)))!=null?l:[nR].filter(d=>d!=null),YA(Fr(i.value?t[1]:t[0])),YA(y(i.value?t[2]:t[1])),Fr(i.value?t[3]:t[2])]},([o,l,d,c])=>{if(n(),!(o!=null&&o.length)||!(l!=null&&l.length)||!(d!=null&&d.length))return;const f=Gpe(c)?me({},c):c;e.push(...o.flatMap(p=>l.flatMap(h=>d.map(m=>r(p,h,m,f)))))},{flush:"post"}),s=()=>{a(),n()};return ab(n),s}function Jpe(){const t=Sl(!1),e=ra();return e&&bt(()=>{t.value=!0},e),t}function ehe(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function the(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:i=nR,eventName:a="keydown",passive:s=!1,dedupe:o=!1}=r,l=ehe(e);return eg(i,a,c=>{c.repeat&&Fr(o)||l(c)&&n(c)},s)}function nhe(t){return JSON.parse(JSON.stringify(t))}function cd(t,e,n,r={}){var i,a,s;const{clone:o=!1,passive:l=!1,eventName:d,deep:c=!1,defaultValue:f,shouldEmit:p}=r,h=ra(),m=n||(h==null?void 0:h.emit)||((i=h==null?void 0:h.$emit)==null?void 0:i.bind(h))||((s=(a=h==null?void 0:h.proxy)==null?void 0:a.$emit)==null?void 0:s.bind(h==null?void 0:h.proxy));let g=d;e||(e="modelValue"),g=g||`update:${e.toString()}`;const v=w=>o?typeof o=="function"?o(w):nhe(w):w,_=()=>qpe(t[e])?v(t[e]):f,x=w=>{p?p(w)&&m(g,w):m(g,w)};if(l){const w=_(),k=Q(w);let S=!1;return Je(()=>t[e],C=>{S||(S=!0,k.value=v(C),ir(()=>S=!1))}),Je(k,C=>{!S&&(C!==t[e]||c)&&x(C)},{deep:c}),k}else return J({get(){return _()},set(w){x(w)}})}function KA(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function sE(t,e,n=".",r){if(!KA(e))return sE(t,{},n,r);const i=Object.assign({},e);for(const a in t){if(a==="__proto__"||a==="constructor")continue;const s=t[a];s!=null&&(r&&r(i,a,s,n)||(Array.isArray(s)&&Array.isArray(i[a])?i[a]=[...s,...i[a]]:KA(s)&&KA(i[a])?i[a]=sE(s,i[a],(n?`${n}.`:"")+a.toString(),r):i[a]=s))}return i}function rhe(t){return(...e)=>e.reduce((n,r)=>sE(n,r,"",t),{})}const ihe=rhe(),ahe=UY(()=>{const t=Q(new Map),e=Q(),n=J(()=>{for(const s of t.value.values())if(s)return!0;return!1}),r=zY({scrollBody:Q(!0)});let i=null;const a=()=>{var s;document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=(s=e.value)!=null?s:"",r8&&(i==null||i()),e.value=void 0};return Je(n,(s,o)=>{var f;if(!dd)return;if(!s){o&&a();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,d={padding:l,margin:0},c=(f=r.scrollBody)!=null&&f.value?typeof r.scrollBody.value=="object"?ihe({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},d):d:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof c.padding=="number"?`${c.padding}px`:String(c.padding),document.body.style.marginRight=typeof c.margin=="number"?`${c.margin}px`:String(c.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),r8&&(i=eg(document,"touchmove",p=>she(p),{passive:!1})),ir(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function rR(t){const e=Math.random().toString(36).substring(2,7),n=ahe();n.value.set(e,t!=null?t:!1);const r=J({get:()=>{var i;return(i=n.value.get(e))!=null?i:!1},set:i=>n.value.set(e,i)});return Zpe(()=>{n.value.delete(e)}),r}function WY(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:WY(n)}}function she(t){const e=t||window.event,n=e.target;return n instanceof Element&&WY(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function iR(t){const e=zY({dir:Q("ltr")});return J(()=>{var n;return(t==null?void 0:t.value)||((n=e.dir)==null?void 0:n.value)||"ltr"})}function sb(t){const e=ra(),n=e==null?void 0:e.type.emits,r={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),n==null||n.forEach(i=>{r[Dy(xa(i))]=(...a)=>t(i,...a)}),r}let XA=0;function GY(){Br(t=>{var n,r;if(!dd)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",(n=e[0])!=null?n:i8()),document.body.insertAdjacentElement("beforeend",(r=e[1])!=null?r:i8()),XA++,t(()=>{XA===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(i=>i.remove()),XA--})})}function i8(){const t=document.createElement("span");return t.setAttribute("data-reka-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}function ohe(t){return J(()=>{var e;return Xpe(t)?!!((e=rh(t))!=null&&e.closest("form")):!0})}function dn(){const t=ra(),e=Q(),n=J(()=>{var s,o;return["#text","#comment"].includes((s=e.value)==null?void 0:s.$el.nodeName)?(o=e.value)==null?void 0:o.$el.nextElementSibling:rh(e)}),r=Object.assign({},t.exposed),i={};for(const s in t.props)Object.defineProperty(i,s,{enumerable:!0,configurable:!0,get:()=>t.props[s]});if(Object.keys(r).length>0)for(const s in r)Object.defineProperty(i,s,{enumerable:!0,configurable:!0,get:()=>r[s]});Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=i;function a(s){e.value=s,s&&(Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>s instanceof Element?s:s.$el}),t.exposed=i)}return{forwardRef:a,currentRef:e,currentElement:n}}function aR(t){var i;const e=ra(),n=Object.keys((i=e==null?void 0:e.type.props)!=null?i:{}).reduce((a,s)=>{const o=(e==null?void 0:e.type.props[s]).default;return o!==void 0&&(a[s]=o),a},{}),r=Zw(t);return J(()=>{var o;const a={},s=(o=e==null?void 0:e.vnode.props)!=null?o:{};return Object.keys(s).forEach(l=>{a[xa(l)]=s[l]}),Object.keys(me(me({},n),a)).reduce((l,d)=>(r.value[d]!==void 0&&(l[d]=r.value[d]),l),{})})}function Hl(t,e){const n=aR(t),r=e?sb(e):{};return J(()=>me(me({},n.value),r))}function lhe(t,e){const n=HY(!1,300),r=Q(null),i=Fpe();function a(){r.value=null,n.value=!1}function s(o,l){const d=o.currentTarget,c={x:o.clientX,y:o.clientY},f=uhe(c,d.getBoundingClientRect()),p=dhe(c,f),h=che(l.getBoundingClientRect()),m=phe([...p,...h]);r.value=m,n.value=!0}return Br(o=>{if(t.value&&e.value){const l=c=>s(c,e.value),d=c=>s(c,t.value);t.value.addEventListener("pointerleave",l),e.value.addEventListener("pointerleave",d),o(()=>{var c,f;(c=t.value)==null||c.removeEventListener("pointerleave",l),(f=e.value)==null||f.removeEventListener("pointerleave",d)})}}),Br(o=>{var l;if(r.value){const d=c=>{var v,_;if(!r.value||!(c.target instanceof Element))return;const f=c.target,p={x:c.clientX,y:c.clientY},h=((v=t.value)==null?void 0:v.contains(f))||((_=e.value)==null?void 0:_.contains(f)),m=!fhe(p,r.value),g=!!f.closest("[data-grace-area-trigger]");h?a():(m||g)&&(a(),i.trigger())};(l=t.value)==null||l.ownerDocument.addEventListener("pointermove",d),o(()=>{var c;return(c=t.value)==null?void 0:c.ownerDocument.removeEventListener("pointermove",d)})}}),{isPointerInTransit:n,onPointerExit:i.on}}function uhe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function dhe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function che(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function fhe(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a].x,l=e[a].y,d=e[s].x,c=e[s].y;l>r!=c>r&&n<(d-o)*(r-l)/(c-l)+o&&(i=!i)}return i}function phe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),hhe(e)}function hhe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const a=e[e.length-1],s=e[e.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const a=n[n.length-1],s=n[n.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var mhe=function(t){if(typeof document=="undefined")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Mh=new WeakMap,Qb=new WeakMap,Jb={},ZA=0,YY=function(t){return t&&(t.host||YY(t.parentNode))},ghe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=YY(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},vhe=function(t,e,n,r){var i=ghe(e,Array.isArray(t)?t:[t]);Jb[n]||(Jb[n]=new WeakMap);var a=Jb[n],s=[],o=new Set,l=new Set(i),d=function(f){!f||o.has(f)||(o.add(f),d(f.parentNode))};i.forEach(d);var c=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(o.has(p))c(p);else try{var h=p.getAttribute(r),m=h!==null&&h!=="false",g=(Mh.get(p)||0)+1,v=(a.get(p)||0)+1;Mh.set(p,g),a.set(p,v),s.push(p),g===1&&m&&Qb.set(p,!0),v===1&&p.setAttribute(n,"true"),m||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return c(e),o.clear(),ZA++,function(){s.forEach(function(f){var p=Mh.get(f)-1,h=a.get(f)-1;Mh.set(f,p),a.set(f,h),p||(Qb.has(f)||f.removeAttribute(r),Qb.delete(f)),h||f.removeAttribute(n)}),ZA--,ZA||(Mh=new WeakMap,Mh=new WeakMap,Qb=new WeakMap,Jb={})}},yhe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=mhe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),vhe(r,i,n,"aria-hidden")):function(){return null}};function sR(t){let e;Je(()=>rh(t),n=>{n?e=yhe(n):e&&e()}),Pi(()=>{e&&e()})}function Ac(t,e="reka"){return`${e}-${tw==null?void 0:tw()}`}function bhe(t){const e=Q(),n=J(()=>{var i,a;return(a=(i=e.value)==null?void 0:i.width)!=null?a:0}),r=J(()=>{var i,a;return(a=(i=e.value)==null?void 0:i.height)!=null?a:0});return bt(()=>{const i=rh(t);if(i){e.value={width:i.offsetWidth,height:i.offsetHeight};const a=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let l,d;if("borderBoxSize"in o){const c=o.borderBoxSize,f=Array.isArray(c)?c[0]:c;l=f.inlineSize,d=f.blockSize}else l=i.offsetWidth,d=i.offsetHeight;e.value={width:l,height:d}});return a.observe(i,{box:"border-box"}),()=>a.unobserve(i)}else e.value=void 0}),{width:n,height:r}}function _he(t,e){const n=Q(t);function r(a){const s=e[n.value][a];return s!=null?s:n.value}return{state:n,dispatch:a=>{n.value=r(a)}}}function xhe(t){const e=HY("",1e3);return{search:e,handleTypeaheadSearch:(i,a)=>{e.value=e.value+i;{const s=qa(),o=a.map(p=>{var h,m,g,v;return je(me({},p),{textValue:(v=(g=(h=p.value)==null?void 0:h.textValue)!=null?g:(m=p.ref.textContent)==null?void 0:m.trim())!=null?v:""})}),l=o.find(p=>p.ref===s),d=o.map(p=>p.textValue),c=khe(d,e.value,l==null?void 0:l.textValue),f=o.find(p=>p.textValue===c);return f&&f.ref.focus(),f==null?void 0:f.ref}},resetTypeahead:()=>{e.value=""}}}function whe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function khe(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let s=whe(t,Math.max(a,0));i.length===1&&(s=s.filter(d=>d!==n));const l=s.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function She(t,e){var v,_;const n=Q({}),r=Q("none"),i=Q(t),a=t.value?"mounted":"unmounted";let s;const o=(_=(v=e.value)==null?void 0:v.ownerDocument.defaultView)!=null?_:nR,{state:l,dispatch:d}=_he(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=x=>{var w;if(dd){const k=new CustomEvent(x,{bubbles:!1,cancelable:!1});(w=e.value)==null||w.dispatchEvent(k)}};Je(t,(x,w)=>le(this,null,function*(){var S;const k=w!==x;if(yield ir(),k){const C=r.value,A=e_(e.value);x?(d("MOUNT"),c("enter"),A==="none"&&c("after-enter")):A==="none"||A==="undefined"||((S=n.value)==null?void 0:S.display)==="none"?(d("UNMOUNT"),c("leave"),c("after-leave")):w&&C!==A?(d("ANIMATION_OUT"),c("leave")):(d("UNMOUNT"),c("after-leave"))}}),{immediate:!0});const f=x=>{const w=e_(e.value),k=w.includes(CSS.escape(x.animationName)),S=l.value==="mounted"?"enter":"leave";if(x.target===e.value&&k&&(c(`after-${S}`),d("ANIMATION_END"),!i.value)){const C=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",s=o==null?void 0:o.setTimeout(()=>{var A;((A=e.value)==null?void 0:A.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=C)})}x.target===e.value&&w==="none"&&d("ANIMATION_END")},p=x=>{x.target===e.value&&(r.value=e_(e.value))},h=Je(e,(x,w)=>{x?(n.value=getComputedStyle(x),x.addEventListener("animationstart",p),x.addEventListener("animationcancel",f),x.addEventListener("animationend",f)):(d("ANIMATION_END"),s!==void 0&&(o==null||o.clearTimeout(s)),w==null||w.removeEventListener("animationstart",p),w==null||w.removeEventListener("animationcancel",f),w==null||w.removeEventListener("animationend",f))},{immediate:!0}),m=Je(l,()=>{const x=e_(e.value);r.value=l.value==="mounted"?x:"none"});return Pi(()=>{h(),m()}),{isPresent:J(()=>["mounted","unmountSuspended"].includes(l.value))}}function e_(t){return t&&getComputedStyle(t).animationName||"none"}var Mg=Ze({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){var d;const{present:r,forceMount:i}=Zs(t),a=Q(),{isPresent:s}=She(r,a);n({present:s});let o=e.default({present:s.value});o=tR(o||[]);const l=ra();if(o&&(o==null?void 0:o.length)>1){const c=(d=l==null?void 0:l.parent)!=null&&d.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(f=>`  - ${f}`).join(`
`)].join(`
`))}return()=>i.value||r.value||s.value?dr(e.default({present:s.value})[0],{ref:c=>{const f=rh(c);return typeof(f==null?void 0:f.hasAttribute)=="undefined"||(f!=null&&f.hasAttribute("data-reka-popper-content-wrapper")?a.value=f.firstElementChild:a.value=f),f}}):null}});const oE=Ze({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{var l;if(!n.default)return null;const r=tR(n.default()),i=r.findIndex(d=>d.type!==pi);if(i===-1)return r;const a=r[i];(l=a.props)==null||delete l.ref;const s=a.props?Ct(e,a.props):e,o=$o(je(me({},a),{props:{}}),s);return r.length===1?o:(r[i]=o,r)}}}),Che=["area","img","input"],Vi=Ze({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&Che.includes(r)?()=>dr(r,e):r!=="template"?()=>dr(t.as,e,{default:n.default}):()=>dr(oE,e,{default:n.default})}});function lE(){const t=Q(),e=J(()=>{var n,r;return["#text","#comment"].includes((n=t.value)==null?void 0:n.$el.nodeName)?(r=t.value)==null?void 0:r.$el.nextElementSibling:rh(t)});return{primitiveElement:t,currentElement:e}}const[fd,Ahe]=Xa("DialogRoot");var The=Ze({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,i=cd(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),a=Q(),s=Q(),{modal:o}=Zs(n);return Ahe({open:i,modal:o,openModal:()=>{i.value=!0},onOpenChange:l=>{i.value=l},onOpenToggle:()=>{i.value=!i.value},contentId:"",titleId:"",descriptionId:"",triggerElement:a,contentElement:s}),(l,d)=>Ye(l.$slots,"default",{open:y(i),close:()=>i.value=!1})}}),Ehe=The,Mhe=Ze({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t;dn();const n=fd();return(r,i)=>(T(),he(y(Vi),Ct(e,{type:r.as==="button"?"button":void 0,onClick:i[0]||(i[0]=a=>y(n).onOpenChange(!1))}),{default:D(()=>[Ye(r.$slots,"default")]),_:3},16,["type"]))}}),$he=Mhe;const Dhe="dismissableLayer.pointerDownOutside",Rhe="dismissableLayer.focusOutside";function KY(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),i=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||i.indexOf(r)<i.indexOf(n)))}function Phe(t,e,n=!0){var s,o;const r=(o=(s=e==null?void 0:e.value)==null?void 0:s.ownerDocument)!=null?o:globalThis==null?void 0:globalThis.document,i=Q(!1),a=Q(()=>{});return Br(l=>{if(!dd||!Fr(n))return;const d=f=>le(this,null,function*(){const p=f.target;if(!(!(e!=null&&e.value)||!p)){if(KY(e.value,p)){i.value=!1;return}if(f.target&&!i.value){let m=function(){FY(Dhe,t,h)};const h={originalEvent:f};f.pointerType==="touch"?(r.removeEventListener("click",a.value),a.value=m,r.addEventListener("click",a.value,{once:!0})):m()}else r.removeEventListener("click",a.value);i.value=!1}}),c=window.setTimeout(()=>{r.addEventListener("pointerdown",d)},0);l(()=>{window.clearTimeout(c),r.removeEventListener("pointerdown",d),r.removeEventListener("click",a.value)})}),{onPointerDownCapture:()=>{Fr(n)&&(i.value=!0)}}}function Ihe(t,e,n=!0){var a,s;const r=(s=(a=e==null?void 0:e.value)==null?void 0:a.ownerDocument)!=null?s:globalThis==null?void 0:globalThis.document,i=Q(!1);return Br(o=>{if(!dd||!Fr(n))return;const l=d=>le(this,null,function*(){if(!(e!=null&&e.value))return;yield ir(),yield ir();const c=d.target;!e.value||!c||KY(e.value,c)||d.target&&!i.value&&FY(Rhe,t,{originalEvent:d})});r.addEventListener("focusin",l),o(()=>r.removeEventListener("focusin",l))}),{onFocusCapture:()=>{Fr(n)&&(i.value=!0)},onBlurCapture:()=>{Fr(n)&&(i.value=!1)}}}const nu=Jt({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var Ohe=Ze({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:i,currentElement:a}=dn(),s=J(()=>{var m,g;return(g=(m=a.value)==null?void 0:m.ownerDocument)!=null?g:globalThis.document}),o=J(()=>nu.layersRoot),l=J(()=>a.value?Array.from(o.value).indexOf(a.value):-1),d=J(()=>nu.layersWithOutsidePointerEventsDisabled.size>0),c=J(()=>{const m=Array.from(o.value),[g]=[...nu.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(g);return l.value>=v}),f=Phe(m=>le(this,null,function*(){const g=[...nu.branches].some(v=>v==null?void 0:v.contains(m.target));!c.value||g||(r("pointerDownOutside",m),r("interactOutside",m),yield ir(),m.defaultPrevented||r("dismiss"))}),a),p=Ihe(m=>{[...nu.branches].some(v=>v==null?void 0:v.contains(m.target))||(r("focusOutside",m),r("interactOutside",m),m.defaultPrevented||r("dismiss"))},a);the("Escape",m=>{l.value===o.value.size-1&&(r("escapeKeyDown",m),m.defaultPrevented||r("dismiss"))});let h;return Br(m=>{a.value&&(n.disableOutsidePointerEvents&&(nu.layersWithOutsidePointerEventsDisabled.size===0&&(h=s.value.body.style.pointerEvents,s.value.body.style.pointerEvents="none"),nu.layersWithOutsidePointerEventsDisabled.add(a.value)),o.value.add(a.value),m(()=>{n.disableOutsidePointerEvents&&nu.layersWithOutsidePointerEventsDisabled.size===1&&(s.value.body.style.pointerEvents=h)}))}),Br(m=>{m(()=>{a.value&&(o.value.delete(a.value),nu.layersWithOutsidePointerEventsDisabled.delete(a.value))})}),(m,g)=>(T(),he(y(Vi),{ref:y(i),"as-child":m.asChild,as:m.as,"data-dismissable-layer":"",style:nt({pointerEvents:d.value?c.value?"auto":"none":void 0}),onFocusCapture:y(p).onFocusCapture,onBlurCapture:y(p).onBlurCapture,onPointerdownCapture:y(f).onPointerDownCapture},{default:D(()=>[Ye(m.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),YS=Ohe;const Lhe=Bpe(()=>Q([]));function Vhe(){const t=Lhe();return{add(e){const n=t.value[0];e!==n&&(n==null||n.pause()),t.value=a8(t.value,e),t.value.unshift(e)},remove(e){var n;t.value=a8(t.value,e),(n=t.value[0])==null||n.resume()}}}function a8(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Nhe(t){return t.filter(e=>e.tagName!=="A")}const QA="focusScope.autoFocusOnMount",JA="focusScope.autoFocusOnUnmount",s8={bubbles:!1,cancelable:!0};function jhe(t,{select:e=!1}={}){const n=qa();for(const r of t)if(Pd(r,{select:e}),qa()!==n)return!0}function Fhe(t){const e=XY(t),n=o8(e,t),r=o8(e.reverse(),t);return[n,r]}function XY(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function o8(t,e){for(const n of t)if(!Bhe(n,{upTo:e}))return n}function Bhe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function zhe(t){return t instanceof HTMLInputElement&&"select"in t}function Pd(t,{select:e=!1}={}){if(t&&t.focus){const n=qa();t.focus({preventScroll:!0}),t!==n&&zhe(t)&&e&&t.select()}}var Uhe=Ze({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:i,currentElement:a}=dn(),s=Q(null),o=Vhe(),l=Jt({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Br(c=>{if(!dd)return;const f=a.value;if(!n.trapped)return;function p(v){if(l.paused||!f)return;const _=v.target;f.contains(_)?s.value=_:Pd(s.value,{select:!0})}function h(v){if(l.paused||!f)return;const _=v.relatedTarget;_!==null&&(f.contains(_)||Pd(s.value,{select:!0}))}function m(v){f.contains(s.value)||Pd(f)}document.addEventListener("focusin",p),document.addEventListener("focusout",h);const g=new MutationObserver(m);f&&g.observe(f,{childList:!0,subtree:!0}),c(()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",h),g.disconnect()})}),Br(c=>le(this,null,function*(){const f=a.value;if(yield ir(),!f)return;o.add(l);const p=qa();if(!f.contains(p)){const m=new CustomEvent(QA,s8);f.addEventListener(QA,g=>r("mountAutoFocus",g)),f.dispatchEvent(m),m.defaultPrevented||(jhe(Nhe(XY(f)),{select:!0}),qa()===p&&Pd(f))}c(()=>{f.removeEventListener(QA,v=>r("mountAutoFocus",v));const m=new CustomEvent(JA,s8),g=v=>{r("unmountAutoFocus",v)};f.addEventListener(JA,g),f.dispatchEvent(m),setTimeout(()=>{m.defaultPrevented||Pd(p!=null?p:document.body,{select:!0}),f.removeEventListener(JA,g),o.remove(l)},0)})}));function d(c){if(!n.loop&&!n.trapped||l.paused)return;const f=c.key==="Tab"&&!c.altKey&&!c.ctrlKey&&!c.metaKey,p=qa();if(f&&p){const h=c.currentTarget,[m,g]=Fhe(h);m&&g?!c.shiftKey&&p===g?(c.preventDefault(),n.loop&&Pd(m,{select:!0})):c.shiftKey&&p===m&&(c.preventDefault(),n.loop&&Pd(g,{select:!0})):p===h&&c.preventDefault()}}return(c,f)=>(T(),he(y(Vi),{ref_key:"currentRef",ref:i,tabindex:"-1","as-child":c.asChild,as:c.as,onKeydown:d},{default:D(()=>[Ye(c.$slots,"default")]),_:3},8,["as-child","as"]))}}),oR=Uhe;const Hhe="menu.itemSelect",uE=["Enter"," "],qhe=["ArrowDown","PageUp","Home"],ZY=["ArrowUp","PageDown","End"],Whe=[...qhe,...ZY],Ghe={ltr:[...uE,"ArrowRight"],rtl:[...uE,"ArrowLeft"]},Yhe={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function lR(t){return t?"open":"closed"}function Khe(t){const e=qa();for(const n of t)if(n===e||(n.focus(),qa()!==e))return}function Xhe(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a].x,l=e[a].y,d=e[s].x,c=e[s].y;l>r!=c>r&&n<(d-o)*(r-l)/(c-l)+o&&(i=!i)}return i}function Zhe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Xhe(n,e)}function N0(t){return t.pointerType==="mouse"}var Qhe=Ze({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,i=fd(),{forwardRef:a,currentElement:s}=dn();return i.titleId||(i.titleId=Ac(void 0,"reka-dialog-title")),i.descriptionId||(i.descriptionId=Ac(void 0,"reka-dialog-description")),bt(()=>{i.contentElement=s,qa()!==document.body&&(i.triggerElement.value=qa())}),(o,l)=>(T(),he(y(oR),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=d=>r("openAutoFocus",d)),onUnmountAutoFocus:l[6]||(l[6]=d=>r("closeAutoFocus",d))},{default:D(()=>[b(y(YS),Ct({id:y(i).contentId,ref:y(a),as:o.as,"as-child":o.asChild,"disable-outside-pointer-events":o.disableOutsidePointerEvents,role:"dialog","aria-describedby":y(i).descriptionId,"aria-labelledby":y(i).titleId,"data-state":y(lR)(y(i).open.value)},o.$attrs,{onDismiss:l[0]||(l[0]=d=>y(i).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=d=>r("escapeKeyDown",d)),onFocusOutside:l[2]||(l[2]=d=>r("focusOutside",d)),onInteractOutside:l[3]||(l[3]=d=>r("interactOutside",d)),onPointerDownOutside:l[4]||(l[4]=d=>r("pointerDownOutside",d))}),{default:D(()=>[Ye(o.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),QY=Qhe,Jhe=Ze({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,i=fd(),a=sb(r),{forwardRef:s,currentElement:o}=dn();return sR(o),(l,d)=>(T(),he(QY,Ct(me(me({},n),y(a)),{ref:y(s),"trap-focus":y(i).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:d[0]||(d[0]=c=>{var f;c.defaultPrevented||(c.preventDefault(),(f=y(i).triggerElement.value)==null||f.focus())}),onPointerDownOutside:d[1]||(d[1]=c=>{const f=c.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0;(f.button===2||p)&&c.preventDefault()}),onFocusOutside:d[2]||(d[2]=c=>{c.preventDefault()})}),{default:D(()=>[Ye(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),eme=Jhe,tme=Ze({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,i=sb(e);dn();const a=fd(),s=Q(!1),o=Q(!1);return(l,d)=>(T(),he(QY,Ct(me(me({},n),y(i)),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:d[0]||(d[0]=c=>{var f;c.defaultPrevented||(s.value||(f=y(a).triggerElement.value)==null||f.focus(),c.preventDefault()),s.value=!1,o.value=!1}),onInteractOutside:d[1]||(d[1]=c=>{var h;c.defaultPrevented||(s.value=!0,c.detail.originalEvent.type==="pointerdown"&&(o.value=!0));const f=c.target;((h=y(a).triggerElement.value)==null?void 0:h.contains(f))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&o.value&&c.preventDefault()})}),{default:D(()=>[Ye(l.$slots,"default")]),_:3},16))}}),nme=tme,rme=Ze({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,i=fd(),a=sb(r),{forwardRef:s}=dn();return(o,l)=>(T(),he(y(Mg),{present:o.forceMount||y(i).open.value},{default:D(()=>[y(i).modal.value?(T(),he(eme,Ct({key:0,ref:y(s)},me(me(me({},n),y(a)),o.$attrs)),{default:D(()=>[Ye(o.$slots,"default")]),_:3},16)):(T(),he(nme,Ct({key:1,ref:y(s)},me(me(me({},n),y(a)),o.$attrs)),{default:D(()=>[Ye(o.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),ime=rme,ame=Ze({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const e=t;dn();const n=fd();return(r,i)=>(T(),he(y(Vi),Ct(e,{id:y(n).descriptionId}),{default:D(()=>[Ye(r.$slots,"default")]),_:3},16,["id"]))}}),JY=ame,sme=Ze({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=fd();return rR(!0),dn(),(n,r)=>(T(),he(y(Vi),{as:n.as,"as-child":n.asChild,"data-state":y(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:D(()=>[Ye(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),ome=sme,lme=Ze({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=fd(),{forwardRef:n}=dn();return(r,i)=>{var a;return(a=y(e))!=null&&a.modal.value?(T(),he(y(Mg),{key:0,present:r.forceMount||y(e).open.value},{default:D(()=>[b(ome,Ct(r.$attrs,{ref:y(n),as:r.as,"as-child":r.asChild}),{default:D(()=>[Ye(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):ie("v-if",!0)}}}),ume=lme,dme=Ze({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=Jpe();return(n,r)=>y(e)||n.forceMount?(T(),he(ID,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[Ye(n.$slots,"default")],8,["to","disabled","defer"])):ie("v-if",!0)}}),KS=dme,cme=Ze({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(y(KS),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),fme=cme,pme=Ze({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const e=t,n=fd();return dn(),(r,i)=>(T(),he(y(Vi),Ct(e,{id:y(n).titleId}),{default:D(()=>[Ye(r.$slots,"default")]),_:3},16,["id"]))}}),eK=pme;const l8="data-reka-collection-item";function tK(t={}){const{key:e="",isProvider:n=!1}=t,r=`${e}CollectionProvider`;let i;if(n){const c=Q(new Map);i={collectionRef:Q(),itemMap:c},Us(r,i)}else i=vi(r);const a=(c=!1)=>{const f=i.collectionRef.value;if(!f)return[];const p=Array.from(f.querySelectorAll(`[${l8}]`)),m=Array.from(i.itemMap.value.values()).sort((g,v)=>p.indexOf(g.ref)-p.indexOf(v.ref));return c?m:m.filter(g=>g.ref.dataset.disabled!=="")},s=Ze({name:"CollectionSlot",setup(c,{slots:f}){const{primitiveElement:p,currentElement:h}=lE();return Je(h,()=>{i.collectionRef.value=h.value}),()=>dr(oE,{ref:p},f)}}),o=Ze({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(c,{slots:f,attrs:p}){const{primitiveElement:h,currentElement:m}=lE();return Br(g=>{if(m.value){const v=Vt(m.value);i.itemMap.value.set(v,{ref:m.value,value:c.value}),g(()=>i.itemMap.value.delete(v))}}),()=>dr(oE,je(me({},p),{[l8]:"",ref:h}),f)}}),l=J(()=>Array.from(i.itemMap.value.values())),d=J(()=>i.itemMap.value.size);return{getItems:a,reactiveItems:l,itemMapSize:d,CollectionSlot:s,CollectionItem:o}}const hme="rovingFocusGroup.onEntryFocus",mme={bubbles:!1,cancelable:!0};function gme(t,e=!1){const n=qa();for(const r of t)if(r===n||(r.focus({preventScroll:e}),qa()!==n))return}const[JEn,vme]=Xa("RovingFocusGroup");var yme=Ze({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:n}){const r=t,i=n,{loop:a,orientation:s,dir:o}=Zs(r),l=iR(o),d=cd(r,"currentTabStopId",i,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),c=Q(!1),f=Q(!1),p=Q(0),{getItems:h,CollectionSlot:m}=tK({isProvider:!0});function g(_){const x=!f.value;if(_.currentTarget&&_.target===_.currentTarget&&x&&!c.value){const w=new CustomEvent(hme,mme);if(_.currentTarget.dispatchEvent(w),i("entryFocus",w),!w.defaultPrevented){const k=h().map($=>$.ref).filter($=>$.dataset.disabled!==""),S=k.find($=>$.getAttribute("data-active")===""),C=k.find($=>$.getAttribute("data-highlighted")===""),A=k.find($=>$.id===d.value),M=[S,C,A,...k].filter(Boolean);gme(M,r.preventScrollOnEntryFocus)}}f.value=!1}function v(){setTimeout(()=>{f.value=!1},1)}return e({getItems:h}),vme({loop:a,dir:l,orientation:s,currentTabStopId:d,onItemFocus:_=>{d.value=_},onItemShiftTab:()=>{c.value=!0},onFocusableItemAdd:()=>{p.value++},onFocusableItemRemove:()=>{p.value--}}),(_,x)=>(T(),he(y(m),null,{default:D(()=>[b(y(Vi),{tabindex:c.value||p.value===0?-1:0,"data-orientation":y(s),as:_.as,"as-child":_.asChild,dir:y(l),style:{outline:"none"},onMousedown:x[0]||(x[0]=w=>f.value=!0),onMouseup:v,onFocus:g,onBlur:x[1]||(x[1]=w=>c.value=!1)},{default:D(()=>[Ye(_.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),bme=yme,_me=Ze({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){return(e,n)=>(T(),he(y(Vi),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:D(()=>[Ye(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),nK=_me,xme=Ze({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(t){const e=t,{primitiveElement:n,currentElement:r}=lE(),i=J(()=>{var a;return(a=e.checked)!=null?a:e.value});return Je(i,(a,s)=>{if(!r.value)return;const o=r.value,l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(c&&a!==s){const f=new Event("input",{bubbles:!0}),p=new Event("change",{bubbles:!0});c.call(o,a),o.dispatchEvent(f),o.dispatchEvent(p)}}),(a,s)=>(T(),he(nK,Ct({ref_key:"primitiveElement",ref:n},me(me({},e),a.$attrs),{as:"input"}),null,16))}}),u8=xme,wme=Ze({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(t){const e=t,n=J(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=J(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((i,a)=>typeof i=="object"?Object.entries(i).map(([s,o])=>({name:`${e.name}[${a}][${s}]`,value:o})):{name:`${e.name}[${a}]`,value:i}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([i,a])=>({name:`${e.name}[${i}]`,value:a})):[]);return(i,a)=>(T(),P(_e,null,[ie(" We render single input if it's required "),n.value?(T(),he(u8,Ct({key:i.name},me(me({},e),i.$attrs),{name:i.name,value:i.value}),null,16,["name","value"])):(T(!0),P(_e,{key:1},we(r.value,s=>(T(),he(u8,Ct({key:s.name},{ref_for:!0},me(me({},e),i.$attrs),{name:s.name,value:s.value}),null,16,["name","value"]))),128))],2112))}}),kme=wme;const[rK,Sme]=Xa("PopperRoot");var Cme=Ze({inheritAttrs:!1,__name:"PopperRoot",setup(t){const e=Q();return Sme({anchor:e,onAnchorChange:n=>e.value=n}),(n,r)=>Ye(n.$slots,"default")}}),XS=Cme,Ame=Ze({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{forwardRef:n,currentElement:r}=dn(),i=rK();return xG(()=>{var a;i.onAnchorChange((a=e.reference)!=null?a:r.value)}),(a,s)=>(T(),he(y(Vi),{ref:y(n),as:a.as,"as-child":a.asChild},{default:D(()=>[Ye(a.$slots,"default")]),_:3},8,["as","as-child"]))}}),uR=Ame;const Tme={key:0,d:"M0 0L6 6L12 0"},Eme={key:1,d:"M0 0L4.58579 4.58579C5.36683 5.36683 6.63316 5.36684 7.41421 4.58579L12 0"};var Mme=Ze({__name:"Arrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(t){const e=t;return dn(),(n,r)=>(T(),he(y(Vi),Ct(e,{width:n.width,height:n.height,viewBox:n.asChild?void 0:"0 0 12 6",preserveAspectRatio:n.asChild?void 0:"none"}),{default:D(()=>[Ye(n.$slots,"default",{},()=>[n.rounded?(T(),P("path",Eme)):(T(),P("path",Tme))])]),_:3},16,["width","height","viewBox","preserveAspectRatio"]))}}),$me=Mme;function Dme(t){return t!==null}function Rme(t){return{name:"transformOrigin",options:t,fn(e){var v,_,x,w,k;const{placement:n,rects:r,middlewareData:i}=e,s=((v=i.arrow)==null?void 0:v.centerOffset)!==0,o=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[d,c]=dE(n),f={start:"0%",center:"50%",end:"100%"}[c],p=((x=(_=i.arrow)==null?void 0:_.x)!=null?x:0)+o/2,h=((k=(w=i.arrow)==null?void 0:w.y)!=null?k:0)+l/2;let m="",g="";return d==="bottom"?(m=s?f:`${p}px`,g=`${-l}px`):d==="top"?(m=s?f:`${p}px`,g=`${r.floating.height+l}px`):d==="right"?(m=`${-l}px`,g=s?f:`${h}px`):d==="left"&&(m=`${r.floating.width+l}px`,g=s?f:`${h}px`),{data:{x:m,y:g}}}}}function dE(t){const[e,n="center"]=t.split("-");return[e,n]}const Pme=["top","right","bottom","left"],Tc=Math.min,Qa=Math.max,u2=Math.round,t_=Math.floor,Al=t=>({x:t,y:t}),Ime={left:"right",right:"left",bottom:"top",top:"bottom"},Ome={start:"end",end:"start"};function cE(t,e,n){return Qa(t,Tc(e,n))}function Xu(t,e){return typeof t=="function"?t(e):t}function Zu(t){return t.split("-")[0]}function $g(t){return t.split("-")[1]}function dR(t){return t==="x"?"y":"x"}function cR(t){return t==="y"?"height":"width"}const Lme=new Set(["top","bottom"]);function gl(t){return Lme.has(Zu(t))?"y":"x"}function fR(t){return dR(gl(t))}function Vme(t,e,n){n===void 0&&(n=!1);const r=$g(t),i=fR(t),a=cR(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=d2(s)),[s,d2(s)]}function Nme(t){const e=d2(t);return[fE(t),e,fE(e)]}function fE(t){return t.replace(/start|end/g,e=>Ome[e])}const d8=["left","right"],c8=["right","left"],jme=["top","bottom"],Fme=["bottom","top"];function Bme(t,e,n){switch(t){case"top":case"bottom":return n?e?c8:d8:e?d8:c8;case"left":case"right":return e?jme:Fme;default:return[]}}function zme(t,e,n,r){const i=$g(t);let a=Bme(Zu(t),n==="start",r);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(fE)))),a}function d2(t){return t.replace(/left|right|bottom|top/g,e=>Ime[e])}function Ume(t){return me({top:0,right:0,bottom:0,left:0},t)}function iK(t){return typeof t!="number"?Ume(t):{top:t,right:t,bottom:t,left:t}}function c2(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function f8(t,e,n){let{reference:r,floating:i}=t;const a=gl(e),s=fR(e),o=cR(s),l=Zu(e),d=a==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[o]/2-i[o]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch($g(e)){case"start":h[s]-=p*(n&&d?-1:1);break;case"end":h[s]+=p*(n&&d?-1:1);break}return h}const Hme=(t,e,n)=>le(void 0,null,function*(){const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),l=yield s.isRTL==null?void 0:s.isRTL(e);let d=yield s.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:f}=f8(d,r,l),p=r,h={},m=0;for(let g=0;g<o.length;g++){const{name:v,fn:_}=o[g],{x,y:w,data:k,reset:S}=yield _({x:c,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:h,rects:d,platform:s,elements:{reference:t,floating:e}});c=x!=null?x:c,f=w!=null?w:f,h=je(me({},h),{[v]:me(me({},h[v]),k)}),S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(d=S.rects===!0?yield s.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:c,y:f}=f8(d,p,l)),g=-1)}return{x:c,y:f,placement:p,strategy:i,middlewareData:h}});function j0(t,e){return le(this,null,function*(){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:l}=t,{boundary:d="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=Xu(e,t),m=iK(h),v=o[p?f==="floating"?"reference":"floating":f],_=c2(yield a.getClippingRect({element:(n=yield a.isElement==null?void 0:a.isElement(v))==null||n?v:v.contextElement||(yield a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:d,rootBoundary:c,strategy:l})),x=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=yield a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating),k=(yield a.isElement==null?void 0:a.isElement(w))?(yield a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},S=c2(a.convertOffsetParentRelativeRectToViewportRelativeRect?yield a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:w,strategy:l}):x);return{top:(_.top-S.top+m.top)/k.y,bottom:(S.bottom-_.bottom+m.bottom)/k.y,left:(_.left-S.left+m.left)/k.x,right:(S.right-_.right+m.right)/k.x}})}const qme=t=>({name:"arrow",options:t,fn(n){return le(this,null,function*(){const{x:r,y:i,placement:a,rects:s,platform:o,elements:l,middlewareData:d}=n,{element:c,padding:f=0}=Xu(t,n)||{};if(c==null)return{};const p=iK(f),h={x:r,y:i},m=fR(a),g=cR(m),v=yield o.getDimensions(c),_=m==="y",x=_?"top":"left",w=_?"bottom":"right",k=_?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[m]-h[m]-s.floating[g],C=h[m]-s.reference[m],A=yield o.getOffsetParent==null?void 0:o.getOffsetParent(c);let M=A?A[k]:0;(!M||!(yield o.isElement==null?void 0:o.isElement(A)))&&(M=l.floating[k]||s.floating[g]);const $=S/2-C/2,R=M/2-v[g]/2-1,I=Tc(p[x],R),B=Tc(p[w],R),j=I,z=M-v[g]-B,F=M/2-v[g]/2+$,q=cE(j,F,z),N=!d.arrow&&$g(a)!=null&&F!==q&&s.reference[g]/2-(F<j?I:B)-v[g]/2<0,O=N?F<j?F-j:F-z:0;return{[m]:h[m]+O,data:me({[m]:q,centerOffset:F-q-O},N&&{alignmentOffset:O}),reset:N}})}}),Wme=function(t){return t===void 0&&(t={}),{name:"flip",options:t,fn(n){return le(this,null,function*(){var r,i;const{placement:a,middlewareData:s,rects:o,initialPlacement:l,platform:d,elements:c}=n,F=Xu(t,n),{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0}=F,_=Si(F,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const x=Zu(a),w=gl(l),k=Zu(l)===l,S=yield d.isRTL==null?void 0:d.isRTL(c.floating),C=h||(k||!v?[d2(l)]:Nme(l)),A=g!=="none";!h&&A&&C.push(...zme(l,v,g,S));const M=[l,...C],$=yield j0(n,_),R=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(f&&R.push($[x]),p){const q=Vme(a,o,S);R.push($[q[0]],$[q[1]])}if(I=[...I,{placement:a,overflows:R}],!R.every(q=>q<=0)){var B,j;const q=(((B=s.flip)==null?void 0:B.index)||0)+1,N=M[q];if(N&&(!(p==="alignment"?w!==gl(N):!1)||I.every(L=>gl(L.placement)===w?L.overflows[0]>0:!0)))return{data:{index:q,overflows:I},reset:{placement:N}};let O=(j=I.filter(V=>V.overflows[0]<=0).sort((V,L)=>V.overflows[1]-L.overflows[1])[0])==null?void 0:j.placement;if(!O)switch(m){case"bestFit":{var z;const V=(z=I.filter(L=>{if(A){const U=gl(L.placement);return U===w||U==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(U=>U>0).reduce((U,G)=>U+G,0)]).sort((L,U)=>L[1]-U[1])[0])==null?void 0:z[0];V&&(O=V);break}case"initialPlacement":O=l;break}if(a!==O)return{reset:{placement:O}}}return{}})}}};function p8(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function h8(t){return Pme.some(e=>t[e]>=0)}const Gme=function(t){return t===void 0&&(t={}),{name:"hide",options:t,fn(n){return le(this,null,function*(){const{rects:r}=n,s=Xu(t,n),{strategy:i="referenceHidden"}=s,a=Si(s,["strategy"]);switch(i){case"referenceHidden":{const o=yield j0(n,je(me({},a),{elementContext:"reference"})),l=p8(o,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:h8(l)}}}case"escaped":{const o=yield j0(n,je(me({},a),{altBoundary:!0})),l=p8(o,r.floating);return{data:{escapedOffsets:l,escaped:h8(l)}}}default:return{}}})}}},aK=new Set(["left","top"]);function Yme(t,e){return le(this,null,function*(){const{placement:n,platform:r,elements:i}=t,a=yield r.isRTL==null?void 0:r.isRTL(i.floating),s=Zu(n),o=$g(n),l=gl(n)==="y",d=aK.has(s)?-1:1,c=a&&l?-1:1,f=Xu(e,t);let{mainAxis:p,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof m=="number"&&(h=o==="end"?m*-1:m),l?{x:h*c,y:p*d}:{x:p*d,y:h*c}})}const Kme=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(n){return le(this,null,function*(){var r,i;const{x:a,y:s,placement:o,middlewareData:l}=n,d=yield Yme(n,t);return o===((r=l.offset)==null?void 0:r.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:a+d.x,y:s+d.y,data:je(me({},d),{placement:o})}})}}},Xme=function(t){return t===void 0&&(t={}),{name:"shift",options:t,fn(n){return le(this,null,function*(){const{x:r,y:i,placement:a}=n,_=Xu(t,n),{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:w,y:k}=x;return{x:w,y:k}}}}=_,d=Si(_,["mainAxis","crossAxis","limiter"]),c={x:r,y:i},f=yield j0(n,d),p=gl(Zu(a)),h=dR(p);let m=c[h],g=c[p];if(s){const x=h==="y"?"top":"left",w=h==="y"?"bottom":"right",k=m+f[x],S=m-f[w];m=cE(k,m,S)}if(o){const x=p==="y"?"top":"left",w=p==="y"?"bottom":"right",k=g+f[x],S=g-f[w];g=cE(k,g,S)}const v=l.fn(je(me({},n),{[h]:m,[p]:g}));return je(me({},v),{data:{x:v.x-r,y:v.y-i,enabled:{[h]:s,[p]:o}}})})}}},Zme=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:l=!0,crossAxis:d=!0}=Xu(t,e),c={x:n,y:r},f=gl(i),p=dR(f);let h=c[p],m=c[f];const g=Xu(o,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:me({mainAxis:0,crossAxis:0},g);if(l){const w=p==="y"?"height":"width",k=a.reference[p]-a.floating[w]+v.mainAxis,S=a.reference[p]+a.reference[w]-v.mainAxis;h<k?h=k:h>S&&(h=S)}if(d){var _,x;const w=p==="y"?"width":"height",k=aK.has(Zu(i)),S=a.reference[f]-a.floating[w]+(k&&((_=s.offset)==null?void 0:_[f])||0)+(k?0:v.crossAxis),C=a.reference[f]+a.reference[w]+(k?0:((x=s.offset)==null?void 0:x[f])||0)-(k?v.crossAxis:0);m<S?m=S:m>C&&(m=C)}return{[p]:h,[f]:m}}}},Qme=function(t){return t===void 0&&(t={}),{name:"size",options:t,fn(n){return le(this,null,function*(){var r,i;const{placement:a,rects:s,platform:o,elements:l}=n,I=Xu(t,n),{apply:d=()=>{}}=I,c=Si(I,["apply"]),f=yield j0(n,c),p=Zu(a),h=$g(a),m=gl(a)==="y",{width:g,height:v}=s.floating;let _,x;p==="top"||p==="bottom"?(_=p,x=h===((yield o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=p,_=h==="end"?"top":"bottom");const w=v-f.top-f.bottom,k=g-f.left-f.right,S=Tc(v-f[_],w),C=Tc(g-f[x],k),A=!n.middlewareData.shift;let M=S,$=C;if((r=n.middlewareData.shift)!=null&&r.enabled.x&&($=k),(i=n.middlewareData.shift)!=null&&i.enabled.y&&(M=w),A&&!h){const B=Qa(f.left,0),j=Qa(f.right,0),z=Qa(f.top,0),F=Qa(f.bottom,0);m?$=g-2*(B!==0||j!==0?B+j:Qa(f.left,f.right)):M=v-2*(z!==0||F!==0?z+F:Qa(f.top,f.bottom))}yield d(je(me({},n),{availableWidth:$,availableHeight:M}));const R=yield o.getDimensions(l.floating);return g!==R.width||v!==R.height?{reset:{rects:!0}}:{}})}}};function ZS(){return typeof window!="undefined"}function ih(t){return pR(t)?(t.nodeName||"").toLowerCase():"#document"}function ls(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ql(t){var e;return(e=(pR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function pR(t){return ZS()?t instanceof Node||t instanceof ls(t).Node:!1}function Po(t){return ZS()?t instanceof Element||t instanceof ls(t).Element:!1}function Pl(t){return ZS()?t instanceof HTMLElement||t instanceof ls(t).HTMLElement:!1}function m8(t){return!ZS()||typeof ShadowRoot=="undefined"?!1:t instanceof ShadowRoot||t instanceof ls(t).ShadowRoot}const Jme=new Set(["inline","contents"]);function ob(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Io(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Jme.has(i)}const ege=new Set(["table","td","th"]);function tge(t){return ege.has(ih(t))}const nge=[":popover-open",":modal"];function QS(t){return nge.some(e=>{try{return t.matches(e)}catch(n){return!1}})}const rge=["transform","translate","scale","rotate","perspective"],ige=["transform","translate","scale","rotate","perspective","filter"],age=["paint","layout","strict","content"];function hR(t){const e=mR(),n=Po(t)?Io(t):t;return rge.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||ige.some(r=>(n.willChange||"").includes(r))||age.some(r=>(n.contain||"").includes(r))}function sge(t){let e=Ec(t);for(;Pl(e)&&!tg(e);){if(hR(e))return e;if(QS(e))return null;e=Ec(e)}return null}function mR(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oge=new Set(["html","body","#document"]);function tg(t){return oge.has(ih(t))}function Io(t){return ls(t).getComputedStyle(t)}function JS(t){return Po(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ec(t){if(ih(t)==="html")return t;const e=t.assignedSlot||t.parentNode||m8(t)&&t.host||ql(t);return m8(e)?e.host:e}function sK(t){const e=Ec(t);return tg(e)?t.ownerDocument?t.ownerDocument.body:t.body:Pl(e)&&ob(e)?e:sK(e)}function F0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=sK(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),s=ls(i);if(a){const o=pE(s);return e.concat(s,s.visualViewport||[],ob(i)?i:[],o&&n?F0(o):[])}return e.concat(i,F0(i,[],n))}function pE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function oK(t){const e=Io(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Pl(t),a=i?t.offsetWidth:n,s=i?t.offsetHeight:r,o=u2(n)!==a||u2(r)!==s;return o&&(n=a,r=s),{width:n,height:r,$:o}}function gR(t){return Po(t)?t:t.contextElement}function Im(t){const e=gR(t);if(!Pl(e))return Al(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=oK(e);let s=(a?u2(n.width):n.width)/r,o=(a?u2(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const lge=Al(0);function lK(t){const e=ls(t);return!mR()||!e.visualViewport?lge:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uge(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ls(t)?!1:e}function Vp(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=gR(t);let s=Al(1);e&&(r?Po(r)&&(s=Im(r)):s=Im(t));const o=uge(a,n,r)?lK(a):Al(0);let l=(i.left+o.x)/s.x,d=(i.top+o.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(a){const p=ls(a),h=r&&Po(r)?ls(r):r;let m=p,g=pE(m);for(;g&&r&&h!==m;){const v=Im(g),_=g.getBoundingClientRect(),x=Io(g),w=_.left+(g.clientLeft+parseFloat(x.paddingLeft))*v.x,k=_.top+(g.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,d*=v.y,c*=v.x,f*=v.y,l+=w,d+=k,m=ls(g),g=pE(m)}}return c2({width:c,height:f,x:l,y:d})}function eC(t,e){const n=JS(t).scrollLeft;return e?e.left+n:Vp(ql(t)).left+n}function uK(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-eC(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function dge(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",s=ql(r),o=e?QS(e.floating):!1;if(r===s||o&&a)return n;let l={scrollLeft:0,scrollTop:0},d=Al(1);const c=Al(0),f=Pl(r);if((f||!f&&!a)&&((ih(r)!=="body"||ob(s))&&(l=JS(r)),Pl(r))){const h=Vp(r);d=Im(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const p=s&&!f&&!a?uK(s,l):Al(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-l.scrollLeft*d.x+c.x+p.x,y:n.y*d.y-l.scrollTop*d.y+c.y+p.y}}function cge(t){return Array.from(t.getClientRects())}function fge(t){const e=ql(t),n=JS(t),r=t.ownerDocument.body,i=Qa(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Qa(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+eC(t);const o=-n.scrollTop;return Io(r).direction==="rtl"&&(s+=Qa(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}const g8=25;function pge(t,e){const n=ls(t),r=ql(t),i=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const c=mR();(!c||c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const d=eC(r);if(d<=0){const c=r.ownerDocument,f=c.body,p=getComputedStyle(f),h=c.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,m=Math.abs(r.clientWidth-f.clientWidth-h);m<=g8&&(a-=m)}else d<=g8&&(a+=d);return{width:a,height:s,x:o,y:l}}const hge=new Set(["absolute","fixed"]);function mge(t,e){const n=Vp(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=Pl(t)?Im(t):Al(1),s=t.clientWidth*a.x,o=t.clientHeight*a.y,l=i*a.x,d=r*a.y;return{width:s,height:o,x:l,y:d}}function v8(t,e,n){let r;if(e==="viewport")r=pge(t,n);else if(e==="document")r=fge(ql(t));else if(Po(e))r=mge(e,n);else{const i=lK(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return c2(r)}function dK(t,e){const n=Ec(t);return n===e||!Po(n)||tg(n)?!1:Io(n).position==="fixed"||dK(n,e)}function gge(t,e){const n=e.get(t);if(n)return n;let r=F0(t,[],!1).filter(o=>Po(o)&&ih(o)!=="body"),i=null;const a=Io(t).position==="fixed";let s=a?Ec(t):t;for(;Po(s)&&!tg(s);){const o=Io(s),l=hR(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&hge.has(i.position)||ob(s)&&!l&&dK(t,s))?r=r.filter(c=>c!==s):i=o,s=Ec(s)}return e.set(t,r),r}function vge(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?QS(e)?[]:gge(e,this._c):[].concat(n),r],o=s[0],l=s.reduce((d,c)=>{const f=v8(e,c,i);return d.top=Qa(f.top,d.top),d.right=Tc(f.right,d.right),d.bottom=Tc(f.bottom,d.bottom),d.left=Qa(f.left,d.left),d},v8(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function yge(t){const{width:e,height:n}=oK(t);return{width:e,height:n}}function bge(t,e,n){const r=Pl(e),i=ql(e),a=n==="fixed",s=Vp(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=Al(0);function d(){l.x=eC(i)}if(r||!r&&!a)if((ih(e)!=="body"||ob(i))&&(o=JS(e)),r){const h=Vp(e,!0,a,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&d();a&&!r&&i&&d();const c=i&&!r&&!a?uK(i,o):Al(0),f=s.left+o.scrollLeft-l.x-c.x,p=s.top+o.scrollTop-l.y-c.y;return{x:f,y:p,width:s.width,height:s.height}}function eT(t){return Io(t).position==="static"}function y8(t,e){if(!Pl(t)||Io(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ql(t)===n&&(n=n.ownerDocument.body),n}function cK(t,e){const n=ls(t);if(QS(t))return n;if(!Pl(t)){let i=Ec(t);for(;i&&!tg(i);){if(Po(i)&&!eT(i))return i;i=Ec(i)}return n}let r=y8(t,e);for(;r&&tge(r)&&eT(r);)r=y8(r,e);return r&&tg(r)&&eT(r)&&!hR(r)?n:r||sge(t)||n}const _ge=function(t){return le(this,null,function*(){const e=this.getOffsetParent||cK,n=this.getDimensions,r=yield n(t.floating);return{reference:bge(t.reference,yield e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}})};function xge(t){return Io(t).direction==="rtl"}const wge={convertOffsetParentRelativeRectToViewportRelativeRect:dge,getDocumentElement:ql,getClippingRect:vge,getOffsetParent:cK,getElementRects:_ge,getClientRects:cge,getDimensions:yge,getScale:Im,isElement:Po,isRTL:xge};function fK(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function kge(t,e){let n=null,r;const i=ql(t);function a(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const d=t.getBoundingClientRect(),{left:c,top:f,width:p,height:h}=d;if(o||e(),!p||!h)return;const m=t_(f),g=t_(i.clientWidth-(c+p)),v=t_(i.clientHeight-(f+h)),_=t_(c),w={rootMargin:-m+"px "+-g+"px "+-v+"px "+-_+"px",threshold:Qa(0,Tc(1,l))||1};let k=!0;function S(C){const A=C[0].intersectionRatio;if(A!==l){if(!k)return s();A?s(!1,A):r=setTimeout(()=>{s(!1,1e-7)},1e3)}A===1&&!fK(d,t.getBoundingClientRect())&&s(),k=!1}try{n=new IntersectionObserver(S,je(me({},w),{root:i.ownerDocument}))}catch(C){n=new IntersectionObserver(S,w)}n.observe(t)}return s(!0),a}function Sge(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,d=gR(t),c=i||a?[...d?F0(d):[],...F0(e)]:[];c.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),a&&_.addEventListener("resize",n)});const f=d&&o?kge(d,n):null;let p=-1,h=null;s&&(h=new ResizeObserver(_=>{let[x]=_;x&&x.target===d&&h&&(h.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),n()}),d&&!l&&h.observe(d),h.observe(e));let m,g=l?Vp(t):null;l&&v();function v(){const _=Vp(t);g&&!fK(g,_)&&n(),g=_,m=requestAnimationFrame(v)}return n(),()=>{var _;c.forEach(x=>{i&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),f==null||f(),(_=h)==null||_.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const Cge=Kme,Age=Xme,b8=Wme,Tge=Qme,Ege=Gme,Mge=qme,$ge=Zme,Dge=(t,e,n)=>{const r=new Map,i=me({platform:wge},n),a=je(me({},i.platform),{_c:r});return Hme(t,e,je(me({},i),{platform:a}))};function Rge(t){return t!=null&&typeof t=="object"&&"$el"in t}function hE(t){if(Rge(t)){const e=t.$el;return pR(e)&&ih(e)==="#comment"?null:e}return t}function dm(t){return typeof t=="function"?t():y(t)}function Pge(t){return{name:"arrow",options:t,fn(e){const n=hE(dm(t.element));return n==null?{}:Mge({element:n,padding:t.padding}).fn(e)}}}function pK(t){return typeof window=="undefined"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _8(t,e){const n=pK(t);return Math.round(e*n)/n}function Ige(t,e,n){n===void 0&&(n={});const r=n.whileElementsMounted,i=J(()=>{var A;return(A=dm(n.open))!=null?A:!0}),a=J(()=>dm(n.middleware)),s=J(()=>{var A;return(A=dm(n.placement))!=null?A:"bottom"}),o=J(()=>{var A;return(A=dm(n.strategy))!=null?A:"absolute"}),l=J(()=>{var A;return(A=dm(n.transform))!=null?A:!0}),d=J(()=>hE(t.value)),c=J(()=>hE(e.value)),f=Q(0),p=Q(0),h=Q(o.value),m=Q(s.value),g=Sl({}),v=Q(!1),_=J(()=>{const A={position:h.value,left:"0",top:"0"};if(!c.value)return A;const M=_8(c.value,f.value),$=_8(c.value,p.value);return l.value?me(je(me({},A),{transform:"translate("+M+"px, "+$+"px)"}),pK(c.value)>=1.5&&{willChange:"transform"}):{position:h.value,left:M+"px",top:$+"px"}});let x;function w(){if(d.value==null||c.value==null)return;const A=i.value;Dge(d.value,c.value,{middleware:a.value,placement:s.value,strategy:o.value}).then(M=>{f.value=M.x,p.value=M.y,h.value=M.strategy,m.value=M.placement,g.value=M.middlewareData,v.value=A!==!1})}function k(){typeof x=="function"&&(x(),x=void 0)}function S(){if(k(),r===void 0){w();return}if(d.value!=null&&c.value!=null){x=r(d.value,c.value,w);return}}function C(){i.value||(v.value=!1)}return Je([a,s,o,i],w,{flush:"sync"}),Je([d,c],S,{flush:"sync"}),Je(i,C,{flush:"sync"}),q1()&&W1(k),{x:Ah(f),y:Ah(p),strategy:Ah(h),placement:Ah(m),middlewareData:Ah(g),isPositioned:Ah(v),floatingStyles:_,update:w}}const hK={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[Oge,Lge]=Xa("PopperContent");var Vge=Ze({inheritAttrs:!1,__name:"PopperContent",props:vG({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},me({},hK)),emits:["placed"],setup(t,{emit:e}){const n=t,r=e,i=rK(),{forwardRef:a,currentElement:s}=dn(),o=Q(),l=Q(),{width:d,height:c}=bhe(l),f=J(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),p=J(()=>typeof n.collisionPadding=="number"?n.collisionPadding:me({top:0,right:0,bottom:0,left:0},n.collisionPadding)),h=J(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),m=J(()=>({padding:p.value,boundary:h.value.filter(Dme),altBoundary:h.value.length>0})),g=J(()=>({mainAxis:n.sideFlip,crossAxis:n.alignFlip})),v=jpe(()=>[Cge({mainAxis:n.sideOffset+c.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&b8(me(me({},m.value),g.value)),n.avoidCollisions&&Age(me({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?$ge():void 0},m.value)),!n.prioritizePosition&&n.avoidCollisions&&b8(me(me({},m.value),g.value)),Tge(je(me({},m.value),{apply:({elements:B,rects:j,availableWidth:z,availableHeight:F})=>{const{width:q,height:N}=j.reference,O=B.floating.style;O.setProperty("--reka-popper-available-width",`${z}px`),O.setProperty("--reka-popper-available-height",`${F}px`),O.setProperty("--reka-popper-anchor-width",`${q}px`),O.setProperty("--reka-popper-anchor-height",`${N}px`)}})),l.value&&Pge({element:l.value,padding:n.arrowPadding}),Rme({arrowWidth:d.value,arrowHeight:c.value}),n.hideWhenDetached&&Ege(me({strategy:"referenceHidden"},m.value))]),_=J(()=>{var B;return(B=n.reference)!=null?B:i.anchor.value}),{floatingStyles:x,placement:w,isPositioned:k,middlewareData:S}=Ige(_,o,{strategy:n.positionStrategy,placement:f,whileElementsMounted:(...B)=>Sge(...B,{layoutShift:!n.disableUpdateOnLayoutShift,animationFrame:n.updatePositionStrategy==="always"}),middleware:v}),C=J(()=>dE(w.value)[0]),A=J(()=>dE(w.value)[1]);xG(()=>{k.value&&r("placed")});const M=J(()=>{var B;return((B=S.value.arrow)==null?void 0:B.centerOffset)!==0}),$=Q("");Br(()=>{s.value&&($.value=window.getComputedStyle(s.value).zIndex)});const R=J(()=>{var B,j;return(j=(B=S.value.arrow)==null?void 0:B.x)!=null?j:0}),I=J(()=>{var B,j;return(j=(B=S.value.arrow)==null?void 0:B.y)!=null?j:0});return Lge({placedSide:C,onArrowChange:B=>l.value=B,arrowX:R,arrowY:I,shouldHideArrow:M}),(B,j)=>{var z,F,q;return T(),P("div",{ref_key:"floatingRef",ref:o,"data-reka-popper-content-wrapper":"",style:nt(me(je(me({},y(x)),{transform:y(k)?y(x).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$.value,"--reka-popper-transform-origin":[(z=y(S).transformOrigin)==null?void 0:z.x,(F=y(S).transformOrigin)==null?void 0:F.y].join(" ")}),((q=y(S).hide)==null?void 0:q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}))},[b(y(Vi),Ct({ref:y(a)},B.$attrs,{"as-child":n.asChild,as:B.as,"data-side":C.value,"data-align":A.value,style:{animation:y(k)?void 0:"none"}}),{default:D(()=>[Ye(B.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}}),vR=Vge;const Nge={top:"bottom",right:"left",bottom:"top",left:"right"};var jge=Ze({inheritAttrs:!1,__name:"PopperArrow",props:{width:{type:Number,required:!1},height:{type:Number,required:!1},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(t){const{forwardRef:e}=dn(),n=Oge(),r=J(()=>Nge[n.placedSide.value]);return(i,a)=>{var s,o,l,d;return T(),P("span",{ref:c=>{y(n).onArrowChange(c)},style:nt({position:"absolute",left:(s=y(n).arrowX)!=null&&s.value?`${(o=y(n).arrowX)==null?void 0:o.value}px`:void 0,top:(l=y(n).arrowY)!=null&&l.value?`${(d=y(n).arrowY)==null?void 0:d.value}px`:void 0,[r.value]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[y(n).placedSide.value],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[y(n).placedSide.value],visibility:y(n).shouldHideArrow.value?"hidden":void 0})},[b($me,Ct(i.$attrs,{ref:y(e),style:{display:"block"},as:i.as,"as-child":i.asChild,rounded:i.rounded,width:i.width,height:i.height}),{default:D(()=>[Ye(i.$slots,"default")]),_:3},16,["as","as-child","rounded","width","height"])],4)}}}),Fge=jge,Bge=Ze({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(y(uR),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),mK=Bge;function zge(){const t=Q(!1);return bt(()=>{eg("keydown",()=>{t.value=!0},{capture:!0,passive:!0}),eg(["pointerdown","pointermove"],()=>{t.value=!1},{capture:!0,passive:!0})}),t}const Uge=UY(zge),[ah,gK]=Xa(["MenuRoot","MenuSub"],"MenuContext"),[lb,Hge]=Xa("MenuRoot");var qge=Ze({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e,{modal:i,dir:a}=Zs(n),s=iR(a),o=cd(n,"open",r),l=Q(),d=Uge();return gK({open:o,onOpenChange:c=>{o.value=c},content:l,onContentChange:c=>{l.value=c}}),Hge({onClose:()=>{o.value=!1},isUsingKeyboardRef:d,dir:s,modal:i}),(c,f)=>(T(),he(y(XS),null,{default:D(()=>[Ye(c.$slots,"default")]),_:3}))}}),Wge=qge;const[yR,Gge]=Xa("MenuContent");var Yge=Ze({__name:"MenuContentImpl",props:vG({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},me({},hK)),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(t,{emit:e}){const n=t,r=e,i=ah(),a=lb(),{trapFocus:s,disableOutsidePointerEvents:o,loop:l}=Zs(n);GY(),rR(o.value);const d=Q(""),c=Q(0),f=Q(0),p=Q(null),h=Q("right"),m=Q(0),g=Q(null),v=Q(),{forwardRef:_,currentElement:x}=dn(),{handleTypeaheadSearch:w}=xhe();Je(x,$=>{i.onContentChange($)}),Pi(()=>{window.clearTimeout(c.value)});function k($){var I,B;return h.value===((I=p.value)==null?void 0:I.side)&&Zhe($,(B=p.value)==null?void 0:B.area)}function S($){return le(this,null,function*(){var R;r("openAutoFocus",$),!$.defaultPrevented&&($.preventDefault(),(R=x.value)==null||R.focus({preventScroll:!0}))})}function C($){var N,O;if($.defaultPrevented)return;const I=$.target.closest("[data-reka-menu-content]")===$.currentTarget,B=$.ctrlKey||$.altKey||$.metaKey,j=$.key.length===1,z=Npe($,qa(),x.value,{loop:l.value,arrowKeyOptions:"vertical",dir:a==null?void 0:a.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(z)return z==null?void 0:z.focus();if($.code==="Space")return;const F=(O=(N=v.value)==null?void 0:N.getItems())!=null?O:[];if(I&&($.key==="Tab"&&$.preventDefault(),!B&&j&&w($.key,F)),$.target!==x.value||!Whe.includes($.key))return;$.preventDefault();const q=[...F.map(V=>V.ref)];ZY.includes($.key)&&q.reverse(),Khe(q)}function A($){var R,I;(I=(R=$==null?void 0:$.currentTarget)==null?void 0:R.contains)!=null&&I.call(R,$.target)||(window.clearTimeout(c.value),d.value="")}function M($){var B;if(!N0($))return;const R=$.target,I=m.value!==$.clientX;if((B=$==null?void 0:$.currentTarget)!=null&&B.contains(R)&&I){const j=$.clientX>m.value?"right":"left";h.value=j,m.value=$.clientX}}return Gge({onItemEnter:$=>!!k($),onItemLeave:$=>{var R;k($)||((R=x.value)==null||R.focus(),g.value=null)},onTriggerLeave:$=>!!k($),searchRef:d,pointerGraceTimerRef:f,onPointerGraceIntentChange:$=>{p.value=$}}),($,R)=>(T(),he(y(oR),{"as-child":"",trapped:y(s),onMountAutoFocus:S,onUnmountAutoFocus:R[7]||(R[7]=I=>r("closeAutoFocus",I))},{default:D(()=>[b(y(YS),{"as-child":"","disable-outside-pointer-events":y(o),onEscapeKeyDown:R[2]||(R[2]=I=>r("escapeKeyDown",I)),onPointerDownOutside:R[3]||(R[3]=I=>r("pointerDownOutside",I)),onFocusOutside:R[4]||(R[4]=I=>r("focusOutside",I)),onInteractOutside:R[5]||(R[5]=I=>r("interactOutside",I)),onDismiss:R[6]||(R[6]=I=>r("dismiss"))},{default:D(()=>[b(y(bme),{ref_key:"rovingFocusGroupRef",ref:v,"current-tab-stop-id":g.value,"onUpdate:currentTabStopId":R[0]||(R[0]=I=>g.value=I),"as-child":"",orientation:"vertical",dir:y(a).dir.value,loop:y(l),onEntryFocus:R[1]||(R[1]=I=>{r("entryFocus",I),y(a).isUsingKeyboardRef.value||I.preventDefault()})},{default:D(()=>[b(y(vR),{ref:y(_),role:"menu",as:$.as,"as-child":$.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":y(lR)(y(i).open.value),dir:y(a).dir.value,side:$.side,"side-offset":$.sideOffset,align:$.align,"align-offset":$.alignOffset,"avoid-collisions":$.avoidCollisions,"collision-boundary":$.collisionBoundary,"collision-padding":$.collisionPadding,"arrow-padding":$.arrowPadding,"prioritize-position":$.prioritizePosition,"position-strategy":$.positionStrategy,"update-position-strategy":$.updatePositionStrategy,sticky:$.sticky,"hide-when-detached":$.hideWhenDetached,reference:$.reference,onKeydown:C,onBlur:A,onPointermove:M},{default:D(()=>[Ye($.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),bR=Yge,Kge=Ze({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,n=yR(),{forwardRef:r}=dn(),{CollectionItem:i}=tK(),a=Q(!1);function s(l){return le(this,null,function*(){if(!l.defaultPrevented&&N0(l)){if(e.disabled)n.onItemLeave(l);else if(!n.onItemEnter(l)){const c=l.currentTarget;c==null||c.focus({preventScroll:!0})}}})}function o(l){return le(this,null,function*(){yield ir(),!l.defaultPrevented&&N0(l)&&n.onItemLeave(l)})}return(l,d)=>(T(),he(y(i),{value:{textValue:l.textValue}},{default:D(()=>[b(y(Vi),Ct({ref:y(r),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":a.value?"":void 0,onPointermove:s,onPointerleave:o,onFocus:d[0]||(d[0]=c=>le(this,null,function*(){yield ir(),!(c.defaultPrevented||l.disabled)&&(a.value=!0)})),onBlur:d[1]||(d[1]=c=>le(this,null,function*(){yield ir(),!c.defaultPrevented&&(a.value=!1)}))}),{default:D(()=>[Ye(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),vK=Kge,Xge=Ze({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:i,currentElement:a}=dn(),s=lb(),o=yR(),l=Q(!1);function d(){return le(this,null,function*(){const c=a.value;if(!n.disabled&&c){const f=new CustomEvent(Hhe,{bubbles:!0,cancelable:!0});r("select",f),yield ir(),f.defaultPrevented?l.value=!1:s.onClose()}})}return(c,f)=>(T(),he(vK,Ct(n,{ref:y(i),onClick:d,onPointerdown:f[0]||(f[0]=()=>{l.value=!0}),onPointerup:f[1]||(f[1]=p=>le(this,null,function*(){var h;yield ir(),!p.defaultPrevented&&(l.value||(h=p.currentTarget)==null||h.click())})),onKeydown:f[2]||(f[2]=p=>le(this,null,function*(){const h=y(o).searchRef.value!=="";c.disabled||h&&p.key===" "||y(uE).includes(p.key)&&(p.currentTarget.click(),p.preventDefault())}))}),{default:D(()=>[Ye(c.$slots,"default")]),_:3},16))}}),Zge=Xge,Qge=Ze({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,i=Hl(n,r),a=ah(),{forwardRef:s,currentElement:o}=dn();return sR(o),(l,d)=>(T(),he(bR,Ct(y(i),{ref:y(s),"trap-focus":y(a).open.value,"disable-outside-pointer-events":y(a).open.value,"disable-outside-scroll":!0,onDismiss:d[0]||(d[0]=c=>y(a).onOpenChange(!1)),onFocusOutside:d[1]||(d[1]=dt(c=>r("focusOutside",c),["prevent"]))}),{default:D(()=>[Ye(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),Jge=Qge,eve=Ze({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const i=Hl(t,e),a=ah();return(s,o)=>(T(),he(bR,Ct(y(i),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:o[0]||(o[0]=l=>y(a).onOpenChange(!1))}),{default:D(()=>[Ye(s.$slots,"default")]),_:3},16))}}),tve=eve,nve=Ze({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const i=Hl(t,e),a=ah(),s=lb();return(o,l)=>(T(),he(y(Mg),{present:o.forceMount||y(a).open.value},{default:D(()=>[y(s).modal.value?(T(),he(Jge,Tr(Ct({key:0},me(me({},o.$attrs),y(i)))),{default:D(()=>[Ye(o.$slots,"default")]),_:3},16)):(T(),he(tve,Tr(Ct({key:1},me(me({},o.$attrs),y(i)))),{default:D(()=>[Ye(o.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),rve=nve,ive=Ze({__name:"MenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(t){const e=t;return(n,r)=>(T(),he(y(Vi),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),ave=ive,sve=Ze({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(y(KS),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),ove=sve;const[yK,lve]=Xa("MenuSub");var uve=Ze({__name:"MenuSub",props:{open:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(t,{emit:e}){const n=t,i=cd(n,"open",e,{defaultValue:!1,passive:n.open===void 0}),a=ah(),s=Q(),o=Q();return Br(l=>{(a==null?void 0:a.open.value)===!1&&(i.value=!1),l(()=>i.value=!1)}),gK({open:i,onOpenChange:l=>{i.value=l},content:o,onContentChange:l=>{o.value=l}}),lve({triggerId:"",contentId:"",trigger:s,onTriggerChange:l=>{s.value=l}}),(l,d)=>(T(),he(y(XS),null,{default:D(()=>[Ye(l.$slots,"default")]),_:3}))}}),dve=uve,cve=Ze({__name:"MenuSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1,default:!0},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const i=Hl(t,e),a=ah(),s=lb(),o=yK(),{forwardRef:l,currentElement:d}=dn();return o.contentId||(o.contentId=Ac(void 0,"reka-menu-sub-content")),(c,f)=>(T(),he(y(Mg),{present:c.forceMount||y(a).open.value},{default:D(()=>[b(bR,Ct(y(i),{id:y(o).contentId,ref:y(l),"aria-labelledby":y(o).triggerId,align:"start",side:y(s).dir.value==="rtl"?"left":"right","disable-outside-pointer-events":!1,"disable-outside-scroll":!1,"trap-focus":!1,onOpenAutoFocus:f[0]||(f[0]=dt(p=>{var h;y(s).isUsingKeyboardRef.value&&((h=y(d))==null||h.focus())},["prevent"])),onCloseAutoFocus:f[1]||(f[1]=dt(()=>{},["prevent"])),onFocusOutside:f[2]||(f[2]=p=>{p.defaultPrevented||p.target!==y(o).trigger.value&&y(a).onOpenChange(!1)}),onEscapeKeyDown:f[3]||(f[3]=p=>{y(s).onClose(),p.preventDefault()}),onKeydown:f[4]||(f[4]=p=>{var g,v;const h=(g=p.currentTarget)==null?void 0:g.contains(p.target),m=y(Yhe)[y(s).dir.value].includes(p.key);h&&m&&(y(a).onOpenChange(!1),(v=y(o).trigger.value)==null||v.focus(),p.preventDefault())})}),{default:D(()=>[Ye(c.$slots,"default")]),_:3},16,["id","aria-labelledby","side"])]),_:3},8,["present"]))}}),fve=cve,pve=Ze({__name:"MenuSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,n=ah(),r=lb(),i=yK(),a=yR(),s=Q(null);i.triggerId||(i.triggerId=Ac(void 0,"reka-menu-sub-trigger"));function o(){s.value&&window.clearTimeout(s.value),s.value=null}Pi(()=>{o()});function l(f){!N0(f)||a.onItemEnter(f)||!e.disabled&&!n.open.value&&!s.value&&(a.onPointerGraceIntentChange(null),s.value=window.setTimeout(()=>{n.onOpenChange(!0),o()},100))}function d(f){return le(this,null,function*(){var h,m;if(!N0(f))return;o();const p=(h=n.content.value)==null?void 0:h.getBoundingClientRect();if(p!=null&&p.width){const g=(m=n.content.value)==null?void 0:m.dataset.side,v=g==="right",_=v?-5:5,x=p[v?"left":"right"],w=p[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x,y:p.top},{x:w,y:p.top},{x:w,y:p.bottom},{x,y:p.bottom}],side:g}),window.clearTimeout(a.pointerGraceTimerRef.value),a.pointerGraceTimerRef.value=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f))return;a.onPointerGraceIntentChange(null)}})}function c(f){return le(this,null,function*(){var h;const p=a.searchRef.value!=="";e.disabled||p&&f.key===" "||Ghe[r.dir.value].includes(f.key)&&(n.onOpenChange(!0),yield ir(),(h=n.content.value)==null||h.focus(),f.preventDefault())})}return(f,p)=>(T(),he(mK,{"as-child":""},{default:D(()=>[b(vK,Ct(e,{id:y(i).triggerId,ref:h=>{var m;(m=y(i))==null||m.onTriggerChange(h==null?void 0:h.$el)},"aria-haspopup":"menu","aria-expanded":y(n).open.value,"aria-controls":y(i).contentId,"data-state":y(lR)(y(n).open.value),onClick:p[0]||(p[0]=h=>le(this,null,function*(){e.disabled||h.defaultPrevented||(h.currentTarget.focus(),y(n).open.value||y(n).onOpenChange(!0))})),onPointermove:l,onPointerleave:d,onKeydown:c}),{default:D(()=>[Ye(f.$slots,"default")]),_:3},16,["id","aria-expanded","aria-controls","data-state"])]),_:3}))}}),hve=pve;const[ub,mve]=Xa("PopoverRoot");var gve=Ze({__name:"PopoverRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},modal:{type:Boolean,required:!1,default:!1}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e,{modal:i}=Zs(n),a=cd(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),s=Q(),o=Q(!1);return mve({contentId:"",triggerId:"",modal:i,open:a,onOpenChange:l=>{a.value=l},onOpenToggle:()=>{a.value=!a.value},triggerElement:s,hasCustomAnchor:o}),(l,d)=>(T(),he(y(XS),null,{default:D(()=>[Ye(l.$slots,"default",{open:y(a),close:()=>a.value=!1})]),_:3}))}}),vve=gve,yve=Ze({__name:"PopoverAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;dn();const n=ub();return dG(()=>{n.hasCustomAnchor.value=!0}),Pi(()=>{n.hasCustomAnchor.value=!1}),(r,i)=>(T(),he(y(uR),Tr(Xr(e)),{default:D(()=>[Ye(r.$slots,"default")]),_:3},16))}}),bve=yve,_ve=Ze({__name:"PopoverContentImpl",props:{trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,i=aR(Hpe(n,"trapFocus","disableOutsidePointerEvents")),{forwardRef:a}=dn(),s=ub();return GY(),(o,l)=>(T(),he(y(oR),{"as-child":"",loop:"",trapped:o.trapFocus,onMountAutoFocus:l[5]||(l[5]=d=>r("openAutoFocus",d)),onUnmountAutoFocus:l[6]||(l[6]=d=>r("closeAutoFocus",d))},{default:D(()=>[b(y(YS),{"as-child":"","disable-outside-pointer-events":o.disableOutsidePointerEvents,onPointerDownOutside:l[0]||(l[0]=d=>r("pointerDownOutside",d)),onInteractOutside:l[1]||(l[1]=d=>r("interactOutside",d)),onEscapeKeyDown:l[2]||(l[2]=d=>r("escapeKeyDown",d)),onFocusOutside:l[3]||(l[3]=d=>r("focusOutside",d)),onDismiss:l[4]||(l[4]=d=>y(s).onOpenChange(!1))},{default:D(()=>[b(y(vR),Ct(y(i),{id:y(s).contentId,ref:y(a),"data-state":y(s).open.value?"open":"closed","aria-labelledby":y(s).triggerId,style:{"--reka-popover-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-popover-content-available-width":"var(--reka-popper-available-width)","--reka-popover-content-available-height":"var(--reka-popper-available-height)","--reka-popover-trigger-width":"var(--reka-popper-anchor-width)","--reka-popover-trigger-height":"var(--reka-popper-anchor-height)"},role:"dialog"}),{default:D(()=>[Ye(o.$slots,"default")]),_:3},16,["id","data-state","aria-labelledby"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),bK=_ve,xve=Ze({__name:"PopoverContentModal",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,i=ub(),a=Q(!1);rR(!0);const s=Hl(n,r),{forwardRef:o,currentElement:l}=dn();return sR(l),(d,c)=>(T(),he(bK,Ct(y(s),{ref:y(o),"trap-focus":y(i).open.value,"disable-outside-pointer-events":"",onCloseAutoFocus:c[0]||(c[0]=dt(f=>{var p;r("closeAutoFocus",f),a.value||(p=y(i).triggerElement.value)==null||p.focus()},["prevent"])),onPointerDownOutside:c[1]||(c[1]=f=>{r("pointerDownOutside",f);const p=f.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0,m=p.button===2||h;a.value=m}),onFocusOutside:c[2]||(c[2]=dt(()=>{},["prevent"]))}),{default:D(()=>[Ye(d.$slots,"default")]),_:3},16,["trap-focus"]))}}),wve=xve,kve=Ze({__name:"PopoverContentNonModal",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,i=ub(),a=Q(!1),s=Q(!1),o=Hl(n,r);return(l,d)=>(T(),he(bK,Ct(y(o),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:d[0]||(d[0]=c=>{var f;r("closeAutoFocus",c),c.defaultPrevented||(a.value||(f=y(i).triggerElement.value)==null||f.focus(),c.preventDefault()),a.value=!1,s.value=!1}),onInteractOutside:d[1]||(d[1]=c=>le(this,null,function*(){var h;r("interactOutside",c),c.defaultPrevented||(a.value=!0,c.detail.originalEvent.type==="pointerdown"&&(s.value=!0));const f=c.target;((h=y(i).triggerElement.value)==null?void 0:h.contains(f))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&s.value&&c.preventDefault()}))}),{default:D(()=>[Ye(l.$slots,"default")]),_:3},16))}}),Sve=kve,Cve=Ze({__name:"PopoverContent",props:{forceMount:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,i=ub(),a=Hl(n,r),{forwardRef:s}=dn();return i.contentId||(i.contentId=Ac(void 0,"reka-popover-content")),(o,l)=>(T(),he(y(Mg),{present:o.forceMount||y(i).open.value},{default:D(()=>[y(i).modal.value?(T(),he(wve,Ct({key:0},y(a),{ref:y(s)}),{default:D(()=>[Ye(o.$slots,"default")]),_:3},16)):(T(),he(Sve,Ct({key:1},y(a),{ref:y(s)}),{default:D(()=>[Ye(o.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Ave=Cve,Tve=Ze({__name:"PopoverPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(y(KS),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),Eve=Tve;const[_K,Mve]=Xa("DropdownMenuRoot");var $ve=Ze({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e;dn();const i=cd(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),a=Q(),{modal:s,dir:o}=Zs(n),l=iR(o);return Mve({open:i,onOpenChange:d=>{i.value=d},onOpenToggle:()=>{i.value=!i.value},triggerId:"",triggerElement:a,contentId:"",modal:s,dir:l}),(d,c)=>(T(),he(y(Wge),{open:y(i),"onUpdate:open":c[0]||(c[0]=f=>Bn(i)?i.value=f:null),dir:y(l),modal:y(s)},{default:D(()=>[Ye(d.$slots,"default",{open:y(i)})]),_:3},8,["open","dir","modal"]))}}),Dve=$ve,Rve=Ze({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:e}){const i=Hl(t,e);dn();const a=_K(),s=Q(!1);function o(l){l.defaultPrevented||(s.value||setTimeout(()=>{var d;(d=a.triggerElement.value)==null||d.focus()},0),s.value=!1,l.preventDefault())}return a.contentId||(a.contentId=Ac(void 0,"reka-dropdown-menu-content")),(l,d)=>{var c;return T(),he(y(rve),Ct(y(i),{id:y(a).contentId,"aria-labelledby":(c=y(a))==null?void 0:c.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:o,onInteractOutside:d[0]||(d[0]=f=>{var g;if(f.defaultPrevented)return;const p=f.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0,m=p.button===2||h;(!y(a).modal.value||m)&&(s.value=!0),(g=y(a).triggerElement.value)!=null&&g.contains(f.target)&&f.preventDefault()})}),{default:D(()=>[Ye(l.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),Pve=Rve,Ive=Ze({__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,i=sb(e);return dn(),(a,s)=>(T(),he(y(Zge),Tr(Xr(me(me({},n),y(i)))),{default:D(()=>[Ye(a.$slots,"default")]),_:3},16))}}),x8=Ive,Ove=Ze({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return dn(),(n,r)=>(T(),he(y(ave),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),w8=Ove,Lve=Ze({__name:"DropdownMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(y(ove),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),k8=Lve,Vve=Ze({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(t,{emit:e}){var a;const n=t,i=cd(n,"open",e,{passive:n.open===void 0,defaultValue:(a=n.defaultOpen)!=null?a:!1});return dn(),(s,o)=>(T(),he(y(dve),{open:y(i),"onUpdate:open":o[0]||(o[0]=l=>Bn(i)?i.value=l:null)},{default:D(()=>[Ye(s.$slots,"default",{open:y(i)})]),_:3},8,["open"]))}}),Nve=Vve,jve=Ze({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const i=Hl(t,e);return dn(),(a,s)=>(T(),he(y(fve),Ct(y(i),{style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:D(()=>[Ye(a.$slots,"default")]),_:3},16))}}),Fve=jve,Bve=Ze({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return dn(),(n,r)=>(T(),he(y(hve),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),zve=Bve,Uve=Ze({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=_K(),{forwardRef:r,currentElement:i}=dn();return bt(()=>{n.triggerElement=i}),n.triggerId||(n.triggerId=Ac(void 0,"reka-dropdown-menu-trigger")),(a,s)=>(T(),he(y(mK),{"as-child":""},{default:D(()=>[b(y(Vi),{id:y(n).triggerId,ref:y(r),type:a.as==="button"?"button":void 0,"as-child":e.asChild,as:a.as,"aria-haspopup":"menu","aria-expanded":y(n).open.value,"aria-controls":y(n).open.value?y(n).contentId:void 0,"data-disabled":a.disabled?"":void 0,disabled:a.disabled,"data-state":y(n).open.value?"open":"closed",onClick:s[0]||(s[0]=o=>le(this,null,function*(){var l;!a.disabled&&o.button===0&&o.ctrlKey===!1&&((l=y(n))==null||l.onOpenToggle(),yield ir(),y(n).open.value&&o.preventDefault())})),onKeydown:s[1]||(s[1]=Eu(o=>{a.disabled||(["Enter"," "].includes(o.key)&&y(n).onOpenToggle(),o.key==="ArrowDown"&&y(n).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())},["enter","space","arrow-down"]))},{default:D(()=>[Ye(a.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),Hve=Uve;const[qve,Wve]=Xa("SwitchRoot");var Gve=Ze({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{disabled:i}=Zs(n),a=cd(n,"modelValue",r,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function s(){i.value||(a.value=!a.value)}const{forwardRef:o,currentElement:l}=dn(),d=ohe(l),c=J(()=>{var f;return n.id&&l.value?(f=document.querySelector(`[for="${n.id}"]`))==null?void 0:f.innerText:void 0});return Wve({modelValue:a,toggleCheck:s,disabled:i}),(f,p)=>(T(),he(y(Vi),Ct(f.$attrs,{id:f.id,ref:y(o),role:"switch",type:f.as==="button"?"button":void 0,value:f.value,"aria-label":f.$attrs["aria-label"]||c.value,"aria-checked":y(a),"aria-required":f.required,"data-state":y(a)?"checked":"unchecked","data-disabled":y(i)?"":void 0,"as-child":f.asChild,as:f.as,disabled:y(i),onClick:s,onKeydown:Eu(dt(s,["prevent"]),["enter"])}),{default:D(()=>[Ye(f.$slots,"default",{modelValue:y(a)}),y(d)&&f.name?(T(),he(y(kme),{key:0,type:"checkbox",name:f.name,disabled:y(i),required:f.required,value:f.value,checked:!!y(a)},null,8,["name","disabled","required","value","checked"])):ie("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),Yve=Gve,Kve=Ze({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=qve();return dn(),(n,r)=>{var i;return T(),he(y(Vi),{"data-state":(i=y(e).modelValue)!=null&&i.value?"checked":"unchecked","data-disabled":y(e).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:D(()=>[Ye(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),Xve=Kve,Zve=Ze({__name:"TooltipArrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(t){const e=t;return dn(),(n,r)=>(T(),he(y(Fge),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),Qve=Zve;const[_R,Jve]=Xa("TooltipProvider");var eye=Ze({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{type:Number,required:!1,default:700},skipDelayDuration:{type:Number,required:!1,default:300},disableHoverableContent:{type:Boolean,required:!1,default:!1},disableClosingTrigger:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:!1}},setup(t){const e=t,{delayDuration:n,skipDelayDuration:r,disableHoverableContent:i,disableClosingTrigger:a,ignoreNonKeyboardFocus:s,disabled:o}=Zs(e);dn();const l=Q(!0),d=Q(!1),{start:c,stop:f}=qY(()=>{l.value=!0},r,{immediate:!1});return Jve({isOpenDelayed:l,delayDuration:n,onOpen(){f(),l.value=!1},onClose(){c()},isPointerInTransitRef:d,disableHoverableContent:i,disableClosingTrigger:a,disabled:o,ignoreNonKeyboardFocus:s}),(p,h)=>Ye(p.$slots,"default")}}),tye=eye;const xK="tooltip.open",[tC,nye]=Xa("TooltipRoot");var rye=Ze({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},delayDuration:{type:Number,required:!1,default:void 0},disableHoverableContent:{type:Boolean,required:!1,default:void 0},disableClosingTrigger:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e;dn();const i=_R(),a=J(()=>{var w;return(w=n.disableHoverableContent)!=null?w:i.disableHoverableContent.value}),s=J(()=>{var w;return(w=n.disableClosingTrigger)!=null?w:i.disableClosingTrigger.value}),o=J(()=>{var w;return(w=n.disabled)!=null?w:i.disabled.value}),l=J(()=>{var w;return(w=n.delayDuration)!=null?w:i.delayDuration.value}),d=J(()=>{var w;return(w=n.ignoreNonKeyboardFocus)!=null?w:i.ignoreNonKeyboardFocus.value}),c=cd(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0});Je(c,w=>{i.onClose&&(w?(i.onOpen(),document.dispatchEvent(new CustomEvent(xK))):i.onClose())});const f=Q(!1),p=Q(),h=J(()=>c.value?f.value?"delayed-open":"instant-open":"closed"),{start:m,stop:g}=qY(()=>{f.value=!0,c.value=!0},l,{immediate:!1});function v(){g(),f.value=!1,c.value=!0}function _(){g(),c.value=!1}function x(){m()}return nye({contentId:"",open:c,stateAttribute:h,trigger:p,onTriggerChange(w){p.value=w},onTriggerEnter(){i.isOpenDelayed.value?x():v()},onTriggerLeave(){a.value?_():g()},onOpen:v,onClose:_,disableHoverableContent:a,disableClosingTrigger:s,disabled:o,ignoreNonKeyboardFocus:d}),(w,k)=>(T(),he(y(XS),null,{default:D(()=>[Ye(w.$slots,"default",{open:y(c)})]),_:3}))}}),iye=rye,aye=Ze({__name:"TooltipContentImpl",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1,default:0},align:{type:null,required:!1,default:"center"},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},arrowPadding:{type:Number,required:!1,default:0},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,r=e,i=tC(),{forwardRef:a}=dn(),s=OS(),o=J(()=>{var c;return(c=s.default)==null?void 0:c.call(s,{})}),l=J(()=>{var p;if(n.ariaLabel)return n.ariaLabel;let c="";function f(h){typeof h.children=="string"&&h.type!==pi?c+=h.children:Array.isArray(h.children)&&h.children.forEach(m=>f(m))}return(p=o.value)==null||p.forEach(h=>f(h)),c}),d=J(()=>{const p=n,{ariaLabel:c}=p;return Si(p,["ariaLabel"])});return bt(()=>{eg(window,"scroll",c=>{const f=c.target;f!=null&&f.contains(i.trigger.value)&&i.onClose()}),eg(window,xK,i.onClose)}),(c,f)=>(T(),he(y(YS),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:f[0]||(f[0]=p=>r("escapeKeyDown",p)),onPointerDownOutside:f[1]||(f[1]=p=>{var h;y(i).disableClosingTrigger.value&&((h=y(i).trigger.value)!=null&&h.contains(p.target))&&p.preventDefault(),r("pointerDownOutside",p)}),onFocusOutside:f[2]||(f[2]=dt(()=>{},["prevent"])),onDismiss:f[3]||(f[3]=p=>y(i).onClose())},{default:D(()=>[b(y(vR),Ct({ref:y(a),"data-state":y(i).stateAttribute.value},me(me({},c.$attrs),d.value),{style:{"--reka-tooltip-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-tooltip-content-available-width":"var(--reka-popper-available-width)","--reka-tooltip-content-available-height":"var(--reka-popper-available-height)","--reka-tooltip-trigger-width":"var(--reka-popper-anchor-width)","--reka-tooltip-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:D(()=>[Ye(c.$slots,"default"),b(y(nK),{id:y(i).contentId,role:"tooltip"},{default:D(()=>[W(E(l.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),wK=aye,sye=Ze({__name:"TooltipContentHoverable",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},setup(t){const n=aR(t),{forwardRef:r,currentElement:i}=dn(),{trigger:a,onClose:s}=tC(),o=_R(),{isPointerInTransit:l,onPointerExit:d}=lhe(a,i);return o.isPointerInTransitRef=l,d(()=>{s()}),(c,f)=>(T(),he(wK,Ct({ref:y(r)},y(n)),{default:D(()=>[Ye(c.$slots,"default")]),_:3},16))}}),oye=sye,lye=Ze({__name:"TooltipContent",props:{forceMount:{type:Boolean,required:!1},ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,r=e,i=tC(),a=Hl(n,r),{forwardRef:s}=dn();return(o,l)=>(T(),he(y(Mg),{present:o.forceMount||y(i).open.value},{default:D(()=>[(T(),he(Lt(y(i).disableHoverableContent.value?wK:oye),Ct({ref:y(s)},y(a)),{default:D(()=>[Ye(o.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),uye=lye,dye=Ze({__name:"TooltipPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(y(KS),Tr(Xr(e)),{default:D(()=>[Ye(n.$slots,"default")]),_:3},16))}}),cye=dye,fye=Ze({__name:"TooltipTrigger",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=tC(),r=_R();n.contentId||(n.contentId=Ac(void 0,"reka-tooltip-content"));const{forwardRef:i,currentElement:a}=dn(),s=Q(!1),o=Q(!1),l=J(()=>n.disabled.value?{}:{click:g,focus:h,pointermove:f,pointerleave:p,pointerdown:c,blur:m});bt(()=>{n.onTriggerChange(a.value)});function d(){setTimeout(()=>{s.value=!1},1)}function c(){n.open&&!n.disableClosingTrigger.value&&n.onClose(),s.value=!0,document.addEventListener("pointerup",d,{once:!0})}function f(v){v.pointerType!=="touch"&&!o.value&&!r.isPointerInTransitRef.value&&(n.onTriggerEnter(),o.value=!0)}function p(){n.onTriggerLeave(),o.value=!1}function h(v){var _,x;s.value||n.ignoreNonKeyboardFocus.value&&!((x=(_=v.target).matches)!=null&&x.call(_,":focus-visible"))||n.onOpen()}function m(){n.onClose()}function g(){n.disableClosingTrigger.value||n.onClose()}return(v,_)=>(T(),he(y(uR),{"as-child":"",reference:v.reference},{default:D(()=>[b(y(Vi),Ct({ref:y(i),"aria-describedby":y(n).open.value?y(n).contentId:void 0,"data-state":y(n).stateAttribute.value,as:v.as,"as-child":e.asChild,"data-grace-area-trigger":""},iue(l.value)),{default:D(()=>[Ye(v.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3},8,["reference"]))}}),pye=fye;const hye={class:"rounded-lg border bg-surface-modal shadow-xl"},kK=Ze({inheritAttrs:!1,__name:"Popover",props:{show:{type:Boolean,default:void 0},trigger:{default:"click"},hoverDelay:{default:0},leaveDelay:{default:.5},placement:{default:"bottom-start"},popoverClass:{default:""},transition:{default:null},hideOnBlur:{type:Boolean,default:!0},matchTargetWidth:{type:Boolean}},emits:["open","close","update:show"],setup(t,{expose:e,emit:n}){const r=t,i=n;e({open:v,close:_});const a=Q(!1),s=Q(!1),o=Q(null),l=Q(null),d=Q(null),c=J({get:()=>f.value?r.show:a.value,set:A=>{f.value||(a.value=A),i("update:show",A)}}),f=J(()=>r.show!==void 0),p=J(()=>{const[A]=r.placement.split("-");return A}),h=J(()=>{const[,A]=r.placement.split("-");return A||"center"});function m(A){A instanceof Event&&(A=void 0),A==null&&(A=!c.value),A=!!A,A?v():_()}function g(){}function v(){c.value=!0}function _(){c.value=!1}function x(A){i("update:show",A),i(A?"open":"close")}function w(){s.value=!0,l.value&&(clearTimeout(l.value),l.value=null),r.trigger==="hover"&&(r.hoverDelay?o.value=setTimeout(()=>{s.value&&v()},Number(r.hoverDelay)*1e3):v())}function k(){s.value=!1,o.value&&(clearTimeout(o.value),o.value=null),r.trigger==="hover"&&(l.value&&clearTimeout(l.value),r.leaveDelay?l.value=setTimeout(()=>{s.value||_()},Number(r.leaveDelay)*1e3):s.value||_())}function S(A){if(!r.hideOnBlur){A.preventDefault();return}const M=A.target;if(d.value&&(d.value.contains(M)||d.value===M)){A.preventDefault();return}}const C=J(()=>r.transition==="default");return Pi(()=>{o.value&&clearTimeout(o.value),l.value&&clearTimeout(l.value)}),(A,M)=>(T(),he(y(vve),{open:c.value,"onUpdate:open":[M[1]||(M[1]=$=>c.value=$),x]},{default:D(()=>[b(y(bve),{asChild:""},{default:D(()=>[u("div",{ref_key:"anchorRef",ref:d,class:fe(["flex",A.$attrs.class]),onMouseover:w,onMouseleave:k},[Ye(A.$slots,"target",Tr(Xr({togglePopover:m,updatePosition:g,open:v,close:_,isOpen:c.value})))],34)]),_:3}),b(y(Eve),null,{default:D(()=>[b(y(Ave),{side:p.value,align:h.value,style:nt({minWidth:t.matchTargetWidth?"var(--reka-popover-trigger-width)":void 0}),class:fe(["PopoverContent",{"has-transition":C.value}]),onMouseover:M[0]||(M[0]=()=>{s.value=!0}),onMouseleave:k,onInteractOutside:S},{default:D(()=>[u("div",{class:fe(["relative",["body-container",t.popoverClass]])},[Ye(A.$slots,"body",Tr(Xr({togglePopover:m,updatePosition:g,open:v,close:_,isOpen:c.value})),()=>[u("div",hye,[Ye(A.$slots,"body-main",Tr(Xr({togglePopover:m,updatePosition:g,open:v,close:_,isOpen:c.value})))])])],2)]),_:3},8,["side","align","style","class"])]),_:3})]),_:3},8,["open"]))}});var mye=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function SK(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var CK={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(typeof self!="undefined"?self:mye,function(){return function(n){var r={};function i(a){if(r[a])return r[a].exports;var s=r[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=r,i.d=function(a,s,o){i.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:o})},i.r=function(a){Object.defineProperty(a,"__esModule",{value:!0})},i.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(s,"a",s),s},i.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},i.p="",i(i.s=0)}({"./dist/icons.json":function(n){n.exports={activity:'<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',airplay:'<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon>',"alert-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',"align-center":'<line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line>',"align-justify":'<line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line>',"align-left":'<line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line>',"align-right":'<line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line>',anchor:'<circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>',aperture:'<circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',"arrow-down-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line>',"arrow-down-left":'<line x1="17" y1="7" x2="7" y2="17"></line><polyline points="17 17 7 17 7 7"></polyline>',"arrow-down-right":'<line x1="7" y1="7" x2="17" y2="17"></line><polyline points="17 7 17 17 7 17"></polyline>',"arrow-down":'<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',"arrow-left-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',"arrow-left":'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',"arrow-right-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',"arrow-right":'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',"arrow-up-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line>',"arrow-up-left":'<line x1="17" y1="17" x2="7" y2="7"></line><polyline points="7 17 7 7 17 7"></polyline>',"arrow-up-right":'<line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline>',"arrow-up":'<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',"at-sign":'<circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>',award:'<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',"bar-chart-2":'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',"bar-chart":'<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',"battery-charging":'<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',battery:'<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',"bell-off":'<path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line>',bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',bluetooth:'<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',bold:'<path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>',"book-open":'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',book:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',bookmark:'<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',box:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',calendar:'<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',"camera-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"></path>',camera:'<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',cast:'<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line>',"check-circle":'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',"check-square":'<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',check:'<polyline points="20 6 9 17 4 12"></polyline>',"chevron-down":'<polyline points="6 9 12 15 18 9"></polyline>',"chevron-left":'<polyline points="15 18 9 12 15 6"></polyline>',"chevron-right":'<polyline points="9 18 15 12 9 6"></polyline>',"chevron-up":'<polyline points="18 15 12 9 6 15"></polyline>',"chevrons-down":'<polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline>',"chevrons-left":'<polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline>',"chevrons-right":'<polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline>',"chevrons-up":'<polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline>',chrome:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="21.17" y1="8" x2="12" y2="8"></line><line x1="3.95" y1="6.06" x2="8.54" y2="14"></line><line x1="10.88" y1="21.94" x2="15.46" y2="14"></line>',circle:'<circle cx="12" cy="12" r="10"></circle>',clipboard:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',clock:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',"cloud-drizzle":'<line x1="8" y1="19" x2="8" y2="21"></line><line x1="8" y1="13" x2="8" y2="15"></line><line x1="16" y1="19" x2="16" y2="21"></line><line x1="16" y1="13" x2="16" y2="15"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="12" y1="15" x2="12" y2="17"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-lightning":'<path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline>',"cloud-off":'<path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path><line x1="1" y1="1" x2="23" y2="23"></line>',"cloud-rain":'<line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-snow":'<path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="16" x2="8.01" y2="16"></line><line x1="8" y1="20" x2="8.01" y2="20"></line><line x1="12" y1="18" x2="12.01" y2="18"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="16" y1="16" x2="16.01" y2="16"></line><line x1="16" y1="20" x2="16.01" y2="20"></line>',cloud:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',code:'<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',codepen:'<polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"></polygon><line x1="12" y1="22" x2="12" y2="15.5"></line><polyline points="22 8.5 12 15.5 2 8.5"></polyline><polyline points="2 15.5 12 8.5 22 15.5"></polyline><line x1="12" y1="2" x2="12" y2="8.5"></line>',codesandbox:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',columns:'<path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>',command:'<path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>',compass:'<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',copy:'<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',"corner-down-left":'<polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path>',"corner-down-right":'<polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',"corner-left-down":'<polyline points="14 15 9 20 4 15"></polyline><path d="M20 4h-7a4 4 0 0 0-4 4v12"></path>',"corner-left-up":'<polyline points="14 9 9 4 4 9"></polyline><path d="M20 20h-7a4 4 0 0 1-4-4V4"></path>',"corner-right-down":'<polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>',"corner-right-up":'<polyline points="10 9 15 4 20 9"></polyline><path d="M4 20h7a4 4 0 0 0 4-4V4"></path>',"corner-up-left":'<polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>',"corner-up-right":'<polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>',cpu:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line>',"credit-card":'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',crop:'<path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path>',crosshair:'<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',database:'<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',delete:'<path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line>',disc:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle>',"divide-circle":'<line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line><circle cx="12" cy="12" r="10"></circle>',"divide-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line>',divide:'<circle cx="12" cy="6" r="2"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="2"></circle>',"dollar-sign":'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',"download-cloud":'<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',dribbble:'<circle cx="12" cy="12" r="10"></circle><path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32"></path>',droplet:'<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>',"edit-2":'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',"edit-3":'<path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>',edit:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',"external-link":'<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',"eye-off":'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>',eye:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',facebook:'<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>',"fast-forward":'<polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon>',feather:'<path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line>',figma:'<path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"></path><path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"></path><path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"></path><path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"></path><path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"></path>',"file-minus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line>',"file-plus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line>',"file-text":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',file:'<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',film:'<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',filter:'<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',flag:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',"folder-minus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line>',"folder-plus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line>',folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',framer:'<path d="M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7"></path>',frown:'<circle cx="12" cy="12" r="10"></circle><path d="M16 16s-1.5-2-4-2-4 2-4 2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',gift:'<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',"git-branch":'<line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path>',"git-commit":'<circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line>',"git-merge":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M6 21V9a9 9 0 0 0 9 9"></path>',"git-pull-request":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line>',github:'<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',gitlab:'<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>',globe:'<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',grid:'<rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>',"hard-drive":'<line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line>',hash:'<line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>',headphones:'<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',"help-circle":'<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',hexagon:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>',home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',inbox:'<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',instagram:'<rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>',italic:'<line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line>',key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',layers:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',layout:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',"life-buoy":'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line>',"link-2":'<path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line>',link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',linkedin:'<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',list:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',loader:'<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',"log-in":'<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',"log-out":'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',mail:'<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',"map-pin":'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',map:'<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line>',"maximize-2":'<polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line>',maximize:'<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',meh:'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',menu:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',"message-circle":'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',"message-square":'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',"mic-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',mic:'<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',"minimize-2":'<polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>',minimize:'<path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>',"minus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line>',"minus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',minus:'<line x1="5" y1="12" x2="19" y2="12"></line>',monitor:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',moon:'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',"more-horizontal":'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',"more-vertical":'<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',"mouse-pointer":'<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path>',move:'<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',"navigation-2":'<polygon points="12 2 19 21 12 17 5 21 12 2"></polygon>',navigation:'<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',octagon:'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>',package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',paperclip:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',"pause-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',"pen-tool":'<path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle>',percent:'<line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle>',"phone-call":'<path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-forwarded":'<polyline points="19 1 23 5 19 9"></polyline><line x1="15" y1="5" x2="23" y2="5"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-incoming":'<polyline points="16 2 16 8 22 8"></polyline><line x1="23" y1="1" x2="16" y2="8"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-missed":'<line x1="23" y1="1" x2="17" y2="7"></line><line x1="17" y1="1" x2="23" y2="7"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-off":'<path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path><line x1="23" y1="1" x2="1" y2="23"></line>',"phone-outgoing":'<polyline points="23 7 23 1 17 1"></polyline><line x1="16" y1="8" x2="23" y2="1"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"pie-chart":'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',"play-circle":'<circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon>',play:'<polygon points="5 3 19 12 5 21 5 3"></polygon>',"plus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',"plus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',plus:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',pocket:'<path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path><polyline points="8 10 12 14 16 10"></polyline>',power:'<path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line>',printer:'<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',radio:'<circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path>',"refresh-ccw":'<polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>',"refresh-cw":'<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',repeat:'<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path>',rewind:'<polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon>',"rotate-ccw":'<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',"rotate-cw":'<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',rss:'<path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',send:'<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',server:'<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',"share-2":'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',share:'<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line>',"shield-off":'<path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line>',shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',"shopping-bag":'<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path>',"shopping-cart":'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',shuffle:'<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',sidebar:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line>',"skip-back":'<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',"skip-forward":'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',slack:'<path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path>',slash:'<circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>',sliders:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',smile:'<circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',speaker:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><circle cx="12" cy="14" r="4"></circle><line x1="12" y1="6" x2="12.01" y2="6"></line>',square:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',"stop-circle":'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',sun:'<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',sunrise:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline>',sunset:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="9" x2="12" y2="2"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="16 5 12 9 8 5"></polyline>',table:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"></path>',tablet:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',tag:'<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',target:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',terminal:'<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',thermometer:'<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',"thumbs-down":'<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',"thumbs-up":'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',"toggle-left":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle>',"toggle-right":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle>',tool:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',"trash-2":'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',trello:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>',"trending-down":'<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',"trending-up":'<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',triangle:'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>',truck:'<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',tv:'<rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline>',twitch:'<path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>',twitter:'<path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>',type:'<polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line>',umbrella:'<path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path>',underline:'<path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line>',unlock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',"upload-cloud":'<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',"user-check":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',"user-minus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="23" y1="11" x2="17" y2="11"></line>',"user-plus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',"user-x":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="18" y1="8" x2="23" y2="13"></line><line x1="23" y1="8" x2="18" y2="13"></line>',user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',"video-off":'<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',voicemail:'<circle cx="5.5" cy="11.5" r="4.5"></circle><circle cx="18.5" cy="11.5" r="4.5"></circle><line x1="5.5" y1="16" x2="18.5" y2="16"></line>',"volume-1":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-2":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-x":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',volume:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',watch:'<circle cx="12" cy="12" r="7"></circle><polyline points="12 9 12 12 13.5 13.5"></polyline><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>',"wifi-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wifi:'<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wind:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>',"x-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line>',x:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',youtube:'<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>',"zap-off":'<polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line>',zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',"zoom-in":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line>',"zoom-out":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line>'}},"./node_modules/classnames/dedupe.js":function(n,r,i){var a,s;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var o=function(){function l(){}l.prototype=Object.create(null);function d(_,x){for(var w=x.length,k=0;k<w;++k)g(_,x[k])}var c={}.hasOwnProperty;function f(_,x){_[x]=!0}function p(_,x){for(var w in x)c.call(x,w)&&(_[w]=!!x[w])}var h=/\s+/;function m(_,x){for(var w=x.split(h),k=w.length,S=0;S<k;++S)_[w[S]]=!0}function g(_,x){if(x){var w=typeof x;w==="string"?m(_,x):Array.isArray(x)?d(_,x):w==="object"?p(_,x):w==="number"&&f(_,x)}}function v(){for(var _=arguments.length,x=Array(_),w=0;w<_;w++)x[w]=arguments[w];var k=new l;d(k,x);var S=[];for(var C in k)k[C]&&S.push(C);return S.join(" ")}return v}();typeof n!="undefined"&&n.exports?n.exports=o:(a=[],s=function(){return o}.apply(r,a),s!==void 0&&(n.exports=s))})()},"./node_modules/core-js/es/array/from.js":function(n,r,i){i("./node_modules/core-js/modules/es.string.iterator.js"),i("./node_modules/core-js/modules/es.array.from.js");var a=i("./node_modules/core-js/internals/path.js");n.exports=a.Array.from},"./node_modules/core-js/internals/a-function.js":function(n,r){n.exports=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i}},"./node_modules/core-js/internals/an-object.js":function(n,r,i){var a=i("./node_modules/core-js/internals/is-object.js");n.exports=function(s){if(!a(s))throw TypeError(String(s)+" is not an object");return s}},"./node_modules/core-js/internals/array-from.js":function(n,r,i){var a=i("./node_modules/core-js/internals/bind-context.js"),s=i("./node_modules/core-js/internals/to-object.js"),o=i("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),l=i("./node_modules/core-js/internals/is-array-iterator-method.js"),d=i("./node_modules/core-js/internals/to-length.js"),c=i("./node_modules/core-js/internals/create-property.js"),f=i("./node_modules/core-js/internals/get-iterator-method.js");n.exports=function(h){var m=s(h),g=typeof this=="function"?this:Array,v=arguments.length,_=v>1?arguments[1]:void 0,x=_!==void 0,w=0,k=f(m),S,C,A,M;if(x&&(_=a(_,v>2?arguments[2]:void 0,2)),k!=null&&!(g==Array&&l(k)))for(M=k.call(m),C=new g;!(A=M.next()).done;w++)c(C,w,x?o(M,_,[A.value,w],!0):A.value);else for(S=d(m.length),C=new g(S);S>w;w++)c(C,w,x?_(m[w],w):m[w]);return C.length=w,C}},"./node_modules/core-js/internals/array-includes.js":function(n,r,i){var a=i("./node_modules/core-js/internals/to-indexed-object.js"),s=i("./node_modules/core-js/internals/to-length.js"),o=i("./node_modules/core-js/internals/to-absolute-index.js");n.exports=function(l){return function(d,c,f){var p=a(d),h=s(p.length),m=o(f,h),g;if(l&&c!=c){for(;h>m;)if(g=p[m++],g!=g)return!0}else for(;h>m;m++)if((l||m in p)&&p[m]===c)return l||m||0;return!l&&-1}}},"./node_modules/core-js/internals/bind-context.js":function(n,r,i){var a=i("./node_modules/core-js/internals/a-function.js");n.exports=function(s,o,l){if(a(s),o===void 0)return s;switch(l){case 0:return function(){return s.call(o)};case 1:return function(d){return s.call(o,d)};case 2:return function(d,c){return s.call(o,d,c)};case 3:return function(d,c,f){return s.call(o,d,c,f)}}return function(){return s.apply(o,arguments)}}},"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(n,r,i){var a=i("./node_modules/core-js/internals/an-object.js");n.exports=function(s,o,l,d){try{return d?o(a(l)[0],l[1]):o(l)}catch(f){var c=s.return;throw c!==void 0&&a(c.call(s)),f}}},"./node_modules/core-js/internals/check-correctness-of-iteration.js":function(n,r,i){var a=i("./node_modules/core-js/internals/well-known-symbol.js"),s=a("iterator"),o=!1;try{var l=0,d={next:function(){return{done:!!l++}},return:function(){o=!0}};d[s]=function(){return this},Array.from(d,function(){throw 2})}catch(c){}n.exports=function(c,f){if(!f&&!o)return!1;var p=!1;try{var h={};h[s]=function(){return{next:function(){return{done:p=!0}}}},c(h)}catch(m){}return p}},"./node_modules/core-js/internals/classof-raw.js":function(n,r){var i={}.toString;n.exports=function(a){return i.call(a).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(n,r,i){var a=i("./node_modules/core-js/internals/classof-raw.js"),s=i("./node_modules/core-js/internals/well-known-symbol.js"),o=s("toStringTag"),l=a(function(){return arguments}())=="Arguments",d=function(c,f){try{return c[f]}catch(p){}};n.exports=function(c){var f,p,h;return c===void 0?"Undefined":c===null?"Null":typeof(p=d(f=Object(c),o))=="string"?p:l?a(f):(h=a(f))=="Object"&&typeof f.callee=="function"?"Arguments":h}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(n,r,i){var a=i("./node_modules/core-js/internals/has.js"),s=i("./node_modules/core-js/internals/own-keys.js"),o=i("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),l=i("./node_modules/core-js/internals/object-define-property.js");n.exports=function(d,c){for(var f=s(c),p=l.f,h=o.f,m=0;m<f.length;m++){var g=f[m];a(d,g)||p(d,g,h(c,g))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(n,r,i){var a=i("./node_modules/core-js/internals/fails.js");n.exports=!a(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},"./node_modules/core-js/internals/create-iterator-constructor.js":function(n,r,i){var a=i("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,s=i("./node_modules/core-js/internals/object-create.js"),o=i("./node_modules/core-js/internals/create-property-descriptor.js"),l=i("./node_modules/core-js/internals/set-to-string-tag.js"),d=i("./node_modules/core-js/internals/iterators.js"),c=function(){return this};n.exports=function(f,p,h){var m=p+" Iterator";return f.prototype=s(a,{next:o(1,h)}),l(f,m,!1,!0),d[m]=c,f}},"./node_modules/core-js/internals/create-property-descriptor.js":function(n,r){n.exports=function(i,a){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:a}}},"./node_modules/core-js/internals/create-property.js":function(n,r,i){var a=i("./node_modules/core-js/internals/to-primitive.js"),s=i("./node_modules/core-js/internals/object-define-property.js"),o=i("./node_modules/core-js/internals/create-property-descriptor.js");n.exports=function(l,d,c){var f=a(d);f in l?s.f(l,f,o(0,c)):l[f]=c}},"./node_modules/core-js/internals/define-iterator.js":function(n,r,i){var a=i("./node_modules/core-js/internals/export.js"),s=i("./node_modules/core-js/internals/create-iterator-constructor.js"),o=i("./node_modules/core-js/internals/object-get-prototype-of.js"),l=i("./node_modules/core-js/internals/object-set-prototype-of.js"),d=i("./node_modules/core-js/internals/set-to-string-tag.js"),c=i("./node_modules/core-js/internals/hide.js"),f=i("./node_modules/core-js/internals/redefine.js"),p=i("./node_modules/core-js/internals/well-known-symbol.js"),h=i("./node_modules/core-js/internals/is-pure.js"),m=i("./node_modules/core-js/internals/iterators.js"),g=i("./node_modules/core-js/internals/iterators-core.js"),v=g.IteratorPrototype,_=g.BUGGY_SAFARI_ITERATORS,x=p("iterator"),w="keys",k="values",S="entries",C=function(){return this};n.exports=function(A,M,$,R,I,B,j){s($,M,R);var z=function(re){if(re===I&&V)return V;if(!_&&re in N)return N[re];switch(re){case w:return function(){return new $(this,re)};case k:return function(){return new $(this,re)};case S:return function(){return new $(this,re)}}return function(){return new $(this)}},F=M+" Iterator",q=!1,N=A.prototype,O=N[x]||N["@@iterator"]||I&&N[I],V=!_&&O||z(I),L=M=="Array"&&N.entries||O,U,G,X;if(L&&(U=o(L.call(new A)),v!==Object.prototype&&U.next&&(!h&&o(U)!==v&&(l?l(U,v):typeof U[x]!="function"&&c(U,x,C)),d(U,F,!0,!0),h&&(m[F]=C))),I==k&&O&&O.name!==k&&(q=!0,V=function(){return O.call(this)}),(!h||j)&&N[x]!==V&&c(N,x,V),m[M]=V,I)if(G={values:z(k),keys:B?V:z(w),entries:z(S)},j)for(X in G)(_||q||!(X in N))&&f(N,X,G[X]);else a({target:M,proto:!0,forced:_||q},G);return G}},"./node_modules/core-js/internals/descriptors.js":function(n,r,i){var a=i("./node_modules/core-js/internals/fails.js");n.exports=!a(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/document-create-element.js":function(n,r,i){var a=i("./node_modules/core-js/internals/global.js"),s=i("./node_modules/core-js/internals/is-object.js"),o=a.document,l=s(o)&&s(o.createElement);n.exports=function(d){return l?o.createElement(d):{}}},"./node_modules/core-js/internals/enum-bug-keys.js":function(n,r){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(n,r,i){var a=i("./node_modules/core-js/internals/global.js"),s=i("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,o=i("./node_modules/core-js/internals/hide.js"),l=i("./node_modules/core-js/internals/redefine.js"),d=i("./node_modules/core-js/internals/set-global.js"),c=i("./node_modules/core-js/internals/copy-constructor-properties.js"),f=i("./node_modules/core-js/internals/is-forced.js");n.exports=function(p,h){var m=p.target,g=p.global,v=p.stat,_,x,w,k,S,C;if(g?x=a:v?x=a[m]||d(m,{}):x=(a[m]||{}).prototype,x)for(w in h){if(S=h[w],p.noTargetGet?(C=s(x,w),k=C&&C.value):k=x[w],_=f(g?w:m+(v?".":"#")+w,p.forced),!_&&k!==void 0){if(typeof S==typeof k)continue;c(S,k)}(p.sham||k&&k.sham)&&o(S,"sham",!0),l(x,w,S,p)}}},"./node_modules/core-js/internals/fails.js":function(n,r){n.exports=function(i){try{return!!i()}catch(a){return!0}}},"./node_modules/core-js/internals/function-to-string.js":function(n,r,i){var a=i("./node_modules/core-js/internals/shared.js");n.exports=a("native-function-to-string",Function.toString)},"./node_modules/core-js/internals/get-iterator-method.js":function(n,r,i){var a=i("./node_modules/core-js/internals/classof.js"),s=i("./node_modules/core-js/internals/iterators.js"),o=i("./node_modules/core-js/internals/well-known-symbol.js"),l=o("iterator");n.exports=function(d){if(d!=null)return d[l]||d["@@iterator"]||s[a(d)]}},"./node_modules/core-js/internals/global.js":function(n,r,i){(function(a){var s="object",o=function(l){return l&&l.Math==Math&&l};n.exports=o(typeof globalThis==s&&globalThis)||o(typeof window==s&&window)||o(typeof self==s&&self)||o(typeof a==s&&a)||Function("return this")()}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./node_modules/core-js/internals/has.js":function(n,r){var i={}.hasOwnProperty;n.exports=function(a,s){return i.call(a,s)}},"./node_modules/core-js/internals/hidden-keys.js":function(n,r){n.exports={}},"./node_modules/core-js/internals/hide.js":function(n,r,i){var a=i("./node_modules/core-js/internals/descriptors.js"),s=i("./node_modules/core-js/internals/object-define-property.js"),o=i("./node_modules/core-js/internals/create-property-descriptor.js");n.exports=a?function(l,d,c){return s.f(l,d,o(1,c))}:function(l,d,c){return l[d]=c,l}},"./node_modules/core-js/internals/html.js":function(n,r,i){var a=i("./node_modules/core-js/internals/global.js"),s=a.document;n.exports=s&&s.documentElement},"./node_modules/core-js/internals/ie8-dom-define.js":function(n,r,i){var a=i("./node_modules/core-js/internals/descriptors.js"),s=i("./node_modules/core-js/internals/fails.js"),o=i("./node_modules/core-js/internals/document-create-element.js");n.exports=!a&&!s(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(n,r,i){var a=i("./node_modules/core-js/internals/fails.js"),s=i("./node_modules/core-js/internals/classof-raw.js"),o="".split;n.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return s(l)=="String"?o.call(l,""):Object(l)}:Object},"./node_modules/core-js/internals/internal-state.js":function(n,r,i){var a=i("./node_modules/core-js/internals/native-weak-map.js"),s=i("./node_modules/core-js/internals/global.js"),o=i("./node_modules/core-js/internals/is-object.js"),l=i("./node_modules/core-js/internals/hide.js"),d=i("./node_modules/core-js/internals/has.js"),c=i("./node_modules/core-js/internals/shared-key.js"),f=i("./node_modules/core-js/internals/hidden-keys.js"),p=s.WeakMap,h,m,g,v=function(A){return g(A)?m(A):h(A,{})},_=function(A){return function(M){var $;if(!o(M)||($=m(M)).type!==A)throw TypeError("Incompatible receiver, "+A+" required");return $}};if(a){var x=new p,w=x.get,k=x.has,S=x.set;h=function(A,M){return S.call(x,A,M),M},m=function(A){return w.call(x,A)||{}},g=function(A){return k.call(x,A)}}else{var C=c("state");f[C]=!0,h=function(A,M){return l(A,C,M),M},m=function(A){return d(A,C)?A[C]:{}},g=function(A){return d(A,C)}}n.exports={set:h,get:m,has:g,enforce:v,getterFor:_}},"./node_modules/core-js/internals/is-array-iterator-method.js":function(n,r,i){var a=i("./node_modules/core-js/internals/well-known-symbol.js"),s=i("./node_modules/core-js/internals/iterators.js"),o=a("iterator"),l=Array.prototype;n.exports=function(d){return d!==void 0&&(s.Array===d||l[o]===d)}},"./node_modules/core-js/internals/is-forced.js":function(n,r,i){var a=i("./node_modules/core-js/internals/fails.js"),s=/#|\.prototype\./,o=function(p,h){var m=d[l(p)];return m==f?!0:m==c?!1:typeof h=="function"?a(h):!!h},l=o.normalize=function(p){return String(p).replace(s,".").toLowerCase()},d=o.data={},c=o.NATIVE="N",f=o.POLYFILL="P";n.exports=o},"./node_modules/core-js/internals/is-object.js":function(n,r){n.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},"./node_modules/core-js/internals/is-pure.js":function(n,r){n.exports=!1},"./node_modules/core-js/internals/iterators-core.js":function(n,r,i){var a=i("./node_modules/core-js/internals/object-get-prototype-of.js"),s=i("./node_modules/core-js/internals/hide.js"),o=i("./node_modules/core-js/internals/has.js"),l=i("./node_modules/core-js/internals/well-known-symbol.js"),d=i("./node_modules/core-js/internals/is-pure.js"),c=l("iterator"),f=!1,p=function(){return this},h,m,g;[].keys&&(g=[].keys(),"next"in g?(m=a(a(g)),m!==Object.prototype&&(h=m)):f=!0),h==null&&(h={}),!d&&!o(h,c)&&s(h,c,p),n.exports={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:f}},"./node_modules/core-js/internals/iterators.js":function(n,r){n.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(n,r,i){var a=i("./node_modules/core-js/internals/fails.js");n.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"./node_modules/core-js/internals/native-weak-map.js":function(n,r,i){var a=i("./node_modules/core-js/internals/global.js"),s=i("./node_modules/core-js/internals/function-to-string.js"),o=a.WeakMap;n.exports=typeof o=="function"&&/native code/.test(s.call(o))},"./node_modules/core-js/internals/object-create.js":function(n,r,i){var a=i("./node_modules/core-js/internals/an-object.js"),s=i("./node_modules/core-js/internals/object-define-properties.js"),o=i("./node_modules/core-js/internals/enum-bug-keys.js"),l=i("./node_modules/core-js/internals/hidden-keys.js"),d=i("./node_modules/core-js/internals/html.js"),c=i("./node_modules/core-js/internals/document-create-element.js"),f=i("./node_modules/core-js/internals/shared-key.js"),p=f("IE_PROTO"),h="prototype",m=function(){},g=function(){var v=c("iframe"),_=o.length,x="<",w="script",k=">",S="java"+w+":",C;for(v.style.display="none",d.appendChild(v),v.src=String(S),C=v.contentWindow.document,C.open(),C.write(x+w+k+"document.F=Object"+x+"/"+w+k),C.close(),g=C.F;_--;)delete g[h][o[_]];return g()};n.exports=Object.create||function(_,x){var w;return _!==null?(m[h]=a(_),w=new m,m[h]=null,w[p]=_):w=g(),x===void 0?w:s(w,x)},l[p]=!0},"./node_modules/core-js/internals/object-define-properties.js":function(n,r,i){var a=i("./node_modules/core-js/internals/descriptors.js"),s=i("./node_modules/core-js/internals/object-define-property.js"),o=i("./node_modules/core-js/internals/an-object.js"),l=i("./node_modules/core-js/internals/object-keys.js");n.exports=a?Object.defineProperties:function(c,f){o(c);for(var p=l(f),h=p.length,m=0,g;h>m;)s.f(c,g=p[m++],f[g]);return c}},"./node_modules/core-js/internals/object-define-property.js":function(n,r,i){var a=i("./node_modules/core-js/internals/descriptors.js"),s=i("./node_modules/core-js/internals/ie8-dom-define.js"),o=i("./node_modules/core-js/internals/an-object.js"),l=i("./node_modules/core-js/internals/to-primitive.js"),d=Object.defineProperty;r.f=a?d:function(f,p,h){if(o(f),p=l(p,!0),o(h),s)try{return d(f,p,h)}catch(m){}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(f[p]=h.value),f}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(n,r,i){var a=i("./node_modules/core-js/internals/descriptors.js"),s=i("./node_modules/core-js/internals/object-property-is-enumerable.js"),o=i("./node_modules/core-js/internals/create-property-descriptor.js"),l=i("./node_modules/core-js/internals/to-indexed-object.js"),d=i("./node_modules/core-js/internals/to-primitive.js"),c=i("./node_modules/core-js/internals/has.js"),f=i("./node_modules/core-js/internals/ie8-dom-define.js"),p=Object.getOwnPropertyDescriptor;r.f=a?p:function(m,g){if(m=l(m),g=d(g,!0),f)try{return p(m,g)}catch(v){}if(c(m,g))return o(!s.f.call(m,g),m[g])}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(n,r,i){var a=i("./node_modules/core-js/internals/object-keys-internal.js"),s=i("./node_modules/core-js/internals/enum-bug-keys.js"),o=s.concat("length","prototype");r.f=Object.getOwnPropertyNames||function(d){return a(d,o)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(n,r){r.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(n,r,i){var a=i("./node_modules/core-js/internals/has.js"),s=i("./node_modules/core-js/internals/to-object.js"),o=i("./node_modules/core-js/internals/shared-key.js"),l=i("./node_modules/core-js/internals/correct-prototype-getter.js"),d=o("IE_PROTO"),c=Object.prototype;n.exports=l?Object.getPrototypeOf:function(f){return f=s(f),a(f,d)?f[d]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?c:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(n,r,i){var a=i("./node_modules/core-js/internals/has.js"),s=i("./node_modules/core-js/internals/to-indexed-object.js"),o=i("./node_modules/core-js/internals/array-includes.js"),l=i("./node_modules/core-js/internals/hidden-keys.js"),d=o(!1);n.exports=function(c,f){var p=s(c),h=0,m=[],g;for(g in p)!a(l,g)&&a(p,g)&&m.push(g);for(;f.length>h;)a(p,g=f[h++])&&(~d(m,g)||m.push(g));return m}},"./node_modules/core-js/internals/object-keys.js":function(n,r,i){var a=i("./node_modules/core-js/internals/object-keys-internal.js"),s=i("./node_modules/core-js/internals/enum-bug-keys.js");n.exports=Object.keys||function(l){return a(l,s)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(n,r,i){var a={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,o=s&&!a.call({1:2},1);r.f=o?function(d){var c=s(this,d);return!!c&&c.enumerable}:a},"./node_modules/core-js/internals/object-set-prototype-of.js":function(n,r,i){var a=i("./node_modules/core-js/internals/validate-set-prototype-of-arguments.js");n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s=!1,o={},l;try{l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,l.call(o,[]),s=o instanceof Array}catch(d){}return function(c,f){return a(c,f),s?l.call(c,f):c.__proto__=f,c}}():void 0)},"./node_modules/core-js/internals/own-keys.js":function(n,r,i){var a=i("./node_modules/core-js/internals/global.js"),s=i("./node_modules/core-js/internals/object-get-own-property-names.js"),o=i("./node_modules/core-js/internals/object-get-own-property-symbols.js"),l=i("./node_modules/core-js/internals/an-object.js"),d=a.Reflect;n.exports=d&&d.ownKeys||function(f){var p=s.f(l(f)),h=o.f;return h?p.concat(h(f)):p}},"./node_modules/core-js/internals/path.js":function(n,r,i){n.exports=i("./node_modules/core-js/internals/global.js")},"./node_modules/core-js/internals/redefine.js":function(n,r,i){var a=i("./node_modules/core-js/internals/global.js"),s=i("./node_modules/core-js/internals/shared.js"),o=i("./node_modules/core-js/internals/hide.js"),l=i("./node_modules/core-js/internals/has.js"),d=i("./node_modules/core-js/internals/set-global.js"),c=i("./node_modules/core-js/internals/function-to-string.js"),f=i("./node_modules/core-js/internals/internal-state.js"),p=f.get,h=f.enforce,m=String(c).split("toString");s("inspectSource",function(g){return c.call(g)}),(n.exports=function(g,v,_,x){var w=x?!!x.unsafe:!1,k=x?!!x.enumerable:!1,S=x?!!x.noTargetGet:!1;if(typeof _=="function"&&(typeof v=="string"&&!l(_,"name")&&o(_,"name",v),h(_).source=m.join(typeof v=="string"?v:"")),g===a){k?g[v]=_:d(v,_);return}else w?!S&&g[v]&&(k=!0):delete g[v];k?g[v]=_:o(g,v,_)})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||c.call(this)})},"./node_modules/core-js/internals/require-object-coercible.js":function(n,r){n.exports=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i}},"./node_modules/core-js/internals/set-global.js":function(n,r,i){var a=i("./node_modules/core-js/internals/global.js"),s=i("./node_modules/core-js/internals/hide.js");n.exports=function(o,l){try{s(a,o,l)}catch(d){a[o]=l}return l}},"./node_modules/core-js/internals/set-to-string-tag.js":function(n,r,i){var a=i("./node_modules/core-js/internals/object-define-property.js").f,s=i("./node_modules/core-js/internals/has.js"),o=i("./node_modules/core-js/internals/well-known-symbol.js"),l=o("toStringTag");n.exports=function(d,c,f){d&&!s(d=f?d:d.prototype,l)&&a(d,l,{configurable:!0,value:c})}},"./node_modules/core-js/internals/shared-key.js":function(n,r,i){var a=i("./node_modules/core-js/internals/shared.js"),s=i("./node_modules/core-js/internals/uid.js"),o=a("keys");n.exports=function(l){return o[l]||(o[l]=s(l))}},"./node_modules/core-js/internals/shared.js":function(n,r,i){var a=i("./node_modules/core-js/internals/global.js"),s=i("./node_modules/core-js/internals/set-global.js"),o=i("./node_modules/core-js/internals/is-pure.js"),l="__core-js_shared__",d=a[l]||s(l,{});(n.exports=function(c,f){return d[c]||(d[c]=f!==void 0?f:{})})("versions",[]).push({version:"3.1.3",mode:o?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-at.js":function(n,r,i){var a=i("./node_modules/core-js/internals/to-integer.js"),s=i("./node_modules/core-js/internals/require-object-coercible.js");n.exports=function(o,l,d){var c=String(s(o)),f=a(l),p=c.length,h,m;return f<0||f>=p?d?"":void 0:(h=c.charCodeAt(f),h<55296||h>56319||f+1===p||(m=c.charCodeAt(f+1))<56320||m>57343?d?c.charAt(f):h:d?c.slice(f,f+2):(h-55296<<10)+(m-56320)+65536)}},"./node_modules/core-js/internals/to-absolute-index.js":function(n,r,i){var a=i("./node_modules/core-js/internals/to-integer.js"),s=Math.max,o=Math.min;n.exports=function(l,d){var c=a(l);return c<0?s(c+d,0):o(c,d)}},"./node_modules/core-js/internals/to-indexed-object.js":function(n,r,i){var a=i("./node_modules/core-js/internals/indexed-object.js"),s=i("./node_modules/core-js/internals/require-object-coercible.js");n.exports=function(o){return a(s(o))}},"./node_modules/core-js/internals/to-integer.js":function(n,r){var i=Math.ceil,a=Math.floor;n.exports=function(s){return isNaN(s=+s)?0:(s>0?a:i)(s)}},"./node_modules/core-js/internals/to-length.js":function(n,r,i){var a=i("./node_modules/core-js/internals/to-integer.js"),s=Math.min;n.exports=function(o){return o>0?s(a(o),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(n,r,i){var a=i("./node_modules/core-js/internals/require-object-coercible.js");n.exports=function(s){return Object(a(s))}},"./node_modules/core-js/internals/to-primitive.js":function(n,r,i){var a=i("./node_modules/core-js/internals/is-object.js");n.exports=function(s,o){if(!a(s))return s;var l,d;if(o&&typeof(l=s.toString)=="function"&&!a(d=l.call(s))||typeof(l=s.valueOf)=="function"&&!a(d=l.call(s))||!o&&typeof(l=s.toString)=="function"&&!a(d=l.call(s)))return d;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/uid.js":function(n,r){var i=0,a=Math.random();n.exports=function(s){return"Symbol(".concat(s===void 0?"":s,")_",(++i+a).toString(36))}},"./node_modules/core-js/internals/validate-set-prototype-of-arguments.js":function(n,r,i){var a=i("./node_modules/core-js/internals/is-object.js"),s=i("./node_modules/core-js/internals/an-object.js");n.exports=function(o,l){if(s(o),!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype")}},"./node_modules/core-js/internals/well-known-symbol.js":function(n,r,i){var a=i("./node_modules/core-js/internals/global.js"),s=i("./node_modules/core-js/internals/shared.js"),o=i("./node_modules/core-js/internals/uid.js"),l=i("./node_modules/core-js/internals/native-symbol.js"),d=a.Symbol,c=s("wks");n.exports=function(f){return c[f]||(c[f]=l&&d[f]||(l?d:o)("Symbol."+f))}},"./node_modules/core-js/modules/es.array.from.js":function(n,r,i){var a=i("./node_modules/core-js/internals/export.js"),s=i("./node_modules/core-js/internals/array-from.js"),o=i("./node_modules/core-js/internals/check-correctness-of-iteration.js"),l=!o(function(d){Array.from(d)});a({target:"Array",stat:!0,forced:l},{from:s})},"./node_modules/core-js/modules/es.string.iterator.js":function(n,r,i){var a=i("./node_modules/core-js/internals/string-at.js"),s=i("./node_modules/core-js/internals/internal-state.js"),o=i("./node_modules/core-js/internals/define-iterator.js"),l="String Iterator",d=s.set,c=s.getterFor(l);o(String,"String",function(f){d(this,{type:l,string:String(f),index:0})},function(){var p=c(this),h=p.string,m=p.index,g;return m>=h.length?{value:void 0,done:!0}:(g=a(h,m,!0),p.index+=g.length,{value:g,done:!1})})},"./node_modules/webpack/buildin/global.js":function(n,r){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(a){typeof window=="object"&&(i=window)}n.exports=i},"./src/default-attrs.json":function(n){n.exports={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}},"./src/icon.js":function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(g){for(var v=1;v<arguments.length;v++){var _=arguments[v];for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(g[x]=_[x])}return g},s=function(){function g(v,_){for(var x=0;x<_.length;x++){var w=_[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,_,x){return _&&g(v.prototype,_),x&&g(v,x),v}}(),o=i("./node_modules/classnames/dedupe.js"),l=f(o),d=i("./src/default-attrs.json"),c=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}var h=function(){function g(v,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];p(this,g),this.name=v,this.contents=_,this.tags=x,this.attrs=a({},c.default,{class:"feather feather-"+v})}return s(g,[{key:"toSvg",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=a({},this.attrs,_,{class:(0,l.default)(this.attrs.class,_.class)});return"<svg "+m(x)+">"+this.contents+"</svg>"}},{key:"toString",value:function(){return this.contents}}]),g}();function m(g){return Object.keys(g).map(function(v){return v+'="'+g[v]+'"'}).join(" ")}r.default=h},"./src/icons.js":function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i("./src/icon.js"),s=f(a),o=i("./dist/icons.json"),l=f(o),d=i("./src/tags.json"),c=f(d);function f(p){return p&&p.__esModule?p:{default:p}}r.default=Object.keys(l.default).map(function(p){return new s.default(p,l.default[p],c.default[p])}).reduce(function(p,h){return p[h.name]=h,p},{})},"./src/index.js":function(n,r,i){var a=i("./src/icons.js"),s=f(a),o=i("./src/to-svg.js"),l=f(o),d=i("./src/replace.js"),c=f(d);function f(p){return p&&p.__esModule?p:{default:p}}n.exports={icons:s.default,toSvg:l.default,replace:c.default}},"./src/replace.js":function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(m){for(var g=1;g<arguments.length;g++){var v=arguments[g];for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(m[_]=v[_])}return m},s=i("./node_modules/classnames/dedupe.js"),o=c(s),l=i("./src/icons.js"),d=c(l);function c(m){return m&&m.__esModule?m:{default:m}}function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof document=="undefined")throw new Error("`feather.replace()` only works in a browser environment.");var g=document.querySelectorAll("[data-feather]");Array.from(g).forEach(function(v){return p(v,m)})}function p(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=h(m),_=v["data-feather"];if(delete v["data-feather"],d.default[_]===void 0){console.warn("feather: '"+_+"' is not a valid icon");return}var x=d.default[_].toSvg(a({},g,v,{class:(0,o.default)(g.class,v.class)})),w=new DOMParser().parseFromString(x,"image/svg+xml"),k=w.querySelector("svg");m.parentNode.replaceChild(k,m)}function h(m){return Array.from(m.attributes).reduce(function(g,v){return g[v.name]=v.value,g},{})}r.default=f},"./src/tags.json":function(n){n.exports={activity:["pulse","health","action","motion"],airplay:["stream","cast","mirroring"],"alert-circle":["warning","alert","danger"],"alert-octagon":["warning","alert","danger"],"alert-triangle":["warning","alert","danger"],"align-center":["text alignment","center"],"align-justify":["text alignment","justified"],"align-left":["text alignment","left"],"align-right":["text alignment","right"],anchor:[],archive:["index","box"],"at-sign":["mention","at","email","message"],award:["achievement","badge"],aperture:["camera","photo"],"bar-chart":["statistics","diagram","graph"],"bar-chart-2":["statistics","diagram","graph"],battery:["power","electricity"],"battery-charging":["power","electricity"],bell:["alarm","notification","sound"],"bell-off":["alarm","notification","silent"],bluetooth:["wireless"],"book-open":["read","library"],book:["read","dictionary","booklet","magazine","library"],bookmark:["read","clip","marker","tag"],box:["cube"],briefcase:["work","bag","baggage","folder"],calendar:["date"],camera:["photo"],cast:["chromecast","airplay"],"chevron-down":["expand"],"chevron-up":["collapse"],circle:["off","zero","record"],clipboard:["copy"],clock:["time","watch","alarm"],"cloud-drizzle":["weather","shower"],"cloud-lightning":["weather","bolt"],"cloud-rain":["weather"],"cloud-snow":["weather","blizzard"],cloud:["weather"],codepen:["logo"],codesandbox:["logo"],code:["source","programming"],coffee:["drink","cup","mug","tea","cafe","hot","beverage"],columns:["layout"],command:["keyboard","cmd","terminal","prompt"],compass:["navigation","safari","travel","direction"],copy:["clone","duplicate"],"corner-down-left":["arrow","return"],"corner-down-right":["arrow"],"corner-left-down":["arrow"],"corner-left-up":["arrow"],"corner-right-down":["arrow"],"corner-right-up":["arrow"],"corner-up-left":["arrow"],"corner-up-right":["arrow"],cpu:["processor","technology"],"credit-card":["purchase","payment","cc"],crop:["photo","image"],crosshair:["aim","target"],database:["storage","memory"],delete:["remove"],disc:["album","cd","dvd","music"],"dollar-sign":["currency","money","payment"],droplet:["water"],edit:["pencil","change"],"edit-2":["pencil","change"],"edit-3":["pencil","change"],eye:["view","watch"],"eye-off":["view","watch","hide","hidden"],"external-link":["outbound"],facebook:["logo","social"],"fast-forward":["music"],figma:["logo","design","tool"],"file-minus":["delete","remove","erase"],"file-plus":["add","create","new"],"file-text":["data","txt","pdf"],film:["movie","video"],filter:["funnel","hopper"],flag:["report"],"folder-minus":["directory"],"folder-plus":["directory"],folder:["directory"],framer:["logo","design","tool"],frown:["emoji","face","bad","sad","emotion"],gift:["present","box","birthday","party"],"git-branch":["code","version control"],"git-commit":["code","version control"],"git-merge":["code","version control"],"git-pull-request":["code","version control"],github:["logo","version control"],gitlab:["logo","version control"],globe:["world","browser","language","translate"],"hard-drive":["computer","server","memory","data"],hash:["hashtag","number","pound"],headphones:["music","audio","sound"],heart:["like","love","emotion"],"help-circle":["question mark"],hexagon:["shape","node.js","logo"],home:["house","living"],image:["picture"],inbox:["email"],instagram:["logo","camera"],key:["password","login","authentication","secure"],layers:["stack"],layout:["window","webpage"],"life-buoy":["help","life ring","support"],link:["chain","url"],"link-2":["chain","url"],linkedin:["logo","social media"],list:["options"],lock:["security","password","secure"],"log-in":["sign in","arrow","enter"],"log-out":["sign out","arrow","exit"],mail:["email","message"],"map-pin":["location","navigation","travel","marker"],map:["location","navigation","travel"],maximize:["fullscreen"],"maximize-2":["fullscreen","arrows","expand"],meh:["emoji","face","neutral","emotion"],menu:["bars","navigation","hamburger"],"message-circle":["comment","chat"],"message-square":["comment","chat"],"mic-off":["record","sound","mute"],mic:["record","sound","listen"],minimize:["exit fullscreen","close"],"minimize-2":["exit fullscreen","arrows","close"],minus:["subtract"],monitor:["tv","screen","display"],moon:["dark","night"],"more-horizontal":["ellipsis"],"more-vertical":["ellipsis"],"mouse-pointer":["arrow","cursor"],move:["arrows"],music:["note"],navigation:["location","travel"],"navigation-2":["location","travel"],octagon:["stop"],package:["box","container"],paperclip:["attachment"],pause:["music","stop"],"pause-circle":["music","audio","stop"],"pen-tool":["vector","drawing"],percent:["discount"],"phone-call":["ring"],"phone-forwarded":["call"],"phone-incoming":["call"],"phone-missed":["call"],"phone-off":["call","mute"],"phone-outgoing":["call"],phone:["call"],play:["music","start"],"pie-chart":["statistics","diagram"],"play-circle":["music","start"],plus:["add","new"],"plus-circle":["add","new"],"plus-square":["add","new"],pocket:["logo","save"],power:["on","off"],printer:["fax","office","device"],radio:["signal"],"refresh-cw":["synchronise","arrows"],"refresh-ccw":["arrows"],repeat:["loop","arrows"],rewind:["music"],"rotate-ccw":["arrow"],"rotate-cw":["arrow"],rss:["feed","subscribe"],save:["floppy disk"],scissors:["cut"],search:["find","magnifier","magnifying glass"],send:["message","mail","email","paper airplane","paper aeroplane"],settings:["cog","edit","gear","preferences"],"share-2":["network","connections"],shield:["security","secure"],"shield-off":["security","insecure"],"shopping-bag":["ecommerce","cart","purchase","store"],"shopping-cart":["ecommerce","cart","purchase","store"],shuffle:["music"],"skip-back":["music"],"skip-forward":["music"],slack:["logo"],slash:["ban","no"],sliders:["settings","controls"],smartphone:["cellphone","device"],smile:["emoji","face","happy","good","emotion"],speaker:["audio","music"],star:["bookmark","favorite","like"],"stop-circle":["media","music"],sun:["brightness","weather","light"],sunrise:["weather","time","morning","day"],sunset:["weather","time","evening","night"],tablet:["device"],tag:["label"],target:["logo","bullseye"],terminal:["code","command line","prompt"],thermometer:["temperature","celsius","fahrenheit","weather"],"thumbs-down":["dislike","bad","emotion"],"thumbs-up":["like","good","emotion"],"toggle-left":["on","off","switch"],"toggle-right":["on","off","switch"],tool:["settings","spanner"],trash:["garbage","delete","remove","bin"],"trash-2":["garbage","delete","remove","bin"],triangle:["delta"],truck:["delivery","van","shipping","transport","lorry"],tv:["television","stream"],twitch:["logo"],twitter:["logo","social"],type:["text"],umbrella:["rain","weather"],unlock:["security"],"user-check":["followed","subscribed"],"user-minus":["delete","remove","unfollow","unsubscribe"],"user-plus":["new","add","create","follow","subscribe"],"user-x":["delete","remove","unfollow","unsubscribe","unavailable"],user:["person","account"],users:["group"],"video-off":["camera","movie","film"],video:["camera","movie","film"],voicemail:["phone"],volume:["music","sound","mute"],"volume-1":["music","sound"],"volume-2":["music","sound"],"volume-x":["music","sound","mute"],watch:["clock","time"],"wifi-off":["disabled"],wifi:["connection","signal","wireless"],wind:["weather","air"],"x-circle":["cancel","close","delete","remove","times","clear"],"x-octagon":["delete","stop","alert","warning","times","clear"],"x-square":["cancel","close","delete","remove","times","clear"],x:["cancel","close","delete","remove","times","clear"],youtube:["logo","video","play"],"zap-off":["flash","camera","lightning"],zap:["flash","camera","lightning"],"zoom-in":["magnifying glass"],"zoom-out":["magnifying glass"]}},"./src/to-svg.js":function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i("./src/icons.js"),s=o(a);function o(d){return d&&d.__esModule?d:{default:d}}function l(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(console.warn("feather.toSvg() is deprecated. Please use feather.icons[name].toSvg() instead."),!d)throw new Error("The required `key` (icon name) parameter is missing.");if(!s.default[d])throw new Error("No icon matching '"+d+"'. See the complete list of icons at https://feathericons.com");return s.default[d].toSvg(c)}r.default=l},0:function(n,r,i){i("./node_modules/core-js/es/array/from.js"),n.exports=i("./src/index.js")}})})})(CK);var gye=CK.exports;const mE=SK(gye),S8=Object.keys(mE.icons),ma={props:{name:{type:String,required:!0,validator(t){const e=S8.includes(t);return e||(console.groupCollapsed("[frappe-ui] name property for feather-icon must be one of "),console.dir(S8),console.groupEnd()),e}},color:{type:String,default:null},strokeWidth:{type:Number,default:1.5}},render(){let t=mE.icons[this.name];return t||(t=mE.icons.circle),dr("svg",Ct(t.attrs,{fill:"none",stroke:"currentColor",color:this.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":this.strokeWidth,width:null,height:null,class:[t.attrs.class,"shrink-0"],innerHTML:t.contents},this.$attrs))}},xR=Ze({__name:"LoadingIndicator",props:{scale:{required:!1,default:100}},setup(t){return(e,n)=>(T(),P("svg",{class:"max-w-xs animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",style:nt(`scale: ${t.scale}%;`),viewBox:"0 0 24 24"},[...n[0]||(n[0]=[u("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),u("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])],4))}}),vye={class:"rounded bg-surface-gray-7 px-2 py-1 text-xs text-ink-white shadow-xl"},cu=Ze({inheritAttrs:!1,__name:"Tooltip",props:{text:{default:""},hoverDelay:{default:.5},placement:{default:"top"},arrowClass:{default:"fill-surface-gray-7"},disabled:{type:Boolean,default:!1}},setup(t){const e=t,n=J(()=>e.hoverDelay*1e3);return(r,i)=>t.disabled?Ye(r.$slots,"default",{key:0}):(T(),he(y(tye),{key:1,delayDuration:n.value},{default:D(()=>[b(y(iye),null,{default:D(()=>[b(y(pye),{"as-child":""},{default:D(()=>[Ye(r.$slots,"default")]),_:3}),b(y(cye),null,{default:D(()=>[e.text||r.$slots.body||r.$slots.content?(T(),he(y(uye),{key:0,side:e.placement,"side-offset":4,class:"z-[100]"},{default:D(()=>[Ye(r.$slots,"body",{},()=>[u("div",vye,[Ye(r.$slots,"content",{},()=>[W(E(e.text),1)])])]),b(y(Qve),{class:fe(e.arrowClass),width:8,height:4},null,8,["class"])]),_:3},8,["side"])):ie("",!0)]),_:3})]),_:3})]),_:3},8,["delayDuration"]))}}),yye=["disabled","ariaLabel","type"],Z=Ze({inheritAttrs:!1,__name:"Button",props:{theme:{default:"gray"},size:{default:"sm"},variant:{default:"subtle"},label:{},icon:{},iconLeft:{},iconRight:{},tooltip:{},loading:{type:Boolean,default:!1},loadingText:{},disabled:{type:Boolean,default:!1},route:{},link:{},type:{default:"button"}},setup(t,{expose:e}){const n=t,r=OS(),i=xn(),a=J(()=>{let h={gray:"text-ink-white bg-surface-gray-7 hover:bg-surface-gray-6 active:bg-surface-gray-5",blue:"text-ink-white bg-blue-500 hover:bg-surface-blue-3 active:bg-blue-700",green:"text-ink-white bg-surface-green-3 hover:bg-green-700 active:bg-green-800",red:"text-ink-white bg-surface-red-5 hover:bg-surface-red-6 active:bg-surface-red-7"}[n.theme],m={gray:"text-ink-gray-8 bg-surface-gray-2 hover:bg-surface-gray-3 active:bg-surface-gray-4",blue:"text-ink-blue-3 bg-surface-blue-2 hover:bg-blue-200 active:bg-blue-300",green:"text-green-800 bg-surface-green-2 hover:bg-green-200 active:bg-green-300",red:"text-red-700 bg-surface-red-2 hover:bg-surface-red-3 active:bg-surface-red-4"}[n.theme],g={gray:"text-ink-gray-8 bg-surface-white bg-surface-white border border-outline-gray-2 hover:border-outline-gray-3 active:border-outline-gray-3 active:bg-surface-gray-4",blue:"text-ink-blue-3 bg-surface-white border border-outline-blue-1 hover:border-blue-400 active:border-blue-400 active:bg-blue-300",green:"text-green-800 bg-surface-white border border-outline-green-2 hover:border-green-500 active:border-green-500 active:bg-green-300",red:"text-red-700 bg-surface-white border border-outline-red-1 hover:border-outline-red-2 active:border-outline-red-2 active:bg-surface-red-3"}[n.theme],v={gray:"text-ink-gray-8 bg-transparent hover:bg-surface-gray-3 active:bg-surface-gray-4",blue:"text-ink-blue-3 bg-transparent hover:bg-blue-200 active:bg-blue-300",green:"text-green-800 bg-transparent hover:bg-green-200 active:bg-green-300",red:"text-red-700 bg-transparent hover:bg-surface-red-3 active:bg-surface-red-4"}[n.theme],_={gray:"focus-visible:ring focus-visible:ring-outline-gray-3",blue:"focus-visible:ring focus-visible:ring-blue-400",green:"focus-visible:ring focus-visible:ring-outline-green-2",red:"focus-visible:ring focus-visible:ring-outline-red-2"}[n.theme],x={subtle:m,solid:h,outline:g,ghost:v}[n.variant],w=`${n.theme}-${n.variant}`,S={"gray-solid":"bg-surface-gray-2 text-ink-gray-4","gray-subtle":"bg-surface-gray-2 text-ink-gray-4","gray-outline":"bg-surface-gray-2 text-ink-gray-4 border border-outline-gray-2","gray-ghost":"text-ink-gray-4","blue-solid":"bg-blue-300 text-ink-white","blue-subtle":"bg-surface-blue-2 text-ink-blue-link","blue-outline":"bg-surface-blue-2 text-ink-blue-link border border-outline-blue-1","blue-ghost":"text-ink-blue-link","green-solid":"bg-surface-green-2 text-ink-green-2","green-subtle":"bg-surface-green-2 text-ink-green-2","green-outline":"bg-surface-green-2 text-ink-green-2 border border-outline-green-2","green-ghost":"text-ink-green-2","red-solid":"bg-surface-red-2 text-ink-red-2","red-subtle":"bg-surface-red-2 text-ink-red-2","red-outline":"bg-surface-red-2 text-ink-red-2 border border-outline-red-1","red-ghost":"text-ink-red-2"}[w],C={sm:"h-7 text-base px-2 rounded",md:"h-8 text-base font-medium px-2.5 rounded",lg:"h-10 text-lg font-medium px-3 rounded-md",xl:"h-11.5 text-xl font-medium px-3.5 rounded-lg","2xl":"h-13 text-2xl font-medium px-3.5 rounded-xl"}[n.size];return d.value&&(C={sm:"h-7 w-7 rounded",md:"h-8 w-8 rounded",lg:"h-10 w-10 rounded-md",xl:"h-11.5 w-11.5 rounded-lg","2xl":"h-13 w-13 rounded-xl"}[n.size]),["inline-flex items-center justify-center gap-2 transition-colors focus:outline-none shrink-0",o.value?S:x,_,C]}),s=J(()=>({sm:"h-4",md:"h-4.5",lg:"h-5",xl:"h-6","2xl":"h-6"})[n.size]),o=J(()=>n.disabled||n.loading),l=J(()=>d.value?n.label:null),d=J(()=>n.icon||r.icon||c.value),c=J(()=>{var g,v,_;if(!r.default)return!1;const h=r.default();if(!Array.isArray(h))return!1;let m=h[0];return!!(typeof((g=m.type)==null?void 0:g.name)=="string"&&((_=(v=m.type)==null?void 0:v.name)!=null&&_.startsWith("lucide-")))}),f=()=>{if(n.route)return i.push(n.route);if(n.link)return window.open(n.link,"_blank")},p=Q();return e({rootRef:p}),(h,m)=>{var g;return T(),he(cu,{text:t.tooltip,disabled:!((g=t.tooltip)!=null&&g.length)},{default:D(()=>[u("button",Ct(h.$attrs,{class:a.value,onClick:f,disabled:o.value,ariaLabel:l.value,type:n.type,ref_key:"rootRef",ref:p}),[t.loading?(T(),he(xR,{key:0,class:fe({"h-3 w-3":t.size=="sm","h-[13.5px] w-[13.5px]":t.size=="md","h-[15px] w-[15px]":t.size=="lg","h-4.5 w-4.5":t.size=="xl"||t.size=="2xl"})},null,8,["class"])):h.$slots.prefix||t.iconLeft?Ye(h.$slots,"prefix",{key:1},()=>[t.iconLeft&&typeof t.iconLeft=="string"?(T(),he(ma,{key:0,name:t.iconLeft,class:fe(s.value),"aria-hidden":"true"},null,8,["name","class"])):t.iconLeft?(T(),he(Lt(t.iconLeft),{key:1,class:fe(s.value)},null,8,["class"])):ie("",!0)]):ie("",!0),t.loading&&t.loadingText?(T(),P(_e,{key:2},[W(E(t.loadingText),1)],64)):d.value&&!t.loading?(T(),P(_e,{key:3},[t.icon&&typeof t.icon=="string"?(T(),he(ma,{key:0,name:t.icon,class:fe(s.value),"aria-label":t.label},null,8,["name","class","aria-label"])):t.icon?(T(),he(Lt(t.icon),{key:1,class:fe(s.value)},null,8,["class"])):h.$slots.icon?Ye(h.$slots,"icon",{key:2}):c.value?(T(),P("div",{key:3,class:fe(s.value)},[Ye(h.$slots,"default",{},()=>[W(E(t.label),1)])],2)):ie("",!0)],64)):(T(),P("span",{key:4,class:fe([{"sr-only":d.value},"truncate"])},[Ye(h.$slots,"default",{},()=>[W(E(t.label),1)])],2)),Ye(h.$slots,"suffix",{},()=>[t.iconRight&&typeof t.iconRight=="string"?(T(),he(ma,{key:0,name:t.iconRight,class:fe(s.value),"aria-hidden":"true"},null,8,["name","class"])):t.iconRight?(T(),he(Lt(t.iconRight),{key:1,class:fe(s.value)},null,8,["class"])):ie("",!0)])],16,yye)]),_:3},8,["text","disabled"])}}}),bye={class:"w-full space-y-1.5"},_ye={key:0,class:"block text-xs text-ink-gray-5"},xye=["onClick"],wye={class:"flex items-center overflow-hidden"},kye={key:0,class:"truncate text-base leading-5 text-ink-gray-8"},Sye={key:1,class:"text-base leading-5 text-ink-gray-4"},Cye={key:0,class:"sticky top-0 z-10 flex items-stretch space-x-1.5 bg-surface-modal py-1.5"},Aye={class:"relative w-full"},Tye={class:"absolute right-0 inline-flex h-7 w-7 items-center justify-center"},Eye={key:0,class:"sticky top-10 truncate bg-surface-modal px-2.5 py-1.5 text-sm font-medium text-ink-gray-5"},Mye={class:"flex flex-1 gap-2 overflow-hidden items-center"},$ye={key:0,class:"flex flex-shrink-0"},Dye={key:1,class:"h-4 w-4"},Rye={class:"flex-1 truncate text-ink-gray-7"},Pye={key:0,class:"ml-2 flex-shrink-0"},Iye={key:0,class:"text-sm text-ink-gray-5"},Oye={key:1,class:"rounded-md px-2.5 py-1.5 text-base text-ink-gray-5"},Lye={key:0,class:"border-t p-1"},Vye={key:0,class:"flex items-center justify-end"},Nye={key:1,class:"flex items-center justify-end"},AK=Ze({__name:"Autocomplete",props:{label:{},options:{},hideSearch:{type:Boolean,default:!1},placeholder:{},bodyClasses:{},loading:{type:Boolean},placement:{},showFooter:{type:Boolean},compareFn:{type:Function,default:(t,e)=>t.value===e.value},maxOptions:{default:50},multiple:{type:Boolean,default:!1},modelValue:{type:[Array,null,String,Number,Boolean,Object]}},emits:["update:modelValue","update:query","change"],setup(t,{expose:e,emit:n}){const r=t,i=n,a=Q(),s=Q(!1),o=Q(""),l=J(()=>{var R;if(!((R=r.options)!=null&&R.length))return[];let $;return C(r.options[0])?$=r.options:$=[{group:"",items:c(r.options),hideLabel:!1}],$.map((I,B)=>({key:B,group:I.group,hideLabel:I.hideLabel,items:f(c(I.items||[]))})).filter(I=>I.items.length>0)}),d=J(()=>l.value.flatMap($=>$.items)),c=$=>$?$.map(R=>S(R)?R:{label:R.toString(),value:R}):[],f=$=>o.value?$.filter(R=>R.label.toLowerCase().includes(o.value.trim().toLowerCase())||R.value.toString().toLowerCase().includes(o.value.trim().toLowerCase())):$,p=J({get(){if(!r.multiple)return h(r.modelValue)||m(r.modelValue);const $=r.modelValue||[];return S($[0])?$:$.map(R=>h(R)||m(R))},set($){o.value="",$&&!r.multiple&&(s.value=!1),i("update:modelValue",$),i("change",$)}}),h=$=>{if(!$)return $;const R=S($)?$.value:$;return d.value.find(I=>I.value===R)},m=$=>S($)?$:{label:$,value:$},g=$=>S($)?($==null?void 0:$.label)||($==null?void 0:$.value):$,v=J(()=>p.value?r.multiple?p.value.map($=>g($)).join(", "):g(p.value):""),_=$=>{if(!p.value)return!1;const R=S($)?$.value:$;return r.multiple?p.value.find(I=>S(I)?I.value===R:I===R):p.value===R},x=J(()=>{var $;return r.multiple?d.value.length===(($=p.value)==null?void 0:$.length):!1}),w=()=>{p.value=d.value},k=()=>{p.value=r.multiple?[]:void 0},S=$=>typeof $=="object",C=$=>typeof $=="object"&&"items"in $&&"group"in $;Je(()=>o.value,()=>{i("update:query",o.value)}),Je(()=>s.value,()=>{s.value&&ir(()=>{var $;return($=a.value)==null?void 0:$.$el.focus()})});const A=Q();return e({rootRef:A,togglePopover:()=>{s.value=!s.value}}),($,R)=>(T(),he(y(Ppe),{modelValue:p.value,"onUpdate:modelValue":R[2]||(R[2]=I=>p.value=I),multiple:t.multiple,nullable:"",by:t.compareFn},{default:D(({open:I})=>[b(y(kK),{class:"w-full",show:s.value,"onUpdate:show":R[1]||(R[1]=B=>s.value=B),ref_key:"rootRef",ref:A,placement:t.placement,"match-target-width":!0},{target:D(({open:B,togglePopover:j,close:z})=>[Ye($.$slots,"target",Tr(Xr({open:B,close:z,togglePopover:j,isOpen:I})),()=>[u("div",bye,[r.label?(T(),P("label",_ye,E(r.label),1)):ie("",!0),u("button",{class:fe(["flex h-7 w-full items-center justify-between gap-2 rounded bg-surface-gray-2 px-2 py-1 transition-colors hover:bg-surface-gray-3 border border-transparent focus:border-outline-gray-4 focus:outline-none focus:ring-2 focus:ring-outline-gray-3",{"bg-surface-gray-3":I}]),onClick:()=>j()},[u("div",wye,[Ye($.$slots,"prefix"),v.value?(T(),P("span",kye,E(v.value),1)):(T(),P("span",Sye,E(t.placeholder||""),1)),Ye($.$slots,"suffix")]),b(ma,{name:"chevron-down",class:"h-4 w-4 text-ink-gray-5","aria-hidden":"true"})],10,xye)])])]),body:D(({isOpen:B,togglePopover:j})=>[xe(u("div",null,[u("div",{class:fe(["relative mt-1 rounded-lg bg-surface-modal text-base shadow-2xl",t.bodyClasses])},[b(y(Ope),{class:fe(["max-h-[15rem] overflow-y-auto px-1.5 pb-1.5",{"pt-1.5":t.hideSearch}]),static:""},{default:D(()=>[t.hideSearch?ie("",!0):(T(),P("div",Cye,[u("div",Aye,[b(y(Ipe),{ref_key:"searchInput",ref:a,class:"form-input w-full focus:bg-surface-gray-3 hover:bg-surface-gray-4 text-ink-gray-8",type:"text",value:o.value,onChange:R[0]||(R[0]=z=>o.value=z.target.value),autocomplete:"off",placeholder:"Search"},null,8,["value"]),u("div",Tye,[r.loading?(T(),he(xR,{key:0,class:"h-4 w-4 text-ink-gray-5"})):(T(),P("button",{key:1,onClick:k},[b(ma,{name:"x",class:"w-4 text-ink-gray-8"})]))])])])),(T(!0),P(_e,null,we(l.value,z=>xe((T(),P("div",{key:z.key},[z.group&&!z.hideLabel?(T(),P("div",Eye,E(z.group),1)):ie("",!0),(T(!0),P(_e,null,we(z.items.slice(0,r.maxOptions),(F,q)=>(T(),he(y(Lpe),{as:"template",key:q,value:F,disabled:F.disabled},{default:D(({active:N,selected:O})=>[u("li",{class:fe(["flex cursor-pointer items-center justify-between rounded px-2.5 py-1.5 text-base",{"bg-surface-gray-3":N,"opacity-50":F.disabled}])},[u("div",Mye,[$.$slots["item-prefix"]||r.multiple?(T(),P("div",$ye,[Ye($.$slots,"item-prefix",Ct({ref_for:!0},{active:N,selected:O,option:F}),()=>[_(F)?(T(),he(ma,{key:0,name:"check",class:"h-4 w-4 text-ink-gray-7"})):(T(),P("div",Dye))])])):ie("",!0),u("span",Rye,E(g(F)),1)]),$.$slots["item-suffix"]||F!=null&&F.description?(T(),P("div",Pye,[Ye($.$slots,"item-suffix",Ct({ref_for:!0},{active:N,selected:O,option:F}),()=>[F!=null&&F.description?(T(),P("div",Iye,E(F.description),1)):ie("",!0)])])):ie("",!0)],2)]),_:2},1032,["value","disabled"]))),128))])),[[ot,z.items.length>0]])),128)),l.value.length==0?(T(),P("li",Oye," No results found ")):ie("",!0)]),_:3},8,["class"]),$.$slots.footer||r.showFooter||t.multiple?(T(),P("div",Lye,[Ye($.$slots,"footer",Tr(Xr({togglePopover:j})),()=>[t.multiple?(T(),P("div",Vye,[x.value?ie("",!0):(T(),he(y(Z),{key:0,label:"Select All",onClick:dt(w,["stop"])})),x.value?(T(),he(y(Z),{key:1,label:"Clear All",onClick:dt(k,["stop"])})):ie("",!0)])):(T(),P("div",Nye,[b(y(Z),{label:"Clear",onClick:dt(k,["stop"])})]))])])):ie("",!0)],2)],512),[[ot,B]])]),_:2},1032,["show","placement"])]),_:3},8,["modelValue","multiple","by"]))}}),jye={class:"lucide lucide-check",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Fye(t,e){return T(),P("svg",jye,[...e[0]||(e[0]=[u("path",{d:"M20 6 9 17l-5-5"},null,-1)])])}const Bye=Vt({name:"lucide-check",render:Fye}),zye={class:"lucide lucide-chevron-down",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Uye(t,e){return T(),P("svg",zye,[...e[0]||(e[0]=[u("path",{d:"m6 9 6 6 6-6"},null,-1)])])}Vt({name:"lucide-chevron-down",render:Uye});const Hye=["src","alt"],qye=Ze({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(t){const e=Q(!1),n=t,r=J(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[n.size]})[n.shape]),i=J(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[n.size]),a=J(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[n.size]]),s=J(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[n.size]),o=J(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[n.size]),l=J(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[n.size]);function d(c){c.type&&(e.value=!0)}return(c,f)=>(T(),P("div",{class:fe(["relative inline-block shrink-0",[i.value,r.value]])},[t.image&&!e.value?(T(),P("img",{key:0,src:t.image,alt:t.label,class:fe([r.value,"h-full w-full object-cover"]),onError:f[0]||(f[0]=p=>d(p))},null,42,Hye)):(T(),P("div",{key:1,class:fe(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[a.value,r.value]])},[c.$slots.default?(T(),P("div",{key:0,class:fe(l.value)},[Ye(c.$slots,"default")],2)):(T(),P(_e,{key:1},[W(E(t.label&&t.label[0]),1)],64))],2)),c.$slots.indicator?(T(),P("div",{key:2,class:fe(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",s.value])},[u("div",{class:fe(o.value)},[Ye(c.$slots,"indicator")],2)],2)):ie("",!0)],2))}}),Ee=Ze({__name:"Badge",props:{theme:{default:"gray"},size:{default:"md"},variant:{default:"subtle"},label:{}},setup(t){const e=t,n=J(()=>{let r={gray:"text-ink-white bg-surface-gray-7",blue:"text-ink-blue-1 bg-surface-blue-2",green:"text-ink-green-1 bg-surface-green-3",orange:"text-ink-amber-1 bg-surface-amber-2",red:"text-ink-red-1 bg-surface-red-4"}[e.theme],i={gray:"text-ink-gray-6 bg-surface-gray-2",blue:"text-ink-blue-2 bg-surface-blue-1",green:"text-ink-green-3 bg-surface-green-2",orange:"text-ink-amber-3 bg-surface-amber-1",red:"text-ink-red-4 bg-surface-red-1"}[e.theme],a={gray:"text-ink-gray-6 bg-transparent border border-outline-gray-1",blue:"text-ink-blue-2 bg-transparent border border-outline-blue-1",green:"text-ink-green-3 bg-transparent border border-outline-green-2",orange:"text-ink-amber-3 bg-transparent border border-outline-amber-2",red:"text-ink-red-4 bg-transparent border border-outline-red-2"}[e.theme],s={gray:"text-ink-gray-6 bg-transparent",blue:"text-ink-blue-2 bg-transparent",green:"text-ink-green-3 bg-transparent",orange:"text-ink-amber-3 bg-transparent",red:"text-ink-red-4 bg-transparent"}[e.theme],o={subtle:i,solid:r,outline:a,ghost:s}[e.variant],l={sm:"h-4 text-xs px-1.5",md:"h-5 text-xs px-1.5",lg:"h-6 text-sm px-2"}[e.size];return[o,l]});return(r,i)=>(T(),P("div",{class:fe(["inline-flex select-none items-center gap-1 rounded-full whitespace-nowrap",n.value])},[r.$slots.prefix?(T(),P("div",{key:0,class:fe([e.size=="lg"?"max-h-6":"max-h-4"])},[Ye(r.$slots,"prefix")],2)):ie("",!0),Ye(r.$slots,"default",{},()=>{var a;return[W(E((a=e.label)==null?void 0:a.toString()),1)]}),r.$slots.suffix?(T(),P("div",{key:1,class:fe([e.size=="lg"?"max-h-6":"max-h-4"])},[Ye(r.$slots,"suffix")],2)):ie("",!0)],2))}});let Wye=0;function Gye(){return++Wye}function wR(){return"frappe-ui-"+Gye()}const Yye={class:"flex flex-col gap-1"},Kye={class:"flex items-center"},Xye=["for"],Zye={key:0,class:"max-w-xs text-p-sm text-ink-gray-7"},C8="mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6",A8=Ze({__name:"Switch",props:U5({size:{default:"sm"},label:{default:""},description:{default:""},disabled:{type:Boolean,default:!1},icon:{},labelClasses:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:U5(["change"],["update:modelValue"]),setup(t,{emit:e}){const n=t,r=kG(t,"modelValue"),i=e;Je(r,c=>{i("change",c)});const a=wR(),s=J(()=>["relative inline-flex flex-shrink-0 cursor-pointer rounded-full border-transparent transition-colors duration-100 ease-in-out items-center","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3","disabled:cursor-not-allowed disabled:bg-surface-gray-3",r.value?"bg-surface-gray-7 enabled:hover:bg-surface-gray-6 active:bg-surface-gray-5 group-hover:enabled:bg-surface-gray-6":"bg-surface-gray-4 enabled:hover:bg-gray-400 active:bg-gray-500 group-hover:enabled:bg-gray-400",n.size==="md"?"h-5 w-8 border-[3px]":"h-4 w-[26px] border-2"]),o=J(()=>["pointer-events-none inline-block transform rounded-full bg-surface-white shadow ring-0 transition duration-100 ease-in-out",n.size==="md"?"h-3.5 w-3.5":"h-3 w-3",n.size==="md"?r.value?"translate-x-3 rtl:-translate-x-3":"translate-x-0":r.value?"translate-x-2.5 rtl:-translate-x-2.5":"translate-x-0"]),l=J(()=>["font-medium leading-normal",n.disabled&&!n.description?"text-ink-gray-4":"text-ink-gray-8",n.size==="md"?"text-lg":"text-base",n.labelClasses]),d=J(()=>{if(!n.label)return;const c=["flex justify-between"];return n.description?(c.push("items-start"),c.push(n.size==="md"?"px-3 space-x-3.5":"px-2.5 space-x-2.5")):(c.push("group items-center space-x-3 cursor-pointer rounded focus-visible:bg-surface-gray-2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3"),c.push(n.disabled?"cursor-not-allowed":"hover:bg-surface-gray-3 active:bg-surface-gray-4"),c.push(n.size==="md"?"px-3 py-1.5":"px-2.5 py-1.5")),c});return(c,f)=>(T(),P("div",{class:fe(d.value)},[u("div",Yye,[u("div",Kye,[n.icon&&typeof n.icon=="string"?(T(),he(ma,{key:0,name:n.icon,class:fe(C8),"aria-hidden":"true"},null,8,["name"])):n.icon?(T(),he(Lt(n.icon),{key:1,class:fe(C8)})):ie("",!0),u("label",{class:fe(l.value),for:y(a)},E(n.label),11,Xye)]),n.description?(T(),P("span",Zye,E(n.description),1)):ie("",!0)]),b(y(Yve),{id:y(a),modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=p=>r.value=p),onKeyup:f[1]||(f[1]=Eu(dt(p=>r.value=!r.value,["self"]),["space"])),class:fe(s.value),disabled:n.disabled},{default:D(()=>[b(y(Xve),{class:fe(o.value)},null,8,["class"])]),_:1},8,["id","modelValue","class","disabled"])],2))}}),Qye=Ze({inheritAttrs:!1,__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"},side:{default:"bottom"},offset:{default:4}},setup(t){const e=Q(!1);Q(!0);const n=xn(),r=nh(),i=t;function a(){e.value=!1}const s=(w,k)=>{w.route?n.push(w.route):w.onClick&&w.onClick(k)},o=w=>je(me({},w),{label:w.label,theme:w.theme||"gray",icon:w.icon,component:w.component,onClick:k=>s(w,k),submenu:w.submenu}),l=w=>w.theme==="red"?"text-ink-red-3":"text-ink-gray-6",d=w=>w.theme==="red"?"text-ink-red-3":"text-ink-gray-7",c=w=>w.theme==="red"?"focus:bg-surface-red-3 data-[highlighted]:bg-surface-red-3 data-[state=open]:bg-surface-red-3":"focus:bg-surface-gray-3 data-[highlighted]:bg-surface-gray-3 data-[state=open]:bg-surface-gray-3",f=w=>c(w)+" data-[state=open]:bg-surface-"+(w.theme==="red"?"red-3":"gray-3"),p=w=>{let k=[],S=null,C=0;for(let A of w)if(A!=null){if("group"in A){S&&(k.push(S),S=null);let M=je(me({key:C},A),{items:m(A.items)});k.push(M)}else S||(S={key:C,group:"",hideLabel:!0,items:[]}),S.items.push(...m([A]));C++}return S&&k.push(S),k},h=w=>p(w),m=w=>(w||[]).filter(Boolean).filter(k=>k.condition?k.condition():!0).map(k=>o(k)),g=w=>w.items.some(k=>k.icon),v={dropdownContent:"min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none dropdown-content",groupContainer:"p-1.5",groupLabel:"flex h-7 items-center px-2 text-sm font-medium",itemLabel:"whitespace-nowrap",itemIcon:"mr-2 h-4 w-4 flex-shrink-0",itemIconPlaceholder:"mr-2 h-4 w-4 flex-shrink-0",chevronIcon:"ml-auto h-4 w-4 flex-shrink-0",itemButton:"group flex h-7 w-full items-center rounded px-2 text-base focus:outline-none",submenuTrigger:"group flex h-7 w-full items-center rounded px-2 text-base text-ink-gray-6 focus:outline-none"},_=J(()=>p(i.options)),x=J(()=>i.placement==="left"?"start":i.placement==="right"?"end":i.placement==="center"?"center":"start");return(w,k)=>(T(),he(y(Dve),{open:e.value,"onUpdate:open":k[0]||(k[0]=S=>e.value=S)},{default:D(({open:S})=>[b(y(Hve),{"as-child":""},{default:D(()=>[w.$slots.default?Ye(w.$slots,"default",Tr(Ct({key:0},me({open:S,close:a},y(r)))),void 0,!0):(T(),he(y(Z),Ct({key:1,active:!1},me(me({},t.button),y(r))),{default:D(()=>{var C;return[W(E(t.button?((C=t.button)==null?void 0:C.label)||null:"Options"),1)]}),_:1},16))]),_:2},1024),b(y(k8),null,{default:D(()=>[b(y(Pve),{class:fe([v.dropdownContent,{"origin-top-left":t.placement=="left","origin-top-right":t.placement=="right","origin-top":t.placement=="center"}]),side:t.side,align:x.value,"side-offset":t.offset},{default:D(()=>[(T(!0),P(_e,null,we(_.value,C=>(T(),P(_e,{key:C.key},[C.items.length?(T(),P("div",{key:0,class:fe(v.groupContainer)},[C.group&&!C.hideLabel?(T(),he(y(w8),{key:0,class:fe([v.groupLabel,d(C)])},{default:D(()=>[W(E(C.group),1)]),_:2},1032,["class"])):ie("",!0),(T(!0),P(_e,null,we(C.items,A=>(T(),P(_e,{key:A.label},[A.switch?(T(),P("div",{key:0,class:fe(v.itemButton)},[A.icon&&typeof A.icon=="string"?(T(),he(ma,{key:0,name:A.icon,class:fe([v.itemIcon,l(A)]),"aria-hidden":"true"},null,8,["name","class"])):A.icon?(T(),he(Lt(A.icon),{key:1,class:fe([v.itemIcon,l(A)])},null,8,["class"])):ie("",!0),u("span",{class:fe([v.itemLabel,d(A)])},E(A.label),3),b(A8,{class:"ml-auto","label-classes":"font-normal cursor-pointer",onChange:M=>{var $;return($=A.onClick)==null?void 0:$.call(A,M)},"model-value":A.switchValue||!1},null,8,["onChange","model-value"])],2)):(T(),he(y(x8),{key:1,"as-child":"",onSelect:A.onClick},{default:D(()=>[w.$slots.item?Ye(w.$slots,"item",Ct({key:0,ref_for:!0},{item:A,close:a}),void 0,!0):A.component?(T(),he(Lt(A.component),{key:1,active:!1})):A.submenu?(T(),he(y(Nve),{key:2},{default:D(()=>[b(y(zve),{"as-child":""},{default:D(()=>[u("button",{class:fe([v.submenuTrigger,f(A)])},[A.icon&&typeof A.icon=="string"?(T(),he(ma,{key:0,name:A.icon,class:fe([v.itemIcon,l(A)]),"aria-hidden":"true"},null,8,["name","class"])):A.icon?(T(),he(Lt(A.icon),{key:1,class:fe([v.itemIcon,l(A)])},null,8,["class"])):g(C)?(T(),P("div",{key:2,class:fe(v.itemIconPlaceholder)},null,2)):ie("",!0),u("span",{class:fe([v.itemLabel,d(A)])},E(A.label),3),b(ma,{name:"chevron-right",class:fe([v.chevronIcon,l(A)]),"aria-hidden":"true"},null,8,["class"])],2)]),_:2},1024),b(y(k8),null,{default:D(()=>[b(y(Fve),{class:fe(v.dropdownContent),"side-offset":4},{default:D(()=>[(T(!0),P(_e,null,we(h(A.submenu),M=>(T(),P("div",{key:M.key,class:fe(v.groupContainer)},[M.group&&!M.hideLabel?(T(),he(y(w8),{key:0,class:fe(v.groupLabel)},{default:D(()=>[W(E(M.group),1)]),_:2},1032,["class"])):ie("",!0),(T(!0),P(_e,null,we(M.items,$=>(T(),P(_e,{key:$.label},[$.switch?(T(),P("div",{key:0,class:fe(v.itemButton)},[$.icon&&typeof $.icon=="string"?(T(),he(ma,{key:0,name:$.icon,class:fe([v.itemIcon,l($)]),"aria-hidden":"true"},null,8,["name","class"])):$.icon?(T(),he(Lt($.icon),{key:1,class:fe([v.itemIcon,l($)])},null,8,["class"])):ie("",!0),u("span",{class:fe([v.itemLabel,d($)])},E($.label),3),b(A8,{class:"ml-auto","label-classes":"font-normal cursor-pointer",onChange:R=>{var I;return(I=$.onClick)==null?void 0:I.call($,R)},"model-value":$.switchValue||!1},null,8,["onChange","model-value"])],2)):(T(),he(y(x8),{key:1,"as-child":"",onSelect:R=>s($,R)},{default:D(()=>[$.component?(T(),he(Lt($.component),{key:0,active:!1})):(T(),P("button",{key:1,class:fe([v.itemButton,c($)])},[$.icon&&typeof $.icon=="string"?(T(),he(ma,{key:0,name:$.icon,class:fe([v.itemIcon,l($)]),"aria-hidden":"true"},null,8,["name","class"])):$.icon?(T(),he(Lt($.icon),{key:1,class:fe([v.itemIcon,l($)])},null,8,["class"])):g(M)?(T(),P("div",{key:2,class:fe(v.itemIconPlaceholder)},null,2)):ie("",!0),u("span",{class:fe([v.itemLabel,d($)])},E($.label),3)],2))]),_:2},1032,["onSelect"]))],64))),128))],2))),128))]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024)):(T(),P("button",{key:3,class:fe([v.itemButton,c(A)])},[A.icon&&typeof A.icon=="string"?(T(),he(ma,{key:0,name:A.icon,class:fe([v.itemIcon,l(A)]),"aria-hidden":"true"},null,8,["name","class"])):A.icon?(T(),he(Lt(A.icon),{key:1,class:fe([v.itemIcon,l(A)])},null,8,["class"])):g(C)?(T(),P("div",{key:2,class:fe(v.itemIconPlaceholder)},null,2)):ie("",!0),u("span",{class:fe([v.itemLabel,d(A)])},E(A.label),3)],2))]),_:2},1032,["onSelect"]))],64))),128))],2)):ie("",!0)],64))),128))]),_:3},8,["class","side","align","side-offset"])]),_:3})]),_:3},8,["open"]))}}),Ft=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},f2=Ft(Qye,[["__scopeId","data-v-37606d02"]]);function TK(t){return q1()?(W1(t),!0):!1}function tT(){const t=new Set,e=i=>{t.delete(i)};return{on:i=>{t.add(i);const a=()=>e(i);return TK(a),{off:a}},off:e,trigger:(...i)=>Promise.all(Array.from(t).map(a=>a(...i)))}}function pl(t){return typeof t=="function"?t():y(t)}const EK=typeof window!="undefined"&&typeof document!="undefined";typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;const Jye=()=>{};function T8(t,e=!1,n="Timeout"){return new Promise((r,i)=>{setTimeout(e?()=>i(n):r,t)})}function e0e(t,...e){return e.some(n=>n in t)}function nT(...t){if(t.length!==1)return Zw(...t);const e=t[0];return typeof e=="function"?zs(PS(()=>({get:e,set:Jye}))):Q(e)}function gE(t,e=!1){function n(f,{flush:p="sync",deep:h=!1,timeout:m,throwOnTimeout:g}={}){let v=null;const x=[new Promise(w=>{v=Je(t,k=>{f(k)!==e&&(v==null||v(),w(k))},{flush:p,deep:h,immediate:!0})})];return m!=null&&x.push(T8(m,g).then(()=>pl(t)).finally(()=>v==null?void 0:v())),Promise.race(x)}function r(f,p){if(!Bn(f))return n(k=>k===f,p);const{flush:h="sync",deep:m=!1,timeout:g,throwOnTimeout:v}=p!=null?p:{};let _=null;const w=[new Promise(k=>{_=Je([t,f],([S,C])=>{e!==(S===C)&&(_==null||_(),k(S))},{flush:h,deep:m,immediate:!0})})];return g!=null&&w.push(T8(g,v).then(()=>pl(t)).finally(()=>(_==null||_(),pl(t)))),Promise.race(w)}function i(f){return n(p=>!!p,f)}function a(f){return r(null,f)}function s(f){return r(void 0,f)}function o(f){return n(Number.isNaN,f)}function l(f,p){return n(h=>{const m=Array.from(h);return m.includes(f)||m.includes(pl(f))},p)}function d(f){return c(1,f)}function c(f=1,p){let h=-1;return n(()=>(h+=1,h>=f),p)}return Array.isArray(pl(t))?{toMatch:n,toContains:l,changed:d,changedTimes:c,get not(){return gE(t,!e)}}:{toMatch:n,toBe:r,toBeTruthy:i,toBeNull:a,toBeNaN:o,toBeUndefined:s,changed:d,changedTimes:c,get not(){return gE(t,!e)}}}function t0e(t){return gE(t)}function n0e(t,e,n={}){const{immediate:r=!0}=n,i=Q(!1);let a=null;function s(){a&&(clearTimeout(a),a=null)}function o(){i.value=!1,s()}function l(...d){s(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,t(...d)},pl(e))}return r&&(i.value=!0,EK&&l()),TK(o),{isPending:zs(i),start:l,stop:o}}const r0e=EK?window:void 0,i0e={json:"application/json",text:"text/plain"};function p2(t){return t&&e0e(t,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}const a0e=/^(?:[a-z][a-z\d+\-.]*:)?\/\//i;function s0e(t){return a0e.test(t)}function By(t){return typeof Headers!="undefined"&&t instanceof Headers?Object.fromEntries(t.entries()):t}function $h(t,...e){return t==="overwrite"?n=>le(this,null,function*(){const r=e[e.length-1];return r?me(me({},n),yield r(n)):n}):n=>le(this,null,function*(){for(const r of e)r&&(n=me(me({},n),yield r(n)));return n})}function o0e(t={}){const e=t.combination||"chain",n=t.options||{},r=t.fetchOptions||{};function i(a,...s){const o=J(()=>{const c=pl(t.baseUrl),f=pl(a);return c&&!s0e(f)?u0e(c,f):f});let l=n,d=r;return s.length>0&&(p2(s[0])?l=je(me(me({},l),s[0]),{beforeFetch:$h(e,n.beforeFetch,s[0].beforeFetch),afterFetch:$h(e,n.afterFetch,s[0].afterFetch),onFetchError:$h(e,n.onFetchError,s[0].onFetchError)}):d=je(me(me({},d),s[0]),{headers:me(me({},By(d.headers)||{}),By(s[0].headers)||{})})),s.length>1&&p2(s[1])&&(l=je(me(me({},l),s[1]),{beforeFetch:$h(e,n.beforeFetch,s[1].beforeFetch),afterFetch:$h(e,n.afterFetch,s[1].afterFetch),onFetchError:$h(e,n.onFetchError,s[1].onFetchError)})),l0e(o,d,l)}return i}function l0e(t,...e){var n;const r=typeof AbortController=="function";let i={},a={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const s={method:"GET",type:"text",payload:void 0};e.length>0&&(p2(e[0])?a=me(me({},a),e[0]):i=e[0]),e.length>1&&p2(e[1])&&(a=me(me({},a),e[1]));const{fetch:o=(n=r0e)==null?void 0:n.fetch,initialData:l,timeout:d}=a,c=tT(),f=tT(),p=tT(),h=Q(!1),m=Q(!1),g=Q(!1),v=Q(null),_=Sl(null),x=Sl(null),w=Sl(l||null),k=J(()=>r&&m.value);let S,C;const A=()=>{r&&(S==null||S.abort(),S=new AbortController,S.signal.onabort=()=>g.value=!0,i=je(me({},i),{signal:S.signal}))},M=q=>{m.value=q,h.value=!q};d&&(C=n0e(A,d,{immediate:!1}));let $=0;const R=(q=!1)=>le(this,null,function*(){var N,O;A(),M(!0),x.value=null,v.value=null,g.value=!1,$+=1;const V=$,L={method:s.method,headers:{}};if(s.payload){const re=By(L.headers),ee=pl(s.payload);!s.payloadType&&ee&&Object.getPrototypeOf(ee)===Object.prototype&&!(ee instanceof FormData)&&(s.payloadType="json"),s.payloadType&&(re["Content-Type"]=(N=i0e[s.payloadType])!=null?N:s.payloadType),L.body=s.payloadType==="json"?JSON.stringify(ee):ee}let U=!1;const G={url:pl(t),options:me(me({},L),i),cancel:()=>{U=!0}};if(a.beforeFetch&&Object.assign(G,yield a.beforeFetch(G)),U||!o)return M(!1),Promise.resolve(null);let X=null;return C&&C.start(),o(G.url,je(me(me({},L),G.options),{headers:me(me({},By(L.headers)),By((O=G.options)==null?void 0:O.headers))})).then(re=>le(this,null,function*(){if(_.value=re,v.value=re.status,X=yield re.clone()[s.type](),!re.ok)throw w.value=l||null,new Error(re.statusText);return a.afterFetch&&({data:X}=yield a.afterFetch({data:X,response:re})),w.value=X,c.trigger(re),re})).catch(re=>le(this,null,function*(){let ee=re.message||re.name;if(a.onFetchError&&({error:ee,data:X}=yield a.onFetchError({data:X,error:re,response:_.value})),x.value=ee,a.updateDataOnError&&(w.value=X),f.trigger(re),q)throw re;return null})).finally(()=>{V===$&&M(!1),C&&C.stop(),p.trigger(null)})}),I=nT(a.refetch);Je([I,nT(t)],([q])=>q&&R(),{deep:!0});const B={isFinished:zs(h),isFetching:zs(m),statusCode:v,response:_,error:x,data:w,canAbort:k,aborted:g,abort:A,execute:R,onFetchResponse:c.on,onFetchError:f.on,onFetchFinally:p.on,get:j("GET"),put:j("PUT"),post:j("POST"),delete:j("DELETE"),patch:j("PATCH"),head:j("HEAD"),options:j("OPTIONS"),json:F("json"),text:F("text"),blob:F("blob"),arrayBuffer:F("arrayBuffer"),formData:F("formData")};function j(q){return(N,O)=>{if(!m.value)return s.method=q,s.payload=N,s.payloadType=O,Bn(s.payload)&&Je([I,nT(s.payload)],([V])=>V&&R(),{deep:!0}),je(me({},B),{then(V,L){return z().then(V,L)}})}}function z(){return new Promise((q,N)=>{t0e(h).toBe(!0).then(()=>q(B)).catch(O=>N(O))})}function F(q){return()=>{if(!m.value)return s.type=q,je(me({},B),{then(N,O){return z().then(N,O)}})}}return a.immediate&&Promise.resolve().then(()=>R()),je(me({},B),{then(q,N){return z().then(q,N)}})}function u0e(t,e){return!t.endsWith("/")&&!e.startsWith("/")?`${t}/${e}`:`${t}${e}`}const d0e={class:"lucide lucide-ellipsis",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function c0e(t,e){return T(),P("svg",d0e,[...e[0]||(e[0]=[u("circle",{cx:"12",cy:"12",r:"1"},null,-1),u("circle",{cx:"19",cy:"12",r:"1"},null,-1),u("circle",{cx:"5",cy:"12",r:"1"},null,-1)])])}Vt({name:"lucide-ellipsis",render:c0e});const f0e=["disabled","id"],p0e=["for"],Ut=Ze({__name:"Checkbox",props:{size:{default:"sm"},label:{},disabled:{type:Boolean},padding:{type:Boolean,default:!1},modelValue:{type:[Boolean,Number]},id:{}},setup(t){var s;const e=t,n=nh(),r=(s=e.id)!=null?s:wR(),i=J(()=>[{sm:"text-base font-medium",md:"text-lg font-medium"}[e.size],e.disabled?"text-ink-gray-4":"text-ink-gray-8","select-none"]),a=J(()=>{let o=e.disabled?"border-outline-gray-2 bg-surface-menu-bar text-ink-gray-3":"border-outline-gray-4 text-ink-gray-9 hover:border-outline-gray-5 focus:ring-offset-0 focus:border-outline-gray-8 active:border-outline-gray-6 transition",l=e.disabled?"":e.padding?"focus:ring-0":"hover:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 active:bg-surface-gray-2",d={sm:"w-3.5 h-3.5",md:"w-4 h-4"}[e.size];return[o,l,d]});return(o,l)=>(T(),P("div",{class:fe(["inline-flex space-x-2 rounded transition",{"px-2.5 py-1.5":t.padding&&t.size==="sm","px-3 py-2":t.padding&&t.size==="md","focus-within:bg-surface-gray-2 focus-within:ring-2 focus-within:ring-outline-gray-3 hover:bg-surface-gray-3 active:bg-surface-gray-4":t.padding&&!t.disabled}])},[u("input",Ct({class:["rounded-sm mt-[1px] bg-surface-white",a.value],type:"checkbox",disabled:t.disabled,id:y(r),onChange:l[0]||(l[0]=d=>o.$emit("update:modelValue",d.target.checked))},y(n)),null,16,f0e),t.label?(T(),P("label",{key:0,class:fe(["block",i.value]),for:y(r)},E(t.label),11,p0e)):ie("",!0)],2))}});function nC(t,e,n){var r;return function(){var i=this,a=arguments,s=function(){r=void 0,t.apply(i,a)};clearTimeout(r),r=window.setTimeout(s,e)}}const h0e=["type","placeholder","disabled","id","value","required"],kR=Ze({inheritAttrs:!1,__name:"TextInput",props:{type:{default:"text"},size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},debounce:{},required:{type:Boolean}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,i=n,a=OS(),s=nh(),o=J(()=>Object.fromEntries(Object.entries(s).filter(([g])=>g!=="class"&&g!=="style"))),l=Q(null);e({el:l});const d=J(()=>r.disabled?"text-ink-gray-5":"text-ink-gray-8"),c=J(()=>{let g={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[r.size],v={sm:["py-1.5",a.prefix?"pl-8":"pl-2",a.suffix?"pr-8":"pr-2"],md:["py-1.5",a.prefix?"pl-9":"pl-2.5",a.suffix?"pr-9":"pr-2.5"],lg:["py-1.5",a.prefix?"pl-10":"pl-3",a.suffix?"pr-10":"pr-3"],xl:["py-1.5",a.prefix?"pl-10":"pl-3",a.suffix?"pr-10":"pr-3"]}[r.size],_=r.disabled?"disabled":r.variant,x={subtle:"border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",outline:"border border-outline-gray-2 bg-surface-white placeholder-ink-gray-4 hover:border-outline-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",disabled:["border bg-surface-gray-1 placeholder-ink-gray-3",r.variant==="outline"?"border-outline-gray-2":"border-transparent"],ghost:"border-0 focus:ring-0 focus-visible:ring-0"}[_];return[g,v,x,d.value,"transition-colors w-full dark:[color-scheme:dark]"]});let f=J(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[r.size]),p=J(()=>({sm:"pr-2",md:"pr-2.5",lg:"pr-3",xl:"pr-3"})[r.size]),h=g=>{i("update:modelValue",g)};r.debounce&&(h=nC(h,r.debounce));let m=g=>{h(g.target.value)};return(g,v)=>(T(),P("div",{class:fe(["relative flex items-center",y(s).class]),style:nt(y(s).style)},[g.$slots.prefix?(T(),P("div",{key:0,class:fe(["absolute inset-y-0 left-0 flex items-center",d.value,y(f)])},[Ye(g.$slots,"prefix")],2)):ie("",!0),u("input",Ct({ref_key:"inputRef",ref:l,type:t.type,placeholder:t.placeholder,class:c.value,disabled:t.disabled,id:t.id,value:t.modelValue,required:t.required,onInput:v[0]||(v[0]=(..._)=>y(m)&&y(m)(..._)),onChange:v[1]||(v[1]=(..._)=>y(m)&&y(m)(..._))},o.value),null,16,h0e),g.$slots.suffix?(T(),P("div",{key:1,class:fe(["absolute inset-y-0 right-0 flex items-center",d.value,y(p)])},[Ye(g.$slots,"suffix")],2)):ie("",!0)],6))}});var MK=60,$K=MK*60,DK=$K*24,m0e=DK*7,Qu=1e3,pp=MK*Qu,B0=$K*Qu,z0=DK*Qu,RK=m0e*Qu,rC="millisecond",Zf="second",vl="minute",Qf="hour",wu="day",sw="week",$s="month",PK="quarter",ku="year",wm="date",SR="YYYY-MM-DDTHH:mm:ssZ",E8="Invalid Date",g0e=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,IK=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;const v0e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var n=["th","st","nd","rd"],r=e%100;return"["+e+(n[(r-20)%10]||n[r]||n[0])+"]"}};var vE=function(e,n,r){var i=String(e);return!i||i.length>=n?e:""+Array(n+1-i.length).join(r)+e},y0e=function(e){var n=-e.utcOffset(),r=Math.abs(n),i=Math.floor(r/60),a=r%60;return(n<=0?"+":"-")+vE(i,2,"0")+":"+vE(a,2,"0")},b0e=function t(e,n){if(e.date()<n.date())return-t(n,e);var r=(n.year()-e.year())*12+(n.month()-e.month()),i=e.clone().add(r,$s),a=n-i<0,s=e.clone().add(r+(a?-1:1),$s);return+(-(r+(n-i)/(a?i-s:s-i))||0)},_0e=function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},x0e=function(e){var n={M:$s,y:ku,w:sw,d:wu,D:wm,h:Qf,m:vl,s:Zf,ms:rC,Q:PK};return n[e]||String(e||"").toLowerCase().replace(/s$/,"")},w0e=function(e){return e===void 0};const k0e={s:vE,z:y0e,m:b0e,a:_0e,p:x0e,u:w0e};var zy="en",hp={};hp[zy]=v0e;var OK="$isDayjsObject",CR=function(e){return e instanceof iC||!!(e&&e[OK])},h2=function t(e,n,r){var i;if(!e)return zy;if(typeof e=="string"){var a=e.toLowerCase();hp[a]&&(i=a),n&&(hp[a]=n,i=a);var s=e.split("-");if(!i&&s.length>1)return t(s[0])}else{var o=e.name;hp[o]=e,i=o}return!r&&i&&(zy=i),i||!r&&zy},lr=function(e,n){if(CR(e))return e.clone();var r=typeof n=="object"?n:{};return r.date=e,r.args=arguments,new iC(r)},S0e=function(e,n){return lr(e,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})},Qn=k0e;Qn.l=h2;Qn.i=CR;Qn.w=S0e;var C0e=function(e){var n=e.date,r=e.utc;if(n===null)return new Date(NaN);if(Qn.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var i=n.match(g0e);if(i){var a=i[2]-1||0,s=(i[7]||"0").substring(0,3);return r?new Date(Date.UTC(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(n)},iC=function(){function t(n){this.$L=h2(n.locale,null,!0),this.parse(n),this.$x=this.$x||n.x||{},this[OK]=!0}var e=t.prototype;return e.parse=function(r){this.$d=C0e(r),this.init()},e.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},e.$utils=function(){return Qn},e.isValid=function(){return this.$d.toString()!==E8},e.isSame=function(r,i){var a=lr(r);return this.startOf(i)<=a&&a<=this.endOf(i)},e.isAfter=function(r,i){return lr(r)<this.startOf(i)},e.isBefore=function(r,i){return this.endOf(i)<lr(r)},e.$g=function(r,i,a){return Qn.u(r)?this[i]:this.set(a,r)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(r,i){var a=this,s=Qn.u(i)?!0:i,o=Qn.p(r),l=function(_,x){var w=Qn.w(a.$u?Date.UTC(a.$y,x,_):new Date(a.$y,x,_),a);return s?w:w.endOf(wu)},d=function(_,x){var w=[0,0,0,0],k=[23,59,59,999];return Qn.w(a.toDate()[_].apply(a.toDate("s"),(s?w:k).slice(x)),a)},c=this.$W,f=this.$M,p=this.$D,h="set"+(this.$u?"UTC":"");switch(o){case ku:return s?l(1,0):l(31,11);case $s:return s?l(1,f):l(0,f+1);case sw:{var m=this.$locale().weekStart||0,g=(c<m?c+7:c)-m;return l(s?p-g:p+(6-g),f)}case wu:case wm:return d(h+"Hours",0);case Qf:return d(h+"Minutes",1);case vl:return d(h+"Seconds",2);case Zf:return d(h+"Milliseconds",3);default:return this.clone()}},e.endOf=function(r){return this.startOf(r,!1)},e.$set=function(r,i){var a,s=Qn.p(r),o="set"+(this.$u?"UTC":""),l=(a={},a[wu]=o+"Date",a[wm]=o+"Date",a[$s]=o+"Month",a[ku]=o+"FullYear",a[Qf]=o+"Hours",a[vl]=o+"Minutes",a[Zf]=o+"Seconds",a[rC]=o+"Milliseconds",a)[s],d=s===wu?this.$D+(i-this.$W):i;if(s===$s||s===ku){var c=this.clone().set(wm,1);c.$d[l](d),c.init(),this.$d=c.set(wm,Math.min(this.$D,c.daysInMonth())).$d}else l&&this.$d[l](d);return this.init(),this},e.set=function(r,i){return this.clone().$set(r,i)},e.get=function(r){return this[Qn.p(r)]()},e.add=function(r,i){var a=this,s;r=Number(r);var o=Qn.p(i),l=function(p){var h=lr(a);return Qn.w(h.date(h.date()+Math.round(p*r)),a)};if(o===$s)return this.set($s,this.$M+r);if(o===ku)return this.set(ku,this.$y+r);if(o===wu)return l(1);if(o===sw)return l(7);var d=(s={},s[vl]=pp,s[Qf]=B0,s[Zf]=Qu,s)[o]||1,c=this.$d.getTime()+r*d;return Qn.w(c,this)},e.subtract=function(r,i){return this.add(r*-1,i)},e.format=function(r){var i=this,a=this.$locale();if(!this.isValid())return a.invalidDate||E8;var s=r||SR,o=Qn.z(this),l=this.$H,d=this.$m,c=this.$M,f=a.weekdays,p=a.months,h=a.meridiem,m=function(w,k,S,C){return w&&(w[k]||w(i,s))||S[k].slice(0,C)},g=function(w){return Qn.s(l%12||12,w,"0")},v=h||function(x,w,k){var S=x<12?"AM":"PM";return k?S.toLowerCase():S},_=function(w){switch(w){case"YY":return String(i.$y).slice(-2);case"YYYY":return Qn.s(i.$y,4,"0");case"M":return c+1;case"MM":return Qn.s(c+1,2,"0");case"MMM":return m(a.monthsShort,c,p,3);case"MMMM":return m(p,c);case"D":return i.$D;case"DD":return Qn.s(i.$D,2,"0");case"d":return String(i.$W);case"dd":return m(a.weekdaysMin,i.$W,f,2);case"ddd":return m(a.weekdaysShort,i.$W,f,3);case"dddd":return f[i.$W];case"H":return String(l);case"HH":return Qn.s(l,2,"0");case"h":return g(1);case"hh":return g(2);case"a":return v(l,d,!0);case"A":return v(l,d,!1);case"m":return String(d);case"mm":return Qn.s(d,2,"0");case"s":return String(i.$s);case"ss":return Qn.s(i.$s,2,"0");case"SSS":return Qn.s(i.$ms,3,"0");case"Z":return o}return null};return s.replace(IK,function(x,w){return w||_(x)||o.replace(":","")})},e.utcOffset=function(){return-Math.round(this.$d.getTimezoneOffset()/15)*15},e.diff=function(r,i,a){var s=this,o=Qn.p(i),l=lr(r),d=(l.utcOffset()-this.utcOffset())*pp,c=this-l,f=function(){return Qn.m(s,l)},p;switch(o){case ku:p=f()/12;break;case $s:p=f();break;case PK:p=f()/3;break;case sw:p=(c-d)/RK;break;case wu:p=(c-d)/z0;break;case Qf:p=c/B0;break;case vl:p=c/pp;break;case Zf:p=c/Qu;break;default:p=c;break}return a?p:Qn.a(p)},e.daysInMonth=function(){return this.endOf($s).$D},e.$locale=function(){return hp[this.$L]},e.locale=function(r,i){if(!r)return this.$L;var a=this.clone(),s=h2(r,i,!0);return s&&(a.$L=s),a},e.clone=function(){return Qn.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}(),LK=iC.prototype;lr.prototype=LK;[["$ms",rC],["$s",Zf],["$m",vl],["$H",Qf],["$W",wu],["$M",$s],["$y",ku],["$D",wm]].forEach(function(t){LK[t[1]]=function(e){return this.$g(e,t[0],t[1])}});lr.extend=function(t,e){return t.$i||(t(e,iC,lr),t.$i=!0),lr};lr.locale=h2;lr.isDayjs=CR;lr.unix=function(t){return lr(t*1e3)};lr.en=hp[zy];lr.Ls=hp;lr.p={};const A0e=function(t,e,n){t=t||{};var r=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};n.en.relativeTime=i,r.fromToBase=function(o,l,d,c,f){for(var p=d.$locale().relativeTime||i,h=t.thresholds||[{l:"s",r:44,d:Zf},{l:"m",r:89},{l:"mm",r:44,d:vl},{l:"h",r:89},{l:"hh",r:21,d:Qf},{l:"d",r:35},{l:"dd",r:25,d:wu},{l:"M",r:45},{l:"MM",r:10,d:$s},{l:"y",r:17},{l:"yy",d:ku}],m=h.length,g,v,_,x=0;x<m;x+=1){var w=h[x];w.d&&(g=c?n(o).diff(d,w.d,!0):d.diff(o,w.d,!0));var k=(t.rounding||Math.round)(Math.abs(g));if(_=g>0,k<=w.r||!w.r){k<=1&&x>0&&(w=h[x-1]);var S=p[w.l];f&&(k=f(""+k)),typeof S=="string"?v=S.replace("%d",k):v=S(k,l,w.l,_);break}}if(l)return v;var C=_?p.future:p.past;return typeof C=="function"?C(v):C.replace("%s",v)};function a(o,l,d,c){return r.fromToBase(o,l,d,c)}r.to=function(o,l){return a(o,l,this,!0)},r.from=function(o,l){return a(o,l,this)};var s=function(l){return l.$u?n.utc():n()};r.toNow=function(o){return this.to(s(this),o)},r.fromNow=function(o){return this.from(s(this),o)}};var T0e=function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(n,r,i){return r||i.slice(1)})},VK={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},NK=function(e,n){return e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(r,i,a){var s=a&&a.toUpperCase();return i||n[a]||VK[a]||T0e(n[s])})};const E0e=function(t,e,n){var r=e.prototype,i=r.format;n.en.formats=VK,r.format=function(a){a===void 0&&(a=SR);var s=this.$locale(),o=s.formats,l=o===void 0?{}:o,d=NK(a,l);return i.call(this,d)}},M0e=function(t,e,n){n.updateLocale=function(r,i){var a=n.Ls,s=a[r];if(s){var o=i?Object.keys(i):[];return o.forEach(function(l){s[l]=i[l]}),s}}},$0e=function(t,e,n){var r=e.prototype;r.isToday=function(){var i="YYYY-MM-DD",a=n();return this.format(i)===a.format(i)}};var m2=z0*365,yE=m2/12,D0e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,sv={years:m2,months:yE,days:z0,hours:B0,minutes:pp,seconds:Qu,milliseconds:1,weeks:RK},ow=function(e){return e instanceof BK},jK,al,sy=function(e,n,r){return new BK(e,r,n.$l)},ov=function(e){return al.p(e)+"s"},FK=function(e){return e<0},tf=function(e){return FK(e)?Math.ceil(e):Math.floor(e)},R0e=function(e){return Math.abs(e)},Dh=function(e,n){return e?FK(e)?{negative:!0,format:""+R0e(e)+n}:{negative:!1,format:""+e+n}:{negative:!1,format:""}},BK=function(){function t(n,r,i){var a=this;if(this.$d={},this.$l=i,n===void 0&&(this.$ms=0,this.parseFromMilliseconds()),r)return sy(n*sv[ov(r)],this);if(typeof n=="number")return this.$ms=n,this.parseFromMilliseconds(),this;if(typeof n=="object")return Object.keys(n).forEach(function(d){a.$d[ov(d)]=n[d]}),this.calMilliseconds(),this;if(typeof n=="string"){var s=n.match(D0e);if(s){var o=s.slice(2),l=o.map(function(d){return d!=null?Number(d):0});return this.$d.years=l[0],this.$d.months=l[1],this.$d.weeks=l[2],this.$d.days=l[3],this.$d.hours=l[4],this.$d.minutes=l[5],this.$d.seconds=l[6],this.calMilliseconds(),this}}return this}var e=t.prototype;return e.calMilliseconds=function(){var r=this;this.$ms=Object.keys(this.$d).reduce(function(i,a){return i+(r.$d[a]||0)*sv[a]},0)},e.parseFromMilliseconds=function(){var r=this.$ms;this.$d.years=tf(r/m2),r%=m2,this.$d.months=tf(r/yE),r%=yE,this.$d.days=tf(r/z0),r%=z0,this.$d.hours=tf(r/B0),r%=B0,this.$d.minutes=tf(r/pp),r%=pp,this.$d.seconds=tf(r/Qu),r%=Qu,this.$d.milliseconds=r},e.toISOString=function(){var r=Dh(this.$d.years,"Y"),i=Dh(this.$d.months,"M"),a=+this.$d.days||0;this.$d.weeks&&(a+=this.$d.weeks*7);var s=Dh(a,"D"),o=Dh(this.$d.hours,"H"),l=Dh(this.$d.minutes,"M"),d=this.$d.seconds||0;this.$d.milliseconds&&(d+=this.$d.milliseconds/1e3,d=Math.round(d*1e3)/1e3);var c=Dh(d,"S"),f=r.negative||i.negative||s.negative||o.negative||l.negative||c.negative,p=o.format||l.format||c.format?"T":"",h=f?"-":"",m=h+"P"+r.format+i.format+s.format+p+o.format+l.format+c.format;return m==="P"||m==="-P"?"P0D":m},e.toJSON=function(){return this.toISOString()},e.format=function(r){var i=r||"YYYY-MM-DDTHH:mm:ss",a={Y:this.$d.years,YY:al.s(this.$d.years,2,"0"),YYYY:al.s(this.$d.years,4,"0"),M:this.$d.months,MM:al.s(this.$d.months,2,"0"),D:this.$d.days,DD:al.s(this.$d.days,2,"0"),H:this.$d.hours,HH:al.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:al.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:al.s(this.$d.seconds,2,"0"),SSS:al.s(this.$d.milliseconds,3,"0")};return i.replace(IK,function(s,o){return o||String(a[s])})},e.as=function(r){return this.$ms/sv[ov(r)]},e.get=function(r){var i=this.$ms,a=ov(r);return a==="milliseconds"?i%=1e3:a==="weeks"?i=tf(i/sv[a]):i=this.$d[a],i||0},e.add=function(r,i,a){var s;return i?s=r*sv[ov(i)]:ow(r)?s=r.$ms:s=sy(r,this).$ms,sy(this.$ms+s*(a?-1:1),this)},e.subtract=function(r,i){return this.add(r,i,!0)},e.locale=function(r){var i=this.clone();return i.$l=r,i},e.clone=function(){return sy(this.$ms,this)},e.humanize=function(r){return jK().add(this.$ms,"ms").locale(this.$l).fromNow(!r)},e.valueOf=function(){return this.asMilliseconds()},e.milliseconds=function(){return this.get("milliseconds")},e.asMilliseconds=function(){return this.as("milliseconds")},e.seconds=function(){return this.get("seconds")},e.asSeconds=function(){return this.as("seconds")},e.minutes=function(){return this.get("minutes")},e.asMinutes=function(){return this.as("minutes")},e.hours=function(){return this.get("hours")},e.asHours=function(){return this.as("hours")},e.days=function(){return this.get("days")},e.asDays=function(){return this.as("days")},e.weeks=function(){return this.get("weeks")},e.asWeeks=function(){return this.as("weeks")},e.months=function(){return this.get("months")},e.asMonths=function(){return this.as("months")},e.years=function(){return this.get("years")},e.asYears=function(){return this.as("years")},t}(),M8=function(e,n,r){return e.add(n.years()*r,"y").add(n.months()*r,"M").add(n.days()*r,"d").add(n.hours()*r,"h").add(n.minutes()*r,"m").add(n.seconds()*r,"s").add(n.milliseconds()*r,"ms")};const P0e=function(t,e,n){jK=n,al=n().$utils(),n.duration=function(a,s){var o=n.locale();return sy(a,{$l:o},s)},n.isDuration=ow;var r=e.prototype.add,i=e.prototype.subtract;e.prototype.add=function(a,s){return ow(a)?M8(this,a,1):r.bind(this)(a,s)},e.prototype.subtract=function(a,s){return ow(a)?M8(this,a,-1):i.bind(this)(a,s)}};var I0e=/[+-]\d\d(?::?\d\d)?/g,O0e=/([+-]|\d\d)/g;function L0e(t){t===void 0&&(t="");var e=t.match(I0e);if(!e)return null;var n=(""+e[0]).match(O0e)||["-",0,0],r=n[0],i=n[1],a=n[2],s=+i*60+ +a;return s===0?0:r==="+"?s:-s}const V0e=function(t,e,n){var r=e.prototype;n.utc=function(f){var p={date:f,utc:!0,args:arguments};return new e(p)},r.utc=function(f){var p=n(this.toDate(),{locale:this.$L,utc:!0});return f?p.add(this.utcOffset(),vl):p},r.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var i=r.parse;r.parse=function(f){f.utc&&(this.$u=!0),this.$utils().u(f.$offset)||(this.$offset=f.$offset),i.call(this,f)};var a=r.init;r.init=function(){if(this.$u){var f=this.$d;this.$y=f.getUTCFullYear(),this.$M=f.getUTCMonth(),this.$D=f.getUTCDate(),this.$W=f.getUTCDay(),this.$H=f.getUTCHours(),this.$m=f.getUTCMinutes(),this.$s=f.getUTCSeconds(),this.$ms=f.getUTCMilliseconds()}else a.call(this)};var s=r.utcOffset;r.utcOffset=function(f,p){var h=this.$utils(),m=h.u;if(m(f))return this.$u?0:m(this.$offset)?s.call(this):this.$offset;if(typeof f=="string"&&(f=L0e(f),f===null))return this;var g=Math.abs(f)<=16?f*60:f;if(g===0)return this.utc(p);var v=this.clone();if(p)return v.$offset=g,v.$u=!1,v;var _=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return v=this.local().add(g+_,vl),v.$offset=g,v.$x.$localOffset=_,v};var o=r.format,l="YYYY-MM-DDTHH:mm:ss[Z]";r.format=function(f){var p=f||(this.$u?l:"");return o.call(this,p)},r.valueOf=function(){var f=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-f*pp},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var d=r.toDate;r.toDate=function(f){return f==="s"&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var c=r.diff;r.diff=function(f,p,h){if(f&&this.$u===f.$u)return c.call(this,f,p,h);var m=this.local(),g=n(f).local();return c.call(m,g,p,h)}};var N0e={year:0,month:1,day:2,hour:3,minute:4,second:5},$8={},j0e=function(e,n){n===void 0&&(n={});var r=n.timeZoneName||"short",i=e+"|"+r,a=$8[i];return a||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:r}),$8[i]=a),a};const F0e=function(t,e,n){var r,i=function(c,f,p){p===void 0&&(p={});var h=new Date(c),m=j0e(f,p);return m.formatToParts(h)},a=function(c,f){for(var p=i(c,f),h=[],m=0;m<p.length;m+=1){var g=p[m],v=g.type,_=g.value,x=N0e[v];x>=0&&(h[x]=parseInt(_,10))}var w=h[3],k=w===24?0:w,S=h[0]+"-"+h[1]+"-"+h[2]+" "+k+":"+h[4]+":"+h[5]+":000",C=n.utc(S).valueOf(),A=+c,M=A%1e3;return A-=M,(C-A)/6e4},s=function(c,f,p){var h=c-f*60*1e3,m=a(h,p);if(f===m)return[h,f];h-=(m-f)*60*1e3;var g=a(h,p);return m===g?[h,m]:[c-Math.min(m,g)*60*1e3,Math.max(m,g)]},o=e.prototype;o.tz=function(d,c){d===void 0&&(d=r);var f=this.utcOffset(),p=this.toDate(),h=p.toLocaleString("en-US",{timeZone:d}),m=Math.round((p-new Date(h))/1e3/60),g=-Math.round(p.getTimezoneOffset()/15)*15-m,v=!Number(g),_;if(v)_=this.utcOffset(0,c);else if(_=n(h,{locale:this.$L}).$set(rC,this.$ms).utcOffset(g,!0),c){var x=_.utcOffset();_=_.add(f-x,vl)}return _.$x.$timezone=d,_},o.offsetName=function(d){var c=this.$x.$timezone||n.tz.guess(),f=i(this.valueOf(),c,{timeZoneName:d}).find(function(p){return p.type.toLowerCase()==="timezonename"});return f&&f.value};var l=o.startOf;o.startOf=function(d,c){if(!this.$x||!this.$x.$timezone)return l.call(this,d,c);var f=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L}),p=l.call(f,d,c);return p.tz(this.$x.$timezone,!0)},n.tz=function(d,c,f){var p=f&&c,h=f||c||r,m=a(+n(),h);if(typeof d!="string")return n(d).tz(h);var g=n.utc(d,p).valueOf(),v=s(g,m,h),_=v[0],x=v[1],w=n(_).utcOffset(x);return w.$x.$timezone=h,w},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(d){r=d}},B0e=function(t,e){var n=e.prototype,r=n.format;n.format=function(i){var a=this,s=this.$locale();if(!this.isValid())return r.bind(this)(i);var o=this.$utils(),l=i||SR,d=l.replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(c){switch(c){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return s.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return s.ordinal(a.week(),"W");case"w":case"ww":return o.s(a.week(),c==="w"?1:2,"0");case"W":case"WW":return o.s(a.isoWeek(),c==="W"?1:2,"0");case"k":case"kk":return o.s(String(a.$H===0?24:a.$H),c==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return c}});return r.bind(this)(d)}};var z0e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,D8=/\d/,lv=/\d\d/,U0e=/\d{3}/,H0e=/\d{4}/,lo=/\d\d?/,q0e=/[+-]?\d+/,W0e=/[+-]\d\d:?(\d\d)?|Z/,uv=/\d*[^-_:/,()\s\d]+/,pc={},zK=function(e){return e=+e,e+(e>68?1900:2e3)};function G0e(t){if(!t||t==="Z")return 0;var e=t.match(/([+-]|\d\d)/g),n=+(e[1]*60)+(+e[2]||0);return n===0?0:e[0]==="+"?-n:n}var ji=function(e){return function(n){this[e]=+n}},R8=[W0e,function(t){var e=this.zone||(this.zone={});e.offset=G0e(t)}],rT=function(e){var n=pc[e];return n&&(n.indexOf?n:n.s.concat(n.f))},P8=function(e,n){var r,i=pc,a=i.meridiem;if(!a)r=e===(n?"pm":"PM");else for(var s=1;s<=24;s+=1)if(e.indexOf(a(s,0,n))>-1){r=s>12;break}return r},Y0e={A:[uv,function(t){this.afternoon=P8(t,!1)}],a:[uv,function(t){this.afternoon=P8(t,!0)}],Q:[D8,function(t){this.month=(t-1)*3+1}],S:[D8,function(t){this.milliseconds=+t*100}],SS:[lv,function(t){this.milliseconds=+t*10}],SSS:[U0e,function(t){this.milliseconds=+t}],s:[lo,ji("seconds")],ss:[lo,ji("seconds")],m:[lo,ji("minutes")],mm:[lo,ji("minutes")],H:[lo,ji("hours")],h:[lo,ji("hours")],HH:[lo,ji("hours")],hh:[lo,ji("hours")],D:[lo,ji("day")],DD:[lv,ji("day")],Do:[uv,function(t){var e=pc,n=e.ordinal,r=t.match(/\d+/);if(this.day=r[0],!!n)for(var i=1;i<=31;i+=1)n(i).replace(/\[|\]/g,"")===t&&(this.day=i)}],w:[lo,ji("week")],ww:[lv,ji("week")],M:[lo,ji("month")],MM:[lv,ji("month")],MMM:[uv,function(t){var e=rT("months"),n=rT("monthsShort"),r=(n||e.map(function(i){return i.slice(0,3)})).indexOf(t)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[uv,function(t){var e=rT("months"),n=e.indexOf(t)+1;if(n<1)throw new Error;this.month=n%12||n}],Y:[q0e,ji("year")],YY:[lv,function(t){this.year=zK(t)}],YYYY:[H0e,ji("year")],Z:R8,ZZ:R8};function K0e(t){var e=t.afternoon;if(e!==void 0){var n=t.hours;e?n<12&&(t.hours+=12):n===12&&(t.hours=0),delete t.afternoon}}function X0e(t){t=NK(t,pc&&pc.formats);for(var e=t.match(z0e),n=e.length,r=0;r<n;r+=1){var i=e[r],a=Y0e[i],s=a&&a[0],o=a&&a[1];o?e[r]={regex:s,parser:o}:e[r]=i.replace(/^\[|\]$/g,"")}return function(l){for(var d={},c=0,f=0;c<n;c+=1){var p=e[c];if(typeof p=="string")f+=p.length;else{var h=p.regex,m=p.parser,g=l.slice(f),v=h.exec(g),_=v[0];m.call(d,_),l=l.replace(_,"")}}return K0e(d),d}}var Z0e=function(e,n,r,i){try{if(["x","X"].indexOf(n)>-1)return new Date((n==="X"?1e3:1)*e);var a=X0e(n),s=a(e),o=s.year,l=s.month,d=s.day,c=s.hours,f=s.minutes,p=s.seconds,h=s.milliseconds,m=s.zone,g=s.week,v=new Date,_=d||(!o&&!l?v.getDate():1),x=o||v.getFullYear(),w=0;o&&!l||(w=l>0?l-1:v.getMonth());var k=c||0,S=f||0,C=p||0,A=h||0;if(m)return new Date(Date.UTC(x,w,_,k,S,C,A+m.offset*60*1e3));if(r)return new Date(Date.UTC(x,w,_,k,S,C,A));var M;return M=new Date(x,w,_,k,S,C,A),g&&(M=i(M).week(g).toDate()),M}catch($){return new Date("")}};const Q0e=function(t,e,n){n.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(zK=t.parseTwoDigitYear);var r=e.prototype,i=r.parse;r.parse=function(a){var s=a.date,o=a.utc,l=a.args;this.$u=o;var d=l[1];if(typeof d=="string"){var c=l[2]===!0,f=l[3]===!0,p=c||f,h=l[2];f&&(h=l[2]),pc=this.$locale(),!c&&h&&(pc=n.Ls[h]),this.$d=Z0e(s,d,o,n),this.init(),h&&h!==!0&&(this.$L=this.locale(h).$L),p&&s!=this.format(d)&&(this.$d=new Date("")),pc={}}else if(d instanceof Array)for(var m=d.length,g=1;g<=m;g+=1){l[1]=d[g-1];var v=n.apply(this,l);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}g===m&&(this.$d=new Date(""))}else i.call(this,a)}};let UK={};function J0e(t,e){UK[t]=e}function Ls(t){var e;return(e=UK[t])!=null?e:null}lr.extend(M0e);lr.extend(A0e);lr.extend(E0e);lr.extend($0e);lr.extend(P0e);lr.extend(V0e);lr.extend(F0e);lr.extend(B0e);lr.extend(Q0e);const e1e={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},t1e={class:"flex"},n1e={class:"w-full flex-1"},r1e={class:"mb-6 flex items-center justify-between"},i1e={class:"flex items-center space-x-2"},a1e={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},s1e={class:"text-p-base text-ink-gray-7"},o1e={key:0,class:"px-4 pb-7 pt-4 sm:px-6"},l1e={class:"space-y-2"},u1e=Ze({__name:"Dialog",props:{modelValue:{type:Boolean},options:{default:()=>({})},disableOutsideClickToClose:{type:Boolean,default:!1}},emits:["update:modelValue","close","after-leave"],setup(t,{emit:e}){const n=t,r=e,i=J(()=>{let h=n.options.actions;return h!=null&&h.length?h.map(m=>{let g=Jt(je(me({},m),{loading:!1,onClick:m.onClick?()=>le(this,null,function*(){g.loading=!0;try{if(m.onClick){let v=()=>{console.warn("Value passed to onClick is a context object. Please use context.close() instead of context() to close the dialog."),o()};v.close=o,yield m.onClick(v)}}finally{g.loading=!1}}):o}));return g}):[]}),a=J({get(){return n.modelValue},set(h){r("update:modelValue",h),h||r("close")}});function s(h){a.value=h}function o(){a.value=!1}const l=J(()=>{var m;if(!((m=n.options)!=null&&m.icon))return null;let h=n.options.icon;return typeof h=="string"&&(h={name:h}),h}),d=J(()=>{var g,v;if((g=n.options)!=null&&g.paddingTop)return"";const h=((v=n.options)==null?void 0:v.position)||"center";return{center:"justify-center",top:"pt-[20vh]"}[h]}),c=J(()=>{var h;return(h=n.options)!=null&&h.paddingTop?{paddingTop:n.options.paddingTop}:{}}),f=J(()=>{var g;const h=(g=l.value)==null?void 0:g.appearance;return h?{warning:"bg-surface-amber-2",info:"bg-surface-blue-2",danger:"bg-surface-red-2",success:"bg-surface-green-2"}[h]:"bg-surface-gray-2"}),p=J(()=>{var g;const h=(g=l.value)==null?void 0:g.appearance;return h?{warning:"text-ink-amber-3",info:"text-ink-blue-3",danger:"text-ink-red-4",success:"text-ink-green-3"}[h]:"text-ink-gray-5"});return(h,m)=>(T(),he(y(Ehe),{open:a.value,"onUpdate:open":[m[3]||(m[3]=g=>a.value=g),s]},{default:D(()=>[b(y(fme),null,{default:D(()=>[b(y(ume),{class:"fixed inset-0 bg-black-overlay-200 backdrop-filter backdrop-blur-[12px] overflow-y-auto dialog-overlay outline-none","data-dialog":t.options.title,onAfterLeave:m[2]||(m[2]=g=>h.$emit("after-leave"))},{default:D(()=>[u("div",{class:fe(["flex min-h-screen flex-col items-center px-4 py-4 text-center",d.value]),style:nt(c.value)},[b(y(ime),{class:fe(["my-8 inline-block w-full transform overflow-hidden rounded-xl bg-surface-modal text-left align-middle shadow-xl dialog-content focus-visible:outline-none",{"max-w-7xl":t.options.size==="7xl","max-w-6xl":t.options.size==="6xl","max-w-5xl":t.options.size==="5xl","max-w-4xl":t.options.size==="4xl","max-w-3xl":t.options.size==="3xl","max-w-2xl":t.options.size==="2xl","max-w-xl":t.options.size==="xl","max-w-lg":t.options.size==="lg"||!t.options.size,"max-w-md":t.options.size==="md","max-w-sm":t.options.size==="sm","max-w-xs":t.options.size==="xs"}]),onEscapeKeyDown:m[0]||(m[0]=g=>o()),onInteractOutside:m[1]||(m[1]=g=>{n.disableOutsideClickToClose&&g.preventDefault()})},{default:D(()=>[Ye(h.$slots,"body",{},()=>[Ye(h.$slots,"body-main",{},()=>[u("div",e1e,[u("div",t1e,[u("div",n1e,[Ye(h.$slots,"body-header",{},()=>[u("div",r1e,[u("div",i1e,[l.value?(T(),P("div",{key:0,class:fe(["flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full",f.value])},[b(ma,{name:l.value.name,class:fe(["h-4 w-4",p.value]),"aria-hidden":"true"},null,8,["name","class"])],2)):ie("",!0),b(y(eK),{as:"header"},{default:D(()=>[Ye(h.$slots,"body-title",{},()=>[u("h3",a1e,E(t.options.title||"Untitled"),1)],!0)]),_:3})]),b(y($he),{"as-child":""},{default:D(()=>[b(y(Z),{variant:"ghost",onClick:o},{icon:D(()=>[b(y(Eg),{class:"h-4 w-4 text-ink-gray-9"})]),_:1})]),_:1})])],!0),Ye(h.$slots,"body-content",{},()=>[t.options.message?(T(),he(y(JY),{key:0,"as-child":""},{default:D(()=>[u("p",s1e,E(t.options.message),1)]),_:1})):ie("",!0)],!0)])])])],!0),i.value.length||h.$slots.actions?(T(),P("div",o1e,[Ye(h.$slots,"actions",Tr(Xr({close:o})),()=>[u("div",l1e,[(T(!0),P(_e,null,we(i.value,g=>(T(),he(y(Z),Ct({class:"w-full",key:g.label,disabled:g.disabled},{ref_for:!0},g),{default:D(()=>[W(E(g.label),1)]),_:2},1040,["disabled"]))),128))])],!0)])):ie("",!0)],!0)]),_:3},8,["class"])],6)]),_:3},8,["data-dialog"])]),_:3})]),_:3},8,["open"]))}}),HK=Ft(u1e,[["__scopeId","data-v-5e9d9e2d"]]),zt=HK;zt.Title=eK;zt.Description=JY;Q([]);const d1e=["innerHTML"],qK=Ze({__name:"ErrorMessage",props:{message:{}},setup(t){const e=t,n=J(()=>e.message?e.message instanceof Error?e.message.messages||e.message.message:e.message:"");return(r,i)=>t.message?(T(),P("div",{key:0,class:"whitespace-pre-line text-sm text-ink-red-4",role:"alert",innerHTML:n.value},null,8,d1e)):ie("",!0)}}),c1e={class:"relative flex items-center"},f1e=["disabled","id","value"],p1e=["value","disabled","selected"],Ke=Ze({inheritAttrs:!1,__name:"Select",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e;OS();const i=nh();function a(p){r("update:modelValue",p.target.value)}const s=J(()=>{var p;return((p=n.options)==null?void 0:p.map(h=>typeof h=="string"?{label:h,value:h}:h).filter(Boolean))||[]}),o=J(()=>n.disabled?"text-ink-gray-5":"text-ink-gray-8"),l=J(()=>({sm:"text-base",md:"text-base",lg:"text-lg",xl:"text-xl"})[n.size]),d=J(()=>({sm:"pl-2 pr-5",md:"pl-2.5 pr-5.5",lg:"pl-3 pr-6",xl:"pl-3 pr-6"})[n.size]),c=J(()=>{let p={sm:"rounded h-7",md:"rounded h-8",lg:"rounded-md h-10",xl:"rounded-md h-10"}[n.size],h=n.disabled?"disabled":n.variant,m={subtle:"border border-[--surface-gray-2] bg-surface-gray-2 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",outline:"border border-outline-gray-2 bg-surface-white hover:border-outline-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",ghost:"bg-transparent border-transparent hover:bg-surface-gray-3 focus:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",disabled:["border",n.variant!=="ghost"?"bg-surface-gray-1":"",n.variant==="outline"?"border-outline-gray-2":"border-transparent"]}[h];return[p,l.value,d.value,m,o.value,"transition-colors w-full py-0 truncate"]});let f=J(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[n.size]);return(p,h)=>(T(),P("div",c1e,[p.$slots.prefix?(T(),P("div",{key:0,class:fe(["absolute inset-y-0 left-0 flex items-center",o.value,y(f)])},[Ye(p.$slots,"prefix")],2)):ie("",!0),t.placeholder?xe((T(),P("div",{key:1,class:fe(["pointer-events-none absolute text-ink-gray-4 truncate w-full",[l.value,d.value]])},E(t.placeholder),3)),[[ot,!t.modelValue]]):ie("",!0),u("select",Ct({class:c.value,disabled:t.disabled,id:t.id,value:t.modelValue,onChange:a},y(i)),[(T(!0),P(_e,null,we(s.value,m=>(T(),P("option",{key:m.value,value:m.value,disabled:m.disabled||!1,selected:t.modelValue===m.value},E(m.label),9,p1e))),128))],16,f1e)]))}}),h1e={class:"space-y-1.5"},m1e=["for"],g1e=["placeholder","disabled","id","value","rows"],v1e=Ze({__name:"Textarea",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},debounce:{},rows:{default:3},label:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,i=n,a=nh(),s=Q(null),o=J(()=>{let f={sm:"text-base rounded",md:"text-base rounded",lg:"text-lg rounded-md",xl:"text-xl rounded-md"}[r.size],p={sm:["py-1.5 px-2"],md:["py-1.5 px-2.5"],lg:["py-1.5 px-3"],xl:["py-1.5 px-3"]}[r.size],h=r.disabled?"disabled":r.variant,m={subtle:"border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",outline:"border border-outline-gray-2 bg-surface-white placeholder-ink-gray-4 hover:border-outline-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",disabled:["border bg-surface-gray-1 placeholder-ink-gray-3",r.variant==="outline"?"border-outline-gray-2":"border-transparent"]}[h];return[f,p,m,r.disabled?"text-ink-gray-5":"text-ink-gray-8","transition-colors w-full block"]}),l=J(()=>[{sm:"text-xs",md:"text-base",lg:"text-lg",xl:"text-xl"}[r.size],"text-ink-gray-5"]);let d=f=>{i("update:modelValue",f)};r.debounce&&(d=nC(d,r.debounce));let c=f=>{d(f.target.value)};return e({el:s}),(f,p)=>(T(),P("div",h1e,[t.label?(T(),P("label",{key:0,class:fe(["block",l.value]),for:t.id},E(t.label),11,m1e)):ie("",!0),u("textarea",Ct({ref_key:"textareaRef",ref:s,placeholder:t.placeholder,class:o.value,disabled:t.disabled,id:t.id,value:t.modelValue,rows:t.rows,onInput:p[0]||(p[0]=(...h)=>y(c)&&y(c)(...h)),onChange:p[1]||(p[1]=(...h)=>y(c)&&y(c)(...h))},y(a)),null,16,g1e)]))}}),y1e=["for"],b1e=Ze({__name:"FormLabel",props:{label:{},size:{default:"sm"},id:{},required:{type:Boolean}},setup(t){const e=t,n=J(()=>[{sm:"text-xs",md:"text-base"}[e.size],"text-ink-gray-5"]);return(r,i)=>(T(),P("label",{class:fe(["block",n.value]),for:t.id},[W(E(t.label)+" ",1),t.required?(T(),P(_e,{key:0},[i[0]||(i[0]=u("span",{class:"text-ink-red-3 select-none","aria-hidden":"true"},"*",-1)),i[1]||(i[1]=u("span",{class:"sr-only"},"(required)",-1))],64)):ie("",!0)],10,y1e))}}),_1e={inheritAttrs:!1},ge=Ze(je(me({},_1e),{__name:"FormControl",props:{label:{},description:{},type:{default:"text"},size:{default:"sm"},variant:{default:"subtle"},required:{type:Boolean}},setup(t){const e=wR(),n=t,r=nh(),i=J(()=>{let s={};for(let o in r)o!=="class"&&o!=="style"&&(s[o]=r[o]);return s}),a=J(()=>[{sm:"text-xs",md:"text-base"}[n.size],"text-ink-gray-5"]);return(s,o)=>t.type!="checkbox"?(T(),P("div",{key:0,class:fe(["space-y-1.5",y(r).class]),style:nt(y(r).style)},[t.label?(T(),he(b1e,{key:0,label:t.label,size:t.size,id:y(e),required:t.required},null,8,["label","size","id","required"])):ie("",!0),t.type==="select"?(T(),he(y(Ke),Ct({key:1,id:y(e)},je(me({},i.value),{size:t.size,variant:t.variant})),OA({_:2},[s.$slots.prefix?{name:"prefix",fn:D(()=>[Ye(s.$slots,"prefix")]),key:"0"}:void 0]),1040,["id"])):t.type==="autocomplete"?(T(),he(y(AK),Tr(Ct({key:2},me({},i.value))),OA({_:2},[s.$slots.prefix?{name:"prefix",fn:D(()=>[Ye(s.$slots,"prefix")]),key:"0"}:void 0,s.$slots["item-prefix"]?{name:"item-prefix",fn:D(l=>[Ye(s.$slots,"item-prefix",Tr(Xr(l)))]),key:"1"}:void 0]),1040)):t.type==="textarea"?(T(),he(y(v1e),Ct({key:3,id:y(e)},je(me({},i.value),{size:t.size,variant:t.variant})),null,16,["id"])):(T(),he(y(kR),Ct({key:4,id:y(e)},je(me({},i.value),{type:t.type,size:t.size,variant:t.variant,required:t.required})),OA({_:2},[s.$slots.prefix?{name:"prefix",fn:D(()=>[Ye(s.$slots,"prefix")]),key:"0"}:void 0,s.$slots.suffix?{name:"suffix",fn:D(()=>[Ye(s.$slots,"suffix")]),key:"1"}:void 0]),1040,["id"])),Ye(s.$slots,"description",{},()=>[t.description?(T(),P("p",{key:0,class:fe(a.value)},E(t.description),3)):ie("",!0)])],6)):(T(),he(y(Ut),Ct({key:1,id:y(e)},je(me({},i.value),{label:t.label,size:t.size,class:y(r).class})),null,16,["id"]))}})),x1e={name:"Input",inheritAttrs:!1,expose:["getInputValue"],components:{FeatherIcon:ma},props:{label:{type:String},type:{type:String,default:"text",validator(t){let e=["text","number","checkbox","textarea","select","email","password","date"].includes(t);return e||console.warn(`Invalid value "${t}" for "type" prop for Input`),e}},modelValue:{type:[String,Number,Boolean,Object,Array]},inputClass:{type:[String,Array,Object]},debounce:{type:Number},options:{type:Array},disabled:{type:Boolean},rows:{type:Number,default:3},placeholder:{type:String},iconLeft:{type:String}},emits:["input","change","update:modelValue"],methods:{focus(){this.$refs.input.focus()},blur(){this.$refs.input.blur()},getInputValue(t){let e=t?t.target:this.$refs.input,n=e.value;return this.type=="checkbox"&&(n=e.checked),n}},computed:{passedInputValue(){return"value"in this.$attrs?this.$attrs.value:this.modelValue||null},inputAttributes(){let t={},e=n=>{this.$emit("input",this.getInputValue(n))};return this.debounce&&(e=nC(e,this.debounce)),this.type=="checkbox"&&(t.checked=this.passedInputValue),Object.assign(t,this.$attrs,{onInput:e,onChange:n=>{this.$emit("change",this.getInputValue(n)),this.$emit("update:modelValue",this.getInputValue(n))}})},selectOptions(){return this.options.map(t=>typeof t=="string"?{label:t,value:t}:t).filter(Boolean)},isNormalInput(){return["text","number","checkbox","email","password","date"].includes(this.type)}}},w1e={key:0,class:"mb-2 block text-sm leading-4 text-gray-700"},k1e=["type","disabled","placeholder","value"],S1e=["placeholder","value","disabled","rows"],C1e=["disabled"],A1e=["value","disabled","selected"],T1e={key:1,class:"ml-2 inline-block text-base leading-4"};function E1e(t,e,n,r,i,a){const s=Ji("FeatherIcon");return T(),P("label",{class:fe([n.type=="checkbox"?"flex":"block",t.$attrs.class]),style:nt(t.$attrs.style)},[n.label&&n.type!="checkbox"?(T(),P("span",w1e,E(n.label),1)):ie("",!0),u("div",{class:fe(["relative flex",{"items-center":a.isNormalInput||n.type=="select"}])},[n.iconLeft&&n.type!="checkbox"?(T(),he(s,{key:0,name:n.iconLeft,class:fe(["absolute mx-2 h-4 w-4 text-gray-600",{"mt-2":n.type=="textarea"}])},null,8,["name","class"])):ie("",!0),a.isNormalInput?(T(),P("input",Ct({key:1},a.inputAttributes,{class:["border-gray-400 placeholder-gray-500",[{"form-input block w-full":n.type!="checkbox","form-checkbox":n.type=="checkbox","pl-8":n.iconLeft&&n.type!="checkbox"},n.inputClass]],ref:"input",type:n.type||"text",disabled:n.disabled,placeholder:n.placeholder,value:a.passedInputValue}),null,16,k1e)):ie("",!0),n.type==="textarea"?(T(),P("textarea",Ct({key:2},a.inputAttributes,{placeholder:n.placeholder,class:["placeholder-gray-500",["form-textarea block w-full resize-none",n.inputClass,{"pl-8":n.iconLeft}]],ref:"input",value:a.passedInputValue,disabled:n.disabled,rows:n.rows}),null,16,S1e)):ie("",!0),n.type==="select"?(T(),P("select",Ct({key:3},a.inputAttributes,{class:["form-select block w-full",{"pl-8":n.iconLeft}],ref:"input",disabled:n.disabled}),[(T(!0),P(_e,null,we(a.selectOptions,o=>(T(),P("option",{key:o.value,value:o.value,disabled:o.disabled||!1,selected:a.passedInputValue===o.value},E(o.label),9,A1e))),128))],16,C1e)):ie("",!0)],2),n.label&&n.type=="checkbox"?(T(),P("span",T1e,E(n.label),1)):ie("",!0)],6)}const En=Ft(x1e,[["render",E1e]]),M1e={class:"lucide lucide-eye",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function $1e(t,e){return T(),P("svg",M1e,[...e[0]||(e[0]=[u("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"},null,-1),u("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])}Vt({name:"lucide-eye",render:$1e});const D1e={class:"lucide lucide-eye-off",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function R1e(t,e){return T(),P("svg",D1e,[...e[0]||(e[0]=[u("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"},null,-1),u("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"},null,-1),u("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"},null,-1),u("path",{d:"m2 2 20 20"},null,-1)])])}Vt({name:"lucide-eye-off",render:R1e});const P1e={class:"lucide lucide-command",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function I1e(t,e){return T(),P("svg",P1e,[...e[0]||(e[0]=[u("path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"},null,-1)])])}Vt({name:"lucide-command",render:I1e});const O1e={class:"lucide lucide-arrow-big-up",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function L1e(t,e){return T(),P("svg",O1e,[...e[0]||(e[0]=[u("path",{d:"M9 13a1 1 0 0 0-1-1H5.061a1 1 0 0 1-.75-1.811l6.836-6.835a1.207 1.207 0 0 1 1.707 0l6.835 6.835a1 1 0 0 1-.75 1.811H16a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1z"},null,-1)])])}Vt({name:"lucide-arrow-big-up",render:L1e});const V1e={class:"lucide lucide-option",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function N1e(t,e){return T(),P("svg",V1e,[...e[0]||(e[0]=[u("path",{d:"M3 3h6l6 18h6"},null,-1),u("path",{d:"M14 3h7"},null,-1)])])}Vt({name:"lucide-option",render:N1e});const j1e={class:"lucide lucide-arrow-up",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function F1e(t,e){return T(),P("svg",j1e,[...e[0]||(e[0]=[u("path",{d:"m5 12 7-7 7 7"},null,-1),u("path",{d:"M12 19V5"},null,-1)])])}Vt({name:"lucide-arrow-up",render:F1e});const B1e={class:"lucide lucide-arrow-down",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function z1e(t,e){return T(),P("svg",B1e,[...e[0]||(e[0]=[u("path",{d:"M12 5v14"},null,-1),u("path",{d:"m19 12-7 7-7-7"},null,-1)])])}Vt({name:"lucide-arrow-down",render:z1e});const U1e={class:"lucide lucide-arrow-left",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function H1e(t,e){return T(),P("svg",U1e,[...e[0]||(e[0]=[u("path",{d:"m12 19-7-7 7-7"},null,-1),u("path",{d:"M19 12H5"},null,-1)])])}Vt({name:"lucide-arrow-left",render:H1e});const q1e={class:"lucide lucide-arrow-right",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function W1e(t,e){return T(),P("svg",q1e,[...e[0]||(e[0]=[u("path",{d:"M5 12h14"},null,-1),u("path",{d:"m12 5 7 7-7 7"},null,-1)])])}Vt({name:"lucide-arrow-right",render:W1e});const G1e={class:"lucide lucide-corner-down-left",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Y1e(t,e){return T(),P("svg",G1e,[...e[0]||(e[0]=[u("path",{d:"M20 4v7a4 4 0 0 1-4 4H4"},null,-1),u("path",{d:"m9 10-5 5 5 5"},null,-1)])])}Vt({name:"lucide-corner-down-left",render:Y1e});const K1e={class:"lucide lucide-delete",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function X1e(t,e){return T(),P("svg",K1e,[...e[0]||(e[0]=[u("path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z"},null,-1),u("path",{d:"m12 9 6 6"},null,-1),u("path",{d:"m18 9-6 6"},null,-1)])])}Vt({name:"lucide-delete",render:X1e});const Z1e={},Q1e={class:"spinner",viewBox:"0 0 50 50"};function J1e(t,e){return T(),P("svg",Q1e,[...e[0]||(e[0]=[u("defs",null,[u("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[u("stop",{offset:"0%","stop-color":"rgba(0,110,219,1)"}),u("stop",{offset:"100%","stop-color":"rgba(255,255,255,0)"})])],-1),u("circle",{stroke:"url(#gradient)",class:"spinner-path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"},null,-1)])])}const ebe=Ft(Z1e,[["render",J1e],["__scopeId","data-v-5c03f65e"]]);function Ci(t){this.content=t}Ci.prototype={constructor:Ci,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),a=r.content.slice();return i==-1?a.push(n||t,e):(a[i+1]=e,n&&(a[i]=n)),new Ci(a)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ci(n)},addToStart:function(t,e){return new Ci([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ci(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),a=r.find(t);return i.splice(a==-1?i.length:a,0,e,n),new Ci(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ci.from(t),t.size?new Ci(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ci.from(t),t.size?new Ci(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ci.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ci.from=function(t){if(t instanceof Ci)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ci(e)};function WK(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),a=e.child(r);if(i==a){n+=i.nodeSize;continue}if(!i.sameMarkup(a))return n;if(i.isText&&i.text!=a.text){for(let s=0;i.text[s]==a.text[s];s++)n++;return n}if(i.content.size||a.content.size){let s=WK(i.content,a.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function GK(t,e,n,r){for(let i=t.childCount,a=e.childCount;;){if(i==0||a==0)return i==a?null:{a:n,b:r};let s=t.child(--i),o=e.child(--a),l=s.nodeSize;if(s==o){n-=l,r-=l;continue}if(!s.sameMarkup(o))return{a:n,b:r};if(s.isText&&s.text!=o.text){let d=0,c=Math.min(s.text.length,o.text.length);for(;d<c&&s.text[s.text.length-d-1]==o.text[o.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(s.content.size||o.content.size){let d=GK(s.content,o.content,n-1,r-1);if(d)return d}n-=l,r-=l}}class Xe{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,a){for(let s=0,o=0;o<n;s++){let l=this.content[s],d=o+l.nodeSize;if(d>e&&r(l,i+o,a||null,s)!==!1&&l.content.size){let c=o+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,i+c)}o=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let a="",s=!0;return this.nodesBetween(e,n,(o,l)=>{let d=o.isText?o.text.slice(Math.max(e,l)-l,n-l):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&d||o.isTextblock)&&r&&(s?s=!1:a+=r),a+=d},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),a=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),a=1);a<e.content.length;a++)i.push(e.content[a]);return new Xe(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let a=0,s=0;s<n;a++){let o=this.content[a],l=s+o.nodeSize;l>e&&((s<e||l>n)&&(o.isText?o=o.cut(Math.max(0,e-s),Math.min(o.text.length,n-s)):o=o.cut(Math.max(0,e-s-1),Math.min(o.content.size,n-s-1))),r.push(o),i+=o.nodeSize),s=l}return new Xe(r,i)}cutByIndex(e,n){return e==n?Xe.empty:e==0&&n==this.content.length?this:new Xe(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),a=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Xe(i,a)}addToStart(e){return new Xe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Xe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return WK(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return GK(this,e,n,r)}findIndex(e){if(e==0)return n_(0,e);if(e==this.size)return n_(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),a=r+i.nodeSize;if(a>=e)return a==e?n_(n+1,a):n_(n,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Xe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Xe(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Xe.empty;let n,r=0;for(let i=0;i<e.length;i++){let a=e[i];r+=a.nodeSize,i&&a.isText&&e[i-1].sameMarkup(a)?(n||(n=e.slice(0,i)),n[n.length-1]=a.withText(n[n.length-1].text+a.text)):n&&n.push(a)}return new Xe(n||e,r)}static from(e){if(!e)return Xe.empty;if(e instanceof Xe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Xe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Xe.empty=new Xe([],0);const iT={index:0,offset:0};function n_(t,e){return iT.index=t,iT.offset=e,iT}function g2(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!g2(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!g2(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let nr=class bE{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let a=e[i];if(this.eq(a))return e;if(this.type.excludes(a.type))n||(n=e.slice(0,i));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(a)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&g2(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return bE.none;if(e instanceof bE)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};nr.none=[];class v2 extends Error{}class mt{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=KK(this.content,e+this.openStart,n);return r&&new mt(r,this.openStart,this.openEnd)}removeBetween(e,n){return new mt(YK(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return mt.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new mt(Xe.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let a=e.firstChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=e.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)i++;return new mt(e,r,i)}}mt.empty=new mt(Xe.empty,0,0);function YK(t,e,n){let{index:r,offset:i}=t.findIndex(e),a=t.maybeChild(r),{index:s,offset:o}=t.findIndex(n);if(i==e||a.isText){if(o!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,a.copy(YK(a.content,e-i-1,n-i-1)))}function KK(t,e,n,r){let{index:i,offset:a}=t.findIndex(e),s=t.maybeChild(i);if(a==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let o=KK(s.content,e-a-1,n,s);return o&&t.replaceChild(i,s.copy(o))}function tbe(t,e,n){if(n.openStart>t.depth)throw new v2("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new v2("Inconsistent open depths");return XK(t,e,n,0)}function XK(t,e,n,r){let i=t.index(r),a=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=XK(t,e,n,r+1);return a.copy(a.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,o=s.content;return gp(s,o.cut(0,t.parentOffset).append(n.content).append(o.cut(e.parentOffset)))}else{let{start:s,end:o}=nbe(n,t);return gp(a,QK(t,s,o,e,r))}else return gp(a,y2(t,e,r))}function ZK(t,e){if(!e.type.compatibleContent(t.type))throw new v2("Cannot join "+e.type.name+" onto "+t.type.name)}function _E(t,e,n){let r=t.node(n);return ZK(r,e.node(n)),r}function mp(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Uy(t,e,n,r){let i=(e||t).node(n),a=0,s=e?e.index(n):i.childCount;t&&(a=t.index(n),t.depth>n?a++:t.textOffset&&(mp(t.nodeAfter,r),a++));for(let o=a;o<s;o++)mp(i.child(o),r);e&&e.depth==n&&e.textOffset&&mp(e.nodeBefore,r)}function gp(t,e){return t.type.checkContent(e),t.copy(e)}function QK(t,e,n,r,i){let a=t.depth>i&&_E(t,e,i+1),s=r.depth>i&&_E(n,r,i+1),o=[];return Uy(null,t,i,o),a&&s&&e.index(i)==n.index(i)?(ZK(a,s),mp(gp(a,QK(t,e,n,r,i+1)),o)):(a&&mp(gp(a,y2(t,e,i+1)),o),Uy(e,n,i,o),s&&mp(gp(s,y2(n,r,i+1)),o)),Uy(r,null,i,o),new Xe(o)}function y2(t,e,n){let r=[];if(Uy(null,t,n,r),t.depth>n){let i=_E(t,e,n+1);mp(gp(i,y2(t,e,n+1)),r)}return Uy(e,null,n,r),new Xe(r)}function nbe(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let a=n-1;a>=0;a--)i=e.node(a).copy(Xe.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class U0{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let a=0;a<e;a++)i+=r.child(a).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return nr.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let o=r;r=i,i=o}let a=r.marks;for(var s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!i||!a[s].isInSet(i.marks))&&(a=a[s--].removeFromSet(a));return a}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!i||!r[a].isInSet(i.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new b2(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,a=n;for(let s=e;;){let{index:o,offset:l}=s.content.findIndex(a),d=a-l;if(r.push(s,o,i+l),!d||(s=s.child(o),s.isText))break;a=d-1,i+=l+1}return new U0(n,r,a)}static resolveCached(e,n){let r=I8.get(e);if(r)for(let a=0;a<r.elts.length;a++){let s=r.elts[a];if(s.pos==n)return s}else I8.set(e,r=new rbe);let i=r.elts[r.i]=U0.resolve(e,n);return r.i=(r.i+1)%ibe,i}}class rbe{constructor(){this.elts=[],this.i=0}}const ibe=12,I8=new WeakMap;class b2{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const abe=Object.create(null);let hc=class xE{constructor(e,n,r,i=nr.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Xe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&g2(this.attrs,n||e.defaultAttrs||abe)&&nr.sameSet(this.marks,r||nr.none)}copy(e=null){return e==this.content?this:new xE(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new xE(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return mt.empty;let i=this.resolve(e),a=this.resolve(n),s=r?0:i.sharedDepth(n),o=i.start(s),d=i.node(s).content.cut(i.pos-o,a.pos-o);return new mt(d,i.depth-s,a.depth-s)}replace(e,n,r){return tbe(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return U0.resolveCached(this,e)}resolveNoCache(e){return U0.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,a=>(r.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),JK(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Xe.empty,i=0,a=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,a),o=s&&s.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let l=i;l<a;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(e).matchType(r),s=a&&a.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=nr.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!nr.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Xe.fromJSON(e,n.content),a=e.nodeType(n.type).create(n.attrs,i,r);return a.type.checkAttrs(a.attrs),a}};hc.prototype.text=void 0;class _2 extends hc{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):JK(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new _2(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new _2(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function JK(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Np{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new sbe(e,n);if(r.next==null)return Np.empty;let i=eX(r);r.next&&r.err("Unexpected trailing text");let a=pbe(fbe(i));return hbe(a,r),a}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let a=n;i&&a<r;a++)i=i.matchType(e.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function a(s,o){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return Xe.from(o.map(d=>d.createAndFill()));for(let d=0;d<s.next.length;d++){let{type:c,next:f}=s.next[d];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=a(f,o.concat(c));if(p)return p}}return null}return a(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),a=i.match;if(a.matchType(e)){let s=[];for(let o=i;o.type;o=o.via)s.push(o.type);return s.reverse()}for(let s=0;s<a.next.length;s++){let{type:o,next:l}=a.next[s];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!i.type||l.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let a=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)a+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return a}).join(`
`)}}Np.empty=new Np(!0);class sbe{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function eX(t){let e=[];do e.push(obe(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function obe(t){let e=[];do e.push(lbe(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function lbe(t){let e=cbe(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=ube(t,e);else break;return e}function O8(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function ube(t,e){let n=O8(t),r=n;return t.eat(",")&&(t.next!="}"?r=O8(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function dbe(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let a in n){let s=n[a];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function cbe(t){if(t.eat("(")){let e=eX(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=dbe(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function fbe(t){let e=[[]];return i(a(t,0),n()),e;function n(){return e.push([])-1}function r(s,o,l){let d={term:l,to:o};return e[s].push(d),d}function i(s,o){s.forEach(l=>l.to=o)}function a(s,o){if(s.type=="choice")return s.exprs.reduce((l,d)=>l.concat(a(d,o)),[]);if(s.type=="seq")for(let l=0;;l++){let d=a(s.exprs[l],o);if(l==s.exprs.length-1)return d;i(d,o=n())}else if(s.type=="star"){let l=n();return r(o,l),i(a(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(a(s.expr,o),l),i(a(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(o)].concat(a(s.expr,o));if(s.type=="range"){let l=o;for(let d=0;d<s.min;d++){let c=n();i(a(s.expr,l),c),l=c}if(s.max==-1)i(a(s.expr,l),l);else for(let d=s.min;d<s.max;d++){let c=n();r(l,c),i(a(s.expr,l),c),l=c}return[r(l)]}else{if(s.type=="name")return[r(o,void 0,s.value)];throw new Error("Unknown expr type")}}}}function tX(t,e){return e-t}function L8(t,e){let n=[];return r(e),n.sort(tX);function r(i){let a=t[i];if(a.length==1&&!a[0].term)return r(a[0].to);n.push(i);for(let s=0;s<a.length;s++){let{term:o,to:l}=a[s];!o&&n.indexOf(l)==-1&&r(l)}}}function pbe(t){let e=Object.create(null);return n(L8(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:o,to:l})=>{if(!o)return;let d;for(let c=0;c<i.length;c++)i[c][0]==o&&(d=i[c][1]);L8(t,l).forEach(c=>{d||i.push([o,d=[]]),d.indexOf(c)==-1&&d.push(c)})})});let a=e[r.join(",")]=new Np(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let o=i[s][1].sort(tX);a.next.push({type:i[s][0],next:e[o.join(",")]||n(o)})}return a}}function hbe(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],a=!i.validEnd,s=[];for(let o=0;o<i.next.length;o++){let{type:l,next:d}=i.next[o];s.push(l.name),a&&!(l.isText||l.hasRequiredAttrs())&&(a=!1),r.indexOf(d)==-1&&r.push(d)}a&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function nX(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function rX(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let a=t[r];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function iX(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let a=t[i];a.validate&&a.validate(e[i])}}function aX(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new gbe(t,r,e[r]);return n}let V8=class sX{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=aX(e,r.attrs),this.defaultAttrs=nX(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Np.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:rX(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new hc(this,this.computeAttrs(e),Xe.from(n),nr.setFrom(r))}createChecked(e=null,n,r){return n=Xe.from(n),this.checkContent(n),new hc(this,this.computeAttrs(e),n,nr.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Xe.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),a=i&&i.fillBefore(Xe.empty,!0);return a?new hc(this,e,n.append(a),nr.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){iX(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:nr.none:e}static compile(e,n){let r=Object.create(null);e.forEach((a,s)=>r[a]=new sX(a,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function mbe(t,e,n){let r=n.split("|");return i=>{let a=i===null?"null":typeof i;if(r.indexOf(a)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${a}`)}}class gbe{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?mbe(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class aC{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=aX(e,i.attrs),this.excluded=null;let a=nX(this.attrs);this.instance=a?new nr(this,a):null}create(e=null){return!e&&this.instance?this.instance:new nr(this,rX(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((a,s)=>r[a]=new aC(a,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){iX(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class oX{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Ci.from(e.nodes),n.marks=Ci.from(e.marks||{}),this.nodes=V8.compile(this.spec.nodes,this),this.marks=aC.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],s=a.spec.content||"",o=a.spec.marks;if(a.contentMatch=r[s]||(r[s]=Np.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=o=="_"?null:o?N8(this,o.split(" ")):o==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],s=a.spec.excludes;a.excluded=s==null?[a]:s==""?[]:N8(this,s.split(" "))}this.nodeFromJSON=i=>hc.fromJSON(this,i),this.markFromJSON=i=>nr.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof V8){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new _2(r,r.defaultAttrs,e,nr.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function N8(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],a=t.marks[i],s=a;if(a)n.push(a);else for(let o in t.marks){let l=t.marks[o];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function vbe(t){return t.tag!=null}function ybe(t){return t.style!=null}let vp=class wE{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(vbe(i))this.tags.push(i);else if(ybe(i)){let a=/[^=]*/.exec(i.style)[0];r.indexOf(a)<0&&r.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=e.nodes[i.node];return a.contentMatch.matchType(a)})}parse(e,n={}){let r=new F8(this,n,!1);return r.addAll(e,nr.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new F8(this,n,!0);return r.addAll(e,nr.none,n.from,n.to),mt.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(xbe(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||n.matchesContext(a.context))){if(a.getAttrs){let s=a.getAttrs(e);if(s===!1)continue;a.attrs=s||void 0}return a}}}matchStyle(e,n,r,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let s=this.styles[a],o=s.style;if(!(o.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||o.length>e.length&&(o.charCodeAt(e.length)!=61||o.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let a=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let o=n[s];if((o.priority==null?50:o.priority)<a)break}n.splice(s,0,i)}for(let i in e.marks){let a=e.marks[i].spec.parseDOM;a&&a.forEach(s=>{r(s=B8(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let a=e.nodes[i].spec.parseDOM;a&&a.forEach(s=>{r(s=B8(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new wE(e,wE.schemaRules(e)))}};const lX={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},bbe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},uX={ol:!0,ul:!0},H0=1,kE=2,Hy=4;function j8(t,e,n){return e!=null?(e?H0:0)|(e==="full"?kE:0):t&&t.whitespace=="pre"?H0|kE:n&~Hy}class r_{constructor(e,n,r,i,a,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=nr.none,this.match=a||(s&Hy?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Xe.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&H0)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let n=Xe.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Xe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!lX.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class F8{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,a,s=j8(null,n.preserveWhitespace,0)|(r?Hy:0);i?a=new r_(i.type,i.attrs,nr.none,!0,n.topMatch||i.type.contentMatch,s):r?a=new r_(null,null,nr.none,!0,null,s):a=new r_(e.schema.topNodeType,null,nr.none,!0,null,s),this.nodes=[a],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,a=i.options&kE?"full":this.localPreserveWS||(i.options&H0)>0,{schema:s}=this.parser;if(a==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(a)if(a==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let o=r.split(/\r?\n|\r/);for(let l=0;l<o.length;l++)l&&this.insertNode(s.linebreakReplacement.create(),n,!0),o[l]&&this.insertNode(s.text(o[l]),n,!/\S/.test(o[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),o;uX.hasOwnProperty(s)&&this.parser.normalizeLists&&_be(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));e:if(l?l.ignore:bbe.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let d,c=this.needsBlock;if(lX.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),d=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=l&&l.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),d&&this.sync(a),this.needsBlock=c}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,l,d,l.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],s=r.getPropertyValue(a);if(s)for(let o=void 0;;){let l=this.parser.matchStyle(a,s,this,o);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(d=>!l.clearMark(d)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)o=l;else break}}return n}addElementByRule(e,n,r,i){let a,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(a=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let o=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}a&&this.sync(o)&&this.open--}addAll(e,n,r,i){let a=r||0;for(let s=r?e.childNodes[r]:e.firstChild,o=i==null?null:e.childNodes[i];s!=o;s=s.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(s,n);this.findAtPoint(e,a)}findPlace(e,n,r){let i,a;for(let s=this.open,o=0;s>=0;s--){let l=this.nodes[s],d=l.findWrapping(e);if(d&&(!i||i.length>d.length+o)&&(i=d,a=l,!d.length))break;if(l.solid){if(r)break;o+=2}}if(!i)return null;this.sync(a);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(n=this.enterInner(a,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let s=nr.none;for(let o of i.concat(e.marks))(a.type?a.type.allowsMarkType(o.type):z8(o.type,e.type))&&(s=o.addToSet(s));return a.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let a=this.findPlace(e.create(n),r,!1);return a&&(a=this.enterInner(e,n,r,!0,i)),a}enterInner(e,n,r,i=!1,a){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let o=j8(e,a,s.options);s.options&Hy&&s.content.length==0&&(o|=Hy);let l=nr.none;return r=r.filter(d=>(s.type?s.type.allowsMarkType(d.type):z8(d.type,e))?(l=d.addToSet(l),!1):!0),this.nodes.push(new r_(e,n,l,i,null,o)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=H0)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(i?0:1),s=(o,l)=>{for(;o>=0;o--){let d=n[o];if(d==""){if(o==n.length-1||o==0)continue;for(;l>=a;l--)if(s(o-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=a?r.node(l-a).type:null;if(!c||c.name!=d&&!c.isInGroup(d))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function _be(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&uX.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function xbe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function B8(t){let e={};for(let n in t)e[n]=t[n];return e}function z8(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let a=[],s=o=>{a.push(o);for(let l=0;l<o.edgeCount;l++){let{type:d,next:c}=o.edge(l);if(d==e||a.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}class sh{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=aT(n).createDocumentFragment());let i=r,a=[];return e.forEach(s=>{if(a.length||s.marks.length){let o=0,l=0;for(;o<a.length&&l<s.marks.length;){let d=s.marks[l];if(!this.marks[d.type.name]){l++;continue}if(!d.eq(a[o][0])||d.type.spec.spanning===!1)break;o++,l++}for(;o<a.length;)i=a.pop()[1];for(;l<s.marks.length;){let d=s.marks[l++],c=this.serializeMark(d,s.isInline,n);c&&(a.push([d,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=lw(aT(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let a=this.serializeMark(e.marks[i],e.isInline,n);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&lw(aT(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return lw(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new sh(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=U8(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return U8(e.marks)}}function U8(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function aT(t){return t.document||window.document}const H8=new WeakMap;function wbe(t){let e=H8.get(t);return e===void 0&&H8.set(t,e=kbe(t)),e}function kbe(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function lw(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(a=wbe(r))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let o,l=n?t.createElementNS(n,i):t.createElement(i),d=e[1],c=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){c=2;for(let f in d)if(d[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),d[f]):f=="style"&&l.style?l.style.cssText=d[f]:l.setAttribute(f,d[f])}}for(let f=c;f<e.length;f++){let p=e[f];if(p===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:m}=lw(t,p,n,r);if(l.appendChild(h),m){if(o)throw new RangeError("Multiple content holes");o=m}}}return{dom:l,contentDOM:o}}const dX=65535,cX=Math.pow(2,16);function Sbe(t,e){return t+e*cX}function q8(t){return t&dX}function Cbe(t){return(t-(t&dX))/cX}const fX=1,pX=2,uw=4,hX=8;class SE{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&hX)>0}get deletedBefore(){return(this.delInfo&(fX|uw))>0}get deletedAfter(){return(this.delInfo&(pX|uw))>0}get deletedAcross(){return(this.delInfo&uw)>0}}class es{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&es.empty)return es.empty}recover(e){let n=0,r=q8(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Cbe(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?i:0);if(l>e)break;let d=this.ranges[o+a],c=this.ranges[o+s],f=l+d;if(e<=f){let p=d?e==l?-1:e==f?1:n:n,h=l+i+(p<0?0:c);if(r)return h;let m=e==(n<0?l:f)?null:Sbe(o/3,e-l),g=e==l?pX:e==f?fX:uw;return(n<0?e!=l:e!=f)&&(g|=hX),new SE(h,g,m)}i+=c-d}return r?e+i:new SE(e+i,0,null)}touches(e,n){let r=0,i=q8(n),a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?r:0);if(l>e)break;let d=this.ranges[o+a],c=l+d;if(e<=c&&o==i*3)return!0;r+=this.ranges[o+s]-d}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let s=this.ranges[i],o=s-(this.inverted?a:0),l=s+(this.inverted?0:a),d=this.ranges[i+n],c=this.ranges[i+r];e(o,o+d,l,l+c),a+=c-d}}invert(){return new es(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?es.empty:new es(e<0?[0,-e,0]:[0,0,e])}}es.empty=new es([]);class q0{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new q0(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new q0;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let a=this.from;a<this.to;a++){let s=this._maps[a],o=s.mapResult(e,n);if(o.recover!=null){let l=this.getMirror(a);if(l!=null&&l>a&&l<this.to){a=l,e=this._maps[l].recover(o.recover);continue}}i|=o.delInfo,e=o.pos}return r?e:new SE(e,i,null)}}const sT=Object.create(null);class ia{getMap(){return es.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=sT[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in sT)throw new RangeError("Duplicate use of step JSON ID "+e);return sT[e]=n,n.prototype.jsonID=e,n}}class Gr{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Gr(e,null)}static fail(e){return new Gr(null,e)}static fromReplace(e,n,r,i){try{return Gr.ok(e.replace(n,r,i))}catch(a){if(a instanceof v2)return Gr.fail(a.message);throw a}}}function AR(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let a=t.child(i);a.content.size&&(a=a.copy(AR(a.content,e,a))),a.isInline&&(a=e(a,n,i)),r.push(a)}return Xe.fromArray(r)}class Kd extends ia{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),a=new mt(AR(n.content,(s,o)=>!s.isAtom||!o.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Gr.fromReplace(e,this.from,this.to,a)}invert(){return new yl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Kd(n.pos,r.pos,this.mark)}merge(e){return e instanceof Kd&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Kd(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Kd(n.from,n.to,e.markFromJSON(n.mark))}}ia.jsonID("addMark",Kd);class yl extends ia{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new mt(AR(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Gr.fromReplace(e,this.from,this.to,r)}invert(){return new Kd(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new yl(n.pos,r.pos,this.mark)}merge(e){return e instanceof yl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new yl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new yl(n.from,n.to,e.markFromJSON(n.mark))}}ia.jsonID("removeMark",yl);class Xd extends ia{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Gr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Gr.fromReplace(e,this.pos,this.pos+1,new mt(Xe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Xd(this.pos,n.marks[i]);return new Xd(this.pos,this.mark)}}return new jp(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Xd(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Xd(n.pos,e.markFromJSON(n.mark))}}ia.jsonID("addNodeMark",Xd);class jp extends ia{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Gr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Gr.fromReplace(e,this.pos,this.pos+1,new mt(Xe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Xd(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new jp(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new jp(n.pos,e.markFromJSON(n.mark))}}ia.jsonID("removeNodeMark",jp);class fi extends ia{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&CE(e,this.from,this.to)?Gr.fail("Structure replace would overwrite content"):Gr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new es([this.from,this.to-this.from,this.slice.size])}invert(e){return new fi(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new fi(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof fi)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?mt.empty:new mt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new fi(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?mt.empty:new mt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new fi(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new fi(n.from,n.to,mt.fromJSON(e,n.slice),!!n.structure)}}ia.jsonID("replace",fi);class yi extends ia{constructor(e,n,r,i,a,s,o=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=a,this.insert=s,this.structure=o}apply(e){if(this.structure&&(CE(e,this.from,this.gapFrom)||CE(e,this.gapTo,this.to)))return Gr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Gr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Gr.fromReplace(e,this.from,this.to,r):Gr.fail("Content does not fit in gap")}getMap(){return new es([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new yi(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||a>r.pos?null:new yi(n.pos,r.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new yi(n.from,n.to,n.gapFrom,n.gapTo,mt.fromJSON(e,n.slice),n.insert,!!n.structure)}}ia.jsonID("replaceAround",yi);function CE(t,e,n){let r=t.resolve(e),i=n-e,a=r.depth;for(;i>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,i--;if(i>0){let s=r.node(a).maybeChild(r.indexAfter(a));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Abe(t,e,n,r){let i=[],a=[],s,o;t.doc.nodesBetween(e,n,(l,d,c)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let p=Math.max(d,e),h=Math.min(d+l.nodeSize,n),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(s&&s.to==p&&s.mark.eq(f[g])?s.to=h:i.push(s=new yl(p,h,f[g])));o&&o.to==p?o.to=h:a.push(o=new Kd(p,h,r))}}),i.forEach(l=>t.step(l)),a.forEach(l=>t.step(l))}function Tbe(t,e,n,r){let i=[],a=0;t.doc.nodesBetween(e,n,(s,o)=>{if(!s.isInline)return;a++;let l=null;if(r instanceof aC){let d=s.marks,c;for(;c=r.isInSet(d);)(l||(l=[])).push(c),d=c.removeFromSet(d)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let d=Math.min(o+s.nodeSize,n);for(let c=0;c<l.length;c++){let f=l[c],p;for(let h=0;h<i.length;h++){let m=i[h];m.step==a-1&&f.eq(i[h].style)&&(p=m)}p?(p.to=d,p.step=a):i.push({style:f,from:Math.max(o,e),to:d,step:a})}}}),i.forEach(s=>t.step(new yl(s.from,s.to,s.style)))}function TR(t,e,n,r=n.contentMatch,i=!0){let a=t.doc.nodeAt(e),s=[],o=e+1;for(let l=0;l<a.childCount;l++){let d=a.child(l),c=o+d.nodeSize,f=r.matchType(d.type);if(!f)s.push(new fi(o,c,mt.empty));else{r=f;for(let p=0;p<d.marks.length;p++)n.allowsMarkType(d.marks[p].type)||t.step(new yl(o,c,d.marks[p]));if(i&&d.isText&&n.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(d.text);)m||(m=new mt(Xe.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),s.push(new fi(o+p.index,o+p.index+p[0].length,m))}}o=c}if(!r.validEnd){let l=r.fillBefore(Xe.empty,!0);t.replace(o,o,new mt(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function Ebe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Dg(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,a=0;;--r){let s=t.$from.node(r),o=t.$from.index(r)+i,l=t.$to.indexAfter(r)-a;if(r<t.depth&&s.canReplace(o,l,n))return r;if(r==0||s.type.spec.isolating||!Ebe(s,o,l))break;o&&(i=1),l<s.childCount&&(a=1)}return null}function Mbe(t,e,n){let{$from:r,$to:i,depth:a}=e,s=r.before(a+1),o=i.after(a+1),l=s,d=o,c=Xe.empty,f=0;for(let m=a,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,c=Xe.from(r.node(m).copy(c)),f++):l--;let p=Xe.empty,h=0;for(let m=a,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,p=Xe.from(i.node(m).copy(p)),h++):d++;t.step(new yi(l,d,s,o,new mt(c.append(p),f,h),c.size-f,!0))}function ER(t,e,n=null,r=t){let i=$be(t,e),a=i&&Dbe(r,e);return a?i.map(W8).concat({type:e,attrs:n}).concat(a.map(W8)):null}function W8(t){return{type:t,attrs:null}}function $be(t,e){let{parent:n,startIndex:r,endIndex:i}=t,a=n.contentMatchAt(r).findWrapping(e);if(!a)return null;let s=a.length?a[0]:e;return n.canReplaceWith(r,i,s)?a:null}function Dbe(t,e){let{parent:n,startIndex:r,endIndex:i}=t,a=n.child(r),s=e.contentMatch.findWrapping(a.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let d=r;l&&d<i;d++)l=l.matchType(n.child(d).type);return!l||!l.validEnd?null:s}function Rbe(t,e,n){let r=Xe.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let o=n[s].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Xe.from(n[s].type.create(n[s].attrs,r))}let i=e.start,a=e.end;t.step(new yi(i,a,i,a,new mt(r,0,0),n.length,!0))}function Pbe(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=t.steps.length;t.doc.nodesBetween(e,n,(s,o)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,l)&&Ibe(t.doc,t.mapping.slice(a).map(o),r)){let d=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?d=!1:!h&&m&&(d=!0)}d===!1&&gX(t,s,o,a),TR(t,t.mapping.slice(a).map(o,1),r,void 0,d===null);let c=t.mapping.slice(a),f=c.map(o,1),p=c.map(o+s.nodeSize,1);return t.step(new yi(f,p,f+1,p-1,new mt(Xe.from(r.create(l,null,s.marks)),0,0),1,!0)),d===!0&&mX(t,s,o,a),!1}})}function mX(t,e,n,r){e.forEach((i,a)=>{if(i.isText){let s,o=/\r?\n|\r/g;for(;s=o.exec(i.text);){let l=t.mapping.slice(r).map(n+1+a+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function gX(t,e,n,r){e.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+a);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function Ibe(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Obe(t,e,n,r,i){let a=t.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");n||(n=a.type);let s=n.create(r,null,i||a.marks);if(a.isLeaf)return t.replaceWith(e,e+a.nodeSize,s);if(!n.validContent(a.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new yi(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new mt(Xe.from(s),0,0),1,!0))}function Nu(t,e,n=1,r){let i=t.resolve(e),a=i.depth-n,s=r&&r[r.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,c=n-2;d>a;d--,c--){let f=i.node(d),p=i.index(d);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(p,f.childCount),m=r&&r[c+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[c]||f;if(!f.canReplace(p+1,f.childCount)||!g.type.validContent(h))return!1}let o=i.indexAfter(a),l=r&&r[0];return i.node(a).canReplaceWith(o,o,l?l.type:i.node(a+1).type)}function Lbe(t,e,n=1,r){let i=t.doc.resolve(e),a=Xe.empty,s=Xe.empty;for(let o=i.depth,l=i.depth-n,d=n-1;o>l;o--,d--){a=Xe.from(i.node(o).copy(a));let c=r&&r[d];s=Xe.from(c?c.type.create(c.attrs,s):i.node(o).copy(s))}t.step(new fi(e,e,new mt(a.append(s),n,n),!0))}function zc(t,e){let n=t.resolve(e),r=n.index();return vX(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Vbe(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let a=e.child(i),s=a.type==r?t.type.schema.nodes.text:a.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(a.marks))return!1}return n.validEnd}function vX(t,e){return!!(t&&e&&!t.isLeaf&&Vbe(t,e))}function sC(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let a,s,o=r.index(i);if(i==r.depth?(a=r.nodeBefore,s=r.nodeAfter):n>0?(a=r.node(i+1),o++,s=r.node(i).maybeChild(o)):(a=r.node(i).maybeChild(o-1),s=r.node(i+1)),a&&!a.isTextblock&&vX(a,s)&&r.node(i).canReplace(o,o+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Nbe(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,a=t.doc.resolve(e-n),s=a.node().type;if(i&&s.inlineContent){let c=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);c&&!f?r=!1:!c&&f&&(r=!0)}let o=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);gX(t,c.node(),c.before(),o)}s.inlineContent&&TR(t,e+n-1,s,a.node().contentMatchAt(a.index()),r==null);let l=t.mapping.slice(o),d=l.map(e-n);if(t.step(new fi(d,l.map(e+n,-1),mt.empty,!0)),r===!0){let c=t.doc.resolve(d);mX(t,c.node(),c.before(),t.steps.length)}return t}function jbe(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let a=r.index(i);if(r.node(i).canReplaceWith(a,a,n))return r.before(i+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let a=r.indexAfter(i);if(r.node(i).canReplaceWith(a,a,n))return r.after(i+1);if(a<r.node(i).childCount)return null}return null}function yX(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let a=0;a<n.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(n.openStart==0&&n.size?2:1);a++)for(let s=r.depth;s>=0;s--){let o=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(o>0?1:0),d=r.node(s),c=!1;if(a==1)c=d.canReplace(l,l,i);else{let f=d.contentMatchAt(l).findWrapping(i.firstChild.type);c=f&&d.canReplaceWith(l,l,f[0])}if(c)return o==0?r.pos:o<0?r.before(s+1):r.after(s+1)}return null}function oC(t,e,n=e,r=mt.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),a=t.resolve(n);return bX(i,a,r)?new fi(e,n,r):new Fbe(i,a,r).fit()}function bX(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Fbe{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Xe.empty;for(let i=0;i<=e.depth;i++){let a=e.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Xe.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let a=this.placed,s=r.depth,o=i.depth;for(;s&&o&&a.childCount==1;)a=a.firstChild.content,s--,o--;let l=new mt(a,s,o);return e>-1?new yi(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new fi(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let a=n.firstChild;if(n.childCount>1&&(i=0),a.type.spec.isolating&&i<=r){e=r;break}n=a.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,a=null;r?(a=oT(this.unplaced.content,r-1).firstChild,i=a.content):i=this.unplaced.content;let s=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:l,match:d}=this.frontier[o],c,f=null;if(n==1&&(s?d.matchType(s.type)||(f=d.fillBefore(Xe.from(s),!1)):a&&l.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:o,parent:a,inject:f};if(n==2&&s&&(c=d.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:o,parent:a,wrap:c};if(a&&d.matchType(a.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=oT(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new mt(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=oT(e,n);if(i.childCount<=1&&n>0){let a=e.size-n<=n+i.size;this.unplaced=new mt(oy(e,n-1,1),n-1,a?n-1:r)}else this.unplaced=new mt(oy(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:a}){for(;this.depth>n;)this.closeFrontierNode();if(a)for(let g=0;g<a.length;g++)this.openFrontierNode(a[g]);let s=this.unplaced,o=r?r.content:s.content,l=s.openStart-e,d=0,c=[],{match:f,type:p}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)c.push(i.child(g));f=f.matchFragment(i)}let h=o.size+e-(s.content.size-s.openEnd);for(;d<o.childCount;){let g=o.child(d),v=f.matchType(g.type);if(!v)break;d++,(d>1||l==0||g.content.size)&&(f=v,c.push(_X(g.mark(p.allowedMarks(g.marks)),d==1?l:0,d==o.childCount?h:-1)))}let m=d==o.childCount;m||(h=-1),this.placed=ly(this.placed,n,Xe.from(c)),this.frontier[n].match=f,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=o;g<h;g++){let _=v.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),v=_.content}this.unplaced=m?e==0?mt.empty:new mt(oy(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new mt(oy(s.content,e,d),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!lT(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],a=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=lT(e,n,i,r,a);if(s){for(let o=n-1;o>=0;o--){let{match:l,type:d}=this.frontier[o],c=lT(e,o,d,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:a?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ly(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),a=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,a)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ly(this.placed,this.depth,Xe.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Xe.empty,!0);n.childCount&&(this.placed=ly(this.placed,this.frontier.length,n))}}function oy(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(oy(t.firstChild.content,e-1,n)))}function ly(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ly(t.lastChild.content,e-1,n)))}function oT(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function _X(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,_X(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Xe.empty,!0)))),t.copy(r)}function lT(t,e,n,r,i){let a=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==a.childCount&&!n.compatibleContent(a.type))return null;let o=r.fillBefore(a.content,!0,s);return o&&!Bbe(n,a.content,s)?o:null}function Bbe(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function zbe(t){return t.spec.defining||t.spec.definingForContent}function Ube(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),a=t.doc.resolve(n);if(bX(i,a,r))return t.step(new fi(e,n,r));let s=wX(i,a);s[s.length-1]==0&&s.pop();let o=-(i.depth+1);s.unshift(o);for(let p=i.depth,h=i.pos-1;p>0;p--,h--){let m=i.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;s.indexOf(p)>-1?o=p:i.before(p)==h&&s.splice(1,0,-p)}let l=s.indexOf(o),d=[],c=r.openStart;for(let p=r.content,h=0;;h++){let m=p.firstChild;if(d.push(m),h==r.openStart)break;p=m.content}for(let p=c-1;p>=0;p--){let h=d[p],m=zbe(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(o)-1)))c=p;else if(m||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+c+1)%(r.openStart+1),m=d[h];if(m)for(let g=0;g<s.length;g++){let v=s[(g+l)%s.length],_=!0;v<0&&(_=!1,v=-v);let x=i.node(v-1),w=i.index(v-1);if(x.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(v),_?a.after(v):n,new mt(xX(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let p=s.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>f));p--){let h=s[p];h<0||(e=i.before(h),n=a.after(h))}}function xX(t,e,n,r,i){if(e<n){let a=t.firstChild;t=t.replaceChild(0,a.copy(xX(a.content,e+1,n,r,a)))}if(e>r){let a=i.contentMatchAt(0),s=a.fillBefore(t).append(t);t=s.append(a.matchFragment(s).fillBefore(Xe.empty,!0))}return t}function Hbe(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=jbe(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new mt(Xe.from(r),0,0))}function qbe(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),a=wX(r,i);for(let s=0;s<a.length;s++){let o=a[s],l=s==a.length-1;if(l&&o==0||r.node(o).type.contentMatch.validEnd)return t.delete(r.start(o),i.end(o));if(o>0&&(l||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return t.delete(r.before(o),i.after(o))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function wX(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let a=t.start(i);if(a<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(a==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==a-1)&&n.push(i)}return n}class Om extends ia{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Gr.fail("No node at attribute step's position");let r=Object.create(null);for(let a in n.attrs)r[a]=n.attrs[a];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Gr.fromReplace(e,this.pos,this.pos+1,new mt(Xe.from(i),0,n.isLeaf?0:1))}getMap(){return es.empty}invert(e){return new Om(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Om(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Om(n.pos,n.attr,n.value)}}ia.jsonID("attr",Om);class W0 extends ia{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Gr.ok(r)}getMap(){return es.empty}invert(e){return new W0(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new W0(n.attr,n.value)}}ia.jsonID("docAttr",W0);let ng=class extends Error{};ng=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ng.prototype=Object.create(Error.prototype);ng.prototype.constructor=ng;ng.prototype.name="TransformError";class MR{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new q0}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ng(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=mt.empty){let i=oC(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new mt(Xe.from(r),0,0))}delete(e,n){return this.replace(e,n,mt.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Ube(this,e,n,r),this}replaceRangeWith(e,n,r){return Hbe(this,e,n,r),this}deleteRange(e,n){return qbe(this,e,n),this}lift(e,n){return Mbe(this,e,n),this}join(e,n=1){return Nbe(this,e,n),this}wrap(e,n){return Rbe(this,e,n),this}setBlockType(e,n=e,r,i=null){return Pbe(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Obe(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Om(e,n,r)),this}setDocAttribute(e,n){return this.step(new W0(e,n)),this}addNodeMark(e,n){return this.step(new Xd(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof nr)n.isInSet(r.marks)&&this.step(new jp(e,n));else{let i=r.marks,a,s=[];for(;a=n.isInSet(i);)s.push(new jp(e,a)),i=a.removeFromSet(i);for(let o=s.length-1;o>=0;o--)this.step(s[o])}return this}split(e,n=1,r){return Lbe(this,e,n,r),this}addMark(e,n,r){return Abe(this,e,n,r),this}removeMark(e,n,r){return Tbe(this,e,n,r),this}clearIncompatible(e,n,r){return TR(this,e,n,r),this}}const uT=Object.create(null);class Wt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new kX(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=mt.empty){let r=n.content.lastChild,i=null;for(let o=0;o<n.openEnd;o++)i=r,r=r.lastChild;let a=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:d}=s[o],c=e.mapping.slice(a);e.replaceRange(c.map(l.pos),c.map(d.pos),o?mt.empty:n),o==0&&K8(e,a,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:s,$to:o}=i[a],l=e.mapping.slice(r),d=l.map(s.pos),c=l.map(o.pos);a?e.deleteRange(d,c):(e.replaceRangeWith(d,c,n),K8(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Ht(e):cm(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let a=e.depth-1;a>=0;a--){let s=n<0?cm(e.node(0),e.node(a),e.before(a+1),e.index(a),n,r):cm(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new us(e.node(0))}static atStart(e){return cm(e,e,0,0,1)||new us(e)}static atEnd(e){return cm(e,e,e.content.size,e.childCount,-1)||new us(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=uT[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in uT)throw new RangeError("Duplicate use of selection JSON ID "+e);return uT[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ht.between(this.$anchor,this.$head).getBookmark()}}Wt.prototype.visible=!0;class kX{constructor(e,n){this.$from=e,this.$to=n}}let G8=!1;function Y8(t){!G8&&!t.parent.inlineContent&&(G8=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ht extends Wt{constructor(e,n=e){Y8(e),Y8(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Wt.near(r);let i=e.resolve(n.map(this.anchor));return new Ht(i.parent.inlineContent?i:r,r)}replace(e,n=mt.empty){if(super.replace(e,n),n==mt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ht&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new lC(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ht(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let a=Wt.findFrom(n,r,!0)||Wt.findFrom(n,-r,!0);if(a)n=a.$head;else return Wt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Wt.findFrom(e,-r,!0)||Wt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ht(e,n)}}Wt.jsonID("text",Ht);class lC{constructor(e,n){this.anchor=e,this.head=n}map(e){return new lC(e.map(this.anchor),e.map(this.head))}resolve(e){return Ht.between(e.resolve(this.anchor),e.resolve(this.head))}}class It extends Wt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),a=e.resolve(i);return r?Wt.near(a):new It(a)}content(){return new mt(Xe.from(this.node),0,0)}eq(e){return e instanceof It&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new $R(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new It(e.resolve(n.anchor))}static create(e,n){return new It(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}It.prototype.visible=!1;Wt.jsonID("node",It);class $R{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new lC(r,r):new $R(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&It.isSelectable(r)?new It(n):Wt.near(n)}}class us extends Wt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=mt.empty){if(n==mt.empty){e.delete(0,e.doc.content.size);let r=Wt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new us(e)}map(e){return new us(e)}eq(e){return e instanceof us}getBookmark(){return Wbe}}Wt.jsonID("all",us);const Wbe={map(){return this},resolve(t){return new us(t)}};function cm(t,e,n,r,i,a=!1){if(e.inlineContent)return Ht.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let o=e.child(s);if(o.isAtom){if(!a&&It.isSelectable(o))return It.create(t,n-(i<0?o.nodeSize:0))}else{let l=cm(t,o,n+i,i<0?o.childCount:0,i,a);if(l)return l}n+=o.nodeSize*i}return null}function K8(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof fi||i instanceof yi))return;let a=t.mapping.maps[r],s;a.forEach((o,l,d,c)=>{s==null&&(s=c)}),t.setSelection(Wt.near(t.doc.resolve(s),n))}const X8=1,i_=2,Z8=4;class Gbe extends MR{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|X8)&~i_,this.storedMarks=null,this}get selectionSet(){return(this.updated&X8)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=i_,this}ensureMarks(e){return nr.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&i_)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~i_,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||nr.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let a=this.storedMarks;if(!a){let s=this.doc.resolve(n);a=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,a)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Wt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Z8,this}get scrolledIntoView(){return(this.updated&Z8)>0}}function Q8(t,e){return!e||!t?t:t.bind(e)}class uy{constructor(e,n,r){this.name=e,this.init=Q8(n.init,r),this.apply=Q8(n.apply,r)}}const Ybe=[new uy("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new uy("selection",{init(t,e){return t.selection||Wt.atStart(e.doc)},apply(t){return t.selection}}),new uy("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new uy("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class dT{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Ybe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new uy(r.key,r.spec.state,r))})}}class km{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let a=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let l=i?i[s].n:0,d=i?i[s].state:this,c=l<n.length&&o.spec.appendTransaction.call(o,l?n.slice(l):n,d,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),a=!0}i&&(i[s]={state:r,n:n.length})}}if(!a)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new km(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let a=r[i];n[a.name]=a.apply(e,this[a.name],this,n)}return n}get tr(){return new Gbe(this)}static create(e){let n=new dT(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new km(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new dT(this.schema,e.plugins),r=n.fields,i=new km(n);for(let a=0;a<r.length;a++){let s=r[a].name;i[s]=this.hasOwnProperty(s)?this[s]:r[a].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],a=i.spec.state;a&&a.toJSON&&(n[r]=a.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new dT(e.schema,e.plugins),a=new km(i);return i.fields.forEach(s=>{if(s.name=="doc")a.doc=hc.fromJSON(e.schema,n.doc);else if(s.name=="selection")a.selection=Wt.fromJSON(a.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(a.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let o in r){let l=r[o],d=l.spec.state;if(l.key==s.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){a[s.name]=d.fromJSON.call(l,e,n[o],a);return}}a[s.name]=s.init(e,a)}}),a}}function SX(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=SX(i,e,{})),n[r]=i}return n}class On{constructor(e){this.spec=e,this.props={},e.props&&SX(e.props,this,this.props),this.key=e.key?e.key.key:CX("plugin")}getState(e){return e[this.key]}}const cT=Object.create(null);function CX(t){return t in cT?t+"$"+ ++cT[t]:(cT[t]=0,t+"$")}class Un{constructor(e="key"){this.key=CX(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ei=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},rg=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let AE=null;const yu=function(t,e,n){let r=AE||(AE=document.createRange());return r.setEnd(t,n==null?t.nodeValue.length:n),r.setStart(t,e||0),r},Kbe=function(){AE=null},Fp=function(t,e,n,r){return n&&(J8(t,e,n,r,-1)||J8(t,e,n,r,1))},Xbe=/^(img|br|input|textarea|hr)$/i;function J8(t,e,n,r,i){for(var a;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Vs(t))){let s=t.parentNode;if(!s||s.nodeType!=1||db(t)||Xbe.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ei(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((a=s.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?Vs(t):0}else return!1}}function Vs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Zbe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Vs(t)}else if(t.parentNode&&!db(t))e=Ei(t),t=t.parentNode;else return null}}function Qbe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!db(t))e=Ei(t)+1,t=t.parentNode;else return null}}function Jbe(t,e,n){for(let r=e==0,i=e==Vs(t);r||i;){if(t==n)return!0;let a=Ei(t);if(t=t.parentNode,!t)return!1;r=r&&a==0,i=i&&a==Vs(t)}}function db(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const uC=function(t){return t.focusNode&&Fp(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Hf(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function e_e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function t_e(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Vs(r.offsetNode),r.offset)}}catch(r){}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Vs(r.startContainer),r.startOffset)}}}const Il=typeof navigator!="undefined"?navigator:null,eV=typeof document!="undefined"?document:null,Uc=Il&&Il.userAgent||"",TE=/Edge\/(\d+)/.exec(Uc),AX=/MSIE \d/.exec(Uc),EE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Uc),Wa=!!(AX||EE||TE),mc=AX?document.documentMode:EE?+EE[1]:TE?+TE[1]:0,Gs=!Wa&&/gecko\/(\d+)/i.test(Uc);Gs&&+(/Firefox\/(\d+)/.exec(Uc)||[0,0])[1];const ME=!Wa&&/Chrome\/(\d+)/.exec(Uc),Zi=!!ME,TX=ME?+ME[1]:0,wa=!Wa&&!!Il&&/Apple Computer/.test(Il.vendor),ig=wa&&(/Mobile\/\w+/.test(Uc)||!!Il&&Il.maxTouchPoints>2),Ds=ig||(Il?/Mac/.test(Il.platform):!1),n_e=Il?/Win/.test(Il.platform):!1,$u=/Android \d/.test(Uc),cb=!!eV&&"webkitFontSmoothing"in eV.documentElement.style,r_e=cb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function i_e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ru(t,e){return typeof t=="number"?t:t[e]}function a_e(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function tV(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,a=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=rg(s);continue}let o=s,l=o==a.body,d=l?i_e(a):a_e(o),c=0,f=0;if(e.top<d.top+ru(r,"top")?f=-(d.top-e.top+ru(i,"top")):e.bottom>d.bottom-ru(r,"bottom")&&(f=e.bottom-e.top>d.bottom-d.top?e.top+ru(i,"top")-d.top:e.bottom-d.bottom+ru(i,"bottom")),e.left<d.left+ru(r,"left")?c=-(d.left-e.left+ru(i,"left")):e.right>d.right-ru(r,"right")&&(c=e.right-d.right+ru(i,"right")),c||f)if(l)a.defaultView.scrollBy(c,f);else{let h=o.scrollLeft,m=o.scrollTop;f&&(o.scrollTop+=f),c&&(o.scrollLeft+=c);let g=o.scrollLeft-h,v=o.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let p=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:rg(s)}}function s_e(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let a=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let o=t.root.elementFromPoint(a,s);if(!o||o==t.dom||!t.dom.contains(o))continue;let l=o.getBoundingClientRect();if(l.top>=n-20){r=o,i=l.top;break}}return{refDOM:r,refTop:i,stack:EX(t.dom)}}function EX(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=rg(r));return e}function o_e({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;MX(n,r==0?0:r-e)}function MX(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:a}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=a&&(r.scrollLeft=a)}}let Rh=null;function l_e(t){if(t.setActive)return t.setActive();if(Rh)return t.focus(Rh);let e=EX(t);t.focus(Rh==null?{get preventScroll(){return Rh={preventScroll:!0},!0}}:void 0),Rh||(Rh=!1,MX(e,0))}function $X(t,e){let n,r=2e8,i,a=0,s=e.top,o=e.top,l,d;for(let c=t.firstChild,f=0;c;c=c.nextSibling,f++){let p;if(c.nodeType==1)p=c.getClientRects();else if(c.nodeType==3)p=yu(c).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=s&&m.bottom>=o){s=Math.max(m.bottom,s),o=Math.min(m.top,o);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=c,r=g,i=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,c.nodeType==1&&g&&(a=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=c,d={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(a=f+1)}}return!n&&l&&(n=l,i=d,r=0),n&&n.nodeType==3?u_e(n,i):!n||r&&n.nodeType==1?{node:t,offset:a}:$X(n,i)}function u_e(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let a=Id(r,1);if(a.top!=a.bottom&&DR(e,a))return{node:t,offset:i+(e.left>=(a.left+a.right)/2?1:0)}}return{node:t,offset:0}}function DR(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function d_e(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function c_e(t,e,n){let{node:r,offset:i}=$X(e,n),a=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,a)}function f_e(t,e,n,r){let i=-1;for(let a=e,s=!1;a!=t.dom;){let o=t.docView.nearestDesc(a,!0),l;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((l=o.dom.getBoundingClientRect()).width||l.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?i=o.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=o.posAfter),s=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?o.posBefore:o.posAfter;a=o.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function DX(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),a=i;;){let s=t.childNodes[a];if(s.nodeType==1){let o=s.getClientRects();for(let l=0;l<o.length;l++){let d=o[l];if(DR(e,d))return DX(s,e,d)}}if((a=(a+1)%r)==i)break}return t}function p_e(t,e){let n=t.dom.ownerDocument,r,i=0,a=t_e(n,e.left,e.top);a&&({node:r,offset:i}=a);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),o;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let d=t.dom.getBoundingClientRect();if(!DR(e,d)||(s=DX(t.dom,e,d),!s))return null}if(wa)for(let d=s;r&&d;d=rg(d))d.draggable&&(r=void 0);if(s=d_e(s,e),r){if(Gs&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let d;cb&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=f_e(t,r,i,e))}o==null&&(o=c_e(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function nV(t){return t.top<t.bottom||t.left<t.right}function Id(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(nV(r))return r}return Array.prototype.find.call(n,nV)||t.getBoundingClientRect()}const h_e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function RX(t,e,n){let{node:r,offset:i,atom:a}=t.docView.domFromPos(e,n<0?-1:1),s=cb||Gs;if(r.nodeType==3)if(s&&(h_e.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Id(yu(r,i,i),n);if(Gs&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=Id(yu(r,i-1,i-1),-1);if(d.top==l.top){let c=Id(yu(r,i,i+1),-1);if(c.top!=l.top)return dv(c,c.left<d.left)}}return l}else{let l=i,d=i,c=n<0?1:-1;return n<0&&!i?(d++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:d++,dv(Id(yu(r,l,d),c),c<0)}if(!t.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&i&&(n<0||i==Vs(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return fT(l.getBoundingClientRect(),!1)}if(a==null&&i<Vs(r)){let l=r.childNodes[i];if(l.nodeType==1)return fT(l.getBoundingClientRect(),!0)}return fT(r.getBoundingClientRect(),n>=0)}if(a==null&&i&&(n<0||i==Vs(r))){let l=r.childNodes[i-1],d=l.nodeType==3?yu(l,Vs(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(d)return dv(Id(d,1),!1)}if(a==null&&i<Vs(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let d=l?l.nodeType==3?yu(l,0,s?0:1):l.nodeType==1?l:null:null;if(d)return dv(Id(d,-1),!0)}return dv(Id(r.nodeType==3?yu(r):r,-n),n>=0)}function dv(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function fT(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function PX(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function m_e(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return PX(t,e,()=>{let{node:a}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let o=t.docView.nearestDesc(a,!0);if(!o)break;if(o.node.isBlock){a=o.contentDOM||o.dom;break}a=o.dom.parentNode}let s=RX(t,i.pos,1);for(let o=a.firstChild;o;o=o.nextSibling){let l;if(o.nodeType==1)l=o.getClientRects();else if(o.nodeType==3)l=yu(o,0,o.nodeValue.length).getClientRects();else continue;for(let d=0;d<l.length;d++){let c=l[d];if(c.bottom>c.top+1&&(n=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const g_e=/[\u0590-\u08ac]/;function v_e(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,a=!i,s=i==r.parent.content.size,o=t.domSelection();return o?!g_e.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?a:s:PX(t,e,()=>{let{focusNode:l,focusOffset:d,anchorNode:c,anchorOffset:f}=t.domSelectionRange(),p=o.caretBidiLevel;o.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!h.contains(m.nodeType==1?m:m.parentNode)||l==m&&d==g;try{o.collapse(c,f),l&&(l!=c||d!=f)&&o.extend&&o.extend(l,d)}catch(_){}return p!=null&&(o.caretBidiLevel=p),v}):r.pos==r.start()||r.pos==r.end()}let rV=null,iV=null,aV=!1;function y_e(t,e,n){return rV==e&&iV==n?aV:(rV=e,iV=n,aV=n=="up"||n=="down"?m_e(t,e,n):v_e(t,e,n))}const Ys=0,sV=1,Jf=2,Ol=3;class fb{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ys,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let a,s;if(e==this.contentDOM)a=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(s)+s.size:this.posAtStart}else{let a,s;if(e==this.contentDOM)a=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Ei(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let a=this.getDesc(i),s;if(a&&(!n||a.node))if(r&&(s=a.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return a}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],a=r+i.size;if(r==e&&a!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let o=i.children[s];if(o.size){i=o;break}}return i}if(e<a)return i.descAt(e-r-i.border);r=a}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let a=0;r<this.children.length;r++){let s=this.children[r],o=a+s.size;if(o>e||s instanceof OX){i=e-a;break}a=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof IX&&a.side>=0;r--);if(n<=0){let a,s=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,s=!1);return a&&n&&s&&!a.border&&!a.domAtom?a.domFromPos(a.size,n):{node:this.contentDOM,offset:a?Ei(a.dom)+1:0}}else{let a,s=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,s=!1);return a&&s&&!a.border&&!a.domAtom?a.domFromPos(0,n):{node:this.contentDOM,offset:a?Ei(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let s=r,o=0;;o++){let l=this.children[o],d=s+l.size;if(i==-1&&e<=d){let c=s+l.border;if(e>=c&&n<=d-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,c);e=s;for(let f=o;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Ei(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(d>n||o==this.children.length-1)){n=d;for(let c=o+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){a=Ei(f.dom);break}n+=f.size}a==-1&&(a=this.contentDOM.childNodes.length);break}s=d}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let a=Math.min(e,n),s=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let g=this.children[h],v=m+g.size;if(a>m&&s<v)return g.setSelection(e-m-g.border,n-m-g.border,r,i);m=v}let o=this.domFromPos(e,e?-1:1),l=n==e?o:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),c=r.domSelectionRange(),f=!1;if((Gs||wa)&&e==n){let{node:h,offset:m}=o;if(h.nodeType==3){if(f=!!(m&&h.nodeValue[m-1]==`
`),f&&m==h.nodeValue.length)for(let g=h,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(o=l={node:v.parentNode,offset:Ei(v)+1});break}let _=g.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let g=h.childNodes[m-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Gs&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&wa)&&Fp(o.node,o.offset,c.anchorNode,c.anchorOffset)&&Fp(l.node,l.offset,c.focusNode,c.focusOffset))return;let p=!1;if((d.extend||e==n)&&!(f&&Gs)){d.collapse(o.node,o.offset);try{e!=n&&d.extend(l.node,l.offset),p=!0}catch(h){}}if(!p){if(e>n){let m=o;o=l,l=m}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(o.node,o.offset),d.removeAllRanges(),d.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let a=this.children[i],s=r+a.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let o=r+a.border,l=s-a.border;if(e>=o&&n<=l){this.dirty=e==r||n==s?Jf:sV,e==o&&n==l&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Ol:a.markDirty(e-o,n-o);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Jf:Ol}r=s}this.dirty=Jf}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Jf:sV;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class IX extends fb{constructor(e,n,r,i){let a,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!n.type.spec.raw){if(s.nodeType!=1){let o=document.createElement("span");o.appendChild(s),s=o}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,a=this}matchesWidget(e){return this.dirty==Ys&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class b_e extends fb{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Bp extends fb{constructor(e,n,r,i,a){super(e,[],r,i),this.mark=n,this.spec=a}static create(e,n,r,i){let a=i.nodeViews[n.type.name],s=a&&a(n,i,r);return(!s||!s.dom)&&(s=sh.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Bp(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Ol||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ol&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ys){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ys}}slice(e,n,r){let i=Bp.create(this.parent,this.mark,!0,r),a=this.children,s=this.size;n<s&&(a=DE(a,n,s,r)),e>0&&(a=DE(a,0,e,r));for(let o=0;o<a.length;o++)a[o].parent=i;return i.children=a,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class gc extends fb{constructor(e,n,r,i,a,s,o,l,d){super(e,[],a,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(e,n,r,i,a,s){let o=a.nodeViews[n.type.name],l,d=o&&o(n,a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=d&&d.dom,f=d&&d.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=sh.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let p=c;return c=NX(c,r,n),d?l=new __e(e,n,r,i,c,f||null,p,d,a,s+1):n.isText?new dC(e,n,r,i,c,p,a):new gc(e,n,r,i,c,f||null,p,a,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Xe.empty)}return e}matchesNode(e,n,r){return this.dirty==Ys&&e.eq(this.node)&&x2(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,a=e.composing?this.localCompositionInfo(e,n):null,s=a&&a.pos>-1?a:null,o=a&&a.pos<0,l=new w_e(this,s&&s.node,e);C_e(this.node,this.innerDeco,(d,c,f)=>{d.spec.marks?l.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!f&&l.syncToMarks(c==this.node.childCount?nr.none:this.node.child(c).marks,r,e),l.placeWidget(d,e,i)},(d,c,f,p)=>{l.syncToMarks(d.marks,r,e);let h;l.findNodeMatch(d,c,f,p)||o&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(h=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(d,c,f,h,e)||l.updateNextNode(d,c,f,e,p,i)||l.addNode(d,c,f,e,i),i+=d.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Jf)&&(s&&this.protectLocalComposition(e,s),LX(this.contentDOM,this.children,e),ig&&A_e(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ht)||r<n||i>n+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let s=a.nodeValue,o=T_e(this.node.content,s,r-n,i-n);return o<0?null:{node:a,pos:o,text:s}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let a=n;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let s=new b_e(this,a,n,i);e.input.compositionNodes.push(s),this.children=DE(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Ol||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ys}updateOuterDeco(e){if(x2(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=VX(this.dom,this.nodeDOM,$E(this.outerDeco,this.node,n),$E(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function oV(t,e,n,r,i){NX(r,e,t);let a=new gc(void 0,t,e,n,r,r,r,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class dC extends gc{constructor(e,n,r,i,a,s,o){super(e,n,r,i,a,null,s,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ol||this.dirty!=Ys&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ys||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ys,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),a=document.createTextNode(i.text);return new dC(this.parent,i,this.outerDeco,this.innerDeco,a,a,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ol)}get domAtom(){return!1}isText(e){return this.node.text==e}}class OX extends fb{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ys&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class __e extends gc{constructor(e,n,r,i,a,s,o,l,d,c){super(e,n,r,i,a,s,o,d,c),this.spec=l}update(e,n,r,i){if(this.dirty==Ol)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,n,r);return a&&this.updateInner(e,n,r,i),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function LX(t,e,n){let r=t.firstChild,i=!1;for(let a=0;a<e.length;a++){let s=e[a],o=s.dom;if(o.parentNode==t){for(;o!=r;)r=lV(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(o,r);if(s instanceof Bp){let l=r?r.previousSibling:t.lastChild;LX(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=lV(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const qy=function(t){t&&(this.nodeName=t)};qy.prototype=Object.create(null);const ep=[new qy];function $E(t,e,n){if(t.length==0)return ep;let r=n?ep[0]:new qy,i=[r];for(let a=0;a<t.length;a++){let s=t[a].type.attrs;if(s){s.nodeName&&i.push(r=new qy(s.nodeName));for(let o in s){let l=s[o];l!=null&&(n&&i.length==1&&i.push(r=new qy(e.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+l:o=="style"?r.style=(r.style?r.style+";":"")+l:o!="nodeName"&&(r[o]=l))}}}return i}function VX(t,e,n,r){if(n==ep&&r==ep)return e;let i=e;for(let a=0;a<r.length;a++){let s=r[a],o=n[a];if(a){let l;o&&o.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),o=ep[0]),i=l}x_e(i,o||ep[0],s)}return i}function x_e(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)i.indexOf(r[a])==-1&&t.classList.remove(r[a]);for(let a=0;a<i.length;a++)r.indexOf(i[a])==-1&&t.classList.add(i[a]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function NX(t,e,n){return VX(t,t,ep,$E(e,n,t.nodeType!=1))}function x2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function lV(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class w_e{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=k_e(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,a=this.stack.length>>1,s=Math.min(a,e.length);for(;i<s&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<a;)this.destroyRest(),this.top.dirty=Ys,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let d=this.top.children[l];if(d.matchesMark(e[a])&&!this.isLocked(d.dom)){o=l;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let l=Bp.create(this.top,e[a],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,a++}}findNodeMatch(e,n,r,i){let a=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))a=this.top.children.indexOf(s,this.index);else for(let o=this.index,l=Math.min(this.top.children.length,o+5);o<l;o++){let d=this.top.children[o];if(d.matchesNode(e,n,r)&&!this.preMatch.matched.has(d)){a=o;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,n,r,i,a){let s=this.top.children[i];return s.dirty==Ol&&s.dom==s.contentDOM&&(s.dirty=Jf),s.update(e,n,r,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,a,s){for(let o=this.index;o<this.top.children.length;o++){let l=this.top.children[o];if(l instanceof gc){let d=this.preMatch.matched.get(l);if(d!=null&&d!=a)return!1;let c=l.dom,f,p=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ol&&x2(n,l.outerDeco));if(!p&&l.update(e,n,r,i))return this.destroyBetween(this.index,o),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,e,n,r,i,s)))return this.destroyBetween(this.index,o),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Jf,f.updateChildren(i,s+1),f.dirty=Ys),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,a,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!x2(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let o=gc.create(this.top,n,r,i,a,s);if(o.contentDOM){o.children=e.children,e.children=[];for(let l of o.children)l.parent=o}return e.destroy(),o}addNode(e,n,r,i,a){let s=gc.create(this.top,e,n,r,i,a);s.contentDOM&&s.updateChildren(i,a+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new IX(this.top,e,n,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Bp;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof dC)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((wa||Zi)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new OX(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function k_e(t,e){let n=e,r=n.children.length,i=t.childCount,a=new Map,s=[];e:for(;i>0;){let o;for(;;)if(r){let d=n.children[r-1];if(d instanceof Bp)n=d,r=d.children.length;else{o=d,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=o.node;if(l){if(l!=t.child(i-1))break;--i,a.set(o,i),s.push(o)}}return{index:i,matched:a,matches:s.reverse()}}function S_e(t,e){return t.type.side-e.type.side}function C_e(t,e,n,r){let i=e.locals(t),a=0;if(i.length==0){for(let d=0;d<t.childCount;d++){let c=t.child(d);r(c,i,e.forChild(a,c),d),a+=c.nodeSize}return}let s=0,o=[],l=null;for(let d=0;;){let c,f;for(;s<i.length&&i[s].to==a;){let v=i[s++];v.widget&&(c?(f||(f=[c])).push(v):c=v)}if(c)if(f){f.sort(S_e);for(let v=0;v<f.length;v++)n(f[v],d,!!l)}else n(c,d,!!l);let p,h;if(l)h=-1,p=l,l=null;else if(d<t.childCount)h=d,p=t.child(d++);else break;for(let v=0;v<o.length;v++)o[v].to<=a&&o.splice(v--,1);for(;s<i.length&&i[s].from<=a&&i[s].to>a;)o.push(i[s++]);let m=a+p.nodeSize;if(p.isText){let v=m;s<i.length&&i[s].from<v&&(v=i[s].from);for(let _=0;_<o.length;_++)o[_].to<v&&(v=o[_].to);v<m&&(l=p.cut(v-a),p=p.cut(0,v-a),m=v,h=-1)}else for(;s<i.length&&i[s].to<m;)s++;let g=p.isInline&&!p.isLeaf?o.filter(v=>!v.inline):o.slice();r(p,g,e.forChild(a,p),h),a=m}}function A_e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function T_e(t,e,n,r){for(let i=0,a=0;i<t.childCount&&a<=r;){let s=t.child(i++),o=a;if(a+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<t.childCount;){let d=t.child(i++);if(a+=d.nodeSize,!d.isText)break;l+=d.text}if(a>=n){if(a>=r&&l.slice(r-e.length-o,r-o)==e)return r-e.length;let d=o<r?l.lastIndexOf(e,r-o-1):-1;if(d>=0&&d+e.length+o>=n)return o+d;if(n==r&&l.length>=r+e.length-o&&l.slice(r-o,r-o+e.length)==e)return r}}return-1}function DE(t,e,n,r,i){let a=[];for(let s=0,o=0;s<t.length;s++){let l=t[s],d=o,c=o+=l.size;d>=n||c<=e?a.push(l):(d<e&&a.push(l.slice(0,e-d,r)),i&&(a.push(i),i=void 0),c>n&&a.push(l.slice(n-d,l.size,r)))}return a}function RR(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),a=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let o=r.resolve(s),l,d;if(uC(n)){for(l=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&It.isSelectable(f)&&i.parent&&!(f.isInline&&Jbe(n.focusNode,n.focusOffset,i.dom))){let p=i.posBefore;d=new It(s==p?o:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,p=s;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[l,s]=p==t.state.selection.anchor?[p,f]:[f,p],o=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!d){let f=e=="pointer"||t.state.selection.head<o.pos&&!a?1:-1;d=PR(t,c,o,f)}return d}function jX(t){return t.editable?t.hasFocus():BX(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ju(t,e=!1){let n=t.state.selection;if(FX(t,n),!!jX(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Zi){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Fp(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)M_e(t);else{let{anchor:r,head:i}=n,a,s;uV&&!(n instanceof Ht)&&(n.$from.parent.inlineContent||(a=dV(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=dV(t,n.to))),t.docView.setSelection(r,i,t,e),uV&&(a&&cV(a),s&&cV(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&E_e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const uV=wa||Zi&&TX<63;function dV(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,a=r?n.childNodes[r-1]:null;if(wa&&i&&i.contentEditable=="false")return pT(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return pT(i);if(a)return pT(a)}}function pT(t){return t.contentEditable="true",wa&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function cV(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function E_e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!jX(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function M_e(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Ei(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Wa&&mc<=11&&(n.disabled=!0,n.disabled=!1)}function FX(t,e){if(e instanceof It){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(fV(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else fV(t)}function fV(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function PR(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Ht.between(e,n,r)}function pV(t){return t.editable&&!t.hasFocus()?!1:BX(t)}function BX(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function $_e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Fp(e.node,e.offset,n.anchorNode,n.anchorOffset)}function RE(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),a=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return a&&Wt.findFrom(a,e)}function Bd(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function hV(t,e,n){let r=t.state.selection;if(r instanceof Ht)if(n.indexOf("s")>-1){let{$head:i}=r,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+a.nodeSize*(e<0?-1:1));return Bd(t,new Ht(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=RE(t.state,e);return i&&i instanceof It?Bd(t,i):!1}else if(!(Ds&&n.indexOf("m")>-1)){let i=r.$head,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!a||a.isText)return!1;let o=e<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(s=t.docView.descAt(o))&&!s.contentDOM?It.isSelectable(a)?Bd(t,new It(e<0?t.state.doc.resolve(i.pos-a.nodeSize):i)):cb?Bd(t,new Ht(t.state.doc.resolve(e<0?o:o+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof It&&r.node.isInline)return Bd(t,new Ht(e>0?r.$to:r.$from));{let i=RE(t.state,e);return i?Bd(t,i):!1}}}function w2(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Wy(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ph(t,e){return e<0?D_e(t):R_e(t)}function D_e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,a,s=!1;for(Gs&&n.nodeType==1&&r<w2(n)&&Wy(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if(Wy(o,-1))i=n,a=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(zX(n))break;{let o=n.previousSibling;for(;o&&Wy(o,-1);)i=n.parentNode,a=Ei(o),o=o.previousSibling;if(o)n=o,r=w2(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?PE(t,n,r):i&&PE(t,i,a)}function R_e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=w2(n),a,s;for(;;)if(r<i){if(n.nodeType!=1)break;let o=n.childNodes[r];if(Wy(o,1))a=n,s=++r;else break}else{if(zX(n))break;{let o=n.nextSibling;for(;o&&Wy(o,1);)a=o.parentNode,s=Ei(o)+1,o=o.nextSibling;if(o)n=o,r=0,i=w2(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}a&&PE(t,a,s)}function zX(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function P_e(t,e){for(;t&&e==t.childNodes.length&&!db(t);)e=Ei(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function I_e(t,e){for(;t&&!e&&!db(t);)e=Ei(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function PE(t,e,n){if(e.nodeType!=3){let a,s;(s=P_e(e,n))?(e=s,n=0):(a=I_e(e,n))&&(e=a,n=a.nodeValue.length)}let r=t.domSelection();if(!r)return;if(uC(r)){let a=document.createRange();a.setEnd(e,n),a.setStart(e,n),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&ju(t)},50)}function mV(t,e){let n=t.state.doc.resolve(e);if(!(Zi||n_e)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let a=t.coordsAtPos(e-1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(e<n.end()){let a=t.coordsAtPos(e+1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function gV(t,e,n){let r=t.state.selection;if(r instanceof Ht&&!r.empty||n.indexOf("s")>-1||Ds&&n.indexOf("m")>-1)return!1;let{$from:i,$to:a}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=RE(t.state,e);if(s&&s instanceof It)return Bd(t,s)}if(!i.parent.inlineContent){let s=e<0?i:a,o=r instanceof us?Wt.near(s,e):Wt.findFrom(s,e);return o?Bd(t,o):!1}return!1}function vV(t,e){if(!(t.state.selection instanceof Ht))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(a&&!a.isText){let s=t.state.tr;return e<0?s.delete(n.pos-a.nodeSize,n.pos):s.delete(n.pos,n.pos+a.nodeSize),t.dispatch(s),!0}return!1}function yV(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function O_e(t){if(!wa||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;yV(t,r,"true"),setTimeout(()=>yV(t,r,"false"),20)}return!1}function L_e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function V_e(t,e){let n=e.keyCode,r=L_e(e);if(n==8||Ds&&n==72&&r=="c")return vV(t,-1)||Ph(t,-1);if(n==46&&!e.shiftKey||Ds&&n==68&&r=="c")return vV(t,1)||Ph(t,1);if(n==13||n==27)return!0;if(n==37||Ds&&n==66&&r=="c"){let i=n==37?mV(t,t.state.selection.from)=="ltr"?-1:1:-1;return hV(t,i,r)||Ph(t,i)}else if(n==39||Ds&&n==70&&r=="c"){let i=n==39?mV(t,t.state.selection.from)=="ltr"?1:-1:1;return hV(t,i,r)||Ph(t,i)}else{if(n==38||Ds&&n==80&&r=="c")return gV(t,-1,r)||Ph(t,-1);if(n==40||Ds&&n==78&&r=="c")return O_e(t)||gV(t,1,r)||Ph(t,1);if(r==(Ds?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function IR(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:a}=e;for(;i>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,a--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||sh.fromSchema(t.state.schema),o=YX(),l=o.createElement("div");l.appendChild(s.serializeFragment(r,{document:o}));let d=l.firstChild,c,f=0;for(;d&&d.nodeType==1&&(c=GX[d.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let m=o.createElement(c[h]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),f++}d=l.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${a}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:p,slice:e}}function UX(t,e,n,r,i){let a=i.parent.type.spec.code,s,o;if(!n&&!e)return null;let l=!!e&&(r||a||!n);if(l){if(t.someProp("transformPastedText",p=>{e=p(e,a||r,t)}),a)return o=new mt(Xe.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",p=>{o=p(o,t,!0)}),o;let f=t.someProp("clipboardTextParser",p=>p(e,i,r,t));if(f)o=f;else{let p=i.marks(),{schema:h}=t.state,m=sh.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=s.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(h.text(g,p)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),s=B_e(n),cb&&z_e(s);let d=s&&s.querySelector("[data-pm-slice]"),c=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(o||(o=(t.someProp("clipboardParser")||t.someProp("domParser")||vp.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!N_e.test(p.parentNode.nodeName)?{ignore:!0}:null}})),c)o=U_e(bV(o,+c[1],+c[2]),c[4]);else if(o=mt.maxOpen(j_e(o.content,i),!0),o.openStart||o.openEnd){let f=0,p=0;for(let h=o.content.firstChild;f<o.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=o.content.lastChild;p<o.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);o=bV(o,f,p)}return t.someProp("transformPasted",f=>{o=f(o,t,l)}),o}const N_e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function j_e(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),a,s=[];if(t.forEach(o=>{if(!s)return;let l=i.findWrapping(o.type),d;if(!l)return s=null;if(d=s.length&&a.length&&qX(l,a,o,s[s.length-1],0))s[s.length-1]=d;else{s.length&&(s[s.length-1]=WX(s[s.length-1],a.length));let c=HX(o,l);s.push(c),i=i.matchType(c.type),a=l}}),s)return Xe.from(s)}return t}function HX(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Xe.from(t));return t}function qX(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let a=qX(t,e,n,r.lastChild,i+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Xe.from(HX(n,t,i+1))))}}function WX(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,WX(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Xe.empty,!0);return t.copy(n.append(r))}function IE(t,e,n,r,i,a){let s=e<0?t.firstChild:t.lastChild,o=s.content;return t.childCount>1&&(a=0),i<r-1&&(o=IE(o,e,n,r,i+1,a)),i>=n&&(o=e<0?s.contentMatchAt(0).fillBefore(o,a<=i).append(o):o.append(s.contentMatchAt(s.childCount).fillBefore(Xe.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(o))}function bV(t,e,n){return e<t.openStart&&(t=new mt(IE(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new mt(IE(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const GX={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _V=null;function YX(){return _V||(_V=document.implementation.createHTMLDocument("title"))}let hT=null;function F_e(t){let e=window.trustedTypes;return e?(hT||(hT=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),hT.createHTML(t)):t}function B_e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=YX().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&GX[r[1].toLowerCase()])&&(t=i.map(a=>"<"+a+">").join("")+t+i.map(a=>"</"+a+">").reverse().join("")),n.innerHTML=F_e(t),i)for(let a=0;a<i.length;a++)n=n.querySelector(i[a])||n;return n}function z_e(t){let e=t.querySelectorAll(Zi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function U_e(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch(o){return t}let{content:i,openStart:a,openEnd:s}=t;for(let o=r.length-2;o>=0;o-=2){let l=n.nodes[r[o]];if(!l||l.hasRequiredAttrs())break;i=Xe.from(l.create(r[o+1],i)),a++,s++}return new mt(i,a,s)}const ka={},Sa={},H_e={touchstart:!0,touchmove:!0};class q_e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function W_e(t){for(let e in ka){let n=ka[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Y_e(t,r)&&!OR(t,r)&&(t.editable||!(r.type in Sa))&&n(t,r)},H_e[e]?{passive:!0}:void 0)}wa&&t.dom.addEventListener("input",()=>null),OE(t)}function Zd(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function G_e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function OE(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>OR(t,r))})}function OR(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Y_e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function K_e(t,e){!OR(t,e)&&ka[e.type]&&(t.editable||!(e.type in Sa))&&ka[e.type](t,e)}Sa.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!XX(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!($u&&Zi&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ig&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Hf(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||V_e(t,n)?n.preventDefault():Zd(t,"key")};Sa.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Sa.keypress=(t,e)=>{let n=e;if(XX(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ds&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ht)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),a=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,a))&&t.dispatch(a()),n.preventDefault()}};function cC(t){return{left:t.clientX,top:t.clientY}}function X_e(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function LR(t,e,n,r,i){if(r==-1)return!1;let a=t.state.doc.resolve(r);for(let s=a.depth+1;s>0;s--)if(t.someProp(e,o=>s>a.depth?o(t,n,a.nodeAfter,a.before(s),i,!0):o(t,n,a.node(s),a.before(s),i,!1)))return!0;return!1}function Lm(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Z_e(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&It.isSelectable(r)?(Lm(t,new It(n)),!0):!1}function Q_e(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof It&&(r=n.node);let a=t.state.doc.resolve(e);for(let s=a.depth+1;s>0;s--){let o=s>a.depth?a.nodeAfter:a.node(s);if(It.isSelectable(o)){r&&n.$from.depth>0&&s>=n.$from.depth&&a.before(n.$from.depth+1)==n.$from.pos?i=a.before(n.$from.depth):i=a.before(s);break}}return i!=null?(Lm(t,It.create(t.state.doc,i)),!0):!1}function J_e(t,e,n,r,i){return LR(t,"handleClickOn",e,n,r)||t.someProp("handleClick",a=>a(t,e,r))||(i?Q_e(t,n):Z_e(t,n))}function exe(t,e,n,r){return LR(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function txe(t,e,n,r){return LR(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||nxe(t,n,r)}function nxe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Lm(t,Ht.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let a=i.depth+1;a>0;a--){let s=a>i.depth?i.nodeAfter:i.node(a),o=i.before(a);if(s.inlineContent)Lm(t,Ht.create(r,o+1,o+1+s.content.size));else if(It.isSelectable(s))Lm(t,It.create(r,o));else continue;return!0}}function VR(t){return k2(t)}const KX=Ds?"metaKey":"ctrlKey";ka.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=VR(t),i=Date.now(),a="singleClick";i-t.input.lastClick.time<500&&X_e(n,t.input.lastClick)&&!n[KX]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?a="doubleClick":t.input.lastClick.type=="doubleClick"&&(a="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:a,button:n.button};let s=t.posAtCoords(cC(n));s&&(a=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new rxe(t,s,n,!!r)):(a=="doubleClick"?exe:txe)(t,s.pos,s.inside,n)?n.preventDefault():Zd(t,"pointer"))};class rxe{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[KX],this.allowDefault=r.shiftKey;let a,s;if(n.inside>-1)a=e.state.doc.nodeAt(n.inside),s=n.inside;else{let c=e.state.doc.resolve(n.pos);a=c.parent,s=c.depth?c.before():0}const o=i?null:r.target,l=o?e.docView.nearestDesc(o,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:d}=e.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||d instanceof It&&d.from<=s&&d.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Gs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zd(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ju(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(cC(e))),this.updateAllowDefault(e),this.allowDefault||!n?Zd(this.view,"pointer"):J_e(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||wa&&this.mightDrag&&!this.mightDrag.node.isAtom||Zi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Lm(this.view,Wt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Zd(this.view,"pointer")}move(e){this.updateAllowDefault(e),Zd(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ka.touchstart=t=>{t.input.lastTouch=Date.now(),VR(t),Zd(t,"pointer")};ka.touchmove=t=>{t.input.lastTouch=Date.now(),Zd(t,"pointer")};ka.contextmenu=t=>VR(t);function XX(t,e){return t.composing?!0:wa&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const ixe=$u?5e3:-1;Sa.compositionstart=Sa.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Ht&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),k2(t,!0),t.markCursor=null;else if(k2(t,!e.selection.empty),Gs&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,a=r.focusOffset;i&&i.nodeType==1&&a!=0;){let s=a<0?i.lastChild:i.childNodes[a-1];if(!s)break;if(s.nodeType==3){let o=t.domSelection();o&&o.collapse(s,s.nodeValue.length);break}else i=s,a=-1}}t.input.composing=!0}ZX(t,ixe)};Sa.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,ZX(t,20))};function ZX(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>k2(t),e))}function QX(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=sxe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function axe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Zbe(e.focusNode,e.focusOffset),r=Qbe(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,a=t.domObserver.lastChangedTextNode;if(n==a||r==a)return a;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function sxe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function k2(t,e=!1){if(!($u&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),QX(t),e||t.docView&&t.docView.dirty){let n=RR(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function oxe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const G0=Wa&&mc<15||ig&&r_e<604;ka.copy=Sa.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let a=G0?null:n.clipboardData,s=r.content(),{dom:o,text:l}=IR(t,s);a?(n.preventDefault(),a.clearData(),a.setData("text/html",o.innerHTML),a.setData("text/plain",l)):oxe(t,o),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function lxe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function uxe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Y0(t,r.value,null,i,e):Y0(t,r.textContent,r.innerHTML,i,e)},50)}function Y0(t,e,n,r,i){let a=UX(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,a||mt.empty)))return!0;if(!a)return!1;let s=lxe(a),o=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(a);return t.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function JX(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Sa.paste=(t,e)=>{let n=e;if(t.composing&&!$u)return;let r=G0?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Y0(t,JX(r),r.getData("text/html"),i,n)?n.preventDefault():uxe(t,n)};class eZ{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const dxe=Ds?"altKey":"ctrlKey";function tZ(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n!=null?n:!e[dxe]}ka.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,a=i.empty?null:t.posAtCoords(cC(n)),s;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof It?i.to-1:i.to))){if(r&&r.mightDrag)s=It.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(s=It.create(t.state.doc,f.posBefore))}}let o=(s||t.state.selection).content(),{dom:l,text:d,slice:c}=IR(t,o);(!n.dataTransfer.files.length||!Zi||TX>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(G0?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",G0||n.dataTransfer.setData("text/plain",d),t.dragging=new eZ(c,tZ(t,n),s)};ka.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Sa.dragover=Sa.dragenter=(t,e)=>e.preventDefault();Sa.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(cC(n));if(!i)return;let a=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",m=>{s=m(s,t,!1)}):s=UX(t,JX(n.dataTransfer),G0?null:n.dataTransfer.getData("text/html"),!1,a);let o=!!(r&&tZ(t,n));if(t.someProp("handleDrop",m=>m(t,n,s||mt.empty,o))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?yX(t.state.doc,a.pos,s):a.pos;l==null&&(l=a.pos);let d=t.state.tr;if(o){let{node:m}=r;m?m.replace(d):d.deleteSelection()}let c=d.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,p=d.doc;if(f?d.replaceRangeWith(c,c,s.content.firstChild):d.replaceRange(c,c,s),d.doc.eq(p))return;let h=d.doc.resolve(c);if(f&&It.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))d.setSelection(new It(h));else{let m=d.mapping.map(l);d.mapping.maps[d.mapping.maps.length-1].forEach((g,v,_,x)=>m=x),d.setSelection(PR(t,h,d.doc.resolve(m)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))};ka.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ju(t)},20))};ka.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ka.beforeinput=(t,e)=>{if(Zi&&$u&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",a=>a(t,Hf(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Sa)ka[t]=Sa[t];function K0(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class S2{constructor(e,n){this.toDOM=e,this.spec=n||yp,this.side=this.spec.side||0}map(e,n,r,i){let{pos:a,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new mi(a-r,a-r,this)}valid(){return!0}eq(e){return this==e||e instanceof S2&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&K0(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class vc{constructor(e,n){this.attrs=e,this.spec=n||yp}map(e,n,r,i){let a=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return a>=s?null:new mi(a,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof vc&&K0(this.attrs,e.attrs)&&K0(this.spec,e.spec)}static is(e){return e.type instanceof vc}destroy(){}}class NR{constructor(e,n){this.attrs=e,this.spec=n||yp}map(e,n,r,i){let a=e.mapResult(n.from+i,1);if(a.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=a.pos?null:new mi(a.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),a;return i==n.from&&!(a=e.child(r)).isText&&i+a.nodeSize==n.to}eq(e){return this==e||e instanceof NR&&K0(this.attrs,e.attrs)&&K0(this.spec,e.spec)}destroy(){}}class mi{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new mi(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new mi(e,e,new S2(n,r))}static inline(e,n,r,i){return new mi(e,n,new vc(r,i))}static node(e,n,r,i){return new mi(e,n,new NR(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof vc}get widget(){return this.type instanceof S2}}const fm=[],yp={};class yr{constructor(e,n){this.local=e.length?e:fm,this.children=n.length?n:fm}static create(e,n){return n.length?C2(n,e,0,yp):qi}find(e,n,r){let i=[];return this.findInner(e==null?0:e,n==null?1e9:n,i,0,r),i}findInner(e,n,r,i,a){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=n&&o.to>=e&&(!a||a(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let o=this.children[s]+1;this.children[s+2].findInner(e-o,n-o,r,i+o,a)}}map(e,n,r){return this==qi||e.maps.length==0?this:this.mapInner(e,n,0,0,r||yp)}mapInner(e,n,r,i,a){let s;for(let o=0;o<this.local.length;o++){let l=this.local[o].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):a.onRemove&&a.onRemove(this.local[o].spec)}return this.children.length?cxe(this.children,s||[],e,n,r,i,a):s?new yr(s.sort(bp),fm):qi}add(e,n){return n.length?this==qi?yr.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,a=0;e.forEach((o,l)=>{let d=l+r,c;if(c=rZ(n,o,d)){for(i||(i=this.children.slice());a<i.length&&i[a]<l;)a+=3;i[a]==l?i[a+2]=i[a+2].addInner(o,c,d+1):i.splice(a,0,l,l+o.nodeSize,C2(c,o,d+1,yp)),a+=3}});let s=nZ(a?iZ(n):n,-r);for(let o=0;o<s.length;o++)s[o].type.valid(e,s[o])||s.splice(o--,1);return new yr(s.length?this.local.concat(s).sort(bp):this.local,i||this.children)}remove(e){return e.length==0||this==qi?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let a=0;a<r.length;a+=3){let s,o=r[a]+n,l=r[a+1]+n;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>o&&f.to<l&&(e[c]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let d=r[a+2].removeInner(s,o+1);d!=qi?r[a+2]=d:(r.splice(a,3),a-=3)}if(i.length){for(let a=0,s;a<e.length;a++)if(s=e[a])for(let o=0;o<i.length;o++)i[o].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new yr(i,r):qi}forChild(e,n){if(this==qi)return this;if(n.isLeaf)return yr.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(r=this.children[o+2]);break}let a=e+1,s=a+n.content.size;for(let o=0;o<this.local.length;o++){let l=this.local[o];if(l.from<s&&l.to>a&&l.type instanceof vc){let d=Math.max(a,l.from)-a,c=Math.min(s,l.to)-a;d<c&&(i||(i=[])).push(l.copy(d,c))}}if(i){let o=new yr(i.sort(bp),fm);return r?new Wd([o,r]):o}return r||qi}eq(e){if(this==e)return!0;if(!(e instanceof yr)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return jR(this.localsInner(e))}localsInner(e){if(this==qi)return fm;if(e.inlineContent||!this.local.some(vc.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof vc||n.push(this.local[r]);return n}forEachSet(e){e(this)}}yr.empty=new yr([],[]);yr.removeOverlap=jR;const qi=yr.empty;class Wd{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,yp));return Wd.from(r)}forChild(e,n){if(n.isLeaf)return yr.empty;let r=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(e,n);a!=qi&&(a instanceof Wd?r=r.concat(a.members):r.push(a))}return Wd.from(r)}eq(e){if(!(e instanceof Wd)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(e);if(a.length)if(!n)n=a;else{r&&(n=n.slice(),r=!1);for(let s=0;s<a.length;s++)n.push(a[s])}}return n?jR(r?n:n.sort(bp)):fm}static from(e){switch(e.length){case 0:return qi;case 1:return e[0];default:return new Wd(e.every(n=>n instanceof yr)?e:e.reduce((n,r)=>n.concat(r instanceof yr?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function cxe(t,e,n,r,i,a,s){let o=t.slice();for(let d=0,c=a;d<n.maps.length;d++){let f=0;n.maps[d].forEach((p,h,m,g)=>{let v=g-m-(h-p);for(let _=0;_<o.length;_+=3){let x=o[_+1];if(x<0||p>x+c-f)continue;let w=o[_]+c-f;h>=w?o[_+1]=p<=w?-2:-1:p>=c&&v&&(o[_]+=v,o[_+1]+=v)}f+=v}),c=n.maps[d].map(c,-1)}let l=!1;for(let d=0;d<o.length;d+=3)if(o[d+1]<0){if(o[d+1]==-2){l=!0,o[d+1]=-1;continue}let c=n.map(t[d]+a),f=c-i;if(f<0||f>=r.content.size){l=!0;continue}let p=n.map(t[d+1]+a,-1),h=p-i,{index:m,offset:g}=r.content.findIndex(f),v=r.maybeChild(m);if(v&&g==f&&g+v.nodeSize==h){let _=o[d+2].mapInner(n,v,c+1,t[d]+a+1,s);_!=qi?(o[d]=f,o[d+1]=h,o[d+2]=_):(o[d+1]=-2,l=!0)}else l=!0}if(l){let d=fxe(o,t,e,n,i,a,s),c=C2(d,r,0,s);e=c.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,p=0;f<c.children.length;f+=3){let h=c.children[f];for(;p<o.length&&o[p]<h;)p+=3;o.splice(p,0,c.children[f],c.children[f+1],c.children[f+2])}}return new yr(e.sort(bp),o)}function nZ(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new mi(i.from+e,i.to+e,i.type))}return n}function fxe(t,e,n,r,i,a,s){function o(l,d){for(let c=0;c<l.local.length;c++){let f=l.local[c].map(r,i,d);f?n.push(f):s.onRemove&&s.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)o(l.children[c+2],l.children[c]+d+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&o(t[l+2],e[l]+a+1);return n}function rZ(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let a=0,s;a<t.length;a++)(s=t[a])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[a]=null);return i}function iZ(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function C2(t,e,n,r){let i=[],a=!1;e.forEach((o,l)=>{let d=rZ(t,o,l+n);if(d){a=!0;let c=C2(d,o,n+l+1,r);c!=qi&&i.push(l,l+o.nodeSize,c)}});let s=nZ(a?iZ(t):t,-n).sort(bp);for(let o=0;o<s.length;o++)s[o].type.valid(e,s[o])||(r.onRemove&&r.onRemove(s[o].spec),s.splice(o--,1));return s.length||i.length?new yr(s,i):qi}function bp(t,e){return t.from-e.from||t.to-e.to}function jR(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let a=e[i];if(a.from==r.from){a.to!=r.to&&(e==t&&(e=t.slice()),e[i]=a.copy(a.from,r.to),xV(e,i+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,a.from),xV(e,i,r.copy(a.from,r.to)));break}}}return e}function xV(t,e,n){for(;e<t.length&&bp(n,t[e])>0;)e++;t.splice(e,0,n)}function mT(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=qi&&e.push(r)}),t.cursorWrapper&&e.push(yr.create(t.state.doc,[t.cursorWrapper.deco])),Wd.from(e)}const pxe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},hxe=Wa&&mc<=11;class mxe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class gxe{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new mxe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Wa&&mc<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),hxe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,pxe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(pV(this.view)){if(this.suppressingSelectionUpdates)return ju(this.view);if(Wa&&mc<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Fp(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let a=e.focusNode;a;a=rg(a))n.add(a);for(let a=e.anchorNode;a;a=rg(a))if(n.has(a)){r=a;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&pV(e)&&!this.ignoreSelectionChange(r),a=-1,s=-1,o=!1,l=[];if(e.editable)for(let c=0;c<n.length;c++){let f=this.registerMutation(n[c],l);f&&(a=a<0?f.from:Math.min(f.from,a),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(o=!0))}if(Gs&&l.length){let c=l.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,p]=c;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of c){let h=p.parentNode;h&&h.nodeName=="LI"&&(!f||bxe(e,f)!=h)&&p.remove()}}}let d=null;a<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&uC(r)&&(d=RR(e))&&d.eq(Wt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ju(e),this.currentSelection.set(r),e.scrollToSelection()):(a>-1||i)&&(a>-1&&(e.docView.markDirty(a,s),vxe(e)),this.handleDOMChange(a,s,o,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ju(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,a=e.nextSibling;if(Wa&&mc<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:p}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(a=p)}let s=i&&i.parentNode==e.target?Ei(i)+1:0,o=r.localPosFromDOM(e.target,s,-1),l=a&&a.parentNode==e.target?Ei(a):e.target.childNodes.length,d=r.localPosFromDOM(e.target,l,1);return{from:o,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let wV=new WeakMap,kV=!1;function vxe(t){if(!wV.has(t)&&(wV.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Gs,kV)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),kV=!0}}function SV(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,a=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Fp(s.node,s.offset,i,a)&&([n,r,i,a]=[i,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a}}function yxe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return SV(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?SV(t,n):null}function bxe(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function _xe(t,e,n){let{node:r,fromOffset:i,toOffset:a,from:s,to:o}=t.docView.parseRange(e,n),l=t.domSelectionRange(),d,c=l.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(d=[{node:c,offset:l.anchorOffset}],uC(l)||d.push({node:l.focusNode,offset:l.focusOffset})),Zi&&t.input.lastKeyCode===8)for(let v=a;v>i;v--){let _=r.childNodes[v-1],x=_.pmViewDesc;if(_.nodeName=="BR"&&!x){a=v;break}if(!x||x.size)break}let f=t.state.doc,p=t.someProp("domParser")||vp.fromSchema(t.state.schema),h=f.resolve(s),m=null,g=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:a,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:xxe,context:h});if(d&&d[0].pos!=null){let v=d[0].pos,_=d[1]&&d[1].pos;_==null&&(_=v),m={anchor:v+s,head:_+s}}return{doc:g,sel:m,from:s,to:o}}function xxe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(wa&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||wa&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const wxe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function kxe(t,e,n,r,i){let a=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let A=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,M=RR(t,A);if(M&&!t.state.selection.eq(M)){if(Zi&&$u&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",R=>R(t,Hf(13,"Enter"))))return;let $=t.state.tr.setSelection(M);A=="pointer"?$.setMeta("pointer",!0):A=="key"&&$.scrollIntoView(),a&&$.setMeta("composition",a),t.dispatch($)}return}let s=t.state.doc.resolve(e),o=s.sharedDepth(n);e=s.before(o+1),n=t.state.doc.resolve(n).after(o+1);let l=t.state.selection,d=_xe(t,e,n),c=t.state.doc,f=c.slice(d.from,d.to),p,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,h="end"):(p=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=Axe(f.content,d.doc.content,d.from,p,h);if(m&&t.input.domChangeCount++,(ig&&t.input.lastIOSEnter>Date.now()-225||$u)&&i.some(A=>A.nodeType==1&&!wxe.test(A.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",A=>A(t,Hf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof Ht&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(d.sel){let A=CV(t,t.state.doc,d.sel);if(A&&!A.eq(t.state.selection)){let M=t.state.tr.setSelection(A);a&&M.setMeta("composition",a),t.dispatch(M)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Ht&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Wa&&mc<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>d.from&&d.doc.textBetween(m.start-d.from-1,m.start-d.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=d.doc.resolveNoCache(m.start-d.from),v=d.doc.resolveNoCache(m.endB-d.from),_=c.resolve(m.start),x=g.sameParent(v)&&g.parent.inlineContent&&_.end()>=m.endA;if((ig&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!x&&g.pos<d.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(d.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",A=>A(t,Hf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Cxe(c,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",A=>A(t,Hf(8,"Backspace")))){$u&&Zi&&t.domObserver.suppressSelectionUpdates();return}Zi&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),$u&&!x&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==m.endA&&(m.endB-=2,v=d.doc.resolveNoCache(m.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(A){return A(t,Hf(13,"Enter"))})},20));let w=m.start,k=m.endA,S=A=>{let M=A||t.state.tr.replace(w,k,d.doc.slice(m.start-d.from,m.endB-d.from));if(d.sel){let $=CV(t,M.doc,d.sel);$&&!(Zi&&t.composing&&$.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&($.head==w||$.head==M.mapping.map(k)-1)||Wa&&$.empty&&$.head==w)&&M.setSelection($)}return a&&M.setMeta("composition",a),M.scrollIntoView()},C;if(x)if(g.pos==v.pos){Wa&&mc<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ju(t),20));let A=S(t.state.tr.delete(w,k)),M=c.resolve(m.start).marksAcross(c.resolve(m.endA));M&&A.ensureMarks(M),t.dispatch(A)}else if(m.endA==m.endB&&(C=Sxe(g.parent.content.cut(g.parentOffset,v.parentOffset),_.parent.content.cut(_.parentOffset,m.endA-_.start())))){let A=S(t.state.tr);C.type=="add"?A.addMark(w,k,C.mark):A.removeMark(w,k,C.mark),t.dispatch(A)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let A=g.parent.textBetween(g.parentOffset,v.parentOffset),M=()=>S(t.state.tr.insertText(A,w,k));t.someProp("handleTextInput",$=>$(t,w,k,A,M))||t.dispatch(M())}else t.dispatch(S());else t.dispatch(S())}function CV(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:PR(t,e.resolve(n.anchor),e.resolve(n.head))}function Sxe(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,a=r,s,o,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)a=n[c].removeFromSet(a);if(i.length==1&&a.length==0)o=i[0],s="add",l=c=>c.mark(o.addToSet(c.marks));else if(i.length==0&&a.length==1)o=a[0],s="remove",l=c=>c.mark(o.removeFromSet(c.marks));else return null;let d=[];for(let c=0;c<e.childCount;c++)d.push(l(e.child(c)));if(Xe.from(d).eq(t))return{mark:o,type:s}}function Cxe(t,e,n,r,i){if(n-e<=i.pos-r.pos||gT(r,!0,!1)<i.pos)return!1;let a=t.resolve(e);if(!r.parent.isTextblock){let o=a.nodeAfter;return o!=null&&n==e+o.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let s=t.resolve(gT(a,!0,!0));return!s.parent.isTextblock||s.pos>n||gT(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function gT(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let a=t.node(r).maybeChild(t.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function Axe(t,e,n,r,i){let a=t.findDiffStart(e,n);if(a==null)return null;let{a:s,b:o}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,a-Math.min(s,o));r-=s+l-a}if(s<a&&t.size<e.size){let l=r<=a&&r>=s?a-r:0;a-=l,a&&a<e.size&&AV(e.textBetween(a-1,a+1))&&(a+=l?1:-1),o=a+(o-s),s=a}else if(o<a){let l=r<=a&&r>=o?a-r:0;a-=l,a&&a<t.size&&AV(t.textBetween(a-1,a+1))&&(a+=l?1:-1),s=a+(s-o),o=a}return{start:a,endA:s,endB:o}}function AV(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class aZ{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new q_e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(DV),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=MV(this),EV(this),this.nodeViews=$V(this),this.docView=oV(this.state.doc,TV(this),mT(this),this.dom,this),this.domObserver=new gxe(this,(r,i,a,s)=>kxe(this,r,i,a,s)),this.domObserver.start(),W_e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&OE(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(DV),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,a=!1,s=!1;e.storedMarks&&this.composing&&(QX(this),s=!0),this.state=e;let o=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=$V(this);Exe(h,this.nodeViews)&&(this.nodeViews=h,a=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&OE(this),this.editable=MV(this),EV(this);let l=mT(this),d=TV(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=a||!this.docView.matchesNode(e.doc,d,l);(f||!e.selection.eq(i.selection))&&(s=!0);let p=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&s_e(this);if(s){this.domObserver.stop();let h=f&&(Wa||Zi)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Txe(i.selection,e.selection);if(f){let m=Zi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=axe(this)),(a||!this.docView.update(e.doc,d,l,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=oV(e.doc,d,l,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$_e(this))?ju(this,h):(FX(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():p&&o_e(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof It){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&tV(this,n.getBoundingClientRect(),e)}else tV(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let a=r.from+(this.state.doc.content.size-n.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(i=a)}this.dragging=new eZ(e.slice,e.move,i<0?void 0:It.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let o=this.directPlugins[s].props[e];if(o!=null&&(i=n?n(o):o))return i}let a=this.state.plugins;if(a)for(let s=0;s<a.length;s++){let o=a[s].props[e];if(o!=null&&(i=n?n(o):o))return i}}hasFocus(){if(Wa){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&l_e(this.dom),ju(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return p_e(this,e)}coordsAtPos(e,n=1){return RX(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return y_e(this,n||this.state,e)}pasteHTML(e,n){return Y0(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Y0(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return IR(this,e)}destroy(){this.docView&&(G_e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],mT(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Kbe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return K_e(this,e)}domSelectionRange(){let e=this.domSelection();return e?wa&&this.root.nodeType===11&&e_e(this.dom.ownerDocument)==this.dom&&yxe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}aZ.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function TV(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[mi.node(0,t.state.doc.content.size,e)]}function EV(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:mi.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function MV(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Txe(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function $V(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Exe(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function DV(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Mc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A2={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Mxe=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),$xe=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Mi=0;Mi<10;Mi++)Mc[48+Mi]=Mc[96+Mi]=String(Mi);for(var Mi=1;Mi<=24;Mi++)Mc[Mi+111]="F"+Mi;for(var Mi=65;Mi<=90;Mi++)Mc[Mi]=String.fromCharCode(Mi+32),A2[Mi]=String.fromCharCode(Mi);for(var vT in Mc)A2.hasOwnProperty(vT)||(A2[vT]=Mc[vT]);function Dxe(t){var e=Mxe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||$xe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?A2:Mc)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Rxe=typeof navigator!="undefined"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Pxe=typeof navigator!="undefined"&&/Win/.test(navigator.platform);function Ixe(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,a,s;for(let o=0;o<e.length-1;o++){let l=e[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))Rxe?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function Oxe(t){let e=Object.create(null);for(let n in t)e[Ixe(n)]=t[n];return e}function yT(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Lxe(t){return new On({props:{handleKeyDown:FR(t)}})}function FR(t){let e=Oxe(t);return function(n,r){let i=Dxe(r),a,s=e[yT(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=e[yT(i,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Pxe&&r.ctrlKey&&r.altKey)&&(a=Mc[r.keyCode])&&a!=i){let o=e[yT(a,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}const BR=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function sZ(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const oZ=(t,e,n)=>{let r=sZ(t,n);if(!r)return!1;let i=zR(r);if(!i){let s=r.blockRange(),o=s&&Dg(s);return o==null?!1:(e&&e(t.tr.lift(s,o).scrollIntoView()),!0)}let a=i.nodeBefore;if(gZ(t,i,e,-1))return!0;if(r.parent.content.size==0&&(ag(a,"end")||It.isSelectable(a)))for(let s=r.depth;;s--){let o=oC(t.doc,r.before(s),r.after(s),mt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(ag(a,"end")?Wt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):It.create(l.doc,i.pos-a.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return a.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},Vxe=(t,e,n)=>{let r=sZ(t,n);if(!r)return!1;let i=zR(r);return i?lZ(t,i,e):!1},Nxe=(t,e,n)=>{let r=dZ(t,n);if(!r)return!1;let i=UR(r);return i?lZ(t,i,e):!1};function lZ(t,e,n){let r=e.nodeBefore,i=r,a=e.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=e.nodeAfter,o=s,l=e.pos+1;for(;!o.isTextblock;l++){if(o.type.spec.isolating)return!1;let c=o.firstChild;if(!c)return!1;o=c}let d=oC(t.doc,a,l,mt.empty);if(!d||d.from!=a||d instanceof fi&&d.slice.size>=l-a)return!1;if(n){let c=t.tr.step(d);c.setSelection(Ht.create(c.doc,a)),n(c.scrollIntoView())}return!0}function ag(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const uZ=(t,e,n)=>{let{$head:r,empty:i}=t.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;a=zR(r)}let s=a&&a.nodeBefore;return!s||!It.isSelectable(s)?!1:(e&&e(t.tr.setSelection(It.create(t.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)};function zR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function dZ(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const cZ=(t,e,n)=>{let r=dZ(t,n);if(!r)return!1;let i=UR(r);if(!i)return!1;let a=i.nodeAfter;if(gZ(t,i,e,1))return!0;if(r.parent.content.size==0&&(ag(a,"start")||It.isSelectable(a))){let s=oC(t.doc,r.before(),r.after(),mt.empty);if(s&&s.slice.size<s.to-s.from){if(e){let o=t.tr.step(s);o.setSelection(ag(a,"start")?Wt.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):It.create(o.doc,o.mapping.map(i.pos))),e(o.scrollIntoView())}return!0}}return a.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},fZ=(t,e,n)=>{let{$head:r,empty:i}=t.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;a=UR(r)}let s=a&&a.nodeAfter;return!s||!It.isSelectable(s)?!1:(e&&e(t.tr.setSelection(It.create(t.doc,a.pos)).scrollIntoView()),!0)};function UR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const jxe=(t,e)=>{let n=t.selection,r=n instanceof It,i;if(r){if(n.node.isTextblock||!zc(t.doc,n.from))return!1;i=n.from}else if(i=sC(t.doc,n.from,-1),i==null)return!1;if(e){let a=t.tr.join(i);r&&a.setSelection(It.create(a.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},Fxe=(t,e)=>{let n=t.selection,r;if(n instanceof It){if(n.node.isTextblock||!zc(t.doc,n.to))return!1;r=n.to}else if(r=sC(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Bxe=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),a=i&&Dg(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)},pZ=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function HR(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const zxe=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),a=n.indexAfter(-1),s=HR(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(e){let o=n.after(),l=t.tr.replaceWith(o,o,s.createAndFill());l.setSelection(Wt.near(l.doc.resolve(o),1)),e(l.scrollIntoView())}return!0},hZ=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof us||r.parent.inlineContent||i.parent.inlineContent)return!1;let a=HR(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=t.tr.insert(s,a.createAndFill());o.setSelection(Ht.create(o.doc,s+1)),e(o.scrollIntoView())}return!0},mZ=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let a=n.before();if(Nu(t.doc,a))return e&&e(t.tr.split(a).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Dg(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function Uxe(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof It&&e.selection.node.isBlock)return!r.parentOffset||!Nu(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let a=[],s,o,l=!1,d=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),d=r.start(h)==r.pos-(r.depth-h),o=HR(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),a.unshift(l&&o?{type:o}:null),s=h;break}else{if(h==1)return!1;a.unshift(null)}let c=e.tr;(e.selection instanceof Ht||e.selection instanceof us)&&c.deleteSelection();let f=c.mapping.map(r.pos),p=Nu(c.doc,f,a.length,a);if(p||(a[0]=o?{type:o}:null,p=Nu(c.doc,f,a.length,a)),!p)return!1;if(c.split(f,a.length,a),!l&&d&&r.node(s).type!=o){let h=c.mapping.map(r.before(s)),m=c.doc.resolve(h);o&&r.node(s-1).canReplaceWith(m.index(),m.index()+1,o)&&c.setNodeMarkup(c.mapping.map(r.before(s)),o)}return n&&n(c.scrollIntoView()),!0}}const Hxe=Uxe(),qxe=(t,e)=>{let{$from:n,to:r}=t.selection,i,a=n.sharedDepth(r);return a==0?!1:(i=n.before(a),e&&e(t.tr.setSelection(It.create(t.doc,i))),!0)};function Wxe(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,a=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(a-1,a)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(i.isTextblock||zc(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function gZ(t,e,n,r){let i=e.nodeBefore,a=e.nodeAfter,s,o,l=i.type.spec.isolating||a.type.spec.isolating;if(!l&&Wxe(t,e,n))return!0;let d=!l&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(s[0]||a.type).validEnd){if(n){let h=e.pos+a.nodeSize,m=Xe.empty;for(let _=s.length-1;_>=0;_--)m=Xe.from(s[_].create(null,m));m=Xe.from(i.copy(m));let g=t.tr.step(new yi(e.pos-1,h,e.pos,h,new mt(m,1,0),s.length,!0)),v=g.doc.resolve(h+2*s.length);v.nodeAfter&&v.nodeAfter.type==i.type&&zc(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let c=a.type.spec.isolating||r>0&&l?null:Wt.findFrom(e,1),f=c&&c.$from.blockRange(c.$to),p=f&&Dg(f);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(d&&ag(a,"start",!0)&&ag(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let g=a,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let _=Xe.empty;for(let w=m.length-1;w>=0;w--)_=Xe.from(m[w].copy(_));let x=t.tr.step(new yi(e.pos-m.length,e.pos+a.nodeSize,e.pos+v,e.pos+a.nodeSize-v,new mt(_,m.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function vZ(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(n&&n(e.tr.setSelection(Ht.create(e.doc,t<0?i.start(a):i.end(a)))),!0):!1}}const Gxe=vZ(-1),Yxe=vZ(1);function Kxe(t,e=null){return function(n,r){let{$from:i,$to:a}=n.selection,s=i.blockRange(a),o=s&&ER(s,t,e);return o?(r&&r(n.tr.wrap(s,o).scrollIntoView()),!0):!1}}function RV(t,e=null){return function(n,r){let i=!1;for(let a=0;a<n.selection.ranges.length&&!i;a++){let{$from:{pos:s},$to:{pos:o}}=n.selection.ranges[a];n.doc.nodesBetween(s,o,(l,d)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let c=n.doc.resolve(d),f=c.index();i=c.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let a=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];a.setBlockType(o,l,t,e)}r(a.scrollIntoView())}return!0}}function qR(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}qR(BR,oZ,uZ);qR(BR,cZ,fZ);qR(pZ,hZ,mZ,Hxe);typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform&&os.platform()=="darwin";function Xxe(t,e=null){return function(n,r){let{$from:i,$to:a}=n.selection,s=i.blockRange(a);if(!s)return!1;let o=r?n.tr:null;return Zxe(o,s,t,e)?(r&&r(o.scrollIntoView()),!0):!1}}function Zxe(t,e,n,r=null){let i=!1,a=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);a=new b2(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new b2(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let o=ER(a,n,r,e);return o?(t&&Qxe(t,e,o,i,n),!0):!1}function Qxe(t,e,n,r,i){let a=Xe.empty;for(let c=n.length-1;c>=0;c--)a=Xe.from(n[c].type.create(n[c].attrs,a));t.step(new yi(e.start-(r?2:0),e.end,e.start,e.end,new mt(a,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let o=n.length-s,l=e.start+n.length-(r?2:0),d=e.parent;for(let c=e.startIndex,f=e.endIndex,p=!0;c<f;c++,p=!1)!p&&Nu(t.doc,l,o)&&(t.split(l,o),l+=2*o),l+=d.child(c).nodeSize;return t}function Jxe(t){return function(e,n){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return a?n?r.node(a.depth-1).type==t?ewe(e,n,t,a):twe(e,n,a):!0:!1}}function ewe(t,e,n,r){let i=t.tr,a=r.end,s=r.$to.end(r.depth);a<s&&(i.step(new yi(a-1,s,a,s,new mt(Xe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new b2(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const o=Dg(r);if(o==null)return!1;i.lift(r,o);let l=i.doc.resolve(i.mapping.map(a,-1)-1);return zc(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function twe(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let a=r.doc.resolve(n.start),s=a.nodeAfter;if(r.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,l=n.endIndex==i.childCount,d=a.node(-1),c=a.index(-1);if(!d.canReplace(c+(o?0:1),c+1,s.content.append(l?Xe.empty:Xe.from(i))))return!1;let f=a.pos,p=f+s.nodeSize;return r.step(new yi(f-(o?1:0),p+(l?1:0),f+1,p-1,new mt((o?Xe.empty:Xe.from(i.copy(Xe.empty))).append(l?Xe.empty:Xe.from(i.copy(Xe.empty))),o?0:1,l?0:1),o?0:1)),e(r.scrollIntoView()),!0}function nwe(t){return function(e,n){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==t);if(!a)return!1;let s=a.startIndex;if(s==0)return!1;let o=a.parent,l=o.child(s-1);if(l.type!=t)return!1;if(n){let d=l.lastChild&&l.lastChild.type==o.type,c=Xe.from(d?t.create():null),f=new mt(Xe.from(t.create(null,Xe.from(o.type.create(null,c)))),d?3:1,0),p=a.start,h=a.end;n(e.tr.step(new yi(p-(d?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}function fC(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:a}=n;return je(me({},e),{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,a=n.storedMarks,n}})}class pC{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:a}=r,s=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...c)=>{const f=l(...c)(s);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(a),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:a}=this,{view:s}=i,o=[],l=!!e,d=e||a.tr,c=()=>(!l&&n&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(d),o.every(p=>p===!0)),f=je(me({},Object.fromEntries(Object.entries(r).map(([p,h])=>[p,(...g)=>{const v=this.buildProps(d,n),_=h(...g)(v);return o.push(_),f}]))),{run:c});return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,a=e||r.tr,s=this.buildProps(a,i),o=Object.fromEntries(Object.entries(n).map(([l,d])=>[l,(...c)=>d(...c)(je(me({},s),{dispatch:void 0}))]));return je(me({},o),{chain:()=>this.createChain(a,i)})}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:a}=this,{view:s}=i,o={tr:e,editor:i,view:s,state:fC({state:a,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,d])=>[l,(...c)=>d(...c)(o)]))}};return o}}class rwe{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function wt(t,e,n){return t.config[e]===void 0&&t.parent?wt(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind(je(me({},n),{parent:t.parent?wt(t.parent,e,n):null})):t.config[e]}function hC(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function yZ(t){const e=[],{nodeExtensions:n,markExtensions:r}=hC(t),i=[...n,...r],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage,extensions:i},l=wt(s,"addGlobalAttributes",o);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([p,h])=>{e.push({type:f,name:p,attribute:me(me({},a),h)})})})})}),i.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage},l=wt(s,"addAttributes",o);if(!l)return;const d=l();Object.entries(d).forEach(([c,f])=>{const p=me(me({},a),f);typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:s.name,name:c,attribute:p})})}),e}function _i(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function In(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r=me({},e);return Object.entries(n).forEach(([i,a])=>{if(!r[i]){r[i]=a;return}if(i==="class"){const o=a?String(a).split(" "):[],l=r[i]?r[i].split(" "):[],d=o.filter(c=>!l.includes(c));r[i]=[...l,...d].join(" ")}else if(i==="style"){const o=a?a.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],d=new Map;l.forEach(c=>{const[f,p]=c.split(":").map(h=>h.trim());d.set(f,p)}),o.forEach(c=>{const[f,p]=c.split(":").map(h=>h.trim());d.set(f,p)}),r[i]=Array.from(d.entries()).map(([c,f])=>`${c}: ${f}`).join("; ")}else r[i]=a}),r},{})}function LE(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>In(n,r),{})}function bZ(t){return typeof t=="function"}function fn(t,e=void 0,...n){return bZ(t)?e?t.bind(e)(...n):t(...n):t}function iwe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function awe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function PV(t,e){return"style"in t?t:je(me({},t),{getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((a,s)=>{const o=s.attribute.parseHTML?s.attribute.parseHTML(n):awe(n.getAttribute(s.name));return o==null?a:je(me({},a),{[s.name]:o})},{});return me(me({},r),i)}})}function IV(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&iwe(n)?!1:n!=null))}function swe(t,e){var n;const r=yZ(t),{nodeExtensions:i,markExtensions:a}=hC(t),s=(n=i.find(d=>wt(d,"topNode")))===null||n===void 0?void 0:n.name,o=Object.fromEntries(i.map(d=>{const c=r.filter(_=>_.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},p=t.reduce((_,x)=>{const w=wt(x,"extendNodeSchema",f);return me(me({},_),w?w(d):{})},{}),h=IV(je(me({},p),{content:fn(wt(d,"content",f)),marks:fn(wt(d,"marks",f)),group:fn(wt(d,"group",f)),inline:fn(wt(d,"inline",f)),atom:fn(wt(d,"atom",f)),selectable:fn(wt(d,"selectable",f)),draggable:fn(wt(d,"draggable",f)),code:fn(wt(d,"code",f)),whitespace:fn(wt(d,"whitespace",f)),linebreakReplacement:fn(wt(d,"linebreakReplacement",f)),defining:fn(wt(d,"defining",f)),isolating:fn(wt(d,"isolating",f)),attrs:Object.fromEntries(c.map(_=>{var x;return[_.name,{default:(x=_==null?void 0:_.attribute)===null||x===void 0?void 0:x.default}]}))})),m=fn(wt(d,"parseHTML",f));m&&(h.parseDOM=m.map(_=>PV(_,c)));const g=wt(d,"renderHTML",f);g&&(h.toDOM=_=>g({node:_,HTMLAttributes:LE(_,c)}));const v=wt(d,"renderText",f);return v&&(h.toText=v),[d.name,h]})),l=Object.fromEntries(a.map(d=>{const c=r.filter(v=>v.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},p=t.reduce((v,_)=>{const x=wt(_,"extendMarkSchema",f);return me(me({},v),x?x(d):{})},{}),h=IV(je(me({},p),{inclusive:fn(wt(d,"inclusive",f)),excludes:fn(wt(d,"excludes",f)),group:fn(wt(d,"group",f)),spanning:fn(wt(d,"spanning",f)),code:fn(wt(d,"code",f)),attrs:Object.fromEntries(c.map(v=>{var _;return[v.name,{default:(_=v==null?void 0:v.attribute)===null||_===void 0?void 0:_.default}]}))})),m=fn(wt(d,"parseHTML",f));m&&(h.parseDOM=m.map(v=>PV(v,c)));const g=wt(d,"renderHTML",f);return g&&(h.toDOM=v=>g({mark:v,HTMLAttributes:LE(v,c)})),[d.name,h]}));return new oX({topNode:s,nodes:o,marks:l})}function bT(t,e){return e.nodes[t]||e.marks[t]||null}function OV(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function WR(t,e){const n=sh.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const owe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,a,s,o)=>{var l,d;const c=((d=(l=i.type.spec).toText)===null||d===void 0?void 0:d.call(l,{node:i,pos:a,parent:s,index:o}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-a))}),n};function GR(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class pb{constructor(e){this.find=e.find,this.handler=e.handler}}const lwe=(t,e)=>{if(GR(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function a_(t){var e;const{editor:n,from:r,to:i,text:a,rules:s,plugin:o}=t,{view:l}=n;if(l.composing)return!1;const d=l.state.doc.resolve(r);if(d.parent.type.spec.code||!((e=d.nodeBefore||d.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let c=!1;const f=owe(d)+a;return s.forEach(p=>{if(c)return;const h=lwe(f,p.find);if(!h)return;const m=l.state.tr,g=fC({state:l.state,transaction:m}),v={from:r-(h[0].length-a.length),to:i},{commands:_,chain:x,can:w}=new pC({editor:n,state:g});p.handler({state:g,range:v,match:h,commands:_,chain:x,can:w})===null||!m.steps.length||(m.setMeta(o,{transform:m,from:r,to:i,text:a}),l.dispatch(m),c=!0)}),c}function uwe(t){const{editor:e,rules:n}=t,r=new On({state:{init(){return null},apply(i,a,s){const o=i.getMeta(r);if(o)return o;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=WR(Xe.from(c),s.schema);const{from:f}=l,p=f+c.length;a_({editor:e,from:f,to:p,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,s,o){return a_({editor:e,from:a,to:s,text:o,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&a_({editor:e,from:a.pos,to:a.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?a_({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function dwe(t){return Object.prototype.toString.call(t).slice(8,-1)}function s_(t){return dwe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function mC(t,e){const n=me({},t);return s_(t)&&s_(e)&&Object.keys(e).forEach(r=>{s_(e[r])&&s_(t[r])?n[r]=mC(t[r],e[r]):n[r]=e[r]}),n}class Oo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=me(me({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=fn(wt(this,"addOptions",{name:this.name}))),this.storage=fn(wt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Oo(e)}configure(e={}){const n=this.extend(je(me({},this.config),{addOptions:()=>mC(this.options,e)}));return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Oo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=fn(wt(n,"addOptions",{name:n.name})),n.storage=fn(wt(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(d=>(d==null?void 0:d.type.name)===n.name))return!1;const l=s.find(d=>(d==null?void 0:d.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function cwe(t){return typeof t=="number"}class fwe{constructor(e){this.find=e.find,this.handler=e.handler}}const pwe=(t,e,n)=>{if(GR(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const a=[i.text];return a.index=i.index,a.input=t,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function hwe(t){const{editor:e,state:n,from:r,to:i,rule:a,pasteEvent:s,dropEvent:o}=t,{commands:l,chain:d,can:c}=new pC({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,m),v=Math.min(i,m+h.content.size),_=h.textBetween(g-m,v-m,void 0,"");pwe(_,a.find,s).forEach(w=>{if(w.index===void 0)return;const k=g+w.index+1,S=k+w[0].length,C={from:n.tr.mapping.map(k),to:n.tr.mapping.map(S)},A=a.handler({state:n,range:C,match:w,commands:l,chain:d,can:c,pasteEvent:s,dropEvent:o});f.push(A)})}),f.every(h=>h!==null)}let o_=null;const mwe=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function gwe(t){const{editor:e,rules:n}=t;let r=null,i=!1,a=!1,s=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(c){o=null}const l=({state:c,from:f,to:p,rule:h,pasteEvt:m})=>{const g=c.tr,v=fC({state:c,transaction:g});if(!(!hwe({editor:e,state:v,from:Math.max(f-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:o})||!g.steps.length)){try{o=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(x){o=null}return s=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,g}};return n.map(c=>new On({view(f){const p=m=>{var g;r=!((g=f.dom.parentElement)===null||g===void 0)&&g.contains(m.target)?f.dom.parentElement:null,r&&(o_=e)},h=()=>{o_&&(o_=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(a=r===f.dom.parentElement,o=p,!a){const h=o_;h!=null&&h.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,p)=>{var h;const m=(h=p.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=p,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,h)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!a,_=m.getMeta("applyPasteRules"),x=!!_;if(!g&&!v&&!x)return;if(x){let{text:S}=_;typeof S=="string"?S=S:S=WR(Xe.from(S),h.schema);const{from:C}=_,A=C+S.length,M=mwe(S);return l({rule:c,state:h,from:C,to:{b:A},pasteEvt:M})}const w=p.doc.content.findDiffStart(h.doc.content),k=p.doc.content.findDiffEnd(h.doc.content);if(!(!cwe(w)||!k||w===k.b))return l({rule:c,state:h,from:w,to:k,pasteEvt:s})}}))}function vwe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Sm{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Sm.resolve(e),this.schema=swe(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Sm.sort(Sm.flatten(e)),r=vwe(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=wt(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const a=wt(r,"priority")||100,s=wt(i,"priority")||100;return a>s?-1:a<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:bT(n.name,this.schema)},i=wt(n,"addCommands",r);return i?me(me({},e),i()):e},{})}get plugins(){const{editor:e}=this,n=Sm.sort([...this.extensions].reverse()),r=[],i=[],a=n.map(s=>{const o={name:s.name,options:s.options,storage:s.storage,editor:e,type:bT(s.name,this.schema)},l=[],d=wt(s,"addKeyboardShortcuts",o);let c={};if(s.type==="mark"&&wt(s,"exitable",o)&&(c.ArrowRight=()=>Oo.handleExit({editor:e,mark:s})),d){const g=Object.fromEntries(Object.entries(d()).map(([v,_])=>[v,()=>_({editor:e})]));c=me(me({},c),g)}const f=Lxe(c);l.push(f);const p=wt(s,"addInputRules",o);OV(s,e.options.enableInputRules)&&p&&r.push(...p());const h=wt(s,"addPasteRules",o);OV(s,e.options.enablePasteRules)&&h&&i.push(...h());const m=wt(s,"addProseMirrorPlugins",o);if(m){const g=m();l.push(...g)}return l}).flat();return[uwe({editor:e,rules:r}),...gwe({editor:e,rules:i}),...a]}get attributes(){return yZ(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=hC(this.extensions);return Object.fromEntries(n.filter(r=>!!wt(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),a={name:r.name,options:r.options,storage:r.storage,editor:e,type:_i(r.name,this.schema)},s=wt(r,"addNodeView",a);if(!s)return[];const o=(l,d,c,f,p)=>{const h=LE(l,i);return s()({node:l,view:d,getPos:c,decorations:f,innerDecorations:p,editor:e,extension:r,HTMLAttributes:h})};return[r.name,o]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:bT(e.name,this.schema)};e.type==="mark"&&(!((n=fn(wt(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=wt(e,"onBeforeCreate",r),a=wt(e,"onCreate",r),s=wt(e,"onUpdate",r),o=wt(e,"onSelectionUpdate",r),l=wt(e,"onTransaction",r),d=wt(e,"onFocus",r),c=wt(e,"onBlur",r),f=wt(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),l&&this.editor.on("transaction",l),d&&this.editor.on("focus",d),c&&this.editor.on("blur",c),f&&this.editor.on("destroy",f)})}}class br{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=me(me({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=fn(wt(this,"addOptions",{name:this.name}))),this.storage=fn(wt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new br(e)}configure(e={}){const n=this.extend(je(me({},this.config),{addOptions:()=>mC(this.options,e)}));return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new br(me(me({},this.config),e));return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=fn(wt(n,"addOptions",{name:n.name})),n.storage=fn(wt(n,"addStorage",{name:n.name,options:n.options})),n}}function _Z(t,e,n){const{from:r,to:i}=e,{blockSeparator:a=`

`,textSerializers:s={}}=n||{};let o="";return t.nodesBetween(r,i,(l,d,c,f)=>{var p;l.isBlock&&d>r&&(o+=a);const h=s==null?void 0:s[l.type.name];if(h)return c&&(o+=h({node:l,pos:d,parent:c,index:f,range:e})),!1;l.isText&&(o+=(p=l==null?void 0:l.text)===null||p===void 0?void 0:p.slice(Math.max(r,d)-d,i-d))}),o}function YR(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const ywe=br.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new On({key:new Un("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:a}=i,s=Math.min(...a.map(c=>c.$from.pos)),o=Math.max(...a.map(c=>c.$to.pos)),l=YR(n);return _Z(r,{from:s,to:o},je(me({},this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{}),{textSerializers:l}))}}})]}}),bwe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),_we=(t=!1)=>({commands:e})=>e.setContent("",t),xwe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:a,$to:s})=>{t.doc.nodesBetween(a.pos,s.pos,(o,l)=>{if(o.type.isText)return;const{doc:d,mapping:c}=e,f=d.resolve(c.map(l)),p=d.resolve(c.map(l+o.nodeSize)),h=f.blockRange(p);if(!h)return;const m=Dg(h);if(o.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,g)}(m||m===0)&&e.lift(h,m)})}),!0},wwe=t=>e=>t(e),kwe=()=>({state:t,dispatch:e})=>hZ(t,e),Swe=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,a=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,a.content),r.setSelection(new Ht(r.doc.resolve(Math.max(s-1,0)))),!0},Cwe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===r.type){if(e){const o=i.before(a),l=i.after(a);t.delete(o,l).scrollIntoView()}return!0}return!1},Awe=t=>({tr:e,state:n,dispatch:r})=>{const i=_i(t,n.schema),a=e.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(r){const l=a.before(s),d=a.after(s);e.delete(l,d).scrollIntoView()}return!0}return!1},Twe=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Ewe=()=>({state:t,dispatch:e})=>BR(t,e),Mwe=()=>({commands:t})=>t.keyboardShortcut("Enter"),$we=()=>({state:t,dispatch:e})=>zxe(t,e);function T2(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:GR(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function xZ(t,e,n={}){return t.find(r=>r.type===e&&T2(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function LV(t,e,n={}){return!!xZ(t,e,n)}function gC(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!xZ([...i.node.marks],e,n)))return;let s=i.index,o=t.start()+i.offset,l=s+1,d=o+i.node.nodeSize;for(;s>0&&LV([...t.parent.child(s-1).marks],e,n);)s-=1,o-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&LV([...t.parent.child(l).marks],e,n);)d+=t.parent.child(l).nodeSize,l+=1;return{from:o,to:d}}function Hc(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Dwe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const a=Hc(t,r.schema),{doc:s,selection:o}=n,{$from:l,from:d,to:c}=o;if(i){const f=gC(l,a,e);if(f&&f.from<=d&&f.to>=c){const p=Ht.create(s,f.from,f.to);n.setSelection(p)}}return!0},Rwe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function KR(t){return t instanceof Ht}function Du(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function wZ(t,e=null){if(!e)return null;const n=Wt.atStart(t),r=Wt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,a=r.to;return e==="all"?Ht.create(t,Du(0,i,a),Du(t.content.size,i,a)):Ht.create(t,Du(e,i,a),Du(e,i,a))}function kZ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function vC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Pwe=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:a})=>{e=me({scrollIntoView:!0},e);const s=()=>{(vC()||kZ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(a&&t===null&&!KR(n.state.selection))return s(),!0;const o=wZ(i.doc,t)||n.state.selection,l=n.state.selection.eq(o);return a&&(l||i.setSelection(o),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},Iwe=(t,e)=>n=>t.every((r,i)=>e(r,je(me({},n),{index:i}))),Owe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),SZ=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&SZ(r)}return t};function l_(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return SZ(n)}function X0(t,e,n){if(t instanceof hc||t instanceof Xe)return t;n=me({slice:!0,parseOptions:{}},n);const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Xe.fromArray(t.map(o=>e.nodeFromJSON(o)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(a){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",a),X0("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,o="";const l=new oX({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(s=!0,o=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?vp.fromSchema(l).parseSlice(l_(t),n.parseOptions):vp.fromSchema(l).parse(l_(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const a=vp.fromSchema(e);return n.slice?a.parseSlice(l_(t),n.parseOptions).content:a.parse(l_(t),n.parseOptions)}return X0("",e,n)}function Lwe(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof fi||i instanceof yi))return;const a=t.mapping.maps[r];let s=0;a.forEach((o,l,d,c)=>{s===0&&(s=c)}),t.setSelection(Wt.near(t.doc.resolve(s),n))}const Vwe=t=>!("type"in t),Nwe=(t,e,n)=>({tr:r,dispatch:i,editor:a})=>{var s;if(i){n=me({parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1},n);let o;const l=v=>{a.emit("contentError",{editor:a,error:v,disableCollaboration:()=>{a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},d=me({preserveWhitespace:"full"},n.parseOptions);if(!n.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{X0(e,a.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(v){l(v)}try{o=X0(e,a.schema,{parseOptions:d,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:a.options.enableContentCheck})}catch(v){return l(v),!1}let{from:c,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,h=!0;if((Vwe(o)?o:[o]).forEach(v=>{v.check(),p=p?v.isText&&v.marks.length===0:!1,h=h?v.isBlock:!1}),c===f&&h){const{parent:v}=r.doc.resolve(c);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(c-=1,f+=1)}let g;if(p){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof Xe){let v="";e.forEach(_=>{_.text&&(v+=_.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,c,f)}else g=o,r.replaceWith(c,f,g);n.updateSelection&&Lwe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:g})}return!0},jwe=()=>({state:t,dispatch:e})=>jxe(t,e),Fwe=()=>({state:t,dispatch:e})=>Fxe(t,e),Bwe=()=>({state:t,dispatch:e})=>oZ(t,e),zwe=()=>({state:t,dispatch:e})=>cZ(t,e),Uwe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=sC(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch(r){return!1}},Hwe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=sC(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch(r){return!1}},qwe=()=>({state:t,dispatch:e})=>Vxe(t,e),Wwe=()=>({state:t,dispatch:e})=>Nxe(t,e);function CZ(){return typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1}function Gwe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,a,s;for(let o=0;o<e.length-1;o+=1){const l=e[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))vC()||CZ()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}const Ywe=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const a=Gwe(t).split(/-(?!$)/),s=a.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),o=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,o))});return l==null||l.steps.forEach(d=>{const c=d.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Z0(t,e,n={}){const{from:r,to:i,empty:a}=t.selection,s=e?_i(e,t.schema):null,o=[];t.doc.nodesBetween(r,i,(f,p)=>{if(f.isText)return;const h=Math.max(r,p),m=Math.min(i,p+f.nodeSize);o.push({node:f,from:h,to:m})});const l=i-r,d=o.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>T2(f.node.attrs,n,{strict:!1}));return a?!!d.length:d.reduce((f,p)=>f+p.to-p.from,0)>=l}const Kwe=(t,e={})=>({state:n,dispatch:r})=>{const i=_i(t,n.schema);return Z0(n,i,e)?Bxe(n,r):!1},Xwe=()=>({state:t,dispatch:e})=>mZ(t,e),Zwe=t=>({state:e,dispatch:n})=>{const r=_i(t,e.schema);return Jxe(r)(e,n)},Qwe=()=>({state:t,dispatch:e})=>pZ(t,e);function yC(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function VV(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const Jwe=(t,e)=>({tr:n,state:r,dispatch:i})=>{let a=null,s=null;const o=yC(typeof t=="string"?t:t.name,r.schema);return o?(o==="node"&&(a=_i(t,r.schema)),o==="mark"&&(s=Hc(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(d,c)=>{a&&a===d.type&&n.setNodeMarkup(c,void 0,VV(d.attrs,e)),s&&d.marks.length&&d.marks.forEach(f=>{s===f.type&&n.addMark(c,c+d.nodeSize,s.create(VV(f.attrs,e)))})})}),!0):!1},e2e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),t2e=()=>({tr:t,dispatch:e})=>{if(e){const n=new us(t.doc);t.setSelection(n)}return!0},n2e=()=>({state:t,dispatch:e})=>uZ(t,e),r2e=()=>({state:t,dispatch:e})=>fZ(t,e),i2e=()=>({state:t,dispatch:e})=>qxe(t,e),a2e=()=>({state:t,dispatch:e})=>Yxe(t,e),s2e=()=>({state:t,dispatch:e})=>Gxe(t,e);function VE(t,e,n={},r={}){return X0(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const o2e=(t,e=!1,n={},r={})=>({editor:i,tr:a,dispatch:s,commands:o})=>{var l,d;const{doc:c}=a;if(n.preserveWhitespace!=="full"){const f=VE(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return s&&a.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!e),!0}return s&&a.setMeta("preventUpdate",!e),o.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:i.options.enableContentCheck})};function AZ(t,e){const n=Hc(e,t.schema),{from:r,to:i,empty:a}=t.selection,s=[];a?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const o=s.find(l=>l.type.name===n.name);return o?me({},o.attrs):{}}function l2e(t,e){const n=new MR(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function u2e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function NE(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function d2e(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,a)=>{n(i)&&r.push({node:i,pos:a})}),r}function TZ(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function XR(t){return e=>TZ(e.$from,t)}function EZ(t,e){const n={from:0,to:t.content.size};return _Z(t,n,e)}function c2e(t,e){const n=_i(e,t.schema),{from:r,to:i}=t.selection,a=[];t.doc.nodesBetween(r,i,o=>{a.push(o)});const s=a.reverse().find(o=>o.type.name===n.name);return s?me({},s.attrs):{}}function MZ(t,e){const n=yC(typeof e=="string"?e:e.name,t.schema);return n==="node"?c2e(t,e):n==="mark"?AZ(t,e):{}}function f2e(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function p2e(t){const e=f2e(t);return e.length===1?e:e.filter((n,r)=>!e.filter((a,s)=>s!==r).some(a=>n.oldRange.from>=a.oldRange.from&&n.oldRange.to<=a.oldRange.to&&n.newRange.from>=a.newRange.from&&n.newRange.to<=a.newRange.to))}function h2e(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,a)=>{const s=[];if(i.ranges.length)i.forEach((o,l)=>{s.push({from:o,to:l})});else{const{from:o,to:l}=n[a];if(o===void 0||l===void 0)return;s.push({from:o,to:l})}s.forEach(({from:o,to:l})=>{const d=e.slice(a).map(o,-1),c=e.slice(a).map(l),f=e.invert().map(d,-1),p=e.invert().map(c);r.push({oldRange:{from:f,to:p},newRange:{from:d,to:c}})})}),p2e(r)}function ZR(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const a=n.resolve(t),s=gC(a,i.type);s&&r.push(me({mark:i},s))}):n.nodesBetween(t,e,(i,a)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:a,to:a+i.nodeSize,mark:s})))}),r}function dw(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(a=>a.type===e&&a.name===r);return i?i.attribute.keepOnSplit:!1}))}function jE(t,e,n={}){const{empty:r,ranges:i}=t.selection,a=e?Hc(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>a?a.name===f.type.name:!0).find(f=>T2(f.attrs,n,{strict:!1}));let s=0;const o=[];if(i.forEach(({$from:f,$to:p})=>{const h=f.pos,m=p.pos;t.doc.nodesBetween(h,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const _=Math.max(h,v),x=Math.min(m,v+g.nodeSize),w=x-_;s+=w,o.push(...g.marks.map(k=>({mark:k,from:_,to:x})))})}),s===0)return!1;const l=o.filter(f=>a?a.name===f.mark.type.name:!0).filter(f=>T2(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),d=o.filter(f=>a?f.mark.type!==a&&f.mark.type.excludes(a):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+d:l)>=s}function m2e(t,e,n={}){if(!e)return Z0(t,null,n)||jE(t,null,n);const r=yC(e,t.schema);return r==="node"?Z0(t,e,n):r==="mark"?jE(t,e,n):!1}function NV(t,e){const{nodeExtensions:n}=hC(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},a=fn(wt(r,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function bC(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(a=>{i!==!1&&(bC(a,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function $Z(t){return t instanceof It}function DZ(t,e,n){const i=t.state.doc.content.size,a=Du(e,0,i),s=Du(n,0,i),o=t.coordsAtPos(a),l=t.coordsAtPos(s,-1),d=Math.min(o.top,l.top),c=Math.max(o.bottom,l.bottom),f=Math.min(o.left,l.left),p=Math.max(o.right,l.right),h=p-f,m=c-d,_={top:d,bottom:c,left:f,right:p,width:h,height:m,x:f,y:d};return je(me({},_),{toJSON:()=>_})}function g2e(t,e,n){var r;const{selection:i}=e;let a=null;if(KR(i)&&(a=i.$cursor),a){const o=(r=t.storedMarks)!==null&&r!==void 0?r:a.marks();return!!n.isInSet(o)||!o.some(l=>l.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:o,$to:l})=>{let d=o.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(o.pos,l.pos,(c,f,p)=>{if(d)return!1;if(c.isInline){const h=!p||p.type.allowsMarkType(n),m=!!n.isInSet(c.marks)||!c.marks.some(g=>g.type.excludes(n));d=h&&m}return!d}),d})}const v2e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:a}=n,{empty:s,ranges:o}=a,l=Hc(t,r.schema);if(i)if(s){const d=AZ(r,l);n.addStoredMark(l.create(me(me({},d),e)))}else o.forEach(d=>{const c=d.$from.pos,f=d.$to.pos;r.doc.nodesBetween(c,f,(p,h)=>{const m=Math.max(h,c),g=Math.min(h+p.nodeSize,f);p.marks.find(_=>_.type===l)?p.marks.forEach(_=>{l===_.type&&n.addMark(m,g,l.create(me(me({},_.attrs),e)))}):n.addMark(m,g,l.create(e))})});return g2e(r,n,l)},y2e=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),b2e=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const a=_i(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:o})=>RV(a,me(me({},s),e))(n)?!0:o.clearNodes()).command(({state:o})=>RV(a,me(me({},s),e))(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},_2e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Du(t,0,r.content.size),a=It.create(r,i);e.setSelection(a)}return!0},x2e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:a}=typeof t=="number"?{from:t,to:t}:t,s=Ht.atStart(r).from,o=Ht.atEnd(r).to,l=Du(i,s,o),d=Du(a,s,o),c=Ht.create(r,l,d);e.setSelection(c)}return!0},w2e=t=>({state:e,dispatch:n})=>{const r=_i(t,e.schema);return nwe(r)(e,n)};function jV(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const k2e=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:a,doc:s}=e,{$from:o,$to:l}=a,d=i.extensionManager.attributes,c=dw(d,o.node().type.name,o.node().attrs);if(a instanceof It&&a.node.isBlock)return!o.parentOffset||!Nu(s,o.pos)?!1:(r&&(t&&jV(n,i.extensionManager.splittableMarks),e.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,p=o.depth===0?void 0:u2e(o.node(-1).contentMatchAt(o.indexAfter(-1)));let h=f&&p?[{type:p,attrs:c}]:void 0,m=Nu(e.doc,e.mapping.map(o.pos),1,h);if(!h&&!m&&Nu(e.doc,e.mapping.map(o.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:c}]:void 0),r){if(m&&(a instanceof Ht&&e.deleteSelection(),e.split(e.mapping.map(o.pos),1,h),p&&!f&&!o.parentOffset&&o.parent.type!==p)){const g=e.mapping.map(o.before()),v=e.doc.resolve(g);o.node(-1).canReplaceWith(v.index(),v.index()+1,p)&&e.setNodeMarkup(e.mapping.map(o.before()),p)}t&&jV(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},S2e=(t,e={})=>({tr:n,state:r,dispatch:i,editor:a})=>{var s;const o=_i(t,r.schema),{$from:l,$to:d}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(d))return!1;const f=l.node(-1);if(f.type!==o)return!1;const p=a.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let _=Xe.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let M=l.depth-x;M>=l.depth-3;M-=1)_=Xe.from(l.node(M).copy(_));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k=me(me({},dw(p,l.node().type.name,l.node().attrs)),e),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(k))||void 0;_=_.append(Xe.from(o.createAndFill(null,S)||void 0));const C=l.before(l.depth-(x-1));n.replace(C,l.after(-w),new mt(_,4-x,0));let A=-1;n.doc.nodesBetween(C,n.doc.content.size,(M,$)=>{if(A>-1)return!1;M.isTextblock&&M.content.size===0&&(A=$+1)}),A>-1&&n.setSelection(Ht.near(n.doc.resolve(A))),n.scrollIntoView()}return!0}const h=d.pos===l.end()?f.contentMatchAt(0).defaultType:null,m=me(me({},dw(p,f.type.name,f.attrs)),e),g=me(me({},dw(p,l.node().type.name,l.node().attrs)),e);n.delete(l.pos,d.pos);const v=h?[{type:o,attrs:m},{type:h,attrs:g}]:[{type:o,attrs:m}];if(!Nu(n.doc,l.pos,2))return!1;if(i){const{selection:_,storedMarks:x}=r,{splittableMarks:w}=a.extensionManager,k=x||_.$to.parentOffset&&_.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!k||!i)return!0;const S=k.filter(C=>w.includes(C.type.name));n.ensureMarks(S)}return!0},_T=(t,e)=>{const n=XR(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&zc(t.doc,n.pos)&&t.join(n.pos),!0},xT=(t,e)=>{const n=XR(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&zc(t.doc,r)&&t.join(r),!0},C2e=(t,e,n,r={})=>({editor:i,tr:a,state:s,dispatch:o,chain:l,commands:d,can:c})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,h=_i(t,s.schema),m=_i(e,s.schema),{selection:g,storedMarks:v}=s,{$from:_,$to:x}=g,w=_.blockRange(x),k=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=XR(C=>NV(C.type.name,f))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===h)return d.liftListItem(m);if(NV(S.node.type.name,f)&&h.validContent(S.node.content)&&o)return l().command(()=>(a.setNodeMarkup(S.pos,h),!0)).command(()=>_T(a,h)).command(()=>xT(a,h)).run()}return!n||!k||!o?l().command(()=>c().wrapInList(h,r)?!0:d.clearNodes()).wrapInList(h,r).command(()=>_T(a,h)).command(()=>xT(a,h)).run():l().command(()=>{const C=c().wrapInList(h,r),A=k.filter(M=>p.includes(M.type.name));return a.ensureMarks(A),C?!0:d.clearNodes()}).wrapInList(h,r).command(()=>_T(a,h)).command(()=>xT(a,h)).run()},A2e=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:a=!1}=n,s=Hc(t,r.schema);return jE(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:a}):i.setMark(s,e)},T2e=(t,e,n={})=>({state:r,commands:i})=>{const a=_i(t,r.schema),s=_i(e,r.schema),o=Z0(r,a,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),o?i.setNode(s,l):i.setNode(a,me(me({},l),n))},E2e=(t,e={})=>({state:n,commands:r})=>{const i=_i(t,n.schema);return Z0(n,i,e)?r.lift(i):r.wrapIn(i,e)},M2e=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let a;if(i.spec.isInputRules&&(a=i.getState(t))){if(e){const s=t.tr,o=a.transform;for(let l=o.steps.length-1;l>=0;l-=1)s.step(o.steps[l].invert(o.docs[l]));if(a.text){const l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,t.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},$2e=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(a=>{t.removeMark(a.$from.pos,a.$to.pos)}),!0},D2e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var a;const{extendEmptyMarkRange:s=!1}=e,{selection:o}=n,l=Hc(t,r.schema),{$from:d,empty:c,ranges:f}=o;if(!i)return!0;if(c&&s){let{from:p,to:h}=o;const m=(a=d.marks().find(v=>v.type===l))===null||a===void 0?void 0:a.attrs,g=gC(d,l,m);g&&(p=g.from,h=g.to),n.removeMark(p,h,l)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},R2e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let a=null,s=null;const o=yC(typeof t=="string"?t:t.name,r.schema);return o?(o==="node"&&(a=_i(t,r.schema)),o==="mark"&&(s=Hc(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const d=l.$from.pos,c=l.$to.pos;let f,p,h,m;n.selection.empty?r.doc.nodesBetween(d,c,(g,v)=>{a&&a===g.type&&(h=Math.max(v,d),m=Math.min(v+g.nodeSize,c),f=v,p=g)}):r.doc.nodesBetween(d,c,(g,v)=>{v<d&&a&&a===g.type&&(h=Math.max(v,d),m=Math.min(v+g.nodeSize,c),f=v,p=g),v>=d&&v<=c&&(a&&a===g.type&&n.setNodeMarkup(v,void 0,me(me({},g.attrs),e)),s&&g.marks.length&&g.marks.forEach(_=>{if(s===_.type){const x=Math.max(v,d),w=Math.min(v+g.nodeSize,c);n.addMark(x,w,s.create(me(me({},_.attrs),e)))}}))}),p&&(f!==void 0&&n.setNodeMarkup(f,void 0,me(me({},p.attrs),e)),s&&p.marks.length&&p.marks.forEach(g=>{s===g.type&&n.addMark(h,m,s.create(me(me({},g.attrs),e)))}))}),!0):!1},P2e=(t,e={})=>({state:n,dispatch:r})=>{const i=_i(t,n.schema);return Kxe(i,e)(n,r)},I2e=(t,e={})=>({state:n,dispatch:r})=>{const i=_i(t,n.schema);return Xxe(i,e)(n,r)};var O2e=Object.freeze({__proto__:null,blur:bwe,clearContent:_we,clearNodes:xwe,command:wwe,createParagraphNear:kwe,cut:Swe,deleteCurrentNode:Cwe,deleteNode:Awe,deleteRange:Twe,deleteSelection:Ewe,enter:Mwe,exitCode:$we,extendMarkRange:Dwe,first:Rwe,focus:Pwe,forEach:Iwe,insertContent:Owe,insertContentAt:Nwe,joinBackward:Bwe,joinDown:Fwe,joinForward:zwe,joinItemBackward:Uwe,joinItemForward:Hwe,joinTextblockBackward:qwe,joinTextblockForward:Wwe,joinUp:jwe,keyboardShortcut:Ywe,lift:Kwe,liftEmptyBlock:Xwe,liftListItem:Zwe,newlineInCode:Qwe,resetAttributes:Jwe,scrollIntoView:e2e,selectAll:t2e,selectNodeBackward:n2e,selectNodeForward:r2e,selectParentNode:i2e,selectTextblockEnd:a2e,selectTextblockStart:s2e,setContent:o2e,setMark:v2e,setMeta:y2e,setNode:b2e,setNodeSelection:_2e,setTextSelection:x2e,sinkListItem:w2e,splitBlock:k2e,splitListItem:S2e,toggleList:C2e,toggleMark:A2e,toggleNode:T2e,toggleWrap:E2e,undoInputRule:M2e,unsetAllMarks:$2e,unsetMark:D2e,updateAttributes:R2e,wrapIn:P2e,wrapInList:I2e});const L2e=br.create({name:"commands",addCommands(){return me({},O2e)}}),V2e=br.create({name:"drop",addProseMirrorPlugins(){return[new On({key:new Un("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),N2e=br.create({name:"editable",addProseMirrorPlugins(){return[new On({key:new Un("editable"),props:{editable:()=>this.editor.options.editable}})]}}),j2e=new Un("focusEvents"),F2e=br.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new On({key:j2e,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),B2e=br.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:o})=>{const{selection:l,doc:d}=o,{empty:c,$anchor:f}=l,{pos:p,parent:h}=f,m=f.parent.isTextblock&&p>0?o.doc.resolve(p-1):f,g=m.parent.type.spec.isolating,v=f.pos-f.parentOffset,_=g&&m.parent.childCount===1?v===f.pos:Wt.atStart(d).from===p;return!c||!h.type.isTextblock||h.textContent.length||!_||_&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i=me({},r),a=je(me({},r),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return vC()||CZ()?a:i},addProseMirrorPlugins(){return[new On({key:new Un("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:a,from:s,to:o}=e.selection,l=Wt.atStart(e.doc).from,d=Wt.atEnd(e.doc).to;if(a||!(s===l&&o===d)||!bC(n.doc))return;const p=n.tr,h=fC({state:n,transaction:p}),{commands:m}=new pC({editor:this.editor,state:h});if(m.clearNodes(),!!p.steps.length)return p}})]}}),z2e=br.create({name:"paste",addProseMirrorPlugins(){return[new On({key:new Un("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),U2e=br.create({name:"tabindex",addProseMirrorPlugins(){return[new On({key:new Un("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class qf{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new qf(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new qf(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new qf(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,a=n.isAtom&&!n.isText,s=this.pos+r+(a?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const l=new qf(o,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new qf(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const a=i.node.attrs,s=Object.keys(n);for(let o=0;o<s.length;o+=1){const l=s[o];if(a[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&a.every(l=>n[l]===s.node.attrs[l])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,me(me({},this.node.attrs),e)),this.editor.view.dispatch(n)}}const H2e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function q2e(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let W2e=class extends rwe{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=q2e(H2e,this.options.injectNonce))}setOptions(e={}){this.options=me(me({},this.options),e),!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=bZ(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(a=>{const s=typeof a=="string"?`${a}$`:a.key;r=r.filter(o=>!o.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[N2e,ywe.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),L2e,F2e,B2e,U2e,V2e,z2e].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new Sm(i,this)}createCommandManager(){this.commandManager=new pC({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=VE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(o=>o.name!=="collaboration"),this.createExtensionManager()}}),n=VE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=wZ(n,this.options.autofocus);this.view=new aZ(this.options.element,je(me({},this.options.editorProps),{attributes:me({role:"textbox"},(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes),dispatchTransaction:this.dispatchTransaction.bind(this),state:km.create({doc:n,selection:r||void 0})}));const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const a=this.view.dom;a.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var o;return(o=this.capturedTransaction)===null||o===void 0?void 0:o.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),a=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return MZ(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return m2e(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return WR(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return EZ(this.state.doc,{blockSeparator:n,textSerializers:me(me({},YR(this.schema)),r)})}get isEmpty(){return bC(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new qf(n,this)}get $doc(){return this.$pos(0)}};function zp(t){return new pb({find:t.find,handler:({state:e,range:n,match:r})=>{const i=fn(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:a}=e,s=r[r.length-1],o=r[0];if(s){const l=o.search(/\S/),d=n.from+o.indexOf(s),c=d+s.length;if(ZR(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>d).length)return null;c<n.to&&a.delete(c,n.to),d>n.from&&a.delete(n.from+l,d);const p=n.from+l+s.length;a.addMark(n.from+l,p,t.type.create(i||{})),a.removeStoredMark(t.type)}}})}function RZ(t){return new pb({find:t.find,handler:({state:e,range:n,match:r})=>{const i=fn(t.getAttributes,void 0,r)||{},{tr:a}=e,s=n.from;let o=n.to;const l=t.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let c=s+d;c>o?c=o:o=c+r[1].length;const f=r[0][r[0].length-1];a.insertText(f,s+r[0].length-1),a.replaceWith(c,o,l)}else if(r[0]){const d=t.type.isInline?s:s-1;a.insert(d,t.type.create(i)).delete(a.mapping.map(s),a.mapping.map(o))}a.scrollIntoView()}})}function E2(t){return new pb({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),a=fn(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,a)}})}function Lr(t){return new pb({find:t.find,handler:({state:e,range:n,match:r})=>{let i=t.replace,a=n.from;const s=n.to;if(r[1]){const o=r[0].lastIndexOf(r[1]);i+=r[0].slice(o+r[1].length),a+=o;const l=a-s;l>0&&(i=r[0].slice(o-l,o)+i,a=s)}e.tr.insertText(i,a,s)}})}function sg(t){return new pb({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const a=fn(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),d=l&&ER(l,t.type,a);if(!d)return null;if(s.wrap(l,d),t.keepMarks&&t.editor){const{selection:f,storedMarks:p}=e,{splittableMarks:h}=t.editor.extensionManager,m=p||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(v=>h.includes(v.type.name));s.ensureMarks(g)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,a).run()}const c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&zc(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&s.join(n.from-1)}})}let Er=class FE{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=me(me({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=fn(wt(this,"addOptions",{name:this.name}))),this.storage=fn(wt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new FE(e)}configure(e={}){const n=this.extend(je(me({},this.config),{addOptions:()=>mC(this.options,e)}));return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new FE(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=fn(wt(n,"addOptions",{name:n.name})),n.storage=fn(wt(n,"addStorage",{name:n.name,options:n.options})),n}};class G2e{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options=me({stopEvent:null,ignoreMutation:null},r),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,i,a,s,o,l;const{view:d}=this.editor,c=e.target,f=c.nodeType===3?(n=c.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(c)||!f)return;let p=0,h=0;if(this.dom!==f){const x=this.dom.getBoundingClientRect(),w=f.getBoundingClientRect(),k=(i=e.offsetX)!==null&&i!==void 0?i:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetX,S=(s=e.offsetY)!==null&&s!==void 0?s:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetY;p=w.x-x.x+k,h=w.y-x.y+S}const m=this.dom.cloneNode(!0);(l=e.dataTransfer)===null||l===void 0||l.setDragImage(m,p,h);const g=this.getPos();if(typeof g!="number")return;const v=It.create(d.state.doc,g),_=d.state.tr.setSelection(v);d.dispatch(_)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const a=e.type.startsWith("drag"),s=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!s&&!a)return!0;const{isEditable:l}=this.editor,{isDragging:d}=this,c=!!this.node.type.spec.draggable,f=It.isSelectable(this.node),p=e.type==="copy",h=e.type==="paste",m=e.type==="cut",g=e.type==="mousedown";if(!c&&f&&a&&e.target===this.dom&&e.preventDefault(),c&&a&&!d&&e.target===this.dom)return e.preventDefault(),!1;if(c&&l&&!d&&g){const v=r.closest("[data-drag-handle]");v&&(this.dom===v||this.dom.contains(v))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(d||s||p||h||m||g&&f)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(vC()||kZ())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,me(me({},this.node.attrs),e)),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function Up(t){return new fwe({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const a=fn(t.getAttributes,void 0,r,i);if(a===!1||a===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];let d=n.to;if(o){const c=l.search(/\S/),f=n.from+l.indexOf(o),p=f+o.length;if(ZR(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>f).length)return null;p<n.to&&s.delete(p,n.to),f>n.from&&s.delete(n.from+c,f),d=n.from+c+o.length,s.addMark(n.from+c,d,t.type.create(a||{})),s.removeStoredMark(t.type)}}})}function Y2e(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof It){const a=r.index();return r.parent.canReplaceWith(a,a+1,e)}let i=r.depth;for(;i>=0;){const a=r.index(i);if(r.node(i).contentMatchAt(a).matchType(e))return!0;i-=1}return!1}function K2e(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var Ga="top",Js="bottom",eo="right",Ya="left",QR="auto",hb=[Ga,Js,eo,Ya],og="start",Q0="end",X2e="clippingParents",PZ="viewport",cv="popper",Z2e="reference",FV=hb.reduce(function(t,e){return t.concat([e+"-"+og,e+"-"+Q0])},[]),IZ=[].concat(hb,[QR]).reduce(function(t,e){return t.concat([e,e+"-"+og,e+"-"+Q0])},[]),Q2e="beforeRead",J2e="read",eke="afterRead",tke="beforeMain",nke="main",rke="afterMain",ike="beforeWrite",ake="write",ske="afterWrite",oke=[Q2e,J2e,eke,tke,nke,rke,ike,ake,ske];function Ll(t){return t?(t.nodeName||"").toLowerCase():null}function hs(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Hp(t){var e=hs(t).Element;return t instanceof e||t instanceof Element}function Ks(t){var e=hs(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function JR(t){if(typeof ShadowRoot=="undefined")return!1;var e=hs(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function lke(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},a=e.elements[n];!Ks(a)||!Ll(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(s){var o=i[s];o===!1?a.removeAttribute(s):a.setAttribute(s,o===!0?"":o)}))})}function uke(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],a=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),o=s.reduce(function(l,d){return l[d]="",l},{});!Ks(i)||!Ll(i)||(Object.assign(i.style,o),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}const OZ={name:"applyStyles",enabled:!0,phase:"write",fn:lke,effect:uke,requires:["computeStyles"]};function Tl(t){return t.split("-")[0]}var _p=Math.max,M2=Math.min,lg=Math.round;function BE(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function LZ(){return!/^((?!chrome|android).)*safari/i.test(BE())}function ug(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,a=1;e&&Ks(t)&&(i=t.offsetWidth>0&&lg(r.width)/t.offsetWidth||1,a=t.offsetHeight>0&&lg(r.height)/t.offsetHeight||1);var s=Hp(t)?hs(t):window,o=s.visualViewport,l=!LZ()&&n,d=(r.left+(l&&o?o.offsetLeft:0))/i,c=(r.top+(l&&o?o.offsetTop:0))/a,f=r.width/i,p=r.height/a;return{width:f,height:p,top:c,right:d+f,bottom:c+p,left:d,x:d,y:c}}function eP(t){var e=ug(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function VZ(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&JR(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ju(t){return hs(t).getComputedStyle(t)}function dke(t){return["table","td","th"].indexOf(Ll(t))>=0}function qc(t){return((Hp(t)?t.ownerDocument:t.document)||window.document).documentElement}function _C(t){return Ll(t)==="html"?t:t.assignedSlot||t.parentNode||(JR(t)?t.host:null)||qc(t)}function BV(t){return!Ks(t)||Ju(t).position==="fixed"?null:t.offsetParent}function cke(t){var e=/firefox/i.test(BE()),n=/Trident/i.test(BE());if(n&&Ks(t)){var r=Ju(t);if(r.position==="fixed")return null}var i=_C(t);for(JR(i)&&(i=i.host);Ks(i)&&["html","body"].indexOf(Ll(i))<0;){var a=Ju(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function mb(t){for(var e=hs(t),n=BV(t);n&&dke(n)&&Ju(n).position==="static";)n=BV(n);return n&&(Ll(n)==="html"||Ll(n)==="body"&&Ju(n).position==="static")?e:n||cke(t)||e}function tP(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Gy(t,e,n){return _p(t,M2(e,n))}function fke(t,e,n){var r=Gy(t,e,n);return r>n?n:r}function NZ(){return{top:0,right:0,bottom:0,left:0}}function jZ(t){return Object.assign({},NZ(),t)}function FZ(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var pke=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,jZ(typeof e!="number"?e:FZ(e,hb))};function hke(t){var e,n=t.state,r=t.name,i=t.options,a=n.elements.arrow,s=n.modifiersData.popperOffsets,o=Tl(n.placement),l=tP(o),d=[Ya,eo].indexOf(o)>=0,c=d?"height":"width";if(!(!a||!s)){var f=pke(i.padding,n),p=eP(a),h=l==="y"?Ga:Ya,m=l==="y"?Js:eo,g=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],v=s[l]-n.rects.reference[l],_=mb(a),x=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,w=g/2-v/2,k=f[h],S=x-p[c]-f[m],C=x/2-p[c]/2+w,A=Gy(k,C,S),M=l;n.modifiersData[r]=(e={},e[M]=A,e.centerOffset=A-C,e)}}function mke(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||VZ(e.elements.popper,i)&&(e.elements.arrow=i))}const gke={name:"arrow",enabled:!0,phase:"main",fn:hke,effect:mke,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function dg(t){return t.split("-")[1]}var vke={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yke(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:lg(n*i)/i||0,y:lg(r*i)/i||0}}function zV(t){var e,n=t.popper,r=t.popperRect,i=t.placement,a=t.variation,s=t.offsets,o=t.position,l=t.gpuAcceleration,d=t.adaptive,c=t.roundOffsets,f=t.isFixed,p=s.x,h=p===void 0?0:p,m=s.y,g=m===void 0?0:m,v=typeof c=="function"?c({x:h,y:g}):{x:h,y:g};h=v.x,g=v.y;var _=s.hasOwnProperty("x"),x=s.hasOwnProperty("y"),w=Ya,k=Ga,S=window;if(d){var C=mb(n),A="clientHeight",M="clientWidth";if(C===hs(n)&&(C=qc(n),Ju(C).position!=="static"&&o==="absolute"&&(A="scrollHeight",M="scrollWidth")),C=C,i===Ga||(i===Ya||i===eo)&&a===Q0){k=Js;var $=f&&C===S&&S.visualViewport?S.visualViewport.height:C[A];g-=$-r.height,g*=l?1:-1}if(i===Ya||(i===Ga||i===Js)&&a===Q0){w=eo;var R=f&&C===S&&S.visualViewport?S.visualViewport.width:C[M];h-=R-r.width,h*=l?1:-1}}var I=Object.assign({position:o},d&&vke),B=c===!0?yke({x:h,y:g},hs(n)):{x:h,y:g};if(h=B.x,g=B.y,l){var j;return Object.assign({},I,(j={},j[k]=x?"0":"",j[w]=_?"0":"",j.transform=(S.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",j))}return Object.assign({},I,(e={},e[k]=x?g+"px":"",e[w]=_?h+"px":"",e.transform="",e))}function bke(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,s=a===void 0?!0:a,o=n.roundOffsets,l=o===void 0?!0:o,d={placement:Tl(e.placement),variation:dg(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,zV(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,zV(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const _ke={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bke,data:{}};var u_={passive:!0};function xke(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,a=i===void 0?!0:i,s=r.resize,o=s===void 0?!0:s,l=hs(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach(function(c){c.addEventListener("scroll",n.update,u_)}),o&&l.addEventListener("resize",n.update,u_),function(){a&&d.forEach(function(c){c.removeEventListener("scroll",n.update,u_)}),o&&l.removeEventListener("resize",n.update,u_)}}const wke={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:xke,data:{}};var kke={left:"right",right:"left",bottom:"top",top:"bottom"};function cw(t){return t.replace(/left|right|bottom|top/g,function(e){return kke[e]})}var Ske={start:"end",end:"start"};function UV(t){return t.replace(/start|end/g,function(e){return Ske[e]})}function nP(t){var e=hs(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function rP(t){return ug(qc(t)).left+nP(t).scrollLeft}function Cke(t,e){var n=hs(t),r=qc(t),i=n.visualViewport,a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;var d=LZ();(d||!d&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o+rP(t),y:l}}function Ake(t){var e,n=qc(t),r=nP(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=_p(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=_p(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+rP(t),l=-r.scrollTop;return Ju(i||n).direction==="rtl"&&(o+=_p(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function iP(t){var e=Ju(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function BZ(t){return["html","body","#document"].indexOf(Ll(t))>=0?t.ownerDocument.body:Ks(t)&&iP(t)?t:BZ(_C(t))}function Yy(t,e){var n;e===void 0&&(e=[]);var r=BZ(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),a=hs(r),s=i?[a].concat(a.visualViewport||[],iP(r)?r:[]):r,o=e.concat(s);return i?o:o.concat(Yy(_C(s)))}function zE(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Tke(t,e){var n=ug(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function HV(t,e,n){return e===PZ?zE(Cke(t,n)):Hp(e)?Tke(e,n):zE(Ake(qc(t)))}function Eke(t){var e=Yy(_C(t)),n=["absolute","fixed"].indexOf(Ju(t).position)>=0,r=n&&Ks(t)?mb(t):t;return Hp(r)?e.filter(function(i){return Hp(i)&&VZ(i,r)&&Ll(i)!=="body"}):[]}function Mke(t,e,n,r){var i=e==="clippingParents"?Eke(t):[].concat(e),a=[].concat(i,[n]),s=a[0],o=a.reduce(function(l,d){var c=HV(t,d,r);return l.top=_p(c.top,l.top),l.right=M2(c.right,l.right),l.bottom=M2(c.bottom,l.bottom),l.left=_p(c.left,l.left),l},HV(t,s,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function zZ(t){var e=t.reference,n=t.element,r=t.placement,i=r?Tl(r):null,a=r?dg(r):null,s=e.x+e.width/2-n.width/2,o=e.y+e.height/2-n.height/2,l;switch(i){case Ga:l={x:s,y:e.y-n.height};break;case Js:l={x:s,y:e.y+e.height};break;case eo:l={x:e.x+e.width,y:o};break;case Ya:l={x:e.x-n.width,y:o};break;default:l={x:e.x,y:e.y}}var d=i?tP(i):null;if(d!=null){var c=d==="y"?"height":"width";switch(a){case og:l[d]=l[d]-(e[c]/2-n[c]/2);break;case Q0:l[d]=l[d]+(e[c]/2-n[c]/2);break}}return l}function J0(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,a=n.strategy,s=a===void 0?t.strategy:a,o=n.boundary,l=o===void 0?X2e:o,d=n.rootBoundary,c=d===void 0?PZ:d,f=n.elementContext,p=f===void 0?cv:f,h=n.altBoundary,m=h===void 0?!1:h,g=n.padding,v=g===void 0?0:g,_=jZ(typeof v!="number"?v:FZ(v,hb)),x=p===cv?Z2e:cv,w=t.rects.popper,k=t.elements[m?x:p],S=Mke(Hp(k)?k:k.contextElement||qc(t.elements.popper),l,c,s),C=ug(t.elements.reference),A=zZ({reference:C,element:w,placement:i}),M=zE(Object.assign({},w,A)),$=p===cv?M:C,R={top:S.top-$.top+_.top,bottom:$.bottom-S.bottom+_.bottom,left:S.left-$.left+_.left,right:$.right-S.right+_.right},I=t.modifiersData.offset;if(p===cv&&I){var B=I[i];Object.keys(R).forEach(function(j){var z=[eo,Js].indexOf(j)>=0?1:-1,F=[Ga,Js].indexOf(j)>=0?"y":"x";R[j]+=B[F]*z})}return R}function $ke(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,a=n.rootBoundary,s=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,d=l===void 0?IZ:l,c=dg(r),f=c?o?FV:FV.filter(function(m){return dg(m)===c}):hb,p=f.filter(function(m){return d.indexOf(m)>=0});p.length===0&&(p=f);var h=p.reduce(function(m,g){return m[g]=J0(t,{placement:g,boundary:i,rootBoundary:a,padding:s})[Tl(g)],m},{});return Object.keys(h).sort(function(m,g){return h[m]-h[g]})}function Dke(t){if(Tl(t)===QR)return[];var e=cw(t);return[UV(t),e,UV(e)]}function Rke(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,s=n.altAxis,o=s===void 0?!0:s,l=n.fallbackPlacements,d=n.padding,c=n.boundary,f=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,m=h===void 0?!0:h,g=n.allowedAutoPlacements,v=e.options.placement,_=Tl(v),x=_===v,w=l||(x||!m?[cw(v)]:Dke(v)),k=[v].concat(w).reduce(function(re,ee){return re.concat(Tl(ee)===QR?$ke(e,{placement:ee,boundary:c,rootBoundary:f,padding:d,flipVariations:m,allowedAutoPlacements:g}):ee)},[]),S=e.rects.reference,C=e.rects.popper,A=new Map,M=!0,$=k[0],R=0;R<k.length;R++){var I=k[R],B=Tl(I),j=dg(I)===og,z=[Ga,Js].indexOf(B)>=0,F=z?"width":"height",q=J0(e,{placement:I,boundary:c,rootBoundary:f,altBoundary:p,padding:d}),N=z?j?eo:Ya:j?Js:Ga;S[F]>C[F]&&(N=cw(N));var O=cw(N),V=[];if(a&&V.push(q[B]<=0),o&&V.push(q[N]<=0,q[O]<=0),V.every(function(re){return re})){$=I,M=!1;break}A.set(I,V)}if(M)for(var L=m?3:1,U=function(ee){var de=k.find(function(se){var te=A.get(se);if(te)return te.slice(0,ee).every(function(ne){return ne})});if(de)return $=de,"break"},G=L;G>0;G--){var X=U(G);if(X==="break")break}e.placement!==$&&(e.modifiersData[r]._skip=!0,e.placement=$,e.reset=!0)}}const Pke={name:"flip",enabled:!0,phase:"main",fn:Rke,requiresIfExists:["offset"],data:{_skip:!1}};function qV(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function WV(t){return[Ga,eo,Js,Ya].some(function(e){return t[e]>=0})}function Ike(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,s=J0(e,{elementContext:"reference"}),o=J0(e,{altBoundary:!0}),l=qV(s,r),d=qV(o,i,a),c=WV(l),f=WV(d);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const Oke={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ike};function Lke(t,e,n){var r=Tl(t),i=[Ya,Ga].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=a[0],o=a[1];return s=s||0,o=(o||0)*i,[Ya,eo].indexOf(r)>=0?{x:o,y:s}:{x:s,y:o}}function Vke(t){var e=t.state,n=t.options,r=t.name,i=n.offset,a=i===void 0?[0,0]:i,s=IZ.reduce(function(c,f){return c[f]=Lke(f,e.rects,a),c},{}),o=s[e.placement],l=o.x,d=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=s}const Nke={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Vke};function jke(t){var e=t.state,n=t.name;e.modifiersData[n]=zZ({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Fke={name:"popperOffsets",enabled:!0,phase:"read",fn:jke,data:{}};function Bke(t){return t==="x"?"y":"x"}function zke(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,a=i===void 0?!0:i,s=n.altAxis,o=s===void 0?!1:s,l=n.boundary,d=n.rootBoundary,c=n.altBoundary,f=n.padding,p=n.tether,h=p===void 0?!0:p,m=n.tetherOffset,g=m===void 0?0:m,v=J0(e,{boundary:l,rootBoundary:d,padding:f,altBoundary:c}),_=Tl(e.placement),x=dg(e.placement),w=!x,k=tP(_),S=Bke(k),C=e.modifiersData.popperOffsets,A=e.rects.reference,M=e.rects.popper,$=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,R=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,B={x:0,y:0};if(C){if(a){var j,z=k==="y"?Ga:Ya,F=k==="y"?Js:eo,q=k==="y"?"height":"width",N=C[k],O=N+v[z],V=N-v[F],L=h?-M[q]/2:0,U=x===og?A[q]:M[q],G=x===og?-M[q]:-A[q],X=e.elements.arrow,re=h&&X?eP(X):{width:0,height:0},ee=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:NZ(),de=ee[z],se=ee[F],te=Gy(0,A[q],re[q]),ne=w?A[q]/2-L-te-de-R.mainAxis:U-te-de-R.mainAxis,ce=w?-A[q]/2+L+te+se+R.mainAxis:G+te+se+R.mainAxis,ve=e.elements.arrow&&mb(e.elements.arrow),Y=ve?k==="y"?ve.clientTop||0:ve.clientLeft||0:0,K=(j=I==null?void 0:I[k])!=null?j:0,H=N+ne-K-Y,ae=N+ce-K,be=Gy(h?M2(O,H):O,N,h?_p(V,ae):V);C[k]=be,B[k]=be-N}if(o){var ue,pe=k==="x"?Ga:Ya,ye=k==="x"?Js:eo,Me=C[S],Te=S==="y"?"height":"width",qe=Me+v[pe],We=Me-v[ye],at=[Ga,Ya].indexOf(_)!==-1,st=(ue=I==null?void 0:I[S])!=null?ue:0,Ve=at?qe:Me-A[Te]-M[Te]-st+R.altAxis,De=at?Me+A[Te]+M[Te]-st-R.altAxis:We,Le=h&&at?fke(Ve,Me,De):Gy(h?Ve:qe,Me,h?De:We);C[S]=Le,B[S]=Le-Me}e.modifiersData[r]=B}}const Uke={name:"preventOverflow",enabled:!0,phase:"main",fn:zke,requiresIfExists:["offset"]};function Hke(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function qke(t){return t===hs(t)||!Ks(t)?nP(t):Hke(t)}function Wke(t){var e=t.getBoundingClientRect(),n=lg(e.width)/t.offsetWidth||1,r=lg(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Gke(t,e,n){n===void 0&&(n=!1);var r=Ks(e),i=Ks(e)&&Wke(e),a=qc(e),s=ug(t,i,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Ll(e)!=="body"||iP(a))&&(o=qke(e)),Ks(e)?(l=ug(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=rP(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function Yke(t){var e=new Map,n=new Set,r=[];t.forEach(function(a){e.set(a.name,a)});function i(a){n.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(o){if(!n.has(o)){var l=e.get(o);l&&i(l)}}),r.push(a)}return t.forEach(function(a){n.has(a.name)||i(a)}),r}function Kke(t){var e=Yke(t);return oke.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Xke(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Zke(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var GV={placement:"bottom",modifiers:[],strategy:"absolute"};function YV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Qke(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,a=i===void 0?GV:i;return function(o,l,d){d===void 0&&(d=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},GV,a),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},f=[],p=!1,h={state:c,setOptions:function(_){var x=typeof _=="function"?_(c.options):_;g(),c.options=Object.assign({},a,c.options,x),c.scrollParents={reference:Hp(o)?Yy(o):o.contextElement?Yy(o.contextElement):[],popper:Yy(l)};var w=Kke(Zke([].concat(r,c.options.modifiers)));return c.orderedModifiers=w.filter(function(k){return k.enabled}),m(),h.update()},forceUpdate:function(){if(!p){var _=c.elements,x=_.reference,w=_.popper;if(YV(x,w)){c.rects={reference:Gke(x,mb(w),c.options.strategy==="fixed"),popper:eP(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(R){return c.modifiersData[R.name]=Object.assign({},R.data)});for(var k=0;k<c.orderedModifiers.length;k++){if(c.reset===!0){c.reset=!1,k=-1;continue}var S=c.orderedModifiers[k],C=S.fn,A=S.options,M=A===void 0?{}:A,$=S.name;typeof C=="function"&&(c=C({state:c,options:M,name:$,instance:h})||c)}}}},update:Xke(function(){return new Promise(function(v){h.forceUpdate(),v(c)})}),destroy:function(){g(),p=!0}};if(!YV(o,l))return h;h.setOptions(d).then(function(v){!p&&d.onFirstUpdate&&d.onFirstUpdate(v)});function m(){c.orderedModifiers.forEach(function(v){var _=v.name,x=v.options,w=x===void 0?{}:x,k=v.effect;if(typeof k=="function"){var S=k({state:c,name:_,instance:h,options:w}),C=function(){};f.push(S||C)}})}function g(){f.forEach(function(v){return v()}),f=[]}return h}}var Jke=[wke,Fke,_ke,OZ,Nke,Pke,Uke,gke,Oke],eSe=Qke({defaultModifiers:Jke}),tSe="tippy-box",UZ="tippy-content",nSe="tippy-backdrop",HZ="tippy-arrow",qZ="tippy-svg-arrow",Rf={passive:!0,capture:!0},WZ=function(){return document.body};function wT(t,e,n){if(Array.isArray(t)){var r=t[e];return r==null?Array.isArray(n)?n[e]:n:r}return t}function aP(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function GZ(t,e){return typeof t=="function"?t.apply(void 0,e):t}function KV(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function rSe(t){return t.split(/\s+/).filter(Boolean)}function pm(t){return[].concat(t)}function XV(t,e){t.indexOf(e)===-1&&t.push(e)}function iSe(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function aSe(t){return t.split("-")[0]}function $2(t){return[].slice.call(t)}function ZV(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Ky(){return document.createElement("div")}function xC(t){return["Element","Fragment"].some(function(e){return aP(t,e)})}function sSe(t){return aP(t,"NodeList")}function oSe(t){return aP(t,"MouseEvent")}function lSe(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function uSe(t){return xC(t)?[t]:sSe(t)?$2(t):Array.isArray(t)?t:$2(document.querySelectorAll(t))}function kT(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function QV(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function dSe(t){var e,n=pm(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function cSe(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var a=i.popperRect,s=i.popperState,o=i.props,l=o.interactiveBorder,d=aSe(s.placement),c=s.modifiersData.offset;if(!c)return!0;var f=d==="bottom"?c.top.y:0,p=d==="top"?c.bottom.y:0,h=d==="right"?c.left.x:0,m=d==="left"?c.right.x:0,g=a.top-r+f>l,v=r-a.bottom-p>l,_=a.left-n+h>l,x=n-a.right-m>l;return g||v||_||x})}function ST(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function JV(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var fl={isTouch:!1},eN=0;function fSe(){fl.isTouch||(fl.isTouch=!0,window.performance&&document.addEventListener("mousemove",YZ))}function YZ(){var t=performance.now();t-eN<20&&(fl.isTouch=!1,document.removeEventListener("mousemove",YZ)),eN=t}function pSe(){var t=document.activeElement;if(lSe(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function hSe(){document.addEventListener("touchstart",fSe,Rf),window.addEventListener("blur",pSe)}var mSe=typeof window!="undefined"&&typeof document!="undefined",gSe=mSe?!!window.msCrypto:!1,vSe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ySe={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},_o=Object.assign({appendTo:WZ,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},vSe,ySe),bSe=Object.keys(_o),_Se=function(e){var n=Object.keys(e);n.forEach(function(r){_o[r]=e[r]})};function KZ(t){var e=t.plugins||[],n=e.reduce(function(r,i){var a=i.name,s=i.defaultValue;if(a){var o;r[a]=t[a]!==void 0?t[a]:(o=_o[a])!=null?o:s}return r},{});return Object.assign({},t,n)}function xSe(t,e){var n=e?Object.keys(KZ(Object.assign({},_o,{plugins:e}))):bSe,r=n.reduce(function(i,a){var s=(t.getAttribute("data-tippy-"+a)||"").trim();if(!s)return i;if(a==="content")i[a]=s;else try{i[a]=JSON.parse(s)}catch(o){i[a]=s}return i},{});return r}function tN(t,e){var n=Object.assign({},e,{content:GZ(e.content,[t])},e.ignoreAttributes?{}:xSe(t,e.plugins));return n.aria=Object.assign({},_o.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var wSe=function(){return"innerHTML"};function UE(t,e){t[wSe()]=e}function nN(t){var e=Ky();return t===!0?e.className=HZ:(e.className=qZ,xC(t)?e.appendChild(t):UE(e,t)),e}function rN(t,e){xC(e.content)?(UE(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?UE(t,e.content):t.textContent=e.content)}function HE(t){var e=t.firstElementChild,n=$2(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(UZ)}),arrow:n.find(function(r){return r.classList.contains(HZ)||r.classList.contains(qZ)}),backdrop:n.find(function(r){return r.classList.contains(nSe)})}}function XZ(t){var e=Ky(),n=Ky();n.className=tSe,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Ky();r.className=UZ,r.setAttribute("data-state","hidden"),rN(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(a,s){var o=HE(e),l=o.box,d=o.content,c=o.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(a.content!==s.content||a.allowHTML!==s.allowHTML)&&rN(d,t.props),s.arrow?c?a.arrow!==s.arrow&&(l.removeChild(c),l.appendChild(nN(s.arrow))):l.appendChild(nN(s.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:i}}XZ.$$tippy=!0;var kSe=1,d_=[],CT=[];function SSe(t,e){var n=tN(t,Object.assign({},_o,KZ(ZV(e)))),r,i,a,s=!1,o=!1,l=!1,d=!1,c,f,p,h=[],m=KV(H,n.interactiveDebounce),g,v=kSe++,_=null,x=iSe(n.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},k={id:v,reference:t,popper:Ky(),popperInstance:_,props:n,state:w,plugins:x,clearDelayTimeouts:Ve,setProps:De,setContent:Le,show:Re,hide:Se,hideWithInteractivity:Ge,enable:at,disable:st,unmount:en,destroy:Ln};if(!n.render)return k;var S=n.render(k),C=S.popper,A=S.onUpdate;C.setAttribute("data-tippy-root",""),C.id="tippy-"+k.id,k.popper=C,t._tippy=k,C._tippy=k;var M=x.map(function(Ne){return Ne.fn(k)}),$=t.hasAttribute("aria-expanded");return ve(),L(),N(),O("onCreate",[k]),n.showOnCreate&&qe(),C.addEventListener("mouseenter",function(){k.props.interactive&&k.state.isVisible&&k.clearDelayTimeouts()}),C.addEventListener("mouseleave",function(){k.props.interactive&&k.props.trigger.indexOf("mouseenter")>=0&&z().addEventListener("mousemove",m)}),k;function R(){var Ne=k.props.touch;return Array.isArray(Ne)?Ne:[Ne,0]}function I(){return R()[0]==="hold"}function B(){var Ne;return!!((Ne=k.props.render)!=null&&Ne.$$tippy)}function j(){return g||t}function z(){var Ne=j().parentNode;return Ne?dSe(Ne):document}function F(){return HE(C)}function q(Ne){return k.state.isMounted&&!k.state.isVisible||fl.isTouch||c&&c.type==="focus"?0:wT(k.props.delay,Ne?0:1,_o.delay)}function N(Ne){Ne===void 0&&(Ne=!1),C.style.pointerEvents=k.props.interactive&&!Ne?"":"none",C.style.zIndex=""+k.props.zIndex}function O(Ne,$e,ke){if(ke===void 0&&(ke=!0),M.forEach(function(St){St[Ne]&&St[Ne].apply(St,$e)}),ke){var Fe;(Fe=k.props)[Ne].apply(Fe,$e)}}function V(){var Ne=k.props.aria;if(Ne.content){var $e="aria-"+Ne.content,ke=C.id,Fe=pm(k.props.triggerTarget||t);Fe.forEach(function(St){var Vn=St.getAttribute($e);if(k.state.isVisible)St.setAttribute($e,Vn?Vn+" "+ke:ke);else{var Pe=Vn&&Vn.replace(ke,"").trim();Pe?St.setAttribute($e,Pe):St.removeAttribute($e)}})}}function L(){if(!($||!k.props.aria.expanded)){var Ne=pm(k.props.triggerTarget||t);Ne.forEach(function($e){k.props.interactive?$e.setAttribute("aria-expanded",k.state.isVisible&&$e===j()?"true":"false"):$e.removeAttribute("aria-expanded")})}}function U(){z().removeEventListener("mousemove",m),d_=d_.filter(function(Ne){return Ne!==m})}function G(Ne){if(!(fl.isTouch&&(l||Ne.type==="mousedown"))){var $e=Ne.composedPath&&Ne.composedPath()[0]||Ne.target;if(!(k.props.interactive&&JV(C,$e))){if(pm(k.props.triggerTarget||t).some(function(ke){return JV(ke,$e)})){if(fl.isTouch||k.state.isVisible&&k.props.trigger.indexOf("click")>=0)return}else O("onClickOutside",[k,Ne]);k.props.hideOnClick===!0&&(k.clearDelayTimeouts(),k.hide(),o=!0,setTimeout(function(){o=!1}),k.state.isMounted||de())}}}function X(){l=!0}function re(){l=!1}function ee(){var Ne=z();Ne.addEventListener("mousedown",G,!0),Ne.addEventListener("touchend",G,Rf),Ne.addEventListener("touchstart",re,Rf),Ne.addEventListener("touchmove",X,Rf)}function de(){var Ne=z();Ne.removeEventListener("mousedown",G,!0),Ne.removeEventListener("touchend",G,Rf),Ne.removeEventListener("touchstart",re,Rf),Ne.removeEventListener("touchmove",X,Rf)}function se(Ne,$e){ne(Ne,function(){!k.state.isVisible&&C.parentNode&&C.parentNode.contains(C)&&$e()})}function te(Ne,$e){ne(Ne,$e)}function ne(Ne,$e){var ke=F().box;function Fe(St){St.target===ke&&(ST(ke,"remove",Fe),$e())}if(Ne===0)return $e();ST(ke,"remove",f),ST(ke,"add",Fe),f=Fe}function ce(Ne,$e,ke){ke===void 0&&(ke=!1);var Fe=pm(k.props.triggerTarget||t);Fe.forEach(function(St){St.addEventListener(Ne,$e,ke),h.push({node:St,eventType:Ne,handler:$e,options:ke})})}function ve(){I()&&(ce("touchstart",K,{passive:!0}),ce("touchend",ae,{passive:!0})),rSe(k.props.trigger).forEach(function(Ne){if(Ne!=="manual")switch(ce(Ne,K),Ne){case"mouseenter":ce("mouseleave",ae);break;case"focus":ce(gSe?"focusout":"blur",be);break;case"focusin":ce("focusout",be);break}})}function Y(){h.forEach(function(Ne){var $e=Ne.node,ke=Ne.eventType,Fe=Ne.handler,St=Ne.options;$e.removeEventListener(ke,Fe,St)}),h=[]}function K(Ne){var $e,ke=!1;if(!(!k.state.isEnabled||ue(Ne)||o)){var Fe=(($e=c)==null?void 0:$e.type)==="focus";c=Ne,g=Ne.currentTarget,L(),!k.state.isVisible&&oSe(Ne)&&d_.forEach(function(St){return St(Ne)}),Ne.type==="click"&&(k.props.trigger.indexOf("mouseenter")<0||s)&&k.props.hideOnClick!==!1&&k.state.isVisible?ke=!0:qe(Ne),Ne.type==="click"&&(s=!ke),ke&&!Fe&&We(Ne)}}function H(Ne){var $e=Ne.target,ke=j().contains($e)||C.contains($e);if(!(Ne.type==="mousemove"&&ke)){var Fe=Te().concat(C).map(function(St){var Vn,Pe=St._tippy,Ue=(Vn=Pe.popperInstance)==null?void 0:Vn.state;return Ue?{popperRect:St.getBoundingClientRect(),popperState:Ue,props:n}:null}).filter(Boolean);cSe(Fe,Ne)&&(U(),We(Ne))}}function ae(Ne){var $e=ue(Ne)||k.props.trigger.indexOf("click")>=0&&s;if(!$e){if(k.props.interactive){k.hideWithInteractivity(Ne);return}We(Ne)}}function be(Ne){k.props.trigger.indexOf("focusin")<0&&Ne.target!==j()||k.props.interactive&&Ne.relatedTarget&&C.contains(Ne.relatedTarget)||We(Ne)}function ue(Ne){return fl.isTouch?I()!==Ne.type.indexOf("touch")>=0:!1}function pe(){ye();var Ne=k.props,$e=Ne.popperOptions,ke=Ne.placement,Fe=Ne.offset,St=Ne.getReferenceClientRect,Vn=Ne.moveTransition,Pe=B()?HE(C).arrow:null,Ue=St?{getBoundingClientRect:St,contextElement:St.contextElement||j()}:t,Ot={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(kh){var mr=kh.state;if(B()){var vd=F(),Jg=vd.box;["placement","reference-hidden","escaped"].forEach(function(Kc){Kc==="placement"?Jg.setAttribute("data-placement",mr.placement):mr.attributes.popper["data-popper-"+Kc]?Jg.setAttribute("data-"+Kc,""):Jg.removeAttribute("data-"+Kc)}),mr.attributes.popper={}}}},wi=[{name:"offset",options:{offset:Fe}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Vn}},Ot];B()&&Pe&&wi.push({name:"arrow",options:{element:Pe,padding:3}}),wi.push.apply(wi,($e==null?void 0:$e.modifiers)||[]),k.popperInstance=eSe(Ue,C,Object.assign({},$e,{placement:ke,onFirstUpdate:p,modifiers:wi}))}function ye(){k.popperInstance&&(k.popperInstance.destroy(),k.popperInstance=null)}function Me(){var Ne=k.props.appendTo,$e,ke=j();k.props.interactive&&Ne===WZ||Ne==="parent"?$e=ke.parentNode:$e=GZ(Ne,[ke]),$e.contains(C)||$e.appendChild(C),k.state.isMounted=!0,pe()}function Te(){return $2(C.querySelectorAll("[data-tippy-root]"))}function qe(Ne){k.clearDelayTimeouts(),Ne&&O("onTrigger",[k,Ne]),ee();var $e=q(!0),ke=R(),Fe=ke[0],St=ke[1];fl.isTouch&&Fe==="hold"&&St&&($e=St),$e?r=setTimeout(function(){k.show()},$e):k.show()}function We(Ne){if(k.clearDelayTimeouts(),O("onUntrigger",[k,Ne]),!k.state.isVisible){de();return}if(!(k.props.trigger.indexOf("mouseenter")>=0&&k.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Ne.type)>=0&&s)){var $e=q(!1);$e?i=setTimeout(function(){k.state.isVisible&&k.hide()},$e):a=requestAnimationFrame(function(){k.hide()})}}function at(){k.state.isEnabled=!0}function st(){k.hide(),k.state.isEnabled=!1}function Ve(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(a)}function De(Ne){if(!k.state.isDestroyed){O("onBeforeUpdate",[k,Ne]),Y();var $e=k.props,ke=tN(t,Object.assign({},$e,ZV(Ne),{ignoreAttributes:!0}));k.props=ke,ve(),$e.interactiveDebounce!==ke.interactiveDebounce&&(U(),m=KV(H,ke.interactiveDebounce)),$e.triggerTarget&&!ke.triggerTarget?pm($e.triggerTarget).forEach(function(Fe){Fe.removeAttribute("aria-expanded")}):ke.triggerTarget&&t.removeAttribute("aria-expanded"),L(),N(),A&&A($e,ke),k.popperInstance&&(pe(),Te().forEach(function(Fe){requestAnimationFrame(Fe._tippy.popperInstance.forceUpdate)})),O("onAfterUpdate",[k,Ne])}}function Le(Ne){k.setProps({content:Ne})}function Re(){var Ne=k.state.isVisible,$e=k.state.isDestroyed,ke=!k.state.isEnabled,Fe=fl.isTouch&&!k.props.touch,St=wT(k.props.duration,0,_o.duration);if(!(Ne||$e||ke||Fe)&&!j().hasAttribute("disabled")&&(O("onShow",[k],!1),k.props.onShow(k)!==!1)){if(k.state.isVisible=!0,B()&&(C.style.visibility="visible"),N(),ee(),k.state.isMounted||(C.style.transition="none"),B()){var Vn=F(),Pe=Vn.box,Ue=Vn.content;kT([Pe,Ue],0)}p=function(){var wi;if(!(!k.state.isVisible||d)){if(d=!0,C.offsetHeight,C.style.transition=k.props.moveTransition,B()&&k.props.animation){var Qg=F(),kh=Qg.box,mr=Qg.content;kT([kh,mr],St),QV([kh,mr],"visible")}V(),L(),XV(CT,k),(wi=k.popperInstance)==null||wi.forceUpdate(),O("onMount",[k]),k.props.animation&&B()&&te(St,function(){k.state.isShown=!0,O("onShown",[k])})}},Me()}}function Se(){var Ne=!k.state.isVisible,$e=k.state.isDestroyed,ke=!k.state.isEnabled,Fe=wT(k.props.duration,1,_o.duration);if(!(Ne||$e||ke)&&(O("onHide",[k],!1),k.props.onHide(k)!==!1)){if(k.state.isVisible=!1,k.state.isShown=!1,d=!1,s=!1,B()&&(C.style.visibility="hidden"),U(),de(),N(!0),B()){var St=F(),Vn=St.box,Pe=St.content;k.props.animation&&(kT([Vn,Pe],Fe),QV([Vn,Pe],"hidden"))}V(),L(),k.props.animation?B()&&se(Fe,k.unmount):k.unmount()}}function Ge(Ne){z().addEventListener("mousemove",m),XV(d_,m),m(Ne)}function en(){k.state.isVisible&&k.hide(),k.state.isMounted&&(ye(),Te().forEach(function(Ne){Ne._tippy.unmount()}),C.parentNode&&C.parentNode.removeChild(C),CT=CT.filter(function(Ne){return Ne!==k}),k.state.isMounted=!1,O("onHidden",[k]))}function Ln(){k.state.isDestroyed||(k.clearDelayTimeouts(),k.unmount(),Y(),delete t._tippy,k.state.isDestroyed=!0,O("onDestroy",[k]))}}function Wc(t,e){e===void 0&&(e={});var n=_o.plugins.concat(e.plugins||[]);hSe();var r=Object.assign({},e,{plugins:n}),i=uSe(t),a=i.reduce(function(s,o){var l=o&&SSe(o,r);return l&&s.push(l),s},[]);return xC(t)?a[0]:a}Wc.defaultProps=_o;Wc.setDefaultProps=_Se;Wc.currentInput=fl;Object.assign({},OZ,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Wc.setDefaultProps({render:XZ});class CSe{constructor({editor:e,element:n,view:r,tippyOptions:i={},updateDelay:a=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:o,state:l,from:d,to:c})=>{const{doc:f,selection:p}=l,{empty:h}=p,m=!f.textBetween(d,c).length&&KR(l.selection),g=this.element.contains(document.activeElement);return!(!(o.hasFocus()||g)||h||m||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:o})=>{var l;if(this.preventHide){this.preventHide=!1;return}o!=null&&o.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(o.relatedTarget))||(o==null?void 0:o.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=o=>{this.blurHandler({event:o})},this.handleDebouncedUpdate=(o,l)=>{const d=!(l!=null&&l.selection.eq(o.state.selection)),c=!(l!=null&&l.doc.eq(o.state.doc));!d&&!c||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(o,d,c,l)},this.updateDelay))},this.updateHandler=(o,l,d,c)=>{var f,p,h;const{state:m,composing:g}=o,{selection:v}=m;if(g||!l&&!d)return;this.createTooltip();const{ranges:x}=v,w=Math.min(...x.map(C=>C.$from.pos)),k=Math.max(...x.map(C=>C.$to.pos));if(!((f=this.shouldShow)===null||f===void 0?void 0:f.call(this,{editor:this.editor,element:this.element,view:o,state:m,oldState:c,from:w,to:k}))){this.hide();return}(p=this.tippy)===null||p===void 0||p.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if($Z(m.selection)){let C=o.nodeDOM(w);if(C){const A=C.dataset.nodeViewWrapper?C:C.querySelector("[data-node-view-wrapper]");if(A&&(C=A.firstChild),C)return C.getBoundingClientRect()}}return DZ(o,w,k)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=a,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!n)&&(this.tippy=Wc(e,me({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,n);return}const a=!(n!=null&&n.selection.eq(e.state.selection)),s=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,a,s,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const ZZ=t=>new On({key:typeof t.pluginKey=="string"?new Un(t.pluginKey):t.pluginKey,view:e=>new CSe(me({view:e},t))});br.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[ZZ({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class ASe{getTextContent(e){return EZ(e,{textSerializers:YR(this.editor.schema)})}constructor({editor:e,element:n,view:r,tippyOptions:i={},shouldShow:a}){this.preventHide=!1,this.shouldShow=({view:s,state:o})=>{const{selection:l}=o,{$anchor:d,empty:c}=l,f=d.depth===1,p=d.parent.isTextblock&&!d.parent.type.spec.code&&!d.parent.textContent&&d.parent.childCount===0&&!this.getTextContent(d.parent);return!(!s.hasFocus()||!c||!f||!p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var o;if(this.preventHide){this.preventHide=!1;return}s!=null&&s.relatedTarget&&(!((o=this.element.parentNode)===null||o===void 0)&&o.contains(s.relatedTarget))||(s==null?void 0:s.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=s=>{this.blurHandler({event:s})},this.editor=e,this.element=n,this.view=r,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!n)&&(this.tippy=Wc(e,me({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){var r,i,a;const{state:s}=e,{doc:o,selection:l}=s,{from:d,to:c}=l;if(n&&n.doc.eq(o)&&n.selection.eq(l))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:s,oldState:n}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((a=this.tippyOptions)===null||a===void 0?void 0:a.getReferenceClientRect)||(()=>DZ(e,d,c))}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const QZ=t=>new On({key:typeof t.pluginKey=="string"?new Un(t.pluginKey):t.pluginKey,view:e=>new ASe(me({view:e},t))});br.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[QZ({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});const TSe=Ze({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=Q(null);return bt(()=>{const{updateDelay:r,editor:i,pluginKey:a,shouldShow:s,tippyOptions:o}=t;i.registerPlugin(ZZ({updateDelay:r,editor:i,element:n.value,pluginKey:a,shouldShow:s,tippyOptions:o}))}),jc(()=>{const{pluginKey:r,editor:i}=t;i.unregisterPlugin(r)}),()=>{var r;return dr("div",{ref:n},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});function iN(t){return PS((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class ESe extends W2e{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=iN(this.view.state),this.reactiveExtensionStorage=iN(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),Vt(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const MSe=Ze({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=Q(),n=ra();return Br(()=>{const r=t.editor;r&&r.options.element&&e.value&&ir(()=>{if(!e.value||!r.options.element.firstChild)return;const i=y(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext=je(me({},n.appContext),{provides:n.provides})),r.setOptions({element:i}),r.createNodeViews()})}),jc(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return dr("div",{ref:t=>{this.rootEl=t}})}}),$Se=Ze({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=Q(null);return bt(()=>{const{pluginKey:r,editor:i,tippyOptions:a,shouldShow:s}=t;i.registerPlugin(QZ({pluginKey:r,editor:i,element:n.value,tippyOptions:a,shouldShow:s}))}),jc(()=>{const{pluginKey:r,editor:i}=t;i.unregisterPlugin(r)}),()=>{var r;return dr("div",{ref:n},(r=e.default)===null||r===void 0?void 0:r.call(e))}}}),DSe=Ze({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return dr(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),wC=Ze({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var t,e;return dr(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t))}});class JZ{constructor(e,{props:n={},editor:r}){this.editor=r,this.component=Vt(e),this.el=document.createElement("div"),this.props=Jt(n),this.renderedComponent=this.renderComponent()}get element(){return this.renderedComponent.el}get ref(){var e,n,r,i;return!((n=(e=this.renderedComponent.vNode)===null||e===void 0?void 0:e.component)===null||n===void 0)&&n.exposed?this.renderedComponent.vNode.component.exposed:(i=(r=this.renderedComponent.vNode)===null||r===void 0?void 0:r.component)===null||i===void 0?void 0:i.proxy}renderComponent(){let e=dr(this.component,this.props);return this.editor.appContext&&(e.appContext=this.editor.appContext),typeof document!="undefined"&&this.el&&_L(e,this.el),{vNode:e,destroy:()=>{this.el&&_L(null,this.el),this.el=null,e=null},el:this.el?this.el.firstElementChild:null}}updateProps(e={}){Object.entries(e).forEach(([n,r])=>{this.props[n]=r}),this.renderComponent()}destroy(){this.renderedComponent.destroy()}}const sP={editor:{type:Object,required:!0},node:{type:Object,required:!0},decorations:{type:Object,required:!0},selected:{type:Boolean,required:!0},extension:{type:Object,required:!0},getPos:{type:Function,required:!0},updateAttributes:{type:Function,required:!0},deleteNode:{type:Function,required:!0},view:{type:Object,required:!0},innerDecorations:{type:Object,required:!0},HTMLAttributes:{type:Object,required:!0}};class RSe extends G2e{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(i={})=>this.updateAttributes(i),deleteNode:()=>this.deleteNode()},n=this.onDragStart.bind(this);this.decorationClasses=Q(this.getDecorationClasses());const r=Ze({extends:me({},this.component),props:Object.keys(e),template:this.component.template,setup:i=>{var a,s;return Us("onDragStart",n),Us("decorationClasses",this.decorationClasses),(s=(a=this.component).setup)===null||s===void 0?void 0:s.call(a,i,{expose:()=>{}})},__scopeId:this.component.__scopeId,__cssModules:this.component.__cssModules,__name:this.component.__name,__file:this.component.__file});this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new JZ(r,{editor:this.editor,props:e})}get dom(){if(!this.renderer.element||!this.renderer.element.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.dom.querySelector("[data-node-view-content]")}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const i=a=>{this.decorationClasses.value=this.getDecorationClasses(),this.renderer.updateProps(a)};if(typeof this.options.update=="function"){const a=this.node,s=this.decorations,o=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:a,oldDecorations:s,newNode:e,newDecorations:n,oldInnerDecorations:o,innerDecorations:r,updateProps:()=>i({node:e,decorations:n,innerDecorations:r})})}return e.type!==this.node.type?!1:(e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,i({node:e,decorations:n,innerDecorations:r})),!0)}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element&&this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element&&this.renderer.element.classList.remove("ProseMirror-selectednode")}getDecorationClasses(){return this.decorations.map(e=>e.type.attrs.class).flat().join(" ")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate)}}function gb(t,e){return n=>{if(!n.editor.contentComponent)return{};const r=typeof t=="function"&&"__vccOpts"in t?t.__vccOpts:t;return new RSe(r,n,e)}}const PSe=/^\s*>\s$/,ISe=Er.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",In(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[sg({find:PSe,type:this.type})]}}),OSe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,LSe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,VSe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,NSe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,jSe=Oo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",In(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[zp({find:OSe,type:this.type}),zp({find:VSe,type:this.type})]},addPasteRules(){return[Up({find:LSe,type:this.type}),Up({find:NSe,type:this.type})]}}),FSe="listItem",aN="textStyle",sN=/^\s*([-+*])\s$/,BSe=Er.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",In(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(FSe,this.editor.getAttributes(aN)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=sg({find:sN,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=sg({find:sN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(aN),editor:this.editor})),[t]}}),zSe=/(^|[^`])`([^`]+)`(?!`)/,USe=/(^|[^`])`([^`]+)`(?!`)/g,eQ=Oo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",In(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[zp({find:zSe,type:this.type})]},addPasteRules(){return[Up({find:USe,type:this.type})]}}),HSe=/^```([a-z]+)?[\s\n]$/,qSe=/^~~~([a-z]+)?[\s\n]$/,tQ=Er.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,a=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",In(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!a||!s?!1:t.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:a}=n;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:r.nodeAt(o)?t.commands.command(({tr:d})=>(d.setSelection(Wt.near(r.resolve(o))),!0)):t.commands.exitCode()}}},addInputRules(){return[E2({find:HSe,type:this.type,getAttributes:t=>({language:t[1]})}),E2({find:qSe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new On({key:new Un("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,a=i==null?void 0:i.mode;if(!n||!a)return!1;const{tr:s,schema:o}=t.state,l=o.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:a},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(Ht.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),WSe=Er.create({name:"doc",topNode:!0,content:"block+"});function GSe(t={}){return new On({view(e){return new YSe(e,t)}})}class YSe{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=s=>{this[i](s)};return e.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,a=i.getBoundingClientRect(),s=a.width/i.offsetWidth,o=a.height/i.offsetHeight;if(n){let f=e.nodeBefore,p=e.nodeAfter;if(f||p){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let m=h.getBoundingClientRect(),g=f?m.bottom:m.top;f&&p&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*o;r={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")d=-pageXOffset,c=-pageYOffset;else{let f=l.getBoundingClientRect(),p=f.width/l.offsetWidth,h=f.height/l.offsetHeight;d=f.left-l.scrollLeft*p,c=f.top-l.scrollTop*h}this.element.style.left=(r.left-d)/s+"px",this.element.style.top=(r.top-c)/o+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!a){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=yX(this.editorView.state.doc,s,this.editorView.dragging.slice);o!=null&&(s=o)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const KSe=br.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[GSe(this.options)]}});class Rr extends Wt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Rr.valid(r)?new Rr(r):Wt.near(r)}content(){return mt.empty}eq(e){return e instanceof Rr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Rr(e.resolve(n.pos))}getBookmark(){return new oP(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!XSe(e)||!ZSe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Rr.valid(e))return e;let i=e.pos,a=null;for(let s=e.depth;;s--){let o=e.node(s);if(n>0?e.indexAfter(s)<o.childCount:e.index(s)>0){a=o.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(Rr.valid(l))return l}for(;;){let s=n>0?a.firstChild:a.lastChild;if(!s){if(a.isAtom&&!a.isText&&!It.isSelectable(a)){e=e.doc.resolve(i+a.nodeSize*n),r=!1;continue e}break}a=s,i+=n;let o=e.doc.resolve(i);if(Rr.valid(o))return o}return null}}}Rr.prototype.visible=!1;Rr.findFrom=Rr.findGapCursorFrom;Wt.jsonID("gapcursor",Rr);class oP{constructor(e){this.pos=e}map(e){return new oP(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Rr.valid(n)?new Rr(n):Wt.near(n)}}function nQ(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function XSe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||nQ(i.type))return!0;if(i.inlineContent)return!1}}return!0}function ZSe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||nQ(i.type))return!0;if(i.inlineContent)return!1}}return!0}function QSe(){return new On({props:{decorations:nCe,createSelectionBetween(t,e,n){return e.pos==n.pos&&Rr.valid(n)?new Rr(n):null},handleClick:eCe,handleKeyDown:JSe,handleDOMEvents:{beforeinput:tCe}}})}const JSe=FR({ArrowLeft:c_("horiz",-1),ArrowRight:c_("horiz",1),ArrowUp:c_("vert",-1),ArrowDown:c_("vert",1)});function c_(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,a){let s=r.selection,o=e>0?s.$to:s.$from,l=s.empty;if(s instanceof Ht){if(!a.endOfTextblock(n)||o.depth==0)return!1;l=!1,o=r.doc.resolve(e>0?o.after():o.before())}let d=Rr.findGapCursorFrom(o,e,l);return d?(i&&i(r.tr.setSelection(new Rr(d))),!0):!1}}function eCe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Rr.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&It.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Rr(r))),!0)}function tCe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Rr))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Xe.empty;for(let s=r.length-1;s>=0;s--)i=Xe.from(r[s].createAndFill(null,i));let a=t.state.tr.replace(n.pos,n.pos,new mt(i,0,0));return a.setSelection(Ht.near(a.doc.resolve(n.pos+1))),t.dispatch(a),!1}function nCe(t){if(!(t.selection instanceof Rr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",yr.create(t.doc,[mi.widget(t.selection.head,e,{key:"gapcursor"})])}const rCe=br.create({name:"gapCursor",addProseMirrorPlugins(){return[QSe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=fn(wt(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),iCe=Er.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",In(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:a}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=r.extensionManager,l=a||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:c})=>{if(c&&l&&s){const f=l.filter(p=>o.includes(p.type.name));d.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),rQ=Er.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,In(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>je(me({},t),{[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>E2({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var D2=200,bi=function(){};bi.prototype.append=function(e){return e.length?(e=bi.from(e),!this.length&&e||e.length<D2&&this.leafAppend(e)||this.length<D2&&e.leafPrepend(this)||this.appendInner(e)):this};bi.prototype.prepend=function(e){return e.length?bi.from(e).append(this):this};bi.prototype.appendInner=function(e){return new aCe(this,e)};bi.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?bi.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};bi.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};bi.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};bi.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(a,s){return i.push(e(a,s))},n,r),i};bi.from=function(e){return e instanceof bi?e:e&&e.length?new iQ(e):bi.empty};var iQ=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new e(this.values.slice(i,a))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,a,s,o){for(var l=a;l<s;l++)if(i(this.values[l],o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,a,s,o){for(var l=a-1;l>=s;l--)if(i(this.values[l],o+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=D2)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=D2)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(bi);bi.empty=new iQ([]);var aCe=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,a,s){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(a,o),s)===!1||a>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,a)-o,s+o)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,a,s){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(a,o)-o,s+o)===!1||a<o&&this.left.forEachInvertedInner(r,Math.min(i,o),a,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(r,i):r>=a?this.right.slice(r-a,i-a):this.left.slice(r,a).append(this.right.slice(0,i-a))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(bi);const sCe=500;class bo{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,a;n&&(i=this.remapping(r,this.items.length),a=i.maps.length);let s=e.tr,o,l,d=[],c=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(r,p+1),a=i.maps.length),a--,c.push(f);return}if(i){c.push(new sl(f.map));let h=f.step.map(i.slice(a)),m;h&&s.maybeStep(h).doc&&(m=s.mapping.maps[s.mapping.maps.length-1],d.push(new sl(m,void 0,void 0,d.length+c.length))),a--,m&&i.appendMap(m,a)}else s.maybeStep(f.step);if(f.selection)return o=i?f.selection.map(i.slice(a)):f.selection,l=new bo(this.items.slice(0,r).append(c.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:o}}addTransform(e,n,r,i){let a=[],s=this.eventCount,o=this.items,l=!i&&o.length?o.get(o.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),p=new sl(e.mapping.maps[c],f,n),h;(h=l&&l.merge(p))&&(p=h,c?a.pop():o=o.slice(0,o.length-1)),a.push(p),n&&(s++,n=void 0),i||(l=p)}let d=s-r.depth;return d>lCe&&(o=oCe(o,d),s-=d),new bo(o.append(a),s)}remapping(e,n){let r=new q0;return this.items.forEach((i,a)=>{let s=i.mirrorOffset!=null&&a-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new bo(this.items.append(e.map(n=>new sl(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),a=e.mapping,s=e.steps.length,o=this.eventCount;this.items.forEach(p=>{p.selection&&o--},i);let l=n;this.items.forEach(p=>{let h=a.getMirror(--l);if(h==null)return;s=Math.min(s,h);let m=a.maps[h];if(p.step){let g=e.steps[h].invert(e.docs[h]),v=p.selection&&p.selection.map(a.slice(l+1,h));v&&o++,r.push(new sl(m,g,v))}else r.push(new sl(m))},i);let d=[];for(let p=n;p<s;p++)d.push(new sl(a.maps[p]));let c=this.items.slice(0,i).append(d).append(r),f=new bo(c,o);return f.emptyItemCount()>sCe&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],a=0;return this.items.forEach((s,o)=>{if(o>=e)i.push(s),s.selection&&a++;else if(s.step){let l=s.step.map(n.slice(r)),d=l&&l.getMap();if(r--,d&&n.appendMap(d,r),l){let c=s.selection&&s.selection.map(n.slice(r));c&&a++;let f=new sl(d.invert(),l,c),p,h=i.length-1;(p=i.length&&i[h].merge(f))?i[h]=p:i.push(f)}}else s.map&&r--},this.items.length,0),new bo(bi.from(i.reverse()),a)}}bo.empty=new bo(bi.empty,0);function oCe(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class sl{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new sl(n.getMap().invert(),n,this.selection)}}}class zd{constructor(e,n,r,i,a){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=a}}const lCe=20;function uCe(t,e,n,r){let i=n.getMeta(xp),a;if(i)return i.historyState;n.getMeta(fCe)&&(t=new zd(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(xp))return s.getMeta(xp).redo?new zd(t.done.addTransform(n,void 0,r,fw(e)),t.undone,oN(n.mapping.maps),t.prevTime,t.prevComposition):new zd(t.done,t.undone.addTransform(n,void 0,r,fw(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=o&&(t.prevTime<(n.time||0)-r.newGroupDelay||!dCe(n,t.prevRanges)),d=s?AT(t.prevRanges,n.mapping):oN(n.mapping.maps);return new zd(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,fw(e)),bo.empty,d,n.time,o==null?t.prevComposition:o)}else return(a=n.getMeta("rebased"))?new zd(t.done.rebased(n,a),t.undone.rebased(n,a),AT(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new zd(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),AT(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function dCe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let a=0;a<e.length;a+=2)r<=e[a+1]&&i>=e[a]&&(n=!0)}),n}function oN(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,a,s)=>e.push(a,s));return e}function AT(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),a=e.map(t[r+1],-1);i<=a&&n.push(i,a)}return n}function cCe(t,e,n){let r=fw(e),i=xp.get(e).spec.config,a=(n?t.undone:t.done).popEvent(e,r);if(!a)return null;let s=a.selection.resolve(a.transform.doc),o=(n?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),i,r),l=new zd(n?o:a.remaining,n?a.remaining:o,null,0,-1);return a.transform.setSelection(s).setMeta(xp,{redo:n,historyState:l})}let TT=!1,lN=null;function fw(t){let e=t.plugins;if(lN!=e){TT=!1,lN=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){TT=!0;break}}return TT}const xp=new Un("history"),fCe=new Un("closeHistory");function pCe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new On({key:xp,state:{init(){return new zd(bo.empty,bo.empty,null,0,-1)},apply(e,n,r){return uCe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?sQ:r=="historyRedo"?oQ:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function aQ(t,e){return(n,r)=>{let i=xp.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let a=cCe(i,n,t);a&&r(e?a.scrollIntoView():a)}return!0}}const sQ=aQ(!1,!0),oQ=aQ(!0,!0),hCe=br.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>sQ(t,e),redo:()=>({state:t,dispatch:e})=>oQ(t,e)}},addProseMirrorPlugins(){return[pCe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),mCe=Er.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",In(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!Y2e(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:i}=n,a=t();return r.parentOffset===0?a.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):$Z(n)?a.insertContentAt(i.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:d}=s.selection,c=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?s.setSelection(Ht.create(s.doc,d.pos+1)):d.nodeAfter.isBlock?s.setSelection(It.create(s.doc,d.pos)):s.setSelection(Ht.create(s.doc,d.pos));else{const f=(l=d.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();f&&(s.insert(c,f),s.setSelection(Ht.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[RZ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),gCe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,vCe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,yCe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,bCe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,_Ce=Oo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",In(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[zp({find:gCe,type:this.type}),zp({find:yCe,type:this.type})]},addPasteRules(){return[Up({find:vCe,type:this.type}),Up({find:bCe,type:this.type})]}}),xCe=Er.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",In(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),wCe="listItem",uN="textStyle",dN=/^(\d+)\.\s$/,kCe=Er.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const r=t,{start:e}=r,n=Si(r,["start"]);return e===1?["ol",In(this.options.HTMLAttributes,n),0]:["ol",In(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wCe,this.editor.getAttributes(uN)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=sg({find:dN,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=sg({find:dN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>me({start:+e[1]},this.editor.getAttributes(uN)),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),SCe=Er.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",In(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),CCe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,ACe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,TCe=Oo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",In(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[zp({find:CCe,type:this.type})]},addPasteRules(){return[Up({find:ACe,type:this.type})]}}),ECe=Er.create({name:"text",group:"inline"}),MCe=br.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(jSe.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(ISe.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(BSe.configure(this.options.bulletList)),this.options.code!==!1&&t.push(eQ.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(tQ.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(WSe.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(KSe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(rCe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(iCe.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(rQ.configure(this.options.heading)),this.options.history!==!1&&t.push(hCe.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(mCe.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(_Ce.configure(this.options.italic)),this.options.listItem!==!1&&t.push(xCe.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(kCe.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(SCe.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(TCe.configure(this.options.strike)),this.options.text!==!1&&t.push(ECe.configure(this.options.text)),t}}),$Ce=br.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new On({key:new Un("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const a=this.editor.isEmpty;return t.descendants((s,o)=>{const l=r>=o&&r<=o+s.nodeSize,d=!s.isLeaf&&bC(s);if((l||!this.options.showOnlyCurrent)&&d){const c=[this.options.emptyNodeClass];a&&c.push(this.options.emptyEditorClass);const f=mi.node(o,o+s.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:o,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),yr.create(t,i)}}})]}}),DCe=br.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var qE,WE;if(typeof WeakMap!="undefined"){let t=new WeakMap;qE=e=>t.get(e),WE=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;qE=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},WE=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Pr=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let a=r+1,s=i+1;for(let o=1;a<this.width&&this.map[e+o]==n;o++)a++;for(let o=1;s<this.height&&this.map[e+this.width*o]==n;o++)s++;return{left:r,top:i,right:a,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:a,bottom:s}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[a*this.width+(n<0?r-1:i)]:(n<0?a==0:s==this.height)?null:this.map[r+this.width*(n<0?a-1:s)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:a}=this.findCell(t),{left:s,right:o,top:l,bottom:d}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(i,l),right:Math.max(r,o),bottom:Math.max(a,d)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const a=r*this.width+i,s=this.map[a];n[s]||(n[s]=!0,!(i==t.left&&i&&this.map[a-1]==s||r==t.top&&r&&this.map[a-this.width]==s)&&e.push(s))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const a=i+n.child(r).nodeSize;if(r==t){let s=e+t*this.width;const o=(t+1)*this.width;for(;s<o&&this.map[s]<i;)s++;return s==o?a-1:this.map[s]}i=a}}static get(t){return qE(t)||WE(t,RCe(t))}};function RCe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=PCe(t),n=t.childCount,r=[];let i=0,a=null;const s=[];for(let d=0,c=e*n;d<c;d++)r[d]=0;for(let d=0,c=0;d<n;d++){const f=t.child(d);c++;for(let m=0;;m++){for(;i<r.length&&r[i]!=0;)i++;if(m==f.childCount)break;const g=f.child(m),{colspan:v,rowspan:_,colwidth:x}=g.attrs;for(let w=0;w<_;w++){if(w+d>=n){(a||(a=[])).push({type:"overlong_rowspan",pos:c,n:_-w});break}const k=i+w*e;for(let S=0;S<v;S++){r[k+S]==0?r[k+S]=c:(a||(a=[])).push({type:"collision",row:d,pos:c,n:v-S});const C=x&&x[S];if(C){const A=(k+S)%e*2,M=s[A];M==null||M!=C&&s[A+1]==1?(s[A]=C,s[A+1]=1):M==C&&s[A+1]++}}}i+=v,c+=g.nodeSize}const p=(d+1)*e;let h=0;for(;i<p;)r[i++]==0&&h++;h&&(a||(a=[])).push({type:"missing",row:d,n:h}),c++}(e===0||n===0)&&(a||(a=[])).push({type:"zero_sized"});const o=new Pr(e,n,r,a);let l=!1;for(let d=0;!l&&d<s.length;d+=2)s[d]!=null&&s[d+1]<n&&(l=!0);return l&&ICe(o,s,t),o}function PCe(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let a=0;if(n)for(let s=0;s<r;s++){const o=t.child(s);for(let l=0;l<o.childCount;l++){const d=o.child(l);s+d.attrs.rowspan>r&&(a+=d.attrs.colspan)}}for(let s=0;s<i.childCount;s++){const o=i.child(s);a+=o.attrs.colspan,o.attrs.rowspan>1&&(n=!0)}e==-1?e=a:e!=a&&(e=Math.max(e,a))}return e}function ICe(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const a=t.map[i];if(r[a])continue;r[a]=!0;const s=n.nodeAt(a);if(!s)throw new RangeError(`No cell with offset ${a} found`);let o=null;const l=s.attrs;for(let d=0;d<l.colspan;d++){const c=(i+d)%t.width,f=e[c*2];f!=null&&(!l.colwidth||l.colwidth[d]!=f)&&((o||(o=OCe(l)))[d]=f)}o&&t.problems.unshift({type:"colwidth mismatch",pos:a,colwidth:o})}}function OCe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function ea(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Gd=new Un("selectingCells");function Rg(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function LCe(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function No(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function kC(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Rg(e.$head)||VCe(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function VCe(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function GE(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function NCe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function lP(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function lQ(t,e,n){const r=t.node(-1),i=Pr.get(r),a=t.start(-1),s=i.nextCell(t.pos-a,e,n);return s==null?null:t.node(0).resolve(a+s)}function qp(t,e,n=1){const r=je(me({},t),{colspan:t.colspan-n});return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function uQ(t,e,n=1){const r=je(me({},t),{colspan:t.colspan+n});if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function jCe(t,e,n){const r=ea(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var fr=class fu extends Wt{constructor(e,n=e){const r=e.node(-1),i=Pr.get(r),a=e.start(-1),s=i.rectBetween(e.pos-a,n.pos-a),o=e.node(0),l=i.cellsInRect(s).filter(c=>c!=n.pos-a);l.unshift(n.pos-a);const d=l.map(c=>{const f=r.nodeAt(c);if(!f)throw RangeError(`No cell with offset ${c} found`);const p=a+c+1;return new kX(o.resolve(p),o.resolve(p+f.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(GE(r)&&GE(i)&&lP(r,i)){const a=this.$anchorCell.node(-1)!=r.node(-1);return a&&this.isRowSelection()?fu.rowSelection(r,i):a&&this.isColSelection()?fu.colSelection(r,i):new fu(r,i)}return Ht.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Pr.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),a={},s=[];for(let l=i.top;l<i.bottom;l++){const d=[];for(let c=l*n.width+i.left,f=i.left;f<i.right;f++,c++){const p=n.map[c];if(a[p])continue;a[p]=!0;const h=n.findCell(p);let m=e.nodeAt(p);if(!m)throw RangeError(`No cell with offset ${p} found`);const g=i.left-h.left,v=h.right-i.right;if(g>0||v>0){let _=m.attrs;if(g>0&&(_=qp(_,0,g)),v>0&&(_=qp(_,_.colspan-v,v)),h.left<i.left){if(m=m.type.createAndFill(_),!m)throw RangeError(`Could not create cell with attrs ${JSON.stringify(_)}`)}else m=m.type.create(_,m.content)}if(h.top<i.top||h.bottom>i.bottom){const _=je(me({},m.attrs),{rowspan:Math.min(h.bottom,i.bottom)-Math.max(h.top,i.top)});h.top<i.top?m=m.type.createAndFill(_):m=m.type.create(_,m.content)}d.push(m)}s.push(e.child(l).copy(Xe.from(d)))}const o=this.isColSelection()&&this.isRowSelection()?e:s;return new mt(Xe.from(o),1,1)}replace(e,n=mt.empty){const r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){const{$from:o,$to:l}=i[s],d=e.mapping.slice(r);e.replace(d.map(o.pos),d.map(l.pos),s?mt.empty:n)}const a=Wt.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);a&&e.setSelection(a)}replaceWith(e,n){this.replace(e,new mt(Xe.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Pr.get(n),i=this.$anchorCell.start(-1),a=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<a.length;s++)e(n.nodeAt(a[s]),i+a[s])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Pr.get(r),a=e.start(-1),s=i.findCell(e.pos-a),o=i.findCell(n.pos-a),l=e.node(0);return s.top<=o.top?(s.top>0&&(e=l.resolve(a+i.map[s.left])),o.bottom<i.height&&(n=l.resolve(a+i.map[i.width*(i.height-1)+o.right-1]))):(o.top>0&&(n=l.resolve(a+i.map[o.left])),s.bottom<i.height&&(e=l.resolve(a+i.map[i.width*(i.height-1)+s.right-1]))),new fu(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Pr.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),a=n.colCount(this.$headCell.pos-r);if(Math.min(i,a)>0)return!1;const s=i+this.$anchorCell.nodeAfter.attrs.colspan,o=a+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,o)==n.width}eq(e){return e instanceof fu&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Pr.get(r),a=e.start(-1),s=i.findCell(e.pos-a),o=i.findCell(n.pos-a),l=e.node(0);return s.left<=o.left?(s.left>0&&(e=l.resolve(a+i.map[s.top*i.width])),o.right<i.width&&(n=l.resolve(a+i.map[i.width*(o.top+1)-1]))):(o.left>0&&(n=l.resolve(a+i.map[o.top*i.width])),s.right<i.width&&(e=l.resolve(a+i.map[i.width*(s.top+1)-1]))),new fu(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new fu(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new fu(e.resolve(n),e.resolve(r))}getBookmark(){return new FCe(this.$anchorCell.pos,this.$headCell.pos)}};fr.prototype.visible=!1;Wt.jsonID("cell",fr);var FCe=class dQ{constructor(e,n){this.anchor=e,this.head=n}map(e){return new dQ(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&lP(n,r)?new fr(n,r):Wt.near(r,1)}};function BCe(t){if(!(t.selection instanceof fr))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(mi.node(r,r+n.nodeSize,{class:"selectedCell"}))}),yr.create(t.doc,e)}function zCe({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let a=e.depth;a>=0&&!(e.before(a+1)>e.start(a));a--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function UCe({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const a=t.node(i);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){n=a;break}}for(let i=e.depth;i>0;i--){const a=e.node(i);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){r=a;break}}return n!==r&&e.parentOffset===0}function HCe(t,e,n){const r=(e||t).selection,i=(e||t).doc;let a,s;if(r instanceof It&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")a=fr.create(i,r.from);else if(s=="row"){const o=i.resolve(r.from+1);a=fr.rowSelection(o,o)}else if(!n){const o=Pr.get(r.node),l=r.from+1,d=l+o.map[o.width*o.height-1];a=fr.create(i,l+1,d)}}else r instanceof Ht&&zCe(r)?a=Ht.create(i,r.from):r instanceof Ht&&UCe(r)&&(a=Ht.create(i,r.$from.start(),r.$from.end()));return a&&(e||(e=t.tr)).setSelection(a),e}var qCe=new Un("fix-tables");function cQ(t,e,n,r){const i=t.childCount,a=e.childCount;e:for(let s=0,o=0;s<a;s++){const l=e.child(s);for(let d=o,c=Math.min(i,s+3);d<c;d++)if(t.child(d)==l){o=d+1,n+=l.nodeSize;continue e}r(l,n),o<i&&t.child(o).sameMarkup(l)?cQ(t.child(o),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function fQ(t,e){let n;const r=(i,a)=>{i.type.spec.tableRole=="table"&&(n=WCe(t,i,a,n))};return e?e.doc!=t.doc&&cQ(e.doc,t.doc,0,r):t.doc.descendants(r),n}function WCe(t,e,n,r){const i=Pr.get(e);if(!i.problems)return r;r||(r=t.tr);const a=[];for(let l=0;l<i.height;l++)a.push(0);for(let l=0;l<i.problems.length;l++){const d=i.problems[l];if(d.type=="collision"){const c=e.nodeAt(d.pos);if(!c)continue;const f=c.attrs;for(let p=0;p<f.rowspan;p++)a[d.row+p]+=d.n;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,qp(f,f.colspan-d.n,d.n))}else if(d.type=="missing")a[d.row]+=d.n;else if(d.type=="overlong_rowspan"){const c=e.nodeAt(d.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,je(me({},c.attrs),{rowspan:c.attrs.rowspan-d.n}))}else if(d.type=="colwidth mismatch"){const c=e.nodeAt(d.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,je(me({},c.attrs),{colwidth:d.colwidth}))}else if(d.type=="zero_sized"){const c=r.mapping.map(n);r.delete(c,c+e.nodeSize)}}let s,o;for(let l=0;l<a.length;l++)a[l]&&(s==null&&(s=l),o=l);for(let l=0,d=n+1;l<i.height;l++){const c=e.child(l),f=d+c.nodeSize,p=a[l];if(p>0){let h="cell";c.firstChild&&(h=c.firstChild.type.spec.tableRole);const m=[];for(let v=0;v<p;v++){const _=ea(t.schema)[h].createAndFill();_&&m.push(_)}const g=(l==0||s==l-1)&&o==l?d+1:f-1;r.insert(r.mapping.map(g),m)}d=f}return r.setMeta(qCe,{fixTables:!0})}function Wl(t){const e=t.selection,n=kC(t),r=n.node(-1),i=n.start(-1),a=Pr.get(r),s=e instanceof fr?a.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):a.findCell(n.pos-i);return je(me({},s),{tableStart:i,map:a,table:r})}function pQ(t,{map:e,tableStart:n,table:r},i){let a=i>0?-1:0;jCe(e,r,i+a)&&(a=i==0||i==e.width?null:0);for(let s=0;s<e.height;s++){const o=s*e.width+i;if(i>0&&i<e.width&&e.map[o-1]==e.map[o]){const l=e.map[o],d=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,uQ(d.attrs,i-e.colCount(l))),s+=d.attrs.rowspan-1}else{const l=a==null?ea(r.type.schema).cell:r.nodeAt(e.map[o+a]).type,d=e.positionAt(s,i,r);t.insert(t.mapping.map(n+d),l.createAndFill())}}return t}function GCe(t,e){if(!No(t))return!1;if(e){const n=Wl(t);e(pQ(t.tr,n,n.left))}return!0}function YCe(t,e){if(!No(t))return!1;if(e){const n=Wl(t);e(pQ(t.tr,n,n.right))}return!0}function KCe(t,{map:e,table:n,tableStart:r},i){const a=t.mapping.maps.length;for(let s=0;s<e.height;){const o=s*e.width+i,l=e.map[o],d=n.nodeAt(l),c=d.attrs;if(i>0&&e.map[o-1]==l||i<e.width-1&&e.map[o+1]==l)t.setNodeMarkup(t.mapping.slice(a).map(r+l),null,qp(c,i-e.colCount(l)));else{const f=t.mapping.slice(a).map(r+l);t.delete(f,f+d.nodeSize)}s+=c.rowspan}}function XCe(t,e){if(!No(t))return!1;if(e){const n=Wl(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;KCe(r,n,i),i!=n.left;i--){const a=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!a)throw RangeError("No table found");n.table=a,n.map=Pr.get(a)}e(r)}return!0}function ZCe(t,e,n){var r;const i=ea(e.type.schema).header_cell;for(let a=0;a<t.width;a++)if(((r=e.nodeAt(t.map[a+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function hQ(t,{map:e,tableStart:n,table:r},i){var a;let s=n;for(let d=0;d<i;d++)s+=r.child(d).nodeSize;const o=[];let l=i>0?-1:0;ZCe(e,r,i+l)&&(l=i==0||i==e.height?null:0);for(let d=0,c=e.width*i;d<e.width;d++,c++)if(i>0&&i<e.height&&e.map[c]==e.map[c-e.width]){const f=e.map[c],p=r.nodeAt(f).attrs;t.setNodeMarkup(n+f,null,je(me({},p),{rowspan:p.rowspan+1})),d+=p.colspan-1}else{const f=l==null?ea(r.type.schema).cell:(a=r.nodeAt(e.map[c+l*e.width]))==null?void 0:a.type,p=f==null?void 0:f.createAndFill();p&&o.push(p)}return t.insert(s,ea(r.type.schema).row.create(null,o)),t}function QCe(t,e){if(!No(t))return!1;if(e){const n=Wl(t);e(hQ(t.tr,n,n.top))}return!0}function JCe(t,e){if(!No(t))return!1;if(e){const n=Wl(t);e(hQ(t.tr,n,n.bottom))}return!0}function eAe(t,{map:e,table:n,tableStart:r},i){let a=0;for(let d=0;d<i;d++)a+=n.child(d).nodeSize;const s=a+n.child(i).nodeSize,o=t.mapping.maps.length;t.delete(a+r,s+r);const l=new Set;for(let d=0,c=i*e.width;d<e.width;d++,c++){const f=e.map[c];if(!l.has(f)){if(l.add(f),i>0&&f==e.map[c-e.width]){const p=n.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(o).map(f+r),null,je(me({},p),{rowspan:p.rowspan-1})),d+=p.colspan-1}else if(i<e.height&&f==e.map[c+e.width]){const p=n.nodeAt(f),h=p.attrs,m=p.type.create(je(me({},h),{rowspan:p.attrs.rowspan-1}),p.content),g=e.positionAt(i+1,d,n);t.insert(t.mapping.slice(o).map(r+g),m),d+=h.colspan-1}}}}function tAe(t,e){if(!No(t))return!1;if(e){const n=Wl(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;eAe(r,n,i),i!=n.top;i--){const a=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!a)throw RangeError("No table found");n.table=a,n.map=Pr.get(n.table)}e(r)}return!0}function cN(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function nAe({width:t,height:e,map:n},r){let i=r.top*t+r.left,a=i,s=(r.bottom-1)*t+r.left,o=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[a]==n[a-1]||r.right<t&&n[o]==n[o+1])return!0;a+=t,o+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[s]==n[s+t])return!0;i++,s++}return!1}function fN(t,e){const n=t.selection;if(!(n instanceof fr)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Wl(t),{map:i}=r;if(nAe(i,r))return!1;if(e){const a=t.tr,s={};let o=Xe.empty,l,d;for(let c=r.top;c<r.bottom;c++)for(let f=r.left;f<r.right;f++){const p=i.map[c*i.width+f],h=r.table.nodeAt(p);if(!(s[p]||!h))if(s[p]=!0,l==null)l=p,d=h;else{cN(h)||(o=o.append(h.content));const m=a.mapping.map(p+r.tableStart);a.delete(m,m+h.nodeSize)}}if(l==null||d==null)return!0;if(a.setNodeMarkup(l+r.tableStart,null,je(me({},uQ(d.attrs,d.attrs.colspan,r.right-r.left-d.attrs.colspan)),{rowspan:r.bottom-r.top})),o.size){const c=l+1+d.content.size,f=cN(d)?l+1:c;a.replaceWith(f+r.tableStart,c+r.tableStart,o)}a.setSelection(new fr(a.doc.resolve(l+r.tableStart))),e(a)}return!0}function pN(t,e){const n=ea(t.schema);return rAe(({node:r})=>n[r.type.spec.tableRole])(t,e)}function rAe(t){return(e,n)=>{var r;const i=e.selection;let a,s;if(i instanceof fr){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;a=i.$anchorCell.nodeAfter,s=i.$anchorCell.pos}else{if(a=LCe(i.$from),!a)return!1;s=(r=Rg(i.$from))==null?void 0:r.pos}if(a==null||s==null||a.attrs.colspan==1&&a.attrs.rowspan==1)return!1;if(n){let o=a.attrs;const l=[],d=o.colwidth;o.rowspan>1&&(o=je(me({},o),{rowspan:1})),o.colspan>1&&(o=je(me({},o),{colspan:1}));const c=Wl(e),f=e.tr;for(let h=0;h<c.right-c.left;h++)l.push(d?je(me({},o),{colwidth:d&&d[h]?[d[h]]:null}):o);let p;for(let h=c.top;h<c.bottom;h++){let m=c.map.positionAt(h,c.left,c.table);h==c.top&&(m+=a.nodeSize);for(let g=c.left,v=0;g<c.right;g++,v++)g==c.left&&h==c.top||f.insert(p=f.mapping.map(m+c.tableStart,1),t({node:a,row:h,col:g}).createAndFill(l[v]))}f.setNodeMarkup(s,t({node:a,row:c.top,col:c.left}),l[0]),i instanceof fr&&f.setSelection(new fr(f.doc.resolve(i.$anchorCell.pos),p?f.doc.resolve(p):void 0)),n(f)}return!0}}function iAe(t,e){return function(n,r){if(!No(n))return!1;const i=kC(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const a=n.tr;n.selection instanceof fr?n.selection.forEachCell((s,o)=>{s.attrs[t]!==e&&a.setNodeMarkup(o,null,je(me({},s.attrs),{[t]:e}))}):a.setNodeMarkup(i.pos,null,je(me({},i.nodeAfter.attrs),{[t]:e})),r(a)}return!0}}function aAe(t){return function(e,n){if(!No(e))return!1;if(n){const r=ea(e.schema),i=Wl(e),a=e.tr,s=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),o=s.map(l=>i.table.nodeAt(l));for(let l=0;l<s.length;l++)o[l].type==r.header_cell&&a.setNodeMarkup(i.tableStart+s[l],r.cell,o[l].attrs);if(a.steps.length==0)for(let l=0;l<s.length;l++)a.setNodeMarkup(i.tableStart+s[l],r.header_cell,o[l].attrs);n(a)}return!0}}function hN(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const a=e.table.nodeAt(r[i]);if(a&&a.type!==n.header_cell)return!1}return!0}function e1(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?aAe(t):function(n,r){if(!No(n))return!1;if(r){const i=ea(n.schema),a=Wl(n),s=n.tr,o=hN("row",a,i),l=hN("column",a,i),c=(t==="column"?o:t==="row"?l:!1)?1:0,f=t=="column"?{left:0,top:c,right:1,bottom:a.map.height}:t=="row"?{left:c,top:0,right:a.map.width,bottom:1}:a,p=t=="column"?l?i.cell:i.header_cell:t=="row"?o?i.cell:i.header_cell:i.cell;a.map.cellsInRect(f).forEach(h=>{const m=h+a.tableStart,g=s.doc.nodeAt(m);g&&s.setNodeMarkup(m,p,g.attrs)}),r(s)}return!0}}e1("row",{useDeprecatedLogic:!0});e1("column",{useDeprecatedLogic:!0});var sAe=e1("cell",{useDeprecatedLogic:!0});function oAe(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const a=t.node(-1).child(r),s=a.lastChild;if(s)return i-1-s.nodeSize;i-=a.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const a=n.child(r);if(a.childCount)return i+1;i+=a.nodeSize}}return null}function mN(t){return function(e,n){if(!No(e))return!1;const r=oAe(kC(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(Ht.between(i,NCe(i))).scrollIntoView())}return!0}}function lAe(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function f_(t,e){const n=t.selection;if(!(n instanceof fr))return!1;if(e){const r=t.tr,i=ea(t.schema).cell.createAndFill().content;n.forEachCell((a,s)=>{a.content.eq(i)||r.replace(r.mapping.map(s+1),r.mapping.map(s+a.nodeSize-1),new mt(i,0,0))}),r.docChanged&&e(r)}return!0}function uAe(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),a=i.type.spec.tableRole,s=i.type.schema,o=[];if(a=="row")for(let l=0;l<e.childCount;l++){let d=e.child(l).content;const c=l?0:Math.max(0,n-1),f=l<e.childCount-1?0:Math.max(0,r-1);(c||f)&&(d=YE(ea(s).row,new mt(d,c,f)).content),o.push(d)}else if(a=="cell"||a=="header_cell")o.push(n||r?YE(ea(s).row,new mt(e,n,r)).content:e);else return null;return dAe(s,o)}function dAe(t,e){const n=[];for(let i=0;i<e.length;i++){const a=e[i];for(let s=a.childCount-1;s>=0;s--){const{rowspan:o,colspan:l}=a.child(s).attrs;for(let d=i;d<i+o;d++)n[d]=(n[d]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Xe.empty),n[i]<r){const a=ea(t).cell.createAndFill(),s=[];for(let o=n[i];o<r;o++)s.push(a);e[i]=e[i].append(Xe.from(s))}return{height:e.length,width:r,rows:e}}function YE(t,e){const n=t.createAndFill();return new MR(n).replace(0,n.content.size,e).doc}function cAe({width:t,height:e,rows:n},r,i){if(t!=r){const a=[],s=[];for(let o=0;o<n.length;o++){const l=n[o],d=[];for(let c=a[o]||0,f=0;c<r;f++){let p=l.child(f%l.childCount);c+p.attrs.colspan>r&&(p=p.type.createChecked(qp(p.attrs,p.attrs.colspan,c+p.attrs.colspan-r),p.content)),d.push(p),c+=p.attrs.colspan;for(let h=1;h<p.attrs.rowspan;h++)a[o+h]=(a[o+h]||0)+p.attrs.colspan}s.push(Xe.from(d))}n=s,t=r}if(e!=i){const a=[];for(let s=0,o=0;s<i;s++,o++){const l=[],d=n[o%e];for(let c=0;c<d.childCount;c++){let f=d.child(c);s+f.attrs.rowspan>i&&(f=f.type.create(je(me({},f.attrs),{rowspan:Math.max(1,i-f.attrs.rowspan)}),f.content)),l.push(f)}a.push(Xe.from(l))}n=a,e=i}return{width:t,height:e,rows:n}}function fAe(t,e,n,r,i,a,s){const o=t.doc.type.schema,l=ea(o);let d,c;if(i>e.width)for(let f=0,p=0;f<e.height;f++){const h=n.child(f);p+=h.nodeSize;const m=[];let g;h.lastChild==null||h.lastChild.type==l.cell?g=d||(d=l.cell.createAndFill()):g=c||(c=l.header_cell.createAndFill());for(let v=e.width;v<i;v++)m.push(g);t.insert(t.mapping.slice(s).map(p-1+r),m)}if(a>e.height){const f=[];for(let m=0,g=(e.height-1)*e.width;m<Math.max(e.width,i);m++){const v=m>=e.width?!1:n.nodeAt(e.map[g+m]).type==l.header_cell;f.push(v?c||(c=l.header_cell.createAndFill()):d||(d=l.cell.createAndFill()))}const p=l.row.create(null,Xe.from(f)),h=[];for(let m=e.height;m<a;m++)h.push(p);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),h)}return!!(d||c)}function gN(t,e,n,r,i,a,s,o){if(s==0||s==e.height)return!1;let l=!1;for(let d=i;d<a;d++){const c=s*e.width+d,f=e.map[c];if(e.map[c-e.width]==f){l=!0;const p=n.nodeAt(f),{top:h,left:m}=e.findCell(f);t.setNodeMarkup(t.mapping.slice(o).map(f+r),null,je(me({},p.attrs),{rowspan:s-h})),t.insert(t.mapping.slice(o).map(e.positionAt(s,m,n)),p.type.createAndFill(je(me({},p.attrs),{rowspan:h+p.attrs.rowspan-s}))),d+=p.attrs.colspan-1}}return l}function vN(t,e,n,r,i,a,s,o){if(s==0||s==e.width)return!1;let l=!1;for(let d=i;d<a;d++){const c=d*e.width+s,f=e.map[c];if(e.map[c-1]==f){l=!0;const p=n.nodeAt(f),h=e.colCount(f),m=t.mapping.slice(o).map(f+r);t.setNodeMarkup(m,null,qp(p.attrs,s-h,p.attrs.colspan-(s-h))),t.insert(m+p.nodeSize,p.type.createAndFill(qp(p.attrs,0,s-h))),d+=p.attrs.rowspan-1}}return l}function yN(t,e,n,r,i){let a=n?t.doc.nodeAt(n-1):t.doc;if(!a)throw new Error("No table found");let s=Pr.get(a);const{top:o,left:l}=r,d=l+i.width,c=o+i.height,f=t.tr;let p=0;function h(){if(a=n?f.doc.nodeAt(n-1):f.doc,!a)throw new Error("No table found");s=Pr.get(a),p=f.mapping.maps.length}fAe(f,s,a,n,d,c,p)&&h(),gN(f,s,a,n,l,d,o,p)&&h(),gN(f,s,a,n,l,d,c,p)&&h(),vN(f,s,a,n,o,c,l,p)&&h(),vN(f,s,a,n,o,c,d,p)&&h();for(let m=o;m<c;m++){const g=s.positionAt(m,l,a),v=s.positionAt(m,d,a);f.replace(f.mapping.slice(p).map(g+n),f.mapping.slice(p).map(v+n),new mt(i.rows[m-o],0,0))}h(),f.setSelection(new fr(f.doc.resolve(n+s.positionAt(o,l,a)),f.doc.resolve(n+s.positionAt(c-1,d-1,a)))),e(f)}var pAe=FR({ArrowLeft:p_("horiz",-1),ArrowRight:p_("horiz",1),ArrowUp:p_("vert",-1),ArrowDown:p_("vert",1),"Shift-ArrowLeft":h_("horiz",-1),"Shift-ArrowRight":h_("horiz",1),"Shift-ArrowUp":h_("vert",-1),"Shift-ArrowDown":h_("vert",1),Backspace:f_,"Mod-Backspace":f_,Delete:f_,"Mod-Delete":f_});function pw(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function p_(t,e){return(n,r,i)=>{if(!i)return!1;const a=n.selection;if(a instanceof fr)return pw(n,r,Wt.near(a.$headCell,e));if(t!="horiz"&&!a.empty)return!1;const s=mQ(i,t,e);if(s==null)return!1;if(t=="horiz")return pw(n,r,Wt.near(n.doc.resolve(a.head+e),e));{const o=n.doc.resolve(s),l=lQ(o,t,e);let d;return l?d=Wt.near(l,1):e<0?d=Wt.near(n.doc.resolve(o.before(-1)),-1):d=Wt.near(n.doc.resolve(o.after(-1)),1),pw(n,r,d)}}}function h_(t,e){return(n,r,i)=>{if(!i)return!1;const a=n.selection;let s;if(a instanceof fr)s=a;else{const l=mQ(i,t,e);if(l==null)return!1;s=new fr(n.doc.resolve(l))}const o=lQ(s.$headCell,t,e);return o?pw(n,r,new fr(s.$anchorCell,o)):!1}}function hAe(t,e){const n=t.state.doc,r=Rg(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new fr(r))),!0):!1}function mAe(t,e,n){if(!No(t.state))return!1;let r=uAe(n);const i=t.state.selection;if(i instanceof fr){r||(r={width:1,height:1,rows:[Xe.from(YE(ea(t.state.schema).cell,n))]});const a=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),o=Pr.get(a).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=cAe(r,o.right-o.left,o.bottom-o.top),yN(t.state,t.dispatch,s,o,r),!0}else if(r){const a=kC(t.state),s=a.start(-1);return yN(t.state,t.dispatch,s,Pr.get(a.node(-1)).findCell(a.pos-s),r),!0}else return!1}function gAe(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=bN(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof fr)a(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Rg(t.state.selection.$anchor))!=null&&((n=ET(t,e))==null?void 0:n.pos)!=i.pos)a(i,e),e.preventDefault();else if(!r)return;function a(l,d){let c=ET(t,d);const f=Gd.getState(t.state)==null;if(!c||!lP(l,c))if(f)c=l;else return;const p=new fr(l,c);if(f||!t.state.selection.eq(p)){const h=t.state.tr.setSelection(p);f&&h.setMeta(Gd,l.pos),t.dispatch(h)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",o),Gd.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Gd,-1))}function o(l){const d=l,c=Gd.getState(t.state);let f;if(c!=null)f=t.state.doc.resolve(c);else if(bN(t,d.target)!=r&&(f=ET(t,e),!f))return s();f&&a(f,d)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",o)}function mQ(t,e,n){if(!(t.state.selection instanceof Ht))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const a=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:a.childCount))return null;if(a.type.spec.tableRole=="cell"||a.type.spec.tableRole=="header_cell"){const o=r.before(i),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?o:null}}return null}function bN(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function ET(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Rg(t.state.doc.resolve(n.pos)):null}var vAe=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),KE(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,KE(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function KE(t,e,n,r,i,a){var s;let o=0,l=!0,d=e.firstChild;const c=t.firstChild;if(c){for(let f=0,p=0;f<c.childCount;f++){const{colspan:h,colwidth:m}=c.child(f).attrs;for(let g=0;g<h;g++,p++){const v=i==p?a:m&&m[g],_=v?v+"px":"";if(o+=v||r,v||(l=!1),d)d.style.width!=_&&(d.style.width=_),d=d.nextSibling;else{const x=document.createElement("col");x.style.width=_,e.appendChild(x)}}}for(;d;){const f=d.nextSibling;(s=d.parentNode)==null||s.removeChild(d),d=f}l?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}var ts=new Un("tableColumnResizing");function yAe({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=vAe,lastColumnResizable:i=!0}={}){const a=new On({key:ts,state:{init(s,o){var l,d;const c=(d=(l=a.spec)==null?void 0:l.props)==null?void 0:d.nodeViews,f=ea(o.schema).table.name;return r&&c&&(c[f]=(p,h)=>new r(p,n,h)),new bAe(-1,!1)},apply(s,o){return o.apply(s)}},props:{attributes:s=>{const o=ts.getState(s);return o&&o.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,o)=>{_Ae(s,o,t,i)},mouseleave:s=>{xAe(s)},mousedown:(s,o)=>{wAe(s,o,e,n)}},decorations:s=>{const o=ts.getState(s);if(o&&o.activeHandle>-1)return TAe(s,o.activeHandle)},nodeViews:{}}});return a}var bAe=class hw{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(ts);if(r&&r.setHandle!=null)return new hw(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new hw(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return GE(e.doc.resolve(i))||(i=-1),new hw(i,n.dragging)}return n}};function _Ae(t,e,n,r){if(!t.editable)return;const i=ts.getState(t.state);if(i&&!i.dragging){const a=SAe(e.target);let s=-1;if(a){const{left:o,right:l}=a.getBoundingClientRect();e.clientX-o<=n?s=_N(t,e,"left",n):l-e.clientX<=n&&(s=_N(t,e,"right",n))}if(s!=i.activeHandle){if(!r&&s!==-1){const o=t.state.doc.resolve(s),l=o.node(-1),d=Pr.get(l),c=o.start(-1);if(d.colCount(o.pos-c)+o.nodeAfter.attrs.colspan-1==d.width-1)return}gQ(t,s)}}}function xAe(t){if(!t.editable)return;const e=ts.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&gQ(t,-1)}function wAe(t,e,n,r){var i;if(!t.editable)return!1;const a=(i=t.dom.ownerDocument.defaultView)!=null?i:window,s=ts.getState(t.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const o=t.state.doc.nodeAt(s.activeHandle),l=kAe(t,s.activeHandle,o.attrs);t.dispatch(t.state.tr.setMeta(ts,{setDragging:{startX:e.clientX,startWidth:l}}));function d(f){a.removeEventListener("mouseup",d),a.removeEventListener("mousemove",c);const p=ts.getState(t.state);p!=null&&p.dragging&&(CAe(t,p.activeHandle,xN(p.dragging,f,n)),t.dispatch(t.state.tr.setMeta(ts,{setDragging:null})))}function c(f){if(!f.which)return d(f);const p=ts.getState(t.state);if(p&&p.dragging){const h=xN(p.dragging,f,n);wN(t,p.activeHandle,h,r)}}return wN(t,s.activeHandle,l,r),a.addEventListener("mouseup",d),a.addEventListener("mousemove",c),e.preventDefault(),!0}function kAe(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const a=t.domAtPos(e);let o=a.node.childNodes[a.offset].offsetWidth,l=n;if(r)for(let d=0;d<n;d++)r[d]&&(o-=r[d],l--);return o/l}function SAe(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function _N(t,e,n,r){const i=n=="right"?-r:r,a=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!a)return-1;const{pos:s}=a,o=Rg(t.state.doc.resolve(s));if(!o)return-1;if(n=="right")return o.pos;const l=Pr.get(o.node(-1)),d=o.start(-1),c=l.map.indexOf(o.pos-d);return c%l.width==0?-1:d+l.map[c-1]}function xN(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function gQ(t,e){t.dispatch(t.state.tr.setMeta(ts,{setHandle:e}))}function CAe(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),a=Pr.get(i),s=r.start(-1),o=a.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let d=0;d<a.height;d++){const c=d*a.width+o;if(d&&a.map[c]==a.map[c-a.width])continue;const f=a.map[c],p=i.nodeAt(f).attrs,h=p.colspan==1?0:o-a.colCount(f);if(p.colwidth&&p.colwidth[h]==n)continue;const m=p.colwidth?p.colwidth.slice():AAe(p.colspan);m[h]=n,l.setNodeMarkup(s+f,null,je(me({},p),{colwidth:m}))}l.docChanged&&t.dispatch(l)}function wN(t,e,n,r){const i=t.state.doc.resolve(e),a=i.node(-1),s=i.start(-1),o=Pr.get(a).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&KE(a,l.firstChild,l,r,o,n)}function AAe(t){return Array(t).fill(0)}function TAe(t,e){var n;const r=[],i=t.doc.resolve(e),a=i.node(-1);if(!a)return yr.empty;const s=Pr.get(a),o=i.start(-1),l=s.colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;for(let d=0;d<s.height;d++){const c=l+d*s.width;if((l==s.width-1||s.map[c]!=s.map[c+1])&&(d==0||s.map[c]!=s.map[c-s.width])){const f=s.map[c],p=o+f+a.nodeAt(f).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",(n=ts.getState(t))!=null&&n.dragging&&r.push(mi.node(o+f,o+f+a.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(mi.widget(p,h))}}return yr.create(t.doc,r)}function EAe({allowTableNodeSelection:t=!1}={}){return new On({key:Gd,state:{init(){return null},apply(e,n){const r=e.getMeta(Gd);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:a}=e.mapping.mapResult(n);return i?null:a}},props:{decorations:BCe,handleDOMEvents:{mousedown:gAe},createSelectionBetween(e){return Gd.getState(e.state)!=null?e.state.selection:null},handleTripleClick:hAe,handleKeyDown:pAe,handlePaste:mAe},appendTransaction(e,n,r){return HCe(r,fQ(r,n),t)}})}function XE(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function kN(t,e,n,r,i,a){var s;let o=0,l=!0,d=e.firstChild;const c=t.firstChild;if(c!==null)for(let f=0,p=0;f<c.childCount;f+=1){const{colspan:h,colwidth:m}=c.child(f).attrs;for(let g=0;g<h;g+=1,p+=1){const v=i===p?a:m&&m[g],_=v?`${v}px`:"";if(o+=v||r,v||(l=!1),d){if(d.style.width!==_){const[x,w]=XE(r,v);d.style.setProperty(x,w)}d=d.nextSibling}else{const x=document.createElement("col"),[w,k]=XE(r,v);x.style.setProperty(w,k),e.appendChild(x)}}}for(;d;){const f=d.nextSibling;(s=d.parentNode)===null||s===void 0||s.removeChild(d),d=f}l?(n.style.width=`${o}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${o}px`)}class MAe{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),kN(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,kN(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function $Ae(t,e,n,r){let i=0,a=!0;const s=[],o=t.firstChild;if(!o)return{};for(let f=0,p=0;f<o.childCount;f+=1){const{colspan:h,colwidth:m}=o.child(f).attrs;for(let g=0;g<h;g+=1,p+=1){const v=n===p?r:m&&m[g];i+=v||e,v||(a=!1);const[_,x]=XE(e,v);s.push(["col",{style:`${_}: ${x}`}])}}const l=a?`${i}px`:"",d=a?"":`${i}px`;return{colgroup:["colgroup",{},...s],tableWidth:l,tableMinWidth:d}}function SN(t,e){return t.createAndFill()}function DAe(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function RAe(t,e,n,r,i){const a=DAe(t),s=[],o=[];for(let d=0;d<n;d+=1){const c=SN(a.cell);if(c&&o.push(c),r){const f=SN(a.header_cell);f&&s.push(f)}}const l=[];for(let d=0;d<e;d+=1)l.push(a.row.createChecked(null,r&&d===0?s:o));return a.table.createChecked(null,l)}function PAe(t){return t instanceof fr}const m_=({editor:t})=>{const{selection:e}=t.state;if(!PAe(e))return!1;let n=0;const r=TZ(e.ranges[0].$from,a=>a.type.name==="table");return r==null||r.node.descendants(a=>{if(a.type.name==="table")return!1;["tableCell","tableHeader"].includes(a.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},IAe=Er.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:MAe,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=$Ae(t,this.options.cellMinWidth),a=["table",In(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},a]:a},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:a})=>{const s=RAe(a.schema,t,e,n);if(i){const o=r.selection.from+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(Ht.near(r.doc.resolve(o)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>GCe(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>YCe(t,e),deleteColumn:()=>({state:t,dispatch:e})=>XCe(t,e),addRowBefore:()=>({state:t,dispatch:e})=>QCe(t,e),addRowAfter:()=>({state:t,dispatch:e})=>JCe(t,e),deleteRow:()=>({state:t,dispatch:e})=>tAe(t,e),deleteTable:()=>({state:t,dispatch:e})=>lAe(t,e),mergeCells:()=>({state:t,dispatch:e})=>fN(t,e),splitCell:()=>({state:t,dispatch:e})=>pN(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>e1("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>e1("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>sAe(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>fN(t,e)?!0:pN(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>iAe(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>mN(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>mN(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&fQ(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=fr.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:m_,"Mod-Backspace":m_,Delete:m_,"Mod-Delete":m_}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[yAe({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],EAe({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:fn(wt(t,"tableRole",e))}}}),OAe=Er.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",In(this.options.HTMLAttributes,t),0]}}),LAe=Er.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",In(this.options.HTMLAttributes,t),0]}}),VAe=Er.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",In(this.options.HTMLAttributes,t),0]}}),NAe={class:"lucide lucide-move-diagonal-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function jAe(t,e){return T(),P("svg",NAe,[...e[0]||(e[0]=[u("path",{d:"M19 13v6h-6"},null,-1),u("path",{d:"M5 11V5h6"},null,-1),u("path",{d:"m5 5 14 14"},null,-1)])])}const vQ=Vt({name:"lucide-move-diagonal-2",render:jAe}),FAe={class:"lucide lucide-align-left",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function BAe(t,e){return T(),P("svg",FAe,[...e[0]||(e[0]=[u("path",{d:"M15 12H3"},null,-1),u("path",{d:"M17 18H3"},null,-1),u("path",{d:"M21 6H3"},null,-1)])])}const yQ=Vt({name:"lucide-align-left",render:BAe}),zAe={class:"lucide lucide-align-center",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function UAe(t,e){return T(),P("svg",zAe,[...e[0]||(e[0]=[u("path",{d:"M17 12H7"},null,-1),u("path",{d:"M19 18H5"},null,-1),u("path",{d:"M21 6H3"},null,-1)])])}const bQ=Vt({name:"lucide-align-center",render:UAe}),HAe={class:"lucide lucide-align-right",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function qAe(t,e){return T(),P("svg",HAe,[...e[0]||(e[0]=[u("path",{d:"M21 12H9"},null,-1),u("path",{d:"M21 18H7"},null,-1),u("path",{d:"M21 6H3"},null,-1)])])}const _Q=Vt({name:"lucide-align-right",render:qAe}),WAe={class:"relative"},GAe=["src","alt","width","height"],YAe={class:"absolute bottom-2 right-2 flex items-center gap-2"},KAe={key:0,class:"flex divide-x divide-outline-gray-5 rounded bg-black/65"},XAe={key:1,class:"inset-0 absolute flex items-center justify-center z-10"},ZAe={class:"bg-gray-900/80 p-2 inset-0 leading-none rounded-sm flex flex-col items-center justify-center gap-2"},QAe={class:"flex items-center gap-2"},JAe=["disabled"],eTe={key:1,class:"w-full py-1.5"},tTe=Ze({__name:"ImageNodeView",props:sP,setup(t){const e=t,n=Q(null),r=Q(null),i=Q(!1),a=Q(0),s=Q(0),o=Q(1);function l(){e.editor.commands.setNodeSelection(e.getPos())}const d=Q(e.node.attrs.alt||""),c=Q(!1);bt(()=>{if(c.value=e.editor.isEditable,n.value){const S=e.node.attrs.width||n.value.naturalWidth,C=e.node.attrs.height||n.value.naturalHeight;S&&C&&(o.value=C/S)}}),e.editor.on("update",()=>{c.value=e.editor.isEditable});function f(S){const C=S.target.value;d.value=C,e.updateAttributes({alt:C})}function p(S){S.key==="Enter"?(S.preventDefault(),m()):(S.key==="Escape"||S.key==="ArrowDown")&&(S.preventDefault(),g()),S.key==="ArrowUp"&&(S.preventDefault(),v())}function h(S){e.editor.commands.focus(),e.editor.chain().setTextSelection(S).scrollIntoView().run()}function m(){const S=e.getPos();e.editor.commands.focus(),e.editor.chain().setTextSelection(S+1).createParagraphNear().scrollIntoView().run()}function g(){const S=e.getPos();h(S+1)}function v(){const S=e.getPos();h(S-1)}function _(S){var M,$,R;if(!c.value)return;l(),i.value=!0,a.value=S.clientX,s.value=((M=n.value)==null?void 0:M.offsetWidth)||e.node.attrs.width||0;const C=e.node.attrs.width||(($=n.value)==null?void 0:$.naturalWidth),A=e.node.attrs.height||((R=n.value)==null?void 0:R.naturalHeight);C&&A?o.value=A/C:o.value=1,window.addEventListener("mousemove",x),window.addEventListener("mouseup",w),document.body.style.cursor="ew-resize"}function x(S){if(!i.value||!n.value||!r.value)return;const A=e.editor.view.dom.clientWidth,M=S.clientX-a.value;let $=s.value+M;$=Math.max(50,Math.min($,A));const R=$*o.value;n.value.style.width=`${$}px`,n.value.style.height=`${R}px`,r.value.style.width=`${$}px`}function w(){if(i.value&&(i.value=!1,window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",w),document.body.style.cursor="",n.value&&r.value)){const S=n.value.offsetWidth,C=n.value.offsetHeight;e.updateAttributes({width:S,height:C}),n.value.style.width="",n.value.style.height="",r.value.style.width=""}}function k(S){e.editor.commands.setImageAlign(S)}return(S,C)=>(T(),he(y(wC),null,{default:D(()=>[u("div",{ref_key:"containerRef",ref:r,class:fe(["relative overflow-hidden not-prose my-6 rounded-[2px] block max-w-full",[{"ring-2 ring-outline-gray-3 ring-offset-2":S.selected},S.node.attrs.align==="center"?"mx-auto":"",S.node.attrs.align==="right"?"ml-auto mr-0":"",S.node.attrs.align==="left"?"mr-auto ml-0":""]]),style:nt({width:S.node.attrs.width?`${S.node.attrs.width}px`:"auto"})},[u("div",WAe,[S.node.attrs.src?(T(),P("img",{key:0,ref_key:"imageRef",ref:n,class:"rounded-[2px]",src:S.node.attrs.src,alt:S.node.attrs.alt||"",width:S.node.attrs.width,height:S.node.attrs.height,onClick:dt(l,["stop"])},null,8,GAe)):ie("",!0),u("div",YAe,[S.selected&&c.value?(T(),P("div",KAe,[u("button",{onClick:C[0]||(C[0]=dt(A=>k("left"),["stop"])),class:fe(["px-1.5 py-1 hover:text-ink-white",S.node.attrs.align==="left"?"text-ink-white":"text-ink-gray-4"])},[b(y(yQ),{class:"size-4"})],2),u("button",{onClick:C[1]||(C[1]=dt(A=>k("center"),["stop"])),class:fe(["px-1.5 py-1 hover:text-ink-white",S.node.attrs.align==="center"?"text-ink-white":"text-ink-gray-4"])},[b(y(bQ),{class:"size-4"})],2),u("button",{onClick:C[2]||(C[2]=dt(A=>k("right"),["stop"])),class:fe(["px-1.5 py-1 hover:text-ink-white",S.node.attrs.align==="right"?"text-ink-white":"text-ink-gray-4"])},[b(y(_Q),{class:"size-4"})],2)])):ie("",!0),S.selected&&c.value?(T(),P("button",{key:1,class:"cursor-nw-resize bg-black/65 rounded p-1",onMousedown:dt(_,["prevent"])},[b(y(vQ),{class:"text-white size-4"})],32)):ie("",!0)]),S.node.attrs.loading?(T(),P("div",XAe,[u("div",ZAe,[u("div",QAe,[b(xR,{class:"text-gray-100 size-4"}),C[4]||(C[4]=u("span",{class:"text-gray-100"},"Uploading...",-1))])])])):ie("",!0)]),(c.value||S.node.attrs.alt)&&!S.node.attrs.error?xe((T(),P("input",{key:0,"onUpdate:modelValue":C[3]||(C[3]=A=>d.value=A),class:"w-full text-center bg-transparent text-sm text-ink-gray-6 h-7 border-none focus:ring-0 placeholder-ink-gray-4",placeholder:"Add caption",disabled:!c.value,onChange:f,onKeydown:p},null,40,JAe)),[[Mt,d.value]]):ie("",!0),S.node.attrs.error?(T(),P("div",eTe,[b(y(qK),{message:`Upload Failed: ${S.node.attrs.error}`},null,8,["message"])])):ie("",!0)],6)]),_:1}))}}),nTe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,rTe=Er.create({name:"image",group:"block",draggable:!0,selectable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null},loading:{default:!1,parseHTML:()=>!1},align:{default:"left",parseHTML:t=>{const e=(t.getAttribute("data-align")||t.getAttribute("align")||"left").toLowerCase();return["left","center","right"].includes(e)?e:"left"},renderHTML:t=>({"data-align":t.align||"left"})},uploadId:{default:null,parseHTML:()=>null},error:{default:null,parseHTML:()=>null}}},parseHTML(){return[{tag:"img[src]",getAttrs:t=>{if(typeof t=="string")return{};const e=t;return{src:e.getAttribute("src"),alt:e.getAttribute("alt"),title:e.getAttribute("title"),width:e.getAttribute("width"),height:e.getAttribute("height")}}}]},renderHTML({HTMLAttributes:t}){return["img",In(this.options.HTMLAttributes||{},t)]},addNodeView(){return gb(tTe)},addOptions(){return{uploadFunction:null,HTMLAttributes:{}}},addCommands(){return{setImageAlign:t=>({commands:e})=>e.updateAttributes(this.name,{align:t}),setImage:t=>({commands:e,editor:n})=>{const r=e.insertContent({type:this.name,attrs:t});return r&&t.src&&sTe(n.view,t.src,(i,a)=>{CN(t.src,n.view,a)}),r},uploadImage:t=>({editor:e})=>wQ(t,e.view,null,this.options),selectAndUploadImage:()=>({editor:t})=>{const e=document.createElement("input");return e.type="file",e.accept="image/*",e.onchange=n=>{const r=n.target;if(r.files&&r.files.length){const i=r.files[0];t.commands.uploadImage(i)}},e.click(),!0}}},addInputRules(){return[RZ({find:nTe,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]},addProseMirrorPlugins(){const t=this;return[new On({props:{handleDOMEvents:{drop:(e,n)=>{var o,l;if(!((l=(o=n.dataTransfer)==null?void 0:o.files)==null?void 0:l.length)||!t.options.uploadFunction)return!1;const i=Array.from(n.dataTransfer.files).filter(d=>/image/i.test(d.type));if(i.length===0)return!1;n.preventDefault();const a=e.posAtCoords({left:n.clientX,top:n.clientY});let s=null;if(a){s=a.pos;const d=e.state.tr.setSelection(Wt.near(e.state.doc.resolve(s)));e.dispatch(d)}return R2(i,e,s,t.options),!0},handlePaste:(e,n)=>{var a;if(!t.options.uploadFunction)return!1;const r=(a=n.clipboardData)==null?void 0:a.items;if(!r||r.length===0)return!1;const i=[];for(let s=0;s<r.length;s++){const o=r[s];if(o.kind==="file"&&o.type.indexOf("image/")!==-1){const l=o.getAsFile();l&&i.push(l)}}return i.length===0?!1:(n.preventDefault(),R2(i,e,null,t.options),!0)}}},appendTransaction(e,n,r){const i=[];return e.some(a=>a.docChanged)&&r.doc.descendants((a,s)=>{a.type.name==="image"&&a.attrs.src&&(!a.attrs.width||!a.attrs.height)&&!a.attrs.loading&&i.push({node:a,pos:s})}),i.length===0||i.forEach(({node:a,pos:s})=>{const o=t.editor;o&&CN(a.attrs.src,o.view,s)}),null}})]}});function iTe(t,e){if(!e)return null;let n=null;return t.state.doc.descendants((r,i)=>{if(r.type.name==="image"&&r.attrs.uploadId===e)return n=i+r.nodeSize,!1}),n}function xQ(t,e,n,r,i,a,s=!1){if(!r.uploadFunction)return console.error("uploadFunction option is not provided"),!1;const o=`upload-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;return KJe(t).then(l=>{const d=e.state.schema.nodes.image.create({loading:!0,uploadId:o,src:l}),c=e.state.tr;if(i==="replace")if(n===null)c.replaceSelectionWith(d);else{const f=e.state.doc.nodeAt(n);f&&c.replaceWith(n,n+f.nodeSize,d)}else if(n!=null)c.insert(n,d);else{const f=e.state.selection.from;c.insert(f,d)}if(e.dispatch(c),s){const f=d.nodeSize||1;setTimeout(()=>{try{let p=null;if(e.state.doc.descendants((h,m)=>{if(h.type.name==="image"&&h.attrs.uploadId===o)return p=m,!1}),p!==null){const h=p+f,m=e.state.tr.setSelection(Wt.near(e.state.doc.resolve(h)));e.dispatch(m)}}catch(p){console.error("Error moving cursor:",p)}},10)}return r.uploadFunction(t)}).then(l=>kQ(l.file_url).then(d=>je(me({},l),{width:d.width,height:d.height})).catch(()=>l)).then(l=>{const d=e.state.tr;e.state.doc.descendants((c,f)=>{if(c.type.name==="image"&&c.attrs.uploadId===o)return d.setNodeMarkup(f,void 0,je(me({},c.attrs),{src:l.file_url,width:l.width||c.attrs.width,height:l.height||c.attrs.height,loading:!1})),!1}),e.dispatch(d),a&&a(o)}).catch(l=>{console.error("Image upload failed:",l);try{const d=e.state.tr;e.state.doc.descendants((c,f)=>{if(c.type.name==="image"&&c.attrs.uploadId===o)return d.setNodeMarkup(f,void 0,je(me({},c.attrs),{loading:!1,error:l.message||"Failed to upload image"})),!1}),e.dispatch(d)}catch(d){console.error("Error updating failed node:",d)}a&&a(o)}),!0}function aTe(t,e,n,r,i){return xQ(t,e,n,r,"insert",i,!0)}function wQ(t,e,n,r){return xQ(t,e,n,r,"replace")}function sTe(t,e,n){t.state.doc.descendants((r,i)=>{if(r.type.name==="image"&&r.attrs.src===e)return n(r,i),!1})}function CN(t,e,n){kQ(t).then(r=>{var s,o;const i=e.state.doc.nodeAt(n);if(!i||i.type.name!=="image")return;const a=i.attrs;if(a.width==null||a.height==null){const l=e.state.tr.setNodeMarkup(n,void 0,je(me({},a),{width:(s=a.width)!=null?s:r.width,height:(o=a.height)!=null?o:r.height}));e.dispatch(l)}}).catch(r=>{})}function kQ(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e({width:r.naturalWidth,height:r.naturalHeight}),r.onerror=n,r.src=t})}function R2(t,e,n,r){if(t.length===1){wQ(t[0],e,n,r);return}let i=[...t],a=null;const s=()=>{if(i.length===0)return;const o=i.shift();if(!o)return;const l=a?iTe(e,a):n;aTe(o,e,l,r,d=>{a=d,setTimeout(s,100)})};s()}function oTe(t){const{targetRef:e,zoomLevel:n=Q(100),onSwipeLeft:r,onSwipeRight:i,onDoubleTap:a,onTap:s,onPanStart:o,onPanMove:l,onPanAnimate:d,onPanEnd:c,onPinchStart:f,onPinchMove:p,onPinchEnd:h,doubleTapDelay:m=300,minSwipeDistance:g=50,maxVerticalSwipeDistance:v=75,maxTapDuration:_=200,maxTapMovement:x=10,panThreshold:w=5,inertiaDamping:k=.94,inertiaVelocityThreshold:S=.5}=t,C=Q(!1),A=Q(!1),M=Q(!1),$=Q({x:0,y:0}),R=Q(0),I=Q(0),B=Q(0),j=Q(null),z=Q(0),F=Q({x:0,y:0}),q=Q({x:0,y:0}),N=Q(null),O=()=>{N.value!==null&&(cancelAnimationFrame(N.value),N.value=null),M.value=!1,q.value={x:0,y:0}},V=G=>{O(),G.preventDefault(),C.value=!1,A.value=!1,j.value=G.touches;const X=performance.now(),re=X-R.value;if(re<m&&re>0&&G.touches.length===1&&a){a(G),R.value=0,I.value=0;return}if(I.value=X,G.touches.length===1){R.value=X;const ee=G.touches[0];$.value={x:ee.clientX,y:ee.clientY},z.value=X,F.value=me({},$.value),q.value={x:0,y:0},o&&o(G)}else if(G.touches.length===2){R.value=0;const ee=G.touches[0],de=G.touches[1];B.value=Math.hypot(de.clientX-ee.clientX,de.clientY-ee.clientY),A.value=!0,f&&f(G)}else R.value=0,I.value=0},L=G=>{if(!j.value)return;G.preventDefault();const X=performance.now(),re=X-z.value;if(G.touches.length===2&&j.value.length===2){C.value=!1,A.value=!0;const ee=G.touches[0],de=G.touches[1],se=Math.hypot(de.clientX-ee.clientX,de.clientY-ee.clientY);if(B.value>0&&p){const te=se/B.value;p(te,G)}q.value={x:0,y:0}}else if(G.touches.length===1&&j.value.length===1&&!A.value){const ee=G.touches[0].clientX,de=G.touches[0].clientY,se=ee-F.value.x,te=de-F.value.y;re>1?q.value={x:se/re,y:te/re}:q.value={x:0,y:0},z.value=X,F.value={x:ee,y:de};const ne=ee-$.value.x,ce=de-$.value.y;if(!C.value&&n.value>100&&(Math.abs(ne)>w||Math.abs(ce)>w)&&(C.value=!0,$.value={x:ee,y:de}),C.value&&l){const ve=n.value/100,Y=ne/ve,K=ce/ve;l(Y,K,G)}}},U=G=>{var te;const X=G.touches.length,re=performance.now(),ee=C.value,de=A.value,se=me({},q.value);if(ee&&j.value&&X<j.value.length)if(C.value=!1,c&&c(G),Math.hypot(se.x,se.y)>S&&d&&n.value>100){M.value=!0;let ce=performance.now(),ve=me({},se);const Y=K=>{if(!M.value)return;const H=Math.max(1,K-ce);ce=K;const ae=n.value/100,be=ve.x*H/ae,ue=ve.y*H/ae;d(be,ue);const pe=Math.pow(Math.min(.999,k),H/16.67);ve.x*=pe,ve.y*=pe,Math.hypot(ve.x,ve.y)<.01||n.value<=100?O():N.value=requestAnimationFrame(Y)};N.value=requestAnimationFrame(Y)}else q.value={x:0,y:0};else ee||(q.value={x:0,y:0});if(de&&X<2&&(A.value=!1,B.value=0,h&&h(G)),X===0&&G.changedTouches.length===1&&I.value>0&&((te=j.value)==null?void 0:te.length)===1){const ne=G.changedTouches[0],ce=ne.clientX-$.value.x,ve=ne.clientY-$.value.y,Y=re-I.value;!ee&&n.value<=100&&Math.abs(ce)>g&&Math.abs(ve)<v?ce<0&&r?r():ce>0&&i&&i():!ee&&Y<_&&Math.abs(ce)<x&&Math.abs(ve)<x&&s&&s(G)}X===0?(I.value=0,$.value={x:0,y:0},j.value=null,A.value=!1,M.value||(q.value={x:0,y:0})):X===1&&!C.value&&!A.value&&($.value={x:G.touches[0].clientX,y:G.touches[0].clientY},I.value=performance.now(),j.value=G.touches)};return Je(e,(G,X)=>{X&&(X.removeEventListener("touchstart",V),X.removeEventListener("touchmove",L),X.removeEventListener("touchend",U),X.removeEventListener("touchcancel",U),O()),G&&(G.addEventListener("touchstart",V,{passive:!1}),G.addEventListener("touchmove",L,{passive:!1}),G.addEventListener("touchend",U,{passive:!0}),G.addEventListener("touchcancel",U,{passive:!0}))},{immediate:!0}),{isPanning:zs(C),isPinching:zs(A),isAnimatingPan:zs(M)}}function lTe({initialIndex:t,imageCount:e,onNavigate:n}){const r=Q(t.value);Je(t,s=>{r.value=s,n==null||n()});function i(){e.value>0&&(r.value=(r.value+1)%e.value,n==null||n())}function a(){e.value>0&&(r.value=(r.value-1+e.value)%e.value,n==null||n())}return{currentIndex:r,nextImage:i,previousImage:a}}function uTe({containerRef:t,isEnabled:e}){const n=Q(100),r=Q({x:0,y:0}),i=Q(!1),a=Q({x:0,y:0}),s=Q({x:0,y:0}),o=90,l=110;Je(n,(m,g)=>{m<=100&&g>100&&(r.value={x:0,y:0})});function d(){n.value=Math.min(n.value+25,300)}function c(){const m=Math.max(n.value-25,25);n.value>100&&m<100?n.value=100:n.value=m}function f(){n.value=100,r.value={x:0,y:0},i.value=!1,s.value={x:0,y:0}}function p(m){if(n.value<=100)return;m.preventDefault(),i.value=!0,a.value={x:m.clientX,y:m.clientY},s.value=me({},r.value);const g=_=>{if(!i.value)return;const x=_.clientX-a.value.x,w=_.clientY-a.value.y,k=n.value/100;r.value={x:s.value.x+x/k,y:s.value.y+w/k}},v=()=>{i.value&&(i.value=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v))};document.addEventListener("mousemove",g),document.addEventListener("mouseup",v)}function h(m){var g;if(e.value&&(g=t.value)!=null&&g.contains(m.target)){m.preventDefault();let v=m.ctrlKey?.5:.2;const _=-m.deltaY*v,x=n.value,w=Math.round(x+_);let k=Math.max(25,Math.min(300,w));(x>100&&k<100||x<100&&k>100)&&Math.abs(100-k)<Math.abs(_)*1.5&&(k=100),n.value=k}}return bt(()=>{const m=t.value;m&&m.addEventListener("wheel",h,{passive:!1,capture:!0})}),Pi(()=>{const m=t.value;m&&m.removeEventListener("wheel",h,{capture:!0}),i.value&&(i.value=!1)}),{zoomLevel:n,panPosition:r,isMousePanning:i,initialPanPositionOnGestureStart:s,zoomIn:d,zoomOut:c,resetZoom:f,handlePanStart:p,snapThresholdLower:o,snapThresholdUpper:l}}const dTe={class:"lucide lucide-download",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function cTe(t,e){return T(),P("svg",dTe,[...e[0]||(e[0]=[u("path",{d:"M12 15V3"},null,-1),u("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),u("path",{d:"m7 10 5 5 5-5"},null,-1)])])}const fTe=Vt({name:"lucide-download",render:cTe}),pTe={class:"lucide lucide-maximize",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function hTe(t,e){return T(),P("svg",pTe,[...e[0]||(e[0]=[u("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"},null,-1),u("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"},null,-1),u("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"},null,-1),u("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"},null,-1)])])}const mTe=Vt({name:"lucide-maximize",render:hTe}),gTe={class:"lucide lucide-minimize",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function vTe(t,e){return T(),P("svg",gTe,[...e[0]||(e[0]=[u("path",{d:"M8 3v3a2 2 0 0 1-2 2H3"},null,-1),u("path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"},null,-1),u("path",{d:"M3 16h3a2 2 0 0 1 2 2v3"},null,-1),u("path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"},null,-1)])])}const yTe=Vt({name:"lucide-minimize",render:vTe}),bTe={class:"lucide lucide-chevron-left",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function _Te(t,e){return T(),P("svg",bTe,[...e[0]||(e[0]=[u("path",{d:"m15 18-6-6 6-6"},null,-1)])])}const xTe=Vt({name:"lucide-chevron-left",render:_Te}),wTe={class:"lucide lucide-chevron-right",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function kTe(t,e){return T(),P("svg",wTe,[...e[0]||(e[0]=[u("path",{d:"m9 18 6-6-6-6"},null,-1)])])}const STe=Vt({name:"lucide-chevron-right",render:kTe}),CTe={class:"lucide lucide-plus",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function ATe(t,e){return T(),P("svg",CTe,[...e[0]||(e[0]=[u("path",{d:"M5 12h14"},null,-1),u("path",{d:"M12 5v14"},null,-1)])])}const TTe=Vt({name:"lucide-plus",render:ATe}),ETe={class:"lucide lucide-minus",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function MTe(t,e){return T(),P("svg",ETe,[...e[0]||(e[0]=[u("path",{d:"M5 12h14"},null,-1)])])}const SQ=Vt({name:"lucide-minus",render:MTe}),$Te={class:"relative z-10 flex flex-col items-center"},DTe=["src","alt"],RTe={class:"bg-black/65 rounded flex items-center"},PTe={class:"px-2 text-sm tabular-nums text-gray-400 select-none"},ITe={class:"bg-black/65 rounded flex items-center"},OTe={class:"bg-black/65 rounded flex items-center"},LTe={class:"bg-black/65 rounded flex items-center"},VTe=3e3,CQ=Ze({__name:"ImageViewerModal",props:{show:{type:Boolean},images:{},initialIndex:{}},emits:["update:show"],setup(t,{emit:e}){const n=t,r=e,i=Oy("imageContainer"),a=Oy("backdropElement"),s=Oy("controlsBar"),o=Q(0),l=Q(!1),d=Q(100),c=Q(!0),f=Q(null),{zoomLevel:p,panPosition:h,isMousePanning:m,initialPanPositionOnGestureStart:g,zoomIn:v,zoomOut:_,resetZoom:x,handlePanStart:w,snapThresholdLower:k,snapThresholdUpper:S}=uTe({containerRef:i,isEnabled:Zw(n,"show")}),{currentIndex:C,nextImage:A,previousImage:M}=lTe({initialIndex:Zw(n,"initialIndex"),imageCount:J(()=>n.images.length),onNavigate:x}),$=J(()=>n.images[C.value]),{isPanning:R,isPinching:I,isAnimatingPan:B}=oTe({targetRef:i,zoomLevel:p,panThreshold:10,onSwipeLeft:()=>{p.value<=100&&A()},onSwipeRight:()=>{p.value<=100&&M()},onDoubleTap:U=>{var G;(G=s.value)!=null&&G.contains(U.target)||(p.value>100?x():(p.value=200,h.value={x:0,y:0}))},onTap:U=>{U.target===a.value&&q()},onPanStart:()=>{p.value<=100||(g.value=me({},h.value))},onPanMove:(U,G)=>{p.value<=100||(h.value={x:g.value.x+U,y:g.value.y+G})},onPanAnimate:(U,G)=>{h.value={x:h.value.x+U,y:h.value.y+G}},onPinchStart:()=>{d.value=p.value,g.value=me({},h.value)},onPinchMove:U=>{const G=d.value*U;let X=Math.max(25,Math.min(300,Math.round(G)));X>k&&X<S&&(X=100),p.value=X},onPinchEnd:()=>{p.value<100&&x(),g.value={x:0,y:0}}}),j=J(()=>m.value||R.value);function z(){c.value=!0,f.value&&clearTimeout(f.value),f.value=setTimeout(()=>{!j.value&&!I.value?c.value=!1:z()},VTe)}function F(){(!I.value||!c.value)&&z()}function q(){r("update:show",!1),x(),f.value&&(clearTimeout(f.value),f.value=null)}function N(){var re;const U=$.value,G=document.createElement("a");G.href=U.src;const X=((re=U.alt)==null?void 0:re.replace(/[^a-z0-9]/gi,"_").toLowerCase())||U.src.split("/").pop()||"download";G.download=X.includes(".")?X:`${X}.jpg`,document.body.appendChild(G),G.click(),document.body.removeChild(G)}function O(){const U=i.value;l.value?document.exitFullscreen&&(document.exitFullscreen(),l.value=!1):U!=null&&U.requestFullscreen&&(U.requestFullscreen(),l.value=!0)}function V(){l.value=!!document.fullscreenElement}function L(U){if(n.show)switch(F(),U.key){case"ArrowLeft":j.value||M(),U.preventDefault();break;case"ArrowRight":j.value||A(),U.preventDefault();break;case"+":case"=":v(),U.preventDefault();break;case"-":_(),U.preventDefault();break;case"Escape":q(),U.preventDefault();break;case"f":case"F":O(),U.preventDefault();break}}return Je(()=>n.show,U=>{U?(c.value=!0,x(),z()):(f.value&&(clearTimeout(f.value),f.value=null),l.value&&document.exitFullscreen&&document.exitFullscreen())}),Je(s,U=>{if(U){const G=()=>{o.value=U.offsetHeight},X=new ResizeObserver(G);X.observe(U),G(),Pi(()=>X.disconnect())}else o.value=0}),bt(()=>{document.addEventListener("fullscreenchange",V),document.addEventListener("keydown",L)}),Pi(()=>{document.removeEventListener("fullscreenchange",V),document.removeEventListener("keydown",L),f.value&&clearTimeout(f.value),l.value&&document.exitFullscreen&&document.exitFullscreen()}),(U,G)=>(T(),he(ID,{to:"body"},[b(UG,{"enter-active-class":"transition-opacity duration-150 ease-in-out","leave-active-class":"transition-opacity duration-150 ease-in-out","enter-from-class":"opacity-0","leave-to-class":"opacity-0",appear:""},{default:D(()=>[n.show?(T(),P("div",{key:0,class:"fixed top-0 left-0 w-full h-full bg-black sm:bg-black/90 z-[50] flex flex-col justify-center items-center overflow-hidden touch-none",ref_key:"imageContainer",ref:i,onMousemove:F,onTouchstart:F,onTouchmove:F},[u("div",{class:"absolute inset-0 z-0",ref_key:"backdropElement",ref:a,onClick:q},null,512),u("div",$Te,[u("img",{src:$.value.src,alt:$.value.alt||"Image preview",class:"max-w-screen max-h-screen object-contain block",style:nt({transform:`scale(${y(p)/100}) translate(${y(h).x}px, ${y(h).y}px)`,cursor:y(p)>100?y(m)?"grabbing":"grab":"default",transition:j.value||y(I)||y(B)?"none":"transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)"}),onMousedown:G[0]||(G[0]=(...X)=>y(w)&&y(w)(...X)),draggable:"false"},null,44,DTe)]),$.value.alt?(T(),P("div",{key:0,class:fe(["absolute bottom-4 p-2 text-center rounded-sm text-white text-sm bg-black/65 z-10 transition-opacity duration-300 ease-in-out",{"opacity-0 pointer-events-none":!c.value}])},E($.value.alt),3)):ie("",!0),u("div",{ref_key:"controlsBar",ref:s,class:fe(["absolute top-4 flex items-center space-x-3 p-2 text-white z-20 transition-opacity duration-300 ease-in-out",{"opacity-0 pointer-events-none":!c.value}]),onTouchstart:G[6]||(G[6]=dt(()=>{},["stop"])),onTouchmove:G[7]||(G[7]=dt(()=>{},["stop"])),onTouchend:G[8]||(G[8]=dt(()=>{},["stop"])),onMousedown:G[9]||(G[9]=dt(()=>{},["stop"])),onWheel:G[10]||(G[10]=dt(()=>{},["stop"]))},[u("div",RTe,[b(cu,{text:"Previous image"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-l focus:outline-none",onClick:G[1]||(G[1]=dt((...X)=>y(M)&&y(M)(...X),["stop"]))},[b(y(xTe),{class:"size-4"})])]),_:1}),u("span",PTe,E(y(C)+1)+"/"+E(n.images.length),1),b(cu,{text:"Next image"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-r focus:outline-none",onClick:G[2]||(G[2]=dt((...X)=>y(A)&&y(A)(...X),["stop"]))},[b(y(STe),{class:"size-4"})])]),_:1})]),u("div",ITe,[b(cu,{text:"Zoom out"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-l focus:outline-none",onClick:G[3]||(G[3]=dt((...X)=>y(_)&&y(_)(...X),["stop"]))},[b(y(SQ),{class:"size-4"})])]),_:1}),b(cu,{text:"Reset zoom"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 text-sm text-gray-400 focus:outline-none",onClick:G[4]||(G[4]=dt((...X)=>y(x)&&y(x)(...X),["stop"]))},E(y(p))+"% ",1)]),_:1}),b(cu,{text:"Zoom in"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-r focus:outline-none",onClick:G[5]||(G[5]=dt((...X)=>y(v)&&y(v)(...X),["stop"]))},[b(y(TTe),{class:"size-4"})])]),_:1})]),u("div",OTe,[b(cu,{text:"Download image"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-l focus:outline-none",onClick:dt(N,["stop"])},[b(y(fTe),{class:"size-4"})])]),_:1}),b(cu,{text:l.value?"Exit fullscreen":"Enter fullscreen"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-r focus:outline-none hidden sm:block",onClick:dt(O,["stop"])},[l.value?(T(),he(y(yTe),{key:1,class:"size-4"})):(T(),he(y(mTe),{key:0,class:"size-4"}))])]),_:1},8,["text"])]),u("div",LTe,[b(cu,{text:"Close"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded focus:outline-none",onClick:dt(q,["stop"])},[b(y(Eg),{class:"size-4"})])]),_:1})])],34)],544)):ie("",!0)]),_:1})]))}}),NTe=br.create({name:"imageViewer",onBeforeCreate(){if(!document.querySelector("style[data-image-viewer-style]")){const t=document.createElement("style");t.textContent=`
          .ProseMirror:not(.ProseMirror-focused) img {
            cursor: pointer;
          }
        `,t.setAttribute("data-image-viewer-style","true"),document.head.appendChild(t)}},onDestroy(){const t=document.querySelector("style[data-image-viewer-style]");t&&document.head.removeChild(t)},addCommands(){return{openImageViewer:t=>({editor:e})=>{const n=[];e.state.doc.descendants(i=>(i.type.name==="image"&&n.push({src:i.attrs.src,alt:i.attrs.alt||null}),!0));const r=n.findIndex(i=>i.src===t);return jTe(n,r),!0}}},addProseMirrorPlugins(){const t=this;return[new On({key:new Un("imageViewer"),props:{handleClick(e,n,r){if(t.editor.isEditable)return!1;const{state:i}=e,a=i.doc.nodeAt(n);if((a==null?void 0:a.type.name)==="image"){r.preventDefault();const s=a.attrs.src;return t.editor.commands.openImageViewer(s),!0}if(r.target instanceof HTMLImageElement){let s=!1;if(i.doc.descendants((o,l)=>{if(o.type.name==="image"&&!s){const d=e.nodeDOM(l);if(d&&(d===r.target||d.contains(r.target)))return r.preventDefault(),t.editor.commands.openImageViewer(o.attrs.src),s=!0,!1}return!0}),s)return!0}return!1}}})]}});function jTe(t,e){const n=document.createElement("div");document.body.appendChild(n);const r=FD({render(){return dr(CQ,{show:!0,images:t,initialIndex:e,"onUpdate:show":i=>{i||setTimeout(()=>{r.unmount(),n.remove()},0)}})}});r.mount(n)}const FTe=Er.create({name:"video",group:"block",selectable:!0,draggable:!0,atom:!0,addOptions(){return{uploadFunction:null,HTMLAttributes:{}}},addAttributes(){return{src:{default:null}}},parseHTML(){return[{tag:"video"}]},renderHTML({HTMLAttributes:t}){return["video",In(this.options.HTMLAttributes,t,{controls:""})]},addCommands(){return{setVideo:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t}),uploadVideo:t=>({editor:e})=>{const n=e.state.selection.from;return BTe(t,e.view,n,this.options)},selectAndUploadVideo:()=>({editor:t})=>{if(!this.options.uploadFunction)return console.error("uploadFunction option is not provided for videos."),!1;const e=document.createElement("input");return e.type="file",e.accept="video/*",e.onchange=n=>{const r=n.target;if(r.files&&r.files.length){const i=r.files[0];t.commands.uploadVideo(i)}},e.click(),!0}}},addNodeView(){return({editor:t,node:e})=>{const n=document.createElement("div");n.className="relative aspect-w-16 aspect-h-9"+(t.isEditable?" cursor-pointer":"");const r=document.createElement("video");if(r.src=e.attrs.src,r.setAttribute("controls",""),t.isEditable){let i=document.createElement("div");i.className="absolute top-0 right-0 text-xs m-2 bg-surface-gray-6 text-ink-white px-2 py-1 rounded-md",i.innerHTML="Video",n.append(i)}return n.append(r),{dom:n}}}});function BTe(t,e,n,r){return r.uploadFunction?(r.uploadFunction(t).then(i=>{const{schema:a}=e.state,s=a.nodes.video.create({src:i.file_url}),o=e.state.tr;n!=null?o.insert(n,s):o.replaceSelectionWith(s),e.dispatch(o)}).catch(i=>{console.error("Video upload failed:",i)}),!0):(console.error("uploadFunction option is not provided for videos."),!1)}const zTe=["youtube.com","www.youtube.com","youtu.be","vimeo.com","player.vimeo.com","codepen.io","codesandbox.io","figma.com","www.figma.com","embed.figma.com","docs.google.com","drive.google.com","notion.so","www.notion.so"],UTe=[{name:"YouTube",ratio:9/16,defaultWidth:640,urlPatterns:["youtube.com","youtu.be","youtube-nocookie.com"]},{name:"Vimeo",ratio:9/16,defaultWidth:640,urlPatterns:["vimeo.com","player.vimeo.com"]},{name:"CodePen",ratio:3/2,defaultWidth:500,urlPatterns:["codepen.io"]},{name:"CodeSandbox",ratio:3/2,defaultWidth:500,urlPatterns:["codesandbox.io"]},{name:"Figma",ratio:9/16,defaultWidth:800,urlPatterns:["figma.com","www.figma.com","embed.figma.com"]},{name:"Google Docs",ratio:4/3,defaultWidth:600,urlPatterns:["docs.google.com","drive.google.com"]},{name:"Notion",ratio:4/3,defaultWidth:600,urlPatterns:["notion.so","www.notion.so"]}];function AQ(t){try{const n=new URL(t).hostname.toLowerCase();return UTe.find(r=>r.urlPatterns.some(i=>n.includes(i)))||null}catch(e){return null}}function ZE(t){const e=AQ(t);return e?{ratio:e.ratio,width:e.defaultWidth,height:Math.round(e.defaultWidth*e.ratio),platform:e.name}:{ratio:9/16,width:640,height:360,platform:"Generic"}}function QE(t,e){const n=ZE(t);if(e){const i=Math.min(e-40,n.width);return{width:i,height:Math.round(i*n.ratio)}}return{width:n.width,height:n.height}}function TQ(t,e){var n,r;try{if(t.startsWith("/"))return!0;const a=new URL(t).hostname.toLowerCase();return(n=e.blockedDomains)!=null&&n.some(s=>a.includes(s))?!1:(r=e.allowedDomains)!=null&&r.length?e.allowedDomains.some(s=>a.includes(s.toLowerCase())):!0}catch(i){return!1}}function JE(t){try{const n=new URL(t).hostname.toLowerCase();return n.includes("youtube.com")||n.includes("youtu.be")?HTe(t):n.includes("vimeo.com")?qTe(t):n.includes("codepen.io")?WTe(t):n.includes("figma.com")?GTe(t):t}catch(e){return t}}function HTe(t){try{const e=new URL(t);let n="";if(e.hostname==="youtu.be")n=e.pathname.slice(1);else if(e.hostname.includes("youtube.com")&&(n=e.searchParams.get("v")||"",e.pathname.includes("/embed/")))return t;if(n)return`https://www.youtube.com/embed/${n}?rel=0&modestbranding=1`}catch(e){console.warn("Failed to convert YouTube URL:",e)}return t}function qTe(t){try{if(t.includes("player.vimeo.com"))return t;const e=t.match(/vimeo\.com\/(?:.*\/)?(\d+)/);if(e!=null&&e[1])return`https://player.vimeo.com/video/${e[1]}?title=0&byline=0&portrait=0`}catch(e){console.warn("Failed to convert Vimeo URL:",e)}return t}function WTe(t){try{if(t.includes("/embed/"))return t;const e=t.match(/codepen\.io\/([^\/]+)\/pen\/([^\/\?]+)/);if(e!=null&&e[1]&&(e!=null&&e[2]))return`https://codepen.io/${e[1]}/embed/${e[2]}?default-tab=result`}catch(e){console.warn("Failed to convert CodePen URL:",e)}return t}function GTe(t){try{const e=new URL(t);return(e.hostname==="www.figma.com"||e.hostname==="figma.com")&&e.pathname.startsWith("/design/")?(e.hostname="embed.figma.com",e.searchParams.set("embed-host","share"),e.toString()):e.hostname==="embed.figma.com"?(e.searchParams.has("embed-host")||e.searchParams.set("embed-host","share"),e.toString()):t}catch(e){console.warn("Failed to convert Figma URL:",e)}return t}const YTe={class:"relative"},KTe=["src","title"],XTe={class:"absolute bottom-2 right-2 flex items-center gap-2 z-20"},ZTe={key:0,class:"flex divide-x divide-ink-gray-6 rounded-md bg-black/65"},QTe={key:2,class:"flex items-center justify-center bg-surface-gray-1 rounded-lg w-[640px] h-[360px]"},JTe=["value","disabled"],e4e=Ze({__name:"IframeNodeView",props:sP,setup(t){const e=t,n=Q(null),r=Q(null),i=Q(!1),a=Q(0),s=Q(0),o=Q(9/16),l=Q(!1);function d(){e.editor.commands.setNodeSelection(e.getPos())}J(()=>{if(e.node.attrs.src){const k=AQ(e.node.attrs.src),S=ZE(e.node.attrs.src);return{platform:(k==null?void 0:k.name)||"Generic",aspectRatio:S.ratio}}return{platform:"Generic",aspectRatio:9/16}});const c=J(()=>{const k=e.node.attrs.width||640,S=e.node.attrs.height||k*o.value;return{width:`${k}px`,height:`${S}px`}});bt(()=>{if(l.value=e.editor.isEditable,e.node.attrs.aspectRatio)o.value=e.node.attrs.aspectRatio;else if(e.node.attrs.src){const k=ZE(e.node.attrs.src);o.value=k.ratio,e.updateAttributes({aspectRatio:k.ratio})}}),e.editor.on("update",()=>{l.value=e.editor.isEditable});function f(k){var S;if(l.value){if(d(),i.value=!0,a.value=k.clientX,s.value=((S=r.value)==null?void 0:S.offsetWidth)||e.node.attrs.width||640,e.node.attrs.aspectRatio)o.value=e.node.attrs.aspectRatio;else{const C=e.node.attrs.width||s.value,A=e.node.attrs.height||C*o.value;C&&A&&(o.value=A/C)}window.addEventListener("mousemove",p),window.addEventListener("mouseup",h),document.body.style.cursor="ew-resize"}}function p(k){if(!i.value||!n.value||!r.value)return;const C=e.editor.view.dom.clientWidth,A=k.clientX-a.value;let M=s.value+A;M=Math.max(200,Math.min(M,C-40));const I=M*o.value;n.value.style.width=`${M}px`,n.value.style.height=`${I}px`,r.value.style.width=`${M}px`}function h(){if(i.value&&(i.value=!1,window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",h),document.body.style.cursor="",n.value&&r.value)){const k=n.value.offsetWidth,S=n.value.offsetHeight;e.updateAttributes({width:k,height:S,aspectRatio:o.value}),n.value.style.width="",n.value.style.height="",r.value.style.width=""}}function m(k){e.updateAttributes({align:k})}function g(k){k.key==="Enter"?(k.preventDefault(),_()):(k.key==="Escape"||k.key==="ArrowDown")&&(k.preventDefault(),x()),k.key==="ArrowUp"&&(k.preventDefault(),w())}function v(k){e.editor.commands.focus(),e.editor.chain().setTextSelection(k).scrollIntoView().run()}function _(){const k=e.getPos();e.editor.commands.focus(),e.editor.chain().setTextSelection(k+1).createParagraphNear().scrollIntoView().run()}function x(){const k=e.getPos();v(k+1)}function w(){const k=e.getPos();v(k-1)}return(k,S)=>(T(),he(y(wC),null,{default:D(()=>[u("div",{ref_key:"containerRef",ref:r,class:fe(["relative overflow-hidden not-prose my-6 rounded-lg block max-w-full focus:outline-none",[{"ring-2 ring-outline-gray-3 ring-offset-2":k.selected},k.node.attrs.align==="center"?"mx-auto":"",k.node.attrs.align==="right"?"ml-auto mr-0":"",k.node.attrs.align==="left"?"mr-auto ml-0":""]]),style:nt({width:k.node.attrs.width?`${k.node.attrs.width}px`:"auto",maxWidth:"100%"}),onKeydown:g,tabindex:"0"},[u("div",YTe,[k.node.attrs.src?(T(),P("iframe",{key:0,ref_key:"iframeRef",ref:n,class:fe(["rounded-lg border-0 block max-w-full h-auto",{"pointer-events-none":l.value&&!e.node.attrs.interactive}]),src:k.node.attrs.src,style:nt(c.value),title:k.node.attrs.title||"",frameborder:"0",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",sandbox:"allow-scripts allow-same-origin allow-popups allow-forms",onClick:dt(d,["stop"])},null,14,KTe)):ie("",!0),l.value&&!e.node.attrs.interactive?(T(),P("div",{key:1,class:"absolute inset-0 cursor-pointer z-10",onClick:dt(d,["stop"])})):ie("",!0),u("div",XTe,[k.selected&&l.value?(T(),P("div",ZTe,[u("button",{onClick:S[0]||(S[0]=dt(C=>m("left"),["stop"])),class:fe(["px-1.5 py-1 text-ink-gray-4 hover:text-white transition-colors duration-150",{"text-white":k.node.attrs.align==="left"}]),title:"Align Left"},[b(y(yQ),{class:"size-4"})],2),u("button",{onClick:S[1]||(S[1]=dt(C=>m("center"),["stop"])),class:fe(["px-1.5 py-1 text-ink-gray-4 hover:text-white transition-colors duration-150",{"text-white":k.node.attrs.align==="center"}]),title:"Align Center"},[b(y(bQ),{class:"size-4"})],2),u("button",{onClick:S[2]||(S[2]=dt(C=>m("right"),["stop"])),class:fe(["px-1.5 py-1 text-ink-gray-4 hover:text-white transition-colors duration-150",{"text-white":k.node.attrs.align==="right"}]),title:"Align Right"},[b(y(_Q),{class:"size-4"})],2)])):ie("",!0),k.selected&&l.value?(T(),P("button",{key:1,class:"cursor-nw-resize bg-black/65 rounded-md p-1",onMousedown:dt(f,["prevent"]),title:"Resize"},[b(y(vQ),{class:"text-white size-4"})],32)):ie("",!0)]),k.node.attrs.src?ie("",!0):(T(),P("div",QTe,[...S[4]||(S[4]=[u("div",{class:"text-ink-gray-5 text-center"},[u("div",{class:"text-lg mb-1"},""),u("div",{class:"text-sm"},"Loading embed...")],-1)])]))]),(l.value||k.node.attrs.title)&&k.node.attrs.src?(T(),P("input",{key:0,value:k.node.attrs.title,class:"w-full text-center bg-transparent text-sm text-ink-gray-6 h-7 border-0 mt-2 focus:outline-none focus:ring-0 placeholder-ink-gray-4 disabled:opacity-60",placeholder:"Add caption",disabled:!l.value,onInput:S[3]||(S[3]=C=>e.updateAttributes({title:C.target.value})),onKeydown:g},null,40,JTe)):ie("",!0)],38)]),_:1}))}}),t4e=Ft(e4e,[["__scopeId","data-v-ffd6a61a"]]),n4e=Er.create({name:"iframe",group:"block",selectable:!0,draggable:!0,atom:!0,addOptions(){return{allowedDomains:zTe,blockedDomains:[],HTMLAttributes:{}}},addAttributes(){return{src:{default:null,parseHTML:t=>t.getAttribute("src"),renderHTML:t=>({src:t.src})},width:{default:null,parseHTML:t=>{const e=t.getAttribute("width");return e?parseInt(e,10):null},renderHTML:t=>({width:t.width?String(t.width):null})},height:{default:null,parseHTML:t=>{const e=t.getAttribute("height");return e?parseInt(e,10):null},renderHTML:t=>({height:t.height?String(t.height):null})},aspectRatio:{default:9/16,parseHTML:()=>null,renderHTML:()=>({})},align:{default:"center",parseHTML:t=>{const e=(t.getAttribute("data-align")||t.getAttribute("align")||"left").toLowerCase();return["left","center","right"].includes(e)?e:"left"},renderHTML:t=>({"data-align":t.align||"center"})},title:{default:null,parseHTML:t=>t.getAttribute("title"),renderHTML:t=>({title:t.title})},frameborder:{default:"0",renderHTML:()=>({frameborder:"0"})},allowfullscreen:{default:"true",renderHTML:()=>({allowfullscreen:"true"})},sandbox:{default:"allow-scripts allow-same-origin allow-popups allow-forms",renderHTML:t=>({sandbox:t.sandbox})},interactive:{default:!1,parseHTML:t=>t.getAttribute("data-interactive")==="true",renderHTML:t=>({"data-interactive":t.interactive?"true":"false"})}}},parseHTML(){return[{tag:"iframe[src]",getAttrs:t=>{const e=t.getAttribute("src"),n=t.getAttribute("width"),r=t.getAttribute("height"),i=t.getAttribute("title"),a=t.getAttribute("data-align");return{src:e,width:n?parseInt(n,10):null,height:r?parseInt(r,10):null,title:i||null,align:a||"center"}}}]},renderHTML({HTMLAttributes:t}){return["iframe",In(this.options.HTMLAttributes,t,{loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"})]},addNodeView(){return gb(t4e)},addCommands(){return{setIframeAlign:t=>({commands:e})=>e.updateAttributes(this.name,{align:t}),setIframe:t=>({commands:e,editor:n})=>{if(!TQ(t.src,this.options))return!1;const r=JE(t.src),i=n.view.dom,a=(i==null?void 0:i.clientWidth)||800,s=QE(r,a),o={src:r,width:t.width||s.width,height:t.height||s.height,title:t.title,align:t.align||"center",aspectRatio:s.height/s.width,interactive:t.interactive};return e.insertContent({type:this.name,attrs:o})},insertIframeURL:t=>({commands:e})=>{const n=JE(t);return e.setIframe({src:n})},openIframeDialog:()=>({editor:t})=>{const e=new CustomEvent("iframe:open-dialog",{detail:{editor:t}});return t.view.dom.dispatchEvent(e),!0}}},addProseMirrorPlugins(){const t=this;return[new On({key:new Un("iframe-paste-handler"),props:{handlePaste:(e,n,r)=>{var s,o;const i=(s=n.clipboardData)==null?void 0:s.getData("text/plain"),a=(o=n.clipboardData)==null?void 0:o.getData("text/html");if(a){const l=AN(a);if(l)return MT(e,t,l.src,l.width,l.height,l.title)}if(i&&i.includes("<iframe")){const l=AN(i);if(l)return MT(e,t,l.src,l.width,l.height,l.title)}return i&&/^https?:\/\/(?:www\.)?(?:youtube\.com\/watch\?v=[\w-]+|youtu\.be\/[\w-]+|youtube\.com\/embed\/[\w-]+|vimeo\.com\/\d+|player\.vimeo\.com\/video\/\d+|codepen\.io\/[\w-]+\/pen\/[\w-]+|codesandbox\.io\/[\w\/.-]+|figma\.com\/[\w\/.-]+|embed\.figma\.com\/[\w\/.-]+)$/.test(i.trim())?MT(e,t,i.trim()):!1}}})]}});function AN(t){try{const r=new DOMParser().parseFromString(t,"text/html").querySelector("iframe");if(!r){const l=t.match(/<iframe[^>]*src=["']([^"']+)["'][^>]*>/i);if(l){const d=l[1],c=t.match(/width=["'](\d+)["']/i),f=t.match(/height=["'](\d+)["']/i),p=t.match(/title=["']([^"']+)["']/i);return{src:d,width:c?parseInt(c[1],10):void 0,height:f?parseInt(f[1],10):void 0,title:p?p[1]:void 0}}return null}const i=r.getAttribute("src");if(!i)return null;const a=r.getAttribute("width")?parseInt(r.getAttribute("width"),10):void 0,s=r.getAttribute("height")?parseInt(r.getAttribute("height"),10):void 0,o=r.getAttribute("title")||void 0;return{src:i,width:a,height:s,title:o}}catch(e){return null}}function MT(t,e,n,r,i,a){if(!confirm(`Do you want to embed this content?

URL: ${n}

Click "OK" to create an embed, or "Cancel" to paste as plain text.`)||!TQ(n,e.options))return!1;console.log("URL validated, creating iframe node");const o=JE(n),l=e.editor.view.dom,d=(l==null?void 0:l.clientWidth)||800,c=r||QE(o,d).width,f=i||QE(o,d).height,p={src:o,width:c,height:f,title:a,align:"center",aspectRatio:f/c},h=t.state.schema.nodes.iframe.create(p),m=t.state.tr.replaceSelectionWith(h);return t.dispatch(m),!0}const r4e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",i4e="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",eM="numeric",tM="ascii",nM="alpha",Xy="asciinumeric",dy="alphanumeric",rM="domain",EQ="emoji",a4e="scheme",s4e="slashscheme",$T="whitespace";function o4e(t,e){return t in e||(e[t]=[]),e[t]}function tp(t,e,n){e[eM]&&(e[Xy]=!0,e[dy]=!0),e[tM]&&(e[Xy]=!0,e[nM]=!0),e[Xy]&&(e[dy]=!0),e[nM]&&(e[dy]=!0),e[dy]&&(e[rM]=!0),e[EQ]&&(e[rM]=!0);for(const r in e){const i=o4e(r,n);i.indexOf(t)<0&&i.push(t)}}function l4e(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function ja(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ja.groups={};ja.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],a=e.jr[r][1];if(a&&i.test(t))return a}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||ja.groups;let i;return e&&e.j?i=e:(i=new ja(e),n&&r&&tp(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const a=t.length;if(!a)return i;for(let s=0;s<a-1;s++)i=i.tt(t[s]);return i.tt(t[a-1],e,n,r)},tt(t,e,n,r){r=r||ja.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const a=e;let s,o=i.go(t);if(o?(s=new ja,Object.assign(s.j,o.j),s.jr.push.apply(s.jr,o.jr),s.jd=o.jd,s.t=o.t):s=new ja,a){if(r)if(s.t&&typeof s.t=="string"){const l=Object.assign(l4e(s.t,r),n);tp(a,l,r)}else n&&tp(a,n,r);s.t=a}return i.j[t]=s,s}};const cn=(t,e,n,r,i)=>t.ta(e,n,r,i),Mr=(t,e,n,r,i)=>t.tr(e,n,r,i),TN=(t,e,n,r,i)=>t.ts(e,n,r,i),rt=(t,e,n,r,i)=>t.tt(e,n,r,i),pu="WORD",iM="UWORD",MQ="ASCIINUMERICAL",$Q="ALPHANUMERICAL",t1="LOCALHOST",aM="TLD",sM="UTLD",mw="SCHEME",hm="SLASH_SCHEME",uP="NUM",oM="WS",dP="NL",Zy="OPENBRACE",Qy="CLOSEBRACE",P2="OPENBRACKET",I2="CLOSEBRACKET",O2="OPENPAREN",L2="CLOSEPAREN",V2="OPENANGLEBRACKET",N2="CLOSEANGLEBRACKET",j2="FULLWIDTHLEFTPAREN",F2="FULLWIDTHRIGHTPAREN",B2="LEFTCORNERBRACKET",z2="RIGHTCORNERBRACKET",U2="LEFTWHITECORNERBRACKET",H2="RIGHTWHITECORNERBRACKET",q2="FULLWIDTHLESSTHAN",W2="FULLWIDTHGREATERTHAN",G2="AMPERSAND",Y2="APOSTROPHE",K2="ASTERISK",Ud="AT",X2="BACKSLASH",Z2="BACKTICK",Q2="CARET",Yd="COLON",cP="COMMA",J2="DOLLAR",ol="DOT",ek="EQUALS",fP="EXCLAMATION",Cs="HYPHEN",Jy="PERCENT",tk="PIPE",nk="PLUS",rk="POUND",e0="QUERY",pP="QUOTE",DQ="FULLWIDTHMIDDLEDOT",hP="SEMI",ll="SLASH",t0="TILDE",ik="UNDERSCORE",RQ="EMOJI",ak="SYM";var PQ=Object.freeze({__proto__:null,ALPHANUMERICAL:$Q,AMPERSAND:G2,APOSTROPHE:Y2,ASCIINUMERICAL:MQ,ASTERISK:K2,AT:Ud,BACKSLASH:X2,BACKTICK:Z2,CARET:Q2,CLOSEANGLEBRACKET:N2,CLOSEBRACE:Qy,CLOSEBRACKET:I2,CLOSEPAREN:L2,COLON:Yd,COMMA:cP,DOLLAR:J2,DOT:ol,EMOJI:RQ,EQUALS:ek,EXCLAMATION:fP,FULLWIDTHGREATERTHAN:W2,FULLWIDTHLEFTPAREN:j2,FULLWIDTHLESSTHAN:q2,FULLWIDTHMIDDLEDOT:DQ,FULLWIDTHRIGHTPAREN:F2,HYPHEN:Cs,LEFTCORNERBRACKET:B2,LEFTWHITECORNERBRACKET:U2,LOCALHOST:t1,NL:dP,NUM:uP,OPENANGLEBRACKET:V2,OPENBRACE:Zy,OPENBRACKET:P2,OPENPAREN:O2,PERCENT:Jy,PIPE:tk,PLUS:nk,POUND:rk,QUERY:e0,QUOTE:pP,RIGHTCORNERBRACKET:z2,RIGHTWHITECORNERBRACKET:H2,SCHEME:mw,SEMI:hP,SLASH:ll,SLASH_SCHEME:hm,SYM:ak,TILDE:t0,TLD:aM,UNDERSCORE:ik,UTLD:sM,UWORD:iM,WORD:pu,WS:oM});const iu=/[a-z]/,fv=new RegExp("\\p{L}","u"),DT=new RegExp("\\p{Emoji}","u"),au=/\d/,RT=/\s/,EN="\r",PT=`
`,u4e="",d4e="",IT="";let g_=null,v_=null;function c4e(t=[]){const e={};ja.groups=e;const n=new ja;g_==null&&(g_=MN(r4e)),v_==null&&(v_=MN(i4e)),rt(n,"'",Y2),rt(n,"{",Zy),rt(n,"}",Qy),rt(n,"[",P2),rt(n,"]",I2),rt(n,"(",O2),rt(n,")",L2),rt(n,"<",V2),rt(n,">",N2),rt(n,"",j2),rt(n,"",F2),rt(n,"",B2),rt(n,"",z2),rt(n,"",U2),rt(n,"",H2),rt(n,"",q2),rt(n,"",W2),rt(n,"&",G2),rt(n,"*",K2),rt(n,"@",Ud),rt(n,"`",Z2),rt(n,"^",Q2),rt(n,":",Yd),rt(n,",",cP),rt(n,"$",J2),rt(n,".",ol),rt(n,"=",ek),rt(n,"!",fP),rt(n,"-",Cs),rt(n,"%",Jy),rt(n,"|",tk),rt(n,"+",nk),rt(n,"#",rk),rt(n,"?",e0),rt(n,'"',pP),rt(n,"/",ll),rt(n,";",hP),rt(n,"~",t0),rt(n,"_",ik),rt(n,"\\",X2),rt(n,"",DQ);const r=Mr(n,au,uP,{[eM]:!0});Mr(r,au,r);const i=Mr(r,iu,MQ,{[Xy]:!0}),a=Mr(r,fv,$Q,{[dy]:!0}),s=Mr(n,iu,pu,{[tM]:!0});Mr(s,au,i),Mr(s,iu,s),Mr(i,au,i),Mr(i,iu,i);const o=Mr(n,fv,iM,{[nM]:!0});Mr(o,iu),Mr(o,au,a),Mr(o,fv,o),Mr(a,au,a),Mr(a,iu),Mr(a,fv,a);const l=rt(n,PT,dP,{[$T]:!0}),d=rt(n,EN,oM,{[$T]:!0}),c=Mr(n,RT,oM,{[$T]:!0});rt(n,IT,c),rt(d,PT,l),rt(d,IT,c),Mr(d,RT,c),rt(c,EN),rt(c,PT),Mr(c,RT,c),rt(c,IT,c);const f=Mr(n,DT,RQ,{[EQ]:!0});rt(f,"#"),Mr(f,DT,f),rt(f,u4e,f);const p=rt(f,d4e);rt(p,"#"),Mr(p,DT,f);const h=[[iu,s],[au,i]],m=[[iu,null],[fv,o],[au,a]];for(let g=0;g<g_.length;g++)_d(n,g_[g],aM,pu,h);for(let g=0;g<v_.length;g++)_d(n,v_[g],sM,iM,m);tp(aM,{tld:!0,ascii:!0},e),tp(sM,{utld:!0,alpha:!0},e),_d(n,"file",mw,pu,h),_d(n,"mailto",mw,pu,h),_d(n,"http",hm,pu,h),_d(n,"https",hm,pu,h),_d(n,"ftp",hm,pu,h),_d(n,"ftps",hm,pu,h),tp(mw,{scheme:!0,ascii:!0},e),tp(hm,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],x=t[g][1]?{[a4e]:!0}:{[s4e]:!0};v.indexOf("-")>=0?x[rM]=!0:iu.test(v)?au.test(v)?x[Xy]=!0:x[tM]=!0:x[eM]=!0,TN(n,v,v,x)}return TN(n,"localhost",t1,{ascii:!0}),n.jd=new ja(ak),{start:n,tokens:Object.assign({groups:e},PQ)}}function IQ(t,e){const n=f4e(e.replace(/[A-Z]/g,o=>o.toLowerCase())),r=n.length,i=[];let a=0,s=0;for(;s<r;){let o=t,l=null,d=0,c=null,f=-1,p=-1;for(;s<r&&(l=o.go(n[s]));)o=l,o.accepts()?(f=0,p=0,c=o):f>=0&&(f+=n[s].length,p++),d+=n[s].length,a+=n[s].length,s++;a-=f,s-=p,d-=f,i.push({t:c.t,v:e.slice(a-d,a),s:a-d,e:a})}return i}function f4e(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),a,s=i<55296||i>56319||r+1===n||(a=t.charCodeAt(r+1))<56320||a>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function _d(t,e,n,r,i){let a;const s=e.length;for(let o=0;o<s-1;o++){const l=e[o];t.j[l]?a=t.j[l]:(a=new ja(r),a.jr=i.slice(),t.j[l]=a),t=a}return a=new ja(n),a.jr=i.slice(),t.j[e[s-1]]=a,a}function MN(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let a=0;for(;i.indexOf(t[r+a])>=0;)a++;if(a>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+a),10);s>0;s--)n.pop();r+=a}else n.push(t[r]),r++}return e}const n1={defaultProtocol:"http",events:null,format:$N,formatHref:$N,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function mP(t,e=null){let n=Object.assign({},n1);t&&(n=Object.assign(n,t instanceof mP?t.o:t));const r=n.ignoreTags,i=[];for(let a=0;a<r.length;a++)i.push(r[a].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}mP.prototype={o:n1,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:n1[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function $N(t){return t}function OQ(t,e){this.t="token",this.v=t,this.tk=e}OQ.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=n1.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),a=this.toFormattedString(t),s={},o=t.get("className",n,e),l=t.get("target",n,e),d=t.get("rel",n,e),c=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return s.href=r,o&&(s.class=o),l&&(s.target=l),d&&(s.rel=d),c&&Object.assign(s,c),{tagName:i,attributes:s,content:a,eventListeners:f}}};function SC(t,e){class n extends OQ{constructor(i,a){super(i,a),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const DN=SC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),RN=SC("text"),p4e=SC("nl"),y_=SC("url",{isLink:!0,toHref(t=n1.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==t1&&t[1].t===Yd}}),ys=t=>new ja(t);function h4e({groups:t}){const e=t.domain.concat([G2,K2,Ud,X2,Z2,Q2,J2,ek,Cs,uP,Jy,tk,nk,rk,ll,ak,t0,ik]),n=[Y2,Yd,cP,ol,fP,Jy,e0,pP,hP,V2,N2,Zy,Qy,I2,P2,O2,L2,j2,F2,B2,z2,U2,H2,q2,W2],r=[G2,Y2,K2,X2,Z2,Q2,J2,ek,Cs,Zy,Qy,Jy,tk,nk,rk,e0,ll,ak,t0,ik],i=ys(),a=rt(i,t0);cn(a,r,a),cn(a,t.domain,a);const s=ys(),o=ys(),l=ys();cn(i,t.domain,s),cn(i,t.scheme,o),cn(i,t.slashscheme,l),cn(s,r,a),cn(s,t.domain,s);const d=rt(s,Ud);rt(a,Ud,d),rt(o,Ud,d),rt(l,Ud,d);const c=rt(a,ol);cn(c,r,a),cn(c,t.domain,a);const f=ys();cn(d,t.domain,f),cn(f,t.domain,f);const p=rt(f,ol);cn(p,t.domain,f);const h=ys(DN);cn(p,t.tld,h),cn(p,t.utld,h),rt(d,t1,h);const m=rt(f,Cs);rt(m,Cs,m),cn(m,t.domain,f),cn(h,t.domain,f),rt(h,ol,p),rt(h,Cs,m);const g=rt(h,Yd);cn(g,t.numeric,DN);const v=rt(s,Cs),_=rt(s,ol);rt(v,Cs,v),cn(v,t.domain,s),cn(_,r,a),cn(_,t.domain,s);const x=ys(y_);cn(_,t.tld,x),cn(_,t.utld,x),cn(x,t.domain,s),cn(x,r,a),rt(x,ol,_),rt(x,Cs,v),rt(x,Ud,d);const w=rt(x,Yd),k=ys(y_);cn(w,t.numeric,k);const S=ys(y_),C=ys();cn(S,e,S),cn(S,n,C),cn(C,e,S),cn(C,n,C),rt(x,ll,S),rt(k,ll,S);const A=rt(o,Yd),M=rt(l,Yd),$=rt(M,ll),R=rt($,ll);cn(o,t.domain,s),rt(o,ol,_),rt(o,Cs,v),cn(l,t.domain,s),rt(l,ol,_),rt(l,Cs,v),cn(A,t.domain,S),rt(A,ll,S),rt(A,e0,S),cn(R,t.domain,S),cn(R,e,S),rt(R,ll,S);const I=[[Zy,Qy],[P2,I2],[O2,L2],[V2,N2],[j2,F2],[B2,z2],[U2,H2],[q2,W2]];for(let B=0;B<I.length;B++){const[j,z]=I[B],F=rt(S,j);rt(C,j,F),rt(F,z,S);const q=ys(y_);cn(F,e,q);const N=ys();cn(F,n),cn(q,e,q),cn(q,n,N),cn(N,e,q),cn(N,n,N),rt(q,z,S),rt(N,z,S)}return rt(i,t1,x),rt(i,dP,p4e),{start:i,tokens:PQ}}function m4e(t,e,n){let r=n.length,i=0,a=[],s=[];for(;i<r;){let o=t,l=null,d=null,c=0,f=null,p=-1;for(;i<r&&!(l=o.go(n[i].t));)s.push(n[i++]);for(;i<r&&(d=l||o.go(n[i].t));)l=null,o=d,o.accepts()?(p=0,f=o):p>=0&&p++,i++,c++;if(p<0)i-=c,i<r&&(s.push(n[i]),i++);else{s.length>0&&(a.push(OT(RN,e,s)),s=[]),i-=p,c-=p;const h=f.t,m=n.slice(i-c,i);a.push(OT(h,e,m))}}return s.length>0&&a.push(OT(RN,e,s)),a}function OT(t,e,n){const r=n[0].s,i=n[n.length-1].e,a=e.slice(r,i);return new t(a,n)}const g4e=typeof console!="undefined"&&console&&console.warn||(()=>{}),v4e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",gr={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function y4e(){return ja.groups={},gr.scanner=null,gr.parser=null,gr.tokenQueue=[],gr.pluginQueue=[],gr.customSchemes=[],gr.initialized=!1,gr}function PN(t,e=!1){if(gr.initialized&&g4e(`linkifyjs: already initialized - will not register custom scheme "${t}" ${v4e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);gr.customSchemes.push([t,e])}function b4e(){gr.scanner=c4e(gr.customSchemes);for(let t=0;t<gr.tokenQueue.length;t++)gr.tokenQueue[t][1]({scanner:gr.scanner});gr.parser=h4e(gr.scanner.tokens);for(let t=0;t<gr.pluginQueue.length;t++)gr.pluginQueue[t][1]({scanner:gr.scanner,parser:gr.parser});return gr.initialized=!0,gr}function gP(t){return gr.initialized||b4e(),m4e(gr.parser.start,t,IQ(gr.scanner.start,t))}gP.scan=IQ;function LQ(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new mP(n),i=gP(t),a=[];for(let s=0;s<i.length;s++){const o=i[s];o.isLink&&(!e||o.t===e)&&r.check(o)&&a.push(o.toFormattedObject(r))}return a}const vP="[\0- -\u2029]",_4e=new RegExp(vP),x4e=new RegExp(`${vP}$`),w4e=new RegExp(vP,"g");function k4e(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function S4e(t){return new On({key:new Un("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(d=>d.docChanged)&&!n.doc.eq(r.doc),a=e.some(d=>d.getMeta("preventAutolink"));if(!i||a)return;const{tr:s}=r,o=l2e(n.doc,[...e]);if(h2e(o).forEach(({newRange:d})=>{const c=d2e(r.doc,d,h=>h.isTextblock);let f,p;if(c.length>1)f=c[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(c.length){const h=r.doc.textBetween(d.from,d.to," "," ");if(!x4e.test(h))return;f=c[0],p=r.doc.textBetween(f.pos,d.to,void 0," ")}if(f&&p){const h=p.split(_4e).filter(Boolean);if(h.length<=0)return!1;const m=h[h.length-1],g=f.pos+p.lastIndexOf(m);if(!m)return!1;const v=gP(m).map(_=>_.toObject(t.defaultProtocol));if(!k4e(v))return!1;v.filter(_=>_.isLink).map(_=>je(me({},_),{from:g+_.start+1,to:g+_.end+1})).filter(_=>r.schema.marks.code?!r.doc.rangeHasMark(_.from,_.to,r.schema.marks.code):!0).filter(_=>t.validate(_.value)).filter(_=>t.shouldAutoLink(_.value)).forEach(_=>{ZR(_.from,_.to,r.doc).some(x=>x.mark.type===t.type)||s.addMark(_.from,_.to,t.type.create({href:_.href}))})}}),!!s.steps.length)return s}})}function C4e(t){return new On({key:new Un("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,a;if(r.button!==0||!e.editable)return!1;let s=r.target;const o=[];for(;s.nodeName!=="DIV";)o.push(s),s=s.parentNode;if(!o.find(p=>p.nodeName==="A"))return!1;const l=MZ(e.state,t.type.name),d=r.target,c=(i=d==null?void 0:d.href)!==null&&i!==void 0?i:l.href,f=(a=d==null?void 0:d.target)!==null&&a!==void 0?a:l.target;return d&&c?(window.open(c,f),!0):!1}}})}function A4e(t){return new On({key:new Un("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:a}=i,{empty:s}=a;if(s)return!1;let o="";r.content.forEach(d=>{o+=d.textContent});const l=LQ(o,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===o);return!o||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}function nf(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(w4e,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const T4e=Oo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){PN(t);return}PN(t.scheme,t.optionalSlashes)})},onDestroy(){y4e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!nf(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!nf(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!nf(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",In(this.options.HTMLAttributes,t),0]:["a",In(this.options.HTMLAttributes,je(me({},t),{href:""})),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!nf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!nf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Up({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=LQ(t).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:s=>!!nf(s,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(a=>e.push({text:a.value,data:{href:a.href},index:a.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(S4e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!nf(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(C4e({type:this.type})),this.options.linkOnPaste&&t.push(A4e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),E4e={class:"lucide lucide-copy",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function M4e(t,e){return T(),P("svg",E4e,[...e[0]||(e[0]=[u("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"},null,-1),u("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"},null,-1)])])}const $4e=Vt({name:"lucide-copy",render:M4e}),D4e={class:"lucide lucide-pencil",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function R4e(t,e){return T(),P("svg",D4e,[...e[0]||(e[0]=[u("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},null,-1),u("path",{d:"m15 5 4 4"},null,-1)])])}const P4e=Vt({name:"lucide-pencil",render:R4e}),I4e={class:"lucide lucide-link-2-off",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function O4e(t,e){return T(),P("svg",I4e,[...e[0]||(e[0]=[u("path",{d:"M9 17H7A5 5 0 0 1 7 7"},null,-1),u("path",{d:"M15 7h2a5 5 0 0 1 4 8"},null,-1),u("line",{x1:"8",x2:"12",y1:"12",y2:"12"},null,-1),u("line",{x1:"2",x2:"22",y1:"2",y2:"22"},null,-1)])])}const L4e=Vt({name:"lucide-link-2-off",render:O4e});function VQ(t){return!!(t===""||/^(https?:\/\/|mailto:|tel:|\/\/)[^\s]+$/i.test(t)||/^([./#][^\s]*)$/i.test(t)||/^[\w\-]([\w\-./#?=&%]*)$/i.test(t))}const V4e={class:"p-2 w-72 flex items-center gap-2 bg-surface-white shadow-xl rounded"},N4e=["title","href"],j4e={class:"shrink-0 flex items-center gap-1.5 ml-auto"},F4e=Ze({__name:"LinkPopup",props:{href:{}},emits:["updateHref","close"],setup(t,{emit:e}){const n=t,r=e,i=Q(n.href),a=Oy("input"),s=Q(n.href===""),o=()=>{(i.value===""||VQ(i.value))&&r("updateHref",i.value)},l=()=>le(this,null,function*(){i.value&&(yield navigator.clipboard.writeText(i.value))});return bt(()=>le(this,null,function*(){var d;yield ir(),(d=a.value)!=null&&d.el&&(a.value.el.focus(),a.value.el.select())})),(d,c)=>(T(),P("div",V4e,[s.value?(T(),he(kR,{key:0,ref_key:"input",ref:a,type:"text",class:"w-full",placeholder:"https://example.com",modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=f=>i.value=f),onKeydown:[Eu(o,["enter"]),c[1]||(c[1]=Eu(f=>d.$emit("close"),["esc"]))]},null,8,["modelValue"])):(T(),P("a",{key:1,class:"text-ink-gray-700 underline text-sm flex-1 truncate pl-1",title:i.value,href:i.value,target:"_blank"},E(i.value),9,N4e)),u("div",j4e,[s.value?(T(),P(_e,{key:0},[b(Z,{onClick:o,tooltip:"Submit",icon:y(Bye),variant:"subtle"},null,8,["icon"]),b(Z,{onClick:c[2]||(c[2]=f=>n.href?s.value=!1:d.$emit("updateHref","")),tooltip:"Exit",icon:y(Eg),variant:"subtle"},null,8,["icon"])],64)):(T(),P(_e,{key:1},[b(Z,{onClick:l,tooltip:"Copy",icon:y($4e),variant:"subtle"},null,8,["icon"]),b(Z,{onClick:c[3]||(c[3]=f=>s.value=!0),tooltip:"Edit",icon:y(P4e),variant:"subtle"},null,8,["icon"]),b(Z,{tooltip:"Remove",variant:"subtle",onClick:c[4]||(c[4]=f=>d.$emit("updateHref","")),icon:y(L4e)},null,8,["icon"])],64))])]))}});function B4e(t){return new On({key:new Un("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:a}=i,{empty:s}=a;if(s)return!1;let o="";if(r.content.forEach(d=>{o+=d.textContent}),!o)return!1;let l=VQ(o)?o:null;return l?t.editor.chain().setTextSelection({from:a.from,to:a.to}).setLink({href:l}).setTextSelection(a.to).command(({tr:d})=>(d.setStoredMarks([]),!0)).run():!1}}})}const z4e=T4e.extend({addOptions(){var t;return je(me({},(t=this.parent)==null?void 0:t.call(this)),{openOnClick:!1,autolink:!0,defaultProtocol:"https",linkOnPaste:!1})},addCommands(){var t;return je(me({},(t=this.parent)==null?void 0:t.call(this)),{openLinkEditor:()=>({editor:e})=>{const{state:n}=e,{from:r,to:i}=n.selection,{doc:a}=n;let s,o,l=!1;if(r===i){const h=n.selection.$from,m=gC(h,this.type);if(m){s=m;const g=a.nodeAt(h.pos);g&&(o=g.marks.find(v=>v.type===this.type)),e.chain().setTextSelection({from:m.from,to:m.to}).run(),l=!0}else return!1}else s={from:r,to:i},o=a.resolve(r).marks().find(h=>h.type===this.type);if(!s)return!1;const d=(o==null?void 0:o.attrs.href)||"",c=s.from,f=s.to,p=()=>{U4e(d,e.view.dom).then(h=>{if(h===null)return;let m=e.chain().focus(null,{scrollIntoView:!1});if(h===""){m.setTextSelection({from:c,to:f}).unsetLink().command(({tr:g})=>(g.setStoredMarks([]),!0)).run();return}m=m.setTextSelection({from:c,to:f}).setLink({href:h}).setTextSelection(f).command(({tr:g})=>(g.setStoredMarks([]),!0)),m.run()}).catch(()=>{})};return l?requestAnimationFrame(p):p(),!0}})},addKeyboardShortcuts(){return{"Mod-k":()=>this.editor.commands.openLinkEditor()}},addProseMirrorPlugins(){var e;let t=((e=this.parent)==null?void 0:e.call(this))||[];return t.push(B4e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t.push(H4e({editor:this.editor,type:this.type})),t.push(new On({props:{handleClick:(n,r,i)=>{var a;if(this.editor.isEditable){if(!this.editor.isActive("link"))return!1;if(i.preventDefault(),i.metaKey){const s=(a=i.target)==null?void 0:a.getAttribute("href");s&&window.open(s,"_blank")}else this.editor.commands.openLinkEditor()}}}})),t}});function U4e(t,e){return new Promise((n,r)=>{const i=document.createElement("div");document.body.appendChild(i);let a;const s=window.getSelection();if(s&&s.rangeCount>0){const h=s.getRangeAt(0),m=h.getBoundingClientRect(),g=h.collapsed;a={getBoundingClientRect:()=>({width:0,height:m.height,top:m.top,right:g?m.left:m.right,bottom:m.bottom,left:m.left,x:m.left,y:m.top,toJSON:()=>{}})}}else a={getBoundingClientRect:()=>e.getBoundingClientRect()};let o=null,l=null,d=!1,c=!1;const f=(h,m)=>{c||(c=!0,h==="resolve"?n(m):r(m))},p=()=>{d||(d=!0,f("reject","Link editing cancelled or destroyed"),requestAnimationFrame(()=>{l==null||l.destroy(),o==null||o.unmount(),i==null||i.remove(),o=null,l=null}))};if(o=FD({render(){return dr(F4e,{href:t,onClose:()=>{f("reject","Link editing cancelled"),p()},onUpdateHref:h=>{f("resolve",h),p()}})}}),o.mount(i),l=Wc(e,{getReferenceClientRect:()=>a.getBoundingClientRect(),content:i,trigger:"manual",interactive:!0,appendTo:document.body,placement:"top",arrow:!1,theme:"link-editor",maxWidth:"none",onHidden(){p()},hideOnClick:!0,interactiveDebounce:75}),!l){i.remove(),f("reject","Failed to initialize link editor tooltip");return}l.show()})}function H4e(t){return new On({key:new Un("clearLinkMarkOnBoundary"),appendTransaction:(e,n,r)=>{if(!t.editor.isEditable)return null;const{tr:i,doc:a,selection:s,storedMarks:o}=r,{$from:l,empty:d}=s;if(!d||!o||o.length===0)return null;const c=t.type;return!o.some(m=>m.type===c)||l.marks().some(m=>m.type===c)?null:i.setStoredMarks([])}})}const q4e=t=>Lr({find:/--$/,replace:t!=null?t:""}),W4e=t=>Lr({find:/\.\.\.$/,replace:t!=null?t:""}),G4e=t=>Lr({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:t!=null?t:""}),Y4e=t=>Lr({find:/"$/,replace:t!=null?t:""}),K4e=t=>Lr({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:t!=null?t:""}),X4e=t=>Lr({find:/'$/,replace:t!=null?t:""}),Z4e=t=>Lr({find:/<-$/,replace:t!=null?t:""}),Q4e=t=>Lr({find:/->$/,replace:t!=null?t:""}),J4e=t=>Lr({find:/\(c\)$/,replace:t!=null?t:""}),e3e=t=>Lr({find:/\(tm\)$/,replace:t!=null?t:""}),t3e=t=>Lr({find:/\(sm\)$/,replace:t!=null?t:""}),n3e=t=>Lr({find:/\(r\)$/,replace:t!=null?t:""}),r3e=t=>Lr({find:/(?:^|\s)(1\/2)\s$/,replace:t!=null?t:""}),i3e=t=>Lr({find:/\+\/-$/,replace:t!=null?t:""}),a3e=t=>Lr({find:/!=$/,replace:t!=null?t:""}),s3e=t=>Lr({find:/<<$/,replace:t!=null?t:""}),o3e=t=>Lr({find:/>>$/,replace:t!=null?t:""}),l3e=t=>Lr({find:/\d+\s?([*x])\s?\d+$/,replace:t!=null?t:""}),u3e=t=>Lr({find:/\^2$/,replace:t!=null?t:""}),d3e=t=>Lr({find:/\^3$/,replace:t!=null?t:""}),c3e=t=>Lr({find:/(?:^|\s)(1\/4)\s$/,replace:t!=null?t:""}),f3e=t=>Lr({find:/(?:^|\s)(3\/4)\s$/,replace:t!=null?t:""}),p3e=br.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const t=[];return this.options.emDash!==!1&&t.push(q4e(this.options.emDash)),this.options.ellipsis!==!1&&t.push(W4e(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&t.push(G4e(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&t.push(Y4e(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&t.push(K4e(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&t.push(X4e(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&t.push(Z4e(this.options.leftArrow)),this.options.rightArrow!==!1&&t.push(Q4e(this.options.rightArrow)),this.options.copyright!==!1&&t.push(J4e(this.options.copyright)),this.options.trademark!==!1&&t.push(e3e(this.options.trademark)),this.options.servicemark!==!1&&t.push(t3e(this.options.servicemark)),this.options.registeredTrademark!==!1&&t.push(n3e(this.options.registeredTrademark)),this.options.oneHalf!==!1&&t.push(r3e(this.options.oneHalf)),this.options.plusMinus!==!1&&t.push(i3e(this.options.plusMinus)),this.options.notEqual!==!1&&t.push(a3e(this.options.notEqual)),this.options.laquo!==!1&&t.push(s3e(this.options.laquo)),this.options.raquo!==!1&&t.push(o3e(this.options.raquo)),this.options.multiplication!==!1&&t.push(l3e(this.options.multiplication)),this.options.superscriptTwo!==!1&&t.push(u3e(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&t.push(d3e(this.options.superscriptThree)),this.options.oneQuarter!==!1&&t.push(c3e(this.options.oneQuarter)),this.options.threeQuarters!==!1&&t.push(f3e(this.options.threeQuarters)),t}}),h3e=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,i;const a=n.getAttribute("style"),s=(i=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");n.setAttribute("style",`${s};${a}`)})},m3e=Oo.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&h3e(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",In(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(a=>!!a))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),g3e=/^\s*(\[([( |x])?\])\s$/,v3e=Er.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",In(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?je(me({},t),{Tab:()=>this.editor.commands.sinkListItem(this.name)}):t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),a=document.createElement("label"),s=document.createElement("span"),o=document.createElement("input"),l=document.createElement("div"),d=()=>{var c,f;o.ariaLabel=((f=(c=this.options.a11y)===null||c===void 0?void 0:c.checkboxLabel)===null||f===void 0?void 0:f.call(c,t,o.checked))||`Task item checkbox for ${t.textContent||"empty task item"}`};return d(),a.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",c=>c.preventDefault()),o.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:f}=c.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const h=n();if(typeof h!="number")return!1;const m=p.doc.nodeAt(h);return p.setNodeMarkup(h,void 0,je(me({},m==null?void 0:m.attrs),{checked:f})),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,f])=>{i.setAttribute(c,f)}),i.dataset.checked=t.attrs.checked,o.checked=t.attrs.checked,a.append(o,s),i.append(a,l),Object.entries(e).forEach(([c,f])=>{i.setAttribute(c,f)}),{dom:i,contentDOM:l,update:c=>c.type!==this.type?!1:(i.dataset.checked=c.attrs.checked,o.checked=c.attrs.checked,d(),!0)}}},addInputRules(){return[sg({find:g3e,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),y3e=Er.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",In(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),NQ={black:"#000000",red:"#dc2626",blue:"#1579D0",green:"#16a34a",yellow:"#ca8a04",orange:"#ea580c",purple:"#9333ea",pink:"#db2777",gray:"#6b7280",indigo:"#4f46e5",teal:"#0d9488",cyan:"#06b6d4"},jQ={red:"#fecaca",blue:"#bfdbfe",green:"#bbf7d0",yellow:"#fef08a",orange:"#fed7aa",purple:"#e9d5ff",pink:"#fbcfe8",gray:"#e5e7eb",indigo:"#c7d2fe",teal:"#99f6e4",cyan:"#a5f3fc"},FQ={"#1F272E":"gray","#ca8a04":"yellow","#ea580c":"orange","#dc2626":"red","#16a34a":"green","#1579D0":"blue","#9333ea":"purple","#db2777":"pink"},BQ={"#fef9c3":"yellow","#ffedd5":"orange","#fee2e2":"red","#dcfce7":"green","#D3E9FC":"blue","#f3e8ff":"purple","#fce7f3":"pink"};function lM(t,e,n,r){if(r&&t.startsWith("#")&&r[t])return r[t];let i=0,a=0,s=0;if(t.startsWith("#")){const d=t.substring(1);d.length===6&&(i=parseInt(d.substring(0,2),16),a=parseInt(d.substring(2,4),16),s=parseInt(d.substring(4,6),16))}else if(t.startsWith("rgb")){const d=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i.exec(t);d&&(i=parseInt(d[1],10),a=parseInt(d[2],10),s=parseInt(d[3],10))}if(isNaN(i)||isNaN(a)||isNaN(s))return null;let o=null,l=1/0;for(const d of e){const c=n[d];if(!c)continue;const f=c.startsWith("#")?c.substring(1):c;if(f.length!==6)continue;const p=parseInt(f.substring(0,2),16),h=parseInt(f.substring(2,4),16),m=parseInt(f.substring(4,6),16),g=Math.sqrt(Math.pow(i-p,2)+Math.pow(a-h,2)+Math.pow(s-m,2));g<l&&(l=g,o=d)}return o}function zQ(t,e,n=NQ,r=FQ,i="color"){const a=Object.keys(n),s=new RegExp(`${i}:\\s*(#[0-9a-f]{6})`,"i").exec(t);if(s&&s[1]){const l=lM(s[1],a,n,r);if(l&&e.includes(l))return l==="gray"?null:l}const o=new RegExp(`${i}:\\s*(rgb\\(\\s*\\d+\\s*,\\s*\\d+\\s*,\\s*\\d+\\s*\\))`,"i").exec(t);if(o&&o[1]){const l=lM(o[1],a,n,r);if(l&&e.includes(l))return l==="gray"?null:l}return null}function b3e(t,e){return zQ(t,e,NQ,FQ,"color")}function _3e(t,e){return zQ(t,e,jQ,BQ,"background-color")}const x3e=br.create({name:"namedColor",addOptions(){return{types:["textStyle"],colors:["red","blue","green","yellow","orange","purple","pink","gray","teal","cyan"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{const e=t.getAttribute("style");if(e){const n=e.match(/color:\s*var\(--prose-color-(\w+)\)/);if(n&&this.options.colors.includes(n[1]))return n[1];const r=b3e(e,this.options.colors);if(r)return r}return null},renderHTML:t=>!t.color||!this.options.colors.includes(t.color)?{}:{style:`color: var(--prose-color-${t.color})`}}}}]},addCommands(){return{setColorByName:t=>({chain:e,state:n,editor:r})=>{if(!this.options.colors.includes(t))return console.warn(`Color "${t}" is not in the allowed colors list`),!1;const{to:i,empty:a}=n.selection;let s=e().setMark("textStyle",{color:t});return a||(s=s.setTextSelection(i).command(({tr:o})=>(o.setStoredMarks([]),!0))),s.focus().run()},unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),w3e=Oo.create({name:"namedHighlight",addOptions(){return{HTMLAttributes:{},multicolor:!0,colors:["yellow","blue","green","red","orange","purple","pink","gray","teal","cyan"]}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>{const e=t.getAttribute("style");if(e){const r=e.match(/background-color:\s*var\(--prose-highlight-(\w+)\)/);if(r&&this.options.colors.includes(r[1]))return r[1]}const n=t.getAttribute("data-color");if(n){const r=lM(n,this.options.colors,jQ,BQ);if(r)return r}if(e){const r=_3e(e,this.options.colors);if(r)return r}return null},renderHTML:t=>!t.color||!this.options.colors.includes(t.color)?{}:{style:`background-color: var(--prose-highlight-${t.color})`}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",In(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlightByName:t=>({chain:e,commands:n,editor:r,state:i})=>{if(!this.options.colors.includes(t))return console.warn(`Highlight color "${t}" is not in the allowed colors list`),!1;const{from:a,to:s,empty:o}=i.selection;let l=e();return this.options.multicolor?l=l.setMark(this.name,{color:t}):l=l.setMark(this.name),o||(l=l.setTextSelection(s).command(({tr:d})=>(d.setStoredMarks([]),!0))),l.focus().run()},toggleHighlightByName:t=>({chain:e,commands:n,editor:r,state:i})=>{if(!this.options.colors.includes(t))return console.warn(`Highlight color "${t}" is not in the allowed colors list`),!1;const{to:a,empty:s}=i.selection,o=this.options.multicolor?{color:t}:void 0,l=r.isActive(this.name,o);let d=e().toggleMark(this.name,o);return!s&&!l&&(d=d.setTextSelection(a).command(({tr:c})=>(c.setStoredMarks([]),!0))),d.focus().run()},unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}}});function k3e(t){const e=t.view.state.selection,{$from:n}=e;if(n.parentOffset>0||!e.empty)return!1;let r=t.view.state.doc.resolve(n.pos-1).nodeBefore;if(r||(r=t.state.doc.resolve(n.before()-1).nodeBefore),console.log(r),r&&["bulletList","orderedList","listItem"].includes(r.type.name))return t.chain().command(({tr:i})=>{const a=n.parent.content,s=r.type.name==="listItem";console.log(s),i.delete(n.before()-(s?1:0),n.after());const o=n.pos-4;i.insert(o,a),i.setSelection(Wt.near(i.doc.resolve(o)))}).run(),!0;if(t.can().liftListItem("listItem"))return t.commands.liftListItem("listItem")}function S3e(t){var e;const{char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:a,startOfLine:s,$position:o}=t,l=r&&!i,d=K2e(n),c=new RegExp(`\\s${d}$`),f=s?"^":"",p=i?"":d,h=l?new RegExp(`${f}${d}.*?(?=\\s${p}|$)`,"gm"):new RegExp(`${f}(?:^)?${d}[^\\s${p}]*`,"gm"),m=((e=o.nodeBefore)===null||e===void 0?void 0:e.isText)&&o.nodeBefore.text;if(!m)return null;const g=o.pos-m.length,v=Array.from(m.matchAll(h)).pop();if(!v||v.input===void 0||v.index===void 0)return null;const _=v.input.slice(Math.max(0,v.index-1),v.index),x=new RegExp(`^[${a==null?void 0:a.join("")}\0]?$`).test(_);if(a!==null&&!x)return null;const w=g+v.index;let k=w+v[0].length;return l&&c.test(m.slice(k-1,k+1))&&(v[0]+=" ",k+=1),w<o.pos&&k>=o.pos?{range:{from:w,to:k},query:v[0].slice(n.length),text:v[0]}:null}const C3e=new Un("suggestion");function A3e({pluginKey:t=C3e,editor:e,char:n="@",allowSpaces:r=!1,allowToIncludeChar:i=!1,allowedPrefixes:a=[" "],startOfLine:s=!1,decorationTag:o="span",decorationClass:l="suggestion",decorationContent:d="",decorationEmptyClass:c="is-empty",command:f=()=>null,items:p=()=>[],render:h=()=>({}),allow:m=()=>!0,findSuggestionMatch:g=S3e}){let v;const _=h==null?void 0:h(),x=new On({key:t,view(){return{update:(w,k)=>le(this,null,function*(){var S,C,A,M,$,R,I;const B=(S=this.key)===null||S===void 0?void 0:S.getState(k),j=(C=this.key)===null||C===void 0?void 0:C.getState(w.state),z=B.active&&j.active&&B.range.from!==j.range.from,F=!B.active&&j.active,q=B.active&&!j.active,N=!F&&!q&&B.query!==j.query,O=F||z&&N,V=N||z,L=q||z&&N;if(!O&&!V&&!L)return;const U=L&&!O?B:j,G=w.dom.querySelector(`[data-decoration-id="${U.decorationId}"]`);v={editor:e,range:U.range,query:U.query,text:U.text,items:[],command:X=>f({editor:e,range:U.range,props:X}),decorationNode:G,clientRect:G?()=>{var X;const{decorationId:re}=(X=this.key)===null||X===void 0?void 0:X.getState(e.state),ee=w.dom.querySelector(`[data-decoration-id="${re}"]`);return(ee==null?void 0:ee.getBoundingClientRect())||null}:null},O&&((A=_==null?void 0:_.onBeforeStart)===null||A===void 0||A.call(_,v)),V&&((M=_==null?void 0:_.onBeforeUpdate)===null||M===void 0||M.call(_,v)),(V||O)&&(v.items=yield p({editor:e,query:U.query})),L&&(($=_==null?void 0:_.onExit)===null||$===void 0||$.call(_,v)),V&&((R=_==null?void 0:_.onUpdate)===null||R===void 0||R.call(_,v)),O&&((I=_==null?void 0:_.onStart)===null||I===void 0||I.call(_,v))}),destroy:()=>{var w;v&&((w=_==null?void 0:_.onExit)===null||w===void 0||w.call(_,v))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(w,k,S,C){const{isEditable:A}=e,{composing:M}=e.view,{selection:$}=w,{empty:R,from:I}=$,B=me({},k);if(B.composing=M,A&&(R||e.view.composing)){(I<k.range.from||I>k.range.to)&&!M&&!k.composing&&(B.active=!1);const j=g({char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:a,startOfLine:s,$position:$.$from}),z=`id_${Math.floor(Math.random()*4294967295)}`;j&&m({editor:e,state:C,range:j.range,isActive:k.active})?(B.active=!0,B.decorationId=k.decorationId?k.decorationId:z,B.range=j.range,B.query=j.query,B.text=j.text):B.active=!1}else B.active=!1;return B.active||(B.decorationId=null,B.range={from:0,to:0},B.query=null,B.text=null),B}},props:{handleKeyDown(w,k){var S;const{active:C,range:A}=x.getState(w.state);return C&&((S=_==null?void 0:_.onKeyDown)===null||S===void 0?void 0:S.call(_,{view:w,event:k,range:A}))||!1},decorations(w){const{active:k,range:S,decorationId:C,query:A}=x.getState(w);if(!k)return null;const M=!(A!=null&&A.length),$=[l];return M&&$.push(c),yr.create(w.doc,[mi.inline(S.from,S.to,{nodeName:o,class:$.join(" "),"data-decoration-id":C,"data-decoration-content":d})])}}});return x}function CC(t){return br.create({name:t.name,addOptions(){const e=t.addOptions?t.addOptions.call(this):{};return je(me({},e),{suggestion:{char:t.char,pluginKey:t.pluginKey,items:t.items,command:t.command,allowSpaces:t.allowSpaces,startOfLine:t.startOfLine,decorationTag:t.decorationTag||"span",decorationClass:t.decorationClass||"suggestion",render:()=>{let n,r;return{onStart:i=>{if(n=new JZ(t.component,{editor:i.editor,props:i}),!i.clientRect||!n.element)return;const a={getReferenceClientRect:i.clientRect,appendTo:()=>document.body,content:n.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"};r=Wc("body",me(me({},a),t.tippyOptions))},onUpdate(i){n==null||n.updateProps(i),i.clientRect&&r&&r[0]&&r[0].setProps({getReferenceClientRect:i.clientRect})},onKeyDown(i){return i.event.key==="Escape"?(r&&r[0]&&r[0].hide(),!0):n&&n.ref&&typeof n.ref.onKeyDown=="function"?n.ref.onKeyDown(i):!1},onExit(){r&&r[0]&&r[0].destroy(),n&&n.destroy(),r=null,n=null}}}}})},addProseMirrorPlugins(){return[A3e(me({editor:this.editor},this.options.suggestion))]}})}const T3e=["onClick","onMouseover"],E3e={key:0,class:"px-3 py-1.5 text-sm text-ink-gray-5"},AC=Ze({__name:"SuggestionList",props:{items:{type:Array,required:!0},command:{type:Function,required:!0},containerClass:{type:String,default:""},itemClass:{type:String,default:""},showNoResults:{type:Boolean,default:!1}},setup(t,{expose:e}){const n=t,r=Q(0),i=Q(null),a=Q([]);cG(()=>{a.value=[]});const s=()=>{ir(()=>{const p=a.value[r.value];p&&p.scrollIntoView({block:"nearest"})})},o=p=>{const h=n.items[p];h&&n.command(h)},l=({event:p})=>n.items.length?p.key==="ArrowUp"?(d(),!0):p.key==="ArrowDown"?(c(),!0):p.key==="Enter"?(f(),!0):!1:!1,d=()=>{r.value=(r.value+n.items.length-1)%n.items.length,s()},c=()=>{r.value=(r.value+1)%n.items.length,s()},f=()=>{o(r.value)};return Je(()=>n.items,()=>{r.value=0}),e({onKeyDown:l}),(p,h)=>t.items.length?(T(),P("div",{key:0,ref_key:"container",ref:i,class:fe(["relative max-h-[300px] min-w-40 overflow-y-auto rounded-lg bg-surface-white p-1 text-base shadow-lg",t.containerClass])},[(T(!0),P(_e,null,we(t.items,(m,g)=>(T(),P("button",{key:g,ref_for:!0,ref:v=>{v&&(a.value[g]=v)},class:fe(["flex w-full items-center whitespace-nowrap rounded-md px-2 py-1.5 text-sm text-ink-gray-9",g===r.value?"bg-surface-gray-2":"",t.itemClass]),onClick:v=>o(g),onMouseover:v=>r.value=g},[Ye(p.$slots,"default",{item:m,index:g},()=>[u("span",null,E(m.display||m.title||m.name),1)])],42,T3e))),128)),!t.items.length&&t.showNoResults?(T(),P("div",E3e," No results ")):ie("",!0)],2)):ie("",!0)}});function M3e(t){const e={name:"mention",group:"inline",inline:!0,selectable:!0,atom:!0,addOptions(){return{component:void 0}},addAttributes(){return{id:{default:null,parseHTML:n=>n.getAttribute("data-id"),renderHTML:n=>n.id?{"data-id":n.id}:{}},label:{default:null,parseHTML:n=>n.getAttribute("data-label"),renderHTML:n=>n.label?{"data-label":n.label}:{}}}},parseHTML(){return[{tag:'span.mention[data-type="mention"]',getAttrs:n=>{const r=n;return{id:r.getAttribute("data-id"),label:r.getAttribute("data-label")}}}]},renderHTML({HTMLAttributes:n}){return["span",In(n,{class:"mention","data-type":"mention"}),`@${n["data-label"]||n.id||""}`]},renderText({node:n}){return`@${n.attrs.label||n.attrs.id||""}`}};return t&&(e.addNodeView=()=>gb(t)),Er.create(e)}const $3e=CC({name:"mentionSuggestion",char:"@",pluginKey:new Un("mentionSuggestion"),component:AC,addOptions(){return{mentions:[]}},items:({query:t,editor:e})=>{const{mentions:n}=e.extensionManager.extensions.find(a=>a.name==="mentionSuggestion").options;return Fr(n).filter(a=>a.label.toLowerCase().startsWith(t.toLowerCase())).slice(0,10).map(a=>je(me({},a),{display:a.label}))},command:({editor:t,range:e,props:n})=>{const r={id:n.id||n.value,label:n.label};t.chain().focus().insertContentAt(e,[{type:"mention",attrs:r}]).run()},tippyOptions:{placement:"bottom-start",offset:[0,8]},allowSpaces:!1,decorationTag:"span",decorationClass:"mention-suggestion-active"}),D3e=br.create({name:"mentionExtension",addOptions(){return{mentions:[],component:void 0}},addExtensions(){return[M3e(this.options.component),$3e.configure({mentions:this.options.mentions})]}}),R3e={name:"TipTapMenu",props:["buttons"],inject:["editor"],components:{Popover:kK},methods:{onButtonClick(t){t.action(this.editor)}}},P3e={class:"inline-flex bg-surface-white px-1 py-1"},I3e={class:"inline-flex items-center gap-1"},O3e={key:0,class:"h-4 w-[2px] border-l"},L3e={key:1,class:"shrink-0"},V3e=["onClick","set"],N3e={key:1},j3e={class:"p-1.5 mt-2 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},F3e=["onClick"],B3e={key:1,class:"whitespace-nowrap text-ink-gray-7"},z3e=["onClick","title"],U3e={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function H3e(t,e,n,r,i,a){const s=Ji("Popover");return T(),P("div",P3e,[u("div",I3e,[(T(!0),P(_e,null,we(n.buttons,o=>(T(),P(_e,{key:o.label},[o.type==="separator"?(T(),P("div",O3e)):o.map?(T(),P("div",L3e,[b(s,null,{target:D(({togglePopover:l})=>[u("button",{class:"rounded px-2 py-1 text-base font-medium text-ink-gray-8 transition-colors hover:bg-surface-gray-2",onClick:l,set:t.activeBtn=o.find(d=>d.isActive(a.editor))||o[0]},[t.activeBtn.icon?(T(),he(Lt(t.activeBtn.icon),{key:0,class:"h-4 w-4"})):(T(),P("span",N3e,E(t.activeBtn.label),1))],8,V3e)]),body:D(({close:l})=>[u("ul",j3e,[(T(!0),P(_e,null,we(o,d=>xe((T(),P("li",null,[u("button",{class:"w-full h-7 rounded px-2 text-base flex items-center gap-2 hover:bg-surface-gray-3",onClick:()=>{a.onButtonClick(d),l()}},[d.icon?(T(),he(Lt(d.icon),{key:0,class:"size-4 flex-shrink-0 text-ink-gray-6"})):ie("",!0),d.label?(T(),P("span",B3e,E(d.label),1)):ie("",!0)],8,F3e)],512)),[[ot,d.isDisabled?!d.isDisabled(a.editor):!0]])),256))])]),_:2},1024)])):(T(),he(Lt(o.component||"div"),Ct({key:2,ref_for:!0},{editor:a.editor}),{default:D(l=>[u("button",{class:fe(["flex rounded p-1 text-ink-gray-8 transition-colors",[o.isActive(a.editor)||l!=null&&l.isActive?"bg-surface-gray-3":"hover:bg-surface-gray-2",o.class]]),onClick:d=>l!=null&&l.onClick?l.onClick(o):a.onButtonClick(o),title:o.label},[o.icon?(T(),he(Lt(o.icon),{key:0,class:"h-4 w-4"})):(T(),P("span",U3e,E(o.text),1))],10,z3e)]),_:2},1040))],64))),128))])])}const UQ=Ft(R3e,[["render",H3e]]),q3e={},W3e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function G3e(t,e){return T(),P("svg",W3e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm8-12v12h-2v-9.796l-2 .536V8.67L19.5 8H21z",fill:"currentColor"},null,-1)])])}const Y3e=Ft(q3e,[["render",G3e]]),K3e={},X3e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Z3e(t,e){return T(),P("svg",X3e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 4c2.071 0 3.75 1.679 3.75 3.75 0 .857-.288 1.648-.772 2.28l-.148.18L18.034 18H22v2h-7v-1.556l4.82-5.546c.268-.307.43-.709.43-1.148 0-.966-.784-1.75-1.75-1.75-.918 0-1.671.707-1.744 1.606l-.006.144h-2C14.75 9.679 16.429 8 18.5 8z",fill:"currentColor"},null,-1)])])}const Q3e=Ft(K3e,[["render",Z3e]]),J3e={},e5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function t5e(t,e){return T(),P("svg",e5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M22 8l-.002 2-2.505 2.883c1.59.435 2.757 1.89 2.757 3.617 0 2.071-1.679 3.75-3.75 3.75-1.826 0-3.347-1.305-3.682-3.033l1.964-.382c.156.806.866 1.415 1.718 1.415.966 0 1.75-.784 1.75-1.75s-.784-1.75-1.75-1.75c-.286 0-.556.069-.794.19l-1.307-1.547L19.35 10H15V8h7zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)])])}const n5e=Ft(J3e,[["render",t5e]]),r5e={},i5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function a5e(t,e){return T(),P("svg",i5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm9-12v8h1.5v2H22v2h-2v-2h-5.5v-1.34l5-8.66H22zm-2 3.133L17.19 16H20v-4.867z",fill:"currentColor"},null,-1)])])}const s5e=Ft(r5e,[["render",a5e]]),o5e={},l5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function u5e(t,e){return T(),P("svg",l5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M22 8v2h-4.323l-.464 2.636c.33-.089.678-.136 1.037-.136 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.827 0-3.367-1.224-3.846-2.897l1.923-.551c.24.836 1.01 1.448 1.923 1.448 1.105 0 2-.895 2-2s-.895-2-2-2c-.63 0-1.193.292-1.56.748l-1.81-.904L16 8h6zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)])])}const d5e=Ft(o5e,[["render",u5e]]),c5e={},f5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function p5e(t,e){return T(),P("svg",f5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M21.097 8l-2.598 4.5c2.21 0 4.001 1.79 4.001 4s-1.79 4-4 4-4-1.79-4-4c0-.736.199-1.426.546-2.019L18.788 8h2.309zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 10.5c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2z",fill:"currentColor"},null,-1)])])}const h5e=Ft(c5e,[["render",p5e]]),m5e={},g5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function v5e(t,e){return T(),P("svg",g5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M13 6v15h-2V6H5V4h14v2z",fill:"currentColor"},null,-1)])])}const y5e=Ft(m5e,[["render",v5e]]),b5e={},_5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function x5e(t,e){return T(),P("svg",_5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z",fill:"currentColor"},null,-1)])])}const w5e=Ft(b5e,[["render",x5e]]),k5e={},S5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function C5e(t,e){return T(),P("svg",S5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z",fill:"currentColor"},null,-1)])])}const A5e=Ft(k5e,[["render",C5e]]),T5e={},E5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function M5e(t,e){return T(),P("svg",E5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M8 3v9a4 4 0 1 0 8 0V3h2v9a6 6 0 1 1-12 0V3h2zM4 20h16v2H4v-2z",fill:"currentColor"},null,-1)])])}const $5e=Ft(T5e,[["render",M5e]]),D5e={},R5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function P5e(t,e){return T(),P("svg",R5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M17.154 14c.23.516.346 1.09.346 1.72 0 1.342-.524 2.392-1.571 3.147C14.88 19.622 13.433 20 11.586 20c-1.64 0-3.263-.381-4.87-1.144V16.6c1.52.877 3.075 1.316 4.666 1.316 2.551 0 3.83-.732 3.839-2.197a2.21 2.21 0 0 0-.648-1.603l-.12-.117H3v-2h18v2h-3.846zm-4.078-3H7.629a4.086 4.086 0 0 1-.481-.522C6.716 9.92 6.5 9.246 6.5 8.452c0-1.236.466-2.287 1.397-3.153C8.83 4.433 10.271 4 12.222 4c1.471 0 2.879.328 4.222.984v2.152c-1.2-.687-2.515-1.03-3.946-1.03-2.48 0-3.719.782-3.719 2.346 0 .42.218.786.654 1.099.436.313.974.562 1.613.75.62.18 1.297.414 2.03.699z",fill:"currentColor"},null,-1)])])}const I5e=Ft(D5e,[["render",P5e]]),O5e={},L5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function V5e(t,e){return T(),P("svg",L5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z",fill:"currentColor"},null,-1)])])}const N5e=Ft(O5e,[["render",V5e]]),j5e={},F5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function B5e(t,e){return T(),P("svg",F5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z",fill:"currentColor"},null,-1)])])}const z5e=Ft(j5e,[["render",B5e]]),U5e={},H5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function q5e(t,e){return T(),P("svg",H5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z",fill:"currentColor"},null,-1)])])}const W5e=Ft(U5e,[["render",q5e]]),G5e={},Y5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function K5e(t,e){return T(),P("svg",Y5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M15.246 14H8.754l-1.6 4H5l6-15h2l6 15h-2.154l-1.6-4zm-.8-2L12 5.885 9.554 12h4.892zM3 20h18v2H3v-2z",fill:"currentColor"},null,-1)])])}const X5e=Ft(G5e,[["render",K5e]]),Z5e={},Q5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function J5e(t,e){return T(),P("svg",Q5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M8 4h13v2H8V4zM5 3v3h1v1H3V6h1V4H3V3h2zM3 14v-2.5h2V11H3v-1h3v2.5H4v.5h2v1H3zm2 5.5H3v-1h2V18H3v-1h3v4H3v-1h2v-.5zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)])])}const eEe=Ft(Z5e,[["render",J5e]]),tEe={},nEe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function rEe(t,e){return T(),P("svg",nEe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)])])}const iEe=Ft(tEe,[["render",rEe]]),aEe={},sEe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-list-checks-icon lucide-list-checks"};function oEe(t,e){return T(),P("svg",sEe,[...e[0]||(e[0]=[ur('<path d="m3 17 2 2 4-4"></path><path d="m3 7 2 2 4-4"></path><path d="M13 6h8"></path><path d="M13 12h8"></path><path d="M13 18h8"></path>',5)])])}const lEe=Ft(aEe,[["render",oEe]]),uEe={},dEe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function cEe(t,e){return T(),P("svg",dEe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M19.417 6.679C20.447 7.773 21 9 21 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311-1.804-.167-3.226-1.648-3.226-3.489a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179zm-10 0C10.447 7.773 11 9 11 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311C4.591 12.322 3.17 10.841 3.17 9a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179z",fill:"currentColor"},null,-1)])])}const fEe=Ft(uEe,[["render",cEe]]),pEe={},hEe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function mEe(t,e){return T(),P("svg",hEe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M16.95 8.464l1.414-1.414 4.95 4.95-4.95 4.95-1.414-1.414L20.485 12 16.95 8.464zm-9.9 0L3.515 12l3.535 3.536-1.414 1.414L.686 12l4.95-4.95L7.05 8.464z",fill:"currentColor"},null,-1)])])}const gEe=Ft(pEe,[["render",mEe]]),vEe={},yEe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function bEe(t,e){return T(),P("svg",yEe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z",fill:"currentColor"},null,-1)])])}const _Ee=Ft(vEe,[["render",bEe]]),xEe={},wEe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function kEe(t,e){return T(),P("svg",wEe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M21 15v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2zm.008-12c.548 0 .992.445.992.993V13h-2V5H4v13.999L14 9l3 3v2.829l-3-3L6.827 19H14v2H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016zM8 7a2 2 0 1 1 0 4 2 2 0 0 1 0-4z",fill:"currentColor"},null,-1)])])}const SEe=Ft(xEe,[["render",kEe]]),CEe={},AEe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function TEe(t,e){return T(),P("svg",AEe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M16 4c.552 0 1 .448 1 1v4.2l5.213-3.65c.226-.158.538-.103.697.124.058.084.09.184.09.286v12.08c0 .276-.224.5-.5.5-.103 0-.203-.032-.287-.09L17 14.8V19c0 .552-.448 1-1 1H2c-.552 0-1-.448-1-1V5c0-.552.448-1 1-1h14zm-1 2H3v12h12V6zM8 8h2v3h3v2H9.999L10 16H8l-.001-3H5v-2h3V8zm13 .841l-4 2.8v.718l4 2.8V8.84z",fill:"currentColor"},null,-1)])])}const EEe=Ft(CEe,[["render",TEe]]),MEe={class:"lucide lucide-gallery-vertical",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function $Ee(t,e){return T(),P("svg",MEe,[...e[0]||(e[0]=[u("path",{d:"M3 2h18"},null,-1),u("rect",{width:"18",height:"12",x:"3",y:"6",rx:"2"},null,-1),u("path",{d:"M3 22h18"},null,-1)])])}const HQ=Vt({name:"lucide-gallery-vertical",render:$Ee}),DEe={},REe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function PEe(t,e){return T(),P("svg",REe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M5.828 7l2.536 2.536L6.95 10.95 2 6l4.95-4.95 1.414 1.414L5.828 5H13a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H5.828z",fill:"currentColor"},null,-1)])])}const IEe=Ft(DEe,[["render",PEe]]),OEe={},LEe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function VEe(t,e){return T(),P("svg",LEe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M18.172 7H11a6 6 0 1 0 0 12h9v2h-9a8 8 0 1 1 0-16h7.172l-2.536-2.536L17.05 1.05 22 6l-4.95 4.95-1.414-1.414L18.172 7z",fill:"currentColor"},null,-1)])])}const NEe=Ft(OEe,[["render",VEe]]),jEe={},FEe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function BEe(t,e){return T(),P("svg",FEe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M2 11h2v2H2v-2zm4 0h12v2H6v-2zm14 0h2v2h-2v-2z",fill:"currentColor"},null,-1)])])}const zEe=Ft(jEe,[["render",BEe]]),UEe={},HEe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function qEe(t,e){return T(),P("svg",HEe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M13 10v4h6v-4h-6zm-2 0H5v4h6v-4zm2 9h6v-3h-6v3zm-2 0v-3H5v3h6zm2-14v3h6V5h-6zm-2 0H5v3h6V5zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z",fill:"currentColor"},null,-1)])])}const WEe=Ft(UEe,[["render",qEe]]),GEe={Paragraph:{label:"Paragraph",icon:y5e,action:t=>t.chain().focus().setParagraph().run(),isActive:t=>t.isActive("paragraph")},"Heading 1":{label:"Heading 1",text:"H1",icon:Y3e,action:t=>t.chain().focus().toggleHeading({level:1}).run(),isActive:t=>t.isActive("heading",{level:1})},"Heading 2":{label:"Heading 2",text:"H2",icon:Q3e,action:t=>t.chain().focus().toggleHeading({level:2}).run(),isActive:t=>t.isActive("heading",{level:2})},"Heading 3":{label:"Heading 3",text:"H3",icon:n5e,action:t=>t.chain().focus().toggleHeading({level:3}).run(),isActive:t=>t.isActive("heading",{level:3})},"Heading 4":{label:"Heading 4",text:"H4",icon:s5e,action:t=>t.chain().focus().toggleHeading({level:4}).run(),isActive:t=>t.isActive("heading",{level:4})},"Heading 5":{label:"Heading 5",text:"H5",icon:d5e,action:t=>t.chain().focus().toggleHeading({level:5}).run(),isActive:t=>t.isActive("heading",{level:5})},"Heading 6":{label:"Heading 6",text:"H6",icon:h5e,action:t=>t.chain().focus().toggleHeading({level:6}).run(),isActive:t=>t.isActive("heading",{level:6})},Bold:{label:"Bold",icon:w5e,action:t=>t.chain().focus().toggleBold().run(),isActive:t=>t.isActive("bold")},Italic:{label:"Italic",icon:A5e,action:t=>t.chain().focus().toggleItalic().run(),isActive:t=>t.isActive("italic")},Underline:{label:"Underline",icon:$5e,action:t=>t.chain().focus().toggleUnderline().run(),isActive:t=>t.isActive("underline")},Strikethrough:{label:"Strikethrough",icon:I5e,action:t=>t.chain().focus().toggleStrike().run(),isActive:t=>t.isActive("strike")},"Bullet List":{label:"Bullet List",icon:iEe,action:t=>t.chain().focus().toggleBulletList().run(),isActive:t=>t.isActive("bulletList")},"Numbered List":{label:"Numbered List",icon:eEe,action:t=>t.chain().focus().toggleOrderedList().run(),isActive:t=>t.isActive("orderedList")},"Task List":{label:"Task List",icon:lEe,action:t=>t.chain().focus().toggleTaskList().run(),isActive:t=>t.isActive("taskList")},"Align Center":{label:"Align Center",icon:N5e,action:t=>t.chain().focus().setTextAlign("center").run(),isActive:t=>t.isActive({textAlign:"center"})},"Align Left":{label:"Align Left",icon:z5e,action:t=>t.chain().focus().setTextAlign("left").run(),isActive:t=>t.isActive({textAlign:"left"})},"Align Right":{label:"Align Right",icon:W5e,action:t=>t.chain().focus().setTextAlign("right").run(),isActive:t=>t.isActive({textAlign:"right"})},FontColor:{label:"Font Color",icon:X5e,isActive:t=>t.isActive("textStyle")||t.isActive("highlight"),component:tv(()=>Va(()=>import("./FontColor-qcVTBF8a.js"),[]))},Blockquote:{label:"Blockquote",icon:fEe,action:t=>t.chain().focus().toggleBlockquote().run(),isActive:t=>t.isActive("blockquote")},Code:{label:"Code",icon:gEe,action:t=>t.chain().focus().toggleCodeBlock().run(),isActive:t=>t.isActive("codeBlock")},"Horizontal Rule":{label:"Horizontal Rule",icon:zEe,action:t=>t.chain().focus().setHorizontalRule().run(),isActive:t=>!1},Link:{label:"Link",icon:_Ee,isActive:t=>t.isActive("link"),component:tv(()=>Va(()=>import("./InsertLink-Dw7MFPLc.js"),[]))},Image:{label:"Image",icon:SEe,isActive:t=>!1,component:tv(()=>Va(()=>import("./InsertImage-Dut8zGlP.js"),[]))},Video:{label:"Video",icon:EEe,isActive:t=>!1,component:tv(()=>Va(()=>import("./InsertVideo-1KicGizD.js"),[]))},Iframe:{label:"Embed",icon:HQ,isActive:t=>t.isActive("iframe"),component:tv(()=>Va(()=>import("./InsertIframe-RtgdpWs5.js"),[]))},Undo:{label:"Undo",icon:IEe,action:t=>t.chain().focus().undo().run(),isActive:t=>!1},Redo:{label:"Redo",icon:NEe,action:t=>t.chain().focus().redo().run(),isActive:t=>!1},InsertTable:{label:"Insert Table",icon:WEe,action:t=>t.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),isActive:t=>!1},AddColumnBefore:{label:"Add Column Before",action:t=>t.chain().focus().addColumnBefore().run(),isActive:t=>!1,isDisabled:t=>!t.can().addColumnBefore()},AddColumnAfter:{label:"Add Column After",action:t=>t.chain().focus().addColumnAfter().run(),isActive:t=>!1,isDisabled:t=>!t.can().addColumnAfter()},DeleteColumn:{label:"Delete Column",action:t=>t.chain().focus().deleteColumn().run(),isActive:t=>!1,isDisabled:t=>!t.can().deleteColumn()},AddRowBefore:{label:"Add Row Before",action:t=>t.chain().focus().addRowBefore().run(),isActive:t=>!1,isDisabled:t=>!t.can().addRowBefore()},AddRowAfter:{label:"Add Row After",action:t=>t.chain().focus().addRowAfter().run(),isActive:t=>!1,isDisabled:t=>!t.can().addRowAfter()},DeleteRow:{label:"Delete Row",action:t=>t.chain().focus().deleteRow().run(),isActive:t=>!1,isDisabled:t=>!t.can().deleteRow()},DeleteTable:{label:"Delete Table",action:t=>t.chain().focus().deleteTable().run(),isActive:t=>!1,isDisabled:t=>!t.can().deleteTable()},MergeCells:{label:"Merge Cells",action:t=>t.chain().focus().mergeCells().run(),isActive:t=>!1,isDisabled:t=>!t.can().mergeCells()},SplitCell:{label:"Split Cell",action:t=>t.chain().focus().splitCell().run(),isActive:t=>!1,isDisabled:t=>!t.can().splitCell()},ToggleHeaderColumn:{label:"Toggle Header Column",action:t=>t.chain().focus().toggleHeaderColumn().run(),isActive:t=>!1,isDisabled:t=>!t.can().toggleHeaderColumn()},ToggleHeaderRow:{label:"Toggle Header Row",action:t=>t.chain().focus().toggleHeaderRow().run(),isActive:t=>!1,isDisabled:t=>!t.can().toggleHeaderRow()},ToggleHeaderCell:{label:"Toggle Header Cell",action:t=>t.chain().focus().toggleHeaderCell().run(),isActive:t=>!1,isDisabled:t=>!t.can().toggleHeaderCell()},Separator:{type:"separator"}};function TC(t){return t instanceof Array?t.map(TC):typeof t=="object"?t:GEe[t]}const YEe={name:"TextEditorFixedMenu",props:["buttons"],components:{Menu:UQ},inject:["editor"],computed:{fixedMenuButtons(){if(!this.buttons)return!1;let t;return Array.isArray(this.buttons)?t=this.buttons:t=[["Heading 1","Heading 2","Heading 3","Heading 4","Heading 5","Heading 6"],"Paragraph","Separator","Bold","Italic","Separator","Bullet List","Numbered List","Task List","Separator","Align Left","Align Center","Align Right","FontColor","Separator","Image","Video","Iframe","Link","Blockquote","Code","Horizontal Rule",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"],"Separator","Undo","Redo"],t.map(TC)}}};function KEe(t,e,n,r,i,a){const s=Ji("Menu");return a.fixedMenuButtons?(T(),he(s,{key:0,buttons:a.fixedMenuButtons},null,8,["buttons"])):ie("",!0)}const XEe=Ft(YEe,[["render",KEe]]),ZEe={name:"TextEditorBubbleMenu",props:["buttons","options"],components:{BubbleMenu:TSe,Menu:UQ},inject:["editor"],computed:{bubbleMenuButtons(){if(!this.buttons)return!1;let t;return Array.isArray(this.buttons)?t=this.buttons:t=["Paragraph","Heading 2","Heading 3","Separator","Bold","Italic","Strikethrough","FontColor","Link","Separator","Bullet List","Numbered List","Task List","Separator","Align Left","Align Center","Align Right","Separator","Image","Video","Blockquote","Code",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"]],t.map(TC)}}};function QEe(t,e,n,r,i,a){const s=Ji("Menu"),o=Ji("BubbleMenu");return a.bubbleMenuButtons?(T(),he(o,Ct({key:0,class:"bubble-menu rounded-md shadow-sm","tippy-options":{duration:100},editor:a.editor},n.options),{default:D(()=>[b(s,{class:"rounded-md border-gray-100 shadow-lg",buttons:a.bubbleMenuButtons},null,8,["buttons"])]),_:1},16,["editor"])):ie("",!0)}const JEe=Ft(ZEe,[["render",QEe]]),eMe={name:"TextEditorFloatingMenu",props:["buttons"],components:{FloatingMenu:$Se},inject:["editor"],computed:{floatingMenuButtons(){if(!this.buttons)return!1;let t;return Array.isArray(this.buttons)?t=this.buttons:t=["Paragraph","Heading 2","Heading 3","Bullet List","Numbered List","Task List","Blockquote","Code","Horizontal Rule"],t.map(TC)}}},tMe=["onClick","title"],nMe={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function rMe(t,e,n,r,i,a){const s=Ji("FloatingMenu");return a.floatingMenuButtons?(T(),he(s,{key:0,"tippy-options":{duration:100},editor:a.editor,class:"flex"},{default:D(()=>[(T(!0),P(_e,null,we(a.floatingMenuButtons,o=>(T(),P("button",{key:o.label,class:fe(["flex rounded p-1 text-ink-gray-8 transition-colors",o.isActive(a.editor)?"bg-surface-gray-2":"hover:bg-surface-gray-2"]),onClick:()=>o.action(a.editor),title:o.label},[o.icon?(T(),he(Lt(o.icon),{key:0,class:"h-4 w-4"})):(T(),P("span",nMe,E(o.text),1))],10,tMe))),128))]),_:1},8,["editor"])):ie("",!0)}const iMe=Ft(eMe,[["render",rMe]]),aMe={class:"mr-2"},sMe=Ze({__name:"EmojiList",props:{items:{type:Array,required:!0},editor:{type:Object,required:!0},range:{type:Object,required:!0},command:{type:Function,required:!0}},setup(t,{expose:e}){const n=t,r=Q(null),i=s=>{s&&n.command(s)};return e({onKeyDown:({event:s})=>{var o,l;return(l=(o=r.value)==null?void 0:o.onKeyDown({event:s}))!=null?l:!1}}),(s,o)=>(T(),he(AC,{ref_key:"suggestionList",ref:r,items:t.items,command:l=>i(l),"item-class":"py-2"},{default:D(({item:l})=>[u("span",aMe,E(l.emoji),1),u("span",null,E(l.name),1)]),_:1},8,["items","command"]))}}),oMe=[{name:"grinning",emoji:""},{name:"grimacing",emoji:""},{name:"grin",emoji:""},{name:"joy",emoji:""},{name:"rofl",emoji:""},{name:"smiley",emoji:""},{name:"smile",emoji:""},{name:"sweat_smile",emoji:""},{name:"laughing",emoji:""},{name:"innocent",emoji:""},{name:"wink",emoji:""},{name:"blush",emoji:""},{name:"slightly_smiling_face",emoji:""},{name:"upside_down_face",emoji:""},{name:"relaxed",emoji:""},{name:"yum",emoji:""},{name:"relieved",emoji:""},{name:"heart_eyes",emoji:""},{name:"kissing_heart",emoji:""},{name:"kissing",emoji:""},{name:"kissing_smiling_eyes",emoji:""},{name:"kissing_closed_eyes",emoji:""},{name:"stuck_out_tongue_winking_eye",emoji:""},{name:"stuck_out_tongue_closed_eyes",emoji:""},{name:"stuck_out_tongue",emoji:""},{name:"money_mouth_face",emoji:""},{name:"nerd_face",emoji:""},{name:"sunglasses",emoji:""},{name:"clown_face",emoji:""},{name:"cowboy_hat_face",emoji:""},{name:"hugs",emoji:""},{name:"smirk",emoji:""},{name:"no_mouth",emoji:""},{name:"neutral_face",emoji:""},{name:"expressionless",emoji:""},{name:"unamused",emoji:""},{name:"roll_eyes",emoji:""},{name:"thinking",emoji:""},{name:"lying_face",emoji:""},{name:"flushed",emoji:""},{name:"disappointed",emoji:""},{name:"worried",emoji:""},{name:"angry",emoji:""},{name:"rage",emoji:""},{name:"pensive",emoji:""},{name:"confused",emoji:""},{name:"slightly_frowning_face",emoji:""},{name:"frowning_face",emoji:""},{name:"persevere",emoji:""},{name:"confounded",emoji:""},{name:"tired_face",emoji:""},{name:"weary",emoji:""},{name:"triumph",emoji:""},{name:"open_mouth",emoji:""},{name:"scream",emoji:""},{name:"fearful",emoji:""},{name:"cold_sweat",emoji:""},{name:"hushed",emoji:""},{name:"frowning_with_open_mouth",emoji:""},{name:"anguished",emoji:""},{name:"cry",emoji:""},{name:"disappointed_relieved",emoji:""},{name:"drooling_face",emoji:""},{name:"sleepy",emoji:""},{name:"sweat",emoji:""},{name:"sob",emoji:""},{name:"dizzy_face",emoji:""},{name:"astonished",emoji:""},{name:"zipper_mouth_face",emoji:""},{name:"nauseated_face",emoji:""},{name:"sneezing_face",emoji:""},{name:"mask",emoji:""},{name:"face_with_thermometer",emoji:""},{name:"face_with_head_bandage",emoji:""},{name:"sleeping",emoji:""},{name:"zzz",emoji:""},{name:"poop",emoji:""},{name:"smiling_imp",emoji:""},{name:"imp",emoji:""},{name:"japanese_ogre",emoji:""},{name:"japanese_goblin",emoji:""},{name:"skull",emoji:""},{name:"ghost",emoji:""},{name:"alien",emoji:""},{name:"robot",emoji:""},{name:"smiley_cat",emoji:""},{name:"smile_cat",emoji:""},{name:"joy_cat",emoji:""},{name:"heart_eyes_cat",emoji:""},{name:"smirk_cat",emoji:""},{name:"kissing_cat",emoji:""},{name:"scream_cat",emoji:""},{name:"crying_cat_face",emoji:""},{name:"pouting_cat",emoji:""},{name:"raised_hands",emoji:""},{name:"clap",emoji:""},{name:"wave",emoji:""},{name:"call_me_hand",emoji:""},{name:"+1",emoji:""},{name:"-1",emoji:""},{name:"facepunch",emoji:""},{name:"fist",emoji:""},{name:"fist_left",emoji:""},{name:"fist_right",emoji:""},{name:"v",emoji:""},{name:"ok_hand",emoji:""},{name:"raised_hand",emoji:""},{name:"raised_back_of_hand",emoji:""},{name:"open_hands",emoji:""},{name:"muscle",emoji:""},{name:"pray",emoji:""},{name:"handshake",emoji:""},{name:"point_up",emoji:""},{name:"point_up_2",emoji:""},{name:"point_down",emoji:""},{name:"point_left",emoji:""},{name:"point_right",emoji:""},{name:"fu",emoji:""},{name:"raised_hand_with_fingers_splayed",emoji:""},{name:"metal",emoji:""},{name:"crossed_fingers",emoji:""},{name:"vulcan_salute",emoji:""},{name:"writing_hand",emoji:""},{name:"selfie",emoji:""},{name:"nail_care",emoji:""},{name:"lips",emoji:""},{name:"tongue",emoji:""},{name:"ear",emoji:""},{name:"nose",emoji:""},{name:"eye",emoji:""},{name:"eyes",emoji:""},{name:"bust_in_silhouette",emoji:""},{name:"busts_in_silhouette",emoji:""},{name:"speaking_head",emoji:""},{name:"baby",emoji:""},{name:"boy",emoji:""},{name:"girl",emoji:""},{name:"man",emoji:""},{name:"woman",emoji:""},{name:"blonde_woman",emoji:""},{name:"blonde_man",emoji:""},{name:"older_man",emoji:""},{name:"older_woman",emoji:""},{name:"man_with_gua_pi_mao",emoji:""},{name:"woman_with_turban",emoji:""},{name:"man_with_turban",emoji:""},{name:"policewoman",emoji:""},{name:"policeman",emoji:""},{name:"construction_worker_woman",emoji:""},{name:"construction_worker_man",emoji:""},{name:"guardswoman",emoji:""},{name:"guardsman",emoji:""},{name:"female_detective",emoji:""},{name:"male_detective",emoji:""},{name:"woman_health_worker",emoji:""},{name:"man_health_worker",emoji:""},{name:"woman_farmer",emoji:""},{name:"man_farmer",emoji:""},{name:"woman_cook",emoji:""},{name:"man_cook",emoji:""},{name:"woman_student",emoji:""},{name:"man_student",emoji:""},{name:"woman_singer",emoji:""},{name:"man_singer",emoji:""},{name:"woman_teacher",emoji:""},{name:"man_teacher",emoji:""},{name:"woman_factory_worker",emoji:""},{name:"man_factory_worker",emoji:""},{name:"woman_technologist",emoji:""},{name:"man_technologist",emoji:""},{name:"woman_office_worker",emoji:""},{name:"man_office_worker",emoji:""},{name:"woman_mechanic",emoji:""},{name:"man_mechanic",emoji:""},{name:"woman_scientist",emoji:""},{name:"man_scientist",emoji:""},{name:"woman_artist",emoji:""},{name:"man_artist",emoji:""},{name:"woman_firefighter",emoji:""},{name:"man_firefighter",emoji:""},{name:"woman_pilot",emoji:""},{name:"man_pilot",emoji:""},{name:"woman_astronaut",emoji:""},{name:"man_astronaut",emoji:""},{name:"woman_judge",emoji:""},{name:"man_judge",emoji:""},{name:"mrs_claus",emoji:""},{name:"santa",emoji:""},{name:"angel",emoji:""},{name:"pregnant_woman",emoji:""},{name:"princess",emoji:""},{name:"prince",emoji:""},{name:"bride_with_veil",emoji:""},{name:"person_in_tuxedo",emoji:""},{name:"running_woman",emoji:""},{name:"running_man",emoji:""},{name:"walking_woman",emoji:""},{name:"walking_man",emoji:""},{name:"dancer",emoji:""},{name:"man_dancing",emoji:""},{name:"dancing_women",emoji:""},{name:"dancing_men",emoji:""},{name:"couple",emoji:""},{name:"two_men_holding_hands",emoji:""},{name:"two_women_holding_hands",emoji:""},{name:"bowing_woman",emoji:""},{name:"bowing_man",emoji:""},{name:"man_facepalming",emoji:""},{name:"woman_facepalming",emoji:""},{name:"woman_shrugging",emoji:""},{name:"man_shrugging",emoji:""},{name:"tipping_hand_woman",emoji:""},{name:"tipping_hand_man",emoji:""},{name:"no_good_woman",emoji:""},{name:"no_good_man",emoji:""},{name:"ok_woman",emoji:""},{name:"ok_man",emoji:""},{name:"raising_hand_woman",emoji:""},{name:"raising_hand_man",emoji:""},{name:"pouting_woman",emoji:""},{name:"pouting_man",emoji:""},{name:"frowning_woman",emoji:""},{name:"frowning_man",emoji:""},{name:"haircut_woman",emoji:""},{name:"haircut_man",emoji:""},{name:"massage_woman",emoji:""},{name:"massage_man",emoji:""},{name:"couple_with_heart",emoji:""},{name:"couple_with_heart_woman_woman",emoji:""},{name:"couple_with_heart_man_man",emoji:""},{name:"couplekiss_man_woman",emoji:""},{name:"couplekiss_woman_woman",emoji:""},{name:"couplekiss_man_man",emoji:""},{name:"family",emoji:""},{name:"family_man_woman_girl",emoji:""},{name:"family_man_woman_girl_boy",emoji:""},{name:"family_man_woman_boy_boy",emoji:""},{name:"family_man_woman_girl_girl",emoji:""},{name:"family_woman_woman_boy",emoji:""},{name:"family_woman_woman_girl",emoji:""},{name:"family_woman_woman_girl_boy",emoji:""},{name:"family_woman_woman_boy_boy",emoji:""},{name:"family_woman_woman_girl_girl",emoji:""},{name:"family_man_man_boy",emoji:""},{name:"family_man_man_girl",emoji:""},{name:"family_man_man_girl_boy",emoji:""},{name:"family_man_man_boy_boy",emoji:""},{name:"family_man_man_girl_girl",emoji:""},{name:"family_woman_boy",emoji:""},{name:"family_woman_girl",emoji:""},{name:"family_woman_girl_boy",emoji:""},{name:"family_woman_boy_boy",emoji:""},{name:"family_woman_girl_girl",emoji:""},{name:"family_man_boy",emoji:""},{name:"family_man_girl",emoji:""},{name:"family_man_girl_boy",emoji:""},{name:"family_man_boy_boy",emoji:""},{name:"family_man_girl_girl",emoji:""},{name:"womans_clothes",emoji:""},{name:"tshirt",emoji:""},{name:"jeans",emoji:""},{name:"necktie",emoji:""},{name:"dress",emoji:""},{name:"bikini",emoji:""},{name:"kimono",emoji:""},{name:"lipstick",emoji:""},{name:"kiss",emoji:""},{name:"footprints",emoji:""},{name:"high_heel",emoji:""},{name:"sandal",emoji:""},{name:"boot",emoji:""},{name:"mans_shoe",emoji:""},{name:"athletic_shoe",emoji:""},{name:"womans_hat",emoji:""},{name:"tophat",emoji:""},{name:"rescue_worker_helmet",emoji:""},{name:"mortar_board",emoji:""},{name:"crown",emoji:""},{name:"school_satchel",emoji:""},{name:"pouch",emoji:""},{name:"purse",emoji:""},{name:"handbag",emoji:""},{name:"briefcase",emoji:""},{name:"eyeglasses",emoji:""},{name:"dark_sunglasses",emoji:""},{name:"ring",emoji:""},{name:"closed_umbrella",emoji:""},{name:"dog",emoji:""},{name:"cat",emoji:""},{name:"mouse",emoji:""},{name:"hamster",emoji:""},{name:"rabbit",emoji:""},{name:"fox_face",emoji:""},{name:"bear",emoji:""},{name:"panda_face",emoji:""},{name:"koala",emoji:""},{name:"tiger",emoji:""},{name:"lion",emoji:""},{name:"cow",emoji:""},{name:"pig",emoji:""},{name:"pig_nose",emoji:""},{name:"frog",emoji:""},{name:"squid",emoji:""},{name:"octopus",emoji:""},{name:"shrimp",emoji:""},{name:"monkey_face",emoji:""},{name:"gorilla",emoji:""},{name:"see_no_evil",emoji:""},{name:"hear_no_evil",emoji:""},{name:"speak_no_evil",emoji:""},{name:"monkey",emoji:""},{name:"chicken",emoji:""},{name:"penguin",emoji:""},{name:"bird",emoji:""},{name:"baby_chick",emoji:""},{name:"hatching_chick",emoji:""},{name:"hatched_chick",emoji:""},{name:"duck",emoji:""},{name:"eagle",emoji:""},{name:"owl",emoji:""},{name:"bat",emoji:""},{name:"wolf",emoji:""},{name:"boar",emoji:""},{name:"horse",emoji:""},{name:"unicorn",emoji:""},{name:"honeybee",emoji:""},{name:"bug",emoji:""},{name:"butterfly",emoji:""},{name:"snail",emoji:""},{name:"lady_beetle",emoji:""},{name:"ant",emoji:""},{name:"spider",emoji:""},{name:"scorpion",emoji:""},{name:"crab",emoji:""},{name:"snake",emoji:""},{name:"lizard",emoji:""},{name:"turtle",emoji:""},{name:"tropical_fish",emoji:""},{name:"fish",emoji:""},{name:"blowfish",emoji:""},{name:"dolphin",emoji:""},{name:"shark",emoji:""},{name:"whale",emoji:""},{name:"whale2",emoji:""},{name:"crocodile",emoji:""},{name:"leopard",emoji:""},{name:"tiger2",emoji:""},{name:"water_buffalo",emoji:""},{name:"ox",emoji:""},{name:"cow2",emoji:""},{name:"deer",emoji:""},{name:"dromedary_camel",emoji:""},{name:"camel",emoji:""},{name:"elephant",emoji:""},{name:"rhinoceros",emoji:""},{name:"goat",emoji:""},{name:"ram",emoji:""},{name:"sheep",emoji:""},{name:"racehorse",emoji:""},{name:"pig2",emoji:""},{name:"rat",emoji:""},{name:"mouse2",emoji:""},{name:"rooster",emoji:""},{name:"turkey",emoji:""},{name:"dove",emoji:""},{name:"dog2",emoji:""},{name:"poodle",emoji:""},{name:"cat2",emoji:""},{name:"rabbit2",emoji:""},{name:"chipmunk",emoji:""},{name:"paw_prints",emoji:""},{name:"dragon",emoji:""},{name:"dragon_face",emoji:""},{name:"cactus",emoji:""},{name:"christmas_tree",emoji:""},{name:"evergreen_tree",emoji:""},{name:"deciduous_tree",emoji:""},{name:"palm_tree",emoji:""},{name:"seedling",emoji:""},{name:"herb",emoji:""},{name:"shamrock",emoji:""},{name:"four_leaf_clover",emoji:""},{name:"bamboo",emoji:""},{name:"tanabata_tree",emoji:""},{name:"leaves",emoji:""},{name:"fallen_leaf",emoji:""},{name:"maple_leaf",emoji:""},{name:"ear_of_rice",emoji:""},{name:"hibiscus",emoji:""},{name:"sunflower",emoji:""},{name:"rose",emoji:""},{name:"wilted_flower",emoji:""},{name:"tulip",emoji:""},{name:"blossom",emoji:""},{name:"cherry_blossom",emoji:""},{name:"bouquet",emoji:""},{name:"mushroom",emoji:""},{name:"chestnut",emoji:""},{name:"jack_o_lantern",emoji:""},{name:"shell",emoji:""},{name:"spider_web",emoji:""},{name:"earth_americas",emoji:""},{name:"earth_africa",emoji:""},{name:"earth_asia",emoji:""},{name:"full_moon",emoji:""},{name:"waning_gibbous_moon",emoji:""},{name:"last_quarter_moon",emoji:""},{name:"waning_crescent_moon",emoji:""},{name:"new_moon",emoji:""},{name:"waxing_crescent_moon",emoji:""},{name:"first_quarter_moon",emoji:""},{name:"waxing_gibbous_moon",emoji:""},{name:"new_moon_with_face",emoji:""},{name:"full_moon_with_face",emoji:""},{name:"first_quarter_moon_with_face",emoji:""},{name:"last_quarter_moon_with_face",emoji:""},{name:"sun_with_face",emoji:""},{name:"crescent_moon",emoji:""},{name:"star",emoji:""},{name:"star2",emoji:""},{name:"dizzy",emoji:""},{name:"sparkles",emoji:""},{name:"comet",emoji:""},{name:"sunny",emoji:""},{name:"sun_behind_small_cloud",emoji:""},{name:"partly_sunny",emoji:""},{name:"sun_behind_large_cloud",emoji:""},{name:"sun_behind_rain_cloud",emoji:""},{name:"cloud",emoji:""},{name:"cloud_with_rain",emoji:""},{name:"cloud_with_lightning_and_rain",emoji:""},{name:"cloud_with_lightning",emoji:""},{name:"zap",emoji:""},{name:"fire",emoji:""},{name:"boom",emoji:""},{name:"snowflake",emoji:""},{name:"cloud_with_snow",emoji:""},{name:"snowman",emoji:""},{name:"snowman_with_snow",emoji:""},{name:"wind_face",emoji:""},{name:"dash",emoji:""},{name:"tornado",emoji:""},{name:"fog",emoji:""},{name:"open_umbrella",emoji:""},{name:"umbrella",emoji:""},{name:"droplet",emoji:""},{name:"sweat_drops",emoji:""},{name:"ocean",emoji:""},{name:"green_apple",emoji:""},{name:"apple",emoji:""},{name:"pear",emoji:""},{name:"tangerine",emoji:""},{name:"lemon",emoji:""},{name:"banana",emoji:""},{name:"watermelon",emoji:""},{name:"grapes",emoji:""},{name:"strawberry",emoji:""},{name:"melon",emoji:""},{name:"cherries",emoji:""},{name:"peach",emoji:""},{name:"pineapple",emoji:""},{name:"kiwi_fruit",emoji:""},{name:"avocado",emoji:""},{name:"tomato",emoji:""},{name:"eggplant",emoji:""},{name:"cucumber",emoji:""},{name:"carrot",emoji:""},{name:"hot_pepper",emoji:""},{name:"potato",emoji:""},{name:"corn",emoji:""},{name:"sweet_potato",emoji:""},{name:"peanuts",emoji:""},{name:"honey_pot",emoji:""},{name:"croissant",emoji:""},{name:"bread",emoji:""},{name:"baguette_bread",emoji:""},{name:"cheese",emoji:""},{name:"egg",emoji:""},{name:"bacon",emoji:""},{name:"pancakes",emoji:""},{name:"poultry_leg",emoji:""},{name:"meat_on_bone",emoji:""},{name:"fried_shrimp",emoji:""},{name:"fried_egg",emoji:""},{name:"hamburger",emoji:""},{name:"fries",emoji:""},{name:"stuffed_flatbread",emoji:""},{name:"hotdog",emoji:""},{name:"pizza",emoji:""},{name:"spaghetti",emoji:""},{name:"taco",emoji:""},{name:"burrito",emoji:""},{name:"green_salad",emoji:""},{name:"shallow_pan_of_food",emoji:""},{name:"ramen",emoji:""},{name:"stew",emoji:""},{name:"fish_cake",emoji:""},{name:"sushi",emoji:""},{name:"bento",emoji:""},{name:"curry",emoji:""},{name:"rice_ball",emoji:""},{name:"rice",emoji:""},{name:"rice_cracker",emoji:""},{name:"oden",emoji:""},{name:"dango",emoji:""},{name:"shaved_ice",emoji:""},{name:"ice_cream",emoji:""},{name:"icecream",emoji:""},{name:"cake",emoji:""},{name:"birthday",emoji:""},{name:"custard",emoji:""},{name:"candy",emoji:""},{name:"lollipop",emoji:""},{name:"chocolate_bar",emoji:""},{name:"popcorn",emoji:""},{name:"doughnut",emoji:""},{name:"cookie",emoji:""},{name:"milk_glass",emoji:""},{name:"beer",emoji:""},{name:"beers",emoji:""},{name:"clinking_glasses",emoji:""},{name:"wine_glass",emoji:""},{name:"tumbler_glass",emoji:""},{name:"cocktail",emoji:""},{name:"tropical_drink",emoji:""},{name:"champagne",emoji:""},{name:"sake",emoji:""},{name:"tea",emoji:""},{name:"coffee",emoji:""},{name:"baby_bottle",emoji:""},{name:"spoon",emoji:""},{name:"fork_and_knife",emoji:""},{name:"plate_with_cutlery",emoji:""},{name:"soccer",emoji:""},{name:"basketball",emoji:""},{name:"football",emoji:""},{name:"baseball",emoji:""},{name:"tennis",emoji:""},{name:"volleyball",emoji:""},{name:"rugby_football",emoji:""},{name:"8ball",emoji:""},{name:"golf",emoji:""},{name:"golfing_woman",emoji:""},{name:"golfing_man",emoji:""},{name:"ping_pong",emoji:""},{name:"badminton",emoji:""},{name:"goal_net",emoji:""},{name:"ice_hockey",emoji:""},{name:"field_hockey",emoji:""},{name:"cricket_bat_and_ball",emoji:""},{name:"ski",emoji:""},{name:"skier",emoji:""},{name:"snowboarder",emoji:""},{name:"person_fencing",emoji:""},{name:"women_wrestling",emoji:""},{name:"men_wrestling",emoji:""},{name:"woman_cartwheeling",emoji:""},{name:"man_cartwheeling",emoji:""},{name:"woman_playing_handball",emoji:""},{name:"man_playing_handball",emoji:""},{name:"ice_skate",emoji:""},{name:"bow_and_arrow",emoji:""},{name:"fishing_pole_and_fish",emoji:""},{name:"boxing_glove",emoji:""},{name:"martial_arts_uniform",emoji:""},{name:"rowing_woman",emoji:""},{name:"rowing_man",emoji:""},{name:"swimming_woman",emoji:""},{name:"swimming_man",emoji:""},{name:"woman_playing_water_polo",emoji:""},{name:"man_playing_water_polo",emoji:""},{name:"surfing_woman",emoji:""},{name:"surfing_man",emoji:""},{name:"bath",emoji:""},{name:"basketball_woman",emoji:""},{name:"basketball_man",emoji:""},{name:"weight_lifting_woman",emoji:""},{name:"weight_lifting_man",emoji:""},{name:"biking_woman",emoji:""},{name:"biking_man",emoji:""},{name:"mountain_biking_woman",emoji:""},{name:"mountain_biking_man",emoji:""},{name:"horse_racing",emoji:""},{name:"business_suit_levitating",emoji:""},{name:"trophy",emoji:""},{name:"running_shirt_with_sash",emoji:""},{name:"medal_sports",emoji:""},{name:"medal_military",emoji:""},{name:"1st_place_medal",emoji:""},{name:"2nd_place_medal",emoji:""},{name:"3rd_place_medal",emoji:""},{name:"reminder_ribbon",emoji:""},{name:"rosette",emoji:""},{name:"ticket",emoji:""},{name:"tickets",emoji:""},{name:"performing_arts",emoji:""},{name:"art",emoji:""},{name:"circus_tent",emoji:""},{name:"woman_juggling",emoji:""},{name:"man_juggling",emoji:""},{name:"microphone",emoji:""},{name:"headphones",emoji:""},{name:"musical_score",emoji:""},{name:"musical_keyboard",emoji:""},{name:"drum",emoji:""},{name:"saxophone",emoji:""},{name:"trumpet",emoji:""},{name:"guitar",emoji:""},{name:"violin",emoji:""},{name:"clapper",emoji:""},{name:"video_game",emoji:""},{name:"space_invader",emoji:""},{name:"dart",emoji:""},{name:"game_die",emoji:""},{name:"slot_machine",emoji:""},{name:"bowling",emoji:""},{name:"red_car",emoji:""},{name:"taxi",emoji:""},{name:"blue_car",emoji:""},{name:"bus",emoji:""},{name:"trolleybus",emoji:""},{name:"racing_car",emoji:""},{name:"police_car",emoji:""},{name:"ambulance",emoji:""},{name:"fire_engine",emoji:""},{name:"minibus",emoji:""},{name:"truck",emoji:""},{name:"articulated_lorry",emoji:""},{name:"tractor",emoji:""},{name:"kick_scooter",emoji:""},{name:"motorcycle",emoji:""},{name:"bike",emoji:""},{name:"motor_scooter",emoji:""},{name:"rotating_light",emoji:""},{name:"oncoming_police_car",emoji:""},{name:"oncoming_bus",emoji:""},{name:"oncoming_automobile",emoji:""},{name:"oncoming_taxi",emoji:""},{name:"aerial_tramway",emoji:""},{name:"mountain_cableway",emoji:""},{name:"suspension_railway",emoji:""},{name:"railway_car",emoji:""},{name:"train",emoji:""},{name:"monorail",emoji:""},{name:"bullettrain_side",emoji:""},{name:"bullettrain_front",emoji:""},{name:"light_rail",emoji:""},{name:"mountain_railway",emoji:""},{name:"steam_locomotive",emoji:""},{name:"train2",emoji:""},{name:"metro",emoji:""},{name:"tram",emoji:""},{name:"station",emoji:""},{name:"helicopter",emoji:""},{name:"small_airplane",emoji:""},{name:"airplane",emoji:""},{name:"flight_departure",emoji:""},{name:"flight_arrival",emoji:""},{name:"sailboat",emoji:""},{name:"motor_boat",emoji:""},{name:"speedboat",emoji:""},{name:"ferry",emoji:""},{name:"passenger_ship",emoji:""},{name:"rocket",emoji:""},{name:"artificial_satellite",emoji:""},{name:"seat",emoji:""},{name:"canoe",emoji:""},{name:"anchor",emoji:""},{name:"construction",emoji:""},{name:"fuelpump",emoji:""},{name:"busstop",emoji:""},{name:"vertical_traffic_light",emoji:""},{name:"traffic_light",emoji:""},{name:"checkered_flag",emoji:""},{name:"ship",emoji:""},{name:"ferris_wheel",emoji:""},{name:"roller_coaster",emoji:""},{name:"carousel_horse",emoji:""},{name:"building_construction",emoji:""},{name:"foggy",emoji:""},{name:"tokyo_tower",emoji:""},{name:"factory",emoji:""},{name:"fountain",emoji:""},{name:"rice_scene",emoji:""},{name:"mountain",emoji:""},{name:"mountain_snow",emoji:""},{name:"mount_fuji",emoji:""},{name:"volcano",emoji:""},{name:"japan",emoji:""},{name:"camping",emoji:""},{name:"tent",emoji:""},{name:"national_park",emoji:""},{name:"motorway",emoji:""},{name:"railway_track",emoji:""},{name:"sunrise",emoji:""},{name:"sunrise_over_mountains",emoji:""},{name:"desert",emoji:""},{name:"beach_umbrella",emoji:""},{name:"desert_island",emoji:""},{name:"city_sunrise",emoji:""},{name:"city_sunset",emoji:""},{name:"cityscape",emoji:""},{name:"night_with_stars",emoji:""},{name:"bridge_at_night",emoji:""},{name:"milky_way",emoji:""},{name:"stars",emoji:""},{name:"sparkler",emoji:""},{name:"fireworks",emoji:""},{name:"rainbow",emoji:""},{name:"houses",emoji:""},{name:"european_castle",emoji:""},{name:"japanese_castle",emoji:""},{name:"stadium",emoji:""},{name:"statue_of_liberty",emoji:""},{name:"house",emoji:""},{name:"house_with_garden",emoji:""},{name:"derelict_house",emoji:""},{name:"office",emoji:""},{name:"department_store",emoji:""},{name:"post_office",emoji:""},{name:"european_post_office",emoji:""},{name:"hospital",emoji:""},{name:"bank",emoji:""},{name:"hotel",emoji:""},{name:"convenience_store",emoji:""},{name:"school",emoji:""},{name:"love_hotel",emoji:""},{name:"wedding",emoji:""},{name:"classical_building",emoji:""},{name:"church",emoji:""},{name:"mosque",emoji:""},{name:"synagogue",emoji:""},{name:"kaaba",emoji:""},{name:"shinto_shrine",emoji:""},{name:"watch",emoji:""},{name:"iphone",emoji:""},{name:"calling",emoji:""},{name:"computer",emoji:""},{name:"keyboard",emoji:""},{name:"desktop_computer",emoji:""},{name:"printer",emoji:""},{name:"computer_mouse",emoji:""},{name:"trackball",emoji:""},{name:"joystick",emoji:""},{name:"clamp",emoji:""},{name:"minidisc",emoji:""},{name:"floppy_disk",emoji:""},{name:"cd",emoji:""},{name:"dvd",emoji:""},{name:"vhs",emoji:""},{name:"camera",emoji:""},{name:"camera_flash",emoji:""},{name:"video_camera",emoji:""},{name:"movie_camera",emoji:""},{name:"film_projector",emoji:""},{name:"film_strip",emoji:""},{name:"telephone_receiver",emoji:""},{name:"phone",emoji:""},{name:"pager",emoji:""},{name:"fax",emoji:""},{name:"tv",emoji:""},{name:"radio",emoji:""},{name:"studio_microphone",emoji:""},{name:"level_slider",emoji:""},{name:"control_knobs",emoji:""},{name:"stopwatch",emoji:""},{name:"timer_clock",emoji:""},{name:"alarm_clock",emoji:""},{name:"mantelpiece_clock",emoji:""},{name:"hourglass_flowing_sand",emoji:""},{name:"hourglass",emoji:""},{name:"satellite",emoji:""},{name:"battery",emoji:""},{name:"electric_plug",emoji:""},{name:"bulb",emoji:""},{name:"flashlight",emoji:""},{name:"candle",emoji:""},{name:"wastebasket",emoji:""},{name:"oil_drum",emoji:""},{name:"money_with_wings",emoji:""},{name:"dollar",emoji:""},{name:"yen",emoji:""},{name:"euro",emoji:""},{name:"pound",emoji:""},{name:"moneybag",emoji:""},{name:"credit_card",emoji:""},{name:"gem",emoji:""},{name:"balance_scale",emoji:""},{name:"wrench",emoji:""},{name:"hammer",emoji:""},{name:"hammer_and_pick",emoji:""},{name:"hammer_and_wrench",emoji:""},{name:"pick",emoji:""},{name:"nut_and_bolt",emoji:""},{name:"gear",emoji:""},{name:"chains",emoji:""},{name:"gun",emoji:""},{name:"bomb",emoji:""},{name:"hocho",emoji:""},{name:"dagger",emoji:""},{name:"crossed_swords",emoji:""},{name:"shield",emoji:""},{name:"smoking",emoji:""},{name:"skull_and_crossbones",emoji:""},{name:"coffin",emoji:""},{name:"funeral_urn",emoji:""},{name:"amphora",emoji:""},{name:"crystal_ball",emoji:""},{name:"prayer_beads",emoji:""},{name:"barber",emoji:""},{name:"alembic",emoji:""},{name:"telescope",emoji:""},{name:"microscope",emoji:""},{name:"hole",emoji:""},{name:"pill",emoji:""},{name:"syringe",emoji:""},{name:"thermometer",emoji:""},{name:"label",emoji:""},{name:"bookmark",emoji:""},{name:"toilet",emoji:""},{name:"shower",emoji:""},{name:"bathtub",emoji:""},{name:"key",emoji:""},{name:"old_key",emoji:""},{name:"couch_and_lamp",emoji:""},{name:"sleeping_bed",emoji:""},{name:"bed",emoji:""},{name:"door",emoji:""},{name:"bellhop_bell",emoji:""},{name:"framed_picture",emoji:""},{name:"world_map",emoji:""},{name:"parasol_on_ground",emoji:""},{name:"moyai",emoji:""},{name:"shopping",emoji:""},{name:"shopping_cart",emoji:""},{name:"balloon",emoji:""},{name:"flags",emoji:""},{name:"ribbon",emoji:""},{name:"gift",emoji:""},{name:"confetti_ball",emoji:""},{name:"tada",emoji:""},{name:"dolls",emoji:""},{name:"wind_chime",emoji:""},{name:"crossed_flags",emoji:""},{name:"izakaya_lantern",emoji:""},{name:"email",emoji:""},{name:"envelope_with_arrow",emoji:""},{name:"incoming_envelope",emoji:""},{name:"e-mail",emoji:""},{name:"love_letter",emoji:""},{name:"postbox",emoji:""},{name:"mailbox_closed",emoji:""},{name:"mailbox",emoji:""},{name:"mailbox_with_mail",emoji:""},{name:"mailbox_with_no_mail",emoji:""},{name:"package",emoji:""},{name:"postal_horn",emoji:""},{name:"inbox_tray",emoji:""},{name:"outbox_tray",emoji:""},{name:"scroll",emoji:""},{name:"page_with_curl",emoji:""},{name:"bookmark_tabs",emoji:""},{name:"bar_chart",emoji:""},{name:"chart_with_upwards_trend",emoji:""},{name:"chart_with_downwards_trend",emoji:""},{name:"page_facing_up",emoji:""},{name:"date",emoji:""},{name:"calendar",emoji:""},{name:"spiral_calendar",emoji:""},{name:"card_index",emoji:""},{name:"card_file_box",emoji:""},{name:"ballot_box",emoji:""},{name:"file_cabinet",emoji:""},{name:"clipboard",emoji:""},{name:"spiral_notepad",emoji:""},{name:"file_folder",emoji:""},{name:"open_file_folder",emoji:""},{name:"card_index_dividers",emoji:""},{name:"newspaper_roll",emoji:""},{name:"newspaper",emoji:""},{name:"notebook",emoji:""},{name:"closed_book",emoji:""},{name:"green_book",emoji:""},{name:"blue_book",emoji:""},{name:"orange_book",emoji:""},{name:"notebook_with_decorative_cover",emoji:""},{name:"ledger",emoji:""},{name:"books",emoji:""},{name:"open_book",emoji:""},{name:"link",emoji:""},{name:"paperclip",emoji:""},{name:"paperclips",emoji:""},{name:"scissors",emoji:""},{name:"triangular_ruler",emoji:""},{name:"straight_ruler",emoji:""},{name:"pushpin",emoji:""},{name:"round_pushpin",emoji:""},{name:"triangular_flag_on_post",emoji:""},{name:"white_flag",emoji:""},{name:"black_flag",emoji:""},{name:"rainbow_flag",emoji:""},{name:"closed_lock_with_key",emoji:""},{name:"lock",emoji:""},{name:"unlock",emoji:""},{name:"lock_with_ink_pen",emoji:""},{name:"pen",emoji:""},{name:"fountain_pen",emoji:""},{name:"black_nib",emoji:""},{name:"memo",emoji:""},{name:"pencil2",emoji:""},{name:"crayon",emoji:""},{name:"paintbrush",emoji:""},{name:"mag",emoji:""},{name:"mag_right",emoji:""},{name:"heart",emoji:""},{name:"yellow_heart",emoji:""},{name:"green_heart",emoji:""},{name:"blue_heart",emoji:""},{name:"purple_heart",emoji:""},{name:"black_heart",emoji:""},{name:"broken_heart",emoji:""},{name:"heavy_heart_exclamation",emoji:""},{name:"two_hearts",emoji:""},{name:"revolving_hearts",emoji:""},{name:"heartbeat",emoji:""},{name:"heartpulse",emoji:""},{name:"sparkling_heart",emoji:""},{name:"cupid",emoji:""},{name:"gift_heart",emoji:""},{name:"heart_decoration",emoji:""},{name:"peace_symbol",emoji:""},{name:"latin_cross",emoji:""},{name:"star_and_crescent",emoji:""},{name:"om",emoji:""},{name:"wheel_of_dharma",emoji:""},{name:"star_of_david",emoji:""},{name:"six_pointed_star",emoji:""},{name:"menorah",emoji:""},{name:"yin_yang",emoji:""},{name:"orthodox_cross",emoji:""},{name:"place_of_worship",emoji:""},{name:"ophiuchus",emoji:""},{name:"aries",emoji:""},{name:"taurus",emoji:""},{name:"gemini",emoji:""},{name:"cancer",emoji:""},{name:"leo",emoji:""},{name:"virgo",emoji:""},{name:"libra",emoji:""},{name:"scorpius",emoji:""},{name:"sagittarius",emoji:""},{name:"capricorn",emoji:""},{name:"aquarius",emoji:""},{name:"pisces",emoji:""},{name:"id",emoji:""},{name:"atom_symbol",emoji:""},{name:"u7a7a",emoji:""},{name:"u5272",emoji:""},{name:"radioactive",emoji:""},{name:"biohazard",emoji:""},{name:"mobile_phone_off",emoji:""},{name:"vibration_mode",emoji:""},{name:"u6709",emoji:""},{name:"u7121",emoji:""},{name:"u7533",emoji:""},{name:"u55b6",emoji:""},{name:"u6708",emoji:""},{name:"eight_pointed_black_star",emoji:""},{name:"vs",emoji:""},{name:"accept",emoji:""},{name:"white_flower",emoji:""},{name:"ideograph_advantage",emoji:""},{name:"secret",emoji:""},{name:"congratulations",emoji:""},{name:"u5408",emoji:""},{name:"u6e80",emoji:""},{name:"u7981",emoji:""},{name:"a",emoji:""},{name:"b",emoji:""},{name:"ab",emoji:""},{name:"cl",emoji:""},{name:"o2",emoji:""},{name:"sos",emoji:""},{name:"no_entry",emoji:""},{name:"name_badge",emoji:""},{name:"no_entry_sign",emoji:""},{name:"x",emoji:""},{name:"o",emoji:""},{name:"stop_sign",emoji:""},{name:"anger",emoji:""},{name:"hotsprings",emoji:""},{name:"no_pedestrians",emoji:""},{name:"do_not_litter",emoji:""},{name:"no_bicycles",emoji:""},{name:"non-potable_water",emoji:""},{name:"underage",emoji:""},{name:"no_mobile_phones",emoji:""},{name:"exclamation",emoji:""},{name:"grey_exclamation",emoji:""},{name:"question",emoji:""},{name:"grey_question",emoji:""},{name:"bangbang",emoji:""},{name:"interrobang",emoji:""},{name:"100",emoji:""},{name:"low_brightness",emoji:""},{name:"high_brightness",emoji:""},{name:"trident",emoji:""},{name:"fleur_de_lis",emoji:""},{name:"part_alternation_mark",emoji:""},{name:"warning",emoji:""},{name:"children_crossing",emoji:""},{name:"beginner",emoji:""},{name:"recycle",emoji:""},{name:"u6307",emoji:""},{name:"chart",emoji:""},{name:"sparkle",emoji:""},{name:"eight_spoked_asterisk",emoji:""},{name:"negative_squared_cross_mark",emoji:""},{name:"white_check_mark",emoji:""},{name:"diamond_shape_with_a_dot_inside",emoji:""},{name:"cyclone",emoji:""},{name:"loop",emoji:""},{name:"globe_with_meridians",emoji:""},{name:"m",emoji:""},{name:"atm",emoji:""},{name:"sa",emoji:""},{name:"passport_control",emoji:""},{name:"customs",emoji:""},{name:"baggage_claim",emoji:""},{name:"left_luggage",emoji:""},{name:"wheelchair",emoji:""},{name:"no_smoking",emoji:""},{name:"wc",emoji:""},{name:"parking",emoji:""},{name:"potable_water",emoji:""},{name:"mens",emoji:""},{name:"womens",emoji:""},{name:"baby_symbol",emoji:""},{name:"restroom",emoji:""},{name:"put_litter_in_its_place",emoji:""},{name:"cinema",emoji:""},{name:"signal_strength",emoji:""},{name:"koko",emoji:""},{name:"ng",emoji:""},{name:"ok",emoji:""},{name:"up",emoji:""},{name:"cool",emoji:""},{name:"new",emoji:""},{name:"free",emoji:""},{name:"zero",emoji:"0"},{name:"one",emoji:"1"},{name:"two",emoji:"2"},{name:"three",emoji:"3"},{name:"four",emoji:"4"},{name:"five",emoji:"5"},{name:"six",emoji:"6"},{name:"seven",emoji:"7"},{name:"eight",emoji:"8"},{name:"nine",emoji:"9"},{name:"keycap_ten",emoji:""},{name:"asterisk",emoji:"*"},{name:"1234",emoji:""},{name:"arrow_forward",emoji:""},{name:"pause_button",emoji:""},{name:"next_track_button",emoji:""},{name:"stop_button",emoji:""},{name:"record_button",emoji:""},{name:"play_or_pause_button",emoji:""},{name:"previous_track_button",emoji:""},{name:"fast_forward",emoji:""},{name:"rewind",emoji:""},{name:"twisted_rightwards_arrows",emoji:""},{name:"repeat",emoji:""},{name:"repeat_one",emoji:""},{name:"arrow_backward",emoji:""},{name:"arrow_up_small",emoji:""},{name:"arrow_down_small",emoji:""},{name:"arrow_double_up",emoji:""},{name:"arrow_double_down",emoji:""},{name:"arrow_right",emoji:""},{name:"arrow_left",emoji:""},{name:"arrow_up",emoji:""},{name:"arrow_down",emoji:""},{name:"arrow_upper_right",emoji:""},{name:"arrow_lower_right",emoji:""},{name:"arrow_lower_left",emoji:""},{name:"arrow_upper_left",emoji:""},{name:"arrow_up_down",emoji:""},{name:"left_right_arrow",emoji:""},{name:"arrows_counterclockwise",emoji:""},{name:"arrow_right_hook",emoji:""},{name:"leftwards_arrow_with_hook",emoji:""},{name:"arrow_heading_up",emoji:""},{name:"arrow_heading_down",emoji:""},{name:"hash",emoji:"#"},{name:"information_source",emoji:""},{name:"abc",emoji:""},{name:"abcd",emoji:""},{name:"capital_abcd",emoji:""},{name:"symbols",emoji:""},{name:"musical_note",emoji:""},{name:"notes",emoji:""},{name:"wavy_dash",emoji:""},{name:"curly_loop",emoji:""},{name:"heavy_check_mark",emoji:""},{name:"arrows_clockwise",emoji:""},{name:"heavy_plus_sign",emoji:""},{name:"heavy_minus_sign",emoji:""},{name:"heavy_division_sign",emoji:""},{name:"heavy_multiplication_x",emoji:""},{name:"heavy_dollar_sign",emoji:""},{name:"currency_exchange",emoji:""},{name:"copyright",emoji:""},{name:"registered",emoji:""},{name:"tm",emoji:""},{name:"end",emoji:""},{name:"back",emoji:""},{name:"on",emoji:""},{name:"top",emoji:""},{name:"soon",emoji:""},{name:"ballot_box_with_check",emoji:""},{name:"radio_button",emoji:""},{name:"white_circle",emoji:""},{name:"black_circle",emoji:""},{name:"red_circle",emoji:""},{name:"large_blue_circle",emoji:""},{name:"small_orange_diamond",emoji:""},{name:"small_blue_diamond",emoji:""},{name:"large_orange_diamond",emoji:""},{name:"large_blue_diamond",emoji:""},{name:"small_red_triangle",emoji:""},{name:"black_small_square",emoji:""},{name:"white_small_square",emoji:""},{name:"black_large_square",emoji:""},{name:"white_large_square",emoji:""},{name:"small_red_triangle_down",emoji:""},{name:"black_medium_square",emoji:""},{name:"white_medium_square",emoji:""},{name:"black_medium_small_square",emoji:""},{name:"white_medium_small_square",emoji:""},{name:"black_square_button",emoji:""},{name:"white_square_button",emoji:""},{name:"speaker",emoji:""},{name:"sound",emoji:""},{name:"loud_sound",emoji:""},{name:"mute",emoji:""},{name:"mega",emoji:""},{name:"loudspeaker",emoji:""},{name:"bell",emoji:""},{name:"no_bell",emoji:""},{name:"black_joker",emoji:""},{name:"mahjong",emoji:""},{name:"spades",emoji:""},{name:"clubs",emoji:""},{name:"hearts",emoji:""},{name:"diamonds",emoji:""},{name:"flower_playing_cards",emoji:""},{name:"thought_balloon",emoji:""},{name:"right_anger_bubble",emoji:""},{name:"speech_balloon",emoji:""},{name:"left_speech_bubble",emoji:""},{name:"clock1",emoji:""},{name:"clock2",emoji:""},{name:"clock3",emoji:""},{name:"clock4",emoji:""},{name:"clock5",emoji:""},{name:"clock6",emoji:""},{name:"clock7",emoji:""},{name:"clock8",emoji:""},{name:"clock9",emoji:""},{name:"clock10",emoji:""},{name:"clock11",emoji:""},{name:"clock12",emoji:""},{name:"clock130",emoji:""},{name:"clock230",emoji:""},{name:"clock330",emoji:""},{name:"clock430",emoji:""},{name:"clock530",emoji:""},{name:"clock630",emoji:""},{name:"clock730",emoji:""},{name:"clock830",emoji:""},{name:"clock930",emoji:""},{name:"clock1030",emoji:""},{name:"clock1130",emoji:""},{name:"clock1230",emoji:""},{name:"afghanistan",emoji:""},{name:"aland_islands",emoji:""},{name:"albania",emoji:""},{name:"algeria",emoji:""},{name:"american_samoa",emoji:""},{name:"andorra",emoji:""},{name:"angola",emoji:""},{name:"anguilla",emoji:""},{name:"antarctica",emoji:""},{name:"antigua_barbuda",emoji:""},{name:"argentina",emoji:""},{name:"armenia",emoji:""},{name:"aruba",emoji:""},{name:"australia",emoji:""},{name:"austria",emoji:""},{name:"azerbaijan",emoji:""},{name:"bahamas",emoji:""},{name:"bahrain",emoji:""},{name:"bangladesh",emoji:""},{name:"barbados",emoji:""},{name:"belarus",emoji:""},{name:"belgium",emoji:""},{name:"belize",emoji:""},{name:"benin",emoji:""},{name:"bermuda",emoji:""},{name:"bhutan",emoji:""},{name:"bolivia",emoji:""},{name:"caribbean_netherlands",emoji:""},{name:"bosnia_herzegovina",emoji:""},{name:"botswana",emoji:""},{name:"brazil",emoji:""},{name:"british_indian_ocean_territory",emoji:""},{name:"british_virgin_islands",emoji:""},{name:"brunei",emoji:""},{name:"bulgaria",emoji:""},{name:"burkina_faso",emoji:""},{name:"burundi",emoji:""},{name:"cape_verde",emoji:""},{name:"cambodia",emoji:""},{name:"cameroon",emoji:""},{name:"canada",emoji:""},{name:"canary_islands",emoji:""},{name:"cayman_islands",emoji:""},{name:"central_african_republic",emoji:""},{name:"chad",emoji:""},{name:"chile",emoji:""},{name:"cn",emoji:""},{name:"christmas_island",emoji:""},{name:"cocos_islands",emoji:""},{name:"colombia",emoji:""},{name:"comoros",emoji:""},{name:"congo_brazzaville",emoji:""},{name:"congo_kinshasa",emoji:""},{name:"cook_islands",emoji:""},{name:"costa_rica",emoji:""},{name:"croatia",emoji:""},{name:"cuba",emoji:""},{name:"curacao",emoji:""},{name:"cyprus",emoji:""},{name:"czech_republic",emoji:""},{name:"denmark",emoji:""},{name:"djibouti",emoji:""},{name:"dominica",emoji:""},{name:"dominican_republic",emoji:""},{name:"ecuador",emoji:""},{name:"egypt",emoji:""},{name:"el_salvador",emoji:""},{name:"equatorial_guinea",emoji:""},{name:"eritrea",emoji:""},{name:"estonia",emoji:""},{name:"ethiopia",emoji:""},{name:"eu",emoji:""},{name:"falkland_islands",emoji:""},{name:"faroe_islands",emoji:""},{name:"fiji",emoji:""},{name:"finland",emoji:""},{name:"fr",emoji:""},{name:"french_guiana",emoji:""},{name:"french_polynesia",emoji:""},{name:"french_southern_territories",emoji:""},{name:"gabon",emoji:""},{name:"gambia",emoji:""},{name:"georgia",emoji:""},{name:"de",emoji:""},{name:"ghana",emoji:""},{name:"gibraltar",emoji:""},{name:"greece",emoji:""},{name:"greenland",emoji:""},{name:"grenada",emoji:""},{name:"guadeloupe",emoji:""},{name:"guam",emoji:""},{name:"guatemala",emoji:""},{name:"guernsey",emoji:""},{name:"guinea",emoji:""},{name:"guinea_bissau",emoji:""},{name:"guyana",emoji:""},{name:"haiti",emoji:""},{name:"honduras",emoji:""},{name:"hong_kong",emoji:""},{name:"hungary",emoji:""},{name:"iceland",emoji:""},{name:"india",emoji:""},{name:"indonesia",emoji:""},{name:"iran",emoji:""},{name:"iraq",emoji:""},{name:"ireland",emoji:""},{name:"isle_of_man",emoji:""},{name:"israel",emoji:""},{name:"it",emoji:""},{name:"cote_divoire",emoji:""},{name:"jamaica",emoji:""},{name:"jp",emoji:""},{name:"jersey",emoji:""},{name:"jordan",emoji:""},{name:"kazakhstan",emoji:""},{name:"kenya",emoji:""},{name:"kiribati",emoji:""},{name:"kosovo",emoji:""},{name:"kuwait",emoji:""},{name:"kyrgyzstan",emoji:""},{name:"laos",emoji:""},{name:"latvia",emoji:""},{name:"lebanon",emoji:""},{name:"lesotho",emoji:""},{name:"liberia",emoji:""},{name:"libya",emoji:""},{name:"liechtenstein",emoji:""},{name:"lithuania",emoji:""},{name:"luxembourg",emoji:""},{name:"macau",emoji:""},{name:"macedonia",emoji:""},{name:"madagascar",emoji:""},{name:"malawi",emoji:""},{name:"malaysia",emoji:""},{name:"maldives",emoji:""},{name:"mali",emoji:""},{name:"malta",emoji:""},{name:"marshall_islands",emoji:""},{name:"martinique",emoji:""},{name:"mauritania",emoji:""},{name:"mauritius",emoji:""},{name:"mayotte",emoji:""},{name:"mexico",emoji:""},{name:"micronesia",emoji:""},{name:"moldova",emoji:""},{name:"monaco",emoji:""},{name:"mongolia",emoji:""},{name:"montenegro",emoji:""},{name:"montserrat",emoji:""},{name:"morocco",emoji:""},{name:"mozambique",emoji:""},{name:"myanmar",emoji:""},{name:"namibia",emoji:""},{name:"nauru",emoji:""},{name:"nepal",emoji:""},{name:"netherlands",emoji:""},{name:"new_caledonia",emoji:""},{name:"new_zealand",emoji:""},{name:"nicaragua",emoji:""},{name:"niger",emoji:""},{name:"nigeria",emoji:""},{name:"niue",emoji:""},{name:"norfolk_island",emoji:""},{name:"northern_mariana_islands",emoji:""},{name:"north_korea",emoji:""},{name:"norway",emoji:""},{name:"oman",emoji:""},{name:"pakistan",emoji:""},{name:"palau",emoji:""},{name:"palestinian_territories",emoji:""},{name:"panama",emoji:""},{name:"papua_new_guinea",emoji:""},{name:"paraguay",emoji:""},{name:"peru",emoji:""},{name:"philippines",emoji:""},{name:"pitcairn_islands",emoji:""},{name:"poland",emoji:""},{name:"portugal",emoji:""},{name:"puerto_rico",emoji:""},{name:"qatar",emoji:""},{name:"reunion",emoji:""},{name:"romania",emoji:""},{name:"ru",emoji:""},{name:"rwanda",emoji:""},{name:"st_barthelemy",emoji:""},{name:"st_helena",emoji:""},{name:"st_kitts_nevis",emoji:""},{name:"st_lucia",emoji:""},{name:"st_pierre_miquelon",emoji:""},{name:"st_vincent_grenadines",emoji:""},{name:"samoa",emoji:""},{name:"san_marino",emoji:""},{name:"sao_tome_principe",emoji:""},{name:"saudi_arabia",emoji:""},{name:"senegal",emoji:""},{name:"serbia",emoji:""},{name:"seychelles",emoji:""},{name:"sierra_leone",emoji:""},{name:"singapore",emoji:""},{name:"sint_maarten",emoji:""},{name:"slovakia",emoji:""},{name:"slovenia",emoji:""},{name:"solomon_islands",emoji:""},{name:"somalia",emoji:""},{name:"south_africa",emoji:""},{name:"south_georgia_south_sandwich_islands",emoji:""},{name:"kr",emoji:""},{name:"south_sudan",emoji:""},{name:"es",emoji:""},{name:"sri_lanka",emoji:""},{name:"sudan",emoji:""},{name:"suriname",emoji:""},{name:"swaziland",emoji:""},{name:"sweden",emoji:""},{name:"switzerland",emoji:""},{name:"syria",emoji:""},{name:"taiwan",emoji:""},{name:"tajikistan",emoji:""},{name:"tanzania",emoji:""},{name:"thailand",emoji:""},{name:"timor_leste",emoji:""},{name:"togo",emoji:""},{name:"tokelau",emoji:""},{name:"tonga",emoji:""},{name:"trinidad_tobago",emoji:""},{name:"tunisia",emoji:""},{name:"tr",emoji:""},{name:"turkmenistan",emoji:""},{name:"turks_caicos_islands",emoji:""},{name:"tuvalu",emoji:""},{name:"uganda",emoji:""},{name:"ukraine",emoji:""},{name:"united_arab_emirates",emoji:""},{name:"uk",emoji:""},{name:"us",emoji:""},{name:"us_virgin_islands",emoji:""},{name:"uruguay",emoji:""},{name:"uzbekistan",emoji:""},{name:"vanuatu",emoji:""},{name:"vatican_city",emoji:""},{name:"venezuela",emoji:""},{name:"vietnam",emoji:""},{name:"wallis_futuna",emoji:""},{name:"western_sahara",emoji:""},{name:"yemen",emoji:""},{name:"zambia",emoji:""},{name:"zimbabwe",emoji:""},{name:"star_struck",emoji:""},{name:"face_with_raised_eyebrow",emoji:""},{name:"exploding_head",emoji:""},{name:"crazy_face",emoji:""},{name:"face_with_symbols_over_mouth",emoji:""},{name:"face_vomiting",emoji:""},{name:"shushing_face",emoji:""},{name:"face_with_hand_over_mouth",emoji:""},{name:"face_with_monocle",emoji:""},{name:"child",emoji:""},{name:"adult",emoji:""},{name:"older_adult",emoji:""},{name:"woman_with_headscarf",emoji:""},{name:"bearded_person",emoji:""},{name:"breast_feeding",emoji:""},{name:"mage",emoji:""},{name:"woman_mage",emoji:""},{name:"fairy",emoji:""},{name:"vampire",emoji:""},{name:"merperson",emoji:""},{name:"merman",emoji:""},{name:"elf",emoji:""},{name:"genie",emoji:""},{name:"woman_genie",emoji:""},{name:"zombie",emoji:""},{name:"woman_zombie",emoji:""},{name:"person_in_steamy_room",emoji:""},{name:"woman_in_steamy_room",emoji:""},{name:"person_climbing",emoji:""},{name:"woman_climbing",emoji:""},{name:"person_in_lotus_position",emoji:""},{name:"woman_in_lotus_position",emoji:""},{name:"love_you_gesture",emoji:""},{name:"palms_up_together",emoji:""},{name:"brain",emoji:""},{name:"orange_heart",emoji:""},{name:"scarf",emoji:""},{name:"gloves",emoji:""},{name:"coat",emoji:""},{name:"socks",emoji:""},{name:"billed_cap",emoji:""},{name:"zebra",emoji:""},{name:"giraffe",emoji:""},{name:"hedgehog",emoji:""},{name:"sauropod",emoji:""},{name:"t_rex",emoji:""},{name:"cricket",emoji:""},{name:"coconut",emoji:""},{name:"broccoli",emoji:""},{name:"pretzel",emoji:""},{name:"cut_of_meat",emoji:""},{name:"sandwich",emoji:""},{name:"bowl_with_spoon",emoji:""},{name:"canned_food",emoji:""},{name:"dumpling",emoji:""},{name:"fortune_cookie",emoji:""},{name:"takeout_box",emoji:""},{name:"pie",emoji:""},{name:"cup_with_straw",emoji:""},{name:"chopsticks",emoji:""},{name:"flying_saucer",emoji:""},{name:"sled",emoji:""},{name:"curling_stone",emoji:""},{name:"svalbard_and_jan_mayen",emoji:""},{name:"st_martin",emoji:""},{name:"us_outlying_islands",emoji:""},{name:"tristan_da_cunha",emoji:""},{name:"heard_and_mc_donald_islands",emoji:""},{name:"ceuta_and_melilla",emoji:""},{name:"diego_garcia",emoji:""},{name:"ascension_island",emoji:""},{name:"bouvet_island",emoji:""},{name:"clipperton_island",emoji:""},{name:"united_nations",emoji:""},{name:"smiling_face_with_three_hearts",emoji:""},{name:"hot_face",emoji:""},{name:"cold_face",emoji:""},{name:"partying_face",emoji:""},{name:"woozy_face",emoji:""},{name:"pleading_face",emoji:""},{name:"man_red_haired",emoji:""},{name:"man_curly_haired",emoji:""},{name:"man_white_haired",emoji:""},{name:"man_bald",emoji:""},{name:"woman_red_haired",emoji:""},{name:"woman_curly_haired",emoji:""},{name:"woman_white_haired",emoji:""},{name:"woman_bald",emoji:""},{name:"superhero",emoji:""},{name:"man_superhero",emoji:""},{name:"woman_superhero",emoji:""},{name:"supervillain",emoji:""},{name:"woman_supervillain",emoji:""},{name:"man_supervillain",emoji:""},{name:"leg",emoji:""},{name:"foot",emoji:""},{name:"bone",emoji:""},{name:"tooth",emoji:""},{name:"goggles",emoji:""},{name:"lab_coat",emoji:""},{name:"hiking_boot",emoji:""},{name:"flat_shoe",emoji:""},{name:"raccoon",emoji:""},{name:"llama",emoji:""},{name:"hippopotamus",emoji:""},{name:"kangaroo",emoji:""},{name:"badger",emoji:""},{name:"swan",emoji:""},{name:"peacock",emoji:""},{name:"parrot",emoji:""},{name:"lobster",emoji:""},{name:"mosquito",emoji:""},{name:"microbe",emoji:""},{name:"mango",emoji:""},{name:"leafy_green",emoji:""},{name:"bagel",emoji:""},{name:"salt",emoji:""},{name:"moon_cake",emoji:""},{name:"cupcake",emoji:""},{name:"compass",emoji:""},{name:"brick",emoji:""},{name:"skateboard",emoji:""},{name:"luggage",emoji:""},{name:"firecracker",emoji:""},{name:"red_gift_envelope",emoji:""},{name:"softball",emoji:""},{name:"flying_disc",emoji:""},{name:"lacrosse",emoji:""},{name:"nazar_amulet",emoji:""},{name:"jigsaw",emoji:""},{name:"teddy_bear",emoji:""},{name:"chess_pawn",emoji:""},{name:"thread",emoji:""},{name:"yarn",emoji:""},{name:"abacus",emoji:""},{name:"receipt",emoji:""},{name:"toolbox",emoji:""},{name:"magnet",emoji:""},{name:"test_tube",emoji:""},{name:"petri_dish",emoji:""},{name:"dna",emoji:""},{name:"lotion_bottle",emoji:""},{name:"safety_pin",emoji:""},{name:"broom",emoji:""},{name:"basket",emoji:""},{name:"roll_of_toilet_paper",emoji:""},{name:"soap",emoji:""},{name:"sponge",emoji:""},{name:"fire_extinguisher",emoji:""},{name:"infinity",emoji:""},{name:"pirate_flag",emoji:""},{name:"waffle",emoji:""},{name:"otter",emoji:""},{name:"sloth",emoji:""},{name:"ice_cube",emoji:""},{name:"ringer_planet",emoji:""},{name:"flamingo",emoji:""},{name:"yawning_face",emoji:""},{name:"pinching_hand",emoji:""},{name:"service_dog",emoji:""},{name:"orangutan",emoji:""},{name:"auto_rickshaw",emoji:""},{name:"parachute",emoji:""},{name:"yo-yo",emoji:""},{name:"kite",emoji:""},{name:"brown_square",emoji:""},{name:"purple_square",emoji:""},{name:"blue_square",emoji:""},{name:"green_square",emoji:""},{name:"yellow_square",emoji:""},{name:"orange_square",emoji:""},{name:"red_square",emoji:""},{name:"brown_circle",emoji:""},{name:"purple_circle",emoji:""},{name:"green_circle",emoji:""},{name:"yellow_circle",emoji:""},{name:"orange_circle",emoji:""},{name:"razor",emoji:""},{name:"chair",emoji:""},{name:"stethoscope",emoji:""},{name:"adhesive_bandage",emoji:""},{name:"drop_of_blood",emoji:""},{name:"probing_cane",emoji:""},{name:"axe",emoji:""},{name:"diya_lamp",emoji:""},{name:"banjo",emoji:""},{name:"ballet_shoes",emoji:""},{name:"shorts",emoji:""},{name:"briefs",emoji:""},{name:"one_piece_swimsuit",emoji:""},{name:"sari",emoji:""},{name:"safety_vest",emoji:""},{name:"diving_mask",emoji:""},{name:"motorized_wheelchair",emoji:""},{name:"manual_wheelchair",emoji:""},{name:"hindu_temple",emoji:""},{name:"mat",emoji:""},{name:"beverage_box",emoji:""},{name:"oyster",emoji:""},{name:"butter",emoji:""},{name:"falafel",emoji:""},{name:"onion",emoji:""},{name:"garlic",emoji:""},{name:"skunk",emoji:""},{name:"guide_dog",emoji:""},{name:"people_holding_hands",emoji:""},{name:"woman_in_manual_wheelchair",emoji:""},{name:"man_in_manual_wheelchair",emoji:""},{name:"woman_in_motorized_wheelchair",emoji:""},{name:"man_in_motorized_wheelchair",emoji:""},{name:"woman_with_probing_cane",emoji:""},{name:"man_with_probing_cane",emoji:""},{name:"woman_kneeling",emoji:""},{name:"man_kneeling",emoji:""},{name:"man_standing",emoji:""},{name:"woman_standing",emoji:""},{name:"deaf_woman",emoji:""},{name:"deaf_man",emoji:""},{name:"hear_with_hearing_aid",emoji:""},{name:"mechanical_leg",emoji:""},{name:"mechanical_arm",emoji:""},{name:"white_heart",emoji:""},{name:"brown_heart",emoji:""},{name:"transgender_flag",emoji:""},{name:"smiling_face_with_tear",emoji:""},{name:"disguised_face",emoji:""},{name:"pinched_fingers",emoji:""},{name:"anatomical_heart",emoji:""},{name:"lungs",emoji:""},{name:"ninja",emoji:""},{name:"mx_claus",emoji:""},{name:"people_hugging",emoji:""},{name:"black_cat",emoji:""},{name:"bison",emoji:""},{name:"mammoth",emoji:""},{name:"beaver",emoji:""},{name:"dodo",emoji:""},{name:"feather",emoji:""},{name:"seal",emoji:""},{name:"beetle",emoji:""},{name:"cockroach",emoji:""},{name:"fly",emoji:""},{name:"worm",emoji:""},{name:"potted_plant",emoji:""},{name:"blueberries",emoji:""},{name:"olive",emoji:""},{name:"bell_pepper",emoji:""},{name:"flatbread",emoji:""},{name:"tamale",emoji:""},{name:"fondue",emoji:""},{name:"teapot",emoji:""},{name:"bubble_tea",emoji:""},{name:"rock",emoji:""},{name:"wood",emoji:""},{name:"hut",emoji:""},{name:"pickup_truck",emoji:""},{name:"roller_skate",emoji:""},{name:"magic_wand",emoji:""},{name:"piata",emoji:""},{name:"nesting_dolls",emoji:""},{name:"sewing_needle",emoji:""},{name:"knot",emoji:""},{name:"thong_sandal",emoji:""},{name:"military_helmet",emoji:""},{name:"accordion",emoji:""},{name:"long_drum",emoji:""},{name:"coin",emoji:""},{name:"boomerang",emoji:""},{name:"carpentry_saw",emoji:""},{name:"screwdriver",emoji:""},{name:"hook",emoji:""},{name:"ladder",emoji:""},{name:"mirror",emoji:""},{name:"window",emoji:""},{name:"plunger",emoji:""},{name:"mouse_trap",emoji:""},{name:"bucket",emoji:""},{name:"toothbrush",emoji:""},{name:"headstone",emoji:""},{name:"placard",emoji:""},{name:"transgender_symbol",emoji:""},{name:"man_feeding_baby",emoji:""},{name:"person_feeding_baby",emoji:""},{name:"polar_bear",emoji:""},{name:"melting_face",emoji:""},{name:"smiling_face",emoji:""},{name:"face_with_open_eyes_and_hand_over_mouth",emoji:""},{name:"face_with_peeking_eye",emoji:""},{name:"saluting_face",emoji:""},{name:"dotted_line_face",emoji:""},{name:"face_in_clouds",emoji:""},{name:"face_exhaling",emoji:""},{name:"face_with_spiral_eyes",emoji:""},{name:"face_with_diagonal_mouth",emoji:""},{name:"frowning_face",emoji:""},{name:"face_holding_back_tears",emoji:""},{name:"heart_on_fire",emoji:""},{name:"mending_heart",emoji:""},{name:"eye_in_speech_bubble",emoji:""},{name:"rightwards_hand",emoji:""},{name:"leftwards_hand",emoji:""},{name:"palm_down_hand",emoji:""},{name:"palm_up_hand",emoji:""},{name:"hand_with_index_finger_and_thumb_crossed",emoji:""},{name:"index_pointing_at_the_viewer",emoji:""},{name:"heart_hands",emoji:""},{name:"biting_lip",emoji:""},{name:"man_beard",emoji:""},{name:"woman_beard",emoji:""},{name:"person_red_hair",emoji:""},{name:"person_curly_hair",emoji:""},{name:"person_white_hair",emoji:""},{name:"person_bald",emoji:""},{name:"man_blond_hair",emoji:""},{name:"person_frowning",emoji:""},{name:"person_pouting",emoji:""},{name:"person_gesturing_no",emoji:""},{name:"person_gesturing_ok",emoji:""},{name:"person_tipping_hand",emoji:""},{name:"person_raising_hand",emoji:""},{name:"deaf_person",emoji:""},{name:"man_bowing",emoji:""},{name:"person_facepalming",emoji:""},{name:"person_shrugging",emoji:""},{name:"health_worker",emoji:""},{name:"student",emoji:""},{name:"teacher",emoji:""},{name:"judge",emoji:""},{name:"farmer",emoji:""},{name:"cook",emoji:""},{name:"mechanic",emoji:""},{name:"factory_worker",emoji:""},{name:"office_worker",emoji:""},{name:"scientist",emoji:""},{name:"technologist",emoji:""},{name:"singer",emoji:""},{name:"artist",emoji:""},{name:"pilot",emoji:""},{name:"astronaut",emoji:""},{name:"firefighter",emoji:""},{name:"man_police_officer",emoji:""},{name:"man_detective",emoji:""},{name:"man_guard",emoji:""},{name:"man_construction_worker",emoji:""},{name:"person_with_crown",emoji:""},{name:"man_wearing_turban",emoji:""},{name:"man_in_tuxedo",emoji:""},{name:"woman_in_tuxedo",emoji:""},{name:"man_with_veil",emoji:""},{name:"woman_with_veil",emoji:""},{name:"pregnant_man",emoji:""},{name:"pregnant_person",emoji:""},{name:"woman_feeding_baby",emoji:""},{name:"man_mage",emoji:""},{name:"man_fairy",emoji:""},{name:"woman_fairy",emoji:""},{name:"man_vampire",emoji:""},{name:"woman_vampire",emoji:""},{name:"mermaid",emoji:""},{name:"man_elf",emoji:""},{name:"woman_elf",emoji:""},{name:"man_genie",emoji:""},{name:"man_zombie",emoji:""},{name:"troll",emoji:""},{name:"person_getting_massage",emoji:""},{name:"person_getting_haircut",emoji:""},{name:"man_walking",emoji:""},{name:"person_standing",emoji:""},{name:"person_kneeling",emoji:""},{name:"person_with_white_cane",emoji:""},{name:"person_in_motorized_wheelchair",emoji:""},{name:"person_in_manual_wheelchair",emoji:""},{name:"man_running",emoji:""},{name:"women_with_bunny_ears",emoji:""},{name:"man_in_steamy_room",emoji:""},{name:"man_climbing",emoji:""},{name:"man_golfing",emoji:""},{name:"man_surfing",emoji:""},{name:"man_rowing_boat",emoji:""},{name:"man_swimming",emoji:""},{name:"man_bouncing_ball",emoji:""},{name:"man_lifting_weights",emoji:""},{name:"man_biking",emoji:""},{name:"man_mountain_biking",emoji:""},{name:"person_cartwheeling",emoji:""},{name:"people_wrestling",emoji:""},{name:"person_playing_water_polo",emoji:""},{name:"person_playing_handball",emoji:""},{name:"person_juggling",emoji:""},{name:"man_in_lotus_position",emoji:""},{name:"kiss_woman_man",emoji:""},{name:"couple_with_heart_woman_man",emoji:""},{name:"family_man_woman_boy",emoji:""},{name:"red_hair",emoji:""},{name:"curly_hair",emoji:""},{name:"white_hair",emoji:""},{name:"bald",emoji:""},{name:"coral",emoji:""},{name:"lotus",emoji:""},{name:"empty_nest",emoji:""},{name:"nest_with_eggs",emoji:""},{name:"beans",emoji:""},{name:"pouring_liquid",emoji:""},{name:"jar",emoji:""},{name:"playground_slide",emoji:""},{name:"wheel",emoji:""},{name:"ring_buoy",emoji:""},{name:"hamsa",emoji:""},{name:"mirror_ball",emoji:""},{name:"low_battery",emoji:""},{name:"crutch",emoji:""},{name:"xray",emoji:""},{name:"elevator",emoji:""},{name:"bubbles",emoji:""},{name:"identification_card",emoji:""},{name:"eject_button",emoji:""},{name:"female_sign",emoji:""},{name:"male_sign",emoji:""},{name:"heavy_equals_sign",emoji:""},{name:"medical_symbol",emoji:""},{name:"england",emoji:""},{name:"scotland",emoji:""},{name:"wales",emoji:""}],lMe=oMe,uMe=CC({name:"emoji",char:":",pluginKey:new Un("emojiSuggestion"),items:({query:t})=>lMe.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())).sort((e,n)=>{const r=e.name.toLowerCase(),i=n.name.toLowerCase(),a=t.toLowerCase();return r===a&&i!==a?-1:i===a&&r!==a?1:r.startsWith(a)&&!i.startsWith(a)?-1:i.startsWith(a)&&!r.startsWith(a)?1:r.length-i.length}).slice(0,5),command:({editor:t,range:e,props:n})=>{n&&n.emoji?t.chain().focus().deleteRange(e).insertContent(n.emoji).run():console.error("Emoji command execution error: emoji property not found on selected item or item is invalid.",n)},component:sMe}),dMe={key:1,class:"mr-2 h-4 w-4"},cMe=Ze({__name:"SlashCommandsList",props:{items:{type:Array,required:!0},editor:{type:Object,required:!0},range:{type:Object,required:!0},command:{type:Function,required:!0},query:String},setup(t,{expose:e}){const n=t,r=Q(null),i=s=>{s&&n.command(s)};return e({onKeyDown:({event:s})=>{var o,l;return(l=(o=r.value)==null?void 0:o.onKeyDown({event:s}))!=null?l:!1}}),(s,o)=>(T(),he(AC,{ref_key:"suggestionList",ref:r,items:n.items,command:l=>i(l),"container-class":"min-w-48","item-class":"h-7","show-no-results":!0},{default:D(({item:l})=>[l.icon?(T(),he(Lt(l.icon),{key:0,class:"mr-2 h-4 w-4"})):(T(),P("div",dMe)),u("span",null,E(l.title),1)]),_:1},8,["items","command"]))}}),fMe={class:"lucide lucide-heading-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function pMe(t,e){return T(),P("svg",fMe,[...e[0]||(e[0]=[u("path",{d:"M4 12h8"},null,-1),u("path",{d:"M4 18V6"},null,-1),u("path",{d:"M12 18V6"},null,-1),u("path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"},null,-1)])])}const hMe=Vt({name:"lucide-heading-2",render:pMe}),mMe={class:"lucide lucide-heading-3",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function gMe(t,e){return T(),P("svg",mMe,[...e[0]||(e[0]=[ur('<path d="M4 12h8"></path><path d="M4 18V6"></path><path d="M12 18V6"></path><path d="M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"></path><path d="M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"></path>',5)])])}const vMe=Vt({name:"lucide-heading-3",render:gMe}),yMe={class:"lucide lucide-list",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function bMe(t,e){return T(),P("svg",yMe,[...e[0]||(e[0]=[ur('<path d="M3 12h.01"></path><path d="M3 18h.01"></path><path d="M3 6h.01"></path><path d="M8 12h13"></path><path d="M8 18h13"></path><path d="M8 6h13"></path>',6)])])}const _Me=Vt({name:"lucide-list",render:bMe}),xMe={class:"lucide lucide-list-ordered",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function wMe(t,e){return T(),P("svg",xMe,[...e[0]||(e[0]=[ur('<path d="M10 12h11"></path><path d="M10 18h11"></path><path d="M10 6h11"></path><path d="M4 10h2"></path><path d="M4 6h1v4"></path><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"></path>',6)])])}const kMe=Vt({name:"lucide-list-ordered",render:wMe}),SMe={class:"lucide lucide-list-checks",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function CMe(t,e){return T(),P("svg",SMe,[...e[0]||(e[0]=[ur('<path d="m3 17 2 2 4-4"></path><path d="m3 7 2 2 4-4"></path><path d="M13 6h8"></path><path d="M13 12h8"></path><path d="M13 18h8"></path>',5)])])}const AMe=Vt({name:"lucide-list-checks",render:CMe}),TMe={class:"lucide lucide-code",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function EMe(t,e){return T(),P("svg",TMe,[...e[0]||(e[0]=[u("path",{d:"m16 18 6-6-6-6"},null,-1),u("path",{d:"m8 6-6 6 6 6"},null,-1)])])}const MMe=Vt({name:"lucide-code",render:EMe}),$Me={class:"lucide lucide-quote",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function DMe(t,e){return T(),P("svg",$Me,[...e[0]||(e[0]=[u("path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"},null,-1),u("path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"},null,-1)])])}const RMe=Vt({name:"lucide-quote",render:DMe}),PMe={class:"lucide lucide-image",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function IMe(t,e){return T(),P("svg",PMe,[...e[0]||(e[0]=[u("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},null,-1),u("circle",{cx:"9",cy:"9",r:"2"},null,-1),u("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"},null,-1)])])}const OMe=Vt({name:"lucide-image",render:IMe}),LMe={class:"lucide lucide-video",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function VMe(t,e){return T(),P("svg",LMe,[...e[0]||(e[0]=[u("path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"},null,-1),u("rect",{x:"2",y:"6",width:"14",height:"12",rx:"2"},null,-1)])])}const NMe=Vt({name:"lucide-video",render:VMe}),jMe={class:"lucide lucide-link",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function FMe(t,e){return T(),P("svg",jMe,[...e[0]||(e[0]=[u("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},null,-1),u("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},null,-1)])])}const BMe=Vt({name:"lucide-link",render:FMe}),zMe={class:"lucide lucide-table-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function UMe(t,e){return T(),P("svg",zMe,[...e[0]||(e[0]=[u("path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"},null,-1)])])}const HMe=Vt({name:"lucide-table-2",render:UMe}),qMe=new Un("slashCommandSuggestion"),WMe=()=>[{title:"Heading 2",icon:hMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setNode("heading",{level:2}).run()}},{title:"Heading 3",icon:vMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setNode("heading",{level:3}).run()}},{title:"Bullet List",icon:_Me,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleBulletList().run()}},{title:"Numbered List",icon:kMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleOrderedList().run()}},{title:"Task List",icon:AMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleTaskList().run()}},{title:"Code Block",icon:MMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleCodeBlock().run()}},{title:"Blockquote",icon:RMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleBlockquote().run()}},{title:"Image",icon:OMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).selectAndUploadImage().run()}},{title:"Video",icon:NMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).selectAndUploadVideo().run()}},{title:"Embed",icon:HQ,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).openIframeDialog().run()}},{title:"Link",icon:BMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setLink({href:""}).run()}},{title:"Horizontal Rule",icon:SQ,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setHorizontalRule().run()}},{title:"Table",icon:HMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}}],GMe=CC({name:"slashCommands",char:"/",pluginKey:qMe,items:({query:t})=>WMe().filter(n=>n.title.toLowerCase().startsWith(t.toLowerCase())),command:({editor:t,range:e,props:n})=>{n&&typeof n.command=="function"?n.command({editor:t,range:e}):console.error("Slash command execution error: command function not found on selected item or item is invalid.",n)},component:cMe});function yP(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var oh=yP();function qQ(t){oh=t}var n0={exec:()=>null};function zn(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(i,a)=>{let s=typeof a=="string"?a:a.source;return s=s.replace(va.caret,"$1"),n=n.replace(i,s),r},getRegex:()=>new RegExp(n,e)};return r}var va={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},YMe=/^(?:[ \t]*(?:\n|$))+/,KMe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,XMe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,vb=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ZMe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bP=/(?:[*+-]|\d{1,9}[.)])/,WQ=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,GQ=zn(WQ).replace(/bull/g,bP).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),QMe=zn(WQ).replace(/bull/g,bP).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),_P=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,JMe=/^[^\n]+/,xP=/(?!\s*\])(?:\\.|[^\[\]\\])+/,e$e=zn(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",xP).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),t$e=zn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bP).getRegex(),EC="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wP=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,n$e=zn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",wP).replace("tag",EC).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),YQ=zn(_P).replace("hr",vb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",EC).getRegex(),r$e=zn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",YQ).getRegex(),kP={blockquote:r$e,code:KMe,def:e$e,fences:XMe,heading:ZMe,hr:vb,html:n$e,lheading:GQ,list:t$e,newline:YMe,paragraph:YQ,table:n0,text:JMe},IN=zn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",vb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",EC).getRegex(),i$e=je(me({},kP),{lheading:QMe,table:IN,paragraph:zn(_P).replace("hr",vb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",IN).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",EC).getRegex()}),a$e=je(me({},kP),{html:zn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",wP).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:n0,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:zn(_P).replace("hr",vb).replace("heading",` *#{1,6} *[^
]`).replace("lheading",GQ).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),s$e=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,o$e=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,KQ=/^( {2,}|\\)\n(?!\s*$)/,l$e=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,MC=/[\p{P}\p{S}]/u,SP=/[\s\p{P}\p{S}]/u,XQ=/[^\s\p{P}\p{S}]/u,u$e=zn(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,SP).getRegex(),ZQ=/(?!~)[\p{P}\p{S}]/u,d$e=/(?!~)[\s\p{P}\p{S}]/u,c$e=/(?:[^\s\p{P}\p{S}]|~)/u,f$e=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,QQ=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,p$e=zn(QQ,"u").replace(/punct/g,MC).getRegex(),h$e=zn(QQ,"u").replace(/punct/g,ZQ).getRegex(),JQ="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",m$e=zn(JQ,"gu").replace(/notPunctSpace/g,XQ).replace(/punctSpace/g,SP).replace(/punct/g,MC).getRegex(),g$e=zn(JQ,"gu").replace(/notPunctSpace/g,c$e).replace(/punctSpace/g,d$e).replace(/punct/g,ZQ).getRegex(),v$e=zn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,XQ).replace(/punctSpace/g,SP).replace(/punct/g,MC).getRegex(),y$e=zn(/\\(punct)/,"gu").replace(/punct/g,MC).getRegex(),b$e=zn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_$e=zn(wP).replace("(?:-->|$)","-->").getRegex(),x$e=zn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_$e).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),sk=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,w$e=zn(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",sk).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),eJ=zn(/^!?\[(label)\]\[(ref)\]/).replace("label",sk).replace("ref",xP).getRegex(),tJ=zn(/^!?\[(ref)\](?:\[\])?/).replace("ref",xP).getRegex(),k$e=zn("reflink|nolink(?!\\()","g").replace("reflink",eJ).replace("nolink",tJ).getRegex(),CP={_backpedal:n0,anyPunctuation:y$e,autolink:b$e,blockSkip:f$e,br:KQ,code:o$e,del:n0,emStrongLDelim:p$e,emStrongRDelimAst:m$e,emStrongRDelimUnd:v$e,escape:s$e,link:w$e,nolink:tJ,punctuation:u$e,reflink:eJ,reflinkSearch:k$e,tag:x$e,text:l$e,url:n0},S$e=je(me({},CP),{link:zn(/^!?\[(label)\]\((.*?)\)/).replace("label",sk).getRegex(),reflink:zn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",sk).getRegex()}),uM=je(me({},CP),{emStrongRDelimAst:g$e,emStrongLDelim:h$e,url:zn(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),C$e=je(me({},uM),{br:zn(KQ).replace("{2,}","*").getRegex(),text:zn(uM.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),b_={normal:kP,gfm:i$e,pedantic:a$e},pv={normal:CP,gfm:uM,breaks:C$e,pedantic:S$e},A$e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ON=t=>A$e[t];function Qo(t,e){if(e){if(va.escapeTest.test(t))return t.replace(va.escapeReplace,ON)}else if(va.escapeTestNoEncode.test(t))return t.replace(va.escapeReplaceNoEncode,ON);return t}function LN(t){try{t=encodeURI(t).replace(va.percentDecode,"%")}catch(e){return null}return t}function VN(t,e){var a;const n=t.replace(va.findPipe,(s,o,l)=>{let d=!1,c=o;for(;--c>=0&&l[c]==="\\";)d=!d;return d?"|":" |"}),r=n.split(va.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((a=r.at(-1))!=null&&a.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(va.slashPipe,"|");return r}function hv(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function T$e(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function NN(t,e,n,r,i){const a=e.href,s=e.title||null,o=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:a,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,l}function E$e(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(a=>{const s=a.match(n.other.beginningSpace);if(s===null)return a;const[o]=s;return o.length>=i.length?a.slice(i.length):a}).join(`
`)}var ok=class{constructor(t){ct(this,"options");ct(this,"rules");ct(this,"lexer");this.options=t||oh}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:hv(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=E$e(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const r=hv(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:hv(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=hv(e[0],`
`).split(`
`),r="",i="";const a=[];for(;n.length>0;){let s=!1;const o=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))o.push(n[l]),s=!0;else if(!s)o.push(n[l]);else break;n=n.slice(l);const d=o.join(`
`),c=d.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${d}`:d,i=i?`${i}
${c}`:c;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,a,!0),this.lexer.state.top=f,n.length===0)break;const p=a.at(-1);if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){const h=p,m=h.raw+`
`+n.join(`
`),g=this.blockquote(m);a[a.length-1]=g,r=r.substring(0,r.length-h.raw.length)+g.raw,i=i.substring(0,i.length-h.text.length)+g.text;break}else if((p==null?void 0:p.type)==="list"){const h=p,m=h.raw+`
`+n.join(`
`),g=this.list(m);a[a.length-1]=g,r=r.substring(0,r.length-p.raw.length)+g.raw,i=i.substring(0,i.length-h.raw.length)+g.raw,n=m.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:a,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const a=this.rules.other.listItemRegex(n);let s=!1;for(;t;){let l=!1,d="",c="";if(!(e=a.exec(t))||this.rules.block.hr.test(t))break;d=e[0],t=t.substring(d.length);let f=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,_=>" ".repeat(3*_.length)),p=t.split(`
`,1)[0],h=!f.trim(),m=0;if(this.options.pedantic?(m=2,c=f.trimStart()):h?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,c=f.slice(m),m+=e[1].length),h&&this.rules.other.blankLine.test(p)&&(d+=p+`
`,t=t.substring(p.length+1),l=!0),!l){const _=this.rules.other.nextBulletRegex(m),x=this.rules.other.hrRegex(m),w=this.rules.other.fencesBeginRegex(m),k=this.rules.other.headingBeginRegex(m),S=this.rules.other.htmlBeginRegex(m);for(;t;){const C=t.split(`
`,1)[0];let A;if(p=C,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),A=p):A=p.replace(this.rules.other.tabCharGlobal,"    "),w.test(p)||k.test(p)||S.test(p)||_.test(p)||x.test(p))break;if(A.search(this.rules.other.nonSpaceChar)>=m||!p.trim())c+=`
`+A.slice(m);else{if(h||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||w.test(f)||k.test(f)||x.test(f))break;c+=`
`+p}!h&&!p.trim()&&(h=!0),d+=C+`
`,t=t.substring(C.length+1),f=A.slice(m)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(d)&&(s=!0));let g=null,v;this.options.gfm&&(g=this.rules.other.listIsTask.exec(c),g&&(v=g[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:d,task:!!g,checked:v,loose:!1,text:c,tokens:[]}),i.raw+=d}const o=i.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const d=i.items[l].tokens.filter(f=>f.type==="space"),c=d.length>0&&d.some(f=>this.rules.other.anyLine.test(f.raw));i.loose=c}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:i}}}table(t){var s;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=VN(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(s=e[3])!=null&&s.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const o of r)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<n.length;o++)a.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:a.align[o]});for(const o of i)a.rows.push(VN(o,a.header.length).map((l,d)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:a.align[d]})));return a}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const a=hv(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=T$e(e[2],"()");if(a===-2)return;if(a>-1){const o=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(r);a&&(r=a[1],i=a[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),NN(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return NN(n,i,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...r[0]].length-1;let s,o,l=a,d=0;const c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+a);(r=c.exec(e))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(o=[...s].length,r[3]||r[4]){l+=o;continue}else if((r[5]||r[6])&&a%3&&!((a+o)%3)){d+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+d);const f=[...r[0]][0].length,p=t.slice(0,a+r.index+f+o);if(Math.min(a,o)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n,r;let e;if(e=this.rules.inline.url.exec(t)){let i,a;if(e[2]==="@")i=e[0],a="mailto:"+i;else{let s;do s=e[0],e[0]=(r=(n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])!=null?r:"";while(s!==e[0]);i=e[0],e[1]==="www."?a="http://"+e[0]:a=e[0]}return{type:"link",raw:e[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},Ru=class dM{constructor(e){ct(this,"tokens");ct(this,"options");ct(this,"state");ct(this,"tokenizer");ct(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||oh,this.options.tokenizer=this.options.tokenizer||new ok,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:va,block:b_.normal,inline:pv.normal};this.options.pedantic?(n.block=b_.pedantic,n.inline=pv.pedantic):this.options.gfm&&(n.block=b_.gfm,this.options.breaks?n.inline=pv.breaks:n.inline=pv.gfm),this.tokenizer.rules=n}static get rules(){return{block:b_,inline:pv}}static lex(e,n){return new dM(n).lex(e)}static lexInline(e,n){return new dM(n).inlineTokens(e)}lex(e){e=e.replace(va.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,a,s;for(this.options.pedantic&&(e=e.replace(va.tabCharGlobal,"    ").replace(va.spaceLine,""));e;){let o;if((a=(i=this.options.extensions)==null?void 0:i.block)!=null&&a.some(d=>(o=d.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);const d=n.at(-1);o.raw.length===1&&d!==void 0?d.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);const d=n.at(-1);(d==null?void 0:d.type)==="paragraph"||(d==null?void 0:d.type)==="text"?(d.raw+=`
`+o.raw,d.text+=`
`+o.text,this.inlineQueue.at(-1).src=d.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);const d=n.at(-1);(d==null?void 0:d.type)==="paragraph"||(d==null?void 0:d.type)==="text"?(d.raw+=`
`+o.raw,d.text+=`
`+o.raw,this.inlineQueue.at(-1).src=d.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}let l=e;if((s=this.options.extensions)!=null&&s.startBlock){let d=1/0;const c=e.slice(1);let f;this.options.extensions.startBlock.forEach(p=>{f=p.call({lexer:this},c),typeof f=="number"&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(l=e.substring(0,d+1))}if(this.state.top&&(o=this.tokenizer.paragraph(l))){const d=n.at(-1);r&&(d==null?void 0:d.type)==="paragraph"?(d.raw+=`
`+o.raw,d.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=d.text):n.push(o),r=l.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);const d=n.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=`
`+o.raw,d.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=d.text):n.push(o);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var o,l,d;let r=e,i=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,s="";for(;e;){a||(s=""),a=!1;let c;if((l=(o=this.options.extensions)==null?void 0:o.inline)!=null&&l.some(p=>(c=p.call({lexer:this},e,n))?(e=e.substring(c.raw.length),n.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const p=n.at(-1);c.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=c.raw,p.text+=c.text):n.push(c);continue}if(c=this.tokenizer.emStrong(e,r,s)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),n.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),n.push(c);continue}let f=e;if((d=this.options.extensions)!=null&&d.startInline){let p=1/0;const h=e.slice(1);let m;this.options.extensions.startInline.forEach(g=>{m=g.call({lexer:this},h),typeof m=="number"&&m>=0&&(p=Math.min(p,m))}),p<1/0&&p>=0&&(f=e.substring(0,p+1))}if(c=this.tokenizer.inlineText(f)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(s=c.raw.slice(-1)),a=!0;const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=c.raw,p.text+=c.text):n.push(c);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return n}},lk=class{constructor(t){ct(this,"options");ct(this,"parser");this.options=t||oh}space(t){return""}code({text:t,lang:e,escaped:n}){var a;const r=(a=(e||"").match(va.notSpaceStart))==null?void 0:a[0],i=t.replace(va.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Qo(r)+'">'+(n?i:Qo(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Qo(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let r="";for(let s=0;s<t.items.length;s++){const o=t.items[s];r+=this.listitem(o)}const i=e?"ol":"ul",a=e&&n!==1?' start="'+n+'"':"";return"<"+i+a+`>
`+r+"</"+i+`>
`}listitem(t){var n;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+Qo(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);e+=this.tablerow({text:n});let r="";for(let i=0;i<t.rows.length;i++){const a=t.rows[i];n="";for(let s=0;s<a.length;s++)n+=this.tablecell(a[s]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Qo(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),i=LN(t);if(i===null)return r;t=i;let a='<a href="'+t+'"';return e&&(a+=' title="'+Qo(e)+'"'),a+=">"+r+"</a>",a}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const i=LN(t);if(i===null)return Qo(n);t=i;let a=`<img src="${t}" alt="${n}"`;return e&&(a+=` title="${Qo(e)}"`),a+=">",a}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Qo(t.text)}},AP=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Pu=class cM{constructor(e){ct(this,"options");ct(this,"renderer");ct(this,"textRenderer");this.options=e||oh,this.options.renderer=this.options.renderer||new lk,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new AP}static parse(e,n){return new cM(n).parse(e)}static parseInline(e,n){return new cM(n).parseInline(e)}parse(e,n=!0){var i,a;let r="";for(let s=0;s<e.length;s++){const o=e[s];if((a=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&a[o.type]){const d=o,c=this.options.extensions.renderers[d.type].call({parser:this},d);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)){r+=c||"";continue}}const l=o;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let d=l,c=this.renderer.text(d);for(;s+1<e.length&&e[s+1].type==="text";)d=e[++s],c+=`
`+this.renderer.text(d);n?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):r+=c;continue}default:{const d='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return r}parseInline(e,n=this.renderer){var i,a;let r="";for(let s=0;s<e.length;s++){const o=e[s];if((a=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&a[o.type]){const d=this.options.extensions.renderers[o.type].call({parser:this},o);if(d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=d||"";continue}}const l=o;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const d='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return r}},L5,gw=(L5=class{constructor(t){ct(this,"options");ct(this,"block");this.options=t||oh}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Ru.lex:Ru.lexInline}provideParser(){return this.block?Pu.parse:Pu.parseInline}},ct(L5,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),L5),M$e=class{constructor(...t){ct(this,"defaults",yP());ct(this,"options",this.setOptions);ct(this,"parse",this.parseMarkdown(!0));ct(this,"parseInline",this.parseMarkdown(!1));ct(this,"Parser",Pu);ct(this,"Renderer",lk);ct(this,"TextRenderer",AP);ct(this,"Lexer",Ru);ct(this,"Tokenizer",ok);ct(this,"Hooks",gw);this.use(...t)}walkTokens(t,e){var r,i;let n=[];for(const a of t)switch(n=n.concat(e.call(this,a)),a.type){case"table":{const s=a;for(const o of s.header)n=n.concat(this.walkTokens(o.tokens,e));for(const o of s.rows)for(const l of o)n=n.concat(this.walkTokens(l.tokens,e));break}case"list":{const s=a;n=n.concat(this.walkTokens(s.items,e));break}default:{const s=a;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{const l=s[o].flat(1/0);n=n.concat(this.walkTokens(l,e))}):s.tokens&&(n=n.concat(this.walkTokens(s.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r=me({},n);if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const a=e.renderers[i.name];a?e.renderers[i.name]=function(...s){let o=i.renderer.apply(this,s);return o===!1&&(o=a.apply(this,s)),o}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=e[i.level];a?a.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),n.renderer){const i=this.defaults.renderer||new lk(this.defaults);for(const a in n.renderer){if(!(a in i))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const s=a,o=n.renderer[s],l=i[s];i[s]=(...d)=>{let c=o.apply(i,d);return c===!1&&(c=l.apply(i,d)),c||""}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new ok(this.defaults);for(const a in n.tokenizer){if(!(a in i))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const s=a,o=n.tokenizer[s],l=i[s];i[s]=(...d)=>{let c=o.apply(i,d);return c===!1&&(c=l.apply(i,d)),c}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new gw;for(const a in n.hooks){if(!(a in i))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const s=a,o=n.hooks[s],l=i[s];gw.passThroughHooks.has(a)?i[s]=d=>{if(this.defaults.async)return Promise.resolve(o.call(i,d)).then(f=>l.call(i,f));const c=o.call(i,d);return l.call(i,c)}:i[s]=(...d)=>{let c=o.apply(i,d);return c===!1&&(c=l.apply(i,d)),c}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,a=n.walkTokens;r.walkTokens=function(s){let o=[];return o.push(a.call(this,s)),i&&(o=o.concat(i.call(this,s))),o}}this.defaults=me(me({},this.defaults),r)}),this}setOptions(t){return this.defaults=me(me({},this.defaults),t),this}lexer(t,e){return Ru.lex(t,e!=null?e:this.defaults)}parser(t,e){return Pu.parse(t,e!=null?e:this.defaults)}parseMarkdown(t){return(n,r)=>{const i=me({},r),a=me(me({},this.defaults),i),s=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n=="undefined"||n===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=t);const o=a.hooks?a.hooks.provideLexer():t?Ru.lex:Ru.lexInline,l=a.hooks?a.hooks.provideParser():t?Pu.parse:Pu.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(d=>o(d,a)).then(d=>a.hooks?a.hooks.processAllTokens(d):d).then(d=>a.walkTokens?Promise.all(this.walkTokens(d,a.walkTokens)).then(()=>d):d).then(d=>l(d,a)).then(d=>a.hooks?a.hooks.postprocess(d):d).catch(s);try{a.hooks&&(n=a.hooks.preprocess(n));let d=o(n,a);a.hooks&&(d=a.hooks.processAllTokens(d)),a.walkTokens&&this.walkTokens(d,a.walkTokens);let c=l(d,a);return a.hooks&&(c=a.hooks.postprocess(c)),c}catch(d){return s(d)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+Qo(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},Wp=new M$e;function Yn(t,e){return Wp.parse(t,e)}Yn.options=Yn.setOptions=function(t){return Wp.setOptions(t),Yn.defaults=Wp.defaults,qQ(Yn.defaults),Yn};Yn.getDefaults=yP;Yn.defaults=oh;Yn.use=function(...t){return Wp.use(...t),Yn.defaults=Wp.defaults,qQ(Yn.defaults),Yn};Yn.walkTokens=function(t,e){return Wp.walkTokens(t,e)};Yn.parseInline=Wp.parseInline;Yn.Parser=Pu;Yn.parser=Pu.parse;Yn.Renderer=lk;Yn.TextRenderer=AP;Yn.Lexer=Ru;Yn.lexer=Ru.lex;Yn.Tokenizer=ok;Yn.Hooks=gw;Yn.parse=Yn;Yn.options;Yn.setOptions;Yn.use;Yn.walkTokens;Yn.parseInline;Pu.parse;Ru.lex;function $$e(t){return Yn.parse(t,{gfm:!0,breaks:!0,async:!1})}function D$e(t){return t.split(`
`).filter(r=>/!\[.*\]\(.*\)/.test(r)||/\[.*\]\(.*\)/.test(r)||/(^|\s)\*.*\*(\s|$)/.test(r)||/(^|\s)_.*_(\s|$)/.test(r)||/(^|\s)\*\*.*\*\*(\s|$)/.test(r)||/(^|\s)__.*__(\s|$)/.test(r)||/(^|\s)~~.*~~(\s|$)/.test(r)||r.startsWith("![")||r.startsWith("#")||r.startsWith("> ")||r.startsWith("*")||r.startsWith("- ")||r.startsWith("1. ")||r.startsWith("```")||r.startsWith("`")||r.startsWith("[")||r.startsWith("---")).length>0}const R$e=br.create({name:"contentPaste",addOptions(){return{enabled:!0,uploadFunction:null}},addProseMirrorPlugins(){const t=this;return[new On({key:new Un("contentPaste"),props:{handleDOMEvents:{copy:(e,n)=>{var s,o;const r=window.getSelection();if(!r)return!1;const i=document.createElement("div");for(let l=0;l<r.rangeCount;l++)i.appendChild(r.getRangeAt(l).cloneContents());return i.querySelectorAll("img").forEach(l=>{const d=l.getAttribute("src");d&&d.startsWith("/")&&l.setAttribute("src",`${window.location.origin}${d}`)}),(s=n.clipboardData)==null||s.setData("text/html",i.innerHTML),(o=n.clipboardData)==null||o.setData("text/plain",r.toString()),n.preventDefault(),!0}},handlePaste:(e,n,r)=>{var h,m,g;if(!this.options.enabled)return!1;const i=Array.from(((h=n.clipboardData)==null?void 0:h.files)||[]),a=Array.from(i).filter(v=>v.type.startsWith("image/"));if(a.length>0)return R2(a,e,null,t.options),!0;const s=(m=n.clipboardData)==null?void 0:m.getData("text/html");if(s)return P$e(s,e,this.options),!0;const o=(g=n.clipboardData)==null?void 0:g.getData("text/plain");if(!o||!D$e(o))return!1;const l=$$e(o),d=document.createElement("div");d.innerHTML=l;const f=vp.fromSchema(e.state.schema).parseSlice(d,{preserveWhitespace:!0}),p=e.state.tr.replaceSelection(f);return e.dispatch(p),!0}}})]}});function P$e(t,e,n){return le(this,null,function*(){const r=document.createElement("div");r.innerHTML=t;const i=r.querySelectorAll("img"),s=vp.fromSchema(e.state.schema).parseSlice(r,{preserveWhitespace:!0}),o=e.state.tr.replaceSelection(s);e.dispatch(o);const l=[];e.state.doc.descendants((c,f)=>{for(let p of i){const h=p.getAttribute("src");c.type.name==="image"&&c.attrs.src===h&&l.push([h,f])}});const d=Array.from(l).map(p=>le(this,[p],function*([c,f]){if(c.startsWith("data:")||c.startsWith("blob:"))try{const m=yield(yield fetch(c)).blob(),g=new File([m],"pasted-data-image.png",{type:m.type});R2([g],e,f,n)}catch(h){console.error("Failed to process image:",h)}}));yield Promise.all(d)})}const nJ=Er.create({name:"tagItem",group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes(){return{tagId:{default:null,parseHTML:t=>t.getAttribute("data-tag-id"),renderHTML:t=>t.tagId?{"data-tag-id":t.tagId}:{}},tagLabel:{default:"tag",parseHTML:t=>t.getAttribute("data-tag-label"),renderHTML:t=>({"data-tag-label":t.tagLabel})}}},parseHTML(){return[{tag:"span.tag-item",getAttrs:t=>{const e=t;return{tagId:e.getAttribute("data-tag-id"),tagLabel:e.getAttribute("data-tag-label")||e.innerText.replace(/^#/,"")}}}]},renderHTML({HTMLAttributes:t}){return["span",In(t,{class:"tag-item"}),`#${t["data-tag-label"]}`]},renderText({node:t}){return`#${t.attrs.tagLabel||""}`},addCommands(){return{setTag:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}}}),I$e=CC({name:"tagSuggestion",char:"#",pluginKey:new Un("tagSuggestion"),component:AC,addOptions(){return{tags:[]}},items:({query:t,editor:e})=>{const{tags:n}=e.extensionManager.extensions.find(a=>a.name==="tagSuggestion").options;let r=Fr(n),i=r.filter(a=>a.label.toLowerCase().startsWith(t.toLowerCase())).map(a=>je(me({},a),{display:a.label}));return t.length>0&&!r.some(a=>a.label.toLowerCase()===t.toLowerCase())&&i.push({display:`New tag: "${t}"`,label:t,isNew:!0}),i},command:({editor:t,range:e,props:n})=>{const r=me({tagLabel:n.label},n.id&&!n.isNew&&{tagId:n.id});t.chain().focus().insertContentAt(e,[{type:nJ.name,attrs:r},{type:"text",text:" "}]).run()},tippyOptions:{placement:"bottom-start",offset:[0,8]},allowSpaces:!1,decorationTag:"span",decorationClass:"tag-suggestion-active"}),O$e=rQ.extend({addInputRules(){return this.options.levels.map(t=>{let e=new RegExp(`^(#{${t}})( |\\u00A0)$`);return E2({find:e,type:this.type,getAttributes:{level:t}})})}}),L$e={class:"lucide lucide-square-pen",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function V$e(t,e){return T(),P("svg",L$e,[...e[0]||(e[0]=[u("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},null,-1),u("path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"},null,-1)])])}const N$e=Vt({name:"lucide-edit",render:V$e}),j$e={class:"lucide lucide-image-plus",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function F$e(t,e){return T(),P("svg",j$e,[...e[0]||(e[0]=[ur('<path d="M16 5h6"></path><path d="M19 2v6"></path><path d="M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5"></path><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path><circle cx="9" cy="9" r="2"></circle>',5)])])}const jN=Vt({name:"lucide-image-plus",render:F$e}),B$e={class:"space-y-2"},z$e={class:"flex items-center gap-2"},U$e=["onDragstart","onDragover","onDragleave"],H$e=["onClick"],q$e=["src","alt"],W$e=["onClick"],G$e=["title"],Y$e=["onBlur","onKeydown"],K$e={key:0,class:"flex flex-col items-center justify-center w-full h-full text-ink-gray-4 bg-surface-gray-1 rounded-[2px]"},X$e=["title"],Z$e=["src","alt"],Q$e=["onClick"],J$e=["title"],eDe=["onBlur","onKeydown"],tDe={key:1,class:"text-p-sm text-ink-gray-5"},nDe={key:2,class:"flex flex-col items-center justify-center min-h-[200px]"},rDe={class:"text-ink-gray-4 mb-2"},iDe={key:3},aDe={class:"mb-2 text-sm"},sDe={class:"w-full bg-gray-200 rounded h-2 overflow-hidden"},oDe={key:0,class:"mt-2 text-red-500 text-xs"},lDe={class:"flex justify-end gap-2"},uDe={key:0,class:"fixed inset-0 z-50 bg-gray-900/60 pointer-events-none flex items-center justify-center"},dDe=Ze({__name:"ImageGroupUploadDialog",props:{modelValue:{type:Boolean},files:{},editor:{},mode:{default:"new"},existingImages:{},initialColumns:{}},emits:["update:modelValue","close","update:files","save"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.modelValue,set:Y=>r("update:modelValue",Y)}),a=Q(!1),s=Q(null),o=Q(null),l=Q(!1),d=Q(null),c=Q(""),f=Q(null),p=Q(!1),h=Q(4),m=Q(0),g=Q(0),v=Q(0),_=Q([]),x=Q([]),w=Q([]);Je(()=>n.modelValue,Y=>{if(Y&&n.mode==="edit"){const K=(n.existingImages||[]).map(B),H=(n.files||[]).map(I);w.value=[...K,...H],n.initialColumns&&(h.value=n.initialColumns,l.value=!0)}else Y&&n.mode==="new"&&(w.value=(n.files||[]).map(I),h.value=j(w.value.length),l.value=!0)},{immediate:!0}),Je(()=>n.existingImages,Y=>{if(n.modelValue&&n.mode==="edit"){const K=(Y||[]).map(B),H=(n.files||[]).map(I);w.value=[...K,...H]}},{deep:!0}),Je(()=>n.files,Y=>{n.mode==="new"&&(w.value=(Y||[]).map(I))},{deep:!0}),bt(()=>{window.addEventListener("dragover",G),window.addEventListener("drop",R),window.addEventListener("dragleave",X)}),Pi(()=>{window.removeEventListener("dragover",G),window.removeEventListener("drop",R),window.removeEventListener("dragleave",X)});function k(){return le(this,null,function*(){const Y=w.value.filter(be=>be.type==="file"&&be.file).map(be=>be.file);w.value.filter(be=>be.type==="existing"&&be.existing).map(be=>be.existing);let K=[];Y.length>0&&(K=yield ve(Y));const H=new Map;Y.forEach((be,ue)=>{const pe=K[ue];pe!=null&&pe.success&&pe.file&&H.set(be,{src:pe.file.file_url||"",alt:pe.file.file_name||""})});const ae=[];for(const be of w.value)if(be.type==="existing"&&be.existing)ae.push(be.existing);else if(be.type==="file"&&be.file){const ue=H.get(be.file);ue&&ae.push(ue)}r("save",{images:ae,columns:h.value}),p.value=!1,i.value=!1})}function S(){return le(this,null,function*(){if(!n.files||n.files.length===0)return;const K=(yield ve(n.files)).filter(H=>H.success&&H.file).map(H=>{var ae,be;return{src:((ae=H.file)==null?void 0:ae.file_url)||"",alt:((be=H.file)==null?void 0:be.file_name)||""}});K.length>1&&n.editor.chain().focus().setImageGroup({images:K,columns:h.value}).run(),p.value=!1,i.value=!1,r("close")})}function C(){i.value=!1,r("close")}function A(Y){if(w.value.splice(Y,1),n.mode==="new"){const K=w.value.filter(H=>H.type==="file"&&H.file).map(H=>H.file);r("update:files",K)}}function M(){const Y=document.createElement("input");Y.type="file",Y.accept="image/*",Y.multiple=!0,Y.onchange=K=>{const H=K.target.files;H&&$(Array.from(H))},Y.click()}function $(Y){const H=Y.filter(ue=>ue.type.startsWith("image/")).map(I),ae=w.value.filter(ue=>ue.type==="file"&&ue.file).map(ue=>`${ue.file.name}-${ue.file.size}`),be=H.filter(ue=>!ae.includes(`${ue.file.name}-${ue.file.size}`));if(w.value.push(...be),n.mode==="new"){const ue=w.value.filter(pe=>pe.type==="file"&&pe.file).map(pe=>pe.file);r("update:files",ue)}}function R(Y){var H;Y.preventDefault(),Y.stopPropagation();const K=Array.from(((H=Y.dataTransfer)==null?void 0:H.files)||[]);if(K.length)$(K);else if(s.value!==null&&o.value!==null&&s.value!==o.value){const[ae]=w.value.splice(s.value,1);if(w.value.splice(o.value,0,ae),n.mode==="new"){const be=w.value.filter(ue=>ue.type==="file"&&ue.file).map(ue=>ue.file);r("update:files",be)}}a.value=!1,s.value=null,o.value=null}function I(Y){return{type:"file",file:Y,id:`file-${Y.name}-${Y.size}-${Date.now()}`}}function B(Y){return{type:"existing",existing:Y,id:`existing-${Y.src}-${Date.now()}`}}function j(Y){return Y<=4?Y:Y%4===0?4:Y%3===0?3:Y>10?4:3}function z(){var K;const Y=n.editor.extensionManager.extensions.find(H=>H.name==="imageGroup");return(K=Y==null?void 0:Y.options)==null?void 0:K.uploadFunction}function F(Y){const K=URL.createObjectURL(Y);return Pi(()=>{URL.revokeObjectURL(K)}),K}function q(Y){const K=["image/heic","image/heif"],H=[".heic",".heif"],ae=K.includes(Y.type),be=H.some(ue=>{var pe;return(pe=Y.name)==null?void 0:pe.toLowerCase().endsWith(ue)});return!ae&&!be}function N(Y,K){Y.preventDefault(),o.value=K}function O(Y){s.value=Y}function V(){s.value=null,o.value=null}function L(Y,K){o.value===K&&(o.value=null)}function U(Y){return o.value===Y&&s.value!==null&&s.value!==Y}function G(Y){Y.preventDefault(),Y.dataTransfer&&Array.from(Y.dataTransfer.types).includes("Files")&&(a.value=!0)}function X(Y){(Y.target===window||Y.relatedTarget===null)&&(a.value=!1)}const re=J(()=>({gridTemplateColumns:`repeat(${h.value||4}, minmax(0, 1fr))`})),ee=J({get:()=>{var Y;return String((Y=h.value)!=null?Y:4)},set:Y=>{h.value=+Y}}),de=[{label:"2 columns",value:"2"},{label:"3 columns",value:"3"},{label:"4 columns",value:"4"}];function se(Y,K){d.value=Y,c.value=K,ir(()=>{f.value&&(f.value.focus(),f.value.select())})}function te(Y,K){var ue;const[H,ae]=Y.split("-"),be=c.value.trim();H==="existing"?(ue=w.value[K])!=null&&ue.existing&&(w.value[K].existing.alt=be):H==="file"&&w.value[K]&&(w.value[K].alt=be),d.value=null,c.value=""}function ne(){d.value=null,c.value=""}function ce(Y,K){d.value===Y&&te(Y,K)}function ve(Y){return le(this,null,function*(){const K=z();if(!K)throw console.error("uploadFunction not found"),new Error("Upload function not found");p.value=!0,v.value=Y.length,g.value=0,m.value=0,_.value=Array(Y.length).fill(null),x.value=Array(Y.length).fill(null);const H=Y.map((be,ue)=>le(this,null,function*(){try{const pe=yield K(be);return x.value[ue]={success:!0,file:pe},{success:!0,file:pe}}catch(pe){const ye=pe;return _.value[ue]=ye,x.value[ue]={success:!1,error:ye},{success:!1,error:ye}}finally{g.value++,m.value=Math.round(g.value/v.value*100)}}));return yield Promise.all(H)})}return(Y,K)=>(T(),P(_e,null,[b(HK,{modelValue:i.value,"onUpdate:modelValue":K[8]||(K[8]=H=>i.value=H),options:{title:n.mode==="edit"?"Edit Images":"Upload Images",size:"3xl"},onClose:K[9]||(K[9]=H=>Y.$emit("close")),disableOutsideClickToClose:!0},{"body-content":D(()=>[u("div",B$e,[u("div",z$e,[b(Z,{onClick:M},{prefix:D(()=>[b(y(jN),{class:"size-4"})]),default:D(()=>[K[10]||(K[10]=W(" Add images ",-1))]),_:1}),b(Ke,{id:"columns-select",options:de,modelValue:ee.value,"onUpdate:modelValue":[K[0]||(K[0]=H=>ee.value=H),K[1]||(K[1]=H=>h.value=+H)],size:"sm",variant:"subtle",class:"w-28"},null,8,["modelValue"])]),w.value&&w.value.length?(T(),P("div",{key:0,class:"grid gap-px mb-4",style:nt(re.value)},[(T(!0),P(_e,null,we(w.value,(H,ae)=>{var be,ue,pe,ye;return T(),P("div",{key:H.id,class:fe(["relative aspect-square w-full h-full overflow-hidden group bg-surface-white",{"ring-2 ring-primary-400 z-10":U(ae)}]),draggable:!0,onDragstart:Me=>O(ae),onDragover:Me=>N(Me,ae),onDrop:K[6]||(K[6]=Me=>R(Me)),onDragend:V,onDragleave:Me=>L(Me,ae)},[u("button",{type:"button",class:"absolute top-1 right-1 z-10 bg-white/80 hover:bg-white rounded-full p-1 shadow transition-opacity opacity-0 group-hover:opacity-100 focus:opacity-100","aria-label":"Remove image",onClick:dt(Me=>A(ae),["stop"])},[b(y(Eg),{class:"w-4 h-4 text-gray-700"})],8,H$e),H.type==="existing"?(T(),P(_e,{key:0},[u("img",{src:(be=H.existing)==null?void 0:be.src,alt:((ue=H.existing)==null?void 0:ue.alt)||"",class:"object-cover w-full h-full rounded-[2px]"},null,8,q$e),u("div",{class:fe(["absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent rounded-b-[2px] transition-opacity",d.value===`${H.type}-${ae}`?"opacity-100":"opacity-0 group-hover:opacity-100"])},[d.value!==`${H.type}-${ae}`?(T(),P("div",{key:0,class:"p-2 cursor-pointer",onClick:dt(Me=>{var Te;return se(`${H.type}-${ae}`,((Te=H.existing)==null?void 0:Te.alt)||"")},["stop"])},[u("div",{class:"text-white text-xs truncate",title:((pe=H.existing)==null?void 0:pe.alt)||"Click to add caption"},E(((ye=H.existing)==null?void 0:ye.alt)||"Add caption..."),9,G$e)],8,W$e)):(T(),P("div",{key:1,class:"p-2",onClick:K[3]||(K[3]=dt(()=>{},["stop"]))},[xe(u("input",{ref_for:!0,ref:Me=>f.value=Me,"onUpdate:modelValue":K[2]||(K[2]=Me=>c.value=Me),onBlur:Me=>ce(`${H.type}-${ae}`,ae),onKeydown:[Eu(dt(Me=>te(`${H.type}-${ae}`,ae),["prevent"]),["enter"]),Eu(ne,["escape"])],class:"w-full text-xs bg-white/90 text-gray-900 px-1 py-0.5 rounded-sm border-none outline-none",placeholder:"Add caption...",maxlength:"200"},null,40,Y$e),[[Mt,c.value]])]))],2)],64)):H.type==="file"&&H.file?(T(),P(_e,{key:1},[q(H.file)?H.file.type.startsWith("image/")?(T(),P(_e,{key:1},[u("img",{src:F(H.file),class:"object-cover w-full h-full rounded-[2px]",alt:H.alt||""},null,8,Z$e),u("div",{class:fe(["absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent rounded-b-[2px] transition-opacity",d.value===`${H.type}-${ae}`?"opacity-100":"opacity-0 group-hover:opacity-100"])},[d.value!==`${H.type}-${ae}`?(T(),P("div",{key:0,class:"p-2 cursor-pointer",onClick:dt(Me=>se(`${H.type}-${ae}`,H.alt||""),["stop"])},[u("div",{class:"text-white text-xs truncate",title:H.alt||"Click to add caption"},E(H.alt||"Add caption..."),9,J$e)],8,Q$e)):(T(),P("div",{key:1,class:"p-2",onClick:K[5]||(K[5]=dt(()=>{},["stop"]))},[xe(u("input",{ref_for:!0,ref:"captionInput","onUpdate:modelValue":K[4]||(K[4]=Me=>c.value=Me),onBlur:Me=>ce(`${H.type}-${ae}`,ae),onKeydown:[Eu(dt(Me=>te(`${H.type}-${ae}`,ae),["prevent"]),["enter"]),Eu(ne,["escape"])],class:"w-full text-xs bg-white/90 text-gray-900 px-1 py-0.5 rounded border-none outline-none",placeholder:"Add caption...",maxlength:"200"},null,40,eDe),[[Mt,c.value]])]))],2)],64)):ie("",!0):(T(),P("div",K$e,[u("span",{class:"text-p-xs text-ink-gray-4 w-full text-center px-2 mt-1",title:H.file.name},E(H.file.name),9,X$e)]))],64)):ie("",!0)],42,U$e)}),128))],4)):ie("",!0),w.value&&w.value.length?(T(),P("div",tDe," Upload more images by dropping them anywhere in this window. Reorder images by dragging them. Hover over an image to edit caption. ")):(T(),P("div",nDe,[u("div",{class:"w-full flex flex-1 flex-col items-center justify-center border border-outline-gray-2 rounded-lg bg-surface-gray-1 h-full cursor-pointer transition hover:border-primary-400 hover:bg-primary-50 text-center",onClick:M,onDragover:K[7]||(K[7]=dt(()=>{},["prevent"])),onDrop:dt(R,["prevent"])},[u("div",rDe,[b(y(jN),{class:"size-6"})]),K[11]||(K[11]=u("div",{class:"text-ink-gray-5 text-sm font-medium"}," Drag & drop images here or click to select ",-1))],32)])),p.value?(T(),P("div",iDe,[u("div",aDe," Uploading: "+E(g.value)+"/"+E(v.value),1),u("div",sDe,[u("div",{class:"bg-surface-gray-5 h-2 transition-all",style:nt({width:m.value+"%"})},null,4)]),_.value&&_.value.some(H=>H)?(T(),P("div",oDe," Some files failed to upload. ")):ie("",!0)])):ie("",!0)])]),actions:D(()=>[u("div",lDe,[b(Z,{variant:"ghost",disabled:p.value,onClick:C},{default:D(()=>[...K[12]||(K[12]=[W(" Cancel ",-1)])]),_:1},8,["disabled"]),n.mode==="edit"?(T(),he(Z,{key:0,variant:"solid",loading:p.value,onClick:k},{default:D(()=>[...K[13]||(K[13]=[W(" Save ",-1)])]),_:1},8,["loading"])):ie("",!0),n.mode==="new"?(T(),he(Z,{key:1,variant:"solid",loading:p.value,onClick:S},{default:D(()=>[...K[14]||(K[14]=[W(" Upload ",-1)])]),_:1},8,["loading"])):ie("",!0)])]),_:1},8,["modelValue","options"]),(T(),he(ID,{to:"body"},[b(UG,{name:"fade","enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:D(()=>[a.value?(T(),P("div",uDe,[...K[15]||(K[15]=[u("div",{class:"text-ink-gray-1 text-base font-medium"}," Drop images anywhere ",-1)])])):ie("",!0)]),_:1})]))],64))}}),cDe={class:"w-full"},fDe={key:0,class:"flex items-center mb-2 gap-2"},pDe=["onClick"],hDe=["src","alt","onClick"],mDe=["src","alt"],gDe={key:3,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent rounded-b-[2px] opacity-0 group-hover:opacity-100 transition-opacity"},vDe={class:"p-2"},yDe=["title"],bDe=Ze({__name:"ImageGroupNodeView",props:{decorations:{},selected:{type:Boolean},updateAttributes:{type:Function},deleteNode:{type:Function},node:{},view:{},getPos:{type:Function},innerDecorations:{},editor:{},extension:{},HTMLAttributes:{}},setup(t){const e=t,n=J(()=>e.node.attrs.columns||4),r=J(()=>e.node.content.content||[]),i=J(()=>({gridTemplateColumns:`repeat(${n.value}, minmax(0, 1fr))`})),a=Q(e.editor.isEditable),s=[{label:"2 columns",value:"2"},{label:"3 columns",value:"3"},{label:"4 columns",value:"4"}],o=J({get:()=>String(n.value),set:w=>e.updateAttributes({columns:+w})}),l=Q(!1),d=Q(0),c=J(()=>r.value.map(w=>({src:w.attrs.src,alt:w.attrs.alt||""}))),f=Q(!1),p=Q([]),h=J(()=>r.value.map(w=>({src:w.attrs.src,alt:w.attrs.alt||""})));bt(()=>{const w=()=>{a.value=e.editor.isEditable};e.editor.on("update",w),Pi(()=>{e.editor.off("update",w)})});function m(){p.value=[],f.value=!0}function g(){f.value=!1,p.value=[]}function v(w){return le(this,null,function*(){e.editor.commands.command(({tr:k,state:S})=>{const C=e.getPos();if(typeof C=="number"){const A=S.doc.nodeAt(C);if(A&&A.type.name==="imageGroup"){const M=w.images.map(I=>S.schema.nodes.image.create({src:I.src,alt:I.alt})),$=je(me({},A.attrs),{columns:w.columns}),R=A.type.create($,M);return k.replaceWith(C,C+A.nodeSize,R),!0}}return!1}),f.value=!1})}function _(w){e.editor.isEditable||(d.value=w,l.value=!0)}function x(w){const k=r.value.slice();k.splice(w,1),k.length===0?e.editor.commands.deleteNode("imageGroup"):(e.updateAttributes({}),e.editor.commands.command(({tr:S,state:C})=>{const A=e.getPos();if(typeof A=="number"){const M=C.doc.nodeAt(A);if(M&&M.type.name==="imageGroup"){const $=k.map(R=>C.schema.nodes.image.create(R.attrs));return S.replaceWith(A+1,A+1+M.content.size,$),!0}}return!1}))}return(w,k)=>(T(),he(y(wC),null,{default:D(()=>[u("div",cDe,[a.value?(T(),P("div",fDe,[b(Z,{onClick:m},{prefix:D(()=>[b(y(N$e),{class:"size-4"})]),default:D(()=>[k[3]||(k[3]=W(" Edit ",-1))]),_:1}),b(Ke,{options:s,modelValue:o.value,"onUpdate:modelValue":k[0]||(k[0]=S=>o.value=S),size:"sm",variant:"subtle",class:"w-28"},null,8,["modelValue"])])):ie("",!0),u("div",{class:"grid gap-px",style:nt(i.value)},[(T(!0),P(_e,null,we(r.value,(S,C)=>(T(),P("div",{key:S.attrs.src+C,class:"relative aspect-square w-full h-full overflow-hidden bg-surface-white group"},[a.value?(T(),P("button",{key:0,type:"button",class:"absolute top-1 right-1 z-10 bg-white/80 hover:bg-white rounded-full p-1 shadow transition-opacity opacity-0 group-hover:opacity-100 focus:opacity-100","aria-label":"Remove image",onClick:dt(A=>x(C),["stop"])},[b(y(Eg),{class:"w-4 h-4 text-gray-700"})],8,pDe)):ie("",!0),a.value?(T(),P("img",{key:2,src:S.attrs.src,alt:S.attrs.alt||"",class:"object-cover w-full h-full not-prose rounded-[2px]"},null,8,mDe)):(T(),P("img",{key:1,src:S.attrs.src,alt:S.attrs.alt||"",class:"object-cover w-full h-full not-prose cursor-pointer rounded-[2px]",onClick:A=>_(C)},null,8,hDe)),S.attrs.alt?(T(),P("div",gDe,[u("div",vDe,[u("div",{class:"text-white text-xs truncate",title:S.attrs.alt},E(S.attrs.alt),9,yDe)])])):ie("",!0)]))),128))],4),l.value?(T(),he(CQ,{key:1,show:l.value,"onUpdate:show":k[1]||(k[1]=S=>l.value=S),images:c.value,initialIndex:d.value},null,8,["show","images","initialIndex"])):ie("",!0),f.value?(T(),he(dDe,{key:2,modelValue:f.value,"onUpdate:modelValue":k[2]||(k[2]=S=>f.value=S),files:p.value,editor:e.editor,mode:"edit",existingImages:h.value,initialColumns:n.value,onClose:g,onSave:v},null,8,["modelValue","files","editor","existingImages","initialColumns"])):ie("",!0),Ye(w.$slots,"default")])]),_:3}))}}),_De=Er.create({name:"imageGroup",group:"block",content:"image+",selectable:!0,draggable:!0,isolating:!0,addOptions(){return{uploadFunction:null,HTMLAttributes:{}}},addAttributes(){return{columns:{default:4}}},parseHTML(){return[{tag:'div[data-type="image-group"]',getAttrs:t=>{if(typeof t=="string")return{};const e=t;return{columns:e.getAttribute("data-columns")?Number(e.getAttribute("data-columns")):4}}}]},renderHTML({HTMLAttributes:t,node:e}){return["div",In({"data-type":"image-group","data-columns":e.attrs.columns},this.options.HTMLAttributes,t),0]},addNodeView(){return gb(bDe)},addCommands(){return{setImageGroup:t=>({commands:e})=>e.insertContent({type:this.name,attrs:{columns:t.columns||4},content:t.images.map(n=>({type:"image",attrs:n}))})}}});function xDe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",s="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},d={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},c={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(d,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},h=e.optional(i)+t.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],k={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},S={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},C=[S,f,o,n,t.C_BLOCK_COMMENT_MODE,c,d],A={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:k,contains:C.concat([{begin:/\(/,end:/\)/,keywords:k,contains:C.concat(["self"]),relevance:0}]),relevance:0},M={className:"function",begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:k,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:k,relevance:0},{begin:h,returnBegin:!0,contains:[p],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[d,c]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:k,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,d,c,o,{begin:/\(/,end:/\)/,keywords:k,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,d,c,o]}]},o,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:k,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(A,M,S,C,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:k,contains:["self",o]},{begin:t.IDENT_RE+"::",keywords:k},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function wDe(t){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=xDe(t),r=n.keywords;return r.type=[...r.type,...e.type],r.literal=[...r.literal,...e.literal],r.built_in=[...r.built_in,...e.built_in],r._hints=e._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function kDe(t){const e=t.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},a=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),s={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},o={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,i]};i.contains.push(o);const l={match:/\\"/},d={className:"string",begin:/'/,end:/'/},c={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},p=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],h=t.SHEBANG({binary:`(${p.join("|")})`,relevance:10}),m={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},g=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],v=["true","false"],_={match:/(\/[a-z._-]+)+/},x=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],w=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],k=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],S=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:g,literal:v,built_in:[...x,...w,"set","shopt",...k,...S]},contains:[h,t.SHEBANG(),m,f,a,s,_,o,l,d,c,n]}}function SDe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",s="("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},d={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},c={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(d,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},h=e.optional(i)+t.IDENT_RE+"\\s*\\(",v={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},_=[f,o,n,t.C_BLOCK_COMMENT_MODE,c,d],x={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:_.concat([{begin:/\(/,end:/\)/,keywords:v,contains:_.concat(["self"]),relevance:0}]),relevance:0},w={begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:h,returnBegin:!0,contains:[t.inherit(p,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,d,c,o,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,d,c,o]}]},o,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:v,disableAutodetect:!0,illegal:"</",contains:[].concat(x,w,_,[f,{begin:t.IDENT_RE+"::",keywords:v},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:f,strings:d,keywords:v}}}function CDe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",s="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},d={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},c={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(d,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},h=e.optional(i)+t.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],k={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},S={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},C=[S,f,o,n,t.C_BLOCK_COMMENT_MODE,c,d],A={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:k,contains:C.concat([{begin:/\(/,end:/\)/,keywords:k,contains:C.concat(["self"]),relevance:0}]),relevance:0},M={className:"function",begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:k,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:k,relevance:0},{begin:h,returnBegin:!0,contains:[p],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[d,c]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:k,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,d,c,o,{begin:/\(/,end:/\)/,keywords:k,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,d,c,o]}]},o,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:k,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(A,M,S,C,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:k,contains:["self",o]},{begin:t.IDENT_RE+"::",keywords:k},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function ADe(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],a=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],s={keyword:i.concat(a),built_in:e,literal:r},o=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},d={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},c={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=t.inherit(c,{illegal:/\n/}),p={className:"subst",begin:/\{/,end:/\}/,keywords:s},h=t.inherit(p,{illegal:/\n/}),m={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,h]},g={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},p]},v=t.inherit(g,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]});p.contains=[g,m,c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.C_BLOCK_COMMENT_MODE],h.contains=[v,m,f,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const _={variants:[d,g,m,c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},x={begin:"<",end:">",contains:[{beginKeywords:"in out"},o]},w=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",k={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:s,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},_,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},o,x,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,x,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+w+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:s,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,x],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,relevance:0,contains:[_,l,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},k]}}const TDe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),EDe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MDe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],$De=[...EDe,...MDe],DDe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),RDe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),PDe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),IDe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function ODe(t){const e=t.regex,n=TDe(t),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",a=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",o=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+RDe.join("|")+")"},{begin:":(:)?("+PDe.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+IDe.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:a},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:DDe.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+$De.join("|")+")\\b"}]}}function LDe(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function VDe(t){const a={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:a,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:a,illegal:/["']/}]}]}}function NDe(t){const e=t.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(n,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function jDe(t){const e=t.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},r=t.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},a={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},o={begin:/\[/,end:/\]/,contains:[r,a,i,s,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,d=/"(\\"|[^"])*"/,c=/'[^']*'/,f=e.either(l,d,c),p=e.concat(f,"(\\s*\\.\\s*",f,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:p,className:"attr",starts:{end:/$/,contains:[r,o,a,i,s,n]}}]}}var mm="[0-9](_*[0-9])*",__=`\\.(${mm})`,x_="[0-9a-fA-F](_*[0-9a-fA-F])*",FN={className:"number",variants:[{begin:`(\\b(${mm})((${__})|\\.)?|(${__}))[eE][+-]?(${mm})[fFdD]?\\b`},{begin:`\\b(${mm})((${__})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${__})[fFdD]?\\b`},{begin:`\\b(${mm})[fFdD]\\b`},{begin:`\\b0[xX]((${x_})\\.?|(${x_})?\\.(${x_}))[pP][+-]?(${mm})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${x_})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function rJ(t,e,n){return n===-1?"":t.replace(e,r=>rJ(t,e,n-1))}function FDe(t){const e=t.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+rJ("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},d={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},c={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[t.BACKSLASH_ESCAPE]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[c,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",t.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,FN,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},FN,d]}}const BN="[A-Za-z$_][0-9A-Za-z$_]*",BDe=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],zDe=["true","false","null","undefined","NaN","Infinity"],iJ=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],aJ=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],sJ=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],UDe=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],HDe=[].concat(sJ,iJ,aJ);function qDe(t){const e=t.regex,n=(O,{after:V})=>{const L="</"+O[0].slice(1);return O.input.indexOf(L,V)!==-1},r=BN,i={begin:"<>",end:"</>"},a=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(O,V)=>{const L=O[0].length+O.index,U=O.input[L];if(U==="<"||U===","){V.ignoreMatch();return}U===">"&&(n(O,{after:L})||V.ignoreMatch());let G;const X=O.input.substring(L);if(G=X.match(/^\s*=/)){V.ignoreMatch();return}if((G=X.match(/^\s+extends\s+/))&&G.index===0){V.ignoreMatch();return}}},o={$pattern:BN,keyword:BDe,literal:zDe,built_in:HDe,"variable.language":UDe},l="[0-9](_?[0-9])*",d=`\\.(${l})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${c})((${d})|\\.)?|(${d}))[eE][+-]?(${l})\\b`},{begin:`\\b(${c})\\b((${d})\\b|\\.)?|(${d})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},x={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},w=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,v,{match:/\$\d+/},f];p.contains=w.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(w)});const k=[].concat(x,p.contains),S=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(k)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S},A={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},M={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...iJ,...aJ]}},$={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},R={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},I={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function B(O){return e.concat("(?!",O.join("|"),")")}const j={match:e.concat(/\b/,B([...sJ,"super","import"].map(O=>`${O}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},z={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},F={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},q="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",N={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(q)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:S,CLASS_REFERENCE:M},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),$,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,v,x,{match:/\$\d+/},f,M,{scope:"attr",match:r+e.lookahead(":"),relevance:0},N,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[x,t.REGEXP_MODE,{className:"function",begin:q,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:a},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},R,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},j,I,A,F,{match:/\$[(.]/}]}}function WDe(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],i={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,i,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var gm="[0-9](_*[0-9])*",w_=`\\.(${gm})`,k_="[0-9a-fA-F](_*[0-9a-fA-F])*",GDe={className:"number",variants:[{begin:`(\\b(${gm})((${w_})|\\.)?|(${w_}))[eE][+-]?(${gm})[fFdD]?\\b`},{begin:`\\b(${gm})((${w_})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${w_})[fFdD]?\\b`},{begin:`\\b(${gm})[fFdD]\\b`},{begin:`\\b0[xX]((${k_})\\.?|(${k_})?\\.(${k_}))[pP][+-]?(${gm})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${k_})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function YDe(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},a={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},s={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[a,i]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,a,i]}]};i.contains.push(s);const o={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(s,{className:"string"}),"self"]}]},d=GDe,c=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},p=f;return p.variants[1].contains=[f],f.variants[1].contains=[p],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,c,n,r,o,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,t.C_LINE_COMMENT_MODE,c],relevance:0},t.C_LINE_COMMENT_MODE,c,o,l,s,t.C_NUMBER_MODE]},c]},{begin:[/class|interface|trait/,/\s+/,t.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},o,l]},s,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},d]}}const KDe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),XDe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],ZDe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],QDe=[...XDe,...ZDe],JDe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),oJ=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),lJ=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),eRe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),tRe=oJ.concat(lJ).sort().reverse();function nRe(t){const e=KDe(t),n=tRe,r="and or not only",i="[\\w-]+",a="("+i+"|@\\{"+i+"\\})",s=[],o=[],l=function(w){return{className:"string",begin:"~?"+w+".*?"+w}},d=function(w,k,S){return{className:w,begin:k,relevance:S}},c={$pattern:/[a-z-]+/,keyword:r,attribute:JDe.join(" ")},f={begin:"\\(",end:"\\)",contains:o,keywords:c,relevance:0};o.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,l("'"),l('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,f,d("variable","@@?"+i,10),d("variable","@\\{"+i+"\\}"),d("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const p=o.concat({begin:/\{/,end:/\}/,contains:s}),h={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(o)},m={begin:a+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+eRe.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:o}}]},g={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:c,returnEnd:!0,contains:o,relevance:0}},v={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:p}},_={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:a,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,h,d("keyword","all\\b"),d("variable","@\\{"+i+"\\}"),{begin:"\\b("+QDe.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,d("selector-tag",a,0),d("selector-id","#"+a),d("selector-class","\\."+a,0),d("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+oJ.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+lJ.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:p},{begin:"!important"},e.FUNCTION_DISPATCH]},x={begin:i+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[_]};return s.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,g,v,x,m,_,h,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:s}}function rRe(t){const e="\\[=*\\[",n="\\]=*\\]",r={begin:e,end:n,contains:["self"]},i=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:n,contains:[r],relevance:5}])}}function iRe(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,n]},i={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},a={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},s={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,n,r,i,a,s]}}function aRe(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},a={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},o=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,o,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},d={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},c={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=t.inherit(d,{contains:[]}),p=t.inherit(c,{contains:[]});d.contains.push(p),c.contains.push(f);let h=[n,l];return[d,c,f,p].forEach(_=>{_.contains=_.contains.concat(h)}),h=h.concat(d,c),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},n,a,d,c,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},i,r,l,s,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function sRe(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,o={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:o,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}function oRe(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:n.join(" ")},a={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},s={begin:/->\{/,end:/\}/},o={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[o]},d={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},c=[t.BACKSLASH_ESCAPE,a,l],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],p=(g,v,_="\\1")=>{const x=_==="\\1"?_:e.concat(_,v);return e.concat(e.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,x,/(?:\\.|[^\\\/])*?/,_,r)},h=(g,v,_)=>e.concat(e.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,_,r),m=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:c,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},d,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:p("s|tr|y",e.either(...f,{capture:!0}))},{begin:p("s|tr|y","\\(","\\)")},{begin:p("s|tr|y","\\[","\\]")},{begin:p("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:h("(?:m|qr)?",/\//,/\//)},{begin:h("m|qr",e.either(...f,{capture:!0}),/\1/)},{begin:h("m|qr",/\(/,/\)/)},{begin:h("m|qr",/\[/,/\]/)},{begin:h("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,o]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,o,d]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return a.contains=m,s.contains=m,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:m}}function lRe(t){const e=t.regex,n=/(?![A-Za-z0-9])(?![$])/,r=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),i=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),a=e.concat(/[A-Z]+/,n),s={scope:"variable",match:"\\$+"+r},o={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},d=t.inherit(t.APOS_STRING_MODE,{illegal:null}),c=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(l)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(z,F)=>{F.data._beginMatch=z[1]||z[2]},"on:end":(z,F)=>{F.data._beginMatch!==z[1]&&F.ignoreMatch()}},p=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),h=`[ 	
]`,m={scope:"string",variants:[c,d,f,p]},g={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},v=["false","null","true"],_=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],x=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],k={keyword:_,literal:(z=>{const F=[];return z.forEach(q=>{F.push(q),q.toLowerCase()===q?F.push(q.toUpperCase()):F.push(q.toLowerCase())}),F})(v),built_in:x},S=z=>z.map(F=>F.replace(/\|\d+$/,"")),C={variants:[{match:[/new/,e.concat(h,"+"),e.concat("(?!",S(x).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},A=e.concat(r,"\\b(?!\\()"),M={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),A],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,e.concat(/::/,e.lookahead(/(?!class\b)/)),A],scope:{1:"title.class",3:"variable.constant"}},{match:[i,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},$={scope:"attr",match:e.concat(r,e.lookahead(":"),e.lookahead(/(?!::)/))},R={relevance:0,begin:/\(/,end:/\)/,keywords:k,contains:[$,s,M,t.C_BLOCK_COMMENT_MODE,m,g,C]},I={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",S(_).join("\\b|"),"|",S(x).join("\\b|"),"\\b)"),r,e.concat(h,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[R]};R.contains.push(I);const B=[$,M,t.C_BLOCK_COMMENT_MODE,m,g,C],j={begin:e.concat(/#\[\s*\\?/,e.either(i,a)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:v,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:v,keyword:["new","array"]},contains:["self",...B]},...B,{scope:"meta",variants:[{match:i},{match:a}]}]};return{case_insensitive:!1,keywords:k,contains:[j,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},o,{scope:"variable.language",match:/\$this\b/},s,I,M,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},C,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:k,contains:["self",j,s,M,t.C_BLOCK_COMMENT_MODE,m,g]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},m,g]}}function uRe(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function dRe(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function cRe(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],o={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},d={className:"subst",begin:/\{/,end:/\}/,keywords:o,illegal:/#/},c={begin:/\{\{/,relevance:0},f={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l,c,d]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l,c,d]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,c,d]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,c,d]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},p="[0-9](_?[0-9])*",h=`(\\b(${p}))?\\.(${p})|\\b(${p})\\.`,m=`\\b|${r.join("|")}`,g={className:"number",relevance:0,variants:[{begin:`(\\b(${p})|(${h}))[eE][+-]?(${p})[jJ]?(?=${m})`},{begin:`(${h})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${m})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${m})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${m})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${m})`},{begin:`\\b(${p})[jJ](?=${m})`}]},v={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:o,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},_={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:["self",l,g,f,t.HASH_COMMENT_MODE]}]};return d.contains=[f,g,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:o,illegal:/(<\/|\?)|=>/,contains:[l,g,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,v,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[_]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[g,_,f]}]}}function fRe(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function pRe(t){const e=t.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,a=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[a,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:a},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function hRe(t){const e=t.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=e.concat(r,/(::\w+)*/),s={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},o={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},d=[t.COMMENT("#","$",{contains:[o]}),t.COMMENT("^=begin","^=end",{contains:[o],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],c={className:"subst",begin:/#\{/,end:/\}/,keywords:s},f={className:"string",contains:[t.BACKSLASH_ESCAPE,c],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,c]})]}]},p="[1-9](_?[0-9])*|0",h="[0-9](_?[0-9])*",m={className:"number",relevance:0,variants:[{begin:`\\b(${p})(\\.(${h}))?([eE][+-]?(${h})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},g={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:s}]},C=[f,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:s},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:s},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[g]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:n}],relevance:0},m,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:s},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,c],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,d),relevance:0}].concat(l,d);c.contains=C,g.contains=C;const R=[{begin:/^\s*=>/,starts:{end:"$",contains:C}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:s,contains:C}}];return d.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:s,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(R).concat(d).concat(C)}}function mRe(t){const e=t.regex,n=/(r#)?/,r=e.concat(n,t.UNDERSCORE_IDENT_RE),i=e.concat(n,t.IDENT_RE),a={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,e.lookahead(/\s*\(/))},s="([ui](8|16|32|64|128|size)|f(32|64))?",o=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],d=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],c=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:c,keyword:o,literal:l,built_in:d},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+s},{begin:"\\b0o([0-7_]+)"+s},{begin:"\\b0x([A-Fa-f0-9_]+)"+s},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+s}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:d,type:c}},{className:"punctuation",begin:"->"},a]}}const gRe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),vRe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],yRe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],bRe=[...vRe,...yRe],_Re=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),xRe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),wRe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),kRe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function SRe(t){const e=gRe(t),n=wRe,r=xRe,i="@[a-z-]+",a="and or not only",o={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+bRe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},o,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+kRe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,o,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:_Re.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},o,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function CRe(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function ARe(t){const e=t.regex,n=t.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},a=["true","false","unknown"],s=["double precision","large object","with timezone","without timezone"],o=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],d=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],c=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],p=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],h=c,m=[...d,...l].filter(S=>!c.includes(S)),g={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},v={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},_={match:e.concat(/\b/,e.either(...h),/\s*\(/),relevance:0,keywords:{built_in:h}};function x(S){return e.concat(/\b/,e.either(...S.map(C=>C.replace(/\s+/,"\\s+"))),/\b/)}const w={scope:"keyword",match:x(p),relevance:0};function k(S,{exceptions:C,when:A}={}){const M=A;return C=C||[],S.map($=>$.match(/\|\d+$/)||C.includes($)?$:M($)?`${$}|0`:$)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:k(m,{when:S=>S.length<3}),literal:a,type:o,built_in:f},contains:[{scope:"type",match:x(s)},w,_,g,r,i,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,v]}}function uJ(t){return t?typeof t=="string"?t:t.source:null}function mv(t){return Jn("(?=",t,")")}function Jn(...t){return t.map(n=>uJ(n)).join("")}function TRe(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function da(...t){return"("+(TRe(t).capture?"":"?:")+t.map(r=>uJ(r)).join("|")+")"}const TP=t=>Jn(/\b/,t,/\w$/.test(t)?/\b/:/\B/),ERe=["Protocol","Type"].map(TP),zN=["init","self"].map(TP),MRe=["Any","Self"],LT=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],UN=["false","nil","true"],$Re=["assignment","associativity","higherThan","left","lowerThan","none","right"],DRe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],HN=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],dJ=da(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),cJ=da(dJ,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),VT=Jn(dJ,cJ,"*"),fJ=da(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),uk=da(fJ,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Jo=Jn(fJ,uk,"*"),S_=Jn(/[A-Z]/,uk,"*"),RRe=["attached","autoclosure",Jn(/convention\(/,da("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Jn(/objc\(/,Jo,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],PRe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function IRe(t){const e={match:/\s+/,relevance:0},n=t.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[t.C_LINE_COMMENT_MODE,n],i={match:[/\./,da(...ERe,...zN)],className:{2:"keyword"}},a={match:Jn(/\./,da(...LT)),relevance:0},s=LT.filter(be=>typeof be=="string").concat(["_|0"]),o=LT.filter(be=>typeof be!="string").concat(MRe).map(TP),l={variants:[{className:"keyword",match:da(...o,...zN)}]},d={$pattern:da(/\b\w+/,/#\w+/),keyword:s.concat(DRe),literal:UN},c=[i,a,l],f={match:Jn(/\./,da(...HN)),relevance:0},p={className:"built_in",match:Jn(/\b/,da(...HN),/(?=\()/)},h=[f,p],m={match:/->/,relevance:0},g={className:"operator",relevance:0,variants:[{match:VT},{match:`\\.(\\.|${cJ})+`}]},v=[m,g],_="([0-9]_*)+",x="([0-9a-fA-F]_*)+",w={className:"number",relevance:0,variants:[{match:`\\b(${_})(\\.(${_}))?([eE][+-]?(${_}))?\\b`},{match:`\\b0x(${x})(\\.(${x}))?([pP][+-]?(${_}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},k=(be="")=>({className:"subst",variants:[{match:Jn(/\\/,be,/[0\\tnr"']/)},{match:Jn(/\\/,be,/u\{[0-9a-fA-F]{1,8}\}/)}]}),S=(be="")=>({className:"subst",match:Jn(/\\/,be,/[\t ]*(?:[\r\n]|\r\n)/)}),C=(be="")=>({className:"subst",label:"interpol",begin:Jn(/\\/,be,/\(/),end:/\)/}),A=(be="")=>({begin:Jn(be,/"""/),end:Jn(/"""/,be),contains:[k(be),S(be),C(be)]}),M=(be="")=>({begin:Jn(be,/"/),end:Jn(/"/,be),contains:[k(be),C(be)]}),$={className:"string",variants:[A(),A("#"),A("##"),A("###"),M(),M("#"),M("##"),M("###")]},R=[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}],I={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:R},B=be=>{const ue=Jn(be,/\//),pe=Jn(/\//,be);return{begin:ue,end:pe,contains:[...R,{scope:"comment",begin:`#(?!.*${pe})`,end:/$/}]}},j={scope:"regexp",variants:[B("###"),B("##"),B("#"),I]},z={match:Jn(/`/,Jo,/`/)},F={className:"variable",match:/\$\d+/},q={className:"variable",match:`\\$${uk}+`},N=[z,F,q],O={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:PRe,contains:[...v,w,$]}]}},V={scope:"keyword",match:Jn(/@/,da(...RRe),mv(da(/\(/,/\s+/)))},L={scope:"meta",match:Jn(/@/,Jo)},U=[O,V,L],G={match:mv(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Jn(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,uk,"+")},{className:"type",match:S_,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Jn(/\s+&\s+/,mv(S_)),relevance:0}]},X={begin:/</,end:/>/,keywords:d,contains:[...r,...c,...U,m,G]};G.contains.push(X);const re={match:Jn(Jo,/\s*:/),keywords:"_|0",relevance:0},ee={begin:/\(/,end:/\)/,relevance:0,keywords:d,contains:["self",re,...r,j,...c,...h,...v,w,$,...N,...U,G]},de={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,G]},se={begin:da(mv(Jn(Jo,/\s*:/)),mv(Jn(Jo,/\s+/,Jo,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Jo}]},te={begin:/\(/,end:/\)/,keywords:d,contains:[se,...r,...c,...v,w,$,...U,G,ee],endsParent:!0,illegal:/["']/},ne={match:[/(func|macro)/,/\s+/,da(z.match,Jo,VT)],className:{1:"keyword",3:"title.function"},contains:[de,te,e],illegal:[/\[/,/%/]},ce={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[de,te,e],illegal:/\[|%/},ve={match:[/operator/,/\s+/,VT],className:{1:"keyword",3:"title"}},Y={begin:[/precedencegroup/,/\s+/,S_],className:{1:"keyword",3:"title"},contains:[G],keywords:[...$Re,...UN],end:/}/},K={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},H={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},ae={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Jo,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:d,contains:[de,...c,{begin:/:/,end:/\{/,keywords:d,contains:[{scope:"title.class.inherited",match:S_},...c],relevance:0}]};for(const be of $.variants){const ue=be.contains.find(ye=>ye.label==="interpol");ue.keywords=d;const pe=[...c,...h,...v,w,$,...N];ue.contains=[...pe,{begin:/\(/,end:/\)/,contains:["self",...pe]}]}return{name:"Swift",keywords:d,contains:[...r,ne,ce,K,H,ae,ve,Y,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},j,...c,...h,...v,w,$,...N,...U,G,ee]}}const dk="[A-Za-z$_][0-9A-Za-z$_]*",pJ=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],hJ=["true","false","null","undefined","NaN","Infinity"],mJ=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],gJ=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],vJ=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],yJ=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],bJ=[].concat(vJ,mJ,gJ);function ORe(t){const e=t.regex,n=(O,{after:V})=>{const L="</"+O[0].slice(1);return O.input.indexOf(L,V)!==-1},r=dk,i={begin:"<>",end:"</>"},a=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(O,V)=>{const L=O[0].length+O.index,U=O.input[L];if(U==="<"||U===","){V.ignoreMatch();return}U===">"&&(n(O,{after:L})||V.ignoreMatch());let G;const X=O.input.substring(L);if(G=X.match(/^\s*=/)){V.ignoreMatch();return}if((G=X.match(/^\s+extends\s+/))&&G.index===0){V.ignoreMatch();return}}},o={$pattern:dk,keyword:pJ,literal:hJ,built_in:bJ,"variable.language":yJ},l="[0-9](_?[0-9])*",d=`\\.(${l})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${c})((${d})|\\.)?|(${d}))[eE][+-]?(${l})\\b`},{begin:`\\b(${c})\\b((${d})\\b|\\.)?|(${d})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},x={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},w=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,v,{match:/\$\d+/},f];p.contains=w.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(w)});const k=[].concat(x,p.contains),S=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(k)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S},A={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},M={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...mJ,...gJ]}},$={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},R={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},I={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function B(O){return e.concat("(?!",O.join("|"),")")}const j={match:e.concat(/\b/,B([...vJ,"super","import"].map(O=>`${O}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},z={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},F={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},q="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",N={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(q)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:S,CLASS_REFERENCE:M},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),$,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,v,x,{match:/\$\d+/},f,M,{scope:"attr",match:r+e.lookahead(":"),relevance:0},N,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[x,t.REGEXP_MODE,{className:"function",begin:q,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:a},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},R,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},j,I,A,F,{match:/\$[(.]/}]}}function LRe(t){const e=t.regex,n=ORe(t),r=dk,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],a={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[n.exports.CLASS_REFERENCE]},o={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],d={$pattern:dk,keyword:pJ.concat(l),literal:hJ,built_in:bJ.concat(i),"variable.language":yJ},c={className:"meta",begin:"@"+r},f=(g,v,_)=>{const x=g.contains.findIndex(w=>w.label===v);if(x===-1)throw new Error("can not find mode to replace");g.contains.splice(x,1,_)};Object.assign(n.keywords,d),n.exports.PARAMS_CONTAINS.push(c);const p=n.contains.find(g=>g.scope==="attr"),h=Object.assign({},p,{match:e.concat(r,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,p,h]),n.contains=n.contains.concat([c,a,s,h]),f(n,"shebang",t.SHEBANG()),f(n,"use_strict",o);const m=n.contains.find(g=>g.label==="func.def");return m.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function VRe(t){const e=t.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,a=/\d{4}-\d{1,2}-\d{1,2}/,s=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,o=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:e.concat(/# */,e.either(a,i),/ *#/)},{begin:e.concat(/# */,o,/ *#/)},{begin:e.concat(/# */,s,/ *#/)},{begin:e.concat(/# */,e.either(a,i),/ +/,e.either(s,o),/ *#/)}]},d={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},c={className:"label",begin:/^\w+:/},f=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),p=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,d,c,f,p,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[p]}]}}function NRe(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const n=t.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},a={className:"variable",begin:/\$[\w_]+/},s={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},o={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},d={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},a,s,i,t.QUOTE_STRING_MODE,l,d,o]}}function jRe(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},a={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=t.inherit(a,{begin:/\(/,end:/\)/}),o=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),d={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[a,l,o,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[a,s,l,o]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[d],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[d],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:d}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function FRe(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},a={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},s={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,i]},o=t.inherit(s,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),p={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},h={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},m={begin:/\{/,end:/\}/,contains:[h],illegal:"\\n",relevance:0},g={begin:"\\[",end:"\\]",contains:[h],illegal:"\\n",relevance:0},v=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},p,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},m,g,a,s],_=[...v];return _.pop(),_.push(o),h.contains=_,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:v}}const BRe={arduino:wDe,bash:kDe,c:SDe,cpp:CDe,csharp:ADe,css:ODe,diff:LDe,go:VDe,graphql:NDe,ini:jDe,java:FDe,javascript:qDe,json:WDe,kotlin:YDe,less:nRe,lua:rRe,makefile:iRe,markdown:aRe,objectivec:sRe,perl:oRe,php:lRe,"php-template":uRe,plaintext:dRe,python:cRe,"python-repl":fRe,r:pRe,ruby:hRe,rust:mRe,scss:SRe,shell:CRe,sql:ARe,swift:IRe,typescript:LRe,vbnet:VRe,wasm:NRe,xml:jRe,yaml:FRe};function _J(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],r=typeof n;(r==="object"||r==="function")&&!Object.isFrozen(n)&&_J(n)}),t}let qN=class{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function xJ(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Qd(t,...e){const n=Object.create(null);for(const r in t)n[r]=t[r];return e.forEach(function(r){for(const i in r)n[i]=r[i]}),n}const zRe="</span>",WN=t=>!!t.scope,URe=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((r,i)=>`${r}${"_".repeat(i+1)}`)].join(" ")}return`${e}${t}`};let HRe=class{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=xJ(e)}openNode(e){if(!WN(e))return;const n=URe(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){WN(e)&&(this.buffer+=zRe)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}};const GN=(t={})=>{const e={children:[]};return Object.assign(e,t),e};let qRe=class wJ{constructor(){this.rootNode=GN(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=GN({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(r=>this._walk(e,r)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{wJ._collapse(n)}))}},WRe=class extends qRe{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const r=e.root;n&&(r.scope=`language:${n}`),this.add(r)}toHTML(){return new HRe(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}};function r1(t){return t?typeof t=="string"?t:t.source:null}function kJ(t){return lh("(?=",t,")")}function GRe(t){return lh("(?:",t,")*")}function YRe(t){return lh("(?:",t,")?")}function lh(...t){return t.map(n=>r1(n)).join("")}function KRe(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function EP(...t){return"("+(KRe(t).capture?"":"?:")+t.map(r=>r1(r)).join("|")+")"}function SJ(t){return new RegExp(t.toString()+"|").exec("").length-1}function XRe(t,e){const n=t&&t.exec(e);return n&&n.index===0}const ZRe=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function MP(t,{joinWith:e}){let n=0;return t.map(r=>{n+=1;const i=n;let a=r1(r),s="";for(;a.length>0;){const o=ZRe.exec(a);if(!o){s+=a;break}s+=a.substring(0,o.index),a=a.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?s+="\\"+String(Number(o[1])+i):(s+=o[0],o[0]==="("&&n++)}return s}).map(r=>`(${r})`).join(e)}const QRe=/\b\B/,CJ="[a-zA-Z]\\w*",$P="[a-zA-Z_]\\w*",AJ="\\b\\d+(\\.\\d+)?",TJ="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",EJ="\\b(0b[01]+)",JRe="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ePe=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=lh(e,/.*\b/,t.binary,/\b.*/)),Qd({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},t)},i1={begin:"\\\\[\\s\\S]",relevance:0},tPe={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[i1]},nPe={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[i1]},rPe={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},$C=function(t,e,n={}){const r=Qd({scope:"comment",begin:t,end:e,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=EP("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:lh(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},iPe=$C("//","$"),aPe=$C("/\\*","\\*/"),sPe=$C("#","$"),oPe={scope:"number",begin:AJ,relevance:0},lPe={scope:"number",begin:TJ,relevance:0},uPe={scope:"number",begin:EJ,relevance:0},dPe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[i1,{begin:/\[/,end:/\]/,relevance:0,contains:[i1]}]},cPe={scope:"title",begin:CJ,relevance:0},fPe={scope:"title",begin:$P,relevance:0},pPe={begin:"\\.\\s*"+$P,relevance:0},hPe=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var C_=Object.freeze({__proto__:null,APOS_STRING_MODE:tPe,BACKSLASH_ESCAPE:i1,BINARY_NUMBER_MODE:uPe,BINARY_NUMBER_RE:EJ,COMMENT:$C,C_BLOCK_COMMENT_MODE:aPe,C_LINE_COMMENT_MODE:iPe,C_NUMBER_MODE:lPe,C_NUMBER_RE:TJ,END_SAME_AS_BEGIN:hPe,HASH_COMMENT_MODE:sPe,IDENT_RE:CJ,MATCH_NOTHING_RE:QRe,METHOD_GUARD:pPe,NUMBER_MODE:oPe,NUMBER_RE:AJ,PHRASAL_WORDS_MODE:rPe,QUOTE_STRING_MODE:nPe,REGEXP_MODE:dPe,RE_STARTERS_RE:JRe,SHEBANG:ePe,TITLE_MODE:cPe,UNDERSCORE_IDENT_RE:$P,UNDERSCORE_TITLE_MODE:fPe});function mPe(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function gPe(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function vPe(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=mPe,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function yPe(t,e){Array.isArray(t.illegal)&&(t.illegal=EP(...t.illegal))}function bPe(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function _Pe(t,e){t.relevance===void 0&&(t.relevance=1)}const xPe=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(r=>{delete t[r]}),t.keywords=n.keywords,t.begin=lh(n.beforeMatch,kJ(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},wPe=["of","and","for","in","not","or","if","then","parent","list","value"],kPe="keyword";function MJ(t,e,n=kPe){const r=Object.create(null);return typeof t=="string"?i(n,t.split(" ")):Array.isArray(t)?i(n,t):Object.keys(t).forEach(function(a){Object.assign(r,MJ(t[a],e,a))}),r;function i(a,s){e&&(s=s.map(o=>o.toLowerCase())),s.forEach(function(o){const l=o.split("|");r[l[0]]=[a,SPe(l[0],l[1])]})}}function SPe(t,e){return e?Number(e):CPe(t)?0:1}function CPe(t){return wPe.includes(t.toLowerCase())}const YN={},wp=t=>{console.error(t)},KN=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Ih=(t,e)=>{YN[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),YN[`${t}/${e}`]=!0)},ck=new Error;function $J(t,e,{key:n}){let r=0;const i=t[n],a={},s={};for(let o=1;o<=e.length;o++)s[o+r]=i[o],a[o+r]=!0,r+=SJ(e[o-1]);t[n]=s,t[n]._emit=a,t[n]._multi=!0}function APe(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw wp("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ck;if(typeof t.beginScope!="object"||t.beginScope===null)throw wp("beginScope must be object"),ck;$J(t,t.begin,{key:"beginScope"}),t.begin=MP(t.begin,{joinWith:""})}}function TPe(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw wp("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ck;if(typeof t.endScope!="object"||t.endScope===null)throw wp("endScope must be object"),ck;$J(t,t.end,{key:"endScope"}),t.end=MP(t.end,{joinWith:""})}}function EPe(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function MPe(t){EPe(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),APe(t),TPe(t)}function $Pe(t){function e(s,o){return new RegExp(r1(s),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(o?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=SJ(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=e(MP(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const d=l.findIndex((f,p)=>p>0&&f!==void 0),c=this.matchIndexes[d];return l.splice(0,d),Object.assign(l,c)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new n;return this.rules.slice(o).forEach(([d,c])=>l.addRule(d,c)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let d=l.exec(o);if(this.resumingScanAtSamePosition()&&!(d&&d.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,d=c.exec(o)}return d&&(this.regexIndex+=d.position+1,this.regexIndex===this.count&&this.considerAll()),d}}function i(s){const o=new r;return s.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),s.terminatorEnd&&o.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&o.addRule(s.illegal,{type:"illegal"}),o}function a(s,o){const l=s;if(s.isCompiled)return l;[gPe,bPe,MPe,xPe].forEach(c=>c(s,o)),t.compilerExtensions.forEach(c=>c(s,o)),s.__beforeBegin=null,[vPe,yPe,_Pe].forEach(c=>c(s,o)),s.isCompiled=!0;let d=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),d=s.keywords.$pattern,delete s.keywords.$pattern),d=d||/\w+/,s.keywords&&(s.keywords=MJ(s.keywords,t.case_insensitive)),l.keywordPatternRe=e(d,!0),o&&(s.begin||(s.begin=/\B|\b/),l.beginRe=e(l.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(l.endRe=e(l.end)),l.terminatorEnd=r1(l.end)||"",s.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(s.end?"|":"")+o.terminatorEnd)),s.illegal&&(l.illegalRe=e(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(c){return DPe(c==="self"?s:c)})),s.contains.forEach(function(c){a(c,l)}),s.starts&&a(s.starts,o),l.matcher=i(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Qd(t.classNameAliases||{}),a(t)}function DJ(t){return t?t.endsWithParent||DJ(t.starts):!1}function DPe(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return Qd(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:DJ(t)?Qd(t,{starts:t.starts?Qd(t.starts):null}):Object.isFrozen(t)?Qd(t):t}var RPe="11.11.1";let PPe=class extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}};const NT=xJ,XN=Qd,ZN=Symbol("nomatch"),IPe=7,RJ=function(t){const e=Object.create(null),n=Object.create(null),r=[];let i=!0;const a="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:WRe};function l(q){return o.noHighlightRe.test(q)}function d(q){let N=q.className+" ";N+=q.parentNode?q.parentNode.className:"";const O=o.languageDetectRe.exec(N);if(O){const V=M(O[1]);return V||(KN(a.replace("{}",O[1])),KN("Falling back to no-highlight mode for this block.",q)),V?O[1]:"no-highlight"}return N.split(/\s+/).find(V=>l(V)||M(V))}function c(q,N,O){let V="",L="";typeof N=="object"?(V=q,O=N.ignoreIllegals,L=N.language):(Ih("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ih("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),L=q,V=N),O===void 0&&(O=!0);const U={code:V,language:L};z("before:highlight",U);const G=U.result?U.result:f(U.language,U.code,O);return G.code=U.code,z("after:highlight",G),G}function f(q,N,O,V){const L=Object.create(null);function U(Ve,De){return Ve.keywords[De]}function G(){if(!pe.keywords){Me.addText(Te);return}let Ve=0;pe.keywordPatternRe.lastIndex=0;let De=pe.keywordPatternRe.exec(Te),Le="";for(;De;){Le+=Te.substring(Ve,De.index);const Re=ae.case_insensitive?De[0].toLowerCase():De[0],Se=U(pe,Re);if(Se){const[Ge,en]=Se;if(Me.addText(Le),Le="",L[Re]=(L[Re]||0)+1,L[Re]<=IPe&&(qe+=en),Ge.startsWith("_"))Le+=De[0];else{const Ln=ae.classNameAliases[Ge]||Ge;ee(De[0],Ln)}}else Le+=De[0];Ve=pe.keywordPatternRe.lastIndex,De=pe.keywordPatternRe.exec(Te)}Le+=Te.substring(Ve),Me.addText(Le)}function X(){if(Te==="")return;let Ve=null;if(typeof pe.subLanguage=="string"){if(!e[pe.subLanguage]){Me.addText(Te);return}Ve=f(pe.subLanguage,Te,!0,ye[pe.subLanguage]),ye[pe.subLanguage]=Ve._top}else Ve=h(Te,pe.subLanguage.length?pe.subLanguage:null);pe.relevance>0&&(qe+=Ve.relevance),Me.__addSublanguage(Ve._emitter,Ve.language)}function re(){pe.subLanguage!=null?X():G(),Te=""}function ee(Ve,De){Ve!==""&&(Me.startScope(De),Me.addText(Ve),Me.endScope())}function de(Ve,De){let Le=1;const Re=De.length-1;for(;Le<=Re;){if(!Ve._emit[Le]){Le++;continue}const Se=ae.classNameAliases[Ve[Le]]||Ve[Le],Ge=De[Le];Se?ee(Ge,Se):(Te=Ge,G(),Te=""),Le++}}function se(Ve,De){return Ve.scope&&typeof Ve.scope=="string"&&Me.openNode(ae.classNameAliases[Ve.scope]||Ve.scope),Ve.beginScope&&(Ve.beginScope._wrap?(ee(Te,ae.classNameAliases[Ve.beginScope._wrap]||Ve.beginScope._wrap),Te=""):Ve.beginScope._multi&&(de(Ve.beginScope,De),Te="")),pe=Object.create(Ve,{parent:{value:pe}}),pe}function te(Ve,De,Le){let Re=XRe(Ve.endRe,Le);if(Re){if(Ve["on:end"]){const Se=new qN(Ve);Ve["on:end"](De,Se),Se.isMatchIgnored&&(Re=!1)}if(Re){for(;Ve.endsParent&&Ve.parent;)Ve=Ve.parent;return Ve}}if(Ve.endsWithParent)return te(Ve.parent,De,Le)}function ne(Ve){return pe.matcher.regexIndex===0?(Te+=Ve[0],1):(st=!0,0)}function ce(Ve){const De=Ve[0],Le=Ve.rule,Re=new qN(Le),Se=[Le.__beforeBegin,Le["on:begin"]];for(const Ge of Se)if(Ge&&(Ge(Ve,Re),Re.isMatchIgnored))return ne(De);return Le.skip?Te+=De:(Le.excludeBegin&&(Te+=De),re(),!Le.returnBegin&&!Le.excludeBegin&&(Te=De)),se(Le,Ve),Le.returnBegin?0:De.length}function ve(Ve){const De=Ve[0],Le=N.substring(Ve.index),Re=te(pe,Ve,Le);if(!Re)return ZN;const Se=pe;pe.endScope&&pe.endScope._wrap?(re(),ee(De,pe.endScope._wrap)):pe.endScope&&pe.endScope._multi?(re(),de(pe.endScope,Ve)):Se.skip?Te+=De:(Se.returnEnd||Se.excludeEnd||(Te+=De),re(),Se.excludeEnd&&(Te=De));do pe.scope&&Me.closeNode(),!pe.skip&&!pe.subLanguage&&(qe+=pe.relevance),pe=pe.parent;while(pe!==Re.parent);return Re.starts&&se(Re.starts,Ve),Se.returnEnd?0:De.length}function Y(){const Ve=[];for(let De=pe;De!==ae;De=De.parent)De.scope&&Ve.unshift(De.scope);Ve.forEach(De=>Me.openNode(De))}let K={};function H(Ve,De){const Le=De&&De[0];if(Te+=Ve,Le==null)return re(),0;if(K.type==="begin"&&De.type==="end"&&K.index===De.index&&Le===""){if(Te+=N.slice(De.index,De.index+1),!i){const Re=new Error(`0 width match regex (${q})`);throw Re.languageName=q,Re.badRule=K.rule,Re}return 1}if(K=De,De.type==="begin")return ce(De);if(De.type==="illegal"&&!O){const Re=new Error('Illegal lexeme "'+Le+'" for mode "'+(pe.scope||"<unnamed>")+'"');throw Re.mode=pe,Re}else if(De.type==="end"){const Re=ve(De);if(Re!==ZN)return Re}if(De.type==="illegal"&&Le==="")return Te+=`
`,1;if(at>1e5&&at>De.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Te+=Le,Le.length}const ae=M(q);if(!ae)throw wp(a.replace("{}",q)),new Error('Unknown language: "'+q+'"');const be=$Pe(ae);let ue="",pe=V||be;const ye={},Me=new o.__emitter(o);Y();let Te="",qe=0,We=0,at=0,st=!1;try{if(ae.__emitTokens)ae.__emitTokens(N,Me);else{for(pe.matcher.considerAll();;){at++,st?st=!1:pe.matcher.considerAll(),pe.matcher.lastIndex=We;const Ve=pe.matcher.exec(N);if(!Ve)break;const De=N.substring(We,Ve.index),Le=H(De,Ve);We=Ve.index+Le}H(N.substring(We))}return Me.finalize(),ue=Me.toHTML(),{language:q,value:ue,relevance:qe,illegal:!1,_emitter:Me,_top:pe}}catch(Ve){if(Ve.message&&Ve.message.includes("Illegal"))return{language:q,value:NT(N),illegal:!0,relevance:0,_illegalBy:{message:Ve.message,index:We,context:N.slice(We-100,We+100),mode:Ve.mode,resultSoFar:ue},_emitter:Me};if(i)return{language:q,value:NT(N),illegal:!1,relevance:0,errorRaised:Ve,_emitter:Me,_top:pe};throw Ve}}function p(q){const N={value:NT(q),illegal:!1,relevance:0,_top:s,_emitter:new o.__emitter(o)};return N._emitter.addText(q),N}function h(q,N){N=N||o.languages||Object.keys(e);const O=p(q),V=N.filter(M).filter(R).map(re=>f(re,q,!1));V.unshift(O);const L=V.sort((re,ee)=>{if(re.relevance!==ee.relevance)return ee.relevance-re.relevance;if(re.language&&ee.language){if(M(re.language).supersetOf===ee.language)return 1;if(M(ee.language).supersetOf===re.language)return-1}return 0}),[U,G]=L,X=U;return X.secondBest=G,X}function m(q,N,O){const V=N&&n[N]||O;q.classList.add("hljs"),q.classList.add(`language-${V}`)}function g(q){let N=null;const O=d(q);if(l(O))return;if(z("before:highlightElement",{el:q,language:O}),q.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",q);return}if(q.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(q)),o.throwUnescapedHTML))throw new PPe("One of your code blocks includes unescaped HTML.",q.innerHTML);N=q;const V=N.textContent,L=O?c(V,{language:O,ignoreIllegals:!0}):h(V);q.innerHTML=L.value,q.dataset.highlighted="yes",m(q,O,L.language),q.result={language:L.language,re:L.relevance,relevance:L.relevance},L.secondBest&&(q.secondBest={language:L.secondBest.language,relevance:L.secondBest.relevance}),z("after:highlightElement",{el:q,result:L,text:V})}function v(q){o=XN(o,q)}const _=()=>{k(),Ih("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function x(){k(),Ih("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let w=!1;function k(){function q(){k()}if(document.readyState==="loading"){w||window.addEventListener("DOMContentLoaded",q,!1),w=!0;return}document.querySelectorAll(o.cssSelector).forEach(g)}function S(q,N){let O=null;try{O=N(t)}catch(V){if(wp("Language definition for '{}' could not be registered.".replace("{}",q)),i)wp(V);else throw V;O=s}O.name||(O.name=q),e[q]=O,O.rawDefinition=N.bind(null,t),O.aliases&&$(O.aliases,{languageName:q})}function C(q){delete e[q];for(const N of Object.keys(n))n[N]===q&&delete n[N]}function A(){return Object.keys(e)}function M(q){return q=(q||"").toLowerCase(),e[q]||e[n[q]]}function $(q,{languageName:N}){typeof q=="string"&&(q=[q]),q.forEach(O=>{n[O.toLowerCase()]=N})}function R(q){const N=M(q);return N&&!N.disableAutodetect}function I(q){q["before:highlightBlock"]&&!q["before:highlightElement"]&&(q["before:highlightElement"]=N=>{q["before:highlightBlock"](Object.assign({block:N.el},N))}),q["after:highlightBlock"]&&!q["after:highlightElement"]&&(q["after:highlightElement"]=N=>{q["after:highlightBlock"](Object.assign({block:N.el},N))})}function B(q){I(q),r.push(q)}function j(q){const N=r.indexOf(q);N!==-1&&r.splice(N,1)}function z(q,N){const O=q;r.forEach(function(V){V[O]&&V[O](N)})}function F(q){return Ih("10.7.0","highlightBlock will be removed entirely in v12.0"),Ih("10.7.0","Please use highlightElement now."),g(q)}Object.assign(t,{highlight:c,highlightAuto:h,highlightAll:k,highlightElement:g,highlightBlock:F,configure:v,initHighlighting:_,initHighlightingOnLoad:x,registerLanguage:S,unregisterLanguage:C,listLanguages:A,getLanguage:M,registerAliases:$,autoDetection:R,inherit:XN,addPlugin:B,removePlugin:j}),t.debugMode=function(){i=!1},t.safeMode=function(){i=!0},t.versionString=RPe,t.regex={concat:lh,lookahead:kJ,either:EP,optional:YRe,anyNumberOfTimes:GRe};for(const q in C_)typeof C_[q]=="object"&&_J(C_[q]);return Object.assign(t,C_),t},cg=RJ({});cg.newInstance=()=>RJ({});var OPe=cg;cg.HighlightJS=cg;cg.default=cg;const LPe=SK(OPe),QN={},VPe="hljs-";function NPe(t){const e=LPe.newInstance();return t&&a(t),{highlight:n,highlightAuto:r,listLanguages:i,register:a,registerAlias:s,registered:o};function n(l,d,c){const f=c||QN,p=typeof f.prefix=="string"?f.prefix:VPe;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:jPe,classPrefix:p});const h=e.highlight(d,{ignoreIllegals:!0,language:l});if(h.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:h.errorRaised});const m=h._emitter.root,g=m.data;return g.language=h.language,g.relevance=h.relevance,m}function r(l,d){const f=(d||QN).subset||i();let p=-1,h=0,m;for(;++p<f.length;){const g=f[p];if(!e.getLanguage(g))continue;const v=n(g,l,d);v.data&&v.data.relevance!==void 0&&v.data.relevance>h&&(h=v.data.relevance,m=v)}return m||{type:"root",children:[],data:{language:void 0,relevance:h}}}function i(){return e.listLanguages()}function a(l,d){if(typeof l=="string")e.registerLanguage(l,d);else{let c;for(c in l)Object.hasOwn(l,c)&&e.registerLanguage(c,l[c])}}function s(l,d){if(typeof l=="string")e.registerAliases(typeof d=="string"?d:[...d],{languageName:l});else{let c;for(c in l)if(Object.hasOwn(l,c)){const f=l[c];e.registerAliases(typeof f=="string"?f:[...f],{languageName:c})}}}function o(l){return!!e.getLanguage(l)}}class jPe{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],i=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:i}):r.children.push(...i)}openNode(e){const n=this,r=e.split(".").map(function(s,o){return o?s+"_".repeat(o):n.options.classPrefix+s}),i=this.stack[this.stack.length-1],a={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(a),this.stack.push(a)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}function FPe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function PJ(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],r=typeof n;(r==="object"||r==="function")&&!Object.isFrozen(n)&&PJ(n)}),t}class JN{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function IJ(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Jd(t,...e){const n=Object.create(null);for(const r in t)n[r]=t[r];return e.forEach(function(r){for(const i in r)n[i]=r[i]}),n}const BPe="</span>",e7=t=>!!t.scope,zPe=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((r,i)=>`${r}${"_".repeat(i+1)}`)].join(" ")}return`${e}${t}`};class UPe{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=IJ(e)}openNode(e){if(!e7(e))return;const n=zPe(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){e7(e)&&(this.buffer+=BPe)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const t7=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class DP{constructor(){this.rootNode=t7(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=t7({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(r=>this._walk(e,r)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{DP._collapse(n)}))}}class HPe extends DP{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const r=e.root;n&&(r.scope=`language:${n}`),this.add(r)}toHTML(){return new UPe(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function a1(t){return t?typeof t=="string"?t:t.source:null}function OJ(t){return uh("(?=",t,")")}function qPe(t){return uh("(?:",t,")*")}function WPe(t){return uh("(?:",t,")?")}function uh(...t){return t.map(n=>a1(n)).join("")}function GPe(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function RP(...t){return"("+(GPe(t).capture?"":"?:")+t.map(r=>a1(r)).join("|")+")"}function LJ(t){return new RegExp(t.toString()+"|").exec("").length-1}function YPe(t,e){const n=t&&t.exec(e);return n&&n.index===0}const KPe=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function PP(t,{joinWith:e}){let n=0;return t.map(r=>{n+=1;const i=n;let a=a1(r),s="";for(;a.length>0;){const o=KPe.exec(a);if(!o){s+=a;break}s+=a.substring(0,o.index),a=a.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?s+="\\"+String(Number(o[1])+i):(s+=o[0],o[0]==="("&&n++)}return s}).map(r=>`(${r})`).join(e)}const XPe=/\b\B/,VJ="[a-zA-Z]\\w*",IP="[a-zA-Z_]\\w*",NJ="\\b\\d+(\\.\\d+)?",jJ="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",FJ="\\b(0b[01]+)",ZPe="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",QPe=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=uh(e,/.*\b/,t.binary,/\b.*/)),Jd({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},t)},s1={begin:"\\\\[\\s\\S]",relevance:0},JPe={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[s1]},eIe={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[s1]},tIe={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},DC=function(t,e,n={}){const r=Jd({scope:"comment",begin:t,end:e,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=RP("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:uh(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},nIe=DC("//","$"),rIe=DC("/\\*","\\*/"),iIe=DC("#","$"),aIe={scope:"number",begin:NJ,relevance:0},sIe={scope:"number",begin:jJ,relevance:0},oIe={scope:"number",begin:FJ,relevance:0},lIe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[s1,{begin:/\[/,end:/\]/,relevance:0,contains:[s1]}]},uIe={scope:"title",begin:VJ,relevance:0},dIe={scope:"title",begin:IP,relevance:0},cIe={begin:"\\.\\s*"+IP,relevance:0},fIe=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var A_=Object.freeze({__proto__:null,APOS_STRING_MODE:JPe,BACKSLASH_ESCAPE:s1,BINARY_NUMBER_MODE:oIe,BINARY_NUMBER_RE:FJ,COMMENT:DC,C_BLOCK_COMMENT_MODE:rIe,C_LINE_COMMENT_MODE:nIe,C_NUMBER_MODE:sIe,C_NUMBER_RE:jJ,END_SAME_AS_BEGIN:fIe,HASH_COMMENT_MODE:iIe,IDENT_RE:VJ,MATCH_NOTHING_RE:XPe,METHOD_GUARD:cIe,NUMBER_MODE:aIe,NUMBER_RE:NJ,PHRASAL_WORDS_MODE:tIe,QUOTE_STRING_MODE:eIe,REGEXP_MODE:lIe,RE_STARTERS_RE:ZPe,SHEBANG:QPe,TITLE_MODE:uIe,UNDERSCORE_IDENT_RE:IP,UNDERSCORE_TITLE_MODE:dIe});function pIe(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function hIe(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function mIe(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=pIe,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function gIe(t,e){Array.isArray(t.illegal)&&(t.illegal=RP(...t.illegal))}function vIe(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function yIe(t,e){t.relevance===void 0&&(t.relevance=1)}const bIe=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(r=>{delete t[r]}),t.keywords=n.keywords,t.begin=uh(n.beforeMatch,OJ(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},_Ie=["of","and","for","in","not","or","if","then","parent","list","value"],xIe="keyword";function BJ(t,e,n=xIe){const r=Object.create(null);return typeof t=="string"?i(n,t.split(" ")):Array.isArray(t)?i(n,t):Object.keys(t).forEach(function(a){Object.assign(r,BJ(t[a],e,a))}),r;function i(a,s){e&&(s=s.map(o=>o.toLowerCase())),s.forEach(function(o){const l=o.split("|");r[l[0]]=[a,wIe(l[0],l[1])]})}}function wIe(t,e){return e?Number(e):kIe(t)?0:1}function kIe(t){return _Ie.includes(t.toLowerCase())}const n7={},kp=t=>{console.error(t)},r7=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Oh=(t,e)=>{n7[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),n7[`${t}/${e}`]=!0)},fk=new Error;function zJ(t,e,{key:n}){let r=0;const i=t[n],a={},s={};for(let o=1;o<=e.length;o++)s[o+r]=i[o],a[o+r]=!0,r+=LJ(e[o-1]);t[n]=s,t[n]._emit=a,t[n]._multi=!0}function SIe(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw kp("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),fk;if(typeof t.beginScope!="object"||t.beginScope===null)throw kp("beginScope must be object"),fk;zJ(t,t.begin,{key:"beginScope"}),t.begin=PP(t.begin,{joinWith:""})}}function CIe(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw kp("skip, excludeEnd, returnEnd not compatible with endScope: {}"),fk;if(typeof t.endScope!="object"||t.endScope===null)throw kp("endScope must be object"),fk;zJ(t,t.end,{key:"endScope"}),t.end=PP(t.end,{joinWith:""})}}function AIe(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function TIe(t){AIe(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),SIe(t),CIe(t)}function EIe(t){function e(s,o){return new RegExp(a1(s),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(o?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=LJ(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=e(PP(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const d=l.findIndex((f,p)=>p>0&&f!==void 0),c=this.matchIndexes[d];return l.splice(0,d),Object.assign(l,c)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new n;return this.rules.slice(o).forEach(([d,c])=>l.addRule(d,c)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let d=l.exec(o);if(this.resumingScanAtSamePosition()&&!(d&&d.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,d=c.exec(o)}return d&&(this.regexIndex+=d.position+1,this.regexIndex===this.count&&this.considerAll()),d}}function i(s){const o=new r;return s.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),s.terminatorEnd&&o.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&o.addRule(s.illegal,{type:"illegal"}),o}function a(s,o){const l=s;if(s.isCompiled)return l;[hIe,vIe,TIe,bIe].forEach(c=>c(s,o)),t.compilerExtensions.forEach(c=>c(s,o)),s.__beforeBegin=null,[mIe,gIe,yIe].forEach(c=>c(s,o)),s.isCompiled=!0;let d=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),d=s.keywords.$pattern,delete s.keywords.$pattern),d=d||/\w+/,s.keywords&&(s.keywords=BJ(s.keywords,t.case_insensitive)),l.keywordPatternRe=e(d,!0),o&&(s.begin||(s.begin=/\B|\b/),l.beginRe=e(l.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(l.endRe=e(l.end)),l.terminatorEnd=a1(l.end)||"",s.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(s.end?"|":"")+o.terminatorEnd)),s.illegal&&(l.illegalRe=e(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(c){return MIe(c==="self"?s:c)})),s.contains.forEach(function(c){a(c,l)}),s.starts&&a(s.starts,o),l.matcher=i(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Jd(t.classNameAliases||{}),a(t)}function UJ(t){return t?t.endsWithParent||UJ(t.starts):!1}function MIe(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return Jd(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:UJ(t)?Jd(t,{starts:t.starts?Jd(t.starts):null}):Object.isFrozen(t)?Jd(t):t}var $Ie="11.10.0";class DIe extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const jT=IJ,i7=Jd,a7=Symbol("nomatch"),RIe=7,HJ=function(t){const e=Object.create(null),n=Object.create(null),r=[];let i=!0;const a="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:HPe};function l(N){return o.noHighlightRe.test(N)}function d(N){let O=N.className+" ";O+=N.parentNode?N.parentNode.className:"";const V=o.languageDetectRe.exec(O);if(V){const L=$(V[1]);return L||(r7(a.replace("{}",V[1])),r7("Falling back to no-highlight mode for this block.",N)),L?V[1]:"no-highlight"}return O.split(/\s+/).find(L=>l(L)||$(L))}function c(N,O,V){let L="",U="";typeof O=="object"?(L=N,V=O.ignoreIllegals,U=O.language):(Oh("10.7.0","highlight(lang, code, ...args) has been deprecated."),Oh("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),U=N,L=O),V===void 0&&(V=!0);const G={code:L,language:U};F("before:highlight",G);const X=G.result?G.result:f(G.language,G.code,V);return X.code=G.code,F("after:highlight",X),X}function f(N,O,V,L){const U=Object.create(null);function G(De,Le){return De.keywords[Le]}function X(){if(!ye.keywords){Te.addText(qe);return}let De=0;ye.keywordPatternRe.lastIndex=0;let Le=ye.keywordPatternRe.exec(qe),Re="";for(;Le;){Re+=qe.substring(De,Le.index);const Se=be.case_insensitive?Le[0].toLowerCase():Le[0],Ge=G(ye,Se);if(Ge){const[en,Ln]=Ge;if(Te.addText(Re),Re="",U[Se]=(U[Se]||0)+1,U[Se]<=RIe&&(We+=Ln),en.startsWith("_"))Re+=Le[0];else{const Ne=be.classNameAliases[en]||en;de(Le[0],Ne)}}else Re+=Le[0];De=ye.keywordPatternRe.lastIndex,Le=ye.keywordPatternRe.exec(qe)}Re+=qe.substring(De),Te.addText(Re)}function re(){if(qe==="")return;let De=null;if(typeof ye.subLanguage=="string"){if(!e[ye.subLanguage]){Te.addText(qe);return}De=f(ye.subLanguage,qe,!0,Me[ye.subLanguage]),Me[ye.subLanguage]=De._top}else De=h(qe,ye.subLanguage.length?ye.subLanguage:null);ye.relevance>0&&(We+=De.relevance),Te.__addSublanguage(De._emitter,De.language)}function ee(){ye.subLanguage!=null?re():X(),qe=""}function de(De,Le){De!==""&&(Te.startScope(Le),Te.addText(De),Te.endScope())}function se(De,Le){let Re=1;const Se=Le.length-1;for(;Re<=Se;){if(!De._emit[Re]){Re++;continue}const Ge=be.classNameAliases[De[Re]]||De[Re],en=Le[Re];Ge?de(en,Ge):(qe=en,X(),qe=""),Re++}}function te(De,Le){return De.scope&&typeof De.scope=="string"&&Te.openNode(be.classNameAliases[De.scope]||De.scope),De.beginScope&&(De.beginScope._wrap?(de(qe,be.classNameAliases[De.beginScope._wrap]||De.beginScope._wrap),qe=""):De.beginScope._multi&&(se(De.beginScope,Le),qe="")),ye=Object.create(De,{parent:{value:ye}}),ye}function ne(De,Le,Re){let Se=YPe(De.endRe,Re);if(Se){if(De["on:end"]){const Ge=new JN(De);De["on:end"](Le,Ge),Ge.isMatchIgnored&&(Se=!1)}if(Se){for(;De.endsParent&&De.parent;)De=De.parent;return De}}if(De.endsWithParent)return ne(De.parent,Le,Re)}function ce(De){return ye.matcher.regexIndex===0?(qe+=De[0],1):(Ve=!0,0)}function ve(De){const Le=De[0],Re=De.rule,Se=new JN(Re),Ge=[Re.__beforeBegin,Re["on:begin"]];for(const en of Ge)if(en&&(en(De,Se),Se.isMatchIgnored))return ce(Le);return Re.skip?qe+=Le:(Re.excludeBegin&&(qe+=Le),ee(),!Re.returnBegin&&!Re.excludeBegin&&(qe=Le)),te(Re,De),Re.returnBegin?0:Le.length}function Y(De){const Le=De[0],Re=O.substring(De.index),Se=ne(ye,De,Re);if(!Se)return a7;const Ge=ye;ye.endScope&&ye.endScope._wrap?(ee(),de(Le,ye.endScope._wrap)):ye.endScope&&ye.endScope._multi?(ee(),se(ye.endScope,De)):Ge.skip?qe+=Le:(Ge.returnEnd||Ge.excludeEnd||(qe+=Le),ee(),Ge.excludeEnd&&(qe=Le));do ye.scope&&Te.closeNode(),!ye.skip&&!ye.subLanguage&&(We+=ye.relevance),ye=ye.parent;while(ye!==Se.parent);return Se.starts&&te(Se.starts,De),Ge.returnEnd?0:Le.length}function K(){const De=[];for(let Le=ye;Le!==be;Le=Le.parent)Le.scope&&De.unshift(Le.scope);De.forEach(Le=>Te.openNode(Le))}let H={};function ae(De,Le){const Re=Le&&Le[0];if(qe+=De,Re==null)return ee(),0;if(H.type==="begin"&&Le.type==="end"&&H.index===Le.index&&Re===""){if(qe+=O.slice(Le.index,Le.index+1),!i){const Se=new Error(`0 width match regex (${N})`);throw Se.languageName=N,Se.badRule=H.rule,Se}return 1}if(H=Le,Le.type==="begin")return ve(Le);if(Le.type==="illegal"&&!V){const Se=new Error('Illegal lexeme "'+Re+'" for mode "'+(ye.scope||"<unnamed>")+'"');throw Se.mode=ye,Se}else if(Le.type==="end"){const Se=Y(Le);if(Se!==a7)return Se}if(Le.type==="illegal"&&Re==="")return 1;if(st>1e5&&st>Le.index*3)throw new Error("potential infinite loop, way more iterations than matches");return qe+=Re,Re.length}const be=$(N);if(!be)throw kp(a.replace("{}",N)),new Error('Unknown language: "'+N+'"');const ue=EIe(be);let pe="",ye=L||ue;const Me={},Te=new o.__emitter(o);K();let qe="",We=0,at=0,st=0,Ve=!1;try{if(be.__emitTokens)be.__emitTokens(O,Te);else{for(ye.matcher.considerAll();;){st++,Ve?Ve=!1:ye.matcher.considerAll(),ye.matcher.lastIndex=at;const De=ye.matcher.exec(O);if(!De)break;const Le=O.substring(at,De.index),Re=ae(Le,De);at=De.index+Re}ae(O.substring(at))}return Te.finalize(),pe=Te.toHTML(),{language:N,value:pe,relevance:We,illegal:!1,_emitter:Te,_top:ye}}catch(De){if(De.message&&De.message.includes("Illegal"))return{language:N,value:jT(O),illegal:!0,relevance:0,_illegalBy:{message:De.message,index:at,context:O.slice(at-100,at+100),mode:De.mode,resultSoFar:pe},_emitter:Te};if(i)return{language:N,value:jT(O),illegal:!1,relevance:0,errorRaised:De,_emitter:Te,_top:ye};throw De}}function p(N){const O={value:jT(N),illegal:!1,relevance:0,_top:s,_emitter:new o.__emitter(o)};return O._emitter.addText(N),O}function h(N,O){O=O||o.languages||Object.keys(e);const V=p(N),L=O.filter($).filter(I).map(ee=>f(ee,N,!1));L.unshift(V);const U=L.sort((ee,de)=>{if(ee.relevance!==de.relevance)return de.relevance-ee.relevance;if(ee.language&&de.language){if($(ee.language).supersetOf===de.language)return 1;if($(de.language).supersetOf===ee.language)return-1}return 0}),[G,X]=U,re=G;return re.secondBest=X,re}function m(N,O,V){const L=O&&n[O]||V;N.classList.add("hljs"),N.classList.add(`language-${L}`)}function g(N){let O=null;const V=d(N);if(l(V))return;if(F("before:highlightElement",{el:N,language:V}),N.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",N);return}if(N.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(N)),o.throwUnescapedHTML))throw new DIe("One of your code blocks includes unescaped HTML.",N.innerHTML);O=N;const L=O.textContent,U=V?c(L,{language:V,ignoreIllegals:!0}):h(L);N.innerHTML=U.value,N.dataset.highlighted="yes",m(N,V,U.language),N.result={language:U.language,re:U.relevance,relevance:U.relevance},U.secondBest&&(N.secondBest={language:U.secondBest.language,relevance:U.secondBest.relevance}),F("after:highlightElement",{el:N,result:U,text:L})}function v(N){o=i7(o,N)}const _=()=>{k(),Oh("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function x(){k(),Oh("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let w=!1;function k(){if(document.readyState==="loading"){w=!0;return}document.querySelectorAll(o.cssSelector).forEach(g)}function S(){w&&k()}typeof window!="undefined"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",S,!1);function C(N,O){let V=null;try{V=O(t)}catch(L){if(kp("Language definition for '{}' could not be registered.".replace("{}",N)),i)kp(L);else throw L;V=s}V.name||(V.name=N),e[N]=V,V.rawDefinition=O.bind(null,t),V.aliases&&R(V.aliases,{languageName:N})}function A(N){delete e[N];for(const O of Object.keys(n))n[O]===N&&delete n[O]}function M(){return Object.keys(e)}function $(N){return N=(N||"").toLowerCase(),e[N]||e[n[N]]}function R(N,{languageName:O}){typeof N=="string"&&(N=[N]),N.forEach(V=>{n[V.toLowerCase()]=O})}function I(N){const O=$(N);return O&&!O.disableAutodetect}function B(N){N["before:highlightBlock"]&&!N["before:highlightElement"]&&(N["before:highlightElement"]=O=>{N["before:highlightBlock"](Object.assign({block:O.el},O))}),N["after:highlightBlock"]&&!N["after:highlightElement"]&&(N["after:highlightElement"]=O=>{N["after:highlightBlock"](Object.assign({block:O.el},O))})}function j(N){B(N),r.push(N)}function z(N){const O=r.indexOf(N);O!==-1&&r.splice(O,1)}function F(N,O){const V=N;r.forEach(function(L){L[V]&&L[V](O)})}function q(N){return Oh("10.7.0","highlightBlock will be removed entirely in v12.0"),Oh("10.7.0","Please use highlightElement now."),g(N)}Object.assign(t,{highlight:c,highlightAuto:h,highlightAll:k,highlightElement:g,highlightBlock:q,configure:v,initHighlighting:_,initHighlightingOnLoad:x,registerLanguage:C,unregisterLanguage:A,listLanguages:M,getLanguage:$,registerAliases:R,autoDetection:I,inherit:i7,addPlugin:j,removePlugin:z}),t.debugMode=function(){i=!1},t.safeMode=function(){i=!0},t.versionString=$Ie,t.regex={concat:uh,lookahead:OJ,either:RP,optional:WPe,anyNumberOfTimes:qPe};for(const N in A_)typeof A_[N]=="object"&&PJ(A_[N]);return Object.assign(t,A_),t},fg=HJ({});fg.newInstance=()=>HJ({});var PIe=fg;fg.HighlightJS=fg;fg.default=fg;var IIe=FPe(PIe);function qJ(t,e=[]){return t.map(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?qJ(n.children,r):{text:n.value,classes:r}}).flat()}function s7(t){return t.value||t.children||[]}function OIe(t){return!!IIe.getLanguage(t)}function o7({doc:t,name:e,lowlight:n,defaultLanguage:r}){const i=[];return NE(t,a=>a.type.name===e).forEach(a=>{var s;let o=a.pos+1;const l=a.node.attrs.language||r,d=n.listLanguages(),c=l&&(d.includes(l)||OIe(l)||!((s=n.registered)===null||s===void 0)&&s.call(n,l))?s7(n.highlight(l,a.node.textContent)):s7(n.highlightAuto(a.node.textContent));qJ(c).forEach(f=>{const p=o+f.text.length;if(f.classes.length){const h=mi.inline(o,p,{class:f.classes.join(" ")});i.push(h)}o=p})}),yr.create(t,i)}function LIe(t){return typeof t=="function"}function VIe({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(i=>LIe(e[i])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new On({key:new Un("lowlight"),state:{init:(i,{doc:a})=>o7({doc:a,name:t,lowlight:e,defaultLanguage:n}),apply:(i,a,s,o)=>{const l=s.selection.$head.parent.type.name,d=o.selection.$head.parent.type.name,c=NE(s.doc,p=>p.type.name===t),f=NE(o.doc,p=>p.type.name===t);return i.docChanged&&([l,d].includes(t)||f.length!==c.length||i.steps.some(p=>p.from!==void 0&&p.to!==void 0&&c.some(h=>h.pos>=p.from&&h.pos+h.node.nodeSize<=p.to)))?o7({doc:i.doc,name:t,lowlight:e,defaultLanguage:n}):a.map(i.mapping,i.doc)}},props:{decorations(i){return r.getState(i)}}});return r}const NIe=tQ.extend({addOptions(){var t;return je(me({},(t=this.parent)===null||t===void 0?void 0:t.call(this)),{lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}})},addProseMirrorPlugins(){var t;return[...((t=this.parent)===null||t===void 0?void 0:t.call(this))||[],VIe({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),jIe={components:{NodeViewWrapper:wC,NodeViewContent:DSe},props:sP,computed:{selectedLanguage:{get(){return this.node.attrs.language},set(t){this.updateAttributes({language:t})}},languages(){return this.extension.options.lowlight.listLanguages().map(e=>({label:e,value:e})).concat([{label:"html",value:"xml"}]).sort((e,n)=>e.label.localeCompare(n.label))}}},FIe={class:"code-block-container"},BIe=["value"];function zIe(t,e,n,r,i,a){const s=Ji("node-view-content"),o=Ji("node-view-wrapper");return T(),he(o,null,{default:D(()=>[u("div",FIe,[xe(u("select",{class:"language-selector form-select py-0",contenteditable:"false","onUpdate:modelValue":e[0]||(e[0]=l=>a.selectedLanguage=l)},[e[1]||(e[1]=u("option",{value:null},"auto",-1)),e[2]||(e[2]=u("option",{disabled:""},"",-1)),(T(!0),P(_e,null,we(a.languages,(l,d)=>(T(),P("option",{value:l.value,key:l.value},E(l.label),9,BIe))),128))],512),[[gn,a.selectedLanguage]]),u("pre",null,[u("code",null,[b(s)])])])]),_:1})}const UIe=Ft(jIe,[["render",zIe]]),FT=" ".repeat(4),HIe=new RegExp("(?<=^|[^`])`([^`]+)`(?!`)$");function l7(t){const{$from:e,from:n,to:r}=t.selection;let i=e.depth;for(;i>0&&e.node(i).type.name!=="codeBlock";)i--;if(i===0)return null;const a=e.node(i),s=e.start(i),o=a.textContent,l=n-s,d=r-s;return{start:s,text:o,fromOffset:l,toOffset:d}}function u7(t,e,n){let r=t.lastIndexOf(`
`,Math.max(0,e-1))+1,i=n;i>0&&t[i-1]===`
`&&i--;const a=[r];let s=r;for(;;){const o=t.indexOf(`
`,s);if(o===-1||o>=i)break;a.push(o+1),s=o+1}return a}const qIe=NPe(BRe),WIe=NIe.extend({addNodeView(){return gb(UIe)},addKeyboardShortcuts(){return{Tab:()=>{const{state:t,dispatch:e}=this.editor.view,n=l7(t);if(!n)return!1;const{start:r,text:i,fromOffset:a,toOffset:s}=n,o=i.slice(a,s).includes(`
`),l=t.tr;if(o)for(const d of u7(i,a,s)){const c=l.mapping.map(r+d);l.insertText(FT,c)}else l.insertText(FT,t.selection.from);return e(l),!0},"Shift-Tab":()=>{const{state:t,dispatch:e}=this.editor.view,n=l7(t);if(!n)return!1;const{start:r,text:i,fromOffset:a,toOffset:s}=n,o=t.tr;for(const l of u7(i,a,s)){let d=0;if(i.substr(l,4)===FT?d=4:i[l]==="	"&&(d=1),d>0){const c=o.mapping.map(r+l),f=o.mapping.map(r+l+d);o.delete(c,f)}}return e(o),!0},"`":()=>{const{from:t,to:e}=this.editor.state.selection;return t===e?!1:this.editor.commands.toggleCode()}}}}).configure({lowlight:qIe}),GIe=eQ.extend({addKeyboardShortcuts(){return{"`":()=>{const{from:t,to:e}=this.editor.state.selection;return t===e?!1:this.editor.commands.toggleCode()}}},addInputRules(){return[zp({find:HIe,type:this.type})]}});function YIe(){const t=Jt({uploading:!1,progress:0,uploaded:0,total:0,error:null,result:null}),e=()=>{t.uploading=!1,t.progress=0,t.uploaded=0,t.total=0,t.error=null,t.result=null},n=J(()=>t.uploading),r=J(()=>t.progress),i=J(()=>t.error),a=J(()=>t.result);return{upload:(s,o={})=>KIe(s,o,t,e),reset:e,state:t,isUploading:n,progress:r,error:i,result:a}}function KIe(i){return le(this,arguments,function*(t,e={},n,r){return r(),n.uploading=!0,new Promise((a,s)=>{const o=new XMLHttpRequest;o.upload.addEventListener("loadstart",()=>{n.uploading=!0,n.error=null}),o.upload.addEventListener("progress",c=>{c.lengthComputable&&(n.uploaded=c.loaded,n.total=c.total,n.progress=Math.round(c.loaded/c.total*100))}),o.upload.addEventListener("load",()=>{n.progress=100}),o.addEventListener("error",c=>{n.uploading=!1,n.error="Upload failed",s("Upload failed")}),o.onreadystatechange=()=>{if(o.readyState==XMLHttpRequest.DONE){let c;if(o.status===200){let f=null;try{f=JSON.parse(o.responseText)}catch(h){f=o.responseText}const p=f.message||f;n.result=p,a(p)}else if(o.status===403)c=JSON.parse(o.responseText);else try{c=JSON.parse(o.responseText)}catch(f){c="Upload failed"}if(c){let f,p=[[c.exc_type,c._error_message].filter(Boolean).join(" ")];if(c.exc){f=c.exc;try{f=JSON.parse(f)[0],console.log(f)}catch(g){}}let h=new Error(p.join(`
`)),m=c._server_messages?JSON.parse(c._server_messages):[];m=m.map(g=>{try{return JSON.parse(g).message}catch(v){return g}}).filter(Boolean),m.length||(m=c._error_message?[c._error_message]:["Internal Server Error"]),h.message=m.join(`
`),n.error=h,s(h)}n.uploading=!1}};const l=e.upload_endpoint||"/api/method/upload_file";o.open("POST",l,!0),o.setRequestHeader("Accept","application/json"),window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&o.setRequestHeader("X-Frappe-CSRF-Token",window.csrf_token);const d=new FormData;if(t&&d.append("file",t,t.name),d.append("is_private",e.private?"1":"0"),d.append("folder",e.folder||"Home"),e.file_url&&d.append("file_url",e.file_url),e.doctype&&d.append("doctype",e.doctype),e.docname&&d.append("docname",e.docname),e.fieldname&&d.append("fieldname",e.fieldname),e.method&&d.append("method",e.method),e.type&&d.append("type",e.type),e.optimize&&(d.append("optimize","1"),e.max_width&&d.append("max_width",e.max_width.toString()),e.max_height&&d.append("max_height",e.max_height.toString())),e.params)for(let[c,f]of Object.entries(e.params))d.append(c,f);o.send(d)})})}const an=Ze({inheritAttrs:!1,__name:"TextEditor",props:{content:{default:null},placeholder:{type:[String,Function],default:""},editorClass:{default:""},editable:{type:Boolean,default:!0},autofocus:{type:Boolean,default:!1},bubbleMenu:{type:[Boolean,Array],default:!1},bubbleMenuOptions:{default:()=>({})},fixedMenu:{type:[Boolean,Array],default:!1},floatingMenu:{type:[Boolean,Array],default:!1},extensions:{default:()=>[]},starterkitOptions:{default:()=>({})},mentions:{default:null},tags:{default:()=>[]},uploadFunction:{},uploadArgs:{}},emits:["change","focus","blur","transaction"],setup(t,{expose:e,emit:n}){function r(h){return YIe().upload(h,i.uploadArgs||{})}const i=t,a=n,s=Q(null),o=nh(),l=J(()=>fe(o.class)),d=J(()=>nt(o.style)),c=J(()=>Object.fromEntries(Object.entries(o).filter(([h])=>h!=="class"&&h!=="style"))),f=J(()=>({attributes:{class:fe(["prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2",i.editorClass])}}));Je(()=>i.content,h=>{s.value&&s.value.getHTML()!==h&&s.value.commands.setContent(h)}),Je(()=>i.editable,h=>{s.value&&s.value.setEditable(h)}),Je(f,h=>{s.value&&s.value.setOptions({editorProps:h})},{deep:!0}),bt(()=>{var h;s.value=new ESe({content:i.content||null,editorProps:f.value,editable:i.editable,autofocus:i.autofocus,extensions:[MCe.configure(je(me({},i.starterkitOptions),{code:!1,codeBlock:!1,heading:!1})).extend({addKeyboardShortcuts(){return{Backspace:()=>k3e(this.editor)}}}),O$e.configure(me({},typeof((h=i.starterkitOptions)==null?void 0:h.heading)=="object"&&i.starterkitOptions.heading!==null?i.starterkitOptions.heading:{})),IAe.configure({resizable:!0}),y3e,v3e.configure({nested:!0}),VAe,LAe,OAe,p3e,DCe.configure({types:["heading","paragraph"]}),m3e,x3e,w3e,GIe,WIe,rTe.configure({uploadFunction:i.uploadFunction||r}),_De.configure({uploadFunction:i.uploadFunction||r}),NTe,FTe.configure({uploadFunction:i.uploadFunction||r}),n4e,z4e.configure({openOnClick:!1}),$Ce.configure({placeholder:typeof i.placeholder=="function"?i.placeholder:()=>i.placeholder}),i.mentions&&D3e.configure(Array.isArray(i.mentions)?{mentions:i.mentions}:{mentions:i.mentions.mentions,component:i.mentions.component}),uMe,GMe,nJ,I$e.configure({tags:()=>i.tags}),R$e.configure({enabled:!0,uploadFunction:i.uploadFunction||r}),...i.extensions||[]],onUpdate:({editor:m})=>{a("change",m.getHTML())},onTransaction:({editor:m})=>{a("transaction",m)},onFocus:({editor:m,event:g})=>{a("focus",g)},onBlur:({editor:m,event:g})=>{a("blur",g)}})}),jc(()=>{s.value&&(s.value.destroy(),s.value=null)}),Us("editor",J(()=>s.value));const p=Oy("rootRef");return e({editor:s,rootRef:p}),(h,m)=>s.value?(T(),P("div",Ct({key:0,class:["relative w-full",l.value],style:d.value},c.value,{ref_key:"rootRef",ref:p}),[b(JEe,{buttons:t.bubbleMenu,options:t.bubbleMenuOptions},null,8,["buttons","options"]),b(XEe,{class:"w-full overflow-x-auto rounded-t-lg border border-outline-gray-modals",buttons:t.fixedMenu},null,8,["buttons"]),b(iMe,{buttons:t.floatingMenu},null,8,["buttons"]),Ye(h.$slots,"top",{editor:s.value}),Ye(h.$slots,"editor",{editor:s.value},()=>[b(y(MSe),{editor:s.value},null,8,["editor"])]),Ye(h.$slots,"bottom",{editor:s.value})],16)):ie("",!0)}}),XIe={class:"lucide lucide-triangle-alert",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function ZIe(t,e){return T(),P("svg",XIe,[...e[0]||(e[0]=[u("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"},null,-1),u("path",{d:"M12 9v4"},null,-1),u("path",{d:"M12 17h.01"},null,-1)])])}Vt({name:"lucide-alert-triangle",render:ZIe});/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:WJ,setPrototypeOf:d7,isFrozen:QIe,getPrototypeOf:JIe,getOwnPropertyDescriptor:eOe}=Object;let{freeze:Ca,seal:to,create:fM}=Object,{apply:pM,construct:hM}=typeof Reflect!="undefined"&&Reflect;Ca||(Ca=function(e){return e});to||(to=function(e){return e});pM||(pM=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return e.apply(n,i)});hM||(hM=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const T_=Aa(Array.prototype.forEach),tOe=Aa(Array.prototype.lastIndexOf),c7=Aa(Array.prototype.pop),gv=Aa(Array.prototype.push),nOe=Aa(Array.prototype.splice),vw=Aa(String.prototype.toLowerCase),BT=Aa(String.prototype.toString),zT=Aa(String.prototype.match),vv=Aa(String.prototype.replace),rOe=Aa(String.prototype.indexOf),iOe=Aa(String.prototype.trim),po=Aa(Object.prototype.hasOwnProperty),aa=Aa(RegExp.prototype.test),yv=aOe(TypeError);function Aa(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return pM(t,e,r)}}function aOe(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return hM(t,n)}}function _n(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vw;d7&&d7(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const a=n(i);a!==i&&(QIe(e)||(e[r]=a),i=a)}t[i]=!0}return t}function sOe(t){for(let e=0;e<t.length;e++)po(t,e)||(t[e]=null);return t}function hu(t){const e=fM(null);for(const[n,r]of WJ(t))po(t,n)&&(Array.isArray(r)?e[n]=sOe(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=hu(r):e[n]=r);return e}function bv(t,e){for(;t!==null;){const r=eOe(t,e);if(r){if(r.get)return Aa(r.get);if(typeof r.value=="function")return Aa(r.value)}t=JIe(t)}function n(){return null}return n}const f7=Ca(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),UT=Ca(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),HT=Ca(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oOe=Ca(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qT=Ca(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),lOe=Ca(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),p7=Ca(["#text"]),h7=Ca(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),WT=Ca(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),m7=Ca(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),E_=Ca(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),uOe=to(/\{\{[\w\W]*|[\w\W]*\}\}/gm),dOe=to(/<%[\w\W]*|[\w\W]*%>/gm),cOe=to(/\$\{[\w\W]*/gm),fOe=to(/^data-[\-\w.\u00B7-\uFFFF]+$/),pOe=to(/^aria-[\-\w]+$/),GJ=to(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hOe=to(/^(?:\w+script|data):/i),mOe=to(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),YJ=to(/^html$/i),gOe=to(/^[a-z][.\w]*(-[.\w]+)+$/i);var g7=Object.freeze({__proto__:null,ARIA_ATTR:pOe,ATTR_WHITESPACE:mOe,CUSTOM_ELEMENT:gOe,DATA_ATTR:fOe,DOCTYPE_NAME:YJ,ERB_EXPR:dOe,IS_ALLOWED_URI:GJ,IS_SCRIPT_OR_DATA:hOe,MUSTACHE_EXPR:uOe,TMPLIT_EXPR:cOe});const _v={element:1,text:3,progressingInstruction:7,comment:8,document:9},vOe=function(){return typeof window=="undefined"?null:window},yOe=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const a="dompurify"+(r?"#"+r:"");try{return e.createPolicy(a,{createHTML(s){return s},createScriptURL(s){return s}})}catch(s){return console.warn("TrustedTypes policy "+a+" could not be created."),null}},v7=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function KJ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vOe();const e=Nt=>KJ(Nt);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==_v.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:l,NodeFilter:d,NamedNodeMap:c=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:h}=t,m=l.prototype,g=bv(m,"cloneNode"),v=bv(m,"remove"),_=bv(m,"nextSibling"),x=bv(m,"childNodes"),w=bv(m,"parentNode");if(typeof s=="function"){const Nt=n.createElement("template");Nt.content&&Nt.content.ownerDocument&&(n=Nt.content.ownerDocument)}let k,S="";const{implementation:C,createNodeIterator:A,createDocumentFragment:M,getElementsByTagName:$}=n,{importNode:R}=r;let I=v7();e.isSupported=typeof WJ=="function"&&typeof w=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:B,ERB_EXPR:j,TMPLIT_EXPR:z,DATA_ATTR:F,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:N,ATTR_WHITESPACE:O,CUSTOM_ELEMENT:V}=g7;let{IS_ALLOWED_URI:L}=g7,U=null;const G=_n({},[...f7,...UT,...HT,...qT,...p7]);let X=null;const re=_n({},[...h7,...WT,...m7,...E_]);let ee=Object.seal(fM(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,se=null;const te=Object.seal(fM(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ne=!0,ce=!0,ve=!1,Y=!0,K=!1,H=!0,ae=!1,be=!1,ue=!1,pe=!1,ye=!1,Me=!1,Te=!0,qe=!1;const We="user-content-";let at=!0,st=!1,Ve={},De=null;const Le=_n({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Re=null;const Se=_n({},["audio","video","img","source","image","track"]);let Ge=null;const en=_n({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ln="http://www.w3.org/1998/Math/MathML",Ne="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml";let ke=$e,Fe=!1,St=null;const Vn=_n({},[Ln,Ne,$e],BT);let Pe=_n({},["mi","mo","mn","ms","mtext"]),Ue=_n({},["annotation-xml"]);const Ot=_n({},["title","style","font","a","script"]);let wi=null;const Qg=["application/xhtml+xml","text/html"],kh="text/html";let mr=null,vd=null;const Jg=n.createElement("form"),Kc=function(Ae){return Ae instanceof RegExp||Ae instanceof Function},AA=function(){let Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(vd&&vd===Ae)){if((!Ae||typeof Ae!="object")&&(Ae={}),Ae=hu(Ae),wi=Qg.indexOf(Ae.PARSER_MEDIA_TYPE)===-1?kh:Ae.PARSER_MEDIA_TYPE,mr=wi==="application/xhtml+xml"?BT:vw,U=po(Ae,"ALLOWED_TAGS")?_n({},Ae.ALLOWED_TAGS,mr):G,X=po(Ae,"ALLOWED_ATTR")?_n({},Ae.ALLOWED_ATTR,mr):re,St=po(Ae,"ALLOWED_NAMESPACES")?_n({},Ae.ALLOWED_NAMESPACES,BT):Vn,Ge=po(Ae,"ADD_URI_SAFE_ATTR")?_n(hu(en),Ae.ADD_URI_SAFE_ATTR,mr):en,Re=po(Ae,"ADD_DATA_URI_TAGS")?_n(hu(Se),Ae.ADD_DATA_URI_TAGS,mr):Se,De=po(Ae,"FORBID_CONTENTS")?_n({},Ae.FORBID_CONTENTS,mr):Le,de=po(Ae,"FORBID_TAGS")?_n({},Ae.FORBID_TAGS,mr):hu({}),se=po(Ae,"FORBID_ATTR")?_n({},Ae.FORBID_ATTR,mr):hu({}),Ve=po(Ae,"USE_PROFILES")?Ae.USE_PROFILES:!1,ne=Ae.ALLOW_ARIA_ATTR!==!1,ce=Ae.ALLOW_DATA_ATTR!==!1,ve=Ae.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=Ae.ALLOW_SELF_CLOSE_IN_ATTR!==!1,K=Ae.SAFE_FOR_TEMPLATES||!1,H=Ae.SAFE_FOR_XML!==!1,ae=Ae.WHOLE_DOCUMENT||!1,pe=Ae.RETURN_DOM||!1,ye=Ae.RETURN_DOM_FRAGMENT||!1,Me=Ae.RETURN_TRUSTED_TYPE||!1,ue=Ae.FORCE_BODY||!1,Te=Ae.SANITIZE_DOM!==!1,qe=Ae.SANITIZE_NAMED_PROPS||!1,at=Ae.KEEP_CONTENT!==!1,st=Ae.IN_PLACE||!1,L=Ae.ALLOWED_URI_REGEXP||GJ,ke=Ae.NAMESPACE||$e,Pe=Ae.MATHML_TEXT_INTEGRATION_POINTS||Pe,Ue=Ae.HTML_INTEGRATION_POINTS||Ue,ee=Ae.CUSTOM_ELEMENT_HANDLING||{},Ae.CUSTOM_ELEMENT_HANDLING&&Kc(Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&Kc(Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&typeof Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(ce=!1),ye&&(pe=!0),Ve&&(U=_n({},p7),X=[],Ve.html===!0&&(_n(U,f7),_n(X,h7)),Ve.svg===!0&&(_n(U,UT),_n(X,WT),_n(X,E_)),Ve.svgFilters===!0&&(_n(U,HT),_n(X,WT),_n(X,E_)),Ve.mathMl===!0&&(_n(U,qT),_n(X,m7),_n(X,E_))),Ae.ADD_TAGS&&(typeof Ae.ADD_TAGS=="function"?te.tagCheck=Ae.ADD_TAGS:(U===G&&(U=hu(U)),_n(U,Ae.ADD_TAGS,mr))),Ae.ADD_ATTR&&(typeof Ae.ADD_ATTR=="function"?te.attributeCheck=Ae.ADD_ATTR:(X===re&&(X=hu(X)),_n(X,Ae.ADD_ATTR,mr))),Ae.ADD_URI_SAFE_ATTR&&_n(Ge,Ae.ADD_URI_SAFE_ATTR,mr),Ae.FORBID_CONTENTS&&(De===Le&&(De=hu(De)),_n(De,Ae.FORBID_CONTENTS,mr)),at&&(U["#text"]=!0),ae&&_n(U,["html","head","body"]),U.table&&(_n(U,["tbody"]),delete de.tbody),Ae.TRUSTED_TYPES_POLICY){if(typeof Ae.TRUSTED_TYPES_POLICY.createHTML!="function")throw yv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ae.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw yv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');k=Ae.TRUSTED_TYPES_POLICY,S=k.createHTML("")}else k===void 0&&(k=yOe(h,i)),k!==null&&typeof S=="string"&&(S=k.createHTML(""));Ca&&Ca(Ae),vd=Ae}},y6=_n({},[...UT,...HT,...oOe]),b6=_n({},[...qT,...lOe]),Zoe=function(Ae){let lt=w(Ae);(!lt||!lt.tagName)&&(lt={namespaceURI:ke,tagName:"template"});const Et=vw(Ae.tagName),xr=vw(lt.tagName);return St[Ae.namespaceURI]?Ae.namespaceURI===Ne?lt.namespaceURI===$e?Et==="svg":lt.namespaceURI===Ln?Et==="svg"&&(xr==="annotation-xml"||Pe[xr]):!!y6[Et]:Ae.namespaceURI===Ln?lt.namespaceURI===$e?Et==="math":lt.namespaceURI===Ne?Et==="math"&&Ue[xr]:!!b6[Et]:Ae.namespaceURI===$e?lt.namespaceURI===Ne&&!Ue[xr]||lt.namespaceURI===Ln&&!Pe[xr]?!1:!b6[Et]&&(Ot[Et]||!y6[Et]):!!(wi==="application/xhtml+xml"&&St[Ae.namespaceURI]):!1},zo=function(Ae){gv(e.removed,{element:Ae});try{w(Ae).removeChild(Ae)}catch(lt){v(Ae)}},Xc=function(Ae,lt){try{gv(e.removed,{attribute:lt.getAttributeNode(Ae),from:lt})}catch(Et){gv(e.removed,{attribute:null,from:lt})}if(lt.removeAttribute(Ae),Ae==="is")if(pe||ye)try{zo(lt)}catch(Et){}else try{lt.setAttribute(Ae,"")}catch(Et){}},_6=function(Ae){let lt=null,Et=null;if(ue)Ae="<remove></remove>"+Ae;else{const qr=zT(Ae,/^[\r\n\t ]+/);Et=qr&&qr[0]}wi==="application/xhtml+xml"&&ke===$e&&(Ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ae+"</body></html>");const xr=k?k.createHTML(Ae):Ae;if(ke===$e)try{lt=new p().parseFromString(xr,wi)}catch(qr){}if(!lt||!lt.documentElement){lt=C.createDocument(ke,"template",null);try{lt.documentElement.innerHTML=Fe?S:xr}catch(qr){}}const Ni=lt.body||lt.documentElement;return Ae&&Et&&Ni.insertBefore(n.createTextNode(Et),Ni.childNodes[0]||null),ke===$e?$.call(lt,ae?"html":"body")[0]:ae?lt.documentElement:Ni},x6=function(Ae){return A.call(Ae.ownerDocument||Ae,Ae,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},TA=function(Ae){return Ae instanceof f&&(typeof Ae.nodeName!="string"||typeof Ae.textContent!="string"||typeof Ae.removeChild!="function"||!(Ae.attributes instanceof c)||typeof Ae.removeAttribute!="function"||typeof Ae.setAttribute!="function"||typeof Ae.namespaceURI!="string"||typeof Ae.insertBefore!="function"||typeof Ae.hasChildNodes!="function")},w6=function(Ae){return typeof o=="function"&&Ae instanceof o};function Zl(Nt,Ae,lt){T_(Nt,Et=>{Et.call(e,Ae,lt,vd)})}const k6=function(Ae){let lt=null;if(Zl(I.beforeSanitizeElements,Ae,null),TA(Ae))return zo(Ae),!0;const Et=mr(Ae.nodeName);if(Zl(I.uponSanitizeElement,Ae,{tagName:Et,allowedTags:U}),H&&Ae.hasChildNodes()&&!w6(Ae.firstElementChild)&&aa(/<[/\w!]/g,Ae.innerHTML)&&aa(/<[/\w!]/g,Ae.textContent)||Ae.nodeType===_v.progressingInstruction||H&&Ae.nodeType===_v.comment&&aa(/<[/\w]/g,Ae.data))return zo(Ae),!0;if(!(te.tagCheck instanceof Function&&te.tagCheck(Et))&&(!U[Et]||de[Et])){if(!de[Et]&&C6(Et)&&(ee.tagNameCheck instanceof RegExp&&aa(ee.tagNameCheck,Et)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Et)))return!1;if(at&&!De[Et]){const xr=w(Ae)||Ae.parentNode,Ni=x(Ae)||Ae.childNodes;if(Ni&&xr){const qr=Ni.length;for(let Pa=qr-1;Pa>=0;--Pa){const Ql=g(Ni[Pa],!0);Ql.__removalCount=(Ae.__removalCount||0)+1,xr.insertBefore(Ql,_(Ae))}}}return zo(Ae),!0}return Ae instanceof l&&!Zoe(Ae)||(Et==="noscript"||Et==="noembed"||Et==="noframes")&&aa(/<\/no(script|embed|frames)/i,Ae.innerHTML)?(zo(Ae),!0):(K&&Ae.nodeType===_v.text&&(lt=Ae.textContent,T_([B,j,z],xr=>{lt=vv(lt,xr," ")}),Ae.textContent!==lt&&(gv(e.removed,{element:Ae.cloneNode()}),Ae.textContent=lt)),Zl(I.afterSanitizeElements,Ae,null),!1)},S6=function(Ae,lt,Et){if(Te&&(lt==="id"||lt==="name")&&(Et in n||Et in Jg))return!1;if(!(ce&&!se[lt]&&aa(F,lt))){if(!(ne&&aa(q,lt))){if(!(te.attributeCheck instanceof Function&&te.attributeCheck(lt,Ae))){if(!X[lt]||se[lt]){if(!(C6(Ae)&&(ee.tagNameCheck instanceof RegExp&&aa(ee.tagNameCheck,Ae)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Ae))&&(ee.attributeNameCheck instanceof RegExp&&aa(ee.attributeNameCheck,lt)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(lt,Ae))||lt==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&aa(ee.tagNameCheck,Et)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Et))))return!1}else if(!Ge[lt]){if(!aa(L,vv(Et,O,""))){if(!((lt==="src"||lt==="xlink:href"||lt==="href")&&Ae!=="script"&&rOe(Et,"data:")===0&&Re[Ae])){if(!(ve&&!aa(N,vv(Et,O,"")))){if(Et)return!1}}}}}}}return!0},C6=function(Ae){return Ae!=="annotation-xml"&&zT(Ae,V)},A6=function(Ae){Zl(I.beforeSanitizeAttributes,Ae,null);const{attributes:lt}=Ae;if(!lt||TA(Ae))return;const Et={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:X,forceKeepAttr:void 0};let xr=lt.length;for(;xr--;){const Ni=lt[xr],{name:qr,namespaceURI:Pa,value:Ql}=Ni,Sh=mr(qr),EA=Ql;let ki=qr==="value"?EA:iOe(EA);if(Et.attrName=Sh,Et.attrValue=ki,Et.keepAttr=!0,Et.forceKeepAttr=void 0,Zl(I.uponSanitizeAttribute,Ae,Et),ki=Et.attrValue,qe&&(Sh==="id"||Sh==="name")&&(Xc(qr,Ae),ki=We+ki),H&&aa(/((--!?|])>)|<\/(style|title|textarea)/i,ki)){Xc(qr,Ae);continue}if(Sh==="attributename"&&zT(ki,"href")){Xc(qr,Ae);continue}if(Et.forceKeepAttr)continue;if(!Et.keepAttr){Xc(qr,Ae);continue}if(!Y&&aa(/\/>/i,ki)){Xc(qr,Ae);continue}K&&T_([B,j,z],E6=>{ki=vv(ki,E6," ")});const T6=mr(Ae.nodeName);if(!S6(T6,Sh,ki)){Xc(qr,Ae);continue}if(k&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Pa)switch(h.getAttributeType(T6,Sh)){case"TrustedHTML":{ki=k.createHTML(ki);break}case"TrustedScriptURL":{ki=k.createScriptURL(ki);break}}if(ki!==EA)try{Pa?Ae.setAttributeNS(Pa,qr,ki):Ae.setAttribute(qr,ki),TA(Ae)?zo(Ae):c7(e.removed)}catch(E6){Xc(qr,Ae)}}Zl(I.afterSanitizeAttributes,Ae,null)},Qoe=function Nt(Ae){let lt=null;const Et=x6(Ae);for(Zl(I.beforeSanitizeShadowDOM,Ae,null);lt=Et.nextNode();)Zl(I.uponSanitizeShadowNode,lt,null),k6(lt),A6(lt),lt.content instanceof a&&Nt(lt.content);Zl(I.afterSanitizeShadowDOM,Ae,null)};return e.sanitize=function(Nt){let Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},lt=null,Et=null,xr=null,Ni=null;if(Fe=!Nt,Fe&&(Nt="<!-->"),typeof Nt!="string"&&!w6(Nt))if(typeof Nt.toString=="function"){if(Nt=Nt.toString(),typeof Nt!="string")throw yv("dirty is not a string, aborting")}else throw yv("toString is not a function");if(!e.isSupported)return Nt;if(be||AA(Ae),e.removed=[],typeof Nt=="string"&&(st=!1),st){if(Nt.nodeName){const Ql=mr(Nt.nodeName);if(!U[Ql]||de[Ql])throw yv("root node is forbidden and cannot be sanitized in-place")}}else if(Nt instanceof o)lt=_6("<!---->"),Et=lt.ownerDocument.importNode(Nt,!0),Et.nodeType===_v.element&&Et.nodeName==="BODY"||Et.nodeName==="HTML"?lt=Et:lt.appendChild(Et);else{if(!pe&&!K&&!ae&&Nt.indexOf("<")===-1)return k&&Me?k.createHTML(Nt):Nt;if(lt=_6(Nt),!lt)return pe?null:Me?S:""}lt&&ue&&zo(lt.firstChild);const qr=x6(st?Nt:lt);for(;xr=qr.nextNode();)k6(xr),A6(xr),xr.content instanceof a&&Qoe(xr.content);if(st)return Nt;if(pe){if(ye)for(Ni=M.call(lt.ownerDocument);lt.firstChild;)Ni.appendChild(lt.firstChild);else Ni=lt;return(X.shadowroot||X.shadowrootmode)&&(Ni=R.call(r,Ni,!0)),Ni}let Pa=ae?lt.outerHTML:lt.innerHTML;return ae&&U["!doctype"]&&lt.ownerDocument&&lt.ownerDocument.doctype&&lt.ownerDocument.doctype.name&&aa(YJ,lt.ownerDocument.doctype.name)&&(Pa="<!DOCTYPE "+lt.ownerDocument.doctype.name+`>
`+Pa),K&&T_([B,j,z],Ql=>{Pa=vv(Pa,Ql," ")}),k&&Me?k.createHTML(Pa):Pa},e.setConfig=function(){let Nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};AA(Nt),be=!0},e.clearConfig=function(){vd=null,be=!1},e.isValidAttribute=function(Nt,Ae,lt){vd||AA({});const Et=mr(Nt),xr=mr(Ae);return S6(Et,xr,lt)},e.addHook=function(Nt,Ae){typeof Ae=="function"&&gv(I[Nt],Ae)},e.removeHook=function(Nt,Ae){if(Ae!==void 0){const lt=tOe(I[Nt],Ae);return lt===-1?void 0:nOe(I[Nt],lt,1)[0]}return c7(I[Nt])},e.removeHooks=function(Nt){I[Nt]=[]},e.removeAllHooks=function(){I=v7()},e}KJ();Q([]);Q("");const bOe={class:"lucide lucide-panel-right-open",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function _Oe(t,e){return T(),P("svg",bOe,[...e[0]||(e[0]=[u("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"},null,-1),u("path",{d:"M15 3v18"},null,-1),u("path",{d:"m10 15-3-3 3-3"},null,-1)])])}Vt({name:"lucide-panel-right-open",render:_Oe});const xOe=typeof window<"u";var y7;xOe&&((y7=window==null?void 0:window.navigator)!=null&&y7.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const wOe=Object.freeze({aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"});Object.freeze(new Set(Object.keys(wOe)));const dh=typeof window<"u";var b7;dh&&(b7=window==null?void 0:window.navigator)!=null&&b7.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function _7(t){return t!=null}const kOe=Object.freeze({aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"});Object.freeze(new Set(Object.keys(kOe)));const SOe=dh&&("ontouchstart"in window||AOe()>0),COe=SOe?"pointerdown":"click";function AOe(){return typeof navigator<"u"&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)||0}function TOe(t,e,n=window.Event){const l=e,{type:r,bubbles:i=!1,cancelable:a=!1}=l,s=Si(l,["type","bubbles","cancelable"]);if(!_7(r)||r==="")return!1;let o;return _7(n)?o=new n(r,{bubbles:i,cancelable:a}):(o=document.createEvent("HTMLEvents"),o.initEvent(r,i,a)),Object.assign(o,s),t.dispatchEvent(o)}const EOe="clickoutside",MOe=new Set;dh&&document.addEventListener(COe,t=>{const e=t.target,n=t.composedPath&&t.composedPath();MOe.forEach(r=>{r!==e&&(n?!n.includes(r):!r.contains(e))&&(!r.__transferElement||r.__transferElement!==e&&!r.__transferElement.contains(e))&&TOe(r,{type:EOe})})},!0);const $Oe=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];let yw;if(dh){for(const t of $Oe)if(t[1]in document){yw=t;break}}J(()=>!1);const DOe=new Set,ROe=new WeakMap;if(dh&&yw){const t=yw[2],e=yw[4];document.addEventListener(e,()=>{if(DOe.forEach(n=>{n.value=!1}),document[t]){const n=ROe.get(document[t]);n&&(n.value=!0)}},!1)}const XJ=new Map;XJ.set("x",0);XJ.set("y",0);var Sp=[],POe=function(){return Sp.some(function(t){return t.activeTargets.length>0})},IOe=function(){return Sp.some(function(t){return t.skippedTargets.length>0})},x7="ResizeObserver loop completed with undelivered notifications.",OOe=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:x7}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=x7),window.dispatchEvent(t)},o1;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(o1||(o1={}));var Cp=function(t){return Object.freeze(t)},LOe=function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Cp(this)}return t}(),ZJ=function(){function t(e,n,r,i){return this.x=e,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Cp(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,i=e.top,a=e.right,s=e.bottom,o=e.left,l=e.width,d=e.height;return{x:n,y:r,top:i,right:a,bottom:s,left:o,width:l,height:d}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),OP=function(t){return t instanceof SVGElement&&"getBBox"in t},QJ=function(t){if(OP(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,a=i.offsetWidth,s=i.offsetHeight;return!(a||s||t.getClientRects().length)},w7=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},VOe=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},r0=typeof window<"u"?window:{},M_=new WeakMap,k7=/auto|scroll/,NOe=/^tb|vertical/,jOe=/msie|trident/i.test(r0.navigator&&r0.navigator.userAgent),Ho=function(t){return parseFloat(t||"0")},Vm=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new LOe((n?e:t)||0,(n?t:e)||0)},S7=Cp({devicePixelContentBoxSize:Vm(),borderBoxSize:Vm(),contentBoxSize:Vm(),contentRect:new ZJ(0,0,0,0)}),JJ=function(t,e){if(e===void 0&&(e=!1),M_.has(t)&&!e)return M_.get(t);if(QJ(t))return M_.set(t,S7),S7;var n=getComputedStyle(t),r=OP(t)&&t.ownerSVGElement&&t.getBBox(),i=!jOe&&n.boxSizing==="border-box",a=NOe.test(n.writingMode||""),s=!r&&k7.test(n.overflowY||""),o=!r&&k7.test(n.overflowX||""),l=r?0:Ho(n.paddingTop),d=r?0:Ho(n.paddingRight),c=r?0:Ho(n.paddingBottom),f=r?0:Ho(n.paddingLeft),p=r?0:Ho(n.borderTopWidth),h=r?0:Ho(n.borderRightWidth),m=r?0:Ho(n.borderBottomWidth),g=r?0:Ho(n.borderLeftWidth),v=f+d,_=l+c,x=g+h,w=p+m,k=o?t.offsetHeight-w-t.clientHeight:0,S=s?t.offsetWidth-x-t.clientWidth:0,C=i?v+x:0,A=i?_+w:0,M=r?r.width:Ho(n.width)-C-S,$=r?r.height:Ho(n.height)-A-k,R=M+v+S+x,I=$+_+k+w,B=Cp({devicePixelContentBoxSize:Vm(Math.round(M*devicePixelRatio),Math.round($*devicePixelRatio),a),borderBoxSize:Vm(R,I,a),contentBoxSize:Vm(M,$,a),contentRect:new ZJ(f,l,M,$)});return M_.set(t,B),B},eee=function(t,e,n){var r=JJ(t,n),i=r.borderBoxSize,a=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(e){case o1.DEVICE_PIXEL_CONTENT_BOX:return s;case o1.BORDER_BOX:return i;default:return a}},FOe=function(){function t(e){var n=JJ(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Cp([n.borderBoxSize]),this.contentBoxSize=Cp([n.contentBoxSize]),this.devicePixelContentBoxSize=Cp([n.devicePixelContentBoxSize])}return t}(),tee=function(t){if(QJ(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},BOe=function(){var t=1/0,e=[];Sp.forEach(function(a){if(a.activeTargets.length!==0){var s=[];a.activeTargets.forEach(function(o){var l=new FOe(o.target),d=tee(o.target);s.push(l),o.lastReportedSize=eee(o.target,o.observedBox),d<t&&(t=d)}),e.push(function(){a.callback.call(a.observer,s,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var i=r[n];i()}return t},C7=function(t){Sp.forEach(function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach(function(n){n.isActive()&&(tee(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))})})},zOe=function(){var t=0;for(C7(t);POe();)t=BOe(),C7(t);return IOe()&&OOe(),t>0},GT,nee=[],UOe=function(){return nee.splice(0).forEach(function(t){return t()})},HOe=function(t){if(!GT){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return UOe()}).observe(n,r),GT=function(){n.textContent="".concat(e?e--:e++)}}nee.push(t),GT()},qOe=function(t){HOe(function(){requestAnimationFrame(t)})},bw=0,WOe=function(){return!!bw},GOe=250,YOe={attributes:!0,characterData:!0,childList:!0,subtree:!0},A7=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],T7=function(t){return t===void 0&&(t=0),Date.now()+t},YT=!1,KOe=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=GOe),!YT){YT=!0;var r=T7(e);qOe(function(){var i=!1;try{i=zOe()}finally{if(YT=!1,e=r-T7(),!WOe())return;i?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,YOe)};document.body?n():r0.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),A7.forEach(function(n){return r0.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),A7.forEach(function(n){return r0.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t}(),mM=new KOe,E7=function(t){!bw&&t>0&&mM.start(),bw+=t,!bw&&mM.stop()},XOe=function(t){return!OP(t)&&!VOe(t)&&getComputedStyle(t).display==="inline"},ZOe=function(){function t(e,n){this.target=e,this.observedBox=n||o1.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=eee(this.target,this.observedBox,!0);return XOe(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),QOe=function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t}(),$_=new WeakMap,M7=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},D_=function(){function t(){}return t.connect=function(e,n){var r=new QOe(e,n);$_.set(e,r)},t.observe=function(e,n,r){var i=$_.get(e),a=i.observationTargets.length===0;M7(i.observationTargets,n)<0&&(a&&Sp.push(i),i.observationTargets.push(new ZOe(n,r&&r.box)),E7(1),mM.schedule())},t.unobserve=function(e,n){var r=$_.get(e),i=M7(r.observationTargets,n),a=r.observationTargets.length===1;i>=0&&(a&&Sp.splice(Sp.indexOf(r),1),r.observationTargets.splice(i,1),E7(-1))},t.disconnect=function(e){var n=this,r=$_.get(e);r.observationTargets.slice().forEach(function(i){return n.unobserve(e,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t}(),JOe=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");D_.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!w7(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");D_.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!w7(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");D_.unobserve(this,e)},t.prototype.disconnect=function(){D_.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();const e6e=new WeakMap;function t6e(t){var n;var e;for(let r=0,i=t.length;r<i;++r){const a=t[r],s=e6e.get(a.target);if(typeof s=="function"){const{inlineSize:o,blockSize:l}=(n=(e=a.borderBoxSize)==null?void 0:e[0])!=null?n:{},{offsetWidth:d,offsetHeight:c}=a.target;s(Object.assign(a,{offsetWidth:d,offsetHeight:c,width:o!=null?o:d,height:l!=null?l:c}))}}}new(dh&&window.ResizeObserver||JOe)(t6e);const n6e=Q(!1);J(()=>n6e.value);const $7="__theme_style__",KT="__theme_observer__",D7=Jt(new Map),R7=new Map;Je(D7,()=>{if(!dh)return;R7.clear();const t=document.head.querySelector(`#${$7}`);t&&document.head.removeChild(t);const e=document.createElement("style");let n=`.${KT} { width: 1px }`,r=1;for(const[i,[a,s]]of D7.entries())n+=` html.${a} .${KT}, .${s} .${KT} { width: ${++r}px }`,R7.set(r,i);e.textContent=n,e.id=$7,document.head.appendChild(e)});(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.vgl-layout{--vgl-placeholder-bg: red;--vgl-placeholder-opacity: 20%;--vgl-placeholder-z-index: 2;--vgl-item-resizing-z-index: 3;--vgl-item-resizing-opacity: 60%;--vgl-item-dragging-z-index: 3;--vgl-item-dragging-opacity: 100%;--vgl-resizer-size: 10px;--vgl-resizer-border-color: #444;--vgl-resizer-border-width: 2px;position:relative;box-sizing:border-box;transition:height .2s ease}.vgl-item{position:absolute;box-sizing:border-box;transition:.2s ease;transition-property:left,top,right}.vgl-item--placeholder{z-index:var(--vgl-placeholder-z-index, 2);-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:var(--vgl-placeholder-bg, red);opacity:var(--vgl-placeholder-opacity, 20%);transition-duration:.1s}.vgl-item--no-touch{touch-action:none}.vgl-item--transform{right:auto;left:0;transition-property:transform}.vgl-item--transform.vgl-item--rtl{right:0;left:auto}.vgl-item--resizing{z-index:var(--vgl-item-resizing-z-index, 3);-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:var(--vgl-item-resizing-opacity, 60%)}.vgl-item--dragging{z-index:var(--vgl-item-dragging-z-index, 3);-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:var(--vgl-item-dragging-opacity, 100%);transition:none}.vgl-item__resizer{position:absolute;right:0;bottom:0;box-sizing:border-box;width:var(--vgl-resizer-size);height:var(--vgl-resizer-size);cursor:se-resize}.vgl-item__resizer:before{position:absolute;top:0;right:3px;bottom:3px;left:0;content:"";border:0 solid var(--vgl-resizer-border-color);border-right-width:var(--vgl-resizer-border-width);border-bottom-width:var(--vgl-resizer-border-width)}.vgl-item__resizer--rtl{right:auto;left:0;cursor:sw-resize}.vgl-item__resizer--rtl:before{top:0;right:0;bottom:3px;left:3px;border-right-width:0;border-bottom-width:var(--vgl-resizer-border-width);border-left-width:var(--vgl-resizer-border-width)}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gM=function(t,e){return gM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},gM(t,e)};function Ce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gM(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var r6e=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),i6e=function(){function t(){this.browser=new r6e,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window!="undefined"}return t}(),Qt=new i6e;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Qt.wxa=!0,Qt.touchEventsSupported=!0):typeof document=="undefined"&&typeof self!="undefined"?Qt.worker=!0:!Qt.hasGlobalWindow||"Deno"in window?(Qt.node=!0,Qt.svgSupported=!0):a6e(navigator.userAgent,Qt);function a6e(t,e){var n=e.browser,r=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),a=t.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]),i&&(n.ie=!0,n.version=i[1]),a&&(n.edge=!0,n.version=a[1],n.newEdge=+a[1].split(".")[0]>18),s&&(n.weChat=!0),e.svgSupported=typeof SVGRect!="undefined",e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported=typeof document!="undefined";var o=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in o||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}var LP=12,ree="sans-serif",$c=LP+"px "+ree,s6e=20,o6e=100,l6e="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function u6e(t){var e={};if(typeof JSON=="undefined")return e;for(var n=0;n<t.length;n++){var r=String.fromCharCode(n+32),i=(t.charCodeAt(n)-s6e)/o6e;e[r]=i}return e}var d6e=u6e(l6e),Dc={createCanvas:function(){return typeof document!="undefined"&&document.createElement("canvas")},measureText:function(){var t,e;return function(n,r){if(!t){var i=Dc.createCanvas();t=i&&i.getContext("2d")}if(t)return e!==r&&(e=t.font=r||$c),t.measureText(n);n=n||"",r=r||$c;var a=/((?:\d+)?\.?\d*)px/.exec(r),s=a&&+a[1]||LP,o=0;if(r.indexOf("mono")>=0)o=s*n.length;else for(var l=0;l<n.length;l++){var d=d6e[n[l]];o+=d==null?s:d*s}return{width:o}}}(),loadImage:function(t,e,n){var r=new Image;return r.onload=e,r.onerror=n,r.src=t,r}},iee=Vl(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,e){return t["[object "+e+"]"]=!0,t},{}),aee=Vl(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,e){return t["[object "+e+"Array]"]=!0,t},{}),Pg=Object.prototype.toString,RC=Array.prototype,c6e=RC.forEach,f6e=RC.filter,VP=RC.slice,p6e=RC.map,P7=function(){}.constructor,R_=P7?P7.prototype:null,NP="__proto__",h6e=2311;function see(){return h6e++}function jP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];typeof console!="undefined"&&console.error.apply(console,t)}function xt(t){if(t==null||typeof t!="object")return t;var e=t,n=Pg.call(t);if(n==="[object Array]"){if(!i0(t)){e=[];for(var r=0,i=t.length;r<i;r++)e[r]=xt(t[r])}}else if(aee[n]){if(!i0(t)){var a=t.constructor;if(a.from)e=a.from(t);else{e=new a(t.length);for(var r=0,i=t.length;r<i;r++)e[r]=t[r]}}}else if(!iee[n]&&!i0(t)&&!pg(t)){e={};for(var s in t)t.hasOwnProperty(s)&&s!==NP&&(e[s]=xt(t[s]))}return e}function jt(t,e,n){if(!_t(e)||!_t(t))return n?xt(e):t;for(var r in e)if(e.hasOwnProperty(r)&&r!==NP){var i=t[r],a=e[r];_t(a)&&_t(i)&&!Be(a)&&!Be(i)&&!pg(a)&&!pg(i)&&!I7(a)&&!I7(i)&&!i0(a)&&!i0(i)?jt(i,a,n):(n||!(r in t))&&(t[r]=xt(e[r]))}return t}function FP(t,e){for(var n=t[0],r=1,i=t.length;r<i;r++)n=jt(n,t[r],e);return n}function Oe(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&n!==NP&&(t[n]=e[n]);return t}function yt(t,e,n){for(var r=rn(e),i=0,a=r.length;i<a;i++){var s=r[i];(n?e[s]!=null:t[s]==null)&&(t[s]=e[s])}return t}function Yt(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function m6e(t,e){var n=t.prototype;function r(){}r.prototype=e.prototype,t.prototype=new r;for(var i in n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e}function Hr(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(n?e[a]!=null:t[a]==null)&&(t[a]=e[a])}else yt(t,e,n)}function ta(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function oe(t,e,n){if(t&&e)if(t.forEach&&t.forEach===c6e)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)}function ze(t,e,n){if(!t)return[];if(!e)return BP(t);if(t.map&&t.map===p6e)return t.map(e,n);for(var r=[],i=0,a=t.length;i<a;i++)r.push(e.call(n,t[i],i,t));return r}function Vl(t,e,n,r){if(t&&e){for(var i=0,a=t.length;i<a;i++)n=e.call(r,n,t[i],i,t);return n}}function kn(t,e,n){if(!t)return[];if(!e)return BP(t);if(t.filter&&t.filter===f6e)return t.filter(e,n);for(var r=[],i=0,a=t.length;i<a;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}function g6e(t,e,n){if(t&&e){for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]}}function rn(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function v6e(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return t.apply(e,n.concat(VP.call(arguments)))}}var ut=R_&&gt(R_.bind)?R_.call.bind(R_.bind):v6e;function Pt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(VP.call(arguments)))}}function Be(t){return Array.isArray?Array.isArray(t):Pg.call(t)==="[object Array]"}function gt(t){return typeof t=="function"}function it(t){return typeof t=="string"}function vM(t){return Pg.call(t)==="[object String]"}function pn(t){return typeof t=="number"}function _t(t){var e=typeof t;return e==="function"||!!t&&e==="object"}function I7(t){return!!iee[Pg.call(t)]}function Ka(t){return!!aee[Pg.call(t)]}function pg(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function PC(t){return t.colorStops!=null}function y6e(t){return t.image!=null}function b6e(t){return Pg.call(t)==="[object RegExp]"}function l1(t){return t!==t}function gi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)if(t[n]!=null)return t[n]}function $t(t,e){return t!=null?t:e}function El(t,e,n){return t!=null?t:e!=null?e:n}function BP(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return VP.apply(t,e)}function zP(t){if(typeof t=="number")return[t,t,t,t];var e=t.length;return e===2?[t[0],t[1],t[0],t[1]]:e===3?[t[0],t[1],t[2],t[1]]:t}function Ta(t,e){if(!t)throw new Error(e)}function xo(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var oee="__ec_primitive__";function pk(t){t[oee]=!0}function i0(t){return t[oee]}var _6e=function(){function t(){this.data={}}return t.prototype.delete=function(e){var n=this.has(e);return n&&delete this.data[e],n},t.prototype.has=function(e){return this.data.hasOwnProperty(e)},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,n){return this.data[e]=n,this},t.prototype.keys=function(){return rn(this.data)},t.prototype.forEach=function(e){var n=this.data;for(var r in n)n.hasOwnProperty(r)&&e(n[r],r)},t}(),lee=typeof Map=="function";function x6e(){return lee?new Map:new _6e}var w6e=function(){function t(e){var n=Be(e);this.data=x6e();var r=this;e instanceof t?e.each(i):e&&oe(e,i);function i(a,s){n?r.set(a,s):r.set(s,a)}}return t.prototype.hasKey=function(e){return this.data.has(e)},t.prototype.get=function(e){return this.data.get(e)},t.prototype.set=function(e,n){return this.data.set(e,n),n},t.prototype.each=function(e,n){this.data.forEach(function(r,i){e.call(n,r,i)})},t.prototype.keys=function(){var e=this.data.keys();return lee?Array.from(e):e},t.prototype.removeKey=function(e){this.data.delete(e)},t}();function pt(t){return new w6e(t)}function u1(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];for(var i=t.length,r=0;r<e.length;r++)n[r+i]=e[r];return n}function IC(t,e){var n;if(Object.create)n=Object.create(t);else{var r=function(){};r.prototype=t,n=new r}return e&&Oe(n,e),n}function uee(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function ft(t,e){return t.hasOwnProperty(e)}function Or(){}var _w=180/Math.PI;function ch(t,e){return t==null&&(t=0),e==null&&(e=0),[t,e]}function ca(t,e){return t[0]=e[0],t[1]=e[1],t}function Fu(t){return[t[0],t[1]]}function k6e(t,e,n){return t[0]=e,t[1]=n,t}function O7(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function yM(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function np(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function bM(t){return Math.sqrt(S6e(t))}function S6e(t){return t[0]*t[0]+t[1]*t[1]}function xw(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Ig(t,e){var n=bM(e);return n===0?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function _M(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var ec=_M;function C6e(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var Ap=C6e;function ww(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function Ri(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function tc(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function nc(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var Lh=function(){function t(e,n){this.target=e,this.topTarget=n&&n.topTarget}return t}(),A6e=function(){function t(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(e){for(var n=e.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Lh(n,e),"dragstart",e.event))},t.prototype._drag=function(e){var n=this._draggingTarget;if(n){var r=e.offsetX,i=e.offsetY,a=r-this._x,s=i-this._y;this._x=r,this._y=i,n.drift(a,s,e),this.handler.dispatchToElement(new Lh(n,e),"drag",e.event);var o=this.handler.findHover(r,i,n).target,l=this._dropTarget;this._dropTarget=o,n!==o&&(l&&o!==l&&this.handler.dispatchToElement(new Lh(l,e),"dragleave",e.event),o&&o!==l&&this.handler.dispatchToElement(new Lh(o,e),"dragenter",e.event))}},t.prototype._dragEnd=function(e){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new Lh(n,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Lh(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},t}(),ao=function(){function t(e){e&&(this._$eventProcessor=e)}return t.prototype.on=function(e,n,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof n=="function"&&(i=r,r=n,n=null),!r||!e)return this;var s=this._$eventProcessor;n!=null&&s&&s.normalizeQuery&&(n=s.normalizeQuery(n)),a[e]||(a[e]=[]);for(var o=0;o<a[e].length;o++)if(a[e][o].h===r)return this;var l={h:r,query:n,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},d=a[e].length-1,c=a[e][d];return c&&c.callAtLast?a[e].splice(d,0,l):a[e].push(l),this},t.prototype.isSilent=function(e){var n=this._$handlers;return!n||!n[e]||!n[e].length},t.prototype.off=function(e,n){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(n){if(r[e]){for(var i=[],a=0,s=r[e].length;a<s;a++)r[e][a].h!==n&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},t.prototype.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var s=n.length,o=i.length,l=0;l<o;l++){var d=i[l];if(!(a&&a.filter&&d.query!=null&&!a.filter(e,d.query)))switch(s){case 0:d.h.call(d.ctx);break;case 1:d.h.call(d.ctx,n[0]);break;case 2:d.h.call(d.ctx,n[0],n[1]);break;default:d.h.apply(d.ctx,n);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},t.prototype.triggerWithContext=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var s=n.length,o=n[s-1],l=i.length,d=0;d<l;d++){var c=i[d];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(s){case 0:c.h.call(o);break;case 1:c.h.call(o,n[0]);break;case 2:c.h.call(o,n[0],n[1]);break;default:c.h.apply(o,n.slice(1,s-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},t}(),T6e=Math.log(2);function xM(t,e,n,r,i,a){var s=r+"-"+i,o=t.length;if(a.hasOwnProperty(s))return a[s];if(e===1){var l=Math.round(Math.log((1<<o)-1&~i)/T6e);return t[n][l]}for(var d=r|1<<n,c=n+1;r&1<<c;)c++;for(var f=0,p=0,h=0;p<o;p++){var m=1<<p;m&i||(f+=(h%2?-1:1)*t[n][p]*xM(t,e-1,c,d,i|m,a),h++)}return a[s]=f,f}function L7(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},i=xM(n,8,0,0,0,r);if(i!==0){for(var a=[],s=0;s<8;s++)for(var o=0;o<8;o++)a[o]==null&&(a[o]=0),a[o]+=((s+o)%2?-1:1)*xM(n,7,s===0?1:0,1<<s,1<<o,r)/i*e[s];return function(l,d,c){var f=d*a[6]+c*a[7]+1;l[0]=(d*a[0]+c*a[1]+a[2])/f,l[1]=(d*a[3]+c*a[4]+a[5])/f}}}var V7="___zrEVENTSAVED",XT=[];function E6e(t,e,n,r,i){return wM(XT,e,r,i,!0)&&wM(t,n,XT[0],XT[1])}function wM(t,e,n,r,i){if(e.getBoundingClientRect&&Qt.domSupported&&!dee(e)){var a=e[V7]||(e[V7]={}),s=M6e(e,a),o=$6e(s,a,i);if(o)return o(t,n,r),!0}return!1}function M6e(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var s=document.createElement("div"),o=s.style,l=a%2,d=(a>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[d]+":0",r[1-l]+":auto",i[1-d]+":auto",""].join("!important;"),t.appendChild(s),n.push(s)}return n}function $6e(t,e,n){for(var r=n?"invTrans":"trans",i=e[r],a=e.srcCoords,s=[],o=[],l=!0,d=0;d<4;d++){var c=t[d].getBoundingClientRect(),f=2*d,p=c.left,h=c.top;s.push(p,h),l=l&&a&&p===a[f]&&h===a[f+1],o.push(t[d].offsetLeft,t[d].offsetTop)}return l&&i?i:(e.srcCoords=s,e[r]=n?L7(o,s):L7(s,o))}function dee(t){return t.nodeName.toUpperCase()==="CANVAS"}var D6e=/([&<>"'])/g,R6e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ga(t){return t==null?"":(t+"").replace(D6e,function(e,n){return R6e[n]})}var P6e=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ZT=[],I6e=Qt.browser.firefox&&+Qt.browser.version.split(".")[0]<39;function kM(t,e,n,r){return n=n||{},r?N7(t,e,n):I6e&&e.layerX!=null&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):e.offsetX!=null?(n.zrX=e.offsetX,n.zrY=e.offsetY):N7(t,e,n),n}function N7(t,e,n){if(Qt.domSupported&&t.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(dee(t)){var a=t.getBoundingClientRect();n.zrX=r-a.left,n.zrY=i-a.top;return}else if(wM(ZT,t,r,i)){n.zrX=ZT[0],n.zrY=ZT[1];return}}n.zrX=n.zrY=0}function UP(t){return t||window.event}function As(t,e,n){if(e=UP(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var s=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];s&&kM(t,s,e,n)}else{kM(t,e,e,n);var a=O6e(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&P6e.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function O6e(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,r=t.deltaY;if(n==null||r==null)return e;var i=Math.abs(r!==0?r:n),a=r>0?-1:r<0?1:n>0?-1:1;return 3*i*a}function SM(t,e,n,r){t.addEventListener(e,n,r)}function L6e(t,e,n,r){t.removeEventListener(e,n,r)}var ed=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function j7(t){return t.which===2||t.which===3}var V6e=function(){function t(){this._track=[]}return t.prototype.recognize=function(e,n,r){return this._doTrack(e,n,r),this._recognize(e)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(e,n,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:n,event:e},s=0,o=i.length;s<o;s++){var l=i[s],d=kM(r,l,{});a.points.push([d.zrX,d.zrY]),a.touches.push(l)}this._track.push(a)}},t.prototype._recognize=function(e){for(var n in QT)if(QT.hasOwnProperty(n)){var r=QT[n](this._track,e);if(r)return r}},t}();function F7(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function N6e(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var QT={pinch:function(t,e){var n=t.length;if(n){var r=(t[n-1]||{}).points,i=(t[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=F7(r)/F7(i);!isFinite(a)&&(a=1),e.pinchScale=a;var s=N6e(r);return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}};function ds(){return[1,0,0,1,0,0]}function OC(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function HP(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Bu(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],a=e[0]*n[2]+e[2]*n[3],s=e[1]*n[2]+e[3]*n[3],o=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=a,t[3]=s,t[4]=o,t[5]=l,t}function Nl(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function fh(t,e,n,r){r===void 0&&(r=[0,0]);var i=e[0],a=e[2],s=e[4],o=e[1],l=e[3],d=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=i*f+o*c,t[1]=-i*c+o*f,t[2]=a*f+l*c,t[3]=-a*c+f*l,t[4]=f*(s-r[0])+c*(d-r[1])+r[0],t[5]=f*(d-r[1])-c*(s-r[0])+r[1],t}function qP(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}function Og(t,e){var n=e[0],r=e[2],i=e[4],a=e[1],s=e[3],o=e[5],l=n*s-a*r;return l?(l=1/l,t[0]=s*l,t[1]=-a*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*o-s*i)*l,t[5]=(a*i-n*o)*l,t):null}function j6e(t){var e=ds();return HP(e,t),e}var Bt=function(){function t(e,n){this.x=e||0,this.y=n||0}return t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(e,n){return this.x=e,this.y=n,this},t.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.scale=function(e){this.x*=e,this.y*=e},t.prototype.scaleAndAdd=function(e,n){this.x+=e.x*n,this.y+=e.y*n},t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},t.prototype.distance=function(e){var n=this.x-e.x,r=this.y-e.y;return Math.sqrt(n*n+r*r)},t.prototype.distanceSquare=function(e){var n=this.x-e.x,r=this.y-e.y;return n*n+r*r},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(e){if(e){var n=this.x,r=this.y;return this.x=e[0]*n+e[2]*r+e[4],this.y=e[1]*n+e[3]*r+e[5],this}},t.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},t.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},t.set=function(e,n,r){e.x=n,e.y=r},t.copy=function(e,n){e.x=n.x,e.y=n.y},t.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.lenSquare=function(e){return e.x*e.x+e.y*e.y},t.dot=function(e,n){return e.x*n.x+e.y*n.y},t.add=function(e,n,r){e.x=n.x+r.x,e.y=n.y+r.y},t.sub=function(e,n,r){e.x=n.x-r.x,e.y=n.y-r.y},t.scale=function(e,n,r){e.x=n.x*r,e.y=n.y*r},t.scaleAndAdd=function(e,n,r,i){e.x=n.x+r.x*i,e.y=n.y+r.y*i},t.lerp=function(e,n,r,i){var a=1-i;e.x=a*n.x+i*r.x,e.y=a*n.y+i*r.y},t}(),P_=Math.min,I_=Math.max,rf=new Bt,af=new Bt,sf=new Bt,of=new Bt,xv=new Bt,wv=new Bt,qt=function(){function t(e,n,r,i){r<0&&(e=e+r,r=-r),i<0&&(n=n+i,i=-i),this.x=e,this.y=n,this.width=r,this.height=i}return t.prototype.union=function(e){var n=P_(e.x,this.x),r=P_(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=I_(e.x+e.width,this.x+this.width)-n:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=I_(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=n,this.y=r},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(e){var n=this,r=e.width/n.width,i=e.height/n.height,a=ds();return Nl(a,a,[-n.x,-n.y]),qP(a,a,[r,i]),Nl(a,a,[e.x,e.y]),a},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var r=this,i=r.x,a=r.x+r.width,s=r.y,o=r.y+r.height,l=e.x,d=e.x+e.width,c=e.y,f=e.y+e.height,p=!(a<l||d<i||o<c||f<s);if(n){var h=1/0,m=0,g=Math.abs(a-l),v=Math.abs(d-i),_=Math.abs(o-c),x=Math.abs(f-s),w=Math.min(g,v),k=Math.min(_,x);a<l||d<i?w>m&&(m=w,g<v?Bt.set(wv,-g,0):Bt.set(wv,v,0)):w<h&&(h=w,g<v?Bt.set(xv,g,0):Bt.set(xv,-v,0)),o<c||f<s?k>m&&(m=k,_<x?Bt.set(wv,0,-_):Bt.set(wv,0,x)):w<h&&(h=w,_<x?Bt.set(xv,0,_):Bt.set(xv,0,-x))}return n&&Bt.copy(n,p?xv:wv),p},t.prototype.contain=function(e,n){var r=this;return e>=r.x&&e<=r.x+r.width&&n>=r.y&&n<=r.y+r.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(e,n){e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height},t.applyTransform=function(e,n,r){if(!r){e!==n&&t.copy(e,n);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],s=r[4],o=r[5];e.x=n.x*i+s,e.y=n.y*a+o,e.width=n.width*i,e.height=n.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}rf.x=sf.x=n.x,rf.y=of.y=n.y,af.x=of.x=n.x+n.width,af.y=sf.y=n.y+n.height,rf.transform(r),of.transform(r),af.transform(r),sf.transform(r),e.x=P_(rf.x,af.x,sf.x,of.x),e.y=P_(rf.y,af.y,sf.y,of.y);var l=I_(rf.x,af.x,sf.x,of.x),d=I_(rf.y,af.y,sf.y,of.y);e.width=l-e.x,e.height=d-e.y},t}(),cee="silent";function F6e(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:B6e}}function B6e(){ed(this.event)}var z6e=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.handler=null,n}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(ao),kv=function(){function t(e,n){this.x=e,this.y=n}return t}(),U6e=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],JT=new qt(0,0,0,0),fee=function(t){Ce(e,t);function e(n,r,i,a,s){var o=t.call(this)||this;return o._hovered=new kv(0,0),o.storage=n,o.painter=r,o.painterRoot=a,o._pointerSize=s,i=i||new z6e,o.proxy=null,o.setHandlerProxy(i),o._draggingMgr=new A6e(o),o}return e.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(oe(U6e,function(r){n.on&&n.on(r,this[r],this)},this),n.handler=this),this.proxy=n},e.prototype.mousemove=function(n){var r=n.zrX,i=n.zrY,a=pee(this,r,i),s=this._hovered,o=s.target;o&&!o.__zr&&(s=this.findHover(s.x,s.y),o=s.target);var l=this._hovered=a?new kv(r,i):this.findHover(r,i),d=l.target,c=this.proxy;c.setCursor&&c.setCursor(d?d.cursor:"default"),o&&d!==o&&this.dispatchToElement(s,"mouseout",n),this.dispatchToElement(l,"mousemove",n),d&&d!==o&&this.dispatchToElement(l,"mouseover",n)},e.prototype.mouseout=function(n){var r=n.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},e.prototype.resize=function(){this._hovered=new kv(0,0)},e.prototype.dispatch=function(n,r){var i=this[n];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(n){var r=this.proxy;r.setCursor&&r.setCursor(n)},e.prototype.dispatchToElement=function(n,r,i){n=n||{};var a=n.target;if(!(a&&a.silent)){for(var s="on"+r,o=F6e(r,n,i);a&&(a[s]&&(o.cancelBubble=!!a[s].call(a,o)),a.trigger(r,o),a=a.__hostTarget?a.__hostTarget:a.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(r,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[s]=="function"&&l[s].call(l,o),l.trigger&&l.trigger(r,o)}))}},e.prototype.findHover=function(n,r,i){var a=this.storage.getDisplayList(),s=new kv(n,r);if(B7(a,s,n,r,i),this._pointerSize&&!s.target){for(var o=[],l=this._pointerSize,d=l/2,c=new qt(n-d,r-d,l,l),f=a.length-1;f>=0;f--){var p=a[f];p!==i&&!p.ignore&&!p.ignoreCoarsePointer&&(!p.parent||!p.parent.ignoreCoarsePointer)&&(JT.copy(p.getBoundingRect()),p.transform&&JT.applyTransform(p.transform),JT.intersect(c)&&o.push(p))}if(o.length)for(var h=4,m=Math.PI/12,g=Math.PI*2,v=0;v<d;v+=h)for(var _=0;_<g;_+=m){var x=n+v*Math.cos(_),w=r+v*Math.sin(_);if(B7(o,s,x,w,i),s.target)return s}}return s},e.prototype.processGesture=function(n,r){this._gestureMgr||(this._gestureMgr=new V6e);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var s=a.type;n.gestureEvent=s;var o=new kv;o.target=a.target,this.dispatchToElement(o,s,a.event)}},e}(ao);oe(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){fee.prototype[t]=function(e){var n=e.zrX,r=e.zrY,i=pee(this,n,r),a,s;if((t!=="mouseup"||!i)&&(a=this.findHover(n,r),s=a.target),t==="mousedown")this._downEl=s,this._downPoint=[e.zrX,e.zrY],this._upEl=s;else if(t==="mouseup")this._upEl=s;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||ec(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,t,e)}});function H6e(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r=t,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var s=r.getClipPath();if(s&&!s.contain(e,n))return!1}r.silent&&(i=!0);var o=r.__hostTarget;r=o||r.parent}return i?cee:!0}return!1}function B7(t,e,n,r,i){for(var a=t.length-1;a>=0;a--){var s=t[a],o=void 0;if(s!==i&&!s.ignore&&(o=H6e(s,n,r))&&(!e.topTarget&&(e.topTarget=s),o!==cee)){e.target=s;break}}}function pee(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}var hee=32,Sv=7;function q6e(t){for(var e=0;t>=hee;)e|=t&1,t>>=1;return t+e}function z7(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){for(;i<n&&r(t[i],t[i-1])<0;)i++;W6e(t,e,i)}else for(;i<n&&r(t[i],t[i-1])>=0;)i++;return i-e}function W6e(t,e,n){for(n--;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}function U7(t,e,n,r,i){for(r===e&&r++;r<n;r++){for(var a=t[r],s=e,o=r,l;s<o;)l=s+o>>>1,i(a,t[l])<0?o=l:s=l+1;var d=r-s;switch(d){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;d>0;)t[s+d]=t[s+d-1],d--}t[s]=a}}function e4(t,e,n,r,i,a){var s=0,o=0,l=1;if(a(t,e[n+i])>0){for(o=r-i;l<o&&a(t,e[n+i+l])>0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),s+=i,l+=i}else{for(o=i+1;l<o&&a(t,e[n+i-l])<=0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var d=s;s=i-l,l=i-d}for(s++;s<l;){var c=s+(l-s>>>1);a(t,e[n+c])>0?s=c+1:l=c}return l}function t4(t,e,n,r,i,a){var s=0,o=0,l=1;if(a(t,e[n+i])<0){for(o=i+1;l<o&&a(t,e[n+i-l])<0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var d=s;s=i-l,l=i-d}else{for(o=r-i;l<o&&a(t,e[n+i+l])>=0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),s+=i,l+=i}for(s++;s<l;){var c=s+(l-s>>>1);a(t,e[n+c])<0?l=c:s=c+1}return l}function G6e(t,e){var n=Sv,r,i,a=0,s=[];r=[],i=[];function o(h,m){r[a]=h,i[a]=m,a+=1}function l(){for(;a>1;){var h=a-2;if(h>=1&&i[h-1]<=i[h]+i[h+1]||h>=2&&i[h-2]<=i[h]+i[h-1])i[h-1]<i[h+1]&&h--;else if(i[h]>i[h+1])break;c(h)}}function d(){for(;a>1;){var h=a-2;h>0&&i[h-1]<i[h+1]&&h--,c(h)}}function c(h){var m=r[h],g=i[h],v=r[h+1],_=i[h+1];i[h]=g+_,h===a-3&&(r[h+1]=r[h+2],i[h+1]=i[h+2]),a--;var x=t4(t[v],t,m,g,0,e);m+=x,g-=x,g!==0&&(_=e4(t[m+g-1],t,v,_,_-1,e),_!==0&&(g<=_?f(m,g,v,_):p(m,g,v,_)))}function f(h,m,g,v){var _=0;for(_=0;_<m;_++)s[_]=t[h+_];var x=0,w=g,k=h;if(t[k++]=t[w++],--v===0){for(_=0;_<m;_++)t[k+_]=s[x+_];return}if(m===1){for(_=0;_<v;_++)t[k+_]=t[w+_];t[k+v]=s[x];return}for(var S=n,C,A,M;;){C=0,A=0,M=!1;do if(e(t[w],s[x])<0){if(t[k++]=t[w++],A++,C=0,--v===0){M=!0;break}}else if(t[k++]=s[x++],C++,A=0,--m===1){M=!0;break}while((C|A)<S);if(M)break;do{if(C=t4(t[w],s,x,m,0,e),C!==0){for(_=0;_<C;_++)t[k+_]=s[x+_];if(k+=C,x+=C,m-=C,m<=1){M=!0;break}}if(t[k++]=t[w++],--v===0){M=!0;break}if(A=e4(s[x],t,w,v,0,e),A!==0){for(_=0;_<A;_++)t[k+_]=t[w+_];if(k+=A,w+=A,v-=A,v===0){M=!0;break}}if(t[k++]=s[x++],--m===1){M=!0;break}S--}while(C>=Sv||A>=Sv);if(M)break;S<0&&(S=0),S+=2}if(n=S,n<1&&(n=1),m===1){for(_=0;_<v;_++)t[k+_]=t[w+_];t[k+v]=s[x]}else{if(m===0)throw new Error;for(_=0;_<m;_++)t[k+_]=s[x+_]}}function p(h,m,g,v){var _=0;for(_=0;_<v;_++)s[_]=t[g+_];var x=h+m-1,w=v-1,k=g+v-1,S=0,C=0;if(t[k--]=t[x--],--m===0){for(S=k-(v-1),_=0;_<v;_++)t[S+_]=s[_];return}if(v===1){for(k-=m,x-=m,C=k+1,S=x+1,_=m-1;_>=0;_--)t[C+_]=t[S+_];t[k]=s[w];return}for(var A=n;;){var M=0,$=0,R=!1;do if(e(s[w],t[x])<0){if(t[k--]=t[x--],M++,$=0,--m===0){R=!0;break}}else if(t[k--]=s[w--],$++,M=0,--v===1){R=!0;break}while((M|$)<A);if(R)break;do{if(M=m-t4(s[w],t,h,m,m-1,e),M!==0){for(k-=M,x-=M,m-=M,C=k+1,S=x+1,_=M-1;_>=0;_--)t[C+_]=t[S+_];if(m===0){R=!0;break}}if(t[k--]=s[w--],--v===1){R=!0;break}if($=v-e4(t[x],s,0,v,v-1,e),$!==0){for(k-=$,w-=$,v-=$,C=k+1,S=w+1,_=0;_<$;_++)t[C+_]=s[S+_];if(v<=1){R=!0;break}}if(t[k--]=t[x--],--m===0){R=!0;break}A--}while(M>=Sv||$>=Sv);if(R)break;A<0&&(A=0),A+=2}if(n=A,n<1&&(n=1),v===1){for(k-=m,x-=m,C=k+1,S=x+1,_=m-1;_>=0;_--)t[C+_]=t[S+_];t[k]=s[w]}else{if(v===0)throw new Error;for(S=k-(v-1),_=0;_<v;_++)t[S+_]=s[_]}}return{mergeRuns:l,forceMergeRuns:d,pushRun:o}}function kw(t,e,n,r){n||(n=0),r||(r=t.length);var i=r-n;if(!(i<2)){var a=0;if(i<hee){a=z7(t,n,r,e),U7(t,n,r,n+a,e);return}var s=G6e(t,e),o=q6e(i);do{if(a=z7(t,n,r,e),a<o){var l=i;l>o&&(l=o),U7(t,n,n+l,n+a,e),a=l}s.pushRun(n,a),s.mergeRuns(),i-=a,n+=a}while(i!==0);s.forceMergeRuns()}}var ns=1,cy=2,vm=4,H7=!1;function n4(){H7||(H7=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function q7(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var Y6e=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=q7}return t.prototype.traverse=function(e,n){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,n)},t.prototype.getDisplayList=function(e,n){n=n||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(n),r},t.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var n=this._roots,r=this._displayList,i=0,a=n.length;i<a;i++)this._updateAndAddDisplayable(n[i],null,e);r.length=this._displayListLen,kw(r,q7)},t.prototype._updateAndAddDisplayable=function(e,n,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)n=null;else if(i){n?n=n.slice():n=[];for(var a=i,s=e;a;)a.parent=s,a.updateTransform(),n.push(a),s=a,a=a.getClipPath()}if(e.childrenRef){for(var o=e.childrenRef(),l=0;l<o.length;l++){var d=o[l];e.__dirty&&(d.__dirty|=ns),this._updateAndAddDisplayable(d,n,r)}e.__dirty=0}else{var c=e;n&&n.length?c.__clipPaths=n:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(n4(),c.z=0),isNaN(c.z2)&&(n4(),c.z2=0),isNaN(c.zlevel)&&(n4(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=e.getDecalElement&&e.getDecalElement();f&&this._updateAndAddDisplayable(f,n,r);var p=e.getTextGuideLine();p&&this._updateAndAddDisplayable(p,n,r);var h=e.getTextContent();h&&this._updateAndAddDisplayable(h,n,r)}},t.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},t.prototype.delRoot=function(e){if(e instanceof Array){for(var n=0,r=e.length;n<r;n++)this.delRoot(e[n]);return}var i=Yt(this._roots,e);i>=0&&this._roots.splice(i,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),hk;hk=Qt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var a0={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)))},elasticOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-a0.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?a0.bounceIn(t*2)*.5:a0.bounceOut(t*2-1)*.5+.5}},O_=Math.pow,yc=Math.sqrt,mk=1e-8,mee=1e-4,W7=yc(3),L_=1/3,hl=ch(),Ps=ch(),Nm=ch();function rc(t){return t>-mk&&t<mk}function gee(t){return t>mk||t<-mk}function ei(t,e,n,r,i){var a=1-i;return a*a*(a*t+3*i*e)+i*i*(i*r+3*a*n)}function G7(t,e,n,r,i){var a=1-i;return 3*(((e-t)*a+2*(n-e)*i)*a+(r-n)*i*i)}function gk(t,e,n,r,i,a){var s=r+3*(e-n)-t,o=3*(n-e*2+t),l=3*(e-t),d=t-i,c=o*o-3*s*l,f=o*l-9*s*d,p=l*l-3*o*d,h=0;if(rc(c)&&rc(f))if(rc(o))a[0]=0;else{var m=-l/o;m>=0&&m<=1&&(a[h++]=m)}else{var g=f*f-4*c*p;if(rc(g)){var v=f/c,m=-o/s+v,_=-v/2;m>=0&&m<=1&&(a[h++]=m),_>=0&&_<=1&&(a[h++]=_)}else if(g>0){var x=yc(g),w=c*o+1.5*s*(-f+x),k=c*o+1.5*s*(-f-x);w<0?w=-O_(-w,L_):w=O_(w,L_),k<0?k=-O_(-k,L_):k=O_(k,L_);var m=(-o-(w+k))/(3*s);m>=0&&m<=1&&(a[h++]=m)}else{var S=(2*c*o-3*s*f)/(2*yc(c*c*c)),C=Math.acos(S)/3,A=yc(c),M=Math.cos(C),m=(-o-2*A*M)/(3*s),_=(-o+A*(M+W7*Math.sin(C)))/(3*s),$=(-o+A*(M-W7*Math.sin(C)))/(3*s);m>=0&&m<=1&&(a[h++]=m),_>=0&&_<=1&&(a[h++]=_),$>=0&&$<=1&&(a[h++]=$)}}return h}function vee(t,e,n,r,i){var a=6*n-12*e+6*t,s=9*e+3*r-3*t-9*n,o=3*e-3*t,l=0;if(rc(s)){if(gee(a)){var d=-o/a;d>=0&&d<=1&&(i[l++]=d)}}else{var c=a*a-4*s*o;if(rc(c))i[0]=-a/(2*s);else if(c>0){var f=yc(c),d=(-a+f)/(2*s),p=(-a-f)/(2*s);d>=0&&d<=1&&(i[l++]=d),p>=0&&p<=1&&(i[l++]=p)}}return l}function Rc(t,e,n,r,i,a){var s=(e-t)*i+t,o=(n-e)*i+e,l=(r-n)*i+n,d=(o-s)*i+s,c=(l-o)*i+o,f=(c-d)*i+d;a[0]=t,a[1]=s,a[2]=d,a[3]=f,a[4]=f,a[5]=c,a[6]=l,a[7]=r}function yee(t,e,n,r,i,a,s,o,l,d,c){var f,p=.005,h=1/0,m,g,v,_;hl[0]=l,hl[1]=d;for(var x=0;x<1;x+=.05)Ps[0]=ei(t,n,i,s,x),Ps[1]=ei(e,r,a,o,x),v=Ap(hl,Ps),v<h&&(f=x,h=v);h=1/0;for(var w=0;w<32&&!(p<mee);w++)m=f-p,g=f+p,Ps[0]=ei(t,n,i,s,m),Ps[1]=ei(e,r,a,o,m),v=Ap(Ps,hl),m>=0&&v<h?(f=m,h=v):(Nm[0]=ei(t,n,i,s,g),Nm[1]=ei(e,r,a,o,g),_=Ap(Nm,hl),g<=1&&_<h?(f=g,h=_):p*=.5);return c&&(c[0]=ei(t,n,i,s,f),c[1]=ei(e,r,a,o,f)),yc(h)}function K6e(t,e,n,r,i,a,s,o,l){for(var d=t,c=e,f=0,p=1/l,h=1;h<=l;h++){var m=h*p,g=ei(t,n,i,s,m),v=ei(e,r,a,o,m),_=g-d,x=v-c;f+=Math.sqrt(_*_+x*x),d=g,c=v}return f}function ci(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function CM(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function X6e(t,e,n,r,i){var a=t-2*e+n,s=2*(e-t),o=t-r,l=0;if(rc(a)){if(gee(s)){var d=-o/s;d>=0&&d<=1&&(i[l++]=d)}}else{var c=s*s-4*a*o;if(rc(c)){var d=-s/(2*a);d>=0&&d<=1&&(i[l++]=d)}else if(c>0){var f=yc(c),d=(-s+f)/(2*a),p=(-s-f)/(2*a);d>=0&&d<=1&&(i[l++]=d),p>=0&&p<=1&&(i[l++]=p)}}return l}function bee(t,e,n){var r=t+n-2*e;return r===0?.5:(t-e)/r}function d1(t,e,n,r,i){var a=(e-t)*r+t,s=(n-e)*r+e,o=(s-a)*r+a;i[0]=t,i[1]=a,i[2]=o,i[3]=o,i[4]=s,i[5]=n}function _ee(t,e,n,r,i,a,s,o,l){var d,c=.005,f=1/0;hl[0]=s,hl[1]=o;for(var p=0;p<1;p+=.05){Ps[0]=ci(t,n,i,p),Ps[1]=ci(e,r,a,p);var h=Ap(hl,Ps);h<f&&(d=p,f=h)}f=1/0;for(var m=0;m<32&&!(c<mee);m++){var g=d-c,v=d+c;Ps[0]=ci(t,n,i,g),Ps[1]=ci(e,r,a,g);var h=Ap(Ps,hl);if(g>=0&&h<f)d=g,f=h;else{Nm[0]=ci(t,n,i,v),Nm[1]=ci(e,r,a,v);var _=Ap(Nm,hl);v<=1&&_<f?(d=v,f=_):c*=.5}}return l&&(l[0]=ci(t,n,i,d),l[1]=ci(e,r,a,d)),yc(f)}function Z6e(t,e,n,r,i,a,s){for(var o=t,l=e,d=0,c=1/s,f=1;f<=s;f++){var p=f*c,h=ci(t,n,i,p),m=ci(e,r,a,p),g=h-o,v=m-l;d+=Math.sqrt(g*g+v*v),o=h,l=m}return d}var Q6e=/cubic-bezier\(([0-9,\.e ]+)\)/;function WP(t){var e=t&&Q6e.exec(t);if(e){var n=e[1].split(","),r=+xo(n[0]),i=+xo(n[1]),a=+xo(n[2]),s=+xo(n[3]);if(isNaN(r+i+a+s))return;var o=[];return function(l){return l<=0?0:l>=1?1:gk(0,r,a,1,l,o)&&ei(0,i,s,1,o[0])}}}var J6e=function(){function t(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Or,this.ondestroy=e.ondestroy||Or,this.onrestart=e.onrestart||Or,e.easing&&this.setEasing(e.easing)}return t.prototype.step=function(e,n){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var s=this.easingFunc,o=s?s(a):a;if(this.onframe(o),a===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(e){this.easing=e,this.easingFunc=gt(e)?e:a0[e]||WP(e)},t}(),xee=function(){function t(e){this.value=e}return t}(),eLe=function(){function t(){this._len=0}return t.prototype.insert=function(e){var n=new xee(e);return this.insertEntry(n),n},t.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},t.prototype.remove=function(e){var n=e.prev,r=e.next;n?n.next=r:this.head=r,r?r.prev=n:this.tail=n,e.next=e.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),yb=function(){function t(e){this._list=new eLe,this._maxSize=10,this._map={},this._maxSize=e}return t.prototype.put=function(e,n){var r=this._list,i=this._map,a=null;if(i[e]==null){var s=r.len(),o=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}o?o.value=n:o=new xee(n),o.key=e,r.insertEntry(o),i[e]=o}return a},t.prototype.get=function(e){var n=this._map[e],r=this._list;if(n!=null)return n!==r.tail&&(r.remove(n),r.insertEntry(n)),n.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),Y7={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Co(t){return t=Math.round(t),t<0?0:t>255?255:t}function tLe(t){return t=Math.round(t),t<0?0:t>360?360:t}function c1(t){return t<0?0:t>1?1:t}function r4(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?Co(parseFloat(e)/100*255):Co(parseInt(e,10))}function Tp(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?c1(parseFloat(e)/100):c1(parseFloat(e))}function i4(t,e,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?t+(e-t)*n*6:n*2<1?e:n*3<2?t+(e-t)*(2/3-n)*6:t}function ic(t,e,n){return t+(e-t)*n}function Ss(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function AM(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var wee=new yb(20),V_=null;function Vh(t,e){V_&&AM(V_,e),V_=wee.put(t,V_||e.slice())}function cs(t,e){if(t){e=e||[];var n=wee.get(t);if(n)return AM(e,n);t=t+"";var r=t.replace(/ /g,"").toLowerCase();if(r in Y7)return AM(e,Y7[r]),Vh(t,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){Ss(e,0,0,0,1);return}return Ss(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),Vh(t,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){Ss(e,0,0,0,1);return}return Ss(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),Vh(t,e),e}return}var s=r.indexOf("("),o=r.indexOf(")");if(s!==-1&&o+1===i){var l=r.substr(0,s),d=r.substr(s+1,o-(s+1)).split(","),c=1;switch(l){case"rgba":if(d.length!==4)return d.length===3?Ss(e,+d[0],+d[1],+d[2],1):Ss(e,0,0,0,1);c=Tp(d.pop());case"rgb":if(d.length>=3)return Ss(e,r4(d[0]),r4(d[1]),r4(d[2]),d.length===3?c:Tp(d[3])),Vh(t,e),e;Ss(e,0,0,0,1);return;case"hsla":if(d.length!==4){Ss(e,0,0,0,1);return}return d[3]=Tp(d[3]),TM(d,e),Vh(t,e),e;case"hsl":if(d.length!==3){Ss(e,0,0,0,1);return}return TM(d,e),Vh(t,e),e;default:return}}Ss(e,0,0,0,1)}}function TM(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=Tp(t[1]),i=Tp(t[2]),a=i<=.5?i*(r+1):i+r-i*r,s=i*2-a;return e=e||[],Ss(e,Co(i4(s,a,n+1/3)*255),Co(i4(s,a,n)*255),Co(i4(s,a,n-1/3)*255),1),t.length===4&&(e[3]=t[3]),e}function nLe(t){if(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=a-i,o=(a+i)/2,l,d;if(s===0)l=0,d=0;else{o<.5?d=s/(a+i):d=s/(2-a-i);var c=((a-e)/6+s/2)/s,f=((a-n)/6+s/2)/s,p=((a-r)/6+s/2)/s;e===a?l=p-f:n===a?l=1/3+c-p:r===a&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var h=[l*360,d,o];return t[3]!=null&&h.push(t[3]),h}}function EM(t,e){var n=cs(t);if(n){for(var r=0;r<3;r++)e<0?n[r]=n[r]*(1-e)|0:n[r]=(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return zu(n,n.length===4?"rgba":"rgb")}}function a4(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){n=n||[];var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),s=e[i],o=e[a],l=r-i;return n[0]=Co(ic(s[0],o[0],l)),n[1]=Co(ic(s[1],o[1],l)),n[2]=Co(ic(s[2],o[2],l)),n[3]=c1(ic(s[3],o[3],l)),n}}function rLe(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),s=cs(e[i]),o=cs(e[a]),l=r-i,d=zu([Co(ic(s[0],o[0],l)),Co(ic(s[1],o[1],l)),Co(ic(s[2],o[2],l)),c1(ic(s[3],o[3],l))],"rgba");return n?{color:d,leftIndex:i,rightIndex:a,value:r}:d}}function s0(t,e,n,r){var i=cs(t);if(t)return i=nLe(i),e!=null&&(i[0]=tLe(e)),n!=null&&(i[1]=Tp(n)),r!=null&&(i[2]=Tp(r)),zu(TM(i),"rgba")}function vk(t,e){var n=cs(t);if(n&&e!=null)return n[3]=c1(e),zu(n,"rgba")}function zu(t,e){if(!(!t||!t.length)){var n=t[0]+","+t[1]+","+t[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(n+=","+t[3]),e+"("+n+")"}}function yk(t,e){var n=cs(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}var K7=new yb(100);function MM(t){if(it(t)){var e=K7.get(t);return e||(e=EM(t,-.1),K7.put(t,e)),e}else if(PC(t)){var n=Oe({},t);return n.colorStops=ze(t.colorStops,function(r){return{offset:r.offset,color:EM(r.color,-.1)}}),n}return t}var bk=Math.round;function f1(t){var e;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var n=cs(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}return{color:t,opacity:e==null?1:e}}var X7=1e-4;function ac(t){return t<X7&&t>-X7}function N_(t){return bk(t*1e3)/1e3}function $M(t){return bk(t*1e4)/1e4}function iLe(t){return"matrix("+N_(t[0])+","+N_(t[1])+","+N_(t[2])+","+N_(t[3])+","+$M(t[4])+","+$M(t[5])+")"}var aLe={left:"start",right:"end",center:"middle",middle:"middle"};function sLe(t,e,n){return n==="top"?t+=e/2:n==="bottom"&&(t-=e/2),t}function oLe(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function lLe(t){var e=t.style,n=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function kee(t){return t&&!!t.image}function uLe(t){return t&&!!t.svgElement}function GP(t){return kee(t)||uLe(t)}function See(t){return t.type==="linear"}function Cee(t){return t.type==="radial"}function Aee(t){return t&&(t.type==="linear"||t.type==="radial")}function LC(t){return"url(#"+t+")"}function Tee(t){var e=t.getGlobalScale(),n=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function Eee(t){var e=t.x||0,n=t.y||0,r=(t.rotation||0)*_w,i=$t(t.scaleX,1),a=$t(t.scaleY,1),s=t.skewX||0,o=t.skewY||0,l=[];return(e||n)&&l.push("translate("+e+"px,"+n+"px)"),r&&l.push("rotate("+r+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(s||o)&&l.push("skew("+bk(s*_w)+"deg, "+bk(o*_w)+"deg)"),l.join(" ")}var dLe=function(){return Qt.hasGlobalWindow&&gt(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer!="undefined"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}}(),DM=Array.prototype.slice;function bu(t,e,n){return(e-t)*n+t}function s4(t,e,n,r){for(var i=e.length,a=0;a<i;a++)t[a]=bu(e[a],n[a],r);return t}function cLe(t,e,n,r){for(var i=e.length,a=i&&e[0].length,s=0;s<i;s++){t[s]||(t[s]=[]);for(var o=0;o<a;o++)t[s][o]=bu(e[s][o],n[s][o],r)}return t}function j_(t,e,n,r){for(var i=e.length,a=0;a<i;a++)t[a]=e[a]+n[a]*r;return t}function Z7(t,e,n,r){for(var i=e.length,a=i&&e[0].length,s=0;s<i;s++){t[s]||(t[s]=[]);for(var o=0;o<a;o++)t[s][o]=e[s][o]+n[s][o]*r}return t}function fLe(t,e){for(var n=t.length,r=e.length,i=n>r?e:t,a=Math.min(n,r),s=i[a-1]||{color:[0,0,0,0],offset:0},o=a;o<Math.max(n,r);o++)i.push({offset:s.offset,color:s.color.slice()})}function pLe(t,e,n){var r=t,i=e;if(!(!r.push||!i.push)){var a=r.length,s=i.length;if(a!==s){var o=a>s;if(o)r.length=s;else for(var l=a;l<s;l++)r.push(n===1?i[l]:DM.call(i[l]))}for(var d=r[0]&&r[0].length,l=0;l<r.length;l++)if(n===1)isNaN(r[l])&&(r[l]=i[l]);else for(var c=0;c<d;c++)isNaN(r[l][c])&&(r[l][c]=i[l][c])}}function o0(t){if(ta(t)){var e=t.length;if(ta(t[0])){for(var n=[],r=0;r<e;r++)n.push(DM.call(t[r]));return n}return DM.call(t)}return t}function Sw(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function hLe(t){return ta(t&&t[0])?2:1}var F_=0,Cw=1,Mee=2,fy=3,RM=4,PM=5,Q7=6;function J7(t){return t===RM||t===PM}function B_(t){return t===Cw||t===Mee}var Cv=[0,0,0,0],mLe=function(){function t(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(e,n,r){this._needsSort=!0;var i=this.keyframes,a=i.length,s=!1,o=Q7,l=n;if(ta(n)){var d=hLe(n);o=d,(d===1&&!pn(n[0])||d===2&&!pn(n[0][0]))&&(s=!0)}else if(pn(n)&&!l1(n))o=F_;else if(it(n))if(!isNaN(+n))o=F_;else{var c=cs(n);c&&(l=c,o=fy)}else if(PC(n)){var f=Oe({},l);f.colorStops=ze(n.colorStops,function(h){return{offset:h.offset,color:cs(h.color)}}),See(n)?o=RM:Cee(n)&&(o=PM),l=f}a===0?this.valType=o:(o!==this.valType||o===Q7)&&(s=!0),this.discrete=this.discrete||s;var p={time:e,value:l,rawValue:n,percent:0};return r&&(p.easing=r,p.easingFunc=gt(r)?r:a0[r]||WP(r)),i.push(p),p},t.prototype.prepare=function(e,n){var r=this.keyframes;this._needsSort&&r.sort(function(g,v){return g.time-v.time});for(var i=this.valType,a=r.length,s=r[a-1],o=this.discrete,l=B_(i),d=J7(i),c=0;c<a;c++){var f=r[c],p=f.value,h=s.value;f.percent=f.time/e,o||(l&&c!==a-1?pLe(p,h,i):d&&fLe(p.colorStops,h.colorStops))}if(!o&&i!==PM&&n&&this.needsAnimate()&&n.needsAnimate()&&i===n.valType&&!n._finished){this._additiveTrack=n;for(var m=r[0].value,c=0;c<a;c++)i===F_?r[c].additiveValue=r[c].value-m:i===fy?r[c].additiveValue=j_([],r[c].value,m,-1):B_(i)&&(r[c].additiveValue=i===Cw?j_([],r[c].value,m,-1):Z7([],r[c].value,m,-1))}},t.prototype.step=function(e,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,s=this.keyframes,o=s.length,l=this.propName,d=a===fy,c,f=this._lastFr,p=Math.min,h,m;if(o===1)h=m=s[0];else{if(n<0)c=0;else if(n<this._lastFrP){var g=p(f+1,o-1);for(c=g;c>=0&&!(s[c].percent<=n);c--);c=p(c,o-2)}else{for(c=f;c<o&&!(s[c].percent>n);c++);c=p(c-1,o-2)}m=s[c+1],h=s[c]}if(h&&m){this._lastFr=c,this._lastFrP=n;var v=m.percent-h.percent,_=v===0?1:p((n-h.percent)/v,1);m.easingFunc&&(_=m.easingFunc(_));var x=r?this._additiveValue:d?Cv:e[l];if((B_(a)||d)&&!x&&(x=this._additiveValue=[]),this.discrete)e[l]=_<1?h.rawValue:m.rawValue;else if(B_(a))a===Cw?s4(x,h[i],m[i],_):cLe(x,h[i],m[i],_);else if(J7(a)){var w=h[i],k=m[i],S=a===RM;e[l]={type:S?"linear":"radial",x:bu(w.x,k.x,_),y:bu(w.y,k.y,_),colorStops:ze(w.colorStops,function(A,M){var $=k.colorStops[M];return{offset:bu(A.offset,$.offset,_),color:Sw(s4([],A.color,$.color,_))}}),global:k.global},S?(e[l].x2=bu(w.x2,k.x2,_),e[l].y2=bu(w.y2,k.y2,_)):e[l].r=bu(w.r,k.r,_)}else if(d)s4(x,h[i],m[i],_),r||(e[l]=Sw(x));else{var C=bu(h[i],m[i],_);r?this._additiveValue=C:e[l]=C}r&&this._addToTarget(e)}}},t.prototype._addToTarget=function(e){var n=this.valType,r=this.propName,i=this._additiveValue;n===F_?e[r]=e[r]+i:n===fy?(cs(e[r],Cv),j_(Cv,Cv,i,1),e[r]=Sw(Cv)):n===Cw?j_(e[r],e[r],i,1):n===Mee&&Z7(e[r],e[r],i,1)},t}(),YP=function(){function t(e,n,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=n,n&&i){jP("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(e){this._target=e},t.prototype.when=function(e,n,r){return this.whenWithKeys(e,n,rn(n),r)},t.prototype.whenWithKeys=function(e,n,r,i){for(var a=this._tracks,s=0;s<r.length;s++){var o=r[s],l=a[o];if(!l){l=a[o]=new mLe(o);var d=void 0,c=this._getAdditiveTrack(o);if(c){var f=c.keyframes,p=f[f.length-1];d=p&&p.value,c.valType===fy&&d&&(d=Sw(d))}else d=this._target[o];if(d==null)continue;e>0&&l.addKeyframe(0,o0(d),i),this._trackKeys.push(o)}l.addKeyframe(e,o0(n[o]),i)}return this._maxTime=Math.max(this._maxTime,e),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var n=e.length,r=0;r<n;r++)e[r].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,n=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,n)for(var r=0;r<n.length;r++)n[r].call(this)},t.prototype._setTracksFinished=function(){for(var e=this._tracks,n=this._trackKeys,r=0;r<n.length;r++)e[n[r]].setFinished()},t.prototype._getAdditiveTrack=function(e){var n,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(n=a)}return n},t.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var n=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var s=this._trackKeys[a],o=this._tracks[s],l=this._getAdditiveTrack(s),d=o.keyframes,c=d.length;if(o.prepare(i,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var f=d[c-1];f&&(n._target[o.propName]=f.rawValue),o.setFinished()}else r.push(o)}if(r.length||this._force){var p=new J6e({life:i,loop:this._loop,delay:this._delay||0,onframe:function(h){n._started=2;var m=n._additiveAnimators;if(m){for(var g=!1,v=0;v<m.length;v++)if(m[v]._clip){g=!0;break}g||(n._additiveAnimators=null)}for(var v=0;v<r.length;v++)r[v].step(n._target,h);var _=n._onframeCbs;if(_)for(var v=0;v<_.length;v++)_[v](n._target,h)},ondestroy:function(){n._doneCallback()}});this._clip=p,this.animation&&this.animation.addClip(p),e&&p.setEasing(e)}else this._doneCallback();return this}},t.prototype.stop=function(e){if(this._clip){var n=this._clip;e&&n.onframe(1),this._abortedCallback()}},t.prototype.delay=function(e){return this._delay=e,this},t.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},t.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},t.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(e){return this._tracks[e]},t.prototype.getTracks=function(){var e=this;return ze(this._trackKeys,function(n){return e._tracks[n]})},t.prototype.stopTracks=function(e,n){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var s=r[e[a]];s&&!s.isFinished()&&(n?s.step(this._target,1):this._started===1&&s.step(this._target,0),s.setFinished())}for(var o=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},t.prototype.saveTo=function(e,n,r){if(e){n=n||this._trackKeys;for(var i=0;i<n.length;i++){var a=n[i],s=this._tracks[a];if(!(!s||s.isFinished())){var o=s.keyframes,l=o[r?0:o.length-1];l&&(e[a]=o0(l.rawValue))}}}},t.prototype.__changeFinalValue=function(e,n){n=n||rn(e);for(var r=0;r<n.length;r++){var i=n[r],a=this._tracks[i];if(a){var s=a.keyframes;if(s.length>1){var o=s.pop();a.addKeyframe(o.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},t}();function Cm(){return new Date().getTime()}var gLe=function(t){Ce(e,t);function e(n){var r=t.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,n=n||{},r.stage=n.stage||{},r}return e.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},e.prototype.addAnimator=function(n){n.animation=this;var r=n.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(n){if(n.animation){var r=n.prev,i=n.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,n.next=n.prev=n.animation=null}},e.prototype.removeAnimator=function(n){var r=n.getClip();r&&this.removeClip(r),n.animation=null},e.prototype.update=function(n){for(var r=Cm()-this._pausedTime,i=r-this._time,a=this._head;a;){var s=a.next,o=a.step(r,i);o&&(a.ondestroy(),this.removeClip(a)),a=s}this._time=r,n||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var n=this;this._running=!0;function r(){n._running&&(hk(r),!n._paused&&n.update())}hk(r)},e.prototype.start=function(){this._running||(this._time=Cm(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=Cm(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=Cm()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var n=this._head;n;){var r=n.next;n.prev=n.next=n.animation=null,n=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(n,r){r=r||{},this.start();var i=new YP(n,r.loop);return this.addAnimator(i),i},e}(ao),vLe=300,o4=Qt.domSupported,l4=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=ze(t,function(i){var a=i.replace("mouse","pointer");return n.hasOwnProperty(a)?a:i});return{mouse:t,touch:e,pointer:r}}(),ej={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},tj=!1;function IM(t){var e=t.pointerType;return e==="pen"||e==="touch"}function yLe(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function u4(t){t&&(t.zrByTouch=!0)}function bLe(t,e){return As(t.dom,new _Le(t,e),!0)}function $ee(t,e){for(var n=e,r=!1;n&&n.nodeType!==9&&!(r=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return r}var _Le=function(){function t(e,n){this.stopPropagation=Or,this.stopImmediatePropagation=Or,this.preventDefault=Or,this.type=n.type,this.target=this.currentTarget=e.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return t}(),ho={mousedown:function(t){t=As(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=As(this.dom,t);var e=this.__mayPointerCapture;e&&(t.zrX!==e[0]||t.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=As(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=As(this.dom,t);var e=t.toElement||t.relatedTarget;$ee(this,e)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){tj=!0,t=As(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){tj||(t=As(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=As(this.dom,t),u4(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),ho.mousemove.call(this,t),ho.mousedown.call(this,t)},touchmove:function(t){t=As(this.dom,t),u4(t),this.handler.processGesture(t,"change"),ho.mousemove.call(this,t)},touchend:function(t){t=As(this.dom,t),u4(t),this.handler.processGesture(t,"end"),ho.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<vLe&&ho.click.call(this,t)},pointerdown:function(t){ho.mousedown.call(this,t)},pointermove:function(t){IM(t)||ho.mousemove.call(this,t)},pointerup:function(t){ho.mouseup.call(this,t)},pointerout:function(t){IM(t)||ho.mouseout.call(this,t)}};oe(["click","dblclick","contextmenu"],function(t){ho[t]=function(e){e=As(this.dom,e),this.trigger(t,e)}});var OM={pointermove:function(t){IM(t)||OM.mousemove.call(this,t)},pointerup:function(t){OM.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function xLe(t,e){var n=e.domHandlers;Qt.pointerEventsSupported?oe(l4.pointer,function(r){Aw(e,r,function(i){n[r].call(t,i)})}):(Qt.touchEventsSupported&&oe(l4.touch,function(r){Aw(e,r,function(i){n[r].call(t,i),yLe(e)})}),oe(l4.mouse,function(r){Aw(e,r,function(i){i=UP(i),e.touching||n[r].call(t,i)})}))}function wLe(t,e){Qt.pointerEventsSupported?oe(ej.pointer,n):Qt.touchEventsSupported||oe(ej.mouse,n);function n(r){function i(a){a=UP(a),$ee(t,a.target)||(a=bLe(t,a),e.domHandlers[r].call(t,a))}Aw(e,r,i,{capture:!0})}}function Aw(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,SM(t.domTarget,e,n,r)}function d4(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&L6e(t.domTarget,n,e[n],t.listenerOpts[n]);t.mounted={}}var nj=function(){function t(e,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=n}return t}(),kLe=function(t){Ce(e,t);function e(n,r){var i=t.call(this)||this;return i.__pointerCapturing=!1,i.dom=n,i.painterRoot=r,i._localHandlerScope=new nj(n,ho),o4&&(i._globalHandlerScope=new nj(document,OM)),xLe(i,i._localHandlerScope),i}return e.prototype.dispose=function(){d4(this._localHandlerScope),o4&&d4(this._globalHandlerScope)},e.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},e.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,o4&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var r=this._globalHandlerScope;n?wLe(this,r):d4(r)}},e}(ao),Dee=1;Qt.hasGlobalWindow&&(Dee=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var _k=Dee,LM=.4,VM="#333",NM="#ccc",SLe="#eee",rj=OC,ij=5e-5;function lf(t){return t>ij||t<-ij}var uf=[],Nh=[],c4=ds(),f4=Math.abs,Iu=function(){function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},t.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},t.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},t.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},t.prototype.needLocalTransform=function(){return lf(this.rotation)||lf(this.x)||lf(this.y)||lf(this.scaleX-1)||lf(this.scaleY-1)||lf(this.skewX)||lf(this.skewY)},t.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,n=this.needLocalTransform(),r=this.transform;if(!(n||e)){r&&(rj(r),this.invTransform=null);return}r=r||ds(),n?this.getLocalTransform(r):rj(r),e&&(n?Bu(r,e,r):HP(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},t.prototype._resolveGlobalScaleRatio=function(e){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(uf);var r=uf[0]<0?-1:1,i=uf[1]<0?-1:1,a=((uf[0]-r)*n+r)/uf[0]||0,s=((uf[1]-i)*n+i)/uf[1]||0;e[0]*=a,e[1]*=a,e[2]*=s,e[3]*=s}this.invTransform=this.invTransform||ds(),Og(this.invTransform,e)},t.prototype.getComputedTransform=function(){for(var e=this,n=[];e;)n.push(e),e=e.parent;for(;e=n.pop();)e.updateTransform();return this.transform},t.prototype.setLocalTransform=function(e){if(e){var n=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),n=Math.sqrt(n),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=n,this.scaleY=r,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,n=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||ds(),Bu(Nh,e.invTransform,n),n=Nh);var r=this.originX,i=this.originY;(r||i)&&(c4[4]=r,c4[5]=i,Bu(Nh,n,c4),Nh[4]-=r,Nh[5]-=i,n=Nh),this.setLocalTransform(n)}},t.prototype.getGlobalScale=function(e){var n=this.transform;return e=e||[],n?(e[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),e[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(e[0]=-e[0]),n[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},t.prototype.transformCoordToLocal=function(e,n){var r=[e,n],i=this.invTransform;return i&&Ri(r,r,i),r},t.prototype.transformCoordToGlobal=function(e,n){var r=[e,n],i=this.transform;return i&&Ri(r,r,i),r},t.prototype.getLineScale=function(){var e=this.transform;return e&&f4(e[0]-1)>1e-10&&f4(e[3]-1)>1e-10?Math.sqrt(f4(e[0]*e[3]-e[2]*e[1])):1},t.prototype.copyTransform=function(e){Ree(this,e)},t.getLocalTransform=function(e,n){n=n||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,s=e.scaleY,o=e.anchorX,l=e.anchorY,d=e.rotation||0,c=e.x,f=e.y,p=e.skewX?Math.tan(e.skewX):0,h=e.skewY?Math.tan(-e.skewY):0;if(r||i||o||l){var m=r+o,g=i+l;n[4]=-m*a-p*g*s,n[5]=-g*s-h*m*a}else n[4]=n[5]=0;return n[0]=a,n[3]=s,n[1]=h*a,n[2]=p*s,d&&fh(n,n,d),n[4]+=r+c,n[5]+=i+f,n},t.initDefaultProps=function(){var e=t.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),t}(),jl=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function Ree(t,e){for(var n=0;n<jl.length;n++){var r=jl[n];t[r]=e[r]}}var aj={};function fs(t,e){e=e||$c;var n=aj[e];n||(n=aj[e]=new yb(500));var r=n.get(t);return r==null&&(r=Dc.measureText(t,e).width,n.put(t,r)),r}function sj(t,e,n,r){var i=fs(t,e),a=VC(e),s=py(0,i,n),o=ym(0,a,r),l=new qt(s,o,i,a);return l}function bb(t,e,n,r){var i=((t||"")+"").split(`
`),a=i.length;if(a===1)return sj(i[0],e,n,r);for(var s=new qt(0,0,0,0),o=0;o<i.length;o++){var l=sj(i[o],e,n,r);o===0?s.copy(l):s.union(l)}return s}function py(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function ym(t,e,n){return n==="middle"?t-=e/2:n==="bottom"&&(t-=e),t}function VC(t){return fs("",t)}function Lo(t,e){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function xk(t,e,n){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=n.height,s=n.width,o=a/2,l=n.x,d=n.y,c="left",f="top";if(r instanceof Array)l+=Lo(r[0],n.width),d+=Lo(r[1],n.height),c=null,f=null;else switch(r){case"left":l-=i,d+=o,c="right",f="middle";break;case"right":l+=i+s,d+=o,f="middle";break;case"top":l+=s/2,d-=i,c="center",f="bottom";break;case"bottom":l+=s/2,d+=a+i,c="center";break;case"inside":l+=s/2,d+=o,c="center",f="middle";break;case"insideLeft":l+=i,d+=o,f="middle";break;case"insideRight":l+=s-i,d+=o,c="right",f="middle";break;case"insideTop":l+=s/2,d+=i,c="center";break;case"insideBottom":l+=s/2,d+=a-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,d+=i;break;case"insideTopRight":l+=s-i,d+=i,c="right";break;case"insideBottomLeft":l+=i,d+=a-i,f="bottom";break;case"insideBottomRight":l+=s-i,d+=a-i,c="right",f="bottom";break}return t=t||{},t.x=l,t.y=d,t.align=c,t.verticalAlign=f,t}var p4="__zr_normal__",h4=jl.concat(["ignore"]),CLe=Vl(jl,function(t,e){return t[e]=!0,t},{ignore:!1}),jh={},ALe=new qt(0,0,0,0),NC=function(){function t(e){this.id=see(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return t.prototype._init=function(e){this.attr(e)},t.prototype.drift=function(e,n,r){switch(this.draggable){case"horizontal":n=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=n,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(e){var n=this._textContent;if(n&&(!n.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=n.innerTransformable,s=void 0,o=void 0,l=!1;a.parent=i?this:null;var d=!1;if(a.copyTransform(n),r.position!=null){var c=ALe;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(jh,r,c):xk(jh,r,c),a.x=jh.x,a.y=jh.y,s=jh.align,o=jh.verticalAlign;var f=r.origin;if(f&&r.rotation!=null){var p=void 0,h=void 0;f==="center"?(p=c.width*.5,h=c.height*.5):(p=Lo(f[0],c.width),h=Lo(f[1],c.height)),d=!0,a.originX=-a.x+p+(i?0:c.x),a.originY=-a.y+h+(i?0:c.y)}}r.rotation!=null&&(a.rotation=r.rotation);var m=r.offset;m&&(a.x+=m[0],a.y+=m[1],d||(a.originX=-m[0],a.originY=-m[1]));var g=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),_=void 0,x=void 0,w=void 0;g&&this.canBeInsideText()?(_=r.insideFill,x=r.insideStroke,(_==null||_==="auto")&&(_=this.getInsideTextFill()),(x==null||x==="auto")&&(x=this.getInsideTextStroke(_),w=!0)):(_=r.outsideFill,x=r.outsideStroke,(_==null||_==="auto")&&(_=this.getOutsideFill()),(x==null||x==="auto")&&(x=this.getOutsideStroke(_),w=!0)),_=_||"#000",(_!==v.fill||x!==v.stroke||w!==v.autoStroke||s!==v.align||o!==v.verticalAlign)&&(l=!0,v.fill=_,v.stroke=x,v.autoStroke=w,v.align=s,v.verticalAlign=o,n.setDefaultTextStyle(v)),n.__dirty|=ns,l&&n.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(e){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?NM:VM},t.prototype.getOutsideStroke=function(e){var n=this.__zr&&this.__zr.getBackgroundColor(),r=typeof n=="string"&&cs(n);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),s=0;s<3;s++)r[s]=r[s]*i+(a?0:255)*(1-i);return r[3]=1,zu(r,"rgba")},t.prototype.traverse=function(e,n){},t.prototype.attrKV=function(e,n){e==="textConfig"?this.setTextConfig(n):e==="textContent"?this.setTextContent(n):e==="clipPath"?this.setClipPath(n):e==="extra"?(this.extra=this.extra||{},Oe(this.extra,n)):this[e]=n},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(e,n){if(typeof e=="string")this.attrKV(e,n);else if(_t(e))for(var r=e,i=rn(r),a=0;a<i.length;a++){var s=i[a];this.attrKV(s,e[s])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var n=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==p4)){var s=i.targetName,o=s?n[s]:n;i.saveTo(o)}}},t.prototype._innerSaveToNormal=function(e){var n=this._normalState;n||(n=this._normalState={}),e.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(e,n,h4)},t.prototype._savePrimaryToNormal=function(e,n,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in n)&&(n[a]=this[a])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(e){return this.states[e]},t.prototype.ensureState=function(e){var n=this.states;return n[e]||(n[e]={}),n[e]},t.prototype.clearStates=function(e){this.useState(p4,!1,e)},t.prototype.useState=function(e,n,r,i){var a=e===p4,s=this.hasState();if(!(!s&&a)){var o=this.currentStates,l=this.stateTransition;if(!(Yt(o,e)>=0&&(n||o.length===1))){var d;if(this.stateProxy&&!a&&(d=this.stateProxy(e)),d||(d=this.states&&this.states[e]),!d&&!a){jP("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(d);var c=!!(d&&d.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,d,this._normalState,n,!r&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,p=this._textGuide;return f&&f.useState(e,n,r,c),p&&p.useState(e,n,r,c),a?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ns),d}}},t.prototype.useStates=function(e,n,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,s=e.length,o=s===a.length;if(o){for(var l=0;l<s;l++)if(e[l]!==a[l]){o=!1;break}}if(o)return;for(var l=0;l<s;l++){var d=e[l],c=void 0;this.stateProxy&&(c=this.stateProxy(d,e)),c||(c=this.states[d]),c&&i.push(c)}var f=i[s-1],p=!!(f&&f.hoverLayer||r);p&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(i),m=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(e.join(","),h,this._normalState,!1,!n&&!this.__inHover&&m&&m.duration>0,m);var g=this._textContent,v=this._textGuide;g&&g.useStates(e,n,p),v&&v.useStates(e,n,p),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!p&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ns)}},t.prototype.isSilent=function(){for(var e=this.silent,n=this.parent;!e&&n;){if(n.silent){e=!0;break}n=n.parent}return e},t.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var n=this.animators[e];n.targetName&&n.changeTarget(this[n.targetName])}},t.prototype.removeState=function(e){var n=Yt(this.currentStates,e);if(n>=0){var r=this.currentStates.slice();r.splice(n,1),this.useStates(r)}},t.prototype.replaceState=function(e,n,r){var i=this.currentStates.slice(),a=Yt(i,e),s=Yt(i,n)>=0;a>=0?s?i.splice(a,1):i[a]=n:r&&!s&&i.push(n),this.useStates(i)},t.prototype.toggleState=function(e,n){n?this.useState(e,!0):this.removeState(e)},t.prototype._mergeStates=function(e){for(var n={},r,i=0;i<e.length;i++){var a=e[i];Oe(n,a),a.textConfig&&(r=r||{},Oe(r,a.textConfig))}return r&&(n.textConfig=r),n},t.prototype._applyStateObj=function(e,n,r,i,a,s){var o=!(n&&i);n&&n.textConfig?(this.textConfig=Oe({},i?this.textConfig:r.textConfig),Oe(this.textConfig,n.textConfig)):o&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},d=!1,c=0;c<h4.length;c++){var f=h4[c],p=a&&CLe[f];n&&n[f]!=null?p?(d=!0,l[f]=n[f]):this[f]=n[f]:o&&r[f]!=null&&(p?(d=!0,l[f]=r[f]):this[f]=r[f])}if(!a)for(var c=0;c<this.animators.length;c++){var h=this.animators[c],m=h.targetName;h.getLoop()||h.__changeFinalValue(m?(n||r)[m]:n||r)}d&&this._transitionState(e,l,s)},t.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var n=this.__zr;n&&e.addSelfToZr(n),e.__zr=n,e.__hostTarget=this}},t.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},t.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(e){var n=this._textContent;n!==e&&(n&&n!==e&&this.removeTextContent(),e.innerTransformable=new Iu,this._attachComponent(e),this._textContent=e,this.markRedraw())},t.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Oe(this.textConfig,e),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=ns;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var n=this._textContent,r=this._textGuide;n&&(n.__inHover=e),r&&(r.__inHover=e)},t.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.addAnimator(n[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.removeAnimator(n[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},t.prototype.animate=function(e,n,r){var i=e?this[e]:this,a=new YP(i,n,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},t.prototype.addAnimator=function(e,n){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(n)}).done(function(){var a=i.animators,s=Yt(a,e);s>=0&&a.splice(s,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},t.prototype.updateDuringAnimation=function(e){this.markRedraw()},t.prototype.stopAnimation=function(e,n){for(var r=this.animators,i=r.length,a=[],s=0;s<i;s++){var o=r[s];!e||e===o.scope?o.stop(n):a.push(o)}return this.animators=a,this},t.prototype.animateTo=function(e,n,r){m4(this,e,n,r)},t.prototype.animateFrom=function(e,n,r){m4(this,e,n,r,!0)},t.prototype._transitionState=function(e,n,r,i){for(var a=m4(this,n,r,i),s=0;s<a.length;s++)a[s].__fromStateTransition=e},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=ns;function n(r,i,a,s){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];o(this,l)}return this[i]},set:function(l){this[a]=l[0],this[s]=l[1],this[i]=l,o(this,l)}});function o(l,d){Object.defineProperty(d,0,{get:function(){return l[a]},set:function(c){l[a]=c}}),Object.defineProperty(d,1,{get:function(){return l[s]},set:function(c){l[s]=c}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),t}();Hr(NC,ao);Hr(NC,Iu);function m4(t,e,n,r,i){n=n||{};var a=[];Pee(t,"",t,e,n,r,a,i);var s=a.length,o=!1,l=n.done,d=n.aborted,c=function(){o=!0,s--,s<=0&&(o?l&&l():d&&d())},f=function(){s--,s<=0&&(o?l&&l():d&&d())};s||l&&l(),a.length>0&&n.during&&a[0].during(function(m,g){n.during(g)});for(var p=0;p<a.length;p++){var h=a[p];c&&h.done(c),f&&h.aborted(f),n.force&&h.duration(n.duration),h.start(n.easing)}return a}function g4(t,e,n){for(var r=0;r<n;r++)t[r]=e[r]}function TLe(t){return ta(t[0])}function ELe(t,e,n){if(ta(e[n]))if(ta(t[n])||(t[n]=[]),Ka(e[n])){var r=e[n].length;t[n].length!==r&&(t[n]=new e[n].constructor(r),g4(t[n],e[n],r))}else{var i=e[n],a=t[n],s=i.length;if(TLe(i))for(var o=i[0].length,l=0;l<s;l++)a[l]?g4(a[l],i[l],o):a[l]=Array.prototype.slice.call(i[l]);else g4(a,i,s);a.length=i.length}else t[n]=e[n]}function MLe(t,e){return t===e||ta(t)&&ta(e)&&$Le(t,e)}function $Le(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Pee(t,e,n,r,i,a,s,o){for(var l=rn(r),d=i.duration,c=i.delay,f=i.additive,p=i.setToFinal,h=!_t(a),m=t.animators,g=[],v=0;v<l.length;v++){var _=l[v],x=r[_];if(x!=null&&n[_]!=null&&(h||a[_]))if(_t(x)&&!ta(x)&&!PC(x)){if(e){o||(n[_]=x,t.updateDuringAnimation(e));continue}Pee(t,_,n[_],x,i,a&&a[_],s,o)}else g.push(_);else o||(n[_]=x,t.updateDuringAnimation(e),g.push(_))}var w=g.length;if(!f&&w)for(var k=0;k<m.length;k++){var S=m[k];if(S.targetName===e){var C=S.stopTracks(g);if(C){var A=Yt(m,S);m.splice(A,1)}}}if(i.force||(g=kn(g,function(I){return!MLe(r[I],n[I])}),w=g.length),w>0||i.force&&!s.length){var M=void 0,$=void 0,R=void 0;if(o){$={},p&&(M={});for(var k=0;k<w;k++){var _=g[k];$[_]=n[_],p?M[_]=r[_]:n[_]=r[_]}}else if(p){R={};for(var k=0;k<w;k++){var _=g[k];R[_]=o0(n[_]),ELe(n,r,_)}}var S=new YP(n,!1,!1,f?kn(m,function(B){return B.targetName===e}):null);S.targetName=e,i.scope&&(S.scope=i.scope),p&&M&&S.whenWithKeys(0,M,g),R&&S.whenWithKeys(0,R,g),S.whenWithKeys(d==null?500:d,o?$:r,g).delay(c||0),t.addAnimator(S,e),s.push(S)}}var kt=function(t){Ce(e,t);function e(n){var r=t.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(n){return this._children[n]},e.prototype.childOfName=function(n){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===n)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},e.prototype.addBefore=function(n,r){if(n&&n!==this&&n.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,n),this._doAdd(n))}return this},e.prototype.replace=function(n,r){var i=Yt(this._children,n);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(n,r){var i=this._children,a=i[r];if(n&&n!==this&&n.parent!==this&&n!==a){i[r]=n,a.parent=null;var s=this.__zr;s&&a.removeSelfFromZr(s),this._doAdd(n)}return this},e.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var r=this.__zr;r&&r!==n.__zr&&n.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(n){var r=this.__zr,i=this._children,a=Yt(i,n);return a<0?this:(i.splice(a,1),n.parent=null,r&&n.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var n=this._children,r=this.__zr,i=0;i<n.length;i++){var a=n[i];r&&a.removeSelfFromZr(r),a.parent=null}return n.length=0,this},e.prototype.eachChild=function(n,r){for(var i=this._children,a=0;a<i.length;a++){var s=i[a];n.call(r,s,a)}return this},e.prototype.traverse=function(n,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],s=n.call(r,a);a.isGroup&&!s&&a.traverse(n,r)}return this},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(n)}},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(n)}},e.prototype.getBoundingRect=function(n){for(var r=new qt(0,0,0,0),i=n||this._children,a=[],s=null,o=0;o<i.length;o++){var l=i[o];if(!(l.ignore||l.invisible)){var d=l.getBoundingRect(),c=l.getLocalTransform(a);c?(qt.applyTransform(r,d,c),s=s||r.clone(),s.union(r)):(s=s||d.clone(),s.union(d))}}return s||r},e}(NC);kt.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Tw={},Iee={};function DLe(t){delete Iee[t]}function RLe(t){if(!t)return!1;if(typeof t=="string")return yk(t,1)<LM;if(t.colorStops){for(var e=t.colorStops,n=0,r=e.length,i=0;i<r;i++)n+=yk(e[i].color,1);return n/=r,n<LM}return!1}var PLe=function(){function t(e,n,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=n,this.id=e;var a=new Y6e,s=r.renderer||"canvas";Tw[s]||(s=rn(Tw)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var o=new Tw[s](n,a,r,e),l=r.ssr||o.ssrOnly;this.storage=a,this.painter=o;var d=!Qt.node&&!Qt.worker&&!l?new kLe(o.getViewportRoot(),o.root):null,c=r.useCoarsePointer,f=c==null||c==="auto"?Qt.touchEventsSupported:!!c,p=44,h;f&&(h=$t(r.pointerSize,p)),this.handler=new fee(a,o,d,o.root,h),this.animation=new gLe({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return t.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},t.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(e,n){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,n),this.refresh())},t.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=RLe(e))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(e){this._darkMode=e},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(e){var n,r=Cm();this._needsRefresh&&(n=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var i=Cm();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},t.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},t.prototype.findHover=function(e,n){if(!this._disposed)return this.handler.findHover(e,n)},t.prototype.on=function(e,n,r){return this._disposed||this.handler.on(e,n,r),this},t.prototype.off=function(e,n){this._disposed||this.handler.off(e,n)},t.prototype.trigger=function(e,n){this._disposed||this.handler.trigger(e,n)},t.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),n=0;n<e.length;n++)e[n]instanceof kt&&e[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,DLe(this.id))},t}();function oj(t,e){var n=new PLe(see(),t,e);return Iee[n.id]=n,n}function ILe(t,e){Tw[t]=e}var jM;function OLe(t){if(typeof jM=="function")return jM(t)}function LLe(t){jM=t}var lj=1e-4,Oee=20;function VLe(t){return t.replace(/^\s+|\s+$/g,"")}function Cn(t,e,n,r){var i=e[0],a=e[1],s=n[0],o=n[1],l=a-i,d=o-s;if(l===0)return d===0?s:(s+o)/2;if(r)if(l>0){if(t<=i)return s;if(t>=a)return o}else{if(t>=i)return s;if(t<=a)return o}else{if(t===i)return s;if(t===a)return o}return(t-i)/l*d+s}function Qe(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return it(t)?VLe(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):t==null?NaN:+t}function Ar(t,e,n){return e==null&&(e=10),e=Math.min(Math.max(0,e),Oee),t=(+t).toFixed(e),n?t:+t}function Fs(t){return t.sort(function(e,n){return e-n}),t}function bl(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n}return NLe(t)}function NLe(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),r=n>0?+e.slice(n+1):0,i=n>0?n:e.length,a=e.indexOf("."),s=a<0?0:i-1-a;return Math.max(0,s-r)}function Lee(t,e){var n=Math.log,r=Math.LN10,i=Math.floor(n(t[1]-t[0])/r),a=Math.round(n(Math.abs(e[1]-e[0]))/r),s=Math.min(Math.max(-i+a,0),20);return isFinite(s)?s:20}function jLe(t,e){var n=Vl(t,function(h,m){return h+(isNaN(m)?0:m)},0);if(n===0)return[];for(var r=Math.pow(10,e),i=ze(t,function(h){return(isNaN(h)?0:h)/n*r*100}),a=r*100,s=ze(i,function(h){return Math.floor(h)}),o=Vl(s,function(h,m){return h+m},0),l=ze(i,function(h,m){return h-s[m]});o<a;){for(var d=Number.NEGATIVE_INFINITY,c=null,f=0,p=l.length;f<p;++f)l[f]>d&&(d=l[f],c=f);++s[c],l[c]=0,++o}return ze(s,function(h){return h/r})}function FLe(t,e){var n=Math.max(bl(t),bl(e)),r=t+e;return n>Oee?r:Ar(r,n)}var uj=9007199254740991;function Vee(t){var e=Math.PI*2;return(t%e+e)%e}function p1(t){return t>-lj&&t<lj}var BLe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Fl(t){if(t instanceof Date)return t;if(it(t)){var e=BLe.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function zLe(t){return Math.pow(10,KP(t))}function KP(t){if(t===0)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function Nee(t,e){var n=KP(t),r=Math.pow(10,n),i=t/r,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,t=a*r,n>=-20?+t.toFixed(n<0?-n:0):t}function v4(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i}function dj(t){t.sort(function(l,d){return o(l,d,0)?-1:1});for(var e=-1/0,n=1,r=0;r<t.length;){for(var i=t[r].interval,a=t[r].close,s=0;s<2;s++)i[s]<=e&&(i[s]=e,a[s]=s?1:1-n),e=i[s],n=a[s];i[0]===i[1]&&a[0]*a[1]!==1?t.splice(r,1):r++}return t;function o(l,d,c){return l.interval[c]<d.interval[c]||l.interval[c]===d.interval[c]&&(l.close[c]-d.close[c]===(c?-1:1)||!c&&o(l,d,1))}}function td(t){var e=parseFloat(t);return e==t&&(e!==0||!it(t)||t.indexOf("x")<=0)?e:NaN}function jee(t){return!isNaN(td(t))}function Fee(){return Math.round(Math.random()*9)}function Bee(t,e){return e===0?t:Bee(e,t%e)}function cj(t,e){return t==null?e:e==null?t:t*e/Bee(t,e)}function wn(t){throw new Error(t)}function fj(t,e,n){return(e-t)*n+t}var zee="series\0",Uee="\0_ec_\0";function Dn(t){return t instanceof Array?t:t==null?[]:[t]}function Gp(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,i=n.length;r<i;r++){var a=n[r];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}}var pj=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Lg(t){return _t(t)&&!Be(t)&&!(t instanceof Date)?t.value:t}function ULe(t){return _t(t)&&!(t instanceof Array)}function Hee(t,e,n){var r=n==="normalMerge",i=n==="replaceMerge",a=n==="replaceAll";t=t||[],e=(e||[]).slice();var s=pt();oe(e,function(l,d){if(!_t(l)){e[d]=null;return}});var o=HLe(t,s,n);return(r||i)&&qLe(o,t,s,e),r&&WLe(o,e),r||i?GLe(o,e,i):a&&YLe(o,e),KLe(o),o}function HLe(t,e,n){var r=[];if(n==="replaceAll")return r;for(var i=0;i<t.length;i++){var a=t[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:n==="replaceMerge"||h1(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function qLe(t,e,n,r){oe(r,function(i,a){if(!(!i||i.id==null)){var s=l0(i.id),o=n.get(s);if(o!=null){var l=t[o];Ta(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=i,l.existing=e[o],r[a]=null}}})}function WLe(t,e){oe(e,function(n,r){if(!(!n||n.name==null))for(var i=0;i<t.length;i++){var a=t[i].existing;if(!t[i].newOption&&a&&(a.id==null||n.id==null)&&!h1(n)&&!h1(a)&&qee("name",a,n)){t[i].newOption=n,e[r]=null;return}}})}function GLe(t,e,n){oe(e,function(r){if(r){for(var i,a=0;(i=t[a])&&(i.newOption||h1(i.existing)||i.existing&&r.id!=null&&!qee("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=n):t.push({newOption:r,brandNew:n,existing:null,keyInfo:null}),a++}})}function YLe(t,e){oe(e,function(n){t.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function KLe(t){var e=pt();oe(t,function(n){var r=n.existing;r&&e.set(r.id,n)}),oe(t,function(n){var r=n.newOption;Ta(!r||r.id==null||!e.get(r.id)||e.get(r.id)===n,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,n),!n.keyInfo&&(n.keyInfo={})}),oe(t,function(n,r){var i=n.existing,a=n.newOption,s=n.keyInfo;if(_t(a)){if(s.name=a.name!=null?l0(a.name):i?i.name:zee+r,i)s.id=l0(i.id);else if(a.id!=null)s.id=l0(a.id);else{var o=0;do s.id="\0"+s.name+"\0"+o++;while(e.get(s.id))}e.set(s.id,n)}})}function qee(t,e,n){var r=Yr(e[t],null),i=Yr(n[t],null);return r!=null&&i!=null&&r===i}function l0(t){return Yr(t,"")}function Yr(t,e){return t==null?e:it(t)?t:pn(t)||vM(t)?t+"":e}function XP(t){var e=t.name;return!!(e&&e.indexOf(zee))}function h1(t){return t&&t.id!=null&&l0(t.id).indexOf(Uee)===0}function XLe(t){return Uee+t}function ZLe(t,e,n){oe(t,function(r){var i=r.newOption;_t(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=QLe(e,i,r.existing,n))})}function QLe(t,e,n,r){var i=e.type?e.type:n?n.subType:r.determineSubType(t,e);return i}function JLe(t,e){var n={},r={};return i(t||[],n),i(e||[],r,n),[a(n),a(r)];function i(s,o,l){for(var d=0,c=s.length;d<c;d++){var f=Yr(s[d].seriesId,null);if(f==null)return;for(var p=Dn(s[d].dataIndex),h=l&&l[f],m=0,g=p.length;m<g;m++){var v=p[m];h&&h[v]?h[v]=null:(o[f]||(o[f]={}))[v]=1}}}function a(s,o){var l=[];for(var d in s)if(s.hasOwnProperty(d)&&s[d]!=null)if(o)l.push(+d);else{var c=a(s[d],!0);c.length&&l.push({seriesId:d,dataIndex:c})}return l}}function Yp(t,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Be(e.dataIndex)?ze(e.dataIndex,function(n){return t.indexOfRawIndex(n)}):t.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Be(e.name)?ze(e.name,function(n){return t.indexOfName(n)}):t.indexOfName(e.name)}function on(){var t="__ec_inner_"+e8e++;return function(e){return e[t]||(e[t]={})}}var e8e=Fee();function u0(t,e,n){var r=ZP(e,n),i=r.mainTypeSpecified,a=r.queryOptionMap,s=r.others,o=s,l=n?n.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(d,c){var f=_b(t,c,d,{useDefault:l===c,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});o[c+"Models"]=f.models,o[c+"Model"]=f.models[0]}),o}function ZP(t,e){var n;if(it(t)){var r={};r[t+"Index"]=0,n=r}else n=t;var i=pt(),a={},s=!1;return oe(n,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=o;return}var d=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=d[1],f=(d[2]||"").toLowerCase();if(!(!c||!f||e&&e.includeMainTypes&&Yt(e.includeMainTypes,c)<0)){s=s||!!c;var p=i.get(c)||i.set(c,{});p[f]=o}}),{mainTypeSpecified:s,queryOptionMap:i,others:a}}var Nr={useDefault:!0,enableAll:!1,enableNone:!1},t8e={useDefault:!1,enableAll:!0,enableNone:!0};function _b(t,e,n,r){r=r||Nr;var i=n.index,a=n.id,s=n.name,o={models:null,specified:i!=null||a!=null||s!=null};if(!o.specified){var l=void 0;return o.models=r.useDefault&&(l=t.getComponent(e))?[l]:[],o}return i==="none"||i===!1?(Ta(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(i==="all"&&(Ta(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=s=null),o.models=t.queryComponents({mainType:e,index:i,id:a,name:s}),o)}function n8e(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function r8e(t){return t==="auto"?Qt.domSupported?"html":"richText":t||"html"}function FM(t,e){var n=pt(),r=[];return oe(t,function(i){var a=e(i);(n.get(a)||(r.push(a),n.set(a,[]))).push(i)}),{keys:r,buckets:n}}function Wee(t,e,n,r,i){var a=e==null||e==="auto";if(r==null)return r;if(pn(r)){var s=fj(n||0,r,i);return Ar(s,a?Math.max(bl(n||0),bl(r)):e)}else{if(it(r))return i<1?n:r;for(var o=[],l=n,d=r,c=Math.max(l?l.length:0,d.length),f=0;f<c;++f){var p=t.getDimensionInfo(f);if(p&&p.type==="ordinal")o[f]=(i<1&&l?l:d)[f];else{var h=l&&l[f]?l[f]:0,m=d[f],s=fj(h,m,i);o[f]=Ar(s,a?Math.max(bl(h),bl(m)):e)}}return o}}var i8e=".",df="___EC__COMPONENT__CONTAINER___",Gee="___EC__EXTENDED_CLASS___";function _l(t){var e={main:"",sub:""};if(t){var n=t.split(i8e);e.main=n[0]||"",e.sub=n[1]||""}return e}function a8e(t){Ta(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function s8e(t){return!!(t&&t[Gee])}function QP(t,e){t.$constructor=t,t.extend=function(n){var r=this,i;return o8e(r)?i=function(a){Ce(s,a);function s(){return a.apply(this,arguments)||this}return s}(r):(i=function(){(n.$constructor||r).apply(this,arguments)},m6e(i,this)),Oe(i.prototype,n),i[Gee]=!0,i.extend=this.extend,i.superCall=d8e,i.superApply=c8e,i.superClass=r,i}}function o8e(t){return gt(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function Yee(t,e){t.extend=e.extend}var l8e=Math.round(Math.random()*10);function u8e(t){var e=["__\0is_clz",l8e++].join("_");t.prototype[e]=!0,t.isInstance=function(n){return!!(n&&n[e])}}function d8e(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[e].apply(t,n)}function c8e(t,e,n){return this.superClass.prototype[e].apply(t,n)}function jC(t){var e={};t.registerClass=function(r){var i=r.type||r.prototype.type;if(i){a8e(i),r.prototype.type=i;var a=_l(i);if(!a.sub)e[a.main]=r;else if(a.sub!==df){var s=n(a);s[a.sub]=r}}return r},t.getClass=function(r,i,a){var s=e[r];if(s&&s[df]&&(s=i?s[i]:null),a&&!s)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return s},t.getClassesByMainType=function(r){var i=_l(r),a=[],s=e[i.main];return s&&s[df]?oe(s,function(o,l){l!==df&&a.push(o)}):a.push(s),a},t.hasClass=function(r){var i=_l(r);return!!e[i.main]},t.getAllClassMainTypes=function(){var r=[];return oe(e,function(i,a){r.push(a)}),r},t.hasSubTypes=function(r){var i=_l(r),a=e[i.main];return a&&a[df]};function n(r){var i=e[r.main];return(!i||!i[df])&&(i=e[r.main]={},i[df]=!0),i}}function Kp(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(r,i,a){for(var s={},o=0;o<t.length;o++){var l=t[o][1];if(!(i&&Yt(i,l)>=0||a&&Yt(a,l)<0)){var d=r.getShallow(l,e);d!=null&&(s[t[o][0]]=d)}}return s}}var f8e=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],p8e=Kp(f8e),h8e=function(){function t(){}return t.prototype.getAreaStyle=function(e,n){return p8e(this,e,n)},t}(),BM=new yb(50);function m8e(t){if(typeof t=="string"){var e=BM.get(t);return e&&e.image}else return t}function JP(t,e,n,r,i){if(t)if(typeof t=="string"){if(e&&e.__zrImageSrc===t||!n)return e;var a=BM.get(t),s={hostEl:n,cb:r,cbPayload:i};return a?(e=a.image,!FC(e)&&a.pending.push(s)):(e=Dc.loadImage(t,hj,hj),e.__zrImageSrc=t,BM.put(t,e.__cachedImgObj={image:e,pending:[s]})),e}else return t;else return e}function hj(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function FC(t){return t&&t.width&&t.height}var y4=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function g8e(t,e,n,r,i,a){if(!n){t.text="",t.isTruncated=!1;return}var s=(e+"").split(`
`);a=Kee(n,r,i,a);for(var o=!1,l={},d=0,c=s.length;d<c;d++)Xee(l,s[d],a),s[d]=l.textLine,o=o||l.isTruncated;t.text=s.join(`
`),t.isTruncated=o}function Kee(t,e,n,r){r=r||{};var i=Oe({},r);i.font=e,n=$t(n,"..."),i.maxIterations=$t(r.maxIterations,2);var a=i.minChar=$t(r.minChar,0);i.cnCharWidth=fs("",e);var s=i.ascCharWidth=fs("a",e);i.placeholder=$t(r.placeholder,"");for(var o=t=Math.max(0,t-1),l=0;l<a&&o>=s;l++)o-=s;var d=fs(n,e);return d>o&&(n="",d=0),o=t-d,i.ellipsis=n,i.ellipsisWidth=d,i.contentWidth=o,i.containerWidth=t,i}function Xee(t,e,n){var r=n.containerWidth,i=n.font,a=n.contentWidth;if(!r){t.textLine="",t.isTruncated=!1;return}var s=fs(e,i);if(s<=r){t.textLine=e,t.isTruncated=!1;return}for(var o=0;;o++){if(s<=a||o>=n.maxIterations){e+=n.ellipsis;break}var l=o===0?v8e(e,a,n.ascCharWidth,n.cnCharWidth):s>0?Math.floor(e.length*a/s):0;e=e.substr(0,l),s=fs(e,i)}e===""&&(e=n.placeholder),t.textLine=e,t.isTruncated=!0}function v8e(t,e,n,r){for(var i=0,a=0,s=t.length;a<s&&i<e;a++){var o=t.charCodeAt(a);i+=0<=o&&o<=127?n:r}return a}function y8e(t,e){t!=null&&(t+="");var n=e.overflow,r=e.padding,i=e.font,a=n==="truncate",s=VC(i),o=$t(e.lineHeight,s),l=!!e.backgroundColor,d=e.lineOverflow==="truncate",c=!1,f=e.width,p;f!=null&&(n==="break"||n==="breakAll")?p=t?Zee(t,e.font,f,n==="breakAll",0).lines:[]:p=t?t.split(`
`):[];var h=p.length*o,m=$t(e.height,h);if(h>m&&d){var g=Math.floor(m/o);c=c||p.length>g,p=p.slice(0,g)}if(t&&a&&f!=null)for(var v=Kee(f,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),_={},x=0;x<p.length;x++)Xee(_,p[x],v),p[x]=_.textLine,c=c||_.isTruncated;for(var w=m,k=0,x=0;x<p.length;x++)k=Math.max(fs(p[x],i),k);f==null&&(f=k);var S=k;return r&&(w+=r[0]+r[2],S+=r[1]+r[3],f+=r[1]+r[3]),l&&(S=f),{lines:p,height:m,outerWidth:S,outerHeight:w,lineHeight:o,calculatedLineHeight:s,contentWidth:k,contentHeight:h,width:f,isTruncated:c}}var b8e=function(){function t(){}return t}(),mj=function(){function t(e){this.tokens=[],e&&(this.tokens=e)}return t}(),_8e=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return t}();function x8e(t,e){var n=new _8e;if(t!=null&&(t+=""),!t)return n;for(var r=e.width,i=e.height,a=e.overflow,s=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,o=y4.lastIndex=0,l;(l=y4.exec(t))!=null;){var d=l.index;d>o&&b4(n,t.substring(o,d),e,s),b4(n,l[2],e,s,l[1]),o=y4.lastIndex}o<t.length&&b4(n,t.substring(o,t.length),e,s);var c=[],f=0,p=0,h=e.padding,m=a==="truncate",g=e.lineOverflow==="truncate",v={};function _(L,U,G){L.width=U,L.lineHeight=G,f+=G,p=Math.max(p,U)}e:for(var x=0;x<n.lines.length;x++){for(var w=n.lines[x],k=0,S=0,C=0;C<w.tokens.length;C++){var A=w.tokens[C],M=A.styleName&&e.rich[A.styleName]||{},$=A.textPadding=M.padding,R=$?$[1]+$[3]:0,I=A.font=M.font||e.font;A.contentHeight=VC(I);var B=$t(M.height,A.contentHeight);if(A.innerHeight=B,$&&(B+=$[0]+$[2]),A.height=B,A.lineHeight=El(M.lineHeight,e.lineHeight,B),A.align=M&&M.align||e.align,A.verticalAlign=M&&M.verticalAlign||"middle",g&&i!=null&&f+A.lineHeight>i){var j=n.lines.length;C>0?(w.tokens=w.tokens.slice(0,C),_(w,S,k),n.lines=n.lines.slice(0,x+1)):n.lines=n.lines.slice(0,x),n.isTruncated=n.isTruncated||n.lines.length<j;break e}var z=M.width,F=z==null||z==="auto";if(typeof z=="string"&&z.charAt(z.length-1)==="%")A.percentWidth=z,c.push(A),A.contentWidth=fs(A.text,I);else{if(F){var q=M.backgroundColor,N=q&&q.image;N&&(N=m8e(N),FC(N)&&(A.width=Math.max(A.width,N.width*B/N.height)))}var O=m&&r!=null?r-S:null;O!=null&&O<A.width?!F||O<R?(A.text="",A.width=A.contentWidth=0):(g8e(v,A.text,O-R,I,e.ellipsis,{minChar:e.truncateMinChar}),A.text=v.text,n.isTruncated=n.isTruncated||v.isTruncated,A.width=A.contentWidth=fs(A.text,I)):A.contentWidth=fs(A.text,I)}A.width+=R,S+=A.width,M&&(k=Math.max(k,A.lineHeight))}_(w,S,k)}n.outerWidth=n.width=$t(r,p),n.outerHeight=n.height=$t(i,f),n.contentHeight=f,n.contentWidth=p,h&&(n.outerWidth+=h[1]+h[3],n.outerHeight+=h[0]+h[2]);for(var x=0;x<c.length;x++){var A=c[x],V=A.percentWidth;A.width=parseInt(V,10)/100*n.width}return n}function b4(t,e,n,r,i){var a=e==="",s=i&&n.rich[i]||{},o=t.lines,l=s.font||n.font,d=!1,c,f;if(r){var p=s.padding,h=p?p[1]+p[3]:0;if(s.width!=null&&s.width!=="auto"){var m=Lo(s.width,r.width)+h;o.length>0&&m+r.accumWidth>r.width&&(c=e.split(`
`),d=!0),r.accumWidth=m}else{var g=Zee(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=g.accumWidth+h,f=g.linesWidths,c=g.lines}}else c=e.split(`
`);for(var v=0;v<c.length;v++){var _=c[v],x=new b8e;if(x.styleName=i,x.text=_,x.isLineHolder=!_&&!a,typeof s.width=="number"?x.width=s.width:x.width=f?f[v]:fs(_,l),!v&&!d){var w=(o[o.length-1]||(o[0]=new mj)).tokens,k=w.length;k===1&&w[0].isLineHolder?w[0]=x:(_||!k||a)&&w.push(x)}else o.push(new mj([x]))}}function w8e(t){var e=t.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var k8e=Vl(",&?/;] ".split(""),function(t,e){return t[e]=!0,t},{});function S8e(t){return w8e(t)?!!k8e[t]:!0}function Zee(t,e,n,r,i){for(var a=[],s=[],o="",l="",d=0,c=0,f=0;f<t.length;f++){var p=t.charAt(f);if(p===`
`){l&&(o+=l,c+=d),a.push(o),s.push(c),o="",l="",d=0,c=0;continue}var h=fs(p,e),m=r?!1:!S8e(p);if(a.length?c+h>n:i+c+h>n){c?(o||l)&&(m?(o||(o=l,l="",d=0,c=d),a.push(o),s.push(c-d),l+=p,d+=h,o="",c=d):(l&&(o+=l,l="",d=0),a.push(o),s.push(c),o=p,c=h)):m?(a.push(l),s.push(d),l=p,d=h):(a.push(p),s.push(h));continue}c+=h,m?(l+=p,d+=h):(l&&(o+=l,l="",d=0),o+=p)}return!a.length&&!o&&(o=t,l="",d=0),l&&(o+=l),o&&(a.push(o),s.push(c)),a.length===1&&(c+=i),{accumWidth:c,lines:a,linesWidths:s}}var zM="__zr_style_"+Math.round(Math.random()*10),Ep={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},BC={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Ep[zM]=!0;var gj=["z","z2","invisible"],C8e=["invisible"],no=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype._init=function(n){for(var r=rn(n),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(n[a]):t.prototype.attrKV.call(this,a,n[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(n,r,i,a){var s=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&A8e(this,n,r)||s&&!s[0]&&!s[3])return!1;if(i&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(n,r){return this.rectContain(n,r)},e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.rectContain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,s=a.shadowBlur||0,o=a.shadowOffsetX||0,l=a.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new qt(0,0,0,0)),r?qt.applyTransform(n,i,r):n.copy(i),(s||o||l)&&(n.width+=s*2+Math.abs(o),n.height+=s*2+Math.abs(l),n.x=Math.min(n.x,n.x+o-s),n.y=Math.min(n.y,n.y+l-s));var d=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-d),n.y=Math.floor(n.y-d),n.width=Math.ceil(n.width+1+d*2),n.height=Math.ceil(n.height+1+d*2))}return n},e.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new qt(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(n){return this.animate("style",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(n,r){n!=="style"?t.prototype.attrKV.call(this,n,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(n,r){return typeof n=="string"?this.style[n]=r:Oe(this.style,n),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=cy,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&cy)},e.prototype.styleUpdated=function(){this.__dirty&=~cy},e.prototype.createStyle=function(n){return IC(Ep,n)},e.prototype.useStyle=function(n){n[zM]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},e.prototype.isStyleObject=function(n){return n[zM]},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,r,gj)},e.prototype._applyStateObj=function(n,r,i,a,s,o){t.prototype._applyStateObj.call(this,n,r,i,a,s,o);var l=!(r&&a),d;if(r&&r.style?s?a?d=r.style:(d=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(d,r.style)):(d=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(d,r.style)):l&&(d=i.style),d)if(s){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=rn(c),p=0;p<f.length;p++){var h=f[p];h in d&&(d[h]=d[h],this.style[h]=c[h])}for(var m=rn(d),p=0;p<m.length;p++){var h=m[p];this.style[h]=this.style[h]}this._transitionState(n,{style:d},o,this.getAnimationStyleProps())}else this.useStyle(d);for(var g=this.__inHover?C8e:gj,p=0;p<g.length;p++){var h=g[p];r&&r[h]!=null?this[h]=r[h]:l&&i[h]!=null&&(this[h]=i[h])}},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var s=n[a];s.style&&(i=i||{},this._mergeStyle(i,s.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(n,r){return Oe(n,r),n},e.prototype.getAnimationStyleProps=function(){return BC},e.initDefaultProps=function(){var n=e.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=ns|cy}(),e}(NC),_4=new qt(0,0,0,0),x4=new qt(0,0,0,0);function A8e(t,e,n){return _4.copy(t.getBoundingRect()),t.transform&&_4.applyTransform(t.transform),x4.width=e,x4.height=n,!_4.intersect(x4)}var Fa=Math.min,Ba=Math.max,w4=Math.sin,k4=Math.cos,cf=Math.PI*2,z_=ch(),U_=ch(),H_=ch();function zC(t,e,n){if(t.length!==0){for(var r=t[0],i=r[0],a=r[0],s=r[1],o=r[1],l=1;l<t.length;l++)r=t[l],i=Fa(i,r[0]),a=Ba(a,r[0]),s=Fa(s,r[1]),o=Ba(o,r[1]);e[0]=i,e[1]=s,n[0]=a,n[1]=o}}function vj(t,e,n,r,i,a){i[0]=Fa(t,n),i[1]=Fa(e,r),a[0]=Ba(t,n),a[1]=Ba(e,r)}var yj=[],bj=[];function T8e(t,e,n,r,i,a,s,o,l,d){var c=vee,f=ei,p=c(t,n,i,s,yj);l[0]=1/0,l[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var h=0;h<p;h++){var m=f(t,n,i,s,yj[h]);l[0]=Fa(m,l[0]),d[0]=Ba(m,d[0])}p=c(e,r,a,o,bj);for(var h=0;h<p;h++){var g=f(e,r,a,o,bj[h]);l[1]=Fa(g,l[1]),d[1]=Ba(g,d[1])}l[0]=Fa(t,l[0]),d[0]=Ba(t,d[0]),l[0]=Fa(s,l[0]),d[0]=Ba(s,d[0]),l[1]=Fa(e,l[1]),d[1]=Ba(e,d[1]),l[1]=Fa(o,l[1]),d[1]=Ba(o,d[1])}function E8e(t,e,n,r,i,a,s,o){var l=bee,d=ci,c=Ba(Fa(l(t,n,i),1),0),f=Ba(Fa(l(e,r,a),1),0),p=d(t,n,i,c),h=d(e,r,a,f);s[0]=Fa(t,i,p),s[1]=Fa(e,a,h),o[0]=Ba(t,i,p),o[1]=Ba(e,a,h)}function M8e(t,e,n,r,i,a,s,o,l){var d=tc,c=nc,f=Math.abs(i-a);if(f%cf<1e-4&&f>1e-4){o[0]=t-n,o[1]=e-r,l[0]=t+n,l[1]=e+r;return}if(z_[0]=k4(i)*n+t,z_[1]=w4(i)*r+e,U_[0]=k4(a)*n+t,U_[1]=w4(a)*r+e,d(o,z_,U_),c(l,z_,U_),i=i%cf,i<0&&(i=i+cf),a=a%cf,a<0&&(a=a+cf),i>a&&!s?a+=cf:i<a&&s&&(i+=cf),s){var p=a;a=i,i=p}for(var h=0;h<a;h+=Math.PI/2)h>i&&(H_[0]=k4(h)*n+t,H_[1]=w4(h)*r+e,d(o,H_,o),c(l,H_,l))}var Nn={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},ff=[],pf=[],qo=[],xd=[],Wo=[],Go=[],S4=Math.min,C4=Math.max,hf=Math.cos,mf=Math.sin,su=Math.abs,UM=Math.PI,Od=UM*2,A4=typeof Float32Array!="undefined",Av=[];function T4(t){var e=Math.round(t/UM*1e8)/1e8;return e%2*UM}function eI(t,e){var n=T4(t[0]);n<0&&(n+=Od);var r=n-t[0],i=t[1];i+=r,!e&&i-n>=Od?i=n+Od:e&&n-i>=Od?i=n-Od:!e&&n>i?i=n+(Od-T4(n-i)):e&&n<i&&(i=n-(Od-T4(i-n))),t[0]=n,t[1]=i}var Bl=function(){function t(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(e,n,r){r=r||0,r>0&&(this._ux=su(r/_k/e)||0,this._uy=su(r/_k/n)||0)},t.prototype.setDPR=function(e){this.dpr=e},t.prototype.setContext=function(e){this._ctx=e},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(e,n){return this._drawPendingPt(),this.addData(Nn.M,e,n),this._ctx&&this._ctx.moveTo(e,n),this._x0=e,this._y0=n,this._xi=e,this._yi=n,this},t.prototype.lineTo=function(e,n){var r=su(e-this._xi),i=su(n-this._yi),a=r>this._ux||i>this._uy;if(this.addData(Nn.L,e,n),this._ctx&&a&&this._ctx.lineTo(e,n),a)this._xi=e,this._yi=n,this._pendingPtDist=0;else{var s=r*r+i*i;s>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=n,this._pendingPtDist=s)}return this},t.prototype.bezierCurveTo=function(e,n,r,i,a,s){return this._drawPendingPt(),this.addData(Nn.C,e,n,r,i,a,s),this._ctx&&this._ctx.bezierCurveTo(e,n,r,i,a,s),this._xi=a,this._yi=s,this},t.prototype.quadraticCurveTo=function(e,n,r,i){return this._drawPendingPt(),this.addData(Nn.Q,e,n,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,n,r,i),this._xi=r,this._yi=i,this},t.prototype.arc=function(e,n,r,i,a,s){this._drawPendingPt(),Av[0]=i,Av[1]=a,eI(Av,s),i=Av[0],a=Av[1];var o=a-i;return this.addData(Nn.A,e,n,r,r,i,o,0,s?0:1),this._ctx&&this._ctx.arc(e,n,r,i,a,s),this._xi=hf(a)*r+e,this._yi=mf(a)*r+n,this},t.prototype.arcTo=function(e,n,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,n,r,i,a),this},t.prototype.rect=function(e,n,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,n,r,i),this.addData(Nn.R,e,n,r,i),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(Nn.Z);var e=this._ctx,n=this._x0,r=this._y0;return e&&e.closePath(),this._xi=n,this._yi=r,this},t.prototype.fill=function(e){e&&e.fill(),this.toStatic()},t.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(e){var n=e.length;!(this.data&&this.data.length===n)&&A4&&(this.data=new Float32Array(n));for(var r=0;r<n;r++)this.data[r]=e[r];this._len=n},t.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var n=e.length,r=0,i=this._len,a=0;a<n;a++)r+=e[a].len();A4&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<n;a++)for(var s=e[a].data,o=0;o<s.length;o++)this.data[i++]=s[o];this._len=i},t.prototype.addData=function(e,n,r,i,a,s,o,l,d){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],n=0;n<this._len;n++)e[n]=this.data[n];this.data=e}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,A4&&this._len>11&&(this.data=new Float32Array(e)))}},t.prototype.getBoundingRect=function(){qo[0]=qo[1]=Wo[0]=Wo[1]=Number.MAX_VALUE,xd[0]=xd[1]=Go[0]=Go[1]=-Number.MAX_VALUE;var e=this.data,n=0,r=0,i=0,a=0,s;for(s=0;s<this._len;){var o=e[s++],l=s===1;switch(l&&(n=e[s],r=e[s+1],i=n,a=r),o){case Nn.M:n=i=e[s++],r=a=e[s++],Wo[0]=i,Wo[1]=a,Go[0]=i,Go[1]=a;break;case Nn.L:vj(n,r,e[s],e[s+1],Wo,Go),n=e[s++],r=e[s++];break;case Nn.C:T8e(n,r,e[s++],e[s++],e[s++],e[s++],e[s],e[s+1],Wo,Go),n=e[s++],r=e[s++];break;case Nn.Q:E8e(n,r,e[s++],e[s++],e[s],e[s+1],Wo,Go),n=e[s++],r=e[s++];break;case Nn.A:var d=e[s++],c=e[s++],f=e[s++],p=e[s++],h=e[s++],m=e[s++]+h;s+=1;var g=!e[s++];l&&(i=hf(h)*f+d,a=mf(h)*p+c),M8e(d,c,f,p,h,m,g,Wo,Go),n=hf(m)*f+d,r=mf(m)*p+c;break;case Nn.R:i=n=e[s++],a=r=e[s++];var v=e[s++],_=e[s++];vj(i,a,i+v,a+_,Wo,Go);break;case Nn.Z:n=i,r=a;break}tc(qo,qo,Wo),nc(xd,xd,Go)}return s===0&&(qo[0]=qo[1]=xd[0]=xd[1]=0),new qt(qo[0],qo[1],xd[0]-qo[0],xd[1]-qo[1])},t.prototype._calculateLength=function(){var e=this.data,n=this._len,r=this._ux,i=this._uy,a=0,s=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var d=this._pathSegLen,c=0,f=0,p=0;p<n;){var h=e[p++],m=p===1;m&&(a=e[p],s=e[p+1],o=a,l=s);var g=-1;switch(h){case Nn.M:a=o=e[p++],s=l=e[p++];break;case Nn.L:{var v=e[p++],_=e[p++],x=v-a,w=_-s;(su(x)>r||su(w)>i||p===n-1)&&(g=Math.sqrt(x*x+w*w),a=v,s=_);break}case Nn.C:{var k=e[p++],S=e[p++],v=e[p++],_=e[p++],C=e[p++],A=e[p++];g=K6e(a,s,k,S,v,_,C,A,10),a=C,s=A;break}case Nn.Q:{var k=e[p++],S=e[p++],v=e[p++],_=e[p++];g=Z6e(a,s,k,S,v,_,10),a=v,s=_;break}case Nn.A:var M=e[p++],$=e[p++],R=e[p++],I=e[p++],B=e[p++],j=e[p++],z=j+B;p+=1,m&&(o=hf(B)*R+M,l=mf(B)*I+$),g=C4(R,I)*S4(Od,Math.abs(j)),a=hf(z)*R+M,s=mf(z)*I+$;break;case Nn.R:{o=a=e[p++],l=s=e[p++];var F=e[p++],q=e[p++];g=F*2+q*2;break}case Nn.Z:{var x=o-a,w=l-s;g=Math.sqrt(x*x+w*w),a=o,s=l;break}}g>=0&&(d[f++]=g,c+=g)}return this._pathLen=c,c},t.prototype.rebuildPath=function(e,n){var r=this.data,i=this._ux,a=this._uy,s=this._len,o,l,d,c,f,p,h=n<1,m,g,v=0,_=0,x,w=0,k,S;if(!(h&&(this._pathSegLen||this._calculateLength(),m=this._pathSegLen,g=this._pathLen,x=n*g,!x)))e:for(var C=0;C<s;){var A=r[C++],M=C===1;switch(M&&(d=r[C],c=r[C+1],o=d,l=c),A!==Nn.L&&w>0&&(e.lineTo(k,S),w=0),A){case Nn.M:o=d=r[C++],l=c=r[C++],e.moveTo(d,c);break;case Nn.L:{f=r[C++],p=r[C++];var $=su(f-d),R=su(p-c);if($>i||R>a){if(h){var I=m[_++];if(v+I>x){var B=(x-v)/I;e.lineTo(d*(1-B)+f*B,c*(1-B)+p*B);break e}v+=I}e.lineTo(f,p),d=f,c=p,w=0}else{var j=$*$+R*R;j>w&&(k=f,S=p,w=j)}break}case Nn.C:{var z=r[C++],F=r[C++],q=r[C++],N=r[C++],O=r[C++],V=r[C++];if(h){var I=m[_++];if(v+I>x){var B=(x-v)/I;Rc(d,z,q,O,B,ff),Rc(c,F,N,V,B,pf),e.bezierCurveTo(ff[1],pf[1],ff[2],pf[2],ff[3],pf[3]);break e}v+=I}e.bezierCurveTo(z,F,q,N,O,V),d=O,c=V;break}case Nn.Q:{var z=r[C++],F=r[C++],q=r[C++],N=r[C++];if(h){var I=m[_++];if(v+I>x){var B=(x-v)/I;d1(d,z,q,B,ff),d1(c,F,N,B,pf),e.quadraticCurveTo(ff[1],pf[1],ff[2],pf[2]);break e}v+=I}e.quadraticCurveTo(z,F,q,N),d=q,c=N;break}case Nn.A:var L=r[C++],U=r[C++],G=r[C++],X=r[C++],re=r[C++],ee=r[C++],de=r[C++],se=!r[C++],te=G>X?G:X,ne=su(G-X)>.001,ce=re+ee,ve=!1;if(h){var I=m[_++];v+I>x&&(ce=re+ee*(x-v)/I,ve=!0),v+=I}if(ne&&e.ellipse?e.ellipse(L,U,G,X,de,re,ce,se):e.arc(L,U,te,re,ce,se),ve)break e;M&&(o=hf(re)*G+L,l=mf(re)*X+U),d=hf(ce)*G+L,c=mf(ce)*X+U;break;case Nn.R:o=d=r[C],l=c=r[C+1],f=r[C++],p=r[C++];var Y=r[C++],K=r[C++];if(h){var I=m[_++];if(v+I>x){var H=x-v;e.moveTo(f,p),e.lineTo(f+S4(H,Y),p),H-=Y,H>0&&e.lineTo(f+Y,p+S4(H,K)),H-=K,H>0&&e.lineTo(f+C4(Y-H,0),p+K),H-=Y,H>0&&e.lineTo(f,p+C4(K-H,0));break e}v+=I}e.rect(f,p,Y,K);break;case Nn.Z:if(h){var I=m[_++];if(v+I>x){var B=(x-v)/I;e.lineTo(d*(1-B)+o*B,c*(1-B)+l*B);break e}v+=I}e.closePath(),d=o,c=l}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=Nn,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}();function Hd(t,e,n,r,i,a,s){if(i===0)return!1;var o=i,l=0,d=t;if(s>e+o&&s>r+o||s<e-o&&s<r-o||a>t+o&&a>n+o||a<t-o&&a<n-o)return!1;if(t!==n)l=(e-r)/(t-n),d=(t*r-n*e)/(t-n);else return Math.abs(a-t)<=o/2;var c=l*a-s+d,f=c*c/(l*l+1);return f<=o/2*o/2}function $8e(t,e,n,r,i,a,s,o,l,d,c){if(l===0)return!1;var f=l;if(c>e+f&&c>r+f&&c>a+f&&c>o+f||c<e-f&&c<r-f&&c<a-f&&c<o-f||d>t+f&&d>n+f&&d>i+f&&d>s+f||d<t-f&&d<n-f&&d<i-f&&d<s-f)return!1;var p=yee(t,e,n,r,i,a,s,o,d,c,null);return p<=f/2}function Qee(t,e,n,r,i,a,s,o,l){if(s===0)return!1;var d=s;if(l>e+d&&l>r+d&&l>a+d||l<e-d&&l<r-d&&l<a-d||o>t+d&&o>n+d&&o>i+d||o<t-d&&o<n-d&&o<i-d)return!1;var c=_ee(t,e,n,r,i,a,o,l,null);return c<=d/2}var _j=Math.PI*2;function as(t){return t%=_j,t<0&&(t+=_j),t}var Tv=Math.PI*2;function D8e(t,e,n,r,i,a,s,o,l){if(s===0)return!1;var d=s;o-=t,l-=e;var c=Math.sqrt(o*o+l*l);if(c-d>n||c+d<n)return!1;if(Math.abs(r-i)%Tv<1e-4)return!0;if(a){var f=r;r=as(i),i=as(f)}else r=as(r),i=as(i);r>i&&(i+=Tv);var p=Math.atan2(l,o);return p<0&&(p+=Tv),p>=r&&p<=i||p+Tv>=r&&p+Tv<=i}function _u(t,e,n,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var s=(a-e)/(r-e),o=r<e?1:-1;(s===1||s===0)&&(o=r<e?.5:-.5);var l=s*(n-t)+t;return l===i?1/0:l>i?o:0}var wd=Bl.CMD,gf=Math.PI*2,R8e=1e-4;function P8e(t,e){return Math.abs(t-e)<R8e}var fa=[-1,-1,-1],Es=[-1,-1];function I8e(){var t=Es[0];Es[0]=Es[1],Es[1]=t}function O8e(t,e,n,r,i,a,s,o,l,d){if(d>e&&d>r&&d>a&&d>o||d<e&&d<r&&d<a&&d<o)return 0;var c=gk(e,r,a,o,d,fa);if(c===0)return 0;for(var f=0,p=-1,h=void 0,m=void 0,g=0;g<c;g++){var v=fa[g],_=v===0||v===1?.5:1,x=ei(t,n,i,s,v);x<l||(p<0&&(p=vee(e,r,a,o,Es),Es[1]<Es[0]&&p>1&&I8e(),h=ei(e,r,a,o,Es[0]),p>1&&(m=ei(e,r,a,o,Es[1]))),p===2?v<Es[0]?f+=h<e?_:-_:v<Es[1]?f+=m<h?_:-_:f+=o<m?_:-_:v<Es[0]?f+=h<e?_:-_:f+=o<h?_:-_)}return f}function L8e(t,e,n,r,i,a,s,o){if(o>e&&o>r&&o>a||o<e&&o<r&&o<a)return 0;var l=X6e(e,r,a,o,fa);if(l===0)return 0;var d=bee(e,r,a);if(d>=0&&d<=1){for(var c=0,f=ci(e,r,a,d),p=0;p<l;p++){var h=fa[p]===0||fa[p]===1?.5:1,m=ci(t,n,i,fa[p]);m<s||(fa[p]<d?c+=f<e?h:-h:c+=a<f?h:-h)}return c}else{var h=fa[0]===0||fa[0]===1?.5:1,m=ci(t,n,i,fa[0]);return m<s?0:a<e?h:-h}}function V8e(t,e,n,r,i,a,s,o){if(o-=e,o>n||o<-n)return 0;var l=Math.sqrt(n*n-o*o);fa[0]=-l,fa[1]=l;var d=Math.abs(r-i);if(d<1e-4)return 0;if(d>=gf-1e-4){r=0,i=gf;var c=a?1:-1;return s>=fa[0]+t&&s<=fa[1]+t?c:0}if(r>i){var f=r;r=i,i=f}r<0&&(r+=gf,i+=gf);for(var p=0,h=0;h<2;h++){var m=fa[h];if(m+t>s){var g=Math.atan2(o,m),c=a?1:-1;g<0&&(g=gf+g),(g>=r&&g<=i||g+gf>=r&&g+gf<=i)&&(g>Math.PI/2&&g<Math.PI*1.5&&(c=-c),p+=c)}}return p}function Jee(t,e,n,r,i){for(var a=t.data,s=t.len(),o=0,l=0,d=0,c=0,f=0,p,h,m=0;m<s;){var g=a[m++],v=m===1;switch(g===wd.M&&m>1&&(n||(o+=_u(l,d,c,f,r,i))),v&&(l=a[m],d=a[m+1],c=l,f=d),g){case wd.M:c=a[m++],f=a[m++],l=c,d=f;break;case wd.L:if(n){if(Hd(l,d,a[m],a[m+1],e,r,i))return!0}else o+=_u(l,d,a[m],a[m+1],r,i)||0;l=a[m++],d=a[m++];break;case wd.C:if(n){if($8e(l,d,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],e,r,i))return!0}else o+=O8e(l,d,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],r,i)||0;l=a[m++],d=a[m++];break;case wd.Q:if(n){if(Qee(l,d,a[m++],a[m++],a[m],a[m+1],e,r,i))return!0}else o+=L8e(l,d,a[m++],a[m++],a[m],a[m+1],r,i)||0;l=a[m++],d=a[m++];break;case wd.A:var _=a[m++],x=a[m++],w=a[m++],k=a[m++],S=a[m++],C=a[m++];m+=1;var A=!!(1-a[m++]);p=Math.cos(S)*w+_,h=Math.sin(S)*k+x,v?(c=p,f=h):o+=_u(l,d,p,h,r,i);var M=(r-_)*k/w+_;if(n){if(D8e(_,x,k,S,S+C,A,e,M,i))return!0}else o+=V8e(_,x,k,S,S+C,A,M,i);l=Math.cos(S+C)*w+_,d=Math.sin(S+C)*k+x;break;case wd.R:c=l=a[m++],f=d=a[m++];var $=a[m++],R=a[m++];if(p=c+$,h=f+R,n){if(Hd(c,f,p,f,e,r,i)||Hd(p,f,p,h,e,r,i)||Hd(p,h,c,h,e,r,i)||Hd(c,h,c,f,e,r,i))return!0}else o+=_u(p,f,p,h,r,i),o+=_u(c,h,c,f,r,i);break;case wd.Z:if(n){if(Hd(l,d,c,f,e,r,i))return!0}else o+=_u(l,d,c,f,r,i);l=c,d=f;break}}return!n&&!P8e(d,f)&&(o+=_u(l,d,c,f,r,i)||0),o!==0}function N8e(t,e,n){return Jee(t,0,!1,e,n)}function j8e(t,e,n,r){return Jee(t,e,!0,n,r)}var wk=yt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Ep),F8e={style:yt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},BC.style)},E4=jl.concat(["invisible","culling","z","z2","zlevel","parent"]),Zt=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.update=function(){var n=this;t.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){n.buildPath(l,n.shape)}),i.silent=!0;var a=i.style;for(var s in r)a[s]!==r[s]&&(a[s]=r[s]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var o=0;o<E4.length;++o)i[E4[o]]=this[E4[o]];i.__dirty|=ns}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(n){var r=rn(n);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var s=r[a],o=n[s];s==="style"?this.style?Oe(this.style,o):this.useStyle(o):s==="shape"?Oe(this.shape,o):t.prototype.attrKV.call(this,s,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(it(n)){var r=yk(n,0);return r>.5?VM:r>.2?SLe:NM}else if(n)return NM}return VM},e.prototype.getInsideTextStroke=function(n){var r=this.style.fill;if(it(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),s=yk(n,0)<LM;if(a===s)return r}},e.prototype.buildPath=function(n,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~vm},e.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},e.prototype.createPathProxy=function(){this.path=new Bl(!1)},e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return!(r==null||r==="none"||!(n.lineWidth>0))},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var n=this._rect,r=this.style,i=!n;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var s=this.path;(a||this.__dirty&vm)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),n=s.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||i){o.copy(n);var l=r.strokeNoScale?this.getLineScale():1,d=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;d=Math.max(d,c==null?4:c)}l>1e-10&&(o.width+=d/l,o.height+=d/l,o.x-=d/l/2,o.y-=d/l/2)}return o}return n},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect(),s=this.style;if(n=i[0],r=i[1],a.contain(n,r)){var o=this.path;if(this.hasStroke()){var l=s.lineWidth,d=s.strokeNoScale?this.getLineScale():1;if(d>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),j8e(o,l/d,n,r)))return!0}if(this.hasFill())return N8e(o,n,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=vm,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(n){return this.animate("shape",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(n,r){n==="shape"?this.setShape(r):t.prototype.attrKV.call(this,n,r)},e.prototype.setShape=function(n,r){var i=this.shape;return i||(i=this.shape={}),typeof n=="string"?i[n]=r:Oe(i,n),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&vm)},e.prototype.createStyle=function(n){return IC(wk,n)},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.shape&&!r.shape&&(r.shape=Oe({},this.shape))},e.prototype._applyStateObj=function(n,r,i,a,s,o){t.prototype._applyStateObj.call(this,n,r,i,a,s,o);var l=!(r&&a),d;if(r&&r.shape?s?a?d=r.shape:(d=Oe({},i.shape),Oe(d,r.shape)):(d=Oe({},a?this.shape:i.shape),Oe(d,r.shape)):l&&(d=i.shape),d)if(s){this.shape=Oe({},this.shape);for(var c={},f=rn(d),p=0;p<f.length;p++){var h=f[p];typeof d[h]=="object"?this.shape[h]=d[h]:c[h]=d[h]}this._transitionState(n,{shape:c},o)}else this.shape=d,this.dirtyShape()},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var s=n[a];s.shape&&(i=i||{},this._mergeStyle(i,s.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return F8e},e.prototype.isZeroArea=function(){return!1},e.extend=function(n){var r=function(a){Ce(s,a);function s(o){var l=a.call(this,o)||this;return n.init&&n.init.call(l,o),l}return s.prototype.getDefaultStyle=function(){return xt(n.style)},s.prototype.getDefaultShape=function(){return xt(n.shape)},s}(e);for(var i in n)typeof n[i]=="function"&&(r.prototype[i]=n[i]);return r},e.initDefaultProps=function(){var n=e.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=ns|cy|vm}(),e}(no),B8e=yt({strokeFirst:!0,font:$c,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},wk),hg=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return r!=null&&r!=="none"&&n.lineWidth>0},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(n){return IC(B8e,n)},e.prototype.setBoundingRect=function(n){this._rect=n},e.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var r=n.text;r!=null?r+="":r="";var i=bb(r,n.font,n.textAlign,n.textBaseline);if(i.x+=n.x||0,i.y+=n.y||0,this.hasStroke()){var a=n.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var n=e.prototype;n.dirtyRectTolerance=10}(),e}(no);hg.prototype.type="tspan";var z8e=yt({x:0,y:0},Ep),U8e={style:yt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},BC.style)};function H8e(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var xi=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createStyle=function(n){return IC(z8e,n)},e.prototype._getSize=function(n){var r=this.style,i=r[n];if(i!=null)return i;var a=H8e(r.image)?r.image:this.__image;if(!a)return 0;var s=n==="width"?"height":"width",o=r[s];return o==null?a[n]:a[n]/a[s]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return U8e},e.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new qt(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},e}(no);xi.prototype.type="image";function q8e(t,e){var n=e.x,r=e.y,i=e.width,a=e.height,s=e.r,o,l,d,c;i<0&&(n=n+i,i=-i),a<0&&(r=r+a,a=-a),typeof s=="number"?o=l=d=c=s:s instanceof Array?s.length===1?o=l=d=c=s[0]:s.length===2?(o=d=s[0],l=c=s[1]):s.length===3?(o=s[0],l=c=s[1],d=s[2]):(o=s[0],l=s[1],d=s[2],c=s[3]):o=l=d=c=0;var f;o+l>i&&(f=o+l,o*=i/f,l*=i/f),d+c>i&&(f=d+c,d*=i/f,c*=i/f),l+d>a&&(f=l+d,l*=a/f,d*=a/f),o+c>a&&(f=o+c,o*=a/f,c*=a/f),t.moveTo(n+o,r),t.lineTo(n+i-l,r),l!==0&&t.arc(n+i-l,r+l,l,-Math.PI/2,0),t.lineTo(n+i,r+a-d),d!==0&&t.arc(n+i-d,r+a-d,d,0,Math.PI/2),t.lineTo(n+c,r+a),c!==0&&t.arc(n+c,r+a-c,c,Math.PI/2,Math.PI),t.lineTo(n,r+o),o!==0&&t.arc(n+o,r+o,o,Math.PI,Math.PI*1.5)}var Am=Math.round;function ete(t,e,n){if(e){var r=e.x1,i=e.x2,a=e.y1,s=e.y2;t.x1=r,t.x2=i,t.y1=a,t.y2=s;var o=n&&n.lineWidth;return o&&(Am(r*2)===Am(i*2)&&(t.x1=t.x2=rp(r,o,!0)),Am(a*2)===Am(s*2)&&(t.y1=t.y2=rp(a,o,!0))),t}}function tte(t,e,n){if(e){var r=e.x,i=e.y,a=e.width,s=e.height;t.x=r,t.y=i,t.width=a,t.height=s;var o=n&&n.lineWidth;return o&&(t.x=rp(r,o,!0),t.y=rp(i,o,!0),t.width=Math.max(rp(r+a,o,!1)-t.x,a===0?0:1),t.height=Math.max(rp(i+s,o,!1)-t.y,s===0?0:1)),t}}function rp(t,e,n){if(!e)return t;var r=Am(t*2);return(r+Am(e))%2===0?r/2:(r+(n?1:-1))/2}var W8e=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),G8e={},sn=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new W8e},e.prototype.buildPath=function(n,r){var i,a,s,o;if(this.subPixelOptimize){var l=tte(G8e,r,this.style);i=l.x,a=l.y,s=l.width,o=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,s=r.width,o=r.height;r.r?q8e(n,r):n.rect(i,a,s,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Zt);sn.prototype.type="rect";var xj={fill:"#000"},wj=2,Y8e={style:yt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},BC.style)},un=function(t){Ce(e,t);function e(n){var r=t.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=xj,r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var r=this._children[n];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(n){var r=this.innerTransformable;return r?r.getLocalTransform(n):t.prototype.getLocalTransform.call(this,n)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,Z8e(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=n},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new qt(0,0,0,0),r=this._children,i=[],a=null,s=0;s<r.length;s++){var o=r[s],l=o.getBoundingRect(),d=o.getLocalTransform(i);d?(n.copy(l),n.applyTransform(d),a=a||n.clone(),a.union(n)):(a=a||l.clone(),a.union(l))}this._rect=a||n}return this._rect},e.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||xj},e.prototype.setTextContent=function(n){},e.prototype._mergeStyle=function(n,r){if(!r)return n;var i=r.rich,a=n.rich||i&&{};return Oe(n,r),i&&a?(this._mergeRich(a,i),n.rich=a):a&&(n.rich=a),n},e.prototype._mergeRich=function(n,r){for(var i=rn(r),a=0;a<i.length;a++){var s=i[a];n[s]=n[s]||{},Oe(n[s],r[s])}},e.prototype.getAnimationStyleProps=function(){return Y8e},e.prototype._getOrCreateChild=function(n){var r=this._children[this._childCursor];return(!r||!(r instanceof n))&&(r=new n),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var n=this.style,r=n.font||$c,i=n.padding,a=Mj(n),s=y8e(a,n),o=M4(n),l=!!n.backgroundColor,d=s.outerHeight,c=s.outerWidth,f=s.contentWidth,p=s.lines,h=s.lineHeight,m=this._defaultStyle;this.isTruncated=!!s.isTruncated;var g=n.x||0,v=n.y||0,_=n.align||m.align||"left",x=n.verticalAlign||m.verticalAlign||"top",w=g,k=ym(v,s.contentHeight,x);if(o||i){var S=py(g,c,_),C=ym(v,d,x);o&&this._renderBackground(n,n,S,C,c,d)}k+=h/2,i&&(w=Ej(g,_,i),x==="top"?k+=i[0]:x==="bottom"&&(k-=i[2]));for(var A=0,M=!1,$=Tj("fill"in n?n.fill:(M=!0,m.fill)),R=Aj("stroke"in n?n.stroke:!l&&(!m.autoStroke||M)?(A=wj,m.stroke):null),I=n.textShadowBlur>0,B=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),j=s.calculatedLineHeight,z=0;z<p.length;z++){var F=this._getOrCreateChild(hg),q=F.createStyle();F.useStyle(q),q.text=p[z],q.x=w,q.y=k,q.textAlign=_,q.textBaseline="middle",q.opacity=n.opacity,q.strokeFirst=!0,I&&(q.shadowBlur=n.textShadowBlur||0,q.shadowColor=n.textShadowColor||"transparent",q.shadowOffsetX=n.textShadowOffsetX||0,q.shadowOffsetY=n.textShadowOffsetY||0),q.stroke=R,q.fill=$,R&&(q.lineWidth=n.lineWidth||A,q.lineDash=n.lineDash,q.lineDashOffset=n.lineDashOffset||0),q.font=r,Sj(q,n),k+=h,B&&F.setBoundingRect(new qt(py(q.x,f,q.textAlign),ym(q.y,j,q.textBaseline),f,j))}},e.prototype._updateRichTexts=function(){var n=this.style,r=Mj(n),i=x8e(r,n),a=i.width,s=i.outerWidth,o=i.outerHeight,l=n.padding,d=n.x||0,c=n.y||0,f=this._defaultStyle,p=n.align||f.align,h=n.verticalAlign||f.verticalAlign;this.isTruncated=!!i.isTruncated;var m=py(d,s,p),g=ym(c,o,h),v=m,_=g;l&&(v+=l[3],_+=l[0]);var x=v+a;M4(n)&&this._renderBackground(n,n,m,g,s,o);for(var w=!!n.backgroundColor,k=0;k<i.lines.length;k++){for(var S=i.lines[k],C=S.tokens,A=C.length,M=S.lineHeight,$=S.width,R=0,I=v,B=x,j=A-1,z=void 0;R<A&&(z=C[R],!z.align||z.align==="left");)this._placeToken(z,n,M,_,I,"left",w),$-=z.width,I+=z.width,R++;for(;j>=0&&(z=C[j],z.align==="right");)this._placeToken(z,n,M,_,B,"right",w),$-=z.width,B-=z.width,j--;for(I+=(a-(I-v)-(x-B)-$)/2;R<=j;)z=C[R],this._placeToken(z,n,M,_,I+z.width/2,"center",w),I+=z.width,R++;_+=M}},e.prototype._placeToken=function(n,r,i,a,s,o,l){var d=r.rich[n.styleName]||{};d.text=n.text;var c=n.verticalAlign,f=a+i/2;c==="top"?f=a+n.height/2:c==="bottom"&&(f=a+i-n.height/2);var p=!n.isLineHolder&&M4(d);p&&this._renderBackground(d,r,o==="right"?s-n.width:o==="center"?s-n.width/2:s,f-n.height/2,n.width,n.height);var h=!!d.backgroundColor,m=n.textPadding;m&&(s=Ej(s,o,m),f-=n.height/2-m[0]-n.innerHeight/2);var g=this._getOrCreateChild(hg),v=g.createStyle();g.useStyle(v);var _=this._defaultStyle,x=!1,w=0,k=Tj("fill"in d?d.fill:"fill"in r?r.fill:(x=!0,_.fill)),S=Aj("stroke"in d?d.stroke:"stroke"in r?r.stroke:!h&&!l&&(!_.autoStroke||x)?(w=wj,_.stroke):null),C=d.textShadowBlur>0||r.textShadowBlur>0;v.text=n.text,v.x=s,v.y=f,C&&(v.shadowBlur=d.textShadowBlur||r.textShadowBlur||0,v.shadowColor=d.textShadowColor||r.textShadowColor||"transparent",v.shadowOffsetX=d.textShadowOffsetX||r.textShadowOffsetX||0,v.shadowOffsetY=d.textShadowOffsetY||r.textShadowOffsetY||0),v.textAlign=o,v.textBaseline="middle",v.font=n.font||$c,v.opacity=El(d.opacity,r.opacity,1),Sj(v,d),S&&(v.lineWidth=El(d.lineWidth,r.lineWidth,w),v.lineDash=$t(d.lineDash,r.lineDash),v.lineDashOffset=r.lineDashOffset||0,v.stroke=S),k&&(v.fill=k);var A=n.contentWidth,M=n.contentHeight;g.setBoundingRect(new qt(py(v.x,A,v.textAlign),ym(v.y,M,v.textBaseline),A,M))},e.prototype._renderBackground=function(n,r,i,a,s,o){var l=n.backgroundColor,d=n.borderWidth,c=n.borderColor,f=l&&l.image,p=l&&!f,h=n.borderRadius,m=this,g,v;if(p||n.lineHeight||d&&c){g=this._getOrCreateChild(sn),g.useStyle(g.createStyle()),g.style.fill=null;var _=g.shape;_.x=i,_.y=a,_.width=s,_.height=o,_.r=h,g.dirtyShape()}if(p){var x=g.style;x.fill=l||null,x.fillOpacity=$t(n.fillOpacity,1)}else if(f){v=this._getOrCreateChild(xi),v.onload=function(){m.dirtyStyle()};var w=v.style;w.image=l.image,w.x=i,w.y=a,w.width=s,w.height=o}if(d&&c){var x=g.style;x.lineWidth=d,x.stroke=c,x.strokeOpacity=$t(n.strokeOpacity,1),x.lineDash=n.borderDash,x.lineDashOffset=n.borderDashOffset||0,g.strokeContainThreshold=0,g.hasFill()&&g.hasStroke()&&(x.strokeFirst=!0,x.lineWidth*=2)}var k=(g||v).style;k.shadowBlur=n.shadowBlur||0,k.shadowColor=n.shadowColor||"transparent",k.shadowOffsetX=n.shadowOffsetX||0,k.shadowOffsetY=n.shadowOffsetY||0,k.opacity=El(n.opacity,r.opacity,1)},e.makeFont=function(n){var r="";return rte(n)&&(r=[n.fontStyle,n.fontWeight,nte(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),r&&xo(r)||n.textFont||n.font},e}(no),K8e={left:!0,right:1,center:1},X8e={top:1,bottom:1,middle:1},kj=["fontStyle","fontWeight","fontSize","fontFamily"];function nte(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?LP+"px":t+"px"}function Sj(t,e){for(var n=0;n<kj.length;n++){var r=kj[n],i=e[r];i!=null&&(t[r]=i)}}function rte(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function Z8e(t){return Cj(t),oe(t.rich,Cj),t}function Cj(t){if(t){t.font=un.makeFont(t);var e=t.align;e==="middle"&&(e="center"),t.align=e==null||K8e[e]?e:"left";var n=t.verticalAlign;n==="center"&&(n="middle"),t.verticalAlign=n==null||X8e[n]?n:"top";var r=t.padding;r&&(t.padding=zP(t.padding))}}function Aj(t,e){return t==null||e<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function Tj(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function Ej(t,e,n){return e==="right"?t-n[1]:e==="center"?t+n[3]/2-n[1]/2:t+n[3]}function Mj(t){var e=t.text;return e!=null&&(e+=""),e}function M4(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var Tt=on(),HM=function(t,e,n,r){if(r){var i=Tt(r);i.dataIndex=n,i.dataType=e,i.seriesIndex=t,i.ssrType="chart",r.type==="group"&&r.traverse(function(a){var s=Tt(a);s.seriesIndex=t,s.dataIndex=n,s.dataType=e,s.ssrType="chart"})}},$j=1,Dj={},ite=on(),tI=on(),nI=0,xb=1,UC=2,Ea=["emphasis","blur","select"],m1=["normal","emphasis","blur","select"],Vg=10,Q8e=9,Mp="highlight",Ew="downplay",d0="select",Mw="unselect",c0="toggleSelect";function Fh(t){return t!=null&&t!=="none"}function HC(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function ate(t){HC(t,"emphasis",UC)}function ste(t){t.hoverState===UC&&HC(t,"normal",nI)}function rI(t){HC(t,"blur",xb)}function ote(t){t.hoverState===xb&&HC(t,"normal",nI)}function J8e(t){t.selected=!0}function eVe(t){t.selected=!1}function Rj(t,e,n){e(t,n)}function pd(t,e,n){Rj(t,e,n),t.isGroup&&t.traverse(function(r){Rj(r,e,n)})}function kk(t,e){switch(e){case"emphasis":t.hoverState=UC;break;case"normal":t.hoverState=nI;break;case"blur":t.hoverState=xb;break;case"select":t.selected=!0}}function tVe(t,e,n,r){for(var i=t.style,a={},s=0;s<e.length;s++){var o=e[s],l=i[o];a[o]=l==null?r&&r[o]:l}for(var s=0;s<t.animators.length;s++){var d=t.animators[s];d.__fromStateTransition&&d.__fromStateTransition.indexOf(n)<0&&d.targetName==="style"&&d.saveTo(a,e)}return a}function nVe(t,e,n,r){var i=n&&Yt(n,"select")>=0,a=!1;if(t instanceof Zt){var s=ite(t),o=i&&s.selectFill||s.normalFill,l=i&&s.selectStroke||s.normalStroke;if(Fh(o)||Fh(l)){r=r||{};var d=r.style||{};d.fill==="inherit"?(a=!0,r=Oe({},r),d=Oe({},d),d.fill=o):!Fh(d.fill)&&Fh(o)?(a=!0,r=Oe({},r),d=Oe({},d),d.fill=MM(o)):!Fh(d.stroke)&&Fh(l)&&(a||(r=Oe({},r),d=Oe({},d)),d.stroke=MM(l)),r.style=d}}if(r&&r.z2==null){a||(r=Oe({},r));var c=t.z2EmphasisLift;r.z2=t.z2+(c!=null?c:Vg)}return r}function rVe(t,e,n){if(n&&n.z2==null){n=Oe({},n);var r=t.z2SelectLift;n.z2=t.z2+(r!=null?r:Q8e)}return n}function iVe(t,e,n){var r=Yt(t.currentStates,e)>=0,i=t.style.opacity,a=r?null:tVe(t,["opacity"],e,{opacity:1});n=n||{};var s=n.style||{};return s.opacity==null&&(n=Oe({},n),s=Oe({opacity:r?i:a.opacity*.1},s),n.style=s),n}function $4(t,e){var n=this.states[t];if(this.style){if(t==="emphasis")return nVe(this,t,e,n);if(t==="blur")return iVe(this,t,n);if(t==="select")return rVe(this,t,n)}return n}function Xp(t){t.stateProxy=$4;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=$4),n&&(n.stateProxy=$4)}function Pj(t,e){!cte(t,e)&&!t.__highByOuter&&pd(t,ate)}function Ij(t,e){!cte(t,e)&&!t.__highByOuter&&pd(t,ste)}function nd(t,e){t.__highByOuter|=1<<(e||0),pd(t,ate)}function rd(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&pd(t,ste)}function lte(t){pd(t,rI)}function iI(t){pd(t,ote)}function ute(t){pd(t,J8e)}function dte(t){pd(t,eVe)}function cte(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function fte(t){var e=t.getModel(),n=[],r=[];e.eachComponent(function(i,a){var s=tI(a),o=i==="series",l=o?t.getViewOfSeriesModel(a):t.getViewOfComponentModel(a);!o&&r.push(l),s.isBlured&&(l.group.traverse(function(d){ote(d)}),o&&n.push(a)),s.isBlured=!1}),oe(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(n,!1,e)})}function qM(t,e,n,r){var i=r.getModel();n=n||"coordinateSystem";function a(d,c){for(var f=0;f<c.length;f++){var p=d.getItemGraphicEl(c[f]);p&&iI(p)}}if(t!=null&&!(!e||e==="none")){var s=i.getSeriesByIndex(t),o=s.coordinateSystem;o&&o.master&&(o=o.master);var l=[];i.eachSeries(function(d){var c=s===d,f=d.coordinateSystem;f&&f.master&&(f=f.master);var p=f&&o?f===o:c;if(!(n==="series"&&!c||n==="coordinateSystem"&&!p||e==="series"&&c)){var h=r.getViewOfSeriesModel(d);if(h.group.traverse(function(v){v.__highByOuter&&c&&e==="self"||rI(v)}),ta(e))a(d.getData(),e);else if(_t(e))for(var m=rn(e),g=0;g<m.length;g++)a(d.getData(m[g]),e[m[g]]);l.push(d),tI(d).isBlured=!0}}),i.eachComponent(function(d,c){if(d!=="series"){var f=r.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function WM(t,e,n){if(!(t==null||e==null)){var r=n.getModel().getComponent(t,e);if(r){tI(r).isBlured=!0;var i=n.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){rI(a)})}}}function aVe(t,e,n){var r=t.seriesIndex,i=t.getData(e.dataType);if(i){var a=Yp(i,e);a=(Be(a)?a[0]:a)||0;var s=i.getItemGraphicEl(a);if(!s)for(var o=i.count(),l=0;!s&&l<o;)s=i.getItemGraphicEl(l++);if(s){var d=Tt(s);qM(r,d.focus,d.blurScope,n)}else{var c=t.get(["emphasis","focus"]),f=t.get(["emphasis","blurScope"]);c!=null&&qM(r,c,f,n)}}}function aI(t,e,n,r){var i={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||e==null||n==null)return i;var a=r.getModel().getComponent(t,e);if(!a)return i;var s=r.getViewOfComponentModel(a);if(!s||!s.findHighDownDispatchers)return i;for(var o=s.findHighDownDispatchers(n),l,d=0;d<o.length;d++)if(Tt(o[d]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function sVe(t,e,n){var r=Tt(t),i=aI(r.componentMainType,r.componentIndex,r.componentHighDownName,n),a=i.dispatchers,s=i.focusSelf;a?(s&&WM(r.componentMainType,r.componentIndex,n),oe(a,function(o){return Pj(o,e)})):(qM(r.seriesIndex,r.focus,r.blurScope,n),r.focus==="self"&&WM(r.componentMainType,r.componentIndex,n),Pj(t,e))}function oVe(t,e,n){fte(n);var r=Tt(t),i=aI(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;i?oe(i,function(a){return Ij(a,e)}):Ij(t,e)}function lVe(t,e,n){if(YM(e)){var r=e.dataType,i=t.getData(r),a=Yp(i,e);Be(a)||(a=[a]),t[e.type===c0?"toggleSelect":e.type===d0?"select":"unselect"](a,r)}}function Oj(t){var e=t.getAllData();oe(e,function(n){var r=n.data,i=n.type;r.eachItemGraphicEl(function(a,s){t.isSelected(s,i)?ute(a):dte(a)})})}function uVe(t){var e=[];return t.eachSeries(function(n){var r=n.getAllData();oe(r,function(i){i.data;var a=i.type,s=n.getSelectedDataIndices();if(s.length>0){var o={dataIndex:s,seriesIndex:n.seriesIndex};a!=null&&(o.dataType=a),e.push(o)}})}),e}function $p(t,e,n){ip(t,!0),pd(t,Xp),GM(t,e,n)}function dVe(t){ip(t,!1)}function _r(t,e,n,r){r?dVe(t):$p(t,e,n)}function GM(t,e,n){var r=Tt(t);e!=null?(r.focus=e,r.blurScope=n):r.focus&&(r.focus=null)}var Lj=["emphasis","blur","select"],cVe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Oi(t,e,n,r){n=n||"itemStyle";for(var i=0;i<Lj.length;i++){var a=Lj[i],s=e.getModel([a,n]),o=t.ensureState(a);o.style=r?r(s):s[cVe[n]]()}}function ip(t,e){var n=e===!1,r=t;t.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!n||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function g1(t){return!!(t&&t.__highDownDispatcher)}function fVe(t,e,n){var r=Tt(t);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=n}function pVe(t){var e=Dj[t];return e==null&&$j<=32&&(e=Dj[t]=$j++),e}function YM(t){var e=t.type;return e===d0||e===Mw||e===c0}function Vj(t){var e=t.type;return e===Mp||e===Ew}function hVe(t){var e=ite(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}var Bh=Bl.CMD,mVe=[[],[],[]],Nj=Math.sqrt,gVe=Math.atan2;function pte(t,e){if(e){var n=t.data,r=t.len(),i,a,s,o,l,d,c=Bh.M,f=Bh.C,p=Bh.L,h=Bh.R,m=Bh.A,g=Bh.Q;for(s=0,o=0;s<r;){switch(i=n[s++],o=s,a=0,i){case c:a=1;break;case p:a=1;break;case f:a=3;break;case g:a=2;break;case m:var v=e[4],_=e[5],x=Nj(e[0]*e[0]+e[1]*e[1]),w=Nj(e[2]*e[2]+e[3]*e[3]),k=gVe(-e[1]/w,e[0]/x);n[s]*=x,n[s++]+=v,n[s]*=w,n[s++]+=_,n[s++]*=x,n[s++]*=w,n[s++]+=k,n[s++]+=k,s+=2,o=s;break;case h:d[0]=n[s++],d[1]=n[s++],Ri(d,d,e),n[o++]=d[0],n[o++]=d[1],d[0]+=n[s++],d[1]+=n[s++],Ri(d,d,e),n[o++]=d[0],n[o++]=d[1]}for(l=0;l<a;l++){var S=mVe[l];S[0]=n[s++],S[1]=n[s++],Ri(S,S,e),n[o++]=S[0],n[o++]=S[1]}}t.increaseVersion()}}var D4=Math.sqrt,q_=Math.sin,W_=Math.cos,Ev=Math.PI;function jj(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function KM(t,e){return(t[0]*e[0]+t[1]*e[1])/(jj(t)*jj(e))}function Fj(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(KM(t,e))}function Bj(t,e,n,r,i,a,s,o,l,d,c){var f=l*(Ev/180),p=W_(f)*(t-n)/2+q_(f)*(e-r)/2,h=-1*q_(f)*(t-n)/2+W_(f)*(e-r)/2,m=p*p/(s*s)+h*h/(o*o);m>1&&(s*=D4(m),o*=D4(m));var g=(i===a?-1:1)*D4((s*s*(o*o)-s*s*(h*h)-o*o*(p*p))/(s*s*(h*h)+o*o*(p*p)))||0,v=g*s*h/o,_=g*-o*p/s,x=(t+n)/2+W_(f)*v-q_(f)*_,w=(e+r)/2+q_(f)*v+W_(f)*_,k=Fj([1,0],[(p-v)/s,(h-_)/o]),S=[(p-v)/s,(h-_)/o],C=[(-1*p-v)/s,(-1*h-_)/o],A=Fj(S,C);if(KM(S,C)<=-1&&(A=Ev),KM(S,C)>=1&&(A=0),A<0){var M=Math.round(A/Ev*1e6)/1e6;A=Ev*2+M%2*Ev}c.addData(d,x,w,s,o,k,A,f,a)}var vVe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,yVe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function bVe(t){var e=new Bl;if(!t)return e;var n=0,r=0,i=n,a=r,s,o=Bl.CMD,l=t.match(vVe);if(!l)return e;for(var d=0;d<l.length;d++){for(var c=l[d],f=c.charAt(0),p=void 0,h=c.match(yVe)||[],m=h.length,g=0;g<m;g++)h[g]=parseFloat(h[g]);for(var v=0;v<m;){var _=void 0,x=void 0,w=void 0,k=void 0,S=void 0,C=void 0,A=void 0,M=n,$=r,R=void 0,I=void 0;switch(f){case"l":n+=h[v++],r+=h[v++],p=o.L,e.addData(p,n,r);break;case"L":n=h[v++],r=h[v++],p=o.L,e.addData(p,n,r);break;case"m":n+=h[v++],r+=h[v++],p=o.M,e.addData(p,n,r),i=n,a=r,f="l";break;case"M":n=h[v++],r=h[v++],p=o.M,e.addData(p,n,r),i=n,a=r,f="L";break;case"h":n+=h[v++],p=o.L,e.addData(p,n,r);break;case"H":n=h[v++],p=o.L,e.addData(p,n,r);break;case"v":r+=h[v++],p=o.L,e.addData(p,n,r);break;case"V":r=h[v++],p=o.L,e.addData(p,n,r);break;case"C":p=o.C,e.addData(p,h[v++],h[v++],h[v++],h[v++],h[v++],h[v++]),n=h[v-2],r=h[v-1];break;case"c":p=o.C,e.addData(p,h[v++]+n,h[v++]+r,h[v++]+n,h[v++]+r,h[v++]+n,h[v++]+r),n+=h[v-2],r+=h[v-1];break;case"S":_=n,x=r,R=e.len(),I=e.data,s===o.C&&(_+=n-I[R-4],x+=r-I[R-3]),p=o.C,M=h[v++],$=h[v++],n=h[v++],r=h[v++],e.addData(p,_,x,M,$,n,r);break;case"s":_=n,x=r,R=e.len(),I=e.data,s===o.C&&(_+=n-I[R-4],x+=r-I[R-3]),p=o.C,M=n+h[v++],$=r+h[v++],n+=h[v++],r+=h[v++],e.addData(p,_,x,M,$,n,r);break;case"Q":M=h[v++],$=h[v++],n=h[v++],r=h[v++],p=o.Q,e.addData(p,M,$,n,r);break;case"q":M=h[v++]+n,$=h[v++]+r,n+=h[v++],r+=h[v++],p=o.Q,e.addData(p,M,$,n,r);break;case"T":_=n,x=r,R=e.len(),I=e.data,s===o.Q&&(_+=n-I[R-4],x+=r-I[R-3]),n=h[v++],r=h[v++],p=o.Q,e.addData(p,_,x,n,r);break;case"t":_=n,x=r,R=e.len(),I=e.data,s===o.Q&&(_+=n-I[R-4],x+=r-I[R-3]),n+=h[v++],r+=h[v++],p=o.Q,e.addData(p,_,x,n,r);break;case"A":w=h[v++],k=h[v++],S=h[v++],C=h[v++],A=h[v++],M=n,$=r,n=h[v++],r=h[v++],p=o.A,Bj(M,$,n,r,C,A,w,k,S,p,e);break;case"a":w=h[v++],k=h[v++],S=h[v++],C=h[v++],A=h[v++],M=n,$=r,n+=h[v++],r+=h[v++],p=o.A,Bj(M,$,n,r,C,A,w,k,S,p,e);break}}(f==="z"||f==="Z")&&(p=o.Z,e.addData(p),n=i,r=a),s=p}return e.toStatic(),e}var hte=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.applyTransform=function(n){},e}(Zt);function mte(t){return t.setData!=null}function gte(t,e){var n=bVe(t),r=Oe({},e);return r.buildPath=function(i){if(mte(i)){i.setData(n.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;n.rebuildPath(a,1)}},r.applyTransform=function(i){pte(n,i),this.dirtyShape()},r}function vte(t,e){return new hte(gte(t,e))}function _Ve(t,e){var n=gte(t,e),r=function(i){Ce(a,i);function a(s){var o=i.call(this,s)||this;return o.applyTransform=n.applyTransform,o.buildPath=n.buildPath,o}return a}(hte);return r}function xVe(t,e){for(var n=[],r=t.length,i=0;i<r;i++){var a=t[i];n.push(a.getUpdatedPathProxy(!0))}var s=new Zt(e);return s.createPathProxy(),s.buildPath=function(o){if(mte(o)){o.appendPath(n);var l=o.getContext();l&&o.rebuildPath(l,1)}},s}function sI(t,e){e=e||{};var n=new Zt;return t.shape&&n.setShape(t.shape),n.setStyle(t.style),e.bakeTransform?pte(n.path,t.getComputedTransform()):e.toLocal?n.setLocalTransform(t.getComputedTransform()):n.copyTransform(t),n.buildPath=t.buildPath,n.applyTransform=n.applyTransform,n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n}var wVe=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),hd=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new wVe},e.prototype.buildPath=function(n,r){n.moveTo(r.cx+r.r,r.cy),n.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(Zt);hd.prototype.type="circle";var kVe=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),qC=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new kVe},e.prototype.buildPath=function(n,r){var i=.5522848,a=r.cx,s=r.cy,o=r.rx,l=r.ry,d=o*i,c=l*i;n.moveTo(a-o,s),n.bezierCurveTo(a-o,s-c,a-d,s-l,a,s-l),n.bezierCurveTo(a+d,s-l,a+o,s-c,a+o,s),n.bezierCurveTo(a+o,s+c,a+d,s+l,a,s+l),n.bezierCurveTo(a-d,s+l,a-o,s+c,a-o,s),n.closePath()},e}(Zt);qC.prototype.type="ellipse";var yte=Math.PI,R4=yte*2,vf=Math.sin,zh=Math.cos,SVe=Math.acos,Fi=Math.atan2,zj=Math.abs,f0=Math.sqrt,hy=Math.max,Yo=Math.min,fo=1e-4;function CVe(t,e,n,r,i,a,s,o){var l=n-t,d=r-e,c=s-i,f=o-a,p=f*l-c*d;if(!(p*p<fo))return p=(c*(e-a)-f*(t-i))/p,[t+p*l,e+p*d]}function G_(t,e,n,r,i,a,s){var o=t-n,l=e-r,d=(s?a:-a)/f0(o*o+l*l),c=d*l,f=-d*o,p=t+c,h=e+f,m=n+c,g=r+f,v=(p+m)/2,_=(h+g)/2,x=m-p,w=g-h,k=x*x+w*w,S=i-a,C=p*g-m*h,A=(w<0?-1:1)*f0(hy(0,S*S*k-C*C)),M=(C*w-x*A)/k,$=(-C*x-w*A)/k,R=(C*w+x*A)/k,I=(-C*x+w*A)/k,B=M-v,j=$-_,z=R-v,F=I-_;return B*B+j*j>z*z+F*F&&(M=R,$=I),{cx:M,cy:$,x0:-c,y0:-f,x1:M*(i/S-1),y1:$*(i/S-1)}}function AVe(t){var e;if(Be(t)){var n=t.length;if(!n)return t;n===1?e=[t[0],t[0],0,0]:n===2?e=[t[0],t[0],t[1],t[1]]:n===3?e=t.concat(t[2]):e=t}else e=[t,t,t,t];return e}function TVe(t,e){var n,r=hy(e.r,0),i=hy(e.r0||0,0),a=r>0,s=i>0;if(!(!a&&!s)){if(a||(r=i,i=0),i>r){var o=r;r=i,i=o}var l=e.startAngle,d=e.endAngle;if(!(isNaN(l)||isNaN(d))){var c=e.cx,f=e.cy,p=!!e.clockwise,h=zj(d-l),m=h>R4&&h%R4;if(m>fo&&(h=m),!(r>fo))t.moveTo(c,f);else if(h>R4-fo)t.moveTo(c+r*zh(l),f+r*vf(l)),t.arc(c,f,r,l,d,!p),i>fo&&(t.moveTo(c+i*zh(d),f+i*vf(d)),t.arc(c,f,i,d,l,p));else{var g=void 0,v=void 0,_=void 0,x=void 0,w=void 0,k=void 0,S=void 0,C=void 0,A=void 0,M=void 0,$=void 0,R=void 0,I=void 0,B=void 0,j=void 0,z=void 0,F=r*zh(l),q=r*vf(l),N=i*zh(d),O=i*vf(d),V=h>fo;if(V){var L=e.cornerRadius;L&&(n=AVe(L),g=n[0],v=n[1],_=n[2],x=n[3]);var U=zj(r-i)/2;if(w=Yo(U,_),k=Yo(U,x),S=Yo(U,g),C=Yo(U,v),$=A=hy(w,k),R=M=hy(S,C),(A>fo||M>fo)&&(I=r*zh(d),B=r*vf(d),j=i*zh(l),z=i*vf(l),h<yte)){var G=CVe(F,q,j,z,I,B,N,O);if(G){var X=F-G[0],re=q-G[1],ee=I-G[0],de=B-G[1],se=1/vf(SVe((X*ee+re*de)/(f0(X*X+re*re)*f0(ee*ee+de*de)))/2),te=f0(G[0]*G[0]+G[1]*G[1]);$=Yo(A,(r-te)/(se+1)),R=Yo(M,(i-te)/(se-1))}}}if(!V)t.moveTo(c+F,f+q);else if($>fo){var ne=Yo(_,$),ce=Yo(x,$),ve=G_(j,z,F,q,r,ne,p),Y=G_(I,B,N,O,r,ce,p);t.moveTo(c+ve.cx+ve.x0,f+ve.cy+ve.y0),$<A&&ne===ce?t.arc(c+ve.cx,f+ve.cy,$,Fi(ve.y0,ve.x0),Fi(Y.y0,Y.x0),!p):(ne>0&&t.arc(c+ve.cx,f+ve.cy,ne,Fi(ve.y0,ve.x0),Fi(ve.y1,ve.x1),!p),t.arc(c,f,r,Fi(ve.cy+ve.y1,ve.cx+ve.x1),Fi(Y.cy+Y.y1,Y.cx+Y.x1),!p),ce>0&&t.arc(c+Y.cx,f+Y.cy,ce,Fi(Y.y1,Y.x1),Fi(Y.y0,Y.x0),!p))}else t.moveTo(c+F,f+q),t.arc(c,f,r,l,d,!p);if(!(i>fo)||!V)t.lineTo(c+N,f+O);else if(R>fo){var ne=Yo(g,R),ce=Yo(v,R),ve=G_(N,O,I,B,i,-ce,p),Y=G_(F,q,j,z,i,-ne,p);t.lineTo(c+ve.cx+ve.x0,f+ve.cy+ve.y0),R<M&&ne===ce?t.arc(c+ve.cx,f+ve.cy,R,Fi(ve.y0,ve.x0),Fi(Y.y0,Y.x0),!p):(ce>0&&t.arc(c+ve.cx,f+ve.cy,ce,Fi(ve.y0,ve.x0),Fi(ve.y1,ve.x1),!p),t.arc(c,f,i,Fi(ve.cy+ve.y1,ve.cx+ve.x1),Fi(Y.cy+Y.y1,Y.cx+Y.x1),p),ne>0&&t.arc(c+Y.cx,f+Y.cy,ne,Fi(Y.y1,Y.x1),Fi(Y.y0,Y.x0),!p))}else t.lineTo(c+N,f+O),t.arc(c,f,i,d,l,p)}t.closePath()}}}var EVe=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),Ma=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new EVe},e.prototype.buildPath=function(n,r){TVe(n,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Zt);Ma.prototype.type="sector";var MVe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),wb=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new MVe},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,s=Math.PI*2;n.moveTo(i+r.r,a),n.arc(i,a,r.r,0,s,!1),n.moveTo(i+r.r0,a),n.arc(i,a,r.r0,0,s,!0)},e}(Zt);wb.prototype.type="ring";function $Ve(t,e,n,r){var i=[],a=[],s=[],o=[],l,d,c,f;if(r){c=[1/0,1/0],f=[-1/0,-1/0];for(var p=0,h=t.length;p<h;p++)tc(c,c,t[p]),nc(f,f,t[p]);tc(c,c,r[0]),nc(f,f,r[1])}for(var p=0,h=t.length;p<h;p++){var m=t[p];if(n)l=t[p?p-1:h-1],d=t[(p+1)%h];else if(p===0||p===h-1){i.push(Fu(t[p]));continue}else l=t[p-1],d=t[p+1];np(a,d,l),xw(a,a,e);var g=_M(m,l),v=_M(m,d),_=g+v;_!==0&&(g/=_,v/=_),xw(s,a,-g),xw(o,a,v);var x=O7([],m,s),w=O7([],m,o);r&&(nc(x,x,c),tc(x,x,f),nc(w,w,c),tc(w,w,f)),i.push(x),i.push(w)}return n&&i.push(i.shift()),i}function bte(t,e,n){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=$Ve(i,r,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var s=i.length,o=0;o<(n?s:s-1);o++){var l=a[o*2],d=a[o*2+1],c=i[(o+1)%s];t.bezierCurveTo(l[0],l[1],d[0],d[1],c[0],c[1])}}else{t.moveTo(i[0][0],i[0][1]);for(var o=1,f=i.length;o<f;o++)t.lineTo(i[o][0],i[o][1])}n&&t.closePath()}}var DVe=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),$a=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new DVe},e.prototype.buildPath=function(n,r){bte(n,r,!0)},e}(Zt);$a.prototype.type="polygon";var RVe=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),Da=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new RVe},e.prototype.buildPath=function(n,r){bte(n,r,!1)},e}(Zt);Da.prototype.type="polyline";var PVe={},IVe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),ii=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new IVe},e.prototype.buildPath=function(n,r){var i,a,s,o;if(this.subPixelOptimize){var l=ete(PVe,r,this.style);i=l.x1,a=l.y1,s=l.x2,o=l.y2}else i=r.x1,a=r.y1,s=r.x2,o=r.y2;var d=r.percent;d!==0&&(n.moveTo(i,a),d<1&&(s=i*(1-d)+s*d,o=a*(1-d)+o*d),n.lineTo(s,o))},e.prototype.pointAt=function(n){var r=this.shape;return[r.x1*(1-n)+r.x2*n,r.y1*(1-n)+r.y2*n]},e}(Zt);ii.prototype.type="line";var Ia=[],OVe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function Uj(t,e,n){var r=t.cpx2,i=t.cpy2;return r!=null||i!=null?[(n?G7:ei)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?G7:ei)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?CM:ci)(t.x1,t.cpx1,t.x2,e),(n?CM:ci)(t.y1,t.cpy1,t.y2,e)]}var kb=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new OVe},e.prototype.buildPath=function(n,r){var i=r.x1,a=r.y1,s=r.x2,o=r.y2,l=r.cpx1,d=r.cpy1,c=r.cpx2,f=r.cpy2,p=r.percent;p!==0&&(n.moveTo(i,a),c==null||f==null?(p<1&&(d1(i,l,s,p,Ia),l=Ia[1],s=Ia[2],d1(a,d,o,p,Ia),d=Ia[1],o=Ia[2]),n.quadraticCurveTo(l,d,s,o)):(p<1&&(Rc(i,l,c,s,p,Ia),l=Ia[1],c=Ia[2],s=Ia[3],Rc(a,d,f,o,p,Ia),d=Ia[1],f=Ia[2],o=Ia[3]),n.bezierCurveTo(l,d,c,f,s,o)))},e.prototype.pointAt=function(n){return Uj(this.shape,n,!1)},e.prototype.tangentAt=function(n){var r=Uj(this.shape,n,!0);return Ig(r,r)},e}(Zt);kb.prototype.type="bezier-curve";var LVe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),WC=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new LVe},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,s=Math.max(r.r,0),o=r.startAngle,l=r.endAngle,d=r.clockwise,c=Math.cos(o),f=Math.sin(o);n.moveTo(c*s+i,f*s+a),n.arc(i,a,s,o,l,!d)},e}(Zt);WC.prototype.type="arc";var oI=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="compound",n}return e.prototype._updatePathDirty=function(){for(var n=this.shape.paths,r=this.shapeChanged(),i=0;i<n.length;i++)r=r||n[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<n.length;i++)n[i].path||n[i].createPathProxy(),n[i].path.setScale(r[0],r[1],n[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(n,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(n,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var n=this.shape.paths||[],r=0;r<n.length;r++)n[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Zt.prototype.getBoundingRect.call(this)},e}(Zt),_te=function(){function t(e){this.colorStops=e||[]}return t.prototype.addColorStop=function(e,n){this.colorStops.push({offset:e,color:n})},t}(),Sb=function(t){Ce(e,t);function e(n,r,i,a,s,o){var l=t.call(this,s)||this;return l.x=n==null?0:n,l.y=r==null?0:r,l.x2=i==null?1:i,l.y2=a==null?0:a,l.type="linear",l.global=o||!1,l}return e}(_te),xte=function(t){Ce(e,t);function e(n,r,i,a,s){var o=t.call(this,a)||this;return o.x=n==null?.5:n,o.y=r==null?.5:r,o.r=i==null?.5:i,o.type="radial",o.global=s||!1,o}return e}(_te),yf=[0,0],bf=[0,0],Y_=new Bt,K_=new Bt,Sk=function(){function t(e,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Bt;for(var r=0;r<2;r++)this._axes[r]=new Bt;e&&this.fromBoundingRect(e,n)}return t.prototype.fromBoundingRect=function(e,n){var r=this._corners,i=this._axes,a=e.x,s=e.y,o=a+e.width,l=s+e.height;if(r[0].set(a,s),r[1].set(o,s),r[2].set(o,l),r[3].set(a,l),n)for(var d=0;d<4;d++)r[d].transform(n);Bt.sub(i[0],r[1],r[0]),Bt.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var d=0;d<2;d++)this._origin[d]=i[d].dot(r[0])},t.prototype.intersect=function(e,n){var r=!0,i=!n;return Y_.set(1/0,1/0),K_.set(0,0),!this._intersectCheckOneSide(this,e,Y_,K_,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,Y_,K_,i,-1)&&(r=!1,i)||i||Bt.copy(n,r?Y_:K_),r},t.prototype._intersectCheckOneSide=function(e,n,r,i,a,s){for(var o=!0,l=0;l<2;l++){var d=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,yf),this._getProjMinMaxOnAxis(l,n._corners,bf),yf[1]<bf[0]||yf[0]>bf[1]){if(o=!1,a)return o;var c=Math.abs(bf[0]-yf[1]),f=Math.abs(yf[0]-bf[1]);Math.min(c,f)>i.len()&&(c<f?Bt.scale(i,d,-c*s):Bt.scale(i,d,f*s))}else if(r){var c=Math.abs(bf[0]-yf[1]),f=Math.abs(yf[0]-bf[1]);Math.min(c,f)<r.len()&&(c<f?Bt.scale(r,d,c*s):Bt.scale(r,d,-f*s))}}return o},t.prototype._getProjMinMaxOnAxis=function(e,n,r){for(var i=this._axes[e],a=this._origin,s=n[0].dot(i)+a[e],o=s,l=s,d=1;d<n.length;d++){var c=n[d].dot(i)+a[e];o=Math.min(c,o),l=Math.max(c,l)}r[0]=o,r[1]=l},t}(),VVe=[],NVe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(n,r){r?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},e.prototype.addDisplayables=function(n,r){r=r||!1;for(var i=0;i<n.length;i++)this.addDisplayable(n[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(n){for(var r=this._cursor;r<this._displayables.length;r++)n&&n(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)n&&n(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var r=this._displayables[n];r.parent=this,r.update(),r.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var r=this._temporaryDisplayables[n];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new qt(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(VVe)),n.union(a)}this._rect=n}return this._rect},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var s=0;s<this._displayables.length;s++){var o=this._displayables[s];if(o.contain(n,r))return!0}return!1},e}(no),wte=on();function Ng(t,e,n,r,i){var a;if(e&&e.ecModel){var s=e.ecModel.getUpdatePayload();a=s&&s.animation}var o=e&&e.isAnimationEnabled(),l=t==="update";if(o){var d=void 0,c=void 0,f=void 0;r?(d=$t(r.duration,200),c=$t(r.easing,"cubicOut"),f=0):(d=e.getShallow(l?"animationDurationUpdate":"animationDuration"),c=e.getShallow(l?"animationEasingUpdate":"animationEasing"),f=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(d=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(f=a.delay)),gt(f)&&(f=f(n,i)),gt(d)&&(d=d(n));var p={duration:d||0,delay:f,easing:c};return p}else return null}function lI(t,e,n,r,i,a,s){var o=!1,l;gt(i)?(s=a,a=i,i=null):_t(i)&&(a=i.cb,s=i.during,o=i.isFrom,l=i.removeOpt,i=i.dataIndex);var d=t==="leave";d||e.stopAnimation("leave");var c=Ng(t,r,i,d?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(c&&c.duration>0){var f=c.duration,p=c.delay,h=c.easing,m={duration:f,delay:p||0,easing:h,done:a,force:!!a||!!s,setToFinal:!d,scope:t,during:s};o?e.animateFrom(n,m):e.animateTo(n,m)}else e.stopAnimation(),!o&&e.attr(n),s&&s(1),a&&a()}function yn(t,e,n,r,i,a){lI("update",t,e,n,r,i,a)}function sr(t,e,n,r,i,a){lI("enter",t,e,n,r,i,a)}function jm(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){var n=t.animators[e];if(n.scope==="leave")return!0}return!1}function Pc(t,e,n,r,i,a){jm(t)||lI("leave",t,e,n,r,i,a)}function Hj(t,e,n,r){t.removeTextContent(),t.removeTextGuideLine(),Pc(t,{style:{opacity:0}},e,n,r)}function v1(t,e,n){function r(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(i){i.isGroup||Hj(i,e,n,r)}):Hj(t,e,n,r)}function Vo(t){wte(t).oldStyle=t.style}function jVe(t){return wte(t).oldStyle}var Ck=Math.max,Ak=Math.min,XM={};function FVe(t){return Zt.extend(t)}var BVe=_Ve;function zVe(t,e){return BVe(t,e)}function jo(t,e){XM[t]=e}function uI(t){if(XM.hasOwnProperty(t))return XM[t]}function GC(t,e,n,r){var i=vte(t,e);return n&&(r==="center"&&(n=Ste(n,i.getBoundingRect())),Cte(i,n)),i}function kte(t,e,n){var r=new xi({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(n==="center"){var a={width:i.width,height:i.height};r.setStyle(Ste(e,a))}}});return r}function Ste(t,e){var n=e.width/e.height,r=t.height*n,i;r<=t.width?i=t.height:(r=t.width,i=r/n);var a=t.x+t.width/2,s=t.y+t.height/2;return{x:a-r/2,y:s-i/2,width:r,height:i}}var Ns=xVe;function Cte(t,e){if(t.applyTransform){var n=t.getBoundingRect(),r=n.calculateTransform(e);t.applyTransform(r)}}function mg(t,e){return ete(t,t,{lineWidth:e}),t}function UVe(t){return tte(t.shape,t.shape,t.style),t}var $w=rp;function Dp(t,e){for(var n=OC([]);t&&t!==e;)Bu(n,t.getLocalTransform(),n),t=t.parent;return n}function Ao(t,e,n){return e&&!ta(e)&&(e=Iu.getLocalTransform(e)),n&&(e=Og([],e)),Ri([],t,e)}function YC(t,e,n){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[t==="left"?-r:t==="right"?r:0,t==="top"?-i:t==="bottom"?i:0];return a=Ao(a,e,n),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function qj(t){return!t.isGroup}function HVe(t){return t.shape!=null}function Cb(t,e,n){if(!t||!e)return;function r(s){var o={};return s.traverse(function(l){qj(l)&&l.anid&&(o[l.anid]=l)}),o}function i(s){var o={x:s.x,y:s.y,rotation:s.rotation};return HVe(s)&&(o.shape=Oe({},s.shape)),o}var a=r(t);e.traverse(function(s){if(qj(s)&&s.anid){var o=a[s.anid];if(o){var l=i(s);s.attr(i(o)),yn(s,l,n,Tt(s).dataIndex)}}})}function Ate(t,e){return ze(t,function(n){var r=n[0];r=Ck(r,e.x),r=Ak(r,e.x+e.width);var i=n[1];return i=Ck(i,e.y),i=Ak(i,e.y+e.height),[r,i]})}function qVe(t,e){var n=Ck(t.x,e.x),r=Ak(t.x+t.width,e.x+e.width),i=Ck(t.y,e.y),a=Ak(t.y+t.height,e.y+e.height);if(r>=n&&a>=i)return{x:n,y:i,width:r-n,height:a-i}}function Ab(t,e,n){var r=Oe({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(i.image=t.slice(8),yt(i,n),new xi(r)):GC(t.replace("path://",""),r,n,"center")}function my(t,e,n,r,i){for(var a=0,s=i[i.length-1];a<i.length;a++){var o=i[a];if(Tte(t,e,n,r,o[0],o[1],s[0],s[1]))return!0;s=o}}function Tte(t,e,n,r,i,a,s,o){var l=n-t,d=r-e,c=s-i,f=o-a,p=P4(c,f,l,d);if(WVe(p))return!1;var h=t-i,m=e-a,g=P4(h,m,l,d)/p;if(g<0||g>1)return!1;var v=P4(h,m,c,f)/p;return!(v<0||v>1)}function P4(t,e,n,r){return t*r-n*e}function WVe(t){return t<=1e-6&&t>=-1e-6}function ph(t){var e=t.itemTooltipOption,n=t.componentModel,r=t.itemName,i=it(e)?{formatter:e}:e,a=n.mainType,s=n.componentIndex,o={componentType:a,name:r,$vars:["name"]};o[a+"Index"]=s;var l=t.formatterParamsExtra;l&&oe(rn(l),function(c){ft(o,c)||(o[c]=l[c],o.$vars.push(c))});var d=Tt(t.el);d.componentMainType=a,d.componentIndex=s,d.tooltipConfig={name:r,option:yt({content:r,encodeHTMLContent:!0,formatterParams:o},i)}}function Wj(t,e){var n;t.isGroup&&(n=e(t)),n||t.traverse(e)}function Gc(t,e){if(t)if(Be(t))for(var n=0;n<t.length;n++)Wj(t[n],e);else Wj(t,e)}jo("circle",hd);jo("ellipse",qC);jo("sector",Ma);jo("ring",wb);jo("polygon",$a);jo("polyline",Da);jo("rect",sn);jo("line",ii);jo("bezierCurve",kb);jo("arc",WC);const hh=Object.freeze(Object.defineProperty({__proto__:null,Arc:WC,BezierCurve:kb,BoundingRect:qt,Circle:hd,CompoundPath:oI,Ellipse:qC,Group:kt,Image:xi,IncrementalDisplayable:NVe,Line:ii,LinearGradient:Sb,OrientedBoundingRect:Sk,Path:Zt,Point:Bt,Polygon:$a,Polyline:Da,RadialGradient:xte,Rect:sn,Ring:wb,Sector:Ma,Text:un,applyTransform:Ao,clipPointsByRect:Ate,clipRectByRect:qVe,createIcon:Ab,extendPath:zVe,extendShape:FVe,getShapeClass:uI,getTransform:Dp,groupTransition:Cb,initProps:sr,isElementRemoved:jm,lineLineIntersect:Tte,linePolygonIntersect:my,makeImage:kte,makePath:GC,mergePath:Ns,registerShape:jo,removeElement:Pc,removeElementWithFadeOut:v1,resizePath:Cte,setTooltipConfig:ph,subPixelOptimize:$w,subPixelOptimizeLine:mg,subPixelOptimizeRect:UVe,transformDirection:YC,traverseElements:Gc,updateProps:yn},Symbol.toStringTag,{value:"Module"}));var KC={};function Ete(t,e){for(var n=0;n<Ea.length;n++){var r=Ea[n],i=e[r],a=t.ensureState(r);a.style=a.style||{},a.style.text=i}var s=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(s,!0)}function ZM(t,e,n){var r=t.labelFetcher,i=t.labelDataIndex,a=t.labelDimIndex,s=e.normal,o;r&&(o=r.getFormattedLabel(i,"normal",null,a,s&&s.get("formatter"),n!=null?{interpolatedValue:n}:null)),o==null&&(o=gt(t.defaultText)?t.defaultText(i,t,n):t.defaultText);for(var l={normal:o},d=0;d<Ea.length;d++){var c=Ea[d],f=e[c];l[c]=$t(r?r.getFormattedLabel(i,c,null,a,f&&f.get("formatter")):null,o)}return l}function Li(t,e,n,r){n=n||KC;for(var i=t instanceof un,a=!1,s=0;s<m1.length;s++){var o=e[m1[s]];if(o&&o.getShallow("show")){a=!0;break}}var l=i?t:t.getTextContent();if(a){i||(l||(l=new un,t.setTextContent(l)),t.stateProxy&&(l.stateProxy=t.stateProxy));var d=ZM(n,e),c=e.normal,f=!!c.getShallow("show"),p=Kn(c,r&&r.normal,n,!1,!i);p.text=d.normal,i||t.setTextConfig(Tk(c,n,!1));for(var s=0;s<Ea.length;s++){var h=Ea[s],o=e[h];if(o){var m=l.ensureState(h),g=!!$t(o.getShallow("show"),f);if(g!==f&&(m.ignore=!g),m.style=Kn(o,r&&r[h],n,!0,!i),m.style.text=d[h],!i){var v=t.ensureState(h);v.textConfig=Tk(o,n,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(p.x=l.style.x),l.style.y!=null&&(p.y=l.style.y),l.ignore=!f,l.useStyle(p),l.dirty(),n.enableTextSetter&&(jg(l).setLabelText=function(_){var x=ZM(n,e,_);Ete(l,x)})}else l&&(l.ignore=!0);t.dirty()}function ui(t,e){e=e||"label";for(var n={normal:t.getModel(e)},r=0;r<Ea.length;r++){var i=Ea[r];n[i]=t.getModel([i,e])}return n}function Kn(t,e,n,r,i){var a={};return GVe(a,t,n,r,i),e&&Oe(a,e),a}function Tk(t,e,n){e=e||{};var r={},i,a=t.getShallow("rotate"),s=$t(t.getShallow("distance"),n?null:5),o=t.getShallow("offset");return i=t.getShallow("position")||(n?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),o!=null&&(r.offset=o),a!=null&&(a*=Math.PI/180,r.rotation=a),s!=null&&(r.distance=s),r.outsideFill=t.get("color")==="inherit"?e.inheritColor||null:"auto",r}function GVe(t,e,n,r,i){n=n||KC;var a=e.ecModel,s=a&&a.option.textStyle,o=YVe(e),l;if(o){l={};for(var d in o)if(o.hasOwnProperty(d)){var c=e.getModel(["rich",d]);Xj(l[d]={},c,s,n,r,i,!1,!0)}}l&&(t.rich=l);var f=e.get("overflow");f&&(t.overflow=f);var p=e.get("minMargin");p!=null&&(t.margin=p),Xj(t,e,s,n,r,i,!0,!1)}function YVe(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||KC).rich;if(n){e=e||{};for(var r=rn(n),i=0;i<r.length;i++){var a=r[i];e[a]=1}}t=t.parentModel}return e}var Gj=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Yj=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],Kj=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Xj(t,e,n,r,i,a,s,o){n=!i&&n||KC;var l=r&&r.inheritColor,d=e.getShallow("color"),c=e.getShallow("textBorderColor"),f=$t(e.getShallow("opacity"),n.opacity);(d==="inherit"||d==="auto")&&(l?d=l:d=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),a||(d=d||n.color,c=c||n.textBorderColor),d!=null&&(t.fill=d),c!=null&&(t.stroke=c);var p=$t(e.getShallow("textBorderWidth"),n.textBorderWidth);p!=null&&(t.lineWidth=p);var h=$t(e.getShallow("textBorderType"),n.textBorderType);h!=null&&(t.lineDash=h);var m=$t(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);m!=null&&(t.lineDashOffset=m),!i&&f==null&&!o&&(f=r&&r.defaultOpacity),f!=null&&(t.opacity=f),!i&&!a&&t.fill==null&&r.inheritColor&&(t.fill=r.inheritColor);for(var g=0;g<Gj.length;g++){var v=Gj[g],_=$t(e.getShallow(v),n[v]);_!=null&&(t[v]=_)}for(var g=0;g<Yj.length;g++){var v=Yj[g],_=e.getShallow(v);_!=null&&(t[v]=_)}if(t.verticalAlign==null){var x=e.getShallow("baseline");x!=null&&(t.verticalAlign=x)}if(!s||!r.disableBox){for(var g=0;g<Kj.length;g++){var v=Kj[g],_=e.getShallow(v);_!=null&&(t[v]=_)}var w=e.getShallow("borderType");w!=null&&(t.borderDash=w),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&l&&(t.backgroundColor=l),(t.borderColor==="auto"||t.borderColor==="inherit")&&l&&(t.borderColor=l)}}function dI(t,e){var n=e&&e.getModel("textStyle");return xo([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var jg=on();function Mte(t,e,n,r){if(t){var i=jg(t);i.prevValue=i.value,i.value=n;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=e)}}function $te(t,e,n,r,i){var a=jg(t);if(!a.valueAnimation||a.prevValue===a.value)return;var s=a.defaultInterpolatedText,o=$t(a.interpolatedValue,a.prevValue),l=a.value;function d(c){var f=Wee(n,a.precision,o,l,c);a.interpolatedValue=c===1?null:f;var p=ZM({labelDataIndex:e,labelFetcher:i,defaultText:s?s(f):f+""},a.statesModels,f);Ete(t,p)}t.percent=0,(a.prevValue==null?sr:yn)(t,{percent:1},r,e,null,d)}var KVe=["textStyle","color"],I4=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],O4=new un,XVe=function(){function t(){}return t.prototype.getTextColor=function(e){var n=this.ecModel;return this.getShallow("color")||(!e&&n?n.get(KVe):null)},t.prototype.getFont=function(){return dI({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(e){for(var n={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<I4.length;r++)n[I4[r]]=this.getShallow(I4[r]);return O4.useStyle(n),O4.update(),O4.getBoundingRect()},t}(),Dte=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],ZVe=Kp(Dte),QVe=function(){function t(){}return t.prototype.getLineStyle=function(e){return ZVe(this,e)},t}(),Rte=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],JVe=Kp(Rte),eNe=function(){function t(){}return t.prototype.getItemStyle=function(e,n){return JVe(this,e,n)},t}(),An=function(){function t(e,n,r){this.parentModel=n,this.ecModel=r,this.option=e}return t.prototype.init=function(e,n,r){},t.prototype.mergeOption=function(e,n){jt(this.option,e,!0)},t.prototype.get=function(e,n){return e==null?this.option:this._doGet(this.parsePath(e),!n&&this.parentModel)},t.prototype.getShallow=function(e,n){var r=this.option,i=r==null?r:r[e];if(i==null&&!n){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},t.prototype.getModel=function(e,n){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new t(a,n,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var e=this.constructor;return new e(xt(this.option))},t.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},t.prototype.resolveParentPath=function(e){return e},t.prototype.isAnimationEnabled=function(){if(!Qt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(e,n){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&n&&(r=n._doGet(this.resolveParentPath(e),n.parentModel)),r},t}();QP(An);u8e(An);Hr(An,QVe);Hr(An,eNe);Hr(An,h8e);Hr(An,XVe);var tNe=Math.round(Math.random()*10);function Fg(t){return[t||"",tNe++].join("_")}function nNe(t){var e={};t.registerSubTypeDefaulter=function(n,r){var i=_l(n);e[i.main]=r},t.determineSubType=function(n,r){var i=r.type;if(!i){var a=_l(n).main;t.hasSubTypes(n)&&e[a]&&(i=e[a](r))}return i}}function rNe(t,e){t.topologicalTravel=function(a,s,o,l){if(!a.length)return;var d=n(s),c=d.graph,f=d.noEntryList,p={};for(oe(a,function(x){p[x]=!0});f.length;){var h=f.pop(),m=c[h],g=!!p[h];g&&(o.call(l,h,m.originalDeps.slice()),delete p[h]),oe(m.successor,g?_:v)}oe(p,function(){var x="";throw new Error(x)});function v(x){c[x].entryCount--,c[x].entryCount===0&&f.push(x)}function _(x){p[x]=!0,v(x)}};function n(a){var s={},o=[];return oe(a,function(l){var d=r(s,l),c=d.originalDeps=e(l),f=i(c,a);d.entryCount=f.length,d.entryCount===0&&o.push(l),oe(f,function(p){Yt(d.predecessor,p)<0&&d.predecessor.push(p);var h=r(s,p);Yt(h.successor,p)<0&&h.successor.push(l)})}),{graph:s,noEntryList:o}}function r(a,s){return a[s]||(a[s]={predecessor:[],successor:[]}),a[s]}function i(a,s){var o=[];return oe(a,function(l){Yt(s,l)>=0&&o.push(l)}),o}}function Yc(t,e){return jt(jt({},t,!0),e,!0)}const iNe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},aNe={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var Ek="ZH",cI="EN",Fm=cI,Dw={},fI={},Pte=Qt.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Fm).toUpperCase();return t.indexOf(Ek)>-1?Ek:Fm}():Fm;function Ite(t,e){t=t.toUpperCase(),fI[t]=new An(e),Dw[t]=e}function sNe(t){if(it(t)){var e=Dw[t.toUpperCase()]||{};return t===Ek||t===cI?xt(e):jt(xt(e),xt(Dw[Fm]),!1)}else return jt(xt(t),xt(Dw[Fm]),!1)}function QM(t){return fI[t]}function oNe(){return fI[Fm]}Ite(cI,iNe);Ite(Ek,aNe);var pI=1e3,hI=pI*60,p0=hI*60,js=p0*24,Zj=js*365,gy={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},X_="{yyyy}-{MM}-{dd}",Qj={year:"{yyyy}",month:"{yyyy}-{MM}",day:X_,hour:X_+" "+gy.hour,minute:X_+" "+gy.minute,second:X_+" "+gy.second,millisecond:gy.none},L4=["year","month","day","hour","minute","second","millisecond"],Ote=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function kd(t,e){return t+="","0000".substr(0,e-t.length)+t}function Bm(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function lNe(t){return t===Bm(t)}function uNe(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function XC(t,e,n,r){var i=Fl(t),a=i[mI(n)](),s=i[zm(n)]()+1,o=Math.floor((s-1)/3)+1,l=i[ZC(n)](),d=i["get"+(n?"UTC":"")+"Day"](),c=i[y1(n)](),f=(c-1)%12+1,p=i[QC(n)](),h=i[JC(n)](),m=i[eA(n)](),g=c>=12?"pm":"am",v=g.toUpperCase(),_=r instanceof An?r:QM(r||Pte)||oNe(),x=_.getModel("time"),w=x.get("month"),k=x.get("monthAbbr"),S=x.get("dayOfWeek"),C=x.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,g+"").replace(/{A}/g,v+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,kd(a%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,w[s-1]).replace(/{MMM}/g,k[s-1]).replace(/{MM}/g,kd(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,kd(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,S[d]).replace(/{ee}/g,C[d]).replace(/{e}/g,d+"").replace(/{HH}/g,kd(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,kd(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,kd(p,2)).replace(/{m}/g,p+"").replace(/{ss}/g,kd(h,2)).replace(/{s}/g,h+"").replace(/{SSS}/g,kd(m,3)).replace(/{S}/g,m+"")}function dNe(t,e,n,r,i){var a=null;if(it(n))a=n;else if(gt(n))a=n(t.value,e,{level:t.level});else{var s=Oe({},gy);if(t.level>0)for(var o=0;o<L4.length;++o)s[L4[o]]="{primary|"+s[L4[o]]+"}";var l=n?n.inherit===!1?n:yt(n,s):s,d=Lte(t.value,i);if(l[d])a=l[d];else if(l.inherit){for(var c=Ote.indexOf(d),o=c-1;o>=0;--o)if(l[d]){a=l[d];break}a=a||s.none}if(Be(a)){var f=t.level==null?0:t.level>=0?t.level:a.length+t.level;f=Math.min(f,a.length-1),a=a[f]}}return XC(new Date(t.value),a,i,r)}function Lte(t,e){var n=Fl(t),r=n[zm(e)]()+1,i=n[ZC(e)](),a=n[y1(e)](),s=n[QC(e)](),o=n[JC(e)](),l=n[eA(e)](),d=l===0,c=d&&o===0,f=c&&s===0,p=f&&a===0,h=p&&i===1,m=h&&r===1;return m?"year":h?"month":p?"day":f?"hour":c?"minute":d?"second":"millisecond"}function Jj(t,e,n){var r=pn(t)?Fl(t):t;switch(e=e||Lte(t,n),e){case"year":return r[mI(n)]();case"half-year":return r[zm(n)]()>=6?1:0;case"quarter":return Math.floor((r[zm(n)]()+1)/4);case"month":return r[zm(n)]();case"day":return r[ZC(n)]();case"half-day":return r[y1(n)]()/24;case"hour":return r[y1(n)]();case"minute":return r[QC(n)]();case"second":return r[JC(n)]();case"millisecond":return r[eA(n)]()}}function mI(t){return t?"getUTCFullYear":"getFullYear"}function zm(t){return t?"getUTCMonth":"getMonth"}function ZC(t){return t?"getUTCDate":"getDate"}function y1(t){return t?"getUTCHours":"getHours"}function QC(t){return t?"getUTCMinutes":"getMinutes"}function JC(t){return t?"getUTCSeconds":"getSeconds"}function eA(t){return t?"getUTCMilliseconds":"getMilliseconds"}function cNe(t){return t?"setUTCFullYear":"setFullYear"}function Vte(t){return t?"setUTCMonth":"setMonth"}function Nte(t){return t?"setUTCDate":"setDate"}function jte(t){return t?"setUTCHours":"setHours"}function Fte(t){return t?"setUTCMinutes":"setMinutes"}function Bte(t){return t?"setUTCSeconds":"setSeconds"}function zte(t){return t?"setUTCMilliseconds":"setMilliseconds"}function Ute(t){if(!jee(t))return it(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function Hte(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var Bg=zP;function JM(t,e,n){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&xo(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var s=e==="time",o=t instanceof Date;if(s||o){var l=s?Fl(t):t;if(isNaN(+l)){if(o)return"-"}else return XC(l,r,n)}if(e==="ordinal")return vM(t)?i(t):pn(t)&&a(t)?t+"":"-";var d=td(t);return a(d)?Ute(d):vM(t)?i(t):typeof t=="boolean"?t+"":"-"}var eF=["a","b","c","d","e","f","g"],V4=function(t,e){return"{"+t+(e==null?"":e)+"}"};function qte(t,e,n){Be(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var s=eF[a];t=t.replace(V4(s),V4(s,0))}for(var o=0;o<r;o++)for(var l=0;l<i.length;l++){var d=e[o][i[l]];t=t.replace(V4(eF[l],o),n?ga(d):d)}return t}function fNe(t,e,n){return oe(e,function(r,i){t=t.replace("{"+i+"}",r)}),t}function pNe(t,e){var n=it(t)?{color:t,extraCssText:e}:t||{},r=n.color,i=n.type;e=n.extraCssText;var a=n.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ga(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ga(r)+";"+(e||"")+'"></span>';var s=n.markerId||"markerX";return{renderMode:a,content:"{"+s+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function Zp(t,e){return e=e||"transparent",it(t)?t:_t(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function Mk(t,e){if(e==="_blank"||e==="blank"){var n=window.open();n.opener=null,n.location.href=t}else window.open(t,e)}var Rw=oe,Wte=["left","right","top","bottom","width","height"],ap=[["width","left","right"],["height","top","bottom"]];function gI(t,e,n,r,i){var a=0,s=0;r==null&&(r=1/0),i==null&&(i=1/0);var o=0;e.eachChild(function(l,d){var c=l.getBoundingRect(),f=e.childAt(d+1),p=f&&f.getBoundingRect(),h,m;if(t==="horizontal"){var g=c.width+(p?-p.x+c.x:0);h=a+g,h>r||l.newline?(a=0,h=g,s+=o+n,o=c.height):o=Math.max(o,c.height)}else{var v=c.height+(p?-p.y+c.y:0);m=s+v,m>i||l.newline?(a+=o+n,s=0,m=v,o=c.width):o=Math.max(o,c.width)}l.newline||(l.x=a,l.y=s,l.markRedraw(),t==="horizontal"?a=h+n:s=m+n)})}var Rp=gI;Pt(gI,"vertical");Pt(gI,"horizontal");function hNe(t,e,n){var r=e.width,i=e.height,a=Qe(t.left,r),s=Qe(t.top,i),o=Qe(t.right,r),l=Qe(t.bottom,i);return(isNaN(a)||isNaN(parseFloat(t.left)))&&(a=0),(isNaN(o)||isNaN(parseFloat(t.right)))&&(o=r),(isNaN(s)||isNaN(parseFloat(t.top)))&&(s=0),(isNaN(l)||isNaN(parseFloat(t.bottom)))&&(l=i),n=Bg(n||0),{width:Math.max(o-a-n[1]-n[3],0),height:Math.max(l-s-n[0]-n[2],0)}}function Qr(t,e,n){n=Bg(n||0);var r=e.width,i=e.height,a=Qe(t.left,r),s=Qe(t.top,i),o=Qe(t.right,r),l=Qe(t.bottom,i),d=Qe(t.width,r),c=Qe(t.height,i),f=n[2]+n[0],p=n[1]+n[3],h=t.aspect;switch(isNaN(d)&&(d=r-o-p-a),isNaN(c)&&(c=i-l-f-s),h!=null&&(isNaN(d)&&isNaN(c)&&(h>r/i?d=r*.8:c=i*.8),isNaN(d)&&(d=h*c),isNaN(c)&&(c=d/h)),isNaN(a)&&(a=r-o-d-p),isNaN(s)&&(s=i-l-c-f),t.left||t.right){case"center":a=r/2-d/2-n[3];break;case"right":a=r-d-p;break}switch(t.top||t.bottom){case"middle":case"center":s=i/2-c/2-n[0];break;case"bottom":s=i-c-f;break}a=a||0,s=s||0,isNaN(d)&&(d=r-p-a-(o||0)),isNaN(c)&&(c=i-f-s-(l||0));var m=new qt(a+n[3],s+n[0],d,c);return m.margin=n,m}function tA(t,e,n,r,i,a){var s=!i||!i.hv||i.hv[0],o=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||t,a.x=t.x,a.y=t.y,!s&&!o)return!1;var d;if(l==="raw")d=t.type==="group"?new qt(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(d=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();d=d.clone(),d.applyTransform(c)}var f=Qr(yt({width:d.width,height:d.height},e),n,r),p=s?f.x-d.x:0,h=o?f.y-d.y:0;return l==="raw"?(a.x=p,a.y=h):(a.x+=p,a.y+=h),a===t&&t.markRedraw(),!0}function mNe(t,e){return t[ap[e][0]]!=null||t[ap[e][1]]!=null&&t[ap[e][2]]!=null}function b1(t){var e=t.layoutMode||t.constructor.layoutMode;return _t(e)?e:e?{type:e}:null}function Ic(t,e,n){var r=n&&n.ignoreSize;!Be(r)&&(r=[r,r]);var i=s(ap[0],0),a=s(ap[1],1);d(ap[0],t,i),d(ap[1],t,a);function s(c,f){var p={},h=0,m={},g=0,v=2;if(Rw(c,function(w){m[w]=t[w]}),Rw(c,function(w){o(e,w)&&(p[w]=m[w]=e[w]),l(p,w)&&h++,l(m,w)&&g++}),r[f])return l(e,c[1])?m[c[2]]=null:l(e,c[2])&&(m[c[1]]=null),m;if(g===v||!h)return m;if(h>=v)return p;for(var _=0;_<c.length;_++){var x=c[_];if(!o(p,x)&&o(t,x)){p[x]=t[x];break}}return p}function o(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function d(c,f,p){Rw(c,function(h){f[h]=p[h]})}}function zg(t){return Gte({},t)}function Gte(t,e){return e&&t&&Rw(Wte,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var gNe=on(),tn=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this,n,r,i)||this;return a.uid=Fg("ec_cpt_model"),a}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=b1(this),a=i?zg(n):{},s=r.getTheme();jt(n,s.get(this.mainType)),jt(n,this.getDefaultOption()),i&&Ic(n,a,i)},e.prototype.mergeOption=function(n,r){jt(this.option,n,!0);var i=b1(this);i&&Ic(this.option,n,i)},e.prototype.optionUpdated=function(n,r){},e.prototype.getDefaultOption=function(){var n=this.constructor;if(!s8e(n))return n.defaultOption;var r=gNe(this);if(!r.defaultOption){for(var i=[],a=n;a;){var s=a.prototype.defaultOption;s&&i.push(s),a=a.superClass}for(var o={},l=i.length-1;l>=0;l--)o=jt(o,i[l],!0);r.defaultOption=o}return r.defaultOption},e.prototype.getReferringComponents=function(n,r){var i=n+"Index",a=n+"Id";return _b(this.ecModel,n,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(n){this.option.zlevel=n},e.protoInitialize=function(){var n=e.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),e}(An);Yee(tn,An);jC(tn);nNe(tn);rNe(tn,vNe);function vNe(t){var e=[];return oe(tn.getClassesByMainType(t),function(n){e=e.concat(n.dependencies||n.prototype.dependencies||[])}),e=ze(e,function(n){return _l(n).main}),t!=="dataset"&&Yt(e,"dataset")<=0&&e.unshift("dataset"),e}var Yte="";typeof navigator!="undefined"&&(Yte=navigator.platform||"");var Uh="rgba(0, 0, 0, 0.2)";const yNe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Uh,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Uh,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Uh,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Uh,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Uh,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Uh,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Yte.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Kte=pt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),so="original",na="arrayRows",oo="objectRows",Gl="keyedColumns",bc="typedArray",Xte="unknown",Ml="column",Ug="row",Ai={Must:1,Might:2,Not:3},Zte=on();function bNe(t){Zte(t).datasetMap=pt()}function Qte(t,e,n){var r={},i=yI(e);if(!i||!t)return r;var a=[],s=[],o=e.ecModel,l=Zte(o).datasetMap,d=i.uid+"_"+n.seriesLayoutBy,c,f;t=t.slice(),oe(t,function(g,v){var _=_t(g)?g:t[v]={name:g};_.type==="ordinal"&&c==null&&(c=v,f=m(_)),r[_.name]=[]});var p=l.get(d)||l.set(d,{categoryWayDim:f,valueWayDim:0});oe(t,function(g,v){var _=g.name,x=m(g);if(c==null){var w=p.valueWayDim;h(r[_],w,x),h(s,w,x),p.valueWayDim+=x}else if(c===v)h(r[_],0,x),h(a,0,x);else{var w=p.categoryWayDim;h(r[_],w,x),h(s,w,x),p.categoryWayDim+=x}});function h(g,v,_){for(var x=0;x<_;x++)g.push(v+x)}function m(g){var v=g.dimsDef;return v?v.length:1}return a.length&&(r.itemName=a),s.length&&(r.seriesName=s),r}function vI(t,e,n){var r={},i=yI(t);if(!i)return r;var a=e.sourceFormat,s=e.dimensionsDefine,o;(a===oo||a===Gl)&&oe(s,function(c,f){(_t(c)?c.name:c)==="name"&&(o=f)});var l=function(){for(var c={},f={},p=[],h=0,m=Math.min(5,n);h<m;h++){var g=ene(e.data,a,e.seriesLayoutBy,s,e.startIndex,h);p.push(g);var v=g===Ai.Not;if(v&&c.v==null&&h!==o&&(c.v=h),(c.n==null||c.n===c.v||!v&&p[c.n]===Ai.Not)&&(c.n=h),_(c)&&p[c.n]!==Ai.Not)return c;v||(g===Ai.Might&&f.v==null&&h!==o&&(f.v=h),(f.n==null||f.n===f.v)&&(f.n=h))}function _(x){return x.v!=null&&x.n!=null}return _(c)?c:_(f)?f:null}();if(l){r.value=[l.v];var d=o!=null?o:l.n;r.itemName=[d],r.seriesName=[d]}return r}function yI(t){var e=t.get("data",!0);if(!e)return _b(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},Nr).models[0]}function _Ne(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:_b(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},Nr).models}function Jte(t,e){return ene(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function ene(t,e,n,r,i,a){var s,o=5;if(Ka(t))return Ai.Not;var l,d;if(r){var c=r[a];_t(c)?(l=c.name,d=c.type):it(c)&&(l=c)}if(d!=null)return d==="ordinal"?Ai.Must:Ai.Not;if(e===na){var f=t;if(n===Ug){for(var p=f[a],h=0;h<(p||[]).length&&h<o;h++)if((s=k(p[i+h]))!=null)return s}else for(var h=0;h<f.length&&h<o;h++){var m=f[i+h];if(m&&(s=k(m[a]))!=null)return s}}else if(e===oo){var g=t;if(!l)return Ai.Not;for(var h=0;h<g.length&&h<o;h++){var v=g[h];if(v&&(s=k(v[l]))!=null)return s}}else if(e===Gl){var _=t;if(!l)return Ai.Not;var p=_[l];if(!p||Ka(p))return Ai.Not;for(var h=0;h<p.length&&h<o;h++)if((s=k(p[h]))!=null)return s}else if(e===so)for(var x=t,h=0;h<x.length&&h<o;h++){var v=x[h],w=Lg(v);if(!Be(w))return Ai.Not;if((s=k(w[a]))!=null)return s}function k(S){var C=it(S);if(S!=null&&Number.isFinite(Number(S))&&S!=="")return C?Ai.Might:Ai.Not;if(C&&S!=="-")return Ai.Must}return Ai.Not}var e$=pt();function xNe(t,e){Ta(e$.get(t)==null&&e),e$.set(t,e)}function wNe(t,e,n){var r=e$.get(e);if(!r)return n;var i=r(t);return i?n.concat(i):n}var tF=on(),kNe=on(),bI=function(){function t(){}return t.prototype.getColorFromPalette=function(e,n,r){var i=Dn(this.get("color",!0)),a=this.get("colorLayer",!0);return tne(this,tF,i,a,e,n,r)},t.prototype.clearColorPalette=function(){CNe(this,tF)},t}();function t$(t,e,n,r){var i=Dn(t.get(["aria","decal","decals"]));return tne(t,kNe,i,null,e,n,r)}function SNe(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].length>e)return t[r];return t[n-1]}function tne(t,e,n,r,i,a,s){a=a||t;var o=e(a),l=o.paletteIdx||0,d=o.paletteNameMap=o.paletteNameMap||{};if(d.hasOwnProperty(i))return d[i];var c=s==null||!r?n:SNe(r,s);if(c=c||n,!(!c||!c.length)){var f=c[l];return i&&(d[i]=f),o.paletteIdx=(l+1)%c.length,f}}function CNe(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}var Z_,Mv,nF,rF="\0_ec_inner",ANe=1,_I=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n,r,i,a,s,o){a=a||{},this.option=null,this._theme=new An(a),this._locale=new An(s),this._optionManager=o},e.prototype.setOption=function(n,r,i){var a=sF(r);this._optionManager.setOption(n,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(n,r){return this._resetOption(n,sF(r))},e.prototype._resetOption=function(n,r){var i=!1,a=this._optionManager;if(!n||n==="recreate"){var s=a.mountOption(n==="recreate");!this.option||n==="recreate"?nF(this,s):(this.restoreData(),this._mergeOption(s,r)),i=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var o=a.getTimelineOption(this);o&&(i=!0,this._mergeOption(o,r))}if(!n||n==="recreate"||n==="media"){var l=a.getMediaOption(this);l.length&&oe(l,function(d){i=!0,this._mergeOption(d,r)},this)}return i},e.prototype.mergeOption=function(n){this._mergeOption(n,null)},e.prototype._mergeOption=function(n,r){var i=this.option,a=this._componentsMap,s=this._componentsCount,o=[],l=pt(),d=r&&r.replaceMergeMainTypeMap;bNe(this),oe(n,function(f,p){f!=null&&(tn.hasClass(p)?p&&(o.push(p),l.set(p,!0)):i[p]=i[p]==null?xt(f):jt(i[p],f,!0))}),d&&d.each(function(f,p){tn.hasClass(p)&&!l.get(p)&&(o.push(p),l.set(p,!0))}),tn.topologicalTravel(o,tn.getAllClassMainTypes(),c,this);function c(f){var p=wNe(this,f,Dn(n[f])),h=a.get(f),m=h?d&&d.get(f)?"replaceMerge":"normalMerge":"replaceAll",g=Hee(h,p,m);ZLe(g,f,tn),i[f]=null,a.set(f,null),s.set(f,0);var v=[],_=[],x=0,w;oe(g,function(k,S){var C=k.existing,A=k.newOption;if(!A)C&&(C.mergeOption({},this),C.optionUpdated({},!1));else{var M=f==="series",$=tn.getClass(f,k.keyInfo.subType,!M);if(!$)return;if(f==="tooltip"){if(w)return;w=!0}if(C&&C.constructor===$)C.name=k.keyInfo.name,C.mergeOption(A,this),C.optionUpdated(A,!1);else{var R=Oe({componentIndex:S},k.keyInfo);C=new $(A,this,this,R),Oe(C,R),k.brandNew&&(C.__requireNewView=!0),C.init(A,this,this),C.optionUpdated(null,!0)}}C?(v.push(C.option),_.push(C),x++):(v.push(void 0),_.push(void 0))},this),i[f]=v,a.set(f,_),s.set(f,x),f==="series"&&Z_(this)}this._seriesIndices||Z_(this)},e.prototype.getOption=function(){var n=xt(this.option);return oe(n,function(r,i){if(tn.hasClass(i)){for(var a=Dn(r),s=a.length,o=!1,l=s-1;l>=0;l--)a[l]&&!h1(a[l])?o=!0:(a[l]=null,!o&&s--);a.length=s,n[i]=a}}),delete n[rF],n},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(n){this._payload=n},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(n,r){var i=this._componentsMap.get(n);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var s=0;s<i.length;s++)if(i[s])return i[s]}}},e.prototype.queryComponents=function(n){var r=n.mainType;if(!r)return[];var i=n.index,a=n.id,s=n.name,o=this._componentsMap.get(r);if(!o||!o.length)return[];var l;return i!=null?(l=[],oe(Dn(i),function(d){o[d]&&l.push(o[d])})):a!=null?l=iF("id",a,o):s!=null?l=iF("name",s,o):l=kn(o,function(d){return!!d}),aF(l,n)},e.prototype.findComponents=function(n){var r=n.query,i=n.mainType,a=o(r),s=a?this.queryComponents(a):kn(this._componentsMap.get(i),function(d){return!!d});return l(aF(s,n));function o(d){var c=i+"Index",f=i+"Id",p=i+"Name";return d&&(d[c]!=null||d[f]!=null||d[p]!=null)?{mainType:i,index:d[c],id:d[f],name:d[p]}:null}function l(d){return n.filter?kn(d,n.filter):d}},e.prototype.eachComponent=function(n,r,i){var a=this._componentsMap;if(gt(n)){var s=r,o=n;a.each(function(f,p){for(var h=0;f&&h<f.length;h++){var m=f[h];m&&o.call(s,p,m,m.componentIndex)}})}else for(var l=it(n)?a.get(n):_t(n)?this.findComponents(n):null,d=0;l&&d<l.length;d++){var c=l[d];c&&r.call(i,c,c.componentIndex)}},e.prototype.getSeriesByName=function(n){var r=Yr(n,null);return kn(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},e.prototype.getSeriesByType=function(n){return kn(this._componentsMap.get("series"),function(r){return!!r&&r.subType===n})},e.prototype.getSeries=function(){return kn(this._componentsMap.get("series"),function(n){return!!n})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(n,r){Mv(this),oe(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];n.call(r,a,i)},this)},e.prototype.eachRawSeries=function(n,r){oe(this._componentsMap.get("series"),function(i){i&&n.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(n,r,i){Mv(this),oe(this._seriesIndices,function(a){var s=this._componentsMap.get("series")[a];s.subType===n&&r.call(i,s,a)},this)},e.prototype.eachRawSeriesByType=function(n,r,i){return oe(this.getSeriesByType(n),r,i)},e.prototype.isSeriesFiltered=function(n){return Mv(this),this._seriesIndicesMap.get(n.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(n,r){Mv(this);var i=[];oe(this._seriesIndices,function(a){var s=this._componentsMap.get("series")[a];n.call(r,s,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=pt(i)},e.prototype.restoreData=function(n){Z_(this);var r=this._componentsMap,i=[];r.each(function(a,s){tn.hasClass(s)&&i.push(s)}),tn.topologicalTravel(i,tn.getAllClassMainTypes(),function(a){oe(r.get(a),function(s){s&&(a!=="series"||!TNe(s,n))&&s.restoreData()})})},e.internalField=function(){Z_=function(n){var r=n._seriesIndices=[];oe(n._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),n._seriesIndicesMap=pt(r)},Mv=function(n){},nF=function(n,r){n.option={},n.option[rF]=ANe,n._componentsMap=pt({series:[]}),n._componentsCount=pt();var i=r.aria;_t(i)&&i.enabled==null&&(i.enabled=!0),ENe(r,n._theme.option),jt(r,yNe,!1),n._mergeOption(r,null)}}(),e}(An);function TNe(t,e){if(e){var n=e.seriesIndex,r=e.seriesId,i=e.seriesName;return n!=null&&t.componentIndex!==n||r!=null&&t.id!==r||i!=null&&t.name!==i}}function ENe(t,e){var n=t.color&&!t.colorLayer;oe(e,function(r,i){i==="colorLayer"&&n||tn.hasClass(i)||(typeof r=="object"?t[i]=t[i]?jt(t[i],r,!1):xt(r):t[i]==null&&(t[i]=r))})}function iF(t,e,n){if(Be(e)){var r=pt();return oe(e,function(a){if(a!=null){var s=Yr(a,null);s!=null&&r.set(a,!0)}}),kn(n,function(a){return a&&r.get(a[t])})}else{var i=Yr(e,null);return kn(n,function(a){return a&&i!=null&&a[t]===i})}}function aF(t,e){return e.hasOwnProperty("subType")?kn(t,function(n){return n&&n.subType===e.subType}):t}function sF(t){var e=pt();return t&&oe(Dn(t.replaceMerge),function(n){e.set(n,!0)}),{replaceMergeMainTypeMap:e}}Hr(_I,bI);var MNe=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],nne=function(){function t(e){oe(MNe,function(n){this[n]=ut(e[n],e)},this)}return t}(),N4={},Tb=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(e,n){var r=[];oe(N4,function(i,a){var s=i.create(e,n);r=r.concat(s||[])}),this._coordinateSystems=r},t.prototype.update=function(e,n){oe(this._coordinateSystems,function(r){r.update&&r.update(e,n)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(e,n){N4[e]=n},t.get=function(e){return N4[e]},t}(),$Ne=/^(min|max)?(.+)$/,DNe=function(){function t(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return t.prototype.setOption=function(e,n,r){e&&(oe(Dn(e.series),function(s){s&&s.data&&Ka(s.data)&&pk(s.data)}),oe(Dn(e.dataset),function(s){s&&s.source&&Ka(s.source)&&pk(s.source)})),e=xt(e);var i=this._optionBackup,a=RNe(e,n,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},t.prototype.mountOption=function(e){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],xt(e?n.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(e){var n,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(n=xt(r[i.getCurrentIndex()]))}return n},t.prototype.getMediaOption=function(e){var n=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,s=[],o=[];if(!i.length&&!a)return o;for(var l=0,d=i.length;l<d;l++)PNe(i[l].query,n,r)&&s.push(l);return!s.length&&a&&(s=[-1]),s.length&&!ONe(s,this._currentMediaIndices)&&(o=ze(s,function(c){return xt(c===-1?a.option:i[c].option)})),this._currentMediaIndices=s,o},t}();function RNe(t,e,n){var r=[],i,a,s=t.baseOption,o=t.timeline,l=t.options,d=t.media,c=!!t.media,f=!!(l||o||s&&s.timeline);s?(a=s,a.timeline||(a.timeline=o)):((f||c)&&(t.options=t.media=null),a=t),c&&Be(d)&&oe(d,function(h){h&&h.option&&(h.query?r.push(h):i||(i=h))}),p(a),oe(l,function(h){return p(h)}),oe(r,function(h){return p(h.option)});function p(h){oe(e,function(m){m(h,n)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function PNe(t,e,n){var r={width:e,height:n,aspectratio:e/n},i=!0;return oe(t,function(a,s){var o=s.match($Ne);if(!(!o||!o[1]||!o[2])){var l=o[1],d=o[2].toLowerCase();INe(r[d],a,l)||(i=!1)}}),i}function INe(t,e,n){return n==="min"?t>=e:n==="max"?t<=e:t===e}function ONe(t,e){return t.join(",")===e.join(",")}var uo=oe,_1=_t,oF=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function j4(t){var e=t&&t.itemStyle;if(e)for(var n=0,r=oF.length;n<r;n++){var i=oF[n],a=e.normal,s=e.emphasis;a&&a[i]&&(t[i]=t[i]||{},t[i].normal?jt(t[i].normal,a[i]):t[i].normal=a[i],a[i]=null),s&&s[i]&&(t[i]=t[i]||{},t[i].emphasis?jt(t[i].emphasis,s[i]):t[i].emphasis=s[i],s[i]=null)}}function Gi(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,i=t[e].emphasis;r&&(n?(t[e].normal=t[e].emphasis=null,yt(t[e],r)):t[e]=r),i&&(t.emphasis=t.emphasis||{},t.emphasis[e]=i,i.focus&&(t.emphasis.focus=i.focus),i.blurScope&&(t.emphasis.blurScope=i.blurScope))}}function vy(t){Gi(t,"itemStyle"),Gi(t,"lineStyle"),Gi(t,"areaStyle"),Gi(t,"label"),Gi(t,"labelLine"),Gi(t,"upperLabel"),Gi(t,"edgeLabel")}function Vr(t,e){var n=_1(t)&&t[e],r=_1(n)&&n.textStyle;if(r)for(var i=0,a=pj.length;i<a;i++){var s=pj[i];r.hasOwnProperty(s)&&(n[s]=r[s])}}function Ts(t){t&&(vy(t),Vr(t,"label"),t.emphasis&&Vr(t.emphasis,"label"))}function LNe(t){if(_1(t)){j4(t),vy(t),Vr(t,"label"),Vr(t,"upperLabel"),Vr(t,"edgeLabel"),t.emphasis&&(Vr(t.emphasis,"label"),Vr(t.emphasis,"upperLabel"),Vr(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(j4(e),Ts(e));var n=t.markLine;n&&(j4(n),Ts(n));var r=t.markArea;r&&Ts(r);var i=t.data;if(t.type==="graph"){i=i||t.nodes;var a=t.links||t.edges;if(a&&!Ka(a))for(var s=0;s<a.length;s++)Ts(a[s]);oe(t.categories,function(d){vy(d)})}if(i&&!Ka(i))for(var s=0;s<i.length;s++)Ts(i[s]);if(e=t.markPoint,e&&e.data)for(var o=e.data,s=0;s<o.length;s++)Ts(o[s]);if(n=t.markLine,n&&n.data)for(var l=n.data,s=0;s<l.length;s++)Be(l[s])?(Ts(l[s][0]),Ts(l[s][1])):Ts(l[s]);t.type==="gauge"?(Vr(t,"axisLabel"),Vr(t,"title"),Vr(t,"detail")):t.type==="treemap"?(Gi(t.breadcrumb,"itemStyle"),oe(t.levels,function(d){vy(d)})):t.type==="tree"&&vy(t.leaves)}}function ou(t){return Be(t)?t:t?[t]:[]}function lF(t){return(Be(t)?t[0]:t)||{}}function VNe(t,e){uo(ou(t.series),function(r){_1(r)&&LNe(r)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),uo(n,function(r){uo(ou(t[r]),function(i){i&&(Vr(i,"axisLabel"),Vr(i.axisPointer,"label"))})}),uo(ou(t.parallel),function(r){var i=r&&r.parallelAxisDefault;Vr(i,"axisLabel"),Vr(i&&i.axisPointer,"label")}),uo(ou(t.calendar),function(r){Gi(r,"itemStyle"),Vr(r,"dayLabel"),Vr(r,"monthLabel"),Vr(r,"yearLabel")}),uo(ou(t.radar),function(r){Vr(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),uo(ou(t.geo),function(r){_1(r)&&(Ts(r),uo(ou(r.regions),function(i){Ts(i)}))}),uo(ou(t.timeline),function(r){Ts(r),Gi(r,"label"),Gi(r,"itemStyle"),Gi(r,"controlStyle",!0);var i=r.data;Be(i)&&oe(i,function(a){_t(a)&&(Gi(a,"label"),Gi(a,"itemStyle"))})}),uo(ou(t.toolbox),function(r){Gi(r,"iconStyle"),uo(r.feature,function(i){Gi(i,"iconStyle")})}),Vr(lF(t.axisPointer),"label"),Vr(lF(t.tooltip).axisPointer,"label")}function NNe(t,e){for(var n=e.split(","),r=t,i=0;i<n.length&&(r=r&&r[n[i]],r!=null);i++);return r}function jNe(t,e,n,r){for(var i=e.split(","),a=t,s,o=0;o<i.length-1;o++)s=i[o],a[s]==null&&(a[s]={}),a=a[s];a[i[o]]==null&&(a[i[o]]=n)}function uF(t){t&&oe(FNe,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var FNe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],BNe=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],F4=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function $v(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<F4.length;n++){var r=F4[n][1],i=F4[n][0];e[r]!=null&&(e[i]=e[r])}}function dF(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function cF(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function zNe(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function rne(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&rne(t[n].children,e)}function ine(t,e){VNe(t,e),t.series=Dn(t.series),oe(t.series,function(n){if(_t(n)){var r=n.type;if(r==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(r==="pie"||r==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),dF(n.label);var i=n.data;if(i&&!Ka(i))for(var a=0;a<i.length;a++)dF(i[a]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(r==="gauge"){var s=NNe(n,"pointer.color");s!=null&&jNe(n,"itemStyle.color",s)}else if(r==="bar"){$v(n),$v(n.backgroundStyle),$v(n.emphasis);var i=n.data;if(i&&!Ka(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&($v(i[a]),$v(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var o=n.highlightPolicy;o&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=o)),cF(n),rne(n.data,cF)}else r==="graph"||r==="sankey"?zNe(n):r==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&yt(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),uF(n)}}),t.dataRange&&(t.visualMap=t.dataRange),oe(BNe,function(n){var r=t[n];r&&(Be(r)||(r=[r]),oe(r,function(i){uF(i)}))})}function UNe(t){var e=pt();t.eachSeries(function(n){var r=n.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=n.getData(),s={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:n};if(!s.stackedDimension||!(s.isStackedByIndex||s.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(s)}}),e.each(HNe)}function HNe(t){oe(t,function(e,n){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],s=e.data,o=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";s.modify(a,function(d,c,f){var p=s.get(e.stackedDimension,f);if(isNaN(p))return i;var h,m;o?m=s.getRawIndex(f):h=s.get(e.stackedByDimension,f);for(var g=NaN,v=n-1;v>=0;v--){var _=t[v];if(o||(m=_.data.rawIndexOf(_.stackedByDimension,h)),m>=0){var x=_.data.getByRawIndex(_.stackResultDimension,m);if(l==="all"||l==="positive"&&x>0||l==="negative"&&x<0||l==="samesign"&&p>=0&&x>0||l==="samesign"&&p<=0&&x<0){p=FLe(p,x),g=x;break}}}return r[0]=p,r[1]=g,r})})}var nA=function(){function t(e){this.data=e.data||(e.sourceFormat===Gl?{}:[]),this.sourceFormat=e.sourceFormat||Xte,this.seriesLayoutBy=e.seriesLayoutBy||Ml,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var n=this.dimensionsDefine=e.dimensionsDefine;if(n)for(var r=0;r<n.length;r++){var i=n[r];i.type==null&&Jte(this,r)===Ai.Must&&(i.type="ordinal")}}return t}();function xI(t){return t instanceof nA}function n$(t,e,n){n=n||ane(t);var r=e.seriesLayoutBy,i=WNe(t,n,r,e.sourceHeader,e.dimensions),a=new nA({data:t,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:xt(e)});return a}function wI(t){return new nA({data:t,sourceFormat:Ka(t)?bc:so})}function qNe(t){return new nA({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:xt(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function ane(t){var e=Xte;if(Ka(t))e=bc;else if(Be(t)){t.length===0&&(e=na);for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i!=null){if(Be(i)||Ka(i)){e=na;break}else if(_t(i)){e=oo;break}}}}else if(_t(t)){for(var a in t)if(ft(t,a)&&ta(t[a])){e=Gl;break}}return e}function WNe(t,e,n,r,i){var a,s;if(!t)return{dimensionsDefine:fF(i),startIndex:s,dimensionsDetectedCount:a};if(e===na){var o=t;r==="auto"||r==null?pF(function(d){d!=null&&d!=="-"&&(it(d)?s==null&&(s=1):s=0)},n,o,10):s=pn(r)?r:r?1:0,!i&&s===1&&(i=[],pF(function(d,c){i[c]=d!=null?d+"":""},n,o,1/0)),a=i?i.length:n===Ug?o.length:o[0]?o[0].length:null}else if(e===oo)i||(i=GNe(t));else if(e===Gl)i||(i=[],oe(t,function(d,c){i.push(c)}));else if(e===so){var l=Lg(t[0]);a=Be(l)&&l.length||1}return{startIndex:s,dimensionsDefine:fF(i),dimensionsDetectedCount:a}}function GNe(t){for(var e=0,n;e<t.length&&!(n=t[e++]););if(n)return rn(n)}function fF(t){if(t){var e=pt();return ze(t,function(n,r){n=_t(n)?n:{name:n};var i={name:n.name,displayName:n.displayName,type:n.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function pF(t,e,n,r){if(e===Ug)for(var i=0;i<n.length&&i<r;i++)t(n[i]?n[i][0]:null,i);else for(var a=n[0]||[],i=0;i<a.length&&i<r;i++)t(a[i],i)}function sne(t){var e=t.sourceFormat;return e===oo||e===Gl}var _f,xf,wf,hF,mF,one=function(){function t(e,n){var r=xI(e)?e:wI(e);this._source=r;var i=this._data=r.data;r.sourceFormat===bc&&(this._offset=0,this._dimSize=n,this._data=i),mF(this,i,r)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(e,n){},t.prototype.appendData=function(e){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var e;mF=function(s,o,l){var d=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,p=l.dimensionsDefine,h=hF[kI(d,c)];if(Oe(s,h),d===bc)s.getItem=n,s.count=i,s.fillStorage=r;else{var m=lne(d,c);s.getItem=ut(m,null,o,f,p);var g=une(d,c);s.count=ut(g,null,o,f,p)}};var n=function(s,o){s=s-this._offset,o=o||[];for(var l=this._data,d=this._dimSize,c=d*s,f=0;f<d;f++)o[f]=l[c+f];return o},r=function(s,o,l,d){for(var c=this._data,f=this._dimSize,p=0;p<f;p++){for(var h=d[p],m=h[0]==null?1/0:h[0],g=h[1]==null?-1/0:h[1],v=o-s,_=l[p],x=0;x<v;x++){var w=c[x*f+p];_[s+x]=w,w<m&&(m=w),w>g&&(g=w)}h[0]=m,h[1]=g}},i=function(){return this._data?this._data.length/this._dimSize:0};hF=(e={},e[na+"_"+Ml]={pure:!0,appendData:a},e[na+"_"+Ug]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[oo]={pure:!0,appendData:a},e[Gl]={pure:!0,appendData:function(s){var o=this._data;oe(s,function(l,d){for(var c=o[d]||(o[d]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},e[so]={appendData:a},e[bc]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(s){for(var o=0;o<s.length;o++)this._data.push(s[o])}}(),t}(),gF=function(t,e,n,r){return t[r]},YNe=(_f={},_f[na+"_"+Ml]=function(t,e,n,r){return t[r+e]},_f[na+"_"+Ug]=function(t,e,n,r,i){r+=e;for(var a=i||[],s=t,o=0;o<s.length;o++){var l=s[o];a[o]=l?l[r]:null}return a},_f[oo]=gF,_f[Gl]=function(t,e,n,r,i){for(var a=i||[],s=0;s<n.length;s++){var o=n[s].name,l=t[o];a[s]=l?l[r]:null}return a},_f[so]=gF,_f);function lne(t,e){var n=YNe[kI(t,e)];return n}var vF=function(t,e,n){return t.length},KNe=(xf={},xf[na+"_"+Ml]=function(t,e,n){return Math.max(0,t.length-e)},xf[na+"_"+Ug]=function(t,e,n){var r=t[0];return r?Math.max(0,r.length-e):0},xf[oo]=vF,xf[Gl]=function(t,e,n){var r=n[0].name,i=t[r];return i?i.length:0},xf[so]=vF,xf);function une(t,e){var n=KNe[kI(t,e)];return n}var B4=function(t,e,n){return t[e]},XNe=(wf={},wf[na]=B4,wf[oo]=function(t,e,n){return t[n]},wf[Gl]=B4,wf[so]=function(t,e,n){var r=Lg(t);return r instanceof Array?r[e]:r},wf[bc]=B4,wf);function dne(t){var e=XNe[t];return e}function kI(t,e){return t===na?t+"_"+e:t}function gg(t,e,n){if(t){var r=t.getRawDataItem(e);if(r!=null){var i=t.getStore(),a=i.getSource().sourceFormat;if(n!=null){var s=t.getDimensionIndex(n),o=i.getDimensionProperty(s);return dne(a)(r,s,o)}else{var l=r;return a===so&&(l=Lg(r)),l}}}}var ZNe=/\{@(.+?)\}/g,rA=function(){function t(){}return t.prototype.getDataParams=function(e,n){var r=this.getData(n),i=this.getRawValue(e,n),a=r.getRawIndex(e),s=r.getName(e),o=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),d=l&&l[r.getItemVisual(e,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,p=f==="series",h=r.userOutput&&r.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:p?this.subType:null,seriesIndex:this.seriesIndex,seriesId:p?this.id:null,seriesName:p?this.name:null,name:s,dataIndex:a,data:o,dataType:n,value:i,color:d,borderColor:c,dimensionNames:h?h.fullDimensions:null,encode:h?h.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(e,n,r,i,a,s){n=n||"normal";var o=this.getData(r),l=this.getDataParams(e,r);if(s&&(l.value=s.interpolatedValue),i!=null&&Be(l.value)&&(l.value=l.value[i]),!a){var d=o.getItemModel(e);a=d.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(gt(a))return l.status=n,l.dimensionIndex=i,a(l);if(it(a)){var c=qte(a,l);return c.replace(ZNe,function(f,p){var h=p.length,m=p;m.charAt(0)==="["&&m.charAt(h-1)==="]"&&(m=+m.slice(1,h-1));var g=gg(o,e,m);if(s&&Be(s.interpolatedValue)){var v=o.getDimensionIndex(m);v>=0&&(g=s.interpolatedValue[v])}return g!=null?g+"":""})}},t.prototype.getRawValue=function(e,n){return gg(this.getData(n),e)},t.prototype.formatTooltip=function(e,n,r){},t}();function yF(t){var e,n;return _t(t)?t.type&&(n=t):e=t,{text:e,frag:n}}function h0(t){return new QNe(t)}var QNe=function(){function t(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return t.prototype.perform=function(e){var n=this._upstream,r=e&&e.skip;if(this._dirty&&n){var i=this.context;i.data=i.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var s=c(this._modBy),o=this._modDataCount||0,l=c(e&&e.modBy),d=e&&e.modDataCount||0;(s!==l||o!==d)&&(a="reset");function c(x){return!(x>=1)&&(x=1),x}var f;(this._dirty||a==="reset")&&(this._dirty=!1,f=this._doReset(r)),this._modBy=l,this._modDataCount=d;var p=e&&e.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,m=Math.min(p!=null?this._dueIndex+p:1/0,this._dueEnd);if(!r&&(f||h<m)){var g=this._progress;if(Be(g))for(var v=0;v<g.length;v++)this._doProgress(g[v],h,m,l,d);else this._doProgress(g,h,m,l,d)}this._dueIndex=m;var _=this._settedOutputEnd!=null?this._settedOutputEnd:m;this._outputDueEnd=_}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(e,n,r,i,a){bF.reset(n,r,i,a),this._callingProgress=e,this._callingProgress({start:n,end:r,count:r-n,next:bF.next},this.context)},t.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,r;!e&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(r=n.forceFirstProgress,n=n.progress),Be(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},t}(),bF=function(){var t,e,n,r,i,a={reset:function(l,d,c,f){e=l,t=d,n=c,r=f,i=Math.ceil(r/n),a.next=n>1&&r>0?o:s}};return a;function s(){return e<t?e++:null}function o(){var l=e%i*n+Math.ceil(e/i),d=e>=t?null:l<r?l:e;return e++,d}}();function _c(t,e){var n=e&&e.type;return n==="ordinal"?t:(n==="time"&&!pn(t)&&t!=null&&t!=="-"&&(t=+Fl(t)),t==null||t===""?NaN:Number(t))}var JNe=pt({number:function(t){return parseFloat(t)},time:function(t){return+Fl(t)},trim:function(t){return it(t)?xo(t):t}});function cne(t){return JNe.get(t)}var fne={lt:function(t,e){return t<e},lte:function(t,e){return t<=e},gt:function(t,e){return t>e},gte:function(t,e){return t>=e}},e7e=function(){function t(e,n){if(!pn(n)){var r="";wn(r)}this._opFn=fne[e],this._rvalFloat=td(n)}return t.prototype.evaluate=function(e){return pn(e)?this._opFn(e,this._rvalFloat):this._opFn(td(e),this._rvalFloat)},t}(),pne=function(){function t(e,n){var r=e==="desc";this._resultLT=r?1:-1,n==null&&(n=r?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return t.prototype.evaluate=function(e,n){var r=pn(e)?e:td(e),i=pn(n)?n:td(n),a=isNaN(r),s=isNaN(i);if(a&&(r=this._incomparable),s&&(i=this._incomparable),a&&s){var o=it(e),l=it(n);o&&(r=l?e:0),l&&(i=o?n:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},t}(),t7e=function(){function t(e,n){this._rval=n,this._isEQ=e,this._rvalTypeof=typeof n,this._rvalFloat=td(n)}return t.prototype.evaluate=function(e){var n=e===this._rval;if(!n){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(n=td(e)===this._rvalFloat)}return this._isEQ?n:!n},t}();function n7e(t,e){return t==="eq"||t==="ne"?new t7e(t==="eq",e):ft(fne,t)?new e7e(t,e):null}var r7e=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(e){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(e){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(e,n){},t.prototype.retrieveValueFromItem=function(e,n){},t.prototype.convertValue=function(e,n){return _c(e,n)},t}();function i7e(t,e){var n=new r7e,r=t.data,i=n.sourceFormat=t.sourceFormat,a=t.startIndex,s="";t.seriesLayoutBy!==Ml&&wn(s);var o=[],l={},d=t.dimensionsDefine;if(d)oe(d,function(g,v){var _=g.name,x={index:v,name:_,displayName:g.displayName};if(o.push(x),_!=null){var w="";ft(l,_)&&wn(w),l[_]=x}});else for(var c=0;c<t.dimensionsDetectedCount;c++)o.push({index:c});var f=lne(i,Ml);e.__isBuiltIn&&(n.getRawDataItem=function(g){return f(r,a,o,g)},n.getRawData=ut(a7e,null,t)),n.cloneRawData=ut(s7e,null,t);var p=une(i,Ml);n.count=ut(p,null,r,a,o);var h=dne(i);n.retrieveValue=function(g,v){var _=f(r,a,o,g);return m(_,v)};var m=n.retrieveValueFromItem=function(g,v){if(g!=null){var _=o[v];if(_)return h(g,v,_.name)}};return n.getDimensionInfo=ut(o7e,null,o,l),n.cloneAllDimensionInfo=ut(l7e,null,o),n}function a7e(t){var e=t.sourceFormat;if(!SI(e)){var n="";wn(n)}return t.data}function s7e(t){var e=t.sourceFormat,n=t.data;if(!SI(e)){var r="";wn(r)}if(e===na){for(var i=[],a=0,s=n.length;a<s;a++)i.push(n[a].slice());return i}else if(e===oo){for(var i=[],a=0,s=n.length;a<s;a++)i.push(Oe({},n[a]));return i}}function o7e(t,e,n){if(n!=null){if(pn(n)||!isNaN(n)&&!ft(e,n))return t[n];if(ft(e,n))return e[n]}}function l7e(t){return xt(t)}var hne=pt();function u7e(t){t=xt(t);var e=t.type,n="";e||wn(n);var r=e.split(":");r.length!==2&&wn(n);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),t.__isBuiltIn=i,hne.set(e,t)}function d7e(t,e,n){var r=Dn(t),i=r.length,a="";i||wn(a);for(var s=0,o=i;s<o;s++){var l=r[s];e=c7e(l,e),s!==o-1&&(e.length=Math.max(e.length,1))}return e}function c7e(t,e,n,r){var i="";e.length||wn(i),_t(t)||wn(i);var a=t.type,s=hne.get(a);s||wn(i);var o=ze(e,function(d){return i7e(d,s)}),l=Dn(s.transform({upstream:o[0],upstreamList:o,config:xt(t.config)}));return ze(l,function(d,c){var f="";_t(d)||wn(f),d.data||wn(f);var p=ane(d.data);SI(p)||wn(f);var h,m=e[0];if(m&&c===0&&!d.dimensions){var g=m.startIndex;g&&(d.data=m.data.slice(0,g).concat(d.data)),h={seriesLayoutBy:Ml,sourceHeader:g,dimensions:m.metaRawOption.dimensions}}else h={seriesLayoutBy:Ml,sourceHeader:0,dimensions:d.dimensions};return n$(d.data,h,null)})}function SI(t){return t===na||t===oo}var iA="undefined",f7e=typeof Uint32Array===iA?Array:Uint32Array,p7e=typeof Uint16Array===iA?Array:Uint16Array,mne=typeof Int32Array===iA?Array:Int32Array,_F=typeof Float64Array===iA?Array:Float64Array,gne={float:_F,int:mne,ordinal:Array,number:Array,time:_F},z4;function Hh(t){return t>65535?f7e:p7e}function qh(){return[1/0,-1/0]}function h7e(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function xF(t,e,n,r,i){var a=gne[n||"float"];if(i){var s=t[e],o=s&&s.length;if(o!==r){for(var l=new a(r),d=0;d<o;d++)l[d]=s[d];t[e]=l}}else t[e]=new a(r)}var r$=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=pt()}return t.prototype.initData=function(e,n,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=z4[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],sne(i),this._dimensions=ze(n,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,e.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(e,n){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===n)return a}else a=i.length;return i[a]={type:n},r.set(e,a),this._chunks[a]=new gne[n||"float"](this._rawCount),this._rawExtent[a]=qh(),a},t.prototype.collectOrdinalMeta=function(e,n){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,s=i.ordinalOffset||0,o=r.length;s===0&&(a[e]=qh());for(var l=a[e],d=s;d<o;d++){var c=r[d]=n.parseAndCollect(r[d]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=n,i.ordinalOffset=o,i.type="ordinal"},t.prototype.getOrdinalMeta=function(e){var n=this._dimensions[e],r=n.ordinalMeta;return r},t.prototype.getDimensionProperty=function(e){var n=this._dimensions[e];return n&&n.property},t.prototype.appendData=function(e){var n=this._provider,r=this.count();n.appendData(e);var i=n.count();return n.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},t.prototype.appendValues=function(e,n){for(var r=this._chunks,i=this._dimensions,a=i.length,s=this._rawExtent,o=this.count(),l=o+Math.max(e.length,n||0),d=0;d<a;d++){var c=i[d];xF(r,d,c.type,l,!0)}for(var f=[],p=o;p<l;p++)for(var h=p-o,m=0;m<a;m++){var c=i[m],g=z4.arrayRows.call(this,e[h]||f,c.property,h,m);r[m][p]=g;var v=s[m];g<v[0]&&(v[0]=g),g>v[1]&&(v[1]=g)}return this._rawCount=this._count=l,{start:o,end:l}},t.prototype._initDataFromProvider=function(e,n,r){for(var i=this._provider,a=this._chunks,s=this._dimensions,o=s.length,l=this._rawExtent,d=ze(s,function(x){return x.property}),c=0;c<o;c++){var f=s[c];l[c]||(l[c]=qh()),xF(a,c,f.type,n,r)}if(i.fillStorage)i.fillStorage(e,n,a,l);else for(var p=[],h=e;h<n;h++){p=i.getItem(h,p);for(var m=0;m<o;m++){var g=a[m],v=this._dimValueGetter(p,d[m],h,m);g[h]=v;var _=l[m];v<_[0]&&(_[0]=v),v>_[1]&&(_[1]=v)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=n,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(e,n){if(!(n>=0&&n<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(n)]:NaN},t.prototype.getValues=function(e,n){var r=[],i=[];if(n==null){n=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,s=i.length;a<s;a++)r.push(this.get(i[a],n));return r},t.prototype.getByRawIndex=function(e,n){if(!(n>=0&&n<this._rawCount))return NaN;var r=this._chunks[e];return r?r[n]:NaN},t.prototype.getSum=function(e){var n=this._chunks[e],r=0;if(n)for(var i=0,a=this.count();i<a;i++){var s=this.get(e,i);isNaN(s)||(r+=s)}return r},t.prototype.getMedian=function(e){var n=[];this.each([e],function(a){isNaN(a)||n.push(a)});var r=n.sort(function(a,s){return a-s}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},t.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var n=this._indices,r=n[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var s=(i+a)/2|0;if(n[s]<e)i=s+1;else if(n[s]>e)a=s-1;else return s}return-1},t.prototype.indicesOfNearest=function(e,n,r){var i=this._chunks,a=i[e],s=[];if(!a)return s;r==null&&(r=1/0);for(var o=1/0,l=-1,d=0,c=0,f=this.count();c<f;c++){var p=this.getRawIndex(c),h=n-a[p],m=Math.abs(h);m<=r&&((m<o||m===o&&h>=0&&l<0)&&(o=m,l=h,d=0),h===l&&(s[d++]=c))}return s.length=d,s},t.prototype.getIndices=function(){var e,n=this._indices;if(n){var r=n.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=n[a]}else e=new r(n.buffer,0,i)}else{var r=Hh(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},t.prototype.filter=function(e,n){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=Hh(r._rawCount),s=new a(i),o=[],l=e.length,d=0,c=e[0],f=r._chunks,p=0;p<i;p++){var h=void 0,m=r.getRawIndex(p);if(l===0)h=n(p);else if(l===1){var g=f[c][m];h=n(g,p)}else{for(var v=0;v<l;v++)o[v]=f[e[v]][m];o[v]=p,h=n.apply(null,o)}h&&(s[d++]=m)}return d<i&&(r._indices=s),r._count=d,r._extent=[],r._updateGetRawIdx(),r},t.prototype.selectRange=function(e){var n=this.clone(),r=n._count;if(!r)return this;var i=rn(e),a=i.length;if(!a)return this;var s=n.count(),o=Hh(n._rawCount),l=new o(s),d=0,c=i[0],f=e[c][0],p=e[c][1],h=n._chunks,m=!1;if(!n._indices){var g=0;if(a===1){for(var v=h[i[0]],_=0;_<r;_++){var x=v[_];(x>=f&&x<=p||isNaN(x))&&(l[d++]=g),g++}m=!0}else if(a===2){for(var v=h[i[0]],w=h[i[1]],k=e[i[1]][0],S=e[i[1]][1],_=0;_<r;_++){var x=v[_],C=w[_];(x>=f&&x<=p||isNaN(x))&&(C>=k&&C<=S||isNaN(C))&&(l[d++]=g),g++}m=!0}}if(!m)if(a===1)for(var _=0;_<s;_++){var A=n.getRawIndex(_),x=h[i[0]][A];(x>=f&&x<=p||isNaN(x))&&(l[d++]=A)}else for(var _=0;_<s;_++){for(var M=!0,A=n.getRawIndex(_),$=0;$<a;$++){var R=i[$],x=h[R][A];(x<e[R][0]||x>e[R][1])&&(M=!1)}M&&(l[d++]=n.getRawIndex(_))}return d<s&&(n._indices=l),n._count=d,n._extent=[],n._updateGetRawIdx(),n},t.prototype.map=function(e,n){var r=this.clone(e);return this._updateDims(r,e,n),r},t.prototype.modify=function(e,n){this._updateDims(this,e,n)},t.prototype._updateDims=function(e,n,r){for(var i=e._chunks,a=[],s=n.length,o=e.count(),l=[],d=e._rawExtent,c=0;c<n.length;c++)d[n[c]]=qh();for(var f=0;f<o;f++){for(var p=e.getRawIndex(f),h=0;h<s;h++)l[h]=i[n[h]][p];l[s]=f;var m=r&&r.apply(null,l);if(m!=null){typeof m!="object"&&(a[0]=m,m=a);for(var c=0;c<m.length;c++){var g=n[c],v=m[c],_=d[g],x=i[g];x&&(x[p]=v),v<_[0]&&(_[0]=v),v>_[1]&&(_[1]=v)}}}},t.prototype.lttbDownSample=function(e,n){var r=this.clone([e],!0),i=r._chunks,a=i[e],s=this.count(),o=0,l=Math.floor(1/n),d=this.getRawIndex(0),c,f,p,h=new(Hh(this._rawCount))(Math.min((Math.ceil(s/l)+2)*2,s));h[o++]=d;for(var m=1;m<s-1;m+=l){for(var g=Math.min(m+l,s-1),v=Math.min(m+l*2,s),_=(v+g)/2,x=0,w=g;w<v;w++){var k=this.getRawIndex(w),S=a[k];isNaN(S)||(x+=S)}x/=v-g;var C=m,A=Math.min(m+l,s),M=m-1,$=a[d];c=-1,p=C;for(var R=-1,I=0,w=C;w<A;w++){var k=this.getRawIndex(w),S=a[k];if(isNaN(S)){I++,R<0&&(R=k);continue}f=Math.abs((M-_)*(S-$)-(M-w)*(x-$)),f>c&&(c=f,p=k)}I>0&&I<A-C&&(h[o++]=Math.min(R,p),p=Math.max(R,p)),h[o++]=p,d=p}return h[o++]=this.getRawIndex(s-1),r._count=o,r._indices=h,r.getRawIndex=this._getRawIdx,r},t.prototype.minmaxDownSample=function(e,n){for(var r=this.clone([e],!0),i=r._chunks,a=Math.floor(1/n),s=i[e],o=this.count(),l=new(Hh(this._rawCount))(Math.ceil(o/a)*2),d=0,c=0;c<o;c+=a){var f=c,p=s[this.getRawIndex(f)],h=c,m=s[this.getRawIndex(h)],g=a;c+a>o&&(g=o-c);for(var v=0;v<g;v++){var _=this.getRawIndex(c+v),x=s[_];x<p&&(p=x,f=c+v),x>m&&(m=x,h=c+v)}var w=this.getRawIndex(f),k=this.getRawIndex(h);f<h?(l[d++]=w,l[d++]=k):(l[d++]=k,l[d++]=w)}return r._count=d,r._indices=l,r._updateGetRawIdx(),r},t.prototype.downSample=function(e,n,r,i){for(var a=this.clone([e],!0),s=a._chunks,o=[],l=Math.floor(1/n),d=s[e],c=this.count(),f=a._rawExtent[e]=qh(),p=new(Hh(this._rawCount))(Math.ceil(c/l)),h=0,m=0;m<c;m+=l){l>c-m&&(l=c-m,o.length=l);for(var g=0;g<l;g++){var v=this.getRawIndex(m+g);o[g]=d[v]}var _=r(o),x=this.getRawIndex(Math.min(m+i(o,_)||0,c-1));d[x]=_,_<f[0]&&(f[0]=_),_>f[1]&&(f[1]=_),p[h++]=x}return a._count=h,a._indices=p,a._updateGetRawIdx(),a},t.prototype.each=function(e,n){if(this._count)for(var r=e.length,i=this._chunks,a=0,s=this.count();a<s;a++){var o=this.getRawIndex(a);switch(r){case 0:n(a);break;case 1:n(i[e[0]][o],a);break;case 2:n(i[e[0]][o],i[e[1]][o],a);break;default:for(var l=0,d=[];l<r;l++)d[l]=i[e[l]][o];d[l]=a,n.apply(null,d)}}},t.prototype.getDataExtent=function(e){var n=this._chunks[e],r=qh();if(!n)return r;var i=this.count(),a=!this._indices,s;if(a)return this._rawExtent[e].slice();if(s=this._extent[e],s)return s.slice();s=r;for(var o=s[0],l=s[1],d=0;d<i;d++){var c=this.getRawIndex(d),f=n[c];f<o&&(o=f),f>l&&(l=f)}return s=[o,l],this._extent[e]=s,s},t.prototype.getRawDataItem=function(e){var n=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(n);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][n]);return r},t.prototype.clone=function(e,n){var r=new t,i=this._chunks,a=e&&Vl(e,function(o,l){return o[l]=!0,o},{});if(a)for(var s=0;s<i.length;s++)r._chunks[s]=a[s]?h7e(i[s]):i[s];else r._chunks=i;return this._copyCommonProps(r),n||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},t.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=xt(this._extent),e._rawExtent=xt(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,n=void 0;if(e===Array){var r=this._indices.length;n=new e(r);for(var i=0;i<r;i++)n[i]=this._indices[i]}else n=new e(this._indices);return n}return null},t.prototype._getRawIdxIdentity=function(e){return e},t.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function e(n,r,i,a){return _c(n[a],this._dimensions[a])}z4={arrayRows:e,objectRows:function(n,r,i,a){return _c(n[r],this._dimensions[a])},keyedColumns:e,original:function(n,r,i,a){var s=n&&(n.value==null?n:n.value);return _c(s instanceof Array?s[a]:s,this._dimensions[a])},typedArray:function(n,r,i,a){return n[a]}}}(),t}(),vne=function(){function t(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(e,n){this._sourceList=e,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,n=this._getUpstreamSourceManagers(),r=!!n.length,i,a;if(Q_(e)){var s=e,o=void 0,l=void 0,d=void 0;if(r){var c=n[0];c.prepareSource(),d=c.getSource(),o=d.data,l=d.sourceFormat,a=[c._getVersionSign()]}else o=s.get("data",!0),l=Ka(o)?bc:so,a=[];var f=this._getSourceMetaRawOption()||{},p=d&&d.metaRawOption||{},h=$t(f.seriesLayoutBy,p.seriesLayoutBy)||null,m=$t(f.sourceHeader,p.sourceHeader),g=$t(f.dimensions,p.dimensions),v=h!==p.seriesLayoutBy||!!m!=!!p.sourceHeader||g;i=v?[n$(o,{seriesLayoutBy:h,sourceHeader:m,dimensions:g},l)]:[]}else{var _=e;if(r){var x=this._applyTransform(n);i=x.sourceList,a=x.upstreamSignList}else{var w=_.get("source",!0);i=[n$(w,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},t.prototype._applyTransform=function(e){var n=this._sourceHost,r=n.get("transform",!0),i=n.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&kF(a)}var s,o=[],l=[];return oe(e,function(d){d.prepareSource();var c=d.getSource(i||0),f="";i!=null&&!c&&kF(f),o.push(c),l.push(d._getVersionSign())}),r?s=d7e(r,o,{datasetIndex:n.componentIndex}):i!=null&&(s=[qNe(o[0])]),{sourceList:s,upstreamSignList:l}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),n=0;n<e.length;n++){var r=e[n];if(r._isDirty()||this._upstreamSignList[n]!==r._getVersionSign())return!0}},t.prototype.getSource=function(e){e=e||0;var n=this._sourceList[e];if(!n){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return n},t.prototype.getSharedDataStore=function(e){var n=e.makeStoreSchema();return this._innerGetDataStore(n.dimensions,e.source,n.hash)},t.prototype._innerGetDataStore=function(e,n,r){var i=0,a=this._storeList,s=a[i];s||(s=a[i]={});var o=s[r];if(!o){var l=this._getUpstreamSourceManagers()[0];Q_(this._sourceHost)&&l?o=l._innerGetDataStore(e,n,r):(o=new r$,o.initData(new one(n,e.length),e)),s[r]=o}return o},t.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Q_(e)){var n=yI(e);return n?[n.getSourceManager()]:[]}else return ze(_Ne(e),function(r){return r.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,n,r,i;if(Q_(e))n=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;n=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:r,dimensions:i}},t}();function wF(t){var e=t.option.transform;e&&pk(t.option.transform)}function Q_(t){return t.mainType==="series"}function kF(t){throw new Error(t)}var m7e="line-height:1";function yne(t){var e=t.lineHeight;return e==null?m7e:"line-height:"+ga(e+"")+"px"}function bne(t,e){var n=t.color||"#6e7079",r=t.fontSize||12,i=t.fontWeight||"400",a=t.color||"#464646",s=t.fontSize||14,o=t.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+ga(r+"")+"px;color:"+ga(n)+";font-weight:"+ga(i+""),valueStyle:"font-size:"+ga(s+"")+"px;color:"+ga(a)+";font-weight:"+ga(o+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:i},valueStyle:{fontSize:s,fill:a,fontWeight:o}}}var g7e=[0,10,20,30],v7e=["",`
`,`

`,`


`];function di(t,e){return e.type=t,e}function i$(t){return t.type==="section"}function _ne(t){return i$(t)?y7e:b7e}function xne(t){if(i$(t)){var e=0,n=t.blocks.length,r=n>1||n>0&&!t.noHeader;return oe(t.blocks,function(i){var a=xne(i);a>=e&&(e=a+ +(r&&(!a||i$(i)&&!i.noHeader)))}),e}return 0}function y7e(t,e,n,r){var i=e.noHeader,a=_7e(xne(e)),s=[],o=e.blocks||[];Ta(!o||Be(o)),o=o||[];var l=t.orderMode;if(e.sortBlocks&&l){o=o.slice();var d={valueAsc:"asc",valueDesc:"desc"};if(ft(d,l)){var c=new pne(d[l],null);o.sort(function(g,v){return c.evaluate(g.sortParam,v.sortParam)})}else l==="seriesDesc"&&o.reverse()}oe(o,function(g,v){var _=e.valueFormatter,x=_ne(g)(_?Oe(Oe({},t),{valueFormatter:_}):t,g,v>0?a.html:0,r);x!=null&&s.push(x)});var f=t.renderMode==="richText"?s.join(a.richText):a$(r,s.join(""),i?n:a.html);if(i)return f;var p=JM(e.header,"ordinal",t.useUTC),h=bne(r,t.renderMode).nameStyle,m=yne(r);return t.renderMode==="richText"?wne(t,p,h)+a.richText+f:a$(r,'<div style="'+h+";"+m+';">'+ga(p)+"</div>"+f,n)}function b7e(t,e,n,r){var i=t.renderMode,a=e.noName,s=e.noValue,o=!e.markerType,l=e.name,d=t.useUTC,c=e.valueFormatter||t.valueFormatter||function(k){return k=Be(k)?k:[k],ze(k,function(S,C){return JM(S,Be(h)?h[C]:h,d)})};if(!(a&&s)){var f=o?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),p=a?"":JM(l,"ordinal",d),h=e.valueType,m=s?[]:c(e.value,e.dataIndex),g=!o||!a,v=!o&&a,_=bne(r,i),x=_.nameStyle,w=_.valueStyle;return i==="richText"?(o?"":f)+(a?"":wne(t,p,x))+(s?"":k7e(t,m,g,v,w)):a$(r,(o?"":f)+(a?"":x7e(p,!o,x))+(s?"":w7e(m,g,v,w)),n)}}function SF(t,e,n,r,i,a){if(t){var s=_ne(t),o={useUTC:i,renderMode:n,orderMode:r,markupStyleCreator:e,valueFormatter:t.valueFormatter};return s(o,t,0,a)}}function _7e(t){return{html:g7e[t],richText:v7e[t]}}function a$(t,e,n){var r='<div style="clear:both"></div>',i="margin: "+n+"px 0 0",a=yne(t);return'<div style="'+i+";"+a+';">'+e+r+"</div>"}function x7e(t,e,n){var r=e?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+ga(t)+"</span>"}function w7e(t,e,n,r){var i=n?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return t=Be(t)?t:[t],'<span style="'+a+";"+r+'">'+ze(t,function(s){return ga(s)}).join("&nbsp;&nbsp;")+"</span>"}function wne(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function k7e(t,e,n,r,i){var a=[i],s=r?10:20;return n&&a.push({padding:[0,0,0,s],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(Be(e)?e.join("  "):e,a)}function kne(t,e){var n=t.getData().getItemVisual(e,"style"),r=n[t.visualDrawType];return Zp(r)}function Sne(t,e){var n=t.get("padding");return n!=null?n:e==="richText"?[8,10]:10}var U4=function(){function t(){this.richTextStyles={},this._nextStyleNameId=Fee()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(e,n,r){var i=r==="richText"?this._generateStyleName():null,a=pNe({color:n,type:e,renderMode:r,markerId:i});return it(a)?a:(this.richTextStyles[i]=a.style,a.content)},t.prototype.wrapRichTextStyle=function(e,n){var r={};Be(n)?oe(n,function(a){return Oe(r,a)}):Oe(r,n);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},t}();function Cne(t){var e=t.series,n=t.dataIndex,r=t.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),s=a.length,o=e.getRawValue(n),l=Be(o),d=kne(e,n),c,f,p,h;if(s>1||l&&!s){var m=S7e(o,e,n,a,d);c=m.inlineValues,f=m.inlineValueTypes,p=m.blocks,h=m.inlineValues[0]}else if(s){var g=i.getDimensionInfo(a[0]);h=c=gg(i,n,a[0]),f=g.type}else h=c=l?o[0]:o;var v=XP(e),_=v&&e.name||"",x=i.getName(n),w=r?_:x;return di("section",{header:_,noHeader:r||!v,sortParam:h,blocks:[di("nameValue",{markerType:"item",markerColor:d,name:w,noName:!xo(w),value:c,valueType:f,dataIndex:n})].concat(p||[])})}function S7e(t,e,n,r,i){var a=e.getData(),s=Vl(t,function(f,p,h){var m=a.getDimensionInfo(h);return f=f||m&&m.tooltip!==!1&&m.displayName!=null},!1),o=[],l=[],d=[];r.length?oe(r,function(f){c(gg(a,n,f),f)}):oe(t,c);function c(f,p){var h=a.getDimensionInfo(p);!h||h.otherDims.tooltip===!1||(s?d.push(di("nameValue",{markerType:"subItem",markerColor:i,name:h.displayName,value:f,valueType:h.type})):(o.push(f),l.push(h.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:d}}var Sd=on();function J_(t,e){return t.getName(e)||t.getId(e)}var Pw="__universalTransitionEnabled",Zn=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return e.prototype.init=function(n,r,i){this.seriesIndex=this.componentIndex,this.dataTask=h0({count:A7e,reset:T7e}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,i);var a=Sd(this).sourceManager=new vne(this);a.prepareSource();var s=this.getInitialData(n,i);AF(s,this),this.dataTask.context.data=s,Sd(this).dataBeforeProcessed=s,CF(this),this._initSelectedMapFromData(s)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=b1(this),a=i?zg(n):{},s=this.subType;tn.hasClass(s)&&(s+="Series"),jt(n,r.getTheme().get(this.subType)),jt(n,this.getDefaultOption()),Gp(n,"label",["show"]),this.fillDataTextStyle(n.data),i&&Ic(n,a,i)},e.prototype.mergeOption=function(n,r){n=jt(this.option,n,!0),this.fillDataTextStyle(n.data);var i=b1(this);i&&Ic(this.option,n,i);var a=Sd(this).sourceManager;a.dirty(),a.prepareSource();var s=this.getInitialData(n,r);AF(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,Sd(this).dataBeforeProcessed=s,CF(this),this._initSelectedMapFromData(s)},e.prototype.fillDataTextStyle=function(n){if(n&&!Ka(n))for(var r=["show"],i=0;i<n.length;i++)n[i]&&n[i].label&&Gp(n[i],"label",r)},e.prototype.getInitialData=function(n,r){},e.prototype.appendData=function(n){var r=this.getRawData();r.appendData(n.data)},e.prototype.getData=function(n){var r=s$(this);if(r){var i=r.context.data;return n==null||!i.getLinkedData?i:i.getLinkedData(n)}else return Sd(this).data},e.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},e.prototype.setData=function(n){var r=s$(this);if(r){var i=r.context;i.outputData=n,r!==this.dataTask&&(i.data=n)}Sd(this).data=n},e.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return pt(n)},e.prototype.getSourceManager=function(){return Sd(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Sd(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},e.prototype.formatTooltip=function(n,r,i){return Cne({series:this,dataIndex:n,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(Qt.node&&!(n&&n.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(n,r,i){var a=this.ecModel,s=bI.prototype.getColorFromPalette.call(this,n,r,i);return s||(s=a.getColorFromPalette(n,r,i)),s},e.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(n,r){this._innerSelect(this.getData(r),n)},e.prototype.unselect=function(n,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,s=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<n.length;o++){var l=n[o],d=J_(s,l);i[d]=!1,this._selectedDataIndicesMap[d]=-1}}},e.prototype.toggleSelect=function(n,r){for(var i=[],a=0;a<n.length;a++)i[0]=n[a],this.isSelected(n[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,r=rn(n),i=[],a=0;a<r.length;a++){var s=n[r[a]];s>=0&&i.push(s)}return i},e.prototype.isSelected=function(n,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[J_(a,n)])&&!a.getItemModel(n).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[Pw])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},e.prototype._innerSelect=function(n,r){var i,a,s=this.option,o=s.selectedMode,l=r.length;if(!(!o||!l)){if(o==="series")s.selectedMap="all";else if(o==="multiple"){_t(s.selectedMap)||(s.selectedMap={});for(var d=s.selectedMap,c=0;c<l;c++){var f=r[c],p=J_(n,f);d[p]=!0,this._selectedDataIndicesMap[p]=n.getRawIndex(f)}}else if(o==="single"||o===!0){var h=r[l-1],p=J_(n,h);s.selectedMap=(i={},i[p]=!0,i),this._selectedDataIndicesMap=(a={},a[p]=n.getRawIndex(h),a)}}},e.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var r=[];n.hasItemOption&&n.each(function(i){var a=n.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(n,r)}},e.registerClass=function(n){return tn.registerClass(n)},e.protoInitialize=function(){var n=e.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),e}(tn);Hr(Zn,rA);Hr(Zn,bI);Yee(Zn,tn);function CF(t){var e=t.name;XP(t)||(t.name=C7e(t)||e)}function C7e(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),r=[];return oe(n,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function A7e(t){return t.model.getRawData().count()}function T7e(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),E7e}function E7e(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function AF(t,e){oe(u1(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(n){t.wrapMethod(n,Pt(M7e,e))})}function M7e(t,e){var n=s$(t);return n&&n.setOutputEnd((e||this).count()),e}function s$(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(t.uid))}return r}}var hr=function(){function t(){this.group=new kt,this.uid=Fg("viewComponent")}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){},t.prototype.updateLayout=function(e,n,r,i){},t.prototype.updateVisual=function(e,n,r,i){},t.prototype.toggleBlurSeries=function(e,n,r){},t.prototype.eachRendered=function(e){var n=this.group;n&&n.traverse(e)},t}();QP(hr);jC(hr);function Hg(){var t=on();return function(e){var n=t(e),r=e.pipelineContext,i=!!n.large,a=!!n.progressiveRender,s=n.large=!!(r&&r.large),o=n.progressiveRender=!!(r&&r.progressiveRender);return(i!==s||a!==o)&&"reset"}}var Ane=on(),$7e=Hg(),Pn=function(){function t(){this.group=new kt,this.uid=Fg("viewChart"),this.renderTask=h0({plan:D7e,reset:R7e}),this.renderTask.context={view:this}}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.highlight=function(e,n,r,i){var a=e.getData(i&&i.dataType);a&&EF(a,i,"emphasis")},t.prototype.downplay=function(e,n,r,i){var a=e.getData(i&&i.dataType);a&&EF(a,i,"normal")},t.prototype.remove=function(e,n){this.group.removeAll()},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateLayout=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateVisual=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.eachRendered=function(e){Gc(this.group,e)},t.markUpdateMethod=function(e,n){Ane(e).updateMethod=n},t.protoInitialize=function(){var e=t.prototype;e.type="chart"}(),t}();function TF(t,e,n){t&&g1(t)&&(e==="emphasis"?nd:rd)(t,n)}function EF(t,e,n){var r=Yp(t,e),i=e&&e.highlightKey!=null?pVe(e.highlightKey):null;r!=null?oe(Dn(r),function(a){TF(t.getItemGraphicEl(a),n,i)}):t.eachItemGraphicEl(function(a){TF(a,n,i)})}QP(Pn);jC(Pn);function D7e(t){return $7e(t.model)}function R7e(t){var e=t.model,n=t.ecModel,r=t.api,i=t.payload,a=e.pipelineContext.progressiveRender,s=t.view,o=i&&Ane(i).updateMethod,l=a?"incrementalPrepareRender":o&&s[o]?o:"render";return l!=="render"&&s[l](e,n,r,i),P7e[l]}var P7e={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},$k="\0__throttleOriginMethod",MF="\0__throttleRate",$F="\0__throttleType";function CI(t,e,n){var r,i=0,a=0,s=null,o,l,d,c;e=e||0;function f(){a=new Date().getTime(),s=null,t.apply(l,d||[])}var p=function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];r=new Date().getTime(),l=this,d=h;var g=c||e,v=c||n;c=null,o=r-(v?i:a)-g,clearTimeout(s),v?s=setTimeout(f,g):o>=0?f():s=setTimeout(f,-o),i=r};return p.clear=function(){s&&(clearTimeout(s),s=null)},p.debounceNextCall=function(h){c=h},p}function qg(t,e,n,r){var i=t[e];if(i){var a=i[$k]||i,s=i[$F],o=i[MF];if(o!==n||s!==r){if(n==null||!r)return t[e]=a;i=t[e]=CI(a,n,r==="debounce"),i[$k]=a,i[$F]=r,i[MF]=n}return i}}function x1(t,e){var n=t[e];n&&n[$k]&&(n.clear&&n.clear(),t[e]=n[$k])}var DF=on(),RF={itemStyle:Kp(Rte,!0),lineStyle:Kp(Dte,!0)},I7e={lineStyle:"stroke",itemStyle:"fill"};function Tne(t,e){var n=t.visualStyleMapper||RF[e];return n||(console.warn("Unknown style type '"+e+"'."),RF.itemStyle)}function Ene(t,e){var n=t.visualDrawType||I7e[e];return n||(console.warn("Unknown style type '"+e+"'."),"fill")}var O7e={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=t.getModel(r),a=Tne(t,r),s=a(i),o=i.getShallow("decal");o&&(n.setVisual("decal",o),o.dirty=!0);var l=Ene(t,r),d=s[l],c=gt(d)?d:null,f=s.fill==="auto"||s.stroke==="auto";if(!s[l]||c||f){var p=t.getColorFromPalette(t.name,null,e.getSeriesCount());s[l]||(s[l]=p,n.setVisual("colorFromPalette",!0)),s.fill=s.fill==="auto"||gt(s.fill)?p:s.fill,s.stroke=s.stroke==="auto"||gt(s.stroke)?p:s.stroke}if(n.setVisual("style",s),n.setVisual("drawType",l),!e.isSeriesFiltered(t)&&c)return n.setVisual("colorFromPalette",!1),{dataEach:function(h,m){var g=t.getDataParams(m),v=Oe({},s);v[l]=c(g),h.setItemVisual(m,"style",v)}}}},Dv=new An,L7e={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!(t.ignoreStyleOnData||e.isSeriesFiltered(t))){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=Tne(t,r),a=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(s,o){var l=s.getRawDataItem(o);if(l&&l[r]){Dv.option=l[r];var d=i(Dv),c=s.ensureUniqueItemVisual(o,"style");Oe(c,d),Dv.option.decal&&(s.setItemVisual(o,"decal",Dv.option.decal),Dv.option.decal.dirty=!0),a in d&&s.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},V7e={performRawSeries:!0,overallReset:function(t){var e=pt();t.eachSeries(function(n){var r=n.getColorBy();if(!n.isColorBySeries()){var i=n.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),DF(n).scope=a}}),t.eachSeries(function(n){if(!(n.isColorBySeries()||t.isSeriesFiltered(n))){var r=n.getRawData(),i={},a=n.getData(),s=DF(n).scope,o=n.visualStyleAccessPath||"itemStyle",l=Ene(n,o);a.each(function(d){var c=a.getRawIndex(d);i[c]=d}),r.each(function(d){var c=i[d],f=a.getItemVisual(c,"colorFromPalette");if(f){var p=a.ensureUniqueItemVisual(c,"style"),h=r.getName(d)||d+"",m=r.count();p[l]=n.getColorFromPalette(h,s,m)}})}})}},ex=Math.PI;function N7e(t,e){e=e||{},yt(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new kt,r=new sn({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(r);var i=new un({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new sn({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});n.add(a);var s;return e.showSpinner&&(s=new WC({shape:{startAngle:-ex/2,endAngle:-ex/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),s.animateShape(!0).when(1e3,{endAngle:ex*3/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:ex*3/2}).delay(300).start("circularInOut"),n.add(s)),n.resize=function(){var o=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,d=(t.getWidth()-l*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:l),c=t.getHeight()/2;e.showSpinner&&s.setShape({cx:d,cy:c}),a.setShape({x:d-l,y:c-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}var Mne=function(){function t(e,n,r,i){this._stageTaskMap=pt(),this.ecInstance=e,this.api=n,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return t.prototype.restoreData=function(e,n){e.restoreData(n),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},t.prototype.getPerformArgs=function(e,n){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!n&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,s=a?r.step:null,o=i&&i.modDataCount,l=o!=null?Math.ceil(o/s):null;return{step:s,modBy:l,modDataCount:o}}},t.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},t.prototype.updateStreamModes=function(e,n){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),s=r.progressiveEnabled&&n.incrementalPrepareRender&&a>=r.threshold,o=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:s,modDataCount:l,large:o}},t.prototype.restorePipelines=function(e){var n=this,r=n._pipelineMap=pt();e.eachSeries(function(i){var a=i.getProgressive(),s=i.uid;r.set(s,{id:s,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),n._pipe(i,i.dataTask)})},t.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,n=this.api.getModel(),r=this.api;oe(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),s="";Ta(!(i.reset&&i.overallReset),s),i.reset&&this._createSeriesStageTask(i,a,n,r),i.overallReset&&this._createOverallStageTask(i,a,n,r)},this)},t.prototype.prepareView=function(e,n,r,i){var a=e.renderTask,s=a.context;s.model=n,s.ecModel=r,s.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(n,a)},t.prototype.performDataProcessorTasks=function(e,n){this._performStageTasks(this._dataProcessorHandlers,e,n,{block:!0})},t.prototype.performVisualTasks=function(e,n,r){this._performStageTasks(this._visualHandlers,e,n,r)},t.prototype._performStageTasks=function(e,n,r,i){i=i||{};var a=!1,s=this;oe(e,function(l,d){if(!(i.visualType&&i.visualType!==l.visualType)){var c=s._stageTaskMap.get(l.uid),f=c.seriesTaskMap,p=c.overallTask;if(p){var h,m=p.agentStubMap;m.each(function(v){o(i,v)&&(v.dirty(),h=!0)}),h&&p.dirty(),s.updatePayload(p,r);var g=s.getPerformArgs(p,i.block);m.each(function(v){v.perform(g)}),p.perform(g)&&(a=!0)}else f&&f.each(function(v,_){o(i,v)&&v.dirty();var x=s.getPerformArgs(v,i.block);x.skip=!l.performRawSeries&&n.isSeriesFiltered(v.context.model),s.updatePayload(v,r),v.perform(x)&&(a=!0)})}});function o(l,d){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(d.__pipeline.id))}this.unfinished=a||this.unfinished},t.prototype.performSeriesTasks=function(e){var n;e.eachSeries(function(r){n=r.dataTask.perform()||n}),this.unfinished=n||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(e){var n=e.tail;do{if(n.__block){e.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},t.prototype.updatePayload=function(e,n){n!=="remain"&&(e.context.payload=n)},t.prototype._createSeriesStageTask=function(e,n,r,i){var a=this,s=n.seriesTaskMap,o=n.seriesTaskMap=pt(),l=e.seriesType,d=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(c):l?r.eachRawSeriesByType(l,c):d&&d(r,i).each(c);function c(f){var p=f.uid,h=o.set(p,s&&s.get(p)||h0({plan:U7e,reset:H7e,count:W7e}));h.context={model:f,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(f,h)}},t.prototype._createOverallStageTask=function(e,n,r,i){var a=this,s=n.overallTask=n.overallTask||h0({reset:j7e});s.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var o=s.agentStubMap,l=s.agentStubMap=pt(),d=e.seriesType,c=e.getTargetSeries,f=!0,p=!1,h="";Ta(!e.createOnAllSeries,h),d?r.eachRawSeriesByType(d,m):c?c(r,i).each(m):(f=!1,oe(r.getSeries(),m));function m(g){var v=g.uid,_=l.set(v,o&&o.get(v)||(p=!0,h0({reset:F7e,onDirty:z7e})));_.context={model:g,overallProgress:f},_.agent=s,_.__block=f,a._pipe(g,_)}p&&s.dirty()},t.prototype._pipe=function(e,n){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=n),i.tail&&i.tail.pipe(n),i.tail=n,n.__idxInPipeline=i.count++,n.__pipeline=i},t.wrapStageHandler=function(e,n){return gt(e)&&(e={overallReset:e,seriesType:G7e(e)}),e.uid=Fg("stageHandler"),n&&(e.visualType=n),e},t}();function j7e(t){t.overallReset(t.ecModel,t.api,t.payload)}function F7e(t){return t.overallProgress&&B7e}function B7e(){this.agent.dirty(),this.getDownstream().dirty()}function z7e(){this.agent&&this.agent.dirty()}function U7e(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function H7e(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=Dn(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?ze(e,function(n,r){return $ne(r)}):q7e}var q7e=$ne(0);function $ne(t){return function(e,n){var r=n.data,i=n.resetDefines[t];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function W7e(t){return t.data.count()}function G7e(t){Dk=null;try{t(w1,Dne)}catch(e){}return Dk}var w1={},Dne={},Dk;Rne(w1,_I);Rne(Dne,nne);w1.eachSeriesByType=w1.eachRawSeriesByType=function(t){Dk=t};w1.eachComponent=function(t){t.mainType==="series"&&t.subType&&(Dk=t.subType)};function Rne(t,e){for(var n in e.prototype)t[n]=Or}var PF=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Y7e={color:PF,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],PF]};var zi="#B9B8CE",IF="#100C2A",tx=function(){return{axisLine:{lineStyle:{color:zi}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},OF=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Pne={darkMode:!0,color:OF,backgroundColor:IF,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:zi},pageTextStyle:{color:zi}},textStyle:{color:zi},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:zi}},dataZoom:{borderColor:"#71708A",textStyle:{color:zi},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:zi}},timeline:{lineStyle:{color:zi},label:{color:zi},controlStyle:{color:zi,borderColor:zi}},calendar:{itemStyle:{color:IF},dayLabel:{color:zi},monthLabel:{color:zi},yearLabel:{color:zi}},timeAxis:tx(),logAxis:tx(),valueAxis:tx(),categoryAxis:tx(),line:{symbol:"circle"},graph:{color:OF},gauge:{title:{color:zi},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:zi},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Pne.categoryAxis.splitLine.show=!1;var K7e=function(){function t(){}return t.prototype.normalizeQuery=function(e){var n={},r={},i={};if(it(e)){var a=_l(e);n.mainType=a.main||null,n.subType=a.sub||null}else{var s=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};oe(e,function(l,d){for(var c=!1,f=0;f<s.length;f++){var p=s[f],h=d.lastIndexOf(p);if(h>0&&h===d.length-p.length){var m=d.slice(0,h);m!=="data"&&(n.mainType=m,n[p.toLowerCase()]=l,c=!0)}}o.hasOwnProperty(d)&&(r[d]=l,c=!0),c||(i[d]=l)})}return{cptQuery:n,dataQuery:r,otherQuery:i}},t.prototype.filter=function(e,n){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,s=r.model,o=r.view;if(!s||!o)return!0;var l=n.cptQuery,d=n.dataQuery;return c(l,s,"mainType")&&c(l,s,"subType")&&c(l,s,"index","componentIndex")&&c(l,s,"name")&&c(l,s,"id")&&c(d,a,"name")&&c(d,a,"dataIndex")&&c(d,a,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,n.otherQuery,i,a));function c(f,p,h,m){return f[h]==null||p[m||h]===f[h]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),o$=["symbol","symbolSize","symbolRotate","symbolOffset"],LF=o$.concat(["symbolKeepAspect"]),X7e={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var r={},i={},a=!1,s=0;s<o$.length;s++){var o=o$[s],l=t.get(o);gt(l)?(a=!0,i[o]=l):r[o]=l}if(r.symbol=r.symbol||t.defaultSymbol,n.setVisual(Oe({legendIcon:t.legendIcon||r.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},r)),e.isSeriesFiltered(t))return;var d=rn(i);function c(f,p){for(var h=t.getRawValue(p),m=t.getDataParams(p),g=0;g<d.length;g++){var v=d[g];f.setItemVisual(p,v,i[v](h,m))}}return{dataEach:a?c:null}}},Z7e={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.hasSymbolVisual||e.isSeriesFiltered(t))return;var n=t.getData();function r(i,a){for(var s=i.getItemModel(a),o=0;o<LF.length;o++){var l=LF[o],d=s.getShallow(l,!0);d!=null&&i.setItemVisual(a,l,d)}}return{dataEach:n.hasItemOption?r:null}}};function AI(t,e,n){switch(n){case"color":var r=t.getItemVisual(e,"style");return r[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n)}}function Eb(t,e){switch(e){case"color":var n=t.getVisual("style");return n[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}function Ine(t,e,n,r){switch(n){case"color":var i=t.ensureUniqueItemVisual(e,"style");i[t.getVisual("drawType")]=r,t.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(e,n,r);break}}function One(t,e){function n(r,i){var a=[];return r.eachComponent({mainType:"series",subType:t,query:i},function(s){a.push(s.seriesIndex)}),a}oe([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,s){i=Oe({},i),s.dispatchAction(Oe(i,{type:r[1],seriesIndex:n(a,i)}))})})}function Wh(t,e,n,r,i){var a=t+e;n.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(s){for(var o=s.seriesIndex,l=s.option.selectedMap,d=i.selected,c=0;c<d.length;c++)if(d[c].seriesIndex===o){var f=s.getData(),p=Yp(f,i.fromActionPayload);n.trigger(a,{type:a,seriesId:s.id,name:Be(p)?f.getName(p[0]):f.getName(p),selected:it(l)?l:Oe({},l)})}})}function Q7e(t,e,n){t.on("selectchanged",function(r){var i=n.getModel();r.isFromClick?(Wh("map","selectchanged",e,i,r),Wh("pie","selectchanged",e,i,r)):r.fromAction==="select"?(Wh("map","selected",e,i,r),Wh("pie","selected",e,i,r)):r.fromAction==="unselect"&&(Wh("map","unselected",e,i,r),Wh("pie","unselected",e,i,r))})}function sp(t,e,n){for(var r;t&&!(e(t)&&(r=t,n));)t=t.__hostTarget||t.parent;return r}var J7e=Math.round(Math.random()*9),eje=typeof Object.defineProperty=="function",tje=function(){function t(){this._id="__ec_inner_"+J7e++}return t.prototype.get=function(e){return this._guard(e)[this._id]},t.prototype.set=function(e,n){var r=this._guard(e);return eje?Object.defineProperty(r,this._id,{value:n,enumerable:!1,configurable:!0}):r[this._id]=n,this},t.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},t.prototype.has=function(e){return!!this._guard(e)[this._id]},t.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},t}(),nje=Zt.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,a=e.height/2;t.moveTo(n,r-a),t.lineTo(n+i,r+a),t.lineTo(n-i,r+a),t.closePath()}}),rje=Zt.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,a=e.height/2;t.moveTo(n,r-a),t.lineTo(n+i,r),t.lineTo(n,r+a),t.lineTo(n-i,r),t.closePath()}}),ije=Zt.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),s=i/2,o=s*s/(a-s),l=r-a+s+o,d=Math.asin(o/s),c=Math.cos(d)*s,f=Math.sin(d),p=Math.cos(d),h=s*.6,m=s*.7;t.moveTo(n-c,l+o),t.arc(n,l,s,Math.PI-d,Math.PI*2+d),t.bezierCurveTo(n+c-f*h,l+o+p*h,n,r-m,n,r),t.bezierCurveTo(n,r-m,n-c+f*h,l+o+p*h,n-c,l+o),t.closePath()}}),aje=Zt.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,r=e.width,i=e.x,a=e.y,s=r/3*2;t.moveTo(i,a),t.lineTo(i+s,a+n),t.lineTo(i,a+n/4*3),t.lineTo(i-s,a+n),t.lineTo(i,a),t.closePath()}}),sje={line:ii,rect:sn,roundRect:sn,square:sn,circle:hd,diamond:rje,pin:ije,arrow:aje,triangle:nje},oje={line:function(t,e,n,r,i){i.x1=t,i.y1=e+r/2,i.x2=t+n,i.y2=e+r/2},rect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r},roundRect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(t,e,n,r,i){var a=Math.min(n,r);i.x=t,i.y=e,i.width=a,i.height=a},circle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.r=Math.min(n,r)/2},diamond:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r},pin:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},arrow:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},triangle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r}},Rk={};oe(sje,function(t,e){Rk[e]=new t});var lje=Zt.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var r=xk(t,e,n),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=n.y+n.height*.4),r},buildPath:function(t,e,n){var r=e.symbolType;if(r!=="none"){var i=Rk[r];i||(r="rect",i=Rk[r]),oje[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(t,i.shape,n)}}});function uje(t,e){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=t:n.fill=t,this.markRedraw()}}function Ur(t,e,n,r,i,a,s){var o=t.indexOf("empty")===0;o&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var l;return t.indexOf("image://")===0?l=kte(t.slice(8),new qt(e,n,r,i),s?"center":"cover"):t.indexOf("path://")===0?l=GC(t.slice(7),{},new qt(e,n,r,i),s?"center":"cover"):l=new lje({shape:{symbolType:t,x:e,y:n,width:r,height:i}}),l.__isEmptyBrush=o,l.setColor=uje,a&&l.setColor(a),l}function Wg(t){return Be(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function mh(t,e){if(t!=null)return Be(t)||(t=[t,t]),[Qe(t[0],e[0])||0,Qe($t(t[1],t[0]),e[1])||0]}function op(t){return isFinite(t)}function dje(t,e,n){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,s=e.y2==null?0:e.y2;e.global||(r=r*n.width+n.x,i=i*n.width+n.x,a=a*n.height+n.y,s=s*n.height+n.y),r=op(r)?r:0,i=op(i)?i:1,a=op(a)?a:0,s=op(s)?s:0;var o=t.createLinearGradient(r,a,i,s);return o}function cje(t,e,n){var r=n.width,i=n.height,a=Math.min(r,i),s=e.x==null?.5:e.x,o=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(s=s*r+n.x,o=o*i+n.y,l=l*a),s=op(s)?s:.5,o=op(o)?o:.5,l=l>=0&&op(l)?l:.5;var d=t.createRadialGradient(s,o,0,s,o,l);return d}function l$(t,e,n){for(var r=e.type==="radial"?cje(t,e,n):dje(t,e,n),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function fje(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function nx(t){return parseInt(t,10)}function Tm(t,e,n){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],s=["paddingRight","paddingBottom"][e];if(n[r]!=null&&n[r]!=="auto")return parseFloat(n[r]);var o=document.defaultView.getComputedStyle(t);return(t[i]||nx(o[r])||nx(t.style[r]))-(nx(o[a])||0)-(nx(o[s])||0)|0}function pje(t,e){return!t||t==="solid"||!(e>0)?null:t==="dashed"?[4*e,2*e]:t==="dotted"?[e]:pn(t)?[t]:Be(t)?t:null}function TI(t){var e=t.style,n=e.lineDash&&e.lineWidth>0&&pje(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(n){var i=e.strokeNoScale&&t.getLineScale?t.getLineScale():1;i&&i!==1&&(n=ze(n,function(a){return a/i}),r/=i)}return[n,r]}var hje=new Bl(!0);function Pk(t){var e=t.stroke;return!(e==null||e==="none"||!(t.lineWidth>0))}function VF(t){return typeof t=="string"&&t!=="none"}function Ik(t){var e=t.fill;return e!=null&&e!=="none"}function NF(t,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function jF(t,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function u$(t,e,n){var r=JP(e.image,e.__image,n);if(FC(r)){var i=t.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*_w),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function mje(t,e,n,r){var i,a=Pk(n),s=Ik(n),o=n.strokePercent,l=o<1,d=!e.path;(!e.silent||l)&&d&&e.createPathProxy();var c=e.path||hje,f=e.__dirty;if(!r){var p=n.fill,h=n.stroke,m=s&&!!p.colorStops,g=a&&!!h.colorStops,v=s&&!!p.image,_=a&&!!h.image,x=void 0,w=void 0,k=void 0,S=void 0,C=void 0;(m||g)&&(C=e.getBoundingRect()),m&&(x=f?l$(t,p,C):e.__canvasFillGradient,e.__canvasFillGradient=x),g&&(w=f?l$(t,h,C):e.__canvasStrokeGradient,e.__canvasStrokeGradient=w),v&&(k=f||!e.__canvasFillPattern?u$(t,p,e):e.__canvasFillPattern,e.__canvasFillPattern=k),_&&(S=f||!e.__canvasStrokePattern?u$(t,h,e):e.__canvasStrokePattern,e.__canvasStrokePattern=k),m?t.fillStyle=x:v&&(k?t.fillStyle=k:s=!1),g?t.strokeStyle=w:_&&(S?t.strokeStyle=S:a=!1)}var A=e.getGlobalScale();c.setScale(A[0],A[1],e.segmentIgnoreThreshold);var M,$;t.setLineDash&&n.lineDash&&(i=TI(e),M=i[0],$=i[1]);var R=!0;(d||f&vm)&&(c.setDPR(t.dpr),l?c.setContext(null):(c.setContext(t),R=!1),c.reset(),e.buildPath(c,e.shape,r),c.toStatic(),e.pathUpdated()),R&&c.rebuildPath(t,l?o:1),M&&(t.setLineDash(M),t.lineDashOffset=$),r||(n.strokeFirst?(a&&jF(t,n),s&&NF(t,n)):(s&&NF(t,n),a&&jF(t,n))),M&&t.setLineDash([])}function gje(t,e,n){var r=e.__image=JP(n.image,e.__image,e,e.onload);if(!(!r||!FC(r))){var i=n.x||0,a=n.y||0,s=e.getWidth(),o=e.getHeight(),l=r.width/r.height;if(s==null&&o!=null?s=o*l:o==null&&s!=null?o=s/l:s==null&&o==null&&(s=r.width,o=r.height),n.sWidth&&n.sHeight){var d=n.sx||0,c=n.sy||0;t.drawImage(r,d,c,n.sWidth,n.sHeight,i,a,s,o)}else if(n.sx&&n.sy){var d=n.sx,c=n.sy,f=s-d,p=o-c;t.drawImage(r,d,c,f,p,i,a,s,o)}else t.drawImage(r,i,a,s,o)}}function vje(t,e,n){var r,i=n.text;if(i!=null&&(i+=""),i){t.font=n.font||$c,t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var a=void 0,s=void 0;t.setLineDash&&n.lineDash&&(r=TI(e),a=r[0],s=r[1]),a&&(t.setLineDash(a),t.lineDashOffset=s),n.strokeFirst?(Pk(n)&&t.strokeText(i,n.x,n.y),Ik(n)&&t.fillText(i,n.x,n.y)):(Ik(n)&&t.fillText(i,n.x,n.y),Pk(n)&&t.strokeText(i,n.x,n.y)),a&&t.setLineDash([])}}var FF=["shadowBlur","shadowOffsetX","shadowOffsetY"],BF=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Lne(t,e,n,r,i){var a=!1;if(!r&&(n=n||{},e===n))return!1;if(r||e.opacity!==n.opacity){za(t,i),a=!0;var s=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(s)?Ep.opacity:s}(r||e.blend!==n.blend)&&(a||(za(t,i),a=!0),t.globalCompositeOperation=e.blend||Ep.blend);for(var o=0;o<FF.length;o++){var l=FF[o];(r||e[l]!==n[l])&&(a||(za(t,i),a=!0),t[l]=t.dpr*(e[l]||0))}return(r||e.shadowColor!==n.shadowColor)&&(a||(za(t,i),a=!0),t.shadowColor=e.shadowColor||Ep.shadowColor),a}function zF(t,e,n,r,i){var a=k1(e,i.inHover),s=r?null:n&&k1(n,i.inHover)||{};if(a===s)return!1;var o=Lne(t,a,s,r,i);if((r||a.fill!==s.fill)&&(o||(za(t,i),o=!0),VF(a.fill)&&(t.fillStyle=a.fill)),(r||a.stroke!==s.stroke)&&(o||(za(t,i),o=!0),VF(a.stroke)&&(t.strokeStyle=a.stroke)),(r||a.opacity!==s.opacity)&&(o||(za(t,i),o=!0),t.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,d=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==d&&(o||(za(t,i),o=!0),t.lineWidth=d)}for(var c=0;c<BF.length;c++){var f=BF[c],p=f[0];(r||a[p]!==s[p])&&(o||(za(t,i),o=!0),t[p]=a[p]||f[1])}return o}function yje(t,e,n,r,i){return Lne(t,k1(e,i.inHover),n&&k1(n,i.inHover),r,i)}function Vne(t,e){var n=e.transform,r=t.dpr||1;n?t.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):t.setTransform(r,0,0,r,0,0)}function bje(t,e,n){for(var r=!1,i=0;i<t.length;i++){var a=t[i];r=r||a.isZeroArea(),Vne(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}n.allClipped=r}function _je(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]:!(!t&&!e)}var UF=1,HF=2,qF=3,WF=4;function xje(t){var e=Ik(t),n=Pk(t);return!(t.lineDash||!(+e^+n)||e&&typeof t.fill!="string"||n&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function za(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function k1(t,e){return e&&t.__hoverStyle||t.style}function Nne(t,e){lp(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function lp(t,e,n,r){var i=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){e.__dirty&=~ns,e.__isRendered=!1;return}var a=e.__clipPaths,s=n.prevElClipPaths,o=!1,l=!1;if((!s||fje(a,s))&&(s&&s.length&&(za(t,n),t.restore(),l=o=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),a&&a.length&&(za(t,n),t.save(),bje(a,t,n),o=!0),n.prevElClipPaths=a),n.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var d=n.prevEl;d||(l=o=!0);var c=e instanceof Zt&&e.autoBatch&&xje(e.style);o||_je(i,d.transform)?(za(t,n),Vne(t,e)):c||za(t,n);var f=k1(e,n.inHover);e instanceof Zt?(n.lastDrawType!==UF&&(l=!0,n.lastDrawType=UF),zF(t,e,d,l,n),(!c||!n.batchFill&&!n.batchStroke)&&t.beginPath(),mje(t,e,f,c),c&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):e instanceof hg?(n.lastDrawType!==qF&&(l=!0,n.lastDrawType=qF),zF(t,e,d,l,n),vje(t,e,f)):e instanceof xi?(n.lastDrawType!==HF&&(l=!0,n.lastDrawType=HF),yje(t,e,d,l,n),gje(t,e,f)):e.getTemporalDisplayables&&(n.lastDrawType!==WF&&(l=!0,n.lastDrawType=WF),wje(t,e,n)),c&&r&&za(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}function wje(t,e,n){var r=e.getDisplayables(),i=e.getTemporalDisplayables();t.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},s,o;for(s=e.getCursor(),o=r.length;s<o;s++){var l=r[s];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),lp(t,l,a,s===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var d=0,c=i.length;d<c;d++){var l=i[d];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),lp(t,l,a,d===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}var H4=new tje,GF=new yb(100),YF=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function vg(t,e){if(t==="none")return null;var n=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";t.dirty&&H4.delete(t);var a=H4.get(t);if(a)return a;var s=yt(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});s.backgroundColor==="none"&&(s.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=s.rotation,o.scaleX=o.scaleY=i?1:1/n,H4.set(t,o),t.dirty=!1,o;function l(d){for(var c=[n],f=!0,p=0;p<YF.length;++p){var h=s[YF[p]];if(h!=null&&!Be(h)&&!it(h)&&!pn(h)&&typeof h!="boolean"){f=!1;break}c.push(h)}var m;if(f){m=c.join(",")+(i?"-svg":"");var g=GF.get(m);g&&(i?d.svgElement=g:d.image=g)}var v=Fne(s.dashArrayX),_=kje(s.dashArrayY),x=jne(s.symbol),w=Sje(v),k=Bne(_),S=!i&&Dc.createCanvas(),C=i&&{tag:"g",attrs:{},key:"dcl",children:[]},A=$(),M;S&&(S.width=A.width*n,S.height=A.height*n,M=S.getContext("2d")),R(),f&&GF.put(m,S||C),d.image=S,d.svgElement=C,d.svgWidth=A.width,d.svgHeight=A.height;function $(){for(var I=1,B=0,j=w.length;B<j;++B)I=cj(I,w[B]);for(var z=1,B=0,j=x.length;B<j;++B)z=cj(z,x[B].length);I*=z;var F=k*w.length*x.length;return{width:Math.max(1,Math.min(I,s.maxTileWidth)),height:Math.max(1,Math.min(F,s.maxTileHeight))}}function R(){M&&(M.clearRect(0,0,S.width,S.height),s.backgroundColor&&(M.fillStyle=s.backgroundColor,M.fillRect(0,0,S.width,S.height)));for(var I=0,B=0;B<_.length;++B)I+=_[B];if(I<=0)return;for(var j=-k,z=0,F=0,q=0;j<A.height;){if(z%2===0){for(var N=F/2%x.length,O=0,V=0,L=0;O<A.width*2;){for(var U=0,B=0;B<v[q].length;++B)U+=v[q][B];if(U<=0)break;if(V%2===0){var G=(1-s.symbolSize)*.5,X=O+v[q][V]*G,re=j+_[z]*G,ee=v[q][V]*s.symbolSize,de=_[z]*s.symbolSize,se=L/2%x[N].length;te(X,re,ee,de,x[N][se])}O+=v[q][V],++L,++V,V===v[q].length&&(V=0)}++q,q===v.length&&(q=0)}j+=_[z],++F,++z,z===_.length&&(z=0)}function te(ne,ce,ve,Y,K){var H=i?1:n,ae=Ur(K,ne*H,ce*H,ve*H,Y*H,s.color,s.symbolKeepAspect);if(i){var be=r.painter.renderOneToVNode(ae);be&&C.children.push(be)}else Nne(M,ae)}}}}function jne(t){if(!t||t.length===0)return[["rect"]];if(it(t))return[[t]];for(var e=!0,n=0;n<t.length;++n)if(!it(t[n])){e=!1;break}if(e)return jne([t]);for(var r=[],n=0;n<t.length;++n)it(t[n])?r.push([t[n]]):r.push(t[n]);return r}function Fne(t){if(!t||t.length===0)return[[0,0]];if(pn(t)){var e=Math.ceil(t);return[[e,e]]}for(var n=!0,r=0;r<t.length;++r)if(!pn(t[r])){n=!1;break}if(n)return Fne([t]);for(var i=[],r=0;r<t.length;++r)if(pn(t[r])){var e=Math.ceil(t[r]);i.push([e,e])}else{var e=ze(t[r],function(o){return Math.ceil(o)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function kje(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(pn(t)){var e=Math.ceil(t);return[e,e]}var n=ze(t,function(r){return Math.ceil(r)});return t.length%2?n.concat(n):n}function Sje(t){return ze(t,function(e){return Bne(e)})}function Bne(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2===1?e*2:e}function Cje(t,e){t.eachRawSeries(function(n){if(!t.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(s){var o=r.getItemVisual(s,"decal");if(o){var l=r.ensureUniqueItemVisual(s,"style");l.decal=vg(o,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=vg(i,e)}}})}var el=new ao,zne={};function Aje(t,e){zne[t]=e}function Tje(t){return zne[t]}var Eje=1,Mje=800,$je=900,Dje=1e3,Rje=2e3,Pje=5e3,Une=1e3,Ije=1100,EI=2e3,Hne=3e3,Oje=4e3,aA=4500,Lje=4600,Vje=5e3,Nje=6e3,qne=7e3,jje={PROCESSOR:{FILTER:Dje,SERIES_FILTER:Mje,STATISTIC:Pje},VISUAL:{LAYOUT:Une,PROGRESSIVE_LAYOUT:Ije,GLOBAL:EI,CHART:Hne,POST_CHART_LAYOUT:Lje,COMPONENT:Oje,BRUSH:Vje,CHART_ITEM:aA,ARIA:Nje,DECAL:qne}},Bi="__flagInMainProcess",Oa="__pendingUpdate",q4="__needsUpdateStatus",KF=/^[a-zA-Z0-9_]+$/;function Wne(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.isDisposed()){this.id;return}return Yne(this,t,e)}}function Gne(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Yne(this,t,e)}}function Yne(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),ao.prototype[e].apply(t,n)}var Kne=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ao),Xne=Kne.prototype;Xne.on=Gne("on");Xne.off=Gne("off");var Gh,W4,rx,Cd,G4,Y4,K4,Rv,Pv,XF,ZF,X4,QF,ix,JF,bs,e9,Fje=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this,new K7e)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},it(r)&&(r=Zne[r]),a._dom=n;var s="canvas",o="auto",l=!1;i.ssr&&LLe(function(p){var h=Tt(p),m=h.dataIndex;if(m!=null){var g=pt();return g.set("series_index",h.seriesIndex),g.set("data_index",m),h.ssrType&&g.set("ssr_type",h.ssrType),g}});var d=a._zr=oj(n,{renderer:i.renderer||s,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:$t(i.useDirtyRect,l),useCoarsePointer:$t(i.useCoarsePointer,o),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=CI(ut(d.flush,d),17),r=xt(r),r&&ine(r,!0),a._theme=r,a._locale=sNe(i.locale||Pte),a._coordSysMgr=new Tb;var c=a._api=JF(a);function f(p,h){return p.__prio-h.__prio}return kw(Vk,f),kw(d$,f),a._scheduler=new Mne(a,c,d$,Vk),a._messageCenter=new Kne,a._initEvents(),a.resize=ut(a.resize,a),d.animation.on("frame",a._onframe,a),XF(d,a),ZF(d,a),pk(a),a}return e.prototype._onframe=function(){if(!this._disposed){e9(this);var n=this._scheduler;if(this[Oa]){var r=this[Oa].silent;this[Bi]=!0;try{Gh(this),Cd.update.call(this,null,this[Oa].updateParams)}catch(l){throw this[Bi]=!1,this[Oa]=null,l}this._zr.flush(),this[Bi]=!1,this[Oa]=null,Rv.call(this,r),Pv.call(this,r)}else if(n.unfinished){var i=Eje,a=this._model,s=this._api;n.unfinished=!1;do{var o=+new Date;n.performSeriesTasks(a),n.performDataProcessorTasks(a),Y4(this,a),n.performVisualTasks(a),ix(this,this._model,s,"remain",{}),i-=+new Date-o}while(i>0&&n.unfinished);n.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(n,r,i){if(!this[Bi]){if(this._disposed){this.id;return}var a,s,o;if(_t(r)&&(i=r.lazyUpdate,a=r.silent,s=r.replaceMerge,o=r.transition,r=r.notMerge),this[Bi]=!0,!this._model||r){var l=new DNe(this._api),d=this._theme,c=this._model=new _I;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,d,this._locale,l)}this._model.setOption(n,{replaceMerge:s},c$);var f={seriesTransition:o,optionChanged:!0};if(i)this[Oa]={silent:a,updateParams:f},this[Bi]=!1,this.getZr().wakeUp();else{try{Gh(this),Cd.update.call(this,null,f)}catch(p){throw this[Oa]=null,this[Bi]=!1,p}this._ssr||this._zr.flush(),this[Oa]=null,this[Bi]=!1,Rv.call(this,a),Pv.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Qt.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},e.prototype.renderToCanvas=function(n){n=n||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(n){n=n||{};var r=this._zr.painter;return r.renderToString({useViewBox:n.useViewBox})},e.prototype.getSvgDataURL=function(){if(Qt.svgSupported){var n=this._zr,r=n.storage.getDisplayList();return oe(r,function(i){i.stopAnimation(null,!0)}),n.painter.toDataURL()}},e.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var r=n.excludeComponents,i=this._model,a=[],s=this;oe(r,function(l){i.eachComponent({mainType:l},function(d){var c=s._componentsMap[d.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return oe(a,function(l){l.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var r=n.type==="svg",i=this.group,a=Math.min,s=Math.max,o=1/0;if(zje[i]){var l=o,d=o,c=-o,f=-o,p=[],h=n&&n.pixelRatio||this.getDevicePixelRatio();oe(t9,function(w,k){if(w.group===i){var S=r?w.getZr().painter.getSvgDom().innerHTML:w.renderToCanvas(xt(n)),C=w.getDom().getBoundingClientRect();l=a(C.left,l),d=a(C.top,d),c=s(C.right,c),f=s(C.bottom,f),p.push({dom:S,left:C.left,top:C.top})}}),l*=h,d*=h,c*=h,f*=h;var m=c-l,g=f-d,v=Dc.createCanvas(),_=oj(v,{renderer:r?"svg":"canvas"});if(_.resize({width:m,height:g}),r){var x="";return oe(p,function(w){var k=w.left-l,S=w.top-d;x+='<g transform="translate('+k+","+S+')">'+w.dom+"</g>"}),_.painter.getSvgRoot().innerHTML=x,n.connectedBackgroundColor&&_.painter.setBackgroundColor(n.connectedBackgroundColor),_.refreshImmediately(),_.painter.toDataURL()}else return n.connectedBackgroundColor&&_.add(new sn({shape:{x:0,y:0,width:m,height:g},style:{fill:n.connectedBackgroundColor}})),oe(p,function(w){var k=new xi({style:{x:w.left*h-l,y:w.top*h-d,image:w.dom}});_.add(k)}),_.refreshImmediately(),v.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},e.prototype.convertToPixel=function(n,r){return G4(this,"convertToPixel",n,r)},e.prototype.convertFromPixel=function(n,r){return G4(this,"convertFromPixel",n,r)},e.prototype.containPixel=function(n,r){if(this._disposed){this.id;return}var i=this._model,a,s=u0(i,n);return oe(s,function(o,l){l.indexOf("Models")>=0&&oe(o,function(d){var c=d.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(r);else if(l==="seriesModels"){var f=this._chartsMap[d.__viewId];f&&f.containPoint&&(a=a||f.containPoint(r,d))}},this)},this),!!a},e.prototype.getVisual=function(n,r){var i=this._model,a=u0(i,n,{defaultMainType:"series"}),s=a.seriesModel,o=s.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?o.indexOfRawIndex(a.dataIndex):null;return l!=null?AI(o,l,r):Eb(o,r)},e.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},e.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},e.prototype._initEvents=function(){var n=this;oe(Bje,function(r){var i=function(a){var s=n.getModel(),o=a.target,l,d=r==="globalout";if(d?l={}:o&&sp(o,function(m){var g=Tt(m);if(g&&g.dataIndex!=null){var v=g.dataModel||s.getSeriesByIndex(g.seriesIndex);return l=v&&v.getDataParams(g.dataIndex,g.dataType,o)||{},!0}else if(g.eventData)return l=Oe({},g.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var p=c&&f!=null&&s.getComponent(c,f),h=p&&n[p.mainType==="series"?"_chartsMap":"_componentsMap"][p.__viewId];l.event=a,l.type=r,n._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:p,view:h},n.trigger(r,l)}};i.zrEventfulCallAtLast=!0,n._zr.on(r,i,n)}),oe(Lk,function(r,i){n._messageCenter.on(i,function(a){this.trigger(i,a)},n)}),oe(["selectchanged"],function(r){n._messageCenter.on(r,function(i){this.trigger(r,i)},n)}),Q7e(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&n8e(this.getDom(),Uje,"");var r=this,i=r._api,a=r._model;oe(r._componentsViews,function(s){s.dispose(a,i)}),oe(r._chartsViews,function(s){s.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete t9[r.id]},e.prototype.resize=function(n){if(!this[Bi]){if(this._disposed){this.id;return}this._zr.resize(n);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=n&&n.silent;this[Oa]&&(a==null&&(a=this[Oa].silent),i=!0,this[Oa]=null),this[Bi]=!0;try{i&&Gh(this),Cd.update.call(this,{type:"resize",animation:Oe({duration:0},n&&n.animation)})}catch(s){throw this[Bi]=!1,s}this[Bi]=!1,Rv.call(this,a),Pv.call(this,a)}}},e.prototype.showLoading=function(n,r){if(this._disposed){this.id;return}if(_t(n)&&(r=n,n=""),n=n||"default",this.hideLoading(),!!f$[n]){var i=f$[n](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(n){var r=Oe({},n);return r.type=Lk[n.type],r},e.prototype.dispatchAction=function(n,r){if(this._disposed){this.id;return}if(_t(r)||(r={silent:!!r}),!!Ok[n.type]&&this._model){if(this[Bi]){this._pendingActions.push(n);return}var i=r.silent;K4.call(this,n,i);var a=r.flush;a?this._zr.flush():a!==!1&&Qt.browser.weChat&&this._throttledZrFlush(),Rv.call(this,i),Pv.call(this,i)}},e.prototype.updateLabelLayout=function(){el.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(n){if(this._disposed){this.id;return}var r=n.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Gh=function(f){var p=f._scheduler;p.restorePipelines(f._model),p.prepareStageTasks(),W4(f,!0),W4(f,!1),p.plan()},W4=function(f,p){for(var h=f._model,m=f._scheduler,g=p?f._componentsViews:f._chartsViews,v=p?f._componentsMap:f._chartsMap,_=f._zr,x=f._api,w=0;w<g.length;w++)g[w].__alive=!1;p?h.eachComponent(function(C,A){C!=="series"&&k(A)}):h.eachSeries(k);function k(C){var A=C.__requireNewView;C.__requireNewView=!1;var M="_ec_"+C.id+"_"+C.type,$=!A&&v[M];if(!$){var R=_l(C.type),I=p?hr.getClass(R.main,R.sub):Pn.getClass(R.sub);$=new I,$.init(h,x),v[M]=$,g.push($),_.add($.group)}C.__viewId=$.__id=M,$.__alive=!0,$.__model=C,$.group.__ecComponentInfo={mainType:C.mainType,index:C.componentIndex},!p&&m.prepareView($,C,h,x)}for(var w=0;w<g.length;){var S=g[w];S.__alive?w++:(!p&&S.renderTask.dispose(),_.remove(S.group),S.dispose(h,x),g.splice(w,1),v[S.__id]===S&&delete v[S.__id],S.__id=S.group.__ecComponentInfo=null)}},rx=function(f,p,h,m,g){var v=f._model;if(v.setUpdatePayload(h),!m){oe([].concat(f._componentsViews).concat(f._chartsViews),S);return}var _={};_[m+"Id"]=h[m+"Id"],_[m+"Index"]=h[m+"Index"],_[m+"Name"]=h[m+"Name"];var x={mainType:m,query:_};g&&(x.subType=g);var w=h.excludeSeriesId,k;w!=null&&(k=pt(),oe(Dn(w),function(C){var A=Yr(C,null);A!=null&&k.set(A,!0)})),v&&v.eachComponent(x,function(C){var A=k&&k.get(C.id)!=null;if(!A)if(Vj(h))if(C instanceof Zn)h.type===Mp&&!h.notBlur&&!C.get(["emphasis","disabled"])&&aVe(C,h,f._api);else{var M=aI(C.mainType,C.componentIndex,h.name,f._api),$=M.focusSelf,R=M.dispatchers;h.type===Mp&&$&&!h.notBlur&&WM(C.mainType,C.componentIndex,f._api),R&&oe(R,function(I){h.type===Mp?nd(I):rd(I)})}else YM(h)&&C instanceof Zn&&(lVe(C,h,f._api),Oj(C),bs(f))},f),v&&v.eachComponent(x,function(C){var A=k&&k.get(C.id)!=null;A||S(f[m==="series"?"_chartsMap":"_componentsMap"][C.__viewId])},f);function S(C){C&&C.__alive&&C[p]&&C[p](C.__model,v,f._api,h)}},Cd={prepareAndUpdate:function(f){Gh(this),Cd.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,p){var h=this._model,m=this._api,g=this._zr,v=this._coordSysMgr,_=this._scheduler;if(h){h.setUpdatePayload(f),_.restoreData(h,f),_.performSeriesTasks(h),v.create(h,m),_.performDataProcessorTasks(h,f),Y4(this,h),v.update(h,m),n(h),_.performVisualTasks(h,f),X4(this,h,m,f,p);var x=h.get("backgroundColor")||"transparent",w=h.get("darkMode");g.setBackgroundColor(x),w!=null&&w!=="auto"&&g.setDarkMode(w),el.trigger("afterupdate",h,m)}},updateTransform:function(f){var p=this,h=this._model,m=this._api;if(h){h.setUpdatePayload(f);var g=[];h.eachComponent(function(_,x){if(_!=="series"){var w=p.getViewOfComponentModel(x);if(w&&w.__alive)if(w.updateTransform){var k=w.updateTransform(x,h,m,f);k&&k.update&&g.push(w)}else g.push(w)}});var v=pt();h.eachSeries(function(_){var x=p._chartsMap[_.__viewId];if(x.updateTransform){var w=x.updateTransform(_,h,m,f);w&&w.update&&v.set(_.uid,1)}else v.set(_.uid,1)}),n(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0,dirtyMap:v}),ix(this,h,m,f,{},v),el.trigger("afterupdate",h,m)}},updateView:function(f){var p=this._model;p&&(p.setUpdatePayload(f),Pn.markUpdateMethod(f,"updateView"),n(p),this._scheduler.performVisualTasks(p,f,{setDirty:!0}),X4(this,p,this._api,f,{}),el.trigger("afterupdate",p,this._api))},updateVisual:function(f){var p=this,h=this._model;h&&(h.setUpdatePayload(f),h.eachSeries(function(m){m.getData().clearAllVisual()}),Pn.markUpdateMethod(f,"updateVisual"),n(h),this._scheduler.performVisualTasks(h,f,{visualType:"visual",setDirty:!0}),h.eachComponent(function(m,g){if(m!=="series"){var v=p.getViewOfComponentModel(g);v&&v.__alive&&v.updateVisual(g,h,p._api,f)}}),h.eachSeries(function(m){var g=p._chartsMap[m.__viewId];g.updateVisual(m,h,p._api,f)}),el.trigger("afterupdate",h,this._api))},updateLayout:function(f){Cd.update.call(this,f)}},G4=function(f,p,h,m){if(f._disposed){f.id;return}for(var g=f._model,v=f._coordSysMgr.getCoordinateSystems(),_,x=u0(g,h),w=0;w<v.length;w++){var k=v[w];if(k[p]&&(_=k[p](g,x,m))!=null)return _}},Y4=function(f,p){var h=f._chartsMap,m=f._scheduler;p.eachSeries(function(g){m.updateStreamModes(g,h[g.__viewId])})},K4=function(f,p){var h=this,m=this.getModel(),g=f.type,v=f.escapeConnect,_=Ok[g],x=_.actionInfo,w=(x.update||"update").split(":"),k=w.pop(),S=w[0]!=null&&_l(w[0]);this[Bi]=!0;var C=[f],A=!1;f.batch&&(A=!0,C=ze(f.batch,function(z){return z=yt(Oe({},z),f),z.batch=null,z}));var M=[],$,R=YM(f),I=Vj(f);if(I&&fte(this._api),oe(C,function(z){if($=_.action(z,h._model,h._api),$=$||Oe({},z),$.type=x.event||$.type,M.push($),I){var F=ZP(f),q=F.queryOptionMap,N=F.mainTypeSpecified,O=N?q.keys()[0]:"series";rx(h,k,z,O),bs(h)}else R?(rx(h,k,z,"series"),bs(h)):S&&rx(h,k,z,S.main,S.sub)}),k!=="none"&&!I&&!R&&!S)try{this[Oa]?(Gh(this),Cd.update.call(this,f),this[Oa]=null):Cd[k].call(this,f)}catch(z){throw this[Bi]=!1,z}if(A?$={type:x.event||g,escapeConnect:v,batch:M}:$=M[0],this[Bi]=!1,!p){var B=this._messageCenter;if(B.trigger($.type,$),R){var j={type:"selectchanged",escapeConnect:v,selected:uVe(m),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};B.trigger(j.type,j)}}},Rv=function(f){for(var p=this._pendingActions;p.length;){var h=p.shift();K4.call(this,h,f)}},Pv=function(f){!f&&this.trigger("updated")},XF=function(f,p){f.on("rendered",function(h){p.trigger("rendered",h),f.animation.isFinished()&&!p[Oa]&&!p._scheduler.unfinished&&!p._pendingActions.length&&p.trigger("finished")})},ZF=function(f,p){f.on("mouseover",function(h){var m=h.target,g=sp(m,g1);g&&(sVe(g,h,p._api),bs(p))}).on("mouseout",function(h){var m=h.target,g=sp(m,g1);g&&(oVe(g,h,p._api),bs(p))}).on("click",function(h){var m=h.target,g=sp(m,function(x){return Tt(x).dataIndex!=null},!0);if(g){var v=g.selected?"unselect":"select",_=Tt(g);p._api.dispatchAction({type:v,dataType:_.dataType,dataIndexInside:_.dataIndex,seriesIndex:_.seriesIndex,isFromClick:!0})}})};function n(f){f.clearColorPalette(),f.eachSeries(function(p){p.clearColorPalette()})}function r(f){var p=[],h=[],m=!1;if(f.eachComponent(function(x,w){var k=w.get("zlevel")||0,S=w.get("z")||0,C=w.getZLevelKey();m=m||!!C,(x==="series"?h:p).push({zlevel:k,z:S,idx:w.componentIndex,type:x,key:C})}),m){var g=p.concat(h),v,_;kw(g,function(x,w){return x.zlevel===w.zlevel?x.z-w.z:x.zlevel-w.zlevel}),oe(g,function(x){var w=f.getComponent(x.type,x.idx),k=x.zlevel,S=x.key;v!=null&&(k=Math.max(v,k)),S?(k===v&&S!==_&&k++,_=S):_&&(k===v&&k++,_=""),v=k,w.setZLevel(k)})}}X4=function(f,p,h,m,g){r(p),QF(f,p,h,m,g),oe(f._chartsViews,function(v){v.__alive=!1}),ix(f,p,h,m,g),oe(f._chartsViews,function(v){v.__alive||v.remove(p,h)})},QF=function(f,p,h,m,g,v){oe(v||f._componentsViews,function(_){var x=_.__model;d(x,_),_.render(x,p,h,m),o(x,_),c(x,_)})},ix=function(f,p,h,m,g,v){var _=f._scheduler;g=Oe(g||{},{updatedSeries:p.getSeries()}),el.trigger("series:beforeupdate",p,h,g);var x=!1;p.eachSeries(function(w){var k=f._chartsMap[w.__viewId];k.__alive=!0;var S=k.renderTask;_.updatePayload(S,m),d(w,k),v&&v.get(w.uid)&&S.dirty(),S.perform(_.getPerformArgs(S))&&(x=!0),k.group.silent=!!w.get("silent"),s(w,k),Oj(w)}),_.unfinished=x||_.unfinished,el.trigger("series:layoutlabels",p,h,g),el.trigger("series:transition",p,h,g),p.eachSeries(function(w){var k=f._chartsMap[w.__viewId];o(w,k),c(w,k)}),a(f,p),el.trigger("series:afterupdate",p,h,g)},bs=function(f){f[q4]=!0,f.getZr().wakeUp()},e9=function(f){f[q4]&&(f.getZr().storage.traverse(function(p){jm(p)||i(p)}),f[q4]=!1)};function i(f){for(var p=[],h=f.currentStates,m=0;m<h.length;m++){var g=h[m];g==="emphasis"||g==="blur"||g==="select"||p.push(g)}f.selected&&f.states.select&&p.push("select"),f.hoverState===UC&&f.states.emphasis?p.push("emphasis"):f.hoverState===xb&&f.states.blur&&p.push("blur"),f.useStates(p)}function a(f,p){var h=f._zr,m=h.storage,g=0;m.traverse(function(v){v.isGroup||g++}),g>p.get("hoverLayerThreshold")&&!Qt.node&&!Qt.worker&&p.eachSeries(function(v){if(!v.preventUsingHoverLayer){var _=f._chartsMap[v.__viewId];_.__alive&&_.eachRendered(function(x){x.states.emphasis&&(x.states.emphasis.hoverLayer=!0)})}})}function s(f,p){var h=f.get("blendMode")||null;p.eachRendered(function(m){m.isGroup||(m.style.blend=h)})}function o(f,p){if(!f.preventAutoZ){var h=f.get("z")||0,m=f.get("zlevel")||0;p.eachRendered(function(g){return l(g,h,m,-1/0),!0})}}function l(f,p,h,m){var g=f.getTextContent(),v=f.getTextGuideLine(),_=f.isGroup;if(_)for(var x=f.childrenRef(),w=0;w<x.length;w++)m=Math.max(l(x[w],p,h,m),m);else f.z=p,f.zlevel=h,m=Math.max(f.z2,m);if(g&&(g.z=p,g.zlevel=h,isFinite(m)&&(g.z2=m+2)),v){var k=f.textGuideLineConfig;v.z=p,v.zlevel=h,isFinite(m)&&(v.z2=m+(k&&k.showAbove?1:-1))}return m}function d(f,p){p.eachRendered(function(h){if(!jm(h)){var m=h.getTextContent(),g=h.getTextGuideLine();h.stateTransition&&(h.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),h.hasState()?(h.prevStates=h.currentStates,h.clearStates()):h.prevStates&&(h.prevStates=null)}})}function c(f,p){var h=f.getModel("stateAnimation"),m=f.isAnimationEnabled(),g=h.get("duration"),v=g>0?{duration:g,delay:h.get("delay"),easing:h.get("easing")}:null;p.eachRendered(function(_){if(_.states&&_.states.emphasis){if(jm(_))return;if(_ instanceof Zt&&hVe(_),_.__dirty){var x=_.prevStates;x&&_.useStates(x)}if(m){_.stateTransition=v;var w=_.getTextContent(),k=_.getTextGuideLine();w&&(w.stateTransition=v),k&&(k.stateTransition=v)}_.__dirty&&i(_)}})}JF=function(f){return new(function(p){Ce(h,p);function h(){return p!==null&&p.apply(this,arguments)||this}return h.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},h.prototype.getComponentByElement=function(m){for(;m;){var g=m.__ecComponentInfo;if(g!=null)return f._model.getComponent(g.mainType,g.index);m=m.parent}},h.prototype.enterEmphasis=function(m,g){nd(m,g),bs(f)},h.prototype.leaveEmphasis=function(m,g){rd(m,g),bs(f)},h.prototype.enterBlur=function(m){lte(m),bs(f)},h.prototype.leaveBlur=function(m){iI(m),bs(f)},h.prototype.enterSelect=function(m){ute(m),bs(f)},h.prototype.leaveSelect=function(m){dte(m),bs(f)},h.prototype.getModel=function(){return f.getModel()},h.prototype.getViewOfComponentModel=function(m){return f.getViewOfComponentModel(m)},h.prototype.getViewOfSeriesModel=function(m){return f.getViewOfSeriesModel(m)},h}(nne))(f)}}(),e}(ao),MI=Fje.prototype;MI.on=Wne("on");MI.off=Wne("off");MI.one=function(t,e,n){var r=this;function i(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];e&&e.apply&&e.apply(this,a),r.off(t,i)}this.on.call(this,t,i,n)};var Bje=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Ok={},Lk={},d$=[],c$=[],Vk=[],Zne={},f$={},t9={},zje={},Uje="_echarts_instance_";function Qne(t,e){Zne[t]=e}function Jne(t){Yt(c$,t)<0&&c$.push(t)}function ere(t,e){DI(d$,t,e,Rje)}function Hje(t){$I("afterinit",t)}function qje(t){$I("afterupdate",t)}function $I(t,e){el.on(t,e)}function Yl(t,e,n){gt(e)&&(n=e,e="");var r=_t(t)?t.type:[t,t={event:e}][0];t.event=(t.event||r).toLowerCase(),e=t.event,!Lk[e]&&(Ta(KF.test(r)&&KF.test(e)),Ok[r]||(Ok[r]={action:n,actionInfo:t}),Lk[e]=r)}function Wje(t,e){Tb.register(t,e)}function Gje(t,e){DI(Vk,t,e,Une,"layout")}function gh(t,e){DI(Vk,t,e,Hne,"visual")}var n9=[];function DI(t,e,n,r,i){if((gt(e)||_t(e))&&(n=e,e=r),!(Yt(n9,n)>=0)){n9.push(n);var a=Mne.wrapStageHandler(n,i);a.__prio=e,a.__raw=n,t.push(a)}}function tre(t,e){f$[t]=e}function Yje(t,e,n){var r=Tje("registerMap");r&&r(t,e,n)}var Kje=u7e;gh(EI,O7e);gh(aA,L7e);gh(aA,V7e);gh(EI,X7e);gh(aA,Z7e);gh(qne,Cje);Jne(ine);ere($je,UNe);tre("default",N7e);Yl({type:Mp,event:Mp,update:Mp},Or);Yl({type:Ew,event:Ew,update:Ew},Or);Yl({type:d0,event:d0,update:d0},Or);Yl({type:Mw,event:Mw,update:Mw},Or);Yl({type:c0,event:c0,update:c0},Or);Qne("light",Y7e);Qne("dark",Pne);var r9=[],Xje={registerPreprocessor:Jne,registerProcessor:ere,registerPostInit:Hje,registerPostUpdate:qje,registerUpdateLifecycle:$I,registerAction:Yl,registerCoordinateSystem:Wje,registerLayout:Gje,registerVisual:gh,registerTransform:Kje,registerLoading:tre,registerMap:Yje,registerImpl:Aje,PRIORITY:jje,ComponentModel:tn,ComponentView:hr,SeriesModel:Zn,ChartView:Pn,registerComponentModel:function(t){tn.registerClass(t)},registerComponentView:function(t){hr.registerClass(t)},registerSeriesModel:function(t){Zn.registerClass(t)},registerChartView:function(t){Pn.registerClass(t)},registerSubTypeDefaulter:function(t,e){tn.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){ILe(t,e)}};function Kt(t){if(Be(t)){oe(t,function(e){Kt(e)});return}Yt(r9,t)>=0||(r9.push(t),gt(t)&&(t={install:t}),t.install(Xje))}function Iv(t){return t==null?0:t.length||1}function i9(t){return t}var id=function(){function t(e,n,r,i,a,s){this._old=e,this._new=n,this._oldKeyGetter=r||i9,this._newKeyGetter=i||i9,this.context=a,this._diffModeMultiple=s==="multiple"}return t.prototype.add=function(e){return this._add=e,this},t.prototype.update=function(e){return this._update=e,this},t.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},t.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},t.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},t.prototype.remove=function(e){return this._remove=e,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var e=this._old,n=this._new,r={},i=new Array(e.length),a=new Array(n.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(n,r,a,"_newKeyGetter");for(var s=0;s<e.length;s++){var o=i[s],l=r[o],d=Iv(l);if(d>1){var c=l.shift();l.length===1&&(r[o]=l[0]),this._update&&this._update(c,s)}else d===1?(r[o]=null,this._update&&this._update(l,s)):this._remove&&this._remove(s)}this._performRestAdd(a,r)},t.prototype._executeMultiple=function(){var e=this._old,n=this._new,r={},i={},a=[],s=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(n,i,s,"_newKeyGetter");for(var o=0;o<a.length;o++){var l=a[o],d=r[l],c=i[l],f=Iv(d),p=Iv(c);if(f>1&&p===1)this._updateManyToOne&&this._updateManyToOne(c,d),i[l]=null;else if(f===1&&p>1)this._updateOneToMany&&this._updateOneToMany(c,d),i[l]=null;else if(f===1&&p===1)this._update&&this._update(c,d),i[l]=null;else if(f>1&&p>1)this._updateManyToMany&&this._updateManyToMany(c,d),i[l]=null;else if(f>1)for(var h=0;h<f;h++)this._remove&&this._remove(d[h]);else this._remove&&this._remove(d)}this._performRestAdd(s,i)},t.prototype._performRestAdd=function(e,n){for(var r=0;r<e.length;r++){var i=e[r],a=n[i],s=Iv(a);if(s>1)for(var o=0;o<s;o++)this._add&&this._add(a[o]);else s===1&&this._add&&this._add(a);n[i]=null}},t.prototype._initIndexMap=function(e,n,r,i){for(var a=this._diffModeMultiple,s=0;s<e.length;s++){var o="_ec_"+this[i](e[s],s);if(a||(r[s]=o),!!n){var l=n[o],d=Iv(l);d===0?(n[o]=s,a&&r.push(o)):d===1?n[o]=[l,s]:l.push(s)}}},t}(),Zje=function(){function t(e,n){this._encode=e,this._schema=n}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function Qje(t,e){var n={},r=n.encode={},i=pt(),a=[],s=[],o={};oe(t.dimensions,function(p){var h=t.getDimensionInfo(p),m=h.coordDim;if(m){var g=h.coordDimIndex;Z4(r,m)[g]=p,h.isExtraCoord||(i.set(m,1),Jje(h.type)&&(a[0]=p),Z4(o,m)[g]=t.getDimensionIndex(h.name)),h.defaultTooltip&&s.push(p)}Kte.each(function(v,_){var x=Z4(r,_),w=h.otherDims[_];w!=null&&w!==!1&&(x[w]=h.name)})});var l=[],d={};i.each(function(p,h){var m=r[h];d[h]=m[0],l=l.concat(m)}),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=ze(l,function(p){return t.getDimensionInfo(p).storeDimIndex}),n.encodeFirstDimNotExtra=d;var c=r.label;c&&c.length&&(a=c.slice());var f=r.tooltip;return f&&f.length?s=f.slice():s.length||(s=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=s,n.userOutput=new Zje(o,e),n}function Z4(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function Nk(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function Jje(t){return!(t==="ordinal"||t==="time")}var Iw=function(){function t(e){this.otherDims={},e!=null&&Oe(this,e)}return t}(),eFe=on(),tFe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},nre=function(){function t(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=are(this.source)))},t.prototype.getSourceDimensionIndex=function(e){return $t(this._dimNameMap.get(e),-1)},t.prototype.getSourceDimension=function(e){var n=this.source.dimensionsDefine;if(n)return n[e]},t.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,n=sne(this.source),r=!sre(e),i="",a=[],s=0,o=0;s<e;s++){var l=void 0,d=void 0,c=void 0,f=this.dimensions[o];if(f&&f.storeDimIndex===s)l=n?f.name:null,d=f.type,c=f.ordinalMeta,o++;else{var p=this.getSourceDimension(s);p&&(l=n?p.name:null,d=p.type)}a.push({property:l,type:d,ordinalMeta:c}),n&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=tFe[d]||"f",c&&(i+=c.uid),i+="$"}var h=this.source,m=[h.seriesLayoutBy,h.startIndex,i].join("$$");return{dimensions:a,hash:m}},t.prototype.makeOutputDimensionNames=function(){for(var e=[],n=0,r=0;n<this._fullDimCount;n++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===n)a.isCalculationCoord||(i=a.name),r++;else{var s=this.getSourceDimension(n);s&&(i=s.name)}e.push(i)}return e},t.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function rre(t){return t instanceof nre}function ire(t){for(var e=pt(),n=0;n<(t||[]).length;n++){var r=t[n],i=_t(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,n)}return e}function are(t){var e=eFe(t);return e.dimNameMap||(e.dimNameMap=ire(t.dimensionsDefine))}function sre(t){return t>30}var Ov=_t,Ad=ze,nFe=typeof Int32Array=="undefined"?Array:Int32Array,rFe="e\0\0",a9=-1,iFe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],aFe=["_approximateExtent"],s9,ax,Lv,Vv,Q4,Nv,J4,ba=function(){function t(e,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,i=!1;rre(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},s=[],o={},l=!1,d={},c=0;c<r.length;c++){var f=r[c],p=it(f)?new Iw({name:f}):f instanceof Iw?f:new Iw(f),h=p.name;p.type=p.type||"float",p.coordDim||(p.coordDim=h,p.coordDimIndex=0);var m=p.otherDims=p.otherDims||{};s.push(h),a[h]=p,d[h]!=null&&(l=!0),p.createInvertedIndices&&(o[h]=[]),m.itemName===0&&(this._nameDimIdx=c),m.itemId===0&&(this._idDimIdx=c),i&&(p.storeDimIndex=c)}if(this.dimensions=s,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=n,this._invertedIndicesMap=o,this._dimOmitted){var g=this._dimIdxToName=pt();oe(s,function(v){g.set(a[v].storeDimIndex,v)})}}return t.prototype.getDimension=function(e){var n=this._recognizeDimIndex(e);if(n==null)return e;if(n=e,!this._dimOmitted)return this.dimensions[n];var r=this._dimIdxToName.get(n);if(r!=null)return r;var i=this._schema.getSourceDimension(n);if(i)return i.name},t.prototype.getDimensionIndex=function(e){var n=this._recognizeDimIndex(e);if(n!=null)return n;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},t.prototype._recognizeDimIndex=function(e){if(pn(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},t.prototype._getStoreDimIndex=function(e){var n=this.getDimensionIndex(e);return n},t.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},t.prototype._initGetDimensionInfo=function(e){var n=this._dimInfos;this._getDimInfo=e?function(r){return n.hasOwnProperty(r)?n[r]:void 0}:function(r){return n[r]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(e,n){var r=this._dimSummary;if(n==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[n]:null},t.prototype.mapDimensionsAll=function(e){var n=this._dimSummary,r=n.encode[e];return(r||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(e,n,r){var i=this,a;if(e instanceof r$&&(a=e),!a){var s=this.dimensions,o=xI(e)||ta(e)?new one(e,s.length):e;a=new r$;var l=Ad(s,function(d){return{type:i._dimInfos[d].type,property:d}});a.initData(o,l,r)}this._store=a,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=Qje(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(e){var n=this._store.appendData(e);this._doInit(n[0],n[1])},t.prototype.appendValues=function(e,n){var r=this._store.appendValues(e,n&&n.length),i=r.start,a=r.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var o=i;o<a;o++){var l=o-i;this._nameList[o]=n[l],s&&J4(this,o)}},t.prototype._updateOrdinalMeta=function(){for(var e=this._store,n=this.dimensions,r=0;r<n.length;r++){var i=this._dimInfos[n[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==bc&&!e.fillStorage},t.prototype._doInit=function(e,n){if(!(e>=n)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,s=this._idList,o=i.getSource().sourceFormat,l=o===so;if(l&&!i.pure)for(var d=[],c=e;c<n;c++){var f=i.getItem(c,d);if(!this.hasItemOption&&ULe(f)&&(this.hasItemOption=!0),f){var p=f.name;a[c]==null&&p!=null&&(a[c]=Yr(p,null));var h=f.id;s[c]==null&&h!=null&&(s[c]=Yr(h,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<n;c++)J4(this,c);s9(this)}},t.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.setApproximateExtent=function(e,n){n=this.getDimension(n),this._approximateExtent[n]=e.slice()},t.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},t.prototype.setCalculationInfo=function(e,n){Ov(e)?Oe(this._calculationInfo,e):this._calculationInfo[e]=n},t.prototype.getName=function(e){var n=this.getRawIndex(e),r=this._nameList[n];return r==null&&this._nameDimIdx!=null&&(r=Lv(this,this._nameDimIdx,n)),r==null&&(r=""),r},t.prototype._getCategory=function(e,n){var r=this._store.get(e,n),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},t.prototype.getId=function(e){return ax(this,this.getRawIndex(e))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,n)},t.prototype.getByRawIndex=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,n)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},t.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},t.prototype.getValues=function(e,n){var r=this,i=this._store;return Be(e)?i.getValues(Ad(e,function(a){return r._getStoreDimIndex(a)}),n):i.getValues(e)},t.prototype.hasValue=function(e){for(var n=this._dimSummary.dataDimIndicesOnCoord,r=0,i=n.length;r<i;r++)if(isNaN(this._store.get(n[r],e)))return!1;return!0},t.prototype.indexOfName=function(e){for(var n=0,r=this._store.count();n<r;n++)if(this.getName(n)===e)return n;return-1},t.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},t.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},t.prototype.rawIndexOf=function(e,n){var r=e&&this._invertedIndicesMap[e],i=r&&r[n];return i==null||isNaN(i)?a9:i},t.prototype.indicesOfNearest=function(e,n,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),n,r)},t.prototype.each=function(e,n,r){gt(e)&&(r=n,n=e,e=[]);var i=r||this,a=Ad(Vv(e),this._getStoreDimIndex,this);this._store.each(a,i?ut(n,i):n)},t.prototype.filterSelf=function(e,n,r){gt(e)&&(r=n,n=e,e=[]);var i=r||this,a=Ad(Vv(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?ut(n,i):n),this},t.prototype.selectRange=function(e){var n=this,r={},i=rn(e);return oe(i,function(a){var s=n._getStoreDimIndex(a);r[s]=e[a]}),this._store=this._store.selectRange(r),this},t.prototype.mapArray=function(e,n,r){gt(e)&&(r=n,n=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(n&&n.apply(this,arguments))},r),i},t.prototype.map=function(e,n,r,i){var a=r||i||this,s=Ad(Vv(e),this._getStoreDimIndex,this),o=Nv(this);return o._store=this._store.map(s,a?ut(n,a):n),o},t.prototype.modify=function(e,n,r,i){var a=r||i||this,s=Ad(Vv(e),this._getStoreDimIndex,this);this._store.modify(s,a?ut(n,a):n)},t.prototype.downSample=function(e,n,r,i){var a=Nv(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),n,r,i),a},t.prototype.minmaxDownSample=function(e,n){var r=Nv(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),n),r},t.prototype.lttbDownSample=function(e,n){var r=Nv(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),n),r},t.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},t.prototype.getItemModel=function(e){var n=this.hostModel,r=this.getRawDataItem(e);return new An(r,n,n&&n.ecModel)},t.prototype.diff=function(e){var n=this;return new id(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return ax(e,r)},function(r){return ax(n,r)})},t.prototype.getVisual=function(e){var n=this._visual;return n&&n[e]},t.prototype.setVisual=function(e,n){this._visual=this._visual||{},Ov(e)?Oe(this._visual,e):this._visual[e]=n},t.prototype.getItemVisual=function(e,n){var r=this._itemVisuals[e],i=r&&r[n];return i==null?this.getVisual(n):i},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(e,n){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[n];return a==null&&(a=this.getVisual(n),Be(a)?a=a.slice():Ov(a)&&(a=Oe({},a)),i[n]=a),a},t.prototype.setItemVisual=function(e,n,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,Ov(n)?Oe(i,n):i[n]=r},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(e,n){Ov(e)?Oe(this._layout,e):this._layout[e]=n},t.prototype.getLayout=function(e){return this._layout[e]},t.prototype.getItemLayout=function(e){return this._itemLayouts[e]},t.prototype.setItemLayout=function(e,n,r){this._itemLayouts[e]=r?Oe(this._itemLayouts[e]||{},n):n},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(e,n){var r=this.hostModel&&this.hostModel.seriesIndex;HM(r,this.dataType,e,n),this._graphicEls[e]=n},t.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},t.prototype.eachItemGraphicEl=function(e,n){oe(this._graphicEls,function(r,i){r&&e&&e.call(n,r,i)})},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:Ad(this.dimensions,this._getDimInfo,this),this.hostModel)),Q4(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(e,n){var r=this[e];gt(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return n.apply(this,[i].concat(BP(arguments)))})},t.internalField=function(){s9=function(e){var n=e._invertedIndicesMap;oe(n,function(r,i){var a=e._dimInfos[i],s=a.ordinalMeta,o=e._store;if(s){r=n[i]=new nFe(s.categories.length);for(var l=0;l<r.length;l++)r[l]=a9;for(var l=0;l<o.count();l++)r[o.get(a.storeDimIndex,l)]=l}})},Lv=function(e,n,r){return Yr(e._getCategory(n,r),null)},ax=function(e,n){var r=e._idList[n];return r==null&&e._idDimIdx!=null&&(r=Lv(e,e._idDimIdx,n)),r==null&&(r=rFe+n),r},Vv=function(e){return Be(e)||(e=e!=null?[e]:[]),e},Nv=function(e){var n=new t(e._schema?e._schema:Ad(e.dimensions,e._getDimInfo,e),e.hostModel);return Q4(n,e),n},Q4=function(e,n){oe(iFe.concat(n.__wrappedMethods||[]),function(r){n.hasOwnProperty(r)&&(e[r]=n[r])}),e.__wrappedMethods=n.__wrappedMethods,oe(aFe,function(r){e[r]=xt(n[r])}),e._calculationInfo=Oe({},n._calculationInfo)},J4=function(e,n){var r=e._nameList,i=e._idList,a=e._nameDimIdx,s=e._idDimIdx,o=r[n],l=i[n];if(o==null&&a!=null&&(r[n]=o=Lv(e,a,n)),l==null&&s!=null&&(i[n]=l=Lv(e,s,n)),l==null&&o!=null){var d=e._nameRepeatCount,c=d[o]=(d[o]||0)+1;l=o,c>1&&(l+="__ec__"+c),i[n]=l}}}(),t}();function Mb(t,e){xI(t)||(t=wI(t)),e=e||{};var n=e.coordDimensions||[],r=e.dimensionsDefine||t.dimensionsDefine||[],i=pt(),a=[],s=oFe(t,n,r,e.dimensionsCount),o=e.canOmitUnusedDimensions&&sre(s),l=r===t.dimensionsDefine,d=l?are(t):ire(r),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(t,s));for(var f=pt(c),p=new mne(s),h=0;h<p.length;h++)p[h]=-1;function m($){var R=p[$];if(R<0){var I=r[$],B=_t(I)?I:{name:I},j=new Iw,z=B.name;z!=null&&d.get(z)!=null&&(j.name=j.displayName=z),B.type!=null&&(j.type=B.type),B.displayName!=null&&(j.displayName=B.displayName);var F=a.length;return p[$]=F,j.storeDimIndex=$,a.push(j),j}return a[R]}if(!o)for(var h=0;h<s;h++)m(h);f.each(function($,R){var I=Dn($).slice();if(I.length===1&&!it(I[0])&&I[0]<0){f.set(R,!1);return}var B=f.set(R,[]);oe(I,function(j,z){var F=it(j)?d.get(j):j;F!=null&&F<s&&(B[z]=F,v(m(F),R,z))})});var g=0;oe(n,function($){var R,I,B,j;if(it($))R=$,j={};else{j=$,R=j.name;var z=j.ordinalMeta;j.ordinalMeta=null,j=Oe({},j),j.ordinalMeta=z,I=j.dimsDef,B=j.otherDims,j.name=j.coordDim=j.coordDimIndex=j.dimsDef=j.otherDims=null}var F=f.get(R);if(F!==!1){if(F=Dn(F),!F.length)for(var q=0;q<(I&&I.length||1);q++){for(;g<s&&m(g).coordDim!=null;)g++;g<s&&F.push(g++)}oe(F,function(N,O){var V=m(N);if(l&&j.type!=null&&(V.type=j.type),v(yt(V,j),R,O),V.name==null&&I){var L=I[O];!_t(L)&&(L={name:L}),V.name=V.displayName=L.name,V.defaultTooltip=L.defaultTooltip}B&&yt(V.otherDims,B)})}});function v($,R,I){Kte.get(R)!=null?$.otherDims[R]=I:($.coordDim=R,$.coordDimIndex=I,i.set(R,!0))}var _=e.generateCoord,x=e.generateCoordCount,w=x!=null;x=_?x||1:0;var k=_||"value";function S($){$.name==null&&($.name=$.coordDim)}if(o)oe(a,function($){S($)}),a.sort(function($,R){return $.storeDimIndex-R.storeDimIndex});else for(var C=0;C<s;C++){var A=m(C),M=A.coordDim;M==null&&(A.coordDim=lFe(k,i,w),A.coordDimIndex=0,(!_||x<=0)&&(A.isExtraCoord=!0),x--),S(A),A.type==null&&(Jte(t,C)===Ai.Must||A.isExtraCoord&&(A.otherDims.itemName!=null||A.otherDims.seriesName!=null))&&(A.type="ordinal")}return sFe(a),new nre({source:t,dimensions:a,fullDimensionCount:s,dimensionOmitted:o})}function sFe(t){for(var e=pt(),n=0;n<t.length;n++){var r=t[n],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function oFe(t,e,n,r){var i=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,r||0);return oe(e,function(a){var s;_t(a)&&(s=a.dimsDef)&&(i=Math.max(i,s.length))}),i}function lFe(t,e,n){if(n||e.hasKey(t)){for(var r=0;e.hasKey(t+r);)r++;t+=r}return e.set(t,!0),t}var uFe=function(){function t(e){this.coordSysDims=[],this.axisMap=pt(),this.categoryAxisMap=pt(),this.coordSysName=e}return t}();function dFe(t){var e=t.get("coordinateSystem"),n=new uFe(e),r=cFe[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}var cFe={cartesian2d:function(t,e,n,r){var i=t.getReferringComponents("xAxis",Nr).models[0],a=t.getReferringComponents("yAxis",Nr).models[0];e.coordSysDims=["x","y"],n.set("x",i),n.set("y",a),Yh(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),Yh(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var i=t.getReferringComponents("singleAxis",Nr).models[0];e.coordSysDims=["single"],n.set("single",i),Yh(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var i=t.getReferringComponents("polar",Nr).models[0],a=i.findAxisModel("radiusAxis"),s=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",s),Yh(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),Yh(s)&&(r.set("angle",s),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var i=t.ecModel,a=i.getComponent("parallel",t.get("parallelIndex")),s=e.coordSysDims=a.dimensions.slice();oe(a.parallelAxisIndex,function(o,l){var d=i.getComponent("parallelAxis",o),c=s[l];n.set(c,d),Yh(d)&&(r.set(c,d),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function Yh(t){return t.get("type")==="category"}function fFe(t,e,n){n=n||{};var r=n.byIndex,i=n.stackedCoordDimension,a,s,o;pFe(e)?a=e:(s=e.schema,a=s.dimensions,o=e.store);var l=!!(t&&t.get("stack")),d,c,f,p;if(oe(a,function(x,w){it(x)&&(a[w]=x={name:x}),l&&!x.isExtraCoord&&(!r&&!d&&x.ordinalMeta&&(d=x),!c&&x.type!=="ordinal"&&x.type!=="time"&&(!i||i===x.coordDim)&&(c=x))}),c&&!r&&!d&&(r=!0),c){f="__\0ecstackresult_"+t.id,p="__\0ecstackedover_"+t.id,d&&(d.createInvertedIndices=!0);var h=c.coordDim,m=c.type,g=0;oe(a,function(x){x.coordDim===h&&g++});var v={name:f,coordDim:h,coordDimIndex:g,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},_={name:p,coordDim:p,coordDimIndex:g+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};s?(o&&(v.storeDimIndex=o.ensureCalculationDimension(p,m),_.storeDimIndex=o.ensureCalculationDimension(f,m)),s.appendCalculationDimension(v),s.appendCalculationDimension(_)):(a.push(v),a.push(_))}return{stackedDimension:c&&c.name,stackedByDimension:d&&d.name,isStackedByIndex:r,stackedOverDimension:p,stackResultDimension:f}}function pFe(t){return!rre(t.schema)}function Oc(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function ore(t,e){return Oc(t,e)?t.getCalculationInfo("stackResultDimension"):e}function hFe(t,e){var n=t.get("coordinateSystem"),r=Tb.get(n),i;return e&&e.coordSysDims&&(i=ze(e.coordSysDims,function(a){var s={name:a},o=e.axisMap.get(a);if(o){var l=o.get("type");s.type=Nk(l)}return s})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function mFe(t,e,n){var r,i;return n&&oe(t,function(a,s){var o=a.coordDim,l=n.categoryAxisMap.get(o);l&&(r==null&&(r=s),a.ordinalMeta=l.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(t[r].otherDims.itemName=0),r}function md(t,e,n){n=n||{};var r=e.getSourceManager(),i,a=!1;t?(a=!0,i=wI(t)):(i=r.getSource(),a=i.sourceFormat===so);var s=dFe(e),o=hFe(e,s),l=n.useEncodeDefaulter,d=gt(l)?l:l?Pt(Qte,o,e):null,c={coordDimensions:o,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:d,canOmitUnusedDimensions:!a},f=Mb(i,c),p=mFe(f.dimensions,n.createInvertedIndices,s),h=a?null:r.getSharedDataStore(f),m=fFe(e,{schema:f,store:h}),g=new ba(f,e);g.setCalculationInfo(m);var v=p!=null&&gFe(i)?function(_,x,w,k){return k===p?w:this.defaultDimValueGetter(_,x,w,k)}:null;return g.hasItemOption=!1,g.initData(a?i:h,null,v),g}function gFe(t){if(t.sourceFormat===so){var e=vFe(t.data||[]);return!Be(Lg(e))}}function vFe(t){for(var e=0;e<t.length&&t[e]==null;)e++;return t[e]}var Kl=function(){function t(e){this._setting=e||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(e){return this._setting[e]},t.prototype.unionExtent=function(e){var n=this._extent;e[0]<n[0]&&(n[0]=e[0]),e[1]>n[1]&&(n[1]=e[1])},t.prototype.unionExtentFromData=function(e,n){this.unionExtent(e.getApproximateExtent(n))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(e,n){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(n)||(r[1]=n)},t.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(e){this._isBlank=e},t}();jC(Kl);var yFe=0,p$=function(){function t(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++yFe}return t.createByAxisModel=function(e){var n=e.option,r=n.data,i=r&&ze(r,bFe);return new t({categories:i,needCollect:!i,deduplication:n.dedplication!==!1})},t.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},t.prototype.parseAndCollect=function(e){var n,r=this._needCollect;if(!it(e)&&!r)return e;if(r&&!this._deduplication)return n=this.categories.length,this.categories[n]=e,n;var i=this._getOrCreateMap();return n=i.get(e),n==null&&(r?(n=this.categories.length,this.categories[n]=e,i.set(e,n)):n=NaN),n},t.prototype._getOrCreateMap=function(){return this._map||(this._map=pt(this.categories))},t}();function bFe(t){return _t(t)&&t.value!=null?t.value:t+""}function h$(t){return t.type==="interval"||t.type==="log"}function _Fe(t,e,n,r){var i={},a=t[1]-t[0],s=i.interval=Nee(a/e);n!=null&&s<n&&(s=i.interval=n),r!=null&&s>r&&(s=i.interval=r);var o=i.intervalPrecision=lre(s),l=i.niceTickExtent=[Ar(Math.ceil(t[0]/s)*s,o),Ar(Math.floor(t[1]/s)*s,o)];return xFe(l,t),i}function e3(t){var e=Math.pow(10,KP(t)),n=t/e;return n?n===2?n=3:n===3?n=5:n*=2:n=1,Ar(n*e)}function lre(t){return bl(t)+2}function o9(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function xFe(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),o9(t,0,e),o9(t,1,e),t[0]>t[1]&&(t[0]=t[1])}function sA(t,e){return t>=e[0]&&t<=e[1]}function oA(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function lA(t,e){return t*(e[1]-e[0])+e[0]}var uA=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new p$({})),Be(i)&&(i=new p$({categories:ze(i,function(a){return _t(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(n){return n==null?NaN:it(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},e.prototype.contain=function(n){return n=this.parse(n),sA(n,this._extent)&&this._ordinalMeta.categories[n]!=null},e.prototype.normalize=function(n){return n=this._getTickNumber(this.parse(n)),oA(n,this._extent)},e.prototype.scale=function(n){return n=Math.round(lA(n,this._extent)),this.getRawOrdinalNumber(n)},e.prototype.getTicks=function(){for(var n=[],r=this._extent,i=r[0];i<=r[1];)n.push({value:i}),i++;return n},e.prototype.getMinorTicks=function(n){},e.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=n.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],s=0,o=this._ordinalMeta.categories.length,l=Math.min(o,r.length);s<l;++s){var d=r[s];i[s]=d,a[d]=s}for(var c=0;s<o;++s){for(;a[c]!=null;)c++;i.push(c),a[c]=s}},e.prototype._getTickNumber=function(n){var r=this._ticksByOrdinalNumber;return r&&n>=0&&n<r.length?r[n]:n},e.prototype.getRawOrdinalNumber=function(n){var r=this._ordinalNumbersByTick;return r&&n>=0&&n<r.length?r[n]:n},e.prototype.getLabel=function(n){if(!this.isBlank()){var r=this.getRawOrdinalNumber(n.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},e.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(Kl);Kl.registerClass(uA);var kf=Ar,ad=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return e.prototype.parse=function(n){return n},e.prototype.contain=function(n){return sA(n,this._extent)},e.prototype.normalize=function(n){return oA(n,this._extent)},e.prototype.scale=function(n){return lA(n,this._extent)},e.prototype.setExtent=function(n,r){var i=this._extent;isNaN(n)||(i[0]=parseFloat(n)),isNaN(r)||(i[1]=parseFloat(r))},e.prototype.unionExtent=function(n){var r=this._extent;n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=lre(n)},e.prototype.getTicks=function(n){var r=this._interval,i=this._extent,a=this._niceExtent,s=this._intervalPrecision,o=[];if(!r)return o;var l=1e4;i[0]<a[0]&&(n?o.push({value:kf(a[0]-r,s)}):o.push({value:i[0]}));for(var d=a[0];d<=a[1]&&(o.push({value:d}),d=kf(d+r,s),d!==o[o.length-1].value);)if(o.length>l)return[];var c=o.length?o[o.length-1].value:a[1];return i[1]>c&&(n?o.push({value:kf(c+r,s)}):o.push({value:i[1]})),o},e.prototype.getMinorTicks=function(n){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),s=1;s<r.length;s++){for(var o=r[s],l=r[s-1],d=0,c=[],f=o.value-l.value,p=f/n;d<n-1;){var h=kf(l.value+(d+1)*p);h>a[0]&&h<a[1]&&c.push(h),d++}i.push(c)}return i},e.prototype.getLabel=function(n,r){if(n==null)return"";var i=r&&r.precision;i==null?i=bl(n.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=kf(n.value,i,!0);return Ute(a)},e.prototype.calcNiceTicks=function(n,r,i){n=n||5;var a=this._extent,s=a[1]-a[0];if(isFinite(s)){s<0&&(s=-s,a.reverse());var o=_Fe(a,n,r,i);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},e.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);n.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var s=this._interval;n.fixMin||(r[0]=kf(Math.floor(r[0]/s)*s)),n.fixMax||(r[1]=kf(Math.ceil(r[1]/s)*s))},e.prototype.setNiceExtent=function(n,r){this._niceExtent=[n,r]},e.type="interval",e}(Kl);Kl.registerClass(ad);var ure=typeof Float32Array!="undefined",wFe=ure?Float32Array:Array;function xl(t){return Be(t)?ure?new Float32Array(t):t:new wFe(t)}var m$="__ec_stack_";function dre(t){return t.get("stack")||m$+t.seriesIndex}function RI(t){return t.dim+t.index}function kFe(t){var e=[],n=t.axis,r="axis0";if(n.type==="category"){for(var i=n.getBandWidth(),a=0;a<t.count;a++)e.push(yt({bandWidth:i,axisKey:r,stackId:m$+a},t));for(var s=pre(e),o=[],a=0;a<t.count;a++){var l=s[r][m$+a];l.offsetCenter=l.offset+l.width/2,o.push(l)}return o}}function cre(t,e){var n=[];return e.eachSeriesByType(t,function(r){gre(r)&&n.push(r)}),n}function SFe(t){var e={};oe(t,function(l){var d=l.coordinateSystem,c=d.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),p=c.dim+"_"+c.index,h=f.getDimensionIndex(f.mapDimension(c.dim)),m=f.getStore(),g=0,v=m.count();g<v;++g){var _=m.get(h,g);e[p]?e[p].push(_):e[p]=[_]}});var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(l,d){return l-d});for(var a=null,s=1;s<i.length;++s){var o=i[s]-i[s-1];o>0&&(a=a===null?o:Math.min(a,o))}n[r]=a}}return n}function fre(t){var e=SFe(t),n=[];return oe(t,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),s=a.getExtent(),o;if(a.type==="category")o=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,d=e[l],c=Math.abs(s[1]-s[0]),f=a.scale.getExtent(),p=Math.abs(f[1]-f[0]);o=d?c/p*d:c}else{var h=r.getData();o=Math.abs(s[1]-s[0])/h.count()}var m=Qe(r.get("barWidth"),o),g=Qe(r.get("barMaxWidth"),o),v=Qe(r.get("barMinWidth")||(vre(r)?.5:1),o),_=r.get("barGap"),x=r.get("barCategoryGap");n.push({bandWidth:o,barWidth:m,barMaxWidth:g,barMinWidth:v,barGap:_,barCategoryGap:x,axisKey:RI(a),stackId:dre(r)})}),pre(n)}function pre(t){var e={};oe(t,function(r,i){var a=r.axisKey,s=r.bandWidth,o=e[a]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=o.stacks;e[a]=o;var d=r.stackId;l[d]||o.autoWidthCount++,l[d]=l[d]||{width:0,maxWidth:0};var c=r.barWidth;c&&!l[d].width&&(l[d].width=c,c=Math.min(o.remainedWidth,c),o.remainedWidth-=c);var f=r.barMaxWidth;f&&(l[d].maxWidth=f);var p=r.barMinWidth;p&&(l[d].minWidth=p);var h=r.barGap;h!=null&&(o.gap=h);var m=r.barCategoryGap;m!=null&&(o.categoryGap=m)});var n={};return oe(e,function(r,i){n[i]={};var a=r.stacks,s=r.bandWidth,o=r.categoryGap;if(o==null){var l=rn(a).length;o=Math.max(35-l*4,15)+"%"}var d=Qe(o,s),c=Qe(r.gap,1),f=r.remainedWidth,p=r.autoWidthCount,h=(f-d)/(p+(p-1)*c);h=Math.max(h,0),oe(a,function(_){var x=_.maxWidth,w=_.minWidth;if(_.width){var k=_.width;x&&(k=Math.min(k,x)),w&&(k=Math.max(k,w)),_.width=k,f-=k+c*k,p--}else{var k=h;x&&x<k&&(k=Math.min(x,f)),w&&w>k&&(k=w),k!==h&&(_.width=k,f-=k+c*k,p--)}}),h=(f-d)/(p+(p-1)*c),h=Math.max(h,0);var m=0,g;oe(a,function(_,x){_.width||(_.width=h),g=_,m+=_.width*(1+c)}),g&&(m-=g.width*c);var v=-m/2;oe(a,function(_,x){n[i][x]=n[i][x]||{bandWidth:s,offset:v,width:_.width},v+=_.width*(1+c)})}),n}function CFe(t,e,n){if(t&&e){var r=t[RI(e)];return r}}function hre(t,e){var n=cre(t,e),r=fre(n);oe(n,function(i){var a=i.getData(),s=i.coordinateSystem,o=s.getBaseAxis(),l=dre(i),d=r[RI(o)][l],c=d.offset,f=d.width;a.setLayout({bandWidth:d.bandWidth,offset:c,size:f})})}function mre(t){return{seriesType:t,plan:Hg(),reset:function(e){if(gre(e)){var n=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),s=n.getDimensionIndex(n.mapDimension(a.dim)),o=n.getDimensionIndex(n.mapDimension(i.dim)),l=e.get("showBackground",!0),d=n.mapDimension(a.dim),c=n.getCalculationInfo("stackResultDimension"),f=Oc(n,d)&&!!n.getCalculationInfo("stackedOnSeries"),p=a.isHorizontal(),h=AFe(i,a),m=vre(e),g=e.get("barMinHeight")||0,v=c&&n.getDimensionIndex(c),_=n.getLayout("size"),x=n.getLayout("offset");return{progress:function(w,k){for(var S=w.count,C=m&&xl(S*3),A=m&&l&&xl(S*3),M=m&&xl(S),$=r.master.getRect(),R=p?$.width:$.height,I,B=k.getStore(),j=0;(I=w.next())!=null;){var z=B.get(f?v:s,I),F=B.get(o,I),q=h,N=void 0;f&&(N=+z-B.get(s,I));var O=void 0,V=void 0,L=void 0,U=void 0;if(p){var G=r.dataToPoint([z,F]);if(f){var X=r.dataToPoint([N,F]);q=X[0]}O=q,V=G[1]+x,L=G[0]-q,U=_,Math.abs(L)<g&&(L=(L<0?-1:1)*g)}else{var G=r.dataToPoint([F,z]);if(f){var X=r.dataToPoint([F,N]);q=X[1]}O=G[0]+x,V=q,L=_,U=G[1]-q,Math.abs(U)<g&&(U=(U<=0?-1:1)*g)}m?(C[j]=O,C[j+1]=V,C[j+2]=p?L:U,A&&(A[j]=p?$.x:O,A[j+1]=p?V:$.y,A[j+2]=R),M[I]=I):k.setItemLayout(I,{x:O,y:V,width:L,height:U}),j+=3}m&&k.setLayout({largePoints:C,largeDataIndices:M,largeBackgroundPoints:A,valueAxisHorizontal:p})}}}}}}function gre(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function vre(t){return t.pipelineContext&&t.pipelineContext.large}function AFe(t,e){var n=e.model.get("startValue");return n||(n=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?n>0?n:1:n))}var TFe=function(t,e,n,r){for(;n<r;){var i=n+r>>>1;t[i][1]<e?n=i+1:r=i}return n},PI=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="time",r}return e.prototype.getLabel=function(n){var r=this.getSetting("useUTC");return XC(n.value,Qj[uNe(Bm(this._minLevelUnit))]||Qj.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(n,r,i){var a=this.getSetting("useUTC"),s=this.getSetting("locale");return dNe(n,r,i,s,a)},e.prototype.getTicks=function(){var n=this._interval,r=this._extent,i=[];if(!n)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),s=IFe(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(s),i.push({value:r[1],level:0}),i},e.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1]&&(r[0]-=js,r[1]+=js),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-js}this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},e.prototype.calcNiceTicks=function(n,r,i){n=n||10;var a=this._extent,s=a[1]-a[0];this._approxInterval=s/n,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var o=sx.length,l=Math.min(TFe(sx,this._approxInterval,0,o),o-1);this._interval=sx[l][1],this._minLevelUnit=sx[Math.max(l-1,0)][0]},e.prototype.parse=function(n){return pn(n)?n:+Fl(n)},e.prototype.contain=function(n){return sA(this.parse(n),this._extent)},e.prototype.normalize=function(n){return oA(this.parse(n),this._extent)},e.prototype.scale=function(n){return lA(n,this._extent)},e.type="time",e}(ad),sx=[["second",pI],["minute",hI],["hour",p0],["quarter-day",p0*6],["half-day",p0*12],["day",js*1.2],["half-week",js*3.5],["week",js*7],["month",js*31],["quarter",js*95],["half-year",Zj/2],["year",Zj]];function EFe(t,e,n,r){var i=Fl(e),a=Fl(n),s=function(m){return Jj(i,m,r)===Jj(a,m,r)},o=function(){return s("year")},l=function(){return o()&&s("month")},d=function(){return l()&&s("day")},c=function(){return d()&&s("hour")},f=function(){return c()&&s("minute")},p=function(){return f()&&s("second")},h=function(){return p()&&s("millisecond")};switch(t){case"year":return o();case"month":return l();case"day":return d();case"hour":return c();case"minute":return f();case"second":return p();case"millisecond":return h()}}function MFe(t,e){return t/=js,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function $Fe(t){var e=30*js;return t/=e,t>6?6:t>3?3:t>2?2:1}function DFe(t){return t/=p0,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function l9(t,e){return t/=e?hI:pI,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function RFe(t){return Nee(t)}function PFe(t,e,n){var r=new Date(t);switch(Bm(e)){case"year":case"month":r[Vte(n)](0);case"day":r[Nte(n)](1);case"hour":r[jte(n)](0);case"minute":r[Fte(n)](0);case"second":r[Bte(n)](0),r[zte(n)](0)}return r.getTime()}function IFe(t,e,n,r){var i=1e4,a=Ote,s=0;function o(R,I,B,j,z,F,q){for(var N=new Date(I),O=I,V=N[j]();O<B&&O<=r[1];)q.push({value:O}),V+=R,N[z](V),O=N.getTime();q.push({value:O,notAdd:!0})}function l(R,I,B){var j=[],z=!I.length;if(!EFe(Bm(R),r[0],r[1],n)){z&&(I=[{value:PFe(new Date(r[0]),R,n)},{value:r[1]}]);for(var F=0;F<I.length-1;F++){var q=I[F].value,N=I[F+1].value;if(q!==N){var O=void 0,V=void 0,L=void 0,U=!1;switch(R){case"year":O=Math.max(1,Math.round(e/js/365)),V=mI(n),L=cNe(n);break;case"half-year":case"quarter":case"month":O=$Fe(e),V=zm(n),L=Vte(n);break;case"week":case"half-week":case"day":O=MFe(e),V=ZC(n),L=Nte(n),U=!0;break;case"half-day":case"quarter-day":case"hour":O=DFe(e),V=y1(n),L=jte(n);break;case"minute":O=l9(e,!0),V=QC(n),L=Fte(n);break;case"second":O=l9(e,!1),V=JC(n),L=Bte(n);break;case"millisecond":O=RFe(e),V=eA(n),L=zte(n);break}o(O,q,N,V,L,U,j),R==="year"&&B.length>1&&F===0&&B.unshift({value:B[0].value-O})}}for(var F=0;F<j.length;F++)B.push(j[F]);return j}}for(var d=[],c=[],f=0,p=0,h=0;h<a.length&&s++<i;++h){var m=Bm(a[h]);if(lNe(a[h])){l(a[h],d[d.length-1]||[],c);var g=a[h+1]?Bm(a[h+1]):null;if(m!==g){if(c.length){p=f,c.sort(function(R,I){return R.value-I.value});for(var v=[],_=0;_<c.length;++_){var x=c[_].value;(_===0||c[_-1].value!==x)&&(v.push(c[_]),x>=r[0]&&x<=r[1]&&f++)}var w=(r[1]-r[0])/e;if(f>w*1.5&&p>w/1.5||(d.push(v),f>w||t===a[h]))break}c=[]}}}for(var k=kn(ze(d,function(R){return kn(R,function(I){return I.value>=r[0]&&I.value<=r[1]&&!I.notAdd})}),function(R){return R.length>0}),S=[],C=k.length-1,h=0;h<k.length;++h)for(var A=k[h],M=0;M<A.length;++M)S.push({value:A[M].value,level:C-h});S.sort(function(R,I){return R.value-I.value});for(var $=[],h=0;h<S.length;++h)(h===0||S[h].value!==S[h-1].value)&&$.push(S[h]);return $}Kl.registerClass(PI);var u9=Kl.prototype,m0=ad.prototype,OFe=Ar,LFe=Math.floor,VFe=Math.ceil,ox=Math.pow,co=Math.log,II=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new ad,n._interval=0,n}return e.prototype.getTicks=function(n){var r=this._originalScale,i=this._extent,a=r.getExtent(),s=m0.getTicks.call(this,n);return ze(s,function(o){var l=o.value,d=Ar(ox(this.base,l));return d=l===i[0]&&this._fixMin?lx(d,a[0]):d,d=l===i[1]&&this._fixMax?lx(d,a[1]):d,{value:d}},this)},e.prototype.setExtent=function(n,r){var i=co(this.base);n=co(Math.max(0,n))/i,r=co(Math.max(0,r))/i,m0.setExtent.call(this,n,r)},e.prototype.getExtent=function(){var n=this.base,r=u9.getExtent.call(this);r[0]=ox(n,r[0]),r[1]=ox(n,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=lx(r[0],a[0])),this._fixMax&&(r[1]=lx(r[1],a[1])),r},e.prototype.unionExtent=function(n){this._originalScale.unionExtent(n);var r=this.base;n[0]=co(n[0])/co(r),n[1]=co(n[1])/co(r),u9.unionExtent.call(this,n)},e.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(n){n=n||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=zLe(i),s=n/i*a;for(s<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var o=[Ar(VFe(r[0]/a)*a),Ar(LFe(r[1]/a)*a)];this._interval=a,this._niceExtent=o}},e.prototype.calcNiceExtent=function(n){m0.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},e.prototype.parse=function(n){return n},e.prototype.contain=function(n){return n=co(n)/co(this.base),sA(n,this._extent)},e.prototype.normalize=function(n){return n=co(n)/co(this.base),oA(n,this._extent)},e.prototype.scale=function(n){return n=lA(n,this._extent),ox(this.base,n)},e.type="log",e}(Kl),yre=II.prototype;yre.getMinorTicks=m0.getMinorTicks;yre.getLabel=m0.getLabel;function lx(t,e){return OFe(t,bl(e))}Kl.registerClass(II);var NFe=function(){function t(e,n,r){this._prepareParams(e,n,r)}return t.prototype._prepareParams=function(e,n,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var a=n.get("min",!0);a==null&&(a=n.get("startValue",!0));var s=this._modelMinRaw=a;gt(s)?this._modelMinNum=ux(e,s({min:r[0],max:r[1]})):s!=="dataMin"&&(this._modelMinNum=ux(e,s));var o=this._modelMaxRaw=n.get("max",!0);if(gt(o)?this._modelMaxNum=ux(e,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=ux(e,o)),i)this._axisDataLen=n.getCategories().length;else{var l=n.get("boundaryGap"),d=Be(l)?l:[l||0,l||0];typeof d[0]=="boolean"||typeof d[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Lo(d[0],1),Lo(d[1],1)]}},t.prototype.calculate=function(){var e=this._isOrdinal,n=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,s=e?null:r-n||Math.abs(n),o=this._modelMinRaw==="dataMin"?n:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,d=o!=null,c=l!=null;o==null&&(o=e?i?0:NaN:n-a[0]*s),l==null&&(l=e?i?i-1:NaN:r+a[1]*s),(o==null||!isFinite(o))&&(o=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=l1(o)||l1(l)||e&&!i;this._needCrossZero&&(o>0&&l>0&&!d&&(o=0),o<0&&l<0&&!c&&(l=0));var p=this._determinedMin,h=this._determinedMax;return p!=null&&(o=p,d=!0),h!=null&&(l=h,c=!0),{min:o,max:l,minFixed:d,maxFixed:c,isBlank:f}},t.prototype.modifyDataMinMax=function(e,n){this[FFe[e]]=n},t.prototype.setDeterminedMinMax=function(e,n){var r=jFe[e];this[r]=n},t.prototype.freeze=function(){this.frozen=!0},t}(),jFe={min:"_determinedMin",max:"_determinedMax"},FFe={min:"_dataMin",max:"_dataMax"};function bre(t,e,n){var r=t.rawExtentInfo;return r||(r=new NFe(t,e,n),t.rawExtentInfo=r,r)}function ux(t,e){return e==null?null:l1(e)?NaN:t.parse(e)}function _re(t,e){var n=t.type,r=bre(t,e,t.getExtent()).calculate();t.setBlank(r.isBlank);var i=r.min,a=r.max,s=e.ecModel;if(s&&n==="time"){var o=cre("bar",s),l=!1;if(oe(o,function(f){l=l||f.getBaseAxis()===e.axis}),l){var d=fre(o),c=BFe(i,a,e,d);i=c.min,a=c.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function BFe(t,e,n,r){var i=n.axis.getExtent(),a=Math.abs(i[1]-i[0]),s=CFe(r,n.axis);if(s===void 0)return{min:t,max:e};var o=1/0;oe(s,function(h){o=Math.min(h.offset,o)});var l=-1/0;oe(s,function(h){l=Math.max(h.offset+h.width,l)}),o=Math.abs(o),l=Math.abs(l);var d=o+l,c=e-t,f=1-(o+l)/a,p=c/f-c;return e+=p*(l/d),t-=p*(o/d),{min:t,max:e}}function yg(t,e){var n=e,r=_re(t,n),i=r.extent,a=n.get("splitNumber");t instanceof II&&(t.base=n.get("logBase"));var s=t.type,o=n.get("interval"),l=s==="interval"||s==="time";t.setExtent(i[0],i[1]),t.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?n.get("minInterval"):null,maxInterval:l?n.get("maxInterval"):null}),o!=null&&t.setInterval&&t.setInterval(o)}function dA(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new uA({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new PI({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(Kl.getClass(e)||ad)}}function zFe(t){var e=t.scale.getExtent(),n=e[0],r=e[1];return!(n>0&&r>0||n<0&&r<0)}function Gg(t){var e=t.getLabelModel().get("formatter"),n=t.type==="category"?t.scale.getExtent()[0]:null;return t.scale.type==="time"?function(r){return function(i,a){return t.scale.getFormattedLabel(i,a,r)}}(e):it(e)?function(r){return function(i){var a=t.scale.getLabel(i),s=r.replace("{value}",a!=null?a:"");return s}}(e):gt(e)?function(r){return function(i,a){return n!=null&&(a=i.value-n),r(OI(t,i),a,i.level!=null?{level:i.level}:null)}}(e):function(r){return t.scale.getLabel(r)}}function OI(t,e){return t.type==="category"?t.scale.getLabel(e):e.value}function UFe(t){var e=t.model,n=t.scale;if(!(!e.get(["axisLabel","show"])||n.isBlank())){var r,i,a=n.getExtent();n instanceof uA?i=n.count():(r=n.getTicks(),i=r.length);var s=t.getLabelModel(),o=Gg(t),l,d=1;i>40&&(d=Math.ceil(i/40));for(var c=0;c<i;c+=d){var f=r?r[c]:{value:a[0]+c},p=o(f,c),h=s.getTextRect(p),m=HFe(h,s.get("rotate")||0);l?l.union(m):l=m}return l}}function HFe(t,e){var n=e*Math.PI/180,r=t.width,i=t.height,a=r*Math.abs(Math.cos(n))+Math.abs(i*Math.sin(n)),s=r*Math.abs(Math.sin(n))+Math.abs(i*Math.cos(n)),o=new qt(t.x,t.y,a,s);return o}function LI(t){var e=t.get("interval");return e==null?"auto":e}function xre(t){return t.type==="category"&&LI(t.getLabelModel())===0}function jk(t,e){var n={};return oe(t.mapDimensionsAll(e),function(r){n[ore(t,r)]=!0}),rn(n)}function qFe(t,e,n){e&&oe(jk(e,n),function(r){var i=e.getApproximateExtent(r);i[0]<t[0]&&(t[0]=i[0]),i[1]>t[1]&&(t[1]=i[1])})}var $b=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},t.prototype.getCoordSysModel=function(){},t}(),WFe=1e-8;function d9(t,e){return Math.abs(t-e)<WFe}function Wf(t,e,n){var r=0,i=t[0];if(!i)return!1;for(var a=1;a<t.length;a++){var s=t[a];r+=_u(i[0],i[1],s[0],s[1],e,n),i=s}var o=t[0];return(!d9(i[0],o[0])||!d9(i[1],o[1]))&&(r+=_u(i[0],i[1],o[0],o[1],e,n)),r!==0}var GFe=[];function t3(t,e){for(var n=0;n<t.length;n++)Ri(t[n],t[n],e)}function c9(t,e,n,r){for(var i=0;i<t.length;i++){var a=t[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(tc(e,e,a),nc(n,n,a))}}function YFe(t){for(var e=0,n=0,r=0,i=t.length,a=t[i-1][0],s=t[i-1][1],o=0;o<i;o++){var l=t[o][0],d=t[o][1],c=a*d-l*s;e+=c,n+=(a+l)*c,r+=(s+d)*c,a=l,s=d}return e?[n/e/3,r/e/3,e]:[t[0][0]||0,t[0][1]||0]}var wre=function(){function t(e){this.name=e}return t.prototype.setCenter=function(e){this._center=e},t.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},t}(),f9=function(){function t(e,n){this.type="polygon",this.exterior=e,this.interiors=n}return t}(),p9=function(){function t(e){this.type="linestring",this.points=e}return t}(),kre=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this,n)||this;return a.type="geoJSON",a.geometries=r,a._center=i&&[i[0],i[1]],a}return e.prototype.calcCenter=function(){for(var n=this.geometries,r,i=0,a=0;a<n.length;a++){var s=n[a],o=s.exterior,l=o&&o.length;l>i&&(r=s,i=l)}if(r)return YFe(r.exterior);var d=this.getBoundingRect();return[d.x+d.width/2,d.y+d.height/2]},e.prototype.getBoundingRect=function(n){var r=this._rect;if(r&&!n)return r;var i=[1/0,1/0],a=[-1/0,-1/0],s=this.geometries;return oe(s,function(o){o.type==="polygon"?c9(o.exterior,i,a,n):oe(o.points,function(l){c9(l,i,a,n)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),r=new qt(i[0],i[1],a[0]-i[0],a[1]-i[1]),n||(this._rect=r),r},e.prototype.contain=function(n){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(n[0],n[1]))return!1;e:for(var a=0,s=i.length;a<s;a++){var o=i[a];if(o.type==="polygon"){var l=o.exterior,d=o.interiors;if(Wf(l,n[0],n[1])){for(var c=0;c<(d?d.length:0);c++)if(Wf(d[c],n[0],n[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(n,r,i,a){var s=this.getBoundingRect(),o=s.width/s.height;i?a||(a=i/o):i=o*a;for(var l=new qt(n,r,i,a),d=s.calculateTransform(l),c=this.geometries,f=0;f<c.length;f++){var p=c[f];p.type==="polygon"?(t3(p.exterior,d),oe(p.interiors,function(h){t3(h,d)})):oe(p.points,function(h){t3(h,d)})}s=this._rect,s.copy(l),this._center=[s.x+s.width/2,s.y+s.height/2]},e.prototype.cloneShallow=function(n){n==null&&(n=this.name);var r=new e(n,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(wre),KFe=function(t){Ce(e,t);function e(n,r){var i=t.call(this,n)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return e.prototype.calcCenter=function(){for(var n=this._elOnlyForCalculate,r=n.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],a=OC(GFe),s=n;s&&!s.isGeoSVGGraphicRoot;)Bu(a,s.getLocalTransform(),a),s=s.parent;return Og(a,a),Ri(i,i,a),i},e}(wre);function XFe(t){if(!t.UTF8Encoding)return t;var e=t,n=e.UTF8Scale;n==null&&(n=1024);var r=e.features;return oe(r,function(i){var a=i.geometry,s=a.encodeOffsets,o=a.coordinates;if(s)switch(a.type){case"LineString":a.coordinates=Sre(o,s,n);break;case"Polygon":n3(o,s,n);break;case"MultiLineString":n3(o,s,n);break;case"MultiPolygon":oe(o,function(l,d){return n3(l,s[d],n)})}}),e.UTF8Encoding=!1,e}function n3(t,e,n){for(var r=0;r<t.length;r++)t[r]=Sre(t[r],e[r],n)}function Sre(t,e,n){for(var r=[],i=e[0],a=e[1],s=0;s<t.length;s+=2){var o=t.charCodeAt(s)-64,l=t.charCodeAt(s+1)-64;o=o>>1^-(o&1),l=l>>1^-(l&1),o+=i,l+=a,i=o,a=l,r.push([o/n,l/n])}return r}function ZFe(t,e){return t=XFe(t),ze(kn(t.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var r=n.properties,i=n.geometry,a=[];switch(i.type){case"Polygon":var s=i.coordinates;a.push(new f9(s[0],s.slice(1)));break;case"MultiPolygon":oe(i.coordinates,function(l){l[0]&&a.push(new f9(l[0],l.slice(1)))});break;case"LineString":a.push(new p9([i.coordinates]));break;case"MultiLineString":a.push(new p9(i.coordinates))}var o=new kre(r[e||"name"],a,r.cp);return o.properties=r,o})}var S1=on();function Cre(t,e){var n=ze(e,function(r){return t.scale.parse(r)});return t.type==="time"&&n.length>0&&(n.sort(),n.unshift(n[0]),n.push(n[n.length-1])),n}function QFe(t){var e=t.getLabelModel().get("customValues");if(e){var n=Gg(t),r=t.scale.getExtent(),i=Cre(t,e),a=kn(i,function(s){return s>=r[0]&&s<=r[1]});return{labels:ze(a,function(s){var o={value:s};return{formattedLabel:n(o),rawLabel:t.scale.getLabel(o),tickValue:s}})}}return t.type==="category"?e9e(t):n9e(t)}function JFe(t,e){var n=t.getTickModel().get("customValues");if(n){var r=t.scale.getExtent(),i=Cre(t,n);return{ticks:kn(i,function(a){return a>=r[0]&&a<=r[1]})}}return t.type==="category"?t9e(t,e):{ticks:ze(t.scale.getTicks(),function(a){return a.value})}}function e9e(t){var e=t.getLabelModel(),n=Are(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function Are(t,e){var n=Tre(t,"labels"),r=LI(e),i=Ere(n,r);if(i)return i;var a,s;return gt(r)?a=Dre(t,r):(s=r==="auto"?r9e(t):r,a=$re(t,s)),Mre(n,r,{labels:a,labelCategoryInterval:s})}function t9e(t,e){var n=Tre(t,"ticks"),r=LI(e),i=Ere(n,r);if(i)return i;var a,s;if((!e.get("show")||t.scale.isBlank())&&(a=[]),gt(r))a=Dre(t,r,!0);else if(r==="auto"){var o=Are(t,t.getLabelModel());s=o.labelCategoryInterval,a=ze(o.labels,function(l){return l.tickValue})}else s=r,a=$re(t,s,!0);return Mre(n,r,{ticks:a,tickCategoryInterval:s})}function n9e(t){var e=t.scale.getTicks(),n=Gg(t);return{labels:ze(e,function(r,i){return{level:r.level,formattedLabel:n(r,i),rawLabel:t.scale.getLabel(r),tickValue:r.value}})}}function Tre(t,e){return S1(t)[e]||(S1(t)[e]=[])}function Ere(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function Mre(t,e,n){return t.push({key:e,value:n}),n}function r9e(t){var e=S1(t).autoInterval;return e!=null?e:S1(t).autoInterval=t.calculateCategoryInterval()}function i9e(t){var e=a9e(t),n=Gg(t),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=t.scale,a=i.getExtent(),s=i.count();if(a[1]-a[0]<1)return 0;var o=1;s>40&&(o=Math.max(1,Math.floor(s/40)));for(var l=a[0],d=t.dataToCoord(l+1)-t.dataToCoord(l),c=Math.abs(d*Math.cos(r)),f=Math.abs(d*Math.sin(r)),p=0,h=0;l<=a[1];l+=o){var m=0,g=0,v=bb(n({value:l}),e.font,"center","top");m=v.width*1.3,g=v.height*1.3,p=Math.max(p,m,7),h=Math.max(h,g,7)}var _=p/c,x=h/f;isNaN(_)&&(_=1/0),isNaN(x)&&(x=1/0);var w=Math.max(0,Math.floor(Math.min(_,x))),k=S1(t.model),S=t.getExtent(),C=k.lastAutoInterval,A=k.lastTickCount;return C!=null&&A!=null&&Math.abs(C-w)<=1&&Math.abs(A-s)<=1&&C>w&&k.axisExtent0===S[0]&&k.axisExtent1===S[1]?w=C:(k.lastTickCount=s,k.lastAutoInterval=w,k.axisExtent0=S[0],k.axisExtent1=S[1]),w}function a9e(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function $re(t,e,n){var r=Gg(t),i=t.scale,a=i.getExtent(),s=t.getLabelModel(),o=[],l=Math.max((e||0)+1,1),d=a[0],c=i.count();d!==0&&l>1&&c/l>2&&(d=Math.round(Math.ceil(d/l)*l));var f=xre(t),p=s.get("showMinLabel")||f,h=s.get("showMaxLabel")||f;p&&d!==a[0]&&g(a[0]);for(var m=d;m<=a[1];m+=l)g(m);h&&m-l!==a[1]&&g(a[1]);function g(v){var _={value:v};o.push(n?v:{formattedLabel:r(_),rawLabel:i.getLabel(_),tickValue:v})}return o}function Dre(t,e,n){var r=t.scale,i=Gg(t),a=[];return oe(r.getTicks(),function(s){var o=r.getLabel(s),l=s.value;e(s.value,o)&&a.push(n?l:{formattedLabel:i(s),rawLabel:o,tickValue:l})}),a}var h9=[0,1],Fo=function(){function t(e,n,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=n,this._extent=r||[0,0]}return t.prototype.contain=function(e){var n=this._extent,r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return e>=r&&e<=i},t.prototype.containData=function(e){return this.scale.contain(e)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(e){return Lee(e||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(e,n){var r=this._extent;r[0]=e,r[1]=n},t.prototype.dataToCoord=function(e,n){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(r=r.slice(),m9(r,i.count())),Cn(e,h9,r,n)},t.prototype.coordToData=function(e,n){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),m9(r,i.count()));var a=Cn(e,r,h9,n);return this.scale.scale(a)},t.prototype.pointToData=function(e,n){},t.prototype.getTicksCoords=function(e){e=e||{};var n=e.tickModel||this.getTickModel(),r=JFe(this,n),i=r.ticks,a=ze(i,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),s=n.get("alignWithLabel");return s9e(this,a,s,e.clamp),a},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),n=e.get("splitNumber");n>0&&n<100||(n=5);var r=this.scale.getMinorTicks(n),i=ze(r,function(a){return ze(a,function(s){return{coord:this.dataToCoord(s),tickValue:s}},this)},this);return i},t.prototype.getViewLabels=function(){return QFe(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var e=this._extent,n=this.scale.getExtent(),r=n[1]-n[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},t.prototype.calculateCategoryInterval=function(){return i9e(this)},t}();function m9(t,e){var n=t[1]-t[0],r=e,i=n/r/2;t[0]+=i,t[1]-=i}function s9e(t,e,n,r){var i=e.length;if(!t.onBand||n||!i)return;var a=t.getExtent(),s,o;if(i===1)e[0].coord=a[0],s=e[1]={coord:a[1],tickValue:e[0].tickValue};else{var l=e[i-1].tickValue-e[0].tickValue,d=(e[i-1].coord-e[0].coord)/l;oe(e,function(h){h.coord-=d/2});var c=t.scale.getExtent();o=1+c[1]-e[i-1].tickValue,s={coord:e[i-1].coord+d*o,tickValue:c[1]+1},e.push(s)}var f=a[0]>a[1];p(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&p(a[0],e[0].coord)&&e.unshift({coord:a[0]}),p(a[1],s.coord)&&(r?s.coord=a[1]:e.pop()),r&&p(s.coord,a[1])&&e.push({coord:a[1]});function p(h,m){return h=Ar(h),m=Ar(m),f?h>m:h<m}}var jv=Math.PI*2,Sf=Bl.CMD,o9e=["top","right","bottom","left"];function l9e(t,e,n,r,i){var a=n.width,s=n.height;switch(t){case"top":r.set(n.x+a/2,n.y-e),i.set(0,-1);break;case"bottom":r.set(n.x+a/2,n.y+s+e),i.set(0,1);break;case"left":r.set(n.x-e,n.y+s/2),i.set(-1,0);break;case"right":r.set(n.x+a+e,n.y+s/2),i.set(1,0);break}}function u9e(t,e,n,r,i,a,s,o,l){s-=t,o-=e;var d=Math.sqrt(s*s+o*o);s/=d,o/=d;var c=s*n+t,f=o*n+e;if(Math.abs(r-i)%jv<1e-4)return l[0]=c,l[1]=f,d-n;if(a){var p=r;r=as(i),i=as(p)}else r=as(r),i=as(i);r>i&&(i+=jv);var h=Math.atan2(o,s);if(h<0&&(h+=jv),h>=r&&h<=i||h+jv>=r&&h+jv<=i)return l[0]=c,l[1]=f,d-n;var m=n*Math.cos(r)+t,g=n*Math.sin(r)+e,v=n*Math.cos(i)+t,_=n*Math.sin(i)+e,x=(m-s)*(m-s)+(g-o)*(g-o),w=(v-s)*(v-s)+(_-o)*(_-o);return x<w?(l[0]=m,l[1]=g,Math.sqrt(x)):(l[0]=v,l[1]=_,Math.sqrt(w))}function Fk(t,e,n,r,i,a,s,o){var l=i-t,d=a-e,c=n-t,f=r-e,p=Math.sqrt(c*c+f*f);c/=p,f/=p;var h=l*c+d*f,m=h/p;o&&(m=Math.min(Math.max(m,0),1)),m*=p;var g=s[0]=t+m*c,v=s[1]=e+m*f;return Math.sqrt((g-i)*(g-i)+(v-a)*(v-a))}function Rre(t,e,n,r,i,a,s){n<0&&(t=t+n,n=-n),r<0&&(e=e+r,r=-r);var o=t+n,l=e+r,d=s[0]=Math.min(Math.max(i,t),o),c=s[1]=Math.min(Math.max(a,e),l);return Math.sqrt((d-i)*(d-i)+(c-a)*(c-a))}var go=[];function d9e(t,e,n){var r=Rre(e.x,e.y,e.width,e.height,t.x,t.y,go);return n.set(go[0],go[1]),r}function c9e(t,e,n){for(var r=0,i=0,a=0,s=0,o,l,d=1/0,c=e.data,f=t.x,p=t.y,h=0;h<c.length;){var m=c[h++];h===1&&(r=c[h],i=c[h+1],a=r,s=i);var g=d;switch(m){case Sf.M:a=c[h++],s=c[h++],r=a,i=s;break;case Sf.L:g=Fk(r,i,c[h],c[h+1],f,p,go,!0),r=c[h++],i=c[h++];break;case Sf.C:g=yee(r,i,c[h++],c[h++],c[h++],c[h++],c[h],c[h+1],f,p,go),r=c[h++],i=c[h++];break;case Sf.Q:g=_ee(r,i,c[h++],c[h++],c[h],c[h+1],f,p,go),r=c[h++],i=c[h++];break;case Sf.A:var v=c[h++],_=c[h++],x=c[h++],w=c[h++],k=c[h++],S=c[h++];h+=1;var C=!!(1-c[h++]);o=Math.cos(k)*x+v,l=Math.sin(k)*w+_,h<=1&&(a=o,s=l);var A=(f-v)*w/x+v;g=u9e(v,_,w,k,k+S,C,A,p,go),r=Math.cos(k+S)*x+v,i=Math.sin(k+S)*w+_;break;case Sf.R:a=r=c[h++],s=i=c[h++];var M=c[h++],$=c[h++];g=Rre(a,s,M,$,f,p,go);break;case Sf.Z:g=Fk(r,i,a,s,f,p,go,!0),r=a,i=s;break}g<d&&(d=g,n.set(go[0],go[1]))}return d}var wo=new Bt,qn=new Bt,Dr=new Bt,wl=new Bt,ml=new Bt;function g9(t,e){if(t){var n=t.getTextGuideLine(),r=t.getTextContent();if(r&&n){var i=t.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],s=i.candidates||o9e,o=r.getBoundingRect().clone();o.applyTransform(r.getComputedTransform());var l=1/0,d=i.anchor,c=t.getComputedTransform(),f=c&&Og([],c),p=e.get("length2")||0;d&&Dr.copy(d);for(var h=0;h<s.length;h++){var m=s[h];l9e(m,0,o,wo,wl),Bt.scaleAndAdd(qn,wo,wl,p),qn.transform(f);var g=t.getBoundingRect(),v=d?d.distance(qn):t instanceof Zt?c9e(qn,t.path,Dr):d9e(qn,g,Dr);v<l&&(l=v,qn.transform(c),Dr.transform(c),Dr.toArray(a[0]),qn.toArray(a[1]),wo.toArray(a[2]))}Pre(a,e.get("minTurnAngle")),n.setShape({points:a})}}}var Bk=[],pa=new Bt;function Pre(t,e){if(e<=180&&e>0){e=e/180*Math.PI,wo.fromArray(t[0]),qn.fromArray(t[1]),Dr.fromArray(t[2]),Bt.sub(wl,wo,qn),Bt.sub(ml,Dr,qn);var n=wl.len(),r=ml.len();if(!(n<.001||r<.001)){wl.scale(1/n),ml.scale(1/r);var i=wl.dot(ml),a=Math.cos(e);if(a<i){var s=Fk(qn.x,qn.y,Dr.x,Dr.y,wo.x,wo.y,Bk,!1);pa.fromArray(Bk),pa.scaleAndAdd(ml,s/Math.tan(Math.PI-e));var o=Dr.x!==qn.x?(pa.x-qn.x)/(Dr.x-qn.x):(pa.y-qn.y)/(Dr.y-qn.y);if(isNaN(o))return;o<0?Bt.copy(pa,qn):o>1&&Bt.copy(pa,Dr),pa.toArray(t[1])}}}}function f9e(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,wo.fromArray(t[0]),qn.fromArray(t[1]),Dr.fromArray(t[2]),Bt.sub(wl,qn,wo),Bt.sub(ml,Dr,qn);var r=wl.len(),i=ml.len();if(!(r<.001||i<.001)){wl.scale(1/r),ml.scale(1/i);var a=wl.dot(e),s=Math.cos(n);if(a<s){var o=Fk(qn.x,qn.y,Dr.x,Dr.y,wo.x,wo.y,Bk,!1);pa.fromArray(Bk);var l=Math.PI/2,d=Math.acos(ml.dot(e)),c=l+d-n;if(c>=l)Bt.copy(pa,Dr);else{pa.scaleAndAdd(ml,o/Math.tan(Math.PI/2-c));var f=Dr.x!==qn.x?(pa.x-qn.x)/(Dr.x-qn.x):(pa.y-qn.y)/(Dr.y-qn.y);if(isNaN(f))return;f<0?Bt.copy(pa,qn):f>1&&Bt.copy(pa,Dr)}pa.toArray(t[1])}}}}function r3(t,e,n,r){var i=n==="normal",a=i?t:t.ensureState(n);a.ignore=e;var s=r.get("smooth");s&&s===!0&&(s=.3),a.shape=a.shape||{},s>0&&(a.shape.smooth=s);var o=r.getModel("lineStyle").getLineStyle();i?t.useStyle(o):a.style=o}function p9e(t,e){var n=e.smooth,r=e.points;if(r)if(t.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=ec(r[0],r[1]),a=ec(r[1],r[2]);if(!i||!a){t.lineTo(r[1][0],r[1][1]),t.lineTo(r[2][0],r[2][1]);return}var s=Math.min(i,a)*n,o=ww([],r[1],r[0],s/i),l=ww([],r[1],r[2],s/a),d=ww([],o,l,.5);t.bezierCurveTo(o[0],o[1],o[0],o[1],d[0],d[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)t.lineTo(r[c][0],r[c][1])}function VI(t,e,n){var r=t.getTextGuideLine(),i=t.getTextContent();if(!i){r&&t.removeTextGuideLine();return}for(var a=e.normal,s=a.get("show"),o=i.ignore,l=0;l<m1.length;l++){var d=m1[l],c=e[d],f=d==="normal";if(c){var p=c.get("show"),h=f?o:$t(i.states[d]&&i.states[d].ignore,o);if(h||!$t(p,s)){var m=f?r:r&&r.states[d];m&&(m.ignore=!0),r&&r3(r,!0,d,c);continue}r||(r=new Da,t.setTextGuideLine(r),!f&&(o||!s)&&r3(r,!0,"normal",e.normal),t.stateProxy&&(r.stateProxy=t.stateProxy)),r3(r,!1,d,c)}}if(r){yt(r.style,n),r.style.fill=null;var g=a.get("showAbove"),v=t.textGuideLineConfig=t.textGuideLineConfig||{};v.showAbove=g||!1,r.buildPath=p9e}}function NI(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},r=0;r<Ea.length;r++){var i=Ea[r];n[i]=t.getModel([i,e])}return n}function Ire(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),s=i.getBoundingRect(),o=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,d=s.clone();d.applyTransform(a),d.x-=l/2,d.y-=l/2,d.width+=l,d.height+=l;var c=o?new Sk(s,a):null;e.push({label:i,labelLine:r.labelLine,rect:d,localRect:s,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:o,transform:a})}}return e}function Ore(t,e,n,r,i,a){var s=t.length;if(s<2)return;t.sort(function(C,A){return C.rect[e]-A.rect[e]});for(var o=0,l,d=!1,c=0;c<s;c++){var f=t[c],p=f.rect;l=p[e]-o,l<0&&(p[e]-=l,f.label[e]-=l,d=!0),o=p[e]+p[n]}var h=t[0],m=t[s-1],g,v;_(),g<0&&k(-g,.8),v<0&&k(v,.8),_(),x(g,v,1),x(v,g,-1),_(),g<0&&S(-g),v<0&&S(v);function _(){g=h.rect[e]-r,v=i-m.rect[e]-m.rect[n]}function x(C,A,M){if(C<0){var $=Math.min(A,-C);if($>0){w($*M,0,s);var R=$+C;R<0&&k(-R*M,1)}else k(-C*M,1)}}function w(C,A,M){C!==0&&(d=!0);for(var $=A;$<M;$++){var R=t[$],I=R.rect;I[e]+=C,R.label[e]+=C}}function k(C,A){for(var M=[],$=0,R=1;R<s;R++){var I=t[R-1].rect,B=Math.max(t[R].rect[e]-I[e]-I[n],0);M.push(B),$+=B}if($){var j=Math.min(Math.abs(C)/$,A);if(C>0)for(var R=0;R<s-1;R++){var z=M[R]*j;w(z,0,R+1)}else for(var R=s-1;R>0;R--){var z=M[R-1]*j;w(-z,R,s)}}}function S(C){var A=C<0?-1:1;C=Math.abs(C);for(var M=Math.ceil(C/(s-1)),$=0;$<s-1;$++)if(A>0?w(M,0,$+1):w(-M,s-$-1,s),C-=M,C<=0)return}return d}function h9e(t,e,n,r){return Ore(t,"x","width",e,n)}function Lre(t,e,n,r){return Ore(t,"y","height",e,n)}function Vre(t){var e=[];t.sort(function(g,v){return v.priority-g.priority});var n=new qt(0,0,0,0);function r(g){if(!g.ignore){var v=g.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}g.ignore=!0}for(var i=0;i<t.length;i++){var a=t[i],s=a.axisAligned,o=a.localRect,l=a.transform,d=a.label,c=a.labelLine;n.copy(a.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var f=a.obb,p=!1,h=0;h<e.length;h++){var m=e[h];if(n.intersect(m.rect)){if(s&&m.axisAligned){p=!0;break}if(m.obb||(m.obb=new Sk(m.localRect,m.transform)),f||(f=new Sk(o,l)),f.intersect(m.obb)){p=!0;break}}}p?(r(d),c&&r(c)):(d.attr("ignore",a.defaultAttr.ignore),c&&c.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function m9e(t){if(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice());return e}}function g9e(t,e){var n=t.label,r=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:m9e(r&&r.shape.points)}}var v9=["align","verticalAlign","width","height","fontSize"],sa=new Iu,i3=on(),v9e=on();function dx(t,e,n){for(var r=0;r<n.length;r++){var i=n[r];e[i]!=null&&(t[i]=e[i])}}var cx=["x","y","rotation"],y9e=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(e,n,r,i,a){var s=i.style,o=i.__hostTarget,l=o.textConfig||{},d=i.getComputedTransform(),c=i.getBoundingRect().plain();qt.applyTransform(c,c,d),d?sa.setLocalTransform(d):(sa.x=sa.y=sa.rotation=sa.originX=sa.originY=0,sa.scaleX=sa.scaleY=1),sa.rotation=as(sa.rotation);var f=i.__hostTarget,p;if(f){p=f.getBoundingRect().plain();var h=f.getComputedTransform();qt.applyTransform(p,p,h)}var m=p&&f.getTextGuideLine();this._labelList.push({label:i,labelLine:m,seriesModel:r,dataIndex:e,dataType:n,layoutOption:a,computedLayoutOption:null,rect:c,hostRect:p,priority:p?p.width*p.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:m&&m.ignore,x:sa.x,y:sa.y,scaleX:sa.scaleX,scaleY:sa.scaleY,rotation:sa.rotation,style:{x:s.x,y:s.y,align:s.align,verticalAlign:s.verticalAlign,width:s.width,height:s.height,fontSize:s.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},t.prototype.addLabelsOfSeries=function(e){var n=this;this._chartViewList.push(e);var r=e.__model,i=r.get("labelLayout");(gt(i)||rn(i).length)&&e.group.traverse(function(a){if(a.ignore)return!0;var s=a.getTextContent(),o=Tt(a);s&&!s.disableLabelLayout&&n._addLabel(o.dataIndex,o.dataType,r,s,i)})},t.prototype.updateLayoutConfig=function(e){var n=e.getWidth(),r=e.getHeight();function i(w,k){return function(){g9(w,k)}}for(var a=0;a<this._labelList.length;a++){var s=this._labelList[a],o=s.label,l=o.__hostTarget,d=s.defaultAttr,c=void 0;gt(s.layoutOption)?c=s.layoutOption(g9e(s,l)):c=s.layoutOption,c=c||{},s.computedLayoutOption=c;var f=Math.PI/180;l&&l.setTextConfig({local:!1,position:c.x!=null||c.y!=null?null:d.attachedPos,rotation:c.rotate!=null?c.rotate*f:d.attachedRot,offset:[c.dx||0,c.dy||0]});var p=!1;if(c.x!=null?(o.x=Qe(c.x,n),o.setStyle("x",0),p=!0):(o.x=d.x,o.setStyle("x",d.style.x)),c.y!=null?(o.y=Qe(c.y,r),o.setStyle("y",0),p=!0):(o.y=d.y,o.setStyle("y",d.style.y)),c.labelLinePoints){var h=l.getTextGuideLine();h&&(h.setShape({points:c.labelLinePoints}),p=!1)}var m=i3(o);m.needsUpdateLabelLine=p,o.rotation=c.rotate!=null?c.rotate*f:d.rotation,o.scaleX=d.scaleX,o.scaleY=d.scaleY;for(var g=0;g<v9.length;g++){var v=v9[g];o.setStyle(v,c[v]!=null?c[v]:d.style[v])}if(c.draggable){if(o.draggable=!0,o.cursor="move",l){var _=s.seriesModel;if(s.dataIndex!=null){var x=s.seriesModel.getData(s.dataType);_=x.getItemModel(s.dataIndex)}o.on("drag",i(l,_.getModel("labelLine")))}}else o.off("drag"),o.cursor=d.cursor}},t.prototype.layout=function(e){var n=e.getWidth(),r=e.getHeight(),i=Ire(this._labelList),a=kn(i,function(l){return l.layoutOption.moveOverlap==="shiftX"}),s=kn(i,function(l){return l.layoutOption.moveOverlap==="shiftY"});h9e(a,0,n),Lre(s,0,r);var o=kn(i,function(l){return l.layoutOption.hideOverlap});Vre(o)},t.prototype.processLabelsOverall=function(){var e=this;oe(this._chartViewList,function(n){var r=n.__model,i=n.ignoreLabelLineUpdate,a=r.isAnimationEnabled();n.group.traverse(function(s){if(s.ignore&&!s.forceLabelAnimation)return!0;var o=!i,l=s.getTextContent();!o&&l&&(o=i3(l).needsUpdateLabelLine),o&&e._updateLabelLine(s,r),a&&e._animateLabels(s,r)})})},t.prototype._updateLabelLine=function(e,n){var r=e.getTextContent(),i=Tt(e),a=i.dataIndex;if(r&&a!=null){var s=n.getData(i.dataType),o=s.getItemModel(a),l={},d=s.getItemVisual(a,"style");if(d){var c=s.getVisual("drawType");l.stroke=d[c]}var f=o.getModel("labelLine");VI(e,NI(o),l),g9(e,f)}},t.prototype._animateLabels=function(e,n){var r=e.getTextContent(),i=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!jm(e))){var a=i3(r),s=a.oldLayout,o=Tt(e),l=o.dataIndex,d={x:r.x,y:r.y,rotation:r.rotation},c=n.getData(o.dataType);if(s){r.attr(s);var p=e.prevStates;p&&(Yt(p,"select")>=0&&r.attr(a.oldLayoutSelect),Yt(p,"emphasis")>=0&&r.attr(a.oldLayoutEmphasis)),yn(r,d,n,l)}else if(r.attr(d),!jg(r).valueAnimation){var f=$t(r.style.opacity,1);r.style.opacity=0,sr(r,{style:{opacity:f}},n,l)}if(a.oldLayout=d,r.states.select){var h=a.oldLayoutSelect={};dx(h,d,cx),dx(h,r.states.select,cx)}if(r.states.emphasis){var m=a.oldLayoutEmphasis={};dx(m,d,cx),dx(m,r.states.emphasis,cx)}$te(r,l,c,n,n)}if(i&&!i.ignore&&!i.invisible){var a=v9e(i),s=a.oldLayout,g={points:i.shape.points};s?(i.attr({shape:s}),yn(i,{shape:g},n)):(i.setShape(g),i.style.strokePercent=0,sr(i,{style:{strokePercent:1}},n)),a.oldLayout=g}},t}(),a3=on();function b9e(t){t.registerUpdateLifecycle("series:beforeupdate",function(e,n,r){var i=a3(n).labelManager;i||(i=a3(n).labelManager=new y9e),i.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(e,n,r){var i=a3(n).labelManager;r.updatedSeries.forEach(function(a){i.addLabelsOfSeries(n.getViewOfSeriesModel(a))}),i.updateLayoutConfig(n),i.layout(n),i.processLabelsOverall()})}var s3=Math.sin,o3=Math.cos,Nre=Math.PI,Cf=Math.PI*2,_9e=180/Nre,jre=function(){function t(){}return t.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},t.prototype.moveTo=function(e,n){this._add("M",e,n)},t.prototype.lineTo=function(e,n){this._add("L",e,n)},t.prototype.bezierCurveTo=function(e,n,r,i,a,s){this._add("C",e,n,r,i,a,s)},t.prototype.quadraticCurveTo=function(e,n,r,i){this._add("Q",e,n,r,i)},t.prototype.arc=function(e,n,r,i,a,s){this.ellipse(e,n,r,r,0,i,a,s)},t.prototype.ellipse=function(e,n,r,i,a,s,o,l){var d=o-s,c=!l,f=Math.abs(d),p=ac(f-Cf)||(c?d>=Cf:-d>=Cf),h=d>0?d%Cf:d%Cf+Cf,m=!1;p?m=!0:ac(f)?m=!1:m=h>=Nre==!!c;var g=e+r*o3(s),v=n+i*s3(s);this._start&&this._add("M",g,v);var _=Math.round(a*_9e);if(p){var x=1/this._p,w=(c?1:-1)*(Cf-x);this._add("A",r,i,_,1,+c,e+r*o3(s+w),n+i*s3(s+w)),x>.01&&this._add("A",r,i,_,0,+c,g,v)}else{var k=e+r*o3(o),S=n+i*s3(o);this._add("A",r,i,_,+m,+c,k,S)}},t.prototype.rect=function(e,n,r,i){this._add("M",e,n),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(e,n,r,i,a,s,o,l,d){for(var c=[],f=this._p,p=1;p<arguments.length;p++){var h=arguments[p];if(isNaN(h)){this._invalid=!0;return}c.push(Math.round(h*f)/f)}this._d.push(e+c.join(" ")),this._start=e==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),jI="none",x9e=Math.round;function w9e(t){var e=t.fill;return e!=null&&e!==jI}function k9e(t){var e=t.stroke;return e!=null&&e!==jI}var g$=["lineCap","miterLimit","lineJoin"],S9e=ze(g$,function(t){return"stroke-"+t.toLowerCase()});function C9e(t,e,n,r){var i=e.opacity==null?1:e.opacity;if(n instanceof xi){t("opacity",i);return}if(w9e(e)){var a=f1(e.fill);t("fill",a.color);var s=e.fillOpacity!=null?e.fillOpacity*a.opacity*i:a.opacity*i;s<1&&t("fill-opacity",s)}else t("fill",jI);if(k9e(e)){var o=f1(e.stroke);t("stroke",o.color);var l=e.strokeNoScale?n.getLineScale():1,d=l?(e.lineWidth||0)/l:0,c=e.strokeOpacity!=null?e.strokeOpacity*o.opacity*i:o.opacity*i,f=e.strokeFirst;if(d!==1&&t("stroke-width",d),f&&t("paint-order",f?"stroke":"fill"),c<1&&t("stroke-opacity",c),e.lineDash){var p=TI(n),h=p[0],m=p[1];h&&(m=x9e(m||0),t("stroke-dasharray",h.join(",")),(m||r)&&t("stroke-dashoffset",m))}for(var g=0;g<g$.length;g++){var v=g$[g];if(e[v]!==wk[v]){var _=e[v]||wk[v];_&&t(S9e[g],_)}}}}var Fre="http://www.w3.org/2000/svg",Bre="http://www.w3.org/1999/xlink",A9e="http://www.w3.org/2000/xmlns/",T9e="http://www.w3.org/XML/1998/namespace",y9="ecmeta_";function zre(t){return document.createElementNS(Fre,t)}function ai(t,e,n,r,i){return{tag:t,attrs:n||{},children:r,text:i,key:e}}function E9e(t,e){var n=[];if(e)for(var r in e){var i=e[r],a=r;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),n.push(a))}return"<"+t+" "+n.join(" ")+">"}function M9e(t){return"</"+t+">"}function FI(t,e){e=e||{};var n=e.newline?`
`:"";function r(i){var a=i.children,s=i.tag,o=i.attrs,l=i.text;return E9e(s,o)+(s!=="style"?ga(l):l||"")+(a?""+n+ze(a,function(d){return r(d)}).join(n)+n:"")+M9e(s)}return r(t)}function $9e(t,e,n){n=n||{};var r=n.newline?`
`:"",i=" {"+r,a=r+"}",s=ze(rn(t),function(l){return l+i+ze(rn(t[l]),function(d){return d+":"+t[l][d]+";"}).join(r)+a}).join(r),o=ze(rn(e),function(l){return"@keyframes "+l+i+ze(rn(e[l]),function(d){return d+i+ze(rn(e[l][d]),function(c){var f=e[l][d][c];return c==="d"&&(f='path("'+f+'")'),c+":"+f+";"}).join(r)+a}).join(r)+a}).join(r);return!s&&!o?"":["<![CDATA[",s,o,"]]>"].join(r)}function v$(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function b9(t,e,n,r){return ai("svg","root",{width:t,height:e,xmlns:Fre,"xmlns:xlink":Bre,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+t+" "+e:!1},n)}var D9e=0;function Ure(){return D9e++}var _9={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Pf="transform-origin";function R9e(t,e,n){var r=Oe({},t.shape);Oe(r,e),t.buildPath(n,r);var i=new jre;return i.reset(Tee(t)),n.rebuildPath(i,1),i.generateStr(),i.getStr()}function P9e(t,e){var n=e.originX,r=e.originY;(n||r)&&(t[Pf]=n+"px "+r+"px")}var I9e={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Hre(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function O9e(t,e,n){var r=t.shape.paths,i={},a,s;if(oe(r,function(l){var d=v$(n.zrId);d.animation=!0,cA(l,{},d,!0);var c=d.cssAnims,f=d.cssNodes,p=rn(c),h=p.length;if(h){s=p[h-1];var m=c[s];for(var g in m){var v=m[g];i[g]=i[g]||{d:""},i[g].d+=v.d||""}for(var _ in f){var x=f[_].animation;x.indexOf(s)>=0&&(a=x)}}}),!!a){e.d=!1;var o=Hre(i,n);return a.replace(s,o)}}function x9(t){return it(t)?_9[t]?"cubic-bezier("+_9[t]+")":WP(t)?t:"":""}function cA(t,e,n,r){var i=t.animators,a=i.length,s=[];if(t instanceof oI){var o=O9e(t,e,n);if(o)s.push(o);else if(!a)return}else if(!a)return;for(var l={},d=0;d<a;d++){var c=i[d],f=[c.getMaxTime()/1e3+"s"],p=x9(c.getClip().easing),h=c.getDelay();p?f.push(p):f.push("linear"),h&&f.push(h/1e3+"s"),c.getLoop()&&f.push("infinite");var m=f.join(" ");l[m]=l[m]||[m,[]],l[m][1].push(c)}function g(x){var w=x[1],k=w.length,S={},C={},A={},M="animation-timing-function";function $(te,ne,ce){for(var ve=te.getTracks(),Y=te.getMaxTime(),K=0;K<ve.length;K++){var H=ve[K];if(H.needsAnimate()){var ae=H.keyframes,be=H.propName;if(ce&&(be=ce(be)),be)for(var ue=0;ue<ae.length;ue++){var pe=ae[ue],ye=Math.round(pe.time/Y*100)+"%",Me=x9(pe.easing),Te=pe.rawValue;(it(Te)||pn(Te))&&(ne[ye]=ne[ye]||{},ne[ye][be]=pe.rawValue,Me&&(ne[ye][M]=Me))}}}}for(var R=0;R<k;R++){var I=w[R],B=I.targetName;B?B==="shape"&&$(I,C):!r&&$(I,S)}for(var j in S){var z={};Ree(z,t),Oe(z,S[j]);var F=Eee(z),q=S[j][M];A[j]=F?{transform:F}:{},P9e(A[j],z),q&&(A[j][M]=q)}var N,O=!0;for(var j in C){A[j]=A[j]||{};var V=!N,q=C[j][M];V&&(N=new Bl);var L=N.len();N.reset(),A[j].d=R9e(t,C[j],N);var U=N.len();if(!V&&L!==U){O=!1;break}q&&(A[j][M]=q)}if(!O)for(var j in A)delete A[j].d;if(!r)for(var R=0;R<k;R++){var I=w[R],B=I.targetName;B==="style"&&$(I,A,function(ve){return I9e[ve]})}for(var G=rn(A),X=!0,re,R=1;R<G.length;R++){var ee=G[R-1],de=G[R];if(A[ee][Pf]!==A[de][Pf]){X=!1;break}re=A[ee][Pf]}if(X&&re){for(var j in A)A[j][Pf]&&delete A[j][Pf];e[Pf]=re}if(kn(G,function(te){return rn(A[te]).length>0}).length){var se=Hre(A,n);return se+" "+x[0]+" both"}}for(var v in l){var o=g(l[v]);o&&s.push(o)}if(s.length){var _=n.zrId+"-cls-"+Ure();n.cssNodes["."+_]={animation:s.join(",")},e.class=_}}function L9e(t,e,n){if(!t.ignore)if(t.isSilent()){var r={"pointer-events":"none"};w9(r,e,n)}else{var i=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},a=i.fill;if(!a){var s=t.style&&t.style.fill,o=t.states.select&&t.states.select.style&&t.states.select.style.fill,l=t.currentStates.indexOf("select")>=0&&o||s;l&&(a=MM(l))}var d=i.lineWidth;if(d){var c=!i.strokeNoScale&&t.transform?t.transform[0]:1;d=d/c}var r={cursor:"pointer"};a&&(r.fill=a),i.stroke&&(r.stroke=i.stroke),d&&(r["stroke-width"]=d),w9(r,e,n)}}function w9(t,e,n,r){var i=JSON.stringify(t),a=n.cssStyleCache[i];a||(a=n.zrId+"-cls-"+Ure(),n.cssStyleCache[i]=a,n.cssNodes["."+a+":hover"]=t),e.class=e.class?e.class+" "+a:a}var C1=Math.round;function qre(t){return t&&it(t.src)}function Wre(t){return t&&gt(t.toDataURL)}function BI(t,e,n,r){C9e(function(i,a){var s=i==="fill"||i==="stroke";s&&Aee(a)?Yre(e,t,i,r):s&&GP(a)?Kre(n,t,i,r):t[i]=a,s&&r.ssr&&a==="none"&&(t["pointer-events"]="visible")},e,n,!1),U9e(n,t,r)}function zI(t,e){var n=OLe(e);n&&(n.each(function(r,i){r!=null&&(t[(y9+i).toLowerCase()]=r+"")}),e.isSilent()&&(t[y9+"silent"]="true"))}function k9(t){return ac(t[0]-1)&&ac(t[1])&&ac(t[2])&&ac(t[3]-1)}function V9e(t){return ac(t[4])&&ac(t[5])}function UI(t,e,n){if(e&&!(V9e(e)&&k9(e))){var r=1e4;t.transform=k9(e)?"translate("+C1(e[4]*r)/r+" "+C1(e[5]*r)/r+")":iLe(e)}}function S9(t,e,n){for(var r=t.points,i=[],a=0;a<r.length;a++)i.push(C1(r[a][0]*n)/n),i.push(C1(r[a][1]*n)/n);e.points=i.join(" ")}function C9(t){return!t.smooth}function N9e(t){var e=ze(t,function(n){return typeof n=="string"?[n,n]:n});return function(n,r,i){for(var a=0;a<e.length;a++){var s=e[a],o=n[s[0]];o!=null&&(r[s[1]]=C1(o*i)/i)}}}var j9e={circle:[N9e(["cx","cy","r"])],polyline:[S9,C9],polygon:[S9,C9]};function F9e(t){for(var e=t.animators,n=0;n<e.length;n++)if(e[n].targetName==="shape")return!0;return!1}function Gre(t,e){var n=t.style,r=t.shape,i=j9e[t.type],a={},s=e.animation,o="path",l=t.style.strokePercent,d=e.compress&&Tee(t)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(s&&F9e(t))&&!(l<1)){o=t.type;var c=Math.pow(10,d);i[0](r,a,c)}else{var f=!t.path||t.shapeChanged();t.path||t.createPathProxy();var p=t.path;f&&(p.beginPath(),t.buildPath(p,t.shape),t.pathUpdated());var h=p.getVersion(),m=t,g=m.__svgPathBuilder;(m.__svgPathVersion!==h||!g||l!==m.__svgPathStrokePercent)&&(g||(g=m.__svgPathBuilder=new jre),g.reset(d),p.rebuildPath(g,l),g.generateStr(),m.__svgPathVersion=h,m.__svgPathStrokePercent=l),a.d=g.getStr()}return UI(a,t.transform),BI(a,n,t,e),zI(a,t),e.animation&&cA(t,a,e),e.emphasis&&L9e(t,a,e),ai(o,t.id+"",a)}function B9e(t,e){var n=t.style,r=n.image;if(r&&!it(r)&&(qre(r)?r=r.src:Wre(r)&&(r=r.toDataURL())),!!r){var i=n.x||0,a=n.y||0,s=n.width,o=n.height,l={href:r,width:s,height:o};return i&&(l.x=i),a&&(l.y=a),UI(l,t.transform),BI(l,n,t,e),zI(l,t),e.animation&&cA(t,l,e),ai("image",t.id+"",l)}}function z9e(t,e){var n=t.style,r=n.text;if(r!=null&&(r+=""),!(!r||isNaN(n.x)||isNaN(n.y))){var i=n.font||$c,a=n.x||0,s=sLe(n.y||0,VC(i),n.textBaseline),o=aLe[n.textAlign]||n.textAlign,l={"dominant-baseline":"central","text-anchor":o};if(rte(n)){var d="",c=n.fontStyle,f=nte(n.fontSize);if(!parseFloat(f))return;var p=n.fontFamily||ree,h=n.fontWeight;d+="font-size:"+f+";font-family:"+p+";",c&&c!=="normal"&&(d+="font-style:"+c+";"),h&&h!=="normal"&&(d+="font-weight:"+h+";"),l.style=d}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),s&&(l.y=s),UI(l,t.transform),BI(l,n,t,e),zI(l,t),e.animation&&cA(t,l,e),ai("text",t.id+"",l,void 0,r)}}function A9(t,e){if(t instanceof Zt)return Gre(t,e);if(t instanceof xi)return B9e(t,e);if(t instanceof hg)return z9e(t,e)}function U9e(t,e,n){var r=t.style;if(oLe(r)){var i=lLe(t),a=n.shadowCache,s=a[i];if(!s){var o=t.getGlobalScale(),l=o[0],d=o[1];if(!l||!d)return;var c=r.shadowOffsetX||0,f=r.shadowOffsetY||0,p=r.shadowBlur,h=f1(r.shadowColor),m=h.opacity,g=h.color,v=p/2/l,_=p/2/d,x=v+" "+_;s=n.zrId+"-s"+n.shadowIdx++,n.defs[s]=ai("filter",s,{id:s,x:"-100%",y:"-100%",width:"300%",height:"300%"},[ai("feDropShadow","",{dx:c/l,dy:f/d,stdDeviation:x,"flood-color":g,"flood-opacity":m})]),a[i]=s}e.filter=LC(s)}}function Yre(t,e,n,r){var i=t[n],a,s={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(See(i))a="linearGradient",s.x1=i.x,s.y1=i.y,s.x2=i.x2,s.y2=i.y2;else if(Cee(i))a="radialGradient",s.cx=$t(i.x,.5),s.cy=$t(i.y,.5),s.r=$t(i.r,.5);else return;for(var o=i.colorStops,l=[],d=0,c=o.length;d<c;++d){var f=$M(o[d].offset)*100+"%",p=o[d].color,h=f1(p),m=h.color,g=h.opacity,v={offset:f};v["stop-color"]=m,g<1&&(v["stop-opacity"]=g),l.push(ai("stop",d+"",v))}var _=ai(a,"",s,l),x=FI(_),w=r.gradientCache,k=w[x];k||(k=r.zrId+"-g"+r.gradientIdx++,w[x]=k,s.id=k,r.defs[k]=ai(a,k,s,l)),e[n]=LC(k)}function Kre(t,e,n,r){var i=t.style[n],a=t.getBoundingRect(),s={},o=i.repeat,l=o==="no-repeat",d=o==="repeat-x",c=o==="repeat-y",f;if(kee(i)){var p=i.imageWidth,h=i.imageHeight,m=void 0,g=i.image;if(it(g)?m=g:qre(g)?m=g.src:Wre(g)&&(m=g.toDataURL()),typeof Image=="undefined"){var v="Image width/height must been given explictly in svg-ssr renderer.";Ta(p,v),Ta(h,v)}else if(p==null||h==null){var _=function(R,I){if(R){var B=R.elm,j=p||I.width,z=h||I.height;R.tag==="pattern"&&(d?(z=1,j/=a.width):c&&(j=1,z/=a.height)),R.attrs.width=j,R.attrs.height=z,B&&(B.setAttribute("width",j),B.setAttribute("height",z))}},x=JP(m,null,t,function(R){l||_(C,R),_(f,R)});x&&x.width&&x.height&&(p=p||x.width,h=h||x.height)}f=ai("image","img",{href:m,width:p,height:h}),s.width=p,s.height=h}else i.svgElement&&(f=xt(i.svgElement),s.width=i.svgWidth,s.height=i.svgHeight);if(f){var w,k;l?w=k=1:d?(k=1,w=s.width/a.width):c?(w=1,k=s.height/a.height):s.patternUnits="userSpaceOnUse",w!=null&&!isNaN(w)&&(s.width=w),k!=null&&!isNaN(k)&&(s.height=k);var S=Eee(i);S&&(s.patternTransform=S);var C=ai("pattern","",s,[f]),A=FI(C),M=r.patternCache,$=M[A];$||($=r.zrId+"-p"+r.patternIdx++,M[A]=$,s.id=$,C=r.defs[$]=ai("pattern",$,s,[f])),e[n]=LC($)}}function H9e(t,e,n){var r=n.clipPathCache,i=n.defs,a=r[t.id];if(!a){a=n.zrId+"-c"+n.clipPathIdx++;var s={id:a};r[t.id]=a,i[a]=ai("clipPath",a,s,[Gre(t,n)])}e["clip-path"]=LC(a)}function T9(t){return document.createTextNode(t)}function Gf(t,e,n){t.insertBefore(e,n)}function E9(t,e){t.removeChild(e)}function M9(t,e){t.appendChild(e)}function Xre(t){return t.parentNode}function Zre(t){return t.nextSibling}function l3(t,e){t.textContent=e}var $9=58,q9e=120,W9e=ai("","");function y$(t){return t===void 0}function dl(t){return t!==void 0}function G9e(t,e,n){for(var r={},i=e;i<=n;++i){var a=t[i].key;a!==void 0&&(r[a]=i)}return r}function yy(t,e){var n=t.key===e.key,r=t.tag===e.tag;return r&&n}function A1(t){var e,n=t.children,r=t.tag;if(dl(r)){var i=t.elm=zre(r);if(HI(W9e,t),Be(n))for(e=0;e<n.length;++e){var a=n[e];a!=null&&M9(i,A1(a))}else dl(t.text)&&!_t(t.text)&&M9(i,T9(t.text))}else t.elm=T9(t.text);return t.elm}function Qre(t,e,n,r,i){for(;r<=i;++r){var a=n[r];a!=null&&Gf(t,A1(a),e)}}function zk(t,e,n,r){for(;n<=r;++n){var i=e[n];if(i!=null)if(dl(i.tag)){var a=Xre(i.elm);E9(a,i.elm)}else E9(t,i.elm)}}function HI(t,e){var n,r=e.elm,i=t&&t.attrs||{},a=e.attrs||{};if(i!==a){for(n in a){var s=a[n],o=i[n];o!==s&&(s===!0?r.setAttribute(n,""):s===!1?r.removeAttribute(n):n==="style"?r.style.cssText=s:n.charCodeAt(0)!==q9e?r.setAttribute(n,s):n==="xmlns:xlink"||n==="xmlns"?r.setAttributeNS(A9e,n,s):n.charCodeAt(3)===$9?r.setAttributeNS(T9e,n,s):n.charCodeAt(5)===$9?r.setAttributeNS(Bre,n,s):r.setAttribute(n,s))}for(n in i)n in a||r.removeAttribute(n)}}function Y9e(t,e,n){for(var r=0,i=0,a=e.length-1,s=e[0],o=e[a],l=n.length-1,d=n[0],c=n[l],f,p,h,m;r<=a&&i<=l;)s==null?s=e[++r]:o==null?o=e[--a]:d==null?d=n[++i]:c==null?c=n[--l]:yy(s,d)?(bm(s,d),s=e[++r],d=n[++i]):yy(o,c)?(bm(o,c),o=e[--a],c=n[--l]):yy(s,c)?(bm(s,c),Gf(t,s.elm,Zre(o.elm)),s=e[++r],c=n[--l]):yy(o,d)?(bm(o,d),Gf(t,o.elm,s.elm),o=e[--a],d=n[++i]):(y$(f)&&(f=G9e(e,r,a)),p=f[d.key],y$(p)?Gf(t,A1(d),s.elm):(h=e[p],h.tag!==d.tag?Gf(t,A1(d),s.elm):(bm(h,d),e[p]=void 0,Gf(t,h.elm,s.elm))),d=n[++i]);(r<=a||i<=l)&&(r>a?(m=n[l+1]==null?null:n[l+1].elm,Qre(t,m,n,i,l)):zk(t,e,r,a))}function bm(t,e){var n=e.elm=t.elm,r=t.children,i=e.children;t!==e&&(HI(t,e),y$(e.text)?dl(r)&&dl(i)?r!==i&&Y9e(n,r,i):dl(i)?(dl(t.text)&&l3(n,""),Qre(n,null,i,0,i.length-1)):dl(r)?zk(n,r,0,r.length-1):dl(t.text)&&l3(n,""):t.text!==e.text&&(dl(r)&&zk(n,r,0,r.length-1),l3(n,e.text)))}function K9e(t,e){if(yy(t,e))bm(t,e);else{var n=t.elm,r=Xre(n);A1(e),r!==null&&(Gf(r,e.elm,Zre(n)),zk(r,[t],0,0))}return e}var X9e=0,Z9e=function(){function t(e,n,r){if(this.type="svg",this.refreshHover=D9(),this.configLayer=D9(),this.storage=n,this._opts=r=Oe({},r),this.root=e,this._id="zr"+X9e++,this._oldVNode=b9(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=zre("svg");HI(null,this._oldVNode),i.appendChild(a),e.appendChild(i)}this.resize(r.width,r.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",K9e(this._oldVNode,e),this._oldVNode=e}},t.prototype.renderOneToVNode=function(e){return A9(e,v$(this._id))},t.prototype.renderToVNode=function(e){e=e||{};var n=this.storage.getDisplayList(!0),r=this._width,i=this._height,a=v$(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress,a.emphasis=e.emphasis,a.ssr=this._opts.ssr;var s=[],o=this._bgVNode=Q9e(r,i,this._backgroundColor,a);o&&s.push(o);var l=e.compress?null:this._mainVNode=ai("g","main",{},[]);this._paintList(n,a,l?l.children:s),l&&s.push(l);var d=ze(rn(a.defs),function(p){return a.defs[p]});if(d.length&&s.push(ai("defs","defs",{},d)),e.animation){var c=$9e(a.cssNodes,a.cssAnims,{newline:!0});if(c){var f=ai("style","stl",{},[],c);s.push(f)}}return b9(r,i,s,e.useViewBox)},t.prototype.renderToString=function(e){return e=e||{},FI(this.renderToVNode({animation:$t(e.cssAnimation,!0),emphasis:$t(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:$t(e.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(e,n,r){for(var i=e.length,a=[],s=0,o,l,d=0,c=0;c<i;c++){var f=e[c];if(!f.invisible){var p=f.__clipPaths,h=p&&p.length||0,m=l&&l.length||0,g=void 0;for(g=Math.max(h-1,m-1);g>=0&&!(p&&l&&p[g]===l[g]);g--);for(var v=m-1;v>g;v--)s--,o=a[s-1];for(var _=g+1;_<h;_++){var x={};H9e(p[_],x,n);var w=ai("g","clip-g-"+d++,x,[]);(o?o.children:r).push(w),a[s++]=w,o=w}l=p;var k=A9(f,n);k&&(o?o.children:r).push(k)}}},t.prototype.resize=function(e,n){var r=this._opts,i=this.root,a=this._viewport;if(e!=null&&(r.width=e),n!=null&&(r.height=n),i&&a&&(a.style.display="none",e=Tm(i,0,r),n=Tm(i,1,r),a.style.display=""),this._width!==e||this._height!==n){if(this._width=e,this._height=n,a){var s=a.style;s.width=e+"px",s.height=n+"px"}if(GP(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",e),o.setAttribute("height",n));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",n))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(e){var n=this.renderToString(),r="data:image/svg+xml;";return e?(n=dLe(n),n&&r+"base64,"+n):r+"charset=UTF-8,"+encodeURIComponent(n)},t}();function D9(t){return function(){}}function Q9e(t,e,n,r){var i;if(n&&n!=="none")if(i=ai("rect","bg",{width:t,height:e,x:"0",y:"0"}),Aee(n))Yre({fill:n},i.attrs,"fill",r);else if(GP(n))Kre({style:{fill:n},dirty:Or,getBoundingRect:function(){return{width:t,height:e}}},i.attrs,"fill",r);else{var a=f1(n),s=a.color,o=a.opacity;i.attrs.fill=s,o<1&&(i.attrs["fill-opacity"]=o)}return i}function J9e(t){t.registerPainter("svg",Z9e)}function R9(t,e,n){var r=Dc.createCanvas(),i=e.getWidth(),a=e.getHeight(),s=r.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=i+"px",s.height=a+"px",r.setAttribute("data-zr-dom-id",t)),r.width=i*n,r.height=a*n,r}var u3=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var s;i=i||_k,typeof n=="string"?s=R9(n,r,i):_t(n)&&(s=n,n=s.id),a.id=n,a.dom=s;var o=s.style;return o&&(uee(s),s.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=R9("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},e.prototype.createRepaintRects=function(n,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],o=this.maxRepaintRectCount,l=!1,d=new qt(0,0,0,0);function c(x){if(!(!x.isFinite()||x.isZero()))if(s.length===0){var w=new qt(0,0,0,0);w.copy(x),s.push(w)}else{for(var k=!1,S=1/0,C=0,A=0;A<s.length;++A){var M=s[A];if(M.intersect(x)){var $=new qt(0,0,0,0);$.copy(M),$.union(x),s[A]=$,k=!0;break}else if(l){d.copy(x),d.union(M);var R=x.width*x.height,I=M.width*M.height,B=d.width*d.height,j=B-R-I;j<S&&(S=j,C=A)}}if(l&&(s[C].union(x),k=!0),!k){var w=new qt(0,0,0,0);w.copy(x),s.push(w)}l||(l=s.length>=o)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var p=n[f];if(p){var h=p.shouldBePainted(i,a,!0,!0),m=p.__isRendered&&(p.__dirty&ns||!h)?p.getPrevPaintRect():null;m&&c(m);var g=h&&(p.__dirty&ns||!p.__isRendered)?p.getPaintRect():null;g&&c(g)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var p=r[f],h=p&&p.shouldBePainted(i,a,!0,!0);if(p&&(!h||!p.__zr)&&p.__isRendered){var m=p.getPrevPaintRect();m&&c(m)}}var v;do{v=!1;for(var f=0;f<s.length;){if(s[f].isZero()){s.splice(f,1);continue}for(var _=f+1;_<s.length;)s[f].intersect(s[_])?(v=!0,s[f].union(s[_]),s.splice(_,1)):_++;f++}}while(v);return this._paintRects=s,s},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(n,r){var i=this.dpr,a=this.dom,s=a.style,o=this.domBack;s&&(s.width=n+"px",s.height=r+"px"),a.width=n*i,a.height=r*i,o&&(o.width=n*i,o.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(n,r,i){var a=this.dom,s=this.ctx,o=a.width,l=a.height;r=r||this.clearColor;var d=this.motionBlur&&!n,c=this.lastFrameAlpha,f=this.dpr,p=this;d&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,o/f,l/f));var h=this.domBack;function m(g,v,_,x){if(s.clearRect(g,v,_,x),r&&r!=="transparent"){var w=void 0;if(PC(r)){var k=r.global||r.__width===_&&r.__height===x;w=k&&r.__canvasGradient||l$(s,r,{x:0,y:0,width:_,height:x}),r.__canvasGradient=w,r.__width=_,r.__height=x}else y6e(r)&&(r.scaleX=r.scaleX||f,r.scaleY=r.scaleY||f,w=u$(s,r,{dirty:function(){p.setUnpainted(),p.painter.refresh()}}));s.save(),s.fillStyle=w||r,s.fillRect(g,v,_,x),s.restore()}d&&(s.save(),s.globalAlpha=c,s.drawImage(h,g,v,_,x),s.restore())}!i||d?m(0,0,o,l):i.length&&oe(i,function(g){m(g.x*f,g.y*f,g.width*f,g.height*f)})},e}(ao),P9=1e5,Af=314159,fx=.01,eBe=.001;function tBe(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function nBe(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var rBe=function(){function t(e,n,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=Oe({},r||{}),this.dpr=r.devicePixelRatio||_k,this._singleCanvas=a,this.root=e;var s=e.style;s&&(uee(e),e.innerHTML=""),this.storage=n;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var c=e,f=c.width,p=c.height;r.width!=null&&(f=r.width),r.height!=null&&(p=r.height),this.dpr=r.devicePixelRatio||1,c.width=f*this.dpr,c.height=p*this.dpr,this._width=f,this._height=p;var h=new u3(c,this,this.dpr);h.__builtin__=!0,h.initContext(),l[Af]=h,h.zlevel=Af,o.push(Af),this._domRoot=e}else{this._width=Tm(e,0,r),this._height=Tm(e,1,r);var d=this._domRoot=nBe(this._width,this._height);e.appendChild(d)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.refresh=function(e){var n=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,r,e,this._redrawId);for(var a=0;a<i.length;a++){var s=i[a],o=this._layers[s];if(!o.__builtin__&&o.refresh){var l=a===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(e){var n=e.length,r=this._hoverlayer;if(r&&r.clear(),!!n){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,s=0;s<n;s++){var o=e[s];o.__inHover&&(r||(r=this._hoverlayer=this.getLayer(P9)),a||(a=r.ctx,a.save()),lp(a,o,i,s===n-1))}a&&a.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(P9)},t.prototype.paintOne=function(e,n){Nne(e,n)},t.prototype._paintList=function(e,n,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,n,r),s=a.finished,o=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),s)this.eachLayer(function(d){d.afterBrush&&d.afterBrush()});else{var l=this;hk(function(){l._paintList(e,n,r,i)})}}},t.prototype._compositeManually=function(){var e=this.getLayer(Af).ctx,n=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,n,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,n,r)})},t.prototype._doPaintList=function(e,n,r){for(var i=this,a=[],s=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],d=this._layers[l];d.__builtin__&&d!==this._hoverlayer&&(d.__dirty||r)&&a.push(d)}for(var c=!0,f=!1,p=function(g){var v=a[g],_=v.ctx,x=s&&v.createRepaintRects(e,n,h._width,h._height),w=r?v.__startIndex:v.__drawIndex,k=!r&&v.incremental&&Date.now,S=k&&Date.now(),C=v.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,C,x);else if(w===v.__startIndex){var A=e[w];(!A.incremental||!A.notClear||r)&&v.clear(!1,C,x)}w===-1&&(console.error("For some unknown reason. drawIndex is -1"),w=v.__startIndex);var M,$=function(j){var z={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(M=w;M<v.__endIndex;M++){var F=e[M];if(F.__inHover&&(f=!0),i._doPaintEl(F,v,s,j,z,M===v.__endIndex-1),k){var q=Date.now()-S;if(q>15)break}}z.prevElClipPaths&&_.restore()};if(x)if(x.length===0)M=v.__endIndex;else for(var R=h.dpr,I=0;I<x.length;++I){var B=x[I];_.save(),_.beginPath(),_.rect(B.x*R,B.y*R,B.width*R,B.height*R),_.clip(),$(B),_.restore()}else _.save(),$(),_.restore();v.__drawIndex=M,v.__drawIndex<v.__endIndex&&(c=!1)},h=this,m=0;m<a.length;m++)p(m);return Qt.wxa&&oe(this._layers,function(g){g&&g.ctx&&g.ctx.draw&&g.ctx.draw()}),{finished:c,needsRefreshHover:f}},t.prototype._doPaintEl=function(e,n,r,i,a,s){var o=n.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(lp(o,e,a,s),e.setPrevPaintRect(l))}else lp(o,e,a,s)},t.prototype.getLayer=function(e,n){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Af);var r=this._layers[e];return r||(r=new u3("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?jt(r,this._layerConfig[e],!0):this._layerConfig[e-fx]&&jt(r,this._layerConfig[e-fx],!0),n&&(r.virtual=n),this.insertLayer(e,r),r.initContext()),r},t.prototype.insertLayer=function(e,n){var r=this._layers,i=this._zlevelList,a=i.length,s=this._domRoot,o=null,l=-1;if(!r[e]&&tBe(n)){if(a>0&&e>i[0]){for(l=0;l<a-1&&!(i[l]<e&&i[l+1]>e);l++);o=r[i[l]]}if(i.splice(l+1,0,e),r[e]=n,!n.virtual)if(o){var d=o.dom;d.nextSibling?s.insertBefore(n.dom,d.nextSibling):s.appendChild(n.dom)}else s.firstChild?s.insertBefore(n.dom,s.firstChild):s.appendChild(n.dom);n.painter||(n.painter=this)}},t.prototype.eachLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(n,this._layers[a],a)}},t.prototype.eachBuiltinLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],s=this._layers[a];s.__builtin__&&e.call(n,s,a)}},t.prototype.eachOtherLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],s=this._layers[a];s.__builtin__||e.call(n,s,a)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(f,p){f.__dirty=f.__used=!1});function n(f){a&&(a.__endIndex!==f&&(a.__dirty=!0),a.__endIndex=f)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,s=0,o,l;for(l=0;l<e.length;l++){var i=e[l],d=i.zlevel,c=void 0;o!==d&&(o=d,s=0),i.incremental?(c=this.getLayer(d+eBe,this._needsManuallyCompositing),c.incremental=!0,s=1):c=this.getLayer(d+(s>0?fx:0),this._needsManuallyCompositing),c.__builtin__||jP("ZLevel "+d+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,n(l),a=c),i.__dirty&ns&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}n(l),this.eachBuiltinLayer(function(f,p){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(e){e.clear()},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e,oe(this._layers,function(n){n.setUnpainted()})},t.prototype.configLayer=function(e,n){if(n){var r=this._layerConfig;r[e]?jt(r[e],n,!0):r[e]=n;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+fx){var s=this._layers[a];jt(s,r[e],!0)}}}},t.prototype.delLayer=function(e){var n=this._layers,r=this._zlevelList,i=n[e];i&&(i.dom.parentNode.removeChild(i.dom),delete n[e],r.splice(Yt(r,e),1))},t.prototype.resize=function(e,n){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),n!=null&&(i.height=n),e=Tm(a,0,i),n=Tm(a,1,i),r.style.display="",this._width!==e||n!==this._height){r.style.width=e+"px",r.style.height=n+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(e,n);this.refresh(!0)}this._width=e,this._height=n}else{if(e==null||n==null)return;this._width=e,this._height=n,this.getLayer(Af).resize(e,n)}return this},t.prototype.clearLayer=function(e){var n=this._layers[e];n&&n.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Af].dom;var n=new u3("image",this,e.pixelRatio||this.dpr);n.initContext(),n.clear(!1,e.backgroundColor||this._backgroundColor);var r=n.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=n.dom.width,a=n.dom.height;this.eachLayer(function(f){f.__builtin__?r.drawImage(f.dom,0,0,i,a):f.renderToCanvas&&(r.save(),f.renderToCanvas(r),r.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,d=o.length;l<d;l++){var c=o[l];lp(r,c,s,l===d-1)}return n.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();function iBe(t){t.registerPainter("canvas",rBe)}var aBe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n){return md(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(n){var r=new kt,i=Ur("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);r.add(i),i.setStyle(n.lineStyle);var a=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),o=a==="none"?"circle":a,l=n.itemHeight*.8,d=Ur(o,(n.itemWidth-l)/2,(n.itemHeight-l)/2,l,l,n.itemStyle.fill);r.add(d),d.setStyle(n.itemStyle);var c=n.iconRotate==="inherit"?s:n.iconRotate||0;return d.rotation=c*Math.PI/180,d.setOrigin([n.itemWidth/2,n.itemHeight/2]),o.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill="#fff",d.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Zn);function bg(t,e){var n=t.mapDimensionsAll("defaultedLabel"),r=n.length;if(r===1){var i=gg(t,e,n[0]);return i!=null?i+"":null}else if(r){for(var a=[],s=0;s<n.length;s++)a.push(gg(t,e,n[s]));return a.join(" ")}}function Jre(t,e){var n=t.mapDimensionsAll("defaultedLabel");if(!Be(e))return e+"";for(var r=[],i=0;i<n.length;i++){var a=t.getDimensionIndex(n[i]);a>=0&&r.push(e[a])}return r.join(" ")}var Db=function(t){Ce(e,t);function e(n,r,i,a){var s=t.call(this)||this;return s.updateData(n,r,i,a),s}return e.prototype._createSymbol=function(n,r,i,a,s){this.removeAll();var o=Ur(n,-1,-1,2,2,null,s);o.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),o.drift=sBe,this._symbolType=n,this.add(o)},e.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){nd(this.childAt(0))},e.prototype.downplay=function(){rd(this.childAt(0))},e.prototype.setZ=function(n,r){var i=this.childAt(0);i.zlevel=n,i.z=r},e.prototype.setDraggable=function(n,r){var i=this.childAt(0);i.draggable=n,i.cursor=!r&&n?"move":i.cursor},e.prototype.updateData=function(n,r,i,a){this.silent=!1;var s=n.getItemVisual(r,"symbol")||"circle",o=n.hostModel,l=e.getSymbolSize(n,r),d=s!==this._symbolType,c=a&&a.disableAnimation;if(d){var f=n.getItemVisual(r,"symbolKeepAspect");this._createSymbol(s,n,r,l,f)}else{var p=this.childAt(0);p.silent=!1;var h={scaleX:l[0]/2,scaleY:l[1]/2};c?p.attr(h):yn(p,h,o,r),Vo(p)}if(this._updateCommon(n,r,l,i,a),d){var p=this.childAt(0);if(!c){var h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:p.style.opacity}};p.scaleX=p.scaleY=0,p.style.opacity=0,sr(p,h,o,r)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(n,r,i,a,s){var o=this.childAt(0),l=n.hostModel,d,c,f,p,h,m,g,v,_;if(a&&(d=a.emphasisItemStyle,c=a.blurItemStyle,f=a.selectItemStyle,p=a.focus,h=a.blurScope,g=a.labelStatesModels,v=a.hoverScale,_=a.cursorStyle,m=a.emphasisDisabled),!a||n.hasItemOption){var x=a&&a.itemModel?a.itemModel:n.getItemModel(r),w=x.getModel("emphasis");d=w.getModel("itemStyle").getItemStyle(),f=x.getModel(["select","itemStyle"]).getItemStyle(),c=x.getModel(["blur","itemStyle"]).getItemStyle(),p=w.get("focus"),h=w.get("blurScope"),m=w.get("disabled"),g=ui(x),v=w.getShallow("scale"),_=x.getShallow("cursor")}var k=n.getItemVisual(r,"symbolRotate");o.attr("rotation",(k||0)*Math.PI/180||0);var S=mh(n.getItemVisual(r,"symbolOffset"),i);S&&(o.x=S[0],o.y=S[1]),_&&o.attr("cursor",_);var C=n.getItemVisual(r,"style"),A=C.fill;if(o instanceof xi){var M=o.style;o.useStyle(Oe({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},C))}else o.__isEmptyBrush?o.useStyle(Oe({},C)):o.useStyle(C),o.style.decal=null,o.setColor(A,s&&s.symbolInnerColor),o.style.strokeNoScale=!0;var $=n.getItemVisual(r,"liftZ"),R=this._z2;$!=null?R==null&&(this._z2=o.z2,o.z2+=$):R!=null&&(o.z2=R,this._z2=null);var I=s&&s.useNameLabel;Li(o,g,{labelFetcher:l,labelDataIndex:r,defaultText:B,inheritColor:A,defaultOpacity:C.opacity});function B(F){return I?n.getName(F):bg(n,F)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var j=o.ensureState("emphasis");j.style=d,o.ensureState("select").style=f,o.ensureState("blur").style=c;var z=v==null||v===!0?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;j.scaleX=this._sizeX*z,j.scaleY=this._sizeY*z,this.setSymbolScale(1),_r(this,p,h,m)},e.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},e.prototype.fadeOut=function(n,r,i){var a=this.childAt(0),s=Tt(this).dataIndex,o=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&Pc(l,{style:{opacity:0}},r,{dataIndex:s,removeOpt:o,cb:function(){a.removeTextContent()}})}else a.removeTextContent();Pc(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:s,cb:n,removeOpt:o})},e.getSymbolSize=function(n,r){return Wg(n.getItemVisual(r,"symbolSize"))},e}(kt);function sBe(t,e){this.parent.drift(t,e)}function d3(t,e,n,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&t.getItemVisual(n,"symbol")!=="none"}function I9(t){return t!=null&&!_t(t)&&(t={isIgnore:t}),t||{}}function O9(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:ui(e),cursorStyle:e.get("cursor")}}var Rb=function(){function t(e){this.group=new kt,this._SymbolCtor=e||Db}return t.prototype.updateData=function(e,n){this._progressiveEls=null,n=I9(n);var r=this.group,i=e.hostModel,a=this._data,s=this._SymbolCtor,o=n.disableAnimation,l=O9(e),d={disableAnimation:o},c=n.getSymbolPoint||function(f){return e.getItemLayout(f)};a||r.removeAll(),e.diff(a).add(function(f){var p=c(f);if(d3(e,p,f,n)){var h=new s(e,f,l,d);h.setPosition(p),e.setItemGraphicEl(f,h),r.add(h)}}).update(function(f,p){var h=a.getItemGraphicEl(p),m=c(f);if(!d3(e,m,f,n)){r.remove(h);return}var g=e.getItemVisual(f,"symbol")||"circle",v=h&&h.getSymbolType&&h.getSymbolType();if(!h||v&&v!==g)r.remove(h),h=new s(e,f,l,d),h.setPosition(m);else{h.updateData(e,f,l,d);var _={x:m[0],y:m[1]};o?h.attr(_):yn(h,_,i)}r.add(h),e.setItemGraphicEl(f,h)}).remove(function(f){var p=a.getItemGraphicEl(f);p&&p.fadeOut(function(){r.remove(p)},i)}).execute(),this._getSymbolPoint=c,this._data=e},t.prototype.updateLayout=function(){var e=this,n=this._data;n&&n.eachItemGraphicEl(function(r,i){var a=e._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=O9(e),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,n,r){this._progressiveEls=[],r=I9(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var s=n.getItemLayout(a);if(d3(n,s,a,r)){var o=new this._SymbolCtor(n,a,this._seriesScope);o.traverse(i),o.setPosition(s),this.group.add(o),n.setItemGraphicEl(a,o),this._progressiveEls.push(o)}}},t.prototype.eachRendered=function(e){Gc(this._progressiveEls||this.group,e)},t.prototype.remove=function(e){var n=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){n.remove(i)},r.hostModel)}):n.removeAll()},t}();function eie(t,e,n){var r=t.getBaseAxis(),i=t.getOtherAxis(r),a=oBe(i,n),s=r.dim,o=i.dim,l=e.mapDimension(o),d=e.mapDimension(s),c=o==="x"||o==="radius"?1:0,f=ze(t.dimensions,function(m){return e.mapDimension(m)}),p=!1,h=e.getCalculationInfo("stackResultDimension");return Oc(e,f[0])&&(p=!0,f[0]=h),Oc(e,f[1])&&(p=!0,f[1]=h),{dataDimsForPoint:f,valueStart:a,valueAxisDim:o,baseAxisDim:s,stacked:!!p,valueDim:l,baseDim:d,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function oBe(t,e){var n=0,r=t.scale.getExtent();return e==="start"?n=r[0]:e==="end"?n=r[1]:pn(e)&&!isNaN(e)?n=e:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}function tie(t,e,n,r){var i=NaN;t.stacked&&(i=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=t.valueStart);var a=t.baseDataOffset,s=[];return s[a]=n.get(t.baseDim,r),s[1-a]=i,e.dataToPoint(s)}function lBe(t,e){var n=[];return e.diff(t).add(function(r){n.push({cmd:"+",idx:r})}).update(function(r,i){n.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){n.push({cmd:"-",idx:r})}).execute(),n}function uBe(t,e,n,r,i,a,s,o){for(var l=lBe(t,e),d=[],c=[],f=[],p=[],h=[],m=[],g=[],v=eie(i,e,s),_=t.getLayout("points")||[],x=e.getLayout("points")||[],w=0;w<l.length;w++){var k=l[w],S=!0,C=void 0,A=void 0;switch(k.cmd){case"=":C=k.idx*2,A=k.idx1*2;var M=_[C],$=_[C+1],R=x[A],I=x[A+1];(isNaN(M)||isNaN($))&&(M=R,$=I),d.push(M,$),c.push(R,I),f.push(n[C],n[C+1]),p.push(r[A],r[A+1]),g.push(e.getRawIndex(k.idx1));break;case"+":var B=k.idx,j=v.dataDimsForPoint,z=i.dataToPoint([e.get(j[0],B),e.get(j[1],B)]);A=B*2,d.push(z[0],z[1]),c.push(x[A],x[A+1]);var F=tie(v,i,e,B);f.push(F[0],F[1]),p.push(r[A],r[A+1]),g.push(e.getRawIndex(B));break;case"-":S=!1}S&&(h.push(k),m.push(m.length))}m.sort(function(ee,de){return g[ee]-g[de]});for(var q=d.length,N=xl(q),O=xl(q),V=xl(q),L=xl(q),U=[],w=0;w<m.length;w++){var G=m[w],X=w*2,re=G*2;N[X]=d[re],N[X+1]=d[re+1],O[X]=c[re],O[X+1]=c[re+1],V[X]=f[re],V[X+1]=f[re+1],L[X]=p[re],L[X+1]=p[re+1],U[w]=h[G]}return{current:N,next:O,stackedOnCurrent:V,stackedOnNext:L,status:U}}var Td=Math.min,Ed=Math.max;function Pp(t,e){return isNaN(t)||isNaN(e)}function b$(t,e,n,r,i,a,s,o,l){for(var d,c,f,p,h,m,g=n,v=0;v<r;v++){var _=e[g*2],x=e[g*2+1];if(g>=i||g<0)break;if(Pp(_,x)){if(l){g+=a;continue}break}if(g===n)t[a>0?"moveTo":"lineTo"](_,x),f=_,p=x;else{var w=_-d,k=x-c;if(w*w+k*k<.5){g+=a;continue}if(s>0){for(var S=g+a,C=e[S*2],A=e[S*2+1];C===_&&A===x&&v<r;)v++,S+=a,g+=a,C=e[S*2],A=e[S*2+1],_=e[g*2],x=e[g*2+1],w=_-d,k=x-c;var M=v+1;if(l)for(;Pp(C,A)&&M<r;)M++,S+=a,C=e[S*2],A=e[S*2+1];var $=.5,R=0,I=0,B=void 0,j=void 0;if(M>=r||Pp(C,A))h=_,m=x;else{R=C-d,I=A-c;var z=_-d,F=C-_,q=x-c,N=A-x,O=void 0,V=void 0;if(o==="x"){O=Math.abs(z),V=Math.abs(F);var L=R>0?1:-1;h=_-L*O*s,m=x,B=_+L*V*s,j=x}else if(o==="y"){O=Math.abs(q),V=Math.abs(N);var U=I>0?1:-1;h=_,m=x-U*O*s,B=_,j=x+U*V*s}else O=Math.sqrt(z*z+q*q),V=Math.sqrt(F*F+N*N),$=V/(V+O),h=_-R*s*(1-$),m=x-I*s*(1-$),B=_+R*s*$,j=x+I*s*$,B=Td(B,Ed(C,_)),j=Td(j,Ed(A,x)),B=Ed(B,Td(C,_)),j=Ed(j,Td(A,x)),R=B-_,I=j-x,h=_-R*O/V,m=x-I*O/V,h=Td(h,Ed(d,_)),m=Td(m,Ed(c,x)),h=Ed(h,Td(d,_)),m=Ed(m,Td(c,x)),R=_-h,I=x-m,B=_+R*V/O,j=x+I*V/O}t.bezierCurveTo(f,p,h,m,_,x),f=B,p=j}else t.lineTo(_,x)}d=_,c=x,g+=a}return v}var nie=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),dBe=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new nie},e.prototype.buildPath=function(n,r){var i=r.points,a=0,s=i.length/2;if(r.connectNulls){for(;s>0&&Pp(i[s*2-2],i[s*2-1]);s--);for(;a<s&&Pp(i[a*2],i[a*2+1]);a++);}for(;a<s;)a+=b$(n,i,a,s,s,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(n,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,s=Bl.CMD,o,l,d=r==="x",c=[],f=0;f<a.length;){var p=a[f++],h=void 0,m=void 0,g=void 0,v=void 0,_=void 0,x=void 0,w=void 0;switch(p){case s.M:o=a[f++],l=a[f++];break;case s.L:if(h=a[f++],m=a[f++],w=d?(n-o)/(h-o):(n-l)/(m-l),w<=1&&w>=0){var k=d?(m-l)*w+l:(h-o)*w+o;return d?[n,k]:[k,n]}o=h,l=m;break;case s.C:h=a[f++],m=a[f++],g=a[f++],v=a[f++],_=a[f++],x=a[f++];var S=d?gk(o,h,g,_,n,c):gk(l,m,v,x,n,c);if(S>0)for(var C=0;C<S;C++){var A=c[C];if(A<=1&&A>=0){var k=d?ei(l,m,v,x,A):ei(o,h,g,_,A);return d?[n,k]:[k,n]}}o=_,l=x;break}}},e}(Zt),cBe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(nie),rie=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new cBe},e.prototype.buildPath=function(n,r){var i=r.points,a=r.stackedOnPoints,s=0,o=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;o>0&&Pp(i[o*2-2],i[o*2-1]);o--);for(;s<o&&Pp(i[s*2],i[s*2+1]);s++);}for(;s<o;){var d=b$(n,i,s,o,o,1,r.smooth,l,r.connectNulls);b$(n,a,s+d-1,d,o,-1,r.stackedOnSmooth,l,r.connectNulls),s+=d+1,n.closePath()}},e}(Zt);function iie(t,e,n,r,i){var a=t.getArea(),s=a.x,o=a.y,l=a.width,d=a.height,c=n.get(["lineStyle","width"])||0;s-=c/2,o-=c/2,l+=c,d+=c,l=Math.ceil(l),s!==Math.floor(s)&&(s=Math.floor(s),l++);var f=new sn({shape:{x:s,y:o,width:l,height:d}});if(e){var p=t.getBaseAxis(),h=p.isHorizontal(),m=p.inverse;h?(m&&(f.shape.x+=l),f.shape.width=0):(m||(f.shape.y+=d),f.shape.height=0);var g=gt(i)?function(v){i(v,f)}:null;sr(f,{shape:{width:l,height:d,x:s,y:o}},n,null,r,g)}return f}function aie(t,e,n){var r=t.getArea(),i=Ar(r.r0,1),a=Ar(r.r,1),s=new Ma({shape:{cx:Ar(t.cx,1),cy:Ar(t.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var o=t.getBaseAxis().dim==="angle";o?s.shape.endAngle=r.startAngle:s.shape.r=i,sr(s,{shape:{endAngle:r.endAngle,r:a}},n)}return s}function Pb(t,e,n,r,i){if(t){if(t.type==="polar")return aie(t,e,n);if(t.type==="cartesian2d")return iie(t,e,n,r,i)}else return null;return null}function vh(t,e){return t.type===e}function L9(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function V9(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<t.length;){var s=t[a++],o=t[a++];isNaN(s)||(e=Math.min(s,e),r=Math.max(s,r)),isNaN(o)||(n=Math.min(o,n),i=Math.max(o,i))}return[[e,n],[r,i]]}function N9(t,e){var n=V9(t),r=n[0],i=n[1],a=V9(e),s=a[0],o=a[1];return Math.max(Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]),Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]))}function j9(t){return pn(t)?t:t?.5:0}function fBe(t,e,n){if(!n.valueDim)return[];for(var r=e.count(),i=xl(r*2),a=0;a<r;a++){var s=tie(n,t,e,a);i[a*2]=s[0],i[a*2+1]=s[1]}return i}function Md(t,e,n,r,i){var a=n.getBaseAxis(),s=a.dim==="x"||a.dim==="radius"?0:1,o=[],l=0,d=[],c=[],f=[],p=[];if(i){for(l=0;l<t.length;l+=2){var h=e||t;!isNaN(h[l])&&!isNaN(h[l+1])&&p.push(t[l],t[l+1])}t=p}for(l=0;l<t.length-2;l+=2)switch(f[0]=t[l+2],f[1]=t[l+3],c[0]=t[l],c[1]=t[l+1],o.push(c[0],c[1]),r){case"end":d[s]=f[s],d[1-s]=c[1-s],o.push(d[0],d[1]);break;case"middle":var m=(c[s]+f[s])/2,g=[];d[s]=g[s]=m,d[1-s]=c[1-s],g[1-s]=f[1-s],o.push(d[0],d[1]),o.push(g[0],g[1]);break;default:d[s]=c[s],d[1-s]=f[1-s],o.push(d[0],d[1])}return o.push(t[l++],t[l++]),o}function pBe(t,e){var n=[],r=t.length,i,a;function s(c,f,p){var h=c.coord,m=(p-h)/(f.coord-h),g=rLe(m,[c.color,f.color]);return{coord:p,color:g}}for(var o=0;o<r;o++){var l=t[o],d=l.coord;if(d<0)i=l;else if(d>e){a?n.push(s(a,l,e)):i&&n.push(s(i,l,0),s(i,l,e));break}else i&&(n.push(s(i,l,0)),i=null),n.push(l),a=l}return n}function hBe(t,e,n){var r=t.getVisual("visualMeta");if(!(!r||!r.length||!t.count())&&e.type==="cartesian2d"){for(var i,a,s=r.length-1;s>=0;s--){var o=t.getDimensionInfo(r[s].dimension);if(i=o&&o.coordDim,i==="x"||i==="y"){a=r[s];break}}if(a){var l=e.getAxis(i),d=ze(a.stops,function(w){return{coord:l.toGlobalCoord(l.dataToCoord(w.value)),color:w.color}}),c=d.length,f=a.outerColors.slice();c&&d[0].coord>d[c-1].coord&&(d.reverse(),f.reverse());var p=pBe(d,i==="x"?n.getWidth():n.getHeight()),h=p.length;if(!h&&c)return d[0].coord<0?f[1]?f[1]:d[c-1].color:f[0]?f[0]:d[0].color;var m=10,g=p[0].coord-m,v=p[h-1].coord+m,_=v-g;if(_<.001)return"transparent";oe(p,function(w){w.offset=(w.coord-g)/_}),p.push({offset:h?p[h-1].offset:.5,color:f[1]||"transparent"}),p.unshift({offset:h?p[0].offset:.5,color:f[0]||"transparent"});var x=new Sb(0,0,0,0,p,!0);return x[i]=g,x[i+"2"]=v,x}}}function mBe(t,e,n){var r=t.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=n.getAxesByScale("ordinal")[0];if(a&&!(i&&gBe(a,e))){var s=e.mapDimension(a.dim),o={};return oe(a.getViewLabels(),function(l){var d=a.scale.getRawOrdinalNumber(l.tickValue);o[d]=1}),function(l){return!o.hasOwnProperty(e.get(s,l))}}}}function gBe(t,e){var n=t.getExtent(),r=Math.abs(n[1]-n[0])/t.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),s=0;s<i;s+=a)if(Db.getSymbolSize(e,s)[t.isHorizontal()?1:0]*1.5>r)return!1;return!0}function vBe(t,e){return isNaN(t)||isNaN(e)}function yBe(t){for(var e=t.length/2;e>0&&vBe(t[e*2-2],t[e*2-1]);e--);return e-1}function F9(t,e){return[t[e*2],t[e*2+1]]}function bBe(t,e,n){for(var r=t.length/2,i=n==="x"?0:1,a,s,o=0,l=-1,d=0;d<r;d++)if(s=t[d*2+i],!(isNaN(s)||isNaN(t[d*2+1-i]))){if(d===0){a=s;continue}if(a<=e&&s>=e||a>=e&&s<=e){l=d;break}o=d,a=s}return{range:[o,l],t:(e-a)/(s-a)}}function sie(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<Ea.length;e++)if(t.get([Ea[e],"endLabel","show"]))return!0;return!1}function c3(t,e,n,r){if(vh(e,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),s=r.getData(),o={lastFrameIndex:0},l=sie(r)?function(h,m){t._endLabelOnDuring(h,m,s,o,a,i,e)}:null,d=e.getBaseAxis().isHorizontal(),c=iie(e,n,r,function(){var h=t._endLabel;h&&n&&o.originalX!=null&&h.attr({x:o.originalX,y:o.originalY})},l);if(!r.get("clip",!0)){var f=c.shape,p=Math.max(f.width,f.height);d?(f.y-=p,f.height+=p*2):(f.x-=p,f.width+=p*2)}return l&&l(1,c),c}else return aie(e,n,r)}function _Be(t,e){var n=e.getBaseAxis(),r=n.isHorizontal(),i=n.inverse,a=r?i?"right":"left":"center",s=r?"middle":i?"top":"bottom";return{normal:{align:t.get("align")||a,verticalAlign:t.get("verticalAlign")||s}}}var xBe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){var n=new kt,r=new Rb;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=n,this._changePolyState=ut(this._changePolyState,this)},e.prototype.render=function(n,r,i){var a=n.coordinateSystem,s=this.group,o=n.getData(),l=n.getModel("lineStyle"),d=n.getModel("areaStyle"),c=o.getLayout("points")||[],f=a.type==="polar",p=this._coordSys,h=this._symbolDraw,m=this._polyline,g=this._polygon,v=this._lineGroup,_=!r.ssr&&n.get("animation"),x=!d.isEmpty(),w=d.get("origin"),k=eie(a,o,w),S=x&&fBe(a,o,k),C=n.get("showSymbol"),A=n.get("connectNulls"),M=C&&!f&&mBe(n,o,a),$=this._data;$&&$.eachItemGraphicEl(function(ee,de){ee.__temp&&(s.remove(ee),$.setItemGraphicEl(de,null))}),C||h.remove(),s.add(v);var R=f?!1:n.get("step"),I;a&&a.getArea&&n.get("clip",!0)&&(I=a.getArea(),I.width!=null?(I.x-=.1,I.y-=.1,I.width+=.2,I.height+=.2):I.r0&&(I.r0-=.5,I.r+=.5)),this._clipShapeForSymbol=I;var B=hBe(o,a,i)||o.getVisual("style")[o.getVisual("drawType")];if(!(m&&p.type===a.type&&R===this._step))C&&h.updateData(o,{isIgnore:M,clipShape:I,disableAnimation:!0,getSymbolPoint:function(ee){return[c[ee*2],c[ee*2+1]]}}),_&&this._initSymbolLabelAnimation(o,a,I),R&&(S&&(S=Md(S,c,a,R,A)),c=Md(c,null,a,R,A)),m=this._newPolyline(c),x?g=this._newPolygon(c,S):g&&(v.remove(g),g=this._polygon=null),f||this._initOrUpdateEndLabel(n,a,Zp(B)),v.setClipPath(c3(this,a,!0,n));else{x&&!g?g=this._newPolygon(c,S):g&&!x&&(v.remove(g),g=this._polygon=null),f||this._initOrUpdateEndLabel(n,a,Zp(B));var j=v.getClipPath();if(j){var z=c3(this,a,!1,n);sr(j,{shape:z.shape},n)}else v.setClipPath(c3(this,a,!0,n));C&&h.updateData(o,{isIgnore:M,clipShape:I,disableAnimation:!0,getSymbolPoint:function(ee){return[c[ee*2],c[ee*2+1]]}}),(!L9(this._stackedOnPoints,S)||!L9(this._points,c))&&(_?this._doUpdateAnimation(o,S,a,i,R,w,A):(R&&(S&&(S=Md(S,c,a,R,A)),c=Md(c,null,a,R,A)),m.setShape({points:c}),g&&g.setShape({points:c,stackedOnPoints:S})))}var F=n.getModel("emphasis"),q=F.get("focus"),N=F.get("blurScope"),O=F.get("disabled");if(m.useStyle(yt(l.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),Oi(m,n,"lineStyle"),m.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var V=m.getState("emphasis").style;V.lineWidth=+m.style.lineWidth+1}Tt(m).seriesIndex=n.seriesIndex,_r(m,q,N,O);var L=j9(n.get("smooth")),U=n.get("smoothMonotone");if(m.setShape({smooth:L,smoothMonotone:U,connectNulls:A}),g){var G=o.getCalculationInfo("stackedOnSeries"),X=0;g.useStyle(yt(d.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),G&&(X=j9(G.get("smooth"))),g.setShape({smooth:L,stackedOnSmooth:X,smoothMonotone:U,connectNulls:A}),Oi(g,n,"areaStyle"),Tt(g).seriesIndex=n.seriesIndex,_r(g,q,N,O)}var re=this._changePolyState;o.eachItemGraphicEl(function(ee){ee&&(ee.onHoverStateChange=re)}),this._polyline.onHoverStateChange=re,this._data=o,this._coordSys=a,this._stackedOnPoints=S,this._points=c,this._step=R,this._valueOrigin=w,n.get("triggerLineEvent")&&(this.packEventData(n,m),g&&this.packEventData(n,g))},e.prototype.packEventData=function(n,r){Tt(r).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},e.prototype.highlight=function(n,r,i,a){var s=n.getData(),o=Yp(s,a);if(this._changePolyState("emphasis"),!(o instanceof Array)&&o!=null&&o>=0){var l=s.getLayout("points"),d=s.getItemGraphicEl(o);if(!d){var c=l[o*2],f=l[o*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var p=n.get("zlevel")||0,h=n.get("z")||0;d=new Db(s,o),d.x=c,d.y=f,d.setZ(p,h);var m=d.getSymbolPath().getTextContent();m&&(m.zlevel=p,m.z=h,m.z2=this._polyline.z2+1),d.__temp=!0,s.setItemGraphicEl(o,d),d.stopSymbolAnimation(!0),this.group.add(d)}d.highlight()}else Pn.prototype.highlight.call(this,n,r,i,a)},e.prototype.downplay=function(n,r,i,a){var s=n.getData(),o=Yp(s,a);if(this._changePolyState("normal"),o!=null&&o>=0){var l=s.getItemGraphicEl(o);l&&(l.__temp?(s.setItemGraphicEl(o,null),this.group.remove(l)):l.downplay())}else Pn.prototype.downplay.call(this,n,r,i,a)},e.prototype._changePolyState=function(n){var r=this._polygon;kk(this._polyline,n),r&&kk(r,n)},e.prototype._newPolyline=function(n){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new dBe({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(n,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new rie({shape:{points:n,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(n,r,i){var a,s,o=r.getBaseAxis(),l=o.inverse;r.type==="cartesian2d"?(a=o.isHorizontal(),s=!1):r.type==="polar"&&(a=o.dim==="angle",s=!0);var d=n.hostModel,c=d.get("animationDuration");gt(c)&&(c=c(null));var f=d.get("animationDelay")||0,p=gt(f)?f(null):f;n.eachItemGraphicEl(function(h,m){var g=h;if(g){var v=[h.x,h.y],_=void 0,x=void 0,w=void 0;if(i)if(s){var k=i,S=r.pointToCoord(v);a?(_=k.startAngle,x=k.endAngle,w=-S[1]/180*Math.PI):(_=k.r0,x=k.r,w=S[0])}else{var C=i;a?(_=C.x,x=C.x+C.width,w=h.x):(_=C.y+C.height,x=C.y,w=h.y)}var A=x===_?0:(w-_)/(x-_);l&&(A=1-A);var M=gt(f)?f(m):c*A+p,$=g.getSymbolPath(),R=$.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),R&&R.animateFrom({style:{opacity:0}},{duration:300,delay:M}),$.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(n,r,i){var a=n.getModel("endLabel");if(sie(n)){var s=n.getData(),o=this._polyline,l=s.getLayout("points");if(!l){o.removeTextContent(),this._endLabel=null;return}var d=this._endLabel;d||(d=this._endLabel=new un({z2:200}),d.ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var c=yBe(l);c>=0&&(Li(o,ui(n,"endLabel"),{inheritColor:i,labelFetcher:n,labelDataIndex:c,defaultText:function(f,p,h){return h!=null?Jre(s,h):bg(s,f)},enableTextSetter:!0},_Be(a,r)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(n,r,i,a,s,o,l){var d=this._endLabel,c=this._polyline;if(d){n<1&&a.originalX==null&&(a.originalX=d.x,a.originalY=d.y);var f=i.getLayout("points"),p=i.hostModel,h=p.get("connectNulls"),m=o.get("precision"),g=o.get("distance")||0,v=l.getBaseAxis(),_=v.isHorizontal(),x=v.inverse,w=r.shape,k=x?_?w.x:w.y+w.height:_?w.x+w.width:w.y,S=(_?g:0)*(x?-1:1),C=(_?0:-g)*(x?-1:1),A=_?"x":"y",M=bBe(f,k,A),$=M.range,R=$[1]-$[0],I=void 0;if(R>=1){if(R>1&&!h){var B=F9(f,$[0]);d.attr({x:B[0]+S,y:B[1]+C}),s&&(I=p.getRawValue($[0]))}else{var B=c.getPointOn(k,A);B&&d.attr({x:B[0]+S,y:B[1]+C});var j=p.getRawValue($[0]),z=p.getRawValue($[1]);s&&(I=Wee(i,m,j,z,M.t))}a.lastFrameIndex=$[0]}else{var F=n===1||a.lastFrameIndex>0?$[0]:0,B=F9(f,F);s&&(I=p.getRawValue(F)),d.attr({x:B[0]+S,y:B[1]+C})}if(s){var q=jg(d);typeof q.setLabelText=="function"&&q.setLabelText(I)}}},e.prototype._doUpdateAnimation=function(n,r,i,a,s,o,l){var d=this._polyline,c=this._polygon,f=n.hostModel,p=uBe(this._data,n,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),h=p.current,m=p.stackedOnCurrent,g=p.next,v=p.stackedOnNext;if(s&&(m=Md(p.stackedOnCurrent,p.current,i,s,l),h=Md(p.current,null,i,s,l),v=Md(p.stackedOnNext,p.next,i,s,l),g=Md(p.next,null,i,s,l)),N9(h,g)>3e3||c&&N9(m,v)>3e3){d.stopAnimation(),d.setShape({points:g}),c&&(c.stopAnimation(),c.setShape({points:g,stackedOnPoints:v}));return}d.shape.__points=p.current,d.shape.points=h;var _={shape:{points:g}};p.current!==h&&(_.shape.__points=p.next),d.stopAnimation(),yn(d,_,f),c&&(c.setShape({points:h,stackedOnPoints:m}),c.stopAnimation(),yn(c,{shape:{stackedOnPoints:v}},f),d.shape.points!==c.shape.points&&(c.shape.points=d.shape.points));for(var x=[],w=p.status,k=0;k<w.length;k++){var S=w[k].cmd;if(S==="="){var C=n.getItemGraphicEl(w[k].idx1);C&&x.push({el:C,ptIdx:k})}}d.animators&&d.animators.length&&d.animators[0].during(function(){c&&c.dirtyShape();for(var A=d.shape.__points,M=0;M<x.length;M++){var $=x[M].el,R=x[M].ptIdx*2;$.x=A[R],$.y=A[R+1],$.markRedraw()}})},e.prototype.remove=function(n){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,s){a.__temp&&(r.remove(a),i.setItemGraphicEl(s,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Pn);function Ib(t,e){return{seriesType:t,plan:Hg(),reset:function(n){var r=n.getData(),i=n.coordinateSystem,a=n.pipelineContext,s=e||a.large;if(i){var o=ze(i.dimensions,function(h){return r.mapDimension(h)}).slice(0,2),l=o.length,d=r.getCalculationInfo("stackResultDimension");Oc(r,o[0])&&(o[0]=d),Oc(r,o[1])&&(o[1]=d);var c=r.getStore(),f=r.getDimensionIndex(o[0]),p=r.getDimensionIndex(o[1]);return l&&{progress:function(h,m){for(var g=h.end-h.start,v=s&&xl(g*l),_=[],x=[],w=h.start,k=0;w<h.end;w++){var S=void 0;if(l===1){var C=c.get(f,w);S=i.dataToPoint(C,null,x)}else _[0]=c.get(f,w),_[1]=c.get(p,w),S=i.dataToPoint(_,null,x);s?(v[k++]=S[0],v[k++]=S[1]):m.setItemLayout(w,S.slice())}s&&m.setLayout("points",v)}}}}}}var wBe={average:function(t){for(var e=0,n=0,r=0;r<t.length;r++)isNaN(t[r])||(e+=t[r],n++);return n===0?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},kBe=function(t){return Math.round(t.length/2)};function oie(t){return{seriesType:t,reset:function(e,n,r){var i=e.getData(),a=e.get("sampling"),s=e.coordinateSystem,o=i.count();if(o>10&&s.type==="cartesian2d"&&a){var l=s.getBaseAxis(),d=s.getOtherAxis(l),c=l.getExtent(),f=r.getDevicePixelRatio(),p=Math.abs(c[1]-c[0])*(f||1),h=Math.round(o/p);if(isFinite(h)&&h>1){a==="lttb"?e.setData(i.lttbDownSample(i.mapDimension(d.dim),1/h)):a==="minmax"&&e.setData(i.minmaxDownSample(i.mapDimension(d.dim),1/h));var m=void 0;it(a)?m=wBe[a]:gt(a)&&(m=a),m&&e.setData(i.downSample(i.mapDimension(d.dim),1/h,m,kBe))}}}}}function SBe(t){t.registerChartView(xBe),t.registerSeriesModel(aBe),t.registerLayout(Ib("line",!0)),t.registerVisual({seriesType:"line",reset:function(e){var n=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",r)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,oie("line"))}var T1=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){return md(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(n,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var s=a.clampData(n),o=a.dataToPoint(s);if(i)oe(a.getAxes(),function(p,h){if(p.type==="category"&&r!=null){var m=p.getTicksCoords(),g=p.getTickModel().get("alignWithLabel"),v=s[h],_=r[h]==="x1"||r[h]==="y1";if(_&&!g&&(v+=1),m.length<2)return;if(m.length===2){o[h]=p.toGlobalCoord(p.getExtent()[_?1:0]);return}for(var x=void 0,w=void 0,k=1,S=0;S<m.length;S++){var C=m[S].coord,A=S===m.length-1?m[S-1].tickValue+k:m[S].tickValue;if(A===v){w=C;break}else if(A<v)x=C;else if(x!=null&&A>v){w=(C+x)/2;break}S===1&&(k=A-m[0].tickValue)}w==null&&(x?x&&(w=m[m.length-1].coord):w=m[0].coord),o[h]=p.toGlobalCoord(w)}});else{var l=this.getData(),d=l.getLayout("offset"),c=l.getLayout("size"),f=a.getBaseAxis().isHorizontal()?0:1;o[f]+=d+c/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Zn);Zn.registerClass(T1);var CBe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(){return md(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>n&&(n=r),n},e.prototype.brushSelector=function(n,r,i){return i.rect(r.getItemLayout(n))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Yc(T1.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(T1),ABe=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),Uk=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new ABe},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,s=Math.max(r.r0||0,0),o=Math.max(r.r,0),l=(o-s)*.5,d=s+l,c=r.startAngle,f=r.endAngle,p=r.clockwise,h=Math.PI*2,m=p?f-c<h:c-f<h;m||(c=f-(p?h:-h));var g=Math.cos(c),v=Math.sin(c),_=Math.cos(f),x=Math.sin(f);m?(n.moveTo(g*s+i,v*s+a),n.arc(g*d+i,v*d+a,l,-Math.PI+c,c,!p)):n.moveTo(g*o+i,v*o+a),n.arc(i,a,o,c,f,!p),n.arc(_*d+i,x*d+a,l,f-Math.PI*2,f-Math.PI,!p),s!==0&&n.arc(i,a,s,f,c,p)},e}(Zt);function TBe(t,e){e=e||{};var n=e.isRoundCap;return function(r,i,a){var s=i.position;if(!s||s instanceof Array)return xk(r,i,a);var o=t(s),l=i.distance!=null?i.distance:5,d=this.shape,c=d.cx,f=d.cy,p=d.r,h=d.r0,m=(p+h)/2,g=d.startAngle,v=d.endAngle,_=(g+v)/2,x=n?Math.abs(p-h)/2:0,w=Math.cos,k=Math.sin,S=c+p*w(g),C=f+p*k(g),A="left",M="top";switch(o){case"startArc":S=c+(h-l)*w(_),C=f+(h-l)*k(_),A="center",M="top";break;case"insideStartArc":S=c+(h+l)*w(_),C=f+(h+l)*k(_),A="center",M="bottom";break;case"startAngle":S=c+m*w(g)+px(g,l+x,!1),C=f+m*k(g)+hx(g,l+x,!1),A="right",M="middle";break;case"insideStartAngle":S=c+m*w(g)+px(g,-l+x,!1),C=f+m*k(g)+hx(g,-l+x,!1),A="left",M="middle";break;case"middle":S=c+m*w(_),C=f+m*k(_),A="center",M="middle";break;case"endArc":S=c+(p+l)*w(_),C=f+(p+l)*k(_),A="center",M="bottom";break;case"insideEndArc":S=c+(p-l)*w(_),C=f+(p-l)*k(_),A="center",M="top";break;case"endAngle":S=c+m*w(v)+px(v,l+x,!0),C=f+m*k(v)+hx(v,l+x,!0),A="left",M="middle";break;case"insideEndAngle":S=c+m*w(v)+px(v,-l+x,!0),C=f+m*k(v)+hx(v,-l+x,!0),A="right",M="middle";break;default:return xk(r,i,a)}return r=r||{},r.x=S,r.y=C,r.align=A,r.verticalAlign=M,r}}function EBe(t,e,n,r){if(pn(r)){t.setTextConfig({rotation:r});return}else if(Be(e)){t.setTextConfig({rotation:0});return}var i=t.shape,a=i.clockwise?i.startAngle:i.endAngle,s=i.clockwise?i.endAngle:i.startAngle,o=(a+s)/2,l,d=n(e);switch(d){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=o;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=s;break;default:t.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;d==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),t.setTextConfig({rotation:c})}function px(t,e,n){return e*Math.sin(t)*(n?-1:1)}function hx(t,e,n){return e*Math.cos(t)*(n?1:-1)}function up(t,e,n){var r=t.get("borderRadius");if(r==null)return n?{cornerRadius:0}:null;Be(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:ze(r,function(a){return Lo(a,i)})}}var f3=Math.max,p3=Math.min;function MBe(t,e){var n=t.getArea&&t.getArea();if(vh(t,"cartesian2d")){var r=t.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=i*2):(n.y-=i,n.height+=i*2)}}return n}var $Be=function(t){Ce(e,t);function e(){var n=t.call(this)||this;return n.type=e.type,n._isFirstFrame=!0,n}return e.prototype.render=function(n,r,i,a){this._model=n,this._removeOnRenderedListener(i),this._updateDrawMode(n);var s=n.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,r,i):this._renderNormal(n,r,i,a))},e.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},e.prototype.incrementalRender=function(n,r){this._progressiveEls=[],this._incrementalRenderLarge(n,r)},e.prototype.eachRendered=function(n){Gc(this._progressiveEls||this.group,n)},e.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(n,r,i,a){var s=this.group,o=n.getData(),l=this._data,d=n.coordinateSystem,c=d.getBaseAxis(),f;d.type==="cartesian2d"?f=c.isHorizontal():d.type==="polar"&&(f=c.dim==="angle");var p=n.isAnimationEnabled()?n:null,h=DBe(n,d);h&&this._enableRealtimeSort(h,o,i);var m=n.get("clip",!0)||h,g=MBe(d,o);s.removeClipPath();var v=n.get("roundCap",!0),_=n.get("showBackground",!0),x=n.getModel("backgroundStyle"),w=x.get("borderRadius")||0,k=[],S=this._backgroundEls,C=a&&a.isInitSort,A=a&&a.type==="changeAxisOrder";function M(I){var B=mx[d.type](o,I),j=NBe(d,f,B);return j.useStyle(x.getItemStyle()),d.type==="cartesian2d"?j.setShape("r",w):j.setShape("cornerRadius",w),k[I]=j,j}o.diff(l).add(function(I){var B=o.getItemModel(I),j=mx[d.type](o,I,B);if(_&&M(I),!(!o.hasValue(I)||!q9[d.type](j))){var z=!1;m&&(z=B9[d.type](g,j));var F=z9[d.type](n,o,I,j,f,p,c.model,!1,v);h&&(F.forceLabelAnimation=!0),W9(F,o,I,B,j,n,f,d.type==="polar"),C?F.attr({shape:j}):h?U9(h,p,F,j,I,f,!1,!1):sr(F,{shape:j},n,I),o.setItemGraphicEl(I,F),s.add(F),F.ignore=z}}).update(function(I,B){var j=o.getItemModel(I),z=mx[d.type](o,I,j);if(_){var F=void 0;S.length===0?F=M(B):(F=S[B],F.useStyle(x.getItemStyle()),d.type==="cartesian2d"?F.setShape("r",w):F.setShape("cornerRadius",w),k[I]=F);var q=mx[d.type](o,I),N=uie(f,q,d);yn(F,{shape:N},p,I)}var O=l.getItemGraphicEl(B);if(!o.hasValue(I)||!q9[d.type](z)){s.remove(O);return}var V=!1;if(m&&(V=B9[d.type](g,z),V&&s.remove(O)),O?Vo(O):O=z9[d.type](n,o,I,z,f,p,c.model,!!O,v),h&&(O.forceLabelAnimation=!0),A){var L=O.getTextContent();if(L){var U=jg(L);U.prevValue!=null&&(U.prevValue=U.value)}}else W9(O,o,I,j,z,n,f,d.type==="polar");C?O.attr({shape:z}):h?U9(h,p,O,z,I,f,!0,A):yn(O,{shape:z},n,I,null),o.setItemGraphicEl(I,O),O.ignore=V,s.add(O)}).remove(function(I){var B=l.getItemGraphicEl(I);B&&v1(B,n,I)}).execute();var $=this._backgroundGroup||(this._backgroundGroup=new kt);$.removeAll();for(var R=0;R<k.length;++R)$.add(k[R]);s.add($),this._backgroundEls=k,this._data=o},e.prototype._renderLarge=function(n,r,i){this._clear(),Y9(n,this.group),this._updateLargeClip(n)},e.prototype._incrementalRenderLarge=function(n,r){this._removeBackground(),Y9(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(n){var r=n.get("clip",!0)&&Pb(n.coordinateSystem,!1,n),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(n,r,i){var a=this;if(r.count()){var s=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,n,i),this._isFirstFrame=!1;else{var o=function(l){var d=r.getItemGraphicEl(l),c=d&&d.shape;return c&&Math.abs(s.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,o,s,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(n,r,i){var a=[];return n.each(n.mapDimension(r.dim),function(s,o){var l=i(o);l=l==null?NaN:l,a.push({dataIndex:o,mappedValue:l,ordinalNumber:s})}),a.sort(function(s,o){return o.mappedValue-s.mappedValue}),{ordinalNumbers:ze(a,function(s){return s.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(n,r,i){for(var a=i.scale,s=n.mapDimension(i.dim),o=Number.MAX_VALUE,l=0,d=a.getOrdinalMeta().categories.length;l<d;++l){var c=n.rawIndexOf(s,a.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:r(n.indexOfRawIndex(c));if(f>o)return!0;o=f}return!1},e.prototype._isOrderDifferentInView=function(n,r){for(var i=r.scale,a=i.getExtent(),s=Math.max(0,a[0]),o=Math.min(a[1],i.getOrdinalMeta().categories.length-1);s<=o;++s)if(n.ordinalNumbers[s]!==i.getRawOrdinalNumber(s))return!0},e.prototype._updateSortWithinSameData=function(n,r,i,a){if(this._isOrderChangedWithinSameData(n,r,i)){var s=this._dataSort(n,i,r);this._isOrderDifferentInView(s,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:s}))}},e.prototype._dispatchInitSort=function(n,r,i){var a=r.baseAxis,s=this._dataSort(n,a,function(o){return n.get(n.mapDimension(r.otherAxis.dim),o)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:s})},e.prototype.remove=function(n,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(n,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(n){var r=this.group,i=this._data;n&&n.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){v1(a,n,Tt(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(Pn),B9={cartesian2d:function(t,e){var n=e.width<0?-1:1,r=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=t.x+t.width,a=t.y+t.height,s=f3(e.x,t.x),o=p3(e.x+e.width,i),l=f3(e.y,t.y),d=p3(e.y+e.height,a),c=o<s,f=d<l;return e.x=c&&s>i?o:s,e.y=f&&l>a?d:l,e.width=c?0:o-s,e.height=f?0:d-l,n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),c||f},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}var i=p3(e.r,t.r),a=f3(e.r0,t.r0);e.r=i,e.r0=a;var s=i-a<0;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}return s}},z9={cartesian2d:function(t,e,n,r,i,a,s,o,l){var d=new sn({shape:Oe({},r),z2:1});if(d.__dataIndex=n,d.name="item",a){var c=d.shape,f=i?"height":"width";c[f]=0}return d},polar:function(t,e,n,r,i,a,s,o,l){var d=!i&&l?Uk:Ma,c=new d({shape:r,z2:1});c.name="item";var f=lie(i);if(c.calculateTextPosition=TBe(f,{isRoundCap:d===Uk}),a){var p=c.shape,h=i?"r":"endAngle",m={};p[h]=i?r.r0:r.startAngle,m[h]=r[h],(o?yn:sr)(c,{shape:m},a)}return c}};function DBe(t,e){var n=t.get("realtimeSort",!0),r=e.getBaseAxis();if(n&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function U9(t,e,n,r,i,a,s,o){var l,d;a?(d={x:r.x,width:r.width},l={y:r.y,height:r.height}):(d={y:r.y,height:r.height},l={x:r.x,width:r.width}),o||(s?yn:sr)(n,{shape:l},e,i,null);var c=e?t.baseAxis.model:null;(s?yn:sr)(n,{shape:d},c,i)}function H9(t,e){for(var n=0;n<e.length;n++)if(!isFinite(t[e[n]]))return!0;return!1}var RBe=["x","y","width","height"],PBe=["cx","cy","r","startAngle","endAngle"],q9={cartesian2d:function(t){return!H9(t,RBe)},polar:function(t){return!H9(t,PBe)}},mx={cartesian2d:function(t,e,n){var r=t.getItemLayout(e),i=n?OBe(n,r):0,a=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+s*i/2,width:r.width-a*i,height:r.height-s*i}},polar:function(t,e,n){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function IBe(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function lie(t){return function(e){var n=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+n;default:return r}}}(t)}function W9(t,e,n,r,i,a,s,o){var l=e.getItemVisual(n,"style");if(o){if(!a.get("roundCap")){var c=t.shape,f=up(r.getModel("itemStyle"),c,!0);Oe(c,f),t.setShape(c)}}else{var d=r.get(["itemStyle","borderRadius"])||0;t.setShape("r",d)}t.useStyle(l);var p=r.getShallow("cursor");p&&t.attr("cursor",p);var h=o?s?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":s?i.height>=0?"bottom":"top":i.width>=0?"right":"left",m=ui(r);Li(t,m,{labelFetcher:a,labelDataIndex:n,defaultText:bg(a.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:h});var g=t.getTextContent();if(o&&g){var v=r.get(["label","position"]);t.textConfig.inside=v==="middle"?!0:null,EBe(t,v==="outside"?h:v,lie(s),r.get(["label","rotate"]))}Mte(g,m,a.getRawValue(n),function(x){return Jre(e,x)});var _=r.getModel(["emphasis"]);_r(t,_.get("focus"),_.get("blurScope"),_.get("disabled")),Oi(t,r),IBe(i)&&(t.style.fill="none",t.style.stroke="none",oe(t.states,function(x){x.style&&(x.style.fill=x.style.stroke="none")}))}function OBe(t,e){var n=t.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var r=t.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var LBe=function(){function t(){}return t}(),G9=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new LBe},e.prototype.buildPath=function(n,r){for(var i=r.points,a=this.baseDimIdx,s=1-this.baseDimIdx,o=[],l=[],d=this.barWidth,c=0;c<i.length;c+=3)l[a]=d,l[s]=i[c+2],o[a]=i[c+a],o[s]=i[c+s],n.rect(o[0],o[1],l[0],l[1])},e}(Zt);function Y9(t,e,n,r){var i=t.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,s=i.getLayout("largeDataIndices"),o=i.getLayout("size"),l=t.getModel("backgroundStyle"),d=i.getLayout("largeBackgroundPoints");if(d){var c=new G9({shape:{points:d},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=s,c.barWidth=o,c.useStyle(l.getItemStyle()),e.add(c),n&&n.push(c)}var f=new G9({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=a,f.largeDataIndices=s,f.barWidth=o,e.add(f),f.useStyle(i.getVisual("style")),f.style.stroke=null,Tt(f).seriesIndex=t.seriesIndex,t.get("silent")||(f.on("mousedown",K9),f.on("mousemove",K9)),n&&n.push(f)}var K9=CI(function(t){var e=this,n=VBe(e,t.offsetX,t.offsetY);Tt(e).dataIndex=n>=0?n:null},30,!1);function VBe(t,e,n){for(var r=t.baseDimIdx,i=1-r,a=t.shape.points,s=t.largeDataIndices,o=[],l=[],d=t.barWidth,c=0,f=a.length/3;c<f;c++){var p=c*3;if(l[r]=d,l[i]=a[p+2],o[r]=a[p+r],o[i]=a[p+i],l[i]<0&&(o[i]+=l[i],l[i]=-l[i]),e>=o[0]&&e<=o[0]+l[0]&&n>=o[1]&&n<=o[1]+l[1])return s[c]}return-1}function uie(t,e,n){if(vh(n,"cartesian2d")){var r=e,i=n.getArea();return{x:t?r.x:i.x,y:t?i.y:r.y,width:t?r.width:i.width,height:t?i.height:r.height}}else{var i=n.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:t?i.r0:a.r0,r:t?i.r:a.r,startAngle:t?a.startAngle:0,endAngle:t?a.endAngle:Math.PI*2}}}function NBe(t,e,n){var r=t.type==="polar"?Ma:sn;return new r({shape:uie(e,n,t),silent:!0,z2:0})}function jBe(t){t.registerChartView($Be),t.registerSeriesModel(CBe),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Pt(hre,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,mre("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,oie("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,n){var r=e.componentType||"series";n.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var X9=Math.PI*2,gx=Math.PI/180;function die(t,e){return Qr(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function cie(t,e){var n=die(t,e),r=t.get("center"),i=t.get("radius");Be(i)||(i=[0,i]);var a=Qe(n.width,e.getWidth()),s=Qe(n.height,e.getHeight()),o=Math.min(a,s),l=Qe(i[0],o/2),d=Qe(i[1],o/2),c,f,p=t.coordinateSystem;if(p){var h=p.dataToPoint(r);c=h[0]||0,f=h[1]||0}else Be(r)||(r=[r,r]),c=Qe(r[0],a)+n.x,f=Qe(r[1],s)+n.y;return{cx:c,cy:f,r0:l,r:d}}function FBe(t,e,n){e.eachSeriesByType(t,function(r){var i=r.getData(),a=i.mapDimension("value"),s=die(r,n),o=cie(r,n),l=o.cx,d=o.cy,c=o.r,f=o.r0,p=-r.get("startAngle")*gx,h=r.get("endAngle"),m=r.get("padAngle")*gx;h=h==="auto"?p-X9:-h*gx;var g=r.get("minAngle")*gx,v=g+m,_=0;i.each(a,function(N){!isNaN(N)&&_++});var x=i.getSum(a),w=Math.PI/(x||_)*2,k=r.get("clockwise"),S=r.get("roseType"),C=r.get("stillShowZeroSum"),A=i.getDataExtent(a);A[0]=0;var M=k?1:-1,$=[p,h],R=M*m/2;eI($,!k),p=$[0],h=$[1];var I=fie(r);I.startAngle=p,I.endAngle=h,I.clockwise=k;var B=Math.abs(h-p),j=B,z=0,F=p;if(i.setLayout({viewRect:s,r:c}),i.each(a,function(N,O){var V;if(isNaN(N)){i.setItemLayout(O,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:k,cx:l,cy:d,r0:f,r:S?NaN:c});return}S!=="area"?V=x===0&&C?w:N*w:V=B/_,V<v?(V=v,j-=v):z+=N;var L=F+M*V,U=0,G=0;m>V?(U=F+M*V/2,G=U):(U=F+R,G=L-R),i.setItemLayout(O,{angle:V,startAngle:U,endAngle:G,clockwise:k,cx:l,cy:d,r0:f,r:S?Cn(N,A,[f,c]):c}),F=L}),j<X9&&_)if(j<=.001){var q=B/_;i.each(a,function(N,O){if(!isNaN(N)){var V=i.getItemLayout(O);V.angle=q;var L=0,U=0;q<m?(L=p+M*(O+1/2)*q,U=L):(L=p+M*O*q+R,U=p+M*(O+1)*q-R),V.startAngle=L,V.endAngle=U}})}else w=j/z,F=p,i.each(a,function(N,O){if(!isNaN(N)){var V=i.getItemLayout(O),L=V.angle===v?v:N*w,U=0,G=0;L<m?(U=F+M*L/2,G=U):(U=F+R,G=F+M*L-R),V.startAngle=U,V.endAngle=G,F+=M*L}})})}var fie=on();function Ob(t){return{seriesType:t,reset:function(e,n){var r=n.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var s=i.getName(a),o=0;o<r.length;o++)if(!r[o].isSelected(s))return!1;return!0})}}}}var BBe=Math.PI/180;function Z9(t,e,n,r,i,a,s,o,l,d){if(t.length<2)return;function c(g){for(var v=g.rB,_=v*v,x=0;x<g.list.length;x++){var w=g.list[x],k=Math.abs(w.label.y-n),S=r+w.len,C=S*S,A=Math.sqrt(Math.abs((1-k*k/_)*C)),M=e+(A+w.len2)*i,$=M-w.label.x,R=w.targetTextWidth-$*i;pie(w,R,!0),w.label.x=M}}function f(g){for(var v={list:[],maxY:0},_={list:[],maxY:0},x=0;x<g.length;x++)if(g[x].labelAlignTo==="none"){var w=g[x],k=w.label.y>n?_:v,S=Math.abs(w.label.y-n);if(S>=k.maxY){var C=w.label.x-e-w.len2*i,A=r+w.len,M=Math.abs(C)<A?Math.sqrt(S*S/(1-C*C/A/A)):A;k.rB=M,k.maxY=S}k.list.push(w)}c(v),c(_)}for(var p=t.length,h=0;h<p;h++)if(t[h].position==="outer"&&t[h].labelAlignTo==="labelLine"){var m=t[h].label.x-d;t[h].linePoints[1][0]+=m,t[h].label.x=d}Lre(t,l,l+s)&&f(t)}function zBe(t,e,n,r,i,a,s,o){for(var l=[],d=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,p=0;p<t.length;p++){var h=t[p].label;h3(t[p])||(h.x<e?(c=Math.min(c,h.x),l.push(t[p])):(f=Math.max(f,h.x),d.push(t[p])))}for(var p=0;p<t.length;p++){var m=t[p];if(!h3(m)&&m.linePoints){if(m.labelStyleWidth!=null)continue;var h=m.label,g=m.linePoints,v=void 0;m.labelAlignTo==="edge"?h.x<e?v=g[2][0]-m.labelDistance-s-m.edgeDistance:v=s+i-m.edgeDistance-g[2][0]-m.labelDistance:m.labelAlignTo==="labelLine"?h.x<e?v=c-s-m.bleedMargin:v=s+i-f-m.bleedMargin:h.x<e?v=h.x-s-m.bleedMargin:v=s+i-h.x-m.bleedMargin,m.targetTextWidth=v,pie(m,v)}}Z9(d,e,n,r,1,i,a,s,o,f),Z9(l,e,n,r,-1,i,a,s,o,c);for(var p=0;p<t.length;p++){var m=t[p];if(!h3(m)&&m.linePoints){var h=m.label,g=m.linePoints,_=m.labelAlignTo==="edge",x=h.style.padding,w=x?x[1]+x[3]:0,k=h.style.backgroundColor?0:w,S=m.rect.width+k,C=g[1][0]-g[2][0];_?h.x<e?g[2][0]=s+m.edgeDistance+S+m.labelDistance:g[2][0]=s+i-m.edgeDistance-S-m.labelDistance:(h.x<e?g[2][0]=h.x+m.labelDistance:g[2][0]=h.x-m.labelDistance,g[1][0]=g[2][0]+C),g[1][1]=g[2][1]=h.y}}}function pie(t,e,n){if(n===void 0&&(n=!1),t.labelStyleWidth==null){var r=t.label,i=r.style,a=t.rect,s=i.backgroundColor,o=i.padding,l=o?o[1]+o[3]:0,d=i.overflow,c=a.width+(s?0:l);if(e<c||n){var f=a.height;if(d&&d.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var p=r.getBoundingRect();r.setStyle("width",Math.ceil(p.width)),r.setStyle("backgroundColor",s)}else{var h=e-l,m=e<c?h:n?h>t.unconstrainedWidth?null:h:null;r.setStyle("width",m)}var g=r.getBoundingRect();a.width=g.width;var v=(r.style.margin||0)+2.1;a.height=g.height+v,a.y-=(a.height-f)/2}}}function h3(t){return t.position==="center"}function UBe(t){var e=t.getData(),n=[],r,i,a=!1,s=(t.get("minShowLabelAngle")||0)*BBe,o=e.getLayout("viewRect"),l=e.getLayout("r"),d=o.width,c=o.x,f=o.y,p=o.height;function h(C){C.ignore=!0}function m(C){if(!C.ignore)return!0;for(var A in C.states)if(C.states[A].ignore===!1)return!0;return!1}e.each(function(C){var A=e.getItemGraphicEl(C),M=A.shape,$=A.getTextContent(),R=A.getTextGuideLine(),I=e.getItemModel(C),B=I.getModel("label"),j=B.get("position")||I.get(["emphasis","label","position"]),z=B.get("distanceToLabelLine"),F=B.get("alignTo"),q=Qe(B.get("edgeDistance"),d),N=B.get("bleedMargin"),O=I.getModel("labelLine"),V=O.get("length");V=Qe(V,d);var L=O.get("length2");if(L=Qe(L,d),Math.abs(M.endAngle-M.startAngle)<s){oe($.states,h),$.ignore=!0,R&&(oe(R.states,h),R.ignore=!0);return}if(m($)){var U=(M.startAngle+M.endAngle)/2,G=Math.cos(U),X=Math.sin(U),re,ee,de,se;r=M.cx,i=M.cy;var te=j==="inside"||j==="inner";if(j==="center")re=M.cx,ee=M.cy,se="center";else{var ne=(te?(M.r+M.r0)/2*G:M.r*G)+r,ce=(te?(M.r+M.r0)/2*X:M.r*X)+i;if(re=ne+G*3,ee=ce+X*3,!te){var ve=ne+G*(V+l-M.r),Y=ce+X*(V+l-M.r),K=ve+(G<0?-1:1)*L,H=Y;F==="edge"?re=G<0?c+q:c+d-q:re=K+(G<0?-z:z),ee=H,de=[[ne,ce],[ve,Y],[K,H]]}se=te?"center":F==="edge"?G>0?"right":"left":G>0?"left":"right"}var ae=Math.PI,be=0,ue=B.get("rotate");if(pn(ue))be=ue*(ae/180);else if(j==="center")be=0;else if(ue==="radial"||ue===!0){var pe=G<0?-U+ae:-U;be=pe}else if(ue==="tangential"&&j!=="outside"&&j!=="outer"){var ye=Math.atan2(G,X);ye<0&&(ye=ae*2+ye);var Me=X>0;Me&&(ye=ae+ye),be=ye-ae}if(a=!!be,$.x=re,$.y=ee,$.rotation=be,$.setStyle({verticalAlign:"middle"}),te){$.setStyle({align:se});var We=$.states.select;We&&(We.x+=$.x,We.y+=$.y)}else{var Te=$.getBoundingRect().clone();Te.applyTransform($.getComputedTransform());var qe=($.style.margin||0)+2.1;Te.y-=qe/2,Te.height+=qe,n.push({label:$,labelLine:R,position:j,len:V,len2:L,minTurnAngle:O.get("minTurnAngle"),maxSurfaceAngle:O.get("maxSurfaceAngle"),surfaceNormal:new Bt(G,X),linePoints:de,textAlign:se,labelDistance:z,labelAlignTo:F,edgeDistance:q,bleedMargin:N,rect:Te,unconstrainedWidth:Te.width,labelStyleWidth:$.style.width})}A.setTextConfig({inside:te})}}),!a&&t.get("avoidLabelOverlap")&&zBe(n,r,i,l,d,p,c,f);for(var g=0;g<n.length;g++){var v=n[g],_=v.label,x=v.labelLine,w=isNaN(_.x)||isNaN(_.y);if(_){_.setStyle({align:v.textAlign}),w&&(oe(_.states,h),_.ignore=!0);var k=_.states.select;k&&(k.x+=_.x,k.y+=_.y)}if(x){var S=v.linePoints;w||!S?(oe(x.states,h),x.ignore=!0):(Pre(S,v.minTurnAngle),f9e(S,v.surfaceNormal,v.maxSurfaceAngle),x.setShape({points:S}),_.__hostTarget.textGuideLineConfig={anchor:new Bt(S[0][0],S[0][1])})}}}var HBe=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this)||this;a.z2=2;var s=new un;return a.setTextContent(s),a.updateData(n,r,i,!0),a}return e.prototype.updateData=function(n,r,i,a){var s=this,o=n.hostModel,l=n.getItemModel(r),d=l.getModel("emphasis"),c=n.getItemLayout(r),f=Oe(up(l.getModel("itemStyle"),c,!0),c);if(isNaN(f.startAngle)){s.setShape(f);return}if(a){s.setShape(f);var p=o.getShallow("animationType");o.ecModel.ssr?(sr(s,{scaleX:0,scaleY:0},o,{dataIndex:r,isFrom:!0}),s.originX=f.cx,s.originY=f.cy):p==="scale"?(s.shape.r=c.r0,sr(s,{shape:{r:c.r}},o,r)):i!=null?(s.setShape({startAngle:i,endAngle:i}),sr(s,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},o,r)):(s.shape.endAngle=c.startAngle,yn(s,{shape:{endAngle:c.endAngle}},o,r))}else Vo(s),yn(s,{shape:f},o,r);s.useStyle(n.getItemVisual(r,"style")),Oi(s,l);var h=(c.startAngle+c.endAngle)/2,m=o.get("selectedOffset"),g=Math.cos(h)*m,v=Math.sin(h)*m,_=l.getShallow("cursor");_&&s.attr("cursor",_),this._updateLabel(o,n,r),s.ensureState("emphasis").shape=Oe({r:c.r+(d.get("scale")&&d.get("scaleSize")||0)},up(d.getModel("itemStyle"),c)),Oe(s.ensureState("select"),{x:g,y:v,shape:up(l.getModel(["select","itemStyle"]),c)}),Oe(s.ensureState("blur"),{shape:up(l.getModel(["blur","itemStyle"]),c)});var x=s.getTextGuideLine(),w=s.getTextContent();x&&Oe(x.ensureState("select"),{x:g,y:v}),Oe(w.ensureState("select"),{x:g,y:v}),_r(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(n,r,i){var a=this,s=r.getItemModel(i),o=s.getModel("labelLine"),l=r.getItemVisual(i,"style"),d=l&&l.fill,c=l&&l.opacity;Li(a,ui(s),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:d,defaultOpacity:c,defaultText:n.getFormattedLabel(i,"normal")||r.getName(i)});var f=a.getTextContent();a.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var p=n.get(["label","position"]);if(p!=="outside"&&p!=="outer")a.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new Da,this.setTextGuideLine(h)),VI(this,NI(s),{stroke:d,opacity:El(o.get(["lineStyle","opacity"]),c,1)})}},e}(Ma),qBe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,i,a){var s=n.getData(),o=this._data,l=this.group,d;if(!o&&s.count()>0){for(var c=s.getItemLayout(0),f=1;isNaN(c&&c.startAngle)&&f<s.count();++f)c=s.getItemLayout(f);c&&(d=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),s.count()===0&&n.get("showEmptyCircle")){var p=fie(n),h=new Ma({shape:Oe(cie(n,i),p)});h.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,l.add(h)}s.diff(o).add(function(m){var g=new HBe(s,m,d);s.setItemGraphicEl(m,g),l.add(g)}).update(function(m,g){var v=o.getItemGraphicEl(g);v.updateData(s,m,d),v.off("click"),l.add(v),s.setItemGraphicEl(m,v)}).remove(function(m){var g=o.getItemGraphicEl(m);v1(g,n,m)}).execute(),UBe(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=s)},e.prototype.dispose=function(){},e.prototype.containPoint=function(n,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var s=n[0]-a.cx,o=n[1]-a.cy,l=Math.sqrt(s*s+o*o);return l<=a.r&&l>=a.r0}},e.type="pie",e}(Pn);function Yg(t,e,n){e=Be(e)&&{coordDimensions:e}||Oe({encodeDefine:t.getEncode()},e);var r=t.getSource(),i=Mb(r,e).dimensions,a=new ba(i,t);return a.initData(r,n),a}var Lb=function(){function t(e,n){this._getDataWithEncodedVisual=e,this._getRawData=n}return t.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},t.prototype.containName=function(e){var n=this._getRawData();return n.indexOfName(e)>=0},t.prototype.indexOfName=function(e){var n=this._getDataWithEncodedVisual();return n.indexOfName(e)},t.prototype.getItemVisual=function(e,n){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,n)},t}(),WBe=on(),GBe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Lb(ut(this.getData,this),ut(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Yg(this,{coordDimensions:["value"],encodeDefaulter:Pt(vI,this)})},e.prototype.getDataParams=function(n){var r=this.getData(),i=WBe(r),a=i.seats;if(!a){var s=[];r.each(r.mapDimension("value"),function(l){s.push(l)}),a=i.seats=jLe(s,r.hostModel.get("percentPrecision"))}var o=t.prototype.getDataParams.call(this,n);return o.percent=a[n]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(n){Gp(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Zn);function YBe(t){return{seriesType:t,reset:function(e,n){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),s=r.get(a,i);return!(pn(s)&&!isNaN(s)&&s<0)})}}}function KBe(t){t.registerChartView(qBe),t.registerSeriesModel(GBe),One("pie",t.registerAction),t.registerLayout(Pt(FBe,"pie")),t.registerProcessor(Ob("pie")),t.registerProcessor(YBe("pie"))}var XBe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n,r){return md(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var n=this.option.progressive;return n==null?this.option.large?5e3:this.get("progressive"):n},e.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n==null?this.option.large?1e4:this.get("progressiveThreshold"):n},e.prototype.brushSelector=function(n,r,i){return i.point(r.getItemLayout(n))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Zn),hie=4,ZBe=function(){function t(){}return t}(),QBe=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new ZBe},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(n,r){var i=r.points,a=r.size,s=this.symbolProxy,o=s.shape,l=n.getContext?n.getContext():n,d=l&&a[0]<hie,c=this.softClipShape,f;if(d){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var p=i[f++],h=i[f++];isNaN(p)||isNaN(h)||c&&!c.contain(p,h)||(o.x=p-a[0]/2,o.y=h-a[1]/2,o.width=a[0],o.height=a[1],s.buildPath(n,o,!0))}this.incremental&&(this._off=f,this.notClear=!0)},e.prototype.afterBrush=function(){var n=this.shape,r=n.points,i=n.size,a=this._ctx,s=this.softClipShape,o;if(a){for(o=this._off;o<r.length;){var l=r[o++],d=r[o++];isNaN(l)||isNaN(d)||s&&!s.contain(l,d)||a.fillRect(l-i[0]/2,d-i[1]/2,i[0],i[1])}this.incremental&&(this._off=o,this.notClear=!0)}},e.prototype.findDataIndex=function(n,r){for(var i=this.shape,a=i.points,s=i.size,o=Math.max(s[0],4),l=Math.max(s[1],4),d=a.length/2-1;d>=0;d--){var c=d*2,f=a[c]-o/2,p=a[c+1]-l/2;if(n>=f&&r>=p&&n<=f+o&&r<=p+l)return d}return-1},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(n=i[0],r=i[1],a.contain(n,r)){var s=this.hoverDataIdx=this.findDataIndex(n,r);return s>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,i=r.points,a=r.size,s=a[0],o=a[1],l=1/0,d=1/0,c=-1/0,f=-1/0,p=0;p<i.length;){var h=i[p++],m=i[p++];l=Math.min(h,l),c=Math.max(h,c),d=Math.min(m,d),f=Math.max(m,f)}n=this._rect=new qt(l-s/2,d-o/2,c-l+s,f-d+o)}return n},e}(Zt),JBe=function(){function t(){this.group=new kt}return t.prototype.updateData=function(e,n){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,n)},t.prototype.updateLayout=function(e){var n=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;n=new Float32Array(n.buffer,a,i)}r.setShape("points",n),r.reset()})},t.prototype.incrementalPrepareUpdate=function(e){this._clear()},t.prototype.incrementalUpdate=function(e,n,r){var i=this._newAdded[0],a=n.getLayout("points"),s=i&&i.shape.points;if(s&&s.length<2e4){var o=s.length,l=new Float32Array(o+a.length);l.set(s),l.set(a,o),i.endIndex=e.end,i.setShape({points:l})}else{this._newAdded=[];var d=this._create();d.startIndex=e.start,d.endIndex=e.end,d.incremental=!0,d.setShape({points:a}),this._setCommon(d,n,r)}},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new QBe({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},t.prototype._setCommon=function(e,n,r){var i=n.hostModel;r=r||{};var a=n.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=Ur(n.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var s=e.shape.size[0]<hie;e.useStyle(i.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var o=n.getVisual("style"),l=o&&o.fill;l&&e.setColor(l);var d=Tt(e);d.seriesIndex=i.seriesIndex,e.on("mousemove",function(c){d.dataIndex=null;var f=e.hoverDataIdx;f>=0&&(d.dataIndex=f+(e.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),eze=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=n.getData(),s=this._updateSymbolDraw(a,n);s.updateData(a,{clipShape:this._getClipShape(n)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(n,r,i){var a=n.getData(),s=this._updateSymbolDraw(a,n);s.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(n,r,i){this._symbolDraw.incrementalUpdate(n,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=n.end===r.getData().count()},e.prototype.updateTransform=function(n,r,i){var a=n.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var s=Ib("").reset(n,r,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},e.prototype._getClipShape=function(n){if(n.get("clip",!0)){var r=n.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(n,r){var i=this._symbolDraw,a=r.pipelineContext,s=a.large;return(!i||s!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=s?new JBe:new Rb,this._isLargeDraw=s,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Pn),tze=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(tn),_$=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Nr).models[0]},e.type="cartesian2dAxis",e}(tn);Hr(_$,$b);var mie={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},nze=jt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},mie),qI=jt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},mie),rze=jt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},qI),ize=yt({logBase:10},qI);const gie={category:nze,value:qI,time:rze,log:ize};var aze={value:1,category:1,time:1,log:1};function _g(t,e,n,r){oe(aze,function(i,a){var s=jt(jt({},gie[a],!0),r,!0),o=function(l){Ce(d,l);function d(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=e+"Axis."+a,c}return d.prototype.mergeDefaultAndTheme=function(c,f){var p=b1(this),h=p?zg(c):{},m=f.getTheme();jt(c,m.get(a+"Axis")),jt(c,this.getDefaultOption()),c.type=Q9(c),p&&Ic(c,h,p)},d.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=p$.createByAxisModel(this))},d.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.type=e+"Axis."+a,d.defaultOption=s,d}(n);t.registerComponentModel(o)}),t.registerSubTypeDefaulter(e+"Axis",Q9)}function Q9(t){return t.type||(t.data?"category":"value")}var sze=function(){function t(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return t.prototype.getAxis=function(e){return this._axes[e]},t.prototype.getAxes=function(){return ze(this._dimList,function(e){return this._axes[e]},this)},t.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),kn(this.getAxes(),function(n){return n.scale.type===e})},t.prototype.addAxis=function(e){var n=e.dim;this._axes[n]=e,this._dimList.push(n)},t}(),x$=["x","y"];function J9(t){return t.type==="interval"||t.type==="time"}var oze=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=x$,n}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!J9(n)||!J9(r))){var i=n.getExtent(),a=r.getExtent(),s=this.dataToPoint([i[0],a[0]]),o=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],d=a[1]-a[0];if(!(!l||!d)){var c=(o[0]-s[0])/l,f=(o[1]-s[1])/d,p=s[0]-i[0]*c,h=s[1]-a[0]*f,m=this._transform=[c,0,0,f,p,h];this._invTransform=Og([],m)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(n){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(n[0]))&&i.contain(i.toLocalCoord(n[1]))},e.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},e.prototype.containZone=function(n,r){var i=this.dataToPoint(n),a=this.dataToPoint(r),s=this.getArea(),o=new qt(i[0],i[1],a[0]-i[0],a[1]-i[1]);return s.intersect(o)},e.prototype.dataToPoint=function(n,r,i){i=i||[];var a=n[0],s=n[1];if(this._transform&&a!=null&&isFinite(a)&&s!=null&&isFinite(s))return Ri(i,n,this._transform);var o=this.getAxis("x"),l=this.getAxis("y");return i[0]=o.toGlobalCoord(o.dataToCoord(a,r)),i[1]=l.toGlobalCoord(l.dataToCoord(s,r)),i},e.prototype.clampData=function(n,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,s=i.getExtent(),o=a.getExtent(),l=i.parse(n[0]),d=a.parse(n[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),r[1]=Math.min(Math.max(Math.min(o[0],o[1]),d),Math.max(o[0],o[1])),r},e.prototype.pointToData=function(n,r){var i=[];if(this._invTransform)return Ri(i,n,this._invTransform);var a=this.getAxis("x"),s=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(n[0]),r),i[1]=s.coordToData(s.toLocalCoord(n[1]),r),i},e.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},e.prototype.getArea=function(n){n=n||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(r[0],r[1])-n,s=Math.min(i[0],i[1])-n,o=Math.max(r[0],r[1])-a+n,l=Math.max(i[0],i[1])-s+n;return new qt(a,s,o,l)},e}(sze),lze=function(t){Ce(e,t);function e(n,r,i,a,s){var o=t.call(this,n,r,i)||this;return o.index=0,o.type=a||"value",o.position=s||"bottom",o}return e.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},e.prototype.getGlobalExtent=function(n){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),n&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(n,r){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},e}(Fo);function w$(t,e,n){n=n||{};var r=t.coordinateSystem,i=e.axis,a={},s=i.getAxesOnZeroOf()[0],o=i.position,l=s?"onZero":o,d=i.dim,c=r.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],p={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,m=d==="x"?[f[2]-h,f[3]+h]:[f[0]-h,f[1]+h];if(s){var g=s.toGlobalCoord(s.dataToCoord(0));m[p.onZero]=Math.max(Math.min(g,m[1]),m[0])}a.position=[d==="y"?m[p[l]]:f[0],d==="x"?m[p[l]]:f[3]],a.rotation=Math.PI/2*(d==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=v[o],a.labelOffset=s?m[p[o]]-m[p.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),gi(n.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var _=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-_:_,a.z2=1,a}function eB(t){return t.get("coordinateSystem")==="cartesian2d"}function tB(t){var e={xAxisModel:null,yAxisModel:null};return oe(e,function(n,r){var i=r.replace(/Model$/,""),a=t.getReferringComponents(i,Nr).models[0];e[r]=a}),e}var m3=Math.log;function vie(t,e,n){var r=ad.prototype,i=r.getTicks.call(n),a=r.getTicks.call(n,!0),s=i.length-1,o=r.getInterval.call(n),l=_re(t,e),d=l.extent,c=l.fixMin,f=l.fixMax;if(t.type==="log"){var p=m3(t.base);d=[m3(d[0])/p,m3(d[1])/p]}t.setExtent(d[0],d[1]),t.calcNiceExtent({splitNumber:s,fixMin:c,fixMax:f});var h=r.getExtent.call(t);c&&(d[0]=h[0]),f&&(d[1]=h[1]);var m=r.getInterval.call(t),g=d[0],v=d[1];if(c&&f)m=(v-g)/s;else if(c)for(v=d[0]+m*s;v<d[1]&&isFinite(v)&&isFinite(d[1]);)m=e3(m),v=d[0]+m*s;else if(f)for(g=d[1]-m*s;g>d[0]&&isFinite(g)&&isFinite(d[0]);)m=e3(m),g=d[1]-m*s;else{var _=t.getTicks().length-1;_>s&&(m=e3(m));var x=m*s;v=Math.ceil(d[1]/m)*m,g=Ar(v-x),g<0&&d[0]>=0?(g=0,v=Ar(x)):v>0&&d[1]<=0&&(v=0,g=-Ar(x))}var w=(i[0].value-a[0].value)/o,k=(i[s].value-a[s].value)/o;r.setExtent.call(t,g+m*w,v+m*k),r.setInterval.call(t,m),(w||k)&&r.setNiceExtent.call(t,g+m,v-m)}var uze=function(){function t(e,n,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=x$,this._initCartesian(e,n,r),this.model=e}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(e,n){var r=this._axesMap;this._updateScale(e,this.model);function i(s){var o,l=rn(s),d=l.length;if(d){for(var c=[],f=d-1;f>=0;f--){var p=+l[f],h=s[p],m=h.model,g=h.scale;h$(g)&&m.get("alignTicks")&&m.get("interval")==null?c.push(h):(yg(g,m),h$(g)&&(o=h))}c.length&&(o||(o=c.pop(),yg(o.scale,o.model)),oe(c,function(v){vie(v.scale,v.model,o.scale)}))}}i(r.x),i(r.y);var a={};oe(r.x,function(s){nB(r,"y",s,a)}),oe(r.y,function(s){nB(r,"x",s,a)}),this.resize(this.model,n)},t.prototype.resize=function(e,n,r){var i=e.getBoxLayoutParams(),a=!r&&e.get("containLabel"),s=Qr(i,{width:n.getWidth(),height:n.getHeight()});this._rect=s;var o=this._axesList;l(),a&&(oe(o,function(d){if(!d.model.get(["axisLabel","inside"])){var c=UFe(d);if(c){var f=d.isHorizontal()?"height":"width",p=d.model.get(["axisLabel","margin"]);s[f]-=c[f]+p,d.position==="top"?s.y+=c.height+p:d.position==="left"&&(s.x+=c.width+p)}}}),l()),oe(this._coordsList,function(d){d.calcAffineTransform()});function l(){oe(o,function(d){var c=d.isHorizontal(),f=c?[0,s.width]:[0,s.height],p=d.inverse?1:0;d.setExtent(f[p],f[1-p]),dze(d,c?s.x:s.y)})}},t.prototype.getAxis=function(e,n){var r=this._axesMap[e];if(r!=null)return r[n||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(e,n){if(e!=null&&n!=null){var r="x"+e+"y"+n;return this._coordsMap[r]}_t(e)&&(n=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===n)return a[i]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(e,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},t.prototype.convertFromPixel=function(e,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},t.prototype._findConvertTarget=function(e){var n=e.seriesModel,r=e.xAxisModel||n&&n.getReferringComponents("xAxis",Nr).models[0],i=e.yAxisModel||n&&n.getReferringComponents("yAxis",Nr).models[0],a=e.gridModel,s=this._coordsList,o,l;if(n)o=n.coordinateSystem,Yt(s,o)<0&&(o=null);else if(r&&i)o=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var d=a.coordinateSystem;d===this&&(o=this._coordsList[0])}return{cartesian:o,axis:l}},t.prototype.containPoint=function(e){var n=this._coordsList[0];if(n)return n.containPoint(e)},t.prototype._initCartesian=function(e,n,r){var i=this,a=this,s={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},l={x:0,y:0};if(n.eachComponent("xAxis",d("x"),this),n.eachComponent("yAxis",d("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,oe(o.x,function(c,f){oe(o.y,function(p,h){var m="x"+f+"y"+h,g=new oze(m);g.master=i,g.model=e,i._coordsMap[m]=g,i._coordsList.push(g),g.addAxis(c),g.addAxis(p)})});function d(c){return function(f,p){if(g3(f,e)){var h=f.get("position");c==="x"?h!=="top"&&h!=="bottom"&&(h=s.bottom?"top":"bottom"):h!=="left"&&h!=="right"&&(h=s.left?"right":"left"),s[h]=!0;var m=new lze(c,dA(f),[0,0],f.get("type"),h),g=m.type==="category";m.onBand=g&&f.get("boundaryGap"),m.inverse=f.get("inverse"),f.axis=m,m.model=f,m.grid=a,m.index=p,a._axesList.push(m),o[c][p]=m,l[c]++}}}},t.prototype._updateScale=function(e,n){oe(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(eB(i)){var a=tB(i),s=a.xAxisModel,o=a.yAxisModel;if(!g3(s,n)||!g3(o,n))return;var l=this.getCartesian(s.componentIndex,o.componentIndex),d=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");r(d,c),r(d,f)}},this);function r(i,a){oe(jk(i,a.dim),function(s){a.scale.unionExtentFromData(i,s)})}},t.prototype.getTooltipAxes=function(e){var n=[],r=[];return oe(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),s=i.getOtherAxis(a);Yt(n,a)<0&&n.push(a),Yt(r,s)<0&&r.push(s)}),{baseAxes:n,otherAxes:r}},t.create=function(e,n){var r=[];return e.eachComponent("grid",function(i,a){var s=new t(i,e,n);s.name="grid_"+a,s.resize(i,n,!0),i.coordinateSystem=s,r.push(s)}),e.eachSeries(function(i){if(eB(i)){var a=tB(i),s=a.xAxisModel,o=a.yAxisModel,l=s.getCoordSysModel(),d=l.coordinateSystem;i.coordinateSystem=d.getCartesian(s.componentIndex,o.componentIndex)}}),r},t.dimensions=x$,t}();function g3(t,e){return t.getCoordSysModel()===e}function nB(t,e,n,r){n.getAxesOnZeroOf=function(){return a?[a]:[]};var i=t[e],a,s=n.model,o=s.get(["axisLine","onZero"]),l=s.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(l!=null)rB(i[l])&&(a=i[l]);else for(var d in i)if(i.hasOwnProperty(d)&&rB(i[d])&&!r[c(i[d])]){a=i[d];break}a&&(r[c(a)]=!0);function c(f){return f.dim+"_"+f.index}}function rB(t){return t&&t.type!=="category"&&t.type!=="time"&&zFe(t)}function dze(t,e){var n=t.getExtent(),r=n[0]+n[1];t.toGlobalCoord=t.dim==="x"?function(i){return i+e}:function(i){return r-i+e},t.toLocalCoord=t.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}var sc=Math.PI,_a=function(){function t(e,n){this.group=new kt,this.opt=n,this.axisModel=e,yt(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new kt({x:n.position[0],y:n.position[1],rotation:n.rotation});r.updateTransform(),this._transformGroup=r}return t.prototype.hasBuilder=function(e){return!!iB[e]},t.prototype.add=function(e){iB[e](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(e,n,r){var i=Vee(n-e),a,s;return p1(i)?(s=r>0?"top":"bottom",a="center"):p1(i-sc)?(s=r>0?"bottom":"top",a="center"):(s="middle",i>0&&i<sc?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:s}},t.makeAxisEventDataBase=function(e){var n={componentType:e.mainType,componentIndex:e.componentIndex};return n[e.mainType+"Index"]=e.componentIndex,n},t.isLabelSilent=function(e){var n=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||n&&n.show)},t}(),iB={axisLine:function(t,e,n,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&t.handleAutoShown&&(i=t.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),s=r.transform,o=[a[0],0],l=[a[1],0],d=o[0]>l[0];s&&(Ri(o,o,s),Ri(l,l,s));var c=Oe({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new ii({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});mg(f.shape,f.style.lineWidth),f.anid="line",n.add(f);var p=e.get(["axisLine","symbol"]);if(p!=null){var h=e.get(["axisLine","symbolSize"]);it(p)&&(p=[p,p]),(it(h)||pn(h))&&(h=[h,h]);var m=mh(e.get(["axisLine","symbolOffset"])||0,h),g=h[0],v=h[1];oe([{rotate:t.rotation+Math.PI/2,offset:m[0],r:0},{rotate:t.rotation-Math.PI/2,offset:m[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(_,x){if(p[x]!=="none"&&p[x]!=null){var w=Ur(p[x],-g/2,-v/2,g,v,c.stroke,!0),k=_.r+_.offset,S=d?l:o;w.attr({rotation:_.rotate,x:S[0]+k*Math.cos(t.rotation),y:S[1]-k*Math.sin(t.rotation),silent:!0,z2:11}),n.add(w)}})}}},axisTickLabel:function(t,e,n,r){var i=pze(n,r,e,t),a=mze(n,r,e,t);if(fze(e,a,i),hze(n,r,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])){var s=Ire(ze(a,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));Vre(s)}},axisName:function(t,e,n,r){var i=gi(t.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),s=t.nameDirection,o=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,d=e.axis.getExtent(),c=d[0]>d[1]?-1:1,f=[a==="start"?d[0]-c*l:a==="end"?d[1]+c*l:(d[0]+d[1])/2,sB(a)?t.labelOffset+s*l:0],p,h=e.get("nameRotate");h!=null&&(h=h*sc/180);var m;sB(a)?p=_a.innerTextLayout(t.rotation,h!=null?h:t.rotation,s):(p=cze(t.rotation,a,h||0,d),m=t.axisNameAvailableWidth,m!=null&&(m=Math.abs(m/Math.sin(p.rotation)),!isFinite(m)&&(m=null)));var g=o.getFont(),v=e.get("nameTruncate",!0)||{},_=v.ellipsis,x=gi(t.nameTruncateMaxWidth,v.maxWidth,m),w=new un({x:f[0],y:f[1],rotation:p.rotation,silent:_a.isLabelSilent(e),style:Kn(o,{text:i,font:g,overflow:"truncate",width:x,ellipsis:_,fill:o.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:o.get("align")||p.textAlign,verticalAlign:o.get("verticalAlign")||p.textVerticalAlign}),z2:1});if(ph({el:w,componentModel:e,itemName:i}),w.__fullText=i,w.anid="name",e.get("triggerEvent")){var k=_a.makeAxisEventDataBase(e);k.targetType="axisName",k.name=i,Tt(w).eventData=k}r.add(w),w.updateTransform(),n.add(w),w.decomposeTransform()}}};function cze(t,e,n,r){var i=Vee(n-t),a,s,o=r[0]>r[1],l=e==="start"&&!o||e!=="start"&&o;return p1(i-sc/2)?(s=l?"bottom":"top",a="center"):p1(i-sc*1.5)?(s=l?"top":"bottom",a="center"):(s="middle",i<sc*1.5&&i>sc/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:s}}function fze(t,e,n){if(!xre(t.axis)){var r=t.get(["axisLabel","showMinLabel"]),i=t.get(["axisLabel","showMaxLabel"]);e=e||[],n=n||[];var a=e[0],s=e[1],o=e[e.length-1],l=e[e.length-2],d=n[0],c=n[1],f=n[n.length-1],p=n[n.length-2];r===!1?(_s(a),_s(d)):aB(a,s)&&(r?(_s(s),_s(c)):(_s(a),_s(d))),i===!1?(_s(o),_s(f)):aB(l,o)&&(i?(_s(l),_s(p)):(_s(o),_s(f)))}}function _s(t){t&&(t.ignore=!0)}function aB(t,e){var n=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!n||!r)){var i=OC([]);return fh(i,i,-t.rotation),n.applyTransform(Bu([],i,t.getLocalTransform())),r.applyTransform(Bu([],i,e.getLocalTransform())),n.intersect(r)}}function sB(t){return t==="middle"||t==="center"}function yie(t,e,n,r,i){for(var a=[],s=[],o=[],l=0;l<t.length;l++){var d=t[l].coord;s[0]=d,s[1]=0,o[0]=d,o[1]=n,e&&(Ri(s,s,e),Ri(o,o,e));var c=new ii({shape:{x1:s[0],y1:s[1],x2:o[0],y2:o[1]},style:r,z2:2,autoBatch:!0,silent:!0});mg(c.shape,c.style.lineWidth),c.anid=i+"_"+t[l].tickValue,a.push(c)}return a}function pze(t,e,n,r){var i=n.axis,a=n.getModel("axisTick"),s=a.get("show");if(s==="auto"&&r.handleAutoShown&&(s=r.handleAutoShown("axisTick")),!(!s||i.scale.isBlank())){for(var o=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),d=i.getTicksCoords(),c=yie(d,e.transform,l,yt(o.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)t.add(c[f]);return c}}function hze(t,e,n,r){var i=n.axis,a=n.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var s=i.getMinorTicksCoords();if(s.length)for(var o=a.getModel("lineStyle"),l=r*a.get("length"),d=yt(o.getLineStyle(),yt(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<s.length;c++)for(var f=yie(s[c],e.transform,l,d,"minorticks_"+c),p=0;p<f.length;p++)t.add(f[p])}}function mze(t,e,n,r){var i=n.axis,a=gi(r.axisLabelShow,n.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var s=n.getModel("axisLabel"),o=s.get("margin"),l=i.getViewLabels(),d=(gi(r.labelRotate,s.get("rotate"))||0)*sc/180,c=_a.innerTextLayout(r.rotation,d,r.labelDirection),f=n.getCategories&&n.getCategories(!0),p=[],h=_a.isLabelSilent(n),m=n.get("triggerEvent");return oe(l,function(g,v){var _=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(g.tickValue):g.tickValue,x=g.formattedLabel,w=g.rawLabel,k=s;if(f&&f[_]){var S=f[_];_t(S)&&S.textStyle&&(k=new An(S.textStyle,s,n.ecModel))}var C=k.getTextColor()||n.get(["axisLine","lineStyle","color"]),A=i.dataToCoord(_),M=k.getShallow("align",!0)||c.textAlign,$=$t(k.getShallow("alignMinLabel",!0),M),R=$t(k.getShallow("alignMaxLabel",!0),M),I=k.getShallow("verticalAlign",!0)||k.getShallow("baseline",!0)||c.textVerticalAlign,B=$t(k.getShallow("verticalAlignMinLabel",!0),I),j=$t(k.getShallow("verticalAlignMaxLabel",!0),I),z=new un({x:A,y:r.labelOffset+r.labelDirection*o,rotation:c.rotation,silent:h,z2:10+(g.level||0),style:Kn(k,{text:x,align:v===0?$:v===l.length-1?R:M,verticalAlign:v===0?B:v===l.length-1?j:I,fill:gt(C)?C(i.type==="category"?w:i.type==="value"?_+"":_,v):C})});if(z.anid="label_"+_,ph({el:z,componentModel:n,itemName:x,formatterParamsExtra:{isTruncated:function(){return z.isTruncated},value:w,tickIndex:v}}),m){var F=_a.makeAxisEventDataBase(n);F.targetType="axisLabel",F.value=w,F.tickIndex=v,i.type==="category"&&(F.dataIndex=_),Tt(z).eventData=F}e.add(z),z.updateTransform(),p.push(z),t.add(z),z.decomposeTransform()}),p}}function gze(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return vze(n,t,e),n.seriesInvolved&&bze(n,t),n}function vze(t,e,n){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],s=[];oe(n.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=E1(o.model),d=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=o;var c=o.model,f=c.getModel("tooltip",r);if(oe(o.getAxes(),Pt(g,!1,null)),o.getTooltipAxes&&r&&f.get("show")){var p=f.get("trigger")==="axis",h=f.get(["axisPointer","type"])==="cross",m=o.getTooltipAxes(f.get(["axisPointer","axis"]));(p||h)&&oe(m.baseAxes,Pt(g,h?"cross":!0,p)),h&&oe(m.otherAxes,Pt(g,"cross",!1))}function g(v,_,x){var w=x.model.getModel("axisPointer",i),k=w.get("show");if(!(!k||k==="auto"&&!v&&!k$(w))){_==null&&(_=w.get("triggerTooltip")),w=v?yze(x,f,i,e,v,_):w;var S=w.get("snap"),C=w.get("triggerEmphasis"),A=E1(x.model),M=_||S||x.type==="category",$=t.axesInfo[A]={key:A,axis:x,coordSys:o,axisPointerModel:w,triggerTooltip:_,triggerEmphasis:C,involveSeries:M,snap:S,useHandle:k$(w),seriesModels:[],linkGroup:null};d[A]=$,t.seriesInvolved=t.seriesInvolved||M;var R=_ze(a,x);if(R!=null){var I=s[R]||(s[R]={axesInfo:{}});I.axesInfo[A]=$,I.mapper=a[R].mapper,$.linkGroup=I}}}})}function yze(t,e,n,r,i,a){var s=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};oe(o,function(p){l[p]=xt(s.get(p))}),l.snap=t.type!=="category"&&!!a,s.get("type")==="cross"&&(l.type="line");var d=l.label||(l.label={});if(d.show==null&&(d.show=!1),i==="cross"){var c=s.get(["label","show"]);if(d.show=c!=null?c:!0,!a){var f=l.lineStyle=s.get("crossStyle");f&&yt(d,f.textStyle)}}return t.model.getModel("axisPointer",new An(l,n,r))}function bze(t,e){e.eachSeries(function(n){var r=n.coordinateSystem,i=n.get(["tooltip","trigger"],!0),a=n.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||n.get(["axisPointer","show"],!0)===!1||oe(t.coordSysAxesInfo[E1(r.model)],function(s){var o=s.axis;r.getAxis(o.dim)===o&&(s.seriesModels.push(n),s.seriesDataCount==null&&(s.seriesDataCount=0),s.seriesDataCount+=n.getData().count())})})}function _ze(t,e){for(var n=e.model,r=e.dim,i=0;i<t.length;i++){var a=t[i]||{};if(v3(a[r+"AxisId"],n.id)||v3(a[r+"AxisIndex"],n.componentIndex)||v3(a[r+"AxisName"],n.name))return i}}function v3(t,e){return t==="all"||Be(t)&&Yt(t,e)>=0||t===e}function xze(t){var e=WI(t);if(e){var n=e.axisPointerModel,r=e.axis.scale,i=n.option,a=n.get("status"),s=n.get("value");s!=null&&(s=r.parse(s));var o=k$(n);a==null&&(i.status=o?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(s==null||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),i.value=s,o&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function WI(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[E1(t)]}function wze(t){var e=WI(t);return e&&e.axisPointerModel}function k$(t){return!!t.get(["handle","show"])}function E1(t){return t.type+"||"+t.id}var oB={},yh=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){this.axisPointerClass&&xze(n),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,i,!0)},e.prototype.updateAxisPointer=function(n,r,i,a){this._doUpdateAxisPointerClass(n,i,!1)},e.prototype.remove=function(n,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(n,r){this._disposeAxisPointer(r),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(n,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var s=wze(n);s?(this._axisPointer||(this._axisPointer=new a)).render(n,s,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},e.registerAxisPointerClass=function(n,r){oB[n]=r},e.getAxisPointerClass=function(n){return n&&oB[n]},e.type="axis",e}(hr),S$=on();function bie(t,e,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitArea"),s=a.getModel("areaStyle"),o=s.get("color"),l=r.coordinateSystem.getRect(),d=i.getTicksCoords({tickModel:a,clamp:!0});if(d.length){var c=o.length,f=S$(t).splitAreaColors,p=pt(),h=0;if(f)for(var m=0;m<d.length;m++){var g=f.get(d[m].tickValue);if(g!=null){h=(g+(c-1)*m)%c;break}}var v=i.toGlobalCoord(d[0].coord),_=s.getAreaStyle();o=Be(o)?o:[o];for(var m=1;m<d.length;m++){var x=i.toGlobalCoord(d[m].coord),w=void 0,k=void 0,S=void 0,C=void 0;i.isHorizontal()?(w=v,k=l.y,S=x-w,C=l.height,v=w+S):(w=l.x,k=v,S=l.width,C=x-k,v=k+C);var A=d[m-1].tickValue;A!=null&&p.set(A,h),e.add(new sn({anid:A!=null?"area_"+A:null,shape:{x:w,y:k,width:S,height:C},style:yt({fill:o[h]},_),autoBatch:!0,silent:!0})),h=(h+1)%c}S$(t).splitAreaColors=p}}}function _ie(t){S$(t).splitAreaColors=null}var kze=["axisLine","axisTickLabel","axisName"],Sze=["splitArea","splitLine","minorSplitLine"],xie=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return e.prototype.render=function(n,r,i,a){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new kt,this.group.add(this._axisGroup),!!n.get("show")){var o=n.getCoordSysModel(),l=w$(o,n),d=new _a(n,Oe({handleAutoShown:function(f){for(var p=o.coordinateSystem.getCartesians(),h=0;h<p.length;h++)if(h$(p[h].getOtherAxis(n.axis).scale))return!0;return!1}},l));oe(kze,d.add,d),this._axisGroup.add(d.getGroup()),oe(Sze,function(f){n.get([f,"show"])&&Cze[f](this,this._axisGroup,n,o)},this);var c=a&&a.type==="changeAxisOrder"&&a.isInitSort;c||Cb(s,this._axisGroup,n),t.prototype.render.call(this,n,r,i,a)}},e.prototype.remove=function(){_ie(this)},e.type="cartesianAxis",e}(yh),Cze={splitLine:function(t,e,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitLine"),s=a.getModel("lineStyle"),o=s.get("color"),l=a.get("showMinLine")!==!1,d=a.get("showMaxLine")!==!1;o=Be(o)?o:[o];for(var c=r.coordinateSystem.getRect(),f=i.isHorizontal(),p=0,h=i.getTicksCoords({tickModel:a}),m=[],g=[],v=s.getLineStyle(),_=0;_<h.length;_++){var x=i.toGlobalCoord(h[_].coord);if(!(_===0&&!l||_===h.length-1&&!d)){var w=h[_].tickValue;f?(m[0]=x,m[1]=c.y,g[0]=x,g[1]=c.y+c.height):(m[0]=c.x,m[1]=x,g[0]=c.x+c.width,g[1]=x);var k=p++%o.length,S=new ii({anid:w!=null?"line_"+w:null,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:g[0],y2:g[1]},style:yt({stroke:o[k]},v),silent:!0});mg(S.shape,v.lineWidth),e.add(S)}}}},minorSplitLine:function(t,e,n,r){var i=n.axis,a=n.getModel("minorSplitLine"),s=a.getModel("lineStyle"),o=r.coordinateSystem.getRect(),l=i.isHorizontal(),d=i.getMinorTicksCoords();if(d.length)for(var c=[],f=[],p=s.getLineStyle(),h=0;h<d.length;h++)for(var m=0;m<d[h].length;m++){var g=i.toGlobalCoord(d[h][m].coord);l?(c[0]=g,c[1]=o.y,f[0]=g,f[1]=o.y+o.height):(c[0]=o.x,c[1]=g,f[0]=o.x+o.width,f[1]=g);var v=new ii({anid:"minor_line_"+d[h][m].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:p,silent:!0});mg(v.shape,p.lineWidth),e.add(v)}},splitArea:function(t,e,n,r){bie(t,e,n,r)}},wie=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="xAxis",e}(xie),Aze=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=wie.type,n}return e.type="yAxis",e}(xie),Tze=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="grid",n}return e.prototype.render=function(n,r){this.group.removeAll(),n.get("show")&&this.group.add(new sn({shape:n.coordinateSystem.getRect(),style:yt({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(hr),lB={offset:0};function kie(t){t.registerComponentView(Tze),t.registerComponentModel(tze),t.registerCoordinateSystem("cartesian2d",uze),_g(t,"x",_$,lB),_g(t,"y",_$,lB),t.registerComponentView(wie),t.registerComponentView(Aze),t.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function Eze(t){Kt(kie),t.registerSeriesModel(XBe),t.registerChartView(eze),t.registerLayout(Ib("scatter"))}function Mze(t){t.eachSeriesByType("radar",function(e){var n=e.getData(),r=[],i=e.coordinateSystem;if(i){var a=i.getIndicatorAxes();oe(a,function(s,o){n.each(n.mapDimension(a[o].dim),function(l,d){r[d]=r[d]||[];var c=i.dataToPoint(l,o);r[d][o]=uB(c)?c:dB(i)})}),n.each(function(s){var o=g6e(r[s],function(l){return uB(l)})||dB(i);r[s].push(o.slice()),n.setItemLayout(s,r[s])})}})}function uB(t){return!isNaN(t[0])&&!isNaN(t[1])}function dB(t){return[t.cx,t.cy]}function $ze(t){var e=t.polar;if(e){Be(e)||(e=[e]);var n=[];oe(e,function(r,i){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),t.radar=t.radar||[],Be(t.radar)||(t.radar=[t.radar]),t.radar.push(r)):n.push(r)}),t.polar=n}oe(t.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var Dze=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=n.coordinateSystem,s=this.group,o=n.getData(),l=this._data;function d(p,h){var m=p.getItemVisual(h,"symbol")||"circle";if(m!=="none"){var g=Wg(p.getItemVisual(h,"symbolSize")),v=Ur(m,-1,-1,2,2),_=p.getItemVisual(h,"symbolRotate")||0;return v.attr({style:{strokeNoScale:!0},z2:100,scaleX:g[0]/2,scaleY:g[1]/2,rotation:_*Math.PI/180||0}),v}}function c(p,h,m,g,v,_){m.removeAll();for(var x=0;x<h.length-1;x++){var w=d(g,v);w&&(w.__dimIdx=x,p[x]?(w.setPosition(p[x]),hh[_?"initProps":"updateProps"](w,{x:h[x][0],y:h[x][1]},n,v)):w.setPosition(h[x]),m.add(w))}}function f(p){return ze(p,function(h){return[a.cx,a.cy]})}o.diff(l).add(function(p){var h=o.getItemLayout(p);if(h){var m=new $a,g=new Da,v={shape:{points:h}};m.shape.points=f(h),g.shape.points=f(h),sr(m,v,n,p),sr(g,v,n,p);var _=new kt,x=new kt;_.add(g),_.add(m),_.add(x),c(g.shape.points,h,x,o,p,!0),o.setItemGraphicEl(p,_)}}).update(function(p,h){var m=l.getItemGraphicEl(h),g=m.childAt(0),v=m.childAt(1),_=m.childAt(2),x={shape:{points:o.getItemLayout(p)}};x.shape.points&&(c(g.shape.points,x.shape.points,_,o,p,!1),Vo(v),Vo(g),yn(g,x,n),yn(v,x,n),o.setItemGraphicEl(p,m))}).remove(function(p){s.remove(l.getItemGraphicEl(p))}).execute(),o.eachItemGraphicEl(function(p,h){var m=o.getItemModel(h),g=p.childAt(0),v=p.childAt(1),_=p.childAt(2),x=o.getItemVisual(h,"style"),w=x.fill;s.add(p),g.useStyle(yt(m.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:w})),Oi(g,m,"lineStyle"),Oi(v,m,"areaStyle");var k=m.getModel("areaStyle"),S=k.isEmpty()&&k.parentModel.isEmpty();v.ignore=S,oe(["emphasis","select","blur"],function(M){var $=m.getModel([M,"areaStyle"]),R=$.isEmpty()&&$.parentModel.isEmpty();v.ensureState(M).ignore=R&&S}),v.useStyle(yt(k.getAreaStyle(),{fill:w,opacity:.7,decal:x.decal}));var C=m.getModel("emphasis"),A=C.getModel("itemStyle").getItemStyle();_.eachChild(function(M){if(M instanceof xi){var $=M.style;M.useStyle(Oe({image:$.image,x:$.x,y:$.y,width:$.width,height:$.height},x))}else M.useStyle(x),M.setColor(w),M.style.strokeNoScale=!0;var R=M.ensureState("emphasis");R.style=xt(A);var I=o.getStore().get(o.getDimensionIndex(M.__dimIdx),h);(I==null||isNaN(I))&&(I=""),Li(M,ui(m),{labelFetcher:o.hostModel,labelDataIndex:h,labelDimIndex:M.__dimIdx,defaultText:I,inheritColor:w,defaultOpacity:x.opacity})}),_r(p,C.get("focus"),C.get("blurScope"),C.get("disabled"))}),this._data=o},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(Pn),Rze=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Lb(ut(this.getData,this),ut(this.getRawData,this))},e.prototype.getInitialData=function(n,r){return Yg(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(n,r,i){var a=this.getData(),s=this.coordinateSystem,o=s.getIndicatorAxes(),l=this.getData().getName(n),d=l===""?this.name:l,c=kne(this,n);return di("section",{header:d,sortBlocks:!0,blocks:ze(o,function(f){var p=a.get(a.mapDimension(f.dim),n);return di("nameValue",{markerType:"subItem",markerColor:c,name:f.name,value:p,sortParam:p})})})},e.prototype.getTooltipPosition=function(n){if(n!=null){for(var r=this.getData(),i=this.coordinateSystem,a=r.getValues(ze(i.dimensions,function(d){return r.mapDimension(d)}),n),s=0,o=a.length;s<o;s++)if(!isNaN(a[s])){var l=i.getIndicatorAxes();return i.coordToPoint(l[s].dataToCoord(a[s]),s)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(Zn),Fv=gie.value;function vx(t,e){return yt({show:e},t)}var Pze=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){var n=this.get("boundaryGap"),r=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),s=this.get("axisTick"),o=this.get("axisLabel"),l=this.get("axisName"),d=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),f=this.get("axisNameGap"),p=this.get("triggerEvent"),h=ze(this.get("indicator")||[],function(m){m.max!=null&&m.max>0&&!m.min?m.min=0:m.min!=null&&m.min<0&&!m.max&&(m.max=0);var g=l;m.color!=null&&(g=yt({color:m.color},l));var v=jt(xt(m),{boundaryGap:n,splitNumber:r,scale:i,axisLine:a,axisTick:s,axisLabel:o,name:m.text,showName:d,nameLocation:"end",nameGap:f,nameTextStyle:g,triggerEvent:p},!1);if(it(c)){var _=v.name;v.name=c.replace("{value}",_!=null?_:"")}else gt(c)&&(v.name=c(v.name,v));var x=new An(v,null,this.ecModel);return Hr(x,$b.prototype),x.mainType="radar",x.componentIndex=this.componentIndex,x},this);this._indicatorModels=h},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:jt({lineStyle:{color:"#bbb"}},Fv.axisLine),axisLabel:vx(Fv.axisLabel,!1),axisTick:vx(Fv.axisTick,!1),splitLine:vx(Fv.splitLine,!0),splitArea:vx(Fv.splitArea,!0),indicator:[]},e}(tn),Ize=["axisLine","axisTickLabel","axisName"],Oze=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=this.group;a.removeAll(),this._buildAxes(n),this._buildSplitLineAndArea(n)},e.prototype._buildAxes=function(n){var r=n.coordinateSystem,i=r.getIndicatorAxes(),a=ze(i,function(s){var o=s.model.get("showName")?s.name:"",l=new _a(s.model,{axisName:o,position:[r.cx,r.cy],rotation:s.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});oe(a,function(s){oe(Ize,s.add,s),this.group.add(s.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(n){var r=n.coordinateSystem,i=r.getIndicatorAxes();if(!i.length)return;var a=n.get("shape"),s=n.getModel("splitLine"),o=n.getModel("splitArea"),l=s.getModel("lineStyle"),d=o.getModel("areaStyle"),c=s.get("show"),f=o.get("show"),p=l.get("color"),h=d.get("color"),m=Be(p)?p:[p],g=Be(h)?h:[h],v=[],_=[];function x(F,q,N){var O=N%q.length;return F[O]=F[O]||[],O}if(a==="circle")for(var w=i[0].getTicksCoords(),k=r.cx,S=r.cy,C=0;C<w.length;C++){if(c){var A=x(v,m,C);v[A].push(new hd({shape:{cx:k,cy:S,r:w[C].coord}}))}if(f&&C<w.length-1){var A=x(_,g,C);_[A].push(new wb({shape:{cx:k,cy:S,r0:w[C].coord,r:w[C+1].coord}}))}}else for(var M,$=ze(i,function(F,q){var N=F.getTicksCoords();return M=M==null?N.length-1:Math.min(N.length-1,M),ze(N,function(O){return r.coordToPoint(O.coord,q)})}),R=[],C=0;C<=M;C++){for(var I=[],B=0;B<i.length;B++)I.push($[B][C]);if(I[0]&&I.push(I[0].slice()),c){var A=x(v,m,C);v[A].push(new Da({shape:{points:I}}))}if(f&&R){var A=x(_,g,C-1);_[A].push(new $a({shape:{points:I.concat(R)}}))}R=I.slice().reverse()}var j=l.getLineStyle(),z=d.getAreaStyle();oe(_,function(F,q){this.group.add(Ns(F,{style:yt({stroke:"none",fill:g[q%g.length]},z),silent:!0}))},this),oe(v,function(F,q){this.group.add(Ns(F,{style:yt({fill:"none",stroke:m[q%m.length]},j),silent:!0}))},this)},e.type="radar",e}(hr),Lze=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this,n,r,i)||this;return a.type="value",a.angle=0,a.name="",a}return e}(Fo),Vze=function(){function t(e,n,r){this.dimensions=[],this._model=e,this._indicatorAxes=ze(e.getIndicatorModels(),function(i,a){var s="indicator_"+a,o=new Lze(s,new ad);return o.name=i.get("name"),o.model=i,i.axis=o,this.dimensions.push(s),o},this),this.resize(e,r)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(e,n){var r=this._indicatorAxes[n];return this.coordToPoint(r.dataToCoord(e),n)},t.prototype.coordToPoint=function(e,n){var r=this._indicatorAxes[n],i=r.angle,a=this.cx+e*Math.cos(i),s=this.cy-e*Math.sin(i);return[a,s]},t.prototype.pointToData=function(e){var n=e[0]-this.cx,r=e[1]-this.cy,i=Math.sqrt(n*n+r*r);n/=i,r/=i;for(var a=Math.atan2(-r,n),s=1/0,o,l=-1,d=0;d<this._indicatorAxes.length;d++){var c=this._indicatorAxes[d],f=Math.abs(a-c.angle);f<s&&(o=c,l=d,s=f)}return[l,+(o&&o.coordToData(i))]},t.prototype.resize=function(e,n){var r=e.get("center"),i=n.getWidth(),a=n.getHeight(),s=Math.min(i,a)/2;this.cx=Qe(r[0],i),this.cy=Qe(r[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var o=e.get("radius");(it(o)||pn(o))&&(o=[0,o]),this.r0=Qe(o[0],s),this.r=Qe(o[1],s),oe(this._indicatorAxes,function(l,d){l.setExtent(this.r0,this.r);var c=this.startAngle+d*Math.PI*2/this._indicatorAxes.length;c=Math.atan2(Math.sin(c),Math.cos(c)),l.angle=c},this)},t.prototype.update=function(e,n){var r=this._indicatorAxes,i=this._model;oe(r,function(o){o.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(o,l){if(!(o.get("coordinateSystem")!=="radar"||e.getComponent("radar",o.get("radarIndex"))!==i)){var d=o.getData();oe(r,function(c){c.scale.unionExtentFromData(d,d.mapDimension(c.dim))})}},this);var a=i.get("splitNumber"),s=new ad;s.setExtent(0,a),s.setInterval(1),oe(r,function(o,l){vie(o.scale,o.model,s)})},t.prototype.convertToPixel=function(e,n,r){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(e,n,r){return console.warn("Not implemented."),null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.create=function(e,n){var r=[];return e.eachComponent("radar",function(i){var a=new t(i,e,n);r.push(a),i.coordinateSystem=a}),e.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=r[i.get("radarIndex")||0])}),r},t.dimensions=[],t}();function Nze(t){t.registerCoordinateSystem("radar",Vze),t.registerComponentModel(Pze),t.registerComponentView(Oze),t.registerVisual({seriesType:"radar",reset:function(e){var n=e.getData();n.each(function(r){n.setItemVisual(r,"legendIcon","roundRect")}),n.setVisual("legendIcon","roundRect")}})}function jze(t){Kt(Nze),t.registerChartView(Dze),t.registerSeriesModel(Rze),t.registerLayout(Mze),t.registerProcessor(Ob("radar")),t.registerPreprocessor($ze)}var cB="\0_ec_interaction_mutex";function Fze(t,e,n){var r=GI(t);r[e]=n}function Bze(t,e,n){var r=GI(t),i=r[e];i===n&&(r[e]=null)}function fB(t,e){return!!GI(t)[e]}function GI(t){return t[cB]||(t[cB]={})}Yl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Or);var Vb=function(t){Ce(e,t);function e(n){var r=t.call(this)||this;r._zr=n;var i=ut(r._mousedownHandler,r),a=ut(r._mousemoveHandler,r),s=ut(r._mouseupHandler,r),o=ut(r._mousewheelHandler,r),l=ut(r._pinchHandler,r);return r.enable=function(d,c){this.disable(),this._opt=yt(xt(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),d==null&&(d=!0),(d===!0||d==="move"||d==="pan")&&(n.on("mousedown",i),n.on("mousemove",a),n.on("mouseup",s)),(d===!0||d==="scale"||d==="zoom")&&(n.on("mousewheel",o),n.on("pinch",l))},r.disable=function(){n.off("mousedown",i),n.off("mousemove",a),n.off("mouseup",s),n.off("mousewheel",o),n.off("pinch",l)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(n){this.pointerChecker=n},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(n){if(!j7(n)){for(var r=n.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=n.offsetX,a=n.offsetY;this.pointerChecker&&this.pointerChecker(n,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},e.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!Ow("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||fB(this._zr,"globalPan"))){var r=n.offsetX,i=n.offsetY,a=this._x,s=this._y,o=r-a,l=i-s;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&ed(n.event),Sie(this,"pan","moveOnMouseMove",n,{dx:o,dy:l,oldX:a,oldY:s,newX:r,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(n){j7(n)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(n){var r=Ow("zoomOnMouseWheel",n,this._opt),i=Ow("moveOnMouseWheel",n,this._opt),a=n.wheelDelta,s=Math.abs(a),o=n.offsetX,l=n.offsetY;if(!(a===0||!r&&!i)){if(r){var d=s>3?1.4:s>1?1.2:1.1,c=a>0?d:1/d;y3(this,"zoom","zoomOnMouseWheel",n,{scale:c,originX:o,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(a),p=(a>0?1:-1)*(f>3?.4:f>1?.15:.05);y3(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:p,originX:o,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(n){if(!fB(this._zr,"globalPan")){var r=n.pinchScale>1?1.1:1/1.1;y3(this,"zoom",null,n,{scale:r,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},e}(ao);function y3(t,e,n,r,i){t.pointerChecker&&t.pointerChecker(r,i.originX,i.originY)&&(ed(r.event),Sie(t,e,n,r,i))}function Sie(t,e,n,r,i){i.isAvailableBehavior=ut(Ow,null,n,r),t.trigger(e,i)}function Ow(t,e,n){var r=n[t];return!t||r&&(!it(r)||e.event[r+"Key"])}function YI(t,e,n){var r=t.target;r.x+=e,r.y+=n,r.dirty()}function KI(t,e,n,r){var i=t.target,a=t.zoomLimit,s=t.zoom=t.zoom||1;if(s*=e,a){var o=a.min||0,l=a.max||1/0;s=Math.max(Math.min(l,s),o)}var d=s/t.zoom;t.zoom=s,i.x-=(n-i.x)*(d-1),i.y-=(r-i.y)*(d-1),i.scaleX*=d,i.scaleY*=d,i.dirty()}var zze={axisPointer:1,tooltip:1,brush:1};function fA(t,e,n){var r=e.getComponentByElement(t.topTarget),i=r&&r.coordinateSystem;return r&&r!==n&&!zze.hasOwnProperty(r.mainType)&&i&&i.model!==n}function Cie(t){if(it(t)){var e=new DOMParser;t=e.parseFromString(t,"text/xml")}var n=t;for(n.nodeType===9&&(n=n.firstChild);n.nodeName.toLowerCase()!=="svg"||n.nodeType!==1;)n=n.nextSibling;return n}var b3,Hk={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},pB=rn(Hk),qk={"alignment-baseline":"textBaseline","stop-color":"stopColor"},hB=rn(qk),Uze=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(e,n){n=n||{};var r=Cie(e);this._defsUsePending=[];var i=new kt;this._root=i;var a=[],s=r.getAttribute("viewBox")||"",o=parseFloat(r.getAttribute("width")||n.width),l=parseFloat(r.getAttribute("height")||n.height);isNaN(o)&&(o=null),isNaN(l)&&(l=null),Za(r,i,null,!0,!1);for(var d=r.firstChild;d;)this._parseNode(d,i,a,null,!1,!1),d=d.nextSibling;Wze(this._defs,this._defsUsePending),this._defsUsePending=[];var c,f;if(s){var p=pA(s);p.length>=4&&(c={x:parseFloat(p[0]||0),y:parseFloat(p[1]||0),width:parseFloat(p[2]),height:parseFloat(p[3])})}if(c&&o!=null&&l!=null&&(f=Tie(c,{x:0,y:0,width:o,height:l}),!n.ignoreViewBox)){var h=i;i=new kt,i.add(h),h.scaleX=h.scaleY=f.scale,h.x=f.x,h.y=f.y}return!n.ignoreRootClip&&o!=null&&l!=null&&i.setClipPath(new sn({shape:{x:0,y:0,width:o,height:l}})),{root:i,width:o,height:l,viewBoxRect:c,viewBoxTransform:f,named:a}},t.prototype._parseNode=function(e,n,r,i,a,s){var o=e.nodeName.toLowerCase(),l,d=i;if(o==="defs"&&(a=!0),o==="text"&&(s=!0),o==="defs"||o==="switch")l=n;else{if(!a){var c=b3[o];if(c&&ft(b3,o)){l=c.call(this,e,n);var f=e.getAttribute("name");if(f){var p={name:f,namedFrom:null,svgNodeTagLower:o,el:l};r.push(p),o==="g"&&(d=p)}else i&&r.push({name:i.name,namedFrom:i,svgNodeTagLower:o,el:l});n.add(l)}}var h=mB[o];if(h&&ft(mB,o)){var m=h.call(this,e),g=e.getAttribute("id");g&&(this._defs[g]=m)}}if(l&&l.isGroup)for(var v=e.firstChild;v;)v.nodeType===1?this._parseNode(v,l,r,d,a,s):v.nodeType===3&&s&&this._parseText(v,l),v=v.nextSibling},t.prototype._parseText=function(e,n){var r=new hg({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});xs(n,r),Za(e,r,this._defsUsePending,!1,!1),Hze(r,n);var i=r.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,r.scaleX*=a/9,r.scaleY*=a/9);var s=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=s;var o=r.getBoundingRect();return this._textX+=o.width,n.add(r),r},t.internalField=function(){b3={g:function(e,n){var r=new kt;return xs(n,r),Za(e,r,this._defsUsePending,!1,!1),r},rect:function(e,n){var r=new sn;return xs(n,r),Za(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,n){var r=new hd;return xs(n,r),Za(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,n){var r=new ii;return xs(n,r),Za(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,n){var r=new qC;return xs(n,r),Za(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,n){var r=e.getAttribute("points"),i;r&&(i=yB(r));var a=new $a({shape:{points:i||[]},silent:!0});return xs(n,a),Za(e,a,this._defsUsePending,!1,!1),a},polyline:function(e,n){var r=e.getAttribute("points"),i;r&&(i=yB(r));var a=new Da({shape:{points:i||[]},silent:!0});return xs(n,a),Za(e,a,this._defsUsePending,!1,!1),a},image:function(e,n){var r=new xi;return xs(n,r),Za(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,n){var r=e.getAttribute("x")||"0",i=e.getAttribute("y")||"0",a=e.getAttribute("dx")||"0",s=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(s);var o=new kt;return xs(n,o),Za(e,o,this._defsUsePending,!1,!0),o},tspan:function(e,n){var r=e.getAttribute("x"),i=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),i!=null&&(this._textY=parseFloat(i));var a=e.getAttribute("dx")||"0",s=e.getAttribute("dy")||"0",o=new kt;return xs(n,o),Za(e,o,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(s),o},path:function(e,n){var r=e.getAttribute("d")||"",i=vte(r);return xs(n,i),Za(e,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),t}(),mB={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||"0",10),n=parseInt(t.getAttribute("y1")||"0",10),r=parseInt(t.getAttribute("x2")||"10",10),i=parseInt(t.getAttribute("y2")||"0",10),a=new Sb(e,n,r,i);return gB(t,a),vB(t,a),a},radialgradient:function(t){var e=parseInt(t.getAttribute("cx")||"0",10),n=parseInt(t.getAttribute("cy")||"0",10),r=parseInt(t.getAttribute("r")||"0",10),i=new xte(e,n,r);return gB(t,i),vB(t,i),i}};function gB(t,e){var n=t.getAttribute("gradientUnits");n==="userSpaceOnUse"&&(e.global=!0)}function vB(t,e){for(var n=t.firstChild;n;){if(n.nodeType===1&&n.nodeName.toLocaleLowerCase()==="stop"){var r=n.getAttribute("offset"),i=void 0;r&&r.indexOf("%")>0?i=parseInt(r,10)/100:r?i=parseFloat(r):i=0;var a={};Aie(n,a,a);var s=a.stopColor||n.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:i,color:s})}n=n.nextSibling}}function xs(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),yt(e.__inheritedStyle,t.__inheritedStyle))}function yB(t){for(var e=pA(t),n=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),a=parseFloat(e[r+1]);n.push([i,a])}return n}function Za(t,e,n,r,i){var a=e,s=a.__inheritedStyle=a.__inheritedStyle||{},o={};t.nodeType===1&&(Kze(t,e),Aie(t,s,o),r||Xze(t,s,o)),a.style=a.style||{},s.fill!=null&&(a.style.fill=bB(a,"fill",s.fill,n)),s.stroke!=null&&(a.style.stroke=bB(a,"stroke",s.stroke,n)),oe(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){s[l]!=null&&(a.style[l]=parseFloat(s[l]))}),oe(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){s[l]!=null&&(a.style[l]=s[l])}),i&&(a.__selfStyle=o),s.lineDash&&(a.style.lineDash=ze(pA(s.lineDash),function(l){return parseFloat(l)})),(s.visibility==="hidden"||s.visibility==="collapse")&&(a.invisible=!0),s.display==="none"&&(a.ignore=!0)}function Hze(t,e){var n=e.__selfStyle;if(n){var r=n.textBaseline,i=r;!r||r==="auto"||r==="baseline"?i="alphabetic":r==="before-edge"||r==="text-before-edge"?i="top":r==="after-edge"||r==="text-after-edge"?i="bottom":(r==="central"||r==="mathematical")&&(i="middle"),t.style.textBaseline=i}var a=e.__inheritedStyle;if(a){var s=a.textAlign,o=s;s&&(s==="middle"&&(o="center"),t.style.textAlign=o)}}var qze=/^url\(\s*#(.*?)\)/;function bB(t,e,n,r){var i=n&&n.match(qze);if(i){var a=xo(i[1]);r.push([t,e,a]);return}return n==="none"&&(n=null),n}function Wze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r[0].style[r[1]]=t[r[2]]}}var Gze=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function pA(t){return t.match(Gze)||[]}var Yze=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,_3=Math.PI/180;function Kze(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var r=[],i=null;n.replace(Yze,function(f,p,h){return r.push(p,h),""});for(var a=r.length-1;a>0;a-=2){var s=r[a],o=r[a-1],l=pA(s);switch(i=i||ds(),o){case"translate":Nl(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":qP(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":fh(i,i,-parseFloat(l[0])*_3,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var d=Math.tan(parseFloat(l[0])*_3);Bu(i,[1,0,d,1,0,0],i);break;case"skewY":var c=Math.tan(parseFloat(l[0])*_3);Bu(i,[1,c,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}e.setLocalTransform(i)}}var _B=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Aie(t,e,n){var r=t.getAttribute("style");if(r){_B.lastIndex=0;for(var i;(i=_B.exec(r))!=null;){var a=i[1],s=ft(Hk,a)?Hk[a]:null;s&&(e[s]=i[2]);var o=ft(qk,a)?qk[a]:null;o&&(n[o]=i[2])}}}function Xze(t,e,n){for(var r=0;r<pB.length;r++){var i=pB[r],a=t.getAttribute(i);a!=null&&(e[Hk[i]]=a)}for(var r=0;r<hB.length;r++){var i=hB[r],a=t.getAttribute(i);a!=null&&(n[qk[i]]=a)}}function Tie(t,e){var n=e.width/t.width,r=e.height/t.height,i=Math.min(n,r);return{scale:i,x:-(t.x+t.width/2)*i+(e.x+e.width/2),y:-(t.y+t.height/2)*i+(e.y+e.height/2)}}function Zze(t,e){var n=new Uze;return n.parse(t,e)}var Qze=pt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Jze=function(){function t(e,n){this.type="geoSVG",this._usedGraphicMap=pt(),this._freedGraphics=[],this._mapName=e,this._parsedXML=Cie(n)}return t.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var n=tUe(e.named),r=n.regions,i=n.regionsMap;this._regions=r,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(e){var n,r;try{n=e&&Zze(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=n.root,Ta(r!=null)}catch(v){throw new Error(`Invalid svg format
`+v.message)}var i=new kt;i.add(r),i.isGeoSVGGraphicRoot=!0;var a=n.width,s=n.height,o=n.viewBoxRect,l=this._boundingRect;if(!l){var d=void 0,c=void 0,f=void 0,p=void 0;if(a!=null?(d=0,f=a):o&&(d=o.x,f=o.width),s!=null?(c=0,p=s):o&&(c=o.y,p=o.height),d==null||c==null){var h=r.getBoundingRect();d==null&&(d=h.x,f=h.width),c==null&&(c=h.y,p=h.height)}l=this._boundingRect=new qt(d,c,f,p)}if(o){var m=Tie(o,l);r.scaleX=r.scaleY=m.scale,r.x=m.x,r.y=m.y}i.setClipPath(new sn({shape:l.plain()}));var g=[];return oe(n.named,function(v){Qze.get(v.svgNodeTagLower)!=null&&(g.push(v),eUe(v.el))}),{root:i,boundingRect:l,named:g}},t.prototype.useGraphic=function(e){var n=this._usedGraphicMap,r=n.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),n.set(e,r),r)},t.prototype.freeGraphic=function(e){var n=this._usedGraphicMap,r=n.get(e);r&&(n.removeKey(e),this._freedGraphics.push(r))},t}();function eUe(t){t.silent=!1,t.isGroup&&t.traverse(function(e){e.silent=!1})}function tUe(t){var e=[],n=pt();return oe(t,function(r){if(r.namedFrom==null){var i=new KFe(r.name,r.el);e.push(i),n.set(r.name,i)}}),{regions:e,regionsMap:n}}var C$=[126,25],xB="",If=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Tf=0;Tf<If.length;Tf++)for(var Kh=0;Kh<If[Tf].length;Kh++)If[Tf][Kh][0]/=10.5,If[Tf][Kh][1]/=-10.5/.75,If[Tf][Kh][0]+=C$[0],If[Tf][Kh][1]+=C$[1];function nUe(t,e){if(t==="china"){for(var n=0;n<e.length;n++)if(e[n].name===xB)return;e.push(new kre(xB,ze(If,function(r){return{type:"polygon",exterior:r}}),C$))}}var rUe={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function iUe(t,e){if(t==="china"){var n=rUe[e.name];if(n){var r=e.getCenter();r[0]+=n[0]/10.5,r[1]+=-n[1]/(10.5/.75),e.setCenter(r)}}}var aUe=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function sUe(t,e){t==="china"&&e.name===""&&e.geometries.push({type:"polygon",exterior:aUe[0]})}var oUe="name",lUe=function(){function t(e,n,r){this.type="geoJSON",this._parsedMap=pt(),this._mapName=e,this._specialAreas=r,this._geoJSON=dUe(n)}return t.prototype.load=function(e,n){n=n||oUe;var r=this._parsedMap.get(n);if(!r){var i=this._parseToRegions(n);r=this._parsedMap.set(n,{regions:i,boundingRect:uUe(i)})}var a=pt(),s=[];return oe(r.regions,function(o){var l=o.name;e&&ft(e,l)&&(o=o.cloneShallow(l=e[l])),s.push(o),a.set(l,o)}),{regions:s,boundingRect:r.boundingRect||new qt(0,0,0,0),regionsMap:a}},t.prototype._parseToRegions=function(e){var n=this._mapName,r=this._geoJSON,i;try{i=r?ZFe(r,e):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return nUe(n,i),oe(i,function(a){var s=a.name;iUe(n,a),sUe(n,a);var o=this._specialAreas&&this._specialAreas[s];o&&a.transformTo(o.left,o.top,o.width,o.height)},this),i},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function uUe(t){for(var e,n=0;n<t.length;n++){var r=t[n].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function dUe(t){return it(t)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var Bv=pt();const sd={registerMap:function(t,e,n){if(e.svg){var r=new Jze(t,e.svg);Bv.set(t,r)}else{var i=e.geoJson||e.geoJSON;i&&!e.features?n=e.specialAreas:i=e;var r=new lUe(t,i,n);Bv.set(t,r)}},getGeoResource:function(t){return Bv.get(t)},getMapForUser:function(t){var e=Bv.get(t);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(t,e,n){var r=Bv.get(t);if(r)return r.load(e,n)}};var XI=["rect","circle","line","ellipse","polygon","polyline","path"],cUe=pt(XI),fUe=pt(XI.concat(["g"])),pUe=pt(XI.concat(["g"])),Eie=on();function yx(t){var e=t.getItemStyle(),n=t.get("areaColor");return n!=null&&(e.fill=n),e}function wB(t){var e=t.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var Mie=function(){function t(e){var n=new kt;this.uid=Fg("ec_map_draw"),this._controller=new Vb(e.getZr()),this._controllerHost={target:n},this.group=n,n.add(this._regionsGroup=new kt),n.add(this._svgGroup=new kt)}return t.prototype.draw=function(e,n,r,i,a){var s=e.mainType==="geo",o=e.getData&&e.getData();s&&n.eachComponent({mainType:"series",subType:"map"},function(_){!o&&_.getHostGeoModel()===e&&(o=_.getData())});var l=e.coordinateSystem,d=this._regionsGroup,c=this.group,f=l.getTransformInfo(),p=f.raw,h=f.roam,m=!d.childAt(0)||a;m?(c.x=h.x,c.y=h.y,c.scaleX=h.scaleX,c.scaleY=h.scaleY,c.dirty()):yn(c,h,e);var g=o&&o.getVisual("visualMeta")&&o.getVisual("visualMeta").length>0,v={api:r,geo:l,mapOrGeoModel:e,data:o,isVisualEncodedByVisualMap:g,isGeo:s,transformInfoRaw:p};l.resourceType==="geoJSON"?this._buildGeoJSON(v):l.resourceType==="geoSVG"&&this._buildSVG(v),this._updateController(e,n,r),this._updateMapSelectHandler(e,d,r,i)},t.prototype._buildGeoJSON=function(e){var n=this._regionsGroupByName=pt(),r=pt(),i=this._regionsGroup,a=e.transformInfoRaw,s=e.mapOrGeoModel,o=e.data,l=e.geo.projection,d=l&&l.stream;function c(h,m){return m&&(h=m(h)),h&&[h[0]*a.scaleX+a.x,h[1]*a.scaleY+a.y]}function f(h){for(var m=[],g=!d&&l&&l.project,v=0;v<h.length;++v){var _=c(h[v],g);_&&m.push(_)}return m}function p(h){return{shape:{points:f(h)}}}i.removeAll(),oe(e.geo.regions,function(h){var m=h.name,g=n.get(m),v=r.get(m)||{},_=v.dataIdx,x=v.regionModel;if(!g){g=n.set(m,new kt),i.add(g),_=o?o.indexOfName(m):null,x=e.isGeo?s.getRegionModel(m):o?o.getItemModel(_):null;var w=x.get("silent",!0);w!=null&&(g.silent=w),r.set(m,{dataIdx:_,regionModel:x})}var k=[],S=[];oe(h.geometries,function(M){if(M.type==="polygon"){var $=[M.exterior].concat(M.interiors||[]);d&&($=EB($,d)),oe($,function(I){k.push(new $a(p(I)))})}else{var R=M.points;d&&(R=EB(R,d,!0)),oe(R,function(I){S.push(new Da(p(I)))})}});var C=c(h.getCenter(),l&&l.project);function A(M,$){if(M.length){var R=new oI({culling:!0,segmentIgnoreThreshold:1,shape:{paths:M}});g.add(R),kB(e,R,_,x),SB(e,R,m,x,s,_,C),$&&(wB(R),oe(R.states,wB))}}A(k),A(S,!0)}),n.each(function(h,m){var g=r.get(m),v=g.dataIdx,_=g.regionModel;CB(e,h,m,_,s,v),AB(e,h,m,_,s),TB(e,h,m,_,s)},this)},t.prototype._buildSVG=function(e){var n=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(n)&&(this._freeSVG(),this._useSVG(n));var i=this._svgDispatcherMap=pt(),a=!1;oe(this._svgGraphicRecord.named,function(s){var o=s.name,l=e.mapOrGeoModel,d=e.data,c=s.svgNodeTagLower,f=s.el,p=d?d.indexOfName(o):null,h=l.getRegionModel(o);cUe.get(c)!=null&&f instanceof no&&kB(e,f,p,h),f instanceof no&&(f.culling=!0);var m=h.get("silent",!0);if(m!=null&&(f.silent=m),f.z2EmphasisLift=0,!s.namedFrom&&(pUe.get(c)!=null&&SB(e,f,o,h,l,p,null),CB(e,f,o,h,l,p),AB(e,f,o,h,l),fUe.get(c)!=null)){var g=TB(e,f,o,h,l);g==="self"&&(a=!0);var v=i.get(o)||i.set(o,[]);v.push(f)}},this),this._enableBlurEntireSVG(a,e)},t.prototype._enableBlurEntireSVG=function(e,n){if(e&&n.isGeo){var r=n.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=r.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Xp(a);var s=a.ensureState("blur").style||{};s.opacity==null&&i!=null&&(s.opacity=i),a.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(e,n){if(e==null)return[];var r=n.coordinateSystem;if(r.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(e);return a?[a]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},t.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},t.prototype._useSVG=function(e){var n=sd.getGeoResource(e);if(n&&n.type==="geoSVG"){var r=n.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},t.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var n=sd.getGeoResource(e);n&&n.type==="geoSVG"&&n.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(e,n,r){var i=e.coordinateSystem,a=this._controller,s=this._controllerHost;s.zoomLimit=e.get("scaleLimit"),s.zoom=i.getZoom(),a.enable(e.get("roam")||!1);var o=e.mainType;function l(){var d={type:"geoRoam",componentType:o};return d[o+"Id"]=e.id,d}a.off("pan").on("pan",function(d){this._mouseDownFlag=!1,YI(s,d.dx,d.dy),r.dispatchAction(Oe(l(),{dx:d.dx,dy:d.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(d){this._mouseDownFlag=!1,KI(s,d.scale,d.originX,d.originY),r.dispatchAction(Oe(l(),{totalZoom:s.zoom,zoom:d.scale,originX:d.originX,originY:d.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(d,c,f){return i.containPoint([c,f])&&!fA(d,r,e)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var n=e.getTextContent();n&&(n.ignore=Eie(n).ignore)})},t.prototype._updateMapSelectHandler=function(e,n,r,i){var a=this;n.off("mousedown"),n.off("click"),e.get("selectedMode")&&(n.on("mousedown",function(){a._mouseDownFlag=!0}),n.on("click",function(s){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},t}();function kB(t,e,n,r){var i=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),s=r.getModel(["blur","itemStyle"]),o=r.getModel(["select","itemStyle"]),l=yx(i),d=yx(a),c=yx(o),f=yx(s),p=t.data;if(p){var h=p.getItemVisual(n,"style"),m=p.getItemVisual(n,"decal");t.isVisualEncodedByVisualMap&&h.fill&&(l.fill=h.fill),m&&(l.decal=vg(m,t.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=d,e.ensureState("select").style=c,e.ensureState("blur").style=f,Xp(e)}function SB(t,e,n,r,i,a,s){var o=t.data,l=t.isGeo,d=o&&isNaN(o.get(o.mapDimension("value"),a)),c=o&&o.getItemLayout(a);if(l||d||c&&c.showLabel){var f=l?n:a,p=void 0;(!o||a>=0)&&(p=i);var h=s?{normal:{align:"center",verticalAlign:"middle"}}:null;Li(e,ui(r),{labelFetcher:p,labelDataIndex:f,defaultText:n},h);var m=e.getTextContent();if(m&&(Eie(m).ignore=m.ignore,e.textConfig&&s)){var g=e.getBoundingRect().clone();e.textConfig.layoutRect=g,e.textConfig.position=[(s[0]-g.x)/g.width*100+"%",(s[1]-g.y)/g.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function CB(t,e,n,r,i,a){t.data?t.data.setItemGraphicEl(a,e):Tt(e).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:n,region:r&&r.option||{}}}function AB(t,e,n,r,i){t.data||ph({el:e,componentModel:i,itemName:n,itemTooltipOption:r.get("tooltip")})}function TB(t,e,n,r,i){e.highDownSilentOnTouch=!!i.get("selectedMode");var a=r.getModel("emphasis"),s=a.get("focus");return _r(e,s,a.get("blurScope"),a.get("disabled")),t.isGeo&&fVe(e,i,n),s}function EB(t,e,n){var r=[],i;function a(){i=[]}function s(){i.length&&(r.push(i),i=[])}var o=e({polygonStart:a,polygonEnd:s,lineStart:a,lineEnd:s,point:function(l,d){isFinite(l)&&isFinite(d)&&i.push([l,d])},sphere:function(){}});return!n&&o.polygonStart(),oe(t,function(l){o.lineStart();for(var d=0;d<l.length;d++)o.point(l[d][0],l[d][1]);o.lineEnd()}),!n&&o.polygonEnd(),r}var hUe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var s=this.group;if(s.removeAll(),!n.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===n.id){var o=this._mapDraw;o&&s.add(o.group)}else if(n.needsDrawMap){var o=this._mapDraw||new Mie(i);s.add(o.group),o.draw(n,r,i,this,a),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;n.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(n,r,i)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(n,r,i){var a=n.originalData,s=this.group;a.each(a.mapDimension("value"),function(o,l){if(!isNaN(o)){var d=a.getItemLayout(l);if(!(!d||!d.point)){var c=d.point,f=d.offset,p=new hd({style:{fill:n.getData().getVisual("style").fill},shape:{cx:c[0]+f*9,cy:c[1],r:3},silent:!0,z2:8+(f?0:Vg+1)});if(!f){var h=n.mainSeries.getData(),m=a.getName(l),g=h.indexOfName(m),v=a.getItemModel(l),_=v.getModel("label"),x=h.getItemGraphicEl(g);Li(p,ui(v),{labelFetcher:{getFormattedLabel:function(w,k){return n.getFormattedLabel(g,k)}},defaultText:m}),p.disableLabelAnimation=!0,_.get("position")||p.setTextConfig({position:"bottom"}),x.onHoverStateChange=function(w){kk(p,w)}}s.add(p)}}})},e.type="map",e}(Pn),mUe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(r){if(r!=null){var i=this.getData().getName(r),a=this.coordinateSystem,s=a.getRegion(i);return s&&a.dataToPoint(s.getCenter())}},n}return e.prototype.getInitialData=function(n){for(var r=Yg(this,{coordDimensions:["value"],encodeDefaulter:Pt(vI,this)}),i=pt(),a=[],s=0,o=r.count();s<o;s++){var l=r.getName(s);i.set(l,s)}var d=sd.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return oe(d.regions,function(c){var f=c.name,p=i.get(f),h=c.properties&&c.properties.echartsStyle,m;p==null?(m={name:f},a.push(m)):m=r.getRawDataItem(p),h&&jt(m,h)}),r.appendData(a),r},e.prototype.getHostGeoModel=function(){var n=this.option.geoIndex;return n!=null?this.ecModel.getComponent("geo",n):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(n){var r=this.getData();return r.get(r.mapDimension("value"),n)},e.prototype.getRegionModel=function(n){var r=this.getData();return r.getItemModel(r.indexOfName(n))},e.prototype.formatTooltip=function(n,r,i){for(var a=this.getData(),s=this.getRawValue(n),o=a.getName(n),l=this.seriesGroup,d=[],c=0;c<l.length;c++){var f=l[c].originalData.indexOfName(o),p=a.mapDimension("value");isNaN(l[c].originalData.get(p,f))||d.push(l[c].name)}return di("section",{header:d.join(", "),noHeader:!d.length,blocks:[di("nameValue",{name:o,value:s})]})},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.getLegendIcon=function(n){var r=n.icon||"roundRect",i=Ur(r,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill);return i.setStyle(n.itemStyle),i.style.stroke="none",r.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(Zn);function gUe(t,e){var n={};return oe(t,function(r){r.each(r.mapDimension("value"),function(i,a){var s="ec-"+r.getName(a);n[s]=n[s]||[],isNaN(i)||n[s].push(i)})}),t[0].map(t[0].mapDimension("value"),function(r,i){for(var a="ec-"+t[0].getName(i),s=0,o=1/0,l=-1/0,d=n[a].length,c=0;c<d;c++)o=Math.min(o,n[a][c]),l=Math.max(l,n[a][c]),s+=n[a][c];var f;return e==="min"?f=o:e==="max"?f=l:e==="average"?f=s/d:f=s,d===0?NaN:f})}function vUe(t){var e={};t.eachSeriesByType("map",function(n){var r=n.getHostGeoModel(),i=r?"o"+r.id:"i"+n.getMapType();(e[i]=e[i]||[]).push(n)}),oe(e,function(n,r){for(var i=gUe(ze(n,function(s){return s.getData()}),n[0].get("mapValueCalculation")),a=0;a<n.length;a++)n[a].originalData=n[a].getData();for(var a=0;a<n.length;a++)n[a].seriesGroup=n,n[a].needsDrawMap=a===0&&!n[a].getHostGeoModel(),n[a].setData(i.cloneShallow()),n[a].mainSeries=n[0]})}function yUe(t){var e={};t.eachSeriesByType("map",function(n){var r=n.getMapType();if(!(n.getHostGeoModel()||e[r])){var i={};oe(n.seriesGroup,function(s){var o=s.coordinateSystem,l=s.originalData;s.get("showLegendSymbol")&&t.getComponent("legend")&&l.each(l.mapDimension("value"),function(d,c){var f=l.getName(c),p=o.getRegion(f);if(!(!p||isNaN(d))){var h=i[f]||0,m=o.dataToPoint(p.getCenter());i[f]=h+1,l.setItemLayout(c,{point:m,offset:h})}})});var a=n.getData();a.each(function(s){var o=a.getName(s),l=a.getItemLayout(s)||{};l.showLabel=!i[o],a.setItemLayout(s,l)}),e[r]=!0}})}var MB=Ri,Nb=function(t){Ce(e,t);function e(n){var r=t.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new Iu,r._rawTransformable=new Iu,r.name=n,r}return e.prototype.setBoundingRect=function(n,r,i,a){return this._rect=new qt(n,r,i,a),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(n,r,i,a){this._transformTo(n,r,i,a),this._viewRect=new qt(n,r,i,a)},e.prototype._transformTo=function(n,r,i,a){var s=this.getBoundingRect(),o=this._rawTransformable;o.transform=s.calculateTransform(new qt(n,r,i,a));var l=o.parent;o.parent=null,o.decomposeTransform(),o.parent=l,this._updateTransform()},e.prototype.setCenter=function(n,r){n&&(this._center=[Qe(n[0],r.getWidth()),Qe(n[1],r.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(n){n=n||1;var r=this.zoomLimit;r&&(r.max!=null&&(n=Math.min(r.max,n)),r.min!=null&&(n=Math.max(r.min,n))),this._zoom=n,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var n=this.getBoundingRect(),r=n.x+n.width/2,i=n.y+n.height/2;return[r,i]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var n=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),s=this.getZoom();a=Ri([],a,n),i=Ri([],i,n),r.originX=a[0],r.originY=a[1],r.x=i[0]-a[0],r.y=i[1]-a[1],r.scaleX=r.scaleY=s,this._updateTransform()},e.prototype._updateTransform=function(){var n=this._roamTransformable,r=this._rawTransformable;r.parent=n,n.updateTransform(),r.updateTransform(),HP(this.transform||(this.transform=[]),r.transform||ds()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],Og(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var n=this._rawTransformable,r=this._roamTransformable,i=new Iu;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var n=this.getBoundingRect().clone();return n.applyTransform(this.transform),n},e.prototype.dataToPoint=function(n,r,i){var a=r?this._rawTransform:this.transform;return i=i||[],a?MB(i,n,a):ca(i,n)},e.prototype.pointToData=function(n){var r=this.invTransform;return r?MB([],n,r):[n[0],n[1]]},e.prototype.convertToPixel=function(n,r,i){var a=$B(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(n,r,i){var a=$B(r);return a===this?a.pointToData(i):null},e.prototype.containPoint=function(n){return this.getViewRectAfterRoam().contain(n[0],n[1])},e.dimensions=["x","y"],e}(Iu);function $B(t){var e=t.seriesModel;return e?e.coordinateSystem:null}var bUe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},$ie=["lng","lat"],A$=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this,n)||this;a.dimensions=$ie,a.type="geo",a._nameCoordMap=pt(),a.map=r;var s=i.projection,o=sd.load(r,i.nameMap,i.nameProperty),l=sd.getGeoResource(r);a.resourceType=l?l.type:null;var d=a.regions=o.regions,c=bUe[l.type];a._regionsMap=o.regionsMap,a.regions=o.regions,a.projection=s;var f;if(s)for(var p=0;p<d.length;p++){var h=d[p].getBoundingRect(s);f=f||h.clone(),f.union(h)}else f=o.boundingRect;return a.setBoundingRect(f.x,f.y,f.width,f.height),a.aspectScale=s?1:$t(i.aspectScale,c.aspectScale),a._invertLongitute=s?!1:c.invertLongitute,a}return e.prototype._transformTo=function(n,r,i,a){var s=this.getBoundingRect(),o=this._invertLongitute;s=s.clone(),o&&(s.y=-s.y-s.height);var l=this._rawTransformable;l.transform=s.calculateTransform(new qt(n,r,i,a));var d=l.parent;l.parent=null,l.decomposeTransform(),l.parent=d,o&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(n){return this._regionsMap.get(n)},e.prototype.getRegionByCoord=function(n){for(var r=this.regions,i=0;i<r.length;i++){var a=r[i];if(a.type==="geoJSON"&&a.contain(n))return r[i]}},e.prototype.addGeoCoord=function(n,r){this._nameCoordMap.set(n,r)},e.prototype.getGeoCoord=function(n){var r=this._regionsMap.get(n);return this._nameCoordMap.get(n)||r&&r.getCenter()},e.prototype.dataToPoint=function(n,r,i){if(it(n)&&(n=this.getGeoCoord(n)),n){var a=this.projection;return a&&(n=a.project(n)),n&&this.projectedToPoint(n,r,i)}},e.prototype.pointToData=function(n){var r=this.projection;return r&&(n=r.unproject(n)),n&&this.pointToProjected(n)},e.prototype.pointToProjected=function(n){return t.prototype.pointToData.call(this,n)},e.prototype.projectedToPoint=function(n,r,i){return t.prototype.dataToPoint.call(this,n,r,i)},e.prototype.convertToPixel=function(n,r,i){var a=DB(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(n,r,i){var a=DB(r);return a===this?a.pointToData(i):null},e}(Nb);Hr(A$,Nb);function DB(t){var e=t.geoModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",Nr).models[0]||{}).coordinateSystem:null}function RB(t,e){var n=t.get("boundingCoords");if(n!=null){var r=n[0],i=n[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var s=r[0],o=r[1],l=i[0],d=i[1];r=[1/0,1/0],i=[-1/0,-1/0];var c=function(C,A,M,$){for(var R=M-C,I=$-A,B=0;B<=100;B++){var j=B/100,z=a.project([C+R*j,A+I*j]);tc(r,r,z),nc(i,i,z)}};c(s,o,l,o),c(l,o,l,d),c(l,d,s,d),c(s,d,l,o)}this.setBoundingRect(r[0],r[1],i[0]-r[0],i[1]-r[1])}}var f=this.getBoundingRect(),p=t.get("layoutCenter"),h=t.get("layoutSize"),m=e.getWidth(),g=e.getHeight(),v=f.width/f.height*this.aspectScale,_=!1,x,w;p&&h&&(x=[Qe(p[0],m),Qe(p[1],g)],w=Qe(h,Math.min(m,g)),!isNaN(x[0])&&!isNaN(x[1])&&!isNaN(w)&&(_=!0));var k;if(_)k={},v>1?(k.width=w,k.height=w/v):(k.height=w,k.width=w*v),k.y=x[1]-k.height/2,k.x=x[0]-k.width/2;else{var S=t.getBoxLayoutParams();S.aspect=v,k=Qr(S,{width:m,height:g})}this.setViewRect(k.x,k.y,k.width,k.height),this.setCenter(t.get("center"),e),this.setZoom(t.get("zoom"))}function _Ue(t,e){oe(e.get("geoCoord"),function(n,r){t.addGeoCoord(r,n)})}var xUe=function(){function t(){this.dimensions=$ie}return t.prototype.create=function(e,n){var r=[];function i(s){return{nameProperty:s.get("nameProperty"),aspectScale:s.get("aspectScale"),projection:s.get("projection")}}e.eachComponent("geo",function(s,o){var l=s.get("map"),d=new A$(l+o,l,Oe({nameMap:s.get("nameMap")},i(s)));d.zoomLimit=s.get("scaleLimit"),r.push(d),s.coordinateSystem=d,d.model=s,d.resize=RB,d.resize(s,n)}),e.eachSeries(function(s){var o=s.get("coordinateSystem");if(o==="geo"){var l=s.get("geoIndex")||0;s.coordinateSystem=r[l]}});var a={};return e.eachSeriesByType("map",function(s){if(!s.getHostGeoModel()){var o=s.getMapType();a[o]=a[o]||[],a[o].push(s)}}),oe(a,function(s,o){var l=ze(s,function(c){return c.get("nameMap")}),d=new A$(o,o,Oe({nameMap:FP(l)},i(s[0])));d.zoomLimit=gi.apply(null,ze(s,function(c){return c.get("scaleLimit")})),r.push(d),d.resize=RB,d.resize(s[0],n),oe(s,function(c){c.coordinateSystem=d,_Ue(d,c)})}),r},t.prototype.getFilledRegions=function(e,n,r,i){for(var a=(e||[]).slice(),s=pt(),o=0;o<a.length;o++)s.set(a[o].name,a[o]);var l=sd.load(n,r,i);return oe(l.regions,function(d){var c=d.name,f=s.get(c),p=d.properties&&d.properties.echartsStyle;f||(f={name:c},a.push(f)),p&&jt(f,p)}),a},t}(),Die=new xUe,wUe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r,i){var a=sd.getGeoResource(n.map);if(a&&a.type==="geoJSON"){var s=n.itemStyle=n.itemStyle||{};"color"in s||(s.color="#eee")}this.mergeDefaultAndTheme(n,i),Gp(n,"label",["show"])},e.prototype.optionUpdated=function(){var n=this,r=this.option;r.regions=Die.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var i={};this._optionModelMap=Vl(r.regions||[],function(a,s){var o=s.name;return o&&(a.set(o,new An(s,n,n.ecModel)),s.selected&&(i[o]=!0)),a},pt()),r.selectedMap||(r.selectedMap=i)},e.prototype.getRegionModel=function(n){return this._optionModelMap.get(n)||new An(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(n,r){var i=this.getRegionModel(n),a=r==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),s={name:n};if(gt(a))return s.status=r,a(s);if(it(a))return a.replace("{a}",n!=null?n:"")},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.select=function(n){var r=this.option,i=r.selectedMode;if(i){i!=="multiple"&&(r.selectedMap=null);var a=r.selectedMap||(r.selectedMap={});a[n]=!0}},e.prototype.unSelect=function(n){var r=this.option.selectedMap;r&&(r[n]=!1)},e.prototype.toggleSelected=function(n){this[this.isSelected(n)?"unSelect":"select"](n)},e.prototype.isSelected=function(n){var r=this.option.selectedMap;return!!(r&&r[n])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(tn);function PB(t,e){return t.pointToProjected?t.pointToProjected(e):t.pointToData(e)}function ZI(t,e,n,r){var i=t.getZoom(),a=t.getCenter(),s=e.zoom,o=t.projectedToPoint?t.projectedToPoint(a):t.dataToPoint(a);if(e.dx!=null&&e.dy!=null&&(o[0]-=e.dx,o[1]-=e.dy,t.setCenter(PB(t,o),r)),s!=null){if(n){var l=n.min||0,d=n.max||1/0;s=Math.max(Math.min(i*s,d),l)/i}t.scaleX*=s,t.scaleY*=s;var c=(e.originX-t.x)*(s-1),f=(e.originY-t.y)*(s-1);t.x-=c,t.y-=f,t.updateTransform(),t.setCenter(PB(t,o),r),t.setZoom(s*i)}return{center:t.getCenter(),zoom:t.getZoom()}}var kUe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.focusBlurEnabled=!0,n}return e.prototype.init=function(n,r){this._api=r},e.prototype.render=function(n,r,i,a){if(this._model=n,!n.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new Mie(i));var s=this._mapDraw;s.draw(n,r,i,this,a),s.group.on("click",this._handleRegionClick,this),s.group.silent=n.get("silent"),this.group.add(s.group),this.updateSelectStatus(n,r,i)},e.prototype._handleRegionClick=function(n){var r;sp(n.target,function(i){return(r=Tt(i).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(n,r,i){var a=this;this._mapDraw.group.traverse(function(s){var o=Tt(s).eventData;if(o)return a._model.isSelected(o.name)?i.enterSelect(s):i.leaveSelect(s),!0})},e.prototype.findHighDownDispatchers=function(n){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(n,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(hr);function SUe(t,e,n){sd.registerMap(t,e,n)}function Rie(t){t.registerCoordinateSystem("geo",Die),t.registerComponentModel(wUe),t.registerComponentView(kUe),t.registerImpl("registerMap",SUe),t.registerImpl("getMap",function(n){return sd.getMapForUser(n)});function e(n,r){r.update="geo:updateSelectStatus",t.registerAction(r,function(i,a){var s={},o=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[n](i.name);var d=l.coordinateSystem;oe(d.regions,function(f){s[f.name]=l.isSelected(f.name)||!1});var c=[];oe(s,function(f,p){s[p]&&c.push(p)}),o.push({geoIndex:l.componentIndex,name:c})}),{selected:s,allSelected:o,name:i.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(n,r,i){var a=n.componentType||"series";r.eachComponent({mainType:a,query:n},function(s){var o=s.coordinateSystem;if(o.type==="geo"){var l=ZI(o,n,s.get("scaleLimit"),i);s.setCenter&&s.setCenter(l.center),s.setZoom&&s.setZoom(l.zoom),a==="series"&&oe(s.seriesGroup,function(d){d.setCenter(l.center),d.setZoom(l.zoom)})}})})}function CUe(t){Kt(Rie),t.registerChartView(hUe),t.registerSeriesModel(mUe),t.registerLayout(yUe),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,vUe),One("map",t.registerAction)}function AUe(t){var e=t;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n=[e],r,i;r=n.pop();)if(i=r.children,r.isExpand&&i.length)for(var a=i.length,s=a-1;s>=0;s--){var o=i[s];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:s,thread:null},n.push(o)}}function TUe(t,e){var n=t.isExpand?t.children:[],r=t.parentNode.children,i=t.hierNode.i?r[t.hierNode.i-1]:null;if(n.length){$Ue(t);var a=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;i?(t.hierNode.prelim=i.hierNode.prelim+e(t,i),t.hierNode.modifier=t.hierNode.prelim-a):t.hierNode.prelim=a}else i&&(t.hierNode.prelim=i.hierNode.prelim+e(t,i));t.parentNode.hierNode.defaultAncestor=DUe(t,i,t.parentNode.hierNode.defaultAncestor||r[0],e)}function EUe(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function IB(t){return arguments.length?t:IUe}function by(t,e){return t-=Math.PI/2,{x:e*Math.cos(t),y:e*Math.sin(t)}}function MUe(t,e){return Qr(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function $Ue(t){for(var e=t.children,n=e.length,r=0,i=0;--n>=0;){var a=e[n];a.hierNode.prelim+=r,a.hierNode.modifier+=r,i+=a.hierNode.change,r+=a.hierNode.shift+i}}function DUe(t,e,n,r){if(e){for(var i=t,a=t,s=a.parentNode.children[0],o=e,l=i.hierNode.modifier,d=a.hierNode.modifier,c=s.hierNode.modifier,f=o.hierNode.modifier;o=x3(o),a=w3(a),o&&a;){i=x3(i),s=w3(s),i.hierNode.ancestor=t;var p=o.hierNode.prelim+f-a.hierNode.prelim-d+r(o,a);p>0&&(PUe(RUe(o,t,n),t,p),d+=p,l+=p),f+=o.hierNode.modifier,d+=a.hierNode.modifier,l+=i.hierNode.modifier,c+=s.hierNode.modifier}o&&!x3(i)&&(i.hierNode.thread=o,i.hierNode.modifier+=f-l),a&&!w3(s)&&(s.hierNode.thread=a,s.hierNode.modifier+=d-c,n=t)}return n}function x3(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function w3(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function RUe(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function PUe(t,e,n){var r=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=r}function IUe(t,e){return t.parentNode===e.parentNode?1:2}var OUe=function(){function t(){this.parentPoint=[],this.childPoints=[]}return t}(),LUe=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new OUe},e.prototype.buildPath=function(n,r){var i=r.childPoints,a=i.length,s=r.parentPoint,o=i[0],l=i[a-1];if(a===1){n.moveTo(s[0],s[1]),n.lineTo(o[0],o[1]);return}var d=r.orient,c=d==="TB"||d==="BT"?0:1,f=1-c,p=Qe(r.forkPosition,1),h=[];h[c]=s[c],h[f]=s[f]+(l[f]-s[f])*p,n.moveTo(s[0],s[1]),n.lineTo(h[0],h[1]),n.moveTo(o[0],o[1]),h[c]=o[c],n.lineTo(h[0],h[1]),h[c]=l[c],n.lineTo(h[0],h[1]),n.lineTo(l[0],l[1]);for(var m=1;m<a-1;m++){var g=i[m];n.moveTo(g[0],g[1]),h[c]=g[c],n.lineTo(h[0],h[1])}},e}(Zt),VUe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new kt,n}return e.prototype.init=function(n,r){this._controller=new Vb(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(n,r,i){var a=n.getData(),s=n.layoutInfo,o=this._mainGroup,l=n.get("layout");l==="radial"?(o.x=s.x+s.width/2,o.y=s.y+s.height/2):(o.x=s.x,o.y=s.y),this._updateViewCoordSys(n,i),this._updateController(n,r,i);var d=this._data;a.diff(d).add(function(c){OB(a,c)&&LB(a,c,null,o,n)}).update(function(c,f){var p=d.getItemGraphicEl(f);if(!OB(a,c)){p&&NB(d,f,p,o,n);return}LB(a,c,p,o,n)}).remove(function(c){var f=d.getItemGraphicEl(c);f&&NB(d,c,f,o,n)}).execute(),this._nodeScaleRatio=n.get("nodeScaleRatio"),this._updateNodeAndLinkScale(n),n.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:f})})}),this._data=a},e.prototype._updateViewCoordSys=function(n,r){var i=n.getData(),a=[];i.each(function(f){var p=i.getItemLayout(f);p&&!isNaN(p.x)&&!isNaN(p.y)&&a.push([+p.x,+p.y])});var s=[],o=[];zC(a,s,o);var l=this._min,d=this._max;o[0]-s[0]===0&&(s[0]=l?l[0]:s[0]-1,o[0]=d?d[0]:o[0]+1),o[1]-s[1]===0&&(s[1]=l?l[1]:s[1]-1,o[1]=d?d[1]:o[1]+1);var c=n.coordinateSystem=new Nb;c.zoomLimit=n.get("scaleLimit"),c.setBoundingRect(s[0],s[1],o[0]-s[0],o[1]-s[1]),c.setCenter(n.get("center"),r),c.setZoom(n.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=s,this._max=o},e.prototype._updateController=function(n,r,i){var a=this,s=this._controller,o=this._controllerHost,l=this.group;s.setPointerChecker(function(d,c,f){var p=l.getBoundingRect();return p.applyTransform(l.transform),p.contain(c,f)&&!fA(d,i,n)}),s.enable(n.get("roam")),o.zoomLimit=n.get("scaleLimit"),o.zoom=n.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(d){YI(o,d.dx,d.dy),i.dispatchAction({seriesId:n.id,type:"treeRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){KI(o,d.scale,d.originX,d.originY),i.dispatchAction({seriesId:n.id,type:"treeRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),a._updateNodeAndLinkScale(n),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(n){var r=n.getData(),i=this._getNodeGlobalScale(n);r.eachItemGraphicEl(function(a,s){a.setSymbolScale(i)})},e.prototype._getNodeGlobalScale=function(n){var r=n.coordinateSystem;if(r.type!=="view")return 1;var i=this._nodeScaleRatio,a=r.scaleX||1,s=r.getZoom(),o=(s-1)*i+1;return o/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(Pn);function OB(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)}function LB(t,e,n,r,i){var a=!n,s=t.tree.getNodeByDataIndex(e),o=s.getModel(),l=s.getVisual("style").fill,d=s.isExpand===!1&&s.children.length!==0?l:"#fff",c=t.tree.root,f=s.parentNode===c?s:s.parentNode||s,p=t.getItemGraphicEl(f.dataIndex),h=f.getLayout(),m=p?{x:p.__oldX,y:p.__oldY,rawX:p.__radialOldRawX,rawY:p.__radialOldRawY}:h,g=s.getLayout();a?(n=new Db(t,e,null,{symbolInnerColor:d,useNameLabel:!0}),n.x=m.x,n.y=m.y):n.updateData(t,e,null,{symbolInnerColor:d,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,r.add(n),t.setItemGraphicEl(e,n),n.__oldX=n.x,n.__oldY=n.y,yn(n,{x:g.x,y:g.y},i);var v=n.getSymbolPath();if(i.get("layout")==="radial"){var _=c.children[0],x=_.getLayout(),w=_.children.length,k=void 0,S=void 0;if(g.x===x.x&&s.isExpand===!0&&_.children.length){var C={x:(_.children[0].getLayout().x+_.children[w-1].getLayout().x)/2,y:(_.children[0].getLayout().y+_.children[w-1].getLayout().y)/2};k=Math.atan2(C.y-x.y,C.x-x.x),k<0&&(k=Math.PI*2+k),S=C.x<x.x,S&&(k=k-Math.PI)}else k=Math.atan2(g.y-x.y,g.x-x.x),k<0&&(k=Math.PI*2+k),s.children.length===0||s.children.length!==0&&s.isExpand===!1?(S=g.x<x.x,S&&(k=k-Math.PI)):(S=g.x>x.x,S||(k=k-Math.PI));var A=S?"left":"right",M=o.getModel("label"),$=M.get("rotate"),R=$*(Math.PI/180),I=v.getTextContent();I&&(v.setTextConfig({position:M.get("position")||A,rotation:$==null?-k:R,origin:"center"}),I.setStyle("verticalAlign","middle"))}var B=o.get(["emphasis","focus"]),j=B==="relative"?u1(s.getAncestorsIndices(),s.getDescendantIndices()):B==="ancestor"?s.getAncestorsIndices():B==="descendant"?s.getDescendantIndices():null;j&&(Tt(n).focus=j),NUe(i,s,c,n,m,h,g,r),n.__edge&&(n.onHoverStateChange=function(z){if(z!=="blur"){var F=s.parentNode&&t.getItemGraphicEl(s.parentNode.dataIndex);F&&F.hoverState===xb||kk(n.__edge,z)}})}function NUe(t,e,n,r,i,a,s,o){var l=e.getModel(),d=t.get("edgeShape"),c=t.get("layout"),f=t.getOrient(),p=t.get(["lineStyle","curveness"]),h=t.get("edgeForkPosition"),m=l.getModel("lineStyle").getLineStyle(),g=r.__edge;if(d==="curve")e.parentNode&&e.parentNode!==n&&(g||(g=r.__edge=new kb({shape:T$(c,f,p,i,i)})),yn(g,{shape:T$(c,f,p,a,s)},t));else if(d==="polyline"&&c==="orthogonal"&&e!==n&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var v=e.children,_=[],x=0;x<v.length;x++){var w=v[x].getLayout();_.push([w.x,w.y])}g||(g=r.__edge=new LUe({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:f,forkPosition:h}})),yn(g,{shape:{parentPoint:[s.x,s.y],childPoints:_}},t)}g&&!(d==="polyline"&&!e.isExpand)&&(g.useStyle(yt({strokeNoScale:!0,fill:null},m)),Oi(g,l,"lineStyle"),Xp(g),o.add(g))}function VB(t,e,n,r,i){var a=e.tree.root,s=Pie(a,t),o=s.source,l=s.sourceLayout,d=e.getItemGraphicEl(t.dataIndex);if(d){var c=e.getItemGraphicEl(o.dataIndex),f=c.__edge,p=d.__edge||(o.isExpand===!1||o.children.length===1?f:void 0),h=r.get("edgeShape"),m=r.get("layout"),g=r.get("orient"),v=r.get(["lineStyle","curveness"]);p&&(h==="curve"?Pc(p,{shape:T$(m,g,v,l,l),style:{opacity:0}},r,{cb:function(){n.remove(p)},removeOpt:i}):h==="polyline"&&r.get("layout")==="orthogonal"&&Pc(p,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){n.remove(p)},removeOpt:i}))}}function Pie(t,e){for(var n=e.parentNode===t?e:e.parentNode||e,r;r=n.getLayout(),r==null;)n=n.parentNode===t?n:n.parentNode||n;return{source:n,sourceLayout:r}}function NB(t,e,n,r,i){var a=t.tree.getNodeByDataIndex(e),s=t.tree.root,o=Pie(s,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};Pc(n,{x:o.x+1,y:o.y+1},i,{cb:function(){r.remove(n),t.setItemGraphicEl(e,null)},removeOpt:l}),n.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(d){VB(d,t,r,i,l)}),VB(a,t,r,i,l)}function T$(t,e,n,r,i){var a,s,o,l,d,c,f,p;if(t==="radial"){d=r.rawX,f=r.rawY,c=i.rawX,p=i.rawY;var h=by(d,f),m=by(d,f+(p-f)*n),g=by(c,p+(f-p)*n),v=by(c,p);return{x1:h.x||0,y1:h.y||0,x2:v.x||0,y2:v.y||0,cpx1:m.x||0,cpy1:m.y||0,cpx2:g.x||0,cpy2:g.y||0}}else d=r.x,f=r.y,c=i.x,p=i.y,(e==="LR"||e==="RL")&&(a=d+(c-d)*n,s=f,o=c+(d-c)*n,l=p),(e==="TB"||e==="BT")&&(a=d,s=f+(p-f)*n,o=c,l=p+(f-p)*n);return{x1:d,y1:f,x2:c,y2:p,cpx1:a,cpy1:s,cpx2:o,cpy2:l}}var Xs=on();function Iie(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,Oie(e,n,t),oe(n,function(r){oe(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,Pt(jUe,t))})}),e.wrapMethod("cloneShallow",Pt(BUe,t)),oe(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,Pt(FUe,t))}),Ta(n[e.dataType]===e)}function jUe(t,e){if(HUe(this)){var n=Oe({},Xs(this).datas);n[this.dataType]=e,Oie(e,n,t)}else QI(e,this.dataType,Xs(this).mainData,t);return e}function FUe(t,e){return t.struct&&t.struct.update(),e}function BUe(t,e){return oe(Xs(e).datas,function(n,r){n!==e&&QI(n.cloneShallow(),r,e,t)}),e}function zUe(t){var e=Xs(this).mainData;return t==null||e==null?e:Xs(e).datas[t]}function UUe(){var t=Xs(this).mainData;return t==null?[{data:t}]:ze(rn(Xs(t).datas),function(e){return{type:e,data:Xs(t).datas[e]}})}function HUe(t){return Xs(t).mainData===t}function Oie(t,e,n){Xs(t).datas={},oe(e,function(r,i){QI(r,i,t,n)})}function QI(t,e,n,r){Xs(n).datas[e]=t,Xs(t).mainData=n,t.dataType=e,r.struct&&(t[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=t),t.getLinkedData=zUe,t.getLinkedDataAll=UUe}var qUe=function(){function t(e,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=n}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(e,n,r){gt(e)&&(r=n,n=e,e=null),e=e||{},it(e)&&(e={order:e});var i=e.order||"preorder",a=this[e.attr||"children"],s;i==="preorder"&&(s=n.call(r,this));for(var o=0;!s&&o<a.length;o++)a[o].eachNode(e,n,r);i==="postorder"&&n.call(r,this)},t.prototype.updateDepthAndHeight=function(e){var n=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>n&&(n=i.height)}this.height=n+1},t.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var n=0,r=this.children,i=r.length;n<i;n++){var a=r[n].getNodeById(e);if(a)return a}},t.prototype.contains=function(e){if(e===this)return!0;for(var n=0,r=this.children,i=r.length;n<i;n++){var a=r[n].contains(e);if(a)return a}},t.prototype.getAncestors=function(e){for(var n=[],r=e?this:this.parentNode;r;)n.push(r),r=r.parentNode;return n.reverse(),n},t.prototype.getAncestorsIndices=function(){for(var e=[],n=this;n;)e.push(n.dataIndex),n=n.parentNode;return e.reverse(),e},t.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(n){e.push(n.dataIndex)}),e},t.prototype.getValue=function(e){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(e||"value"),this.dataIndex)},t.prototype.setLayout=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,n)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostTree,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,n)},t.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,n=0;n<e.length;++n)if(e[n]===this)return n;return-1}return-1},t.prototype.isAncestorOf=function(e){for(var n=e.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},t.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},t}(),JI=function(){function t(e){this.type="tree",this._nodes=[],this.hostModel=e}return t.prototype.eachNode=function(e,n,r){this.root.eachNode(e,n,r)},t.prototype.getNodeByDataIndex=function(e){var n=this.data.getRawIndex(e);return this._nodes[n]},t.prototype.getNodeById=function(e){return this.root.getNodeById(e)},t.prototype.update=function(){for(var e=this.data,n=this._nodes,r=0,i=n.length;r<i;r++)n[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)n[e.getRawIndex(r)].dataIndex=r},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,r){var i=new t(n),a=[],s=1;o(e);function o(c,f){var p=c.value;s=Math.max(s,Be(p)?p.length:1),a.push(c);var h=new qUe(Yr(c.name,""),i);f?WUe(h,f):i.root=h,i._nodes.push(h);var m=c.children;if(m)for(var g=0;g<m.length;g++)o(m[g],h)}i.root.updateDepthAndHeight(0);var l=Mb(a,{coordDimensions:["value"],dimensionsCount:s}).dimensions,d=new ba(l,n);return d.initData(a),r&&r(d),Iie({mainData:d,struct:i,structAttr:"tree"}),i.update(),i},t}();function WUe(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}function M1(t,e,n){if(t&&Yt(e,t.type)>=0){var r=n.getData().tree.root,i=t.targetNode;if(it(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=t.targetNodeId;if(a!=null&&(i=r.getNodeById(a)))return{node:i}}}function Lie(t){for(var e=[];t;)t=t.parentNode,t&&e.push(t);return e.reverse()}function eO(t,e){var n=Lie(t);return Yt(n,e)>=0}function hA(t,e){for(var n=[];t;){var r=t.dataIndex;n.push({name:t.name,dataIndex:r,value:e.getRawValue(r)}),t=t.parentNode}return n.reverse(),n}var GUe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.hasSymbolVisual=!0,n.ignoreStyleOnData=!0,n}return e.prototype.getInitialData=function(n){var r={name:n.name,children:n.data},i=n.leaves||{},a=new An(i,this,this.ecModel),s=JI.createTree(r,this,o);function o(f){f.wrapMethod("getItemModel",function(p,h){var m=s.getNodeByDataIndex(h);return m&&m.children.length&&m.isExpand||(p.parentModel=a),p})}var l=0;s.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var d=n.expandAndCollapse,c=d&&n.initialTreeDepth>=0?n.initialTreeDepth:l;return s.root.eachNode("preorder",function(f){var p=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=p&&p.collapsed!=null?!p.collapsed:f.depth<=c}),s.data},e.prototype.getOrient=function(){var n=this.get("orient");return n==="horizontal"?n="LR":n==="vertical"&&(n="TB"),n},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.formatTooltip=function(n,r,i){for(var a=this.getData().tree,s=a.root.children[0],o=a.getNodeByDataIndex(n),l=o.getValue(),d=o.name;o&&o!==s;)d=o.parentNode.name+"."+d,o=o.parentNode;return di("nameValue",{name:d,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treeAncestors=hA(i,this),r.collapsed=!i.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Zn);function YUe(t,e,n){for(var r=[t],i=[],a;a=r.pop();)if(i.push(a),a.isExpand){var s=a.children;if(s.length)for(var o=0;o<s.length;o++)r.push(s[o])}for(;a=i.pop();)e(a,n)}function zv(t,e){for(var n=[t],r;r=n.pop();)if(e(r),r.isExpand){var i=r.children;if(i.length)for(var a=i.length-1;a>=0;a--)n.push(i[a])}}function KUe(t,e){t.eachSeriesByType("tree",function(n){XUe(n,e)})}function XUe(t,e){var n=MUe(t,e);t.layoutInfo=n;var r=t.get("layout"),i=0,a=0,s=null;r==="radial"?(i=2*Math.PI,a=Math.min(n.height,n.width)/2,s=IB(function(w,k){return(w.parentNode===k.parentNode?1:2)/w.depth})):(i=n.width,a=n.height,s=IB());var o=t.getData().tree.root,l=o.children[0];if(l){AUe(o),YUe(l,TUe,s),o.hierNode.modifier=-l.hierNode.prelim,zv(l,EUe);var d=l,c=l,f=l;zv(l,function(w){var k=w.getLayout().x;k<d.getLayout().x&&(d=w),k>c.getLayout().x&&(c=w),w.depth>f.depth&&(f=w)});var p=d===c?1:s(d,c)/2,h=p-d.getLayout().x,m=0,g=0,v=0,_=0;if(r==="radial")m=i/(c.getLayout().x+p+h),g=a/(f.depth-1||1),zv(l,function(w){v=(w.getLayout().x+h)*m,_=(w.depth-1)*g;var k=by(v,_);w.setLayout({x:k.x,y:k.y,rawX:v,rawY:_},!0)});else{var x=t.getOrient();x==="RL"||x==="LR"?(g=a/(c.getLayout().x+p+h),m=i/(f.depth-1||1),zv(l,function(w){_=(w.getLayout().x+h)*g,v=x==="LR"?(w.depth-1)*m:i-(w.depth-1)*m,w.setLayout({x:v,y:_},!0)})):(x==="TB"||x==="BT")&&(m=i/(c.getLayout().x+p+h),g=a/(f.depth-1||1),zv(l,function(w){v=(w.getLayout().x+h)*m,_=x==="TB"?(w.depth-1)*g:a-(w.depth-1)*g,w.setLayout({x:v,y:_},!0)}))}}}function ZUe(t){t.eachSeriesByType("tree",function(e){var n=e.getData(),r=n.tree;r.eachNode(function(i){var a=i.getModel(),s=a.getModel("itemStyle").getItemStyle(),o=n.ensureUniqueItemVisual(i.dataIndex,"style");Oe(o,s)})})}function QUe(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,n){n.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var i=e.dataIndex,a=r.getData().tree,s=a.getNodeByDataIndex(i);s.isExpand=!s.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,n,r){n.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var a=i.coordinateSystem,s=ZI(a,e,void 0,r);i.setCenter&&i.setCenter(s.center),i.setZoom&&i.setZoom(s.zoom)})})}function JUe(t){t.registerChartView(VUe),t.registerSeriesModel(GUe),t.registerLayout(KUe),t.registerVisual(ZUe),QUe(t)}var jB=["treemapZoomToNode","treemapRender","treemapMove"];function eHe(t){for(var e=0;e<jB.length;e++)t.registerAction({type:jB[e],update:"updateView"},Or);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(n,r){r.eachComponent({mainType:"series",subType:"treemap",query:n},i);function i(a,s){var o=["treemapZoomToNode","treemapRootToNode"],l=M1(n,o,a);if(l){var d=a.getViewRoot();d&&(n.direction=eO(d,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function Vie(t){var e=t.getData(),n=e.tree,r={};n.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var s=t$(t.ecModel,a.name||a.dataIndex+"",r);i.setVisual("decal",s)})}var tHe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.preventUsingHoverLayer=!0,n}return e.prototype.getInitialData=function(n,r){var i={name:n.name,children:n.data};Nie(i);var a=n.levels||[],s=this.designatedVisualItemStyle={},o=new An({itemStyle:s},this,r);a=n.levels=nHe(a,r);var l=ze(a||[],function(f){return new An(f,o,r)},this),d=JI.createTree(i,this,c);function c(f){f.wrapMethod("getItemModel",function(p,h){var m=d.getNodeByDataIndex(h),g=m?l[m.depth]:null;return p.parentModel=g||o,p})}return d.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(n,r,i){var a=this.getData(),s=this.getRawValue(n),o=a.getName(n);return di("nameValue",{name:o,value:s})},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treeAncestors=hA(i,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(n){this.layoutInfo=this.layoutInfo||{},Oe(this.layoutInfo,n)},e.prototype.mapIdToIndex=function(n){var r=this._idIndexMap;r||(r=this._idIndexMap=pt(),this._idIndexMapCount=0);var i=r.get(n);return i==null&&r.set(n,i=this._idIndexMapCount++),i},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){Vie(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Zn);function Nie(t){var e=0;oe(t.children,function(r){Nie(r);var i=r.value;Be(i)&&(i=i[0]),e+=i});var n=t.value;Be(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=e),n<0&&(n=0),Be(t.value)?t.value[0]=n:t.value=n}function nHe(t,e){var n=Dn(e.get("color")),r=Dn(e.get(["aria","decal","decals"]));if(n){t=t||[];var i,a;oe(t,function(o){var l=new An(o),d=l.get("color"),c=l.get("decal");(l.get(["itemStyle","color"])||d&&d!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||c&&c!=="none")&&(a=!0)});var s=t[0]||(t[0]={});return i||(s.color=n.slice()),!a&&r&&(s.decal=r.slice()),t}}var rHe=8,FB=8,k3=5,iHe=function(){function t(e){this.group=new kt,e.add(this.group)}return t.prototype.render=function(e,n,r,i){var a=e.getModel("breadcrumb"),s=this.group;if(s.removeAll(),!(!a.get("show")||!r)){var o=a.getModel("itemStyle"),l=a.getModel("emphasis"),d=o.getModel("textStyle"),c=l.getModel(["itemStyle","textStyle"]),f={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:n.getWidth(),height:n.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,f,d),this._renderContent(e,f,o,l,d,c,i),tA(s,f.pos,f.box)}},t.prototype._prepare=function(e,n,r){for(var i=e;i;i=i.parentNode){var a=Yr(i.getModel().get("name"),""),s=r.getTextRect(a),o=Math.max(s.width+rHe*2,n.emptyItemWidth);n.totalWidth+=o+FB,n.renderList.push({node:i,text:a,width:o})}},t.prototype._renderContent=function(e,n,r,i,a,s,o){for(var l=0,d=n.emptyItemWidth,c=e.get(["breadcrumb","height"]),f=hNe(n.pos,n.box),p=n.totalWidth,h=n.renderList,m=i.getModel("itemStyle").getItemStyle(),g=h.length-1;g>=0;g--){var v=h[g],_=v.node,x=v.width,w=v.text;p>f.width&&(p-=x-d,x=d,w=null);var k=new $a({shape:{points:aHe(l,0,x,c,g===h.length-1,g===0)},style:yt(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new un({style:Kn(a,{text:w})}),textConfig:{position:"inside"},z2:Vg*1e4,onclick:Pt(o,_)});k.disableLabelAnimation=!0,k.getTextContent().ensureState("emphasis").style=Kn(s,{text:w}),k.ensureState("emphasis").style=m,_r(k,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(k),sHe(k,e,_),l+=x+FB}},t.prototype.remove=function(){this.group.removeAll()},t}();function aHe(t,e,n,r,i,a){var s=[[i?t:t-k3,e],[t+n,e],[t+n,e+r],[i?t:t-k3,e+r]];return!a&&s.splice(2,0,[t+n+k3,e+r/2]),!i&&s.push([t,e+r/2]),s}function sHe(t,e,n){Tt(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&hA(n,e)}}var oHe=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(e,n,r,i,a){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:n,duration:r,delay:i,easing:a}),!0)},t.prototype.finished=function(e){return this._finishedCallback=e,this},t.prototype.start=function(){for(var e=this,n=this._storage.length,r=function(){n--,n<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var s=this._storage[i];s.el.animateTo(s.target,{duration:s.duration,delay:s.delay,easing:s.easing,setToFinal:!0,done:r,aborted:r})}return this},t}();function lHe(){return new oHe}var E$=kt,BB=sn,zB=3,UB="label",HB="upperLabel",uHe=Vg*10,dHe=Vg*2,cHe=Vg*3,Of=Kp([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),qB=function(t){var e=Of(t);return e.stroke=e.fill=e.lineWidth=null,e},Wk=on(),fHe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._state="ready",n._storage=Uv(),n}return e.prototype.render=function(n,r,i,a){var s=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(Yt(s,n)<0)){this.seriesModel=n,this.api=i,this.ecModel=r;var o=["treemapZoomToNode","treemapRootToNode"],l=M1(a,o,n),d=a&&a.type,c=n.layoutInfo,f=!this._oldTree,p=this._storage,h=d==="treemapRootToNode"&&l&&p?{rootNodeGroup:p.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,m=this._giveContainerGroup(c),g=n.get("animation"),v=this._doRender(m,n,h);g&&!f&&(!d||d==="treemapZoomToNode"||d==="treemapRootToNode")?this._doAnimation(m,v,n,h):v.renderFinally(),this._resetController(i),this._renderBreadcrumb(n,i,l)}},e.prototype._giveContainerGroup=function(n){var r=this._containerGroup;return r||(r=this._containerGroup=new E$,this._initEvents(r),this.group.add(r)),r.x=n.x,r.y=n.y,r},e.prototype._doRender=function(n,r,i){var a=r.getData().tree,s=this._oldTree,o=Uv(),l=Uv(),d=this._storage,c=[];function f(x,w,k,S){return pHe(r,l,d,i,o,c,x,w,k,S)}g(a.root?[a.root]:[],s&&s.root?[s.root]:[],n,a===s||!s,0);var p=v(d);if(this._oldTree=a,this._storage=l,this._controllerHost){var h=this.seriesModel.layoutInfo,m=a.root.getLayout();m.width===h.width&&m.height===h.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:o,willDeleteEls:p,renderFinally:_};function g(x,w,k,S,C){S?(w=x,oe(x,function($,R){!$.isRemoved()&&M(R,R)})):new id(w,x,A,A).add(M).update(M).remove(Pt(M,null)).execute();function A($){return $.getId()}function M($,R){var I=$!=null?x[$]:null,B=R!=null?w[R]:null,j=f(I,B,k,C);j&&g(I&&I.viewChildren||[],B&&B.viewChildren||[],j,S,C+1)}}function v(x){var w=Uv();return x&&oe(x,function(k,S){var C=w[S];oe(k,function(A){A&&(C.push(A),Wk(A).willDelete=!0)})}),w}function _(){oe(p,function(x){oe(x,function(w){w.parent&&w.parent.remove(w)})}),oe(c,function(x){x.invisible=!0,x.dirty()})}},e.prototype._doAnimation=function(n,r,i,a){var s=i.get("animationDurationUpdate"),o=i.get("animationEasing"),l=(gt(s)?0:s)||0,d=(gt(o)?null:o)||"cubicOut",c=lHe();oe(r.willDeleteEls,function(f,p){oe(f,function(h,m){if(!h.invisible){var g=h.parent,v,_=Wk(g);if(a&&a.direction==="drillDown")v=g===a.rootNodeGroup?{shape:{x:0,y:0,width:_.nodeWidth,height:_.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var x=0,w=0;_.willDelete||(x=_.nodeWidth/2,w=_.nodeHeight/2),v=p==="nodeGroup"?{x,y:w,style:{opacity:0}}:{shape:{x,y:w,width:0,height:0},style:{opacity:0}}}v&&c.add(h,v,l,0,d)}})}),oe(this._storage,function(f,p){oe(f,function(h,m){var g=r.lastsForAnimation[p][m],v={};g&&(h instanceof kt?g.oldX!=null&&(v.x=h.x,v.y=h.y,h.x=g.oldX,h.y=g.oldY):(g.oldShape&&(v.shape=Oe({},h.shape),h.setShape(g.oldShape)),g.fadein?(h.setStyle("opacity",0),v.style={opacity:1}):h.style.opacity!==1&&(v.style={opacity:1})),c.add(h,v,l,0,d))})},this),this._state="animating",c.finished(ut(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(n){var r=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),r||(r=this._controller=new Vb(n.getZr()),r.enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),r.on("pan",ut(this._onPan,this)),r.on("zoom",ut(this._onZoom,this)));var a=new qt(0,0,n.getWidth(),n.getHeight());r.setPointerChecker(function(s,o,l){return a.contain(o,l)})},e.prototype._clearController=function(){var n=this._controller;this._controllerHost=null,n&&(n.dispose(),n=null)},e.prototype._onPan=function(n){if(this._state!=="animating"&&(Math.abs(n.dx)>zB||Math.abs(n.dy)>zB)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+n.dx,y:i.y+n.dy,width:i.width,height:i.height}})}},e.prototype._onZoom=function(n){var r=n.originX,i=n.originY,a=n.scale;if(this._state!=="animating"){var s=this.seriesModel.getData().tree.root;if(!s)return;var o=s.getLayout();if(!o)return;var l=new qt(o.x,o.y,o.width,o.height),d=null,c=this._controllerHost;d=c.zoomLimit;var f=c.zoom=c.zoom||1;if(f*=a,d){var p=d.min||0,h=d.max||1/0;f=Math.max(Math.min(h,f),p)}var m=f/c.zoom;c.zoom=f;var g=this.seriesModel.layoutInfo;r-=g.x,i-=g.y;var v=ds();Nl(v,v,[-r,-i]),qP(v,v,[m,m]),Nl(v,v,[r,i]),l.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(n){var r=this;n.on("click",function(i){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var s=r.findTarget(i.offsetX,i.offsetY);if(s){var o=s.node;if(o.getLayout().isLeafRoot)r._rootToNode(s);else if(a==="zoomToNode")r._zoomToNode(s);else if(a==="link"){var l=o.hostTree.data.getItemModel(o.dataIndex),d=l.get("link",!0),c=l.get("target",!0)||"blank";d&&Mk(d,c)}}}}},this)},e.prototype._renderBreadcrumb=function(n,r,i){var a=this;i||(i=n.get("leafDepth",!0)!=null?{node:n.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),i||(i={node:n.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new iHe(this.group))).render(n,r,i.node,function(s){a._state!=="animating"&&(eO(n.getViewRoot(),s)?a._rootToNode({node:s}):a._zoomToNode({node:s}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Uv(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(n){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},e.prototype._rootToNode=function(n){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},e.prototype.findTarget=function(n,r){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(s){var o=this._storage.background[s.getRawIndex()];if(o){var l=o.transformCoordToLocal(n,r),d=o.shape;if(d.x<=l[0]&&l[0]<=d.x+d.width&&d.y<=l[1]&&l[1]<=d.y+d.height)i={node:s,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},e.type="treemap",e}(Pn);function Uv(){return{nodeGroup:[],background:[],content:[]}}function pHe(t,e,n,r,i,a,s,o,l,d){if(!s)return;var c=s.getLayout(),f=t.getData(),p=s.getModel();if(f.setItemGraphicEl(s.dataIndex,null),!c||!c.isInView)return;var h=c.width,m=c.height,g=c.borderWidth,v=c.invisible,_=s.getRawIndex(),x=o&&o.getRawIndex(),w=s.viewChildren,k=c.upperHeight,S=w&&w.length,C=p.getModel("itemStyle"),A=p.getModel(["emphasis","itemStyle"]),M=p.getModel(["blur","itemStyle"]),$=p.getModel(["select","itemStyle"]),R=C.get("borderRadius")||0,I=ee("nodeGroup",E$);if(!I)return;if(l.add(I),I.x=c.x||0,I.y=c.y||0,I.markRedraw(),Wk(I).nodeWidth=h,Wk(I).nodeHeight=m,c.isAboveViewRoot)return I;var B=ee("background",BB,d,dHe);B&&L(I,B,S&&c.upperLabelHeight);var j=p.getModel("emphasis"),z=j.get("focus"),F=j.get("blurScope"),q=j.get("disabled"),N=z==="ancestor"?s.getAncestorsIndices():z==="descendant"?s.getDescendantIndices():z;if(S)g1(I)&&ip(I,!1),B&&(ip(B,!q),f.setItemGraphicEl(s.dataIndex,B),GM(B,N,F));else{var O=ee("content",BB,d,cHe);O&&U(I,O),B.disableMorphing=!0,B&&g1(B)&&ip(B,!1),ip(I,!q),f.setItemGraphicEl(s.dataIndex,I);var V=p.getShallow("cursor");V&&O.attr("cursor",V),GM(I,N,F)}return I;function L(te,ne,ce){var ve=Tt(ne);if(ve.dataIndex=s.dataIndex,ve.seriesIndex=t.seriesIndex,ne.setShape({x:0,y:0,width:h,height:m,r:R}),v)G(ne);else{ne.invisible=!1;var Y=s.getVisual("style"),K=Y.stroke,H=qB(C);H.fill=K;var ae=Of(A);ae.fill=A.get("borderColor");var be=Of(M);be.fill=M.get("borderColor");var ue=Of($);if(ue.fill=$.get("borderColor"),ce){var pe=h-2*g;X(ne,K,Y.opacity,{x:g,y:0,width:pe,height:k})}else ne.removeTextContent();ne.setStyle(H),ne.ensureState("emphasis").style=ae,ne.ensureState("blur").style=be,ne.ensureState("select").style=ue,Xp(ne)}te.add(ne)}function U(te,ne){var ce=Tt(ne);ce.dataIndex=s.dataIndex,ce.seriesIndex=t.seriesIndex;var ve=Math.max(h-2*g,0),Y=Math.max(m-2*g,0);if(ne.culling=!0,ne.setShape({x:g,y:g,width:ve,height:Y,r:R}),v)G(ne);else{ne.invisible=!1;var K=s.getVisual("style"),H=K.fill,ae=qB(C);ae.fill=H,ae.decal=K.decal;var be=Of(A),ue=Of(M),pe=Of($);X(ne,H,K.opacity,null),ne.setStyle(ae),ne.ensureState("emphasis").style=be,ne.ensureState("blur").style=ue,ne.ensureState("select").style=pe,Xp(ne)}te.add(ne)}function G(te){!te.invisible&&a.push(te)}function X(te,ne,ce,ve){var Y=p.getModel(ve?HB:UB),K=Yr(p.get("name"),null),H=Y.getShallow("show");Li(te,ui(p,ve?HB:UB),{defaultText:H?K:null,inheritColor:ne,defaultOpacity:ce,labelFetcher:t,labelDataIndex:s.dataIndex});var ae=te.getTextContent();if(ae){var be=ae.style,ue=zP(be.padding||0);ve&&(te.setTextConfig({layoutRect:ve}),ae.disableLabelLayout=!0),ae.beforeUpdate=function(){var ye=Math.max((ve?ve.width:te.shape.width)-ue[1]-ue[3],0),Me=Math.max((ve?ve.height:te.shape.height)-ue[0]-ue[2],0);(be.width!==ye||be.height!==Me)&&ae.setStyle({width:ye,height:Me})},be.truncateMinChar=2,be.lineOverflow="truncate",re(be,ve,c);var pe=ae.getState("emphasis");re(pe?pe.style:null,ve,c)}}function re(te,ne,ce){var ve=te?te.text:null;if(!ne&&ce.isLeafRoot&&ve!=null){var Y=t.get("drillDownIcon",!0);te.text=Y?Y+" "+ve:ve}}function ee(te,ne,ce,ve){var Y=x!=null&&n[te][x],K=i[te];return Y?(n[te][x]=null,de(K,Y)):v||(Y=new ne,Y instanceof no&&(Y.z2=hHe(ce,ve)),se(K,Y)),e[te][_]=Y}function de(te,ne){var ce=te[_]={};ne instanceof E$?(ce.oldX=ne.x,ce.oldY=ne.y):ce.oldShape=Oe({},ne.shape)}function se(te,ne){var ce=te[_]={},ve=s.parentNode,Y=ne instanceof kt;if(ve&&(!r||r.direction==="drillDown")){var K=0,H=0,ae=i.background[ve.getRawIndex()];!r&&ae&&ae.oldShape&&(K=ae.oldShape.width,H=ae.oldShape.height),Y?(ce.oldX=0,ce.oldY=H):ce.oldShape={x:K,y:H,width:0,height:0}}ce.fadein=!Y}}function hHe(t,e){return t*uHe+e}var $1=oe,mHe=_t,Gk=-1,oi=function(){function t(e){var n=e.mappingMethod,r=e.type,i=this.option=xt(e);this.type=r,this.mappingMethod=n,this._normalizeData=yHe[n];var a=t.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[n],n==="piecewise"?(S3(i),gHe(i)):n==="category"?i.categories?vHe(i):S3(i,!0):(Ta(n!=="linear"||i.dataExtent),S3(i))}return t.prototype.mapValueToVisual=function(e){var n=this._normalizeData(e);return this._normalizedToVisual(n,e)},t.prototype.getNormalizer=function(){return ut(this._normalizeData,this)},t.listVisualTypes=function(){return rn(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(e,n,r){_t(e)?oe(e,n,r):n.call(r,e)},t.mapVisual=function(e,n,r){var i,a=Be(e)?[]:_t(e)?{}:(i=!0,null);return t.eachVisual(e,function(s,o){var l=n.call(r,s,o);i?a=l:a[o]=l}),a},t.retrieveVisuals=function(e){var n={},r;return e&&$1(t.visualHandlers,function(i,a){e.hasOwnProperty(a)&&(n[a]=e[a],r=!0)}),r?n:null},t.prepareVisualTypes=function(e){if(Be(e))e=e.slice();else if(mHe(e)){var n=[];$1(e,function(r,i){n.push(i)}),e=n}else return[];return e.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},t.dependsOn=function(e,n){return n==="color"?!!(e&&e.indexOf(n)===0):e===n},t.findPieceIndex=function(e,n,r){for(var i,a=1/0,s=0,o=n.length;s<o;s++){var l=n[s].value;if(l!=null){if(l===e||it(l)&&l===e+"")return s;r&&p(l,s)}}for(var s=0,o=n.length;s<o;s++){var d=n[s],c=d.interval,f=d.close;if(c){if(c[0]===-1/0){if(_x(f[1],e,c[1]))return s}else if(c[1]===1/0){if(_x(f[0],c[0],e))return s}else if(_x(f[0],c[0],e)&&_x(f[1],e,c[1]))return s;r&&p(c[0],s),r&&p(c[1],s)}}if(r)return e===1/0?n.length-1:e===-1/0?0:i;function p(h,m){var g=Math.abs(h-e);g<a&&(a=g,i=m)}},t.visualHandlers={color:{applyVisual:Hv("color"),getColorMapper:function(){var e=this.option;return ut(e.mappingMethod==="category"?function(n,r){return!r&&(n=this._normalizeData(n)),_y.call(this,n)}:function(n,r,i){var a=!!i;return!r&&(n=this._normalizeData(n)),i=a4(n,e.parsedVisual,i),a?i:zu(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return zu(a4(e,this.option.parsedVisual),"rgba")},category:_y,piecewise:function(e,n){var r=$$.call(this,n);return r==null&&(r=zu(a4(e,this.option.parsedVisual),"rgba")),r},fixed:Lf}},colorHue:bx(function(e,n){return s0(e,n)}),colorSaturation:bx(function(e,n){return s0(e,null,n)}),colorLightness:bx(function(e,n){return s0(e,null,null,n)}),colorAlpha:bx(function(e,n){return vk(e,n)}),decal:{applyVisual:Hv("decal"),_normalizedToVisual:{linear:null,category:_y,piecewise:null,fixed:null}},opacity:{applyVisual:Hv("opacity"),_normalizedToVisual:M$([0,1])},liftZ:{applyVisual:Hv("liftZ"),_normalizedToVisual:{linear:Lf,category:Lf,piecewise:Lf,fixed:Lf}},symbol:{applyVisual:function(e,n,r){var i=this.mapValueToVisual(e);r("symbol",i)},_normalizedToVisual:{linear:WB,category:_y,piecewise:function(e,n){var r=$$.call(this,n);return r==null&&(r=WB.call(this,e)),r},fixed:Lf}},symbolSize:{applyVisual:Hv("symbolSize"),_normalizedToVisual:M$([0,1])}},t}();function gHe(t){var e=t.pieceList;t.hasSpecialVisual=!1,oe(e,function(n,r){n.originIndex=r,n.visual!=null&&(t.hasSpecialVisual=!0)})}function vHe(t){var e=t.categories,n=t.categoryMap={},r=t.visual;if($1(e,function(s,o){n[s]=o}),!Be(r)){var i=[];_t(r)?$1(r,function(s,o){var l=n[o];i[l!=null?l:Gk]=s}):i[Gk]=r,r=jie(t,i)}for(var a=e.length-1;a>=0;a--)r[a]==null&&(delete n[e[a]],e.pop())}function S3(t,e){var n=t.visual,r=[];_t(n)?$1(n,function(a){r.push(a)}):n!=null&&r.push(n);var i={color:1,symbol:1};!e&&r.length===1&&!i.hasOwnProperty(t.type)&&(r[1]=r[0]),jie(t,r)}function bx(t){return{applyVisual:function(e,n,r){var i=this.mapValueToVisual(e);r("color",t(n("color"),i))},_normalizedToVisual:M$([0,1])}}function WB(t){var e=this.option.visual;return e[Math.round(Cn(t,[0,1],[0,e.length-1],!0))]||{}}function Hv(t){return function(e,n,r){r(t,this.mapValueToVisual(e))}}function _y(t){var e=this.option.visual;return e[this.option.loop&&t!==Gk?t%e.length:t]}function Lf(){return this.option.visual[0]}function M$(t){return{linear:function(e){return Cn(e,t,this.option.visual,!0)},category:_y,piecewise:function(e,n){var r=$$.call(this,n);return r==null&&(r=Cn(e,t,this.option.visual,!0)),r},fixed:Lf}}function $$(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var r=oi.findPieceIndex(t,n),i=n[r];if(i&&i.visual)return i.visual[this.type]}}function jie(t,e){return t.visual=e,t.type==="color"&&(t.parsedVisual=ze(e,function(n){var r=cs(n);return r||[0,0,0,1]})),e}var yHe={linear:function(t){return Cn(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=oi.findPieceIndex(t,e,!0);if(n!=null)return Cn(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return e==null?Gk:e},fixed:Or};function _x(t,e,n){return t?e<=n:e<n}var bHe="itemStyle",Fie=on();const _He={seriesType:"treemap",reset:function(t){var e=t.getData().tree,n=e.root;n.isRemoved()||Bie(n,{},t.getViewRoot().getAncestors(),t)}};function Bie(t,e,n,r){var i=t.getModel(),a=t.getLayout(),s=t.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var o=i.getModel(bHe),l=xHe(o,e,r),d=s.ensureUniqueItemVisual(t.dataIndex,"style"),c=o.get("borderColor"),f=o.get("borderColorSaturation"),p;f!=null&&(p=GB(l),c=wHe(f,p)),d.stroke=c;var h=t.viewChildren;if(!h||!h.length)p=GB(l),d.fill=p;else{var m=kHe(t,i,a,o,l,h);oe(h,function(g,v){if(g.depth>=n.length||g===n[g.depth]){var _=SHe(i,l,g,v,m,r);Bie(g,_,n,r)}})}}}function xHe(t,e,n){var r=Oe({},e),i=n.designatedVisualItemStyle;return oe(["color","colorAlpha","colorSaturation"],function(a){i[a]=e[a];var s=t.get(a);i[a]=null,s!=null&&(r[a]=s)}),r}function GB(t){var e=C3(t,"color");if(e){var n=C3(t,"colorAlpha"),r=C3(t,"colorSaturation");return r&&(e=s0(e,null,null,r)),n&&(e=vk(e,n)),e}}function wHe(t,e){return e!=null?s0(e,null,null,t):null}function C3(t,e){var n=t[e];if(n!=null&&n!=="none")return n}function kHe(t,e,n,r,i,a){if(!(!a||!a.length)){var s=A3(e,"color")||i.color!=null&&i.color!=="none"&&(A3(e,"colorAlpha")||A3(e,"colorSaturation"));if(s){var o=e.get("visualMin"),l=e.get("visualMax"),d=n.dataExtent.slice();o!=null&&o<d[0]&&(d[0]=o),l!=null&&l>d[1]&&(d[1]=l);var c=e.get("colorMappingBy"),f={type:s.name,dataExtent:d,visual:s.range};f.type==="color"&&(c==="index"||c==="id")?(f.mappingMethod="category",f.loop=!0):f.mappingMethod="linear";var p=new oi(f);return Fie(p).drColorMappingBy=c,p}}}function A3(t,e){var n=t.get(e);return Be(n)&&n.length?{name:e,range:n}:null}function SHe(t,e,n,r,i,a){var s=Oe({},e);if(i){var o=i.type,l=o==="color"&&Fie(i).drColorMappingBy,d=l==="index"?r:l==="id"?a.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));s[o]=i.mapValueToVisual(d)}return s}var D1=Math.max,Yk=Math.min,YB=gi,tO=oe,zie=["itemStyle","borderWidth"],CHe=["itemStyle","gapWidth"],AHe=["upperLabel","show"],THe=["upperLabel","height"];const EHe={seriesType:"treemap",reset:function(t,e,n,r){var i=n.getWidth(),a=n.getHeight(),s=t.option,o=Qr(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=s.size||[],d=Qe(YB(o.width,l[0]),i),c=Qe(YB(o.height,l[1]),a),f=r&&r.type,p=["treemapZoomToNode","treemapRootToNode"],h=M1(r,p,t),m=f==="treemapRender"||f==="treemapMove"?r.rootRect:null,g=t.getViewRoot(),v=Lie(g);if(f!=="treemapMove"){var _=f==="treemapZoomToNode"?IHe(t,h,g,d,c):m?[m.width,m.height]:[d,c],x=s.sort;x&&x!=="asc"&&x!=="desc"&&(x="desc");var w={squareRatio:s.squareRatio,sort:x,leafDepth:s.leafDepth};g.hostTree.clearLayouts();var k={x:0,y:0,width:_[0],height:_[1],area:_[0]*_[1]};g.setLayout(k),Uie(g,w,!1,0),k=g.getLayout(),tO(v,function(C,A){var M=(v[A+1]||g).getValue();C.setLayout(Oe({dataExtent:[M,M],borderWidth:0,upperHeight:0},k))})}var S=t.getData().tree.root;S.setLayout(OHe(o,m,h),!0),t.setLayoutInfo(o),Hie(S,new qt(-o.x,-o.y,i,a),v,g,0)}};function Uie(t,e,n,r){var i,a;if(!t.isRemoved()){var s=t.getLayout();i=s.width,a=s.height;var o=t.getModel(),l=o.get(zie),d=o.get(CHe)/2,c=qie(o),f=Math.max(l,c),p=l-d,h=f-d;t.setLayout({borderWidth:l,upperHeight:f,upperLabelHeight:c},!0),i=D1(i-2*p,0),a=D1(a-p-h,0);var m=i*a,g=MHe(t,o,m,e,n,r);if(g.length){var v={x:p,y:h,width:i,height:a},_=Yk(i,a),x=1/0,w=[];w.area=0;for(var k=0,S=g.length;k<S;){var C=g[k];w.push(C),w.area+=C.getLayout().area;var A=PHe(w,_,e.squareRatio);A<=x?(k++,x=A):(w.area-=w.pop().getLayout().area,KB(w,_,v,d,!1),_=Yk(v.width,v.height),w.length=w.area=0,x=1/0)}if(w.length&&KB(w,_,v,d,!0),!n){var M=o.get("childrenVisibleMin");M!=null&&m<M&&(n=!0)}for(var k=0,S=g.length;k<S;k++)Uie(g[k],e,n,r+1)}}}function MHe(t,e,n,r,i,a){var s=t.children||[],o=r.sort;o!=="asc"&&o!=="desc"&&(o=null);var l=r.leafDepth!=null&&r.leafDepth<=a;if(i&&!l)return t.viewChildren=[];s=kn(s,function(h){return!h.isRemoved()}),DHe(s,o);var d=RHe(e,s,o);if(d.sum===0)return t.viewChildren=[];if(d.sum=$He(e,n,d.sum,o,s),d.sum===0)return t.viewChildren=[];for(var c=0,f=s.length;c<f;c++){var p=s[c].getValue()/d.sum*n;s[c].setLayout({area:p})}return l&&(s.length&&t.setLayout({isLeafRoot:!0},!0),s.length=0),t.viewChildren=s,t.setLayout({dataExtent:d.dataExtent},!0),s}function $He(t,e,n,r,i){if(!r)return n;for(var a=t.get("visibleMin"),s=i.length,o=s,l=s-1;l>=0;l--){var d=i[r==="asc"?s-l-1:l].getValue();d/n*e<a&&(o=l,n-=d)}return r==="asc"?i.splice(0,s-o):i.splice(o,s-o),n}function DHe(t,e){return e&&t.sort(function(n,r){var i=e==="asc"?n.getValue()-r.getValue():r.getValue()-n.getValue();return i===0?e==="asc"?n.dataIndex-r.dataIndex:r.dataIndex-n.dataIndex:i}),t}function RHe(t,e,n){for(var r=0,i=0,a=e.length;i<a;i++)r+=e[i].getValue();var s=t.get("visualDimension"),o;return!e||!e.length?o=[NaN,NaN]:s==="value"&&n?(o=[e[e.length-1].getValue(),e[0].getValue()],n==="asc"&&o.reverse()):(o=[1/0,-1/0],tO(e,function(l){var d=l.getValue(s);d<o[0]&&(o[0]=d),d>o[1]&&(o[1]=d)})),{sum:r,dataExtent:o}}function PHe(t,e,n){for(var r=0,i=1/0,a=0,s=void 0,o=t.length;a<o;a++)s=t[a].getLayout().area,s&&(s<i&&(i=s),s>r&&(r=s));var l=t.area*t.area,d=e*e*n;return l?D1(d*r/l,l/(d*i)):1/0}function KB(t,e,n,r,i){var a=e===n.width?0:1,s=1-a,o=["x","y"],l=["width","height"],d=n[o[a]],c=e?t.area/e:0;(i||c>n[l[s]])&&(c=n[l[s]]);for(var f=0,p=t.length;f<p;f++){var h=t[f],m={},g=c?h.getLayout().area/c:0,v=m[l[s]]=D1(c-2*r,0),_=n[o[a]]+n[l[a]]-d,x=f===p-1||_<g?_:g,w=m[l[a]]=D1(x-2*r,0);m[o[s]]=n[o[s]]+Yk(r,v/2),m[o[a]]=d+Yk(r,w/2),d+=x,h.setLayout(m,!0)}n[o[s]]+=c,n[l[s]]-=c}function IHe(t,e,n,r,i){var a=(e||{}).node,s=[r,i];if(!a||a===n)return s;for(var o,l=r*i,d=l*t.option.zoomToNodeRatio;o=a.parentNode;){for(var c=0,f=o.children,p=0,h=f.length;p<h;p++)c+=f[p].getValue();var m=a.getValue();if(m===0)return s;d*=c/m;var g=o.getModel(),v=g.get(zie),_=Math.max(v,qie(g));d+=4*v*v+(3*v+_)*Math.pow(d,.5),d>uj&&(d=uj),a=o}d<l&&(d=l);var x=Math.pow(d/l,.5);return[r*x,i*x]}function OHe(t,e,n){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!n)return r;var i=n.node,a=i.getLayout();if(!a)return r;for(var s=[a.width/2,a.height/2],o=i;o;){var l=o.getLayout();s[0]+=l.x,s[1]+=l.y,o=o.parentNode}return{x:t.width/2-s[0],y:t.height/2-s[1]}}function Hie(t,e,n,r,i){var a=t.getLayout(),s=n[i],o=s&&s===t;if(!(s&&!o||i===n.length&&t!==r)){t.setLayout({isInView:!0,invisible:!o&&!e.intersect(a),isAboveViewRoot:o},!0);var l=new qt(e.x-a.x,e.y-a.y,e.width,e.height);tO(t.viewChildren||[],function(d){Hie(d,l,n,r,i+1)})}}function qie(t){return t.get(AHe)?t.get(THe):0}function LHe(t){t.registerSeriesModel(tHe),t.registerChartView(fHe),t.registerVisual(_He),t.registerLayout(EHe),eHe(t)}function VHe(t){var e=t.findComponents({mainType:"legend"});!e||!e.length||t.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),i=n.getGraph(),a=i.data,s=r.mapArray(r.getName);a.filterSelf(function(o){var l=a.getItemModel(o),d=l.getShallow("category");if(d!=null){pn(d)&&(d=s[d]);for(var c=0;c<e.length;c++)if(!e[c].isSelected(d))return!1}return!0})})}function NHe(t){var e={};t.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),i=n.getData(),a={};r.each(function(s){var o=r.getName(s);a["ec-"+o]=s;var l=r.getItemModel(s),d=l.getModel("itemStyle").getItemStyle();d.fill||(d.fill=n.getColorFromPalette(o,e)),r.setItemVisual(s,"style",d);for(var c=["symbol","symbolSize","symbolKeepAspect"],f=0;f<c.length;f++){var p=l.getShallow(c[f],!0);p!=null&&r.setItemVisual(s,c[f],p)}}),r.count()&&i.each(function(s){var o=i.getItemModel(s),l=o.getShallow("category");if(l!=null){it(l)&&(l=a["ec-"+l]);var d=r.getItemVisual(l,"style"),c=i.ensureUniqueItemVisual(s,"style");Oe(c,d);for(var f=["symbol","symbolSize","symbolKeepAspect"],p=0;p<f.length;p++)i.setItemVisual(s,f[p],r.getItemVisual(l,f[p]))}})})}function xx(t){return t instanceof Array||(t=[t,t]),t}function jHe(t){t.eachSeriesByType("graph",function(e){var n=e.getGraph(),r=e.getEdgeData(),i=xx(e.get("edgeSymbol")),a=xx(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(s){var o=r.getItemModel(s),l=n.getEdgeByIndex(s),d=xx(o.getShallow("symbol",!0)),c=xx(o.getShallow("symbolSize",!0)),f=o.getModel("lineStyle").getLineStyle(),p=r.ensureUniqueItemVisual(s,"style");switch(Oe(p,f),p.stroke){case"source":{var h=l.node1.getVisual("style");p.stroke=h&&h.fill;break}case"target":{var h=l.node2.getVisual("style");p.stroke=h&&h.fill;break}}d[0]&&l.setVisual("fromSymbol",d[0]),d[1]&&l.setVisual("toSymbol",d[1]),c[0]&&l.setVisual("fromSymbolSize",c[0]),c[1]&&l.setVisual("toSymbolSize",c[1])})})}var D$="-->",mA=function(t){return t.get("autoCurveness")||null},Wie=function(t,e){var n=mA(t),r=20,i=[];if(pn(n))r=n;else if(Be(n)){t.__curvenessList=n;return}e>r&&(r=e);var a=r%2?r+2:r+3;i=[];for(var s=0;s<a;s++)i.push((s%2?s+1:s)/10*(s%2?-1:1));t.__curvenessList=i},R1=function(t,e,n){var r=[t.id,t.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[n.uid,r,i].join(D$)},Gie=function(t){var e=t.split(D$);return[e[0],e[2],e[1]].join(D$)},FHe=function(t,e){var n=R1(t.node1,t.node2,e);return e.__edgeMap[n]},BHe=function(t,e){var n=R$(R1(t.node1,t.node2,e),e),r=R$(R1(t.node2,t.node1,e),e);return n+r},R$=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function zHe(t){mA(t)&&(t.__curvenessList=[],t.__edgeMap={},Wie(t))}function UHe(t,e,n,r){if(mA(n)){var i=R1(t,e,n),a=n.__edgeMap,s=a[Gie(i)];a[i]&&!s?a[i].isForward=!0:s&&a[i]&&(s.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(r)}}function nO(t,e,n,r){var i=mA(e),a=Be(i);if(!i)return null;var s=FHe(t,e);if(!s)return null;for(var o=-1,l=0;l<s.length;l++)if(s[l]===n){o=l;break}var d=BHe(t,e);Wie(e,d),t.lineStyle=t.lineStyle||{};var c=R1(t.node1,t.node2,e),f=e.__curvenessList,p=a||d%2?0:1;if(s.isForward)return f[p+o];var h=Gie(c),m=R$(h,e),g=f[o+m+p];return r?a?i&&i[0]===0?(m+p)%2?g:-g:((m%2?0:1)+p)%2?g:-g:(m+p)%2?g:-g:f[o+m+p]}function Yie(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view")){var n=t.getGraph();n.eachNode(function(r){var i=r.getModel();r.setLayout([+i.get("x"),+i.get("y")])}),rO(n,t)}}function rO(t,e){t.eachEdge(function(n,r){var i=El(n.getModel().get(["lineStyle","curveness"]),-nO(n,e,r,!0),0),a=Fu(n.node1.getLayout()),s=Fu(n.node2.getLayout()),o=[a,s];+i&&o.push([(a[0]+s[0])/2-(a[1]-s[1])*i,(a[1]+s[1])/2-(s[0]-a[0])*i]),n.setLayout(o)})}function HHe(t,e){t.eachSeriesByType("graph",function(n){var r=n.get("layout"),i=n.coordinateSystem;if(i&&i.type!=="view"){var a=n.getData(),s=[];oe(i.dimensions,function(p){s=s.concat(a.mapDimensionsAll(p))});for(var o=0;o<a.count();o++){for(var l=[],d=!1,c=0;c<s.length;c++){var f=a.get(s[c],o);isNaN(f)||(d=!0),l.push(f)}d?a.setItemLayout(o,i.dataToPoint(l)):a.setItemLayout(o,[NaN,NaN])}rO(a.graph,n)}else(!r||r==="none")&&Yie(n)})}function xy(t){var e=t.coordinateSystem;if(e.type!=="view")return 1;var n=t.option.nodeScaleRatio,r=e.scaleX,i=e.getZoom(),a=(i-1)*n+1;return a/r}function wy(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var XB=Math.PI,T3=[];function iO(t,e,n,r){var i=t.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),s=t.getData(),o=s.graph,l=a.width/2+a.x,d=a.height/2+a.y,c=Math.min(a.width,a.height)/2,f=s.count();if(s.setLayout({cx:l,cy:d}),!!f){if(n){var p=i.pointToData(r),h=p[0],m=p[1],g=[h-l,m-d];Ig(g,g),xw(g,g,c),n.setLayout([l+g[0],d+g[1]],!0);var v=t.get(["circular","rotateLabel"]);Kie(n,v,l,d)}qHe[e](t,o,s,c,l,d,f),o.eachEdge(function(_,x){var w=El(_.getModel().get(["lineStyle","curveness"]),nO(_,t,x),0),k=Fu(_.node1.getLayout()),S=Fu(_.node2.getLayout()),C,A=(k[0]+S[0])/2,M=(k[1]+S[1])/2;+w&&(w*=3,C=[l*w+A*(1-w),d*w+M*(1-w)]),_.setLayout([k,S,C])})}}}var qHe={value:function(t,e,n,r,i,a,s){var o=0,l=n.getSum("value"),d=Math.PI*2/(l||s);e.eachNode(function(c){var f=c.getValue("value"),p=d*(l?f:1)/2;o+=p,c.setLayout([r*Math.cos(o)+i,r*Math.sin(o)+a]),o+=p})},symbolSize:function(t,e,n,r,i,a,s){var o=0;T3.length=s;var l=xy(t);e.eachNode(function(f){var p=wy(f);isNaN(p)&&(p=2),p<0&&(p=0),p*=l;var h=Math.asin(p/2/r);isNaN(h)&&(h=XB/2),T3[f.dataIndex]=h,o+=h*2});var d=(2*XB-o)/s/2,c=0;e.eachNode(function(f){var p=d+T3[f.dataIndex];c+=p,(!f.getLayout()||!f.getLayout().fixed)&&f.setLayout([r*Math.cos(c)+i,r*Math.sin(c)+a]),c+=p})}};function Kie(t,e,n,r){var i=t.getGraphicEl();if(i){var a=t.getModel(),s=a.get(["label","rotate"])||0,o=i.getSymbolPath();if(e){var l=t.getLayout(),d=Math.atan2(l[1]-r,l[0]-n);d<0&&(d=Math.PI*2+d);var c=l[0]<n;c&&(d=d-Math.PI);var f=c?"left":"right";o.setTextConfig({rotation:-d,position:f,origin:"center"});var p=o.ensureState("emphasis");Oe(p.textConfig||(p.textConfig={}),{position:f})}else o.setTextConfig({rotation:s*=Math.PI/180})}}function WHe(t){t.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&iO(e,"symbolSize")})}var Xh=yM;function GHe(t,e,n){for(var r=t,i=e,a=n.rect,s=a.width,o=a.height,l=[a.x+s/2,a.y+o/2],d=n.gravity==null?.1:n.gravity,c=0;c<r.length;c++){var f=r[c];f.p||(f.p=ch(s*(Math.random()-.5)+l[0],o*(Math.random()-.5)+l[1])),f.pp=Fu(f.p),f.edges=null}var p=n.friction==null?.6:n.friction,h=p,m,g;return{warmUp:function(){h=p*.8},setFixed:function(v){r[v].fixed=!0},setUnfixed:function(v){r[v].fixed=!1},beforeStep:function(v){m=v},afterStep:function(v){g=v},step:function(v){m&&m(r,i);for(var _=[],x=r.length,w=0;w<i.length;w++){var k=i[w];if(!k.ignoreForceLayout){var S=k.n1,C=k.n2;np(_,C.p,S.p);var A=bM(_)-k.d,M=C.w/(S.w+C.w);isNaN(M)&&(M=0),Ig(_,_),!S.fixed&&Xh(S.p,S.p,_,M*A*h),!C.fixed&&Xh(C.p,C.p,_,-(1-M)*A*h)}}for(var w=0;w<x;w++){var $=r[w];$.fixed||(np(_,l,$.p),Xh($.p,$.p,_,d*h))}for(var w=0;w<x;w++)for(var S=r[w],R=w+1;R<x;R++){var C=r[R];np(_,C.p,S.p);var A=bM(_);A===0&&(k6e(_,Math.random()-.5,Math.random()-.5),A=1);var I=(S.rep+C.rep)/A/A;!S.fixed&&Xh(S.pp,S.pp,_,I),!C.fixed&&Xh(C.pp,C.pp,_,-I)}for(var B=[],w=0;w<x;w++){var $=r[w];$.fixed||(np(B,$.p,$.pp),Xh($.p,$.p,B,h),ca($.pp,$.p))}h=h*.992;var j=h<.01;g&&g(r,i,j),v&&v(j)}}}function YHe(t){t.eachSeriesByType("graph",function(e){var n=e.coordinateSystem;if(!(n&&n.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},i=e.getGraph(),a=i.data,s=i.edgeData,o=e.getModel("force"),l=o.get("initLayout");e.preservedPoints?a.each(function(w){var k=a.getId(w);a.setItemLayout(w,r[k]||[NaN,NaN])}):!l||l==="none"?Yie(e):l==="circular"&&iO(e,"value");var d=a.getDataExtent("value"),c=s.getDataExtent("value"),f=o.get("repulsion"),p=o.get("edgeLength"),h=Be(f)?f:[f,f],m=Be(p)?p:[p,p];m=[m[1],m[0]];var g=a.mapArray("value",function(w,k){var S=a.getItemLayout(k),C=Cn(w,d,h);return isNaN(C)&&(C=(h[0]+h[1])/2),{w:C,rep:C,fixed:a.getItemModel(k).get("fixed"),p:!S||isNaN(S[0])||isNaN(S[1])?null:S}}),v=s.mapArray("value",function(w,k){var S=i.getEdgeByIndex(k),C=Cn(w,c,m);isNaN(C)&&(C=(m[0]+m[1])/2);var A=S.getModel(),M=El(S.getModel().get(["lineStyle","curveness"]),-nO(S,e,k,!0),0);return{n1:g[S.node1.dataIndex],n2:g[S.node2.dataIndex],d:C,curveness:M,ignoreForceLayout:A.get("ignoreForceLayout")}}),_=n.getBoundingRect(),x=GHe(g,v,{rect:_,gravity:o.get("gravity"),friction:o.get("friction")});x.beforeStep(function(w,k){for(var S=0,C=w.length;S<C;S++)w[S].fixed&&ca(w[S].p,i.getNodeByIndex(S).getLayout())}),x.afterStep(function(w,k,S){for(var C=0,A=w.length;C<A;C++)w[C].fixed||i.getNodeByIndex(C).setLayout(w[C].p),r[a.getId(C)]=w[C].p;for(var C=0,A=k.length;C<A;C++){var M=k[C],$=i.getEdgeByIndex(C),R=M.n1.p,I=M.n2.p,B=$.getLayout();B=B?B.slice():[],B[0]=B[0]||[],B[1]=B[1]||[],ca(B[0],R),ca(B[1],I),+M.curveness&&(B[2]=[(R[0]+I[0])/2-(R[1]-I[1])*M.curveness,(R[1]+I[1])/2-(I[0]-R[0])*M.curveness]),$.setLayout(B)}}),e.forceLayout=x,e.preservedPoints=r,x.step()}else e.forceLayout=null})}function KHe(t,e,n){var r=Oe(t.getBoxLayoutParams(),{aspect:n});return Qr(r,{width:e.getWidth(),height:e.getHeight()})}function XHe(t,e){var n=[];return t.eachSeriesByType("graph",function(r){var i=r.get("coordinateSystem");if(!i||i==="view"){var a=r.getData(),s=a.mapArray(function(v){var _=a.getItemModel(v);return[+_.get("x"),+_.get("y")]}),o=[],l=[];zC(s,o,l),l[0]-o[0]===0&&(l[0]+=1,o[0]-=1),l[1]-o[1]===0&&(l[1]+=1,o[1]-=1);var d=(l[0]-o[0])/(l[1]-o[1]),c=KHe(r,e,d);isNaN(d)&&(o=[c.x,c.y],l=[c.x+c.width,c.y+c.height]);var f=l[0]-o[0],p=l[1]-o[1],h=c.width,m=c.height,g=r.coordinateSystem=new Nb;g.zoomLimit=r.get("scaleLimit"),g.setBoundingRect(o[0],o[1],f,p),g.setViewRect(c.x,c.y,h,m),g.setCenter(r.get("center"),e),g.setZoom(r.get("zoom")),n.push(g)}}),n}var ZB=ii.prototype,E3=kb.prototype,Xie=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Xie);function M3(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var ZHe=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Xie},e.prototype.buildPath=function(n,r){M3(r)?ZB.buildPath.call(this,n,r):E3.buildPath.call(this,n,r)},e.prototype.pointAt=function(n){return M3(this.shape)?ZB.pointAt.call(this,n):E3.pointAt.call(this,n)},e.prototype.tangentAt=function(n){var r=this.shape,i=M3(r)?[r.x2-r.x1,r.y2-r.y1]:E3.tangentAt.call(this,n);return Ig(i,i)},e}(Zt),$3=["fromSymbol","toSymbol"];function QB(t){return"_"+t+"Type"}function JB(t,e,n){var r=e.getItemVisual(n,t);if(!r||r==="none")return r;var i=e.getItemVisual(n,t+"Size"),a=e.getItemVisual(n,t+"Rotate"),s=e.getItemVisual(n,t+"Offset"),o=e.getItemVisual(n,t+"KeepAspect"),l=Wg(i),d=mh(s||0,l);return r+l+d+(a||"")+(o||"")}function ez(t,e,n){var r=e.getItemVisual(n,t);if(!(!r||r==="none")){var i=e.getItemVisual(n,t+"Size"),a=e.getItemVisual(n,t+"Rotate"),s=e.getItemVisual(n,t+"Offset"),o=e.getItemVisual(n,t+"KeepAspect"),l=Wg(i),d=mh(s||0,l),c=Ur(r,-l[0]/2+d[0],-l[1]/2+d[1],l[0],l[1],null,o);return c.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=t,c}}function QHe(t){var e=new ZHe({name:"line",subPixelOptimize:!0});return P$(e.shape,t),e}function P$(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}var aO=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this)||this;return a._createLine(n,r,i),a}return e.prototype._createLine=function(n,r,i){var a=n.hostModel,s=n.getItemLayout(r),o=QHe(s);o.shape.percent=0,sr(o,{shape:{percent:1}},a,r),this.add(o),oe($3,function(l){var d=ez(l,n,r);this.add(d),this[QB(l)]=JB(l,n,r)},this),this._updateCommonStl(n,r,i)},e.prototype.updateData=function(n,r,i){var a=n.hostModel,s=this.childOfName("line"),o=n.getItemLayout(r),l={shape:{}};P$(l.shape,o),yn(s,l,a,r),oe($3,function(d){var c=JB(d,n,r),f=QB(d);if(this[f]!==c){this.remove(this.childOfName(d));var p=ez(d,n,r);this.add(p)}this[f]=c},this),this._updateCommonStl(n,r,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(n,r,i){var a=n.hostModel,s=this.childOfName("line"),o=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,d=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,p=i&&i.focus,h=i&&i.blurScope;if(!i||n.hasItemOption){var m=n.getItemModel(r),g=m.getModel("emphasis");o=g.getModel("lineStyle").getLineStyle(),l=m.getModel(["blur","lineStyle"]).getLineStyle(),d=m.getModel(["select","lineStyle"]).getLineStyle(),f=g.get("disabled"),p=g.get("focus"),h=g.get("blurScope"),c=ui(m)}var v=n.getItemVisual(r,"style"),_=v.stroke;s.useStyle(v),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=o,s.ensureState("blur").style=l,s.ensureState("select").style=d,oe($3,function(C){var A=this.childOfName(C);if(A){A.setColor(_),A.style.opacity=v.opacity;for(var M=0;M<Ea.length;M++){var $=Ea[M],R=s.getState($);if(R){var I=R.style||{},B=A.ensureState($),j=B.style||(B.style={});I.stroke!=null&&(j[A.__isEmptyBrush?"stroke":"fill"]=I.stroke),I.opacity!=null&&(j.opacity=I.opacity)}}A.markRedraw()}},this);var x=a.getRawValue(r);Li(this,c,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(C,A){return a.getFormattedLabel(C,A,n.dataType)}},inheritColor:_||"#000",defaultOpacity:v.opacity,defaultText:(x==null?n.getName(r):isFinite(x)?Ar(x):x)+""});var w=this.getTextContent();if(w){var k=c.normal;w.__align=w.style.align,w.__verticalAlign=w.style.verticalAlign,w.__position=k.get("position")||"middle";var S=k.get("distance");Be(S)||(S=[S,S]),w.__labelDistance=S}this.setTextConfig({position:null,local:!0,inside:!1}),_r(this,p,h,f)},e.prototype.highlight=function(){nd(this)},e.prototype.downplay=function(){rd(this)},e.prototype.updateLayout=function(n,r){this.setLinePoints(n.getItemLayout(r))},e.prototype.setLinePoints=function(n){var r=this.childOfName("line");P$(r.shape,n),r.dirty()},e.prototype.beforeUpdate=function(){var n=this,r=n.childOfName("fromSymbol"),i=n.childOfName("toSymbol"),a=n.getTextContent();if(!r&&!i&&(!a||a.ignore))return;for(var s=1,o=this.parent;o;)o.scaleX&&(s/=o.scaleX),o=o.parent;var l=n.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var d=l.shape.percent,c=l.pointAt(0),f=l.pointAt(d),p=np([],f,c);Ig(p,p);function h(R,I){var B=R.__specifiedRotation;if(B==null){var j=l.tangentAt(I);R.attr("rotation",(I===1?-1:1)*Math.PI/2-Math.atan2(j[1],j[0]))}else R.attr("rotation",B)}if(r&&(r.setPosition(c),h(r,0),r.scaleX=r.scaleY=s*d,r.markRedraw()),i&&(i.setPosition(f),h(i,1),i.scaleX=i.scaleY=s*d,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var m=void 0,g=void 0,v=a.__labelDistance,_=v[0]*s,x=v[1]*s,w=d/2,k=l.tangentAt(w),S=[k[1],-k[0]],C=l.pointAt(w);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var A=k[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var M=-Math.atan2(k[1],k[0]);f[0]<c[0]&&(M=Math.PI+M),a.rotation=M}var $=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":$=-x,g="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":$=x,g="top";break;default:$=0,g="middle"}switch(a.__position){case"end":a.x=p[0]*_+f[0],a.y=p[1]*x+f[1],m=p[0]>.8?"left":p[0]<-.8?"right":"center",g=p[1]>.8?"top":p[1]<-.8?"bottom":"middle";break;case"start":a.x=-p[0]*_+c[0],a.y=-p[1]*x+c[1],m=p[0]>.8?"right":p[0]<-.8?"left":"center",g=p[1]>.8?"bottom":p[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=_*A+c[0],a.y=c[1]+$,m=k[0]<0?"right":"left",a.originX=-_*A,a.originY=-$;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=C[0],a.y=C[1]+$,m="center",a.originY=-$;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-_*A+f[0],a.y=f[1]+$,m=k[0]>=0?"right":"left",a.originX=_*A,a.originY=-$;break}a.scaleX=a.scaleY=s,a.setStyle({verticalAlign:a.__verticalAlign||g,align:a.__align||m})}},e}(kt),sO=function(){function t(e){this.group=new kt,this._LineCtor=e||aO}return t.prototype.updateData=function(e){var n=this;this._progressiveEls=null;var r=this,i=r.group,a=r._lineData;r._lineData=e,a||i.removeAll();var s=tz(e);e.diff(a).add(function(o){n._doAdd(e,o,s)}).update(function(o,l){n._doUpdate(a,e,l,o,s)}).remove(function(o){i.remove(a.getItemGraphicEl(o))}).execute()},t.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(n,r){n.updateLayout(e,r)},this)},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=tz(e),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,n){this._progressiveEls=[];function r(o){!o.isGroup&&!JHe(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var a=n.getItemLayout(i);if(D3(a)){var s=new this._LineCtor(n,i,this._seriesScope);s.traverse(r),this.group.add(s),n.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(e){Gc(this._progressiveEls||this.group,e)},t.prototype._doAdd=function(e,n,r){var i=e.getItemLayout(n);if(D3(i)){var a=new this._LineCtor(e,n,r);e.setItemGraphicEl(n,a),this.group.add(a)}},t.prototype._doUpdate=function(e,n,r,i,a){var s=e.getItemGraphicEl(r);if(!D3(n.getItemLayout(i))){this.group.remove(s);return}s?s.updateData(n,i,a):s=new this._LineCtor(n,i,a),n.setItemGraphicEl(i,s),this.group.add(s)},t}();function JHe(t){return t.animators&&t.animators.length>0}function tz(t){var e=t.hostModel,n=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:ui(e)}}function nz(t){return isNaN(t[0])||isNaN(t[1])}function D3(t){return t&&!nz(t[0])&&!nz(t[1])}var R3=[],P3=[],I3=[],Zh=ci,O3=Ap,rz=Math.abs;function iz(t,e,n){for(var r=t[0],i=t[1],a=t[2],s=1/0,o,l=n*n,d=.1,c=.1;c<=.9;c+=.1){R3[0]=Zh(r[0],i[0],a[0],c),R3[1]=Zh(r[1],i[1],a[1],c);var f=rz(O3(R3,e)-l);f<s&&(s=f,o=c)}for(var p=0;p<32;p++){var h=o+d;P3[0]=Zh(r[0],i[0],a[0],o),P3[1]=Zh(r[1],i[1],a[1],o),I3[0]=Zh(r[0],i[0],a[0],h),I3[1]=Zh(r[1],i[1],a[1],h);var f=O3(P3,e)-l;if(rz(f)<.01)break;var m=O3(I3,e)-l;d/=2,f<0?m>=0?o=o+d:o=o-d:m>=0?o=o-d:o=o+d}return o}function L3(t,e){var n=[],r=d1,i=[[],[],[]],a=[[],[]],s=[];e/=2,t.eachEdge(function(o,l){var d=o.getLayout(),c=o.getVisual("fromSymbol"),f=o.getVisual("toSymbol");d.__original||(d.__original=[Fu(d[0]),Fu(d[1])],d[2]&&d.__original.push(Fu(d[2])));var p=d.__original;if(d[2]!=null){if(ca(i[0],p[0]),ca(i[1],p[2]),ca(i[2],p[1]),c&&c!=="none"){var h=wy(o.node1),m=iz(i,p[0],h*e);r(i[0][0],i[1][0],i[2][0],m,n),i[0][0]=n[3],i[1][0]=n[4],r(i[0][1],i[1][1],i[2][1],m,n),i[0][1]=n[3],i[1][1]=n[4]}if(f&&f!=="none"){var h=wy(o.node2),m=iz(i,p[1],h*e);r(i[0][0],i[1][0],i[2][0],m,n),i[1][0]=n[1],i[2][0]=n[2],r(i[0][1],i[1][1],i[2][1],m,n),i[1][1]=n[1],i[2][1]=n[2]}ca(d[0],i[0]),ca(d[1],i[2]),ca(d[2],i[1])}else{if(ca(a[0],p[0]),ca(a[1],p[1]),np(s,a[1],a[0]),Ig(s,s),c&&c!=="none"){var h=wy(o.node1);yM(a[0],a[0],s,h*e)}if(f&&f!=="none"){var h=wy(o.node2);yM(a[1],a[1],s,-h*e)}ca(d[0],a[0]),ca(d[1],a[1])}})}function az(t){return t.type==="view"}var eqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){var i=new Rb,a=new sO,s=this.group;this._controller=new Vb(r.getZr()),this._controllerHost={target:s},s.add(i.group),s.add(a.group),this._symbolDraw=i,this._lineDraw=a,this._firstRender=!0},e.prototype.render=function(n,r,i){var a=this,s=n.coordinateSystem;this._model=n;var o=this._symbolDraw,l=this._lineDraw,d=this.group;if(az(s)){var c={x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY};this._firstRender?d.attr(c):yn(d,c,n)}L3(n.getGraph(),xy(n));var f=n.getData();o.updateData(f);var p=n.getEdgeData();l.updateData(p),this._updateNodeAndLinkScale(),this._updateController(n,r,i),clearTimeout(this._layoutTimeout);var h=n.forceLayout,m=n.get(["force","layoutAnimation"]);h&&this._startForceLayoutIteration(h,m);var g=n.get("layout");f.graph.eachNode(function(w){var k=w.dataIndex,S=w.getGraphicEl(),C=w.getModel();if(S){S.off("drag").off("dragend");var A=C.get("draggable");A&&S.on("drag",function($){switch(g){case"force":h.warmUp(),!a._layouting&&a._startForceLayoutIteration(h,m),h.setFixed(k),f.setItemLayout(k,[S.x,S.y]);break;case"circular":f.setItemLayout(k,[S.x,S.y]),w.setLayout({fixed:!0},!0),iO(n,"symbolSize",w,[$.offsetX,$.offsetY]),a.updateLayout(n);break;case"none":default:f.setItemLayout(k,[S.x,S.y]),rO(n.getGraph(),n),a.updateLayout(n);break}}).on("dragend",function(){h&&h.setUnfixed(k)}),S.setDraggable(A,!!C.get("cursor"));var M=C.get(["emphasis","focus"]);M==="adjacency"&&(Tt(S).focus=w.getAdjacentDataIndices())}}),f.graph.eachEdge(function(w){var k=w.getGraphicEl(),S=w.getModel().get(["emphasis","focus"]);k&&S==="adjacency"&&(Tt(k).focus={edge:[w.dataIndex],node:[w.node1.dataIndex,w.node2.dataIndex]})});var v=n.get("layout")==="circular"&&n.get(["circular","rotateLabel"]),_=f.getLayout("cx"),x=f.getLayout("cy");f.graph.eachNode(function(w){Kie(w,v,_,x)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(n,r){var i=this;(function a(){n.step(function(s){i.updateLayout(i._model),(i._layouting=!s)&&(r?i._layoutTimeout=setTimeout(a,16):a())})})()},e.prototype._updateController=function(n,r,i){var a=this,s=this._controller,o=this._controllerHost,l=this.group;if(s.setPointerChecker(function(d,c,f){var p=l.getBoundingRect();return p.applyTransform(l.transform),p.contain(c,f)&&!fA(d,i,n)}),!az(n.coordinateSystem)){s.disable();return}s.enable(n.get("roam")),o.zoomLimit=n.get("scaleLimit"),o.zoom=n.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(d){YI(o,d.dx,d.dy),i.dispatchAction({seriesId:n.id,type:"graphRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){KI(o,d.scale,d.originX,d.originY),i.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),a._updateNodeAndLinkScale(),L3(n.getGraph(),xy(n)),a._lineDraw.updateLayout(),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var n=this._model,r=n.getData(),i=xy(n);r.eachItemGraphicEl(function(a,s){a&&a.setSymbolScale(i)})},e.prototype.updateLayout=function(n){L3(n.getGraph(),xy(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(Pn);function Qh(t){return"_EC_"+t}var tqe=function(){function t(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(e,n){e=e==null?""+n:""+e;var r=this._nodesMap;if(!r[Qh(e)]){var i=new Vf(e,n);return i.hostGraph=this,this.nodes.push(i),r[Qh(e)]=i,i}},t.prototype.getNodeByIndex=function(e){var n=this.data.getRawIndex(e);return this.nodes[n]},t.prototype.getNodeById=function(e){return this._nodesMap[Qh(e)]},t.prototype.addEdge=function(e,n,r){var i=this._nodesMap,a=this._edgesMap;if(pn(e)&&(e=this.nodes[e]),pn(n)&&(n=this.nodes[n]),e instanceof Vf||(e=i[Qh(e)]),n instanceof Vf||(n=i[Qh(n)]),!(!e||!n)){var s=e.id+"-"+n.id,o=new Zie(e,n,r);return o.hostGraph=this,this._directed&&(e.outEdges.push(o),n.inEdges.push(o)),e.edges.push(o),e!==n&&n.edges.push(o),this.edges.push(o),a[s]=o,o}},t.prototype.getEdgeByIndex=function(e){var n=this.edgeData.getRawIndex(e);return this.edges[n]},t.prototype.getEdge=function(e,n){e instanceof Vf&&(e=e.id),n instanceof Vf&&(n=n.id);var r=this._edgesMap;return this._directed?r[e+"-"+n]:r[e+"-"+n]||r[n+"-"+e]},t.prototype.eachNode=function(e,n){for(var r=this.nodes,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&e.call(n,r[a],a)},t.prototype.eachEdge=function(e,n){for(var r=this.edges,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0&&e.call(n,r[a],a)},t.prototype.breadthFirstTraverse=function(e,n,r,i){if(n instanceof Vf||(n=this._nodesMap[Qh(n)]),!!n){for(var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges",s=0;s<this.nodes.length;s++)this.nodes[s].__visited=!1;if(!e.call(i,n,null))for(var o=[n];o.length;)for(var l=o.shift(),d=l[a],s=0;s<d.length;s++){var c=d[s],f=c.node1===l?c.node2:c.node1;if(!f.__visited){if(e.call(i,f,l))return;o.push(f),f.__visited=!0}}}},t.prototype.update=function(){for(var e=this.data,n=this.edgeData,r=this.nodes,i=this.edges,a=0,s=r.length;a<s;a++)r[a].dataIndex=-1;for(var a=0,s=e.count();a<s;a++)r[e.getRawIndex(a)].dataIndex=a;n.filterSelf(function(o){var l=i[n.getRawIndex(o)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,s=i.length;a<s;a++)i[a].dataIndex=-1;for(var a=0,s=n.count();a<s;a++)i[n.getRawIndex(a)].dataIndex=a},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,r=this.edges,i=0;i<n.length;i++)e.addNode(n[i].id,n[i].dataIndex);for(var i=0;i<r.length;i++){var a=r[i];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},t}(),Vf=function(){function t(e,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e==null?"":e,this.dataIndex=n==null?-1:n}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},n=0;n<this.edges.length;n++){var r=this.edges[n];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},t.prototype.getTrajectoryDataIndices=function(){for(var e=pt(),n=pt(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var a=[i.node1],s=[i.node2],o=0;o<a.length;){var l=a[o];o++,n.set(l.dataIndex,!0);for(var d=0;d<l.inEdges.length;d++)e.set(l.inEdges[d].dataIndex,!0),a.push(l.inEdges[d].node1)}for(o=0;o<s.length;){var c=s[o];o++,n.set(c.dataIndex,!0);for(var d=0;d<c.outEdges.length;d++)e.set(c.outEdges[d].dataIndex,!0),s.push(c.outEdges[d].node2)}}}return{edge:e.keys(),node:n.keys()}},t}(),Zie=function(){function t(e,n,r){this.dataIndex=-1,this.node1=e,this.node2=n,this.dataIndex=r==null?-1:r}return t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var e=pt(),n=pt();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],a=0;a<r.length;){var s=r[a];a++,n.set(s.dataIndex,!0);for(var o=0;o<s.inEdges.length;o++)e.set(s.inEdges[o].dataIndex,!0),r.push(s.inEdges[o].node1)}for(a=0;a<i.length;){var l=i[a];a++,n.set(l.dataIndex,!0);for(var o=0;o<l.outEdges.length;o++)e.set(l.outEdges[o].dataIndex,!0),i.push(l.outEdges[o].node2)}return{edge:e.keys(),node:n.keys()}},t}();function Qie(t,e){return{getValue:function(n){var r=this[t][e];return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,r)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,r){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}Hr(Vf,Qie("hostGraph","data"));Hr(Zie,Qie("hostGraph","edgeData"));function Jie(t,e,n,r,i){for(var a=new tqe(r),s=0;s<t.length;s++)a.addNode(gi(t[s].id,t[s].name,s),s);for(var o=[],l=[],d=0,s=0;s<e.length;s++){var c=e[s],f=c.source,p=c.target;a.addEdge(f,p,d)&&(l.push(c),o.push(gi(Yr(c.id,null),f+" > "+p)),d++)}var h=n.get("coordinateSystem"),m;if(h==="cartesian2d"||h==="polar")m=md(t,n);else{var g=Tb.get(h),v=g?g.dimensions||[]:[];Yt(v,"value")<0&&v.concat(["value"]);var _=Mb(t,{coordDimensions:v,encodeDefine:n.getEncode()}).dimensions;m=new ba(_,n),m.initData(t)}var x=new ba(["value"],n);return x.initData(l,o),i&&i(m,x),Iie({mainData:m,struct:a,structAttr:"graph",datas:{node:m,edge:x},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var nqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new Lb(i,i),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},e.prototype.mergeOption=function(n){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(n){t.prototype.mergeDefaultAndTheme.apply(this,arguments),Gp(n,"edgeLabel",["show"])},e.prototype.getInitialData=function(n,r){var i=n.edges||n.links||[],a=n.data||n.nodes||[],s=this;if(a&&i){zHe(this);var o=Jie(a,i,this,!0,l);return oe(o.edges,function(d){UHe(d.node1,d.node2,this,d.dataIndex)},this),o.data}function l(d,c){d.wrapMethod("getItemModel",function(m){var g=s._categoriesModels,v=m.getShallow("category"),_=g[v];return _&&(_.parentModel=m.parentModel,m.parentModel=_),m});var f=An.prototype.getModel;function p(m,g){var v=f.call(this,m,g);return v.resolveParentPath=h,v}c.wrapMethod("getItemModel",function(m){return m.resolveParentPath=h,m.getModel=p,m});function h(m){if(m&&(m[0]==="label"||m[1]==="label")){var g=m.slice();return m[0]==="label"?g[0]="edgeLabel":m[1]==="label"&&(g[1]="edgeLabel"),g}return m}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(n,r,i){if(i==="edge"){var a=this.getData(),s=this.getDataParams(n,i),o=a.graph.getEdgeByIndex(n),l=a.getName(o.node1.dataIndex),d=a.getName(o.node2.dataIndex),c=[];return l!=null&&c.push(l),d!=null&&c.push(d),di("nameValue",{name:c.join(" > "),value:s.value,noValue:s.value==null})}var f=Cne({series:this,dataIndex:n,multipleSeries:r});return f},e.prototype._updateCategoriesData=function(){var n=ze(this.option.categories||[],function(i){return i.value!=null?i:Oe({value:0},i)}),r=new ba(["value"],this);r.initData(n),this._categoriesData=r,this._categoriesModels=r.mapArray(function(i){return r.getItemModel(i)})},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Zn),rqe={type:"graphRoam",event:"graphRoam",update:"none"};function iqe(t){t.registerChartView(eqe),t.registerSeriesModel(nqe),t.registerProcessor(VHe),t.registerVisual(NHe),t.registerVisual(jHe),t.registerLayout(HHe),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,WHe),t.registerLayout(YHe),t.registerCoordinateSystem("graphView",{dimensions:Nb.dimensions,create:XHe}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Or),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Or),t.registerAction(rqe,function(e,n,r){n.eachComponent({mainType:"series",query:e},function(i){var a=i.coordinateSystem,s=ZI(a,e,void 0,r);i.setCenter&&i.setCenter(s.center),i.setZoom&&i.setZoom(s.zoom)})})}var aqe=function(){function t(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return t}(),sqe=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new aqe},e.prototype.buildPath=function(n,r){var i=Math.cos,a=Math.sin,s=r.r,o=r.width,l=r.angle,d=r.x-i(l)*o*(o>=s/3?1:2),c=r.y-a(l)*o*(o>=s/3?1:2);l=r.angle-Math.PI/2,n.moveTo(d,c),n.lineTo(r.x+i(l)*o,r.y+a(l)*o),n.lineTo(r.x+i(r.angle)*s,r.y+a(r.angle)*s),n.lineTo(r.x-i(l)*o,r.y-a(l)*o),n.lineTo(d,c)},e}(Zt);function oqe(t,e){var n=t.get("center"),r=e.getWidth(),i=e.getHeight(),a=Math.min(r,i),s=Qe(n[0],e.getWidth()),o=Qe(n[1],e.getHeight()),l=Qe(t.get("radius"),a/2);return{cx:s,cy:o,r:l}}function kx(t,e){var n=t==null?"":t+"";return e&&(it(e)?n=e.replace("{value}",n):gt(e)&&(n=e(t))),n}var lqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){this.group.removeAll();var a=n.get(["axisLine","lineStyle","color"]),s=oqe(n,i);this._renderMain(n,r,i,a,s),this._data=n.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(n,r,i,a,s){var o=this.group,l=n.get("clockwise"),d=-n.get("startAngle")/180*Math.PI,c=-n.get("endAngle")/180*Math.PI,f=n.getModel("axisLine"),p=f.get("roundCap"),h=p?Uk:Ma,m=f.get("show"),g=f.getModel("lineStyle"),v=g.get("width"),_=[d,c];eI(_,!l),d=_[0],c=_[1];for(var x=c-d,w=d,k=[],S=0;m&&S<a.length;S++){var C=Math.min(Math.max(a[S][0],0),1);c=d+x*C;var A=new h({shape:{startAngle:w,endAngle:c,cx:s.cx,cy:s.cy,clockwise:l,r0:s.r-v,r:s.r},silent:!0});A.setStyle({fill:a[S][1]}),A.setStyle(g.getLineStyle(["color","width"])),k.push(A),w=c}k.reverse(),oe(k,function($){return o.add($)});var M=function($){if($<=0)return a[0][1];var R;for(R=0;R<a.length;R++)if(a[R][0]>=$&&(R===0?0:a[R-1][0])<$)return a[R][1];return a[R-1][1]};this._renderTicks(n,r,i,M,s,d,c,l,v),this._renderTitleAndDetail(n,r,i,M,s),this._renderAnchor(n,s),this._renderPointer(n,r,i,M,s,d,c,l,v)},e.prototype._renderTicks=function(n,r,i,a,s,o,l,d,c){for(var f=this.group,p=s.cx,h=s.cy,m=s.r,g=+n.get("min"),v=+n.get("max"),_=n.getModel("splitLine"),x=n.getModel("axisTick"),w=n.getModel("axisLabel"),k=n.get("splitNumber"),S=x.get("splitNumber"),C=Qe(_.get("length"),m),A=Qe(x.get("length"),m),M=o,$=(l-o)/k,R=$/S,I=_.getModel("lineStyle").getLineStyle(),B=x.getModel("lineStyle").getLineStyle(),j=_.get("distance"),z,F,q=0;q<=k;q++){if(z=Math.cos(M),F=Math.sin(M),_.get("show")){var N=j?j+c:c,O=new ii({shape:{x1:z*(m-N)+p,y1:F*(m-N)+h,x2:z*(m-C-N)+p,y2:F*(m-C-N)+h},style:I,silent:!0});I.stroke==="auto"&&O.setStyle({stroke:a(q/k)}),f.add(O)}if(w.get("show")){var N=w.get("distance")+j,V=kx(Ar(q/k*(v-g)+g),w.get("formatter")),L=a(q/k),U=z*(m-C-N)+p,G=F*(m-C-N)+h,X=w.get("rotate"),re=0;X==="radial"?(re=-M+2*Math.PI,re>Math.PI/2&&(re+=Math.PI)):X==="tangential"?re=-M-Math.PI/2:pn(X)&&(re=X*Math.PI/180),re===0?f.add(new un({style:Kn(w,{text:V,x:U,y:G,verticalAlign:F<-.8?"top":F>.8?"bottom":"middle",align:z<-.4?"left":z>.4?"right":"center"},{inheritColor:L}),silent:!0})):f.add(new un({style:Kn(w,{text:V,x:U,y:G,verticalAlign:"middle",align:"center"},{inheritColor:L}),silent:!0,originX:U,originY:G,rotation:re}))}if(x.get("show")&&q!==k){var N=x.get("distance");N=N?N+c:c;for(var ee=0;ee<=S;ee++){z=Math.cos(M),F=Math.sin(M);var de=new ii({shape:{x1:z*(m-N)+p,y1:F*(m-N)+h,x2:z*(m-A-N)+p,y2:F*(m-A-N)+h},silent:!0,style:B});B.stroke==="auto"&&de.setStyle({stroke:a((q+ee/S)/k)}),f.add(de),M+=R}M-=R}else M+=$}},e.prototype._renderPointer=function(n,r,i,a,s,o,l,d,c){var f=this.group,p=this._data,h=this._progressEls,m=[],g=n.get(["pointer","show"]),v=n.getModel("progress"),_=v.get("show"),x=n.getData(),w=x.mapDimension("value"),k=+n.get("min"),S=+n.get("max"),C=[k,S],A=[o,l];function M(R,I){var B=x.getItemModel(R),j=B.getModel("pointer"),z=Qe(j.get("width"),s.r),F=Qe(j.get("length"),s.r),q=n.get(["pointer","icon"]),N=j.get("offsetCenter"),O=Qe(N[0],s.r),V=Qe(N[1],s.r),L=j.get("keepAspect"),U;return q?U=Ur(q,O-z/2,V-F,z,F,null,L):U=new sqe({shape:{angle:-Math.PI/2,width:z,r:F,x:O,y:V}}),U.rotation=-(I+Math.PI/2),U.x=s.cx,U.y=s.cy,U}function $(R,I){var B=v.get("roundCap"),j=B?Uk:Ma,z=v.get("overlap"),F=z?v.get("width"):c/x.count(),q=z?s.r-F:s.r-(R+1)*F,N=z?s.r:s.r-R*F,O=new j({shape:{startAngle:o,endAngle:I,cx:s.cx,cy:s.cy,clockwise:d,r0:q,r:N}});return z&&(O.z2=Cn(x.get(w,R),[k,S],[100,0],!0)),O}(_||g)&&(x.diff(p).add(function(R){var I=x.get(w,R);if(g){var B=M(R,o);sr(B,{rotation:-((isNaN(+I)?A[0]:Cn(I,C,A,!0))+Math.PI/2)},n),f.add(B),x.setItemGraphicEl(R,B)}if(_){var j=$(R,o),z=v.get("clip");sr(j,{shape:{endAngle:Cn(I,C,A,z)}},n),f.add(j),HM(n.seriesIndex,x.dataType,R,j),m[R]=j}}).update(function(R,I){var B=x.get(w,R);if(g){var j=p.getItemGraphicEl(I),z=j?j.rotation:o,F=M(R,z);F.rotation=z,yn(F,{rotation:-((isNaN(+B)?A[0]:Cn(B,C,A,!0))+Math.PI/2)},n),f.add(F),x.setItemGraphicEl(R,F)}if(_){var q=h[I],N=q?q.shape.endAngle:o,O=$(R,N),V=v.get("clip");yn(O,{shape:{endAngle:Cn(B,C,A,V)}},n),f.add(O),HM(n.seriesIndex,x.dataType,R,O),m[R]=O}}).execute(),x.each(function(R){var I=x.getItemModel(R),B=I.getModel("emphasis"),j=B.get("focus"),z=B.get("blurScope"),F=B.get("disabled");if(g){var q=x.getItemGraphicEl(R),N=x.getItemVisual(R,"style"),O=N.fill;if(q instanceof xi){var V=q.style;q.useStyle(Oe({image:V.image,x:V.x,y:V.y,width:V.width,height:V.height},N))}else q.useStyle(N),q.type!=="pointer"&&q.setColor(O);q.setStyle(I.getModel(["pointer","itemStyle"]).getItemStyle()),q.style.fill==="auto"&&q.setStyle("fill",a(Cn(x.get(w,R),C,[0,1],!0))),q.z2EmphasisLift=0,Oi(q,I),_r(q,j,z,F)}if(_){var L=m[R];L.useStyle(x.getItemVisual(R,"style")),L.setStyle(I.getModel(["progress","itemStyle"]).getItemStyle()),L.z2EmphasisLift=0,Oi(L,I),_r(L,j,z,F)}}),this._progressEls=m)},e.prototype._renderAnchor=function(n,r){var i=n.getModel("anchor"),a=i.get("show");if(a){var s=i.get("size"),o=i.get("icon"),l=i.get("offsetCenter"),d=i.get("keepAspect"),c=Ur(o,r.cx-s/2+Qe(l[0],r.r),r.cy-s/2+Qe(l[1],r.r),s,s,null,d);c.z2=i.get("showAbove")?1:0,c.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(c)}},e.prototype._renderTitleAndDetail=function(n,r,i,a,s){var o=this,l=n.getData(),d=l.mapDimension("value"),c=+n.get("min"),f=+n.get("max"),p=new kt,h=[],m=[],g=n.isAnimationEnabled(),v=n.get(["pointer","showAbove"]);l.diff(this._data).add(function(_){h[_]=new un({silent:!0}),m[_]=new un({silent:!0})}).update(function(_,x){h[_]=o._titleEls[x],m[_]=o._detailEls[x]}).execute(),l.each(function(_){var x=l.getItemModel(_),w=l.get(d,_),k=new kt,S=a(Cn(w,[c,f],[0,1],!0)),C=x.getModel("title");if(C.get("show")){var A=C.get("offsetCenter"),M=s.cx+Qe(A[0],s.r),$=s.cy+Qe(A[1],s.r),R=h[_];R.attr({z2:v?0:2,style:Kn(C,{x:M,y:$,text:l.getName(_),align:"center",verticalAlign:"middle"},{inheritColor:S})}),k.add(R)}var I=x.getModel("detail");if(I.get("show")){var B=I.get("offsetCenter"),j=s.cx+Qe(B[0],s.r),z=s.cy+Qe(B[1],s.r),F=Qe(I.get("width"),s.r),q=Qe(I.get("height"),s.r),N=n.get(["progress","show"])?l.getItemVisual(_,"style").fill:S,R=m[_],O=I.get("formatter");R.attr({z2:v?0:2,style:Kn(I,{x:j,y:z,text:kx(w,O),width:isNaN(F)?null:F,height:isNaN(q)?null:q,align:"center",verticalAlign:"middle"},{inheritColor:N})}),Mte(R,{normal:I},w,function(L){return kx(L,O)}),g&&$te(R,_,l,n,{getFormattedLabel:function(L,U,G,X,re,ee){return kx(ee?ee.interpolatedValue:w,O)}}),k.add(R)}p.add(k)}),this.group.add(p),this._titleEls=h,this._detailEls=m},e.type="gauge",e}(Pn),uqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="itemStyle",n}return e.prototype.getInitialData=function(n,r){return Yg(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(Zn);function dqe(t){t.registerChartView(lqe),t.registerSeriesModel(uqe)}var cqe=["itemStyle","opacity"],fqe=function(t){Ce(e,t);function e(n,r){var i=t.call(this)||this,a=i,s=new Da,o=new un;return a.setTextContent(o),i.setTextGuideLine(s),i.updateData(n,r,!0),i}return e.prototype.updateData=function(n,r,i){var a=this,s=n.hostModel,o=n.getItemModel(r),l=n.getItemLayout(r),d=o.getModel("emphasis"),c=o.get(cqe);c=c==null?1:c,i||Vo(a),a.useStyle(n.getItemVisual(r,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,sr(a,{style:{opacity:c}},s,r)):yn(a,{style:{opacity:c},shape:{points:l.points}},s,r),Oi(a,o),this._updateLabel(n,r),_r(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(n,r){var i=this,a=this.getTextGuideLine(),s=i.getTextContent(),o=n.hostModel,l=n.getItemModel(r),d=n.getItemLayout(r),c=d.label,f=n.getItemVisual(r,"style"),p=f.fill;Li(s,ui(l),{labelFetcher:n.hostModel,labelDataIndex:r,defaultOpacity:f.opacity,defaultText:n.getName(r)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}}),i.setTextConfig({local:!0,inside:!!c.inside,insideStroke:p,outsideFill:p});var h=c.linePoints;a.setShape({points:h}),i.textGuideLineConfig={anchor:h?new Bt(h[0][0],h[0][1]):null},yn(s,{style:{x:c.x,y:c.y}},o,r),s.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),VI(i,NI(l),{stroke:p})},e}($a),pqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,i){var a=n.getData(),s=this._data,o=this.group;a.diff(s).add(function(l){var d=new fqe(a,l);a.setItemGraphicEl(l,d),o.add(d)}).update(function(l,d){var c=s.getItemGraphicEl(d);c.updateData(a,l),o.add(c),a.setItemGraphicEl(l,c)}).remove(function(l){var d=s.getItemGraphicEl(l);v1(d,n,l)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(Pn),hqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Lb(ut(this.getData,this),ut(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.getInitialData=function(n,r){return Yg(this,{coordDimensions:["value"],encodeDefaulter:Pt(vI,this)})},e.prototype._defaultLabelLine=function(n){Gp(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},e.prototype.getDataParams=function(n){var r=this.getData(),i=t.prototype.getDataParams.call(this,n),a=r.mapDimension("value"),s=r.getSum(a);return i.percent=s?+(r.get(a,n)/s*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Zn);function mqe(t,e){return Qr(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function gqe(t,e){for(var n=t.mapDimension("value"),r=t.mapArray(n,function(l){return l}),i=[],a=e==="ascending",s=0,o=t.count();s<o;s++)i[s]=s;return gt(e)?i.sort(e):e!=="none"&&i.sort(function(l,d){return a?r[l]-r[d]:r[d]-r[l]}),i}function vqe(t){var e=t.hostModel,n=e.get("orient");t.each(function(r){var i=t.getItemModel(r),a=i.getModel("label"),s=a.get("position"),o=i.getModel("labelLine"),l=t.getItemLayout(r),d=l.points,c=s==="inner"||s==="inside"||s==="center"||s==="insideLeft"||s==="insideRight",f,p,h,m;if(c)s==="insideLeft"?(p=(d[0][0]+d[3][0])/2+5,h=(d[0][1]+d[3][1])/2,f="left"):s==="insideRight"?(p=(d[1][0]+d[2][0])/2-5,h=(d[1][1]+d[2][1])/2,f="right"):(p=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,h=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,f="center"),m=[[p,h],[p,h]];else{var g=void 0,v=void 0,_=void 0,x=void 0,w=o.get("length");s==="left"?(g=(d[3][0]+d[0][0])/2,v=(d[3][1]+d[0][1])/2,_=g-w,p=_-5,f="right"):s==="right"?(g=(d[1][0]+d[2][0])/2,v=(d[1][1]+d[2][1])/2,_=g+w,p=_+5,f="left"):s==="top"?(g=(d[3][0]+d[0][0])/2,v=(d[3][1]+d[0][1])/2,x=v-w,h=x-5,f="center"):s==="bottom"?(g=(d[1][0]+d[2][0])/2,v=(d[1][1]+d[2][1])/2,x=v+w,h=x+5,f="center"):s==="rightTop"?(g=n==="horizontal"?d[3][0]:d[1][0],v=n==="horizontal"?d[3][1]:d[1][1],n==="horizontal"?(x=v-w,h=x-5,f="center"):(_=g+w,p=_+5,f="top")):s==="rightBottom"?(g=d[2][0],v=d[2][1],n==="horizontal"?(x=v+w,h=x+5,f="center"):(_=g+w,p=_+5,f="bottom")):s==="leftTop"?(g=d[0][0],v=n==="horizontal"?d[0][1]:d[1][1],n==="horizontal"?(x=v-w,h=x-5,f="center"):(_=g-w,p=_-5,f="right")):s==="leftBottom"?(g=n==="horizontal"?d[1][0]:d[3][0],v=n==="horizontal"?d[1][1]:d[2][1],n==="horizontal"?(x=v+w,h=x+5,f="center"):(_=g-w,p=_-5,f="right")):(g=(d[1][0]+d[2][0])/2,v=(d[1][1]+d[2][1])/2,n==="horizontal"?(x=v+w,h=x+5,f="center"):(_=g+w,p=_+5,f="left")),n==="horizontal"?(_=g,p=_):(x=v,h=x),m=[[g,v],[_,x]]}l.label={linePoints:m,x:p,y:h,verticalAlign:"middle",textAlign:f,inside:c}})}function yqe(t,e){t.eachSeriesByType("funnel",function(n){var r=n.getData(),i=r.mapDimension("value"),a=n.get("sort"),s=mqe(n,e),o=n.get("orient"),l=s.width,d=s.height,c=gqe(r,a),f=s.x,p=s.y,h=o==="horizontal"?[Qe(n.get("minSize"),d),Qe(n.get("maxSize"),d)]:[Qe(n.get("minSize"),l),Qe(n.get("maxSize"),l)],m=r.getDataExtent(i),g=n.get("min"),v=n.get("max");g==null&&(g=Math.min(m[0],0)),v==null&&(v=m[1]);var _=n.get("funnelAlign"),x=n.get("gap"),w=o==="horizontal"?l:d,k=(w-x*(r.count()-1))/r.count(),S=function(z,F){if(o==="horizontal"){var q=r.get(i,z)||0,N=Cn(q,[g,v],h,!0),O=void 0;switch(_){case"top":O=p;break;case"center":O=p+(d-N)/2;break;case"bottom":O=p+(d-N);break}return[[F,O],[F,O+N]]}var V=r.get(i,z)||0,L=Cn(V,[g,v],h,!0),U;switch(_){case"left":U=f;break;case"center":U=f+(l-L)/2;break;case"right":U=f+l-L;break}return[[U,F],[U+L,F]]};a==="ascending"&&(k=-k,x=-x,o==="horizontal"?f+=l:p+=d,c=c.reverse());for(var C=0;C<c.length;C++){var A=c[C],M=c[C+1],$=r.getItemModel(A);if(o==="horizontal"){var R=$.get(["itemStyle","width"]);R==null?R=k:(R=Qe(R,l),a==="ascending"&&(R=-R));var I=S(A,f),B=S(M,f+R);f+=R+x,r.setItemLayout(A,{points:I.concat(B.slice().reverse())})}else{var j=$.get(["itemStyle","height"]);j==null?j=k:(j=Qe(j,d),a==="ascending"&&(j=-j));var I=S(A,p),B=S(M,p+j);p+=j+x,r.setItemLayout(A,{points:I.concat(B.slice().reverse())})}}vqe(r)})}function bqe(t){t.registerChartView(pqe),t.registerSeriesModel(hqe),t.registerLayout(yqe),t.registerProcessor(Ob("funnel"))}var _qe=.3,xqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._dataGroup=new kt,n._initialized=!1,n}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(n,r,i,a){this._progressiveEls=null;var s=this._dataGroup,o=n.getData(),l=this._data,d=n.coordinateSystem,c=d.dimensions,f=oz(n);o.diff(l).add(p).update(h).remove(m).execute();function p(v){var _=sz(o,s,v,c,d);V3(_,o,v,f)}function h(v,_){var x=l.getItemGraphicEl(_),w=eae(o,v,c,d);o.setItemGraphicEl(v,x),yn(x,{shape:{points:w}},n,v),Vo(x),V3(x,o,v,f)}function m(v){var _=l.getItemGraphicEl(v);s.remove(_)}if(!this._initialized){this._initialized=!0;var g=wqe(d,n,function(){setTimeout(function(){s.removeClipPath()})});s.setClipPath(g)}this._data=o},e.prototype.incrementalPrepareRender=function(n,r,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(n,r,i){for(var a=r.getData(),s=r.coordinateSystem,o=s.dimensions,l=oz(r),d=this._progressiveEls=[],c=n.start;c<n.end;c++){var f=sz(a,this._dataGroup,c,o,s);f.incremental=!0,V3(f,a,c,l),d.push(f)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(Pn);function wqe(t,e,n){var r=t.model,i=t.getRect(),a=new sn({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),s=r.get("layout")==="horizontal"?"width":"height";return a.setShape(s,0),sr(a,{shape:{width:i.width,height:i.height}},e,n),a}function eae(t,e,n,r){for(var i=[],a=0;a<n.length;a++){var s=n[a],o=t.get(t.mapDimension(s),e);kqe(o,r.getAxis(s).type)||i.push(r.dataToPoint(o,s))}return i}function sz(t,e,n,r,i){var a=eae(t,n,r,i),s=new Da({shape:{points:a},z2:10});return e.add(s),t.setItemGraphicEl(n,s),s}function oz(t){var e=t.get("smooth",!0);return e===!0&&(e=_qe),e=td(e),l1(e)&&(e=0),{smooth:e}}function V3(t,e,n,r){t.useStyle(e.getItemVisual(n,"style")),t.style.fill=null,t.setShape("smooth",r.smooth);var i=e.getItemModel(n),a=i.getModel("emphasis");Oi(t,i,"lineStyle"),_r(t,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function kqe(t,e){return e==="category"?t==null:t==null||isNaN(t)}var Sqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return e.prototype.getInitialData=function(n,r){return md(null,this,{useEncodeDefaulter:ut(Cqe,null,this)})},e.prototype.getRawIndicesByActiveState=function(n){var r=this.coordinateSystem,i=this.getData(),a=[];return r.eachActiveState(i,function(s,o){n===s&&a.push(i.getRawIndex(o))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Zn);function Cqe(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var n={};return oe(e.dimensions,function(r){var i=Aqe(r);n[r]=i}),n}}function Aqe(t){return+t.replace("dim","")}var Tqe=["lineStyle","opacity"],Eqe={seriesType:"parallel",reset:function(t,e){var n=t.coordinateSystem,r={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(i,a){n.eachActiveState(a,function(s,o){var l=r[s];if(s==="normal"&&a.hasItemOption){var d=a.getItemModel(o).get(Tqe,!0);d!=null&&(l=d)}var c=a.ensureUniqueItemVisual(o,"style");c.opacity=l},i.start,i.end)}}}};function Mqe(t){$qe(t),Dqe(t)}function $qe(t){if(!t.parallel){var e=!1;oe(t.series,function(n){n&&n.type==="parallel"&&(e=!0)}),e&&(t.parallel=[{}])}}function Dqe(t){var e=Dn(t.parallelAxis);oe(e,function(n){if(_t(n)){var r=n.parallelIndex||0,i=Dn(t.parallel)[r];i&&i.parallelAxisDefault&&jt(n,i.parallelAxisDefault,!1)}})}var Rqe=5,Pqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){this._model=n,this._api=i,this._handlers||(this._handlers={},oe(Iqe,function(a,s){i.getZr().on(s,this._handlers[s]=ut(a,this))},this)),qg(this,"_throttledDispatchExpand",n.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(n,r){x1(this,"_throttledDispatchExpand"),oe(this._handlers,function(i,a){r.getZr().off(a,i)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(n){this._dispatchExpand(n)},e.prototype._dispatchExpand=function(n){n&&this._api.dispatchAction(Oe({type:"parallelAxisExpand"},n))},e.type="parallel",e}(hr),Iqe={mousedown:function(t){N3(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(N3(this,"click")&&e){var n=[t.offsetX,t.offsetY],r=Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2);if(r>Rqe)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!(this._mouseDownPoint||!N3(this,"mousemove"))){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),r=n.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:n.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function N3(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}var Oqe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(n){var r=this.option;n&&jt(r,n,!0),this._initDimensions()},e.prototype.contains=function(n,r){var i=n.get("parallelIndex");return i!=null&&r.getComponent("parallel",i)===this},e.prototype.setAxisExpand=function(n){oe(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){n.hasOwnProperty(r)&&(this.option[r]=n[r])},this)},e.prototype._initDimensions=function(){var n=this.dimensions=[],r=this.parallelAxisIndex=[],i=kn(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);oe(i,function(a){n.push("dim"+a.get("dim")),r.push(a.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(tn),Lqe=function(t){Ce(e,t);function e(n,r,i,a,s){var o=t.call(this,n,r,i)||this;return o.type=a||"value",o.axisIndex=s,o}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(Fo);function bh(t,e,n,r,i,a){t=t||0;var s=n[1]-n[0];if(i!=null&&(i=Jh(i,[0,s])),a!=null&&(a=Math.max(a,i!=null?i:0)),r==="all"){var o=Math.abs(e[1]-e[0]);o=Jh(o,[0,s]),i=a=Jh(o,[i,a]),r=0}e[0]=Jh(e[0],n),e[1]=Jh(e[1],n);var l=j3(e,r);e[r]+=t;var d=i||0,c=n.slice();l.sign<0?c[0]+=d:c[1]-=d,e[r]=Jh(e[r],c);var f;return f=j3(e,r),i!=null&&(f.sign!==l.sign||f.span<i)&&(e[1-r]=e[r]+l.sign*i),f=j3(e,r),a!=null&&f.span>a&&(e[1-r]=e[r]+f.sign*a),e}function j3(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function Jh(t,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,t))}var F3=oe,tae=Math.min,nae=Math.max,lz=Math.floor,Vqe=Math.ceil,uz=Ar,Nqe=Math.PI,jqe=function(){function t(e,n,r){this.type="parallel",this._axesMap=pt(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,n,r)}return t.prototype._init=function(e,n,r){var i=e.dimensions,a=e.parallelAxisIndex;F3(i,function(s,o){var l=a[o],d=n.getComponent("parallelAxis",l),c=this._axesMap.set(s,new Lqe(s,dA(d),[0,0],d.get("type"),l)),f=c.type==="category";c.onBand=f&&d.get("boundaryGap"),c.inverse=d.get("inverse"),d.axis=c,c.model=d,c.coordinateSystem=d.coordinateSystem=this},this)},t.prototype.update=function(e,n){this._updateAxesFromSeries(this._model,e)},t.prototype.containPoint=function(e){var n=this._makeLayoutInfo(),r=n.axisBase,i=n.layoutBase,a=n.pixelDimIndex,s=e[1-a],o=e[a];return s>=r&&s<=r+n.axisLength&&o>=i&&o<=i+n.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(e,n){n.eachSeries(function(r){if(e.contains(r,n)){var i=r.getData();F3(this.dimensions,function(a){var s=this._axesMap.get(a);s.scale.unionExtentFromData(i,i.mapDimension(a)),yg(s.scale,s.model)},this)}},this)},t.prototype.resize=function(e,n){this._rect=Qr(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var e=this._model,n=this._rect,r=["x","y"],i=["width","height"],a=e.get("layout"),s=a==="horizontal"?0:1,o=n[i[s]],l=[0,o],d=this.dimensions.length,c=Sx(e.get("axisExpandWidth"),l),f=Sx(e.get("axisExpandCount")||0,[0,d]),p=e.get("axisExpandable")&&d>3&&d>f&&f>1&&c>0&&o>0,h=e.get("axisExpandWindow"),m;if(h)m=Sx(h[1]-h[0],l),h[1]=h[0]+m;else{m=Sx(c*(f-1),l);var g=e.get("axisExpandCenter")||lz(d/2);h=[c*g-m/2],h[1]=h[0]+m}var v=(o-m)/(d-f);v<3&&(v=0);var _=[lz(uz(h[0]/c,1))+1,Vqe(uz(h[1]/c,1))-1],x=v/c*h[0];return{layout:a,pixelDimIndex:s,layoutBase:n[r[s]],layoutLength:o,axisBase:n[r[1-s]],axisLength:n[i[1-s]],axisExpandable:p,axisExpandWidth:c,axisCollapseWidth:v,axisExpandWindow:h,axisCount:d,winInnerIndices:_,axisExpandWindow0Pos:x}},t.prototype._layoutAxes=function(){var e=this._rect,n=this._axesMap,r=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;n.each(function(s){var o=[0,i.axisLength],l=s.inverse?1:0;s.setExtent(o[l],o[1-l])}),F3(r,function(s,o){var l=(i.axisExpandable?Bqe:Fqe)(o,i),d={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},c={horizontal:Nqe/2,vertical:0},f=[d[a].x+e.x,d[a].y+e.y],p=c[a],h=ds();fh(h,h,p),Nl(h,h,f),this._axesLayout[s]={position:f,rotation:p,transform:h,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(e){return this._axesMap.get(e)},t.prototype.dataToPoint=function(e,n){return this.axisCoordToPoint(this._axesMap.get(n).dataToCoord(e),n)},t.prototype.eachActiveState=function(e,n,r,i){r==null&&(r=0),i==null&&(i=e.count());var a=this._axesMap,s=this.dimensions,o=[],l=[];oe(s,function(v){o.push(e.mapDimension(v)),l.push(a.get(v).model)});for(var d=this.hasAxisBrushed(),c=r;c<i;c++){var f=void 0;if(!d)f="normal";else{f="active";for(var p=e.getValues(o,c),h=0,m=s.length;h<m;h++){var g=l[h].getActiveState(p[h]);if(g==="inactive"){f="inactive";break}}}n(f,c)}},t.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,n=this._axesMap,r=!1,i=0,a=e.length;i<a;i++)n.get(e[i]).model.getActiveState()!=="normal"&&(r=!0);return r},t.prototype.axisCoordToPoint=function(e,n){var r=this._axesLayout[n];return Ao([e,0],r.transform)},t.prototype.getAxisLayout=function(e){return xt(this._axesLayout[e])},t.prototype.getSlidedAxisExpandWindow=function(e){var n=this._makeLayoutInfo(),r=n.pixelDimIndex,i=n.axisExpandWindow.slice(),a=i[1]-i[0],s=[0,n.axisExpandWidth*(n.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var o=e[r]-n.layoutBase-n.axisExpandWindow0Pos,l,d="slide",c=n.axisCollapseWidth,f=this._model.get("axisExpandSlideTriggerArea"),p=f[0]!=null;if(c)p&&c&&o<a*f[0]?(d="jump",l=o-a*f[2]):p&&c&&o>a*(1-f[0])?(d="jump",l=o-a*(1-f[2])):(l=o-a*f[1])>=0&&(l=o-a*(1-f[1]))<=0&&(l=0),l*=n.axisExpandWidth/c,l?bh(l,i,s,"all"):d="none";else{var h=i[1]-i[0],m=s[1]*o/h;i=[nae(0,m-h/2)],i[1]=tae(s[1],i[0]+h),i[0]=i[1]-h}return{axisExpandWindow:i,behavior:d}},t}();function Sx(t,e){return tae(nae(t,e[0]),e[1])}function Fqe(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}}function Bqe(t,e){var n=e.layoutLength,r=e.axisExpandWidth,i=e.axisCount,a=e.axisCollapseWidth,s=e.winInnerIndices,o,l=a,d=!1,c;return t<s[0]?(o=t*a,c=a):t<=s[1]?(o=e.axisExpandWindow0Pos+t*r-e.axisExpandWindow[0],l=r,d=!0):(o=n-(i-1-t)*a,c=a),{position:o,axisNameAvailableWidth:l,axisLabelShow:d,nameTruncateMaxWidth:c}}function zqe(t,e){var n=[];return t.eachComponent("parallel",function(r,i){var a=new jqe(r,t,e);a.name="parallel_"+i,a.resize(r,e),r.coordinateSystem=a,a.model=r,n.push(a)}),t.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var i=r.getReferringComponents("parallel",Nr).models[0];r.coordinateSystem=i.coordinateSystem}}),n}var Uqe={create:zqe},I$=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.activeIntervals=[],n}return e.prototype.getAreaSelectStyle=function(){return Kp([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(n){var r=this.activeIntervals=xt(n);if(r)for(var i=r.length-1;i>=0;i--)Fs(r[i])},e.prototype.getActiveState=function(n){var r=this.activeIntervals;if(!r.length)return"normal";if(n==null||isNaN(+n))return"inactive";if(r.length===1){var i=r[0];if(i[0]<=n&&n<=i[1])return"active"}else for(var a=0,s=r.length;a<s;a++)if(r[a][0]<=n&&n<=r[a][1])return"active";return"inactive"},e}(tn);Hr(I$,$b);var Qp=!0,P1=Math.min,xg=Math.max,Hqe=Math.pow,qqe=1e4,Wqe=6,Gqe=6,dz="globalPan",Yqe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Kqe={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},cz={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Xqe=0,oO=function(t){Ce(e,t);function e(n){var r=t.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=n,r.group=new kt,r._uid="brushController_"+Xqe++,oe(rWe,function(i,a){this._handlers[a]=ut(i,this)},r),r}return e.prototype.enableBrush=function(n){return this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},e.prototype._doEnableBrush=function(n){var r=this._zr;this._enableGlobalPan||Fze(r,dz,this._uid),oe(this._handlers,function(i,a){r.on(a,i)}),this._brushType=n.brushType,this._brushOption=jt(xt(cz),n,!0)},e.prototype._doDisableBrush=function(){var n=this._zr;Bze(n,dz,this._uid),oe(this._handlers,function(r,i){n.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(n){if(n&&n.length){var r=this._panels={};oe(n,function(i){r[i.panelId]=xt(i)})}else this._panels=null;return this},e.prototype.mount=function(n){n=n||{},this._enableGlobalPan=n.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(n){n=ze(n,function(p){return jt(xt(cz),p,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],s=this,o=this._creatingCover;return new id(i,n,d,l).add(c).update(c).remove(f).execute(),this;function l(p,h){return(p.id!=null?p.id:r+h)+"-"+p.brushType}function d(p,h){return l(p.__brushOption,h)}function c(p,h){var m=n[p];if(h!=null&&i[h]===o)a[p]=i[h];else{var g=a[p]=h!=null?(i[h].__brushOption=m,i[h]):iae(s,rae(s,m));lO(s,g)}}function f(p){i[p]!==o&&s.group.remove(i[p])}},e.prototype.unmount=function(){return this.enableBrush(!1),O$(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(ao);function rae(t,e){var n=gA[e.brushType].createCover(t,e);return n.__brushOption=e,sae(n,e),t.group.add(n),n}function iae(t,e){var n=uO(e);return n.endCreating&&(n.endCreating(t,e),sae(e,e.__brushOption)),e}function aae(t,e){var n=e.__brushOption;uO(e).updateCoverShape(t,e,n.range,n)}function sae(t,e){var n=e.z;n==null&&(n=qqe),t.traverse(function(r){r.z=n,r.z2=n})}function lO(t,e){uO(e).updateCommon(t,e),aae(t,e)}function uO(t){return gA[t.__brushOption.brushType]}function dO(t,e,n){var r=t._panels;if(!r)return Qp;var i,a=t._transform;return oe(r,function(s){s.isTargetByCursor(e,n,a)&&(i=s)}),i}function oae(t,e){var n=t._panels;if(!n)return Qp;var r=e.__brushOption.panelId;return r!=null?n[r]:Qp}function O$(t){var e=t._covers,n=e.length;return oe(e,function(r){t.group.remove(r)},t),e.length=0,!!n}function Jp(t,e){var n=ze(t._covers,function(r){var i=r.__brushOption,a=xt(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Zqe(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],r=e[0],i=n[0]-r[0],a=n[1]-r[1],s=Hqe(i*i+a*a,.5);return s>Wqe}function lae(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function uae(t,e,n,r){var i=new kt;return i.add(new sn({name:"main",style:cO(n),silent:!0,draggable:!0,cursor:"move",drift:Pt(fz,t,e,i,["n","s","w","e"]),ondragend:Pt(Jp,e,{isEnd:!0})})),oe(r,function(a){i.add(new sn({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Pt(fz,t,e,i,a),ondragend:Pt(Jp,e,{isEnd:!0})}))}),i}function dae(t,e,n,r){var i=r.brushStyle.lineWidth||0,a=xg(i,Gqe),s=n[0][0],o=n[1][0],l=s-i/2,d=o-i/2,c=n[0][1],f=n[1][1],p=c-a+i/2,h=f-a+i/2,m=c-s,g=f-o,v=m+i,_=g+i;lu(t,e,"main",s,o,m,g),r.transformable&&(lu(t,e,"w",l,d,a,_),lu(t,e,"e",p,d,a,_),lu(t,e,"n",l,d,v,a),lu(t,e,"s",l,h,v,a),lu(t,e,"nw",l,d,a,a),lu(t,e,"ne",p,d,a,a),lu(t,e,"sw",l,h,a,a),lu(t,e,"se",p,h,a,a))}function L$(t,e){var n=e.__brushOption,r=n.transformable,i=e.childAt(0);i.useStyle(cO(n)),i.attr({silent:!r,cursor:r?"move":"default"}),oe([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var s=e.childOfName(a.join("")),o=a.length===1?V$(t,a[0]):Jqe(t,a);s&&s.attr({silent:!r,invisible:!r,cursor:r?Kqe[o]+"-resize":null})})}function lu(t,e,n,r,i,a,s){var o=e.childOfName(n);o&&o.setShape(tWe(fO(t,e,[[r,i],[r+a,i+s]])))}function cO(t){return yt({strokeNoScale:!0},t.brushStyle)}function cae(t,e,n,r){var i=[P1(t,n),P1(e,r)],a=[xg(t,n),xg(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function Qqe(t){return Dp(t.group)}function V$(t,e){var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=YC(n[e],Qqe(t));return r[i]}function Jqe(t,e){var n=[V$(t,e[0]),V$(t,e[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function fz(t,e,n,r,i,a){var s=n.__brushOption,o=t.toRectRange(s.range),l=fae(e,i,a);oe(r,function(d){var c=Yqe[d];o[c[0]][c[1]]+=l[c[0]]}),s.range=t.fromRectRange(cae(o[0][0],o[1][0],o[0][1],o[1][1])),lO(e,n),Jp(e,{isEnd:!1})}function eWe(t,e,n,r){var i=e.__brushOption.range,a=fae(t,n,r);oe(i,function(s){s[0]+=a[0],s[1]+=a[1]}),lO(t,e),Jp(t,{isEnd:!1})}function fae(t,e,n){var r=t.group,i=r.transformCoordToLocal(e,n),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function fO(t,e,n){var r=oae(t,e);return r&&r!==Qp?r.clipPath(n,t._transform):xt(n)}function tWe(t){var e=P1(t[0][0],t[1][0]),n=P1(t[0][1],t[1][1]),r=xg(t[0][0],t[1][0]),i=xg(t[0][1],t[1][1]);return{x:e,y:n,width:r-e,height:i-n}}function nWe(t,e,n){if(!(!t._brushType||iWe(t,e.offsetX,e.offsetY))){var r=t._zr,i=t._covers,a=dO(t,e,n);if(!t._dragging)for(var s=0;s<i.length;s++){var o=i[s].__brushOption;if(a&&(a===Qp||o.panelId===a.panelId)&&gA[o.brushType].contain(i[s],n[0],n[1]))return}a&&r.setCursorStyle("crosshair")}}function N$(t){var e=t.event;e.preventDefault&&e.preventDefault()}function j$(t,e,n){return t.childOfName("main").contain(e,n)}function pae(t,e,n,r){var i=t._creatingCover,a=t._creatingPanel,s=t._brushOption,o;if(t._track.push(n.slice()),Zqe(t)||i){if(a&&!i){s.brushMode==="single"&&O$(t);var l=xt(s);l.brushType=pz(l.brushType,a),l.panelId=a===Qp?null:a.panelId,i=t._creatingCover=rae(t,l),t._covers.push(i)}if(i){var d=gA[pz(t._brushType,a)],c=i.__brushOption;c.range=d.getCreatingRange(fO(t,i,t._track)),r&&(iae(t,i),d.updateCommon(t,i)),aae(t,i),o={isEnd:r}}}else r&&s.brushMode==="single"&&s.removeOnClick&&dO(t,e,n)&&O$(t)&&(o={isEnd:r,removeOnClick:!0});return o}function pz(t,e){return t==="auto"?e.defaultBrushType:t}var rWe={mousedown:function(t){if(this._dragging)hz(this,t);else if(!t.target||!t.target.draggable){N$(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var n=this._creatingPanel=dO(this,t,e);n&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,r=this.group.transformCoordToLocal(e,n);if(nWe(this,t,r),this._dragging){N$(t);var i=pae(this,t,r,!1);i&&Jp(this,i)}},mouseup:function(t){hz(this,t)}};function hz(t,e){if(t._dragging){N$(e);var n=e.offsetX,r=e.offsetY,i=t.group.transformCoordToLocal(n,r),a=pae(t,e,i,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&Jp(t,a)}}function iWe(t,e,n){var r=t._zr;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}var gA={lineX:mz(0),lineY:mz(1),rect:{createCover:function(t,e){function n(r){return r}return uae({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=lae(t);return cae(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,r){dae(t,e,n,r)},updateCommon:L$,contain:j$},polygon:{createCover:function(t,e){var n=new kt;return n.add(new Da({name:"main",style:cO(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new $a({name:"main",draggable:!0,drift:Pt(eWe,t,e),ondragend:Pt(Jp,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,r){e.childAt(0).setShape({points:fO(t,e,n)})},updateCommon:L$,contain:j$}};function mz(t){return{createCover:function(e,n){return uae({toRectRange:function(r){var i=[r,[0,100]];return t&&i.reverse(),i},fromRectRange:function(r){return r[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=lae(e),r=P1(n[0][t],n[1][t]),i=xg(n[0][t],n[1][t]);return[r,i]},updateCoverShape:function(e,n,r,i){var a,s=oae(e,n);if(s!==Qp&&s.getLinearBrushOtherExtent)a=s.getLinearBrushOtherExtent(t);else{var o=e._zr;a=[0,[o.getWidth(),o.getHeight()][1-t]]}var l=[r,a];t&&l.reverse(),dae(e,n,l,i)},updateCommon:L$,contain:j$}}function hae(t){return t=pO(t),function(e){return Ate(e,t)}}function mae(t,e){return t=pO(t),function(n){var r=e!=null?e:n,i=r?t.width:t.height,a=r?t.x:t.y;return[a,a+(i||0)]}}function gae(t,e,n){var r=pO(t);return function(i,a){return r.contain(a[0],a[1])&&!fA(i,e,n)}}function pO(t){return qt.create(t)}var aWe=["axisLine","axisTickLabel","axisName"],sWe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){t.prototype.init.apply(this,arguments),(this._brushController=new oO(r.getZr())).on("brush",ut(this._onBrush,this))},e.prototype.render=function(n,r,i,a){if(!oWe(n,r,a)){this.axisModel=n,this.api=i,this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new kt,this.group.add(this._axisGroup),!!n.get("show")){var o=uWe(n,r),l=o.coordinateSystem,d=n.getAreaSelectStyle(),c=d.width,f=n.axis.dim,p=l.getAxisLayout(f),h=Oe({strokeContainThreshold:c},p),m=new _a(n,h);oe(aWe,m.add,m),this._axisGroup.add(m.getGroup()),this._refreshBrushController(h,d,n,o,c,i),Cb(s,this._axisGroup,n)}}},e.prototype._refreshBrushController=function(n,r,i,a,s,o){var l=i.axis.getExtent(),d=l[1]-l[0],c=Math.min(30,Math.abs(d)*.1),f=qt.create({x:l[0],y:-s/2,width:d,height:s});f.x-=c,f.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:n.rotation,x:n.position[0],y:n.position[1]}).setPanels([{panelId:"pl",clipPath:hae(f),isTargetByCursor:gae(f,o,a),getLinearBrushOtherExtent:mae(f,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(lWe(i))},e.prototype._onBrush=function(n){var r=n.areas,i=this.axisModel,a=i.axis,s=ze(r,function(o){return[a.coordToData(o.range[0],!0),a.coordToData(o.range[1],!0)]});(!i.option.realtime===n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:s})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(hr);function oWe(t,e,n){return n&&n.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}function lWe(t){var e=t.axis;return ze(t.activeIntervals,function(n){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(n[0],!0),e.dataToCoord(n[1],!0)]}})}function uWe(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}var dWe={type:"axisAreaSelect",event:"axisAreaSelected"};function cWe(t){t.registerAction(dWe,function(e,n){n.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),t.registerAction("parallelAxisExpand",function(e,n){n.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var fWe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function vae(t){t.registerComponentView(Pqe),t.registerComponentModel(Oqe),t.registerCoordinateSystem("parallel",Uqe),t.registerPreprocessor(Mqe),t.registerComponentModel(I$),t.registerComponentView(sWe),_g(t,"parallel",I$,fWe),cWe(t)}function pWe(t){Kt(vae),t.registerChartView(xqe),t.registerSeriesModel(Sqe),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,Eqe)}var hWe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),mWe=function(t){Ce(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new hWe},e.prototype.buildPath=function(n,r){var i=r.extent;n.moveTo(r.x1,r.y1),n.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(n.lineTo(r.x2+i,r.y2),n.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(n.lineTo(r.x2,r.y2+i),n.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),n.closePath()},e.prototype.highlight=function(){nd(this)},e.prototype.downplay=function(){rd(this)},e}(Zt),gWe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._focusAdjacencyDisabled=!1,n}return e.prototype.render=function(n,r,i){var a=this,s=n.getGraph(),o=this.group,l=n.layoutInfo,d=l.width,c=l.height,f=n.getData(),p=n.getData("edge"),h=n.get("orient");this._model=n,o.removeAll(),o.x=l.x,o.y=l.y,s.eachEdge(function(m){var g=new mWe,v=Tt(g);v.dataIndex=m.dataIndex,v.seriesIndex=n.seriesIndex,v.dataType="edge";var _=m.getModel(),x=_.getModel("lineStyle"),w=x.get("curveness"),k=m.node1.getLayout(),S=m.node1.getModel(),C=S.get("localX"),A=S.get("localY"),M=m.node2.getLayout(),$=m.node2.getModel(),R=$.get("localX"),I=$.get("localY"),B=m.getLayout(),j,z,F,q,N,O,V,L;g.shape.extent=Math.max(1,B.dy),g.shape.orient=h,h==="vertical"?(j=(C!=null?C*d:k.x)+B.sy,z=(A!=null?A*c:k.y)+k.dy,F=(R!=null?R*d:M.x)+B.ty,q=I!=null?I*c:M.y,N=j,O=z*(1-w)+q*w,V=F,L=z*w+q*(1-w)):(j=(C!=null?C*d:k.x)+k.dx,z=(A!=null?A*c:k.y)+B.sy,F=R!=null?R*d:M.x,q=(I!=null?I*c:M.y)+B.ty,N=j*(1-w)+F*w,O=z,V=j*w+F*(1-w),L=q),g.setShape({x1:j,y1:z,x2:F,y2:q,cpx1:N,cpy1:O,cpx2:V,cpy2:L}),g.useStyle(x.getItemStyle()),gz(g.style,h,m);var U=""+_.get("value"),G=ui(_,"edgeLabel");Li(g,G,{labelFetcher:{getFormattedLabel:function(ee,de,se,te,ne,ce){return n.getFormattedLabel(ee,de,"edge",te,El(ne,G.normal&&G.normal.get("formatter"),U),ce)}},labelDataIndex:m.dataIndex,defaultText:U}),g.setTextConfig({position:"inside"});var X=_.getModel("emphasis");Oi(g,_,"lineStyle",function(ee){var de=ee.getItemStyle();return gz(de,h,m),de}),o.add(g),p.setItemGraphicEl(m.dataIndex,g);var re=X.get("focus");_r(g,re==="adjacency"?m.getAdjacentDataIndices():re==="trajectory"?m.getTrajectoryDataIndices():re,X.get("blurScope"),X.get("disabled"))}),s.eachNode(function(m){var g=m.getLayout(),v=m.getModel(),_=v.get("localX"),x=v.get("localY"),w=v.getModel("emphasis"),k=v.get(["itemStyle","borderRadius"])||0,S=new sn({shape:{x:_!=null?_*d:g.x,y:x!=null?x*c:g.y,width:g.dx,height:g.dy,r:k},style:v.getModel("itemStyle").getItemStyle(),z2:10});Li(S,ui(v),{labelFetcher:{getFormattedLabel:function(A,M){return n.getFormattedLabel(A,M,"node")}},labelDataIndex:m.dataIndex,defaultText:m.id}),S.disableLabelAnimation=!0,S.setStyle("fill",m.getVisual("color")),S.setStyle("decal",m.getVisual("style").decal),Oi(S,v),o.add(S),f.setItemGraphicEl(m.dataIndex,S),Tt(S).dataType="node";var C=w.get("focus");_r(S,C==="adjacency"?m.getAdjacentDataIndices():C==="trajectory"?m.getTrajectoryDataIndices():C,w.get("blurScope"),w.get("disabled"))}),f.eachItemGraphicEl(function(m,g){var v=f.getItemModel(g);v.get("draggable")&&(m.drift=function(_,x){a._focusAdjacencyDisabled=!0,this.shape.x+=_,this.shape.y+=x,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:f.getRawIndex(g),localX:this.shape.x/d,localY:this.shape.y/c})},m.ondragend=function(){a._focusAdjacencyDisabled=!1},m.draggable=!0,m.cursor="move")}),!this._data&&n.isAnimationEnabled()&&o.setClipPath(vWe(o.getBoundingRect(),n,function(){o.removeClipPath()})),this._data=n.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Pn);function gz(t,e,n){switch(t.fill){case"source":t.fill=n.node1.getVisual("color"),t.decal=n.node1.getVisual("style").decal;break;case"target":t.fill=n.node2.getVisual("color"),t.decal=n.node2.getVisual("style").decal;break;case"gradient":var r=n.node1.getVisual("color"),i=n.node2.getVisual("color");it(r)&&it(i)&&(t.fill=new Sb(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function vWe(t,e,n){var r=new sn({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return sr(r,{shape:{width:t.width+20}},e,n),r}var yWe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){var i=n.edges||n.links||[],a=n.data||n.nodes||[],s=n.levels||[];this.levelModels=[];for(var o=this.levelModels,l=0;l<s.length;l++)s[l].depth!=null&&s[l].depth>=0&&(o[s[l].depth]=new An(s[l],this,r));var d=Jie(a,i,this,!0,c);return d.data;function c(f,p){f.wrapMethod("getItemModel",function(h,m){var g=h.parentModel,v=g.getData().getItemLayout(m);if(v){var _=v.depth,x=g.levelModels[_];x&&(h.parentModel=x)}return h}),p.wrapMethod("getItemModel",function(h,m){var g=h.parentModel,v=g.getGraph().getEdgeByIndex(m),_=v.node1.getLayout();if(_){var x=_.depth,w=g.levelModels[x];w&&(h.parentModel=w)}return h})}},e.prototype.setNodePosition=function(n,r){var i=this.option.data||this.option.nodes,a=i[n];a.localX=r[0],a.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(n,r,i){function a(h){return isNaN(h)||h==null}if(i==="edge"){var s=this.getDataParams(n,i),o=s.data,l=s.value,d=o.source+" -- "+o.target;return di("nameValue",{name:d,value:l,noValue:a(l)})}else{var c=this.getGraph().getNodeByIndex(n),f=c.getLayout().value,p=this.getDataParams(n,i).data.name;return di("nameValue",{name:p!=null?p+"":null,value:f,noValue:a(f)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(n,r){var i=t.prototype.getDataParams.call(this,n,r);if(i.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(n),s=a.getLayout().value;i.value=s}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Zn);function bWe(t,e){t.eachSeriesByType("sankey",function(n){var r=n.get("nodeWidth"),i=n.get("nodeGap"),a=_We(n,e);n.layoutInfo=a;var s=a.width,o=a.height,l=n.getGraph(),d=l.nodes,c=l.edges;wWe(d);var f=kn(d,function(g){return g.getLayout().value===0}),p=f.length!==0?0:n.get("layoutIterations"),h=n.get("orient"),m=n.get("nodeAlign");xWe(d,c,r,i,s,o,p,h,m)})}function _We(t,e){return Qr(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function xWe(t,e,n,r,i,a,s,o,l){kWe(t,e,n,i,a,o,l),TWe(t,e,a,i,r,s,o),LWe(t,o)}function wWe(t){oe(t,function(e){var n=xc(e.outEdges,Kk),r=xc(e.inEdges,Kk),i=e.getValue()||0,a=Math.max(n,r,i);e.setLayout({value:a},!0)})}function kWe(t,e,n,r,i,a,s){for(var o=[],l=[],d=[],c=[],f=0,p=0;p<e.length;p++)o[p]=1;for(var p=0;p<t.length;p++)l[p]=t[p].inEdges.length,l[p]===0&&d.push(t[p]);for(var h=-1;d.length;){for(var m=0;m<d.length;m++){var g=d[m],v=g.hostGraph.data.getRawDataItem(g.dataIndex),_=v.depth!=null&&v.depth>=0;_&&v.depth>h&&(h=v.depth),g.setLayout({depth:_?v.depth:f},!0),a==="vertical"?g.setLayout({dy:n},!0):g.setLayout({dx:n},!0);for(var x=0;x<g.outEdges.length;x++){var w=g.outEdges[x],k=e.indexOf(w);o[k]=0;var S=w.node2,C=t.indexOf(S);--l[C]===0&&c.indexOf(S)<0&&c.push(S)}}++f,d=c,c=[]}for(var p=0;p<o.length;p++)if(o[p]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var A=h>f-1?h:f-1;s&&s!=="left"&&SWe(t,s,a,A);var M=a==="vertical"?(i-n)/A:(r-n)/A;AWe(t,M,a)}function yae(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return e.depth!=null&&e.depth>=0}function SWe(t,e,n,r){if(e==="right"){for(var i=[],a=t,s=0;a.length;){for(var o=0;o<a.length;o++){var l=a[o];l.setLayout({skNodeHeight:s},!0);for(var d=0;d<l.inEdges.length;d++){var c=l.inEdges[d];i.indexOf(c.node1)<0&&i.push(c.node1)}}a=i,i=[],++s}oe(t,function(f){yae(f)||f.setLayout({depth:Math.max(0,r-f.getLayout().skNodeHeight)},!0)})}else e==="justify"&&CWe(t,r)}function CWe(t,e){oe(t,function(n){!yae(n)&&!n.outEdges.length&&n.setLayout({depth:e},!0)})}function AWe(t,e,n){oe(t,function(r){var i=r.getLayout().depth*e;n==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function TWe(t,e,n,r,i,a,s){var o=EWe(t,s);MWe(o,e,n,r,i,s),B3(o,i,n,r,s);for(var l=1;a>0;a--)l*=.99,$We(o,l,s),B3(o,i,n,r,s),OWe(o,l,s),B3(o,i,n,r,s)}function EWe(t,e){var n=[],r=e==="vertical"?"y":"x",i=FM(t,function(a){return a.getLayout()[r]});return i.keys.sort(function(a,s){return a-s}),oe(i.keys,function(a){n.push(i.buckets.get(a))}),n}function MWe(t,e,n,r,i,a){var s=1/0;oe(t,function(o){var l=o.length,d=0;oe(o,function(f){d+=f.getLayout().value});var c=a==="vertical"?(r-(l-1)*i)/d:(n-(l-1)*i)/d;c<s&&(s=c)}),oe(t,function(o){oe(o,function(l,d){var c=l.getLayout().value*s;a==="vertical"?(l.setLayout({x:d},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:d},!0),l.setLayout({dy:c},!0))})}),oe(e,function(o){var l=+o.getValue()*s;o.setLayout({dy:l},!0)})}function B3(t,e,n,r,i){var a=i==="vertical"?"x":"y";oe(t,function(s){s.sort(function(g,v){return g.getLayout()[a]-v.getLayout()[a]});for(var o,l,d,c=0,f=s.length,p=i==="vertical"?"dx":"dy",h=0;h<f;h++)l=s[h],d=c-l.getLayout()[a],d>0&&(o=l.getLayout()[a]+d,i==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0)),c=l.getLayout()[a]+l.getLayout()[p]+e;var m=i==="vertical"?r:n;if(d=c-e-m,d>0){o=l.getLayout()[a]-d,i==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0),c=o;for(var h=f-2;h>=0;--h)l=s[h],d=l.getLayout()[a]+l.getLayout()[p]+e-c,d>0&&(o=l.getLayout()[a]-d,i==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0)),c=l.getLayout()[a]}})}function $We(t,e,n){oe(t.slice().reverse(),function(r){oe(r,function(i){if(i.outEdges.length){var a=xc(i.outEdges,DWe,n)/xc(i.outEdges,Kk);if(isNaN(a)){var s=i.outEdges.length;a=s?xc(i.outEdges,RWe,n)/s:0}if(n==="vertical"){var o=i.getLayout().x+(a-Lc(i,n))*e;i.setLayout({x:o},!0)}else{var l=i.getLayout().y+(a-Lc(i,n))*e;i.setLayout({y:l},!0)}}})})}function DWe(t,e){return Lc(t.node2,e)*t.getValue()}function RWe(t,e){return Lc(t.node2,e)}function PWe(t,e){return Lc(t.node1,e)*t.getValue()}function IWe(t,e){return Lc(t.node1,e)}function Lc(t,e){return e==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function Kk(t){return t.getValue()}function xc(t,e,n){for(var r=0,i=t.length,a=-1;++a<i;){var s=+e(t[a],n);isNaN(s)||(r+=s)}return r}function OWe(t,e,n){oe(t,function(r){oe(r,function(i){if(i.inEdges.length){var a=xc(i.inEdges,PWe,n)/xc(i.inEdges,Kk);if(isNaN(a)){var s=i.inEdges.length;a=s?xc(i.inEdges,IWe,n)/s:0}if(n==="vertical"){var o=i.getLayout().x+(a-Lc(i,n))*e;i.setLayout({x:o},!0)}else{var l=i.getLayout().y+(a-Lc(i,n))*e;i.setLayout({y:l},!0)}}})})}function LWe(t,e){var n=e==="vertical"?"x":"y";oe(t,function(r){r.outEdges.sort(function(i,a){return i.node2.getLayout()[n]-a.node2.getLayout()[n]}),r.inEdges.sort(function(i,a){return i.node1.getLayout()[n]-a.node1.getLayout()[n]})}),oe(t,function(r){var i=0,a=0;oe(r.outEdges,function(s){s.setLayout({sy:i},!0),i+=s.getLayout().dy}),oe(r.inEdges,function(s){s.setLayout({ty:a},!0),a+=s.getLayout().dy})})}function VWe(t){t.eachSeriesByType("sankey",function(e){var n=e.getGraph(),r=n.nodes,i=n.edges;if(r.length){var a=1/0,s=-1/0;oe(r,function(o){var l=o.getLayout().value;l<a&&(a=l),l>s&&(s=l)}),oe(r,function(o){var l=new oi({type:"color",mappingMethod:"linear",dataExtent:[a,s],visual:e.get("color")}),d=l.mapValueToVisual(o.getLayout().value),c=o.getModel().get(["itemStyle","color"]);c!=null?(o.setVisual("color",c),o.setVisual("style",{fill:c})):(o.setVisual("color",d),o.setVisual("style",{fill:d}))})}i.length&&oe(i,function(o){var l=o.getModel().get("lineStyle");o.setVisual("style",l)})})}function NWe(t){t.registerChartView(gWe),t.registerSeriesModel(yWe),t.registerLayout(bWe),t.registerVisual(VWe),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,n){n.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var bae=function(){function t(){}return t.prototype._hasEncodeRule=function(e){var n=this.getEncode();return n&&n.get(e)!=null},t.prototype.getInitialData=function(e,n){var r,i=n.getComponent("xAxis",this.get("xAxisIndex")),a=n.getComponent("yAxis",this.get("yAxisIndex")),s=i.get("type"),o=a.get("type"),l;s==="category"?(e.layout="horizontal",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("x")):o==="category"?(e.layout="vertical",r=a.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var d=["x","y"],c=e.layout==="horizontal"?0:1,f=this._baseAxisDim=d[c],p=d[1-c],h=[i,a],m=h[c].get("type"),g=h[1-c].get("type"),v=e.data;if(v&&l){var _=[];oe(v,function(k,S){var C;Be(k)?(C=k.slice(),k.unshift(S)):Be(k.value)?(C=Oe({},k),C.value=C.value.slice(),k.value.unshift(S)):C=k,_.push(C)}),e.data=_}var x=this.defaultValueDimensions,w=[{name:f,type:Nk(m),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:Nk(g),dimsDef:x.slice()}];return Yg(this,{coordDimensions:w,dimensionsCount:x.length+1,encodeDefaulter:Pt(Qte,w,this)})},t.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},t}(),_ae=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(Zn);Hr(_ae,bae,!0);var jWe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=n.getData(),s=this.group,o=this._data;this._data||s.removeAll();var l=n.get("layout")==="horizontal"?1:0;a.diff(o).add(function(d){if(a.hasValue(d)){var c=a.getItemLayout(d),f=vz(c,a,d,l,!0);a.setItemGraphicEl(d,f),s.add(f)}}).update(function(d,c){var f=o.getItemGraphicEl(c);if(!a.hasValue(d)){s.remove(f);return}var p=a.getItemLayout(d);f?(Vo(f),xae(p,f,a,d)):f=vz(p,a,d,l),s.add(f),a.setItemGraphicEl(d,f)}).remove(function(d){var c=o.getItemGraphicEl(d);c&&s.remove(c)}).execute(),this._data=a},e.prototype.remove=function(n){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&r.remove(a)})},e.type="boxplot",e}(Pn),FWe=function(){function t(){}return t}(),BWe=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new FWe},e.prototype.buildPath=function(n,r){var i=r.points,a=0;for(n.moveTo(i[a][0],i[a][1]),a++;a<4;a++)n.lineTo(i[a][0],i[a][1]);for(n.closePath();a<i.length;a++)n.moveTo(i[a][0],i[a][1]),a++,n.lineTo(i[a][0],i[a][1])},e}(Zt);function vz(t,e,n,r,i){var a=t.ends,s=new BWe({shape:{points:i?zWe(a,r,t):a}});return xae(t,s,e,n,i),s}function xae(t,e,n,r,i){var a=n.hostModel,s=hh[i?"initProps":"updateProps"];s(e,{shape:{points:t.ends}},a,r),e.useStyle(n.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var o=n.getItemModel(r),l=o.getModel("emphasis");Oi(e,o),_r(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function zWe(t,e,n){return ze(t,function(r){return r=r.slice(),r[e]=n.initBaseline,r})}var g0=oe;function UWe(t){var e=HWe(t);g0(e,function(n){var r=n.seriesModels;r.length&&(qWe(n),g0(r,function(i,a){WWe(i,n.boxOffsetList[a],n.boxWidthList[a])}))})}function HWe(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(r){var i=r.getBaseAxis(),a=Yt(n,i);a<0&&(a=n.length,n[a]=i,e[a]={axis:i,seriesModels:[]}),e[a].seriesModels.push(r)}),e}function qWe(t){var e=t.axis,n=t.seriesModels,r=n.length,i=t.boxWidthList=[],a=t.boxOffsetList=[],s=[],o;if(e.type==="category")o=e.getBandWidth();else{var l=0;g0(n,function(m){l=Math.max(l,m.getData().count())});var d=e.getExtent();o=Math.abs(d[1]-d[0])/l}g0(n,function(m){var g=m.get("boxWidth");Be(g)||(g=[g,g]),s.push([Qe(g[0],o)||0,Qe(g[1],o)||0])});var c=o*.8-2,f=c/r*.3,p=(c-f*(r-1))/r,h=p/2-c/2;g0(n,function(m,g){a.push(h),h+=f+p,i.push(Math.min(Math.max(p,s[g][0]),s[g][1]))})}function WWe(t,e,n){var r=t.coordinateSystem,i=t.getData(),a=n/2,s=t.get("layout")==="horizontal"?0:1,o=1-s,l=["x","y"],d=i.mapDimension(l[s]),c=i.mapDimensionsAll(l[o]);if(d==null||c.length<5)return;for(var f=0;f<i.count();f++){var p=i.get(d,f),h=w(p,c[2],f),m=w(p,c[0],f),g=w(p,c[1],f),v=w(p,c[3],f),_=w(p,c[4],f),x=[];k(x,g,!1),k(x,v,!0),x.push(m,g,_,v),S(x,m),S(x,_),S(x,h),i.setItemLayout(f,{initBaseline:h[o],ends:x})}function w(C,A,M){var $=i.get(A,M),R=[];R[s]=C,R[o]=$;var I;return isNaN(C)||isNaN($)?I=[NaN,NaN]:(I=r.dataToPoint(R),I[s]+=e),I}function k(C,A,M){var $=A.slice(),R=A.slice();$[s]+=a,R[s]-=a,M?C.push($,R):C.push(R,$)}function S(C,A){var M=A.slice(),$=A.slice();M[s]-=a,$[s]+=a,C.push(M,$)}}function GWe(t,e){e=e||{};for(var n=[],r=[],i=e.boundIQR,a=i==="none"||i===0,s=0;s<t.length;s++){var o=Fs(t[s].slice()),l=v4(o,.25),d=v4(o,.5),c=v4(o,.75),f=o[0],p=o[o.length-1],h=(i==null?1.5:i)*(c-l),m=a?f:Math.max(f,l-h),g=a?p:Math.min(p,c+h),v=e.itemNameFormatter,_=gt(v)?v({value:s}):it(v)?v.replace("{value}",s+""):s+"";n.push([_,m,l,d,c,g]);for(var x=0;x<o.length;x++){var w=o[x];if(w<m||w>g){var k=[_,w];r.push(k)}}}return{boxData:n,outliers:r}}var YWe={type:"echarts:boxplot",transform:function(e){var n=e.upstream;if(n.sourceFormat!==na){var r="";wn(r)}var i=GWe(n.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function KWe(t){t.registerSeriesModel(_ae),t.registerChartView(jWe),t.registerLayout(UWe),t.registerTransform(YWe)}var XWe=["itemStyle","borderColor"],ZWe=["itemStyle","borderColor0"],QWe=["itemStyle","borderColorDoji"],JWe=["itemStyle","color"],eGe=["itemStyle","color0"];function hO(t,e){return e.get(t>0?JWe:eGe)}function mO(t,e){return e.get(t===0?QWe:t>0?XWe:ZWe)}var tGe={seriesType:"candlestick",plan:Hg(),performRawSeries:!0,reset:function(t,e){if(!e.isSeriesFiltered(t)){var n=t.pipelineContext.large;return!n&&{progress:function(r,i){for(var a;(a=r.next())!=null;){var s=i.getItemModel(a),o=i.getItemLayout(a).sign,l=s.getItemStyle();l.fill=hO(o,s),l.stroke=mO(o,s)||l.fill;var d=i.ensureUniqueItemVisual(a,"style");Oe(d,l)}}}}}},nGe=["color","borderColor"],rGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(n),this._isLargeDraw?this._renderLarge(n):this._renderNormal(n)},e.prototype.incrementalPrepareRender=function(n,r,i){this._clear(),this._updateDrawMode(n)},e.prototype.incrementalRender=function(n,r,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(n,r):this._incrementalRenderNormal(n,r)},e.prototype.eachRendered=function(n){Gc(this._progressiveEls||this.group,n)},e.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(n){var r=n.getData(),i=this._data,a=this.group,s=r.getLayout("isSimpleBox"),o=n.get("clip",!0),l=n.coordinateSystem,d=l.getArea&&l.getArea();this._data||a.removeAll(),r.diff(i).add(function(c){if(r.hasValue(c)){var f=r.getItemLayout(c);if(o&&yz(d,f))return;var p=z3(f,c,!0);sr(p,{shape:{points:f.ends}},n,c),U3(p,r,c,s),a.add(p),r.setItemGraphicEl(c,p)}}).update(function(c,f){var p=i.getItemGraphicEl(f);if(!r.hasValue(c)){a.remove(p);return}var h=r.getItemLayout(c);if(o&&yz(d,h)){a.remove(p);return}p?(yn(p,{shape:{points:h.ends}},n,c),Vo(p)):p=z3(h),U3(p,r,c,s),a.add(p),r.setItemGraphicEl(c,p)}).remove(function(c){var f=i.getItemGraphicEl(c);f&&a.remove(f)}).execute(),this._data=r},e.prototype._renderLarge=function(n){this._clear(),bz(n,this.group);var r=n.get("clip",!0)?Pb(n.coordinateSystem,!1,n):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(n,r){for(var i=r.getData(),a=i.getLayout("isSimpleBox"),s;(s=n.next())!=null;){var o=i.getItemLayout(s),l=z3(o);U3(l,i,s,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(n,r){bz(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(n){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Pn),iGe=function(){function t(){}return t}(),aGe=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new iGe},e.prototype.buildPath=function(n,r){var i=r.points;this.__simpleBox?(n.moveTo(i[4][0],i[4][1]),n.lineTo(i[6][0],i[6][1])):(n.moveTo(i[0][0],i[0][1]),n.lineTo(i[1][0],i[1][1]),n.lineTo(i[2][0],i[2][1]),n.lineTo(i[3][0],i[3][1]),n.closePath(),n.moveTo(i[4][0],i[4][1]),n.lineTo(i[5][0],i[5][1]),n.moveTo(i[6][0],i[6][1]),n.lineTo(i[7][0],i[7][1]))},e}(Zt);function z3(t,e,n){var r=t.ends;return new aGe({shape:{points:n?sGe(r,t):r},z2:100})}function yz(t,e){for(var n=!0,r=0;r<e.ends.length;r++)if(t.contain(e.ends[r][0],e.ends[r][1])){n=!1;break}return n}function U3(t,e,n,r){var i=e.getItemModel(n);t.useStyle(e.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.__simpleBox=r,Oi(t,i);var a=e.getItemLayout(n).sign;oe(t.states,function(o,l){var d=i.getModel(l),c=hO(a,d),f=mO(a,d)||c,p=o.style||(o.style={});c&&(p.fill=c),f&&(p.stroke=f)});var s=i.getModel("emphasis");_r(t,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function sGe(t,e){return ze(t,function(n){return n=n.slice(),n[1]=e.initBaseline,n})}var oGe=function(){function t(){}return t}(),H3=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new oGe},e.prototype.buildPath=function(n,r){for(var i=r.points,a=0;a<i.length;)if(this.__sign===i[a++]){var s=i[a++];n.moveTo(s,i[a++]),n.lineTo(s,i[a++])}else a+=3},e}(Zt);function bz(t,e,n,r){var i=t.getData(),a=i.getLayout("largePoints"),s=new H3({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});e.add(s);var o=new H3({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});e.add(o);var l=new H3({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});e.add(l),q3(1,s,t),q3(-1,o,t),q3(0,l,t),r&&(s.incremental=!0,o.incremental=!0),n&&n.push(s,o)}function q3(t,e,n,r){var i=mO(t,n)||hO(t,n),a=n.getModel("itemStyle").getItemStyle(nGe);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var wae=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(n,r,i){var a=r.getItemLayout(n);return a&&i.rect(a.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Zn);Hr(wae,bae,!0);function lGe(t){!t||!Be(t.series)||oe(t.series,function(e){_t(e)&&e.type==="k"&&(e.type="candlestick")})}var uGe={seriesType:"candlestick",plan:Hg(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),r=dGe(t,n),i=0,a=1,s=["x","y"],o=n.getDimensionIndex(n.mapDimension(s[i])),l=ze(n.mapDimensionsAll(s[a]),n.getDimensionIndex,n),d=l[0],c=l[1],f=l[2],p=l[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),o<0||l.length<4)return;return{progress:t.pipelineContext.large?m:h};function h(g,v){for(var _,x=v.getStore();(_=g.next())!=null;){var w=x.get(o,_),k=x.get(d,_),S=x.get(c,_),C=x.get(f,_),A=x.get(p,_),M=Math.min(k,S),$=Math.max(k,S),R=N(M,w),I=N($,w),B=N(C,w),j=N(A,w),z=[];O(z,I,0),O(z,R,1),z.push(L(j),L(I),L(B),L(R));var F=v.getItemModel(_),q=!!F.get(["itemStyle","borderColorDoji"]);v.setItemLayout(_,{sign:_z(x,_,k,S,c,q),initBaseline:k>S?I[a]:R[a],ends:z,brushRect:V(C,A,w)})}function N(U,G){var X=[];return X[i]=G,X[a]=U,isNaN(G)||isNaN(U)?[NaN,NaN]:e.dataToPoint(X)}function O(U,G,X){var re=G.slice(),ee=G.slice();re[i]=$w(re[i]+r/2,1,!1),ee[i]=$w(ee[i]-r/2,1,!0),X?U.push(re,ee):U.push(ee,re)}function V(U,G,X){var re=N(U,X),ee=N(G,X);return re[i]-=r/2,ee[i]-=r/2,{x:re[0],y:re[1],width:r,height:ee[1]-re[1]}}function L(U){return U[i]=$w(U[i],1),U}}function m(g,v){for(var _=xl(g.count*4),x=0,w,k=[],S=[],C,A=v.getStore(),M=!!t.get(["itemStyle","borderColorDoji"]);(C=g.next())!=null;){var $=A.get(o,C),R=A.get(d,C),I=A.get(c,C),B=A.get(f,C),j=A.get(p,C);if(isNaN($)||isNaN(B)||isNaN(j)){_[x++]=NaN,x+=3;continue}_[x++]=_z(A,C,R,I,c,M),k[i]=$,k[a]=B,w=e.dataToPoint(k,null,S),_[x++]=w?w[0]:NaN,_[x++]=w?w[1]:NaN,k[a]=j,w=e.dataToPoint(k,null,S),_[x++]=w?w[1]:NaN}v.setLayout("largePoints",_)}}};function _z(t,e,n,r,i,a){var s;return n>r?s=-1:n<r?s=1:s=a?0:e>0?t.get(i,e-1)<=r?1:-1:1,s}function dGe(t,e){var n=t.getBaseAxis(),r,i=n.type==="category"?n.getBandWidth():(r=n.getExtent(),Math.abs(r[1]-r[0])/e.count()),a=Qe($t(t.get("barMaxWidth"),i),i),s=Qe($t(t.get("barMinWidth"),1),i),o=t.get("barWidth");return o!=null?Qe(o,i):Math.max(Math.min(i/2,a),s)}function cGe(t){t.registerChartView(rGe),t.registerSeriesModel(wae),t.registerPreprocessor(lGe),t.registerVisual(tGe),t.registerLayout(uGe)}function xz(t,e){var n=e.rippleEffectColor||e.color;t.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?n:null,fill:e.brushType==="fill"?n:null}})})}var fGe=function(t){Ce(e,t);function e(n,r){var i=t.call(this)||this,a=new Db(n,r),s=new kt;return i.add(a),i.add(s),i.updateData(n,r),i}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(n){for(var r=n.symbolType,i=n.color,a=n.rippleNumber,s=this.childAt(1),o=0;o<a;o++){var l=Ur(r,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-o/a*n.period+n.effectOffset;l.animate("",!0).when(n.period,{scaleX:n.rippleScale/2,scaleY:n.rippleScale/2}).delay(d).start(),l.animateStyle(!0).when(n.period,{opacity:0}).delay(d).start(),s.add(l)}xz(s,n)},e.prototype.updateEffectAnimation=function(n){for(var r=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],s=0;s<a.length;s++){var o=a[s];if(r[o]!==n[o]){this.stopEffectAnimation(),this.startEffectAnimation(n);return}}xz(i,n)},e.prototype.highlight=function(){nd(this)},e.prototype.downplay=function(){rd(this)},e.prototype.getSymbolType=function(){var n=this.childAt(0);return n&&n.getSymbolType()},e.prototype.updateData=function(n,r){var i=this,a=n.hostModel;this.childAt(0).updateData(n,r);var s=this.childAt(1),o=n.getItemModel(r),l=n.getItemVisual(r,"symbol"),d=Wg(n.getItemVisual(r,"symbolSize")),c=n.getItemVisual(r,"style"),f=c&&c.fill,p=o.getModel("emphasis");s.setScale(d),s.traverse(function(v){v.setStyle("fill",f)});var h=mh(n.getItemVisual(r,"symbolOffset"),d);h&&(s.x=h[0],s.y=h[1]);var m=n.getItemVisual(r,"symbolRotate");s.rotation=(m||0)*Math.PI/180||0;var g={};g.showEffectOn=a.get("showEffectOn"),g.rippleScale=o.get(["rippleEffect","scale"]),g.brushType=o.get(["rippleEffect","brushType"]),g.period=o.get(["rippleEffect","period"])*1e3,g.effectOffset=r/n.count(),g.z=a.getShallow("z")||0,g.zlevel=a.getShallow("zlevel")||0,g.symbolType=l,g.color=f,g.rippleEffectColor=o.get(["rippleEffect","color"]),g.rippleNumber=o.get(["rippleEffect","number"]),g.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(g):this.startEffectAnimation(g),this._effectCfg=g):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(v){v==="emphasis"?g.showEffectOn!=="render"&&i.startEffectAnimation(g):v==="normal"&&g.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=g,_r(this,p.get("focus"),p.get("blurScope"),p.get("disabled"))},e.prototype.fadeOut=function(n){n&&n()},e}(kt),pGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){this._symbolDraw=new Rb(fGe)},e.prototype.render=function(n,r,i){var a=n.getData(),s=this._symbolDraw;s.updateData(a,{clipShape:this._getClipShape(n)}),this.group.add(s.group)},e.prototype._getClipShape=function(n){var r=n.coordinateSystem,i=r&&r.getArea&&r.getArea();return n.get("clip",!0)?i:null},e.prototype.updateTransform=function(n,r,i){var a=n.getData();this.group.dirty();var s=Ib("").reset(n,r,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(n){var r=n.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=j6e(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(Pn),hGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n,r){return md(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(n,r,i){return i.point(r.getItemLayout(n))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(Zn);function mGe(t){t.registerChartView(pGe),t.registerSeriesModel(hGe),t.registerLayout(Ib("effectScatter"))}var kae=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this)||this;return a.add(a.createLine(n,r,i)),a._updateEffectSymbol(n,r),a}return e.prototype.createLine=function(n,r,i){return new aO(n,r,i)},e.prototype._updateEffectSymbol=function(n,r){var i=n.getItemModel(r),a=i.getModel("effect"),s=a.get("symbolSize"),o=a.get("symbol");Be(s)||(s=[s,s]);var l=n.getItemVisual(r,"style"),d=a.get("color")||l&&l.stroke,c=this.childAt(1);this._symbolType!==o&&(this.remove(c),c=Ur(o,-.5,-.5,1,1,d),c.z2=100,c.culling=!0,this.add(c)),c&&(c.setStyle("shadowColor",d),c.setStyle(a.getItemStyle(["color"])),c.scaleX=s[0],c.scaleY=s[1],c.setColor(d),this._symbolType=o,this._symbolScale=s,this._updateEffectAnimation(n,a,r))},e.prototype._updateEffectAnimation=function(n,r,i){var a=this.childAt(1);if(a){var s=n.getItemLayout(i),o=r.get("period")*1e3,l=r.get("loop"),d=r.get("roundTrip"),c=r.get("constantSpeed"),f=gi(r.get("delay"),function(h){return h/n.count()*o/3});if(a.ignore=!0,this._updateAnimationPoints(a,s),c>0&&(o=this._getLineLength(a)/c*1e3),o!==this._period||l!==this._loop||d!==this._roundTrip){a.stopAnimation();var p=void 0;gt(f)?p=f(i):p=f,a.__t>0&&(p=-o*a.__t),this._animateSymbol(a,o,p,l,d)}this._period=o,this._loop=l,this._roundTrip=d}},e.prototype._animateSymbol=function(n,r,i,a,s){if(r>0){n.__t=0;var o=this,l=n.animate("",a).when(s?r*2:r,{__t:s?2:1}).delay(i).during(function(){o._updateSymbolPosition(n)});a||l.done(function(){o.remove(n)}),l.start()}},e.prototype._getLineLength=function(n){return ec(n.__p1,n.__cp1)+ec(n.__cp1,n.__p2)},e.prototype._updateAnimationPoints=function(n,r){n.__p1=r[0],n.__p2=r[1],n.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(n,r,i){this.childAt(0).updateData(n,r,i),this._updateEffectSymbol(n,r)},e.prototype._updateSymbolPosition=function(n){var r=n.__p1,i=n.__p2,a=n.__cp1,s=n.__t<1?n.__t:2-n.__t,o=[n.x,n.y],l=o.slice(),d=ci,c=CM;o[0]=d(r[0],a[0],i[0],s),o[1]=d(r[1],a[1],i[1],s);var f=n.__t<1?c(r[0],a[0],i[0],s):c(i[0],a[0],r[0],1-s),p=n.__t<1?c(r[1],a[1],i[1],s):c(i[1],a[1],r[1],1-s);n.rotation=-Math.atan2(p,f)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(n.__lastT!==void 0&&n.__lastT<n.__t?(n.scaleY=ec(l,o)*1.05,s===1&&(o[0]=l[0]+(o[0]-l[0])/2,o[1]=l[1]+(o[1]-l[1])/2)):n.__lastT===1?n.scaleY=2*ec(r,o):n.scaleY=this._symbolScale[1]),n.__lastT=n.__t,n.ignore=!1,n.x=o[0],n.y=o[1]},e.prototype.updateLayout=function(n,r){this.childAt(0).updateLayout(n,r);var i=n.getItemModel(r).getModel("effect");this._updateEffectAnimation(n,i,r)},e}(kt),Sae=function(t){Ce(e,t);function e(n,r,i){var a=t.call(this)||this;return a._createPolyline(n,r,i),a}return e.prototype._createPolyline=function(n,r,i){var a=n.getItemLayout(r),s=new Da({shape:{points:a}});this.add(s),this._updateCommonStl(n,r,i)},e.prototype.updateData=function(n,r,i){var a=n.hostModel,s=this.childAt(0),o={shape:{points:n.getItemLayout(r)}};yn(s,o,a,r),this._updateCommonStl(n,r,i)},e.prototype._updateCommonStl=function(n,r,i){var a=this.childAt(0),s=n.getItemModel(r),o=i&&i.emphasisLineStyle,l=i&&i.focus,d=i&&i.blurScope,c=i&&i.emphasisDisabled;if(!i||n.hasItemOption){var f=s.getModel("emphasis");o=f.getModel("lineStyle").getLineStyle(),c=f.get("disabled"),l=f.get("focus"),d=f.get("blurScope")}a.useStyle(n.getItemVisual(r,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var p=a.ensureState("emphasis");p.style=o,_r(this,l,d,c)},e.prototype.updateLayout=function(n,r){var i=this.childAt(0);i.setShape("points",n.getItemLayout(r))},e}(kt),gGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._lastFrame=0,n._lastFramePercent=0,n}return e.prototype.createLine=function(n,r,i){return new Sae(n,r,i)},e.prototype._updateAnimationPoints=function(n,r){this._points=r;for(var i=[0],a=0,s=1;s<r.length;s++){var o=r[s-1],l=r[s];a+=ec(o,l),i.push(a)}if(a===0){this._length=0;return}for(var s=0;s<i.length;s++)i[s]/=a;this._offsets=i,this._length=a},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(n){var r=n.__t<1?n.__t:2-n.__t,i=this._points,a=this._offsets,s=i.length;if(a){var o=this._lastFrame,l;if(r<this._lastFramePercent){var d=Math.min(o+1,s-1);for(l=d;l>=0&&!(a[l]<=r);l--);l=Math.min(l,s-2)}else{for(l=o;l<s&&!(a[l]>r);l++);l=Math.min(l-1,s-2)}var c=(r-a[l])/(a[l+1]-a[l]),f=i[l],p=i[l+1];n.x=f[0]*(1-c)+c*p[0],n.y=f[1]*(1-c)+c*p[1];var h=n.__t<1?p[0]-f[0]:f[0]-p[0],m=n.__t<1?p[1]-f[1]:f[1]-p[1];n.rotation=-Math.atan2(m,h)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,n.ignore=!1}},e}(kae),vGe=function(){function t(){this.polyline=!1,this.curveness=0,this.segs=[]}return t}(),yGe=function(t){Ce(e,t);function e(n){var r=t.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new vGe},e.prototype.buildPath=function(n,r){var i=r.segs,a=r.curveness,s;if(r.polyline)for(s=this._off;s<i.length;){var o=i[s++];if(o>0){n.moveTo(i[s++],i[s++]);for(var l=1;l<o;l++)n.lineTo(i[s++],i[s++])}}else for(s=this._off;s<i.length;){var d=i[s++],c=i[s++],f=i[s++],p=i[s++];if(n.moveTo(d,c),a>0){var h=(d+f)/2-(c-p)*a,m=(c+p)/2-(f-d)*a;n.quadraticCurveTo(h,m,f,p)}else n.lineTo(f,p)}this.incremental&&(this._off=s,this.notClear=!0)},e.prototype.findDataIndex=function(n,r){var i=this.shape,a=i.segs,s=i.curveness,o=this.style.lineWidth;if(i.polyline)for(var l=0,d=0;d<a.length;){var c=a[d++];if(c>0)for(var f=a[d++],p=a[d++],h=1;h<c;h++){var m=a[d++],g=a[d++];if(Hd(f,p,m,g,o,n,r))return l}l++}else for(var l=0,d=0;d<a.length;){var f=a[d++],p=a[d++],m=a[d++],g=a[d++];if(s>0){var v=(f+m)/2-(p-g)*s,_=(p+g)/2-(m-f)*s;if(Qee(f,p,v,_,m,g,o,n,r))return l}else if(Hd(f,p,m,g,o,n,r))return l;l++}return-1},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(n=i[0],r=i[1],a.contain(n,r)){var s=this.hoverDataIdx=this.findDataIndex(n,r);return s>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,i=r.segs,a=1/0,s=1/0,o=-1/0,l=-1/0,d=0;d<i.length;){var c=i[d++],f=i[d++];a=Math.min(c,a),o=Math.max(c,o),s=Math.min(f,s),l=Math.max(f,l)}n=this._rect=new qt(a,s,o,l)}return n},e}(Zt),bGe=function(){function t(){this.group=new kt}return t.prototype.updateData=function(e){this._clear();var n=this._create();n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e)},t.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(e,n){var r=this._newAdded[0],i=n.getLayout("linesPoints"),a=r&&r.shape.segs;if(a&&a.length<2e4){var s=a.length,o=new Float32Array(s+i.length);o.set(a),o.set(i,s),r.setShape({segs:o})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,n),l.__startIndex=e.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new yGe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},t.prototype._setCommon=function(e,n,r){var i=n.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=n.getVisual("style");a&&a.stroke&&e.setStyle("stroke",a.stroke),e.setStyle("fill",null);var s=Tt(e);s.seriesIndex=i.seriesIndex,e.on("mousemove",function(o){s.dataIndex=null;var l=e.hoverDataIdx;l>0&&(s.dataIndex=l+e.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),Cae={seriesType:"lines",plan:Hg(),reset:function(t){var e=t.coordinateSystem;if(e){var n=t.get("polyline"),r=t.pipelineContext.large;return{progress:function(i,a){var s=[];if(r){var o=void 0,l=i.end-i.start;if(n){for(var d=0,c=i.start;c<i.end;c++)d+=t.getLineCoordsCount(c);o=new Float32Array(l+d*2)}else o=new Float32Array(l*4);for(var f=0,p=[],c=i.start;c<i.end;c++){var h=t.getLineCoords(c,s);n&&(o[f++]=h);for(var m=0;m<h;m++)p=e.dataToPoint(s[m],!1,p),o[f++]=p[0],o[f++]=p[1]}a.setLayout("linesPoints",o)}else for(var c=i.start;c<i.end;c++){var g=a.getItemModel(c),h=t.getLineCoords(c,s),v=[];if(n)for(var _=0;_<h;_++)v.push(e.dataToPoint(s[_]));else{v[0]=e.dataToPoint(s[0]),v[1]=e.dataToPoint(s[1]);var x=g.get(["lineStyle","curveness"]);+x&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*x,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*x])}a.setItemLayout(c,v)}}}}}},_Ge=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=n.getData(),s=this._updateLineDraw(a,n),o=n.get("zlevel"),l=n.get(["effect","trailLength"]),d=i.getZr(),c=d.painter.getType()==="svg";c||d.painter.getLayer(o).clear(!0),this._lastZlevel!=null&&!c&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(n)&&l>0&&(c||d.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),s.updateData(a);var f=n.get("clip",!0)&&Pb(n.coordinateSystem,!1,n);f?this.group.setClipPath(f):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},e.prototype.incrementalPrepareRender=function(n,r,i){var a=n.getData(),s=this._updateLineDraw(a,n);s.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},e.prototype.incrementalRender=function(n,r,i){this._lineDraw.incrementalUpdate(n,r.getData()),this._finished=n.end===r.getData().count()},e.prototype.eachRendered=function(n){this._lineDraw&&this._lineDraw.eachRendered(n)},e.prototype.updateTransform=function(n,r,i){var a=n.getData(),s=n.pipelineContext;if(!this._finished||s.large||s.progressiveRender)return{update:!0};var o=Cae.reset(n,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},e.prototype._updateLineDraw=function(n,r){var i=this._lineDraw,a=this._showEffect(r),s=!!r.get("polyline"),o=r.pipelineContext,l=o.large;return(!i||a!==this._hasEffet||s!==this._isPolyline||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=l?new bGe:new sO(s?a?gGe:Sae:a?kae:aO),this._hasEffet=a,this._isPolyline=s,this._isLargeDraw=l),this.group.add(i.group),i},e.prototype._showEffect=function(n){return!!n.get(["effect","show"])},e.prototype._clearLayer=function(n){var r=n.getZr(),i=r.painter.getType()==="svg";!i&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(n,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(n,r){this.remove(n,r)},e.type="lines",e}(Pn),xGe=typeof Uint32Array=="undefined"?Array:Uint32Array,wGe=typeof Float64Array=="undefined"?Array:Float64Array;function wz(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=ze(e,function(n){var r=[n[0].coord,n[1].coord],i={coords:r};return n[0].name&&(i.fromName=n[0].name),n[1].name&&(i.toName=n[1].name),FP([i,n[0],n[1]])}))}var kGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return e.prototype.init=function(n){n.data=n.data||[],wz(n);var r=this._processFlatCoordsArray(n.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(n.data=new Float32Array(r.count)),t.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(n){if(wz(n),n.data){var r=this._processFlatCoordsArray(n.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(n.data=new Float32Array(r.count))}t.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(n){var r=this._processFlatCoordsArray(n.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=u1(this._flatCoords,r.flatCoords),this._flatCoordsOffset=u1(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),n.data=new Float32Array(r.count)),this.getRawData().appendData(n.data)},e.prototype._getCoordsFromItemModel=function(n){var r=this.getData().getItemModel(n),i=r.option instanceof Array?r.option:r.getShallow("coords");return i},e.prototype.getLineCoordsCount=function(n){return this._flatCoordsOffset?this._flatCoordsOffset[n*2+1]:this._getCoordsFromItemModel(n).length},e.prototype.getLineCoords=function(n,r){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[n*2],a=this._flatCoordsOffset[n*2+1],s=0;s<a;s++)r[s]=r[s]||[],r[s][0]=this._flatCoords[i+s*2],r[s][1]=this._flatCoords[i+s*2+1];return a}else{for(var o=this._getCoordsFromItemModel(n),s=0;s<o.length;s++)r[s]=r[s]||[],r[s][0]=o[s][0],r[s][1]=o[s][1];return o.length}},e.prototype._processFlatCoordsArray=function(n){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),pn(n[0])){for(var i=n.length,a=new xGe(i),s=new wGe(i),o=0,l=0,d=0,c=0;c<i;){d++;var f=n[c++];a[l++]=o+r,a[l++]=f;for(var p=0;p<f;p++){var h=n[c++],m=n[c++];s[o++]=h,s[o++]=m}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:s,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:n.length}},e.prototype.getInitialData=function(n,r){var i=new ba(["value"],this);return i.hasItemOption=!1,i.initData(n.data,[],function(a,s,o,l){if(a instanceof Array)return NaN;i.hasItemOption=!0;var d=a.value;if(d!=null)return d instanceof Array?d[l]:d}),i},e.prototype.formatTooltip=function(n,r,i){var a=this.getData(),s=a.getItemModel(n),o=s.get("name");if(o)return o;var l=s.get("fromName"),d=s.get("toName"),c=[];return l!=null&&c.push(l),d!=null&&c.push(d),di("nameValue",{name:c.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var n=this.option.progressive;return n==null?this.option.large?1e4:this.get("progressive"):n},e.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n==null?this.option.large?2e4:this.get("progressiveThreshold"):n},e.prototype.getZLevelKey=function(){var n=this.getModel("effect"),r=n.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:n.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(Zn);function Cx(t){return t instanceof Array||(t=[t,t]),t}var SGe={seriesType:"lines",reset:function(t){var e=Cx(t.get("symbol")),n=Cx(t.get("symbolSize")),r=t.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",n&&n[0]),r.setVisual("toSymbolSize",n&&n[1]);function i(a,s){var o=a.getItemModel(s),l=Cx(o.getShallow("symbol",!0)),d=Cx(o.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(s,"fromSymbol",l[0]),l[1]&&a.setItemVisual(s,"toSymbol",l[1]),d[0]&&a.setItemVisual(s,"fromSymbolSize",d[0]),d[1]&&a.setItemVisual(s,"toSymbolSize",d[1])}return{dataEach:r.hasItemOption?i:null}}};function CGe(t){t.registerChartView(_Ge),t.registerSeriesModel(kGe),t.registerLayout(Cae),t.registerVisual(SGe)}var AGe=256,TGe=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=Dc.createCanvas();this.canvas=e}return t.prototype.update=function(e,n,r,i,a,s){var o=this._getBrush(),l=this._getGradient(a,"inRange"),d=this._getGradient(a,"outOfRange"),c=this.pointSize+this.blurSize,f=this.canvas,p=f.getContext("2d"),h=e.length;f.width=n,f.height=r;for(var m=0;m<h;++m){var g=e[m],v=g[0],_=g[1],x=g[2],w=i(x);p.globalAlpha=w,p.drawImage(o,v-c,_-c)}if(!f.width||!f.height)return f;for(var k=p.getImageData(0,0,f.width,f.height),S=k.data,C=0,A=S.length,M=this.minOpacity,$=this.maxOpacity,R=$-M;C<A;){var w=S[C+3]/256,I=Math.floor(w*(AGe-1))*4;if(w>0){var B=s(w)?l:d;w>0&&(w=w*R+M),S[C++]=B[I],S[C++]=B[I+1],S[C++]=B[I+2],S[C++]=B[I+3]*w*256}else C+=4}return p.putImageData(k,0,0),f},t.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=Dc.createCanvas()),n=this.pointSize+this.blurSize,r=n*2;e.width=r,e.height=r;var i=e.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-n,n,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),e},t.prototype._getGradient=function(e,n){for(var r=this._gradientPixels,i=r[n]||(r[n]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],s=0,o=0;o<256;o++)e[n](o/255,!0,a),i[s++]=a[0],i[s++]=a[1],i[s++]=a[2],i[s++]=a[3];return i},t}();function EGe(t,e,n){var r=t[1]-t[0];e=ze(e,function(s){return{interval:[(s.interval[0]-t[0])/r,(s.interval[1]-t[0])/r]}});var i=e.length,a=0;return function(s){var o;for(o=a;o<i;o++){var l=e[o].interval;if(l[0]<=s&&s<=l[1]){a=o;break}}if(o===i)for(o=a-1;o>=0;o--){var l=e[o].interval;if(l[0]<=s&&s<=l[1]){a=o;break}}return o>=0&&o<i&&n[o]}}function MGe(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(r){return r>=e[0]&&r<=e[1]}}function kz(t){var e=t.dimensions;return e[0]==="lng"&&e[1]==="lat"}var $Ge=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a;r.eachComponent("visualMap",function(o){o.eachTargetSeries(function(l){l===n&&(a=o)})}),this._progressiveEls=null,this.group.removeAll();var s=n.coordinateSystem;s.type==="cartesian2d"||s.type==="calendar"?this._renderOnCartesianAndCalendar(n,i,0,n.getData().count()):kz(s)&&this._renderOnGeo(s,n,a,i)},e.prototype.incrementalPrepareRender=function(n,r,i){this.group.removeAll()},e.prototype.incrementalRender=function(n,r,i,a){var s=r.coordinateSystem;s&&(kz(s)?this.render(r,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,n.start,n.end,!0)))},e.prototype.eachRendered=function(n){Gc(this._progressiveEls||this.group,n)},e.prototype._renderOnCartesianAndCalendar=function(n,r,i,a,s){var o=n.coordinateSystem,l=vh(o,"cartesian2d"),d,c,f,p;if(l){var h=o.getAxis("x"),m=o.getAxis("y");d=h.getBandWidth()+.5,c=m.getBandWidth()+.5,f=h.scale.getExtent(),p=m.scale.getExtent()}for(var g=this.group,v=n.getData(),_=n.getModel(["emphasis","itemStyle"]).getItemStyle(),x=n.getModel(["blur","itemStyle"]).getItemStyle(),w=n.getModel(["select","itemStyle"]).getItemStyle(),k=n.get(["itemStyle","borderRadius"]),S=ui(n),C=n.getModel("emphasis"),A=C.get("focus"),M=C.get("blurScope"),$=C.get("disabled"),R=l?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],I=i;I<a;I++){var B=void 0,j=v.getItemVisual(I,"style");if(l){var z=v.get(R[0],I),F=v.get(R[1],I);if(isNaN(v.get(R[2],I))||isNaN(z)||isNaN(F)||z<f[0]||z>f[1]||F<p[0]||F>p[1])continue;var q=o.dataToPoint([z,F]);B=new sn({shape:{x:q[0]-d/2,y:q[1]-c/2,width:d,height:c},style:j})}else{if(isNaN(v.get(R[1],I)))continue;B=new sn({z2:1,shape:o.dataToRect([v.get(R[0],I)]).contentShape,style:j})}if(v.hasItemOption){var N=v.getItemModel(I),O=N.getModel("emphasis");_=O.getModel("itemStyle").getItemStyle(),x=N.getModel(["blur","itemStyle"]).getItemStyle(),w=N.getModel(["select","itemStyle"]).getItemStyle(),k=N.get(["itemStyle","borderRadius"]),A=O.get("focus"),M=O.get("blurScope"),$=O.get("disabled"),S=ui(N)}B.shape.r=k;var V=n.getRawValue(I),L="-";V&&V[2]!=null&&(L=V[2]+""),Li(B,S,{labelFetcher:n,labelDataIndex:I,defaultOpacity:j.opacity,defaultText:L}),B.ensureState("emphasis").style=_,B.ensureState("blur").style=x,B.ensureState("select").style=w,_r(B,A,M,$),B.incremental=s,s&&(B.states.emphasis.hoverLayer=!0),g.add(B),v.setItemGraphicEl(I,B),this._progressiveEls&&this._progressiveEls.push(B)}},e.prototype._renderOnGeo=function(n,r,i,a){var s=i.targetVisuals.inRange,o=i.targetVisuals.outOfRange,l=r.getData(),d=this._hmLayer||this._hmLayer||new TGe;d.blurSize=r.get("blurSize"),d.pointSize=r.get("pointSize"),d.minOpacity=r.get("minOpacity"),d.maxOpacity=r.get("maxOpacity");var c=n.getViewRect().clone(),f=n.getRoamTransform();c.applyTransform(f);var p=Math.max(c.x,0),h=Math.max(c.y,0),m=Math.min(c.width+c.x,a.getWidth()),g=Math.min(c.height+c.y,a.getHeight()),v=m-p,_=g-h,x=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],w=l.mapArray(x,function(A,M,$){var R=n.dataToPoint([A,M]);return R[0]-=p,R[1]-=h,R.push($),R}),k=i.getExtent(),S=i.type==="visualMap.continuous"?MGe(k,i.option.range):EGe(k,i.getPieceList(),i.option.selected);d.update(w,v,_,s.color.getNormalizer(),{inRange:s.color.getColorMapper(),outOfRange:o.color.getColorMapper()},S);var C=new xi({style:{width:v,height:_,x:p,y:h,image:d.canvas},silent:!0});this.group.add(C)},e.type="heatmap",e}(Pn),DGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){return md(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var n=Tb.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(Zn);function RGe(t){t.registerChartView($Ge),t.registerSeriesModel(DGe)}var PGe=["itemStyle","borderWidth"],Sz=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],W3=new hd,IGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=this.group,s=n.getData(),o=this._data,l=n.coordinateSystem,d=l.getBaseAxis(),c=d.isHorizontal(),f=l.master.getRect(),p={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:n,coordSys:l,coordSysExtent:[[f.x,f.x+f.width],[f.y,f.y+f.height]],isHorizontal:c,valueDim:Sz[+c],categoryDim:Sz[1-+c]};s.diff(o).add(function(m){if(s.hasValue(m)){var g=Az(s,m),v=Cz(s,m,g,p),_=Tz(s,p,v);s.setItemGraphicEl(m,_),a.add(_),Mz(_,p,v)}}).update(function(m,g){var v=o.getItemGraphicEl(g);if(!s.hasValue(m)){a.remove(v);return}var _=Az(s,m),x=Cz(s,m,_,p),w=Dae(s,x);v&&w!==v.__pictorialShapeStr&&(a.remove(v),s.setItemGraphicEl(m,null),v=null),v?BGe(v,p,x):v=Tz(s,p,x,!0),s.setItemGraphicEl(m,v),v.__pictorialSymbolMeta=x,a.add(v),Mz(v,p,x)}).remove(function(m){var g=o.getItemGraphicEl(m);g&&Ez(o,m,g.__pictorialSymbolMeta.animationModel,g)}).execute();var h=n.get("clip",!0)?Pb(n.coordinateSystem,!1,n):null;return h?a.setClipPath(h):a.removeClipPath(),this._data=s,this.group},e.prototype.remove=function(n,r){var i=this.group,a=this._data;n.get("animation")?a&&a.eachItemGraphicEl(function(s){Ez(a,Tt(s).dataIndex,n,s)}):i.removeAll()},e.type="pictorialBar",e}(Pn);function Cz(t,e,n,r){var i=t.getItemLayout(e),a=n.get("symbolRepeat"),s=n.get("symbolClip"),o=n.get("symbolPosition")||"start",l=n.get("symbolRotate"),d=(l||0)*Math.PI/180||0,c=n.get("symbolPatternSize")||2,f=n.isAnimationEnabled(),p={dataIndex:e,layout:i,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:s,symbolRepeat:a,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:d,animationModel:f?n:null,hoverScale:f&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};OGe(n,a,i,r,p),LGe(t,e,i,a,s,p.boundingLength,p.pxSign,c,r,p),VGe(n,p.symbolScale,d,r,p);var h=p.symbolSize,m=mh(n.get("symbolOffset"),h);return NGe(n,h,i,a,s,m,o,p.valueLineWidth,p.boundingLength,p.repeatCutLength,r,p),p}function OGe(t,e,n,r,i){var a=r.valueDim,s=t.get("symbolBoundingData"),o=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=o.toGlobalCoord(o.dataToCoord(0)),d=1-+(n[a.wh]<=0),c;if(Be(s)){var f=[G3(o,s[0])-l,G3(o,s[1])-l];f[1]<f[0]&&f.reverse(),c=f[d]}else s!=null?c=G3(o,s)-l:e?c=r.coordSysExtent[a.index][d]-l:c=n[a.wh];i.boundingLength=c,e&&(i.repeatCutLength=n[a.wh]);var p=a.xy==="x",h=o.inverse;i.pxSign=p&&!h||!p&&h?c>=0?1:-1:c>0?1:-1}function G3(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function LGe(t,e,n,r,i,a,s,o,l,d){var c=l.valueDim,f=l.categoryDim,p=Math.abs(n[f.wh]),h=t.getItemVisual(e,"symbolSize"),m;Be(h)?m=h.slice():h==null?m=["100%","100%"]:m=[h,h],m[f.index]=Qe(m[f.index],p),m[c.index]=Qe(m[c.index],r?p:Math.abs(a)),d.symbolSize=m;var g=d.symbolScale=[m[0]/o,m[1]/o];g[c.index]*=(l.isHorizontal?-1:1)*s}function VGe(t,e,n,r,i){var a=t.get(PGe)||0;a&&(W3.attr({scaleX:e[0],scaleY:e[1],rotation:n}),W3.updateTransform(),a/=W3.getLineScale(),a*=e[r.valueDim.index]),i.valueLineWidth=a||0}function NGe(t,e,n,r,i,a,s,o,l,d,c,f){var p=c.categoryDim,h=c.valueDim,m=f.pxSign,g=Math.max(e[h.index]+o,0),v=g;if(r){var _=Math.abs(l),x=gi(t.get("symbolMargin"),"15%")+"",w=!1;x.lastIndexOf("!")===x.length-1&&(w=!0,x=x.slice(0,x.length-1));var k=Qe(x,e[h.index]),S=Math.max(g+k*2,0),C=w?0:k*2,A=jee(r),M=A?r:$z((_+C)/S),$=_-M*g;k=$/2/(w?M:Math.max(M-1,1)),S=g+k*2,C=w?0:k*2,!A&&r!=="fixed"&&(M=d?$z((Math.abs(d)+C)/S):0),v=M*S-C,f.repeatTimes=M,f.symbolMargin=k}var R=m*(v/2),I=f.pathPosition=[];I[p.index]=n[p.wh]/2,I[h.index]=s==="start"?R:s==="end"?l-R:l/2,a&&(I[0]+=a[0],I[1]+=a[1]);var B=f.bundlePosition=[];B[p.index]=n[p.xy],B[h.index]=n[h.xy];var j=f.barRectShape=Oe({},n);j[h.wh]=m*Math.max(Math.abs(n[h.wh]),Math.abs(I[h.index]+R)),j[p.wh]=n[p.wh];var z=f.clipShape={};z[p.xy]=-n[p.xy],z[p.wh]=c.ecSize[p.wh],z[h.xy]=0,z[h.wh]=n[h.wh]}function Aae(t){var e=t.symbolPatternSize,n=Ur(t.symbolType,-e/2,-e/2,e,e);return n.attr({culling:!0}),n.type!=="image"&&n.setStyle({strokeNoScale:!0}),n}function Tae(t,e,n,r){var i=t.__pictorialBundle,a=n.symbolSize,s=n.valueLineWidth,o=n.pathPosition,l=e.valueDim,d=n.repeatTimes||0,c=0,f=a[e.valueDim.index]+s+n.symbolMargin*2;for(gO(t,function(g){g.__pictorialAnimationIndex=c,g.__pictorialRepeatTimes=d,c<d?Um(g,null,m(c),n,r):Um(g,null,{scaleX:0,scaleY:0},n,r,function(){i.remove(g)}),c++});c<d;c++){var p=Aae(n);p.__pictorialAnimationIndex=c,p.__pictorialRepeatTimes=d,i.add(p);var h=m(c);Um(p,{x:h.x,y:h.y,scaleX:0,scaleY:0},{scaleX:h.scaleX,scaleY:h.scaleY,rotation:h.rotation},n,r)}function m(g){var v=o.slice(),_=n.pxSign,x=g;return(n.symbolRepeatDirection==="start"?_>0:_<0)&&(x=d-1-g),v[l.index]=f*(x-d/2+.5)+o[l.index],{x:v[0],y:v[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function Eae(t,e,n,r){var i=t.__pictorialBundle,a=t.__pictorialMainPath;a?Um(a,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,r):(a=t.__pictorialMainPath=Aae(n),i.add(a),Um(a,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,r))}function Mae(t,e,n){var r=Oe({},e.barRectShape),i=t.__pictorialBarRect;i?Um(i,null,{shape:r},e,n):(i=t.__pictorialBarRect=new sn({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,t.add(i))}function $ae(t,e,n,r){if(n.symbolClip){var i=t.__pictorialClipPath,a=Oe({},n.clipShape),s=e.valueDim,o=n.animationModel,l=n.dataIndex;if(i)yn(i,{shape:a},o,l);else{a[s.wh]=0,i=new sn({shape:a}),t.__pictorialBundle.setClipPath(i),t.__pictorialClipPath=i;var d={};d[s.wh]=n.clipShape[s.wh],hh[r?"updateProps":"initProps"](i,{shape:d},o,l)}}}function Az(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=jGe,n.isAnimationEnabled=FGe,n}function jGe(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function FGe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Tz(t,e,n,r){var i=new kt,a=new kt;return i.add(a),i.__pictorialBundle=a,a.x=n.bundlePosition[0],a.y=n.bundlePosition[1],n.symbolRepeat?Tae(i,e,n):Eae(i,e,n),Mae(i,n,r),$ae(i,e,n,r),i.__pictorialShapeStr=Dae(t,n),i.__pictorialSymbolMeta=n,i}function BGe(t,e,n){var r=n.animationModel,i=n.dataIndex,a=t.__pictorialBundle;yn(a,{x:n.bundlePosition[0],y:n.bundlePosition[1]},r,i),n.symbolRepeat?Tae(t,e,n,!0):Eae(t,e,n,!0),Mae(t,n,!0),$ae(t,e,n,!0)}function Ez(t,e,n,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];gO(r,function(s){a.push(s)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),oe(a,function(s){Pc(s,{scaleX:0,scaleY:0},n,e,function(){r.parent&&r.parent.remove(r)})}),t.setItemGraphicEl(e,null)}function Dae(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function gO(t,e,n){oe(t.__pictorialBundle.children(),function(r){r!==t.__pictorialBarRect&&e.call(n,r)})}function Um(t,e,n,r,i,a){e&&t.attr(e),r.symbolClip&&!i?n&&t.attr(n):n&&hh[i?"updateProps":"initProps"](t,n,r.animationModel,r.dataIndex,a)}function Mz(t,e,n){var r=n.dataIndex,i=n.itemModel,a=i.getModel("emphasis"),s=a.getModel("itemStyle").getItemStyle(),o=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),d=i.getShallow("cursor"),c=a.get("focus"),f=a.get("blurScope"),p=a.get("scale");gO(t,function(g){if(g instanceof xi){var v=g.style;g.useStyle(Oe({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},n.style))}else g.useStyle(n.style);var _=g.ensureState("emphasis");_.style=s,p&&(_.scaleX=g.scaleX*1.1,_.scaleY=g.scaleY*1.1),g.ensureState("blur").style=o,g.ensureState("select").style=l,d&&(g.cursor=d),g.z2=n.z2});var h=e.valueDim.posDesc[+(n.boundingLength>0)],m=t.__pictorialBarRect;m.ignoreClip=!0,Li(m,ui(i),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:bg(e.seriesModel.getData(),r),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:h}),_r(t,c,f,a.get("disabled"))}function $z(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var zGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return e.prototype.getInitialData=function(n){return n.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Yc(T1.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(T1);function UGe(t){t.registerChartView(IGe),t.registerSeriesModel(zGe),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Pt(hre,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,mre("pictorialBar"))}var HGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._layers=[],n}return e.prototype.render=function(n,r,i){var a=n.getData(),s=this,o=this.group,l=n.getLayerSeries(),d=a.getLayout("layoutInfo"),c=d.rect,f=d.boundaryGap;o.x=0,o.y=c.y+f[0];function p(v){return v.name}var h=new id(this._layersSeries||[],l,p,p),m=[];h.add(ut(g,this,"add")).update(ut(g,this,"update")).remove(ut(g,this,"remove")).execute();function g(v,_,x){var w=s._layers;if(v==="remove"){o.remove(w[_]);return}for(var k=[],S=[],C,A=l[_].indices,M=0;M<A.length;M++){var $=a.getItemLayout(A[M]),R=$.x,I=$.y0,B=$.y;k.push(R,I),S.push(R,I+B),C=a.getItemVisual(A[M],"style")}var j,z=a.getItemLayout(A[0]),F=n.getModel("label"),q=F.get("margin"),N=n.getModel("emphasis");if(v==="add"){var O=m[_]=new kt;j=new rie({shape:{points:k,stackedOnPoints:S,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),O.add(j),o.add(O),n.isAnimationEnabled()&&j.setClipPath(qGe(j.getBoundingRect(),n,function(){j.removeClipPath()}))}else{var O=w[x];j=O.childAt(0),o.add(O),m[_]=O,yn(j,{shape:{points:k,stackedOnPoints:S}},n),Vo(j)}Li(j,ui(n),{labelDataIndex:A[M-1],defaultText:a.getName(A[M-1]),inheritColor:C.fill},{normal:{verticalAlign:"middle"}}),j.setTextConfig({position:null,local:!0});var V=j.getTextContent();V&&(V.x=z.x-q,V.y=z.y0+z.y/2),j.useStyle(C),a.setItemGraphicEl(_,j),Oi(j,n),_r(j,N.get("focus"),N.get("blurScope"),N.get("disabled"))}this._layersSeries=l,this._layers=m},e.type="themeRiver",e}(Pn);function qGe(t,e,n){var r=new sn({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return sr(r,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},e,n),r}var Y3=2,WGe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Lb(ut(this.getData,this),ut(this.getRawData,this))},e.prototype.fixData=function(n){var r=n.length,i={},a=FM(n,function(p){return i.hasOwnProperty(p[0]+"")||(i[p[0]+""]=-1),p[2]}),s=[];a.buckets.each(function(p,h){s.push({name:h,dataList:p})});for(var o=s.length,l=0;l<o;++l){for(var d=s[l].name,c=0;c<s[l].dataList.length;++c){var f=s[l].dataList[c][0]+"";i[f]=l}for(var f in i)i.hasOwnProperty(f)&&i[f]!==l&&(i[f]=l,n[r]=[f,0,d],r++)}return n},e.prototype.getInitialData=function(n,r){for(var i=this.getReferringComponents("singleAxis",Nr).models[0],a=i.get("type"),s=kn(n.data,function(m){return m[2]!==void 0}),o=this.fixData(s||[]),l=[],d=this.nameMap=pt(),c=0,f=0;f<o.length;++f)l.push(o[f][Y3]),d.get(o[f][Y3])||(d.set(o[f][Y3],c),c++);var p=Mb(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Nk(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,h=new ba(p,this);return h.initData(o),h},e.prototype.getLayerSeries=function(){for(var n=this.getData(),r=n.count(),i=[],a=0;a<r;++a)i[a]=a;var s=n.mapDimension("single"),o=FM(i,function(d){return n.get("name",d)}),l=[];return o.buckets.each(function(d,c){d.sort(function(f,p){return n.get(s,f)-n.get(s,p)}),l.push({name:c,indices:d})}),l},e.prototype.getAxisTooltipData=function(n,r,i){Be(n)||(n=n?[n]:[]);for(var a=this.getData(),s=this.getLayerSeries(),o=[],l=s.length,d,c=0;c<l;++c){for(var f=Number.MAX_VALUE,p=-1,h=s[c].indices.length,m=0;m<h;++m){var g=a.get(n[0],s[c].indices[m]),v=Math.abs(g-r);v<=f&&(d=g,f=v,p=s[c].indices[m])}o.push(p)}return{dataIndices:o,nestestValue:d}},e.prototype.formatTooltip=function(n,r,i){var a=this.getData(),s=a.getName(n),o=a.get(a.mapDimension("value"),n);return di("nameValue",{name:s,value:o})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Zn);function GGe(t,e){t.eachSeriesByType("themeRiver",function(n){var r=n.getData(),i=n.coordinateSystem,a={},s=i.getRect();a.rect=s;var o=n.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=o,l.orient==="horizontal"){o[0]=Qe(o[0],s.height),o[1]=Qe(o[1],s.height);var d=s.height-o[0]-o[1];Dz(r,n,d)}else{o[0]=Qe(o[0],s.width),o[1]=Qe(o[1],s.width);var c=s.width-o[0]-o[1];Dz(r,n,c)}r.setLayout("layoutInfo",a)})}function Dz(t,e,n){if(t.count())for(var r=e.coordinateSystem,i=e.getLayerSeries(),a=t.mapDimension("single"),s=t.mapDimension("value"),o=ze(i,function(v){return ze(v.indices,function(_){var x=r.dataToPoint(t.get(a,_));return x[1]=t.get(s,_),x})}),l=YGe(o),d=l.y0,c=n/l.max,f=i.length,p=i[0].indices.length,h,m=0;m<p;++m){h=d[m]*c,t.setItemLayout(i[0].indices[m],{layerIndex:0,x:o[0][m][0],y0:h,y:o[0][m][1]*c});for(var g=1;g<f;++g)h+=o[g-1][m][1]*c,t.setItemLayout(i[g].indices[m],{layerIndex:g,x:o[g][m][0],y0:h,y:o[g][m][1]*c})}}function YGe(t){for(var e=t.length,n=t[0].length,r=[],i=[],a=0,s=0;s<n;++s){for(var o=0,l=0;l<e;++l)o+=t[l][s][1];o>a&&(a=o),r.push(o)}for(var d=0;d<n;++d)i[d]=(a-r[d])/2;a=0;for(var c=0;c<n;++c){var f=r[c]+i[c];f>a&&(a=f)}return{y0:i,max:a}}function KGe(t){t.registerChartView(HGe),t.registerSeriesModel(WGe),t.registerLayout(GGe),t.registerProcessor(Ob("themeRiver"))}var XGe=2,ZGe=4,Rz=function(t){Ce(e,t);function e(n,r,i,a){var s=t.call(this)||this;s.z2=XGe,s.textConfig={inside:!0},Tt(s).seriesIndex=r.seriesIndex;var o=new un({z2:ZGe,silent:n.getModel().get(["label","silent"])});return s.setTextContent(o),s.updateData(!0,n,r,i,a),s}return e.prototype.updateData=function(n,r,i,a,s){this.node=r,r.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var o=this;Tt(o).dataIndex=r.dataIndex;var l=r.getModel(),d=l.getModel("emphasis"),c=r.getLayout(),f=Oe({},c);f.label=null;var p=r.getVisual("style");p.lineJoin="bevel";var h=r.getVisual("decal");h&&(p.decal=vg(h,s));var m=up(l.getModel("itemStyle"),f,!0);Oe(f,m),oe(Ea,function(x){var w=o.ensureState(x),k=l.getModel([x,"itemStyle"]);w.style=k.getItemStyle();var S=up(k,f);S&&(w.shape=S)}),n?(o.setShape(f),o.shape.r=c.r0,sr(o,{shape:{r:c.r}},i,r.dataIndex)):(yn(o,{shape:f},i),Vo(o)),o.useStyle(p),this._updateLabel(i);var g=l.getShallow("cursor");g&&o.attr("cursor",g),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var v=d.get("focus"),_=v==="relative"?u1(r.getAncestorsIndices(),r.getDescendantIndices()):v==="ancestor"?r.getAncestorsIndices():v==="descendant"?r.getDescendantIndices():v;_r(this,_,d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(n){var r=this,i=this.node.getModel(),a=i.getModel("label"),s=this.node.getLayout(),o=s.endAngle-s.startAngle,l=(s.startAngle+s.endAngle)/2,d=Math.cos(l),c=Math.sin(l),f=this,p=f.getTextContent(),h=this.node.dataIndex,m=a.get("minAngle")/180*Math.PI,g=a.get("show")&&!(m!=null&&Math.abs(o)<m);p.ignore=!g,oe(m1,function(_){var x=_==="normal"?i.getModel("label"):i.getModel([_,"label"]),w=_==="normal",k=w?p:p.ensureState(_),S=n.getFormattedLabel(h,_);w&&(S=S||r.node.name),k.style=Kn(x,{},null,_!=="normal",!0),S&&(k.style.text=S);var C=x.get("show");C!=null&&!w&&(k.ignore=!C);var A=v(x,"position"),M=w?f:f.states[_],$=M.style.fill;M.textConfig={outsideFill:x.get("color")==="inherit"?$:null,inside:A!=="outside"};var R,I=v(x,"distance")||0,B=v(x,"align"),j=v(x,"rotate"),z=Math.PI*.5,F=Math.PI*1.5,q=as(j==="tangential"?Math.PI/2-l:l),N=q>z&&!p1(q-z)&&q<F;A==="outside"?(R=s.r+I,B=N?"right":"left"):!B||B==="center"?(o===2*Math.PI&&s.r0===0?R=0:R=(s.r+s.r0)/2,B="center"):B==="left"?(R=s.r0+I,B=N?"right":"left"):B==="right"&&(R=s.r-I,B=N?"left":"right"),k.style.align=B,k.style.verticalAlign=v(x,"verticalAlign")||"middle",k.x=R*d+s.cx,k.y=R*c+s.cy;var O=0;j==="radial"?O=as(-l)+(N?Math.PI:0):j==="tangential"?O=as(Math.PI/2-l)+(N?Math.PI:0):pn(j)&&(O=j*Math.PI/180),k.rotation=as(O)});function v(_,x){var w=_.get(x);return w==null?a.get(x):w}p.dirtyStyle()},e}(Ma),F$="sunburstRootToNode",Pz="sunburstHighlight",QGe="sunburstUnhighlight";function JGe(t){t.registerAction({type:F$,update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,a){var s=M1(e,[F$],i);if(s){var o=i.getViewRoot();o&&(e.direction=eO(o,s.node)?"rollUp":"drillDown"),i.resetViewRoot(s.node)}}}),t.registerAction({type:Pz,update:"none"},function(e,n,r){e=Oe({},e),n.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(a){var s=M1(e,[Pz],a);s&&(e.dataIndex=s.node.dataIndex)}r.dispatchAction(Oe(e,{type:"highlight"}))}),t.registerAction({type:QGe,update:"updateView"},function(e,n,r){e=Oe({},e),r.dispatchAction(Oe(e,{type:"downplay"}))})}var eYe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){var s=this;this.seriesModel=n,this.api=i,this.ecModel=r;var o=n.getData(),l=o.tree.root,d=n.getViewRoot(),c=this.group,f=n.get("renderLabelForZeroData"),p=[];d.eachNode(function(x){p.push(x)});var h=this._oldChildren||[];m(p,h),_(l,d),this._initEvents(),this._oldChildren=p;function m(x,w){if(x.length===0&&w.length===0)return;new id(w,x,k,k).add(S).update(S).remove(Pt(S,null)).execute();function k(C){return C.getId()}function S(C,A){var M=C==null?null:x[C],$=A==null?null:w[A];g(M,$)}}function g(x,w){if(!f&&x&&!x.getValue()&&(x=null),x!==l&&w!==l){if(w&&w.piece)x?(w.piece.updateData(!1,x,n,r,i),o.setItemGraphicEl(x.dataIndex,w.piece)):v(w);else if(x){var k=new Rz(x,n,r,i);c.add(k),o.setItemGraphicEl(x.dataIndex,k)}}}function v(x){x&&x.piece&&(c.remove(x.piece),x.piece=null)}function _(x,w){w.depth>0?(s.virtualPiece?s.virtualPiece.updateData(!1,x,n,r,i):(s.virtualPiece=new Rz(x,n,r,i),c.add(s.virtualPiece)),w.piece.off("click"),s.virtualPiece.on("click",function(k){s._rootToNode(w.parentNode)})):s.virtualPiece&&(c.remove(s.virtualPiece),s.virtualPiece=null)}},e.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,a=n.seriesModel.getViewRoot();a.eachNode(function(s){if(!i&&s.piece&&s.piece===r.target){var o=s.getModel().get("nodeClick");if(o==="rootToNode")n._rootToNode(s);else if(o==="link"){var l=s.getModel(),d=l.get("link");if(d){var c=l.get("target",!0)||"_blank";Mk(d,c)}}i=!0}})})},e.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:F$,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},e.prototype.containPoint=function(n,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var s=n[0]-a.cx,o=n[1]-a.cy,l=Math.sqrt(s*s+o*o);return l<=a.r&&l>=a.r0}},e.type="sunburst",e}(Pn),tYe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return e.prototype.getInitialData=function(n,r){var i={name:n.name,children:n.data};Rae(i);var a=this._levelModels=ze(n.levels||[],function(l){return new An(l,this,r)},this),s=JI.createTree(i,this,o);function o(l){l.wrapMethod("getItemModel",function(d,c){var f=s.getNodeByDataIndex(c),p=a[f.depth];return p&&(d.parentModel=p),d})}return s.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treePathInfo=hA(i,this),r},e.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){Vie(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Zn);function Rae(t){var e=0;oe(t.children,function(r){Rae(r);var i=r.value;Be(i)&&(i=i[0]),e+=i});var n=t.value;Be(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=e),n<0&&(n=0),Be(t.value)?t.value[0]=n:t.value=n}var Iz=Math.PI/180;function nYe(t,e,n){e.eachSeriesByType(t,function(r){var i=r.get("center"),a=r.get("radius");Be(a)||(a=[0,a]),Be(i)||(i=[i,i]);var s=n.getWidth(),o=n.getHeight(),l=Math.min(s,o),d=Qe(i[0],s),c=Qe(i[1],o),f=Qe(a[0],l/2),p=Qe(a[1],l/2),h=-r.get("startAngle")*Iz,m=r.get("minAngle")*Iz,g=r.getData().tree.root,v=r.getViewRoot(),_=v.depth,x=r.get("sort");x!=null&&Pae(v,x);var w=0;oe(v.children,function(q){!isNaN(q.getValue())&&w++});var k=v.getValue(),S=Math.PI/(k||w)*2,C=v.depth>0,A=v.height-(C?-1:1),M=(p-f)/(A||1),$=r.get("clockwise"),R=r.get("stillShowZeroSum"),I=$?1:-1,B=function(q,N){if(q){var O=N;if(q!==g){var V=q.getValue(),L=k===0&&R?S:V*S;L<m&&(L=m),O=N+I*L;var U=q.depth-_-(C?-1:1),G=f+M*U,X=f+M*(U+1),re=r.getLevelModel(q);if(re){var ee=re.get("r0",!0),de=re.get("r",!0),se=re.get("radius",!0);se!=null&&(ee=se[0],de=se[1]),ee!=null&&(G=Qe(ee,l/2)),de!=null&&(X=Qe(de,l/2))}q.setLayout({angle:L,startAngle:N,endAngle:O,clockwise:$,cx:d,cy:c,r0:G,r:X})}if(q.children&&q.children.length){var te=0;oe(q.children,function(ne){te+=B(ne,N+te)})}return O-N}};if(C){var j=f,z=f+M,F=Math.PI*2;g.setLayout({angle:F,startAngle:h,endAngle:h+F,clockwise:$,cx:d,cy:c,r0:j,r:z})}B(v,h)})}function Pae(t,e){var n=t.children||[];t.children=rYe(n,e),n.length&&oe(t.children,function(r){Pae(r,e)})}function rYe(t,e){if(gt(e)){var n=ze(t,function(i,a){var s=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return s}},index:a}});return n.sort(function(i,a){return e(i.params,a.params)}),ze(n,function(i){return t[i.index]})}else{var r=e==="asc";return t.sort(function(i,a){var s=(i.getValue()-a.getValue())*(r?1:-1);return s===0?(i.dataIndex-a.dataIndex)*(r?-1:1):s})}}function iYe(t){var e={};function n(r,i,a){for(var s=r;s&&s.depth>1;)s=s.parentNode;var o=i.getColorFromPalette(s.name||s.dataIndex+"",e);return r.depth>1&&it(o)&&(o=EM(o,(r.depth-1)/(a-1)*.5)),o}t.eachSeriesByType("sunburst",function(r){var i=r.getData(),a=i.tree;a.eachNode(function(s){var o=s.getModel(),l=o.getModel("itemStyle").getItemStyle();l.fill||(l.fill=n(s,r,a.root.height));var d=i.ensureUniqueItemVisual(s.dataIndex,"style");Oe(d,l)})})}function aYe(t){t.registerChartView(eYe),t.registerSeriesModel(tYe),t.registerLayout(Pt(nYe,"sunburst")),t.registerProcessor(Pt(Ob,"sunburst")),t.registerVisual(iYe),JGe(t)}var Oz={color:"fill",borderColor:"stroke"},sYe={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Uu=on(),oYe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(n,r){return md(null,this)},e.prototype.getDataParams=function(n,r,i){var a=t.prototype.getDataParams.call(this,n,r);return i&&(a.info=Uu(i).info),a},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(Zn);function lYe(t,e){return e=e||[0,0],ze(["x","y"],function(n,r){var i=this.getAxis(n),a=e[r],s=t[r]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-s)-i.dataToCoord(a+s))},this)}function uYe(t){var e=t.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(n){return t.dataToPoint(n)},size:ut(lYe,t)}}}function dYe(t,e){return e=e||[0,0],ze([0,1],function(n){var r=e[n],i=t[n]/2,a=[],s=[];return a[n]=r-i,s[n]=r+i,a[1-n]=s[1-n]=e[1-n],Math.abs(this.dataToPoint(a)[n]-this.dataToPoint(s)[n])},this)}function cYe(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(n){return t.dataToPoint(n)},size:ut(dYe,t)}}}function fYe(t,e){var n=this.getAxis(),r=e instanceof Array?e[0]:e,i=(t instanceof Array?t[0]:t)/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(r-i)-n.dataToCoord(r+i))}function pYe(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(n){return t.dataToPoint(n)},size:ut(fYe,t)}}}function hYe(t,e){return e=e||[0,0],ze(["Radius","Angle"],function(n,r){var i="get"+n+"Axis",a=this[i](),s=e[r],o=t[r]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(s-o)-a.dataToCoord(s+o));return n==="Angle"&&(l=l*Math.PI/180),l},this)}function mYe(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:r[1],r0:r[0]},api:{coord:function(i){var a=e.dataToRadius(i[0]),s=n.dataToAngle(i[1]),o=t.coordToPoint([a,s]);return o.push(a,s*Math.PI/180),o},size:ut(hYe,t)}}}function gYe(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(r,i){return t.dataToPoint(r,i)}}}}function Iae(t,e,n,r){return t&&(t.legacy||t.legacy!==!1&&!n&&!r&&e!=="tspan"&&(e==="text"||ft(t,"text")))}function Oae(t,e,n){var r=t,i,a,s;if(e==="text")s=r;else{s={},ft(r,"text")&&(s.text=r.text),ft(r,"rich")&&(s.rich=r.rich),ft(r,"textFill")&&(s.fill=r.textFill),ft(r,"textStroke")&&(s.stroke=r.textStroke),ft(r,"fontFamily")&&(s.fontFamily=r.fontFamily),ft(r,"fontSize")&&(s.fontSize=r.fontSize),ft(r,"fontStyle")&&(s.fontStyle=r.fontStyle),ft(r,"fontWeight")&&(s.fontWeight=r.fontWeight),a={type:"text",style:s,silent:!0},i={};var o=ft(r,"textPosition");n?i.position=o?r.textPosition:"inside":o&&(i.position=r.textPosition),ft(r,"textPosition")&&(i.position=r.textPosition),ft(r,"textOffset")&&(i.offset=r.textOffset),ft(r,"textRotation")&&(i.rotation=r.textRotation),ft(r,"textDistance")&&(i.distance=r.textDistance)}return Lz(s,t),oe(s.rich,function(l){Lz(l,l)}),{textConfig:i,textContent:a}}function Lz(t,e){e&&(e.font=e.textFont||e.font,ft(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),ft(e,"textAlign")&&(t.align=e.textAlign),ft(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),ft(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),ft(e,"textWidth")&&(t.width=e.textWidth),ft(e,"textHeight")&&(t.height=e.textHeight),ft(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),ft(e,"textPadding")&&(t.padding=e.textPadding),ft(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),ft(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),ft(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),ft(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),ft(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),ft(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),ft(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}function Vz(t,e,n){var r=t;r.textPosition=r.textPosition||n.position||"inside",n.offset!=null&&(r.textOffset=n.offset),n.rotation!=null&&(r.textRotation=n.rotation),n.distance!=null&&(r.textDistance=n.distance);var i=r.textPosition.indexOf("inside")>=0,a=t.fill||"#000";Nz(r,e);var s=r.textFill==null;return i?s&&(r.textFill=n.insideFill||"#fff",!r.textStroke&&n.insideStroke&&(r.textStroke=n.insideStroke),!r.textStroke&&(r.textStroke=a),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(s&&(r.textFill=t.fill||n.outsideFill||"#000"),!r.textStroke&&n.outsideStroke&&(r.textStroke=n.outsideStroke)),r.text=e.text,r.rich=e.rich,oe(e.rich,function(o){Nz(o,o)}),r}function Nz(t,e){e&&(ft(e,"fill")&&(t.textFill=e.fill),ft(e,"stroke")&&(t.textStroke=e.fill),ft(e,"lineWidth")&&(t.textStrokeWidth=e.lineWidth),ft(e,"font")&&(t.font=e.font),ft(e,"fontStyle")&&(t.fontStyle=e.fontStyle),ft(e,"fontWeight")&&(t.fontWeight=e.fontWeight),ft(e,"fontSize")&&(t.fontSize=e.fontSize),ft(e,"fontFamily")&&(t.fontFamily=e.fontFamily),ft(e,"align")&&(t.textAlign=e.align),ft(e,"verticalAlign")&&(t.textVerticalAlign=e.verticalAlign),ft(e,"lineHeight")&&(t.textLineHeight=e.lineHeight),ft(e,"width")&&(t.textWidth=e.width),ft(e,"height")&&(t.textHeight=e.height),ft(e,"backgroundColor")&&(t.textBackgroundColor=e.backgroundColor),ft(e,"padding")&&(t.textPadding=e.padding),ft(e,"borderColor")&&(t.textBorderColor=e.borderColor),ft(e,"borderWidth")&&(t.textBorderWidth=e.borderWidth),ft(e,"borderRadius")&&(t.textBorderRadius=e.borderRadius),ft(e,"shadowColor")&&(t.textBoxShadowColor=e.shadowColor),ft(e,"shadowBlur")&&(t.textBoxShadowBlur=e.shadowBlur),ft(e,"shadowOffsetX")&&(t.textBoxShadowOffsetX=e.shadowOffsetX),ft(e,"shadowOffsetY")&&(t.textBoxShadowOffsetY=e.shadowOffsetY),ft(e,"textShadowColor")&&(t.textShadowColor=e.textShadowColor),ft(e,"textShadowBlur")&&(t.textShadowBlur=e.textShadowBlur),ft(e,"textShadowOffsetX")&&(t.textShadowOffsetX=e.textShadowOffsetX),ft(e,"textShadowOffsetY")&&(t.textShadowOffsetY=e.textShadowOffsetY))}var Lae={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},jz=rn(Lae);Vl(jl,function(t,e){return t[e]=1,t},{});jl.join(", ");var Xk=["","style","shape","extra"],wg=on();function vO(t,e,n,r,i){var a=t+"Animation",s=Ng(t,r,i)||{},o=wg(e).userDuring;return s.duration>0&&(s.during=o?ut(xYe,{el:e,userDuring:o}):null,s.setToFinal=!0,s.scope=t),Oe(s,n[a]),s}function Lw(t,e,n,r){r=r||{};var i=r.dataIndex,a=r.isInit,s=r.clearStyle,o=n.isAnimationEnabled(),l=wg(t),d=e.style;l.userDuring=e.during;var c={},f={};if(kYe(t,e,f),Bz("shape",e,f),Bz("extra",e,f),!a&&o&&(wYe(t,e,c),Fz("shape",t,e,c),Fz("extra",t,e,c),SYe(t,e,d,c)),f.style=d,vYe(t,f,s),bYe(t,e),o)if(a){var p={};oe(Xk,function(m){var g=m?e[m]:e;g&&g.enterFrom&&(m&&(p[m]=p[m]||{}),Oe(m?p[m]:p,g.enterFrom))});var h=vO("enter",t,e,n,i);h.duration>0&&t.animateFrom(p,h)}else yYe(t,e,i||0,n,c);Vae(t,e),d?t.dirty():t.markRedraw()}function Vae(t,e){for(var n=wg(t).leaveToProps,r=0;r<Xk.length;r++){var i=Xk[r],a=i?e[i]:e;a&&a.leaveTo&&(n||(n=wg(t).leaveToProps={}),i&&(n[i]=n[i]||{}),Oe(i?n[i]:n,a.leaveTo))}}function vA(t,e,n,r){if(t){var i=t.parent,a=wg(t).leaveToProps;if(a){var s=vO("update",t,e,n,0);s.done=function(){i.remove(t)},t.animateTo(a,s)}else i.remove(t)}}function Ip(t){return t==="all"}function vYe(t,e,n){var r=e.style;if(!t.isGroup&&r){if(n){t.useStyle({});for(var i=t.animators,a=0;a<i.length;a++){var s=i[a];s.targetName==="style"&&s.changeTarget(t.style)}}t.setStyle(r)}e&&(e.style=null,e&&t.attr(e),e.style=r)}function yYe(t,e,n,r,i){if(i){var a=vO("update",t,e,r,n);a.duration>0&&t.animateFrom(i,a)}}function bYe(t,e){ft(e,"silent")&&(t.silent=e.silent),ft(e,"ignore")&&(t.ignore=e.ignore),t instanceof no&&ft(e,"invisible")&&(t.invisible=e.invisible),t instanceof Zt&&ft(e,"autoBatch")&&(t.autoBatch=e.autoBatch)}var tl={},_Ye={setTransform:function(t,e){return tl.el[t]=e,this},getTransform:function(t){return tl.el[t]},setShape:function(t,e){var n=tl.el,r=n.shape||(n.shape={});return r[t]=e,n.dirtyShape&&n.dirtyShape(),this},getShape:function(t){var e=tl.el.shape;if(e)return e[t]},setStyle:function(t,e){var n=tl.el,r=n.style;return r&&(r[t]=e,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(t){var e=tl.el.style;if(e)return e[t]},setExtra:function(t,e){var n=tl.el.extra||(tl.el.extra={});return n[t]=e,this},getExtra:function(t){var e=tl.el.extra;if(e)return e[t]}};function xYe(){var t=this,e=t.el;if(e){var n=wg(e).userDuring,r=t.userDuring;if(n!==r){t.el=t.userDuring=null;return}tl.el=e,r(_Ye)}}function Fz(t,e,n,r){var i=n[t];if(i){var a=e[t],s;if(a){var o=n.transition,l=i.transition;if(l)if(!s&&(s=r[t]={}),Ip(l))Oe(s,a);else for(var d=Dn(l),c=0;c<d.length;c++){var f=d[c],p=a[f];s[f]=p}else if(Ip(o)||Yt(o,t)>=0){!s&&(s=r[t]={});for(var h=rn(a),c=0;c<h.length;c++){var f=h[c],p=a[f];CYe(i[f],p)&&(s[f]=p)}}}}}function Bz(t,e,n){var r=e[t];if(r)for(var i=n[t]={},a=rn(r),s=0;s<a.length;s++){var o=a[s];i[o]=o0(r[o])}}function wYe(t,e,n){for(var r=e.transition,i=Ip(r)?jl:Dn(r||[]),a=0;a<i.length;a++){var s=i[a];if(!(s==="style"||s==="shape"||s==="extra")){var o=t[s];n[s]=o}}}function kYe(t,e,n){for(var r=0;r<jz.length;r++){var i=jz[r],a=Lae[i],s=e[i];s&&(n[a[0]]=s[0],n[a[1]]=s[1])}for(var r=0;r<jl.length;r++){var o=jl[r];e[o]!=null&&(n[o]=e[o])}}function SYe(t,e,n,r){if(n){var i=t.style,a;if(i){var s=n.transition,o=e.transition;if(s&&!Ip(s)){var l=Dn(s);!a&&(a=r.style={});for(var d=0;d<l.length;d++){var c=l[d],f=i[c];a[c]=f}}else if(t.getAnimationStyleProps&&(Ip(o)||Ip(s)||Yt(o,"style")>=0)){var p=t.getAnimationStyleProps(),h=p?p.style:null;if(h){!a&&(a=r.style={});for(var m=rn(n),d=0;d<m.length;d++){var c=m[d];if(h[c]){var f=i[c];a[c]=f}}}}}}}function CYe(t,e){return ta(t)?t!==e:t!=null&&isFinite(t)}var Nae=on(),AYe=["percent","easing","shape","style","extra"];function jae(t){t.stopAnimation("keyframe"),t.attr(Nae(t))}function Zk(t,e,n){if(!(!n.isAnimationEnabled()||!e)){if(Be(e)){oe(e,function(o){Zk(t,o,n)});return}var r=e.keyframes,i=e.duration;if(n&&i==null){var a=Ng("enter",n,0);i=a&&a.duration}if(!(!r||!i)){var s=Nae(t);oe(Xk,function(o){if(!(o&&!t[o])){var l;r.sort(function(d,c){return d.percent-c.percent}),oe(r,function(d){var c=t.animators,f=o?d[o]:d;if(f){var p=rn(f);if(o||(p=kn(p,function(g){return Yt(AYe,g)<0})),!!p.length){l||(l=t.animate(o,e.loop,!0),l.scope="keyframe");for(var h=0;h<c.length;h++)c[h]!==l&&c[h].targetName===l.targetName&&c[h].stopTracks(p);o&&(s[o]=s[o]||{});var m=o?s[o]:s;oe(p,function(g){m[g]=((o?t[o]:t)||{})[g]}),l.whenWithKeys(i*d.percent,f,p,d.easing)}}}),l&&l.delay(e.delay||0).duration(i).start(e.easing)}})}}}var Hu="emphasis",oc="normal",yO="blur",bO="select",Vc=[oc,Hu,yO,bO],K3={normal:["itemStyle"],emphasis:[Hu,"itemStyle"],blur:[yO,"itemStyle"],select:[bO,"itemStyle"]},X3={normal:["label"],emphasis:[Hu,"label"],blur:[yO,"label"],select:[bO,"label"]},TYe=["x","y"],EYe="e\0\0",ws={normal:{},emphasis:{},blur:{},select:{}},MYe={cartesian2d:uYe,geo:cYe,single:pYe,polar:mYe,calendar:gYe};function B$(t){return t instanceof Zt}function z$(t){return t instanceof no}function $Ye(t,e){e.copyTransform(t),z$(e)&&z$(t)&&(e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel,e.invisible=t.invisible,e.ignore=t.ignore,B$(e)&&B$(t)&&e.setShape(t.shape))}var DYe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){this._progressiveEls=null;var s=this._data,o=n.getData(),l=this.group,d=zz(n,o,r,i);s||l.removeAll(),o.diff(s).add(function(f){Z3(i,null,f,d(f,a),n,l,o)}).remove(function(f){var p=s.getItemGraphicEl(f);p&&vA(p,Uu(p).option,n)}).update(function(f,p){var h=s.getItemGraphicEl(p);Z3(i,h,f,d(f,a),n,l,o)}).execute();var c=n.get("clip",!0)?Pb(n.coordinateSystem,!1,n):null;c?l.setClipPath(c):l.removeClipPath(),this._data=o},e.prototype.incrementalPrepareRender=function(n,r,i){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(n,r,i,a,s){var o=r.getData(),l=zz(r,o,i,a),d=this._progressiveEls=[];function c(h){h.isGroup||(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var f=n.start;f<n.end;f++){var p=Z3(null,null,f,l(f,s),r,this.group,o);p&&(p.traverse(c),d.push(p))}},e.prototype.eachRendered=function(n){Gc(this._progressiveEls||this.group,n)},e.prototype.filterForExposedEvent=function(n,r,i,a){var s=r.element;if(s==null||i.name===s)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===s)return!0;return!1},e.type="custom",e}(Pn);function _O(t){var e=t.type,n;if(e==="path"){var r=t.shape,i=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=zae(r);n=GC(a,null,i,r.layout||"center"),Uu(n).customPathData=a}else if(e==="image")n=new xi({}),Uu(n).customImagePath=t.style.image;else if(e==="text")n=new un({});else if(e==="group")n=new kt;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var s=uI(e);if(!s){var o="";wn(o)}n=new s}return Uu(n).customGraphicType=e,n.name=t.name,n.z2EmphasisLift=1,n.z2SelectLift=1,n}function xO(t,e,n,r,i,a,s){jae(e);var o=i&&i.normal.cfg;o&&e.setTextConfig(o),r&&r.transition==null&&(r.transition=TYe);var l=r&&r.style;if(l){if(e.type==="text"){var d=l;ft(d,"textFill")&&(d.fill=d.textFill),ft(d,"textStroke")&&(d.stroke=d.textStroke)}var c=void 0,f=B$(e)?l.decal:null;t&&f&&(f.dirty=!0,c=vg(f,t)),l.__decalPattern=c}if(z$(e)&&l){var c=l.__decalPattern;c&&(l.decal=c)}Lw(e,r,a,{dataIndex:n,isInit:s,clearStyle:!0}),Zk(e,r.keyframeAnimation,a)}function Fae(t,e,n,r,i){var a=e.isGroup?null:e,s=i&&i[t].cfg;if(a){var o=a.ensureState(t);if(r===!1){var l=a.getState(t);l&&(l.style=null)}else o.style=r||null;s&&(o.textConfig=s),Xp(a)}}function RYe(t,e,n){if(!t.isGroup){var r=t,i=n.currentZ,a=n.currentZLevel;r.z=i,r.zlevel=a;var s=e.z2;s!=null&&(r.z2=s||0);for(var o=0;o<Vc.length;o++)PYe(r,e,Vc[o])}}function PYe(t,e,n){var r=n===oc,i=r?e:Qk(e,n),a=i?i.z2:null,s;a!=null&&(s=r?t:t.ensureState(n),s.z2=a||0)}function zz(t,e,n,r){var i=t.get("renderItem"),a=t.coordinateSystem,s={};a&&(s=a.prepareCustoms?a.prepareCustoms(a):MYe[a.type](a));for(var o=yt({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:k,style:C,ordinalRawValue:S,styleEmphasis:A,visual:R,barLayout:I,currentSeriesIndices:B,font:j},s.api||{}),l={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:s.coordSys,dataInsideLength:e.count(),encode:IYe(t.getData())},d,c,f={},p={},h={},m={},g=0;g<Vc.length;g++){var v=Vc[g];h[v]=t.getModel(K3[v]),m[v]=t.getModel(X3[v])}function _(z){return z===d?c||(c=e.getItemModel(z)):e.getItemModel(z)}function x(z,F){return e.hasItemOption?z===d?f[F]||(f[F]=_(z).getModel(K3[F])):_(z).getModel(K3[F]):h[F]}function w(z,F){return e.hasItemOption?z===d?p[F]||(p[F]=_(z).getModel(X3[F])):_(z).getModel(X3[F]):m[F]}return function(z,F){return d=z,c=null,f={},p={},i&&i(yt({dataIndexInside:z,dataIndex:e.getRawIndex(z),actionType:F?F.type:null},l),o)};function k(z,F){return F==null&&(F=d),e.getStore().get(e.getDimensionIndex(z||0),F)}function S(z,F){F==null&&(F=d),z=z||0;var q=e.getDimensionInfo(z);if(!q){var N=e.getDimensionIndex(z);return N>=0?e.getStore().get(N,F):void 0}var O=e.get(q.name,F),V=q&&q.ordinalMeta;return V?V.categories[O]:O}function C(z,F){F==null&&(F=d);var q=e.getItemVisual(F,"style"),N=q&&q.fill,O=q&&q.opacity,V=x(F,oc).getItemStyle();N!=null&&(V.fill=N),O!=null&&(V.opacity=O);var L={inheritColor:it(N)?N:"#000"},U=w(F,oc),G=Kn(U,null,L,!1,!0);G.text=U.getShallow("show")?$t(t.getFormattedLabel(F,oc),bg(e,F)):null;var X=Tk(U,L,!1);return $(z,V),V=Vz(V,G,X),z&&M(V,z),V.legacy=!0,V}function A(z,F){F==null&&(F=d);var q=x(F,Hu).getItemStyle(),N=w(F,Hu),O=Kn(N,null,null,!0,!0);O.text=N.getShallow("show")?El(t.getFormattedLabel(F,Hu),t.getFormattedLabel(F,oc),bg(e,F)):null;var V=Tk(N,null,!0);return $(z,q),q=Vz(q,O,V),z&&M(q,z),q.legacy=!0,q}function M(z,F){for(var q in F)ft(F,q)&&(z[q]=F[q])}function $(z,F){z&&(z.textFill&&(F.textFill=z.textFill),z.textPosition&&(F.textPosition=z.textPosition))}function R(z,F){if(F==null&&(F=d),ft(Oz,z)){var q=e.getItemVisual(F,"style");return q?q[Oz[z]]:null}if(ft(sYe,z))return e.getItemVisual(F,z)}function I(z){if(a.type==="cartesian2d"){var F=a.getBaseAxis();return kFe(yt({axis:F},z))}}function B(){return n.getCurrentSeriesIndices()}function j(z){return dI(z,n)}}function IYe(t){var e={};return oe(t.dimensions,function(n){var r=t.getDimensionInfo(n);if(!r.isExtraCoord){var i=r.coordDim,a=e[i]=e[i]||[];a[r.coordDimIndex]=t.getDimensionIndex(n)}}),e}function Z3(t,e,n,r,i,a,s){if(!r){a.remove(e);return}var o=wO(t,e,n,r,i,a);return o&&s.setItemGraphicEl(n,o),o&&_r(o,r.focus,r.blurScope,r.emphasisDisabled),o}function wO(t,e,n,r,i,a){var s=-1,o=e;e&&Bae(e,r,i)&&(s=Yt(a.childrenRef(),e),e=null);var l=!e,d=e;d?d.clearStates():(d=_O(r),o&&$Ye(o,d)),r.morph===!1?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),ws.normal.cfg=ws.normal.conOpt=ws.emphasis.cfg=ws.emphasis.conOpt=ws.blur.cfg=ws.blur.conOpt=ws.select.cfg=ws.select.conOpt=null,ws.isLegacy=!1,LYe(d,n,r,i,l,ws),OYe(d,n,r,i,l),xO(t,d,n,r,ws,i,l),ft(r,"info")&&(Uu(d).info=r.info);for(var c=0;c<Vc.length;c++){var f=Vc[c];if(f!==oc){var p=Qk(r,f),h=kO(r,p,f);Fae(f,d,p,h,ws)}}return RYe(d,r,i),r.type==="group"&&VYe(t,d,n,r,i),s>=0?a.replaceAt(d,s):a.add(d),d}function Bae(t,e,n){var r=Uu(t),i=e.type,a=e.shape,s=e.style;return n.isUniversalTransitionEnabled()||i!=null&&i!==r.customGraphicType||i==="path"&&BYe(a)&&zae(a)!==r.customPathData||i==="image"&&ft(s,"image")&&s.image!==r.customImagePath}function OYe(t,e,n,r,i){var a=n.clipPath;if(a===!1)t&&t.getClipPath()&&t.removeClipPath();else if(a){var s=t.getClipPath();s&&Bae(s,a,r)&&(s=null),s||(s=_O(a),t.setClipPath(s)),xO(null,s,e,a,null,r,i)}}function LYe(t,e,n,r,i,a){if(!t.isGroup){Uz(n,null,a),Uz(n,Hu,a);var s=a.normal.conOpt,o=a.emphasis.conOpt,l=a.blur.conOpt,d=a.select.conOpt;if(s!=null||o!=null||d!=null||l!=null){var c=t.getTextContent();if(s===!1)c&&t.removeTextContent();else{s=a.normal.conOpt=s||{type:"text"},c?c.clearStates():(c=_O(s),t.setTextContent(c)),xO(null,c,e,s,null,r,i);for(var f=s&&s.style,p=0;p<Vc.length;p++){var h=Vc[p];if(h!==oc){var m=a[h].conOpt;Fae(h,c,m,kO(s,m,h),null)}}f?c.dirty():c.markRedraw()}}}}function Uz(t,e,n){var r=e?Qk(t,e):t,i=e?kO(t,r,Hu):t.style,a=t.type,s=r?r.textConfig:null,o=t.textContent,l=o?e?Qk(o,e):o:null;if(i&&(n.isLegacy||Iae(i,a,!!s,!!l))){n.isLegacy=!0;var d=Oae(i,a,!e);!s&&d.textConfig&&(s=d.textConfig),!l&&d.textContent&&(l=d.textContent)}if(!e&&l){var c=l;!c.type&&(c.type="text")}var f=e?n[e]:n.normal;f.cfg=s,f.conOpt=l}function Qk(t,e){return e?t?t[e]:null:t}function kO(t,e,n){var r=e&&e.style;return r==null&&n===Hu&&t&&(r=t.styleEmphasis),r}function VYe(t,e,n,r,i){var a=r.children,s=a?a.length:0,o=r.$mergeChildren,l=o==="byName"||r.diffChildrenByName,d=o===!1;if(!(!s&&!l&&!d)){if(l){jYe({api:t,oldChildren:e.children()||[],newChildren:a||[],dataIndex:n,seriesModel:i,group:e});return}d&&e.removeAll();for(var c=0;c<s;c++){var f=a[c],p=e.childAt(c);f?(f.ignore==null&&(f.ignore=!1),wO(t,p,n,f,i,e)):p.ignore=!0}for(var h=e.childCount()-1;h>=c;h--){var m=e.childAt(h);NYe(e,m,i)}}}function NYe(t,e,n){e&&vA(e,Uu(t).option,n)}function jYe(t){new id(t.oldChildren,t.newChildren,Hz,Hz,t).add(qz).update(qz).remove(FYe).execute()}function Hz(t,e){var n=t&&t.name;return n!=null?n:EYe+e}function qz(t,e){var n=this.context,r=t!=null?n.newChildren[t]:null,i=e!=null?n.oldChildren[e]:null;wO(n.api,i,n.dataIndex,r,n.seriesModel,n.group)}function FYe(t){var e=this.context,n=e.oldChildren[t];n&&vA(n,Uu(n).option,e.seriesModel)}function zae(t){return t&&(t.pathData||t.d)}function BYe(t){return t&&(ft(t,"pathData")||ft(t,"d"))}function zYe(t){t.registerChartView(DYe),t.registerSeriesModel(oYe)}var Yf=on(),Wz=xt,Q3=ut,SO=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(e,n,r,i){var a=n.get("value"),s=n.get("status");if(this._axisModel=e,this._axisPointerModel=n,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===s)){this._lastValue=a,this._lastStatus=s;var o=this._group,l=this._handle;if(!s||s==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var d={};this.makeElOption(d,a,e,n,r);var c=d.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(e,n);if(!o)o=this._group=new kt,this.createPointerEl(o,d,e,n),this.createLabelEl(o,d,e,n),r.getZr().add(o);else{var p=Pt(Gz,n,f);this.updatePointerEl(o,d,p),this.updateLabelEl(o,d,p,n)}Kz(o,n,!0),this._renderHandle(a)}},t.prototype.remove=function(e){this.clear(e)},t.prototype.dispose=function(e){this.clear(e)},t.prototype.determineAnimation=function(e,n){var r=n.get("animation"),i=e.axis,a=i.type==="category",s=n.get("snap");if(!s&&!a)return!1;if(r==="auto"||r==null){var o=this.animationThreshold;if(a&&i.getBandWidth()>o)return!0;if(s){var l=WI(e).seriesDataCount,d=i.getExtent();return Math.abs(d[0]-d[1])/l>o}return!1}return r===!0},t.prototype.makeElOption=function(e,n,r,i,a){},t.prototype.createPointerEl=function(e,n,r,i){var a=n.pointer;if(a){var s=Yf(e).pointerEl=new hh[a.type](Wz(n.pointer));e.add(s)}},t.prototype.createLabelEl=function(e,n,r,i){if(n.label){var a=Yf(e).labelEl=new un(Wz(n.label));e.add(a),Yz(a,i)}},t.prototype.updatePointerEl=function(e,n,r){var i=Yf(e).pointerEl;i&&n.pointer&&(i.setStyle(n.pointer.style),r(i,{shape:n.pointer.shape}))},t.prototype.updateLabelEl=function(e,n,r,i){var a=Yf(e).labelEl;a&&(a.setStyle(n.label.style),r(a,{x:n.label.x,y:n.label.y}),Yz(a,i))},t.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=n.getModel("handle"),s=n.get("status");if(!a.get("show")||!s||s==="hide"){i&&r.remove(i),this._handle=null;return}var o;this._handle||(o=!0,i=this._handle=Ab(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){ed(d.event)},onmousedown:Q3(this._onHandleDragMove,this,0,0),drift:Q3(this._onHandleDragMove,this),ondragend:Q3(this._onHandleDragEnd,this)}),r.add(i)),Kz(i,n,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");Be(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,qg(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},t.prototype._moveHandleToValue=function(e,n){Gz(this._axisPointerModel,!n&&this._moveAnimation,this._handle,J3(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(e,n){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(J3(r),[e,n],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(J3(i)),Yf(r).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var n=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var n=e.getZr(),r=this._group,i=this._handle;n&&r&&(this._lastGraphicKey=null,r&&n.remove(r),i&&n.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),x1(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(e,n,r){return r=r||0,{x:e[r],y:e[1-r],width:n[r],height:n[1-r]}},t}();function Gz(t,e,n,r){Uae(Yf(n).lastProp,r)||(Yf(n).lastProp=r,e?yn(n,r,t):(n.stopAnimation(),n.attr(r)))}function Uae(t,e){if(_t(t)&&_t(e)){var n=!0;return oe(e,function(r,i){n=n&&Uae(t[i],r)}),!!n}else return t===e}function Yz(t,e){t[e.get(["label","show"])?"show":"hide"]()}function J3(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function Kz(t,e,n){var r=e.get("z"),i=e.get("zlevel");t&&t.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=n)})}function CO(t){var e=t.get("type"),n=t.getModel(e+"Style"),r;return e==="line"?(r=n.getLineStyle(),r.fill=null):e==="shadow"&&(r=n.getAreaStyle(),r.stroke=null),r}function Hae(t,e,n,r,i){var a=n.get("value"),s=qae(a,e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),o=n.getModel("label"),l=Bg(o.get("padding")||0),d=o.getFont(),c=bb(s,d),f=i.position,p=c.width+l[1]+l[3],h=c.height+l[0]+l[2],m=i.align;m==="right"&&(f[0]-=p),m==="center"&&(f[0]-=p/2);var g=i.verticalAlign;g==="bottom"&&(f[1]-=h),g==="middle"&&(f[1]-=h/2),UYe(f,p,h,r);var v=o.get("backgroundColor");(!v||v==="auto")&&(v=e.get(["axisLine","lineStyle","color"])),t.label={x:f[0],y:f[1],style:Kn(o,{text:s,font:d,fill:o.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function UYe(t,e,n,r){var i=r.getWidth(),a=r.getHeight();t[0]=Math.min(t[0]+e,i)-e,t[1]=Math.min(t[1]+n,a)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function qae(t,e,n,r,i){t=e.scale.parse(t);var a=e.scale.getLabel({value:t},{precision:i.precision}),s=i.formatter;if(s){var o={value:OI(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};oe(r,function(l){var d=n.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=d&&d.getDataParams(c);f&&o.seriesData.push(f)}),it(s)?a=s.replace("{value}",a):gt(s)&&(a=s(o))}return a}function AO(t,e,n){var r=ds();return fh(r,r,n.rotation),Nl(r,r,n.position),Ao([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function Wae(t,e,n,r,i,a){var s=_a.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get(["label","margin"]),Hae(e,r,i,a,{position:AO(r.axis,t,n),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function TO(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}}function Gae(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}function Xz(t,e,n,r,i,a){return{cx:t,cy:e,r0:n,r,startAngle:i,endAngle:a,clockwise:!0}}var HYe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,i,a,s){var o=i.axis,l=o.grid,d=a.get("type"),c=Zz(l,o).getOtherAxis(o).getGlobalExtent(),f=o.toGlobalCoord(o.dataToCoord(r,!0));if(d&&d!=="none"){var p=CO(a),h=qYe[d](o,f,c);h.style=p,n.graphicKey=h.type,n.pointer=h}var m=w$(l.model,i);Wae(r,n,m,i,a,s)},e.prototype.getHandleTransform=function(n,r,i){var a=w$(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var s=AO(r.axis,n,a);return{x:s[0],y:s[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(n,r,i,a){var s=i.axis,o=s.grid,l=s.getGlobalExtent(!0),d=Zz(o,s).getOtherAxis(s).getGlobalExtent(),c=s.dim==="x"?0:1,f=[n.x,n.y];f[c]+=r[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var p=(d[1]+d[0])/2,h=[p,p];h[c]=f[c];var m=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:n.rotation,cursorPoint:h,tooltipOption:m[c]}},e}(SO);function Zz(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var qYe={line:function(t,e,n){var r=TO([e,n[0]],[e,n[1]],Qz(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=Math.max(1,t.getBandWidth()),i=n[1]-n[0];return{type:"Rect",shape:Gae([e-r/2,n[0]],[r,i],Qz(t))}}};function Qz(t){return t.dim==="x"?0:1}var WYe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(tn),Ou=on(),GYe=oe;function Yae(t,e,n){if(!Qt.node){var r=e.getZr();Ou(r).records||(Ou(r).records={}),YYe(r,e);var i=Ou(r).records[t]||(Ou(r).records[t]={});i.handler=n}}function YYe(t,e){if(Ou(t).initialized)return;Ou(t).initialized=!0,n("click",Pt(Jz,"click")),n("mousemove",Pt(Jz,"mousemove")),n("globalout",XYe);function n(r,i){t.on(r,function(a){var s=ZYe(e);GYe(Ou(t).records,function(o){o&&i(o,a,s.dispatchAction)}),KYe(s.pendings,e)})}}function KYe(t,e){var n=t.showTip.length,r=t.hideTip.length,i;n?i=t.showTip[n-1]:r&&(i=t.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function XYe(t,e,n){t.handler("leave",null,n)}function Jz(t,e,n,r){e.handler(t,n,r)}function ZYe(t){var e={showTip:[],hideTip:[]},n=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=n,t.dispatchAction(r))};return{dispatchAction:n,pendings:e}}function U$(t,e){if(!Qt.node){var n=e.getZr(),r=(Ou(n).records||{})[t];r&&(Ou(n).records[t]=null)}}var QYe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=r.getComponent("tooltip"),s=n.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";Yae("axisPointer",i,function(o,l,d){s!=="none"&&(o==="leave"||s.indexOf(o)>=0)&&d({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(n,r){U$("axisPointer",r)},e.prototype.dispose=function(n,r){U$("axisPointer",r)},e.type="axisPointer",e}(hr);function Kae(t,e){var n=[],r=t.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),s=Yp(a,t);if(s==null||s<0||Be(s))return{point:[]};var o=a.getItemGraphicEl(s),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(t.isStacked){var d=l.getBaseAxis(),c=l.getOtherAxis(d),f=c.dim,p=d.dim,h=f==="x"||f==="radius"?1:0,m=a.mapDimension(p),g=[];g[h]=a.get(m,s),g[1-h]=a.get(a.getCalculationInfo("stackResultDimension"),s),n=l.dataToPoint(g)||[]}else n=l.dataToPoint(a.getValues(ze(l.dimensions,function(_){return a.mapDimension(_)}),s))||[];else if(o){var v=o.getBoundingRect().clone();v.applyTransform(o.transform),n=[v.x+v.width/2,v.y+v.height/2]}return{point:n,el:o}}var eU=on();function JYe(t,e,n){var r=t.currTrigger,i=[t.x,t.y],a=t,s=t.dispatchAction||ut(n.dispatchAction,n),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){Vw(i)&&(i=Kae({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=Vw(i),d=a.axesInfo,c=o.axesInfo,f=r==="leave"||Vw(i),p={},h={},m={list:[],map:{}},g={showPointer:Pt(tKe,h),showTooltip:Pt(nKe,m)};oe(o.coordSysMap,function(_,x){var w=l||_.containPoint(i);oe(o.coordSysAxesInfo[x],function(k,S){var C=k.axis,A=sKe(d,k);if(!f&&w&&(!d||A)){var M=A&&A.value;M==null&&!l&&(M=C.pointToData(i)),M!=null&&tU(k,M,g,!1,p)}})});var v={};return oe(c,function(_,x){var w=_.linkGroup;w&&!h[x]&&oe(w.axesInfo,function(k,S){var C=h[S];if(k!==_&&C){var A=C.value;w.mapper&&(A=_.axis.scale.parse(w.mapper(A,nU(k),nU(_)))),v[_.key]=A}})}),oe(v,function(_,x){tU(c[x],_,g,!0,p)}),rKe(h,c,p),iKe(m,i,t,s),aKe(c,s,n),p}}function tU(t,e,n,r,i){var a=t.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!t.involveSeries){n.showPointer(t,e);return}var s=eKe(e,t),o=s.payloadBatch,l=s.snapToValue;o[0]&&i.seriesIndex==null&&Oe(i,o[0]),!r&&t.snap&&a.containData(l)&&l!=null&&(e=l),n.showPointer(t,e,o),n.showTooltip(t,s,l)}}function eKe(t,e){var n=e.axis,r=n.dim,i=t,a=[],s=Number.MAX_VALUE,o=-1;return oe(e.seriesModels,function(l,d){var c=l.getData().mapDimensionsAll(r),f,p;if(l.getAxisTooltipData){var h=l.getAxisTooltipData(c,t,n);p=h.dataIndices,f=h.nestestValue}else{if(p=l.getData().indicesOfNearest(c[0],t,n.type==="category"?.5:null),!p.length)return;f=l.getData().get(c[0],p[0])}if(!(f==null||!isFinite(f))){var m=t-f,g=Math.abs(m);g<=s&&((g<s||m>=0&&o<0)&&(s=g,o=m,i=f,a.length=0),oe(p,function(v){a.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:a,snapToValue:i}}function tKe(t,e,n,r){t[e.key]={value:n,payloadBatch:r}}function nKe(t,e,n,r){var i=n.payloadBatch,a=e.axis,s=a.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,d=E1(l),c=t.map[d];c||(c=t.map[d]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:r,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function rKe(t,e,n){var r=n.axesInfo=[];oe(e,function(i,a){var s=i.axisPointerModel.option,o=t[a];o?(!i.useHandle&&(s.status="show"),s.value=o.value,s.seriesDataIndices=(o.payloadBatch||[]).slice()):!i.useHandle&&(s.status="hide"),s.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:s.value})})}function iKe(t,e,n,r){if(Vw(e)||!t.list.length){r({type:"hideTip"});return}var i=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:t.list})}function aKe(t,e,n){var r=n.getZr(),i="axisPointerLastHighlights",a=eU(r)[i]||{},s=eU(r)[i]={};oe(t,function(d,c){var f=d.axisPointerModel.option;f.status==="show"&&d.triggerEmphasis&&oe(f.seriesDataIndices,function(p){var h=p.seriesIndex+" | "+p.dataIndex;s[h]=p})});var o=[],l=[];oe(a,function(d,c){!s[c]&&l.push(d)}),oe(s,function(d,c){!a[c]&&o.push(d)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function sKe(t,e){for(var n=0;n<(t||[]).length;n++){var r=t[n];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function nU(t){var e=t.axis.model,n={},r=n.axisDim=t.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=e.componentIndex,n.axisName=n[r+"AxisName"]=e.name,n.axisId=n[r+"AxisId"]=e.id,n}function Vw(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function jb(t){yh.registerAxisPointerClass("CartesianAxisPointer",HYe),t.registerComponentModel(WYe),t.registerComponentView(QYe),t.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var n=e.axisPointer.link;n&&!Be(n)&&(e.axisPointer.link=[n])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(e,n){e.getComponent("axisPointer").coordSysAxesInfo=gze(e,n)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},JYe)}function oKe(t){Kt(kie),Kt(jb)}var lKe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,i,a,s){var o=i.axis;o.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=o.polar,d=l.getOtherAxis(o),c=d.getExtent(),f=o.dataToCoord(r),p=a.get("type");if(p&&p!=="none"){var h=CO(a),m=dKe[p](o,l,f,c);m.style=h,n.graphicKey=m.type,n.pointer=m}var g=a.get(["label","margin"]),v=uKe(r,i,a,l,g);Hae(n,i,a,s,v)},e}(SO);function uKe(t,e,n,r,i){var a=e.axis,s=a.dataToCoord(t),o=r.getAngleAxis().getExtent()[0];o=o/180*Math.PI;var l=r.getRadiusAxis().getExtent(),d,c,f;if(a.dim==="radius"){var p=ds();fh(p,p,o),Nl(p,p,[r.cx,r.cy]),d=Ao([s,-i],p);var h=e.getModel("axisLabel").get("rotate")||0,m=_a.innerTextLayout(o,h*Math.PI/180,-1);c=m.textAlign,f=m.textVerticalAlign}else{var g=l[1];d=r.coordToPoint([g+i,s]);var v=r.cx,_=r.cy;c=Math.abs(d[0]-v)/g<.3?"center":d[0]>v?"left":"right",f=Math.abs(d[1]-_)/g<.3?"middle":d[1]>_?"top":"bottom"}return{position:d,align:c,verticalAlign:f}}var dKe={line:function(t,e,n,r){return t.dim==="angle"?{type:"Line",shape:TO(e.coordToPoint([r[0],n]),e.coordToPoint([r[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,r){var i=Math.max(1,t.getBandWidth()),a=Math.PI/180;return t.dim==="angle"?{type:"Sector",shape:Xz(e.cx,e.cy,r[0],r[1],(-n-i/2)*a,(-n+i/2)*a)}:{type:"Sector",shape:Xz(e.cx,e.cy,n-i/2,n+i/2,0,Math.PI*2)}}},cKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.findAxisModel=function(n){var r,i=this.ecModel;return i.eachComponent(n,function(a){a.getCoordSysModel()===this&&(r=a)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(tn),EO=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Nr).models[0]},e.type="polarAxis",e}(tn);Hr(EO,$b);var fKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="angleAxis",e}(EO),pKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="radiusAxis",e}(EO),MO=function(t){Ce(e,t);function e(n,r){return t.call(this,"radius",n,r)||this}return e.prototype.pointToData=function(n,r){return this.polar.pointToData(n,r)[this.dim==="radius"?0:1]},e}(Fo);MO.prototype.dataToRadius=Fo.prototype.dataToCoord;MO.prototype.radiusToData=Fo.prototype.coordToData;var hKe=on(),$O=function(t){Ce(e,t);function e(n,r){return t.call(this,"angle",n,r||[0,360])||this}return e.prototype.pointToData=function(n,r){return this.polar.pointToData(n,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var n=this,r=n.getLabelModel(),i=n.scale,a=i.getExtent(),s=i.count();if(a[1]-a[0]<1)return 0;var o=a[0],l=n.dataToCoord(o+1)-n.dataToCoord(o),d=Math.abs(l),c=bb(o==null?"":o+"",r.getFont(),"center","top"),f=Math.max(c.height,7),p=f/d;isNaN(p)&&(p=1/0);var h=Math.max(0,Math.floor(p)),m=hKe(n.model),g=m.lastAutoInterval,v=m.lastTickCount;return g!=null&&v!=null&&Math.abs(g-h)<=1&&Math.abs(v-s)<=1&&g>h?h=g:(m.lastTickCount=s,m.lastAutoInterval=h),h},e}(Fo);$O.prototype.dataToAngle=Fo.prototype.dataToCoord;$O.prototype.angleToData=Fo.prototype.coordToData;var Xae=["radius","angle"],mKe=function(){function t(e){this.dimensions=Xae,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new MO,this._angleAxis=new $O,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(e){var n=this.pointToCoord(e);return this._radiusAxis.contain(n[0])&&this._angleAxis.contain(n[1])},t.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},t.prototype.getAxis=function(e){var n="_"+e+"Axis";return this[n]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(e){var n=[],r=this._angleAxis,i=this._radiusAxis;return r.scale.type===e&&n.push(r),i.scale.type===e&&n.push(i),n},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(e){var n=this._angleAxis;return e===n?this._radiusAxis:n},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(e){var n=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[n],otherAxes:[this.getOtherAxis(n)]}},t.prototype.dataToPoint=function(e,n){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],n),this._angleAxis.dataToAngle(e[1],n)])},t.prototype.pointToData=function(e,n){var r=this.pointToCoord(e);return[this._radiusAxis.radiusToData(r[0],n),this._angleAxis.angleToData(r[1],n)]},t.prototype.pointToCoord=function(e){var n=e[0]-this.cx,r=e[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),s=Math.min(a[0],a[1]),o=Math.max(a[0],a[1]);i.inverse?s=o-360:o=s+360;var l=Math.sqrt(n*n+r*r);n/=l,r/=l;for(var d=Math.atan2(-r,n)/Math.PI*180,c=d<s?1:-1;d<s||d>o;)d+=c*360;return[l,d]},t.prototype.coordToPoint=function(e){var n=e[0],r=e[1]/180*Math.PI,i=Math.cos(r)*n+this.cx,a=-Math.sin(r)*n+this.cy;return[i,a]},t.prototype.getArea=function(){var e=this.getAngleAxis(),n=this.getRadiusAxis(),r=n.getExtent().slice();r[0]>r[1]&&r.reverse();var i=e.getExtent(),a=Math.PI/180,s=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:e.inverse,contain:function(o,l){var d=o-this.cx,c=l-this.cy,f=d*d+c*c,p=this.r,h=this.r0;return p!==h&&f-s<=p*p&&f+s>=h*h}}},t.prototype.convertToPixel=function(e,n,r){var i=rU(n);return i===this?this.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,n,r){var i=rU(n);return i===this?this.pointToData(r):null},t}();function rU(t){var e=t.seriesModel,n=t.polarModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}function gKe(t,e,n){var r=e.get("center"),i=n.getWidth(),a=n.getHeight();t.cx=Qe(r[0],i),t.cy=Qe(r[1],a);var s=t.getRadiusAxis(),o=Math.min(i,a)/2,l=e.get("radius");l==null?l=[0,"100%"]:Be(l)||(l=[0,l]);var d=[Qe(l[0],o),Qe(l[1],o)];s.inverse?s.setExtent(d[1],d[0]):s.setExtent(d[0],d[1])}function vKe(t,e){var n=this,r=n.getAngleAxis(),i=n.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),t.eachSeries(function(o){if(o.coordinateSystem===n){var l=o.getData();oe(jk(l,"radius"),function(d){i.scale.unionExtentFromData(l,d)}),oe(jk(l,"angle"),function(d){r.scale.unionExtentFromData(l,d)})}}),yg(r.scale,r.model),yg(i.scale,i.model),r.type==="category"&&!r.onBand){var a=r.getExtent(),s=360/r.scale.count();r.inverse?a[1]+=s:a[1]-=s,r.setExtent(a[0],a[1])}}function yKe(t){return t.mainType==="angleAxis"}function iU(t,e){var n;if(t.type=e.get("type"),t.scale=dA(e),t.onBand=e.get("boundaryGap")&&t.type==="category",t.inverse=e.get("inverse"),yKe(e)){t.inverse=t.inverse!==e.get("clockwise");var r=e.get("startAngle"),i=(n=e.get("endAngle"))!==null&&n!==void 0?n:r+(t.inverse?-360:360);t.setExtent(r,i)}e.axis=t,t.model=e}var bKe={dimensions:Xae,create:function(t,e){var n=[];return t.eachComponent("polar",function(r,i){var a=new mKe(i+"");a.update=vKe;var s=a.getRadiusAxis(),o=a.getAngleAxis(),l=r.findAxisModel("radiusAxis"),d=r.findAxisModel("angleAxis");iU(s,l),iU(o,d),gKe(a,r,e),n.push(a),r.coordinateSystem=a,a.model=r}),t.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var i=r.getReferringComponents("polar",Nr).models[0];r.coordinateSystem=i.coordinateSystem}}),n}},_Ke=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Ax(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var r=t.coordToPoint([e[0],n]),i=t.coordToPoint([e[1],n]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function Tx(t){var e=t.getRadiusAxis();return e.inverse?0:1}function aU(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}var xKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return e.prototype.render=function(n,r){if(this.group.removeAll(),!!n.get("show")){var i=n.axis,a=i.polar,s=a.getRadiusAxis().getExtent(),o=i.getTicksCoords(),l=i.getMinorTicksCoords(),d=ze(i.getViewLabels(),function(c){c=xt(c);var f=i.scale,p=f.type==="ordinal"?f.getRawOrdinalNumber(c.tickValue):c.tickValue;return c.coord=i.dataToCoord(p),c});aU(d),aU(o),oe(_Ke,function(c){n.get([c,"show"])&&(!i.scale.isBlank()||c==="axisLine")&&wKe[c](this.group,n,a,o,l,s,d)},this)}},e.type="angleAxis",e}(yh),wKe={axisLine:function(t,e,n,r,i,a){var s=e.getModel(["axisLine","lineStyle"]),o=n.getAngleAxis(),l=Math.PI/180,d=o.getExtent(),c=Tx(n),f=c?0:1,p,h=Math.abs(d[1]-d[0])===360?"Circle":"Arc";a[f]===0?p=new hh[h]({shape:{cx:n.cx,cy:n.cy,r:a[c],startAngle:-d[0]*l,endAngle:-d[1]*l,clockwise:o.inverse},style:s.getLineStyle(),z2:1,silent:!0}):p=new wb({shape:{cx:n.cx,cy:n.cy,r:a[c],r0:a[f]},style:s.getLineStyle(),z2:1,silent:!0}),p.style.fill=null,t.add(p)},axisTick:function(t,e,n,r,i,a){var s=e.getModel("axisTick"),o=(s.get("inside")?-1:1)*s.get("length"),l=a[Tx(n)],d=ze(r,function(c){return new ii({shape:Ax(n,[l,l+o],c.coord)})});t.add(Ns(d,{style:yt(s.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,n,r,i,a){if(i.length){for(var s=e.getModel("axisTick"),o=e.getModel("minorTick"),l=(s.get("inside")?-1:1)*o.get("length"),d=a[Tx(n)],c=[],f=0;f<i.length;f++)for(var p=0;p<i[f].length;p++)c.push(new ii({shape:Ax(n,[d,d+l],i[f][p].coord)}));t.add(Ns(c,{style:yt(o.getModel("lineStyle").getLineStyle(),yt(s.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,n,r,i,a,s){var o=e.getCategories(!0),l=e.getModel("axisLabel"),d=l.get("margin"),c=e.get("triggerEvent");oe(s,function(f,p){var h=l,m=f.tickValue,g=a[Tx(n)],v=n.coordToPoint([g+d,f.coord]),_=n.cx,x=n.cy,w=Math.abs(v[0]-_)/g<.3?"center":v[0]>_?"left":"right",k=Math.abs(v[1]-x)/g<.3?"middle":v[1]>x?"top":"bottom";if(o&&o[m]){var S=o[m];_t(S)&&S.textStyle&&(h=new An(S.textStyle,l,l.ecModel))}var C=new un({silent:_a.isLabelSilent(e),style:Kn(h,{x:v[0],y:v[1],fill:h.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:f.formattedLabel,align:w,verticalAlign:k})});if(t.add(C),c){var A=_a.makeAxisEventDataBase(e);A.targetType="axisLabel",A.value=f.rawLabel,Tt(C).eventData=A}},this)},splitLine:function(t,e,n,r,i,a){var s=e.getModel("splitLine"),o=s.getModel("lineStyle"),l=o.get("color"),d=0;l=l instanceof Array?l:[l];for(var c=[],f=0;f<r.length;f++){var p=d++%l.length;c[p]=c[p]||[],c[p].push(new ii({shape:Ax(n,a,r[f].coord)}))}for(var f=0;f<c.length;f++)t.add(Ns(c[f],{style:yt({stroke:l[f%l.length]},o.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,n,r,i,a){if(i.length){for(var s=e.getModel("minorSplitLine"),o=s.getModel("lineStyle"),l=[],d=0;d<i.length;d++)for(var c=0;c<i[d].length;c++)l.push(new ii({shape:Ax(n,a,i[d][c].coord)}));t.add(Ns(l,{style:o.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,n,r,i,a){if(r.length){var s=e.getModel("splitArea"),o=s.getModel("areaStyle"),l=o.get("color"),d=0;l=l instanceof Array?l:[l];for(var c=[],f=Math.PI/180,p=-r[0].coord*f,h=Math.min(a[0],a[1]),m=Math.max(a[0],a[1]),g=e.get("clockwise"),v=1,_=r.length;v<=_;v++){var x=v===_?r[0].coord:r[v].coord,w=d++%l.length;c[w]=c[w]||[],c[w].push(new Ma({shape:{cx:n.cx,cy:n.cy,r0:h,r:m,startAngle:p,endAngle:-x*f,clockwise:g},silent:!0})),p=-x*f}for(var v=0;v<c.length;v++)t.add(Ns(c[v],{style:yt({fill:l[v%l.length]},o.getAreaStyle()),silent:!0}))}}},kKe=["axisLine","axisTickLabel","axisName"],SKe=["splitLine","splitArea","minorSplitLine"],CKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return e.prototype.render=function(n,r){if(this.group.removeAll(),!!n.get("show")){var i=this._axisGroup,a=this._axisGroup=new kt;this.group.add(a);var s=n.axis,o=s.polar,l=o.getAngleAxis(),d=s.getTicksCoords(),c=s.getMinorTicksCoords(),f=l.getExtent()[0],p=s.getExtent(),h=TKe(o,n,f),m=new _a(n,h);oe(kKe,m.add,m),a.add(m.getGroup()),Cb(i,a,n),oe(SKe,function(g){n.get([g,"show"])&&!s.scale.isBlank()&&AKe[g](this.group,n,o,f,p,d,c)},this)}},e.type="radiusAxis",e}(yh),AKe={splitLine:function(t,e,n,r,i,a){var s=e.getModel("splitLine"),o=s.getModel("lineStyle"),l=o.get("color"),d=0,c=n.getAngleAxis(),f=Math.PI/180,p=c.getExtent(),h=Math.abs(p[1]-p[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var m=[],g=0;g<a.length;g++){var v=d++%l.length;m[v]=m[v]||[],m[v].push(new hh[h]({shape:{cx:n.cx,cy:n.cy,r:Math.max(a[g].coord,0),startAngle:-p[0]*f,endAngle:-p[1]*f,clockwise:c.inverse}}))}for(var g=0;g<m.length;g++)t.add(Ns(m[g],{style:yt({stroke:l[g%l.length],fill:null},o.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,n,r,i,a,s){if(s.length){for(var o=e.getModel("minorSplitLine"),l=o.getModel("lineStyle"),d=[],c=0;c<s.length;c++)for(var f=0;f<s[c].length;f++)d.push(new hd({shape:{cx:n.cx,cy:n.cy,r:s[c][f].coord}}));t.add(Ns(d,{style:yt({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(t,e,n,r,i,a){if(a.length){var s=e.getModel("splitArea"),o=s.getModel("areaStyle"),l=o.get("color"),d=0;l=l instanceof Array?l:[l];for(var c=[],f=a[0].coord,p=1;p<a.length;p++){var h=d++%l.length;c[h]=c[h]||[],c[h].push(new Ma({shape:{cx:n.cx,cy:n.cy,r0:f,r:a[p].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),f=a[p].coord}for(var p=0;p<c.length;p++)t.add(Ns(c[p],{style:yt({fill:l[p%l.length]},o.getAreaStyle()),silent:!0}))}}};function TKe(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function Zae(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function Qae(t,e){return e.dim+t.model.componentIndex}function EKe(t,e,n){var r={},i=MKe(kn(e.getSeriesByType(t),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));e.eachSeriesByType(t,function(a){if(a.coordinateSystem.type==="polar"){var s=a.getData(),o=a.coordinateSystem,l=o.getBaseAxis(),d=Qae(o,l),c=Zae(a),f=i[d][c],p=f.offset,h=f.width,m=o.getOtherAxis(l),g=a.coordinateSystem.cx,v=a.coordinateSystem.cy,_=a.get("barMinHeight")||0,x=a.get("barMinAngle")||0;r[c]=r[c]||[];for(var w=s.mapDimension(m.dim),k=s.mapDimension(l.dim),S=Oc(s,w),C=l.dim!=="radius"||!a.get("roundCap",!0),A=m.model,M=A.get("startValue"),$=m.dataToCoord(M||0),R=0,I=s.count();R<I;R++){var B=s.get(w,R),j=s.get(k,R),z=B>=0?"p":"n",F=$;S&&(r[c][j]||(r[c][j]={p:$,n:$}),F=r[c][j][z]);var q=void 0,N=void 0,O=void 0,V=void 0;if(m.dim==="radius"){var L=m.dataToCoord(B)-$,U=l.dataToCoord(j);Math.abs(L)<_&&(L=(L<0?-1:1)*_),q=F,N=F+L,O=U-p,V=O-h,S&&(r[c][j][z]=N)}else{var G=m.dataToCoord(B,C)-$,X=l.dataToCoord(j);Math.abs(G)<x&&(G=(G<0?-1:1)*x),q=X+p,N=q+h,O=F,V=F+G,S&&(r[c][j][z]=V)}s.setItemLayout(R,{cx:g,cy:v,r0:q,r:N,startAngle:-O*Math.PI/180,endAngle:-V*Math.PI/180,clockwise:O>=V})}}})}function MKe(t){var e={};oe(t,function(r,i){var a=r.getData(),s=r.coordinateSystem,o=s.getBaseAxis(),l=Qae(s,o),d=o.getExtent(),c=o.type==="category"?o.getBandWidth():Math.abs(d[1]-d[0])/a.count(),f=e[l]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},p=f.stacks;e[l]=f;var h=Zae(r);p[h]||f.autoWidthCount++,p[h]=p[h]||{width:0,maxWidth:0};var m=Qe(r.get("barWidth"),c),g=Qe(r.get("barMaxWidth"),c),v=r.get("barGap"),_=r.get("barCategoryGap");m&&!p[h].width&&(m=Math.min(f.remainedWidth,m),p[h].width=m,f.remainedWidth-=m),g&&(p[h].maxWidth=g),v!=null&&(f.gap=v),_!=null&&(f.categoryGap=_)});var n={};return oe(e,function(r,i){n[i]={};var a=r.stacks,s=r.bandWidth,o=Qe(r.categoryGap,s),l=Qe(r.gap,1),d=r.remainedWidth,c=r.autoWidthCount,f=(d-o)/(c+(c-1)*l);f=Math.max(f,0),oe(a,function(g,v){var _=g.maxWidth;_&&_<f&&(_=Math.min(_,d),g.width&&(_=Math.min(_,g.width)),d-=_,g.width=_,c--)}),f=(d-o)/(c+(c-1)*l),f=Math.max(f,0);var p=0,h;oe(a,function(g,v){g.width||(g.width=f),h=g,p+=g.width*(1+l)}),h&&(p-=h.width*l);var m=-p/2;oe(a,function(g,v){n[i][v]=n[i][v]||{offset:m,width:g.width},m+=g.width*(1+l)})}),n}var $Ke={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},DKe={splitNumber:5},RKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="polar",e}(hr);function PKe(t){Kt(jb),yh.registerAxisPointerClass("PolarAxisPointer",lKe),t.registerCoordinateSystem("polar",bKe),t.registerComponentModel(cKe),t.registerComponentView(RKe),_g(t,"angle",fKe,$Ke),_g(t,"radius",pKe,DKe),t.registerComponentView(xKe),t.registerComponentView(CKe),t.registerLayout(Pt(EKe,"bar"))}function H$(t,e){e=e||{};var n=t.coordinateSystem,r=t.axis,i={},a=r.position,s=r.orient,o=n.getRect(),l=[o.x,o.x+o.width,o.y,o.y+o.height],d={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[s==="vertical"?d.vertical[a]:l[0],s==="horizontal"?d.horizontal[a]:l[3]];var c={horizontal:0,vertical:1};i.rotation=Math.PI/2*c[s];var f={top:-1,bottom:1,right:1,left:-1};i.labelDirection=i.tickDirection=i.nameDirection=f[a],t.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),gi(e.labelInside,t.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var p=e.rotate;return p==null&&(p=t.get(["axisLabel","rotate"])),i.labelRotation=a==="top"?-p:p,i.z2=1,i}var IKe=["axisLine","axisTickLabel","axisName"],OKe=["splitArea","splitLine"],LKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="SingleAxisPointer",n}return e.prototype.render=function(n,r,i,a){var s=this.group;s.removeAll();var o=this._axisGroup;this._axisGroup=new kt;var l=H$(n),d=new _a(n,l);oe(IKe,d.add,d),s.add(this._axisGroup),s.add(d.getGroup()),oe(OKe,function(c){n.get([c,"show"])&&VKe[c](this,this.group,this._axisGroup,n)},this),Cb(o,this._axisGroup,n),t.prototype.render.call(this,n,r,i,a)},e.prototype.remove=function(){_ie(this)},e.type="singleAxis",e}(yh),VKe={splitLine:function(t,e,n,r){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),s=a.getModel("lineStyle"),o=s.get("color");o=o instanceof Array?o:[o];for(var l=s.get("width"),d=r.coordinateSystem.getRect(),c=i.isHorizontal(),f=[],p=0,h=i.getTicksCoords({tickModel:a}),m=[],g=[],v=0;v<h.length;++v){var _=i.toGlobalCoord(h[v].coord);c?(m[0]=_,m[1]=d.y,g[0]=_,g[1]=d.y+d.height):(m[0]=d.x,m[1]=_,g[0]=d.x+d.width,g[1]=_);var x=new ii({shape:{x1:m[0],y1:m[1],x2:g[0],y2:g[1]},silent:!0});mg(x.shape,l);var w=p++%o.length;f[w]=f[w]||[],f[w].push(x)}for(var k=s.getLineStyle(["color"]),v=0;v<f.length;++v)e.add(Ns(f[v],{style:yt({stroke:o[v%o.length]},k),silent:!0}))}},splitArea:function(t,e,n,r){bie(t,n,r,r)}},Nw=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(tn);Hr(Nw,$b.prototype);var NKe=function(t){Ce(e,t);function e(n,r,i,a,s){var o=t.call(this,n,r,i)||this;return o.type=a||"value",o.position=s||"bottom",o}return e.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},e.prototype.pointToData=function(n,r){return this.coordinateSystem.pointToData(n)[0]},e}(Fo),Jae=["single"],jKe=function(){function t(e,n,r){this.type="single",this.dimension="single",this.dimensions=Jae,this.axisPointerEnabled=!0,this.model=e,this._init(e,n,r)}return t.prototype._init=function(e,n,r){var i=this.dimension,a=new NKe(i,dA(e),[0,0],e.get("type"),e.get("position")),s=a.type==="category";a.onBand=s&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),e.axis=a,a.model=e,a.coordinateSystem=this,this._axis=a},t.prototype.update=function(e,n){e.eachSeries(function(r){if(r.coordinateSystem===this){var i=r.getData();oe(i.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(i,a)},this),yg(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(e,n){this._rect=Qr({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:n.getWidth(),height:n.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var e=this._rect,n=this._axis,r=n.isHorizontal(),i=r?[0,e.width]:[0,e.height],a=n.inverse?1:0;n.setExtent(i[a],i[1-a]),this._updateAxisTransform(n,r?e.x:e.y)},t.prototype._updateAxisTransform=function(e,n){var r=e.getExtent(),i=r[0]+r[1],a=e.isHorizontal();e.toGlobalCoord=a?function(s){return s+n}:function(s){return i-s+n},e.toLocalCoord=a?function(s){return s-n}:function(s){return i-s+n}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(e){var n=this.getRect(),r=this.getAxis(),i=r.orient;return i==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=n.y&&e[1]<=n.y+n.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=n.y&&e[0]<=n.y+n.height},t.prototype.pointToData=function(e){var n=this.getAxis();return[n.coordToData(n.toLocalCoord(e[n.orient==="horizontal"?0:1]))]},t.prototype.dataToPoint=function(e){var n=this.getAxis(),r=this.getRect(),i=[],a=n.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),i[a]=n.toGlobalCoord(n.dataToCoord(+e)),i[1-a]=a===0?r.y+r.height/2:r.x+r.width/2,i},t.prototype.convertToPixel=function(e,n,r){var i=sU(n);return i===this?this.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,n,r){var i=sU(n);return i===this?this.pointToData(r):null},t}();function sU(t){var e=t.seriesModel,n=t.singleAxisModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}function FKe(t,e){var n=[];return t.eachComponent("singleAxis",function(r,i){var a=new jKe(r,t,e);a.name="single_"+i,a.resize(r,e),r.coordinateSystem=a,n.push(a)}),t.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var i=r.getReferringComponents("singleAxis",Nr).models[0];r.coordinateSystem=i&&i.coordinateSystem}}),n}var BKe={create:FKe,dimensions:Jae},oU=["x","y"],zKe=["width","height"],UKe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,i,a,s){var o=i.axis,l=o.coordinateSystem,d=e5(l,1-Jk(o)),c=l.dataToPoint(r)[0],f=a.get("type");if(f&&f!=="none"){var p=CO(a),h=HKe[f](o,c,d);h.style=p,n.graphicKey=h.type,n.pointer=h}var m=H$(i);Wae(r,n,m,i,a,s)},e.prototype.getHandleTransform=function(n,r,i){var a=H$(r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var s=AO(r.axis,n,a);return{x:s[0],y:s[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(n,r,i,a){var s=i.axis,o=s.coordinateSystem,l=Jk(s),d=e5(o,l),c=[n.x,n.y];c[l]+=r[l],c[l]=Math.min(d[1],c[l]),c[l]=Math.max(d[0],c[l]);var f=e5(o,1-l),p=(f[1]+f[0])/2,h=[p,p];return h[l]=c[l],{x:c[0],y:c[1],rotation:n.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}},e}(SO),HKe={line:function(t,e,n){var r=TO([e,n[0]],[e,n[1]],Jk(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=t.getBandWidth(),i=n[1]-n[0];return{type:"Rect",shape:Gae([e-r/2,n[0]],[r,i],Jk(t))}}};function Jk(t){return t.isHorizontal()?0:1}function e5(t,e){var n=t.getRect();return[n[oU[e]],n[oU[e]]+n[zKe[e]]]}var qKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="single",e}(hr);function WKe(t){Kt(jb),yh.registerAxisPointerClass("SingleAxisPointer",UKe),t.registerComponentView(qKe),t.registerComponentView(LKe),t.registerComponentModel(Nw),_g(t,"single",Nw,Nw.defaultOption),t.registerCoordinateSystem("single",BKe)}var GKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r,i){var a=zg(n);t.prototype.init.apply(this,arguments),lU(n,a)},e.prototype.mergeOption=function(n){t.prototype.mergeOption.apply(this,arguments),lU(this.option,n)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(tn);function lU(t,e){var n=t.cellSize,r;Be(n)?r=n:r=t.cellSize=[n,n],r.length===1&&(r[1]=r[0]);var i=ze([0,1],function(a){return mNe(e,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});Ic(t,e,{type:"box",ignoreSize:i})}var YKe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=this.group;a.removeAll();var s=n.coordinateSystem,o=s.getRangeInfo(),l=s.getOrient(),d=r.getLocaleModel();this._renderDayRect(n,o,a),this._renderLines(n,o,l,a),this._renderYearText(n,o,l,a),this._renderMonthText(n,d,l,a),this._renderWeekText(n,d,o,l,a)},e.prototype._renderDayRect=function(n,r,i){for(var a=n.coordinateSystem,s=n.getModel("itemStyle").getItemStyle(),o=a.getCellWidth(),l=a.getCellHeight(),d=r.start.time;d<=r.end.time;d=a.getNextNDay(d,1).time){var c=a.dataToRect([d],!1).tl,f=new sn({shape:{x:c[0],y:c[1],width:o,height:l},cursor:"default",style:s});i.add(f)}},e.prototype._renderLines=function(n,r,i,a){var s=this,o=n.coordinateSystem,l=n.getModel(["splitLine","lineStyle"]).getLineStyle(),d=n.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var f=r.start,p=0;f.time<=r.end.time;p++){m(f.formatedDate),p===0&&(f=o.getDateInfo(r.start.y+"-"+r.start.m));var h=f.date;h.setMonth(h.getMonth()+1),f=o.getDateInfo(h)}m(o.getNextNDay(r.end.time,1).formatedDate);function m(g){s._firstDayOfMonth.push(o.getDateInfo(g)),s._firstDayPoints.push(o.dataToRect([g],!1).tl);var v=s._getLinePointsOfOneWeek(n,g,i);s._tlpoints.push(v[0]),s._blpoints.push(v[v.length-1]),d&&s._drawSplitline(v,l,a)}d&&this._drawSplitline(s._getEdgesPoints(s._tlpoints,c,i),l,a),d&&this._drawSplitline(s._getEdgesPoints(s._blpoints,c,i),l,a)},e.prototype._getEdgesPoints=function(n,r,i){var a=[n[0].slice(),n[n.length-1].slice()],s=i==="horizontal"?0:1;return a[0][s]=a[0][s]-r/2,a[1][s]=a[1][s]+r/2,a},e.prototype._drawSplitline=function(n,r,i){var a=new Da({z2:20,shape:{points:n},style:r});i.add(a)},e.prototype._getLinePointsOfOneWeek=function(n,r,i){for(var a=n.coordinateSystem,s=a.getDateInfo(r),o=[],l=0;l<7;l++){var d=a.getNextNDay(s.time,l),c=a.dataToRect([d.time],!1);o[2*d.day]=c.tl,o[2*d.day+1]=c[i==="horizontal"?"bl":"tr"]}return o},e.prototype._formatterLabel=function(n,r){return it(n)&&n?fNe(n,r):gt(n)?n(r):r.nameMap},e.prototype._yearTextPositionControl=function(n,r,i,a,s){var o=r[0],l=r[1],d=["center","bottom"];a==="bottom"?(l+=s,d=["center","top"]):a==="left"?o-=s:a==="right"?(o+=s,d=["center","top"]):l-=s;var c=0;return(a==="left"||a==="right")&&(c=Math.PI/2),{rotation:c,x:o,y:l,style:{align:d[0],verticalAlign:d[1]}}},e.prototype._renderYearText=function(n,r,i,a){var s=n.getModel("yearLabel");if(s.get("show")){var o=s.get("margin"),l=s.get("position");l||(l=i!=="horizontal"?"top":"left");var d=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(d[0][0]+d[1][0])/2,f=(d[0][1]+d[1][1])/2,p=i==="horizontal"?0:1,h={top:[c,d[p][1]],bottom:[c,d[1-p][1]],left:[d[1-p][0],f],right:[d[p][0],f]},m=r.start.y;+r.end.y>+r.start.y&&(m=m+"-"+r.end.y);var g=s.get("formatter"),v={start:r.start.y,end:r.end.y,nameMap:m},_=this._formatterLabel(g,v),x=new un({z2:30,style:Kn(s,{text:_}),silent:s.get("silent")});x.attr(this._yearTextPositionControl(x,h[l],i,l,o)),a.add(x)}},e.prototype._monthTextPositionControl=function(n,r,i,a,s){var o="left",l="top",d=n[0],c=n[1];return i==="horizontal"?(c=c+s,r&&(o="center"),a==="start"&&(l="bottom")):(d=d+s,r&&(l="middle"),a==="start"&&(o="right")),{x:d,y:c,align:o,verticalAlign:l}},e.prototype._renderMonthText=function(n,r,i,a){var s=n.getModel("monthLabel");if(s.get("show")){var o=s.get("nameMap"),l=s.get("margin"),d=s.get("position"),c=s.get("align"),f=[this._tlpoints,this._blpoints];(!o||it(o))&&(o&&(r=QM(o)||r),o=r.get(["time","monthAbbr"])||[]);var p=d==="start"?0:1,h=i==="horizontal"?0:1;l=d==="start"?-l:l;for(var m=c==="center",g=s.get("silent"),v=0;v<f[p].length-1;v++){var _=f[p][v].slice(),x=this._firstDayOfMonth[v];if(m){var w=this._firstDayPoints[v];_[h]=(w[h]+f[0][v+1][h])/2}var k=s.get("formatter"),S=o[+x.m-1],C={yyyy:x.y,yy:(x.y+"").slice(2),MM:x.m,M:+x.m,nameMap:S},A=this._formatterLabel(k,C),M=new un({z2:30,style:Oe(Kn(s,{text:A}),this._monthTextPositionControl(_,m,i,d,l)),silent:g});a.add(M)}}},e.prototype._weekTextPositionControl=function(n,r,i,a,s){var o="center",l="middle",d=n[0],c=n[1],f=i==="start";return r==="horizontal"?(d=d+a+(f?1:-1)*s[0]/2,o=f?"right":"left"):(c=c+a+(f?1:-1)*s[1]/2,l=f?"bottom":"top"),{x:d,y:c,align:o,verticalAlign:l}},e.prototype._renderWeekText=function(n,r,i,a,s){var o=n.getModel("dayLabel");if(o.get("show")){var l=n.coordinateSystem,d=o.get("position"),c=o.get("nameMap"),f=o.get("margin"),p=l.getFirstDayOfWeek();if(!c||it(c)){c&&(r=QM(c)||r);var h=r.get(["time","dayOfWeekShort"]);c=h||ze(r.get(["time","dayOfWeekAbbr"]),function(C){return C[0]})}var m=l.getNextNDay(i.end.time,7-i.lweek).time,g=[l.getCellWidth(),l.getCellHeight()];f=Qe(f,Math.min(g[1],g[0])),d==="start"&&(m=l.getNextNDay(i.start.time,-(7+i.fweek)).time,f=-f);for(var v=o.get("silent"),_=0;_<7;_++){var x=l.getNextNDay(m,_),w=l.dataToRect([x.time],!1).center,k=_;k=Math.abs((_+p)%7);var S=new un({z2:30,style:Oe(Kn(o,{text:c[k]}),this._weekTextPositionControl(w,a,d,f,g)),silent:v});s.add(S)}}},e.type="calendar",e}(hr),t5=864e5,KKe=function(){function t(e,n,r){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(e){e=Fl(e);var n=e.getFullYear(),r=e.getMonth()+1,i=r<10?"0"+r:""+r,a=e.getDate(),s=a<10?"0"+a:""+a,o=e.getDay();return o=Math.abs((o+7-this.getFirstDayOfWeek())%7),{y:n+"",m:i,d:s,day:o,time:e.getTime(),formatedDate:n+"-"+i+"-"+s,date:e}},t.prototype.getNextNDay=function(e,n){return n=n||0,n===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+n),this.getDateInfo(e))},t.prototype.update=function(e,n){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),s=this._model.getBoxLayoutParams(),o=this._orient==="horizontal"?[r,7]:[7,r];oe([0,1],function(f){c(a,f)&&(s[i[f]]=a[f]*o[f])});var l={width:n.getWidth(),height:n.getHeight()},d=this._rect=Qr(s,l);oe([0,1],function(f){c(a,f)||(a[f]=d[i[f]]/o[f])});function c(f,p){return f[p]!=null&&f[p]!=="auto"}this._sw=a[0],this._sh=a[1]},t.prototype.dataToPoint=function(e,n){Be(e)&&(e=e[0]),n==null&&(n=!0);var r=this.getDateInfo(e),i=this._rangeInfo,a=r.formatedDate;if(n&&!(r.time>=i.start.time&&r.time<i.end.time+t5))return[NaN,NaN];var s=r.day,o=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]:[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]},t.prototype.pointToData=function(e){var n=this.pointToDate(e);return n&&n.time},t.prototype.dataToRect=function(e,n){var r=this.dataToPoint(e,n);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},t.prototype.pointToDate=function(e){var n=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,n-1,i):this._getDateByWeeksAndDay(n,r-1,i)},t.prototype.convertToPixel=function(e,n,r){var i=uU(n);return i===this?i.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,n,r){var i=uU(n);return i===this?i.pointToData(r):null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var e=this._model.get("range"),n;if(Be(e)&&e.length===1&&(e=e[0]),Be(e))n=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(n=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var i=this.getDateInfo(r),a=i.date;a.setMonth(a.getMonth()+1);var s=this.getNextNDay(a,-1);n=[i.formatedDate,s.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(n=[r,r])}if(!n)return e;var o=this._getRangeInfo(n);return o.start.time>o.end.time&&n.reverse(),n},t.prototype._getRangeInfo=function(e){var n=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;n[0].time>n[1].time&&(r=!0,n.reverse());var i=Math.floor(n[1].time/t5)-Math.floor(n[0].time/t5)+1,a=new Date(n[0].time),s=a.getDate(),o=n[1].date.getDate();a.setDate(s+i-1);var l=a.getDate();if(l!==o)for(var d=a.getTime()-n[1].time>0?1:-1;(l=a.getDate())!==o&&(a.getTime()-n[1].time)*d>0;)i-=d,a.setDate(l-d);var c=Math.floor((i+n[0].day+6)/7),f=r?-c+1:c-1;return r&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:i,weeks:c,nthWeek:f,fweek:n[0].day,lweek:n[1].day}},t.prototype._getDateByWeeksAndDay=function(e,n,r){var i=this._getRangeInfo(r);if(e>i.weeks||e===0&&n<i.fweek||e===i.weeks&&n>i.lweek)return null;var a=(e-1)*7-i.fweek+n,s=new Date(i.start.time);return s.setDate(+i.start.d+a),this.getDateInfo(s)},t.create=function(e,n){var r=[];return e.eachComponent("calendar",function(i){var a=new t(i);r.push(a),i.coordinateSystem=a}),e.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=r[i.get("calendarIndex")||0])}),r},t.dimensions=["time","value"],t}();function uU(t){var e=t.calendarModel,n=t.seriesModel,r=e?e.coordinateSystem:n?n.coordinateSystem:null;return r}function XKe(t){t.registerComponentModel(GKe),t.registerComponentView(YKe),t.registerCoordinateSystem("calendar",KKe)}function ZKe(t,e){var n=t.existing;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:n&&(e.parentId=n.parentId)}e.parentOption=null}function dU(t,e){var n;return oe(e,function(r){t[r]!=null&&t[r]!=="auto"&&(n=!0)}),n}function QKe(t,e,n){var r=Oe({},n),i=t[e],a=n.$action||"merge";a==="merge"?i?(jt(i,r,!0),Ic(i,r,{ignoreSize:!0}),Gte(n,i),Ex(n,i),Ex(n,i,"shape"),Ex(n,i,"style"),Ex(n,i,"extra"),n.clipPath=i.clipPath):t[e]=r:a==="replace"?t[e]=r:a==="remove"&&i&&(t[e]=null)}var ese=["transition","enterFrom","leaveTo"],JKe=ese.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Ex(t,e,n){if(n&&(!t[n]&&e[n]&&(t[n]={}),t=t[n],e=e[n]),!(!t||!e))for(var r=n?ese:JKe,i=0;i<r.length;i++){var a=r[i];t[a]==null&&e[a]!=null&&(t[a]=e[a])}}function eXe(t,e){if(t&&(t.hv=e.hv=[dU(e,["left","right"]),dU(e,["top","bottom"])],t.type==="group")){var n=t,r=e;n.width==null&&(n.width=r.width=0),n.height==null&&(n.height=r.height=0)}}var tXe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return e.prototype.mergeOption=function(n,r){var i=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,n,r),this.option.elements=i},e.prototype.optionUpdated=function(n,r){var i=this.option,a=(r?i:n).elements,s=i.elements=r?[]:i.elements,o=[];this._flatten(a,o,null);var l=Hee(s,o,"normalMerge"),d=this._elOptionsToUpdate=[];oe(l,function(c,f){var p=c.newOption;p&&(d.push(p),ZKe(c,p),QKe(s,f,p),eXe(s[f],p))},this),i.elements=kn(s,function(c){return c&&delete c.$action,c!=null})},e.prototype._flatten=function(n,r,i){oe(n,function(a){if(a){i&&(a.parentOption=i),r.push(a);var s=a.children;s&&s.length&&this._flatten(s,r,a),delete a.children}},this)},e.prototype.useElOptionsToUpdate=function(){var n=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,n},e.type="graphic",e.defaultOption={elements:[]},e}(tn),cU={path:null,compoundPath:null,group:kt,image:xi,text:un},Ms=on(),nXe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){this._elMap=pt()},e.prototype.render=function(n,r,i){n!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=n,this._updateElements(n),this._relocate(n,i)},e.prototype._updateElements=function(n){var r=n.useElOptionsToUpdate();if(r){var i=this._elMap,a=this.group,s=n.get("z"),o=n.get("zlevel");oe(r,function(l){var d=Yr(l.id,null),c=d!=null?i.get(d):null,f=Yr(l.parentId,null),p=f!=null?i.get(f):a,h=l.type,m=l.style;h==="text"&&m&&l.hv&&l.hv[1]&&(m.textVerticalAlign=m.textBaseline=m.verticalAlign=m.align=null);var g=l.textContent,v=l.textConfig;if(m&&Iae(m,h,!!v,!!g)){var _=Oae(m,h,!0);!v&&_.textConfig&&(v=l.textConfig=_.textConfig),!g&&_.textContent&&(g=_.textContent)}var x=rXe(l),w=l.$action||"merge",k=w==="merge",S=w==="replace";if(k){var C=!c,A=c;C?A=fU(d,p,l.type,i):(A&&(Ms(A).isNew=!1),jae(A)),A&&(Lw(A,x,n,{isInit:C}),pU(A,l,s,o))}else if(S){jw(c,l,i,n);var M=fU(d,p,l.type,i);M&&(Lw(M,x,n,{isInit:!0}),pU(M,l,s,o))}else w==="remove"&&(Vae(c,l),jw(c,l,i,n));var $=i.get(d);if($&&g)if(k){var R=$.getTextContent();R?R.attr(g):$.setTextContent(new un(g))}else S&&$.setTextContent(new un(g));if($){var I=l.clipPath;if(I){var B=I.type,j=void 0,C=!1;if(k){var z=$.getClipPath();C=!z||Ms(z).type!==B,j=C?q$(B):z}else S&&(C=!0,j=q$(B));$.setClipPath(j),Lw(j,I,n,{isInit:C}),Zk(j,I.keyframeAnimation,n)}var F=Ms($);$.setTextConfig(v),F.option=l,iXe($,n,l),ph({el:$,componentModel:n,itemName:$.name,itemTooltipOption:l.tooltip}),Zk($,l.keyframeAnimation,n)}})}},e.prototype._relocate=function(n,r){for(var i=n.option.elements,a=this.group,s=this._elMap,o=r.getWidth(),l=r.getHeight(),d=["x","y"],c=0;c<i.length;c++){var f=i[c],p=Yr(f.id,null),h=p!=null?s.get(p):null;if(!(!h||!h.isGroup)){var m=h.parent,g=m===a,v=Ms(h),_=Ms(m);v.width=Qe(v.option.width,g?o:_.width)||0,v.height=Qe(v.option.height,g?l:_.height)||0}}for(var c=i.length-1;c>=0;c--){var f=i[c],p=Yr(f.id,null),h=p!=null?s.get(p):null;if(h){var m=h.parent,_=Ms(m),x=m===a?{width:o,height:l}:{width:_.width,height:_.height},w={},k=tA(h,f,x,null,{hv:f.hv,boundingMode:f.bounding},w);if(!Ms(h).isNew&&k){for(var S=f.transition,C={},A=0;A<d.length;A++){var M=d[A],$=w[M];S&&(Ip(S)||Yt(S,M)>=0)?C[M]=$:h[M]=$}yn(h,C,n,0)}else h.attr(w)}}},e.prototype._clear=function(){var n=this,r=this._elMap;r.each(function(i){jw(i,Ms(i).option,r,n._lastGraphicModel)}),this._elMap=pt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(hr);function q$(t){var e=ft(cU,t)?cU[t]:uI(t),n=new e({});return Ms(n).type=t,n}function fU(t,e,n,r){var i=q$(n);return e.add(i),r.set(t,i),Ms(i).id=t,Ms(i).isNew=!0,i}function jw(t,e,n,r){var i=t&&t.parent;i&&(t.type==="group"&&t.traverse(function(a){jw(a,e,n,r)}),vA(t,e,r),n.removeKey(Ms(t).id))}function pU(t,e,n,r){t.isGroup||oe([["cursor",no.prototype.cursor],["zlevel",r||0],["z",n||0],["z2",0]],function(i){var a=i[0];ft(e,a)?t[a]=$t(e[a],i[1]):t[a]==null&&(t[a]=i[1])}),oe(rn(e),function(i){if(i.indexOf("on")===0){var a=e[i];t[i]=gt(a)?a:null}}),ft(e,"draggable")&&(t.draggable=e.draggable),e.name!=null&&(t.name=e.name),e.id!=null&&(t.id=e.id)}function rXe(t){return t=Oe({},t),oe(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Wte),function(e){delete t[e]}),t}function iXe(t,e,n){var r=Tt(t).eventData;!t.silent&&!t.ignore&&!r&&(r=Tt(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),r&&(r.info=n.info)}function aXe(t){t.registerComponentModel(tXe),t.registerComponentView(nXe),t.registerPreprocessor(function(e){var n=e.graphic;Be(n)?!n[0]||!n[0].elements?e.graphic=[{elements:n}]:e.graphic=[e.graphic[0]]:n&&!n.elements&&(e.graphic=[{elements:[n]}])})}var hU=["x","y","radius","angle","single"],sXe=["cartesian2d","polar","singleAxis"];function oXe(t){var e=t.get("coordinateSystem");return Yt(sXe,e)>=0}function lc(t){return t+"Axis"}function lXe(t,e){var n=pt(),r=[],i=pt();t.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||o(c)});var a;do a=!1,t.eachComponent("dataZoom",s);while(a);function s(c){!i.get(c.uid)&&l(c)&&(o(c),a=!0)}function o(c){i.set(c.uid,!0),r.push(c),d(c)}function l(c){var f=!1;return c.eachTargetAxis(function(p,h){var m=n.get(p);m&&m[h]&&(f=!0)}),f}function d(c){c.eachTargetAxis(function(f,p){(n.get(f)||n.set(f,[]))[p]=!0})}return r}function tse(t){var e=t.ecModel,n={infoList:[],infoMap:pt()};return t.eachTargetAxis(function(r,i){var a=e.getComponent(lc(r),i);if(a){var s=a.getCoordSysModel();if(s){var o=s.uid,l=n.infoMap.get(o);l||(l={model:s,axisModels:[]},n.infoList.push(l),n.infoMap.set(o,l)),l.axisModels.push(a)}}}),n}var n5=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},t}(),I1=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return e.prototype.init=function(n,r,i){var a=mU(n);this.settledOption=a,this.mergeDefaultAndTheme(n,i),this._doInit(a)},e.prototype.mergeOption=function(n){var r=mU(n);jt(this.option,n,!0),jt(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(n){var r=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var i=this.settledOption;oe([["start","startValue"],["end","endValue"]],function(a,s){this._rangePropMode[s]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var n=this.get("orient",!0),r=this._targetAxisInfoMap=pt(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(n){var r=!1;return oe(hU,function(i){var a=this.getReferringComponents(lc(i),t8e);if(a.specified){r=!0;var s=new n5;oe(a.models,function(o){s.add(o.componentIndex)}),n.set(i,s)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(n,r){var i=this.ecModel,a=!0;if(a){var s=r==="vertical"?"y":"x",o=i.findComponents({mainType:s+"Axis"});l(o,s)}if(a){var o=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});l(o,"single")}function l(d,c){var f=d[0];if(f){var p=new n5;if(p.add(f.componentIndex),n.set(c,p),a=!1,c==="x"||c==="y"){var h=f.getReferringComponents("grid",Nr).models[0];h&&oe(d,function(m){f.componentIndex!==m.componentIndex&&h===m.getReferringComponents("grid",Nr).models[0]&&p.add(m.componentIndex)})}}}a&&oe(hU,function(d){if(a){var c=i.findComponents({mainType:lc(d),filter:function(p){return p.get("type",!0)==="category"}});if(c[0]){var f=new n5;f.add(c[0].componentIndex),n.set(d,f),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(r){!n&&(n=r)},this),n==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(n){var r=this._rangePropMode,i=this.get("rangeMode");oe([["start","startValue"],["end","endValue"]],function(a,s){var o=n[a[0]]!=null,l=n[a[1]]!=null;o&&!l?r[s]="percent":!o&&l?r[s]="value":i?r[s]=i[s]:o&&(r[s]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(r,i){n==null&&(n=this.ecModel.getComponent(lc(r),i))},this),n},e.prototype.eachTargetAxis=function(n,r){this._targetAxisInfoMap.each(function(i,a){oe(i.indexList,function(s){n.call(r,a,s)})})},e.prototype.getAxisProxy=function(n,r){var i=this.getAxisModel(n,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(n,r){var i=this._targetAxisInfoMap.get(n);if(i&&i.indexMap[r])return this.ecModel.getComponent(lc(n),r)},e.prototype.setRawRange=function(n){var r=this.option,i=this.settledOption;oe([["start","startValue"],["end","endValue"]],function(a){(n[a[0]]!=null||n[a[1]]!=null)&&(r[a[0]]=i[a[0]]=n[a[0]],r[a[1]]=i[a[1]]=n[a[1]])},this),this._updateRangeUse(n)},e.prototype.setCalculatedRange=function(n){var r=this.option;oe(["start","startValue","end","endValue"],function(i){r[i]=n[i]})},e.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},e.prototype.getValueRange=function(n,r){if(n==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(n,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var s=i[a],o=this._targetAxisInfoMap.get(s),l=0;l<o.indexList.length;l++){var d=this.getAxisProxy(s,o.indexList[l]);if(d.hostedBy(this))return d;r||(r=d)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(tn);function mU(t){var e={};return oe(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var uXe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}(I1),DO=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){this.dataZoomModel=n,this.ecModel=r,this.api=i},e.type="dataZoom",e}(hr),dXe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}(DO),_m=oe,gU=Fs,cXe=function(){function t(e,n,r,i){this._dimName=e,this._axisIndex=n,this.ecModel=i,this._dataZoomModel=r}return t.prototype.hostedBy=function(e){return this._dataZoomModel===e},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(n){if(oXe(n)){var r=lc(this._dimName),i=n.getReferringComponents(r,Nr).models[0];i&&this._axisIndex===i.componentIndex&&e.push(n)}},this),e},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return xt(this._minMaxSpan)},t.prototype.calculateDataWindow=function(e){var n=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),s=[0,100],o=[],l=[],d;_m(["start","end"],function(p,h){var m=e[p],g=e[p+"Value"];a[h]==="percent"?(m==null&&(m=s[h]),g=i.parse(Cn(m,s,n))):(d=!0,g=g==null?n[h]:i.parse(g),m=Cn(g,n,s)),l[h]=g==null||isNaN(g)?n[h]:g,o[h]=m==null||isNaN(m)?s[h]:m}),gU(l),gU(o);var c=this._minMaxSpan;d?f(l,o,n,s,!1):f(o,l,s,n,!0);function f(p,h,m,g,v){var _=v?"Span":"ValueSpan";bh(0,p,m,"all",c["min"+_],c["max"+_]);for(var x=0;x<2;x++)h[x]=Cn(p[x],m,g,!0),v&&(h[x]=i.parse(h[x]))}return{valueWindow:l,percentWindow:o}},t.prototype.reset=function(e){if(e===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=fXe(this,this._dimName,n),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(e,n){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),s=this._valueWindow;if(a==="none")return;_m(i,function(l){var d=l.getData(),c=d.mapDimensionsAll(r);if(c.length){if(a==="weakFilter"){var f=d.getStore(),p=ze(c,function(h){return d.getDimensionIndex(h)},d);d.filterSelf(function(h){for(var m,g,v,_=0;_<c.length;_++){var x=f.get(p[_],h),w=!isNaN(x),k=x<s[0],S=x>s[1];if(w&&!k&&!S)return!0;w&&(v=!0),k&&(m=!0),S&&(g=!0)}return v&&m&&g})}else _m(c,function(h){if(a==="empty")l.setData(d=d.map(h,function(g){return o(g)?g:NaN}));else{var m={};m[h]=s,d.selectRange(m)}});_m(c,function(h){d.setApproximateExtent(s,h)})}});function o(l){return l>=s[0]&&l<=s[1]}},t.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},n=this._dataZoomModel,r=this._dataExtent;_m(["min","max"],function(i){var a=n.get(i+"Span"),s=n.get(i+"ValueSpan");s!=null&&(s=this.getAxisModel().axis.scale.parse(s)),s!=null?a=Cn(r[0]+s,r,[0,100],!0):a!=null&&(s=Cn(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=s},this)},t.prototype._setAxisModel=function(){var e=this.getAxisModel(),n=this._percentWindow,r=this._valueWindow;if(n){var i=Lee(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;n[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),n[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},t}();function fXe(t,e,n){var r=[1/0,-1/0];_m(n,function(s){qFe(r,s.getData(),e)});var i=t.getAxisModel(),a=bre(i.axis.scale,i,r).calculate();return[a.min,a.max]}var pXe={getTargetSeries:function(t){function e(i){t.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(s,o){var l=t.getComponent(lc(s),o);i(s,o,l,a)})})}e(function(i,a,s,o){s.__dzAxisProxy=null});var n=[];e(function(i,a,s,o){s.__dzAxisProxy||(s.__dzAxisProxy=new cXe(i,a,o,t),n.push(s.__dzAxisProxy))});var r=pt();return oe(n,function(i){oe(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(t,e){t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).reset(n)}),n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).filterData(n,e)})}),t.eachComponent("dataZoom",function(n){var r=n.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();n.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function hXe(t){t.registerAction("dataZoom",function(e,n){var r=lXe(n,e);oe(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var vU=!1;function RO(t){vU||(vU=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,pXe),hXe(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function mXe(t){t.registerComponentModel(uXe),t.registerComponentView(dXe),RO(t)}var Is=function(){function t(){}return t}(),nse={};function xm(t,e){nse[t]=e}function rse(t){return nse[t]}var gXe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;oe(this.option.feature,function(r,i){var a=rse(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(n)),jt(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(tn);function vXe(t,e,n){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:n.getWidth(),height:n.getHeight()},s=Qr(r,a,i);Rp(e.get("orient"),t,e.get("itemGap"),s.width,s.height),tA(t,r,a,i)}function ise(t,e){var n=Bg(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),t=new sn({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),t}var yXe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i,a){var s=this.group;if(s.removeAll(),!n.get("show"))return;var o=+n.get("itemSize"),l=n.get("orient")==="vertical",d=n.get("feature")||{},c=this._features||(this._features={}),f=[];oe(d,function(m,g){f.push(g)}),new id(this._featureNames||[],f).add(p).update(p).remove(Pt(p,null)).execute(),this._featureNames=f;function p(m,g){var v=f[m],_=f[g],x=d[v],w=new An(x,n,n.ecModel),k;if(a&&a.newTitle!=null&&a.featureName===v&&(x.title=a.newTitle),v&&!_){if(bXe(v))k={onclick:w.option.onclick,featureName:v};else{var S=rse(v);if(!S)return;k=new S}c[v]=k}else if(k=c[_],!k)return;k.uid=Fg("toolbox-feature"),k.model=w,k.ecModel=r,k.api=i;var C=k instanceof Is;if(!v&&_){C&&k.dispose&&k.dispose(r,i);return}if(!w.get("show")||C&&k.unusable){C&&k.remove&&k.remove(r,i);return}h(w,k,v),w.setIconStatus=function(A,M){var $=this.option,R=this.iconPaths;$.iconStatus=$.iconStatus||{},$.iconStatus[A]=M,R[A]&&(M==="emphasis"?nd:rd)(R[A])},k instanceof Is&&k.render&&k.render(w,r,i,a)}function h(m,g,v){var _=m.getModel("iconStyle"),x=m.getModel(["emphasis","iconStyle"]),w=g instanceof Is&&g.getIcons?g.getIcons():m.get("icon"),k=m.get("title")||{},S,C;it(w)?(S={},S[v]=w):S=w,it(k)?(C={},C[v]=k):C=k;var A=m.iconPaths={};oe(S,function(M,$){var R=Ab(M,{},{x:-o/2,y:-o/2,width:o,height:o});R.setStyle(_.getItemStyle());var I=R.ensureState("emphasis");I.style=x.getItemStyle();var B=new un({style:{text:C[$],align:x.get("textAlign"),borderRadius:x.get("textBorderRadius"),padding:x.get("textPadding"),fill:null,font:dI({fontStyle:x.get("textFontStyle"),fontFamily:x.get("textFontFamily"),fontSize:x.get("textFontSize"),fontWeight:x.get("textFontWeight")},r)},ignore:!0});R.setTextContent(B),ph({el:R,componentModel:n,itemName:$,formatterParamsExtra:{title:C[$]}}),R.__title=C[$],R.on("mouseover",function(){var j=x.getItemStyle(),z=l?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";B.setStyle({fill:x.get("textFill")||j.fill||j.stroke||"#000",backgroundColor:x.get("textBackgroundColor")}),R.setTextConfig({position:x.get("textPosition")||z}),B.ignore=!n.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){m.get(["iconStatus",$])!=="emphasis"&&i.leaveEmphasis(this),B.hide()}),(m.get(["iconStatus",$])==="emphasis"?nd:rd)(R),s.add(R),R.on("click",ut(g.onclick,g,r,i,$)),A[$]=R})}vXe(s,n,i),s.add(ise(s.getBoundingRect(),n)),l||s.eachChild(function(m){var g=m.__title,v=m.ensureState("emphasis"),_=v.textConfig||(v.textConfig={}),x=m.getTextContent(),w=x&&x.ensureState("emphasis");if(w&&!gt(w)&&g){var k=w.style||(w.style={}),S=bb(g,un.makeFont(k)),C=m.x+s.x,A=m.y+s.y+o,M=!1;A+S.height>i.getHeight()&&(_.position="top",M=!0);var $=M?-5-S.height:o+10;C+S.width/2>i.getWidth()?(_.position=["100%",$],k.align="right"):C-S.width/2<0&&(_.position=[0,$],k.align="left")}})},e.prototype.updateView=function(n,r,i,a){oe(this._features,function(s){s instanceof Is&&s.updateView&&s.updateView(s.model,r,i,a)})},e.prototype.remove=function(n,r){oe(this._features,function(i){i instanceof Is&&i.remove&&i.remove(n,r)}),this.group.removeAll()},e.prototype.dispose=function(n,r){oe(this._features,function(i){i instanceof Is&&i.dispose&&i.dispose(n,r)})},e.type="toolbox",e}(hr);function bXe(t){return t.indexOf("my")===0}var _Xe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){var i=this.model,a=i.get("name")||n.get("title.0.text")||"echarts",s=r.getZr().painter.getType()==="svg",o=s?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:o,backgroundColor:i.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),d=Qt.browser;if(typeof MouseEvent=="function"&&(d.newEdge||!d.ie&&!d.edge)){var c=document.createElement("a");c.download=a+"."+o,c.target="_blank",c.href=l;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||s){var p=l.split(","),h=p[0].indexOf("base64")>-1,m=s?decodeURIComponent(p[1]):p[1];h&&(m=window.atob(m));var g=a+"."+o;if(window.navigator.msSaveOrOpenBlob){for(var v=m.length,_=new Uint8Array(v);v--;)_[v]=m.charCodeAt(v);var x=new Blob([_]);window.navigator.msSaveOrOpenBlob(x,g)}else{var w=document.createElement("iframe");document.body.appendChild(w);var k=w.contentWindow,S=k.document;S.open("image/svg+xml","replace"),S.write(m),S.close(),k.focus(),S.execCommand("SaveAs",!0,g),document.body.removeChild(w)}}else{var C=i.get("lang"),A='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',M=window.open();M.document.write(A),M.document.title=a}},e.getDefaultOption=function(n){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(Is),yU="__ec_magicType_stack__",xXe=[["line","bar"],["stack"]],wXe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getIcons=function(){var n=this.model,r=n.get("icon"),i={};return oe(n.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(n){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(n,r,i){var a=this.model,s=a.get(["seriesIndex",i]);if(bU[i]){var o={series:[]},l=function(f){var p=f.subType,h=f.id,m=bU[i](p,h,f,a);m&&(yt(m,f.option),o.series.push(m));var g=f.coordinateSystem;if(g&&g.type==="cartesian2d"&&(i==="line"||i==="bar")){var v=g.getAxesByScale("ordinal")[0];if(v){var _=v.dim,x=_+"Axis",w=f.getReferringComponents(x,Nr).models[0],k=w.componentIndex;o[x]=o[x]||[];for(var S=0;S<=k;S++)o[x][k]=o[x][k]||{};o[x][k].boundaryGap=i==="bar"}}};oe(xXe,function(f){Yt(f,i)>=0&&oe(f,function(p){a.setIconStatus(p,"normal")})}),a.setIconStatus(i,"emphasis"),n.eachComponent({mainType:"series",query:s==null?null:{seriesIndex:s}},l);var d,c=i;i==="stack"&&(d=jt({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:o,newTitle:d,featureName:"magicType"})}},e}(Is),bU={line:function(t,e,n,r){if(t==="bar")return jt({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(t,e,n,r){if(t==="line")return jt({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(t,e,n,r){var i=n.get("stack")===yU;if(t==="line"||t==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),jt({id:e,stack:i?"":yU},r.get(["option","stack"])||{},!0)}};Yl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});var yA=new Array(60).join("-"),kg="	";function kXe(t){var e={},n=[],r=[];return t.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var s=a.getBaseAxis();if(s.type==="category"){var o=s.dim+"_"+s.index;e[o]||(e[o]={categoryAxis:s,valueAxis:a.getOtherAxis(s),series:[]},r.push({axisDim:s.dim,axisIndex:s.index})),e[o].series.push(i)}else n.push(i)}else n.push(i)}),{seriesGroupByCategoryAxis:e,other:n,meta:r}}function SXe(t){var e=[];return oe(t,function(n,r){var i=n.categoryAxis,a=n.valueAxis,s=a.dim,o=[" "].concat(ze(n.series,function(h){return h.name})),l=[i.model.getCategories()];oe(n.series,function(h){var m=h.getRawData();l.push(h.getRawData().mapArray(m.mapDimension(s),function(g){return g}))});for(var d=[o.join(kg)],c=0;c<l[0].length;c++){for(var f=[],p=0;p<l.length;p++)f.push(l[p][c]);d.push(f.join(kg))}e.push(d.join(`
`))}),e.join(`

`+yA+`

`)}function CXe(t){return ze(t,function(e){var n=e.getRawData(),r=[e.name],i=[];return n.each(n.dimensions,function(){for(var a=arguments.length,s=arguments[a-1],o=n.getName(s),l=0;l<a-1;l++)i[l]=arguments[l];r.push((o?o+kg:"")+i.join(kg))}),r.join(`
`)}).join(`

`+yA+`

`)}function AXe(t){var e=kXe(t);return{value:kn([SXe(e.seriesGroupByCategoryAxis),CXe(e.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+yA+`

`),meta:e.meta}}function eS(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function TXe(t){var e=t.slice(0,t.indexOf(`
`));if(e.indexOf(kg)>=0)return!0}var W$=new RegExp("["+kg+"]+","g");function EXe(t){for(var e=t.split(/\n+/g),n=eS(e.shift()).split(W$),r=[],i=ze(n,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var s=eS(e[a]).split(W$);r.push(s.shift());for(var o=0;o<s.length;o++)i[o]&&(i[o].data[a]=s[o])}return{series:i,categories:r}}function MXe(t){for(var e=t.split(/\n+/g),n=eS(e.shift()),r=[],i=0;i<e.length;i++){var a=eS(e[i]);if(a){var s=a.split(W$),o="",l=void 0,d=!1;isNaN(s[0])?(d=!0,o=s[0],s=s.slice(1),r[i]={name:o,value:[]},l=r[i].value):l=r[i]=[];for(var c=0;c<s.length;c++)l.push(+s[c]);l.length===1&&(d?r[i].value=l[0]:r[i]=l[0])}}return{name:n,data:r}}function $Xe(t,e){var n=t.split(new RegExp(`
*`+yA+`
*`,"g")),r={series:[]};return oe(n,function(i,a){if(TXe(i)){var s=EXe(i),o=e[a],l=o.axisDim+"Axis";o&&(r[l]=r[l]||[],r[l][o.axisIndex]={data:s.categories},r.series=r.series.concat(s.series))}else{var s=MXe(i);r.series.push(s)}}),r}var DXe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var s=document.createElement("div");s.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",s.style.backgroundColor=a.get("backgroundColor")||"#fff";var o=document.createElement("h4"),l=a.get("lang")||[];o.innerHTML=l[0]||a.get("title"),o.style.cssText="margin:10px 20px",o.style.color=a.get("textColor");var d=document.createElement("div"),c=document.createElement("textarea");d.style.cssText="overflow:auto";var f=a.get("optionToContent"),p=a.get("contentToOption"),h=AXe(n);if(gt(f)){var m=f(r.getOption());it(m)?d.innerHTML=m:pg(m)&&d.appendChild(m)}else{c.readOnly=a.get("readOnly");var g=c.style;g.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",g.color=a.get("textColor"),g.borderColor=a.get("textareaBorderColor"),g.backgroundColor=a.get("textareaColor"),c.value=h.value,d.appendChild(c)}var v=h.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:5px;left:0;right:0";var x="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",w=document.createElement("div"),k=document.createElement("div");x+=";background-color:"+a.get("buttonColor"),x+=";color:"+a.get("buttonTextColor");var S=this;function C(){i.removeChild(s),S._dom=null}SM(w,"click",C),SM(k,"click",function(){if(p==null&&f!=null||p!=null&&f==null){C();return}var A;try{gt(p)?A=p(d,r.getOption()):A=$Xe(c.value,v)}catch(M){throw C(),new Error("Data view format error "+M)}A&&r.dispatchAction({type:"changeDataView",newOption:A}),C()}),w.innerHTML=l[1],k.innerHTML=l[2],k.style.cssText=w.style.cssText=x,!a.get("readOnly")&&_.appendChild(k),_.appendChild(w),s.appendChild(o),s.appendChild(d),s.appendChild(_),d.style.height=i.clientHeight-80+"px",i.appendChild(s),this._dom=s},e.prototype.remove=function(n,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(n,r){this.remove(n,r)},e.getDefaultOption=function(n){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(Is);function RXe(t,e){return ze(t,function(n,r){var i=e&&e[r];if(_t(i)&&!Be(i)){var a=_t(n)&&!Be(n);a||(n={value:n});var s=i.name!=null&&n.name==null;return n=yt(n,i),s&&delete n.name,n}else return n})}Yl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];oe(t.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)n.push(Oe({type:"scatter"},r));else{var a=i.get("data");n.push({name:r.name,data:RXe(r.data,a)})}}),e.mergeOption(yt({series:n},t.newOption))});var ase=oe,sse=on();function PXe(t,e){var n=PO(t);ase(e,function(r,i){for(var a=n.length-1;a>=0;a--){var s=n[a];if(s[i])break}if(a<0){var o=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(o){var l=o.getPercentRange();n[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),n.push(e)}function IXe(t){var e=PO(t),n=e[e.length-1];e.length>1&&e.pop();var r={};return ase(n,function(i,a){for(var s=e.length-1;s>=0;s--)if(i=e[s][a],i){r[a]=i;break}}),r}function OXe(t){sse(t).snapshots=null}function LXe(t){return PO(t).length}function PO(t){var e=sse(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var VXe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){OXe(n),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(n){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(Is);Yl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var NXe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],IO=function(){function t(e,n,r){var i=this;this._targetInfoList=[];var a=_U(n,e);oe(jXe,function(s,o){(!r||!r.include||Yt(r.include,o)>=0)&&s(a,i._targetInfoList)})}return t.prototype.setOutputRanges=function(e,n){return this.matchOutputRanges(e,n,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var s=r5[r.brushType](0,a,i);r.__rangeOffset={offset:SU[r.brushType](s.values,r.range,[1,1]),xyMinMax:s.xyMinMax}}}),e},t.prototype.matchOutputRanges=function(e,n,r){oe(e,function(i){var a=this.findTargetInfo(i,n);a&&a!==!0&&oe(a.coordSyses,function(s){var o=r5[i.brushType](1,s,i.range,!0);r(i,o.values,s,n)})},this)},t.prototype.setInputRanges=function(e,n){oe(e,function(r){var i=this.findTargetInfo(r,n);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=r5[r.brushType](0,i.coordSys,r.coordRange),s=r.__rangeOffset;r.range=s?SU[r.brushType](a.values,s.offset,FXe(a.xyMinMax,s.xyMinMax)):a.values}},this)},t.prototype.makePanelOpts=function(e,n){return ze(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:n?n(r):null,clipPath:hae(i),isTargetByCursor:gae(i,e,r.coordSysModel),getLinearBrushOtherExtent:mae(i)}})},t.prototype.controlSeries=function(e,n,r){var i=this.findTargetInfo(e,r);return i===!0||i&&Yt(i.coordSyses,n.coordinateSystem)>=0},t.prototype.findTargetInfo=function(e,n){for(var r=this._targetInfoList,i=_U(n,e),a=0;a<r.length;a++){var s=r[a],o=e.panelId;if(o){if(s.panelId===o)return s}else for(var l=0;l<xU.length;l++)if(xU[l](i,s))return s}return!0},t}();function G$(t){return t[0]>t[1]&&t.reverse(),t}function _U(t,e){return u0(t,e,{includeMainTypes:NXe})}var jXe={grid:function(t,e){var n=t.xAxisModels,r=t.yAxisModels,i=t.gridModels,a=pt(),s={},o={};!n&&!r&&!i||(oe(n,function(l){var d=l.axis.grid.model;a.set(d.id,d),s[d.id]=!0}),oe(r,function(l){var d=l.axis.grid.model;a.set(d.id,d),o[d.id]=!0}),oe(i,function(l){a.set(l.id,l),s[l.id]=!0,o[l.id]=!0}),a.each(function(l){var d=l.coordinateSystem,c=[];oe(d.getCartesians(),function(f,p){(Yt(n,f.getAxis("x").model)>=0||Yt(r,f.getAxis("y").model)>=0)&&c.push(f)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:wU.grid,xAxisDeclared:s[l.id],yAxisDeclared:o[l.id]})}))},geo:function(t,e){oe(t.geoModels,function(n){var r=n.coordinateSystem;e.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:r,coordSyses:[r],getPanelRect:wU.geo})})}},xU=[function(t,e){var n=t.xAxisModel,r=t.yAxisModel,i=t.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],wU={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Dp(t)),e}},r5={lineX:Pt(kU,0),lineY:Pt(kU,1),rect:function(t,e,n,r){var i=t?e.pointToData([n[0][0],n[1][0]],r):e.dataToPoint([n[0][0],n[1][0]],r),a=t?e.pointToData([n[0][1],n[1][1]],r):e.dataToPoint([n[0][1],n[1][1]],r),s=[G$([i[0],a[0]]),G$([i[1],a[1]])];return{values:s,xyMinMax:s}},polygon:function(t,e,n,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=ze(n,function(s){var o=t?e.pointToData(s,r):e.dataToPoint(s,r);return i[0][0]=Math.min(i[0][0],o[0]),i[1][0]=Math.min(i[1][0],o[1]),i[0][1]=Math.max(i[0][1],o[0]),i[1][1]=Math.max(i[1][1],o[1]),o});return{values:a,xyMinMax:i}}};function kU(t,e,n,r){var i=n.getAxis(["x","y"][t]),a=G$(ze([0,1],function(o){return e?i.coordToData(i.toLocalCoord(r[o]),!0):i.toGlobalCoord(i.dataToCoord(r[o]))})),s=[];return s[t]=a,s[1-t]=[NaN,NaN],{values:a,xyMinMax:s}}var SU={lineX:Pt(CU,0),lineY:Pt(CU,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return ze(t,function(r,i){return[r[0]-n[0]*e[i][0],r[1]-n[1]*e[i][1]]})}};function CU(t,e,n,r){return[e[0]-r[t]*n[0],e[1]-r[t]*n[1]]}function FXe(t,e){var n=AU(t),r=AU(e),i=[n[0]/r[0],n[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function AU(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var Y$=oe,BXe=XLe("toolbox-dataZoom_"),zXe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i,a){this._brushController||(this._brushController=new oO(i.getZr()),this._brushController.on("brush",ut(this._onBrush,this)).mount()),qXe(n,r,this,a,i),HXe(n,r)},e.prototype.onclick=function(n,r,i){UXe[i].call(this)},e.prototype.remove=function(n,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(n,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(n){var r=n.areas;if(!n.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var s=new IO(OO(this.model),a,{include:["grid"]});s.matchOutputRanges(r,a,function(d,c,f){if(f.type==="cartesian2d"){var p=d.brushType;p==="rect"?(o("x",f,c[0]),o("y",f,c[1])):o({lineX:"x",lineY:"y"}[p],f,c)}}),PXe(a,i),this._dispatchZoomAction(i);function o(d,c,f){var p=c.getAxis(d),h=p.model,m=l(d,h,a),g=m.findRepresentativeAxisProxy(h).getMinMaxSpan();(g.minValueSpan!=null||g.maxValueSpan!=null)&&(f=bh(0,f.slice(),p.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)),m&&(i[m.id]={dataZoomId:m.id,startValue:f[0],endValue:f[1]})}function l(d,c,f){var p;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(h){var m=h.getAxisModel(d,c.componentIndex);m&&(p=h)}),p}},e.prototype._dispatchZoomAction=function(n){var r=[];Y$(n,function(i,a){r.push(xt(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(n){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(Is),UXe={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(IXe(this.ecModel))}};function OO(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function HXe(t,e){t.setIconStatus("back",LXe(e)>1?"emphasis":"normal")}function qXe(t,e,n,r,i){var a=n._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var s=new IO(OO(t),e,{include:["grid"]}),o=s.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(o).enableBrush(a&&o.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}xNe("dataZoom",function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(!e||e.get(n)==null)return;var r=e.getModel(n),i=[],a=OO(r),s=u0(t,a);Y$(s.xAxisModels,function(l){return o(l,"xAxis","xAxisIndex")}),Y$(s.yAxisModels,function(l){return o(l,"yAxis","yAxisIndex")});function o(l,d,c){var f=l.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:BXe+d+f};p[c]=f,i.push(p)}return i});function WXe(t){t.registerComponentModel(gXe),t.registerComponentView(yXe),xm("saveAsImage",_Xe),xm("magicType",wXe),xm("dataView",DXe),xm("dataZoom",zXe),xm("restore",VXe),Kt(mXe)}var GXe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(tn);function ose(t){var e=t.get("confine");return e!=null?!!e:t.get("renderMode")==="richText"}function lse(t){if(Qt.domSupported){for(var e=document.documentElement.style,n=0,r=t.length;n<r;n++)if(t[n]in e)return t[n]}}var use=lse(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),YXe=lse(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function dse(t,e){if(!t)return e;e=Hte(e,!0);var n=t.indexOf(e);return t=n===-1?e:"-"+t.slice(0,n)+"-"+e,t.toLowerCase()}function KXe(t,e){var n=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return n?n[e]:null}var XXe=dse(YXe,"transition"),LO=dse(use,"transform"),ZXe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Qt.transform3dSupported?"will-change:transform;":"");function QXe(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function JXe(t,e,n){if(!it(n)||n==="inside")return"";var r=t.get("backgroundColor"),i=t.get("borderWidth");e=Zp(e);var a=QXe(n),s=Math.max(Math.round(i)*1.5,6),o="",l=LO+":",d;Yt(["left","right"],a)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(d=a==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(d=a==="top"?225:45)+"deg)");var c=d*Math.PI/180,f=s+i,p=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),h=Math.round(((p-Math.SQRT2*i)/2+Math.SQRT2*i-(p-f)/2)*100)/100;o+=";"+a+":-"+h+"px";var m=e+" solid "+i+"px;",g=["position:absolute;width:"+s+"px;height:"+s+"px;z-index:-1;",o+";"+l+";","border-bottom:"+m,"border-right:"+m,"background-color:"+r+";"];return'<div style="'+g.join("")+'"></div>'}function eZe(t,e){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+t/2+"s "+n,i="opacity"+r+",visibility"+r;return e||(r=" "+t+"s "+n,i+=Qt.transformSupported?","+LO+r:",left"+r+",top"+r),XXe+":"+i}function TU(t,e,n){var r=t.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!Qt.transformSupported)return n?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=Qt.transform3dSupported,s="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return n?"top:0;left:0;"+LO+":"+s+";":[["top",0],["left",0],[use,s]]}function tZe(t){var e=[],n=t.get("fontSize"),r=t.getTextColor();r&&e.push("color:"+r),e.push("font:"+t.getFont());var i=$t(t.get("lineHeight"),Math.round(n*3/2));n&&e.push("line-height:"+i+"px");var a=t.get("textShadowColor"),s=t.get("textShadowBlur")||0,o=t.get("textShadowOffsetX")||0,l=t.get("textShadowOffsetY")||0;return a&&s&&e.push("text-shadow:"+o+"px "+l+"px "+s+"px "+a),oe(["decoration","align"],function(d){var c=t.get(d);c&&e.push("text-"+d+":"+c)}),e.join(";")}function nZe(t,e,n){var r=[],i=t.get("transitionDuration"),a=t.get("backgroundColor"),s=t.get("shadowBlur"),o=t.get("shadowColor"),l=t.get("shadowOffsetX"),d=t.get("shadowOffsetY"),c=t.getModel("textStyle"),f=Sne(t,"html"),p=l+"px "+d+"px "+s+"px "+o;return r.push("box-shadow:"+p),e&&i&&r.push(eZe(i,n)),a&&r.push("background-color:"+a),oe(["width","color","radius"],function(h){var m="border-"+h,g=Hte(m),v=t.get(g);v!=null&&r.push(m+":"+v+(h==="color"?"":"px"))}),r.push(tZe(c)),f!=null&&r.push("padding:"+Bg(f).join("px ")+"px"),r.join(";")+";"}function EU(t,e,n,r,i){var a=e&&e.painter;if(n){var s=a&&a.getViewportRoot();s&&E6e(t,s,n,r,i)}else{t[0]=r,t[1]=i;var o=a&&a.getViewportRootOffset();o&&(t[0]+=o.offsetLeft,t[1]+=o.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var rZe=function(){function t(e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Qt.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=e.getZr(),a=n.appendTo,s=a&&(it(a)?document.querySelector(a):pg(a)?a:gt(a)&&a(e.getDom()));EU(this._styleCoord,i,s,e.getWidth()/2,e.getHeight()/2),(s||e.getDom()).appendChild(r),this._api=e,this._container=s;var o=this;r.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!o._enterable){var d=i.handler,c=i.painter.getViewportRoot();As(c,l,!0),d.dispatch("mousemove",l)}},r.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return t.prototype.update=function(e){if(!this._container){var n=this._api.getDom(),r=KXe(n,"position"),i=n.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},t.prototype.show=function(e,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=ZXe+nZe(e,!this._firstShow,this._longHide)+TU(a[0],a[1],!0)+("border-color:"+Zp(n)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(e,n,r,i,a){var s=this.el;if(e==null){s.innerHTML="";return}var o="";if(it(a)&&r.get("trigger")==="item"&&!ose(r)&&(o=JXe(r,i,a)),it(e))s.innerHTML=e+o;else if(e){s.innerHTML="",Be(e)||(e=[e]);for(var l=0;l<e.length;l++)pg(e[l])&&e[l].parentNode!==s&&s.appendChild(e[l]);if(o&&s.childNodes.length){var d=document.createElement("div");d.innerHTML=o,s.appendChild(d)}}},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},t.prototype.moveTo=function(e,n){if(this.el){var r=this._styleCoord;if(EU(r,this._zr,this._container,e,n),r[0]!=null&&r[1]!=null){var i=this.el.style,a=TU(r[0],r[1]);oe(a,function(s){i[s[0]]=s[1]})}}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){var e=this,n=this.el.style;n.visibility="hidden",n.opacity="0",Qt.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ut(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},t}(),iZe=function(){function t(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),$U(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return t.prototype.update=function(e){var n=e.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(e,n,r,i,a){var s=this;_t(e)&&wn(""),this.el&&this._zr.remove(this.el);var o=r.getModel("textStyle");this.el=new un({style:{rich:n.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:o.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:Sne(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),oe(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){s.el.style[d]=r.get(d)}),oe(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){s.el.style[d]=o.get(d)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el,n=this.el.getBoundingRect(),r=MU(e.style);return[n.width+r.left+r.right,n.height+r.top+r.bottom]},t.prototype.moveTo=function(e,n){var r=this.el;if(r){var i=this._styleCoord;$U(i,this._zr,e,n),e=i[0],n=i[1];var a=r.style,s=Ld(a.borderWidth||0),o=MU(a);r.x=e+s+o.left,r.y=n+s+o.top,r.markRedraw()}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ut(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function Ld(t){return Math.max(0,t)}function MU(t){var e=Ld(t.shadowBlur||0),n=Ld(t.shadowOffsetX||0),r=Ld(t.shadowOffsetY||0);return{left:Ld(e-n),right:Ld(e+n),top:Ld(e-r),bottom:Ld(e+r)}}function $U(t,e,n,r){t[0]=n,t[1]=r,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var aZe=new sn({shape:{x:-1,y:-1,width:2,height:2}}),sZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){if(!(Qt.node||!r.getDom())){var i=n.getComponent("tooltip"),a=this._renderMode=r8e(i.get("renderMode"));this._tooltipContent=a==="richText"?new iZe(r):new rZe(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(n,r,i){if(!(Qt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(n),a.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?qg(this,"_updatePosition",50,"fixRate"):x1(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var n=this._tooltipModel,r=n.get("triggerOn");Yae("itemTooltip",this._api,ut(function(i,a,s){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,s):i==="leave"&&this._hide(s))},this))},e.prototype._keepShow=function(){var n=this._tooltipModel,r=this._ecModel,i=this._api,a=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&s.manuallyShowTip(n,r,i,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(n,r,i,a){if(!(a.from===this.uid||Qt.node||!i.getDom())){var s=DU(a,i);this._ticket="";var o=a.dataByCoordSys,l=dZe(a,r,i);if(l){var d=l.el.getBoundingRect().clone();d.applyTransform(l.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:l.el,position:a.position,positionDefault:"bottom"},s)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=aZe;c.x=a.x,c.y=a.y,c.update(),Tt(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},s)}else if(o)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:o,tooltipOption:a.tooltipOption},s);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(n,r,i,a))return;var f=Kae(a,r),p=f.point[0],h=f.point[1];p!=null&&h!=null&&this._tryShow({offsetX:p,offsetY:h,target:f.el,position:a.position,positionDefault:"bottom"},s)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},s))}},e.prototype.manuallyHideTip=function(n,r,i,a){var s=this._tooltipContent;this._tooltipModel&&s.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(DU(a,i))},e.prototype._manuallyAxisShowTip=function(n,r,i,a){var s=a.seriesIndex,o=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(s==null||o==null||l==null)){var d=r.getSeriesByIndex(s);if(d){var c=d.getData(),f=qv([c.getItemModel(o),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:o,position:a.position}),!0}}},e.prototype._tryShow=function(n,r){var i=n.target,a=this._tooltipModel;if(a){this._lastX=n.offsetX,this._lastY=n.offsetY;var s=n.dataByCoordSys;if(s&&s.length)this._showAxisTooltip(s,n);else if(i){var o=Tt(i);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,d;sp(i,function(c){if(Tt(c).dataIndex!=null)return l=c,!0;if(Tt(c).tooltipConfig!=null)return d=c,!0},!0),l?this._showSeriesItemTooltip(n,l,r):d?this._showComponentItemTooltip(n,d,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(n,r){var i=n.get("showDelay");r=ut(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(n,r){var i=this._ecModel,a=this._tooltipModel,s=[r.offsetX,r.offsetY],o=qv([r.tooltipOption],a),l=this._renderMode,d=[],c=di("section",{blocks:[],noHeader:!0}),f=[],p=new U4;oe(n,function(x){oe(x.dataByAxis,function(w){var k=i.getComponent(w.axisDim+"Axis",w.axisIndex),S=w.value;if(!(!k||S==null)){var C=qae(S,k.axis,i,w.seriesDataIndices,w.valueLabelOpt),A=di("section",{header:C,noHeader:!xo(C),sortBlocks:!0,blocks:[]});c.blocks.push(A),oe(w.seriesDataIndices,function(M){var $=i.getSeriesByIndex(M.seriesIndex),R=M.dataIndexInside,I=$.getDataParams(R);if(!(I.dataIndex<0)){I.axisDim=w.axisDim,I.axisIndex=w.axisIndex,I.axisType=w.axisType,I.axisId=w.axisId,I.axisValue=OI(k.axis,{value:S}),I.axisValueLabel=C,I.marker=p.makeTooltipMarker("item",Zp(I.color),l);var B=yF($.formatTooltip(R,!0,null)),j=B.frag;if(j){var z=qv([$],a).get("valueFormatter");A.blocks.push(z?Oe({valueFormatter:z},j):j)}B.text&&f.push(B.text),d.push(I)}})}})}),c.blocks.reverse(),f.reverse();var h=r.position,m=o.get("order"),g=SF(c,p,l,m,i.get("useUTC"),o.get("textStyle"));g&&f.unshift(g);var v=l==="richText"?`

`:"<br/>",_=f.join(v);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(n,d)?this._updatePosition(o,h,s[0],s[1],this._tooltipContent,d):this._showTooltipContent(o,_,d,Math.random()+"",s[0],s[1],h,null,p)})},e.prototype._showSeriesItemTooltip=function(n,r,i){var a=this._ecModel,s=Tt(r),o=s.seriesIndex,l=a.getSeriesByIndex(o),d=s.dataModel||l,c=s.dataIndex,f=s.dataType,p=d.getData(f),h=this._renderMode,m=n.positionDefault,g=qv([p.getItemModel(c),d,l&&(l.coordinateSystem||{}).model],this._tooltipModel,m?{position:m}:null),v=g.get("trigger");if(!(v!=null&&v!=="item")){var _=d.getDataParams(c,f),x=new U4;_.marker=x.makeTooltipMarker("item",Zp(_.color),h);var w=yF(d.formatTooltip(c,!1,f)),k=g.get("order"),S=g.get("valueFormatter"),C=w.frag,A=C?SF(S?Oe({valueFormatter:S},C):C,x,h,k,a.get("useUTC"),g.get("textStyle")):w.text,M="item_"+d.name+"_"+c;this._showOrMove(g,function(){this._showTooltipContent(g,A,_,M,n.offsetX,n.offsetY,n.position,n.target,x)}),i({type:"showTip",dataIndexInside:c,dataIndex:p.getRawIndex(c),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(n,r,i){var a=this._renderMode==="html",s=Tt(r),o=s.tooltipConfig,l=o.option||{},d=l.encodeHTMLContent;if(it(l)){var c=l;l={content:c,formatter:c},d=!0}d&&a&&l.content&&(l=xt(l),l.content=ga(l.content));var f=[l],p=this._ecModel.getComponent(s.componentMainType,s.componentIndex);p&&f.push(p),f.push({formatter:l.content});var h=n.positionDefault,m=qv(f,this._tooltipModel,h?{position:h}:null),g=m.get("content"),v=Math.random()+"",_=new U4;this._showOrMove(m,function(){var x=xt(m.get("formatterParams")||{});this._showTooltipContent(m,g,x,v,n.offsetX,n.offsetY,n.position,r,_)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(n,r,i,a,s,o,l,d,c){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var f=this._tooltipContent;f.setEnterable(n.get("enterable"));var p=n.get("formatter");l=l||n.get("position");var h=r,m=this._getNearestPoint([s,o],i,n.get("trigger"),n.get("borderColor")),g=m.color;if(p)if(it(p)){var v=n.ecModel.get("useUTC"),_=Be(i)?i[0]:i,x=_&&_.axisType&&_.axisType.indexOf("time")>=0;h=p,x&&(h=XC(_.axisValue,h,v)),h=qte(h,i,!0)}else if(gt(p)){var w=ut(function(k,S){k===this._ticket&&(f.setContent(S,c,n,g,l),this._updatePosition(n,l,s,o,f,i,d))},this);this._ticket=a,h=p(i,a,w)}else h=p;f.setContent(h,c,n,g,l),f.show(n,g),this._updatePosition(n,l,s,o,f,i,d)}},e.prototype._getNearestPoint=function(n,r,i,a){if(i==="axis"||Be(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Be(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(n,r,i,a,s,o,l){var d=this._api.getWidth(),c=this._api.getHeight();r=r||n.get("position");var f=s.getSize(),p=n.get("align"),h=n.get("verticalAlign"),m=l&&l.getBoundingRect().clone();if(l&&m.applyTransform(l.transform),gt(r)&&(r=r([i,a],o,s.el,m,{viewSize:[d,c],contentSize:f.slice()})),Be(r))i=Qe(r[0],d),a=Qe(r[1],c);else if(_t(r)){var g=r;g.width=f[0],g.height=f[1];var v=Qr(g,{width:d,height:c});i=v.x,a=v.y,p=null,h=null}else if(it(r)&&l){var _=uZe(r,m,f,n.get("borderWidth"));i=_[0],a=_[1]}else{var _=oZe(i,a,s,d,c,p?null:20,h?null:20);i=_[0],a=_[1]}if(p&&(i-=RU(p)?f[0]/2:p==="right"?f[0]:0),h&&(a-=RU(h)?f[1]/2:h==="bottom"?f[1]:0),ose(n)){var _=lZe(i,a,s,d,c);i=_[0],a=_[1]}s.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(n,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,s=!!i&&i.length===n.length;return s&&oe(i,function(o,l){var d=o.dataByAxis||[],c=n[l]||{},f=c.dataByAxis||[];s=s&&d.length===f.length,s&&oe(d,function(p,h){var m=f[h]||{},g=p.seriesDataIndices||[],v=m.seriesDataIndices||[];s=s&&p.value===m.value&&p.axisType===m.axisType&&p.axisId===m.axisId&&g.length===v.length,s&&oe(g,function(_,x){var w=v[x];s=s&&_.seriesIndex===w.seriesIndex&&_.dataIndex===w.dataIndex}),a&&oe(p.seriesDataIndices,function(_){var x=_.seriesIndex,w=r[x],k=a[x];w&&k&&k.data!==w.data&&(s=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=r,!!s},e.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},e.prototype.dispose=function(n,r){Qt.node||!r.getDom()||(x1(this,"_updatePosition"),this._tooltipContent.dispose(),U$("itemTooltip",r))},e.type="tooltip",e}(hr);function qv(t,e,n){var r=e.ecModel,i;n?(i=new An(n,r,r),i=new An(e.option,i,r)):i=e;for(var a=t.length-1;a>=0;a--){var s=t[a];s&&(s instanceof An&&(s=s.get("tooltip",!0)),it(s)&&(s={formatter:s}),s&&(i=new An(s,i,r)))}return i}function DU(t,e){return t.dispatchAction||ut(e.dispatchAction,e)}function oZe(t,e,n,r,i,a,s){var o=n.getSize(),l=o[0],d=o[1];return a!=null&&(t+l+a+2>r?t-=l+a:t+=a),s!=null&&(e+d+s>i?e-=d+s:e+=s),[t,e]}function lZe(t,e,n,r,i){var a=n.getSize(),s=a[0],o=a[1];return t=Math.min(t+s,r)-s,e=Math.min(e+o,i)-o,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function uZe(t,e,n,r){var i=n[0],a=n[1],s=Math.ceil(Math.SQRT2*r)+8,o=0,l=0,d=e.width,c=e.height;switch(t){case"inside":o=e.x+d/2-i/2,l=e.y+c/2-a/2;break;case"top":o=e.x+d/2-i/2,l=e.y-a-s;break;case"bottom":o=e.x+d/2-i/2,l=e.y+c+s;break;case"left":o=e.x-i-s,l=e.y+c/2-a/2;break;case"right":o=e.x+d+s,l=e.y+c/2-a/2}return[o,l]}function RU(t){return t==="center"||t==="middle"}function dZe(t,e,n){var r=ZP(t).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=_b(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),s=a.models[0];if(s){var o=n.getViewOfComponentModel(s),l;if(o.group.traverse(function(d){var c=Tt(d).tooltipConfig;if(c&&c.name===t.name)return l=d,!0}),l)return{componentMainType:i,componentIndex:s.componentIndex,el:l}}}}function cZe(t){Kt(jb),t.registerComponentModel(GXe),t.registerComponentView(sZe),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Or),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Or)}var fZe=["rect","polygon","keep","clear"];function pZe(t,e){var n=Dn(t?t.brush:[]);if(n.length){var r=[];oe(n,function(l){var d=l.hasOwnProperty("toolbox")?l.toolbox:[];d instanceof Array&&(r=r.concat(d))});var i=t&&t.toolbox;Be(i)&&(i=i[0]),i||(i={feature:{}},t.toolbox=[i]);var a=i.feature||(i.feature={}),s=a.brush||(a.brush={}),o=s.type||(s.type=[]);o.push.apply(o,r),hZe(o),e&&!o.length&&o.push.apply(o,fZe)}}function hZe(t){var e={};oe(t,function(n){e[n]=1}),t.length=0,oe(e,function(n,r){t.push(r)})}var PU=oe;function IU(t){if(t){for(var e in t)if(t.hasOwnProperty(e))return!0}}function K$(t,e,n){var r={};return PU(e,function(a){var s=r[a]=i();PU(t[a],function(o,l){if(oi.isValidType(l)){var d={type:l,visual:o};n&&n(d,a),s[l]=new oi(d),l==="opacity"&&(d=xt(d),d.type="colorAlpha",s.__hidden.__alphaForOpacity=new oi(d))}})}),r;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var s=new a;return s}}function cse(t,e,n){var r;oe(n,function(i){e.hasOwnProperty(i)&&IU(e[i])&&(r=!0)}),r&&oe(n,function(i){e.hasOwnProperty(i)&&IU(e[i])?t[i]=xt(e[i]):delete t[i]})}function mZe(t,e,n,r,i,a){var s={};oe(t,function(f){var p=oi.prepareVisualTypes(e[f]);s[f]=p});var o;function l(f){return AI(n,o,f)}function d(f,p){Ine(n,o,f,p)}n.each(c);function c(f,p){o=f;var h=n.getRawDataItem(o);if(!(h&&h.visualMap===!1))for(var m=r.call(i,f),g=e[m],v=s[m],_=0,x=v.length;_<x;_++){var w=v[_];g[w]&&g[w].applyVisual(f,l,d)}}}function gZe(t,e,n,r){var i={};return oe(t,function(a){var s=oi.prepareVisualTypes(e[a]);i[a]=s}),{progress:function(s,o){var l;r!=null&&(l=o.getDimensionIndex(r));function d(S){return AI(o,f,S)}function c(S,C){Ine(o,f,S,C)}for(var f,p=o.getStore();(f=s.next())!=null;){var h=o.getRawDataItem(f);if(!(h&&h.visualMap===!1))for(var m=r!=null?p.get(l,f):f,g=n(m),v=e[g],_=i[g],x=0,w=_.length;x<w;x++){var k=_[x];v[k]&&v[k].applyVisual(m,d,c)}}}}}function vZe(t){var e=t.brushType,n={point:function(r){return OU[e].point(r,n,t)},rect:function(r){return OU[e].rect(r,n,t)}};return n}var OU={lineX:LU(0),lineY:LU(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&Wf(n.range,t[0],t[1])},rect:function(t,e,n){var r=n.range;if(!t||r.length<=1)return!1;var i=t.x,a=t.y,s=t.width,o=t.height,l=r[0];if(Wf(r,i,a)||Wf(r,i+s,a)||Wf(r,i,a+o)||Wf(r,i+s,a+o)||qt.create(t).contain(l[0],l[1])||my(i,a,i+s,a,r)||my(i,a,i,a+o,r)||my(i+s,a,i+s,a+o,r)||my(i,a+o,i+s,a+o,r))return!0}}};function LU(t){var e=["x","y"],n=["width","height"];return{point:function(r,i,a){if(r){var s=a.range,o=r[t];return Wv(o,s)}},rect:function(r,i,a){if(r){var s=a.range,o=[r[e[t]],r[e[t]]+r[n[t]]];return o[1]<o[0]&&o.reverse(),Wv(o[0],s)||Wv(o[1],s)||Wv(s[0],o)||Wv(s[1],o)}}}}function Wv(t,e){return e[0]<=t&&t<=e[1]}var VU=["inBrush","outOfBrush"],i5="__ecBrushSelect",X$="__ecInBrushSelectEvent";function fse(t){t.eachComponent({mainType:"brush"},function(e){var n=e.brushTargetManager=new IO(e.option,t);n.setInputRanges(e.areas,t)})}function yZe(t,e,n){var r=[],i,a;t.eachComponent({mainType:"brush"},function(s){n&&n.type==="takeGlobalCursor"&&s.setBrushOption(n.key==="brush"?n.brushOption:{brushType:!1})}),fse(t),t.eachComponent({mainType:"brush"},function(s,o){var l={brushId:s.id,brushIndex:o,brushName:s.name,areas:xt(s.areas),selected:[]};r.push(l);var d=s.option,c=d.brushLink,f=[],p=[],h=[],m=!1;o||(i=d.throttleType,a=d.throttleDelay);var g=ze(s.areas,function(S){var C=wZe[S.brushType],A=yt({boundingRect:C?C(S):void 0},S);return A.selectors=vZe(A),A}),v=K$(s.option,VU,function(S){S.mappingMethod="fixed"});Be(c)&&oe(c,function(S){f[S]=1});function _(S){return c==="all"||!!f[S]}function x(S){return!!S.length}t.eachSeries(function(S,C){var A=h[C]=[];S.subType==="parallel"?w(S,C):k(S,C,A)});function w(S,C){var A=S.coordinateSystem;m=m||A.hasAxisBrushed(),_(C)&&A.eachActiveState(S.getData(),function(M,$){M==="active"&&(p[$]=1)})}function k(S,C,A){if(!(!S.brushSelector||xZe(s,C))&&(oe(g,function($){s.brushTargetManager.controlSeries($,S,t)&&A.push($),m=m||x(A)}),_(C)&&x(A))){var M=S.getData();M.each(function($){NU(S,A,M,$)&&(p[$]=1)})}}t.eachSeries(function(S,C){var A={seriesId:S.id,seriesIndex:C,seriesName:S.name,dataIndex:[]};l.selected.push(A);var M=h[C],$=S.getData(),R=_(C)?function(I){return p[I]?(A.dataIndex.push($.getRawIndex(I)),"inBrush"):"outOfBrush"}:function(I){return NU(S,M,$,I)?(A.dataIndex.push($.getRawIndex(I)),"inBrush"):"outOfBrush"};(_(C)?m:x(M))&&mZe(VU,v,$,R)})}),bZe(e,i,a,r,n)}function bZe(t,e,n,r,i){if(i){var a=t.getZr();if(!a[X$]){a[i5]||(a[i5]=_Ze);var s=qg(a,i5,n,e);s(t,r)}}}function _Ze(t,e){if(!t.isDisposed()){var n=t.getZr();n[X$]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[X$]=!1}}function NU(t,e,n,r){for(var i=0,a=e.length;i<a;i++){var s=e[i];if(t.brushSelector(r,n,s.selectors,s))return!0}}function xZe(t,e){var n=t.option.seriesIndex;return n!=null&&n!=="all"&&(Be(n)?Yt(n,e)<0:e!==n)}var wZe={rect:function(t){return jU(t.range)},polygon:function(t){for(var e,n=t.range,r=0,i=n.length;r<i;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=n[r];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&jU(e)}};function jU(t){return new qt(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var kZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){this.ecModel=n,this.api=r,this.model,(this._brushController=new oO(r.getZr())).on("brush",ut(this._onBrush,this)).mount()},e.prototype.render=function(n,r,i,a){this.model=n,this._updateController(n,r,i,a)},e.prototype.updateTransform=function(n,r,i,a){fse(r),this._updateController(n,r,i,a)},e.prototype.updateVisual=function(n,r,i,a){this.updateTransform(n,r,i,a)},e.prototype.updateView=function(n,r,i,a){this._updateController(n,r,i,a)},e.prototype._updateController=function(n,r,i,a){(!a||a.$from!==n.id)&&this._brushController.setPanels(n.brushTargetManager.makePanelOpts(i)).enableBrush(n.brushOption).updateCovers(n.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(n){var r=this.model.id,i=this.model.brushTargetManager.setOutputRanges(n.areas,this.ecModel);(!n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:xt(i),$from:r}),n.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:xt(i),$from:r})},e.type="brush",e}(hr),SZe="#ddd",CZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.areas=[],n.brushOption={},n}return e.prototype.optionUpdated=function(n,r){var i=this.option;!r&&cse(i,n,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:SZe},a.hasOwnProperty("liftZ")||(a.liftZ=5)},e.prototype.setAreas=function(n){n&&(this.areas=ze(n,function(r){return FU(this.option,r)},this))},e.prototype.setBrushOption=function(n){this.brushOption=FU(this.option,n),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(tn);function FU(t,e){return jt({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new An(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var AZe=["rect","polygon","lineX","lineY","keep","clear"],TZe=function(t){Ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i){var a,s,o;r.eachComponent({mainType:"brush"},function(l){a=l.brushType,s=l.brushOption.brushMode||"single",o=o||!!l.areas.length}),this._brushType=a,this._brushMode=s,oe(n.get("type",!0),function(l){n.setIconStatus(l,(l==="keep"?s==="multiple":l==="clear"?o:l===a)?"emphasis":"normal")})},e.prototype.updateView=function(n,r,i){this.render(n,r,i)},e.prototype.getIcons=function(){var n=this.model,r=n.get("icon",!0),i={};return oe(n.get("type",!0),function(a){r[a]&&(i[a]=r[a])}),i},e.prototype.onclick=function(n,r,i){var a=this._brushType,s=this._brushMode;i==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?s==="multiple"?"single":"multiple":s}})},e.getDefaultOption=function(n){var r={show:!0,type:AZe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:n.getLocaleModel().get(["toolbox","brush","title"])};return r},e}(Is);function EZe(t){t.registerComponentView(kZe),t.registerComponentModel(CZe),t.registerPreprocessor(pZe),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,yZe),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,n){n.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Or),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Or),xm("brush",TZe)}var MZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(tn),$Ze=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){if(this.group.removeAll(),!!n.get("show")){var a=this.group,s=n.getModel("textStyle"),o=n.getModel("subtextStyle"),l=n.get("textAlign"),d=$t(n.get("textBaseline"),n.get("textVerticalAlign")),c=new un({style:Kn(s,{text:n.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),p=n.get("subtext"),h=new un({style:Kn(o,{text:p,fill:o.getTextColor(),y:f.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),m=n.get("link"),g=n.get("sublink"),v=n.get("triggerEvent",!0);c.silent=!m&&!v,h.silent=!g&&!v,m&&c.on("click",function(){Mk(m,"_"+n.get("target"))}),g&&h.on("click",function(){Mk(g,"_"+n.get("subtarget"))}),Tt(c).eventData=Tt(h).eventData=v?{componentType:"title",componentIndex:n.componentIndex}:null,a.add(c),p&&a.add(h);var _=a.getBoundingRect(),x=n.getBoxLayoutParams();x.width=_.width,x.height=_.height;var w=Qr(x,{width:i.getWidth(),height:i.getHeight()},n.get("padding"));l||(l=n.get("left")||n.get("right"),l==="middle"&&(l="center"),l==="right"?w.x+=w.width:l==="center"&&(w.x+=w.width/2)),d||(d=n.get("top")||n.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?w.y+=w.height:d==="middle"&&(w.y+=w.height/2),d=d||"top"),a.x=w.x,a.y=w.y,a.markRedraw();var k={align:l,verticalAlign:d};c.setStyle(k),h.setStyle(k),_=a.getBoundingRect();var S=w.margin,C=n.getItemStyle(["color","opacity"]);C.fill=n.get("backgroundColor");var A=new sn({shape:{x:_.x-S[3],y:_.y-S[0],width:_.width+S[1]+S[3],height:_.height+S[0]+S[2],r:n.get("borderRadius")},style:C,subPixelOptimize:!0,silent:!0});a.add(A)}},e.type="title",e}(hr);function DZe(t){t.registerComponentModel(MZe),t.registerComponentView($Ze)}var BU=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),this._initData()},e.prototype.mergeOption=function(n){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(n){n==null&&(n=this.option.currentIndex);var r=this._data.count();this.option.loop?n=(n%r+r)%r:(n>=r&&(n=r-1),n<0&&(n=0)),this.option.currentIndex=n},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(n){this.option.autoPlay=!!n},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var n=this.option,r=n.data||[],i=n.axisType,a=this._names=[],s;i==="category"?(s=[],oe(r,function(d,c){var f=Yr(Lg(d),""),p;_t(d)?(p=xt(d),p.value=c):p=c,s.push(p),a.push(f)})):s=r;var o={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new ba([{name:"value",type:o}],this);l.initData(s,a)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(tn),pse=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="timeline.slider",e.defaultOption=Yc(BU.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(BU);Hr(pse,rA.prototype);var RZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="timeline",e}(hr),PZe=function(t){Ce(e,t);function e(n,r,i,a){var s=t.call(this,n,r,i)||this;return s.type=a||"value",s}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(Fo),a5=Math.PI,zU=on(),IZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){this.api=r},e.prototype.render=function(n,r,i){if(this.model=n,this.api=i,this.ecModel=r,this.group.removeAll(),n.get("show",!0)){var a=this._layout(n,i),s=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,n);n.formatTooltip=function(d){var c=l.scale.getLabel({value:d});return di("nameValue",{noName:!0,value:c})},oe(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](a,s,l,n)},this),this._renderAxisLabel(a,o,l,n),this._position(a,n)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(n,r){var i=n.get(["label","position"]),a=n.get("orient"),s=LZe(n,r),o;i==null||i==="auto"?o=a==="horizontal"?s.y+s.height/2<r.getHeight()/2?"-":"+":s.x+s.width/2<r.getWidth()/2?"+":"-":it(i)?o={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:o=i;var l={horizontal:"center",vertical:o>=0||o==="+"?"left":"right"},d={horizontal:o>=0||o==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:a5/2},f=a==="vertical"?s.height:s.width,p=n.getModel("controlStyle"),h=p.get("show",!0),m=h?p.get("itemSize"):0,g=h?p.get("itemGap"):0,v=m+g,_=n.get(["label","rotate"])||0;_=_*a5/180;var x,w,k,S=p.get("position",!0),C=h&&p.get("showPlayBtn",!0),A=h&&p.get("showPrevBtn",!0),M=h&&p.get("showNextBtn",!0),$=0,R=f;S==="left"||S==="bottom"?(C&&(x=[0,0],$+=v),A&&(w=[$,0],$+=v),M&&(k=[R-m,0],R-=v)):(C&&(x=[R-m,0],R-=v),A&&(w=[0,0],$+=v),M&&(k=[R-m,0],R-=v));var I=[$,R];return n.get("inverse")&&I.reverse(),{viewRect:s,mainLength:f,orient:a,rotation:c[a],labelRotation:_,labelPosOpt:o,labelAlign:n.get(["label","align"])||l[a],labelBaseline:n.get(["label","verticalAlign"])||n.get(["label","baseline"])||d[a],playPosition:x,prevBtnPosition:w,nextBtnPosition:k,axisExtent:I,controlSize:m,controlGap:g}},e.prototype._position=function(n,r){var i=this._mainGroup,a=this._labelGroup,s=n.viewRect;if(n.orient==="vertical"){var o=ds(),l=s.x,d=s.y+s.height;Nl(o,o,[-l,-d]),fh(o,o,-a5/2),Nl(o,o,[l,d]),s=s.clone(),s.applyTransform(o)}var c=x(s),f=x(i.getBoundingRect()),p=x(a.getBoundingRect()),h=[i.x,i.y],m=[a.x,a.y];m[0]=h[0]=c[0][0];var g=n.labelPosOpt;if(g==null||it(g)){var v=g==="+"?0:1;w(h,f,c,1,v),w(m,p,c,1,1-v)}else{var v=g>=0?0:1;w(h,f,c,1,v),m[1]=h[1]+g}i.setPosition(h),a.setPosition(m),i.rotation=a.rotation=n.rotation,_(i),_(a);function _(k){k.originX=c[0][0]-k.x,k.originY=c[1][0]-k.y}function x(k){return[[k.x,k.x+k.width],[k.y,k.y+k.height]]}function w(k,S,C,A,M){k[A]+=C[A][M]-S[A][M]}},e.prototype._createAxis=function(n,r){var i=r.getData(),a=r.get("axisType"),s=OZe(r,a);s.getTicks=function(){return i.mapArray(["value"],function(d){return{value:d}})};var o=i.getDataExtent("value");s.setExtent(o[0],o[1]),s.calcNiceTicks();var l=new PZe("value",s,n.axisExtent,a);return l.model=r,l},e.prototype._createGroup=function(n){var r=this[n]=new kt;return this.group.add(r),r},e.prototype._renderAxisLine=function(n,r,i,a){var s=i.getExtent();if(a.get(["lineStyle","show"])){var o=new ii({shape:{x1:s[0],y1:0,x2:s[1],y2:0},style:Oe({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(o);var l=this._progressLine=new ii({shape:{x1:s[0],x2:this._currentPointer?this._currentPointer.x:s[0],y1:0,y2:0},style:yt({lineCap:"round",lineWidth:o.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},e.prototype._renderAxisTick=function(n,r,i,a){var s=this,o=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],oe(l,function(d){var c=i.dataToCoord(d.value),f=o.getItemModel(d.value),p=f.getModel("itemStyle"),h=f.getModel(["emphasis","itemStyle"]),m=f.getModel(["progress","itemStyle"]),g={x:c,y:0,onclick:ut(s._changeTimeline,s,d.value)},v=UU(f,p,r,g);v.ensureState("emphasis").style=h.getItemStyle(),v.ensureState("progress").style=m.getItemStyle(),$p(v);var _=Tt(v);f.get("tooltip")?(_.dataIndex=d.value,_.dataModel=a):_.dataIndex=_.dataModel=null,s._tickSymbols.push(v)})},e.prototype._renderAxisLabel=function(n,r,i,a){var s=this,o=i.getLabelModel();if(o.get("show")){var l=a.getData(),d=i.getViewLabels();this._tickLabels=[],oe(d,function(c){var f=c.tickValue,p=l.getItemModel(f),h=p.getModel("label"),m=p.getModel(["emphasis","label"]),g=p.getModel(["progress","label"]),v=i.dataToCoord(c.tickValue),_=new un({x:v,y:0,rotation:n.labelRotation-n.rotation,onclick:ut(s._changeTimeline,s,f),silent:!1,style:Kn(h,{text:c.formattedLabel,align:n.labelAlign,verticalAlign:n.labelBaseline})});_.ensureState("emphasis").style=Kn(m),_.ensureState("progress").style=Kn(g),r.add(_),$p(_),zU(_).dataIndex=f,s._tickLabels.push(_)})}},e.prototype._renderControl=function(n,r,i,a){var s=n.controlSize,o=n.rotation,l=a.getModel("controlStyle").getItemStyle(),d=a.getModel(["emphasis","controlStyle"]).getItemStyle(),c=a.getPlayState(),f=a.get("inverse",!0);p(n.nextBtnPosition,"next",ut(this._changeTimeline,this,f?"-":"+")),p(n.prevBtnPosition,"prev",ut(this._changeTimeline,this,f?"+":"-")),p(n.playPosition,c?"stop":"play",ut(this._handlePlayClick,this,!c),!0);function p(h,m,g,v){if(h){var _=Lo($t(a.get(["controlStyle",m+"BtnSize"]),s),s),x=[0,-_/2,_,_],w=VZe(a,m+"Icon",x,{x:h[0],y:h[1],originX:s/2,originY:0,rotation:v?-o:0,rectHover:!0,style:l,onclick:g});w.ensureState("emphasis").style=d,r.add(w),$p(w)}}},e.prototype._renderCurrentPointer=function(n,r,i,a){var s=a.getData(),o=a.getCurrentIndex(),l=s.getItemModel(o).getModel("checkpointStyle"),d=this,c={onCreate:function(f){f.draggable=!0,f.drift=ut(d._handlePointerDrag,d),f.ondragend=ut(d._handlePointerDragend,d),HU(f,d._progressLine,o,i,a,!0)},onUpdate:function(f){HU(f,d._progressLine,o,i,a)}};this._currentPointer=UU(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(n){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:n,from:this.uid})},e.prototype._handlePointerDrag=function(n,r,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},e.prototype._handlePointerDragend=function(n){this._pointerChangeTimeline([n.offsetX,n.offsetY],!0)},e.prototype._pointerChangeTimeline=function(n,r){var i=this._toAxisCoord(n)[0],a=this._axis,s=Fs(a.getExtent().slice());i>s[1]&&(i=s[1]),i<s[0]&&(i=s[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var o=this._progressLine;o&&(o.shape.x2=i,o.dirty());var l=this._findNearestTick(i),d=this.model;(r||l!==d.getCurrentIndex()&&d.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var n=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=n.model;n._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(n){var r=this._mainGroup.getLocalTransform();return Ao(n,r,!0)},e.prototype._findNearestTick=function(n){var r=this.model.getData(),i=1/0,a,s=this._axis;return r.each(["value"],function(o,l){var d=s.dataToCoord(o),c=Math.abs(d-n);c<i&&(i=c,a=l)}),a},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(n){var r=this.model.getCurrentIndex();n==="+"?n=r+1:n==="-"&&(n=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:n,from:this.uid})},e.prototype._updateTicksStatus=function(){var n=this.model.getCurrentIndex(),r=this._tickSymbols,i=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<n);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",zU(i[a]).dataIndex<=n)},e.type="timeline.slider",e}(RZe);function OZe(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new uA({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new PI({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new ad}}function LZe(t,e){return Qr(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function VZe(t,e,n,r){var i=r.style,a=Ab(t.get(["controlStyle",e]),r||{},new qt(n[0],n[1],n[2],n[3]));return i&&a.setStyle(i),a}function UU(t,e,n,r,i,a){var s=e.get("color");if(i)i.setColor(s),n.add(i),a&&a.onUpdate(i);else{var o=t.get("symbol");i=Ur(o,-1,-1,2,2,s),i.setStyle("strokeNoScale",!0),n.add(i),a&&a.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),r=jt({rectHover:!0,z2:100},r,!0);var d=Wg(t.get("symbolSize"));r.scaleX=d[0]/2,r.scaleY=d[1]/2;var c=mh(t.get("symbolOffset"),d);c&&(r.x=(r.x||0)+c[0],r.y=(r.y||0)+c[1]);var f=t.get("symbolRotate");return r.rotation=(f||0)*Math.PI/180||0,i.attr(r),i.updateTransform(),i}function HU(t,e,n,r,i,a){if(!t.dragging){var s=i.getModel("checkpointStyle"),o=r.dataToCoord(i.getData().get("value",n));if(a||!s.get("animation",!0))t.attr({x:o,y:0}),e&&e.attr({shape:{x2:o}});else{var l={duration:s.get("animationDuration",!0),easing:s.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:o,y:0},l),e&&e.animateTo({shape:{x2:o}},l)}}}function NZe(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,n,r){var i=n.getComponent("timeline");return i&&e.currentIndex!=null&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),n.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),yt({currentIndex:i.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,n){var r=n.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function jZe(t){var e=t&&t.timeline;Be(e)||(e=e?[e]:[]),oe(e,function(n){n&&FZe(n)})}function FZe(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),qU(t),Kf(t,"controlPosition")){var r=t.controlStyle||(t.controlStyle={});Kf(r,"position")||(r.position=t.controlPosition),r.position==="none"&&!Kf(r,"show")&&(r.show=!1,delete r.position),delete t.controlPosition}oe(t.data||[],function(i){_t(i)&&!Be(i)&&(!Kf(i,"value")&&Kf(i,"name")&&(i.value=i.name),qU(i))})}function qU(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),r=t.label||t.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};oe(r,function(s,o){!a[o]&&!Kf(i,o)&&(i[o]=s)}),n.label&&!Kf(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function Kf(t,e){return t.hasOwnProperty(e)}function BZe(t){t.registerComponentModel(pse),t.registerComponentView(IZe),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),NZe(t),t.registerPreprocessor(jZe)}function VO(t,e){if(!t)return!1;for(var n=Be(t)?t:[t],r=0;r<n.length;r++)if(n[r]&&n[r][e])return!0;return!1}function Mx(t){Gp(t,"label",["show"])}var $x=on(),od=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),this._mergeOption(n,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(Qt.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},e.prototype.mergeOption=function(n,r){this._mergeOption(n,r,!1,!1)},e.prototype._mergeOption=function(n,r,i,a){var s=this.mainType;i||r.eachSeries(function(o){var l=o.get(this.mainType,!0),d=$x(o)[s];if(!l||!l.data){$x(o)[s]=null;return}d?d._mergeOption(l,r,!0):(a&&Mx(l),oe(l.data,function(c){c instanceof Array?(Mx(c[0]),Mx(c[1])):Mx(c)}),d=this.createMarkerModelFromSeries(l,this,r),Oe(d,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),d.__hostSeries=o),$x(o)[s]=d},this)},e.prototype.formatTooltip=function(n,r,i){var a=this.getData(),s=this.getRawValue(n),o=a.getName(n);return di("section",{header:this.name,blocks:[di("nameValue",{name:o,value:s,noName:!o,noValue:s==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(n){this._data=n},e.prototype.getDataParams=function(n,r){var i=rA.prototype.getDataParams.call(this,n,r),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},e.getMarkerModelFromSeries=function(n,r){return $x(n)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(tn);Hr(od,rA.prototype);var zZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.createMarkerModelFromSeries=function(n,r,i){return new e(n,r,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(od);function Z$(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function UZe(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function Dx(t,e,n,r,i,a){var s=[],o=Oc(e,r),l=o?e.getCalculationInfo("stackResultDimension"):r,d=NO(e,l,t),c=e.indicesOfNearest(l,d)[0];s[i]=e.get(n,c),s[a]=e.get(l,c);var f=e.get(r,c),p=bl(e.get(r,c));return p=Math.min(p,20),p>=0&&(s[a]=+s[a].toFixed(p)),[s,f]}var s5={min:Pt(Dx,"min"),max:Pt(Dx,"max"),average:Pt(Dx,"average"),median:Pt(Dx,"median")};function O1(t,e){if(e){var n=t.getData(),r=t.coordinateSystem,i=r&&r.dimensions;if(!UZe(e)&&!Be(e.coord)&&Be(i)){var a=hse(e,n,r,t);if(e=xt(e),e.type&&s5[e.type]&&a.baseAxis&&a.valueAxis){var s=Yt(i,a.baseAxis.dim),o=Yt(i,a.valueAxis.dim),l=s5[e.type](n,a.baseDataDim,a.valueDataDim,s,o);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!Be(i))e.coord=[];else for(var d=e.coord,c=0;c<2;c++)s5[d[c]]&&(d[c]=NO(n,n.mapDimension(i[c]),d[c]));return e}}function hse(t,e,n,r){var i={};return t.valueIndex!=null||t.valueDim!=null?(i.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim,i.valueAxis=n.getAxis(HZe(r,i.valueDataDim)),i.baseAxis=n.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=n.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function HZe(t,e){var n=t.getData().getDimensionInfo(e);return n&&n.coordDim}function L1(t,e){return t&&t.containData&&e.coord&&!Z$(e)?t.containData(e.coord):!0}function qZe(t,e,n){return t&&t.containZone&&e.coord&&n.coord&&!Z$(e)&&!Z$(n)?t.containZone(e.coord,n.coord):!0}function mse(t,e){return t?function(n,r,i,a){var s=a<2?n.coord&&n.coord[a]:n.value;return _c(s,e[a])}:function(n,r,i,a){return _c(n.value,e[a])}}function NO(t,e,n){if(n==="average"){var r=0,i=0;return t.each(e,function(a,s){isNaN(a)||(r+=a,i++)}),r/i}else return n==="median"?t.getMedian(e):t.getDataExtent(e)[n==="max"?1:0]}var o5=on(),jO=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){this.markerGroupMap=pt()},e.prototype.render=function(n,r,i){var a=this,s=this.markerGroupMap;s.each(function(o){o5(o).keep=!1}),r.eachSeries(function(o){var l=od.getMarkerModelFromSeries(o,a.type);l&&a.renderSeries(o,l,r,i)}),s.each(function(o){!o5(o).keep&&a.group.remove(o.group)})},e.prototype.markKeep=function(n){o5(n).keep=!0},e.prototype.toggleBlurSeries=function(n,r){var i=this;oe(n,function(a){var s=od.getMarkerModelFromSeries(a,i.type);if(s){var o=s.getData();o.eachItemGraphicEl(function(l){l&&(r?lte(l):iI(l))})}})},e.type="marker",e}(hr);function WU(t,e,n){var r=e.coordinateSystem;t.each(function(i){var a=t.getItemModel(i),s,o=Qe(a.get("x"),n.getWidth()),l=Qe(a.get("y"),n.getHeight());if(!isNaN(o)&&!isNaN(l))s=[o,l];else if(e.getMarkerPosition)s=e.getMarkerPosition(t.getValues(t.dimensions,i));else if(r){var d=t.get(r.dimensions[0],i),c=t.get(r.dimensions[1],i);s=r.dataToPoint([d,c])}isNaN(o)||(s[0]=o),isNaN(l)||(s[1]=l),t.setItemLayout(i,s)})}var WZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.updateTransform=function(n,r,i){r.eachSeries(function(a){var s=od.getMarkerModelFromSeries(a,"markPoint");s&&(WU(s.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},e.prototype.renderSeries=function(n,r,i,a){var s=n.coordinateSystem,o=n.id,l=n.getData(),d=this.markerGroupMap,c=d.get(o)||d.set(o,new Rb),f=GZe(s,n,r);r.setData(f),WU(r.getData(),n,a),f.each(function(p){var h=f.getItemModel(p),m=h.getShallow("symbol"),g=h.getShallow("symbolSize"),v=h.getShallow("symbolRotate"),_=h.getShallow("symbolOffset"),x=h.getShallow("symbolKeepAspect");if(gt(m)||gt(g)||gt(v)||gt(_)){var w=r.getRawValue(p),k=r.getDataParams(p);gt(m)&&(m=m(w,k)),gt(g)&&(g=g(w,k)),gt(v)&&(v=v(w,k)),gt(_)&&(_=_(w,k))}var S=h.getModel("itemStyle").getItemStyle(),C=Eb(l,"color");S.fill||(S.fill=C),f.setItemVisual(p,{symbol:m,symbolSize:g,symbolRotate:v,symbolOffset:_,symbolKeepAspect:x,style:S})}),c.updateData(f),this.group.add(c.group),f.eachItemGraphicEl(function(p){p.traverse(function(h){Tt(h).dataModel=r})}),this.markKeep(c),c.group.silent=r.get("silent")||n.get("silent")},e.type="markPoint",e}(jO);function GZe(t,e,n){var r;t?r=ze(t&&t.dimensions,function(o){var l=e.getData().getDimensionInfo(e.getData().mapDimension(o))||{};return Oe(Oe({},l),{name:o,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new ba(r,n),a=ze(n.get("data"),Pt(O1,e));t&&(a=kn(a,Pt(L1,t)));var s=mse(!!t,r);return i.initData(a,null,s),i}function YZe(t){t.registerComponentModel(zZe),t.registerComponentView(WZe),t.registerPreprocessor(function(e){VO(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var KZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.createMarkerModelFromSeries=function(n,r,i){return new e(n,r,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(od),Rx=on(),XZe=function(t,e,n,r){var i=t.getData(),a;if(Be(r))a=r;else{var s=r.type;if(s==="min"||s==="max"||s==="average"||s==="median"||r.xAxis!=null||r.yAxis!=null){var o=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)o=e.getAxis(r.yAxis!=null?"y":"x"),l=gi(r.yAxis,r.xAxis);else{var d=hse(r,i,e,t);o=d.valueAxis;var c=ore(i,d.valueDataDim);l=NO(i,c,s)}var f=o.dim==="x"?0:1,p=1-f,h=xt(r),m={coord:[]};h.type=null,h.coord=[],h.coord[p]=-1/0,m.coord[p]=1/0;var g=n.get("precision");g>=0&&pn(l)&&(l=+l.toFixed(Math.min(g,20))),h.coord[f]=m.coord[f]=l,a=[h,m,{type:s,valueIndex:r.valueIndex,value:l}]}else a=[]}var v=[O1(t,a[0]),O1(t,a[1]),Oe({},a[2])];return v[2].type=v[2].type||null,jt(v[2],v[0]),jt(v[2],v[1]),v};function tS(t){return!isNaN(t)&&!isFinite(t)}function GU(t,e,n,r){var i=1-t,a=r.dimensions[t];return tS(e[i])&&tS(n[i])&&e[t]===n[t]&&r.getAxis(a).containData(e[t])}function ZZe(t,e){if(t.type==="cartesian2d"){var n=e[0].coord,r=e[1].coord;if(n&&r&&(GU(1,n,r,t)||GU(0,n,r,t)))return!0}return L1(t,e[0])&&L1(t,e[1])}function l5(t,e,n,r,i){var a=r.coordinateSystem,s=t.getItemModel(e),o,l=Qe(s.get("x"),i.getWidth()),d=Qe(s.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(d))o=[l,d];else{if(r.getMarkerPosition)o=r.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=a.dimensions,f=t.get(c[0],e),p=t.get(c[1],e);o=a.dataToPoint([f,p])}if(vh(a,"cartesian2d")){var h=a.getAxis("x"),m=a.getAxis("y"),c=a.dimensions;tS(t.get(c[0],e))?o[0]=h.toGlobalCoord(h.getExtent()[n?0:1]):tS(t.get(c[1],e))&&(o[1]=m.toGlobalCoord(m.getExtent()[n?0:1]))}isNaN(l)||(o[0]=l),isNaN(d)||(o[1]=d)}t.setItemLayout(e,o)}var QZe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.updateTransform=function(n,r,i){r.eachSeries(function(a){var s=od.getMarkerModelFromSeries(a,"markLine");if(s){var o=s.getData(),l=Rx(s).from,d=Rx(s).to;l.each(function(c){l5(l,c,!0,a,i),l5(d,c,!1,a,i)}),o.each(function(c){o.setItemLayout(c,[l.getItemLayout(c),d.getItemLayout(c)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},e.prototype.renderSeries=function(n,r,i,a){var s=n.coordinateSystem,o=n.id,l=n.getData(),d=this.markerGroupMap,c=d.get(o)||d.set(o,new sO);this.group.add(c.group);var f=JZe(s,n,r),p=f.from,h=f.to,m=f.line;Rx(r).from=p,Rx(r).to=h,r.setData(m);var g=r.get("symbol"),v=r.get("symbolSize"),_=r.get("symbolRotate"),x=r.get("symbolOffset");Be(g)||(g=[g,g]),Be(v)||(v=[v,v]),Be(_)||(_=[_,_]),Be(x)||(x=[x,x]),f.from.each(function(k){w(p,k,!0),w(h,k,!1)}),m.each(function(k){var S=m.getItemModel(k).getModel("lineStyle").getLineStyle();m.setItemLayout(k,[p.getItemLayout(k),h.getItemLayout(k)]),S.stroke==null&&(S.stroke=p.getItemVisual(k,"style").fill),m.setItemVisual(k,{fromSymbolKeepAspect:p.getItemVisual(k,"symbolKeepAspect"),fromSymbolOffset:p.getItemVisual(k,"symbolOffset"),fromSymbolRotate:p.getItemVisual(k,"symbolRotate"),fromSymbolSize:p.getItemVisual(k,"symbolSize"),fromSymbol:p.getItemVisual(k,"symbol"),toSymbolKeepAspect:h.getItemVisual(k,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(k,"symbolOffset"),toSymbolRotate:h.getItemVisual(k,"symbolRotate"),toSymbolSize:h.getItemVisual(k,"symbolSize"),toSymbol:h.getItemVisual(k,"symbol"),style:S})}),c.updateData(m),f.line.eachItemGraphicEl(function(k){Tt(k).dataModel=r,k.traverse(function(S){Tt(S).dataModel=r})});function w(k,S,C){var A=k.getItemModel(S);l5(k,S,C,n,a);var M=A.getModel("itemStyle").getItemStyle();M.fill==null&&(M.fill=Eb(l,"color")),k.setItemVisual(S,{symbolKeepAspect:A.get("symbolKeepAspect"),symbolOffset:$t(A.get("symbolOffset",!0),x[C?0:1]),symbolRotate:$t(A.get("symbolRotate",!0),_[C?0:1]),symbolSize:$t(A.get("symbolSize"),v[C?0:1]),symbol:$t(A.get("symbol",!0),g[C?0:1]),style:M})}this.markKeep(c),c.group.silent=r.get("silent")||n.get("silent")},e.type="markLine",e}(jO);function JZe(t,e,n){var r;t?r=ze(t&&t.dimensions,function(d){var c=e.getData().getDimensionInfo(e.getData().mapDimension(d))||{};return Oe(Oe({},c),{name:d,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new ba(r,n),a=new ba(r,n),s=new ba([],n),o=ze(n.get("data"),Pt(XZe,e,t,n));t&&(o=kn(o,Pt(ZZe,t)));var l=mse(!!t,r);return i.initData(ze(o,function(d){return d[0]}),null,l),a.initData(ze(o,function(d){return d[1]}),null,l),s.initData(ze(o,function(d){return d[2]})),s.hasItemOption=!0,{from:i,to:a,line:s}}function eQe(t){t.registerComponentModel(KZe),t.registerComponentView(QZe),t.registerPreprocessor(function(e){VO(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var tQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.createMarkerModelFromSeries=function(n,r,i){return new e(n,r,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(od),Px=on(),nQe=function(t,e,n,r){var i=r[0],a=r[1];if(!(!i||!a)){var s=O1(t,i),o=O1(t,a),l=s.coord,d=o.coord;l[0]=gi(l[0],-1/0),l[1]=gi(l[1],-1/0),d[0]=gi(d[0],1/0),d[1]=gi(d[1],1/0);var c=FP([{},s,o]);return c.coord=[s.coord,o.coord],c.x0=s.x,c.y0=s.y,c.x1=o.x,c.y1=o.y,c}};function nS(t){return!isNaN(t)&&!isFinite(t)}function YU(t,e,n,r){var i=1-t;return nS(e[i])&&nS(n[i])}function rQe(t,e){var n=e.coord[0],r=e.coord[1],i={coord:n,x:e.x0,y:e.y0},a={coord:r,x:e.x1,y:e.y1};return vh(t,"cartesian2d")?n&&r&&(YU(1,n,r)||YU(0,n,r))?!0:qZe(t,i,a):L1(t,i)||L1(t,a)}function KU(t,e,n,r,i){var a=r.coordinateSystem,s=t.getItemModel(e),o,l=Qe(s.get(n[0]),i.getWidth()),d=Qe(s.get(n[1]),i.getHeight());if(!isNaN(l)&&!isNaN(d))o=[l,d];else{if(r.getMarkerPosition){var c=t.getValues(["x0","y0"],e),f=t.getValues(["x1","y1"],e),p=a.clampData(c),h=a.clampData(f),m=[];n[0]==="x0"?m[0]=p[0]>h[0]?f[0]:c[0]:m[0]=p[0]>h[0]?c[0]:f[0],n[1]==="y0"?m[1]=p[1]>h[1]?f[1]:c[1]:m[1]=p[1]>h[1]?c[1]:f[1],o=r.getMarkerPosition(m,n,!0)}else{var g=t.get(n[0],e),v=t.get(n[1],e),_=[g,v];a.clampData&&a.clampData(_,_),o=a.dataToPoint(_,!0)}if(vh(a,"cartesian2d")){var x=a.getAxis("x"),w=a.getAxis("y"),g=t.get(n[0],e),v=t.get(n[1],e);nS(g)?o[0]=x.toGlobalCoord(x.getExtent()[n[0]==="x0"?0:1]):nS(v)&&(o[1]=w.toGlobalCoord(w.getExtent()[n[1]==="y0"?0:1]))}isNaN(l)||(o[0]=l),isNaN(d)||(o[1]=d)}return o}var XU=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],iQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.updateTransform=function(n,r,i){r.eachSeries(function(a){var s=od.getMarkerModelFromSeries(a,"markArea");if(s){var o=s.getData();o.each(function(l){var d=ze(XU,function(f){return KU(o,l,f,a,i)});o.setItemLayout(l,d);var c=o.getItemGraphicEl(l);c.setShape("points",d)})}},this)},e.prototype.renderSeries=function(n,r,i,a){var s=n.coordinateSystem,o=n.id,l=n.getData(),d=this.markerGroupMap,c=d.get(o)||d.set(o,{group:new kt});this.group.add(c.group),this.markKeep(c);var f=aQe(s,n,r);r.setData(f),f.each(function(p){var h=ze(XU,function(M){return KU(f,p,M,n,a)}),m=s.getAxis("x").scale,g=s.getAxis("y").scale,v=m.getExtent(),_=g.getExtent(),x=[m.parse(f.get("x0",p)),m.parse(f.get("x1",p))],w=[g.parse(f.get("y0",p)),g.parse(f.get("y1",p))];Fs(x),Fs(w);var k=!(v[0]>x[1]||v[1]<x[0]||_[0]>w[1]||_[1]<w[0]),S=!k;f.setItemLayout(p,{points:h,allClipped:S});var C=f.getItemModel(p).getModel("itemStyle").getItemStyle(),A=Eb(l,"color");C.fill||(C.fill=A,it(C.fill)&&(C.fill=vk(C.fill,.4))),C.stroke||(C.stroke=A),f.setItemVisual(p,"style",C)}),f.diff(Px(c).data).add(function(p){var h=f.getItemLayout(p);if(!h.allClipped){var m=new $a({shape:{points:h.points}});f.setItemGraphicEl(p,m),c.group.add(m)}}).update(function(p,h){var m=Px(c).data.getItemGraphicEl(h),g=f.getItemLayout(p);g.allClipped?m&&c.group.remove(m):(m?yn(m,{shape:{points:g.points}},r,p):m=new $a({shape:{points:g.points}}),f.setItemGraphicEl(p,m),c.group.add(m))}).remove(function(p){var h=Px(c).data.getItemGraphicEl(p);c.group.remove(h)}).execute(),f.eachItemGraphicEl(function(p,h){var m=f.getItemModel(h),g=f.getItemVisual(h,"style");p.useStyle(f.getItemVisual(h,"style")),Li(p,ui(m),{labelFetcher:r,labelDataIndex:h,defaultText:f.getName(h)||"",inheritColor:it(g.fill)?vk(g.fill,1):"#000"}),Oi(p,m),_r(p,null,null,m.get(["emphasis","disabled"])),Tt(p).dataModel=r}),Px(c).data=f,c.group.silent=r.get("silent")||n.get("silent")},e.type="markArea",e}(jO);function aQe(t,e,n){var r,i,a=["x0","y0","x1","y1"];if(t){var s=ze(t&&t.dimensions,function(d){var c=e.getData(),f=c.getDimensionInfo(c.mapDimension(d))||{};return Oe(Oe({},f),{name:d,ordinalMeta:null})});i=ze(a,function(d,c){return{name:d,type:s[c%2].type}}),r=new ba(i,n)}else i=[{name:"value",type:"float"}],r=new ba(i,n);var o=ze(n.get("data"),Pt(nQe,e,t,n));t&&(o=kn(o,Pt(rQe,t)));var l=t?function(d,c,f,p){var h=d.coord[Math.floor(p/2)][p%2];return _c(h,i[p])}:function(d,c,f,p){return _c(d.value,i[p])};return r.initData(o,null,l),r.hasItemOption=!0,r}function sQe(t){t.registerComponentModel(tQe),t.registerComponentView(iQe),t.registerPreprocessor(function(e){VO(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var oQe=function(t,e){if(e==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},Q$=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),n.selected=n.selected||{},this._updateSelector(n)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),this._updateSelector(n)},e.prototype._updateSelector=function(n){var r=n.selector,i=this.ecModel;r===!0&&(r=n.selector=["all","inverse"]),Be(r)&&oe(r,function(a,s){it(a)&&(a={type:a}),r[s]=jt(a,oQe(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<n.length;i++){var a=n[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(n[0].get("name"))}},e.prototype._updateData=function(n){var r=[],i=[];n.eachRawSeries(function(l){var d=l.name;i.push(d);var c;if(l.legendVisualProvider){var f=l.legendVisualProvider,p=f.getAllNames();n.isSeriesFiltered(l)||(i=i.concat(p)),p.length?r=r.concat(p):c=!0}else c=!0;c&&XP(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,s=pt(),o=ze(a,function(l){return(it(l)||pn(l))&&(l={name:l}),s.get(l.name)?null:(s.set(l.name,!0),new An(l,this,this.ecModel))},this);this._data=kn(o,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(n){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;oe(a,function(s){r[s.get("name")]=!1})}r[n]=!0},e.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},e.prototype.toggleSelected=function(n){var r=this.option.selected;r.hasOwnProperty(n)||(r[n]=!0),this[r[n]?"unSelect":"select"](n)},e.prototype.allSelect=function(){var n=this._data,r=this.option.selected;oe(n,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var n=this._data,r=this.option.selected;oe(n,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(n){var r=this.option.selected;return!(r.hasOwnProperty(n)&&!r[n])&&Yt(this._availableNames,n)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(tn),em=Pt,J$=oe,Ix=kt,gse=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return e.prototype.init=function(){this.group.add(this._contentGroup=new Ix),this.group.add(this._selectorGroup=new Ix),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(n,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var s=n.get("align"),o=n.get("orient");(!s||s==="auto")&&(s=n.get("left")==="right"&&o==="vertical"?"right":"left");var l=n.get("selector",!0),d=n.get("selectorPosition",!0);l&&(!d||d==="auto")&&(d=o==="horizontal"?"end":"start"),this.renderInner(s,n,r,i,l,o,d);var c=n.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},p=n.get("padding"),h=Qr(c,f,p),m=this.layoutInner(n,s,h,a,l,d),g=Qr(yt({width:m.width,height:m.height},c),f,p);this.group.x=g.x-m.x,this.group.y=g.y-m.y,this.group.markRedraw(),this.group.add(this._backgroundEl=ise(m,n))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(n,r,i,a,s,o,l){var d=this.getContentGroup(),c=pt(),f=r.get("selectedMode"),p=[];i.eachRawSeries(function(h){!h.get("legendHoverLink")&&p.push(h.id)}),J$(r.getData(),function(h,m){var g=h.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var v=new Ix;v.newline=!0,d.add(v);return}var _=i.getSeriesByName(g)[0];if(!c.get(g))if(_){var x=_.getData(),w=x.getVisual("legendLineStyle")||{},k=x.getVisual("legendIcon"),S=x.getVisual("style"),C=this._createItem(_,g,m,h,r,n,w,S,k,f,a);C.on("click",em(ZU,g,null,a,p)).on("mouseover",em(eD,_.name,null,a,p)).on("mouseout",em(tD,_.name,null,a,p)),i.ssr&&C.eachChild(function(A){var M=Tt(A);M.seriesIndex=_.seriesIndex,M.dataIndex=m,M.ssrType="legend"}),c.set(g,!0)}else i.eachRawSeries(function(A){if(!c.get(g)&&A.legendVisualProvider){var M=A.legendVisualProvider;if(!M.containName(g))return;var $=M.indexOfName(g),R=M.getItemVisual($,"style"),I=M.getItemVisual($,"legendIcon"),B=cs(R.fill);B&&B[3]===0&&(B[3]=.2,R=Oe(Oe({},R),{fill:zu(B,"rgba")}));var j=this._createItem(A,g,m,h,r,n,{},R,I,f,a);j.on("click",em(ZU,null,g,a,p)).on("mouseover",em(eD,null,g,a,p)).on("mouseout",em(tD,null,g,a,p)),i.ssr&&j.eachChild(function(z){var F=Tt(z);F.seriesIndex=A.seriesIndex,F.dataIndex=m,F.ssrType="legend"}),c.set(g,!0)}},this)},this),s&&this._createSelector(s,r,a,o,l)},e.prototype._createSelector=function(n,r,i,a,s){var o=this.getSelectorGroup();J$(n,function(d){var c=d.type,f=new un({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});o.add(f);var p=r.getModel("selectorLabel"),h=r.getModel(["emphasis","selectorLabel"]);Li(f,{normal:p,emphasis:h},{defaultText:d.title}),$p(f)})},e.prototype._createItem=function(n,r,i,a,s,o,l,d,c,f,p){var h=n.visualDrawType,m=s.get("itemWidth"),g=s.get("itemHeight"),v=s.isSelected(r),_=a.get("symbolRotate"),x=a.get("symbolKeepAspect"),w=a.get("icon");c=w||c||"roundRect";var k=lQe(c,a,l,d,h,v,p),S=new Ix,C=a.getModel("textStyle");if(gt(n.getLegendIcon)&&(!w||w==="inherit"))S.add(n.getLegendIcon({itemWidth:m,itemHeight:g,icon:c,iconRotate:_,itemStyle:k.itemStyle,lineStyle:k.lineStyle,symbolKeepAspect:x}));else{var A=w==="inherit"&&n.getData().getVisual("symbol")?_==="inherit"?n.getData().getVisual("symbolRotate"):_:0;S.add(uQe({itemWidth:m,itemHeight:g,icon:c,iconRotate:A,itemStyle:k.itemStyle,symbolKeepAspect:x}))}var M=o==="left"?m+5:-5,$=o,R=s.get("formatter"),I=r;it(R)&&R?I=R.replace("{name}",r!=null?r:""):gt(R)&&(I=R(r));var B=v?C.getTextColor():a.get("inactiveColor");S.add(new un({style:Kn(C,{text:I,x:M,y:g/2,fill:B,align:$,verticalAlign:"middle"},{inheritColor:B})}));var j=new sn({shape:S.getBoundingRect(),style:{fill:"transparent"}}),z=a.getModel("tooltip");return z.get("show")&&ph({el:j,componentModel:s,itemName:r,itemTooltipOption:z.option}),S.add(j),S.eachChild(function(F){F.silent=!0}),j.silent=!f,this.getContentGroup().add(S),$p(S),S.__legendDataIndex=i,S},e.prototype.layoutInner=function(n,r,i,a,s,o){var l=this.getContentGroup(),d=this.getSelectorGroup();Rp(n.get("orient"),l,n.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(d.markRedraw(),l.markRedraw(),s){Rp("horizontal",d,n.get("selectorItemGap",!0));var p=d.getBoundingRect(),h=[-p.x,-p.y],m=n.get("selectorButtonGap",!0),g=n.getOrient().index,v=g===0?"width":"height",_=g===0?"height":"width",x=g===0?"y":"x";o==="end"?h[g]+=c[v]+m:f[g]+=p[v]+m,h[1-g]+=c[_]/2-p[_]/2,d.x=h[0],d.y=h[1],l.x=f[0],l.y=f[1];var w={x:0,y:0};return w[v]=c[v]+m+p[v],w[_]=Math.max(c[_],p[_]),w[x]=Math.min(0,p[x]+h[1-g]),w}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(hr);function lQe(t,e,n,r,i,a,s){function o(v,_){v.lineWidth==="auto"&&(v.lineWidth=_.lineWidth>0?2:0),J$(v,function(x,w){v[w]==="inherit"&&(v[w]=_[w])})}var l=e.getModel("itemStyle"),d=l.getItemStyle(),c=t.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");d.decal=!f||f==="inherit"?r.decal:vg(f,s),d.fill==="inherit"&&(d.fill=r[i]),d.stroke==="inherit"&&(d.stroke=r[c]),d.opacity==="inherit"&&(d.opacity=(i==="fill"?r:n).opacity),o(d,r);var p=e.getModel("lineStyle"),h=p.getLineStyle();if(o(h,n),d.fill==="auto"&&(d.fill=r.fill),d.stroke==="auto"&&(d.stroke=r.fill),h.stroke==="auto"&&(h.stroke=r.fill),!a){var m=e.get("inactiveBorderWidth"),g=d[c];d.lineWidth=m==="auto"?r.lineWidth>0&&g?2:0:d.lineWidth,d.fill=e.get("inactiveColor"),d.stroke=e.get("inactiveBorderColor"),h.stroke=p.get("inactiveColor"),h.lineWidth=p.get("inactiveWidth")}return{itemStyle:d,lineStyle:h}}function uQe(t){var e=t.icon||"roundRect",n=Ur(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function ZU(t,e,n,r){tD(t,e,n,r),n.dispatchAction({type:"legendToggleSelect",name:t!=null?t:e}),eD(t,e,n,r)}function vse(t){for(var e=t.getZr().storage.getDisplayList(),n,r=0,i=e.length;r<i&&!(n=e[r].states.emphasis);)r++;return n&&n.hoverLayer}function eD(t,e,n,r){vse(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function tD(t,e,n,r){vse(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}function dQe(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(n){for(var r=0;r<e.length;r++)if(!e[r].isSelected(n.name))return!1;return!0})}function Gv(t,e,n){var r=t==="allSelect"||t==="inverseSelect",i={},a=[];n.eachComponent({mainType:"legend",query:e},function(o){r?o[t]():o[t](e.name),QU(o,i),a.push(o.componentIndex)});var s={};return n.eachComponent("legend",function(o){oe(i,function(l,d){o[l?"select":"unSelect"](d)}),QU(o,s)}),r?{selected:s,legendIndex:a}:{name:e.name,selected:s}}function QU(t,e){var n=e||{};return oe(t.getData(),function(r){var i=r.get("name");if(!(i===`
`||i==="")){var a=t.isSelected(i);ft(n,i)?n[i]=n[i]&&a:n[i]=a}}),n}function cQe(t){t.registerAction("legendToggleSelect","legendselectchanged",Pt(Gv,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Pt(Gv,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Pt(Gv,"inverseSelect")),t.registerAction("legendSelect","legendselected",Pt(Gv,"select")),t.registerAction("legendUnSelect","legendunselected",Pt(Gv,"unSelect"))}function yse(t){t.registerComponentModel(Q$),t.registerComponentView(gse),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,dQe),t.registerSubTypeDefaulter("legend",function(){return"plain"}),cQe(t)}var fQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},e.prototype.init=function(n,r,i){var a=zg(n);t.prototype.init.call(this,n,r,i),JU(this,n,a)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),JU(this,this.option,n)},e.type="legend.scroll",e.defaultOption=Yc(Q$.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(Q$);function JU(t,e,n){var r=t.getOrient(),i=[1,1];i[r.index]=0,Ic(e,n,{type:"box",ignoreSize:!!i})}var eH=kt,u5=["width","height"],d5=["x","y"],pQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new eH),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new eH)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(n,r,i,a,s,o,l){var d=this;t.prototype.renderInner.call(this,n,r,i,a,s,o,l);var c=this._controllerGroup,f=r.get("pageIconSize",!0),p=Be(f)?f:[f,f];m("pagePrev",0);var h=r.getModel("pageTextStyle");c.add(new un({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),m("pageNext",1);function m(g,v){var _=g+"DataIndex",x=Ab(r.get("pageIcons",!0)[r.getOrient().name][v],{onclick:ut(d._pageGo,d,_,r,a)},{x:-p[0]/2,y:-p[1]/2,width:p[0],height:p[1]});x.name=g,c.add(x)}},e.prototype.layoutInner=function(n,r,i,a,s,o){var l=this.getSelectorGroup(),d=n.getOrient().index,c=u5[d],f=d5[d],p=u5[1-d],h=d5[1-d];s&&Rp("horizontal",l,n.get("selectorItemGap",!0));var m=n.get("selectorButtonGap",!0),g=l.getBoundingRect(),v=[-g.x,-g.y],_=xt(i);s&&(_[c]=i[c]-g[c]-m);var x=this._layoutContentAndController(n,a,_,d,c,p,h,f);if(s){if(o==="end")v[d]+=x[c]+m;else{var w=g[c]+m;v[d]-=w,x[f]-=w}x[c]+=g[c]+m,v[1-d]+=x[h]+x[p]/2-g[p]/2,x[p]=Math.max(x[p],g[p]),x[h]=Math.min(x[h],g[h]+v[1-d]),l.x=v[0],l.y=v[1],l.markRedraw()}return x},e.prototype._layoutContentAndController=function(n,r,i,a,s,o,l,d){var c=this.getContentGroup(),f=this._containerGroup,p=this._controllerGroup;Rp(n.get("orient"),c,n.get("itemGap"),a?i.width:null,a?null:i.height),Rp("horizontal",p,n.get("pageButtonItemGap",!0));var h=c.getBoundingRect(),m=p.getBoundingRect(),g=this._showController=h[s]>i[s],v=[-h.x,-h.y];r||(v[a]=c[d]);var _=[0,0],x=[-m.x,-m.y],w=$t(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(g){var k=n.get("pageButtonPosition",!0);k==="end"?x[a]+=i[s]-m[s]:_[a]+=m[s]+w}x[1-a]+=h[o]/2-m[o]/2,c.setPosition(v),f.setPosition(_),p.setPosition(x);var S={x:0,y:0};if(S[s]=g?i[s]:h[s],S[o]=Math.max(h[o],m[o]),S[l]=Math.min(0,m[l]+x[1-a]),f.__rectSize=i[s],g){var C={x:0,y:0};C[s]=Math.max(i[s]-m[s]-w,0),C[o]=S[o],f.setClipPath(new sn({shape:C})),f.__rectSize=C[s]}else p.eachChild(function(M){M.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(n);return A.pageIndex!=null&&yn(c,{x:A.contentPosition[0],y:A.contentPosition[1]},g?n:null),this._updatePageInfoView(n,A),S},e.prototype._pageGo=function(n,r,i){var a=this._getPageInfo(r)[n];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(n,r){var i=this._controllerGroup;oe(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",p=r[f]!=null,h=i.childOfName(c);h&&(h.setStyle("fill",p?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),h.cursor=p?"pointer":"default")});var a=i.childOfName("pageText"),s=n.get("pageFormatter"),o=r.pageIndex,l=o!=null?o+1:0,d=r.pageCount;a&&s&&a.setStyle("text",it(s)?s.replace("{current}",l==null?"":l+"").replace("{total}",d==null?"":d+""):s({current:l,total:d}))},e.prototype._getPageInfo=function(n){var r=n.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,s=n.getOrient().index,o=u5[s],l=d5[s],d=this._findTargetItemIndex(r),c=i.children(),f=c[d],p=c.length,h=p?1:0,m={contentPosition:[i.x,i.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return m;var g=k(f);m.contentPosition[s]=-g.s;for(var v=d+1,_=g,x=g,w=null;v<=p;++v)w=k(c[v]),(!w&&x.e>_.s+a||w&&!S(w,_.s))&&(x.i>_.i?_=x:_=w,_&&(m.pageNextDataIndex==null&&(m.pageNextDataIndex=_.i),++m.pageCount)),x=w;for(var v=d-1,_=g,x=g,w=null;v>=-1;--v)w=k(c[v]),(!w||!S(x,w.s))&&_.i<x.i&&(x=_,m.pagePrevDataIndex==null&&(m.pagePrevDataIndex=_.i),++m.pageCount,++m.pageIndex),_=w;return m;function k(C){if(C){var A=C.getBoundingRect(),M=A[l]+C[l];return{s:M,e:M+A[o],i:C.__legendDataIndex}}}function S(C,A){return C.e>=A&&C.s<=A+a}},e.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(s,o){var l=s.__legendDataIndex;a==null&&l!=null&&(a=o),l===n&&(r=o)}),r!=null?r:a},e.type="legend.scroll",e}(gse);function hQe(t){t.registerAction("legendScroll","legendscroll",function(e,n){var r=e.scrollDataIndex;r!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function mQe(t){Kt(yse),t.registerComponentModel(fQe),t.registerComponentView(pQe),hQe(t)}function gQe(t){Kt(yse),Kt(mQe)}var vQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.inside",e.defaultOption=Yc(I1.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(I1),FO=on();function yQe(t,e,n){FO(t).coordSysRecordMap.each(function(r){var i=r.dataZoomInfoMap.get(e.uid);i&&(i.getRange=n)})}function bQe(t,e){for(var n=FO(t).coordSysRecordMap,r=n.keys(),i=0;i<r.length;i++){var a=r[i],s=n.get(a),o=s.dataZoomInfoMap;if(o){var l=e.uid,d=o.get(l);d&&(o.removeKey(l),o.keys().length||bse(n,s))}}}function bse(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function _Qe(t,e){var n={model:e,containsPoint:Pt(wQe,e),dispatchAction:Pt(xQe,t),dataZoomInfoMap:null,controller:null},r=n.controller=new Vb(t.getZr());return oe(["pan","zoom","scrollMove"],function(i){r.on(i,function(a){var s=[];n.dataZoomInfoMap.each(function(o){if(a.isAvailableBehavior(o.model.option)){var l=(o.getRange||{})[i],d=l&&l(o.dzReferCoordSysInfo,n.model.mainType,n.controller,a);!o.model.get("disabled",!0)&&d&&s.push({dataZoomId:o.model.id,start:d[0],end:d[1]})}}),s.length&&n.dispatchAction(s)})}),n}function xQe(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function wQe(t,e,n,r){return t.coordinateSystem.containPoint([n,r])}function kQe(t){var e,n="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return t.each(function(a){var s=a.model,o=s.get("disabled",!0)?!1:s.get("zoomLock",!0)?"move":!0;r[n+o]>r[n+e]&&(e=o),i=i&&s.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function SQe(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(e,n){var r=FO(n),i=r.coordSysRecordMap||(r.coordSysRecordMap=pt());i.each(function(a){a.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var s=tse(a);oe(s.infoList,function(o){var l=o.model.uid,d=i.get(l)||i.set(l,_Qe(n,o.model)),c=d.dataZoomInfoMap||(d.dataZoomInfoMap=pt());c.set(a.uid,{dzReferCoordSysInfo:o,model:a,getRange:null})})}),i.each(function(a){var s=a.controller,o,l=a.dataZoomInfoMap;if(l){var d=l.keys()[0];d!=null&&(o=l.get(d))}if(!o){bse(i,a);return}var c=kQe(l);s.enable(c.controlType,c.opt),s.setPointerChecker(a.containsPoint),qg(a,"dispatchAction",o.model.get("throttle",!0),"fixRate")})})}var CQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return e.prototype.render=function(n,r,i){if(t.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),yQe(i,n,{pan:ut(c5.pan,this),zoom:ut(c5.zoom,this),scrollMove:ut(c5.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){bQe(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(DO),c5={zoom:function(t,e,n,r){var i=this.range,a=i.slice(),s=t.axisModels[0];if(s){var o=f5[e](null,[r.originX,r.originY],s,n,t),l=(o.signal>0?o.pixelStart+o.pixelLength-o.pixel:o.pixel-o.pixelStart)/o.pixelLength*(a[1]-a[0])+a[0],d=Math.max(1/r.scale,0);a[0]=(a[0]-l)*d+l,a[1]=(a[1]-l)*d+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(bh(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:tH(function(t,e,n,r,i,a){var s=f5[r]([a.oldX,a.oldY],[a.newX,a.newY],e,i,n);return s.signal*(t[1]-t[0])*s.pixel/s.pixelLength}),scrollMove:tH(function(t,e,n,r,i,a){var s=f5[r]([0,0],[a.scrollDelta,a.scrollDelta],e,i,n);return s.signal*(t[1]-t[0])*a.scrollDelta})};function tH(t){return function(e,n,r,i){var a=this.range,s=a.slice(),o=e.axisModels[0];if(o){var l=t(s,o,e,n,r,i);if(bh(l,s,[0,100],"all"),this.range=s,a[0]!==s[0]||a[1]!==s[1])return s}}}var f5={grid:function(t,e,n,r,i){var a=n.axis,s={},o=i.model.coordinateSystem.getRect();return t=t||[0,0],a.dim==="x"?(s.pixel=e[0]-t[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s},polar:function(t,e,n,r,i){var a=n.axis,s={},o=i.model.coordinateSystem,l=o.getRadiusAxis().getExtent(),d=o.getAngleAxis().getExtent();return t=t?o.pointToCoord(t):[0,0],e=o.pointToCoord(e),n.mainType==="radiusAxis"?(s.pixel=e[0]-t[0],s.pixelLength=l[1]-l[0],s.pixelStart=l[0],s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=d[1]-d[0],s.pixelStart=d[0],s.signal=a.inverse?-1:1),s},singleAxis:function(t,e,n,r,i){var a=n.axis,s=i.model.coordinateSystem.getRect(),o={};return t=t||[0,0],a.orient==="horizontal"?(o.pixel=e[0]-t[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o}};function _se(t){RO(t),t.registerComponentModel(vQe),t.registerComponentView(CQe),SQe(t)}var AQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Yc(I1.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(I1),Yv=sn,nH=7,TQe=1,p5=30,EQe=7,Kv="horizontal",rH="vertical",MQe=5,$Qe=["line","bar","candlestick","scatter"],DQe={easing:"cubicOut",duration:100,delay:0},RQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return e.prototype.init=function(n,r){this.api=r,this._onBrush=ut(this._onBrush,this),this._onBrushEnd=ut(this._onBrushEnd,this)},e.prototype.render=function(n,r,i,a){if(t.prototype.render.apply(this,arguments),qg(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){x1(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new kt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var n=this.dataZoomModel,r=this.api,i=n.get("brushSelect"),a=i?EQe:0,s=this._findCoordRect(),o={width:r.getWidth(),height:r.getHeight()},l=this._orient===Kv?{right:o.width-s.x-s.width,top:o.height-p5-nH-a,width:s.width,height:p5}:{right:nH,top:s.y,width:p5,height:s.height},d=zg(n.option);oe(["right","top","width","height"],function(f){d[f]==="ph"&&(d[f]=l[f])});var c=Qr(d,o);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===rH&&this._size.reverse()},e.prototype._positionGroup=function(){var n=this.group,r=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),s=a&&a.get("inverse"),o=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(i===Kv&&!s?{scaleY:l?1:-1,scaleX:1}:i===Kv&&s?{scaleY:l?1:-1,scaleX:-1}:i===rH&&!s?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var d=n.getBoundingRect([o]);n.x=r.x-d.x,n.y=r.y-d.y,n.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var n=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,a=n.get("brushSelect");i.add(new Yv({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var s=new Yv({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:ut(this._onClickPanel,this)}),o=this.api.getZr();a?(s.on("mousedown",this._onBrushStart,this),s.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),i.add(s)},e.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var r=this._size,i=this._shadowSize||[],a=n.series,s=a.getRawData(),o=a.getShadowDim&&a.getShadowDim(),l=o&&s.getDimensionInfo(o)?a.getShadowDim():n.otherDim;if(l==null)return;var d=this._shadowPolygonPts,c=this._shadowPolylinePts;if(s!==this._shadowData||l!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var f=s.getDataExtent(l),p=(f[1]-f[0])*.3;f=[f[0]-p,f[1]+p];var h=[0,r[1]],m=[0,r[0]],g=[[r[0],0],[0,0]],v=[],_=m[1]/(s.count()-1),x=0,w=Math.round(s.count()/r[0]),k;s.each([l],function($,R){if(w>0&&R%w){x+=_;return}var I=$==null||isNaN($)||$==="",B=I?0:Cn($,f,h,!0);I&&!k&&R?(g.push([g[g.length-1][0],0]),v.push([v[v.length-1][0],0])):!I&&k&&(g.push([x,0]),v.push([x,0])),g.push([x,B]),v.push([x,B]),x+=_,k=I}),d=this._shadowPolygonPts=g,c=this._shadowPolylinePts=v}this._shadowData=s,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var S=this.dataZoomModel;function C($){var R=S.getModel($?"selectedDataBackground":"dataBackground"),I=new kt,B=new $a({shape:{points:d},segmentIgnoreThreshold:1,style:R.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),j=new Da({shape:{points:c},segmentIgnoreThreshold:1,style:R.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return I.add(B),I.add(j),I}for(var A=0;A<3;A++){var M=C(A===1);this._displayables.sliderGroup.add(M),this._displayables.dataShadowSegs.push(M)}},e.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,r=n.get("showDataShadow");if(r!==!1){var i,a=this.ecModel;return n.eachTargetAxis(function(s,o){var l=n.getAxisProxy(s,o).getTargetSeriesModels();oe(l,function(d){if(!i&&!(r!==!0&&Yt($Qe,d.get("type"))<0)){var c=a.getComponent(lc(s),o).axis,f=PQe(s),p,h=d.coordinateSystem;f!=null&&h.getOtherAxis&&(p=h.getOtherAxis(c).inverse),f=d.getData().mapDimension(f),i={thisAxis:c,series:d,thisDim:s,otherDim:f,otherAxisInverse:p}}},this)},this),i}},e.prototype._renderHandle=function(){var n=this.group,r=this._displayables,i=r.handles=[null,null],a=r.handleLabels=[null,null],s=this._displayables.sliderGroup,o=this._size,l=this.dataZoomModel,d=this.api,c=l.get("borderRadius")||0,f=l.get("brushSelect"),p=r.filler=new Yv({silent:f,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});s.add(p),s.add(new Yv({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:TQe,fill:"rgba(0,0,0,0)"}})),oe([0,1],function(w){var k=l.get("handleIcon");!Rk[k]&&k.indexOf("path://")<0&&k.indexOf("image://")<0&&(k="path://"+k);var S=Ur(k,-1,0,2,2,null,!0);S.attr({cursor:iH(this._orient),draggable:!0,drift:ut(this._onDragMove,this,w),ondragend:ut(this._onDragEnd,this),onmouseover:ut(this._showDataInfo,this,!0),onmouseout:ut(this._showDataInfo,this,!1),z2:5});var C=S.getBoundingRect(),A=l.get("handleSize");this._handleHeight=Qe(A,this._size[1]),this._handleWidth=C.width/C.height*this._handleHeight,S.setStyle(l.getModel("handleStyle").getItemStyle()),S.style.strokeNoScale=!0,S.rectHover=!0,S.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),$p(S);var M=l.get("handleColor");M!=null&&(S.style.fill=M),s.add(i[w]=S);var $=l.getModel("textStyle"),R=l.get("handleLabel")||{},I=R.show||!1;n.add(a[w]=new un({silent:!0,invisible:!I,style:Kn($,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:$.getTextColor(),font:$.getFont()}),z2:10}))},this);var h=p;if(f){var m=Qe(l.get("moveHandleSize"),o[1]),g=r.moveHandle=new sn({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:m}}),v=m*.8,_=r.moveHandleIcon=Ur(l.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);_.silent=!0,_.y=o[1]+m/2-.5,g.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var x=Math.min(o[1]/2,Math.max(m,10));h=r.moveZone=new sn({invisible:!0,shape:{y:o[1]-x,height:m+x}}),h.on("mouseover",function(){d.enterEmphasis(g)}).on("mouseout",function(){d.leaveEmphasis(g)}),s.add(g),s.add(_),s.add(h)}h.attr({draggable:!0,cursor:iH(this._orient),drift:ut(this._onDragMove,this,"all"),ondragstart:ut(this._showDataInfo,this,!0),ondragend:ut(this._onDragEnd,this),onmouseover:ut(this._showDataInfo,this,!0),onmouseout:ut(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[Cn(n[0],[0,100],r,!0),Cn(n[1],[0,100],r,!0)]},e.prototype._updateInterval=function(n,r){var i=this.dataZoomModel,a=this._handleEnds,s=this._getViewExtent(),o=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];bh(r,a,s,i.get("zoomLock")?"all":n,o.minSpan!=null?Cn(o.minSpan,l,s,!0):null,o.maxSpan!=null?Cn(o.maxSpan,l,s,!0):null);var d=this._range,c=this._range=Fs([Cn(a[0],s,l,!0),Cn(a[1],s,l,!0)]);return!d||d[0]!==c[0]||d[1]!==c[1]},e.prototype._updateView=function(n){var r=this._displayables,i=this._handleEnds,a=Fs(i.slice()),s=this._size;oe([0,1],function(h){var m=r.handles[h],g=this._handleHeight;m.attr({scaleX:g/2,scaleY:g/2,x:i[h]+(h?-1:1),y:s[1]/2-g/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:s[1]});var o={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(o),r.moveZone.setShape(o),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",o.x+o.width/2));for(var l=r.dataShadowSegs,d=[0,a[0],a[1],s[0]],c=0;c<l.length;c++){var f=l[c],p=f.getClipPath();p||(p=new sn,f.setClipPath(p)),p.setShape({x:d[c],y:0,width:d[c+1]-d[c],height:s[1]})}this._updateDataInfo(n)},e.prototype._updateDataInfo=function(n){var r=this.dataZoomModel,i=this._displayables,a=i.handleLabels,s=this._orient,o=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var d=l.getAxisModel().axis,c=this._range,f=n?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();o=[this._formatLabel(f[0],d),this._formatLabel(f[1],d)]}}var p=Fs(this._handleEnds.slice());h.call(this,0),h.call(this,1);function h(m){var g=Dp(i.handles[m].parent,this.group),v=YC(m===0?"right":"left",g),_=this._handleWidth/2+MQe,x=Ao([p[m]+(m===0?-_:_),this._size[1]/2],g);a[m].setStyle({x:x[0],y:x[1],verticalAlign:s===Kv?"middle":v,align:s===Kv?v:"center",text:o[m]})}},e.prototype._formatLabel=function(n,r){var i=this.dataZoomModel,a=i.get("labelFormatter"),s=i.get("labelPrecision");(s==null||s==="auto")&&(s=r.getPixelPrecision());var o=n==null||isNaN(n)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(s,20));return gt(a)?a(n,o):it(a)?a.replace("{value}",o):o},e.prototype._showDataInfo=function(n){var r=this.dataZoomModel.get("handleLabel")||{},i=r.show||!1,a=this.dataZoomModel.getModel(["emphasis","handleLabel"]),s=a.get("show")||!1,o=n||this._dragging?s:i,l=this._displayables,d=l.handleLabels;d[0].attr("invisible",!o),d[1].attr("invisible",!o),l.moveHandle&&this.api[o?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},e.prototype._onDragMove=function(n,r,i,a){this._dragging=!0,ed(a.event);var s=this._displayables.sliderGroup.getLocalTransform(),o=Ao([r,i],s,!0),l=this._updateInterval(n,o[0]),d=this.dataZoomModel.get("realtime");this._updateView(!d),l&&d&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(n){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(i[0]<0||i[0]>r[0]||i[1]<0||i[1]>r[1])){var a=this._handleEnds,s=(a[0]+a[1])/2,o=this._updateInterval("all",i[0]-s);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(n){var r=n.offsetX,i=n.offsetY;this._brushStart=new Bt(r,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(n){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var i=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var s=this._getViewExtent(),o=[0,100];this._range=Fs([Cn(i.x,s,o,!0),Cn(i.x+i.width,s,o,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(n){this._brushing&&(ed(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},e.prototype._updateBrushRect=function(n,r){var i=this._displayables,a=this.dataZoomModel,s=i.brushRect;s||(s=i.brushRect=new Yv({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(s)),s.attr("ignore",!1);var o=this._brushStart,l=this._displayables.sliderGroup,d=l.transformCoordToLocal(n,r),c=l.transformCoordToLocal(o.x,o.y),f=this._size;d[0]=Math.max(Math.min(f[0],d[0]),0),s.setShape({x:c[0],y:0,width:d[0]-c[0],height:f[1]})},e.prototype._dispatchZoomAction=function(n){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?DQe:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var n,r=tse(this.dataZoomModel).infoList;if(!n&&r.length){var i=r[0].model.coordinateSystem;n=i.getRect&&i.getRect()}if(!n){var a=this.api.getWidth(),s=this.api.getHeight();n={x:a*.2,y:s*.2,width:a*.6,height:s*.6}}return n},e.type="dataZoom.slider",e}(DO);function PQe(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function iH(t){return t==="vertical"?"ns-resize":"ew-resize"}function xse(t){t.registerComponentModel(AQe),t.registerComponentView(RQe),RO(t)}function IQe(t){Kt(_se),Kt(xse)}var wse={get:function(t,e,n){var r=xt((OQe[t]||{})[e]);return n&&Be(r)?r[r.length-1]:r}},OQe={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},aH=oi.mapVisual,LQe=oi.eachVisual,VQe=Be,sH=oe,NQe=Fs,jQe=Cn,rS=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},e.prototype.optionUpdated=function(n,r){var i=this.option;!r&&cse(i,n,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(n){var r=this.stateList;n=ut(n,this),this.controllerVisuals=K$(this.option.controller,r,n),this.targetVisuals=K$(this.option.target,r,n)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var n=this.option.seriesIndex,r=[];return n==null||n==="all"?this.ecModel.eachSeries(function(i,a){r.push(a)}):r=Dn(n),r},e.prototype.eachTargetSeries=function(n,r){oe(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&n.call(r,a)},this)},e.prototype.isTargetSeries=function(n){var r=!1;return this.eachTargetSeries(function(i){i===n&&(r=!0)}),r},e.prototype.formatValueText=function(n,r,i){var a=this.option,s=a.precision,o=this.dataBound,l=a.formatter,d;i=i||["<",">"],Be(n)&&(n=n.slice(),d=!0);var c=r?n:d?[f(n[0]),f(n[1])]:f(n);if(it(l))return l.replace("{value}",d?c[0]:c).replace("{value2}",d?c[1]:c);if(gt(l))return d?l(n[0],n[1]):l(n);if(d)return n[0]===o[0]?i[0]+" "+c[1]:n[1]===o[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(p){return p===o[0]?"min":p===o[1]?"max":(+p).toFixed(Math.min(s,20))}},e.prototype.resetExtent=function(){var n=this.option,r=NQe([n.min,n.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(n){var r=this.option.dimension;if(r!=null)return n.getDimensionIndex(r);for(var i=n.dimensions,a=i.length-1;a>=0;a--){var s=i[a],o=n.getDimensionInfo(s);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var n=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),s=r.controller||(r.controller={});jt(a,i),jt(s,i);var o=this.isCategory();l.call(this,a),l.call(this,s),d.call(this,a,"inRange","outOfRange"),c.call(this,s);function l(f){VQe(r.color)&&!f.inRange&&(f.inRange={color:r.color.slice().reverse()}),f.inRange=f.inRange||{color:n.get("gradientColor")}}function d(f,p,h){var m=f[p],g=f[h];m&&!g&&(g=f[h]={},sH(m,function(v,_){if(oi.isValidType(_)){var x=wse.get(_,"inactive",o);x!=null&&(g[_]=x,_==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function c(f){var p=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,h=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,m=this.get("inactiveColor"),g=this.getItemSymbol(),v=g||"roundRect";sH(this.stateList,function(_){var x=this.itemSize,w=f[_];w||(w=f[_]={color:o?m:[m]}),w.symbol==null&&(w.symbol=p&&xt(p)||(o?v:[v])),w.symbolSize==null&&(w.symbolSize=h&&xt(h)||(o?x[0]:[x[0],x[0]])),w.symbol=aH(w.symbol,function(C){return C==="none"?v:C});var k=w.symbolSize;if(k!=null){var S=-1/0;LQe(k,function(C){C>S&&(S=C)}),w.symbolSize=aH(k,function(C){return jQe(C,[0,S],[0,x[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(n){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(n){return null},e.prototype.getVisualMeta=function(n){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(tn),oH=[20,140],FQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(n,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var n=this.itemSize;(n[0]==null||isNaN(n[0]))&&(n[0]=oH[0]),(n[1]==null||isNaN(n[1]))&&(n[1]=oH[1])},e.prototype._resetRange=function(){var n=this.getExtent(),r=this.option.range;!r||r.auto?(n.auto=1,this.option.range=n):Be(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],n[0]),r[1]=Math.min(r[1],n[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),oe(this.stateList,function(n){var r=this.option.controller[n].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(n){this.option.range=n.slice(),this._resetRange()},e.prototype.getSelected=function(){var n=this.getExtent(),r=Fs((this.get("range")||[]).slice());return r[0]>n[1]&&(r[0]=n[1]),r[1]>n[1]&&(r[1]=n[1]),r[0]<n[0]&&(r[0]=n[0]),r[1]<n[0]&&(r[1]=n[0]),r},e.prototype.getValueState=function(n){var r=this.option.range,i=this.getExtent();return(r[0]<=i[0]||r[0]<=n)&&(r[1]>=i[1]||n<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(n){var r=[];return this.eachTargetSeries(function(i){var a=[],s=i.getData();s.each(this.getDataDimensionIndex(s),function(o,l){n[0]<=o&&o<=n[1]&&a.push(l)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},e.prototype.getVisualMeta=function(n){var r=lH(this,"outOfRange",this.getExtent()),i=lH(this,"inRange",this.option.range.slice()),a=[];function s(h,m){a.push({value:h,color:n(h,m)})}for(var o=0,l=0,d=i.length,c=r.length;l<c&&(!i.length||r[l]<=i[0]);l++)r[l]<i[o]&&s(r[l],"outOfRange");for(var f=1;o<d;o++,f=0)f&&a.length&&s(i[o],"outOfRange"),s(i[o],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<r[l])&&(f&&(a.length&&s(a[a.length-1].value,"outOfRange"),f=0),s(r[l],"outOfRange"));var p=a.length;return{stops:a,outerColors:[p?a[0].color:"transparent",p?a[p-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Yc(rS.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(rS);function lH(t,e,n){if(n[0]===n[1])return n.slice();for(var r=200,i=(n[1]-n[0])/r,a=n[0],s=[],o=0;o<=r&&a<n[1];o++)s.push(a),a+=i;return s.push(n[1]),s}var kse=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return e.prototype.init=function(n,r){this.ecModel=n,this.api=r},e.prototype.render=function(n,r,i,a){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender(n,r,i,a)},e.prototype.renderBackground=function(n){var r=this.visualMapModel,i=Bg(r.get("padding")||0),a=n.getBoundingRect();n.add(new sn({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(n,r,i){i=i||{};var a=i.forceState,s=this.visualMapModel,o={};if(r==="color"){var l=s.get("contentColor");o.color=l}function d(h){return o[h]}function c(h,m){o[h]=m}var f=s.controllerVisuals[a||s.getValueState(n)],p=oi.prepareVisualTypes(f);return oe(p,function(h){var m=f[h];i.convertOpacityToAlpha&&h==="opacity"&&(h="colorAlpha",m=f.__alphaForOpacity),oi.dependsOn(h,r)&&m&&m.applyVisual(n,d,c)}),o[r]},e.prototype.positionGroup=function(n){var r=this.visualMapModel,i=this.api;tA(n,r.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},e.prototype.doRender=function(n,r,i,a){},e.type="visualMap",e}(hr),uH=[["left","right","width"],["top","bottom","height"]];function Sse(t,e,n){var r=t.option,i=r.align;if(i!=null&&i!=="auto")return i;for(var a={width:e.getWidth(),height:e.getHeight()},s=r.orient==="horizontal"?1:0,o=uH[s],l=[0,null,10],d={},c=0;c<3;c++)d[uH[1-s][c]]=l[c],d[o[c]]=c===2?n[0]:r[o[c]];var f=[["x","width",3],["y","height",0]][s],p=Qr(d,a,r.padding);return o[(p.margin[f[2]]||0)+p[f[0]]+p[f[1]]*.5<a[f[1]]*.5?0:1]}function Fw(t,e){return oe(t||[],function(n){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var nl=Cn,BQe=oe,dH=Math.min,h5=Math.max,zQe=12,UQe=6,HQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return e.prototype.init=function(n,r){t.prototype.init.call(this,n,r),this._hoverLinkFromSeriesMouseOver=ut(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=ut(this._hideIndicator,this)},e.prototype.doRender=function(n,r,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var n=this.visualMapModel,r=this.group;this._orient=n.get("orient"),this._useHandle=n.get("calculable"),this._resetInterval(),this._renderBar(r);var i=n.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(n,r,i){if(r){var a=r[1-i];a=a!=null?a+"":"";var s=this.visualMapModel,o=s.get("textGap"),l=s.itemSize,d=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-o:l[1]+o],d),f=this._applyTransform(i===0?"bottom":"top",d),p=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new un({style:Kn(h,{x:c[0],y:c[1],verticalAlign:p==="horizontal"?"middle":f,align:p==="horizontal"?f:"center",text:a})}))}},e.prototype._renderBar=function(n){var r=this.visualMapModel,i=this._shapes,a=r.itemSize,s=this._orient,o=this._useHandle,l=Sse(r,this.api,a),d=i.mainGroup=this._createBarGroup(l),c=new kt;d.add(c),c.add(i.outOfRange=cH()),c.add(i.inRange=cH(null,o?pH(this._orient):null,ut(this._dragHandle,this,"all",!1),ut(this._dragHandle,this,"all",!0))),c.setClipPath(new sn({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var f=r.textStyleModel.getTextRect(""),p=h5(f.width,f.height);o&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,d,0,a,p,s),this._createHandle(r,d,1,a,p,s)),this._createIndicator(r,d,a,p,s),n.add(d)},e.prototype._createHandle=function(n,r,i,a,s,o){var l=ut(this._dragHandle,this,i,!1),d=ut(this._dragHandle,this,i,!0),c=Lo(n.get("handleSize"),a[0]),f=Ur(n.get("handleIcon"),-c/2,-c/2,c,c,null,!0),p=pH(this._orient);f.attr({cursor:p,draggable:!0,drift:l,ondragend:d,onmousemove:function(_){ed(_.event)}}),f.x=a[0]/2,f.useStyle(n.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),ip(f,!0),r.add(f);var h=this.visualMapModel.textStyleModel,m=new un({cursor:p,draggable:!0,drift:l,onmousemove:function(_){ed(_.event)},ondragend:d,style:Kn(h,{x:0,y:0,text:""})});m.ensureState("blur").style={opacity:.1},m.stateTransition={duration:200},this.group.add(m);var g=[c,0],v=this._shapes;v.handleThumbs[i]=f,v.handleLabelPoints[i]=g,v.handleLabels[i]=m},e.prototype._createIndicator=function(n,r,i,a,s){var o=Lo(n.get("indicatorSize"),i[0]),l=Ur(n.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var d=n.getModel("indicatorStyle").getItemStyle();if(l instanceof xi){var c=l.style;l.useStyle(Oe({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},d))}else l.useStyle(d);r.add(l);var f=this.visualMapModel.textStyleModel,p=new un({silent:!0,invisible:!0,style:Kn(f,{x:0,y:0,text:""})});this.group.add(p);var h=[(s==="horizontal"?a/2:UQe)+i[0]/2,0],m=this._shapes;m.indicator=l,m.indicatorLabel=p,m.indicatorLabelPoint=h,this._firstShowIndicator=!0},e.prototype._dragHandle=function(n,r,i,a){if(this._useHandle){if(this._dragging=!r,!r){var s=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(n,s[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():fH(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},e.prototype._resetInterval=function(){var n=this.visualMapModel,r=this._dataInterval=n.getSelected(),i=n.getExtent(),a=[0,n.itemSize[1]];this._handleEnds=[nl(r[0],i,a,!0),nl(r[1],i,a,!0)]},e.prototype._updateInterval=function(n,r){r=r||0;var i=this.visualMapModel,a=this._handleEnds,s=[0,i.itemSize[1]];bh(r,a,s,n,0);var o=i.getExtent();this._dataInterval=[nl(a[0],s,o,!0),nl(a[1],s,o,!0)]},e.prototype._updateView=function(n){var r=this.visualMapModel,i=r.getExtent(),a=this._shapes,s=[0,r.itemSize[1]],o=n?s:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,o,"inRange"),d=this._createBarVisual(i,i,s,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(o,l)},e.prototype._createBarVisual=function(n,r,i,a){var s={forceState:a,convertOpacityToAlpha:!0},o=this._makeColorGradient(n,s),l=[this.getControllerVisual(n[0],"symbolSize",s),this.getControllerVisual(n[1],"symbolSize",s)],d=this._createBarPoints(i,l);return{barColor:new Sb(0,0,0,1,o),barPoints:d,handlesColor:[o[0].color,o[o.length-1].color]}},e.prototype._makeColorGradient=function(n,r){var i=100,a=[],s=(n[1]-n[0])/i;a.push({color:this.getControllerVisual(n[0],"color",r),offset:0});for(var o=1;o<i;o++){var l=n[0]+s*o;if(l>n[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:o/i})}return a.push({color:this.getControllerVisual(n[1],"color",r),offset:1}),a},e.prototype._createBarPoints=function(n,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],n[0]],[i[0],n[0]],[i[0],n[1]],[i[0]-r[1],n[1]]]},e.prototype._createBarGroup=function(n){var r=this._orient,i=this.visualMapModel.get("inverse");return new kt(r==="horizontal"&&!i?{scaleX:n==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&i?{scaleX:n==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!i?{scaleX:n==="left"?1:-1,scaleY:-1}:{scaleX:n==="left"?1:-1})},e.prototype._updateHandle=function(n,r){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,s=i.handleThumbs,o=i.handleLabels,l=a.itemSize,d=a.getExtent(),c=this._applyTransform("left",i.mainGroup);BQe([0,1],function(f){var p=s[f];p.setStyle("fill",r.handlesColor[f]),p.y=n[f];var h=nl(n[f],[0,l[1]],d,!0),m=this.getControllerVisual(h,"symbolSize");p.scaleX=p.scaleY=m/l[0],p.x=l[0]-m/2;var g=Ao(i.handleLabelPoints[f],Dp(p,this.group));if(this._orient==="horizontal"){var v=c==="left"||c==="top"?(l[0]-m)/2:(l[0]-m)/-2;g[1]+=v}o[f].setStyle({x:g[0],y:g[1],text:a.formatValueText(this._dataInterval[f]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(n,r,i,a){var s=this.visualMapModel,o=s.getExtent(),l=s.itemSize,d=[0,l[1]],c=this._shapes,f=c.indicator;if(f){f.attr("invisible",!1);var p={convertOpacityToAlpha:!0},h=this.getControllerVisual(n,"color",p),m=this.getControllerVisual(n,"symbolSize"),g=nl(n,o,d,!0),v=l[0]-m/2,_={x:f.x,y:f.y};f.y=g,f.x=v;var x=Ao(c.indicatorLabelPoint,Dp(f,this.group)),w=c.indicatorLabel;w.attr("invisible",!1);var k=this._applyTransform("left",c.mainGroup),S=this._orient,C=S==="horizontal";w.setStyle({text:(i||"")+s.formatValueText(r),verticalAlign:C?k:"middle",align:C?"center":k});var A={x:v,y:g,style:{fill:h}},M={style:{x:x[0],y:x[1]}};if(s.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var $={duration:100,easing:"cubicInOut",additive:!0};f.x=_.x,f.y=_.y,f.animateTo(A,$),w.animateTo(M,$)}else f.attr(A),w.attr(M);this._firstShowIndicator=!1;var R=this._shapes.handleLabels;if(R)for(var I=0;I<R.length;I++)this.api.enterBlur(R[I])}},e.prototype._enableHoverLinkToSeries=function(){var n=this;this._shapes.mainGroup.on("mousemove",function(r){if(n._hovering=!0,!n._dragging){var i=n.visualMapModel.itemSize,a=n._applyTransform([r.offsetX,r.offsetY],n._shapes.mainGroup,!0,!0);a[1]=dH(h5(0,a[1]),i[1]),n._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var n=this.api.getZr();this.visualMapModel.option.hoverLink?(n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),n.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(n,r){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var s=[0,a[1]],o=i.getExtent();n=dH(h5(s[0],n),s[1]);var l=qQe(i,o,s),d=[n-l,n+l],c=nl(n,s,o,!0),f=[nl(d[0],s,o,!0),nl(d[1],s,o,!0)];d[0]<s[0]&&(f[0]=-1/0),d[1]>s[1]&&(f[1]=1/0),r&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c," ",l));var p=this._hoverLinkDataIndices,h=[];(r||fH(i))&&(h=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var m=JLe(p,h);this._dispatchHighDown("downplay",Fw(m[0],i)),this._dispatchHighDown("highlight",Fw(m[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(n){var r;if(sp(n.target,function(l){var d=Tt(l);if(d.dataIndex!=null)return r=d,!0},!0),!!r){var i=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var s=i.getData(r.dataType),o=s.getStore().get(a.getDataDimensionIndex(s),r.dataIndex);isNaN(o)||this._showIndicator(o,o)}}},e.prototype._hideIndicator=function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0),n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Fw(n,this.visualMapModel)),n.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver),n.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(n,r,i,a){var s=Dp(r,a?null:this.group);return Be(n)?Ao(n,s,i):YC(n,s,i)},e.prototype._dispatchHighDown=function(n,r){r&&r.length&&this.api.dispatchAction({type:n,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(kse);function cH(t,e,n,r){return new $a({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(i){ed(i.event)},ondragend:r})}function qQe(t,e,n){var r=zQe/2,i=t.get("hoverLinkDataSize");return i&&(r=nl(i,e,n,!0)/2),r}function fH(t){var e=t.get("hoverLinkOnHandle");return!!(e==null?t.get("realtime"):e)}function pH(t){return t==="vertical"?"ns-resize":"ew-resize"}var WQe={type:"selectDataRange",event:"dataRangeSelected",update:"update"},GQe=function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(n){n.setSelected(t.selected)})},YQe=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(r){var i=t.pipelineContext;!r.isTargetSeries(t)||i&&i.large||n.push(gZe(r.stateList,r.targetVisuals,ut(r.getValueState,r),r.getDataDimensionIndex(t.getData())))}),n}},{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),r=[];e.eachComponent("visualMap",function(i){if(i.isTargetSeries(t)){var a=i.getVisualMeta(ut(KQe,null,t,i))||{stops:[],outerColors:[]},s=i.getDataDimensionIndex(n);s>=0&&(a.dimension=s,r.push(a))}}),t.getData().setVisual("visualMeta",r)}}];function KQe(t,e,n,r){for(var i=e.targetVisuals[r],a=oi.prepareVisualTypes(i),s={color:Eb(t.getData(),"color")},o=0,l=a.length;o<l;o++){var d=a[o],c=i[d==="opacity"?"__alphaForOpacity":d];c&&c.applyVisual(n,f,p)}return s.color;function f(h){return s[h]}function p(h,m){s[h]=m}}var hH=oe;function XQe(t){var e=t&&t.visualMap;Be(e)||(e=e?[e]:[]),hH(e,function(n){if(n){tm(n,"splitList")&&!tm(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var r=n.pieces;r&&Be(r)&&hH(r,function(i){_t(i)&&(tm(i,"start")&&!tm(i,"min")&&(i.min=i.start),tm(i,"end")&&!tm(i,"max")&&(i.max=i.end))})}})}function tm(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var mH=!1;function Cse(t){mH||(mH=!0,t.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),t.registerAction(WQe,GQe),oe(YQe,function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)}),t.registerPreprocessor(XQe))}function Ase(t){t.registerComponentModel(FQe),t.registerComponentView(HQe),Cse(t)}var ZQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return e.prototype.optionUpdated=function(n,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],QQe[this._mode].call(this,this._pieceList),this._resetSelected(n,r);var a=this.option.categories;this.resetVisual(function(s,o){i==="categories"?(s.mappingMethod="category",s.categories=xt(a)):(s.dataExtent=this.getExtent(),s.mappingMethod="piecewise",s.pieceList=ze(this._pieceList,function(l){return l=xt(l),o!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var n=this.option,r={},i=oi.listVisualTypes(),a=this.isCategory();oe(n.pieces,function(o){oe(i,function(l){o.hasOwnProperty(l)&&(r[l]=1)})}),oe(r,function(o,l){var d=!1;oe(this.stateList,function(c){d=d||s(n,c,l)||s(n.target,c,l)},this),!d&&oe(this.stateList,function(c){(n[c]||(n[c]={}))[l]=wse.get(l,c==="inRange"?"active":"inactive",a)})},this);function s(o,l,d){return o&&o[l]&&o[l].hasOwnProperty(d)}t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(n,r){var i=this.option,a=this._pieceList,s=(r?i:n).selected||{};if(i.selected=s,oe(a,function(l,d){var c=this.getSelectedMapKey(l);s.hasOwnProperty(c)||(s[c]=!0)},this),i.selectedMode==="single"){var o=!1;oe(a,function(l,d){var c=this.getSelectedMapKey(l);s[c]&&(o?s[c]=!1:o=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(n){return this._mode==="categories"?n.value+"":n.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(n){this.option.selected=xt(n)},e.prototype.getValueState=function(n){var r=oi.findPieceIndex(n,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(n){var r=[],i=this._pieceList;return this.eachTargetSeries(function(a){var s=[],o=a.getData();o.each(this.getDataDimensionIndex(o),function(l,d){var c=oi.findPieceIndex(l,i);c===n&&s.push(d)},this),r.push({seriesId:a.id,dataIndex:s})},this),r},e.prototype.getRepresentValue=function(n){var r;if(this.isCategory())r=n.value;else if(n.value!=null)r=n.value;else{var i=n.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},e.prototype.getVisualMeta=function(n){if(this.isCategory())return;var r=[],i=["",""],a=this;function s(c,f){var p=a.getRepresentValue({interval:c});f||(f=a.getValueState(p));var h=n(p,f);c[0]===-1/0?i[0]=h:c[1]===1/0?i[1]=h:r.push({value:c[0],color:h},{value:c[1],color:h})}var o=this._pieceList.slice();if(!o.length)o.push({interval:[-1/0,1/0]});else{var l=o[0].interval[0];l!==-1/0&&o.unshift({interval:[-1/0,l]}),l=o[o.length-1].interval[1],l!==1/0&&o.push({interval:[l,1/0]})}var d=-1/0;return oe(o,function(c){var f=c.interval;f&&(f[0]>d&&s([d,f[0]],"outOfRange"),s(f.slice()),d=f[1])},this),{stops:r,outerColors:i}},e.type="visualMap.piecewise",e.defaultOption=Yc(rS.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(rS),QQe={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),r=this.getExtent(),i=e.splitNumber;i=Math.max(parseInt(i,10),1),e.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(n)!==a&&n<5;)n++;e.precision=n,a=+a.toFixed(n),e.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var s=0,o=r[0];s<i;o+=a,s++){var l=s===i-1?r[1]:o+a;t.push({interval:[o,l],close:[1,1]})}e.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),dj(t),oe(t,function(d,c){d.index=c,d.text=this.formatValueText(d.interval)},this)},categories:function(t){var e=this.option;oe(e.categories,function(n){t.push({text:this.formatValueText(n,!0),value:n})},this),gH(e,t)},pieces:function(t){var e=this.option;oe(e.pieces,function(n,r){_t(n)||(n={value:n});var i={text:"",index:r};if(n.label!=null&&(i.text=n.label),n.hasOwnProperty("value")){var a=i.value=n.value;i.interval=[a,a],i.close=[1,1]}else{for(var s=i.interval=[],o=i.close=[0,0],l=[1,0,1],d=[-1/0,1/0],c=[],f=0;f<2;f++){for(var p=[["gte","gt","min"],["lte","lt","max"]][f],h=0;h<3&&s[f]==null;h++)s[f]=n[p[h]],o[f]=l[h],c[f]=h===2;s[f]==null&&(s[f]=d[f])}c[0]&&s[1]===1/0&&(o[0]=0),c[1]&&s[0]===-1/0&&(o[1]=0),s[0]===s[1]&&o[0]&&o[1]&&(i.value=s[0])}i.visual=oi.retrieveVisuals(n),t.push(i)},this),gH(e,t),dj(t),oe(t,function(n){var r=n.close,i=[["<",""][r[1]],[">",""][r[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,i)},this)}};function gH(t,e){var n=t.inverse;(t.orient==="vertical"?!n:n)&&e.reverse()}var JQe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.doRender=function(){var n=this.group;n.removeAll();var r=this.visualMapModel,i=r.get("textGap"),a=r.textStyleModel,s=a.getFont(),o=a.getTextColor(),l=this._getItemAlign(),d=r.itemSize,c=this._getViewData(),f=c.endsText,p=gi(r.get("showLabel",!0),!f),h=!r.get("selectedMode");f&&this._renderEndsText(n,f[0],d,p,l),oe(c.viewPieceList,function(m){var g=m.piece,v=new kt;v.onclick=ut(this._onItemClick,this,g),this._enableHoverLink(v,m.indexInModelPieceList);var _=r.getRepresentValue(g);if(this._createItemSymbol(v,_,[0,0,d[0],d[1]],h),p){var x=this.visualMapModel.getValueState(_);v.add(new un({style:{x:l==="right"?-i:d[0]+i,y:d[1]/2,text:g.text,verticalAlign:"middle",align:l,font:s,fill:o,opacity:x==="outOfRange"?.5:1},silent:h}))}n.add(v)},this),f&&this._renderEndsText(n,f[1],d,p,l),Rp(r.get("orient"),n,r.get("itemGap")),this.renderBackground(n),this.positionGroup(n)},e.prototype._enableHoverLink=function(n,r){var i=this;n.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(s){var o=i.visualMapModel;o.option.hoverLink&&i.api.dispatchAction({type:s,batch:Fw(o.findTargetDataIndices(r),o)})}},e.prototype._getItemAlign=function(){var n=this.visualMapModel,r=n.option;if(r.orient==="vertical")return Sse(n,this.api,n.itemSize);var i=r.align;return(!i||i==="auto")&&(i="left"),i},e.prototype._renderEndsText=function(n,r,i,a,s){if(r){var o=new kt,l=this.visualMapModel.textStyleModel;o.add(new un({style:Kn(l,{x:a?s==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?s:"center",text:r})})),n.add(o)}},e.prototype._getViewData=function(){var n=this.visualMapModel,r=ze(n.getPieceList(),function(o,l){return{piece:o,indexInModelPieceList:l}}),i=n.get("text"),a=n.get("orient"),s=n.get("inverse");return(a==="horizontal"?s:!s)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},e.prototype._createItemSymbol=function(n,r,i,a){var s=Ur(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color"));s.silent=a,n.add(s)},e.prototype._onItemClick=function(n){var r=this.visualMapModel,i=r.option,a=i.selectedMode;if(a){var s=xt(i.selected),o=r.getSelectedMapKey(n);a==="single"||a===!0?(s[o]=!0,oe(s,function(l,d){s[d]=d===o})):s[o]=!s[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})}},e.type="visualMap.piecewise",e}(kse);function Tse(t){t.registerComponentModel(ZQe),t.registerComponentView(JQe),Cse(t)}function eJe(t){Kt(Ase),Kt(Tse)}var tJe={label:{enabled:!0},decal:{show:!1}},vH=on(),nJe={};function rJe(t,e){var n=t.getModel("aria");if(!n.get("enabled"))return;var r=xt(tJe);jt(r.label,t.getLocaleModel().get("aria"),!1),jt(n.option,r,!1),i(),a();function i(){var d=n.getModel("decal"),c=d.get("show");if(c){var f=pt();t.eachSeries(function(p){if(!p.isColorBySeries()){var h=f.get(p.type);h||(h={},f.set(p.type,h)),vH(p).scope=h}}),t.eachRawSeries(function(p){if(t.isSeriesFiltered(p))return;if(gt(p.enableAriaDecal)){p.enableAriaDecal();return}var h=p.getData();if(p.isColorBySeries()){var x=t$(p.ecModel,p.name,nJe,t.getSeriesCount()),w=h.getVisual("decal");h.setVisual("decal",k(w,x))}else{var m=p.getRawData(),g={},v=vH(p).scope;h.each(function(S){var C=h.getRawIndex(S);g[C]=S});var _=m.count();m.each(function(S){var C=g[S],A=m.getName(S)||S+"",M=t$(p.ecModel,A,v,_),$=h.getItemVisual(C,"decal");h.setItemVisual(C,"decal",k($,M))})}function k(S,C){var A=S?Oe(Oe({},C),S):C;return A.dirty=!0,A}})}}function a(){var d=e.getZr().dom;if(d){var c=t.getLocaleModel().get("aria"),f=n.getModel("label");if(f.option=yt(f.option,c),!!f.get("enabled")){if(d.setAttribute("role","img"),f.get("description")){d.setAttribute("aria-label",f.get("description"));return}var p=t.getSeriesCount(),h=f.get(["data","maxCount"])||10,m=f.get(["series","maxCount"])||10,g=Math.min(p,m),v;if(!(p<1)){var _=o();if(_){var x=f.get(["general","withTitle"]);v=s(x,{title:_})}else v=f.get(["general","withoutTitle"]);var w=[],k=p>1?f.get(["series","multiple","prefix"]):f.get(["series","single","prefix"]);v+=s(k,{seriesCount:p}),t.eachSeries(function(M,$){if($<g){var R=void 0,I=M.get("name"),B=I?"withName":"withoutName";R=p>1?f.get(["series","multiple",B]):f.get(["series","single",B]),R=s(R,{seriesId:M.seriesIndex,seriesName:M.get("name"),seriesType:l(M.subType)});var j=M.getData();if(j.count()>h){var z=f.get(["data","partialData"]);R+=s(z,{displayCnt:h})}else R+=f.get(["data","allData"]);for(var F=f.get(["data","separator","middle"]),q=f.get(["data","separator","end"]),N=f.get(["data","excludeDimensionId"]),O=[],V=0;V<j.count();V++)if(V<h){var L=j.getName(V),U=N?kn(j.getValues(V),function(X,re){return Yt(N,re)===-1}):j.getValues(V),G=f.get(["data",L?"withName":"withoutName"]);O.push(s(G,{name:L,value:U.join(F)}))}R+=O.join(F)+q,w.push(R)}});var S=f.getModel(["series","multiple","separator"]),C=S.get("middle"),A=S.get("end");v+=w.join(C)+A,d.setAttribute("aria-label",v)}}}}function s(d,c){if(!it(d))return d;var f=d;return oe(c,function(p,h){f=f.replace(new RegExp("\\{\\s*"+h+"\\s*\\}","g"),p)}),f}function o(){var d=t.get("title");return d&&d.length&&(d=d[0]),d&&d.text}function l(d){var c=t.getLocaleModel().get(["series","typeNames"]);return c[d]||c.chart}}function iJe(t){if(!(!t||!t.aria)){var e=t.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},oe(["description","general","series","data"],function(n){e[n]!=null&&(e.label[n]=e[n])})}}function aJe(t){t.registerPreprocessor(iJe),t.registerVisual(t.PRIORITY.VISUAL.ARIA,rJe)}var yH={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},sJe=function(){function t(e){var n=this._condVal=it(e)?new RegExp(e):b6e(e)?e:null;if(n==null){var r="";wn(r)}}return t.prototype.evaluate=function(e){var n=typeof e;return it(n)?this._condVal.test(e):pn(n)?this._condVal.test(e+""):!1},t}(),oJe=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),lJe=function(){function t(){}return t.prototype.evaluate=function(){for(var e=this.children,n=0;n<e.length;n++)if(!e[n].evaluate())return!1;return!0},t}(),uJe=function(){function t(){}return t.prototype.evaluate=function(){for(var e=this.children,n=0;n<e.length;n++)if(e[n].evaluate())return!0;return!1},t}(),dJe=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),cJe=function(){function t(){}return t.prototype.evaluate=function(){for(var e=!!this.valueParser,n=this.getValue,r=n(this.valueGetterParam),i=e?this.valueParser(r):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?i:r))return!1;return!0},t}();function BO(t,e){if(t===!0||t===!1){var n=new oJe;return n.value=t,n}var r="";return Ese(t)||wn(r),t.and?bH("and",t,e):t.or?bH("or",t,e):t.not?fJe(t,e):pJe(t,e)}function bH(t,e,n){var r=e[t],i="";Be(r)||wn(i),r.length||wn(i);var a=t==="and"?new lJe:new uJe;return a.children=ze(r,function(s){return BO(s,n)}),a.children.length||wn(i),a}function fJe(t,e){var n=t.not,r="";Ese(n)||wn(r);var i=new dJe;return i.child=BO(n,e),i.child||wn(r),i}function pJe(t,e){for(var n="",r=e.prepareGetValue(t),i=[],a=rn(t),s=t.parser,o=s?cne(s):null,l=0;l<a.length;l++){var d=a[l];if(!(d==="parser"||e.valueGetterAttrMap.get(d))){var c=ft(yH,d)?yH[d]:d,f=t[d],p=o?o(f):f,h=n7e(c,p)||c==="reg"&&new sJe(p);h||wn(n),i.push(h)}}i.length||wn(n);var m=new cJe;return m.valueGetterParam=r,m.valueParser=o,m.getValue=e.getValue,m.subCondList=i,m}function Ese(t){return _t(t)&&!ta(t)}var hJe=function(){function t(e,n){this._cond=BO(e,n)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();function mJe(t,e){return new hJe(t,e)}var gJe={type:"echarts:filter",transform:function(t){for(var e=t.upstream,n,r=mJe(t.config,{valueGetterAttrMap:pt({dimension:!0}),prepareGetValue:function(o){var l="",d=o.dimension;ft(o,"dimension")||wn(l);var c=e.getDimensionInfo(d);return c||wn(l),{dimIdx:c.index}},getValue:function(o){return e.retrieveValueFromItem(n,o.dimIdx)}}),i=[],a=0,s=e.count();a<s;a++)n=e.getRawDataItem(a),r.evaluate()&&i.push(n);return{data:i}}},vJe={type:"echarts:sort",transform:function(t){var e=t.upstream,n=t.config,r="",i=Dn(n);i.length||wn(r);var a=[];oe(i,function(c){var f=c.dimension,p=c.order,h=c.parser,m=c.incomparable;if(f==null&&wn(r),p!=="asc"&&p!=="desc"&&wn(r),m&&m!=="min"&&m!=="max"){var g="";wn(g)}if(p!=="asc"&&p!=="desc"){var v="";wn(v)}var _=e.getDimensionInfo(f);_||wn(r);var x=h?cne(h):null;h&&!x&&wn(r),a.push({dimIdx:_.index,parser:x,comparator:new pne(p,m)})});var s=e.sourceFormat;s!==na&&s!==oo&&wn(r);for(var o=[],l=0,d=e.count();l<d;l++)o.push(e.getRawDataItem(l));return o.sort(function(c,f){for(var p=0;p<a.length;p++){var h=a[p],m=e.retrieveValueFromItem(c,h.dimIdx),g=e.retrieveValueFromItem(f,h.dimIdx);h.parser&&(m=h.parser(m),g=h.parser(g));var v=h.comparator.evaluate(m,g);if(v!==0)return v}return 0}),{data:o}}};function yJe(t){t.registerTransform(gJe),t.registerTransform(vJe)}var bJe=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dataset",n}return e.prototype.init=function(n,r,i){t.prototype.init.call(this,n,r,i),this._sourceManager=new vne(this),wF(this)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),wF(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Ml},e}(tn),_Je=function(t){Ce(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dataset",n}return e.type="dataset",e}(hr);function xJe(t){t.registerComponentModel(bJe),t.registerComponentView(_Je)}var Ko=Bl.CMD;function Em(t,e){return Math.abs(t-e)<1e-5}function nD(t){var e=t.data,n=t.len(),r=[],i,a=0,s=0,o=0,l=0;function d(j,z){i&&i.length>2&&r.push(i),i=[j,z]}function c(j,z,F,q){Em(j,F)&&Em(z,q)||i.push(j,z,F,q,F,q)}function f(j,z,F,q,N,O){var V=Math.abs(z-j),L=Math.tan(V/4)*4/3,U=z<j?-1:1,G=Math.cos(j),X=Math.sin(j),re=Math.cos(z),ee=Math.sin(z),de=G*N+F,se=X*O+q,te=re*N+F,ne=ee*O+q,ce=N*L*U,ve=O*L*U;i.push(de-ce*X,se+ve*G,te+ce*ee,ne-ve*re,te,ne)}for(var p,h,m,g,v=0;v<n;){var _=e[v++],x=v===1;switch(x&&(a=e[v],s=e[v+1],o=a,l=s,(_===Ko.L||_===Ko.C||_===Ko.Q)&&(i=[o,l])),_){case Ko.M:a=o=e[v++],s=l=e[v++],d(o,l);break;case Ko.L:p=e[v++],h=e[v++],c(a,s,p,h),a=p,s=h;break;case Ko.C:i.push(e[v++],e[v++],e[v++],e[v++],a=e[v++],s=e[v++]);break;case Ko.Q:p=e[v++],h=e[v++],m=e[v++],g=e[v++],i.push(a+2/3*(p-a),s+2/3*(h-s),m+2/3*(p-m),g+2/3*(h-g),m,g),a=m,s=g;break;case Ko.A:var w=e[v++],k=e[v++],S=e[v++],C=e[v++],A=e[v++],M=e[v++]+A;v+=1;var $=!e[v++];p=Math.cos(A)*S+w,h=Math.sin(A)*C+k,x?(o=p,l=h,d(o,l)):c(a,s,p,h),a=Math.cos(M)*S+w,s=Math.sin(M)*C+k;for(var R=($?-1:1)*Math.PI/2,I=A;$?I>M:I<M;I+=R){var B=$?Math.max(I+R,M):Math.min(I+R,M);f(I,B,w,k,S,C)}break;case Ko.R:o=a=e[v++],l=s=e[v++],p=o+e[v++],h=l+e[v++],d(p,l),c(p,l,p,h),c(p,h,o,h),c(o,h,o,l),c(o,l,p,l);break;case Ko.Z:i&&c(a,s,o,l),a=o,s=l;break}}return i&&i.length>2&&r.push(i),r}function rD(t,e,n,r,i,a,s,o,l,d){if(Em(t,n)&&Em(e,r)&&Em(i,s)&&Em(a,o)){l.push(s,o);return}var c=2/d,f=c*c,p=s-t,h=o-e,m=Math.sqrt(p*p+h*h);p/=m,h/=m;var g=n-t,v=r-e,_=i-s,x=a-o,w=g*g+v*v,k=_*_+x*x;if(w<f&&k<f){l.push(s,o);return}var S=p*g+h*v,C=-p*_-h*x,A=w-S*S,M=k-C*C;if(A<f&&S>=0&&M<f&&C>=0){l.push(s,o);return}var $=[],R=[];Rc(t,n,i,s,.5,$),Rc(e,r,a,o,.5,R),rD($[0],R[0],$[1],R[1],$[2],R[2],$[3],R[3],l,d),rD($[4],R[4],$[5],R[5],$[6],R[6],$[7],R[7],l,d)}function wJe(t,e){var n=nD(t),r=[];e=e||1;for(var i=0;i<n.length;i++){var a=n[i],s=[],o=a[0],l=a[1];s.push(o,l);for(var d=2;d<a.length;){var c=a[d++],f=a[d++],p=a[d++],h=a[d++],m=a[d++],g=a[d++];rD(o,l,c,f,p,h,m,g,s,e),o=m,l=g}r.push(s)}return r}function Mse(t,e,n){var r=t[e],i=t[1-e],a=Math.abs(r/i),s=Math.ceil(Math.sqrt(a*n)),o=Math.floor(n/s);o===0&&(o=1,s=n);for(var l=[],d=0;d<s;d++)l.push(o);var c=s*o,f=n-c;if(f>0)for(var d=0;d<f;d++)l[d%s]+=1;return l}function _H(t,e,n){for(var r=t.r0,i=t.r,a=t.startAngle,s=t.endAngle,o=Math.abs(s-a),l=o*i,d=i-r,c=l>Math.abs(d),f=Mse([l,d],c?0:1,e),p=(c?o:d)/f.length,h=0;h<f.length;h++)for(var m=(c?d:o)/f[h],g=0;g<f[h];g++){var v={};c?(v.startAngle=a+p*h,v.endAngle=a+p*(h+1),v.r0=r+m*g,v.r=r+m*(g+1)):(v.startAngle=a+m*g,v.endAngle=a+m*(g+1),v.r0=r+p*h,v.r=r+p*(h+1)),v.clockwise=t.clockwise,v.cx=t.cx,v.cy=t.cy,n.push(v)}}function kJe(t,e,n){for(var r=t.width,i=t.height,a=r>i,s=Mse([r,i],a?0:1,e),o=a?"width":"height",l=a?"height":"width",d=a?"x":"y",c=a?"y":"x",f=t[o]/s.length,p=0;p<s.length;p++)for(var h=t[l]/s[p],m=0;m<s[p];m++){var g={};g[d]=p*f,g[c]=m*h,g[o]=f,g[l]=h,g.x+=t.x,g.y+=t.y,n.push(g)}}function xH(t,e,n,r){return t*r-n*e}function SJe(t,e,n,r,i,a,s,o){var l=n-t,d=r-e,c=s-i,f=o-a,p=xH(c,f,l,d);if(Math.abs(p)<1e-6)return null;var h=t-i,m=e-a,g=xH(h,m,c,f)/p;return g<0||g>1?null:new Bt(g*l+t,g*d+e)}function CJe(t,e,n){var r=new Bt;Bt.sub(r,n,e),r.normalize();var i=new Bt;Bt.sub(i,t,e);var a=i.dot(r);return a}function nm(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function AJe(t,e,n){for(var r=t.length,i=[],a=0;a<r;a++){var s=t[a],o=t[(a+1)%r],l=SJe(s[0],s[1],o[0],o[1],e.x,e.y,n.x,n.y);l&&i.push({projPt:CJe(l,e,n),pt:l,idx:a})}if(i.length<2)return[{points:t},{points:t}];i.sort(function(v,_){return v.projPt-_.projPt});var d=i[0],c=i[i.length-1];if(c.idx<d.idx){var f=d;d=c,c=f}for(var p=[d.pt.x,d.pt.y],h=[c.pt.x,c.pt.y],m=[p],g=[h],a=d.idx+1;a<=c.idx;a++)nm(m,t[a].slice());nm(m,h),nm(m,p);for(var a=c.idx+1;a<=d.idx+r;a++)nm(g,t[a%r].slice());return nm(g,p),nm(g,h),[{points:m},{points:g}]}function wH(t){var e=t.points,n=[],r=[];zC(e,n,r);var i=new qt(n[0],n[1],r[0]-n[0],r[1]-n[1]),a=i.width,s=i.height,o=i.x,l=i.y,d=new Bt,c=new Bt;return a>s?(d.x=c.x=o+a/2,d.y=l,c.y=l+s):(d.y=c.y=l+s/2,d.x=o,c.x=o+a),AJe(e,d,c)}function iS(t,e,n,r){if(n===1)r.push(e);else{var i=Math.floor(n/2),a=t(e);iS(t,a[0],i,r),iS(t,a[1],n-i,r)}return r}function TJe(t,e){for(var n=[],r=0;r<e;r++)n.push(sI(t));return n}function EJe(t,e){e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel}function MJe(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}function $Je(t,e){var n=[],r=t.shape,i;switch(t.type){case"rect":kJe(r,e,n),i=sn;break;case"sector":_H(r,e,n),i=Ma;break;case"circle":_H({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,n),i=Ma;break;default:var a=t.getComputedTransform(),s=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,o=ze(wJe(t.getUpdatedPathProxy(),s),function(_){return MJe(_)}),l=o.length;if(l===0)iS(wH,{points:o[0]},e,n);else if(l===e)for(var d=0;d<l;d++)n.push({points:o[d]});else{var c=0,f=ze(o,function(_){var x=[],w=[];zC(_,x,w);var k=(w[1]-x[1])*(w[0]-x[0]);return c+=k,{poly:_,area:k}});f.sort(function(_,x){return x.area-_.area});for(var p=e,d=0;d<l;d++){var h=f[d];if(p<=0)break;var m=d===l-1?p:Math.ceil(h.area/c*e);m<0||(iS(wH,{points:h.poly},m,n),p-=m)}}i=$a;break}if(!i)return TJe(t,e);for(var g=[],d=0;d<n.length;d++){var v=new i;v.setShape(n[d]),EJe(t,v),g.push(v)}return g}function DJe(t,e){var n=t.length,r=e.length;if(n===r)return[t,e];for(var i=[],a=[],s=n<r?t:e,o=Math.min(n,r),l=Math.abs(r-n)/6,d=(o-2)/6,c=Math.ceil(l/d)+1,f=[s[0],s[1]],p=l,h=2;h<o;){var m=s[h-2],g=s[h-1],v=s[h++],_=s[h++],x=s[h++],w=s[h++],k=s[h++],S=s[h++];if(p<=0){f.push(v,_,x,w,k,S);continue}for(var C=Math.min(p,c-1)+1,A=1;A<=C;A++){var M=A/C;Rc(m,v,x,k,M,i),Rc(g,_,w,S,M,a),m=i[3],g=a[3],f.push(i[1],a[1],i[2],a[2],m,g),v=i[5],_=a[5],x=i[6],w=a[6]}p-=C-1}return s===t?[f,e]:[t,f]}function kH(t,e){for(var n=t.length,r=t[n-2],i=t[n-1],a=[],s=0;s<e.length;)a[s++]=r,a[s++]=i;return a}function RJe(t,e){for(var n,r,i,a=[],s=[],o=0;o<Math.max(t.length,e.length);o++){var l=t[o],d=e[o],c=void 0,f=void 0;l?d?(n=DJe(l,d),c=n[0],f=n[1],r=c,i=f):(f=kH(i||l,l),c=l):(c=kH(r||d,d),f=d),a.push(c),s.push(f)}return[a,s]}function SH(t){for(var e=0,n=0,r=0,i=t.length,a=0,s=i-2;a<i;s=a,a+=2){var o=t[s],l=t[s+1],d=t[a],c=t[a+1],f=o*c-d*l;e+=f,n+=(o+d)*f,r+=(l+c)*f}return e===0?[t[0]||0,t[1]||0]:[n/e/3,r/e/3,e]}function PJe(t,e,n,r){for(var i=(t.length-2)/6,a=1/0,s=0,o=t.length,l=o-2,d=0;d<i;d++){for(var c=d*6,f=0,p=0;p<o;p+=2){var h=p===0?c:(c+p-2)%l+2,m=t[h]-n[0],g=t[h+1]-n[1],v=e[p]-r[0],_=e[p+1]-r[1],x=v-m,w=_-g;f+=x*x+w*w}f<a&&(a=f,s=d)}return s}function IJe(t){for(var e=[],n=t.length,r=0;r<n;r+=2)e[r]=t[n-r-2],e[r+1]=t[n-r-1];return e}function OJe(t,e,n,r){for(var i=[],a,s=0;s<t.length;s++){var o=t[s],l=e[s],d=SH(o),c=SH(l);a==null&&(a=d[2]<0!=c[2]<0);var f=[],p=[],h=0,m=1/0,g=[],v=o.length;a&&(o=IJe(o));for(var _=PJe(o,l,d,c)*6,x=v-2,w=0;w<x;w+=2){var k=(_+w)%x+2;f[w+2]=o[k]-d[0],f[w+3]=o[k+1]-d[1]}f[0]=o[_]-d[0],f[1]=o[_+1]-d[1];for(var S=r/n,C=-r/2;C<=r/2;C+=S){for(var A=Math.sin(C),M=Math.cos(C),$=0,w=0;w<o.length;w+=2){var R=f[w],I=f[w+1],B=l[w]-c[0],j=l[w+1]-c[1],z=B*M-j*A,F=B*A+j*M;g[w]=z,g[w+1]=F;var q=z-R,N=F-I;$+=q*q+N*N}if($<m){m=$,h=C;for(var O=0;O<g.length;O++)p[O]=g[O]}}i.push({from:f,to:p,fromCp:d,toCp:c,rotation:-h})}return i}function aS(t){return t.__isCombineMorphing}var $se="__mOriginal_";function sS(t,e,n){var r=$se+e,i=t[r]||t[e];t[r]||(t[r]=t[e]);var a=n.replace,s=n.after,o=n.before;t[e]=function(){var l=arguments,d;return o&&o.apply(this,l),a?d=a.apply(this,l):d=i.apply(this,l),s&&s.apply(this,l),d}}function v0(t,e){var n=$se+e;t[n]&&(t[e]=t[n],t[n]=null)}function CH(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;){var a=r[i],s=r[i+1];r[i++]=e[0]*a+e[2]*s+e[4],r[i++]=e[1]*a+e[3]*s+e[5]}}function Dse(t,e){var n=t.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=RJe(nD(n),nD(r)),a=i[0],s=i[1],o=t.getComputedTransform(),l=e.getComputedTransform();function d(){this.transform=null}o&&CH(a,o),l&&CH(s,l),sS(e,"updateTransform",{replace:d}),e.transform=null;var c=OJe(a,s,10,Math.PI),f=[];sS(e,"buildPath",{replace:function(p){for(var h=e.__morphT,m=1-h,g=[],v=0;v<c.length;v++){var _=c[v],x=_.from,w=_.to,k=_.rotation*h,S=_.fromCp,C=_.toCp,A=Math.sin(k),M=Math.cos(k);ww(g,S,C,h);for(var $=0;$<x.length;$+=2){var R=x[$],I=x[$+1],B=w[$],j=w[$+1],z=R*m+B*h,F=I*m+j*h;f[$]=z*M-F*A+g[0],f[$+1]=z*A+F*M+g[1]}var q=f[0],N=f[1];p.moveTo(q,N);for(var $=2;$<x.length;){var B=f[$++],j=f[$++],O=f[$++],V=f[$++],L=f[$++],U=f[$++];q===B&&N===j&&O===L&&V===U?p.lineTo(L,U):p.bezierCurveTo(B,j,O,V,L,U),q=L,N=U}}}})}function zO(t,e,n){if(!t||!e)return e;var r=n.done,i=n.during;Dse(t,e),e.__morphT=0;function a(){v0(e,"buildPath"),v0(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},yt({during:function(s){e.dirtyShape(),i&&i(s)},done:function(){a(),r&&r()}},n)),e}function LJe(t,e,n,r,i,a){var s=16;t=i===n?0:Math.round(32767*(t-n)/(i-n)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var o=0,l,d=(1<<s)/2;d>0;d/=2){var c=0,f=0;(t&d)>0&&(c=1),(e&d)>0&&(f=1),o+=d*d*(3*c^f),f===0&&(c===1&&(t=d-1-t,e=d-1-e),l=t,t=e,e=l)}return o}function oS(t){var e=1/0,n=1/0,r=-1/0,i=-1/0,a=ze(t,function(o){var l=o.getBoundingRect(),d=o.getComputedTransform(),c=l.x+l.width/2+(d?d[4]:0),f=l.y+l.height/2+(d?d[5]:0);return e=Math.min(c,e),n=Math.min(f,n),r=Math.max(c,r),i=Math.max(f,i),[c,f]}),s=ze(a,function(o,l){return{cp:o,z:LJe(o[0],o[1],e,n,r,i),path:t[l]}});return s.sort(function(o,l){return o.z-l.z}).map(function(o){return o.path})}function Rse(t){return $Je(t.path,t.count)}function iD(){return{fromIndividuals:[],toIndividuals:[],count:0}}function VJe(t,e,n){var r=[];function i(S){for(var C=0;C<S.length;C++){var A=S[C];aS(A)?i(A.childrenRef()):A instanceof Zt&&r.push(A)}}i(t);var a=r.length;if(!a)return iD();var s=n.dividePath||Rse,o=s({path:e,count:a});if(o.length!==a)return console.error("Invalid morphing: unmatched splitted path"),iD();r=oS(r),o=oS(o);for(var l=n.done,d=n.during,c=n.individualDelay,f=new Iu,p=0;p<a;p++){var h=r[p],m=o[p];m.parent=e,m.copyTransform(f),c||Dse(h,m)}e.__isCombineMorphing=!0,e.childrenRef=function(){return o};function g(S){for(var C=0;C<o.length;C++)o[C].addSelfToZr(S)}sS(e,"addSelfToZr",{after:function(S){g(S)}}),sS(e,"removeSelfFromZr",{after:function(S){for(var C=0;C<o.length;C++)o[C].removeSelfFromZr(S)}});function v(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,v0(e,"addSelfToZr"),v0(e,"removeSelfFromZr")}var _=o.length;if(c)for(var x=_,w=function(){x--,x===0&&(v(),l&&l())},p=0;p<_;p++){var k=c?yt({delay:(n.delay||0)+c(p,_,r[p],o[p]),done:w},n):n;zO(r[p],o[p],k)}else e.__morphT=0,e.animateTo({__morphT:1},yt({during:function(S){for(var C=0;C<_;C++){var A=o[C];A.__morphT=e.__morphT,A.dirtyShape()}d&&d(S)},done:function(){v();for(var S=0;S<t.length;S++)v0(t[S],"updateTransform");l&&l()}},n));return e.__zr&&g(e.__zr),{fromIndividuals:r,toIndividuals:o,count:_}}function NJe(t,e,n){var r=e.length,i=[],a=n.dividePath||Rse;function s(h){for(var m=0;m<h.length;m++){var g=h[m];aS(g)?s(g.childrenRef()):g instanceof Zt&&i.push(g)}}if(aS(t)){s(t.childrenRef());var o=i.length;if(o<r)for(var l=0,d=o;d<r;d++)i.push(sI(i[l++%o]));i.length=r}else{i=a({path:t,count:r});for(var c=t.getComputedTransform(),d=0;d<i.length;d++)i[d].setLocalTransform(c);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),iD()}i=oS(i),e=oS(e);for(var f=n.individualDelay,d=0;d<r;d++){var p=f?yt({delay:(n.delay||0)+f(d,r,i[d],e[d])},n):n;zO(i[d],e[d],p)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function AH(t){return Be(t[0])}function TH(t,e){for(var n=[],r=t.length,i=0;i<r;i++)n.push({one:t[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,s=void 0;for(s=0;s<a;s++)n[s%r].many.push(e[i][s])}for(var o=0,i=r-1;i>=0;i--)if(!n[i].many.length){var l=n[o].many;if(l.length<=1)if(o)o=0;else return n;var a=l.length,d=Math.ceil(a/2);n[i].many=l.slice(d,a),n[o].many=l.slice(0,d),o++}return n}var jJe={clone:function(t){for(var e=[],n=1-Math.pow(1-t.path.style.opacity,1/t.count),r=0;r<t.count;r++){var i=sI(t.path);i.setStyle("opacity",n),e.push(i)}return e},split:null};function m5(t,e,n,r,i,a){if(!t.length||!e.length)return;var s=Ng("update",r,i);if(!(s&&s.duration>0))return;var o=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},s),d,c;AH(t)&&(d=t,c=e),AH(e)&&(d=e,c=t);function f(_,x,w,k,S){var C=_.many,A=_.one;if(C.length===1&&!S){var M=x?C[0]:A,$=x?A:C[0];if(aS(M))f({many:[M],one:$},!0,w,k,!0);else{var R=o?yt({delay:o(w,k)},l):l;zO(M,$,R),a(M,$,M,$,R)}}else for(var I=yt({dividePath:jJe[n],individualDelay:o&&function(N,O,V,L){return o(N+w,k)}},l),B=x?VJe(C,A,I):NJe(A,C,I),j=B.fromIndividuals,z=B.toIndividuals,F=j.length,q=0;q<F;q++){var R=o?yt({delay:o(q,F)},l):l;a(j[q],z[q],x?C[q]:_.one,x?_.one:C[q],R)}}for(var p=d?d===t:t.length>e.length,h=d?TH(c,d):TH(p?e:t,[p?t:e]),m=0,g=0;g<h.length;g++)m+=h[g].many.length;for(var v=0,g=0;g<h.length;g++)f(h[g],p,v,m),v+=h[g].many.length}function Nf(t){if(!t)return[];if(Be(t)){for(var e=[],n=0;n<t.length;n++)e.push(Nf(t[n]));return e}var r=[];return t.traverse(function(i){i instanceof Zt&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var Pse=1e4,FJe=0,EH=1,MH=2,BJe=on();function zJe(t,e){for(var n=t.dimensions,r=0;r<n.length;r++){var i=t.getDimensionInfo(n[r]);if(i&&i.otherDims[e]===0)return n[r]}}function UJe(t,e,n){var r=t.getDimensionInfo(n),i=r&&r.ordinalMeta;if(r){var a=t.get(r.name,e);return i&&i.categories[a]||a+""}}function $H(t,e,n,r){var i=r?"itemChildGroupId":"itemGroupId",a=zJe(t,i);if(a){var s=UJe(t,e,a);return s}var o=t.getRawDataItem(e),l=r?"childGroupId":"groupId";if(o&&o[l])return o[l]+"";if(!r)return n||t.getId(e)}function DH(t){var e=[];return oe(t,function(n){var r=n.data,i=n.dataGroupId;if(!(r.count()>Pse))for(var a=r.getIndices(),s=0;s<a.length;s++)e.push({data:r,groupId:$H(r,s,i,!1),childGroupId:$H(r,s,i,!0),divide:n.divide,dataIndex:s})}),e}function g5(t,e,n){t.traverse(function(r){r instanceof Zt&&sr(r,{style:{opacity:0}},e,{dataIndex:n,isFrom:!0})})}function v5(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function rm(t){t.stopAnimation(),t.isGroup&&t.traverse(function(e){e.stopAnimation()})}function HJe(t,e,n){var r=Ng("update",n,e);r&&t.traverse(function(i){if(i instanceof no){var a=jVe(i);a&&i.animateFrom({style:a},r)}})}function qJe(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++){var i=t[r],a=e[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function Ise(t,e,n){var r=DH(t),i=DH(e);function a(w,k,S,C,A){(S||w)&&k.animateFrom({style:S&&S!==w?Oe(Oe({},S.style),w.style):w.style},A)}var s=!1,o=FJe,l=pt(),d=pt();r.forEach(function(w){w.groupId&&l.set(w.groupId,!0),w.childGroupId&&d.set(w.childGroupId,!0)});for(var c=0;c<i.length;c++){var f=i[c].groupId;if(d.get(f)){o=EH;break}var p=i[c].childGroupId;if(p&&l.get(p)){o=MH;break}}function h(w,k){return function(S){var C=S.data,A=S.dataIndex;return k?C.getId(A):w?o===EH?S.childGroupId:S.groupId:o===MH?S.childGroupId:S.groupId}}var m=qJe(r,i),g={};if(!m)for(var c=0;c<i.length;c++){var v=i[c],_=v.data.getItemGraphicEl(v.dataIndex);_&&(g[_.id]=!0)}function x(w,k){var S=r[k],C=i[w],A=C.data.hostModel,M=S.data.getItemGraphicEl(S.dataIndex),$=C.data.getItemGraphicEl(C.dataIndex);if(M===$){$&&HJe($,C.dataIndex,A);return}M&&g[M.id]||$&&(rm($),M?(rm(M),v5(M),s=!0,m5(Nf(M),Nf($),C.divide,A,w,a)):g5($,A,w))}new id(r,i,h(!0,m),h(!1,m),null,"multiple").update(x).updateManyToOne(function(w,k){var S=i[w],C=S.data,A=C.hostModel,M=C.getItemGraphicEl(S.dataIndex),$=kn(ze(k,function(R){return r[R].data.getItemGraphicEl(r[R].dataIndex)}),function(R){return R&&R!==M&&!g[R.id]});M&&(rm(M),$.length?(oe($,function(R){rm(R),v5(R)}),s=!0,m5(Nf($),Nf(M),S.divide,A,w,a)):g5(M,A,S.dataIndex))}).updateOneToMany(function(w,k){var S=r[k],C=S.data.getItemGraphicEl(S.dataIndex);if(!(C&&g[C.id])){var A=kn(ze(w,function($){return i[$].data.getItemGraphicEl(i[$].dataIndex)}),function($){return $&&$!==C}),M=i[w[0]].data.hostModel;A.length&&(oe(A,function($){return rm($)}),C?(rm(C),v5(C),s=!0,m5(Nf(C),Nf(A),S.divide,M,w[0],a)):oe(A,function($){return g5($,M,w[0])}))}}).updateManyToMany(function(w,k){new id(k,w,function(S){return r[S].data.getId(r[S].dataIndex)},function(S){return i[S].data.getId(i[S].dataIndex)}).update(function(S,C){x(w[S],k[C])}).execute()}).execute(),s&&oe(e,function(w){var k=w.data,S=k.hostModel,C=S&&n.getViewOfSeriesModel(S),A=Ng("update",S,0);C&&S.isAnimationEnabled()&&A&&A.duration>0&&C.group.traverse(function(M){M instanceof Zt&&!M.animators.length&&M.animateFrom({style:{opacity:0}},A)})})}function RH(t){var e=t.getModel("universalTransition").get("seriesKey");return e||t.id}function PH(t){return Be(t)?t.sort().join(","):t}function qd(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function WJe(t,e){var n=pt(),r=pt(),i=pt();return oe(t.oldSeries,function(a,s){var o=t.oldDataGroupIds[s],l=t.oldData[s],d=RH(a),c=PH(d);r.set(c,{dataGroupId:o,data:l}),Be(d)&&oe(d,function(f){i.set(f,{key:c,dataGroupId:o,data:l})})}),oe(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var s=a.get("dataGroupId"),o=a.getData(),l=RH(a),d=PH(l),c=r.get(d);if(c)n.set(d,{oldSeries:[{dataGroupId:c.dataGroupId,divide:qd(c.data),data:c.data}],newSeries:[{dataGroupId:s,divide:qd(o),data:o}]});else if(Be(l)){var f=[];oe(l,function(m){var g=r.get(m);g.data&&f.push({dataGroupId:g.dataGroupId,divide:qd(g.data),data:g.data})}),f.length&&n.set(d,{oldSeries:f,newSeries:[{dataGroupId:s,data:o,divide:qd(o)}]})}else{var p=i.get(l);if(p){var h=n.get(p.key);h||(h={oldSeries:[{dataGroupId:p.dataGroupId,data:p.data,divide:qd(p.data)}],newSeries:[]},n.set(p.key,h)),h.newSeries.push({dataGroupId:s,data:o,divide:qd(o)})}}}}),n}function IH(t,e){for(var n=0;n<t.length;n++){var r=e.seriesIndex!=null&&e.seriesIndex===t[n].seriesIndex||e.seriesId!=null&&e.seriesId===t[n].id;if(r)return n}}function GJe(t,e,n,r){var i=[],a=[];oe(Dn(t.from),function(s){var o=IH(e.oldSeries,s);o>=0&&i.push({dataGroupId:e.oldDataGroupIds[o],data:e.oldData[o],divide:qd(e.oldData[o]),groupIdDim:s.dimension})}),oe(Dn(t.to),function(s){var o=IH(n.updatedSeries,s);if(o>=0){var l=n.updatedSeries[o].getData();a.push({dataGroupId:e.oldDataGroupIds[o],data:l,divide:qd(l),groupIdDim:s.dimension})}}),i.length>0&&a.length>0&&Ise(i,a,r)}function YJe(t){t.registerUpdateLifecycle("series:beforeupdate",function(e,n,r){oe(Dn(r.seriesTransition),function(i){oe(Dn(i.to),function(a){for(var s=r.updatedSeries,o=0;o<s.length;o++)(a.seriesIndex!=null&&a.seriesIndex===s[o].seriesIndex||a.seriesId!=null&&a.seriesId===s[o].id)&&(s[o][Pw]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(e,n,r){var i=BJe(n);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)oe(Dn(a),function(h){GJe(h,i,r,n)});else{var s=WJe(i,r);oe(s.keys(),function(h){var m=s.get(h);Ise(m.oldSeries,m.newSeries,n)})}oe(r.updatedSeries,function(h){h[Pw]&&(h[Pw]=!1)})}for(var o=e.getSeries(),l=i.oldSeries=[],d=i.oldDataGroupIds=[],c=i.oldData=[],f=0;f<o.length;f++){var p=o[f].getData();p.count()<Pse&&(l.push(o[f]),d.push(o[f].get("dataGroupId")),c.push(p))}})}Kt([iBe]);Kt([J9e]);Kt([SBe,jBe,KBe,Eze,jze,CUe,JUe,LHe,iqe,dqe,bqe,pWe,NWe,KWe,cGe,mGe,CGe,RGe,UGe,KGe,aYe,zYe]);Kt(oKe);Kt(PKe);Kt(Rie);Kt(WKe);Kt(vae);Kt(XKe);Kt(aXe);Kt(WXe);Kt(cZe);Kt(jb);Kt(EZe);Kt(DZe);Kt(BZe);Kt(YZe);Kt(eQe);Kt(sQe);Kt(gQe);Kt(IQe);Kt(_se);Kt(xse);Kt(eJe);Kt(Ase);Kt(Tse);Kt(aJe);Kt(yJe);Kt(xJe);Kt(YJe);Kt(b9e);function et(r,i){return le(this,arguments,function*(t,e,n={}){e||(e={});let a=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},n.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(a["X-Frappe-CSRF-Token"]=window.csrf_token);let s=t.startsWith("/")?t:`/api/method/${t}`;const o=yield fetch(s,{method:"POST",headers:a,body:JSON.stringify(e)});if(o.ok){const l=yield o.json();if(l.docs||t==="login")return l;if(l.exc)try{console.groupCollapsed(t),console.log(`method: ${t}`),console.log("params:",e);let d=JSON.parse(l.exc);for(let c of d)console.log(c);console.groupEnd()}catch(d){console.warn("Error printing debug messages",d)}return l.message}else{let l=yield o.text(),d,c;try{d=JSON.parse(l)}catch(h){}let f=[[t,d.exc_type,d._error_message].filter(Boolean).join(" ")];if(d.exc){c=d.exc;try{c=JSON.parse(c)[0],console.log(c)}catch(h){}}let p=new Error(f.join(`
`));throw p.exc_type=d.exc_type,p.exc=c,p.status=o.status,p.messages=d._server_messages?JSON.parse(d._server_messages):[],p.messages=p.messages.concat(d.message),p.messages=p.messages.map(h=>{try{return JSON.parse(h).message}catch(m){return h}}),p.messages=p.messages.filter(Boolean),p.messages.length||(p.messages=d._error_message?[d._error_message]:["Internal Server Error"]),n.onError&&n.onError({response:o,status:o.status,error:p}),p}})}const KJe=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{r.result==null?n(new Error("FileReader result is null")):typeof r.result=="string"&&e(r.result)},r.readAsDataURL(t)});let Rs=null,aD=null;function OH(){typeof window!="undefined"&&!Rs&&(Rs=document.querySelector('link[rel="icon"]'),aD=(Rs==null?void 0:Rs.href)||null)}function XJe(t){typeof window!="undefined"&&OH();const e=Je(()=>{try{return t()}catch(r){return null}},r=>{if(typeof window!="undefined"&&r)if(r.title&&(document.title=r.title),Rs||OH(),r.emoji){const i=`data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>${r.emoji}</text></svg>`;Rs&&(Rs.href=i)}else r.icon?Rs&&(Rs.href=r.icon):Rs&&aD&&(Rs.href=aD)},{immediate:!0,deep:!0});return ra()&&jc(e),e}const ZJe={install(t){t.mixin(QJe())}};function QJe(){return{mounted(){if(this.$options.pageMeta){const t=this.$options.pageMeta.bind(this);this._pageMetaStopWatcher=XJe(t)}},beforeUnmount(){this._pageMetaStopWatcher&&(this._pageMetaStopWatcher(),this._pageMetaStopWatcher=void 0)}}}function Ose(t){let e=Object.assign({},t);if(!e.url)throw new Error("[request] options.url is required");e.transformRequest&&(e=e.transformRequest(t)),e.responseType||(e.responseType="json"),e.method||(e.method="GET");let n=e.url,r;if(e.params)if(e.method==="GET"){let i=new URLSearchParams;for(let a in e.params)i.append(a,e.params[a]);n=e.url+"?"+i.toString()}else r=JSON.stringify(e.params);return fetch(n,{method:e.method||"GET",headers:e.headers,body:r}).then(i=>{if(e.transformResponse)return e.transformResponse(i,e);if(i.status>=200&&i.status<300)return e.responseType==="json"?i.json():i;{let a=new Error(i.statusText);throw a.response=i,a}}).catch(i=>{if(e.transformError)return e.transformError(i);throw i})}function _h(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function JJe(t,e){let n;const r=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=_h(i),n.then(a=>{a.onclose=()=>n=void 0},()=>{}),n};return(i,a)=>r().then(s=>a(s.transaction(e,i).objectStore(e)))}let y5;function Fb(){return y5||(y5=JJe("keyval-store","keyval")),y5}function Lse(t,e=Fb()){return e("readonly",n=>_h(n.get(t)))}function Vse(t,e,n=Fb()){return n("readwrite",r=>(r.put(e,t),_h(r.transaction)))}function eet(t,e=Fb()){return e("readwrite",n=>(t.forEach(r=>n.put(r[1],r[0])),_h(n.transaction)))}function Nse(t,e=Fb()){return e("readwrite",n=>(n.delete(t),_h(n.transaction)))}function tet(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},_h(t.transaction)}function net(t=Fb()){return t("readonly",e=>{if(e.getAllKeys)return _h(e.getAllKeys());const n=[];return tet(e,r=>n.push(r.key)).then(()=>n)})}function UO(t,e){return typeof indexedDB=="undefined"?Promise.resolve(null):t?Vse(t,JSON.stringify(e)):Promise.resolve()}function ret(t){return typeof indexedDB=="undefined"?Promise.resolve(null):t?Nse(t):Promise.resolve()}function HO(t){return typeof indexedDB=="undefined"?Promise.resolve(null):Lse(t).then(e=>e&&JSON.parse(e))}let Bw={};function Ie(t,e){let n=null;if(t.cache){n=Kg(t.cache);let f=Bw[n];if(f)return f.auto&&f.reload(),f}typeof t=="string"&&(t={url:t,auto:!0});let r=t.debounce?nC(a,t.debounce):a,i=Jt({method:t.method,url:t.url,data:t.initialData||null,previousData:null,loading:!1,fetched:!1,error:null,promise:null,auto:t.auto,params:null,fetch:r,reload:r,submit:r,reset:o,update:s,setData:d});function a(h){return le(this,arguments,function*(f,p={}){let m=t.resourceFetcher||Ls("resourceFetcher")||Ose;f instanceof Event&&(f=null),f=f||i.params,t.makeParams&&(f=t.makeParams.call(e,f)),i.params=f,i.previousData=i.data?JSON.parse(JSON.stringify(i.data)):null,i.loading=!0,i.error=null,t.onFetch&&t.onFetch.call(e,i.params);let g=[t.beforeSubmit,p.beforeSubmit];for(let k of g)k&&k.call(e,i.params);let v=p.validate||t.validate,_=[t.onError,p.onError],x=[t.onSuccess,p.onSuccess],w=[t.onData,p.onData];if(v){let k;try{if(k=yield v.call(e,i.params),k&&typeof k=="string")throw new Error(k)}catch(S){l(S,_);return}}try{i.promise=m(je(me({},t),{params:f||t.params}));let k=yield i.promise;UO(n,k),i.data=c(k),i.fetched=!0;for(let S of x)S&&S.call(e,k);for(let S of w)S&&S.call(e,k)}catch(k){l(k,_)}return i.loading=!1,i.data})}function s({method:f,url:p,params:h,auto:m}){f&&f!==t.method&&(i.method=f),p&&p!==t.url&&(i.url=p),h&&h!==t.params&&(i.params=h),m!==void 0&&m!==i.auto&&(i.auto=m)}function o(){i.data=t.initialData||null,i.previousData=null,i.loading=!1,i.fetched=!1,i.error=null,i.params=null,i.auto=t.auto}function l(f,p){i.loading=!1,i.previousData&&(i.data=i.previousData),i.error=f;for(let h of p)h&&h.call(e,f);if(p.every(h=>h==null)){let h=Ls("fallbackErrorHandler");if(h)try{h(f)}catch(m){console.warn("Error in fallbackErrorHandler",m)}}throw f}function d(f){typeof f=="function"&&(f=f.call(e,i.data)),i.data=c(f)}function c(f){if(t.transform){let p=t.transform.call(e,f);if(p!=null)return p}return f}return n&&!Bw[n]&&(Bw[n]=i,HO(n).then(f=>{var p;(i.loading||!i.fetched)&&f&&(d(f),(p=t.onData)==null||p.call(e,f))})),t.auto&&i.fetch(),i}function Kg(t){return t?(typeof t=="string"&&(t=[t]),JSON.stringify(t)):null}function iet(t){return t=Kg(t),Bw[t]||null}function jse(t,e,n){aet(t,e),t.on("list_update",r=>{r.doctype==e&&n(r.name)})}let LH={};function aet(t,e){LH[e]||(t.emit("doctype_subscribe",e),LH[e]=!0)}let sD=Jt({}),Hm={};function set(t,e){var _,x,w,k,S;if(!t.doctype)throw new Error("List resource requires doctype");let n=Kg(t.cache);if(n){let C=sD[n];if(C)return C.auto&&C.reload(),C}let r=Ls("defaultListUrl")||"frappe.client.get_list",i=Ls("defaultDocInsertUrl")||"frappe.client.insert",a=Ls("defaultDocUpdateUrl")||"frappe.client.set_value",s=Ls("defaultDocDeleteUrl")||"frappe.client.delete",o=Ls("defaultRunDocMethodUrl")||"run_doc_method",l=Jt({doctype:t.doctype,fields:t.fields,filters:t.filters,orFilters:t.orFilters,orderBy:t.orderBy,start:t.start||0,pageLength:t.pageLength||20,groupBy:t.groupBy,parent:t.parent,debug:t.debug||0,originalData:null,dataMap:{},data:null,previous:m,hasPreviousPage:!1,next:g,hasNextPage:!0,auto:t.auto,list:Ie({url:t.url||r,makeParams(){return{doctype:l.doctype,fields:l.fields,filters:l.filters,or_filters:l.orFilters,order_by:l.orderBy,start:l.start,limit:l.pageLength,limit_start:l.start,limit_page_length:l.pageLength,group_by:l.groupBy,parent:l.parent,debug:l.debug}},onSuccess(C){var M;l.hasPreviousPage=!!l.start,l.hasNextPage=!(C.length<l.pageLength);let A;!l.start||l.start==0?A=C:l.start>0&&(A=l.originalData.concat(C)),UO(n,A),h(A),(M=t.onSuccess)==null||M.call(e,l.data)},onError:t.onError},e),fetchOne:Ie({url:t.url||r,makeParams(C){return{doctype:l.doctype,fields:l.fields||"*",filters:{name:C}}},onSuccess(C){var A,M;if(C.length>0&&l.originalData){let $=C[0];y0(l.doctype,$)}(M=(A=t.fetchOne)==null?void 0:A.onSuccess)==null||M.call(e,l.data)},onError:(_=t.fetchOne)==null?void 0:_.onError},e),insert:Ie({url:i,makeParams(C){return{doc:me({doctype:l.doctype},C)}},onSuccess(C){var A,M;l.list.fetch(),(M=(A=t.insert)==null?void 0:A.onSuccess)==null||M.call(e,C)},onError:(x=t.insert)==null?void 0:x.onError},e),setValue:Ie({url:a,makeParams(C){let $=C,{name:A}=$,M=Si($,["name"]);return{doctype:l.doctype,name:A,fieldname:M}},onSuccess(C){var A,M;y0(l.doctype,C),(M=(A=t.setValue)==null?void 0:A.onSuccess)==null||M.call(e,C)},onError:(w=t.setValue)==null?void 0:w.onError},e),delete:Ie({url:s,makeParams(C){return{doctype:l.doctype,name:C}},onSuccess(C){var A,M;l.list.fetch(),(M=(A=t.delete)==null?void 0:A.onSuccess)==null||M.call(e,C)},onError:(k=t.delete)==null?void 0:k.onError},e),runDocMethod:Ie({url:o,makeParams($){var R=$,{method:C,name:A}=R,M=Si(R,["method","name"]);return{dt:l.doctype,dn:A,method:C,args:M}},onSuccess(C){var A,M;if(C.docs)for(let $ of C.docs)y0($.doctype,$);(M=(A=t.runDocMethod)==null?void 0:A.onSuccess)==null||M.call(e,C)},onError:(S=t.runDocMethod)==null?void 0:S.onError},e),update:d,fetch:p,reload:f,setData:h,transform:c,getRow:v});function d(C){Object.assign(l,C)}function c(C){if(t.transform){let A=t.transform.call(e,C);if(A!=null)return A}return C}function f(){let C=l.start,A=l.pageLength;return l.start>0&&(l.start=0,l.pageLength=l.originalData.length),l.list.fetch().finally(()=>{l.start=C,l.pageLength=A})}function p(){f()}function h(C){if(l.originalData=C,typeof C=="function"&&(C=C.call(e,l.data)),l.data=c(C),Array.isArray(l.data)){l.dataMap={};for(let A of l.data){if(!A.name)continue;let M=A.name.toString();l.dataMap[M]=A}}}function m(){l.start=l.start-l.pageLength,l.list.fetch()}function g(){l.start=l.start+l.pageLength,l.list.fetch()}function v(C){let A=C.toString();return l.dataMap[A]}return t.realtime&&(e!=null&&e.$socket)&&jse(e.$socket,l.doctype,C=>{var A;(A=l.originalData)!=null&&A.find(M=>M.name===C)&&l.fetchOne.submit(C)}),n&&(sD[n]=l,HO(n).then(C=>{var A;(l.list.loading||!l.list.fetched)&&C&&(h(C),(A=t.onData)==null||A.call(e,C))})),t.auto&&l.list.fetch(),Hm[l.doctype]=Hm[l.doctype]||[],Hm[l.doctype].push(l),l}function oet(t){return t=Kg(t),sD[t]||null}function y0(t,e){if(!e.name)return;let n=Hm[t]||[];for(let r of n)if(r.originalData){for(let i of r.originalData)if(i.name&&i.name==e.name){delete i._previousData;let a=JSON.stringify(i);for(let s in i)s in e&&(i[s]=e[s]);i._previousData=a}r.data=r.transform(r.originalData)}}function uet(t,e){let n=Hm[t]||[];for(let r of n)r.originalData&&(r.originalData=r.originalData.filter(i=>i.name.toString()!==e.toString()),r.data=r.transform(r.originalData))}function det(t,e){let n=Hm[t]||[];for(let r of n)if(r.originalData){for(let i of r.originalData)if(i.name&&i.name==e.name){let a=JSON.parse(i._previousData);for(let s in i)i[s]=a[s];delete i._previousData}r.data=r.transform(r.originalData)}}let oD=Jt({});function cet(t,e){var m;if(!(t.doctype&&t.name))return;let n=Kg([t.doctype,t.name]),r=oD[n];if(r)return r.auto&&r.reload(),r;let i=Ls("defaultDocGetUrl")||"frappe.client.get",a=Ls("defaultDocUpdateUrl")||"frappe.client.set_value",s=Ls("defaultDocDeleteUrl")||"frappe.client.delete",o=Ls("defaultRunDocMethodUrl")||"run_doc_method",l={url:a,makeParams(v){return{doctype:c.doctype,name:c.name,fieldname:v}},validate(v){var _,x;(x=(_=t.setValue)==null?void 0:_.validate)==null||x.call(e,v)},beforeSubmit(v){c.previousDoc=JSON.stringify(c.doc),Object.assign(c.doc,v.fieldname||{}),y0(c.doctype,c.doc)},onSuccess(v){var _,x;c.doc=h(v),c.originalDoc=JSON.parse(JSON.stringify(c.doc)),(x=(_=t.setValue)==null?void 0:_.onSuccess)==null||x.call(e,v)},onError(v){var _,x;c.doc=JSON.parse(c.previousDoc),(x=(_=t.setValue)==null?void 0:_.onError)==null||x.call(e,v),det(c.doctype,c.doc)}};const d=t.auto!==void 0;let c=Jt({doctype:t.doctype,name:t.name,doc:null,originalDoc:null,isDirty:!1,auto:d?t.auto:!0,get:Ie({url:i,makeParams(){return{doctype:c.doctype,name:c.name}},onSuccess(v){var _;UO(n,v),c.doc=h(v),c.originalDoc=JSON.parse(JSON.stringify(c.doc)),(_=t.onSuccess)==null||_.call(e,c.doc)},onError(v){var _;ret(n),c.doc=null,c.originalDoc=null,(_=t.onError)==null||_.call(e,v)}},e),setValue:Ie(l,e),setValueDebounced:Ie(je(me({},l),{debounce:t.debounce||500}),e),save:Ie(je(me({},l),{makeParams(){let v=JSON.parse(JSON.stringify(c.doc));return delete v.doctype,delete v.name,{doctype:c.doctype,name:c.name,fieldname:v}}}),e),delete:Ie({url:s,makeParams(){return{doctype:c.doctype,name:c.name}},onSuccess(){var v,_;c.doc=null,(_=(v=t.delete)==null?void 0:v.onSuccess)==null||_.call(e),uet(c.doctype,c.name)},onError:(m=t.delete)==null?void 0:m.onError},e),reload:f,setDoc:p});Je(()=>c.doc,()=>{c.isDirty=JSON.stringify(c.doc)!==JSON.stringify(c.originalDoc)},{deep:!0});for(let v in t.whitelistedMethods){let _=t.whitelistedMethods[v];typeof _=="string"&&(_={method:_});let g=_,{method:x,onSuccess:w,makeParams:k,transform:S}=g,C=Si(g,["method","onSuccess","makeParams","transform"]);c[v]=Ie(me({url:o,makeParams(A){return A=k?k.call(e,A):A,{dt:c.doctype,dn:c.name,method:x,args:A}},transform(A){if(S){let M=S.call(e,A.message);if(M!=null)return M}return A.message},onSuccess(A){if(A.docs){for(let M of A.docs)if(M.doctype===c.doctype&&M.name.toString()===c.name.toString()){c.doc=h(M),y0(c.doctype,c.doc);break}}w==null||w.call(e,A.message)}},C),e)}function f(){return c.get.fetch()}function p(v){typeof v=="function"&&(v=v.call(e,c.doc)),c.doc=h(v)}function h(v){if(t.transform){let _=t.transform.call(e,v);if(typeof _=="object")return _}return v}return t.realtime&&e.$socket&&jse(e.$socket,c.doctype,v=>{v==c.name&&c.get.fetch()}),oD[n]=c,HO(n).then(v=>{(c.get.loading||!c.get.fetched)&&v&&(c.doc=h(v))}),c.auto&&c.get.fetch(),c}function fet(t,e){let n=Kg([t,e]);return oD[n]||null}let pet=t=>({created(){if(this.$options.resources){this._resources=Jt({});for(let e in this.$options.resources){let n=this.$options.resources[e];if(typeof n=="function")Je(()=>{let r=null;try{r=n.call(this)}catch(i){console.warn(`Failed to get resource options

`,i),r=null}return r},(r,i)=>{!r||!(!i||JSON.stringify(r)!==JSON.stringify(i))||(this._resources[e]=VH(r,this))},{immediate:!0,deep:!0});else{let r=VH(n,this);this._resources[e]=r}}}},methods:{$getResource(e){return iet(e)},$getDocumentResource(e,n){return fet(e,n)},$getDoc(e,n){let r=this.$getDocumentResource(e,n);return r?r.doc:null},$getListResource(e){return oet(e)},$refetchResource(e){let n=this.$getResource(e);n&&n.fetch()}},computed:{$resources(){return this._resources}}});function VH(t,e){return t.type==="document"?cet(t,e):t.type==="list"?set(t,e):Ie(t,e)}const het={install(t,e){let n=pet();t.mixin(n)}};function met(t){return Ose(je(me({},t),{transformRequest:(e={})=>{if(!e.url)throw new Error("[frappeRequest] options.url is required");let n=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},e.headers||{});return window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(n["X-Frappe-CSRF-Token"]=window.csrf_token),!e.url.startsWith("/")&&!e.url.startsWith("http")&&(e.url="/api/method/"+e.url),je(me({},e),{method:e.method||"POST",headers:n})},transformResponse:(e,n)=>le(this,null,function*(){let r=n.url;if(e.ok){const i=yield e.json();if(i.docs||r==="/api/method/login")return i;if(i.exc)try{console.groupCollapsed(r),console.log(n);let a=JSON.parse(i.exc);for(let s of a)console.log(s);console.groupEnd()}catch(a){console.warn("Error printing debug messages",a)}if(i._server_messages){let a=Ls("serverMessagesHandler")||n.onServerMessages||null;a&&a(JSON.parse(i==null?void 0:i._server_messages)||[])}return i.message}else{let i=yield e.text(),a,s;try{a=JSON.parse(i)}catch(d){}let o=[[n.url,a==null?void 0:a.exc_type,a==null?void 0:a._error_message].filter(Boolean).join(" ")];if(a.exc){s=a.exc;try{s=JSON.parse(s)[0],console.log(s)}catch(d){}}let l=new Error(o.join(`
`));throw l.exc_type=a.exc_type,l.exc=s,l.response=e,l.status=i.status,l.messages=a._server_messages?JSON.parse(a._server_messages):[],l.messages=l.messages.concat(a.message),l.messages=l.messages.map(d=>{try{return JSON.parse(d).message}catch(c){return d}}),l.messages=l.messages.filter(Boolean),l.messages.length||(l.messages=a._error_message?[a._error_message]:["Internal Server Error"]),n.onError&&n.onError(l),l}}),transformError:e=>{throw t.onError&&t.onError(e),e}}))}const zl=Object.create(null);zl.open="0";zl.close="1";zl.ping="2";zl.pong="3";zl.message="4";zl.upgrade="5";zl.noop="6";const zw=Object.create(null);Object.keys(zl).forEach(t=>{zw[zl[t]]=t});const lD={type:"error",data:"parser error"},Fse=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Bse=typeof ArrayBuffer=="function",zse=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,qO=({type:t,data:e},n,r)=>Fse&&e instanceof Blob?n?r(e):NH(e,r):Bse&&(e instanceof ArrayBuffer||zse(e))?n?r(e):NH(new Blob([e]),r):r(zl[t]+(e||"")),NH=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function jH(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let b5;function get(t,e){if(Fse&&t.data instanceof Blob)return t.data.arrayBuffer().then(jH).then(e);if(Bse&&(t.data instanceof ArrayBuffer||zse(t.data)))return e(jH(t.data));qO(t,!1,n=>{b5||(b5=new TextEncoder),e(b5.encode(n))})}const FH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ky=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let t=0;t<FH.length;t++)ky[FH.charCodeAt(t)]=t;const vet=t=>{let e=t.length*.75,n=t.length,r,i=0,a,s,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),c=new Uint8Array(d);for(r=0;r<n;r+=4)a=ky[t.charCodeAt(r)],s=ky[t.charCodeAt(r+1)],o=ky[t.charCodeAt(r+2)],l=ky[t.charCodeAt(r+3)],c[i++]=a<<2|s>>4,c[i++]=(s&15)<<4|o>>2,c[i++]=(o&3)<<6|l&63;return d},yet=typeof ArrayBuffer=="function",WO=(t,e)=>{if(typeof t!="string")return{type:"message",data:Use(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:bet(t.substring(1),e)}:zw[n]?t.length>1?{type:zw[n],data:t.substring(1)}:{type:zw[n]}:lD},bet=(t,e)=>{if(yet){const n=vet(t);return Use(n,e)}else return{base64:!0,data:t}},Use=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Hse="",_et=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((a,s)=>{qO(a,!1,o=>{r[s]=o,++i===n&&e(r.join(Hse))})})},xet=(t,e)=>{const n=t.split(Hse),r=[];for(let i=0;i<n.length;i++){const a=WO(n[i],e);if(r.push(a),a.type==="error")break}return r};function wet(){return new TransformStream({transform(t,e){get(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,r)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let _5;function Ox(t){return t.reduce((e,n)=>e+n.length,0)}function Lx(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function ket(t,e){_5||(_5=new TextDecoder);const n=[];let r=0,i=-1,a=!1;return new TransformStream({transform(s,o){for(n.push(s);;){if(r===0){if(Ox(n)<1)break;const l=Lx(n,1);a=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ox(n)<2)break;const l=Lx(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Ox(n)<8)break;const l=Lx(n,8),d=new DataView(l.buffer,l.byteOffset,l.length),c=d.getUint32(0);if(c>Math.pow(2,21)-1){o.enqueue(lD);break}i=c*Math.pow(2,32)+d.getUint32(4),r=3}else{if(Ox(n)<i)break;const l=Lx(n,i);o.enqueue(WO(a?l:_5.decode(l),e)),r=0}if(i===0||i>t){o.enqueue(lD);break}}}})}const qse=4;function Kr(t){if(t)return Cet(t)}function Cet(t){for(var e in Kr.prototype)t[e]=Kr.prototype[e];return t}Kr.prototype.on=Kr.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Kr.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Kr.prototype.off=Kr.prototype.removeListener=Kr.prototype.removeAllListeners=Kr.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Kr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Kr.prototype.emitReserved=Kr.prototype.emit;Kr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Kr.prototype.hasListeners=function(t){return!!this.listeners(t).length};const bA=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Os=typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")(),Aet="arraybuffer";function Wse(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Tet=Os.setTimeout,Eet=Os.clearTimeout;function _A(t,e){e.useNativeTimers?(t.setTimeoutFn=Tet.bind(Os),t.clearTimeoutFn=Eet.bind(Os)):(t.setTimeoutFn=Os.setTimeout.bind(Os),t.clearTimeoutFn=Os.clearTimeout.bind(Os))}const Met=1.33;function $et(t){return typeof t=="string"?Det(t):Math.ceil((t.byteLength||t.size)*Met)}function Det(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Gse(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ret(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Pet(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let a=n[r].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}class Iet extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class GO extends Kr{constructor(e){super(),this.writable=!1,_A(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Iet(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=WO(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Ret(e);return n.length?"?"+n:""}}class Oet extends GO{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};xet(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,_et(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Gse()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Yse=!1;try{Yse=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){}const Let=Yse;function Vet(){}class Net extends Oet{constructor(e){if(super(e),typeof location!="undefined"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class $l extends Kr{constructor(e,n,r){super(),this.createRequest=e,_A(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Wse(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch(i){}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{r.setRequestHeader("Accept","*/*")}catch(i){}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document!="undefined"&&(this._index=$l.requestsCount++,$l.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr=="undefined"||this._xhr===null)){if(this._xhr.onreadystatechange=Vet,e)try{this._xhr.abort()}catch(n){}typeof document!="undefined"&&delete $l.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}$l.requestsCount=0;$l.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",BH);else if(typeof addEventListener=="function"){const t="onpagehide"in Os?"pagehide":"unload";addEventListener(t,BH,!1)}}function BH(){for(let t in $l.requests)$l.requests.hasOwnProperty(t)&&$l.requests[t].abort()}const jet=function(){const t=Kse({xdomain:!1});return t&&t.responseType!==null}();class Fet extends Net{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=jet&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new $l(Kse,this.uri(),e)}}function Kse(t){const e=t.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Let))return new XMLHttpRequest}catch(n){}if(!e)try{return new Os[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(n){}}const Xse=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Bet extends GO{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Xse?{}:Wse(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;qO(r,this.supportsBinary,a=>{try{this.doWrite(r,a)}catch(s){}i&&bA(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Gse()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const x5=Os.WebSocket||Os.MozWebSocket;class zet extends Bet{createSocket(e,n,r){return Xse?new x5(e,n,r):n?new x5(e,n):new x5(e)}doWrite(e,n){this.ws.send(n)}}class Uet extends GO{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=ket(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=wet();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const a=()=>{r.read().then(({done:o,value:l})=>{o||(this.onPacket(l),a())}).catch(o=>{})};a();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&bA(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Het={websocket:zet,webtransport:Uet,polling:Fet},qet=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Wet=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function uD(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=qet.exec(t||""),a={},s=14;for(;s--;)a[Wet[s]]=i[s]||"";return n!=-1&&r!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=Get(a,a.path),a.queryKey=Yet(a,a.query),a}function Get(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Yet(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,a){i&&(n[i]=a)}),n}const dD=typeof addEventListener=="function"&&typeof removeEventListener=="function",Uw=[];dD&&addEventListener("offline",()=>{Uw.forEach(t=>t())},!1);class wc extends Kr{constructor(e,n){if(super(),this.binaryType=Aet,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=uD(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=uD(n.host).host);_A(this,n),this.secure=n.secure!=null?n.secure:typeof location!="undefined"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=n.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Pet(this.opts.query)),dD&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Uw.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=qse,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&wc.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",wc.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=$et(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,bA(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const a={type:e,data:n,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(wc.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),dD&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Uw.indexOf(this._offlineEventListener);r!==-1&&Uw.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}wc.protocol=qse;class Ket extends wc{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;wc.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;wc.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function a(){r||(r=!0,c(),n.close(),n=null)}const s=f=>{const p=new Error("probe error: "+f);p.transport=n.name,a(),this.emitReserved("upgradeError",p)};function o(){s("transport closed")}function l(){s("socket closed")}function d(f){n&&f.name!==n.name&&a()}const c=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",o),this.off("close",l),this.off("upgrading",d)};n.once("open",i),n.once("error",s),n.once("close",o),this.once("close",l),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Xet=class extends Ket{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>Het[i]).filter(i=>!!i)),super(e,r)}};function Zet(t,e="",n){let r=t;n=n||typeof location!="undefined"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n!="undefined"?t=n.protocol+"//"+t:t="https://"+t),r=uD(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+e,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}const Qet=typeof ArrayBuffer=="function",Jet=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Zse=Object.prototype.toString,ett=typeof Blob=="function"||typeof Blob!="undefined"&&Zse.call(Blob)==="[object BlobConstructor]",ttt=typeof File=="function"||typeof File!="undefined"&&Zse.call(File)==="[object FileConstructor]";function YO(t){return Qet&&(t instanceof ArrayBuffer||Jet(t))||ett&&t instanceof Blob||ttt&&t instanceof File}function Hw(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Hw(t[n]))return!0;return!1}if(YO(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Hw(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Hw(t[n]))return!0;return!1}function ntt(t){const e=[],n=t.data,r=t;return r.data=cD(n,e),r.attachments=e.length,{packet:r,buffers:e}}function cD(t,e){if(!t)return t;if(YO(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=cD(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=cD(t[r],e));return n}return t}function rtt(t,e){return t.data=fD(t.data,e),delete t.attachments,t}function fD(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=fD(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=fD(t[n],e));return t}const itt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],att=5;var Sn;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Sn||(Sn={}));class stt{constructor(e){this.replacer=e}encode(e){return(e.type===Sn.EVENT||e.type===Sn.ACK)&&Hw(e)?this.encodeAsBinary({type:e.type===Sn.EVENT?Sn.BINARY_EVENT:Sn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Sn.BINARY_EVENT||e.type===Sn.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=ntt(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function zH(t){return Object.prototype.toString.call(t)==="[object Object]"}class KO extends Kr{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Sn.BINARY_EVENT;r||n.type===Sn.BINARY_ACK?(n.type=r?Sn.EVENT:Sn.ACK,this.reconstructor=new ott(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(YO(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Sn[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Sn.BINARY_EVENT||r.type===Sn.BINARY_ACK){const a=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const s=e.substring(a,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(n+1)==="/"){const a=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(a,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const a=n+1;for(;++n;){const s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}r.id=Number(e.substring(a,n+1))}if(e.charAt(++n)){const a=this.tryParse(e.substr(n));if(KO.isPayloadValid(r.type,a))r.data=a;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(n){return!1}}static isPayloadValid(e,n){switch(e){case Sn.CONNECT:return zH(n);case Sn.DISCONNECT:return n===void 0;case Sn.CONNECT_ERROR:return typeof n=="string"||zH(n);case Sn.EVENT:case Sn.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&itt.indexOf(n[0])===-1);case Sn.ACK:case Sn.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ott{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=rtt(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ltt=Object.freeze(Object.defineProperty({__proto__:null,Decoder:KO,Encoder:stt,get PacketType(){return Sn},protocol:att},Symbol.toStringTag,{value:"Module"}));function vo(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const utt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Qse extends Kr{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[vo(e,"open",this.onopen.bind(this)),vo(e,"packet",this.onpacket.bind(this)),vo(e,"error",this.onerror.bind(this)),vo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,a;if(utt.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const s={type:Sn.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),s.id=c}const o=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},i),s=(...o)=>{this.io.clearTimeoutFn(a),n.apply(this,o)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...n){return new Promise((r,i)=>{const a=(s,o)=>s?i(s):r(o);a.withError=!0,n.push(a),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...a)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...a)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Sn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Sn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Sn.EVENT:case Sn.BINARY_EVENT:this.onevent(e);break;case Sn.ACK:case Sn.BINARY_ACK:this.onack(e);break;case Sn.DISCONNECT:this.ondisconnect();break;case Sn.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Sn.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Sn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Xg(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Xg.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Xg.prototype.reset=function(){this.attempts=0};Xg.prototype.setMin=function(t){this.ms=t};Xg.prototype.setMax=function(t){this.max=t};Xg.prototype.setJitter=function(t){this.jitter=t};class pD extends Kr{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,_A(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Xg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||ltt;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Xet(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=vo(n,"open",function(){r.onopen(),e&&e()}),a=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},s=vo(n,"error",a);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),n.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(vo(e,"ping",this.onping.bind(this)),vo(e,"data",this.ondata.bind(this)),vo(e,"error",this.onerror.bind(this)),vo(e,"close",this.onclose.bind(this)),vo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){bA(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Qse(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Xv={};function qw(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Zet(t,e.path||"/socket.io"),r=n.source,i=n.id,a=n.path,s=Xv[i]&&a in Xv[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let l;return o?l=new pD(r,e):(Xv[i]||(Xv[i]=new pD(r,e)),l=Xv[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(qw,{Manager:pD,Socket:Qse,io:qw,connect:qw});class dtt{constructor(){this.memoryStore={},this.useIndexedDB=typeof window!="undefined"&&!!window.indexedDB}set(e,n){if(!this.validateKey(e))return Promise.resolve(null);try{return this.useIndexedDB?Vse(e,JSON.stringify(n)):(this.memoryStore[e]=JSON.stringify(n),Promise.resolve())}catch(r){return this.handleError(r,"save to")}}setMany(e){try{if(this.useIndexedDB){let n=[];for(const[r,i]of Object.entries(e))n.push([r,JSON.stringify(i)]);return eet(n)}for(const[n,r]of Object.entries(e))this.memoryStore[n]=JSON.stringify(r);return Promise.resolve()}catch(n){return this.handleError(n,"save to")}}delete(e){if(!this.validateKey(e))return Promise.resolve(null);try{return this.useIndexedDB?Nse(e):(delete this.memoryStore[e],Promise.resolve())}catch(n){return this.handleError(n,"delete from")}}get(e){if(!this.validateKey(e))return Promise.resolve(null);if(this.useIndexedDB)return Lse(e).then(n=>{if(!n)return null;try{return JSON.parse(n)}catch(r){return this.handleError(r,"parse data from")}});try{const n=this.memoryStore[e];return Promise.resolve(n?JSON.parse(n):null)}catch(n){return this.handleError(n,"parse data from")}}keys(){return le(this,null,function*(){try{return this.useIndexedDB?net():Promise.resolve(Object.keys(this.memoryStore))}catch(e){return console.error(`Failed to get keys from ${this.useIndexedDB?"IndexedDB":"memory store"}:`,e),Promise.resolve([])}})}validateKey(e){return!!e}handleError(e,n){return console.error(`Failed to ${n} ${this.useIndexedDB?"IndexedDB":"memory store"}:`,e),Promise.resolve(null)}}let im=new dtt;class ctt{constructor(){this.cacheTimeout=5*60*1e3,this.storePrefix="doc:",this.docs=new Map,this.lastFetched=new Map}setCacheTimeout(e){if(e<1)throw new Error("Cache timeout must be at least 1 minute");this.cacheTimeout=e*60*1e3}setDoc(e){return le(this,null,function*(){if(!(e!=null&&e.doctype)||!(e!=null&&e.name))throw new Error("Invalid doc: must have doctype and name");e.name=e.name.toString();const n=this.getKey(e.doctype,e.name);try{yield im.set(this.storePrefix+n,e),this.docs.has(n)||this.docs.set(n,Q(null));const r=this.docs.get(n);r&&(r.value=e),this.lastFetched.set(n,Date.now())}catch(r){throw console.error("Failed to set doc in IDB:",r),r}})}getDoc(e,n){const r=Fr(n);if(!e||!r)throw new Error("doctype and name are required");const i=this.getKey(e,r);return this.docs.has(i)?this.isStale(i)&&this.loadDoc(i,!1):(this.docs.set(i,Q(null)),this.loadDoc(i,!0)),this.docs.get(i)}loadDoc(e,n){return le(this,null,function*(){try{!n&&this.isStale(e)&&(yield this.cleanup(e));const r=yield im.get(this.storePrefix+e);if(r){const i=this.docs.get(e);i&&(i.value=r),this.lastFetched.set(e,Date.now())}}catch(r){throw console.error("Failed to load doc from IDB:",r),r}})}setDocs(e){return le(this,null,function*(){const n={};for(const r of e){if(!(r!=null&&r.doctype)||!(r!=null&&r.name))continue;r.name=r.name.toString();const i=this.getKey(r.doctype,r.name);this.docs.has(i)||this.docs.set(i,Q(null));const a=this.docs.get(i);a&&(a.value=r),this.lastFetched.set(i,Date.now()),n[this.storePrefix+i]=r}yield im.setMany(n)})}invalidateDoc(e,n){return le(this,null,function*(){if(!e||!n)return;const r=this.getKey(e,n);yield this.cleanup(r)})}removeDoc(e,n){return this.invalidateDoc(e,n)}getKey(e,n){return`${e.trim()}/${n.trim()}`}isStale(e){const n=this.lastFetched.get(e);return n?Date.now()-n>this.cacheTimeout:!0}cleanup(e){return le(this,null,function*(){this.docs.delete(e),this.lastFetched.delete(e),yield im.delete(this.storePrefix+e)})}clearAll(){return le(this,null,function*(){try{const n=(yield im.keys()).filter(r=>r.startsWith(this.storePrefix));yield Promise.all(n.map(r=>im.delete(r))),this.docs.clear(),this.lastFetched.clear()}catch(e){throw console.error("Failed to clear all docs:",e),e}})}}const ftt=new ctt;class ptt{constructor(){this.byDocType={}}addList(e,n){this.ensureList(e),this.byDocType[e].push(n)}updateRows(e){for(let n of e)this.updateRow(n.doctype,n)}updateRow(e,n){this.ensureList(e),this.byDocType[e].forEach(r=>{r.updateRow(n)})}removeRow(e,n){this.ensureList(e),this.byDocType[e].forEach(r=>{r.removeRow(n)})}ensureList(e){this.byDocType[e]||(this.byDocType[e]=[])}}const htt=new ptt;class XO extends Error{constructor(e,n){super(e),this.name="FrappeResponseError",this.title=n.title,this.type=n.type,this.exception=n.exception,this.indicator=n.indicator,Error.captureStackTrace&&Error.captureStackTrace(this,XO)}}o0e({options:{fetch:(...t)=>fetch(...t),beforeFetch({options:t}){return t.headers=mtt(t.headers||{}),{options:t}},afterFetch(t){let e=JSON.parse(t.data);if(t.data=e,e.debug){let n=t.response.url.replace(window.location.origin,"");console.group(n);for(let r of e.debug)console.log(r==null?void 0:r.message);console.groupEnd()}if(e.docs){let n=e.docs;for(let r of n)r.name=r.name.toString();ftt.setDocs(n),htt.updateRows(n)}return t},onFetchError(t){var e;if((e=t.response)!=null&&e.ok&&t.error)return console.error(`Fetch request succeeded but there was a programming error:

`,t.error),t;try{let i=JSON.parse(t.data).errors[0],a=i.message?`: ${i.message}`:i.exception?" (Traceback)":"",s=new XO(`${i.type}${a}`,{title:i.title,type:i.type,exception:i.exception,indicator:i.indicator});return t.error=s,t}catch(n){return console.log("Error parsing error response:",n),t}}}});function mtt(t){let e=null,n=null;typeof window!="undefined"&&(e=window.location.hostname,n=window.csrf_token!=="{{ csrf_token }}"?window.csrf_token:null);const r={Accept:"application/json","Content-Type":"application/json; charset=utf-8"};return e&&(r["X-Frappe-Site-Name"]=e),n&&(r["X-Frappe-CSRF-Token"]=n),me(me({},t),r)}const gtt={class:"flex h-screen w-full flex-col bg-surface-white"},vtt={class:"flex h-16 items-center justify-between border-b border-outline-gray-200 bg-surface-white px-6 shadow-sm"},ytt={class:"flex items-center space-x-4"},btt={class:"text-sm text-gray-500"},_tt={class:"flex items-center space-x-4"},xtt={class:"flex flex-1 overflow-hidden"},wtt={class:"flex h-16 items-center justify-between px-4"},ktt={key:0,class:"text-sm font-semibold text-gray-900"},Stt={class:"flex-1 space-y-1 px-2 py-4"},Ctt={key:0},Att={class:"nav-group"},Ttt={class:"flex items-center space-x-2"},Ett={key:0},Mtt={key:0,class:"nav-group-items"},$tt={key:0},Dtt={key:0},Rtt={key:0},Ptt={key:0},Itt={key:0},Ott={class:"nav-group"},Ltt={class:"flex items-center space-x-2"},Vtt={key:0},Ntt={key:0,class:"nav-group-items"},jtt={key:0},Ftt={key:0},Btt={key:0},ztt={key:0},Utt={key:0},Htt={class:"nav-group"},qtt={class:"flex items-center space-x-2"},Wtt={key:0},Gtt={key:0,class:"nav-group-items"},Ytt={key:0},Ktt={key:0},Xtt={key:0},Ztt={class:"nav-group"},Qtt={class:"flex items-center space-x-2"},Jtt={key:0},ent={key:0,class:"nav-group-items"},tnt={key:0},nnt={key:0},rnt={key:0},int={key:0},ant={key:0},snt={class:"nav-group"},ont={class:"flex items-center space-x-2"},lnt={key:0},unt={key:0,class:"nav-group-items"},dnt={key:0},cnt={key:0},fnt={key:0},pnt={key:0},hnt={class:"nav-group"},mnt={class:"flex items-center space-x-2"},gnt={key:0},vnt={key:0,class:"nav-group-items"},ynt={key:0},bnt={key:0},_nt={key:0},xnt={key:0},wnt={class:"nav-group"},knt={class:"flex items-center space-x-2"},Snt={key:0},Cnt={key:0,class:"nav-group-items"},Ant={key:0},Tnt={key:0},Ent={key:0},Mnt={key:0},$nt={key:0},Dnt={key:0},Rnt={key:0},Pnt={key:0},Int={key:0},Ont={class:"nav-group"},Lnt={class:"flex items-center space-x-2"},Vnt={key:0},Nnt={key:0,class:"nav-group-items"},jnt={key:0},Fnt={key:0},Bnt={key:0},znt={class:"flex-1 overflow-hidden"},Unt={class:"flex h-12 items-center border-b border-outline-gray-200 bg-surface-white px-6"},Hnt={class:"h-full overflow-auto p-6"},qnt={__name:"AppLayout",setup(t){const e=gs(),n=xn(),r=Q(!1),i=Q(!1),a=Q(3),s=Q({auditPlanning:!0,auditExecution:!1,findings:!1,dataManagement:!1,compliance:!1,reports:!1,inventoryAudit:!1,settings:!1}),o=J(()=>{const m=[],g=e.path.split("/").filter(Boolean);let v="";return g.forEach((_,x)=>{var k;v+=`/${_}`;const w=n.getRoutes().find(S=>S.path===v);w&&m.push({label:((k=w.meta)==null?void 0:k.title)||_.charAt(0).toUpperCase()+_.slice(1),to:v,isActive:x===g.length-1})}),m}),l=[{label:"Profile Settings",icon:"user",onClick:()=>console.log("Profile settings")},{label:"System Preferences",icon:"settings",onClick:()=>console.log("System preferences")},{label:"Help & Support",icon:"help-circle",onClick:()=>console.log("Help & support")}],d=[{label:"My Profile",icon:"user",onClick:()=>console.log("My profile")},{label:"Change Password",icon:"lock",onClick:()=>console.log("Change password")},{label:"Sign Out",icon:"log-out",onClick:()=>Ym.logout.submit()}],c=()=>{r.value=!r.value},f=()=>{i.value=!i.value;const m=i.value?"dark":"light";document.documentElement.setAttribute("data-theme",m),localStorage.setItem("theme",m)},p=()=>{console.log("Toggle notifications panel")},h=m=>{r.value||(s.value[m]=!s.value[m])};return bt(()=>{const m=localStorage.getItem("theme")||"light";i.value=m==="dark",document.documentElement.setAttribute("data-theme",m)}),(m,g)=>{const v=Ji("router-link"),_=Ji("router-view");return T(),P("div",gtt,[u("header",vtt,[u("div",ytt,[g[9]||(g[9]=u("img",{src:"https://raw.githubusercontent.com/frappe/erpnext/develop/erpnext/public/images/erpnext-logo.svg",alt:"Organization Logo",class:"h-8 w-8"},null,-1)),u("div",null,[g[8]||(g[8]=u("h1",{class:"text-lg font-semibold text-gray-900"},"Internal Audit Management",-1)),u("p",btt,E(y(Ym).user),1)])]),u("div",_tt,[b(y(Z),{variant:"ghost",onClick:p},{default:D(()=>[b(y(fp),{class:"h-5 w-5"}),a.value>0?(T(),he(y(Ee),{key:0,variant:"destructive",class:"ml-1"},{default:D(()=>[W(E(a.value),1)]),_:1})):ie("",!0)]),_:1}),b(y(Z),{variant:"ghost",onClick:f},{default:D(()=>[i.value?(T(),he(y(cfe),{key:0,class:"h-5 w-5"})):(T(),he(y(hfe),{key:1,class:"h-5 w-5"}))]),_:1}),b(y(f2),{options:l},{default:D(()=>[b(y(Z),{variant:"ghost"},{default:D(()=>[b(y(So),{class:"h-5 w-5"})]),_:1})]),_:1}),b(y(f2),{options:d},{default:D(()=>[b(y(qye),{label:y(Ym).user,size:"sm"},null,8,["label"])]),_:1})])]),u("div",xtt,[u("aside",{class:fe(["flex flex-col border-r border-outline-gray-200 bg-surface-white transition-all duration-300",r.value?"w-16":"w-64"])},[u("div",wtt,[r.value?ie("",!0):(T(),P("h2",ktt," Navigation ")),b(y(Z),{variant:"ghost",size:"sm",onClick:c},{default:D(()=>[b(y(pr),{class:fe(["h-4 w-4 transition-transform",r.value?"rotate-180":""])},null,8,["class"])]),_:1})]),u("nav",Stt,[b(v,{to:"/",class:fe(["nav-item",{"nav-item-active":m.$route.path==="/"}])},{default:D(()=>[b(y(vY),{class:"h-5 w-5"}),r.value?ie("",!0):(T(),P("span",Ctt,"Dashboard"))]),_:1},8,["class"]),u("div",Att,[u("div",{class:"nav-group-header",onClick:g[0]||(g[0]=x=>h("auditPlanning"))},[u("div",Ttt,[b(y(vt),{class:"h-5 w-5"}),r.value?ie("",!0):(T(),P("span",Ett,"Audit Planning"))]),r.value?ie("",!0):(T(),he(y(mo),{key:0,class:fe(["h-4 w-4 transition-transform",s.value.auditPlanning?"rotate-180":""])},null,8,["class"]))]),s.value.auditPlanning||r.value?(T(),P("div",Mtt,[b(v,{to:"/audit-planning/universe",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-planning/universe"}])},{default:D(()=>[b(y(Jce),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",$tt,"Audit Universe"))]),_:1},8,["class"]),b(v,{to:"/audit-planning/risk-assessment",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-planning/risk-assessment"}])},{default:D(()=>[b(y(nn),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Dtt,"Risk Assessments"))]),_:1},8,["class"]),b(v,{to:"/audit-planning/annual-plan",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-planning/annual-plan"}])},{default:D(()=>[b(y(er),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Rtt,"Annual Audit Plan"))]),_:1},8,["class"]),b(v,{to:"/audit-planning/programs",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-planning/programs"}])},{default:D(()=>[b(y(vt),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Ptt,"Audit Programs"))]),_:1},8,["class"]),b(v,{to:"/audit-planning/calendar",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-planning/calendar"}])},{default:D(()=>[b(y(tE),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Itt,"Audit Calendar"))]),_:1},8,["class"])])):ie("",!0)]),u("div",Ott,[u("div",{class:"nav-group-header",onClick:g[1]||(g[1]=x=>h("auditExecution"))},[u("div",Ltt,[b(y(kr),{class:"h-5 w-5"}),r.value?ie("",!0):(T(),P("span",Vtt,"Audit Execution"))]),r.value?ie("",!0):(T(),he(y(mo),{key:0,class:fe(["h-4 w-4 transition-transform",s.value.auditExecution?"rotate-180":""])},null,8,["class"]))]),s.value.auditExecution||r.value?(T(),P("div",Ntt,[b(v,{to:"/audit-execution/engagements",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-execution/engagements"}])},{default:D(()=>[b(y(zS),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",jtt,"Audit Engagements"))]),_:1},8,["class"]),b(v,{to:"/audit-execution/working-papers",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-execution/working-papers"}])},{default:D(()=>[b(y(WD),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Ftt,"Working Papers"))]),_:1},8,["class"]),b(v,{to:"/audit-execution/data-analytics",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-execution/data-analytics"}])},{default:D(()=>[b(y(J1),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Btt,"Data Analytics"))]),_:1},8,["class"]),b(v,{to:"/audit-execution/test-library",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-execution/test-library"}])},{default:D(()=>[b(y(mfe),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",ztt,"Test Library"))]),_:1},8,["class"]),b(v,{to:"/audit-execution/test-execution",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/audit-execution/test-execution"}])},{default:D(()=>[b(y(eb),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Utt,"Test Execution"))]),_:1},8,["class"])])):ie("",!0)]),u("div",Htt,[u("div",{class:"nav-group-header",onClick:g[2]||(g[2]=x=>h("findings"))},[u("div",qtt,[b(y(zr),{class:"h-5 w-5"}),r.value?ie("",!0):(T(),P("span",Wtt,"Findings & Follow-up"))]),r.value?ie("",!0):(T(),he(y(mo),{key:0,class:fe(["h-4 w-4 transition-transform",s.value.findings?"rotate-180":""])},null,8,["class"]))]),s.value.findings||r.value?(T(),P("div",Gtt,[b(v,{to:"/findings/list",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/findings/list"}])},{default:D(()=>[b(y(Rn),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Ytt,"Audit Findings"))]),_:1},8,["class"]),b(v,{to:"/findings/corrective-actions",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/findings/corrective-actions"}])},{default:D(()=>[b(y(Gt),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Ktt,"Corrective Actions"))]),_:1},8,["class"]),b(v,{to:"/findings/follow-up",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/findings/follow-up"}])},{default:D(()=>[b(y(Ii),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Xtt,"Follow-up Tracker"))]),_:1},8,["class"])])):ie("",!0)]),u("div",Ztt,[u("div",{class:"nav-group-header",onClick:g[3]||(g[3]=x=>h("dataManagement"))},[u("div",Qtt,[b(y(ri),{class:"h-5 w-5"}),r.value?ie("",!0):(T(),P("span",Jtt,"Data Management"))]),r.value?ie("",!0):(T(),he(y(mo),{key:0,class:fe(["h-4 w-4 transition-transform",s.value.dataManagement?"rotate-180":""])},null,8,["class"]))]),s.value.dataManagement||r.value?(T(),P("div",ent,[b(v,{to:"/data-management/import-wizard",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/data-management/import-wizard"}])},{default:D(()=>[b(y(ps),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",tnt,"Import Data"))]),_:1},8,["class"]),b(v,{to:"/data-management/import-history",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/data-management/import-history"}])},{default:D(()=>[b(y(US),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",nnt,"Import History"))]),_:1},8,["class"]),b(v,{to:"/data-management/periods",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/data-management/periods"}])},{default:D(()=>[b(y(tE),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",rnt,"Data Periods"))]),_:1},8,["class"]),b(v,{to:"/data-management/quality",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/data-management/quality"}])},{default:D(()=>[b(y(Ti),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",int,"Data Quality"))]),_:1},8,["class"]),b(v,{to:"/data-management/explorer",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/data-management/explorer"}])},{default:D(()=>[b(y(Rn),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",ant,"BC Data Explorer"))]),_:1},8,["class"])])):ie("",!0)]),u("div",snt,[u("div",{class:"nav-group-header",onClick:g[4]||(g[4]=x=>h("compliance"))},[u("div",ont,[b(y(SY),{class:"h-5 w-5"}),r.value?ie("",!0):(T(),P("span",lnt,"Compliance"))]),r.value?ie("",!0):(T(),he(y(mo),{key:0,class:fe(["h-4 w-4 transition-transform",s.value.compliance?"rotate-180":""])},null,8,["class"]))]),s.value.compliance||r.value?(T(),P("div",unt,[b(v,{to:"/compliance/requirements",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/compliance/requirements"}])},{default:D(()=>[b(y(aw),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",dnt,"Requirements"))]),_:1},8,["class"]),b(v,{to:"/compliance/checklist",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/compliance/checklist"}])},{default:D(()=>[b(y(kr),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",cnt,"Compliance Checklist"))]),_:1},8,["class"]),b(v,{to:"/compliance/tax-tracker",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/compliance/tax-tracker"}])},{default:D(()=>[b(y(Q1),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",fnt,"Tax Tracker"))]),_:1},8,["class"]),b(v,{to:"/compliance/calendar",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/compliance/calendar"}])},{default:D(()=>[b(y(er),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",pnt,"Regulatory Calendar"))]),_:1},8,["class"])])):ie("",!0)]),u("div",hnt,[u("div",{class:"nav-group-header",onClick:g[5]||(g[5]=x=>h("reports"))},[u("div",mnt,[b(y(UL),{class:"h-5 w-5"}),r.value?ie("",!0):(T(),P("span",gnt,"Reports"))]),r.value?ie("",!0):(T(),he(y(mo),{key:0,class:fe(["h-4 w-4 transition-transform",s.value.reports?"rotate-180":""])},null,8,["class"]))]),s.value.reports||r.value?(T(),P("div",vnt,[b(v,{to:"/reports/builder",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/reports/builder"}])},{default:D(()=>[b(y(bfe),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",ynt,"Report Builder"))]),_:1},8,["class"]),b(v,{to:"/reports/audit-reports",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/reports/audit-reports"}])},{default:D(()=>[b(y(vt),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",bnt,"Audit Reports"))]),_:1},8,["class"]),b(v,{to:"/reports/board-reports",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/reports/board-reports"}])},{default:D(()=>[b(y(aE),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",_nt,"Board Reports"))]),_:1},8,["class"]),b(v,{to:"/reports/standard",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/reports/standard"}])},{default:D(()=>[b(y(UL),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",xnt,"Standard Reports"))]),_:1},8,["class"])])):ie("",!0)]),u("div",wnt,[u("div",{class:"nav-group-header",onClick:g[6]||(g[6]=x=>h("inventoryAudit"))},[u("div",knt,[b(y(Ws),{class:"h-5 w-5"}),r.value?ie("",!0):(T(),P("span",Snt,"Inventory Audit"))]),r.value?ie("",!0):(T(),he(y(mo),{key:0,class:fe(["h-4 w-4 transition-transform",s.value.inventoryAudit?"rotate-180":""])},null,8,["class"]))]),s.value.inventoryAudit||r.value?(T(),P("div",Cnt,[b(v,{to:"/inventory-audit",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/inventory-audit"}])},{default:D(()=>[b(y(afe),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Ant,"Dashboard"))]),_:1},8,["class"]),b(v,{to:"/inventory-audit/items",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path.startsWith("/inventory-audit/items")}])},{default:D(()=>[b(y(Ws),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Tnt,"Item Master"))]),_:1},8,["class"]),b(v,{to:"/inventory-audit/plans",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path.startsWith("/inventory-audit/plans")}])},{default:D(()=>[b(y(kr),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Ent,"Audit Plans"))]),_:1},8,["class"]),b(v,{to:"/inventory-audit/sessions",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path.startsWith("/inventory-audit/sessions")}])},{default:D(()=>[b(y(I0),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Mnt,"Stock Take Sessions"))]),_:1},8,["class"]),b(v,{to:"/inventory-audit/variance-cases",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path.startsWith("/inventory-audit/variance-cases")}])},{default:D(()=>[b(y(nn),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",$nt,"Variance Cases"))]),_:1},8,["class"]),b(v,{to:"/inventory-audit/stock-take",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path.startsWith("/inventory-audit/stock-take")}])},{default:D(()=>[b(y(kY),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Dnt,"Stock Take"))]),_:1},8,["class"]),b(v,{to:"/inventory-audit/issues",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path.startsWith("/inventory-audit/issues")}])},{default:D(()=>[b(y(zr),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Rnt,"Issue Log"))]),_:1},8,["class"]),b(v,{to:"/inventory-audit/scorecards",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path.startsWith("/inventory-audit/scorecards")}])},{default:D(()=>[b(y(HD),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Pnt,"Scorecards"))]),_:1},8,["class"]),b(v,{to:"/inventory-audit/settings",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/inventory-audit/settings"}])},{default:D(()=>[b(y(So),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Int,"Settings"))]),_:1},8,["class"])])):ie("",!0)]),u("div",Ont,[u("div",{class:"nav-group-header",onClick:g[7]||(g[7]=x=>h("settings"))},[u("div",Lnt,[b(y(So),{class:"h-5 w-5"}),r.value?ie("",!0):(T(),P("span",Vnt,"Settings"))]),r.value?ie("",!0):(T(),he(y(mo),{key:0,class:fe(["h-4 w-4 transition-transform",s.value.settings?"rotate-180":""])},null,8,["class"]))]),s.value.settings||r.value?(T(),P("div",Nnt,[b(v,{to:"/settings/users",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/settings/users"}])},{default:D(()=>[b(y(ya),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",jnt,"Users & Roles"))]),_:1},8,["class"]),b(v,{to:"/settings/templates",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/settings/templates"}])},{default:D(()=>[b(y(vt),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Fnt,"Templates"))]),_:1},8,["class"]),b(v,{to:"/settings/configuration",class:fe(["nav-subitem",{"nav-subitem-active":m.$route.path==="/settings/configuration"}])},{default:D(()=>[b(y(fY),{class:"h-4 w-4"}),r.value?ie("",!0):(T(),P("span",Bnt,"Configuration"))]),_:1},8,["class"])])):ie("",!0)])])],2),u("main",znt,[u("div",Unt,[b(wfe,{items:o.value},null,8,["items"])]),u("div",Hnt,[b(_)])])]),g[10]||(g[10]=u("footer",{class:"flex h-10 items-center justify-center border-t border-outline-gray-200 bg-surface-white px-6"},[u("p",{class:"text-sm text-gray-500"},"  2025 Internal Audit Management System. All rights reserved. ")],-1))])}}},Wnt=Ft(qnt,[["__scopeId","data-v-889b22fb"]]),Gnt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4 mb-6"},Ynt={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-5 hover:shadow-lg transition-all duration-200"},Knt={class:"flex items-center justify-between"},Xnt={class:"text-3xl font-bold text-green-900 mt-1"},Znt={class:"text-xs text-green-600 mt-1"},Qnt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},Jnt={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-5 hover:shadow-lg transition-all duration-200"},ert={class:"flex items-center justify-between"},trt={class:"text-3xl font-bold text-blue-900 mt-1"},nrt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},rrt={class:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl border border-amber-200 p-5 hover:shadow-lg transition-all duration-200"},irt={class:"flex items-center justify-between"},art={class:"w-full"},srt={class:"text-3xl font-bold text-amber-900 mt-1"},ort={class:"w-full bg-amber-200 rounded-full h-2 mt-2"},lrt={class:"p-3 bg-amber-500 rounded-xl shadow-sm ml-3"},urt={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-5 hover:shadow-lg transition-all duration-200"},drt={class:"flex items-center justify-between"},crt={class:"text-3xl font-bold text-purple-900 mt-1"},frt={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},prt={class:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200 p-5 hover:shadow-lg transition-all duration-200"},hrt={class:"flex items-center justify-between"},mrt={class:"text-3xl font-bold text-gray-900 mt-1"},grt={class:"p-3 bg-gray-500 rounded-xl shadow-sm"},vrt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},yrt={class:"bg-white rounded-xl border border-gray-200 p-5"},brt={class:"space-y-3"},_rt={class:"w-24 text-sm text-gray-600"},xrt={class:"flex-1 mx-3"},wrt={class:"w-full bg-gray-100 rounded-full h-3"},krt={class:"w-12 text-sm font-medium text-gray-900 text-right"},Srt={class:"bg-white rounded-xl border border-gray-200 p-5"},Crt={class:"grid grid-cols-4 gap-3"},Art={class:"text-xs text-gray-500"},Trt={__name:"PlanStats",props:{stats:{type:Object,default:()=>({total:0,active:0,draft:0,approved:0,completed:0,plannedAudits:0,avgUtilization:0,upcoming:0,totalDays:0,byQuarter:{q1:0,q2:0,q3:0,q4:0}})},showDetails:{type:Boolean,default:!0}},setup(t){const e=t,n=J(()=>e.stats.total?Math.round(e.stats.active/e.stats.total*100):0),r=J(()=>{const a=e.stats.total||1;return[{label:"Draft",count:e.stats.draft||0,percentage:(e.stats.draft||0)/a*100,color:"bg-gray-400"},{label:"Approved",count:e.stats.approved||0,percentage:(e.stats.approved||0)/a*100,color:"bg-blue-500"},{label:"Active",count:e.stats.active||0,percentage:(e.stats.active||0)/a*100,color:"bg-green-500"},{label:"Completed",count:e.stats.completed||0,percentage:(e.stats.completed||0)/a*100,color:"bg-purple-500"}]}),i=J(()=>{const a=e.stats.byQuarter||{q1:0,q2:0,q3:0,q4:0};return[{label:"Q1",count:a.q1,color:"text-blue-600"},{label:"Q2",count:a.q2,color:"text-green-600"},{label:"Q3",count:a.q3,color:"text-amber-600"},{label:"Q4",count:a.q4,color:"text-purple-600"}]});return(a,s)=>(T(),P(_e,null,[u("div",Gnt,[u("div",Ynt,[u("div",Knt,[u("div",null,[s[0]||(s[0]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Active Plans",-1)),u("p",Xnt,E(t.stats.active||0),1),u("p",Znt,E(n.value)+"% of total",1)]),u("div",Qnt,[b(y(Qs),{class:"h-7 w-7 text-white"})])])]),u("div",Jnt,[u("div",ert,[u("div",null,[s[1]||(s[1]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Planned Audits",-1)),u("p",trt,E(t.stats.plannedAudits||0),1),s[2]||(s[2]=u("p",{class:"text-xs text-blue-600 mt-1"},"Across all plans",-1))]),u("div",nrt,[b(y(kr),{class:"h-7 w-7 text-white"})])])]),u("div",rrt,[u("div",irt,[u("div",art,[s[3]||(s[3]=u("p",{class:"text-sm font-semibold text-amber-700 uppercase tracking-wide"},"Avg Utilization",-1)),u("p",srt,E(t.stats.avgUtilization||0)+"%",1),u("div",ort,[u("div",{class:"bg-amber-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${Math.min(t.stats.avgUtilization||0,100)}%`})},null,4)])]),u("div",lrt,[b(y(ya),{class:"h-7 w-7 text-white"})])])]),u("div",urt,[u("div",drt,[u("div",null,[s[4]||(s[4]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Upcoming",-1)),u("p",crt,E(t.stats.upcoming||0),1),s[5]||(s[5]=u("p",{class:"text-xs text-purple-600 mt-1"},"Next 30 days",-1))]),u("div",frt,[b(y(er),{class:"h-7 w-7 text-white"})])])]),u("div",prt,[u("div",hrt,[u("div",null,[s[6]||(s[6]=u("p",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Total Days",-1)),u("p",mrt,E(t.stats.totalDays||0),1),s[7]||(s[7]=u("p",{class:"text-xs text-gray-600 mt-1"},"Planned across all",-1))]),u("div",grt,[b(y(Ii),{class:"h-7 w-7 text-white"})])])])]),t.showDetails?(T(),P("div",vrt,[u("div",yrt,[s[8]||(s[8]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Plans by Status",-1)),u("div",brt,[(T(!0),P(_e,null,we(r.value,o=>(T(),P("div",{key:o.label,class:"flex items-center"},[u("div",_rt,E(o.label),1),u("div",xrt,[u("div",wrt,[u("div",{class:fe(["h-3 rounded-full transition-all duration-300",o.color]),style:nt({width:`${o.percentage}%`})},null,6)])]),u("div",krt,E(o.count),1)]))),128))])]),u("div",Srt,[s[9]||(s[9]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Quarterly Audit Distribution",-1)),u("div",Crt,[(T(!0),P(_e,null,we(i.value,o=>(T(),P("div",{key:o.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[u("p",{class:fe(["text-lg font-bold",o.color])},E(o.count),3),u("p",Art,E(o.label),1)]))),128))])])])):ie("",!0)],64))}},Ert={class:"flex flex-wrap items-center gap-3 mb-6"},Mrt={class:"flex-1 min-w-[250px] max-w-md"},$rt={class:"relative"},Drt=["value"],Rrt={class:"w-40"},Prt={class:"w-32"},Irt={class:"w-40"},Ort={class:"flex items-center gap-1 bg-gray-100 rounded-lg p-1"},Lrt={key:0,class:"flex flex-wrap gap-2 mb-4"},Vrt={key:0,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium"},Nrt={key:1,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},jrt={key:2,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium"},Frt={key:3,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium"},Brt={__name:"PlanFilters",props:{searchQuery:{type:String,default:""},statusFilter:{type:String,default:""},yearFilter:{type:[String,Number],default:""},periodFilter:{type:String,default:""},viewMode:{type:String,default:"table"}},emits:["update:searchQuery","update:statusFilter","update:yearFilter","update:periodFilter","update:viewMode"],setup(t,{emit:e}){const n=t,r=e,i=[{label:"All Status",value:""},{label:"Draft",value:"Draft"},{label:"Pending Approval",value:"Pending Approval"},{label:"Approved",value:"Approved"},{label:"Active",value:"Active"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}],a=[{label:"All Periods",value:""},{label:"Annual",value:"Annual"},{label:"Q1",value:"Q1"},{label:"Q2",value:"Q2"},{label:"Q3",value:"Q3"},{label:"Q4",value:"Q4"},{label:"H1",value:"H1"},{label:"H2",value:"H2"}],s=new Date().getFullYear(),o=J(()=>{const c=[{label:"All Years",value:""}];for(let f=s+2;f>=s-3;f--)c.push({label:String(f),value:f});return c}),l=J(()=>n.searchQuery||n.statusFilter||n.yearFilter||n.periodFilter),d=()=>{r("update:searchQuery",""),r("update:statusFilter",""),r("update:yearFilter",""),r("update:periodFilter","")};return(c,f)=>(T(),P(_e,null,[u("div",Ert,[u("div",Mrt,[u("div",$rt,[b(y(Rn),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),u("input",{type:"text",value:t.searchQuery,onInput:f[0]||(f[0]=p=>c.$emit("update:searchQuery",p.target.value)),placeholder:"Search plans...",class:"w-full pl-10 pr-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,40,Drt),t.searchQuery?(T(),P("button",{key:0,onClick:f[1]||(f[1]=p=>c.$emit("update:searchQuery","")),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},[b(y(ht),{class:"h-4 w-4"})])):ie("",!0)])]),u("div",Rrt,[b(y(ge),{type:"select",modelValue:t.statusFilter,"onUpdate:modelValue":f[2]||(f[2]=p=>c.$emit("update:statusFilter",p)),options:i,size:"sm",placeholder:"All Status"},null,8,["modelValue"])]),u("div",Prt,[b(y(ge),{type:"select",modelValue:t.yearFilter,"onUpdate:modelValue":f[3]||(f[3]=p=>c.$emit("update:yearFilter",p)),options:o.value,size:"sm",placeholder:"All Years"},null,8,["modelValue","options"])]),u("div",Irt,[b(y(ge),{type:"select",modelValue:t.periodFilter,"onUpdate:modelValue":f[4]||(f[4]=p=>c.$emit("update:periodFilter",p)),options:a,size:"sm",placeholder:"All Periods"},null,8,["modelValue"])]),u("div",Ort,[u("button",{onClick:f[5]||(f[5]=p=>c.$emit("update:viewMode","table")),class:fe(["p-2 rounded-md transition-all duration-200",t.viewMode==="table"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Table View"},[b(y(YD),{class:"h-4 w-4"})],2),u("button",{onClick:f[6]||(f[6]=p=>c.$emit("update:viewMode","cards")),class:fe(["p-2 rounded-md transition-all duration-200",t.viewMode==="cards"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Card View"},[b(y(GD),{class:"h-4 w-4"})],2),u("button",{onClick:f[7]||(f[7]=p=>c.$emit("update:viewMode","timeline")),class:fe(["p-2 rounded-md transition-all duration-200",t.viewMode==="timeline"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Timeline View"},[b(y(tE),{class:"h-4 w-4"})],2)]),l.value?(T(),P("button",{key:0,onClick:d,class:"flex items-center gap-1.5 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all"},[b(y(hY),{class:"h-4 w-4"}),f[12]||(f[12]=u("span",null,"Clear",-1))])):ie("",!0)]),l.value?(T(),P("div",Lrt,[t.searchQuery?(T(),P("span",Vrt,[b(y(Rn),{class:"h-3 w-3"}),W(' "'+E(t.searchQuery)+'" ',1),u("button",{onClick:f[8]||(f[8]=p=>c.$emit("update:searchQuery","")),class:"hover:text-blue-600"},[b(y(ht),{class:"h-3 w-3"})])])):ie("",!0),t.statusFilter?(T(),P("span",Nrt,[W(" Status: "+E(t.statusFilter)+" ",1),u("button",{onClick:f[9]||(f[9]=p=>c.$emit("update:statusFilter","")),class:"hover:text-green-600"},[b(y(ht),{class:"h-3 w-3"})])])):ie("",!0),t.yearFilter?(T(),P("span",jrt,[W(" Year: "+E(t.yearFilter)+" ",1),u("button",{onClick:f[10]||(f[10]=p=>c.$emit("update:yearFilter","")),class:"hover:text-amber-600"},[b(y(ht),{class:"h-3 w-3"})])])):ie("",!0),t.periodFilter?(T(),P("span",Frt,[W(" Period: "+E(t.periodFilter)+" ",1),u("button",{onClick:f[11]||(f[11]=p=>c.$emit("update:periodFilter","")),class:"hover:text-purple-600"},[b(y(ht),{class:"h-3 w-3"})])])):ie("",!0)])):ie("",!0)],64))}},zrt={class:"child-table"},Urt={class:"flex items-center justify-between mb-4"},Hrt={class:"text-lg font-medium text-gray-900"},qrt={key:0,class:"text-red-500"},Wrt={key:0,class:"text-center py-6 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg"},Grt={class:"text-sm mt-1"},Yrt={key:1,class:"bg-gray-50 rounded-lg overflow-hidden"},Krt={class:"overflow-x-auto"},Xrt={class:"min-w-full"},Zrt={class:"bg-gray-100"},Qrt={class:"divide-y divide-gray-200"},Jrt={key:1},eit={class:"px-4 py-2"},tit={class:"flex items-center space-x-2"},nit={class:"space-y-4"},rit={key:0,class:"field-wrapper"},iit={key:0,class:"block text-sm font-medium text-gray-700 mb-2"},ait={key:0,class:"text-red-500"},sit=["onUpdate:modelValue","onInput"],oit={key:2,class:"mt-1 text-xs text-red-500"},lit={__name:"ChildTable",props:{modelValue:{type:Array,default:()=>[]},title:{type:String,required:!0},modalTitle:{type:String,required:!0},columns:{type:Array,required:!0,validator:t=>t.every(e=>typeof e=="object"&&"key"in e&&"label"in e)},formFields:{type:Array,required:!0,validator:t=>t.every(e=>typeof e=="object"&&"name"in e&&"component"in e)},validate:{type:Function,default:null},emptyMessage:{type:String,default:""},required:{type:Boolean,default:!1},modalSize:{type:String,default:"xl"}},emits:["update:modelValue","row-change"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.modelValue,set:w=>r("update:modelValue",w)}),a=J(()=>n.formFields.filter(w=>{var k;return((k=w.props)==null?void 0:k.type)!=="hidden"})),s=Q(!1),o=Q(null),l=Q({}),d=Q({}),c=()=>{const w={};return n.formFields.forEach(k=>{w[k.name]=k.defaultValue!==void 0?k.defaultValue:""}),w},f=()=>{o.value=null,l.value=c(),d.value={},s.value=!0},p=(w,k)=>{o.value=w,l.value=me({},k),d.value={},s.value=!0},h=()=>{if(n.validate){const k=n.validate(l.value);if(k){d.value=k;return}}d.value={};const w=[...i.value];o.value!==null?w[o.value]=me({},l.value):w.push(me({},l.value)),i.value=w,r("row-change",l.value),s.value=!1},m=w=>{if(confirm(`Are you sure you want to delete this ${n.modalTitle.toLowerCase()}?`)){const k=[...i.value];k.splice(w,1),i.value=k}},g=()=>{s.value=!1,d.value={}},v=(w,k)=>{w.autoPopulate&&k&&k.relatedData&&Object.entries(w.autoPopulate).forEach(([S,C])=>{k.relatedData[S]!==void 0&&(l.value[C]=k.relatedData[S])})},_=(w,k)=>w==null||w===""?"-":k.format?k.format(w):k.type==="currency"?`$${parseFloat(w).toFixed(2)}`:k.type==="percent"?`${parseFloat(w).toFixed(1)}%`:k.type==="number"?parseFloat(w).toFixed(2):k.type==="boolean"?w?"Yes":"No":w,x=w=>{const k=String(w).toLowerCase();return k.includes("completed")||k.includes("active")?"green":k.includes("pending")||k.includes("assigned")?"blue":k.includes("removed")||k.includes("rejected")?"red":"gray"};return(w,k)=>(T(),P("div",zrt,[u("div",Urt,[u("h3",Hrt,[W(E(t.title)+" ",1),t.required?(T(),P("span",qrt,"*")):ie("",!0)]),b(y(Z),{variant:"solid",theme:"green",size:"sm",onClick:f},{default:D(()=>[b(y(tt),{class:"h-3.5 w-3.5 mr-1"}),W(" Add "+E(t.modalTitle),1)]),_:1})]),i.value.length===0?(T(),P("div",Wrt,[u("p",null,E(t.emptyMessage||`No ${t.modalTitle.toLowerCase()}s added yet`),1),u("p",Grt,'Click "Add '+E(t.modalTitle)+'" to add a new record',1)])):(T(),P("div",Yrt,[u("div",Krt,[u("table",Xrt,[u("thead",Zrt,[u("tr",null,[(T(!0),P(_e,null,we(t.columns,S=>(T(),P("th",{key:S.key,class:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase",style:nt({width:S.width})},E(S.label),5))),128)),k[1]||(k[1]=u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase"}," Actions ",-1))])]),u("tbody",Qrt,[(T(!0),P(_e,null,we(i.value,(S,C)=>(T(),P("tr",{key:C,class:"hover:bg-gray-50"},[(T(!0),P(_e,null,we(t.columns,A=>(T(),P("td",{key:A.key,class:"px-4 py-2 text-sm text-gray-900"},[Ye(w.$slots,`column-${A.key}`,{row:S,value:S[A.key]},()=>[A.component==="Badge"?(T(),he(y(Ee),{key:0,theme:x(S[A.key])},{default:D(()=>[W(E(_(S[A.key],A)),1)]),_:2},1032,["theme"])):(T(),P("span",Jrt,E(_(S[A.key],A)),1))],!0)]))),128)),u("td",eit,[u("div",tit,[b(y(Z),{variant:"ghost",size:"sm",onClick:A=>p(C,S)},{default:D(()=>[b(y(vn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",theme:"red",onClick:A=>m(C)},{default:D(()=>[b(y(Zr),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"])])])]))),128))])])])])),b(y(zt),{modelValue:s.value,"onUpdate:modelValue":k[0]||(k[0]=S=>s.value=S),options:{title:o.value!==null?`Edit ${t.modalTitle}`:`Add ${t.modalTitle}`,size:t.modalSize}},{"body-content":D(()=>[u("div",nit,[(T(!0),P(_e,null,we(a.value,S=>{var C,A,M;return T(),P(_e,{key:S.name},[typeof S.component=="string"?(T(),P("div",rit,[S.label&&((C=S.props)==null?void 0:C.type)!=="hidden"?(T(),P("label",iit,[W(E(S.label)+" ",1),(A=S.props)!=null&&A.required?(T(),P("span",ait,"*")):ie("",!0)])):ie("",!0),S.component==="input"?xe((T(),P("input",Ct({key:1,"onUpdate:modelValue":$=>l.value[S.name]=$},{ref_for:!0},S.props,{class:["w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",{"border-red-500":d.value[S.name]}],onInput:$=>v(S,$.target.value)}),null,16,sit)),[[gde,l.value[S.name]]]):ie("",!0),d.value[S.name]?(T(),P("p",oit,E(d.value[S.name]),1)):ie("",!0)])):(T(),he(Lt(S.component),Ct({key:1,modelValue:l.value[S.name],"onUpdate:modelValue":$=>l.value[S.name]=$},{ref_for:!0},S.props,{label:S.label,required:(M=S.props)==null?void 0:M.required,error:d.value[S.name],onChange:$=>v(S,$)}),null,16,["modelValue","onUpdate:modelValue","label","required","error","onChange"]))],64)}),128))])]),actions:D(()=>[b(y(Z),{variant:"ghost",onClick:g},{default:D(()=>[...k[2]||(k[2]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:h,class:"bg-green-600 hover:bg-green-700"},{default:D(()=>[W(" Save "+E(t.modalTitle),1)]),_:1})]),_:1},8,["modelValue","options"])]))}},rs=Ft(lit,[["__scopeId","data-v-bce1afc4"]]),uit={class:"flex items-center space-x-4 mb-6 pb-4 border-b border-gray-200"},dit={class:"text-lg font-semibold text-gray-900"},cit={key:0,class:"text-sm text-gray-500"},fit={key:0,class:"ml-auto px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},Rt={__name:"SectionHeader",props:{title:{type:String,required:!0},description:{type:String,default:""},icon:{type:[String,Object],default:"file-text"},step:{type:[String,Number],default:null},totalSteps:{type:[String,Number],default:8},color:{type:String,default:"blue"}},setup(t){const e=t,n={"file-text":vt,target:Xi,settings:So,calendar:er,users:ya,"book-user":dY,database:ri,folder:WD,search:Rn,"message-circle":iE,"clipboard-check":I0,"refresh-cw":hn,"shield-check":Ti,"file-check":s2,"clipboard-list":kr,"alert-triangle":nn},r=J(()=>typeof e.icon=="object"?Vt(e.icon):n[e.icon]||vt),i={green:{bg:"bg-green-100",icon:"text-green-600"},blue:{bg:"bg-blue-100",icon:"text-blue-600"},purple:{bg:"bg-purple-100",icon:"text-purple-600"},amber:{bg:"bg-amber-100",icon:"text-amber-600"},red:{bg:"bg-red-100",icon:"text-red-600"},yellow:{bg:"bg-yellow-100",icon:"text-yellow-600"},orange:{bg:"bg-orange-100",icon:"text-orange-600"},gray:{bg:"bg-gray-100",icon:"text-gray-600"}},a=J(()=>{var o;return((o=i[e.color])==null?void 0:o.bg)||i.blue.bg}),s=J(()=>{var o;return((o=i[e.color])==null?void 0:o.icon)||i.blue.icon});return(o,l)=>(T(),P("div",uit,[u("div",{class:fe(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",a.value])},[(T(),he(Lt(r.value),{class:fe(["h-5 w-5",s.value])},null,8,["class"]))],2),u("div",null,[u("h3",dit,E(t.title),1),t.description?(T(),P("p",cit,E(t.description),1)):ie("",!0)]),t.step?(T(),P("div",fit," Step "+E(t.step)+" of "+E(t.totalSteps),1)):ie("",!0)]))}};function ZO(t={}){var z;const{sections:e=[],form:n=Jt({}),validateSection:r=null,childTables:i={}}=t,a=Q(((z=e[0])==null?void 0:z.id)||""),s=Jt({}),o=Jt({}),l=Q(!1),d=Q(!1),c=Q(!1);Je(()=>n,()=>{c.value=!0},{deep:!0});const f=F=>{var V;if(((V=o[F])==null?void 0:V.length)>0)return"error";const q=e.find(L=>L.id===F);if(!(q!=null&&q.requiredFields))return"incomplete";const N=q.requiredFields,O=N.filter(L=>{const U=n[L];return Array.isArray(U)?U.length>0:typeof U=="boolean"?!0:U!=null&&U!==""});return O.length===0?"incomplete":O.length===N.length?"complete":"partial"},p=F=>{const q=f(F),N={complete:"bg-green-500 text-white",partial:"bg-yellow-400 text-white",incomplete:"bg-gray-200 text-gray-600",error:"bg-red-500 text-white"};return N[q]||N.incomplete},h=J(()=>e.filter(F=>f(F.id)==="complete").length),m=J(()=>e.length===0?0:Math.round(h.value/e.length*100)),g=J(()=>e.filter(q=>q.required!==!1).every(q=>f(q.id)==="complete")),v=F=>{e.find(q=>q.id===F)&&(a.value=F)},_=()=>{const F=e.findIndex(q=>q.id===a.value);F<e.length-1&&(a.value=e[F+1].id)},x=()=>{const F=e.findIndex(q=>q.id===a.value);F>0&&(a.value=e[F-1].id)},w=J(()=>e.findIndex(F=>F.id===a.value)===0),k=J(()=>e.findIndex(F=>F.id===a.value)===e.length-1),S=()=>{const F=e.find(q=>{const N=f(q.id);return N==="error"||N==="incomplete"});F&&(a.value=F.id)},C=()=>{Object.keys(s).forEach(q=>delete s[q]),Object.keys(o).forEach(q=>delete o[q]);let F=!0;for(const q of e)if(r){const N=r(q.id,n);N&&Object.keys(N).length>0&&(o[q.id]=Object.keys(N),Object.assign(s,N),F=!1)}return F||S(),F},A=F=>{s[F]&&delete s[F]},M=()=>{Object.keys(s).forEach(F=>delete s[F]),Object.keys(o).forEach(F=>delete o[F])},$=()=>{const F=me({},n);for(const[q,N]of Object.entries(i))Array.isArray(F[q])&&(F[q]=F[q].map(O=>je(me({},O),{doctype:N})));return F},R=(F={})=>{var q;Object.keys(n).forEach(N=>{Array.isArray(n[N])?n[N]=[]:typeof n[N]=="object"&&n[N]!==null?n[N]={}:n[N]=""}),Object.assign(n,F),a.value=((q=e[0])==null?void 0:q.id)||"",M(),c.value=!1},I=F=>{F&&(Object.keys(n).forEach(q=>{F[q]!==void 0&&(n[q]=F[q])}),c.value=!1)},B=F=>e.find(q=>q.id===F),j=J(()=>e.findIndex(F=>F.id===a.value)+1);return{activeSection:a,errors:s,sectionErrors:o,isSaving:l,isSavingDraft:d,hasUnsavedChanges:c,completedSections:h,formProgress:m,isFormValid:g,isFirstSection:w,isLastSection:k,currentSectionIndex:j,getSectionStatus:f,getSectionStatusClass:p,navigateToSection:v,nextSection:_,prevSection:x,navigateToFirstError:S,validateForm:C,clearError:A,clearAllErrors:M,prepareFormData:$,resetForm:R,loadFormData:I,getSection:B}}const pit={class:"flex h-[calc(100vh-180px)] overflow-hidden"},hit={class:"w-72 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0"},mit={class:"mb-6"},git={class:"flex items-center justify-between mb-2"},vit={class:"text-sm text-gray-500"},yit={class:"w-full bg-gray-200 rounded-full h-2"},bit={class:"space-y-1"},_it=["onClick"],xit={class:"flex-1 text-left"},wit={key:0,class:"ml-2 flex-shrink-0"},kit={key:1,class:"ml-2 flex-shrink-0"},Sit={class:"mt-6 pt-4 border-t border-gray-200"},Cit={class:"flex items-center text-sm text-gray-500"},Ait={key:0},Tit={key:1},Eit={class:"flex-1 overflow-y-auto p-6"},Mit={class:"space-y-6"},$it={class:"grid grid-cols-2 gap-6"},Dit={class:"grid grid-cols-3 gap-6"},Rit={class:"grid grid-cols-2 gap-6"},Pit={class:"space-y-6"},Iit={class:"space-y-6"},Oit={class:"bg-blue-50 rounded-lg p-4 mb-6"},Lit={class:"grid grid-cols-3 gap-4"},Vit={class:"text-center"},Nit={class:"text-2xl font-bold text-blue-700"},jit={class:"text-center"},Fit={class:"text-2xl font-bold text-green-700"},Bit={class:"text-center"},zit={class:"grid grid-cols-3 gap-6"},Uit={class:"space-y-6"},Hit={key:0,class:"bg-gray-50 rounded-lg p-4"},qit={class:"grid grid-cols-4 gap-4"},Wit={class:"text-center p-3 bg-white rounded-lg border border-gray-200"},Git={class:"text-xl font-bold text-gray-900"},Yit={class:"text-center p-3 bg-white rounded-lg border border-gray-200"},Kit={class:"text-xl font-bold text-red-600"},Xit={class:"text-center p-3 bg-white rounded-lg border border-gray-200"},Zit={class:"text-xl font-bold text-blue-600"},Qit={class:"text-center p-3 bg-white rounded-lg border border-gray-200"},Jit={class:"text-xl font-bold text-green-600"},eat={class:"space-y-6"},tat={class:"space-y-6"},nat={class:"space-y-6"},rat={class:"space-y-6"},iat={class:"flex items-center justify-between w-full"},aat={class:"flex items-center space-x-2"},sat={class:"flex items-center space-x-3"},oat={__name:"AnnualPlanForm",props:{modelValue:{type:Boolean,default:!1},plan:{type:Object,default:null}},emits:["update:modelValue","saved","close"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.modelValue,set:U=>r("update:modelValue",U)}),a=J(()=>{var U;return!!((U=n.plan)!=null&&U.name)}),s=Q(!1),o=Q(null),l={basic:{label:"Basic Information",icon:vt},overview:{label:"Plan Overview",icon:Xi},resources:{label:"Resource Summary",icon:ya},audits:{label:"Planned Audits",icon:kr},budget:{label:"Budget Allocation",icon:Q1},risk:{label:"Risk Prioritization",icon:nn},contingency:{label:"Contingency & Monitoring",icon:Ti},additional:{label:"Additional Information",icon:s2}},{activeSection:d,formProgress:c,setActiveSection:f,getSectionStatus:p,validateForm:h,prepareFormData:m}=ZO(l),g=Jt({plan_id:"",plan_year:new Date().getFullYear(),plan_period:"Annual",prepared_by:"",prepared_date:"",approved_by:"",approved_date:"",status:"Draft",plan_objectives:"",scope_and_coverage:"",key_assumptions:"",total_available_days:null,total_planned_days:null,utilization_percentage:null,resource_allocation:[],planned_audits:[],budget_allocation:[],risk_based_prioritization:[],contingency_plan:"",monitoring_and_reporting:"",notes:"",attachments:""}),v=[{label:"Annual",value:"Annual"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Quarterly",value:"Quarterly"}],_=[{label:"Draft",value:"Draft"},{label:"Submitted for Approval",value:"Submitted for Approval"},{label:"Approved",value:"Approved"},{label:"Rejected",value:"Rejected"},{label:"Active",value:"Active"},{label:"Completed",value:"Completed"}],x=Q([]),w=[{key:"auditor",label:"Auditor",width:"150px"},{key:"role",label:"Role",width:"120px"},{key:"available_days",label:"Available",width:"80px"},{key:"allocated_days",label:"Allocated",width:"80px"},{key:"utilization_percentage",label:"Util %",width:"80px"}],k=[{key:"auditor",label:"Auditor",type:"link",doctype:"User",required:!0},{key:"auditor_name",label:"Auditor Name",type:"text",readOnly:!0},{key:"role",label:"Role",type:"select",required:!0,options:[{label:"Lead Auditor",value:"Lead Auditor"},{label:"Senior Auditor",value:"Senior Auditor"},{label:"Auditor",value:"Auditor"},{label:"Trainee",value:"Trainee"},{label:"Specialist",value:"Specialist"}]},{key:"available_days",label:"Available Days",type:"number",required:!0},{key:"allocated_days",label:"Allocated Days",type:"number"},{key:"utilization_percentage",label:"Utilization %",type:"number",readOnly:!0},{key:"skills_expertise",label:"Skills/Expertise",type:"textarea"},{key:"location",label:"Location",type:"select",options:[{label:"Head Office",value:"Head Office"},{label:"Branch 1",value:"Branch 1"},{label:"Branch 2",value:"Branch 2"},{label:"Remote",value:"Remote"}]},{key:"cost_rate_per_day",label:"Cost Rate/Day",type:"currency"},{key:"total_cost",label:"Total Cost",type:"currency",readOnly:!0}],S=[{key:"audit_universe",label:"Audit Universe",width:"180px"},{key:"audit_type",label:"Type",width:"100px"},{key:"priority",label:"Priority",width:"80px",component:"Badge"},{key:"planned_days",label:"Days",width:"60px"},{key:"planned_start_date",label:"Start",width:"100px"}],C=[{key:"audit_universe",label:"Audit Universe",type:"link",doctype:"Audit Universe",required:!0},{key:"audit_type",label:"Audit Type",type:"select",required:!0,options:[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Integrated",value:"Integrated"},{label:"Special Investigation",value:"Special Investigation"},{label:"Follow-up",value:"Follow-up"}]},{key:"priority",label:"Priority",type:"select",required:!0,options:[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}]},{key:"planned_start_date",label:"Planned Start Date",type:"date",required:!0},{key:"planned_end_date",label:"Planned End Date",type:"date",required:!0},{key:"planned_days",label:"Planned Days",type:"number",required:!0},{key:"lead_auditor",label:"Lead Auditor",type:"link",doctype:"User",required:!0},{key:"team_members",label:"Team Members",type:"textarea"},{key:"objectives",label:"Objectives",type:"textarea"},{key:"scope",label:"Scope",type:"textarea"},{key:"risk_assessment_reference",label:"Risk Assessment",type:"link",doctype:"Risk Assessment"},{key:"budget_allocated",label:"Budget Allocated",type:"currency"}],A=[{key:"budget_category",label:"Category",width:"180px"},{key:"planned_amount",label:"Planned",width:"120px"},{key:"actual_amount",label:"Actual",width:"120px"},{key:"variance",label:"Variance",width:"100px"}],M=[{key:"budget_category",label:"Budget Category",type:"select",required:!0,options:[{label:"Personnel Costs",value:"Personnel Costs"},{label:"Travel & Accommodation",value:"Travel & Accommodation"},{label:"Training & Development",value:"Training & Development"},{label:"Technology & Tools",value:"Technology & Tools"},{label:"Consulting Services",value:"Consulting Services"},{label:"Office Supplies",value:"Office Supplies"},{label:"Miscellaneous",value:"Miscellaneous"},{label:"Contingency",value:"Contingency"}]},{key:"description",label:"Description",type:"textarea"},{key:"planned_amount",label:"Planned Amount",type:"currency",required:!0},{key:"actual_amount",label:"Actual Amount",type:"currency"},{key:"variance",label:"Variance",type:"currency",readOnly:!0},{key:"variance_percentage",label:"Variance %",type:"number",readOnly:!0},{key:"budget_type",label:"Budget Type",type:"select",options:[{label:"Fixed",value:"Fixed"},{label:"Variable",value:"Variable"},{label:"Contingency",value:"Contingency"}]},{key:"allocation_basis",label:"Allocation Basis",type:"select",options:[{label:"Per Audit",value:"Per Audit"},{label:"Per Day",value:"Per Day"},{label:"Percentage of Total",value:"Percentage of Total"},{label:"Fixed Amount",value:"Fixed Amount"}]},{key:"notes",label:"Notes",type:"textarea"}],$=[{key:"audit_universe",label:"Audit Universe",width:"180px"},{key:"risk_rating",label:"Risk Rating",width:"100px",component:"Badge"},{key:"priority_level",label:"Priority",width:"100px",component:"Badge"},{key:"planned_audit_timing",label:"Timing",width:"80px"}],R=[{key:"audit_universe",label:"Audit Universe",type:"link",doctype:"Audit Universe",required:!0},{key:"risk_rating",label:"Risk Rating",type:"select",required:!0,options:[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}]},{key:"risk_score",label:"Risk Score",type:"number",required:!0},{key:"last_assessment_date",label:"Last Assessment Date",type:"date"},{key:"audit_frequency",label:"Audit Frequency",type:"select",options:[{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"Bi-Annual",value:"Bi-Annual"},{label:"Tri-Annual",value:"Tri-Annual"},{label:"As Needed",value:"As Needed"}]},{key:"priority_level",label:"Priority Level",type:"select",required:!0,options:[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}]},{key:"justification",label:"Justification",type:"textarea",required:!0},{key:"planned_audit_timing",label:"Planned Timing",type:"select",options:[{label:"Q1",value:"Q1"},{label:"Q2",value:"Q2"},{label:"Q3",value:"Q3"},{label:"Q4",value:"Q4"},{label:"H1",value:"H1"},{label:"H2",value:"H2"},{label:"As Required",value:"As Required"}]},{key:"resource_intensity",label:"Resource Intensity",type:"select",options:[{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}]}],I=J(()=>{const U=g.utilization_percentage||0;return U>=90?"text-red-600":U>=75?"text-yellow-600":"text-green-600"}),B=J(()=>g.planned_audits.filter(U=>U.priority==="Critical"||U.priority==="High").length),j=J(()=>g.planned_audits.reduce((U,G)=>U+(G.planned_days||0),0)),z=J(()=>g.planned_audits.reduce((G,X)=>G+(X.budget_allocated||0),0).toLocaleString());Je([()=>g.total_available_days,()=>g.total_planned_days],()=>{g.total_available_days>0&&(g.utilization_percentage=Math.round(g.total_planned_days/g.total_available_days*100))});const F=()=>{const U=Object.keys(l),G=U.indexOf(d.value);G>0&&f(U[G-1])},q=()=>{const U=Object.keys(l),G=U.indexOf(d.value);G<U.length-1&&f(U[G+1])},N=U=>{if(!U)return"";const G=Math.floor((new Date-new Date(U))/1e3);if(G<60)return"just now";const X=Math.floor(G/60);if(X<60)return`${X}m ago`;const re=Math.floor(X/60);return re<24?`${re}h ago`:`${Math.floor(re/24)}d ago`},O=()=>le(this,null,function*(){try{o.value=new Date}catch(U){console.error("Failed to save draft:",U)}}),V=()=>le(this,null,function*(){const U=h(g);if(!U.isValid){console.error("Validation errors:",U.errors);return}s.value=!0;try{const G=m(g,{planned_audits:"Annual Audit Plan Item",resource_allocation:"Annual Audit Plan Resource",budget_allocation:"Annual Audit Plan Budget",risk_based_prioritization:"Annual Audit Plan Risk Priority"});r("saved",G),L()}catch(G){console.error("Failed to save plan:",G)}finally{s.value=!1}}),L=()=>{i.value=!1,r("close")};return Je(()=>n.plan,U=>{U&&Object.keys(g).forEach(G=>{U[G]!==void 0&&(g[G]=U[G])})},{immediate:!0,deep:!0}),(U,G)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":G[22]||(G[22]=X=>i.value=X),options:{size:"7xl",title:a.value?"Edit Annual Audit Plan":"New Annual Audit Plan"}},{body:D(()=>[u("div",pit,[u("div",hit,[u("div",mit,[u("div",git,[G[23]||(G[23]=u("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),u("span",vit,E(y(c))+"%",1)]),u("div",yit,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${y(c)}%`})},null,4)])]),u("nav",bit,[(T(),P(_e,null,we(l,(X,re)=>u("button",{key:re,onClick:ee=>y(f)(re),class:fe(["w-full flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors",[y(d)===re?"bg-blue-100 text-blue-700 border-l-4 border-blue-600":"text-gray-600 hover:bg-gray-100"]])},[(T(),he(Lt(X.icon),{class:fe(["h-5 w-5 mr-3 flex-shrink-0",y(d)===re?"text-blue-600":"text-gray-400"])},null,8,["class"])),u("span",xit,E(X.label),1),y(p)(re)==="complete"?(T(),P("span",wit,[b(y(Qs),{class:"h-5 w-5 text-green-500"})])):y(p)(re)==="partial"?(T(),P("span",kit,[b(y(zr),{class:"h-5 w-5 text-yellow-500"})])):ie("",!0)],10,_it)),64))]),u("div",Sit,[u("div",Cit,[b(y(qD),{class:"h-4 w-4 mr-2"}),o.value?(T(),P("span",Ait,"Saved "+E(N(o.value)),1)):(T(),P("span",Tit,"Not saved yet"))])])]),u("div",Eit,[xe(u("div",Mit,[b(Rt,{title:"Basic Information",description:"Essential plan identification and classification",icon:"file-text"}),u("div",$it,[b(y(ge),{label:"Plan ID",modelValue:g.plan_id,"onUpdate:modelValue":G[0]||(G[0]=X=>g.plan_id=X),type:"text",placeholder:"e.g., AAP-2025-001",required:!0},null,8,["modelValue"]),b(y(ge),{label:"Plan Year",modelValue:g.plan_year,"onUpdate:modelValue":G[1]||(G[1]=X=>g.plan_year=X),type:"number",placeholder:new Date().getFullYear().toString(),required:!0},null,8,["modelValue","placeholder"])]),u("div",Dit,[b(y(ge),{label:"Plan Period",modelValue:g.plan_period,"onUpdate:modelValue":G[2]||(G[2]=X=>g.plan_period=X),type:"select",options:v,required:!0},null,8,["modelValue"]),b(y(ge),{label:"Status",modelValue:g.status,"onUpdate:modelValue":G[3]||(G[3]=X=>g.status=X),type:"select",options:_},null,8,["modelValue"]),b(y(ge),{label:"Prepared Date",modelValue:g.prepared_date,"onUpdate:modelValue":G[4]||(G[4]=X=>g.prepared_date=X),type:"date",required:!0},null,8,["modelValue"])]),u("div",Rit,[b(y(ge),{label:"Prepared By",modelValue:g.prepared_by,"onUpdate:modelValue":G[5]||(G[5]=X=>g.prepared_by=X),type:"autocomplete",options:x.value,placeholder:"Select preparer",required:!0},null,8,["modelValue","options"]),b(y(ge),{label:"Approved By",modelValue:g.approved_by,"onUpdate:modelValue":G[6]||(G[6]=X=>g.approved_by=X),type:"autocomplete",options:x.value,placeholder:"Select approver"},null,8,["modelValue","options"])]),b(y(ge),{label:"Approved Date",modelValue:g.approved_date,"onUpdate:modelValue":G[7]||(G[7]=X=>g.approved_date=X),type:"date"},null,8,["modelValue"])],512),[[ot,y(d)==="basic"]]),xe(u("div",Pit,[b(Rt,{title:"Plan Overview",description:"Objectives, scope, and key assumptions for the audit plan",icon:"target"}),u("div",null,[G[24]||(G[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Plan Objectives "),u("span",{class:"text-red-500"},"*")],-1)),G[25]||(G[25]=u("p",{class:"text-xs text-gray-500 mb-2"},"Define the main objectives of this annual audit plan",-1)),b(y(an),{modelValue:g.plan_objectives,"onUpdate:modelValue":G[8]||(G[8]=X=>g.plan_objectives=X),placeholder:"Enter the key objectives for this annual audit plan...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[G[26]||(G[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Scope and Coverage "),u("span",{class:"text-red-500"},"*")],-1)),G[27]||(G[27]=u("p",{class:"text-xs text-gray-500 mb-2"},"Describe the scope and coverage of planned audits",-1)),b(y(an),{modelValue:g.scope_and_coverage,"onUpdate:modelValue":G[9]||(G[9]=X=>g.scope_and_coverage=X),placeholder:"Describe the scope and coverage areas...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[G[28]||(G[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Key Assumptions ",-1)),G[29]||(G[29]=u("p",{class:"text-xs text-gray-500 mb-2"},"List the key assumptions underlying this plan",-1)),b(y(an),{modelValue:g.key_assumptions,"onUpdate:modelValue":G[10]||(G[10]=X=>g.key_assumptions=X),placeholder:"List the key assumptions for this plan...",editorClass:"min-h-[120px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])],512),[[ot,y(d)==="overview"]]),xe(u("div",Iit,[b(Rt,{title:"Resource Summary",description:"Resource availability and utilization planning",icon:"users"}),u("div",Oit,[G[33]||(G[33]=u("h4",{class:"text-sm font-medium text-blue-900 mb-3"},"Resource Overview",-1)),u("div",Lit,[u("div",Vit,[u("p",Nit,E(g.total_available_days||0),1),G[30]||(G[30]=u("p",{class:"text-xs text-blue-600"},"Available Days",-1))]),u("div",jit,[u("p",Fit,E(g.total_planned_days||0),1),G[31]||(G[31]=u("p",{class:"text-xs text-green-600"},"Planned Days",-1))]),u("div",Bit,[u("p",{class:fe(["text-2xl font-bold",I.value])},E(g.utilization_percentage||0)+"%",3),G[32]||(G[32]=u("p",{class:"text-xs text-gray-600"},"Utilization",-1))])])]),u("div",zit,[b(y(ge),{label:"Total Available Days",modelValue:g.total_available_days,"onUpdate:modelValue":G[11]||(G[11]=X=>g.total_available_days=X),type:"number",placeholder:"0"},null,8,["modelValue"]),b(y(ge),{label:"Total Planned Days",modelValue:g.total_planned_days,"onUpdate:modelValue":G[12]||(G[12]=X=>g.total_planned_days=X),type:"number",placeholder:"0"},null,8,["modelValue"]),b(y(ge),{label:"Utilization %",modelValue:g.utilization_percentage,"onUpdate:modelValue":G[13]||(G[13]=X=>g.utilization_percentage=X),type:"number",placeholder:"0",disabled:!0},null,8,["modelValue"])]),b(rs,{modelValue:g.resource_allocation,"onUpdate:modelValue":G[14]||(G[14]=X=>g.resource_allocation=X),title:"Resource Allocation",columns:w,fields:k,modalTitle:"Resource",emptyMessage:"No resources allocated yet",doctype:"Annual Audit Plan Resource"},null,8,["modelValue"])],512),[[ot,y(d)==="resources"]]),xe(u("div",Uit,[b(Rt,{title:"Planned Audits",description:"Schedule and plan individual audit engagements",icon:"clipboard-list"}),b(rs,{modelValue:g.planned_audits,"onUpdate:modelValue":G[15]||(G[15]=X=>g.planned_audits=X),title:"Planned Audits",columns:S,fields:C,modalTitle:"Planned Audit",emptyMessage:"No audits planned yet",doctype:"Annual Audit Plan Item",required:!0},null,8,["modelValue"]),g.planned_audits.length>0?(T(),P("div",Hit,[G[38]||(G[38]=u("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Audit Summary",-1)),u("div",qit,[u("div",Wit,[u("p",Git,E(g.planned_audits.length),1),G[34]||(G[34]=u("p",{class:"text-xs text-gray-500"},"Total Audits",-1))]),u("div",Yit,[u("p",Kit,E(B.value),1),G[35]||(G[35]=u("p",{class:"text-xs text-gray-500"},"Critical/High",-1))]),u("div",Xit,[u("p",Zit,E(j.value),1),G[36]||(G[36]=u("p",{class:"text-xs text-gray-500"},"Total Days",-1))]),u("div",Qit,[u("p",Jit,E(z.value),1),G[37]||(G[37]=u("p",{class:"text-xs text-gray-500"},"Budget",-1))])])])):ie("",!0)],512),[[ot,y(d)==="audits"]]),xe(u("div",eat,[b(Rt,{title:"Budget Allocation",description:"Plan and allocate budget across different categories",icon:"calculator"}),b(rs,{modelValue:g.budget_allocation,"onUpdate:modelValue":G[16]||(G[16]=X=>g.budget_allocation=X),title:"Budget Items",columns:A,fields:M,modalTitle:"Budget Item",emptyMessage:"No budget items added yet",doctype:"Annual Audit Plan Budget"},null,8,["modelValue"])],512),[[ot,y(d)==="budget"]]),xe(u("div",tat,[b(Rt,{title:"Risk-Based Prioritization",description:"Prioritize audit areas based on risk assessment",icon:"alert-triangle"}),b(rs,{modelValue:g.risk_based_prioritization,"onUpdate:modelValue":G[17]||(G[17]=X=>g.risk_based_prioritization=X),title:"Risk Priorities",columns:$,fields:R,modalTitle:"Risk Priority",emptyMessage:"No risk priorities defined yet",doctype:"Annual Audit Plan Risk Priority"},null,8,["modelValue"])],512),[[ot,y(d)==="risk"]]),xe(u("div",nat,[b(Rt,{title:"Contingency & Monitoring",description:"Contingency planning and progress monitoring approach",icon:"shield-check"}),u("div",null,[G[39]||(G[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Contingency Plan ",-1)),G[40]||(G[40]=u("p",{class:"text-xs text-gray-500 mb-2"},"Describe contingency plans for unexpected situations",-1)),b(y(an),{modelValue:g.contingency_plan,"onUpdate:modelValue":G[18]||(G[18]=X=>g.contingency_plan=X),placeholder:"Describe contingency plans and backup strategies...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[G[41]||(G[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Monitoring and Reporting ",-1)),G[42]||(G[42]=u("p",{class:"text-xs text-gray-500 mb-2"},"Define how progress will be monitored and reported",-1)),b(y(an),{modelValue:g.monitoring_and_reporting,"onUpdate:modelValue":G[19]||(G[19]=X=>g.monitoring_and_reporting=X),placeholder:"Describe the monitoring and reporting approach...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])],512),[[ot,y(d)==="contingency"]]),xe(u("div",rat,[b(Rt,{title:"Additional Information",description:"Notes, attachments, and supplementary details",icon:"file-check"}),u("div",null,[G[43]||(G[43]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notes ",-1)),b(y(an),{modelValue:g.notes,"onUpdate:modelValue":G[20]||(G[20]=X=>g.notes=X),placeholder:"Add any additional notes or comments...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),b(y(ge),{label:"Attachments",modelValue:g.attachments,"onUpdate:modelValue":G[21]||(G[21]=X=>g.attachments=X),type:"file",placeholder:"Upload supporting documents"},null,8,["modelValue"])],512),[[ot,y(d)==="additional"]])])])]),actions:D(()=>[u("div",iat,[u("div",aat,[b(y(Z),{variant:"subtle",onClick:F,disabled:y(d)==="basic"},{default:D(()=>[b(y(pr),{class:"h-4 w-4 mr-1"}),G[44]||(G[44]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(y(Z),{variant:"subtle",onClick:q,disabled:y(d)==="additional"},{default:D(()=>[G[45]||(G[45]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4 ml-1"})]),_:1},8,["disabled"])]),u("div",sat,[b(y(Z),{variant:"subtle",onClick:O},{default:D(()=>[...G[46]||(G[46]=[W(" Save as Draft ",-1)])]),_:1}),b(y(Z),{variant:"outline",onClick:L},{default:D(()=>[...G[47]||(G[47]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{variant:"solid",theme:"blue",onClick:V,loading:s.value},{default:D(()=>[W(E(a.value?"Update Plan":"Create Plan"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","options"]))}},lat=Ft(oat,[["__scopeId","data-v-be50c96d"]]),Bo=Ul("audit",()=>{const t=Q(null),e=Q(null),n=Q([]),r=Q([]),i=Q(new Map),a=Q([]),s=Q([]),o=Q([]),l=Q([]),d=Q([]),c=Q([]),f=J(()=>r.value.filter(Pe=>Pe.status==="in_progress"||Pe.status==="active")),p=J(()=>n.value.filter(Pe=>Pe.risk_rating==="Critical")),h=J(()=>{const Pe=new Date;return n.value.filter(Ue=>Ue.due_date?new Date(Ue.due_date)<Pe&&Ue.status!=="Closed":!1)}),m=J(()=>{const Pe={};return n.value.forEach(Ue=>{Pe[Ue.status]=(Pe[Ue.status]||0)+1}),Pe}),g=J(()=>a.value.filter(Pe=>Pe.status==="Active"||Pe.status==="Approved")),v=J(()=>{const Pe=[];return a.value.forEach(Ue=>{Ue.planned_audits&&Pe.push(...Ue.planned_audits)}),Pe}),_=J(()=>{const Pe=new Date;return o.value.filter(Ue=>new Date(Ue.planned_start_date)>Pe&&Ue.status==="Planned").sort((Ue,Ot)=>new Date(Ue.planned_start_date)-new Date(Ot.planned_start_date))}),x=J(()=>s.value.filter(Pe=>Pe.is_template)),w=J(()=>c.value.filter(Pe=>Pe.overall_risk_rating==="Critical")),k=J(()=>c.value.filter(Pe=>Pe.overall_risk_rating==="High")),S=J(()=>{const Pe={};return c.value.forEach(Ue=>{Pe[Ue.approval_status]=(Pe[Ue.approval_status]||0)+1}),Pe}),C=Pe=>{t.value=Pe},A=Pe=>{e.value=Pe},M=Pe=>{n.value=Pe,Pe.forEach(Ue=>{i.value.set(Ue.name,Ue)})},$=Pe=>{r.value=Pe},R=Pe=>{n.value.push(Pe),i.value.set(Pe.name,Pe)},I=Pe=>{r.value.push(Pe)},B=(Pe,Ue)=>{const Ot=n.value.findIndex(wi=>wi.name===Pe);Ot!==-1&&(n.value[Ot]=me(me({},n.value[Ot]),Ue),i.value.set(Pe,n.value[Ot]))},j=(Pe,Ue)=>{const Ot=r.value.findIndex(wi=>wi.name===Pe);Ot!==-1&&(r.value[Ot]=me(me({},r.value[Ot]),Ue))},z=Pe=>{n.value=n.value.filter(Ue=>Ue.name!==Pe),i.value.delete(Pe)},F=Pe=>{r.value=r.value.filter(Ue=>Ue.name!==Pe)},q=Pe=>i.value.get(Pe),N=Pe=>r.value.find(Ue=>Ue.name===Pe),O=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Audit Engagement",fields:["name","engagement_id","engagement_title","status","audit_type","period_start","period_end","creation","modified"],limit_page_length:1e3}}).fetch();$(Pe||[])}catch(Pe){console.error("Error fetching engagements:",Pe),$([])}}),V=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Audit Finding",fields:["name","finding_id","finding_title","risk_rating","creation","modified","engagement_reference"],limit_page_length:1e3}}).fetch();M(Pe||[])}catch(Pe){console.error("Error fetching findings:",Pe),M([])}}),L=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Annual Audit Plan",fields:["name","plan_id","plan_year","status","total_available_days","total_planned_days","utilization_percentage","creation","modified"],limit_page_length:1e3}}).fetch();a.value=Pe||[]}catch(Pe){console.error("Error fetching annual plans:",Pe),a.value=[]}}),U=Pe=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Annual Audit Plan",name:Pe}}).fetch()}catch(Ue){return console.error("Error fetching annual plan details:",Ue),null}}),G=Pe=>le(void 0,null,function*(){try{const Ue=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Annual Audit Plan"},Pe)}}).fetch();return yield L(),Ue}catch(Ue){throw console.error("Error creating annual plan:",Ue),Ue}}),X=(Pe,Ue)=>le(void 0,null,function*(){try{const Ot=yield Ie({url:"frappe.client.set_value",params:{doctype:"Annual Audit Plan",name:Pe,fieldname:Ue}}).fetch();return yield L(),Ot}catch(Ot){throw console.error("Error updating annual plan:",Ot),Ot}}),re=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Audit Program",fields:["name","program_id","program_name","audit_type","is_template","engagement_reference","total_procedures","completed_procedures","completion_percent","creation","modified"],limit_page_length:1e3}}).fetch();s.value=Pe||[]}catch(Pe){console.error("Error fetching audit programs:",Pe),s.value=[]}}),ee=Pe=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Audit Program",name:Pe}}).fetch()}catch(Ue){return console.error("Error fetching audit program details:",Ue),null}}),de=Pe=>le(void 0,null,function*(){try{const Ue=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Audit Program"},Pe)}}).fetch();return yield re(),Ue}catch(Ue){throw console.error("Error creating audit program:",Ue),Ue}}),se=(Pe,Ue)=>le(void 0,null,function*(){try{const Ot=yield Ie({url:"frappe.client.set_value",params:{doctype:"Audit Program",name:Pe,fieldname:Ue}}).fetch();return yield re(),Ot}catch(Ot){throw console.error("Error updating audit program:",Ot),Ot}}),te=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Audit Calendar",fields:["name","calendar_id","audit_universe","audit_type","status","planned_start_date","planned_end_date","actual_start_date","actual_end_date","lead_auditor","progress_percentage","creation","modified"],limit_page_length:1e3}}).fetch();o.value=Pe||[]}catch(Pe){console.error("Error fetching audit calendar:",Pe),o.value=[]}}),ne=Pe=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Audit Calendar",name:Pe}}).fetch()}catch(Ue){return console.error("Error fetching audit calendar details:",Ue),null}}),ce=Pe=>le(void 0,null,function*(){try{const Ue=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Audit Calendar"},Pe)}}).fetch();return yield te(),Ue}catch(Ue){throw console.error("Error creating audit calendar entry:",Ue),Ue}}),ve=(Pe,Ue)=>le(void 0,null,function*(){try{const Ot=yield Ie({url:"frappe.client.set_value",params:{doctype:"Audit Calendar",name:Pe,fieldname:Ue}}).fetch();return yield te(),Ot}catch(Ot){throw console.error("Error updating audit calendar entry:",Ot),Ot}}),Y=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Audit Procedure",fields:["name","procedure_id","procedure_name","procedure_type","risk_area","estimated_hours","status","program_reference","creation","modified"],limit_page_length:1e3}}).fetch();l.value=Pe||[]}catch(Pe){console.error("Error fetching audit procedures:",Pe),l.value=[]}}),K=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Audit Universe",fields:["name","universe_id","auditable_entity","entity_type","department","location","process_owner","inherent_risk_rating","last_audit_date","next_scheduled_audit","is_active","creation","modified"],limit_page_length:1e3}}).fetch();d.value=Pe||[]}catch(Pe){console.error("Error fetching audit universe:",Pe),d.value=[]}}),H=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Risk Assessment",fields:["name","assessment_id","assessment_name","assessment_period","assessment_date","fiscal_year","status","prepared_by","approved_by","approval_date","creation","modified"],limit_page_length:1e3}}).fetch();c.value=Pe||[]}catch(Pe){console.error("Error fetching risk assessments:",Pe),c.value=[]}}),ae=Pe=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Risk Assessment",name:Pe}}).fetch()}catch(Ue){return console.error("Error fetching risk assessment details:",Ue),null}}),be=Pe=>le(void 0,null,function*(){try{const Ue=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Risk Assessment"},Pe)}}).fetch();return yield H(),Ue}catch(Ue){throw console.error("Error creating risk assessment:",Ue),Ue}}),ue=(Pe,Ue)=>le(void 0,null,function*(){try{const Ot=yield Ie({url:"frappe.client.set_value",params:{doctype:"Risk Assessment",name:Pe,fieldname:Ue}}).fetch();return yield H(),Ot}catch(Ot){throw console.error("Error updating risk assessment:",Ot),Ot}}),pe=Q([]),ye=Q([]),Me=Q([]),Te=Q([]),qe=Q([]),We=Q([]),at=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Working Paper",fields:["name","working_paper_id","wp_title","wp_reference_no","wp_type","engagement_reference","procedure_reference","prepared_by","preparation_date","reviewed_by","review_date","review_status","work_performed","objective","scope","creation","modified"],limit_page_length:1e3}}).fetch();pe.value=Pe||[]}catch(Pe){console.error("Error fetching working papers:",Pe),pe.value=[]}}),st=Pe=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Working Paper",name:Pe}}).fetch()}catch(Ue){return console.error("Error fetching working paper details:",Ue),null}}),Ve=Pe=>le(void 0,null,function*(){try{const Ue=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Working Paper"},Pe)}}).fetch();return yield at(),Ue}catch(Ue){throw console.error("Error creating working paper:",Ue),Ue}}),De=(Pe,Ue)=>le(void 0,null,function*(){try{const Ot=yield Ie({url:"frappe.client.set_value",params:{doctype:"Working Paper",name:Pe,fieldname:Ue}}).fetch();return yield at(),Ot}catch(Ot){throw console.error("Error updating working paper:",Ot),Ot}}),Le=Pe=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Audit Finding",name:Pe}}).fetch()}catch(Ue){return console.error("Error fetching finding details:",Ue),null}}),Re=Pe=>le(void 0,null,function*(){try{const Ue=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Audit Finding"},Pe)}}).fetch();return yield V(),Ue}catch(Ue){throw console.error("Error creating finding:",Ue),Ue}}),Se=(Pe,Ue)=>le(void 0,null,function*(){try{const Ot=yield Ie({url:"frappe.client.set_value",params:{doctype:"Audit Finding",name:Pe,fieldname:Ue}}).fetch();return yield V(),Ot}catch(Ot){throw console.error("Error updating finding:",Ot),Ot}}),Ge=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Follow-up Tracker",fields:["name","tracker_id","audit_finding","finding_title","status","follow_up_type","start_date","next_due_date","frequency","responsible_person","responsible_department","last_follow_up_date","current_status","progress_rating","creation","modified"],limit_page_length:1e3}}).fetch();ye.value=Pe||[]}catch(Pe){console.error("Error fetching follow-up trackers:",Pe),ye.value=[]}}),en=Pe=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Follow-up Tracker",name:Pe}}).fetch()}catch(Ue){return console.error("Error fetching follow-up tracker details:",Ue),null}}),Ln=Pe=>le(void 0,null,function*(){try{const Ue=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Follow-up Tracker"},Pe)}}).fetch();return yield Ge(),Ue}catch(Ue){throw console.error("Error creating follow-up tracker:",Ue),Ue}}),Ne=(Pe,Ue)=>le(void 0,null,function*(){try{const Ot=yield Ie({url:"frappe.client.set_value",params:{doctype:"Follow-up Tracker",name:Pe,fieldname:Ue}}).fetch();return yield Ge(),Ot}catch(Ot){throw console.error("Error updating follow-up tracker:",Ot),Ot}}),$e=()=>le(void 0,null,function*(){try{const Pe=yield Ie({url:"frappe.client.get_list",params:{doctype:"Corrective Action Plan",fields:["name","plan_id","audit_finding","title","status","priority","start_date","target_completion_date","actual_completion_date","responsible_person","responsible_department","overall_progress","completion_percentage","creation","modified"],limit_page_length:1e3}}).fetch();Me.value=Pe||[]}catch(Pe){console.error("Error fetching corrective action plans:",Pe),Me.value=[]}});return{currentEngagement:t,auditPlan:e,findings:n,engagements:r,findingsCache:i,annualPlans:a,auditPrograms:s,auditCalendar:o,auditProcedures:l,auditUniverse:d,riskAssessments:c,workingPapers:pe,followUpTrackers:ye,correctiveActionPlans:Me,findingEvidence:Te,findingStatusChanges:qe,followUpActivities:We,activeEngagements:f,criticalFindings:p,overdueFindings:h,findingsByStatus:m,activeAnnualPlans:g,plannedAudits:v,upcomingAudits:_,auditProgramTemplates:x,criticalRiskAssessments:w,highRiskAssessments:k,riskAssessmentByStatus:S,setCurrentEngagement:C,setAuditPlan:A,setFindings:M,setEngagements:$,addFinding:R,addEngagement:I,updateFinding:B,updateEngagement:j,removeFinding:z,removeEngagement:F,getFindingById:q,getEngagementById:N,fetchEngagements:O,fetchFindings:V,fetchFindingDetails:Le,createFinding:Re,updateFindingDetails:Se,fetchAnnualPlans:L,fetchAnnualPlanDetails:U,createAnnualPlan:G,updateAnnualPlan:X,fetchAuditPrograms:re,fetchAuditProgramDetails:ee,createAuditProgram:de,updateAuditProgram:se,createEngagement:Pe=>le(void 0,null,function*(){try{const Ue=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Audit Engagement"},Pe)}}).fetch();return yield O(),Ue}catch(Ue){throw console.error("Error creating engagement:",Ue),Ue}}),fetchAuditCalendar:te,fetchAuditCalendarDetails:ne,createAuditCalendarEntry:ce,updateAuditCalendarEntry:ve,fetchAuditProcedures:Y,fetchAuditUniverse:K,fetchRiskAssessments:H,fetchRiskAssessmentDetails:ae,createRiskAssessment:be,updateRiskAssessment:ue,fetchWorkingPapers:at,fetchWorkingPaperDetails:st,createWorkingPaper:Ve,updateWorkingPaper:De,fetchFollowUpTrackers:Ge,fetchFollowUpTrackerDetails:en,createFollowUpTracker:Ln,updateFollowUpTracker:Ne,fetchCorrectiveActionPlans:$e,fetchCorrectiveActionPlanDetails:Pe=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Corrective Action Plan",name:Pe}}).fetch()}catch(Ue){return console.error("Error fetching corrective action plan details:",Ue),null}}),createCorrectiveActionPlan:Pe=>le(void 0,null,function*(){try{const Ue=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Corrective Action Plan"},Pe)}}).fetch();return yield $e(),Ue}catch(Ue){throw console.error("Error creating corrective action plan:",Ue),Ue}}),updateCorrectiveActionPlan:(Pe,Ue)=>le(void 0,null,function*(){try{const Ot=yield Ie({url:"frappe.client.set_value",params:{doctype:"Corrective Action Plan",name:Pe,fieldname:Ue}}).fetch();return yield $e(),Ot}catch(Ot){throw console.error("Error updating corrective action plan:",Ot),Ot}}),clearCache:()=>{i.value.clear(),n.value=[],r.value=[],a.value=[],s.value=[],o.value=[],l.value=[],d.value=[],c.value=[],pe.value=[],ye.value=[],Me.value=[],Te.value=[],qe.value=[],We.value=[],t.value=null,e.value=null}}}),uat={class:"space-y-6"},dat={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},cat={class:"flex items-center space-x-3"},fat={class:"p-2 bg-blue-100 rounded-lg"},pat={class:"flex flex-wrap items-center gap-2"},hat={class:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm"},mat={class:"flex flex-wrap items-center justify-between gap-4"},gat={class:"flex items-center gap-3"},vat={class:"text-sm text-gray-600"},yat={class:"bg-white rounded-xl border border-gray-200 shadow-sm"},bat={class:"px-6 py-4 border-b border-gray-200"},_at={class:"flex items-center justify-between"},xat={class:"flex items-center space-x-2"},wat={key:0,class:"overflow-x-auto"},kat={class:"min-w-full divide-y divide-gray-200"},Sat={class:"bg-gray-50"},Cat={class:"px-6 py-3 text-left w-10"},Aat=["checked"],Tat={class:"flex items-center space-x-1"},Eat={class:"flex items-center space-x-1"},Mat={class:"bg-white divide-y divide-gray-200"},$at={class:"px-6 py-4"},Dat=["checked","onChange"],Rat={class:"px-6 py-4 whitespace-nowrap"},Pat={class:"flex items-center"},Iat={class:"flex-shrink-0 h-10 w-10"},Oat={class:"h-10 w-10 rounded-lg bg-blue-500 flex items-center justify-center text-white font-bold text-sm"},Lat={class:"ml-4"},Vat={class:"text-sm font-semibold text-gray-900"},Nat={class:"text-sm text-gray-500"},jat={class:"px-6 py-4 whitespace-nowrap"},Fat={class:"text-sm font-medium text-gray-900"},Bat={class:"px-6 py-4 whitespace-nowrap"},zat={class:"px-6 py-4 whitespace-nowrap"},Uat={class:"flex items-center"},Hat={class:"w-20 bg-gray-200 rounded-full h-2 mr-2"},qat={class:"text-sm text-gray-600"},Wat={class:"px-6 py-4 whitespace-nowrap"},Gat={class:"flex items-center"},Yat={class:"text-sm font-medium text-gray-900"},Kat={class:"ml-2 w-12 bg-gray-200 rounded-full h-1.5"},Xat={class:"px-6 py-4 whitespace-nowrap"},Zat={class:"flex items-center space-x-2"},Qat={class:"text-sm font-medium text-gray-900"},Jat={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},est={class:"flex items-center space-x-1"},tst={key:1,class:"p-6"},nst={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},rst={class:"flex items-start justify-between mb-4"},ist={class:"flex items-center space-x-3"},ast={class:"h-12 w-12 rounded-xl bg-blue-500 flex items-center justify-center text-white font-bold"},sst={class:"text-lg font-semibold text-gray-900 group-hover:text-blue-900"},ost={class:"text-sm text-gray-600"},lst={class:"space-y-3"},ust={class:"flex justify-between items-center mb-1"},dst={class:"text-sm font-medium"},cst={class:"w-full bg-gray-200 rounded-full h-2"},fst={class:"flex justify-between items-center"},pst={class:"text-sm font-medium"},hst={class:"flex justify-between items-center"},mst={class:"text-sm font-medium"},gst={class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200"},vst={class:"flex items-center space-x-1"},yst={class:"text-xs text-gray-500"},bst={key:2,class:"p-6"},_st={class:"relative"},xst={class:"flex-shrink-0 w-16 h-16 rounded-xl bg-blue-500 flex items-center justify-center text-white font-bold text-lg z-10"},wst={class:"ml-6 flex-1 bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow"},kst={class:"flex items-start justify-between mb-3"},Sst={class:"text-lg font-semibold text-gray-900"},Cst={class:"text-sm text-gray-500"},Ast={class:"grid grid-cols-3 gap-4 mb-4"},Tst={class:"text-lg font-semibold text-gray-900"},Est={class:"text-lg font-semibold text-gray-900"},Mst={class:"text-lg font-semibold text-gray-900"},$st={class:"flex items-center justify-end space-x-2"},Dst={key:3,class:"px-6 py-20 text-center"},Rst={class:"mx-auto h-20 w-20 rounded-2xl bg-blue-50 border-2 border-blue-100 flex items-center justify-center mb-8 shadow-sm"},Pst={class:"max-w-md mx-auto"},Ist={class:"flex flex-col sm:flex-row justify-center gap-3"},Ost={key:4,class:"px-6 py-12 text-center"},Lst={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4"},Vst=["onClick"],Nst={class:"flex items-start space-x-3"},jst={class:"p-2 bg-blue-100 rounded-lg"},Fst={class:"font-semibold text-gray-900"},Bst={class:"text-sm text-gray-500 mt-1"},zst={class:"p-6 space-y-4"},Ust={class:"text-gray-600"},Hst={class:"grid grid-cols-2 gap-3"},qst={class:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6"},Wst={class:"md:col-span-2"},Gst={class:"bg-white border border-gray-200 rounded-lg p-6"},Yst={class:"space-y-4"},Kst={class:"w-32 text-sm text-gray-600"},Xst={class:"flex-1 mx-3"},Zst={class:"w-full bg-gray-100 rounded-full h-4"},Qst={class:"w-16 text-sm font-medium text-gray-900 text-right"},Jst={class:"space-y-4"},eot={class:"bg-blue-50 rounded-lg p-6"},tot={class:"space-y-3 text-sm"},not={class:"flex justify-between"},rot={class:"font-medium text-blue-900"},iot={class:"flex justify-between"},aot={class:"font-medium text-blue-900"},sot={class:"flex justify-between"},oot={class:"font-medium text-blue-900"},lot={class:"bg-amber-50 rounded-lg p-6"},uot={class:"space-y-3 text-sm"},dot={class:"flex justify-between"},cot={class:"font-medium text-amber-900"},fot={class:"flex justify-between"},pot={class:"font-medium text-amber-900"},hot={__name:"AnnualPlan",setup(t){const e=xn(),n=Bo(),r=Q(!1),i=Q(!1),a=Q(!1),s=Q(!1),o=Q(!1),l=Q(!1),d=Q(!0),c=Q(null),f=Q("create"),p=Q(""),h=Q(""),m=Q(""),g=Q(""),v=Q("table"),_=Q([]),x=Q("plan_year"),w=Q("desc"),k=J(()=>n.annualPlans||[]),S=J(()=>{const K=k.value,H=K.filter(st=>st.status==="Active").length,ae=K.filter(st=>st.status==="Draft").length,be=K.filter(st=>st.status==="Approved").length,ue=K.filter(st=>st.status==="Completed").length,pe=K.reduce((st,Ve)=>{var De;return st+(((De=Ve.planned_audits)==null?void 0:De.length)||0)},0),ye=K.reduce((st,Ve)=>st+(Ve.total_planned_days||0),0),Me=K.filter(st=>["Active","Approved"].includes(st.status)),Te=Me.length>0?Math.round(Me.reduce((st,Ve)=>st+(Ve.utilization_percentage||0),0)/Me.length):0,qe=new Date,We=new Date(qe.getTime()+30*24*60*60*1e3);let at=0;return K.forEach(st=>{(st.planned_audits||[]).forEach(Ve=>{if(Ve.planned_start_date){const De=new Date(Ve.planned_start_date);De>=qe&&De<=We&&at++}})}),{total:K.length,active:H,draft:ae,approved:be,completed:ue,plannedAudits:pe,avgUtilization:Te,upcoming:at,totalDays:ye,byQuarter:{q1:0,q2:0,q3:0,q4:0}}}),C=J(()=>{let K=[...k.value];if(p.value){const H=p.value.toLowerCase();K=K.filter(ae=>{var be,ue,pe;return((be=ae.plan_id)==null?void 0:be.toLowerCase().includes(H))||((ue=ae.status)==null?void 0:ue.toLowerCase().includes(H))||((pe=ae.plan_objectives)==null?void 0:pe.toLowerCase().includes(H))})}return h.value&&(K=K.filter(H=>H.status===h.value)),m.value&&(K=K.filter(H=>{var ae;return((ae=H.plan_year)==null?void 0:ae.toString())===m.value.toString()})),g.value&&(K=K.filter(H=>H.plan_period===g.value)),K.sort((H,ae)=>{const be=H[x.value]||"",ue=ae[x.value]||"";return w.value==="asc"?be>ue?1:-1:be<ue?1:-1}),K}),A=J(()=>[{name:"Financial Audits",utilization:78},{name:"Operational Audits",utilization:65},{name:"Compliance Audits",utilization:82},{name:"IT Audits",utilization:45},{name:"Special Reviews",utilization:30}]),M=J(()=>k.value.reduce((K,H)=>K+(H.total_available_days||0),0)||1e3),$=J(()=>k.value.reduce((K,H)=>K+(H.total_planned_days||0),0)),R=[{id:"standard",name:"Standard Annual Plan",description:"Comprehensive annual audit plan template",icon:er},{id:"financial",name:"Financial Focus",description:"Emphasis on financial audits and controls",icon:kr},{id:"compliance",name:"Compliance-Driven",description:"Focus on regulatory compliance audits",icon:Ti},{id:"operational",name:"Operational Excellence",description:"Emphasis on operational efficiency audits",icon:Cc}],I=()=>le(this,null,function*(){r.value=!0;try{yield Promise.all([n.fetchAnnualPlans(),n.fetchAuditUniverse()])}finally{r.value=!1}}),B=()=>{c.value=null,f.value="create",a.value=!0},j=K=>le(this,null,function*(){c.value=K,f.value="edit",a.value=!0}),z=K=>{e.push(`/audit-planning/annual-plan/${K.name}`)},F=K=>le(this,null,function*(){try{const H=yield n.fetchAnnualPlanDetails(K.name);H&&(c.value=je(me({},H),{plan_id:`${H.plan_id}_copy`,status:"Draft",name:null}),f.value="create",a.value=!0)}catch(H){console.error("Error duplicating plan:",H)}}),q=K=>le(this,null,function*(){if(confirm(`Are you sure you want to delete ${K.plan_id}?`))try{yield n.deleteAnnualPlan(K.name),yield I()}catch(H){console.error("Error deleting plan:",H)}}),N=()=>le(this,null,function*(){a.value=!1,c.value=null,yield I()}),O=()=>{a.value=!1,c.value=null},V=K=>{c.value={template:K.id},f.value="create",s.value=!1,a.value=!0},L=K=>({Draft:"subtle","Pending Approval":"warning",Approved:"success",Active:"info",Completed:"success",Cancelled:"subtle"})[K]||"subtle",U=K=>Math.min(K.utilization_percentage||0,100),G=K=>K>=90?"bg-red-500":K>=75?"bg-amber-500":K>=50?"bg-green-500":"bg-blue-500",X=K=>K?new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",re=K=>{const H=_.value.indexOf(K);H>-1?_.value.splice(H,1):_.value.push(K)},ee=()=>{_.value.length===C.value.length?_.value=[]:_.value=C.value.map(K=>K.name)},de=K=>{x.value===K?w.value=w.value==="asc"?"desc":"asc":(x.value=K,w.value="asc")},se=()=>{p.value="",h.value="",m.value="",g.value="",_.value=[]},te=()=>le(this,null,function*(){i.value=!0;try{console.log("Exporting plans...",_.value.length||C.value.length,"plans")}finally{i.value=!1}}),ne=()=>{console.log("Bulk update status for:",_.value),o.value=!1},ce=()=>{console.log("Bulk export for:",_.value),o.value=!1},ve=()=>{console.log("Bulk duplicate for:",_.value),o.value=!1},Y=()=>{confirm(`Are you sure you want to delete ${_.value.length} plan(s)?`)&&(console.log("Bulk delete for:",_.value),o.value=!1,_.value=[])};return bt(()=>le(this,null,function*(){yield I()})),(K,H)=>(T(),P("div",uat,[u("div",dat,[u("div",null,[u("div",cat,[u("div",fat,[b(y(er),{class:"h-6 w-6 text-blue-600"})]),H[15]||(H[15]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Annual Audit Plan"),u("p",{class:"text-gray-600 mt-1"}," Create and manage comprehensive annual audit planning ")],-1))])]),u("div",pat,[b(y(Z),{variant:"outline",size:"sm",onClick:te,loading:i.value},{prefix:D(()=>[b(y(bn),{class:"h-4 w-4"})]),default:D(()=>[H[16]||(H[16]=W(" Export ",-1))]),_:1},8,["loading"]),b(y(Z),{variant:"outline",size:"sm",onClick:H[0]||(H[0]=ae=>s.value=!0)},{prefix:D(()=>[b(y(vt),{class:"h-4 w-4"})]),default:D(()=>[H[17]||(H[17]=W(" Templates ",-1))]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:H[1]||(H[1]=ae=>l.value=!0)},{prefix:D(()=>[b(y(cr),{class:"h-4 w-4"})]),default:D(()=>[H[18]||(H[18]=W(" Capacity ",-1))]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:I,loading:r.value},{prefix:D(()=>[b(y(hn),{class:"h-4 w-4"})]),default:D(()=>[H[19]||(H[19]=W(" Refresh ",-1))]),_:1},8,["loading"]),b(y(Z),{variant:"solid",theme:"blue",size:"sm",onClick:B},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[H[20]||(H[20]=W(" New Plan ",-1))]),_:1})])]),b(Trt,{stats:S.value,showDetails:d.value},null,8,["stats","showDetails"]),b(Brt,{searchQuery:p.value,"onUpdate:searchQuery":H[2]||(H[2]=ae=>p.value=ae),statusFilter:h.value,"onUpdate:statusFilter":H[3]||(H[3]=ae=>h.value=ae),yearFilter:m.value,"onUpdate:yearFilter":H[4]||(H[4]=ae=>m.value=ae),periodFilter:g.value,"onUpdate:periodFilter":H[5]||(H[5]=ae=>g.value=ae),viewMode:v.value,"onUpdate:viewMode":H[6]||(H[6]=ae=>v.value=ae)},null,8,["searchQuery","statusFilter","yearFilter","periodFilter","viewMode"]),u("div",hat,[u("div",mat,[u("div",gat,[H[21]||(H[21]=u("h3",{class:"text-sm font-semibold text-gray-900"},"Quick Actions",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:H[7]||(H[7]=ae=>o.value=!0),disabled:_.value.length===0},{prefix:D(()=>[b(y(Bc),{class:"h-4 w-4"})]),default:D(()=>[W(" Bulk Actions ("+E(_.value.length)+") ",1)]),_:1},8,["disabled"])]),u("div",vat," Showing "+E(C.value.length)+" of "+E(k.value.length)+" plans ",1)])]),u("div",yat,[u("div",bat,[u("div",_at,[H[22]||(H[22]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Annual Audit Plans",-1)),u("div",xat,[v.value==="table"&&C.value.length>0?(T(),he(y(Z),{key:0,variant:"outline",size:"sm",onClick:ee},{default:D(()=>[W(E(_.value.length===C.value.length?"Deselect All":"Select All"),1)]),_:1})):ie("",!0)])])]),v.value==="table"?(T(),P("div",wat,[u("table",kat,[u("thead",Sat,[u("tr",null,[u("th",Cat,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:_.value.length===C.value.length&&C.value.length>0,onChange:ee},null,40,Aat)]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:H[8]||(H[8]=ae=>de("plan_id"))},[u("div",Tat,[H[23]||(H[23]=u("span",null,"Plan ID",-1)),b(y(Yu),{class:"h-3 w-3"})])]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:H[9]||(H[9]=ae=>de("plan_year"))},[u("div",Eat,[H[24]||(H[24]=u("span",null,"Year",-1)),b(y(Yu),{class:"h-3 w-3"})])]),H[25]||(H[25]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1)),H[26]||(H[26]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Progress",-1)),H[27]||(H[27]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilization",-1)),H[28]||(H[28]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Planned Audits",-1)),H[29]||(H[29]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions",-1))])]),u("tbody",Mat,[(T(!0),P(_e,null,we(C.value,ae=>{var be;return T(),P("tr",{key:ae.name,class:fe(["hover:bg-gray-50 transition-colors",{"bg-blue-50":_.value.includes(ae.name)}])},[u("td",$at,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:_.value.includes(ae.name),onChange:ue=>re(ae.name)},null,40,Dat)]),u("td",Rat,[u("div",Pat,[u("div",Iat,[u("div",Oat,E(((be=ae.plan_year)==null?void 0:be.toString().slice(-2))||"NA"),1)]),u("div",Lat,[u("div",Vat,E(ae.plan_id),1),u("div",Nat,E(ae.plan_period),1)])])]),u("td",jat,[u("div",Fat,E(ae.plan_year),1)]),u("td",Bat,[b(y(Ee),{variant:L(ae.status),size:"sm"},{default:D(()=>[W(E(ae.status),1)]),_:2},1032,["variant"])]),u("td",zat,[u("div",Uat,[u("div",Hat,[u("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:nt({width:`${U(ae)}%`})},null,4)]),u("span",qat,E(U(ae))+"%",1)])]),u("td",Wat,[u("div",Gat,[u("span",Yat,E(ae.utilization_percentage||0)+"%",1),u("div",Kat,[u("div",{class:fe(["h-1.5 rounded-full transition-all duration-300",G(ae.utilization_percentage||0)]),style:nt({width:`${Math.min(ae.utilization_percentage||0,100)}%`})},null,6)])])]),u("td",Xat,[u("div",Zat,[u("span",Qat,E((ae.planned_audits||[]).length),1),H[30]||(H[30]=u("span",{class:"text-xs text-gray-500"},"audits",-1))])]),u("td",Jat,[u("div",est,[b(y(Z),{variant:"ghost",size:"sm",onClick:ue=>z(ae),class:"!p-1.5"},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:ue=>j(ae),class:"!p-1.5"},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:ue=>F(ae),class:"!p-1.5"},{default:D(()=>[b(y(qs),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:ue=>q(ae),class:"!p-1.5 text-red-500 hover:text-red-700"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2)}),128))])])])):v.value==="cards"?(T(),P("div",tst,[u("div",nst,[(T(!0),P(_e,null,we(C.value,ae=>{var be;return T(),P("div",{key:ae.name,class:fe(["bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",{"ring-2 ring-blue-500 bg-blue-50":_.value.includes(ae.name)}])},[u("div",rst,[u("div",ist,[u("div",ast,E(((be=ae.plan_year)==null?void 0:be.toString().slice(-2))||"NA"),1),u("div",null,[u("h3",sst,E(ae.plan_id),1),u("p",ost,E(ae.plan_period)+" Plan",1)])]),b(y(Ee),{variant:L(ae.status),size:"sm"},{default:D(()=>[W(E(ae.status),1)]),_:2},1032,["variant"])]),u("div",lst,[u("div",null,[u("div",ust,[H[31]||(H[31]=u("span",{class:"text-sm text-gray-600"},"Progress",-1)),u("span",dst,E(U(ae))+"%",1)]),u("div",cst,[u("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:nt({width:`${U(ae)}%`})},null,4)])]),u("div",fst,[H[32]||(H[32]=u("span",{class:"text-sm text-gray-600"},"Utilization",-1)),u("span",pst,E(ae.utilization_percentage||0)+"%",1)]),u("div",hst,[H[33]||(H[33]=u("span",{class:"text-sm text-gray-600"},"Planned Audits",-1)),u("span",mst,E((ae.planned_audits||[]).length),1)])]),u("div",gst,[u("div",vst,[b(y(Z),{variant:"ghost",size:"sm",onClick:dt(ue=>z(ae),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(ue=>j(ae),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(ue=>F(ae),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(qs),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",yst,E(X(ae.modified)),1)])],2)}),128))])])):v.value==="timeline"?(T(),P("div",bst,[u("div",_st,[H[39]||(H[39]=u("div",{class:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200"},null,-1)),(T(!0),P(_e,null,we(C.value,(ae,be)=>{var ue;return T(),P("div",{key:ae.name,class:"relative flex items-start mb-8 last:mb-0"},[u("div",xst,E(((ue=ae.plan_year)==null?void 0:ue.toString().slice(-2))||"NA"),1),u("div",wst,[u("div",kst,[u("div",null,[u("h3",Sst,E(ae.plan_id),1),u("p",Cst,E(ae.plan_period)+"  "+E(ae.plan_year),1)]),b(y(Ee),{variant:L(ae.status),size:"sm"},{default:D(()=>[W(E(ae.status),1)]),_:2},1032,["variant"])]),u("div",Ast,[u("div",null,[H[34]||(H[34]=u("p",{class:"text-xs text-gray-500"},"Planned Audits",-1)),u("p",Tst,E((ae.planned_audits||[]).length),1)]),u("div",null,[H[35]||(H[35]=u("p",{class:"text-xs text-gray-500"},"Utilization",-1)),u("p",Est,E(ae.utilization_percentage||0)+"%",1)]),u("div",null,[H[36]||(H[36]=u("p",{class:"text-xs text-gray-500"},"Days Planned",-1)),u("p",Mst,E(ae.total_planned_days||0),1)])]),u("div",$st,[b(y(Z),{variant:"outline",size:"sm",onClick:pe=>z(ae)},{default:D(()=>[...H[37]||(H[37]=[W("View",-1)])]),_:1},8,["onClick"]),b(y(Z),{variant:"outline",size:"sm",onClick:pe=>j(ae)},{default:D(()=>[...H[38]||(H[38]=[W("Edit",-1)])]),_:1},8,["onClick"])])])])}),128))])])):ie("",!0),C.value.length===0&&k.value.length===0?(T(),P("div",Dst,[u("div",Rst,[b(y(er),{class:"h-10 w-10 text-blue-500"})]),u("div",Pst,[H[42]||(H[42]=u("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Welcome to Annual Planning",-1)),H[43]||(H[43]=u("p",{class:"text-gray-600 mb-8 leading-relaxed"}," Create comprehensive annual audit plans. Set up your audit universe, allocate resources, and track planned activities. ",-1)),u("div",Ist,[b(y(Z),{variant:"solid",theme:"blue",size:"lg",onClick:B},{prefix:D(()=>[b(y(tt),{class:"h-5 w-5"})]),default:D(()=>[H[40]||(H[40]=W(" Create Your First Plan ",-1))]),_:1}),b(y(Z),{variant:"outline",size:"lg",onClick:H[10]||(H[10]=ae=>s.value=!0)},{prefix:D(()=>[b(y(vt),{class:"h-5 w-5"})]),default:D(()=>[H[41]||(H[41]=W(" Browse Templates ",-1))]),_:1})])])])):C.value.length===0?(T(),P("div",Ost,[b(y(Rn),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),H[45]||(H[45]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No plans found",-1)),H[46]||(H[46]=u("p",{class:"text-gray-600 mb-6"}," Try adjusting your search or filter criteria. ",-1)),b(y(Z),{variant:"outline",onClick:se},{default:D(()=>[...H[44]||(H[44]=[W("Clear Filters",-1)])]),_:1})])):ie("",!0)]),b(lat,{show:a.value,"onUpdate:show":H[11]||(H[11]=ae=>a.value=ae),plan:c.value,mode:f.value,onSaved:N,onClose:O},null,8,["show","plan","mode"]),b(y(zt),{modelValue:s.value,"onUpdate:modelValue":H[12]||(H[12]=ae=>s.value=ae),options:{title:"Plan Templates",size:"lg"}},{body:D(()=>[u("div",Lst,[(T(),P(_e,null,we(R,ae=>u("div",{key:ae.id,class:"border border-gray-200 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition-all",onClick:be=>V(ae)},[u("div",Nst,[u("div",jst,[(T(),he(Lt(ae.icon),{class:"h-5 w-5 text-blue-600"}))]),u("div",null,[u("h4",Fst,E(ae.name),1),u("p",Bst,E(ae.description),1)])])],8,Vst)),64))])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:o.value,"onUpdate:modelValue":H[13]||(H[13]=ae=>o.value=ae),options:{title:"Bulk Actions",size:"md"}},{body:D(()=>[u("div",zst,[u("p",Ust,E(_.value.length)+" plan(s) selected",1),u("div",Hst,[b(y(Z),{variant:"outline",onClick:ne},{prefix:D(()=>[b(y(hn),{class:"h-4 w-4"})]),default:D(()=>[H[47]||(H[47]=W(" Update Status ",-1))]),_:1}),b(y(Z),{variant:"outline",onClick:ce},{prefix:D(()=>[b(y(bn),{class:"h-4 w-4"})]),default:D(()=>[H[48]||(H[48]=W(" Export Selected ",-1))]),_:1}),b(y(Z),{variant:"outline",onClick:ve},{prefix:D(()=>[b(y(qs),{class:"h-4 w-4"})]),default:D(()=>[H[49]||(H[49]=W(" Duplicate ",-1))]),_:1}),b(y(Z),{variant:"outline",theme:"red",onClick:Y},{prefix:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),default:D(()=>[H[50]||(H[50]=W(" Delete Selected ",-1))]),_:1})])])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:l.value,"onUpdate:modelValue":H[14]||(H[14]=ae=>l.value=ae),options:{title:"Capacity Planning",size:"xl"}},{body:D(()=>[u("div",qst,[u("div",Wst,[u("div",Gst,[H[51]||(H[51]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resource Allocation Overview",-1)),u("div",Yst,[(T(!0),P(_e,null,we(A.value,ae=>(T(),P("div",{key:ae.name,class:"flex items-center"},[u("div",Kst,E(ae.name),1),u("div",Xst,[u("div",Zst,[u("div",{class:fe(["h-4 rounded-full transition-all duration-300",ae.utilization>90?"bg-red-500":ae.utilization>75?"bg-amber-500":"bg-green-500"]),style:nt({width:`${ae.utilization}%`})},null,6)])]),u("div",Qst,E(ae.utilization)+"%",1)]))),128))])])]),u("div",Jst,[u("div",eot,[H[55]||(H[55]=u("h3",{class:"text-lg font-semibold text-blue-900 mb-4"},"Summary",-1)),u("div",tot,[u("div",not,[H[52]||(H[52]=u("span",{class:"text-blue-700"},"Total Capacity",-1)),u("span",rot,E(M.value)+" days",1)]),u("div",iot,[H[53]||(H[53]=u("span",{class:"text-blue-700"},"Allocated",-1)),u("span",aot,E($.value)+" days",1)]),u("div",sot,[H[54]||(H[54]=u("span",{class:"text-blue-700"},"Available",-1)),u("span",oot,E(M.value-$.value)+" days",1)])])]),u("div",lot,[H[58]||(H[58]=u("h3",{class:"text-lg font-semibold text-amber-900 mb-4"},"Insights",-1)),u("div",uot,[u("div",dot,[H[56]||(H[56]=u("span",{class:"text-amber-700"},"Active Plans",-1)),u("span",cot,E(S.value.active),1)]),u("div",fot,[H[57]||(H[57]=u("span",{class:"text-amber-700"},"Upcoming Audits",-1)),u("span",pot,E(S.value.upcoming),1)])])])])])]),_:1},8,["modelValue"])]))}},Jse=6048e5,mot=864e5,UH=Symbol.for("constructDateFrom");function ms(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&UH in t?t[UH](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ra(t,e){return ms(e||t,t)}function eoe(t,e,n){const r=Ra(t,n==null?void 0:n.in);if(isNaN(e))return ms(t,NaN);if(!e)return r;const i=r.getDate(),a=ms(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let got={};function Bb(){return got}function Sg(t,e){var o,l,d,c,f,p,h,m;const n=Bb(),r=(m=(h=(c=(d=e==null?void 0:e.weekStartsOn)!=null?d:(l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)!=null?c:n.weekStartsOn)!=null?h:(p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)!=null?m:0,i=Ra(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function lS(t,e){return Sg(t,je(me({},e),{weekStartsOn:1}))}function toe(t,e){const n=Ra(t,e==null?void 0:e.in),r=n.getFullYear(),i=ms(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=lS(i),s=ms(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=lS(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function HH(t){const e=Ra(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function xA(t,...e){const n=ms.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function uS(t,e){const n=Ra(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function vot(t,e,n){const[r,i]=xA(n==null?void 0:n.in,t,e),a=uS(r),s=uS(i),o=+a-HH(a),l=+s-HH(s);return Math.round((o-l)/mot)}function yot(t,e){const n=toe(t,e),r=ms(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),lS(r)}function bot(t){return ms(t,Date.now())}function hD(t,e,n){const[r,i]=xA(n==null?void 0:n.in,t,e);return+uS(r)==+uS(i)}function _ot(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function xot(t){return!(!_ot(t)&&typeof t!="number"||isNaN(+Ra(t)))}function wot(t,e){const n=Ra(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function kot(t,e){const[n,r]=xA(t,e.start,e.end);return{start:n,end:r}}function Sot(t,e){const{start:n,end:r}=kot(e==null?void 0:e.in,t);let i=+n>+r;const a=i?+n:+r,s=i?r:n;s.setHours(0,0,0,0);let o=1;const l=[];for(;+s<=a;)l.push(ms(n,s)),s.setDate(s.getDate()+o),s.setHours(0,0,0,0);return i?l.reverse():l}function Cot(t,e){const n=Ra(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Aot(t,e){const n=Ra(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Tot(t,e){var o,l,d,c;const n=Bb(),r=(c=(d=n.weekStartsOn)!=null?d:(l=(o=n.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)!=null?c:0,i=Ra(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const Eot={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Mot=(t,e,n)=>{let r;const i=Eot[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function w5(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const $ot={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Dot={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rot={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pot={date:w5({formats:$ot,defaultWidth:"full"}),time:w5({formats:Dot,defaultWidth:"full"}),dateTime:w5({formats:Rot,defaultWidth:"full"})},Iot={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Oot=(t,e,n,r)=>Iot[t];function Zv(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const Lot={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vot={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Not={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jot={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Fot={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bot={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zot=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Uot={ordinalNumber:zot,era:Zv({values:Lot,defaultWidth:"wide"}),quarter:Zv({values:Vot,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Zv({values:Not,defaultWidth:"wide"}),day:Zv({values:jot,defaultWidth:"wide"}),dayPeriod:Zv({values:Fot,defaultWidth:"wide",formattingValues:Bot,defaultFormattingWidth:"wide"})};function Qv(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?qot(o,f=>f.test(s)):Hot(o,f=>f.test(s));let d;d=t.valueCallback?t.valueCallback(l):l,d=n.valueCallback?n.valueCallback(d):d;const c=e.slice(s.length);return{value:d,rest:c}}}function Hot(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function qot(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Wot(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const Got=/^(\d+)(th|st|nd|rd)?/i,Yot=/\d+/i,Kot={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xot={any:[/^b/i,/^(a|c)/i]},Zot={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qot={any:[/1/i,/2/i,/3/i,/4/i]},Jot={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},elt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tlt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nlt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rlt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ilt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},alt={ordinalNumber:Wot({matchPattern:Got,parsePattern:Yot,valueCallback:t=>parseInt(t,10)}),era:Qv({matchPatterns:Kot,defaultMatchWidth:"wide",parsePatterns:Xot,defaultParseWidth:"any"}),quarter:Qv({matchPatterns:Zot,defaultMatchWidth:"wide",parsePatterns:Qot,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qv({matchPatterns:Jot,defaultMatchWidth:"wide",parsePatterns:elt,defaultParseWidth:"any"}),day:Qv({matchPatterns:tlt,defaultMatchWidth:"wide",parsePatterns:nlt,defaultParseWidth:"any"}),dayPeriod:Qv({matchPatterns:rlt,defaultMatchWidth:"any",parsePatterns:ilt,defaultParseWidth:"any"})},slt={code:"en-US",formatDistance:Mot,formatLong:Pot,formatRelative:Oot,localize:Uot,match:alt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function olt(t,e){const n=Ra(t,e==null?void 0:e.in);return vot(n,Aot(n))+1}function llt(t,e){const n=Ra(t,e==null?void 0:e.in),r=+lS(n)-+yot(n);return Math.round(r/Jse)+1}function noe(t,e){var c,f,p,h,m,g,v,_;const n=Ra(t,e==null?void 0:e.in),r=n.getFullYear(),i=Bb(),a=(_=(v=(h=(p=e==null?void 0:e.firstWeekContainsDate)!=null?p:(f=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)!=null?h:i.firstWeekContainsDate)!=null?v:(g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)!=null?_:1,s=ms((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=Sg(s,e),l=ms((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const d=Sg(l,e);return+n>=+o?r+1:+n>=+d?r:r-1}function ult(t,e){var o,l,d,c,f,p,h,m;const n=Bb(),r=(m=(h=(c=(d=e==null?void 0:e.firstWeekContainsDate)!=null?d:(l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)!=null?c:n.firstWeekContainsDate)!=null?h:(p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)!=null?m:1,i=noe(t,e),a=ms((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Sg(a,e)}function dlt(t,e){const n=Ra(t,e==null?void 0:e.in),r=+Sg(n,e)-+ult(n,e);return Math.round(r/Jse)+1}function Hn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const $d={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Hn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Hn(n+1,2)},d(t,e){return Hn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Hn(t.getHours()%12||12,e.length)},H(t,e){return Hn(t.getHours(),e.length)},m(t,e){return Hn(t.getMinutes(),e.length)},s(t,e){return Hn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Hn(i,e.length)}},am={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qH={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return $d.y(t,e)},Y:function(t,e,n,r){const i=noe(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Hn(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Hn(a,e.length)},R:function(t,e){const n=toe(t);return Hn(n,e.length)},u:function(t,e){const n=t.getFullYear();return Hn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Hn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Hn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return $d.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Hn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=dlt(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Hn(i,e.length)},I:function(t,e,n){const r=llt(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Hn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):$d.d(t,e)},D:function(t,e,n){const r=olt(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Hn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Hn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Hn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Hn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=am.noon:r===0?i=am.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=am.evening:r>=12?i=am.afternoon:r>=4?i=am.morning:i=am.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return $d.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):$d.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Hn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Hn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):$d.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):$d.s(t,e)},S:function(t,e){return $d.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return GH(r);case"XXXX":case"XX":return jf(r);case"XXXXX":case"XXX":default:return jf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return GH(r);case"xxxx":case"xx":return jf(r);case"xxxxx":case"xxx":default:return jf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+WH(r,":");case"OOOO":default:return"GMT"+jf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+WH(r,":");case"zzzz":default:return"GMT"+jf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Hn(r,e.length)},T:function(t,e,n){return Hn(+t,e.length)}};function WH(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Hn(a,2)}function GH(t,e){return t%60===0?(t>0?"-":"+")+Hn(Math.abs(t)/60,2):jf(t,e)}function jf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Hn(Math.trunc(r/60),2),a=Hn(r%60,2);return n+i+e+a}const YH=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},roe=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},clt=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return YH(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",YH(r,e)).replace("{{time}}",roe(i,e))},flt={p:roe,P:clt},plt=/^D+$/,hlt=/^Y+$/,mlt=["D","DD","YY","YYYY"];function glt(t){return plt.test(t)}function vlt(t){return hlt.test(t)}function ylt(t,e,n){const r=blt(t,e,n);if(console.warn(r),mlt.includes(t))throw new RangeError(r)}function blt(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _lt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xlt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wlt=/^'([^]*?)'?$/,klt=/''/g,Slt=/[a-zA-Z]/;function KH(t,e,n){var c,f,p,h,m,g,v,_,x,w,k,S,C,A,M,$,R,I;const r=Bb(),i=(f=(c=n==null?void 0:n.locale)!=null?c:r.locale)!=null?f:slt,a=(w=(x=(g=(m=n==null?void 0:n.firstWeekContainsDate)!=null?m:(h=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)!=null?g:r.firstWeekContainsDate)!=null?x:(_=(v=r.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)!=null?w:1,s=(I=(R=(A=(C=n==null?void 0:n.weekStartsOn)!=null?C:(S=(k=n==null?void 0:n.locale)==null?void 0:k.options)==null?void 0:S.weekStartsOn)!=null?A:r.weekStartsOn)!=null?R:($=(M=r.locale)==null?void 0:M.options)==null?void 0:$.weekStartsOn)!=null?I:0,o=Ra(t,n==null?void 0:n.in);if(!xot(o))throw new RangeError("Invalid time value");let l=e.match(xlt).map(B=>{const j=B[0];if(j==="p"||j==="P"){const z=flt[j];return z(B,i.formatLong)}return B}).join("").match(_lt).map(B=>{if(B==="''")return{isToken:!1,value:"'"};const j=B[0];if(j==="'")return{isToken:!1,value:Clt(B)};if(qH[j])return{isToken:!0,value:B};if(j.match(Slt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:B}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(B=>{if(!B.isToken)return B.value;const j=B.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&vlt(j)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&glt(j))&&ylt(j,e,String(t));const z=qH[j[0]];return z(o,j,i.localize,d)}).join("")}function Clt(t){const e=t.match(wlt);return e?e[1].replace(klt,"'"):t}function Vx(t,e,n){const[r,i]=xA(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function XH(t,e){return hD(ms(t,t),bot(t))}function Alt(t,e,n){return eoe(t,-1,n)}const Tlt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4"},Elt={class:"bg-blue-50 rounded-xl border border-blue-200 p-6 hover:shadow-lg transition-shadow"},Mlt={class:"flex items-center justify-between"},$lt={class:"text-3xl font-bold text-blue-900 mt-1"},Dlt={class:"text-xs text-blue-600 mt-1"},Rlt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},Plt={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-6 hover:shadow-lg transition-shadow"},Ilt={class:"flex items-center justify-between"},Olt={class:"text-3xl font-bold text-yellow-900 mt-1"},Llt={class:"p-3 bg-yellow-500 rounded-xl shadow-sm"},Vlt={class:"bg-green-50 rounded-xl border border-green-200 p-6 hover:shadow-lg transition-shadow"},Nlt={class:"flex items-center justify-between"},jlt={class:"text-3xl font-bold text-green-900 mt-1"},Flt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},Blt={class:"bg-purple-50 rounded-xl border border-purple-200 p-6 hover:shadow-lg transition-shadow"},zlt={class:"flex items-center justify-between"},Ult={class:"text-3xl font-bold text-purple-900 mt-1"},Hlt={class:"w-full bg-purple-200 rounded-full h-2 mt-2"},qlt={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},Wlt={class:"bg-red-50 rounded-xl border border-red-200 p-6 hover:shadow-lg transition-shadow"},Glt={class:"flex items-center justify-between"},Ylt={class:"text-3xl font-bold text-red-900 mt-1"},Klt={class:"p-3 bg-red-500 rounded-xl shadow-sm"},Xlt={__name:"CalendarStats",props:{stats:{type:Object,required:!0,validator:t=>typeof t=="object"&&typeof t.totalScheduled=="number"&&typeof t.inProgress=="number"&&typeof t.upcoming=="number"&&typeof t.averageProgress=="number"&&typeof t.overdue=="number"&&typeof t.totalCapacity=="number"}},setup(t){return(e,n)=>(T(),P("div",Tlt,[u("div",Elt,[u("div",Mlt,[u("div",null,[n[0]||(n[0]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Total Scheduled",-1)),u("p",$lt,E(t.stats.totalScheduled),1),u("p",Dlt,E((t.stats.totalScheduled/Math.max(t.stats.totalCapacity,1)*100).toFixed(0))+"% of capacity",1)]),u("div",Rlt,[b(y(er),{class:"h-7 w-7 text-white"})])])]),u("div",Plt,[u("div",Ilt,[u("div",null,[n[1]||(n[1]=u("p",{class:"text-sm font-semibold text-yellow-700 uppercase tracking-wide"},"In Progress",-1)),u("p",Olt,E(t.stats.inProgress),1),n[2]||(n[2]=u("p",{class:"text-xs text-yellow-600 mt-1"},"Active audits",-1))]),u("div",Llt,[b(y(Rl),{class:"h-7 w-7 text-white"})])])]),u("div",Vlt,[u("div",Nlt,[u("div",null,[n[3]||(n[3]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Upcoming",-1)),u("p",jlt,E(t.stats.upcoming),1),n[4]||(n[4]=u("p",{class:"text-xs text-green-600 mt-1"},"Next 30 days",-1))]),u("div",Flt,[b(y(Ii),{class:"h-7 w-7 text-white"})])])]),u("div",Blt,[u("div",zlt,[u("div",null,[n[5]||(n[5]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Avg. Progress",-1)),u("p",Ult,E(t.stats.averageProgress)+"%",1),u("div",Hlt,[u("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${Math.min(t.stats.averageProgress,100)}%`})},null,4)])]),u("div",qlt,[b(y(J1),{class:"h-7 w-7 text-white"})])])]),u("div",Wlt,[u("div",Glt,[u("div",null,[n[6]||(n[6]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Overdue",-1)),u("p",Ylt,E(t.stats.overdue),1),n[7]||(n[7]=u("p",{class:"text-xs text-red-600 mt-1"},"Need attention",-1))]),u("div",Klt,[b(y(nn),{class:"h-7 w-7 text-white"})])])])]))}},Zlt={class:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm"},Qlt={class:"flex flex-wrap items-center justify-between gap-4"},Jlt={class:"flex flex-wrap items-center gap-4"},eut={class:"flex items-center space-x-2"},tut={class:"relative"},nut={class:"flex items-center space-x-2"},rut={class:"p-1"},iut={class:"p-1"},aut={class:"p-1"},sut={class:"flex items-center space-x-2 text-sm text-gray-600"},out={__name:"CalendarFilters",props:{filters:{type:Object,required:!0,validator:t=>typeof t=="object"&&typeof t.searchQuery=="string"&&typeof t.statusFilter=="string"&&typeof t.typeFilter=="string"&&typeof t.universeFilter=="string"},statusOptions:{type:Array,required:!0},auditTypeOptions:{type:Array,required:!0},universeOptions:{type:Array,required:!0},selectedCount:{type:Number,default:0},filteredCount:{type:Number,required:!0},totalCount:{type:Number,required:!0},viewMode:{type:String,required:!0,validator:t=>["calendar","list"].includes(t)}},emits:["update:filters","bulk-actions","capacity-planning","toggle-view"],setup(t,{emit:e}){const n=t,r=e,i=Q({searchQuery:"",statusFilter:"",typeFilter:"",universeFilter:""});Je(()=>n.filters,s=>{i.value=me({},s)},{immediate:!0,deep:!0});const a=()=>{r("update:filters",me({},i.value))};return(s,o)=>(T(),P("div",Zlt,[u("div",Qlt,[u("div",Jlt,[o[7]||(o[7]=u("h3",{class:"text-sm font-semibold text-gray-900"},"Quick Actions",-1)),u("div",eut,[u("div",tut,[b(y(Rn),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),xe(u("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>i.value.searchQuery=l),type:"text",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm w-48",placeholder:"Search audits...",onInput:a},null,544),[[Mt,i.value.searchQuery]])]),b(y(Ke),{modelValue:i.value.statusFilter,"onUpdate:modelValue":o[1]||(o[1]=l=>i.value.statusFilter=l),options:[{label:"All Status",value:""},...t.statusOptions],class:"min-w-36",onChange:a},null,8,["modelValue","options"]),b(y(Ke),{modelValue:i.value.typeFilter,"onUpdate:modelValue":o[2]||(o[2]=l=>i.value.typeFilter=l),options:[{label:"All Types",value:""},...t.auditTypeOptions],class:"min-w-32",onChange:a},null,8,["modelValue","options"]),b(y(Ke),{modelValue:i.value.universeFilter,"onUpdate:modelValue":o[3]||(o[3]=l=>i.value.universeFilter=l),options:[{label:"All Universes",value:""},...t.universeOptions],class:"min-w-40",onChange:a},null,8,["modelValue","options"])])]),u("div",nut,[u("div",rut,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:o[4]||(o[4]=l=>s.$emit("bulk-actions")),disabled:t.selectedCount===0},{prefix:D(()=>[b(y(Bc),{class:"h-3.5 w-3.5"})]),default:D(()=>[W(" Bulk Actions ("+E(t.selectedCount)+") ",1)]),_:1},8,["disabled"])]),u("div",iut,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:o[5]||(o[5]=l=>s.$emit("capacity-planning"))},{prefix:D(()=>[b(y(cr),{class:"h-3.5 w-3.5"})]),default:D(()=>[o[8]||(o[8]=W(" Capacity Planning ",-1))]),_:1})]),u("div",aut,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:o[6]||(o[6]=l=>s.$emit("toggle-view"))},{prefix:D(()=>[(T(),he(Lt(t.viewMode==="calendar"?"TableIcon":"CalendarIcon"),{class:"h-3.5 w-3.5"}))]),default:D(()=>[W(" "+E(t.viewMode==="calendar"?"List View":"Calendar View"),1)]),_:1})])]),u("div",sut,[u("span",null,"Showing "+E(t.filteredCount)+" of "+E(t.totalCount)+" audits",1)])])]))}},lut={class:"space-y-6"},uut={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},dut={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},cut={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fut={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},put={class:"space-y-4"},hut={__name:"AuditCalendarForm",props:{form:{type:Object,required:!0},universeOptions:{type:Array,required:!0},auditTypeOptions:{type:Array,required:!0},statusOptions:{type:Array,required:!0},planOptions:{type:Array,required:!0}},setup(t){return(e,n)=>(T(),P("div",lut,[u("div",uut,[b(y(ge),{modelValue:t.form.calendar_id,"onUpdate:modelValue":n[0]||(n[0]=r=>t.form.calendar_id=r),label:"Calendar ID",placeholder:"Enter calendar ID",required:!0},null,8,["modelValue"]),b(y(Ke),{modelValue:t.form.audit_universe,"onUpdate:modelValue":n[1]||(n[1]=r=>t.form.audit_universe=r),options:t.universeOptions,label:"Audit Universe",placeholder:"Select universe",required:!0},null,8,["modelValue","options"])]),u("div",dut,[b(y(Ke),{modelValue:t.form.audit_type,"onUpdate:modelValue":n[2]||(n[2]=r=>t.form.audit_type=r),options:t.auditTypeOptions,label:"Audit Type",placeholder:"Select type",required:!0},null,8,["modelValue","options"]),b(y(Ke),{modelValue:t.form.status,"onUpdate:modelValue":n[3]||(n[3]=r=>t.form.status=r),options:t.statusOptions,label:"Status",placeholder:"Select status"},null,8,["modelValue","options"]),b(y(Ke),{modelValue:t.form.annual_audit_plan,"onUpdate:modelValue":n[4]||(n[4]=r=>t.form.annual_audit_plan=r),options:t.planOptions,label:"Annual Audit Plan",placeholder:"Select plan"},null,8,["modelValue","options"])]),u("div",cut,[b(y(ge),{modelValue:t.form.planned_start_date,"onUpdate:modelValue":n[5]||(n[5]=r=>t.form.planned_start_date=r),type:"date",label:"Planned Start Date",required:!0},null,8,["modelValue"]),b(y(ge),{modelValue:t.form.planned_end_date,"onUpdate:modelValue":n[6]||(n[6]=r=>t.form.planned_end_date=r),type:"date",label:"Planned End Date",required:!0},null,8,["modelValue"])]),u("div",fut,[b(y(ge),{modelValue:t.form.lead_auditor,"onUpdate:modelValue":n[7]||(n[7]=r=>t.form.lead_auditor=r),label:"Lead Auditor",placeholder:"Select lead auditor",required:!0},null,8,["modelValue"]),b(y(ge),{modelValue:t.form.estimated_days,"onUpdate:modelValue":n[8]||(n[8]=r=>t.form.estimated_days=r),type:"number",label:"Estimated Days",placeholder:"0"},null,8,["modelValue"]),b(y(ge),{modelValue:t.form.progress_percentage,"onUpdate:modelValue":n[9]||(n[9]=r=>t.form.progress_percentage=r),type:"number",label:"Progress %",placeholder:"0",min:"0",max:"100"},null,8,["modelValue"])]),u("div",put,[b(y(ge),{modelValue:t.form.objectives,"onUpdate:modelValue":n[10]||(n[10]=r=>t.form.objectives=r),type:"textarea",label:"Objectives",placeholder:"Enter audit objectives",rows:"3"},null,8,["modelValue"]),b(y(ge),{modelValue:t.form.scope,"onUpdate:modelValue":n[11]||(n[11]=r=>t.form.scope=r),type:"textarea",label:"Scope",placeholder:"Define audit scope",rows:"3"},null,8,["modelValue"]),b(y(ge),{modelValue:t.form.key_risks,"onUpdate:modelValue":n[12]||(n[12]=r=>t.form.key_risks=r),type:"textarea",label:"Key Risks",placeholder:"Identify key risks",rows:"3"},null,8,["modelValue"])])]))}},mut={class:"space-y-6"},gut={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},vut={class:"flex items-center space-x-3"},yut={class:"p-2 bg-blue-100 rounded-lg"},but={class:"flex flex-wrap items-center gap-3"},_ut={class:"flex items-center space-x-2"},xut={class:"p-1"},wut={class:"p-1"},kut={class:"p-1"},Sut={class:"p-1"},Cut={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},Aut={key:0,class:"p-6"},Tut={class:"flex items-center justify-between mb-6"},Eut={class:"flex items-center space-x-4"},Mut={class:"text-xl font-semibold text-gray-900"},$ut={class:"grid grid-cols-7 gap-1 mb-4"},Dut={class:"grid grid-cols-7 gap-1"},Rut=["onClick"],Put={class:"flex justify-between items-start mb-2"},Iut={key:0,class:"text-xs text-gray-500"},Out={class:"space-y-1"},Lut=["onClick"],Vut={key:0,class:"text-xs text-gray-500 text-center"},Nut={key:1,class:"overflow-hidden"},jut={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},Fut={class:"flex items-center justify-between"},But={class:"flex items-center space-x-3"},zut={class:"text-sm font-medium text-gray-700"},Uut={class:"flex items-center space-x-2"},Hut={class:"overflow-x-auto"},qut={class:"min-w-full divide-y divide-gray-200"},Wut={class:"bg-gray-50"},Gut={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Yut={class:"bg-white divide-y divide-gray-200"},Kut={class:"px-6 py-4 whitespace-nowrap"},Xut={class:"px-6 py-4 whitespace-nowrap"},Zut={class:"flex items-center"},Qut={class:"flex-shrink-0 h-10 w-10"},Jut={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},edt={class:"ml-4"},tdt={class:"text-sm font-medium text-gray-900"},ndt={class:"text-sm text-gray-500"},rdt={class:"px-6 py-4 whitespace-nowrap"},idt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},adt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},sdt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},odt={class:"px-6 py-4 whitespace-nowrap"},ldt={class:"flex items-center"},udt={class:"w-16 bg-gray-200 rounded-full h-2 mr-2"},ddt={class:"text-sm text-gray-600"},cdt={class:"px-6 py-4 whitespace-nowrap"},fdt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},pdt={class:"flex items-center space-x-2"},hdt={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},mdt={class:"flex items-center justify-between"},gdt={class:"text-sm text-gray-700"},vdt={class:"flex items-center space-x-2"},ydt={class:"text-sm text-gray-700"},bdt={key:0,class:"text-center py-12 bg-white rounded-xl border border-gray-200"},_dt={class:"mt-1 text-sm text-gray-500"},xdt={class:"mt-6"},wdt={class:"flex justify-end space-x-3"},kdt={class:"space-y-4"},Sdt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Cdt=["onClick"],Adt={class:"flex items-start space-x-3"},Tdt={class:"p-2 bg-blue-100 rounded-lg"},Edt={class:"flex-1"},Mdt={class:"font-medium text-gray-900"},$dt={class:"text-sm text-gray-600 mt-1"},Ddt={class:"flex items-center space-x-4 mt-2 text-xs text-gray-500"},Rdt={class:"flex justify-end"},Pdt={class:"space-y-6"},Idt={class:"bg-blue-50 rounded-lg p-4"},Odt={class:"flex items-center space-x-2"},Ldt={class:"font-medium text-blue-900"},Vdt={class:"space-y-4"},Ndt={class:"border-t pt-4"},jdt={class:"flex justify-end"},Fdt={class:"space-y-6"},Bdt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},zdt={class:"bg-blue-50 rounded-lg p-4"},Udt={class:"flex items-center justify-between"},Hdt={class:"text-2xl font-bold text-blue-900"},qdt={class:"bg-green-50 rounded-lg p-4"},Wdt={class:"flex items-center justify-between"},Gdt={class:"text-2xl font-bold text-green-900"},Ydt={class:"bg-yellow-50 rounded-lg p-4"},Kdt={class:"flex items-center justify-between"},Xdt={class:"text-2xl font-bold text-yellow-900"},Zdt={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Qdt={class:"p-4"},Jdt={class:"space-y-4"},ect={class:"flex items-center space-x-3"},tct={class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},nct={class:"font-medium text-gray-900"},rct={class:"text-sm text-gray-600"},ict={class:"text-right"},act={class:"w-24 bg-gray-200 rounded-full h-2"},sct={class:"text-xs text-gray-600 mt-1"},oct={class:"flex justify-end"},lct={__name:"AuditCalendar",setup(t){const e=xn(),n=Bo(),r=Q(!1),i=Q(!1),a=Q(!1),s=Q(null),o=Q("calendar"),l=Q(new Date),d=Q(null),c=Q(""),f=Q(""),p=Q(""),h=Q(""),m=Q([]),g=Q("start_date"),v=Q(1),_=Q(10),x=Q(!1),w=Q(!1),k=Q(!1),S=Q(!1),C=Q({searchQuery:"",statusFilter:"",typeFilter:"",universeFilter:""}),A=Q({calendar_id:"",annual_audit_plan:"",audit_universe:"",audit_type:"",status:"Planned",planned_start_date:"",planned_end_date:"",lead_auditor:"",estimated_days:0,progress_percentage:0,objectives:"",scope:"",key_risks:""}),M=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Integrated",value:"Integrated"},{label:"Special Investigation",value:"Special Investigation"},{label:"Follow-up",value:"Follow-up"}],$=[{label:"Planned",value:"Planned"},{label:"Scheduled",value:"Scheduled"},{label:"In Progress",value:"In Progress"},{label:"On Hold",value:"On Hold"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"},{label:"Rescheduled",value:"Rescheduled"}],R=J(()=>n.auditCalendar);J(()=>n.auditCalendar.filter($e=>$e.status==="In Progress")),J(()=>n.upcomingAudits);const I=J(()=>{if(n.auditCalendar.length===0)return 0;const $e=n.auditCalendar.reduce((ke,Fe)=>ke+(Fe.progress_percentage||0),0);return Math.round($e/n.auditCalendar.length)}),B=J(()=>n.auditUniverse.map($e=>({label:`${$e.universe_id} - ${$e.auditable_entity}`,value:$e.name}))),j=J(()=>n.activeAnnualPlans.map($e=>({label:`${$e.plan_id} (${$e.plan_year})`,value:$e.name}))),z=J(()=>{let $e=[...R.value];if(C.value.searchQuery){const ke=C.value.searchQuery.toLowerCase();$e=$e.filter(Fe=>{var St,Vn,Pe,Ue;return((St=Fe.calendar_id)==null?void 0:St.toLowerCase().includes(ke))||((Vn=Fe.audit_type)==null?void 0:Vn.toLowerCase().includes(ke))||((Pe=de(Fe.audit_universe))==null?void 0:Pe.toLowerCase().includes(ke))||((Ue=Fe.status)==null?void 0:Ue.toLowerCase().includes(ke))})}return C.value.statusFilter&&($e=$e.filter(ke=>ke.status===C.value.statusFilter)),C.value.typeFilter&&($e=$e.filter(ke=>ke.audit_type===C.value.typeFilter)),C.value.universeFilter&&($e=$e.filter(ke=>ke.audit_universe===C.value.universeFilter)),$e.sort((ke,Fe)=>{const St=new Date(ke.planned_start_date||ke.planned_end_date),Vn=new Date(Fe.planned_start_date||Fe.planned_end_date);return g.value==="start_date"?St-Vn:Vn-St}),$e}),F=J({get:()=>z.value.length>0&&m.value.length===z.value.length,set:$e=>{$e?m.value=z.value.map(ke=>ke.name):m.value=[]}}),q=J(()=>{const $e=(v.value-1)*_.value,ke=$e+_.value;return z.value.slice($e,ke)}),N=J(()=>Math.ceil(z.value.length/_.value));J(()=>R.value.length);const O=J(()=>R.value.filter($e=>$e.status==="In Progress").length),V=J(()=>{const $e=new Date,ke=new Date;return ke.setDate($e.getDate()+30),R.value.filter(Fe=>{if(!Fe.planned_start_date)return!1;const St=new Date(Fe.planned_start_date);return St>=$e&&St<=ke}).length}),L=J(()=>{const $e=new Date;return R.value.filter(ke=>!ke.planned_end_date||ke.status==="Completed"?!1:new Date(ke.planned_end_date)<$e).length}),U=J(()=>({totalScheduled:R.value.length,inProgress:O.value,upcoming:V.value,averageProgress:I.value,overdue:L.value,totalCapacity:15})),G=J(()=>{const $e=Cot(l.value),ke=wot(l.value),Fe=Sg($e),St=Tot(ke);return Sot({start:Fe,end:St}).map(Pe=>({date:Pe,isCurrentMonth:Vx(Pe,l.value),isToday:XH(Pe),audits:be(Pe)}))}),X=()=>le(this,null,function*(){r.value=!0;try{yield Promise.all([n.fetchAuditCalendar(),n.fetchAuditUniverse(),n.fetchAnnualPlans()])}finally{r.value=!1}}),re=$e=>{C.value=me({},$e),c.value=$e.searchQuery,f.value=$e.statusFilter,p.value=$e.typeFilter,h.value=$e.universeFilter},ee=()=>{o.value=o.value==="calendar"?"list":"calendar"},de=$e=>{const ke=n.auditUniverse.find(Fe=>Fe.name===$e);return ke?ke.auditable_entity:$e},se=$e=>{e.push(`/audit-planning/calendar/${$e.name}`)},te=$e=>{s.value=$e,A.value=me({},$e),a.value=!0},ne=()=>le(this,null,function*(){i.value=!0;try{s.value?yield n.updateAuditCalendarEntry(s.value.name,A.value):yield n.createAuditCalendarEntry(A.value),a.value=!1,ce(),yield X()}catch($e){console.error("Error saving calendar item:",$e)}finally{i.value=!1}}),ce=()=>{A.value={calendar_id:"",annual_audit_plan:"",audit_universe:"",audit_type:"",status:"Planned",planned_start_date:"",planned_end_date:"",lead_auditor:"",estimated_days:0,progress_percentage:0,objectives:"",scope:"",key_risks:""},s.value=null},ve=$e=>$e?new Date($e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",Y=$e=>XH($e),K=()=>{l.value=Alt(l.value),d.value=null},H=()=>{l.value=eoe(l.value,1),d.value=null},ae=$e=>{d.value=d.value&&hD(d.value,$e)?null:$e},be=$e=>R.value.filter(ke=>{if(!ke.planned_start_date)return!1;const Fe=new Date(ke.planned_start_date);return hD(Fe,$e)}),ue=$e=>{$e?m.value=z.value.map(ke=>ke.name):m.value=[]},pe=$e=>{const ke=m.value.indexOf($e);ke>-1?m.value.splice(ke,1):m.value.push($e)},ye=$e=>({Planned:"bg-gray-100 text-gray-800",Scheduled:"bg-blue-100 text-blue-800","In Progress":"bg-yellow-100 text-yellow-800","On Hold":"bg-red-100 text-red-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-gray-200 text-gray-600",Rescheduled:"bg-orange-100 text-orange-800"})[$e]||"bg-gray-100 text-gray-800",Me=$e=>({Financial:"blue",Operational:"green",Compliance:"purple",IT:"orange",Integrated:"red","Special Investigation":"gray","Follow-up":"yellow"})[$e]||"gray",Te=$e=>({Planned:"gray",Scheduled:"blue","In Progress":"yellow","On Hold":"red",Completed:"green",Cancelled:"gray",Rescheduled:"orange"})[$e]||"gray",qe=$e=>{s.value=$e,A.value=me({},$e),a.value=!0},We=$e=>le(this,null,function*(){if(confirm(`Are you sure you want to delete audit "${$e.calendar_id}"?`))try{yield n.deleteAuditCalendarEntry($e.name),yield X()}catch(ke){console.error("Error deleting audit:",ke)}}),at=()=>le(this,null,function*(){S.value=!0;try{console.log("Exporting calendar data...")}finally{S.value=!1}}),st=Q(""),Ve=Q(!1),De=[{id:"annual-financial",name:"Annual Financial Audit",description:"Complete financial audit cycle with quarterly reviews",audits:5,duration:12},{id:"compliance-check",name:"Compliance Review",description:"Regulatory compliance and internal controls assessment",audits:8,duration:6},{id:"operational-efficiency",name:"Operational Efficiency",description:"Process optimization and efficiency improvement audits",audits:6,duration:9},{id:"it-security",name:"IT Security Audit",description:"Information security and data protection assessments",audits:4,duration:8}],Le=J(()=>15),Re=J(()=>Le.value-O.value),Se=J(()=>Le.value===0?0:Math.round(O.value/Le.value*100)),Ge=J(()=>[{name:"John Smith",audits:3,utilization:75},{name:"Sarah Johnson",audits:2,utilization:50},{name:"Mike Davis",audits:4,utilization:90},{name:"Lisa Brown",audits:1,utilization:25}]),en=$e=>{console.log("Applying template:",$e),k.value=!1},Ln=()=>le(this,null,function*(){if(!(!st.value||m.value.length===0)){Ve.value=!0;try{for(const $e of m.value)yield n.updateAuditCalendarEntry($e,{status:st.value});m.value=[],st.value="",x.value=!1,yield X()}catch($e){console.error("Error applying bulk status update:",$e)}finally{Ve.value=!1}}}),Ne=()=>le(this,null,function*(){if(m.value.length!==0&&confirm(`Are you sure you want to delete ${m.value.length} selected audits? This action cannot be undone.`))try{for(const $e of m.value)yield n.deleteAuditCalendarEntry($e);m.value=[],x.value=!1,yield X()}catch($e){console.error("Error deleting audits:",$e)}});return bt(()=>le(this,null,function*(){yield X()})),($e,ke)=>(T(),P("div",mut,[u("div",gut,[u("div",null,[u("div",vut,[u("div",yut,[b(y(er),{class:"h-6 w-6 text-blue-600"})]),ke[18]||(ke[18]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Calendar"),u("p",{class:"text-gray-600 mt-1"}," Schedule and manage audit engagements and timelines ")],-1))])]),u("div",but,[u("div",_ut,[u("div",xut,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:at,loading:S.value},{prefix:D(()=>[b(y(bn),{class:"h-3.5 w-3.5"})]),default:D(()=>[ke[19]||(ke[19]=W(" Export ",-1))]),_:1},8,["loading"])]),u("div",wut,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:ke[0]||(ke[0]=Fe=>k.value=!0)},{prefix:D(()=>[b(y(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[ke[20]||(ke[20]=W(" Templates ",-1))]),_:1})]),u("div",kut,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:X,loading:r.value},{prefix:D(()=>[b(y(hn),{class:"h-3.5 w-3.5"})]),default:D(()=>[ke[21]||(ke[21]=W(" Refresh ",-1))]),_:1},8,["loading"])]),u("div",Sut,[b(y(Z),{variant:"solid",theme:"blue",size:"sm",onClick:ke[1]||(ke[1]=Fe=>a.value=!0)},{prefix:D(()=>[b(y(tt),{class:"h-3.5 w-3.5"})]),default:D(()=>[ke[22]||(ke[22]=W(" Schedule Audit ",-1))]),_:1})])])])]),b(Xlt,{stats:U.value},null,8,["stats"]),b(out,{filters:C.value,"status-options":$,"audit-type-options":M,"universe-options":B.value,"selected-count":m.value.length,"filtered-count":z.value.length,"total-count":R.value.length,"view-mode":o.value,"onUpdate:filters":re,onBulkActions:ke[2]||(ke[2]=Fe=>x.value=!0),onCapacityPlanning:ke[3]||(ke[3]=Fe=>w.value=!0),onToggleView:ee},null,8,["filters","universe-options","selected-count","filtered-count","total-count","view-mode"]),u("div",Cut,[o.value==="calendar"?(T(),P("div",Aut,[u("div",Tut,[u("div",Eut,[b(y(Z),{variant:"outline",size:"sm",onClick:K},{default:D(()=>[b(y(pr),{class:"h-4 w-4"})]),_:1}),u("h3",Mut,E(y(KH)(l.value,"MMMM yyyy")),1),b(y(Z),{variant:"outline",size:"sm",onClick:H},{default:D(()=>[b(y(tr),{class:"h-4 w-4"})]),_:1})]),b(y(Z),{variant:"outline",size:"sm",onClick:ke[4]||(ke[4]=Fe=>l.value=new Date)},{default:D(()=>[...ke[23]||(ke[23]=[W(" Today ",-1)])]),_:1})]),u("div",$ut,[(T(),P(_e,null,we(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Fe=>u("div",{key:Fe,class:"p-3 text-center text-sm font-medium text-gray-500 bg-gray-50 rounded-lg"},E(Fe),1)),64))]),u("div",Dut,[(T(!0),P(_e,null,we(G.value,Fe=>(T(),P("div",{key:Fe.date,class:fe(["min-h-32 p-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",{"bg-blue-50 border-blue-200":Y(Fe.date),"bg-gray-100":!y(Vx)(Fe.date,l.value)}]),onClick:St=>ae(Fe.date)},[u("div",Put,[u("span",{class:fe(["text-sm font-medium",{"text-blue-600":Y(Fe.date),"text-gray-400":!y(Vx)(Fe.date,l.value),"text-gray-900":y(Vx)(Fe.date,l.value)&&!Y(Fe.date)}])},E(y(KH)(Fe.date,"d")),3),Fe.audits.length>0?(T(),P("div",Iut,E(Fe.audits.length),1)):ie("",!0)]),u("div",Out,[(T(!0),P(_e,null,we(Fe.audits.slice(0,3),St=>(T(),P("div",{key:St.name,class:fe(["text-xs p-1 rounded truncate",ye(St.status)]),onClick:dt(Vn=>qe(St),["stop"])},E(St.calendar_id||St.name),11,Lut))),128)),Fe.audits.length>3?(T(),P("div",Vut," +"+E(Fe.audits.length-3)+" more ",1)):ie("",!0)])],10,Rut))),128))])])):(T(),P("div",Nut,[u("div",jut,[u("div",Fut,[u("div",But,[b(y(Ut),{modelValue:F.value,"onUpdate:modelValue":ue},null,8,["modelValue"]),u("span",zut,E(m.value.length)+" of "+E(z.value.length)+" selected ",1)]),u("div",Uut,[b(y(Z),{variant:"outline",size:"sm",onClick:ke[5]||(ke[5]=Fe=>g.value=g.value==="start_date"?"end_date":"start_date")},{default:D(()=>[b(y(Yu),{class:"h-4 w-4 mr-2"}),W(" Sort by "+E(g.value==="start_date"?"End Date":"Start Date"),1)]),_:1})])])]),u("div",Hut,[u("table",qut,[u("thead",Wut,[u("tr",null,[u("th",Gut,[b(y(Ut),{modelValue:F.value,"onUpdate:modelValue":ue},null,8,["modelValue"])]),ke[24]||(ke[24]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Calendar ID ",-1)),ke[25]||(ke[25]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ",-1)),ke[26]||(ke[26]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Universe ",-1)),ke[27]||(ke[27]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Start Date ",-1)),ke[28]||(ke[28]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," End Date ",-1)),ke[29]||(ke[29]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Progress ",-1)),ke[30]||(ke[30]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),ke[31]||(ke[31]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",Yut,[(T(!0),P(_e,null,we(q.value,Fe=>{var St;return T(),P("tr",{key:Fe.name,class:fe(["hover:bg-gray-50 transition-colors",{"bg-blue-50":m.value.includes(Fe.name)}])},[u("td",Kut,[b(y(Ut),{modelValue:m.value.includes(Fe.name),"onUpdate:modelValue":Vn=>pe(Fe.name)},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Xut,[u("div",Zut,[u("div",Qut,[u("div",Jut,[b(y(vt),{class:"h-5 w-5 text-gray-600"})])]),u("div",edt,[u("div",tdt,E(Fe.calendar_id||Fe.name),1),u("div",ndt,E((St=Fe.objectives)==null?void 0:St.substring(0,50))+"... ",1)])])]),u("td",rdt,[b(y(Ee),{theme:Me(Fe.audit_type)},{default:D(()=>[W(E(Fe.audit_type),1)]),_:2},1032,["theme"])]),u("td",idt,E(de(Fe.audit_universe)),1),u("td",adt,E(ve(Fe.planned_start_date)),1),u("td",sdt,E(ve(Fe.planned_end_date)),1),u("td",odt,[u("div",ldt,[u("div",udt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${Fe.progress_percentage||0}%`})},null,4)]),u("span",ddt,E(Fe.progress_percentage||0)+"%",1)])]),u("td",cdt,[b(y(Ee),{theme:Te(Fe.status)},{default:D(()=>[W(E(Fe.status),1)]),_:2},1032,["theme"])]),u("td",fdt,[u("div",pdt,[b(y(Z),{variant:"ghost",size:"sm",onClick:Vn=>se(Fe)},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:Vn=>te(Fe)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:Vn=>We(Fe),theme:"red"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2)}),128))])])]),u("div",hdt,[u("div",mdt,[u("div",gdt," Showing "+E((v.value-1)*_.value+1)+" to "+E(Math.min(v.value*_.value,z.value.length))+" of "+E(z.value.length)+" results ",1),u("div",vdt,[b(y(Z),{variant:"outline",size:"sm",disabled:v.value===1,onClick:ke[6]||(ke[6]=Fe=>v.value--)},{default:D(()=>[b(y(pr),{class:"h-4 w-4"}),ke[32]||(ke[32]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",ydt," Page "+E(v.value)+" of "+E(N.value),1),b(y(Z),{variant:"outline",size:"sm",disabled:v.value===N.value,onClick:ke[7]||(ke[7]=Fe=>v.value++)},{default:D(()=>[ke[33]||(ke[33]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])]))]),z.value.length===0?(T(),P("div",bdt,[b(y(er),{class:"mx-auto h-12 w-12 text-gray-400"}),ke[35]||(ke[35]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No audits scheduled",-1)),u("p",_dt,E(C.value.searchQuery||C.value.statusFilter||C.value.typeFilter||C.value.universeFilter?"No audits match your current filters.":"Get started by scheduling your first audit."),1),u("div",xdt,[b(y(Z),{onClick:ke[8]||(ke[8]=Fe=>a.value=!0),class:"bg-blue-600 hover:bg-blue-700 text-white"},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),ke[34]||(ke[34]=W(" Schedule Audit ",-1))]),_:1})])])):ie("",!0),b(y(zt),{modelValue:a.value,"onUpdate:modelValue":ke[10]||(ke[10]=Fe=>a.value=Fe),title:s.value?"Edit Audit Schedule":"Schedule New Audit",size:"4xl"},{body:D(()=>[b(hut,{form:A.value,"universe-options":B.value,"audit-type-options":M,"status-options":$,"plan-options":j.value},null,8,["form","universe-options","plan-options"])]),footer:D(()=>[u("div",wdt,[b(y(Z),{variant:"outline",onClick:ke[9]||(ke[9]=Fe=>a.value=!1)},{default:D(()=>[...ke[36]||(ke[36]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{onClick:ne,loading:i.value,class:"bg-blue-600 hover:bg-blue-700 text-white"},{default:D(()=>[W(E(s.value?"Update":"Schedule")+" Audit ",1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"]),b(y(zt),{modelValue:k.value,"onUpdate:modelValue":ke[12]||(ke[12]=Fe=>k.value=Fe),title:"Audit Calendar Templates",size:"3xl"},{body:D(()=>[u("div",kdt,[ke[37]||(ke[37]=u("p",{class:"text-gray-600"}," Choose from pre-built audit calendar templates to quickly schedule your audits. ",-1)),u("div",Sdt,[(T(),P(_e,null,we(De,Fe=>u("div",{key:Fe.id,class:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all cursor-pointer",onClick:St=>en(Fe)},[u("div",Adt,[u("div",Tdt,[b(y(vt),{class:"h-5 w-5 text-blue-600"})]),u("div",Edt,[u("h4",Mdt,E(Fe.name),1),u("p",$dt,E(Fe.description),1),u("div",Ddt,[u("span",null,E(Fe.audits)+" audits",1),u("span",null,E(Fe.duration)+" months",1)])])])],8,Cdt)),64))])])]),footer:D(()=>[u("div",Rdt,[b(y(Z),{variant:"outline",onClick:ke[11]||(ke[11]=Fe=>k.value=!1)},{default:D(()=>[...ke[38]||(ke[38]=[W(" Cancel ",-1)])]),_:1})])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:x.value,"onUpdate:modelValue":ke[15]||(ke[15]=Fe=>x.value=Fe),title:"Bulk Actions",size:"2xl"},{body:D(()=>[u("div",Pdt,[u("div",Idt,[u("div",Odt,[b(y(Bc),{class:"h-5 w-5 text-blue-600"}),u("span",Ldt,E(m.value.length)+" audits selected ",1)])]),u("div",Vdt,[u("div",null,[ke[40]||(ke[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Update Status ",-1)),b(y(Ke),{modelValue:st.value,"onUpdate:modelValue":ke[13]||(ke[13]=Fe=>st.value=Fe),options:$,placeholder:"Select new status"},null,8,["modelValue"]),b(y(Z),{variant:"solid",theme:"blue",size:"sm",class:"mt-2",onClick:Ln,loading:Ve.value},{default:D(()=>[...ke[39]||(ke[39]=[W(" Apply Status Update ",-1)])]),_:1},8,["loading"])]),u("div",Ndt,[ke[42]||(ke[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Bulk Delete ",-1)),ke[43]||(ke[43]=u("p",{class:"text-sm text-gray-600 mb-3"}," This action cannot be undone. All selected audits will be permanently deleted. ",-1)),b(y(Z),{variant:"solid",theme:"red",size:"sm",onClick:Ne},{default:D(()=>[...ke[41]||(ke[41]=[W(" Delete Selected Audits ",-1)])]),_:1})])])])]),footer:D(()=>[u("div",jdt,[b(y(Z),{variant:"outline",onClick:ke[14]||(ke[14]=Fe=>x.value=!1)},{default:D(()=>[...ke[44]||(ke[44]=[W(" Close ",-1)])]),_:1})])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:w.value,"onUpdate:modelValue":ke[17]||(ke[17]=Fe=>w.value=Fe),title:"Capacity Planning",size:"4xl"},{body:D(()=>[u("div",Fdt,[u("div",Bdt,[u("div",zdt,[u("div",Udt,[u("div",null,[ke[45]||(ke[45]=u("p",{class:"text-sm font-medium text-blue-700"},"Total Capacity",-1)),u("p",Hdt,E(Le.value),1)]),b(y(Ro),{class:"h-8 w-8 text-blue-600"})])]),u("div",qdt,[u("div",Wdt,[u("div",null,[ke[46]||(ke[46]=u("p",{class:"text-sm font-medium text-green-700"},"Available",-1)),u("p",Gdt,E(Re.value),1)]),b(y(Gt),{class:"h-8 w-8 text-green-600"})])]),u("div",Ydt,[u("div",Kdt,[u("div",null,[ke[47]||(ke[47]=u("p",{class:"text-sm font-medium text-yellow-700"},"Utilization",-1)),u("p",Xdt,E(Se.value)+"%",1)]),b(y(J1),{class:"h-8 w-8 text-yellow-600"})])])]),u("div",Zdt,[ke[48]||(ke[48]=u("div",{class:"px-4 py-3 border-b border-gray-200 bg-gray-50"},[u("h4",{class:"font-medium text-gray-900"},"Auditor Workload")],-1)),u("div",Qdt,[u("div",Jdt,[(T(!0),P(_e,null,we(Ge.value,Fe=>(T(),P("div",{key:Fe.name,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[u("div",ect,[u("div",tct,[b(y(Ro),{class:"h-4 w-4 text-blue-600"})]),u("div",null,[u("p",nct,E(Fe.name),1),u("p",rct,E(Fe.audits)+" active audits",1)])]),u("div",ict,[u("div",act,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${Fe.utilization}%`})},null,4)]),u("p",sct,E(Fe.utilization)+"% utilized",1)])]))),128))])])])])]),footer:D(()=>[u("div",oct,[b(y(Z),{variant:"outline",onClick:ke[16]||(ke[16]=Fe=>w.value=!1)},{default:D(()=>[...ke[49]||(ke[49]=[W(" Close ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},uct={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4 mb-6"},dct={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-5 hover:shadow-lg transition-all duration-200"},cct={class:"flex items-center justify-between"},fct={class:"text-3xl font-bold text-purple-900 mt-1"},pct={class:"text-xs text-purple-600 mt-1"},hct={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},mct={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-5 hover:shadow-lg transition-all duration-200"},gct={class:"flex items-center justify-between"},vct={class:"text-3xl font-bold text-green-900 mt-1"},yct={class:"p-3 bg-green-500 rounded-xl shadow-sm"},bct={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-5 hover:shadow-lg transition-all duration-200"},_ct={class:"flex items-center justify-between"},xct={class:"w-full"},wct={class:"text-3xl font-bold text-blue-900 mt-1"},kct={class:"w-full bg-blue-200 rounded-full h-2 mt-2"},Sct={class:"p-3 bg-blue-500 rounded-xl shadow-sm ml-3"},Cct={class:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl border border-amber-200 p-5 hover:shadow-lg transition-all duration-200"},Act={class:"flex items-center justify-between"},Tct={class:"text-3xl font-bold text-amber-900 mt-1"},Ect={class:"text-xs text-amber-600 mt-1"},Mct={class:"p-3 bg-amber-500 rounded-xl shadow-sm"},$ct={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200 p-5 hover:shadow-lg transition-all duration-200"},Dct={class:"flex items-center justify-between"},Rct={class:"text-3xl font-bold text-red-900 mt-1"},Pct={class:"p-3 bg-red-500 rounded-xl shadow-sm"},Ict={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},Oct={class:"bg-white rounded-xl border border-gray-200 p-5"},Lct={class:"space-y-3"},Vct={class:"w-24 text-sm text-gray-600"},Nct={class:"flex-1 mx-3"},jct={class:"w-full bg-gray-100 rounded-full h-3"},Fct={class:"w-12 text-sm font-medium text-gray-900 text-right"},Bct={class:"bg-white rounded-xl border border-gray-200 p-5"},zct={class:"grid grid-cols-2 gap-3"},Uct={class:"text-xs text-gray-500"},Hct={__name:"ProgramStats",props:{stats:{type:Object,default:()=>({total:0,templates:0,active:0,avgCompletion:0,totalProcedures:0,completedProcedures:0,overdue:0,byType:{},proceduresByStatus:{}})},showDetails:{type:Boolean,default:!0}},setup(t){const e=t,n=J(()=>{const i=e.stats.byType||{},a=Object.values(i).reduce((o,l)=>o+l,0)||1,s={Financial:"bg-blue-500",Operational:"bg-green-500",Compliance:"bg-purple-500",IT:"bg-amber-500",Inventory:"bg-cyan-500",Cash:"bg-emerald-500",Sales:"bg-pink-500",Procurement:"bg-indigo-500"};return Object.entries(i).map(([o,l])=>({label:o,count:l,percentage:l/a*100,color:s[o]||"bg-gray-400"}))}),r=J(()=>{const i=e.stats.proceduresByStatus||{};return[{label:"Not Started",count:i["Not Started"]||0,color:"text-gray-600"},{label:"In Progress",count:i["In Progress"]||0,color:"text-blue-600"},{label:"Completed",count:i.Completed||0,color:"text-green-600"},{label:"N/A",count:i["Not Applicable"]||0,color:"text-amber-600"}]});return(i,a)=>(T(),P(_e,null,[u("div",uct,[u("div",dct,[u("div",cct,[u("div",null,[a[0]||(a[0]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Total Programs",-1)),u("p",fct,E(t.stats.total||0),1),u("p",pct,E(t.stats.templates||0)+" templates",1)]),u("div",hct,[b(y(vt),{class:"h-7 w-7 text-white"})])])]),u("div",mct,[u("div",gct,[u("div",null,[a[1]||(a[1]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Active",-1)),u("p",vct,E(t.stats.active||0),1),a[2]||(a[2]=u("p",{class:"text-xs text-green-600 mt-1"},"Currently in use",-1))]),u("div",yct,[b(y(eb),{class:"h-7 w-7 text-white"})])])]),u("div",bct,[u("div",_ct,[u("div",xct,[a[3]||(a[3]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Avg Completion",-1)),u("p",wct,E(t.stats.avgCompletion||0)+"%",1),u("div",kct,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${Math.min(t.stats.avgCompletion||0,100)}%`})},null,4)])]),u("div",Sct,[b(y(qS),{class:"h-7 w-7 text-white"})])])]),u("div",Cct,[u("div",Act,[u("div",null,[a[4]||(a[4]=u("p",{class:"text-sm font-semibold text-amber-700 uppercase tracking-wide"},"Procedures",-1)),u("p",Tct,E(t.stats.totalProcedures||0),1),u("p",Ect,E(t.stats.completedProcedures||0)+" completed",1)]),u("div",Mct,[b(y(I0),{class:"h-7 w-7 text-white"})])])]),u("div",$ct,[u("div",Dct,[u("div",null,[a[5]||(a[5]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Overdue",-1)),u("p",Rct,E(t.stats.overdue||0),1),a[6]||(a[6]=u("p",{class:"text-xs text-red-600 mt-1"},"Need attention",-1))]),u("div",Pct,[b(y(zr),{class:"h-7 w-7 text-white"})])])])]),t.showDetails?(T(),P("div",Ict,[u("div",Oct,[a[7]||(a[7]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Programs by Type",-1)),u("div",Lct,[(T(!0),P(_e,null,we(n.value,s=>(T(),P("div",{key:s.label,class:"flex items-center"},[u("div",Vct,E(s.label),1),u("div",Nct,[u("div",jct,[u("div",{class:fe(["h-3 rounded-full transition-all duration-300",s.color]),style:nt({width:`${s.percentage}%`})},null,6)])]),u("div",Fct,E(s.count),1)]))),128))])]),u("div",Bct,[a[8]||(a[8]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Procedure Status",-1)),u("div",zct,[(T(!0),P(_e,null,we(r.value,s=>(T(),P("div",{key:s.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[u("p",{class:fe(["text-lg font-bold",s.color])},E(s.count),3),u("p",Uct,E(s.label),1)]))),128))])])])):ie("",!0)],64))}},qct={class:"flex flex-wrap items-center gap-3 mb-6"},Wct={class:"flex-1 min-w-[250px] max-w-md"},Gct={class:"relative"},Yct=["value"],Kct={class:"w-36"},Xct={class:"w-36"},Zct={class:"w-36"},Qct={class:"flex items-center gap-1 bg-gray-100 rounded-lg p-1"},Jct={key:0,class:"flex flex-wrap gap-2 mb-4"},eft={key:0,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium"},tft={key:1,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium"},nft={key:2,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},rft={key:3,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium"},ift={__name:"ProgramFilters",props:{searchQuery:{type:String,default:""},typeFilter:{type:String,default:""},templateFilter:{type:String,default:""},statusFilter:{type:String,default:""},viewMode:{type:String,default:"table"}},emits:["update:searchQuery","update:typeFilter","update:templateFilter","update:statusFilter","update:viewMode"],setup(t,{emit:e}){const n=t,r=e,i=[{label:"All Types",value:""},{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Inventory",value:"Inventory"},{label:"Cash",value:"Cash"},{label:"Sales",value:"Sales"},{label:"Procurement",value:"Procurement"}],a=[{label:"All Programs",value:""},{label:"Templates Only",value:"templates"},{label:"Programs Only",value:"programs"}],s=[{label:"All Status",value:""},{label:"Not Started",value:"not_started"},{label:"In Progress",value:"in_progress"},{label:"Completed",value:"completed"}],o=J(()=>n.searchQuery||n.typeFilter||n.templateFilter||n.statusFilter),l=()=>{r("update:searchQuery",""),r("update:typeFilter",""),r("update:templateFilter",""),r("update:statusFilter","")};return(d,c)=>(T(),P(_e,null,[u("div",qct,[u("div",Wct,[u("div",Gct,[b(y(Rn),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),u("input",{type:"text",value:t.searchQuery,onInput:c[0]||(c[0]=f=>d.$emit("update:searchQuery",f.target.value)),placeholder:"Search programs...",class:"w-full pl-10 pr-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all"},null,40,Yct),t.searchQuery?(T(),P("button",{key:0,onClick:c[1]||(c[1]=f=>d.$emit("update:searchQuery","")),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},[b(y(ht),{class:"h-4 w-4"})])):ie("",!0)])]),u("div",Kct,[b(y(ge),{type:"select",modelValue:t.typeFilter,"onUpdate:modelValue":c[2]||(c[2]=f=>d.$emit("update:typeFilter",f)),options:i,size:"sm",placeholder:"All Types"},null,8,["modelValue"])]),u("div",Xct,[b(y(ge),{type:"select",modelValue:t.templateFilter,"onUpdate:modelValue":c[3]||(c[3]=f=>d.$emit("update:templateFilter",f)),options:a,size:"sm",placeholder:"All Programs"},null,8,["modelValue"])]),u("div",Zct,[b(y(ge),{type:"select",modelValue:t.statusFilter,"onUpdate:modelValue":c[4]||(c[4]=f=>d.$emit("update:statusFilter",f)),options:s,size:"sm",placeholder:"All Status"},null,8,["modelValue"])]),u("div",Qct,[u("button",{onClick:c[5]||(c[5]=f=>d.$emit("update:viewMode","table")),class:fe(["p-2 rounded-md transition-all duration-200",t.viewMode==="table"?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Table View"},[b(y(YD),{class:"h-4 w-4"})],2),u("button",{onClick:c[6]||(c[6]=f=>d.$emit("update:viewMode","cards")),class:fe(["p-2 rounded-md transition-all duration-200",t.viewMode==="cards"?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Card View"},[b(y(GD),{class:"h-4 w-4"})],2)]),o.value?(T(),P("button",{key:0,onClick:l,class:"flex items-center gap-1.5 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all"},[b(y(hY),{class:"h-4 w-4"}),c[11]||(c[11]=u("span",null,"Clear",-1))])):ie("",!0)]),o.value?(T(),P("div",Jct,[t.searchQuery?(T(),P("span",eft,[b(y(Rn),{class:"h-3 w-3"}),W(' "'+E(t.searchQuery)+'" ',1),u("button",{onClick:c[7]||(c[7]=f=>d.$emit("update:searchQuery","")),class:"hover:text-purple-600"},[b(y(ht),{class:"h-3 w-3"})])])):ie("",!0),t.typeFilter?(T(),P("span",tft,[W(" Type: "+E(t.typeFilter)+" ",1),u("button",{onClick:c[8]||(c[8]=f=>d.$emit("update:typeFilter","")),class:"hover:text-blue-600"},[b(y(ht),{class:"h-3 w-3"})])])):ie("",!0),t.templateFilter?(T(),P("span",nft,[W(E(t.templateFilter==="templates"?"Templates Only":"Programs Only")+" ",1),u("button",{onClick:c[9]||(c[9]=f=>d.$emit("update:templateFilter","")),class:"hover:text-green-600"},[b(y(ht),{class:"h-3 w-3"})])])):ie("",!0),t.statusFilter?(T(),P("span",rft,[W(" Status: "+E(t.statusFilter)+" ",1),u("button",{onClick:c[10]||(c[10]=f=>d.$emit("update:statusFilter","")),class:"hover:text-amber-600"},[b(y(ht),{class:"h-3 w-3"})])])):ie("",!0)])):ie("",!0)],64))}};typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;const ZH=()=>{};function aft(t,e){function n(...r){return new Promise((i,a)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(i).catch(a)})}return n}function sft(t,e={}){let n,r,i=ZH;const a=l=>{clearTimeout(l),i(),i=ZH};let s;return l=>{const d=Fr(t),c=Fr(e.maxWait);return n&&a(n),d<=0||c!==void 0&&c<=0?(r&&(a(r),r=void 0),Promise.resolve(l())):new Promise((f,p)=>{i=e.rejectOnCancel?p:f,s=l,c&&!r&&(r=setTimeout(()=>{n&&a(n),r=void 0,f(s())},c)),n=setTimeout(()=>{r&&a(r),r=void 0,f(l())},d)})}}function oft(t,e=200,n={}){return aft(sft(e,n),t)}function lft(t,e={}){const n=Q([]),r=Q(!1),i=Q(new Map),a=Q(new Map),s=Ie({url:"frappe.desk.search.search_link",params:{doctype:t,txt:"",filters:JSON.stringify(e)},auto:!1,transform:f=>f?f.map(p=>({label:p.description||p.value,value:p.value})):[],onSuccess:f=>{n.value=f||[],r.value=!1},onError:f=>{console.error(`Link field search error for ${t}:`,f),n.value=[],r.value=!1}});return{searchResults:n,isSearching:r,search:oft(f=>le(this,null,function*(){if(!f||f.trim()===""){n.value=[];return}const p=`${t}:${f.toLowerCase()}`;if(i.value.has(p)){n.value=i.value.get(p);return}r.value=!0,s.params.txt=f;try{yield s.fetch(),i.value.set(p,n.value)}catch(h){console.error("Search failed:",h),r.value=!1}}),300),getValue:(f,p)=>le(this,null,function*(){if(!f||!p||p.length===0)return null;const h=`${t}:${f}:${p.join(",")}`;if(a.value.has(h))return a.value.get(h);const m=Ie({url:"frappe.client.get_value",params:{doctype:t,name:f,fieldname:JSON.stringify(p)},auto:!1});try{yield m.fetch();const g=m.data;return a.value.set(h,g),g}catch(g){return console.error(`Failed to fetch ${t} values:`,g),null}}),clearCache:()=>{i.value.clear(),a.value.clear(),n.value=[]},clearResults:()=>{n.value=[]}}}const uft={class:"link-field"},dft={class:"w-full space-y-1.5"},cft={key:0,class:"block text-xs font-medium text-gray-700"},fft={key:0,class:"text-red-500"},pft=["disabled","onClick"],hft={key:0,class:"truncate text-gray-900"},mft={key:1,class:"text-gray-500"},gft={key:0,class:"mt-1 text-xs text-red-500"},vft={__name:"LinkField",props:{modelValue:{type:[String,Number],default:""},doctype:{type:String,required:!0},label:{type:String,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},fetchFields:{type:Array,default:()=>[]},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(t,{emit:e}){const n=t,r=e,{searchResults:i,isSearching:a,search:s,getValue:o}=lft(n.doctype,n.filters),l=Q(n.modelValue),d=Q(""),c=J(()=>i.value.map(m=>({label:m.label,value:m.value})));Je(()=>n.modelValue,m=>{l.value=m,m?f(m):d.value=""},{immediate:!0});const f=m=>le(this,null,function*(){if(!m){d.value="";return}if(n.fetchFields.length>0){const g=yield o(m,n.fetchFields);g?d.value=g[n.fetchFields[0]]||m:d.value=m}else d.value=m}),p=m=>{m&&m.length>0&&s(m)},h=m=>le(this,null,function*(){if(!m){l.value="",d.value="",r("update:modelValue",""),r("change",{value:"",relatedData:null});return}const g=typeof m=="object"?m.value:m;l.value=g,r("update:modelValue",g);let v=null;n.fetchFields.length>0?(v=yield o(g,n.fetchFields),v&&(d.value=v[n.fetchFields[0]]||g)):d.value=typeof m=="object"?m.label:g,r("change",{value:g,relatedData:v})});return(m,g)=>(T(),P("div",uft,[b(y(AK),{modelValue:l.value,"onUpdate:modelValue":[g[0]||(g[0]=v=>l.value=v),h],label:t.label,placeholder:t.placeholder,options:c.value,loading:y(a),"onUpdate:query":p},{target:D(({open:v,close:_,togglePopover:x,isOpen:w})=>[u("div",dft,[t.label?(T(),P("label",cft,[W(E(t.label)+" ",1),t.required?(T(),P("span",fft,"*")):ie("",!0)])):ie("",!0),u("button",{type:"button",class:fe(["flex h-9 w-full items-center justify-between gap-2 rounded border px-3 py-2 text-sm transition-colors",[w?"border-green-500 ring-2 ring-green-500 ring-opacity-20":"border-gray-300 hover:border-gray-400",t.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"]]),disabled:t.disabled,onClick:x},[d.value?(T(),P("span",hft,E(d.value),1)):(T(),P("span",mft,E(t.placeholder||`Select ${t.label||"option"}`),1)),(T(),P("svg",{class:fe(["h-4 w-4 text-gray-500 transition-transform",{"rotate-180":w}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...g[1]||(g[1]=[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],10,pft)])]),_:1},8,["modelValue","label","placeholder","options","loading"]),t.error?(T(),P("p",gft,E(t.error),1)):ie("",!0)]))}},At=Ft(vft,[["__scopeId","data-v-16e3f100"]]),yft={class:"h-[80vh] flex"},bft={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},_ft={class:"p-4"},xft={class:"space-y-2"},wft=["onClick"],kft={key:1},Sft={class:"flex-1 min-w-0"},Cft={class:"text-sm font-medium text-gray-900 truncate"},Aft={class:"text-xs text-gray-500 truncate"},Tft={class:"mt-4 p-3 bg-white rounded-lg border border-gray-200"},Eft={class:"flex items-center justify-between mb-2"},Mft={class:"text-xs font-semibold text-purple-600"},$ft={class:"w-full bg-gray-200 rounded-full h-1.5"},Dft={key:0,class:"mt-3 text-xs text-gray-500 text-center"},Rft={class:"flex-1 overflow-y-auto"},Pft={class:"p-6 space-y-8"},Ift={class:"space-y-6"},Oft={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Lft={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Vft={class:"flex gap-2"},Nft={class:"flex items-center mt-2"},jft={key:0},Fft={class:"space-y-6"},Bft={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},zft={class:"space-y-6"},Uft={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Hft={class:"flex items-center justify-between mb-4"},qft={class:"text-xs text-gray-500"},Wft={key:0,class:"space-y-4"},Gft={class:"flex items-start justify-between mb-4"},Yft={class:"flex items-center gap-2"},Kft={class:"text-sm font-medium text-gray-900"},Xft={class:"flex items-center gap-1"},Zft={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Qft={class:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Jft={class:"mt-4"},ept=["onUpdate:modelValue"],tpt={class:"mt-4"},npt=["onUpdate:modelValue"],rpt={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},ipt={class:"space-y-6"},apt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},spt={class:"flex items-center justify-between mb-4"},opt={class:"text-xs text-gray-500"},lpt={key:0,class:"space-y-4"},upt={class:"flex items-start justify-between mb-4"},dpt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},cpt={class:"md:col-span-2"},fpt=["onUpdate:modelValue"],ppt={class:"mt-4"},hpt=["onUpdate:modelValue"],mpt={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},gpt={class:"space-y-6"},vpt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},ypt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},bpt={class:"bg-gray-50 rounded-lg p-4"},_pt={class:"text-lg font-semibold text-gray-900 mt-1"},xpt={class:"bg-gray-50 rounded-lg p-4"},wpt={class:"text-lg font-semibold text-gray-900 mt-1"},kpt={class:"bg-gray-50 rounded-lg p-4"},Spt={class:"text-lg font-semibold text-gray-900 mt-1"},Cpt={class:"bg-gray-50 rounded-lg p-4"},Apt={class:"text-lg font-semibold text-gray-900 mt-1"},Tpt={class:"border-t border-gray-200 pt-4"},Ept={class:"space-y-2"},Mpt={class:"flex items-center justify-between w-full"},$pt={class:"flex items-center gap-2"},Dpt={class:"flex items-center gap-2"},Rpt={__name:"AuditProgramForm",props:{show:{type:Boolean,default:!1},program:{type:Object,default:null},mode:{type:String,default:"create"}},emits:["update:show","saved","close"],setup(t,{emit:e}){const n=t,r=e,i=Bo(),a=Q(0),s=Q(!1),o=Q(!1),l=Q(null),d=J({get:()=>n.show,set:L=>r("update:show",L)}),c=Q(f());function f(){return{program_id:"",program_name:"",audit_type:"",is_template:!1,engagement_reference:"",program_objectives:"",program_procedures:[],risk_areas:[]}}const p=[{id:"basic",title:"Basic Information",description:"Program ID and type"},{id:"objectives",title:"Program Objectives",description:"Define objectives"},{id:"procedures",title:"Audit Procedures",description:"Detailed procedures"},{id:"risks",title:"Risk Areas",description:"Key risk areas"},{id:"review",title:"Review & Submit",description:"Review and submit"}],h=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Inventory",value:"Inventory"},{label:"Cash",value:"Cash"},{label:"Sales",value:"Sales"},{label:"Procurement",value:"Procurement"}],m=[{label:"Inquiry",value:"Inquiry"},{label:"Observation",value:"Observation"},{label:"Inspection",value:"Inspection"},{label:"Re-performance",value:"Re-performance"},{label:"Analytical",value:"Analytical"},{label:"Confirmation",value:"Confirmation"},{label:"Computation",value:"Computation"}],g=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Not Applicable",value:"Not Applicable"}],v=[{label:"Existence",value:"Existence"},{label:"Completeness",value:"Completeness"},{label:"Accuracy",value:"Accuracy"},{label:"Valuation",value:"Valuation"},{label:"Rights",value:"Rights"},{label:"Presentation",value:"Presentation"},{label:"Occurrence",value:"Occurrence"},{label:"Cutoff",value:"Cutoff"}],_=[{label:"Random",value:"Random"},{label:"Systematic",value:"Systematic"},{label:"Judgmental",value:"Judgmental"},{label:"100%",value:"100%"},{label:"Other",value:"Other"}],x=[{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}];Je(()=>n.program,L=>{L?c.value=je(me(me({},f()),L),{program_procedures:L.program_procedures||[],risk_areas:L.risk_areas||[]}):c.value=f(),a.value=0},{immediate:!0}),Je(()=>n.show,L=>{L||(a.value=0,l.value=null)});const w=J(()=>{var U;let L=0;return c.value.program_id&&c.value.program_name&&c.value.audit_type&&(L+=25),c.value.program_objectives&&(L+=25),((U=c.value.program_procedures)==null?void 0:U.length)>0&&(L+=25),L+=25,L}),k=J(()=>{var L;return c.value.program_id&&c.value.program_name&&c.value.audit_type&&c.value.program_objectives&&((L=c.value.program_procedures)==null?void 0:L.length)>0}),S=J(()=>{var L;return[{label:"Program ID is set",valid:!!c.value.program_id},{label:"Program Name is set",valid:!!c.value.program_name},{label:"Audit Type is selected",valid:!!c.value.audit_type},{label:"Objectives are defined",valid:!!c.value.program_objectives},{label:"At least one procedure is added",valid:((L=c.value.program_procedures)==null?void 0:L.length)>0}]}),C=L=>{var U;switch(L){case"basic":return c.value.program_id&&c.value.program_name&&c.value.audit_type;case"objectives":return!!c.value.program_objectives;case"procedures":return((U=c.value.program_procedures)==null?void 0:U.length)>0;case"risks":return!0;case"review":return!0;default:return!1}},A=L=>C(L)?"bg-green-500 text-white":"bg-gray-300 text-gray-600",M=L=>{a.value=L},$=()=>{a.value>0&&a.value--},R=()=>{a.value<p.length-1&&a.value++},I=()=>{const L=new Date().getFullYear(),U=c.value.audit_type?c.value.audit_type.substring(0,3).toUpperCase():"AUD",G=Math.floor(Math.random()*1e3).toString().padStart(3,"0");c.value.program_id=`${U}-${L}-${G}`},B=()=>{var U;const L=((U=c.value.program_procedures)==null?void 0:U.length)||0;c.value.program_procedures.push({procedure_no:`P${(L+1).toString().padStart(3,"0")}`,procedure_section:"",procedure_description:"",procedure_type:"",control_objective:"",assertion:"",sample_size:0,sampling_method:"",assigned_to:"",budgeted_hours:0,actual_hours:0,status:"Not Started",completion_date:"",working_paper_reference:"",findings_count:0,conclusion:"",notes:""})},j=L=>{c.value.program_procedures.splice(L,1)},z=L=>{console.log("Edit procedure",L)},F=()=>{c.value.risk_areas.push({risk_description:"",risk_rating:"",procedures_addressing_risk:""})},q=L=>{c.value.risk_areas.splice(L,1)},N=L=>({High:"subtle",Medium:"subtle",Low:"subtle"})[L]||"subtle",O=()=>le(this,null,function*(){var L;s.value=!0;try{n.mode==="edit"&&((L=n.program)!=null&&L.name)?yield i.updateAuditProgram(n.program.name,c.value):yield i.createAuditProgram(c.value),l.value=new Date().toLocaleTimeString()}catch(U){console.error("Error saving draft:",U)}finally{s.value=!1}}),V=()=>le(this,null,function*(){var L;o.value=!0;try{n.mode==="edit"&&((L=n.program)!=null&&L.name)?yield i.updateAuditProgram(n.program.name,c.value):yield i.createAuditProgram(c.value),r("saved"),r("update:show",!1)}catch(U){console.error("Error submitting form:",U)}finally{o.value=!1}});return(L,U)=>(T(),he(y(zt),{modelValue:d.value,"onUpdate:modelValue":U[6]||(U[6]=G=>d.value=G),options:{title:t.mode==="edit"?"Edit Audit Program":"Create Audit Program",size:"full"}},{body:D(()=>{var G,X,re,ee,de,se;return[u("div",yft,[u("div",bft,[u("div",_ft,[U[8]||(U[8]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Progress",-1)),u("div",xft,[(T(),P(_e,null,we(p,(te,ne)=>u("div",{key:te.id,class:fe(["flex items-center space-x-2 p-2 rounded-lg cursor-pointer transition-all",a.value===ne?"bg-purple-100 border border-purple-300":"hover:bg-gray-100"]),onClick:ce=>M(ne)},[u("div",{class:fe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold",A(te.id)])},[C(te.id)?(T(),he(y(Wr),{key:0,class:"h-3 w-3"})):(T(),P("span",kft,E(ne+1),1))],2),u("div",Sft,[u("div",Cft,E(te.title),1),u("div",Aft,E(te.description),1)])],10,wft)),64))]),u("div",Tft,[u("div",Eft,[U[7]||(U[7]=u("span",{class:"text-xs font-medium text-gray-700"},"Overall Progress",-1)),u("span",Mft,E(w.value)+"%",1)]),u("div",$ft,[u("div",{class:"bg-purple-600 h-1.5 rounded-full transition-all duration-500",style:nt({width:`${w.value}%`})},null,4)])]),l.value?(T(),P("div",Dft," Last saved: "+E(l.value),1)):ie("",!0)])]),u("div",Rft,[u("div",Pft,[xe(u("div",Ift,[b(Rt,{title:"Basic Information",description:"Program identification and type",sectionNumber:1,color:"purple"}),u("div",Oft,[u("div",Lft,[u("div",null,[U[9]||(U[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Program ID "),u("span",{class:"text-red-500"},"*")],-1)),u("div",Vft,[b(y(ge),{modelValue:c.value.program_id,"onUpdate:modelValue":U[0]||(U[0]=te=>c.value.program_id=te),placeholder:"e.g., FIN-2025-001",class:"flex-1"},null,8,["modelValue"]),b(y(Z),{variant:"outline",size:"sm",onClick:I},{default:D(()=>[b(y(hn),{class:"h-4 w-4"})]),_:1})])]),b(y(ge),{modelValue:c.value.program_name,"onUpdate:modelValue":U[1]||(U[1]=te=>c.value.program_name=te),label:"Program Name",placeholder:"Enter program name",required:!0},null,8,["modelValue"]),u("div",null,[U[10]||(U[10]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Type "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:c.value.audit_type,"onUpdate:modelValue":U[2]||(U[2]=te=>c.value.audit_type=te),options:h,placeholder:"Select audit type"},null,8,["modelValue"])]),u("div",null,[U[12]||(U[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Is Template",-1)),u("div",Nft,[xe(u("input",{type:"checkbox","onUpdate:modelValue":U[3]||(U[3]=te=>c.value.is_template=te),class:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"},null,512),[[$n,c.value.is_template]]),U[11]||(U[11]=u("span",{class:"ml-2 text-sm text-gray-600"},"Save as reusable template",-1))])]),c.value.is_template?ie("",!0):(T(),P("div",jft,[U[13]||(U[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Engagement Reference",-1)),b(At,{modelValue:c.value.engagement_reference,"onUpdate:modelValue":U[4]||(U[4]=te=>c.value.engagement_reference=te),doctype:"Audit Engagement",placeholder:"Link to engagement"},null,8,["modelValue"])]))])])],512),[[ot,a.value===0]]),xe(u("div",Fft,[b(Rt,{title:"Program Objectives",description:"Define the objectives of this audit program",sectionNumber:2,color:"blue"}),u("div",Bft,[U[14]||(U[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Program Objectives "),u("span",{class:"text-red-500"},"*")],-1)),b(y(an),{content:c.value.program_objectives,onChange:U[5]||(U[5]=te=>c.value.program_objectives=te),placeholder:"Enter the objectives of this audit program...",editable:!0,editorClass:"min-h-[200px] prose-sm"},null,8,["content"])])],512),[[ot,a.value===1]]),xe(u("div",zft,[b(Rt,{title:"Audit Procedures",description:"Define the detailed audit procedures to be performed",sectionNumber:3,color:"green"}),u("div",Uft,[u("div",Hft,[u("div",null,[U[15]||(U[15]=u("h4",{class:"text-sm font-medium text-gray-900"},"Procedures",-1)),u("p",qft,E(((G=c.value.program_procedures)==null?void 0:G.length)||0)+" procedures defined",1)]),b(y(Z),{variant:"outline",size:"sm",onClick:B},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[U[16]||(U[16]=W(" Add Procedure ",-1))]),_:1})]),((X=c.value.program_procedures)==null?void 0:X.length)>0?(T(),P("div",Wft,[(T(!0),P(_e,null,we(c.value.program_procedures,(te,ne)=>(T(),P("div",{key:ne,class:"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors"},[u("div",Gft,[u("div",Yft,[b(y(Ee),{variant:"subtle",theme:"gray"},{default:D(()=>[W(E(ne+1),1)]),_:2},1024),u("span",Kft,E(te.procedure_no||"New Procedure"),1)]),u("div",Xft,[b(y(Z),{variant:"ghost",size:"sm",onClick:ce=>z(ne)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:ce=>j(ne),class:"text-red-500"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),u("div",Zft,[b(y(ge),{modelValue:te.procedure_no,"onUpdate:modelValue":ce=>te.procedure_no=ce,label:"Procedure No",placeholder:"e.g., P001",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),b(y(ge),{modelValue:te.procedure_section,"onUpdate:modelValue":ce=>te.procedure_section=ce,label:"Section",placeholder:"e.g., Revenue Testing",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[U[17]||(U[17]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Type",-1)),b(y(ge),{type:"select",modelValue:te.procedure_type,"onUpdate:modelValue":ce=>te.procedure_type=ce,options:m,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[U[18]||(U[18]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Status",-1)),b(y(ge),{type:"select",modelValue:te.status,"onUpdate:modelValue":ce=>te.status=ce,options:g,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",Qft,[u("div",null,[U[19]||(U[19]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Assertion",-1)),b(y(ge),{type:"select",modelValue:te.assertion,"onUpdate:modelValue":ce=>te.assertion=ce,options:v,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),b(y(ge),{modelValue:te.sample_size,"onUpdate:modelValue":ce=>te.sample_size=ce,type:"number",label:"Sample Size",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[U[20]||(U[20]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Sampling Method",-1)),b(y(ge),{type:"select",modelValue:te.sampling_method,"onUpdate:modelValue":ce=>te.sampling_method=ce,options:_,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),b(y(ge),{modelValue:te.budgeted_hours,"onUpdate:modelValue":ce=>te.budgeted_hours=ce,type:"number",label:"Budgeted Hours",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",Jft,[U[21]||(U[21]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Procedure Description",-1)),xe(u("textarea",{"onUpdate:modelValue":ce=>te.procedure_description=ce,rows:"2",class:"w-full text-sm border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe the audit procedure..."},null,8,ept),[[Mt,te.procedure_description]])]),u("div",tpt,[U[22]||(U[22]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Control Objective",-1)),xe(u("textarea",{"onUpdate:modelValue":ce=>te.control_objective=ce,rows:"2",class:"w-full text-sm border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"What control does this procedure test?"},null,8,npt),[[Mt,te.control_objective]])])]))),128))])):(T(),P("div",rpt,[b(y(kr),{class:"mx-auto h-12 w-12 text-gray-400"}),U[24]||(U[24]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No procedures defined",-1)),U[25]||(U[25]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add audit procedures to this program.",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-4",onClick:B},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[U[23]||(U[23]=W(" Add First Procedure ",-1))]),_:1})]))])],512),[[ot,a.value===2]]),xe(u("div",ipt,[b(Rt,{title:"Risk Areas",description:"Identify key risk areas addressed by this program",sectionNumber:4,color:"amber"}),u("div",apt,[u("div",spt,[u("div",null,[U[26]||(U[26]=u("h4",{class:"text-sm font-medium text-gray-900"},"Risk Areas",-1)),u("p",opt,E(((re=c.value.risk_areas)==null?void 0:re.length)||0)+" risk areas identified",1)]),b(y(Z),{variant:"outline",size:"sm",onClick:F},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[U[27]||(U[27]=W(" Add Risk Area ",-1))]),_:1})]),((ee=c.value.risk_areas)==null?void 0:ee.length)>0?(T(),P("div",lpt,[(T(!0),P(_e,null,we(c.value.risk_areas,(te,ne)=>(T(),P("div",{key:ne,class:"border border-gray-200 rounded-lg p-4 hover:border-amber-300 transition-colors"},[u("div",upt,[b(y(Ee),{variant:N(te.risk_rating),size:"sm"},{default:D(()=>[W(E(te.risk_rating||"Unrated"),1)]),_:2},1032,["variant"]),b(y(Z),{variant:"ghost",size:"sm",onClick:ce=>q(ne),class:"text-red-500"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",dpt,[u("div",cpt,[U[28]||(U[28]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Risk Description",-1)),xe(u("textarea",{"onUpdate:modelValue":ce=>te.risk_description=ce,rows:"2",class:"w-full text-sm border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe the risk..."},null,8,fpt),[[Mt,te.risk_description]])]),u("div",null,[U[29]||(U[29]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Risk Rating",-1)),b(y(ge),{type:"select",modelValue:te.risk_rating,"onUpdate:modelValue":ce=>te.risk_rating=ce,options:x},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",ppt,[U[30]||(U[30]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Procedures Addressing Risk",-1)),xe(u("textarea",{"onUpdate:modelValue":ce=>te.procedures_addressing_risk=ce,rows:"2",class:"w-full text-sm border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Which procedures address this risk?"},null,8,hpt),[[Mt,te.procedures_addressing_risk]])])]))),128))])):(T(),P("div",mpt,[b(y(nn),{class:"mx-auto h-12 w-12 text-gray-400"}),U[32]||(U[32]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No risk areas defined",-1)),U[33]||(U[33]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add risk areas to document what this program addresses.",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-4",onClick:F},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[U[31]||(U[31]=W(" Add Risk Area ",-1))]),_:1})]))])],512),[[ot,a.value===3]]),xe(u("div",gpt,[b(Rt,{title:"Review & Submit",description:"Review your program and submit",sectionNumber:5,color:"purple"}),u("div",vpt,[U[39]||(U[39]=u("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Program Summary",-1)),u("div",ypt,[u("div",bpt,[U[34]||(U[34]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Program ID",-1)),u("p",_pt,E(c.value.program_id||"Not set"),1)]),u("div",xpt,[U[35]||(U[35]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Type",-1)),u("p",wpt,E(c.value.audit_type||"Not set"),1)]),u("div",kpt,[U[36]||(U[36]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Procedures",-1)),u("p",Spt,E(((de=c.value.program_procedures)==null?void 0:de.length)||0),1)]),u("div",Cpt,[U[37]||(U[37]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Risk Areas",-1)),u("p",Apt,E(((se=c.value.risk_areas)==null?void 0:se.length)||0),1)])]),u("div",Tpt,[U[38]||(U[38]=u("h5",{class:"text-sm font-medium text-gray-900 mb-3"},"Validation Status",-1)),u("div",Ept,[(T(!0),P(_e,null,we(S.value,te=>(T(),P("div",{key:te.label,class:"flex items-center"},[(T(),he(Lt(te.valid?y(Qs):y(Fc)),{class:fe([te.valid?"text-green-500":"text-red-500","h-5 w-5 mr-2"])},null,8,["class"])),u("span",{class:fe([te.valid?"text-gray-700":"text-red-600","text-sm"])},E(te.label),3)]))),128))])])])],512),[[ot,a.value===4]])])])])]}),actions:D(()=>[u("div",Mpt,[u("div",$pt,[a.value>0?(T(),he(y(Z),{key:0,variant:"outline",onClick:$},{prefix:D(()=>[b(y(pr),{class:"h-4 w-4"})]),default:D(()=>[U[40]||(U[40]=W(" Previous ",-1))]),_:1})):ie("",!0)]),u("div",Dpt,[b(y(Z),{variant:"outline",onClick:O,loading:s.value},{prefix:D(()=>[b(y(Cr),{class:"h-4 w-4"})]),default:D(()=>[U[41]||(U[41]=W(" Save Draft ",-1))]),_:1},8,["loading"]),a.value<p.length-1?(T(),he(y(Z),{key:0,variant:"solid",theme:"purple",onClick:R},{suffix:D(()=>[b(y(tr),{class:"h-4 w-4"})]),default:D(()=>[U[42]||(U[42]=W(" Next ",-1))]),_:1})):(T(),he(y(Z),{key:1,variant:"solid",theme:"purple",onClick:V,loading:o.value,disabled:!k.value},{prefix:D(()=>[b(y(Wr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+E(t.mode==="edit"?"Update Program":"Create Program"),1)]),_:1},8,["loading","disabled"]))])])]),_:1},8,["modelValue","options"]))}},Ppt={class:"space-y-6"},Ipt={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},Opt={class:"flex items-center space-x-3"},Lpt={class:"p-2 bg-purple-100 rounded-lg"},Vpt={class:"flex flex-wrap items-center gap-2"},Npt={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},jpt={class:"flex items-center justify-between"},Fpt={class:"flex items-center"},Bpt={class:"text-sm text-red-800"},zpt={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Upt={class:"flex items-center justify-between"},Hpt={class:"flex items-center"},qpt={class:"text-sm text-green-800"},Wpt={key:2,class:"bg-purple-50 border border-purple-200 rounded-lg p-4"},Gpt={class:"flex items-center justify-between"},Ypt={class:"flex items-center space-x-3"},Kpt={class:"text-sm font-medium text-purple-900"},Xpt={class:"flex items-center space-x-2"},Zpt={class:"bg-white rounded-xl border border-gray-200 shadow-sm"},Qpt={class:"px-6 py-4 border-b border-gray-200"},Jpt={class:"flex items-center justify-between"},eht={class:"flex items-center space-x-2"},tht={class:"text-sm text-gray-600"},nht={key:0,class:"overflow-x-auto"},rht={class:"min-w-full divide-y divide-gray-200"},iht={class:"bg-gray-50"},aht={class:"px-6 py-3 text-left w-10"},sht=["checked"],oht={class:"bg-white divide-y divide-gray-200"},lht={class:"px-6 py-4"},uht=["checked","onChange"],dht={class:"px-6 py-4 whitespace-nowrap"},cht={class:"flex items-center"},fht={class:"flex-shrink-0 h-10 w-10"},pht={class:"h-10 w-10 rounded-lg bg-purple-500 flex items-center justify-center text-white font-bold text-sm"},hht={class:"ml-4"},mht={class:"text-sm font-semibold text-gray-900"},ght={class:"text-sm text-gray-500"},vht={class:"px-6 py-4 whitespace-nowrap"},yht={class:"px-6 py-4 whitespace-nowrap"},bht={key:1,class:"text-sm text-gray-500"},_ht={class:"px-6 py-4 whitespace-nowrap"},xht={class:"flex items-center"},wht={class:"w-20 bg-gray-200 rounded-full h-2 mr-2"},kht={class:"text-sm text-gray-600"},Sht={class:"px-6 py-4 whitespace-nowrap"},Cht={class:"flex items-center space-x-2"},Aht={class:"text-sm font-medium text-gray-900"},Tht={class:"text-xs text-gray-500"},Eht={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Mht={class:"flex items-center space-x-1"},$ht={key:1,class:"p-6"},Dht={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Rht=["onClick"],Pht={class:"flex items-start justify-between mb-4"},Iht={class:"flex items-center space-x-3"},Oht={class:"h-12 w-12 rounded-xl bg-purple-500 flex items-center justify-center text-white font-bold"},Lht={class:"text-lg font-semibold text-gray-900 group-hover:text-purple-900"},Vht={class:"text-sm text-gray-600 truncate max-w-[150px]"},Nht={class:"flex flex-col gap-1"},jht={class:"space-y-3"},Fht={class:"flex justify-between items-center mb-1"},Bht={class:"text-sm font-medium"},zht={class:"w-full bg-gray-200 rounded-full h-2"},Uht={class:"flex justify-between items-center"},Hht={class:"text-sm font-medium"},qht={class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200"},Wht={class:"flex items-center space-x-1"},Ght={class:"text-xs text-gray-500"},Yht={key:2,class:"px-6 py-20 text-center"},Kht={class:"mx-auto h-20 w-20 rounded-2xl bg-purple-50 border-2 border-purple-100 flex items-center justify-center mb-8 shadow-sm"},Xht={class:"max-w-md mx-auto"},Zht={class:"flex flex-col sm:flex-row justify-center gap-3"},Qht={key:3,class:"px-6 py-12 text-center"},Jht={key:0,class:"p-6 space-y-6"},emt={class:"flex items-start justify-between"},tmt={class:"text-lg font-semibold text-gray-900"},nmt={class:"text-sm text-gray-500"},rmt=["innerHTML"],imt={class:"text-sm font-medium text-gray-900 mb-2"},amt={class:"bg-gray-50 rounded-lg p-4"},smt={class:"grid grid-cols-4 gap-4 text-center"},omt={class:"text-2xl font-bold text-gray-900"},lmt={class:"text-2xl font-bold text-green-600"},umt={class:"text-2xl font-bold text-amber-600"},dmt={class:"text-2xl font-bold text-purple-600"},cmt={key:0},fmt={class:"space-y-2"},pmt={class:"text-sm text-gray-700"},hmt={class:"p-6 space-y-4"},mmt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gmt=["onClick"],vmt={class:"flex items-start space-x-3"},ymt={class:"p-2 bg-purple-100 rounded-lg"},bmt={class:"font-semibold text-gray-900"},_mt={class:"text-xs text-gray-500 mt-1"},xmt={__name:"AuditPrograms",setup(t){const e=Bo(),n=Q(!1),r=Q(""),i=Q(""),a=Q(!1),s=Q(!1),o=Q(!1),l=Q(!0),d=Q(null),c=Q(null),f=Q("create"),p=Q(""),h=Q(""),m=Q(""),g=Q(""),v=Q("table"),_=Q([]),x=J(()=>e.auditPrograms||[]),w=J(()=>x.value.filter(te=>te.is_template)),k=J(()=>{const te=x.value,ne=te.filter(pe=>pe.is_template).length,ce=te.filter(pe=>!pe.is_template&&(pe.completion_percent||0)<100).length,ve=te.filter(pe=>!pe.is_template),Y=ve.length>0?Math.round(ve.reduce((pe,ye)=>pe+(ye.completion_percent||0),0)/ve.length):0,K=te.reduce((pe,ye)=>pe+(ye.total_procedures||0),0),H=te.reduce((pe,ye)=>pe+(ye.completed_procedures||0),0),ae=new Date,be=te.filter(pe=>{if(pe.is_template||!pe.modified)return!1;const ye=new Date(pe.modified);return(ae-ye)/(1e3*60*60*24)>30&&(pe.completion_percent||0)<100}).length,ue={};return te.forEach(pe=>{pe.audit_type&&(ue[pe.audit_type]=(ue[pe.audit_type]||0)+1)}),{total:te.length,templates:ne,active:ce,avgCompletion:Y,totalProcedures:K,completedProcedures:H,overdue:be,byType:ue}}),S=J(()=>{let te=[...x.value];if(p.value){const ne=p.value.toLowerCase();te=te.filter(ce=>{var ve,Y,K;return((ve=ce.program_id)==null?void 0:ve.toLowerCase().includes(ne))||((Y=ce.program_name)==null?void 0:Y.toLowerCase().includes(ne))||((K=ce.audit_type)==null?void 0:K.toLowerCase().includes(ne))})}return h.value&&(te=te.filter(ne=>ne.audit_type===h.value)),m.value==="templates"?te=te.filter(ne=>ne.is_template):m.value==="programs"&&(te=te.filter(ne=>!ne.is_template)),g.value==="not_started"?te=te.filter(ne=>!ne.is_template&&(ne.completion_percent||0)===0):g.value==="in_progress"?te=te.filter(ne=>!ne.is_template&&(ne.completion_percent||0)>0&&(ne.completion_percent||0)<100):g.value==="completed"&&(te=te.filter(ne=>!ne.is_template&&(ne.completion_percent||0)>=100)),te}),C=()=>le(this,null,function*(){n.value=!0,r.value="";try{yield e.fetchAuditPrograms()}catch(te){console.error("Error refreshing data:",te),r.value="Failed to refresh data. Please try again."}finally{n.value=!1}}),A=()=>{d.value=null,f.value="create",a.value=!0},M=te=>le(this,null,function*(){try{const ne=yield e.fetchAuditProgramDetails(te.name);d.value=ne||te,f.value="edit",a.value=!0}catch(ne){console.error("Error fetching program details:",ne),d.value=te,f.value="edit",a.value=!0}}),$=te=>le(this,null,function*(){try{const ne=yield e.fetchAuditProgramDetails(te.name);c.value=ne||te,s.value=!0}catch(ne){console.error("Error fetching program details:",ne),c.value=te,s.value=!0}}),R=te=>le(this,null,function*(){try{const ne=yield e.fetchAuditProgramDetails(te.name);ne&&(d.value=je(me({},ne),{program_id:`${ne.program_id}_copy`,program_name:`${ne.program_name} (Copy)`,is_template:!1,name:null}),f.value="create",a.value=!0)}catch(ne){console.error("Error duplicating program:",ne)}}),I=te=>le(this,null,function*(){if(confirm(`Are you sure you want to delete "${te.program_name}"?`))try{yield e.deleteAuditProgram(te.name),i.value="Program deleted successfully",yield C(),setTimeout(()=>{i.value=""},3e3)}catch(ne){console.error("Error deleting program:",ne),r.value="Failed to delete program. Please try again."}}),B=()=>le(this,null,function*(){a.value=!1,d.value=null,i.value=f.value==="edit"?"Program updated successfully":"Program created successfully",yield C(),setTimeout(()=>{i.value=""},3e3)}),j=()=>{a.value=!1,d.value=null},z=()=>{o.value=!0},F=te=>le(this,null,function*(){try{const ne=yield e.fetchAuditProgramDetails(te.name);ne&&(d.value=je(me({},ne),{program_id:"",program_name:"",is_template:!1,engagement_reference:"",name:null}),f.value="create",o.value=!1,a.value=!0)}catch(ne){console.error("Error using template:",ne)}}),q=te=>({Financial:"subtle",Operational:"subtle",Compliance:"subtle",IT:"subtle",Inventory:"subtle",Cash:"subtle",Sales:"subtle",Procurement:"subtle"})[te]||"subtle",N=te=>te>=100?"bg-green-500":te>=75?"bg-blue-500":te>=50?"bg-yellow-500":te>=25?"bg-orange-500":"bg-red-500",O=te=>({Low:"subtle",Medium:"subtle",High:"subtle"})[te]||"subtle",V=te=>te?new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",L=te=>{const ne=_.value.indexOf(te);ne>-1?_.value.splice(ne,1):_.value.push(te)},U=()=>{_.value.length===S.value.length?_.value=[]:_.value=S.value.map(te=>te.name)},G=()=>{_.value=[]},X=()=>{p.value="",h.value="",m.value="",g.value=""},re=()=>le(this,null,function*(){if(_.value.length===0)return;const te=_.value.length;confirm(`Create templates for ${te} selected program${te>1?"s":""}?`)&&(i.value=`Created templates for ${te} program${te>1?"s":""}`,_.value=[],setTimeout(()=>{i.value=""},3e3))}),ee=()=>le(this,null,function*(){if(_.value.length===0)return;const te=_.value.length;if(confirm(`Are you sure you want to delete ${te} program${te>1?"s":""}?`))try{for(const ne of _.value)yield e.deleteAuditProgram(ne);_.value=[],i.value=`Deleted ${te} program${te>1?"s":""}`,yield C(),setTimeout(()=>{i.value=""},3e3)}catch(ne){console.error("Error deleting programs:",ne),r.value="Failed to delete some programs. Please try again."}}),de=()=>{const te=S.value.map(K=>({"Program ID":K.program_id,"Program Name":K.program_name,"Audit Type":K.audit_type,"Is Template":K.is_template?"Yes":"No","Completion %":K.completion_percent||0,Procedures:K.total_procedures||0,Completed:K.completed_procedures||0,Modified:V(K.modified)})),ne=[Object.keys(te[0]||{}).join(","),...te.map(K=>Object.values(K).map(H=>`"${H}"`).join(","))].join(`
`),ce=new Blob([ne],{type:"text/csv"}),ve=window.URL.createObjectURL(ce),Y=document.createElement("a");Y.href=ve,Y.download=`audit-programs-${new Date().toISOString().split("T")[0]}.csv`,Y.click(),window.URL.revokeObjectURL(ve)},se=te=>{(te.ctrlKey||te.metaKey)&&te.key==="n"&&(te.preventDefault(),A()),te.key==="Escape"&&(a.value?(a.value=!1,d.value=null):s.value&&(s.value=!1))};return Je(S,()=>{_.value=[]}),bt(()=>le(this,null,function*(){yield C(),document.addEventListener("keydown",se)})),Pi(()=>{document.removeEventListener("keydown",se)}),(te,ne)=>{var ce;return T(),P("div",Ppt,[u("div",Ipt,[u("div",null,[u("div",Opt,[u("div",Lpt,[b(y(vt),{class:"h-6 w-6 text-purple-600"})]),ne[12]||(ne[12]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Programs"),u("p",{class:"text-gray-600 mt-1"}," Create and manage comprehensive audit programs with detailed procedures ")],-1))])]),u("div",Vpt,[b(y(Z),{variant:"outline",size:"sm",onClick:de,disabled:x.value.length===0},{prefix:D(()=>[b(y(bn),{class:"h-4 w-4"})]),default:D(()=>[ne[13]||(ne[13]=W(" Export ",-1))]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",size:"sm",onClick:C,loading:n.value},{prefix:D(()=>[b(y(hn),{class:"h-4 w-4"})]),default:D(()=>[ne[14]||(ne[14]=W(" Refresh ",-1))]),_:1},8,["loading"]),b(y(Z),{variant:"outline",theme:"purple",size:"sm",onClick:z,disabled:w.value.length===0},{prefix:D(()=>[b(y(qs),{class:"h-4 w-4"})]),default:D(()=>[ne[15]||(ne[15]=W(" Use Template ",-1))]),_:1},8,["disabled"]),b(y(Z),{variant:"solid",theme:"purple",size:"sm",onClick:A},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[ne[16]||(ne[16]=W(" New Program ",-1))]),_:1})])]),r.value?(T(),P("div",Npt,[u("div",jpt,[u("div",Fpt,[b(y(Fc),{class:"h-5 w-5 text-red-400 mr-2"}),u("p",Bpt,E(r.value),1)]),u("button",{onClick:ne[0]||(ne[0]=ve=>r.value=""),class:"text-red-500 hover:text-red-700"},[b(y(ht),{class:"h-4 w-4"})])])])):ie("",!0),i.value?(T(),P("div",zpt,[u("div",Upt,[u("div",Hpt,[b(y(Qs),{class:"h-5 w-5 text-green-400 mr-2"}),u("p",qpt,E(i.value),1)]),u("button",{onClick:ne[1]||(ne[1]=ve=>i.value=""),class:"text-green-500 hover:text-green-700"},[b(y(ht),{class:"h-4 w-4"})])])])):ie("",!0),b(Hct,{stats:k.value,showDetails:l.value},null,8,["stats","showDetails"]),b(ift,{searchQuery:p.value,"onUpdate:searchQuery":ne[2]||(ne[2]=ve=>p.value=ve),typeFilter:h.value,"onUpdate:typeFilter":ne[3]||(ne[3]=ve=>h.value=ve),templateFilter:m.value,"onUpdate:templateFilter":ne[4]||(ne[4]=ve=>m.value=ve),statusFilter:g.value,"onUpdate:statusFilter":ne[5]||(ne[5]=ve=>g.value=ve),viewMode:v.value,"onUpdate:viewMode":ne[6]||(ne[6]=ve=>v.value=ve)},null,8,["searchQuery","typeFilter","templateFilter","statusFilter","viewMode"]),_.value.length>0?(T(),P("div",Wpt,[u("div",Gpt,[u("div",Ypt,[u("span",Kpt,E(_.value.length)+" program"+E(_.value.length>1?"s":"")+" selected ",1)]),u("div",Xpt,[b(y(Z),{variant:"outline",size:"sm",onClick:G},{default:D(()=>[...ne[17]||(ne[17]=[W("Clear Selection",-1)])]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:re},{prefix:D(()=>[b(y(Bc),{class:"h-4 w-4"})]),default:D(()=>[ne[18]||(ne[18]=W(" Create Templates ",-1))]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:ee,class:"text-red-600 hover:text-red-700"},{prefix:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),default:D(()=>[ne[19]||(ne[19]=W(" Delete Selected ",-1))]),_:1})])])])):ie("",!0),u("div",Zpt,[u("div",Qpt,[u("div",Jpt,[ne[20]||(ne[20]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Audit Programs",-1)),u("div",eht,[u("span",tht," Showing "+E(S.value.length)+" of "+E(x.value.length)+" programs ",1),v.value==="table"&&S.value.length>0?(T(),he(y(Z),{key:0,variant:"outline",size:"sm",onClick:U},{default:D(()=>[W(E(_.value.length===S.value.length?"Deselect All":"Select All"),1)]),_:1})):ie("",!0)])])]),v.value==="table"?(T(),P("div",nht,[u("table",rht,[u("thead",iht,[u("tr",null,[u("th",aht,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-500",checked:_.value.length===S.value.length&&S.value.length>0,onChange:U},null,40,sht)]),ne[21]||(ne[21]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Program",-1)),ne[22]||(ne[22]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type",-1)),ne[23]||(ne[23]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Template",-1)),ne[24]||(ne[24]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Completion",-1)),ne[25]||(ne[25]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Procedures",-1)),ne[26]||(ne[26]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions",-1))])]),u("tbody",oht,[(T(!0),P(_e,null,we(S.value,ve=>(T(),P("tr",{key:ve.name,class:fe(["hover:bg-gray-50 transition-colors",{"bg-purple-50":_.value.includes(ve.name)}])},[u("td",lht,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-500",checked:_.value.includes(ve.name),onChange:Y=>L(ve.name)},null,40,uht)]),u("td",dht,[u("div",cht,[u("div",fht,[u("div",pht,E((ve.audit_type||"AU").substring(0,2).toUpperCase()),1)]),u("div",hht,[u("div",mht,E(ve.program_id),1),u("div",ght,E(ve.program_name),1)])])]),u("td",vht,[b(y(Ee),{variant:q(ve.audit_type),size:"sm"},{default:D(()=>[W(E(ve.audit_type),1)]),_:2},1032,["variant"])]),u("td",yht,[ve.is_template?(T(),he(y(Ee),{key:0,variant:"subtle",theme:"purple",size:"sm"},{default:D(()=>[b(y(vt),{class:"h-3 w-3 mr-1"}),ne[27]||(ne[27]=W(" Template ",-1))]),_:1})):(T(),P("span",bht,"-"))]),u("td",_ht,[u("div",xht,[u("div",wht,[u("div",{class:fe([N(ve.completion_percent||0),"h-2 rounded-full transition-all duration-300"]),style:nt({width:`${ve.completion_percent||0}%`})},null,6)]),u("span",kht,E(ve.completion_percent||0)+"%",1)])]),u("td",Sht,[u("div",Cht,[u("span",Aht,E(ve.total_procedures||0),1),u("span",Tht,"("+E(ve.completed_procedures||0)+" done)",1)])]),u("td",Eht,[u("div",Mht,[b(y(Z),{variant:"ghost",size:"sm",onClick:Y=>$(ve),class:"!p-1.5"},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:Y=>M(ve),class:"!p-1.5"},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:Y=>R(ve),class:"!p-1.5"},{default:D(()=>[b(y(qs),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:Y=>I(ve),class:"!p-1.5 text-red-500 hover:text-red-700"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2))),128))])])])):(T(),P("div",$ht,[u("div",Dht,[(T(!0),P(_e,null,we(S.value,ve=>(T(),P("div",{key:ve.name,class:fe(["bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",{"ring-2 ring-purple-500 bg-purple-50":_.value.includes(ve.name)}]),onClick:Y=>L(ve.name)},[u("div",Pht,[u("div",Iht,[u("div",Oht,E((ve.audit_type||"AU").substring(0,2).toUpperCase()),1),u("div",null,[u("h3",Lht,E(ve.program_id),1),u("p",Vht,E(ve.program_name),1)])]),u("div",Nht,[b(y(Ee),{variant:q(ve.audit_type),size:"sm"},{default:D(()=>[W(E(ve.audit_type),1)]),_:2},1032,["variant"]),ve.is_template?(T(),he(y(Ee),{key:0,variant:"subtle",theme:"purple",size:"sm"},{default:D(()=>[...ne[28]||(ne[28]=[W(" Template ",-1)])]),_:1})):ie("",!0)])]),u("div",jht,[u("div",null,[u("div",Fht,[ne[29]||(ne[29]=u("span",{class:"text-sm text-gray-600"},"Completion",-1)),u("span",Bht,E(ve.completion_percent||0)+"%",1)]),u("div",zht,[u("div",{class:fe([N(ve.completion_percent||0),"h-2 rounded-full transition-all duration-300"]),style:nt({width:`${ve.completion_percent||0}%`})},null,6)])]),u("div",Uht,[ne[30]||(ne[30]=u("span",{class:"text-sm text-gray-600"},"Procedures",-1)),u("span",Hht,E(ve.completed_procedures||0)+"/"+E(ve.total_procedures||0),1)])]),u("div",qht,[u("div",Wht,[b(y(Z),{variant:"ghost",size:"sm",onClick:dt(Y=>$(ve),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(Y=>M(ve),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(Y=>R(ve),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(qs),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",Ght,E(V(ve.modified)),1)])],10,Rht))),128))])])),S.value.length===0&&x.value.length===0?(T(),P("div",Yht,[u("div",Kht,[b(y(vt),{class:"h-10 w-10 text-purple-500"})]),u("div",Xht,[ne[32]||(ne[32]=u("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Welcome to Audit Programs",-1)),ne[33]||(ne[33]=u("p",{class:"text-gray-600 mb-8 leading-relaxed"}," Create detailed audit programs with procedures, risk areas, and control objectives. ",-1)),u("div",Zht,[b(y(Z),{variant:"solid",theme:"purple",size:"lg",onClick:A},{prefix:D(()=>[b(y(tt),{class:"h-5 w-5"})]),default:D(()=>[ne[31]||(ne[31]=W(" Create Your First Program ",-1))]),_:1})])])])):S.value.length===0?(T(),P("div",Qht,[b(y(Rn),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),ne[35]||(ne[35]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No programs found",-1)),ne[36]||(ne[36]=u("p",{class:"text-gray-600 mb-6"}," Try adjusting your search or filter criteria. ",-1)),b(y(Z),{variant:"outline",onClick:X},{default:D(()=>[...ne[34]||(ne[34]=[W("Clear Filters",-1)])]),_:1})])):ie("",!0)]),b(Rpt,{show:a.value,"onUpdate:show":ne[7]||(ne[7]=ve=>a.value=ve),program:d.value,mode:f.value,onSaved:B,onClose:j},null,8,["show","program","mode"]),b(y(zt),{modelValue:s.value,"onUpdate:modelValue":ne[10]||(ne[10]=ve=>s.value=ve),options:{title:((ce=c.value)==null?void 0:ce.program_name)||"Program Details",size:"xl"}},{body:D(()=>{var ve,Y;return[c.value?(T(),P("div",Jht,[u("div",emt,[u("div",null,[u("h3",tmt,E(c.value.program_id),1),u("p",nmt,E(c.value.audit_type),1)]),c.value.is_template?(T(),he(y(Ee),{key:0,variant:"subtle",theme:"purple"},{default:D(()=>[...ne[37]||(ne[37]=[W("Template",-1)])]),_:1})):ie("",!0)]),u("div",null,[ne[38]||(ne[38]=u("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Objectives",-1)),u("div",{class:"prose prose-sm max-w-none",innerHTML:c.value.program_objectives},null,8,rmt)]),u("div",null,[u("h4",imt,"Procedures ("+E(((ve=c.value.program_procedures)==null?void 0:ve.length)||0)+")",1),u("div",amt,[u("div",smt,[u("div",null,[u("p",omt,E(c.value.total_procedures||0),1),ne[39]||(ne[39]=u("p",{class:"text-xs text-gray-500"},"Total",-1))]),u("div",null,[u("p",lmt,E(c.value.completed_procedures||0),1),ne[40]||(ne[40]=u("p",{class:"text-xs text-gray-500"},"Completed",-1))]),u("div",null,[u("p",umt,E(c.value.not_applicable_procedures||0),1),ne[41]||(ne[41]=u("p",{class:"text-xs text-gray-500"},"N/A",-1))]),u("div",null,[u("p",dmt,E(c.value.completion_percent||0)+"%",1),ne[42]||(ne[42]=u("p",{class:"text-xs text-gray-500"},"Complete",-1))])])])]),((Y=c.value.risk_areas)==null?void 0:Y.length)>0?(T(),P("div",cmt,[ne[43]||(ne[43]=u("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Risk Areas",-1)),u("div",fmt,[(T(!0),P(_e,null,we(c.value.risk_areas,(K,H)=>(T(),P("div",{key:H,class:"flex items-start gap-2 p-2 bg-gray-50 rounded-lg"},[b(y(Ee),{variant:O(K.risk_rating),size:"sm"},{default:D(()=>[W(E(K.risk_rating),1)]),_:2},1032,["variant"]),u("span",pmt,E(K.risk_description),1)]))),128))])])):ie("",!0)])):ie("",!0)]}),actions:D(()=>[b(y(Z),{variant:"outline",onClick:ne[8]||(ne[8]=ve=>s.value=!1)},{default:D(()=>[...ne[44]||(ne[44]=[W("Close",-1)])]),_:1}),b(y(Z),{variant:"solid",theme:"purple",onClick:ne[9]||(ne[9]=ve=>{M(c.value),s.value=!1})},{default:D(()=>[...ne[45]||(ne[45]=[W(" Edit Program ",-1)])]),_:1})]),_:1},8,["modelValue","options"]),b(y(zt),{modelValue:o.value,"onUpdate:modelValue":ne[11]||(ne[11]=ve=>o.value=ve),options:{title:"Select Template",size:"lg"}},{body:D(()=>[u("div",hmt,[ne[46]||(ne[46]=u("p",{class:"text-sm text-gray-600"},"Select a template to create a new program from:",-1)),u("div",mmt,[(T(!0),P(_e,null,we(w.value,ve=>(T(),P("div",{key:ve.name,class:"border border-gray-200 rounded-lg p-4 hover:border-purple-500 hover:bg-purple-50 cursor-pointer transition-all",onClick:Y=>F(ve)},[u("div",vmt,[u("div",ymt,[b(y(vt),{class:"h-5 w-5 text-purple-600"})]),u("div",null,[u("h4",bmt,E(ve.program_name),1),u("p",_mt,E(ve.audit_type)+"  "+E(ve.total_procedures||0)+" procedures",1)])])],8,gmt))),128))])])]),_:1},8,["modelValue"])])}}},wmt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4 mb-6"},kmt={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-5 hover:shadow-lg transition-all duration-200"},Smt={class:"flex items-center justify-between"},Cmt={class:"text-3xl font-bold text-blue-900 mt-1"},Amt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},Tmt={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200 p-5 hover:shadow-lg transition-all duration-200"},Emt={class:"flex items-center justify-between"},Mmt={class:"text-3xl font-bold text-red-900 mt-1"},$mt={class:"p-3 bg-red-500 rounded-xl shadow-sm"},Dmt={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200 p-5 hover:shadow-lg transition-all duration-200"},Rmt={class:"flex items-center justify-between"},Pmt={class:"text-3xl font-bold text-orange-900 mt-1"},Imt={class:"p-3 bg-orange-500 rounded-xl shadow-sm"},Omt={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-5 hover:shadow-lg transition-all duration-200"},Lmt={class:"flex items-center justify-between"},Vmt={class:"text-3xl font-bold text-purple-900 mt-1"},Nmt={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},jmt={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-5 hover:shadow-lg transition-all duration-200"},Fmt={class:"flex items-center justify-between"},Bmt={class:"text-3xl font-bold text-green-900 mt-1"},zmt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},Umt={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Hmt={class:"bg-white rounded-xl border border-gray-200 p-5"},qmt={class:"space-y-3"},Wmt={class:"w-20 text-sm text-gray-600"},Gmt={class:"flex-1 mx-3"},Ymt={class:"w-full bg-gray-100 rounded-full h-3"},Kmt={class:"w-10 text-sm font-medium text-gray-900 text-right"},Xmt={class:"bg-white rounded-xl border border-gray-200 p-5"},Zmt={class:"grid grid-cols-2 gap-3"},Qmt={class:"text-lg font-bold text-blue-600"},Jmt={class:"text-xs text-gray-500 truncate"},egt={class:"bg-white rounded-xl border border-gray-200 p-5"},tgt={class:"space-y-3"},ngt={class:"text-sm text-gray-600"},rgt={class:"flex items-center gap-2"},igt={class:"w-16 bg-gray-100 rounded-full h-2"},agt={class:"text-sm font-medium text-gray-900 w-8 text-right"},sgt={key:1,class:"bg-white rounded-xl border border-gray-200 p-5 mb-6"},ogt={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},lgt={class:"text-center p-4 bg-red-50 rounded-lg"},ugt={class:"text-2xl font-bold text-red-600"},dgt={class:"text-center p-4 bg-amber-50 rounded-lg"},cgt={class:"text-2xl font-bold text-amber-600"},fgt={class:"text-center p-4 bg-purple-50 rounded-lg"},pgt={class:"text-2xl font-bold text-purple-600"},hgt={class:"text-center p-4 bg-blue-50 rounded-lg"},mgt={class:"text-2xl font-bold text-blue-600"},ggt={class:"text-center p-4 bg-gray-50 rounded-lg"},vgt={class:"text-2xl font-bold text-gray-600"},ygt={__name:"UniverseStats",props:{stats:{type:Object,default:()=>({total:0,criticalRisk:0,highRisk:0,mediumRisk:0,lowRisk:0,active:0,inactive:0,dueThisQuarter:0,dueThisMonth:0,overdue:0,mandatory:0,byType:{},byControlEnvironment:{}})},showDetails:{type:Boolean,default:!0}},setup(t){const e=t,n=J(()=>{const a=e.stats.total||1;return[{label:"Critical",count:e.stats.criticalRisk||0,percentage:(e.stats.criticalRisk||0)/a*100,color:"bg-red-500"},{label:"High",count:e.stats.highRisk||0,percentage:(e.stats.highRisk||0)/a*100,color:"bg-orange-500"},{label:"Medium",count:e.stats.mediumRisk||0,percentage:(e.stats.mediumRisk||0)/a*100,color:"bg-amber-500"},{label:"Low",count:e.stats.lowRisk||0,percentage:(e.stats.lowRisk||0)/a*100,color:"bg-green-500"}]}),r=J(()=>{const a=e.stats.byType||{};return Object.entries(a).map(([s,o])=>({label:s,count:o}))}),i=J(()=>{const a=e.stats.byControlEnvironment||{},s=Object.values(a).reduce((l,d)=>l+d,0)||1,o={Strong:"bg-green-500",Adequate:"bg-blue-500",Weak:"bg-orange-500","Not Assessed":"bg-gray-400"};return Object.entries(a).map(([l,d])=>({label:l,count:d,percentage:d/s*100,color:o[l]||"bg-gray-400"}))});return(a,s)=>(T(),P(_e,null,[u("div",wmt,[u("div",kmt,[u("div",Smt,[u("div",null,[s[0]||(s[0]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Total Entities",-1)),u("p",Cmt,E(t.stats.total||0),1),s[1]||(s[1]=u("p",{class:"text-xs text-blue-600 mt-1"},"Auditable universe",-1))]),u("div",Amt,[b(y(Cc),{class:"h-7 w-7 text-white"})])])]),u("div",Tmt,[u("div",Emt,[u("div",null,[s[2]||(s[2]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Critical Risk",-1)),u("p",Mmt,E(t.stats.criticalRisk||0),1),s[3]||(s[3]=u("p",{class:"text-xs text-red-600 mt-1"},"High priority",-1))]),u("div",$mt,[b(y(nn),{class:"h-7 w-7 text-white"})])])]),u("div",Dmt,[u("div",Rmt,[u("div",null,[s[4]||(s[4]=u("p",{class:"text-sm font-semibold text-orange-700 uppercase tracking-wide"},"High Risk",-1)),u("p",Pmt,E(t.stats.highRisk||0),1),s[5]||(s[5]=u("p",{class:"text-xs text-orange-600 mt-1"},"Medium priority",-1))]),u("div",Imt,[b(y(zr),{class:"h-7 w-7 text-white"})])])]),u("div",Omt,[u("div",Lmt,[u("div",null,[s[6]||(s[6]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Due This Quarter",-1)),u("p",Vmt,E(t.stats.dueThisQuarter||0),1),s[7]||(s[7]=u("p",{class:"text-xs text-purple-600 mt-1"},"Upcoming audits",-1))]),u("div",Nmt,[b(y(er),{class:"h-7 w-7 text-white"})])])]),u("div",jmt,[u("div",Fmt,[u("div",null,[s[8]||(s[8]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Active",-1)),u("p",Bmt,E(t.stats.active||0),1),s[9]||(s[9]=u("p",{class:"text-xs text-green-600 mt-1"},"In scope entities",-1))]),u("div",zmt,[b(y(Gt),{class:"h-7 w-7 text-white"})])])])]),t.showDetails?(T(),P("div",Umt,[u("div",Hmt,[s[10]||(s[10]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Risk Distribution",-1)),u("div",qmt,[(T(!0),P(_e,null,we(n.value,o=>(T(),P("div",{key:o.label,class:"flex items-center"},[u("div",Wmt,E(o.label),1),u("div",Gmt,[u("div",Ymt,[u("div",{class:fe(["h-3 rounded-full transition-all duration-300",o.color]),style:nt({width:`${o.percentage}%`})},null,6)])]),u("div",Kmt,E(o.count),1)]))),128))])]),u("div",Xmt,[s[11]||(s[11]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Entity Types",-1)),u("div",Zmt,[(T(!0),P(_e,null,we(r.value,o=>(T(),P("div",{key:o.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[u("p",Qmt,E(o.count),1),u("p",Jmt,E(o.label),1)]))),128))])]),u("div",egt,[s[12]||(s[12]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Control Environment",-1)),u("div",tgt,[(T(!0),P(_e,null,we(i.value,o=>(T(),P("div",{key:o.label,class:"flex items-center justify-between"},[u("span",ngt,E(o.label),1),u("div",rgt,[u("div",igt,[u("div",{class:fe(["h-2 rounded-full transition-all duration-300",o.color]),style:nt({width:`${o.percentage}%`})},null,6)]),u("span",agt,E(o.count),1)])]))),128))])])])):ie("",!0),t.showDetails?(T(),P("div",sgt,[s[18]||(s[18]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Audit Schedule Summary",-1)),u("div",ogt,[u("div",lgt,[u("p",ugt,E(t.stats.overdue||0),1),s[13]||(s[13]=u("p",{class:"text-xs text-red-700"},"Overdue",-1))]),u("div",dgt,[u("p",cgt,E(t.stats.dueThisMonth||0),1),s[14]||(s[14]=u("p",{class:"text-xs text-amber-700"},"Due This Month",-1))]),u("div",fgt,[u("p",pgt,E(t.stats.dueThisQuarter||0),1),s[15]||(s[15]=u("p",{class:"text-xs text-purple-700"},"Due This Quarter",-1))]),u("div",hgt,[u("p",mgt,E(t.stats.mandatory||0),1),s[16]||(s[16]=u("p",{class:"text-xs text-blue-700"},"Mandatory",-1))]),u("div",ggt,[u("p",vgt,E(t.stats.inactive||0),1),s[17]||(s[17]=u("p",{class:"text-xs text-gray-700"},"Inactive",-1))])])])):ie("",!0)],64))}},bgt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-5 mb-6"},_gt={class:"flex flex-wrap items-center justify-between gap-4"},xgt={class:"flex flex-wrap items-center gap-3"},wgt={class:"relative"},kgt={class:"w-44"},Sgt={class:"flex items-center gap-2"},Cgt={key:0,class:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-100"},Agt={__name:"UniverseFilters",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","refresh","export","create"],setup(t,{emit:e}){const n=t,r=e,i=Jt({search:"",entityType:"",riskRating:"",department:"",status:""}),a=[{label:"All Types",value:""},{label:"Process",value:"Process"},{label:"Function",value:"Function"},{label:"Department",value:"Department"},{label:"Location",value:"Location"},{label:"System",value:"System"},{label:"Compliance Area",value:"Compliance Area"}],s=[{label:"All Risk Levels",value:""},{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],o=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],l=J(()=>i.search||i.entityType||i.riskRating||i.department||i.status),d=()=>{r("update:modelValue",me({},i))},c=()=>{i.search="",i.entityType="",i.riskRating="",i.department="",i.status="",d()};return Je(()=>n.modelValue,f=>{f&&Object.assign(i,f)},{deep:!0,immediate:!0}),(f,p)=>(T(),P("div",bgt,[u("div",_gt,[u("div",xgt,[u("div",wgt,[b(y(Rn),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),xe(u("input",{"onUpdate:modelValue":p[0]||(p[0]=h=>i.search=h),type:"text",placeholder:"Search entities...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm w-64 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:d},null,544),[[Mt,i.search]])]),b(y(ge),{type:"select",modelValue:i.entityType,"onUpdate:modelValue":p[1]||(p[1]=h=>i.entityType=h),options:a,placeholder:"All Types",class:"w-40",onChange:d},null,8,["modelValue"]),b(y(ge),{type:"select",modelValue:i.riskRating,"onUpdate:modelValue":p[2]||(p[2]=h=>i.riskRating=h),options:s,placeholder:"All Risk Levels",class:"w-40",onChange:d},null,8,["modelValue"]),u("div",kgt,[b(At,{modelValue:i.department,"onUpdate:modelValue":p[3]||(p[3]=h=>i.department=h),doctype:"Department",placeholder:"Department",onChange:d},null,8,["modelValue"])]),b(y(ge),{type:"select",modelValue:i.status,"onUpdate:modelValue":p[4]||(p[4]=h=>i.status=h),options:o,placeholder:"All Status",class:"w-32",onChange:d},null,8,["modelValue"]),l.value?(T(),he(y(Z),{key:0,variant:"ghost",size:"sm",onClick:c},{default:D(()=>[b(y(ht),{class:"h-4 w-4 mr-1"}),p[12]||(p[12]=W(" Clear ",-1))]),_:1})):ie("",!0)]),u("div",Sgt,[b(y(Z),{variant:"outline",size:"sm",onClick:p[5]||(p[5]=h=>f.$emit("refresh"))},{default:D(()=>[b(y(hn),{class:"h-4 w-4"})]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:p[6]||(p[6]=h=>f.$emit("export"))},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-1"}),p[13]||(p[13]=W(" Export ",-1))]),_:1}),b(y(Z),{variant:"solid",theme:"blue",size:"sm",onClick:p[7]||(p[7]=h=>f.$emit("create"))},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-1"}),p[14]||(p[14]=W(" Add Entity ",-1))]),_:1})])]),l.value?(T(),P("div",Cgt,[i.entityType?(T(),he(y(Ee),{key:0,variant:"outline",class:"cursor-pointer",onClick:p[8]||(p[8]=h=>{i.entityType="",d()})},{default:D(()=>[W(" Type: "+E(i.entityType)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.riskRating?(T(),he(y(Ee),{key:1,variant:"outline",class:"cursor-pointer",onClick:p[9]||(p[9]=h=>{i.riskRating="",d()})},{default:D(()=>[W(" Risk: "+E(i.riskRating)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.department?(T(),he(y(Ee),{key:2,variant:"outline",class:"cursor-pointer",onClick:p[10]||(p[10]=h=>{i.department="",d()})},{default:D(()=>[W(" Dept: "+E(i.department)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.status?(T(),he(y(Ee),{key:3,variant:"outline",class:"cursor-pointer",onClick:p[11]||(p[11]=h=>{i.status="",d()})},{default:D(()=>[W(" Status: "+E(i.status==="active"?"Active":"Inactive")+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0)])):ie("",!0)]))}},Tgt={class:"h-[80vh] flex"},Egt={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},Mgt={class:"p-4"},$gt={class:"space-y-2"},Dgt=["onClick"],Rgt={key:1},Pgt={class:"flex-1 min-w-0"},Igt={class:"text-sm font-medium text-gray-900 truncate"},Ogt={class:"text-xs text-gray-500 truncate"},Lgt={class:"mt-4 p-3 bg-white rounded-lg border border-gray-200"},Vgt={class:"flex items-center justify-between mb-2"},Ngt={class:"text-xs font-semibold text-blue-600"},jgt={class:"w-full bg-gray-200 rounded-full h-1.5"},Fgt={key:0,class:"mt-3 text-xs text-gray-500 text-center"},Bgt={class:"flex-1 overflow-y-auto"},zgt={class:"p-6 space-y-8"},Ugt={class:"space-y-6"},Hgt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},qgt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Wgt={class:"flex gap-2"},Ggt={class:"mt-6"},Ygt={class:"mt-6 flex items-center space-x-3"},Kgt={class:"space-y-6"},Xgt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Zgt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Qgt={class:"mt-6 p-4 bg-gray-50 rounded-lg"},Jgt={class:"grid grid-cols-3 gap-4"},evt={class:"text-center p-3 bg-white rounded-lg border"},tvt={class:"text-center p-3 bg-white rounded-lg border"},nvt={class:"text-2xl font-bold text-blue-600"},rvt={class:"text-center p-3 bg-white rounded-lg border"},ivt={class:"space-y-6"},avt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},svt={class:"flex items-center justify-between mb-4"},ovt={class:"text-xs text-gray-500"},lvt={key:0,class:"space-y-4"},uvt={class:"flex items-start justify-between mb-4"},dvt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},cvt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},fvt={class:"grid grid-cols-2 gap-4"},pvt={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},hvt={class:"space-y-6"},mvt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},gvt={class:"flex items-center justify-between mb-4"},vvt={class:"text-xs text-gray-500"},yvt={key:0,class:"space-y-4"},bvt={class:"flex items-start justify-between mb-4"},_vt={class:"flex items-center gap-2"},xvt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},wvt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},kvt={class:"md:col-span-2"},Svt={class:"grid grid-cols-2 gap-4 mt-4"},Cvt={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},Avt={class:"space-y-6"},Tvt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Evt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Mvt={class:"flex items-center space-x-3 pt-6"},$vt={key:0,class:"mt-6"},Dvt={class:"mt-6 p-4 bg-gray-50 rounded-lg"},Rvt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Pvt={class:"text-center p-3 bg-white rounded-lg border"},Ivt={class:"text-lg font-bold text-gray-900"},Ovt={class:"text-center p-3 bg-white rounded-lg border"},Lvt={class:"text-center p-3 bg-white rounded-lg border"},Vvt={class:"text-lg font-bold text-blue-600"},Nvt={class:"text-center p-3 bg-white rounded-lg border"},jvt={class:"space-y-6"},Fvt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Bvt={class:"flex items-center justify-between w-full"},zvt={class:"flex items-center gap-2"},Uvt={class:"flex items-center gap-2"},Hvt={__name:"AuditUniverseForm",props:{show:{type:Boolean,default:!1},entity:{type:Object,default:null},mode:{type:String,default:"create"}},emits:["update:show","saved","close"],setup(t,{emit:e}){const n=t,r=e,i=Bo(),a=Q(0),s=Q(!1),o=Q(!1),l=Q(null),d=J({get:()=>n.show,set:ne=>r("update:show",ne)}),c=Q(f());function f(){return{universe_id:"",auditable_entity:"",entity_type:"Process",department:"",location:"",description:"",process_owner:"",is_active:!0,inherent_risk_rating:"Medium",inherent_risk_score:0,control_environment_rating:"Adequate",control_effectiveness_score:0,residual_risk_rating:"",residual_risk_score:0,risk_factors:[],key_controls:[],audit_frequency:"Annual",last_audit_date:"",last_audit_reference:"",last_audit_opinion:"",next_scheduled_audit:"",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[],notes:""}}const p=[{id:"basic",title:"Basic Information",description:"Entity details"},{id:"risk",title:"Risk Assessment",description:"Risk ratings"},{id:"factors",title:"Risk Factors",description:"Identified risks"},{id:"controls",title:"Key Controls",description:"Mitigating controls"},{id:"planning",title:"Audit Planning",description:"Scheduling"},{id:"notes",title:"Additional Info",description:"Notes & references"}],h=[{label:"Process",value:"Process"},{label:"Function",value:"Function"},{label:"Department",value:"Department"},{label:"Location",value:"Location"},{label:"System",value:"System"},{label:"Compliance Area",value:"Compliance Area"}],m=[{label:"Head Office",value:"Head Office"},{label:"Branch 1",value:"Branch 1"},{label:"Branch 2",value:"Branch 2"},{label:"Warehouse",value:"Warehouse"},{label:"All",value:"All"}],g=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],v=[{label:"Strong",value:"Strong"},{label:"Adequate",value:"Adequate"},{label:"Weak",value:"Weak"},{label:"Not Assessed",value:"Not Assessed"}],_=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"Strategic",value:"Strategic"},{label:"Reputational",value:"Reputational"},{label:"Technology",value:"Technology"},{label:"Human Resources",value:"Human Resources"}],x=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],w=[{label:"Very High",value:"Very High"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],k=[{label:"Not Mitigated",value:"Not Mitigated"},{label:"Partially Mitigated",value:"Partially Mitigated"},{label:"Fully Mitigated",value:"Fully Mitigated"},{label:"Accepted",value:"Accepted"}],S=[{label:"Preventive",value:"Preventive"},{label:"Detective",value:"Detective"},{label:"Corrective",value:"Corrective"},{label:"Directive",value:"Directive"}],C=[{label:"Continuous",value:"Continuous"},{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Annually",value:"Annually"},{label:"Ad-hoc",value:"Ad-hoc"}],A=[{label:"Very Effective",value:"Very Effective"},{label:"Effective",value:"Effective"},{label:"Partially Effective",value:"Partially Effective"},{label:"Ineffective",value:"Ineffective"}],M=[{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"Bi-Annual",value:"Bi-Annual"},{label:"Tri-Annual",value:"Tri-Annual"},{label:"As Needed",value:"As Needed"}],$=[{label:"Satisfactory",value:"Satisfactory"},{label:"Needs Improvement",value:"Needs Improvement"},{label:"Unsatisfactory",value:"Unsatisfactory"}];Je(()=>n.entity,ne=>{ne?c.value=je(me(me({},f()),ne),{risk_factors:ne.risk_factors||[],key_controls:ne.key_controls||[],bc_data_sources:ne.bc_data_sources||[]}):c.value=f(),a.value=0},{immediate:!0}),Je(()=>n.show,ne=>{ne||(a.value=0,l.value=null)}),Je([()=>c.value.inherent_risk_score,()=>c.value.control_effectiveness_score],()=>{const ne=c.value.inherent_risk_score||0,ce=c.value.control_effectiveness_score||0;c.value.residual_risk_score=Math.max(0,ne-ne*ce/100),c.value.residual_risk_score>=75?c.value.residual_risk_rating="Critical":c.value.residual_risk_score>=50?c.value.residual_risk_rating="High":c.value.residual_risk_score>=25?c.value.residual_risk_rating="Medium":c.value.residual_risk_rating="Low"});const R=J(()=>{var ce,ve;let ne=0;return c.value.universe_id&&c.value.auditable_entity&&c.value.entity_type&&(ne+=20),c.value.inherent_risk_rating&&(ne+=20),((ce=c.value.risk_factors)==null?void 0:ce.length)>0&&(ne+=20),((ve=c.value.key_controls)==null?void 0:ve.length)>0&&(ne+=20),c.value.audit_frequency&&(ne+=20),ne}),I=J(()=>c.value.universe_id&&c.value.auditable_entity&&c.value.entity_type&&c.value.inherent_risk_rating),B=ne=>{var ce,ve;switch(ne){case"basic":return c.value.universe_id&&c.value.auditable_entity&&c.value.entity_type;case"risk":return!!c.value.inherent_risk_rating;case"factors":return((ce=c.value.risk_factors)==null?void 0:ce.length)>0;case"controls":return((ve=c.value.key_controls)==null?void 0:ve.length)>0;case"planning":return!!c.value.audit_frequency;case"notes":return!0;default:return!1}},j=ne=>B(ne)?"bg-green-500 text-white":"bg-gray-300 text-gray-600",z=ne=>{a.value=ne},F=()=>{a.value>0&&a.value--},q=()=>{a.value<p.length-1&&a.value++},N=()=>{const ne=Math.floor(Math.random()*1e3).toString().padStart(3,"0");c.value.universe_id=`AUE-${ne}`},O=()=>{c.value.risk_factors.push({risk_category:"Operational",risk_description:"",risk_impact:"Medium",risk_likelihood:"Medium",risk_weight:0,mitigation_status:"Not Mitigated"})},V=ne=>{c.value.risk_factors.splice(ne,1)},L=()=>{c.value.key_controls.push({control_id:"",control_description:"",control_type:"Preventive",control_owner:"",control_frequency:"Monthly",control_effectiveness:"Effective",last_tested_date:"",next_test_date:""})},U=ne=>{c.value.key_controls.splice(ne,1)},G=ne=>ne>=75?"text-red-600":ne>=50?"text-orange-600":ne>=25?"text-amber-600":"text-green-600",X=ne=>({Critical:"subtle",High:"subtle",Medium:"subtle",Low:"subtle"})[ne]||"subtle",re=ne=>"subtle",ee=ne=>({Satisfactory:"subtle","Needs Improvement":"subtle",Unsatisfactory:"subtle"})[ne]||"subtle",de=ne=>ne?new Date(ne).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",se=()=>le(this,null,function*(){var ne;s.value=!0;try{n.mode==="edit"&&((ne=n.entity)!=null&&ne.name)?yield i.updateAuditUniverse(n.entity.name,c.value):yield i.createAuditUniverse(c.value),l.value=new Date().toLocaleTimeString()}catch(ce){console.error("Error saving draft:",ce)}finally{s.value=!1}}),te=()=>le(this,null,function*(){var ne;o.value=!0;try{n.mode==="edit"&&((ne=n.entity)!=null&&ne.name)?yield i.updateAuditUniverse(n.entity.name,c.value):yield i.createAuditUniverse(c.value),r("saved"),r("update:show",!1)}catch(ce){console.error("Error submitting form:",ce)}finally{o.value=!1}});return(ne,ce)=>(T(),he(y(zt),{modelValue:d.value,"onUpdate:modelValue":ce[22]||(ce[22]=ve=>d.value=ve),options:{title:t.mode==="edit"?"Edit Audit Entity":"Create Audit Entity",size:"full"}},{body:D(()=>{var ve,Y,K,H;return[u("div",Tgt,[u("div",Egt,[u("div",Mgt,[ce[24]||(ce[24]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Progress",-1)),u("div",$gt,[(T(),P(_e,null,we(p,(ae,be)=>u("div",{key:ae.id,class:fe(["flex items-center space-x-2 p-2 rounded-lg cursor-pointer transition-all",a.value===be?"bg-blue-100 border border-blue-300":"hover:bg-gray-100"]),onClick:ue=>z(be)},[u("div",{class:fe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold",j(ae.id)])},[B(ae.id)?(T(),he(y(Wr),{key:0,class:"h-3 w-3"})):(T(),P("span",Rgt,E(be+1),1))],2),u("div",Pgt,[u("div",Igt,E(ae.title),1),u("div",Ogt,E(ae.description),1)])],10,Dgt)),64))]),u("div",Lgt,[u("div",Vgt,[ce[23]||(ce[23]=u("span",{class:"text-xs font-medium text-gray-700"},"Overall Progress",-1)),u("span",Ngt,E(R.value)+"%",1)]),u("div",jgt,[u("div",{class:"bg-blue-600 h-1.5 rounded-full transition-all duration-500",style:nt({width:`${R.value}%`})},null,4)])]),l.value?(T(),P("div",Fgt," Last saved: "+E(l.value),1)):ie("",!0)])]),u("div",Bgt,[u("div",zgt,[xe(u("div",Ugt,[b(Rt,{title:"Basic Information",description:"Entity identification and classification",sectionNumber:1,color:"blue"}),u("div",Hgt,[u("div",qgt,[u("div",null,[ce[25]||(ce[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Universe ID "),u("span",{class:"text-red-500"},"*")],-1)),u("div",Wgt,[b(y(ge),{modelValue:c.value.universe_id,"onUpdate:modelValue":ce[0]||(ce[0]=ae=>c.value.universe_id=ae),placeholder:"e.g., AUE-001",class:"flex-1"},null,8,["modelValue"]),b(y(Z),{variant:"outline",size:"sm",onClick:N},{default:D(()=>[b(y(hn),{class:"h-4 w-4"})]),_:1})])]),b(y(ge),{modelValue:c.value.auditable_entity,"onUpdate:modelValue":ce[1]||(ce[1]=ae=>c.value.auditable_entity=ae),label:"Auditable Entity",placeholder:"Enter entity name",required:!0},null,8,["modelValue"]),u("div",null,[ce[26]||(ce[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Entity Type "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:c.value.entity_type,"onUpdate:modelValue":ce[2]||(ce[2]=ae=>c.value.entity_type=ae),options:h},null,8,["modelValue"])]),u("div",null,[ce[27]||(ce[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Department",-1)),b(At,{modelValue:c.value.department,"onUpdate:modelValue":ce[3]||(ce[3]=ae=>c.value.department=ae),doctype:"Department",placeholder:"Select department"},null,8,["modelValue"])]),u("div",null,[ce[28]||(ce[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),b(y(ge),{type:"select",modelValue:c.value.location,"onUpdate:modelValue":ce[4]||(ce[4]=ae=>c.value.location=ae),options:m},null,8,["modelValue"])]),u("div",null,[ce[29]||(ce[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Process Owner",-1)),b(At,{modelValue:c.value.process_owner,"onUpdate:modelValue":ce[5]||(ce[5]=ae=>c.value.process_owner=ae),doctype:"User",placeholder:"Select process owner"},null,8,["modelValue"])])]),u("div",Ggt,[ce[30]||(ce[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),b(y(an),{content:c.value.description,onChange:ce[6]||(ce[6]=ae=>c.value.description=ae),placeholder:"Describe the auditable entity...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",Ygt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":ce[7]||(ce[7]=ae=>c.value.is_active=ae),class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[$n,c.value.is_active]]),ce[31]||(ce[31]=u("label",{class:"text-sm text-gray-700"},"Entity is Active",-1))])])],512),[[ot,a.value===0]]),xe(u("div",Kgt,[b(Rt,{title:"Risk Assessment",description:"Inherent and residual risk evaluation",sectionNumber:2,color:"red"}),u("div",Xgt,[u("div",Zgt,[u("div",null,[ce[32]||(ce[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Inherent Risk Rating "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:c.value.inherent_risk_rating,"onUpdate:modelValue":ce[8]||(ce[8]=ae=>c.value.inherent_risk_rating=ae),options:g},null,8,["modelValue"])]),b(y(ge),{modelValue:c.value.inherent_risk_score,"onUpdate:modelValue":ce[9]||(ce[9]=ae=>c.value.inherent_risk_score=ae),type:"number",label:"Inherent Risk Score",placeholder:"0-100",min:"0",max:"100"},null,8,["modelValue"]),u("div",null,[ce[33]||(ce[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Control Environment Rating ",-1)),b(y(ge),{type:"select",modelValue:c.value.control_environment_rating,"onUpdate:modelValue":ce[10]||(ce[10]=ae=>c.value.control_environment_rating=ae),options:v},null,8,["modelValue"])]),b(y(ge),{modelValue:c.value.control_effectiveness_score,"onUpdate:modelValue":ce[11]||(ce[11]=ae=>c.value.control_effectiveness_score=ae),type:"number",label:"Control Effectiveness Score",placeholder:"0-100",min:"0",max:"100"},null,8,["modelValue"]),u("div",null,[ce[34]||(ce[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Residual Risk Rating ",-1)),b(y(ge),{type:"select",modelValue:c.value.residual_risk_rating,"onUpdate:modelValue":ce[12]||(ce[12]=ae=>c.value.residual_risk_rating=ae),options:g,disabled:""},null,8,["modelValue"]),ce[35]||(ce[35]=u("p",{class:"text-xs text-gray-500 mt-1"},"Auto-calculated",-1))]),b(y(ge),{modelValue:c.value.residual_risk_score,"onUpdate:modelValue":ce[13]||(ce[13]=ae=>c.value.residual_risk_score=ae),type:"number",label:"Residual Risk Score",placeholder:"Auto-calculated",disabled:""},null,8,["modelValue"])]),u("div",Qgt,[ce[39]||(ce[39]=u("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Risk Score Summary",-1)),u("div",Jgt,[u("div",evt,[u("p",{class:fe(["text-2xl font-bold",G(c.value.inherent_risk_score)])},E(c.value.inherent_risk_score||0),3),ce[36]||(ce[36]=u("p",{class:"text-xs text-gray-500"},"Inherent Risk",-1))]),u("div",tvt,[u("p",nvt,E(c.value.control_effectiveness_score||0),1),ce[37]||(ce[37]=u("p",{class:"text-xs text-gray-500"},"Control Score",-1))]),u("div",rvt,[u("p",{class:fe(["text-2xl font-bold",G(c.value.residual_risk_score)])},E(c.value.residual_risk_score||0),3),ce[38]||(ce[38]=u("p",{class:"text-xs text-gray-500"},"Residual Risk",-1))])])])])],512),[[ot,a.value===1]]),xe(u("div",ivt,[b(Rt,{title:"Risk Factors",description:"Identified risk factors for this entity",sectionNumber:3,color:"orange"}),u("div",avt,[u("div",svt,[u("div",null,[ce[40]||(ce[40]=u("h4",{class:"text-sm font-medium text-gray-900"},"Risk Factors",-1)),u("p",ovt,E(((ve=c.value.risk_factors)==null?void 0:ve.length)||0)+" factors identified",1)]),b(y(Z),{variant:"outline",size:"sm",onClick:O},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[ce[41]||(ce[41]=W(" Add Risk Factor ",-1))]),_:1})]),((Y=c.value.risk_factors)==null?void 0:Y.length)>0?(T(),P("div",lvt,[(T(!0),P(_e,null,we(c.value.risk_factors,(ae,be)=>(T(),P("div",{key:be,class:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors"},[u("div",uvt,[b(y(Ee),{variant:X(ae.risk_impact),size:"sm"},{default:D(()=>[W(E(ae.risk_impact||"Not Rated"),1)]),_:2},1032,["variant"]),b(y(Z),{variant:"ghost",size:"sm",onClick:ue=>V(be),class:"text-red-500"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",dvt,[u("div",null,[ce[42]||(ce[42]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Category",-1)),b(y(ge),{type:"select",modelValue:ae.risk_category,"onUpdate:modelValue":ue=>ae.risk_category=ue,options:_,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[ce[43]||(ce[43]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Impact",-1)),b(y(ge),{type:"select",modelValue:ae.risk_impact,"onUpdate:modelValue":ue=>ae.risk_impact=ue,options:x,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[ce[44]||(ce[44]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Likelihood",-1)),b(y(ge),{type:"select",modelValue:ae.risk_likelihood,"onUpdate:modelValue":ue=>ae.risk_likelihood=ue,options:w,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",cvt,[b(y(ge),{modelValue:ae.risk_description,"onUpdate:modelValue":ue=>ae.risk_description=ue,type:"textarea",label:"Description",placeholder:"Describe the risk factor...",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",fvt,[b(y(ge),{modelValue:ae.risk_weight,"onUpdate:modelValue":ue=>ae.risk_weight=ue,type:"number",label:"Weight (%)",placeholder:"0-100",min:"0",max:"100",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[ce[45]||(ce[45]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Mitigation",-1)),b(y(ge),{type:"select",modelValue:ae.mitigation_status,"onUpdate:modelValue":ue=>ae.mitigation_status=ue,options:k,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])])])]))),128))])):(T(),P("div",pvt,[b(y(nn),{class:"mx-auto h-12 w-12 text-gray-400"}),ce[47]||(ce[47]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No risk factors defined",-1)),ce[48]||(ce[48]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add risk factors to assess this entity.",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-4",onClick:O},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[ce[46]||(ce[46]=W(" Add First Risk Factor ",-1))]),_:1})]))])],512),[[ot,a.value===2]]),xe(u("div",hvt,[b(Rt,{title:"Key Controls",description:"Controls mitigating identified risks",sectionNumber:4,color:"green"}),u("div",mvt,[u("div",gvt,[u("div",null,[ce[49]||(ce[49]=u("h4",{class:"text-sm font-medium text-gray-900"},"Key Controls",-1)),u("p",vvt,E(((K=c.value.key_controls)==null?void 0:K.length)||0)+" controls defined",1)]),b(y(Z),{variant:"outline",size:"sm",onClick:L},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[ce[50]||(ce[50]=W(" Add Control ",-1))]),_:1})]),((H=c.value.key_controls)==null?void 0:H.length)>0?(T(),P("div",yvt,[(T(!0),P(_e,null,we(c.value.key_controls,(ae,be)=>(T(),P("div",{key:be,class:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors"},[u("div",bvt,[u("div",_vt,[b(y(Ee),{variant:"subtle",size:"sm"},{default:D(()=>[W(E(ae.control_id||"New"),1)]),_:2},1024),b(y(Ee),{variant:re(ae.control_effectiveness),size:"sm"},{default:D(()=>[W(E(ae.control_effectiveness||"Not Rated"),1)]),_:2},1032,["variant"])]),b(y(Z),{variant:"ghost",size:"sm",onClick:ue=>U(be),class:"text-red-500"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",xvt,[b(y(ge),{modelValue:ae.control_id,"onUpdate:modelValue":ue=>ae.control_id=ue,label:"Control ID",placeholder:"CTL-001",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[ce[51]||(ce[51]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Type",-1)),b(y(ge),{type:"select",modelValue:ae.control_type,"onUpdate:modelValue":ue=>ae.control_type=ue,options:S,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[ce[52]||(ce[52]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Frequency",-1)),b(y(ge),{type:"select",modelValue:ae.control_frequency,"onUpdate:modelValue":ue=>ae.control_frequency=ue,options:C,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[ce[53]||(ce[53]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Effectiveness",-1)),b(y(ge),{type:"select",modelValue:ae.control_effectiveness,"onUpdate:modelValue":ue=>ae.control_effectiveness=ue,options:A,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",wvt,[u("div",kvt,[b(y(ge),{modelValue:ae.control_description,"onUpdate:modelValue":ue=>ae.control_description=ue,type:"textarea",label:"Description",placeholder:"Describe the control...",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[ce[54]||(ce[54]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Control Owner",-1)),b(At,{modelValue:ae.control_owner,"onUpdate:modelValue":ue=>ae.control_owner=ue,doctype:"User",placeholder:"Select owner"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",Svt,[b(y(ge),{modelValue:ae.last_tested_date,"onUpdate:modelValue":ue=>ae.last_tested_date=ue,type:"date",label:"Last Tested",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),b(y(ge),{modelValue:ae.next_test_date,"onUpdate:modelValue":ue=>ae.next_test_date=ue,type:"date",label:"Next Test Date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):(T(),P("div",Cvt,[b(y(Ku),{class:"mx-auto h-12 w-12 text-gray-400"}),ce[56]||(ce[56]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No controls defined",-1)),ce[57]||(ce[57]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add key controls for this entity.",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-4",onClick:L},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[ce[55]||(ce[55]=W(" Add First Control ",-1))]),_:1})]))])],512),[[ot,a.value===3]]),xe(u("div",Avt,[b(Rt,{title:"Audit Planning",description:"Audit frequency and scheduling information",sectionNumber:5,color:"purple"}),u("div",Tvt,[u("div",Evt,[u("div",null,[ce[58]||(ce[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Frequency "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:c.value.audit_frequency,"onUpdate:modelValue":ce[14]||(ce[14]=ae=>c.value.audit_frequency=ae),options:M},null,8,["modelValue"])]),b(y(ge),{modelValue:c.value.last_audit_date,"onUpdate:modelValue":ce[15]||(ce[15]=ae=>c.value.last_audit_date=ae),type:"date",label:"Last Audit Date"},null,8,["modelValue"]),u("div",null,[ce[59]||(ce[59]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Reference",-1)),b(At,{modelValue:c.value.last_audit_reference,"onUpdate:modelValue":ce[16]||(ce[16]=ae=>c.value.last_audit_reference=ae),doctype:"Audit Engagement",placeholder:"Select engagement"},null,8,["modelValue"])]),u("div",null,[ce[60]||(ce[60]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Opinion",-1)),b(y(ge),{type:"select",modelValue:c.value.last_audit_opinion,"onUpdate:modelValue":ce[17]||(ce[17]=ae=>c.value.last_audit_opinion=ae),options:$},null,8,["modelValue"])]),b(y(ge),{modelValue:c.value.next_scheduled_audit,"onUpdate:modelValue":ce[18]||(ce[18]=ae=>c.value.next_scheduled_audit=ae),type:"date",label:"Next Scheduled Audit",disabled:""},null,8,["modelValue"]),u("div",Mvt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":ce[19]||(ce[19]=ae=>c.value.mandatory_audit=ae),class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[$n,c.value.mandatory_audit]]),ce[61]||(ce[61]=u("label",{class:"text-sm text-gray-700"},"Mandatory Audit (Regulatory)",-1))])]),c.value.mandatory_audit?(T(),P("div",$vt,[b(y(ge),{modelValue:c.value.regulatory_reference,"onUpdate:modelValue":ce[20]||(ce[20]=ae=>c.value.regulatory_reference=ae),label:"Regulatory Reference",placeholder:"Enter regulatory requirement reference..."},null,8,["modelValue"])])):ie("",!0),u("div",Dvt,[ce[66]||(ce[66]=u("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Audit History Summary",-1)),u("div",Rvt,[u("div",Pvt,[u("p",Ivt,E(c.value.last_audit_date?de(c.value.last_audit_date):"Never"),1),ce[62]||(ce[62]=u("p",{class:"text-xs text-gray-500"},"Last Audited",-1))]),u("div",Ovt,[b(y(Ee),{variant:ee(c.value.last_audit_opinion),size:"sm"},{default:D(()=>[W(E(c.value.last_audit_opinion||"N/A"),1)]),_:1},8,["variant"]),ce[63]||(ce[63]=u("p",{class:"text-xs text-gray-500 mt-1"},"Last Opinion",-1))]),u("div",Lvt,[u("p",Vvt,E(c.value.audit_frequency||"Not Set"),1),ce[64]||(ce[64]=u("p",{class:"text-xs text-gray-500"},"Frequency",-1))]),u("div",Nvt,[u("p",{class:fe(["text-lg font-bold",c.value.mandatory_audit?"text-red-600":"text-gray-600"])},E(c.value.mandatory_audit?"Yes":"No"),3),ce[65]||(ce[65]=u("p",{class:"text-xs text-gray-500"},"Mandatory",-1))])])])])],512),[[ot,a.value===4]]),xe(u("div",jvt,[b(Rt,{title:"Additional Information",description:"Notes and data source references",sectionNumber:6,color:"gray"}),u("div",Fvt,[u("div",null,[ce[67]||(ce[67]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes",-1)),b(y(an),{content:c.value.notes,onChange:ce[21]||(ce[21]=ae=>c.value.notes=ae),placeholder:"Add any additional notes...",editable:!0,editorClass:"min-h-[200px] prose-sm"},null,8,["content"])])])],512),[[ot,a.value===5]])])])])]}),actions:D(()=>[u("div",Bvt,[u("div",zvt,[a.value>0?(T(),he(y(Z),{key:0,variant:"outline",onClick:F},{prefix:D(()=>[b(y(pr),{class:"h-4 w-4"})]),default:D(()=>[ce[68]||(ce[68]=W(" Previous ",-1))]),_:1})):ie("",!0)]),u("div",Uvt,[b(y(Z),{variant:"outline",onClick:se,loading:s.value},{prefix:D(()=>[b(y(Cr),{class:"h-4 w-4"})]),default:D(()=>[ce[69]||(ce[69]=W(" Save Draft ",-1))]),_:1},8,["loading"]),a.value<p.length-1?(T(),he(y(Z),{key:0,variant:"solid",theme:"blue",onClick:q},{suffix:D(()=>[b(y(tr),{class:"h-4 w-4"})]),default:D(()=>[ce[70]||(ce[70]=W(" Next ",-1))]),_:1})):(T(),he(y(Z),{key:1,variant:"solid",theme:"blue",onClick:te,loading:o.value,disabled:!I.value},{prefix:D(()=>[b(y(Wr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+E(t.mode==="edit"?"Update Entity":"Create Entity"),1)]),_:1},8,["loading","disabled"]))])])]),_:1},8,["modelValue","options"]))}},qvt={class:"space-y-6"},Wvt={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},Gvt={class:"flex items-center space-x-3"},Yvt={class:"p-2 bg-blue-100 rounded-lg"},Kvt={class:"flex flex-wrap items-center gap-3"},Xvt={class:"flex items-center space-x-2"},Zvt={class:"p-1"},Qvt={class:"p-1"},Jvt={class:"p-1"},eyt={class:"p-1"},tyt={class:"bg-white rounded-xl border border-gray-200 shadow-sm"},nyt={class:"px-6 py-4 border-b border-gray-200"},ryt={class:"flex items-center justify-between"},iyt={class:"flex items-center space-x-2"},ayt={key:0,class:"p-1"},syt={key:0,class:"overflow-x-auto"},oyt={class:"min-w-full divide-y divide-gray-200"},lyt={class:"bg-gray-50"},uyt={class:"px-6 py-3 text-left"},dyt=["checked"],cyt={class:"flex items-center space-x-1"},fyt={class:"flex items-center space-x-1"},pyt={class:"bg-white divide-y divide-gray-200"},hyt={class:"px-6 py-4"},myt=["checked","onChange"],gyt={class:"px-6 py-4 whitespace-nowrap"},vyt={class:"flex items-center"},yyt={class:"flex-shrink-0 h-10 w-10"},byt={class:"h-10 w-10 rounded-lg bg-blue-500 flex items-center justify-center text-white font-bold text-sm"},_yt={class:"ml-4"},xyt={class:"text-sm font-semibold text-gray-900"},wyt={class:"text-sm text-gray-500"},kyt={class:"px-6 py-4 whitespace-nowrap"},Syt={class:"text-sm font-medium text-gray-900"},Cyt={class:"px-6 py-4 whitespace-nowrap"},Ayt={class:"px-6 py-4 whitespace-nowrap"},Tyt={class:"px-6 py-4 whitespace-nowrap"},Eyt={key:0},Myt={class:"text-sm font-medium"},$yt={class:"text-xs text-gray-600"},Dyt={key:1,class:"text-gray-400 text-sm"},Ryt={class:"px-6 py-4 whitespace-nowrap"},Pyt={key:0},Iyt={class:"text-sm font-medium"},Oyt={key:1,class:"text-gray-400 text-sm"},Lyt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Vyt={class:"flex items-center space-x-1"},Nyt={key:1,class:"p-6"},jyt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Fyt=["onClick"],Byt={class:"flex items-start justify-between mb-4"},zyt={class:"flex items-center space-x-3"},Uyt={class:"h-12 w-12 rounded-xl bg-blue-500 flex items-center justify-center text-white font-bold"},Hyt={class:"text-lg font-semibold text-gray-900 group-hover:text-blue-900"},qyt={class:"text-sm text-gray-600"},Wyt={class:"space-y-3"},Gyt={class:"flex justify-between items-center"},Yyt={class:"text-sm font-medium"},Kyt={class:"flex justify-between items-center"},Xyt={class:"text-sm font-medium"},Zyt={key:0,class:"flex justify-between items-center"},Qyt={class:"flex justify-between items-center"},Jyt={class:"text-sm font-medium"},e0t={class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200"},t0t={class:"flex items-center space-x-1"},n0t={key:2,class:"px-6 py-20 text-center"},r0t={class:"mx-auto h-20 w-20 rounded-2xl bg-blue-50 border-2 border-blue-100 flex items-center justify-center mb-8 shadow-sm"},i0t={class:"max-w-md mx-auto"},a0t={class:"flex flex-col sm:flex-row justify-center gap-3"},s0t={key:3,class:"px-6 py-12 text-center"},o0t={class:"p-1"},l0t={class:"space-y-6 p-6 bg-gray-50"},u0t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6"},d0t={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-blue-300 cursor-pointer transition-all duration-200 group"},c0t={class:"flex items-start space-x-4 mb-5"},f0t={class:"flex-shrink-0 p-3 bg-blue-50 rounded-xl group-hover:bg-blue-100 transition-colors"},p0t={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-green-300 cursor-pointer transition-all duration-200 group"},h0t={class:"flex items-start space-x-4 mb-5"},m0t={class:"flex-shrink-0 p-3 bg-green-50 rounded-xl group-hover:bg-green-100 transition-colors"},g0t={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-purple-300 cursor-pointer transition-all duration-200 group"},v0t={class:"flex items-start space-x-4 mb-5"},y0t={class:"flex-shrink-0 p-3 bg-purple-50 rounded-xl group-hover:bg-purple-100 transition-colors"},b0t={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-amber-300 cursor-pointer transition-all duration-200 group"},_0t={class:"flex items-start space-x-4 mb-5"},x0t={class:"flex-shrink-0 p-3 bg-amber-50 rounded-xl group-hover:bg-amber-100 transition-colors"},w0t={class:"space-y-6"},k0t={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},S0t={class:"text-blue-800"},C0t={class:"font-semibold"},A0t={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T0t={class:"p-1"},E0t={class:"flex flex-col items-center justify-center space-y-2"},M0t={class:"p-1"},$0t={class:"flex flex-col items-center justify-center space-y-2"},D0t={class:"p-1"},R0t={class:"flex flex-col items-center justify-center space-y-2"},P0t={class:"p-1"},I0t={class:"flex flex-col items-center justify-center space-y-2"},O0t={class:"space-y-6"},L0t={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},V0t={class:"bg-red-50 rounded-lg p-6"},N0t={class:"space-y-3"},j0t={class:"flex justify-between"},F0t={class:"font-medium text-red-900"},B0t={class:"flex justify-between"},z0t={class:"font-medium text-red-900"},U0t={class:"bg-amber-50 rounded-lg p-6"},H0t={class:"space-y-3"},q0t={class:"flex justify-between"},W0t={class:"font-medium text-amber-900"},G0t={class:"flex justify-between"},Y0t={class:"font-medium text-amber-900"},K0t={class:"bg-green-50 rounded-lg p-6"},X0t={class:"space-y-3"},Z0t={class:"flex justify-between"},Q0t={class:"font-medium text-green-900"},J0t={class:"flex justify-between"},e1t={class:"font-medium text-green-900"},t1t={__name:"AuditUniverse",setup(t){const e=xn(),n=Q(!1),r=Q(!1),i=Q("table"),a=Q([]),s=Q("auditable_entity"),o=Q("asc"),l=Q(!1),d=Q(!1),c=Q(!1),f=Q(!1),p=Q(null),h=Q("create"),m=Q({search:"",entityType:"",riskRating:"",department:"",status:""}),g=Q([{universe_id:"AU-001",auditable_entity:"Accounts Payable",entity_type:"Process",department:"Finance",location:"Head Office",description:"Processing of vendor payments and expense reimbursements",process_owner:"John Doe",inherent_risk_rating:"High",inherent_risk_score:15,control_environment_rating:"Adequate",control_effectiveness_score:3,residual_risk_rating:"Medium",residual_risk_score:5,risk_factors:[],key_controls:[],audit_frequency:"Quarterly",last_audit_date:"2023-10-15",last_audit_opinion:"Satisfactory",next_scheduled_audit:"2024-01-15",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[],notes:"",is_active:!0},{universe_id:"AU-002",auditable_entity:"IT Security Controls",entity_type:"System",department:"IT",location:"Head Office",description:"Access controls, data protection, and cybersecurity measures",process_owner:"Jane Smith",inherent_risk_rating:"Critical",inherent_risk_score:25,control_environment_rating:"Strong",control_effectiveness_score:4,residual_risk_rating:"High",residual_risk_score:6,risk_factors:[],key_controls:[],audit_frequency:"Quarterly",last_audit_date:"2023-08-20",last_audit_opinion:"Needs Improvement",next_scheduled_audit:"2023-11-20",mandatory_audit:!0,regulatory_reference:"CBK Cybersecurity Guidelines",bc_data_sources:[],notes:"",is_active:!0},{universe_id:"AU-003",auditable_entity:"Inventory Management",entity_type:"Process",department:"Operations",location:"Warehouse",description:"Stock control, valuation, and warehouse operations",process_owner:"Bob Johnson",inherent_risk_rating:"Medium",inherent_risk_score:8,control_environment_rating:"Adequate",control_effectiveness_score:3,residual_risk_rating:"Low",residual_risk_score:3,risk_factors:[],key_controls:[],audit_frequency:"Semi-Annual",last_audit_date:"2023-09-10",last_audit_opinion:"Satisfactory",next_scheduled_audit:"2024-03-10",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[],notes:"",is_active:!0},{universe_id:"AU-004",auditable_entity:"HR Payroll",entity_type:"Process",department:"HR",location:"Head Office",description:"Employee compensation, benefits, and payroll processing",process_owner:"Alice Brown",inherent_risk_rating:"High",inherent_risk_score:15,control_environment_rating:"Weak",control_effectiveness_score:2,residual_risk_rating:"High",residual_risk_score:8,risk_factors:[],key_controls:[],audit_frequency:"Quarterly",last_audit_date:null,last_audit_opinion:"",next_scheduled_audit:"2023-12-01",mandatory_audit:!0,regulatory_reference:"Employment Act, PAYE Regulations",bc_data_sources:[],notes:"",is_active:!0},{universe_id:"AU-005",auditable_entity:"Sales Order Processing",entity_type:"Process",department:"Sales",location:"Head Office",description:"Customer order processing and fulfillment",process_owner:"Charlie Wilson",inherent_risk_rating:"Medium",inherent_risk_score:8,control_environment_rating:"Adequate",control_effectiveness_score:3,residual_risk_rating:"Low",residual_risk_score:3,risk_factors:[],key_controls:[],audit_frequency:"Semi-Annual",last_audit_date:"2023-07-15",last_audit_opinion:"Satisfactory",next_scheduled_audit:"2024-01-15",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[],notes:"",is_active:!1}]),v=J(()=>g.value.length),_=J(()=>g.value.filter(G=>G.residual_risk_rating==="Critical").length),x=J(()=>g.value.filter(G=>G.residual_risk_rating==="High").length);J(()=>{const G=new Date,X=new Date(G.getFullYear(),Math.floor(G.getMonth()/3)*3+3,0);return g.value.filter(re=>re.next_scheduled_audit?new Date(re.next_scheduled_audit)<=X:!1).length}),J(()=>g.value.filter(G=>!G.is_active).length);const w=J(()=>{let G=[...g.value];if(m.value.search){const X=m.value.search.toLowerCase();G=G.filter(re=>{var ee,de,se,te;return((ee=re.auditable_entity)==null?void 0:ee.toLowerCase().includes(X))||((de=re.description)==null?void 0:de.toLowerCase().includes(X))||((se=re.process_owner)==null?void 0:se.toLowerCase().includes(X))||((te=re.department)==null?void 0:te.toLowerCase().includes(X))})}return m.value.riskRating&&(G=G.filter(X=>X.residual_risk_rating===m.value.riskRating)),m.value.entityType&&(G=G.filter(X=>X.entity_type===m.value.entityType)),m.value.department&&(G=G.filter(X=>X.department===m.value.department)),m.value.status&&(G=G.filter(X=>m.value.status==="active"&&X.is_active||m.value.status==="inactive"&&!X.is_active)),G.sort((X,re)=>{const ee=X[s.value]||"",de=re[s.value]||"";return o.value==="asc"?ee>de?1:-1:ee<de?1:-1}),G}),k=J(()=>{const G=g.value.length,X=g.value.filter(ue=>ue.residual_risk_rating==="Critical").length,re=g.value.filter(ue=>ue.residual_risk_rating==="High").length,ee=g.value.filter(ue=>ue.residual_risk_rating==="Medium").length,de=g.value.filter(ue=>ue.residual_risk_rating==="Low").length,se=g.value.filter(ue=>ue.is_active).length,te=g.value.filter(ue=>!ue.is_active).length,ne=new Date,ce=new Date(ne.getFullYear(),Math.floor(ne.getMonth()/3)*3+3,0),ve=g.value.filter(ue=>ue.next_scheduled_audit?new Date(ue.next_scheduled_audit)<=ce:!1).length,Y=g.value.filter(ue=>{if(!ue.next_scheduled_audit)return!1;const pe=new Date(ue.next_scheduled_audit),ye=new Date(ne.getFullYear(),ne.getMonth()+1,0);return pe<=ye}).length,K=g.value.filter(ue=>ue.next_scheduled_audit?new Date(ue.next_scheduled_audit)<ne:!1).length,H=g.value.filter(ue=>ue.mandatory_audit).length,ae={};g.value.forEach(ue=>{ae[ue.entity_type]=(ae[ue.entity_type]||0)+1});const be={};return g.value.forEach(ue=>{be[ue.control_environment_rating]=(be[ue.control_environment_rating]||0)+1}),{total:G,criticalRisk:X,highRisk:re,mediumRisk:ee,lowRisk:de,active:se,inactive:te,dueThisQuarter:ve,dueThisMonth:Y,overdue:K,mandatory:H,byType:ae,byControlEnvironment:be}}),S=G=>({Critical:"danger",High:"danger",Medium:"warning",Low:"success"})[G]||"secondary",C=G=>new Date(G).toLocaleDateString(),A=G=>G?new Date(G)<new Date:!1,M=()=>le(this,null,function*(){n.value=!0;try{console.log("Refreshing audit universe data...")}finally{n.value=!1}}),$=G=>{e.push(`/audit-planning/universe/${G.universe_id}`)},R=G=>{console.log("Schedule audit for:",G.universe_id)},I=G=>{G.is_active=!G.is_active,console.log("Toggled status for:",G.universe_id,"to:",G.is_active)},B=G=>{const X=a.value.indexOf(G);X>-1?a.value.splice(X,1):a.value.push(G)},j=()=>{a.value.length===w.value.length?a.value=[]:a.value=w.value.map(G=>G.universe_id)},z=G=>{s.value===G?o.value=o.value==="asc"?"desc":"asc":(s.value=G,o.value="asc")},F=()=>{m.value={search:"",entityType:"",riskRating:"",department:"",status:""},a.value=[]},q=()=>{p.value=null,h.value="create",f.value=!0},N=G=>{p.value=G,h.value="edit",f.value=!0},O=()=>{M(),f.value=!1,p.value=null},V=()=>{console.log("Bulk update status for:",a.value),d.value=!1},L=()=>{console.log("Bulk export for:",a.value),d.value=!1},U=()=>{console.log("Bulk delete for:",a.value),d.value=!1};return(G,X)=>(T(),P(_e,null,[u("div",qvt,[u("div",Wvt,[u("div",null,[u("div",Gvt,[u("div",Yvt,[b(y(Xi),{class:"h-6 w-6 text-blue-600"})]),X[11]||(X[11]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Universe"),u("p",{class:"text-gray-600 mt-1"}," Manage auditable entities, risk areas, and audit planning scope ")],-1))])]),u("div",Kvt,[u("div",Xvt,[u("div",Zvt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:G.exportEntities,loading:r.value},{prefix:D(()=>[b(y(bn),{class:"h-3.5 w-3.5"})]),default:D(()=>[X[12]||(X[12]=W(" Export ",-1))]),_:1},8,["onClick","loading"])]),u("div",Qvt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:X[0]||(X[0]=re=>l.value=!0)},{prefix:D(()=>[b(y(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[X[13]||(X[13]=W(" Templates ",-1))]),_:1})]),u("div",Jvt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:M,loading:n.value},{prefix:D(()=>[b(y(hn),{class:"h-3.5 w-3.5"})]),default:D(()=>[X[14]||(X[14]=W(" Refresh ",-1))]),_:1},8,["loading"])]),u("div",eyt,[b(y(Z),{variant:"solid",theme:"blue",size:"sm",onClick:q},{prefix:D(()=>[b(y(tt),{class:"h-3.5 w-3.5"})]),default:D(()=>[X[15]||(X[15]=W(" Add Entity ",-1))]),_:1})])])])]),b(ygt,{stats:k.value},null,8,["stats"]),b(Agt,{modelValue:m.value,"onUpdate:modelValue":X[1]||(X[1]=re=>m.value=re),onRefresh:M,onExport:G.exportEntities,onCreate:X[2]||(X[2]=re=>f.value=!0)},null,8,["modelValue","onExport"]),u("div",tyt,[u("div",nyt,[u("div",ryt,[X[16]||(X[16]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Auditable Entities",-1)),u("div",iyt,[i.value==="table"&&w.value.length>0?(T(),P("div",ayt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:j},{default:D(()=>[W(E(a.value.length===w.value.length?"Deselect All":"Select All"),1)]),_:1})])):ie("",!0)])])]),i.value==="table"?(T(),P("div",syt,[u("table",oyt,[u("thead",lyt,[u("tr",null,[u("th",uyt,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:a.value.length===w.value.length&&w.value.length>0,onChange:j},null,40,dyt)]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:X[3]||(X[3]=re=>z("auditable_entity"))},[u("div",cyt,[X[17]||(X[17]=u("span",null,"Entity Name",-1)),b(y(Yu),{class:"h-3 w-3"})])]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:X[4]||(X[4]=re=>z("entity_type"))},[u("div",fyt,[X[18]||(X[18]=u("span",null,"Type",-1)),b(y(Yu),{class:"h-3 w-3"})])]),X[19]||(X[19]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Risk Level ",-1)),X[20]||(X[20]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),X[21]||(X[21]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Audit ",-1)),X[22]||(X[22]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Next Due ",-1)),X[23]||(X[23]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",pyt,[(T(!0),P(_e,null,we(w.value,re=>(T(),P("tr",{key:re.universe_id,class:fe(["hover:bg-gray-50 transition-colors",{"bg-blue-50":a.value.includes(re.universe_id)}])},[u("td",hyt,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:a.value.includes(re.universe_id),onChange:ee=>B(re.universe_id)},null,40,myt)]),u("td",gyt,[u("div",vyt,[u("div",yyt,[u("div",byt,E(re.universe_id.slice(-2)),1)]),u("div",_yt,[u("div",xyt,E(re.auditable_entity),1),u("div",wyt,E(re.department),1)])])]),u("td",kyt,[u("div",Syt,E(re.entity_type),1)]),u("td",Cyt,[b(y(Ee),{variant:S(re.residual_risk_rating)},{default:D(()=>[W(E(re.residual_risk_rating),1)]),_:2},1032,["variant"])]),u("td",Ayt,[b(y(Ee),{variant:re.is_active?"success":"secondary"},{default:D(()=>[W(E(re.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),u("td",Tyt,[re.last_audit_date?(T(),P("div",Eyt,[u("p",Myt,E(C(re.last_audit_date)),1),u("p",$yt,E(re.last_audit_opinion),1)])):(T(),P("span",Dyt,"Never"))]),u("td",Ryt,[re.next_scheduled_audit?(T(),P("div",Pyt,[u("p",Iyt,E(C(re.next_scheduled_audit)),1),A(re.next_scheduled_audit)?(T(),he(y(Ee),{key:0,variant:"danger",size:"sm",class:"mt-1"},{default:D(()=>[...X[24]||(X[24]=[W(" Overdue ",-1)])]),_:1})):ie("",!0)])):(T(),P("span",Oyt,"Not scheduled"))]),u("td",Lyt,[u("div",Vyt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:ee=>$(re),class:"!p-1.5"},{default:D(()=>[b(y(ar),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:ee=>N(re),class:"!p-1.5"},{default:D(()=>[b(y(vn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:ee=>R(re),class:"!p-1.5"},{default:D(()=>[b(y(er),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:ee=>I(re),class:fe(["!p-1.5",re.is_active?"text-orange-600":"text-green-600"])},{default:D(()=>[b(y(GL),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick","class"])])])],2))),128))])])])):(T(),P("div",Nyt,[u("div",jyt,[(T(!0),P(_e,null,we(w.value,re=>(T(),P("div",{key:re.universe_id,class:fe(["bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",{"ring-2 ring-blue-500 bg-blue-50":a.value.includes(re.universe_id)}]),onClick:ee=>B(re.universe_id)},[u("div",Byt,[u("div",zyt,[u("div",Uyt,E(re.universe_id.slice(-2)),1),u("div",null,[u("h3",Hyt,E(re.auditable_entity),1),u("p",qyt,E(re.entity_type),1)])]),b(y(Ee),{variant:S(re.residual_risk_rating),size:"sm"},{default:D(()=>[W(E(re.residual_risk_rating),1)]),_:2},1032,["variant"])]),u("div",Wyt,[u("div",Gyt,[X[25]||(X[25]=u("span",{class:"text-sm text-gray-600"},"Department",-1)),u("span",Yyt,E(re.department),1)]),u("div",Kyt,[X[26]||(X[26]=u("span",{class:"text-sm text-gray-600"},"Location",-1)),u("span",Xyt,E(re.location),1)]),re.next_scheduled_audit?(T(),P("div",Zyt,[X[27]||(X[27]=u("span",{class:"text-sm text-gray-600"},"Next Audit",-1)),u("span",{class:fe(["text-sm font-medium",A(re.next_scheduled_audit)?"text-red-600":""])},E(C(re.next_scheduled_audit)),3)])):ie("",!0),u("div",Qyt,[X[28]||(X[28]=u("span",{class:"text-sm text-gray-600"},"Risk Score",-1)),u("span",Jyt,E(re.residual_risk_score),1)])]),u("div",e0t,[b(y(Ee),{variant:re.is_active?"success":"secondary",size:"sm"},{default:D(()=>[W(E(re.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),u("div",t0t,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:dt(ee=>$(re),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(ar),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:dt(ee=>N(re),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(vn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:dt(ee=>R(re),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(er),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"])])])],10,Fyt))),128))])])),w.value.length===0&&g.value.length===0?(T(),P("div",n0t,[u("div",r0t,[b(y(Xi),{class:"h-10 w-10 text-blue-500"})]),u("div",i0t,[X[31]||(X[31]=u("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Welcome to Audit Universe",-1)),X[32]||(X[32]=u("p",{class:"text-gray-600 mb-8 leading-relaxed"}," Define your auditable entities and establish the foundation for comprehensive audit planning. ",-1)),u("div",a0t,[b(y(Z),{variant:"solid",theme:"blue",size:"lg",onClick:q,class:"shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(y(tt),{class:"h-5 w-5"})]),default:D(()=>[X[29]||(X[29]=W(" Add Your First Entity ",-1))]),_:1}),b(y(Z),{variant:"outline",theme:"gray",size:"lg",onClick:X[5]||(X[5]=re=>l.value=!0),class:"border-gray-300 hover:border-gray-400"},{prefix:D(()=>[b(y(vt),{class:"h-5 w-5"})]),default:D(()=>[X[30]||(X[30]=W(" Browse Templates ",-1))]),_:1})])]),X[33]||(X[33]=ur('<div class="mt-12 max-w-2xl mx-auto"><div class="bg-gray-50 border border-gray-200 rounded-xl p-6"><h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center"><div class="h-2 w-2 bg-blue-500 rounded-full mr-3"></div> Quick Start Tips </h4><div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-blue-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-blue-600 font-semibold text-xs">1</span></div><div><p class="font-medium text-gray-900">Define Entities</p><p class="text-gray-600">Identify all auditable processes and systems</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-green-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-green-600 font-semibold text-xs">2</span></div><div><p class="font-medium text-gray-900">Assess Risk</p><p class="text-gray-600">Evaluate inherent and residual risk levels</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-purple-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-purple-600 font-semibold text-xs">3</span></div><div><p class="font-medium text-gray-900">Plan Audits</p><p class="text-gray-600">Schedule audits based on risk and frequency</p></div></div></div></div></div>',1))])):w.value.length===0?(T(),P("div",s0t,[b(y(Rn),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),X[35]||(X[35]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No entities found",-1)),X[36]||(X[36]=u("p",{class:"text-gray-600 mb-6"}," Try adjusting your search or filter criteria to find the entities you're looking for. ",-1)),u("div",o0t,[b(y(Z),{variant:"solid",theme:"gray",onClick:F},{default:D(()=>[...X[34]||(X[34]=[W(" Clear Filters ",-1)])]),_:1})])])):ie("",!0)]),b(y(zt),{modelValue:l.value,"onUpdate:modelValue":X[6]||(X[6]=re=>l.value=re),title:"Entity Templates",options:{size:"custom",width:"70vw"}},{body:D(()=>[u("div",l0t,[X[49]||(X[49]=u("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[u("p",{class:"text-blue-800 text-sm"},[W("  "),u("strong",null,"Pro Tip:"),W(" Templates provide a structured starting point with pre-configured risk assessments and audit frequencies. ")])],-1)),u("div",u0t,[u("div",d0t,[u("div",c0t,[u("div",f0t,[b(y(Cc),{class:"h-6 w-6 text-blue-600"})]),X[37]||(X[37]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-blue-900 transition-colors"},"Financial Process Template"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Pre-configured template for financial processes with standard risk assessments")],-1))]),X[39]||(X[39]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-blue-400 rounded-full"}),u("span",null,"Revenue cycle processes")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-blue-400 rounded-full"}),u("span",null,"Expenditure management")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-blue-400 rounded-full"}),u("span",null,"Financial reporting")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-blue-400 rounded-full"}),u("span",null,"Quarterly audit frequency")])])],-1)),b(y(Z),{variant:"solid",theme:"blue",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[X[38]||(X[38]=W(" Use This Template ",-1))]),_:1})]),u("div",p0t,[u("div",h0t,[u("div",m0t,[b(y(Xi),{class:"h-6 w-6 text-green-600"})]),X[40]||(X[40]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-green-900 transition-colors"},"IT Systems Template"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Template for IT systems and cybersecurity controls")],-1))]),X[42]||(X[42]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-green-400 rounded-full"}),u("span",null,"Access controls")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-green-400 rounded-full"}),u("span",null,"Data protection")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-green-400 rounded-full"}),u("span",null,"System security")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-green-400 rounded-full"}),u("span",null,"Quarterly audit frequency")])])],-1)),b(y(Z),{variant:"solid",theme:"green",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(y(Xi),{class:"h-4 w-4"})]),default:D(()=>[X[41]||(X[41]=W(" Use This Template ",-1))]),_:1})]),u("div",g0t,[u("div",v0t,[u("div",y0t,[b(y(Ro),{class:"h-6 w-6 text-purple-600"})]),X[43]||(X[43]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-purple-900 transition-colors"},"HR Operations Template"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Template for HR processes and compliance requirements")],-1))]),X[45]||(X[45]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-purple-400 rounded-full"}),u("span",null,"Payroll processing")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-purple-400 rounded-full"}),u("span",null,"Employee records")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-purple-400 rounded-full"}),u("span",null,"Benefits administration")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-purple-400 rounded-full"}),u("span",null,"Annual audit frequency")])])],-1)),b(y(Z),{variant:"solid",theme:"gray",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow bg-purple-600 hover:bg-purple-700 text-white border-purple-600"},{prefix:D(()=>[b(y(Ro),{class:"h-4 w-4"})]),default:D(()=>[X[44]||(X[44]=W(" Use This Template ",-1))]),_:1})]),u("div",b0t,[u("div",_0t,[u("div",x0t,[b(y(Ii),{class:"h-6 w-6 text-amber-600"})]),X[46]||(X[46]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-amber-900 transition-colors"},"Operations Template"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Template for operational processes and efficiency controls")],-1))]),X[48]||(X[48]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-amber-400 rounded-full"}),u("span",null,"Procurement processes")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-amber-400 rounded-full"}),u("span",null,"Inventory management")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-amber-400 rounded-full"}),u("span",null,"Quality control")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-amber-400 rounded-full"}),u("span",null,"Semi-annual audit frequency")])])],-1)),b(y(Z),{variant:"solid",theme:"gray",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow bg-amber-500 hover:bg-amber-600 text-white border-amber-500"},{prefix:D(()=>[b(y(Ii),{class:"h-4 w-4"})]),default:D(()=>[X[47]||(X[47]=W(" Use This Template ",-1))]),_:1})])])])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:d.value,"onUpdate:modelValue":X[8]||(X[8]=re=>d.value=re),title:"Bulk Actions",size:"xl"},{body:D(()=>[u("div",w0t,[u("div",k0t,[u("p",S0t,[u("span",C0t,E(a.value.length),1),X[50]||(X[50]=W(" entit(ies) selected for bulk action. ",-1))])]),u("div",A0t,[u("div",T0t,[b(y(Z),{variant:"solid",theme:"green",class:"h-20 w-full",onClick:V},{default:D(()=>[u("div",E0t,[b(y(GL),{class:"h-5 w-5"}),X[51]||(X[51]=u("span",{class:"text-sm font-medium"},"Update Status",-1))])]),_:1})]),u("div",M0t,[b(y(Z),{variant:"solid",theme:"blue",class:"h-20 w-full",onClick:L},{default:D(()=>[u("div",$0t,[b(y(bn),{class:"h-5 w-5"}),X[52]||(X[52]=u("span",{class:"text-sm font-medium"},"Export Selected",-1))])]),_:1})]),u("div",D0t,[b(y(Z),{variant:"solid",theme:"purple",class:"h-20 w-full",onClick:X[7]||(X[7]=re=>{c.value=!0,d.value=!1})},{default:D(()=>[u("div",R0t,[b(y(cr),{class:"h-5 w-5"}),X[53]||(X[53]=u("span",{class:"text-sm font-medium"},"Risk Analysis",-1))])]),_:1})]),u("div",P0t,[b(y(Z),{variant:"solid",theme:"red",class:"h-20 w-full",onClick:U},{default:D(()=>[u("div",I0t,[b(y(Zr),{class:"h-5 w-5"}),X[54]||(X[54]=u("span",{class:"text-sm font-medium"},"Delete Selected",-1))])]),_:1})])])])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:c.value,"onUpdate:modelValue":X[9]||(X[9]=re=>c.value=re),title:"Risk Analysis Dashboard",size:"5xl"},{body:D(()=>[u("div",O0t,[u("div",L0t,[u("div",V0t,[X[58]||(X[58]=u("h3",{class:"text-lg font-semibold text-red-900 mb-4"},"Critical Risk Entities",-1)),u("div",N0t,[u("div",j0t,[X[55]||(X[55]=u("span",{class:"text-red-700"},"Count",-1)),u("span",F0t,E(_.value),1)]),u("div",B0t,[X[56]||(X[56]=u("span",{class:"text-red-700"},"Percentage",-1)),u("span",z0t,E((_.value/Math.max(v.value,1)*100).toFixed(1))+"%",1)]),X[57]||(X[57]=u("div",{class:"flex justify-between"},[u("span",{class:"text-red-700"},"Priority Level"),u("span",{class:"font-medium text-red-900"},"High")],-1))])]),u("div",U0t,[X[62]||(X[62]=u("h3",{class:"text-lg font-semibold text-amber-900 mb-4"},"High Risk Entities",-1)),u("div",H0t,[u("div",q0t,[X[59]||(X[59]=u("span",{class:"text-amber-700"},"Count",-1)),u("span",W0t,E(x.value),1)]),u("div",G0t,[X[60]||(X[60]=u("span",{class:"text-amber-700"},"Percentage",-1)),u("span",Y0t,E((x.value/Math.max(v.value,1)*100).toFixed(1))+"%",1)]),X[61]||(X[61]=u("div",{class:"flex justify-between"},[u("span",{class:"text-amber-700"},"Priority Level"),u("span",{class:"font-medium text-amber-900"},"Medium")],-1))])]),u("div",K0t,[X[66]||(X[66]=u("h3",{class:"text-lg font-semibold text-green-900 mb-4"},"Low Risk Entities",-1)),u("div",X0t,[u("div",Z0t,[X[63]||(X[63]=u("span",{class:"text-green-700"},"Count",-1)),u("span",Q0t,E(g.value.value.filter(re=>re.residual_risk_rating==="Low").length),1)]),u("div",J0t,[X[64]||(X[64]=u("span",{class:"text-green-700"},"Percentage",-1)),u("span",e1t,E((g.value.value.filter(re=>re.residual_risk_rating==="Low").length/Math.max(v.value,1)*100).toFixed(1))+"%",1)]),X[65]||(X[65]=u("div",{class:"flex justify-between"},[u("span",{class:"text-green-700"},"Priority Level"),u("span",{class:"font-medium text-green-900"},"Low")],-1))])])]),X[67]||(X[67]=u("div",{class:"bg-white border border-gray-200 rounded-lg p-6"},[u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Distribution"),u("div",{class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},[u("p",{class:"text-gray-500"},"Risk distribution chart would be displayed here")])],-1))])]),_:1},8,["modelValue"])]),b(Hvt,{show:f.value,entity:p.value,mode:h.value,"onUpdate:show":X[10]||(X[10]=re=>f.value=re),onSaved:O},null,8,["show","entity","mode"])],64))}},ioe=Ul("reports",{state:()=>({auditReports:[],boardReports:[],managementDashboards:[],dataAnalyticsDashboards:[],reportTemplates:[],customReports:[],currentReport:null,currentTemplate:null,previewData:null,exportProgress:{progress:0,status:"idle"},loading:!1,error:null,reportTypes:[{label:"Compliance Report",value:"Compliance Report"},{label:"Audit Report",value:"Audit Report"},{label:"Risk Assessment",value:"Risk Assessment"},{label:"Control Testing",value:"Control Testing"},{label:"Finding Summary",value:"Finding Summary"},{label:"Management Letter",value:"Management Letter"},{label:"Remediation Report",value:"Remediation Report"},{label:"Custom Report",value:"Custom Report"}],exportFormats:[{label:"PDF Document",value:"pdf",icon:"FileText"},{label:"Excel Workbook",value:"xlsx",icon:"Sheet"},{label:"Word Document",value:"docx",icon:"FileText"},{label:"CSV Data",value:"csv",icon:"Database"},{label:"JSON Data",value:"json",icon:"Code"},{label:"HTML Page",value:"html",icon:"Globe"}],chartTypes:[{label:"Bar Chart",value:"bar",icon:"BarChart3"},{label:"Line Chart",value:"line",icon:"LineChart"},{label:"Pie Chart",value:"pie",icon:"PieChart"},{label:"Donut Chart",value:"donut",icon:"CircleDot"},{label:"Area Chart",value:"area",icon:"AreaChart"},{label:"Scatter Plot",value:"scatter",icon:"ScatterChart"},{label:"Gauge Chart",value:"gauge",icon:"Gauge"},{label:"KPI Card",value:"kpi",icon:"Activity"},{label:"Table",value:"table",icon:"Table"}],sectionTypes:[{label:"Header Section",value:"header",icon:"Heading1"},{label:"Text Content",value:"text",icon:"Type"},{label:"Data Table",value:"table",icon:"Table"},{label:"Chart/Graph",value:"chart",icon:"BarChart3"},{label:"Finding List",value:"findings",icon:"AlertTriangle"},{label:"Image/Logo",value:"image",icon:"Image"},{label:"Page Break",value:"pagebreak",icon:"Minus"},{label:"Footer Section",value:"footer",icon:"AlignLeft"}]}),getters:{activeAuditReports:t=>t.auditReports.filter(e=>e.docstatus===0),activeBoardReports:t=>t.boardReports.filter(e=>e.is_active),activeDashboards:t=>t.managementDashboards.filter(e=>e.is_active),defaultDashboards:t=>t.managementDashboards.filter(e=>e.is_default),reportsByStatus:t=>{const e={};return t.auditReports.forEach(n=>{const r=n.report_status||"Draft";e[r]||(e[r]=[]),e[r].push(n)}),e},boardReportsByPeriod:t=>{const e={};return t.boardReports.forEach(n=>{const r=n.reporting_period||"Other";e[r]||(e[r]=[]),e[r].push(n)}),e},dashboardKPIs:t=>{const e={totalEngagements:0,completedEngagements:0,totalFindings:0,criticalFindings:0,complianceScore:0,compliantItems:0};t.managementDashboards.forEach(r=>{r.is_active&&r.kpi_section&&(e.totalEngagements+=r.total_engagements||0,e.completedEngagements+=r.completed_engagements||0,e.totalFindings+=r.total_findings||0,e.criticalFindings+=r.critical_findings||0,e.compliantItems+=r.compliant_items||0)});const n=t.managementDashboards.filter(r=>r.is_active&&r.compliance_section);if(n.length>0){const r=n.reduce((i,a)=>i+(a.compliance_score||0),0);e.complianceScore=r/n.length}return e},reportStats:t=>({total:t.customReports.length,published:t.customReports.filter(e=>e.status==="Published").length,draft:t.customReports.filter(e=>e.status==="Draft").length,templates:t.reportTemplates.length,scheduled:t.customReports.filter(e=>e.is_scheduled).length}),reportsByType:t=>{const e={};return t.customReports.forEach(n=>{const r=n.report_type||"Other";e[r]||(e[r]=[]),e[r].push(n)}),e},recentReports:t=>t.customReports.slice().sort((e,n)=>new Date(n.modified)-new Date(e.modified)).slice(0,5),scheduledReports:t=>t.customReports.filter(e=>e.is_scheduled),activeTemplates:t=>t.reportTemplates.filter(e=>e.is_active),defaultTemplates:t=>t.reportTemplates.filter(e=>e.is_default)},actions:{fetchAuditReports(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Audit Report",fields:["name","report_id","engagement_reference","report_title","report_type","report_date","report_status","prepared_by","creation","modified","docstatus"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.auditReports=t||[]}catch(t){console.error("Error fetching audit reports:",t),this.error=t.message||"Failed to fetch audit reports",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Audit Report doctype"),this.auditReports=[])}finally{this.loading=!1}})},fetchBoardReports(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Board Report",fields:["name","report_id","report_title","reporting_period","report_type","report_status","is_active","prepared_by","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.boardReports=t||[]}catch(t){console.error("Error fetching board reports:",t),this.error=t.message||"Failed to fetch board reports",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Board Report doctype"),this.boardReports=[])}finally{this.loading=!1}})},fetchManagementDashboards(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Management Dashboard",fields:["name","dashboard_id","dashboard_title","dashboard_type","is_active","is_default","time_period","last_updated","total_engagements","completed_engagements","total_findings","critical_findings","compliance_score","compliant_items","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.managementDashboards=t||[]}catch(t){console.error("Error fetching management dashboards:",t),this.error=t.message||"Failed to fetch management dashboards",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Management Dashboard doctype"),this.managementDashboards=[])}finally{this.loading=!1}})},fetchDataAnalyticsDashboards(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Data Analytics Dashboard",fields:["name","dashboard_id","dashboard_name","dashboard_type","is_active","is_default","last_refresh_date","total_views","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.dataAnalyticsDashboards=t||[]}catch(t){console.error("Error fetching data analytics dashboards:",t),this.error=t.message||"Failed to fetch data analytics dashboards",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Data Analytics Dashboard doctype"),this.dataAnalyticsDashboards=[])}finally{this.loading=!1}})},fetchReportTemplates(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Report Template",fields:["name","template_id","template_name","template_type","description","is_default","is_active","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.reportTemplates=t||[]}catch(t){console.error("Error fetching report templates:",t),this.error=t.message||"Failed to fetch report templates",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Report Template doctype"),this.reportTemplates=[])}finally{this.loading=!1}})},createAuditReport(t){return le(this,null,function*(){try{const e=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Audit Report"},t)}}).fetch();return yield this.fetchAuditReports(),e}catch(e){throw console.error("Error creating audit report:",e),e}})},createBoardReport(t){return le(this,null,function*(){try{const e=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Board Report"},t)}}).fetch();return yield this.fetchBoardReports(),e}catch(e){throw console.error("Error creating board report:",e),e}})},createManagementDashboard(t){return le(this,null,function*(){try{const e=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Management Dashboard"},t)}}).fetch();return yield this.fetchManagementDashboards(),e}catch(e){throw console.error("Error creating management dashboard:",e),e}})},getAuditReportDetails(t){return le(this,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Audit Report",name:t}}).fetch()}catch(e){throw console.error("Error fetching audit report details:",e),e}})},getBoardReportDetails(t){return le(this,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Board Report",name:t}}).fetch()}catch(e){throw console.error("Error fetching board report details:",e),e}})},getDashboardData(t){return le(this,null,function*(){try{return yield Ie({url:"mkaguzi.api.get_dashboard_data",params:{dashboard_name:t}}).fetch()}catch(e){throw console.error("Error fetching dashboard data:",e),e}})},refreshDashboard(t){return le(this,null,function*(){try{const e=yield Ie({url:"mkaguzi.api.refresh_dashboard",params:{dashboard_name:t}}).fetch();return yield this.fetchManagementDashboards(),e}catch(e){throw console.error("Error refreshing dashboard:",e),e}})},createDefaultDashboards(){return le(this,null,function*(){try{const t=yield Ie({url:"mkaguzi.api.create_default_dashboards"}).fetch();return yield this.fetchManagementDashboards(),t}catch(t){throw console.error("Error creating default dashboards:",t),t}})},fetchCustomReports(){return le(this,arguments,function*(t={}){try{this.loading=!0,this.error=null;const e=yield Ie({url:"mkaguzi.api.reports.get_custom_reports",params:{filters:t}}).fetch();this.customReports=e||[]}catch(e){console.error("Error fetching custom reports:",e),this.error=e.message||"Failed to fetch custom reports"}finally{this.loading=!1}})},createCustomReport(t){return le(this,null,function*(){try{this.loading=!0;const e=yield Ie({url:"mkaguzi.api.reports.create_custom_report",params:{report:t}}).fetch();return this.customReports.unshift(e),this.currentReport=e,e}catch(e){throw console.error("Error creating custom report:",e),this.error=e.message,e}finally{this.loading=!1}})},updateCustomReport(t,e){return le(this,null,function*(){var n;try{const r=yield Ie({url:"mkaguzi.api.reports.update_custom_report",params:{report_id:t,updates:e}}).fetch(),i=this.customReports.findIndex(a=>a.name===t);return i!==-1&&(this.customReports[i]=me(me({},this.customReports[i]),r)),((n=this.currentReport)==null?void 0:n.name)===t&&(this.currentReport=me(me({},this.currentReport),r)),r}catch(r){throw console.error("Error updating custom report:",r),r}})},deleteCustomReport(t){return le(this,null,function*(){var e;try{yield Ie({url:"mkaguzi.api.reports.delete_custom_report",params:{report_id:t}}).fetch(),this.customReports=this.customReports.filter(n=>n.name!==t),((e=this.currentReport)==null?void 0:e.name)===t&&(this.currentReport=null)}catch(n){throw console.error("Error deleting custom report:",n),n}})},generateReport(n){return le(this,arguments,function*(t,e={}){try{this.loading=!0;const r=yield Ie({url:"mkaguzi.api.reports.generate_report",params:{report_id:t,parameters:e}}).fetch();return this.previewData=r,r}catch(r){throw console.error("Error generating report:",r),this.error=r.message,r}finally{this.loading=!1}})},exportReport(r,i){return le(this,arguments,function*(t,e,n={}){try{this.exportProgress={progress:0,status:"exporting"};const a=yield Ie({url:"mkaguzi.api.reports.export_report",params:{report_id:t,format:e,options:n}}).fetch();if(this.exportProgress={progress:100,status:"completed"},a.download_url){const s=document.createElement("a");s.href=a.download_url,s.download=a.filename||`report.${e}`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}return a}catch(a){throw this.exportProgress={progress:0,status:"failed"},this.error=a.message,a}})},previewReport(t){return le(this,null,function*(){try{const e=this.validateReportStructure(t);if(e.length>0)throw new Error(`Validation errors: ${e.join(", ")}`);this.loading=!0;const n=yield Ie({url:"mkaguzi.api.reports.preview_report",params:{report:t}}).fetch();return this.previewData=n,n}catch(e){throw console.error("Error previewing report:",e),this.error=e.message,e}finally{this.loading=!1}})},scheduleReport(t,e){return le(this,null,function*(){try{const n=yield Ie({url:"mkaguzi.api.reports.schedule_report",params:{report_id:t,schedule:e}}).fetch(),r=this.customReports.find(i=>i.name===t);return r&&(r.is_scheduled=!0,r.schedule_config=e),n}catch(n){throw console.error("Error scheduling report:",n),n}})},unscheduleReport(t){return le(this,null,function*(){try{yield Ie({url:"mkaguzi.api.reports.unschedule_report",params:{report_id:t}}).fetch();const e=this.customReports.find(n=>n.name===t);e&&(e.is_scheduled=!1,e.schedule_config=null)}catch(e){throw console.error("Error unscheduling report:",e),e}})},createReportTemplate(t){return le(this,null,function*(){try{const e=yield Ie({url:"mkaguzi.api.reports.create_template",params:{template:t}}).fetch();return this.reportTemplates.unshift(e),this.currentTemplate=e,e}catch(e){throw console.error("Error creating report template:",e),e}})},updateReportTemplate(t,e){return le(this,null,function*(){try{const n=yield Ie({url:"mkaguzi.api.reports.update_template",params:{template_id:t,updates:e}}).fetch(),r=this.reportTemplates.findIndex(i=>i.name===t);return r!==-1&&(this.reportTemplates[r]=me(me({},this.reportTemplates[r]),n)),n}catch(n){throw console.error("Error updating report template:",n),n}})},duplicateTemplate(t,e){return le(this,null,function*(){try{const n=yield Ie({url:"mkaguzi.api.reports.duplicate_template",params:{template_id:t,new_name:e}}).fetch();return this.reportTemplates.unshift(n),n}catch(n){throw console.error("Error duplicating template:",n),n}})},fetchSectionData(t){return le(this,null,function*(){try{return yield Ie({url:"mkaguzi.api.reports.fetch_section_data",params:{config:t}}).fetch()}catch(e){throw console.error("Error fetching section data:",e),e}})},fetchAvailableFields(t){return le(this,null,function*(){try{return yield Ie({url:"mkaguzi.api.reports.get_doctype_fields",params:{doctype:t}}).fetch()}catch(e){throw console.error("Error fetching doctype fields:",e),e}})},fetchFilterOptions(t,e){return le(this,null,function*(){try{return yield Ie({url:"mkaguzi.api.reports.get_field_options",params:{doctype:t,field:e}}).fetch()}catch(n){throw console.error("Error fetching field options:",n),n}})},validateReportStructure(t){const e=[];return(!t.title||t.title.trim()==="")&&e.push("Report title is required"),t.report_type||e.push("Report type is required"),(!t.sections||t.sections.length===0)&&e.push("Report must have at least one section"),t.sections&&t.sections.forEach((n,r)=>{n.type||e.push(`Section ${r+1}: Section type is required`),n.type==="chart"&&!n.chart_config&&e.push(`Section ${r+1}: Chart configuration is required`),n.type==="table"&&!n.data_source&&e.push(`Section ${r+1}: Data source is required for table`)}),e},formatReportSize(t){if(!t)return"N/A";const e=["B","KB","MB","GB"];let n=0;for(;t>=1024&&n<e.length-1;)t/=1024,n++;return`${t.toFixed(1)} ${e[n]}`},getReportIcon(t){return{"Compliance Report":"Shield","Audit Report":"Search","Risk Assessment":"AlertTriangle","Control Testing":"CheckCircle2","Finding Summary":"List","Management Letter":"Mail","Remediation Report":"Tool","Custom Report":"Settings"}[t]||"FileText"},getStatusColor(t){return{Draft:"orange",Published:"green",Archived:"gray",Scheduled:"blue"}[t]||"gray"},searchReports(t){if(!t.trim())return this.customReports;const e=t.toLowerCase();return this.customReports.filter(n=>{var r,i,a,s;return((r=n.title)==null?void 0:r.toLowerCase().includes(e))||((i=n.description)==null?void 0:i.toLowerCase().includes(e))||((a=n.report_type)==null?void 0:a.toLowerCase().includes(e))||((s=n.tags)==null?void 0:s.some(o=>o.toLowerCase().includes(e)))})},searchTemplates(t){if(!t.trim())return this.reportTemplates;const e=t.toLowerCase();return this.reportTemplates.filter(n=>{var r,i,a;return((r=n.template_name)==null?void 0:r.toLowerCase().includes(e))||((i=n.description)==null?void 0:i.toLowerCase().includes(e))||((a=n.template_type)==null?void 0:a.toLowerCase().includes(e))})},getReportById(t){return this.customReports.find(e=>e.name===t)},getTemplateById(t){return this.reportTemplates.find(e=>e.name===t)},resetError(){this.error=null},resetPreviewData(){this.previewData=null},resetExportProgress(){this.exportProgress={progress:0,status:"idle"}},setCurrentReport(t){this.currentReport=t},setCurrentTemplate(t){this.currentTemplate=t}}}),n1t={class:"board-stats"},r1t={class:"stats-grid"},i1t={class:"stat-card"},a1t={class:"stat-header"},s1t={class:"stat-value"},o1t={class:"stat-card"},l1t={class:"stat-header"},u1t={class:"stat-value"},d1t={class:"stat-card"},c1t={class:"stat-header"},f1t={class:"stat-value"},p1t={class:"stat-card"},h1t={class:"stat-header"},m1t={__name:"BoardStats",props:{boardMetrics:{type:Object,required:!0,default:()=>({auditCoverage:0,auditCoverageTrend:0,openFindings:0,findingsTrend:0,complianceScore:0,complianceTrend:0,overallRisk:"Medium"})}},setup(t){const e=r=>r>0?"positive":r<0?"negative":"neutral",n=r=>({Low:"low-risk",Medium:"medium-risk",High:"high-risk",Critical:"critical-risk"})[r]||"medium-risk";return(r,i)=>(T(),P("div",n1t,[u("div",r1t,[u("div",i1t,[u("div",a1t,[i[0]||(i[0]=u("h3",null,"Audit Coverage",-1)),b(y(Xi),{class:"stat-icon"})]),u("div",s1t,E(Math.round(t.boardMetrics.auditCoverage))+"%",1),u("div",{class:fe(["stat-trend",e(t.boardMetrics.auditCoverageTrend)])},[t.boardMetrics.auditCoverageTrend>0?(T(),he(y(Cl),{key:0})):(T(),he(y(Pm),{key:1})),W(" "+E(Math.abs(t.boardMetrics.auditCoverageTrend))+"% from last period ",1)],2)]),u("div",o1t,[u("div",l1t,[i[1]||(i[1]=u("h3",null,"Open Findings",-1)),b(y(nn),{class:"stat-icon"})]),u("div",u1t,E(t.boardMetrics.openFindings),1),u("div",{class:fe(["stat-trend",e(-t.boardMetrics.findingsTrend)])},[t.boardMetrics.findingsTrend>0?(T(),he(y(Pm),{key:0})):(T(),he(y(Cl),{key:1})),W(" "+E(Math.abs(t.boardMetrics.findingsTrend))+" from last period ",1)],2)]),u("div",d1t,[u("div",c1t,[i[2]||(i[2]=u("h3",null,"Compliance Score",-1)),b(y(Ti),{class:"stat-icon"})]),u("div",f1t,E(Math.round(t.boardMetrics.complianceScore))+"%",1),u("div",{class:fe(["stat-trend",e(t.boardMetrics.complianceTrend)])},[t.boardMetrics.complianceTrend>0?(T(),he(y(Cl),{key:0})):(T(),he(y(Pm),{key:1})),W(" "+E(Math.abs(t.boardMetrics.complianceTrend))+"% from last period ",1)],2)]),u("div",p1t,[u("div",h1t,[i[3]||(i[3]=u("h3",null,"Risk Level",-1)),b(y(zr),{class:"stat-icon"})]),u("div",{class:fe(["stat-value risk-level",n(t.boardMetrics.overallRisk)])},E(t.boardMetrics.overallRisk),3),i[4]||(i[4]=u("div",{class:"stat-trend"}," Based on current assessments ",-1))])])]))}},g1t=Ft(m1t,[["__scopeId","data-v-c62196f8"]]),v1t={class:"board-report-form"},y1t={class:"form-sections"},b1t={class:"form-section"},_1t={class:"form-grid"},x1t={class:"form-section"},w1t={class:"form-grid"},k1t={__name:"BoardReportForm",props:{formData:{type:Object,required:!0,default:()=>({title:"",period:"",type:"Comprehensive",presentationDate:"",focusAreas:"",notes:""})}},setup(t){const e=[{label:"Q1 2025",value:"Q1 2025"},{label:"Q2 2025",value:"Q2 2025"},{label:"Q3 2025",value:"Q3 2025"},{label:"Q4 2025",value:"Q4 2025"},{label:"Annual 2025",value:"Annual 2025"},{label:"Q1 2026",value:"Q1 2026"}],n=[{label:"Comprehensive",value:"Comprehensive"},{label:"Financial Focus",value:"Financial Focus"},{label:"Risk & Compliance",value:"Risk & Compliance"},{label:"Operational Review",value:"Operational Review"}];return(r,i)=>(T(),P("div",v1t,[u("div",y1t,[u("div",b1t,[i[6]||(i[6]=u("h3",{class:"section-title"},"Basic Information",-1)),u("div",_1t,[b(y(ge),{label:"Report Title",modelValue:t.formData.title,"onUpdate:modelValue":i[0]||(i[0]=a=>t.formData.title=a),type:"text",placeholder:"e.g., Q4 2025 Board Report",required:""},null,8,["modelValue"]),b(y(ge),{label:"Reporting Period",modelValue:t.formData.period,"onUpdate:modelValue":i[1]||(i[1]=a=>t.formData.period=a),type:"select",options:e,required:""},null,8,["modelValue"]),b(y(ge),{label:"Report Type",modelValue:t.formData.type,"onUpdate:modelValue":i[2]||(i[2]=a=>t.formData.type=a),type:"select",options:n,required:""},null,8,["modelValue"]),b(y(ge),{label:"Presentation Date",modelValue:t.formData.presentationDate,"onUpdate:modelValue":i[3]||(i[3]=a=>t.formData.presentationDate=a),type:"date"},null,8,["modelValue"])])]),u("div",x1t,[i[7]||(i[7]=u("h3",{class:"section-title"},"Content & Focus",-1)),u("div",w1t,[b(y(ge),{label:"Key Focus Areas",modelValue:t.formData.focusAreas,"onUpdate:modelValue":i[4]||(i[4]=a=>t.formData.focusAreas=a),type:"textarea",placeholder:"Enter key areas to focus on in this report",rows:"3"},null,8,["modelValue"]),b(y(ge),{label:"Additional Notes",modelValue:t.formData.notes,"onUpdate:modelValue":i[5]||(i[5]=a=>t.formData.notes=a),type:"textarea",placeholder:"Any additional context or notes",rows:"3"},null,8,["modelValue"])])])])]))}},S1t=Ft(k1t,[["__scopeId","data-v-e429a343"]]),C1t={class:"board-reports-page"},A1t={class:"page-header"},T1t={class:"header-content"},E1t={class:"page-title"},M1t={class:"header-actions"},$1t={class:"content-grid"},D1t={class:"reports-section"},R1t={class:"section-header"},P1t={class:"reports-list"},I1t=["onClick"],O1t={class:"report-header"},L1t={class:"report-title"},V1t={class:"report-meta"},N1t={class:"period"},j1t={class:"date"},F1t={class:"report-summary"},B1t={class:"summary-item"},z1t={class:"value"},U1t={class:"summary-item"},H1t={class:"value"},q1t={class:"summary-item"},W1t={class:"value"},G1t={key:0,class:"empty-state"},Y1t={class:"risk-indicators-section"},K1t={class:"section-header"},X1t={class:"risk-indicators"},Z1t={class:"indicator-header"},Q1t={class:"indicator-title"},J1t={class:"indicator-value"},ebt={class:"indicator-description"},tbt={class:"indicator-trend"},nbt={class:"findings-overview-section"},rbt={class:"section-header"},ibt={class:"findings-chart"},abt={class:"chart-placeholder"},sbt={class:"findings-summary"},obt={class:"finding-category"},lbt={class:"category-header"},ubt={class:"category-count"},dbt={class:"finding-category"},cbt={class:"category-header"},fbt={class:"category-count"},pbt={class:"finding-category"},hbt={class:"category-header"},mbt={class:"category-count"},gbt={class:"compliance-section"},vbt={class:"section-header"},ybt={class:"compliance-overview"},bbt={class:"compliance-score"},_bt={class:"score-value"},xbt={class:"compliance-breakdown"},wbt={class:"compliance-item"},kbt={class:"progress-bar"},Sbt={class:"item-value"},Cbt={class:"compliance-item"},Abt={class:"progress-bar"},Tbt={class:"item-value"},Ebt={class:"compliance-item"},Mbt={class:"progress-bar"},$bt={class:"item-value"},Dbt={class:"recommendations-section"},Rbt={class:"section-header"},Pbt={class:"recommendations-list"},Ibt={class:"recommendation-header"},Obt={class:"recommendation-description"},Lbt={class:"recommendation-meta"},Vbt={class:"category"},Nbt={class:"timeline"},jbt={class:"meetings-section"},Fbt={class:"section-header"},Bbt={class:"meetings-list"},zbt={class:"meeting-date"},Ubt={class:"date"},Hbt={class:"month"},qbt={class:"meeting-details"},Wbt={class:"meeting-time"},Gbt={class:"meeting-location"},Ybt={class:"meeting-agenda"},Kbt={class:"agenda-items"},Xbt={class:"meeting-actions"},Zbt={key:0,class:"empty-state"},Qbt={__name:"BoardReports",setup(t){const e=ioe(),n=Q(!1),r=Q(!1),i=Q({title:"",period:"",type:"Comprehensive",presentationDate:"",focusAreas:"",notes:""}),a=J(()=>e.activeBoardReports.slice(0,5)),s=Q({auditCoverage:87,auditCoverageTrend:5.2,openFindings:23,findingsTrend:-8,complianceScore:92,complianceTrend:3.1,overallRisk:"Medium"}),o=Q([{id:1,title:"Financial Reporting Risk",level:"Medium",value:"78%",description:"Risk of material misstatement in financial statements",trend:2.3},{id:2,title:"Cybersecurity Risk",level:"High",value:"85%",description:"Exposure to cyber threats and data breaches",trend:12.5},{id:3,title:"Regulatory Compliance",level:"Low",value:"45%",description:"Compliance with new regulatory requirements",trend:-5.1},{id:4,title:"Operational Risk",level:"Medium",value:"62%",description:"Risk of operational disruptions",trend:1.8}]),l=Q({highRisk:5,mediumRisk:12,lowRisk:8}),d=Q({regulatory:94,policies:89,standards:91}),c=Q([{id:1,title:"Enhance Cybersecurity Framework",description:"Implement advanced threat detection and response capabilities",priority:"High",category:"Technology",timeline:"Q1 2026"},{id:2,title:"Strengthen Internal Controls",description:"Review and update financial controls framework",priority:"High",category:"Finance",timeline:"Q2 2026"},{id:3,title:"Risk Management Training",description:"Develop comprehensive risk management training program",priority:"Medium",category:"Human Resources",timeline:"Q3 2026"}]),f=Q([{id:1,title:"Q4 2025 Board Meeting",date:"2025-12-15",time:"10:00 AM - 4:00 PM",location:"Board Room A",agenda:["Financial Results Review","Risk Management Update","Strategic Planning"]},{id:2,title:"Annual Strategy Session",date:"2026-01-20",time:"9:00 AM - 5:00 PM",location:"Executive Conference Room",agenda:["2026 Strategic Objectives","Budget Planning","Performance Targets"]}]),p=()=>{n.value=!0},h=()=>le(this,null,function*(){try{r.value=!0,yield e.createBoardReport({report_title:i.value.title,reporting_period:i.value.period,report_type:i.value.type,presentation_date:i.value.presentationDate,focus_areas:i.value.focusAreas,additional_notes:i.value.notes,report_status:"Draft",is_active:1}),n.value=!1,i.value={title:"",period:"",type:"Comprehensive",presentationDate:"",focusAreas:"",notes:""}}catch(N){console.error("Error creating board report:",N)}finally{r.value=!1}}),m=N=>{router.push(`/reports/board-reports/${N.name}`)},g=()=>{router.push("/reports/board-reports")},v=()=>{console.log("Export board report")},_=()=>{console.log("Schedule report")},x=()=>{router.push("/audit-planning/risk-assessment")},w=()=>{router.push("/findings/list")},k=()=>{router.push("/compliance/requirements")},S=()=>{router.push("/findings/corrective-actions")},C=()=>{console.log("Schedule meeting")},A=N=>{console.log("Prepare materials for:",N)},M=N=>({Draft:"secondary","Under Review":"warning",Approved:"success",Finalized:"success",Presented:"success"})[N]||"secondary",$=N=>`risk-${N.toLowerCase()}`,R=N=>({Low:"success",Medium:"warning",High:"danger",Critical:"danger"})[N]||"warning",I=N=>N>=90?"excellent":N>=80?"good":N>=70?"fair":"poor",B=N=>N>=90?"excellent":N>=80?"good":N>=70?"fair":"poor",j=N=>`priority-${N.toLowerCase()}`,z=N=>({High:"danger",Medium:"warning",Low:"success"})[N]||"warning",F=N=>N>0?"positive":N<0?"negative":"neutral",q=(N,O="medium")=>{if(!N)return"";const V=new Date(N);return O==="dd"?V.getDate().toString().padStart(2,"0"):O==="MMM"?V.toLocaleDateString("en-US",{month:"short"}):O==="short"?V.toLocaleDateString("en-US",{month:"short",day:"numeric"}):O==="long"?V.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):V.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};return bt(()=>le(this,null,function*(){yield e.fetchBoardReports()})),(N,O)=>(T(),P("div",C1t,[u("div",A1t,[u("div",T1t,[u("h1",E1t,[b(y(aE),{class:"title-icon"}),O[3]||(O[3]=W(" Board Reports ",-1))]),O[4]||(O[4]=u("p",{class:"page-description"}," Executive-level reporting and strategic insights for board of directors ",-1))]),u("div",M1t,[b(y(Z),{variant:"outline",onClick:v},{default:D(()=>[b(y(bn)),O[5]||(O[5]=W(" Export Report ",-1))]),_:1}),b(y(Z),{variant:"outline",onClick:_},{default:D(()=>[b(y(er)),O[6]||(O[6]=W(" Schedule Report ",-1))]),_:1}),b(y(Z),{onClick:p},{default:D(()=>[b(y(tt)),O[7]||(O[7]=W(" New Board Report ",-1))]),_:1})])]),b(g1t,{"board-metrics":s.value},null,8,["board-metrics"]),u("div",$1t,[u("div",D1t,[u("div",R1t,[O[9]||(O[9]=u("h2",null,"Recent Board Reports",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:g},{default:D(()=>[...O[8]||(O[8]=[W(" View All ",-1)])]),_:1})]),u("div",P1t,[(T(!0),P(_e,null,we(a.value,V=>(T(),P("div",{key:V.name,class:"report-card",onClick:L=>m(V)},[u("div",O1t,[u("div",L1t,[u("h4",null,E(V.report_title),1),b(y(Ee),{variant:M(V.report_status)},{default:D(()=>[W(E(V.report_status),1)]),_:2},1032,["variant"])]),u("div",V1t,[u("span",N1t,E(V.reporting_period),1),u("span",j1t,E(q(V.report_date)),1)])]),u("div",F1t,[u("div",B1t,[O[10]||(O[10]=u("span",{class:"label"},"Key Findings:",-1)),u("span",z1t,E(V.key_findings_count||0),1)]),u("div",U1t,[O[11]||(O[11]=u("span",{class:"label"},"Recommendations:",-1)),u("span",H1t,E(V.recommendations_count||0),1)]),u("div",q1t,[O[12]||(O[12]=u("span",{class:"label"},"Risk Areas:",-1)),u("span",W1t,E(V.risk_areas_count||0),1)])])],8,I1t))),128)),a.value.length===0?(T(),P("div",G1t,[b(y(aE),{class:"empty-icon"}),O[14]||(O[14]=u("h3",null,"No Board Reports",-1)),O[15]||(O[15]=u("p",null,"Create your first board report to get started",-1)),b(y(Z),{onClick:p},{default:D(()=>[b(y(tt)),O[13]||(O[13]=W(" Create First Report ",-1))]),_:1})])):ie("",!0)])]),u("div",Y1t,[u("div",K1t,[O[17]||(O[17]=u("h2",null,"Key Risk Indicators",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:x},{default:D(()=>[...O[16]||(O[16]=[W(" View Details ",-1)])]),_:1})]),u("div",X1t,[(T(!0),P(_e,null,we(o.value,V=>(T(),P("div",{key:V.id,class:fe(["risk-indicator-card",$(V.level)])},[u("div",Z1t,[u("div",Q1t,[u("h4",null,E(V.title),1),b(y(Ee),{variant:R(V.level)},{default:D(()=>[W(E(V.level),1)]),_:2},1032,["variant"])]),u("div",J1t,E(V.value),1)]),u("div",ebt,E(V.description),1),u("div",tbt,[u("span",{class:fe(F(V.trend))},E(V.trend>0?"":V.trend<0?"":"")+" "+E(Math.abs(V.trend))+"% vs last period ",3)])],2))),128))])]),u("div",nbt,[u("div",rbt,[O[19]||(O[19]=u("h2",null,"Audit Findings Overview",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:w},{default:D(()=>[...O[18]||(O[18]=[W(" View All Findings ",-1)])]),_:1})]),u("div",ibt,[u("div",abt,[b(y(cr),{class:"chart-icon"}),O[20]||(O[20]=u("p",null,"Findings by Risk Level",-1))])]),u("div",sbt,[u("div",obt,[u("div",lbt,[b(y(nn),{class:"category-icon high-risk"}),O[21]||(O[21]=u("span",null,"High Risk",-1))]),u("div",ubt,E(l.value.highRisk),1)]),u("div",dbt,[u("div",cbt,[b(y(zr),{class:"category-icon medium-risk"}),O[22]||(O[22]=u("span",null,"Medium Risk",-1))]),u("div",fbt,E(l.value.mediumRisk),1)]),u("div",pbt,[u("div",hbt,[b(y(HS),{class:"category-icon low-risk"}),O[23]||(O[23]=u("span",null,"Low Risk",-1))]),u("div",mbt,E(l.value.lowRisk),1)])])]),u("div",gbt,[u("div",vbt,[O[25]||(O[25]=u("h2",null,"Compliance Status",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:k},{default:D(()=>[...O[24]||(O[24]=[W(" View Details ",-1)])]),_:1})]),u("div",ybt,[u("div",bbt,[u("div",{class:fe(["score-circle",I(s.value.complianceScore)])},[u("span",_bt,E(Math.round(s.value.complianceScore))+"%",1),O[26]||(O[26]=u("span",{class:"score-label"},"Overall",-1))],2)]),u("div",xbt,[u("div",wbt,[O[27]||(O[27]=u("span",{class:"item-label"},"Regulatory",-1)),u("div",kbt,[u("div",{class:fe(["progress-fill",B(d.value.regulatory)]),style:nt({width:d.value.regulatory+"%"})},null,6)]),u("span",Sbt,E(d.value.regulatory)+"%",1)]),u("div",Cbt,[O[28]||(O[28]=u("span",{class:"item-label"},"Internal Policies",-1)),u("div",Abt,[u("div",{class:fe(["progress-fill",B(d.value.policies)]),style:nt({width:d.value.policies+"%"})},null,6)]),u("span",Tbt,E(d.value.policies)+"%",1)]),u("div",Ebt,[O[29]||(O[29]=u("span",{class:"item-label"},"Industry Standards",-1)),u("div",Mbt,[u("div",{class:fe(["progress-fill",B(d.value.standards)]),style:nt({width:d.value.standards+"%"})},null,6)]),u("span",$bt,E(d.value.standards)+"%",1)])])])]),u("div",Dbt,[u("div",Rbt,[O[31]||(O[31]=u("h2",null,"Strategic Recommendations",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:S},{default:D(()=>[...O[30]||(O[30]=[W(" View All ",-1)])]),_:1})]),u("div",Pbt,[(T(!0),P(_e,null,we(c.value,V=>(T(),P("div",{key:V.id,class:fe(["recommendation-card",j(V.priority)])},[u("div",Ibt,[u("div",{class:fe(["priority-indicator",V.priority.toLowerCase()])},null,2),u("h4",null,E(V.title),1),b(y(Ee),{variant:z(V.priority)},{default:D(()=>[W(E(V.priority),1)]),_:2},1032,["variant"])]),u("p",Obt,E(V.description),1),u("div",Lbt,[u("span",Vbt,E(V.category),1),u("span",Nbt,E(V.timeline),1)])],2))),128))])]),u("div",jbt,[u("div",Fbt,[O[33]||(O[33]=u("h2",null,"Upcoming Board Meetings",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:C},{default:D(()=>[...O[32]||(O[32]=[W(" Schedule Meeting ",-1)])]),_:1})]),u("div",Bbt,[(T(!0),P(_e,null,we(f.value,V=>(T(),P("div",{key:V.id,class:"meeting-card"},[u("div",zbt,[u("div",Ubt,E(q(V.date,"dd")),1),u("div",Hbt,E(q(V.date,"MMM")),1)]),u("div",qbt,[u("h4",null,E(V.title),1),u("p",Wbt,E(V.time),1),u("p",Gbt,E(V.location),1),u("div",Ybt,[O[34]||(O[34]=u("span",{class:"agenda-label"},"Key Topics:",-1)),u("span",Kbt,E(V.agenda.join(", ")),1)])]),u("div",Xbt,[b(y(Z),{variant:"outline",size:"sm",onClick:L=>A(V)},{default:D(()=>[...O[35]||(O[35]=[W(" Prepare Materials ",-1)])]),_:1},8,["onClick"])])]))),128)),f.value.length===0?(T(),P("div",Zbt,[b(y(er),{class:"empty-icon"}),O[37]||(O[37]=u("h3",null,"No Upcoming Meetings",-1)),O[38]||(O[38]=u("p",null,"Schedule your next board meeting",-1)),b(y(Z),{onClick:C},{default:D(()=>[b(y(er)),O[36]||(O[36]=W(" Schedule Meeting ",-1))]),_:1})])):ie("",!0)])])]),b(y(zt),{modelValue:n.value,"onUpdate:modelValue":O[2]||(O[2]=V=>n.value=V),options:{title:"Create New Board Report"}},{"body-content":D(()=>[b(S1t,{"form-data":i.value,"onUpdate:formData":O[0]||(O[0]=V=>i.value=V)},null,8,["form-data"])]),actions:D(()=>[b(y(Z),{variant:"outline",onClick:O[1]||(O[1]=V=>n.value=!1)},{default:D(()=>[...O[39]||(O[39]=[W("Cancel",-1)])]),_:1}),b(y(Z),{onClick:h,loading:r.value},{default:D(()=>[...O[40]||(O[40]=[W("Create Report",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])]))}},QH=Ft(Qbt,[["__scopeId","data-v-d98074b6"]]),Jbt={class:"bg-white rounded-xl border p-4"},e_t={class:"flex flex-wrap items-center gap-4"},t_t={class:"flex-1 min-w-[200px] max-w-md"},n_t={class:"w-32"},r_t={class:"w-44"},i_t={class:"w-36"},a_t={class:"w-36"},s_t={class:"w-32"},o_t={class:"flex items-center gap-2 ml-auto"},l_t={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},u_t={__name:"ChecklistFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,i=Jt({search:"",periodType:"",compliancePeriod:"",fiscalYear:"",completionStatus:"",hasOverdue:""});Je(()=>n.filters,p=>{p&&Object.assign(i,p)},{immediate:!0,deep:!0});const a=[{label:"All Types",value:""},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Annual",value:"Annual"}],s=[{label:"All",value:""},{label:"Complete (100%)",value:"complete"},{label:"Almost Done (75-99%)",value:"almost"},{label:"In Progress (25-74%)",value:"progress"},{label:"Just Started (1-24%)",value:"started"},{label:"Not Started (0%)",value:"notstarted"}],o=[{label:"All",value:""},{label:"Has Overdue",value:"yes"},{label:"No Overdue",value:"no"}],l=J(()=>Object.values(i).some(p=>p!==""));function d(){r("update:filters",me({},i))}function c(p){i[p]="",d()}function f(){Object.keys(i).forEach(p=>{i[p]=""}),d()}return(p,h)=>(T(),P("div",Jbt,[u("div",e_t,[u("div",t_t,[b(y(ge),{modelValue:i.search,"onUpdate:modelValue":[h[0]||(h[0]=m=>i.search=m),d],type:"text",placeholder:"Search by checklist ID...",debounce:300},{prefix:D(()=>[b(y(Rn),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",n_t,[b(y(Ke),{modelValue:i.periodType,"onUpdate:modelValue":[h[1]||(h[1]=m=>i.periodType=m),d],options:a,placeholder:"Period Type"},null,8,["modelValue"])]),u("div",r_t,[b(At,{modelValue:i.compliancePeriod,"onUpdate:modelValue":[h[2]||(h[2]=m=>i.compliancePeriod=m),d],doctype:"Data Period",placeholder:"All Periods"},null,8,["modelValue"])]),u("div",i_t,[b(At,{modelValue:i.fiscalYear,"onUpdate:modelValue":[h[3]||(h[3]=m=>i.fiscalYear=m),d],doctype:"Fiscal Year",placeholder:"Fiscal Year"},null,8,["modelValue"])]),u("div",a_t,[b(y(Ke),{modelValue:i.completionStatus,"onUpdate:modelValue":[h[4]||(h[4]=m=>i.completionStatus=m),d],options:s,placeholder:"Completion"},null,8,["modelValue"])]),u("div",s_t,[b(y(Ke),{modelValue:i.hasOverdue,"onUpdate:modelValue":[h[5]||(h[5]=m=>i.hasOverdue=m),d],options:o,placeholder:"Overdue"},null,8,["modelValue"])]),u("div",o_t,[l.value?(T(),he(y(Z),{key:0,variant:"outline",onClick:f},{prefix:D(()=>[b(y(ht),{class:"h-4 w-4"})]),default:D(()=>[h[14]||(h[14]=W(" Clear ",-1))]),_:1})):ie("",!0),b(y(Z),{variant:"outline",onClick:h[6]||(h[6]=m=>p.$emit("refresh"))},{prefix:D(()=>[b(y(hn),{class:"h-4 w-4"})]),default:D(()=>[h[15]||(h[15]=W(" Refresh ",-1))]),_:1}),b(y(Z),{variant:"solid",onClick:h[7]||(h[7]=m=>p.$emit("create"))},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[h[16]||(h[16]=W(" New Checklist ",-1))]),_:1})])]),l.value?(T(),P("div",l_t,[h[17]||(h[17]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),i.search?(T(),he(y(Ee),{key:0,theme:"blue",class:"cursor-pointer",onClick:h[8]||(h[8]=m=>c("search"))},{default:D(()=>[W(' Search: "'+E(i.search)+'" ',1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.periodType?(T(),he(y(Ee),{key:1,theme:"purple",class:"cursor-pointer",onClick:h[9]||(h[9]=m=>c("periodType"))},{default:D(()=>[W(" Type: "+E(i.periodType)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.compliancePeriod?(T(),he(y(Ee),{key:2,theme:"green",class:"cursor-pointer",onClick:h[10]||(h[10]=m=>c("compliancePeriod"))},{default:D(()=>[W(" Period: "+E(i.compliancePeriod)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.fiscalYear?(T(),he(y(Ee),{key:3,theme:"indigo",class:"cursor-pointer",onClick:h[11]||(h[11]=m=>c("fiscalYear"))},{default:D(()=>[W(" FY: "+E(i.fiscalYear)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.completionStatus?(T(),he(y(Ee),{key:4,theme:"orange",class:"cursor-pointer",onClick:h[12]||(h[12]=m=>c("completionStatus"))},{default:D(()=>[W(E(i.completionStatus)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.hasOverdue?(T(),he(y(Ee),{key:5,theme:"red",class:"cursor-pointer",onClick:h[13]||(h[13]=m=>c("hasOverdue"))},{default:D(()=>[W(E(i.hasOverdue==="yes"?"Has Overdue":"No Overdue")+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0)])):ie("",!0)]))}},d_t={class:"grid grid-cols-5 gap-4"},c_t={class:"bg-white rounded-xl border p-4"},f_t={class:"flex items-center justify-between"},p_t={class:"text-2xl font-bold text-gray-900"},h_t={class:"h-10 w-10 rounded-lg bg-blue-50 flex items-center justify-center"},m_t={class:"mt-2 flex items-center gap-2 text-xs"},g_t={class:"text-gray-500"},v_t={class:"bg-white rounded-xl border p-4"},y_t={class:"flex items-center justify-between"},b_t={class:"text-2xl font-bold text-gray-900"},__t={class:"h-10 w-10 rounded-lg bg-indigo-50 flex items-center justify-center"},x_t={class:"bg-white rounded-xl border p-4"},w_t={class:"flex items-center justify-between"},k_t={class:"text-2xl font-bold text-green-600"},S_t={class:"h-10 w-10 rounded-lg bg-green-50 flex items-center justify-center"},C_t={class:"mt-2"},A_t={class:"w-full bg-gray-100 rounded-full h-1.5"},T_t={class:"text-xs text-gray-500 mt-1"},E_t={class:"bg-white rounded-xl border p-4"},M_t={class:"flex items-center justify-between"},$_t={class:"mt-2 flex items-center gap-2 text-xs"},D_t={class:"bg-white rounded-xl border p-4"},R_t={class:"flex items-center justify-between"},P_t={class:"mt-2 flex items-center gap-2 text-xs"},I_t={key:1,class:"text-gray-500"},O_t={class:"grid grid-cols-3 gap-4 mt-4"},L_t={class:"bg-white rounded-xl border p-4"},V_t={class:"space-y-3"},N_t={class:"flex-1"},j_t={class:"flex items-center justify-between"},F_t={class:"text-sm text-gray-700"},B_t={class:"text-sm font-medium text-gray-900"},z_t={class:"w-full bg-gray-100 rounded-full h-1.5 mt-1"},U_t={class:"bg-white rounded-xl border p-4"},H_t={class:"space-y-2"},q_t={class:"flex items-center gap-2"},W_t={class:"text-sm text-gray-600"},G_t={class:"text-sm font-medium text-gray-900"},Y_t={class:"bg-white rounded-xl border p-4"},K_t={class:"flex items-center justify-center py-4"},X_t={class:"relative h-28 w-28"},Z_t={class:"h-28 w-28 transform -rotate-90"},Q_t=["stroke-dashoffset"],J_t={class:"absolute inset-0 flex items-center justify-center"},ext={class:"text-2xl font-bold text-gray-900"},txt={__name:"ChecklistStats",props:{checklists:{type:Array,default:()=>[]}},setup(t){const e=t,n=2*Math.PI*48,r=J(()=>{const l=e.checklists.length,d=e.checklists.flatMap(k=>k.checklist_items||[]),c=d.length,f=d.filter(k=>["Completed","Filed"].includes(k.status)).length,p=d.filter(k=>k.status==="Overdue").length,h=c>0?Math.round(f/c*100):0,m=e.checklists.flatMap(k=>k.alerts||[]),g=m.length,v=m.filter(k=>k.severity==="Critical").length,_=e.checklists.filter(k=>k.completion_percent!==null&&k.completion_percent!==void 0).map(k=>k.completion_percent||0),x=_.length>0?Math.round(_.reduce((k,S)=>k+S,0)/_.length):0,w=new Set(e.checklists.map(k=>k.compliance_period)).size;return{total:l,totalRequirements:c,completedRequirements:f,overdueRequirements:p,completionRate:h,totalAlerts:g,criticalAlerts:v,avgCompletion:x,periodsCount:w}}),i=J(()=>{const l=r.value.avgCompletion/100;return n*(1-l)}),a=J(()=>{const l=e.checklists.length||1,d=["Monthly","Quarterly","Annual"],c={Monthly:{bgClass:"bg-blue-50",iconClass:"text-blue-600",barClass:"bg-blue-500"},Quarterly:{bgClass:"bg-purple-50",iconClass:"text-purple-600",barClass:"bg-purple-500"},Annual:{bgClass:"bg-green-50",iconClass:"text-green-600",barClass:"bg-green-500"}};return d.map(f=>{const p=e.checklists.filter(h=>h.period_type===f).length;return me({type:f,count:p,percentage:Math.round(p/l*100)},c[f])})}),s=J(()=>{const l=e.checklists.flatMap(c=>c.checklist_items||[]);return[{label:"Not Started",color:"bg-gray-400"},{label:"In Progress",color:"bg-blue-500"},{label:"Completed",color:"bg-green-500"},{label:"Filed",color:"bg-purple-500"},{label:"Overdue",color:"bg-red-500"},{label:"Not Applicable",color:"bg-gray-300"}].map(c=>je(me({},c),{count:l.filter(f=>f.status===c.label).length}))});function o(l){return l>=90?"text-green-500":l>=70?"text-blue-500":l>=50?"text-orange-500":"text-red-500"}return(l,d)=>(T(),P(_e,null,[u("div",d_t,[u("div",c_t,[u("div",f_t,[u("div",null,[d[0]||(d[0]=u("p",{class:"text-sm text-gray-500"},"Total Checklists",-1)),u("p",p_t,E(r.value.total),1)]),u("div",h_t,[b(y(kr),{class:"h-5 w-5 text-blue-600"})])]),u("div",m_t,[u("span",g_t,E(r.value.periodsCount)+" periods",1)])]),u("div",v_t,[u("div",y_t,[u("div",null,[d[1]||(d[1]=u("p",{class:"text-sm text-gray-500"},"Total Requirements",-1)),u("p",b_t,E(r.value.totalRequirements),1)]),u("div",__t,[b(y(yY),{class:"h-5 w-5 text-indigo-600"})])]),d[2]||(d[2]=u("div",{class:"mt-2 flex items-center gap-2 text-xs"},[u("span",{class:"text-gray-500"},"Across all checklists")],-1))]),u("div",x_t,[u("div",w_t,[u("div",null,[d[3]||(d[3]=u("p",{class:"text-sm text-gray-500"},"Completed",-1)),u("p",k_t,E(r.value.completedRequirements),1)]),u("div",S_t,[b(y(Gt),{class:"h-5 w-5 text-green-600"})])]),u("div",C_t,[u("div",A_t,[u("div",{class:"bg-green-500 h-1.5 rounded-full",style:nt({width:`${r.value.completionRate}%`})},null,4)]),u("span",T_t,E(r.value.completionRate)+"% complete",1)])]),u("div",E_t,[u("div",M_t,[u("div",null,[d[4]||(d[4]=u("p",{class:"text-sm text-gray-500"},"Overdue",-1)),u("p",{class:fe(["text-2xl font-bold",r.value.overdueRequirements>0?"text-red-600":"text-gray-400"])},E(r.value.overdueRequirements),3)]),u("div",{class:fe(["h-10 w-10 rounded-lg flex items-center justify-center",r.value.overdueRequirements>0?"bg-red-50":"bg-gray-50"])},[b(y(nn),{class:fe(["h-5 w-5",r.value.overdueRequirements>0?"text-red-600":"text-gray-400"])},null,8,["class"])],2)]),u("div",$_t,[u("span",{class:fe(r.value.overdueRequirements>0?"text-red-600":"text-gray-500")},E(r.value.overdueRequirements>0?"Action required":"All on track"),3)])]),u("div",D_t,[u("div",R_t,[u("div",null,[d[5]||(d[5]=u("p",{class:"text-sm text-gray-500"},"Active Alerts",-1)),u("p",{class:fe(["text-2xl font-bold",r.value.totalAlerts>0?"text-orange-600":"text-gray-400"])},E(r.value.totalAlerts),3)]),u("div",{class:fe(["h-10 w-10 rounded-lg flex items-center justify-center",r.value.totalAlerts>0?"bg-orange-50":"bg-gray-50"])},[b(y(fp),{class:fe(["h-5 w-5",r.value.totalAlerts>0?"text-orange-600":"text-gray-400"])},null,8,["class"])],2)]),u("div",P_t,[r.value.criticalAlerts>0?(T(),he(y(Ee),{key:0,theme:"red",size:"sm"},{default:D(()=>[W(E(r.value.criticalAlerts)+" critical ",1)]),_:1})):(T(),P("span",I_t,"No critical alerts"))])])]),u("div",O_t,[u("div",L_t,[d[6]||(d[6]=u("div",{class:"flex items-center justify-between mb-3"},[u("h4",{class:"font-medium text-gray-700"},"By Period Type")],-1)),u("div",V_t,[(T(!0),P(_e,null,we(a.value,c=>(T(),P("div",{key:c.type,class:"flex items-center gap-3"},[u("div",{class:fe(["h-8 w-8 rounded-lg flex items-center justify-center",c.bgClass])},[b(y(er),{class:fe(["h-4 w-4",c.iconClass])},null,8,["class"])],2),u("div",N_t,[u("div",j_t,[u("span",F_t,E(c.type),1),u("span",B_t,E(c.count),1)]),u("div",z_t,[u("div",{class:fe(["h-1.5 rounded-full",c.barClass]),style:nt({width:`${c.percentage}%`})},null,6)])])]))),128))])]),u("div",U_t,[d[7]||(d[7]=u("div",{class:"flex items-center justify-between mb-3"},[u("h4",{class:"font-medium text-gray-700"},"Status Distribution")],-1)),u("div",H_t,[(T(!0),P(_e,null,we(s.value,c=>(T(),P("div",{key:c.label,class:"flex items-center justify-between"},[u("div",q_t,[u("div",{class:fe(["h-3 w-3 rounded-full",c.color])},null,2),u("span",W_t,E(c.label),1)]),u("span",G_t,E(c.count),1)]))),128))])]),u("div",Y_t,[d[9]||(d[9]=u("div",{class:"flex items-center justify-between mb-3"},[u("h4",{class:"font-medium text-gray-700"},"Average Completion")],-1)),u("div",K_t,[u("div",X_t,[(T(),P("svg",Z_t,[d[8]||(d[8]=u("circle",{cx:"56",cy:"56",r:"48",stroke:"currentColor","stroke-width":"12",fill:"transparent",class:"text-gray-200"},null,-1)),u("circle",{cx:"56",cy:"56",r:"48",stroke:"currentColor","stroke-width":"12",fill:"transparent","stroke-dasharray":n,"stroke-dashoffset":i.value,"stroke-linecap":"round",class:fe(o(r.value.avgCompletion))},null,10,Q_t)])),u("div",J_t,[u("span",ext,E(r.value.avgCompletion)+"%",1)])])])])])],64))}},nxt={class:"flex h-[75vh]"},rxt={class:"w-56 border-r pr-4 flex-shrink-0"},ixt={class:"space-y-1 sticky top-0"},axt=["onClick"],sxt={class:"flex-1"},oxt={class:"mt-6 pt-6 border-t"},lxt={class:"w-full bg-gray-200 rounded-full h-2"},uxt={class:"text-xs text-gray-500 mt-1"},dxt={class:"flex-1 pl-6 overflow-y-auto"},cxt={class:"space-y-6"},fxt={class:"grid grid-cols-2 gap-6"},pxt={class:"grid grid-cols-3 gap-6"},hxt={class:"space-y-6"},mxt={class:"flex justify-end"},gxt={class:"border rounded-lg overflow-hidden"},vxt={class:"w-full"},yxt={class:"divide-y"},bxt={class:"px-4 py-3"},_xt={class:"px-4 py-3"},xxt={class:"px-4 py-3"},wxt={class:"px-4 py-3"},kxt={class:"px-4 py-3"},Sxt={class:"px-4 py-3"},Cxt={class:"flex items-center gap-1"},Axt={key:0},Txt={colspan:"6",class:"px-4 py-8 text-center text-gray-500"},Ext={class:"space-y-6"},Mxt={class:"grid grid-cols-4 gap-4"},$xt={class:"bg-blue-50 rounded-lg p-4 text-center"},Dxt={class:"text-3xl font-bold text-blue-600"},Rxt={class:"bg-green-50 rounded-lg p-4 text-center"},Pxt={class:"text-3xl font-bold text-green-600"},Ixt={class:"bg-red-50 rounded-lg p-4 text-center"},Oxt={class:"text-3xl font-bold text-red-600"},Lxt={class:"bg-purple-50 rounded-lg p-4 text-center"},Vxt={class:"text-3xl font-bold text-purple-600"},Nxt={class:"border rounded-lg p-6"},jxt={class:"flex items-center justify-between mb-3"},Fxt={class:"w-full bg-gray-200 rounded-full h-4"},Bxt={class:"border rounded-lg p-4"},zxt={class:"space-y-3"},Uxt={class:"w-28 text-sm text-gray-600"},Hxt={class:"flex-1 bg-gray-100 rounded-full h-2"},qxt={class:"w-12 text-sm text-gray-600 text-right"},Wxt={class:"space-y-6"},Gxt={class:"flex justify-end"},Yxt={class:"space-y-3"},Kxt={class:"flex items-start gap-4"},Xxt={class:"flex-1 grid grid-cols-3 gap-4"},Zxt={class:"mt-3 ml-14"},Qxt={key:0,class:"border rounded-lg p-8 text-center text-gray-500"},Jxt={class:"space-y-6"},ewt={class:"grid grid-cols-3 gap-6"},twt={class:"border rounded-lg p-4"},nwt={class:"flex items-center gap-3 mb-4"},rwt={class:"h-10 w-10 rounded-lg bg-blue-50 flex items-center justify-center"},iwt={class:"border rounded-lg p-4"},awt={class:"flex items-center gap-3 mb-4"},swt={class:"h-10 w-10 rounded-lg bg-purple-50 flex items-center justify-center"},owt={class:"border rounded-lg p-4"},lwt={class:"flex items-center gap-3 mb-4"},uwt={class:"h-10 w-10 rounded-lg bg-green-50 flex items-center justify-center"},dwt={key:0,class:"space-y-6"},cwt={class:"grid grid-cols-2 gap-6"},fwt={class:"grid grid-cols-3 gap-6"},pwt={class:"grid grid-cols-2 gap-6"},hwt={class:"border-t pt-6"},mwt={class:"grid grid-cols-3 gap-6"},gwt={class:"border-t pt-6"},vwt={class:"grid grid-cols-3 gap-6"},ywt={class:"mt-4"},bwt={class:"flex items-center justify-between w-full"},_wt={class:"flex items-center gap-2"},xwt={class:"flex items-center gap-2"},wwt={__name:"ComplianceChecklistForm",props:{show:{type:Boolean,default:!1},checklist:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.show,set:U=>r("update:show",U)}),a=J(()=>{var U;return!!((U=n.checklist)!=null&&U.name)}),s=Q(!1),o=Q("basic"),l=Q(!1),d=Q(null),c=Q(-1),f=[{id:"basic",label:"Basic Info",icon:vt},{id:"items",label:"Checklist Items",icon:kr},{id:"summary",label:"Summary",icon:cr},{id:"alerts",label:"Alerts",icon:fp},{id:"approval",label:"Approval",icon:gfe}],p=Jt({checklist_id:"",compliance_period:"",period_type:"",period_month:"",fiscal_year:"",checklist_items:[],total_requirements:0,completed_requirements:0,overdue_requirements:0,completion_percent:0,alerts:[],prepared_by:"",reviewed_by:"",approved_by:""}),h=[{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Annual",value:"Annual"}],m=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Filed",value:"Filed"},{label:"Overdue",value:"Overdue"},{label:"Not Applicable",value:"Not Applicable"}],g=[{label:"Not Verified",value:"Not Verified"},{label:"Verified",value:"Verified"},{label:"Issues Found",value:"Issues Found"}],v=[{label:"Due Soon",value:"Due Soon"},{label:"Overdue",value:"Overdue"},{label:"Missing Data",value:"Missing Data"}],_=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}];Je(()=>n.checklist,U=>{U&&Object.keys(p).forEach(G=>{U[G]!==void 0&&(p[G]=U[G])})},{immediate:!0}),Je(()=>n.show,U=>{U&&!n.checklist&&(Object.keys(p).forEach(G=>{G==="checklist_items"||G==="alerts"?p[G]=[]:typeof p[G]=="number"?p[G]=0:p[G]=""}),o.value="basic")}),Je(()=>p.checklist_items,()=>{x()},{deep:!0});function x(){const U=p.checklist_items||[];p.total_requirements=U.length,p.completed_requirements=U.filter(G=>["Completed","Filed"].includes(G.status)).length,p.overdue_requirements=U.filter(G=>G.status==="Overdue").length,p.completion_percent=U.length>0?Math.round(p.completed_requirements/U.length*100):0}const w=J(()=>{const U=p.checklist_items||[],G=U.length||1;return[{label:"Not Started",color:"bg-gray-400"},{label:"In Progress",color:"bg-blue-500"},{label:"Completed",color:"bg-green-500"},{label:"Filed",color:"bg-purple-500"},{label:"Overdue",color:"bg-red-500"},{label:"Not Applicable",color:"bg-gray-300"}].map(re=>{const ee=U.filter(de=>de.status===re.label).length;return je(me({},re),{count:ee,percentage:Math.round(ee/G*100)})})});function k(){p.checklist_items.push({requirement:"",regulatory_body:"",description:"",due_date:"",status:"Not Started",completion_date:"",completed_by:"",reference_no:"",amount_paid:0,payment_date:"",payment_reference:"",supporting_documents:"",notes:"",verification_status:"Not Verified",verified_by:"",verification_date:"",verification_notes:""})}function S(U){c.value=U,d.value=me({},p.checklist_items[U]),l.value=!0}function C(){c.value>=0&&d.value&&(p.checklist_items[c.value]=me({},d.value)),l.value=!1,d.value=null,c.value=-1}function A(U){p.checklist_items.splice(U,1)}function M(){p.alerts.push({requirement:"",alert_type:"",alert_message:"",severity:"Medium"})}function $(U){p.alerts.splice(U,1)}const R=J(()=>f.findIndex(U=>U.id===o.value));function I(){R.value<f.length-1&&(o.value=f[R.value+1].id)}function B(){R.value>0&&(o.value=f[R.value-1].id)}function j(U){var G;switch(U){case"basic":return!!p.checklist_id&&!!p.period_type;case"items":return((G=p.checklist_items)==null?void 0:G.length)>0;case"summary":return!0;case"alerts":return!0;case"approval":return!!p.approved_by;default:return!1}}const z=J(()=>{const U=f.filter(G=>j(G.id)).length;return Math.round(U/f.length*100)});function F(U){return U>=90?"green":U>=70?"blue":U>=50?"orange":"red"}function q(U){return U>=90?"bg-green-500":U>=70?"bg-blue-500":U>=50?"bg-orange-500":"bg-red-500"}function N(U){return{Critical:"border-red-200 bg-red-50",High:"border-orange-200 bg-orange-50",Medium:"border-yellow-200 bg-yellow-50",Low:"border-blue-200 bg-blue-50"}[U]||"border-gray-200"}function O(U){return{Critical:"bg-red-100",High:"bg-orange-100",Medium:"bg-yellow-100",Low:"bg-blue-100"}[U]||"bg-gray-100"}function V(U){return{Critical:"text-red-600",High:"text-orange-600",Medium:"text-yellow-600",Low:"text-blue-600"}[U]||"text-gray-600"}function L(){return le(this,null,function*(){s.value=!0;try{yield new Promise(U=>setTimeout(U,1e3)),r("saved",me({},p)),i.value=!1}catch(U){console.error("Failed to save checklist:",U)}finally{s.value=!1}})}return(U,G)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":G[27]||(G[27]=X=>i.value=X),options:{size:"7xl",title:a.value?"Edit Compliance Checklist":"New Compliance Checklist"}},{"body-content":D(()=>{var X,re;return[u("div",nxt,[u("div",rxt,[u("nav",ixt,[(T(),P(_e,null,we(f,(ee,de)=>u("button",{key:ee.id,onClick:se=>o.value=ee.id,class:fe(["w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",o.value===ee.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50"])},[(T(),he(Lt(ee.icon),{class:fe(["h-4 w-4",o.value===ee.id?"text-blue-600":"text-gray-400"])},null,8,["class"])),u("span",sxt,E(ee.label),1),j(ee.id)?(T(),he(y(Gt),{key:0,class:"h-4 w-4 text-green-500"})):ie("",!0)],10,axt)),64))]),u("div",oxt,[G[28]||(G[28]=u("div",{class:"text-xs font-medium text-gray-500 mb-2"},"Completion",-1)),u("div",lxt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:nt({width:`${z.value}%`})},null,4)]),u("div",uxt,E(z.value)+"% complete",1)])]),u("div",dxt,[xe(u("div",cxt,[b(Rt,{title:"Basic Information",description:"Checklist identification and period details"}),u("div",fxt,[b(y(ge),{modelValue:p.checklist_id,"onUpdate:modelValue":G[0]||(G[0]=ee=>p.checklist_id=ee),label:"Checklist ID",type:"text",required:!0,placeholder:"Auto-generated if left empty"},null,8,["modelValue"]),b(At,{modelValue:p.compliance_period,"onUpdate:modelValue":G[1]||(G[1]=ee=>p.compliance_period=ee),label:"Compliance Period",doctype:"Data Period",placeholder:"Select period"},null,8,["modelValue"])]),u("div",pxt,[u("div",null,[G[29]||(G[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Period Type "),u("span",{class:"text-red-500"},"*")],-1)),b(y(Ke),{modelValue:p.period_type,"onUpdate:modelValue":G[2]||(G[2]=ee=>p.period_type=ee),options:h,placeholder:"Select type"},null,8,["modelValue"])]),b(y(ge),{modelValue:p.period_month,"onUpdate:modelValue":G[3]||(G[3]=ee=>p.period_month=ee),label:"Period Month",type:"text",placeholder:"e.g., January 2025"},null,8,["modelValue"]),b(At,{modelValue:p.fiscal_year,"onUpdate:modelValue":G[4]||(G[4]=ee=>p.fiscal_year=ee),label:"Fiscal Year",doctype:"Fiscal Year",placeholder:"Select fiscal year"},null,8,["modelValue"])])],512),[[ot,o.value==="basic"]]),xe(u("div",hxt,[b(Rt,{title:"Checklist Items",description:"Compliance requirements and their status"}),u("div",mxt,[b(y(Z),{variant:"outline",onClick:k},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[G[30]||(G[30]=W(" Add Item ",-1))]),_:1})]),u("div",gxt,[u("table",vxt,[G[33]||(G[33]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Requirement "),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Regulatory Body "),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Due Date "),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Status "),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Verification "),u("th",{class:"px-4 py-3 w-20"})])],-1)),u("tbody",yxt,[(T(!0),P(_e,null,we(p.checklist_items,(ee,de)=>(T(),P("tr",{key:de,class:"hover:bg-gray-50"},[u("td",bxt,[b(At,{modelValue:ee.requirement,"onUpdate:modelValue":se=>ee.requirement=se,doctype:"Compliance Requirement",placeholder:"Select requirement",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",_xt,[b(y(ge),{modelValue:ee.regulatory_body,"onUpdate:modelValue":se=>ee.regulatory_body=se,type:"text",size:"sm",disabled:!0,placeholder:"Auto-filled"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",xxt,[b(y(ge),{modelValue:ee.due_date,"onUpdate:modelValue":se=>ee.due_date=se,type:"date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",wxt,[b(y(Ke),{modelValue:ee.status,"onUpdate:modelValue":se=>ee.status=se,options:m,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",kxt,[b(y(Ke),{modelValue:ee.verification_status,"onUpdate:modelValue":se=>ee.verification_status=se,options:g,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Sxt,[u("div",Cxt,[b(y(Z),{size:"sm",variant:"ghost",onClick:se=>S(de)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{size:"sm",variant:"ghost",theme:"red",onClick:se=>A(de)},{default:D(()=>[b(y(hi),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128)),(X=p.checklist_items)!=null&&X.length?ie("",!0):(T(),P("tr",Axt,[u("td",Txt,[b(y(kr),{class:"h-8 w-8 mx-auto mb-2 text-gray-400"}),G[31]||(G[31]=u("p",null,"No checklist items added",-1)),G[32]||(G[32]=u("p",{class:"text-sm mt-1"},'Click "Add Item" to add compliance requirements',-1))])]))])])])],512),[[ot,o.value==="items"]]),xe(u("div",Ext,[b(Rt,{title:"Summary",description:"Compliance completion overview"}),u("div",Mxt,[u("div",$xt,[u("p",Dxt,E(p.total_requirements),1),G[34]||(G[34]=u("p",{class:"text-sm text-blue-700"},"Total Requirements",-1))]),u("div",Rxt,[u("p",Pxt,E(p.completed_requirements),1),G[35]||(G[35]=u("p",{class:"text-sm text-green-700"},"Completed",-1))]),u("div",Ixt,[u("p",Oxt,E(p.overdue_requirements),1),G[36]||(G[36]=u("p",{class:"text-sm text-red-700"},"Overdue",-1))]),u("div",Lxt,[u("p",Vxt,E(p.completion_percent)+"%",1),G[37]||(G[37]=u("p",{class:"text-sm text-purple-700"},"Completion",-1))])]),u("div",Nxt,[u("div",jxt,[G[38]||(G[38]=u("h4",{class:"font-medium text-gray-700"},"Overall Progress",-1)),b(y(Ee),{theme:F(p.completion_percent),size:"lg"},{default:D(()=>[W(E(p.completion_percent)+"% ",1)]),_:1},8,["theme"])]),u("div",Fxt,[u("div",{class:fe(["h-4 rounded-full transition-all",q(p.completion_percent)]),style:nt({width:`${p.completion_percent||0}%`})},null,6)])]),u("div",Bxt,[G[39]||(G[39]=u("h4",{class:"font-medium text-gray-700 mb-4"},"Status Breakdown",-1)),u("div",zxt,[(T(!0),P(_e,null,we(w.value,ee=>(T(),P("div",{key:ee.label,class:"flex items-center gap-3"},[u("div",Uxt,E(ee.label),1),u("div",Hxt,[u("div",{class:fe(["h-2 rounded-full",ee.color]),style:nt({width:`${ee.percentage}%`})},null,6)]),u("div",qxt,E(ee.count),1)]))),128))])])],512),[[ot,o.value==="summary"]]),xe(u("div",Wxt,[b(Rt,{title:"Alerts",description:"Compliance alerts and notifications"}),u("div",Gxt,[b(y(Z),{variant:"outline",onClick:M},{prefix:D(()=>[b(y(fp),{class:"h-4 w-4"})]),default:D(()=>[G[40]||(G[40]=W(" Add Alert ",-1))]),_:1})]),u("div",Yxt,[(T(!0),P(_e,null,we(p.alerts,(ee,de)=>(T(),P("div",{key:de,class:fe(["border rounded-lg p-4",N(ee.severity)])},[u("div",Kxt,[u("div",{class:fe(["h-10 w-10 rounded-lg flex items-center justify-center flex-shrink-0",O(ee.severity)])},[b(y(nn),{class:fe(["h-5 w-5",V(ee.severity)])},null,8,["class"])],2),u("div",Xxt,[b(At,{modelValue:ee.requirement,"onUpdate:modelValue":se=>ee.requirement=se,doctype:"Compliance Requirement",label:"Requirement",placeholder:"Select requirement"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[G[41]||(G[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Alert Type",-1)),b(y(Ke),{modelValue:ee.alert_type,"onUpdate:modelValue":se=>ee.alert_type=se,options:v},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[G[42]||(G[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Severity",-1)),b(y(Ke),{modelValue:ee.severity,"onUpdate:modelValue":se=>ee.severity=se,options:_},null,8,["modelValue","onUpdate:modelValue"])])]),b(y(Z),{size:"sm",variant:"ghost",theme:"red",onClick:se=>$(de)},{default:D(()=>[b(y(hi),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",Zxt,[b(y(ge),{modelValue:ee.alert_message,"onUpdate:modelValue":se=>ee.alert_message=se,type:"textarea",rows:2,placeholder:"Enter alert message..."},null,8,["modelValue","onUpdate:modelValue"])])],2))),128)),(re=p.alerts)!=null&&re.length?ie("",!0):(T(),P("div",Qxt,[b(y(fp),{class:"h-8 w-8 mx-auto mb-2 text-gray-400"}),G[43]||(G[43]=u("p",null,"No alerts configured",-1)),G[44]||(G[44]=u("p",{class:"text-sm mt-1"},'Click "Add Alert" to create compliance alerts',-1))]))])],512),[[ot,o.value==="alerts"]]),xe(u("div",Jxt,[b(Rt,{title:"Approval",description:"Checklist review and approval workflow"}),u("div",ewt,[u("div",twt,[u("div",nwt,[u("div",rwt,[b(y(Kce),{class:"h-5 w-5 text-blue-600"})]),G[45]||(G[45]=u("div",null,[u("h4",{class:"font-medium text-gray-700"},"Prepared By"),u("p",{class:"text-xs text-gray-500"},"Person who prepared this checklist")],-1))]),b(At,{modelValue:p.prepared_by,"onUpdate:modelValue":G[5]||(G[5]=ee=>p.prepared_by=ee),doctype:"User",placeholder:"Select user",disabled:!0},null,8,["modelValue"])]),u("div",iwt,[u("div",awt,[u("div",swt,[b(y(ar),{class:"h-5 w-5 text-purple-600"})]),G[46]||(G[46]=u("div",null,[u("h4",{class:"font-medium text-gray-700"},"Reviewed By"),u("p",{class:"text-xs text-gray-500"},"Person who reviewed this checklist")],-1))]),b(At,{modelValue:p.reviewed_by,"onUpdate:modelValue":G[6]||(G[6]=ee=>p.reviewed_by=ee),doctype:"User",placeholder:"Select reviewer"},null,8,["modelValue"])]),u("div",owt,[u("div",lwt,[u("div",uwt,[b(y(Gt),{class:"h-5 w-5 text-green-600"})]),G[47]||(G[47]=u("div",null,[u("h4",{class:"font-medium text-gray-700"},"Approved By"),u("p",{class:"text-xs text-gray-500"},"Person who approved this checklist")],-1))]),b(At,{modelValue:p.approved_by,"onUpdate:modelValue":G[7]||(G[7]=ee=>p.approved_by=ee),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])])])],512),[[ot,o.value==="approval"]])])]),b(y(zt),{modelValue:l.value,"onUpdate:modelValue":G[25]||(G[25]=ee=>l.value=ee),options:{size:"3xl",title:"Edit Checklist Item"}},{"body-content":D(()=>[d.value?(T(),P("div",dwt,[u("div",cwt,[b(At,{modelValue:d.value.requirement,"onUpdate:modelValue":G[8]||(G[8]=ee=>d.value.requirement=ee),label:"Requirement",doctype:"Compliance Requirement",required:!0},null,8,["modelValue"]),b(y(ge),{modelValue:d.value.regulatory_body,"onUpdate:modelValue":G[9]||(G[9]=ee=>d.value.regulatory_body=ee),label:"Regulatory Body",type:"text",disabled:!0},null,8,["modelValue"])]),b(y(ge),{modelValue:d.value.description,"onUpdate:modelValue":G[10]||(G[10]=ee=>d.value.description=ee),label:"Description",type:"text",disabled:!0},null,8,["modelValue"]),u("div",fwt,[b(y(ge),{modelValue:d.value.due_date,"onUpdate:modelValue":G[11]||(G[11]=ee=>d.value.due_date=ee),label:"Due Date",type:"date"},null,8,["modelValue"]),u("div",null,[G[48]||(G[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(y(Ke),{modelValue:d.value.status,"onUpdate:modelValue":G[12]||(G[12]=ee=>d.value.status=ee),options:m},null,8,["modelValue"])]),b(y(ge),{modelValue:d.value.completion_date,"onUpdate:modelValue":G[13]||(G[13]=ee=>d.value.completion_date=ee),label:"Completion Date",type:"date"},null,8,["modelValue"])]),u("div",pwt,[b(At,{modelValue:d.value.completed_by,"onUpdate:modelValue":G[14]||(G[14]=ee=>d.value.completed_by=ee),label:"Completed By",doctype:"User"},null,8,["modelValue"]),b(y(ge),{modelValue:d.value.reference_no,"onUpdate:modelValue":G[15]||(G[15]=ee=>d.value.reference_no=ee),label:"Reference No",type:"text"},null,8,["modelValue"])]),u("div",hwt,[G[49]||(G[49]=u("h4",{class:"font-medium text-gray-700 mb-4"},"Payment Details",-1)),u("div",mwt,[b(y(ge),{modelValue:d.value.amount_paid,"onUpdate:modelValue":G[16]||(G[16]=ee=>d.value.amount_paid=ee),label:"Amount Paid",type:"number",placeholder:"0.00"},null,8,["modelValue"]),b(y(ge),{modelValue:d.value.payment_date,"onUpdate:modelValue":G[17]||(G[17]=ee=>d.value.payment_date=ee),label:"Payment Date",type:"date"},null,8,["modelValue"]),b(y(ge),{modelValue:d.value.payment_reference,"onUpdate:modelValue":G[18]||(G[18]=ee=>d.value.payment_reference=ee),label:"Payment Reference",type:"text"},null,8,["modelValue"])])]),b(y(ge),{modelValue:d.value.notes,"onUpdate:modelValue":G[19]||(G[19]=ee=>d.value.notes=ee),label:"Notes",type:"textarea",rows:3},null,8,["modelValue"]),u("div",gwt,[G[51]||(G[51]=u("h4",{class:"font-medium text-gray-700 mb-4"},"Verification",-1)),u("div",vwt,[u("div",null,[G[50]||(G[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(y(Ke),{modelValue:d.value.verification_status,"onUpdate:modelValue":G[20]||(G[20]=ee=>d.value.verification_status=ee),options:g},null,8,["modelValue"])]),b(At,{modelValue:d.value.verified_by,"onUpdate:modelValue":G[21]||(G[21]=ee=>d.value.verified_by=ee),label:"Verified By",doctype:"User"},null,8,["modelValue"]),b(y(ge),{modelValue:d.value.verification_date,"onUpdate:modelValue":G[22]||(G[22]=ee=>d.value.verification_date=ee),label:"Verification Date",type:"date"},null,8,["modelValue"])]),u("div",ywt,[b(y(ge),{modelValue:d.value.verification_notes,"onUpdate:modelValue":G[23]||(G[23]=ee=>d.value.verification_notes=ee),label:"Verification Notes",type:"textarea",rows:2},null,8,["modelValue"])])])])):ie("",!0)]),actions:D(()=>[b(y(Z),{variant:"outline",onClick:G[24]||(G[24]=ee=>l.value=!1)},{default:D(()=>[...G[52]||(G[52]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:C},{default:D(()=>[...G[53]||(G[53]=[W("Save Changes",-1)])]),_:1})]),_:1},8,["modelValue"])]}),actions:D(()=>[u("div",bwt,[u("div",_wt,[o.value!=="basic"?(T(),he(y(Z),{key:0,variant:"outline",onClick:B},{prefix:D(()=>[b(y(pr),{class:"h-4 w-4"})]),default:D(()=>[G[54]||(G[54]=W(" Previous ",-1))]),_:1})):ie("",!0)]),u("div",xwt,[b(y(Z),{variant:"outline",onClick:G[26]||(G[26]=X=>i.value=!1)},{default:D(()=>[...G[55]||(G[55]=[W("Cancel",-1)])]),_:1}),o.value!=="approval"?(T(),he(y(Z),{key:0,variant:"solid",onClick:I},{suffix:D(()=>[b(y(tr),{class:"h-4 w-4"})]),default:D(()=>[G[56]||(G[56]=W(" Next ",-1))]),_:1})):(T(),he(y(Z),{key:1,variant:"solid",theme:"green",loading:s.value,onClick:L},{prefix:D(()=>[b(y(Cr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+E(a.value?"Update Checklist":"Create Checklist"),1)]),_:1},8,["loading"]))])])]),_:1},8,["modelValue","options"]))}},QO=Ul("compliance",{state:()=>({complianceRequirements:[],complianceChecklists:[],taxComplianceTrackers:[],loading:!1,error:null}),getters:{activeRequirements:t=>t.complianceRequirements.filter(e=>e.is_active),requirementsByCategory:t=>{const e={};return t.complianceRequirements.forEach(n=>{const r=n.compliance_category||"Other";e[r]||(e[r]=[]),e[r].push(n)}),e},requirementsByRegulatoryBody:t=>{const e={};return t.complianceRequirements.forEach(n=>{const r=n.regulatory_body||"Other";e[r]||(e[r]=[]),e[r].push(n)}),e},activeChecklists:t=>t.complianceChecklists.filter(e=>e.docstatus===0),checklistSummary:t=>{const e={total:t.complianceChecklists.length,completed:0,overdue:0,alerts:0};return t.complianceChecklists.forEach(n=>{n.completion_percent===100&&e.completed++,n.overdue_requirements>0&&e.overdue++,n.alerts&&n.alerts.length>0&&e.alerts++}),e},taxComplianceSummary:t=>{if(t.taxComplianceTrackers.length===0)return null;const n=t.taxComplianceTrackers.reduce((i,a)=>i+(a.compliance_score||0),0)/t.taxComplianceTrackers.length,r={vat:t.taxComplianceTrackers.filter(i=>i.vat_return_filed).length,paye:t.taxComplianceTrackers.filter(i=>i.paye_return_filed).length,wht:t.taxComplianceTrackers.filter(i=>i.wht_return_filed).length,nssf:t.taxComplianceTrackers.filter(i=>i.nssf_return_filed).length,nhif:t.taxComplianceTrackers.filter(i=>i.nhif_return_filed).length};return{totalTrackers:t.taxComplianceTrackers.length,averageScore:Math.round(n),filings:r}}},actions:{fetchComplianceRequirements(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Compliance Requirement",fields:["name","requirement_id","requirement_name","regulatory_body","regulation_reference","compliance_category","description","frequency","due_date_calculation","fixed_due_day","due_days_after_period","responsible_person","responsible_department","is_active","creation","modified"],limit_page_length:1e3,order_by:"regulatory_body, compliance_category"}}).fetch();this.complianceRequirements=t||[]}catch(t){console.error("Error fetching compliance requirements:",t),this.error=t.message||"Failed to fetch compliance requirements",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Compliance Requirement doctype"),this.complianceRequirements=[])}finally{this.loading=!1}})},fetchComplianceChecklists(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Compliance Checklist",fields:["name","checklist_id","compliance_period","period_type","period_month","fiscal_year","total_requirements","completed_requirements","overdue_requirements","completion_percent","prepared_by","reviewed_by","approved_by","creation","modified","docstatus"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.complianceChecklists=t||[]}catch(t){console.error("Error fetching compliance checklists:",t),this.error=t.message||"Failed to fetch compliance checklists",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Compliance Checklist doctype"),this.complianceChecklists=[])}finally{this.loading=!1}})},fetchTaxComplianceTrackers(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Tax Compliance Tracker",fields:["name","tracker_id","tax_period","compliance_score","vat_return_filed","paye_return_filed","wht_return_filed","nssf_return_filed","nhif_return_filed","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.taxComplianceTrackers=t||[]}catch(t){console.error("Error fetching tax compliance trackers:",t),this.error=t.message||"Failed to fetch tax compliance trackers",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Tax Compliance Tracker doctype"),this.taxComplianceTrackers=[])}finally{this.loading=!1}})},createComplianceRequirement(t){return le(this,null,function*(){try{const e=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Compliance Requirement"},t)}}).fetch();return yield this.fetchComplianceRequirements(),e}catch(e){throw console.error("Error creating compliance requirement:",e),e}})},updateComplianceRequirement(t,e){return le(this,null,function*(){try{const n=yield Ie({url:"frappe.client.set_value",params:{doctype:"Compliance Requirement",name:t,fieldname:e}}).fetch();return yield this.fetchComplianceRequirements(),n}catch(n){throw console.error("Error updating compliance requirement:",n),n}})},createComplianceChecklist(t){return le(this,null,function*(){try{const e=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Compliance Checklist"},t)}}).fetch();return yield this.fetchComplianceChecklists(),e}catch(e){throw console.error("Error creating compliance checklist:",e),e}})},createTaxComplianceTracker(t){return le(this,null,function*(){try{const e=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Tax Compliance Tracker"},t)}}).fetch();return yield this.fetchTaxComplianceTrackers(),e}catch(e){throw console.error("Error creating tax compliance tracker:",e),e}})},getChecklistDetails(t){return le(this,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Compliance Checklist",name:t}}).fetch()}catch(e){throw console.error("Error fetching checklist details:",e),e}})},getTaxTrackerDetails(t){return le(this,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Tax Compliance Tracker",name:t}}).fetch()}catch(e){throw console.error("Error fetching tax tracker details:",e),e}})},getRequirementDetails(t){return le(this,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Compliance Requirement",name:t}}).fetch()}catch(e){throw console.error("Error fetching requirement details:",e),e}})},createStandardRequirements(){return le(this,null,function*(){try{const t=yield Ie({url:"mkaguzi.api.create_standard_kenya_requirements"}).fetch();return yield this.fetchComplianceRequirements(),t}catch(t){throw console.error("Error creating standard requirements:",t),t}})}}}),kwt={class:"p-6"},Swt={class:"flex justify-between items-center mb-6"},Cwt={class:"bg-white rounded-lg border shadow-sm"},Awt={class:"p-4 border-b"},Twt={class:"flex justify-between items-center"},Ewt={class:"flex gap-2"},Mwt={class:"overflow-x-auto"},$wt={class:"w-full"},Dwt={class:"divide-y divide-gray-200"},Rwt={class:"px-4 py-3"},Pwt={class:"font-medium"},Iwt={class:"text-sm text-gray-500"},Owt={class:"px-4 py-3"},Lwt={class:"text-sm text-gray-500"},Vwt={class:"px-4 py-3"},Nwt={class:"px-4 py-3"},jwt={class:"flex items-center gap-2"},Fwt={class:"w-24 bg-gray-200 rounded-full h-2"},Bwt={class:"text-sm"},zwt={class:"px-4 py-3"},Uwt={class:"flex flex-col gap-1"},Hwt={key:0,class:"text-xs text-red-600"},qwt={class:"px-4 py-3"},Wwt={class:"flex gap-1"},Gwt={key:0,class:"p-8 text-center text-gray-500"},Ywt={__name:"ComplianceChecklist",setup(t){const e=QO(),n=Q(!1),r=Q(!1),i=Q(null),a=J(()=>e.loading),s=J(()=>e.complianceChecklists);J(()=>e.checklistSummary);const o=Q(""),l=Q(""),d=Q(""),c=Q(""),f=Q(""),p=J(()=>{const C=s.value,A=C.length,M=C.filter(B=>B.completion_percent===100).length,$=C.filter(B=>(B.overdue_requirements||0)>0).length,R=C.filter(B=>B.completion_percent>0&&B.completion_percent<100).length,I=C.filter(B=>{var j;return(((j=B.alerts)==null?void 0:j.length)||0)>0}).length;return{total:A,completed:M,overdue:$,inProgress:R,alerts:I}}),h=()=>le(this,null,function*(){yield e.fetchComplianceChecklists()}),m=()=>{i.value=null,r.value=!1,n.value=!0},g=C=>le(this,null,function*(){try{i.value=yield e.getChecklistDetails(C.name),r.value=!0,n.value=!0}catch(A){console.error("Error fetching checklist details:",A)}}),v=C=>le(this,null,function*(){try{i.value=yield e.getChecklistDetails(C.name),r.value=!0,n.value=!0}catch(A){console.error("Error fetching checklist details:",A)}}),_=()=>le(this,null,function*(){n.value=!1,yield h()}),x=C=>({Monthly:"blue",Quarterly:"green",Annual:"purple"})[C]||"gray",w=C=>C>=80?"bg-green-500":C>=50?"bg-yellow-500":"bg-red-500",k=C=>C.overdue_requirements>0?"red":C.completion_percent===100?"green":C.completion_percent>0?"yellow":"gray",S=C=>C.overdue_requirements>0?"Overdue":C.completion_percent===100?"Completed":C.completion_percent>0?"In Progress":"Not Started";return bt(()=>le(this,null,function*(){yield h()})),(C,A)=>(T(),P("div",kwt,[u("div",Swt,[A[7]||(A[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Compliance Checklist"),u("p",{class:"text-gray-600"},"Manage regulatory compliance requirements and track completion status.")],-1)),b(y(Z),{onClick:m,class:"flex items-center gap-2"},{default:D(()=>[b(y(tt),{class:"w-4 h-4"}),A[6]||(A[6]=W(" Create Checklist ",-1))]),_:1})]),b(txt,{stats:p.value},null,8,["stats"]),b(u_t,{searchQuery:o.value,"onUpdate:searchQuery":A[0]||(A[0]=M=>o.value=M),selectedPeriodType:l.value,"onUpdate:selectedPeriodType":A[1]||(A[1]=M=>l.value=M),selectedStatus:d.value,"onUpdate:selectedStatus":A[2]||(A[2]=M=>d.value=M),selectedCompletionStatus:c.value,"onUpdate:selectedCompletionStatus":A[3]||(A[3]=M=>c.value=M),selectedAlertLevel:f.value,"onUpdate:selectedAlertLevel":A[4]||(A[4]=M=>f.value=M)},null,8,["searchQuery","selectedPeriodType","selectedStatus","selectedCompletionStatus","selectedAlertLevel"]),u("div",Cwt,[u("div",Awt,[u("div",Twt,[A[8]||(A[8]=u("h2",{class:"text-lg font-semibold"},"Compliance Checklists",-1)),u("div",Ewt,[b(y(Z),{onClick:h,loading:a.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"])])])]),u("div",Mwt,[u("table",$wt,[A[9]||(A[9]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Checklist ID"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Period"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Progress"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",Dwt,[(T(!0),P(_e,null,we(s.value,M=>(T(),P("tr",{key:M.name,class:"hover:bg-gray-50"},[u("td",Rwt,[u("div",Pwt,E(M.checklist_id),1),u("div",Iwt,E(M.name),1)]),u("td",Owt,[u("div",null,E(M.period_month||M.fiscal_year),1),u("div",Lwt,E(M.compliance_period),1)]),u("td",Vwt,[b(y(Ee),{variant:x(M.period_type)},{default:D(()=>[W(E(M.period_type),1)]),_:2},1032,["variant"])]),u("td",Nwt,[u("div",jwt,[u("div",Fwt,[u("div",{class:fe(["h-2 rounded-full",w(M.completion_percent)]),style:nt({width:`${M.completion_percent||0}%`})},null,6)]),u("span",Bwt,E(M.completion_percent||0)+"%",1)])]),u("td",zwt,[u("div",Uwt,[b(y(Ee),{variant:k(M)},{default:D(()=>[W(E(S(M)),1)]),_:2},1032,["variant"]),M.overdue_requirements>0?(T(),P("div",Hwt,E(M.overdue_requirements)+" overdue ",1)):ie("",!0)])]),u("td",qwt,[u("div",Wwt,[b(y(Z),{onClick:$=>g(M),variant:"outline",size:"sm"},{default:D(()=>[b(y(ar),{class:"w-4 h-4"})]),_:1},8,["onClick"]),b(y(Z),{onClick:$=>v(M),variant:"outline",size:"sm"},{default:D(()=>[b(y(vn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])])]))),128))])])]),s.value.length===0&&!a.value?(T(),P("div",Gwt,[b(y(vt),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),A[11]||(A[11]=u("p",null,"No compliance checklists found.",-1)),b(y(Z),{onClick:m,class:"mt-4"},{default:D(()=>[...A[10]||(A[10]=[W(" Create Your First Checklist ",-1)])]),_:1})])):ie("",!0)]),b(wwt,{show:n.value,"onUpdate:show":A[5]||(A[5]=M=>n.value=M),"checklist-data":i.value,"is-edit-mode":r.value,onSaved:_},null,8,["show","checklist-data","is-edit-mode"])]))}},Kwt={class:"compliance-stats"},Xwt={class:"stats-grid"},Zwt={class:"stat-card"},Qwt={class:"stat-header"},Jwt={class:"stat-value"},e2t={class:"stat-card"},t2t={class:"stat-header"},n2t={class:"stat-value"},r2t={class:"stat-card"},i2t={class:"stat-header"},a2t={class:"stat-value"},s2t={class:"stat-card"},o2t={class:"stat-header"},l2t={class:"stat-value"},u2t={__name:"ComplianceStats",props:{totalRequirements:{type:Number,required:!0,default:0},activeRequirementsCount:{type:Number,required:!0,default:0},regulatoryBodiesCount:{type:Number,required:!0,default:0},categoriesCount:{type:Number,required:!0,default:0}},setup(t){return(e,n)=>(T(),P("div",Kwt,[u("div",Xwt,[u("div",Zwt,[u("div",Qwt,[n[0]||(n[0]=u("h3",null,"Total Requirements",-1)),b(y(vt),{class:"stat-icon"})]),u("div",Jwt,E(t.totalRequirements),1),n[1]||(n[1]=u("div",{class:"stat-description"}," All compliance requirements ",-1))]),u("div",e2t,[u("div",t2t,[n[2]||(n[2]=u("h3",null,"Active Requirements",-1)),b(y(Gt),{class:"stat-icon"})]),u("div",n2t,E(t.activeRequirementsCount),1),n[3]||(n[3]=u("div",{class:"stat-description"}," Currently active requirements ",-1))]),u("div",r2t,[u("div",i2t,[n[4]||(n[4]=u("h3",null,"Regulatory Bodies",-1)),b(y(Cc),{class:"stat-icon"})]),u("div",a2t,E(t.regulatoryBodiesCount),1),n[5]||(n[5]=u("div",{class:"stat-description"}," Different regulatory authorities ",-1))]),u("div",s2t,[u("div",o2t,[n[6]||(n[6]=u("h3",null,"Categories",-1)),b(y(CY),{class:"stat-icon"})]),u("div",l2t,E(t.categoriesCount),1),n[7]||(n[7]=u("div",{class:"stat-description"}," Compliance requirement categories ",-1))])])]))}},d2t=Ft(u2t,[["__scopeId","data-v-fe3cfde1"]]),c2t={class:"compliance-filters"},f2t={class:"filters-grid"},p2t={class:"filter-actions"},h2t={__name:"ComplianceFilters",props:{filters:{type:Object,required:!0,default:()=>({regulatory_body:"",compliance_category:"",is_active:""})}},emits:["clear-filters"],setup(t,{emit:e}){const n=e,r=[{label:"KRA",value:"KRA"},{label:"NSSF",value:"NSSF"},{label:"NHIF",value:"NHIF"},{label:"NEMA",value:"NEMA"},{label:"County Government",value:"County Government"},{label:"KEBS",value:"KEBS"},{label:"Central Bank of Kenya",value:"Central Bank of Kenya"},{label:"CMA",value:"CMA"},{label:"IRA",value:"IRA"},{label:"Other",value:"Other"}],i=[{label:"Tax",value:"Tax"},{label:"Social Security",value:"Social Security"},{label:"Environmental",value:"Environmental"},{label:"Licensing",value:"Licensing"},{label:"Health & Safety",value:"Health & Safety"},{label:"Industry-Specific",value:"Industry-Specific"},{label:"Employment",value:"Employment"},{label:"Data Protection",value:"Data Protection"}],a=[{label:"All",value:""},{label:"Active",value:"true"},{label:"Inactive",value:"false"}],s=()=>{n("clear-filters")};return(o,l)=>(T(),P("div",c2t,[u("div",f2t,[b(y(ge),{label:"Regulatory Body",modelValue:t.filters.regulatory_body,"onUpdate:modelValue":l[0]||(l[0]=d=>t.filters.regulatory_body=d),type:"select",options:r,placeholder:"All Bodies"},null,8,["modelValue"]),b(y(ge),{label:"Category",modelValue:t.filters.compliance_category,"onUpdate:modelValue":l[1]||(l[1]=d=>t.filters.compliance_category=d),type:"select",options:i,placeholder:"All Categories"},null,8,["modelValue"]),b(y(ge),{label:"Status",modelValue:t.filters.is_active,"onUpdate:modelValue":l[2]||(l[2]=d=>t.filters.is_active=d),type:"select",options:a,placeholder:"All Status"},null,8,["modelValue"]),u("div",p2t,[b(y(Z),{onClick:s,variant:"outline"},{default:D(()=>[...l[3]||(l[3]=[W("Clear Filters",-1)])]),_:1})])])]))}},m2t=Ft(h2t,[["__scopeId","data-v-6d7f0684"]]),g2t={class:"compliance-requirement-form"},v2t={class:"form-sections"},y2t={class:"form-section"},b2t={class:"form-grid"},_2t={class:"form-section"},x2t={class:"form-grid"},w2t={class:"form-row"},k2t={__name:"ComplianceRequirementForm",props:{formData:{type:Object,required:!0,default:()=>({requirement_id:"",requirement_name:"",regulatory_body:"",compliance_category:"",description:"",frequency:"",responsible_person:"",responsible_department:"",is_active:!0})}},setup(t){const e=[{label:"KRA",value:"KRA"},{label:"NSSF",value:"NSSF"},{label:"NHIF",value:"NHIF"},{label:"NEMA",value:"NEMA"},{label:"County Government",value:"County Government"},{label:"KEBS",value:"KEBS"},{label:"Central Bank of Kenya",value:"Central Bank of Kenya"},{label:"CMA",value:"CMA"},{label:"IRA",value:"IRA"},{label:"Other",value:"Other"}],n=[{label:"Tax",value:"Tax"},{label:"Social Security",value:"Social Security"},{label:"Environmental",value:"Environmental"},{label:"Licensing",value:"Licensing"},{label:"Health & Safety",value:"Health & Safety"},{label:"Industry-Specific",value:"Industry-Specific"},{label:"Employment",value:"Employment"},{label:"Data Protection",value:"Data Protection"}],r=[{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"One-time",value:"One-time"},{label:"Event-Based",value:"Event-Based"}];return(i,a)=>(T(),P("div",g2t,[u("div",v2t,[u("div",y2t,[a[9]||(a[9]=u("h3",{class:"section-title"},"Basic Information",-1)),u("div",b2t,[b(y(ge),{label:"Requirement ID",modelValue:t.formData.requirement_id,"onUpdate:modelValue":a[0]||(a[0]=s=>t.formData.requirement_id=s),type:"text",required:""},null,8,["modelValue"]),b(y(ge),{label:"Requirement Name",modelValue:t.formData.requirement_name,"onUpdate:modelValue":a[1]||(a[1]=s=>t.formData.requirement_name=s),type:"text",required:""},null,8,["modelValue"]),b(y(ge),{label:"Regulatory Body",modelValue:t.formData.regulatory_body,"onUpdate:modelValue":a[2]||(a[2]=s=>t.formData.regulatory_body=s),type:"select",options:e,required:""},null,8,["modelValue"]),b(y(ge),{label:"Category",modelValue:t.formData.compliance_category,"onUpdate:modelValue":a[3]||(a[3]=s=>t.formData.compliance_category=s),type:"select",options:n,required:""},null,8,["modelValue"])])]),u("div",_2t,[a[10]||(a[10]=u("h3",{class:"section-title"},"Details & Responsibility",-1)),u("div",x2t,[b(y(ge),{label:"Description",modelValue:t.formData.description,"onUpdate:modelValue":a[4]||(a[4]=s=>t.formData.description=s),type:"textarea",rows:"3",required:""},null,8,["modelValue"]),b(y(ge),{label:"Frequency",modelValue:t.formData.frequency,"onUpdate:modelValue":a[5]||(a[5]=s=>t.formData.frequency=s),type:"select",options:r,required:""},null,8,["modelValue"]),b(y(ge),{label:"Responsible Person",modelValue:t.formData.responsible_person,"onUpdate:modelValue":a[6]||(a[6]=s=>t.formData.responsible_person=s),type:"link",doctype:"User"},null,8,["modelValue"]),b(y(ge),{label:"Responsible Department",modelValue:t.formData.responsible_department,"onUpdate:modelValue":a[7]||(a[7]=s=>t.formData.responsible_department=s),type:"link",doctype:"Department"},null,8,["modelValue"])]),u("div",w2t,[b(y(ge),{label:"Is Active",modelValue:t.formData.is_active,"onUpdate:modelValue":a[8]||(a[8]=s=>t.formData.is_active=s),type:"checkbox"},null,8,["modelValue"])])])])]))}},S2t=Ft(k2t,[["__scopeId","data-v-b06000c9"]]),C2t={class:"p-6"},A2t={class:"flex justify-between items-center mb-6"},T2t={class:"flex gap-2"},E2t={class:"bg-white rounded-lg border shadow-sm"},M2t={class:"p-4 border-b"},$2t={class:"flex justify-between items-center"},D2t={class:"flex gap-2"},R2t={class:"overflow-x-auto"},P2t={class:"w-full"},I2t={class:"divide-y divide-gray-200"},O2t={class:"px-4 py-3"},L2t={class:"font-medium"},V2t={class:"text-sm text-gray-500"},N2t={class:"px-4 py-3"},j2t={class:"font-medium"},F2t={class:"text-sm text-gray-600 line-clamp-2"},B2t={class:"px-4 py-3"},z2t={class:"px-4 py-3"},U2t={class:"px-4 py-3"},H2t={key:0,class:"text-xs text-gray-500"},q2t={class:"px-4 py-3"},W2t={key:0},G2t={key:1,class:"text-sm text-gray-500"},Y2t={class:"px-4 py-3"},K2t={class:"px-4 py-3"},X2t={class:"flex gap-1"},Z2t={key:0,class:"p-8 text-center text-gray-500"},Q2t={class:"mt-4 space-x-2"},J2t={key:0,class:"space-y-6"},ekt={class:"grid grid-cols-2 gap-4"},tkt={class:"mt-2 space-y-1 text-sm"},nkt={class:"mt-2 space-y-1 text-sm"},rkt={key:0},ikt={key:1},akt={key:2},skt={key:3},okt={class:"mt-2 text-sm"},lkt={key:0},ukt={class:"mt-2 text-sm"},dkt={key:1},ckt={class:"mt-2 space-y-2"},fkt={class:"font-medium"},pkt={class:"text-sm text-gray-600"},hkt={key:2},mkt={class:"mt-2 space-y-2"},gkt={class:"font-medium"},vkt={class:"text-sm"},ykt={key:0,class:"text-sm font-medium text-red-600"},bkt={key:3},_kt={class:"mt-2 space-y-2"},xkt={class:"font-medium"},wkt={class:"text-sm text-gray-600"},kkt={__name:"ComplianceRequirements",setup(t){const e=QO(),n=Q(!1),r=Q(!1),i=Q(null),a=Q(!1),s=Q({regulatory_body:"",compliance_category:"",is_active:""}),o=Q({requirement_id:"",requirement_name:"",regulatory_body:"",compliance_category:"",description:"",frequency:"",responsible_person:"",responsible_department:"",is_active:!0}),l=J(()=>e.complianceRequirements),d=J(()=>e.activeRequirements),c=J(()=>e.requirementsByRegulatoryBody),f=J(()=>e.requirementsByCategory),p=J(()=>e.loading),h=J(()=>{let A=l.value;if(s.value.regulatory_body&&(A=A.filter(M=>M.regulatory_body===s.value.regulatory_body)),s.value.compliance_category&&(A=A.filter(M=>M.compliance_category===s.value.compliance_category)),s.value.is_active!==""){const M=s.value.is_active==="true";A=A.filter($=>$.is_active===M)}return A}),m=()=>le(this,null,function*(){yield e.fetchComplianceRequirements()}),g=()=>le(this,null,function*(){try{a.value=!0,yield e.createComplianceRequirement(o.value),n.value=!1,o.value={requirement_id:"",requirement_name:"",regulatory_body:"",compliance_category:"",description:"",frequency:"",responsible_person:"",responsible_department:"",is_active:!0}}catch(A){console.error("Error creating requirement:",A)}finally{a.value=!1}}),v=()=>le(this,null,function*(){try{yield e.createStandardRequirements()}catch(A){console.error("Error creating standard requirements:",A)}}),_=A=>le(this,null,function*(){try{i.value=yield e.getRequirementDetails(A.name),r.value=!0}catch(M){console.error("Error fetching requirement details:",M)}}),x=A=>{console.log("Edit requirement:",A)},w=()=>{s.value={regulatory_body:"",compliance_category:"",is_active:""}},k=A=>({KRA:"blue",NSSF:"green",NHIF:"purple",NEMA:"green","County Government":"orange"})[A]||"gray",S=A=>({Tax:"red","Social Security":"blue",Environmental:"green",Licensing:"purple","Health & Safety":"orange"})[A]||"gray",C=A=>A.due_date_calculation==="Fixed Date"?`Due day: ${A.fixed_due_day}`:A.due_date_calculation==="X Days After Period End"?`${A.due_days_after_period} days after period`:A.due_date_calculation;return bt(()=>le(this,null,function*(){yield m()})),(A,M)=>(T(),P("div",C2t,[u("div",A2t,[M[8]||(M[8]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Compliance Requirements"),u("p",{class:"text-gray-600"},"Manage regulatory compliance requirements and obligations.")],-1)),u("div",T2t,[b(y(Z),{onClick:v,variant:"outline",class:"flex items-center gap-2"},{default:D(()=>[b(y(bn),{class:"w-4 h-4"}),M[6]||(M[6]=W(" Load Standards ",-1))]),_:1}),b(y(Z),{onClick:M[0]||(M[0]=$=>n.value=!0),class:"flex items-center gap-2"},{default:D(()=>[b(y(tt),{class:"w-4 h-4"}),M[7]||(M[7]=W(" Add Requirement ",-1))]),_:1})])]),b(d2t,{"total-requirements":l.value.length,"active-requirements-count":d.value.length,"regulatory-bodies-count":Object.keys(c.value).length,"categories-count":Object.keys(f.value).length},null,8,["total-requirements","active-requirements-count","regulatory-bodies-count","categories-count"]),b(m2t,{filters:s.value,onClearFilters:w},null,8,["filters"]),u("div",E2t,[u("div",M2t,[u("div",$2t,[M[9]||(M[9]=u("h2",{class:"text-lg font-semibold"},"Compliance Requirements",-1)),u("div",D2t,[b(y(Z),{onClick:m,loading:p.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"])])])]),u("div",R2t,[u("table",P2t,[M[10]||(M[10]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Requirement ID"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Name"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Regulatory Body"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Frequency"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Responsible"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",I2t,[(T(!0),P(_e,null,we(h.value,$=>(T(),P("tr",{key:$.name,class:"hover:bg-gray-50"},[u("td",O2t,[u("div",L2t,E($.requirement_id),1),u("div",V2t,E($.name),1)]),u("td",N2t,[u("div",j2t,E($.requirement_name),1),u("div",F2t,E($.description),1)]),u("td",B2t,[b(y(Ee),{variant:k($.regulatory_body)},{default:D(()=>[W(E($.regulatory_body),1)]),_:2},1032,["variant"])]),u("td",z2t,[b(y(Ee),{variant:S($.compliance_category)},{default:D(()=>[W(E($.compliance_category),1)]),_:2},1032,["variant"])]),u("td",U2t,[u("div",null,E($.frequency),1),$.due_date_calculation?(T(),P("div",H2t,E(C($)),1)):ie("",!0)]),u("td",q2t,[$.responsible_person?(T(),P("div",W2t,E($.responsible_person),1)):ie("",!0),$.responsible_department?(T(),P("div",G2t,E($.responsible_department),1)):ie("",!0)]),u("td",Y2t,[b(y(Ee),{variant:$.is_active?"green":"gray"},{default:D(()=>[W(E($.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),u("td",K2t,[u("div",X2t,[b(y(Z),{onClick:R=>_($),variant:"outline",size:"sm"},{default:D(()=>[b(y(ar),{class:"w-4 h-4"})]),_:1},8,["onClick"]),b(y(Z),{onClick:R=>x($),variant:"outline",size:"sm"},{default:D(()=>[b(y(vn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])])]))),128))])])]),h.value.length===0&&!p.value?(T(),P("div",Z2t,[b(y(vt),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),M[13]||(M[13]=u("p",null,"No compliance requirements found.",-1)),u("div",Q2t,[b(y(Z),{onClick:v},{default:D(()=>[...M[11]||(M[11]=[W("Load Standard Requirements",-1)])]),_:1}),b(y(Z),{onClick:M[1]||(M[1]=$=>n.value=!0),variant:"outline"},{default:D(()=>[...M[12]||(M[12]=[W("Add Custom Requirement",-1)])]),_:1})])])):ie("",!0)]),b(y(zt),{modelValue:n.value,"onUpdate:modelValue":M[4]||(M[4]=$=>n.value=$),options:{title:"Add Compliance Requirement",size:"2xl"}},{"body-content":D(()=>[b(S2t,{"form-data":o.value,"onUpdate:formData":M[2]||(M[2]=$=>o.value=$)},null,8,["form-data"])]),actions:D(()=>[b(y(Z),{variant:"outline",onClick:M[3]||(M[3]=$=>n.value=!1)},{default:D(()=>[...M[14]||(M[14]=[W("Cancel",-1)])]),_:1}),b(y(Z),{onClick:g,loading:a.value},{default:D(()=>[...M[15]||(M[15]=[W("Create Requirement",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:r.value,"onUpdate:modelValue":M[5]||(M[5]=$=>r.value=$),options:{title:"Requirement Details",size:"4xl"}},{"body-content":D(()=>[i.value?(T(),P("div",J2t,[u("div",ekt,[u("div",null,[M[22]||(M[22]=u("h3",{class:"font-semibold"},"Basic Information",-1)),u("div",tkt,[u("p",null,[M[16]||(M[16]=u("span",{class:"font-medium"},"ID:",-1)),W(" "+E(i.value.requirement_id),1)]),u("p",null,[M[17]||(M[17]=u("span",{class:"font-medium"},"Name:",-1)),W(" "+E(i.value.requirement_name),1)]),u("p",null,[M[18]||(M[18]=u("span",{class:"font-medium"},"Regulatory Body:",-1)),W(" "+E(i.value.regulatory_body),1)]),u("p",null,[M[19]||(M[19]=u("span",{class:"font-medium"},"Category:",-1)),W(" "+E(i.value.compliance_category),1)]),u("p",null,[M[20]||(M[20]=u("span",{class:"font-medium"},"Frequency:",-1)),W(" "+E(i.value.frequency),1)]),u("p",null,[M[21]||(M[21]=u("span",{class:"font-medium"},"Status:",-1)),b(y(Ee),{variant:i.value.is_active?"green":"gray",class:"ml-2"},{default:D(()=>[W(E(i.value.is_active?"Active":"Inactive"),1)]),_:1},8,["variant"])])])]),u("div",null,[M[28]||(M[28]=u("h3",{class:"font-semibold"},"Responsibility",-1)),u("div",nkt,[i.value.responsible_person?(T(),P("p",rkt,[M[23]||(M[23]=u("span",{class:"font-medium"},"Person:",-1)),W(" "+E(i.value.responsible_person),1)])):ie("",!0),i.value.responsible_department?(T(),P("p",ikt,[M[24]||(M[24]=u("span",{class:"font-medium"},"Department:",-1)),W(" "+E(i.value.responsible_department),1)])):ie("",!0),u("p",null,[M[25]||(M[25]=u("span",{class:"font-medium"},"Due Date Calculation:",-1)),W(" "+E(i.value.due_date_calculation),1)]),i.value.fixed_due_day?(T(),P("p",akt,[M[26]||(M[26]=u("span",{class:"font-medium"},"Fixed Due Day:",-1)),W(" "+E(i.value.fixed_due_day),1)])):ie("",!0),i.value.due_days_after_period?(T(),P("p",skt,[M[27]||(M[27]=u("span",{class:"font-medium"},"Days After Period:",-1)),W(" "+E(i.value.due_days_after_period),1)])):ie("",!0)])])]),u("div",null,[M[29]||(M[29]=u("h3",{class:"font-semibold"},"Description",-1)),u("p",okt,E(i.value.description),1)]),i.value.applicability?(T(),P("div",lkt,[M[30]||(M[30]=u("h3",{class:"font-semibold"},"Applicability",-1)),u("p",ukt,E(i.value.applicability),1)])):ie("",!0),i.value.requirement_details&&i.value.requirement_details.length>0?(T(),P("div",dkt,[M[31]||(M[31]=u("h3",{class:"font-semibold"},"Requirement Details",-1)),u("div",ckt,[(T(!0),P(_e,null,we(i.value.requirement_details,$=>(T(),P("div",{key:$.name,class:"p-3 border rounded"},[u("p",fkt,E($.detail_type),1),u("p",pkt,E($.description),1),b(y(Ee),{variant:$.mandatory?"red":"gray",class:"mt-1"},{default:D(()=>[W(E($.mandatory?"Mandatory":"Optional"),1)]),_:2},1032,["variant"])]))),128))])])):ie("",!0),i.value.penalties_for_non_compliance&&i.value.penalties_for_non_compliance.length>0?(T(),P("div",hkt,[M[32]||(M[32]=u("h3",{class:"font-semibold text-red-600"},"Penalties for Non-Compliance",-1)),u("div",mkt,[(T(!0),P(_e,null,we(i.value.penalties_for_non_compliance,$=>(T(),P("div",{key:$.name,class:"p-3 bg-red-50 border border-red-200 rounded"},[u("p",gkt,E($.penalty_type),1),u("p",vkt,E($.description),1),$.penalty_amount_range?(T(),P("p",ykt," Amount Range: "+E($.penalty_amount_range),1)):ie("",!0)]))),128))])])):ie("",!0),i.value.bc_data_sources&&i.value.bc_data_sources.length>0?(T(),P("div",bkt,[M[33]||(M[33]=u("h3",{class:"font-semibold"},"BC Data Sources",-1)),u("div",_kt,[(T(!0),P(_e,null,we(i.value.bc_data_sources,$=>(T(),P("div",{key:$.name,class:"p-3 border rounded"},[u("p",xkt,E($.data_source_name),1),u("p",wkt,E($.description),1)]))),128))])])):ie("",!0)])):ie("",!0)]),_:1},8,["modelValue"])]))}},Skt={class:"w-full"},Ckt={class:"flex items-center justify-between border-b border-gray-200 bg-gray-50 px-4 py-3"},Akt={class:"flex items-center space-x-4"},Tkt={class:"text-lg font-medium text-gray-900"},Ekt={class:"flex items-center space-x-2"},Mkt={class:"relative"},$kt={key:2,class:"flex items-center space-x-2"},Dkt={class:"text-sm text-gray-600"},Rkt={class:"overflow-x-auto"},Pkt={class:"min-w-full divide-y divide-gray-200"},Ikt={class:"bg-gray-50"},Okt={key:0,class:"w-12 px-6 py-3"},Lkt=["onClick"],Vkt={class:"flex items-center space-x-1"},Nkt={key:0,class:"flex flex-col"},jkt={key:1,class:"w-32 px-6 py-3 text-right"},Fkt={class:"divide-y divide-gray-200 bg-white"},Bkt={key:0,class:"px-6 py-4"},zkt={key:1,class:"px-6 py-4 text-right"},Ukt={key:0},Hkt=["colspan"],qkt={class:"flex flex-col items-center space-y-2"},Wkt={key:0,class:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3"},Gkt={class:"flex items-center space-x-2"},Ykt={class:"text-sm text-gray-700"},Kkt={class:"flex items-center space-x-2"},Xkt={class:"flex items-center space-x-1"},Zkt={class:"space-y-4"},Qkt={class:"block text-sm font-medium text-gray-700"},Jkt={class:"flex justify-between"},eSt={class:"space-x-2"},JO={__name:"DataTable",props:{title:{type:String,default:"Data Table"},columns:{type:Array,required:!0},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},exportable:{type:Boolean,default:!0},showFilters:{type:Boolean,default:!0},showPagination:{type:Boolean,default:!0},pageSize:{type:Number,default:10},emptyMessage:{type:String,default:"No data available"},rowActions:{type:Array,default:()=>[]},bulkActions:{type:Array,default:()=>[]},availableFilters:{type:Array,default:()=>[]}},emits:["sort","filter","export","row-action","bulk-action","selection-change"],setup(t,{emit:e}){const n=t,r=e,i=Q(""),a=Q(""),s=Q("asc"),o=Q(1),l=Q(n.pageSize),d=Q([]),c=Q(!1),f=Q({}),p=J(()=>n.columns.filter(U=>!U.hidden)),h=J(()=>{let U=p.value.length;return n.selectable&&U++,n.rowActions.length>0&&U++,U}),m=J(()=>{let U=[...n.data];return i.value&&(U=U.filter(G=>Object.values(G).some(X=>String(X).toLowerCase().includes(i.value.toLowerCase())))),Object.entries(f.value).forEach(([G,X])=>{X.value&&(U=U.filter(re=>{const ee=A(re,{key:G});return L(ee,X)}))}),a.value&&U.sort((G,X)=>{const re=A(G,{key:a.value}),ee=A(X,{key:a.value});return s.value==="asc"?re>ee?1:-1:re<ee?1:-1}),U}),g=J(()=>{if(!n.showPagination)return m.value;const U=(o.value-1)*l.value,G=U+l.value;return m.value.slice(U,G)}),v=J(()=>m.value.length),_=J(()=>Math.ceil(v.value/l.value)),x=J(()=>{const U=[];let X=Math.max(1,o.value-Math.floor(2.5));const re=Math.min(_.value,X+5-1);re-X+1<5&&(X=Math.max(1,re-5+1));for(let ee=X;ee<=re;ee++)U.push(ee);return U}),w=J(()=>{const U=(o.value-1)*l.value+1,G=Math.min(o.value*l.value,v.value);return`${U}-${G} of ${v.value}`}),k=J(()=>d.value.length===g.value.length&&g.value.length>0),S=[{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100}],C=[{label:"Equals",value:"eq"},{label:"Contains",value:"contains"},{label:"Starts with",value:"startswith"},{label:"Ends with",value:"endswith"},{label:"Greater than",value:"gt"},{label:"Less than",value:"lt"}],A=(U,G)=>typeof G.key=="function"?G.key(U):U[G.key],M=(U,G)=>G.formatter?G.formatter(U):U==null?"-":G.type==="date"&&U?new Date(U).toLocaleDateString():G.type==="currency"&&U?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(U):String(U),$=()=>{o.value=1,r("filter",{search:i.value,filters:f.value})},R=U=>{a.value===U?s.value=s.value==="asc"?"desc":"asc":(a.value=U,s.value="asc"),r("sort",{field:a.value,order:s.value})},I=()=>{r("export",{data:m.value,columns:p.value,filename:`${n.title.toLowerCase().replace(/\s+/g,"_")}_export`})},B=U=>{const G=d.value.indexOf(U);G>-1?d.value.splice(G,1):d.value.push(U),r("selection-change",d.value)},j=U=>{U?d.value=g.value.map(G=>G.name||G.id):d.value=[],r("selection-change",d.value)},z=U=>n.rowActions.map(G=>je(me({},G),{onClick:()=>r("row-action",{action:G.key,row:U})})),F=U=>{r("bulk-action",{action:U.key,rows:d.value})},q=U=>{o.value=U},N=()=>{c.value=!1,o.value=1,r("filter",{search:i.value,filters:f.value})},O=U=>{delete f.value[U]},V=()=>{f.value={},i.value="",o.value=1,r("filter",{search:"",filters:{}})},L=(U,G)=>{const{operator:X,filterValue:re}=G;switch(X){case"eq":return U==re;case"contains":return String(U).toLowerCase().includes(String(re).toLowerCase());case"startswith":return String(U).toLowerCase().startsWith(String(re).toLowerCase());case"endswith":return String(U).toLowerCase().endsWith(String(re).toLowerCase());case"gt":return Number(U)>Number(re);case"lt":return Number(U)<Number(re);default:return!0}};return Je(()=>n.pageSize,U=>{l.value=U,o.value=1}),Je(()=>n.data,()=>{o.value=1,d.value=[]}),(U,G)=>(T(),P("div",Skt,[u("div",Ckt,[u("div",Akt,[u("h3",Tkt,E(t.title),1),v.value?(T(),he(y(Ee),{key:0,variant:"secondary"},{default:D(()=>[W(E(v.value)+" "+E(v.value===1?"record":"records"),1)]),_:1})):ie("",!0)]),u("div",Ekt,[u("div",Mkt,[b(y(Rn),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),b(y(En),{modelValue:i.value,"onUpdate:modelValue":G[0]||(G[0]=X=>i.value=X),placeholder:"Search...",class:"w-64 pl-10",onInput:$},null,8,["modelValue"])]),t.showFilters?(T(),he(y(Z),{key:0,variant:"outline",onClick:G[1]||(G[1]=X=>c.value=!0)},{default:D(()=>[b(y(mY),{class:"h-4 w-4"}),G[7]||(G[7]=W(" Filters ",-1))]),_:1})):ie("",!0),t.exportable?(T(),he(y(Z),{key:1,variant:"outline",onClick:I},{default:D(()=>[b(y(bn),{class:"h-4 w-4"}),G[8]||(G[8]=W(" Export ",-1))]),_:1})):ie("",!0),d.value.length>0?(T(),P("div",$kt,[u("span",Dkt,E(d.value.length)+" selected ",1),(T(!0),P(_e,null,we(t.bulkActions,X=>(T(),he(y(Z),{key:X.key,variant:"outline",size:"sm",onClick:re=>F(X)},{default:D(()=>[W(E(X.label),1)]),_:2},1032,["onClick"]))),128))])):ie("",!0)])]),u("div",Rkt,[u("table",Pkt,[u("thead",Ikt,[u("tr",null,[t.selectable?(T(),P("th",Okt,[b(y(Ut),{"model-value":k.value,"onUpdate:modelValue":j},null,8,["model-value"])])):ie("",!0),(T(!0),P(_e,null,we(p.value,X=>(T(),P("th",{key:X.key,class:fe(["px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",{"cursor-pointer hover:bg-gray-100":X.sortable}]),onClick:re=>X.sortable&&R(X.key)},[u("div",Vkt,[u("span",null,E(X.label),1),X.sortable?(T(),P("div",Nkt,[b(y(cY),{class:fe(["h-3 w-3",{"text-blue-600":a.value===X.key&&s.value==="asc"}])},null,8,["class"]),b(y(mo),{class:fe(["h-3 w-3 -mt-1",{"text-blue-600":a.value===X.key&&s.value==="desc"}])},null,8,["class"])])):ie("",!0)])],10,Lkt))),128)),t.rowActions.length>0?(T(),P("th",jkt," Actions ")):ie("",!0)])]),u("tbody",Fkt,[(T(!0),P(_e,null,we(g.value,X=>(T(),P("tr",{key:X.name||X.id,class:fe(["hover:bg-gray-50",{"bg-blue-50":d.value.includes(X.name||X.id)}])},[t.selectable?(T(),P("td",Bkt,[b(y(Ut),{"model-value":d.value.includes(X.name||X.id),"onUpdate:modelValue":re=>B(X.name||X.id)},null,8,["model-value","onUpdate:modelValue"])])):ie("",!0),(T(!0),P(_e,null,we(p.value,re=>(T(),P("td",{key:re.key,class:"px-6 py-4 text-sm text-gray-900"},[Ye(U.$slots,`column-${re.key}`,{row:X,value:A(X,re)},()=>[W(E(M(A(X,re),re)),1)])]))),128)),t.rowActions.length>0?(T(),P("td",zkt,[b(y(f2),{options:z(X)},{default:D(()=>[b(y(Z),{variant:"ghost",size:"sm"},{default:D(()=>[b(y(O0),{class:"h-4 w-4"})]),_:1})]),_:1},8,["options"])])):ie("",!0)],2))),128)),g.value.length===0?(T(),P("tr",Ukt,[u("td",{colspan:h.value,class:"px-6 py-12 text-center text-gray-500"},[u("div",qkt,[b(y(ri),{class:"h-8 w-8 text-gray-400"}),u("p",null,E(t.emptyMessage),1)])],8,Hkt)])):ie("",!0)])])]),t.showPagination?(T(),P("div",Wkt,[u("div",Gkt,[G[9]||(G[9]=u("span",{class:"text-sm text-gray-700"},"Rows per page:",-1)),b(y(Ke),{modelValue:l.value,"onUpdate:modelValue":G[2]||(G[2]=X=>l.value=X),options:S,class:"w-20"},null,8,["modelValue"])]),u("div",Ykt,E(w.value),1),u("div",Kkt,[b(y(Z),{variant:"outline",size:"sm",disabled:o.value===1,onClick:G[3]||(G[3]=X=>q(o.value-1))},{default:D(()=>[b(y(pr),{class:"h-4 w-4"}),G[10]||(G[10]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",Xkt,[(T(!0),P(_e,null,we(x.value,X=>(T(),he(y(Z),{key:X,variant:"outline",size:"sm",class:fe({"bg-blue-600 text-white":X===o.value}),onClick:re=>q(X)},{default:D(()=>[W(E(X),1)]),_:2},1032,["class","onClick"]))),128))]),b(y(Z),{variant:"outline",size:"sm",disabled:o.value===_.value,onClick:G[4]||(G[4]=X=>q(o.value+1))},{default:D(()=>[G[11]||(G[11]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):ie("",!0),b(y(zt),{modelValue:c.value,"onUpdate:modelValue":G[6]||(G[6]=X=>c.value=X),title:"Filter Data",options:{size:"lg"}},{body:D(()=>[u("div",Zkt,[(T(!0),P(_e,null,we(t.availableFilters,X=>(T(),P("div",{key:X.key,class:"grid grid-cols-3 gap-4 items-end"},[u("div",null,[u("label",Qkt,E(X.label),1),b(y(Ke),{modelValue:f.value[X.key].operator,"onUpdate:modelValue":re=>f.value[X.key].operator=re,options:C,placeholder:"Operator"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[b(y(En),{modelValue:f.value[X.key].value,"onUpdate:modelValue":re=>f.value[X.key].value=re,placeholder:X.placeholder||"Value",type:X.type||"text"},null,8,["modelValue","onUpdate:modelValue","placeholder","type"])]),u("div",null,[b(y(Z),{variant:"outline",size:"sm",onClick:re=>O(X.key)},{default:D(()=>[b(y(ht),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]))),128)),u("div",Jkt,[b(y(Z),{variant:"outline",onClick:V},{default:D(()=>[...G[12]||(G[12]=[W(" Clear All ",-1)])]),_:1}),u("div",eSt,[b(y(Z),{variant:"outline",onClick:G[5]||(G[5]=X=>c.value=!1)},{default:D(()=>[...G[13]||(G[13]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{onClick:N},{default:D(()=>[...G[14]||(G[14]=[W(" Apply Filters ",-1)])]),_:1})])])])]),_:1},8,["modelValue"])]))}},tSt={class:"w-full"},nSt=["multiple","accept"],rSt={class:"text-center"},iSt={class:"flex justify-center mb-4"},aSt={class:"space-y-2"},sSt={class:"text-lg font-medium text-gray-900"},oSt={class:"text-sm text-gray-500"},lSt={key:0,class:"text-xs text-gray-400"},uSt={key:1,class:"text-xs text-gray-400"},dSt={key:0,class:"mt-4 space-y-2"},cSt={class:"flex items-center space-x-3"},fSt={class:"flex-shrink-0"},pSt={class:"min-w-0 flex-1"},hSt={class:"text-sm font-medium text-gray-900 truncate"},mSt={class:"text-xs text-gray-500"},gSt={class:"flex items-center space-x-2"},vSt={key:0,class:"flex-1 max-w-24"},ySt={class:"w-full bg-gray-200 rounded-full h-2"},bSt={class:"flex-shrink-0"},_St={key:1,class:"mt-4 flex justify-end space-x-2"},xSt={__name:"FileUploader",props:{multiple:{type:Boolean,default:!1},accept:{type:String,default:""},maxSize:{type:Number,default:0},maxFiles:{type:Number,default:0},disabled:{type:Boolean,default:!1},uploadButtonText:{type:String,default:"Upload Files"},autoUpload:{type:Boolean,default:!1}},emits:["files-selected","file-removed","upload-start","upload-progress","upload-complete","upload-error"],setup(t,{emit:e}){const n=t,r=e,i=Q(!1),a=Q([]),s=Q(!1),o=J(()=>a.value.length>0&&a.value.every(_=>_.status!=="uploading")&&!n.disabled),l=_=>{const x=Array.from(_.target.files);c(x)},d=_=>{i.value=!1;const x=Array.from(_.dataTransfer.files);c(x)},c=_=>{const x=[];for(const w of _){const k=f(w);k.valid?x.push({file:w,name:w.name,size:w.size,type:w.type,status:"pending",progress:0,error:null}):r("upload-error",{file:w,error:k.error})}if(n.maxFiles>0&&a.value.length+x.length>n.maxFiles){r("upload-error",{error:`Maximum ${n.maxFiles} files allowed`});return}n.multiple?a.value.push(...x):a.value=x.slice(0,1),r("files-selected",a.value),n.autoUpload&&x.length>0&&m()},f=_=>{if(n.maxSize>0&&_.size>n.maxSize)return{valid:!1,error:`File size exceeds maximum limit of ${v(n.maxSize)}`};if(n.accept){const x=n.accept.split(",").map(C=>C.trim()),w=_.type.toLowerCase(),k=_.name.toLowerCase();if(!x.some(C=>C.startsWith(".")?k.endsWith(C):w.includes(C.replace("*",""))))return{valid:!1,error:`File type not accepted. Accepted types: ${n.accept}`}}return{valid:!0}},p=_=>{const x=a.value.splice(_,1)[0];r("file-removed",x)},h=()=>{a.value=[],r("files-selected",[])},m=()=>le(this,null,function*(){if(o.value){s.value=!0,r("upload-start",a.value);try{for(const _ of a.value)if(_.status!=="completed"){_.status="uploading",_.progress=0;try{yield g(_),_.status="completed",_.progress=100,r("upload-progress",{file:_,progress:100})}catch(x){_.status="error",_.error=x.message,r("upload-error",{file:_,error:x.message})}}r("upload-complete",a.value)}catch(_){r("upload-error",{error:_.message})}finally{s.value=!1}}}),g=_=>le(this,null,function*(){return new Promise((x,w)=>{let k=0;const S=setInterval(()=>{k+=Math.random()*20,k>=100&&(k=100,clearInterval(S),x()),_.progress=Math.round(k),r("upload-progress",{file:_,progress:_.progress})},200)})}),v=_=>{if(_===0)return"0 Bytes";const x=1024,w=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(_)/Math.log(x));return Number.parseFloat((_/Math.pow(x,k)).toFixed(2))+" "+w[k]};return(_,x)=>(T(),P("div",tSt,[u("div",{class:fe(["relative border-2 border-dashed rounded-lg p-6 transition-colors",i.value?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400",t.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"]),onDragover:x[0]||(x[0]=dt(w=>i.value=!0,["prevent"])),onDragleave:x[1]||(x[1]=dt(w=>i.value=!1,["prevent"])),onDrop:dt(d,["prevent"]),onClick:x[2]||(x[2]=w=>t.disabled?null:_.$refs.fileInput.click())},[u("input",{ref:"fileInput",type:"file",multiple:t.multiple,accept:t.accept,class:"hidden",onChange:l},null,40,nSt),u("div",rSt,[u("div",iSt,[u("div",{class:fe(["rounded-full p-3",i.value?"bg-blue-100":"bg-gray-100"])},[b(y(ps),{class:fe(["h-8 w-8",i.value?"text-blue-600":"text-gray-400"])},null,8,["class"])],2)]),u("div",aSt,[u("p",sSt,E(i.value?"Drop files here":"Upload files"),1),u("p",oSt,E(t.multiple?"Select multiple files":"Select a file")+" or drag and drop ",1),t.accept?(T(),P("p",lSt," Accepted formats: "+E(t.accept),1)):ie("",!0),t.maxSize?(T(),P("p",uSt," Maximum file size: "+E(v(t.maxSize)),1)):ie("",!0)])])],34),a.value.length>0?(T(),P("div",dSt,[x[3]||(x[3]=u("h4",{class:"text-sm font-medium text-gray-700"},"Selected Files",-1)),(T(!0),P(_e,null,we(a.value,(w,k)=>(T(),P("div",{key:k,class:"flex items-center justify-between rounded-lg border border-gray-200 bg-white p-3"},[u("div",cSt,[u("div",fSt,[b(y(Xce),{class:"h-8 w-8 text-gray-400"})]),u("div",pSt,[u("p",hSt,E(w.name),1),u("p",mSt,E(v(w.size)),1)])]),u("div",gSt,[w.status==="uploading"?(T(),P("div",vSt,[u("div",ySt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${w.progress||0}%`})},null,4)])])):ie("",!0),u("div",bSt,[w.status==="completed"?(T(),he(y(Gt),{key:0,class:"h-5 w-5 text-green-500"})):ie("",!0),w.status==="error"?(T(),he(y(Fc),{key:1,class:"h-5 w-5 text-red-500"})):ie("",!0),w.status==="uploading"?(T(),he(y(bY),{key:2,class:"h-5 w-5 text-blue-500 animate-spin"})):ie("",!0)]),b(y(Z),{variant:"ghost",size:"sm",onClick:S=>p(k),disabled:w.status==="uploading"},{default:D(()=>[b(y(ht),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])])]))),128))])):ie("",!0),a.value.length>0?(T(),P("div",_St,[b(y(Z),{variant:"outline",onClick:h},{default:D(()=>[...x[4]||(x[4]=[W(" Clear All ",-1)])]),_:1}),b(y(Z),{onClick:m,disabled:!o.value,loading:s.value},{default:D(()=>[W(E(t.uploadButtonText),1)]),_:1},8,["disabled","loading"])])):ie("",!0)]))}},wSt={class:"inline-child-table w-full"},kSt={class:"flex items-center justify-between mb-4"},SSt={class:"text-lg font-medium text-gray-900"},CSt={class:"flex items-center space-x-2"},ASt={class:"text-sm text-gray-500"},TSt={class:"overflow-x-auto border border-gray-200 rounded-lg"},ESt={class:"min-w-full divide-y divide-gray-200"},MSt={class:"bg-gray-50"},$St={class:"flex items-center"},DSt={key:0,class:"text-red-500 ml-1"},RSt={class:"bg-white divide-y divide-gray-200"},PSt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-center align-middle"},ISt={key:1,class:"relative"},OSt={key:0,class:"text-xs text-gray-500 mt-1"},LSt={key:1,class:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"},VSt=["onMousedown"],NSt={class:"font-normal ml-3 block truncate"},jSt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-center align-middle"},FSt={class:"flex items-center justify-center"},BSt={key:0,class:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg mt-4"},zSt={class:"text-sm"},USt={class:"mt-4 flex items-center justify-between"},HSt={class:"flex items-center space-x-2"},qSt={class:"flex items-center space-x-2"},WSt={key:1,class:"mt-4"},GSt={class:"bg-red-50 border border-red-200 rounded-md p-4"},YSt={class:"flex"},KSt={class:"ml-3"},XSt={class:"mt-2 text-sm text-red-700"},ZSt={class:"list-disc pl-5 space-y-1"},QSt={__name:"InlineChildTable",props:{modelValue:{type:Array,default:()=>[]},title:{type:String,default:"Items"},modalTitle:{type:String,default:"Item"},doctype:{type:String,default:null},columns:{type:Array,default:()=>[]},validate:{type:Function,default:null},required:{type:Boolean,default:!1},minRows:{type:Number,default:0},maxRows:{type:Number,default:null},autoAddRow:{type:Boolean,default:!1},allowBulkAdd:{type:Boolean,default:!1},allowExport:{type:Boolean,default:!1},allowImport:{type:Boolean,default:!1}},emits:["update:modelValue","add-row","remove-row","validate"],setup(t,{emit:e}){const n=t,r=e,i=Q([]),a=Q(null),s=Q([]),o=J({get:()=>n.modelValue||[],set:F=>{r("update:modelValue",F),A(F)}}),l=Q(null),d=J(()=>n.columns&&n.columns.length>0?n.columns:l.value&&l.value.fields?m(l.value):[]);function c(F){switch(F){case"text":case"data":case"small_text":case"long_text":return En;case"int":case"float":case"currency":return En;case"date":case"datetime":return En;case"select":return Ke;case"check":return Ut;case"link":return null;default:return En}}function f(F){var O,V;const q={},N=F.fieldType.toLowerCase();return["int","float","currency"].includes(N)?(q.type="number",F.min!==void 0&&(q.min=F.min),F.step!==void 0&&(q.step=F.step),(N==="float"||N==="currency")&&(q.step=q.step||"0.01")):N==="date"?q.type="date":N==="datetime"?q.type="datetime-local":N==="data"&&F.options==="Email"?q.type="email":N==="data"&&((O=F.key)!=null&&O.toLowerCase().includes("phone")||(V=F.label)!=null&&V.toLowerCase().includes("phone"))&&(q.type="tel"),N==="select"&&F.options&&(q.options=F.options),q.placeholder=F.placeholder||F.label,q.size="sm",q.class="w-full",q}function p(F){switch(F.toLowerCase()){case"int":case"float":case"currency":return"text-right";case"check":return"text-center";case"date":case"datetime":case"select":case"link":case"text":case"data":case"small_text":case"long_text":case"email":default:return"text-left"}}function h(){return le(this,null,function*(){if(!(!n.doctype||typeof frappe=="undefined"))try{const F=yield frappe.call({method:"frappe.client.get",args:{doctype:"DocType",name:n.doctype}});F.message&&(l.value=F.message)}catch(F){console.error("Error fetching schema for doctype",n.doctype,F)}})}function m(F){return F.fields.filter(q=>{const N=q.in_list_view||["name","title"].includes(q.fieldname),O=q.read_only&&q.fieldname.endsWith("_name")&&F.fields.some(V=>V.fieldtype.toLowerCase()==="link"&&`${V.fieldname}_name`===q.fieldname);return N&&!O}).map(q=>{const N=q.fieldtype.toLowerCase(),O={key:q.fieldname,label:q.label,fieldType:N,required:!!q.reqd,width:g(q.fieldtype),placeholder:`Enter ${q.label}`,options:q.options};if(N==="select"&&q.options&&(O.options=q.options.split(`
`).map(V=>({value:V.trim(),label:V.trim()}))),N==="link"){O.doctype=q.options;const V=`${q.fieldname}_name`;F.fields.some(U=>U.fieldname===V)&&(O.displayFieldKey=V)}return N==="data"&&q.options==="Email"&&(O.fieldType="email"),O})}function g(F){switch(F.toLowerCase()){case"int":case"float":case"currency":return"120px";case"check":return"80px";case"date":case"datetime":return"130px";case"select":return"160px";case"link":return"180px";case"small_text":case"long_text":return"200px";case"email":return"200px";case"data":case"text":default:return"160px"}}function v(F){switch(F.toLowerCase()){case"int":case"float":case"currency":return 0;case"check":return!1;case"date":case"datetime":return"";case"select":return"";case"link":return"";case"email":case"data":case"text":case"small_text":case"long_text":default:return""}}function _(){if(n.maxRows!=null&&o.value.length>=n.maxRows)return;const F={};d.value.forEach(q=>{q&&q.key&&(F[q.key]=q.default!==void 0?q.default:v(q.fieldType),typeof q.compute=="function"&&(F[q.key]=q.compute(F)))}),o.value=[...o.value,F],r("add-row",F),ir(()=>{if(d.value.length>0){const q=`input-${o.value.length-1}-${d.value[0].key}`,N=w[q];N&&N.focus&&N.focus()}})}function x(F){if(o.value.length<=n.minRows)return;const q=o.value[F];o.value=o.value.filter((N,O)=>O!==F),r("remove-row",q)}const w={};function k(F,q){const N=`input-${F}-${q}`;return w[N]=null,N}function S(F,q){return F.displayFieldKey&&q[F.displayFieldKey]?q[F.displayFieldKey]:q[F.key]||""}function C(F,q,N){F.displayFieldKey?q[F.displayFieldKey]=N:q[F.key]=N}Je(o,F=>{F.forEach(q=>{d.value.forEach(N=>{N&&typeof N.compute=="function"&&(q[N.key]=N.compute(q))})}),A(F)},{deep:!0});function A(F){s.value=[],F.forEach((q,N)=>{if(d.value.forEach(O=>{if(!(!O||!O.key)&&(O.required&&(q[O.key]===""||q[O.key]==null)&&s.value.push(`Row ${N+1} - ${O.label}: Required`),typeof O.validator=="function")){const V=O.validator(q[O.key],q,F);V&&s.value.push(`Row ${N+1} - ${O.label}: ${V}`)}}),n.validate){const O=n.validate(q,F,N);O&&Object.entries(O).forEach(([V,L])=>{const U=d.value.find(X=>X&&X.key===V),G=U?U.label:V;s.value.push(`Row ${N+1} - ${G}: ${L}`)})}}),r("validate",s.value.length===0)}function M(F,q,N){return le(this,null,function*(){const O=N.target.value;if(!(!F.doctype||typeof frappe=="undefined")){if(O.length<2){i.value=[];return}try{const V=yield frappe.call({method:"frappe.client.get_list",args:{doctype:F.doctype,filters:{name:["like",`%${O}%`]},fields:["name","title",...F.fetchMap&&Object.values(F.fetchMap)||[]],limit:10}});i.value=V.message.map(L=>({value:L.name,label:L.title||L.name,data:L}))}catch(V){console.error("Link suggestions error",V),i.value=[]}}})}function $(F,q,N){a.value=`${F.key}-${N}`}function R(){setTimeout(()=>{a.value=null,i.value=[]},200)}function I(F,q,N){if(q[F.key]=N.value,F.displayFieldKey&&(q[F.displayFieldKey]=N.label),F.fetchMap)for(const[O,V]of Object.entries(F.fetchMap))q[O]=N.data[V];i.value=[],a.value=null}function B(){console.log("bulk-add not implemented yet")}function j(){console.log("export not implemented yet")}function z(){console.log("import not implemented yet")}return n.autoAddRow&&o.value.length===0&&_(),Je(()=>n.doctype,()=>{n.doctype&&h()},{immediate:!0}),(F,q)=>(T(),P("div",wSt,[u("div",kSt,[u("h3",SSt,E(t.title),1),u("div",CSt,[t.required&&o.value.length===0?(T(),he(y(Ee),{key:0,theme:"red",variant:"subtle"},{default:D(()=>[...q[0]||(q[0]=[W(" Required ",-1)])]),_:1})):ie("",!0),u("span",ASt,E(o.value.length)+" "+E(t.title.toLowerCase()),1)])]),u("div",TSt,[u("table",ESt,[u("thead",MSt,[u("tr",null,[q[1]||(q[1]=u("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-16"}," # ",-1)),(T(!0),P(_e,null,we(d.value,N=>(T(),P("th",{key:N.key,class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:nt({minWidth:N.width||"140px",width:N.width||"auto"})},[u("div",$St,[u("span",null,E(N.label),1),N.required?(T(),P("span",DSt,"*")):ie("",!0)])],4))),128)),q[2]||(q[2]=u("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20"}," Actions ",-1))])]),u("tbody",RSt,[(T(!0),P(_e,null,we(o.value,(N,O)=>(T(),P("tr",{key:N._uid||N.name||O,class:"hover:bg-gray-50"},[u("td",PSt,E(O+1),1),(T(!0),P(_e,null,we(d.value,V=>(T(),P("td",{key:V.key,class:fe(["px-4 py-3 whitespace-nowrap align-middle",p(V.fieldType)])},[Ye(F.$slots,`cell-${V.key}`,{row:N,column:V},()=>[c(V.fieldType)?(T(),he(Lt(c(V.fieldType)),Ct({key:0,modelValue:N[V.key],"onUpdate:modelValue":L=>N[V.key]=L},{ref_for:!0},f(V),{ref_for:!0,ref:k(O,V.key)}),null,16,["modelValue","onUpdate:modelValue"])):ie("",!0),V.fieldType==="link"?(T(),P("div",ISt,[b(y(En),{"model-value":S(V,N),placeholder:V.placeholder||`Select ${V.label}`,size:"sm",class:"w-full","onUpdate:modelValue":L=>C(V,N,L),onInput:L=>M(V,N,L),onFocus:L=>$(V,N,O),onBlur:R},null,8,["model-value","placeholder","onUpdate:modelValue","onInput","onFocus"]),V.displayFieldKey&&N[V.displayFieldKey]&&N[V.displayFieldKey]!==N[V.key]?(T(),P("div",OSt,E(N[V.key])+": "+E(N[V.displayFieldKey]),1)):ie("",!0),i.value.length>0&&a.value===`${V.key}-${O}`?(T(),P("div",LSt,[(T(!0),P(_e,null,we(i.value,L=>(T(),P("div",{key:L.value,class:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-gray-100",onMousedown:dt(U=>I(V,N,L),["prevent"])},[u("span",NSt,E(L.label),1)],40,VSt))),128))])):ie("",!0)])):ie("",!0),!c(V.fieldType)&&V.fieldType!=="link"?(T(),he(y(En),{key:2,modelValue:N[V.key],"onUpdate:modelValue":L=>N[V.key]=L,placeholder:V.placeholder||V.label,size:"sm",class:"w-full",ref_for:!0,ref:k(O,V.key)},null,8,["modelValue","onUpdate:modelValue","placeholder"])):ie("",!0)],!0)],2))),128)),u("td",jSt,[u("div",FSt,[b(y(Z),{variant:"ghost",size:"sm",theme:"red",onClick:V=>x(O),disabled:o.value.length<=(t.minRows||0)},{default:D(()=>[b(y(ht),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])])])]))),128))])])]),o.value.length===0?(T(),P("div",BSt,[u("div",zSt,"No "+E(t.title.toLowerCase())+" added yet.",1),q[3]||(q[3]=u("div",{class:"text-xs mt-1"},'Click "Add Row" to get started.',-1))])):ie("",!0),u("div",USt,[u("div",HSt,[b(y(Z),{variant:"solid",size:"sm",theme:"blue",onClick:_},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),W(" Add "+E(t.modalTitle||"Row"),1)]),_:1}),t.allowBulkAdd?(T(),he(y(Z),{key:0,variant:"outline",size:"sm",onClick:B},{default:D(()=>[...q[4]||(q[4]=[W(" Add Multiple ",-1)])]),_:1})):ie("",!0)]),u("div",qSt,[t.allowExport?(T(),he(y(Z),{key:0,variant:"outline",size:"sm",onClick:j},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),q[5]||(q[5]=W(" Export ",-1))]),_:1})):ie("",!0),t.allowImport?(T(),he(y(Z),{key:1,variant:"outline",size:"sm",onClick:z},{default:D(()=>[b(y(ps),{class:"h-4 w-4 mr-2"}),q[6]||(q[6]=W(" Import ",-1))]),_:1})):ie("",!0)])]),s.value.length>0?(T(),P("div",WSt,[u("div",GSt,[u("div",YSt,[b(y(nn),{class:"h-5 w-5 text-red-400"}),u("div",KSt,[q[7]||(q[7]=u("h3",{class:"text-sm font-medium text-red-800"}," Validation Errors ",-1)),u("div",XSt,[u("ul",ZSt,[(T(!0),P(_e,null,we(s.value,N=>(T(),P("li",{key:N},E(N),1))),128))])])])])])])):ie("",!0)]))}},b0=Ft(QSt,[["__scopeId","data-v-cd9c7f31"]]),aoe=Ul("correctiveActions",{state:()=>({actions:[],selectedAction:null,loading:!1,saving:!1,error:null,searchQuery:"",filters:{status:"",priority:"",dueRange:"",responsiblePerson:""}}),getters:{filteredActions:t=>{let e=t.actions;if(t.searchQuery){const n=t.searchQuery.toLowerCase();e=e.filter(r=>{var i,a,s;return((i=r.plan_id)==null?void 0:i.toLowerCase().includes(n))||((a=r.title)==null?void 0:a.toLowerCase().includes(n))||((s=r.audit_finding)==null?void 0:s.toLowerCase().includes(n))})}if(t.filters.status&&(e=e.filter(n=>n.status===t.filters.status)),t.filters.priority&&(e=e.filter(n=>n.priority===t.filters.priority)),t.filters.dueRange){const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(r.getTime()+7*24*60*60*1e3),a=new Date(r.getTime()+30*24*60*60*1e3);e=e.filter(s=>{if(!s.target_completion_date)return!1;const o=new Date(s.target_completion_date);switch(t.filters.dueRange){case"overdue":return o<r&&s.status!=="Completed";case"today":return o.toDateString()===r.toDateString();case"this_week":return o>=r&&o<=i;case"this_month":return o>=r&&o<=a;case"later":return o>a;default:return!0}})}if(t.filters.responsiblePerson){const n=t.filters.responsiblePerson.toLowerCase();e=e.filter(r=>{var i;return(i=r.responsible_person)==null?void 0:i.toLowerCase().includes(n)})}return e},stats:t=>{const e=t.actions.length,n=t.actions.filter(d=>d.status==="In Progress").length,r=t.actions.filter(d=>d.status==="Completed").length,i=new Date,a=t.actions.filter(d=>!d.target_completion_date||d.status==="Completed"?!1:new Date(d.target_completion_date)<i).length,s=e>0?Math.round(t.actions.reduce((d,c)=>d+(c.completion_percentage||0),0)/e):0,o={Draft:t.actions.filter(d=>d.status==="Draft").length,Approved:t.actions.filter(d=>d.status==="Approved").length,"In Progress":n,"On Hold":t.actions.filter(d=>d.status==="On Hold").length,Completed:r,Cancelled:t.actions.filter(d=>d.status==="Cancelled").length},l={Critical:t.actions.filter(d=>d.priority==="Critical").length,High:t.actions.filter(d=>d.priority==="High").length,Medium:t.actions.filter(d=>d.priority==="Medium").length,Low:t.actions.filter(d=>d.priority==="Low").length};return{total:e,inProgress:n,completed:r,overdue:a,avgProgress:s,statusDistribution:o,priorityDistribution:l}}},actions:{fetchActions(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Corrective Action Plan",fields:["name","plan_id","audit_finding","title","status","priority","start_date","target_completion_date","actual_completion_date","responsible_person","responsible_department","overall_progress","completion_percentage","creation","modified"],limit_page_length:0,order_by:"modified desc"}}).fetch();this.actions=t||[]}catch(t){console.error("Error fetching corrective actions:",t),this.error=t.message||"Failed to fetch corrective actions",this.actions=[]}finally{this.loading=!1}})},getActionDetails(t){return le(this,null,function*(){try{this.loading=!0;const e=yield Ie({url:"frappe.client.get",params:{doctype:"Corrective Action Plan",name:t}}).fetch();return this.selectedAction=e,e}catch(e){throw console.error("Error fetching action details:",e),e}finally{this.loading=!1}})},createAction(t){return le(this,null,function*(){try{this.saving=!0;const e=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Corrective Action Plan"},t)}}).fetch();return yield this.fetchActions(),e}catch(e){throw console.error("Error creating action:",e),e}finally{this.saving=!1}})},updateAction(t,e){return le(this,null,function*(){try{this.saving=!0;const n=yield Ie({url:"frappe.client.set_value",params:{doctype:"Corrective Action Plan",name:t,fieldname:e}}).fetch();return yield this.fetchActions(),n}catch(n){throw console.error("Error updating action:",n),n}finally{this.saving=!1}})},saveAction(t){return le(this,null,function*(){return t.name?this.updateAction(t.name,t):this.createAction(t)})},deleteAction(t){return le(this,null,function*(){try{this.saving=!0,yield Ie({url:"frappe.client.delete",params:{doctype:"Corrective Action Plan",name:t}}).fetch(),yield this.fetchActions()}catch(e){throw console.error("Error deleting action:",e),e}finally{this.saving=!1}})},setFilters(t){this.filters=me(me({},this.filters),t)},clearFilters(){this.searchQuery="",this.filters={status:"",priority:"",dueRange:"",responsiblePerson:""}}}}),JSt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4 mb-6"},eCt={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200 p-5 hover:shadow-lg transition-all duration-200"},tCt={class:"flex items-center justify-between"},nCt={class:"text-3xl font-bold text-orange-900 mt-1"},rCt={class:"p-3 bg-orange-500 rounded-xl shadow-sm"},iCt={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-5 hover:shadow-lg transition-all duration-200"},aCt={class:"flex items-center justify-between"},sCt={class:"text-3xl font-bold text-blue-900 mt-1"},oCt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},lCt={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-5 hover:shadow-lg transition-all duration-200"},uCt={class:"flex items-center justify-between"},dCt={class:"text-3xl font-bold text-green-900 mt-1"},cCt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},fCt={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200 p-5 hover:shadow-lg transition-all duration-200"},pCt={class:"flex items-center justify-between"},hCt={class:"text-3xl font-bold text-red-900 mt-1"},mCt={class:"p-3 bg-red-500 rounded-xl shadow-sm"},gCt={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-5 hover:shadow-lg transition-all duration-200"},vCt={class:"flex items-center justify-between"},yCt={class:"w-full"},bCt={class:"text-3xl font-bold text-purple-900 mt-1"},_Ct={class:"w-full bg-purple-200 rounded-full h-2 mt-2"},xCt={class:"p-3 bg-purple-500 rounded-xl shadow-sm ml-3"},wCt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},kCt={class:"bg-white rounded-xl border border-gray-200 p-5"},SCt={class:"space-y-3"},CCt={class:"w-24 text-sm text-gray-600"},ACt={class:"flex-1 mx-3"},TCt={class:"w-full bg-gray-100 rounded-full h-3"},ECt={class:"w-12 text-sm font-medium text-gray-900 text-right"},MCt={class:"bg-white rounded-xl border border-gray-200 p-5"},$Ct={class:"grid grid-cols-2 gap-3"},DCt={class:"text-xs text-gray-500"},RCt={key:1,class:"bg-white rounded-xl border border-gray-200 p-5 mb-6"},PCt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ICt={class:"text-center p-4 bg-red-50 rounded-lg"},OCt={class:"text-2xl font-bold text-red-600"},LCt={class:"text-center p-4 bg-amber-50 rounded-lg"},VCt={class:"text-2xl font-bold text-amber-600"},NCt={class:"text-center p-4 bg-blue-50 rounded-lg"},jCt={class:"text-2xl font-bold text-blue-600"},FCt={class:"text-center p-4 bg-green-50 rounded-lg"},BCt={class:"text-2xl font-bold text-green-600"},zCt={__name:"ActionStats",props:{stats:{type:Object,default:()=>({total:0,inProgress:0,completed:0,overdue:0,avgProgress:0,dueThisWeek:0,dueThisMonth:0,dueLater:0,byStatus:{},byPriority:{}})},showDetails:{type:Boolean,default:!0}},setup(t){const e=t,n=J(()=>{const i=e.stats.byStatus||{},a=Object.values(i).reduce((o,l)=>o+l,0)||1,s={Draft:"bg-gray-400",Approved:"bg-blue-500","In Progress":"bg-amber-500","On Hold":"bg-purple-500",Completed:"bg-green-500",Cancelled:"bg-red-500"};return Object.entries(i).map(([o,l])=>({label:o,count:l,percentage:l/a*100,color:s[o]||"bg-gray-400"}))}),r=J(()=>{const i=e.stats.byPriority||{};return[{label:"Critical",count:i.Critical||0,color:"text-red-600"},{label:"High",count:i.High||0,color:"text-orange-600"},{label:"Medium",count:i.Medium||0,color:"text-amber-600"},{label:"Low",count:i.Low||0,color:"text-green-600"}]});return(i,a)=>(T(),P(_e,null,[u("div",JSt,[u("div",eCt,[u("div",tCt,[u("div",null,[a[0]||(a[0]=u("p",{class:"text-sm font-semibold text-orange-700 uppercase tracking-wide"},"Total Plans",-1)),u("p",nCt,E(t.stats.total||0),1),a[1]||(a[1]=u("p",{class:"text-xs text-orange-600 mt-1"},"All action plans",-1))]),u("div",rCt,[b(y(kr),{class:"h-7 w-7 text-white"})])])]),u("div",iCt,[u("div",aCt,[u("div",null,[a[2]||(a[2]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"In Progress",-1)),u("p",sCt,E(t.stats.inProgress||0),1),a[3]||(a[3]=u("p",{class:"text-xs text-blue-600 mt-1"},"Currently active",-1))]),u("div",oCt,[b(y(eb),{class:"h-7 w-7 text-white"})])])]),u("div",lCt,[u("div",uCt,[u("div",null,[a[4]||(a[4]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Completed",-1)),u("p",dCt,E(t.stats.completed||0),1),a[5]||(a[5]=u("p",{class:"text-xs text-green-600 mt-1"},"Successfully closed",-1))]),u("div",cCt,[b(y(Gt),{class:"h-7 w-7 text-white"})])])]),u("div",fCt,[u("div",pCt,[u("div",null,[a[6]||(a[6]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Overdue",-1)),u("p",hCt,E(t.stats.overdue||0),1),a[7]||(a[7]=u("p",{class:"text-xs text-red-600 mt-1"},"Past due date",-1))]),u("div",mCt,[b(y(zr),{class:"h-7 w-7 text-white"})])])]),u("div",gCt,[u("div",vCt,[u("div",yCt,[a[8]||(a[8]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Avg Progress",-1)),u("p",bCt,E(t.stats.avgProgress||0)+"%",1),u("div",_Ct,[u("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${Math.min(t.stats.avgProgress||0,100)}%`})},null,4)])]),u("div",xCt,[b(y(qS),{class:"h-7 w-7 text-white"})])])])]),t.showDetails?(T(),P("div",wCt,[u("div",kCt,[a[9]||(a[9]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Status Distribution",-1)),u("div",SCt,[(T(!0),P(_e,null,we(n.value,s=>(T(),P("div",{key:s.label,class:"flex items-center"},[u("div",CCt,E(s.label),1),u("div",ACt,[u("div",TCt,[u("div",{class:fe(["h-3 rounded-full transition-all duration-300",s.color]),style:nt({width:`${s.percentage}%`})},null,6)])]),u("div",ECt,E(s.count),1)]))),128))])]),u("div",MCt,[a[10]||(a[10]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Priority Distribution",-1)),u("div",$Ct,[(T(!0),P(_e,null,we(r.value,s=>(T(),P("div",{key:s.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[u("p",{class:fe(["text-lg font-bold",s.color])},E(s.count),3),u("p",DCt,E(s.label),1)]))),128))])])])):ie("",!0),t.showDetails?(T(),P("div",RCt,[a[15]||(a[15]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Due Date Summary",-1)),u("div",PCt,[u("div",ICt,[u("p",OCt,E(t.stats.overdue||0),1),a[11]||(a[11]=u("p",{class:"text-xs text-red-700"},"Overdue",-1))]),u("div",LCt,[u("p",VCt,E(t.stats.dueThisWeek||0),1),a[12]||(a[12]=u("p",{class:"text-xs text-amber-700"},"Due This Week",-1))]),u("div",NCt,[u("p",jCt,E(t.stats.dueThisMonth||0),1),a[13]||(a[13]=u("p",{class:"text-xs text-blue-700"},"Due This Month",-1))]),u("div",FCt,[u("p",BCt,E(t.stats.dueLater||0),1),a[14]||(a[14]=u("p",{class:"text-xs text-green-700"},"Due Later",-1))])])])):ie("",!0)],64))}},UCt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-5 mb-6"},HCt={class:"flex flex-wrap items-center justify-between gap-4"},qCt={class:"flex flex-wrap items-center gap-3"},WCt={class:"relative"},GCt={class:"w-44"},YCt={class:"flex items-center gap-2"},KCt={key:0,class:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-100"},XCt={__name:"ActionFilters",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","refresh","export","create"],setup(t,{emit:e}){const n=t,r=e,i=Jt({search:"",status:"",priority:"",dueRange:"",responsiblePerson:""}),a=[{label:"All Status",value:""},{label:"Draft",value:"Draft"},{label:"Approved",value:"Approved"},{label:"In Progress",value:"In Progress"},{label:"On Hold",value:"On Hold"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}],s=[{label:"All Priority",value:""},{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],o=[{label:"All Due Dates",value:""},{label:"Overdue",value:"overdue"},{label:"Due Today",value:"today"},{label:"Due This Week",value:"this_week"},{label:"Due This Month",value:"this_month"},{label:"Due Later",value:"later"}],l=J(()=>i.search||i.status||i.priority||i.dueRange||i.responsiblePerson),d=p=>{const h=o.find(m=>m.value===p);return h?h.label:p},c=()=>{r("update:modelValue",me({},i))},f=()=>{i.search="",i.status="",i.priority="",i.dueRange="",i.responsiblePerson="",c()};return Je(()=>n.modelValue,p=>{p&&Object.assign(i,p)},{deep:!0,immediate:!0}),(p,h)=>(T(),P("div",UCt,[u("div",HCt,[u("div",qCt,[u("div",WCt,[b(y(Rn),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),xe(u("input",{"onUpdate:modelValue":h[0]||(h[0]=m=>i.search=m),type:"text",placeholder:"Search action plans...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm w-64 focus:ring-2 focus:ring-orange-500 focus:border-orange-500",onInput:c},null,544),[[Mt,i.search]])]),b(y(ge),{type:"select",modelValue:i.status,"onUpdate:modelValue":h[1]||(h[1]=m=>i.status=m),options:a,placeholder:"All Status",class:"w-36",onChange:c},null,8,["modelValue"]),b(y(ge),{type:"select",modelValue:i.priority,"onUpdate:modelValue":h[2]||(h[2]=m=>i.priority=m),options:s,placeholder:"All Priority",class:"w-36",onChange:c},null,8,["modelValue"]),b(y(ge),{type:"select",modelValue:i.dueRange,"onUpdate:modelValue":h[3]||(h[3]=m=>i.dueRange=m),options:o,placeholder:"Due Date",class:"w-40",onChange:c},null,8,["modelValue"]),u("div",GCt,[b(At,{modelValue:i.responsiblePerson,"onUpdate:modelValue":h[4]||(h[4]=m=>i.responsiblePerson=m),doctype:"User",placeholder:"Responsible Person",onChange:c},null,8,["modelValue"])]),l.value?(T(),he(y(Z),{key:0,variant:"ghost",size:"sm",onClick:f},{default:D(()=>[b(y(ht),{class:"h-4 w-4 mr-1"}),h[12]||(h[12]=W(" Clear ",-1))]),_:1})):ie("",!0)]),u("div",YCt,[b(y(Z),{variant:"outline",size:"sm",onClick:h[5]||(h[5]=m=>p.$emit("refresh"))},{default:D(()=>[b(y(hn),{class:"h-4 w-4"})]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:h[6]||(h[6]=m=>p.$emit("export"))},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-1"}),h[13]||(h[13]=W(" Export ",-1))]),_:1}),b(y(Z),{variant:"solid",theme:"orange",size:"sm",onClick:h[7]||(h[7]=m=>p.$emit("create"))},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-1"}),h[14]||(h[14]=W(" New Action Plan ",-1))]),_:1})])]),l.value?(T(),P("div",KCt,[i.status?(T(),he(y(Ee),{key:0,variant:"outline",class:"cursor-pointer",onClick:h[8]||(h[8]=m=>{i.status="",c()})},{default:D(()=>[W(" Status: "+E(i.status)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.priority?(T(),he(y(Ee),{key:1,variant:"outline",class:"cursor-pointer",onClick:h[9]||(h[9]=m=>{i.priority="",c()})},{default:D(()=>[W(" Priority: "+E(i.priority)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.dueRange?(T(),he(y(Ee),{key:2,variant:"outline",class:"cursor-pointer",onClick:h[10]||(h[10]=m=>{i.dueRange="",c()})},{default:D(()=>[W(" Due: "+E(d(i.dueRange))+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.responsiblePerson?(T(),he(y(Ee),{key:3,variant:"outline",class:"cursor-pointer",onClick:h[11]||(h[11]=m=>{i.responsiblePerson="",c()})},{default:D(()=>[W(" Responsible: "+E(i.responsiblePerson)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0)])):ie("",!0)]))}},ZCt={class:"h-[80vh] flex"},QCt={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},JCt={class:"p-4"},eAt={class:"space-y-2"},tAt=["onClick"],nAt={key:1},rAt={class:"flex-1 min-w-0"},iAt={class:"text-sm font-medium text-gray-900 truncate"},aAt={class:"text-xs text-gray-500 truncate"},sAt={class:"mt-4 p-3 bg-white rounded-lg border border-gray-200"},oAt={class:"flex items-center justify-between mb-2"},lAt={class:"text-xs font-semibold text-orange-600"},uAt={class:"w-full bg-gray-200 rounded-full h-1.5"},dAt={key:0,class:"mt-3 text-xs text-gray-500 text-center"},cAt={class:"flex-1 overflow-y-auto"},fAt={class:"p-6 space-y-8"},pAt={class:"space-y-6"},hAt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},mAt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},gAt={class:"flex gap-2"},vAt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6"},yAt={class:"space-y-6"},bAt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},_At={class:"space-y-6"},xAt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},wAt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},kAt={class:"space-y-6"},SAt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},CAt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},AAt={class:"space-y-6"},TAt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},EAt={class:"flex items-center justify-between mb-4"},MAt={class:"text-xs text-gray-500"},$At={key:0,class:"space-y-4"},DAt={class:"flex items-start justify-between mb-4"},RAt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},PAt={class:"md:col-span-2"},IAt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},OAt={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},LAt={class:"space-y-6"},VAt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},NAt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},jAt={class:"mt-6"},FAt={class:"space-y-6"},BAt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},zAt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},UAt={class:"flex items-center space-x-3"},HAt={class:"space-y-6"},qAt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},WAt={class:"text-sm font-semibold text-gray-900 mb-4 flex items-center"},GAt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},YAt={class:"flex items-center space-x-3"},KAt={key:0},XAt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4"},ZAt={key:1,class:"mt-4"},QAt={class:"border-t border-gray-200 pt-6"},JAt={class:"text-sm font-semibold text-gray-900 mb-4 flex items-center"},eTt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},tTt={class:"flex items-center space-x-3"},nTt={key:0},rTt={class:"border-t border-gray-200 pt-6"},iTt={class:"text-sm font-semibold text-gray-900 mb-4 flex items-center"},aTt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},sTt={class:"mt-4"},oTt={class:"mt-4"},lTt={class:"flex items-center justify-between w-full"},uTt={class:"flex items-center gap-2"},dTt={class:"flex items-center gap-2"},cTt={__name:"CorrectiveActionForm",props:{show:{type:Boolean,default:!1},action:{type:Object,default:null},mode:{type:String,default:"create"}},emits:["update:show","saved","close"],setup(t,{emit:e}){const n=t,r=e,i=aoe(),a=Q(0),s=Q(!1),o=Q(!1),l=Q(null),d=J({get:()=>n.show,set:q=>r("update:show",q)}),c=Q(f());function f(){return{plan_id:"",audit_finding:"",title:"",status:"Draft",priority:"Medium",start_date:"",target_completion_date:"",actual_completion_date:"",action_description:"",root_cause_analysis:"",expected_outcomes:"",success_criteria:"",responsible_person:"",responsible_department:"",accountable_person:"",supporting_team:"",estimated_cost:0,actual_cost:0,resources_required:"",allocated_resources:"",milestones:[],overall_progress:"Not Started",completion_percentage:0,last_progress_update:"",progress_notes:"",identified_issues:"",mitigation_actions:"",escalation_required:!1,escalation_details:"",verification_required:!0,verification_method:"",verification_date:"",verified_by:"",verification_results:"",approval_required:!1,approved_by:"",approval_date:"",approval_notes:"",closure_reason:"",closure_notes:"",lessons_learned:""}}const p=[{id:"basic",title:"Basic Information",description:"Plan ID and status"},{id:"details",title:"Plan Details",description:"Description and analysis"},{id:"responsibility",title:"Responsibility",description:"Assign ownership"},{id:"resources",title:"Resources",description:"Budget allocation"},{id:"milestones",title:"Milestones",description:"Track progress"},{id:"progress",title:"Progress Tracking",description:"Overall progress"},{id:"issues",title:"Issues & Risks",description:"Document issues"},{id:"closure",title:"Verification & Closure",description:"Complete the plan"}],h=[{label:"Draft",value:"Draft"},{label:"Approved",value:"Approved"},{label:"In Progress",value:"In Progress"},{label:"On Hold",value:"On Hold"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}],m=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],g=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Delayed",value:"Delayed"}],v=[{label:"Not Started",value:"Not Started"},{label:"Planning",value:"Planning"},{label:"In Progress",value:"In Progress"},{label:"Review",value:"Review"},{label:"Testing",value:"Testing"},{label:"Completed",value:"Completed"}],_=[{label:"Document Review",value:"Document Review"},{label:"Re-testing",value:"Re-testing"},{label:"Observation",value:"Observation"},{label:"Interview",value:"Interview"},{label:"Data Analysis",value:"Data Analysis"},{label:"Audit Testing",value:"Audit Testing"}],x=[{label:"Successfully Completed",value:"Successfully Completed"},{label:"No Longer Applicable",value:"No Longer Applicable"},{label:"Alternative Solution",value:"Alternative Solution"},{label:"Cancelled by Management",value:"Cancelled by Management"}];Je(()=>n.action,q=>{q?c.value=je(me(me({},f()),q),{milestones:q.milestones||[]}):c.value=f(),a.value=0},{immediate:!0}),Je(()=>n.show,q=>{q||(a.value=0,l.value=null)});const w=J(()=>{var N;let q=0;return c.value.plan_id&&c.value.title&&c.value.audit_finding&&(q+=15),c.value.action_description&&(q+=15),c.value.responsible_person&&c.value.responsible_department&&(q+=15),q+=10,((N=c.value.milestones)==null?void 0:N.length)>0&&(q+=15),q+=10,q+=10,q+=10,q}),k=J(()=>c.value.plan_id&&c.value.audit_finding&&c.value.title&&c.value.status&&c.value.priority&&c.value.target_completion_date&&c.value.action_description&&c.value.responsible_person&&c.value.responsible_department),S=q=>{var N;switch(q){case"basic":return c.value.plan_id&&c.value.title&&c.value.audit_finding&&c.value.target_completion_date;case"details":return!!c.value.action_description;case"responsibility":return c.value.responsible_person&&c.value.responsible_department;case"resources":return!0;case"milestones":return((N=c.value.milestones)==null?void 0:N.length)>0;case"progress":return!0;case"issues":return!0;case"closure":return!0;default:return!1}},C=q=>S(q)?"bg-green-500 text-white":"bg-gray-300 text-gray-600",A=q=>{a.value=q},M=()=>{a.value>0&&a.value--},$=()=>{a.value<p.length-1&&a.value++},R=()=>{const q=new Date().getFullYear(),N=Math.floor(Math.random()*1e3).toString().padStart(3,"0");c.value.plan_id=`CAP-${q}-${N}`},I=()=>{c.value.milestones.push({milestone_description:"",due_date:"",status:"Not Started",completion_date:"",notes:""})},B=q=>{c.value.milestones.splice(q,1)},j=q=>({"Not Started":"subtle","In Progress":"subtle",Completed:"subtle",Delayed:"subtle"})[q]||"subtle",z=()=>le(this,null,function*(){var q;s.value=!0;try{n.mode==="edit"&&((q=n.action)!=null&&q.name)?yield i.updateAction(n.action.name,c.value):yield i.createAction(c.value),l.value=new Date().toLocaleTimeString()}catch(N){console.error("Error saving draft:",N)}finally{s.value=!1}}),F=()=>le(this,null,function*(){var q;o.value=!0;try{n.mode==="edit"&&((q=n.action)!=null&&q.name)?yield i.updateAction(n.action.name,c.value):yield i.createAction(c.value),r("saved"),r("update:show",!1)}catch(N){console.error("Error submitting form:",N)}finally{o.value=!1}});return(q,N)=>(T(),he(y(zt),{modelValue:d.value,"onUpdate:modelValue":N[40]||(N[40]=O=>d.value=O),options:{title:t.mode==="edit"?"Edit Corrective Action Plan":"Create Corrective Action Plan",size:"full"}},{body:D(()=>{var O,V;return[u("div",ZCt,[u("div",QCt,[u("div",JCt,[N[42]||(N[42]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Progress",-1)),u("div",eAt,[(T(),P(_e,null,we(p,(L,U)=>u("div",{key:L.id,class:fe(["flex items-center space-x-2 p-2 rounded-lg cursor-pointer transition-all",a.value===U?"bg-orange-100 border border-orange-300":"hover:bg-gray-100"]),onClick:G=>A(U)},[u("div",{class:fe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold",C(L.id)])},[S(L.id)?(T(),he(y(Wr),{key:0,class:"h-3 w-3"})):(T(),P("span",nAt,E(U+1),1))],2),u("div",rAt,[u("div",iAt,E(L.title),1),u("div",aAt,E(L.description),1)])],10,tAt)),64))]),u("div",sAt,[u("div",oAt,[N[41]||(N[41]=u("span",{class:"text-xs font-medium text-gray-700"},"Overall Progress",-1)),u("span",lAt,E(w.value)+"%",1)]),u("div",uAt,[u("div",{class:"bg-orange-600 h-1.5 rounded-full transition-all duration-500",style:nt({width:`${w.value}%`})},null,4)])]),l.value?(T(),P("div",dAt," Last saved: "+E(l.value),1)):ie("",!0)])]),u("div",cAt,[u("div",fAt,[xe(u("div",pAt,[b(Rt,{title:"Basic Information",description:"Action plan identification and status",sectionNumber:1,color:"orange"}),u("div",hAt,[u("div",mAt,[u("div",null,[N[43]||(N[43]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Plan ID "),u("span",{class:"text-red-500"},"*")],-1)),u("div",gAt,[b(y(ge),{modelValue:c.value.plan_id,"onUpdate:modelValue":N[0]||(N[0]=L=>c.value.plan_id=L),placeholder:"e.g., CAP-2025-001",class:"flex-1"},null,8,["modelValue"]),b(y(Z),{variant:"outline",size:"sm",onClick:R},{default:D(()=>[b(y(hn),{class:"h-4 w-4"})]),_:1})])]),u("div",null,[N[44]||(N[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Finding "),u("span",{class:"text-red-500"},"*")],-1)),b(At,{modelValue:c.value.audit_finding,"onUpdate:modelValue":N[1]||(N[1]=L=>c.value.audit_finding=L),doctype:"Audit Finding",placeholder:"Link to finding"},null,8,["modelValue"])]),b(y(ge),{modelValue:c.value.title,"onUpdate:modelValue":N[2]||(N[2]=L=>c.value.title=L),label:"Title",placeholder:"Action plan title",required:!0},null,8,["modelValue"]),u("div",null,[N[45]||(N[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Status "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:c.value.status,"onUpdate:modelValue":N[3]||(N[3]=L=>c.value.status=L),options:h},null,8,["modelValue"])]),u("div",null,[N[46]||(N[46]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Priority "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:c.value.priority,"onUpdate:modelValue":N[4]||(N[4]=L=>c.value.priority=L),options:m},null,8,["modelValue"])])]),u("div",vAt,[b(y(ge),{modelValue:c.value.start_date,"onUpdate:modelValue":N[5]||(N[5]=L=>c.value.start_date=L),type:"date",label:"Start Date"},null,8,["modelValue"]),b(y(ge),{modelValue:c.value.target_completion_date,"onUpdate:modelValue":N[6]||(N[6]=L=>c.value.target_completion_date=L),type:"date",label:"Target Completion Date",required:!0},null,8,["modelValue"]),b(y(ge),{modelValue:c.value.actual_completion_date,"onUpdate:modelValue":N[7]||(N[7]=L=>c.value.actual_completion_date=L),type:"date",label:"Actual Completion Date"},null,8,["modelValue"])])])],512),[[ot,a.value===0]]),xe(u("div",yAt,[b(Rt,{title:"Plan Details",description:"Action description, root cause, and expected outcomes",sectionNumber:2,color:"blue"}),u("div",bAt,[u("div",null,[N[47]||(N[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Action Description "),u("span",{class:"text-red-500"},"*")],-1)),b(y(an),{content:c.value.action_description,onChange:N[8]||(N[8]=L=>c.value.action_description=L),placeholder:"Describe the corrective action to be taken...",editable:!0,editorClass:"min-h-[150px] prose-sm"},null,8,["content"])]),u("div",null,[N[48]||(N[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Root Cause Analysis",-1)),b(y(an),{content:c.value.root_cause_analysis,onChange:N[9]||(N[9]=L=>c.value.root_cause_analysis=L),placeholder:"Analyze the root cause of the finding...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",null,[N[49]||(N[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Expected Outcomes",-1)),b(y(an),{content:c.value.expected_outcomes,onChange:N[10]||(N[10]=L=>c.value.expected_outcomes=L),placeholder:"What outcomes are expected from this action...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",null,[N[50]||(N[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Success Criteria",-1)),b(y(an),{content:c.value.success_criteria,onChange:N[11]||(N[11]=L=>c.value.success_criteria=L),placeholder:"Define measurable criteria for success...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])])])],512),[[ot,a.value===1]]),xe(u("div",_At,[b(Rt,{title:"Responsibility",description:"Assign accountability and supporting team",sectionNumber:3,color:"green"}),u("div",xAt,[u("div",wAt,[u("div",null,[N[51]||(N[51]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Responsible Person "),u("span",{class:"text-red-500"},"*")],-1)),b(At,{modelValue:c.value.responsible_person,"onUpdate:modelValue":N[12]||(N[12]=L=>c.value.responsible_person=L),doctype:"User",placeholder:"Select responsible person"},null,8,["modelValue"])]),u("div",null,[N[52]||(N[52]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Responsible Department "),u("span",{class:"text-red-500"},"*")],-1)),b(At,{modelValue:c.value.responsible_department,"onUpdate:modelValue":N[13]||(N[13]=L=>c.value.responsible_department=L),doctype:"Department",placeholder:"Select department"},null,8,["modelValue"])]),u("div",null,[N[53]||(N[53]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Accountable Person",-1)),b(At,{modelValue:c.value.accountable_person,"onUpdate:modelValue":N[14]||(N[14]=L=>c.value.accountable_person=L),doctype:"User",placeholder:"Select accountable person"},null,8,["modelValue"])]),b(y(ge),{modelValue:c.value.supporting_team,"onUpdate:modelValue":N[15]||(N[15]=L=>c.value.supporting_team=L),type:"textarea",label:"Supporting Team",placeholder:"List team members supporting this action...",rows:"3"},null,8,["modelValue"])])])],512),[[ot,a.value===2]]),xe(u("div",kAt,[b(Rt,{title:"Resources",description:"Budget and resource allocation",sectionNumber:4,color:"amber"}),u("div",SAt,[u("div",CAt,[b(y(ge),{modelValue:c.value.estimated_cost,"onUpdate:modelValue":N[16]||(N[16]=L=>c.value.estimated_cost=L),type:"number",label:"Estimated Cost",placeholder:"0.00"},null,8,["modelValue"]),b(y(ge),{modelValue:c.value.actual_cost,"onUpdate:modelValue":N[17]||(N[17]=L=>c.value.actual_cost=L),type:"number",label:"Actual Cost",placeholder:"0.00"},null,8,["modelValue"]),b(y(ge),{modelValue:c.value.resources_required,"onUpdate:modelValue":N[18]||(N[18]=L=>c.value.resources_required=L),type:"textarea",label:"Resources Required",placeholder:"List the resources needed...",rows:"3"},null,8,["modelValue"]),b(y(ge),{modelValue:c.value.allocated_resources,"onUpdate:modelValue":N[19]||(N[19]=L=>c.value.allocated_resources=L),type:"textarea",label:"Allocated Resources",placeholder:"List the resources allocated...",rows:"3"},null,8,["modelValue"])])])],512),[[ot,a.value===3]]),xe(u("div",AAt,[b(Rt,{title:"Milestones",description:"Track progress with key milestones",sectionNumber:5,color:"purple"}),u("div",TAt,[u("div",EAt,[u("div",null,[N[54]||(N[54]=u("h4",{class:"text-sm font-medium text-gray-900"},"Milestones",-1)),u("p",MAt,E(((O=c.value.milestones)==null?void 0:O.length)||0)+" milestones defined",1)]),b(y(Z),{variant:"outline",size:"sm",onClick:I},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[N[55]||(N[55]=W(" Add Milestone ",-1))]),_:1})]),((V=c.value.milestones)==null?void 0:V.length)>0?(T(),P("div",$At,[(T(!0),P(_e,null,we(c.value.milestones,(L,U)=>(T(),P("div",{key:U,class:"border border-gray-200 rounded-lg p-4 hover:border-orange-300 transition-colors"},[u("div",DAt,[b(y(Ee),{variant:j(L.status),size:"sm"},{default:D(()=>[W(E(L.status||"Not Started"),1)]),_:2},1032,["variant"]),b(y(Z),{variant:"ghost",size:"sm",onClick:G=>B(U),class:"text-red-500"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",RAt,[u("div",PAt,[b(y(ge),{modelValue:L.milestone_description,"onUpdate:modelValue":G=>L.milestone_description=G,label:"Description",placeholder:"Milestone description...",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),b(y(ge),{modelValue:L.due_date,"onUpdate:modelValue":G=>L.due_date=G,type:"date",label:"Due Date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[N[56]||(N[56]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Status",-1)),b(y(ge),{type:"select",modelValue:L.status,"onUpdate:modelValue":G=>L.status=G,options:g,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",IAt,[b(y(ge),{modelValue:L.completion_date,"onUpdate:modelValue":G=>L.completion_date=G,type:"date",label:"Completion Date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),b(y(ge),{modelValue:L.notes,"onUpdate:modelValue":G=>L.notes=G,label:"Notes",placeholder:"Additional notes...",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):(T(),P("div",OAt,[b(y(Zce),{class:"mx-auto h-12 w-12 text-gray-400"}),N[58]||(N[58]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No milestones defined",-1)),N[59]||(N[59]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add milestones to track progress.",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-4",onClick:I},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[N[57]||(N[57]=W(" Add First Milestone ",-1))]),_:1})]))])],512),[[ot,a.value===4]]),xe(u("div",LAt,[b(Rt,{title:"Progress Tracking",description:"Track overall progress and updates",sectionNumber:6,color:"cyan"}),u("div",VAt,[u("div",NAt,[u("div",null,[N[60]||(N[60]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Overall Progress",-1)),b(y(ge),{type:"select",modelValue:c.value.overall_progress,"onUpdate:modelValue":N[20]||(N[20]=L=>c.value.overall_progress=L),options:v},null,8,["modelValue"])]),b(y(ge),{modelValue:c.value.completion_percentage,"onUpdate:modelValue":N[21]||(N[21]=L=>c.value.completion_percentage=L),type:"number",label:"Completion %",placeholder:"0",min:"0",max:"100"},null,8,["modelValue"]),b(y(ge),{modelValue:c.value.last_progress_update,"onUpdate:modelValue":N[22]||(N[22]=L=>c.value.last_progress_update=L),type:"date",label:"Last Progress Update"},null,8,["modelValue"])]),u("div",jAt,[N[61]||(N[61]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Progress Notes",-1)),b(y(an),{content:c.value.progress_notes,onChange:N[23]||(N[23]=L=>c.value.progress_notes=L),placeholder:"Document progress updates...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])])])],512),[[ot,a.value===5]]),xe(u("div",FAt,[b(Rt,{title:"Issues & Risks",description:"Document issues and mitigation actions",sectionNumber:7,color:"red"}),u("div",BAt,[u("div",null,[N[62]||(N[62]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Identified Issues",-1)),b(y(an),{content:c.value.identified_issues,onChange:N[24]||(N[24]=L=>c.value.identified_issues=L),placeholder:"Document any identified issues...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",null,[N[63]||(N[63]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mitigation Actions",-1)),b(y(an),{content:c.value.mitigation_actions,onChange:N[25]||(N[25]=L=>c.value.mitigation_actions=L),placeholder:"Describe mitigation actions taken...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",zAt,[u("div",UAt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":N[26]||(N[26]=L=>c.value.escalation_required=L),class:"h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"},null,512),[[$n,c.value.escalation_required]]),N[64]||(N[64]=u("label",{class:"text-sm text-gray-700"},"Escalation Required",-1))]),c.value.escalation_required?(T(),he(y(ge),{key:0,modelValue:c.value.escalation_details,"onUpdate:modelValue":N[27]||(N[27]=L=>c.value.escalation_details=L),type:"textarea",label:"Escalation Details",placeholder:"Describe escalation details...",rows:"2"},null,8,["modelValue"])):ie("",!0)])])],512),[[ot,a.value===6]]),xe(u("div",HAt,[b(Rt,{title:"Verification & Closure",description:"Verification, approval, and closure details",sectionNumber:8,color:"orange"}),u("div",qAt,[u("div",null,[u("h4",WAt,[b(y(Ti),{class:"h-4 w-4 mr-2 text-green-600"}),N[65]||(N[65]=W(" Verification ",-1))]),u("div",GAt,[u("div",YAt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":N[28]||(N[28]=L=>c.value.verification_required=L),class:"h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"},null,512),[[$n,c.value.verification_required]]),N[66]||(N[66]=u("label",{class:"text-sm text-gray-700"},"Verification Required",-1))]),c.value.verification_required?(T(),P("div",KAt,[N[67]||(N[67]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Verification Method",-1)),b(y(ge),{type:"select",modelValue:c.value.verification_method,"onUpdate:modelValue":N[29]||(N[29]=L=>c.value.verification_method=L),options:_},null,8,["modelValue"])])):ie("",!0),c.value.verification_required?(T(),he(y(ge),{key:1,modelValue:c.value.verification_date,"onUpdate:modelValue":N[30]||(N[30]=L=>c.value.verification_date=L),type:"date",label:"Verification Date"},null,8,["modelValue"])):ie("",!0)]),c.value.verification_required?(T(),P("div",XAt,[u("div",null,[N[68]||(N[68]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Verified By",-1)),b(At,{modelValue:c.value.verified_by,"onUpdate:modelValue":N[31]||(N[31]=L=>c.value.verified_by=L),doctype:"User",placeholder:"Select verifier"},null,8,["modelValue"])])])):ie("",!0),c.value.verification_required?(T(),P("div",ZAt,[N[69]||(N[69]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Verification Results",-1)),b(y(an),{content:c.value.verification_results,onChange:N[32]||(N[32]=L=>c.value.verification_results=L),placeholder:"Document verification results...",editable:!0,editorClass:"min-h-[100px] prose-sm"},null,8,["content"])])):ie("",!0)]),u("div",QAt,[u("h4",JAt,[b(y(Qs),{class:"h-4 w-4 mr-2 text-blue-600"}),N[70]||(N[70]=W(" Approval ",-1))]),u("div",eTt,[u("div",tTt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":N[33]||(N[33]=L=>c.value.approval_required=L),class:"h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"},null,512),[[$n,c.value.approval_required]]),N[71]||(N[71]=u("label",{class:"text-sm text-gray-700"},"Approval Required",-1))]),c.value.approval_required?(T(),P("div",nTt,[N[72]||(N[72]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved By",-1)),b(At,{modelValue:c.value.approved_by,"onUpdate:modelValue":N[34]||(N[34]=L=>c.value.approved_by=L),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])])):ie("",!0),c.value.approval_required?(T(),he(y(ge),{key:1,modelValue:c.value.approval_date,"onUpdate:modelValue":N[35]||(N[35]=L=>c.value.approval_date=L),type:"date",label:"Approval Date"},null,8,["modelValue"])):ie("",!0)]),c.value.approval_required?(T(),he(y(ge),{key:0,modelValue:c.value.approval_notes,"onUpdate:modelValue":N[36]||(N[36]=L=>c.value.approval_notes=L),type:"textarea",label:"Approval Notes",placeholder:"Add approval notes...",rows:"2",class:"mt-4"},null,8,["modelValue"])):ie("",!0)]),u("div",rTt,[u("h4",iTt,[b(y(UD),{class:"h-4 w-4 mr-2 text-gray-600"}),N[73]||(N[73]=W(" Closure ",-1))]),u("div",aTt,[u("div",null,[N[74]||(N[74]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Closure Reason",-1)),b(y(ge),{type:"select",modelValue:c.value.closure_reason,"onUpdate:modelValue":N[37]||(N[37]=L=>c.value.closure_reason=L),options:x},null,8,["modelValue"])])]),u("div",sTt,[N[75]||(N[75]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Closure Notes",-1)),b(y(an),{content:c.value.closure_notes,onChange:N[38]||(N[38]=L=>c.value.closure_notes=L),placeholder:"Document closure details...",editable:!0,editorClass:"min-h-[100px] prose-sm"},null,8,["content"])]),u("div",oTt,[N[76]||(N[76]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lessons Learned",-1)),b(y(an),{content:c.value.lessons_learned,onChange:N[39]||(N[39]=L=>c.value.lessons_learned=L),placeholder:"Document lessons learned...",editable:!0,editorClass:"min-h-[100px] prose-sm"},null,8,["content"])])])])],512),[[ot,a.value===7]])])])])]}),actions:D(()=>[u("div",lTt,[u("div",uTt,[a.value>0?(T(),he(y(Z),{key:0,variant:"outline",onClick:M},{prefix:D(()=>[b(y(pr),{class:"h-4 w-4"})]),default:D(()=>[N[77]||(N[77]=W(" Previous ",-1))]),_:1})):ie("",!0)]),u("div",dTt,[b(y(Z),{variant:"outline",onClick:z,loading:s.value},{prefix:D(()=>[b(y(Cr),{class:"h-4 w-4"})]),default:D(()=>[N[78]||(N[78]=W(" Save Draft ",-1))]),_:1},8,["loading"]),a.value<p.length-1?(T(),he(y(Z),{key:0,variant:"solid",theme:"orange",onClick:$},{suffix:D(()=>[b(y(tr),{class:"h-4 w-4"})]),default:D(()=>[N[79]||(N[79]=W(" Next ",-1))]),_:1})):(T(),he(y(Z),{key:1,variant:"solid",theme:"orange",onClick:F,loading:o.value,disabled:!k.value},{prefix:D(()=>[b(y(Wr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+E(t.mode==="edit"?"Update Plan":"Create Plan"),1)]),_:1},8,["loading","disabled"]))])])]),_:1},8,["modelValue","options"]))}},fTt={class:"space-y-6"},pTt={class:"flex items-center justify-between"},hTt={class:"flex items-center space-x-3"},mTt={class:"bg-white rounded-lg border border-gray-200"},gTt={class:"p-6"},vTt={class:"flex items-center space-x-2"},yTt={class:"w-20 bg-gray-200 rounded-full h-2"},bTt={class:"text-sm text-gray-600"},_Tt={class:"flex items-center space-x-2"},xTt={__name:"CorrectiveActions",setup(t){const e=xn(),n=aoe(),r=Q(!1),i=Q(null),a=Q("create");J(()=>n.actions);const s=J(()=>n.filteredActions),o=J(()=>n.stats),l=J(()=>n.loading),d=J(()=>n.saving),c=J({get:()=>me({search:n.searchQuery},n.filters),set:C=>{n.searchQuery=C.search||"",n.setFilters(C)}});J(()=>o.value.total),J(()=>o.value.inProgress),J(()=>o.value.completed),J(()=>o.value.overdue);const f=[{key:"plan_id",label:"Action ID",sortable:!0,width:"120px"},{key:"title",label:"Action Title",sortable:!0},{key:"priority",label:"Priority",sortable:!0,width:"100px"},{key:"status",label:"Status",sortable:!0,width:"120px"},{key:"overall_progress",label:"Progress",sortable:!0,width:"150px"},{key:"audit_finding",label:"Related Finding",sortable:!0,width:"150px"},{key:"responsible_person",label:"Responsible Person",sortable:!0,width:"150px"},{key:"responsible_department",label:"Department",sortable:!0,width:"120px"},{key:"target_completion_date",label:"Due Date",sortable:!0,width:"100px"},{key:"creation",label:"Created",sortable:!0,width:"100px"},{key:"actions",label:"Actions",width:"120px"}],p=()=>le(this,null,function*(){yield n.fetchActions()}),h=C=>({Critical:"danger",High:"danger",Medium:"warning",Low:"success"})[C]||"secondary",m=C=>({Draft:"secondary",Approved:"info","In Progress":"warning","On Hold":"secondary",Completed:"success",Cancelled:"secondary"})[C]||"secondary",g=C=>{e.push(`/corrective-actions/${C.name}`)},v=C=>{e.push(`/corrective-actions/${C.name}`)},_=C=>{i.value=C,a.value="edit",r.value=!0},x=C=>le(this,null,function*(){if(confirm("Are you sure you want to delete this corrective action?"))try{yield n.deleteAction(C.name)}catch(A){console.error("Error deleting action:",A)}}),w=()=>{console.log("Exporting actions...")},k=()=>{r.value=!1,i.value=null,a.value="create"},S=()=>{r.value=!1,i.value=null,a.value="create"};return bt(()=>le(this,null,function*(){yield p()})),(C,A)=>(T(),P("div",fTt,[u("div",pTt,[A[6]||(A[6]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Corrective Actions"),u("p",{class:"text-gray-600 mt-1"}," Track and manage corrective action plans and remediation activities ")],-1)),u("div",hTt,[b(y(Z),{variant:"outline"},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),A[4]||(A[4]=W(" Export ",-1))]),_:1}),b(y(Z),{onClick:A[0]||(A[0]=M=>r.value=!0),loading:d.value},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),A[5]||(A[5]=W(" New Corrective Action ",-1))]),_:1},8,["loading"])])]),b(zCt,{stats:o.value,loading:l.value,"show-details":!0},null,8,["stats","loading"]),b(XCt,{modelValue:c.value,"onUpdate:modelValue":A[1]||(A[1]=M=>c.value=M),onRefresh:p,onExport:w,onCreate:A[2]||(A[2]=M=>r.value=!0)},null,8,["modelValue"]),u("div",mTt,[u("div",gTt,[b(y(JO),{columns:f,data:s.value,loading:l.value,pagination:!0,sortable:!0,onRowClick:g},{"column-priority":D(({row:M})=>[b(y(Ee),{variant:h(M.priority)},{default:D(()=>[W(E(M.priority||"Medium"),1)]),_:2},1032,["variant"])]),"column-status":D(({row:M})=>[b(y(Ee),{variant:m(M.status)},{default:D(()=>[W(E(M.status||"Draft"),1)]),_:2},1032,["variant"])]),"column-overall_progress":D(({row:M})=>[u("div",vTt,[u("div",yTt,[u("div",{class:"bg-blue-600 h-2 rounded-full",style:nt({width:`${M.completion_percentage||0}%`})},null,4)]),u("span",bTt,E(M.completion_percentage||0)+"%",1)])]),"column-actions":D(({row:M})=>[u("div",_Tt,[b(y(Z),{variant:"ghost",size:"sm",onClick:$=>v(M)},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:$=>_(M)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",color:"red",onClick:$=>x(M)},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:1},8,["data","loading"])])]),b(cTt,{show:r.value,"onUpdate:show":A[3]||(A[3]=M=>r.value=M),action:i.value,mode:a.value,onSaved:k,onClose:S},null,8,["show","action","mode"])]))}},wA=Ul("data",()=>{const t=Q([]),e=Q(null),n=Q(new Map),r=Q([]),i=Q([]),a=Q([]),s=Q([]),o=Q([]),l=Q([]),d=Q([]),c=Q({}),f=J(()=>r.value.filter(ee=>ee.is_active)),p=J(()=>r.value.filter(ee=>ee.dashboard_type==="Public")),h=J(()=>o.value.filter(ee=>ee.is_active)),m=J(()=>t.value.filter(ee=>ee.is_active)),g=J(()=>{if(Object.keys(c.value).length===0)return 0;const ee=Object.values(c.value),de=ee.length,se=ee.filter(te=>te.completeness>=80).length;return Math.round(se/de*100)}),v=()=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.get_list",params:{doctype:"Data Analytics Dashboard",fields:["name","dashboard_id","dashboard_name","dashboard_type","description","is_active","is_default","created_by","creation_date","last_refresh_date","total_views","last_viewed_date","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();r.value=ee||[]}catch(ee){console.error("Error fetching dashboards:",ee),ee.message&&ee.message.includes("PermissionError")?(console.warn("No permission to access Data Analytics Dashboard doctype"),r.value=[]):r.value=[]}}),_=ee=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"Data Analytics Dashboard",name:ee}}).fetch()}catch(de){return console.error("Error fetching dashboard details:",de),null}}),x=ee=>le(void 0,null,function*(){try{const de=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Data Analytics Dashboard"},ee)}}).fetch();return yield v(),de}catch(de){throw console.error("Error creating dashboard:",de),de}}),w=(ee,de)=>le(void 0,null,function*(){try{const se=yield Ie({url:"frappe.client.set_value",params:{doctype:"Data Analytics Dashboard",name:ee,fieldname:de}}).fetch();return yield v(),se}catch(se){throw console.error("Error updating dashboard:",se),se}}),k=ee=>le(void 0,null,function*(){try{const de=yield Ie({url:"frappe.client.get_list",params:{doctype:"Dashboard Chart",filters:{parent:ee,parenttype:"Data Analytics Dashboard"},fields:["name","chart_name","chart_type","data_source","x_axis_field","y_axis_field","chart_title","width","height","position_x","position_y","is_active","refresh_interval"],limit_page_length:1e3}}).fetch();return i.value=de||[],de}catch(de){return de.message&&de.message.includes("PermissionError")?(console.warn("No permission to access Dashboard Chart doctype"),i.value=[],[]):(console.error("Error fetching dashboard charts:",de),i.value=[],[])}}),S=ee=>le(void 0,null,function*(){try{const de=yield Ie({url:"frappe.client.get_list",params:{doctype:"Dashboard Data Source",filters:{parent:ee,parenttype:"Data Analytics Dashboard"},fields:["name","data_source_name","data_source_type","connection_string","query","refresh_interval","is_active","last_refresh","cache_enabled"],limit_page_length:1e3}}).fetch();return a.value=de||[],de}catch(de){return de.message&&de.message.includes("PermissionError")?(console.warn("No permission to access Dashboard Data Source doctype"),a.value=[],[]):(console.error("Error fetching dashboard data sources:",de),a.value=[],[])}}),C=()=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.get_list",params:{doctype:"CSV Import Type",fields:["name","import_type_id","import_name","description","bc_source_table","target_doctype","is_active","import_frequency","last_import_date","total_records_imported","successful_imports","failed_imports","creation","modified","field_mappings"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();o.value=ee||[];const de=[];o.value.forEach(se=>{se.field_mappings&&Array.isArray(se.field_mappings)&&se.field_mappings.forEach(te=>{de.push(je(me({},te),{import_type_name:se.import_name||se.name}))})}),l.value=de}catch(ee){console.error("Error fetching CSV import types:",ee),ee.message&&ee.message.includes("PermissionError")?(console.warn("No permission to access CSV Import Type doctype"),o.value=[],l.value=[]):(o.value=[],l.value=[])}}),A=ee=>le(void 0,null,function*(){try{return yield Ie({url:"frappe.client.get",params:{doctype:"CSV Import Type",name:ee}}).fetch()}catch(de){return console.error("Error fetching CSV import type details:",de),null}}),M=ee=>le(void 0,null,function*(){try{const de=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"CSV Import Type"},ee)}}).fetch();return yield C(),de}catch(de){throw console.error("Error creating CSV import type:",de),de}}),$=(ee,de)=>le(void 0,null,function*(){try{const se=yield Ie({url:"frappe.client.set_value",params:{doctype:"CSV Import Type",name:ee,fieldname:de}}).fetch();return yield C(),se}catch(se){throw console.error("Error updating CSV import type:",se),se}}),R=(ee,de)=>le(void 0,null,function*(){try{return yield Ie({url:"mkaguzi.api.execute_csv_import",params:{import_type_id:ee,csv_data:de}}).fetch()}catch(se){throw console.error("Error executing CSV import:",se),se}}),I=()=>le(void 0,null,function*(){try{console.warn("Skipping direct field mappings fetch - CSV Import Field Mapping is a child table"),l.value=[]}catch(ee){console.error("Error fetching CSV import field mappings:",ee),l.value=[]}}),B=()=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.get_list",params:{doctype:"CSV Import History",fields:["name","import_type","import_type_name","file_name","status","started_at","completed_at","duration","total_records","records_processed","records_failed","success_rate","error_message","creation","modified"],limit_page_length:1e3,order_by:"started_at desc"}}).fetch();d.value=ee||[]}catch(ee){console.error("Error fetching CSV import history:",ee),ee.message&&ee.message.includes("PermissionError")?(console.warn("No permission to access CSV Import History doctype"),d.value=[]):d.value=[]}}),j=()=>le(void 0,null,function*(){try{const ee=yield Ie({url:"mkaguzi.api.get_data_quality_metrics"}).fetch();return c.value=ee||{},ee}catch(ee){return console.error("Error fetching data quality metrics:",ee),c.value={},{}}}),z=ee=>{t.value=ee};return{dataPeriods:t,importStatus:e,bcDataCache:n,dashboards:r,dashboardCharts:i,dashboardDataSources:a,dashboardFilters:s,csvImportTypes:o,csvImportFieldMappings:l,csvImportHistory:d,dataQualityMetrics:c,activeDataPeriods:m,activeDashboards:f,publicDashboards:p,activeCsvImports:h,dataCompleteness:g,setDataPeriods:z,addDataPeriod:ee=>{t.value.push(ee)},updateDataPeriod:(ee,de)=>{const se=t.value.findIndex(te=>te.name===ee);se!==-1&&(t.value[se]=me(me({},t.value[se]),de))},setImportStatus:ee=>{e.value=ee},cacheBCData:(ee,de)=>{n.value.set(ee,{data:de,timestamp:Date.now()})},getCachedBCData:ee=>{const de=n.value.get(ee);return de?Date.now()-de.timestamp>5*60*1e3?(n.value.delete(ee),null):de.data:null},setDataQualityMetrics:ee=>{c.value=ee},updateDataQualityMetric:(ee,de)=>{c.value[ee]=de},fetchDataPeriods:()=>le(void 0,null,function*(){console.warn("Skipping data periods fetch - Audit Engagement Data Period is a child table with restricted access"),z([])}),fetchDashboards:v,fetchDashboardDetails:_,createDashboard:x,updateDashboard:w,fetchDashboardCharts:k,fetchDashboardDataSources:S,fetchCsvImportTypes:C,fetchCsvImportTypeDetails:A,createCsvImportType:M,updateCsvImportType:$,executeCsvImport:R,fetchCsvImportFieldMappings:I,fetchCsvImportHistory:B,fetchDataQualityMetrics:j,clearCache:()=>{n.value.clear(),c.value={}},getDataPeriodByName:ee=>t.value.find(de=>de.name===ee)}});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function zb(t){return t+.5|0}const uc=(t,e,n)=>Math.max(Math.min(t,n),e);function Sy(t){return uc(zb(t*2.55),0,255)}function kc(t){return uc(zb(t*255),0,255)}function Su(t){return uc(zb(t/2.55)/100,0,1)}function JH(t){return uc(zb(t*100),0,100)}const ks={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},mD=[..."0123456789ABCDEF"],wTt=t=>mD[t&15],kTt=t=>mD[(t&240)>>4]+mD[t&15],Nx=t=>(t&240)>>4===(t&15),STt=t=>Nx(t.r)&&Nx(t.g)&&Nx(t.b)&&Nx(t.a);function CTt(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ks[t[1]]*17,g:255&ks[t[2]]*17,b:255&ks[t[3]]*17,a:e===5?ks[t[4]]*17:255}:(e===7||e===9)&&(n={r:ks[t[1]]<<4|ks[t[2]],g:ks[t[3]]<<4|ks[t[4]],b:ks[t[5]]<<4|ks[t[6]],a:e===9?ks[t[7]]<<4|ks[t[8]]:255})),n}const ATt=(t,e)=>t<255?e(t):"";function TTt(t){var e=STt(t)?wTt:kTt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+ATt(t.a,e):void 0}const ETt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function soe(t,e,n){const r=e*Math.min(n,1-n),i=(a,s=(a+t/30)%12)=>n-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function MTt(t,e,n){const r=(i,a=(i+t/60)%6)=>n-n*e*Math.max(Math.min(a,4-a,1),0);return[r(5),r(3),r(1)]}function $Tt(t,e,n){const r=soe(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function DTt(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function e6(t){const n=t.r/255,r=t.g/255,i=t.b/255,a=Math.max(n,r,i),s=Math.min(n,r,i),o=(a+s)/2;let l,d,c;return a!==s&&(c=a-s,d=o>.5?c/(2-a-s):c/(a+s),l=DTt(n,r,i,c,a),l=l*60+.5),[l|0,d||0,o]}function t6(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(kc)}function n6(t,e,n){return t6(soe,t,e,n)}function RTt(t,e,n){return t6($Tt,t,e,n)}function PTt(t,e,n){return t6(MTt,t,e,n)}function ooe(t){return(t%360+360)%360}function ITt(t){const e=ETt.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Sy(+e[5]):kc(+e[5]));const i=ooe(+e[2]),a=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?r=RTt(i,a,s):e[1]==="hsv"?r=PTt(i,a,s):r=n6(i,a,s),{r:r[0],g:r[1],b:r[2],a:n}}function OTt(t,e){var n=e6(t);n[0]=ooe(n[0]+e),n=n6(n),t.r=n[0],t.g=n[1],t.b=n[2]}function LTt(t){if(!t)return;const e=e6(t),n=e[0],r=JH(e[1]),i=JH(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Su(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const eq={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},tq={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function VTt(){const t={},e=Object.keys(tq),n=Object.keys(eq);let r,i,a,s,o;for(r=0;r<e.length;r++){for(s=o=e[r],i=0;i<n.length;i++)a=n[i],o=o.replace(a,eq[a]);a=parseInt(tq[s],16),t[o]=[a>>16&255,a>>8&255,a&255]}return t}let jx;function NTt(t){jx||(jx=VTt(),jx.transparent=[0,0,0,0]);const e=jx[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const jTt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function FTt(t){const e=jTt.exec(t);let n=255,r,i,a;if(e){if(e[7]!==r){const s=+e[7];n=e[8]?Sy(s):uc(s*255,0,255)}return r=+e[1],i=+e[3],a=+e[5],r=255&(e[2]?Sy(r):uc(r,0,255)),i=255&(e[4]?Sy(i):uc(i,0,255)),a=255&(e[6]?Sy(a):uc(a,0,255)),{r,g:i,b:a,a:n}}}function BTt(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Su(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const k5=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,sm=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function zTt(t,e,n){const r=sm(Su(t.r)),i=sm(Su(t.g)),a=sm(Su(t.b));return{r:kc(k5(r+n*(sm(Su(e.r))-r))),g:kc(k5(i+n*(sm(Su(e.g))-i))),b:kc(k5(a+n*(sm(Su(e.b))-a))),a:t.a+n*(e.a-t.a)}}function Fx(t,e,n){if(t){let r=e6(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=n6(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function loe(t,e){return t&&Object.assign(e||{},t)}function nq(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=kc(t[3]))):(e=loe(t,{r:0,g:0,b:0,a:1}),e.a=kc(e.a)),e}function UTt(t){return t.charAt(0)==="r"?FTt(t):ITt(t)}class V1{constructor(e){if(e instanceof V1)return e;const n=typeof e;let r;n==="object"?r=nq(e):n==="string"&&(r=CTt(e)||NTt(e)||UTt(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=loe(this._rgb);return e&&(e.a=Su(e.a)),e}set rgb(e){this._rgb=nq(e)}rgbString(){return this._valid?BTt(this._rgb):void 0}hexString(){return this._valid?TTt(this._rgb):void 0}hslString(){return this._valid?LTt(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let a;const s=n===a?.5:n,o=2*s-1,l=r.a-i.a,d=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;a=1-d,r.r=255&d*r.r+a*i.r+.5,r.g=255&d*r.g+a*i.g+.5,r.b=255&d*r.b+a*i.b+.5,r.a=s*r.a+(1-s)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=zTt(this._rgb,e._rgb,n)),this}clone(){return new V1(this.rgb)}alpha(e){return this._rgb.a=kc(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=zb(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Fx(this._rgb,2,e),this}darken(e){return Fx(this._rgb,2,-e),this}saturate(e){return Fx(this._rgb,1,e),this}desaturate(e){return Fx(this._rgb,1,-e),this}rotate(e){return OTt(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function uu(){}const HTt=(()=>{let t=0;return()=>t++})();function rr(t){return t==null}function ni(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Tn(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ro(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Xo(t,e){return ro(t)?t:e}function mn(t,e){return typeof t=="undefined"?e:t}const qTt=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,uoe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function vr(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Wn(t,e,n,r){let i,a,s;if(ni(t))for(a=t.length,i=0;i<a;i++)e.call(n,t[i],i);else if(Tn(t))for(s=Object.keys(t),a=s.length,i=0;i<a;i++)e.call(n,t[s[i]],s[i])}function dS(t,e){let n,r,i,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],a=e[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function cS(t){if(ni(t))return t.map(cS);if(Tn(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=cS(t[n[i]]);return e}return t}function doe(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function WTt(t,e,n,r){if(!doe(t))return;const i=e[t],a=n[t];Tn(i)&&Tn(a)?N1(i,a,r):e[t]=cS(a)}function N1(t,e,n){const r=ni(e)?e:[e],i=r.length;if(!Tn(t))return t;n=n||{};const a=n.merger||WTt;let s;for(let o=0;o<i;++o){if(s=r[o],!Tn(s))continue;const l=Object.keys(s);for(let d=0,c=l.length;d<c;++d)a(l[d],t,s,n)}return t}function _0(t,e){return N1(t,e,{merger:GTt})}function GTt(t,e,n){if(!doe(t))return;const r=e[t],i=n[t];Tn(r)&&Tn(i)?_0(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=cS(i))}const rq={"":t=>t,x:t=>t.x,y:t=>t.y};function YTt(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function KTt(t){const e=YTt(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function eh(t,e){return(rq[e]||(rq[e]=KTt(e)))(t)}function r6(t){return t.charAt(0).toUpperCase()+t.slice(1)}const j1=t=>typeof t!="undefined",Nc=t=>typeof t=="function",iq=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function XTt(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Gn=Math.PI,Ir=2*Gn,ZTt=Ir+Gn,fS=Number.POSITIVE_INFINITY,QTt=Gn/180,si=Gn/2,Ef=Gn/4,aq=Gn*2/3,coe=Math.log10,Dl=Math.sign;function x0(t,e,n){return Math.abs(t-e)<n}function sq(t){const e=Math.round(t);t=x0(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(coe(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function JTt(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,a)=>i-a).pop(),e}function e4t(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function pS(t){return!e4t(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function t4t(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function n4t(t,e,n){let r,i,a;for(r=0,i=t.length;r<i;r++)a=t[r][n],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Lu(t){return t*(Gn/180)}function r4t(t){return t*(180/Gn)}function oq(t){if(!ro(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function foe(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*Gn&&(a+=Ir),{angle:a,distance:i}}function gD(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function i4t(t,e){return(t-e+ZTt)%Ir-Gn}function yo(t){return(t%Ir+Ir)%Ir}function F1(t,e,n,r){const i=yo(t),a=yo(e),s=yo(n),o=yo(a-i),l=yo(s-i),d=yo(i-a),c=yo(i-s);return i===a||i===s||r&&a===s||o>l&&d<c}function Ha(t,e,n){return Math.max(e,Math.min(n,t))}function a4t(t){return Ha(t,-32768,32767)}function dc(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function i6(t,e,n){n=n||(s=>t[s]<e);let r=t.length-1,i=0,a;for(;r-i>1;)a=i+r>>1,n(a)?i=a:r=a;return{lo:i,hi:r}}const vD=(t,e,n,r)=>i6(t,n,r?i=>{const a=t[i][e];return a<n||a===n&&t[i+1][e]===n}:i=>t[i][e]<n),s4t=(t,e,n)=>i6(t,n,r=>t[r][e]>=n);function o4t(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const poe=["push","pop","shift","splice","unshift"];function l4t(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),poe.forEach(n=>{const r="_onData"+r6(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...a){const s=i.apply(this,a);return t._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...a)}),s}})})}function lq(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(poe.forEach(a=>{delete t[a]}),delete t._chartjs)}function hoe(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const moe=function(){return typeof window=="undefined"?function(t){return t()}:window.requestAnimationFrame}();function goe(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,moe.call(window,()=>{r=!1,t.apply(e,n)}))}}function u4t(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const a6=t=>t==="start"?"left":t==="end"?"right":"center",Ui=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,d4t=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,Bx=t=>t===0||t===1,uq=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ir/n)),dq=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ir/n)+1,w0={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*si)+1,easeOutSine:t=>Math.sin(t*si),easeInOutSine:t=>-.5*(Math.cos(Gn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Bx(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Bx(t)?t:uq(t,.075,.3),easeOutElastic:t=>Bx(t)?t:dq(t,.075,.3),easeInOutElastic(t){return Bx(t)?t:t<.5?.5*uq(t*2,.1125,.45):.5+.5*dq(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-w0.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?w0.easeInBounce(t*2)*.5:w0.easeOutBounce(t*2-1)*.5+.5};function s6(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function cq(t){return s6(t)?t:new V1(t)}function S5(t){return s6(t)?t:new V1(t).saturate(.5).darken(.1).hexString()}const c4t=["x","y","borderWidth","radius","tension"],f4t=["color","borderColor","backgroundColor"];function p4t(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:f4t},numbers:{type:"number",properties:c4t}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function h4t(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const fq=new Map;function m4t(t,e){e=e||{};const n=t+JSON.stringify(e);let r=fq.get(n);return r||(r=new Intl.NumberFormat(t,e),fq.set(n,r)),r}function o6(t,e,n){return m4t(e,n).format(t)}const g4t={values(t){return ni(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,a=t;if(n.length>1){const d=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),a=v4t(t,n)}const s=coe(Math.abs(a)),o=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),o6(t,r,l)}};function v4t(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var voe={formatters:g4t};function y4t(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:voe.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const th=Object.create(null),yD=Object.create(null);function k0(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const a=n[r];t=t[a]||(t[a]=Object.create(null))}return t}function C5(t,e,n){return typeof e=="string"?N1(k0(t,e),n):N1(k0(t,""),e)}class b4t{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>S5(i.backgroundColor),this.hoverBorderColor=(r,i)=>S5(i.borderColor),this.hoverColor=(r,i)=>S5(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return C5(this,e,n)}get(e){return k0(this,e)}describe(e,n){return C5(yD,e,n)}override(e,n){return C5(th,e,n)}route(e,n,r,i){const a=k0(this,e),s=k0(this,r),o="_"+n;Object.defineProperties(a,{[o]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[o],d=s[i];return Tn(l)?Object.assign({},d,l):mn(l,d)},set(l){this[o]=l}}})}apply(e){e.forEach(n=>n(this))}}var jr=new b4t({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[p4t,h4t,y4t]);function _4t(t){return!t||rr(t.size)||rr(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function pq(t,e,n,r,i){let a=e[i];return a||(a=e[i]=t.measureText(i).width,n.push(i)),a>r&&(r=a),r}function Mf(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function hq(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function bD(t,e,n,r){yoe(t,e,n,r,null)}function yoe(t,e,n,r,i){let a,s,o,l,d,c,f,p;const h=e.pointStyle,m=e.rotation,g=e.radius;let v=(m||0)*QTt;if(h&&typeof h=="object"&&(a=h.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(v),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),h){default:i?t.ellipse(n,r,i/2,g,0,0,Ir):t.arc(n,r,g,0,Ir),t.closePath();break;case"triangle":c=i?i/2:g,t.moveTo(n+Math.sin(v)*c,r-Math.cos(v)*g),v+=aq,t.lineTo(n+Math.sin(v)*c,r-Math.cos(v)*g),v+=aq,t.lineTo(n+Math.sin(v)*c,r-Math.cos(v)*g),t.closePath();break;case"rectRounded":d=g*.516,l=g-d,s=Math.cos(v+Ef)*l,f=Math.cos(v+Ef)*(i?i/2-d:l),o=Math.sin(v+Ef)*l,p=Math.sin(v+Ef)*(i?i/2-d:l),t.arc(n-f,r-o,d,v-Gn,v-si),t.arc(n+p,r-s,d,v-si,v),t.arc(n+f,r+o,d,v,v+si),t.arc(n-p,r+s,d,v+si,v+Gn),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,c=i?i/2:l,t.rect(n-c,r-l,2*c,2*l);break}v+=Ef;case"rectRot":f=Math.cos(v)*(i?i/2:g),s=Math.cos(v)*g,o=Math.sin(v)*g,p=Math.sin(v)*(i?i/2:g),t.moveTo(n-f,r-o),t.lineTo(n+p,r-s),t.lineTo(n+f,r+o),t.lineTo(n-p,r+s),t.closePath();break;case"crossRot":v+=Ef;case"cross":f=Math.cos(v)*(i?i/2:g),s=Math.cos(v)*g,o=Math.sin(v)*g,p=Math.sin(v)*(i?i/2:g),t.moveTo(n-f,r-o),t.lineTo(n+f,r+o),t.moveTo(n+p,r-s),t.lineTo(n-p,r+s);break;case"star":f=Math.cos(v)*(i?i/2:g),s=Math.cos(v)*g,o=Math.sin(v)*g,p=Math.sin(v)*(i?i/2:g),t.moveTo(n-f,r-o),t.lineTo(n+f,r+o),t.moveTo(n+p,r-s),t.lineTo(n-p,r+s),v+=Ef,f=Math.cos(v)*(i?i/2:g),s=Math.cos(v)*g,o=Math.sin(v)*g,p=Math.sin(v)*(i?i/2:g),t.moveTo(n-f,r-o),t.lineTo(n+f,r+o),t.moveTo(n+p,r-s),t.lineTo(n-p,r+s);break;case"line":s=i?i/2:Math.cos(v)*g,o=Math.sin(v)*g,t.moveTo(n-s,r-o),t.lineTo(n+s,r+o);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(i?i/2:g),r+Math.sin(v)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function B1(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function l6(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function u6(t){t.restore()}function x4t(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const a=(e.x+n.x)/2;t.lineTo(a,e.y),t.lineTo(a,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function w4t(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function k4t(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),rr(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function S4t(t,e,n,r,i){if(i.strikethrough||i.underline){const a=t.measureText(r),s=e-a.actualBoundingBoxLeft,o=e+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,d=n+a.actualBoundingBoxDescent,c=i.strikethrough?(l+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(s,c),t.lineTo(o,c),t.stroke()}}function C4t(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function z1(t,e,n,r,i,a={}){const s=ni(e)?e:[e],o=a.strokeWidth>0&&a.strokeColor!=="";let l,d;for(t.save(),t.font=i.string,k4t(t,a),l=0;l<s.length;++l)d=s[l],a.backdrop&&C4t(t,a.backdrop),o&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),rr(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(d,n,r,a.maxWidth)),t.fillText(d,n,r,a.maxWidth),S4t(t,n,r,d,a),r+=Number(i.lineHeight);t.restore()}function hS(t,e){const{x:n,y:r,w:i,h:a,radius:s}=e;t.arc(n+s.topLeft,r+s.topLeft,s.topLeft,1.5*Gn,Gn,!0),t.lineTo(n,r+a-s.bottomLeft),t.arc(n+s.bottomLeft,r+a-s.bottomLeft,s.bottomLeft,Gn,si,!0),t.lineTo(n+i-s.bottomRight,r+a),t.arc(n+i-s.bottomRight,r+a-s.bottomRight,s.bottomRight,si,0,!0),t.lineTo(n+i,r+s.topRight),t.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-si,!0),t.lineTo(n+s.topLeft,r)}const A4t=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,T4t=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function E4t(t,e){const n=(""+t).match(A4t);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const M4t=t=>+t||0;function d6(t,e){const n={},r=Tn(e),i=r?Object.keys(e):e,a=Tn(t)?r?s=>mn(t[s],t[e[s]]):s=>t[s]:()=>t;for(const s of i)n[s]=M4t(a(s));return n}function boe(t){return d6(t,{top:"y",right:"x",bottom:"y",left:"x"})}function qm(t){return d6(t,["topLeft","topRight","bottomLeft","bottomRight"])}function io(t){const e=boe(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Qi(t,e){t=t||{},e=e||jr.font;let n=mn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=mn(t.style,e.style);r&&!(""+r).match(T4t)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:mn(t.family,e.family),lineHeight:E4t(mn(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:mn(t.weight,e.weight),string:""};return i.string=_4t(i),i}function zx(t,e,n,r){let i,a,s;for(i=0,a=t.length;i<a;++i)if(s=t[i],s!==void 0&&s!==void 0)return s}function $4t(t,e,n){const{min:r,max:i}=t,a=uoe(e,(i-r)/2),s=(o,l)=>n&&o===0?0:o+l;return{min:s(r,-Math.abs(a)),max:s(i,a)}}function xh(t,e){return Object.assign(Object.create(t),e)}function c6(t,e=[""],n,r,i=()=>t[0]){const a=n||t;typeof r=="undefined"&&(r=koe("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:r,_getTarget:i,override:o=>c6([o,...t],e,a,r)};return new Proxy(s,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return xoe(o,l,()=>N4t(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return gq(o).includes(l)},ownKeys(o){return gq(o)},set(o,l,d){const c=o._storage||(o._storage=i());return o[l]=c[l]=d,delete o._keys,!0}})}function Cg(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:_oe(t,r),setContext:a=>Cg(t,a,n,r),override:a=>Cg(t.override(a),e,n,r)};return new Proxy(i,{deleteProperty(a,s){return delete a[s],delete t[s],!0},get(a,s,o){return xoe(a,s,()=>R4t(a,s,o))},getOwnPropertyDescriptor(a,s){return a._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(a,s,o){return t[s]=o,delete a[s],!0}})}function _oe(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Nc(n)?n:()=>n,isIndexable:Nc(r)?r:()=>r}}const D4t=(t,e)=>t?t+r6(e):e,f6=(t,e)=>Tn(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function xoe(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function R4t(t,e,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:s}=t;let o=r[e];return Nc(o)&&s.isScriptable(e)&&(o=P4t(e,o,t,n)),ni(o)&&o.length&&(o=I4t(e,o,t,s.isIndexable)),f6(e,o)&&(o=Cg(o,i,a&&a[e],s)),o}function P4t(t,e,n,r){const{_proxy:i,_context:a,_subProxy:s,_stack:o}=n;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(a,s||r);return o.delete(t),f6(t,l)&&(l=p6(i._scopes,i,t,l)),l}function I4t(t,e,n,r){const{_proxy:i,_context:a,_subProxy:s,_descriptors:o}=n;if(typeof a.index!="undefined"&&r(t))return e[a.index%e.length];if(Tn(e[0])){const l=e,d=i._scopes.filter(c=>c!==l);e=[];for(const c of l){const f=p6(d,i,t,c);e.push(Cg(f,a,s&&s[t],o))}}return e}function woe(t,e,n){return Nc(t)?t(e,n):t}const O4t=(t,e)=>t===!0?e:typeof t=="string"?eh(e,t):void 0;function L4t(t,e,n,r,i){for(const a of e){const s=O4t(n,a);if(s){t.add(s);const o=woe(s._fallback,n,i);if(typeof o!="undefined"&&o!==n&&o!==r)return o}else if(s===!1&&typeof r!="undefined"&&n!==r)return null}return!1}function p6(t,e,n,r){const i=e._rootScopes,a=woe(e._fallback,n,r),s=[...t,...i],o=new Set;o.add(r);let l=mq(o,s,n,a||n,r);return l===null||typeof a!="undefined"&&a!==n&&(l=mq(o,s,a,l,r),l===null)?!1:c6(Array.from(o),[""],i,a,()=>V4t(e,n,r))}function mq(t,e,n,r,i){for(;n;)n=L4t(t,e,n,r,i);return n}function V4t(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return ni(i)&&Tn(n)?n:i||{}}function N4t(t,e,n,r){let i;for(const a of e)if(i=koe(D4t(a,t),n),typeof i!="undefined")return f6(t,i)?p6(n,r,t,i):i}function koe(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r!="undefined")return r}}function gq(t){let e=t._keys;return e||(e=t._keys=j4t(t._scopes)),e}function j4t(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const F4t=Number.EPSILON||1e-14,Ag=(t,e)=>e<t.length&&!t[e].skip&&t[e],Soe=t=>t==="x"?"y":"x";function B4t(t,e,n,r){const i=t.skip?e:t,a=e,s=n.skip?e:n,o=gD(a,i),l=gD(s,a);let d=o/(o+l),c=l/(o+l);d=isNaN(d)?0:d,c=isNaN(c)?0:c;const f=r*d,p=r*c;return{previous:{x:a.x-f*(s.x-i.x),y:a.y-f*(s.y-i.y)},next:{x:a.x+p*(s.x-i.x),y:a.y+p*(s.y-i.y)}}}function z4t(t,e,n){const r=t.length;let i,a,s,o,l,d=Ag(t,0);for(let c=0;c<r-1;++c)if(l=d,d=Ag(t,c+1),!(!l||!d)){if(x0(e[c],0,F4t)){n[c]=n[c+1]=0;continue}i=n[c]/e[c],a=n[c+1]/e[c],o=Math.pow(i,2)+Math.pow(a,2),!(o<=9)&&(s=3/Math.sqrt(o),n[c]=i*s*e[c],n[c+1]=a*s*e[c])}}function U4t(t,e,n="x"){const r=Soe(n),i=t.length;let a,s,o,l=Ag(t,0);for(let d=0;d<i;++d){if(s=o,o=l,l=Ag(t,d+1),!o)continue;const c=o[n],f=o[r];s&&(a=(c-s[n])/3,o[`cp1${n}`]=c-a,o[`cp1${r}`]=f-a*e[d]),l&&(a=(l[n]-c)/3,o[`cp2${n}`]=c+a,o[`cp2${r}`]=f+a*e[d])}}function H4t(t,e="x"){const n=Soe(e),r=t.length,i=Array(r).fill(0),a=Array(r);let s,o,l,d=Ag(t,0);for(s=0;s<r;++s)if(o=l,l=d,d=Ag(t,s+1),!!l){if(d){const c=d[e]-l[e];i[s]=c!==0?(d[n]-l[n])/c:0}a[s]=o?d?Dl(i[s-1])!==Dl(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}z4t(t,i,a),U4t(t,a,e)}function Ux(t,e,n){return Math.max(Math.min(t,n),e)}function q4t(t,e){let n,r,i,a,s,o=B1(t[0],e);for(n=0,r=t.length;n<r;++n)s=a,a=o,o=n<r-1&&B1(t[n+1],e),a&&(i=t[n],s&&(i.cp1x=Ux(i.cp1x,e.left,e.right),i.cp1y=Ux(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=Ux(i.cp2x,e.left,e.right),i.cp2y=Ux(i.cp2y,e.top,e.bottom)))}function W4t(t,e,n,r,i){let a,s,o,l;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")H4t(t,i);else{let d=r?t[t.length-1]:t[0];for(a=0,s=t.length;a<s;++a)o=t[a],l=B4t(d,o,t[Math.min(a+1,s-(r?0:1))%s],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,d=o}e.capBezierPoints&&q4t(t,n)}function h6(){return typeof window!="undefined"&&typeof document!="undefined"}function m6(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function mS(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const kA=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function G4t(t,e){return kA(t).getPropertyValue(e)}const Y4t=["top","right","bottom","left"];function Op(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const a=Y4t[i];r[a]=parseFloat(t[e+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const K4t=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function X4t(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:a}=r;let s=!1,o,l;if(K4t(i,a,t.target))o=i,l=a;else{const d=e.getBoundingClientRect();o=r.clientX-d.left,l=r.clientY-d.top,s=!0}return{x:o,y:l,box:s}}function Ff(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=kA(n),a=i.boxSizing==="border-box",s=Op(i,"padding"),o=Op(i,"border","width"),{x:l,y:d,box:c}=X4t(t,n),f=s.left+(c&&o.left),p=s.top+(c&&o.top);let{width:h,height:m}=e;return a&&(h-=s.width+o.width,m-=s.height+o.height),{x:Math.round((l-f)/h*n.width/r),y:Math.round((d-p)/m*n.height/r)}}function Z4t(t,e,n){let r,i;if(e===void 0||n===void 0){const a=t&&m6(t);if(!a)e=t.clientWidth,n=t.clientHeight;else{const s=a.getBoundingClientRect(),o=kA(a),l=Op(o,"border","width"),d=Op(o,"padding");e=s.width-d.width-l.width,n=s.height-d.height-l.height,r=mS(o.maxWidth,a,"clientWidth"),i=mS(o.maxHeight,a,"clientHeight")}}return{width:e,height:n,maxWidth:r||fS,maxHeight:i||fS}}const cc=t=>Math.round(t*10)/10;function Q4t(t,e,n,r){const i=kA(t),a=Op(i,"margin"),s=mS(i.maxWidth,t,"clientWidth")||fS,o=mS(i.maxHeight,t,"clientHeight")||fS,l=Z4t(t,e,n);let{width:d,height:c}=l;if(i.boxSizing==="content-box"){const p=Op(i,"border","width"),h=Op(i,"padding");d-=h.width+p.width,c-=h.height+p.height}return d=Math.max(0,d-a.width),c=Math.max(0,r?d/r:c-a.height),d=cc(Math.min(d,s,l.maxWidth)),c=cc(Math.min(c,o,l.maxHeight)),d&&!c&&(c=cc(d/2)),(e!==void 0||n!==void 0)&&r&&l.height&&c>l.height&&(c=l.height,d=cc(Math.floor(c*r))),{width:d,height:c}}function vq(t,e,n){const r=e||1,i=cc(t.height*r),a=cc(t.width*r);t.height=cc(t.height),t.width=cc(t.width);const s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||s.height!==i||s.width!==a?(t.currentDevicePixelRatio=r,s.height=i,s.width=a,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const J4t=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};h6()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();function yq(t,e){const n=G4t(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Bf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function e3t(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function t3t(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},s=Bf(t,i,n),o=Bf(i,a,n),l=Bf(a,e,n),d=Bf(s,o,n),c=Bf(o,l,n);return Bf(d,c,n)}const n3t=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},r3t=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Wm(t,e,n){return t?n3t(e,n):r3t()}function Coe(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Aoe(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Toe(t){return t==="angle"?{between:F1,compare:i4t,normalize:yo}:{between:dc,compare:(e,n)=>e-n,normalize:e=>e}}function bq({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function i3t(t,e,n){const{property:r,start:i,end:a}=n,{between:s,normalize:o}=Toe(r),l=e.length;let{start:d,end:c,loop:f}=t,p,h;if(f){for(d+=l,c+=l,p=0,h=l;p<h&&s(o(e[d%l][r]),i,a);++p)d--,c--;d%=l,c%=l}return c<d&&(c+=l),{start:d,end:c,loop:f,style:t.style}}function a3t(t,e,n){if(!n)return[t];const{property:r,start:i,end:a}=n,s=e.length,{compare:o,between:l,normalize:d}=Toe(r),{start:c,end:f,loop:p,style:h}=i3t(t,e,n),m=[];let g=!1,v=null,_,x,w;const k=()=>l(i,w,_)&&o(i,w)!==0,S=()=>o(a,_)===0||l(a,w,_),C=()=>g||k(),A=()=>!g||S();for(let M=c,$=c;M<=f;++M)x=e[M%s],!x.skip&&(_=d(x[r]),_!==w&&(g=l(_,i,a),v===null&&C()&&(v=o(_,i)===0?M:$),v!==null&&A()&&(m.push(bq({start:v,end:M,loop:p,count:s,style:h})),v=null),$=M,w=_));return v!==null&&m.push(bq({start:v,end:f,loop:p,count:s,style:h})),m}function s3t(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const a=a3t(r[i],t.points,e);a.length&&n.push(...a)}return n}function o3t(t,e,n,r){let i=0,a=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(a+=i);a>i&&t[a%e].skip;)a--;return a%=e,{start:i,end:a}}function l3t(t,e,n,r){const i=t.length,a=[];let s=e,o=t[e],l;for(l=e+1;l<=n;++l){const d=t[l%i];d.skip||d.stop?o.skip||(r=!1,a.push({start:e%i,end:(l-1)%i,loop:r}),e=s=d.stop?l:null):(s=l,o.skip&&(e=l)),o=d}return s!==null&&a.push({start:e%i,end:s%i,loop:r}),a}function u3t(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const a=!!t._loop,{start:s,end:o}=o3t(n,i,a,r);if(r===!0)return _q(t,[{start:s,end:o,loop:a}],n,e);const l=o<s?o+i:o,d=!!t._fullLoop&&s===0&&o===i-1;return _q(t,l3t(n,s,l,d),n,e)}function _q(t,e,n,r){return!r||!r.setContext||!n?e:d3t(t,e,n,r)}function d3t(t,e,n,r){const i=t._chart.getContext(),a=xq(t.options),{_datasetIndex:s,options:{spanGaps:o}}=t,l=n.length,d=[];let c=a,f=e[0].start,p=f;function h(m,g,v,_){const x=o?-1:1;if(m!==g){for(m+=l;n[m%l].skip;)m-=x;for(;n[g%l].skip;)g+=x;m%l!==g%l&&(d.push({start:m%l,end:g%l,loop:v,style:_}),c=_,f=g%l)}}for(const m of e){f=o?f:m.start;let g=n[f%l],v;for(p=f+1;p<=m.end;p++){const _=n[p%l];v=xq(r.setContext(xh(i,{type:"segment",p0:g,p1:_,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:s}))),c3t(v,c)&&h(f,p-1,m.loop,c),g=_,c=v}f<p-1&&h(f,p-1,m.loop,c)}return d}function xq(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function c3t(t,e){if(!e)return!1;const n=[],r=function(i,a){return s6(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Hx(t,e,n){return t.options.clip?t[n]:e[n]}function f3t(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Hx(n,e,"left"),right:Hx(n,e,"right"),top:Hx(r,e,"top"),bottom:Hx(r,e,"bottom")}:e}function p3t(t,e){const n=e._clip;if(n.disabled)return!1;const r=f3t(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class h3t{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const a=n.listeners[i],s=n.duration;a.forEach(o=>o({chart:e,initial:n.initial,numSteps:s,currentStep:Math.min(r-n.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=moe.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const a=r.items;let s=a.length-1,o=!1,l;for(;s>=0;--s)l=a[s],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),o=!0):(a[s]=a[a.length-1],a.pop());o&&(i.draw(),this._notify(i,r,e,"progress")),a.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=a.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var mu=new h3t;const wq="transparent",m3t={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=cq(t||wq),i=r.valid&&cq(e||wq);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class g3t{constructor(e,n,r,i){const a=n[r];i=zx([e.to,i,a,e.from]);const s=zx([e.from,a,i]);this._active=!0,this._fn=e.fn||m3t[e.type||typeof s],this._easing=w0[e.easing]||w0.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],a=r-this._start,s=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=zx([e.to,n,i,e.from]),this._from=zx([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,a=this._from,s=this._loop,o=this._to;let l;if(this._active=a!==o&&(s||n<r),!this._active){this._target[i]=o,this._notify(!0);return}if(n<0){this._target[i]=a;return}l=n/r%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(a,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class Eoe{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Tn(e))return;const n=Object.keys(jr.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!Tn(a))return;const s={};for(const o of n)s[o]=a[o];(ni(a.properties)&&a.properties||[i]).forEach(o=>{(o===i||!r.has(o))&&r.set(o,s)})})}_animateOptions(e,n){const r=n.options,i=y3t(e,r);if(!i)return[];const a=this._createAnimations(i,r);return r.$shared&&v3t(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,n){const r=this._properties,i=[],a=e.$animations||(e.$animations={}),s=Object.keys(n),o=Date.now();let l;for(l=s.length-1;l>=0;--l){const d=s[l];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,n));continue}const c=n[d];let f=a[d];const p=r.get(d);if(f)if(p&&f.active()){f.update(p,c,o);continue}else f.cancel();if(!p||!p.duration){e[d]=c;continue}a[d]=f=new g3t(p,e,d,c),i.push(f)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return mu.add(this._chart,r),!0}}function v3t(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const a=t[r[i]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function y3t(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function kq(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,a=n.max===void 0?e:0;return{start:r?a:i,end:r?i:a}}function b3t(t,e,n){if(n===!1)return!1;const r=kq(t,n),i=kq(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function _3t(t){let e,n,r,i;return Tn(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function Moe(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,a;for(i=0,a=r.length;i<a;++i)n.push(r[i].index);return n}function Sq(t,e,n,r={}){const i=t.keys,a=r.mode==="single";let s,o,l,d;if(e===null)return;let c=!1;for(s=0,o=i.length;s<o;++s){if(l=+i[s],l===n){if(c=!0,r.all)continue;break}d=t.values[l],ro(d)&&(a||e===0||Dl(e)===Dl(d))&&(e+=d)}return!c&&!r.all?0:e}function x3t(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",a=r.axis==="x"?"x":"y",s=Object.keys(t),o=new Array(s.length);let l,d,c;for(l=0,d=s.length;l<d;++l)c=s[l],o[l]={[i]:c,[a]:t[c]};return o}function A5(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function w3t(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function k3t(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function S3t(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Cq(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const a=t[i.index];if(n&&a>0||!n&&a<0)return i.index}return null}function Aq(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:a,vScale:s,index:o}=r,l=a.axis,d=s.axis,c=w3t(a,s,r),f=e.length;let p;for(let h=0;h<f;++h){const m=e[h],{[l]:g,[d]:v}=m,_=m._stacks||(m._stacks={});p=_[d]=S3t(i,c,g),p[o]=v,p._top=Cq(p,s,!0,r.type),p._bottom=Cq(p,s,!1,r.type);const x=p._visualValues||(p._visualValues={});x[o]=v}}function T5(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function C3t(t,e){return xh(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function A3t(t,e,n){return xh(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Jv(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const a=i._stacks;if(!a||a[r]===void 0||a[r][n]===void 0)return;delete a[r][n],a[r]._visualValues!==void 0&&a[r]._visualValues[n]!==void 0&&delete a[r]._visualValues[n]}}}const E5=t=>t==="reset"||t==="none",Tq=(t,e)=>e?t:Object.assign({},t),T3t=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Moe(n,!0),values:null};class Gm{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=A5(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Jv(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(f,p,h,m)=>f==="x"?p:f==="r"?m:h,a=n.xAxisID=mn(r.xAxisID,T5(e,"x")),s=n.yAxisID=mn(r.yAxisID,T5(e,"y")),o=n.rAxisID=mn(r.rAxisID,T5(e,"r")),l=n.indexAxis,d=n.iAxisID=i(l,a,s,o),c=n.vAxisID=i(l,s,a,o);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(s),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&lq(this._data,this),e._stacked&&Jv(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Tn(n)){const i=this._cachedMeta;this._data=x3t(n,i)}else if(r!==n){if(r){lq(r,this);const i=this._cachedMeta;Jv(i),i._parsed=[]}n&&Object.isExtensible(n)&&l4t(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const a=n._stacked;n._stacked=A5(n.vScale,n),n.stack!==r.stack&&(i=!0,Jv(n),n.stack=r.stack),this._resyncElements(e),(i||a!==n._stacked)&&(Aq(this,n._parsed),n._stacked=A5(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:a,_stacked:s}=r,o=a.axis;let l=e===0&&n===i.length?!0:r._sorted,d=e>0&&r._parsed[e-1],c,f,p;if(this._parsing===!1)r._parsed=i,r._sorted=!0,p=i;else{ni(i[e])?p=this.parseArrayData(r,i,e,n):Tn(i[e])?p=this.parseObjectData(r,i,e,n):p=this.parsePrimitiveData(r,i,e,n);const h=()=>f[o]===null||d&&f[o]<d[o];for(c=0;c<n;++c)r._parsed[c+e]=f=p[c],l&&(h()&&(l=!1),d=f);r._sorted=l}s&&Aq(this,p)}parsePrimitiveData(e,n,r,i){const{iScale:a,vScale:s}=e,o=a.axis,l=s.axis,d=a.getLabels(),c=a===s,f=new Array(i);let p,h,m;for(p=0,h=i;p<h;++p)m=p+r,f[p]={[o]:c||a.parse(d[m],m),[l]:s.parse(n[m],m)};return f}parseArrayData(e,n,r,i){const{xScale:a,yScale:s}=e,o=new Array(i);let l,d,c,f;for(l=0,d=i;l<d;++l)c=l+r,f=n[c],o[l]={x:a.parse(f[0],c),y:s.parse(f[1],c)};return o}parseObjectData(e,n,r,i){const{xScale:a,yScale:s}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,d=new Array(i);let c,f,p,h;for(c=0,f=i;c<f;++c)p=c+r,h=n[p],d[c]={x:a.parse(eh(h,o),p),y:s.parse(eh(h,l),p)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,a=this._cachedMeta,s=n[e.axis],o={keys:Moe(i,!0),values:n._stacks[e.axis]._visualValues};return Sq(o,s,a.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const a=r[n.axis];let s=a===null?NaN:a;const o=i&&r._stacks[n.axis];i&&o&&(i.values=o,s=Sq(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,a=r._sorted&&e===r.iScale,s=i.length,o=this._getOtherScale(e),l=T3t(n,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:f}=k3t(o);let p,h;function m(){h=i[p];const g=h[o.axis];return!ro(h[e.axis])||c>g||f<g}for(p=0;p<s&&!(!m()&&(this.updateRangeFromParsed(d,e,h,l),a));++p);if(a){for(p=s-1;p>=0;--p)if(!m()){this.updateRangeFromParsed(d,e,h,l);break}}return d}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,a,s;for(i=0,a=n.length;i<a;++i)s=n[i][e.axis],ro(s)&&r.push(s);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_3t(mn(this.options.clip,b3t(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],a=n.chartArea,s=[],o=this._drawStart||0,l=this._drawCount||i.length-o,d=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,a,o,l),c=o;c<o+l;++c){const f=i[c];f.hidden||(f.active&&d?s.push(f):f.draw(e,a))}for(c=0;c<s.length;++c)s[c].draw(e,a)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const s=this._cachedMeta.data[e];a=s.$context||(s.$context=A3t(this.getContext(),e,s)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=C3t(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",a=this._cachedDataOpts,s=e+"-"+n,o=a[s],l=this.enableOptionSharing&&j1(r);if(o)return Tq(o,l);const d=this.chart.config,c=d.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],p=d.getOptionScopes(this.getDataset(),c),h=Object.keys(jr.elements[e]),m=()=>this.getContext(r,i,n),g=d.resolveNamedOptions(p,h,m,f);return g.$shared&&(g.$shared=l,a[s]=Object.freeze(Tq(g,l))),g}_resolveAnimations(e,n,r){const i=this.chart,a=this._cachedDataOpts,s=`animation-${n}`,o=a[s];if(o)return o;let l;if(i.options.animation!==!1){const c=this.chart.config,f=c.datasetAnimationScopeKeys(this._type,n),p=c.getOptionScopes(this.getDataset(),f);l=c.createResolver(p,this.getContext(e,r,n))}const d=new Eoe(i,l&&l.animations);return l&&l._cacheable&&(a[s]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||E5(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,a=this.getSharedOptions(r),s=this.includeOptions(n,a)||a!==i;return this.updateSharedOptions(a,n,r),{sharedOptions:a,includeOptions:s}}updateElement(e,n,r,i){E5(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!E5(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const a=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[o,l,d]of this._syncList)this[o](l,d);this._syncList=[];const i=r.length,a=n.length,s=Math.min(a,i);s&&this.parse(0,s),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,n,r=!0){const i=this._cachedMeta,a=i.data,s=e+n;let o;const l=d=>{for(d.length+=n,o=d.length-1;o>=s;o--)d[o]=d[o-n]};for(l(a),o=e;o<s;++o)a[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(a,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Jv(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ct(Gm,"defaults",{}),ct(Gm,"datasetElementType",null),ct(Gm,"dataElementType",null);function E3t(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,a=n.length;i<a;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=hoe(r.sort((i,a)=>i-a))}return t._cache.$bar}function M3t(t){const e=t.iScale,n=E3t(e,t.type);let r=e._length,i,a,s,o;const l=()=>{s===32767||s===-32768||(j1(o)&&(r=Math.min(r,Math.abs(s-o)||r)),o=s)};for(i=0,a=n.length;i<a;++i)s=e.getPixelForValue(n[i]),l();for(o=void 0,i=0,a=e.ticks.length;i<a;++i)s=e.getPixelForTick(i),l();return r}function $3t(t,e,n,r){const i=n.barThickness;let a,s;return rr(i)?(a=e.min*n.categoryPercentage,s=n.barPercentage):(a=i*r,s=1),{chunk:a/r,ratio:s,start:e.pixels[t]-a/2}}function D3t(t,e,n,r){const i=e.pixels,a=i[t];let s=t>0?i[t-1]:null,o=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;s===null&&(s=a-(o===null?e.end-e.start:o-a)),o===null&&(o=a+a-s);const d=a-(a-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/r,ratio:n.barPercentage,start:d}}function R3t(t,e,n,r){const i=n.parse(t[0],r),a=n.parse(t[1],r),s=Math.min(i,a),o=Math.max(i,a);let l=s,d=o;Math.abs(s)>Math.abs(o)&&(l=o,d=s),e[n.axis]=d,e._custom={barStart:l,barEnd:d,start:i,end:a,min:s,max:o}}function $oe(t,e,n,r){return ni(t)?R3t(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Eq(t,e,n,r){const i=t.iScale,a=t.vScale,s=i.getLabels(),o=i===a,l=[];let d,c,f,p;for(d=n,c=n+r;d<c;++d)p=e[d],f={},f[i.axis]=o||i.parse(s[d],d),l.push($oe(p,f,a,d));return l}function M5(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function P3t(t,e,n){return t!==0?Dl(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function I3t(t){let e,n,r,i,a;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",a="start"):(i="start",a="end"),{start:n,end:r,reverse:e,top:i,bottom:a}}function O3t(t,e,n,r){let i=e.borderSkipped;const a={};if(!i){t.borderSkipped=a;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:s,end:o,reverse:l,top:d,bottom:c}=I3t(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=d:(n._bottom||0)===r?i=c:(a[Mq(c,s,o,l)]=!0,i=d)),a[Mq(i,s,o,l)]=!0,t.borderSkipped=a}function Mq(t,e,n,r){return r?(t=L3t(t,e,n),t=$q(t,n,e)):t=$q(t,e,n),t}function L3t(t,e,n){return t===e?n:t===n?e:t}function $q(t,e,n){return t==="start"?e:t==="end"?n:t}function V3t(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Ww extends Gm{parsePrimitiveData(e,n,r,i){return Eq(e,n,r,i)}parseArrayData(e,n,r,i){return Eq(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:a,vScale:s}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,d=a.axis==="x"?o:l,c=s.axis==="x"?o:l,f=[];let p,h,m,g;for(p=r,h=r+i;p<h;++p)g=n[p],m={},m[a.axis]=a.parse(eh(g,d),p),f.push($oe(eh(g,c),m,s,p));return f}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const a=r._custom;a&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,a=this.getParsed(e),s=a._custom,o=M5(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(a[i.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const a=i==="reset",{index:s,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),d=o.isHorizontal(),c=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i);for(let h=n;h<n+r;h++){const m=this.getParsed(h),g=a||rr(m[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),v=this._calculateBarIndexPixels(h,c),_=(m._stacks||{})[o.axis],x={horizontal:d,base:g.base,enableBorderRadius:!_||M5(m._custom)||s===_._top||s===_._bottom,x:d?g.head:v.center,y:d?v.center:g.head,height:d?v.size:Math.abs(g.size),width:d?Math.abs(g.size):v.size};p&&(x.options=f||this.resolveDataElementOptions(h,e[h].active?"active":i));const w=x.options||e[h].options;O3t(x,w,_,s),V3t(x,w,c.ratio),this.updateElement(e[h],h,x,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),a=r.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(n),l=o&&o[r.axis],d=c=>{const f=c._parsed.find(h=>h[r.axis]===l),p=f&&f[c.vScale.axis];if(rr(p)||isNaN(p))return!0};for(const c of i)if(!(n!==void 0&&d(c))&&((a===!1||s.indexOf(c.stack)===-1||a===void 0&&c.stack===void 0)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[mn(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),a=n!==void 0?i.indexOf(n):-1;return a===-1?i.length-1:a}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let a,s;for(a=0,s=n.data.length;a<s;++a)i.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));const o=e.barThickness;return{min:o||M3t(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:a,minBarLength:s}}=this,o=a||0,l=this.getParsed(e),d=l._custom,c=M5(d);let f=l[n.axis],p=0,h=r?this.applyStack(n,l,r):f,m,g;h!==f&&(p=h-f,h=f),c&&(f=d.barStart,h=d.barEnd-d.barStart,f!==0&&Dl(f)!==Dl(d.barEnd)&&(p=0),p+=f);const v=!rr(a)&&!c?a:p;let _=n.getPixelForValue(v);if(this.chart.getDataVisibility(e)?m=n.getPixelForValue(p+h):m=_,g=m-_,Math.abs(g)<s){g=P3t(g,n,o)*s,f===o&&(_-=g/2);const x=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),k=Math.min(x,w),S=Math.max(x,w);_=Math.max(Math.min(_,S),k),m=_+g,r&&!c&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(m)-n.getValueForPixel(_))}if(_===n.getPixelForValue(o)){const x=Dl(g)*n.getLineWidthForValue(o)/2;_+=x,g-=x}return{size:g,base:_,head:m,center:m+g/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,a=i.skipNull,s=mn(i.maxBarThickness,1/0);let o,l;const d=this._getAxisCount();if(n.grouped){const c=a?this._getStackCount(e):n.stackCount,f=i.barThickness==="flex"?D3t(e,n,i,c*d):$3t(e,n,i,c*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(mn(p,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+h;o=f.start+f.chunk*m+f.chunk/2,l=Math.min(s,f.chunk*f.ratio)}else o=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(s,n.min*n.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let a=0;for(;a<i;++a)this.getParsed(a)[n.axis]!==null&&!r[a].hidden&&r[a].draw(this._ctx)}}ct(Ww,"id","bar"),ct(Ww,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ct(Ww,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function N3t(t,e,n){let r=1,i=1,a=0,s=0;if(e<Ir){const o=t,l=o+e,d=Math.cos(o),c=Math.sin(o),f=Math.cos(l),p=Math.sin(l),h=(w,k,S)=>F1(w,o,l,!0)?1:Math.max(k,k*n,S,S*n),m=(w,k,S)=>F1(w,o,l,!0)?-1:Math.min(k,k*n,S,S*n),g=h(0,d,f),v=h(si,c,p),_=m(Gn,d,f),x=m(Gn+si,c,p);r=(g-_)/2,i=(v-x)/2,a=-(g+_)/2,s=-(v+x)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:s}}class Cy extends Gm{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let a=l=>+r[l];if(Tn(r[e])){const{key:l="value"}=this._parsing;a=d=>+eh(r[d],l)}let s,o;for(s=e,o=e+n;s<o;++s)i._parsed[s]=a(s)}}_getRotation(){return Lu(this.options.rotation-90)}_getCircumference(){return Lu(this.options.circumference)}_getRotationExtents(){let e=Ir,n=-Ir;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,a=i._getRotation(),s=i._getCircumference();e=Math.min(e,a),n=Math.max(n,a+s)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,a=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-s)/2,0),l=Math.min(qTt(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:c,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:h,offsetX:m,offsetY:g}=N3t(f,c,l),v=(r.width-s)/p,_=(r.height-s)/h,x=Math.max(Math.min(v,_)/2,0),w=uoe(this.options.radius,x),k=Math.max(w*l,0),S=(w-k)/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=g*w,i.total=this.calculateTotal(),this.outerRadius=w-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*d,0),this.updateElements(a,0,a.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,a=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*a/Ir)}updateElements(e,n,r,i){const a=i==="reset",s=this.chart,o=s.chartArea,d=s.options.animation,c=(o.left+o.right)/2,f=(o.top+o.bottom)/2,p=a&&d.animateScale,h=p?0:this.innerRadius,m=p?0:this.outerRadius,{sharedOptions:g,includeOptions:v}=this._getSharedOptions(n,i);let _=this._getRotation(),x;for(x=0;x<n;++x)_+=this._circumference(x,a);for(x=n;x<n+r;++x){const w=this._circumference(x,a),k=e[x],S={x:c+this.offsetX,y:f+this.offsetY,startAngle:_,endAngle:_+w,circumference:w,outerRadius:m,innerRadius:h};v&&(S.options=g||this.resolveDataElementOptions(x,k.active?"active":i)),_+=w,this.updateElement(k,x,S,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const a=e._parsed[i];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(a))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ir*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],a=o6(n._parsed[e],r.options.locale);return{label:i[e]||"",value:a}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,a,s,o,l;if(!e){for(i=0,a=r.data.datasets.length;i<a;++i)if(r.isDatasetVisible(i)){s=r.getDatasetMeta(i),e=s.data,o=s.controller;break}}if(!e)return 0;for(i=0,a=e.length;i<a;++i)l=o.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const a=this.resolveDataElementOptions(r);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(mn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ct(Cy,"id","doughnut"),ct(Cy,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ct(Cy,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ct(Cy,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:i,color:a,useBorderRadius:s,borderRadius:o}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,d)=>{const f=e.getDatasetMeta(0).controller.getStyle(d);return{text:l,fillStyle:f.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(d),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:i,pointStyle:r,borderRadius:s&&(o||f.borderRadius),index:d}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class _D extends Cy{}ct(_D,"id","pie"),ct(_D,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function $f(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class g6{constructor(e){ct(this,"options");this.options=e||{}}static override(e){Object.assign(g6.prototype,e)}init(){}formats(){return $f()}parse(){return $f()}format(){return $f()}add(){return $f()}diff(){return $f()}startOf(){return $f()}endOf(){return $f()}}var j3t={_date:g6};function F3t(t,e,n,r){const{controller:i,data:a,_sorted:s}=t,o=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&s&&a.length){const d=o._reversePixels?s4t:vD;if(r){if(i._sharedOptions){const c=a[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){const p=d(a,e,n-f),h=d(a,e,n+f);return{lo:p.lo,hi:h.hi}}}}else{const c=d(a,e,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:p}=t,h=p.slice(0,c.lo+1).reverse().findIndex(g=>!rr(g[f.axis]));c.lo-=Math.max(0,h);const m=p.slice(c.hi).findIndex(g=>!rr(g[f.axis]));c.hi+=Math.max(0,m)}return c}}return{lo:0,hi:a.length-1}}function SA(t,e,n,r,i){const a=t.getSortedVisibleDatasetMetas(),s=n[e];for(let o=0,l=a.length;o<l;++o){const{index:d,data:c}=a[o],{lo:f,hi:p}=F3t(a[o],e,s,i);for(let h=f;h<=p;++h){const m=c[h];m.skip||r(m,d,h)}}}function B3t(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const a=e?Math.abs(r.x-i.x):0,s=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}function $5(t,e,n,r,i){const a=[];return!i&&!t.isPointInArea(e)||SA(t,n,e,function(o,l,d){!i&&!B1(o,t.chartArea,0)||o.inRange(e.x,e.y,r)&&a.push({element:o,datasetIndex:l,index:d})},!0),a}function z3t(t,e,n,r){let i=[];function a(s,o,l){const{startAngle:d,endAngle:c}=s.getProps(["startAngle","endAngle"],r),{angle:f}=foe(s,{x:e.x,y:e.y});F1(f,d,c)&&i.push({element:s,datasetIndex:o,index:l})}return SA(t,n,e,a),i}function U3t(t,e,n,r,i,a){let s=[];const o=B3t(n);let l=Number.POSITIVE_INFINITY;function d(c,f,p){const h=c.inRange(e.x,e.y,i);if(r&&!h)return;const m=c.getCenterPoint(i);if(!(!!a||t.isPointInArea(m))&&!h)return;const v=o(e,m);v<l?(s=[{element:c,datasetIndex:f,index:p}],l=v):v===l&&s.push({element:c,datasetIndex:f,index:p})}return SA(t,n,e,d),s}function D5(t,e,n,r,i,a){return!a&&!t.isPointInArea(e)?[]:n==="r"&&!r?z3t(t,e,n,i):U3t(t,e,n,r,i,a)}function Dq(t,e,n,r,i){const a=[],s=n==="x"?"inXRange":"inYRange";let o=!1;return SA(t,n,e,(l,d,c)=>{l[s]&&l[s](e[n],i)&&(a.push({element:l,datasetIndex:d,index:c}),o=o||l.inRange(e.x,e.y,i))}),r&&!o?[]:a}var H3t={modes:{index(t,e,n,r){const i=Ff(e,t),a=n.axis||"x",s=n.includeInvisible||!1,o=n.intersect?$5(t,i,a,r,s):D5(t,i,a,!1,r,s),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const c=o[0].index,f=d.data[c];f&&!f.skip&&l.push({element:f,datasetIndex:d.index,index:c})}),l):[]},dataset(t,e,n,r){const i=Ff(e,t),a=n.axis||"xy",s=n.includeInvisible||!1;let o=n.intersect?$5(t,i,a,r,s):D5(t,i,a,!1,r,s);if(o.length>0){const l=o[0].datasetIndex,d=t.getDatasetMeta(l).data;o=[];for(let c=0;c<d.length;++c)o.push({element:d[c],datasetIndex:l,index:c})}return o},point(t,e,n,r){const i=Ff(e,t),a=n.axis||"xy",s=n.includeInvisible||!1;return $5(t,i,a,r,s)},nearest(t,e,n,r){const i=Ff(e,t),a=n.axis||"xy",s=n.includeInvisible||!1;return D5(t,i,a,n.intersect,r,s)},x(t,e,n,r){const i=Ff(e,t);return Dq(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Ff(e,t);return Dq(t,i,"y",n.intersect,r)}}};const Doe=["left","top","right","bottom"];function ey(t,e){return t.filter(n=>n.pos===e)}function Rq(t,e){return t.filter(n=>Doe.indexOf(n.pos)===-1&&n.box.axis===e)}function ty(t,e){return t.sort((n,r)=>{const i=e?r:n,a=e?n:r;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function q3t(t){const e=[];let n,r,i,a,s,o;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:a,options:{stack:s,stackWeight:o=1}}=i,e.push({index:n,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&a+s,stackWeight:o});return e}function W3t(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:a}=n;if(!r||!Doe.includes(i))continue;const s=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return e}function G3t(t,e){const n=W3t(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let a,s,o;for(a=0,s=t.length;a<s;++a){o=t[a];const{fullSize:l}=o.box,d=n[o.stack],c=d&&o.stackWeight/d.weight;o.horizontal?(o.width=c?c*r:l&&e.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:l&&e.availableHeight)}return n}function Y3t(t){const e=q3t(t),n=ty(e.filter(d=>d.box.fullSize),!0),r=ty(ey(e,"left"),!0),i=ty(ey(e,"right")),a=ty(ey(e,"top"),!0),s=ty(ey(e,"bottom")),o=Rq(e,"x"),l=Rq(e,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(l).concat(s).concat(o),chartArea:ey(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:a.concat(s).concat(o)}}function Pq(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Roe(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function K3t(t,e,n,r){const{pos:i,box:a}=n,s=t.maxPadding;if(!Tn(i)){n.size&&(t[i]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?a.height:a.width),n.size=f.size/f.count,t[i]+=n.size}a.getPadding&&Roe(s,a.getPadding());const o=Math.max(0,e.outerWidth-Pq(s,t,"left","right")),l=Math.max(0,e.outerHeight-Pq(s,t,"top","bottom")),d=o!==t.w,c=l!==t.h;return t.w=o,t.h=l,n.horizontal?{same:d,other:c}:{same:c,other:d}}function X3t(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Z3t(t,e){const n=e.maxPadding;function r(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{a[s]=Math.max(e[s],n[s])}),a}return r(t?["left","right"]:["top","bottom"])}function Ay(t,e,n,r){const i=[];let a,s,o,l,d,c;for(a=0,s=t.length,d=0;a<s;++a){o=t[a],l=o.box,l.update(o.width||e.w,o.height||e.h,Z3t(o.horizontal,e));const{same:f,other:p}=K3t(e,n,o,r);d|=f&&i.length,c=c||p,l.fullSize||i.push(o)}return d&&Ay(i,e,n,r)||c}function qx(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Iq(t,e,n,r){const i=n.padding;let{x:a,y:s}=e;for(const o of t){const l=o.box,d=r[o.stack]||{placed:0,weight:1},c=o.stackWeight/d.weight||1;if(o.horizontal){const f=e.w*c,p=d.size||l.height;j1(d.start)&&(s=d.start),l.fullSize?qx(l,i.left,s,n.outerWidth-i.right-i.left,p):qx(l,e.left+d.placed,s,f,p),d.start=s,d.placed+=f,s=l.bottom}else{const f=e.h*c,p=d.size||l.width;j1(d.start)&&(a=d.start),l.fullSize?qx(l,a,i.top,p,n.outerHeight-i.bottom-i.top):qx(l,a,e.top+d.placed,p,f),d.start=a,d.placed+=f,a=l.right}}e.x=a,e.y=s}var Bs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=io(t.options.layout.padding),a=Math.max(e-i.width,0),s=Math.max(n-i.height,0),o=Y3t(t.boxes),l=o.vertical,d=o.horizontal;Wn(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const c=l.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/c,hBoxMaxHeight:s/2}),p=Object.assign({},i);Roe(p,io(r));const h=Object.assign({maxPadding:p,w:a,h:s,x:i.left,y:i.top},i),m=G3t(l.concat(d),f);Ay(o.fullSize,h,f,m),Ay(l,h,f,m),Ay(d,h,f,m)&&Ay(l,h,f,m),X3t(h),Iq(o.leftAndTop,h,f,m),h.x+=h.w,h.y+=h.h,Iq(o.rightAndBottom,h,f,m),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Wn(o.chartArea,g=>{const v=g.box;Object.assign(v,t.chartArea),v.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class Poe{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class Q3t extends Poe{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Gw="$chartjs",J3t={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Oq=t=>t===null||t==="";function e5t(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Gw]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Oq(i)){const a=yq(t,"width");a!==void 0&&(t.width=a)}if(Oq(r))if(t.style.height==="")t.height=t.width/(e||2);else{const a=yq(t,"height");a!==void 0&&(t.height=a)}return t}const Ioe=J4t?{passive:!0}:!1;function t5t(t,e,n){t&&t.addEventListener(e,n,Ioe)}function n5t(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Ioe)}function r5t(t,e){const n=J3t[t.type]||t.type,{x:r,y:i}=Ff(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function gS(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function i5t(t,e,n){const r=t.canvas,i=new MutationObserver(a=>{let s=!1;for(const o of a)s=s||gS(o.addedNodes,r),s=s&&!gS(o.removedNodes,r);s&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function a5t(t,e,n){const r=t.canvas,i=new MutationObserver(a=>{let s=!1;for(const o of a)s=s||gS(o.removedNodes,r),s=s&&!gS(o.addedNodes,r);s&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const U1=new Map;let Lq=0;function Ooe(){const t=window.devicePixelRatio;t!==Lq&&(Lq=t,U1.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function s5t(t,e){U1.size||window.addEventListener("resize",Ooe),U1.set(t,e)}function o5t(t){U1.delete(t),U1.size||window.removeEventListener("resize",Ooe)}function l5t(t,e,n){const r=t.canvas,i=r&&m6(r);if(!i)return;const a=goe((o,l)=>{const d=i.clientWidth;n(o,l),d<i.clientWidth&&n()},window),s=new ResizeObserver(o=>{const l=o[0],d=l.contentRect.width,c=l.contentRect.height;d===0&&c===0||a(d,c)});return s.observe(i),s5t(t,a),s}function R5(t,e,n){n&&n.disconnect(),e==="resize"&&o5t(t)}function u5t(t,e,n){const r=t.canvas,i=goe(a=>{t.ctx!==null&&n(r5t(a,t))},t);return t5t(r,e,i),i}class d5t extends Poe{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(e5t(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Gw])return!1;const r=n[Gw].initial;["height","width"].forEach(a=>{const s=r[a];rr(s)?n.removeAttribute(a):n.setAttribute(a,s)});const i=r.style||{};return Object.keys(i).forEach(a=>{n.style[a]=i[a]}),n.width=n.width,delete n[Gw],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),s={attach:i5t,detach:a5t,resize:l5t}[n]||u5t;i[n]=s(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:R5,detach:R5,resize:R5}[n]||n5t)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return Q4t(e,n,r,i)}isAttached(e){const n=e&&m6(e);return!!(n&&n.isConnected)}}function c5t(t){return!h6()||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas?Q3t:d5t}var Qx;let gd=(Qx=class{constructor(){ct(this,"x");ct(this,"y");ct(this,"active",!1);ct(this,"options");ct(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return pS(this.x)&&pS(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(a=>{i[a]=r[a]&&r[a].active()?r[a]._to:this[a]}),i}},ct(Qx,"defaults",{}),ct(Qx,"defaultRoutes"),Qx);function f5t(t,e){const n=t.options.ticks,r=p5t(t),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?m5t(e):[],s=a.length,o=a[0],l=a[s-1],d=[];if(s>i)return g5t(e,d,a,s/i),d;const c=h5t(a,e,i);if(s>0){let f,p;const h=s>1?Math.round((l-o)/(s-1)):null;for(Wx(e,d,c,rr(h)?0:o-h,o),f=0,p=s-1;f<p;f++)Wx(e,d,c,a[f],a[f+1]);return Wx(e,d,c,l,rr(h)?e.length:l+h),d}return Wx(e,d,c),d}function p5t(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function h5t(t,e,n){const r=v5t(t),i=e.length/n;if(!r)return Math.max(i,1);const a=JTt(r);for(let s=0,o=a.length-1;s<o;s++){const l=a[s];if(l>i)return l}return Math.max(i,1)}function m5t(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function g5t(t,e,n,r){let i=0,a=n[0],s;for(r=Math.ceil(r),s=0;s<t.length;s++)s===a&&(e.push(t[s]),i++,a=n[i*r])}function Wx(t,e,n,r,i){const a=mn(r,0),s=Math.min(mn(i,t.length),t.length);let o=0,l,d,c;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),c=a;c<0;)o++,c=Math.round(a+o*n);for(d=Math.max(a,0);d<s;d++)d===c&&(e.push(t[d]),o++,c=Math.round(a+o*n))}function v5t(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const y5t=t=>t==="left"?"right":t==="right"?"left":t,Vq=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Nq=(t,e)=>Math.min(e||t,t);function jq(t,e){const n=[],r=t.length/e,i=t.length;let a=0;for(;a<i;a+=r)n.push(t[Math.floor(a)]);return n}function b5t(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),a=t._startPixel,s=t._endPixel,o=1e-6;let l=t.getPixelForTick(i),d;if(!(n&&(r===1?d=Math.max(l-a,s-l):e===0?d=(t.getPixelForTick(1)-l)/2:d=(l-t.getPixelForTick(i-1))/2,l+=i<e?d:-d,l<a-o||l>s+o)))return l}function _5t(t,e){Wn(t,n=>{const r=n.gc,i=r.length/2;let a;if(i>e){for(a=0;a<i;++a)delete n.data[r[a]];r.splice(0,i)}})}function ny(t){return t.drawTicks?t.tickLength:0}function Fq(t,e){if(!t.display)return 0;const n=Qi(t.font,e),r=io(t.padding);return(ni(t.text)?t.text.length:1)*n.lineHeight+r.height}function x5t(t,e){return xh(t,{scale:e,type:"scale"})}function w5t(t,e,n){return xh(t,{tick:n,index:e,type:"tick"})}function k5t(t,e,n){let r=a6(t);return(n&&e!=="right"||!n&&e==="right")&&(r=y5t(r)),r}function S5t(t,e,n,r){const{top:i,left:a,bottom:s,right:o,chart:l}=t,{chartArea:d,scales:c}=l;let f=0,p,h,m;const g=s-i,v=o-a;if(t.isHorizontal()){if(h=Ui(r,a,o),Tn(n)){const _=Object.keys(n)[0],x=n[_];m=c[_].getPixelForValue(x)+g-e}else n==="center"?m=(d.bottom+d.top)/2+g-e:m=Vq(t,n,e);p=o-a}else{if(Tn(n)){const _=Object.keys(n)[0],x=n[_];h=c[_].getPixelForValue(x)-v+e}else n==="center"?h=(d.left+d.right)/2-v+e:h=Vq(t,n,e);m=Ui(r,s,i),f=n==="left"?-si:si}return{titleX:h,titleY:m,maxWidth:p,rotation:f}}class Zg extends gd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Xo(e,Number.POSITIVE_INFINITY),n=Xo(n,Number.NEGATIVE_INFINITY),r=Xo(r,Number.POSITIVE_INFINITY),i=Xo(i,Number.NEGATIVE_INFINITY),{min:Xo(e,r),max:Xo(n,i),minDefined:ro(e),maxDefined:ro(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:a}=this.getUserBounds(),s;if(i&&a)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,d=o.length;l<d;++l)s=o[l].controller.getMinMax(this,e),i||(n=Math.min(n,s.min)),a||(r=Math.max(r,s.max));return n=a&&n>r?r:n,r=i&&n>r?n:r,{min:Xo(n,Xo(r,n)),max:Xo(r,Xo(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){vr(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:a,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$4t(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?jq(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=f5t(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){vr(this.options.afterUpdate,[this])}beforeSetDimensions(){vr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){vr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),vr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){vr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,a;for(r=0,i=e.length;r<i;r++)a=e[r],a.label=vr(n.callback,[a.value,r,e],this)}afterTickToLabelConversion(){vr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){vr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Nq(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,a=n.maxRotation;let s=i,o,l,d;if(!this._isVisible()||!n.display||i>=a||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const c=this._getLabelSizes(),f=c.widest.width,p=c.highest.height,h=Ha(this.chart.width-f,0,this.maxWidth);o=e.offset?this.maxWidth/r:h/(r-1),f+6>o&&(o=h/(r-(e.offset?.5:1)),l=this.maxHeight-ny(e.grid)-n.padding-Fq(e.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),s=r4t(Math.min(Math.asin(Ha((c.highest.height+6)/o,-1,1)),Math.asin(Ha(l/d,-1,1))-Math.asin(Ha(p/d,-1,1)))),s=Math.max(i,Math.min(a,s))),this.labelRotation=s}afterCalculateLabelRotation(){vr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){vr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:a}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const l=Fq(i,n.options.font);if(o?(e.width=this.maxWidth,e.height=ny(a)+l):(e.height=this.maxHeight,e.width=ny(a)+l),r.display&&this.ticks.length){const{first:d,last:c,widest:f,highest:p}=this._getLabelSizes(),h=r.padding*2,m=Lu(this.labelRotation),g=Math.cos(m),v=Math.sin(m);if(o){const _=r.mirror?0:v*f.width+g*p.height;e.height=Math.min(this.maxHeight,e.height+_+h)}else{const _=r.mirror?0:g*f.width+v*p.height;e.width=Math.min(this.maxWidth,e.width+_+h)}this._calculatePadding(d,c,v,g)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:a,padding:s},position:o}=this.options,l=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,h=0;l?d?(p=i*e.width,h=r*n.height):(p=r*e.height,h=i*n.width):a==="start"?h=n.width:a==="end"?p=e.width:a!=="inner"&&(p=e.width/2,h=n.width/2),this.paddingLeft=Math.max((p-c+s)*this.width/(this.width-c),0),this.paddingRight=Math.max((h-f+s)*this.width/(this.width-f),0)}else{let c=n.height/2,f=e.height/2;a==="start"?(c=0,f=e.height):a==="end"&&(c=n.height,f=0),this.paddingTop=c+s,this.paddingBottom=f+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){vr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)rr(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=jq(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:a}=this,s=[],o=[],l=Math.floor(n/Nq(n,r));let d=0,c=0,f,p,h,m,g,v,_,x,w,k,S;for(f=0;f<n;f+=l){if(m=e[f].label,g=this._resolveTickFontOptions(f),i.font=v=g.string,_=a[v]=a[v]||{data:{},gc:[]},x=g.lineHeight,w=k=0,!rr(m)&&!ni(m))w=pq(i,_.data,_.gc,w,m),k=x;else if(ni(m))for(p=0,h=m.length;p<h;++p)S=m[p],!rr(S)&&!ni(S)&&(w=pq(i,_.data,_.gc,w,S),k+=x);s.push(w),o.push(k),d=Math.max(w,d),c=Math.max(k,c)}_5t(a,n);const C=s.indexOf(d),A=o.indexOf(c),M=$=>({width:s[$]||0,height:o[$]||0});return{first:M(0),last:M(n-1),widest:M(C),highest:M(A),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return a4t(this._alignToPixels?Mf(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=w5t(this.getContext(),e,r))}return this.$context||(this.$context=x5t(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Lu(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,o=a?a.widest.width+s:0,l=a?a.highest.height+s:0;return this.isHorizontal()?l*r>o*i?o/r:l/i:l*i<o*r?l/r:o/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:a,position:s,border:o}=i,l=a.offset,d=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=ny(a),h=[],m=o.setContext(this.getContext()),g=m.display?m.width:0,v=g/2,_=function(q){return Mf(r,q,g)};let x,w,k,S,C,A,M,$,R,I,B,j;if(s==="top")x=_(this.bottom),A=this.bottom-p,$=x-v,I=_(e.top)+v,j=e.bottom;else if(s==="bottom")x=_(this.top),I=e.top,j=_(e.bottom)-v,A=x+v,$=this.top+p;else if(s==="left")x=_(this.right),C=this.right-p,M=x-v,R=_(e.left)+v,B=e.right;else if(s==="right")x=_(this.left),R=e.left,B=_(e.right)-v,C=x+v,M=this.left+p;else if(n==="x"){if(s==="center")x=_((e.top+e.bottom)/2+.5);else if(Tn(s)){const q=Object.keys(s)[0],N=s[q];x=_(this.chart.scales[q].getPixelForValue(N))}I=e.top,j=e.bottom,A=x+v,$=A+p}else if(n==="y"){if(s==="center")x=_((e.left+e.right)/2);else if(Tn(s)){const q=Object.keys(s)[0],N=s[q];x=_(this.chart.scales[q].getPixelForValue(N))}C=x-v,M=C-p,R=e.left,B=e.right}const z=mn(i.ticks.maxTicksLimit,f),F=Math.max(1,Math.ceil(f/z));for(w=0;w<f;w+=F){const q=this.getContext(w),N=a.setContext(q),O=o.setContext(q),V=N.lineWidth,L=N.color,U=O.dash||[],G=O.dashOffset,X=N.tickWidth,re=N.tickColor,ee=N.tickBorderDash||[],de=N.tickBorderDashOffset;k=b5t(this,w,l),k!==void 0&&(S=Mf(r,k,V),d?C=M=R=B=S:A=$=I=j=S,h.push({tx1:C,ty1:A,tx2:M,ty2:$,x1:R,y1:I,x2:B,y2:j,width:V,color:L,borderDash:U,borderDashOffset:G,tickWidth:X,tickColor:re,tickBorderDash:ee,tickBorderDashOffset:de}))}return this._ticksLength=f,this._borderValue=x,h}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:a}=r,s=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:d,padding:c,mirror:f}=a,p=ny(r.grid),h=p+c,m=f?-c:h,g=-Lu(this.labelRotation),v=[];let _,x,w,k,S,C,A,M,$,R,I,B,j="middle";if(i==="top")C=this.bottom-m,A=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+m,A=this._getXAxisLabelAlignment();else if(i==="left"){const F=this._getYAxisLabelAlignment(p);A=F.textAlign,S=F.x}else if(i==="right"){const F=this._getYAxisLabelAlignment(p);A=F.textAlign,S=F.x}else if(n==="x"){if(i==="center")C=(e.top+e.bottom)/2+h;else if(Tn(i)){const F=Object.keys(i)[0],q=i[F];C=this.chart.scales[F].getPixelForValue(q)+h}A=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")S=(e.left+e.right)/2-h;else if(Tn(i)){const F=Object.keys(i)[0],q=i[F];S=this.chart.scales[F].getPixelForValue(q)}A=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const z=this._getLabelSizes();for(_=0,x=o.length;_<x;++_){w=o[_],k=w.label;const F=a.setContext(this.getContext(_));M=this.getPixelForTick(_)+a.labelOffset,$=this._resolveTickFontOptions(_),R=$.lineHeight,I=ni(k)?k.length:1;const q=I/2,N=F.color,O=F.textStrokeColor,V=F.textStrokeWidth;let L=A;s?(S=M,A==="inner"&&(_===x-1?L=this.options.reverse?"left":"right":_===0?L=this.options.reverse?"right":"left":L="center"),i==="top"?d==="near"||g!==0?B=-I*R+R/2:d==="center"?B=-z.highest.height/2-q*R+R:B=-z.highest.height+R/2:d==="near"||g!==0?B=R/2:d==="center"?B=z.highest.height/2-q*R:B=z.highest.height-I*R,f&&(B*=-1),g!==0&&!F.showLabelBackdrop&&(S+=R/2*Math.sin(g))):(C=M,B=(1-I)*R/2);let U;if(F.showLabelBackdrop){const G=io(F.backdropPadding),X=z.heights[_],re=z.widths[_];let ee=B-G.top,de=0-G.left;switch(j){case"middle":ee-=X/2;break;case"bottom":ee-=X;break}switch(A){case"center":de-=re/2;break;case"right":de-=re;break;case"inner":_===x-1?de-=re:_>0&&(de-=re/2);break}U={left:de,top:ee,width:re+G.width,height:X+G.height,color:F.backdropColor}}v.push({label:k,font:$,textOffset:B,options:{rotation:g,color:N,strokeColor:O,strokeWidth:V,textAlign:L,textBaseline:j,translation:[S,C],backdrop:U}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Lu(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:a}}=this.options,s=this._getLabelSizes(),o=e+a,l=s.widest.width;let d,c;return n==="left"?i?(c=this.right+a,r==="near"?d="left":r==="center"?(d="center",c+=l/2):(d="right",c+=l)):(c=this.right-o,r==="near"?d="right":r==="center"?(d="center",c-=l/2):(d="left",c=this.left)):n==="right"?i?(c=this.left+a,r==="near"?d="right":r==="center"?(d="center",c-=l/2):(d="left",c-=l)):(c=this.left+o,r==="near"?d="left":r==="center"?(d="center",c+=l/2):(d="right",c=this.right)):d="right",{textAlign:d,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:a,height:s}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,a,s),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,s;const o=(l,d,c)=>{!c.width||!c.color||(r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.setLineDash(c.borderDash||[]),r.lineDashOffset=c.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(n.display)for(a=0,s=i.length;a<s;++a){const l=i[a];n.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,a=r.setContext(this.getContext()),s=r.display?a.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,c,f,p;this.isHorizontal()?(d=Mf(e,this.left,s)-s/2,c=Mf(e,this.right,o)+o/2,f=p=l):(f=Mf(e,this.top,s)-s/2,p=Mf(e,this.bottom,o)+o/2,d=c=l),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(d,f),n.lineTo(c,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&l6(r,i);const a=this.getLabelItems(e);for(const s of a){const o=s.options,l=s.font,d=s.label,c=s.textOffset;z1(r,d,0,c,l,o)}i&&u6(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const a=Qi(r.font),s=io(r.padding),o=r.align;let l=a.lineHeight/2;n==="bottom"||n==="center"||Tn(n)?(l+=s.bottom,ni(r.text)&&(l+=a.lineHeight*(r.text.length-1))):l+=s.top;const{titleX:d,titleY:c,maxWidth:f,rotation:p}=S5t(this,l,n,o);z1(e,r.text,0,0,a,{color:r.color,maxWidth:f,rotation:p,textAlign:k5t(o,n,i),textBaseline:"middle",translation:[d,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=mn(e.grid&&e.grid.z,-1),i=mn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zg.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:r,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let a,s;for(a=0,s=n.length;a<s;++a){const o=n[a];o[r]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Qi(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gx{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;T5t(n)&&(r=this.register(n));const i=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,C5t(e,s,r),this.override&&jr.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in jr[i]&&(delete jr[i][r],this.override&&delete th[r])}}function C5t(t,e,n){const r=N1(Object.create(null),[n?jr.get(n):{},jr.get(e),t.defaults]);jr.set(e,r),t.defaultRoutes&&A5t(e,t.defaultRoutes),t.descriptors&&jr.describe(e,t.descriptors)}function A5t(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),a=[t].concat(r).join("."),s=e[n].split("."),o=s.pop(),l=s.join(".");jr.route(a,i,l,o)})}function T5t(t){return"id"in t&&"defaults"in t}class E5t{constructor(){this.controllers=new Gx(Gm,"datasets",!0),this.elements=new Gx(gd,"elements"),this.plugins=new Gx(Object,"plugins"),this.scales=new Gx(Zg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const a=r||this._getRegistryForType(i);r||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):Wn(i,s=>{const o=r||this._getRegistryForType(s);this._exec(e,o,s)})})}_exec(e,n,r){const i=r6(e);vr(r["before"+i],[],r),n[e](r),vr(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var ul=new E5t;class M5t{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const a=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(a,e,n,r);return n==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),s}_notify(e,n,r,i){i=i||{};for(const a of e){const s=a.plugin,o=s[r],l=[n,i,a.options];if(vr(o,l,s)===!1&&i.cancelable)return!1}return!0}invalidate(){rr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=mn(r.options&&r.options.plugins,{}),a=$5t(r);return i===!1&&!n?[]:R5t(e,a,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(a,s)=>a.filter(o=>!s.some(l=>o.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function $5t(t){const e={},n=[],r=Object.keys(ul.plugins.items);for(let a=0;a<r.length;a++)n.push(ul.getPlugin(r[a]));const i=t.plugins||[];for(let a=0;a<i.length;a++){const s=i[a];n.indexOf(s)===-1&&(n.push(s),e[s.id]=!0)}return{plugins:n,localIds:e}}function D5t(t,e){return!e&&t===!1?null:t===!0?{}:t}function R5t(t,{plugins:e,localIds:n},r,i){const a=[],s=t.getContext();for(const o of e){const l=o.id,d=D5t(r[l],i);d!==null&&a.push({plugin:o,options:P5t(t.config,{plugin:o,local:n[l]},d,s)})}return a}function P5t(t,{plugin:e,local:n},r,i){const a=t.pluginScopeKeys(e),s=t.getOptionScopes(r,a);return n&&e.defaults&&s.push(e.defaults),t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xD(t,e){const n=jr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function I5t(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function O5t(t,e){return t===e?"_index_":"_value_"}function Bq(t){if(t==="x"||t==="y"||t==="r")return t}function L5t(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function wD(t,...e){if(Bq(t))return t;for(const n of e){const r=n.axis||L5t(n.position)||t.length>1&&Bq(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function zq(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function V5t(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return zq(t,"x",n[0])||zq(t,"y",n[0])}return{}}function N5t(t,e){const n=th[t.type]||{scales:{}},r=e.scales||{},i=xD(t.type,e),a=Object.create(null);return Object.keys(r).forEach(s=>{const o=r[s];if(!Tn(o))return console.error(`Invalid scale configuration for scale: ${s}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const l=wD(s,o,V5t(s,t),jr.scales[o.type]),d=O5t(l,i),c=n.scales||{};a[s]=_0(Object.create(null),[{axis:l},o,c[l],c[d]])}),t.data.datasets.forEach(s=>{const o=s.type||t.type,l=s.indexAxis||xD(o,e),c=(th[o]||{}).scales||{};Object.keys(c).forEach(f=>{const p=I5t(f,l),h=s[p+"AxisID"]||p;a[h]=a[h]||Object.create(null),_0(a[h],[{axis:p},r[h],c[f]])})}),Object.keys(a).forEach(s=>{const o=a[s];_0(o,[jr.scales[o.type],jr.scale])}),a}function Loe(t){const e=t.options||(t.options={});e.plugins=mn(e.plugins,{}),e.scales=N5t(t,e)}function Voe(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function j5t(t){return t=t||{},t.data=Voe(t.data),Loe(t),t}const Uq=new Map,Noe=new Set;function Yx(t,e){let n=Uq.get(t);return n||(n=e(),Uq.set(t,n),Noe.add(n)),n}const ry=(t,e,n)=>{const r=eh(e,n);r!==void 0&&t.add(r)};class F5t{constructor(e){this._config=j5t(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Voe(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Loe(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Yx(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Yx(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Yx(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Yx(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:a}=this,s=this._cachedScopes(e,r),o=s.get(n);if(o)return o;const l=new Set;n.forEach(c=>{e&&(l.add(e),c.forEach(f=>ry(l,e,f))),c.forEach(f=>ry(l,i,f)),c.forEach(f=>ry(l,th[a]||{},f)),c.forEach(f=>ry(l,jr,f)),c.forEach(f=>ry(l,yD,f))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),Noe.has(n)&&s.set(n,d),d}chartOptionScopes(){const{options:e,type:n}=this;return[e,th[n]||{},jr.datasets[n]||{},{type:n},jr,yD]}resolveNamedOptions(e,n,r,i=[""]){const a={$shared:!0},{resolver:s,subPrefixes:o}=Hq(this._resolverCache,e,i);let l=s;if(z5t(s,n)){a.$shared=!1,r=Nc(r)?r():r;const d=this.createResolver(e,r,o);l=Cg(s,r,d)}for(const d of n)a[d]=l[d];return a}createResolver(e,n,r=[""],i){const{resolver:a}=Hq(this._resolverCache,e,r);return Tn(n)?Cg(a,n,void 0,i):a}}function Hq(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let a=r.get(i);return a||(a={resolver:c6(e,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},r.set(i,a)),a}const B5t=t=>Tn(t)&&Object.getOwnPropertyNames(t).some(e=>Nc(t[e]));function z5t(t,e){const{isScriptable:n,isIndexable:r}=_oe(t);for(const i of e){const a=n(i),s=r(i),o=(s||a)&&t[i];if(a&&(Nc(o)||B5t(o))||s&&ni(o))return!0}return!1}var U5t="4.5.1";const H5t=["top","bottom","left","right","chartArea"];function qq(t,e){return t==="top"||t==="bottom"||H5t.indexOf(t)===-1&&e==="x"}function Wq(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Gq(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),vr(n&&n.onComplete,[t],e)}function q5t(t){const e=t.chart,n=e.options.animation;vr(n&&n.onProgress,[t],e)}function joe(t){return h6()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Yw={},Yq=t=>{const e=joe(t);return Object.values(Yw).filter(n=>n.canvas===e).pop()};function W5t(t,e,n){const r=Object.keys(t);for(const i of r){const a=+i;if(a>=e){const s=t[i];delete t[i],(n>0||a>e)&&(t[a+n]=s)}}}function G5t(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}class Ja{static register(...e){ul.add(...e),Kq()}static unregister(...e){ul.remove(...e),Kq()}constructor(e,n){const r=this.config=new F5t(n),i=joe(e),a=Yq(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const s=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||c5t(i)),this.platform.updateConfig(r);const o=this.platform.acquireContext(i,s.aspectRatio),l=o&&o.canvas,d=l&&l.height,c=l&&l.width;if(this.id=HTt(),this.ctx=o,this.canvas=l,this.width=c,this.height=d,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new M5t,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=u4t(f=>this.update(f),s.resizeDelay||0),this._dataChanges=[],Yw[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}mu.listen(this,"complete",Gq),mu.listen(this,"progress",q5t),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:a}=this;return rr(e)?n&&a?a:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ul}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vq(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return hq(this.canvas,this.ctx),this}stop(){return mu.stop(this),this}resize(e,n){mu.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,n,a),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,vq(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),vr(r.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Wn(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((s,o)=>(s[o]=!1,s),{});let a=[];n&&(a=a.concat(Object.keys(n).map(s=>{const o=n[s],l=wD(s,o),d=l==="r",c=l==="x";return{options:o,dposition:d?"chartArea":c?"bottom":"left",dtype:d?"radialLinear":c?"category":"linear"}}))),Wn(a,s=>{const o=s.options,l=o.id,d=wD(l,o),c=mn(o.type,s.dtype);(o.position===void 0||qq(o.position,d)!==qq(s.dposition))&&(o.position=s.dposition),i[l]=!0;let f=null;if(l in r&&r[l].type===c)f=r[l];else{const p=ul.getScale(c);f=new p({id:l,type:c,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(o,e)}),Wn(i,(s,o)=>{s||delete r[o]}),Wn(r,s=>{Bs.configure(this,s,s.options),Bs.addBox(this,s)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,a)=>i.index-a.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Wq("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(a=>a===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const a=n[r];let s=this.getDatasetMeta(r);const o=a.type||this.config.type;if(s.type&&s.type!==o&&(this._destroyDatasetMeta(r),s=this.getDatasetMeta(r)),s.type=o,s.indexAxis=a.indexAxis||xD(o,this.options),s.order=a.order||0,s.index=r,s.label=""+a.label,s.visible=this.isDatasetVisible(r),s.controller)s.controller.updateIndex(r),s.controller.linkScales();else{const l=ul.getController(o),{datasetElementType:d,dataElementType:c}=jr.datasets[o];Object.assign(l,{dataElementType:ul.getElement(c),datasetElementType:d&&ul.getElement(d)}),s.controller=new l(this,r),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Wn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let d=0,c=this.data.datasets.length;d<c;d++){const{controller:f}=this.getDatasetMeta(d),p=!i&&a.indexOf(f)===-1;f.buildOrUpdateElements(p),s=Math.max(+f.getMaxOverflow(),s)}s=this._minPadding=r.layout.autoPadding?s:0,this._updateLayout(s),i||Wn(a,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Wq("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Wn(this.scales,e=>{Bs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!iq(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:a}of n){const s=r==="_removeElements"?-a:a;W5t(e,i,s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=a=>new Set(e.filter(s=>s[0]===a).map((s,o)=>o+","+s.splice(1).join(","))),i=r(0);for(let a=1;a<n;a++)if(!iq(i,r(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bs.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Wn(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Nc(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(mu.has(this)?this.attached&&!mu.running(this)&&mu.start(this):(this.draw(),Gq({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,a;for(i=0,a=n.length;i<a;++i){const s=n[i];(!e||s.visible)&&r.push(s)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=p3t(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&l6(n,i),e.controller.draw(),i&&u6(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return B1(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const a=H3t.modes[n];return typeof a=="function"?a(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(a=>a&&a._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=xh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,i);j1(n)?(a.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),s.update(a,{visible:r}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),mu.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),hq(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Yw[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(a,s)=>{n.addEventListener(this,a,s),e[a]=s},i=(a,s,o)=>{a.offsetX=s,a.offsetY=o,this._eventHandler(a)};Wn(this.options.events,a=>r(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,d)=>{n.addEventListener(this,l,d),e[l]=d},i=(l,d)=>{e[l]&&(n.removeEventListener(this,l,d),delete e[l])},a=(l,d)=>{this.canvas&&this.resize(l,d)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),r("resize",a),r("detach",s)};s=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),r("attach",o)},n.isAttached(this.canvas)?o():s()}unbindEvents(){Wn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Wn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let a,s,o,l;for(n==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){s=e[o];const d=s&&this.getDatasetMeta(s.datasetIndex).controller;d&&d[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:a,index:s})=>{const o=this.getDatasetMeta(a);if(!o)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:o.data[s],index:s}});!dS(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,a=(l,d)=>l.filter(c=>!d.some(f=>c.datasetIndex===f.datasetIndex&&c.index===f.index)),s=a(n,e),o=r?e:a(e,n);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const a=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(a||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:a}=this,s=n,o=this._getActiveElements(e,i,r,s),l=XTt(e),d=G5t(e,this._lastEvent,r,l);r&&(this._lastEvent=null,vr(a.onHover,[e,o,this],this),l&&vr(a.onClick,[e,o,this],this));const c=!dS(o,i);return(c||n)&&(this._active=o,this._updateHoverStyles(o,i,n)),this._lastEvent=d,c}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}}ct(Ja,"defaults",jr),ct(Ja,"instances",Yw),ct(Ja,"overrides",th),ct(Ja,"registry",ul),ct(Ja,"version",U5t),ct(Ja,"getChart",Yq);function Kq(){return Wn(Ja.instances,t=>t._plugins.invalidate())}function Y5t(t,e,n){const{startAngle:r,x:i,y:a,outerRadius:s,innerRadius:o,options:l}=e,{borderWidth:d,borderJoinStyle:c}=l,f=Math.min(d/s,yo(r-n));if(t.beginPath(),t.arc(i,a,s-d/2,r+f/2,n-f/2),o>0){const p=Math.min(d/o,yo(r-n));t.arc(i,a,o+d/2,n-p/2,r+p/2,!0)}else{const p=Math.min(d/2,s*yo(r-n));if(c==="round")t.arc(i,a,p,n-Gn/2,r+Gn/2,!0);else if(c==="bevel"){const h=2*p*p,m=-h*Math.cos(n+Gn/2)+i,g=-h*Math.sin(n+Gn/2)+a,v=h*Math.cos(r+Gn/2)+i,_=h*Math.sin(r+Gn/2)+a;t.lineTo(m,g),t.lineTo(v,_)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function K5t(t,e,n){const{startAngle:r,pixelMargin:i,x:a,y:s,outerRadius:o,innerRadius:l}=e;let d=i/o;t.beginPath(),t.arc(a,s,o,r-d,n+d),l>i?(d=i/l,t.arc(a,s,l,n+d,r-d,!0)):t.arc(a,s,i,n+si,r-si),t.closePath(),t.clip()}function X5t(t){return d6(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Z5t(t,e,n,r){const i=X5t(t.options.borderRadius),a=(n-e)/2,s=Math.min(a,r*e/2),o=l=>{const d=(n-Math.min(a,l))*r/2;return Ha(l,0,Math.min(a,d))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Ha(i.innerStart,0,s),innerEnd:Ha(i.innerEnd,0,s)}}function om(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function vS(t,e,n,r,i,a){const{x:s,y:o,startAngle:l,pixelMargin:d,innerRadius:c}=e,f=Math.max(e.outerRadius+r+n-d,0),p=c>0?c+r+n+d:0;let h=0;const m=i-l;if(r){const F=c>0?c-r:0,q=f>0?f-r:0,N=(F+q)/2,O=N!==0?m*N/(N+r):m;h=(m-O)/2}const g=Math.max(.001,m*f-n/Gn)/f,v=(m-g)/2,_=l+v+h,x=i-v-h,{outerStart:w,outerEnd:k,innerStart:S,innerEnd:C}=Z5t(e,p,f,x-_),A=f-w,M=f-k,$=_+w/A,R=x-k/M,I=p+S,B=p+C,j=_+S/I,z=x-C/B;if(t.beginPath(),a){const F=($+R)/2;if(t.arc(s,o,f,$,F),t.arc(s,o,f,F,R),k>0){const V=om(M,R,s,o);t.arc(V.x,V.y,k,R,x+si)}const q=om(B,x,s,o);if(t.lineTo(q.x,q.y),C>0){const V=om(B,z,s,o);t.arc(V.x,V.y,C,x+si,z+Math.PI)}const N=(x-C/p+(_+S/p))/2;if(t.arc(s,o,p,x-C/p,N,!0),t.arc(s,o,p,N,_+S/p,!0),S>0){const V=om(I,j,s,o);t.arc(V.x,V.y,S,j+Math.PI,_-si)}const O=om(A,_,s,o);if(t.lineTo(O.x,O.y),w>0){const V=om(A,$,s,o);t.arc(V.x,V.y,w,_-si,$)}}else{t.moveTo(s,o);const F=Math.cos($)*f+s,q=Math.sin($)*f+o;t.lineTo(F,q);const N=Math.cos(R)*f+s,O=Math.sin(R)*f+o;t.lineTo(N,O)}t.closePath()}function Q5t(t,e,n,r,i){const{fullCircles:a,startAngle:s,circumference:o}=e;let l=e.endAngle;if(a){vS(t,e,n,r,l,i);for(let d=0;d<a;++d)t.fill();isNaN(o)||(l=s+(o%Ir||Ir))}return vS(t,e,n,r,l,i),t.fill(),l}function J5t(t,e,n,r,i){const{fullCircles:a,startAngle:s,circumference:o,options:l}=e,{borderWidth:d,borderJoinStyle:c,borderDash:f,borderDashOffset:p,borderRadius:h}=l,m=l.borderAlign==="inner";if(!d)return;t.setLineDash(f||[]),t.lineDashOffset=p,m?(t.lineWidth=d*2,t.lineJoin=c||"round"):(t.lineWidth=d,t.lineJoin=c||"bevel");let g=e.endAngle;if(a){vS(t,e,n,r,g,i);for(let v=0;v<a;++v)t.stroke();isNaN(o)||(g=s+(o%Ir||Ir))}m&&K5t(t,e,g),l.selfJoin&&g-s>=Gn&&h===0&&c!=="miter"&&Y5t(t,e,g),a||(vS(t,e,n,r,g,i),t.stroke())}class Ty extends gd{constructor(n){super();ct(this,"circumference");ct(this,"endAngle");ct(this,"fullCircles");ct(this,"innerRadius");ct(this,"outerRadius");ct(this,"pixelMargin");ct(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const a=this.getProps(["x","y"],i),{angle:s,distance:o}=foe(a,{x:n,y:r}),{startAngle:l,endAngle:d,innerRadius:c,outerRadius:f,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,m=mn(p,d-l),g=F1(s,l,d)&&l!==d,v=m>=Ir||g,_=dc(o,c+h,f+h);return v&&_}getCenterPoint(n){const{x:r,y:i,startAngle:a,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:d,spacing:c}=this.options,f=(a+s)/2,p=(o+l+c+d)/2;return{x:r+Math.cos(f)*p,y:i+Math.sin(f)*p}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,a=(r.offset||0)/4,s=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Ir?Math.floor(i/Ir):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*a,Math.sin(l)*a);const d=1-Math.sin(Math.min(Gn,i||0)),c=a*d;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Q5t(n,this,c,s,o),J5t(n,this,c,s,o),n.restore()}}ct(Ty,"id","arc"),ct(Ty,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ct(Ty,"defaultRoutes",{backgroundColor:"backgroundColor"}),ct(Ty,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function Foe(t,e,n=e){t.lineCap=mn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(mn(n.borderDash,e.borderDash)),t.lineDashOffset=mn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=mn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=mn(n.borderWidth,e.borderWidth),t.strokeStyle=mn(n.borderColor,e.borderColor)}function eEt(t,e,n){t.lineTo(n.x,n.y)}function tEt(t){return t.stepped?x4t:t.tension||t.cubicInterpolationMode==="monotone"?w4t:eEt}function Boe(t,e,n={}){const r=t.length,{start:i=0,end:a=r-1}=n,{start:s,end:o}=e,l=Math.max(i,s),d=Math.min(a,o),c=i<s&&a<s||i>o&&a>o;return{count:r,start:l,loop:e.loop,ilen:d<l&&!c?r+d-l:d-l}}function nEt(t,e,n,r){const{points:i,options:a}=e,{count:s,start:o,loop:l,ilen:d}=Boe(i,n,r),c=tEt(a);let{move:f=!0,reverse:p}=r||{},h,m,g;for(h=0;h<=d;++h)m=i[(o+(p?d-h:h))%s],!m.skip&&(f?(t.moveTo(m.x,m.y),f=!1):c(t,g,m,p,a.stepped),g=m);return l&&(m=i[(o+(p?d:0))%s],c(t,g,m,p,a.stepped)),!!l}function rEt(t,e,n,r){const i=e.points,{count:a,start:s,ilen:o}=Boe(i,n,r),{move:l=!0,reverse:d}=r||{};let c=0,f=0,p,h,m,g,v,_;const x=k=>(s+(d?o-k:k))%a,w=()=>{g!==v&&(t.lineTo(c,v),t.lineTo(c,g),t.lineTo(c,_))};for(l&&(h=i[x(0)],t.moveTo(h.x,h.y)),p=0;p<=o;++p){if(h=i[x(p)],h.skip)continue;const k=h.x,S=h.y,C=k|0;C===m?(S<g?g=S:S>v&&(v=S),c=(f*c+k)/++f):(w(),t.lineTo(k,S),m=C,f=0,g=v=S),_=S}w()}function kD(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?rEt:nEt}function iEt(t){return t.stepped?e3t:t.tension||t.cubicInterpolationMode==="monotone"?t3t:Bf}function aEt(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),Foe(t,e.options),t.stroke(i)}function sEt(t,e,n,r){const{segments:i,options:a}=e,s=kD(e);for(const o of i)Foe(t,a,o.style),t.beginPath(),s(t,e,o,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const oEt=typeof Path2D=="function";function lEt(t,e,n,r){oEt&&!e.options.segment?aEt(t,e,n,r):sEt(t,e,n,r)}class Ey extends gd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;W4t(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=u3t(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],a=this.points,s=s3t(this,{property:n,start:i,end:i});if(!s.length)return;const o=[],l=iEt(r);let d,c;for(d=0,c=s.length;d<c;++d){const{start:f,end:p}=s[d],h=a[f],m=a[p];if(h===m){o.push(h);continue}const g=Math.abs((i-h[n])/(m[n]-h[n])),v=l(h,m,g,r.stepped);v[n]=e[n],o.push(v)}return o.length===1?o[0]:o}pathSegment(e,n,r){return kD(this)(e,this,n,r)}path(e,n,r){const i=this.segments,a=kD(this);let s=this._loop;n=n||0,r=r||this.points.length-n;for(const o of i)s&=a(e,this,o,{start:n,end:n+r-1});return!!s}draw(e,n,r,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),lEt(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ct(Ey,"id","line"),ct(Ey,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ct(Ey,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ct(Ey,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Xq(t,e,n,r){const i=t.options,{[n]:a}=t.getProps([n],r);return Math.abs(e-a)<i.radius+i.hitRadius}class Kw extends gd{constructor(n){super();ct(this,"parsed");ct(this,"skip");ct(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const a=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(n-s,2)+Math.pow(r-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(n,r){return Xq(this,n,"x",r)}inYRange(n,r){return Xq(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!B1(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,bD(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ct(Kw,"id","point"),ct(Kw,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ct(Kw,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function zoe(t,e){const{x:n,y:r,base:i,width:a,height:s}=t.getProps(["x","y","base","width","height"],e);let o,l,d,c,f;return t.horizontal?(f=s/2,o=Math.min(n,i),l=Math.max(n,i),d=r-f,c=r+f):(f=a/2,o=n-f,l=n+f,d=Math.min(r,i),c=Math.max(r,i)),{left:o,top:d,right:l,bottom:c}}function fc(t,e,n,r){return t?0:Ha(e,n,r)}function uEt(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,a=boe(r);return{t:fc(i.top,a.top,0,n),r:fc(i.right,a.right,0,e),b:fc(i.bottom,a.bottom,0,n),l:fc(i.left,a.left,0,e)}}function dEt(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,a=qm(i),s=Math.min(e,n),o=t.borderSkipped,l=r||Tn(i);return{topLeft:fc(!l||o.top||o.left,a.topLeft,0,s),topRight:fc(!l||o.top||o.right,a.topRight,0,s),bottomLeft:fc(!l||o.bottom||o.left,a.bottomLeft,0,s),bottomRight:fc(!l||o.bottom||o.right,a.bottomRight,0,s)}}function cEt(t){const e=zoe(t),n=e.right-e.left,r=e.bottom-e.top,i=uEt(t,n/2,r/2),a=dEt(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function P5(t,e,n,r){const i=e===null,a=n===null,o=t&&!(i&&a)&&zoe(t,r);return o&&(i||dc(e,o.left,o.right))&&(a||dc(n,o.top,o.bottom))}function fEt(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function pEt(t,e){t.rect(e.x,e.y,e.w,e.h)}function I5(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,a=(t.x+t.w!==n.x+n.w?e:0)-r,s=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+a,h:t.h+s,radius:t.radius}}class S0 extends gd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:a,outer:s}=cEt(this),o=fEt(s.radius)?hS:pEt;e.save(),(s.w!==a.w||s.h!==a.h)&&(e.beginPath(),o(e,I5(s,n,a)),e.clip(),o(e,I5(a,-n,s)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),o(e,I5(a,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return P5(this,e,n,r)}inXRange(e,n){return P5(this,e,null,n)}inYRange(e,n){return P5(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(n+i)/2:n,y:a?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ct(S0,"id","bar"),ct(S0,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ct(S0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Zq=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},hEt=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Qq extends gd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=vr(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Qi(r.font),a=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=Zq(r,a);let d,c;n.font=i.string,this.isHorizontal()?(d=this.maxWidth,c=this._fitRows(s,a,o,l)+10):(c=this.maxHeight,d=this._fitCols(s,i,o,l)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:a,maxWidth:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],c=i+o;let f=e;a.textAlign="left",a.textBaseline="middle";let p=-1,h=-c;return this.legendItems.forEach((m,g)=>{const v=r+n/2+a.measureText(m.text).width;(g===0||d[d.length-1]+v+2*o>s)&&(f+=c,d[d.length-(g>0?0:1)]=0,h+=c,p++),l[g]={left:0,top:h,row:p,width:v,height:i},d[d.length-1]+=v+o}),f}_fitCols(e,n,r,i){const{ctx:a,maxHeight:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],c=s-e;let f=o,p=0,h=0,m=0,g=0;return this.legendItems.forEach((v,_)=>{const{itemWidth:x,itemHeight:w}=mEt(r,n,a,v,i);_>0&&h+w+2*o>c&&(f+=p+o,d.push({width:p,height:h}),m+=p+o,g++,p=h=0),l[_]={left:m,top:h,col:g,width:x,height:w},p=Math.max(p,x),h+=w+o}),f+=p,d.push({width:p,height:h}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:a}}=this,s=Wm(a,this.left,this.width);if(this.isHorizontal()){let o=0,l=Ui(r,this.left+i,this.right-this.lineWidths[o]);for(const d of n)o!==d.row&&(o=d.row,l=Ui(r,this.left+i,this.right-this.lineWidths[o])),d.top+=this.top+e+i,d.left=s.leftForLtr(s.x(l),d.width),l+=d.width+i}else{let o=0,l=Ui(r,this.top+e+i,this.bottom-this.columnSizes[o].height);for(const d of n)d.col!==o&&(o=d.col,l=Ui(r,this.top+e+i,this.bottom-this.columnSizes[o].height)),d.top=l,d.left+=this.left+i,d.left=s.leftForLtr(s.x(d.left),d.width),l+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;l6(e,this),this._draw(),u6(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:a,labels:s}=e,o=jr.color,l=Wm(e.rtl,this.left,this.width),d=Qi(s.font),{padding:c}=s,f=d.size,p=f/2;let h;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:m,boxHeight:g,itemHeight:v}=Zq(s,f),_=function(C,A,M){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const $=mn(M.lineWidth,1);if(i.fillStyle=mn(M.fillStyle,o),i.lineCap=mn(M.lineCap,"butt"),i.lineDashOffset=mn(M.lineDashOffset,0),i.lineJoin=mn(M.lineJoin,"miter"),i.lineWidth=$,i.strokeStyle=mn(M.strokeStyle,o),i.setLineDash(mn(M.lineDash,[])),s.usePointStyle){const R={radius:g*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:$},I=l.xPlus(C,m/2),B=A+p;yoe(i,R,I,B,s.pointStyleWidth&&m)}else{const R=A+Math.max((f-g)/2,0),I=l.leftForLtr(C,m),B=qm(M.borderRadius);i.beginPath(),Object.values(B).some(j=>j!==0)?hS(i,{x:I,y:R,w:m,h:g,radius:B}):i.rect(I,R,m,g),i.fill(),$!==0&&i.stroke()}i.restore()},x=function(C,A,M){z1(i,M.text,C,A+v/2,d,{strikethrough:M.hidden,textAlign:l.textAlign(M.textAlign)})},w=this.isHorizontal(),k=this._computeTitleHeight();w?h={x:Ui(a,this.left+c,this.right-r[0]),y:this.top+c+k,line:0}:h={x:this.left+c,y:Ui(a,this.top+k+c,this.bottom-n[0].height),line:0},Coe(this.ctx,e.textDirection);const S=v+c;this.legendItems.forEach((C,A)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const M=i.measureText(C.text).width,$=l.textAlign(C.textAlign||(C.textAlign=s.textAlign)),R=m+p+M;let I=h.x,B=h.y;l.setWidth(this.width),w?A>0&&I+R+c>this.right&&(B=h.y+=S,h.line++,I=h.x=Ui(a,this.left+c,this.right-r[h.line])):A>0&&B+S>this.bottom&&(I=h.x=I+n[h.line].width+c,h.line++,B=h.y=Ui(a,this.top+k+c,this.bottom-n[h.line].height));const j=l.x(I);if(_(j,B,C),I=d4t($,I+m+p,w?I+R:this.right,e.rtl),x(l.x(I),B,C),w)h.x+=R+c;else if(typeof C.text!="string"){const z=d.lineHeight;h.y+=Uoe(C,z)+c}else h.y+=S}),Aoe(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Qi(n.font),i=io(n.padding);if(!n.display)return;const a=Wm(e.rtl,this.left,this.width),s=this.ctx,o=n.position,l=r.size/2,d=i.top+l;let c,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),c=this.top+d,f=Ui(e.align,f,this.right-p);else{const m=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);c=d+Ui(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const h=Ui(o,f,f+p);s.textAlign=a.textAlign(a6(o)),s.textBaseline="middle",s.strokeStyle=n.color,s.fillStyle=n.color,s.font=r.string,z1(s,n.text,h,c,r)}_computeTitleHeight(){const e=this.options.title,n=Qi(e.font),r=io(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,a;if(dc(e,this.left,this.right)&&dc(n,this.top,this.bottom)){for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(i=a[r],dc(e,i.left,i.left+i.width)&&dc(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!yEt(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=hEt(i,r);i&&!a&&vr(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!a&&vr(n.onHover,[e,r,this],this)}else r&&vr(n.onClick,[e,r,this],this)}}function mEt(t,e,n,r,i){const a=gEt(r,t,e,n),s=vEt(i,r,e.lineHeight);return{itemWidth:a,itemHeight:s}}function gEt(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((a,s)=>a.length>s.length?a:s)),e+n.size/2+r.measureText(i).width}function vEt(t,e,n){let r=t;return typeof e.text!="string"&&(r=Uoe(e,n)),r}function Uoe(t,e){const n=t.text?t.text.length:0;return e*n}function yEt(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Hoe={id:"legend",_element:Qq,start(t,e,n){const r=t.legend=new Qq({ctx:t.ctx,options:n,chart:t});Bs.configure(t,r,n),Bs.addBox(t,r)},stop(t){Bs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Bs.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:a,useBorderRadius:s,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(n?0:void 0),c=io(d.borderWidth);return{text:e[l.index].label,fillStyle:d.backgroundColor,fontColor:a,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:s&&(o||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class qoe extends gd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=ni(r.text)?r.text.length:1;this._padding=io(r.padding);const a=i*Qi(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:a,options:s}=this,o=s.align;let l=0,d,c,f;return this.isHorizontal()?(c=Ui(o,r,a),f=n+e,d=a-r):(s.position==="left"?(c=r+e,f=Ui(o,i,n),l=Gn*-.5):(c=a-e,f=Ui(o,n,i),l=Gn*.5),d=i-n),{titleX:c,titleY:f,maxWidth:d,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Qi(n.font),a=r.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:l,rotation:d}=this._drawArgs(a);z1(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:d,textAlign:a6(n.align),textBaseline:"middle",translation:[s,o]})}}function bEt(t,e){const n=new qoe({ctx:t.ctx,options:e,chart:t});Bs.configure(t,n,e),Bs.addBox(t,n),t.titleBlock=n}var Woe={id:"title",_element:qoe,start(t,e,n){bEt(t,n)},stop(t){const e=t.titleBlock;Bs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Bs.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const My={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,a=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),i+=l.y,++a}}return a===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:i/a}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,a,s,o;for(a=0,s=t.length;a<s;++a){const l=t[a].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),c=gD(e,d);c<i&&(i=c,o=l)}}if(o){const l=o.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function rl(t,e){return e&&(ni(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function gu(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function _Et(t,e){const{element:n,datasetIndex:r,index:i}=e,a=t.getDatasetMeta(r).controller,{label:s,value:o}=a.getLabelAndValue(i);return{chart:t,label:s,parsed:a.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:o,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Jq(t,e){const n=t.chart.ctx,{body:r,footer:i,title:a}=t,{boxWidth:s,boxHeight:o}=e,l=Qi(e.bodyFont),d=Qi(e.titleFont),c=Qi(e.footerFont),f=a.length,p=i.length,h=r.length,m=io(e.padding);let g=m.height,v=0,_=r.reduce((k,S)=>k+S.before.length+S.lines.length+S.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,f&&(g+=f*d.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),_){const k=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;g+=h*k+(_-h)*l.lineHeight+(_-1)*e.bodySpacing}p&&(g+=e.footerMarginTop+p*c.lineHeight+(p-1)*e.footerSpacing);let x=0;const w=function(k){v=Math.max(v,n.measureText(k).width+x)};return n.save(),n.font=d.string,Wn(t.title,w),n.font=l.string,Wn(t.beforeBody.concat(t.afterBody),w),x=e.displayColors?s+2+e.boxPadding:0,Wn(r,k=>{Wn(k.before,w),Wn(k.lines,w),Wn(k.after,w)}),x=0,n.font=c.string,Wn(t.footer,w),n.restore(),v+=m.width,{width:v,height:g}}function xEt(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function wEt(t,e,n,r){const{x:i,width:a}=r,s=n.caretSize+n.caretPadding;if(t==="left"&&i+a+s>e.width||t==="right"&&i-a-s<0)return!0}function kEt(t,e,n,r){const{x:i,width:a}=n,{width:s,chartArea:{left:o,right:l}}=t;let d="center";return r==="center"?d=i<=(o+l)/2?"left":"right":i<=a/2?d="left":i>=s-a/2&&(d="right"),wEt(d,t,e,n)&&(d="center"),d}function eW(t,e,n){const r=n.yAlign||e.yAlign||xEt(t,n);return{xAlign:n.xAlign||e.xAlign||kEt(t,e,n,r),yAlign:r}}function SEt(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function CEt(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function tW(t,e,n,r){const{caretSize:i,caretPadding:a,cornerRadius:s}=t,{xAlign:o,yAlign:l}=n,d=i+a,{topLeft:c,topRight:f,bottomLeft:p,bottomRight:h}=qm(s);let m=SEt(e,o);const g=CEt(e,l,d);return l==="center"?o==="left"?m+=d:o==="right"&&(m-=d):o==="left"?m-=Math.max(c,p)+i:o==="right"&&(m+=Math.max(f,h)+i),{x:Ha(m,0,r.width-e.width),y:Ha(g,0,r.height-e.height)}}function Kx(t,e,n){const r=io(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function nW(t){return rl([],gu(t))}function AEt(t,e,n){return xh(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function rW(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Goe={beforeTitle:uu,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:uu,beforeBody:uu,beforeLabel:uu,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return rr(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:uu,afterBody:uu,beforeFooter:uu,footer:uu,afterFooter:uu};function La(t,e,n,r){const i=t[e].call(n,r);return typeof i=="undefined"?Goe[e].call(n,r):i}class SD extends gd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,a=new Eoe(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=AEt(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=La(r,"beforeTitle",this,e),a=La(r,"title",this,e),s=La(r,"afterTitle",this,e);let o=[];return o=rl(o,gu(i)),o=rl(o,gu(a)),o=rl(o,gu(s)),o}getBeforeBody(e,n){return nW(La(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Wn(e,a=>{const s={before:[],lines:[],after:[]},o=rW(r,a);rl(s.before,gu(La(o,"beforeLabel",this,a))),rl(s.lines,La(o,"label",this,a)),rl(s.after,gu(La(o,"afterLabel",this,a))),i.push(s)}),i}getAfterBody(e,n){return nW(La(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=La(r,"beforeFooter",this,e),a=La(r,"footer",this,e),s=La(r,"afterFooter",this,e);let o=[];return o=rl(o,gu(i)),o=rl(o,gu(a)),o=rl(o,gu(s)),o}_createItems(e){const n=this._active,r=this.chart.data,i=[],a=[],s=[];let o=[],l,d;for(l=0,d=n.length;l<d;++l)o.push(_Et(this.chart,n[l]));return e.filter&&(o=o.filter((c,f,p)=>e.filter(c,f,p,r))),e.itemSort&&(o=o.sort((c,f)=>e.itemSort(c,f,r))),Wn(o,c=>{const f=rW(e.callbacks,c);i.push(La(f,"labelColor",this,c)),a.push(La(f,"labelPointStyle",this,c)),s.push(La(f,"labelTextColor",this,c))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=s,this.dataPoints=o,o}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let a,s=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const o=My[r.position].call(this,i,this._eventPosition);s=this._createItems(r),this.title=this.getTitle(s,r),this.beforeBody=this.getBeforeBody(s,r),this.body=this.getBody(s,r),this.afterBody=this.getAfterBody(s,r),this.footer=this.getFooter(s,r);const l=this._size=Jq(this,r),d=Object.assign({},o,l),c=eW(this.chart,r,d),f=tW(r,d,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,a={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=s,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const a=this.getCaretPosition(e,r,i);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:a}=this,{caretSize:s,cornerRadius:o}=r,{topLeft:l,topRight:d,bottomLeft:c,bottomRight:f}=qm(o),{x:p,y:h}=e,{width:m,height:g}=n;let v,_,x,w,k,S;return a==="center"?(k=h+g/2,i==="left"?(v=p,_=v-s,w=k+s,S=k-s):(v=p+m,_=v+s,w=k-s,S=k+s),x=v):(i==="left"?_=p+Math.max(l,c)+s:i==="right"?_=p+m-Math.max(d,f)-s:_=this.caretX,a==="top"?(w=h,k=w-s,v=_-s,x=_+s):(w=h+g,k=w+s,v=_+s,x=_-s),S=w),{x1:v,x2:_,x3:x,y1:w,y2:k,y3:S}}drawTitle(e,n,r){const i=this.title,a=i.length;let s,o,l;if(a){const d=Wm(r.rtl,this.x,this.width);for(e.x=Kx(this,r.titleAlign,r),n.textAlign=d.textAlign(r.titleAlign),n.textBaseline="middle",s=Qi(r.titleFont),o=r.titleSpacing,n.fillStyle=r.titleColor,n.font=s.string,l=0;l<a;++l)n.fillText(i[l],d.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,l+1===a&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,n,r,i,a){const s=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:d}=a,c=Qi(a.bodyFont),f=Kx(this,"left",a),p=i.x(f),h=l<c.lineHeight?(c.lineHeight-l)/2:0,m=n.y+h;if(a.usePointStyle){const g={radius:Math.min(d,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},v=i.leftForLtr(p,d)+d/2,_=m+l/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,bD(e,g,v,_),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,bD(e,g,v,_)}else{e.lineWidth=Tn(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const g=i.leftForLtr(p,d),v=i.leftForLtr(i.xPlus(p,1),d-2),_=qm(s.borderRadius);Object.values(_).some(x=>x!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,hS(e,{x:g,y:m,w:d,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),hS(e,{x:v,y:m+1,w:d-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(g,m,d,l),e.strokeRect(g,m,d,l),e.fillStyle=s.backgroundColor,e.fillRect(v,m+1,d-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:a,bodyAlign:s,displayColors:o,boxHeight:l,boxWidth:d,boxPadding:c}=r,f=Qi(r.bodyFont);let p=f.lineHeight,h=0;const m=Wm(r.rtl,this.x,this.width),g=function(M){n.fillText(M,m.x(e.x+h),e.y+p/2),e.y+=p+a},v=m.textAlign(s);let _,x,w,k,S,C,A;for(n.textAlign=s,n.textBaseline="middle",n.font=f.string,e.x=Kx(this,v,r),n.fillStyle=r.bodyColor,Wn(this.beforeBody,g),h=o&&v!=="right"?s==="center"?d/2+c:d+2+c:0,k=0,C=i.length;k<C;++k){for(_=i[k],x=this.labelTextColors[k],n.fillStyle=x,Wn(_.before,g),w=_.lines,o&&w.length&&(this._drawColorBox(n,e,k,m,r),p=Math.max(f.lineHeight,l)),S=0,A=w.length;S<A;++S)g(w[S]),p=f.lineHeight;Wn(_.after,g)}h=0,p=f.lineHeight,Wn(this.afterBody,g),e.y-=a}drawFooter(e,n,r){const i=this.footer,a=i.length;let s,o;if(a){const l=Wm(r.rtl,this.x,this.width);for(e.x=Kx(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",s=Qi(r.footerFont),n.fillStyle=r.footerColor,n.font=s.string,o=0;o<a;++o)n.fillText(i[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:a,yAlign:s}=this,{x:o,y:l}=e,{width:d,height:c}=r,{topLeft:f,topRight:p,bottomLeft:h,bottomRight:m}=qm(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(o+f,l),s==="top"&&this.drawCaret(e,n,r,i),n.lineTo(o+d-p,l),n.quadraticCurveTo(o+d,l,o+d,l+p),s==="center"&&a==="right"&&this.drawCaret(e,n,r,i),n.lineTo(o+d,l+c-m),n.quadraticCurveTo(o+d,l+c,o+d-m,l+c),s==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(o+h,l+c),n.quadraticCurveTo(o,l+c,o,l+c-h),s==="center"&&a==="left"&&this.drawCaret(e,n,r,i),n.lineTo(o,l+f),n.quadraticCurveTo(o,l,o+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,a=r&&r.y;if(i||a){const s=My[e.position].call(this,this._active,this._eventPosition);if(!s)return;const o=this._size=Jq(this,e),l=Object.assign({},s,this._size),d=eW(n,e,l),c=tW(e,l,d,n);(i._to!==c.x||a._to!==c.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const s=io(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,i,n),Coe(e,n.textDirection),a.y+=s.top,this.drawTitle(a,e,n),this.drawBody(a,e,n),this.drawFooter(a,e,n),Aoe(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:o,index:l})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[l],index:l}}),a=!dS(r,i),s=this._positionChanged(i,n);(a||s)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],s=this._getActiveElements(e,a,n,r),o=this._positionChanged(s,e),l=n||!dS(s,a)||o;return l&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const s=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&s.reverse(),s}_positionChanged(e,n){const{caretX:r,caretY:i,options:a}=this,s=My[a.position].call(this,e,n);return s!==!1&&(r!==s.x||i!==s.y)}}ct(SD,"positioners",My);var Yoe={id:"tooltip",_element:SD,positioners:My,afterInit(t,e,n){n&&(t.tooltip=new SD({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",je(me({},n),{cancelable:!0}))===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Goe},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const TEt=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function EEt(t,e,n,r){const i=t.indexOf(e);if(i===-1)return TEt(t,e,n,r);const a=t.lastIndexOf(e);return i!==a?n:i}const MEt=(t,e)=>t===null?null:Ha(Math.round(t),0,e);function iW(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class yS extends Zg{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:a}of n)r[i]===a&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(rr(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:EEt(r,e,mn(n,e),this._addedLabels),MEt(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let a=this.getLabels();a=e===0&&n===a.length-1?a:a.slice(e,n+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let s=e;s<=n;s++)i.push({value:s});return i}getLabelForValue(e){return iW.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ct(yS,"id","category"),ct(yS,"defaults",{ticks:{callback:iW}});function $Et(t,e){const n=[],{bounds:i,step:a,min:s,max:o,precision:l,count:d,maxTicks:c,maxDigits:f,includeBounds:p}=t,h=a||1,m=c-1,{min:g,max:v}=e,_=!rr(s),x=!rr(o),w=!rr(d),k=(v-g)/(f+1);let S=sq((v-g)/m/h)*h,C,A,M,$;if(S<1e-14&&!_&&!x)return[{value:g},{value:v}];$=Math.ceil(v/S)-Math.floor(g/S),$>m&&(S=sq($*S/m/h)*h),rr(l)||(C=Math.pow(10,l),S=Math.ceil(S*C)/C),i==="ticks"?(A=Math.floor(g/S)*S,M=Math.ceil(v/S)*S):(A=g,M=v),_&&x&&a&&t4t((o-s)/a,S/1e3)?($=Math.round(Math.min((o-s)/S,c)),S=(o-s)/$,A=s,M=o):w?(A=_?s:A,M=x?o:M,$=d-1,S=(M-A)/$):($=(M-A)/S,x0($,Math.round($),S/1e3)?$=Math.round($):$=Math.ceil($));const R=Math.max(oq(S),oq(A));C=Math.pow(10,rr(l)?R:l),A=Math.round(A*C)/C,M=Math.round(M*C)/C;let I=0;for(_&&(p&&A!==s?(n.push({value:s}),A<s&&I++,x0(Math.round((A+I*S)*C)/C,s,aW(s,k,t))&&I++):A<s&&I++);I<$;++I){const B=Math.round((A+I*S)*C)/C;if(x&&B>o)break;n.push({value:B})}return x&&p&&M!==o?n.length&&x0(n[n.length-1].value,o,aW(o,k,t))?n[n.length-1].value=o:n.push({value:o}):(!x||M===o)&&n.push({value:M}),n}function aW(t,e,{horizontal:n,minRotation:r}){const i=Lu(r),a=(n?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+t).length;return Math.min(e/a,s)}class DEt extends Zg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return rr(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:a}=this;const s=l=>i=n?i:l,o=l=>a=r?a:l;if(e){const l=Dl(i),d=Dl(a);l<0&&d<0?o(0):l>0&&d>0&&s(0)}if(i===a){let l=a===0?1:Math.abs(a*.05);o(a+l),e||s(i-l)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,s=$Et(i,a);return e.bounds==="ticks"&&n4t(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return o6(e,this.chart.options.locale,this.options.ticks.format)}}class bS extends DEt{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ro(e)?e:0,this.max=ro(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Lu(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ct(bS,"id","linear"),ct(bS,"defaults",{ticks:{callback:voe.formatters.numeric}});const CA={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ua=Object.keys(CA);function sW(t,e){return t-e}function oW(t,e){if(rr(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:a}=t._parseOpts;let s=e;return typeof r=="function"&&(s=r(s)),ro(s)||(s=typeof r=="string"?n.parse(s,r):n.parse(s)),s===null?null:(i&&(s=i==="week"&&(pS(a)||a===!0)?n.startOf(s,"isoWeek",a):n.startOf(s,i)),+s)}function lW(t,e,n,r){const i=Ua.length;for(let a=Ua.indexOf(t);a<i-1;++a){const s=CA[Ua[a]],o=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((n-e)/(o*s.size))<=r)return Ua[a]}return Ua[i-1]}function REt(t,e,n,r,i){for(let a=Ua.length-1;a>=Ua.indexOf(n);a--){const s=Ua[a];if(CA[s].common&&t._adapter.diff(i,r,s)>=e-1)return s}return Ua[n?Ua.indexOf(n):0]}function PEt(t){for(let e=Ua.indexOf(t)+1,n=Ua.length;e<n;++e)if(CA[Ua[e]].common)return Ua[e]}function uW(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=i6(n,e),a=n[r]>=e?n[r]:n[i];t[a]=!0}}function IEt(t,e,n,r){const i=t._adapter,a=+i.startOf(e[0].value,r),s=e[e.length-1].value;let o,l;for(o=a;o<=s;o=+i.add(o,1,r))l=n[o],l>=0&&(e[l].major=!0);return e}function dW(t,e,n){const r=[],i={},a=e.length;let s,o;for(s=0;s<a;++s)o=e[s],i[o]=s,r.push({value:o,major:!1});return a===0||!n?r:IEt(t,r,i,n)}class _S extends Zg{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new j3t._date(e.adapters.date);i.init(n),_0(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:oW(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:a,minDefined:s,maxDefined:o}=this.getUserBounds();function l(d){!s&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!o&&!isNaN(d.max)&&(a=Math.max(a,d.max))}(!s||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ro(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),a=ro(a)&&!isNaN(a)?a:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,s=this.max,o=o4t(i,a,s);return this._unit=n.unit||(r.autoSkip?lW(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):REt(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:PEt(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),dW(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?r=a:r=(a-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;n=Ha(n,0,s),r=Ha(r,0,s),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,a=i.time,s=a.unit||lW(a.minUnit,n,r,this._getLabelCapacity(n)),o=mn(i.ticks.stepSize,1),l=s==="week"?a.isoWeekday:!1,d=pS(l)||l===!0,c={};let f=n,p,h;if(d&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,d?"day":s),e.diff(r,n,s)>1e5*o)throw new Error(n+" and "+r+" are too far apart with stepSize of "+o+" "+s);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(p=f,h=0;p<r;p=+e.add(p,o,s),h++)uW(c,p,m);return(p===r||i.bounds==="ticks"||h===1)&&uW(c,p,m),Object.keys(c).sort(sW).map(g=>+g)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,a=this._unit,s=n||i[a];return this._adapter.format(e,s)}_tickFormatFunction(e,n,r,i){const a=this.options,s=a.ticks.callback;if(s)return vr(s,[e,n,r],this);const o=a.time.displayFormats,l=this._unit,d=this._majorUnit,c=l&&o[l],f=d&&o[d],p=r[n],h=d&&f&&p&&p.major;return this._adapter.format(e,i||(h?f:c))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Lu(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:r*a+o*s,h:r*s+o*a}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,a=this._tickFormatFunction(e,0,dW(this,[e],this._majorUnit),i),s=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(oW(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return hoe(e.sort(sW))}}ct(_S,"id","time"),ct(_S,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Xx(t,e,n){let r=0,i=t.length-1,a,s,o,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=vD(t,"pos",e)),{pos:a,time:o}=t[r],{pos:s,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=vD(t,"time",e)),{time:a,pos:o}=t[r],{time:s,pos:l}=t[i]);const d=s-a;return d?o+(l-o)*(e-a)/d:o}class cW extends _S{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Xx(n,this.min),this._tableRange=Xx(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],a=[];let s,o,l,d,c;for(s=0,o=e.length;s<o;++s)d=e[s],d>=n&&d<=r&&i.push(d);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(s=0,o=i.length;s<o;++s)c=i[s+1],l=i[s-1],d=i[s],Math.round((c+l)/2)!==d&&a.push({time:d,pos:s/(o-1)});return a}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Xx(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Xx(this._table,r*this._tableRange+this._minPos,!0)}}ct(cW,"id","timeseries"),ct(cW,"defaults",_S.defaults);const OEt={class:"space-y-6"},LEt={class:"flex items-center justify-between"},VEt={class:"flex items-center space-x-3"},NEt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},jEt={class:"bg-white rounded-lg border border-gray-200 p-6"},FEt={class:"flex items-center justify-between"},BEt={class:"text-3xl font-bold text-gray-900"},zEt={class:"p-3 bg-blue-100 rounded-full"},UEt={class:"mt-4 flex items-center text-sm"},HEt={class:"bg-white rounded-lg border border-gray-200 p-6"},qEt={class:"flex items-center justify-between"},WEt={class:"text-3xl font-bold text-gray-900"},GEt={class:"p-3 bg-yellow-100 rounded-full"},YEt={class:"mt-4 flex items-center text-sm"},KEt={class:"bg-white rounded-lg border border-gray-200 p-6"},XEt={class:"flex items-center justify-between"},ZEt={class:"text-3xl font-bold text-gray-900"},QEt={class:"p-3 bg-green-100 rounded-full"},JEt={class:"mt-4 flex items-center text-sm"},eMt={class:"bg-white rounded-lg border border-gray-200 p-6"},tMt={class:"flex items-center justify-between"},nMt={class:"text-3xl font-bold text-gray-900"},rMt={class:"p-3 bg-red-100 rounded-full"},iMt={class:"mt-4 flex items-center text-sm"},aMt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},sMt={class:"bg-white rounded-lg border border-gray-200 p-6"},oMt={class:"flex items-center justify-between mb-4"},lMt={class:"h-64"},uMt={class:"bg-white rounded-lg border border-gray-200 p-6"},dMt={class:"flex items-center justify-between mb-4"},cMt={class:"h-64"},fMt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},pMt={class:"bg-white rounded-lg border border-gray-200"},hMt={class:"px-6 py-4 border-b border-gray-200"},mMt={class:"flex items-center justify-between"},gMt={class:"divide-y divide-gray-200"},vMt={class:"flex items-start space-x-3"},yMt={class:"flex-shrink-0"},bMt={class:"flex-1 min-w-0"},_Mt={class:"text-sm font-medium text-gray-900"},xMt={class:"text-sm text-gray-500"},wMt={class:"text-xs text-gray-400 mt-1"},kMt={class:"bg-white rounded-lg border border-gray-200"},SMt={class:"px-6 py-4 border-b border-gray-200"},CMt={class:"flex items-center justify-between"},AMt={class:"divide-y divide-gray-200"},TMt={class:"flex items-start space-x-3"},EMt={class:"flex-1 min-w-0"},MMt={class:"text-sm font-medium text-gray-900"},$Mt={class:"text-sm text-gray-500"},DMt={class:"flex items-center space-x-2 mt-1"},RMt={class:"text-xs text-gray-400"},PMt={class:"bg-white rounded-lg border border-gray-200 p-6"},IMt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},OMt={__name:"Dashboard",setup(t){Ja.register(Ty,Yoe,Hoe,yS,bS,S0,Ww,Woe,_D),xn();const e=Bo(),n=wA(),r=Q(!1),i=Q("month"),a=Q(null),s=Q(null),o=[{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Quarter",value:"quarter"},{label:"Year",value:"year"}],l=J(()=>({activeEngagements:e.activeEngagements.length,openFindings:e.findings.filter(k=>k.finding_status==="Open").length,complianceScore:87,overallRisk:"Medium"})),d=J(()=>{const k=e.engagements,S={Planning:0,"In Progress":0,Review:0,Completed:0};return k.forEach(C=>{const A=C.status;A==="planned"?S.Planning++:A==="in_progress"?S["In Progress"]++:A==="under_review"?S.Review++:A==="completed"&&S.Completed++}),{labels:Object.keys(S),datasets:[{data:Object.values(S),backgroundColor:["#3B82F6","#F59E0B","#8B5CF6","#10B981"],borderWidth:1}]}}),c=J(()=>{const k=e.findings,S={Low:0,Medium:0,High:0,Critical:0};return k.forEach(C=>{const A=C.risk_rating;S.hasOwnProperty(A)&&S[A]++}),{labels:Object.keys(S),datasets:[{label:"Risk Count",data:Object.values(S),backgroundColor:["#10B981","#F59E0B","#EF4444","#7C2D12"],borderWidth:1}]}}),f=J(()=>{const k=[];return e.engagements.slice(0,2).forEach(S=>{k.push({id:`engagement-${S.name}`,type:"engagement",title:"Audit engagement updated",description:`${S.engagement_title}`,timestamp:new Date(S.modified)})}),e.findings.slice(0,2).forEach(S=>{k.push({id:`finding-${S.name}`,type:"finding",title:"New finding reported",description:`${S.finding_title}`,timestamp:new Date(S.creation)})}),k.sort((S,C)=>C.timestamp-S.timestamp).slice(0,5)}),p=J(()=>{const k=[];return e.findings.filter(S=>S.target_completion_date).sort((S,C)=>new Date(S.target_completion_date)-new Date(C.target_completion_date)).slice(0,3).forEach(S=>{k.push({id:`finding-${S.name}`,title:`Review finding: ${S.finding_title}`,description:"Complete corrective action review",priority:S.risk_rating==="Critical"||S.risk_rating==="High"?"high":"medium",dueDate:new Date(S.target_completion_date),completed:!1})}),k}),h=()=>le(this,null,function*(){r.value=!0;try{yield e.fetchEngagements(),yield e.fetchFindings(),yield n.fetchDataPeriods()}finally{r.value=!1}}),m=()=>{a.value&&new Ja(a.value,{type:"pie",data:d.value,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!1}}}}),s.value&&new Ja(s.value,{type:"bar",data:c.value,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!0}}}})},g=k=>({engagement:vt,finding:nn,report:cr})[k]||vt,v=k=>({engagement:"bg-blue-500",finding:"bg-yellow-500",report:"bg-green-500"})[k]||"bg-gray-500",_=k=>({low:"secondary",medium:"warning",high:"danger"})[k]||"secondary",x=k=>{k.completed=!k.completed},w=k=>new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return bt(()=>le(this,null,function*(){yield h(),yield ir(),m()})),(k,S)=>(T(),P("div",OEt,[u("div",LEt,[S[6]||(S[6]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Dashboard"),u("p",{class:"text-gray-600 mt-1"}," Overview of audit activities and key metrics ")],-1)),u("div",VEt,[b(y(Ke),{modelValue:i.value,"onUpdate:modelValue":S[0]||(S[0]=C=>i.value=C),options:o,class:"w-32"},null,8,["modelValue"]),b(y(Z),{variant:"outline",onClick:h,loading:r.value},{default:D(()=>[b(y(hn),{class:"h-4 w-4 mr-2"}),S[5]||(S[5]=W(" Refresh ",-1))]),_:1},8,["loading"])])]),u("div",NEt,[u("div",jEt,[u("div",FEt,[u("div",null,[S[7]||(S[7]=u("p",{class:"text-sm font-medium text-gray-600"},"Active Engagements",-1)),u("p",BEt,E(l.value.activeEngagements),1)]),u("div",zEt,[b(y(vt),{class:"h-6 w-6 text-blue-600"})])]),u("div",UEt,[b(y(Cl),{class:"h-4 w-4 text-green-500 mr-1"}),S[8]||(S[8]=u("span",{class:"text-green-600 font-medium"},"+12%",-1)),S[9]||(S[9]=u("span",{class:"text-gray-500 ml-1"},"from last month",-1))])]),u("div",HEt,[u("div",qEt,[u("div",null,[S[10]||(S[10]=u("p",{class:"text-sm font-medium text-gray-600"},"Open Findings",-1)),u("p",WEt,E(l.value.openFindings),1)]),u("div",GEt,[b(y(nn),{class:"h-6 w-6 text-yellow-600"})])]),u("div",YEt,[b(y(Pm),{class:"h-4 w-4 text-red-500 mr-1"}),S[11]||(S[11]=u("span",{class:"text-red-600 font-medium"},"-5%",-1)),S[12]||(S[12]=u("span",{class:"text-gray-500 ml-1"},"from last month",-1))])]),u("div",KEt,[u("div",XEt,[u("div",null,[S[13]||(S[13]=u("p",{class:"text-sm font-medium text-gray-600"},"Compliance Score",-1)),u("p",ZEt,E(l.value.complianceScore)+"%",1)]),u("div",QEt,[b(y(Gt),{class:"h-6 w-6 text-green-600"})])]),u("div",JEt,[b(y(Cl),{class:"h-4 w-4 text-green-500 mr-1"}),S[14]||(S[14]=u("span",{class:"text-green-600 font-medium"},"+2%",-1)),S[15]||(S[15]=u("span",{class:"text-gray-500 ml-1"},"from last month",-1))])]),u("div",eMt,[u("div",tMt,[u("div",null,[S[16]||(S[16]=u("p",{class:"text-sm font-medium text-gray-600"},"Overall Risk",-1)),u("p",nMt,E(l.value.overallRisk),1)]),u("div",rMt,[b(y(zr),{class:"h-6 w-6 text-red-600"})])]),u("div",iMt,[b(y(ufe),{class:"h-4 w-4 text-gray-500 mr-1"}),S[17]||(S[17]=u("span",{class:"text-gray-600 font-medium"},"No change",-1)),S[18]||(S[18]=u("span",{class:"text-gray-500 ml-1"},"from last month",-1))])])]),u("div",aMt,[u("div",sMt,[u("div",oMt,[S[19]||(S[19]=u("h3",{class:"text-lg font-medium text-gray-900"},"Audit Status Overview",-1)),b(y(Z),{variant:"ghost",size:"sm"},{default:D(()=>[b(y(O0),{class:"h-4 w-4"})]),_:1})]),u("div",lMt,[u("canvas",{ref_key:"auditStatusChartRef",ref:a,class:"w-full h-full"},null,512)])]),u("div",uMt,[u("div",dMt,[S[20]||(S[20]=u("h3",{class:"text-lg font-medium text-gray-900"},"Risk Distribution",-1)),b(y(Z),{variant:"ghost",size:"sm"},{default:D(()=>[b(y(O0),{class:"h-4 w-4"})]),_:1})]),u("div",cMt,[u("canvas",{ref_key:"riskDistributionChartRef",ref:s,class:"w-full h-full"},null,512)])])]),u("div",fMt,[u("div",pMt,[u("div",hMt,[u("div",mMt,[S[22]||(S[22]=u("h3",{class:"text-lg font-medium text-gray-900"},"Recent Activities",-1)),b(y(Z),{variant:"ghost",size:"sm"},{default:D(()=>[...S[21]||(S[21]=[W(" View All ",-1)])]),_:1})])]),u("div",gMt,[(T(!0),P(_e,null,we(f.value,C=>(T(),P("div",{key:C.id,class:"px-6 py-4 hover:bg-gray-50"},[u("div",vMt,[u("div",yMt,[u("div",{class:fe(["w-8 h-8 rounded-full flex items-center justify-center",v(C.type)])},[(T(),he(Lt(g(C.type)),{class:"h-4 w-4 text-white"}))],2)]),u("div",bMt,[u("p",_Mt,E(C.title),1),u("p",xMt,E(C.description),1),u("p",wMt,E(w(C.timestamp)),1)])])]))),128))])]),u("div",kMt,[u("div",SMt,[u("div",CMt,[S[24]||(S[24]=u("h3",{class:"text-lg font-medium text-gray-900"},"Upcoming Tasks",-1)),b(y(Z),{variant:"ghost",size:"sm"},{default:D(()=>[...S[23]||(S[23]=[W(" View All ",-1)])]),_:1})])]),u("div",AMt,[(T(!0),P(_e,null,we(p.value,C=>(T(),P("div",{key:C.id,class:"px-6 py-4 hover:bg-gray-50"},[u("div",TMt,[b(y(Ut),{checked:C.completed,onChange:A=>x(C),class:"mt-0.5"},null,8,["checked","onChange"]),u("div",EMt,[u("p",MMt,E(C.title),1),u("p",$Mt,E(C.description),1),u("div",DMt,[b(y(Ee),{variant:_(C.priority),size:"sm"},{default:D(()=>[W(E(C.priority),1)]),_:2},1032,["variant"]),u("span",RMt," Due "+E(w(C.dueDate)),1)])])])]))),128))])])]),u("div",PMt,[S[29]||(S[29]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Quick Actions",-1)),u("div",IMt,[b(y(Z),{variant:"outline",class:"h-20 flex flex-col items-center justify-center space-y-2",onClick:S[1]||(S[1]=C=>k.$router.push("/engagements/new"))},{default:D(()=>[b(y(tt),{class:"h-6 w-6"}),S[25]||(S[25]=u("span",{class:"text-sm"},"New Engagement",-1))]),_:1}),b(y(Z),{variant:"outline",class:"h-20 flex flex-col items-center justify-center space-y-2",onClick:S[2]||(S[2]=C=>k.$router.push("/findings"))},{default:D(()=>[b(y(Rn),{class:"h-6 w-6"}),S[26]||(S[26]=u("span",{class:"text-sm"},"Review Findings",-1))]),_:1}),b(y(Z),{variant:"outline",class:"h-20 flex flex-col items-center justify-center space-y-2",onClick:S[3]||(S[3]=C=>k.$router.push("/reports"))},{default:D(()=>[b(y(cr),{class:"h-6 w-6"}),S[27]||(S[27]=u("span",{class:"text-sm"},"Generate Report",-1))]),_:1}),b(y(Z),{variant:"outline",class:"h-20 flex flex-col items-center justify-center space-y-2",onClick:S[4]||(S[4]=C=>k.$router.push("/compliance"))},{default:D(()=>[b(y(SY),{class:"h-6 w-6"}),S[28]||(S[28]=u("span",{class:"text-sm"},"Compliance Check",-1))]),_:1})])])]))}},LMt={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},VMt={class:"bg-white rounded-lg border border-gray-200 p-6"},NMt={class:"flex items-center"},jMt={class:"p-2 bg-blue-100 rounded-lg"},FMt={class:"ml-4"},BMt={class:"text-2xl font-bold text-gray-900"},zMt={class:"bg-white rounded-lg border border-gray-200 p-6"},UMt={class:"flex items-center"},HMt={class:"p-2 bg-green-100 rounded-lg"},qMt={class:"ml-4"},WMt={class:"text-2xl font-bold text-gray-900"},GMt={class:"bg-white rounded-lg border border-gray-200 p-6"},YMt={class:"flex items-center"},KMt={class:"p-2 bg-purple-100 rounded-lg"},XMt={class:"ml-4"},ZMt={class:"text-2xl font-bold text-gray-900"},QMt={class:"bg-white rounded-lg border border-gray-200 p-6"},JMt={class:"flex items-center"},e$t={class:"p-2 bg-orange-100 rounded-lg"},t$t={class:"ml-4"},n$t={class:"text-2xl font-bold text-gray-900"},r$t={__name:"DataAnalyticsStats",props:{dashboards:{type:Array,default:()=>[]},dashboardCharts:{type:Array,default:()=>[]},dashboardDataSources:{type:Array,default:()=>[]}},setup(t){const e=t,n=J(()=>e.dashboards.length),r=J(()=>e.dashboards.filter(s=>s.is_active).length),i=J(()=>e.dashboardCharts.length),a=J(()=>e.dashboardDataSources.length);return(s,o)=>(T(),P("div",LMt,[u("div",VMt,[u("div",NMt,[u("div",jMt,[b(y(cr),{class:"h-6 w-6 text-blue-600"})]),u("div",FMt,[o[0]||(o[0]=u("p",{class:"text-sm font-medium text-gray-600"},"Total Dashboards",-1)),u("p",BMt,E(n.value),1)])])]),u("div",zMt,[u("div",UMt,[u("div",HMt,[b(y(Gt),{class:"h-6 w-6 text-green-600"})]),u("div",qMt,[o[1]||(o[1]=u("p",{class:"text-sm font-medium text-gray-600"},"Active Dashboards",-1)),u("p",WMt,E(r.value),1)])])]),u("div",GMt,[u("div",YMt,[u("div",KMt,[b(y(qce),{class:"h-6 w-6 text-purple-600"})]),u("div",XMt,[o[2]||(o[2]=u("p",{class:"text-sm font-medium text-gray-600"},"Total Charts",-1)),u("p",ZMt,E(i.value),1)])])]),u("div",QMt,[u("div",JMt,[u("div",e$t,[b(y(ri),{class:"h-6 w-6 text-orange-600"})]),u("div",t$t,[o[3]||(o[3]=u("p",{class:"text-sm font-medium text-gray-600"},"Data Sources",-1)),u("p",n$t,E(a.value),1)])])])]))}},i$t={class:"space-y-6"},a$t={class:"flex items-center justify-between"},s$t={class:"flex items-center space-x-3"},o$t={class:"bg-white rounded-lg border border-gray-200"},l$t={class:"border-b border-gray-200"},u$t={class:"flex"},d$t={class:"p-6"},c$t={key:0},f$t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},p$t={class:"flex flex-col items-center justify-center h-full"},h$t=["onClick"],m$t={class:"flex items-start justify-between mb-4"},g$t={class:"flex-1"},v$t={class:"text-lg font-medium text-gray-900 mb-1"},y$t={class:"text-sm text-gray-600 mb-2"},b$t={class:"flex items-center space-x-2"},_$t={class:"flex items-center justify-between text-sm text-gray-500"},x$t={key:1},w$t={class:"flex items-center justify-between mb-6"},k$t={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center"},S$t={key:2},C$t={class:"flex items-center justify-between mb-6"},A$t={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center"},T$t={__name:"DataAnalytics",setup(t){const e=xn(),n=wA(),r=Q("dashboards"),i=Q(!1),a=()=>le(this,null,function*(){i.value=!0;try{yield Promise.all([n.fetchDashboards()])}catch(h){console.error("Error loading data analytics:",h)}finally{i.value=!1}}),s=h=>({Private:"secondary",Public:"success",Shared:"info"})[h]||"secondary",o=h=>h?new Date(h).toLocaleDateString():"Never",l=()=>{e.push("/data-analytics/dashboard/new")},d=h=>{e.push(`/data-analytics/dashboard/${h.name}`)},c=h=>{e.push(`/data-analytics/dashboard/${h.name}/edit`)},f=()=>{e.push("/data-analytics/chart/new")},p=()=>{e.push("/data-analytics/data-source/new")};return bt(()=>le(this,null,function*(){yield a()})),(h,m)=>(T(),P("div",i$t,[u("div",a$t,[m[5]||(m[5]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Data Analytics"),u("p",{class:"text-gray-600 mt-1"}," Create and manage data analytics dashboards and visualizations ")],-1)),u("div",s$t,[b(y(Z),{variant:"outline"},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),m[3]||(m[3]=W(" Export ",-1))]),_:1}),b(y(Z),{onClick:l},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),m[4]||(m[4]=W(" New Dashboard ",-1))]),_:1})])]),u("div",o$t,[u("div",l$t,[u("nav",u$t,[u("button",{onClick:m[0]||(m[0]=g=>r.value="dashboards"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="dashboards"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Dashboards ",2),u("button",{onClick:m[1]||(m[1]=g=>r.value="charts"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="charts"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Charts ",2),u("button",{onClick:m[2]||(m[2]=g=>r.value="data-sources"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="data-sources"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Data Sources ",2)])]),u("div",d$t,[r.value==="dashboards"?(T(),P("div",c$t,[u("div",f$t,[u("div",{class:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-400 hover:bg-blue-50 cursor-pointer transition-colors",onClick:l},[u("div",p$t,[b(y(tt),{class:"h-12 w-12 text-gray-400 mb-4"}),m[6]||(m[6]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Create New Dashboard",-1)),m[7]||(m[7]=u("p",{class:"text-sm text-gray-600 text-center"}," Build a custom dashboard with charts and visualizations ",-1))])]),(T(!0),P(_e,null,we(y(n).dashboards,g=>(T(),P("div",{key:g.name,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:v=>d(g)},[u("div",m$t,[u("div",g$t,[u("h3",v$t,E(g.dashboard_name),1),u("p",y$t,E(g.description||"No description"),1),u("div",b$t,[b(y(Ee),{variant:s(g.dashboard_type)},{default:D(()=>[W(E(g.dashboard_type),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:g.is_active?"success":"secondary"},{default:D(()=>[W(E(g.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])])]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(v=>c(g),["stop"])},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",_$t,[u("span",null,"Modified "+E(o(g.modified)),1),u("span",null,E(g.total_views||0)+" views",1)])],8,h$t))),128))])])):ie("",!0),r.value==="charts"?(T(),P("div",x$t,[u("div",w$t,[m[9]||(m[9]=u("h2",{class:"text-lg font-medium text-gray-900"},"Chart Library",-1)),b(y(Z),{onClick:f},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),m[8]||(m[8]=W(" New Chart ",-1))]),_:1})]),u("div",k$t,[b(y(cr),{class:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),m[10]||(m[10]=u("h3",{class:"text-lg font-medium text-yellow-800 mb-2"},"Charts Feature Restricted",-1)),m[11]||(m[11]=u("p",{class:"text-yellow-700"}," The chart library is currently not available due to permission restrictions. Please contact your administrator for access to advanced analytics features. ",-1))])])):ie("",!0),r.value==="data-sources"?(T(),P("div",S$t,[u("div",C$t,[m[13]||(m[13]=u("h2",{class:"text-lg font-medium text-gray-900"},"Data Sources",-1)),b(y(Z),{onClick:p},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),m[12]||(m[12]=W(" New Data Source ",-1))]),_:1})]),u("div",A$t,[b(y(ri),{class:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),m[14]||(m[14]=u("h3",{class:"text-lg font-medium text-yellow-800 mb-2"},"Data Sources Feature Restricted",-1)),m[15]||(m[15]=u("p",{class:"text-yellow-700"}," The data sources management is currently not available due to permission restrictions. Please contact your administrator for access to advanced data management features. ",-1))])])):ie("",!0)])]),b(r$t,{dashboards:y(n).dashboards,"dashboard-charts":[],"dashboard-data-sources":[]},null,8,["dashboards"])]))}},E$t={class:"flex h-[65vh]"},M$t={class:"w-52 border-r bg-gray-50 p-4 flex flex-col"},$$t={class:"space-y-1 flex-1"},D$t=["onClick"],R$t={class:"text-sm"},P$t={class:"mt-4 pt-4 border-t"},I$t={class:"text-xs text-gray-500 mb-2"},O$t={class:"w-full bg-gray-200 rounded-full h-2"},L$t={class:"flex-1 flex flex-col overflow-hidden"},V$t={class:"flex-1 overflow-y-auto p-6"},N$t={class:"space-y-4"},j$t={class:"grid grid-cols-2 gap-4"},F$t={class:"grid grid-cols-3 gap-4"},B$t={class:"grid grid-cols-2 gap-4"},z$t={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},U$t={class:"flex items-center gap-2"},H$t={class:"text-sm text-blue-700"},q$t={class:"space-y-4"},W$t={class:"grid grid-cols-2 gap-4"},G$t={class:"p-4 bg-white rounded-lg border"},Y$t={class:"flex items-center justify-between mb-3"},K$t={class:"w-full bg-gray-200 rounded-full h-3"},X$t={class:"p-4 bg-white rounded-lg border"},Z$t={class:"flex items-center justify-between mb-3"},Q$t={class:"w-full bg-gray-200 rounded-full h-3"},J$t={class:"mt-6"},eDt={class:"flex items-center justify-between mb-3"},tDt={class:"border rounded-lg overflow-hidden"},nDt={class:"min-w-full divide-y divide-gray-200"},rDt={class:"bg-white divide-y divide-gray-200"},iDt={class:"px-4 py-2"},aDt={class:"px-4 py-2"},sDt={class:"px-4 py-2"},oDt={class:"px-4 py-2"},lDt={class:"px-4 py-2"},uDt={key:0},dDt={class:"space-y-4"},cDt={class:"grid grid-cols-2 gap-4"},fDt={class:"grid grid-cols-2 gap-4"},pDt={class:"mt-6 bg-gray-50 rounded-lg p-4"},hDt={class:"flex flex-wrap gap-3"},mDt={class:"border-t bg-gray-50 px-6 py-4 flex items-center justify-between"},gDt={class:"flex items-center gap-2"},vDt={__name:"DataPeriodForm",props:{show:{type:Boolean,default:!1},period:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.show,set:N=>r("update:show",N)}),a=J(()=>{var N;return!!((N=n.period)!=null&&N.name)}),s=Q(!1),o=Q(0),l=[{id:"details",title:"Period Details",icon:zL,description:"Define period identification and dates"},{id:"quality",title:"Data Quality",icon:cr,description:"Track data completeness and imports"},{id:"approval",title:"Approval & Lock",icon:Ku,description:"Manage period approval and archiving"}],d=Jt({period_id:"",period_name:"",period_type:"",fiscal_year:"",start_date:"",end_date:"",status:"Open",data_completeness_score:0,data_quality_score:0,reconciliation_status:"",import_checklist:[],approved_by:"",approval_date:"",lock_date:"",archive_date:"",notes:""}),c=[{label:"Month",value:"Month"},{label:"Quarter",value:"Quarter"},{label:"Half-Year",value:"Half-Year"},{label:"Year",value:"Year"},{label:"Custom",value:"Custom"}],f=[{label:"Open",value:"Open"},{label:"Locked",value:"Locked"},{label:"Closed",value:"Closed"},{label:"Archived",value:"Archived"}],p=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Issues Found",value:"Issues Found"}],h=[{label:"Pending",value:"Pending"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Failed",value:"Failed"}];Je(()=>n.period,N=>{N?Object.keys(d).forEach(O=>{N[O]!==void 0&&(d[O]=N[O])}):z()},{immediate:!0});const m=J(()=>{if(!d.start_date||!d.end_date)return 0;const N=new Date(d.start_date),O=new Date(d.end_date);return Math.ceil((O-N)/(1e3*60*60*24))+1}),g=J(()=>[!!(d.period_id&&d.period_name&&d.start_date&&d.end_date),!0,!0]),v=J(()=>g.value.filter(Boolean).length),_=J(()=>Math.round(v.value/l.length*100));function x(N){return g.value[N]}function w(N){return o.value===N?"text-blue-600":x(N)?"text-green-500":"text-gray-400"}function k(N){o.value=N}function S(){o.value<l.length-1&&o.value++}function C(){o.value>0&&o.value--}function A(N){return N>=80?"green":N>=60?"orange":N>=40?"yellow":"red"}function M(N){return N>=80?"bg-green-500":N>=60?"bg-yellow-500":N>=40?"bg-orange-500":"bg-red-500"}function $(){d.import_checklist.push({import_type:"",status:"Pending",record_count:0,imported_date:""})}function R(N){d.import_checklist.splice(N,1)}function I(){d.status="Locked",d.lock_date=new Date().toISOString().split("T")[0]}function B(){d.status="Open",d.lock_date=""}function j(){d.status="Archived",d.archive_date=new Date().toISOString().split("T")[0]}function z(){Object.keys(d).forEach(N=>{Array.isArray(d[N])?d[N]=[]:typeof d[N]=="number"?d[N]=0:d[N]=""}),d.status="Open",o.value=0}function F(){r("update:show",!1),z()}function q(){return le(this,null,function*(){s.value=!0;try{console.log("Saving period:",d),r("saved",me({},d)),F()}catch(N){console.error("Error saving period:",N)}finally{s.value=!1}})}return(N,O)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":O[13]||(O[13]=V=>i.value=V),options:{title:a.value?"Edit Data Period":"Create Data Period",size:"5xl"}},{"body-content":D(()=>{var V,L,U,G;return[u("div",E$t,[u("div",M$t,[u("div",$$t,[(T(),P(_e,null,we(l,(X,re)=>u("button",{key:X.id,onClick:ee=>k(re),class:fe(["w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors",o.value===re?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"])},[(T(),he(Lt(X.icon),{class:fe(["h-4 w-4",w(re)])},null,8,["class"])),u("span",R$t,E(X.title),1),x(re)?(T(),he(y(Qs),{key:0,class:"h-4 w-4 ml-auto text-green-500"})):ie("",!0)],10,D$t)),64))]),u("div",P$t,[u("div",I$t," Progress: "+E(v.value)+"/"+E(l.length)+" sections ",1),u("div",O$t,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:nt({width:`${_.value}%`})},null,4)])])]),u("div",L$t,[b(Rt,{icon:(V=l[o.value])==null?void 0:V.icon,title:(L=l[o.value])==null?void 0:L.title,description:(U=l[o.value])==null?void 0:U.description},null,8,["icon","title","description"]),u("div",V$t,[xe(u("div",N$t,[u("div",j$t,[b(y(ge),{modelValue:d.period_id,"onUpdate:modelValue":O[0]||(O[0]=X=>d.period_id=X),label:"Period ID *",type:"text",placeholder:"e.g., 2025-Q1"},null,8,["modelValue"]),b(y(ge),{modelValue:d.period_name,"onUpdate:modelValue":O[1]||(O[1]=X=>d.period_name=X),label:"Period Name *",type:"text",placeholder:"e.g., Q1 2025"},null,8,["modelValue"])]),u("div",F$t,[u("div",null,[O[14]||(O[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Period Type",-1)),b(y(Ke),{modelValue:d.period_type,"onUpdate:modelValue":O[2]||(O[2]=X=>d.period_type=X),options:c,placeholder:"Select type"},null,8,["modelValue"])]),u("div",null,[O[15]||(O[15]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fiscal Year",-1)),b(At,{modelValue:d.fiscal_year,"onUpdate:modelValue":O[3]||(O[3]=X=>d.fiscal_year=X),doctype:"Fiscal Year",placeholder:"Select fiscal year"},null,8,["modelValue"])]),u("div",null,[O[16]||(O[16]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(y(Ke),{modelValue:d.status,"onUpdate:modelValue":O[4]||(O[4]=X=>d.status=X),options:f,placeholder:"Select status"},null,8,["modelValue"])])]),u("div",B$t,[b(y(ge),{modelValue:d.start_date,"onUpdate:modelValue":O[5]||(O[5]=X=>d.start_date=X),label:"Start Date *",type:"date"},null,8,["modelValue"]),b(y(ge),{modelValue:d.end_date,"onUpdate:modelValue":O[6]||(O[6]=X=>d.end_date=X),label:"End Date *",type:"date"},null,8,["modelValue"])]),d.start_date&&d.end_date?(T(),P("div",z$t,[u("div",U$t,[b(y(zL),{class:"h-5 w-5 text-blue-600"}),u("span",H$t,[O[17]||(O[17]=W(" Period Duration: ",-1)),u("strong",null,E(m.value)+" days",1)])])])):ie("",!0)],512),[[ot,o.value===0]]),xe(u("div",q$t,[u("div",W$t,[u("div",G$t,[u("div",Y$t,[O[18]||(O[18]=u("span",{class:"text-sm font-medium text-gray-700"},"Data Completeness",-1)),b(y(Ee),{theme:A(d.data_completeness_score)},{default:D(()=>[W(E(d.data_completeness_score||0)+"% ",1)]),_:1},8,["theme"])]),u("div",K$t,[u("div",{class:fe(["h-3 rounded-full transition-all",M(d.data_completeness_score)]),style:nt({width:`${d.data_completeness_score||0}%`})},null,6)])]),u("div",X$t,[u("div",Z$t,[O[19]||(O[19]=u("span",{class:"text-sm font-medium text-gray-700"},"Data Quality",-1)),b(y(Ee),{theme:A(d.data_quality_score)},{default:D(()=>[W(E(d.data_quality_score||0)+"% ",1)]),_:1},8,["theme"])]),u("div",Q$t,[u("div",{class:fe(["h-3 rounded-full transition-all",M(d.data_quality_score)]),style:nt({width:`${d.data_quality_score||0}%`})},null,6)])])]),u("div",null,[O[20]||(O[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reconciliation Status",-1)),b(y(Ke),{modelValue:d.reconciliation_status,"onUpdate:modelValue":O[7]||(O[7]=X=>d.reconciliation_status=X),options:p,placeholder:"Select status"},null,8,["modelValue"])]),u("div",J$t,[u("div",eDt,[O[22]||(O[22]=u("h4",{class:"text-sm font-medium text-gray-700"},"Import Checklist",-1)),b(y(Z),{size:"sm",onClick:$},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[O[21]||(O[21]=W(" Add Item ",-1))]),_:1})]),u("div",tDt,[u("table",nDt,[O[24]||(O[24]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Import Type"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Status"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Records"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Imported Date"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",rDt,[(T(!0),P(_e,null,we(d.import_checklist,(X,re)=>(T(),P("tr",{key:re},[u("td",iDt,[b(y(ge),{modelValue:X.import_type,"onUpdate:modelValue":ee=>X.import_type=ee,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",aDt,[b(y(Ke),{modelValue:X.status,"onUpdate:modelValue":ee=>X.status=ee,options:h,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",sDt,[b(y(ge),{modelValue:X.record_count,"onUpdate:modelValue":ee=>X.record_count=ee,type:"number",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",oDt,[b(y(ge),{modelValue:X.imported_date,"onUpdate:modelValue":ee=>X.imported_date=ee,type:"date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",lDt,[b(y(Z),{variant:"ghost",size:"sm",onClick:ee=>R(re)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(G=d.import_checklist)!=null&&G.length?ie("",!0):(T(),P("tr",uDt,[...O[23]||(O[23]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No import checklist items. Click "Add Item" to add one. ',-1)])]))])])])])],512),[[ot,o.value===1]]),xe(u("div",dDt,[u("div",cDt,[u("div",null,[O[25]||(O[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved By",-1)),b(At,{modelValue:d.approved_by,"onUpdate:modelValue":O[8]||(O[8]=X=>d.approved_by=X),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])]),b(y(ge),{modelValue:d.approval_date,"onUpdate:modelValue":O[9]||(O[9]=X=>d.approval_date=X),label:"Approval Date",type:"datetime-local"},null,8,["modelValue"])]),u("div",fDt,[b(y(ge),{modelValue:d.lock_date,"onUpdate:modelValue":O[10]||(O[10]=X=>d.lock_date=X),label:"Lock Date",type:"date"},null,8,["modelValue"]),b(y(ge),{modelValue:d.archive_date,"onUpdate:modelValue":O[11]||(O[11]=X=>d.archive_date=X),label:"Archive Date",type:"date"},null,8,["modelValue"])]),u("div",pDt,[O[29]||(O[29]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Period Actions",-1)),u("div",hDt,[b(y(Z),{variant:"outline",onClick:I,disabled:d.status==="Locked"||d.status==="Archived"},{prefix:D(()=>[b(y(xY),{class:"h-4 w-4"})]),default:D(()=>[O[26]||(O[26]=W(" Lock Period ",-1))]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",onClick:B,disabled:d.status!=="Locked"},{prefix:D(()=>[b(y(_Y),{class:"h-4 w-4"})]),default:D(()=>[O[27]||(O[27]=W(" Unlock Period ",-1))]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",theme:"orange",onClick:j,disabled:d.status==="Archived"},{prefix:D(()=>[b(y(UD),{class:"h-4 w-4"})]),default:D(()=>[O[28]||(O[28]=W(" Archive Period ",-1))]),_:1},8,["disabled"])])]),u("div",null,[O[30]||(O[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),b(y(an),{modelValue:d.notes,"onUpdate:modelValue":O[12]||(O[12]=X=>d.notes=X),content:d.notes,placeholder:"Additional notes about this period...","editor-class":"prose-sm max-w-none min-h-[120px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[ot,o.value===2]])]),u("div",mDt,[b(y(Z),{variant:"outline",onClick:C,disabled:o.value===0},{prefix:D(()=>[b(y(pr),{class:"h-4 w-4"})]),default:D(()=>[O[31]||(O[31]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",gDt,[b(y(Z),{variant:"outline",onClick:F},{default:D(()=>[...O[32]||(O[32]=[W("Cancel",-1)])]),_:1}),o.value<l.length-1?(T(),he(y(Z),{key:0,variant:"solid",onClick:S},{suffix:D(()=>[b(y(tr),{class:"h-4 w-4"})]),default:D(()=>[O[33]||(O[33]=W(" Next ",-1))]),_:1})):(T(),he(y(Z),{key:1,variant:"solid",theme:"green",onClick:q,loading:s.value},{prefix:D(()=>[b(y(Cr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+E(a.value?"Update Period":"Create Period"),1)]),_:1},8,["loading"]))])])])])]}),_:1},8,["modelValue","options"]))}},yDt={class:"bg-white rounded-xl border p-4"},bDt={class:"flex flex-wrap items-center gap-4"},_Dt={class:"flex-1 min-w-[200px] max-w-md"},xDt={class:"w-36"},wDt={class:"w-40"},kDt={class:"w-32"},SDt={class:"w-40"},CDt={class:"flex items-center gap-2 ml-auto"},ADt={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},TDt={__name:"PeriodFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,i=Jt({search:"",periodType:"",fiscalYear:"",status:"",reconciliation:""});Je(()=>n.filters,p=>{p&&Object.assign(i,p)},{immediate:!0,deep:!0});const a=[{label:"All Types",value:""},{label:"Month",value:"Month"},{label:"Quarter",value:"Quarter"},{label:"Half-Year",value:"Half-Year"},{label:"Year",value:"Year"},{label:"Custom",value:"Custom"}],s=[{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Locked",value:"Locked"},{label:"Closed",value:"Closed"},{label:"Archived",value:"Archived"}],o=[{label:"All",value:""},{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Issues Found",value:"Issues Found"}],l=J(()=>Object.values(i).some(p=>p!==""));function d(){r("update:filters",me({},i))}function c(p){i[p]="",d()}function f(){Object.keys(i).forEach(p=>{i[p]=""}),d()}return(p,h)=>(T(),P("div",yDt,[u("div",bDt,[u("div",_Dt,[b(y(ge),{modelValue:i.search,"onUpdate:modelValue":[h[0]||(h[0]=m=>i.search=m),d],type:"text",placeholder:"Search by period name or ID...",debounce:300},{prefix:D(()=>[b(y(Rn),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",xDt,[b(y(Ke),{modelValue:i.periodType,"onUpdate:modelValue":[h[1]||(h[1]=m=>i.periodType=m),d],options:a,placeholder:"All Types"},null,8,["modelValue"])]),u("div",wDt,[b(At,{modelValue:i.fiscalYear,"onUpdate:modelValue":[h[2]||(h[2]=m=>i.fiscalYear=m),d],doctype:"Fiscal Year",placeholder:"All Years"},null,8,["modelValue"])]),u("div",kDt,[b(y(Ke),{modelValue:i.status,"onUpdate:modelValue":[h[3]||(h[3]=m=>i.status=m),d],options:s,placeholder:"All Status"},null,8,["modelValue"])]),u("div",SDt,[b(y(Ke),{modelValue:i.reconciliation,"onUpdate:modelValue":[h[4]||(h[4]=m=>i.reconciliation=m),d],options:o,placeholder:"All Reconciliation"},null,8,["modelValue"])]),u("div",CDt,[l.value?(T(),he(y(Z),{key:0,variant:"outline",onClick:f},{prefix:D(()=>[b(y(ht),{class:"h-4 w-4"})]),default:D(()=>[h[12]||(h[12]=W(" Clear ",-1))]),_:1})):ie("",!0),b(y(Z),{variant:"outline",onClick:h[5]||(h[5]=m=>p.$emit("refresh"))},{prefix:D(()=>[b(y(hn),{class:"h-4 w-4"})]),default:D(()=>[h[13]||(h[13]=W(" Refresh ",-1))]),_:1}),b(y(Z),{variant:"solid",onClick:h[6]||(h[6]=m=>p.$emit("create"))},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[h[14]||(h[14]=W(" New Period ",-1))]),_:1})])]),l.value?(T(),P("div",ADt,[h[15]||(h[15]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),i.search?(T(),he(y(Ee),{key:0,theme:"blue",class:"cursor-pointer",onClick:h[7]||(h[7]=m=>c("search"))},{default:D(()=>[W(' Search: "'+E(i.search)+'" ',1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.periodType?(T(),he(y(Ee),{key:1,theme:"purple",class:"cursor-pointer",onClick:h[8]||(h[8]=m=>c("periodType"))},{default:D(()=>[W(" Type: "+E(i.periodType)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.fiscalYear?(T(),he(y(Ee),{key:2,theme:"indigo",class:"cursor-pointer",onClick:h[9]||(h[9]=m=>c("fiscalYear"))},{default:D(()=>[W(" Year: "+E(i.fiscalYear)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.status?(T(),he(y(Ee),{key:3,theme:"green",class:"cursor-pointer",onClick:h[10]||(h[10]=m=>c("status"))},{default:D(()=>[W(" Status: "+E(i.status)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.reconciliation?(T(),he(y(Ee),{key:4,theme:"orange",class:"cursor-pointer",onClick:h[11]||(h[11]=m=>c("reconciliation"))},{default:D(()=>[W(" Reconciliation: "+E(i.reconciliation)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0)])):ie("",!0)]))}},EDt={class:"space-y-4"},MDt={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4"},$Dt=["onClick"],DDt={class:"flex items-center gap-3"},RDt={class:"text-2xl font-bold text-gray-900"},PDt={class:"text-xs text-gray-500"},IDt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ODt={class:"bg-white rounded-xl border p-4"},LDt={class:"space-y-3"},VDt=["onClick"],NDt={class:"flex-1 text-sm text-gray-600"},jDt={class:"text-sm font-medium text-gray-700"},FDt={class:"bg-white rounded-xl border p-4"},BDt={class:"flex items-center justify-center"},zDt={class:"relative h-32 w-32"},UDt={viewBox:"0 0 36 36",class:"transform -rotate-90"},HDt=["stroke","stroke-dasharray"],qDt={class:"absolute inset-0 flex flex-col items-center justify-center"},WDt={class:"text-2xl font-bold text-gray-900"},GDt={class:"flex justify-center gap-4 mt-4 text-xs"},YDt={class:"flex items-center gap-1"},KDt={class:"text-gray-500"},XDt={class:"bg-white rounded-xl border p-4"},ZDt={class:"space-y-3"},QDt=["onClick"],JDt={class:"flex-1 text-sm text-gray-600"},eRt={class:"bg-white rounded-xl border p-4"},tRt={class:"flex items-center gap-2 overflow-x-auto pb-2"},nRt=["onClick"],rRt={class:"flex items-center justify-between mb-2"},iRt={class:"text-xs text-gray-500"},aRt={class:"text-sm font-medium text-gray-800"},sRt={class:"text-xs text-gray-500 mt-1"},oRt={class:"mt-2 flex items-center gap-2"},lRt={class:"flex-1 bg-gray-200 rounded-full h-1.5"},uRt={class:"text-xs text-gray-500"},dRt={key:0,class:"text-sm text-gray-500 py-4"},cRt={__name:"PeriodStats",props:{periods:{type:Array,default:()=>[]},activeFilter:{type:String,default:""}},emits:["filter","select"],setup(t){const e=t,n=J(()=>{const p=e.periods,h=p.length,m=p.filter(x=>x.status==="Open").length,g=p.filter(x=>x.status==="Locked").length,v=p.filter(x=>x.status==="Closed").length,_=p.filter(x=>x.status==="Archived").length;return[{label:"Total Periods",value:h,icon:er,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:null,filterValue:null},{label:"Open",value:m,icon:_Y,bgColor:"bg-green-100",iconColor:"text-green-600",filterKey:"status",filterValue:"Open",active:e.activeFilter==="Open"},{label:"Locked",value:g,icon:xY,bgColor:"bg-yellow-100",iconColor:"text-yellow-600",filterKey:"status",filterValue:"Locked",active:e.activeFilter==="Locked"},{label:"Closed",value:v,icon:Uce,bgColor:"bg-gray-100",iconColor:"text-gray-600",filterKey:"status",filterValue:"Closed",active:e.activeFilter==="Closed"},{label:"Archived",value:_,icon:UD,bgColor:"bg-purple-100",iconColor:"text-purple-600",filterKey:"status",filterValue:"Archived",active:e.activeFilter==="Archived"}]}),r=J(()=>{const p=e.periods,h=["Month","Quarter","Half-Year","Year","Custom"],m={Month:"bg-blue-500",Quarter:"bg-green-500","Half-Year":"bg-purple-500",Year:"bg-orange-500",Custom:"bg-gray-500"};return h.map(g=>({name:g,count:p.filter(v=>v.period_type===g).length,dotColor:m[g]||"bg-gray-400"})).filter(g=>g.count>0)}),i=J(()=>{const p=e.periods.filter(h=>h.data_quality_score);return p.length?Math.round(p.reduce((h,m)=>h+m.data_quality_score,0)/p.length):0}),a=J(()=>{const p=e.periods.filter(h=>h.data_completeness_score);return p.length?Math.round(p.reduce((h,m)=>h+m.data_completeness_score,0)/p.length):0}),s=J(()=>{const p=i.value;return p>=80?"#22C55E":p>=60?"#F59E0B":"#EF4444"}),o=J(()=>{const p=e.periods;return[{name:"Completed",count:p.filter(h=>h.reconciliation_status==="Completed").length,icon:Gt,iconColor:"text-green-600",theme:"green"},{name:"In Progress",count:p.filter(h=>h.reconciliation_status==="In Progress").length,icon:Ii,iconColor:"text-blue-600",theme:"blue"},{name:"Not Started",count:p.filter(h=>h.reconciliation_status==="Not Started").length,icon:nn,iconColor:"text-yellow-600",theme:"orange"},{name:"Issues Found",count:p.filter(h=>h.reconciliation_status==="Issues Found").length,icon:Fc,iconColor:"text-red-600",theme:"red"}].filter(h=>h.count>0)}),l=J(()=>[...e.periods].sort((p,h)=>new Date(h.start_date)-new Date(p.start_date)).slice(0,8));function d(p){return p?new Date(p).toLocaleDateString("en-US",{month:"short",year:"numeric"}):""}function c(p){return{Open:"green",Locked:"orange",Closed:"gray",Archived:"blue"}[p]||"gray"}function f(p){return{Open:"bg-green-50 border-green-200",Locked:"bg-yellow-50 border-yellow-200",Closed:"bg-gray-50 border-gray-200",Archived:"bg-purple-50 border-purple-200"}[p]||"bg-gray-50 border-gray-200"}return(p,h)=>(T(),P("div",EDt,[u("div",MDt,[(T(!0),P(_e,null,we(n.value,m=>(T(),P("div",{key:m.label,class:fe(["bg-white rounded-xl border p-4 hover:shadow-md transition-shadow cursor-pointer",m.active?"ring-2 ring-blue-500":""]),onClick:g=>p.$emit("filter",m.filterKey,m.filterValue)},[u("div",DDt,[u("div",{class:fe(["p-2 rounded-lg",m.bgColor])},[(T(),he(Lt(m.icon),{class:fe(["h-5 w-5",m.iconColor])},null,8,["class"]))],2),u("div",null,[u("div",RDt,E(m.value),1),u("div",PDt,E(m.label),1)])])],10,$Dt))),128))]),u("div",IDt,[u("div",ODt,[h[0]||(h[0]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"By Period Type",-1)),u("div",LDt,[(T(!0),P(_e,null,we(r.value,m=>(T(),P("div",{key:m.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:g=>p.$emit("filter","period_type",m.name)},[u("div",{class:fe(["w-3 h-3 rounded-full",m.dotColor])},null,2),u("div",NDt,E(m.name),1),u("div",jDt,E(m.count),1)],8,VDt))),128))])]),u("div",FDt,[h[4]||(h[4]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Data Quality Overview",-1)),u("div",BDt,[u("div",zDt,[(T(),P("svg",UDt,[h[1]||(h[1]=u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:"#E5E7EB","stroke-width":"3"},null,-1)),u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:s.value,"stroke-width":"3","stroke-dasharray":`${i.value} ${100-i.value}`,"stroke-linecap":"round"},null,8,HDt)])),u("div",qDt,[u("div",WDt,E(i.value)+"%",1),h[2]||(h[2]=u("div",{class:"text-xs text-gray-500"},"Avg Quality",-1))])])]),u("div",GDt,[u("div",YDt,[h[3]||(h[3]=u("div",{class:"w-2 h-2 rounded-full bg-green-500"},null,-1)),u("span",KDt,"Complete: "+E(a.value)+"%",1)])])]),u("div",XDt,[h[5]||(h[5]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Reconciliation Status",-1)),u("div",ZDt,[(T(!0),P(_e,null,we(o.value,m=>(T(),P("div",{key:m.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:g=>p.$emit("filter","reconciliation_status",m.name)},[(T(),he(Lt(m.icon),{class:fe(["h-4 w-4",m.iconColor])},null,8,["class"])),u("div",JDt,E(m.name),1),b(y(Ee),{theme:m.theme},{default:D(()=>[W(E(m.count),1)]),_:2},1032,["theme"])],8,QDt))),128))])])]),u("div",eRt,[h[6]||(h[6]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Period Timeline",-1)),u("div",tRt,[(T(!0),P(_e,null,we(l.value,m=>(T(),P("div",{key:m.name,class:fe(["flex-shrink-0 p-3 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow min-w-[180px]",f(m.status)]),onClick:g=>p.$emit("select",m)},[u("div",rRt,[b(y(Ee),{theme:c(m.status)},{default:D(()=>[W(E(m.status),1)]),_:2},1032,["theme"]),u("span",iRt,E(m.period_type),1)]),u("div",aRt,E(m.period_name),1),u("div",sRt,E(d(m.start_date))+" - "+E(d(m.end_date)),1),u("div",oRt,[u("div",lRt,[u("div",{class:"h-1.5 rounded-full bg-blue-500",style:nt({width:`${m.data_completeness_score||0}%`})},null,4)]),u("span",uRt,E(m.data_completeness_score||0)+"%",1)])],10,nRt))),128)),l.value.length?ie("",!0):(T(),P("div",dRt," No periods defined "))])])]))}},fRt=Ul("dataPeriods",{state:()=>({periods:[],selectedPeriod:null,loading:!1,saving:!1,error:null,searchQuery:"",filters:{status:"",periodType:"",fiscalYear:"",reconciliationStatus:""}}),getters:{filteredPeriods:t=>{let e=t.periods;if(t.searchQuery){const n=t.searchQuery.toLowerCase();e=e.filter(r=>{var i,a,s;return((i=r.period_name)==null?void 0:i.toLowerCase().includes(n))||((a=r.period_id)==null?void 0:a.toLowerCase().includes(n))||((s=r.description)==null?void 0:s.toLowerCase().includes(n))})}return t.filters.status&&(e=e.filter(n=>n.status===t.filters.status)),t.filters.periodType&&(e=e.filter(n=>n.period_type===t.filters.periodType)),t.filters.fiscalYear&&(e=e.filter(n=>n.fiscal_year===t.filters.fiscalYear)),t.filters.reconciliationStatus&&(e=e.filter(n=>n.reconciliation_status===t.filters.reconciliationStatus)),e},stats:t=>{const e=t.periods.length,n=t.periods.filter(f=>f.status==="Open").length,r=t.periods.filter(f=>f.status==="Locked").length,i=t.periods.filter(f=>f.status==="Closed").length,a=t.periods.filter(f=>f.data_quality_score!==null&&f.data_quality_score!==void 0),s=a.length>0?Math.round(a.reduce((f,p)=>f+(p.data_quality_score||0),0)/a.length):0,o=t.periods.filter(f=>f.data_completeness_score!==null&&f.data_completeness_score!==void 0),l=o.length>0?Math.round(o.reduce((f,p)=>f+(p.data_completeness_score||0),0)/o.length):0,d={};t.periods.forEach(f=>{const p=f.fiscal_year||"Unknown";d[p]||(d[p]=0),d[p]++});const c={};return t.periods.forEach(f=>{const p=f.period_type||"Unknown";c[p]||(c[p]=0),c[p]++}),{total:e,open:n,locked:r,closed:i,avgDataQuality:s,avgCompleteness:l,byFiscalYear:d,byPeriodType:c}},fiscalYears:t=>{const e=new Set(t.periods.map(n=>n.fiscal_year).filter(Boolean));return Array.from(e).sort().reverse()}},actions:{fetchPeriods(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Data Period",fields:["name","period_id","period_name","period_type","fiscal_year","start_date","end_date","status","description","company","data_completeness_score","data_quality_score","reconciliation_status","is_locked","locked_by","locked_date","closure_date","closed_by","closure_notes","creation","modified"],limit_page_length:0,order_by:"start_date desc"}}).fetch();this.periods=t||[]}catch(t){console.error("Error fetching data periods:",t),this.error=t.message||"Failed to fetch data periods",this.periods=[]}finally{this.loading=!1}})},getPeriodDetails(t){return le(this,null,function*(){try{this.loading=!0;const e=yield Ie({url:"frappe.client.get",params:{doctype:"Data Period",name:t}}).fetch();return this.selectedPeriod=e,e}catch(e){throw console.error("Error fetching period details:",e),e}finally{this.loading=!1}})},createPeriod(t){return le(this,null,function*(){try{this.saving=!0;const e=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Data Period"},t)}}).fetch();return yield this.fetchPeriods(),e}catch(e){throw console.error("Error creating period:",e),e}finally{this.saving=!1}})},updatePeriod(t,e){return le(this,null,function*(){try{this.saving=!0;const n=yield Ie({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:e}}).fetch();return yield this.fetchPeriods(),n}catch(n){throw console.error("Error updating period:",n),n}finally{this.saving=!1}})},savePeriod(t){return le(this,null,function*(){return t.name?this.updatePeriod(t.name,t):this.createPeriod(t)})},lockPeriod(t){return le(this,null,function*(){try{this.saving=!0,yield Ie({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:{is_locked:1,locked_date:new Date().toISOString().split("T")[0],status:"Locked"}}}).fetch(),yield this.fetchPeriods()}catch(e){throw console.error("Error locking period:",e),e}finally{this.saving=!1}})},unlockPeriod(t){return le(this,null,function*(){try{this.saving=!0,yield Ie({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:{is_locked:0,locked_date:null,locked_by:null,status:"Open"}}}).fetch(),yield this.fetchPeriods()}catch(e){throw console.error("Error unlocking period:",e),e}finally{this.saving=!1}})},closePeriod(t,e=""){return le(this,null,function*(){try{this.saving=!0,yield Ie({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:{status:"Closed",closure_date:new Date().toISOString().split("T")[0],closure_notes:e}}}).fetch(),yield this.fetchPeriods()}catch(n){throw console.error("Error closing period:",n),n}finally{this.saving=!1}})},reopenPeriod(t){return le(this,null,function*(){try{this.saving=!0,yield Ie({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:{status:"Open",closure_date:null,closed_by:null,closure_notes:null}}}).fetch(),yield this.fetchPeriods()}catch(e){throw console.error("Error reopening period:",e),e}finally{this.saving=!1}})},deletePeriod(t){return le(this,null,function*(){try{this.saving=!0,yield Ie({url:"frappe.client.delete",params:{doctype:"Data Period",name:t}}).fetch(),yield this.fetchPeriods()}catch(e){throw console.error("Error deleting period:",e),e}finally{this.saving=!1}})},setFilters(t){this.filters=me(me({},this.filters),t)},clearFilters(){this.searchQuery="",this.filters={status:"",periodType:"",fiscalYear:"",reconciliationStatus:""}}}}),pRt={class:"space-y-6"},hRt={class:"flex items-center justify-between"},mRt={class:"flex items-center space-x-3"},gRt={class:"bg-white rounded-lg border border-gray-200"},vRt={class:"border-b border-gray-200"},yRt={class:"flex"},bRt={class:"p-6"},_Rt={key:0},xRt={class:"flex items-center justify-between mb-6"},wRt={class:"flex items-center space-x-3"},kRt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},SRt={class:"flex items-start justify-between mb-4"},CRt={class:"flex-1"},ARt={class:"text-lg font-medium text-gray-900 mb-1"},TRt={class:"text-sm text-gray-600 mb-2"},ERt={class:"flex items-center space-x-2"},MRt={class:"space-y-2 text-sm text-gray-500"},$Rt={class:"flex justify-between"},DRt={class:"flex justify-between"},RRt={class:"flex justify-between"},PRt={class:"flex justify-between"},IRt={class:"mt-4 flex items-center justify-between"},ORt={class:"text-xs text-gray-500"},LRt={class:"flex items-center space-x-2"},VRt={key:1},NRt={class:"flex items-center justify-between mb-6"},jRt={class:"flex items-center space-x-3"},FRt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},BRt={class:"bg-white border border-gray-200 rounded-lg p-6"},zRt={class:"space-y-4"},URt={class:"text-sm font-medium text-gray-900"},HRt={class:"text-xs text-gray-500"},qRt={class:"flex items-center space-x-2"},WRt={class:"text-xs text-gray-500"},GRt={class:"bg-white border border-gray-200 rounded-lg p-6"},YRt={class:"space-y-4"},KRt={class:"flex justify-between items-center"},XRt={class:"text-sm font-medium"},ZRt={class:"flex justify-between items-center"},QRt={class:"text-sm font-medium"},JRt={class:"flex justify-between items-center"},ePt={class:"text-sm font-medium"},tPt={class:"flex justify-between items-center"},nPt={class:"text-sm font-medium"},rPt={class:"mt-6"},iPt={class:"space-y-2"},aPt={key:2},sPt={class:"flex items-center justify-between mb-6"},oPt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},lPt={class:"flex items-start justify-between mb-4"},uPt={class:"flex-1"},dPt={class:"text-lg font-medium text-gray-900 mb-1"},cPt={class:"text-sm text-gray-600 mb-2"},fPt={class:"flex items-center space-x-2"},pPt={class:"space-y-2 text-sm text-gray-500"},hPt={class:"flex justify-between"},mPt={class:"flex justify-between"},gPt={class:"flex justify-between"},vPt={class:"flex justify-between"},yPt={key:3},bPt={class:"space-y-6"},_Pt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xPt={class:"bg-white border border-gray-200 rounded-lg p-6"},wPt={class:"space-y-4"},kPt={class:"flex items-center"},SPt={class:"bg-white border border-gray-200 rounded-lg p-6"},CPt={class:"space-y-4"},APt={class:"flex items-center"},TPt={class:"flex items-center"},EPt={class:"flex items-center"},MPt={class:"flex justify-end"},$Pt={__name:"DataPeriods",setup(t){const e=fRt(),n=Q("periods"),r=Q(""),i=Q(""),a=Q(!1),s=Q(!1),o=Q(null);J(()=>e.loading);const l=J(()=>e.filteredPeriods),d=J(()=>e.stats),c=J({get:()=>e.searchQuery,set:V=>e.searchQuery=V}),f=J({get:()=>e.filters.status,set:V=>e.filters.status=V}),p=J({get:()=>e.filters.periodType,set:V=>e.filters.periodType=V}),h=J({get:()=>e.filters.fiscalYear,set:V=>e.filters.fiscalYear=V}),m=J({get:()=>e.filters.reconciliationStatus,set:V=>e.filters.reconciliationStatus=V});J(()=>e.periods);const g=Q([{name:"type_1",period_type_name:"Monthly",description:"Standard monthly accounting periods",is_active:!0,is_default:!1,frequency:"Monthly",duration_days:30,auto_close:!0,carry_forward:!0},{name:"type_2",period_type_name:"Quarterly",description:"Quarterly financial reporting periods",is_active:!0,is_default:!0,frequency:"Quarterly",duration_days:91,auto_close:!1,carry_forward:!0},{name:"type_3",period_type_name:"Annually",description:"Annual fiscal year periods",is_active:!0,is_default:!1,frequency:"Annually",duration_days:365,auto_close:!1,carry_forward:!1}]),v=Q([{name:"January",periods:1,status:"complete"},{name:"February",periods:1,status:"complete"},{name:"March",periods:1,status:"complete"},{name:"April",periods:1,status:"partial"},{name:"May",periods:1,status:"pending"},{name:"June",periods:1,status:"pending"},{name:"July",periods:0,status:"empty"},{name:"August",periods:0,status:"empty"},{name:"September",periods:0,status:"empty"},{name:"October",periods:0,status:"empty"},{name:"November",periods:0,status:"empty"},{name:"December",periods:0,status:"empty"}]),_=Q({totalPeriods:12,openPeriods:3,closedPeriods:9,companies:2}),x=Q({defaultFiscalStart:"2024-01-01",autoCloseThreshold:30,allowPeriodOverlap:!1,notifyOnPeriodClose:!0,notifyOnPeriodOpen:!1,notifyUpcomingPeriods:!0}),w=[{label:"All Periods",value:""},{label:"Open",value:"Open"},{label:"Closed",value:"Closed"},{label:"Upcoming",value:"Upcoming"}],k=[{label:"2024",value:"2024"},{label:"2023",value:"2023"},{label:"2022",value:"2022"}],S=()=>le(this,null,function*(){yield e.fetchPeriods()}),C=V=>({Open:"success",Closed:"secondary",Upcoming:"info"})[V]||"secondary",A=V=>({Monthly:"info",Quarterly:"success",Annually:"warning",Custom:"secondary"})[V]||"secondary",M=V=>V?new Date(V).toLocaleDateString():"N/A",$=()=>{o.value=null,s.value=!1,a.value=!0},R=V=>le(this,null,function*(){try{o.value=yield e.getPeriodDetails(V.name),s.value=!0,a.value=!0}catch(L){console.error("Error fetching period details:",L)}}),I=()=>le(this,null,function*(){a.value=!1,yield S()}),B=V=>le(this,null,function*(){try{yield e.closePeriod(V.name)}catch(L){console.error("Error closing period:",L)}}),j=V=>le(this,null,function*(){try{yield e.reopenPeriod(V.name)}catch(L){console.error("Error reopening period:",L)}}),z=()=>{console.log("Create fiscal year")},F=()=>{console.log("Create period type")},q=V=>{console.log("Edit period type:",V.name)},N=()=>{console.log("Saving settings:",x.value)},O=()=>{console.log("Export periods")};return bt(()=>le(this,null,function*(){yield S()})),(V,L)=>(T(),P("div",pRt,[u("div",hRt,[L[20]||(L[20]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Data Periods"),u("p",{class:"text-gray-600 mt-1"}," Manage fiscal periods, data periods, and period configurations ")],-1)),u("div",mRt,[b(y(Z),{variant:"outline",onClick:O},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),L[18]||(L[18]=W(" Export Periods ",-1))]),_:1}),b(y(Z),{onClick:$},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),L[19]||(L[19]=W(" New Period ",-1))]),_:1})])]),b(cRt,{stats:d.value},null,8,["stats"]),b(TDt,{searchQuery:c.value,"onUpdate:searchQuery":L[0]||(L[0]=U=>c.value=U),selectedStatus:f.value,"onUpdate:selectedStatus":L[1]||(L[1]=U=>f.value=U),selectedPeriodType:p.value,"onUpdate:selectedPeriodType":L[2]||(L[2]=U=>p.value=U),selectedFiscalYear:h.value,"onUpdate:selectedFiscalYear":L[3]||(L[3]=U=>h.value=U),selectedReconciliationStatus:m.value,"onUpdate:selectedReconciliationStatus":L[4]||(L[4]=U=>m.value=U)},null,8,["searchQuery","selectedStatus","selectedPeriodType","selectedFiscalYear","selectedReconciliationStatus"]),u("div",gRt,[u("div",vRt,[u("nav",yRt,[u("button",{onClick:L[5]||(L[5]=U=>n.value="periods"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",n.value==="periods"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Data Periods ",2),u("button",{onClick:L[6]||(L[6]=U=>n.value="fiscal"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",n.value==="fiscal"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Fiscal Calendar ",2),u("button",{onClick:L[7]||(L[7]=U=>n.value="types"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",n.value==="types"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Period Types ",2),u("button",{onClick:L[8]||(L[8]=U=>n.value="settings"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",n.value==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Settings ",2)])]),u("div",bRt,[n.value==="periods"?(T(),P("div",_Rt,[u("div",xRt,[L[22]||(L[22]=u("h2",{class:"text-lg font-medium text-gray-900"},"Data Periods",-1)),u("div",wRt,[b(y(Ke),{modelValue:r.value,"onUpdate:modelValue":L[9]||(L[9]=U=>r.value=U),options:w,placeholder:"Filter periods",class:"w-40"},null,8,["modelValue"]),b(y(Z),{onClick:$},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),L[21]||(L[21]=W(" New Period ",-1))]),_:1})])]),u("div",kRt,[(T(!0),P(_e,null,we(l.value,U=>(T(),P("div",{key:U.name,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow"},[u("div",SRt,[u("div",CRt,[u("h3",ARt,E(U.period_name),1),u("p",TRt,E(U.description||"Data period configuration"),1),u("div",ERt,[b(y(Ee),{variant:C(U.status)},{default:D(()=>[W(E(U.status),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:A(U.period_type)},{default:D(()=>[W(E(U.period_type),1)]),_:2},1032,["variant"])])]),b(y(Z),{variant:"ghost",size:"sm",onClick:G=>R(U)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",MRt,[u("div",$Rt,[L[23]||(L[23]=u("span",null,"Start Date:",-1)),u("span",null,E(M(U.start_date)),1)]),u("div",DRt,[L[24]||(L[24]=u("span",null,"End Date:",-1)),u("span",null,E(M(U.end_date)),1)]),u("div",RRt,[L[25]||(L[25]=u("span",null,"Fiscal Year:",-1)),u("span",null,E(U.fiscal_year),1)]),u("div",PRt,[L[26]||(L[26]=u("span",null,"Company:",-1)),u("span",null,E(U.company||"All"),1)])]),u("div",IRt,[u("div",ORt," Modified: "+E(M(U.modified)),1),u("div",LRt,[U.status==="Open"?(T(),he(y(Z),{key:0,variant:"outline",size:"sm",onClick:G=>B(U)},{default:D(()=>[...L[27]||(L[27]=[W(" Close ",-1)])]),_:1},8,["onClick"])):ie("",!0),U.status==="Closed"?(T(),he(y(Z),{key:1,variant:"outline",size:"sm",onClick:G=>j(U)},{default:D(()=>[...L[28]||(L[28]=[W(" Reopen ",-1)])]),_:1},8,["onClick"])):ie("",!0)])])]))),128))])])):ie("",!0),n.value==="fiscal"?(T(),P("div",VRt,[u("div",NRt,[L[30]||(L[30]=u("h2",{class:"text-lg font-medium text-gray-900"},"Fiscal Calendar",-1)),u("div",jRt,[b(y(Ke),{modelValue:i.value,"onUpdate:modelValue":L[10]||(L[10]=U=>i.value=U),options:k,placeholder:"Select year",class:"w-32"},null,8,["modelValue"]),b(y(Z),{onClick:z},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),L[29]||(L[29]=W(" New Fiscal Year ",-1))]),_:1})])]),u("div",FRt,[u("div",BRt,[L[31]||(L[31]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Period Calendar",-1)),u("div",zRt,[(T(!0),P(_e,null,we(v.value,U=>(T(),P("div",{key:U.name,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[u("div",null,[u("p",URt,E(U.name),1),u("p",HRt,E(U.periods)+" periods",1)]),u("div",qRt,[u("div",{class:fe(["w-3 h-3 rounded-full",U.status==="complete"?"bg-green-500":U.status==="partial"?"bg-yellow-500":"bg-gray-300"])},null,2),u("span",WRt,E(U.status),1)])]))),128))])]),u("div",GRt,[L[39]||(L[39]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Fiscal Year Summary",-1)),u("div",YRt,[u("div",KRt,[L[32]||(L[32]=u("span",{class:"text-sm text-gray-600"},"Total Periods:",-1)),u("span",XRt,E(_.value.totalPeriods),1)]),u("div",ZRt,[L[33]||(L[33]=u("span",{class:"text-sm text-gray-600"},"Open Periods:",-1)),u("span",QRt,E(_.value.openPeriods),1)]),u("div",JRt,[L[34]||(L[34]=u("span",{class:"text-sm text-gray-600"},"Closed Periods:",-1)),u("span",ePt,E(_.value.closedPeriods),1)]),u("div",tPt,[L[35]||(L[35]=u("span",{class:"text-sm text-gray-600"},"Companies:",-1)),u("span",nPt,E(_.value.companies),1)])]),u("div",rPt,[L[38]||(L[38]=u("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Quick Actions",-1)),u("div",iPt,[b(y(Z),{variant:"outline",size:"sm",class:"w-full justify-start"},{default:D(()=>[b(y(vt),{class:"h-4 w-4 mr-2"}),L[36]||(L[36]=W(" Generate Period Report ",-1))]),_:1}),b(y(Z),{variant:"outline",size:"sm",class:"w-full justify-start"},{default:D(()=>[b(y(So),{class:"h-4 w-4 mr-2"}),L[37]||(L[37]=W(" Configure Auto-close ",-1))]),_:1})])])])])])):ie("",!0),n.value==="types"?(T(),P("div",aPt,[u("div",sPt,[L[41]||(L[41]=u("h2",{class:"text-lg font-medium text-gray-900"},"Period Types",-1)),b(y(Z),{onClick:F},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),L[40]||(L[40]=W(" New Type ",-1))]),_:1})]),u("div",oPt,[(T(!0),P(_e,null,we(g.value,U=>(T(),P("div",{key:U.name,class:"bg-white border border-gray-200 rounded-lg p-6"},[u("div",lPt,[u("div",uPt,[u("h3",dPt,E(U.period_type_name),1),u("p",cPt,E(U.description||"Period type configuration"),1),u("div",fPt,[b(y(Ee),{variant:U.is_active?"success":"secondary"},{default:D(()=>[W(E(U.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:U.is_default?"info":"secondary"},{default:D(()=>[W(E(U.is_default?"Default":"Custom"),1)]),_:2},1032,["variant"])])]),b(y(Z),{variant:"ghost",size:"sm",onClick:G=>q(U)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",pPt,[u("div",hPt,[L[42]||(L[42]=u("span",null,"Frequency:",-1)),u("span",null,E(U.frequency),1)]),u("div",mPt,[L[43]||(L[43]=u("span",null,"Duration (days):",-1)),u("span",null,E(U.duration_days),1)]),u("div",gPt,[L[44]||(L[44]=u("span",null,"Auto-close:",-1)),u("span",null,E(U.auto_close?"Yes":"No"),1)]),u("div",vPt,[L[45]||(L[45]=u("span",null,"Carry Forward:",-1)),u("span",null,E(U.carry_forward?"Yes":"No"),1)])])]))),128))])])):ie("",!0),n.value==="settings"?(T(),P("div",yPt,[u("div",bPt,[L[55]||(L[55]=u("h2",{class:"text-lg font-medium text-gray-900"},"Period Management Settings",-1)),u("div",_Pt,[u("div",xPt,[L[49]||(L[49]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"General Settings",-1)),u("div",wPt,[u("div",null,[L[46]||(L[46]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Default Fiscal Year Start ",-1)),b(y(En),{modelValue:x.value.defaultFiscalStart,"onUpdate:modelValue":L[11]||(L[11]=U=>x.value.defaultFiscalStart=U),type:"date",class:"w-full"},null,8,["modelValue"])]),u("div",null,[L[47]||(L[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Auto-close Threshold (days) ",-1)),b(y(En),{modelValue:x.value.autoCloseThreshold,"onUpdate:modelValue":L[12]||(L[12]=U=>x.value.autoCloseThreshold=U),type:"number",class:"w-full"},null,8,["modelValue"])]),u("div",kPt,[xe(u("input",{id:"allowOverlap","onUpdate:modelValue":L[13]||(L[13]=U=>x.value.allowPeriodOverlap=U),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[$n,x.value.allowPeriodOverlap]]),L[48]||(L[48]=u("label",{for:"allowOverlap",class:"ml-2 block text-sm text-gray-900"}," Allow period overlap ",-1))])])]),u("div",SPt,[L[53]||(L[53]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Notifications",-1)),u("div",CPt,[u("div",APt,[xe(u("input",{id:"notifyPeriodClose","onUpdate:modelValue":L[14]||(L[14]=U=>x.value.notifyOnPeriodClose=U),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[$n,x.value.notifyOnPeriodClose]]),L[50]||(L[50]=u("label",{for:"notifyPeriodClose",class:"ml-2 block text-sm text-gray-900"}," Notify on period close ",-1))]),u("div",TPt,[xe(u("input",{id:"notifyPeriodOpen","onUpdate:modelValue":L[15]||(L[15]=U=>x.value.notifyOnPeriodOpen=U),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[$n,x.value.notifyOnPeriodOpen]]),L[51]||(L[51]=u("label",{for:"notifyPeriodOpen",class:"ml-2 block text-sm text-gray-900"}," Notify on period open ",-1))]),u("div",EPt,[xe(u("input",{id:"notifyUpcoming","onUpdate:modelValue":L[16]||(L[16]=U=>x.value.notifyUpcomingPeriods=U),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[$n,x.value.notifyUpcomingPeriods]]),L[52]||(L[52]=u("label",{for:"notifyUpcoming",class:"ml-2 block text-sm text-gray-900"}," Notify upcoming periods ",-1))])])])]),u("div",MPt,[b(y(Z),{onClick:N},{default:D(()=>[...L[54]||(L[54]=[W(" Save Settings ",-1)])]),_:1})])])])):ie("",!0)])]),b(vDt,{show:a.value,"onUpdate:show":L[17]||(L[17]=U=>a.value=U),"period-data":o.value,"is-edit-mode":s.value,onSaved:I},null,8,["show","period-data","is-edit-mode"])]))}},DPt={class:"space-y-6"},RPt={class:"flex items-center justify-between"},PPt={class:"flex items-center space-x-3"},IPt={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},OPt={class:"bg-white rounded-lg border border-gray-200 p-6"},LPt={class:"flex items-center"},VPt={class:"p-2 bg-green-100 rounded-lg"},NPt={class:"ml-4"},jPt={class:"text-2xl font-bold text-gray-900"},FPt={class:"bg-white rounded-lg border border-gray-200 p-6"},BPt={class:"flex items-center"},zPt={class:"p-2 bg-blue-100 rounded-lg"},UPt={class:"ml-4"},HPt={class:"text-2xl font-bold text-gray-900"},qPt={class:"bg-white rounded-lg border border-gray-200 p-6"},WPt={class:"flex items-center"},GPt={class:"p-2 bg-red-100 rounded-lg"},YPt={class:"ml-4"},KPt={class:"text-2xl font-bold text-gray-900"},XPt={class:"text-xs text-red-600 mt-1"},ZPt={class:"bg-white rounded-lg border border-gray-200 p-6"},QPt={class:"flex items-center"},JPt={class:"p-2 bg-purple-100 rounded-lg"},eIt={class:"ml-4"},tIt={class:"text-2xl font-bold text-gray-900"},nIt={class:"text-xs text-purple-600 mt-1"},rIt={class:"bg-white rounded-lg border border-gray-200"},iIt={class:"border-b border-gray-200"},aIt={class:"flex"},sIt={class:"p-6"},oIt={key:0},lIt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},uIt={class:"bg-white border border-gray-200 rounded-lg p-6"},dIt={class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},cIt={class:"text-center"},fIt={class:"bg-white border border-gray-200 rounded-lg p-6"},pIt={class:"space-y-4"},hIt={class:"flex-1"},mIt={class:"text-sm font-medium text-gray-900"},gIt={class:"text-xs text-gray-500"},vIt={class:"text-right"},yIt={class:"text-lg font-bold text-gray-900"},bIt={class:"mt-6 bg-white border border-gray-200 rounded-lg p-6"},_It={class:"space-y-4"},xIt={class:"flex items-center space-x-3"},wIt={class:"text-sm font-medium text-gray-900"},kIt={class:"text-xs text-gray-500"},SIt={class:"text-right"},CIt={class:"text-sm font-medium text-gray-900"},AIt={class:"text-xs text-gray-500"},TIt={key:1},EIt={class:"flex items-center justify-between mb-6"},MIt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$It={class:"flex items-start justify-between mb-4"},DIt={class:"flex-1"},RIt={class:"text-lg font-medium text-gray-900 mb-1"},PIt={class:"text-sm text-gray-600 mb-2"},IIt={class:"flex items-center space-x-2"},OIt={class:"space-y-2 text-sm text-gray-500"},LIt={class:"flex justify-between"},VIt={class:"flex justify-between"},NIt={class:"flex justify-between"},jIt={class:"flex justify-between"},FIt={key:2},BIt={class:"space-y-4"},zIt={class:"flex items-center justify-between"},UIt={class:"flex items-center space-x-3"},HIt={class:"space-y-4"},qIt={class:"flex items-start justify-between mb-4"},WIt={class:"flex-1"},GIt={class:"flex items-center space-x-2 mb-2"},YIt={class:"text-lg font-medium text-gray-900 mb-1"},KIt={class:"text-sm text-gray-600 mb-2"},XIt={class:"text-sm text-gray-500"},ZIt={class:"flex items-center space-x-2"},QIt={class:"flex items-center justify-between text-sm text-gray-500"},JIt={key:3},eOt={class:"space-y-4"},tOt={class:"flex items-center justify-between"},nOt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},rOt=["onClick"],iOt={class:"flex items-start justify-between mb-4"},aOt={class:"flex-1"},sOt={class:"text-lg font-medium text-gray-900 mb-1"},oOt={class:"text-sm text-gray-600 mb-2"},lOt={class:"text-sm text-gray-500"},uOt={__name:"DataQuality",setup(t){const e=xn(),n=wA(),r=Q("dashboard"),i=Q(""),a=Q(!1),s=Q(87),o=Q(15420),l=Q(12),d=Q(3),c=Q(8),f=Q([{name:"completeness",label:"Data Completeness",description:"Percentage of required fields filled",value:92,trend:1.5},{name:"accuracy",label:"Data Accuracy",description:"Percentage of accurate data entries",value:89,trend:-.8},{name:"consistency",label:"Data Consistency",description:"Percentage of consistent data across records",value:94,trend:2.1},{name:"timeliness",label:"Data Timeliness",description:"Percentage of data updated within timeframe",value:78,trend:3.2}]),p=Q([{id:1,rule_name:"Required Field Validation",doctype:"Audit Engagement",records_checked:150,issues_found:5,status:"completed",checked_at:new Date().toISOString()},{id:2,rule_name:"Date Format Validation",doctype:"Finding",records_checked:89,issues_found:12,status:"completed",checked_at:new Date(Date.now()-36e5).toISOString()},{id:3,rule_name:"Numeric Range Validation",doctype:"Working Paper",records_checked:234,issues_found:0,status:"completed",checked_at:new Date(Date.now()-72e5).toISOString()}]),h=Q([{name:"rule_1",rule_name:"Required Field Check",description:"Ensures all required fields are filled",is_active:!0,rule_type:"Required Field",target_doctype:"Audit Engagement",target_field:null,severity_level:"High",last_run:new Date().toISOString()},{name:"rule_2",rule_name:"Date Format Validation",description:"Validates date fields are in correct format",is_active:!0,rule_type:"Format Check",target_doctype:"Finding",target_field:"finding_date",severity_level:"Medium",last_run:new Date(Date.now()-36e5).toISOString()}]),m=Q([{name:"alert_1",alert_title:"Missing Required Fields",alert_description:"12 audit engagements have missing required fields",severity:"High",status:"Open",rule_name:"Required Field Check",target_doctype:"Audit Engagement",affected_records:12,creation:new Date().toISOString()},{name:"alert_2",alert_title:"Invalid Date Formats",alert_description:"8 findings have invalid date formats",severity:"Medium",status:"Open",rule_name:"Date Format Validation",target_doctype:"Finding",affected_records:8,creation:new Date(Date.now()-36e5).toISOString()}]),g=Q([{id:1,report_name:"Monthly Data Quality Report",description:"Comprehensive quality assessment for the current month",status:"Generated",generated_at:new Date().toISOString()},{id:2,report_name:"Critical Issues Summary",description:"Summary of all critical data quality issues",status:"Generated",generated_at:new Date(Date.now()-864e5).toISOString()}]),v=[{label:"All Alerts",value:""},{label:"Open",value:"Open"},{label:"Resolved",value:"Resolved"},{label:"Critical",value:"Critical"}],_=J(()=>{let N=m.value;return i.value==="Open"?N=N.filter(O=>O.status==="Open"):i.value==="Resolved"?N=N.filter(O=>O.status==="Resolved"):i.value==="Critical"&&(N=N.filter(O=>O.severity==="High")),N}),x=()=>le(this,null,function*(){a.value=!0;try{yield n.fetchDataQualityMetrics()}catch(N){console.error("Error loading data quality metrics:",N)}finally{a.value=!1}}),w=N=>({completed:"bg-green-500",failed:"bg-red-500",running:"bg-yellow-500"})[N]||"bg-gray-500",k=N=>({"Required Field":"warning","Format Check":"info","Range Check":"success","Duplicate Check":"secondary","Reference Check":"info"})[N]||"secondary",S=N=>({High:"danger",Medium:"warning",Low:"info"})[N]||"secondary",C=N=>({Open:"warning",Resolved:"success",Dismissed:"secondary"})[N]||"secondary",A=N=>({Generated:"success",Generating:"warning",Failed:"danger"})[N]||"secondary",M=N=>N?new Date(N).toLocaleString():"N/A",$=()=>{e.push("/data-quality/rule/new")},R=N=>{e.push(`/data-quality/rule/${N.name}/edit`)},I=N=>{e.push(`/data-quality/alert/${N.name}`)},B=N=>{N.status="Resolved"},j=()=>{m.value=m.value.filter(N=>N.status!=="Resolved")},z=()=>{e.push("/data-quality/report/generate")},F=N=>{e.push(`/data-quality/report/${N.id}`)},q=N=>{console.log("Downloading report:",N.report_name)};return bt(()=>le(this,null,function*(){yield x()})),(N,O)=>(T(),P("div",DPt,[u("div",RPt,[O[7]||(O[7]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Data Quality"),u("p",{class:"text-gray-600 mt-1"}," Monitor data quality metrics and manage data validation rules ")],-1)),u("div",PPt,[b(y(Z),{variant:"outline"},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),O[5]||(O[5]=W(" Export Report ",-1))]),_:1}),b(y(Z),{onClick:$},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),O[6]||(O[6]=W(" New Rule ",-1))]),_:1})])]),u("div",IPt,[u("div",OPt,[u("div",LPt,[u("div",VPt,[b(y(Gt),{class:"h-6 w-6 text-green-600"})]),u("div",NPt,[O[8]||(O[8]=u("p",{class:"text-sm font-medium text-gray-600"},"Overall Quality Score",-1)),u("p",jPt,E(s.value)+"%",1),O[9]||(O[9]=u("p",{class:"text-xs text-green-600 mt-1"}," 2.1% from last month",-1))])])]),u("div",FPt,[u("div",BPt,[u("div",zPt,[b(y(ri),{class:"h-6 w-6 text-blue-600"})]),u("div",UPt,[O[10]||(O[10]=u("p",{class:"text-sm font-medium text-gray-600"},"Records Validated",-1)),u("p",HPt,E(o.value),1),O[11]||(O[11]=u("p",{class:"text-xs text-blue-600 mt-1"},"Last 30 days",-1))])])]),u("div",qPt,[u("div",WPt,[u("div",GPt,[b(y(nn),{class:"h-6 w-6 text-red-600"})]),u("div",YPt,[O[12]||(O[12]=u("p",{class:"text-sm font-medium text-gray-600"},"Active Alerts",-1)),u("p",KPt,E(l.value),1),u("p",XPt,E(d.value)+" critical",1)])])]),u("div",ZPt,[u("div",QPt,[u("div",JPt,[b(y(Ku),{class:"h-6 w-6 text-purple-600"})]),u("div",eIt,[O[13]||(O[13]=u("p",{class:"text-sm font-medium text-gray-600"},"Validation Rules",-1)),u("p",tIt,E(h.value.length),1),u("p",nIt,E(c.value)+" active",1)])])])]),u("div",rIt,[u("div",iIt,[u("nav",aIt,[u("button",{onClick:O[0]||(O[0]=V=>r.value="dashboard"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Quality Dashboard ",2),u("button",{onClick:O[1]||(O[1]=V=>r.value="rules"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="rules"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Validation Rules ",2),u("button",{onClick:O[2]||(O[2]=V=>r.value="alerts"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="alerts"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Alerts & Issues ",2),u("button",{onClick:O[3]||(O[3]=V=>r.value="reports"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="reports"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Quality Reports ",2)])]),u("div",sIt,[r.value==="dashboard"?(T(),P("div",oIt,[u("div",lIt,[u("div",uIt,[O[15]||(O[15]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Quality Score Trend",-1)),u("div",dIt,[u("div",cIt,[b(y(cr),{class:"h-12 w-12 text-gray-400 mx-auto mb-2"}),O[14]||(O[14]=u("p",{class:"text-gray-500"},"Quality score chart will be displayed here",-1))])])]),u("div",fIt,[O[16]||(O[16]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Data Quality Metrics",-1)),u("div",pIt,[(T(!0),P(_e,null,we(f.value,V=>(T(),P("div",{key:V.name,class:"flex items-center justify-between"},[u("div",hIt,[u("p",mIt,E(V.label),1),u("p",gIt,E(V.description),1)]),u("div",vIt,[u("p",yIt,E(V.value)+"%",1),u("p",{class:fe(["text-xs",V.trend>0?"text-green-600":"text-red-600"])},E(V.trend>0?"":"")+" "+E(Math.abs(V.trend))+"% ",3)])]))),128))])])]),u("div",bIt,[O[17]||(O[17]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Recent Quality Checks",-1)),u("div",_It,[(T(!0),P(_e,null,we(p.value,V=>(T(),P("div",{key:V.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[u("div",xIt,[u("div",{class:fe(["w-3 h-3 rounded-full",w(V.status)])},null,2),u("div",null,[u("p",wIt,E(V.rule_name),1),u("p",kIt,E(V.doctype)+"  "+E(V.records_checked)+" records",1)])]),u("div",SIt,[u("p",CIt,E(V.issues_found)+" issues",1),u("p",AIt,E(M(V.checked_at)),1)])]))),128))])])])):ie("",!0),r.value==="rules"?(T(),P("div",TIt,[u("div",EIt,[O[19]||(O[19]=u("h2",{class:"text-lg font-medium text-gray-900"},"Validation Rules",-1)),b(y(Z),{onClick:$},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),O[18]||(O[18]=W(" New Rule ",-1))]),_:1})]),u("div",MIt,[(T(!0),P(_e,null,we(h.value,V=>(T(),P("div",{key:V.name,class:"bg-white border border-gray-200 rounded-lg p-6"},[u("div",$It,[u("div",DIt,[u("h3",RIt,E(V.rule_name),1),u("p",PIt,E(V.description||"Validation rule"),1),u("div",IIt,[b(y(Ee),{variant:V.is_active?"success":"secondary"},{default:D(()=>[W(E(V.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:k(V.rule_type)},{default:D(()=>[W(E(V.rule_type),1)]),_:2},1032,["variant"])])]),b(y(Z),{variant:"ghost",size:"sm",onClick:L=>R(V)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",OIt,[u("div",LIt,[O[20]||(O[20]=u("span",null,"DocType:",-1)),u("span",null,E(V.target_doctype),1)]),u("div",VIt,[O[21]||(O[21]=u("span",null,"Field:",-1)),u("span",null,E(V.target_field||"All fields"),1)]),u("div",NIt,[O[22]||(O[22]=u("span",null,"Severity:",-1)),u("span",null,E(V.severity_level),1)]),u("div",jIt,[O[23]||(O[23]=u("span",null,"Last Run:",-1)),u("span",null,E(V.last_run?M(V.last_run):"Never"),1)])])]))),128))])])):ie("",!0),r.value==="alerts"?(T(),P("div",FIt,[u("div",BIt,[u("div",zIt,[O[25]||(O[25]=u("h2",{class:"text-lg font-medium text-gray-900"},"Alerts & Data Quality Issues",-1)),u("div",UIt,[b(y(Ke),{modelValue:i.value,"onUpdate:modelValue":O[4]||(O[4]=V=>i.value=V),options:v,placeholder:"Filter alerts",class:"w-40"},null,8,["modelValue"]),b(y(Z),{variant:"outline",onClick:j},{default:D(()=>[...O[24]||(O[24]=[W(" Clear Resolved ",-1)])]),_:1})])]),u("div",HIt,[(T(!0),P(_e,null,we(_.value,V=>(T(),P("div",{key:V.name,class:"bg-white border border-gray-200 rounded-lg p-6"},[u("div",qIt,[u("div",WIt,[u("div",GIt,[b(y(Ee),{variant:S(V.severity)},{default:D(()=>[W(E(V.severity),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:C(V.status)},{default:D(()=>[W(E(V.status),1)]),_:2},1032,["variant"])]),u("h3",YIt,E(V.alert_title),1),u("p",KIt,E(V.alert_description),1),u("div",XIt," Rule: "+E(V.rule_name)+"  DocType: "+E(V.target_doctype),1)]),u("div",ZIt,[b(y(Z),{variant:"ghost",size:"sm",onClick:L=>I(V)},{default:D(()=>[...O[26]||(O[26]=[W(" View Details ",-1)])]),_:1},8,["onClick"]),V.status!=="Resolved"?(T(),he(y(Z),{key:0,variant:"ghost",size:"sm",onClick:L=>B(V)},{default:D(()=>[...O[27]||(O[27]=[W(" Resolve ",-1)])]),_:1},8,["onClick"])):ie("",!0)])]),u("div",QIt,[u("span",null,"Created: "+E(M(V.creation)),1),u("span",null,"Affected Records: "+E(V.affected_records||0),1)])]))),128))])])])):ie("",!0),r.value==="reports"?(T(),P("div",JIt,[u("div",eOt,[u("div",tOt,[O[29]||(O[29]=u("h2",{class:"text-lg font-medium text-gray-900"},"Quality Reports",-1)),b(y(Z),{onClick:z},{default:D(()=>[b(y(vt),{class:"h-4 w-4 mr-2"}),O[28]||(O[28]=W(" Generate Report ",-1))]),_:1})]),u("div",nOt,[(T(!0),P(_e,null,we(g.value,V=>(T(),P("div",{key:V.id,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:L=>F(V)},[u("div",iOt,[u("div",aOt,[u("h3",sOt,E(V.report_name),1),u("p",oOt,E(V.description),1),b(y(Ee),{variant:A(V.status)},{default:D(()=>[W(E(V.status),1)]),_:2},1032,["variant"])]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(L=>q(V),["stop"])},{default:D(()=>[b(y(bn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",lOt," Generated: "+E(M(V.generated_at)),1)],8,rOt))),128))])])])):ie("",!0)])])]))}},dOt={class:"flex items-center space-x-4"},cOt={class:"text-lg font-semibold text-gray-900"},fOt={class:"text-sm text-gray-500"},pOt={key:0,class:"ml-auto px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},Dd={__name:"SectionHeader",props:{title:{type:String,required:!0},description:{type:String,default:""},icon:{type:String,default:"file-text"},step:{type:[String,Number],default:null},color:{type:String,default:"green"}},setup(t){const e=t,n={"file-text":vt,target:Xi,settings:So,calendar:er,users:ya,"book-user":dY,database:ri,folder:WD},r=J(()=>n[e.icon]||vt),i={green:{bg:"bg-green-100",icon:"text-green-600"},blue:{bg:"bg-blue-100",icon:"text-blue-600"},purple:{bg:"bg-purple-100",icon:"text-purple-600"},amber:{bg:"bg-amber-100",icon:"text-amber-600"},red:{bg:"bg-red-100",icon:"text-red-600"}},a=J(()=>{var o;return((o=i[e.color])==null?void 0:o.bg)||i.green.bg}),s=J(()=>{var o;return((o=i[e.color])==null?void 0:o.icon)||i.green.icon});return(o,l)=>(T(),P("div",dOt,[u("div",{class:fe(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",a.value])},[(T(),he(Lt(r.value),{class:fe(["h-5 w-5",s.value])},null,8,["class"]))],2),u("div",null,[u("h3",cOt,E(t.title),1),u("p",fOt,E(t.description),1)]),t.step?(T(),P("div",pOt," Step "+E(t.step)+" of 8 ",1)):ie("",!0)]))}},hOt={class:"h-[80vh] flex"},mOt={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},gOt={class:"p-5"},vOt={class:"space-y-1"},yOt=["onClick"],bOt={key:1},_Ot={class:"flex-1 min-w-0"},xOt={class:"text-sm font-medium truncate"},wOt={class:"text-xs text-gray-500"},kOt={class:"mt-6 p-4 bg-white rounded-lg border border-gray-200"},SOt={class:"flex items-center justify-between mb-2"},COt={class:"text-sm font-bold text-green-600"},AOt={class:"w-full bg-gray-200 rounded-full h-2"},TOt={class:"text-xs text-gray-500 mt-2"},EOt={class:"flex-1 overflow-y-auto"},MOt={class:"p-6 max-w-5xl mx-auto"},$Ot={class:"space-y-6"},DOt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},ROt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},POt={key:0,class:"mt-1 text-xs text-red-500"},IOt={key:1,class:"mt-1 text-xs text-gray-500"},OOt=["value"],LOt=["value"],VOt={key:0,class:"mt-1 text-xs text-red-500"},NOt={class:"mt-6"},jOt={key:0,class:"mt-1 text-xs text-red-500"},FOt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6"},BOt={class:"space-y-6"},zOt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},UOt={key:0,class:"mt-1 text-xs text-red-500"},HOt={key:0,class:"mt-1 text-xs text-red-500"},qOt={class:"space-y-6"},WOt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},GOt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},YOt=["value"],KOt={class:"relative"},XOt=["value"],ZOt={class:"space-y-6"},QOt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},JOt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},e6t={key:0,class:"mt-1 text-xs text-red-500"},t6t={key:0,class:"mt-1 text-xs text-red-500"},n6t={class:"border-t border-gray-200 pt-6"},r6t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},i6t={class:"bg-blue-50 rounded-lg p-4"},a6t={class:"space-y-3"},s6t={class:"bg-amber-50 rounded-lg p-4"},o6t={class:"space-y-3"},l6t={class:"bg-green-50 rounded-lg p-4"},u6t={class:"space-y-3"},d6t={class:"space-y-6"},c6t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},f6t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},p6t={class:"border-t border-gray-200 pt-6"},h6t={class:"space-y-6"},m6t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},g6t={class:"max-w-md"},v6t={class:"border-t border-gray-200 pt-6"},y6t={class:"space-y-6"},b6t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-8"},_6t={class:"border-t border-gray-200 pt-6"},x6t={class:"space-y-6"},w6t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},k6t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},S6t={class:"border-t border-gray-200 pt-6"},C6t={class:"border-t border-gray-200 pt-6"},A6t={class:"flex items-center justify-between w-full"},T6t={class:"flex items-center space-x-4"},E6t={class:"flex items-center space-x-2"},M6t={class:"flex items-center space-x-2"},$6t={class:"flex items-center space-x-3"},D6t={__name:"EngagementForm",props:{modelValue:{type:Boolean,default:!1},engagement:{type:Object,default:null}},emits:["update:modelValue","created","updated","cancelled"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.modelValue,set:te=>r("update:modelValue",te)}),a=J(()=>{var te;return!!((te=n.engagement)!=null&&te.name)}),s=[{id:"basic",label:"Basic Information",description:"Core details"},{id:"scope",label:"Scope & Objectives",description:"Audit coverage"},{id:"methodology",label:"Methodology",description:"Approach & methods"},{id:"timeline",label:"Timeline",description:"Dates & phases"},{id:"team",label:"Audit Team",description:"Team members"},{id:"contacts",label:"Contacts",description:"Stakeholders"},{id:"data",label:"Data Requirements",description:"Data needs"},{id:"documentation",label:"Documentation",description:"Notes & files"}],o=Q("basic"),l=Jt({engagement_id:"",engagement_title:"",audit_type:"",status:"Planning",planned_audit_reference:"",audit_universe:"",risk_assessment_reference:"",audit_objectives:"",audit_scope:"",scope_exclusions:"",audit_approach:"Risk-Based",materiality_threshold:null,sampling_methodology:"",period_start:"",period_end:"",planning_start:"",planning_end:"",fieldwork_start:"",fieldwork_end:"",reporting_start:"",reporting_end:"",actual_completion_date:"",lead_auditor:"",budgeted_hours:null,process_owner:"",audit_program_reference:"",working_papers_folder:"",notes:"",audit_team:[],key_contacts:[],data_periods:[],bc_data_requirements:[],amendments:[]}),d=Jt({}),c=Q(!1),f=Q(!1),p=[{label:"Planning",value:"Planning"},{label:"Fieldwork",value:"Fieldwork"},{label:"Reporting",value:"Reporting"},{label:"Management Review",value:"Management Review"},{label:"Quality Review",value:"Quality Review"},{label:"Finalized",value:"Finalized"},{label:"Issued",value:"Issued"}],h=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Integrated",value:"Integrated"},{label:"Special Investigation",value:"Special Investigation"},{label:"Follow-up",value:"Follow-up"},{label:"Advisory",value:"Advisory"}],m=[{label:"Risk-Based",value:"Risk-Based"},{label:"Controls-Based",value:"Controls-Based"},{label:"Substantive",value:"Substantive"},{label:"Compliance",value:"Compliance"},{label:"Combined",value:"Combined"}],g=[{label:"Random",value:"Random"},{label:"Systematic",value:"Systematic"},{label:"Stratified",value:"Stratified"},{label:"Judgmental",value:"Judgmental"},{label:"Statistical",value:"Statistical"},{label:"100% Testing",value:"100% Testing"}],v=(te,ne=[],ce=null)=>{const ve={};return te.team_member||(ve.team_member="Team member is required"),te.role||(ve.role="Role is required"),te.planned_hours<0&&(ve.planned_hours="Planned hours cannot be negative"),te.actual_hours<0&&(ve.actual_hours="Actual hours cannot be negative"),Object.keys(ve).length?ve:null},_=[{key:"contact_type",label:"Type",width:"140px",fieldType:"select",options:[{label:"Management",value:"Management"},{label:"Process Owner",value:"Process Owner"},{label:"Subject Matter Expert",value:"Subject Matter Expert"},{label:"IT Contact",value:"IT Contact"},{label:"External Auditor",value:"External Auditor"},{label:"Other",value:"Other"}],required:!0},{key:"contact_name",label:"Name",width:"160px",fieldType:"text",required:!0,placeholder:"Enter name"},{key:"designation",label:"Designation",width:"130px",fieldType:"text",placeholder:"Job title"},{key:"department",label:"Department",width:"120px",fieldType:"text",placeholder:"Department"},{key:"email",label:"Email",width:"170px",fieldType:"data",options:"Email",placeholder:"email@example.com"},{key:"phone",label:"Phone",width:"120px",fieldType:"data",placeholder:"+1234567890"},{key:"is_primary",label:"Primary",width:"65px",fieldType:"checkbox",defaultValue:!1}],x=[{name:"contact_type",label:"Contact Type",component:"select",props:{options:[{label:"Management",value:"Management"},{label:"Process Owner",value:"Process Owner"},{label:"Subject Matter Expert",value:"Subject Matter Expert"},{label:"IT Contact",value:"IT Contact"},{label:"External Auditor",value:"External Auditor"},{label:"Other",value:"Other"}],required:!0}},{name:"contact_name",label:"Contact Name",component:"input",props:{type:"text",required:!0}},{name:"designation",label:"Designation",component:"input",props:{type:"text"}},{name:"department",label:"Department",component:"input",props:{type:"text"}},{name:"email",label:"Email",component:"input",props:{type:"email"}},{name:"phone",label:"Phone",component:"input",props:{type:"tel"}},{name:"is_primary",label:"Is Primary Contact",component:"checkbox"},{name:"communication_preference",label:"Communication Preference",component:"select",props:{options:[{label:"Email",value:"Email"},{label:"Phone",value:"Phone"},{label:"Meeting",value:"Meeting"},{label:"All",value:"All"}]}},{name:"notes",label:"Notes",component:"textarea",props:{rows:2}}],w=(te,ne=[],ce=null)=>{const ve={};return te.contact_type||(ve.contact_type="Contact type is required"),te.contact_name||(ve.contact_name="Contact name is required"),te.email&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te.email)||(ve.email="Invalid email address")),te.phone&&(/^[\d\s\-\+\(\)\.]+$/.test(te.phone)||(ve.phone="Invalid phone number format")),te.is_primary&&ne.length>0&&ne.filter((K,H)=>K.is_primary&&K.contact_type===te.contact_type&&H!==ce).length>0&&(ve.is_primary=`Only one primary contact allowed per contact type (${te.contact_type})`),Object.keys(ve).length?ve:null},k=[{key:"period_name",label:"Period Name",width:"200px",fieldType:"text",required:!0,placeholder:"e.g., Q1 2024"},{key:"start_date",label:"Start Date",width:"130px",fieldType:"date",required:!0},{key:"end_date",label:"End Date",width:"130px",fieldType:"date",required:!0},{key:"data_completeness",label:"Completeness",width:"130px",fieldType:"select",options:[{label:"Complete",value:"Complete"},{label:"Partial",value:"Partial"},{label:"Missing",value:"Missing"}],defaultValue:"Complete",component:"Badge",badgeTheme:{Complete:"green",Partial:"orange",Missing:"red"}},{key:"notes",label:"Notes",width:"200px",fieldType:"text",placeholder:"Additional notes"}],S=[{name:"period_name",label:"Period Name",component:"input",props:{type:"text",required:!0}},{name:"start_date",label:"Start Date",component:"input",props:{type:"date",required:!0}},{name:"end_date",label:"End Date",component:"input",props:{type:"date",required:!0}},{name:"data_completeness",label:"Data Completeness",component:"select",props:{options:[{label:"Complete",value:"Complete"},{label:"Partial",value:"Partial"},{label:"Missing",value:"Missing"}]},defaultValue:"Complete"},{name:"notes",label:"Notes",component:"textarea",props:{rows:2}}],C=te=>{const ne={};return te.period_name||(ne.period_name="Period name is required"),te.start_date||(ne.start_date="Start date is required"),te.end_date||(ne.end_date="End date is required"),te.start_date&&te.end_date&&new Date(te.end_date)<=new Date(te.start_date)&&(ne.end_date="End date must be after start date"),Object.keys(ne).length?ne:null},A=[{key:"data_type",label:"Type",width:"150px"},{key:"description",label:"Description",width:"250px"},{key:"source_system",label:"Source",width:"120px"},{key:"priority",label:"Priority",width:"100px",component:"Badge"},{key:"status",label:"Status",width:"100px",component:"Badge"}],M=[{name:"data_type",label:"Data Type",component:"select",props:{options:[{label:"General Ledger",value:"General Ledger"},{label:"Accounts Payable",value:"Accounts Payable"},{label:"Accounts Receivable",value:"Accounts Receivable"},{label:"Inventory",value:"Inventory"},{label:"Fixed Assets",value:"Fixed Assets"},{label:"Payroll",value:"Payroll"},{label:"Sales Transactions",value:"Sales Transactions"},{label:"Purchase Transactions",value:"Purchase Transactions"},{label:"Bank Statements",value:"Bank Statements"},{label:"Reconciliations",value:"Reconciliations"},{label:"Other",value:"Other"}],required:!0}},{name:"description",label:"Description",component:"textarea",props:{rows:2,required:!0}},{name:"source_system",label:"Source System",component:"input",props:{type:"text"}},{name:"required_fields",label:"Required Fields",component:"textarea",props:{rows:2}},{name:"date_range_required",label:"Date Range Required",component:"checkbox"},{name:"period_start",label:"Period Start",component:"input",props:{type:"date"}},{name:"period_end",label:"Period End",component:"input",props:{type:"date"}},{name:"priority",label:"Priority",component:"select",props:{options:[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}]},defaultValue:"Medium"},{name:"status",label:"Status",component:"select",props:{options:[{label:"Requested",value:"Requested"},{label:"Received",value:"Received"},{label:"Under Review",value:"Under Review"},{label:"Approved",value:"Approved"},{label:"Rejected",value:"Rejected"}]},defaultValue:"Requested"},{name:"requested_date",label:"Requested Date",component:"input",props:{type:"date"}},{name:"received_date",label:"Received Date",component:"input",props:{type:"date"}},{name:"data_quality_notes",label:"Data Quality Notes",component:"textarea",props:{rows:2}}],$=te=>{const ne={};return te.data_type||(ne.data_type="Data type is required"),te.description||(ne.description="Description is required"),te.period_start&&te.period_end&&new Date(te.period_end)<new Date(te.period_start)&&(ne.period_end="Period end date cannot be before period start date"),Object.keys(ne).length?ne:null},R=[{key:"amendment_date",label:"Date",width:"120px",format:te=>te?new Date(te).toLocaleDateString():"-"},{key:"amendment_type",label:"Type",width:"150px"},{key:"description",label:"Description",width:"250px"},{key:"status",label:"Status",width:"100px",component:"Badge"}],I=[{name:"amendment_date",label:"Amendment Date",component:"input",props:{type:"date",required:!0}},{name:"amendment_type",label:"Amendment Type",component:"select",props:{options:[{label:"Scope Change",value:"Scope Change"},{label:"Timeline Extension",value:"Timeline Extension"},{label:"Budget Adjustment",value:"Budget Adjustment"},{label:"Resource Change",value:"Resource Change"},{label:"Methodology Change",value:"Methodology Change"},{label:"Other",value:"Other"}],required:!0}},{name:"description",label:"Description",component:"textarea",props:{rows:2,required:!0}},{name:"reason",label:"Reason",component:"textarea",props:{rows:2,required:!0}},{name:"approved_by",label:"Approved By",component:At,props:{doctype:"User",filters:{enabled:1}}},{name:"impact_on_timeline",label:"Impact on Timeline",component:"textarea",props:{rows:2}},{name:"impact_on_budget",label:"Impact on Budget",component:"textarea",props:{rows:2}},{name:"status",label:"Status",component:"select",props:{options:[{label:"Draft",value:"Draft"},{label:"Approved",value:"Approved"},{label:"Rejected",value:"Rejected"},{label:"Implemented",value:"Implemented"}]},defaultValue:"Draft"}],B=te=>{const ne={};return te.amendment_date||(ne.amendment_date="Amendment date is required"),te.amendment_type||(ne.amendment_type="Amendment type is required"),te.description||(ne.description="Description is required"),te.reason||(ne.reason="Reason is required"),(te.status==="Approved"||te.status==="Implemented")&&!te.approved_by&&(ne.approved_by=`Approval required for status: ${te.status}`),Object.keys(ne).length?ne:null},j=J(()=>s.findIndex(te=>te.id===o.value)),z=te=>{switch(te){case"basic":return l.engagement_title&&l.audit_type&&l.audit_universe?"complete":l.engagement_title||l.audit_type?"partial":"incomplete";case"scope":return l.audit_objectives&&l.audit_scope?"complete":l.audit_objectives||l.audit_scope?"partial":"incomplete";case"methodology":return l.audit_approach?"complete":"incomplete";case"timeline":return l.period_start&&l.period_end?"complete":l.period_start||l.period_end?"partial":"incomplete";case"team":return l.lead_auditor&&l.audit_team.length>0?"complete":l.lead_auditor||l.audit_team.length>0?"partial":"incomplete";case"contacts":return l.key_contacts.length>0?"complete":"incomplete";case"data":return l.data_periods.length>0||l.bc_data_requirements.length>0?"complete":"incomplete";case"documentation":return"complete";default:return"incomplete"}},F=te=>{const ne=z(te);return ne==="complete"?"bg-green-500 text-white":ne==="partial"?"bg-amber-500 text-white":"bg-gray-300 text-gray-600"},q=J(()=>s.filter(te=>z(te.id)==="complete").length),N=J(()=>Math.round(q.value/s.length*100)),O=J(()=>!!(l.engagement_title&&l.audit_type&&l.audit_universe&&l.audit_objectives&&l.audit_scope&&l.audit_approach&&l.period_start&&l.period_end&&l.lead_auditor&&l.audit_team.length>0)),V=()=>{const te=j.value;te>0&&(o.value=s[te-1].id)},L=()=>{const te=j.value;te<s.length-1&&(o.value=s[te+1].id)},U=()=>{const te={};return l.engagement_title||(te.engagement_title="Engagement title is required"),l.audit_type||(te.audit_type="Audit type is required"),l.audit_universe||(te.audit_universe="Audit universe is required"),l.audit_objectives||(te.audit_objectives="Audit objectives are required"),l.audit_scope||(te.audit_scope="Audit scope is required"),l.period_start||(te.period_start="Period start is required"),l.period_end||(te.period_end="Period end is required"),l.lead_auditor||(te.lead_auditor="Lead auditor is required"),l.period_start&&l.period_end&&new Date(l.period_end)<new Date(l.period_start)&&(te.period_end="Period end must be after period start"),l.audit_team.length===0&&(te.audit_team="At least one team member is required"),Object.assign(d,te),Object.keys(te).length===0},G=()=>je(me({},l),{audit_team:l.audit_team.map(te=>je(me({},te),{doctype:"Audit Team Member"})),key_contacts:l.key_contacts.map(te=>je(me({},te),{doctype:"Audit Contact"})),data_periods:l.data_periods.map(te=>je(me({},te),{doctype:"Audit Engagement Data Period"})),bc_data_requirements:l.bc_data_requirements.map(te=>je(me({},te),{doctype:"Audit Data Requirement"})),amendments:l.amendments.map(te=>je(me({},te),{doctype:"Engagement Amendment"}))}),X=()=>le(this,null,function*(){if(!U()){const te=s.find(ne=>z(ne.id)!=="complete");te&&(o.value=te.id);return}try{c.value=!0;const te=G();a.value?r("updated",je(me({},te),{name:n.engagement.name})):r("created",te),i.value=!1}catch(te){console.error("Error saving engagement:",te)}finally{c.value=!1}}),re=()=>le(this,null,function*(){try{f.value=!0;const te=G();r("created",je(me({},te),{status:"Planning"})),i.value=!1}catch(te){console.error("Error saving draft:",te)}finally{f.value=!1}}),ee=()=>{r("cancelled"),i.value=!1},de=()=>{Object.keys(l).forEach(te=>{Array.isArray(l[te])?l[te]=[]:typeof l[te]=="number"?l[te]=null:l[te]=""}),l.status="Planning",l.audit_approach="Risk-Based",Object.keys(d).forEach(te=>delete d[te]),o.value="basic"},se=te=>{te&&Object.keys(l).forEach(ne=>{te[ne]!==void 0&&(l[ne]=te[ne])})};return Je(()=>n.modelValue,te=>{te&&(n.engagement?se(n.engagement):de())}),Je(()=>n.engagement,te=>{te&&n.modelValue&&se(te)},{deep:!0}),(te,ne)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":ne[32]||(ne[32]=ce=>i.value=ce),options:{title:a.value?"Edit Audit Engagement":"Create New Audit Engagement",size:"full"}},{"body-content":D(()=>[u("div",hOt,[u("div",mOt,[u("div",gOt,[ne[34]||(ne[34]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Form Sections",-1)),u("nav",vOt,[(T(),P(_e,null,we(s,(ce,ve)=>u("button",{key:ce.id,onClick:Y=>o.value=ce.id,class:fe(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-left transition-all",[o.value===ce.id?"bg-green-100 border border-green-300 text-green-800":"hover:bg-gray-100 text-gray-700"]])},[u("div",{class:fe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold flex-shrink-0",F(ce.id)])},[z(ce.id)==="complete"?(T(),he(y(Wr),{key:0,class:"h-3 w-3"})):(T(),P("span",bOt,E(ve+1),1))],2),u("div",_Ot,[u("div",xOt,E(ce.label),1),u("div",wOt,E(ce.description),1)])],10,yOt)),64))]),u("div",kOt,[u("div",SOt,[ne[33]||(ne[33]=u("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),u("span",COt,E(N.value)+"%",1)]),u("div",AOt,[u("div",{class:"bg-green-500 h-2 rounded-full transition-all duration-300",style:nt({width:`${N.value}%`})},null,4)]),u("p",TOt,E(q.value)+" of "+E(s.length)+" sections complete ",1)])])]),u("div",EOt,[u("div",MOt,[xe(u("div",$Ot,[b(Dd,{title:"Basic Information",description:"Essential engagement details and identification",icon:"file-text",step:"1"}),u("div",DOt,[u("div",ROt,[u("div",null,[ne[35]||(ne[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Engagement ID "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("input",{"onUpdate:modelValue":ne[0]||(ne[0]=ce=>l.engagement_id=ce),type:"text",placeholder:"Auto-generated if left blank",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.engagement_id?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.engagement_id]]),d.engagement_id?(T(),P("p",POt,E(d.engagement_id),1)):(T(),P("p",IOt,"Format: AE-YYYY-XXX"))]),u("div",null,[ne[36]||(ne[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Status "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("select",{"onUpdate:modelValue":ne[1]||(ne[1]=ce=>l.status=ce),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[(T(),P(_e,null,we(p,ce=>u("option",{key:ce.value,value:ce.value},E(ce.label),9,OOt)),64))],512),[[gn,l.status]])]),u("div",null,[ne[38]||(ne[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Type "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("select",{"onUpdate:modelValue":ne[2]||(ne[2]=ce=>l.audit_type=ce),class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.audit_type?"border-red-300":"border-gray-300"])},[ne[37]||(ne[37]=u("option",{value:""},"Select audit type",-1)),(T(),P(_e,null,we(h,ce=>u("option",{key:ce.value,value:ce.value},E(ce.label),9,LOt)),64))],2),[[gn,l.audit_type]]),d.audit_type?(T(),P("p",VOt,E(d.audit_type),1)):ie("",!0)])]),u("div",NOt,[ne[39]||(ne[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Engagement Title "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("input",{"onUpdate:modelValue":ne[3]||(ne[3]=ce=>l.engagement_title=ce),type:"text",placeholder:"Enter a descriptive engagement title",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.engagement_title?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.engagement_title]]),d.engagement_title?(T(),P("p",jOt,E(d.engagement_title),1)):ie("",!0)]),u("div",FOt,[u("div",null,[ne[40]||(ne[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Universe "),u("span",{class:"text-red-500"},"*")],-1)),b(At,{modelValue:l.audit_universe,"onUpdate:modelValue":ne[4]||(ne[4]=ce=>l.audit_universe=ce),doctype:"Audit Universe",placeholder:"Select audit universe",required:!0,error:d.audit_universe},null,8,["modelValue","error"])]),u("div",null,[ne[41]||(ne[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Planned Audit Reference ",-1)),b(At,{modelValue:l.planned_audit_reference,"onUpdate:modelValue":ne[5]||(ne[5]=ce=>l.planned_audit_reference=ce),doctype:"Annual Audit Plan Item",placeholder:"Link to annual plan"},null,8,["modelValue"])]),u("div",null,[ne[42]||(ne[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Risk Assessment Reference ",-1)),b(At,{modelValue:l.risk_assessment_reference,"onUpdate:modelValue":ne[6]||(ne[6]=ce=>l.risk_assessment_reference=ce),doctype:"Risk Assessment",placeholder:"Link to risk assessment"},null,8,["modelValue"])])])])],512),[[ot,o.value==="basic"]]),xe(u("div",BOt,[b(Dd,{title:"Audit Scope & Objectives",description:"Define what the audit will cover and its goals",icon:"target",step:"2"}),u("div",zOt,[u("div",null,[ne[43]||(ne[43]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Objectives "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("textarea",{"onUpdate:modelValue":ne[7]||(ne[7]=ce=>l.audit_objectives=ce),rows:"4",placeholder:"Describe the primary objectives of this audit engagement...",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.audit_objectives?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.audit_objectives]]),d.audit_objectives?(T(),P("p",UOt,E(d.audit_objectives),1)):ie("",!0)]),u("div",null,[ne[44]||(ne[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Scope "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("textarea",{"onUpdate:modelValue":ne[8]||(ne[8]=ce=>l.audit_scope=ce),rows:"4",placeholder:"Define the boundaries and areas covered by this audit...",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.audit_scope?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.audit_scope]]),d.audit_scope?(T(),P("p",HOt,E(d.audit_scope),1)):ie("",!0)]),u("div",null,[ne[45]||(ne[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Scope Exclusions ",-1)),xe(u("textarea",{"onUpdate:modelValue":ne[9]||(ne[9]=ce=>l.scope_exclusions=ce),rows:"3",placeholder:"Specify any areas explicitly excluded from this audit...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Mt,l.scope_exclusions]])])])],512),[[ot,o.value==="scope"]]),xe(u("div",qOt,[b(Dd,{title:"Audit Methodology",description:"Define the approach and methods to be used",icon:"settings",step:"3"}),u("div",WOt,[u("div",GOt,[u("div",null,[ne[46]||(ne[46]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Approach "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("select",{"onUpdate:modelValue":ne[10]||(ne[10]=ce=>l.audit_approach=ce),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[(T(),P(_e,null,we(m,ce=>u("option",{key:ce.value,value:ce.value},E(ce.label),9,YOt)),64))],512),[[gn,l.audit_approach]])]),u("div",null,[ne[48]||(ne[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Materiality Threshold ",-1)),u("div",KOt,[ne[47]||(ne[47]=u("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},"$",-1)),xe(u("input",{"onUpdate:modelValue":ne[11]||(ne[11]=ce=>l.materiality_threshold=ce),type:"number",min:"0",step:"100",placeholder:"0.00",class:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Mt,l.materiality_threshold,void 0,{number:!0}]])])]),u("div",null,[ne[49]||(ne[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Sampling Methodology ",-1)),xe(u("select",{"onUpdate:modelValue":ne[12]||(ne[12]=ce=>l.sampling_methodology=ce),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[(T(),P(_e,null,we(g,ce=>u("option",{key:ce.value,value:ce.value},E(ce.label),9,XOt)),64))],512),[[gn,l.sampling_methodology]])])])])],512),[[ot,o.value==="methodology"]]),xe(u("div",ZOt,[b(Dd,{title:"Audit Period & Timeline",description:"Set the audit period and key milestone dates",icon:"calendar",step:"4"}),u("div",QOt,[u("div",null,[ne[52]||(ne[52]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Audit Period",-1)),u("div",JOt,[u("div",null,[ne[50]||(ne[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Period Start "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("input",{"onUpdate:modelValue":ne[13]||(ne[13]=ce=>l.period_start=ce),type:"date",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",d.period_start?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.period_start]]),d.period_start?(T(),P("p",e6t,E(d.period_start),1)):ie("",!0)]),u("div",null,[ne[51]||(ne[51]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Period End "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("input",{"onUpdate:modelValue":ne[14]||(ne[14]=ce=>l.period_end=ce),type:"date",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",d.period_end?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.period_end]]),d.period_end?(T(),P("p",t6t,E(d.period_end),1)):ie("",!0)])])]),u("div",n6t,[ne[62]||(ne[62]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Engagement Timeline",-1)),u("div",r6t,[u("div",i6t,[ne[55]||(ne[55]=u("h5",{class:"text-sm font-medium text-blue-800 mb-3"},"Planning Phase",-1)),u("div",a6t,[u("div",null,[ne[53]||(ne[53]=u("label",{class:"block text-xs font-medium text-blue-700 mb-1"},"Start Date",-1)),xe(u("input",{"onUpdate:modelValue":ne[15]||(ne[15]=ce=>l.planning_start=ce),type:"date",class:"w-full px-2 py-1.5 text-sm border border-blue-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[Mt,l.planning_start]])]),u("div",null,[ne[54]||(ne[54]=u("label",{class:"block text-xs font-medium text-blue-700 mb-1"},"End Date",-1)),xe(u("input",{"onUpdate:modelValue":ne[16]||(ne[16]=ce=>l.planning_end=ce),type:"date",class:"w-full px-2 py-1.5 text-sm border border-blue-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[Mt,l.planning_end]])])])]),u("div",s6t,[ne[58]||(ne[58]=u("h5",{class:"text-sm font-medium text-amber-800 mb-3"},"Fieldwork Phase",-1)),u("div",o6t,[u("div",null,[ne[56]||(ne[56]=u("label",{class:"block text-xs font-medium text-amber-700 mb-1"},"Start Date",-1)),xe(u("input",{"onUpdate:modelValue":ne[17]||(ne[17]=ce=>l.fieldwork_start=ce),type:"date",class:"w-full px-2 py-1.5 text-sm border border-amber-200 rounded focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[Mt,l.fieldwork_start]])]),u("div",null,[ne[57]||(ne[57]=u("label",{class:"block text-xs font-medium text-amber-700 mb-1"},"End Date",-1)),xe(u("input",{"onUpdate:modelValue":ne[18]||(ne[18]=ce=>l.fieldwork_end=ce),type:"date",class:"w-full px-2 py-1.5 text-sm border border-amber-200 rounded focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[Mt,l.fieldwork_end]])])])]),u("div",l6t,[ne[61]||(ne[61]=u("h5",{class:"text-sm font-medium text-green-800 mb-3"},"Reporting Phase",-1)),u("div",u6t,[u("div",null,[ne[59]||(ne[59]=u("label",{class:"block text-xs font-medium text-green-700 mb-1"},"Start Date",-1)),xe(u("input",{"onUpdate:modelValue":ne[19]||(ne[19]=ce=>l.reporting_start=ce),type:"date",class:"w-full px-2 py-1.5 text-sm border border-green-200 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Mt,l.reporting_start]])]),u("div",null,[ne[60]||(ne[60]=u("label",{class:"block text-xs font-medium text-green-700 mb-1"},"End Date",-1)),xe(u("input",{"onUpdate:modelValue":ne[20]||(ne[20]=ce=>l.reporting_end=ce),type:"date",class:"w-full px-2 py-1.5 text-sm border border-green-200 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Mt,l.reporting_end]])])])])])])])],512),[[ot,o.value==="timeline"]]),xe(u("div",d6t,[b(Dd,{title:"Audit Team",description:"Assign team members and define roles",icon:"users",step:"5"}),u("div",c6t,[u("div",f6t,[u("div",null,[ne[63]||(ne[63]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Lead Auditor "),u("span",{class:"text-red-500"},"*")],-1)),b(At,{modelValue:l.lead_auditor,"onUpdate:modelValue":ne[21]||(ne[21]=ce=>l.lead_auditor=ce),doctype:"User",filters:{enabled:1},placeholder:"Select lead auditor",required:!0,error:d.lead_auditor},null,8,["modelValue","error"])]),u("div",null,[ne[64]||(ne[64]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Budgeted Hours ",-1)),xe(u("input",{"onUpdate:modelValue":ne[22]||(ne[22]=ce=>l.budgeted_hours=ce),type:"number",min:"0",step:"0.5",placeholder:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Mt,l.budgeted_hours,void 0,{number:!0}]])])]),u("div",p6t,[b(b0,{modelValue:l.audit_team,"onUpdate:modelValue":ne[23]||(ne[23]=ce=>l.audit_team=ce),title:"Audit Team Members","modal-title":"Team Member",doctype:"Audit Team Member",validate:v,required:!0,"auto-add-row":!0},null,8,["modelValue"])])])],512),[[ot,o.value==="team"]]),xe(u("div",h6t,[b(Dd,{title:"Auditee Information",description:"Process owners and key stakeholder contacts",icon:"book-user",step:"6"}),u("div",m6t,[u("div",g6t,[ne[65]||(ne[65]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Process Owner ",-1)),b(At,{modelValue:l.process_owner,"onUpdate:modelValue":ne[24]||(ne[24]=ce=>l.process_owner=ce),doctype:"User",filters:{enabled:1},placeholder:"Select process owner"},null,8,["modelValue"])]),u("div",v6t,[b(b0,{modelValue:l.key_contacts,"onUpdate:modelValue":ne[25]||(ne[25]=ce=>l.key_contacts=ce),title:"Key Contacts","modal-title":"Contact",columns:_,"form-fields":x,validate:w,"auto-add-row":!0},null,8,["modelValue"])])])],512),[[ot,o.value==="contacts"]]),xe(u("div",y6t,[b(Dd,{title:"Data Requirements",description:"Define data periods and BC data needs",icon:"database",step:"7"}),u("div",b6t,[b(b0,{modelValue:l.data_periods,"onUpdate:modelValue":ne[26]||(ne[26]=ce=>l.data_periods=ce),title:"Data Periods","modal-title":"Data Period",columns:k,"form-fields":S,validate:C,"auto-add-row":!0},null,8,["modelValue"]),u("div",_6t,[b(rs,{modelValue:l.bc_data_requirements,"onUpdate:modelValue":ne[27]||(ne[27]=ce=>l.bc_data_requirements=ce),title:"BC Data Requirements","modal-title":"Data Requirement",columns:A,"form-fields":M,validate:$},null,8,["modelValue"])])])],512),[[ot,o.value==="data"]]),xe(u("div",x6t,[b(Dd,{title:"Documentation & Notes",description:"Working papers, amendments, and additional notes",icon:"folder",step:"8"}),u("div",w6t,[u("div",k6t,[u("div",null,[ne[66]||(ne[66]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Audit Program Reference ",-1)),b(At,{modelValue:l.audit_program_reference,"onUpdate:modelValue":ne[28]||(ne[28]=ce=>l.audit_program_reference=ce),doctype:"Audit Program",placeholder:"Link to audit program"},null,8,["modelValue"])]),u("div",null,[ne[67]||(ne[67]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Working Papers Folder ",-1)),xe(u("input",{"onUpdate:modelValue":ne[29]||(ne[29]=ce=>l.working_papers_folder=ce),type:"text",placeholder:"Enter folder path or reference",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Mt,l.working_papers_folder]])])]),u("div",S6t,[b(rs,{modelValue:l.amendments,"onUpdate:modelValue":ne[30]||(ne[30]=ce=>l.amendments=ce),title:"Engagement Amendments","modal-title":"Amendment",columns:R,"form-fields":I,validate:B},null,8,["modelValue"])]),u("div",C6t,[ne[68]||(ne[68]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Notes ",-1)),xe(u("textarea",{"onUpdate:modelValue":ne[31]||(ne[31]=ce=>l.notes=ce),rows:"4",placeholder:"Additional notes or comments...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Mt,l.notes]])])])],512),[[ot,o.value==="documentation"]])])])])]),actions:D(()=>[u("div",A6t,[u("div",T6t,[u("div",E6t,[u("div",{class:fe(["w-3 h-3 rounded-full",O.value?"bg-green-500":"bg-amber-500"])},null,2),u("span",{class:fe(["text-sm font-medium",O.value?"text-green-700":"text-amber-700"])},E(O.value?"Ready to save":"Complete required fields"),3)]),u("div",M6t,[b(y(Z),{variant:"ghost",size:"sm",disabled:j.value===0,onClick:V},{default:D(()=>[b(y(pr),{class:"h-4 w-4 mr-1"}),ne[69]||(ne[69]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(y(Z),{variant:"ghost",size:"sm",disabled:j.value===s.length-1,onClick:L},{default:D(()=>[ne[70]||(ne[70]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4 ml-1"})]),_:1},8,["disabled"])])]),u("div",$6t,[b(y(Z),{variant:"outline",onClick:ee,disabled:c.value},{default:D(()=>[...ne[71]||(ne[71]=[W(" Cancel ",-1)])]),_:1},8,["disabled"]),a.value?ie("",!0):(T(),he(y(Z),{key:0,variant:"outline",theme:"gray",onClick:re,loading:f.value,disabled:c.value},{default:D(()=>[...ne[72]||(ne[72]=[W(" Save as Draft ",-1)])]),_:1},8,["loading","disabled"])),b(y(Z),{variant:"solid",theme:"green",onClick:X,loading:c.value},{prefix:D(()=>[a.value?(T(),he(y(Wr),{key:1,class:"h-4 w-4"})):(T(),he(y(tt),{key:0,class:"h-4 w-4"}))]),default:D(()=>[W(" "+E(a.value?"Update Engagement":"Create Engagement"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","options"]))}},R6t={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-6 gap-4"},P6t={class:"bg-green-50 rounded-xl border border-green-200 p-6 hover:shadow-lg transition-shadow"},I6t={class:"flex items-center justify-between"},O6t={class:"text-3xl font-bold text-green-900 mt-1"},L6t={class:"p-3 bg-green-500 rounded-xl shadow-sm"},V6t={class:"bg-blue-50 rounded-xl border border-blue-200 p-6 hover:shadow-lg transition-shadow"},N6t={class:"flex items-center justify-between"},j6t={class:"text-3xl font-bold text-blue-900 mt-1"},F6t={class:"text-xs text-blue-600 mt-1"},B6t={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},z6t={class:"bg-purple-50 rounded-xl border border-purple-200 p-6 hover:shadow-lg transition-shadow"},U6t={class:"flex items-center justify-between"},H6t={class:"text-3xl font-bold text-purple-900 mt-1"},q6t={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},W6t={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-6 hover:shadow-lg transition-shadow"},G6t={class:"flex items-center justify-between"},Y6t={class:"text-3xl font-bold text-yellow-900 mt-1"},K6t={class:"w-full bg-yellow-200 rounded-full h-2 mt-2"},X6t={class:"p-3 bg-yellow-500 rounded-xl shadow-sm"},Z6t={class:"bg-indigo-50 rounded-xl border border-indigo-200 p-6 hover:shadow-lg transition-shadow"},Q6t={class:"flex items-center justify-between"},J6t={class:"text-3xl font-bold text-indigo-900 mt-1"},eLt={class:"p-3 bg-indigo-500 rounded-xl shadow-sm"},tLt={class:"bg-emerald-50 rounded-xl border border-emerald-200 p-6 hover:shadow-lg transition-shadow"},nLt={class:"flex items-center justify-between"},rLt={class:"text-3xl font-bold text-emerald-900 mt-1"},iLt={class:"text-xs text-emerald-600 mt-1"},aLt={class:"p-3 bg-emerald-500 rounded-xl shadow-sm"},sLt={__name:"EngagementStats",props:{engagements:{type:Array,default:()=>[]}},setup(t){const e=t,n=J(()=>e.engagements.length),r=J(()=>e.engagements.filter(l=>l.status==="In Progress").length),i=J(()=>e.engagements.filter(l=>l.status==="Reporting").length),a=J(()=>e.engagements.filter(l=>l.status==="Quality Review").length),s=J(()=>e.engagements.filter(l=>l.status==="Completed").length),o=J(()=>{if(e.engagements.length===0)return 0;const l=e.engagements.reduce((d,c)=>d+(c.progress_percentage||0),0);return Math.round(l/e.engagements.length)});return(l,d)=>(T(),P("div",R6t,[u("div",P6t,[u("div",I6t,[u("div",null,[d[0]||(d[0]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Total Engagements",-1)),u("p",O6t,E(n.value),1),d[1]||(d[1]=u("p",{class:"text-xs text-green-600 mt-1"},"Active projects",-1))]),u("div",L6t,[b(y(zS),{class:"h-7 w-7 text-white"})])])]),u("div",V6t,[u("div",N6t,[u("div",null,[d[2]||(d[2]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"In Progress",-1)),u("p",j6t,E(r.value),1),u("p",F6t,E((r.value/Math.max(n.value,1)*100).toFixed(0))+"% of total",1)]),u("div",B6t,[b(y(eb),{class:"h-7 w-7 text-white"})])])]),u("div",z6t,[u("div",U6t,[u("div",null,[d[3]||(d[3]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Reporting",-1)),u("p",H6t,E(i.value),1),d[4]||(d[4]=u("p",{class:"text-xs text-purple-600 mt-1"},"Final reports",-1))]),u("div",q6t,[b(y(vt),{class:"h-7 w-7 text-white"})])])]),u("div",W6t,[u("div",G6t,[u("div",null,[d[5]||(d[5]=u("p",{class:"text-sm font-semibold text-yellow-700 uppercase tracking-wide"},"Avg. Progress",-1)),u("p",Y6t,E(o.value)+"%",1),u("div",K6t,[u("div",{class:"bg-yellow-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${o.value}%`})},null,4)])]),u("div",X6t,[b(y(J1),{class:"h-7 w-7 text-white"})])])]),u("div",Z6t,[u("div",Q6t,[u("div",null,[d[6]||(d[6]=u("p",{class:"text-sm font-semibold text-indigo-700 uppercase tracking-wide"},"Quality Review",-1)),u("p",J6t,E(a.value),1),d[7]||(d[7]=u("p",{class:"text-xs text-indigo-600 mt-1"},"Under review",-1))]),u("div",eLt,[b(y(Gt),{class:"h-7 w-7 text-white"})])])]),u("div",tLt,[u("div",nLt,[u("div",null,[d[8]||(d[8]=u("p",{class:"text-sm font-semibold text-emerald-700 uppercase tracking-wide"},"Completed",-1)),u("p",rLt,E(s.value),1),u("p",iLt,E((s.value/Math.max(n.value,1)*100).toFixed(0))+"% completion rate",1)]),u("div",aLt,[b(y(Gt),{class:"h-7 w-7 text-white"})])])])]))}},oLt={class:"space-y-6"},lLt={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},uLt={class:"flex items-center space-x-3"},dLt={class:"p-2 bg-green-100 rounded-lg"},cLt={class:"flex flex-wrap items-center gap-3"},fLt={class:"p-1"},pLt={class:"p-1"},hLt={class:"p-1"},mLt={class:"p-1"},gLt={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},vLt={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},yLt={class:"flex flex-col sm:flex-row gap-4 flex-1"},bLt={class:"relative flex-1 max-w-md"},_Lt={class:"flex gap-2"},xLt=["value"],wLt={class:"flex items-center gap-3"},kLt={class:"flex items-center bg-gray-100 rounded-lg p-1"},SLt={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},CLt={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},ALt={class:"flex items-center justify-between"},TLt={class:"flex items-center space-x-3"},ELt={class:"text-sm font-medium text-gray-700"},MLt={class:"flex items-center space-x-2"},$Lt={key:0,class:"p-6"},DLt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},RLt=["onClick"],PLt={class:"flex items-start justify-between mb-4"},ILt={class:"flex-1"},OLt={class:"text-lg font-semibold text-gray-900 mb-1"},LLt={class:"text-sm text-gray-600 mb-2"},VLt={class:"flex items-center space-x-2"},NLt={class:"space-y-3"},jLt={class:"grid grid-cols-2 gap-4"},FLt={class:"text-sm font-medium text-gray-900"},BLt={class:"text-sm font-medium text-gray-900"},zLt={class:"grid grid-cols-2 gap-4"},ULt={class:"text-sm font-medium text-gray-900"},HLt={class:"grid grid-cols-2 gap-4"},qLt={class:"text-sm font-medium text-gray-900"},WLt={key:0,class:"text-xs text-gray-500"},GLt={class:"flex items-center space-x-2"},YLt={class:"text-sm font-medium text-gray-900"},KLt={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},XLt={key:0},ZLt={class:"flex items-center justify-end space-x-2 mt-4 pt-4 border-t border-gray-200"},QLt={key:1,class:"overflow-x-auto"},JLt={class:"min-w-full divide-y divide-gray-200"},e8t={class:"bg-gray-50"},t8t={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},n8t={class:"bg-white divide-y divide-gray-200"},r8t={class:"px-6 py-4 whitespace-nowrap"},i8t={class:"px-6 py-4 whitespace-nowrap"},a8t={class:"flex items-center"},s8t={class:"flex-shrink-0 h-10 w-10"},o8t={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},l8t={class:"ml-4"},u8t={class:"text-sm font-medium text-gray-900"},d8t={class:"px-6 py-4 whitespace-nowrap"},c8t={class:"text-sm font-medium text-gray-900"},f8t={class:"text-sm text-gray-500"},p8t={class:"px-6 py-4 whitespace-nowrap"},h8t={class:"px-6 py-4 whitespace-nowrap"},m8t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},g8t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},v8t={class:"px-6 py-4 whitespace-nowrap"},y8t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},b8t={class:"text-xs text-gray-500"},_8t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},x8t={class:"flex items-center"},w8t={class:"font-medium"},k8t={key:0,class:"text-xs text-gray-500 ml-1"},S8t={class:"px-6 py-4 whitespace-nowrap"},C8t={key:1,class:"text-sm text-gray-400"},A8t={class:"px-6 py-4 whitespace-nowrap"},T8t={class:"flex items-center space-x-2"},E8t={class:"text-sm font-medium text-gray-900"},M8t={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},$8t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},D8t={class:"flex items-center space-x-2"},R8t={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},P8t={class:"flex items-center justify-between"},I8t={class:"text-sm text-gray-700"},O8t={class:"flex items-center space-x-2"},L8t={class:"text-sm text-gray-700"},V8t={key:0,class:"text-center py-12 bg-white rounded-xl border border-gray-200"},N8t={class:"mt-1 text-sm text-gray-500"},j8t={class:"mt-6"},F8t={class:"space-y-4"},B8t={class:"space-y-2"},z8t={class:"flex items-center space-x-2"},U8t={class:"flex items-center space-x-2"},H8t={class:"flex items-center space-x-2"},q8t={class:"flex items-center space-x-2"},W8t={class:"space-y-4"},G8t={class:"text-sm text-gray-600"},Y8t={class:"space-y-3"},K8t={class:"flex items-center space-x-2"},X8t={class:"space-y-4"},Z8t={class:"grid grid-cols-2 gap-4"},Q8t={class:"bg-blue-50 p-4 rounded-lg"},J8t={class:"text-2xl font-bold text-blue-600"},eVt={class:"bg-green-50 p-4 rounded-lg"},tVt={class:"text-2xl font-bold text-green-600"},nVt={class:"space-y-2"},rVt={class:"space-y-2 max-h-40 overflow-y-auto"},iVt={class:"text-sm"},aVt={class:"flex items-center space-x-2"},sVt={class:"w-20 bg-gray-200 rounded-full h-2"},oVt={class:"text-xs text-gray-600"},lVt={__name:"EngagementList",setup(t){const e=xn(),n=Bo(),r=Q(!1),i=Q({search:"",status:"",type:"",auditor:"",approach:"",opinion:""}),a=Q([]),s=Q("period_start"),o=Q(1),l=Q(10),d=Q("table");Q(!1);const c=Q(!1),f=Q(!1),p=Q(!1),h=Q(!1),m=Q(!1),g=Q(!1),v=Q(""),_=Q(""),x=Q(""),w=Q(!1),k=Q(null),S=J(()=>n.engagements),C=J(()=>{let ee=S.value;return i.value.search&&(ee=ee.filter(de=>{var se,te;return((se=de.engagement_title)==null?void 0:se.toLowerCase().includes(i.value.search.toLowerCase()))||((te=de.engagement_id)==null?void 0:te.toLowerCase().includes(i.value.search.toLowerCase()))})),i.value.status&&(ee=ee.filter(de=>de.status===i.value.status)),i.value.type&&(ee=ee.filter(de=>de.audit_type===i.value.type)),i.value.approach&&(ee=ee.filter(de=>de.audit_approach===i.value.approach)),i.value.opinion&&(ee=ee.filter(de=>de.overall_audit_opinion===i.value.opinion)),ee}),A=[{label:"All Status",value:""},{label:"Planning",value:"Planning"},{label:"Fieldwork",value:"Fieldwork"},{label:"Reporting",value:"Reporting"},{label:"Management Review",value:"Management Review"},{label:"Quality Review",value:"Quality Review"},{label:"Finalized",value:"Finalized"},{label:"Issued",value:"Issued"}],M=J(()=>{const ee=new Set;return S.value.forEach(de=>{de.lead_auditor&&ee.add(de.lead_auditor)}),[{label:"All Auditors",value:""},...Array.from(ee).map(de=>({label:de,value:de}))]}),$=J({get:()=>C.value.length>0&&a.value.length===C.value.length,set:ee=>{ee?a.value=C.value.map(de=>de.name):a.value=[]}}),R=J(()=>{const ee=(o.value-1)*l.value,de=ee+l.value;return C.value.slice(ee,de)}),I=J(()=>Math.ceil(C.value.length/l.value));J(()=>S.value.length);const B=J(()=>S.value.filter(ee=>ee.status==="Fieldwork").length),j=J(()=>S.value.filter(ee=>ee.status==="Reporting").length);J(()=>S.value.filter(ee=>ee.status==="Issued"||ee.status==="Finalized").length),J(()=>{if(S.value.length===0)return 0;const ee=S.value.reduce((de,se)=>de+N(se),0);return Math.round(ee/S.value.length)}),J(()=>S.value.filter(ee=>ee.status==="Quality Review").length),J(()=>{const ee=S.value.filter(se=>se.quality_score);if(ee.length===0)return 0;const de=ee.reduce((se,te)=>se+(te.quality_score||0),0);return Math.round(de/ee.length)});const z=J(()=>B.value+j.value),F=J(()=>Math.max(0,20-z.value)),q=J(()=>{const ee={};return S.value.forEach(de=>{de.lead_auditor&&(ee[de.lead_auditor]||(ee[de.lead_auditor]={name:de.lead_auditor,count:0}),ee[de.lead_auditor].count++)}),Object.values(ee).map(de=>je(me({},de),{load:Math.min(100,Math.round(de.count/5*100))}))}),N=ee=>{const de=new Date,se=ee.planning_start?new Date(ee.planning_start):null,te=ee.actual_completion_date?new Date(ee.actual_completion_date):ee.reporting_end?new Date(ee.reporting_end):ee.fieldwork_end?new Date(ee.fieldwork_end):null;if(!se||!te||de<se)return 0;if(de>te)return 100;const ne=te-se,ce=de-se;return Math.round(ce/ne*100)},O=ee=>{e.push(`/engagements/${ee.name}`)},V=ee=>{e.push(`/engagements/${ee.name}/edit`)},L=ee=>{confirm("Are you sure you want to delete this engagement?")},U=()=>{k.value=null,g.value=!0},G=ee=>le(this,null,function*(){g.value=!1,k.value=null,yield re()}),X=ee=>le(this,null,function*(){g.value=!1,k.value=null,yield re()}),re=()=>le(this,null,function*(){try{r.value=!0,yield n.fetchEngagements()}catch(ee){console.error("Error loading engagements:",ee)}finally{r.value=!1}});return bt(()=>{re()}),(ee,de)=>(T(),P("div",oLt,[u("div",lLt,[u("div",null,[u("div",uLt,[u("div",dLt,[b(y(vt),{class:"h-6 w-6 text-green-600"})]),de[30]||(de[30]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Engagements"),u("p",{class:"text-gray-600 mt-1"}," Manage and track audit engagements throughout their lifecycle ")],-1))])]),u("div",cLt,[u("div",fLt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:ee.exportEngagements,loading:p.value},{prefix:D(()=>[b(y(bn),{class:"h-3.5 w-3.5"})]),default:D(()=>[de[31]||(de[31]=W(" Export ",-1))]),_:1},8,["onClick","loading"])]),u("div",pLt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:de[0]||(de[0]=se=>f.value=!0)},{prefix:D(()=>[b(y(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[de[32]||(de[32]=W(" Templates ",-1))]),_:1})]),u("div",hLt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:ee.refreshData,loading:r.value},{prefix:D(()=>[b(y(hn),{class:"h-3.5 w-3.5"})]),default:D(()=>[de[33]||(de[33]=W(" Refresh ",-1))]),_:1},8,["onClick","loading"])]),u("div",mLt,[b(y(Z),{variant:"solid",theme:"green",size:"sm",onClick:U},{prefix:D(()=>[b(y(tt),{class:"h-3.5 w-3.5"})]),default:D(()=>[de[34]||(de[34]=W(" New Engagement ",-1))]),_:1})])])]),b(sLt,{engagements:S.value},null,8,["engagements"]),u("div",gLt,[u("div",vLt,[u("div",yLt,[u("div",bLt,[b(y(Rn),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),xe(u("input",{"onUpdate:modelValue":de[1]||(de[1]=se=>i.value.search=se),type:"text",placeholder:"Search engagements...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Mt,i.value.search]])]),u("div",_Lt,[xe(u("select",{"onUpdate:modelValue":de[2]||(de[2]=se=>i.value.status=se),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...de[35]||(de[35]=[ur('<option value="">All Status</option><option value="Planning">Planning</option><option value="Fieldwork">Fieldwork</option><option value="Reporting">Reporting</option><option value="Management Review">Management Review</option><option value="Quality Review">Quality Review</option><option value="Finalized">Finalized</option><option value="Issued">Issued</option>',8)])],512),[[gn,i.value.status]]),xe(u("select",{"onUpdate:modelValue":de[3]||(de[3]=se=>i.value.type=se),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...de[36]||(de[36]=[ur('<option value="">All Types</option><option value="Financial">Financial</option><option value="Operational">Operational</option><option value="Compliance">Compliance</option><option value="IT">IT</option><option value="Integrated">Integrated</option><option value="Special Investigation">Special Investigation</option><option value="Follow-up">Follow-up</option><option value="Advisory">Advisory</option>',9)])],512),[[gn,i.value.type]]),xe(u("select",{"onUpdate:modelValue":de[4]||(de[4]=se=>i.value.auditor=se),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[de[37]||(de[37]=u("option",{value:""},"All Auditors",-1)),(T(!0),P(_e,null,we(Array.from(new Set(S.value.map(se=>se.lead_auditor).filter(Boolean))),se=>(T(),P("option",{key:se,value:se},E(se),9,xLt))),128))],512),[[gn,i.value.auditor]]),xe(u("select",{"onUpdate:modelValue":de[5]||(de[5]=se=>i.value.approach=se),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...de[38]||(de[38]=[ur('<option value="">All Approaches</option><option value="Risk-Based">Risk-Based</option><option value="Controls-Based">Controls-Based</option><option value="Substantive">Substantive</option><option value="Compliance">Compliance</option><option value="Combined">Combined</option>',6)])],512),[[gn,i.value.approach]]),xe(u("select",{"onUpdate:modelValue":de[6]||(de[6]=se=>i.value.opinion=se),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...de[39]||(de[39]=[ur('<option value="">All Opinions</option><option value="Satisfactory">Satisfactory</option><option value="Satisfactory with Minor Issues">Satisfactory with Minor Issues</option><option value="Needs Improvement">Needs Improvement</option><option value="Unsatisfactory">Unsatisfactory</option>',5)])],512),[[gn,i.value.opinion]])])]),u("div",wLt,[u("div",kLt,[u("button",{onClick:de[7]||(de[7]=se=>d.value="table"),class:fe(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors",d.value==="table"?"bg-white text-green-700 shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(y(ZD),{class:"h-4 w-4 inline mr-1"}),de[40]||(de[40]=W(" Table ",-1))],2),u("button",{onClick:de[8]||(de[8]=se=>d.value="cards"),class:fe(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors",d.value==="cards"?"bg-white text-green-700 shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(y(gY),{class:"h-4 w-4 inline mr-1"}),de[41]||(de[41]=W(" Cards ",-1))],2)]),b(y(Z),{onClick:de[9]||(de[9]=se=>h.value=!0),variant:"outline",class:"flex items-center gap-2"},{default:D(()=>[b(y(vt),{class:"h-4 w-4"}),de[42]||(de[42]=W(" Templates ",-1))]),_:1}),b(y(Z),{onClick:de[10]||(de[10]=se=>m.value=!0),variant:"outline",class:"flex items-center gap-2",disabled:a.value.length===0},{default:D(()=>[b(y(Bc),{class:"h-4 w-4"}),de[43]||(de[43]=W(" Bulk Actions ",-1))]),_:1},8,["disabled"]),b(y(Z),{onClick:U,variant:"solid",class:"flex items-center gap-2 bg-green-600 hover:bg-green-700"},{default:D(()=>[b(y(tt),{class:"h-4 w-4"}),de[44]||(de[44]=W(" New Engagement ",-1))]),_:1})])])]),u("div",SLt,[u("div",CLt,[u("div",ALt,[u("div",TLt,[b(y(Ut),{modelValue:$.value,"onUpdate:modelValue":ee.toggleSelectAll},null,8,["modelValue","onUpdate:modelValue"]),u("span",ELt,E(a.value.length)+" of "+E(C.value.length)+" selected ",1)]),u("div",MLt,[b(y(Z),{variant:"outline",size:"sm",onClick:de[11]||(de[11]=se=>s.value=s.value==="period_start"?"period_end":"period_start")},{default:D(()=>[b(y(Yu),{class:"h-4 w-4 mr-2"}),W(" Sort by "+E(s.value==="period_start"?"End Date":"Start Date"),1)]),_:1})])])]),d.value==="cards"?(T(),P("div",$Lt,[u("div",DLt,[(T(!0),P(_e,null,we(R.value,se=>(T(),P("div",{key:se.name,class:fe(["bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer",{"ring-2 ring-green-500":a.value.includes(se.name)}]),onClick:te=>O(se)},[u("div",PLt,[u("div",ILt,[u("h3",OLt,E(se.engagement_title||"Untitled"),1),u("p",LLt,E(se.engagement_id),1),u("div",VLt,[b(y(Ee),{theme:ee.getAuditTypeTheme(se.audit_type)},{default:D(()=>[W(E(se.audit_type),1)]),_:2},1032,["theme"]),b(y(Ee),{theme:ee.getStatusTheme(se.status)},{default:D(()=>[W(E(se.status),1)]),_:2},1032,["theme"])])]),b(y(Ut),{modelValue:a.value.includes(se.name),"onUpdate:modelValue":te=>ee.toggleEngagementSelection(se.name),onClick:de[12]||(de[12]=dt(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])]),u("div",NLt,[u("div",jLt,[u("div",null,[de[45]||(de[45]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Lead Auditor",-1)),u("p",FLt,E(se.lead_auditor||"Unassigned"),1)]),u("div",null,[de[46]||(de[46]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Universe",-1)),u("p",BLt,E(se.audit_universe||"N/A"),1)])]),u("div",zLt,[u("div",null,[de[47]||(de[47]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Period",-1)),u("p",ULt,E(ee.formatDate(se.period_start))+" - "+E(ee.formatDate(se.period_end)),1)]),u("div",null,[de[48]||(de[48]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Approach",-1)),b(y(Ee),{theme:"gray"},{default:D(()=>[W(E(se.audit_approach||"Not Set"),1)]),_:2},1024)])]),u("div",HLt,[u("div",null,[de[49]||(de[49]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Budget Hours",-1)),u("p",qLt,[W(E(se.budgeted_hours||0)+"h ",1),se.actual_hours?(T(),P("span",WLt," ("+E(se.actual_hours)+"h used) ",1)):ie("",!0)])]),u("div",null,[de[50]||(de[50]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Findings",-1)),u("div",GLt,[u("span",YLt,E(se.findings_count||0),1),se.high_risk_findings_count?(T(),P("span",KLt,E(se.high_risk_findings_count)+" High ",1)):ie("",!0)])])]),se.overall_audit_opinion?(T(),P("div",XLt,[de[51]||(de[51]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Opinion",-1)),b(y(Ee),{theme:ee.getOpinionTheme(se.overall_audit_opinion)},{default:D(()=>[W(E(se.overall_audit_opinion),1)]),_:2},1032,["theme"])])):ie("",!0)]),u("div",ZLt,[b(y(Z),{variant:"ghost",size:"sm",onClick:dt(te=>O(se),["stop"])},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(te=>V(se),["stop"])},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(te=>L(),["stop"]),theme:"red"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])],10,RLt))),128))])])):ie("",!0),d.value==="table"?(T(),P("div",QLt,[u("table",JLt,[u("thead",e8t,[u("tr",null,[u("th",t8t,[b(y(Ut),{modelValue:$.value,"onUpdate:modelValue":ee.toggleSelectAll},null,8,["modelValue","onUpdate:modelValue"])]),de[52]||(de[52]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Engagement ID ",-1)),de[53]||(de[53]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title ",-1)),de[54]||(de[54]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ",-1)),de[55]||(de[55]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),de[56]||(de[56]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Lead Auditor ",-1)),de[57]||(de[57]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Audit Universe ",-1)),de[58]||(de[58]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Approach ",-1)),de[59]||(de[59]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Period ",-1)),de[60]||(de[60]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Budget Hours ",-1)),de[61]||(de[61]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Opinion ",-1)),de[62]||(de[62]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Findings ",-1)),de[63]||(de[63]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",n8t,[(T(!0),P(_e,null,we(R.value,se=>(T(),P("tr",{key:se.name,class:fe(["hover:bg-gray-50 transition-colors",{"bg-green-50":a.value.includes(se.name)}])},[u("td",r8t,[b(y(Ut),{modelValue:a.value.includes(se.name),"onUpdate:modelValue":te=>ee.toggleEngagementSelection(se.name)},null,8,["modelValue","onUpdate:modelValue"])]),u("td",i8t,[u("div",a8t,[u("div",s8t,[u("div",o8t,[b(y(vt),{class:"h-5 w-5 text-gray-600"})])]),u("div",l8t,[u("div",u8t,E(se.engagement_id),1)])])]),u("td",d8t,[u("div",c8t,E(se.engagement_title||"Untitled"),1),u("div",f8t,E(se.audit_universe||"No universe specified"),1)]),u("td",p8t,[b(y(Ee),{theme:ee.getAuditTypeTheme(se.audit_type)},{default:D(()=>[W(E(se.audit_type),1)]),_:2},1032,["theme"])]),u("td",h8t,[b(y(Ee),{theme:ee.getStatusTheme(se.status)},{default:D(()=>[W(E(se.status),1)]),_:2},1032,["theme"])]),u("td",m8t,E(se.lead_auditor||"Unassigned"),1),u("td",g8t,E(se.audit_universe||"N/A"),1),u("td",v8t,[b(y(Ee),{theme:"gray"},{default:D(()=>[W(E(se.audit_approach||"Not Set"),1)]),_:2},1024)]),u("td",y8t,[u("div",null,E(ee.formatDate(se.period_start)),1),u("div",b8t,"to "+E(ee.formatDate(se.period_end)),1)]),u("td",_8t,[u("div",x8t,[u("span",w8t,E(se.budgeted_hours||0)+"h",1),se.actual_hours?(T(),P("span",k8t," ("+E(se.actual_hours)+"h used) ",1)):ie("",!0)])]),u("td",S8t,[se.overall_audit_opinion?(T(),he(y(Ee),{key:0,theme:ee.getOpinionTheme(se.overall_audit_opinion)},{default:D(()=>[W(E(se.overall_audit_opinion),1)]),_:2},1032,["theme"])):(T(),P("span",C8t,"Pending"))]),u("td",A8t,[u("div",T8t,[u("span",E8t,E(se.findings_count||0),1),se.high_risk_findings_count?(T(),P("span",M8t,E(se.high_risk_findings_count)+" High ",1)):ie("",!0)])]),u("td",$8t,[u("div",D8t,[b(y(Z),{variant:"ghost",size:"sm",onClick:te=>O(se)},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:te=>V(se)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:te=>L(),theme:"red"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2))),128))])])])):ie("",!0),u("div",R8t,[u("div",P8t,[u("div",I8t," Showing "+E((o.value-1)*l.value+1)+" to "+E(Math.min(o.value*l.value,C.value.length))+" of "+E(C.value.length)+" results ",1),u("div",O8t,[b(y(Z),{variant:"outline",size:"sm",disabled:o.value===1,onClick:de[13]||(de[13]=se=>o.value--)},{default:D(()=>[b(y(pr),{class:"h-4 w-4"}),de[64]||(de[64]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",L8t," Page "+E(o.value)+" of "+E(I.value),1),b(y(Z),{variant:"outline",size:"sm",disabled:o.value===I.value,onClick:de[14]||(de[14]=se=>o.value++)},{default:D(()=>[de[65]||(de[65]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])]),C.value.length===0?(T(),P("div",V8t,[b(y(vt),{class:"mx-auto h-12 w-12 text-gray-400"}),de[67]||(de[67]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No engagements found",-1)),u("p",N8t,E(i.value.search||i.value.status||i.value.type||i.value.auditor?"No engagements match your current filters.":"Get started by creating your first audit engagement."),1),u("div",j8t,[b(y(Z),{onClick:U,class:"bg-green-600 hover:bg-green-700 text-white"},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),de[66]||(de[66]=W(" Create Engagement ",-1))]),_:1})])])):ie("",!0),b(y(zt),{modelValue:h.value,"onUpdate:modelValue":de[20]||(de[20]=se=>h.value=se),options:{title:"Apply Template"}},{"body-content":D(()=>[u("div",F8t,[de[72]||(de[72]=u("p",{class:"text-sm text-gray-600"}," Select a template to apply to the selected engagements: ",-1)),u("div",B8t,[u("label",z8t,[xe(u("input",{type:"radio","onUpdate:modelValue":de[15]||(de[15]=se=>v.value=se),value:"financial-audit",class:"text-blue-600"},null,512),[[Ki,v.value]]),de[68]||(de[68]=u("span",{class:"text-sm"},"Financial Audit Template",-1))]),u("label",U8t,[xe(u("input",{type:"radio","onUpdate:modelValue":de[16]||(de[16]=se=>v.value=se),value:"operational-audit",class:"text-blue-600"},null,512),[[Ki,v.value]]),de[69]||(de[69]=u("span",{class:"text-sm"},"Operational Audit Template",-1))]),u("label",H8t,[xe(u("input",{type:"radio","onUpdate:modelValue":de[17]||(de[17]=se=>v.value=se),value:"compliance-audit",class:"text-blue-600"},null,512),[[Ki,v.value]]),de[70]||(de[70]=u("span",{class:"text-sm"},"Compliance Audit Template",-1))]),u("label",q8t,[xe(u("input",{type:"radio","onUpdate:modelValue":de[18]||(de[18]=se=>v.value=se),value:"it-audit",class:"text-blue-600"},null,512),[[Ki,v.value]]),de[71]||(de[71]=u("span",{class:"text-sm"},"IT Audit Template",-1))])])])]),actions:D(()=>[b(y(Z),{variant:"ghost",onClick:de[19]||(de[19]=se=>h.value=!1)},{default:D(()=>[...de[73]||(de[73]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:ee.applyTemplate,disabled:!v.value},{default:D(()=>[...de[74]||(de[74]=[W(" Apply Template ",-1)])]),_:1},8,["onClick","disabled"])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:m.value,"onUpdate:modelValue":de[25]||(de[25]=se=>m.value=se),options:{title:"Bulk Actions"}},{"body-content":D(()=>[u("div",W8t,[u("p",G8t," Apply bulk action to "+E(a.value.length)+" selected engagements: ",1),u("div",Y8t,[u("div",null,[de[75]||(de[75]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Update Status ",-1)),b(y(Ke),{modelValue:_.value,"onUpdate:modelValue":de[21]||(de[21]=se=>_.value=se),options:A},null,8,["modelValue"])]),u("div",null,[de[76]||(de[76]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Assign Auditor ",-1)),b(y(Ke),{modelValue:x.value,"onUpdate:modelValue":de[22]||(de[22]=se=>x.value=se),options:M.value},null,8,["modelValue","options"])]),u("div",K8t,[b(y(Ut),{modelValue:w.value,"onUpdate:modelValue":de[23]||(de[23]=se=>w.value=se)},null,8,["modelValue"]),de[77]||(de[77]=u("span",{class:"text-sm text-red-600"}," Delete selected engagements (this action cannot be undone) ",-1))])])])]),actions:D(()=>[b(y(Z),{variant:"ghost",onClick:de[24]||(de[24]=se=>m.value=!1)},{default:D(()=>[...de[78]||(de[78]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:ee.applyBulkActions,disabled:!_.value&&!x.value&&!w.value},{default:D(()=>[...de[79]||(de[79]=[W(" Apply Changes ",-1)])]),_:1},8,["onClick","disabled"])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:c.value,"onUpdate:modelValue":de[27]||(de[27]=se=>c.value=se),options:{title:"Capacity Planning"}},{"body-content":D(()=>[u("div",X8t,[u("div",Z8t,[u("div",Q8t,[de[80]||(de[80]=u("h4",{class:"font-medium text-blue-900"},"Current Capacity",-1)),u("p",J8t,E(z.value),1),de[81]||(de[81]=u("p",{class:"text-sm text-blue-700"},"Active engagements",-1))]),u("div",eVt,[de[82]||(de[82]=u("h4",{class:"font-medium text-green-900"},"Available Capacity",-1)),u("p",tVt,E(F.value),1),de[83]||(de[83]=u("p",{class:"text-sm text-green-700"},"Available slots",-1))])]),u("div",nVt,[de[84]||(de[84]=u("h4",{class:"font-medium"},"Auditor Workload",-1)),u("div",rVt,[(T(!0),P(_e,null,we(q.value,se=>(T(),P("div",{key:se.name,class:"flex justify-between items-center p-2 bg-gray-50 rounded"},[u("span",iVt,E(se.name),1),u("div",aVt,[u("div",sVt,[u("div",{class:"bg-blue-600 h-2 rounded-full",style:nt({width:`${se.load}%`})},null,4)]),u("span",oVt,E(se.load)+"%",1)])]))),128))])])])]),actions:D(()=>[b(y(Z),{variant:"solid",onClick:de[26]||(de[26]=se=>c.value=!1)},{default:D(()=>[...de[85]||(de[85]=[W(" Close ",-1)])]),_:1})]),_:1},8,["modelValue"]),b(D6t,{modelValue:g.value,"onUpdate:modelValue":de[28]||(de[28]=se=>g.value=se),engagement:k.value,onCreated:G,onUpdated:X,onCancelled:de[29]||(de[29]=se=>g.value=!1)},null,8,["modelValue","engagement"])]))}},uVt={class:"flex h-[calc(100vh-180px)] overflow-hidden"},dVt={class:"w-72 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0"},cVt={class:"mb-6"},fVt={class:"flex items-center justify-between mb-2"},pVt={class:"text-sm text-gray-500"},hVt={class:"w-full bg-gray-200 rounded-full h-2"},mVt={class:"space-y-1"},gVt=["onClick"],vVt={class:"flex-1 text-left"},yVt={key:0,class:"ml-2 flex-shrink-0"},bVt={key:1,class:"ml-2 flex-shrink-0"},_Vt={class:"mt-6 pt-4 border-t border-gray-200"},xVt={class:"flex items-center text-sm text-gray-500"},wVt={key:0},kVt={key:1},SVt={class:"flex-1 overflow-y-auto p-6"},CVt={class:"space-y-6"},AVt={class:"grid grid-cols-2 gap-6"},TVt={class:"grid grid-cols-3 gap-6"},EVt={class:"grid grid-cols-2 gap-6"},MVt={class:"mt-6"},$Vt={class:"space-y-6"},DVt={class:"space-y-6"},RVt={class:"space-y-6"},PVt={class:"grid grid-cols-2 gap-6"},IVt={class:"space-y-6"},OVt={class:"grid grid-cols-2 gap-6"},LVt={class:"flex items-center space-x-4 mt-2"},VVt={class:"inline-flex items-center"},NVt={class:"inline-flex items-center"},jVt={class:"grid grid-cols-2 gap-6"},FVt={class:"space-y-6"},BVt={class:"grid grid-cols-2 gap-6"},zVt={class:"grid grid-cols-2 gap-6"},UVt={class:"space-y-6"},HVt={class:"grid grid-cols-2 gap-6"},qVt={class:"border-t border-gray-200 pt-6"},WVt={class:"grid grid-cols-3 gap-6"},GVt={class:"flex items-center space-x-4 mt-2"},YVt={class:"inline-flex items-center"},KVt={class:"inline-flex items-center"},XVt={class:"space-y-6"},ZVt={class:"grid grid-cols-2 gap-6"},QVt={class:"grid grid-cols-2 gap-6"},JVt={class:"space-y-6"},eNt={class:"bg-gray-50 rounded-lg p-4 mb-6"},tNt={class:"grid grid-cols-2 gap-6"},nNt={class:"grid grid-cols-2 gap-6 mt-4"},rNt={class:"mt-4"},iNt={class:"bg-blue-50 rounded-lg p-4"},aNt={class:"grid grid-cols-2 gap-4"},sNt={class:"inline-flex items-center"},oNt={class:"inline-flex items-center"},lNt={class:"inline-flex items-center"},uNt={class:"inline-flex items-center"},dNt={class:"mt-4"},cNt={class:"mt-6"},fNt={class:"bg-yellow-50 rounded-lg p-4 mt-6"},pNt={class:"grid grid-cols-2 gap-6"},hNt={class:"flex items-center space-x-4 mt-2"},mNt={class:"inline-flex items-center"},gNt={class:"inline-flex items-center"},vNt={class:"flex items-center justify-between w-full"},yNt={class:"flex items-center space-x-2"},bNt={class:"flex items-center space-x-3"},_Nt={__name:"AuditFindingForm",props:{modelValue:{type:Boolean,default:!1},finding:{type:Object,default:null}},emits:["update:modelValue","saved","close"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.modelValue,set:ve=>r("update:modelValue",ve)}),a=J(()=>{var ve;return!!((ve=n.finding)!=null&&ve.name)}),s=Q(!1),o=Q(null),l={basic:{label:"Basic Information",icon:vt},details:{label:"Finding Details",icon:kr},evidence:{label:"Evidence & Recommendation",icon:Rn},response:{label:"Management Response",icon:iE},action:{label:"Corrective Action Plan",icon:I0},followup:{label:"Follow-up & Status",icon:hn},verification:{label:"Verification",icon:Ti},closure:{label:"Closure & Reporting",icon:s2}},d={basic:["finding_id","engagement_reference","finding_title","finding_category"],details:["condition","criteria"],evidence:["recommendation"],response:[],action:[],followup:["finding_status"],verification:[],closure:[]},{activeSection:c,formProgress:f,setActiveSection:p,getSectionStatus:h,validateForm:m,prepareFormData:g}=ZO(l),v=Jt({finding_id:"",engagement_reference:"",finding_title:"",finding_category:"",risk_rating:"",business_impact_rating:"",date_identified:"",source_document:"",affected_locations:[],condition:"",criteria:"",cause:"",effect:"",evidence:[],sample_size:null,exceptions_found:null,recommendation:"",management_agrees:null,management_comments:"",response_date:"",management_response_by:"",management_response_date:"",action_plan_description:"",responsible_person:"",target_date:"",revised_target_date:"",priority:"",milestones:[],finding_status:"Open",status_date:"",status_history:[],follow_up_required:0,follow_up_frequency:"",next_follow_up_date:"",follow_up_history:[],verification_date:"",verified_by:"",verification_method:"",verification_status:"",verification_results:"",closure_date:"",closed_by:"",closure_reason:"",final_disposition:"",closure_notes:"",include_in_report:!1,reported_to_management:!1,reported_to_audit_committee:!1,reported_to_board:!1,report_reference:"",related_findings:[],repeat_finding:0,previous_finding_reference:""}),_=[{label:"Control Weakness",value:"Control Weakness"},{label:"Process Inefficiency",value:"Process Inefficiency"},{label:"Compliance Gap",value:"Compliance Gap"},{label:"Policy Violation",value:"Policy Violation"},{label:"Documentation Issue",value:"Documentation Issue"},{label:"Fraud Indicator",value:"Fraud Indicator"},{label:"IT/System Issue",value:"IT/System Issue"},{label:"Operational Risk",value:"Operational Risk"}],x=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],w=[{label:"Severe",value:"Severe"},{label:"Major",value:"Major"},{label:"Moderate",value:"Moderate"},{label:"Minor",value:"Minor"},{label:"Insignificant",value:"Insignificant"}],k=[{label:"Open",value:"Open"},{label:"Action in Progress",value:"Action in Progress"},{label:"Pending Verification",value:"Pending Verification"},{label:"Closed",value:"Closed"},{label:"Accepted as Risk",value:"Accepted as Risk"},{label:"Management Override",value:"Management Override"}],S=[{label:"Urgent",value:"Urgent"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],C=[{label:"Weekly",value:"Weekly"},{label:"Bi-weekly",value:"Bi-weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Semi-annually",value:"Semi-annually"},{label:"Annually",value:"Annually"}],A=[{label:"Document Review",value:"Document Review"},{label:"Re-testing",value:"Re-testing"},{label:"Observation",value:"Observation"},{label:"Interview",value:"Interview"},{label:"Walkthrough",value:"Walkthrough"},{label:"Data Analysis",value:"Data Analysis"}],M=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Verified - Effective",value:"Verified - Effective"},{label:"Verified - Partially Effective",value:"Verified - Partially Effective"},{label:"Verified - Not Effective",value:"Verified - Not Effective"}],$=[{label:"Corrective Action Implemented",value:"Corrective Action Implemented"},{label:"Risk Accepted",value:"Risk Accepted"},{label:"Duplicate Finding",value:"Duplicate Finding"},{label:"No Longer Applicable",value:"No Longer Applicable"},{label:"Management Override",value:"Management Override"}],R=[{label:"Resolved",value:"Resolved"},{label:"Partially Resolved",value:"Partially Resolved"},{label:"Transferred",value:"Transferred"},{label:"Deferred",value:"Deferred"}],I=Q([]),B=Q([]),j=Q([]),z=[{key:"location",label:"Location",fieldType:"text",required:!0,width:"200px"},{key:"extent",label:"Extent/Notes",fieldType:"text",width:"300px"}],F=[{key:"evidence_type",label:"Type",width:"120px"},{key:"description",label:"Description",width:"250px"},{key:"source",label:"Source",width:"150px"}],q=[{key:"evidence_type",label:"Evidence Type",type:"select",required:!0,options:[{label:"Document",value:"Document"},{label:"Photo",value:"Photo"},{label:"Data Analysis",value:"Data Analysis"},{label:"Interview",value:"Interview"},{label:"Observation",value:"Observation"},{label:"Confirmation",value:"Confirmation"}]},{key:"description",label:"Description",type:"text",required:!0},{key:"file",label:"Attachment",type:"attach"},{key:"source",label:"Source",type:"text"},{key:"reference",label:"Reference",type:"text"}],N=[{key:"milestone_description",label:"Description",width:"250px"},{key:"due_date",label:"Due Date",width:"120px"},{key:"status",label:"Status",width:"120px",component:"Badge"}],O=[{key:"milestone_description",label:"Milestone Description",type:"text",required:!0},{key:"due_date",label:"Due Date",type:"date",required:!0},{key:"status",label:"Status",type:"select",required:!0,options:[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Delayed",value:"Delayed"}]},{key:"completion_date",label:"Completion Date",type:"date"},{key:"notes",label:"Notes",type:"textarea"}],V=[{key:"previous_status",label:"From",width:"120px"},{key:"new_status",label:"To",width:"120px"},{key:"changed_on",label:"Changed On",width:"150px"},{key:"changed_by",label:"Changed By",width:"150px"}],L=[{key:"previous_status",label:"Previous Status",type:"select",options:k},{key:"new_status",label:"New Status",type:"select",required:!0,options:k},{key:"changed_on",label:"Changed On",type:"datetime",required:!0},{key:"changed_by",label:"Changed By",type:"link",doctype:"User",required:!0},{key:"reason",label:"Reason",type:"textarea"}],U=[{key:"follow_up_date",label:"Date",width:"100px"},{key:"follow_up_type",label:"Type",width:"150px"},{key:"follow_up_by",label:"By",width:"150px"},{key:"status",label:"Status",width:"100px",component:"Badge"}],G=[{key:"follow_up_date",label:"Follow-up Date",type:"date",required:!0},{key:"follow_up_type",label:"Type",type:"select",required:!0,options:[{label:"Status Check",value:"Status Check"},{label:"Progress Review",value:"Progress Review"},{label:"Implementation Verification",value:"Implementation Verification"},{label:"Effectiveness Assessment",value:"Effectiveness Assessment"},{label:"Closure Review",value:"Closure Review"}]},{key:"follow_up_by",label:"Follow-up By",type:"link",doctype:"User",required:!0},{key:"findings",label:"Findings/Observations",type:"textarea"},{key:"actions_taken",label:"Actions Taken",type:"textarea"},{key:"next_follow_up_date",label:"Next Follow-up Date",type:"date"},{key:"status",label:"Status",type:"select",required:!0,options:[{label:"Open",value:"Open"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Overdue",value:"Overdue"}]}],X=[{key:"related_finding",label:"Related Finding",width:"200px"},{key:"relationship_type",label:"Relationship",width:"150px"}],re=[{key:"related_finding",label:"Related Finding",type:"link",doctype:"Audit Finding",required:!0},{key:"relationship_type",label:"Relationship Type",type:"select",required:!0,options:[{label:"Duplicate",value:"Duplicate"},{label:"Similar Issue",value:"Similar Issue"},{label:"Root Cause",value:"Root Cause"},{label:"Contributing Factor",value:"Contributing Factor"},{label:"Follow-up Action",value:"Follow-up Action"},{label:"Related Control",value:"Related Control"}]},{key:"description",label:"Description",type:"textarea"}],ee=()=>{const ve=Object.keys(l),Y=ve.indexOf(c.value);Y>0&&p(ve[Y-1])},de=()=>{const ve=Object.keys(l),Y=ve.indexOf(c.value);Y<ve.length-1&&p(ve[Y+1])},se=ve=>{if(!ve)return"";const Y=Math.floor((new Date-new Date(ve))/1e3);if(Y<60)return"just now";const K=Math.floor(Y/60);if(K<60)return`${K}m ago`;const H=Math.floor(K/60);return H<24?`${H}h ago`:`${Math.floor(H/24)}d ago`},te=()=>le(this,null,function*(){try{o.value=new Date}catch(ve){console.error("Failed to save draft:",ve)}}),ne=()=>le(this,null,function*(){const ve=m(v);if(!ve.isValid){if(console.error("Validation errors:",ve.errors),ve.errors.length>0){const Y=Object.keys(d).find(K=>d[K].some(H=>ve.errors.includes(H)));Y&&p(Y)}return}s.value=!0;try{const Y=g(v,{evidence:"Finding Evidence",affected_locations:"Finding Affected Location",milestones:"Finding Action Milestone",status_history:"Finding Status Change",follow_up_history:"Finding Follow-up Activity",related_findings:"Finding Related Finding"});r("saved",Y),ce()}catch(Y){console.error("Failed to save finding:",Y)}finally{s.value=!1}}),ce=()=>{i.value=!1,r("close")};return Je(()=>n.finding,ve=>{ve&&Object.keys(v).forEach(Y=>{ve[Y]!==void 0&&(v[Y]=ve[Y])})},{immediate:!0,deep:!0}),Je(v,()=>{},{deep:!0}),bt(()=>{}),(ve,Y)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":Y[56]||(Y[56]=K=>i.value=K),options:{size:"7xl",title:a.value?"Edit Audit Finding":"New Audit Finding"}},{body:D(()=>[u("div",uVt,[u("div",dVt,[u("div",cVt,[u("div",fVt,[Y[57]||(Y[57]=u("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),u("span",pVt,E(y(f))+"%",1)]),u("div",hVt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${y(f)}%`})},null,4)])]),u("nav",mVt,[(T(),P(_e,null,we(l,(K,H)=>u("button",{key:H,onClick:ae=>y(p)(H),class:fe(["w-full flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors",[y(c)===H?"bg-blue-100 text-blue-700 border-l-4 border-blue-600":"text-gray-600 hover:bg-gray-100"]])},[(T(),he(Lt(K.icon),{class:fe(["h-5 w-5 mr-3 flex-shrink-0",y(c)===H?"text-blue-600":"text-gray-400"])},null,8,["class"])),u("span",vVt,E(K.label),1),y(h)(H)==="complete"?(T(),P("span",yVt,[b(y(Qs),{class:"h-5 w-5 text-green-500"})])):y(h)(H)==="partial"?(T(),P("span",bVt,[b(y(zr),{class:"h-5 w-5 text-yellow-500"})])):ie("",!0)],10,gVt)),64))]),u("div",_Vt,[u("div",xVt,[b(y(qD),{class:"h-4 w-4 mr-2"}),o.value?(T(),P("span",wVt,"Saved "+E(se(o.value)),1)):(T(),P("span",kVt,"Not saved yet"))])])]),u("div",SVt,[xe(u("div",CVt,[b(Rt,{title:"Basic Information",description:"Essential finding identification and classification details",icon:y(vt)},null,8,["icon"]),u("div",AVt,[b(y(ge),{label:"Finding ID",modelValue:v.finding_id,"onUpdate:modelValue":Y[0]||(Y[0]=K=>v.finding_id=K),type:"text",placeholder:"e.g., FND-2024-001",required:!0},null,8,["modelValue"]),b(y(ge),{label:"Engagement Reference",modelValue:v.engagement_reference,"onUpdate:modelValue":Y[1]||(Y[1]=K=>v.engagement_reference=K),type:"autocomplete",options:I.value,placeholder:"Select related engagement",required:!0},null,8,["modelValue","options"])]),b(y(ge),{label:"Finding Title",modelValue:v.finding_title,"onUpdate:modelValue":Y[2]||(Y[2]=K=>v.finding_title=K),type:"text",placeholder:"Enter a descriptive finding title",required:!0},null,8,["modelValue"]),u("div",TVt,[b(y(ge),{label:"Finding Category",modelValue:v.finding_category,"onUpdate:modelValue":Y[3]||(Y[3]=K=>v.finding_category=K),type:"select",options:_,required:!0},null,8,["modelValue"]),b(y(ge),{label:"Risk Rating",modelValue:v.risk_rating,"onUpdate:modelValue":Y[4]||(Y[4]=K=>v.risk_rating=K),type:"select",options:x},null,8,["modelValue"]),b(y(ge),{label:"Business Impact Rating",modelValue:v.business_impact_rating,"onUpdate:modelValue":Y[5]||(Y[5]=K=>v.business_impact_rating=K),type:"select",options:w},null,8,["modelValue"])]),u("div",EVt,[b(y(ge),{label:"Date Identified",modelValue:v.date_identified,"onUpdate:modelValue":Y[6]||(Y[6]=K=>v.date_identified=K),type:"date"},null,8,["modelValue"]),b(y(ge),{label:"Source Document",modelValue:v.source_document,"onUpdate:modelValue":Y[7]||(Y[7]=K=>v.source_document=K),type:"text",placeholder:"Reference to source workpaper"},null,8,["modelValue"])]),u("div",MVt,[b(b0,{modelValue:v.affected_locations,"onUpdate:modelValue":Y[8]||(Y[8]=K=>v.affected_locations=K),title:"Affected Locations",columns:z,addButtonLabel:"Add Location"},null,8,["modelValue"])])],512),[[ot,y(c)==="basic"]]),xe(u("div",$Vt,[b(Rt,{title:"Finding Details",description:"Document the condition, criteria, cause, and effect of the finding",icon:y(kr)},null,8,["icon"]),u("div",DVt,[u("div",null,[Y[58]||(Y[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Condition "),u("span",{class:"text-red-500"},"*")],-1)),Y[59]||(Y[59]=u("p",{class:"text-xs text-gray-500 mb-2"},"What is the actual situation or state observed?",-1)),b(y(an),{modelValue:v.condition,"onUpdate:modelValue":Y[9]||(Y[9]=K=>v.condition=K),placeholder:"Describe the current condition or situation found during the audit...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[Y[60]||(Y[60]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Criteria "),u("span",{class:"text-red-500"},"*")],-1)),Y[61]||(Y[61]=u("p",{class:"text-xs text-gray-500 mb-2"},"What should be the expected state or standard?",-1)),b(y(an),{modelValue:v.criteria,"onUpdate:modelValue":Y[10]||(Y[10]=K=>v.criteria=K),placeholder:"Describe the standard, policy, or expectation that should be met...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[Y[62]||(Y[62]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Cause ",-1)),Y[63]||(Y[63]=u("p",{class:"text-xs text-gray-500 mb-2"},"Why did the condition occur?",-1)),b(y(an),{modelValue:v.cause,"onUpdate:modelValue":Y[11]||(Y[11]=K=>v.cause=K),placeholder:"Describe the root cause or reason for the gap between condition and criteria...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[Y[64]||(Y[64]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Effect ",-1)),Y[65]||(Y[65]=u("p",{class:"text-xs text-gray-500 mb-2"},"What is the impact or consequence?",-1)),b(y(an),{modelValue:v.effect,"onUpdate:modelValue":Y[12]||(Y[12]=K=>v.effect=K),placeholder:"Describe the actual or potential impact of this finding...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])])],512),[[ot,y(c)==="details"]]),xe(u("div",RVt,[b(Rt,{title:"Evidence & Recommendation",description:"Supporting evidence and proposed corrective actions",icon:y(Rn)},null,8,["icon"]),b(rs,{modelValue:v.evidence,"onUpdate:modelValue":Y[13]||(Y[13]=K=>v.evidence=K),title:"Supporting Evidence",columns:F,fields:q,modalTitle:"Evidence",emptyMessage:"No evidence documented yet",doctype:"Finding Evidence"},null,8,["modelValue"]),u("div",PVt,[b(y(ge),{label:"Sample Size Tested",modelValue:v.sample_size,"onUpdate:modelValue":Y[14]||(Y[14]=K=>v.sample_size=K),type:"number",placeholder:"Number of items tested"},null,8,["modelValue"]),b(y(ge),{label:"Exceptions Found",modelValue:v.exceptions_found,"onUpdate:modelValue":Y[15]||(Y[15]=K=>v.exceptions_found=K),type:"number",placeholder:"Number of exceptions identified"},null,8,["modelValue"])]),u("div",null,[Y[66]||(Y[66]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Recommendation "),u("span",{class:"text-red-500"},"*")],-1)),b(y(an),{modelValue:v.recommendation,"onUpdate:modelValue":Y[16]||(Y[16]=K=>v.recommendation=K),placeholder:"Provide specific, actionable recommendations to address the finding...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])],512),[[ot,y(c)==="evidence"]]),xe(u("div",IVt,[b(Rt,{title:"Management Response",description:"Management's agreement and response to the finding",icon:y(iE)},null,8,["icon"]),u("div",OVt,[u("div",null,[Y[69]||(Y[69]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Management Agrees",-1)),u("div",LVt,[u("label",VVt,[xe(u("input",{type:"radio","onUpdate:modelValue":Y[17]||(Y[17]=K=>v.management_agrees=K),value:1,class:"form-radio h-4 w-4 text-blue-600"},null,512),[[Ki,v.management_agrees]]),Y[67]||(Y[67]=u("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),u("label",NVt,[xe(u("input",{type:"radio","onUpdate:modelValue":Y[18]||(Y[18]=K=>v.management_agrees=K),value:0,class:"form-radio h-4 w-4 text-blue-600"},null,512),[[Ki,v.management_agrees]]),Y[68]||(Y[68]=u("span",{class:"ml-2 text-sm text-gray-700"},"No",-1))])])]),b(y(ge),{label:"Response Date",modelValue:v.response_date,"onUpdate:modelValue":Y[19]||(Y[19]=K=>v.response_date=K),type:"date"},null,8,["modelValue"])]),u("div",null,[Y[70]||(Y[70]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Management Comments ",-1)),b(y(an),{modelValue:v.management_comments,"onUpdate:modelValue":Y[20]||(Y[20]=K=>v.management_comments=K),placeholder:"Enter management's response and comments...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",jVt,[b(y(ge),{label:"Responding Manager",modelValue:v.management_response_by,"onUpdate:modelValue":Y[21]||(Y[21]=K=>v.management_response_by=K),type:"autocomplete",options:B.value,placeholder:"Select responding manager"},null,8,["modelValue","options"]),b(y(ge),{label:"Response Received On",modelValue:v.management_response_date,"onUpdate:modelValue":Y[22]||(Y[22]=K=>v.management_response_date=K),type:"date"},null,8,["modelValue"])])],512),[[ot,y(c)==="response"]]),xe(u("div",FVt,[b(Rt,{title:"Corrective Action Plan",description:"Planned actions to address and resolve the finding",icon:y(I0)},null,8,["icon"]),u("div",null,[Y[71]||(Y[71]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Action Plan Description ",-1)),b(y(an),{modelValue:v.action_plan_description,"onUpdate:modelValue":Y[23]||(Y[23]=K=>v.action_plan_description=K),placeholder:"Describe the corrective action plan in detail...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",BVt,[b(y(ge),{label:"Responsible Person",modelValue:v.responsible_person,"onUpdate:modelValue":Y[24]||(Y[24]=K=>v.responsible_person=K),type:"autocomplete",options:B.value,placeholder:"Select person responsible for implementation"},null,8,["modelValue","options"]),b(y(ge),{label:"Target Completion Date",modelValue:v.target_date,"onUpdate:modelValue":Y[25]||(Y[25]=K=>v.target_date=K),type:"date"},null,8,["modelValue"])]),u("div",zVt,[b(y(ge),{label:"Revised Target Date",modelValue:v.revised_target_date,"onUpdate:modelValue":Y[26]||(Y[26]=K=>v.revised_target_date=K),type:"date"},null,8,["modelValue"]),b(y(ge),{label:"Priority",modelValue:v.priority,"onUpdate:modelValue":Y[27]||(Y[27]=K=>v.priority=K),type:"select",options:S},null,8,["modelValue"])]),b(rs,{modelValue:v.milestones,"onUpdate:modelValue":Y[28]||(Y[28]=K=>v.milestones=K),title:"Action Milestones",columns:N,fields:O,modalTitle:"Milestone",emptyMessage:"No milestones defined yet",doctype:"Finding Action Milestone"},null,8,["modelValue"])],512),[[ot,y(c)==="action"]]),xe(u("div",UVt,[b(Rt,{title:"Follow-up & Status",description:"Track finding status and follow-up activities",icon:y(hn)},null,8,["icon"]),u("div",HVt,[b(y(ge),{label:"Finding Status",modelValue:v.finding_status,"onUpdate:modelValue":Y[29]||(Y[29]=K=>v.finding_status=K),type:"select",options:k,required:!0},null,8,["modelValue"]),b(y(ge),{label:"Status Date",modelValue:v.status_date,"onUpdate:modelValue":Y[30]||(Y[30]=K=>v.status_date=K),type:"date"},null,8,["modelValue"])]),b(rs,{modelValue:v.status_history,"onUpdate:modelValue":Y[31]||(Y[31]=K=>v.status_history=K),title:"Status History",columns:V,fields:L,modalTitle:"Status Change",emptyMessage:"No status changes recorded",doctype:"Finding Status Change"},null,8,["modelValue"]),u("div",qVt,[Y[75]||(Y[75]=u("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"Follow-up Settings",-1)),u("div",WVt,[u("div",null,[Y[74]||(Y[74]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Follow-up Required",-1)),u("div",GVt,[u("label",YVt,[xe(u("input",{type:"radio","onUpdate:modelValue":Y[32]||(Y[32]=K=>v.follow_up_required=K),value:1,class:"form-radio h-4 w-4 text-blue-600"},null,512),[[Ki,v.follow_up_required]]),Y[72]||(Y[72]=u("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),u("label",KVt,[xe(u("input",{type:"radio","onUpdate:modelValue":Y[33]||(Y[33]=K=>v.follow_up_required=K),value:0,class:"form-radio h-4 w-4 text-blue-600"},null,512),[[Ki,v.follow_up_required]]),Y[73]||(Y[73]=u("span",{class:"ml-2 text-sm text-gray-700"},"No",-1))])])]),b(y(ge),{label:"Follow-up Frequency",modelValue:v.follow_up_frequency,"onUpdate:modelValue":Y[34]||(Y[34]=K=>v.follow_up_frequency=K),type:"select",options:C,disabled:!v.follow_up_required},null,8,["modelValue","disabled"]),b(y(ge),{label:"Next Follow-up Date",modelValue:v.next_follow_up_date,"onUpdate:modelValue":Y[35]||(Y[35]=K=>v.next_follow_up_date=K),type:"date",disabled:!v.follow_up_required},null,8,["modelValue","disabled"])])]),b(rs,{modelValue:v.follow_up_history,"onUpdate:modelValue":Y[36]||(Y[36]=K=>v.follow_up_history=K),title:"Follow-up History",columns:U,fields:G,modalTitle:"Follow-up Activity",emptyMessage:"No follow-up activities recorded",doctype:"Finding Follow-up Activity"},null,8,["modelValue"])],512),[[ot,y(c)==="followup"]]),xe(u("div",XVt,[b(Rt,{title:"Verification",description:"Verification of corrective action implementation",icon:y(Ti)},null,8,["icon"]),u("div",ZVt,[b(y(ge),{label:"Verification Date",modelValue:v.verification_date,"onUpdate:modelValue":Y[37]||(Y[37]=K=>v.verification_date=K),type:"date"},null,8,["modelValue"]),b(y(ge),{label:"Verified By",modelValue:v.verified_by,"onUpdate:modelValue":Y[38]||(Y[38]=K=>v.verified_by=K),type:"autocomplete",options:B.value,placeholder:"Select verifier"},null,8,["modelValue","options"])]),u("div",QVt,[b(y(ge),{label:"Verification Method",modelValue:v.verification_method,"onUpdate:modelValue":Y[39]||(Y[39]=K=>v.verification_method=K),type:"select",options:A},null,8,["modelValue"]),b(y(ge),{label:"Verification Status",modelValue:v.verification_status,"onUpdate:modelValue":Y[40]||(Y[40]=K=>v.verification_status=K),type:"select",options:M},null,8,["modelValue"])]),u("div",null,[Y[76]||(Y[76]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Verification Results ",-1)),b(y(an),{modelValue:v.verification_results,"onUpdate:modelValue":Y[41]||(Y[41]=K=>v.verification_results=K),placeholder:"Document the results of the verification testing...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])],512),[[ot,y(c)==="verification"]]),xe(u("div",JVt,[b(Rt,{title:"Closure & Reporting",description:"Finding closure details and reporting preferences",icon:y(s2)},null,8,["icon"]),u("div",eNt,[Y[78]||(Y[78]=u("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"Closure Information",-1)),u("div",tNt,[b(y(ge),{label:"Closure Date",modelValue:v.closure_date,"onUpdate:modelValue":Y[42]||(Y[42]=K=>v.closure_date=K),type:"date"},null,8,["modelValue"]),b(y(ge),{label:"Closed By",modelValue:v.closed_by,"onUpdate:modelValue":Y[43]||(Y[43]=K=>v.closed_by=K),type:"autocomplete",options:B.value,placeholder:"Select person closing the finding"},null,8,["modelValue","options"])]),u("div",nNt,[b(y(ge),{label:"Closure Reason",modelValue:v.closure_reason,"onUpdate:modelValue":Y[44]||(Y[44]=K=>v.closure_reason=K),type:"select",options:$},null,8,["modelValue"]),b(y(ge),{label:"Final Disposition",modelValue:v.final_disposition,"onUpdate:modelValue":Y[45]||(Y[45]=K=>v.final_disposition=K),type:"select",options:R},null,8,["modelValue"])]),u("div",rNt,[Y[77]||(Y[77]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Closure Notes ",-1)),b(y(an),{modelValue:v.closure_notes,"onUpdate:modelValue":Y[46]||(Y[46]=K=>v.closure_notes=K),placeholder:"Document any final notes or comments regarding the closure...",editorClass:"min-h-[100px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])]),u("div",iNt,[Y[83]||(Y[83]=u("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"Reporting Options",-1)),u("div",aNt,[u("label",sNt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":Y[47]||(Y[47]=K=>v.include_in_report=K),class:"form-checkbox h-4 w-4 text-blue-600 rounded"},null,512),[[$n,v.include_in_report]]),Y[79]||(Y[79]=u("span",{class:"ml-2 text-sm text-gray-700"},"Include in Final Report",-1))]),u("label",oNt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":Y[48]||(Y[48]=K=>v.reported_to_management=K),class:"form-checkbox h-4 w-4 text-blue-600 rounded"},null,512),[[$n,v.reported_to_management]]),Y[80]||(Y[80]=u("span",{class:"ml-2 text-sm text-gray-700"},"Reported to Management",-1))]),u("label",lNt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":Y[49]||(Y[49]=K=>v.reported_to_audit_committee=K),class:"form-checkbox h-4 w-4 text-blue-600 rounded"},null,512),[[$n,v.reported_to_audit_committee]]),Y[81]||(Y[81]=u("span",{class:"ml-2 text-sm text-gray-700"},"Reported to Audit Committee",-1))]),u("label",uNt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":Y[50]||(Y[50]=K=>v.reported_to_board=K),class:"form-checkbox h-4 w-4 text-blue-600 rounded"},null,512),[[$n,v.reported_to_board]]),Y[82]||(Y[82]=u("span",{class:"ml-2 text-sm text-gray-700"},"Reported to Board",-1))])]),u("div",dNt,[b(y(ge),{label:"Report Reference",modelValue:v.report_reference,"onUpdate:modelValue":Y[51]||(Y[51]=K=>v.report_reference=K),type:"text",placeholder:"Reference to the report containing this finding"},null,8,["modelValue"])])]),u("div",cNt,[b(rs,{modelValue:v.related_findings,"onUpdate:modelValue":Y[52]||(Y[52]=K=>v.related_findings=K),title:"Related Findings",columns:X,fields:re,modalTitle:"Related Finding",emptyMessage:"No related findings linked",doctype:"Finding Related Finding"},null,8,["modelValue"])]),u("div",fNt,[Y[87]||(Y[87]=u("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"Repeat Finding Information",-1)),u("div",pNt,[u("div",null,[Y[86]||(Y[86]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Repeat Finding",-1)),u("div",hNt,[u("label",mNt,[xe(u("input",{type:"radio","onUpdate:modelValue":Y[53]||(Y[53]=K=>v.repeat_finding=K),value:1,class:"form-radio h-4 w-4 text-yellow-600"},null,512),[[Ki,v.repeat_finding]]),Y[84]||(Y[84]=u("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),u("label",gNt,[xe(u("input",{type:"radio","onUpdate:modelValue":Y[54]||(Y[54]=K=>v.repeat_finding=K),value:0,class:"form-radio h-4 w-4 text-yellow-600"},null,512),[[Ki,v.repeat_finding]]),Y[85]||(Y[85]=u("span",{class:"ml-2 text-sm text-gray-700"},"No",-1))])])]),v.repeat_finding?(T(),he(y(ge),{key:0,label:"Previous Finding Reference",modelValue:v.previous_finding_reference,"onUpdate:modelValue":Y[55]||(Y[55]=K=>v.previous_finding_reference=K),type:"autocomplete",options:j.value,placeholder:"Link to previous finding"},null,8,["modelValue","options"])):ie("",!0)])])],512),[[ot,y(c)==="closure"]])])])]),actions:D(()=>[u("div",vNt,[u("div",yNt,[b(y(Z),{variant:"subtle",onClick:ee,disabled:y(c)==="basic"},{default:D(()=>[b(y(pr),{class:"h-4 w-4 mr-1"}),Y[88]||(Y[88]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(y(Z),{variant:"subtle",onClick:de,disabled:y(c)==="closure"},{default:D(()=>[Y[89]||(Y[89]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4 ml-1"})]),_:1},8,["disabled"])]),u("div",bNt,[b(y(Z),{variant:"subtle",onClick:te},{default:D(()=>[...Y[90]||(Y[90]=[W(" Save as Draft ",-1)])]),_:1}),b(y(Z),{variant:"outline",onClick:ce},{default:D(()=>[...Y[91]||(Y[91]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{variant:"solid",theme:"blue",onClick:ne,loading:s.value},{default:D(()=>[W(E(a.value?"Update Finding":"Create Finding"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","options"]))}},xNt=Ft(_Nt,[["__scopeId","data-v-7c3d7ea9"]]),wNt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},kNt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},SNt={class:"flex items-center justify-between"},CNt={class:"text-2xl font-bold text-gray-900 mt-1"},ANt={class:"p-3 bg-blue-50 rounded-lg"},TNt={class:"mt-3 flex items-center text-sm"},ENt={class:"text-gray-500"},MNt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},$Nt={class:"flex items-center justify-between"},DNt={class:"text-2xl font-bold text-red-600 mt-1"},RNt={class:"p-3 bg-red-50 rounded-lg"},PNt={class:"mt-3 flex items-center text-sm"},INt={class:"text-red-600 font-medium"},ONt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},LNt={class:"flex items-center justify-between"},VNt={class:"text-2xl font-bold text-yellow-600 mt-1"},NNt={class:"p-3 bg-yellow-50 rounded-lg"},jNt={class:"mt-3 flex items-center text-sm"},FNt={class:"text-gray-500"},BNt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},zNt={class:"flex items-center justify-between"},UNt={class:"text-2xl font-bold text-green-600 mt-1"},HNt={class:"p-3 bg-green-50 rounded-lg"},qNt={class:"mt-3 flex items-center text-sm"},WNt={class:"text-green-600 font-medium"},GNt={class:"col-span-1 md:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-4"},YNt={class:"flex items-center justify-between mb-4"},KNt={class:"grid grid-cols-4 gap-3"},XNt={class:"text-center p-3 bg-red-50 rounded-lg"},ZNt={class:"text-xl font-bold text-red-700"},QNt={class:"text-center p-3 bg-orange-50 rounded-lg"},JNt={class:"text-xl font-bold text-orange-700"},e7t={class:"text-center p-3 bg-yellow-50 rounded-lg"},t7t={class:"text-xl font-bold text-yellow-700"},n7t={class:"text-center p-3 bg-green-50 rounded-lg"},r7t={class:"text-xl font-bold text-green-700"},i7t={class:"col-span-1 md:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-4"},a7t={class:"flex items-center justify-between mb-4"},s7t={class:"space-y-3"},o7t={class:"flex items-center"},l7t={class:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},u7t={class:"w-12 text-right text-sm font-medium text-gray-900"},d7t={class:"flex items-center"},c7t={class:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},f7t={class:"w-12 text-right text-sm font-medium text-gray-900"},p7t={class:"flex items-center"},h7t={class:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},m7t={class:"w-12 text-right text-sm font-medium text-gray-900"},g7t={class:"flex items-center"},v7t={class:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},y7t={class:"w-12 text-right text-sm font-medium text-gray-900"},b7t={__name:"FindingsStats",props:{stats:{type:Object,default:()=>({total:0,thisMonth:0,open:0,overdue:0,inProgress:0,pendingVerification:0,closed:0,closureRate:0,bySeverity:{critical:0,high:0,medium:0,low:0},aging:{days0to30:0,days31to60:0,days61to90:0,days90plus:0}})}},setup(t){const e=t,n=J(()=>{const i=e.stats.aging||{};return(i.days0to30||0)+(i.days31to60||0)+(i.days61to90||0)+(i.days90plus||0)}),r=i=>n.value===0?0:Math.round(i/n.value*100);return(i,a)=>(T(),P("div",wNt,[u("div",kNt,[u("div",SNt,[u("div",null,[a[0]||(a[0]=u("p",{class:"text-sm font-medium text-gray-500"},"Total Findings",-1)),u("p",CNt,E(t.stats.total),1)]),u("div",ANt,[b(y(Rn),{class:"h-6 w-6 text-blue-600"})])]),u("div",TNt,[u("span",ENt,E(t.stats.thisMonth)+" this month",1)])]),u("div",MNt,[u("div",$Nt,[u("div",null,[a[1]||(a[1]=u("p",{class:"text-sm font-medium text-gray-500"},"Open Findings",-1)),u("p",DNt,E(t.stats.open),1)]),u("div",RNt,[b(y(nn),{class:"h-6 w-6 text-red-600"})])]),u("div",PNt,[u("span",INt,E(t.stats.overdue)+" overdue",1)])]),u("div",ONt,[u("div",LNt,[u("div",null,[a[2]||(a[2]=u("p",{class:"text-sm font-medium text-gray-500"},"In Progress",-1)),u("p",VNt,E(t.stats.inProgress),1)]),u("div",NNt,[b(y(Ii),{class:"h-6 w-6 text-yellow-600"})])]),u("div",jNt,[u("span",FNt,E(t.stats.pendingVerification)+" pending verification",1)])]),u("div",BNt,[u("div",zNt,[u("div",null,[a[3]||(a[3]=u("p",{class:"text-sm font-medium text-gray-500"},"Closed Findings",-1)),u("p",UNt,E(t.stats.closed),1)]),u("div",HNt,[b(y(Qs),{class:"h-6 w-6 text-green-600"})])]),u("div",qNt,[u("span",WNt,E(t.stats.closureRate)+"%",1),a[4]||(a[4]=u("span",{class:"text-gray-500 ml-1"},"closure rate",-1))])]),u("div",GNt,[u("div",YNt,[a[6]||(a[6]=u("h3",{class:"text-sm font-medium text-gray-900"},"Risk Distribution",-1)),b(y(Ee),{variant:"subtle",theme:"gray"},{default:D(()=>[...a[5]||(a[5]=[W("Open Findings",-1)])]),_:1})]),u("div",KNt,[u("div",XNt,[u("p",ZNt,E(t.stats.bySeverity.critical),1),a[7]||(a[7]=u("p",{class:"text-xs text-red-600 mt-1"},"Critical",-1))]),u("div",QNt,[u("p",JNt,E(t.stats.bySeverity.high),1),a[8]||(a[8]=u("p",{class:"text-xs text-orange-600 mt-1"},"High",-1))]),u("div",e7t,[u("p",t7t,E(t.stats.bySeverity.medium),1),a[9]||(a[9]=u("p",{class:"text-xs text-yellow-600 mt-1"},"Medium",-1))]),u("div",n7t,[u("p",r7t,E(t.stats.bySeverity.low),1),a[10]||(a[10]=u("p",{class:"text-xs text-green-600 mt-1"},"Low",-1))])])]),u("div",i7t,[u("div",a7t,[a[12]||(a[12]=u("h3",{class:"text-sm font-medium text-gray-900"},"Finding Aging",-1)),b(y(Ee),{variant:"subtle",theme:"gray"},{default:D(()=>[...a[11]||(a[11]=[W("Open Findings",-1)])]),_:1})]),u("div",s7t,[u("div",o7t,[a[13]||(a[13]=u("span",{class:"w-24 text-sm text-gray-600"},"0-30 days",-1)),u("div",l7t,[u("div",{class:"h-full bg-green-500 rounded-full",style:nt({width:`${r(t.stats.aging.days0to30)}%`})},null,4)]),u("span",u7t,E(t.stats.aging.days0to30),1)]),u("div",d7t,[a[14]||(a[14]=u("span",{class:"w-24 text-sm text-gray-600"},"31-60 days",-1)),u("div",c7t,[u("div",{class:"h-full bg-yellow-500 rounded-full",style:nt({width:`${r(t.stats.aging.days31to60)}%`})},null,4)]),u("span",f7t,E(t.stats.aging.days31to60),1)]),u("div",p7t,[a[15]||(a[15]=u("span",{class:"w-24 text-sm text-gray-600"},"61-90 days",-1)),u("div",h7t,[u("div",{class:"h-full bg-orange-500 rounded-full",style:nt({width:`${r(t.stats.aging.days61to90)}%`})},null,4)]),u("span",m7t,E(t.stats.aging.days61to90),1)]),u("div",g7t,[a[16]||(a[16]=u("span",{class:"w-24 text-sm text-gray-600"},"90+ days",-1)),u("div",v7t,[u("div",{class:"h-full bg-red-500 rounded-full",style:nt({width:`${r(t.stats.aging.days90plus)}%`})},null,4)]),u("span",y7t,E(t.stats.aging.days90plus),1)])])])]))}},_7t={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6"},x7t={class:"flex flex-wrap items-center gap-4"},w7t={class:"flex-1 min-w-[200px]"},k7t={class:"relative"},S7t={class:"w-40"},C7t={class:"w-44"},A7t={class:"w-36"},T7t={class:"w-48"},E7t={class:"flex items-center gap-2"},M7t={key:0,class:"mt-4 pt-4 border-t border-gray-200"},$7t={class:"flex flex-wrap items-center gap-4"},D7t={class:"w-48"},R7t={class:"w-40"},P7t={class:"inline-flex items-center"},I7t={class:"inline-flex items-center"},O7t={class:"inline-flex items-center"},L7t={key:1,class:"mt-3 flex flex-wrap gap-2"},V7t={__name:"FindingsFilters",props:{modelValue:{type:Object,default:()=>({})},engagementOptions:{type:Array,default:()=>[]},userOptions:{type:Array,default:()=>[]}},emits:["update:modelValue","filter-change"],setup(t,{emit:e}){const n=t,r=e,i=Q(!1),a=Jt({search:"",status:"",category:"",riskRating:"",engagement:"",dateFrom:"",dateTo:"",responsiblePerson:"",followUpRequired:"",overdueOnly:!1,repeatFindingsOnly:!1,includeInReport:!1}),s=[{label:"All Statuses",value:""},{label:"Open",value:"Open"},{label:"Action in Progress",value:"Action in Progress"},{label:"Pending Verification",value:"Pending Verification"},{label:"Closed",value:"Closed"},{label:"Accepted as Risk",value:"Accepted as Risk"},{label:"Management Override",value:"Management Override"}],o=[{label:"All Categories",value:""},{label:"Control Weakness",value:"Control Weakness"},{label:"Process Inefficiency",value:"Process Inefficiency"},{label:"Compliance Gap",value:"Compliance Gap"},{label:"Policy Violation",value:"Policy Violation"},{label:"Documentation Issue",value:"Documentation Issue"},{label:"Fraud Indicator",value:"Fraud Indicator"},{label:"IT/System Issue",value:"IT/System Issue"},{label:"Operational Risk",value:"Operational Risk"}],l=[{label:"All Ratings",value:""},{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],d=[{label:"All",value:""},{label:"Required",value:"1"},{label:"Not Required",value:"0"}],c=J(()=>Object.entries(a).some(([g,v])=>typeof v=="boolean"?v:v!=="")),f=J(()=>{const g=[];return a.status&&g.push({key:"status",label:"Status",value:a.status}),a.category&&g.push({key:"category",label:"Category",value:a.category}),a.riskRating&&g.push({key:"riskRating",label:"Risk",value:a.riskRating}),a.engagement&&g.push({key:"engagement",label:"Engagement",value:a.engagement}),a.overdueOnly&&g.push({key:"overdueOnly",label:"Filter",value:"Overdue"}),a.repeatFindingsOnly&&g.push({key:"repeatFindingsOnly",label:"Filter",value:"Repeat"}),g}),p=()=>{r("update:modelValue",me({},a)),r("filter-change",me({},a))},h=()=>{Object.keys(a).forEach(g=>{typeof a[g]=="boolean"?a[g]=!1:a[g]=""}),p()},m=g=>{typeof a[g]=="boolean"?a[g]=!1:a[g]="",p()};return Je(()=>n.modelValue,g=>{g&&Object.assign(a,g)},{immediate:!0,deep:!0}),(g,v)=>(T(),P("div",_7t,[u("div",x7t,[u("div",w7t,[u("div",k7t,[b(y(Rn),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),xe(u("input",{"onUpdate:modelValue":v[0]||(v[0]=_=>a.search=_),type:"text",placeholder:"Search findings...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:p},null,544),[[Mt,a.search]])])]),u("div",S7t,[b(y(ge),{modelValue:a.status,"onUpdate:modelValue":v[1]||(v[1]=_=>a.status=_),type:"select",options:s,placeholder:"Status",onChange:p},null,8,["modelValue"])]),u("div",C7t,[b(y(ge),{modelValue:a.category,"onUpdate:modelValue":v[2]||(v[2]=_=>a.category=_),type:"select",options:o,placeholder:"Category",onChange:p},null,8,["modelValue"])]),u("div",A7t,[b(y(ge),{modelValue:a.riskRating,"onUpdate:modelValue":v[3]||(v[3]=_=>a.riskRating=_),type:"select",options:l,placeholder:"Risk Rating",onChange:p},null,8,["modelValue"])]),u("div",T7t,[b(y(ge),{modelValue:a.engagement,"onUpdate:modelValue":v[4]||(v[4]=_=>a.engagement=_),type:"autocomplete",options:t.engagementOptions,placeholder:"Engagement",onChange:p},null,8,["modelValue","options"])]),u("div",E7t,[b(y(ge),{modelValue:a.dateFrom,"onUpdate:modelValue":v[5]||(v[5]=_=>a.dateFrom=_),type:"date",placeholder:"From",class:"w-36",onChange:p},null,8,["modelValue"]),v[13]||(v[13]=u("span",{class:"text-gray-400"},"to",-1)),b(y(ge),{modelValue:a.dateTo,"onUpdate:modelValue":v[6]||(v[6]=_=>a.dateTo=_),type:"date",placeholder:"To",class:"w-36",onChange:p},null,8,["modelValue"])]),c.value?(T(),he(y(Z),{key:0,variant:"subtle",onClick:h},{default:D(()=>[b(y(ht),{class:"h-4 w-4 mr-1"}),v[14]||(v[14]=W(" Clear ",-1))]),_:1})):ie("",!0),b(y(Z),{variant:"subtle",onClick:v[7]||(v[7]=_=>i.value=!i.value)},{default:D(()=>[b(y(XD),{class:"h-4 w-4 mr-1"}),W(" "+E(i.value?"Less":"More"),1)]),_:1})]),i.value?(T(),P("div",M7t,[u("div",$7t,[u("div",D7t,[b(y(ge),{modelValue:a.responsiblePerson,"onUpdate:modelValue":v[8]||(v[8]=_=>a.responsiblePerson=_),type:"autocomplete",options:t.userOptions,placeholder:"Responsible Person",onChange:p},null,8,["modelValue","options"])]),u("div",R7t,[b(y(ge),{modelValue:a.followUpRequired,"onUpdate:modelValue":v[9]||(v[9]=_=>a.followUpRequired=_),type:"select",options:d,placeholder:"Follow-up",onChange:p},null,8,["modelValue"])]),u("label",P7t,[xe(u("input",{type:"checkbox","onUpdate:modelValue":v[10]||(v[10]=_=>a.overdueOnly=_),class:"form-checkbox h-4 w-4 text-blue-600 rounded",onChange:p},null,544),[[$n,a.overdueOnly]]),v[15]||(v[15]=u("span",{class:"ml-2 text-sm text-gray-700"},"Overdue Only",-1))]),u("label",I7t,[xe(u("input",{type:"checkbox","onUpdate:modelValue":v[11]||(v[11]=_=>a.repeatFindingsOnly=_),class:"form-checkbox h-4 w-4 text-yellow-600 rounded",onChange:p},null,544),[[$n,a.repeatFindingsOnly]]),v[16]||(v[16]=u("span",{class:"ml-2 text-sm text-gray-700"},"Repeat Findings",-1))]),u("label",O7t,[xe(u("input",{type:"checkbox","onUpdate:modelValue":v[12]||(v[12]=_=>a.includeInReport=_),class:"form-checkbox h-4 w-4 text-green-600 rounded",onChange:p},null,544),[[$n,a.includeInReport]]),v[17]||(v[17]=u("span",{class:"ml-2 text-sm text-gray-700"},"Include in Report",-1))])])])):ie("",!0),f.value.length>0?(T(),P("div",L7t,[(T(!0),P(_e,null,we(f.value,_=>(T(),he(y(Ee),{key:_.key,variant:"subtle",theme:"blue",class:"cursor-pointer",onClick:x=>m(_.key)},{default:D(()=>[W(E(_.label)+": "+E(_.value)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:2},1032,["onClick"]))),128))])):ie("",!0)]))}},N7t={class:"space-y-6"},j7t={class:"flex items-center justify-between"},F7t={class:"flex items-center space-x-3"},B7t={class:"bg-white rounded-lg border border-gray-200"},z7t={class:"p-6"},U7t=["onClick"],H7t={class:"flex items-center"},q7t={class:"flex items-center space-x-2"},W7t={__name:"FindingsList",setup(t){const e=xn(),n=Bo(),r=Q(!1),i=Q(!1),a=Q(null),s=Jt({search:"",status:"",category:"",riskRating:"",engagement:"",dateFrom:"",dateTo:"",responsiblePerson:"",followUpRequired:"",overdueOnly:!1,repeatFindingsOnly:!1,includeInReport:!1}),o=Q([]),l=Q([]),d=J(()=>n.findings),c=J(()=>{let B=[...d.value];if(s.search){const j=s.search.toLowerCase();B=B.filter(z=>{var F,q,N;return((F=z.finding_id)==null?void 0:F.toLowerCase().includes(j))||((q=z.finding_title)==null?void 0:q.toLowerCase().includes(j))||((N=z.condition)==null?void 0:N.toLowerCase().includes(j))})}return s.status&&(B=B.filter(j=>j.finding_status===s.status)),s.category&&(B=B.filter(j=>j.finding_category===s.category)),s.riskRating&&(B=B.filter(j=>j.risk_rating===s.riskRating)),s.engagement&&(B=B.filter(j=>j.engagement_reference===s.engagement)),s.overdueOnly&&(B=B.filter(j=>m(j.target_completion_date)&&j.finding_status!=="Closed")),s.repeatFindingsOnly&&(B=B.filter(j=>j.repeat_finding)),B}),f=J(()=>{const B=d.value,j=new Date,z=new Date(j.getFullYear(),j.getMonth(),1),F=B.filter(X=>X.finding_status==="Open"),q=B.filter(X=>X.finding_status==="Action in Progress"),N=B.filter(X=>X.finding_status==="Pending Verification"),O=B.filter(X=>X.finding_status==="Closed"),V=B.filter(X=>X.finding_status!=="Closed"&&m(X.target_completion_date)),L=B.filter(X=>new Date(X.creation)>=z),U={critical:F.filter(X=>X.risk_rating==="Critical").length,high:F.filter(X=>X.risk_rating==="High").length,medium:F.filter(X=>X.risk_rating==="Medium").length,low:F.filter(X=>X.risk_rating==="Low").length},G=h(B.filter(X=>X.finding_status!=="Closed"));return{total:B.length,thisMonth:L.length,open:F.length,overdue:V.length,inProgress:q.length,pendingVerification:N.length,closed:O.length,closureRate:B.length>0?Math.round(O.length/B.length*100):0,bySeverity:U,aging:G}}),p=[{key:"finding_id",label:"Finding ID",sortable:!0,width:"120px"},{key:"finding_title",label:"Finding Title",sortable:!0},{key:"risk_rating",label:"Risk Rating",sortable:!0,width:"100px"},{key:"finding_status",label:"Status",sortable:!0,width:"140px"},{key:"engagement_reference",label:"Engagement",sortable:!0,width:"150px"},{key:"responsible_person",label:"Responsible",sortable:!0,width:"150px"},{key:"target_completion_date",label:"Due Date",sortable:!0,width:"120px"},{key:"actions",label:"Actions",width:"100px"}],h=B=>{const j=new Date,z={days0to30:0,days31to60:0,days61to90:0,days90plus:0};return B.forEach(F=>{const q=new Date(F.creation),N=Math.floor((j-q)/(1e3*60*60*24));N<=30?z.days0to30++:N<=60?z.days31to60++:N<=90?z.days61to90++:z.days90plus++}),z},m=B=>B?new Date(B)<new Date:!1,g=B=>B?new Date(B).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",v=()=>le(this,null,function*(){r.value=!0;try{const B=yield Ie({url:"frappe.client.get_list",params:{doctype:"Audit Finding",fields:["name","finding_id","finding_title","finding_status","finding_category","risk_rating","engagement_reference","responsible_person","responsible_department","target_completion_date","creation","modified","condition","effect","recommendation","repeat_finding","follow_up_required"],limit_page_length:1e3,order_by:"creation desc"}}).fetch();n.setFindings(B||[])}catch(B){console.error("Error loading findings:",B),n.setFindings([])}finally{r.value=!1}}),_=()=>le(this,null,function*(){try{const B=yield Ie({url:"frappe.client.get_list",params:{doctype:"Audit Engagement",fields:["name","engagement_title"],limit_page_length:500}}).fetch();o.value=(B||[]).map(j=>({label:j.engagement_title||j.name,value:j.name}))}catch(B){console.error("Error loading engagements:",B)}try{const B=yield Ie({url:"frappe.client.get_list",params:{doctype:"User",fields:["name","full_name"],filters:{enabled:1},limit_page_length:500}}).fetch();l.value=(B||[]).map(j=>({label:j.full_name||j.name,value:j.name}))}catch(B){console.error("Error loading users:",B)}}),x=B=>({Critical:"red",High:"orange",Medium:"yellow",Low:"green"})[B]||"gray",w=B=>({Open:"red","Action in Progress":"yellow","Pending Verification":"blue",Closed:"green","Accepted as Risk":"gray","Management Override":"gray"})[B]||"gray",k=B=>{Object.assign(s,B)},S=B=>{e.push(`/findings/${B.name}`)},C=B=>{e.push(`/findings/${B.name}`)},A=B=>{a.value=B,i.value=!0},M=B=>{confirm("Are you sure you want to delete this finding?")},$=()=>{console.log("Exporting findings...")},R=B=>le(this,null,function*(){yield v(),i.value=!1,a.value=null}),I=()=>{a.value=null};return bt(()=>le(this,null,function*(){yield Promise.all([v(),_()])})),(B,j)=>(T(),P("div",N7t,[u("div",j7t,[j[5]||(j[5]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Findings"),u("p",{class:"text-gray-600 mt-1"}," Review and manage audit findings and observations ")],-1)),u("div",F7t,[b(y(Z),{variant:"outline",onClick:$},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),j[3]||(j[3]=W(" Export ",-1))]),_:1}),b(y(Z),{variant:"solid",theme:"blue",onClick:j[0]||(j[0]=z=>i.value=!0)},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),j[4]||(j[4]=W(" New Finding ",-1))]),_:1})])]),b(b7t,{stats:f.value},null,8,["stats"]),b(V7t,{modelValue:s,"onUpdate:modelValue":j[1]||(j[1]=z=>s=z),"engagement-options":o.value,"user-options":l.value,onFilterChange:k},null,8,["modelValue","engagement-options","user-options"]),u("div",B7t,[u("div",z7t,[b(y(JO),{columns:p,data:c.value,loading:r.value,pagination:!0,sortable:!0,filterable:!1,onRowClick:S},{"column-finding_id":D(({row:z})=>[u("span",{class:"text-blue-600 font-medium cursor-pointer hover:underline",onClick:dt(F=>C(z),["stop"])},E(z.finding_id),9,U7t)]),"column-risk_rating":D(({row:z})=>[b(y(Ee),{theme:x(z.risk_rating),variant:"subtle"},{default:D(()=>[W(E(z.risk_rating||"Medium"),1)]),_:2},1032,["theme"])]),"column-finding_status":D(({row:z})=>[b(y(Ee),{theme:w(z.finding_status),variant:"subtle"},{default:D(()=>[W(E(z.finding_status||"Open"),1)]),_:2},1032,["theme"])]),"column-target_completion_date":D(({row:z})=>[u("div",H7t,[u("span",{class:fe(m(z.target_completion_date)?"text-red-600 font-medium":"text-gray-600")},E(g(z.target_completion_date)),3),m(z.target_completion_date)&&z.finding_status!=="Closed"?(T(),he(y(zr),{key:0,class:"h-4 w-4 text-red-500 ml-1"})):ie("",!0)])]),"column-actions":D(({row:z})=>[u("div",q7t,[b(y(Z),{variant:"ghost",size:"sm",onClick:dt(F=>C(z),["stop"]),title:"View"},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(F=>A(z),["stop"]),title:"Edit"},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(F=>M(z),["stop"]),title:"Delete"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]),_:1},8,["data","loading"])])]),b(xNt,{modelValue:i.value,"onUpdate:modelValue":j[2]||(j[2]=z=>i.value=z),finding:a.value,onSaved:R,onClose:I},null,8,["modelValue","finding"])]))}},G7t={class:"flex h-[75vh]"},Y7t={class:"w-52 border-r bg-gray-50 p-4 flex flex-col"},K7t={class:"space-y-1 flex-1"},X7t=["onClick"],Z7t={class:"text-sm"},Q7t={class:"mt-4 pt-4 border-t"},J7t={class:"text-xs text-gray-500 mb-2"},ejt={class:"w-full bg-gray-200 rounded-full h-2"},tjt={class:"flex-1 flex flex-col overflow-hidden"},njt={class:"flex-1 overflow-y-auto p-6"},rjt={class:"space-y-4"},ijt={class:"grid grid-cols-2 gap-4"},ajt={class:"grid grid-cols-3 gap-4"},sjt={class:"grid grid-cols-2 gap-4"},ojt={class:"space-y-4"},ljt={class:"grid grid-cols-2 gap-4"},ujt={class:"space-y-4"},djt={class:"flex items-center justify-between mb-3"},cjt={class:"border rounded-lg overflow-hidden max-h-64 overflow-y-auto"},fjt={class:"min-w-full divide-y divide-gray-200"},pjt={class:"bg-white divide-y divide-gray-200"},hjt={class:"px-3 py-2"},mjt={class:"px-3 py-2"},gjt={class:"px-3 py-2"},vjt={class:"px-3 py-2"},yjt={class:"px-3 py-2"},bjt={key:0},_jt={class:"bg-gray-50 rounded-lg p-4"},xjt={class:"grid grid-cols-2 gap-4"},wjt={class:"space-y-4"},kjt={class:"grid grid-cols-3 gap-4"},Sjt={class:"flex items-center gap-1 mt-2"},Cjt=["onClick"],Ajt={class:"flex items-center gap-1 mt-2"},Tjt=["onClick"],Ejt={class:"space-y-4"},Mjt={class:"flex items-center gap-3 p-4 bg-orange-50 border border-orange-200 rounded-lg"},$jt={key:0,class:"space-y-4 p-4 bg-gray-50 rounded-lg"},Djt={class:"grid grid-cols-2 gap-4"},Rjt={class:"space-y-4"},Pjt={class:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg"},Ijt={class:"grid grid-cols-3 gap-4"},Ojt={class:"border-t bg-gray-50 px-6 py-4 flex items-center justify-between"},Ljt={class:"flex items-center gap-2"},Vjt={__name:"FollowUpForm",props:{show:{type:Boolean,default:!1},tracker:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.show,set:z=>r("update:show",z)}),a=J(()=>{var z;return!!((z=n.tracker)!=null&&z.name)}),s=Q(!1),o=Q(0),l=[{id:"basic",title:"Basic Info",icon:HS,description:"Tracker identification and scheduling"},{id:"details",title:"Details",icon:vt,description:"Objectives and responsibility"},{id:"history",title:"Activities",icon:US,description:"Follow-up activities and history"},{id:"progress",title:"Progress",icon:Cl,description:"Progress assessment and ratings"},{id:"escalation",title:"Escalation",icon:nn,description:"Escalation management"},{id:"closure",title:"Closure",icon:Qs,description:"Closure and final assessment"}],d=Jt({tracker_id:"",audit_finding:"",finding_title:"",status:"Active",follow_up_type:"",frequency:"",start_date:"",next_due_date:"",responsible_person:"",responsible_department:"",follow_up_objective:"",success_criteria:"",follow_up_activities:[],last_follow_up_date:"",last_follow_up_by:"",last_findings:"",next_steps:"",current_status:"",progress_rating:0,effectiveness_rating:0,issues_identified:"",recommendations:"",escalation_required:!1,escalation_level:"",escalation_reason:"",escalation_date:"",closure_criteria_met:!1,closure_date:"",closed_by:"",closure_reason:"",final_assessment:"",notes:""}),c=[{label:"Active",value:"Active"},{label:"Completed",value:"Completed"},{label:"On Hold",value:"On Hold"},{label:"Cancelled",value:"Cancelled"}],f=[{label:"Corrective Action Monitoring",value:"Corrective Action Monitoring"},{label:"Preventive Measure Verification",value:"Preventive Measure Verification"},{label:"Process Improvement Tracking",value:"Process Improvement Tracking"},{label:"Risk Mitigation Assessment",value:"Risk Mitigation Assessment"},{label:"Compliance Verification",value:"Compliance Verification"}],p=[{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"One-time",value:"One-time"},{label:"As Needed",value:"As Needed"}],h=[{label:"Review",value:"Review"},{label:"Meeting",value:"Meeting"},{label:"Document Request",value:"Document Request"},{label:"Testing",value:"Testing"},{label:"Observation",value:"Observation"},{label:"Other",value:"Other"}],m=[{label:"On Track",value:"On Track"},{label:"Behind Schedule",value:"Behind Schedule"},{label:"At Risk",value:"At Risk"},{label:"Off Track",value:"Off Track"},{label:"Completed Successfully",value:"Completed Successfully"}],g=[{label:"Manager",value:"Manager"},{label:"Senior Management",value:"Senior Management"},{label:"Audit Committee",value:"Audit Committee"},{label:"Board",value:"Board"}],v=[{label:"Successfully Completed",value:"Successfully Completed"},{label:"No Longer Required",value:"No Longer Required"},{label:"Alternative Solution Implemented",value:"Alternative Solution Implemented"},{label:"Management Decision",value:"Management Decision"}];Je(()=>n.tracker,z=>{z?Object.keys(d).forEach(F=>{z[F]!==void 0&&(d[F]=z[F])}):I()},{immediate:!0});const _=J(()=>[!!(d.tracker_id&&d.audit_finding&&d.status&&d.follow_up_type&&d.frequency&&d.start_date),!!(d.responsible_person&&d.responsible_department&&d.follow_up_objective),!0,!0,!0,!0]),x=J(()=>_.value.filter(Boolean).length),w=J(()=>Math.round(x.value/l.length*100));function k(z){return _.value[z]}function S(z){return o.value===z?"text-blue-600":k(z)?"text-green-500":"text-gray-400"}function C(z){o.value=z}function A(){o.value<l.length-1&&o.value++}function M(){o.value>0&&o.value--}function $(){d.follow_up_activities.push({activity_date:new Date().toISOString().split("T")[0],activity_type:"",description:"",performed_by:""})}function R(z){d.follow_up_activities.splice(z,1)}function I(){Object.keys(d).forEach(z=>{Array.isArray(d[z])?d[z]=[]:typeof d[z]=="boolean"?d[z]=!1:typeof d[z]=="number"?d[z]=0:d[z]=""}),d.status="Active",o.value=0}function B(){r("update:show",!1),I()}function j(){return le(this,null,function*(){s.value=!0;try{console.log("Saving tracker:",d),r("saved",me({},d)),B()}catch(z){console.error("Error saving tracker:",z)}finally{s.value=!1}})}return(z,F)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":F[29]||(F[29]=q=>i.value=q),options:{title:a.value?"Edit Follow-up Tracker":"Create Follow-up Tracker",size:"7xl"}},{"body-content":D(()=>{var q,N,O,V;return[u("div",G7t,[u("div",Y7t,[u("div",K7t,[(T(),P(_e,null,we(l,(L,U)=>u("button",{key:L.id,onClick:G=>C(U),class:fe(["w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors",o.value===U?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"])},[(T(),he(Lt(L.icon),{class:fe(["h-4 w-4",S(U)])},null,8,["class"])),u("span",Z7t,E(L.title),1),k(U)?(T(),he(y(Qs),{key:0,class:"h-4 w-4 ml-auto text-green-500"})):ie("",!0)],10,X7t)),64))]),u("div",Q7t,[u("div",J7t," Progress: "+E(x.value)+"/"+E(l.length)+" sections ",1),u("div",ejt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:nt({width:`${w.value}%`})},null,4)])])]),u("div",tjt,[b(Rt,{icon:(q=l[o.value])==null?void 0:q.icon,title:(N=l[o.value])==null?void 0:N.title,description:(O=l[o.value])==null?void 0:O.description},null,8,["icon","title","description"]),u("div",njt,[xe(u("div",rjt,[u("div",ijt,[b(y(ge),{modelValue:d.tracker_id,"onUpdate:modelValue":F[0]||(F[0]=L=>d.tracker_id=L),label:"Tracker ID *",type:"text",placeholder:"e.g., FUT-2025-001"},null,8,["modelValue"]),u("div",null,[F[30]||(F[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Finding *",-1)),b(At,{modelValue:d.audit_finding,"onUpdate:modelValue":F[1]||(F[1]=L=>d.audit_finding=L),doctype:"Audit Finding",placeholder:"Select finding"},null,8,["modelValue"])])]),b(y(ge),{modelValue:d.finding_title,"onUpdate:modelValue":F[2]||(F[2]=L=>d.finding_title=L),label:"Finding Title",type:"text",disabled:""},null,8,["modelValue"]),u("div",ajt,[u("div",null,[F[31]||(F[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status *",-1)),b(y(Ke),{modelValue:d.status,"onUpdate:modelValue":F[3]||(F[3]=L=>d.status=L),options:c,placeholder:"Select status"},null,8,["modelValue"])]),u("div",null,[F[32]||(F[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Follow-up Type *",-1)),b(y(Ke),{modelValue:d.follow_up_type,"onUpdate:modelValue":F[4]||(F[4]=L=>d.follow_up_type=L),options:f,placeholder:"Select type"},null,8,["modelValue"])]),u("div",null,[F[33]||(F[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Frequency *",-1)),b(y(Ke),{modelValue:d.frequency,"onUpdate:modelValue":F[5]||(F[5]=L=>d.frequency=L),options:p,placeholder:"Select frequency"},null,8,["modelValue"])])]),u("div",sjt,[b(y(ge),{modelValue:d.start_date,"onUpdate:modelValue":F[6]||(F[6]=L=>d.start_date=L),label:"Start Date *",type:"date"},null,8,["modelValue"]),b(y(ge),{modelValue:d.next_due_date,"onUpdate:modelValue":F[7]||(F[7]=L=>d.next_due_date=L),label:"Next Due Date",type:"date"},null,8,["modelValue"])])],512),[[ot,o.value===0]]),xe(u("div",ojt,[u("div",ljt,[u("div",null,[F[34]||(F[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Responsible Person *",-1)),b(At,{modelValue:d.responsible_person,"onUpdate:modelValue":F[8]||(F[8]=L=>d.responsible_person=L),doctype:"User",placeholder:"Select person"},null,8,["modelValue"])]),u("div",null,[F[35]||(F[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Responsible Department *",-1)),b(At,{modelValue:d.responsible_department,"onUpdate:modelValue":F[9]||(F[9]=L=>d.responsible_department=L),doctype:"Department",placeholder:"Select department"},null,8,["modelValue"])])]),u("div",null,[F[36]||(F[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Follow-up Objective *",-1)),b(y(an),{modelValue:d.follow_up_objective,"onUpdate:modelValue":F[10]||(F[10]=L=>d.follow_up_objective=L),content:d.follow_up_objective,placeholder:"Describe the objective of this follow-up...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[F[37]||(F[37]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Success Criteria",-1)),b(y(an),{modelValue:d.success_criteria,"onUpdate:modelValue":F[11]||(F[11]=L=>d.success_criteria=L),content:d.success_criteria,placeholder:"Define the criteria for successful completion...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[ot,o.value===1]]),xe(u("div",ujt,[u("div",null,[u("div",djt,[F[39]||(F[39]=u("h4",{class:"text-sm font-medium text-gray-700"},"Follow-up Activities",-1)),b(y(Z),{size:"sm",onClick:$},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[F[38]||(F[38]=W(" Add Activity ",-1))]),_:1})]),u("div",cjt,[u("table",fjt,[F[41]||(F[41]=u("thead",{class:"bg-gray-50 sticky top-0"},[u("tr",null,[u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Date"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Activity Type"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"By"),u("th",{class:"px-3 py-2 w-12"})])],-1)),u("tbody",pjt,[(T(!0),P(_e,null,we(d.follow_up_activities,(L,U)=>(T(),P("tr",{key:U},[u("td",hjt,[b(y(ge),{modelValue:L.activity_date,"onUpdate:modelValue":G=>L.activity_date=G,type:"date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",mjt,[b(y(Ke),{modelValue:L.activity_type,"onUpdate:modelValue":G=>L.activity_type=G,options:h,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",gjt,[b(y(ge),{modelValue:L.description,"onUpdate:modelValue":G=>L.description=G,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",vjt,[b(y(ge),{modelValue:L.performed_by,"onUpdate:modelValue":G=>L.performed_by=G,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",yjt,[b(y(Z),{variant:"ghost",size:"sm",onClick:G=>R(U)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(V=d.follow_up_activities)!=null&&V.length?ie("",!0):(T(),P("tr",bjt,[...F[40]||(F[40]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No activities recorded. Click "Add Activity" to add one. ',-1)])]))])])])]),u("div",_jt,[F[43]||(F[43]=u("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Last Follow-up",-1)),u("div",xjt,[b(y(ge),{modelValue:d.last_follow_up_date,"onUpdate:modelValue":F[12]||(F[12]=L=>d.last_follow_up_date=L),label:"Date",type:"date",disabled:""},null,8,["modelValue"]),u("div",null,[F[42]||(F[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"By",-1)),b(At,{modelValue:d.last_follow_up_by,"onUpdate:modelValue":F[13]||(F[13]=L=>d.last_follow_up_by=L),doctype:"User",disabled:""},null,8,["modelValue"])])])]),u("div",null,[F[44]||(F[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Findings",-1)),b(y(an),{modelValue:d.last_findings,"onUpdate:modelValue":F[14]||(F[14]=L=>d.last_findings=L),content:d.last_findings,placeholder:"Findings from last follow-up...","editor-class":"prose-sm max-w-none min-h-[80px]",bubbleMenu:!0,disabled:""},null,8,["modelValue","content"])]),u("div",null,[F[45]||(F[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Next Steps",-1)),b(y(an),{modelValue:d.next_steps,"onUpdate:modelValue":F[15]||(F[15]=L=>d.next_steps=L),content:d.next_steps,placeholder:"Define next steps...","editor-class":"prose-sm max-w-none min-h-[80px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[ot,o.value===2]]),xe(u("div",wjt,[u("div",kjt,[u("div",null,[F[46]||(F[46]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Current Status",-1)),b(y(Ke),{modelValue:d.current_status,"onUpdate:modelValue":F[16]||(F[16]=L=>d.current_status=L),options:m,placeholder:"Select status"},null,8,["modelValue"])]),u("div",null,[F[47]||(F[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Progress Rating",-1)),u("div",Sjt,[(T(),P(_e,null,we(5,L=>u("button",{key:L,onClick:U=>d.progress_rating=L,class:"focus:outline-none"},[b(y(o2),{class:fe(["h-6 w-6",L<=d.progress_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"])},null,8,["class"])],8,Cjt)),64))])]),u("div",null,[F[48]||(F[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Effectiveness Rating",-1)),u("div",Ajt,[(T(),P(_e,null,we(5,L=>u("button",{key:L,onClick:U=>d.effectiveness_rating=L,class:"focus:outline-none"},[b(y(o2),{class:fe(["h-6 w-6",L<=d.effectiveness_rating?"text-green-400 fill-green-400":"text-gray-300"])},null,8,["class"])],8,Tjt)),64))])])]),u("div",null,[F[49]||(F[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Issues Identified",-1)),b(y(an),{modelValue:d.issues_identified,"onUpdate:modelValue":F[17]||(F[17]=L=>d.issues_identified=L),content:d.issues_identified,placeholder:"Document any issues identified...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[F[50]||(F[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Recommendations",-1)),b(y(an),{modelValue:d.recommendations,"onUpdate:modelValue":F[18]||(F[18]=L=>d.recommendations=L),content:d.recommendations,placeholder:"Provide recommendations...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[ot,o.value===3]]),xe(u("div",Ejt,[u("div",Mjt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":F[19]||(F[19]=L=>d.escalation_required=L),class:"rounded border-gray-300 h-5 w-5"},null,512),[[$n,d.escalation_required]]),F[51]||(F[51]=u("div",null,[u("span",{class:"font-medium text-orange-800"},"Escalation Required"),u("p",{class:"text-sm text-orange-600"},"Check if this issue needs to be escalated to higher management.")],-1))]),d.escalation_required?(T(),P("div",$jt,[u("div",Djt,[u("div",null,[F[52]||(F[52]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Escalation Level",-1)),b(y(Ke),{modelValue:d.escalation_level,"onUpdate:modelValue":F[20]||(F[20]=L=>d.escalation_level=L),options:g,placeholder:"Select level"},null,8,["modelValue"])]),b(y(ge),{modelValue:d.escalation_date,"onUpdate:modelValue":F[21]||(F[21]=L=>d.escalation_date=L),label:"Escalation Date",type:"date"},null,8,["modelValue"])]),u("div",null,[F[53]||(F[53]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Escalation Reason",-1)),b(y(ge),{modelValue:d.escalation_reason,"onUpdate:modelValue":F[22]||(F[22]=L=>d.escalation_reason=L),type:"textarea",rows:3,placeholder:"Describe the reason for escalation..."},null,8,["modelValue"])])])):ie("",!0)],512),[[ot,o.value===4]]),xe(u("div",Rjt,[u("div",Pjt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":F[23]||(F[23]=L=>d.closure_criteria_met=L),class:"rounded border-gray-300 h-5 w-5"},null,512),[[$n,d.closure_criteria_met]]),F[54]||(F[54]=u("div",null,[u("span",{class:"font-medium text-green-800"},"Closure Criteria Met"),u("p",{class:"text-sm text-green-600"},"Check if all success criteria have been satisfied.")],-1))]),u("div",Ijt,[b(y(ge),{modelValue:d.closure_date,"onUpdate:modelValue":F[24]||(F[24]=L=>d.closure_date=L),label:"Closure Date",type:"date"},null,8,["modelValue"]),u("div",null,[F[55]||(F[55]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Closed By",-1)),b(At,{modelValue:d.closed_by,"onUpdate:modelValue":F[25]||(F[25]=L=>d.closed_by=L),doctype:"User",placeholder:"Select user"},null,8,["modelValue"])]),u("div",null,[F[56]||(F[56]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Closure Reason",-1)),b(y(Ke),{modelValue:d.closure_reason,"onUpdate:modelValue":F[26]||(F[26]=L=>d.closure_reason=L),options:v,placeholder:"Select reason"},null,8,["modelValue"])])]),u("div",null,[F[57]||(F[57]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Final Assessment",-1)),b(y(an),{modelValue:d.final_assessment,"onUpdate:modelValue":F[27]||(F[27]=L=>d.final_assessment=L),content:d.final_assessment,placeholder:"Provide final assessment...","editor-class":"prose-sm max-w-none min-h-[120px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[F[58]||(F[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),b(y(an),{modelValue:d.notes,"onUpdate:modelValue":F[28]||(F[28]=L=>d.notes=L),content:d.notes,placeholder:"Additional notes...","editor-class":"prose-sm max-w-none min-h-[80px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[ot,o.value===5]])]),u("div",Ojt,[b(y(Z),{variant:"outline",onClick:M,disabled:o.value===0},{prefix:D(()=>[b(y(pr),{class:"h-4 w-4"})]),default:D(()=>[F[59]||(F[59]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",Ljt,[b(y(Z),{variant:"outline",onClick:B},{default:D(()=>[...F[60]||(F[60]=[W("Cancel",-1)])]),_:1}),o.value<l.length-1?(T(),he(y(Z),{key:0,variant:"solid",onClick:A},{suffix:D(()=>[b(y(tr),{class:"h-4 w-4"})]),default:D(()=>[F[61]||(F[61]=W(" Next ",-1))]),_:1})):(T(),he(y(Z),{key:1,variant:"solid",theme:"green",onClick:j,loading:s.value},{prefix:D(()=>[b(y(Cr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+E(a.value?"Update Tracker":"Create Tracker"),1)]),_:1},8,["loading"]))])])])])]}),_:1},8,["modelValue","options"]))}},Njt={class:"bg-white rounded-xl border p-4"},jjt={class:"flex flex-wrap items-center gap-4"},Fjt={class:"flex-1 min-w-[200px] max-w-md"},Bjt={class:"w-44"},zjt={class:"w-32"},Ujt={class:"w-48"},Hjt={class:"w-32"},qjt={class:"w-40"},Wjt={class:"flex items-center gap-2 ml-auto"},Gjt={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},Yjt={__name:"TrackerFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,i=Jt({search:"",auditFinding:"",status:"",followUpType:"",frequency:"",currentStatus:""});Je(()=>n.filters,h=>{h&&Object.assign(i,h)},{immediate:!0,deep:!0});const a=[{label:"All Status",value:""},{label:"Active",value:"Active"},{label:"Completed",value:"Completed"},{label:"On Hold",value:"On Hold"},{label:"Cancelled",value:"Cancelled"}],s=[{label:"All Types",value:""},{label:"Corrective Action Monitoring",value:"Corrective Action Monitoring"},{label:"Preventive Measure Verification",value:"Preventive Measure Verification"},{label:"Process Improvement Tracking",value:"Process Improvement Tracking"},{label:"Risk Mitigation Assessment",value:"Risk Mitigation Assessment"},{label:"Compliance Verification",value:"Compliance Verification"}],o=[{label:"All Frequencies",value:""},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"One-time",value:"One-time"},{label:"As Needed",value:"As Needed"}],l=[{label:"All Progress",value:""},{label:"On Track",value:"On Track"},{label:"Behind Schedule",value:"Behind Schedule"},{label:"At Risk",value:"At Risk"},{label:"Off Track",value:"Off Track"},{label:"Completed Successfully",value:"Completed Successfully"}],d=J(()=>Object.values(i).some(h=>h!==""));function c(){r("update:filters",me({},i))}function f(h){i[h]="",c()}function p(){Object.keys(i).forEach(h=>{i[h]=""}),c()}return(h,m)=>(T(),P("div",Njt,[u("div",jjt,[u("div",Fjt,[b(y(ge),{modelValue:i.search,"onUpdate:modelValue":[m[0]||(m[0]=g=>i.search=g),c],type:"text",placeholder:"Search by tracker ID or finding...",debounce:300},{prefix:D(()=>[b(y(Rn),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",Bjt,[b(At,{modelValue:i.auditFinding,"onUpdate:modelValue":[m[1]||(m[1]=g=>i.auditFinding=g),c],doctype:"Audit Finding",placeholder:"All Findings"},null,8,["modelValue"])]),u("div",zjt,[b(y(Ke),{modelValue:i.status,"onUpdate:modelValue":[m[2]||(m[2]=g=>i.status=g),c],options:a,placeholder:"All Status"},null,8,["modelValue"])]),u("div",Ujt,[b(y(Ke),{modelValue:i.followUpType,"onUpdate:modelValue":[m[3]||(m[3]=g=>i.followUpType=g),c],options:s,placeholder:"All Types"},null,8,["modelValue"])]),u("div",Hjt,[b(y(Ke),{modelValue:i.frequency,"onUpdate:modelValue":[m[4]||(m[4]=g=>i.frequency=g),c],options:o,placeholder:"Frequency"},null,8,["modelValue"])]),u("div",qjt,[b(y(Ke),{modelValue:i.currentStatus,"onUpdate:modelValue":[m[5]||(m[5]=g=>i.currentStatus=g),c],options:l,placeholder:"Current Status"},null,8,["modelValue"])]),u("div",Wjt,[d.value?(T(),he(y(Z),{key:0,variant:"outline",onClick:p},{prefix:D(()=>[b(y(ht),{class:"h-4 w-4"})]),default:D(()=>[m[14]||(m[14]=W(" Clear ",-1))]),_:1})):ie("",!0),b(y(Z),{variant:"outline",onClick:m[6]||(m[6]=g=>h.$emit("refresh"))},{prefix:D(()=>[b(y(hn),{class:"h-4 w-4"})]),default:D(()=>[m[15]||(m[15]=W(" Refresh ",-1))]),_:1}),b(y(Z),{variant:"solid",onClick:m[7]||(m[7]=g=>h.$emit("create"))},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[m[16]||(m[16]=W(" New Tracker ",-1))]),_:1})])]),d.value?(T(),P("div",Gjt,[m[17]||(m[17]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),i.search?(T(),he(y(Ee),{key:0,theme:"blue",class:"cursor-pointer",onClick:m[8]||(m[8]=g=>f("search"))},{default:D(()=>[W(' Search: "'+E(i.search)+'" ',1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.auditFinding?(T(),he(y(Ee),{key:1,theme:"purple",class:"cursor-pointer",onClick:m[9]||(m[9]=g=>f("auditFinding"))},{default:D(()=>[W(" Finding: "+E(i.auditFinding)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.status?(T(),he(y(Ee),{key:2,theme:"green",class:"cursor-pointer",onClick:m[10]||(m[10]=g=>f("status"))},{default:D(()=>[W(" Status: "+E(i.status)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.followUpType?(T(),he(y(Ee),{key:3,theme:"indigo",class:"cursor-pointer",onClick:m[11]||(m[11]=g=>f("followUpType"))},{default:D(()=>[W(" Type: "+E(i.followUpType)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.frequency?(T(),he(y(Ee),{key:4,theme:"orange",class:"cursor-pointer",onClick:m[12]||(m[12]=g=>f("frequency"))},{default:D(()=>[W(" Frequency: "+E(i.frequency)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.currentStatus?(T(),he(y(Ee),{key:5,theme:"gray",class:"cursor-pointer",onClick:m[13]||(m[13]=g=>f("currentStatus"))},{default:D(()=>[W(" Progress: "+E(i.currentStatus)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0)])):ie("",!0)]))}},Kjt={class:"space-y-4"},Xjt={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4"},Zjt=["onClick"],Qjt={class:"flex items-center gap-3"},Jjt={class:"text-2xl font-bold text-gray-900"},eFt={class:"text-xs text-gray-500"},tFt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},nFt={class:"bg-white rounded-xl border p-4"},rFt={class:"space-y-3"},iFt=["onClick"],aFt={class:"flex-1 text-sm text-gray-600"},sFt={class:"bg-white rounded-xl border p-4"},oFt={class:"grid grid-cols-3 gap-3"},lFt={class:"text-2xl font-bold text-red-700"},uFt={class:"text-2xl font-bold text-yellow-700"},dFt={class:"text-2xl font-bold text-green-700"},cFt={class:"bg-white rounded-xl border p-4"},fFt={class:"space-y-3"},pFt={class:"flex items-center justify-between"},hFt={class:"flex items-center justify-between"},mFt={class:"mt-4 pt-4 border-t"},gFt={class:"space-y-1"},vFt={class:"text-gray-600"},yFt={class:"font-medium text-gray-700"},bFt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},_Ft={class:"bg-white rounded-xl border p-4"},xFt={class:"grid grid-cols-2 gap-6"},wFt={class:"text-center"},kFt={class:"flex items-center justify-center gap-1 mb-2"},SFt={class:"text-lg font-bold text-gray-900"},CFt={class:"text-center"},AFt={class:"flex items-center justify-center gap-1 mb-2"},TFt={class:"text-lg font-bold text-gray-900"},EFt={class:"bg-white rounded-xl border p-4"},MFt={class:"space-y-2"},$Ft=["onClick"],DFt={class:"flex-1"},RFt={class:"flex items-center justify-between mb-1"},PFt={class:"text-sm text-gray-600 truncate max-w-[180px]"},IFt={class:"text-sm font-medium text-gray-700"},OFt={class:"w-full bg-gray-100 rounded-full h-2"},LFt={__name:"TrackerStats",props:{trackers:{type:Array,default:()=>[]},activeFilter:{type:String,default:""}},emits:["filter"],setup(t){const e=t,n=J(()=>{const h=e.trackers,m=h.length,g=h.filter(w=>w.status==="Active").length,v=h.filter(w=>w.status==="Completed").length,_=h.filter(w=>w.status==="On Hold").length,x=h.filter(w=>w.status==="Cancelled").length;return[{label:"Total Trackers",value:m,icon:yY,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:null,filterValue:null},{label:"Active",value:g,icon:Ii,bgColor:"bg-green-100",iconColor:"text-green-600",filterKey:"status",filterValue:"Active",active:e.activeFilter==="Active"},{label:"Completed",value:v,icon:Gt,bgColor:"bg-purple-100",iconColor:"text-purple-600",filterKey:"status",filterValue:"Completed",active:e.activeFilter==="Completed"},{label:"On Hold",value:_,icon:wY,bgColor:"bg-yellow-100",iconColor:"text-yellow-600",filterKey:"status",filterValue:"On Hold",active:e.activeFilter==="On Hold"},{label:"Cancelled",value:x,icon:Fc,bgColor:"bg-gray-100",iconColor:"text-gray-600",filterKey:"status",filterValue:"Cancelled",active:e.activeFilter==="Cancelled"}]}),r=J(()=>{const h=e.trackers;return[{name:"On Track",dotColor:"bg-green-500",theme:"green"},{name:"Behind Schedule",dotColor:"bg-yellow-500",theme:"orange"},{name:"At Risk",dotColor:"bg-orange-500",theme:"orange"},{name:"Off Track",dotColor:"bg-red-500",theme:"red"},{name:"Completed Successfully",dotColor:"bg-blue-500",theme:"blue"}].map(g=>je(me({},g),{count:h.filter(v=>v.current_status===g.name).length})).filter(g=>g.count>0)}),i=J(()=>{const h=new Date;return e.trackers.filter(m=>m.status!=="Active"||!m.next_due_date?!1:new Date(m.next_due_date)<h).length}),a=J(()=>{const h=new Date,m=new Date(h.getTime()+7*24*60*60*1e3);return e.trackers.filter(g=>{if(g.status!=="Active"||!g.next_due_date)return!1;const v=new Date(g.next_due_date);return v>=h&&v<=m}).length}),s=J(()=>{const h=new Date,m=new Date(h.getTime()+7*24*60*60*1e3);return e.trackers.filter(g=>g.status!=="Active"||!g.next_due_date?!1:new Date(g.next_due_date)>m).length}),o=J(()=>e.trackers.filter(h=>h.escalation_required).length),l=J(()=>e.trackers.filter(h=>!h.escalation_required&&h.status==="Active").length),d=J(()=>["Manager","Senior Management","Audit Committee","Board"].map(m=>({name:m,count:e.trackers.filter(g=>g.escalation_level===m).length})).filter(m=>m.count>0)),c=J(()=>{const h=e.trackers.filter(m=>m.progress_rating);return h.length?h.reduce((m,g)=>m+g.progress_rating,0)/h.length:0}),f=J(()=>{const h=e.trackers.filter(m=>m.effectiveness_rating);return h.length?h.reduce((m,g)=>m+g.effectiveness_rating,0)/h.length:0}),p=J(()=>{const h=e.trackers,m=h.length||1,g=["Corrective Action Monitoring","Preventive Measure Verification","Process Improvement Tracking","Risk Mitigation Assessment","Compliance Verification"],v=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-indigo-500"];return g.map((_,x)=>({name:_,count:h.filter(w=>w.follow_up_type===_).length,percentage:Math.round(h.filter(w=>w.follow_up_type===_).length/m*100),barColor:v[x]})).filter(_=>_.count>0)});return(h,m)=>(T(),P("div",Kjt,[u("div",Xjt,[(T(!0),P(_e,null,we(n.value,g=>(T(),P("div",{key:g.label,class:fe(["bg-white rounded-xl border p-4 hover:shadow-md transition-shadow cursor-pointer",g.active?"ring-2 ring-blue-500":""]),onClick:v=>h.$emit("filter",g.filterKey,g.filterValue)},[u("div",Qjt,[u("div",{class:fe(["p-2 rounded-lg",g.bgColor])},[(T(),he(Lt(g.icon),{class:fe(["h-5 w-5",g.iconColor])},null,8,["class"]))],2),u("div",null,[u("div",Jjt,E(g.value),1),u("div",eFt,E(g.label),1)])])],10,Zjt))),128))]),u("div",tFt,[u("div",nFt,[m[3]||(m[3]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Current Status",-1)),u("div",rFt,[(T(!0),P(_e,null,we(r.value,g=>(T(),P("div",{key:g.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:v=>h.$emit("filter","current_status",g.name)},[u("div",{class:fe(["w-3 h-3 rounded-full",g.dotColor])},null,2),u("div",aFt,E(g.name),1),b(y(Ee),{theme:g.theme},{default:D(()=>[W(E(g.count),1)]),_:2},1032,["theme"])],8,iFt))),128))])]),u("div",sFt,[m[7]||(m[7]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Due Date Status",-1)),u("div",oFt,[u("div",{class:"p-3 bg-red-50 border border-red-200 rounded-lg text-center cursor-pointer hover:shadow-sm",onClick:m[0]||(m[0]=g=>h.$emit("filter","overdue",!0))},[u("div",lFt,E(i.value),1),m[4]||(m[4]=u("div",{class:"text-xs text-red-600"},"Overdue",-1))]),u("div",{class:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-center cursor-pointer hover:shadow-sm",onClick:m[1]||(m[1]=g=>h.$emit("filter","due_soon",!0))},[u("div",uFt,E(a.value),1),m[5]||(m[5]=u("div",{class:"text-xs text-yellow-600"},"Due Soon",-1))]),u("div",{class:"p-3 bg-green-50 border border-green-200 rounded-lg text-center cursor-pointer hover:shadow-sm",onClick:m[2]||(m[2]=g=>h.$emit("filter","on_time",!0))},[u("div",dFt,E(s.value),1),m[6]||(m[6]=u("div",{class:"text-xs text-green-600"},"On Time",-1))])])]),u("div",cFt,[m[11]||(m[11]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Escalation Status",-1)),u("div",fFt,[u("div",pFt,[m[8]||(m[8]=u("span",{class:"text-sm text-gray-600"},"Escalation Required",-1)),b(y(Ee),{theme:"red"},{default:D(()=>[W(E(o.value),1)]),_:1})]),u("div",hFt,[m[9]||(m[9]=u("span",{class:"text-sm text-gray-600"},"Not Escalated",-1)),b(y(Ee),{theme:"green"},{default:D(()=>[W(E(l.value),1)]),_:1})]),u("div",mFt,[m[10]||(m[10]=u("div",{class:"text-xs text-gray-500 mb-2"},"Escalation by Level",-1)),u("div",gFt,[(T(!0),P(_e,null,we(d.value,g=>(T(),P("div",{key:g.name,class:"flex items-center justify-between text-sm"},[u("span",vFt,E(g.name),1),u("span",yFt,E(g.count),1)]))),128))])])])])]),u("div",bFt,[u("div",_Ft,[m[14]||(m[14]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Average Ratings",-1)),u("div",xFt,[u("div",wFt,[u("div",kFt,[(T(),P(_e,null,we(5,g=>b(y(o2),{key:g,class:fe(["h-5 w-5",g<=c.value?"text-yellow-400 fill-yellow-400":"text-gray-300"])},null,8,["class"])),64))]),u("div",SFt,E(c.value.toFixed(1)),1),m[12]||(m[12]=u("div",{class:"text-xs text-gray-500"},"Progress Rating",-1))]),u("div",CFt,[u("div",AFt,[(T(),P(_e,null,we(5,g=>b(y(o2),{key:g,class:fe(["h-5 w-5",g<=f.value?"text-green-400 fill-green-400":"text-gray-300"])},null,8,["class"])),64))]),u("div",TFt,E(f.value.toFixed(1)),1),m[13]||(m[13]=u("div",{class:"text-xs text-gray-500"},"Effectiveness Rating",-1))])])]),u("div",EFt,[m[15]||(m[15]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"By Follow-up Type",-1)),u("div",MFt,[(T(!0),P(_e,null,we(p.value,g=>(T(),P("div",{key:g.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:v=>h.$emit("filter","follow_up_type",g.name)},[u("div",DFt,[u("div",RFt,[u("span",PFt,E(g.name),1),u("span",IFt,E(g.count),1)]),u("div",OFt,[u("div",{class:fe(["h-2 rounded-full",g.barColor]),style:nt({width:`${g.percentage}%`})},null,6)])])],8,$Ft))),128))])])])]))}},VFt=Ul("followup",{state:()=>({trackers:[],selectedTracker:null,loading:!1,saving:!1,error:null,searchQuery:"",filters:{status:"",followUpType:"",frequency:"",currentStatus:"",responsiblePerson:"",auditFinding:""}}),getters:{filteredTrackers:t=>{let e=t.trackers;if(t.searchQuery){const n=t.searchQuery.toLowerCase();e=e.filter(r=>{var i,a,s;return((i=r.tracker_id)==null?void 0:i.toLowerCase().includes(n))||((a=r.finding_title)==null?void 0:a.toLowerCase().includes(n))||((s=r.description)==null?void 0:s.toLowerCase().includes(n))})}if(t.filters.status&&(e=e.filter(n=>n.status===t.filters.status)),t.filters.followUpType&&(e=e.filter(n=>n.follow_up_type===t.filters.followUpType)),t.filters.frequency&&(e=e.filter(n=>n.frequency===t.filters.frequency)),t.filters.currentStatus&&(e=e.filter(n=>n.current_status===t.filters.currentStatus)),t.filters.responsiblePerson){const n=t.filters.responsiblePerson.toLowerCase();e=e.filter(r=>{var i;return(i=r.responsible_person)==null?void 0:i.toLowerCase().includes(n)})}return t.filters.auditFinding&&(e=e.filter(n=>n.audit_finding===t.filters.auditFinding)),e},stats:t=>{const e=t.trackers.length,n=t.trackers.filter(c=>c.status==="Active").length,r=t.trackers.filter(c=>c.status==="Completed").length,i=t.trackers.filter(c=>c.status==="On Hold").length,a=new Date,s=t.trackers.filter(c=>!c.next_due_date||c.status!=="Active"?!1:new Date(c.next_due_date)<a).length,o=t.trackers.filter(c=>c.current_status==="At Risk"||c.current_status==="Off Track").length,l={Active:n,Completed:r,"On Hold":i,Cancelled:t.trackers.filter(c=>c.status==="Cancelled").length},d={};return t.trackers.forEach(c=>{const f=c.follow_up_type||"Other";d[f]||(d[f]={total:0,completed:0}),d[f].total++,c.status==="Completed"&&d[f].completed++}),{total:e,active:n,completed:r,onHold:i,overdue:s,atRisk:o,statusDistribution:l,progressByType:d}}},actions:{fetchTrackers(){return le(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ie({url:"frappe.client.get_list",params:{doctype:"Follow-up Tracker",fields:["name","tracker_id","audit_finding","finding_title","status","follow_up_type","frequency","start_date","next_due_date","last_follow_up_date","responsible_person","responsible_department","current_status","progress_rating","effectiveness_rating","escalation_required","escalation_level","closure_date","closure_criteria_met","closure_reason","creation","modified"],limit_page_length:0,order_by:"modified desc"}}).fetch();this.trackers=t||[]}catch(t){console.error("Error fetching follow-up trackers:",t),this.error=t.message||"Failed to fetch follow-up trackers",this.trackers=[]}finally{this.loading=!1}})},getTrackerDetails(t){return le(this,null,function*(){try{this.loading=!0;const e=yield Ie({url:"frappe.client.get",params:{doctype:"Follow-up Tracker",name:t}}).fetch();return this.selectedTracker=e,e}catch(e){throw console.error("Error fetching tracker details:",e),e}finally{this.loading=!1}})},createTracker(t){return le(this,null,function*(){try{this.saving=!0;const e=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Follow-up Tracker"},t)}}).fetch();return yield this.fetchTrackers(),e}catch(e){throw console.error("Error creating tracker:",e),e}finally{this.saving=!1}})},updateTracker(t,e){return le(this,null,function*(){try{this.saving=!0;const n=yield Ie({url:"frappe.client.set_value",params:{doctype:"Follow-up Tracker",name:t,fieldname:e}}).fetch();return yield this.fetchTrackers(),n}catch(n){throw console.error("Error updating tracker:",n),n}finally{this.saving=!1}})},saveTracker(t){return le(this,null,function*(){return t.name?this.updateTracker(t.name,t):this.createTracker(t)})},deleteTracker(t){return le(this,null,function*(){try{this.saving=!0,yield Ie({url:"frappe.client.delete",params:{doctype:"Follow-up Tracker",name:t}}).fetch(),yield this.fetchTrackers()}catch(e){throw console.error("Error deleting tracker:",e),e}finally{this.saving=!1}})},addFollowUpActivity(t,e){return le(this,null,function*(){try{this.saving=!0;const r=(yield this.getTrackerDetails(t)).follow_up_activities||[];r.push(je(me({},e),{activity_date:e.activity_date||new Date().toISOString().split("T")[0]})),yield Ie({url:"frappe.client.set_value",params:{doctype:"Follow-up Tracker",name:t,fieldname:{follow_up_activities:r,last_follow_up_date:new Date().toISOString().split("T")[0]}}}).fetch(),yield this.fetchTrackers()}catch(n){throw console.error("Error adding follow-up activity:",n),n}finally{this.saving=!1}})},setFilters(t){this.filters=me(me({},this.filters),t)},clearFilters(){this.searchQuery="",this.filters={status:"",followUpType:"",frequency:"",currentStatus:"",responsiblePerson:"",auditFinding:""}}}}),NFt={class:"space-y-6"},jFt={class:"flex items-center justify-between"},FFt={class:"flex items-center space-x-3"},BFt={class:"bg-white rounded-lg border border-gray-200"},zFt={class:"p-6"},UFt={class:"flex items-center space-x-2"},HFt={key:0,class:"text-sm text-gray-600"},qFt={class:"text-sm"},WFt={key:0,class:"text-gray-500 text-xs"},GFt={class:"flex items-center space-x-2"},YFt={__name:"FollowUpTracker",setup(t){xn();const e=VFt(),n=Q(!1),r=Q(!1),i=Q(null),a=J(()=>e.loading),s=J(()=>e.filteredTrackers),o=J(()=>e.stats),l=J({get:()=>e.searchQuery,set:I=>e.searchQuery=I}),d=J({get:()=>e.filters.status,set:I=>e.filters.status=I}),c=J({get:()=>e.filters.followUpType,set:I=>e.filters.followUpType=I}),f=J({get:()=>e.filters.frequency,set:I=>e.filters.frequency=I}),p=J({get:()=>e.filters.responsiblePerson,set:I=>e.filters.responsiblePerson=I}),h=[{key:"tracker_id",label:"Tracker ID",sortable:!0,width:"120px"},{key:"finding_title",label:"Finding Title",sortable:!0},{key:"status",label:"Status",sortable:!0,width:"100px"},{key:"follow_up_type",label:"Type",sortable:!0,width:"150px"},{key:"responsible_person",label:"Responsible",sortable:!0,width:"120px"},{key:"current_status",label:"Progress",sortable:!0,width:"120px"},{key:"next_due_date",label:"Next Due",sortable:!0,width:"100px"},{key:"last_follow_up_date",label:"Last Follow-up",sortable:!0,width:"120px"},{key:"actions",label:"Actions",width:"140px"}],m=()=>le(this,null,function*(){yield e.fetchTrackers()}),g=I=>({Active:"success",Completed:"secondary","On Hold":"warning",Cancelled:"danger"})[I]||"secondary",v=I=>({"On Track":"success","Behind Schedule":"warning","At Risk":"danger","Off Track":"danger","Completed Successfully":"secondary"})[I]||"secondary",_=I=>{if(!I)return"text-gray-900";const B=new Date,z=new Date(I)-B,F=Math.ceil(z/(1e3*60*60*24));return F<0?"text-red-600 font-medium":F<=7?"text-yellow-600 font-medium":"text-gray-900"},x=I=>I?new Date(I).toLocaleDateString():"Not set",w=I=>{k(I)},k=I=>le(this,null,function*(){try{i.value=yield e.getTrackerDetails(I.name),r.value=!0,n.value=!0}catch(B){console.error("Error fetching tracker details:",B)}}),S=I=>le(this,null,function*(){try{i.value=yield e.getTrackerDetails(I.name),r.value=!0,n.value=!0}catch(B){console.error("Error fetching tracker details:",B)}}),C=I=>le(this,null,function*(){try{i.value=yield e.getTrackerDetails(I.name),r.value=!0,n.value=!0}catch(B){console.error("Error fetching tracker details:",B)}}),A=I=>le(this,null,function*(){if(confirm("Are you sure you want to delete this follow-up tracker?"))try{yield e.deleteTracker(I.name)}catch(B){console.error("Error deleting tracker:",B)}}),M=()=>{i.value=null,r.value=!1,n.value=!0},$=()=>le(this,null,function*(){n.value=!1,yield m()}),R=()=>{console.log("Export trackers")};return bt(()=>le(this,null,function*(){yield m()})),(I,B)=>(T(),P("div",NFt,[u("div",jFt,[B[8]||(B[8]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Follow-up Tracker"),u("p",{class:"text-gray-600 mt-1"}," Track and manage follow-up activities on audit findings ")],-1)),u("div",FFt,[b(y(Z),{variant:"outline",onClick:R},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),B[6]||(B[6]=W(" Export ",-1))]),_:1}),b(y(Z),{onClick:M},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),B[7]||(B[7]=W(" New Follow-up Tracker ",-1))]),_:1})])]),b(LFt,{stats:o.value},null,8,["stats"]),b(Yjt,{searchQuery:l.value,"onUpdate:searchQuery":B[0]||(B[0]=j=>l.value=j),selectedStatus:d.value,"onUpdate:selectedStatus":B[1]||(B[1]=j=>d.value=j),selectedFollowUpType:c.value,"onUpdate:selectedFollowUpType":B[2]||(B[2]=j=>c.value=j),selectedFrequency:f.value,"onUpdate:selectedFrequency":B[3]||(B[3]=j=>f.value=j),selectedProgress:p.value,"onUpdate:selectedProgress":B[4]||(B[4]=j=>p.value=j)},null,8,["searchQuery","selectedStatus","selectedFollowUpType","selectedFrequency","selectedProgress"]),u("div",BFt,[u("div",zFt,[b(y(JO),{columns:h,data:s.value,loading:a.value,pagination:!0,sortable:!0,filterable:!0,onRowClick:w},{"column-status":D(({row:j})=>[b(y(Ee),{variant:g(j.status)},{default:D(()=>[W(E(j.status||"Active"),1)]),_:2},1032,["variant"])]),"column-current_status":D(({row:j})=>[u("div",UFt,[b(y(Ee),{variant:v(j.current_status)},{default:D(()=>[W(E(j.current_status||"On Track"),1)]),_:2},1032,["variant"]),j.progress_rating?(T(),P("span",HFt,E(j.progress_rating)+"/5 ",1)):ie("",!0)])]),"column-next_due_date":D(({row:j})=>[u("div",qFt,[u("div",{class:fe(_(j.next_due_date))},E(x(j.next_due_date)),3),j.frequency?(T(),P("div",WFt,E(j.frequency),1)):ie("",!0)])]),"column-actions":D(({row:j})=>[u("div",GFt,[b(y(Z),{variant:"ghost",size:"sm",onClick:z=>k(j)},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:z=>S(j)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:z=>C(j)},{default:D(()=>[b(y(tt),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",color:"red",onClick:z=>A(j)},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:1},8,["data","loading"])])]),b(Vjt,{show:n.value,"onUpdate:show":B[5]||(B[5]=j=>n.value=j),"tracker-data":i.value,"is-edit-mode":r.value,onSaved:$},null,8,["show","tracker-data","is-edit-mode"])]))}},KFt={class:"space-y-6"},XFt={class:"flex items-center justify-between"},ZFt={class:"flex items-center space-x-3"},QFt={class:"bg-white rounded-lg border border-gray-200"},JFt={class:"border-b border-gray-200"},e9t={class:"flex"},t9t={class:"p-6"},n9t={key:0,class:"text-center py-12"},r9t={class:"max-w-md mx-auto"},i9t={key:1,class:"text-center py-12"},a9t={class:"max-w-md mx-auto"},s9t={class:"text-gray-600 mb-6"},o9t={key:2,class:"text-center py-12"},l9t={class:"max-w-md mx-auto"},u9t={class:"text-gray-600 mb-6"},d9t={key:3,class:"text-center py-12"},c9t={class:"max-w-md mx-auto"},f9t={class:"text-gray-600 mb-6"},p9t={key:4,class:"text-center py-12"},h9t={class:"max-w-md mx-auto"},m9t={key:5,class:"text-center py-12"},g9t={class:"max-w-md mx-auto"},v9t={class:"text-gray-600 mb-6"},y9t={key:0},b9t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},_9t={class:"flex flex-col items-center justify-center h-full"},x9t={class:"flex items-start justify-between mb-4"},w9t={class:"flex-1"},k9t={class:"text-lg font-medium text-gray-900 mb-1"},S9t={class:"text-sm text-gray-600 mb-2"},C9t={class:"flex items-center space-x-2"},A9t={class:"flex items-center space-x-2"},T9t={class:"space-y-2 text-sm text-gray-500"},E9t={class:"flex justify-between"},M9t={class:"flex justify-between"},$9t={class:"flex justify-between"},D9t={key:1},R9t={class:"space-y-4"},P9t={class:"flex items-center justify-between"},I9t={class:"flex items-center space-x-3"},O9t={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},L9t={class:"min-w-full divide-y divide-gray-200"},V9t={class:"bg-white divide-y divide-gray-200"},N9t={class:"px-6 py-4 whitespace-nowrap"},j9t={class:"text-sm font-medium text-gray-900"},F9t={class:"text-sm text-gray-500"},B9t={class:"px-6 py-4 whitespace-nowrap"},z9t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},U9t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},H9t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},q9t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},W9t={key:2},G9t={class:"space-y-4"},Y9t={class:"flex items-center justify-between"},K9t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X9t={class:"flex items-start justify-between mb-4"},Z9t={class:"flex-1"},Q9t={class:"text-lg font-medium text-gray-900 mb-1"},J9t={class:"text-sm text-gray-600 mb-2"},eBt={class:"flex items-center space-x-2"},tBt={class:"space-y-2 text-sm"},nBt={class:"flex justify-between"},rBt={class:"font-medium"},iBt={class:"flex justify-between"},aBt={class:"font-medium"},sBt={class:"flex justify-between"},oBt={class:"font-medium"},lBt={class:"flex justify-between"},uBt={class:"font-medium"},dBt={key:3},cBt={class:"space-y-6"},fBt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},pBt={class:"bg-white border border-gray-200 rounded-lg p-6"},hBt={class:"flex items-center"},mBt={class:"p-2 bg-blue-100 rounded-lg"},gBt={class:"ml-4"},vBt={class:"text-2xl font-bold text-gray-900"},yBt={class:"bg-white border border-gray-200 rounded-lg p-6"},bBt={class:"flex items-center"},_Bt={class:"p-2 bg-green-100 rounded-lg"},xBt={class:"ml-4"},wBt={class:"text-2xl font-bold text-gray-900"},kBt={class:"bg-white border border-gray-200 rounded-lg p-6"},SBt={class:"flex items-center"},CBt={class:"p-2 bg-purple-100 rounded-lg"},ABt={class:"ml-4"},TBt={class:"text-2xl font-bold text-gray-900"},EBt={class:"bg-white border border-gray-200 rounded-lg p-6"},MBt={class:"flex items-center"},$Bt={class:"p-2 bg-orange-100 rounded-lg"},DBt={class:"ml-4"},RBt={class:"text-2xl font-bold text-gray-900"},PBt={class:"bg-white border border-gray-200 rounded-lg p-6"},IBt={class:"flex items-center justify-between mb-6"},OBt={class:"flex items-center space-x-3"},LBt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},VBt={class:"flex items-end"},NBt={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},jBt={class:"overflow-x-auto"},FBt={class:"min-w-full divide-y divide-gray-200"},BBt={class:"bg-gray-50"},zBt=["onClick"],UBt={class:"flex items-center"},HBt={class:"bg-white divide-y divide-gray-200"},qBt=["onClick"],WBt={class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},GBt={class:"flex items-center justify-between"},YBt={class:"text-sm text-gray-700"},KBt={class:"flex items-center space-x-2"},XBt={class:"text-sm text-gray-700"},ZBt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},QBt={class:"bg-white border border-gray-200 rounded-lg p-6"},JBt={class:"h-64"},ezt={class:"bg-white border border-gray-200 rounded-lg p-6"},tzt={class:"h-64"},nzt={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},rzt={class:"bg-white rounded-lg border border-gray-200 p-6"},izt={class:"flex items-center"},azt={class:"p-2 bg-blue-100 rounded-lg"},szt={class:"ml-4"},ozt={class:"text-2xl font-bold text-gray-900"},lzt={class:"bg-white rounded-lg border border-gray-200 p-6"},uzt={class:"flex items-center"},dzt={class:"p-2 bg-green-100 rounded-lg"},czt={class:"ml-4"},fzt={class:"text-2xl font-bold text-gray-900"},pzt={class:"bg-white rounded-lg border border-gray-200 p-6"},hzt={class:"flex items-center"},mzt={class:"p-2 bg-red-100 rounded-lg"},gzt={class:"ml-4"},vzt={class:"text-2xl font-bold text-gray-900"},yzt={class:"bg-white rounded-lg border border-gray-200 p-6"},bzt={class:"flex items-center"},_zt={class:"p-2 bg-purple-100 rounded-lg"},xzt={class:"ml-4"},wzt={class:"text-2xl font-bold text-gray-900"},du={__name:"ImportData",props:{defaultTab:{type:String,default:"imports"},mode:{type:String,default:null},importTypeId:{type:String,default:null},historyId:{type:String,default:null},mappingId:{type:String,default:null}},setup(t){const e=t;Ja.register(yS,bS,S0,Ey,Kw,Woe,Yoe,Hoe);const n=xn(),r=wA(),i=Q(e.defaultTab),a=Q(""),s=Q(""),o=Q(!1),l=Q(null),d=Q(null),c=Q(""),f=Q({dateFrom:"",dateTo:"",search:""}),p=Q(""),h=Q("asc"),m=Q(1),g=Q(25),v=Q([]),_=Q({glEntries:0,customers:0,items:0,salesInvoices:0}),x=[{label:"All Status",value:""},{label:"Success",value:"Success"},{label:"Failed",value:"Failed"},{label:"Processing",value:"Processing"},{label:"Cancelled",value:"Cancelled"}],w=J(()=>{let ve=r.csvImportHistory;if(a.value){const Y=a.value.toLowerCase();ve=ve.filter(K=>{var H,ae,be;return((H=K.import_type_name)==null?void 0:H.toLowerCase().includes(Y))||((ae=K.file_name)==null?void 0:ae.toLowerCase().includes(Y))||((be=K.status)==null?void 0:be.toLowerCase().includes(Y))})}return s.value&&(ve=ve.filter(Y=>Y.status===s.value)),ve}),k=J(()=>r.csvImportHistory.filter(ve=>ve.status==="Success").length),S=J(()=>r.csvImportHistory.filter(ve=>ve.status==="Failed").length),C=[{label:"GL Entries",value:"gl_entries"},{label:"Customers",value:"customers"},{label:"Items",value:"items"},{label:"Sales Invoices",value:"sales_invoices"},{label:"Purchase Invoices",value:"purchase_invoices"},{label:"Vendor Ledger",value:"vendor_ledger"}],A=J(()=>({gl_entries:[{key:"posting_date",label:"Posting Date",type:"date"},{key:"document_no",label:"Document No",type:"string"},{key:"account_no",label:"Account No",type:"string"},{key:"description",label:"Description",type:"string"},{key:"debit_amount",label:"Debit",type:"currency"},{key:"credit_amount",label:"Credit",type:"currency"}],customers:[{key:"no",label:"Customer No",type:"string"},{key:"name",label:"Name",type:"string"},{key:"address",label:"Address",type:"string"},{key:"phone_no",label:"Phone",type:"string"},{key:"email",label:"Email",type:"string"}],items:[{key:"no",label:"Item No",type:"string"},{key:"description",label:"Description",type:"string"},{key:"unit_cost",label:"Unit Cost",type:"currency"},{key:"unit_price",label:"Unit Price",type:"currency"},{key:"inventory",label:"Inventory",type:"number"}],sales_invoices:[{key:"no",label:"Invoice No",type:"string"},{key:"posting_date",label:"Posting Date",type:"date"},{key:"sell_to_customer_no",label:"Customer No",type:"string"},{key:"sell_to_customer_name",label:"Customer Name",type:"string"},{key:"amount",label:"Amount",type:"currency"},{key:"status",label:"Status",type:"string"}]})[c.value]||[]),M=J(()=>{let ve=[...v.value];if(f.value.search){const Y=f.value.search.toLowerCase();ve=ve.filter(K=>Object.values(K).some(H=>String(H).toLowerCase().includes(Y)))}return f.value.dateFrom&&(ve=ve.filter(Y=>new Date(Y.posting_date||Y.created_at)>=new Date(f.value.dateFrom))),f.value.dateTo&&(ve=ve.filter(Y=>new Date(Y.posting_date||Y.created_at)<=new Date(f.value.dateTo))),p.value&&ve.sort((Y,K)=>{const H=Y[p.value],ae=K[p.value];let be=0;return H<ae&&(be=-1),H>ae&&(be=1),h.value==="desc"?-be:be}),ve}),$=J(()=>{const ve=(m.value-1)*g.value,Y=ve+g.value;return M.value.slice(ve,Y)}),R=J(()=>Math.ceil(M.value.length/g.value)),I=J(()=>e.mode==="new-import-type"?"new-import-type":e.mode==="edit-import-type"&&e.importTypeId?"edit-import-type":e.mode==="run-import"&&e.importTypeId?"run-import":e.mode==="view-history"&&e.historyId?"view-history":e.mode==="new-mapping"?"new-mapping":e.mode==="edit-mapping"&&e.mappingId?"edit-mapping":null),B=()=>le(this,null,function*(){o.value=!0;try{yield Promise.all([r.fetchCsvImportTypes(),r.fetchCsvImportHistory()])}catch(ve){console.error("Error loading import data:",ve)}finally{o.value=!1}}),j=ve=>({"Audit Data":"info","Financial Data":"success","Customer Data":"warning","Inventory Data":"secondary","Transaction Data":"info"})[ve]||"secondary",z=ve=>({Success:"success",Failed:"danger",Processing:"warning",Cancelled:"secondary"})[ve]||"secondary",F=ve=>ve?new Date(ve).toLocaleString():"N/A",q=()=>{n.push("/import-data/import-type/new")},N=ve=>{n.push(`/import-data/import-type/${ve.name}/edit`)},O=ve=>{n.push(`/import-data/import-type/${ve.name}/run`)},V=ve=>{n.push(`/import-data/history/${ve.name}`)},L=()=>{n.push("/import-data/mapping/new")},U=ve=>{n.push(`/import-data/mapping/${ve.name}/edit`)},G=()=>le(this,null,function*(){if(c.value){o.value=!0;try{yield X()}catch(ve){console.error("Error loading BC data:",ve)}finally{o.value=!1}}}),X=()=>le(this,null,function*(){const ve={gl_entries:[{id:1,posting_date:"2024-01-15",document_no:"INV001",account_no:"4000",description:"Sales Revenue",debit_amount:0,credit_amount:15e3},{id:2,posting_date:"2024-01-15",document_no:"INV001",account_no:"1200",description:"Accounts Receivable",debit_amount:15e3,credit_amount:0}],customers:[{id:1,no:"CUST001",name:"ABC Company Ltd",address:"123 Main St, Nairobi",phone_no:"+254700000000",email:"info@abc.com"}],items:[{id:1,no:"ITEM001",description:"Office Chair",unit_cost:5e3,unit_price:7500,inventory:25}],sales_invoices:[{id:1,no:"SI001",posting_date:"2024-01-15",sell_to_customer_no:"CUST001",sell_to_customer_name:"ABC Company Ltd",amount:15e3,status:"Posted"}]};v.value=ve[c.value]||[],_.value={glEntries:ve.gl_entries.length,customers:ve.customers.length,items:ve.items.length,salesInvoices:ve.sales_invoices.length},setTimeout(()=>{ne(),ce()},100)}),re=()=>{m.value=1},ee=ve=>{p.value===ve?h.value=h.value==="asc"?"desc":"asc":(p.value=ve,h.value="asc")},de=(ve,Y)=>{if(!ve)return"-";switch(Y){case"currency":return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(ve);case"date":return new Date(ve).toLocaleDateString();case"number":return new Intl.NumberFormat().format(ve);default:return String(ve)}},se=ve=>{console.log("View record details:",ve)},te=()=>{n.push("/data-management/import-wizard")},ne=()=>{if(!l.value)return;const ve=l.value.getContext("2d"),K={type:"bar",data:{labels:["GL Entries","Customers","Items","Sales Invoices"],datasets:[{label:"Record Count",data:[_.value.glEntries,_.value.customers,_.value.items,_.value.salesInvoices],backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(139, 69, 19, 0.8)","rgba(245, 158, 11, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(139, 69, 19)","rgb(245, 158, 11)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Business Central Data Distribution"}}}};new Ja(ve,K)},ce=()=>{if(!d.value)return;const ve=d.value.getContext("2d"),K={type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"GL Entries",data:[120,150,180,200,170,190],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)"},{label:"Sales Invoices",data:[80,90,110,130,120,140],borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.5)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Monthly Trends"}}}};new Ja(ve,K)};return bt(()=>le(this,null,function*(){yield B()})),Je(()=>e.defaultTab,ve=>{i.value=ve}),(ve,Y)=>{const K=Ji("ChevronRightIcon");return T(),P("div",KFt,[u("div",XFt,[Y[13]||(Y[13]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Import Data"),u("p",{class:"text-gray-600 mt-1"}," Manage CSV imports and data import configurations ")],-1)),u("div",ZFt,[b(y(Z),{variant:"outline"},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),Y[11]||(Y[11]=W(" Download Template ",-1))]),_:1}),b(y(Z),{onClick:q},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),Y[12]||(Y[12]=W(" New Import Type ",-1))]),_:1})])]),u("div",QFt,[u("div",JFt,[u("nav",e9t,[u("button",{onClick:Y[0]||(Y[0]=H=>i.value="imports"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",i.value==="imports"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Import Types ",2),u("button",{onClick:Y[1]||(Y[1]=H=>i.value="history"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",i.value==="history"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Import History ",2),u("button",{onClick:Y[2]||(Y[2]=H=>i.value="bc-explorer"),class:fe(["px-6 py-3 text-sm font-medium border-b-2",i.value==="bc-explorer"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," BC Data Explorer ",2)])]),u("div",t9t,[I.value==="new-import-type"?(T(),P("div",n9t,[u("div",r9t,[b(y(tt),{class:"h-16 w-16 text-blue-500 mx-auto mb-4"}),Y[15]||(Y[15]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Create New Import Type",-1)),Y[16]||(Y[16]=u("p",{class:"text-gray-600 mb-6"}," This feature is under development. Please use the Import Types tab to create new import configurations. ",-1)),b(y(Z),{onClick:te},{default:D(()=>[b(y(ti),{class:"h-4 w-4 mr-2"}),Y[14]||(Y[14]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="edit-import-type"?(T(),P("div",i9t,[u("div",a9t,[b(y(vn),{class:"h-16 w-16 text-green-500 mx-auto mb-4"}),Y[18]||(Y[18]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Edit Import Type",-1)),u("p",s9t," Editing import type: "+E(t.importTypeId)+". This feature is under development. ",1),b(y(Z),{onClick:te},{default:D(()=>[b(y(ti),{class:"h-4 w-4 mr-2"}),Y[17]||(Y[17]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="run-import"?(T(),P("div",o9t,[u("div",l9t,[b(y(Rl),{class:"h-16 w-16 text-purple-500 mx-auto mb-4"}),Y[20]||(Y[20]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Run Import",-1)),u("p",u9t," Running import for type: "+E(t.importTypeId)+". This feature is under development. ",1),b(y(Z),{onClick:te},{default:D(()=>[b(y(ti),{class:"h-4 w-4 mr-2"}),Y[19]||(Y[19]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="view-history"?(T(),P("div",d9t,[u("div",c9t,[b(y(US),{class:"h-16 w-16 text-orange-500 mx-auto mb-4"}),Y[22]||(Y[22]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Import History Details",-1)),u("p",f9t," Viewing history for: "+E(t.historyId)+". This feature is under development. ",1),b(y(Z),{onClick:te},{default:D(()=>[b(y(ti),{class:"h-4 w-4 mr-2"}),Y[21]||(Y[21]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="new-mapping"?(T(),P("div",p9t,[u("div",h9t,[b(y(WL),{class:"h-16 w-16 text-indigo-500 mx-auto mb-4"}),Y[24]||(Y[24]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Create New Field Mapping",-1)),Y[25]||(Y[25]=u("p",{class:"text-gray-600 mb-6"}," This feature is under development. Please use the Field Mappings tab to create new mappings. ",-1)),b(y(Z),{onClick:te},{default:D(()=>[b(y(ti),{class:"h-4 w-4 mr-2"}),Y[23]||(Y[23]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="edit-mapping"?(T(),P("div",m9t,[u("div",g9t,[b(y(vn),{class:"h-16 w-16 text-teal-500 mx-auto mb-4"}),Y[27]||(Y[27]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Edit Field Mapping",-1)),u("p",v9t," Editing mapping: "+E(t.mappingId)+". This feature is under development. ",1),b(y(Z),{onClick:te},{default:D(()=>[b(y(ti),{class:"h-4 w-4 mr-2"}),Y[26]||(Y[26]=W(" Back to Import Data ",-1))]),_:1})])])):(T(),P(_e,{key:6},[i.value==="imports"?(T(),P("div",y9t,[u("div",b9t,[u("div",{class:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-400 hover:bg-blue-50 cursor-pointer transition-colors",onClick:q},[u("div",_9t,[b(y(tt),{class:"h-12 w-12 text-gray-400 mb-4"}),Y[28]||(Y[28]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Create New Import Type",-1)),Y[29]||(Y[29]=u("p",{class:"text-sm text-gray-600 text-center"}," Define a new CSV import configuration ",-1))])]),(T(!0),P(_e,null,we(y(r).csvImportTypes,H=>(T(),P("div",{key:H.name,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow"},[u("div",x9t,[u("div",w9t,[u("h3",k9t,E(H.import_type_name),1),u("p",S9t,E(H.description||"No description"),1),u("div",C9t,[b(y(Ee),{variant:H.is_active?"success":"secondary"},{default:D(()=>[W(E(H.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:j(H.import_type)},{default:D(()=>[W(E(H.import_type),1)]),_:2},1032,["variant"])])]),u("div",A9t,[b(y(Z),{variant:"ghost",size:"sm",onClick:dt(ae=>N(H),["stop"])},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(ae=>O(H),["stop"])},{default:D(()=>[b(y(Rl),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),u("div",T9t,[u("div",E9t,[Y[30]||(Y[30]=u("span",null,"Target DocType:",-1)),u("span",null,E(H.target_doctype),1)]),u("div",M9t,[Y[31]||(Y[31]=u("span",null,"Delimiter:",-1)),u("span",null,E(H.delimiter||","),1)]),u("div",$9t,[Y[32]||(Y[32]=u("span",null,"Has Header:",-1)),u("span",null,E(H.has_header?"Yes":"No"),1)])])]))),128))])])):ie("",!0),i.value==="history"?(T(),P("div",D9t,[u("div",R9t,[u("div",P9t,[Y[33]||(Y[33]=u("h2",{class:"text-lg font-medium text-gray-900"},"Import History",-1)),u("div",I9t,[b(y(En),{modelValue:a.value,"onUpdate:modelValue":Y[3]||(Y[3]=H=>a.value=H),placeholder:"Search imports...",class:"w-64"},null,8,["modelValue"]),b(y(Ke),{modelValue:s.value,"onUpdate:modelValue":Y[4]||(Y[4]=H=>s.value=H),options:x,placeholder:"Filter by status",class:"w-40"},null,8,["modelValue"])])]),u("div",O9t,[u("table",L9t,[Y[35]||(Y[35]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Import Type "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Records "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Started "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Duration "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),u("tbody",V9t,[(T(!0),P(_e,null,we(w.value,H=>(T(),P("tr",{key:H.name},[u("td",N9t,[u("div",j9t,E(H.import_type_name),1),u("div",F9t,E(H.file_name),1)]),u("td",B9t,[b(y(Ee),{variant:z(H.status)},{default:D(()=>[W(E(H.status),1)]),_:2},1032,["variant"])]),u("td",z9t,E(H.records_processed)+" / "+E(H.total_records),1),u("td",U9t,E(F(H.started_at)),1),u("td",H9t,E(H.duration||"N/A"),1),u("td",q9t,[b(y(Z),{variant:"ghost",size:"sm",onClick:ae=>V(H)},{default:D(()=>[...Y[34]||(Y[34]=[W(" View Details ",-1)])]),_:1},8,["onClick"])])]))),128))])])])])])):ie("",!0),i.value==="mappings"?(T(),P("div",W9t,[u("div",G9t,[u("div",Y9t,[Y[37]||(Y[37]=u("h2",{class:"text-lg font-medium text-gray-900"},"Field Mappings",-1)),b(y(Z),{onClick:L},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),Y[36]||(Y[36]=W(" New Mapping ",-1))]),_:1})]),u("div",K9t,[(T(!0),P(_e,null,we(y(r).csvImportFieldMappings,H=>(T(),P("div",{key:H.name,class:"bg-white border border-gray-200 rounded-lg p-6"},[u("div",X9t,[u("div",Z9t,[u("h3",Q9t,E(H.import_type_name),1),u("p",J9t,E(H.description||"Field mapping configuration"),1),u("div",eBt,[b(y(Ee),{variant:H.is_active?"success":"secondary"},{default:D(()=>[W(E(H.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:H.is_required?"warning":"secondary"},{default:D(()=>[W(E(H.is_required?"Required":"Optional"),1)]),_:2},1032,["variant"])])]),b(y(Z),{variant:"ghost",size:"sm",onClick:ae=>U(H)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",tBt,[u("div",nBt,[Y[38]||(Y[38]=u("span",{class:"text-gray-500"},"CSV Column:",-1)),u("span",rBt,E(H.csv_column_name),1)]),u("div",iBt,[Y[39]||(Y[39]=u("span",{class:"text-gray-500"},"Target Field:",-1)),u("span",aBt,E(H.target_field_name),1)]),u("div",sBt,[Y[40]||(Y[40]=u("span",{class:"text-gray-500"},"Data Type:",-1)),u("span",oBt,E(H.data_type),1)]),u("div",lBt,[Y[41]||(Y[41]=u("span",{class:"text-gray-500"},"Default Value:",-1)),u("span",uBt,E(H.default_value||"None"),1)])])]))),128))])])])):ie("",!0),i.value==="bc-explorer"?(T(),P("div",dBt,[u("div",cBt,[u("div",fBt,[u("div",pBt,[u("div",hBt,[u("div",mBt,[b(y(ri),{class:"h-6 w-6 text-blue-600"})]),u("div",gBt,[Y[42]||(Y[42]=u("p",{class:"text-sm font-medium text-gray-600"},"GL Entries",-1)),u("p",vBt,E(_.value.glEntries),1)])])]),u("div",yBt,[u("div",bBt,[u("div",_Bt,[b(y(ya),{class:"h-6 w-6 text-green-600"})]),u("div",xBt,[Y[43]||(Y[43]=u("p",{class:"text-sm font-medium text-gray-600"},"Customers",-1)),u("p",wBt,E(_.value.customers),1)])])]),u("div",kBt,[u("div",SBt,[u("div",CBt,[b(y(Ws),{class:"h-6 w-6 text-purple-600"})]),u("div",ABt,[Y[44]||(Y[44]=u("p",{class:"text-sm font-medium text-gray-600"},"Items",-1)),u("p",TBt,E(_.value.items),1)])])]),u("div",EBt,[u("div",MBt,[u("div",$Bt,[b(y(WS),{class:"h-6 w-6 text-orange-600"})]),u("div",DBt,[Y[45]||(Y[45]=u("p",{class:"text-sm font-medium text-gray-600"},"Sales Invoices",-1)),u("p",RBt,E(_.value.salesInvoices),1)])])])]),u("div",PBt,[u("div",IBt,[Y[47]||(Y[47]=u("h2",{class:"text-lg font-medium text-gray-900"},"Business Central Data Explorer",-1)),u("div",OBt,[b(y(Ke),{modelValue:c.value,"onUpdate:modelValue":Y[5]||(Y[5]=H=>c.value=H),options:C,placeholder:"Select data type",class:"w-48"},null,8,["modelValue"]),b(y(Z),{onClick:G,loading:o.value},{default:D(()=>[b(y(hn),{class:"h-4 w-4 mr-2"}),Y[46]||(Y[46]=W(" Refresh Data ",-1))]),_:1},8,["loading"])])]),u("div",LBt,[b(y(En),{modelValue:f.value.dateFrom,"onUpdate:modelValue":Y[6]||(Y[6]=H=>f.value.dateFrom=H),type:"date",placeholder:"From Date",label:"From Date"},null,8,["modelValue"]),b(y(En),{modelValue:f.value.dateTo,"onUpdate:modelValue":Y[7]||(Y[7]=H=>f.value.dateTo=H),type:"date",placeholder:"To Date",label:"To Date"},null,8,["modelValue"]),b(y(En),{modelValue:f.value.search,"onUpdate:modelValue":Y[8]||(Y[8]=H=>f.value.search=H),placeholder:"Search...",label:"Search"},null,8,["modelValue"]),u("div",VBt,[b(y(Z),{onClick:re,variant:"outline"},{default:D(()=>[b(y(mY),{class:"h-4 w-4 mr-2"}),Y[48]||(Y[48]=W(" Apply Filters ",-1))]),_:1})])]),u("div",NBt,[u("div",jBt,[u("table",FBt,[u("thead",BBt,[u("tr",null,[(T(!0),P(_e,null,we(A.value,H=>(T(),P("th",{key:H.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:ae=>ee(H.key)},[u("div",UBt,[W(E(H.label)+" ",1),p.value===H.key&&h.value==="asc"?(T(),he(y(cY),{key:0,class:"h-4 w-4 ml-1"})):ie("",!0),p.value===H.key&&h.value==="desc"?(T(),he(y(mo),{key:1,class:"h-4 w-4 ml-1"})):ie("",!0)])],8,zBt))),128))])]),u("tbody",HBt,[(T(!0),P(_e,null,we($.value,H=>(T(),P("tr",{key:H.id,class:"hover:bg-gray-50 cursor-pointer",onClick:ae=>se(H)},[(T(!0),P(_e,null,we(A.value,ae=>(T(),P("td",{key:ae.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},E(de(H[ae.key],ae.type)),1))),128))],8,qBt))),128))])])]),u("div",WBt,[u("div",GBt,[u("div",YBt," Showing "+E((m.value-1)*g.value+1)+" to "+E(Math.min(m.value*g.value,M.value.length))+" of "+E(M.value.length)+" results ",1),u("div",KBt,[b(y(Z),{onClick:Y[9]||(Y[9]=H=>m.value--),disabled:m.value===1,variant:"outline",size:"sm"},{default:D(()=>[b(y(pr),{class:"h-4 w-4"})]),_:1},8,["disabled"]),u("span",XBt," Page "+E(m.value)+" of "+E(R.value),1),b(y(Z),{onClick:Y[10]||(Y[10]=H=>m.value++),disabled:m.value===R.value,variant:"outline",size:"sm"},{default:D(()=>[b(K,{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])])]),u("div",ZBt,[u("div",QBt,[Y[49]||(Y[49]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Data Distribution",-1)),u("div",JBt,[u("canvas",{ref_key:"distributionChart",ref:l},null,512)])]),u("div",ezt,[Y[50]||(Y[50]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Trends Over Time",-1)),u("div",tzt,[u("canvas",{ref_key:"trendsChart",ref:d},null,512)])])])])])):ie("",!0)],64))])]),u("div",nzt,[u("div",rzt,[u("div",izt,[u("div",azt,[b(y(vt),{class:"h-6 w-6 text-blue-600"})]),u("div",szt,[Y[51]||(Y[51]=u("p",{class:"text-sm font-medium text-gray-600"},"Import Types",-1)),u("p",ozt,E(y(r).csvImportTypes.length),1)])])]),u("div",lzt,[u("div",uzt,[u("div",dzt,[b(y(Gt),{class:"h-6 w-6 text-green-600"})]),u("div",czt,[Y[52]||(Y[52]=u("p",{class:"text-sm font-medium text-gray-600"},"Successful Imports",-1)),u("p",fzt,E(k.value),1)])])]),u("div",pzt,[u("div",hzt,[u("div",mzt,[b(y(zr),{class:"h-6 w-6 text-red-600"})]),u("div",gzt,[Y[53]||(Y[53]=u("p",{class:"text-sm font-medium text-gray-600"},"Failed Imports",-1)),u("p",vzt,E(S.value),1)])])]),u("div",yzt,[u("div",bzt,[u("div",_zt,[b(y(WL),{class:"h-6 w-6 text-purple-600"})]),u("div",xzt,[Y[54]||(Y[54]=u("p",{class:"text-sm font-medium text-gray-600"},"Field Mappings",-1)),u("p",wzt,E(y(r).csvImportFieldMappings.length),1)])])])])])}}},kzt={class:"regulatory-calendar-page"},Szt={class:"page-header"},Czt={class:"header-content"},Azt={class:"page-title"},Tzt={class:"header-actions"},Ezt={class:"notice-section"},Mzt={class:"notice-card"},$zt={class:"calendar-navigation"},Dzt={class:"nav-controls"},Rzt={class:"current-month"},Pzt={class:"month-selector"},Izt={class:"calendar-container"},Ozt={class:"calendar-header"},Lzt={class:"calendar-body"},Vzt=["onClick"],Nzt={class:"day-number"},jzt={class:"day-events"},Fzt=["title"],Bzt={key:0,class:"event-more"},zzt={key:0,class:"day-details-section"},Uzt={class:"day-details-header"},Hzt={key:0,class:"no-events"},qzt={key:1,class:"events-list"},Wzt={class:"event-header"},Gzt={class:"event-icon"},Yzt={class:"event-meta"},Kzt={class:"event-description"},Xzt={key:0,class:"event-details"},Zzt={__name:"RegulatoryCalendar",setup(t){const e=Q(new Date().getMonth()),n=Q(null),r=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=Q([{id:1,month:0,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for December 2024",details:["Monthly PAYE returns","PAYE tax payments"]},{id:2,month:0,day:9,type:"Social",title:"NSSF Payments",description:"NSSF payments for December 2024"},{id:3,month:0,day:9,type:"Levy",title:"SHIF Payments",description:"SHIF payments for December 2024"},{id:4,month:0,day:9,type:"Levy",title:"Catering Levy",description:"Catering levy returns and payment for December 2024"},{id:5,month:0,day:9,type:"Levy",title:"NITA Levy",description:"NITA Levy for December 2024"},{id:6,month:0,day:13,type:"Levy",title:"AHL Payments",description:"Affordable Housing Levy (AHL) payments for December 2024"},{id:7,month:0,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for December 2024"},{id:8,month:0,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for December 2024"},{id:9,month:0,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments (for relevant year-ends)"},{id:10,month:0,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for July 2024 year-ends"},{id:11,month:0,day:31,type:"Corporate",title:"Transfer Pricing Documents",description:"Submit Transfer Pricing Master/Local File for July 2024 year-ends"},{id:12,month:0,day:31,type:"Corporate",title:"CbC Report",description:"Submit Country by Country (CbC) Report for January 2024 year-ends"},{id:13,month:0,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for September 2024 year-ends"},{id:14,month:1,day:7,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for January 2025"},{id:15,month:1,day:7,type:"Social",title:"SHIF, NSSF & Levies",description:"SHIF, NSSF, Catering levy, and NITA Levy for January 2025"},{id:16,month:1,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for January 2025"},{id:17,month:1,day:14,type:"HELB",title:"HELB Payments",description:"HELB payments for January 2025"},{id:18,month:1,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:19,month:1,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for January 2025"},{id:20,month:1,day:28,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax Returns for August 2024 year-ends"},{id:21,month:1,day:28,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:22,month:1,day:28,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for October 2024 year-ends"},{id:23,month:2,day:7,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for February 2025"},{id:24,month:2,day:7,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for February 2025"},{id:25,month:2,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for February 2025"},{id:26,month:2,day:14,type:"HELB",title:"HELB Payments",description:"HELB payments for February 2025"},{id:27,month:2,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:28,month:2,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for February 2025"},{id:29,month:2,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for September 2024 year-ends"},{id:30,month:2,day:31,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:31,month:2,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for November 2024 year-ends"},{id:32,month:3,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for March 2025"},{id:33,month:3,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for March 2025"},{id:34,month:3,day:11,type:"Levy",title:"AHL Payments",description:"AHL payments for March 2025"},{id:35,month:3,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for March 2025"},{id:36,month:3,day:17,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for March 2025"},{id:37,month:3,day:17,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:38,month:3,day:17,type:"PAYE",title:"Individual Instalment Tax",description:"First instalment tax payment for individuals (2025 year of income)"},{id:39,month:3,day:30,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for October 2024 year-ends"},{id:40,month:3,day:30,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:41,month:3,day:30,type:"PAYE",title:"Individual Tax Balance",description:"Individuals: Pay balance of tax for 2024 year of income"},{id:42,month:4,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for April 2025"},{id:43,month:4,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for April 2025"},{id:44,month:4,day:14,type:"Levy",title:"AHL Payments",description:"AHL payments for April 2025"},{id:45,month:4,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for April 2025"},{id:46,month:4,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:47,month:4,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for April 2025"},{id:48,month:4,day:30,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax Returns for November 2024 year-ends"},{id:49,month:4,day:30,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:50,month:4,day:30,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for January 2025 year-ends"},{id:51,month:5,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for May 2025"},{id:52,month:5,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for May 2025"},{id:53,month:5,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for May 2025"},{id:54,month:5,day:13,type:"HELB",title:"HELB Payments",description:"HELB payments for May 2025"},{id:55,month:5,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:56,month:5,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for May 2025"},{id:57,month:5,day:20,type:"PAYE",title:"Individual Instalment Tax",description:"Second instalment tax payment for individuals (2025 year of income)"},{id:58,month:5,day:30,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax Returns for December 2024 year-ends"},{id:59,month:5,day:30,type:"PAYE",title:"Individual Income Tax Returns",description:"Individuals: Submit income tax returns for year 2024"},{id:60,month:5,day:30,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:61,month:5,day:30,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for February 2025 year-ends"},{id:62,month:6,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for June 2025"},{id:63,month:6,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for June 2025"},{id:64,month:6,day:11,type:"Levy",title:"AHL Payments",description:"AHL payments for June 2025"},{id:65,month:6,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for June 2025"},{id:66,month:6,day:18,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for June 2025"},{id:67,month:6,day:18,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments (for relevant year-ends)"},{id:68,month:6,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for January 2025 year-ends"},{id:69,month:6,day:31,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:70,month:6,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for March 2025 year-ends"},{id:71,month:7,day:8,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for July 2025"},{id:72,month:7,day:8,type:"Social",title:"SHIF, NSSF & Levies",description:"SHIF, NSSF, Catering levy, and NITA Levy for July 2025"},{id:73,month:7,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for July 2025"},{id:74,month:7,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for July 2025"},{id:75,month:7,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:76,month:7,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for July 2025"},{id:77,month:7,day:29,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for February 2025 year-ends"},{id:78,month:7,day:29,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:79,month:7,day:29,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for April 2025 year-ends"},{id:80,month:8,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for August 2025"},{id:81,month:8,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for August 2025"},{id:82,month:8,day:11,type:"Levy",title:"AHL Payments",description:"AHL payments for August 2025"},{id:83,month:8,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for August 2025"},{id:84,month:8,day:19,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:85,month:8,day:19,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for August 2025"},{id:86,month:8,day:19,type:"PAYE",title:"Individual Instalment Tax",description:"Third instalment tax payment for individuals (2025 year of income)"},{id:87,month:8,day:30,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for March 2025 year-ends"},{id:88,month:8,day:30,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:89,month:8,day:30,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for May 2025 year-ends"},{id:90,month:9,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for September 2025"},{id:91,month:9,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for September 2025"},{id:92,month:9,day:14,type:"Levy",title:"AHL Payments",description:"AHL payments for September 2025"},{id:93,month:9,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for September 2025"},{id:94,month:9,day:17,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:95,month:9,day:17,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for September 2025"},{id:96,month:9,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for April 2025 year-ends"},{id:97,month:9,day:31,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:98,month:9,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for June 2025 year-ends"},{id:99,month:10,day:7,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for October 2025"},{id:100,month:10,day:7,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for October 2025"},{id:101,month:10,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for October 2025"},{id:102,month:10,day:14,type:"HELB",title:"HELB Payments",description:"HELB payments for October 2025"},{id:103,month:10,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:104,month:10,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for October 2025"},{id:105,month:10,day:28,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for May 2025 year-ends"},{id:106,month:10,day:28,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:107,month:10,day:28,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for July 2025 year-ends"},{id:108,month:11,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for November 2025"},{id:109,month:11,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for November 2025"},{id:110,month:11,day:11,type:"Levy",title:"AHL Payments",description:"AHL payments for November 2025"},{id:111,month:11,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for November 2025"},{id:112,month:11,day:19,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:113,month:11,day:19,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for November 2025"},{id:114,month:11,day:19,type:"PAYE",title:"Individual Instalment Tax",description:"Fourth instalment tax payment for individuals (2025 year of income)"},{id:115,month:11,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for June 2025 year-ends"},{id:116,month:11,day:31,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:117,month:11,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for August 2025 year-ends"}]),s=J(()=>new Date(2025,e.value+1,0).getDate()),o=J(()=>new Date(2025,e.value,1).getDay()),l=J(()=>a.value.filter(S=>S.month===e.value)),d=J(()=>r.map((S,C)=>({label:`${S} 2025`,value:C}))),c=S=>l.value.filter(C=>C.day===S),f=S=>{n.value=n.value===S?null:S},p=S=>{const C=new Date;return C.getFullYear()===2025&&C.getMonth()===e.value&&C.getDate()===S},h=()=>{e.value>0&&(e.value--,n.value=null)},m=()=>{e.value<11&&(e.value++,n.value=null)},g=()=>{n.value=null},v=S=>({PAYE:"paye",VAT:"vat",Corporate:"corporate",Social:"social",Levy:"levy",HELB:"helb"})[S]||"default",_=S=>({PAYE:"blue",VAT:"green",Corporate:"purple",Social:"orange",Levy:"gray",HELB:"red"})[S]||"gray",x=S=>({PAYE:Q1,VAT:tb,Corporate:Cc,Social:ya,Levy:vt,HELB:Ii})[S]||vt,w=()=>{console.log("Export calendar functionality")},k=()=>{window.print()};return bt(()=>{const S=new Date;S.getFullYear()===2025&&(e.value=S.getMonth())}),(S,C)=>(T(),P("div",kzt,[u("div",Szt,[u("div",Czt,[u("h1",Azt,[b(y(er),{class:"title-icon"}),C[2]||(C[2]=W(" Regulatory Calendar 2025 ",-1))]),C[3]||(C[3]=u("p",{class:"page-description"}," Comprehensive Kenyan tax compliance calendar with all statutory deadlines and payment requirements ",-1))]),u("div",Tzt,[b(y(Z),{variant:"outline",onClick:w},{default:D(()=>[b(y(bn)),C[4]||(C[4]=W(" Export Calendar ",-1))]),_:1}),b(y(Z),{variant:"outline",onClick:k},{default:D(()=>[b(y(KD)),C[5]||(C[5]=W(" Print Calendar ",-1))]),_:1})])]),u("div",Ezt,[u("div",Mzt,[b(y(nn),{class:"notice-icon"}),C[6]||(C[6]=u("div",{class:"notice-content"},[u("h3",null,"General Ongoing Rule"),u("p",null,[u("strong",null,"DAT, WHT, and WH VAT:"),W(" Payments must be made within 5 working days after making the deduction or accrual.")])],-1))])]),u("div",$zt,[u("div",Dzt,[b(y(Z),{variant:"outline",size:"sm",onClick:h,disabled:e.value===0},{default:D(()=>[b(y(pr)),C[7]||(C[7]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("h2",Rzt,E(r[e.value])+" 2025",1),b(y(Z),{variant:"outline",size:"sm",onClick:m,disabled:e.value===11},{default:D(()=>[C[8]||(C[8]=W(" Next ",-1)),b(y(tr))]),_:1},8,["disabled"])]),u("div",Pzt,[b(y(Ke),{modelValue:e.value,"onUpdate:modelValue":C[0]||(C[0]=A=>e.value=A),options:d.value,onChange:g},null,8,["modelValue","options"])])]),u("div",Izt,[u("div",Ozt,[(T(),P(_e,null,we(i,A=>u("div",{key:A,class:"header-day"},E(A),1)),64))]),u("div",Lzt,[(T(!0),P(_e,null,we(o.value,A=>(T(),P("div",{key:"empty-"+A,class:"calendar-day empty"}))),128)),(T(!0),P(_e,null,we(s.value,A=>(T(),P("div",{key:A,class:fe(["calendar-day",{"has-events":c(A).length>0},{today:p(A)}]),onClick:M=>f(A)},[u("div",Nzt,E(A),1),u("div",jzt,[(T(!0),P(_e,null,we(c(A).slice(0,2),M=>(T(),P("div",{key:M.id,class:fe(["event-item",v(M.type)]),title:M.description},E(M.title),11,Fzt))),128)),c(A).length>2?(T(),P("div",Bzt," +"+E(c(A).length-2)+" more ",1)):ie("",!0)])],10,Vzt))),128))])]),n.value?(T(),P("div",zzt,[u("div",Uzt,[u("h3",null,E(r[e.value])+" "+E(n.value)+", 2025",1),b(y(Z),{variant:"ghost",onClick:C[1]||(C[1]=A=>n.value=null)},{default:D(()=>[b(y(ht))]),_:1})]),c(n.value).length===0?(T(),P("div",Hzt,[b(y(er),{class:"no-events-icon"}),C[9]||(C[9]=u("p",null,"No regulatory deadlines on this date",-1))])):(T(),P("div",qzt,[(T(!0),P(_e,null,we(c(n.value),A=>(T(),P("div",{key:A.id,class:fe(["event-detail-card",v(A.type)])},[u("div",Wzt,[u("div",Gzt,[(T(),he(Lt(x(A.type))))]),u("div",Yzt,[u("h4",null,E(A.title),1),b(y(Ee),{variant:_(A.type)},{default:D(()=>[W(E(A.type),1)]),_:2},1032,["variant"])])]),u("div",Kzt,E(A.description),1),A.details?(T(),P("div",Xzt,[(T(!0),P(_e,null,we(A.details,M=>(T(),P("div",{key:M,class:"event-detail-item"},"  "+E(M),1))),128))])):ie("",!0)],2))),128))]))])):ie("",!0),C[10]||(C[10]=ur('<div class="legend-section" data-v-bd898967><h3 data-v-bd898967>Legend</h3><div class="legend-grid" data-v-bd898967><div class="legend-item" data-v-bd898967><div class="legend-color paye" data-v-bd898967></div><span data-v-bd898967>PAYE</span></div><div class="legend-item" data-v-bd898967><div class="legend-color vat" data-v-bd898967></div><span data-v-bd898967>VAT &amp; Other Taxes</span></div><div class="legend-item" data-v-bd898967><div class="legend-color corporate" data-v-bd898967></div><span data-v-bd898967>Corporate Income Tax</span></div><div class="legend-item" data-v-bd898967><div class="legend-color social" data-v-bd898967></div><span data-v-bd898967>Social Security &amp; NSSF</span></div><div class="legend-item" data-v-bd898967><div class="legend-color levy" data-v-bd898967></div><span data-v-bd898967>Levies &amp; Other</span></div><div class="legend-item" data-v-bd898967><div class="legend-color helb" data-v-bd898967></div><span data-v-bd898967>HELB</span></div></div></div>',1))]))}},Qzt=Ft(Zzt,[["__scopeId","data-v-bd898967"]]),Jzt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},eUt={class:"bg-white p-4 rounded-lg border shadow-sm"},tUt={class:"flex items-center justify-between"},nUt={class:"text-2xl font-bold"},rUt={class:"bg-white p-4 rounded-lg border shadow-sm"},iUt={class:"flex items-center justify-between"},aUt={class:"text-2xl font-bold"},sUt={class:"bg-white p-4 rounded-lg border shadow-sm"},oUt={class:"flex items-center justify-between"},lUt={class:"text-2xl font-bold"},uUt={class:"bg-white p-4 rounded-lg border shadow-sm"},dUt={class:"flex items-center justify-between"},cUt={__name:"ReportsStats",props:{activeAuditReports:{type:Array,default:()=>[]},activeBoardReports:{type:Array,default:()=>[]},activeDashboards:{type:Array,default:()=>[]},complianceScore:{type:Number,default:0}},setup(t){const e=n=>n>=80?"text-green-600":n>=60?"text-yellow-600":"text-red-600";return(n,r)=>(T(),P("div",Jzt,[u("div",eUt,[u("div",tUt,[u("div",null,[r[0]||(r[0]=u("p",{class:"text-sm text-gray-600"},"Audit Reports",-1)),u("p",nUt,E(t.activeAuditReports.length),1)]),b(y(vt),{class:"w-8 h-8 text-blue-500"})])]),u("div",rUt,[u("div",iUt,[u("div",null,[r[1]||(r[1]=u("p",{class:"text-sm text-gray-600"},"Board Reports",-1)),u("p",aUt,E(t.activeBoardReports.length),1)]),b(y(ya),{class:"w-8 h-8 text-green-500"})])]),u("div",sUt,[u("div",oUt,[u("div",null,[r[2]||(r[2]=u("p",{class:"text-sm text-gray-600"},"Active Dashboards",-1)),u("p",lUt,E(t.activeDashboards.length),1)]),b(y(cr),{class:"w-8 h-8 text-purple-500"})])]),u("div",uUt,[u("div",dUt,[u("div",null,[r[3]||(r[3]=u("p",{class:"text-sm text-gray-600"},"Avg Compliance Score",-1)),u("p",{class:fe(["text-2xl font-bold",e(t.complianceScore)])},E(Math.round(t.complianceScore))+"% ",3)]),b(y(Cl),{class:"w-8 h-8 text-orange-500"})])])]))}},fUt={class:"p-6"},pUt={class:"flex justify-between items-center mb-6"},hUt={class:"flex gap-2"},mUt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},gUt={class:"bg-white rounded-lg border shadow-sm"},vUt={class:"p-4 border-b"},yUt={class:"flex justify-between items-center"},bUt={class:"p-4"},_Ut={class:"space-y-3"},xUt={class:"font-medium"},wUt={class:"text-sm text-gray-600"},kUt={class:"flex items-center gap-2"},SUt={key:0,class:"text-center py-4 text-gray-500"},CUt={class:"bg-white rounded-lg border shadow-sm"},AUt={class:"p-4 border-b"},TUt={class:"flex justify-between items-center"},EUt={class:"p-4"},MUt={class:"space-y-3"},$Ut={class:"font-medium"},DUt={class:"text-sm text-gray-600"},RUt={class:"flex items-center gap-2"},PUt={key:0,class:"text-center py-4 text-gray-500"},IUt={class:"bg-white rounded-lg border shadow-sm mb-6"},OUt={class:"p-4 border-b"},LUt={class:"flex justify-between items-center"},VUt={class:"flex gap-2"},NUt={class:"p-4"},jUt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},FUt={class:"flex items-center justify-between mb-3"},BUt={class:"flex items-center gap-2"},zUt={class:"font-medium"},UUt={class:"space-y-2 text-sm"},HUt={class:"text-gray-600"},qUt={class:"grid grid-cols-2 gap-2"},WUt={class:"font-medium"},GUt={class:"font-medium"},YUt={class:"font-medium"},KUt={class:"font-medium text-xs"},XUt={key:0,class:"col-span-full text-center py-8 text-gray-500"},ZUt={class:"bg-white rounded-lg border shadow-sm"},QUt={class:"p-4 border-b"},JUt={class:"flex justify-between items-center"},eHt={class:"p-4"},tHt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},nHt={class:"flex items-center justify-between mb-2"},rHt={class:"font-medium"},iHt={class:"text-sm text-gray-600 mb-2"},aHt={class:"text-xs text-gray-500"},sHt={key:0,class:"col-span-full text-center py-8 text-gray-500"},oHt={class:"space-y-4"},lHt={class:"space-y-4"},uHt={class:"flex items-center gap-2"},dHt={__name:"Reports",setup(t){const e=ioe(),n=Q(!1),r=Q(!1),i=Q(!1),a=Q({type:"audit",engagement:"",period:"",title:"",description:""}),s=Q({type:"Management Overview",title:"",description:"",timePeriod:"Current Month",isDefault:!1}),o=J(()=>e.activeAuditReports),l=J(()=>e.activeBoardReports),d=J(()=>e.activeDashboards),c=J(()=>e.dashboardKPIs),f=J(()=>e.reportTemplates),p=J(()=>e.loading),h=[{label:"Audit Report",value:"audit"},{label:"Board Report",value:"board"}],m=[{label:"Q1",value:"Q1"},{label:"Q2",value:"Q2"},{label:"Q3",value:"Q3"},{label:"Q4",value:"Q4"},{label:"Annual",value:"Annual"}],g=[{label:"Management Overview",value:"Management Overview"},{label:"Compliance Dashboard",value:"Compliance Dashboard"},{label:"Risk Dashboard",value:"Risk Dashboard"},{label:"Operational Dashboard",value:"Operational Dashboard"},{label:"Executive Summary",value:"Executive Summary"}],v=[{label:"Current Month",value:"Current Month"},{label:"Last Month",value:"Last Month"},{label:"Current Quarter",value:"Current Quarter"},{label:"Last Quarter",value:"Last Quarter"},{label:"Current Year",value:"Current Year"},{label:"Last Year",value:"Last Year"}],_=()=>le(this,null,function*(){try{i.value=!0,console.log("Create audit report")}catch(j){console.error("Error creating audit report:",j)}finally{i.value=!1}}),x=()=>le(this,null,function*(){try{i.value=!0,console.log("Create board report")}catch(j){console.error("Error creating board report:",j)}finally{i.value=!1}}),w=()=>le(this,null,function*(){try{i.value=!0,a.value.type==="audit"?yield e.createAuditReport({engagement_reference:a.value.engagement,report_title:a.value.title,report_type:"Full Audit Report",report_status:"Draft"}):a.value.type==="board"&&(yield e.createBoardReport({report_title:a.value.title,reporting_period:a.value.period,report_type:"Board Report",report_status:"Draft",is_active:1})),n.value=!1,a.value={type:"audit",engagement:"",period:"",title:"",description:""}}catch(j){console.error("Error creating report:",j)}finally{i.value=!1}}),k=()=>le(this,null,function*(){try{i.value=!0,yield e.createManagementDashboard({dashboard_title:s.value.title,dashboard_type:s.value.type,description:s.value.description,time_period:s.value.timePeriod,is_default:s.value.isDefault,is_active:1,kpi_section:1,compliance_section:1,chart_configuration:1}),r.value=!1,s.value={type:"Management Overview",title:"",description:"",timePeriod:"Current Month",isDefault:!1}}catch(j){console.error("Error creating dashboard:",j)}finally{i.value=!1}}),S=()=>le(this,null,function*(){try{i.value=!0,yield e.createDefaultDashboards()}catch(j){console.error("Error creating default dashboards:",j)}finally{i.value=!1}}),C=()=>le(this,null,function*(){try{for(const j of d.value)yield e.refreshDashboard(j.name)}catch(j){console.error("Error refreshing dashboards:",j)}}),A=()=>le(this,null,function*(){yield e.fetchReportTemplates()}),M=j=>{console.log("View audit report:",j)},$=j=>{console.log("View board report:",j)},R=j=>{console.log("View dashboard:",j)},I=j=>({Draft:"secondary","Under Review":"warning",Approved:"success",Finalized:"success",Issued:"success",Presented:"success",Archived:"secondary"})[j]||"secondary",B=j=>j?new Date(j).toLocaleDateString():"";return bt(()=>le(this,null,function*(){yield e.fetchAuditReports(),yield e.fetchBoardReports(),yield e.fetchManagementDashboards(),yield e.fetchDataAnalyticsDashboards(),yield e.fetchReportTemplates()})),(j,z)=>(T(),P("div",fUt,[u("div",pUt,[z[18]||(z[18]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Reports & Analytics"),u("p",{class:"text-gray-600"},"Comprehensive reporting and dashboard analytics")],-1)),u("div",hUt,[b(y(Z),{onClick:z[0]||(z[0]=F=>n.value=!0),class:"flex items-center gap-2"},{default:D(()=>[b(y(tt),{class:"w-4 h-4"}),z[16]||(z[16]=W(" Create Report ",-1))]),_:1}),b(y(Z),{onClick:z[1]||(z[1]=F=>r.value=!0),variant:"outline",class:"flex items-center gap-2"},{default:D(()=>[b(y(cr),{class:"w-4 h-4"}),z[17]||(z[17]=W(" Create Dashboard ",-1))]),_:1})])]),b(cUt,{"active-audit-reports":o.value,"active-board-reports":l.value,"active-dashboards":d.value,"compliance-score":c.value.complianceScore},null,8,["active-audit-reports","active-board-reports","active-dashboards","compliance-score"]),u("div",mUt,[u("div",gUt,[u("div",vUt,[u("div",yUt,[z[20]||(z[20]=u("h2",{class:"text-lg font-semibold"},"Audit Reports",-1)),b(y(Z),{onClick:_,loading:i.value,variant:"outline",size:"sm"},{default:D(()=>[...z[19]||(z[19]=[W(" New Audit Report ",-1)])]),_:1},8,["loading"])])]),u("div",bUt,[u("div",_Ut,[(T(!0),P(_e,null,we(o.value.slice(0,5),F=>(T(),P("div",{key:F.name,class:"flex items-center justify-between p-3 border rounded"},[u("div",null,[u("h4",xUt,E(F.report_title),1),u("p",wUt,E(F.report_type)+"  "+E(B(F.report_date)),1)]),u("div",kUt,[b(y(Ee),{variant:I(F.report_status)},{default:D(()=>[W(E(F.report_status),1)]),_:2},1032,["variant"]),b(y(Z),{onClick:q=>M(F),variant:"ghost",size:"sm"},{default:D(()=>[b(y(ar),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128)),o.value.length===0?(T(),P("div",SUt,[b(y(vt),{class:"w-8 h-8 mx-auto mb-2 text-gray-300"}),z[21]||(z[21]=u("p",null,"No audit reports found",-1))])):ie("",!0)])])]),u("div",CUt,[u("div",AUt,[u("div",TUt,[z[23]||(z[23]=u("h2",{class:"text-lg font-semibold"},"Board Reports",-1)),b(y(Z),{onClick:x,loading:i.value,variant:"outline",size:"sm"},{default:D(()=>[...z[22]||(z[22]=[W(" New Board Report ",-1)])]),_:1},8,["loading"])])]),u("div",EUt,[u("div",MUt,[(T(!0),P(_e,null,we(l.value.slice(0,5),F=>(T(),P("div",{key:F.name,class:"flex items-center justify-between p-3 border rounded"},[u("div",null,[u("h4",$Ut,E(F.report_title),1),u("p",DUt,E(F.reporting_period)+"  "+E(F.report_type),1)]),u("div",RUt,[b(y(Ee),{variant:I(F.report_status)},{default:D(()=>[W(E(F.report_status),1)]),_:2},1032,["variant"]),b(y(Z),{onClick:q=>$(F),variant:"ghost",size:"sm"},{default:D(()=>[b(y(ar),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128)),l.value.length===0?(T(),P("div",PUt,[b(y(ya),{class:"w-8 h-8 mx-auto mb-2 text-gray-300"}),z[24]||(z[24]=u("p",null,"No board reports found",-1))])):ie("",!0)])])])]),u("div",IUt,[u("div",OUt,[u("div",LUt,[z[26]||(z[26]=u("h2",{class:"text-lg font-semibold"},"Management Dashboards",-1)),u("div",VUt,[b(y(Z),{onClick:S,loading:i.value,variant:"outline",size:"sm"},{default:D(()=>[...z[25]||(z[25]=[W(" Create Defaults ",-1)])]),_:1},8,["loading"]),b(y(Z),{onClick:C,loading:p.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"])])])]),u("div",NUt,[u("div",jUt,[(T(!0),P(_e,null,we(d.value,F=>(T(),P("div",{key:F.name,class:"border rounded-lg p-4 hover:shadow-md transition-shadow"},[u("div",FUt,[u("div",BUt,[b(y(cr),{class:"w-5 h-5 text-purple-500"}),u("h4",zUt,E(F.dashboard_title),1),F.is_default?(T(),he(y(Ee),{key:0,variant:"success",size:"sm"},{default:D(()=>[...z[27]||(z[27]=[W("Default",-1)])]),_:1})):ie("",!0)]),b(y(Z),{onClick:q=>R(F),variant:"ghost",size:"sm"},{default:D(()=>[b(y(ar),{class:"w-4 h-4"})]),_:1},8,["onClick"])]),u("div",UUt,[u("p",HUt,E(F.dashboard_type),1),u("div",qUt,[u("div",null,[z[28]||(z[28]=u("span",{class:"text-gray-500"},"Engagements:",-1)),u("span",WUt,E(F.total_engagements||0),1)]),u("div",null,[z[29]||(z[29]=u("span",{class:"text-gray-500"},"Findings:",-1)),u("span",GUt,E(F.total_findings||0),1)]),u("div",null,[z[30]||(z[30]=u("span",{class:"text-gray-500"},"Compliance:",-1)),u("span",YUt,E(Math.round(F.compliance_score||0))+"%",1)]),u("div",null,[z[31]||(z[31]=u("span",{class:"text-gray-500"},"Updated:",-1)),u("span",KUt,E(B(F.last_updated)),1)])])])]))),128)),d.value.length===0?(T(),P("div",XUt,[b(y(cr),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),z[33]||(z[33]=u("p",{class:"text-lg font-medium mb-2"},"No dashboards found",-1)),z[34]||(z[34]=u("p",{class:"mb-4"},"Create default dashboards to get started with analytics",-1)),b(y(Z),{onClick:S,loading:i.value},{default:D(()=>[...z[32]||(z[32]=[W(" Create Default Dashboards ",-1)])]),_:1},8,["loading"])])):ie("",!0)])])]),u("div",ZUt,[u("div",QUt,[u("div",JUt,[z[35]||(z[35]=u("h2",{class:"text-lg font-semibold"},"Report Templates",-1)),b(y(Z),{onClick:A,loading:p.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"])])]),u("div",eHt,[u("div",tHt,[(T(!0),P(_e,null,we(f.value.filter(F=>F.is_active),F=>(T(),P("div",{key:F.name,class:"border rounded-lg p-4"},[u("div",nHt,[u("h4",rHt,E(F.template_name),1),F.is_default?(T(),he(y(Ee),{key:0,variant:"success",size:"sm"},{default:D(()=>[...z[36]||(z[36]=[W("Default",-1)])]),_:1})):ie("",!0)]),u("p",iHt,E(F.template_type),1),u("p",aHt,E(F.description),1)]))),128)),f.value.filter(F=>F.is_active).length===0?(T(),P("div",sHt,[b(y(vt),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),z[37]||(z[37]=u("p",null,"No active report templates found",-1))])):ie("",!0)])])]),b(y(zt),{modelValue:n.value,"onUpdate:modelValue":z[8]||(z[8]=F=>n.value=F),options:{title:"Create New Report"}},{"body-content":D(()=>[u("div",oHt,[b(y(ge),{label:"Report Type",modelValue:a.value.type,"onUpdate:modelValue":z[2]||(z[2]=F=>a.value.type=F),type:"select",options:h,required:""},null,8,["modelValue"]),a.value.type==="audit"?(T(),he(y(ge),{key:0,label:"Audit Engagement",modelValue:a.value.engagement,"onUpdate:modelValue":z[3]||(z[3]=F=>a.value.engagement=F),type:"link",doctype:"Audit Engagement",required:""},null,8,["modelValue"])):ie("",!0),a.value.type==="board"?(T(),he(y(ge),{key:1,label:"Reporting Period",modelValue:a.value.period,"onUpdate:modelValue":z[4]||(z[4]=F=>a.value.period=F),type:"select",options:m,required:""},null,8,["modelValue"])):ie("",!0),b(y(ge),{label:"Report Title",modelValue:a.value.title,"onUpdate:modelValue":z[5]||(z[5]=F=>a.value.title=F),type:"text",placeholder:"Enter report title",required:""},null,8,["modelValue"]),b(y(ge),{label:"Description",modelValue:a.value.description,"onUpdate:modelValue":z[6]||(z[6]=F=>a.value.description=F),type:"textarea",placeholder:"Optional description"},null,8,["modelValue"])])]),actions:D(()=>[b(y(Z),{variant:"outline",onClick:z[7]||(z[7]=F=>n.value=!1)},{default:D(()=>[...z[38]||(z[38]=[W("Cancel",-1)])]),_:1}),b(y(Z),{onClick:w,loading:i.value},{default:D(()=>[...z[39]||(z[39]=[W("Create Report",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:r.value,"onUpdate:modelValue":z[15]||(z[15]=F=>r.value=F),options:{title:"Create New Dashboard"}},{"body-content":D(()=>[u("div",lHt,[b(y(ge),{label:"Dashboard Type",modelValue:s.value.type,"onUpdate:modelValue":z[9]||(z[9]=F=>s.value.type=F),type:"select",options:g,required:""},null,8,["modelValue"]),b(y(ge),{label:"Dashboard Title",modelValue:s.value.title,"onUpdate:modelValue":z[10]||(z[10]=F=>s.value.title=F),type:"text",placeholder:"Enter dashboard title",required:""},null,8,["modelValue"]),b(y(ge),{label:"Description",modelValue:s.value.description,"onUpdate:modelValue":z[11]||(z[11]=F=>s.value.description=F),type:"textarea",placeholder:"Optional description"},null,8,["modelValue"]),b(y(ge),{label:"Time Period",modelValue:s.value.timePeriod,"onUpdate:modelValue":z[12]||(z[12]=F=>s.value.timePeriod=F),type:"select",options:v,required:""},null,8,["modelValue"]),u("div",uHt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":z[13]||(z[13]=F=>s.value.isDefault=F),class:"rounded"},null,512),[[$n,s.value.isDefault]]),z[40]||(z[40]=u("label",{class:"text-sm"},"Set as default dashboard",-1))])])]),actions:D(()=>[b(y(Z),{variant:"outline",onClick:z[14]||(z[14]=F=>r.value=!1)},{default:D(()=>[...z[41]||(z[41]=[W("Cancel",-1)])]),_:1}),b(y(Z),{onClick:k,loading:i.value},{default:D(()=>[...z[42]||(z[42]=[W("Create Dashboard",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])]))}},cHt={class:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm"},fHt={class:"flex flex-wrap items-center justify-between gap-4"},pHt={class:"flex flex-wrap items-center gap-4"},hHt={class:"flex items-center space-x-2"},mHt={class:"relative"},gHt=["value"],vHt={class:"flex items-center space-x-2"},yHt={class:"p-1"},bHt={class:"p-1"},_Ht={class:"p-1"},xHt={class:"flex items-center space-x-2 text-sm text-gray-600"},wHt={__name:"RiskAssessmentFilters",props:{searchQuery:{type:String,default:""},filterStatus:{type:String,default:""},filterPeriod:{type:String,default:""},filterYear:{type:String,default:""},viewMode:{type:String,default:"table"},selectedCount:{type:Number,default:0},filteredCount:{type:Number,default:0},totalCount:{type:Number,default:0}},emits:["update:searchQuery","update:filterStatus","update:filterPeriod","update:filterYear","bulk-action","show-analytics","toggle-view","clear-filters"],setup(t){const e=t,n=[{label:"Annual",value:"Annual"},{label:"Mid-Year",value:"Mid-Year"},{label:"Quarterly",value:"Quarterly"},{label:"Ad-hoc",value:"Ad-hoc"}],r=[{label:"Planning",value:"Planning"},{label:"In Progress",value:"In Progress"},{label:"Review",value:"Review"},{label:"Finalized",value:"Finalized"},{label:"Approved",value:"Approved"}],i=new Date().getFullYear(),a=[];for(let c=i-2;c<=i+2;c++)a.push({label:c.toString(),value:c.toString()});const s=J(()=>[{label:"All Statuses",value:""},...r]),o=J(()=>[{label:"All Periods",value:""},...n]),l=J(()=>[{label:"All Years",value:""},...a]),d=J(()=>e.searchQuery||e.filterStatus||e.filterPeriod||e.filterYear);return(c,f)=>(T(),P("div",cHt,[u("div",fHt,[u("div",pHt,[f[8]||(f[8]=u("h3",{class:"text-sm font-semibold text-gray-900"},"Quick Actions",-1)),u("div",hHt,[u("div",mHt,[b(y(Rn),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u("input",{value:t.searchQuery,onInput:f[0]||(f[0]=p=>c.$emit("update:searchQuery",p.target.value)),type:"text",placeholder:"Search assessments...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm w-48"},null,40,gHt)]),b(y(Ke),{modelValue:t.filterStatus,"onUpdate:modelValue":f[1]||(f[1]=p=>c.$emit("update:filterStatus",p)),options:s.value,class:"min-w-36"},null,8,["modelValue","options"]),b(y(Ke),{modelValue:t.filterPeriod,"onUpdate:modelValue":f[2]||(f[2]=p=>c.$emit("update:filterPeriod",p)),options:o.value,class:"min-w-36"},null,8,["modelValue","options"]),b(y(Ke),{modelValue:t.filterYear,"onUpdate:modelValue":f[3]||(f[3]=p=>c.$emit("update:filterYear",p)),options:l.value,class:"min-w-28"},null,8,["modelValue","options"])])]),u("div",vHt,[u("div",yHt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:f[4]||(f[4]=p=>c.$emit("bulk-action")),disabled:t.selectedCount===0},{prefix:D(()=>[b(y(Bc),{class:"h-3.5 w-3.5"})]),default:D(()=>[W(" Bulk Actions ("+E(t.selectedCount)+") ",1)]),_:1},8,["disabled"])]),u("div",bHt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:f[5]||(f[5]=p=>c.$emit("show-analytics"))},{prefix:D(()=>[b(y(cr),{class:"h-3.5 w-3.5"})]),default:D(()=>[f[9]||(f[9]=W(" Risk Analytics ",-1))]),_:1})]),u("div",_Ht,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:f[6]||(f[6]=p=>c.$emit("toggle-view"))},{prefix:D(()=>[(T(),he(Lt(t.viewMode==="table"?y(GD):y(ZD)),{class:"h-3.5 w-3.5"}))]),default:D(()=>[W(" "+E(t.viewMode==="table"?"Card View":"Table View"),1)]),_:1})])]),u("div",xHt,[u("span",null,"Showing "+E(t.filteredCount)+" of "+E(t.totalCount)+" assessments",1),d.value?(T(),he(y(Z),{key:0,variant:"ghost",size:"sm",onClick:f[7]||(f[7]=p=>c.$emit("clear-filters"))},{default:D(()=>[b(y(ht),{class:"h-3.5 w-3.5 mr-1"}),f[10]||(f[10]=W(" Clear ",-1))]),_:1})):ie("",!0)])])]))}},kHt={class:"risk-heatmap"},SHt={class:"heatmap-container"},CHt={class:"impact-labels"},AHt=["title"],THt={class:"label-text"},EHt={class:"label-number"},MHt={class:"matrix-grid"},$Ht=["onClick"],DHt={class:"cell-content"},RHt={class:"risk-count"},PHt={key:0,class:"risk-indicators"},IHt=["title","onClick"],OHt=["title"],LHt={class:"cell-tooltip"},VHt={class:"tooltip-header"},NHt={key:0,class:"tooltip-risks"},jHt={class:"tooltip-risk-count"},FHt={key:0},BHt={key:1,class:"no-risks"},zHt={class:"likelihood-labels"},UHt=["title"],HHt={class:"label-number"},qHt={class:"label-text"},WHt={key:0,class:"risk-detail-panel"},GHt={class:"panel-header"},YHt={class:"cell-coordinates"},KHt={class:"panel-content"},XHt={key:0,class:"risks-list"},ZHt=["onClick"],QHt={class:"risk-info"},JHt={class:"risk-title"},eqt={class:"risk-meta"},tqt={class:"category"},nqt={class:"owner"},rqt={class:"status"},iqt={class:"risk-actions"},aqt=["checked","onChange"],sqt={key:1,class:"no-risks-message"},oqt={__name:"RiskHeatMap",props:{matrixData:{type:Array,default:()=>[]},likelihoodLevels:{type:Array,default:()=>[]},impactLevels:{type:Array,default:()=>[]},selectedRisks:{type:Array,default:()=>[]}},emits:["cell-click","risk-click","risk-select","create-risk"],setup(t,{emit:e}){const n=t,r=e,i=Q(null),a=J(()=>[...n.impactLevels].reverse()),s={operational:So,financial:tb,compliance:Ku,strategic:Xi,reputational:nn,technology:dfe},o=m=>s[m]||nn,l=m=>({operational:"Operational",financial:"Financial",compliance:"Compliance",strategic:"Strategic",reputational:"Reputational",technology:"Technology"})[m]||m,d=m=>m.some(g=>n.selectedRisks.includes(g.name)),c=m=>{i.value=m,r("cell-click",m)},f=m=>{r("risk-click",m)},p=m=>{r("risk-select",m)},h=m=>{r("create-risk",{likelihood:m.likelihood,impact:m.impact})};return(m,g)=>(T(),P("div",kHt,[g[7]||(g[7]=ur('<div class="heatmap-legend" data-v-ac904a79><h4 data-v-ac904a79>Risk Level Legend</h4><div class="legend-items" data-v-ac904a79><div class="legend-item critical" data-v-ac904a79><div class="legend-color" data-v-ac904a79></div><span data-v-ac904a79>Critical (16-25)</span></div><div class="legend-item high" data-v-ac904a79><div class="legend-color" data-v-ac904a79></div><span data-v-ac904a79>High (13-20)</span></div><div class="legend-item medium" data-v-ac904a79><div class="legend-color" data-v-ac904a79></div><span data-v-ac904a79>Medium (6-12)</span></div><div class="legend-item low" data-v-ac904a79><div class="legend-color" data-v-ac904a79></div><span data-v-ac904a79>Low (1-5)</span></div></div></div>',1)),u("div",SHt,[g[2]||(g[2]=u("div",{class:"y-axis-label"},[u("span",null,"Impact")],-1)),u("div",CHt,[(T(!0),P(_e,null,we(a.value,v=>(T(),P("div",{key:v.id,class:"impact-label",title:v.description},[u("span",THt,E(v.label),1),u("span",EHt,E(v.id),1)],8,AHt))),128))]),u("div",MHt,[(T(!0),P(_e,null,we(t.matrixData,(v,_)=>(T(),P("div",{key:_,class:"matrix-row"},[(T(!0),P(_e,null,we(v,(x,w)=>(T(),P("div",{key:`${_}-${w}`,class:fe(["matrix-cell",[`risk-${x.level.toLowerCase()}`,{"has-risks":x.count>0,selected:d(x.risks)}]]),style:nt({backgroundColor:x.color+"20",borderColor:x.color}),onClick:k=>c(x)},[u("div",DHt,[u("div",RHt,E(x.count),1),x.count>0?(T(),P("div",PHt,[(T(!0),P(_e,null,we(x.risks.slice(0,3),k=>(T(),P("div",{key:k.name,class:fe(["risk-indicator",{selected:t.selectedRisks.includes(k.name)}]),title:k.title,onClick:dt(S=>f(k),["stop"])},[(T(),he(Lt(o(k.category)),{class:"h-3 w-3"}))],10,IHt))),128)),x.count>3?(T(),P("div",{key:0,class:"risk-indicator more",title:`+${x.count-3} more risks`}," +"+E(x.count-3),9,OHt)):ie("",!0)])):ie("",!0)]),u("div",LHt,[u("div",VHt,[u("strong",null,E(x.level)+" Risk",1),u("span",null,"(L:"+E(x.likelihood)+", I:"+E(x.impact)+")",1)]),x.count>0?(T(),P("div",NHt,[u("div",jHt,E(x.count)+" risk(s)",1),u("ul",null,[(T(!0),P(_e,null,we(x.risks.slice(0,5),k=>(T(),P("li",{key:k.name},E(k.title),1))),128)),x.count>5?(T(),P("li",FHt," ...and "+E(x.count-5)+" more ",1)):ie("",!0)])])):(T(),P("div",BHt,"No risks in this category"))])],14,$Ht))),128))]))),128))]),u("div",zHt,[(T(!0),P(_e,null,we(t.likelihoodLevels,v=>(T(),P("div",{key:v.id,class:"likelihood-label",title:v.description},[u("span",HHt,E(v.id),1),u("span",qHt,E(v.label),1)],8,UHt))),128))]),g[3]||(g[3]=u("div",{class:"x-axis-label"},[u("span",null,"Likelihood")],-1))]),i.value?(T(),P("div",WHt,[u("div",GHt,[u("h4",null,E(i.value.level)+" Risk Cell",1),u("div",YHt," Likelihood: "+E(i.value.likelihood)+", Impact: "+E(i.value.impact),1),b(y(Z),{variant:"ghost",size:"sm",onClick:g[0]||(g[0]=v=>i.value=null)},{default:D(()=>[b(y(ht),{class:"h-4 w-4"})]),_:1})]),u("div",KHt,[i.value.count>0?(T(),P("div",XHt,[(T(!0),P(_e,null,we(i.value.risks,v=>(T(),P("div",{key:v.name,class:fe(["risk-item",{selected:t.selectedRisks.includes(v.name)}]),onClick:_=>p(v.name)},[u("div",QHt,[u("div",JHt,E(v.title),1),u("div",eqt,[u("span",tqt,E(l(v.category)),1),u("span",nqt,E(v.risk_owner),1),u("span",rqt,E(v.status),1)])]),u("div",iqt,[b(y(Z),{variant:"outline",size:"sm",onClick:dt(_=>f(v),["stop"])},{default:D(()=>[...g[4]||(g[4]=[W(" View ",-1)])]),_:1},8,["onClick"]),u("input",{type:"checkbox",checked:t.selectedRisks.includes(v.name),onChange:_=>m.$emit("risk-select",v.name)},null,40,aqt)])],10,ZHt))),128))])):(T(),P("div",sqt,[b(y(zr),{class:"h-8 w-8 text-gray-300"}),g[6]||(g[6]=u("p",null,"No risks in this category",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:g[1]||(g[1]=v=>h(i.value))},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-1"}),g[5]||(g[5]=W(" Add Risk Here ",-1))]),_:1})]))])])):ie("",!0)]))}},lqt=Ft(oqt,[["__scopeId","data-v-ac904a79"]]),uqt={class:"flex h-[85vh] overflow-hidden bg-gray-50 -m-4"},dqt={class:"w-72 bg-white border-r border-gray-200 flex flex-col"},cqt={class:"p-6 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50"},fqt={class:"flex items-center gap-3"},pqt={class:"h-12 w-12 rounded-xl bg-gradient-to-br from-red-500 to-orange-500 flex items-center justify-center shadow-lg"},hqt={class:"text-lg font-bold text-gray-900"},mqt={class:"text-sm text-gray-600"},gqt={class:"mt-4 h-2 bg-gray-200 rounded-full overflow-hidden"},vqt={class:"flex-1 overflow-y-auto p-4"},yqt={class:"space-y-1"},bqt=["onClick"],_qt={key:2},xqt={class:"flex-1 min-w-0"},wqt={class:"font-medium truncate"},kqt={class:"text-xs text-gray-500 truncate"},Sqt={class:"p-4 border-t border-gray-200 bg-gray-50 space-y-2"},Cqt={class:"text-xs text-center text-gray-500"},Aqt={class:"flex-1 flex flex-col overflow-hidden"},Tqt={class:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},Eqt={class:"flex items-center gap-4"},Mqt={class:"text-sm text-gray-600"},$qt={class:"flex items-center gap-2"},Dqt={class:"flex-1 overflow-y-auto p-6"},Rqt={class:"space-y-6 max-w-4xl"},Pqt={class:"bg-white rounded-xl border border-gray-200 p-6 space-y-6"},Iqt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Oqt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Lqt={class:"space-y-6 max-w-4xl"},Vqt={class:"bg-white rounded-xl border border-gray-200 p-6 space-y-6"},Nqt={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},jqt=["value"],Fqt={class:"text-sm font-medium text-gray-700"},Bqt={class:"space-y-6 max-w-4xl"},zqt={class:"bg-white rounded-xl border border-gray-200 p-6"},Uqt={class:"space-y-6 max-w-5xl"},Hqt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},qqt={class:"bg-red-50 rounded-xl border border-red-200 p-4"},Wqt={class:"text-2xl font-bold text-red-900"},Gqt={class:"bg-orange-50 rounded-xl border border-orange-200 p-4"},Yqt={class:"text-2xl font-bold text-orange-900"},Kqt={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-4"},Xqt={class:"text-2xl font-bold text-yellow-900"},Zqt={class:"bg-green-50 rounded-xl border border-green-200 p-4"},Qqt={class:"text-2xl font-bold text-green-900"},Jqt={class:"bg-white rounded-xl border border-gray-200 p-6"},eWt={key:0,class:"bg-white rounded-xl border border-gray-200 p-6"},tWt={class:"space-y-6 max-w-5xl"},nWt={class:"bg-white rounded-xl border border-gray-200 p-6"},rWt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},iWt={class:"bg-gray-50 rounded-xl border border-gray-200 p-4"},aWt={class:"text-2xl font-bold text-gray-900"},sWt={class:"bg-blue-50 rounded-xl border border-blue-200 p-4"},oWt={class:"text-2xl font-bold text-blue-900"},lWt={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-4"},uWt={class:"text-2xl font-bold text-yellow-900"},dWt={class:"bg-green-50 rounded-xl border border-green-200 p-4"},cWt={class:"text-2xl font-bold text-green-900"},fWt={class:"space-y-6 max-w-4xl"},pWt={class:"bg-white rounded-xl border border-gray-200 p-6 space-y-6"},hWt={class:"bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-6 border border-red-200"},mWt={class:"flex items-center justify-between mb-4"},gWt={class:"text-right"},vWt={class:"h-3 bg-gray-200 rounded-full overflow-hidden"},yWt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},bWt={key:0,class:"bg-white rounded-xl border border-gray-200 p-6"},_Wt={class:"space-y-3"},xWt={class:"flex-1"},wWt={class:"font-medium text-gray-900"},kWt={class:"text-sm text-gray-600"},SWt={class:"space-y-6 max-w-4xl"},CWt={class:"bg-white rounded-xl border border-gray-200 p-6 space-y-6"},AWt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},TWt={class:"border-t border-gray-200 pt-6"},EWt={class:"relative"},MWt={class:"space-y-6"},$Wt={class:"relative flex items-start gap-4"},DWt={class:"h-8 w-8 rounded-full bg-green-100 border-2 border-green-500 flex items-center justify-center z-10"},RWt={class:"text-sm text-gray-600"},PWt={class:"relative flex items-start gap-4"},IWt={class:"text-sm text-gray-600"},OWt={class:"relative flex items-start gap-4"},LWt={class:"text-sm text-gray-600"},VWt={class:"bg-white border-t border-gray-200 px-6 py-4"},NWt={class:"flex items-center justify-between"},jWt={class:"flex items-center gap-2"},FWt={class:"text-sm text-gray-500"},BWt={class:"flex items-center gap-3"},zWt={__name:"RiskAssessmentForm",props:{modelValue:{type:Boolean,default:!1},assessment:{type:Object,default:null},mode:{type:String,default:"create"}},emits:["update:modelValue","submit","cancel","save-draft"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.modelValue,set:Re=>r("update:modelValue",Re)}),a=J(()=>n.mode==="edit"),s=Jt({assessment_id:"",assessment_name:"",assessment_date:new Date().toISOString().split("T")[0],fiscal_year:"",assessment_period:"Annual",status:"Planning",assessment_scope:"",methodology:"",assessment_team:[],risk_register:[],action_plan:[],top_risks:[],overall_risk_score:0,overall_risk_rating:"",assessment_summary:"",recommendations:"",prepared_by:"",reviewed_by:"",approved_by:""}),o=Q([]),l=[{id:"basic",label:"Basic Information",description:"Assessment details",requiredFields:["assessment_name","assessment_date","fiscal_year","assessment_period"]},{id:"scope",label:"Scope & Methodology",description:"Assessment scope",requiredFields:["assessment_scope"]},{id:"team",label:"Assessment Team",description:"Team members",requiredFields:[]},{id:"risks",label:"Risk Register",description:"Identified risks",requiredFields:[]},{id:"actions",label:"Action Plan",description:"Mitigation actions",requiredFields:[]},{id:"summary",label:"Summary",description:"Assessment summary",requiredFields:[]},{id:"approvals",label:"Approvals",description:"Review & approval",requiredFields:[]}],d={assessment_team:"Assessment Team Member",risk_register:"Risk Assessment Register",action_plan:"Risk Assessment Action"},c=(Re,Se)=>{const Ge={},en=l.find(Ln=>Ln.id===Re);if(!en)return Ge;for(const Ln of en.requiredFields||[]){const Ne=Se[Ln];(!Ne||Array.isArray(Ne)&&Ne.length===0)&&(Ge[Ln]=`${Ln.replace(/_/g," ")} is required`)}return Ge},{activeSection:f,errors:p,isSaving:h,isSavingDraft:m,hasUnsavedChanges:g,completedSections:v,formProgress:_,isFormValid:x,isFirstSection:w,isLastSection:k,currentSectionIndex:S,getSectionStatus:C,getSectionStatusClass:A,navigateToSection:M,nextSection:$,prevSection:R,clearError:I,prepareFormData:B,loadFormData:j}=ZO({sections:l,form:s,validateSection:c,childTables:d}),z=[{label:"Annual",value:"Annual"},{label:"Mid-Year",value:"Mid-Year"},{label:"Quarterly",value:"Quarterly"},{label:"Ad-hoc",value:"Ad-hoc"}],F=[{label:"Planning",value:"Planning"},{label:"In Progress",value:"In Progress"},{label:"Review",value:"Review"},{label:"Finalized",value:"Finalized"},{label:"Approved",value:"Approved"}],q=[{label:"Interview",value:"Interview"},{label:"Workshop",value:"Workshop"},{label:"Survey",value:"Survey"},{label:"Document Review",value:"Document Review"},{label:"Data Analysis",value:"Data Analysis"},{label:"Self-Assessment",value:"Self-Assessment"}],N=[{key:"team_member",label:"Team Member",type:"link",doctype:"User"},{key:"role",label:"Role",type:"select",options:["Lead","Member","Observer","SME"]}],O={team_member:"",role:"Member"},V=[{key:"risk_id",label:"Risk ID",width:"100px"},{key:"risk_title",label:"Risk Title"},{key:"risk_category",label:"Category",width:"120px"},{key:"likelihood_score",label:"Likelihood",width:"90px"},{key:"impact_score",label:"Impact",width:"80px"},{key:"inherent_risk_score",label:"Score",width:"80px",computed:!0},{key:"inherent_risk_rating",label:"Rating",width:"100px"}],L=[{key:"risk_id",label:"Risk ID",type:"text",required:!0},{key:"risk_title",label:"Risk Title",type:"text",required:!0},{key:"risk_description",label:"Risk Description",type:"textarea",required:!0},{key:"risk_category",label:"Category",type:"select",options:["Strategic","Operational","Financial","Compliance","Technology","Reputational"],required:!0},{key:"risk_subcategory",label:"Subcategory",type:"text"},{key:"auditable_entity",label:"Auditable Entity",type:"link",doctype:"Audit Universe Entity"},{key:"threat_source",label:"Threat Source",type:"text"},{key:"vulnerability",label:"Vulnerability",type:"textarea"},{key:"likelihood_score",label:"Likelihood Score (1-5)",type:"rating",required:!0},{key:"likelihood_rationale",label:"Likelihood Rationale",type:"textarea"},{key:"impact_score",label:"Impact Score (1-5)",type:"rating",required:!0},{key:"impact_rationale",label:"Impact Rationale",type:"textarea"},{key:"control_effectiveness",label:"Control Effectiveness",type:"select",options:["Strong","Adequate","Weak","Non-existent"]},{key:"existing_controls",label:"Existing Controls",type:"textarea"},{key:"residual_likelihood",label:"Residual Likelihood (1-5)",type:"rating"},{key:"residual_impact",label:"Residual Impact (1-5)",type:"rating"},{key:"risk_owner",label:"Risk Owner",type:"link",doctype:"User"},{key:"risk_response",label:"Risk Response",type:"select",options:["Accept","Mitigate","Transfer","Avoid"]},{key:"target_risk_score",label:"Target Risk Score",type:"number"},{key:"risk_velocity",label:"Risk Velocity",type:"select",options:["Very Slow","Slow","Medium","Fast","Very Fast"]},{key:"risk_trend",label:"Risk Trend",type:"select",options:["Increasing","Stable","Decreasing"]},{key:"last_review_date",label:"Last Review Date",type:"date"},{key:"next_review_date",label:"Next Review Date",type:"date"},{key:"notes",label:"Notes",type:"textarea"}],U={risk_id:"",risk_title:"",risk_description:"",risk_category:"",risk_subcategory:"",auditable_entity:"",threat_source:"",vulnerability:"",likelihood_score:3,likelihood_rationale:"",impact_score:3,impact_rationale:"",inherent_risk_score:9,inherent_risk_rating:"Medium",control_effectiveness:"Adequate",existing_controls:"",residual_likelihood:0,residual_impact:0,residual_risk_score:0,residual_risk_rating:"",risk_owner:"",risk_response:"Mitigate",target_risk_score:0,risk_velocity:"Medium",risk_trend:"Stable",last_review_date:"",next_review_date:"",notes:""},G=[{key:"action_id",label:"Action ID",width:"100px"},{key:"action_description",label:"Description"},{key:"responsible_party",label:"Responsible",width:"150px"},{key:"target_completion_date",label:"Due Date",width:"120px"},{key:"priority",label:"Priority",width:"100px"},{key:"status",label:"Status",width:"120px"}],X=[{key:"action_id",label:"Action ID",type:"text",required:!0},{key:"action_description",label:"Action Description",type:"textarea",required:!0},{key:"action_type",label:"Action Type",type:"select",options:["Process Improvement","Control Enhancement","Training","System Enhancement","Policy Update"]},{key:"priority",label:"Priority",type:"select",options:["Low","Medium","High","Critical"],required:!0},{key:"responsible_party",label:"Responsible Party",type:"link",doctype:"User",required:!0},{key:"target_completion_date",label:"Target Completion Date",type:"date",required:!0},{key:"estimated_cost",label:"Estimated Cost",type:"currency"},{key:"resource_required",label:"Resources Required",type:"text"},{key:"status",label:"Status",type:"select",options:["Planned","In Progress","Completed","Overdue","Cancelled"]},{key:"actual_completion_date",label:"Actual Completion Date",type:"date"},{key:"effectiveness_review_date",label:"Effectiveness Review Date",type:"date"},{key:"review_notes",label:"Review Notes",type:"textarea"}],re={action_id:"",action_description:"",action_type:"",priority:"Medium",responsible_party:"",target_completion_date:"",estimated_cost:0,resource_required:"",status:"Planned",actual_completion_date:"",effectiveness_review_date:"",review_notes:""},ee=[{id:1,label:"Rare",description:"Unlikely to occur"},{id:2,label:"Unlikely",description:"Could occur occasionally"},{id:3,label:"Possible",description:"Might occur sometime"},{id:4,label:"Likely",description:"Will probably occur"},{id:5,label:"Almost Certain",description:"Expected to occur"}],de=[{id:1,label:"Negligible",description:"Minimal impact"},{id:2,label:"Minor",description:"Some minor issues"},{id:3,label:"Moderate",description:"Noticeable impact"},{id:4,label:"Major",description:"Significant impact"},{id:5,label:"Catastrophic",description:"Severe impact"}],se=Q(null),te=J(()=>{if(!se.value)return"not yet saved";const Re=Date.now()-se.value;return Re<6e4?"just now":Re<36e5?`${Math.floor(Re/6e4)} minutes ago`:"over an hour ago"}),ne=J(()=>{const Re={critical:0,high:0,medium:0,low:0};return s.risk_register.forEach(Se=>{const Ge=Se.inherent_risk_score||Se.likelihood_score*Se.impact_score;Ge>=20?Re.critical++:Ge>=15?Re.high++:Ge>=10?Re.medium++:Re.low++}),Re}),ce=J(()=>{const Re={planned:0,inProgress:0,completed:0};return s.action_plan.forEach(Se=>{Se.status==="Planned"?Re.planned++:Se.status==="In Progress"?Re.inProgress++:Se.status==="Completed"&&Re.completed++}),Re}),ve=J(()=>[...s.risk_register].map(Re=>je(me({},Re),{inherent_risk_score:Re.inherent_risk_score||Re.likelihood_score*Re.impact_score})).sort((Re,Se)=>Se.inherent_risk_score-Re.inherent_risk_score).slice(0,5)),Y=J(()=>{const Re=[];for(let Se=5;Se>=1;Se--){const Ge=[];for(let en=1;en<=5;en++){const Ln=s.risk_register.filter(Fe=>Fe.likelihood_score===en&&Fe.impact_score===Se),Ne=Se*en;let $e="Low",ke="#22c55e";Ne>=20?($e="Critical",ke="#ef4444"):Ne>=15?($e="High",ke="#f97316"):Ne>=10&&($e="Medium",ke="#eab308"),Ge.push({likelihood:en,impact:Se,level:$e,color:ke,count:Ln.length,risks:Ln})}Re.push(Ge)}return Re}),K=J(()=>{const Re=s.overall_risk_score||ue();return Re>=20?"text-red-600":Re>=15?"text-orange-600":Re>=10?"text-yellow-600":"text-green-600"}),H=J(()=>{const Re=s.overall_risk_score||ue();return Re>=20?"destructive":Re>=15?"warning":Re>=10?"secondary":"success"}),ae=J(()=>{const Re=s.overall_risk_score||ue();return Re>=20?"bg-red-500":Re>=15?"bg-orange-500":Re>=10?"bg-yellow-500":"bg-green-500"}),be=Re=>o.value.includes(Re),ue=()=>{if(s.risk_register.length===0)return 0;const Re=s.risk_register.reduce((Se,Ge)=>Se+(Ge.inherent_risk_score||Ge.likelihood_score*Ge.impact_score),0);return Math.round(Re/s.risk_register.length)},pe=()=>{const Re=ue();return Re>=20?"Critical":Re>=15?"High":Re>=10?"Medium":"Low"},ye=Re=>Re>=20?"destructive":Re>=15?"warning":Re>=10?"secondary":"success",Me=Re=>Re>=20?"border-red-200 bg-red-50":Re>=15?"border-orange-200 bg-orange-50":Re>=10?"border-yellow-200 bg-yellow-50":"border-green-200 bg-green-50",Te=Re=>Re>=20?"bg-red-500":Re>=15?"bg-orange-500":Re>=10?"bg-yellow-500":"bg-green-500",qe=Re=>Re?new Date(Re).toLocaleDateString():null,We=Re=>{console.log("Risk clicked:",Re)},at=Re=>{console.log("Heat map risk clicked:",Re)},st=()=>le(this,null,function*(){m.value=!0;try{s.methodology=o.value.join(", ");const Re=B();r("save-draft",Re),se.value=Date.now()}catch(Re){console.error("Error saving draft:",Re)}finally{m.value=!1}}),Ve=()=>le(this,null,function*(){h.value=!0;try{s.methodology=o.value.join(", "),s.risk_register.forEach(Se=>{Se.inherent_risk_score=Se.likelihood_score*Se.impact_score,Se.inherent_risk_rating=De(Se.inherent_risk_score),Se.residual_likelihood&&Se.residual_impact&&(Se.residual_risk_score=Se.residual_likelihood*Se.residual_impact,Se.residual_risk_rating=De(Se.residual_risk_score))}),s.overall_risk_score=ue(),s.overall_risk_rating=pe(),s.top_risks=ve.value.map(Se=>({risk_description:Se.risk_title,inherent_risk_score:Se.inherent_risk_score}));const Re=B();r("submit",Re),i.value=!1}catch(Re){console.error("Error submitting form:",Re)}finally{h.value=!1}}),De=Re=>Re>=20?"Critical":Re>=15?"High":Re>=10?"Medium":"Low",Le=()=>{g.value?confirm("You have unsaved changes. Are you sure you want to close?")&&(r("cancel"),i.value=!1):(r("cancel"),i.value=!1)};return Je(()=>n.assessment,Re=>{Re&&(j(Re),Re.methodology&&(o.value=Re.methodology.split(", ").filter(Boolean)))},{immediate:!0}),Je(o,Re=>{s.methodology=Re.join(", ")},{deep:!0}),(Re,Se)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":Se[18]||(Se[18]=Ge=>i.value=Ge),options:{title:"",size:"7xl"}},{body:D(()=>[u("div",uqt,[u("div",dqt,[u("div",cqt,[u("div",fqt,[u("div",pqt,[b(y(nn),{class:"h-6 w-6 text-white"})]),u("div",null,[u("h2",hqt,E(a.value?"Edit Risk Assessment":"New Risk Assessment"),1),u("p",mqt,E(y(_))+"% Complete",1)])]),u("div",gqt,[u("div",{class:"h-full bg-gradient-to-r from-red-500 to-orange-500 transition-all duration-500",style:nt({width:`${y(_)}%`})},null,4)])]),u("nav",vqt,[u("div",yqt,[(T(),P(_e,null,we(l,(Ge,en)=>u("button",{key:Ge.id,onClick:Ln=>y(M)(Ge.id),class:fe(["w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all duration-200",{"bg-red-50 text-red-700 border-2 border-red-200 shadow-sm":y(f)===Ge.id,"hover:bg-gray-50 text-gray-700":y(f)!==Ge.id}])},[u("div",{class:fe(["flex-shrink-0 h-8 w-8 rounded-lg flex items-center justify-center text-sm font-semibold transition-colors",y(A)(Ge.id)])},[y(C)(Ge.id)==="complete"?(T(),he(Lt(y(Wr)),{key:0,class:"h-4 w-4"})):y(C)(Ge.id)==="error"?(T(),he(Lt(y(zr)),{key:1,class:"h-4 w-4"})):(T(),P("span",_qt,E(en+1),1))],2),u("div",xqt,[u("div",wqt,E(Ge.label),1),u("div",kqt,E(Ge.description),1)]),y(f)===Ge.id?(T(),he(y(tr),{key:0,class:"h-4 w-4 text-red-500 flex-shrink-0"})):ie("",!0)],10,bqt)),64))])]),u("div",Sqt,[b(y(Z),{variant:"outline",class:"w-full justify-center",onClick:st,loading:y(m)},{default:D(()=>[b(y(Cr),{class:"h-4 w-4 mr-2"}),Se[19]||(Se[19]=W(" Save Draft ",-1))]),_:1},8,["loading"]),u("div",Cqt," Draft saved "+E(te.value),1)])]),u("div",Aqt,[u("div",Tqt,[u("div",Eqt,[b(y(Z),{variant:"ghost",size:"sm",onClick:y(R),disabled:y(w)},{default:D(()=>[b(y(pr),{class:"h-4 w-4 mr-1"}),Se[20]||(Se[20]=W(" Previous ",-1))]),_:1},8,["onClick","disabled"]),u("span",Mqt," Step "+E(y(S))+" of "+E(l.length),1),b(y(Z),{variant:"ghost",size:"sm",onClick:y($),disabled:y(k)},{default:D(()=>[Se[21]||(Se[21]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4 ml-1"})]),_:1},8,["onClick","disabled"])]),u("div",$qt,[b(y(Z),{variant:"ghost",size:"sm",onClick:Le},{default:D(()=>[b(y(ht),{class:"h-4 w-4 mr-1"}),Se[22]||(Se[22]=W(" Cancel ",-1))]),_:1}),b(y(Z),{variant:"solid",theme:"red",size:"sm",onClick:Ve,loading:y(h),disabled:!y(x)},{default:D(()=>[b(y(Gt),{class:"h-4 w-4 mr-2"}),W(" "+E(a.value?"Update Assessment":"Create Assessment"),1)]),_:1},8,["loading","disabled"])])]),u("div",Dqt,[xe(u("div",Rqt,[b(Rt,{title:"Basic Information",description:"Provide essential details about the risk assessment",icon:"Info"}),u("div",Pqt,[u("div",Iqt,[b(y(ge),{label:"Assessment Name",modelValue:s.assessment_name,"onUpdate:modelValue":Se[0]||(Se[0]=Ge=>s.assessment_name=Ge),required:"",placeholder:"Enter assessment name",error:y(p).assessment_name,onInput:Se[1]||(Se[1]=Ge=>y(I)("assessment_name"))},null,8,["modelValue","error"]),b(y(ge),{label:"Assessment Date",type:"date",modelValue:s.assessment_date,"onUpdate:modelValue":Se[2]||(Se[2]=Ge=>s.assessment_date=Ge),required:"",error:y(p).assessment_date,onInput:Se[3]||(Se[3]=Ge=>y(I)("assessment_date"))},null,8,["modelValue","error"])]),u("div",Oqt,[u("div",null,[Se[23]||(Se[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Fiscal Year "),u("span",{class:"text-red-500"},"*")],-1)),b(At,{modelValue:s.fiscal_year,"onUpdate:modelValue":Se[4]||(Se[4]=Ge=>s.fiscal_year=Ge),doctype:"Fiscal Year",placeholder:"Select fiscal year",error:y(p).fiscal_year},null,8,["modelValue","error"])]),u("div",null,[Se[24]||(Se[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Assessment Period "),u("span",{class:"text-red-500"},"*")],-1)),b(y(Ke),{modelValue:s.assessment_period,"onUpdate:modelValue":Se[5]||(Se[5]=Ge=>s.assessment_period=Ge),options:z,placeholder:"Select period"},null,8,["modelValue"])]),u("div",null,[Se[25]||(Se[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Status ",-1)),b(y(Ke),{modelValue:s.status,"onUpdate:modelValue":Se[6]||(Se[6]=Ge=>s.status=Ge),options:F,placeholder:"Select status"},null,8,["modelValue"])])])])],512),[[ot,y(f)==="basic"]]),xe(u("div",Lqt,[b(Rt,{title:"Scope & Methodology",description:"Define the assessment scope and methodologies to be used",icon:"Target"}),u("div",Vqt,[b(y(ge),{label:"Assessment Scope",type:"textarea",modelValue:s.assessment_scope,"onUpdate:modelValue":Se[7]||(Se[7]=Ge=>s.assessment_scope=Ge),placeholder:"Describe the scope of this risk assessment...",rows:"4",error:y(p).assessment_scope,onInput:Se[8]||(Se[8]=Ge=>y(I)("assessment_scope"))},null,8,["modelValue","error"]),u("div",null,[Se[26]||(Se[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Assessment Methodology ",-1)),u("div",Nqt,[(T(),P(_e,null,we(q,Ge=>u("label",{key:Ge.value,class:fe(["flex items-center gap-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",{"bg-red-50 border-red-200":be(Ge.value)}])},[xe(u("input",{type:"checkbox",value:Ge.value,"onUpdate:modelValue":Se[9]||(Se[9]=en=>o.value=en),class:"rounded border-gray-300 text-red-600 focus:ring-red-500"},null,8,jqt),[[$n,o.value]]),u("span",Fqt,E(Ge.label),1)],2)),64))])])])],512),[[ot,y(f)==="scope"]]),xe(u("div",Bqt,[b(Rt,{title:"Assessment Team",description:"Add team members who will participate in this assessment",icon:"Users"}),u("div",zqt,[b(b0,{modelValue:s.assessment_team,"onUpdate:modelValue":Se[10]||(Se[10]=Ge=>s.assessment_team=Ge),title:"Team Members",columns:N,defaultRow:O,addButtonLabel:"Add Team Member"},null,8,["modelValue"])])],512),[[ot,y(f)==="team"]]),xe(u("div",Uqt,[b(Rt,{title:"Risk Register",description:"Identify and assess risks in this assessment",icon:"AlertTriangle"}),u("div",Hqt,[u("div",qqt,[Se[27]||(Se[27]=u("p",{class:"text-xs font-semibold text-red-700 uppercase"},"Critical",-1)),u("p",Wqt,E(ne.value.critical),1)]),u("div",Gqt,[Se[28]||(Se[28]=u("p",{class:"text-xs font-semibold text-orange-700 uppercase"},"High",-1)),u("p",Yqt,E(ne.value.high),1)]),u("div",Kqt,[Se[29]||(Se[29]=u("p",{class:"text-xs font-semibold text-yellow-700 uppercase"},"Medium",-1)),u("p",Xqt,E(ne.value.medium),1)]),u("div",Zqt,[Se[30]||(Se[30]=u("p",{class:"text-xs font-semibold text-green-700 uppercase"},"Low",-1)),u("p",Qqt,E(ne.value.low),1)])]),u("div",Jqt,[b(rs,{modelValue:s.risk_register,"onUpdate:modelValue":Se[11]||(Se[11]=Ge=>s.risk_register=Ge),title:"Risk Register",columns:V,formFields:L,defaultRow:U,addButtonLabel:"Add Risk",modalTitle:"Risk Entry",onRowClick:We},null,8,["modelValue"])]),s.risk_register.length>0?(T(),P("div",eWt,[Se[31]||(Se[31]=u("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Heat Map",-1)),b(lqt,{matrixData:Y.value,likelihoodLevels:ee,impactLevels:de,selectedRisks:[],onRiskClick:at},null,8,["matrixData"])])):ie("",!0)],512),[[ot,y(f)==="risks"]]),xe(u("div",tWt,[b(Rt,{title:"Action Plan",description:"Define mitigation actions for identified risks",icon:"ListChecks"}),u("div",nWt,[b(rs,{modelValue:s.action_plan,"onUpdate:modelValue":Se[12]||(Se[12]=Ge=>s.action_plan=Ge),title:"Mitigation Actions",columns:G,formFields:X,defaultRow:re,addButtonLabel:"Add Action",modalTitle:"Action Item"},null,8,["modelValue"])]),u("div",rWt,[u("div",iWt,[Se[32]||(Se[32]=u("p",{class:"text-xs font-semibold text-gray-600 uppercase"},"Total Actions",-1)),u("p",aWt,E(s.action_plan.length),1)]),u("div",sWt,[Se[33]||(Se[33]=u("p",{class:"text-xs font-semibold text-blue-700 uppercase"},"Planned",-1)),u("p",oWt,E(ce.value.planned),1)]),u("div",lWt,[Se[34]||(Se[34]=u("p",{class:"text-xs font-semibold text-yellow-700 uppercase"},"In Progress",-1)),u("p",uWt,E(ce.value.inProgress),1)]),u("div",dWt,[Se[35]||(Se[35]=u("p",{class:"text-xs font-semibold text-green-700 uppercase"},"Completed",-1)),u("p",cWt,E(ce.value.completed),1)])])],512),[[ot,y(f)==="actions"]]),xe(u("div",fWt,[b(Rt,{title:"Summary & Recommendations",description:"Provide overall assessment summary and key recommendations",icon:"FileText"}),u("div",pWt,[u("div",hWt,[u("div",mWt,[Se[36]||(Se[36]=u("div",null,[u("h4",{class:"text-lg font-semibold text-gray-900"},"Overall Risk Score"),u("p",{class:"text-sm text-gray-600"},"Based on identified risks")],-1)),u("div",gWt,[u("p",{class:fe(["text-3xl font-bold",K.value])},E(s.overall_risk_score||ue()),3),b(y(Ee),{variant:H.value,size:"sm"},{default:D(()=>[W(E(s.overall_risk_rating||pe()),1)]),_:1},8,["variant"])])]),u("div",vWt,[u("div",{class:fe(["h-full transition-all duration-500",ae.value]),style:nt({width:`${(s.overall_risk_score||ue())*4}%`})},null,6)])]),u("div",yWt,[b(y(ge),{label:"Assessment Summary",type:"textarea",modelValue:s.assessment_summary,"onUpdate:modelValue":Se[13]||(Se[13]=Ge=>s.assessment_summary=Ge),placeholder:"Summarize the key findings and conclusions...",rows:"6"},null,8,["modelValue"]),b(y(ge),{label:"Recommendations",type:"textarea",modelValue:s.recommendations,"onUpdate:modelValue":Se[14]||(Se[14]=Ge=>s.recommendations=Ge),placeholder:"Provide key recommendations based on the assessment...",rows:"6"},null,8,["modelValue"])])]),ve.value.length>0?(T(),P("div",bWt,[Se[37]||(Se[37]=u("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Top Risks",-1)),u("div",_Wt,[(T(!0),P(_e,null,we(ve.value,(Ge,en)=>(T(),P("div",{key:Ge.risk_id,class:fe(["flex items-center gap-4 p-4 rounded-lg border",Me(Ge.inherent_risk_score)])},[u("div",{class:fe(["h-8 w-8 rounded-lg flex items-center justify-center text-white font-bold text-sm",Te(Ge.inherent_risk_score)])},E(en+1),3),u("div",xWt,[u("p",wWt,E(Ge.risk_title),1),u("p",kWt,E(Ge.risk_category),1)]),b(y(Ee),{variant:ye(Ge.inherent_risk_score),size:"sm"},{default:D(()=>[W(" Score: "+E(Ge.inherent_risk_score),1)]),_:2},1032,["variant"])],2))),128))])])):ie("",!0)],512),[[ot,y(f)==="summary"]]),xe(u("div",SWt,[b(Rt,{title:"Approvals",description:"Track preparation, review, and approval of the assessment",icon:"UserCheck"}),u("div",CWt,[u("div",AWt,[u("div",null,[Se[38]||(Se[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Prepared By ",-1)),b(At,{modelValue:s.prepared_by,"onUpdate:modelValue":Se[15]||(Se[15]=Ge=>s.prepared_by=Ge),doctype:"User",placeholder:"Select preparer"},null,8,["modelValue"])]),u("div",null,[Se[39]||(Se[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Reviewed By ",-1)),b(At,{modelValue:s.reviewed_by,"onUpdate:modelValue":Se[16]||(Se[16]=Ge=>s.reviewed_by=Ge),doctype:"User",placeholder:"Select reviewer"},null,8,["modelValue"])]),u("div",null,[Se[40]||(Se[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Approved By ",-1)),b(At,{modelValue:s.approved_by,"onUpdate:modelValue":Se[17]||(Se[17]=Ge=>s.approved_by=Ge),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])])]),u("div",TWt,[Se[45]||(Se[45]=u("h4",{class:"text-sm font-semibold text-gray-700 mb-4"},"Approval Timeline",-1)),u("div",EWt,[Se[44]||(Se[44]=u("div",{class:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"},null,-1)),u("div",MWt,[u("div",$Wt,[u("div",DWt,[b(y(Wr),{class:"h-4 w-4 text-green-600"})]),u("div",null,[Se[41]||(Se[41]=u("p",{class:"font-medium text-gray-900"},"Created",-1)),u("p",RWt,E(qe(s.creation)||"Pending"),1)])]),u("div",PWt,[u("div",{class:fe(["h-8 w-8 rounded-full border-2 flex items-center justify-center z-10",s.reviewed_by?"bg-green-100 border-green-500":"bg-gray-100 border-gray-300"])},[(T(),he(Lt(s.reviewed_by?y(Wr):y(Ii)),{class:fe(["h-4 w-4",s.reviewed_by?"text-green-600":"text-gray-400"])},null,8,["class"]))],2),u("div",null,[Se[42]||(Se[42]=u("p",{class:"font-medium text-gray-900"},"Reviewed",-1)),u("p",IWt,E(s.reviewed_by||"Awaiting review"),1)])]),u("div",OWt,[u("div",{class:fe(["h-8 w-8 rounded-full border-2 flex items-center justify-center z-10",s.approved_by?"bg-green-100 border-green-500":"bg-gray-100 border-gray-300"])},[(T(),he(Lt(s.approved_by?y(Wr):y(Ii)),{class:fe(["h-4 w-4",s.approved_by?"text-green-600":"text-gray-400"])},null,8,["class"]))],2),u("div",null,[Se[43]||(Se[43]=u("p",{class:"font-medium text-gray-900"},"Approved",-1)),u("p",LWt,E(s.approved_by||"Awaiting approval"),1)])])])])])])],512),[[ot,y(f)==="approvals"]])]),u("div",VWt,[u("div",NWt,[b(y(Z),{variant:"outline",onClick:y(R),disabled:y(w)},{default:D(()=>[b(y(pr),{class:"h-4 w-4 mr-2"}),Se[46]||(Se[46]=W(" Previous ",-1))]),_:1},8,["onClick","disabled"]),u("div",jWt,[u("span",FWt,E(y(v))+" of "+E(l.length)+" sections complete ",1)]),u("div",BWt,[y(k)?(T(),he(y(Z),{key:1,variant:"solid",theme:"red",onClick:Ve,loading:y(h),disabled:!y(x)},{default:D(()=>[b(y(Gt),{class:"h-4 w-4 mr-2"}),W(" "+E(a.value?"Update Assessment":"Create Assessment"),1)]),_:1},8,["loading","disabled"])):(T(),he(y(Z),{key:0,variant:"solid",theme:"gray",onClick:y($)},{default:D(()=>[Se[47]||(Se[47]=W(" Next Section ",-1)),b(y(tr),{class:"h-4 w-4 ml-2"})]),_:1},8,["onClick"]))])])])])])]),_:1},8,["modelValue"]))}},UWt=Ft(zWt,[["__scopeId","data-v-23438263"]]),HWt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4"},qWt={class:"bg-blue-50 rounded-xl border border-blue-200 p-6 hover:shadow-lg transition-shadow"},WWt={class:"flex items-center justify-between"},GWt={class:"text-3xl font-bold text-blue-900 mt-1"},YWt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},KWt={class:"bg-red-50 rounded-xl border border-red-200 p-6 hover:shadow-lg transition-shadow"},XWt={class:"flex items-center justify-between"},ZWt={class:"text-3xl font-bold text-red-900 mt-1"},QWt={class:"p-3 bg-red-500 rounded-xl shadow-sm"},JWt={class:"bg-orange-50 rounded-xl border border-orange-200 p-6 hover:shadow-lg transition-shadow"},eGt={class:"flex items-center justify-between"},tGt={class:"text-3xl font-bold text-orange-900 mt-1"},nGt={class:"p-3 bg-orange-500 rounded-xl shadow-sm"},rGt={class:"bg-green-50 rounded-xl border border-green-200 p-6 hover:shadow-lg transition-shadow"},iGt={class:"flex items-center justify-between"},aGt={class:"text-3xl font-bold text-green-900 mt-1"},sGt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},oGt={class:"bg-purple-50 rounded-xl border border-purple-200 p-6 hover:shadow-lg transition-shadow"},lGt={class:"flex items-center justify-between"},uGt={class:"text-3xl font-bold text-purple-900 mt-1"},dGt={class:"w-full bg-purple-200 rounded-full h-2 mt-2"},cGt={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},fGt={__name:"RiskAssessmentStats",props:{stats:{type:Object,required:!0,default:()=>({total:0,criticalRisks:0,highRisks:0,approved:0,averageRiskScore:0})}},setup(t){return(e,n)=>(T(),P("div",HWt,[u("div",qWt,[u("div",WWt,[u("div",null,[n[0]||(n[0]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Total Assessments",-1)),u("p",GWt,E(t.stats.total),1),n[1]||(n[1]=u("p",{class:"text-xs text-blue-600 mt-1"},"Active assessments",-1))]),u("div",YWt,[b(y(vt),{class:"h-7 w-7 text-white"})])])]),u("div",KWt,[u("div",XWt,[u("div",null,[n[2]||(n[2]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Critical Risks",-1)),u("p",ZWt,E(t.stats.criticalRisks),1),n[3]||(n[3]=u("p",{class:"text-xs text-red-600 mt-1"},"High priority items",-1))]),u("div",QWt,[b(y(nn),{class:"h-7 w-7 text-white"})])])]),u("div",JWt,[u("div",eGt,[u("div",null,[n[4]||(n[4]=u("p",{class:"text-sm font-semibold text-orange-700 uppercase tracking-wide"},"High Risks",-1)),u("p",tGt,E(t.stats.highRisks),1),n[5]||(n[5]=u("p",{class:"text-xs text-orange-600 mt-1"},"Medium priority items",-1))]),u("div",nGt,[b(y(zr),{class:"h-7 w-7 text-white"})])])]),u("div",rGt,[u("div",iGt,[u("div",null,[n[6]||(n[6]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Approved",-1)),u("p",aGt,E(t.stats.approved),1),n[7]||(n[7]=u("p",{class:"text-xs text-green-600 mt-1"},"Completed assessments",-1))]),u("div",sGt,[b(y(Gt),{class:"h-7 w-7 text-white"})])])]),u("div",oGt,[u("div",lGt,[u("div",null,[n[8]||(n[8]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Avg Risk Score",-1)),u("p",uGt,E(t.stats.averageRiskScore),1),u("div",dGt,[u("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${Math.min(t.stats.averageRiskScore,25)*4}%`})},null,4)])]),u("div",cGt,[b(y(cr),{class:"h-7 w-7 text-white"})])])])]))}},pGt={class:"space-y-6"},hGt={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},mGt={class:"flex items-center space-x-3"},gGt={class:"p-2 bg-red-100 rounded-lg"},vGt={class:"flex flex-wrap items-center gap-3"},yGt={class:"flex items-center space-x-2"},bGt={class:"p-1"},_Gt={class:"p-1"},xGt={class:"p-1"},wGt={class:"p-1"},kGt={class:"bg-white rounded-xl border border-gray-200 shadow-sm"},SGt={class:"px-6 py-4 border-b border-gray-200"},CGt={class:"flex items-center justify-between"},AGt={class:"flex items-center space-x-2"},TGt={key:0,class:"p-1"},EGt={key:0,class:"overflow-x-auto"},MGt={class:"min-w-full divide-y divide-gray-200"},$Gt={class:"bg-gray-50"},DGt={class:"px-6 py-3 text-left"},RGt=["checked"],PGt={class:"flex items-center space-x-1"},IGt={class:"flex items-center space-x-1"},OGt={class:"bg-white divide-y divide-gray-200"},LGt={class:"px-6 py-4"},VGt=["checked","onChange"],NGt={class:"px-6 py-4 whitespace-nowrap"},jGt={class:"flex items-center"},FGt={class:"flex-shrink-0 h-10 w-10"},BGt={class:"h-10 w-10 rounded-lg bg-red-500 flex items-center justify-center text-white font-bold text-sm"},zGt={class:"ml-4"},UGt={class:"text-sm font-semibold text-gray-900"},HGt={class:"text-sm text-gray-500"},qGt={class:"px-6 py-4"},WGt={class:"text-sm font-medium text-gray-900"},GGt={class:"text-sm text-gray-500"},YGt={class:"px-6 py-4 whitespace-nowrap"},KGt={class:"text-sm font-medium text-gray-900"},XGt={class:"px-6 py-4 whitespace-nowrap"},ZGt={class:"flex items-center"},QGt={class:"text-sm font-medium text-gray-900"},JGt={class:"ml-2 w-12 bg-gray-200 rounded-full h-1.5"},eYt={class:"px-6 py-4 whitespace-nowrap"},tYt={class:"flex items-center space-x-2"},nYt={class:"text-sm font-medium text-gray-900"},rYt={class:"px-6 py-4 whitespace-nowrap"},iYt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},aYt={class:"flex items-center space-x-1"},sYt={key:1,class:"p-6"},oYt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},lYt=["onClick"],uYt={class:"flex items-start justify-between mb-4"},dYt={class:"flex items-center space-x-3"},cYt={class:"h-12 w-12 rounded-xl bg-red-500 flex items-center justify-center text-white font-bold"},fYt={class:"text-lg font-semibold text-gray-900 group-hover:text-red-900"},pYt={class:"text-sm text-gray-600"},hYt={class:"space-y-3"},mYt={class:"flex justify-between items-center mb-1"},gYt={class:"text-sm font-medium"},vYt={class:"w-full bg-gray-200 rounded-full h-2"},yYt={class:"flex justify-between items-center"},bYt={class:"text-sm font-medium"},_Yt={class:"flex justify-between items-center"},xYt={class:"text-sm font-medium"},wYt={class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200"},kYt={class:"flex items-center space-x-1"},SYt={class:"text-xs text-gray-500"},CYt={key:2,class:"px-6 py-20 text-center"},AYt={class:"mx-auto h-20 w-20 rounded-2xl bg-red-50 border-2 border-red-100 flex items-center justify-center mb-8 shadow-sm"},TYt={class:"max-w-md mx-auto"},EYt={class:"flex flex-col sm:flex-row justify-center gap-3"},MYt={key:3,class:"px-6 py-12 text-center"},$Yt={class:"p-1"},DYt={class:"space-y-6 p-6 bg-gray-50"},RYt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6"},PYt={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-red-300 cursor-pointer transition-all duration-200 group"},IYt={class:"flex items-start space-x-4 mb-5"},OYt={class:"flex-shrink-0 p-3 bg-red-50 rounded-xl group-hover:bg-red-100 transition-colors"},LYt={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-orange-300 cursor-pointer transition-all duration-200 group"},VYt={class:"flex items-start space-x-4 mb-5"},NYt={class:"flex-shrink-0 p-3 bg-orange-50 rounded-xl group-hover:bg-orange-100 transition-colors"},jYt={class:"space-y-6"},FYt={class:"bg-red-50 border border-red-200 rounded-lg p-4"},BYt={class:"text-red-800"},zYt={class:"font-semibold"},UYt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},HYt={class:"p-1"},qYt={class:"flex flex-col items-center justify-center space-y-2"},WYt={class:"p-1"},GYt={class:"flex flex-col items-center justify-center space-y-2"},YYt={class:"p-1"},KYt={class:"flex flex-col items-center justify-center space-y-2"},XYt={class:"p-1"},ZYt={class:"flex flex-col items-center justify-center space-y-2"},QYt={class:"space-y-6"},JYt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},eKt={class:"bg-red-50 rounded-lg p-6"},tKt={class:"space-y-3"},nKt={class:"flex justify-between"},rKt={class:"font-medium text-red-900"},iKt={class:"flex justify-between"},aKt={class:"font-medium text-red-900"},sKt={class:"flex justify-between"},oKt={class:"font-medium text-red-900"},lKt={class:"bg-orange-50 rounded-lg p-6"},uKt={class:"space-y-3"},dKt={class:"flex justify-between"},cKt={class:"font-medium text-orange-900"},fKt={class:"flex justify-between"},pKt={class:"font-medium text-orange-900"},hKt={class:"flex justify-between"},mKt={class:"font-medium text-orange-900"},gKt={class:"bg-purple-50 rounded-lg p-6"},vKt={class:"space-y-3"},yKt={class:"flex justify-between"},bKt={class:"font-medium text-purple-900"},_Kt={class:"flex justify-between"},xKt={class:"font-medium text-purple-900"},wKt={class:"flex justify-between"},kKt={class:"font-medium text-purple-900"},SKt={__name:"RiskAssessments",setup(t){const e=xn(),n=Bo(),r=Q(!1),i=Q(!1),a=Q(!1),s=Q(!1),o=Q(!1),l=Q(!1);Q(!1);const d=Q(!1),c=Q(null),f=Q("create"),p=Q("table"),h=Q(""),m=Q(""),g=Q(""),v=Q(""),_=Q([]),x=Q("assessment_id"),w=Q("asc"),k=J(()=>n.riskAssessments||[]),S=J(()=>k.value.reduce((ue,pe)=>{var ye;return ue+(((ye=pe.top_risks)==null?void 0:ye.filter(Me=>Me.inherent_risk_score>=20).length)||0)},0)),C=J(()=>k.value.reduce((ue,pe)=>{var ye;return ue+(((ye=pe.top_risks)==null?void 0:ye.filter(Me=>Me.inherent_risk_score>=15&&Me.inherent_risk_score<20).length)||0)},0)),A=J(()=>k.value.filter(ue=>ue.status==="Approved").length),M=J(()=>{const ue=k.value;if(ue.length===0)return 0;const pe=ue.reduce((ye,Me)=>ye+U(Me),0);return Math.round(pe/ue.length)}),$=J(()=>({total:k.value.length,criticalRisks:S.value,highRisks:C.value,approved:A.value,averageRiskScore:M.value})),R=J(()=>k.value.reduce((ue,pe)=>{var ye;return ue+(((ye=pe.top_risks)==null?void 0:ye.filter(Me=>Me.inherent_risk_score>=10&&Me.inherent_risk_score<15).length)||0)},0)),I=J(()=>k.value.filter(ue=>ue.status==="In Progress").length),B=J(()=>k.value.filter(ue=>ue.status==="Planning").length),j=J(()=>M.value>15?"Increasing":"Stable"),z=J(()=>"Operational");J(()=>{const ue=new Date().getFullYear(),pe=[];for(let ye=ue-2;ye<=ue+2;ye++)pe.push({label:ye.toString(),value:ye.toString()});return pe});const F=J(()=>{let ue=k.value;if(h.value){const pe=h.value.toLowerCase();ue=ue.filter(ye=>{var Me,Te,qe;return((Me=ye.assessment_id)==null?void 0:Me.toLowerCase().includes(pe))||((Te=ye.assessment_name)==null?void 0:Te.toLowerCase().includes(pe))||((qe=ye.assessment_period)==null?void 0:qe.toLowerCase().includes(pe))})}return m.value&&(ue=ue.filter(pe=>pe.status===m.value)),g.value&&(ue=ue.filter(pe=>pe.assessment_period===g.value)),v.value&&(ue=ue.filter(pe=>pe.fiscal_year===v.value)),ue}),q=()=>{h.value="",m.value="",g.value="",v.value=""},N=()=>{a.value=!0;try{const ue=F.value.map(qe=>{var We,at;return{"Assessment ID":qe.assessment_id,"Assessment Name":qe.assessment_name,Period:qe.assessment_period,Year:qe.fiscal_year,Date:ae(qe.assessment_date),Status:qe.status,"Total Risks":((We=qe.risk_register)==null?void 0:We.length)||0,"Critical Risks":((at=qe.top_risks)==null?void 0:at.length)||0,"Average Risk Score":U(qe)}}),pe=[Object.keys(ue[0]).join(","),...ue.map(qe=>Object.values(qe).map(We=>`"${We}"`).join(","))].join(`
`),ye=new Blob([pe],{type:"text/csv"}),Me=window.URL.createObjectURL(ye),Te=document.createElement("a");Te.href=Me,Te.download=`risk-assessments-${new Date().toISOString().split("T")[0]}.csv`,Te.click(),window.URL.revokeObjectURL(Me)}finally{a.value=!1}},O=()=>{_.value.length===F.value.length?_.value=[]:_.value=F.value.map(ue=>ue.name)},V=ue=>{const pe=_.value.indexOf(ue);pe>-1?_.value.splice(pe,1):_.value.push(ue)},L=ue=>{x.value===ue?w.value=w.value==="asc"?"desc":"asc":(x.value=ue,w.value="asc")},U=ue=>{if(!ue.top_risks||ue.top_risks.length===0)return 0;const pe=ue.top_risks.reduce((ye,Me)=>ye+(Me.inherent_risk_score||0),0);return Math.round(pe/ue.top_risks.length)},G=ue=>ue>=20?"bg-red-500":ue>=15?"bg-orange-500":ue>=10?"bg-yellow-500":"bg-green-500",X=(ue,pe)=>{console.log("Show menu for assessment:",ue.name)},re=()=>{console.log("Bulk update status for selected assessments")},ee=()=>{console.log("Bulk export selected assessments")},de=()=>{console.log("Generate reports for selected assessments")},se=()=>{console.log("Bulk delete selected assessments")},te=()=>{c.value=null,f.value="create",d.value=!0},ne=ue=>{e.push(`/audit-planning/risk-assessment/${ue.name}`)},ce=ue=>{c.value=ue,f.value="edit",d.value=!0},ve=ue=>le(this,null,function*(){try{i.value=!0,f.value==="create"?yield n.createRiskAssessment(ue):yield n.updateRiskAssessment(c.value.name,ue),d.value=!1,yield K()}catch(pe){console.error("Error saving assessment:",pe)}finally{i.value=!1}}),Y=()=>{d.value=!1,c.value=null},K=()=>le(this,null,function*(){r.value=!0;try{yield n.fetchRiskAssessments()}catch(ue){console.error("Error refreshing data:",ue)}finally{r.value=!1}}),H=ue=>le(this,null,function*(){try{(yield n.fetchRiskAssessmentDetails(ue.name))&&e.push("/audit-planning/risk-assessment/new")}catch(pe){console.error("Error duplicating assessment:",pe)}}),ae=ue=>ue?new Date(ue).toLocaleDateString():"",be=ue=>({Planning:"secondary","In Progress":"warning",Review:"info",Finalized:"success",Approved:"success"})[ue]||"secondary";return Je(F,()=>{_.value=[]}),Je(h,()=>{}),Je(m,()=>{_.value=[]}),Je(g,()=>{_.value=[]}),Je(v,()=>{_.value=[]}),(ue,pe)=>(T(),P("div",pGt,[u("div",hGt,[u("div",null,[u("div",mGt,[u("div",gGt,[b(y(nn),{class:"h-6 w-6 text-red-600"})]),pe[15]||(pe[15]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Risk Assessments"),u("p",{class:"text-gray-600 mt-1"}," Conduct and manage comprehensive risk assessments with advanced analytics ")],-1))])]),u("div",vGt,[u("div",yGt,[u("div",bGt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:N,loading:a.value},{prefix:D(()=>[b(y(bn),{class:"h-3.5 w-3.5"})]),default:D(()=>[pe[16]||(pe[16]=W(" Export ",-1))]),_:1},8,["loading"])]),u("div",_Gt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:pe[0]||(pe[0]=ye=>s.value=!0)},{prefix:D(()=>[b(y(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[pe[17]||(pe[17]=W(" Templates ",-1))]),_:1})]),u("div",xGt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:K,loading:r.value},{prefix:D(()=>[b(y(hn),{class:"h-3.5 w-3.5"})]),default:D(()=>[pe[18]||(pe[18]=W(" Refresh ",-1))]),_:1},8,["loading"])]),u("div",wGt,[b(y(Z),{variant:"solid",theme:"red",size:"sm",onClick:te},{prefix:D(()=>[b(y(tt),{class:"h-3.5 w-3.5"})]),default:D(()=>[pe[19]||(pe[19]=W(" New Assessment ",-1))]),_:1})])])])]),b(fGt,{stats:$.value},null,8,["stats"]),b(wHt,{searchQuery:h.value,"onUpdate:searchQuery":pe[1]||(pe[1]=ye=>h.value=ye),filterStatus:m.value,"onUpdate:filterStatus":pe[2]||(pe[2]=ye=>m.value=ye),filterPeriod:g.value,"onUpdate:filterPeriod":pe[3]||(pe[3]=ye=>g.value=ye),filterYear:v.value,"onUpdate:filterYear":pe[4]||(pe[4]=ye=>v.value=ye),viewMode:p.value,selectedCount:_.value.length,filteredCount:F.value.length,totalCount:k.value.length,onBulkAction:pe[5]||(pe[5]=ye=>o.value=!0),onShowAnalytics:pe[6]||(pe[6]=ye=>l.value=!0),onToggleView:pe[7]||(pe[7]=ye=>p.value=p.value==="table"?"cards":"table"),onClearFilters:q},null,8,["searchQuery","filterStatus","filterPeriod","filterYear","viewMode","selectedCount","filteredCount","totalCount"]),u("div",kGt,[u("div",SGt,[u("div",CGt,[pe[20]||(pe[20]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Risk Assessments",-1)),u("div",AGt,[p.value==="table"&&F.value.length>0?(T(),P("div",TGt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:O},{default:D(()=>[W(E(_.value.length===F.value.length?"Deselect All":"Select All"),1)]),_:1})])):ie("",!0)])])]),p.value==="table"?(T(),P("div",EGt,[u("table",MGt,[u("thead",$Gt,[u("tr",null,[u("th",DGt,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-red-600 focus:ring-red-500",checked:_.value.length===F.value.length&&F.value.length>0,onChange:O},null,40,RGt)]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:pe[8]||(pe[8]=ye=>L("assessment_id"))},[u("div",PGt,[pe[21]||(pe[21]=u("span",null,"Assessment ID",-1)),b(y(Yu),{class:"h-3 w-3"})])]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:pe[9]||(pe[9]=ye=>L("assessment_name"))},[u("div",IGt,[pe[22]||(pe[22]=u("span",null,"Name",-1)),b(y(Yu),{class:"h-3 w-3"})])]),pe[23]||(pe[23]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Period ",-1)),pe[24]||(pe[24]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Risk Score ",-1)),pe[25]||(pe[25]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Critical Risks ",-1)),pe[26]||(pe[26]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),pe[27]||(pe[27]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",OGt,[(T(!0),P(_e,null,we(F.value,ye=>{var Me,Te,qe;return T(),P("tr",{key:ye.name,class:fe(["hover:bg-gray-50 transition-colors",{"bg-red-50":_.value.includes(ye.name)}])},[u("td",LGt,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-red-600 focus:ring-red-500",checked:_.value.includes(ye.name),onChange:We=>V(ye.name)},null,40,VGt)]),u("td",NGt,[u("div",jGt,[u("div",FGt,[u("div",BGt,E(((Te=(Me=ye.assessment_id)==null?void 0:Me.charAt(0))==null?void 0:Te.toUpperCase())||"R"),1)]),u("div",zGt,[u("div",UGt,E(ye.assessment_id),1),u("div",HGt,E(ae(ye.assessment_date)),1)])])]),u("td",qGt,[u("div",WGt,E(ye.assessment_name),1),u("div",GGt,E(ye.fiscal_year),1)]),u("td",YGt,[u("div",KGt,E(ye.assessment_period),1)]),u("td",XGt,[u("div",ZGt,[u("span",QGt,E(U(ye)),1),u("div",JGt,[u("div",{class:fe(["h-1.5 rounded-full transition-all duration-300",G(U(ye))]),style:nt({width:`${Math.min(U(ye),25)*4}%`})},null,6)])])]),u("td",eYt,[u("div",tYt,[u("span",nYt,E(((qe=ye.top_risks)==null?void 0:qe.length)||0),1),pe[28]||(pe[28]=u("span",{class:"text-xs text-red-600"},"critical",-1))])]),u("td",rYt,[b(y(Ee),{variant:be(ye.status),size:"sm",class:"font-medium"},{default:D(()=>[W(E(ye.status),1)]),_:2},1032,["variant"])]),u("td",iYt,[u("div",aYt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:We=>ne(ye),class:"!p-1.5"},{default:D(()=>[b(y(ar),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:We=>ce(ye),class:"!p-1.5"},{default:D(()=>[b(y(vn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:We=>H(ye),class:"!p-1.5"},{default:D(()=>[b(y(qs),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:We=>X(ye),class:"!p-1.5"},{default:D(()=>[b(y(O0),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"])])])],2)}),128))])])])):(T(),P("div",sYt,[u("div",oYt,[(T(!0),P(_e,null,we(F.value,ye=>{var Me,Te,qe,We;return T(),P("div",{key:ye.name,class:fe(["bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",{"ring-2 ring-red-500 bg-red-50":_.value.includes(ye.name)}]),onClick:at=>V(ye.name)},[u("div",uYt,[u("div",dYt,[u("div",cYt,E(((Te=(Me=ye.assessment_id)==null?void 0:Me.charAt(0))==null?void 0:Te.toUpperCase())||"R"),1),u("div",null,[u("h3",fYt,E(ye.assessment_name),1),u("p",pYt,E(ye.assessment_period)+" "+E(ye.fiscal_year),1)])]),b(y(Ee),{variant:be(ye.status),size:"sm",class:"font-medium"},{default:D(()=>[W(E(ye.status),1)]),_:2},1032,["variant"])]),u("div",hYt,[u("div",null,[u("div",mYt,[pe[29]||(pe[29]=u("span",{class:"text-sm text-gray-600"},"Risk Score",-1)),u("span",gYt,E(U(ye)),1)]),u("div",vYt,[u("div",{class:"bg-red-500 h-2 rounded-full transition-all duration-300",style:nt({width:`${Math.min(U(ye),25)*4}%`})},null,4)])]),u("div",yYt,[pe[30]||(pe[30]=u("span",{class:"text-sm text-gray-600"},"Critical Risks",-1)),u("span",bYt,E(((qe=ye.top_risks)==null?void 0:qe.length)||0),1)]),u("div",_Yt,[pe[31]||(pe[31]=u("span",{class:"text-sm text-gray-600"},"Total Risks",-1)),u("span",xYt,E(((We=ye.risk_register)==null?void 0:We.length)||0),1)])]),u("div",wYt,[u("div",kYt,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:dt(at=>ne(ye),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(ar),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:dt(at=>ce(ye),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(vn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:dt(at=>H(ye),["stop"]),class:"!p-1.5"},{default:D(()=>[b(y(qs),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"])]),u("div",SYt,E(ae(ye.modified)),1)])],10,lYt)}),128))])])),F.value.length===0&&k.value.length===0?(T(),P("div",CYt,[u("div",AYt,[b(y(nn),{class:"h-10 w-10 text-red-500"})]),u("div",TYt,[pe[34]||(pe[34]=u("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Welcome to Risk Assessments",-1)),pe[35]||(pe[35]=u("p",{class:"text-gray-600 mb-8 leading-relaxed"}," Conduct comprehensive risk assessments to identify, evaluate, and prioritize organizational risks. Build a robust risk management framework. ",-1)),u("div",EYt,[b(y(Z),{variant:"solid",theme:"red",size:"lg",onClick:te,class:"shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(y(tt),{class:"h-5 w-5"})]),default:D(()=>[pe[32]||(pe[32]=W(" Create Your First Assessment ",-1))]),_:1}),b(y(Z),{variant:"outline",theme:"gray",size:"lg",onClick:pe[10]||(pe[10]=ye=>s.value=!0),class:"border-gray-300 hover:border-gray-400"},{prefix:D(()=>[b(y(vt),{class:"h-5 w-5"})]),default:D(()=>[pe[33]||(pe[33]=W(" Browse Templates ",-1))]),_:1})])]),pe[36]||(pe[36]=ur('<div class="mt-12 max-w-2xl mx-auto"><div class="bg-gray-50 border border-gray-200 rounded-xl p-6"><h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center"><div class="h-2 w-2 bg-red-500 rounded-full mr-3"></div> Quick Start Tips </h4><div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-red-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-red-600 font-semibold text-xs">1</span></div><div><p class="font-medium text-gray-900">Define Scope</p><p class="text-gray-600">Set clear assessment boundaries and objectives</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-orange-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-orange-600 font-semibold text-xs">2</span></div><div><p class="font-medium text-gray-900">Identify Risks</p><p class="text-gray-600">Use multiple methodologies to identify risks</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-green-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-green-600 font-semibold text-xs">3</span></div><div><p class="font-medium text-gray-900">Assess &amp; Prioritize</p><p class="text-gray-600">Evaluate impact and likelihood for prioritization</p></div></div></div></div></div>',1))])):F.value.length===0?(T(),P("div",MYt,[b(y(Rn),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),pe[38]||(pe[38]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No assessments found",-1)),pe[39]||(pe[39]=u("p",{class:"text-gray-600 mb-6"}," Try adjusting your search or filter criteria to find the assessments you're looking for. ",-1)),u("div",$Yt,[b(y(Z),{variant:"solid",theme:"gray",onClick:q},{default:D(()=>[...pe[37]||(pe[37]=[W(" Clear Filters ",-1)])]),_:1})])])):ie("",!0)]),b(y(zt),{modelValue:s.value,"onUpdate:modelValue":pe[11]||(pe[11]=ye=>s.value=ye),title:"Assessment Templates",options:{size:"custom",width:"70vw"}},{body:D(()=>[u("div",DYt,[pe[46]||(pe[46]=u("div",{class:"bg-red-50 border border-red-200 rounded-lg p-4"},[u("p",{class:"text-red-800 text-sm"},[W("  "),u("strong",null,"Pro Tip:"),W(" Templates provide a structured starting point with predefined risk categories and assessment methodologies. ")])],-1)),u("div",RYt,[u("div",PYt,[u("div",IYt,[u("div",OYt,[b(y(nn),{class:"h-6 w-6 text-red-600"})]),pe[40]||(pe[40]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-red-900 transition-colors"},"Comprehensive Risk Assessment"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Complete risk assessment covering all major risk categories")],-1))]),pe[42]||(pe[42]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-red-400 rounded-full"}),u("span",null,"Strategic risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-red-400 rounded-full"}),u("span",null,"Operational risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-red-400 rounded-full"}),u("span",null,"Financial risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-red-400 rounded-full"}),u("span",null,"Compliance risks")])])],-1)),b(y(Z),{variant:"solid",theme:"red",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[pe[41]||(pe[41]=W(" Use This Template ",-1))]),_:1})]),u("div",LYt,[u("div",VYt,[u("div",NYt,[b(y(cr),{class:"h-6 w-6 text-orange-600"})]),pe[43]||(pe[43]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-orange-900 transition-colors"},"IT Risk Assessment"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Technology-focused risk assessment with cybersecurity emphasis")],-1))]),pe[45]||(pe[45]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-orange-400 rounded-full"}),u("span",null,"Cybersecurity risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-orange-400 rounded-full"}),u("span",null,"Data privacy risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-orange-400 rounded-full"}),u("span",null,"System availability risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-orange-400 rounded-full"}),u("span",null,"Technology change risks")])])],-1)),b(y(Z),{variant:"solid",theme:"gray",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow bg-orange-500 hover:bg-orange-600 text-white border-orange-500"},{prefix:D(()=>[b(y(cr),{class:"h-4 w-4"})]),default:D(()=>[pe[44]||(pe[44]=W(" Use This Template ",-1))]),_:1})])])])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:o.value,"onUpdate:modelValue":pe[12]||(pe[12]=ye=>o.value=ye),title:"Bulk Actions",size:"xl"},{body:D(()=>[u("div",jYt,[u("div",FYt,[u("p",BYt,[u("span",zYt,E(_.value.length),1),pe[47]||(pe[47]=W(" assessment(s) selected for bulk action. ",-1))])]),u("div",UYt,[u("div",HYt,[b(y(Z),{variant:"solid",theme:"green",class:"h-20 w-full",onClick:re},{default:D(()=>[u("div",qYt,[b(y(Gt),{class:"h-5 w-5"}),pe[48]||(pe[48]=u("span",{class:"text-sm font-medium"},"Update Status",-1))])]),_:1})]),u("div",WYt,[b(y(Z),{variant:"solid",theme:"blue",class:"h-20 w-full",onClick:ee},{default:D(()=>[u("div",GYt,[b(y(bn),{class:"h-5 w-5"}),pe[49]||(pe[49]=u("span",{class:"text-sm font-medium"},"Export Selected",-1))])]),_:1})]),u("div",YYt,[b(y(Z),{variant:"solid",theme:"purple",class:"h-20 w-full",onClick:de},{default:D(()=>[u("div",KYt,[b(y(vt),{class:"h-5 w-5"}),pe[50]||(pe[50]=u("span",{class:"text-sm font-medium"},"Generate Reports",-1))])]),_:1})]),u("div",XYt,[b(y(Z),{variant:"solid",theme:"red",class:"h-20 w-full",onClick:se},{default:D(()=>[u("div",ZYt,[b(y(Zr),{class:"h-5 w-5"}),pe[51]||(pe[51]=u("span",{class:"text-sm font-medium"},"Delete Selected",-1))])]),_:1})])])])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:l.value,"onUpdate:modelValue":pe[13]||(pe[13]=ye=>l.value=ye),title:"Risk Analytics Dashboard",size:"5xl"},{body:D(()=>[u("div",QYt,[u("div",JYt,[u("div",eKt,[pe[55]||(pe[55]=u("h3",{class:"text-lg font-semibold text-red-900 mb-4"},"Risk Distribution",-1)),u("div",tKt,[u("div",nKt,[pe[52]||(pe[52]=u("span",{class:"text-red-700"},"Critical Risks",-1)),u("span",rKt,E(S.value),1)]),u("div",iKt,[pe[53]||(pe[53]=u("span",{class:"text-red-700"},"High Risks",-1)),u("span",aKt,E(C.value),1)]),u("div",sKt,[pe[54]||(pe[54]=u("span",{class:"text-red-700"},"Medium Risks",-1)),u("span",oKt,E(R.value),1)])])]),u("div",lKt,[pe[59]||(pe[59]=u("h3",{class:"text-lg font-semibold text-orange-900 mb-4"},"Assessment Progress",-1)),u("div",uKt,[u("div",dKt,[pe[56]||(pe[56]=u("span",{class:"text-orange-700"},"Completed",-1)),u("span",cKt,E(A.value),1)]),u("div",fKt,[pe[57]||(pe[57]=u("span",{class:"text-orange-700"},"In Progress",-1)),u("span",pKt,E(I.value),1)]),u("div",hKt,[pe[58]||(pe[58]=u("span",{class:"text-orange-700"},"Planning",-1)),u("span",mKt,E(B.value),1)])])]),u("div",gKt,[pe[63]||(pe[63]=u("h3",{class:"text-lg font-semibold text-purple-900 mb-4"},"Risk Trends",-1)),u("div",vKt,[u("div",yKt,[pe[60]||(pe[60]=u("span",{class:"text-purple-700"},"Average Score",-1)),u("span",bKt,E(M.value),1)]),u("div",_Kt,[pe[61]||(pe[61]=u("span",{class:"text-purple-700"},"Trend",-1)),u("span",xKt,E(j.value),1)]),u("div",wKt,[pe[62]||(pe[62]=u("span",{class:"text-purple-700"},"Top Category",-1)),u("span",kKt,E(z.value),1)])])])]),pe[64]||(pe[64]=u("div",{class:"bg-white border border-gray-200 rounded-lg p-6"},[u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Heat Map"),u("div",{class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},[u("p",{class:"text-gray-500"},"Risk heat map visualization would be displayed here")])],-1))])]),_:1},8,["modelValue"]),b(UWt,{modelValue:d.value,"onUpdate:modelValue":pe[14]||(pe[14]=ye=>d.value=ye),assessment:c.value,mode:f.value,onSubmit:ve,onCancel:Y},null,8,["modelValue","assessment","mode"])]))}},CKt={class:"space-y-6"},AKt={class:"flex items-center justify-between"},TKt={class:"flex items-center space-x-3"},EKt={class:"bg-white rounded-lg border border-gray-200"},MKt={class:"border-b border-gray-200"},$Kt={class:"flex overflow-x-auto"},DKt=["onClick"],RKt={class:"p-6"},PKt={key:0,class:"space-y-6"},IKt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},OKt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},LKt={class:"space-y-4"},VKt={class:"space-y-4"},NKt={class:"flex flex-wrap gap-2"},jKt={key:1,class:"space-y-6"},FKt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},BKt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},zKt={class:"space-y-4"},UKt={class:"space-y-2"},HKt={class:"flex items-center justify-between"},qKt={class:"flex items-center justify-between"},WKt={class:"flex items-center justify-between"},GKt={class:"space-y-4"},YKt={class:"flex items-center justify-between"},KKt={key:2,class:"space-y-6"},XKt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},ZKt={class:"space-y-6"},QKt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},JKt={class:"space-y-4"},eXt={class:"flex items-center justify-between"},tXt={class:"space-y-4"},nXt={class:"flex items-center justify-between"},rXt={class:"border-t pt-6"},iXt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},aXt={class:"space-y-4"},sXt={class:"space-y-4"},oXt={class:"flex items-center justify-between"},lXt={key:3,class:"space-y-6"},uXt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},dXt={class:"space-y-6"},cXt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},fXt={class:"flex items-center space-x-3"},pXt={class:"p-2 bg-blue-100 rounded-lg"},hXt={class:"text-sm font-medium text-gray-900"},mXt={class:"text-xs text-gray-500"},gXt={class:"border-t pt-6"},vXt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},yXt={class:"border-t pt-6"},bXt={class:"space-y-4"},_Xt={class:"flex items-center justify-between"},xXt={class:"flex items-center space-x-2"},wXt={key:1,class:"text-sm text-gray-600"},kXt={class:"flex items-center justify-between"},SXt={class:"flex items-center justify-between"},CXt={key:4,class:"space-y-6"},AXt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},TXt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},EXt={class:"space-y-4"},MXt={class:"space-y-4"},$Xt={class:"flex items-center justify-between"},DXt={class:"flex items-center justify-between"},RXt={class:"flex items-center justify-between"},PXt={class:"flex items-center justify-between"},IXt={key:5,class:"space-y-6"},OXt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},LXt={class:"space-y-6"},VXt={class:"space-y-4"},NXt={class:"flex items-center justify-between"},jXt={class:"flex items-center space-x-2"},FXt={class:"space-y-2"},BXt={class:"flex items-center justify-between"},zXt={class:"flex items-center space-x-2"},UXt={class:"flex items-center space-x-2"},HXt={class:"flex items-center space-x-2"},qXt={class:"border-t pt-6"},WXt={class:"space-y-4"},GXt={class:"flex items-center justify-between"},YXt={class:"flex items-center justify-between"},KXt={class:"flex items-center space-x-2"},XXt={key:1,class:"text-sm text-gray-600"},ZXt={key:6,class:"space-y-6"},QXt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},JXt={class:"space-y-4"},eZt={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},tZt={class:"flex items-center space-x-3"},nZt={class:"p-2 bg-blue-100 rounded-lg"},rZt={class:"flex items-center space-x-2"},iZt={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},aZt={class:"flex items-center space-x-3"},sZt={class:"p-2 bg-green-100 rounded-lg"},oZt={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},lZt={class:"flex items-center space-x-3"},uZt={class:"p-2 bg-purple-100 rounded-lg"},dZt={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},cZt={class:"flex items-center space-x-3"},fZt={class:"p-2 bg-orange-100 rounded-lg"},pZt={class:"flex items-center space-x-2"},hZt={key:7,class:"space-y-6"},mZt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},gZt={class:"space-y-6"},vZt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},yZt={class:"space-y-4"},bZt={class:"flex items-center justify-between"},_Zt={class:"space-y-4"},xZt={class:"flex items-center justify-between"},wZt={class:"border-t pt-6"},kZt={class:"space-y-3"},SZt={class:"flex items-center space-x-3"},CZt={class:"text-sm font-medium text-gray-900"},AZt={class:"text-xs text-gray-500"},TZt={class:"flex items-center space-x-2"},EZt={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},MZt={class:"flex justify-between items-center"},$Zt={class:"text-sm text-gray-600"},DZt={class:"flex space-x-3"},fW={__name:"Settings",props:{defaultTab:{type:String,default:"general"}},setup(t){const n=Q(t.defaultTab),r=Q(!1),i=Q({systemName:"Internal Audit Management System",organizationName:"",dateFormat:"MM/dd/yyyy",timezone:"UTC",auditYearStart:"January",currency:"KES",workingDays:["monday","tuesday","wednesday","thursday","friday"],riskThresholds:{high:80,medium:50},auditPlanningPeriod:"quarterly",autoAssignTasks:!1,defaultFindingSeverity:"medium",followUpReminderDays:30,requireManagementResponse:!0,defaultImportType:"csv",csvDelimiter:",",autoDetectEncoding:!0,maxFileSize:50,importBatchSize:1e3,validateOnImport:!0,bcApiEndpoint:"",bcCompanyName:"",bcSyncFrequency:"daily",bcAutoSync:!1,enabledRegulatoryBodies:["kra","cmak"],taxFilingPeriod:"annually",auditReportPeriod:"annually",complianceReviewPeriod:"quarterly",deadlineAlerts:!0,deadlineAlertDays:7,violationAlerts:!0,escalationAlerts:!0,theme:"light",language:"en",dashboardLayout:"grid",emailNotifications:!0,pushNotifications:!1,autoSave:!0,compactMode:!1,twoFactorEnabled:!1,sessionTimeout:"30",passwordPolicy:{minLength:8,requireUppercase:!0,requireNumbers:!0,requireSpecialChars:!1},auditDataEncryption:!0,dataRetentionEnabled:!0,dataRetentionYears:7,accessLogging:"detailed",bcIntegration:!1,apiAccess:!1,defaultReportFormat:"pdf",chartLibrary:"chartjs",autoGenerateReports:!1,reportRetentionPeriod:"1year",dashboardRefreshRate:"5min",exportRawData:!1,lastUpdated:new Date().toISOString()}),a=[{id:"general",name:"General",icon:So},{id:"audit",name:"Audit",icon:aw},{id:"data-import",name:"Data Import",icon:ri},{id:"compliance",name:"Compliance",icon:Ti},{id:"preferences",name:"Preferences",icon:Ro},{id:"security",name:"Security",icon:Ku},{id:"integrations",name:"Integrations",icon:qL},{id:"reports",name:"Reports",icon:cr}],s=[{label:"MM/DD/YYYY",value:"MM/dd/yyyy"},{label:"DD/MM/YYYY",value:"dd/MM/yyyy"},{label:"YYYY-MM-DD",value:"yyyy-MM-dd"}],o=[{label:"UTC",value:"UTC"},{label:"EAT (UTC+3)",value:"EAT"},{label:"EST (UTC-5)",value:"EST"},{label:"PST (UTC-8)",value:"PST"},{label:"GMT",value:"GMT"}],l=[{label:"January",value:"January"},{label:"February",value:"February"},{label:"March",value:"March"},{label:"April",value:"April"},{label:"May",value:"May"},{label:"June",value:"June"},{label:"July",value:"July"},{label:"August",value:"August"},{label:"September",value:"September"},{label:"October",value:"October"},{label:"November",value:"November"},{label:"December",value:"December"}],d=[{label:"Kenyan Shilling (KES)",value:"KES"},{label:"US Dollar (USD)",value:"USD"},{label:"Euro (EUR)",value:"EUR"},{label:"British Pound (GBP)",value:"GBP"}],c=[{value:"monday",label:"Mon"},{value:"tuesday",label:"Tue"},{value:"wednesday",label:"Wed"},{value:"thursday",label:"Thu"},{value:"friday",label:"Fri"},{value:"saturday",label:"Sat"},{value:"sunday",label:"Sun"}],f=[{label:"Monthly",value:"monthly"},{label:"Quarterly",value:"quarterly"},{label:"Semi-annually",value:"semi-annual"},{label:"Annually",value:"annually"}],p=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Critical",value:"critical"}],h=[{label:"CSV",value:"csv"},{label:"Excel",value:"excel"},{label:"JSON",value:"json"},{label:"XML",value:"xml"}],m=[{label:"Comma (,)",value:","},{label:"Semicolon (;)",value:";"},{label:"Tab",value:"	"},{label:"Pipe (|)",value:"|"}],g=[{label:"Real-time",value:"realtime"},{label:"Hourly",value:"hourly"},{label:"Daily",value:"daily"},{label:"Weekly",value:"weekly"}],v=[{id:"kra",name:"Kenya Revenue Authority",description:"Tax collection and administration",icon:Ti},{id:"cmak",name:"CMA Kenya",description:"Capital Markets Authority",icon:Ti},{id:"cbk",name:"Central Bank of Kenya",description:"Financial sector regulation",icon:Ti},{id:"ira",name:"Insurance Regulatory Authority",description:"Insurance sector oversight",icon:Ti},{id:"rba",name:"Retirement Benefits Authority",description:"Pension schemes regulation",icon:Ti},{id:"ppra",name:"Public Procurement Regulatory Authority",description:"Public procurement oversight",icon:Ti}],_=[{label:"Monthly",value:"monthly"},{label:"Quarterly",value:"quarterly"},{label:"Semi-annually",value:"semi-annual"},{label:"Annually",value:"annually"}],x=[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"Auto",value:"auto"}],w=[{label:"English",value:"en"},{label:"Swahili",value:"sw"},{label:"Spanish",value:"es"},{label:"French",value:"fr"}],k=[{label:"Grid",value:"grid"},{label:"List",value:"list"},{label:"Cards",value:"cards"}],S=[{label:"15 minutes",value:"15"},{label:"30 minutes",value:"30"},{label:"1 hour",value:"60"},{label:"4 hours",value:"240"},{label:"8 hours",value:"480"}],C=[{label:"None",value:"none"},{label:"Basic",value:"basic"},{label:"Detailed",value:"detailed"},{label:"Full Audit",value:"full"}],A=[{label:"PDF",value:"pdf"},{label:"Excel",value:"excel"},{label:"Word",value:"word"},{label:"HTML",value:"html"}],M=[{label:"Chart.js",value:"chartjs"},{label:"D3.js",value:"d3"},{label:"Highcharts",value:"highcharts"}],$=[{label:"6 months",value:"6months"},{label:"1 year",value:"1year"},{label:"2 years",value:"2years"},{label:"5 years",value:"5years"},{label:"10 years",value:"10years"}],R=[{label:"30 seconds",value:"30sec"},{label:"1 minute",value:"1min"},{label:"5 minutes",value:"5min"},{label:"15 minutes",value:"15min"},{label:"1 hour",value:"1hour"}],I=[{id:"audit-summary",name:"Audit Summary Report",description:"Comprehensive audit findings and recommendations",icon:aw,enabled:!0},{id:"compliance-status",name:"Compliance Status Report",description:"Regulatory compliance status and gaps",icon:Ti,enabled:!0},{id:"risk-assessment",name:"Risk Assessment Report",description:"Risk analysis and mitigation strategies",icon:cr,enabled:!0},{id:"financial-audit",name:"Financial Audit Report",description:"Financial controls and transaction reviews",icon:ri,enabled:!1}],B=()=>{i.value.twoFactorEnabled=!i.value.twoFactorEnabled},j=()=>{i.value.bcIntegration=!i.value.bcIntegration},z=()=>{i.value.apiAccess=!i.value.apiAccess},F=()=>le(this,null,function*(){r.value=!0;try{i.value.lastUpdated=new Date().toISOString(),console.log("Saving settings:",i.value),yield new Promise(O=>setTimeout(O,1e3)),alert("Settings saved successfully!")}catch(O){console.error("Error saving settings:",O),alert("Error saving settings. Please try again.")}finally{r.value=!1}}),q=()=>{confirm("Are you sure you want to reset all settings to defaults? This action cannot be undone.")&&console.log("Resetting to defaults")},N=O=>O?new Date(O).toLocaleString():"Never";return(O,V)=>(T(),P("div",CKt,[u("div",AKt,[V[56]||(V[56]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"System Settings"),u("p",{class:"text-gray-600 mt-1"}," Configure audit system preferences, data imports, and compliance settings ")],-1)),u("div",TKt,[b(y(Z),{variant:"outline"},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),V[54]||(V[54]=W(" Export Settings ",-1))]),_:1}),b(y(Z),{variant:"outline"},{default:D(()=>[b(y(ps),{class:"h-4 w-4 mr-2"}),V[55]||(V[55]=W(" Import Settings ",-1))]),_:1})])]),u("div",EKt,[u("div",MKt,[u("nav",$Kt,[(T(),P(_e,null,we(a,L=>u("button",{key:L.id,class:fe(["px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors",n.value===L.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]),onClick:U=>n.value=L.id},[(T(),he(Lt(L.icon),{class:"h-4 w-4 mr-2 inline"})),W(" "+E(L.name),1)],10,DKt)),64))])]),u("div",RKt,[n.value==="general"?(T(),P("div",PKt,[u("div",null,[u("h3",IKt,[b(y(So),{class:"h-5 w-5 mr-2"}),V[57]||(V[57]=W(" General Settings ",-1))]),u("div",OKt,[u("div",LKt,[u("div",null,[V[58]||(V[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"System Name",-1)),b(y(En),{modelValue:i.value.systemName,"onUpdate:modelValue":V[0]||(V[0]=L=>i.value.systemName=L),placeholder:"Internal Audit Management System",class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[59]||(V[59]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organization Name",-1)),b(y(En),{modelValue:i.value.organizationName,"onUpdate:modelValue":V[1]||(V[1]=L=>i.value.organizationName=L),placeholder:"Your Organization Name",class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[60]||(V[60]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Date Format",-1)),b(y(Ke),{modelValue:i.value.dateFormat,"onUpdate:modelValue":V[2]||(V[2]=L=>i.value.dateFormat=L),options:s,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[61]||(V[61]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Timezone",-1)),b(y(Ke),{modelValue:i.value.timezone,"onUpdate:modelValue":V[3]||(V[3]=L=>i.value.timezone=L),options:o,class:"w-full"},null,8,["modelValue"])])]),u("div",VKt,[u("div",null,[V[62]||(V[62]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Audit Year Start",-1)),b(y(Ke),{modelValue:i.value.auditYearStart,"onUpdate:modelValue":V[4]||(V[4]=L=>i.value.auditYearStart=L),options:l,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[63]||(V[63]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Currency",-1)),b(y(Ke),{modelValue:i.value.currency,"onUpdate:modelValue":V[5]||(V[5]=L=>i.value.currency=L),options:d,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[64]||(V[64]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Working Days",-1)),u("div",NKt,[(T(),P(_e,null,we(c,L=>b(y(Ut),{key:L.value,modelValue:i.value.workingDays,"onUpdate:modelValue":V[6]||(V[6]=U=>i.value.workingDays=U),value:L.value,label:L.label,class:"text-sm"},null,8,["modelValue","value","label"])),64))])])])])])])):ie("",!0),n.value==="audit"?(T(),P("div",jKt,[u("div",null,[u("h3",FKt,[b(y(aw),{class:"h-5 w-5 mr-2"}),V[65]||(V[65]=W(" Audit Configuration ",-1))]),u("div",BKt,[u("div",zKt,[u("div",null,[V[70]||(V[70]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Risk Assessment Thresholds",-1)),u("div",UKt,[u("div",HKt,[V[66]||(V[66]=u("span",{class:"text-sm text-gray-600"},"High Risk",-1)),b(y(En),{modelValue:i.value.riskThresholds.high,"onUpdate:modelValue":V[7]||(V[7]=L=>i.value.riskThresholds.high=L),type:"number",min:"0",max:"100",class:"w-20"},null,8,["modelValue"]),V[67]||(V[67]=u("span",{class:"text-sm text-gray-600"},"%",-1))]),u("div",qKt,[V[68]||(V[68]=u("span",{class:"text-sm text-gray-600"},"Medium Risk",-1)),b(y(En),{modelValue:i.value.riskThresholds.medium,"onUpdate:modelValue":V[8]||(V[8]=L=>i.value.riskThresholds.medium=L),type:"number",min:"0",max:"100",class:"w-20"},null,8,["modelValue"]),V[69]||(V[69]=u("span",{class:"text-sm text-gray-600"},"%",-1))])])]),u("div",null,[V[71]||(V[71]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Audit Planning Period",-1)),b(y(Ke),{modelValue:i.value.auditPlanningPeriod,"onUpdate:modelValue":V[9]||(V[9]=L=>i.value.auditPlanningPeriod=L),options:f,class:"w-full"},null,8,["modelValue"])]),u("div",WKt,[V[72]||(V[72]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-assign Audit Tasks"),u("p",{class:"text-sm text-gray-500"},"Automatically assign tasks based on workload")],-1)),b(y(Ut),{modelValue:i.value.autoAssignTasks,"onUpdate:modelValue":V[10]||(V[10]=L=>i.value.autoAssignTasks=L)},null,8,["modelValue"])])]),u("div",GKt,[u("div",null,[V[73]||(V[73]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Finding Severity",-1)),b(y(Ke),{modelValue:i.value.defaultFindingSeverity,"onUpdate:modelValue":V[11]||(V[11]=L=>i.value.defaultFindingSeverity=L),options:p,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[74]||(V[74]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Follow-up Reminder Days",-1)),b(y(En),{modelValue:i.value.followUpReminderDays,"onUpdate:modelValue":V[12]||(V[12]=L=>i.value.followUpReminderDays=L),type:"number",min:"1",max:"365",class:"w-full"},null,8,["modelValue"])]),u("div",YKt,[V[75]||(V[75]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Require Management Response"),u("p",{class:"text-sm text-gray-500"},"Management must respond to all findings")],-1)),b(y(Ut),{modelValue:i.value.requireManagementResponse,"onUpdate:modelValue":V[13]||(V[13]=L=>i.value.requireManagementResponse=L)},null,8,["modelValue"])])])])])])):ie("",!0),n.value==="data-import"?(T(),P("div",KKt,[u("div",null,[u("h3",XKt,[b(y(ri),{class:"h-5 w-5 mr-2"}),V[76]||(V[76]=W(" Data Import Configuration ",-1))]),u("div",ZKt,[u("div",QKt,[u("div",JKt,[u("div",null,[V[77]||(V[77]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Import Type",-1)),b(y(Ke),{modelValue:i.value.defaultImportType,"onUpdate:modelValue":V[14]||(V[14]=L=>i.value.defaultImportType=L),options:h,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[78]||(V[78]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"CSV Delimiter",-1)),b(y(Ke),{modelValue:i.value.csvDelimiter,"onUpdate:modelValue":V[15]||(V[15]=L=>i.value.csvDelimiter=L),options:m,class:"w-full"},null,8,["modelValue"])]),u("div",eXt,[V[79]||(V[79]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-detect Encoding"),u("p",{class:"text-sm text-gray-500"},"Automatically detect file encoding")],-1)),b(y(Ut),{modelValue:i.value.autoDetectEncoding,"onUpdate:modelValue":V[16]||(V[16]=L=>i.value.autoDetectEncoding=L)},null,8,["modelValue"])])]),u("div",tXt,[u("div",null,[V[80]||(V[80]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Max File Size (MB)",-1)),b(y(En),{modelValue:i.value.maxFileSize,"onUpdate:modelValue":V[17]||(V[17]=L=>i.value.maxFileSize=L),type:"number",min:"1",max:"100",class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[81]||(V[81]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Import Batch Size",-1)),b(y(En),{modelValue:i.value.importBatchSize,"onUpdate:modelValue":V[18]||(V[18]=L=>i.value.importBatchSize=L),type:"number",min:"100",max:"10000",class:"w-full"},null,8,["modelValue"])]),u("div",nXt,[V[82]||(V[82]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Validate Data on Import"),u("p",{class:"text-sm text-gray-500"},"Perform data validation during import")],-1)),b(y(Ut),{modelValue:i.value.validateOnImport,"onUpdate:modelValue":V[19]||(V[19]=L=>i.value.validateOnImport=L)},null,8,["modelValue"])])])]),u("div",rXt,[V[87]||(V[87]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Business Central Integration",-1)),u("div",iXt,[u("div",aXt,[u("div",null,[V[83]||(V[83]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"BC API Endpoint",-1)),b(y(En),{modelValue:i.value.bcApiEndpoint,"onUpdate:modelValue":V[20]||(V[20]=L=>i.value.bcApiEndpoint=L),placeholder:"https://api.businesscentral.dynamics.com",class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[84]||(V[84]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Company Name",-1)),b(y(En),{modelValue:i.value.bcCompanyName,"onUpdate:modelValue":V[21]||(V[21]=L=>i.value.bcCompanyName=L),placeholder:"CRONUS International Ltd.",class:"w-full"},null,8,["modelValue"])])]),u("div",sXt,[u("div",null,[V[85]||(V[85]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sync Frequency",-1)),b(y(Ke),{modelValue:i.value.bcSyncFrequency,"onUpdate:modelValue":V[22]||(V[22]=L=>i.value.bcSyncFrequency=L),options:g,class:"w-full"},null,8,["modelValue"])]),u("div",oXt,[V[86]||(V[86]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-sync Enabled"),u("p",{class:"text-sm text-gray-500"},"Automatically sync data from BC")],-1)),b(y(Ut),{modelValue:i.value.bcAutoSync,"onUpdate:modelValue":V[23]||(V[23]=L=>i.value.bcAutoSync=L)},null,8,["modelValue"])])])])])])])])):ie("",!0),n.value==="compliance"?(T(),P("div",lXt,[u("div",null,[u("h3",uXt,[b(y(Ti),{class:"h-5 w-5 mr-2"}),V[88]||(V[88]=W(" Compliance Settings ",-1))]),u("div",dXt,[u("div",null,[V[89]||(V[89]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Kenyan Regulatory Bodies",-1)),u("div",cXt,[(T(),P(_e,null,we(v,L=>u("div",{key:L.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},[u("div",fXt,[u("div",pXt,[(T(),he(Lt(L.icon),{class:"h-4 w-4 text-blue-600"}))]),u("div",null,[u("p",hXt,E(L.name),1),u("p",mXt,E(L.description),1)])]),b(y(Ut),{modelValue:i.value.enabledRegulatoryBodies,"onUpdate:modelValue":V[24]||(V[24]=U=>i.value.enabledRegulatoryBodies=U),value:L.id},null,8,["modelValue","value"])])),64))])]),u("div",gXt,[V[93]||(V[93]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Compliance Periods",-1)),u("div",vXt,[u("div",null,[V[90]||(V[90]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tax Filing Period",-1)),b(y(Ke),{modelValue:i.value.taxFilingPeriod,"onUpdate:modelValue":V[25]||(V[25]=L=>i.value.taxFilingPeriod=L),options:_,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[91]||(V[91]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Audit Report Period",-1)),b(y(Ke),{modelValue:i.value.auditReportPeriod,"onUpdate:modelValue":V[26]||(V[26]=L=>i.value.auditReportPeriod=L),options:_,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[92]||(V[92]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Compliance Review Period",-1)),b(y(Ke),{modelValue:i.value.complianceReviewPeriod,"onUpdate:modelValue":V[27]||(V[27]=L=>i.value.complianceReviewPeriod=L),options:_,class:"w-full"},null,8,["modelValue"])])])]),u("div",yXt,[V[97]||(V[97]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Compliance Alerts",-1)),u("div",bXt,[u("div",_Xt,[V[94]||(V[94]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Deadline Alerts"),u("p",{class:"text-sm text-gray-500"},"Send alerts before compliance deadlines")],-1)),u("div",xXt,[b(y(Ut),{modelValue:i.value.deadlineAlerts,"onUpdate:modelValue":V[28]||(V[28]=L=>i.value.deadlineAlerts=L)},null,8,["modelValue"]),i.value.deadlineAlerts?(T(),he(y(En),{key:0,modelValue:i.value.deadlineAlertDays,"onUpdate:modelValue":V[29]||(V[29]=L=>i.value.deadlineAlertDays=L),type:"number",min:"1",max:"30",class:"w-16",placeholder:"7"},null,8,["modelValue"])):ie("",!0),i.value.deadlineAlerts?(T(),P("span",wXt,"days before")):ie("",!0)])]),u("div",kXt,[V[95]||(V[95]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Violation Alerts"),u("p",{class:"text-sm text-gray-500"},"Alert on compliance violations")],-1)),b(y(Ut),{modelValue:i.value.violationAlerts,"onUpdate:modelValue":V[30]||(V[30]=L=>i.value.violationAlerts=L)},null,8,["modelValue"])]),u("div",SXt,[V[96]||(V[96]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Escalation Alerts"),u("p",{class:"text-sm text-gray-500"},"Escalate unresolved compliance issues")],-1)),b(y(Ut),{modelValue:i.value.escalationAlerts,"onUpdate:modelValue":V[31]||(V[31]=L=>i.value.escalationAlerts=L)},null,8,["modelValue"])])])])])])])):ie("",!0),n.value==="preferences"?(T(),P("div",CXt,[u("div",null,[u("h3",AXt,[b(y(Ro),{class:"h-5 w-5 mr-2"}),V[98]||(V[98]=W(" User Preferences ",-1))]),u("div",TXt,[u("div",EXt,[u("div",null,[V[99]||(V[99]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Theme",-1)),b(y(Ke),{modelValue:i.value.theme,"onUpdate:modelValue":V[32]||(V[32]=L=>i.value.theme=L),options:x,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[100]||(V[100]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Language",-1)),b(y(Ke),{modelValue:i.value.language,"onUpdate:modelValue":V[33]||(V[33]=L=>i.value.language=L),options:w,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[101]||(V[101]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dashboard Layout",-1)),b(y(Ke),{modelValue:i.value.dashboardLayout,"onUpdate:modelValue":V[34]||(V[34]=L=>i.value.dashboardLayout=L),options:k,class:"w-full"},null,8,["modelValue"])])]),u("div",MXt,[u("div",$Xt,[V[102]||(V[102]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Email Notifications"),u("p",{class:"text-sm text-gray-500"},"Receive email notifications")],-1)),b(y(Ut),{modelValue:i.value.emailNotifications,"onUpdate:modelValue":V[35]||(V[35]=L=>i.value.emailNotifications=L)},null,8,["modelValue"])]),u("div",DXt,[V[103]||(V[103]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Push Notifications"),u("p",{class:"text-sm text-gray-500"},"Receive browser push notifications")],-1)),b(y(Ut),{modelValue:i.value.pushNotifications,"onUpdate:modelValue":V[36]||(V[36]=L=>i.value.pushNotifications=L)},null,8,["modelValue"])]),u("div",RXt,[V[104]||(V[104]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-save"),u("p",{class:"text-sm text-gray-500"},"Automatically save changes")],-1)),b(y(Ut),{modelValue:i.value.autoSave,"onUpdate:modelValue":V[37]||(V[37]=L=>i.value.autoSave=L)},null,8,["modelValue"])]),u("div",PXt,[V[105]||(V[105]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Compact Mode"),u("p",{class:"text-sm text-gray-500"},"Use compact UI elements")],-1)),b(y(Ut),{modelValue:i.value.compactMode,"onUpdate:modelValue":V[38]||(V[38]=L=>i.value.compactMode=L)},null,8,["modelValue"])])])])])])):ie("",!0),n.value==="security"?(T(),P("div",IXt,[u("div",null,[u("h3",OXt,[b(y(Ku),{class:"h-5 w-5 mr-2"}),V[106]||(V[106]=W(" Security Settings ",-1))]),u("div",LXt,[u("div",null,[V[114]||(V[114]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Authentication",-1)),u("div",VXt,[u("div",NXt,[V[107]||(V[107]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Two-Factor Authentication"),u("p",{class:"text-sm text-gray-500"},"Enable 2FA for enhanced security")],-1)),u("div",jXt,[b(y(Ee),{variant:i.value.twoFactorEnabled?"success":"secondary"},{default:D(()=>[W(E(i.value.twoFactorEnabled?"Enabled":"Disabled"),1)]),_:1},8,["variant"]),b(y(Z),{variant:"outline",size:"sm",onClick:B},{default:D(()=>[W(E(i.value.twoFactorEnabled?"Disable":"Enable"),1)]),_:1})])]),u("div",null,[V[108]||(V[108]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Session Timeout",-1)),b(y(Ke),{modelValue:i.value.sessionTimeout,"onUpdate:modelValue":V[39]||(V[39]=L=>i.value.sessionTimeout=L),options:S,class:"w-full md:w-64"},null,8,["modelValue"])]),u("div",null,[V[113]||(V[113]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Password Policy",-1)),u("div",FXt,[u("div",BXt,[V[109]||(V[109]=u("span",{class:"text-sm text-gray-600"},"Minimum Length",-1)),b(y(En),{modelValue:i.value.passwordPolicy.minLength,"onUpdate:modelValue":V[40]||(V[40]=L=>i.value.passwordPolicy.minLength=L),type:"number",min:"8",max:"32",class:"w-20"},null,8,["modelValue"])]),u("div",zXt,[b(y(Ut),{modelValue:i.value.passwordPolicy.requireUppercase,"onUpdate:modelValue":V[41]||(V[41]=L=>i.value.passwordPolicy.requireUppercase=L)},null,8,["modelValue"]),V[110]||(V[110]=u("span",{class:"text-sm text-gray-600"},"Require uppercase",-1))]),u("div",UXt,[b(y(Ut),{modelValue:i.value.passwordPolicy.requireNumbers,"onUpdate:modelValue":V[42]||(V[42]=L=>i.value.passwordPolicy.requireNumbers=L)},null,8,["modelValue"]),V[111]||(V[111]=u("span",{class:"text-sm text-gray-600"},"Require numbers",-1))]),u("div",HXt,[b(y(Ut),{modelValue:i.value.passwordPolicy.requireSpecialChars,"onUpdate:modelValue":V[43]||(V[43]=L=>i.value.passwordPolicy.requireSpecialChars=L)},null,8,["modelValue"]),V[112]||(V[112]=u("span",{class:"text-sm text-gray-600"},"Require special characters",-1))])])])])]),u("div",qXt,[V[118]||(V[118]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Data Security",-1)),u("div",WXt,[u("div",GXt,[V[115]||(V[115]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Audit Data Encryption"),u("p",{class:"text-sm text-gray-500"},"Encrypt sensitive audit data at rest")],-1)),b(y(Ut),{modelValue:i.value.auditDataEncryption,"onUpdate:modelValue":V[44]||(V[44]=L=>i.value.auditDataEncryption=L)},null,8,["modelValue"])]),u("div",YXt,[V[116]||(V[116]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Data Retention Policy"),u("p",{class:"text-sm text-gray-500"},"Automatically delete old audit data")],-1)),u("div",KXt,[b(y(Ut),{modelValue:i.value.dataRetentionEnabled,"onUpdate:modelValue":V[45]||(V[45]=L=>i.value.dataRetentionEnabled=L)},null,8,["modelValue"]),i.value.dataRetentionEnabled?(T(),he(y(En),{key:0,modelValue:i.value.dataRetentionYears,"onUpdate:modelValue":V[46]||(V[46]=L=>i.value.dataRetentionYears=L),type:"number",min:"1",max:"10",class:"w-16",placeholder:"7"},null,8,["modelValue"])):ie("",!0),i.value.dataRetentionEnabled?(T(),P("span",XXt,"years")):ie("",!0)])]),u("div",null,[V[117]||(V[117]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Access Logging",-1)),b(y(Ke),{modelValue:i.value.accessLogging,"onUpdate:modelValue":V[47]||(V[47]=L=>i.value.accessLogging=L),options:C,class:"w-full md:w-64"},null,8,["modelValue"])])])])])])])):ie("",!0),n.value==="integrations"?(T(),P("div",ZXt,[u("div",null,[u("h3",QXt,[b(y(qL),{class:"h-5 w-5 mr-2"}),V[119]||(V[119]=W(" Integrations ",-1))]),u("div",JXt,[u("div",eZt,[u("div",tZt,[u("div",nZt,[b(y(ri),{class:"h-5 w-5 text-blue-600"})]),V[120]||(V[120]=u("div",null,[u("h4",{class:"text-sm font-medium text-gray-900"},"Microsoft Business Central"),u("p",{class:"text-sm text-gray-500"},"Connect to Dynamics 365 Business Central for financial data")],-1))]),u("div",rZt,[b(y(Ee),{variant:i.value.bcIntegration?"success":"secondary"},{default:D(()=>[W(E(i.value.bcIntegration?"Connected":"Disconnected"),1)]),_:1},8,["variant"]),b(y(Z),{variant:"outline",size:"sm",onClick:j},{default:D(()=>[W(E(i.value.bcIntegration?"Disconnect":"Connect"),1)]),_:1})])]),u("div",iZt,[u("div",aZt,[u("div",sZt,[b(y(ofe),{class:"h-5 w-5 text-green-600"})]),V[121]||(V[121]=u("div",null,[u("h4",{class:"text-sm font-medium text-gray-900"},"Email Service"),u("p",{class:"text-sm text-gray-500"},"Configure email notifications and reports")],-1))]),b(y(Z),{variant:"outline",size:"sm"},{default:D(()=>[...V[122]||(V[122]=[W(" Configure ",-1)])]),_:1})]),u("div",oZt,[u("div",lZt,[u("div",uZt,[b(y(qD),{class:"h-5 w-5 text-purple-600"})]),V[123]||(V[123]=u("div",null,[u("h4",{class:"text-sm font-medium text-gray-900"},"Cloud Storage"),u("p",{class:"text-sm text-gray-500"},"Store audit files and backups in the cloud")],-1))]),b(y(Z),{variant:"outline",size:"sm"},{default:D(()=>[...V[124]||(V[124]=[W(" Configure ",-1)])]),_:1})]),u("div",dZt,[u("div",cZt,[u("div",fZt,[b(y(Wce),{class:"h-5 w-5 text-orange-600"})]),V[125]||(V[125]=u("div",null,[u("h4",{class:"text-sm font-medium text-gray-900"},"API Access"),u("p",{class:"text-sm text-gray-500"},"Enable API access for external integrations")],-1))]),u("div",pZt,[b(y(Ee),{variant:i.value.apiAccess?"success":"secondary"},{default:D(()=>[W(E(i.value.apiAccess?"Enabled":"Disabled"),1)]),_:1},8,["variant"]),b(y(Z),{variant:"outline",size:"sm",onClick:z},{default:D(()=>[W(E(i.value.apiAccess?"Disable":"Enable"),1)]),_:1})])])])])])):ie("",!0),n.value==="reports"?(T(),P("div",hZt,[u("div",null,[u("h3",mZt,[b(y(cr),{class:"h-5 w-5 mr-2"}),V[126]||(V[126]=W(" Reports & Analytics ",-1))]),u("div",gZt,[u("div",vZt,[u("div",yZt,[u("div",null,[V[127]||(V[127]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Report Format",-1)),b(y(Ke),{modelValue:i.value.defaultReportFormat,"onUpdate:modelValue":V[48]||(V[48]=L=>i.value.defaultReportFormat=L),options:A,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[128]||(V[128]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chart Library",-1)),b(y(Ke),{modelValue:i.value.chartLibrary,"onUpdate:modelValue":V[49]||(V[49]=L=>i.value.chartLibrary=L),options:M,class:"w-full"},null,8,["modelValue"])]),u("div",bZt,[V[129]||(V[129]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-generate Reports"),u("p",{class:"text-sm text-gray-500"},"Automatically generate periodic reports")],-1)),b(y(Ut),{modelValue:i.value.autoGenerateReports,"onUpdate:modelValue":V[50]||(V[50]=L=>i.value.autoGenerateReports=L)},null,8,["modelValue"])])]),u("div",_Zt,[u("div",null,[V[130]||(V[130]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Report Retention Period",-1)),b(y(Ke),{modelValue:i.value.reportRetentionPeriod,"onUpdate:modelValue":V[51]||(V[51]=L=>i.value.reportRetentionPeriod=L),options:$,class:"w-full"},null,8,["modelValue"])]),u("div",null,[V[131]||(V[131]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dashboard Refresh Rate",-1)),b(y(Ke),{modelValue:i.value.dashboardRefreshRate,"onUpdate:modelValue":V[52]||(V[52]=L=>i.value.dashboardRefreshRate=L),options:R,class:"w-full"},null,8,["modelValue"])]),u("div",xZt,[V[132]||(V[132]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Export Raw Data"),u("p",{class:"text-sm text-gray-500"},"Allow exporting raw audit data")],-1)),b(y(Ut),{modelValue:i.value.exportRawData,"onUpdate:modelValue":V[53]||(V[53]=L=>i.value.exportRawData=L)},null,8,["modelValue"])])])]),u("div",wZt,[V[134]||(V[134]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Report Templates",-1)),u("div",kZt,[(T(),P(_e,null,we(I,L=>u("div",{key:L.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},[u("div",SZt,[(T(),he(Lt(L.icon),{class:"h-4 w-4 text-gray-600"})),u("div",null,[u("p",CZt,E(L.name),1),u("p",AZt,E(L.description),1)])]),u("div",TZt,[b(y(Ee),{variant:L.enabled?"success":"secondary",size:"sm"},{default:D(()=>[W(E(L.enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"]),b(y(Z),{variant:"ghost",size:"sm"},{default:D(()=>[...V[133]||(V[133]=[W(" Configure ",-1)])]),_:1})])])),64))])])])])])):ie("",!0)]),u("div",EZt,[u("div",MZt,[u("div",$Zt," Last updated: "+E(N(i.value.lastUpdated)),1),u("div",DZt,[b(y(Z),{variant:"outline",onClick:q},{default:D(()=>[...V[135]||(V[135]=[W(" Reset to Defaults ",-1)])]),_:1}),b(y(Z),{onClick:F,loading:r.value},{default:D(()=>[b(y(Cr),{class:"h-4 w-4 mr-2"}),V[136]||(V[136]=W(" Save Changes ",-1))]),_:1},8,["loading"])])])])])]))}},RZt={class:"flex h-[75vh]"},PZt={class:"w-56 border-r pr-4 flex-shrink-0"},IZt={class:"space-y-1 sticky top-0"},OZt=["onClick"],LZt={class:"flex-1"},VZt={class:"mt-6 pt-6 border-t"},NZt={class:"w-full bg-gray-200 rounded-full h-2"},jZt={class:"text-xs text-gray-500 mt-1"},FZt={class:"flex-1 pl-6 overflow-y-auto"},BZt={class:"space-y-6"},zZt={class:"grid grid-cols-2 gap-6"},UZt={class:"space-y-6"},HZt={class:"grid grid-cols-3 gap-6"},qZt={class:"border rounded-lg p-4 bg-gray-50"},WZt={class:"grid grid-cols-2 gap-6"},GZt={class:"flex items-center gap-3"},YZt={class:"grid grid-cols-2 gap-6 mt-4"},KZt={class:"grid grid-cols-2 gap-6 mt-4"},XZt={class:"mt-4"},ZZt={class:"border-2 border-dashed rounded-lg p-4 text-center"},QZt={class:"space-y-6"},JZt={class:"grid grid-cols-2 gap-6"},eQt={class:"flex items-center gap-3 pt-6"},tQt={class:"grid grid-cols-3 gap-6"},nQt={class:"space-y-6"},rQt={class:"grid grid-cols-2 gap-6"},iQt={class:"grid grid-cols-2 gap-6"},aQt={class:"border rounded-lg p-4 bg-blue-50"},sQt={class:"flex items-center justify-between"},oQt={class:"text-xl font-bold text-blue-800"},lQt={class:"grid grid-cols-3 gap-6"},uQt={class:"flex items-center gap-3"},dQt={class:"space-y-6"},cQt={class:"border rounded-lg p-4"},fQt={class:"font-medium text-gray-700 mb-4 flex items-center gap-2"},pQt={class:"grid grid-cols-3 gap-6"},hQt={class:"grid grid-cols-2 gap-6 mt-4"},mQt={class:"flex items-center gap-3"},gQt={class:"border rounded-lg p-4"},vQt={class:"font-medium text-gray-700 mb-4 flex items-center gap-2"},yQt={class:"grid grid-cols-2 gap-6"},bQt={class:"flex items-center gap-3 mt-4"},_Qt={class:"space-y-6"},xQt={class:"border rounded-lg p-6 bg-gradient-to-r from-blue-50 to-purple-50"},wQt={class:"flex items-center justify-between mb-4"},kQt={class:"w-full bg-gray-200 rounded-full h-3"},SQt={class:"border rounded-lg overflow-hidden"},CQt={class:"bg-gray-50 px-4 py-3 border-b flex items-center justify-between"},AQt={class:"divide-y max-h-64 overflow-y-auto"},TQt={class:"grid grid-cols-12 gap-4 items-start"},EQt={class:"col-span-2"},MQt={class:"col-span-4"},$Qt={class:"col-span-2"},DQt={class:"col-span-2"},RQt={class:"col-span-2 flex justify-end"},PQt={key:0,class:"mt-3"},IQt={key:0,class:"p-8 text-center text-gray-500"},OQt={class:"flex items-center justify-between w-full"},LQt={class:"flex items-center gap-2"},VQt={class:"flex items-center gap-2"},NQt={__name:"TaxComplianceForm",props:{show:{type:Boolean,default:!1},tracker:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.show,set:R=>r("update:show",R)}),a=J(()=>{var R;return!!((R=n.tracker)!=null&&R.name)}),s=Q(!1),o=Q("basic"),l=[{id:"basic",label:"Basic Info",icon:vt},{id:"vat",label:"VAT",icon:WS},{id:"paye",label:"PAYE",icon:zS},{id:"wht",label:"Withholding Tax",icon:qS},{id:"statutory",label:"Statutory",icon:Cc},{id:"issues",label:"Issues",icon:zr}],d=Jt({tracker_id:"",tax_period:"",vat_on_sales:0,vat_on_purchases:0,net_vat_payable:0,vat_return_filed:!1,vat_return_reference:"",vat_filing_date:"",vat_payment_date:"",vat_payment_amount:0,vat_payment_reference:"",vat_reconciliation:"",total_paye:0,paye_return_filed:!1,paye_filing_date:"",paye_payment_date:"",paye_payment_reference:"",wht_on_services:0,wht_on_rent:0,wht_on_professional_fees:0,other_wht:0,total_wht:0,wht_return_filed:!1,wht_filing_date:"",wht_payment_date:"",employee_contributions:0,employer_contributions:0,total_nssf:0,nssf_return_filed:!1,nssf_payment_date:"",total_nhif:0,nhif_return_filed:!1,nhif_payment_date:"",compliance_score:0,issues_identified:[]}),c=[{label:"Late Filing",value:"Late Filing"},{label:"Late Payment",value:"Late Payment"},{label:"Underpayment",value:"Underpayment"},{label:"Documentation",value:"Documentation"},{label:"Other",value:"Other"}],f=[{label:"Open",value:"Open"},{label:"Resolved",value:"Resolved"}];Je(()=>n.tracker,R=>{R&&Object.keys(d).forEach(I=>{R[I]!==void 0&&(d[I]=R[I])})},{immediate:!0}),Je(()=>n.show,R=>{R&&!n.tracker&&(Object.keys(d).forEach(I=>{I==="issues_identified"?d[I]=[]:typeof d[I]=="boolean"?d[I]=!1:typeof d[I]=="number"?d[I]=0:d[I]=""}),o.value="basic")});function p(){d.net_vat_payable=(d.vat_on_sales||0)-(d.vat_on_purchases||0)}function h(){d.total_wht=(d.wht_on_services||0)+(d.wht_on_rent||0)+(d.wht_on_professional_fees||0)+(d.other_wht||0)}function m(){d.total_nssf=(d.employee_contributions||0)+(d.employer_contributions||0)}function g(){d.issues_identified.push({issue_type:"",description:"",financial_impact:0,resolution_status:"Open",resolution_notes:""})}function v(R){d.issues_identified.splice(R,1)}const _=J(()=>l.findIndex(R=>R.id===o.value));function x(){_.value<l.length-1&&(o.value=l[_.value+1].id)}function w(){_.value>0&&(o.value=l[_.value-1].id)}function k(R){switch(R){case"basic":return!!d.tracker_id&&!!d.tax_period;case"vat":return d.vat_return_filed;case"paye":return d.paye_return_filed;case"wht":return d.wht_return_filed;case"statutory":return d.nssf_return_filed&&d.nhif_return_filed;case"issues":return!0;default:return!1}}const S=J(()=>{const R=l.filter(I=>k(I.id)).length;return Math.round(R/l.length*100)});function C(R){return new Intl.NumberFormat("en-KE").format(R)}function A(R){return R>=90?"green":R>=70?"blue":R>=50?"orange":"red"}function M(R){return R>=90?"bg-green-500":R>=70?"bg-blue-500":R>=50?"bg-orange-500":"bg-red-500"}function $(){return le(this,null,function*(){s.value=!0;try{yield new Promise(R=>setTimeout(R,1e3)),r("saved",me({},d)),i.value=!1}catch(R){console.error("Failed to save tracker:",R)}finally{s.value=!1}})}return(R,I)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":I[32]||(I[32]=B=>i.value=B),options:{size:"7xl",title:a.value?"Edit Tax Compliance Tracker":"New Tax Compliance Tracker"}},{"body-content":D(()=>{var B;return[u("div",RZt,[u("div",PZt,[u("nav",IZt,[(T(),P(_e,null,we(l,(j,z)=>u("button",{key:j.id,onClick:F=>o.value=j.id,class:fe(["w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",o.value===j.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50"])},[(T(),he(Lt(j.icon),{class:fe(["h-4 w-4",o.value===j.id?"text-blue-600":"text-gray-400"])},null,8,["class"])),u("span",LZt,E(j.label),1),k(j.id)?(T(),he(y(Gt),{key:0,class:"h-4 w-4 text-green-500"})):ie("",!0)],10,OZt)),64))]),u("div",VZt,[I[33]||(I[33]=u("div",{class:"text-xs font-medium text-gray-500 mb-2"},"Completion",-1)),u("div",NZt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:nt({width:`${S.value}%`})},null,4)]),u("div",jZt,E(S.value)+"% complete",1)])]),u("div",FZt,[xe(u("div",BZt,[b(Rt,{title:"Basic Information",description:"Tracker identification and tax period details"}),u("div",zZt,[b(y(ge),{modelValue:d.tracker_id,"onUpdate:modelValue":I[0]||(I[0]=j=>d.tracker_id=j),label:"Tracker ID",type:"text",required:!0,placeholder:"Auto-generated if left empty"},null,8,["modelValue"]),b(At,{modelValue:d.tax_period,"onUpdate:modelValue":I[1]||(I[1]=j=>d.tax_period=j),label:"Tax Period",doctype:"Data Period",required:!0,placeholder:"Select tax period"},null,8,["modelValue"])])],512),[[ot,o.value==="basic"]]),xe(u("div",UZt,[b(Rt,{title:"VAT Compliance",description:"Value Added Tax calculations and filings"}),u("div",HZt,[b(y(ge),{modelValue:d.vat_on_sales,"onUpdate:modelValue":I[2]||(I[2]=j=>d.vat_on_sales=j),label:"VAT on Sales",type:"number",placeholder:"0.00",onChange:p},null,8,["modelValue"]),b(y(ge),{modelValue:d.vat_on_purchases,"onUpdate:modelValue":I[3]||(I[3]=j=>d.vat_on_purchases=j),label:"VAT on Purchases",type:"number",placeholder:"0.00",onChange:p},null,8,["modelValue"]),b(y(ge),{modelValue:d.net_vat_payable,"onUpdate:modelValue":I[4]||(I[4]=j=>d.net_vat_payable=j),label:"Net VAT Payable",type:"number",disabled:!0},null,8,["modelValue"])]),u("div",qZt,[I[38]||(I[38]=u("h4",{class:"font-medium text-gray-700 mb-4"},"VAT Filing Details",-1)),u("div",WZt,[u("div",GZt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":I[5]||(I[5]=j=>d.vat_return_filed=j),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[$n,d.vat_return_filed]]),I[34]||(I[34]=u("label",{class:"text-sm text-gray-700"},"VAT Return Filed",-1))]),b(y(ge),{modelValue:d.vat_return_reference,"onUpdate:modelValue":I[6]||(I[6]=j=>d.vat_return_reference=j),label:"Return Reference",type:"text",placeholder:"Enter reference number"},null,8,["modelValue"])]),u("div",YZt,[b(y(ge),{modelValue:d.vat_filing_date,"onUpdate:modelValue":I[7]||(I[7]=j=>d.vat_filing_date=j),label:"Filing Date",type:"date"},null,8,["modelValue"]),b(y(ge),{modelValue:d.vat_payment_date,"onUpdate:modelValue":I[8]||(I[8]=j=>d.vat_payment_date=j),label:"Payment Date",type:"date"},null,8,["modelValue"])]),u("div",KZt,[b(y(ge),{modelValue:d.vat_payment_amount,"onUpdate:modelValue":I[9]||(I[9]=j=>d.vat_payment_amount=j),label:"Payment Amount",type:"number",placeholder:"0.00"},null,8,["modelValue"]),b(y(ge),{modelValue:d.vat_payment_reference,"onUpdate:modelValue":I[10]||(I[10]=j=>d.vat_payment_reference=j),label:"Payment Reference",type:"text",placeholder:"Enter payment reference"},null,8,["modelValue"])]),u("div",XZt,[I[37]||(I[37]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," VAT Reconciliation Document ",-1)),u("div",ZZt,[b(y(ps),{class:"h-8 w-8 text-gray-400 mx-auto mb-2"}),I[35]||(I[35]=u("p",{class:"text-sm text-gray-600"},[u("span",{class:"text-blue-600 cursor-pointer hover:underline"}," Click to upload "),W(" or drag and drop ")],-1)),I[36]||(I[36]=u("p",{class:"text-xs text-gray-500 mt-1"},"PDF, XLS, XLSX up to 10MB",-1))])])])],512),[[ot,o.value==="vat"]]),xe(u("div",QZt,[b(Rt,{title:"PAYE Compliance",description:"Pay As You Earn tax calculations and filings"}),u("div",JZt,[b(y(ge),{modelValue:d.total_paye,"onUpdate:modelValue":I[11]||(I[11]=j=>d.total_paye=j),label:"Total PAYE",type:"number",placeholder:"0.00"},null,8,["modelValue"]),u("div",eQt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":I[12]||(I[12]=j=>d.paye_return_filed=j),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[$n,d.paye_return_filed]]),I[39]||(I[39]=u("label",{class:"text-sm text-gray-700"},"PAYE Return Filed",-1))])]),u("div",tQt,[b(y(ge),{modelValue:d.paye_filing_date,"onUpdate:modelValue":I[13]||(I[13]=j=>d.paye_filing_date=j),label:"Filing Date",type:"date"},null,8,["modelValue"]),b(y(ge),{modelValue:d.paye_payment_date,"onUpdate:modelValue":I[14]||(I[14]=j=>d.paye_payment_date=j),label:"Payment Date",type:"date"},null,8,["modelValue"]),b(y(ge),{modelValue:d.paye_payment_reference,"onUpdate:modelValue":I[15]||(I[15]=j=>d.paye_payment_reference=j),label:"Payment Reference",type:"text",placeholder:"Enter reference"},null,8,["modelValue"])])],512),[[ot,o.value==="paye"]]),xe(u("div",nQt,[b(Rt,{title:"Withholding Tax Compliance",description:"WHT calculations and filings"}),u("div",rQt,[b(y(ge),{modelValue:d.wht_on_services,"onUpdate:modelValue":I[16]||(I[16]=j=>d.wht_on_services=j),label:"WHT on Services",type:"number",placeholder:"0.00",onChange:h},null,8,["modelValue"]),b(y(ge),{modelValue:d.wht_on_rent,"onUpdate:modelValue":I[17]||(I[17]=j=>d.wht_on_rent=j),label:"WHT on Rent",type:"number",placeholder:"0.00",onChange:h},null,8,["modelValue"])]),u("div",iQt,[b(y(ge),{modelValue:d.wht_on_professional_fees,"onUpdate:modelValue":I[18]||(I[18]=j=>d.wht_on_professional_fees=j),label:"WHT on Professional Fees",type:"number",placeholder:"0.00",onChange:h},null,8,["modelValue"]),b(y(ge),{modelValue:d.other_wht,"onUpdate:modelValue":I[19]||(I[19]=j=>d.other_wht=j),label:"Other WHT",type:"number",placeholder:"0.00",onChange:h},null,8,["modelValue"])]),u("div",aQt,[u("div",sQt,[I[40]||(I[40]=u("span",{class:"font-medium text-blue-700"},"Total Withholding Tax",-1)),u("span",oQt," KES "+E(C(d.total_wht||0)),1)])]),u("div",lQt,[u("div",uQt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":I[20]||(I[20]=j=>d.wht_return_filed=j),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[$n,d.wht_return_filed]]),I[41]||(I[41]=u("label",{class:"text-sm text-gray-700"},"WHT Return Filed",-1))]),b(y(ge),{modelValue:d.wht_filing_date,"onUpdate:modelValue":I[21]||(I[21]=j=>d.wht_filing_date=j),label:"Filing Date",type:"date"},null,8,["modelValue"]),b(y(ge),{modelValue:d.wht_payment_date,"onUpdate:modelValue":I[22]||(I[22]=j=>d.wht_payment_date=j),label:"Payment Date",type:"date"},null,8,["modelValue"])])],512),[[ot,o.value==="wht"]]),xe(u("div",dQt,[b(Rt,{title:"Statutory Deductions",description:"NSSF and NHIF contributions and filings"}),u("div",cQt,[u("h4",fQt,[b(y(Cc),{class:"h-5 w-5 text-blue-500"}),I[42]||(I[42]=W(" NSSF Compliance ",-1))]),u("div",pQt,[b(y(ge),{modelValue:d.employee_contributions,"onUpdate:modelValue":I[23]||(I[23]=j=>d.employee_contributions=j),label:"Employee Contributions",type:"number",placeholder:"0.00",onChange:m},null,8,["modelValue"]),b(y(ge),{modelValue:d.employer_contributions,"onUpdate:modelValue":I[24]||(I[24]=j=>d.employer_contributions=j),label:"Employer Contributions",type:"number",placeholder:"0.00",onChange:m},null,8,["modelValue"]),b(y(ge),{modelValue:d.total_nssf,"onUpdate:modelValue":I[25]||(I[25]=j=>d.total_nssf=j),label:"Total NSSF",type:"number",disabled:!0},null,8,["modelValue"])]),u("div",hQt,[u("div",mQt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":I[26]||(I[26]=j=>d.nssf_return_filed=j),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[$n,d.nssf_return_filed]]),I[43]||(I[43]=u("label",{class:"text-sm text-gray-700"},"NSSF Return Filed",-1))]),b(y(ge),{modelValue:d.nssf_payment_date,"onUpdate:modelValue":I[27]||(I[27]=j=>d.nssf_payment_date=j),label:"Payment Date",type:"date"},null,8,["modelValue"])])]),u("div",gQt,[u("h4",vQt,[b(y(nfe),{class:"h-5 w-5 text-red-500"}),I[44]||(I[44]=W(" NHIF Compliance ",-1))]),u("div",yQt,[b(y(ge),{modelValue:d.total_nhif,"onUpdate:modelValue":I[28]||(I[28]=j=>d.total_nhif=j),label:"Total NHIF",type:"number",placeholder:"0.00"},null,8,["modelValue"]),b(y(ge),{modelValue:d.nhif_payment_date,"onUpdate:modelValue":I[29]||(I[29]=j=>d.nhif_payment_date=j),label:"Payment Date",type:"date"},null,8,["modelValue"])]),u("div",bQt,[xe(u("input",{type:"checkbox","onUpdate:modelValue":I[30]||(I[30]=j=>d.nhif_return_filed=j),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[$n,d.nhif_return_filed]]),I[45]||(I[45]=u("label",{class:"text-sm text-gray-700"},"NHIF Return Filed",-1))])])],512),[[ot,o.value==="statutory"]]),xe(u("div",_Qt,[b(Rt,{title:"Issues & Compliance Score",description:"Identified issues and overall compliance status"}),u("div",xQt,[u("div",wQt,[I[46]||(I[46]=u("h4",{class:"font-medium text-gray-700"},"Overall Compliance Score",-1)),b(y(Ee),{theme:A(d.compliance_score),size:"lg"},{default:D(()=>[W(E(d.compliance_score||0)+"% ",1)]),_:1},8,["theme"])]),u("div",kQt,[u("div",{class:fe(["h-3 rounded-full transition-all",M(d.compliance_score)]),style:nt({width:`${d.compliance_score||0}%`})},null,6)])]),u("div",SQt,[u("div",CQt,[I[48]||(I[48]=u("h4",{class:"font-medium text-gray-700"},"Issues Identified",-1)),b(y(Z),{size:"sm",variant:"outline",onClick:g},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[I[47]||(I[47]=W(" Add Issue ",-1))]),_:1})]),u("div",AQt,[(T(!0),P(_e,null,we(d.issues_identified,(j,z)=>(T(),P("div",{key:z,class:"p-4"},[u("div",TQt,[u("div",EQt,[b(y(Ke),{modelValue:j.issue_type,"onUpdate:modelValue":F=>j.issue_type=F,options:c,placeholder:"Issue Type"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",MQt,[b(y(ge),{modelValue:j.description,"onUpdate:modelValue":F=>j.description=F,type:"textarea",rows:2,placeholder:"Describe the issue..."},null,8,["modelValue","onUpdate:modelValue"])]),u("div",$Qt,[b(y(ge),{modelValue:j.financial_impact,"onUpdate:modelValue":F=>j.financial_impact=F,type:"number",placeholder:"Impact"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",DQt,[b(y(Ke),{modelValue:j.resolution_status,"onUpdate:modelValue":F=>j.resolution_status=F,options:f,placeholder:"Status"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",RQt,[b(y(Z),{size:"sm",variant:"ghost",theme:"red",onClick:F=>v(z)},{default:D(()=>[b(y(hi),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),j.resolution_notes||j.resolution_status==="Resolved"?(T(),P("div",PQt,[b(y(ge),{modelValue:j.resolution_notes,"onUpdate:modelValue":F=>j.resolution_notes=F,type:"textarea",rows:2,placeholder:"Resolution notes..."},null,8,["modelValue","onUpdate:modelValue"])])):ie("",!0)]))),128)),(B=d.issues_identified)!=null&&B.length?ie("",!0):(T(),P("div",IQt,[b(y(zr),{class:"h-8 w-8 mx-auto mb-2 text-gray-400"}),I[49]||(I[49]=u("p",null,"No issues identified",-1)),I[50]||(I[50]=u("p",{class:"text-sm mt-1"},'Click "Add Issue" to record any compliance issues',-1))]))])])],512),[[ot,o.value==="issues"]])])])]}),actions:D(()=>[u("div",OQt,[u("div",LQt,[o.value!=="basic"?(T(),he(y(Z),{key:0,variant:"outline",onClick:w},{prefix:D(()=>[b(y(pr),{class:"h-4 w-4"})]),default:D(()=>[I[51]||(I[51]=W(" Previous ",-1))]),_:1})):ie("",!0)]),u("div",VQt,[b(y(Z),{variant:"outline",onClick:I[31]||(I[31]=B=>i.value=!1)},{default:D(()=>[...I[52]||(I[52]=[W("Cancel",-1)])]),_:1}),o.value!=="issues"?(T(),he(y(Z),{key:0,variant:"solid",onClick:x},{suffix:D(()=>[b(y(tr),{class:"h-4 w-4"})]),default:D(()=>[I[53]||(I[53]=W(" Next ",-1))]),_:1})):(T(),he(y(Z),{key:1,variant:"solid",theme:"green",loading:s.value,onClick:$},{prefix:D(()=>[b(y(Cr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+E(a.value?"Update Tracker":"Create Tracker"),1)]),_:1},8,["loading"]))])])]),_:1},8,["modelValue","options"]))}},jQt={class:"bg-white rounded-xl border p-4"},FQt={class:"flex flex-wrap items-center gap-4"},BQt={class:"flex-1 min-w-[200px] max-w-md"},zQt={class:"w-44"},UQt={class:"w-36"},HQt={class:"w-36"},qQt={class:"w-40"},WQt={class:"w-32"},GQt={class:"flex items-center gap-2 ml-auto"},YQt={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},KQt={__name:"TaxFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,i=Jt({search:"",taxPeriod:"",taxType:"",filingStatus:"",scoreRange:"",hasIssues:""});Je(()=>n.filters,h=>{h&&Object.assign(i,h)},{immediate:!0,deep:!0});const a=[{label:"All Tax Types",value:""},{label:"VAT",value:"VAT"},{label:"PAYE",value:"PAYE"},{label:"Withholding Tax",value:"WHT"},{label:"NSSF",value:"NSSF"},{label:"NHIF",value:"NHIF"}],s=[{label:"All Status",value:""},{label:"All Filed",value:"filed"},{label:"Pending Filing",value:"pending"},{label:"Overdue",value:"overdue"}],o=[{label:"All Scores",value:""},{label:"Excellent (90-100%)",value:"90-100"},{label:"Good (70-89%)",value:"70-89"},{label:"Fair (50-69%)",value:"50-69"},{label:"Poor (0-49%)",value:"0-49"}],l=[{label:"All",value:""},{label:"Has Issues",value:"yes"},{label:"No Issues",value:"no"}],d=J(()=>Object.values(i).some(h=>h!==""));function c(){r("update:filters",me({},i))}function f(h){i[h]="",c()}function p(){Object.keys(i).forEach(h=>{i[h]=""}),c()}return(h,m)=>(T(),P("div",jQt,[u("div",FQt,[u("div",BQt,[b(y(ge),{modelValue:i.search,"onUpdate:modelValue":[m[0]||(m[0]=g=>i.search=g),c],type:"text",placeholder:"Search by tracker ID...",debounce:300},{prefix:D(()=>[b(y(Rn),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",zQt,[b(At,{modelValue:i.taxPeriod,"onUpdate:modelValue":[m[1]||(m[1]=g=>i.taxPeriod=g),c],doctype:"Data Period",placeholder:"All Periods"},null,8,["modelValue"])]),u("div",UQt,[b(y(Ke),{modelValue:i.taxType,"onUpdate:modelValue":[m[2]||(m[2]=g=>i.taxType=g),c],options:a,placeholder:"Tax Type"},null,8,["modelValue"])]),u("div",HQt,[b(y(Ke),{modelValue:i.filingStatus,"onUpdate:modelValue":[m[3]||(m[3]=g=>i.filingStatus=g),c],options:s,placeholder:"Filing Status"},null,8,["modelValue"])]),u("div",qQt,[b(y(Ke),{modelValue:i.scoreRange,"onUpdate:modelValue":[m[4]||(m[4]=g=>i.scoreRange=g),c],options:o,placeholder:"Score Range"},null,8,["modelValue"])]),u("div",WQt,[b(y(Ke),{modelValue:i.hasIssues,"onUpdate:modelValue":[m[5]||(m[5]=g=>i.hasIssues=g),c],options:l,placeholder:"Issues"},null,8,["modelValue"])]),u("div",GQt,[d.value?(T(),he(y(Z),{key:0,variant:"outline",onClick:p},{prefix:D(()=>[b(y(ht),{class:"h-4 w-4"})]),default:D(()=>[m[14]||(m[14]=W(" Clear ",-1))]),_:1})):ie("",!0),b(y(Z),{variant:"outline",onClick:m[6]||(m[6]=g=>h.$emit("refresh"))},{prefix:D(()=>[b(y(hn),{class:"h-4 w-4"})]),default:D(()=>[m[15]||(m[15]=W(" Refresh ",-1))]),_:1}),b(y(Z),{variant:"solid",onClick:m[7]||(m[7]=g=>h.$emit("create"))},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[m[16]||(m[16]=W(" New Tracker ",-1))]),_:1})])]),d.value?(T(),P("div",YQt,[m[17]||(m[17]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),i.search?(T(),he(y(Ee),{key:0,theme:"blue",class:"cursor-pointer",onClick:m[8]||(m[8]=g=>f("search"))},{default:D(()=>[W(' Search: "'+E(i.search)+'" ',1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.taxPeriod?(T(),he(y(Ee),{key:1,theme:"purple",class:"cursor-pointer",onClick:m[9]||(m[9]=g=>f("taxPeriod"))},{default:D(()=>[W(" Period: "+E(i.taxPeriod)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.taxType?(T(),he(y(Ee),{key:2,theme:"green",class:"cursor-pointer",onClick:m[10]||(m[10]=g=>f("taxType"))},{default:D(()=>[W(" Type: "+E(i.taxType)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.filingStatus?(T(),he(y(Ee),{key:3,theme:"indigo",class:"cursor-pointer",onClick:m[11]||(m[11]=g=>f("filingStatus"))},{default:D(()=>[W(" Status: "+E(i.filingStatus)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.scoreRange?(T(),he(y(Ee),{key:4,theme:"orange",class:"cursor-pointer",onClick:m[12]||(m[12]=g=>f("scoreRange"))},{default:D(()=>[W(" Score: "+E(i.scoreRange)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.hasIssues?(T(),he(y(Ee),{key:5,theme:"red",class:"cursor-pointer",onClick:m[13]||(m[13]=g=>f("hasIssues"))},{default:D(()=>[W(E(i.hasIssues==="yes"?"Has Issues":"No Issues")+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0)])):ie("",!0)]))}},XQt={class:"grid grid-cols-5 gap-4"},ZQt={class:"bg-white rounded-xl border p-4"},QQt={class:"flex items-center justify-between"},JQt={class:"text-2xl font-bold text-gray-900"},eJt={class:"h-10 w-10 rounded-lg bg-blue-50 flex items-center justify-center"},tJt={class:"mt-2 flex items-center gap-1 text-xs"},nJt={class:"text-gray-500"},rJt={class:"bg-white rounded-xl border p-4"},iJt={class:"flex items-center justify-between"},aJt={class:"text-2xl font-bold text-green-600"},sJt={class:"h-10 w-10 rounded-lg bg-green-50 flex items-center justify-center"},oJt={class:"mt-2"},lJt={class:"flex items-center justify-between text-xs"},uJt={class:"font-medium text-green-600"},dJt={class:"w-full bg-gray-100 rounded-full h-1.5 mt-1"},cJt={class:"bg-white rounded-xl border p-4"},fJt={class:"flex items-center justify-between"},pJt={class:"text-2xl font-bold text-purple-600"},hJt={class:"h-10 w-10 rounded-lg bg-purple-50 flex items-center justify-center"},mJt={class:"mt-2"},gJt={class:"flex items-center justify-between text-xs"},vJt={class:"font-medium text-purple-600"},yJt={class:"w-full bg-gray-100 rounded-full h-1.5 mt-1"},bJt={class:"bg-white rounded-xl border p-4"},_Jt={class:"flex items-center justify-between"},xJt={class:"text-2xl font-bold text-indigo-600"},wJt={class:"h-10 w-10 rounded-lg bg-indigo-50 flex items-center justify-center"},kJt={class:"mt-2 flex items-center gap-2 text-xs"},SJt={class:"text-gray-500"},CJt={class:"text-gray-500"},AJt={class:"bg-white rounded-xl border p-4"},TJt={class:"flex items-center justify-between"},EJt={class:"mt-2 flex items-center justify-between text-xs"},MJt={class:"grid grid-cols-4 gap-4 mt-4"},$Jt={class:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-4 text-white"},DJt={class:"flex items-center justify-between"},RJt={class:"text-xl font-bold"},PJt={class:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-4 text-white"},IJt={class:"flex items-center justify-between"},OJt={class:"text-xl font-bold"},LJt={class:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-4 text-white"},VJt={class:"flex items-center justify-between"},NJt={class:"text-xl font-bold"},jJt={class:"bg-gradient-to-r from-teal-500 to-teal-600 rounded-xl p-4 text-white"},FJt={class:"flex items-center justify-between"},BJt={class:"text-xl font-bold"},zJt={__name:"TaxStats",props:{trackers:{type:Array,default:()=>[]}},setup(t){const e=t,n=J(()=>{const a=e.trackers.length,s=e.trackers.filter(A=>A.vat_return_filed).length,o=e.trackers.filter(A=>A.paye_return_filed).length,l=e.trackers.filter(A=>A.wht_return_filed).length,d=e.trackers.filter(A=>A.nssf_return_filed).length,c=e.trackers.filter(A=>A.nhif_return_filed).length,f=a>0?Math.round(s/a*100):0,p=a>0?Math.round(o/a*100):0,h=e.trackers.reduce((A,M)=>A+(M.net_vat_payable||0),0),m=e.trackers.reduce((A,M)=>A+(M.total_paye||0),0),g=e.trackers.reduce((A,M)=>A+(M.total_wht||0),0),v=e.trackers.reduce((A,M)=>A+(M.total_nssf||0),0),_=e.trackers.reduce((A,M)=>A+(M.total_nhif||0),0),x=v+_,w=e.trackers.reduce((A,M)=>{var $;return A+((($=M.issues_identified)==null?void 0:$.filter(R=>R.resolution_status==="Open").length)||0)},0),k=e.trackers.filter(A=>A.compliance_score!==null&&A.compliance_score!==void 0),S=k.length>0?Math.round(k.reduce((A,M)=>A+(M.compliance_score||0),0)/k.length):0,C=new Set(e.trackers.map(A=>A.tax_period)).size;return{total:a,vatFiled:s,payeFiled:o,whtFiled:l,nssfFiled:d,nhifFiled:c,statutoryFiled:Math.min(d,c),vatRate:f,payeRate:p,totalVatPayable:h,totalPaye:m,totalWht:g,totalStatutory:x,openIssues:w,avgScore:S,periodsCount:C}});function r(a){return new Intl.NumberFormat("en-KE").format(a||0)}function i(a){return a>=90?"green":a>=70?"blue":a>=50?"orange":"red"}return(a,s)=>(T(),P(_e,null,[u("div",XQt,[u("div",ZQt,[u("div",QQt,[u("div",null,[s[0]||(s[0]=u("p",{class:"text-sm text-gray-500"},"Total Trackers",-1)),u("p",JQt,E(n.value.total),1)]),u("div",eJt,[b(y(vt),{class:"h-5 w-5 text-blue-600"})])]),u("div",tJt,[u("span",nJt,E(n.value.periodsCount)+" periods covered",1)])]),u("div",rJt,[u("div",iJt,[u("div",null,[s[1]||(s[1]=u("p",{class:"text-sm text-gray-500"},"VAT Filed",-1)),u("p",aJt,E(n.value.vatFiled),1)]),u("div",sJt,[b(y(WS),{class:"h-5 w-5 text-green-600"})])]),u("div",oJt,[u("div",lJt,[s[2]||(s[2]=u("span",{class:"text-gray-500"},"Compliance Rate",-1)),u("span",uJt,E(n.value.vatRate)+"%",1)]),u("div",dJt,[u("div",{class:"bg-green-500 h-1.5 rounded-full",style:nt({width:`${n.value.vatRate}%`})},null,4)])])]),u("div",cJt,[u("div",fJt,[u("div",null,[s[3]||(s[3]=u("p",{class:"text-sm text-gray-500"},"PAYE Filed",-1)),u("p",pJt,E(n.value.payeFiled),1)]),u("div",hJt,[b(y(zS),{class:"h-5 w-5 text-purple-600"})])]),u("div",mJt,[u("div",gJt,[s[4]||(s[4]=u("span",{class:"text-gray-500"},"Compliance Rate",-1)),u("span",vJt,E(n.value.payeRate)+"%",1)]),u("div",yJt,[u("div",{class:"bg-purple-500 h-1.5 rounded-full",style:nt({width:`${n.value.payeRate}%`})},null,4)])])]),u("div",bJt,[u("div",_Jt,[u("div",null,[s[5]||(s[5]=u("p",{class:"text-sm text-gray-500"},"Statutory Filed",-1)),u("p",xJt,E(n.value.statutoryFiled),1)]),u("div",wJt,[b(y(Cc),{class:"h-5 w-5 text-indigo-600"})])]),u("div",kJt,[u("span",SJt,"NSSF: "+E(n.value.nssfFiled),1),s[6]||(s[6]=u("span",{class:"text-gray-300"},"|",-1)),u("span",CJt,"NHIF: "+E(n.value.nhifFiled),1)])]),u("div",AJt,[u("div",TJt,[u("div",null,[s[7]||(s[7]=u("p",{class:"text-sm text-gray-500"},"Open Issues",-1)),u("p",{class:fe(["text-2xl font-bold",n.value.openIssues>0?"text-red-600":"text-green-600"])},E(n.value.openIssues),3)]),u("div",{class:fe(["h-10 w-10 rounded-lg flex items-center justify-center",n.value.openIssues>0?"bg-red-50":"bg-green-50"])},[b(y(zr),{class:fe(["h-5 w-5",n.value.openIssues>0?"text-red-600":"text-green-600"])},null,8,["class"])],2)]),u("div",EJt,[s[8]||(s[8]=u("span",{class:"text-gray-500"},"Avg Score",-1)),b(y(Ee),{theme:i(n.value.avgScore),size:"sm"},{default:D(()=>[W(E(n.value.avgScore)+"% ",1)]),_:1},8,["theme"])])])]),u("div",MJt,[u("div",$Jt,[u("div",DJt,[u("div",null,[s[9]||(s[9]=u("p",{class:"text-sm text-blue-100"},"Total VAT Payable",-1)),u("p",RJt,"KES "+E(r(n.value.totalVatPayable)),1)]),b(y(tb),{class:"h-8 w-8 text-blue-200"})])]),u("div",PJt,[u("div",IJt,[u("div",null,[s[10]||(s[10]=u("p",{class:"text-sm text-purple-100"},"Total PAYE",-1)),u("p",OJt,"KES "+E(r(n.value.totalPaye)),1)]),b(y(ya),{class:"h-8 w-8 text-purple-200"})])]),u("div",LJt,[u("div",VJt,[u("div",null,[s[11]||(s[11]=u("p",{class:"text-sm text-orange-100"},"Total WHT",-1)),u("p",NJt,"KES "+E(r(n.value.totalWht)),1)]),b(y(qS),{class:"h-8 w-8 text-orange-200"})])]),u("div",jJt,[u("div",FJt,[u("div",null,[s[12]||(s[12]=u("p",{class:"text-sm text-teal-100"},"Total Statutory",-1)),u("p",BJt,"KES "+E(r(n.value.totalStatutory)),1)]),b(y(Ku),{class:"h-8 w-8 text-teal-200"})])])])],64))}},UJt={class:"p-6"},HJt={class:"flex justify-between items-center mb-6"},qJt={class:"bg-white rounded-lg border shadow-sm"},WJt={class:"p-4 border-b"},GJt={class:"flex justify-between items-center"},YJt={class:"flex gap-2"},KJt={class:"overflow-x-auto"},XJt={class:"w-full"},ZJt={class:"divide-y divide-gray-200"},QJt={class:"px-4 py-3"},JJt={class:"font-medium"},een={class:"text-sm text-gray-500"},ten={class:"px-4 py-3"},nen={class:"px-4 py-3"},ren={class:"px-4 py-3"},ien={class:"flex items-center gap-1"},aen={class:"px-4 py-3"},sen={class:"flex items-center gap-1"},oen={class:"px-4 py-3"},len={class:"flex items-center gap-1"},uen={class:"px-4 py-3"},den={class:"flex items-center gap-1"},cen={class:"px-4 py-3"},fen={class:"flex items-center gap-1"},pen={class:"px-4 py-3"},hen={class:"flex gap-1"},men={key:0,class:"p-8 text-center text-gray-500"},gen={__name:"TaxCompliance",setup(t){const e=QO(),n=Q(!1),r=Q(!1),i=Q(null),a=J(()=>e.loading),s=J(()=>e.taxComplianceTrackers),o=Q(""),l=Q(""),d=Q(""),c=Q(""),f=Q(""),p=J(()=>{const w=s.value,k=w.length,S=k>0?Math.round(w.reduce(($,R)=>$+(R.compliance_score||0),0)/k):0,C=w.filter($=>$.vat_return_filed).length,A=w.filter($=>$.paye_return_filed).length,M=w.filter($=>($.compliance_score||0)>=80).length;return{total:k,avgScore:S,vatFiled:C,payeFiled:A,compliant:M}}),h=()=>le(this,null,function*(){yield e.fetchTaxComplianceTrackers()}),m=()=>{i.value=null,r.value=!1,n.value=!0},g=w=>le(this,null,function*(){try{i.value=yield e.getTaxTrackerDetails(w.name),r.value=!0,n.value=!0}catch(k){console.error("Error fetching tracker details:",k)}}),v=w=>le(this,null,function*(){try{i.value=yield e.getTaxTrackerDetails(w.name),r.value=!0,n.value=!0}catch(k){console.error("Error fetching tracker details:",k)}}),_=()=>le(this,null,function*(){n.value=!1,yield h()}),x=w=>w>=80?"green":w>=60?"yellow":"red";return bt(()=>le(this,null,function*(){yield h()})),(w,k)=>(T(),P("div",UJt,[u("div",HJt,[k[7]||(k[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Tax Compliance"),u("p",{class:"text-gray-600"},"Track tax compliance, filings, and payments across all tax types.")],-1)),b(y(Z),{onClick:m,class:"flex items-center gap-2"},{default:D(()=>[b(y(tt),{class:"w-4 h-4"}),k[6]||(k[6]=W(" Create Tracker ",-1))]),_:1})]),b(zJt,{stats:p.value},null,8,["stats"]),b(KQt,{searchQuery:o.value,"onUpdate:searchQuery":k[0]||(k[0]=S=>o.value=S),selectedTaxPeriod:l.value,"onUpdate:selectedTaxPeriod":k[1]||(k[1]=S=>l.value=S),selectedComplianceScore:d.value,"onUpdate:selectedComplianceScore":k[2]||(k[2]=S=>d.value=S),selectedVatStatus:c.value,"onUpdate:selectedVatStatus":k[3]||(k[3]=S=>c.value=S),selectedPayeStatus:f.value,"onUpdate:selectedPayeStatus":k[4]||(k[4]=S=>f.value=S)},null,8,["searchQuery","selectedTaxPeriod","selectedComplianceScore","selectedVatStatus","selectedPayeStatus"]),u("div",qJt,[u("div",WJt,[u("div",GJt,[k[8]||(k[8]=u("h2",{class:"text-lg font-semibold"},"Tax Compliance Trackers",-1)),u("div",YJt,[b(y(Z),{onClick:h,loading:a.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"])])])]),u("div",KJt,[u("table",XJt,[k[14]||(k[14]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tracker ID"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tax Period"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Compliance Score"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"VAT"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"PAYE"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"WHT"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"NSSF"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"NHIF"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",ZJt,[(T(!0),P(_e,null,we(s.value,S=>(T(),P("tr",{key:S.name,class:"hover:bg-gray-50"},[u("td",QJt,[u("div",JJt,E(S.tracker_id),1),u("div",een,E(S.name),1)]),u("td",ten,[u("div",null,E(S.tax_period),1)]),u("td",nen,[b(y(Ee),{variant:x(S.compliance_score)},{default:D(()=>[W(E(S.compliance_score||0)+"% ",1)]),_:2},1032,["variant"])]),u("td",ren,[u("div",ien,[S.vat_return_filed?(T(),he(y(Gt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(y(ht),{key:1,class:"w-4 h-4 text-red-500"})),k[9]||(k[9]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",aen,[u("div",sen,[S.paye_return_filed?(T(),he(y(Gt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(y(ht),{key:1,class:"w-4 h-4 text-red-500"})),k[10]||(k[10]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",oen,[u("div",len,[S.wht_return_filed?(T(),he(y(Gt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(y(ht),{key:1,class:"w-4 h-4 text-red-500"})),k[11]||(k[11]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",uen,[u("div",den,[S.nssf_return_filed?(T(),he(y(Gt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(y(ht),{key:1,class:"w-4 h-4 text-red-500"})),k[12]||(k[12]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",cen,[u("div",fen,[S.nhif_return_filed?(T(),he(y(Gt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(y(ht),{key:1,class:"w-4 h-4 text-red-500"})),k[13]||(k[13]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",pen,[u("div",hen,[b(y(Z),{onClick:C=>g(S),variant:"outline",size:"sm"},{default:D(()=>[b(y(ar),{class:"w-4 h-4"})]),_:1},8,["onClick"]),b(y(Z),{onClick:C=>v(S),variant:"outline",size:"sm"},{default:D(()=>[b(y(vn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])])]))),128))])])]),s.value.length===0&&!a.value?(T(),P("div",men,[b(y(WS),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),k[16]||(k[16]=u("p",null,"No tax compliance trackers found.",-1)),b(y(Z),{onClick:m,class:"mt-4"},{default:D(()=>[...k[15]||(k[15]=[W(" Create Your First Tracker ",-1)])]),_:1})])):ie("",!0)]),b(NQt,{show:n.value,"onUpdate:show":k[5]||(k[5]=S=>n.value=S),"tracker-data":i.value,"is-edit-mode":r.value,onSaved:_},null,8,["show","tracker-data","is-edit-mode"])]))}},ven={class:"bg-white rounded-xl border p-4"},yen={class:"flex flex-wrap items-center gap-4"},ben={class:"flex-1 min-w-[200px] max-w-md"},_en={class:"w-48"},xen={class:"w-36"},wen={class:"w-32"},ken={class:"w-36"},Sen={class:"w-40"},Cen={class:"w-40"},Aen={class:"flex items-center gap-2 ml-auto"},Ten={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},Een={__name:"ExecutionFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,i=Jt({search:"",testLibrary:"",executionType:"",priority:"",status:"",dateFrom:"",dateTo:""});Je(()=>n.filters,p=>{p&&Object.assign(i,p)},{immediate:!0,deep:!0});const a=[{label:"All Types",value:""},{label:"Manual",value:"Manual"},{label:"Scheduled",value:"Scheduled"},{label:"Batch",value:"Batch"},{label:"API",value:"API"}],s=[{label:"All Priorities",value:""},{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],o=[{label:"All Status",value:""},{label:"Pending",value:"Pending"},{label:"Queued",value:"Queued"},{label:"Running",value:"Running"},{label:"Completed",value:"Completed"},{label:"Failed",value:"Failed"},{label:"Cancelled",value:"Cancelled"},{label:"Paused",value:"Paused"}],l=J(()=>Object.values(i).some(p=>p!==""));function d(){r("update:filters",me({},i))}function c(p){p==="dateRange"?(i.dateFrom="",i.dateTo=""):i[p]="",d()}function f(){Object.keys(i).forEach(p=>{i[p]=""}),d()}return(p,h)=>(T(),P("div",ven,[u("div",yen,[u("div",ben,[b(y(ge),{modelValue:i.search,"onUpdate:modelValue":[h[0]||(h[0]=m=>i.search=m),d],type:"text",placeholder:"Search by name, ID, or test...",debounce:300},{prefix:D(()=>[b(y(Rn),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",_en,[b(At,{modelValue:i.testLibrary,"onUpdate:modelValue":[h[1]||(h[1]=m=>i.testLibrary=m),d],doctype:"Audit Test Library",placeholder:"All Tests"},null,8,["modelValue"])]),u("div",xen,[b(y(Ke),{modelValue:i.executionType,"onUpdate:modelValue":[h[2]||(h[2]=m=>i.executionType=m),d],options:a,placeholder:"All Types"},null,8,["modelValue"])]),u("div",wen,[b(y(Ke),{modelValue:i.priority,"onUpdate:modelValue":[h[3]||(h[3]=m=>i.priority=m),d],options:s,placeholder:"Priority"},null,8,["modelValue"])]),u("div",ken,[b(y(Ke),{modelValue:i.status,"onUpdate:modelValue":[h[4]||(h[4]=m=>i.status=m),d],options:o,placeholder:"All Status"},null,8,["modelValue"])]),u("div",Sen,[b(y(ge),{modelValue:i.dateFrom,"onUpdate:modelValue":[h[5]||(h[5]=m=>i.dateFrom=m),d],type:"date",placeholder:"From date"},null,8,["modelValue"])]),u("div",Cen,[b(y(ge),{modelValue:i.dateTo,"onUpdate:modelValue":[h[6]||(h[6]=m=>i.dateTo=m),d],type:"date",placeholder:"To date"},null,8,["modelValue"])]),u("div",Aen,[l.value?(T(),he(y(Z),{key:0,variant:"outline",onClick:f},{prefix:D(()=>[b(y(ht),{class:"h-4 w-4"})]),default:D(()=>[h[15]||(h[15]=W(" Clear ",-1))]),_:1})):ie("",!0),b(y(Z),{variant:"outline",onClick:h[7]||(h[7]=m=>p.$emit("refresh"))},{prefix:D(()=>[b(y(hn),{class:"h-4 w-4"})]),default:D(()=>[h[16]||(h[16]=W(" Refresh ",-1))]),_:1}),b(y(Z),{variant:"solid",onClick:h[8]||(h[8]=m=>p.$emit("create"))},{prefix:D(()=>[b(y(Rl),{class:"h-4 w-4"})]),default:D(()=>[h[17]||(h[17]=W(" New Execution ",-1))]),_:1})])]),l.value?(T(),P("div",Ten,[h[18]||(h[18]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),i.search?(T(),he(y(Ee),{key:0,theme:"blue",class:"cursor-pointer",onClick:h[9]||(h[9]=m=>c("search"))},{default:D(()=>[W(' Search: "'+E(i.search)+'" ',1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.testLibrary?(T(),he(y(Ee),{key:1,theme:"purple",class:"cursor-pointer",onClick:h[10]||(h[10]=m=>c("testLibrary"))},{default:D(()=>[W(" Test: "+E(i.testLibrary)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.executionType?(T(),he(y(Ee),{key:2,theme:"indigo",class:"cursor-pointer",onClick:h[11]||(h[11]=m=>c("executionType"))},{default:D(()=>[W(" Type: "+E(i.executionType)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.priority?(T(),he(y(Ee),{key:3,theme:"orange",class:"cursor-pointer",onClick:h[12]||(h[12]=m=>c("priority"))},{default:D(()=>[W(" Priority: "+E(i.priority)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.status?(T(),he(y(Ee),{key:4,theme:"green",class:"cursor-pointer",onClick:h[13]||(h[13]=m=>c("status"))},{default:D(()=>[W(" Status: "+E(i.status)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.dateFrom||i.dateTo?(T(),he(y(Ee),{key:5,theme:"gray",class:"cursor-pointer",onClick:h[14]||(h[14]=m=>c("dateRange"))},{default:D(()=>[W(" Date: "+E(i.dateFrom||"*")+" - "+E(i.dateTo||"*")+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0)])):ie("",!0)]))}},Men={class:"space-y-4"},$en={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4"},Den=["onClick"],Ren={class:"flex items-center gap-3"},Pen={class:"text-2xl font-bold text-gray-900"},Ien={class:"text-xs text-gray-500"},Oen={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Len={class:"bg-white rounded-xl border p-4"},Ven={class:"space-y-3"},Nen=["onClick"],jen={class:"flex-1 text-sm text-gray-600"},Fen={class:"text-sm font-medium text-gray-700"},Ben={class:"w-20 bg-gray-100 rounded-full h-2"},zen={class:"bg-white rounded-xl border p-4"},Uen={class:"flex items-center justify-center"},Hen={class:"relative h-40 w-40"},qen={viewBox:"0 0 36 36",class:"transform -rotate-90"},Wen=["stroke-dasharray"],Gen=["stroke-dasharray","stroke-dashoffset"],Yen={class:"absolute inset-0 flex flex-col items-center justify-center"},Ken={class:"text-2xl font-bold text-gray-900"},Xen={class:"flex justify-center gap-6 mt-4"},Zen={class:"flex items-center gap-2"},Qen={class:"text-sm text-gray-600"},Jen={class:"flex items-center gap-2"},etn={class:"text-sm text-gray-600"},ttn={class:"flex items-center gap-2"},ntn={class:"text-sm text-gray-600"},rtn={class:"bg-white rounded-xl border p-4"},itn={class:"space-y-4"},atn={class:"flex items-center justify-between"},stn={class:"flex items-center gap-2"},otn={class:"text-sm font-semibold text-gray-900"},ltn={class:"flex items-center justify-between"},utn={class:"flex items-center gap-2"},dtn={class:"text-sm font-semibold text-gray-900"},ctn={class:"flex items-center justify-between"},ftn={class:"flex items-center gap-2"},ptn={class:"text-sm font-semibold text-red-600"},htn={class:"flex items-center justify-between"},mtn={class:"flex items-center gap-2"},gtn={class:"text-sm font-semibold text-gray-900"},vtn={class:"bg-white rounded-xl border p-4"},ytn={class:"flex items-center gap-2 overflow-x-auto pb-2"},btn=["onClick"],_tn={class:"flex items-center justify-between mb-2"},xtn={class:"text-xs text-gray-500"},wtn={class:"text-sm font-medium text-gray-800 truncate"},ktn={class:"text-xs text-gray-500 mt-1"},Stn={key:0,class:"text-sm text-gray-500 py-4"},Ctn={__name:"ExecutionStats",props:{executions:{type:Array,default:()=>[]},activeFilter:{type:String,default:""}},emits:["filter","select"],setup(t){const e=t,n=J(()=>{const w=e.executions,k=w.length,S=w.filter(I=>I.status==="Pending").length,C=w.filter(I=>I.status==="Running").length,A=w.filter(I=>I.status==="Completed").length,M=w.filter(I=>I.status==="Failed").length,$=w.filter(I=>I.status==="Queued").length,R=w.filter(I=>I.status==="Paused").length;return[{label:"Total",value:k,icon:Rl,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:null,filterValue:null},{label:"Pending",value:S,icon:Ii,bgColor:"bg-gray-100",iconColor:"text-gray-600",filterKey:"status",filterValue:"Pending",active:e.activeFilter==="Pending"},{label:"Queued",value:$,icon:bY,bgColor:"bg-indigo-100",iconColor:"text-indigo-600",filterKey:"status",filterValue:"Queued",active:e.activeFilter==="Queued"},{label:"Running",value:C,icon:Rl,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:"status",filterValue:"Running",active:e.activeFilter==="Running"},{label:"Completed",value:A,icon:Gt,bgColor:"bg-green-100",iconColor:"text-green-600",filterKey:"status",filterValue:"Completed",active:e.activeFilter==="Completed"},{label:"Failed",value:M,icon:Fc,bgColor:"bg-red-100",iconColor:"text-red-600",filterKey:"status",filterValue:"Failed",active:e.activeFilter==="Failed"},{label:"Paused",value:R,icon:wY,bgColor:"bg-yellow-100",iconColor:"text-yellow-600",filterKey:"status",filterValue:"Paused",active:e.activeFilter==="Paused"}]}),r=J(()=>{const w=e.executions,k=w.length||1,S=["Pending","Queued","Running","Completed","Failed","Cancelled","Paused"],C={Pending:{dot:"bg-gray-400",bar:"bg-gray-400"},Queued:{dot:"bg-indigo-400",bar:"bg-indigo-400"},Running:{dot:"bg-blue-500",bar:"bg-blue-500"},Completed:{dot:"bg-green-500",bar:"bg-green-500"},Failed:{dot:"bg-red-500",bar:"bg-red-500"},Cancelled:{dot:"bg-gray-500",bar:"bg-gray-500"},Paused:{dot:"bg-yellow-500",bar:"bg-yellow-500"}};return S.map(A=>{var M,$;return{name:A,count:w.filter(R=>R.status===A).length,percentage:Math.round(w.filter(R=>R.status===A).length/k*100),dotColor:((M=C[A])==null?void 0:M.dot)||"bg-gray-400",barColor:(($=C[A])==null?void 0:$.bar)||"bg-gray-400"}}).filter(A=>A.count>0)}),i=J(()=>e.executions.reduce((w,k)=>w+(k.total_tests||0),0)),a=J(()=>e.executions.reduce((w,k)=>w+(k.passed_tests||0),0)),s=J(()=>e.executions.reduce((w,k)=>w+(k.failed_tests||0),0)),o=J(()=>e.executions.reduce((w,k)=>w+(k.warning_tests||0),0)),l=J(()=>i.value?Math.round(a.value/i.value*100):0),d=J(()=>i.value?Math.round(s.value/i.value*100):0),c=J(()=>{const w=e.executions.filter(S=>S.execution_time_ms);if(!w.length)return"0ms";const k=w.reduce((S,C)=>S+C.execution_time_ms,0)/w.length;return k<1e3?`${Math.round(k)}ms`:k<6e4?`${(k/1e3).toFixed(1)}s`:`${(k/6e4).toFixed(1)}m`}),f=J(()=>{const w=e.executions.filter(k=>k.records_per_second);return w.length?Math.round(w.reduce((k,S)=>k+S.records_per_second,0)/w.length):0}),p=J(()=>e.executions.reduce((w,k)=>w+(k.exceptions_found||0),0)),h=J(()=>e.executions.reduce((w,k)=>w+(k.total_records_processed||0),0)),m=J(()=>[...e.executions].sort((w,k)=>new Date(k.creation)-new Date(w.creation)).slice(0,5));function g(w){return w>=1e6?`${(w/1e6).toFixed(1)}M`:w>=1e3?`${(w/1e3).toFixed(1)}K`:w.toString()}function v(w){return w?new Date(w).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}function _(w){return{Pending:"gray",Queued:"blue",Running:"blue",Completed:"green",Failed:"red",Cancelled:"gray",Paused:"orange"}[w]||"gray"}function x(w){return{Pending:"bg-gray-50 border-gray-200",Queued:"bg-indigo-50 border-indigo-200",Running:"bg-blue-50 border-blue-200",Completed:"bg-green-50 border-green-200",Failed:"bg-red-50 border-red-200",Cancelled:"bg-gray-50 border-gray-200",Paused:"bg-yellow-50 border-yellow-200"}[w]||"bg-gray-50 border-gray-200"}return(w,k)=>(T(),P("div",Men,[u("div",$en,[(T(!0),P(_e,null,we(n.value,S=>(T(),P("div",{key:S.label,class:fe(["bg-white rounded-xl border p-4 hover:shadow-md transition-shadow cursor-pointer",S.active?"ring-2 ring-blue-500":""]),onClick:C=>w.$emit("filter",S.filterKey,S.filterValue)},[u("div",Ren,[u("div",{class:fe(["p-2 rounded-lg",S.bgColor])},[(T(),he(Lt(S.icon),{class:fe(["h-5 w-5",S.iconColor])},null,8,["class"]))],2),u("div",null,[u("div",Pen,E(S.value),1),u("div",Ien,E(S.label),1)])])],10,Den))),128))]),u("div",Oen,[u("div",Len,[k[0]||(k[0]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Status Distribution",-1)),u("div",Ven,[(T(!0),P(_e,null,we(r.value,S=>(T(),P("div",{key:S.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:C=>w.$emit("filter","status",S.name)},[u("div",{class:fe(["w-3 h-3 rounded-full",S.dotColor])},null,2),u("div",jen,E(S.name),1),u("div",Fen,E(S.count),1),u("div",Ben,[u("div",{class:fe(["h-2 rounded-full",S.barColor]),style:nt({width:`${S.percentage}%`})},null,6)])],8,Nen))),128))])]),u("div",zen,[k[6]||(k[6]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Test Results Summary",-1)),u("div",Uen,[u("div",Hen,[(T(),P("svg",qen,[k[1]||(k[1]=u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:"#E5E7EB","stroke-width":"3"},null,-1)),u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:"#22C55E","stroke-width":"3","stroke-dasharray":`${l.value} ${100-l.value}`,"stroke-linecap":"round"},null,8,Wen),u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:"#EF4444","stroke-width":"3","stroke-dasharray":`${d.value} ${100-d.value}`,"stroke-dashoffset":`${-l.value}`,"stroke-linecap":"round"},null,8,Gen)])),u("div",Yen,[u("div",Ken,E(i.value),1),k[2]||(k[2]=u("div",{class:"text-xs text-gray-500"},"Total Tests",-1))])])]),u("div",Xen,[u("div",Zen,[k[3]||(k[3]=u("div",{class:"w-3 h-3 rounded-full bg-green-500"},null,-1)),u("span",Qen,"Pass: "+E(a.value),1)]),u("div",Jen,[k[4]||(k[4]=u("div",{class:"w-3 h-3 rounded-full bg-red-500"},null,-1)),u("span",etn,"Fail: "+E(s.value),1)]),u("div",ttn,[k[5]||(k[5]=u("div",{class:"w-3 h-3 rounded-full bg-yellow-500"},null,-1)),u("span",ntn,"Warn: "+E(o.value),1)])])]),u("div",rtn,[k[11]||(k[11]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Performance Overview",-1)),u("div",itn,[u("div",atn,[u("div",stn,[b(y(Ii),{class:"h-4 w-4 text-gray-400"}),k[7]||(k[7]=u("span",{class:"text-sm text-gray-600"},"Avg Duration",-1))]),u("span",otn,E(c.value),1)]),u("div",ltn,[u("div",utn,[b(y(AY),{class:"h-4 w-4 text-gray-400"}),k[8]||(k[8]=u("span",{class:"text-sm text-gray-600"},"Throughput",-1))]),u("span",dtn,E(f.value)+" rec/s",1)]),u("div",ctn,[u("div",ftn,[b(y(nn),{class:"h-4 w-4 text-gray-400"}),k[9]||(k[9]=u("span",{class:"text-sm text-gray-600"},"Total Exceptions",-1))]),u("span",ptn,E(p.value),1)]),u("div",htn,[u("div",mtn,[b(y(ri),{class:"h-4 w-4 text-gray-400"}),k[10]||(k[10]=u("span",{class:"text-sm text-gray-600"},"Records Processed",-1))]),u("span",gtn,E(g(h.value)),1)])])])]),u("div",vtn,[k[12]||(k[12]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Recent Executions",-1)),u("div",ytn,[(T(!0),P(_e,null,we(m.value,S=>(T(),P("div",{key:S.name,class:fe(["flex-shrink-0 p-3 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow min-w-[200px]",x(S.status)]),onClick:C=>w.$emit("select",S)},[u("div",_tn,[b(y(Ee),{theme:_(S.status)},{default:D(()=>[W(E(S.status),1)]),_:2},1032,["theme"]),u("span",xtn,E(v(S.creation)),1)]),u("div",wtn,E(S.execution_name),1),u("div",ktn,E(S.test_library_reference),1)],10,btn))),128)),m.value.length?ie("",!0):(T(),P("div",Stn," No recent executions "))])])]))}},Atn={class:"flex h-[75vh]"},Ttn={class:"w-56 border-r bg-gray-50 p-4 flex flex-col"},Etn={class:"space-y-1 flex-1"},Mtn=["onClick"],$tn={class:"text-sm"},Dtn={class:"mt-4 pt-4 border-t"},Rtn={class:"text-xs text-gray-500 mb-2"},Ptn={class:"w-full bg-gray-200 rounded-full h-2"},Itn={class:"flex-1 flex flex-col overflow-hidden"},Otn={class:"flex-1 overflow-y-auto p-6"},Ltn={class:"space-y-4"},Vtn={class:"grid grid-cols-3 gap-4"},Ntn={class:"grid grid-cols-3 gap-4"},jtn={class:"space-y-4"},Ftn={class:"grid grid-cols-2 gap-4"},Btn={class:"grid grid-cols-2 gap-4"},ztn={class:"grid grid-cols-2 gap-4"},Utn={class:"flex items-center gap-3"},Htn={class:"flex-1 bg-gray-200 rounded-full h-3"},qtn={class:"text-sm font-medium"},Wtn={class:"space-y-4"},Gtn={class:"flex items-center justify-between mb-3"},Ytn={class:"border rounded-lg overflow-hidden"},Ktn={class:"min-w-full divide-y divide-gray-200"},Xtn={class:"bg-white divide-y divide-gray-200"},Ztn={class:"px-4 py-2"},Qtn={class:"px-4 py-2"},Jtn={class:"px-4 py-2"},enn={class:"px-4 py-2"},tnn={class:"px-4 py-2"},nnn={key:0},rnn={class:"space-y-4"},inn={class:"grid grid-cols-4 gap-4"},ann={class:"p-4 bg-blue-50 rounded-lg border border-blue-200"},snn={class:"text-2xl font-bold text-blue-700"},onn={class:"p-4 bg-green-50 rounded-lg border border-green-200"},lnn={class:"text-2xl font-bold text-green-700"},unn={class:"p-4 bg-red-50 rounded-lg border border-red-200"},dnn={class:"text-2xl font-bold text-red-700"},cnn={class:"p-4 bg-yellow-50 rounded-lg border border-yellow-200"},fnn={class:"text-2xl font-bold text-yellow-700"},pnn={class:"grid grid-cols-3 gap-4"},hnn={class:"mt-6"},mnn={class:"flex items-center justify-between mb-3"},gnn={class:"border rounded-lg overflow-hidden max-h-64 overflow-y-auto"},vnn={class:"min-w-full divide-y divide-gray-200"},ynn={class:"bg-white divide-y divide-gray-200"},bnn={class:"px-3 py-2"},_nn={class:"px-3 py-2"},xnn={class:"px-3 py-2"},wnn={class:"px-3 py-2"},knn={class:"px-3 py-2"},Snn={key:0},Cnn={class:"space-y-4"},Ann={class:"flex items-center justify-between mb-3"},Tnn={class:"border rounded-lg overflow-hidden max-h-80 overflow-y-auto bg-gray-900"},Enn={class:"min-w-full"},Mnn={class:"divide-y divide-gray-700"},$nn={class:"px-3 py-2 text-xs text-gray-400 font-mono"},Dnn={class:"px-3 py-2"},Rnn={class:"px-3 py-2 text-sm text-gray-300 font-mono"},Pnn={class:"px-3 py-2"},Inn={key:0},Onn={class:"mt-4"},Lnn={class:"space-y-4"},Vnn={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},Nnn={class:"flex items-start gap-3"},jnn={class:"grid grid-cols-3 gap-4"},Fnn={class:"p-4 bg-white rounded-lg border"},Bnn={class:"flex items-center gap-2 mb-2"},znn={class:"text-2xl font-bold text-gray-900"},Unn={class:"p-4 bg-white rounded-lg border"},Hnn={class:"flex items-center gap-2 mb-2"},qnn={class:"text-2xl font-bold text-gray-900"},Wnn={class:"p-4 bg-white rounded-lg border"},Gnn={class:"flex items-center gap-2 mb-2"},Ynn={class:"text-2xl font-bold text-gray-900"},Knn={class:"grid grid-cols-2 gap-4"},Xnn={class:"p-4 bg-white rounded-lg border"},Znn={class:"flex items-center gap-2 mb-2"},Qnn={class:"text-2xl font-bold text-gray-900"},Jnn={class:"p-4 bg-white rounded-lg border"},ern={class:"flex items-center gap-2 mb-2"},trn={class:"text-2xl font-bold text-gray-900"},nrn={class:"space-y-4"},rrn={class:"grid grid-cols-2 gap-4"},irn={class:"grid grid-cols-2 gap-4"},arn={class:"grid grid-cols-2 gap-4"},srn={class:"border-t bg-gray-50 px-6 py-4 flex items-center justify-between"},orn={class:"flex items-center gap-2"},lrn={__name:"TestExecutionForm",props:{show:{type:Boolean,default:!1},execution:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.show,set:V=>r("update:show",V)}),a=J(()=>{var V;return!!((V=n.execution)!=null&&V.name)}),s=Q(!1),o=Q(0),l=[{id:"basic",title:"Basic Information",icon:HS,description:"Execution identification and configuration"},{id:"schedule",title:"Schedule",icon:er,description:"Execution timing and progress"},{id:"parameters",title:"Parameters",icon:XD,description:"Test execution parameters"},{id:"results",title:"Results",icon:cr,description:"Test results and findings"},{id:"logs",title:"Logs",icon:vt,description:"Execution logs and errors"},{id:"performance",title:"Performance",icon:HL,description:"Performance metrics"},{id:"audit",title:"Audit Trail",icon:kr,description:"Audit information and notes"}],d=Jt({execution_id:"",execution_name:"",test_library_reference:"",execution_type:"Manual",priority:"Medium",status:"Pending",scheduled_start_date:"",scheduled_end_date:"",actual_start_date:"",actual_end_date:"",duration_seconds:0,progress_percentage:0,execution_parameters:[],test_results:[],result_summary:!0,total_tests:0,passed_tests:0,failed_tests:0,warning_tests:0,total_records_processed:0,exceptions_found:0,critical_findings:0,execution_logs:[],error_details:"",performance_metrics:!0,execution_time_ms:0,memory_usage_mb:0,cpu_usage_percent:0,records_per_second:0,queries_executed:0,created_by:"",creation_date:"",approved_by:"",approval_date:"",last_modified_by:"",last_modified_date:"",notes:""}),c=[{label:"Manual",value:"Manual"},{label:"Scheduled",value:"Scheduled"},{label:"Batch",value:"Batch"},{label:"API",value:"API"}],f=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],p=[{label:"Pending",value:"Pending"},{label:"Queued",value:"Queued"},{label:"Running",value:"Running"},{label:"Completed",value:"Completed"},{label:"Failed",value:"Failed"},{label:"Cancelled",value:"Cancelled"},{label:"Paused",value:"Paused"}],h=[{label:"String",value:"String"},{label:"Integer",value:"Integer"},{label:"Float",value:"Float"},{label:"Date",value:"Date"},{label:"Boolean",value:"Boolean"}],m=[{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"},{label:"Warning",value:"Warning"},{label:"Skipped",value:"Skipped"}];Je(()=>n.execution,V=>{V?Object.keys(d).forEach(L=>{V[L]!==void 0&&(d[L]=V[L])}):q()},{immediate:!0});const g=J(()=>[!!(d.execution_name&&d.test_library_reference&&d.execution_type&&d.status),!0,!0,!0,!0,!0,!0]),v=J(()=>g.value.filter(Boolean).length),_=J(()=>Math.round(v.value/l.length*100));function x(V){return g.value[V]}function w(V){return o.value===V?"text-blue-600":x(V)?"text-green-500":"text-gray-400"}function k(V){o.value=V}function S(){o.value<l.length-1&&o.value++}function C(){o.value>0&&o.value--}function A(V){return V>=100?"bg-green-500":V>=50?"bg-blue-500":V>0?"bg-yellow-500":"bg-gray-300"}function M(V){return{INFO:"blue",WARNING:"orange",ERROR:"red",DEBUG:"gray",SUCCESS:"green"}[V]||"gray"}function $(V){return V?V<1e3?`${V}ms`:V<6e4?`${(V/1e3).toFixed(2)}s`:`${(V/6e4).toFixed(2)}m`:"0ms"}function R(){d.execution_parameters.push({parameter_name:"",parameter_value:"",parameter_type:"String",description:""})}function I(V){d.execution_parameters.splice(V,1)}function B(){d.test_results.push({test_name:"",status:"Pass",exception_count:0,message:""})}function j(V){d.test_results.splice(V,1)}function z(){d.execution_logs.push({timestamp:new Date().toISOString(),level:"INFO",message:""})}function F(V){d.execution_logs.splice(V,1)}function q(){Object.keys(d).forEach(V=>{Array.isArray(d[V])?d[V]=[]:typeof d[V]=="number"?d[V]=0:typeof d[V]=="boolean"?d[V]=!0:d[V]=""}),d.execution_type="Manual",d.priority="Medium",d.status="Pending",o.value=0}function N(){r("update:show",!1),q()}function O(){return le(this,null,function*(){s.value=!0;try{console.log("Saving execution:",d),r("saved",me({},d)),N()}catch(V){console.error("Error saving execution:",V)}finally{s.value=!1}})}return(V,L)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":L[22]||(L[22]=U=>i.value=U),options:{title:a.value?"Edit Test Execution":"New Test Execution",size:"7xl"}},{"body-content":D(()=>{var U,G,X,re,ee,de;return[u("div",Atn,[u("div",Ttn,[u("div",Etn,[(T(),P(_e,null,we(l,(se,te)=>u("button",{key:se.id,onClick:ne=>k(te),class:fe(["w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors",o.value===te?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"])},[(T(),he(Lt(se.icon),{class:fe(["h-4 w-4",w(te)])},null,8,["class"])),u("span",$tn,E(se.title),1),x(te)?(T(),he(y(Qs),{key:0,class:"h-4 w-4 ml-auto text-green-500"})):ie("",!0)],10,Mtn)),64))]),u("div",Dtn,[u("div",Rtn," Progress: "+E(v.value)+"/"+E(l.length)+" sections ",1),u("div",Ptn,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:nt({width:`${_.value}%`})},null,4)])])]),u("div",Itn,[b(Rt,{icon:(U=l[o.value])==null?void 0:U.icon,title:(G=l[o.value])==null?void 0:G.title,description:(X=l[o.value])==null?void 0:X.description},null,8,["icon","title","description"]),u("div",Otn,[xe(u("div",Ltn,[u("div",Vtn,[b(y(ge),{modelValue:d.execution_id,"onUpdate:modelValue":L[0]||(L[0]=se=>d.execution_id=se),label:"Execution ID",type:"text",placeholder:"Auto-generated",disabled:""},null,8,["modelValue"]),b(y(ge),{modelValue:d.execution_name,"onUpdate:modelValue":L[1]||(L[1]=se=>d.execution_name=se),label:"Execution Name *",type:"text",placeholder:"Enter execution name"},null,8,["modelValue"]),u("div",null,[L[23]||(L[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Test Library *",-1)),b(At,{modelValue:d.test_library_reference,"onUpdate:modelValue":L[2]||(L[2]=se=>d.test_library_reference=se),doctype:"Audit Test Library",placeholder:"Select test"},null,8,["modelValue"])])]),u("div",Ntn,[u("div",null,[L[24]||(L[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Execution Type *",-1)),b(y(Ke),{modelValue:d.execution_type,"onUpdate:modelValue":L[3]||(L[3]=se=>d.execution_type=se),options:c,placeholder:"Select type"},null,8,["modelValue"])]),u("div",null,[L[25]||(L[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),b(y(Ke),{modelValue:d.priority,"onUpdate:modelValue":L[4]||(L[4]=se=>d.priority=se),options:f,placeholder:"Select priority"},null,8,["modelValue"])]),u("div",null,[L[26]||(L[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status *",-1)),b(y(Ke),{modelValue:d.status,"onUpdate:modelValue":L[5]||(L[5]=se=>d.status=se),options:p,placeholder:"Select status"},null,8,["modelValue"])])])],512),[[ot,o.value===0]]),xe(u("div",jtn,[u("div",Ftn,[b(y(ge),{modelValue:d.scheduled_start_date,"onUpdate:modelValue":L[6]||(L[6]=se=>d.scheduled_start_date=se),label:"Scheduled Start Date",type:"datetime-local"},null,8,["modelValue"]),b(y(ge),{modelValue:d.scheduled_end_date,"onUpdate:modelValue":L[7]||(L[7]=se=>d.scheduled_end_date=se),label:"Scheduled End Date",type:"datetime-local"},null,8,["modelValue"])]),u("div",Btn,[b(y(ge),{modelValue:d.actual_start_date,"onUpdate:modelValue":L[8]||(L[8]=se=>d.actual_start_date=se),label:"Actual Start Date",type:"datetime-local",disabled:""},null,8,["modelValue"]),b(y(ge),{modelValue:d.actual_end_date,"onUpdate:modelValue":L[9]||(L[9]=se=>d.actual_end_date=se),label:"Actual End Date",type:"datetime-local",disabled:""},null,8,["modelValue"])]),u("div",ztn,[b(y(ge),{modelValue:d.duration_seconds,"onUpdate:modelValue":L[10]||(L[10]=se=>d.duration_seconds=se),label:"Duration (Seconds)",type:"number",disabled:""},null,8,["modelValue"]),u("div",null,[L[27]||(L[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Progress",-1)),u("div",Utn,[u("div",Htn,[u("div",{class:fe(["h-3 rounded-full transition-all",A(d.progress_percentage)]),style:nt({width:`${d.progress_percentage||0}%`})},null,6)]),u("span",qtn,E(d.progress_percentage||0)+"%",1)])])])],512),[[ot,o.value===1]]),xe(u("div",Wtn,[u("div",Gtn,[L[29]||(L[29]=u("h4",{class:"text-sm font-medium text-gray-700"},"Parameters",-1)),b(y(Z),{size:"sm",onClick:R},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[L[28]||(L[28]=W(" Add Parameter ",-1))]),_:1})]),u("div",Ytn,[u("table",Ktn,[L[31]||(L[31]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Parameter Name"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Value"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Type"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",Xtn,[(T(!0),P(_e,null,we(d.execution_parameters,(se,te)=>(T(),P("tr",{key:te},[u("td",Ztn,[b(y(ge),{modelValue:se.parameter_name,"onUpdate:modelValue":ne=>se.parameter_name=ne,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Qtn,[b(y(ge),{modelValue:se.parameter_value,"onUpdate:modelValue":ne=>se.parameter_value=ne,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Jtn,[b(y(Ke),{modelValue:se.parameter_type,"onUpdate:modelValue":ne=>se.parameter_type=ne,options:h,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",enn,[b(y(ge),{modelValue:se.description,"onUpdate:modelValue":ne=>se.description=ne,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",tnn,[b(y(Z),{variant:"ghost",size:"sm",onClick:ne=>I(te)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(re=d.execution_parameters)!=null&&re.length?ie("",!0):(T(),P("tr",nnn,[...L[30]||(L[30]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No parameters defined. Click "Add Parameter" to configure test parameters. ',-1)])]))])])])],512),[[ot,o.value===2]]),xe(u("div",rnn,[u("div",inn,[u("div",ann,[u("div",snn,E(d.total_tests||0),1),L[32]||(L[32]=u("div",{class:"text-sm text-blue-600"},"Total Tests",-1))]),u("div",onn,[u("div",lnn,E(d.passed_tests||0),1),L[33]||(L[33]=u("div",{class:"text-sm text-green-600"},"Passed",-1))]),u("div",unn,[u("div",dnn,E(d.failed_tests||0),1),L[34]||(L[34]=u("div",{class:"text-sm text-red-600"},"Failed",-1))]),u("div",cnn,[u("div",fnn,E(d.warning_tests||0),1),L[35]||(L[35]=u("div",{class:"text-sm text-yellow-600"},"Warnings",-1))])]),u("div",pnn,[b(y(ge),{modelValue:d.total_records_processed,"onUpdate:modelValue":L[11]||(L[11]=se=>d.total_records_processed=se),label:"Records Processed",type:"number",disabled:""},null,8,["modelValue"]),b(y(ge),{modelValue:d.exceptions_found,"onUpdate:modelValue":L[12]||(L[12]=se=>d.exceptions_found=se),label:"Exceptions Found",type:"number",disabled:""},null,8,["modelValue"]),b(y(ge),{modelValue:d.critical_findings,"onUpdate:modelValue":L[13]||(L[13]=se=>d.critical_findings=se),label:"Critical Findings",type:"number",disabled:""},null,8,["modelValue"])]),u("div",hnn,[u("div",mnn,[L[37]||(L[37]=u("h4",{class:"text-sm font-medium text-gray-700"},"Detailed Results",-1)),b(y(Z),{size:"sm",variant:"outline",onClick:B},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[L[36]||(L[36]=W(" Add Result ",-1))]),_:1})]),u("div",gnn,[u("table",vnn,[L[39]||(L[39]=u("thead",{class:"bg-gray-50 sticky top-0"},[u("tr",null,[u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Test Name"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Status"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Exceptions"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Message"),u("th",{class:"px-3 py-2 w-12"})])],-1)),u("tbody",ynn,[(T(!0),P(_e,null,we(d.test_results,(se,te)=>(T(),P("tr",{key:te},[u("td",bnn,[b(y(ge),{modelValue:se.test_name,"onUpdate:modelValue":ne=>se.test_name=ne,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",_nn,[b(y(Ke),{modelValue:se.status,"onUpdate:modelValue":ne=>se.status=ne,options:m,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",xnn,[b(y(ge),{modelValue:se.exception_count,"onUpdate:modelValue":ne=>se.exception_count=ne,type:"number",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",wnn,[b(y(ge),{modelValue:se.message,"onUpdate:modelValue":ne=>se.message=ne,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",knn,[b(y(Z),{variant:"ghost",size:"sm",onClick:ne=>j(te)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(ee=d.test_results)!=null&&ee.length?ie("",!0):(T(),P("tr",Snn,[...L[38]||(L[38]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"}," No results yet. Results will appear after execution. ",-1)])]))])])])])],512),[[ot,o.value===3]]),xe(u("div",Cnn,[u("div",Ann,[L[41]||(L[41]=u("h4",{class:"text-sm font-medium text-gray-700"},"Execution Logs",-1)),b(y(Z),{size:"sm",variant:"outline",onClick:z},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[L[40]||(L[40]=W(" Add Log ",-1))]),_:1})]),u("div",Tnn,[u("table",Enn,[L[43]||(L[43]=u("thead",{class:"bg-gray-800 sticky top-0"},[u("tr",null,[u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-400 w-40"},"Timestamp"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-400 w-24"},"Level"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-400"},"Message"),u("th",{class:"px-3 py-2 w-12"})])],-1)),u("tbody",Mnn,[(T(!0),P(_e,null,we(d.execution_logs,(se,te)=>(T(),P("tr",{key:te},[u("td",$nn,E(se.timestamp||new Date().toISOString()),1),u("td",Dnn,[b(y(Ee),{theme:M(se.level)},{default:D(()=>[W(E(se.level),1)]),_:2},1032,["theme"])]),u("td",Rnn,E(se.message),1),u("td",Pnn,[b(y(Z),{variant:"ghost",size:"sm",onClick:ne=>F(te)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-400"})]),_:1},8,["onClick"])])]))),128)),(de=d.execution_logs)!=null&&de.length?ie("",!0):(T(),P("tr",Inn,[...L[42]||(L[42]=[u("td",{colspan:"4",class:"px-4 py-8 text-center text-gray-500 text-sm"}," No logs recorded yet. ",-1)])]))])])]),u("div",Onn,[L[44]||(L[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Error Details",-1)),b(y(an),{modelValue:d.error_details,"onUpdate:modelValue":L[14]||(L[14]=se=>d.error_details=se),content:d.error_details,placeholder:"Error details will appear here if any errors occur...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[ot,o.value===4]]),xe(u("div",Lnn,[u("div",Vnn,[u("div",Nnn,[b(y(HL),{class:"h-5 w-5 text-blue-600 mt-0.5"}),L[45]||(L[45]=u("div",{class:"text-sm text-blue-700"},[u("p",{class:"font-medium"},"Performance Metrics"),u("p",null,"These metrics are automatically captured during test execution.")],-1))])]),u("div",jnn,[u("div",Fnn,[u("div",Bnn,[b(y(Ii),{class:"h-5 w-5 text-gray-400"}),L[46]||(L[46]=u("span",{class:"text-sm text-gray-600"},"Execution Time",-1))]),u("div",znn,E($(d.execution_time_ms)),1)]),u("div",Unn,[u("div",Hnn,[b(y(efe),{class:"h-5 w-5 text-gray-400"}),L[47]||(L[47]=u("span",{class:"text-sm text-gray-600"},"Memory Usage",-1))]),u("div",qnn,E(d.memory_usage_mb||0)+" MB ",1)]),u("div",Wnn,[u("div",Gnn,[b(y(Gce),{class:"h-5 w-5 text-gray-400"}),L[48]||(L[48]=u("span",{class:"text-sm text-gray-600"},"CPU Usage",-1))]),u("div",Ynn,E(d.cpu_usage_percent||0)+"% ",1)])]),u("div",Knn,[u("div",Xnn,[u("div",Znn,[b(y(AY),{class:"h-5 w-5 text-gray-400"}),L[49]||(L[49]=u("span",{class:"text-sm text-gray-600"},"Throughput",-1))]),u("div",Qnn,[W(E(d.records_per_second||0)+" ",1),L[50]||(L[50]=u("span",{class:"text-sm font-normal text-gray-500"},"records/sec",-1))])]),u("div",Jnn,[u("div",ern,[b(y(ri),{class:"h-5 w-5 text-gray-400"}),L[51]||(L[51]=u("span",{class:"text-sm text-gray-600"},"Queries Executed",-1))]),u("div",trn,E(d.queries_executed||0),1)])])],512),[[ot,o.value===5]]),xe(u("div",nrn,[u("div",rrn,[u("div",null,[L[52]||(L[52]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Created By",-1)),b(At,{modelValue:d.created_by,"onUpdate:modelValue":L[15]||(L[15]=se=>d.created_by=se),doctype:"User",placeholder:"Auto-filled",disabled:""},null,8,["modelValue"])]),b(y(ge),{modelValue:d.creation_date,"onUpdate:modelValue":L[16]||(L[16]=se=>d.creation_date=se),label:"Creation Date",type:"datetime-local",disabled:""},null,8,["modelValue"])]),u("div",irn,[u("div",null,[L[53]||(L[53]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved By",-1)),b(At,{modelValue:d.approved_by,"onUpdate:modelValue":L[17]||(L[17]=se=>d.approved_by=se),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])]),b(y(ge),{modelValue:d.approval_date,"onUpdate:modelValue":L[18]||(L[18]=se=>d.approval_date=se),label:"Approval Date",type:"datetime-local"},null,8,["modelValue"])]),u("div",arn,[u("div",null,[L[54]||(L[54]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Modified By",-1)),b(At,{modelValue:d.last_modified_by,"onUpdate:modelValue":L[19]||(L[19]=se=>d.last_modified_by=se),doctype:"User",placeholder:"Auto-filled",disabled:""},null,8,["modelValue"])]),b(y(ge),{modelValue:d.last_modified_date,"onUpdate:modelValue":L[20]||(L[20]=se=>d.last_modified_date=se),label:"Last Modified Date",type:"datetime-local",disabled:""},null,8,["modelValue"])]),u("div",null,[L[55]||(L[55]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),b(y(an),{modelValue:d.notes,"onUpdate:modelValue":L[21]||(L[21]=se=>d.notes=se),content:d.notes,placeholder:"Additional notes...","editor-class":"prose-sm max-w-none min-h-[120px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[ot,o.value===6]])]),u("div",srn,[b(y(Z),{variant:"outline",onClick:C,disabled:o.value===0},{prefix:D(()=>[b(y(pr),{class:"h-4 w-4"})]),default:D(()=>[L[56]||(L[56]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",orn,[b(y(Z),{variant:"outline",onClick:N},{default:D(()=>[...L[57]||(L[57]=[W("Cancel",-1)])]),_:1}),o.value<l.length-1?(T(),he(y(Z),{key:0,variant:"solid",onClick:S},{suffix:D(()=>[b(y(tr),{class:"h-4 w-4"})]),default:D(()=>[L[58]||(L[58]=W(" Next ",-1))]),_:1})):(T(),he(y(Z),{key:1,variant:"solid",theme:"green",onClick:O,loading:s.value},{prefix:D(()=>[b(y(Cr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+E(a.value?"Update Execution":"Create Execution"),1)]),_:1},8,["loading"]))])])])])]}),_:1},8,["modelValue","options"]))}},urn=Ul("testExecution",()=>{const t=Q([]),e=Q([]),n=Q([]),r=Q([]),i=Q([]),a=Q(null),s=Q(!1),o=Q(""),l=Q([]),d=Q([]),c=Q({status:"",testLibrary:"",executionType:"",priority:"",dateFrom:"",dateTo:""}),f=Q({pending:0,running:0,completed:0,failed:0,cancelled:0}),p=J(()=>t.value.filter(re=>re.execution_status==="Running"||re.execution_status==="Pending")),h=J(()=>t.value.filter(re=>re.execution_status==="Completed")),m=J(()=>t.value.filter(re=>re.execution_status==="Failed")),g=J(()=>{const re={};return t.value.forEach(ee=>{const de=ee.execution_status||"Unknown";re[de]||(re[de]=[]),re[de].push(ee)}),re}),v=J(()=>{if(!a.value)return 0;const re=a.value.total_tests||1,ee=a.value.completed_tests||0;return Math.round(ee/re*100)}),_=J(()=>{let re=t.value;if(o.value){const ee=o.value.toLowerCase();re=re.filter(de=>{var se,te,ne;return((se=de.execution_name)==null?void 0:se.toLowerCase().includes(ee))||((te=de.execution_id)==null?void 0:te.toLowerCase().includes(ee))||((ne=de.test_library_name)==null?void 0:ne.toLowerCase().includes(ee))})}return c.value.status&&(re=re.filter(ee=>ee.execution_status===c.value.status)),c.value.testLibrary&&(re=re.filter(ee=>ee.test_library_id===c.value.testLibrary)),c.value.executionType&&(re=re.filter(ee=>ee.execution_type===c.value.executionType)),c.value.priority&&(re=re.filter(ee=>ee.priority_level===c.value.priority)),c.value.dateFrom&&(re=re.filter(ee=>new Date(ee.creation)>=new Date(c.value.dateFrom))),c.value.dateTo&&(re=re.filter(ee=>new Date(ee.creation)<=new Date(c.value.dateTo))),re}),x=re=>{o.value=re},w=()=>{o.value=""},k=re=>{Object.assign(c.value,re)},S=()=>{c.value={status:"",testLibrary:"",executionType:"",priority:"",dateFrom:"",dateTo:""}},C=(...ee)=>le(void 0,[...ee],function*(re={}){s.value=!0;try{const de=yield Ie({url:"frappe.client.get_list",params:{doctype:"Test Execution",fields:["name","execution_id","execution_name","test_library_reference","execution_type","priority","status","actual_start_date","actual_end_date","duration_seconds","progress_percentage","total_tests","passed_tests","failed_tests","warning_tests","total_records_processed","exceptions_found","critical_findings","created_by","creation","modified"],filters:re,limit_page_length:1e3,order_by:"actual_start_date desc"}}).fetch();t.value=de||[],V()}catch(de){console.error("Error fetching test executions:",de),t.value=[]}finally{s.value=!1}}),A=re=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.get",params:{doctype:"Test Execution",name:re}}).fetch();return a.value=ee,ee}catch(ee){return console.error("Error fetching test execution details:",ee),null}}),M=re=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.insert",params:{doc:me({doctype:"Test Execution"},re)}}).fetch();return yield C(),ee}catch(ee){throw console.error("Error creating test execution:",ee),ee}}),$=(re,ee)=>le(void 0,null,function*(){try{const de=yield Ie({url:"frappe.client.set_value",params:{doctype:"Test Execution",name:re,fieldname:ee}}).fetch();return yield C(),de}catch(de){throw console.error("Error updating test execution:",de),de}}),R=re=>le(void 0,null,function*(){try{const ee=yield Ie({url:"mkaguzi.api.test_execution.start_execution",params:{execution_id:re}}).fetch();return yield A(re),yield C(),ee}catch(ee){throw console.error("Error starting test execution:",ee),ee}}),I=re=>le(void 0,null,function*(){try{const ee=yield Ie({url:"mkaguzi.api.test_execution.stop_execution",params:{execution_id:re}}).fetch();return yield A(re),yield C(),ee}catch(ee){throw console.error("Error stopping test execution:",ee),ee}}),B=re=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.get_list",params:{doctype:"Test Result",filters:{test_execution:re},fields:["name","test_id","test_name","result_status","actual_value","expected_value","variance","threshold_met","exception_count","result_summary","execution_time","started_at","completed_at"],limit_page_length:1e3,order_by:"started_at desc"}}).fetch();return e.value=ee||[],ee}catch(ee){return console.error("Error fetching test results:",ee),e.value=[],[]}}),j=re=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.get_list",params:{doctype:"Test Parameter",filters:{parent:re,parenttype:"Audit Test Library"},fields:["name","parameter_name","parameter_type","default_value","is_required","description","validation_rule"],limit_page_length:1e3}}).fetch();return n.value=ee||[],ee}catch(ee){return console.error("Error fetching test parameters:",ee),n.value=[],[]}}),z=re=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.get_list",params:{doctype:"Test Threshold",filters:{parent:re,parenttype:"Audit Test Library"},fields:["name","threshold_name","threshold_type","operator","threshold_value","warning_threshold","critical_threshold","description"],limit_page_length:1e3}}).fetch();return r.value=ee||[],ee}catch(ee){return console.error("Error fetching test thresholds:",ee),r.value=[],[]}}),F=re=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.get_list",params:{doctype:"Execution Log",filters:{parent:re,parenttype:"Test Execution"},fields:["name","timestamp","log_level","message","step_name","duration_ms"],limit_page_length:1e3,order_by:"timestamp desc"}}).fetch();return i.value=ee||[],ee}catch(ee){return console.error("Error fetching execution logs:",ee),i.value=[],[]}}),q=re=>le(void 0,null,function*(){try{const ee=yield Ie({url:"frappe.client.get_list",params:{doctype:"Analytical Procedure Result",filters:{test_execution:re},fields:["name","procedure_name","procedure_type","current_value","prior_value","budget_value","variance_amount","variance_percentage","significance_level","investigation_required","conclusion","completed_at"],limit_page_length:1e3}}).fetch();return d.value=ee||[],ee}catch(ee){return console.error("Error fetching analytical procedure results:",ee),d.value=[],[]}}),N=re=>le(void 0,null,function*(){try{return yield Ie({url:"mkaguzi.api.test_execution.run_analytical_procedure",params:re}).fetch()}catch(ee){throw console.error("Error running analytical procedure:",ee),ee}}),O=(re,ee="excel")=>le(void 0,null,function*(){try{return yield Ie({url:"mkaguzi.api.test_execution.export_results",params:{execution_id:re,format:ee}}).fetch()}catch(de){throw console.error("Error exporting test results:",de),de}}),V=()=>{const re={pending:0,running:0,completed:0,failed:0,cancelled:0};t.value.forEach(ee=>{var se;const de=((se=ee.status)==null?void 0:se.toLowerCase())||"pending";re.hasOwnProperty(de)&&re[de]++}),f.value=re};return{testExecutions:t,testResults:e,testParameters:n,testThresholds:r,executionLogs:i,currentExecution:a,loading:s,searchQuery:o,filters:c,testLibraryTests:l,analyticalProcedures:d,executionStatuses:f,activeExecutions:p,completedExecutions:h,failedExecutions:m,executionsByStatus:g,executionProgress:v,filteredExecutions:_,setSearchQuery:x,clearSearchQuery:w,setFilters:k,clearFilters:S,fetchTestExecutions:C,fetchTestExecutionDetails:A,createTestExecution:M,updateTestExecution:$,startTestExecution:R,stopTestExecution:I,fetchTestResults:B,fetchTestParameters:j,fetchTestThresholds:z,fetchExecutionLogs:F,fetchAnalyticalProcedureResults:q,runAnalyticalProcedure:N,exportTestResults:O,getExecutionById:re=>t.value.find(ee=>ee.name===re),getExecutionsByEngagement:re=>t.value.filter(ee=>ee.audit_engagement===re),clearCurrentExecution:()=>{a.value=null,e.value=[],i.value=[],d.value=[]},calculateExecutionMetrics:re=>{if(!re)return null;const ee=re.total_tests||0,de=re.completed_tests||0,se=re.failed_tests||0,te=de-se;return{totalTests:ee,completedTests:de,failedTests:se,successfulTests:te,successRate:ee>0?Math.round(te/ee*100):0,completionRate:ee>0?Math.round(de/ee*100):0,failureRate:de>0?Math.round(se/de*100):0}}}}),drn={class:"test-execution-page"},crn={class:"page-header"},frn={class:"header-content"},prn={class:"page-title"},hrn={class:"my-6"},mrn={class:"executions-section"},grn={class:"table-container"},vrn={class:"executions-table"},yrn={class:"checkbox-column"},brn={class:"checkbox-column"},_rn={class:"execution-id"},xrn={class:"test-name"},wrn={class:"category"},krn={class:"status"},Srn={class:"start-time"},Crn={class:"duration"},Arn={class:"executed-by"},Trn={class:"actions"},Ern={class:"action-buttons"},Mrn={key:0,class:"empty-state"},$rn={key:1,class:"loading-state"},Drn={key:0,class:"pagination-section"},Rrn={class:"pagination-info"},Prn={class:"pagination-controls"},Irn={class:"page-indicator"},Orn={key:0,class:"execution-details"},Lrn={class:"details-grid"},Vrn={class:"detail-section"},Nrn={class:"detail-rows"},jrn={class:"detail-row"},Frn={class:"detail-value"},Brn={class:"detail-row"},zrn={class:"detail-value"},Urn={class:"detail-row"},Hrn={class:"detail-row"},qrn={class:"detail-value"},Wrn={class:"detail-row"},Grn={class:"detail-value"},Yrn={class:"detail-row"},Krn={class:"detail-value"},Xrn={class:"detail-row"},Zrn={class:"detail-value"},Qrn={class:"detail-section"},Jrn={key:0,class:"results-list"},ein={class:"result-header"},tin={class:"result-description"},nin={key:0,class:"result-error"},rin={key:1,class:"no-results"},iin={__name:"TestExecution",setup(t){const e=urn();Bo();const n=Q([]),r=Q([]),i=Q(!1);Q(!1);const a=Q(!1),s=Q(!1),o=Q(!1),l=Q(null),d=Q(null),c=Q([]),f=Q({status:"",search:"",testLibrary:"",executionType:"",priority:"",dateFrom:"",dateTo:""});Q({type:"Manual",scheduleTime:"",priority:"Normal"});const p=Q(1),h=Q(20),m=Q(0),g=Q(0);J(()=>({running:e.executionStatuses.running,completed:e.executionStatuses.completed,failed:e.executionStatuses.failed,total:e.testExecutions.length}));const v=J(()=>{let L=e.testExecutions;if(f.value.status&&(L=L.filter(U=>U.status===f.value.status)),f.value.category&&(L=L.filter(U=>U.execution_type===f.value.category)),f.value.search){const U=f.value.search.toLowerCase();L=L.filter(G=>{var X,re;return((X=G.execution_name)==null?void 0:X.toLowerCase().includes(U))||((re=G.execution_id)==null?void 0:re.toLowerCase().includes(U))})}return L}),_=J(()=>e.testLibraryTests);J(()=>_.value.filter(L=>r.value.includes(L.name)));const x=J(()=>e.loading),w=()=>le(this,null,function*(){yield e.fetchTestExecutions()}),k=()=>le(this,null,function*(){console.log("Loading available tests...")}),S=L=>{Object.assign(f.value,L),p.value=1,w()},C=(L,U)=>{L&&U&&(f.value[L]=U,p.value=1,w())},A=L=>le(this,null,function*(){var U;try{(U=d.value)!=null&&U.name?yield e.updateTestExecution(d.value.name,L):yield e.createTestExecution(L),o.value=!1,d.value=null,yield w()}catch(G){console.error("Failed to save execution:",G)}}),M=()=>{i.value?n.value=v.value.map(L=>L.name):n.value=[]},$=L=>le(this,null,function*(){l.value=L,s.value=!0;try{const U=yield e.fetchTestResults(L.name);c.value=U,yield e.fetchExecutionLogs(L.name)}catch(U){console.error("Failed to load execution results:",U),c.value=[]}}),R=L=>le(this,null,function*(){try{yield e.stopTestExecution(L.name)}catch(U){console.error("Failed to cancel execution:",U)}}),I=L=>le(this,null,function*(){try{const U=yield e.exportTestResults(L.name,"excel");U.download_url&&window.open(U.download_url,"_blank")}catch(U){console.error("Failed to download results:",U)}}),B=()=>{console.log("Download detailed results")},j=()=>le(this,null,function*(){yield w()}),z=L=>{p.value=L,w()},F=L=>({Pending:"secondary",Running:"info",Completed:"success",Failed:"danger",Cancelled:"secondary"})[L]||"secondary",q=L=>({"Financial Controls":"blue","Operational Controls":"green",Compliance:"orange","Data Integrity":"purple",Performance:"cyan"})[L]||"gray",N=L=>({Passed:"green",Failed:"red",Warning:"orange"})[L]||"gray",O=L=>L?new Date(L).toLocaleString():"N/A",V=L=>{if(!L.actual_start_date)return"N/A";const U=new Date(L.actual_start_date),X=(L.actual_end_date?new Date(L.actual_end_date):new Date)-U,re=Math.floor(X/6e4),ee=Math.floor(X%6e4/1e3);return re>0?`${re}m ${ee}s`:`${ee}s`};return Je(n,()=>{i.value=n.value.length===v.value.length&&v.value.length>0}),bt(()=>le(this,null,function*(){yield Promise.all([w(),k()])})),(L,U)=>(T(),P("div",drn,[u("div",crn,[u("div",frn,[u("h1",prn,[b(y(eb),{class:"title-icon"}),U[9]||(U[9]=W(" Test Execution ",-1))]),U[10]||(U[10]=u("p",{class:"page-description"}," Execute and monitor audit tests with real-time results and detailed reporting ",-1))])]),b(Een,{filters:f.value,"onUpdate:filters":S,onRefresh:j,onCreate:U[0]||(U[0]=G=>o.value=!0)},null,8,["filters"]),u("div",hrn,[b(Ctn,{executions:v.value,activeFilter:f.value.status,onFilter:C,onSelect:$},null,8,["executions","activeFilter"])]),u("div",mrn,[u("div",grn,[u("table",vrn,[u("thead",null,[u("tr",null,[u("th",yrn,[b(y(Ut),{modelValue:i.value,"onUpdate:modelValue":U[1]||(U[1]=G=>i.value=G),onChange:M},null,8,["modelValue"])]),U[11]||(U[11]=u("th",null,"Execution ID",-1)),U[12]||(U[12]=u("th",null,"Test Name",-1)),U[13]||(U[13]=u("th",null,"Category",-1)),U[14]||(U[14]=u("th",null,"Status",-1)),U[15]||(U[15]=u("th",null,"Start Time",-1)),U[16]||(U[16]=u("th",null,"Duration",-1)),U[17]||(U[17]=u("th",null,"Executed By",-1)),U[18]||(U[18]=u("th",null,"Actions",-1))])]),u("tbody",null,[(T(!0),P(_e,null,we(v.value,G=>(T(),P("tr",{key:G.name,class:fe({"selected-row":n.value.includes(G.name)})},[u("td",brn,[b(y(Ut),{modelValue:n.value,"onUpdate:modelValue":U[2]||(U[2]=X=>n.value=X),value:G.name},null,8,["modelValue","value"])]),u("td",_rn,E(G.execution_id),1),u("td",xrn,E(G.execution_name),1),u("td",wrn,[b(y(Ee),{variant:q(G.execution_type)},{default:D(()=>[W(E(G.execution_type),1)]),_:2},1032,["variant"])]),u("td",krn,[b(y(Ee),{variant:F(G.status)},{default:D(()=>[W(E(G.status),1)]),_:2},1032,["variant"])]),u("td",Srn,E(O(G.actual_start_date)),1),u("td",Crn,E(V(G)),1),u("td",Arn,E(G.created_by),1),u("td",Trn,[u("div",Ern,[b(y(Z),{variant:"ghost",size:"sm",onClick:X=>$(G),title:"View Details"},{default:D(()=>[b(y(ar))]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:X=>I(G),disabled:G.status!=="Completed",title:"Download Results"},{default:D(()=>[b(y(bn))]),_:1},8,["onClick","disabled"]),b(y(Z),{variant:"ghost",size:"sm",onClick:X=>R(G),disabled:G.status!=="Running",title:"Cancel Execution"},{default:D(()=>[b(y(ht))]),_:1},8,["onClick","disabled"])])])],2))),128))])]),!v.value.length&&!x.value?(T(),P("div",Mrn,[b(y(rE),{class:"empty-icon"}),U[20]||(U[20]=u("h3",null,"No Test Executions Found",-1)),U[21]||(U[21]=u("p",null,"Execute some tests to see results here.",-1)),b(y(Z),{variant:"solid",onClick:U[3]||(U[3]=G=>a.value=!0)},{default:D(()=>[b(y(Rl)),U[19]||(U[19]=W(" Execute Tests ",-1))]),_:1})])):ie("",!0),x.value?(T(),P("div",$rn,[b(y(sfe),{class:"loading-icon"}),U[22]||(U[22]=u("p",null,"Loading test executions...",-1))])):ie("",!0)]),v.value.length?(T(),P("div",Drn,[u("div",Rrn," Showing "+E((p.value-1)*h.value+1)+" to "+E(Math.min(p.value*h.value,m.value))+" of "+E(m.value)+" executions ",1),u("div",Prn,[b(y(Z),{variant:"outline",size:"sm",disabled:p.value===1,onClick:U[4]||(U[4]=G=>z(p.value-1))},{default:D(()=>[b(y(pr)),U[23]||(U[23]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",Irn,"Page "+E(p.value)+" of "+E(g.value),1),b(y(Z),{variant:"outline",size:"sm",disabled:p.value===g.value,onClick:U[5]||(U[5]=G=>z(p.value+1))},{default:D(()=>[U[24]||(U[24]=W(" Next ",-1)),b(y(tr))]),_:1},8,["disabled"])])])):ie("",!0)]),b(y(zt),{modelValue:s.value,"onUpdate:modelValue":U[7]||(U[7]=G=>s.value=G),size:"large"},{title:D(()=>{var G;return[b(y(ar)),W(" Execution Details: "+E((G=l.value)==null?void 0:G.execution_id),1)]}),actions:D(()=>[b(y(Z),{variant:"outline",onClick:U[6]||(U[6]=G=>s.value=!1)},{default:D(()=>[...U[35]||(U[35]=[W(" Close ",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:B,disabled:!c.value.length},{default:D(()=>[b(y(bn)),U[36]||(U[36]=W(" Download Results ",-1))]),_:1},8,["disabled"])]),default:D(()=>[l.value?(T(),P("div",Orn,[u("div",Lrn,[u("div",Vrn,[U[32]||(U[32]=u("h4",null,"Execution Information",-1)),u("div",Nrn,[u("div",jrn,[U[25]||(U[25]=u("span",{class:"detail-label"},"Test Name:",-1)),u("span",Frn,E(l.value.execution_name),1)]),u("div",Brn,[U[26]||(U[26]=u("span",{class:"detail-label"},"Category:",-1)),u("span",zrn,E(l.value.execution_type),1)]),u("div",Urn,[U[27]||(U[27]=u("span",{class:"detail-label"},"Status:",-1)),b(y(Ee),{variant:F(l.value.status)},{default:D(()=>[W(E(l.value.status),1)]),_:1},8,["variant"])]),u("div",Hrn,[U[28]||(U[28]=u("span",{class:"detail-label"},"Start Time:",-1)),u("span",qrn,E(O(l.value.actual_start_date)),1)]),u("div",Wrn,[U[29]||(U[29]=u("span",{class:"detail-label"},"End Time:",-1)),u("span",Grn,E(O(l.value.actual_end_date)),1)]),u("div",Yrn,[U[30]||(U[30]=u("span",{class:"detail-label"},"Duration:",-1)),u("span",Krn,E(V(l.value)),1)]),u("div",Xrn,[U[31]||(U[31]=u("span",{class:"detail-label"},"Executed By:",-1)),u("span",Zrn,E(l.value.created_by),1)])])]),u("div",Qrn,[U[34]||(U[34]=u("h4",null,"Test Results",-1)),c.value.length?(T(),P("div",Jrn,[(T(!0),P(_e,null,we(c.value,G=>(T(),P("div",{key:G.name,class:"result-item"},[u("div",ein,[b(y(Ee),{variant:N(G.status)},{default:D(()=>[W(E(G.status),1)]),_:2},1032,["variant"]),u("span",tin,E(G.description),1)]),G.error_message?(T(),P("div",nin,E(G.error_message),1)):ie("",!0)]))),128))])):(T(),P("div",rin,[b(y(rE)),U[33]||(U[33]=u("span",null,"No results available",-1))]))])])])):ie("",!0)]),_:1},8,["modelValue"]),b(lrn,{show:o.value,execution:d.value,"onUpdate:show":U[8]||(U[8]=G=>o.value=G),onSaved:A},null,8,["show","execution"])]))}},ain=Ft(iin,[["__scopeId","data-v-acde71f0"]]),sin={class:"bg-white rounded-xl border p-4"},oin={class:"flex flex-wrap items-center gap-4"},lin={class:"flex-1 min-w-[200px] max-w-md"},uin={class:"w-48"},din={class:"w-40"},cin={class:"w-44"},fin={class:"w-36"},pin={class:"flex items-center gap-2 ml-auto"},hin={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},min={__name:"TestFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,i=Jt({search:"",category:"",testType:"",logicType:"",status:""});Je(()=>n.filters,h=>{h&&Object.assign(i,h)},{immediate:!0,deep:!0});const a=[{label:"All Categories",value:""},{label:"Duplicate Detection",value:"Duplicate Detection"},{label:"Outlier Analysis",value:"Outlier Analysis"},{label:"Trend Analysis",value:"Trend Analysis"},{label:"Ratio Analysis",value:"Ratio Analysis"},{label:"Completeness Check",value:"Completeness Check"},{label:"Validity Check",value:"Validity Check"},{label:"Accuracy Check",value:"Accuracy Check"},{label:"Timeliness Check",value:"Timeliness Check"},{label:"Consistency Check",value:"Consistency Check"},{label:"Custom Analysis",value:"Custom Analysis"}],s=[{label:"All Types",value:""},{label:"Substantive",value:"Substantive"},{label:"Controls",value:"Controls"},{label:"Analytical",value:"Analytical"},{label:"Compliance",value:"Compliance"}],o=[{label:"All Logic Types",value:""},{label:"SQL Query",value:"SQL Query"},{label:"Python Script",value:"Python Script"},{label:"Built-in Function",value:"Built-in Function"}],l=[{label:"All Status",value:""},{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"},{label:"Under Review",value:"Under Review"}],d=J(()=>Object.values(i).some(h=>h!==""));function c(){r("update:filters",me({},i))}function f(h){i[h]="",c()}function p(){Object.keys(i).forEach(h=>{i[h]=""}),c()}return(h,m)=>(T(),P("div",sin,[u("div",oin,[u("div",lin,[b(y(ge),{modelValue:i.search,"onUpdate:modelValue":[m[0]||(m[0]=g=>i.search=g),c],type:"text",placeholder:"Search tests by name, ID, or description...",debounce:300},{prefix:D(()=>[b(y(Rn),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",uin,[b(y(Ke),{modelValue:i.category,"onUpdate:modelValue":[m[1]||(m[1]=g=>i.category=g),c],options:a,placeholder:"All Categories"},null,8,["modelValue"])]),u("div",din,[b(y(Ke),{modelValue:i.testType,"onUpdate:modelValue":[m[2]||(m[2]=g=>i.testType=g),c],options:s,placeholder:"All Types"},null,8,["modelValue"])]),u("div",cin,[b(y(Ke),{modelValue:i.logicType,"onUpdate:modelValue":[m[3]||(m[3]=g=>i.logicType=g),c],options:o,placeholder:"All Logic Types"},null,8,["modelValue"])]),u("div",fin,[b(y(Ke),{modelValue:i.status,"onUpdate:modelValue":[m[4]||(m[4]=g=>i.status=g),c],options:l,placeholder:"All Status"},null,8,["modelValue"])]),u("div",pin,[d.value?(T(),he(y(Z),{key:0,variant:"outline",onClick:p},{prefix:D(()=>[b(y(ht),{class:"h-4 w-4"})]),default:D(()=>[m[12]||(m[12]=W(" Clear ",-1))]),_:1})):ie("",!0),b(y(Z),{variant:"outline",onClick:m[5]||(m[5]=g=>h.$emit("refresh"))},{prefix:D(()=>[b(y(hn),{class:"h-4 w-4"})]),default:D(()=>[m[13]||(m[13]=W(" Refresh ",-1))]),_:1}),b(y(Z),{variant:"solid",onClick:m[6]||(m[6]=g=>h.$emit("create"))},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[m[14]||(m[14]=W(" New Test ",-1))]),_:1})])]),d.value?(T(),P("div",hin,[m[15]||(m[15]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),i.search?(T(),he(y(Ee),{key:0,theme:"blue",class:"cursor-pointer",onClick:m[7]||(m[7]=g=>f("search"))},{default:D(()=>[W(' Search: "'+E(i.search)+'" ',1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.category?(T(),he(y(Ee),{key:1,theme:"purple",class:"cursor-pointer",onClick:m[8]||(m[8]=g=>f("category"))},{default:D(()=>[W(" Category: "+E(i.category)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.testType?(T(),he(y(Ee),{key:2,theme:"indigo",class:"cursor-pointer",onClick:m[9]||(m[9]=g=>f("testType"))},{default:D(()=>[W(" Type: "+E(i.testType)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.logicType?(T(),he(y(Ee),{key:3,theme:"orange",class:"cursor-pointer",onClick:m[10]||(m[10]=g=>f("logicType"))},{default:D(()=>[W(" Logic: "+E(i.logicType)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0),i.status?(T(),he(y(Ee),{key:4,theme:"green",class:"cursor-pointer",onClick:m[11]||(m[11]=g=>f("status"))},{default:D(()=>[W(" Status: "+E(i.status)+" ",1),b(y(ht),{class:"h-3 w-3 ml-1"})]),_:1})):ie("",!0)])):ie("",!0)]))}},gin={class:"flex h-[75vh]"},vin={class:"w-56 border-r bg-gray-50 p-4 flex flex-col"},yin={class:"space-y-1 flex-1"},bin=["onClick"],_in={class:"text-sm"},xin={class:"mt-4 pt-4 border-t"},win={class:"text-xs text-gray-500 mb-2"},kin={class:"w-full bg-gray-200 rounded-full h-2"},Sin={class:"flex-1 flex flex-col overflow-hidden"},Cin={class:"flex-1 overflow-y-auto p-6"},Ain={class:"space-y-4"},Tin={class:"grid grid-cols-3 gap-4"},Ein={class:"grid grid-cols-3 gap-4"},Min={class:"space-y-4"},$in={class:"grid grid-cols-2 gap-4"},Din={class:"mt-6"},Rin={class:"flex items-center justify-between mb-3"},Pin={class:"border rounded-lg overflow-hidden"},Iin={class:"min-w-full divide-y divide-gray-200"},Oin={class:"bg-white divide-y divide-gray-200"},Lin={class:"px-4 py-2"},Vin={class:"px-4 py-2"},Nin={class:"px-4 py-2 text-center"},jin=["onUpdate:modelValue"],Fin={class:"px-4 py-2"},Bin={class:"px-4 py-2"},zin={key:0},Uin={class:"mt-6"},Hin={class:"flex items-center justify-between mb-3"},qin={class:"border rounded-lg overflow-hidden"},Win={class:"min-w-full divide-y divide-gray-200"},Gin={class:"bg-white divide-y divide-gray-200"},Yin={class:"px-4 py-2"},Kin={class:"px-4 py-2"},Xin={class:"px-4 py-2"},Zin={class:"px-4 py-2 text-center"},Qin=["onUpdate:modelValue"],Jin={class:"px-4 py-2"},ean={key:0},tan={class:"space-y-4"},nan={class:"grid grid-cols-2 gap-4"},ran={key:0,class:"mt-4"},ian={class:"block text-sm font-medium text-gray-700 mb-2"},aan={class:"border rounded-lg overflow-hidden"},san={class:"bg-gray-800 px-3 py-2 text-xs text-gray-400 flex items-center justify-between"},oan={key:1,class:"mt-4"},lan={class:"block text-sm font-medium text-gray-700 mb-2"},uan={class:"border rounded-lg overflow-hidden"},dan={class:"bg-gray-800 px-3 py-2 text-xs text-gray-400 flex items-center justify-between"},can={class:"flex gap-2"},fan={class:"mt-6"},pan={class:"flex items-center justify-between mb-3"},han={class:"border rounded-lg overflow-hidden"},man={class:"min-w-full divide-y divide-gray-200"},gan={class:"bg-white divide-y divide-gray-200"},van={class:"px-4 py-2"},yan={class:"px-4 py-2"},ban={class:"px-4 py-2"},_an={class:"px-4 py-2"},xan={class:"px-4 py-2"},wan={key:0},kan={class:"space-y-4"},San={class:"mt-6"},Can={class:"flex items-center justify-between mb-3"},Aan={class:"border rounded-lg overflow-hidden"},Tan={class:"min-w-full divide-y divide-gray-200"},Ean={class:"bg-white divide-y divide-gray-200"},Man={class:"px-4 py-2"},$an={class:"px-4 py-2"},Dan={class:"px-4 py-2"},Ran={class:"px-4 py-2"},Pan={class:"px-4 py-2"},Ian={key:0},Oan={class:"space-y-4"},Lan={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},Van={class:"flex items-start gap-3"},Nan={class:"mt-4"},jan={class:"flex items-center justify-between mb-3"},Fan={class:"border rounded-lg overflow-hidden"},Ban={class:"min-w-full divide-y divide-gray-200"},zan={class:"bg-white divide-y divide-gray-200"},Uan={class:"px-4 py-2"},Han={class:"px-4 py-2"},qan={class:"px-4 py-2"},Wan={class:"px-4 py-2"},Gan={class:"px-4 py-2"},Yan={class:"px-4 py-2"},Kan={key:0},Xan={class:"space-y-4"},Zan={class:"grid grid-cols-3 gap-4"},Qan={class:"grid grid-cols-2 gap-4"},Jan={class:"mt-6 bg-gray-50 rounded-lg p-4"},esn={class:"grid grid-cols-3 gap-4"},tsn={class:"bg-white rounded-lg p-4 border"},nsn={class:"text-2xl font-bold text-blue-600"},rsn={class:"bg-white rounded-lg p-4 border"},isn={class:"text-2xl font-bold text-green-600"},asn={class:"bg-white rounded-lg p-4 border"},ssn={class:"text-2xl font-bold text-gray-600"},osn={class:"border-t bg-gray-50 px-6 py-4 flex items-center justify-between"},lsn={class:"flex items-center gap-2"},usn={__name:"TestLibraryForm",props:{show:{type:Boolean,default:!1},test:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.show,set:se=>r("update:show",se)}),a=J(()=>{var se;return!!((se=n.test)!=null&&se.name)}),s=Q(!1),o=Q(0),l=[{id:"basic",title:"Basic Information",icon:HS,description:"Test identification and classification"},{id:"data",title:"Data Source",icon:ri,description:"Define data requirements and filters"},{id:"logic",title:"Test Logic",icon:nE,description:"Configure SQL query or Python script"},{id:"results",title:"Expected Results",icon:Xi,description:"Define expected outcomes and interpretations"},{id:"thresholds",title:"Thresholds",icon:XD,description:"Set warning and critical thresholds"},{id:"status",title:"Status & Usage",icon:uY,description:"Status, versioning, and usage tracking"}],d=Jt({test_id:"",test_name:"",test_category:"",sub_category:"",test_type:"",risk_area:"",description:"",objective:"",data_source:"",data_doctype:"",required_data_fields:[],data_filters:[],test_logic_type:"",sql_query:"",python_script:"",builtin_function:"",test_parameters:[],expected_result:"",interpretation_guide:"",expected_results:[],threshold_settings:[],status:"Active",version:"1.0.0",last_updated:"",created_by:"",reviewed_by:"",usage_count:0,success_rate:0,last_execution:"",notes:""}),c=[{label:"Duplicate Detection",value:"Duplicate Detection"},{label:"Outlier Analysis",value:"Outlier Analysis"},{label:"Trend Analysis",value:"Trend Analysis"},{label:"Ratio Analysis",value:"Ratio Analysis"},{label:"Completeness Check",value:"Completeness Check"},{label:"Validity Check",value:"Validity Check"},{label:"Accuracy Check",value:"Accuracy Check"},{label:"Timeliness Check",value:"Timeliness Check"},{label:"Consistency Check",value:"Consistency Check"},{label:"Custom Analysis",value:"Custom Analysis"}],f=[{label:"Substantive",value:"Substantive"},{label:"Controls",value:"Controls"},{label:"Analytical",value:"Analytical"},{label:"Compliance",value:"Compliance"}],p=[{label:"SQL Query",value:"SQL Query"},{label:"Python Script",value:"Python Script"},{label:"Built-in Function",value:"Built-in Function"}],h=[{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"},{label:"Under Review",value:"Under Review"}],m=[{label:"Data",value:"Data"},{label:"Int",value:"Int"},{label:"Float",value:"Float"},{label:"Currency",value:"Currency"},{label:"Date",value:"Date"},{label:"Datetime",value:"Datetime"},{label:"Link",value:"Link"},{label:"Select",value:"Select"}],g=[{label:"Equals (=)",value:"="},{label:"Not Equals (!=)",value:"!="},{label:"Greater Than (>)",value:">"},{label:"Less Than (<)",value:"<"},{label:"Like",value:"like"},{label:"In",value:"in"},{label:"Between",value:"between"}],v=[{label:"String",value:"String"},{label:"Integer",value:"Integer"},{label:"Float",value:"Float"},{label:"Date",value:"Date"},{label:"Boolean",value:"Boolean"},{label:"List",value:"List"}],_=[{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"},{label:"Warning",value:"Warning"}],x=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],w=[{label:"Greater Than (>)",value:">"},{label:"Greater Than or Equal (>=)",value:">="},{label:"Less Than (<)",value:"<"},{label:"Less Than or Equal (<=)",value:"<="},{label:"Equals (=)",value:"="},{label:"Not Equals (!=)",value:"!="}];Je(()=>n.test,se=>{se?Object.keys(d).forEach(te=>{se[te]!==void 0&&(d[te]=se[te])}):re()},{immediate:!0});const k=J(()=>[!!(d.test_name&&d.test_category),!0,!!d.test_logic_type,!0,!0,!!d.status]),S=J(()=>k.value.filter(Boolean).length),C=J(()=>Math.round(S.value/l.length*100));function A(se){return k.value[se]}function M(se){return o.value===se?"text-blue-600":A(se)?"text-green-500":"text-gray-400"}function $(se){o.value=se}function R(){o.value<l.length-1&&o.value++}function I(){o.value>0&&o.value--}function B(){d.required_data_fields.push({field_name:"",field_type:"Data",is_required:!0,description:""})}function j(se){d.required_data_fields.splice(se,1)}function z(){d.data_filters.push({filter_field:"",operator:"=",default_value:"",is_dynamic:!1})}function F(se){d.data_filters.splice(se,1)}function q(){d.test_parameters.push({parameter_name:"",parameter_type:"String",default_value:"",description:""})}function N(se){d.test_parameters.splice(se,1)}function O(){d.expected_results.push({condition:"",result_status:"Pass",severity:"Low",action_required:""})}function V(se){d.expected_results.splice(se,1)}function L(){d.threshold_settings.push({metric_name:"",operator:">",warning_threshold:null,critical_threshold:null,description:""})}function U(se){d.threshold_settings.splice(se,1)}function G(){d.sql_query&&(d.sql_query=d.sql_query.replace(/\bSELECT\b/gi,`
SELECT`).replace(/\bFROM\b/gi,`
FROM`).replace(/\bWHERE\b/gi,`
WHERE`).replace(/\bAND\b/gi,`
  AND`).replace(/\bOR\b/gi,`
  OR`).replace(/\bGROUP BY\b/gi,`
GROUP BY`).replace(/\bORDER BY\b/gi,`
ORDER BY`).replace(/\bHAVING\b/gi,`
HAVING`).replace(/\bLEFT JOIN\b/gi,`
LEFT JOIN`).replace(/\bRIGHT JOIN\b/gi,`
RIGHT JOIN`).replace(/\bINNER JOIN\b/gi,`
INNER JOIN`).trim())}function X(){d.python_script=`def execute(data, params):
    '''
    Execute the audit test logic.
    
    Args:
        data: List of records from data source
        params: Test parameters dictionary
        
    Returns:
        dict: {
            'status': 'Pass' | 'Fail' | 'Warning',
            'exceptions': list of exception records,
            'summary': summary statistics dict
        }
    '''
    exceptions = []
    summary = {
        'total_records': len(data),
        'exceptions_found': 0,
        'pass_rate': 100.0
    }
    
    for record in data:
        # Add your test logic here
        # Example: Check for specific conditions
        if some_condition(record):
            exceptions.append({
                'record': record,
                'reason': 'Description of exception'
            })
    
    summary['exceptions_found'] = len(exceptions)
    summary['pass_rate'] = round((1 - len(exceptions) / len(data)) * 100, 2) if data else 100
    
    return {
        'status': 'Pass' if not exceptions else 'Fail',
        'exceptions': exceptions,
        'summary': summary
    }

def some_condition(record):
    '''Helper function to check condition'''
    # Implement your condition logic
    return False
`}function re(){Object.keys(d).forEach(se=>{Array.isArray(d[se])?d[se]=[]:typeof d[se]=="number"?d[se]=0:d[se]=""}),d.status="Active",d.version="1.0.0",o.value=0}function ee(){r("update:show",!1),re()}function de(){return le(this,null,function*(){s.value=!0;try{console.log("Saving test:",d),r("saved",me({},d)),ee()}catch(se){console.error("Error saving test:",se)}finally{s.value=!1}})}return(se,te)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":te[22]||(te[22]=ne=>i.value=ne),options:{title:a.value?"Edit Test":"Create Audit Test",size:"7xl"}},{"body-content":D(()=>{var ne,ce,ve,Y,K,H,ae,be;return[u("div",gin,[u("div",vin,[u("div",yin,[(T(),P(_e,null,we(l,(ue,pe)=>u("button",{key:ue.id,onClick:ye=>$(pe),class:fe(["w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors",o.value===pe?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"])},[(T(),he(Lt(ue.icon),{class:fe(["h-4 w-4",M(pe)])},null,8,["class"])),u("span",_in,E(ue.title),1),A(pe)?(T(),he(y(Qs),{key:0,class:"h-4 w-4 ml-auto text-green-500"})):ie("",!0)],10,bin)),64))]),u("div",xin,[u("div",win," Progress: "+E(S.value)+"/"+E(l.length)+" sections ",1),u("div",kin,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:nt({width:`${C.value}%`})},null,4)])])]),u("div",Sin,[b(Rt,{icon:(ne=l[o.value])==null?void 0:ne.icon,title:(ce=l[o.value])==null?void 0:ce.title,description:(ve=l[o.value])==null?void 0:ve.description},null,8,["icon","title","description"]),u("div",Cin,[xe(u("div",Ain,[u("div",Tin,[b(y(ge),{modelValue:d.test_id,"onUpdate:modelValue":te[0]||(te[0]=ue=>d.test_id=ue),label:"Test ID",type:"text",placeholder:"Auto-generated",disabled:""},null,8,["modelValue"]),b(y(ge),{modelValue:d.test_name,"onUpdate:modelValue":te[1]||(te[1]=ue=>d.test_name=ue),label:"Test Name *",type:"text",placeholder:"Enter test name"},null,8,["modelValue"]),u("div",null,[te[23]||(te[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Test Category *",-1)),b(y(Ke),{modelValue:d.test_category,"onUpdate:modelValue":te[2]||(te[2]=ue=>d.test_category=ue),options:c,placeholder:"Select category"},null,8,["modelValue"])])]),u("div",Ein,[b(y(ge),{modelValue:d.sub_category,"onUpdate:modelValue":te[3]||(te[3]=ue=>d.sub_category=ue),label:"Sub Category",type:"text",placeholder:"Enter sub-category"},null,8,["modelValue"]),u("div",null,[te[24]||(te[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Risk Area",-1)),b(At,{modelValue:d.risk_area,"onUpdate:modelValue":te[4]||(te[4]=ue=>d.risk_area=ue),doctype:"Risk Type",placeholder:"Select risk area"},null,8,["modelValue"])]),u("div",null,[te[25]||(te[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Type",-1)),b(y(Ke),{modelValue:d.test_type,"onUpdate:modelValue":te[5]||(te[5]=ue=>d.test_type=ue),options:f,placeholder:"Select type"},null,8,["modelValue"])])]),u("div",null,[te[26]||(te[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),b(y(an),{modelValue:d.description,"onUpdate:modelValue":te[6]||(te[6]=ue=>d.description=ue),content:d.description,placeholder:"Describe the test...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[te[27]||(te[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Objective",-1)),b(y(an),{modelValue:d.objective,"onUpdate:modelValue":te[7]||(te[7]=ue=>d.objective=ue),content:d.objective,placeholder:"What is the objective of this test?","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[ot,o.value===0]]),xe(u("div",Min,[u("div",$in,[u("div",null,[te[28]||(te[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Data Source",-1)),b(At,{modelValue:d.data_source,"onUpdate:modelValue":te[8]||(te[8]=ue=>d.data_source=ue),doctype:"BC Data Source",placeholder:"Select data source"},null,8,["modelValue"])]),u("div",null,[te[29]||(te[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Data DocType",-1)),b(At,{modelValue:d.data_doctype,"onUpdate:modelValue":te[9]||(te[9]=ue=>d.data_doctype=ue),doctype:"DocType",placeholder:"Select DocType"},null,8,["modelValue"])])]),u("div",Din,[u("div",Rin,[te[31]||(te[31]=u("h4",{class:"text-sm font-medium text-gray-700"},"Required Data Fields",-1)),b(y(Z),{size:"sm",onClick:B},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[te[30]||(te[30]=W(" Add Field ",-1))]),_:1})]),u("div",Pin,[u("table",Iin,[te[33]||(te[33]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Field Name"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Field Type"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Required"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",Oin,[(T(!0),P(_e,null,we(d.required_data_fields,(ue,pe)=>(T(),P("tr",{key:pe},[u("td",Lin,[b(y(ge),{modelValue:ue.field_name,"onUpdate:modelValue":ye=>ue.field_name=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Vin,[b(y(Ke),{modelValue:ue.field_type,"onUpdate:modelValue":ye=>ue.field_type=ye,options:m,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Nin,[xe(u("input",{type:"checkbox","onUpdate:modelValue":ye=>ue.is_required=ye,class:"rounded border-gray-300"},null,8,jin),[[$n,ue.is_required]])]),u("td",Fin,[b(y(ge),{modelValue:ue.description,"onUpdate:modelValue":ye=>ue.description=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Bin,[b(y(Z),{variant:"ghost",size:"sm",onClick:ye=>j(pe)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(Y=d.required_data_fields)!=null&&Y.length?ie("",!0):(T(),P("tr",zin,[...te[32]||(te[32]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No required fields defined. Click "Add Field" to add one. ',-1)])]))])])])]),u("div",Uin,[u("div",Hin,[te[35]||(te[35]=u("h4",{class:"text-sm font-medium text-gray-700"},"Data Filters",-1)),b(y(Z),{size:"sm",onClick:z},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[te[34]||(te[34]=W(" Add Filter ",-1))]),_:1})]),u("div",qin,[u("table",Win,[te[37]||(te[37]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Filter Field"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Operator"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Default Value"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Dynamic"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",Gin,[(T(!0),P(_e,null,we(d.data_filters,(ue,pe)=>(T(),P("tr",{key:pe},[u("td",Yin,[b(y(ge),{modelValue:ue.filter_field,"onUpdate:modelValue":ye=>ue.filter_field=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Kin,[b(y(Ke),{modelValue:ue.operator,"onUpdate:modelValue":ye=>ue.operator=ye,options:g,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Xin,[b(y(ge),{modelValue:ue.default_value,"onUpdate:modelValue":ye=>ue.default_value=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Zin,[xe(u("input",{type:"checkbox","onUpdate:modelValue":ye=>ue.is_dynamic=ye,class:"rounded border-gray-300"},null,8,Qin),[[$n,ue.is_dynamic]])]),u("td",Jin,[b(y(Z),{variant:"ghost",size:"sm",onClick:ye=>F(pe)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(K=d.data_filters)!=null&&K.length?ie("",!0):(T(),P("tr",ean,[...te[36]||(te[36]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No filters defined. Click "Add Filter" to add one. ',-1)])]))])])])])],512),[[ot,o.value===1]]),xe(u("div",tan,[u("div",nan,[u("div",null,[te[38]||(te[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Test Logic Type *",-1)),b(y(Ke),{modelValue:d.test_logic_type,"onUpdate:modelValue":te[10]||(te[10]=ue=>d.test_logic_type=ue),options:p,placeholder:"Select logic type"},null,8,["modelValue"])]),u("div",null,[te[39]||(te[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Built-in Function",-1)),b(At,{modelValue:d.builtin_function,"onUpdate:modelValue":te[11]||(te[11]=ue=>d.builtin_function=ue),doctype:"Built In Function",placeholder:"Select function",disabled:d.test_logic_type!=="Built-in Function"},null,8,["modelValue","disabled"])])]),d.test_logic_type==="SQL Query"?(T(),P("div",ran,[u("label",ian,[b(y(ri),{class:"h-4 w-4 inline mr-1"}),te[40]||(te[40]=W(" SQL Query ",-1))]),u("div",aan,[u("div",san,[te[42]||(te[42]=u("span",null,"SQL",-1)),b(y(Z),{variant:"ghost",size:"sm",class:"text-gray-400 hover:text-white",onClick:G},{default:D(()=>[...te[41]||(te[41]=[W(" Format ",-1)])]),_:1})]),xe(u("textarea",{"onUpdate:modelValue":te[12]||(te[12]=ue=>d.sql_query=ue),class:"w-full h-64 p-4 font-mono text-sm bg-gray-900 text-green-400 focus:outline-none resize-none",placeholder:`-- Enter your SQL query here
SELECT 
    field1,
    field2,
    COUNT(*) as count
FROM \`tabDocType\`
WHERE condition = 'value'
GROUP BY field1, field2
HAVING COUNT(*) > 1;`},null,512),[[Mt,d.sql_query]])])])):ie("",!0),d.test_logic_type==="Python Script"?(T(),P("div",oan,[u("label",lan,[b(y(nE),{class:"h-4 w-4 inline mr-1"}),te[43]||(te[43]=W(" Python Script ",-1))]),u("div",uan,[u("div",dan,[te[45]||(te[45]=u("span",null,"Python",-1)),u("div",can,[b(y(Z),{variant:"ghost",size:"sm",class:"text-gray-400 hover:text-white",onClick:X},{default:D(()=>[...te[44]||(te[44]=[W(" Insert Template ",-1)])]),_:1})])]),xe(u("textarea",{"onUpdate:modelValue":te[13]||(te[13]=ue=>d.python_script=ue),class:"w-full h-64 p-4 font-mono text-sm bg-gray-900 text-yellow-300 focus:outline-none resize-none",placeholder:`# Enter your Python script here
def execute(data, params):
    '''
    Args:
        data: List of records from data source
        params: Test parameters dictionary
    Returns:
        dict: {
            'status': 'Pass'/'Fail'/'Warning',
            'exceptions': list,
            'summary': dict
        }
    '''
    exceptions = []
    
    for record in data:
        # Your test logic here
        pass
    
    return {
        'status': 'Pass' if not exceptions else 'Fail',
        'exceptions': exceptions,
        'summary': {'total': len(data), 'exceptions': len(exceptions)}
    }`},null,512),[[Mt,d.python_script]])])])):ie("",!0),u("div",fan,[u("div",pan,[te[47]||(te[47]=u("h4",{class:"text-sm font-medium text-gray-700"},"Test Parameters",-1)),b(y(Z),{size:"sm",onClick:q},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[te[46]||(te[46]=W(" Add Parameter ",-1))]),_:1})]),u("div",han,[u("table",man,[te[49]||(te[49]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Parameter Name"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Type"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Default Value"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",gan,[(T(!0),P(_e,null,we(d.test_parameters,(ue,pe)=>(T(),P("tr",{key:pe},[u("td",van,[b(y(ge),{modelValue:ue.parameter_name,"onUpdate:modelValue":ye=>ue.parameter_name=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",yan,[b(y(Ke),{modelValue:ue.parameter_type,"onUpdate:modelValue":ye=>ue.parameter_type=ye,options:v,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",ban,[b(y(ge),{modelValue:ue.default_value,"onUpdate:modelValue":ye=>ue.default_value=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",_an,[b(y(ge),{modelValue:ue.description,"onUpdate:modelValue":ye=>ue.description=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",xan,[b(y(Z),{variant:"ghost",size:"sm",onClick:ye=>N(pe)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(H=d.test_parameters)!=null&&H.length?ie("",!0):(T(),P("tr",wan,[...te[48]||(te[48]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No parameters defined. Click "Add Parameter" to add one. ',-1)])]))])])])])],512),[[ot,o.value===2]]),xe(u("div",kan,[u("div",null,[te[50]||(te[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Expected Result Description",-1)),b(y(an),{modelValue:d.expected_result,"onUpdate:modelValue":te[14]||(te[14]=ue=>d.expected_result=ue),content:d.expected_result,placeholder:"Describe the expected results...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[te[51]||(te[51]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Interpretation Guidelines",-1)),b(y(an),{modelValue:d.interpretation_guide,"onUpdate:modelValue":te[15]||(te[15]=ue=>d.interpretation_guide=ue),content:d.interpretation_guide,placeholder:"How should results be interpreted?","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",San,[u("div",Can,[te[53]||(te[53]=u("h4",{class:"text-sm font-medium text-gray-700"},"Expected Result Conditions",-1)),b(y(Z),{size:"sm",onClick:O},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[te[52]||(te[52]=W(" Add Condition ",-1))]),_:1})]),u("div",Aan,[u("table",Tan,[te[55]||(te[55]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Condition"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Result Status"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Severity"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Action Required"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",Ean,[(T(!0),P(_e,null,we(d.expected_results,(ue,pe)=>(T(),P("tr",{key:pe},[u("td",Man,[b(y(ge),{modelValue:ue.condition,"onUpdate:modelValue":ye=>ue.condition=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",$an,[b(y(Ke),{modelValue:ue.result_status,"onUpdate:modelValue":ye=>ue.result_status=ye,options:_,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Dan,[b(y(Ke),{modelValue:ue.severity,"onUpdate:modelValue":ye=>ue.severity=ye,options:x,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Ran,[b(y(ge),{modelValue:ue.action_required,"onUpdate:modelValue":ye=>ue.action_required=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Pan,[b(y(Z),{variant:"ghost",size:"sm",onClick:ye=>V(pe)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(ae=d.expected_results)!=null&&ae.length?ie("",!0):(T(),P("tr",Ian,[...te[54]||(te[54]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No conditions defined. Click "Add Condition" to add one. ',-1)])]))])])])])],512),[[ot,o.value===3]]),xe(u("div",Oan,[u("div",Lan,[u("div",Van,[b(y(zr),{class:"h-5 w-5 text-blue-600 mt-0.5"}),te[56]||(te[56]=u("div",{class:"text-sm text-blue-700"},[u("p",{class:"font-medium"},"Configure Thresholds"),u("p",null,"Define thresholds to automatically classify test results as Pass, Warning, or Fail based on metrics.")],-1))])]),u("div",Nan,[u("div",jan,[te[58]||(te[58]=u("h4",{class:"text-sm font-medium text-gray-700"},"Threshold Configurations",-1)),b(y(Z),{size:"sm",onClick:L},{prefix:D(()=>[b(y(tt),{class:"h-4 w-4"})]),default:D(()=>[te[57]||(te[57]=W(" Add Threshold ",-1))]),_:1})]),u("div",Fan,[u("table",Ban,[te[60]||(te[60]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Metric"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Operator"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Warning"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Critical"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",zan,[(T(!0),P(_e,null,we(d.threshold_settings,(ue,pe)=>(T(),P("tr",{key:pe},[u("td",Uan,[b(y(ge),{modelValue:ue.metric_name,"onUpdate:modelValue":ye=>ue.metric_name=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Han,[b(y(Ke),{modelValue:ue.operator,"onUpdate:modelValue":ye=>ue.operator=ye,options:w,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",qan,[b(y(ge),{modelValue:ue.warning_threshold,"onUpdate:modelValue":ye=>ue.warning_threshold=ye,type:"number",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Wan,[b(y(ge),{modelValue:ue.critical_threshold,"onUpdate:modelValue":ye=>ue.critical_threshold=ye,type:"number",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Gan,[b(y(ge),{modelValue:ue.description,"onUpdate:modelValue":ye=>ue.description=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Yan,[b(y(Z),{variant:"ghost",size:"sm",onClick:ye=>U(pe)},{default:D(()=>[b(y(hi),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(be=d.threshold_settings)!=null&&be.length?ie("",!0):(T(),P("tr",Kan,[...te[59]||(te[59]=[u("td",{colspan:"6",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No thresholds defined. Click "Add Threshold" to add one. ',-1)])]))])])])])],512),[[ot,o.value===4]]),xe(u("div",Xan,[u("div",Zan,[u("div",null,[te[61]||(te[61]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status *",-1)),b(y(Ke),{modelValue:d.status,"onUpdate:modelValue":te[16]||(te[16]=ue=>d.status=ue),options:h,placeholder:"Select status"},null,8,["modelValue"])]),b(y(ge),{modelValue:d.version,"onUpdate:modelValue":te[17]||(te[17]=ue=>d.version=ue),label:"Version",type:"text",placeholder:"e.g., 1.0.0"},null,8,["modelValue"]),b(y(ge),{modelValue:d.last_updated,"onUpdate:modelValue":te[18]||(te[18]=ue=>d.last_updated=ue),label:"Last Updated",type:"date",disabled:""},null,8,["modelValue"])]),u("div",Qan,[u("div",null,[te[62]||(te[62]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Created By",-1)),b(At,{modelValue:d.created_by,"onUpdate:modelValue":te[19]||(te[19]=ue=>d.created_by=ue),doctype:"User",placeholder:"Select user",disabled:""},null,8,["modelValue"])]),u("div",null,[te[63]||(te[63]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reviewed By",-1)),b(At,{modelValue:d.reviewed_by,"onUpdate:modelValue":te[20]||(te[20]=ue=>d.reviewed_by=ue),doctype:"User",placeholder:"Select reviewer"},null,8,["modelValue"])])]),u("div",Jan,[te[67]||(te[67]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Usage Statistics",-1)),u("div",esn,[u("div",tsn,[u("div",nsn,E(d.usage_count||0),1),te[64]||(te[64]=u("div",{class:"text-sm text-gray-500"},"Total Executions",-1))]),u("div",rsn,[u("div",isn,E(d.success_rate||0)+"%",1),te[65]||(te[65]=u("div",{class:"text-sm text-gray-500"},"Success Rate",-1))]),u("div",asn,[u("div",ssn,E(d.last_execution||"Never"),1),te[66]||(te[66]=u("div",{class:"text-sm text-gray-500"},"Last Execution",-1))])])]),u("div",null,[te[68]||(te[68]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),b(y(an),{modelValue:d.notes,"onUpdate:modelValue":te[21]||(te[21]=ue=>d.notes=ue),content:d.notes,placeholder:"Additional notes...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[ot,o.value===5]])]),u("div",osn,[b(y(Z),{variant:"outline",onClick:I,disabled:o.value===0},{prefix:D(()=>[b(y(pr),{class:"h-4 w-4"})]),default:D(()=>[te[69]||(te[69]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",lsn,[b(y(Z),{variant:"outline",onClick:ee},{default:D(()=>[...te[70]||(te[70]=[W("Cancel",-1)])]),_:1}),o.value<l.length-1?(T(),he(y(Z),{key:0,variant:"solid",onClick:R},{suffix:D(()=>[b(y(tr),{class:"h-4 w-4"})]),default:D(()=>[te[71]||(te[71]=W(" Next ",-1))]),_:1})):(T(),he(y(Z),{key:1,variant:"solid",theme:"green",onClick:de,loading:s.value},{prefix:D(()=>[b(y(Cr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+E(a.value?"Update Test":"Create Test"),1)]),_:1},8,["loading"]))])])])])]}),_:1},8,["modelValue","options"]))}},dsn={class:"space-y-4"},csn={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},fsn=["onClick"],psn={class:"flex items-center gap-3"},hsn={class:"text-2xl font-bold text-gray-900"},msn={class:"text-xs text-gray-500"},gsn={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},vsn={class:"bg-white rounded-xl border p-4"},ysn={class:"space-y-3"},bsn={class:"w-32 text-sm text-gray-600 truncate"},_sn={class:"flex-1 bg-gray-100 rounded-full h-4 overflow-hidden"},xsn={class:"w-16 text-right text-sm font-medium text-gray-700"},wsn={class:"text-gray-400 text-xs"},ksn={class:"bg-white rounded-xl border p-4"},Ssn={class:"grid grid-cols-2 gap-4"},Csn=["onClick"],Asn={class:"text-sm text-gray-600"},Tsn={class:"text-xs text-gray-400 mt-1"},Esn={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Msn={class:"bg-white rounded-xl border p-4"},$sn={class:"flex items-center justify-center"},Dsn={class:"relative h-32 w-32"},Rsn={class:"transform -rotate-90",viewBox:"0 0 36 36"},Psn=["stroke","stroke-dasharray"],Isn={class:"absolute inset-0 flex items-center justify-center"},Osn={class:"text-center"},Lsn={class:"text-2xl font-bold text-gray-900"},Vsn={class:"bg-white rounded-xl border p-4"},Nsn={class:"space-y-3"},jsn=["onClick"],Fsn={class:"flex items-center gap-2"},Bsn={class:"text-sm text-gray-700"},zsn={class:"bg-white rounded-xl border p-4"},Usn={class:"space-y-4"},Hsn={class:"flex items-center justify-between"},qsn={class:"text-lg font-semibold text-gray-900"},Wsn={class:"flex items-center justify-between"},Gsn={class:"text-sm font-medium text-blue-600 truncate max-w-[150px]"},Ysn={class:"flex items-center justify-between"},Ksn={class:"text-lg font-semibold text-gray-900"},Xsn={class:"flex items-center justify-between"},Zsn={__name:"TestStats",props:{tests:{type:Array,default:()=>[]},activeFilter:{type:String,default:""}},emits:["filter"],setup(t){const e=t,n=J(()=>{const h=e.tests,m=h.length,g=h.filter(k=>k.status==="Active").length,v=h.filter(k=>k.status==="Inactive").length,_=h.filter(k=>k.status==="Under Review").length,x=h.filter(k=>k.test_type==="Substantive").length,w=h.filter(k=>k.test_type==="Controls").length;return[{label:"Total Tests",value:m,icon:Qce,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:null,filterValue:null},{label:"Active",value:g,icon:Gt,bgColor:"bg-green-100",iconColor:"text-green-600",filterKey:"status",filterValue:"Active",active:e.activeFilter==="Active"},{label:"Inactive",value:v,icon:Fc,bgColor:"bg-gray-100",iconColor:"text-gray-600",filterKey:"status",filterValue:"Inactive",active:e.activeFilter==="Inactive"},{label:"Under Review",value:_,icon:nn,bgColor:"bg-orange-100",iconColor:"text-orange-600",filterKey:"status",filterValue:"Under Review",active:e.activeFilter==="Under Review"},{label:"Substantive",value:x,icon:Xi,bgColor:"bg-purple-100",iconColor:"text-purple-600",filterKey:"test_type",filterValue:"Substantive",active:e.activeFilter==="Substantive"},{label:"Controls",value:w,icon:Ku,bgColor:"bg-indigo-100",iconColor:"text-indigo-600",filterKey:"test_type",filterValue:"Controls",active:e.activeFilter==="Controls"}]}),r=J(()=>{const h=e.tests,m={};h.forEach(_=>{const x=_.test_category||"Uncategorized";m[x]=(m[x]||0)+1});const g=h.length||1,v=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-red-500","bg-yellow-500","bg-cyan-500"];return Object.entries(m).map(([_,x],w)=>({name:_,count:x,percentage:Math.round(x/g*100),color:v[w%v.length]})).sort((_,x)=>x.count-_.count).slice(0,6)}),i=J(()=>{const h=e.tests,m=h.length||1;return[{name:"Substantive",count:h.filter(g=>g.test_type==="Substantive").length,icon:Xi,bgColor:"bg-purple-50 border-purple-200",iconColor:"text-purple-600",textColor:"text-purple-700",percentage:Math.round(h.filter(g=>g.test_type==="Substantive").length/m*100)},{name:"Controls",count:h.filter(g=>g.test_type==="Controls").length,icon:Ku,bgColor:"bg-indigo-50 border-indigo-200",iconColor:"text-indigo-600",textColor:"text-indigo-700",percentage:Math.round(h.filter(g=>g.test_type==="Controls").length/m*100)},{name:"Analytical",count:h.filter(g=>g.test_type==="Analytical").length,icon:cr,bgColor:"bg-blue-50 border-blue-200",iconColor:"text-blue-600",textColor:"text-blue-700",percentage:Math.round(h.filter(g=>g.test_type==="Analytical").length/m*100)},{name:"Compliance",count:h.filter(g=>g.test_type==="Compliance").length,icon:Bc,bgColor:"bg-green-50 border-green-200",iconColor:"text-green-600",textColor:"text-green-700",percentage:Math.round(h.filter(g=>g.test_type==="Compliance").length/m*100)}]}),a=J(()=>{const h=e.tests;return[{name:"SQL Query",count:h.filter(m=>m.test_logic_type==="SQL Query").length,icon:ri,iconColor:"text-blue-600",theme:"blue"},{name:"Python Script",count:h.filter(m=>m.test_logic_type==="Python Script").length,icon:nE,iconColor:"text-yellow-600",theme:"orange"},{name:"Built-in Function",count:h.filter(m=>m.test_logic_type==="Built-in Function").length,icon:fY,iconColor:"text-gray-600",theme:"gray"}]}),s=J(()=>{const h=e.tests.filter(g=>g.success_rate!==void 0&&g.success_rate!==null);if(!h.length)return 0;const m=h.reduce((g,v)=>g+(v.success_rate||0),0);return Math.round(m/h.length)}),o=J(()=>{const h=s.value;return h>=80?"#22C55E":h>=60?"#F59E0B":"#EF4444"}),l=J(()=>e.tests.reduce((h,m)=>h+(m.usage_count||0),0)),d=J(()=>{var m;return e.tests.length&&((m=[...e.tests].sort((g,v)=>(v.usage_count||0)-(g.usage_count||0))[0])==null?void 0:m.test_name)||"N/A"}),c=J(()=>e.tests.length?Math.round(l.value/e.tests.length):0),f=J(()=>e.tests.filter(h=>h.status==="Under Review").length);function p(h){return h>=1e6?`${(h/1e6).toFixed(1)}M`:h>=1e3?`${(h/1e3).toFixed(1)}K`:h.toString()}return(h,m)=>(T(),P("div",dsn,[u("div",csn,[(T(!0),P(_e,null,we(n.value,g=>(T(),P("div",{key:g.label,class:fe(["bg-white rounded-xl border p-4 hover:shadow-md transition-shadow cursor-pointer",g.active?"ring-2 ring-blue-500":""]),onClick:v=>h.$emit("filter",g.filterKey,g.filterValue)},[u("div",psn,[u("div",{class:fe(["p-2 rounded-lg",g.bgColor])},[(T(),he(Lt(g.icon),{class:fe(["h-5 w-5",g.iconColor])},null,8,["class"]))],2),u("div",null,[u("div",hsn,E(g.value),1),u("div",msn,E(g.label),1)])])],10,fsn))),128))]),u("div",gsn,[u("div",vsn,[m[0]||(m[0]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Tests by Category",-1)),u("div",ysn,[(T(!0),P(_e,null,we(r.value,g=>(T(),P("div",{key:g.name,class:"flex items-center gap-3"},[u("div",bsn,E(g.name),1),u("div",_sn,[u("div",{class:fe(["h-full rounded-full transition-all",g.color]),style:nt({width:`${g.percentage}%`})},null,6)]),u("div",xsn,[W(E(g.count)+" ",1),u("span",wsn,"("+E(g.percentage)+"%)",1)])]))),128))])]),u("div",ksn,[m[1]||(m[1]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Tests by Type",-1)),u("div",Ssn,[(T(!0),P(_e,null,we(i.value,g=>(T(),P("div",{key:g.name,class:fe(["p-4 rounded-lg border text-center hover:shadow-sm transition-shadow cursor-pointer",g.bgColor]),onClick:v=>h.$emit("filter","test_type",g.name)},[(T(),he(Lt(g.icon),{class:fe(["h-8 w-8 mx-auto mb-2",g.iconColor])},null,8,["class"])),u("div",{class:fe(["text-2xl font-bold",g.textColor])},E(g.count),3),u("div",Asn,E(g.name),1),u("div",Tsn,E(g.percentage)+"% of total",1)],10,Csn))),128))])])]),u("div",Esn,[u("div",Msn,[m[4]||(m[4]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Average Success Rate",-1)),u("div",$sn,[u("div",Dsn,[(T(),P("svg",Rsn,[m[2]||(m[2]=u("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#E5E7EB","stroke-width":"3"},null,-1)),u("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:o.value,"stroke-width":"3","stroke-dasharray":`${s.value}, 100`,"stroke-linecap":"round"},null,8,Psn)])),u("div",Isn,[u("div",Osn,[u("div",Lsn,E(s.value)+"%",1),m[3]||(m[3]=u("div",{class:"text-xs text-gray-500"},"Success",-1))])])])])]),u("div",Vsn,[m[5]||(m[5]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Test Logic Types",-1)),u("div",Nsn,[(T(!0),P(_e,null,we(a.value,g=>(T(),P("div",{key:g.name,class:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:v=>h.$emit("filter","test_logic_type",g.name)},[u("div",Fsn,[(T(),he(Lt(g.icon),{class:fe(["h-5 w-5",g.iconColor])},null,8,["class"])),u("span",Bsn,E(g.name),1)]),b(y(Ee),{theme:g.theme},{default:D(()=>[W(E(g.count),1)]),_:2},1032,["theme"])],8,jsn))),128))])]),u("div",zsn,[m[10]||(m[10]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Usage Statistics",-1)),u("div",Usn,[u("div",Hsn,[m[6]||(m[6]=u("span",{class:"text-sm text-gray-600"},"Total Executions",-1)),u("span",qsn,E(p(l.value)),1)]),u("div",Wsn,[m[7]||(m[7]=u("span",{class:"text-sm text-gray-600"},"Most Used Test",-1)),u("span",Gsn,E(d.value),1)]),u("div",Ysn,[m[8]||(m[8]=u("span",{class:"text-sm text-gray-600"},"Avg. Executions/Test",-1)),u("span",Ksn,E(c.value),1)]),u("div",Xsn,[m[9]||(m[9]=u("span",{class:"text-sm text-gray-600"},"Under Review",-1)),b(y(Ee),{theme:"orange"},{default:D(()=>[W(E(f.value),1)]),_:1})])])])])]))}},Qsn=Ul("testLibrary",()=>{const t=Q([]),e=Q(!1),n=Q(!1),r=Q(""),i=Q(""),a=Q(""),s=Q(""),o=Ie({url:"mkaguzi.api.test_library.get_tests",params:()=>({filters:{category:i.value,test_type:a.value,status:s.value},search:r.value}),auto:!1,onSuccess(S){t.value=S||[]}}),l=J(()=>{let S=[...t.value];if(r.value){const C=r.value.toLowerCase();S=S.filter(A=>{var M,$,R,I;return((M=A.test_name)==null?void 0:M.toLowerCase().includes(C))||(($=A.description)==null?void 0:$.toLowerCase().includes(C))||((R=A.objective)==null?void 0:R.toLowerCase().includes(C))||((I=A.test_category)==null?void 0:I.toLowerCase().includes(C))})}return i.value&&(S=S.filter(C=>C.test_category===i.value)),a.value&&(S=S.filter(C=>C.test_logic_type===a.value)),s.value&&(S=S.filter(C=>C.status===s.value)),S}),d=J(()=>{const S={};return l.value.forEach(C=>{const A=C.test_category||"Uncategorized";S[A]||(S[A]=[]),S[A].push(C)}),Object.keys(S).map(C=>({name:C,tests:S[C]})).sort((C,A)=>C.name.localeCompare(A.name))}),c=J(()=>{const S={total:t.value.length,active:0,substantive:0,controls:0,analytical:0};return t.value.forEach(C=>{C.status==="Active"&&S.active++;const A=C.test_logic_type;A==="SQL Query"?S.substantive++:A==="Python Script"?S.controls++:A==="Built-in Function"&&S.analytical++}),S}),f=()=>le(void 0,null,function*(){e.value=!0;try{yield o.reload()}catch(S){console.error("Error fetching tests:",S)}finally{e.value=!1}});return{tests:t,loading:e,saving:n,searchQuery:r,selectedCategory:i,selectedTestType:a,selectedStatus:s,filteredTests:l,groupedTests:d,stats:c,fetchTests:f,createTest:S=>le(void 0,null,function*(){n.value=!0;try{const C=yield Ie({url:"mkaguzi.api.test_library.create_test",method:"POST",params:S}).submit();return yield f(),C}catch(C){throw console.error("Error creating test:",C),C}finally{n.value=!1}}),updateTest:(S,C)=>le(void 0,null,function*(){n.value=!0;try{const A=yield Ie({url:"mkaguzi.api.test_library.update_test",method:"PUT",params:me({name:S},C)}).submit();return yield f(),A}catch(A){throw console.error("Error updating test:",A),A}finally{n.value=!1}}),deleteTest:S=>le(void 0,null,function*(){try{yield Ie({url:"mkaguzi.api.test_library.delete_test",method:"DELETE",params:{name:S}}).submit(),yield f()}catch(C){throw console.error("Error deleting test:",C),C}}),executeTest:(A,...M)=>le(void 0,[A,...M],function*(S,C={}){try{return yield Ie({url:"mkaguzi.api.test_library.execute_test",method:"POST",params:{test_name:S,parameters:C}}).submit()}catch($){throw console.error("Error executing test:",$),$}}),getTestDetails:S=>le(void 0,null,function*(){try{return yield Ie({url:"mkaguzi.api.test_library.get_test_details",params:{name:S}}).submit()}catch(C){throw console.error("Error fetching test details:",C),C}}),getTestHistory:S=>le(void 0,null,function*(){try{return yield Ie({url:"mkaguzi.api.test_library.get_test_history",params:{test_name:S}}).submit()}catch(C){throw console.error("Error fetching test history:",C),C}}),importTests:S=>le(void 0,null,function*(){try{const C=new FormData;C.append("file",S);const A=yield Ie({url:"mkaguzi.api.test_library.import_tests",method:"POST",params:C}).submit();return yield f(),A}catch(C){throw console.error("Error importing tests:",C),C}}),exportTests:(...C)=>le(void 0,[...C],function*(S={}){try{return yield Ie({url:"mkaguzi.api.test_library.export_tests",params:S}).submit()}catch(A){throw console.error("Error exporting tests:",A),A}}),resetFilters:()=>{r.value="",i.value="",a.value="",s.value=""}}}),Jsn={class:"p-6"},eon={class:"flex justify-between items-center mb-6"},ton={class:"flex gap-2"},non={class:"bg-white rounded-lg border shadow-sm"},ron={key:0,class:"divide-y divide-gray-200"},ion={class:"flex items-center justify-between mb-4"},aon={class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},son={class:"space-y-3"},oon=["onClick"],lon={class:"flex items-start justify-between"},uon={class:"flex-1 min-w-0"},don={class:"flex items-center gap-3 mb-2"},con={class:"font-medium text-gray-900"},fon={class:"text-sm text-gray-600 mb-2 line-clamp-2"},pon={class:"flex items-center gap-6 text-sm text-gray-500"},hon={class:"flex items-center gap-1"},mon={class:"flex items-center gap-1"},gon={class:"flex items-center gap-1"},von={class:"flex items-center gap-3 ml-4"},yon={class:"text-right text-sm"},bon={class:"text-gray-900 font-medium"},_on={key:0,class:"mt-3 pt-3 border-t border-gray-100"},xon={class:"flex items-center gap-2 mb-2"},won={class:"text-sm font-medium text-gray-700"},kon={class:"grid grid-cols-1 md:grid-cols-3 gap-2 text-xs text-gray-600"},Son={class:"w-4 h-4 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs"},Con={class:"truncate"},Aon={key:0,class:"flex items-center gap-1 text-gray-500"},Ton={key:1,class:"mt-3 pt-3 border-t border-gray-100"},Eon={class:"flex items-center justify-between mb-2"},Mon={class:"flex items-center gap-2"},$on={class:"flex items-center gap-4"},Don={class:"text-xs text-gray-600"},Ron={key:1,class:"p-12 text-center text-gray-500"},Pon={class:"text-gray-600 mb-6"},Ion={__name:"TestLibrary",setup(t){const e=Qsn(),n=J(()=>e.loading);J(()=>e.saving);const r=J({get:()=>e.searchQuery,set:q=>e.searchQuery=q}),i=J({get:()=>e.selectedCategory,set:q=>e.selectedCategory=q}),a=J({get:()=>e.selectedTestType,set:q=>e.selectedTestType=q}),s=J({get:()=>e.selectedStatus,set:q=>e.selectedStatus=q}),o=Q([]),l=Q(!1),d=Q(!1),c=Q(null),f=Q(""),p=J(()=>e.filteredTests),h=J(()=>e.groupedTests);J(()=>e.stats);const m=()=>le(this,null,function*(){yield e.fetchTests()}),g=()=>le(this,null,function*(){yield e.fetchTests()}),v=()=>{c.value=null,d.value=!1,l.value=!0},_=()=>le(this,null,function*(){l.value=!1,yield e.fetchTests()}),x=()=>{console.log("Import tests")},w=q=>le(this,null,function*(){try{c.value=yield e.getTestDetails(q),d.value=!0,l.value=!0}catch(N){console.error("Error fetching test details:",N)}}),k=q=>{console.log("View test history:",q)},S=q=>{const N=o.value.indexOf(q);N>-1?o.value.splice(N,1):o.value.push(q)},C=q=>[{label:"Execute Test",value:"execute",handler:()=>A(q)},{label:"Edit Test",value:"edit",handler:()=>M(q)},{label:"Clone Test",value:"clone",handler:()=>$(q)},{label:"Export",value:"export",handler:()=>R(q)},{label:"Archive",value:"archive",handler:()=>I(q)}],A=q=>{console.log("Execute test:",q.name)},M=q=>le(this,null,function*(){try{c.value=yield e.getTestDetails(q.name),d.value=!0,l.value=!0}catch(N){console.error("Error fetching test details:",N)}}),$=q=>{console.log("Clone test:",q.name)},R=q=>{console.log("Export test:",q.name)},I=q=>{console.log("Archive test:",q.name)},B=q=>({"SQL Query":"blue","Python Script":"green","Built-in Function":"purple"})[q]||"gray",j=q=>({Active:"green",Draft:"gray","Under Review":"blue",Archived:"red"})[q]||"gray",z=q=>({Pass:"bg-green-500",Fail:"bg-red-500",Inconclusive:"bg-yellow-500","N/A":"bg-gray-500"})[q]||"bg-gray-500",F=(q,N)=>{q==="status"?s.value=N:(q==="test_type"||q==="test_logic_type")&&(a.value=N),f.value=N};return bt(()=>le(this,null,function*(){yield m()})),(q,N)=>(T(),P("div",Jsn,[u("div",eon,[N[6]||(N[6]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Test Library"),u("p",{class:"text-gray-600"},"Manage standardized audit tests and procedures")],-1)),u("div",ton,[b(y(Z),{onClick:g,loading:n.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(y(Z),{onClick:x,variant:"outline",size:"sm"},{default:D(()=>[b(y(ps),{class:"w-4 h-4"})]),_:1}),b(y(Z),{onClick:v},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),N[5]||(N[5]=W(" New Test ",-1))]),_:1})])]),b(min,{searchQuery:r.value,"onUpdate:searchQuery":N[0]||(N[0]=O=>r.value=O),selectedCategory:i.value,"onUpdate:selectedCategory":N[1]||(N[1]=O=>i.value=O),selectedTestType:a.value,"onUpdate:selectedTestType":N[2]||(N[2]=O=>a.value=O),selectedStatus:s.value,"onUpdate:selectedStatus":N[3]||(N[3]=O=>s.value=O),onRefresh:g,onCreate:v},null,8,["searchQuery","selectedCategory","selectedTestType","selectedStatus"]),b(Zsn,{tests:p.value,"active-filter":f.value,onFilter:F},null,8,["tests","active-filter"]),u("div",non,[p.value.length>0?(T(),P("div",ron,[(T(!0),P(_e,null,we(h.value,O=>(T(),P("div",{key:O.name,class:"p-4"},[u("div",ion,[u("h3",aon,[b(y(vt),{class:"w-5 h-5"}),u("span",null,E(O.name),1),b(y(Ee),{variant:"gray",size:"sm"},{default:D(()=>[W(E(O.tests.length),1)]),_:2},1024)]),b(y(Z),{onClick:V=>S(O.name),variant:"ghost",size:"sm"},{default:D(()=>[o.value.includes(O.name)?(T(),he(y(mo),{key:0,class:"w-4 h-4"})):(T(),he(y(tr),{key:1,class:"w-4 h-4"}))]),_:2},1032,["onClick"])]),xe(u("div",son,[(T(!0),P(_e,null,we(O.tests,V=>{var L,U;return T(),P("div",{key:V.name,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:G=>w(V.name)},[u("div",lon,[u("div",uon,[u("div",don,[u("h4",con,E(V.test_name),1),b(y(Ee),{variant:B(V.test_logic_type)},{default:D(()=>[W(E(V.test_logic_type),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:j(V.status),size:"sm"},{default:D(()=>[W(E(V.status),1)]),_:2},1032,["variant"])]),u("p",fon,E(V.description),1),u("div",pon,[u("div",hon,[b(y(Xi),{class:"w-4 h-4"}),u("span",null,E(V.objective||"No objective"),1)]),u("div",mon,[b(y(ri),{class:"w-4 h-4"}),u("span",null,E(V.data_source||"No data source"),1)]),u("div",gon,[b(y(Ii),{class:"w-4 h-4"}),u("span",null,E(V.estimated_time||0)+" mins",1)])])]),u("div",von,[u("div",yon,[u("p",bon,E(V.usage_count||0),1),N[7]||(N[7]=u("p",{class:"text-gray-500"},"executions",-1))]),b(y(f2),{options:C(V)},{default:D(({open:G})=>[b(y(Z),{variant:"ghost",size:"sm"},{default:D(()=>[b(y(O0),{class:"w-4 h-4"})]),_:1})]),_:1},8,["options"])])]),(L=V.test_steps)!=null&&L.length?(T(),P("div",_on,[u("div",xon,[b(y(YD),{class:"w-4 h-4 text-gray-400"}),u("span",won,"Test Steps ("+E(V.test_steps.length)+")",1)]),u("div",kon,[(T(!0),P(_e,null,we(V.test_steps.slice(0,3),(G,X)=>(T(),P("div",{key:X,class:"flex items-center gap-1"},[u("span",Son,E(X+1),1),u("span",Con,E(G.description||G.step_description),1)]))),128)),V.test_steps.length>3?(T(),P("div",Aon,[u("span",null,"+"+E(V.test_steps.length-3)+" more steps",1)])):ie("",!0)])])):ie("",!0),(U=V.recent_executions)!=null&&U.length?(T(),P("div",Ton,[u("div",Eon,[u("div",Mon,[b(y(uY),{class:"w-4 h-4 text-gray-400"}),N[8]||(N[8]=u("span",{class:"text-sm font-medium text-gray-700"},"Recent Executions",-1))]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(G=>k(V.name),["stop"])},{default:D(()=>[...N[9]||(N[9]=[W(" View All ",-1)])]),_:1},8,["onClick"])]),u("div",$on,[(T(!0),P(_e,null,we(V.recent_executions.slice(0,3),G=>(T(),P("div",{key:G.name,class:"flex items-center gap-2"},[u("div",{class:fe(["w-3 h-3 rounded-full",z(G.result)])},null,2),u("span",Don,E(q.formatDate(G.execution_date)),1)]))),128))])])):ie("",!0)],8,oon)}),128))],512),[[ot,o.value.includes(O.name)]])]))),128))])):(T(),P("div",Ron,[b(y(ri),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),N[11]||(N[11]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No tests found",-1)),u("p",Pon,E(r.value||i.value||a.value?"Try adjusting your filters":"Create your first audit test to get started"),1),b(y(Z),{onClick:v},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),N[10]||(N[10]=W(" Create Test ",-1))]),_:1})]))]),b(usn,{show:l.value,"onUpdate:show":N[4]||(N[4]=O=>l.value=O),"test-data":c.value,"is-edit-mode":d.value,onSaved:_},null,8,["show","test-data","is-edit-mode"])]))}},Oon=Ft(Ion,[["__scopeId","data-v-ca021496"]]),Lon={class:"space-y-6"},Von={class:"flex items-center justify-between"},Non={class:"flex items-center space-x-3"},jon={class:"bg-white rounded-lg border border-gray-200 p-4"},Fon={class:"flex flex-col sm:flex-row gap-4"},Bon={class:"flex-1"},zon={class:"flex gap-2"},Uon={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},Hon={class:"overflow-x-auto"},qon={class:"min-w-full divide-y divide-gray-200"},Won={class:"bg-white divide-y divide-gray-200"},Gon={class:"px-6 py-4 whitespace-nowrap"},Yon={class:"flex items-center"},Kon={class:"flex-shrink-0 h-10 w-10"},Xon={class:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center"},Zon={class:"ml-4"},Qon={class:"text-sm font-medium text-gray-900"},Jon={class:"text-sm text-gray-500"},eln={class:"px-6 py-4 whitespace-nowrap"},tln={class:"text-sm text-gray-900"},nln={class:"px-6 py-4 whitespace-nowrap"},rln={class:"flex flex-wrap gap-1"},iln={class:"px-6 py-4 whitespace-nowrap"},aln={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},sln={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},oln={class:"flex items-center space-x-2"},lln={class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},uln={class:"flex items-center justify-between"},dln={class:"text-sm text-gray-700"},cln={class:"flex items-center space-x-2"},fln={class:"flex items-center justify-between mb-4"},pln={class:"text-lg font-medium text-gray-900"},hln={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mln={key:0},gln={class:"flex items-center space-x-2"},vln={class:"flex justify-end space-x-3 pt-4"},yln={__name:"UserManagement",setup(t){const e=Q(""),n=Q(""),r=Q(""),i=Q(1),a=Q(10),s=Q(!1),o=Q(!1),l=Q(!1),d=Q([]),c=Q({name:"",full_name:"",username:"",email:"",role_profile_name:"",password:"",enabled:!0}),f=J(()=>{let $=d.value;if(e.value){const R=e.value.toLowerCase();$=$.filter(I=>{var B,j,z,F;return((B=I.full_name)==null?void 0:B.toLowerCase().includes(R))||((j=I.email)==null?void 0:j.toLowerCase().includes(R))||((z=I.username)==null?void 0:z.toLowerCase().includes(R))||((F=I.roles)==null?void 0:F.some(q=>q.toLowerCase().includes(R)))})}if(n.value&&($=$.filter(R=>{var I;return(I=R.roles)==null?void 0:I.includes(n.value)})),r.value){const R=r.value==="active";$=$.filter(I=>I.enabled===R)}return $}),p=J(()=>f.value.length),h=J(()=>Math.ceil(p.value/a.value)),m=[{label:"All Roles",value:""},{label:"System Manager",value:"System Manager"},{label:"Audit Manager",value:"Audit Manager"},{label:"Auditor",value:"Auditor"},{label:"Compliance Officer",value:"Compliance Officer"},{label:"Guest",value:"Guest"}],g=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],v=[{label:"System Manager",value:"System Manager"},{label:"Audit Manager",value:"Audit Manager"},{label:"Auditor",value:"Auditor"},{label:"Compliance Officer",value:"Compliance Officer"},{label:"Guest",value:"Guest"}],_=()=>le(this,null,function*(){try{d.value=[{name:"Administrator",full_name:"Administrator",username:"Administrator",email:"admin@example.com",roles:["System Manager"],enabled:!0,last_login:new Date().toISOString()},{name:"Guest",full_name:"Guest",username:"Guest",email:"guest@example.com",roles:["Guest"],enabled:!0,last_login:null},{name:"john_doe",full_name:"John Doe",username:"john_doe",email:"john.doe@example.com",roles:["Audit Manager"],enabled:!0,last_login:new Date(Date.now()-864e5).toISOString()},{name:"jane_smith",full_name:"Jane Smith",username:"jane_smith",email:"jane.smith@example.com",roles:["Auditor"],enabled:!0,last_login:new Date(Date.now()-36e5).toISOString()},{name:"mike_johnson",full_name:"Mike Johnson",username:"mike_johnson",email:"mike.johnson@example.com",roles:["Compliance Officer"],enabled:!1,last_login:new Date(Date.now()-6048e5).toISOString()}]}catch($){console.error("Error fetching users:",$)}}),x=$=>({"System Manager":"destructive","Audit Manager":"default",Auditor:"secondary","Compliance Officer":"outline",Guest:"secondary"})[$]||"secondary",w=$=>{c.value=me({},$),o.value=!0},k=$=>le(this,null,function*(){try{$.enabled=!$.enabled,console.log(`User ${$.name} ${$.enabled?"enabled":"disabled"}`)}catch(R){console.error("Error toggling user status:",R)}}),S=$=>le(this,null,function*(){if(confirm(`Are you sure you want to reset the password for ${$.full_name}?`))try{console.log(`Password reset for user ${$.name}`),alert("Password reset email sent successfully!")}catch(R){console.error("Error resetting password:",R),alert("Error resetting password. Please try again.")}}),C=()=>le(this,null,function*(){l.value=!0;try{if(o.value){const $=d.value.findIndex(R=>R.name===c.value.name);$!==-1&&(d.value[$]=me({},c.value))}else d.value.push(je(me({},c.value),{name:c.value.username,last_login:null}));A(),console.log("User saved successfully")}catch($){console.error("Error saving user:",$),alert("Error saving user. Please try again.")}finally{l.value=!1}}),A=()=>{s.value=!1,o.value=!1,c.value={name:"",full_name:"",username:"",email:"",role_profile_name:"",password:"",enabled:!0}},M=$=>$?new Date($).toLocaleString():"Never";return bt(()=>{_()}),($,R)=>(T(),P("div",Lon,[u("div",Von,[R[15]||(R[15]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"User Management"),u("p",{class:"text-gray-600 mt-1"}," Manage system users, roles, and permissions ")],-1)),u("div",Non,[b(y(Z),{variant:"outline"},{default:D(()=>[b(y(bn),{class:"h-4 w-4 mr-2"}),R[13]||(R[13]=W(" Export Users ",-1))]),_:1}),b(y(Z),{onClick:R[0]||(R[0]=I=>s.value=!0)},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),R[14]||(R[14]=W(" Add User ",-1))]),_:1})])]),u("div",jon,[u("div",Fon,[u("div",Bon,[b(y(En),{modelValue:e.value,"onUpdate:modelValue":R[1]||(R[1]=I=>e.value=I),placeholder:"Search users by name, email, or role...",class:"w-full"},{default:D(()=>[b(y(Rn),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",zon,[b(y(Ke),{modelValue:n.value,"onUpdate:modelValue":R[2]||(R[2]=I=>n.value=I),options:m,placeholder:"All Roles",class:"w-40"},null,8,["modelValue"]),b(y(Ke),{modelValue:r.value,"onUpdate:modelValue":R[3]||(R[3]=I=>r.value=I),options:g,placeholder:"All Status",class:"w-40"},null,8,["modelValue"])])])]),u("div",Uon,[u("div",Hon,[u("table",qon,[R[16]||(R[16]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Login "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),u("tbody",Won,[(T(!0),P(_e,null,we(f.value,I=>(T(),P("tr",{key:I.name,class:"hover:bg-gray-50"},[u("td",Gon,[u("div",Yon,[u("div",Kon,[u("div",Xon,[b(y(Ro),{class:"h-5 w-5 text-white"})])]),u("div",Zon,[u("div",Qon,E(I.full_name||I.name),1),u("div",Jon,E(I.username),1)])])]),u("td",eln,[u("div",tln,E(I.email),1)]),u("td",nln,[u("div",rln,[(T(!0),P(_e,null,we(I.roles,B=>(T(),he(y(Ee),{key:B,variant:x(B),size:"sm"},{default:D(()=>[W(E(B),1)]),_:2},1032,["variant"]))),128))])]),u("td",iln,[b(y(Ee),{variant:I.enabled?"success":"secondary"},{default:D(()=>[W(E(I.enabled?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),u("td",aln,E(M(I.last_login)),1),u("td",sln,[u("div",oln,[b(y(Z),{variant:"ghost",size:"sm",onClick:B=>w(I)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:B=>k(I)},{default:D(()=>[(T(),he(Lt(I.enabled?y(zce):y(Gt)),{class:fe(["h-4 w-4",I.enabled?"text-red-500":"text-green-500"])},null,8,["class"]))]),_:2},1032,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:B=>S(I)},{default:D(()=>[b(y(ife),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128))])])]),u("div",lln,[u("div",uln,[u("div",dln," Showing "+E((i.value-1)*a.value+1)+" to "+E(Math.min(i.value*a.value,p.value))+" of "+E(p.value)+" users ",1),u("div",cln,[b(y(Z),{variant:"outline",size:"sm",disabled:i.value===1,onClick:R[4]||(R[4]=I=>i.value--)},{default:D(()=>[b(y(pr),{class:"h-4 w-4"}),R[17]||(R[17]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",size:"sm",disabled:i.value===h.value,onClick:R[5]||(R[5]=I=>i.value++)},{default:D(()=>[R[18]||(R[18]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])]),s.value||o.value?(T(),P("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:A},[u("div",{class:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",onClick:R[12]||(R[12]=dt(()=>{},["stop"]))},[u("div",fln,[u("h3",pln,E(o.value?"Edit User":"Add New User"),1),b(y(Z),{variant:"ghost",onClick:A},{default:D(()=>[b(y(ht),{class:"h-5 w-5"})]),_:1})]),u("form",{onSubmit:dt(C,["prevent"]),class:"space-y-4"},[u("div",hln,[u("div",null,[R[19]||(R[19]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name",-1)),b(y(En),{modelValue:c.value.full_name,"onUpdate:modelValue":R[6]||(R[6]=I=>c.value.full_name=I),placeholder:"Enter full name",required:"",class:"w-full"},null,8,["modelValue"])]),u("div",null,[R[20]||(R[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Username",-1)),b(y(En),{modelValue:c.value.username,"onUpdate:modelValue":R[7]||(R[7]=I=>c.value.username=I),placeholder:"Enter username",required:"",class:"w-full"},null,8,["modelValue"])]),u("div",null,[R[21]||(R[21]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),b(y(En),{modelValue:c.value.email,"onUpdate:modelValue":R[8]||(R[8]=I=>c.value.email=I),type:"email",placeholder:"Enter email address",required:"",class:"w-full"},null,8,["modelValue"])]),u("div",null,[R[22]||(R[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),b(y(Ke),{modelValue:c.value.role_profile_name,"onUpdate:modelValue":R[9]||(R[9]=I=>c.value.role_profile_name=I),options:v,placeholder:"Select role",required:"",class:"w-full"},null,8,["modelValue"])])]),o.value?ie("",!0):(T(),P("div",mln,[R[23]||(R[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Password",-1)),b(y(En),{modelValue:c.value.password,"onUpdate:modelValue":R[10]||(R[10]=I=>c.value.password=I),type:"password",placeholder:"Enter password",required:"",class:"w-full"},null,8,["modelValue"])])),u("div",gln,[b(y(Ut),{modelValue:c.value.enabled,"onUpdate:modelValue":R[11]||(R[11]=I=>c.value.enabled=I)},null,8,["modelValue"]),R[24]||(R[24]=u("label",{class:"text-sm text-gray-700"},"User is active",-1))]),u("div",vln,[b(y(Z),{variant:"outline",onClick:A},{default:D(()=>[...R[25]||(R[25]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{type:"submit",loading:l.value},{default:D(()=>[W(E(o.value?"Update User":"Create User"),1)]),_:1},8,["loading"])])],32)])])):ie("",!0)]))}},bln={class:"flex items-center space-x-4 mb-6"},_ln={class:"flex-shrink-0"},xln={class:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center"},wln={class:"flex-1"},kln={class:"flex items-center space-x-3"},Sln={class:"text-xl font-bold text-gray-900"},Cln={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Aln={class:"text-gray-600 mt-1"},Zx={__name:"SectionHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,default:"file-text"},step:{type:[String,Number],required:!0}},setup(t){const e=t,n=J(()=>({"file-text":vt,"clipboard-list":kr,users:ya,"check-circle":Gt})[e.icon]||vt);return(r,i)=>(T(),P("div",bln,[u("div",_ln,[u("div",xln,[(T(),he(Lt(n.value),{class:"h-6 w-6 text-purple-600"}))])]),u("div",wln,[u("div",kln,[u("h3",Sln,E(t.title),1),u("span",Cln," Step "+E(t.step),1)]),u("p",Aln,E(t.description),1)])]))}},Tln={class:"h-[80vh] flex"},Eln={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},Mln={class:"p-5"},$ln={class:"space-y-1"},Dln=["onClick"],Rln={key:1},Pln={class:"flex-1 min-w-0"},Iln={class:"text-sm font-medium truncate"},Oln={class:"text-xs text-gray-500"},Lln={class:"mt-6 p-4 bg-white rounded-lg border border-gray-200"},Vln={class:"flex items-center justify-between mb-2"},Nln={class:"text-sm font-bold text-purple-600"},jln={class:"w-full bg-gray-200 rounded-full h-2"},Fln={class:"text-xs text-gray-500 mt-2"},Bln={class:"flex-1 overflow-y-auto"},zln={class:"p-6 max-w-5xl mx-auto"},Uln={class:"space-y-6"},Hln={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},qln={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Wln={key:0,class:"mt-1 text-xs text-red-500"},Gln={key:1,class:"mt-1 text-xs text-gray-500"},Yln=["value"],Kln=["value"],Xln={key:0,class:"mt-1 text-xs text-red-500"},Zln={class:"mt-6"},Qln={key:0,class:"mt-1 text-xs text-red-500"},Jln={class:"mt-6"},eun={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6"},tun={class:"space-y-6"},nun={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},run={key:0,class:"mt-1 text-xs text-red-500"},iun={class:"space-y-6"},aun={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},sun={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oun={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},lun={key:0,class:"mt-1 text-xs text-red-500"},uun={class:"space-y-6"},dun={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},cun={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fun={class:"border-t border-gray-200 pt-6"},pun={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},hun={class:"border-t border-gray-200 pt-6"},mun={class:"flex items-center justify-between w-full"},gun={class:"flex items-center space-x-4"},vun={class:"flex items-center space-x-2"},yun={class:"flex items-center space-x-2"},bun={class:"flex items-center space-x-3"},_un={__name:"WorkingPapersForm",props:{modelValue:{type:Boolean,default:!1},workingPaper:{type:Object,default:null}},emits:["update:modelValue","created","updated","cancelled"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.modelValue,set:j=>r("update:modelValue",j)}),a=J(()=>{var j;return!!((j=n.workingPaper)!=null&&j.name)}),s=[{id:"basic",label:"Basic Information",description:"Core details",icon:"file-text"},{id:"content",label:"Content & Work",description:"Documentation",icon:"clipboard-list"},{id:"assignment",label:"Assignment",description:"Team & timeline",icon:"users"},{id:"quality",label:"Quality Control",description:"Review & docs",icon:"check-circle"}],o=Q("basic"),l=Jt({working_paper_id:"",wp_title:"",wp_reference_no:"",wp_type:"",engagement_reference:"",procedure_reference:"",work_performed:"",objective:"",scope:"",prepared_by:"",reviewed_by:"",preparation_date:"",review_date:"",due_date:"",review_status:"Not Reviewed",quality_score:"",review_comments:"",supporting_documents:"",attachments:[],notes:""}),d=Jt({}),c=Q(!1),f=Q(!1),p=[{label:"Not Reviewed",value:"Not Reviewed"},{label:"Under Review",value:"Under Review"},{label:"Review Complete",value:"Review Complete"},{label:"Revision Required",value:"Revision Required"}],h=[{label:"Planning Memo",value:"Planning Memo"},{label:"Risk Assessment",value:"Risk Assessment"},{label:"Walkthrough",value:"Walkthrough"},{label:"Test of Controls",value:"Test of Controls"},{label:"Substantive Test",value:"Substantive Test"},{label:"Analytical Review",value:"Analytical Review"},{label:"Data Analytics",value:"Data Analytics"},{label:"Summary",value:"Summary"},{label:"Other",value:"Other"}],m=J(()=>s.findIndex(j=>j.id===o.value)),g=j=>{switch(j){case"basic":return l.wp_title&&l.wp_type&&l.engagement_reference?"complete":l.wp_title||l.wp_type?"partial":"incomplete";case"content":return l.work_performed?"complete":"incomplete";case"assignment":return l.prepared_by&&l.preparation_date?"complete":l.prepared_by||l.preparation_date?"partial":"incomplete";case"quality":return"complete";default:return"incomplete"}},v=j=>{const z=g(j);return z==="complete"?"bg-purple-500 text-white":z==="partial"?"bg-amber-500 text-white":"bg-gray-300 text-gray-600"},_=J(()=>s.filter(j=>g(j.id)==="complete").length),x=J(()=>Math.round(_.value/s.length*100)),w=J(()=>!!(l.wp_title&&l.wp_type&&l.engagement_reference&&l.work_performed&&l.prepared_by&&l.preparation_date)),k=()=>{const j=m.value;j>0&&(o.value=s[j-1].id)},S=()=>{const j=m.value;j<s.length-1&&(o.value=s[j+1].id)},C=()=>{const j={};return l.wp_title||(j.wp_title="Working paper title is required"),l.wp_type||(j.wp_type="Type is required"),l.engagement_reference||(j.engagement_reference="Engagement reference is required"),l.work_performed||(j.work_performed="Work performed is required"),l.prepared_by||(j.prepared_by="Prepared by is required"),l.preparation_date||(j.preparation_date="Preparation date is required"),Object.assign(d,j),Object.keys(j).length===0},A=()=>je(me({},l),{attachments:Array.isArray(l.attachments)?l.attachments:[]}),M=()=>le(this,null,function*(){if(!C()){const j=s.find(z=>g(z.id)!=="complete");j&&(o.value=j.id);return}try{c.value=!0;const j=A();a.value?r("updated",je(me({},j),{name:n.workingPaper.name})):r("created",j),i.value=!1}catch(j){console.error("Error saving working paper:",j)}finally{c.value=!1}}),$=()=>le(this,null,function*(){try{f.value=!0;const j=A();r("created",je(me({},j),{review_status:"Not Reviewed"})),i.value=!1}catch(j){console.error("Error saving draft:",j)}finally{f.value=!1}}),R=()=>{r("cancelled"),i.value=!1},I=()=>{Object.keys(l).forEach(j=>{Array.isArray(l[j])?l[j]=[]:typeof l[j]=="number"?l[j]=null:l[j]=""}),l.review_status="Not Reviewed",Object.keys(d).forEach(j=>delete d[j]),o.value="basic"},B=j=>{j&&Object.keys(l).forEach(z=>{j[z]!==void 0&&(l[z]=j[z])})};return Je(()=>n.modelValue,j=>{j&&(n.workingPaper?B(n.workingPaper):I())}),Je(()=>n.workingPaper,j=>{j&&n.modelValue&&B(j)},{deep:!0}),(j,z)=>(T(),he(y(zt),{modelValue:i.value,"onUpdate:modelValue":z[20]||(z[20]=F=>i.value=F),options:{title:a.value?"Edit Working Paper":"Create New Working Paper",size:"full"}},{"body-content":D(()=>[u("div",Tln,[u("div",Eln,[u("div",Mln,[z[22]||(z[22]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Form Sections",-1)),u("nav",$ln,[(T(),P(_e,null,we(s,(F,q)=>u("button",{key:F.id,onClick:N=>o.value=F.id,class:fe(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-left transition-all",[o.value===F.id?"bg-purple-100 border border-purple-300 text-purple-800":"hover:bg-gray-100 text-gray-700"]])},[u("div",{class:fe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold flex-shrink-0",v(F.id)])},[g(F.id)==="complete"?(T(),he(y(Wr),{key:0,class:"h-3 w-3"})):(T(),P("span",Rln,E(q+1),1))],2),u("div",Pln,[u("div",Iln,E(F.label),1),u("div",Oln,E(F.description),1)])],10,Dln)),64))]),u("div",Lln,[u("div",Vln,[z[21]||(z[21]=u("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),u("span",Nln,E(x.value)+"%",1)]),u("div",jln,[u("div",{class:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:nt({width:`${x.value}%`})},null,4)]),u("p",Fln,E(_.value)+" of "+E(s.length)+" sections complete ",1)])])]),u("div",Bln,[u("div",zln,[xe(u("div",Uln,[b(Zx,{title:"Basic Information",description:"Essential working paper details and identification",icon:"file-text",step:"1"}),u("div",Hln,[u("div",qln,[u("div",null,[z[23]||(z[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Working Paper ID "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("input",{"onUpdate:modelValue":z[0]||(z[0]=F=>l.working_paper_id=F),type:"text",placeholder:"Auto-generated if left blank",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",d.working_paper_id?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.working_paper_id]]),d.working_paper_id?(T(),P("p",Wln,E(d.working_paper_id),1)):(T(),P("p",Gln,"Format: WP-YYYY-XXX"))]),u("div",null,[z[24]||(z[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Review Status "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("select",{"onUpdate:modelValue":z[1]||(z[1]=F=>l.review_status=F),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[(T(),P(_e,null,we(p,F=>u("option",{key:F.value,value:F.value},E(F.label),9,Yln)),64))],512),[[gn,l.review_status]])]),u("div",null,[z[26]||(z[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Type "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("select",{"onUpdate:modelValue":z[2]||(z[2]=F=>l.wp_type=F),class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",d.wp_type?"border-red-300":"border-gray-300"])},[z[25]||(z[25]=u("option",{value:""},"Select type",-1)),(T(),P(_e,null,we(h,F=>u("option",{key:F.value,value:F.value},E(F.label),9,Kln)),64))],2),[[gn,l.wp_type]]),d.wp_type?(T(),P("p",Xln,E(d.wp_type),1)):ie("",!0)])]),u("div",Zln,[z[27]||(z[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Title "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("input",{"onUpdate:modelValue":z[3]||(z[3]=F=>l.wp_title=F),type:"text",placeholder:"Enter working paper title",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",d.wp_title?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.wp_title]]),d.wp_title?(T(),P("p",Qln,E(d.wp_title),1)):ie("",!0)]),u("div",Jln,[z[28]||(z[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Reference Number ",-1)),xe(u("input",{"onUpdate:modelValue":z[4]||(z[4]=F=>l.wp_reference_no=F),type:"text",placeholder:"REF-001",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Mt,l.wp_reference_no]])]),u("div",eun,[u("div",null,[z[29]||(z[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Engagement Reference "),u("span",{class:"text-red-500"},"*")],-1)),b(At,{modelValue:l.engagement_reference,"onUpdate:modelValue":z[5]||(z[5]=F=>l.engagement_reference=F),doctype:"Audit Engagement",placeholder:"Select audit engagement",required:!0,error:d.engagement_reference},null,8,["modelValue","error"])]),u("div",null,[z[30]||(z[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Procedure Reference ",-1)),b(At,{modelValue:l.procedure_reference,"onUpdate:modelValue":z[6]||(z[6]=F=>l.procedure_reference=F),doctype:"Audit Procedure",placeholder:"Link to audit procedure"},null,8,["modelValue"])])])])],512),[[ot,o.value==="basic"]]),xe(u("div",tun,[b(Zx,{title:"Content & Work Performed",description:"Document the work performed and findings",icon:"clipboard-list",step:"2"}),u("div",nun,[u("div",null,[z[31]||(z[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Work Performed "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("textarea",{"onUpdate:modelValue":z[7]||(z[7]=F=>l.work_performed=F),rows:"6",placeholder:"Describe the work performed, procedures followed, and methodology used...",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",d.work_performed?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.work_performed]]),d.work_performed?(T(),P("p",run,E(d.work_performed),1)):ie("",!0)]),u("div",null,[z[32]||(z[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Objective ",-1)),xe(u("textarea",{"onUpdate:modelValue":z[8]||(z[8]=F=>l.objective=F),rows:"3",placeholder:"What was the objective of this working paper?",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Mt,l.objective]])]),u("div",null,[z[33]||(z[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Scope ",-1)),xe(u("textarea",{"onUpdate:modelValue":z[9]||(z[9]=F=>l.scope=F),rows:"3",placeholder:"Define the scope and boundaries of this working paper...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Mt,l.scope]])])])],512),[[ot,o.value==="content"]]),xe(u("div",iun,[b(Zx,{title:"Assignment & Timeline",description:"Assign team members and track progress",icon:"users",step:"3"}),u("div",aun,[u("div",sun,[u("div",null,[z[34]||(z[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Prepared By "),u("span",{class:"text-red-500"},"*")],-1)),b(At,{modelValue:l.prepared_by,"onUpdate:modelValue":z[10]||(z[10]=F=>l.prepared_by=F),doctype:"User",filters:{enabled:1},placeholder:"Select preparer",required:!0,error:d.prepared_by},null,8,["modelValue","error"])]),u("div",null,[z[35]||(z[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Reviewed By ",-1)),b(At,{modelValue:l.reviewed_by,"onUpdate:modelValue":z[11]||(z[11]=F=>l.reviewed_by=F),doctype:"User",filters:{enabled:1},placeholder:"Select reviewer"},null,8,["modelValue"])])]),u("div",oun,[u("div",null,[z[36]||(z[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Preparation Date "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("input",{"onUpdate:modelValue":z[12]||(z[12]=F=>l.preparation_date=F),type:"date",class:fe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",d.preparation_date?"border-red-300":"border-gray-300"])},null,2),[[Mt,l.preparation_date]]),d.preparation_date?(T(),P("p",lun,E(d.preparation_date),1)):ie("",!0)]),u("div",null,[z[37]||(z[37]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Review Date ",-1)),xe(u("input",{"onUpdate:modelValue":z[13]||(z[13]=F=>l.review_date=F),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Mt,l.review_date]])]),u("div",null,[z[38]||(z[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Due Date ",-1)),xe(u("input",{"onUpdate:modelValue":z[14]||(z[14]=F=>l.due_date=F),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Mt,l.due_date]])])])])],512),[[ot,o.value==="assignment"]]),xe(u("div",uun,[b(Zx,{title:"Quality Control & Documentation",description:"Quality assessment and documentation references",icon:"check-circle",step:"4"}),u("div",dun,[u("div",cun,[u("div",null,[z[40]||(z[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Quality Score ",-1)),xe(u("select",{"onUpdate:modelValue":z[15]||(z[15]=F=>l.quality_score=F),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...z[39]||(z[39]=[u("option",{value:""},"Select score",-1),u("option",{value:"1"},"1 - Poor",-1),u("option",{value:"2"},"2 - Below Average",-1),u("option",{value:"3"},"3 - Average",-1),u("option",{value:"4"},"4 - Good",-1),u("option",{value:"5"},"5 - Excellent",-1)])],512),[[gn,l.quality_score]])]),u("div",null,[z[41]||(z[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Review Comments ",-1)),xe(u("textarea",{"onUpdate:modelValue":z[16]||(z[16]=F=>l.review_comments=F),rows:"3",placeholder:"Reviewer feedback and comments...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Mt,l.review_comments]])])]),u("div",fun,[z[44]||(z[44]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Documentation References",-1)),u("div",pun,[u("div",null,[z[42]||(z[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Supporting Documents ",-1)),xe(u("textarea",{"onUpdate:modelValue":z[17]||(z[17]=F=>l.supporting_documents=F),rows:"3",placeholder:"List supporting documents, references, and evidence...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Mt,l.supporting_documents]])]),u("div",null,[z[43]||(z[43]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," File Attachments ",-1)),b(xSt,{modelValue:l.attachments,"onUpdate:modelValue":z[18]||(z[18]=F=>l.attachments=F),multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",placeholder:"Upload working paper files"},null,8,["modelValue"])])])]),u("div",hun,[z[45]||(z[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Additional Notes ",-1)),xe(u("textarea",{"onUpdate:modelValue":z[19]||(z[19]=F=>l.notes=F),rows:"3",placeholder:"Any additional notes or observations...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Mt,l.notes]])])])],512),[[ot,o.value==="quality"]])])])])]),actions:D(()=>[u("div",mun,[u("div",gun,[u("div",vun,[u("div",{class:fe(["w-3 h-3 rounded-full",w.value?"bg-green-500":"bg-amber-500"])},null,2),u("span",{class:fe(["text-sm font-medium",w.value?"text-green-700":"text-amber-700"])},E(w.value?"Ready to save":"Complete required fields"),3)]),u("div",yun,[b(y(Z),{variant:"ghost",size:"sm",disabled:m.value===0,onClick:k},{default:D(()=>[b(y(pr),{class:"h-4 w-4 mr-1"}),z[46]||(z[46]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(y(Z),{variant:"ghost",size:"sm",disabled:m.value===s.length-1,onClick:S},{default:D(()=>[z[47]||(z[47]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4 ml-1"})]),_:1},8,["disabled"])])]),u("div",bun,[b(y(Z),{variant:"outline",onClick:R,disabled:c.value},{default:D(()=>[...z[48]||(z[48]=[W(" Cancel ",-1)])]),_:1},8,["disabled"]),a.value?ie("",!0):(T(),he(y(Z),{key:0,variant:"outline",theme:"gray",onClick:$,loading:f.value,disabled:c.value},{default:D(()=>[...z[49]||(z[49]=[W(" Save as Draft ",-1)])]),_:1},8,["loading","disabled"])),b(y(Z),{variant:"solid",theme:"purple",onClick:M,loading:c.value},{prefix:D(()=>[a.value?(T(),he(y(Wr),{key:1,class:"h-4 w-4"})):(T(),he(y(tt),{key:0,class:"h-4 w-4"}))]),default:D(()=>[W(" "+E(a.value?"Update Working Paper":"Create Working Paper"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","options"]))}},xun={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-6 gap-4"},wun={class:"bg-purple-50 rounded-xl border border-purple-200 p-6 hover:shadow-lg transition-shadow"},kun={class:"flex items-center justify-between"},Sun={class:"text-3xl font-bold text-purple-900 mt-1"},Cun={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},Aun={class:"bg-green-50 rounded-xl border border-green-200 p-6 hover:shadow-lg transition-shadow"},Tun={class:"flex items-center justify-between"},Eun={class:"text-3xl font-bold text-green-900 mt-1"},Mun={class:"text-xs text-green-600 mt-1"},$un={class:"p-3 bg-green-500 rounded-xl shadow-sm"},Dun={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-6 hover:shadow-lg transition-shadow"},Run={class:"flex items-center justify-between"},Pun={class:"text-3xl font-bold text-yellow-900 mt-1"},Iun={class:"p-3 bg-yellow-500 rounded-xl shadow-sm"},Oun={class:"bg-red-50 rounded-xl border border-red-200 p-6 hover:shadow-lg transition-shadow"},Lun={class:"flex items-center justify-between"},Vun={class:"text-3xl font-bold text-red-900 mt-1"},Nun={class:"p-3 bg-red-500 rounded-xl shadow-sm"},jun={class:"bg-blue-50 rounded-xl border border-blue-200 p-6 hover:shadow-lg transition-shadow"},Fun={class:"flex items-center justify-between"},Bun={class:"text-3xl font-bold text-blue-900 mt-1"},zun={class:"w-full bg-blue-200 rounded-full h-2 mt-2"},Uun={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},Hun={class:"bg-indigo-50 rounded-xl border border-indigo-200 p-6 hover:shadow-lg transition-shadow"},qun={class:"flex items-center justify-between"},Wun={class:"text-3xl font-bold text-indigo-900 mt-1"},Gun={class:"p-3 bg-indigo-500 rounded-xl shadow-sm"},Yun={__name:"WorkingPapersStats",props:{workingPapers:{type:Array,default:()=>[]}},setup(t){const e=t,n=J(()=>e.workingPapers.length),r=J(()=>e.workingPapers.filter(l=>l.review_status==="Review Complete").length),i=J(()=>e.workingPapers.filter(l=>l.review_status==="Under Review").length),a=J(()=>e.workingPapers.filter(l=>l.review_status==="Revision Required").length),s=J(()=>{const l=e.workingPapers.filter(c=>c.review_date&&c.preparation_date);if(l.length===0)return 0;const d=l.reduce((c,f)=>{const p=new Date(f.preparation_date),h=new Date(f.review_date),m=Math.abs(h-p),g=Math.ceil(m/(1e3*60*60*24));return c+g},0);return Math.round(d/l.length)}),o=J(()=>{const l=e.workingPapers.filter(c=>c.quality_score);if(l.length===0)return 0;const d=l.reduce((c,f)=>c+(f.quality_score||0),0);return Math.round(d/l.length)});return(l,d)=>(T(),P("div",xun,[u("div",wun,[u("div",kun,[u("div",null,[d[0]||(d[0]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Total Papers",-1)),u("p",Sun,E(n.value),1),d[1]||(d[1]=u("p",{class:"text-xs text-purple-600 mt-1"},"Active documentation",-1))]),u("div",Cun,[b(y(vt),{class:"h-7 w-7 text-white"})])])]),u("div",Aun,[u("div",Tun,[u("div",null,[d[2]||(d[2]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Review Complete",-1)),u("p",Eun,E(r.value),1),u("p",Mun,E((r.value/Math.max(n.value,1)*100).toFixed(0))+"% of total",1)]),u("div",$un,[b(y(Gt),{class:"h-7 w-7 text-white"})])])]),u("div",Dun,[u("div",Run,[u("div",null,[d[3]||(d[3]=u("p",{class:"text-sm font-semibold text-yellow-700 uppercase tracking-wide"},"Under Review",-1)),u("p",Pun,E(i.value),1),d[4]||(d[4]=u("p",{class:"text-xs text-yellow-600 mt-1"},"Pending approval",-1))]),u("div",Iun,[b(y(Ii),{class:"h-7 w-7 text-white"})])])]),u("div",Oun,[u("div",Lun,[u("div",null,[d[5]||(d[5]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Revision Required",-1)),u("p",Vun,E(a.value),1),d[6]||(d[6]=u("p",{class:"text-xs text-red-600 mt-1"},"Needs updates",-1))]),u("div",Nun,[b(y(nn),{class:"h-7 w-7 text-white"})])])]),u("div",jun,[u("div",Fun,[u("div",null,[d[7]||(d[7]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Avg. Review Time",-1)),u("p",Bun,E(s.value)+" days",1),u("div",zun,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${Math.min(s.value/14*100,100)}%`})},null,4)])]),u("div",Uun,[b(y(J1),{class:"h-7 w-7 text-white"})])])]),u("div",Hun,[u("div",qun,[u("div",null,[d[8]||(d[8]=u("p",{class:"text-sm font-semibold text-indigo-700 uppercase tracking-wide"},"Quality Score",-1)),u("p",Wun,E(o.value)+"%",1),d[9]||(d[9]=u("p",{class:"text-xs text-indigo-600 mt-1"},"Scored papers",-1))]),u("div",Gun,[b(y(cr),{class:"h-7 w-7 text-white"})])])])]))}},Kun={class:"space-y-6"},Xun={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},Zun={class:"flex items-center space-x-3"},Qun={class:"p-2 bg-purple-100 rounded-lg"},Jun={class:"flex flex-wrap items-center gap-3"},edn={class:"p-1"},tdn={class:"p-1"},ndn={class:"p-1"},rdn={class:"p-1"},idn={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},adn={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},sdn={class:"flex flex-col sm:flex-row gap-4 flex-1"},odn={class:"relative flex-1 max-w-md"},ldn={class:"flex gap-2"},udn=["value"],ddn=["value"],cdn=["value"],fdn={class:"flex items-center gap-3"},pdn={class:"flex items-center bg-gray-100 rounded-lg p-1"},hdn={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},mdn={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},gdn={class:"flex items-center justify-between"},vdn={class:"flex items-center space-x-3"},ydn={class:"text-sm font-medium text-gray-700"},bdn={class:"flex items-center space-x-2"},_dn={key:0},xdn={class:"overflow-x-auto"},wdn={class:"min-w-full divide-y divide-gray-200"},kdn={class:"bg-gray-50"},Sdn={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Cdn={class:"bg-white divide-y divide-gray-200"},Adn={class:"px-6 py-4 whitespace-nowrap"},Tdn={class:"px-6 py-4 whitespace-nowrap"},Edn={class:"flex items-center"},Mdn={class:"flex-shrink-0 h-10 w-10"},$dn={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},Ddn={class:"ml-4"},Rdn={class:"text-sm font-medium text-gray-900"},Pdn={class:"px-6 py-4 whitespace-nowrap"},Idn={class:"text-sm font-medium text-gray-900"},Odn={class:"text-sm text-gray-500"},Ldn={class:"px-6 py-4 whitespace-nowrap"},Vdn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ndn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},jdn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Fdn={class:"px-6 py-4 whitespace-nowrap"},Bdn={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},zdn={class:"flex items-center space-x-2"},Udn={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},Hdn={class:"flex items-center justify-between"},qdn={class:"text-sm text-gray-700"},Wdn={class:"flex items-center space-x-2"},Gdn={class:"text-sm text-gray-700"},Ydn={key:1,class:"p-6"},Kdn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Xdn=["onClick"],Zdn={class:"flex items-start justify-between mb-4"},Qdn={class:"flex items-center space-x-3"},Jdn={class:"flex-shrink-0"},ecn={class:"h-12 w-12 rounded-lg bg-purple-100 flex items-center justify-center"},tcn={class:"text-lg font-semibold text-gray-900"},ncn={class:"text-sm text-gray-500"},rcn={class:"space-y-3 mb-4"},icn={class:"flex items-center justify-between"},acn={class:"flex items-center justify-between"},scn={class:"flex items-center justify-between"},ocn={class:"text-sm text-gray-900"},lcn={class:"flex items-center justify-between"},ucn={class:"text-sm text-gray-900"},dcn={class:"flex items-center justify-between"},ccn={class:"text-sm text-gray-900"},fcn={class:"flex items-center justify-between pt-4 border-t border-gray-200"},pcn={class:"flex space-x-2"},hcn={class:"mt-6 flex items-center justify-between"},mcn={class:"text-sm text-gray-700"},gcn={class:"flex items-center space-x-2"},vcn={class:"text-sm text-gray-700"},ycn={key:0,class:"bg-white rounded-xl border border-gray-200 p-12 text-center"},bcn={class:"max-w-md mx-auto"},_cn={class:"mx-auto h-24 w-24 text-gray-400 mb-4"},xcn={class:"text-gray-600 mb-6"},wcn={class:"space-y-3"},kcn={class:"space-y-4"},Scn={class:"space-y-2"},Ccn={class:"flex items-center space-x-2"},Acn={class:"flex items-center space-x-2"},Tcn={class:"flex items-center space-x-2"},Ecn={class:"flex items-center space-x-2"},Mcn={class:"flex items-center space-x-2"},$cn={class:"space-y-4"},Dcn={class:"text-sm text-gray-600"},Rcn={class:"space-y-3"},Pcn={class:"flex items-center space-x-2"},Icn={class:"space-y-4"},Ocn={class:"grid grid-cols-2 gap-4"},Lcn={class:"bg-purple-50 p-4 rounded-lg"},Vcn={class:"text-2xl font-bold text-purple-600"},Ncn={class:"bg-green-50 p-4 rounded-lg"},jcn={class:"text-2xl font-bold text-green-600"},Fcn={class:"space-y-2"},Bcn={class:"space-y-2 max-h-40 overflow-y-auto"},zcn={class:"text-sm"},Ucn={class:"flex items-center space-x-2"},Hcn={class:"w-20 bg-gray-200 rounded-full h-2"},qcn={class:"text-xs text-gray-600"},Wcn={__name:"WorkingPapers",setup(t){const e=xn(),n=Bo(),r=Q(!1),i=Q(!1),a=Q(!1),s=Q(null),o=Q(!1),l=Q([]),d=Q("preparation_date"),c=Q(1),f=Q(10),p=Q("table"),h=Q(!1),m=Q(!1),g=Q(!1),v=Q(""),_=Q(""),x=Q(""),w=Q(!1),k=Q({search:"",engagement:"",type:"",status:"",preparedBy:""}),S=Q({working_paper_id:"",wp_title:"",wp_reference_no:"",wp_type:"Planning Memo",engagement_reference:"",procedure_reference:"",prepared_by:"",preparation_date:"",reviewed_by:"",review_date:"",review_status:"Not Reviewed",work_performed:"",objective:"",scope:""}),C=J(()=>n.workingPapers),A=J(()=>{let K=C.value;return k.value.search&&(K=K.filter(H=>{var ae,be;return((ae=H.wp_title)==null?void 0:ae.toLowerCase().includes(k.value.search.toLowerCase()))||((be=H.working_paper_id)==null?void 0:be.toLowerCase().includes(k.value.search.toLowerCase()))})),k.value.engagement&&(K=K.filter(H=>H.engagement_reference===k.value.engagement)),k.value.type&&(K=K.filter(H=>H.wp_type===k.value.type)),k.value.status&&(K=K.filter(H=>H.review_status===k.value.status)),k.value.preparedBy&&(K=K.filter(H=>H.prepared_by===k.value.preparedBy)),K}),M=J({get:()=>A.value.length>0&&l.value.length===A.value.length,set:K=>{K?l.value=A.value.map(H=>H.name):l.value=[]}}),$=J(()=>{const K=(c.value-1)*f.value,H=K+f.value;return A.value.slice(K,H)}),R=J(()=>Math.ceil(A.value.length/f.value));J(()=>C.value.length),J(()=>C.value.filter(K=>K.review_status==="Review Complete").length);const I=J(()=>C.value.filter(K=>K.review_status==="Under Review").length);J(()=>C.value.filter(K=>K.review_status==="Revision Required").length),J(()=>C.value.filter(K=>K.review_status==="Not Reviewed").length),J(()=>{const K=C.value.filter(ae=>ae.review_date&&ae.preparation_date);if(K.length===0)return 0;const H=K.reduce((ae,be)=>{const ue=new Date(be.preparation_date),pe=new Date(be.review_date),ye=Math.abs(pe-ue),Me=Math.ceil(ye/(1e3*60*60*24));return ae+Me},0);return Math.round(H/K.length)}),J(()=>{const K=C.value.filter(ae=>ae.quality_score);if(K.length===0)return 0;const H=K.reduce((ae,be)=>ae+(be.quality_score||0),0);return Math.round(H/K.length)});const B=J(()=>{const K={};return C.value.forEach(H=>{H.reviewed_by&&(K[H.reviewed_by]||(K[H.reviewed_by]={name:H.reviewed_by,count:0}),K[H.reviewed_by].count++)}),Object.values(K).map(H=>je(me({},H),{load:Math.min(100,Math.round(H.count/10*100))}))});J(()=>{const K=n.engagements;return[{label:"All Engagements",value:""},...K.map(H=>({label:H.engagement_title,value:H.name}))]});const j=[{label:"All Status",value:""},{label:"Not Reviewed",value:"Not Reviewed"},{label:"Under Review",value:"Under Review"},{label:"Review Complete",value:"Review Complete"},{label:"Revision Required",value:"Revision Required"}];J(()=>{const K=new Set;return C.value.forEach(H=>{H.prepared_by&&K.add(H.prepared_by)}),[{label:"All Preparers",value:""},...Array.from(K).map(H=>({label:H,value:H}))]});const z=j.slice(1);J(()=>[{label:"Select Procedure",value:""}]);const F=J(()=>[{label:"Select User",value:""},{label:"John Doe",value:"john.doe@example.com"},{label:"Jane Smith",value:"jane.smith@example.com"}]),q=K=>({"Planning Memo":"blue","Risk Assessment":"red",Walkthrough:"green","Test of Controls":"purple","Substantive Test":"orange","Analytical Review":"yellow","Data Analytics":"indigo",Summary:"gray",Other:"gray"})[K]||"gray",N=K=>({"Not Reviewed":"gray","Under Review":"yellow","Review Complete":"green","Revision Required":"red"})[K]||"gray",O=K=>{const H=n.engagements.find(ae=>ae.name===K);return H?H.engagement_title:"Unknown Engagement"},V=K=>K?new Date(K).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",L=K=>{e.push(`/working-papers/${K.name}`)},U=K=>{s.value=K,a.value=!0,i.value=!0},G=K=>{s.value=null,a.value=!1,S.value={working_paper_id:"",wp_title:`${K.wp_title} (Copy)`,wp_reference_no:"",wp_type:K.wp_type||"Planning Memo",engagement_reference:K.engagement_reference||"",procedure_reference:K.procedure_reference||"",prepared_by:"",preparation_date:new Date().toISOString().split("T")[0],reviewed_by:"",review_date:"",review_status:"Not Reviewed",work_performed:K.work_performed||"",objective:K.objective||"",scope:K.scope||""},i.value=!0},X=K=>{confirm("Are you sure you want to delete this working paper?")&&n.fetchWorkingPapers()},re=()=>{s.value=null,a.value=!1,i.value=!0},ee=K=>le(this,null,function*(){i.value=!1,s.value=null,a.value=!1,yield ne()}),de=K=>le(this,null,function*(){i.value=!1,s.value=null,a.value=!1,yield ne()}),se=K=>{K?l.value=A.value.map(H=>H.name):l.value=[]},te=K=>{const H=l.value.indexOf(K);H>-1?l.value.splice(H,1):l.value.push(K)},ne=()=>le(this,null,function*(){r.value=!0;try{yield n.fetchWorkingPapers(),yield n.fetchEngagements()}catch(K){console.error("Error loading data:",K)}finally{r.value=!1}}),ce=()=>le(this,null,function*(){o.value=!0;try{console.log("Exporting working papers data...")}finally{o.value=!1}}),ve=()=>le(this,null,function*(){if(v.value)try{console.log("Applying template:",v.value,"to working papers:",l.value),g.value=!1,v.value="",l.value=[],yield ne()}catch(K){console.error("Error applying template:",K)}}),Y=()=>le(this,null,function*(){try{_.value&&console.log("Updating status to:",_.value,"for working papers:",l.value),x.value&&console.log("Assigning reviewer:",x.value,"to working papers:",l.value),w.value&&confirm(`Are you sure you want to delete ${l.value.length} working papers? This action cannot be undone.`)&&console.log("Deleting working papers:",l.value),h.value=!1,_.value="",x.value="",w.value=!1,l.value=[],yield ne()}catch(K){console.error("Error applying bulk actions:",K)}});return bt(()=>le(this,null,function*(){r.value=!0;try{yield n.fetchEngagements(),yield n.fetchWorkingPapers()}catch(K){console.error("Error loading data:",K)}finally{r.value=!1}})),(K,H)=>(T(),P("div",Kun,[u("div",Xun,[u("div",null,[u("div",Zun,[u("div",Qun,[b(y(vt),{class:"h-6 w-6 text-purple-600"})]),H[34]||(H[34]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Working Papers"),u("p",{class:"text-gray-600 mt-1"}," Manage audit working papers and documentation with advanced tracking ")],-1))])]),u("div",Jun,[u("div",edn,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:ce,loading:o.value},{prefix:D(()=>[b(y(bn),{class:"h-3.5 w-3.5"})]),default:D(()=>[H[35]||(H[35]=W(" Export ",-1))]),_:1},8,["loading"])]),u("div",tdn,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:H[0]||(H[0]=ae=>g.value=!0)},{prefix:D(()=>[b(y(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[H[36]||(H[36]=W(" Templates ",-1))]),_:1})]),u("div",ndn,[b(y(Z),{variant:"solid",theme:"gray",size:"sm",onClick:ne,loading:r.value},{prefix:D(()=>[b(y(hn),{class:"h-3.5 w-3.5"})]),default:D(()=>[H[37]||(H[37]=W(" Refresh ",-1))]),_:1},8,["loading"])]),u("div",rdn,[b(y(Z),{variant:"solid",theme:"purple",size:"sm",onClick:re},{prefix:D(()=>[b(y(tt),{class:"h-3.5 w-3.5"})]),default:D(()=>[H[38]||(H[38]=W(" New Working Paper ",-1))]),_:1})])])]),b(Yun,{"working-papers":C.value},null,8,["working-papers"]),u("div",idn,[u("div",adn,[u("div",sdn,[u("div",odn,[b(y(Rn),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),xe(u("input",{"onUpdate:modelValue":H[1]||(H[1]=ae=>k.value.search=ae),type:"text",placeholder:"Search working papers...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Mt,k.value.search]])]),u("div",ldn,[xe(u("select",{"onUpdate:modelValue":H[2]||(H[2]=ae=>k.value.engagement=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[H[39]||(H[39]=u("option",{value:""},"All Engagements",-1)),(T(!0),P(_e,null,we(y(n).engagements,ae=>(T(),P("option",{key:ae.name,value:ae.name},E(ae.engagement_title),9,udn))),128))],512),[[gn,k.value.engagement]]),xe(u("select",{"onUpdate:modelValue":H[3]||(H[3]=ae=>k.value.type=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...H[40]||(H[40]=[ur('<option value="">All Types</option><option value="Planning Memo">Planning Memo</option><option value="Risk Assessment">Risk Assessment</option><option value="Walkthrough">Walkthrough</option><option value="Test of Controls">Test of Controls</option><option value="Substantive Test">Substantive Test</option><option value="Analytical Review">Analytical Review</option><option value="Data Analytics">Data Analytics</option><option value="Summary">Summary</option><option value="Other">Other</option>',10)])],512),[[gn,k.value.type]]),xe(u("select",{"onUpdate:modelValue":H[4]||(H[4]=ae=>k.value.status=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...H[41]||(H[41]=[ur('<option value="">All Status</option><option value="Not Reviewed">Not Reviewed</option><option value="Under Review">Under Review</option><option value="Review Complete">Review Complete</option><option value="Revision Required">Revision Required</option>',5)])],512),[[gn,k.value.status]]),xe(u("select",{"onUpdate:modelValue":H[5]||(H[5]=ae=>k.value.preparedBy=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[H[42]||(H[42]=u("option",{value:""},"All Preparers",-1)),(T(!0),P(_e,null,we(Array.from(new Set(C.value.map(ae=>ae.prepared_by).filter(Boolean))),ae=>(T(),P("option",{key:ae,value:ae},E(ae),9,ddn))),128))],512),[[gn,k.value.preparedBy]]),xe(u("select",{"onUpdate:modelValue":H[6]||(H[6]=ae=>k.value.reviewer=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[H[43]||(H[43]=u("option",{value:""},"All Reviewers",-1)),(T(!0),P(_e,null,we(Array.from(new Set(C.value.map(ae=>ae.reviewed_by).filter(Boolean))),ae=>(T(),P("option",{key:ae,value:ae},E(ae),9,cdn))),128))],512),[[gn,k.value.reviewer]])])]),u("div",fdn,[u("div",pdn,[u("button",{onClick:H[7]||(H[7]=ae=>p.value="table"),class:fe(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors",p.value==="table"?"bg-white text-purple-700 shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(y(ZD),{class:"h-4 w-4 inline mr-1"}),H[44]||(H[44]=W(" Table ",-1))],2),u("button",{onClick:H[8]||(H[8]=ae=>p.value="cards"),class:fe(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors",p.value==="cards"?"bg-white text-purple-700 shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(y(gY),{class:"h-4 w-4 inline mr-1"}),H[45]||(H[45]=W(" Cards ",-1))],2)]),b(y(Z),{onClick:H[9]||(H[9]=ae=>K.showTemplatesModal=!0),variant:"outline",class:"flex items-center gap-2"},{default:D(()=>[b(y(vt),{class:"h-4 w-4"}),H[46]||(H[46]=W(" Templates ",-1))]),_:1}),b(y(Z),{onClick:H[10]||(H[10]=ae=>K.showBulkActionsModal=!0),variant:"outline",class:"flex items-center gap-2",disabled:l.value.length===0},{default:D(()=>[b(y(Bc),{class:"h-4 w-4"}),H[47]||(H[47]=W(" Bulk Actions ",-1))]),_:1},8,["disabled"]),b(y(Z),{onClick:H[11]||(H[11]=ae=>m.value=!0),variant:"solid",class:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700"},{default:D(()=>[b(y(cr),{class:"h-4 w-4"}),H[48]||(H[48]=W(" Capacity ",-1))]),_:1}),b(y(Z),{onClick:re,variant:"solid",class:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700"},{default:D(()=>[b(y(tt),{class:"h-4 w-4"}),H[49]||(H[49]=W(" New Paper ",-1))]),_:1})])])]),u("div",hdn,[u("div",mdn,[u("div",gdn,[u("div",vdn,[b(y(Ut),{modelValue:M.value,"onUpdate:modelValue":se},null,8,["modelValue"]),u("span",ydn,E(l.value.length)+" of "+E(A.value.length)+" selected ",1)]),u("div",bdn,[b(y(Z),{variant:"outline",size:"sm",onClick:H[12]||(H[12]=ae=>d.value=d.value==="preparation_date"?"wp_title":"preparation_date")},{default:D(()=>[b(y(Yu),{class:"h-4 w-4 mr-2"}),W(" Sort by "+E(d.value==="preparation_date"?"Title":"Date"),1)]),_:1})])])]),p.value==="table"?(T(),P("div",_dn,[u("div",xdn,[u("table",wdn,[u("thead",kdn,[u("tr",null,[u("th",Sdn,[b(y(Ut),{modelValue:M.value,"onUpdate:modelValue":se},null,8,["modelValue"])]),H[50]||(H[50]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," WP ID ",-1)),H[51]||(H[51]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title ",-1)),H[52]||(H[52]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ",-1)),H[53]||(H[53]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Engagement ",-1)),H[54]||(H[54]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Prepared By ",-1)),H[55]||(H[55]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date ",-1)),H[56]||(H[56]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),H[57]||(H[57]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",Cdn,[(T(!0),P(_e,null,we($.value,ae=>(T(),P("tr",{key:ae.name,class:fe(["hover:bg-gray-50 transition-colors",{"bg-purple-50":l.value.includes(ae.name)}])},[u("td",Adn,[b(y(Ut),{modelValue:l.value.includes(ae.name),"onUpdate:modelValue":be=>te(ae.name)},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Tdn,[u("div",Edn,[u("div",Mdn,[u("div",$dn,[b(y(vt),{class:"h-5 w-5 text-gray-600"})])]),u("div",Ddn,[u("div",Rdn,E(ae.working_paper_id),1)])])]),u("td",Pdn,[u("div",Idn,E(ae.wp_title||"Untitled"),1),u("div",Odn,E(ae.wp_reference_no||"No reference"),1)]),u("td",Ldn,[b(y(Ee),{theme:q(ae.wp_type)},{default:D(()=>[W(E(ae.wp_type),1)]),_:2},1032,["theme"])]),u("td",Vdn,E(O(ae.engagement_reference)),1),u("td",Ndn,E(ae.prepared_by||"Unassigned"),1),u("td",jdn,E(V(ae.preparation_date)),1),u("td",Fdn,[b(y(Ee),{theme:N(ae.review_status)},{default:D(()=>[W(E(ae.review_status),1)]),_:2},1032,["theme"])]),u("td",Bdn,[u("div",zdn,[b(y(Z),{variant:"ghost",size:"sm",onClick:be=>L(ae)},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:be=>U(ae)},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:be=>G(ae),theme:"blue"},{default:D(()=>[b(y(qs),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:be=>X(),theme:"red"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2))),128))])])]),u("div",Udn,[u("div",Hdn,[u("div",qdn," Showing "+E((c.value-1)*f.value+1)+" to "+E(Math.min(c.value*f.value,A.value.length))+" of "+E(A.value.length)+" results ",1),u("div",Wdn,[b(y(Z),{variant:"outline",size:"sm",disabled:c.value===1,onClick:H[13]||(H[13]=ae=>c.value--)},{default:D(()=>[b(y(pr),{class:"h-4 w-4"}),H[58]||(H[58]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",Gdn," Page "+E(c.value)+" of "+E(R.value),1),b(y(Z),{variant:"outline",size:"sm",disabled:c.value===R.value,onClick:H[14]||(H[14]=ae=>c.value++)},{default:D(()=>[H[59]||(H[59]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])])):(T(),P("div",Ydn,[u("div",Kdn,[(T(!0),P(_e,null,we($.value,ae=>(T(),P("div",{key:ae.name,class:fe(["bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer",{"ring-2 ring-purple-500 bg-purple-50":l.value.includes(ae.name)}]),onClick:be=>te(ae.name)},[u("div",Zdn,[u("div",Qdn,[u("div",Jdn,[u("div",ecn,[b(y(vt),{class:"h-6 w-6 text-purple-600"})])]),u("div",null,[u("h3",tcn,E(ae.wp_title||"Untitled"),1),u("p",ncn,E(ae.working_paper_id),1)])]),b(y(Ut),{modelValue:l.value.includes(ae.name),"onUpdate:modelValue":be=>te(ae.name),onClick:H[15]||(H[15]=dt(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])]),u("div",rcn,[u("div",icn,[H[60]||(H[60]=u("span",{class:"text-sm text-gray-600"},"Type:",-1)),b(y(Ee),{theme:q(ae.wp_type)},{default:D(()=>[W(E(ae.wp_type),1)]),_:2},1032,["theme"])]),u("div",acn,[H[61]||(H[61]=u("span",{class:"text-sm text-gray-600"},"Status:",-1)),b(y(Ee),{theme:N(ae.review_status)},{default:D(()=>[W(E(ae.review_status),1)]),_:2},1032,["theme"])]),u("div",scn,[H[62]||(H[62]=u("span",{class:"text-sm text-gray-600"},"Engagement:",-1)),u("span",ocn,E(O(ae.engagement_reference)),1)]),u("div",lcn,[H[63]||(H[63]=u("span",{class:"text-sm text-gray-600"},"Prepared By:",-1)),u("span",ucn,E(ae.prepared_by||"Unassigned"),1)]),u("div",dcn,[H[64]||(H[64]=u("span",{class:"text-sm text-gray-600"},"Date:",-1)),u("span",ccn,E(V(ae.preparation_date)),1)])]),u("div",fcn,[u("div",pcn,[b(y(Z),{variant:"ghost",size:"sm",onClick:dt(be=>L(ae),["stop"])},{default:D(()=>[b(y(ar),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(be=>U(ae),["stop"])},{default:D(()=>[b(y(vn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(be=>G(ae),["stop"]),theme:"blue"},{default:D(()=>[b(y(qs),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(be=>X(),["stop"]),theme:"red"},{default:D(()=>[b(y(Zr),{class:"h-4 w-4"})]),_:1},8,["onClick"])])],10,Xdn))),128))]),u("div",hcn,[u("div",mcn," Showing "+E((c.value-1)*f.value+1)+" to "+E(Math.min(c.value*f.value,A.value.length))+" of "+E(A.value.length)+" results ",1),u("div",gcn,[b(y(Z),{variant:"outline",size:"sm",disabled:c.value===1,onClick:H[16]||(H[16]=ae=>c.value--)},{default:D(()=>[b(y(pr),{class:"h-4 w-4"}),H[65]||(H[65]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",vcn," Page "+E(c.value)+" of "+E(R.value),1),b(y(Z),{variant:"outline",size:"sm",disabled:c.value===R.value,onClick:H[17]||(H[17]=ae=>c.value++)},{default:D(()=>[H[66]||(H[66]=W(" Next ",-1)),b(y(tr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])]))]),A.value.length===0?(T(),P("div",ycn,[u("div",bcn,[u("div",_cn,[b(y(vt),{class:"h-24 w-24"})]),H[69]||(H[69]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No working papers found",-1)),u("p",xcn,E(k.value.search||k.value.engagement||k.value.type||k.value.status?"Try adjusting your filters or search terms to find what you're looking for.":"Get started by creating your first working paper for audit documentation."),1),u("div",wcn,[b(y(Z),{onClick:re,variant:"solid",class:"bg-purple-600 hover:bg-purple-700"},{default:D(()=>[b(y(tt),{class:"h-4 w-4 mr-2"}),H[67]||(H[67]=W(" Create Working Paper ",-1))]),_:1}),H[68]||(H[68]=u("div",{class:"text-sm text-gray-500"},[u("p",{class:"mb-1"},[W(" "),u("strong",null,"Quick Tips:")]),u("ul",{class:"text-left space-y-1"},[u("li",null," Use templates to standardize your documentation"),u("li",null," Link working papers to specific audit engagements"),u("li",null," Track review status to ensure quality control")])],-1))])])])):ie("",!0),b(_un,{modelValue:i.value,"onUpdate:modelValue":H[18]||(H[18]=ae=>i.value=ae),"working-paper":s.value,onCreated:ee,onUpdated:de,onCancelled:H[19]||(H[19]=ae=>i.value=!1)},null,8,["modelValue","working-paper"]),b(y(zt),{modelValue:g.value,"onUpdate:modelValue":H[26]||(H[26]=ae=>g.value=ae),options:{title:"Apply Template"}},{"body-content":D(()=>[u("div",kcn,[H[75]||(H[75]=u("p",{class:"text-sm text-gray-600"}," Select a template to apply to the selected working papers: ",-1)),u("div",Scn,[u("label",Ccn,[xe(u("input",{type:"radio","onUpdate:modelValue":H[20]||(H[20]=ae=>v.value=ae),value:"planning-memo",class:"text-blue-600"},null,512),[[Ki,v.value]]),H[70]||(H[70]=u("span",{class:"text-sm"},"Planning Memo Template",-1))]),u("label",Acn,[xe(u("input",{type:"radio","onUpdate:modelValue":H[21]||(H[21]=ae=>v.value=ae),value:"test-of-controls",class:"text-blue-600"},null,512),[[Ki,v.value]]),H[71]||(H[71]=u("span",{class:"text-sm"},"Test of Controls Template",-1))]),u("label",Tcn,[xe(u("input",{type:"radio","onUpdate:modelValue":H[22]||(H[22]=ae=>v.value=ae),value:"substantive-test",class:"text-blue-600"},null,512),[[Ki,v.value]]),H[72]||(H[72]=u("span",{class:"text-sm"},"Substantive Test Template",-1))]),u("label",Ecn,[xe(u("input",{type:"radio","onUpdate:modelValue":H[23]||(H[23]=ae=>v.value=ae),value:"analytical-review",class:"text-blue-600"},null,512),[[Ki,v.value]]),H[73]||(H[73]=u("span",{class:"text-sm"},"Analytical Review Template",-1))]),u("label",Mcn,[xe(u("input",{type:"radio","onUpdate:modelValue":H[24]||(H[24]=ae=>v.value=ae),value:"summary-memo",class:"text-blue-600"},null,512),[[Ki,v.value]]),H[74]||(H[74]=u("span",{class:"text-sm"},"Summary Memo Template",-1))])])])]),actions:D(()=>[b(y(Z),{variant:"ghost",onClick:H[25]||(H[25]=ae=>g.value=!1)},{default:D(()=>[...H[76]||(H[76]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:ve,disabled:!v.value},{default:D(()=>[...H[77]||(H[77]=[W(" Apply Template ",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:h.value,"onUpdate:modelValue":H[31]||(H[31]=ae=>h.value=ae),options:{title:"Bulk Actions"}},{"body-content":D(()=>[u("div",$cn,[u("p",Dcn," Apply bulk action to "+E(l.value.length)+" selected working papers: ",1),u("div",Rcn,[u("div",null,[H[78]||(H[78]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Update Status ",-1)),b(y(Ke),{modelValue:_.value,"onUpdate:modelValue":H[27]||(H[27]=ae=>_.value=ae),options:y(z)},null,8,["modelValue","options"])]),u("div",null,[H[79]||(H[79]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Assign Reviewer ",-1)),b(y(Ke),{modelValue:x.value,"onUpdate:modelValue":H[28]||(H[28]=ae=>x.value=ae),options:F.value},null,8,["modelValue","options"])]),u("div",Pcn,[b(y(Ut),{modelValue:w.value,"onUpdate:modelValue":H[29]||(H[29]=ae=>w.value=ae)},null,8,["modelValue"]),H[80]||(H[80]=u("span",{class:"text-sm text-red-600"}," Delete selected working papers (this action cannot be undone) ",-1))])])])]),actions:D(()=>[b(y(Z),{variant:"ghost",onClick:H[30]||(H[30]=ae=>h.value=!1)},{default:D(()=>[...H[81]||(H[81]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:Y,disabled:!_.value&&!x.value&&!w.value},{default:D(()=>[...H[82]||(H[82]=[W(" Apply Changes ",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:m.value,"onUpdate:modelValue":H[33]||(H[33]=ae=>m.value=ae),options:{title:"Review Capacity Planning"}},{"body-content":D(()=>[u("div",Icn,[u("div",Ocn,[u("div",Lcn,[H[83]||(H[83]=u("h4",{class:"font-medium text-purple-900"},"Papers Under Review",-1)),u("p",Vcn,E(I.value),1),H[84]||(H[84]=u("p",{class:"text-sm text-purple-700"},"Pending approval",-1))]),u("div",Ncn,[H[85]||(H[85]=u("h4",{class:"font-medium text-green-900"},"Review Capacity",-1)),u("p",jcn,E(Math.max(0,50-I.value)),1),H[86]||(H[86]=u("p",{class:"text-sm text-green-700"},"Available slots",-1))])]),u("div",Fcn,[H[87]||(H[87]=u("h4",{class:"font-medium"},"Reviewer Workload",-1)),u("div",Bcn,[(T(!0),P(_e,null,we(B.value,ae=>(T(),P("div",{key:ae.name,class:"flex justify-between items-center p-2 bg-gray-50 rounded"},[u("span",zcn,E(ae.name),1),u("div",Ucn,[u("div",Hcn,[u("div",{class:"bg-purple-600 h-2 rounded-full",style:nt({width:`${ae.load}%`})},null,4)]),u("span",qcn,E(ae.load)+"%",1)])]))),128))])])])]),actions:D(()=>[b(y(Z),{variant:"solid",onClick:H[32]||(H[32]=ae=>m.value=!1)},{default:D(()=>[...H[88]||(H[88]=[W(" Close ",-1)])]),_:1})]),_:1},8,["modelValue"])]))}},Xl=Ul("inventoryAudit",{state:()=>({items:[],activeItem:null,itemsLoading:!1,itemsTotalCount:0,itemsPage:1,itemsPageSize:50,plans:[],activePlan:null,plansLoading:!1,plansTotalCount:0,plansPage:1,plansPageSize:50,sessions:[],activeSession:null,sessionsLoading:!1,sessionsTotalCount:0,sessionsPage:1,sessionsPageSize:50,varianceCases:[],activeVarianceCase:null,varianceCasesLoading:!1,varianceCasesTotalCount:0,varianceCasesPage:1,varianceCasesPageSize:50,returnAudits:[],activeReturnAudit:null,returnAuditsLoading:!1,returnAuditsTotalCount:0,returnAuditsPage:1,returnAuditsPageSize:50,issues:[],activeIssue:null,issuesLoading:!1,issuesTotalCount:0,issuesPage:1,issuesPageSize:50,scorecards:[],activeScorecard:null,scorecardsLoading:!1,scorecardHistory:[],dashboardStats:{plans:{total:0,active:0,completed:0},sessions:{total:0,in_progress:0},variance_cases:{total:0,open:0,sla_breached:0},issues:{total:0,open:0},items:{total:0,active:0},avg_compliance_score:0},dashboardLoading:!1,filters:{plans:{},sessions:{},varianceCases:{},returnAudits:{},issues:{},items:{}},currentView:"dashboard",isLoading:!1,error:null,auditPeriodOptions:[{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"},{value:"Ad Hoc",label:"Ad Hoc"}],auditScopeOptions:[{value:"Full Warehouse",label:"Full Warehouse"},{value:"Category",label:"Category"},{value:"ABC Class",label:"ABC Class"},{value:"High Value Items",label:"High Value Items"},{value:"Fast Moving Items",label:"Fast Moving Items"},{value:"Random Sample",label:"Random Sample"}],countTypeOptions:[{value:"Full Physical Count",label:"Full Physical Count"},{value:"Cycle Count",label:"Cycle Count"},{value:"Random Sample",label:"Random Sample"},{value:"Spot Check",label:"Spot Check"}],rootCauseOptions:[{value:"Miscount",label:"Miscount"},{value:"Theft",label:"Theft"},{value:"Misplacement",label:"Misplacement"},{value:"Wrong UOM",label:"Wrong UOM"},{value:"Unrecorded Sales",label:"Unrecorded Sales"},{value:"Unrecorded Receiving",label:"Unrecorded Receiving"},{value:"Wrong Posting",label:"Wrong Posting"},{value:"Expired/Damaged Stock",label:"Expired/Damaged Stock"},{value:"System Error",label:"System Error"},{value:"Data Entry Error",label:"Data Entry Error"}],issueTypeOptions:[{value:"Count Discrepancy",label:"Count Discrepancy"},{value:"Missing Documentation",label:"Missing Documentation"},{value:"Process Violation",label:"Process Violation"},{value:"System Access Issue",label:"System Access Issue"},{value:"Equipment Failure",label:"Equipment Failure"},{value:"Staff Unavailability",label:"Staff Unavailability"},{value:"Location Access",label:"Location Access"},{value:"Item Identification",label:"Item Identification"},{value:"Condition Issue",label:"Condition Issue"},{value:"Other",label:"Other"}],statusColors:{Planned:"blue","In Progress":"yellow",Completed:"green","On Hold":"gray",Cancelled:"red",New:"blue","Under Investigation":"yellow","Resolution Proposed":"orange",Resolved:"green",Closed:"gray",Open:"yellow","Pending Approval":"orange",Approved:"green",Rejected:"red"},gradeColors:{A:"green",B:"blue",C:"yellow",D:"orange",F:"red"}}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.name===e),getActivePlans:t=>t.plans.filter(e=>["Planned","In Progress"].includes(e.status)),getSessionById:t=>e=>t.sessions.find(n=>n.name===e),getSessionsByPlan:t=>e=>t.sessions.filter(n=>n.audit_plan===e),getPendingSignoffSessions:t=>t.sessions.filter(e=>e.status==="Completed"&&(!e.team_signoff||!e.supervisor_signoff||!e.auditor_signoff)),getVarianceCaseById:t=>e=>t.varianceCases.find(n=>n.name===e),getOpenVarianceCases:t=>t.varianceCases.filter(e=>["New","Under Investigation","Resolution Proposed"].includes(e.status)),getSlaBreachedCases:t=>t.varianceCases.filter(e=>e.is_sla_breached),getIssueById:t=>e=>t.issues.find(n=>n.name===e),getOpenIssues:t=>t.issues.filter(e=>["Open","In Progress"].includes(e.status)),getScorecardById:t=>e=>t.scorecards.find(n=>n.name===e),getScorecardByPlan:t=>e=>t.scorecards.find(n=>n.audit_plan===e),getComplianceOverview:t=>{const e=t.scorecards;if(e.length===0)return{avgScore:0,gradeDistribution:{}};const n=e.reduce((i,a)=>i+(a.overall_compliance_score||0),0)/e.length,r=e.reduce((i,a)=>{const s=a.grade||"N/A";return i[s]=(i[s]||0)+1,i},{});return{avgScore:Math.round(n),gradeDistribution:r}}},actions:{loadDashboardStats(){return le(this,null,function*(){this.dashboardLoading=!0,this.error=null;try{const t=yield et("mkaguzi.api.inventory_audit.get_inventory_dashboard_stats");this.dashboardStats=t}catch(t){this.error=`Failed to load dashboard stats: ${t.message}`,console.error("Error loading dashboard stats:",t)}finally{this.dashboardLoading=!1}})},loadItems(){return le(this,arguments,function*(t={},e=1,n=50){this.itemsLoading=!0,this.error=null;try{const r=yield et("mkaguzi.api.inventory_audit.get_inventory_items",{filters:JSON.stringify(t),page:e,page_size:n});this.items=r.items,this.itemsTotalCount=r.total_count,this.itemsPage=r.page,this.itemsPageSize=r.page_size,this.filters.items=t}catch(r){this.error=`Failed to load items: ${r.message}`,console.error("Error loading items:",r)}finally{this.itemsLoading=!1}})},getItemImportTemplate(){return le(this,null,function*(){try{return yield et("mkaguzi.api.inventory_audit.get_item_import_template")}catch(t){throw this.error=`Failed to get import template: ${t.message}`,t}})},importItemsFromCSV(t){return le(this,null,function*(){try{const e=yield et("mkaguzi.api.inventory_audit.import_items_from_csv",{file_content:JSON.stringify({content:t})});return yield this.loadItems(this.filters.items),e}catch(e){throw this.error=`Failed to import items: ${e.message}`,e}})},loadPlans(){return le(this,arguments,function*(t={},e=1,n=50){this.plansLoading=!0,this.error=null;try{const r=yield et("mkaguzi.api.inventory_audit.get_inventory_audit_plans",{filters:JSON.stringify(t),page:e,page_size:n});this.plans=r.plans,this.plansTotalCount=r.total_count,this.plansPage=r.page,this.plansPageSize=r.page_size,this.filters.plans=t}catch(r){this.error=`Failed to load plans: ${r.message}`,console.error("Error loading plans:",r)}finally{this.plansLoading=!1}})},createPlan(t){return le(this,null,function*(){try{const e=yield et("frappe.client.insert",{doc:me({doctype:"Inventory Audit Plan"},t)});return yield this.loadPlans(this.filters.plans),e}catch(e){throw this.error=`Failed to create plan: ${e.message}`,e}})},updatePlan(t,e){return le(this,null,function*(){try{yield et("frappe.client.set_value",{doctype:"Inventory Audit Plan",name:t,fieldname:e}),yield this.loadPlans(this.filters.plans)}catch(n){throw this.error=`Failed to update plan: ${n.message}`,n}})},loadPlanDetail(t){return le(this,null,function*(){this.plansLoading=!0,this.error=null;try{const e=yield et("frappe.client.get",{doctype:"Inventory Audit Plan",name:t});return this.activePlan=e,e}catch(e){throw this.error=`Failed to load plan: ${e.message}`,console.error("Error loading plan detail:",e),e}finally{this.plansLoading=!1}})},getSessionsByPlanId(t){return le(this,null,function*(){try{return yield et("frappe.client.get_list",{doctype:"Stock Take Session",filters:{audit_plan:t},fields:["name","session_name","session_type","status","scheduled_date","warehouse"],order_by:"scheduled_date desc"})}catch(e){return console.error("Error loading sessions for plan:",e),[]}})},loadSessions(){return le(this,arguments,function*(t={},e=1,n=50){this.sessionsLoading=!0,this.error=null;try{const r=yield et("mkaguzi.api.inventory_audit.get_stock_take_sessions",{filters:JSON.stringify(t),page:e,page_size:n});this.sessions=r.sessions,this.sessionsTotalCount=r.total_count,this.sessionsPage=r.page,this.sessionsPageSize=r.page_size,this.filters.sessions=t}catch(r){this.error=`Failed to load sessions: ${r.message}`,console.error("Error loading sessions:",r)}finally{this.sessionsLoading=!1}})},createSession(t){return le(this,null,function*(){try{const e=yield et("frappe.client.insert",{doc:me({doctype:"Stock Take Session"},t)});return yield this.loadSessions(this.filters.sessions),e}catch(e){throw this.error=`Failed to create session: ${e.message}`,e}})},calculateVariance(t){return le(this,null,function*(){try{const e=yield et("mkaguzi.api.inventory_audit.calculate_count_variance",{session_name:t});return yield this.loadSessions(this.filters.sessions),e}catch(e){throw this.error=`Failed to calculate variance: ${e.message}`,e}})},loadSessionDetail(t){return le(this,null,function*(){this.sessionsLoading=!0,this.error=null;try{const e=yield et("frappe.client.get",{doctype:"Stock Take Session",name:t});return this.activeSession=e,e}catch(e){throw this.error=`Failed to load session: ${e.message}`,console.error("Error loading session detail:",e),e}finally{this.sessionsLoading=!1}})},getVarianceCasesBySession(t){return le(this,null,function*(){try{return yield et("frappe.client.get_list",{doctype:"Inventory Variance Case",filters:{stock_take_session:t},fields:["name","item_code","item_name","status","variance_qty","variance_value","priority"]})}catch(e){return console.error("Error loading variance cases for session:",e),[]}})},loadVarianceCases(){return le(this,arguments,function*(t={},e=1,n=50){this.varianceCasesLoading=!0,this.error=null;try{const r=yield et("mkaguzi.api.inventory_audit.get_variance_cases",{filters:JSON.stringify(t),page:e,page_size:n});this.varianceCases=r.cases,this.varianceCasesTotalCount=r.total_count,this.varianceCasesPage=r.page,this.varianceCasesPageSize=r.page_size,this.filters.varianceCases=t}catch(r){this.error=`Failed to load variance cases: ${r.message}`,console.error("Error loading variance cases:",r)}finally{this.varianceCasesLoading=!1}})},updateVarianceCase(t,e){return le(this,null,function*(){try{yield et("frappe.client.set_value",{doctype:"Variance Reconciliation Case",name:t,fieldname:e}),yield this.loadVarianceCases(this.filters.varianceCases)}catch(n){throw this.error=`Failed to update variance case: ${n.message}`,n}})},loadVarianceCaseDetail(t){return le(this,null,function*(){this.varianceCasesLoading=!0,this.error=null;try{const e=yield et("frappe.client.get",{doctype:"Inventory Variance Case",name:t});return this.activeVarianceCase=e,e}catch(e){throw this.error=`Failed to load variance case: ${e.message}`,console.error("Error loading variance case detail:",e),e}finally{this.varianceCasesLoading=!1}})},createVarianceCaseFromSession(t,e){return le(this,null,function*(){try{return yield et("mkaguzi.api.inventory_audit.create_variance_case_from_count",{session_name:t,count_item_idx:e})}catch(n){throw this.error=`Failed to create variance case: ${n.message}`,n}})},loadStockTakeAudits(){return le(this,arguments,function*(t={},e=1,n=50){this.returnAuditsLoading=!0,this.error=null;try{const r=yield et("mkaguzi.api.inventory_audit.get_stock_take_audits",{filters:JSON.stringify(t),page:e,page_size:n});this.returnAudits=r.audits,this.returnAuditsTotalCount=r.total_count,this.returnAuditsPage=r.page,this.returnAuditsPageSize=r.page_size,this.filters.returnAudits=t}catch(r){this.error=`Failed to load stock take audits: ${r.message}`,console.error("Error loading stock take audits:",r)}finally{this.returnAuditsLoading=!1}})},createStockTakeAudit(t){return le(this,null,function*(){try{const e=yield et("frappe.client.insert",{doc:me({doctype:"Stock Take Audit"},t)});return yield this.loadStockTakeAudits(this.filters.returnAudits),e}catch(e){throw this.error=`Failed to create stock take audit: ${e.message}`,e}})},loadIssues(){return le(this,arguments,function*(t={},e=1,n=50){this.issuesLoading=!0,this.error=null;try{const r=yield et("mkaguzi.api.inventory_audit.get_stock_take_issues",{filters:JSON.stringify(t),page:e,page_size:n});this.issues=r.issues,this.issuesTotalCount=r.total_count,this.issuesPage=r.page,this.issuesPageSize=r.page_size,this.filters.issues=t}catch(r){this.error=`Failed to load issues: ${r.message}`,console.error("Error loading issues:",r)}finally{this.issuesLoading=!1}})},createIssue(t){return le(this,null,function*(){try{const e=yield et("frappe.client.insert",{doc:me({doctype:"Stock Take Issue Log"},t)});return yield this.loadIssues(this.filters.issues),e}catch(e){throw this.error=`Failed to create issue: ${e.message}`,e}})},loadScorecards(){return le(this,arguments,function*(t={}){this.scorecardsLoading=!0,this.error=null;try{this.scorecards=yield et("mkaguzi.api.inventory_audit.get_compliance_scorecards",{filters:JSON.stringify(t)})}catch(e){this.error=`Failed to load scorecards: ${e.message}`,console.error("Error loading scorecards:",e)}finally{this.scorecardsLoading=!1}})},loadScorecardHistory(t){return le(this,null,function*(){try{this.scorecardHistory=yield et("mkaguzi.api.inventory_audit.get_scorecard_history",{scorecard:t})}catch(e){throw this.error=`Failed to load scorecard history: ${e.message}`,e}})},recalculateScorecard(t){return le(this,null,function*(){try{const e=yield et("mkaguzi.api.inventory_audit.recalculate_scorecard",{audit_plan:t});return yield this.loadScorecards(),e}catch(e){throw this.error=`Failed to recalculate scorecard: ${e.message}`,e}})},setActiveItem(t){this.activeItem=t},setActivePlan(t){this.activePlan=t},setActiveSession(t){this.activeSession=t},setActiveVarianceCase(t){this.activeVarianceCase=t},setActiveReturnAudit(t){this.activeReturnAudit=t},setActiveIssue(t){this.activeIssue=t},setActiveScorecard(t){this.activeScorecard=t},setCurrentView(t){this.currentView=t},clearError(){this.error=null},clearFilters(){this.filters={plans:{},sessions:{},varianceCases:{},returnAudits:{},issues:{},items:{}}},getStatusColor(t){return this.statusColors[t]||"gray"},getGradeColor(t){return this.gradeColors[t]||"gray"},loadAllData(){return le(this,null,function*(){this.isLoading=!0;try{yield Promise.all([this.loadDashboardStats(),this.loadPlans({},1,10),this.loadSessions({},1,10),this.loadVarianceCases({},1,10),this.loadIssues({},1,10),this.loadScorecards()])}catch(t){console.error("Error loading all data:",t)}finally{this.isLoading=!1}})}}}),Gcn={class:"p-6"},Ycn={class:"flex justify-between items-center mb-6"},Kcn={class:"flex gap-2"},Xcn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},Zcn={class:"bg-white rounded-lg border p-4 shadow-sm"},Qcn={class:"flex items-center justify-between"},Jcn={class:"text-2xl font-bold text-gray-900"},efn={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},tfn={class:"mt-2 flex items-center gap-4 text-sm"},nfn={class:"text-green-600"},rfn={class:"text-gray-500"},ifn={class:"bg-white rounded-lg border p-4 shadow-sm"},afn={class:"flex items-center justify-between"},sfn={class:"text-2xl font-bold text-gray-900"},ofn={class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},lfn={class:"mt-2 flex items-center gap-4 text-sm"},ufn={class:"text-yellow-600"},dfn={class:"bg-white rounded-lg border p-4 shadow-sm"},cfn={class:"flex items-center justify-between"},ffn={class:"text-2xl font-bold text-gray-900"},pfn={class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},hfn={class:"mt-2 flex items-center gap-4 text-sm"},mfn={class:"text-orange-600"},gfn={class:"text-red-600"},vfn={class:"bg-white rounded-lg border p-4 shadow-sm"},yfn={class:"flex items-center justify-between"},bfn={class:"text-2xl font-bold text-gray-900"},_fn={class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},xfn={class:"mt-2"},wfn={class:"w-full bg-gray-200 rounded-full h-2"},kfn={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},Sfn={class:"bg-white rounded-lg border p-4 shadow-sm"},Cfn={class:"flex items-center justify-between mb-4"},Afn={class:"flex items-center gap-8"},Tfn={class:"text-center"},Efn={class:"text-3xl font-bold text-yellow-600"},Mfn={class:"text-center"},$fn={class:"text-3xl font-bold text-gray-600"},Dfn={class:"bg-white rounded-lg border p-4 shadow-sm"},Rfn={class:"flex items-center justify-between mb-4"},Pfn={class:"flex items-center gap-8"},Ifn={class:"text-center"},Ofn={class:"text-3xl font-bold text-blue-600"},Lfn={class:"text-center"},Vfn={class:"text-3xl font-bold text-gray-600"},Nfn={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},jfn={class:"bg-white rounded-lg border shadow-sm"},Ffn={class:"px-4 py-3 border-b flex items-center justify-between"},Bfn={key:0,class:"divide-y"},zfn=["onClick"],Ufn={class:"flex items-center justify-between mb-2"},Hfn={class:"font-medium text-gray-900"},qfn={class:"flex items-center gap-4 text-sm text-gray-500"},Wfn={class:"flex items-center gap-1"},Gfn={class:"flex items-center gap-1"},Yfn={key:1,class:"p-8 text-center text-gray-500"},Kfn={class:"bg-white rounded-lg border shadow-sm"},Xfn={class:"px-4 py-3 border-b flex items-center justify-between"},Zfn={key:0,class:"divide-y"},Qfn=["onClick"],Jfn={class:"flex items-center justify-between mb-2"},epn={class:"font-medium text-gray-900"},tpn={class:"flex items-center gap-4 text-sm text-gray-500"},npn={class:"flex items-center gap-1"},rpn={key:0,class:"flex items-center gap-1 text-orange-600"},ipn={class:"mt-2 flex items-center gap-2"},apn={key:0,class:"text-xs text-green-600"},spn={key:1,class:"text-xs text-gray-400"},opn={key:2,class:"text-xs text-green-600"},lpn={key:3,class:"text-xs text-gray-400"},upn={key:4,class:"text-xs text-green-600"},dpn={key:5,class:"text-xs text-gray-400"},cpn={key:1,class:"p-8 text-center text-gray-500"},fpn={class:"bg-white rounded-lg border shadow-sm"},ppn={class:"px-4 py-3 border-b flex items-center justify-between"},hpn={key:0,class:"divide-y"},mpn=["onClick"],gpn={class:"flex items-center justify-between mb-2"},vpn={class:"font-medium text-gray-900"},ypn={class:"flex items-center gap-2"},bpn={class:"flex items-center gap-4 text-sm text-gray-500"},_pn={class:"flex items-center gap-1"},xpn={class:"flex items-center gap-1"},wpn={key:0,class:"flex items-center gap-1"},kpn={key:1,class:"p-8 text-center text-gray-500"},Spn={class:"bg-white rounded-lg border shadow-sm"},Cpn={class:"px-4 py-3 border-b flex items-center justify-between"},Apn={key:0,class:"divide-y"},Tpn=["onClick"],Epn={class:"flex items-center justify-between mb-2"},Mpn={class:"font-medium text-gray-900"},$pn={class:"flex items-center gap-2"},Dpn={class:"text-gray-500"},Rpn={class:"w-full bg-gray-200 rounded-full h-2"},Ppn={key:1,class:"p-8 text-center text-gray-500"},Ipn={__name:"InventoryAuditDashboard",setup(t){const e=xn(),n=Xl(),r=Q(!1),i=J(()=>n.dashboardStats),a=J(()=>n.plans.slice(0,5)),s=J(()=>n.sessions.slice(0,5)),o=J(()=>n.getOpenVarianceCases.slice(0,5)),l=J(()=>n.scorecards);bt(()=>le(this,null,function*(){yield d()}));function d(){return le(this,null,function*(){r.value=!0;try{yield n.loadAllData()}finally{r.value=!1}})}function c(R){return{Planned:"blue","In Progress":"yellow",Completed:"green","On Hold":"gray",Cancelled:"red",New:"blue","Under Investigation":"yellow","Resolution Proposed":"orange",Resolved:"green",Closed:"gray"}[R]||"gray"}function f(R){return{Critical:"red",High:"orange",Medium:"yellow",Low:"blue"}[R]||"gray"}function p(R){return R>=90?"bg-green-500":R>=70?"bg-yellow-500":R>=50?"bg-orange-500":"bg-red-500"}function h(R){return{A:"text-green-600",B:"text-blue-600",C:"text-yellow-600",D:"text-orange-600",F:"text-red-600"}[R]||"text-gray-600"}function m(R){return new Intl.NumberFormat().format(R||0)}function g(R){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(R||0)}function v(){e.push("/inventory-audit/plans")}function _(){e.push("/inventory-audit/sessions")}function x(){e.push("/inventory-audit/variance-cases")}function w(){e.push("/inventory-audit/scorecards")}function k(){e.push("/inventory-audit/issues")}function S(){e.push("/inventory-audit/items")}function C(R){e.push(`/inventory-audit/plans/${R}`)}function A(R){e.push(`/inventory-audit/sessions/${R}`)}function M(R){e.push(`/inventory-audit/variance-cases/${R}`)}function $(R){e.push(`/inventory-audit/scorecards/${R}`)}return(R,I)=>{var B,j,z,F,q,N,O,V,L,U,G,X;return T(),P("div",Gcn,[u("div",Ycn,[I[1]||(I[1]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Inventory Audit Dashboard"),u("p",{class:"text-gray-600"},"Overview of stock take audits, variance analysis, and compliance metrics")],-1)),u("div",Kcn,[b(y(Z),{onClick:d,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(y(Z),{onClick:v},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),I[0]||(I[0]=W(" New Audit Plan ",-1))]),_:1})])]),u("div",Xcn,[u("div",Zcn,[u("div",Qcn,[u("div",null,[I[2]||(I[2]=u("p",{class:"text-sm text-gray-500"},"Audit Plans",-1)),u("p",Jcn,E(((B=i.value.plans)==null?void 0:B.total)||0),1)]),u("div",efn,[b(y(kr),{class:"w-6 h-6 text-blue-600"})])]),u("div",tfn,[u("span",nfn,E(((j=i.value.plans)==null?void 0:j.active)||0)+" active",1),u("span",rfn,E(((z=i.value.plans)==null?void 0:z.completed)||0)+" completed",1)])]),u("div",ifn,[u("div",afn,[u("div",null,[I[3]||(I[3]=u("p",{class:"text-sm text-gray-500"},"Stock Take Sessions",-1)),u("p",sfn,E(((F=i.value.sessions)==null?void 0:F.total)||0),1)]),u("div",ofn,[b(y(Ws),{class:"w-6 h-6 text-green-600"})])]),u("div",lfn,[u("span",ufn,E(((q=i.value.sessions)==null?void 0:q.in_progress)||0)+" in progress",1)])]),u("div",dfn,[u("div",cfn,[u("div",null,[I[4]||(I[4]=u("p",{class:"text-sm text-gray-500"},"Variance Cases",-1)),u("p",ffn,E(((N=i.value.variance_cases)==null?void 0:N.total)||0),1)]),u("div",pfn,[b(y(nn),{class:"w-6 h-6 text-orange-600"})])]),u("div",hfn,[u("span",mfn,E(((O=i.value.variance_cases)==null?void 0:O.open)||0)+" open",1),u("span",gfn,E(((V=i.value.variance_cases)==null?void 0:V.sla_breached)||0)+" SLA breached",1)])]),u("div",vfn,[u("div",yfn,[u("div",null,[I[5]||(I[5]=u("p",{class:"text-sm text-gray-500"},"Avg Compliance Score",-1)),u("p",bfn,E(Math.round(i.value.avg_compliance_score||0))+"%",1)]),u("div",_fn,[b(y(Cl),{class:"w-6 h-6 text-purple-600"})])]),u("div",xfn,[u("div",wfn,[u("div",{class:fe(["h-2 rounded-full transition-all duration-300",p(i.value.avg_compliance_score)]),style:nt({width:`${i.value.avg_compliance_score||0}%`})},null,6)])])])]),u("div",kfn,[u("div",Sfn,[u("div",Cfn,[I[7]||(I[7]=u("h3",{class:"font-semibold text-gray-900"},"Stock Take Issues",-1)),b(y(Z),{variant:"ghost",size:"sm",onClick:k},{default:D(()=>[...I[6]||(I[6]=[W("View All",-1)])]),_:1})]),u("div",Afn,[u("div",Tfn,[u("p",Efn,E(((L=i.value.issues)==null?void 0:L.open)||0),1),I[8]||(I[8]=u("p",{class:"text-sm text-gray-500"},"Open Issues",-1))]),u("div",Mfn,[u("p",$fn,E(((U=i.value.issues)==null?void 0:U.total)||0),1),I[9]||(I[9]=u("p",{class:"text-sm text-gray-500"},"Total Issues",-1))])])]),u("div",Dfn,[u("div",Rfn,[I[11]||(I[11]=u("h3",{class:"font-semibold text-gray-900"},"Inventory Items",-1)),b(y(Z),{variant:"ghost",size:"sm",onClick:S},{default:D(()=>[...I[10]||(I[10]=[W("View All",-1)])]),_:1})]),u("div",Pfn,[u("div",Ifn,[u("p",Ofn,E(((G=i.value.items)==null?void 0:G.active)||0),1),I[12]||(I[12]=u("p",{class:"text-sm text-gray-500"},"Active Items",-1))]),u("div",Lfn,[u("p",Vfn,E(((X=i.value.items)==null?void 0:X.total)||0),1),I[13]||(I[13]=u("p",{class:"text-sm text-gray-500"},"Total Items",-1))])])])]),u("div",Nfn,[u("div",jfn,[u("div",Ffn,[I[15]||(I[15]=u("h3",{class:"font-semibold text-gray-900"},"Recent Audit Plans",-1)),b(y(Z),{variant:"ghost",size:"sm",onClick:v},{default:D(()=>[...I[14]||(I[14]=[W("View All",-1)])]),_:1})]),a.value.length>0?(T(),P("div",Bfn,[(T(!0),P(_e,null,we(a.value,re=>(T(),P("div",{key:re.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:ee=>C(re.name)},[u("div",Ufn,[u("span",Hfn,E(re.plan_title),1),b(y(Ee),{variant:c(re.status)},{default:D(()=>[W(E(re.status),1)]),_:2},1032,["variant"])]),u("div",qfn,[u("span",Wfn,[b(y(er),{class:"w-4 h-4"}),W(" "+E(re.audit_period),1)]),u("span",Gfn,[b(y(nb),{class:"w-4 h-4"}),W(" "+E(re.warehouse||re.branch||"All"),1)])])],8,zfn))),128))])):(T(),P("div",Yfn,[b(y(kr),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),I[17]||(I[17]=u("p",null,"No audit plans yet",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-2",onClick:v},{default:D(()=>[...I[16]||(I[16]=[W(" Create First Plan ",-1)])]),_:1})]))]),u("div",Kfn,[u("div",Xfn,[I[19]||(I[19]=u("h3",{class:"font-semibold text-gray-900"},"Recent Stock Take Sessions",-1)),b(y(Z),{variant:"ghost",size:"sm",onClick:_},{default:D(()=>[...I[18]||(I[18]=[W("View All",-1)])]),_:1})]),s.value.length>0?(T(),P("div",Zfn,[(T(!0),P(_e,null,we(s.value,re=>(T(),P("div",{key:re.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:ee=>A(re.name)},[u("div",Jfn,[u("span",epn,E(re.session_title),1),b(y(Ee),{variant:c(re.status)},{default:D(()=>[W(E(re.status),1)]),_:2},1032,["variant"])]),u("div",tpn,[u("span",npn,[b(y(Ws),{class:"w-4 h-4"}),W(" "+E(re.total_items_counted||0)+" items ",1)]),re.items_with_variance?(T(),P("span",rpn,[b(y(nn),{class:"w-4 h-4"}),W(" "+E(re.items_with_variance)+" variances ",1)])):ie("",!0)]),u("div",ipn,[re.team_signoff?(T(),P("span",apn," Team")):(T(),P("span",spn," Team")),re.supervisor_signoff?(T(),P("span",opn," Supervisor")):(T(),P("span",lpn," Supervisor")),re.auditor_signoff?(T(),P("span",upn," Auditor")):(T(),P("span",dpn," Auditor"))])],8,Qfn))),128))])):(T(),P("div",cpn,[b(y(Ws),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),I[21]||(I[21]=u("p",null,"No stock take sessions yet",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-2",onClick:_},{default:D(()=>[...I[20]||(I[20]=[W(" Start Session ",-1)])]),_:1})]))]),u("div",fpn,[u("div",ppn,[I[23]||(I[23]=u("h3",{class:"font-semibold text-gray-900"},"Open Variance Cases",-1)),b(y(Z),{variant:"ghost",size:"sm",onClick:x},{default:D(()=>[...I[22]||(I[22]=[W("View All",-1)])]),_:1})]),o.value.length>0?(T(),P("div",hpn,[(T(!0),P(_e,null,we(o.value,re=>(T(),P("div",{key:re.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:ee=>M(re.name)},[u("div",gpn,[u("span",vpn,E(re.item_code),1),u("div",ypn,[re.is_sla_breached?(T(),he(y(Ee),{key:0,variant:"red"},{default:D(()=>[...I[24]||(I[24]=[W("SLA Breached",-1)])]),_:1})):ie("",!0),b(y(Ee),{variant:f(re.priority)},{default:D(()=>[W(E(re.priority),1)]),_:2},1032,["variant"])])]),u("div",bpn,[u("span",_pn,[b(y(tfe),{class:"w-4 h-4"}),W(" "+E(m(re.variance_quantity))+" units ",1)]),u("span",xpn,[b(y(tb),{class:"w-4 h-4"}),W(" "+E(g(re.variance_value)),1)]),re.root_cause?(T(),P("span",wpn,[b(y(Xi),{class:"w-4 h-4"}),W(" "+E(re.root_cause),1)])):ie("",!0)])],8,mpn))),128))])):(T(),P("div",kpn,[b(y(Gt),{class:"w-12 h-12 mx-auto mb-3 text-green-300"}),I[25]||(I[25]=u("p",null,"No open variance cases",-1))]))]),u("div",Spn,[u("div",Cpn,[I[27]||(I[27]=u("h3",{class:"font-semibold text-gray-900"},"Compliance Scorecards",-1)),b(y(Z),{variant:"ghost",size:"sm",onClick:w},{default:D(()=>[...I[26]||(I[26]=[W("View All",-1)])]),_:1})]),l.value.length>0?(T(),P("div",Apn,[(T(!0),P(_e,null,we(l.value.slice(0,5),re=>(T(),P("div",{key:re.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:ee=>$(re.name)},[u("div",Epn,[u("span",Mpn,E(re.audit_plan_title),1),u("div",$pn,[u("span",{class:fe(["text-lg font-bold",h(re.grade)])},E(re.grade),3),u("span",Dpn,E(Math.round(re.overall_compliance_score||0))+"%",1)])]),u("div",Rpn,[u("div",{class:fe(["h-2 rounded-full transition-all duration-300",p(re.overall_compliance_score)]),style:nt({width:`${re.overall_compliance_score||0}%`})},null,6)])],8,Tpn))),128))])):(T(),P("div",Ppn,[b(y(HD),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),I[28]||(I[28]=u("p",null,"No scorecards available",-1))]))])])])}}},Opn={class:"p-6"},Lpn={class:"flex justify-between items-center mb-6"},Vpn={class:"flex gap-2"},Npn={class:"bg-white rounded-lg border p-4 mb-6"},jpn={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Fpn=["value"],Bpn={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},zpn={class:"bg-white rounded-lg border p-4"},Upn={class:"text-2xl font-bold"},Hpn={class:"bg-white rounded-lg border p-4"},qpn={class:"text-2xl font-bold text-green-600"},Wpn={class:"bg-white rounded-lg border p-4"},Gpn={class:"text-2xl font-bold text-blue-600"},Ypn={class:"bg-white rounded-lg border p-4"},Kpn={class:"text-2xl font-bold text-red-600"},Xpn={class:"bg-white rounded-lg border shadow-sm"},Zpn={class:"overflow-x-auto"},Qpn={class:"min-w-full divide-y divide-gray-200"},Jpn={class:"bg-white divide-y divide-gray-200"},ehn=["onClick"],thn={class:"px-4 py-3 whitespace-nowrap"},nhn={class:"font-medium text-gray-900"},rhn={class:"px-4 py-3"},ihn={class:"text-gray-600 line-clamp-1"},ahn={class:"px-4 py-3 whitespace-nowrap text-gray-500"},shn={class:"px-4 py-3 whitespace-nowrap text-gray-500"},ohn={class:"px-4 py-3 whitespace-nowrap text-right text-gray-900"},lhn={class:"px-4 py-3 whitespace-nowrap text-gray-500"},uhn={class:"px-4 py-3 whitespace-nowrap"},dhn={class:"px-4 py-3 whitespace-nowrap"},chn={class:"px-4 py-3 whitespace-nowrap text-right"},fhn={key:0,class:"p-12 text-center text-gray-500"},phn={key:1,class:"px-4 py-3 border-t flex items-center justify-between"},hhn={class:"text-sm text-gray-500"},mhn={class:"flex gap-2"},ghn={class:"space-y-4"},vhn={class:"text-sm text-gray-600 mb-4"},yhn={key:0,class:"mt-2 text-sm text-yellow-700"},bhn={class:"font-medium"},_hn={class:"list-disc list-inside mt-1"},xhn={key:0},O5={__name:"InventoryItemMaster",setup(t){const e=xn(),n=Xl(),r=Q(!1),i=Q(!1),a=Q(!1),s=Q(null),o=Q(null),l=Q(""),d=Q({category:"",abc_classification:"",is_active:""}),c=Q(["Electronics","Raw Materials","Finished Goods","Consumables","Packaging"]),f=J(()=>n.items),p=J(()=>n.itemsTotalCount),h=J(()=>n.itemsPage),m=J(()=>n.itemsPageSize),g=J(()=>Math.ceil(p.value/m.value));bt(()=>le(this,null,function*(){yield v()}));function v(){return le(this,null,function*(){r.value=!0;try{const j=me({},d.value);l.value&&(j.search=l.value),Object.keys(j).forEach(z=>{j[z]===""&&delete j[z]}),yield n.loadItems(j,h.value,m.value)}finally{r.value=!1}})}function _(){return le(this,null,function*(){l.value="",d.value={category:"",abc_classification:"",is_active:""},yield v()})}let x=null;function w(){clearTimeout(x),x=setTimeout(()=>{v()},300)}function k(j){return le(this,null,function*(){yield n.loadItems(d.value,j,m.value)})}function S(){return le(this,null,function*(){try{const j=yield n.getItemImportTemplate(),z=new Blob([j.content],{type:"text/csv"}),F=URL.createObjectURL(z),q=document.createElement("a");q.href=F,q.download=j.filename,q.click(),URL.revokeObjectURL(F)}catch(j){console.error("Error downloading template:",j)}})}function C(j){s.value=j.target.files[0],o.value=null}function A(){return le(this,null,function*(){var j;if(s.value){i.value=!0;try{const z=yield s.value.text();o.value=yield n.importItemsFromCSV(z),(j=o.value.errors)!=null&&j.length||(a.value=!1)}catch(z){console.error("Error importing items:",z)}finally{i.value=!1}}})}function M(){e.push("/inventory-audit/items/new")}function $(j){e.push(`/inventory-audit/items/${j}`)}function R(j){e.push(`/inventory-audit/items/${j.name}/edit`)}function I(j){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(j||0)}function B(j){return j!=null&&j.includes("A")?"red":j!=null&&j.includes("B")?"yellow":"gray"}return(j,z)=>(T(),P("div",Opn,[u("div",Lpn,[z[12]||(z[12]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Inventory Item Master"),u("p",{class:"text-gray-600"},"Manage inventory items for stock take audits")],-1)),u("div",Vpn,[b(y(Z),{onClick:_,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(y(Z),{onClick:S,variant:"outline",size:"sm"},{default:D(()=>[b(y(bn),{class:"w-4 h-4 mr-2"}),z[9]||(z[9]=W(" Template ",-1))]),_:1}),b(y(Z),{onClick:z[0]||(z[0]=F=>a.value=!0),variant:"outline",size:"sm"},{default:D(()=>[b(y(ps),{class:"w-4 h-4 mr-2"}),z[10]||(z[10]=W(" Import ",-1))]),_:1}),b(y(Z),{onClick:M},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),z[11]||(z[11]=W(" New Item ",-1))]),_:1})])]),u("div",Npn,[u("div",jpn,[u("div",null,[z[13]||(z[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),xe(u("input",{"onUpdate:modelValue":z[1]||(z[1]=F=>l.value=F),type:"text",placeholder:"Search by item code...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:w},null,544),[[Mt,l.value]])]),u("div",null,[z[15]||(z[15]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),xe(u("select",{"onUpdate:modelValue":z[2]||(z[2]=F=>d.value.category=F),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:v},[z[14]||(z[14]=u("option",{value:""},"All Categories",-1)),(T(!0),P(_e,null,we(c.value,F=>(T(),P("option",{key:F,value:F},E(F),9,Fpn))),128))],544),[[gn,d.value.category]])]),u("div",null,[z[17]||(z[17]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ABC Class",-1)),xe(u("select",{"onUpdate:modelValue":z[3]||(z[3]=F=>d.value.abc_classification=F),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:v},[...z[16]||(z[16]=[u("option",{value:""},"All Classes",-1),u("option",{value:"A - High Value"},"A - High Value",-1),u("option",{value:"B - Medium Value"},"B - Medium Value",-1),u("option",{value:"C - Low Value"},"C - Low Value",-1)])],544),[[gn,d.value.abc_classification]])]),u("div",null,[z[19]||(z[19]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),xe(u("select",{"onUpdate:modelValue":z[4]||(z[4]=F=>d.value.is_active=F),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:v},[...z[18]||(z[18]=[u("option",{value:""},"All",-1),u("option",{value:1},"Active",-1),u("option",{value:0},"Inactive",-1)])],544),[[gn,d.value.is_active]])])])]),u("div",Bpn,[u("div",zpn,[z[20]||(z[20]=u("p",{class:"text-sm text-gray-500"},"Total Items",-1)),u("p",Upn,E(p.value),1)]),u("div",Hpn,[z[21]||(z[21]=u("p",{class:"text-sm text-gray-500"},"Active Items",-1)),u("p",qpn,E(f.value.filter(F=>F.is_active).length),1)]),u("div",Wpn,[z[22]||(z[22]=u("p",{class:"text-sm text-gray-500"},"A-Class Items",-1)),u("p",Gpn,E(f.value.filter(F=>F.abc_classification==="A - High Value").length),1)]),u("div",Ypn,[z[23]||(z[23]=u("p",{class:"text-sm text-gray-500"},"High Risk",-1)),u("p",Kpn,E(f.value.filter(F=>F.risk_classification==="High Risk").length),1)])]),u("div",Xpn,[u("div",Zpn,[u("table",Qpn,[z[24]||(z[24]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Item Code"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"UOM"),u("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Valuation"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Warehouse"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ABC"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),u("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",Jpn,[(T(!0),P(_e,null,we(f.value,F=>(T(),P("tr",{key:F.name,class:"hover:bg-gray-50 cursor-pointer",onClick:q=>$(F.name)},[u("td",thn,[u("span",nhn,E(F.item_code),1)]),u("td",rhn,[u("span",ihn,E(F.item_description),1)]),u("td",ahn,E(F.category),1),u("td",shn,E(F.unit_of_measure),1),u("td",ohn,E(I(F.valuation_rate)),1),u("td",lhn,E(F.warehouse),1),u("td",uhn,[b(y(Ee),{variant:B(F.abc_classification)},{default:D(()=>{var q;return[W(E(((q=F.abc_classification)==null?void 0:q.charAt(0))||"-"),1)]}),_:2},1032,["variant"])]),u("td",dhn,[b(y(Ee),{variant:F.is_active?"green":"gray"},{default:D(()=>[W(E(F.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),u("td",chn,[b(y(Z),{variant:"ghost",size:"sm",onClick:dt(q=>R(F),["stop"])},{default:D(()=>[b(y(ffe),{class:"w-4 h-4"})]),_:1},8,["onClick"])])],8,ehn))),128))])])]),f.value.length===0&&!r.value?(T(),P("div",fhn,[b(y(Ws),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),z[26]||(z[26]=u("p",null,"No items found",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-2",onClick:M},{default:D(()=>[...z[25]||(z[25]=[W(" Add First Item ",-1)])]),_:1})])):ie("",!0),g.value>1?(T(),P("div",phn,[u("p",hhn," Showing "+E((h.value-1)*m.value+1)+" - "+E(Math.min(h.value*m.value,p.value))+" of "+E(p.value),1),u("div",mhn,[b(y(Z),{variant:"outline",size:"sm",disabled:h.value===1,onClick:z[5]||(z[5]=F=>k(h.value-1))},{default:D(()=>[...z[27]||(z[27]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",size:"sm",disabled:h.value===g.value,onClick:z[6]||(z[6]=F=>k(h.value+1))},{default:D(()=>[...z[28]||(z[28]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):ie("",!0)]),b(y(zt),{modelValue:a.value,"onUpdate:modelValue":z[8]||(z[8]=F=>a.value=F),options:{title:"Import Items from CSV"}},{"body-content":D(()=>{var F,q,N;return[u("div",ghn,[u("div",null,[u("p",vhn,[z[29]||(z[29]=W(" Upload a CSV file with your inventory items. ",-1)),u("a",{href:"#",onClick:dt(S,["prevent"]),class:"text-blue-600 hover:underline"}," Download the template "),z[30]||(z[30]=W(" to see the required format. ",-1))])]),u("div",null,[z[31]||(z[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"CSV File",-1)),u("input",{type:"file",accept:".csv",onChange:C,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),o.value?(T(),P("div",{key:0,class:fe(["p-4 rounded-lg",(F=o.value.errors)!=null&&F.length?"bg-yellow-50":"bg-green-50"])},[u("p",{class:fe(["font-medium",(q=o.value.errors)!=null&&q.length?"text-yellow-800":"text-green-800"])},E(o.value.imported)+" items imported successfully ",3),(N=o.value.errors)!=null&&N.length?(T(),P("div",yhn,[u("p",bhn,"Errors ("+E(o.value.total_errors)+"):",1),u("ul",_hn,[(T(!0),P(_e,null,we(o.value.errors.slice(0,5),(O,V)=>(T(),P("li",{key:V},E(O),1))),128)),o.value.errors.length>5?(T(),P("li",xhn,"...and "+E(o.value.errors.length-5)+" more",1)):ie("",!0)])])):ie("",!0)],2)):ie("",!0)])]}),actions:D(()=>[b(y(Z),{variant:"outline",onClick:z[7]||(z[7]=F=>a.value=!1)},{default:D(()=>[...z[32]||(z[32]=[W("Cancel",-1)])]),_:1}),b(y(Z),{onClick:A,loading:i.value,disabled:!s.value},{default:D(()=>[...z[33]||(z[33]=[W("Import",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"])]))}},whn={class:"p-6"},khn={class:"flex items-center justify-between mb-6"},Shn={class:"flex items-center gap-4"},Chn={class:"flex items-center gap-2"},Ahn={class:"bg-white rounded-lg border border-gray-200 mb-6"},Thn={class:"border-b border-gray-200"},Ehn={class:"flex overflow-x-auto"},Mhn=["onClick"],$hn={class:"max-w-6xl"},Dhn={class:"space-y-6"},Rhn={key:0,class:"space-y-6"},Phn={class:"bg-white rounded-lg border p-6"},Ihn={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Ohn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Lhn={class:"space-y-4"},Vhn={class:"flex items-center justify-between"},Nhn={key:0},jhn={class:"flex items-center justify-between"},Fhn={key:1},Bhn={class:"space-y-4"},zhn={class:"flex items-center justify-between"},Uhn={class:"flex items-center justify-between"},Hhn={key:0},qhn={key:1,class:"space-y-6"},Whn={class:"bg-white rounded-lg border p-6"},Ghn={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Yhn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Khn={class:"space-y-4"},Xhn={class:"flex items-center justify-between"},Zhn={key:0},Qhn={class:"space-y-4"},Jhn={class:"flex items-center justify-between"},emn={class:"flex items-center justify-between"},tmn={key:2,class:"space-y-6"},nmn={class:"bg-white rounded-lg border p-6"},rmn={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},imn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},amn={class:"space-y-4"},smn={class:"flex items-center justify-between"},omn={key:0},lmn={class:"space-y-4"},umn={key:0,class:"flex items-center justify-between"},dmn={key:1},cmn={key:3,class:"space-y-6"},fmn={class:"bg-white rounded-lg border p-6"},pmn={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},hmn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},mmn={class:"space-y-4"},gmn={class:"flex items-center justify-between"},vmn={class:"space-y-4"},ymn={class:"flex items-center justify-between"},bmn={key:0},_mn={key:4,class:"space-y-6"},xmn={class:"bg-white rounded-lg border p-6"},wmn={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},kmn={class:"space-y-6"},Smn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Cmn={class:"mt-4"},Amn={class:"border-t pt-6"},Tmn={class:"mb-6"},Emn={class:"space-y-3"},Mmn={class:"text-sm font-medium text-gray-900"},$mn={class:"text-xs text-gray-500"},Dmn={class:"flex items-center space-x-2"},Rmn={class:"border-t pt-6"},Pmn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Imn={class:"mt-4"},Omn={class:"space-y-2"},Lmn={class:"mt-4"},Vmn={__name:"InventoryAuditSettings",setup(t){const e=xn(),n=Q(!1),r=Q("general"),i=Q(!1),a=Q(!1),s=Q({enable_auto_warehouse_creation:!1,default_warehouse_type:"Store",auto_generate_warehouse_code:!0,warehouse_code_prefix:"WH-",default_counting_method:"Manual Count",allow_negative_variance:!1,enable_batch_processing:!0,max_batch_size:100,notify_on_variance_threshold:!0,variance_notification_threshold:5,notify_store_manager:!0,notify_hod_inventory:!0,require_hod_approval:!0,approval_workflow:"Single Level",auto_approve_below_threshold:!1,approval_threshold_amount:0,audit_retention_days:365,enable_audit_trail:!0,auto_archive_completed_audits:!0,archive_after_days:90}),o=[{id:"general",name:"General",icon:So},{id:"notifications",name:"Notifications",icon:fp},{id:"approvals",name:"Approvals",icon:Gt},{id:"audit",name:"Audit Trail",icon:vt},{id:"warehouses",name:"Warehouses & Teams",icon:ya}],l=Q({warehouse_code:"",warehouse_name:"",warehouse_type:"Store",branch:"",city:"",county:""}),d=Q({warehouse:"",team_lead:"",team_members:[]}),c=Q([]),f=Q([]),p=Q([]),h=[{label:"Store",value:"Store"},{label:"Warehouse",value:"Warehouse"},{label:"Distribution Center",value:"Distribution Center"},{label:"Returns Center",value:"Returns Center"}],m=[{label:"Manual Count",value:"Manual Count"},{label:"Barcode Scan",value:"Barcode Scan"},{label:"RFID",value:"RFID"},{label:"System Integration",value:"System Integration"}],g=[{label:"Single Level",value:"Single Level"},{label:"Multi Level",value:"Multi Level"}],v=[{label:"Counter",value:"Counter"},{label:"Supervisor",value:"Supervisor"},{label:"Auditor",value:"Auditor"}],_=Ie({url:"/api/method/mkaguzi.inventory_audit.doctype.inventory_audit_settings.inventory_audit_settings.get_settings",auto:!1}),x=Ie({url:"frappe.client.set_value",auto:!1});Ie({url:"/api/resource/Warehouse Master",auto:!1});const w=Ie({url:"/api/resource/Warehouse Master",method:"GET",auto:!1}),k=Ie({url:"/api/resource/User",method:"GET",auto:!1}),S=Ie({url:"/api/method/mkaguzi.inventory_audit.doctype.inventory_audit_settings.inventory_audit_settings.create_warehouse",auto:!1});Ie({url:"/api/method/mkaguzi.inventory_audit.doctype.inventory_audit_settings.inventory_audit_settings.create_sample_warehouse",auto:!1});const C=Ie({url:"/api/method/mkaguzi.inventory_audit.doctype.inventory_audit_settings.inventory_audit_settings.create_team_assignment",auto:!1}),A=()=>{e.push("/inventory-audit")},M=()=>le(this,null,function*(){try{const N=yield _.fetch();N&&Object.assign(s.value,N)}catch(N){console.error("Error loading settings:",N)}}),$=()=>le(this,null,function*(){n.value=!0;try{yield x.fetch({doctype:"Inventory Audit Settings",name:"Inventory Audit Settings",fieldname:s.value}),alert("Settings saved successfully!")}catch(N){console.error("Error saving settings:",N),alert("Error saving settings. Please try again.")}finally{n.value=!1}}),R=()=>{confirm("Are you sure you want to reset all settings to defaults? This action cannot be undone.")&&(s.value={enable_auto_warehouse_creation:!1,default_warehouse_type:"Store",auto_generate_warehouse_code:!0,warehouse_code_prefix:"WH-",default_counting_method:"Manual Count",allow_negative_variance:!1,enable_batch_processing:!0,max_batch_size:100,notify_on_variance_threshold:!0,variance_notification_threshold:5,notify_store_manager:!0,notify_hod_inventory:!0,require_hod_approval:!0,approval_workflow:"Single Level",auto_approve_below_threshold:!1,approval_threshold_amount:0,audit_retention_days:365,enable_audit_trail:!0,auto_archive_completed_audits:!0,archive_after_days:90})},I=()=>le(this,null,function*(){if(!l.value.warehouse_code||!l.value.warehouse_name){alert("Please fill in warehouse code and name");return}i.value=!0;try{(yield S.fetch({warehouse_code:l.value.warehouse_code,warehouse_name:l.value.warehouse_name,warehouse_type:l.value.warehouse_type,branch:l.value.branch,city:l.value.city,county:l.value.county}))&&(alert(`Warehouse '${l.value.warehouse_code}' created successfully!`),l.value={warehouse_code:"",warehouse_name:"",warehouse_type:"Store",branch:"",city:"",county:""},q())}catch(N){console.error("Error creating warehouse:",N);const O=(N==null?void 0:N.exc_type)==="ValidationError"?N==null?void 0:N.message:(N==null?void 0:N.message)||(N==null?void 0:N._server_messages)||"Error creating warehouse. Please try again.";let V=O;if(N!=null&&N._server_messages)try{const L=JSON.parse(N._server_messages);L.length>0&&(V=JSON.parse(L[0]).message||O)}catch(L){}alert(V)}finally{i.value=!1}}),B=()=>{d.value.team_members.push({user:"",role:"Counter"})},j=N=>{d.value.team_members.splice(N,1)},z=()=>le(this,null,function*(){if(!d.value.warehouse||!d.value.team_lead){alert("Please select a warehouse and team lead");return}if(d.value.team_members.length===0){alert("Please add at least one team member");return}a.value=!0;try{(yield C.fetch({warehouse:d.value.warehouse,team_lead:d.value.team_lead,team_members:JSON.stringify(d.value.team_members)}))&&(alert("Team assignment created successfully!"),d.value={warehouse:"",team_lead:"",team_members:[]},q())}catch(N){console.error("Error creating team assignment:",N),alert("Error creating team assignment. Please try again.")}finally{a.value=!1}}),F=N=>{alert(`Team management for ${N.warehouse_name} would be implemented here`)},q=()=>le(this,null,function*(){try{const N=yield w.fetch({params:{fields:'["name","warehouse_name","warehouse_type"]',limit_page_length:100}});N&&N.data&&(f.value=N.data.map(V=>({label:`${V.warehouse_name} (${V.name})`,value:V.name})));const O=yield k.fetch({params:{fields:'["name","full_name"]',filters:'[["enabled","=","1"]]',limit_page_length:100}});O&&O.data&&(p.value=O.data.map(V=>({label:V.full_name||V.name,value:V.name}))),c.value=[{warehouse:"WH-001",warehouse_name:"Main Warehouse",warehouse_code:"WH-001",warehouse_type:"Warehouse",team_assigned:!0},{warehouse:"ST-001",warehouse_name:"Store A",warehouse_code:"ST-001",warehouse_type:"Store",team_assigned:!1}]}catch(N){console.error("Error loading warehouse data:",N)}});return bt(()=>{M(),q()}),(N,O)=>{const V=Ji("FormControl");return T(),P("div",whn,[u("div",khn,[u("div",Shn,[b(y(Z),{variant:"ghost",onClick:A},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),O[28]||(O[28]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Inventory Audit Settings"),u("p",{class:"text-gray-500 mt-1"}," Configure inventory audit module preferences and warehouse management ")],-1))]),u("div",Chn,[b(y(Z),{variant:"outline",onClick:R},{default:D(()=>[b(y(kY),{class:"w-4 h-4 mr-2"}),O[29]||(O[29]=W(" Reset to Defaults ",-1))]),_:1}),b(y(Z),{variant:"solid",onClick:$,loading:n.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),O[30]||(O[30]=W(" Save Settings ",-1))]),_:1},8,["loading"])])]),u("div",Ahn,[u("div",Thn,[u("nav",Ehn,[(T(),P(_e,null,we(o,L=>u("button",{key:L.id,class:fe(["px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors",r.value===L.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]),onClick:U=>r.value=L.id},[(T(),he(Lt(L.icon),{class:"h-4 w-4 mr-2 inline"})),W(" "+E(L.name),1)],10,Mhn)),64))])])]),u("div",$hn,[u("div",Dhn,[r.value==="general"?(T(),P("div",Rhn,[u("div",Phn,[u("h3",Ihn,[b(y(So),{class:"w-5 h-5 mr-2"}),O[31]||(O[31]=W(" General Settings ",-1))]),u("div",Ohn,[u("div",Lhn,[u("div",Vhn,[O[32]||(O[32]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto Warehouse Creation"),u("p",{class:"text-sm text-gray-500"},"Automatically create warehouse records when importing stock data")],-1)),b(y(Ut),{modelValue:s.value.enable_auto_warehouse_creation,"onUpdate:modelValue":O[0]||(O[0]=L=>s.value.enable_auto_warehouse_creation=L)},null,8,["modelValue"])]),s.value.enable_auto_warehouse_creation?(T(),P("div",Nhn,[O[33]||(O[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Warehouse Type",-1)),b(V,{type:"select",modelValue:s.value.default_warehouse_type,"onUpdate:modelValue":O[1]||(O[1]=L=>s.value.default_warehouse_type=L),options:h},null,8,["modelValue"])])):ie("",!0),u("div",jhn,[O[34]||(O[34]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto Generate Warehouse Code"),u("p",{class:"text-sm text-gray-500"},"Automatically generate warehouse codes using prefix")],-1)),b(y(Ut),{modelValue:s.value.auto_generate_warehouse_code,"onUpdate:modelValue":O[2]||(O[2]=L=>s.value.auto_generate_warehouse_code=L)},null,8,["modelValue"])]),s.value.auto_generate_warehouse_code?(T(),P("div",Fhn,[O[35]||(O[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Code Prefix",-1)),b(V,{type:"text",modelValue:s.value.warehouse_code_prefix,"onUpdate:modelValue":O[3]||(O[3]=L=>s.value.warehouse_code_prefix=L),placeholder:"WH-, ST-, etc."},null,8,["modelValue"])])):ie("",!0)]),u("div",Bhn,[u("div",null,[O[36]||(O[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Counting Method",-1)),b(V,{type:"select",modelValue:s.value.default_counting_method,"onUpdate:modelValue":O[4]||(O[4]=L=>s.value.default_counting_method=L),options:m},null,8,["modelValue"])]),u("div",zhn,[O[37]||(O[37]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Allow Negative Variance"),u("p",{class:"text-sm text-gray-500"},"Allow negative variances in stock counts")],-1)),b(y(Ut),{modelValue:s.value.allow_negative_variance,"onUpdate:modelValue":O[5]||(O[5]=L=>s.value.allow_negative_variance=L)},null,8,["modelValue"])]),u("div",Uhn,[O[38]||(O[38]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Enable Batch Processing"),u("p",{class:"text-sm text-gray-500"},"Process stock items in batches for performance")],-1)),b(y(Ut),{modelValue:s.value.enable_batch_processing,"onUpdate:modelValue":O[6]||(O[6]=L=>s.value.enable_batch_processing=L)},null,8,["modelValue"])]),s.value.enable_batch_processing?(T(),P("div",Hhn,[O[39]||(O[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Max Batch Size",-1)),b(V,{type:"number",modelValue:s.value.max_batch_size,"onUpdate:modelValue":O[7]||(O[7]=L=>s.value.max_batch_size=L),min:"10",max:"1000"},null,8,["modelValue"])])):ie("",!0)])])])])):ie("",!0),r.value==="notifications"?(T(),P("div",qhn,[u("div",Whn,[u("h3",Ghn,[b(y(fp),{class:"w-5 h-5 mr-2"}),O[40]||(O[40]=W(" Notification Settings ",-1))]),u("div",Yhn,[u("div",Khn,[u("div",Xhn,[O[41]||(O[41]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Notify on Variance Threshold"),u("p",{class:"text-sm text-gray-500"},"Send notifications when variance exceeds threshold")],-1)),b(y(Ut),{modelValue:s.value.notify_on_variance_threshold,"onUpdate:modelValue":O[8]||(O[8]=L=>s.value.notify_on_variance_threshold=L)},null,8,["modelValue"])]),s.value.notify_on_variance_threshold?(T(),P("div",Zhn,[O[42]||(O[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Variance Notification Threshold (%)",-1)),b(V,{type:"number",modelValue:s.value.variance_notification_threshold,"onUpdate:modelValue":O[9]||(O[9]=L=>s.value.variance_notification_threshold=L),min:"0",max:"100",step:"0.1"},null,8,["modelValue"])])):ie("",!0)]),u("div",Qhn,[u("div",Jhn,[O[43]||(O[43]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Notify Store Manager"),u("p",{class:"text-sm text-gray-500"},"Send notifications to store managers")],-1)),b(y(Ut),{modelValue:s.value.notify_store_manager,"onUpdate:modelValue":O[10]||(O[10]=L=>s.value.notify_store_manager=L)},null,8,["modelValue"])]),u("div",emn,[O[44]||(O[44]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Notify HOD Inventory"),u("p",{class:"text-sm text-gray-500"},"Send notifications to HOD Inventory")],-1)),b(y(Ut),{modelValue:s.value.notify_hod_inventory,"onUpdate:modelValue":O[11]||(O[11]=L=>s.value.notify_hod_inventory=L)},null,8,["modelValue"])])])])])])):ie("",!0),r.value==="approvals"?(T(),P("div",tmn,[u("div",nmn,[u("h3",rmn,[b(y(Gt),{class:"w-5 h-5 mr-2"}),O[45]||(O[45]=W(" Approval Settings ",-1))]),u("div",imn,[u("div",amn,[u("div",smn,[O[46]||(O[46]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Require HOD Approval"),u("p",{class:"text-sm text-gray-500"},"Require HOD approval for stock take variances")],-1)),b(y(Ut),{modelValue:s.value.require_hod_approval,"onUpdate:modelValue":O[12]||(O[12]=L=>s.value.require_hod_approval=L)},null,8,["modelValue"])]),s.value.require_hod_approval?(T(),P("div",omn,[O[47]||(O[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Approval Workflow",-1)),b(V,{type:"select",modelValue:s.value.approval_workflow,"onUpdate:modelValue":O[13]||(O[13]=L=>s.value.approval_workflow=L),options:g},null,8,["modelValue"])])):ie("",!0)]),u("div",lmn,[s.value.require_hod_approval?(T(),P("div",umn,[O[48]||(O[48]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto Approve Below Threshold"),u("p",{class:"text-sm text-gray-500"},"Auto-approve variances below threshold")],-1)),b(y(Ut),{modelValue:s.value.auto_approve_below_threshold,"onUpdate:modelValue":O[14]||(O[14]=L=>s.value.auto_approve_below_threshold=L)},null,8,["modelValue"])])):ie("",!0),s.value.require_hod_approval&&s.value.auto_approve_below_threshold?(T(),P("div",dmn,[O[49]||(O[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Approval Threshold Amount",-1)),b(V,{type:"number",modelValue:s.value.approval_threshold_amount,"onUpdate:modelValue":O[15]||(O[15]=L=>s.value.approval_threshold_amount=L),min:"0",step:"0.01"},null,8,["modelValue"])])):ie("",!0)])])])])):ie("",!0),r.value==="audit"?(T(),P("div",cmn,[u("div",fmn,[u("h3",pmn,[b(y(vt),{class:"w-5 h-5 mr-2"}),O[50]||(O[50]=W(" Audit Trail Settings ",-1))]),u("div",hmn,[u("div",mmn,[u("div",null,[O[51]||(O[51]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Audit Retention Days",-1)),b(V,{type:"number",modelValue:s.value.audit_retention_days,"onUpdate:modelValue":O[16]||(O[16]=L=>s.value.audit_retention_days=L),min:"30",max:"3650"},null,8,["modelValue"])]),u("div",gmn,[O[52]||(O[52]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Enable Audit Trail"),u("p",{class:"text-sm text-gray-500"},"Enable detailed audit trail for all changes")],-1)),b(y(Ut),{modelValue:s.value.enable_audit_trail,"onUpdate:modelValue":O[17]||(O[17]=L=>s.value.enable_audit_trail=L)},null,8,["modelValue"])])]),u("div",vmn,[u("div",ymn,[O[53]||(O[53]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto Archive Completed Audits"),u("p",{class:"text-sm text-gray-500"},"Automatically archive completed audits")],-1)),b(y(Ut),{modelValue:s.value.auto_archive_completed_audits,"onUpdate:modelValue":O[18]||(O[18]=L=>s.value.auto_archive_completed_audits=L)},null,8,["modelValue"])]),s.value.auto_archive_completed_audits?(T(),P("div",bmn,[O[54]||(O[54]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Archive After Days",-1)),b(V,{type:"number",modelValue:s.value.archive_after_days,"onUpdate:modelValue":O[19]||(O[19]=L=>s.value.archive_after_days=L),min:"1",max:"365"},null,8,["modelValue"])])):ie("",!0)])])])])):ie("",!0),r.value==="warehouses"?(T(),P("div",_mn,[u("div",xmn,[u("h3",wmn,[b(y(ya),{class:"w-5 h-5 mr-2"}),O[55]||(O[55]=W(" Warehouse & Team Assignment ",-1))]),u("div",kmn,[u("div",null,[O[63]||(O[63]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Create Warehouse",-1)),u("div",Smn,[u("div",null,[O[56]||(O[56]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Code",-1)),b(V,{type:"text",modelValue:l.value.warehouse_code,"onUpdate:modelValue":O[20]||(O[20]=L=>l.value.warehouse_code=L),placeholder:"WH-001"},null,8,["modelValue"])]),u("div",null,[O[57]||(O[57]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Name",-1)),b(V,{type:"text",modelValue:l.value.warehouse_name,"onUpdate:modelValue":O[21]||(O[21]=L=>l.value.warehouse_name=L),placeholder:"Main Warehouse"},null,8,["modelValue"])]),u("div",null,[O[58]||(O[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Type",-1)),b(V,{type:"select",modelValue:l.value.warehouse_type,"onUpdate:modelValue":O[22]||(O[22]=L=>l.value.warehouse_type=L),options:h},null,8,["modelValue"])]),u("div",null,[O[59]||(O[59]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Branch",-1)),b(V,{type:"text",modelValue:l.value.branch,"onUpdate:modelValue":O[23]||(O[23]=L=>l.value.branch=L),placeholder:"Main Branch"},null,8,["modelValue"])]),u("div",null,[O[60]||(O[60]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"City",-1)),b(V,{type:"text",modelValue:l.value.city,"onUpdate:modelValue":O[24]||(O[24]=L=>l.value.city=L),placeholder:"Nairobi"},null,8,["modelValue"])]),u("div",null,[O[61]||(O[61]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"County",-1)),b(V,{type:"text",modelValue:l.value.county,"onUpdate:modelValue":O[25]||(O[25]=L=>l.value.county=L),placeholder:"Nairobi"},null,8,["modelValue"])])]),u("div",Cmn,[b(y(Z),{onClick:I,loading:i.value},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),O[62]||(O[62]=W(" Create Warehouse ",-1))]),_:1},8,["loading"])])]),u("div",Amn,[O[71]||(O[71]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Assign Teams to Warehouses",-1)),u("div",Tmn,[O[64]||(O[64]=u("h5",{class:"text-sm font-medium text-gray-700 mb-3"},"Current Assignments",-1)),u("div",Emn,[(T(!0),P(_e,null,we(c.value,L=>(T(),P("div",{key:L.warehouse,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},[u("div",null,[u("p",Mmn,E(L.warehouse_name),1),u("p",$mn,E(L.warehouse_code)+"  "+E(L.warehouse_type),1)]),u("div",Dmn,[b(y(Ee),{variant:L.team_assigned?"success":"secondary"},{default:D(()=>[W(E(L.team_assigned?"Assigned":"Unassigned"),1)]),_:2},1032,["variant"]),b(y(Z),{variant:"outline",size:"sm",onClick:U=>F(L)},{default:D(()=>[W(E(L.team_assigned?"Manage Team":"Assign Team"),1)]),_:2},1032,["onClick"])])]))),128))])]),u("div",Rmn,[O[70]||(O[70]=u("h5",{class:"text-sm font-medium text-gray-700 mb-3"},"Create New Team Assignment",-1)),u("div",Pmn,[u("div",null,[O[65]||(O[65]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Warehouse",-1)),b(V,{type:"select",modelValue:d.value.warehouse,"onUpdate:modelValue":O[26]||(O[26]=L=>d.value.warehouse=L),options:f.value,placeholder:"Choose warehouse"},null,8,["modelValue","options"])]),u("div",null,[O[66]||(O[66]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team Lead",-1)),b(V,{type:"select",modelValue:d.value.team_lead,"onUpdate:modelValue":O[27]||(O[27]=L=>d.value.team_lead=L),options:p.value,placeholder:"Select team lead"},null,8,["modelValue","options"])])]),u("div",Imn,[O[68]||(O[68]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team Members",-1)),u("div",Omn,[(T(!0),P(_e,null,we(d.value.team_members,(L,U)=>(T(),P("div",{key:U,class:"flex items-center space-x-2"},[b(V,{type:"select",modelValue:L.user,"onUpdate:modelValue":G=>L.user=G,options:p.value,placeholder:"Select user",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","options"]),b(V,{type:"select",modelValue:L.role,"onUpdate:modelValue":G=>L.role=G,options:v,placeholder:"Role",class:"w-32"},null,8,["modelValue","onUpdate:modelValue"]),b(y(Z),{variant:"outline",size:"sm",onClick:G=>j(U)},{default:D(()=>[b(y(ht),{class:"w-4 h-4"})]),_:1},8,["onClick"])]))),128))]),b(y(Z),{variant:"outline",size:"sm",onClick:B,class:"mt-2"},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),O[67]||(O[67]=W(" Add Member ",-1))]),_:1})]),u("div",Lmn,[b(y(Z),{onClick:z,loading:a.value},{default:D(()=>[b(y(ya),{class:"w-4 h-4 mr-2"}),O[69]||(O[69]=W(" Create Team Assignment ",-1))]),_:1},8,["loading"])])])])])])])):ie("",!0)])])])}}},Nmn={class:"p-6"},jmn={class:"flex justify-between items-center mb-6"},Fmn={class:"flex gap-2"},Bmn={class:"bg-white rounded-lg border p-4 mb-6"},zmn={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Umn=["value"],Hmn={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},qmn={class:"bg-white rounded-lg border p-4"},Wmn={class:"text-2xl font-bold"},Gmn={class:"bg-white rounded-lg border p-4"},Ymn={class:"text-2xl font-bold text-blue-600"},Kmn={class:"bg-white rounded-lg border p-4"},Xmn={class:"text-2xl font-bold text-yellow-600"},Zmn={class:"bg-white rounded-lg border p-4"},Qmn={class:"text-2xl font-bold text-green-600"},Jmn={class:"bg-white rounded-lg border p-4"},egn={class:"text-2xl font-bold text-purple-600"},tgn={class:"bg-white rounded-lg border shadow-sm"},ngn={key:0,class:"divide-y divide-gray-200"},rgn=["onClick"],ign={class:"flex items-start justify-between"},agn={class:"flex-1"},sgn={class:"flex items-center gap-3 mb-2"},ogn={class:"font-medium text-gray-900"},lgn={class:"text-sm text-gray-600 mb-2"},ugn={class:"flex items-center gap-6 text-sm text-gray-500"},dgn={class:"flex items-center gap-1"},cgn={class:"flex items-center gap-1"},fgn={key:0,class:"flex items-center gap-1"},pgn={key:1,class:"flex items-center gap-1"},hgn={class:"flex items-center gap-6 mt-3 text-sm"},mgn={class:"text-gray-500"},ggn={key:0,class:"text-orange-600"},vgn={key:1,class:"text-purple-600"},ygn={class:"text-right"},bgn={key:1,class:"p-12 text-center text-gray-500"},_gn={key:2,class:"px-4 py-3 border-t flex items-center justify-between"},xgn={class:"text-sm text-gray-500"},wgn={class:"flex gap-2"},kgn={__name:"AuditPlanList",setup(t){const e=xn(),n=Xl(),r=Q(!1),i=Q({status:"",audit_period:"",branch:"",warehouse:""}),a=J(()=>n.plans),s=J(()=>n.plansTotalCount),o=J(()=>n.plansPage),l=J(()=>n.plansPageSize),d=J(()=>Math.ceil(s.value/l.value)),c=J(()=>{const S=a.value.filter(C=>C.compliance_score);return S.length===0?0:Math.round(S.reduce((C,A)=>C+A.compliance_score,0)/S.length)});bt(()=>le(this,null,function*(){yield f()}));function f(){return le(this,null,function*(){r.value=!0;try{const S=me({},i.value);Object.keys(S).forEach(C=>{S[C]||delete S[C]}),yield n.loadPlans(S,o.value,l.value)}finally{r.value=!1}})}function p(){return le(this,null,function*(){i.value={status:"",audit_period:"",branch:"",warehouse:""},yield f()})}let h=null;function m(){clearTimeout(h),h=setTimeout(()=>f(),300)}function g(S){return le(this,null,function*(){yield n.loadPlans(i.value,S,l.value)})}function v(){e.push("/inventory-audit/plans/new")}function _(S){e.push(`/inventory-audit/plans/${S}`)}function x(S){return{Planned:"blue","In Progress":"yellow",Completed:"green","On Hold":"gray",Cancelled:"red"}[S]||"gray"}function w(S){return S?new Date(S).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function k(S){if(!S)return!1;const M=(new Date(S)-new Date)/(1e3*60*60*24);return M<=7&&M>=0}return(S,C)=>(T(),P("div",Nmn,[u("div",jmn,[C[7]||(C[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Inventory Audit Plans"),u("p",{class:"text-gray-600"},"Manage audit cycles, scope, and materiality thresholds")],-1)),u("div",Fmn,[b(y(Z),{onClick:p,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(y(Z),{onClick:v},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),C[6]||(C[6]=W(" New Plan ",-1))]),_:1})])]),u("div",Bmn,[u("div",zmn,[u("div",null,[C[9]||(C[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),xe(u("select",{"onUpdate:modelValue":C[0]||(C[0]=A=>i.value.status=A),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[...C[8]||(C[8]=[ur('<option value="">All Statuses</option><option value="Planned">Planned</option><option value="In Progress">In Progress</option><option value="Completed">Completed</option><option value="On Hold">On Hold</option><option value="Cancelled">Cancelled</option>',6)])],544),[[gn,i.value.status]])]),u("div",null,[C[11]||(C[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Period",-1)),xe(u("select",{"onUpdate:modelValue":C[1]||(C[1]=A=>i.value.audit_period=A),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[C[10]||(C[10]=u("option",{value:""},"All Periods",-1)),(T(!0),P(_e,null,we(y(n).auditPeriodOptions,A=>(T(),P("option",{key:A.value,value:A.value},E(A.label),9,Umn))),128))],544),[[gn,i.value.audit_period]])]),u("div",null,[C[12]||(C[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Branch",-1)),xe(u("input",{"onUpdate:modelValue":C[2]||(C[2]=A=>i.value.branch=A),type:"text",placeholder:"Filter by branch",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:m},null,544),[[Mt,i.value.branch]])]),u("div",null,[C[13]||(C[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),xe(u("input",{"onUpdate:modelValue":C[3]||(C[3]=A=>i.value.warehouse=A),type:"text",placeholder:"Filter by warehouse",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:m},null,544),[[Mt,i.value.warehouse]])])])]),u("div",Hmn,[u("div",qmn,[C[14]||(C[14]=u("p",{class:"text-sm text-gray-500"},"Total Plans",-1)),u("p",Wmn,E(s.value),1)]),u("div",Gmn,[C[15]||(C[15]=u("p",{class:"text-sm text-gray-500"},"Planned",-1)),u("p",Ymn,E(a.value.filter(A=>A.status==="Planned").length),1)]),u("div",Kmn,[C[16]||(C[16]=u("p",{class:"text-sm text-gray-500"},"In Progress",-1)),u("p",Xmn,E(a.value.filter(A=>A.status==="In Progress").length),1)]),u("div",Zmn,[C[17]||(C[17]=u("p",{class:"text-sm text-gray-500"},"Completed",-1)),u("p",Qmn,E(a.value.filter(A=>A.status==="Completed").length),1)]),u("div",Jmn,[C[18]||(C[18]=u("p",{class:"text-sm text-gray-500"},"Avg Compliance",-1)),u("p",egn,E(c.value)+"%",1)])]),u("div",tgn,[a.value.length>0?(T(),P("div",ngn,[(T(!0),P(_e,null,we(a.value,A=>(T(),P("div",{key:A.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:M=>_(A.name)},[u("div",ign,[u("div",agn,[u("div",sgn,[u("h4",ogn,E(A.plan_title),1),b(y(Ee),{variant:x(A.status)},{default:D(()=>[W(E(A.status),1)]),_:2},1032,["variant"]),A.priority==="High"?(T(),he(y(Ee),{key:0,variant:"red"},{default:D(()=>[...C[19]||(C[19]=[W("High Priority",-1)])]),_:1})):ie("",!0)]),u("p",lgn,E(A.plan_id),1),u("div",ugn,[u("span",dgn,[b(y(er),{class:"w-4 h-4"}),W(" "+E(A.audit_period),1)]),u("span",cgn,[b(y(Xi),{class:"w-4 h-4"}),W(" "+E(A.audit_scope),1)]),A.warehouse?(T(),P("span",fgn,[b(y(nb),{class:"w-4 h-4"}),W(" "+E(A.warehouse),1)])):ie("",!0),A.lead_auditor?(T(),P("span",pgn,[b(y(Ro),{class:"w-4 h-4"}),W(" "+E(A.lead_auditor),1)])):ie("",!0)]),u("div",hgn,[u("span",mgn,[C[20]||(C[20]=W(" Sessions: ",-1)),u("strong",null,E(A.completed_sessions_count||0)+"/"+E(A.sessions_count||0),1)]),A.variance_cases_count?(T(),P("span",ggn,[C[21]||(C[21]=W(" Variance Cases: ",-1)),u("strong",null,E(A.variance_cases_count),1)])):ie("",!0),A.compliance_score?(T(),P("span",vgn,[C[22]||(C[22]=W(" Compliance: ",-1)),u("strong",null,E(A.compliance_score)+"%",1)])):ie("",!0)])]),u("div",ygn,[C[23]||(C[23]=u("p",{class:"text-sm text-gray-500"},"Due Date",-1)),u("p",{class:fe(["font-medium",k(A.due_date)?"text-red-600":"text-gray-900"])},E(w(A.due_date)),3)])])],8,rgn))),128))])):r.value?ie("",!0):(T(),P("div",bgn,[b(y(kr),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),C[25]||(C[25]=u("p",null,"No audit plans found",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-2",onClick:v},{default:D(()=>[...C[24]||(C[24]=[W(" Create First Plan ",-1)])]),_:1})])),d.value>1?(T(),P("div",_gn,[u("p",xgn," Showing "+E((o.value-1)*l.value+1)+" - "+E(Math.min(o.value*l.value,s.value))+" of "+E(s.value),1),u("div",wgn,[b(y(Z),{variant:"outline",size:"sm",disabled:o.value===1,onClick:C[4]||(C[4]=A=>g(o.value-1))},{default:D(()=>[...C[26]||(C[26]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",size:"sm",disabled:o.value===d.value,onClick:C[5]||(C[5]=A=>g(o.value+1))},{default:D(()=>[...C[27]||(C[27]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):ie("",!0)])]))}},Sgn={class:"signoff-section"},Cgn={class:"text-sm font-medium text-gray-700 mb-3"},Agn={class:"space-y-3"},Tgn={class:"flex items-center gap-3"},Egn={key:0,class:"text-xs text-gray-500"},Mgn={key:1,class:"text-xs text-gray-400"},$gn={class:"flex items-center gap-3"},Dgn={key:0,class:"text-xs text-gray-500"},Rgn={key:1,class:"text-xs text-gray-400"},Pgn={class:"flex items-center gap-3"},Ign={key:0,class:"text-xs text-gray-500"},Ogn={key:1,class:"text-xs text-gray-400"},Lgn={class:"mt-4"},Vgn={class:"flex items-center justify-between text-xs text-gray-500 mb-1"},Ngn={class:"w-full bg-gray-200 rounded-full h-2"},jgn={__name:"SignoffSection",props:{signoffs:{type:Object,required:!0,default:()=>({team_signoff:!1,team_signoff_by:null,team_signoff_date:null,supervisor_signoff:!1,supervisor_signoff_by:null,supervisor_signoff_date:null,auditor_signoff:!1,auditor_signoff_by:null,auditor_signoff_date:null})},readonly:{type:Boolean,default:!1},title:{type:String,default:"Signoff Status"},signingOff:{type:String,default:null},userRoles:{type:Array,default:()=>[]}},emits:["signoff"],setup(t){const e=t,n=J(()=>{let o=0;return e.signoffs.team_signoff&&o++,e.signoffs.supervisor_signoff&&o++,e.signoffs.auditor_signoff&&o++,o}),r=J(()=>n.value===3?"bg-green-500":n.value>=1?"bg-yellow-500":"bg-gray-300");function i(o){return e.signoffs[`${o}_signoff`]?"border-green-200 bg-green-50":o==="team"&&!e.signoffs.team_signoff||o==="supervisor"&&e.signoffs.team_signoff&&!e.signoffs.supervisor_signoff||o==="auditor"&&e.signoffs.supervisor_signoff&&!e.signoffs.auditor_signoff?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-gray-50"}function a(o){return o==="team"?e.userRoles.includes("Counter")||e.userRoles.includes("Team Lead")||e.userRoles.includes("System Manager"):o==="supervisor"?e.userRoles.includes("Supervisor")||e.userRoles.includes("System Manager"):o==="auditor"?e.userRoles.includes("Internal Auditor")||e.userRoles.includes("Auditor")||e.userRoles.includes("System Manager"):!1}function s(o){return o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}return(o,l)=>(T(),P("div",Sgn,[u("h4",Cgn,E(t.title||"Signoff Status"),1),u("div",Agn,[u("div",{class:fe(["flex items-center justify-between p-3 rounded-lg border",i("team")])},[u("div",Tgn,[u("div",{class:fe(["w-8 h-8 rounded-full flex items-center justify-center",t.signoffs.team_signoff?"bg-green-100":"bg-gray-100"])},[t.signoffs.team_signoff?(T(),he(y(Gt),{key:0,class:"w-5 h-5 text-green-600"})):(T(),he(y(WA),{key:1,class:"w-5 h-5 text-gray-400"}))],2),u("div",null,[l[3]||(l[3]=u("p",{class:"text-sm font-medium text-gray-900"},"Team Lead",-1)),t.signoffs.team_signoff?(T(),P("p",Egn,E(t.signoffs.team_signoff_by_name||t.signoffs.team_signoff_by)+"  "+E(s(t.signoffs.team_signoff_date)),1)):(T(),P("p",Mgn,"Pending"))])]),!t.signoffs.team_signoff&&!t.readonly&&a("team")?(T(),he(y(Z),{key:0,size:"sm",variant:"outline",onClick:l[0]||(l[0]=d=>o.$emit("signoff","team")),loading:t.signingOff==="team"},{default:D(()=>[...l[4]||(l[4]=[W(" Sign Off ",-1)])]),_:1},8,["loading"])):ie("",!0)],2),u("div",{class:fe(["flex items-center justify-between p-3 rounded-lg border",i("supervisor")])},[u("div",$gn,[u("div",{class:fe(["w-8 h-8 rounded-full flex items-center justify-center",t.signoffs.supervisor_signoff?"bg-green-100":"bg-gray-100"])},[t.signoffs.supervisor_signoff?(T(),he(y(Gt),{key:0,class:"w-5 h-5 text-green-600"})):(T(),he(y(WA),{key:1,class:"w-5 h-5 text-gray-400"}))],2),u("div",null,[l[5]||(l[5]=u("p",{class:"text-sm font-medium text-gray-900"},"Supervisor",-1)),t.signoffs.supervisor_signoff?(T(),P("p",Dgn,E(t.signoffs.supervisor_signoff_by_name||t.signoffs.supervisor_signoff_by)+"  "+E(s(t.signoffs.supervisor_signoff_date)),1)):(T(),P("p",Rgn,E(t.signoffs.team_signoff?"Pending":"Awaiting Team Signoff"),1))])]),!t.signoffs.supervisor_signoff&&t.signoffs.team_signoff&&!t.readonly&&a("supervisor")?(T(),he(y(Z),{key:0,size:"sm",variant:"outline",onClick:l[1]||(l[1]=d=>o.$emit("signoff","supervisor")),loading:t.signingOff==="supervisor"},{default:D(()=>[...l[6]||(l[6]=[W(" Sign Off ",-1)])]),_:1},8,["loading"])):ie("",!0)],2),u("div",{class:fe(["flex items-center justify-between p-3 rounded-lg border",i("auditor")])},[u("div",Pgn,[u("div",{class:fe(["w-8 h-8 rounded-full flex items-center justify-center",t.signoffs.auditor_signoff?"bg-green-100":"bg-gray-100"])},[t.signoffs.auditor_signoff?(T(),he(y(Gt),{key:0,class:"w-5 h-5 text-green-600"})):(T(),he(y(WA),{key:1,class:"w-5 h-5 text-gray-400"}))],2),u("div",null,[l[7]||(l[7]=u("p",{class:"text-sm font-medium text-gray-900"},"Auditor",-1)),t.signoffs.auditor_signoff?(T(),P("p",Ign,E(t.signoffs.auditor_signoff_by_name||t.signoffs.auditor_signoff_by)+"  "+E(s(t.signoffs.auditor_signoff_date)),1)):(T(),P("p",Ogn,E(t.signoffs.supervisor_signoff?"Pending":"Awaiting Supervisor Signoff"),1))])]),!t.signoffs.auditor_signoff&&t.signoffs.supervisor_signoff&&!t.readonly&&a("auditor")?(T(),he(y(Z),{key:0,size:"sm",variant:"outline",onClick:l[2]||(l[2]=d=>o.$emit("signoff","auditor")),loading:t.signingOff==="auditor"},{default:D(()=>[...l[8]||(l[8]=[W(" Sign Off ",-1)])]),_:1},8,["loading"])):ie("",!0)],2)]),u("div",Lgn,[u("div",Vgn,[l[9]||(l[9]=u("span",null,"Signoff Progress",-1)),u("span",null,E(n.value)+"/3",1)]),u("div",Ngn,[u("div",{class:fe(["h-2 rounded-full transition-all duration-300",r.value]),style:nt({width:`${n.value/3*100}%`})},null,6)])])]))}},Fgn=Ft(jgn,[["__scopeId","data-v-d35a7966"]]),Bgn={class:"team-member-table"},zgn={class:"flex items-center justify-between mb-3"},Ugn={class:"text-sm font-medium text-gray-700"},Hgn={key:0,class:"text-center py-6 text-gray-500 bg-gray-50 rounded-lg"},qgn={key:1,class:"space-y-2"},Wgn={class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},Ggn={class:"text-sm font-medium text-blue-700"},Ygn={class:"flex-1 min-w-0"},Kgn={key:1},Xgn={class:"text-sm font-medium text-gray-900 truncate"},Zgn={class:"w-32"},Qgn={class:"flex items-center gap-1"},Jgn=["checked","disabled","onChange"],evn={key:2,class:"mt-3 flex items-center gap-4 text-xs text-gray-500"},tvn={key:0},nvn={key:1},Koe={__name:"TeamMemberTable",props:{modelValue:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!1},title:{type:String,default:"Team Members"},roleOptions:{type:Array,default:()=>[{label:"Counter",value:"Counter"},{label:"Verifier",value:"Verifier"},{label:"Supervisor",value:"Supervisor"},{label:"Auditor",value:"Auditor"}]}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.modelValue||[],set:m=>r("update:modelValue",m)}),a=Q([]);bt(()=>le(this,null,function*(){yield s()}));function s(){return le(this,null,function*(){try{const m=yield et("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});a.value=m.map(g=>({label:g.full_name||g.name,value:g.name}))}catch(m){console.error("Error loading users:",m)}})}function o(){const m=[...i.value,{user:"",user_name:"",role:"Counter",is_lead:0}];r("update:modelValue",m)}function l(m){const g=i.value.filter((v,_)=>_!==m);r("update:modelValue",g)}function d(m,g){const v=a.value.find(_=>_.value===g);if(v){const _=[...i.value];_[m]=je(me({},_[m]),{user:g,user_name:v.label}),r("update:modelValue",_)}}function c(m){return m?m.split(" ").map(g=>g[0]).join("").toUpperCase().slice(0,2):"?"}function f(m){return{Counter:"blue",Verifier:"green",Supervisor:"yellow",Auditor:"purple"}[m]||"gray"}const p=J(()=>i.value.filter(m=>m.is_lead).length),h=J(()=>{const m={};return i.value.forEach(g=>{g.role&&(m[g.role]=(m[g.role]||0)+1)}),Object.entries(m).map(([g,v])=>`${v} ${g}${v!==1?"s":""}`).join(", ")});return(m,g)=>(T(),P("div",Bgn,[u("div",zgn,[u("h4",Ugn,E(t.title||"Team Members"),1),t.readonly?ie("",!0):(T(),he(y(Z),{key:0,size:"sm",variant:"outline",onClick:o},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-1"}),g[0]||(g[0]=W(" Add Member ",-1))]),_:1}))]),i.value.length===0?(T(),P("div",Hgn,[b(y(ya),{class:"w-8 h-8 mx-auto mb-2 text-gray-300"}),g[2]||(g[2]=u("p",{class:"text-sm"},"No team members assigned",-1)),t.readonly?ie("",!0):(T(),he(y(Z),{key:0,size:"sm",variant:"ghost",class:"mt-2",onClick:o},{default:D(()=>[...g[1]||(g[1]=[W(" Add First Member ",-1)])]),_:1}))])):(T(),P("div",qgn,[(T(!0),P(_e,null,we(i.value,(v,_)=>(T(),P("div",{key:_,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg group"},[u("div",Wgn,[u("span",Ggn,E(c(v.user_name||v.user)),1)]),u("div",Ygn,[t.readonly?(T(),P("div",Kgn,[u("p",Xgn,E(v.user_name||v.user),1)])):(T(),he(y(ge),{key:0,type:"autocomplete",options:a.value,modelValue:v.user,"onUpdate:modelValue":x=>v.user=x,placeholder:"Select user...",onChange:x=>d(_,x)},null,8,["options","modelValue","onUpdate:modelValue","onChange"]))]),u("div",Zgn,[t.readonly?(T(),he(y(Ee),{key:1,variant:f(v.role)},{default:D(()=>[W(E(v.role),1)]),_:2},1032,["variant"])):(T(),he(y(ge),{key:0,type:"select",options:t.roleOptions,modelValue:v.role,"onUpdate:modelValue":x=>v.role=x,placeholder:"Role"},null,8,["options","modelValue","onUpdate:modelValue"]))]),u("div",Qgn,[u("input",{type:"checkbox",checked:v.is_lead,disabled:t.readonly,onChange:x=>v.is_lead=x.target.checked?1:0,class:"h-4 w-4 text-blue-600 rounded border-gray-300"},null,40,Jgn),g[3]||(g[3]=u("span",{class:"text-xs text-gray-500"},"Lead",-1))]),t.readonly?ie("",!0):(T(),he(y(Z),{key:0,size:"sm",variant:"ghost",class:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:x=>l(_)},{default:D(()=>[b(y(hi),{class:"w-4 h-4 text-red-500"})]),_:1},8,["onClick"]))]))),128))])),i.value.length>0?(T(),P("div",evn,[u("span",null,E(i.value.length)+" member"+E(i.value.length!==1?"s":""),1),p.value>0?(T(),P("span",tvn,E(p.value)+" lead"+E(p.value!==1?"s":""),1)):ie("",!0),h.value?(T(),P("span",nvn,E(h.value),1)):ie("",!0)])):ie("",!0)]))}},rvn={class:"physical-count-table"},ivn={class:"flex items-center justify-between mb-3"},avn={class:"text-sm font-medium text-gray-700"},svn={class:"text-xs text-gray-500"},ovn={class:"flex items-center gap-2"},lvn={key:0,class:"grid grid-cols-4 gap-3 mb-4"},uvn={class:"bg-blue-50 rounded-lg p-3"},dvn={class:"text-lg font-bold text-blue-700"},cvn={class:"bg-green-50 rounded-lg p-3"},fvn={class:"text-lg font-bold text-green-700"},pvn={class:"bg-yellow-50 rounded-lg p-3"},hvn={class:"text-lg font-bold text-yellow-700"},mvn={class:"bg-red-50 rounded-lg p-3"},gvn={class:"text-lg font-bold text-red-700"},vvn={key:1,class:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg"},yvn={key:2,class:"overflow-x-auto border rounded-lg"},bvn={class:"min-w-full divide-y divide-gray-200"},_vn={class:"bg-gray-50"},xvn={key:0,class:"px-3 py-2 w-10"},wvn={class:"bg-white divide-y divide-gray-200"},kvn={class:"px-3 py-2 text-sm text-gray-500"},Svn={class:"px-3 py-2"},Cvn=["onUpdate:modelValue"],Avn={key:1,class:"text-sm font-medium text-gray-900"},Tvn={class:"px-3 py-2"},Evn=["onUpdate:modelValue"],Mvn={key:1,class:"text-sm text-gray-600"},$vn={class:"px-3 py-2 text-right"},Dvn=["onUpdate:modelValue","onChange"],Rvn={key:1,class:"text-sm text-gray-900"},Pvn={class:"px-3 py-2 text-right"},Ivn=["onUpdate:modelValue","onChange"],Ovn={key:1,class:"text-sm font-medium text-gray-900"},Lvn={class:"px-3 py-2 text-right"},Vvn={class:"px-3 py-2 text-right"},Nvn={class:"px-3 py-2 text-center"},jvn=["onUpdate:modelValue"],Fvn={class:"px-3 py-2"},Bvn=["onUpdate:modelValue"],zvn={key:1,class:"text-sm text-gray-600"},Uvn={key:0,class:"px-3 py-2 text-center"},Hvn={key:3,class:"mt-3 flex items-center justify-end gap-6 text-sm"},Xoe={__name:"PhysicalCountTable",props:{modelValue:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!1},title:{type:String,default:"Count Items"},materialityThreshold:{type:Object,default:()=>({qty:0,amount:0,percent:5})},valuationRates:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=J({get:()=>n.modelValue||[],set:S=>r("update:modelValue",S)}),a=J(()=>i.value.filter(S=>S.variance_qty&&S.variance_qty!==0).length),s=J(()=>i.value.filter(S=>!S.variance_qty||S.variance_qty===0).length),o=J(()=>i.value.filter(S=>S.is_material).length),l=J(()=>i.value.reduce((S,C)=>S+(C.variance_qty||0),0)),d=J(()=>i.value.reduce((S,C)=>S+(C.variance_value||0),0));function c(){const S=[...i.value,{item_code:"",item_description:"",barcode:"",batch_no:"",serial_no:"",system_qty:0,counted_qty:0,variance_qty:0,variance_percent:0,variance_value:0,is_material:!1,condition:"",photo_attachment:"",remarks:""}];r("update:modelValue",S)}function f(S){const C=i.value.filter((A,M)=>M!==S);r("update:modelValue",C)}function p(S){const C=[...i.value],A=C[S],M=A.system_qty||0,$=A.counted_qty||0;A.variance_qty=$-M,M!==0?A.variance_percent=($-M)/M*100:A.variance_percent=$!==0?100:0;const R=n.valuationRates[A.item_code]||0;A.variance_value=A.variance_qty*R,A.is_material=m(A),r("update:modelValue",C)}function h(){i.value.forEach((S,C)=>p(C))}function m(S){const{qty:C,amount:A,percent:M}=n.materialityThreshold;return!!(C&&Math.abs(S.variance_qty||0)>=C||A&&Math.abs(S.variance_value||0)>=A||M&&Math.abs(S.variance_percent||0)>=M)}function g(S){return S.is_material?"bg-red-50":S.variance_qty&&S.variance_qty!==0?"bg-yellow-50":""}function v(S){return!S||S===0?"text-gray-600":S>0?"text-green-600":"text-red-600"}function _(S){return{Good:"green",Damaged:"red",Expired:"red",Misplaced:"yellow","Zero Stock":"gray","Not Found":"red"}[S]||"gray"}function x(S){return S==null?"-":new Intl.NumberFormat().format(S)}function w(S){return S==null?"-":`${S.toFixed(1)}%`}function k(S){return S==null?"-":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(S)}return(S,C)=>(T(),P("div",rvn,[u("div",ivn,[u("div",null,[u("h4",avn,E(t.title||"Count Items"),1),u("p",svn,E(i.value.length)+" items  "+E(a.value)+" with variance",1)]),u("div",ovn,[t.readonly?ie("",!0):(T(),he(y(Z),{key:0,size:"sm",variant:"outline",onClick:c},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-1"}),C[0]||(C[0]=W(" Add Item ",-1))]),_:1})),!t.readonly&&i.value.length>0?(T(),he(y(Z),{key:1,size:"sm",variant:"outline",onClick:h},{default:D(()=>[b(y(Q1),{class:"w-4 h-4 mr-1"}),C[1]||(C[1]=W(" Calculate Variances ",-1))]),_:1})):ie("",!0)])]),i.value.length>0?(T(),P("div",lvn,[u("div",uvn,[C[2]||(C[2]=u("p",{class:"text-xs text-blue-600"},"Total Items",-1)),u("p",dvn,E(i.value.length),1)]),u("div",cvn,[C[3]||(C[3]=u("p",{class:"text-xs text-green-600"},"No Variance",-1)),u("p",fvn,E(s.value),1)]),u("div",pvn,[C[4]||(C[4]=u("p",{class:"text-xs text-yellow-600"},"With Variance",-1)),u("p",hvn,E(a.value),1)]),u("div",mvn,[C[5]||(C[5]=u("p",{class:"text-xs text-red-600"},"Material Variance",-1)),u("p",gvn,E(o.value),1)])])):ie("",!0),i.value.length===0?(T(),P("div",vvn,[b(y(Ws),{class:"w-10 h-10 mx-auto mb-2 text-gray-300"}),C[7]||(C[7]=u("p",{class:"text-sm"},"No count items added",-1)),t.readonly?ie("",!0):(T(),he(y(Z),{key:0,size:"sm",variant:"ghost",class:"mt-2",onClick:c},{default:D(()=>[...C[6]||(C[6]=[W(" Add First Item ",-1)])]),_:1}))])):(T(),P("div",yvn,[u("table",bvn,[u("thead",_vn,[u("tr",null,[C[8]||(C[8]=u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-8"},"#",-1)),C[9]||(C[9]=u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Code",-1)),C[10]||(C[10]=u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description",-1)),C[11]||(C[11]=u("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"System Qty",-1)),C[12]||(C[12]=u("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"Counted Qty",-1)),C[13]||(C[13]=u("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"Variance",-1)),C[14]||(C[14]=u("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-20"},"Var %",-1)),C[15]||(C[15]=u("th",{class:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"Condition",-1)),C[16]||(C[16]=u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Remarks",-1)),t.readonly?ie("",!0):(T(),P("th",xvn))])]),u("tbody",wvn,[(T(!0),P(_e,null,we(i.value,(A,M)=>(T(),P("tr",{key:M,class:fe(g(A))},[u("td",kvn,E(M+1),1),u("td",Svn,[t.readonly?(T(),P("span",Avn,E(A.item_code),1)):xe((T(),P("input",{key:0,type:"text","onUpdate:modelValue":$=>A.item_code=$,class:"w-full px-2 py-1 text-sm border rounded focus:ring-1 focus:ring-blue-500",placeholder:"Item code"},null,8,Cvn)),[[Mt,A.item_code]])]),u("td",Tvn,[t.readonly?(T(),P("span",Mvn,E(A.item_description),1)):xe((T(),P("input",{key:0,type:"text","onUpdate:modelValue":$=>A.item_description=$,class:"w-full px-2 py-1 text-sm border rounded focus:ring-1 focus:ring-blue-500",placeholder:"Description"},null,8,Evn)),[[Mt,A.item_description]])]),u("td",$vn,[t.readonly?(T(),P("span",Rvn,E(x(A.system_qty)),1)):xe((T(),P("input",{key:0,type:"number","onUpdate:modelValue":$=>A.system_qty=$,class:"w-full px-2 py-1 text-sm text-right border rounded focus:ring-1 focus:ring-blue-500",onChange:$=>p(M)},null,40,Dvn)),[[Mt,A.system_qty,void 0,{number:!0}]])]),u("td",Pvn,[t.readonly?(T(),P("span",Ovn,E(x(A.counted_qty)),1)):xe((T(),P("input",{key:0,type:"number","onUpdate:modelValue":$=>A.counted_qty=$,class:"w-full px-2 py-1 text-sm text-right border rounded focus:ring-1 focus:ring-blue-500 font-medium",onChange:$=>p(M)},null,40,Ivn)),[[Mt,A.counted_qty,void 0,{number:!0}]])]),u("td",Lvn,[u("span",{class:fe(["text-sm font-medium",v(A.variance_qty)])},E(x(A.variance_qty)),3)]),u("td",Vvn,[u("span",{class:fe(["text-sm",v(A.variance_percent)])},E(w(A.variance_percent)),3),A.is_material?(T(),he(y(nn),{key:0,class:"inline w-4 h-4 ml-1 text-red-500",title:"Material Variance"})):ie("",!0)]),u("td",Nvn,[t.readonly?A.condition?(T(),he(y(Ee),{key:1,variant:_(A.condition),size:"sm"},{default:D(()=>[W(E(A.condition),1)]),_:2},1032,["variant"])):ie("",!0):xe((T(),P("select",{key:0,"onUpdate:modelValue":$=>A.condition=$,class:"px-2 py-1 text-xs border rounded focus:ring-1 focus:ring-blue-500"},[...C[17]||(C[17]=[ur('<option value="">-</option><option value="Good">Good</option><option value="Damaged">Damaged</option><option value="Expired">Expired</option><option value="Misplaced">Misplaced</option><option value="Zero Stock">Zero Stock</option><option value="Not Found">Not Found</option>',7)])],8,jvn)),[[gn,A.condition]])]),u("td",Fvn,[t.readonly?(T(),P("span",zvn,E(A.remarks),1)):xe((T(),P("input",{key:0,type:"text","onUpdate:modelValue":$=>A.remarks=$,class:"w-full px-2 py-1 text-sm border rounded focus:ring-1 focus:ring-blue-500",placeholder:"Remarks"},null,8,Bvn)),[[Mt,A.remarks]])]),t.readonly?ie("",!0):(T(),P("td",Uvn,[b(y(Z),{size:"sm",variant:"ghost",onClick:$=>f(M)},{default:D(()=>[b(y(hi),{class:"w-4 h-4 text-red-500"})]),_:1},8,["onClick"])]))],2))),128))])])])),i.value.length>0?(T(),P("div",Hvn,[u("div",null,[C[18]||(C[18]=u("span",{class:"text-gray-500"},"Total Variance Qty:",-1)),u("span",{class:fe(["ml-2 font-medium",v(l.value)])},E(x(l.value)),3)]),u("div",null,[C[19]||(C[19]=u("span",{class:"text-gray-500"},"Total Variance Value:",-1)),u("span",{class:fe(["ml-2 font-medium",v(d.value)])},E(k(d.value)),3)])])):ie("",!0)]))}},qvn={class:"p-6"},Wvn={key:0,class:"flex items-center justify-center py-12"},Gvn={key:1,class:"text-center py-12"},Yvn={class:"text-gray-500 mb-4"},Kvn={class:"flex items-start justify-between mb-6"},Xvn={class:"flex items-center gap-4"},Zvn={class:"flex items-center gap-3"},Qvn={class:"text-2xl font-bold text-gray-900"},Jvn={class:"text-gray-500 mt-1"},eyn={class:"flex items-center gap-2"},tyn={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},nyn={class:"lg:col-span-2 space-y-6"},ryn={class:"bg-white rounded-lg border p-6"},iyn={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ayn={class:"text-sm font-medium text-gray-900 mt-1"},syn={class:"text-sm font-medium text-gray-900 mt-1"},oyn={class:"text-sm font-medium text-gray-900 mt-1"},lyn={class:"text-sm font-medium text-gray-900 mt-1"},uyn={class:"text-sm font-medium text-gray-900 mt-1"},dyn={class:"text-sm font-medium text-gray-900 mt-1"},cyn={class:"text-sm font-medium text-gray-900 mt-1"},fyn={class:"text-sm font-medium text-gray-900 mt-1"},pyn={class:"bg-white rounded-lg border p-6"},hyn={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},myn={class:"bg-gray-50 rounded-lg p-4"},gyn={class:"text-lg font-semibold text-gray-900 mt-1"},vyn={class:"bg-blue-50 rounded-lg p-4"},yyn={class:"text-lg font-semibold text-blue-700 mt-1"},byn={class:"bg-green-50 rounded-lg p-4"},_yn={class:"text-lg font-semibold text-green-700 mt-1"},xyn={class:"bg-yellow-50 rounded-lg p-4"},wyn={class:"text-lg font-semibold text-yellow-700 mt-1"},kyn={class:"bg-white rounded-lg border p-6"},Syn={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Cyn={class:"text-sm font-medium text-gray-900 mt-1"},Ayn={class:"text-sm font-medium text-gray-900 mt-1"},Tyn={class:"text-sm font-medium text-gray-900 mt-1"},Eyn={class:"text-sm font-medium text-gray-900 mt-1"},Myn={class:"mt-4 pt-4 border-t"},$yn={class:"flex items-center justify-between"},Dyn={class:"bg-white rounded-lg border p-6"},Ryn={class:"bg-white rounded-lg border p-6"},Pyn={class:"flex items-center justify-between mb-4"},Iyn={key:0,class:"text-center py-8 text-gray-500"},Oyn={key:1,class:"space-y-3"},Lyn=["onClick"],Vyn={class:"flex items-center gap-4"},Nyn={class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},jyn={class:"font-medium text-gray-900"},Fyn={class:"text-sm text-gray-500"},Byn={class:"flex items-center gap-3"},zyn={class:"text-right"},Uyn={key:0,class:"text-sm text-orange-600"},Hyn={class:"text-xs text-gray-500"},qyn={key:0,class:"bg-white rounded-lg border p-6"},Wyn=["innerHTML"],Gyn={class:"space-y-6"},Yyn={class:"bg-white rounded-lg border p-6"},Kyn={class:"space-y-4"},Xyn={class:"flex items-center justify-between text-sm mb-1"},Zyn={class:"font-medium"},Qyn={class:"w-full bg-gray-200 rounded-full h-2"},Jyn={class:"pt-4 border-t space-y-3"},e0n={class:"flex items-center justify-between"},t0n={class:"text-sm font-medium"},n0n={class:"flex items-center justify-between"},r0n={class:"text-sm font-medium text-orange-600"},i0n={class:"flex items-center justify-between"},a0n={class:"text-sm font-medium text-yellow-600"},s0n={key:0,class:"bg-white rounded-lg border p-6"},o0n={class:"text-center"},l0n={class:"mt-4 space-y-2 text-sm"},u0n={class:"flex items-center justify-between"},d0n={class:"font-medium"},c0n={class:"flex items-center justify-between"},f0n={class:"font-medium"},p0n={class:"flex items-center justify-between"},h0n={class:"font-medium"},m0n={class:"bg-white rounded-lg border p-6"},g0n={class:"space-y-2"},v0n={class:"bg-white rounded-lg border p-6"},y0n={class:"space-y-4"},b0n={class:"flex gap-3"},_0n={class:"text-xs text-gray-500"},x0n={key:0,class:"flex gap-3"},w0n={class:"text-xs text-gray-500"},k0n={class:"flex gap-3"},S0n={class:"text-xs text-gray-500"},C0n={__name:"AuditPlanDetail",setup(t){const e=gs(),n=xn(),r=Xl(),i=Q(!0),a=Q(null),s=Q(null),o=Q([]),l=Q(null),d=Q(0),c=Q(0),f=J(()=>e.params.id);bt(()=>{p()});function p(){return le(this,null,function*(){i.value=!0,a.value=null;try{s.value=yield et("frappe.client.get",{doctype:"Inventory Audit Plan",name:f.value});const N=yield et("frappe.client.get_list",{doctype:"Stock Take Session",filters:{audit_plan:f.value},fields:["name","session_title","status","count_type","start_datetime","total_items_counted","items_with_variance"],order_by:"creation desc"});o.value=N||[];const O=yield et("frappe.client.get_list",{doctype:"Audit Compliance Scorecard",filters:{audit_plan:f.value},fields:["name","overall_score","grade","completion_rate","accuracy_score","timeliness_score"],limit_page_length:1});l.value=(O==null?void 0:O[0])||null,d.value=yield et("frappe.client.get_count",{doctype:"Variance Reconciliation Case",filters:{audit_plan:f.value}}),c.value=yield et("frappe.client.get_count",{doctype:"Stock Take Issue Log",filters:{audit_plan:f.value,status:["in",["Open","In Progress"]]}})}catch(N){console.error("Error loading plan:",N),a.value=N.message||"Failed to load plan"}finally{i.value=!1}})}const h=J(()=>o.value.filter(N=>N.status==="Completed").length),m=J(()=>o.value.length===0?0:h.value/o.value.length*100),g=J(()=>o.value.reduce((N,O)=>N+(O.total_items_counted||0),0));function v(){n.push("/inventory-audit/plans")}function _(){n.push(`/inventory-audit/plans/${f.value}/edit`)}function x(){n.push(`/inventory-audit/sessions/new?plan=${f.value}`)}function w(N){n.push(`/inventory-audit/sessions/${N}`)}function k(){n.push(`/inventory-audit/variance-cases?plan=${f.value}`)}function S(){n.push(`/inventory-audit/issues?plan=${f.value}`)}function C(){l.value&&n.push(`/inventory-audit/scorecards/${l.value.name}`)}function A(){return le(this,null,function*(){try{yield et("frappe.client.set_value",{doctype:"Inventory Audit Plan",name:f.value,fieldname:{status:"In Progress",actual_start_date:new Date().toISOString().split("T")[0]}}),yield p()}catch(N){console.error("Error starting plan:",N)}})}function M(){return le(this,null,function*(){try{yield r.recalculateScorecard(f.value),yield p()}catch(N){console.error("Error recalculating scorecard:",N)}})}function $(){console.log("Export plan")}function R(N){return{Planned:"blue","In Progress":"yellow",Completed:"green",Closed:"gray",Cancelled:"red",Draft:"gray","Counting Complete":"blue","Pending Review":"yellow",Reviewed:"green"}[N]||"gray"}function I(N){return N>=90?"border-green-500":N>=70?"border-yellow-500":N>=50?"border-orange-500":"border-red-500"}function B(N){return N>=90?"text-green-600":N>=70?"text-yellow-600":N>=50?"text-orange-600":"text-red-600"}function j(N){return{A:"text-green-600",B:"text-blue-600",C:"text-yellow-600",D:"text-orange-600",F:"text-red-600"}[N]||"text-gray-600"}function z(N){return N?new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}function F(N){return N?new Date(N).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function q(N){return N?new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(N):"KES 0"}return(N,O)=>(T(),P("div",qvn,[i.value?(T(),P("div",Wvn,[b(y(ebe),{class:"w-8 h-8"})])):a.value?(T(),P("div",Gvn,[b(y(zr),{class:"w-12 h-12 mx-auto mb-4 text-red-400"}),O[2]||(O[2]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Plan",-1)),u("p",Yvn,E(a.value),1),b(y(Z),{onClick:p},{default:D(()=>[...O[1]||(O[1]=[W("Try Again",-1)])]),_:1})])):s.value?(T(),P(_e,{key:2},[u("div",Kvn,[u("div",Xvn,[b(y(Z),{variant:"ghost",onClick:v},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("div",Zvn,[u("h1",Qvn,E(s.value.plan_title),1),b(y(Ee),{variant:R(s.value.status)},{default:D(()=>[W(E(s.value.status),1)]),_:1},8,["variant"])]),u("p",Jvn,E(s.value.name),1)])]),u("div",eyn,[b(y(Z),{variant:"outline",onClick:$},{default:D(()=>[b(y(bn),{class:"w-4 h-4 mr-2"}),O[3]||(O[3]=W(" Export ",-1))]),_:1}),b(y(Z),{variant:"outline",onClick:_},{default:D(()=>[b(y(vn),{class:"w-4 h-4 mr-2"}),O[4]||(O[4]=W(" Edit ",-1))]),_:1}),s.value.status==="Planned"?(T(),he(y(Z),{key:0,variant:"solid",onClick:A},{default:D(()=>[b(y(Rl),{class:"w-4 h-4 mr-2"}),O[5]||(O[5]=W(" Start Audit ",-1))]),_:1})):ie("",!0)])]),u("div",tyn,[u("div",nyn,[u("div",ryn,[O[14]||(O[14]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Overview",-1)),u("div",iyn,[u("div",null,[O[6]||(O[6]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Period",-1)),u("p",ayn,E(s.value.audit_period),1)]),u("div",null,[O[7]||(O[7]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Scope",-1)),u("p",syn,E(s.value.audit_scope),1)]),u("div",null,[O[8]||(O[8]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Branch",-1)),u("p",oyn,E(s.value.branch||"-"),1)]),u("div",null,[O[9]||(O[9]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Warehouse",-1)),u("p",lyn,E(s.value.warehouse||"-"),1)]),u("div",null,[O[10]||(O[10]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Lead Auditor",-1)),u("p",uyn,E(s.value.lead_auditor_name||s.value.lead_auditor||"-"),1)]),u("div",null,[O[11]||(O[11]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Sampling Strategy",-1)),u("p",dyn,E(s.value.sampling_strategy||"-"),1)]),u("div",null,[O[12]||(O[12]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Year",-1)),u("p",cyn,E(s.value.audit_year||"-"),1)]),u("div",null,[O[13]||(O[13]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"SLA Days",-1)),u("p",fyn,E(s.value.sla_days||"-")+" days",1)])])]),u("div",pyn,[O[19]||(O[19]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Materiality Thresholds",-1)),u("div",hyn,[u("div",myn,[O[15]||(O[15]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Type",-1)),u("p",gyn,E(s.value.materiality_type||"-"),1)]),u("div",vyn,[O[16]||(O[16]=u("p",{class:"text-xs text-blue-600 uppercase tracking-wide"},"Quantity Threshold",-1)),u("p",yyn,E(s.value.materiality_threshold_qty||0),1)]),u("div",byn,[O[17]||(O[17]=u("p",{class:"text-xs text-green-600 uppercase tracking-wide"},"Amount Threshold",-1)),u("p",_yn,E(q(s.value.materiality_threshold_amount)),1)]),u("div",xyn,[O[18]||(O[18]=u("p",{class:"text-xs text-yellow-600 uppercase tracking-wide"},"Percent Threshold",-1)),u("p",wyn,E(s.value.materiality_threshold_percent||0)+"%",1)])])]),u("div",kyn,[O[27]||(O[27]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",Syn,[u("div",null,[O[20]||(O[20]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Planned Start",-1)),u("p",Cyn,E(z(s.value.planned_start_date)),1)]),u("div",null,[O[21]||(O[21]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Planned End",-1)),u("p",Ayn,E(z(s.value.planned_end_date)),1)]),u("div",null,[O[22]||(O[22]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Actual Start",-1)),u("p",Tyn,E(z(s.value.actual_start_date)||"-"),1)]),u("div",null,[O[23]||(O[23]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Actual End",-1)),u("p",Eyn,E(z(s.value.actual_end_date)||"-"),1)])]),u("div",Myn,[u("div",$yn,[u("div",null,[O[24]||(O[24]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"SLA Due Date",-1)),u("p",{class:fe(["text-sm font-medium",s.value.is_overdue?"text-red-600":"text-gray-900"])},E(z(s.value.sla_due_date)),3)]),s.value.is_overdue?(T(),he(y(Ee),{key:0,variant:"red"},{default:D(()=>[b(y(nn),{class:"w-3 h-3 mr-1"}),O[25]||(O[25]=W(" Overdue ",-1))]),_:1})):s.value.sla_due_date?(T(),he(y(Ee),{key:1,variant:"green"},{default:D(()=>[...O[26]||(O[26]=[W("On Track",-1)])]),_:1})):ie("",!0)])])]),u("div",Dyn,[b(y(Koe),{modelValue:s.value.team_members,"onUpdate:modelValue":O[0]||(O[0]=V=>s.value.team_members=V),title:"Audit Team",readonly:""},null,8,["modelValue"])]),u("div",Ryn,[u("div",Pyn,[O[29]||(O[29]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Stock Take Sessions",-1)),b(y(Z),{size:"sm",variant:"outline",onClick:x},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-1"}),O[28]||(O[28]=W(" New Session ",-1))]),_:1})]),o.value.length===0?(T(),P("div",Iyn,[b(y(kr),{class:"w-10 h-10 mx-auto mb-2 text-gray-300"}),O[30]||(O[30]=u("p",null,"No sessions created yet",-1))])):(T(),P("div",Oyn,[(T(!0),P(_e,null,we(o.value,V=>(T(),P("div",{key:V.name,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors",onClick:L=>w(V.name)},[u("div",Vyn,[u("div",Nyn,[b(y(Ws),{class:"w-5 h-5 text-blue-600"})]),u("div",null,[u("p",jyn,E(V.session_title),1),u("p",Fyn,E(V.count_type)+"  "+E(V.total_items_counted||0)+" items",1)])]),u("div",Byn,[u("div",zyn,[V.items_with_variance?(T(),P("p",Uyn,E(V.items_with_variance)+" variances ",1)):ie("",!0),u("p",Hyn,E(z(V.start_datetime)),1)]),b(y(Ee),{variant:R(V.status)},{default:D(()=>[W(E(V.status),1)]),_:2},1032,["variant"]),b(y(tr),{class:"w-5 h-5 text-gray-400"})])],8,Lyn))),128))]))]),s.value.notes?(T(),P("div",qyn,[O[31]||(O[31]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),u("div",{class:"prose prose-sm max-w-none",innerHTML:s.value.notes},null,8,Wyn)])):ie("",!0)]),u("div",Gyn,[u("div",Yyn,[O[36]||(O[36]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Progress",-1)),u("div",Kyn,[u("div",null,[u("div",Xyn,[O[32]||(O[32]=u("span",{class:"text-gray-500"},"Sessions Completed",-1)),u("span",Zyn,E(h.value)+"/"+E(o.value.length),1)]),u("div",Qyn,[u("div",{class:"bg-blue-500 h-2 rounded-full transition-all",style:nt({width:`${m.value}%`})},null,4)])]),u("div",Jyn,[u("div",e0n,[O[33]||(O[33]=u("span",{class:"text-sm text-gray-500"},"Total Items Counted",-1)),u("span",t0n,E(g.value),1)]),u("div",n0n,[O[34]||(O[34]=u("span",{class:"text-sm text-gray-500"},"Variance Cases",-1)),u("span",r0n,E(d.value),1)]),u("div",i0n,[O[35]||(O[35]=u("span",{class:"text-sm text-gray-500"},"Open Issues",-1)),u("span",a0n,E(c.value),1)])])])]),l.value?(T(),P("div",s0n,[O[41]||(O[41]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Compliance Score",-1)),u("div",o0n,[u("div",{class:fe(["inline-flex items-center justify-center w-24 h-24 rounded-full border-4",I(l.value.overall_score)])},[u("div",null,[u("p",{class:fe(["text-2xl font-bold",B(l.value.overall_score)])},E(Math.round(l.value.overall_score||0))+"% ",3),u("p",{class:fe(["text-lg font-bold",j(l.value.grade)])},E(l.value.grade),3)])],2),u("div",l0n,[u("div",u0n,[O[37]||(O[37]=u("span",{class:"text-gray-500"},"Completion Rate",-1)),u("span",d0n,E(l.value.completion_rate||0)+"%",1)]),u("div",c0n,[O[38]||(O[38]=u("span",{class:"text-gray-500"},"Accuracy Score",-1)),u("span",f0n,E(l.value.accuracy_score||0)+"%",1)]),u("div",p0n,[O[39]||(O[39]=u("span",{class:"text-gray-500"},"Timeliness",-1)),u("span",h0n,E(l.value.timeliness_score||0)+"%",1)])]),b(y(Z),{size:"sm",variant:"ghost",class:"mt-4",onClick:C},{default:D(()=>[...O[40]||(O[40]=[W(" View Full Scorecard ",-1)])]),_:1})])])):ie("",!0),u("div",m0n,[O[46]||(O[46]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Quick Actions",-1)),u("div",g0n,[b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:x},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),O[42]||(O[42]=W(" Add Session ",-1))]),_:1}),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:k},{default:D(()=>[b(y(nn),{class:"w-4 h-4 mr-2"}),O[43]||(O[43]=W(" View Variance Cases ",-1))]),_:1}),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:S},{default:D(()=>[b(y(Yce),{class:"w-4 h-4 mr-2"}),O[44]||(O[44]=W(" View Issues ",-1))]),_:1}),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:M},{default:D(()=>[b(y(hn),{class:"w-4 h-4 mr-2"}),O[45]||(O[45]=W(" Recalculate Score ",-1))]),_:1})])]),u("div",v0n,[O[53]||(O[53]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Recent Activity",-1)),u("div",y0n,[u("div",b0n,[O[48]||(O[48]=u("div",{class:"w-2 h-2 mt-2 rounded-full bg-blue-500"},null,-1)),u("div",null,[O[47]||(O[47]=u("p",{class:"text-sm text-gray-900"},"Plan created",-1)),u("p",_0n,E(F(s.value.creation)),1)])]),s.value.actual_start_date?(T(),P("div",x0n,[O[50]||(O[50]=u("div",{class:"w-2 h-2 mt-2 rounded-full bg-green-500"},null,-1)),u("div",null,[O[49]||(O[49]=u("p",{class:"text-sm text-gray-900"},"Audit started",-1)),u("p",w0n,E(z(s.value.actual_start_date)),1)])])):ie("",!0),u("div",k0n,[O[52]||(O[52]=u("div",{class:"w-2 h-2 mt-2 rounded-full bg-gray-300"},null,-1)),u("div",null,[O[51]||(O[51]=u("p",{class:"text-sm text-gray-900"},"Last modified",-1)),u("p",S0n,E(F(s.value.modified)),1)])])])])])])],64)):ie("",!0)]))}},A0n={class:"p-6"},T0n={class:"flex items-center justify-between mb-6"},E0n={class:"flex items-center gap-4"},M0n={class:"text-2xl font-bold text-gray-900"},$0n={class:"text-gray-500 mt-1"},D0n={class:"flex items-center gap-2"},R0n={class:"max-w-4xl"},P0n={class:"space-y-6"},I0n={class:"bg-white rounded-lg border p-6"},O0n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},L0n={class:"md:col-span-2"},V0n={class:"bg-white rounded-lg border p-6"},N0n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},j0n={class:"bg-white rounded-lg border p-6"},F0n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},B0n={class:"bg-white rounded-lg border p-6"},z0n={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},U0n={class:"bg-white rounded-lg border p-6"},H0n={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},q0n={class:"bg-white rounded-lg border p-6"},W0n={class:"bg-white rounded-lg border p-6"},G0n={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},pW={__name:"AuditPlanForm",setup(t){const e=gs(),n=xn();Xl();const r=Q(!1),i=Q([]),a=J(()=>e.params.id&&e.params.id!=="new"),s=Q({plan_title:"",status:"Planned",audit_period:"Monthly",audit_scope:"Cycle Count",audit_year:new Date().getFullYear(),branch:"",warehouse:"",lead_auditor:"",sampling_strategy:"",materiality_type:"Combined",materiality_threshold_qty:0,materiality_threshold_amount:0,materiality_threshold_percent:5,planned_start_date:"",planned_end_date:"",sla_days:7,sla_due_date:"",team_members:[],notes:""});bt(()=>le(this,null,function*(){yield o(),a.value&&(yield l())}));function o(){return le(this,null,function*(){try{const v=yield et("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});i.value=v.map(_=>({label:_.full_name||_.name,value:_.name}))}catch(v){console.error("Error loading users:",v)}})}function l(){return le(this,null,function*(){try{const v=yield et("frappe.client.get",{doctype:"Inventory Audit Plan",name:e.params.id});s.value={plan_title:v.plan_title||"",status:v.status||"Planned",audit_period:v.audit_period||"Monthly",audit_scope:v.audit_scope||"Cycle Count",audit_year:v.audit_year||new Date().getFullYear(),branch:v.branch||"",warehouse:v.warehouse||"",lead_auditor:v.lead_auditor||"",sampling_strategy:v.sampling_strategy||"",materiality_type:v.materiality_type||"Combined",materiality_threshold_qty:v.materiality_threshold_qty||0,materiality_threshold_amount:v.materiality_threshold_amount||0,materiality_threshold_percent:v.materiality_threshold_percent||5,planned_start_date:v.planned_start_date||"",planned_end_date:v.planned_end_date||"",sla_days:v.sla_days||7,sla_due_date:v.sla_due_date||"",team_members:v.team_members||[],notes:v.notes||""}}catch(v){console.error("Error loading plan:",v)}})}function d(){return le(this,null,function*(){if(!s.value.plan_title){alert("Plan title is required");return}if(!s.value.audit_period){alert("Audit period is required");return}if(!s.value.audit_scope){alert("Audit scope is required");return}r.value=!0;try{if(a.value)yield et("frappe.client.set_value",{doctype:"Inventory Audit Plan",name:e.params.id,fieldname:s.value}),n.push(`/inventory-audit/plans/${e.params.id}`);else{const v=yield et("frappe.client.insert",{doc:me({doctype:"Inventory Audit Plan"},s.value)});n.push(`/inventory-audit/plans/${v.name}`)}}catch(v){console.error("Error saving plan:",v),alert("Error saving plan: "+v.message)}finally{r.value=!1}})}function c(){a.value?n.push(`/inventory-audit/plans/${e.params.id}`):n.push("/inventory-audit/plans")}const f=[{label:"Planned",value:"Planned"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Closed",value:"Closed"},{label:"Cancelled",value:"Cancelled"}],p=[{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Ad Hoc",value:"Ad Hoc"}],h=[{label:"Cycle Count",value:"Cycle Count"},{label:"Full Count",value:"Full Count"},{label:"Sales Returns",value:"Sales Returns"},{label:"Damaged Stock",value:"Damaged Stock"},{label:"GRN Audit",value:"GRN Audit"},{label:"Dispatch Audit",value:"Dispatch Audit"}],m=[{label:"ABC Analysis",value:"ABC Analysis"},{label:"Velocity Based",value:"Velocity Based"},{label:"Risk Based",value:"Risk Based"},{label:"Random",value:"Random"},{label:"Full Population",value:"Full Population"}],g=[{label:"Quantity",value:"Quantity"},{label:"Amount",value:"Amount"},{label:"Percentage",value:"Percentage"},{label:"Combined",value:"Combined"}];return(v,_)=>(T(),P("div",A0n,[u("div",T0n,[u("div",E0n,[b(y(Z),{variant:"ghost",onClick:c},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",M0n,E(a.value?"Edit Audit Plan":"New Audit Plan"),1),u("p",$0n,E(a.value?`Editing ${y(e).params.id}`:"Create a new inventory audit plan"),1)])]),u("div",D0n,[b(y(Z),{variant:"outline",onClick:c},{default:D(()=>[..._[19]||(_[19]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:d,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(a.value?"Save Changes":"Create Plan"),1)]),_:1},8,["loading"])])]),u("div",R0n,[u("div",P0n,[u("div",I0n,[_[25]||(_[25]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),u("div",O0n,[u("div",L0n,[_[20]||(_[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Plan Title "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"text",modelValue:s.value.plan_title,"onUpdate:modelValue":_[0]||(_[0]=x=>s.value.plan_title=x),placeholder:"e.g., Q4 2025 Warehouse A Cycle Count"},null,8,["modelValue"])]),u("div",null,[_[21]||(_[21]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Period "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:s.value.audit_period,"onUpdate:modelValue":_[1]||(_[1]=x=>s.value.audit_period=x),options:p},null,8,["modelValue"])]),u("div",null,[_[22]||(_[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Scope "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:s.value.audit_scope,"onUpdate:modelValue":_[2]||(_[2]=x=>s.value.audit_scope=x),options:h},null,8,["modelValue"])]),u("div",null,[_[23]||(_[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(y(ge),{type:"select",modelValue:s.value.status,"onUpdate:modelValue":_[3]||(_[3]=x=>s.value.status=x),options:f},null,8,["modelValue"])]),u("div",null,[_[24]||(_[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Year",-1)),b(y(ge),{type:"number",modelValue:s.value.audit_year,"onUpdate:modelValue":_[4]||(_[4]=x=>s.value.audit_year=x),placeholder:"2025"},null,8,["modelValue"])])])]),u("div",V0n,[_[28]||(_[28]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Location",-1)),u("div",N0n,[u("div",null,[_[26]||(_[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Branch",-1)),b(y(ge),{type:"text",modelValue:s.value.branch,"onUpdate:modelValue":_[5]||(_[5]=x=>s.value.branch=x),placeholder:"e.g., Nairobi HQ"},null,8,["modelValue"])]),u("div",null,[_[27]||(_[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),b(y(ge),{type:"text",modelValue:s.value.warehouse,"onUpdate:modelValue":_[6]||(_[6]=x=>s.value.warehouse=x),placeholder:"e.g., Main Warehouse"},null,8,["modelValue"])])])]),u("div",j0n,[_[31]||(_[31]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Audit Configuration",-1)),u("div",F0n,[u("div",null,[_[29]||(_[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Lead Auditor",-1)),b(y(ge),{type:"autocomplete",modelValue:s.value.lead_auditor,"onUpdate:modelValue":_[7]||(_[7]=x=>s.value.lead_auditor=x),options:i.value,placeholder:"Select lead auditor"},null,8,["modelValue","options"])]),u("div",null,[_[30]||(_[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sampling Strategy",-1)),b(y(ge),{type:"select",modelValue:s.value.sampling_strategy,"onUpdate:modelValue":_[8]||(_[8]=x=>s.value.sampling_strategy=x),options:m},null,8,["modelValue"])])])]),u("div",B0n,[_[36]||(_[36]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Materiality Thresholds",-1)),_[37]||(_[37]=u("p",{class:"text-sm text-gray-500 mb-4"}," Define thresholds for identifying material variances during stock takes. ",-1)),u("div",z0n,[u("div",null,[_[32]||(_[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Materiality Type",-1)),b(y(ge),{type:"select",modelValue:s.value.materiality_type,"onUpdate:modelValue":_[9]||(_[9]=x=>s.value.materiality_type=x),options:g},null,8,["modelValue"])]),u("div",null,[_[33]||(_[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quantity Threshold",-1)),b(y(ge),{type:"number",modelValue:s.value.materiality_threshold_qty,"onUpdate:modelValue":_[10]||(_[10]=x=>s.value.materiality_threshold_qty=x),placeholder:"0"},null,8,["modelValue"])]),u("div",null,[_[34]||(_[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Amount Threshold (KES)",-1)),b(y(ge),{type:"number",modelValue:s.value.materiality_threshold_amount,"onUpdate:modelValue":_[11]||(_[11]=x=>s.value.materiality_threshold_amount=x),placeholder:"0"},null,8,["modelValue"])]),u("div",null,[_[35]||(_[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Percent Threshold (%)",-1)),b(y(ge),{type:"number",modelValue:s.value.materiality_threshold_percent,"onUpdate:modelValue":_[12]||(_[12]=x=>s.value.materiality_threshold_percent=x),placeholder:"5"},null,8,["modelValue"])])])]),u("div",U0n,[_[42]||(_[42]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",H0n,[u("div",null,[_[38]||(_[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Planned Start Date",-1)),b(y(ge),{type:"date",modelValue:s.value.planned_start_date,"onUpdate:modelValue":_[13]||(_[13]=x=>s.value.planned_start_date=x)},null,8,["modelValue"])]),u("div",null,[_[39]||(_[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Planned End Date",-1)),b(y(ge),{type:"date",modelValue:s.value.planned_end_date,"onUpdate:modelValue":_[14]||(_[14]=x=>s.value.planned_end_date=x)},null,8,["modelValue"])]),u("div",null,[_[40]||(_[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"SLA Days",-1)),b(y(ge),{type:"number",modelValue:s.value.sla_days,"onUpdate:modelValue":_[15]||(_[15]=x=>s.value.sla_days=x),placeholder:"e.g., 7"},null,8,["modelValue"])]),u("div",null,[_[41]||(_[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"SLA Due Date",-1)),b(y(ge),{type:"date",modelValue:s.value.sla_due_date,"onUpdate:modelValue":_[16]||(_[16]=x=>s.value.sla_due_date=x)},null,8,["modelValue"])])])]),u("div",q0n,[b(y(Koe),{modelValue:s.value.team_members,"onUpdate:modelValue":_[17]||(_[17]=x=>s.value.team_members=x),title:"Audit Team Members"},null,8,["modelValue"])]),u("div",W0n,[_[43]||(_[43]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),b(y(ge),{type:"textarea",modelValue:s.value.notes,"onUpdate:modelValue":_[18]||(_[18]=x=>s.value.notes=x),placeholder:"Additional notes or instructions for this audit plan...",rows:4},null,8,["modelValue"])])]),u("div",G0n,[b(y(Z),{variant:"outline",onClick:c},{default:D(()=>[..._[44]||(_[44]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:d,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(a.value?"Save Changes":"Create Plan"),1)]),_:1},8,["loading"])])])]))}},Y0n={class:"p-6"},K0n={class:"flex justify-between items-center mb-6"},X0n={class:"flex gap-2"},Z0n={class:"bg-white rounded-lg border p-4 mb-6"},Q0n={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},J0n=["value"],e1n={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},t1n={class:"bg-white rounded-lg border p-4"},n1n={class:"text-2xl font-bold"},r1n={class:"bg-white rounded-lg border p-4"},i1n={class:"text-2xl font-bold text-yellow-600"},a1n={class:"bg-white rounded-lg border p-4"},s1n={class:"text-2xl font-bold text-orange-600"},o1n={class:"bg-white rounded-lg border p-4"},l1n={class:"text-2xl font-bold text-blue-600"},u1n={class:"bg-white rounded-lg border p-4"},d1n={class:"text-2xl font-bold text-red-600"},c1n={class:"bg-white rounded-lg border shadow-sm"},f1n={key:0,class:"divide-y divide-gray-200"},p1n=["onClick"],h1n={class:"flex items-start justify-between"},m1n={class:"flex-1"},g1n={class:"flex items-center gap-3 mb-2"},v1n={class:"font-medium text-gray-900"},y1n={class:"text-sm text-gray-600 mb-2"},b1n={class:"flex items-center gap-6 text-sm text-gray-500"},_1n={key:0,class:"flex items-center gap-1"},x1n={key:1,class:"flex items-center gap-1"},w1n={class:"flex items-center gap-6 mt-3 text-sm"},k1n={class:"text-gray-500"},S1n={key:0,class:"text-orange-600"},C1n={key:1,class:"text-red-600"},A1n={key:2,class:"text-red-700 font-medium"},T1n={class:"flex items-center gap-4 mt-3"},E1n={class:"text-right"},M1n={key:1,class:"text-sm text-gray-500"},$1n={key:1,class:"p-12 text-center text-gray-500"},D1n={key:2,class:"px-4 py-3 border-t flex items-center justify-between"},R1n={class:"text-sm text-gray-500"},P1n={class:"flex gap-2"},I1n={__name:"StockTakeSessionList",setup(t){const e=xn(),n=Xl(),r=Q(!1),i=Q({status:"",count_type:"",audit_plan:"",warehouse:""}),a=J(()=>n.sessions),s=J(()=>n.sessionsTotalCount),o=J(()=>n.sessionsPage),l=J(()=>n.sessionsPageSize),d=J(()=>Math.ceil(s.value/l.value)),c=J(()=>a.value.filter(M=>M.status==="Completed"&&(!M.team_signoff||!M.supervisor_signoff||!M.auditor_signoff)).length),f=J(()=>a.value.reduce((M,$)=>M+($.total_items_counted||0),0)),p=J(()=>a.value.reduce((M,$)=>M+($.items_with_variance||0),0));bt(()=>le(this,null,function*(){yield h()}));function h(){return le(this,null,function*(){r.value=!0;try{const M=me({},i.value);Object.keys(M).forEach($=>{M[$]||delete M[$]}),yield n.loadSessions(M,o.value,l.value)}finally{r.value=!1}})}function m(){return le(this,null,function*(){i.value={status:"",count_type:"",audit_plan:"",warehouse:""},yield h()})}let g=null;function v(){clearTimeout(g),g=setTimeout(()=>h(),300)}function _(M){return le(this,null,function*(){yield n.loadSessions(i.value,M,l.value)})}function x(){e.push("/inventory-audit/sessions/new")}function w(M){e.push(`/inventory-audit/sessions/${M}`)}function k(M){return{Planned:"blue","In Progress":"yellow",Completed:"green",Cancelled:"red"}[M]||"gray"}function S(M){return M>=90?"text-green-600":M>=70?"text-yellow-600":"text-red-600"}function C(M){return M?new Date(M).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function A(M){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(M||0)}return(M,$)=>(T(),P("div",Y0n,[u("div",K0n,[$[7]||($[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Stock Take Sessions"),u("p",{class:"text-gray-600"},"Manage physical count sessions and count teams")],-1)),u("div",X0n,[b(y(Z),{onClick:m,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(y(Z),{onClick:x},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),$[6]||($[6]=W(" New Session ",-1))]),_:1})])]),u("div",Z0n,[u("div",Q0n,[u("div",null,[$[9]||($[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),xe(u("select",{"onUpdate:modelValue":$[0]||($[0]=R=>i.value.status=R),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:h},[...$[8]||($[8]=[ur('<option value="">All Statuses</option><option value="Planned">Planned</option><option value="In Progress">In Progress</option><option value="Completed">Completed</option><option value="Cancelled">Cancelled</option>',5)])],544),[[gn,i.value.status]])]),u("div",null,[$[11]||($[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Count Type",-1)),xe(u("select",{"onUpdate:modelValue":$[1]||($[1]=R=>i.value.count_type=R),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:h},[$[10]||($[10]=u("option",{value:""},"All Types",-1)),(T(!0),P(_e,null,we(y(n).countTypeOptions,R=>(T(),P("option",{key:R.value,value:R.value},E(R.label),9,J0n))),128))],544),[[gn,i.value.count_type]])]),u("div",null,[$[12]||($[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Plan",-1)),xe(u("input",{"onUpdate:modelValue":$[2]||($[2]=R=>i.value.audit_plan=R),type:"text",placeholder:"Filter by plan",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:v},null,544),[[Mt,i.value.audit_plan]])]),u("div",null,[$[13]||($[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),xe(u("input",{"onUpdate:modelValue":$[3]||($[3]=R=>i.value.warehouse=R),type:"text",placeholder:"Filter by warehouse",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:v},null,544),[[Mt,i.value.warehouse]])])])]),u("div",e1n,[u("div",t1n,[$[14]||($[14]=u("p",{class:"text-sm text-gray-500"},"Total Sessions",-1)),u("p",n1n,E(s.value),1)]),u("div",r1n,[$[15]||($[15]=u("p",{class:"text-sm text-gray-500"},"In Progress",-1)),u("p",i1n,E(a.value.filter(R=>R.status==="In Progress").length),1)]),u("div",a1n,[$[16]||($[16]=u("p",{class:"text-sm text-gray-500"},"Pending Signoff",-1)),u("p",s1n,E(c.value),1)]),u("div",o1n,[$[17]||($[17]=u("p",{class:"text-sm text-gray-500"},"Total Items Counted",-1)),u("p",l1n,E(f.value),1)]),u("div",u1n,[$[18]||($[18]=u("p",{class:"text-sm text-gray-500"},"Items w/ Variance",-1)),u("p",d1n,E(p.value),1)])]),u("div",c1n,[a.value.length>0?(T(),P("div",f1n,[(T(!0),P(_e,null,we(a.value,R=>(T(),P("div",{key:R.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:I=>w(R.name)},[u("div",h1n,[u("div",m1n,[u("div",g1n,[u("h4",v1n,E(R.session_title),1),b(y(Ee),{variant:k(R.status)},{default:D(()=>[W(E(R.status),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:"gray"},{default:D(()=>[W(E(R.count_type),1)]),_:2},1024)]),u("p",y1n,E(R.session_id),1),u("div",b1n,[R.warehouse?(T(),P("span",_1n,[b(y(nb),{class:"w-4 h-4"}),W(" "+E(R.warehouse),1)])):ie("",!0),R.start_datetime?(T(),P("span",x1n,[b(y(Ii),{class:"w-4 h-4"}),W(" "+E(C(R.start_datetime)),1)])):ie("",!0)]),u("div",w1n,[u("span",k1n,[$[19]||($[19]=W(" Items: ",-1)),u("strong",null,E(R.total_items_counted||0),1)]),R.items_with_variance?(T(),P("span",S1n,[$[20]||($[20]=W(" Variances: ",-1)),u("strong",null,E(R.items_with_variance),1)])):ie("",!0),R.total_variance_value?(T(),P("span",C1n,[$[21]||($[21]=W(" Value: ",-1)),u("strong",null,E(A(R.total_variance_value)),1)])):ie("",!0),R.materiality_breaches?(T(),P("span",A1n,[b(y(nn),{class:"w-4 h-4 inline"}),W(" "+E(R.materiality_breaches)+" material ",1)])):ie("",!0)]),u("div",T1n,[u("span",{class:fe(["text-xs px-2 py-1 rounded-full",R.team_signoff?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},E(R.team_signoff?"":"")+" Team ",3),u("span",{class:fe(["text-xs px-2 py-1 rounded-full",R.supervisor_signoff?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},E(R.supervisor_signoff?"":"")+" Supervisor ",3),u("span",{class:fe(["text-xs px-2 py-1 rounded-full",R.auditor_signoff?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},E(R.auditor_signoff?"":"")+" Auditor ",3)])]),u("div",E1n,[R.session_compliance_score?(T(),P("p",{key:0,class:fe(["text-lg font-bold",S(R.session_compliance_score)])},E(R.session_compliance_score)+"% ",3)):ie("",!0),R.variance_rate?(T(),P("p",M1n," Variance: "+E(R.variance_rate)+"% ",1)):ie("",!0)])])],8,p1n))),128))])):r.value?ie("",!0):(T(),P("div",$1n,[b(y(Ws),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),$[23]||($[23]=u("p",null,"No stock take sessions found",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-2",onClick:x},{default:D(()=>[...$[22]||($[22]=[W(" Start First Session ",-1)])]),_:1})])),d.value>1?(T(),P("div",D1n,[u("p",R1n," Showing "+E((o.value-1)*l.value+1)+" - "+E(Math.min(o.value*l.value,s.value))+" of "+E(s.value),1),u("div",P1n,[b(y(Z),{variant:"outline",size:"sm",disabled:o.value===1,onClick:$[4]||($[4]=R=>_(o.value-1))},{default:D(()=>[...$[24]||($[24]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",size:"sm",disabled:o.value===d.value,onClick:$[5]||($[5]=R=>_(o.value+1))},{default:D(()=>[...$[25]||($[25]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):ie("",!0)])]))}},O1n={class:"p-6"},L1n={class:"flex items-center justify-between mb-6"},V1n={class:"flex items-center gap-4"},N1n={class:"text-2xl font-bold text-gray-900"},j1n={class:"flex items-center gap-2"},F1n={key:0,class:"flex items-center justify-center py-20"},B1n={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},z1n={class:"lg:col-span-2 space-y-6"},U1n={class:"bg-white rounded-lg border p-6"},H1n={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},q1n={class:"font-medium"},W1n={class:"font-medium"},G1n={class:"font-medium"},Y1n={class:"font-medium"},K1n={class:"font-medium"},X1n={class:"font-medium"},Z1n={class:"font-medium"},Q1n={class:"font-medium text-green-600"},J1n={key:0,class:"bg-white rounded-lg border p-6"},ebn={class:"flex items-center justify-between"},tbn={class:"flex items-center gap-3"},nbn={class:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center"},rbn={class:"font-medium"},ibn={class:"bg-white rounded-lg border p-6"},abn={key:1,class:"bg-white rounded-lg border p-6"},sbn={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},obn={class:"p-4 bg-yellow-50 rounded-lg border border-yellow-200"},lbn={class:"flex items-center gap-2 mb-2"},ubn={class:"text-2xl font-bold text-yellow-700"},dbn={class:"p-4 bg-red-50 rounded-lg border border-red-200"},cbn={class:"flex items-center gap-2 mb-2"},fbn={class:"text-2xl font-bold text-red-700"},pbn={class:"p-4 bg-green-50 rounded-lg border border-green-200"},hbn={class:"flex items-center gap-2 mb-2"},mbn={class:"text-2xl font-bold text-green-700"},gbn={class:"p-4 bg-purple-50 rounded-lg border border-purple-200"},vbn={class:"flex items-center gap-2 mb-2"},ybn={class:"text-2xl font-bold text-purple-700"},bbn={key:0,class:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg"},_bn={class:"flex items-start gap-3"},xbn={class:"font-medium text-red-800"},wbn={class:"bg-white rounded-lg border p-6"},kbn={class:"space-y-6"},Sbn={class:"bg-white rounded-lg border p-6"},Cbn={class:"space-y-4"},Abn={class:"flex items-center justify-between"},Tbn={class:"font-medium"},Ebn={class:"w-full bg-gray-200 rounded-full h-2"},Mbn={class:"pt-2 space-y-3"},$bn={class:"flex items-center justify-between"},Dbn={class:"font-medium text-yellow-600"},Rbn={class:"flex items-center justify-between"},Pbn={class:"font-medium text-green-600"},Ibn={class:"bg-white rounded-lg border p-6"},Obn={class:"space-y-4"},Lbn={class:"flex gap-3"},Vbn={class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},Nbn={class:"text-sm text-gray-500"},jbn={key:0,class:"flex gap-3"},Fbn={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},Bbn={class:"text-sm text-gray-500"},zbn={key:1,class:"flex gap-3"},Ubn={class:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0"},Hbn={class:"text-sm text-gray-500"},qbn={key:0,class:"bg-white rounded-lg border p-6"},Wbn={class:"space-y-3"},Gbn=["onClick"],Ybn={class:"flex items-center justify-between mb-1"},Kbn={class:"font-medium text-sm"},Xbn={class:"text-sm text-gray-500"},Zbn={class:"bg-white rounded-lg border p-6"},Qbn={class:"space-y-2"},Jbn={__name:"StockTakeSessionDetail",setup(t){const e=gs(),n=xn(),r=Q(!0),i=Q(null),a=Q([]);bt(()=>le(this,null,function*(){yield s(),yield o()}));function s(){return le(this,null,function*(){r.value=!0;try{const F=yield et("frappe.client.get",{doctype:"Stock Take Session",name:e.params.id});i.value=F}catch(F){console.error("Error loading session:",F)}finally{r.value=!1}})}function o(){return le(this,null,function*(){try{const F=yield et("frappe.client.get_list",{doctype:"Inventory Variance Case",filters:{stock_take_session:e.params.id},fields:["name","item_code","item_name","status","variance_qty","variance_value"]});a.value=F}catch(F){console.error("Error loading variance cases:",F)}})}const l=J(()=>{var q;return{Scheduled:"subtle","In Progress":"outline","Pending Review":"warning",Completed:"success",Approved:"success",Cancelled:"subtle"}[(q=i.value)==null?void 0:q.status]||"subtle"}),d=J(()=>{var F,q;return((q=(F=i.value)==null?void 0:F.count_items)==null?void 0:q.length)||0}),c=J(()=>{var F;return(F=i.value)!=null&&F.count_items?i.value.count_items.filter(q=>q.counted_qty!==null&&q.counted_qty!==void 0).length:0}),f=J(()=>d.value===0?0:Math.round(c.value/d.value*100)),p=J(()=>{var F;return(F=i.value)!=null&&F.count_items?i.value.count_items.filter(q=>q.condition&&q.condition!=="Good").length:0}),h=J(()=>{var q,N;if(c.value===0)return 100;const F=((N=(q=i.value)==null?void 0:q.count_items)==null?void 0:N.filter(O=>O.variance_qty===0).length)||0;return Math.round(F/c.value*100)}),m=J(()=>{var q;if(!((q=i.value)!=null&&q.count_items))return{totalVariances:0,shortages:0,overages:0,netVarianceValue:0,materialVariances:0};const F=i.value.count_items.filter(N=>N.variance_qty!==0);return{totalVariances:F.length,shortages:F.filter(N=>(N.variance_qty||0)<0).length,overages:F.filter(N=>(N.variance_qty||0)>0).length,netVarianceValue:F.reduce((N,O)=>N+(O.variance_value||0),0),materialVariances:F.filter(N=>N.is_material).length}});function g(F){return F?new Date(F).toLocaleDateString():"-"}function v(F){return F?new Date(F).toLocaleString():"-"}function _(F){return F==null?"-":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(F)}function x(F){return{Open:"warning","Under Investigation":"outline",Resolved:"success","Written Off":"subtle",Closed:"subtle"}[F]||"subtle"}function w(){n.push("/inventory-audit/sessions")}function k(){n.push(`/inventory-audit/sessions/${e.params.id}/edit`)}function S(){var F;(F=i.value)!=null&&F.audit_plan&&n.push(`/inventory-audit/plans/${i.value.audit_plan}`)}function C(F){n.push(`/inventory-audit/variance-cases/${F}`)}function A(){return le(this,null,function*(){try{yield et("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:{status:"In Progress",start_time:new Date().toISOString()}}),yield s()}catch(F){console.error("Error starting count:",F)}})}function M(){return le(this,null,function*(){try{yield et("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:{status:"Pending Review",end_time:new Date().toISOString()}}),yield s()}catch(F){console.error("Error submitting for review:",F)}})}function $(F){return le(this,null,function*(){try{yield et("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:{count_items:F}})}catch(q){console.error("Error saving count items:",q)}})}function R(F){return le(this,null,function*(){const q={team:{team_signoff:1,team_signoff_date:new Date().toISOString()},supervisor:{supervisor_signoff:1,supervisor_signoff_date:new Date().toISOString()},auditor:{auditor_signoff:1,auditor_signoff_date:new Date().toISOString()}};try{yield et("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:q[F]}),yield s()}catch(N){console.error("Error applying signoff:",N)}})}function I(){n.push(`/inventory-audit/sessions/${e.params.id}/create-variance-cases`)}function B(){window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=Stock Take Session&name=${e.params.id}&format=Count Sheet`,"_blank")}function j(){console.log("Export to Excel")}function z(){console.log("View Audit Log")}return(F,q)=>{var N,O,V,L;return T(),P("div",O1n,[u("div",L1n,[u("div",V1n,[b(y(Z),{variant:"ghost",onClick:w},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",N1n,E(((N=i.value)==null?void 0:N.session_name)||((O=i.value)==null?void 0:O.name)||"Loading..."),1),q[1]||(q[1]=u("p",{class:"text-gray-500 mt-1"},"Stock Take Session",-1))])]),u("div",j1n,[b(y(Ee),{variant:l.value},{default:D(()=>{var U;return[W(E((U=i.value)==null?void 0:U.status),1)]}),_:1},8,["variant"]),b(y(Z),{variant:"outline",onClick:k},{default:D(()=>[b(y(vn),{class:"w-4 h-4 mr-2"}),q[2]||(q[2]=W(" Edit ",-1))]),_:1}),((V=i.value)==null?void 0:V.status)==="Scheduled"?(T(),he(y(Z),{key:0,variant:"solid",onClick:A},{default:D(()=>[b(y(Rl),{class:"w-4 h-4 mr-2"}),q[3]||(q[3]=W(" Start Counting ",-1))]),_:1})):ie("",!0),((L=i.value)==null?void 0:L.status)==="In Progress"?(T(),he(y(Z),{key:1,variant:"solid",onClick:M},{default:D(()=>[b(y(Gt),{class:"w-4 h-4 mr-2"}),q[4]||(q[4]=W(" Submit for Review ",-1))]),_:1})):ie("",!0)])]),r.value?(T(),P("div",F1n,[...q[5]||(q[5]=[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):i.value?(T(),P("div",B1n,[u("div",z1n,[u("div",U1n,[q[14]||(q[14]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Session Overview",-1)),u("div",H1n,[u("div",null,[q[6]||(q[6]=u("span",{class:"text-sm text-gray-500"},"Session Type",-1)),u("p",q1n,E(i.value.session_type),1)]),u("div",null,[q[7]||(q[7]=u("span",{class:"text-sm text-gray-500"},"Warehouse",-1)),u("p",W1n,E(i.value.warehouse||"-"),1)]),u("div",null,[q[8]||(q[8]=u("span",{class:"text-sm text-gray-500"},"Zone",-1)),u("p",G1n,E(i.value.zone||"-"),1)]),u("div",null,[q[9]||(q[9]=u("span",{class:"text-sm text-gray-500"},"Bin Location",-1)),u("p",Y1n,E(i.value.bin_location||"-"),1)]),u("div",null,[q[10]||(q[10]=u("span",{class:"text-sm text-gray-500"},"Scheduled Date",-1)),u("p",K1n,E(g(i.value.scheduled_date)),1)]),u("div",null,[q[11]||(q[11]=u("span",{class:"text-sm text-gray-500"},"Assigned Counters",-1)),u("p",X1n,E(i.value.assigned_counters||"-"),1)]),u("div",null,[q[12]||(q[12]=u("span",{class:"text-sm text-gray-500"},"Total Items",-1)),u("p",Z1n,E(d.value),1)]),u("div",null,[q[13]||(q[13]=u("span",{class:"text-sm text-gray-500"},"Items Counted",-1)),u("p",Q1n,E(c.value),1)])])]),i.value.audit_plan?(T(),P("div",J1n,[q[17]||(q[17]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Linked Audit Plan",-1)),u("div",ebn,[u("div",tbn,[u("div",nbn,[b(y(kr),{class:"w-5 h-5 text-blue-600"})]),u("div",null,[u("p",rbn,E(i.value.audit_plan),1),q[15]||(q[15]=u("p",{class:"text-sm text-gray-500"},"Inventory Audit Plan",-1))])]),b(y(Z),{variant:"outline",size:"sm",onClick:S},{default:D(()=>[b(y(pY),{class:"w-4 h-4 mr-1"}),q[16]||(q[16]=W(" View Plan ",-1))]),_:1})])])):ie("",!0),u("div",ibn,[b(y(Xoe),{modelValue:i.value.count_items,"onUpdate:modelValue":[q[0]||(q[0]=U=>i.value.count_items=U),$],readonly:i.value.status==="Completed"||i.value.status==="Approved"},null,8,["modelValue","readonly"])]),m.value.totalVariances>0?(T(),P("div",abn,[q[24]||(q[24]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Variance Summary",-1)),u("div",sbn,[u("div",obn,[u("div",lbn,[b(y(nn),{class:"w-5 h-5 text-yellow-600"}),q[18]||(q[18]=u("span",{class:"text-sm text-yellow-700"},"Total Variances",-1))]),u("p",ubn,E(m.value.totalVariances),1)]),u("div",dbn,[u("div",cbn,[b(y(Pm),{class:"w-5 h-5 text-red-600"}),q[19]||(q[19]=u("span",{class:"text-sm text-red-700"},"Shortages",-1))]),u("p",fbn,E(m.value.shortages),1)]),u("div",pbn,[u("div",hbn,[b(y(Cl),{class:"w-5 h-5 text-green-600"}),q[20]||(q[20]=u("span",{class:"text-sm text-green-700"},"Overages",-1))]),u("p",mbn,E(m.value.overages),1)]),u("div",gbn,[u("div",vbn,[b(y(tb),{class:"w-5 h-5 text-purple-600"}),q[21]||(q[21]=u("span",{class:"text-sm text-purple-700"},"Net Variance Value",-1))]),u("p",ybn,E(_(m.value.netVarianceValue)),1)])]),m.value.materialVariances>0?(T(),P("div",bbn,[u("div",_bn,[b(y(zr),{class:"w-5 h-5 text-red-600 mt-0.5"}),u("div",null,[u("p",xbn,E(m.value.materialVariances)+" Material Variance(s) Detected ",1),q[23]||(q[23]=u("p",{class:"text-sm text-red-600 mt-1"}," These variances exceed the materiality thresholds and require investigation. ",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-2",onClick:I},{default:D(()=>[...q[22]||(q[22]=[W(" Create Variance Cases ",-1)])]),_:1})])])])):ie("",!0)])):ie("",!0),u("div",wbn,[b(y(Fgn),{teamSignoff:i.value.team_signoff,teamSignoffDate:i.value.team_signoff_date,supervisorSignoff:i.value.supervisor_signoff,supervisorSignoffDate:i.value.supervisor_signoff_date,auditorSignoff:i.value.auditor_signoff,auditorSignoffDate:i.value.auditor_signoff_date,readonly:i.value.status==="Approved",onSignoff:R},null,8,["teamSignoff","teamSignoffDate","supervisorSignoff","supervisorSignoffDate","auditorSignoff","auditorSignoffDate","readonly"])])]),u("div",kbn,[u("div",Sbn,[q[28]||(q[28]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Stats",-1)),u("div",Cbn,[u("div",Abn,[q[25]||(q[25]=u("span",{class:"text-gray-500"},"Progress",-1)),u("span",Tbn,E(f.value)+"%",1)]),u("div",Ebn,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:nt({width:`${f.value}%`})},null,4)]),u("div",Mbn,[u("div",$bn,[q[26]||(q[26]=u("span",{class:"text-gray-500"},"Items with Issues",-1)),u("span",Dbn,E(p.value),1)]),u("div",Rbn,[q[27]||(q[27]=u("span",{class:"text-gray-500"},"Accuracy Rate",-1)),u("span",Pbn,E(h.value)+"%",1)])])])]),u("div",Ibn,[q[32]||(q[32]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",Obn,[u("div",Lbn,[u("div",Vbn,[b(y(er),{class:"w-4 h-4 text-blue-600"})]),u("div",null,[q[29]||(q[29]=u("p",{class:"font-medium"},"Scheduled",-1)),u("p",Nbn,E(g(i.value.scheduled_date)),1)])]),i.value.start_time?(T(),P("div",jbn,[u("div",Fbn,[b(y(Rl),{class:"w-4 h-4 text-green-600"})]),u("div",null,[q[30]||(q[30]=u("p",{class:"font-medium"},"Started",-1)),u("p",Bbn,E(v(i.value.start_time)),1)])])):ie("",!0),i.value.end_time?(T(),P("div",zbn,[u("div",Ubn,[b(y(Gt),{class:"w-4 h-4 text-purple-600"})]),u("div",null,[q[31]||(q[31]=u("p",{class:"font-medium"},"Completed",-1)),u("p",Hbn,E(v(i.value.end_time)),1)])])):ie("",!0)])]),a.value.length>0?(T(),P("div",qbn,[q[33]||(q[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Variance Cases",-1)),u("div",Wbn,[(T(!0),P(_e,null,we(a.value,U=>(T(),P("div",{key:U.name,class:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",onClick:G=>C(U.name)},[u("div",Ybn,[u("span",Kbn,E(U.name),1),b(y(Ee),{variant:x(U.status),size:"sm"},{default:D(()=>[W(E(U.status),1)]),_:2},1032,["variant"])]),u("p",Xbn,E(U.item_code)+" - "+E(U.item_name),1)],8,Gbn))),128))])])):ie("",!0),u("div",Zbn,[q[37]||(q[37]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Actions",-1)),u("div",Qbn,[b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:B},{default:D(()=>[b(y(KD),{class:"w-4 h-4 mr-2"}),q[34]||(q[34]=W(" Print Count Sheet ",-1))]),_:1}),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:j},{default:D(()=>[b(y(bn),{class:"w-4 h-4 mr-2"}),q[35]||(q[35]=W(" Export to Excel ",-1))]),_:1}),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:z},{default:D(()=>[b(y(US),{class:"w-4 h-4 mr-2"}),q[36]||(q[36]=W(" View Audit Log ",-1))]),_:1})])])])])):ie("",!0)])}}},e_n={class:"p-6"},t_n={class:"flex items-center justify-between mb-6"},n_n={class:"flex items-center gap-4"},r_n={class:"text-2xl font-bold text-gray-900"},i_n={class:"text-gray-500 mt-1"},a_n={class:"flex items-center gap-2"},s_n={class:"max-w-4xl"},o_n={class:"space-y-6"},l_n={class:"bg-white rounded-lg border p-6"},u_n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},d_n={class:"md:col-span-2"},c_n={class:"bg-white rounded-lg border p-6"},f_n={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},p_n={class:"bg-white rounded-lg border p-6"},h_n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},m_n={class:"bg-white rounded-lg border p-6"},g_n={class:"flex items-center justify-between mb-4"},v_n={class:"flex items-center gap-2"},y_n={class:"bg-white rounded-lg border p-6"},b_n={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},__n={class:"space-y-4"},x_n={key:0,class:"p-4 bg-gray-50 rounded-lg"},hW={__name:"StockTakeSessionForm",setup(t){const e=gs(),n=xn(),r=Q(!1),i=Q([]),a=Q([]),s=Q([]),o=Q([]),l=Q(!1),d=Q(""),c=J(()=>e.params.id&&e.params.id!=="new"),f=Q({session_name:"",session_type:"Cycle Count",status:"Scheduled",audit_plan:"",scheduled_date:new Date().toISOString().split("T")[0],warehouse:"",zone:"",bin_location:"",assigned_counters:"",supervisor:"",count_items:[],notes:""});bt(()=>le(this,null,function*(){yield Promise.all([p(),h(),m(),g()]),c.value&&(yield v())})),Je(()=>f.value.audit_plan,$=>le(this,null,function*(){if($&&!c.value)try{const R=yield et("frappe.client.get_value",{doctype:"Inventory Audit Plan",filters:{name:$},fieldname:["warehouse"]});R.warehouse&&(f.value.warehouse=R.warehouse)}catch(R){console.error("Error loading plan details:",R)}}));function p(){return le(this,null,function*(){try{const $=yield et("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});i.value=$.map(R=>({label:R.full_name||R.name,value:R.name}))}catch($){console.error("Error loading users:",$)}})}function h(){return le(this,null,function*(){try{const $=yield et("frappe.client.get_list",{doctype:"Inventory Audit Plan",filters:{status:["in",["Planned","In Progress"]]},fields:["name","plan_title"],limit_page_length:0});a.value=$.map(R=>({label:R.plan_title||R.name,value:R.name}))}catch($){console.error("Error loading audit plans:",$)}})}function m(){return le(this,null,function*(){try{const $=yield et("frappe.client.get_list",{doctype:"Warehouse",fields:["name","warehouse_name"],limit_page_length:0});s.value=$.map(R=>({label:R.warehouse_name||R.name,value:R.name}))}catch($){console.error("Error loading warehouses:",$)}})}function g(){return le(this,null,function*(){try{const $=yield et("frappe.client.get_list",{doctype:"Inventory Snapshot",filters:{status:"Active"},fields:["name","snapshot_date","warehouse"],limit_page_length:50,order_by:"snapshot_date desc"});o.value=$.map(R=>({label:`${R.name} - ${R.warehouse} (${R.snapshot_date})`,value:R.name}))}catch($){console.error("Error loading snapshots:",$)}})}function v(){return le(this,null,function*(){try{const $=yield et("frappe.client.get",{doctype:"Stock Take Session",name:e.params.id});f.value={session_name:$.session_name||"",session_type:$.session_type||"Cycle Count",status:$.status||"Scheduled",audit_plan:$.audit_plan||"",scheduled_date:$.scheduled_date||"",warehouse:$.warehouse||"",zone:$.zone||"",bin_location:$.bin_location||"",assigned_counters:$.assigned_counters||"",supervisor:$.supervisor||"",count_items:$.count_items||[],notes:$.notes||""}}catch($){console.error("Error loading session:",$)}})}function _(){return le(this,null,function*(){if(!f.value.session_type){alert("Session type is required");return}if(!f.value.scheduled_date){alert("Scheduled date is required");return}r.value=!0;try{if(c.value)yield et("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:f.value}),n.push(`/inventory-audit/sessions/${e.params.id}`);else{const $=yield et("frappe.client.insert",{doc:me({doctype:"Stock Take Session"},f.value)});n.push(`/inventory-audit/sessions/${$.name}`)}}catch($){console.error("Error saving session:",$),alert("Error saving session: "+$.message)}finally{r.value=!1}})}function x(){return le(this,null,function*(){if(!f.value.session_type||!f.value.scheduled_date){alert("Session type and scheduled date are required");return}r.value=!0;try{yield et("frappe.client.insert",{doc:me({doctype:"Stock Take Session"},f.value)}),f.value={session_name:"",session_type:"Cycle Count",status:"Scheduled",audit_plan:f.value.audit_plan,scheduled_date:f.value.scheduled_date,warehouse:f.value.warehouse,zone:"",bin_location:"",assigned_counters:"",supervisor:"",count_items:[],notes:""}}catch($){console.error("Error saving session:",$),alert("Error saving session: "+$.message)}finally{r.value=!1}})}function w(){f.value.count_items.push({item_code:"",item_name:"",system_qty:0,counted_qty:null,variance_qty:0,variance_value:0,uom:"Nos",condition:"Good",notes:""})}function k(){l.value=!0}function S(){return le(this,null,function*(){if(d.value)try{const $=yield et("frappe.client.get",{doctype:"Inventory Snapshot",name:d.value});$.items&&$.items.length>0&&(f.value.count_items=$.items.map(R=>({item_code:R.item_code,item_name:R.item_name,system_qty:R.qty||0,counted_qty:null,variance_qty:0,variance_value:0,uom:R.uom||"Nos",condition:"Good",notes:""}))),$.warehouse&&(f.value.warehouse=$.warehouse),l.value=!1,d.value=""}catch($){console.error("Error loading snapshot:",$),alert("Error loading snapshot: "+$.message)}})}function C(){c.value?n.push(`/inventory-audit/sessions/${e.params.id}`):n.push("/inventory-audit/sessions")}const A=[{label:"Cycle Count",value:"Cycle Count"},{label:"Full Count",value:"Full Count"},{label:"Spot Check",value:"Spot Check"},{label:"Blind Count",value:"Blind Count"},{label:"Verification",value:"Verification"}],M=[{label:"Scheduled",value:"Scheduled"},{label:"In Progress",value:"In Progress"},{label:"Pending Review",value:"Pending Review"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}];return($,R)=>(T(),P("div",e_n,[u("div",t_n,[u("div",n_n,[b(y(Z),{variant:"ghost",onClick:C},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",r_n,E(c.value?"Edit Session":"New Stock Take Session"),1),u("p",i_n,E(c.value?`Editing ${y(e).params.id}`:"Create a new stock take session"),1)])]),u("div",a_n,[b(y(Z),{variant:"outline",onClick:C},{default:D(()=>[...R[15]||(R[15]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:_,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(c.value?"Save Changes":"Create Session"),1)]),_:1},8,["loading"])])]),u("div",s_n,[u("div",o_n,[u("div",l_n,[R[21]||(R[21]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),u("div",u_n,[u("div",d_n,[R[16]||(R[16]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Session Name ",-1)),b(y(ge),{type:"text",modelValue:f.value.session_name,"onUpdate:modelValue":R[0]||(R[0]=I=>f.value.session_name=I),placeholder:"e.g., Zone A Cycle Count - Week 48"},null,8,["modelValue"])]),u("div",null,[R[17]||(R[17]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Session Type "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:f.value.session_type,"onUpdate:modelValue":R[1]||(R[1]=I=>f.value.session_type=I),options:A},null,8,["modelValue"])]),u("div",null,[R[18]||(R[18]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(y(ge),{type:"select",modelValue:f.value.status,"onUpdate:modelValue":R[2]||(R[2]=I=>f.value.status=I),options:M},null,8,["modelValue"])]),u("div",null,[R[19]||(R[19]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Linked Audit Plan ",-1)),b(y(ge),{type:"autocomplete",modelValue:f.value.audit_plan,"onUpdate:modelValue":R[3]||(R[3]=I=>f.value.audit_plan=I),options:a.value,placeholder:"Select audit plan"},null,8,["modelValue","options"])]),u("div",null,[R[20]||(R[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Scheduled Date "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"date",modelValue:f.value.scheduled_date,"onUpdate:modelValue":R[4]||(R[4]=I=>f.value.scheduled_date=I)},null,8,["modelValue"])])])]),u("div",c_n,[R[25]||(R[25]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Location",-1)),u("div",f_n,[u("div",null,[R[22]||(R[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),b(y(ge),{type:"autocomplete",modelValue:f.value.warehouse,"onUpdate:modelValue":R[5]||(R[5]=I=>f.value.warehouse=I),options:s.value,placeholder:"Select warehouse"},null,8,["modelValue","options"])]),u("div",null,[R[23]||(R[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Zone",-1)),b(y(ge),{type:"text",modelValue:f.value.zone,"onUpdate:modelValue":R[6]||(R[6]=I=>f.value.zone=I),placeholder:"e.g., Zone A"},null,8,["modelValue"])]),u("div",null,[R[24]||(R[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Bin Location",-1)),b(y(ge),{type:"text",modelValue:f.value.bin_location,"onUpdate:modelValue":R[7]||(R[7]=I=>f.value.bin_location=I),placeholder:"e.g., A-01-01"},null,8,["modelValue"])])])]),u("div",p_n,[R[29]||(R[29]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Assignment",-1)),u("div",h_n,[u("div",null,[R[26]||(R[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned Counters",-1)),b(y(ge),{type:"text",modelValue:f.value.assigned_counters,"onUpdate:modelValue":R[8]||(R[8]=I=>f.value.assigned_counters=I),placeholder:"e.g., John Doe, Jane Smith"},null,8,["modelValue"]),R[27]||(R[27]=u("p",{class:"text-xs text-gray-500 mt-1"},"Comma-separated list of counter names",-1))]),u("div",null,[R[28]||(R[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Supervisor",-1)),b(y(ge),{type:"autocomplete",modelValue:f.value.supervisor,"onUpdate:modelValue":R[9]||(R[9]=I=>f.value.supervisor=I),options:i.value,placeholder:"Select supervisor"},null,8,["modelValue","options"])])])]),u("div",m_n,[u("div",g_n,[R[32]||(R[32]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Items to Count",-1)),u("div",v_n,[b(y(Z),{variant:"outline",size:"sm",onClick:k},{default:D(()=>[b(y(bn),{class:"w-4 h-4 mr-2"}),R[30]||(R[30]=W(" Load from Snapshot ",-1))]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:w},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),R[31]||(R[31]=W(" Add Item ",-1))]),_:1})])]),b(y(Xoe),{modelValue:f.value.count_items,"onUpdate:modelValue":R[10]||(R[10]=I=>f.value.count_items=I),readonly:!1},null,8,["modelValue"])]),u("div",y_n,[R[33]||(R[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),b(y(ge),{type:"textarea",modelValue:f.value.notes,"onUpdate:modelValue":R[11]||(R[11]=I=>f.value.notes=I),placeholder:"Additional notes or instructions for this session...",rows:4},null,8,["modelValue"])])]),u("div",b_n,[b(y(Z),{variant:"outline",onClick:C},{default:D(()=>[...R[34]||(R[34]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"outline",onClick:x,loading:r.value},{default:D(()=>[...R[35]||(R[35]=[W(" Save & Add Another ",-1)])]),_:1},8,["loading"]),b(y(Z),{variant:"solid",onClick:_,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(c.value?"Save Changes":"Create Session"),1)]),_:1},8,["loading"])])]),b(y(zt),{modelValue:l.value,"onUpdate:modelValue":R[14]||(R[14]=I=>l.value=I),options:{title:"Load Items from Snapshot"}},{"body-content":D(()=>[u("div",__n,[u("div",null,[R[36]||(R[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Select Snapshot",-1)),b(y(ge),{type:"autocomplete",modelValue:d.value,"onUpdate:modelValue":R[12]||(R[12]=I=>d.value=I),options:o.value,placeholder:"Search snapshots..."},null,8,["modelValue","options"])]),d.value?(T(),P("div",x_n,[...R[37]||(R[37]=[u("p",{class:"text-sm text-gray-600"}," This will load all items from the selected snapshot. Existing items will be replaced. ",-1)])])):ie("",!0)])]),actions:D(()=>[b(y(Z),{variant:"outline",onClick:R[13]||(R[13]=I=>l.value=!1)},{default:D(()=>[...R[38]||(R[38]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:S,disabled:!d.value},{default:D(()=>[...R[39]||(R[39]=[W(" Load Items ",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]))}},w_n={class:"p-6"},k_n={class:"flex justify-between items-center mb-6"},S_n={class:"flex gap-2"},C_n={class:"bg-white rounded-lg border p-4 mb-6"},A_n={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},T_n=["value"],E_n={class:"flex items-end"},M_n={class:"flex items-center gap-2"},$_n={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},D_n={class:"bg-white rounded-lg border p-4"},R_n={class:"text-2xl font-bold"},P_n={class:"bg-white rounded-lg border p-4"},I_n={class:"text-2xl font-bold text-blue-600"},O_n={class:"bg-white rounded-lg border p-4"},L_n={class:"text-2xl font-bold text-yellow-600"},V_n={class:"bg-white rounded-lg border p-4"},N_n={class:"text-2xl font-bold text-red-600"},j_n={class:"bg-white rounded-lg border p-4"},F_n={class:"text-2xl font-bold text-orange-600"},B_n={class:"bg-white rounded-lg border shadow-sm"},z_n={key:0,class:"divide-y divide-gray-200"},U_n=["onClick"],H_n={class:"flex items-start justify-between"},q_n={class:"flex-1"},W_n={class:"flex items-center gap-3 mb-2"},G_n={class:"font-medium text-gray-900"},Y_n={class:"text-sm text-gray-600 mb-2"},K_n={class:"flex items-center gap-6 text-sm text-gray-500"},X_n={class:"flex items-center gap-1"},Z_n={key:0,class:"line-clamp-1"},Q_n={class:"flex items-center gap-6 mt-3 text-sm"},J_n={class:"text-gray-700"},exn={class:"text-gray-700"},txn={class:"text-gray-700"},nxn={class:"flex items-center gap-6 mt-3 text-sm"},rxn={key:0,class:"flex items-center gap-1 text-purple-600"},ixn={key:1,class:"flex items-center gap-1 text-gray-500"},axn={class:"text-right"},sxn={key:0,class:"text-xs text-gray-500"},oxn={key:1,class:"p-12 text-center text-gray-500"},lxn={key:2,class:"px-4 py-3 border-t flex items-center justify-between"},uxn={class:"text-sm text-gray-500"},dxn={class:"flex gap-2"},cxn={__name:"VarianceCaseList",setup(t){const e=xn(),n=Xl(),r=Q(!1),i=Q(!1),a=Q({status:"",priority:"",root_cause:"",investigator:""}),s=J(()=>n.varianceCases),o=J(()=>n.varianceCasesTotalCount),l=J(()=>n.varianceCasesPage),d=J(()=>n.varianceCasesPageSize),c=J(()=>Math.ceil(o.value/d.value)),f=J(()=>s.value.reduce((A,M)=>A+Math.abs(M.variance_value||0),0));bt(()=>le(this,null,function*(){yield p()}));function p(){return le(this,null,function*(){r.value=!0;try{const A=me({},a.value);Object.keys(A).forEach(M=>{A[M]||delete A[M]}),yield n.loadVarianceCases(A,l.value,d.value)}finally{r.value=!1}})}function h(){return le(this,null,function*(){a.value={status:"",priority:"",root_cause:"",investigator:""},i.value=!1,yield p()})}let m=null;function g(){clearTimeout(m),m=setTimeout(()=>p(),300)}function v(A){return le(this,null,function*(){yield n.loadVarianceCases(a.value,A,d.value)})}function _(A){e.push(`/inventory-audit/variance-cases/${A}`)}function x(A){return{New:"blue","Under Investigation":"yellow","Resolution Proposed":"orange",Resolved:"green",Closed:"gray","No Variance":"gray"}[A]||"gray"}function w(A){return{Critical:"red",High:"orange",Medium:"yellow",Low:"blue"}[A]||"gray"}function k(A){return A.is_sla_breached?"text-red-600":A.sla_days_remaining!==void 0&&A.sla_days_remaining<=2?"text-orange-600":"text-gray-900"}function S(A){return A?new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function C(A){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(A||0)}return(A,M)=>(T(),P("div",w_n,[u("div",k_n,[M[7]||(M[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Variance Reconciliation Cases"),u("p",{class:"text-gray-600"},"Investigate and resolve inventory discrepancies")],-1)),u("div",S_n,[b(y(Z),{onClick:h,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"])])]),u("div",C_n,[u("div",A_n,[u("div",null,[M[9]||(M[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),xe(u("select",{"onUpdate:modelValue":M[0]||(M[0]=$=>a.value.status=$),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:p},[...M[8]||(M[8]=[ur('<option value="">All Statuses</option><option value="New">New</option><option value="Under Investigation">Under Investigation</option><option value="Resolution Proposed">Resolution Proposed</option><option value="Resolved">Resolved</option><option value="Closed">Closed</option>',6)])],544),[[gn,a.value.status]])]),u("div",null,[M[11]||(M[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),xe(u("select",{"onUpdate:modelValue":M[1]||(M[1]=$=>a.value.priority=$),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:p},[...M[10]||(M[10]=[ur('<option value="">All Priorities</option><option value="Critical">Critical</option><option value="High">High</option><option value="Medium">Medium</option><option value="Low">Low</option>',5)])],544),[[gn,a.value.priority]])]),u("div",null,[M[13]||(M[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Root Cause",-1)),xe(u("select",{"onUpdate:modelValue":M[2]||(M[2]=$=>a.value.root_cause=$),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:p},[M[12]||(M[12]=u("option",{value:""},"All Causes",-1)),(T(!0),P(_e,null,we(y(n).rootCauseOptions,$=>(T(),P("option",{key:$.value,value:$.value},E($.label),9,T_n))),128))],544),[[gn,a.value.root_cause]])]),u("div",null,[M[14]||(M[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Investigator",-1)),xe(u("input",{"onUpdate:modelValue":M[3]||(M[3]=$=>a.value.investigator=$),type:"text",placeholder:"Filter by investigator",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:g},null,544),[[Mt,a.value.investigator]])]),u("div",E_n,[u("label",M_n,[xe(u("input",{type:"checkbox","onUpdate:modelValue":M[4]||(M[4]=$=>i.value=$),onChange:p,class:"rounded border-gray-300"},null,544),[[$n,i.value]]),M[15]||(M[15]=u("span",{class:"text-sm text-gray-700"},"SLA Breached Only",-1))])])])]),u("div",$_n,[u("div",D_n,[M[16]||(M[16]=u("p",{class:"text-sm text-gray-500"},"Total Cases",-1)),u("p",R_n,E(o.value),1)]),u("div",P_n,[M[17]||(M[17]=u("p",{class:"text-sm text-gray-500"},"New",-1)),u("p",I_n,E(s.value.filter($=>$.status==="New").length),1)]),u("div",O_n,[M[18]||(M[18]=u("p",{class:"text-sm text-gray-500"},"Under Investigation",-1)),u("p",L_n,E(s.value.filter($=>$.status==="Under Investigation").length),1)]),u("div",V_n,[M[19]||(M[19]=u("p",{class:"text-sm text-gray-500"},"SLA Breached",-1)),u("p",N_n,E(s.value.filter($=>$.is_sla_breached).length),1)]),u("div",j_n,[M[20]||(M[20]=u("p",{class:"text-sm text-gray-500"},"Total Variance Value",-1)),u("p",F_n,E(C(f.value)),1)])]),u("div",B_n,[s.value.length>0?(T(),P("div",z_n,[(T(!0),P(_e,null,we(s.value,$=>(T(),P("div",{key:$.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:R=>_($.name)},[u("div",H_n,[u("div",q_n,[u("div",W_n,[u("h4",G_n,E($.case_title||$.item_code),1),b(y(Ee),{variant:x($.status)},{default:D(()=>[W(E($.status),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:w($.priority)},{default:D(()=>[W(E($.priority),1)]),_:2},1032,["variant"]),$.is_sla_breached?(T(),he(y(Ee),{key:0,variant:"red"},{default:D(()=>[b(y(nn),{class:"w-3 h-3 mr-1"}),M[21]||(M[21]=W(" SLA Breached ",-1))]),_:1})):ie("",!0)]),u("p",Y_n,E($.case_id),1),u("div",K_n,[u("span",X_n,[b(y(Ws),{class:"w-4 h-4"}),W(" "+E($.item_code),1)]),$.item_description?(T(),P("span",Z_n,E($.item_description),1)):ie("",!0)]),u("div",Q_n,[u("span",J_n,[M[22]||(M[22]=W(" Qty Variance: ",-1)),u("strong",{class:fe($.variance_quantity>0?"text-green-600":"text-red-600")},E($.variance_quantity>0?"+":"")+E($.variance_quantity),3)]),u("span",exn,[M[23]||(M[23]=W(" Value: ",-1)),u("strong",{class:fe($.variance_value>0?"text-green-600":"text-red-600")},E(C($.variance_value)),3)]),u("span",txn,[M[24]||(M[24]=W(" Variance %: ",-1)),u("strong",null,E(Math.abs($.variance_percent||0).toFixed(1))+"%",1)])]),u("div",nxn,[$.root_cause?(T(),P("span",rxn,[b(y(Xi),{class:"w-4 h-4"}),W(" "+E($.root_cause),1)])):ie("",!0),$.investigator?(T(),P("span",ixn,[b(y(Ro),{class:"w-4 h-4"}),W(" "+E($.investigator),1)])):ie("",!0)])]),u("div",axn,[M[25]||(M[25]=u("p",{class:"text-sm text-gray-500"},"SLA Due",-1)),u("p",{class:fe(["font-medium",k($)])},E(S($.sla_due_date)),3),$.sla_days_remaining!==void 0?(T(),P("p",sxn,E($.sla_days_remaining>=0?`${$.sla_days_remaining} days left`:`${Math.abs($.sla_days_remaining)} days overdue`),1)):ie("",!0)])])],8,U_n))),128))])):r.value?ie("",!0):(T(),P("div",oxn,[b(y(Gt),{class:"w-12 h-12 mx-auto mb-3 text-green-300"}),M[26]||(M[26]=u("p",null,"No variance cases found",-1))])),c.value>1?(T(),P("div",lxn,[u("p",uxn," Showing "+E((l.value-1)*d.value+1)+" - "+E(Math.min(l.value*d.value,o.value))+" of "+E(o.value),1),u("div",dxn,[b(y(Z),{variant:"outline",size:"sm",disabled:l.value===1,onClick:M[5]||(M[5]=$=>v(l.value-1))},{default:D(()=>[...M[27]||(M[27]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",size:"sm",disabled:l.value===c.value,onClick:M[6]||(M[6]=$=>v(l.value+1))},{default:D(()=>[...M[28]||(M[28]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):ie("",!0)])]))}},fxn={class:"p-6"},pxn={class:"flex items-center justify-between mb-6"},hxn={class:"flex items-center gap-4"},mxn={class:"text-2xl font-bold text-gray-900"},gxn={class:"flex items-center gap-2"},vxn={key:0,class:"flex items-center justify-center py-20"},yxn={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},bxn={class:"lg:col-span-2 space-y-6"},_xn={class:"bg-white rounded-lg border p-6"},xxn={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},wxn={class:"font-medium font-mono"},kxn={class:"font-medium"},Sxn={class:"font-medium"},Cxn={class:"font-medium"},Axn={class:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4"},Txn={class:"p-4 bg-blue-50 rounded-lg"},Exn={class:"text-2xl font-bold text-blue-800"},Mxn={class:"p-4 bg-green-50 rounded-lg"},$xn={class:"text-2xl font-bold text-green-800"},Dxn={class:"mt-4 p-4 border rounded-lg"},Rxn={class:"flex items-center gap-3"},Pxn={class:"font-medium"},Ixn={class:"text-sm text-gray-500"},Oxn={class:"bg-white rounded-lg border p-6"},Lxn={class:"space-y-4"},Vxn={class:"p-3 bg-gray-50 rounded-lg"},Nxn={class:"p-3 bg-gray-50 rounded-lg whitespace-pre-wrap"},jxn={class:"grid grid-cols-2 gap-4"},Fxn={class:"p-3 bg-gray-50 rounded-lg"},Bxn={class:"p-3 bg-gray-50 rounded-lg"},zxn={key:0,class:"bg-white rounded-lg border p-6"},Uxn={class:"space-y-4"},Hxn={class:"grid grid-cols-2 gap-4"},qxn={class:"font-medium"},Wxn={class:"p-3 bg-gray-50 rounded-lg whitespace-pre-wrap"},Gxn={key:0,class:"p-4 border rounded-lg"},Yxn={class:"flex items-center justify-between"},Kxn={class:"flex items-center gap-3"},Xxn={class:"text-sm text-gray-500"},Zxn={class:"bg-white rounded-lg border p-6"},Qxn={class:"flex items-center justify-between mb-4"},Jxn={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},ewn={class:"flex items-center gap-3 mb-2"},twn={class:"text-sm font-medium truncate"},nwn={class:"flex items-center gap-2"},rwn={key:1,class:"text-center py-8 text-gray-500"},iwn={class:"bg-white rounded-lg border p-6"},awn={key:0,class:"space-y-4"},swn={class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},own={class:"flex-1"},lwn={class:"flex items-center gap-2 mb-1"},uwn={class:"font-medium text-sm"},dwn={class:"text-xs text-gray-500"},cwn={class:"text-sm text-gray-700"},fwn={key:1,class:"text-center py-4 text-gray-500"},pwn={class:"mt-4 pt-4 border-t"},hwn={class:"flex gap-2"},mwn={class:"space-y-6"},gwn={class:"bg-white rounded-lg border p-6"},vwn={class:"space-y-2"},ywn={class:"bg-white rounded-lg border p-6"},bwn={class:"space-y-3"},_wn={class:"flex items-center gap-2"},xwn={class:"text-sm text-gray-500 mt-1"},wwn={class:"flex items-center gap-2"},kwn={class:"text-sm text-gray-500 mt-1"},Swn={class:"bg-white rounded-lg border p-6"},Cwn={class:"space-y-4"},Awn={class:"flex gap-3"},Twn={class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},Ewn={class:"text-xs text-gray-500"},Mwn={key:0,class:"flex gap-3"},$wn={class:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0"},Dwn={class:"text-xs text-gray-500"},Rwn={key:1,class:"flex gap-3"},Pwn={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},Iwn={class:"text-xs text-gray-500"},Own={__name:"VarianceCaseDetail",setup(t){const e=gs(),n=xn(),r=Q(!0),i=Q(null),a=Q([]),s=Q([]),o=Q("");bt(()=>le(this,null,function*(){yield Promise.all([l(),d(),c()])}));function l(){return le(this,null,function*(){r.value=!0;try{const O=yield et("frappe.client.get",{doctype:"Inventory Variance Case",name:e.params.id});i.value=O}catch(O){console.error("Error loading variance case:",O)}finally{r.value=!1}})}function d(){return le(this,null,function*(){try{const O=yield et("frappe.client.get_list",{doctype:"File",filters:{attached_to_doctype:"Inventory Variance Case",attached_to_name:e.params.id},fields:["name","file_name","file_url"]});a.value=O}catch(O){console.error("Error loading evidence:",O)}})}function c(){return le(this,null,function*(){try{const O=yield et("frappe.client.get_list",{doctype:"Comment",filters:{reference_doctype:"Inventory Variance Case",reference_name:e.params.id,comment_type:"Comment"},fields:["name","content","comment_by","creation"],order_by:"creation desc"});s.value=O}catch(O){console.error("Error loading comments:",O)}})}const f=J(()=>{var V;return{Open:"warning","Under Investigation":"outline",Resolved:"success","Written Off":"subtle",Closed:"subtle"}[(V=i.value)==null?void 0:V.status]||"subtle"}),p=J(()=>{var V;return{Critical:"solid",High:"warning",Medium:"outline",Low:"subtle"}[(V=i.value)==null?void 0:V.priority]||"subtle"}),h=J(()=>i.value?i.value.variance_qty<0?"bg-red-50":"bg-green-50":"bg-gray-50"),m=J(()=>i.value?i.value.variance_qty<0?"text-red-700":"text-green-700":"text-gray-700"),g=J(()=>i.value?i.value.variance_qty<0?"bg-red-100":"bg-green-100":"bg-gray-100");function v(O){return O?new Date(O).toLocaleDateString():"-"}function _(O){return O?new Date(O).toLocaleString():"-"}function x(O){return O==null?"-":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(O)}function w(O){return{Adjusted:"success","Written Off":"warning","No Action Required":"subtle",Transferred:"outline"}[O]||"subtle"}function k(O){return O?/\.(jpg|jpeg|png|gif|webp)$/i.test(O):!1}function S(){n.push("/inventory-audit/variance-cases")}function C(){n.push(`/inventory-audit/variance-cases/${e.params.id}/edit`)}function A(){var O;(O=i.value)!=null&&O.stock_take_session&&n.push(`/inventory-audit/sessions/${i.value.stock_take_session}`)}function M(){var O;(O=i.value)!=null&&O.audit_plan&&n.push(`/inventory-audit/plans/${i.value.audit_plan}`)}function $(){var O;(O=i.value)!=null&&O.adjustment_entry&&window.open(`/app/stock-entry/${i.value.adjustment_entry}`,"_blank")}function R(){return le(this,null,function*(){try{yield et("frappe.client.set_value",{doctype:"Inventory Variance Case",name:e.params.id,fieldname:{status:"Under Investigation",investigation_start_date:new Date().toISOString().split("T")[0]}}),yield l()}catch(O){console.error("Error starting investigation:",O)}})}function I(){return le(this,null,function*(){n.push(`/inventory-audit/variance-cases/${e.params.id}/resolve`)})}function B(){window.open(`/app/stock-entry/new-stock-entry-1?from_variance_case=${e.params.id}`,"_blank")}function j(){return le(this,null,function*(){if(confirm("Are you sure you want to write off this variance?"))try{yield et("frappe.client.set_value",{doctype:"Inventory Variance Case",name:e.params.id,fieldname:{status:"Written Off",resolution_type:"Written Off",resolved_date:new Date().toISOString().split("T")[0]}}),yield l()}catch(O){console.error("Error writing off:",O)}})}function z(){console.log("Add evidence - implement file upload")}function F(O){window.open(O.file_url,"_blank")}function q(O){const V=document.createElement("a");V.href=O.file_url,V.download=O.file_name,V.click()}function N(){return le(this,null,function*(){if(o.value.trim())try{yield et("frappe.client.insert",{doc:{doctype:"Comment",comment_type:"Comment",reference_doctype:"Inventory Variance Case",reference_name:e.params.id,content:o.value}}),o.value="",yield c()}catch(O){console.error("Error adding comment:",O)}})}return(O,V)=>{var L;return T(),P("div",fxn,[u("div",pxn,[u("div",hxn,[b(y(Z),{variant:"ghost",onClick:S},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",mxn,E(((L=i.value)==null?void 0:L.name)||"Loading..."),1),V[1]||(V[1]=u("p",{class:"text-gray-500 mt-1"},"Inventory Variance Case",-1))])]),u("div",gxn,[b(y(Ee),{variant:f.value},{default:D(()=>{var U;return[W(E((U=i.value)==null?void 0:U.status),1)]}),_:1},8,["variant"]),b(y(Ee),{variant:p.value},{default:D(()=>{var U;return[W(E((U=i.value)==null?void 0:U.priority)+" Priority",1)]}),_:1},8,["variant"]),b(y(Z),{variant:"outline",onClick:C},{default:D(()=>[b(y(vn),{class:"w-4 h-4 mr-2"}),V[2]||(V[2]=W(" Edit ",-1))]),_:1})])]),r.value?(T(),P("div",vxn,[...V[3]||(V[3]=[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):i.value?(T(),P("div",yxn,[u("div",bxn,[u("div",_xn,[V[10]||(V[10]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Variance Details",-1)),u("div",xxn,[u("div",null,[V[4]||(V[4]=u("span",{class:"text-sm text-gray-500"},"Item Code",-1)),u("p",wxn,E(i.value.item_code),1)]),u("div",null,[V[5]||(V[5]=u("span",{class:"text-sm text-gray-500"},"Item Name",-1)),u("p",kxn,E(i.value.item_name||"-"),1)]),u("div",null,[V[6]||(V[6]=u("span",{class:"text-sm text-gray-500"},"Warehouse",-1)),u("p",Sxn,E(i.value.warehouse||"-"),1)]),u("div",null,[V[7]||(V[7]=u("span",{class:"text-sm text-gray-500"},"Branch",-1)),u("p",Cxn,E(i.value.branch||"-"),1)])]),u("div",Axn,[u("div",Txn,[V[8]||(V[8]=u("span",{class:"text-sm text-blue-700"},"System Qty",-1)),u("p",Exn,E(i.value.system_qty||0),1)]),u("div",Mxn,[V[9]||(V[9]=u("span",{class:"text-sm text-green-700"},"Counted Qty",-1)),u("p",$xn,E(i.value.counted_qty||0),1)]),u("div",{class:fe(["p-4 rounded-lg",h.value])},[u("span",{class:fe(["text-sm",m.value])},"Variance Qty",2),u("p",{class:fe(["text-2xl font-bold",m.value])},E(i.value.variance_qty>0?"+":"")+E(i.value.variance_qty||0),3)],2),u("div",{class:fe(["p-4 rounded-lg",h.value])},[u("span",{class:fe(["text-sm",m.value])},"Variance Value",2),u("p",{class:fe(["text-2xl font-bold",m.value])},E(x(i.value.variance_value)),3)],2)]),u("div",Dxn,[u("div",Rxn,[u("div",{class:fe(["w-10 h-10 rounded-full flex items-center justify-center",g.value])},[i.value.variance_qty<0?(T(),he(y(Pm),{key:0,class:"w-5 h-5 text-red-600"})):(T(),he(y(Cl),{key:1,class:"w-5 h-5 text-green-600"}))],2),u("div",null,[u("p",Pxn,E(i.value.variance_qty<0?"Shortage":"Overage"),1),u("p",Ixn,E(Math.abs(i.value.variance_qty))+" units "+E(i.value.variance_qty<0?"less":"more")+" than system ",1)])])])]),u("div",Oxn,[V[15]||(V[15]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Investigation",-1)),u("div",Lxn,[u("div",null,[V[11]||(V[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Root Cause",-1)),u("div",Vxn,E(i.value.root_cause||"Not yet determined"),1)]),u("div",null,[V[12]||(V[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Investigation Notes",-1)),u("div",Nxn,E(i.value.investigation_notes||"No investigation notes"),1)]),u("div",jxn,[u("div",null,[V[13]||(V[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned Investigator",-1)),u("div",Fxn,E(i.value.assigned_to||"Not assigned"),1)]),u("div",null,[V[14]||(V[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),u("div",Bxn,E(v(i.value.due_date)||"Not set"),1)])])])]),i.value.status==="Resolved"||i.value.resolution_type?(T(),P("div",zxn,[V[21]||(V[21]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resolution",-1)),u("div",Uxn,[u("div",Hxn,[u("div",null,[V[16]||(V[16]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Type",-1)),b(y(Ee),{variant:w(i.value.resolution_type)},{default:D(()=>[W(E(i.value.resolution_type||"-"),1)]),_:1},8,["variant"])]),u("div",null,[V[17]||(V[17]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolved Date",-1)),u("p",qxn,E(v(i.value.resolved_date)||"-"),1)])]),u("div",null,[V[18]||(V[18]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Notes",-1)),u("div",Wxn,E(i.value.resolution_notes||"No resolution notes"),1)]),i.value.adjustment_entry?(T(),P("div",Gxn,[u("div",Yxn,[u("div",Kxn,[b(y(vt),{class:"w-5 h-5 text-blue-600"}),u("div",null,[V[19]||(V[19]=u("p",{class:"font-medium"},"Stock Adjustment Entry",-1)),u("p",Xxn,E(i.value.adjustment_entry),1)])]),b(y(Z),{variant:"outline",size:"sm",onClick:$},{default:D(()=>[b(y(pY),{class:"w-4 h-4 mr-1"}),V[20]||(V[20]=W(" View ",-1))]),_:1})])])):ie("",!0)])])):ie("",!0),u("div",Zxn,[u("div",Qxn,[V[23]||(V[23]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Evidence & Attachments",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:z},{default:D(()=>[b(y(ps),{class:"w-4 h-4 mr-2"}),V[22]||(V[22]=W(" Add Evidence ",-1))]),_:1})]),a.value.length>0?(T(),P("div",Jxn,[(T(!0),P(_e,null,we(a.value,U=>(T(),P("div",{key:U.name,class:"p-4 border rounded-lg"},[u("div",ewn,[k(U.file_url)?(T(),he(y(rfe),{key:0,class:"w-5 h-5 text-gray-500"})):(T(),he(y(vt),{key:1,class:"w-5 h-5 text-gray-500"})),u("span",twn,E(U.file_name),1)]),u("div",nwn,[b(y(Z),{variant:"ghost",size:"sm",onClick:G=>F(U)},{default:D(()=>[b(y(ar),{class:"w-4 h-4"})]),_:1},8,["onClick"]),b(y(Z),{variant:"ghost",size:"sm",onClick:G=>q(U)},{default:D(()=>[b(y(bn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])):(T(),P("div",rwn,[b(y(Hce),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),V[24]||(V[24]=u("p",null,"No evidence attached yet",-1))]))]),u("div",iwn,[V[26]||(V[26]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Activity",-1)),s.value.length>0?(T(),P("div",awn,[(T(!0),P(_e,null,we(s.value,U=>(T(),P("div",{key:U.name,class:"flex gap-3"},[u("div",swn,[b(y(Ro),{class:"w-4 h-4 text-blue-600"})]),u("div",own,[u("div",lwn,[u("span",uwn,E(U.comment_by),1),u("span",dwn,E(_(U.creation)),1)]),u("p",cwn,E(U.content),1)])]))),128))])):(T(),P("div",fwn,[...V[25]||(V[25]=[u("p",null,"No activity yet",-1)])])),u("div",pwn,[u("div",hwn,[b(y(ge),{type:"textarea",modelValue:o.value,"onUpdate:modelValue":V[0]||(V[0]=U=>o.value=U),placeholder:"Add a comment...",rows:2,class:"flex-1"},null,8,["modelValue"]),b(y(Z),{variant:"solid",onClick:N,disabled:!o.value.trim()},{default:D(()=>[b(y(pfe),{class:"w-4 h-4"})]),_:1},8,["disabled"])])])])]),u("div",mwn,[u("div",gwn,[V[31]||(V[31]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Actions",-1)),u("div",vwn,[i.value.status==="Open"?(T(),he(y(Z),{key:0,variant:"solid",class:"w-full justify-start",onClick:R},{default:D(()=>[b(y(Rn),{class:"w-4 h-4 mr-2"}),V[27]||(V[27]=W(" Start Investigation ",-1))]),_:1})):ie("",!0),i.value.status==="Under Investigation"?(T(),he(y(Z),{key:1,variant:"solid",class:"w-full justify-start",onClick:I},{default:D(()=>[b(y(Gt),{class:"w-4 h-4 mr-2"}),V[28]||(V[28]=W(" Mark as Resolved ",-1))]),_:1})):ie("",!0),i.value.status==="Under Investigation"?(T(),he(y(Z),{key:2,variant:"outline",class:"w-full justify-start",onClick:B},{default:D(()=>[b(y(vt),{class:"w-4 h-4 mr-2"}),V[29]||(V[29]=W(" Create Stock Adjustment ",-1))]),_:1})):ie("",!0),i.value.status==="Under Investigation"?(T(),he(y(Z),{key:3,variant:"outline",class:"w-full justify-start text-orange-600",onClick:j},{default:D(()=>[b(y(nn),{class:"w-4 h-4 mr-2"}),V[30]||(V[30]=W(" Write Off ",-1))]),_:1})):ie("",!0)])]),u("div",ywn,[V[34]||(V[34]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Linked Documents",-1)),u("div",bwn,[i.value.stock_take_session?(T(),P("div",{key:0,class:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",onClick:A},[u("div",_wn,[b(y(kr),{class:"w-4 h-4 text-gray-500"}),V[32]||(V[32]=u("span",{class:"text-sm font-medium"},"Stock Take Session",-1))]),u("p",xwn,E(i.value.stock_take_session),1)])):ie("",!0),i.value.audit_plan?(T(),P("div",{key:1,class:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",onClick:M},[u("div",wwn,[b(y(er),{class:"w-4 h-4 text-gray-500"}),V[33]||(V[33]=u("span",{class:"text-sm font-medium"},"Audit Plan",-1))]),u("p",kwn,E(i.value.audit_plan),1)])):ie("",!0)])]),u("div",Swn,[V[38]||(V[38]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",Cwn,[u("div",Awn,[u("div",Twn,[b(y(tt),{class:"w-4 h-4 text-blue-600"})]),u("div",null,[V[35]||(V[35]=u("p",{class:"font-medium text-sm"},"Created",-1)),u("p",Ewn,E(_(i.value.creation)),1)])]),i.value.investigation_start_date?(T(),P("div",Mwn,[u("div",$wn,[b(y(Rn),{class:"w-4 h-4 text-yellow-600"})]),u("div",null,[V[36]||(V[36]=u("p",{class:"font-medium text-sm"},"Investigation Started",-1)),u("p",Dwn,E(v(i.value.investigation_start_date)),1)])])):ie("",!0),i.value.resolved_date?(T(),P("div",Rwn,[u("div",Pwn,[b(y(Gt),{class:"w-4 h-4 text-green-600"})]),u("div",null,[V[37]||(V[37]=u("p",{class:"font-medium text-sm"},"Resolved",-1)),u("p",Iwn,E(v(i.value.resolved_date)),1)])])):ie("",!0)])])])])):ie("",!0)])}}},Lwn={class:"p-6"},Vwn={class:"flex items-center justify-between mb-6"},Nwn={class:"flex items-center gap-4"},jwn={class:"text-2xl font-bold text-gray-900"},Fwn={class:"text-gray-500 mt-1"},Bwn={class:"flex items-center gap-2"},zwn={class:"max-w-4xl"},Uwn={class:"space-y-6"},Hwn={class:"bg-white rounded-lg border p-6"},qwn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wwn={class:"bg-white rounded-lg border p-6"},Gwn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ywn={class:"bg-white rounded-lg border p-6"},Kwn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Xwn={class:"bg-white rounded-lg border p-6"},Zwn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qwn={class:"bg-white rounded-lg border p-6"},Jwn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},e2n={key:0,class:"bg-white rounded-lg border p-6"},t2n={class:"space-y-4"},n2n={key:1,class:"bg-white rounded-lg border p-6"},r2n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},i2n={class:"md:col-span-2"},a2n={class:"bg-white rounded-lg border p-6"},s2n={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},mW={__name:"VarianceCaseForm",setup(t){const e=gs(),n=xn(),r=Q(!1),i=Q([]),a=Q([]),s=Q([]),o=Q([]),l=Q([]),d=J(()=>e.params.id&&e.params.id!=="new"),c=Q({item_code:"",item_name:"",warehouse:"",branch:"",system_qty:0,counted_qty:0,variance_qty:0,unit_cost:0,variance_value:0,uom:"Nos",status:"Open",priority:"Medium",category:"",stock_take_session:"",audit_plan:"",assigned_to:"",due_date:"",root_cause:"",investigation_notes:"",resolution_type:"",resolved_date:"",resolution_notes:"",notes:""}),f=J(()=>c.value.variance_qty===0?"bg-gray-100 text-gray-700":c.value.variance_qty<0?"bg-red-100 text-red-700":"bg-green-100 text-green-700");bt(()=>le(this,null,function*(){yield Promise.all([p(),h(),m(),g(),v()]),d.value&&(yield _()),e.query.session&&(c.value.stock_take_session=e.query.session),e.query.item_code&&(c.value.item_code=e.query.item_code)}));function p(){return le(this,null,function*(){try{const B=yield et("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});i.value=B.map(j=>({label:j.full_name||j.name,value:j.name}))}catch(B){console.error("Error loading users:",B)}})}function h(){return le(this,null,function*(){try{const B=yield et("frappe.client.get_list",{doctype:"Item",fields:["name","item_name","stock_uom","valuation_rate"],limit_page_length:0});a.value=B.map(j=>({label:`${j.name} - ${j.item_name}`,value:j.name,item_name:j.item_name,uom:j.stock_uom,cost:j.valuation_rate}))}catch(B){console.error("Error loading items:",B)}})}function m(){return le(this,null,function*(){try{const B=yield et("frappe.client.get_list",{doctype:"Warehouse",fields:["name","warehouse_name"],limit_page_length:0});s.value=B.map(j=>({label:j.warehouse_name||j.name,value:j.name}))}catch(B){console.error("Error loading warehouses:",B)}})}function g(){return le(this,null,function*(){try{const B=yield et("frappe.client.get_list",{doctype:"Stock Take Session",fields:["name","session_name","scheduled_date"],limit_page_length:50,order_by:"scheduled_date desc"});o.value=B.map(j=>({label:j.session_name||j.name,value:j.name}))}catch(B){console.error("Error loading sessions:",B)}})}function v(){return le(this,null,function*(){try{const B=yield et("frappe.client.get_list",{doctype:"Inventory Audit Plan",filters:{status:["in",["Planned","In Progress"]]},fields:["name","plan_title"],limit_page_length:0});l.value=B.map(j=>({label:j.plan_title||j.name,value:j.name}))}catch(B){console.error("Error loading audit plans:",B)}})}function _(){return le(this,null,function*(){try{const B=yield et("frappe.client.get",{doctype:"Inventory Variance Case",name:e.params.id});c.value={item_code:B.item_code||"",item_name:B.item_name||"",warehouse:B.warehouse||"",branch:B.branch||"",system_qty:B.system_qty||0,counted_qty:B.counted_qty||0,variance_qty:B.variance_qty||0,unit_cost:B.unit_cost||0,variance_value:B.variance_value||0,uom:B.uom||"Nos",status:B.status||"Open",priority:B.priority||"Medium",category:B.category||"",stock_take_session:B.stock_take_session||"",audit_plan:B.audit_plan||"",assigned_to:B.assigned_to||"",due_date:B.due_date||"",root_cause:B.root_cause||"",investigation_notes:B.investigation_notes||"",resolution_type:B.resolution_type||"",resolved_date:B.resolved_date||"",resolution_notes:B.resolution_notes||"",notes:B.notes||""}}catch(B){console.error("Error loading case:",B)}})}function x(B){const j=a.value.find(z=>z.value===B);j&&(c.value.item_name=j.item_name,c.value.uom=j.uom||"Nos",c.value.unit_cost=j.cost||0,w())}function w(){c.value.variance_qty=(c.value.counted_qty||0)-(c.value.system_qty||0),c.value.variance_value=c.value.variance_qty*(c.value.unit_cost||0);const B=Math.abs(c.value.variance_value);B>1e5?c.value.priority="Critical":B>5e4?c.value.priority="High":B>1e4?c.value.priority="Medium":c.value.priority="Low"}function k(B){return B==null?"KES 0":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(B)}function S(){return le(this,null,function*(){if(!c.value.item_code){alert("Item code is required");return}r.value=!0;try{if(d.value)yield et("frappe.client.set_value",{doctype:"Inventory Variance Case",name:e.params.id,fieldname:c.value}),n.push(`/inventory-audit/variance-cases/${e.params.id}`);else{const B=yield et("frappe.client.insert",{doc:me({doctype:"Inventory Variance Case"},c.value)});n.push(`/inventory-audit/variance-cases/${B.name}`)}}catch(B){console.error("Error saving case:",B),alert("Error saving case: "+B.message)}finally{r.value=!1}})}function C(){d.value?n.push(`/inventory-audit/variance-cases/${e.params.id}`):n.push("/inventory-audit/variance-cases")}const A=[{label:"Open",value:"Open"},{label:"Under Investigation",value:"Under Investigation"},{label:"Resolved",value:"Resolved"},{label:"Written Off",value:"Written Off"},{label:"Closed",value:"Closed"}],M=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],$=[{label:"Shortage",value:"Shortage"},{label:"Overage",value:"Overage"},{label:"Damaged",value:"Damaged"},{label:"Expired",value:"Expired"},{label:"Misplaced",value:"Misplaced"},{label:"Data Entry Error",value:"Data Entry Error"},{label:"Theft",value:"Theft"},{label:"Unknown",value:"Unknown"}],R=[{label:"Not Determined",value:""},{label:"Theft / Pilferage",value:"Theft / Pilferage"},{label:"Data Entry Error",value:"Data Entry Error"},{label:"Receiving Error",value:"Receiving Error"},{label:"Shipping Error",value:"Shipping Error"},{label:"Damage / Spoilage",value:"Damage / Spoilage"},{label:"Misplacement",value:"Misplacement"},{label:"System Error",value:"System Error"},{label:"Vendor Issue",value:"Vendor Issue"},{label:"Process Failure",value:"Process Failure"},{label:"Other",value:"Other"}],I=[{label:"Adjusted",value:"Adjusted"},{label:"Written Off",value:"Written Off"},{label:"No Action Required",value:"No Action Required"},{label:"Transferred",value:"Transferred"},{label:"Recovered",value:"Recovered"}];return(B,j)=>(T(),P("div",Lwn,[u("div",Vwn,[u("div",Nwn,[b(y(Z),{variant:"ghost",onClick:C},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",jwn,E(d.value?"Edit Variance Case":"New Variance Case"),1),u("p",Fwn,E(d.value?`Editing ${y(e).params.id}`:"Create a new inventory variance case"),1)])]),u("div",Bwn,[b(y(Z),{variant:"outline",onClick:C},{default:D(()=>[...j[21]||(j[21]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:S,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(d.value?"Save Changes":"Create Case"),1)]),_:1},8,["loading"])])]),u("div",zwn,[u("div",Uwn,[u("div",Hwn,[j[26]||(j[26]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Item Information",-1)),u("div",qwn,[u("div",null,[j[22]||(j[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Item Code "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.item_code,"onUpdate:modelValue":j[0]||(j[0]=z=>c.value.item_code=z),options:a.value,placeholder:"Select or search item",onChange:x},null,8,["modelValue","options"])]),u("div",null,[j[23]||(j[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Item Name",-1)),b(y(ge),{type:"text",modelValue:c.value.item_name,"onUpdate:modelValue":j[1]||(j[1]=z=>c.value.item_name=z),placeholder:"Item name",readonly:!0},null,8,["modelValue"])]),u("div",null,[j[24]||(j[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.warehouse,"onUpdate:modelValue":j[2]||(j[2]=z=>c.value.warehouse=z),options:s.value,placeholder:"Select warehouse"},null,8,["modelValue","options"])]),u("div",null,[j[25]||(j[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Branch",-1)),b(y(ge),{type:"text",modelValue:c.value.branch,"onUpdate:modelValue":j[3]||(j[3]=z=>c.value.branch=z),placeholder:"Branch location"},null,8,["modelValue"])])])]),u("div",Wwn,[j[33]||(j[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Variance Details",-1)),u("div",Gwn,[u("div",null,[j[27]||(j[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" System Qty "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"number",modelValue:c.value.system_qty,"onUpdate:modelValue":j[4]||(j[4]=z=>c.value.system_qty=z),placeholder:"0",onInput:w},null,8,["modelValue"])]),u("div",null,[j[28]||(j[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Counted Qty "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"number",modelValue:c.value.counted_qty,"onUpdate:modelValue":j[5]||(j[5]=z=>c.value.counted_qty=z),placeholder:"0",onInput:w},null,8,["modelValue"])]),u("div",null,[j[29]||(j[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Variance Qty",-1)),u("div",{class:fe(["p-2 rounded-lg font-medium text-center",f.value])},E(c.value.variance_qty>0?"+":"")+E(c.value.variance_qty||0),3)]),u("div",null,[j[30]||(j[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Unit Cost",-1)),b(y(ge),{type:"number",modelValue:c.value.unit_cost,"onUpdate:modelValue":j[6]||(j[6]=z=>c.value.unit_cost=z),placeholder:"0.00",onInput:w},null,8,["modelValue"])]),u("div",null,[j[31]||(j[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Variance Value",-1)),u("div",{class:fe(["p-2 rounded-lg font-medium text-center",f.value])},E(k(c.value.variance_value)),3)]),u("div",null,[j[32]||(j[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"UOM",-1)),b(y(ge),{type:"text",modelValue:c.value.uom,"onUpdate:modelValue":j[7]||(j[7]=z=>c.value.uom=z),placeholder:"e.g., Nos, Kg"},null,8,["modelValue"])])])]),u("div",Ywn,[j[37]||(j[37]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Classification",-1)),u("div",Kwn,[u("div",null,[j[34]||(j[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(y(ge),{type:"select",modelValue:c.value.status,"onUpdate:modelValue":j[8]||(j[8]=z=>c.value.status=z),options:A},null,8,["modelValue"])]),u("div",null,[j[35]||(j[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),b(y(ge),{type:"select",modelValue:c.value.priority,"onUpdate:modelValue":j[9]||(j[9]=z=>c.value.priority=z),options:M},null,8,["modelValue"])]),u("div",null,[j[36]||(j[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),b(y(ge),{type:"select",modelValue:c.value.category,"onUpdate:modelValue":j[10]||(j[10]=z=>c.value.category=z),options:$},null,8,["modelValue"])])])]),u("div",Xwn,[j[40]||(j[40]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Linked Documents",-1)),u("div",Zwn,[u("div",null,[j[38]||(j[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock Take Session",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.stock_take_session,"onUpdate:modelValue":j[11]||(j[11]=z=>c.value.stock_take_session=z),options:o.value,placeholder:"Link to session"},null,8,["modelValue","options"])]),u("div",null,[j[39]||(j[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Plan",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.audit_plan,"onUpdate:modelValue":j[12]||(j[12]=z=>c.value.audit_plan=z),options:l.value,placeholder:"Link to audit plan"},null,8,["modelValue","options"])])])]),u("div",Qwn,[j[43]||(j[43]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Investigation Assignment",-1)),u("div",Jwn,[u("div",null,[j[41]||(j[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.assigned_to,"onUpdate:modelValue":j[13]||(j[13]=z=>c.value.assigned_to=z),options:i.value,placeholder:"Assign investigator"},null,8,["modelValue","options"])]),u("div",null,[j[42]||(j[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),b(y(ge),{type:"date",modelValue:c.value.due_date,"onUpdate:modelValue":j[14]||(j[14]=z=>c.value.due_date=z)},null,8,["modelValue"])])])]),d.value?(T(),P("div",e2n,[j[46]||(j[46]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Investigation Details",-1)),u("div",t2n,[u("div",null,[j[44]||(j[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Root Cause",-1)),b(y(ge),{type:"select",modelValue:c.value.root_cause,"onUpdate:modelValue":j[15]||(j[15]=z=>c.value.root_cause=z),options:R},null,8,["modelValue"])]),u("div",null,[j[45]||(j[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Investigation Notes",-1)),b(y(ge),{type:"textarea",modelValue:c.value.investigation_notes,"onUpdate:modelValue":j[16]||(j[16]=z=>c.value.investigation_notes=z),placeholder:"Document investigation findings...",rows:4},null,8,["modelValue"])])])])):ie("",!0),d.value&&(c.value.status==="Resolved"||c.value.status==="Written Off")?(T(),P("div",n2n,[j[50]||(j[50]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resolution",-1)),u("div",r2n,[u("div",null,[j[47]||(j[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Type",-1)),b(y(ge),{type:"select",modelValue:c.value.resolution_type,"onUpdate:modelValue":j[17]||(j[17]=z=>c.value.resolution_type=z),options:I},null,8,["modelValue"])]),u("div",null,[j[48]||(j[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolved Date",-1)),b(y(ge),{type:"date",modelValue:c.value.resolved_date,"onUpdate:modelValue":j[18]||(j[18]=z=>c.value.resolved_date=z)},null,8,["modelValue"])]),u("div",i2n,[j[49]||(j[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Notes",-1)),b(y(ge),{type:"textarea",modelValue:c.value.resolution_notes,"onUpdate:modelValue":j[19]||(j[19]=z=>c.value.resolution_notes=z),placeholder:"Document resolution details...",rows:3},null,8,["modelValue"])])])])):ie("",!0),u("div",a2n,[j[51]||(j[51]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Additional Notes",-1)),b(y(ge),{type:"textarea",modelValue:c.value.notes,"onUpdate:modelValue":j[20]||(j[20]=z=>c.value.notes=z),placeholder:"Any additional notes...",rows:3},null,8,["modelValue"])])]),u("div",s2n,[b(y(Z),{variant:"outline",onClick:C},{default:D(()=>[...j[52]||(j[52]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:S,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(d.value?"Save Changes":"Create Case"),1)]),_:1},8,["loading"])])])]))}},o2n={class:"min-h-screen bg-gray-50"},l2n={class:"bg-white border-b border-gray-200 px-6 py-4"},u2n={class:"flex justify-between items-center"},d2n={class:"flex gap-3"},c2n={class:"flex items-center gap-2"},f2n={class:"flex items-center gap-2"},p2n={key:0},h2n={class:"flex items-center gap-2"},m2n={class:"p-6 space-y-6"},g2n={class:"bg-white rounded-lg border border-gray-200 shadow-sm"},v2n={class:"p-6"},y2n={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},b2n=["value"],_2n={class:"flex items-end"},x2n={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer"},w2n={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},k2n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},S2n={class:"flex items-center justify-between"},C2n={class:"text-3xl font-bold text-gray-900 mt-1"},A2n={class:"bg-blue-100 p-3 rounded-full"},T2n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},E2n={class:"flex items-center justify-between"},M2n={class:"text-3xl font-bold text-yellow-600 mt-1"},$2n={class:"bg-yellow-100 p-3 rounded-full"},D2n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},R2n={class:"flex items-center justify-between"},P2n={class:"text-3xl font-bold text-red-600 mt-1"},I2n={class:"bg-red-100 p-3 rounded-full"},O2n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},L2n={class:"flex items-center justify-between"},V2n={class:"text-3xl font-bold text-orange-600 mt-1"},N2n={class:"bg-orange-100 p-3 rounded-full"},j2n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},F2n={class:"flex items-center justify-between"},B2n={class:"text-3xl font-bold text-green-600 mt-1"},z2n={class:"bg-green-100 p-3 rounded-full"},U2n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},H2n={class:"flex items-center justify-between"},q2n={class:"text-3xl font-bold text-red-600 mt-1"},W2n={class:"bg-red-100 p-3 rounded-full"},G2n={class:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden"},Y2n={key:0,class:"p-12 text-center"},K2n={key:1,class:"divide-y divide-gray-200"},X2n=["onClick"],Z2n={class:"flex items-start justify-between"},Q2n={class:"flex-1"},J2n={class:"flex items-center gap-3 mb-2"},ekn={class:"font-medium text-gray-900"},tkn={class:"flex items-center gap-6 text-sm text-gray-500"},nkn={class:"flex items-center gap-1"},rkn={key:0,class:"flex items-center gap-1"},ikn={class:"flex items-center gap-1"},akn={class:"flex items-center gap-6 mt-3 text-sm"},skn={class:"text-gray-700"},okn={class:"text-yellow-600"},lkn={class:"text-green-600"},ukn={class:"text-red-600"},dkn={class:"text-blue-600"},ckn={class:"flex items-center gap-2 mt-3"},fkn={class:"text-right"},pkn={class:"text-xs text-gray-400 mt-1"},hkn={key:2,class:"p-16 text-center"},mkn={class:"bg-gray-100 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center"},gkn={class:"flex gap-4 justify-center"},vkn={class:"flex items-center gap-2"},ykn={class:"flex items-center gap-2"},bkn={key:3,class:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between"},_kn={class:"text-sm text-gray-700 font-medium"},xkn={class:"font-semibold"},wkn={class:"font-semibold"},kkn={class:"font-semibold"},Skn={class:"flex gap-3"},Ckn={class:"space-y-4"},Akn=["value"],Tkn={key:0,class:"border rounded p-3"},Ekn={class:"text-sm font-medium mb-2"},Mkn={class:"max-h-40 overflow-y-auto text-xs"},$kn={key:0,class:"py-1 text-gray-500"},Dkn={__name:"StockTakeList",setup(t){const e=xn(),n=Xl(),r=Q(!1),i=Q(!1),a=Q(!1),s=Q(!1),o=Q([]),l=Q([]),d=Q(0),c=Q(1),f=Q(20),p=Q({stock_take_type:"",status:"",warehouse:"",date_from:"",date_to:""}),h=Q({stock_take_type:"Daily Stock Take",warehouse:"",audit_date:new Date().toISOString().split("T")[0]}),m=Q([]),g=Q(""),v=J(()=>Math.ceil(d.value/f.value)),_=J(()=>o.value.filter(L=>["Draft","Physical Count Submitted"].includes(L.status)).length),x=J(()=>o.value.filter(L=>(L.items_verified_discrepancy||0)>0).length),w=J(()=>o.value.filter(L=>L.status==="Under Investigation").length),k=J(()=>o.value.filter(L=>L.status==="HOD Approved").length),S=J(()=>o.value.reduce((L,U)=>L+Math.abs(U.total_variance_value||0),0));bt(()=>le(this,null,function*(){yield Promise.all([A(),C()])}));function C(){return le(this,null,function*(){try{const L=yield et("frappe.client.get_list",{doctype:"Warehouse Master",filters:{is_active:1},fields:["name","warehouse_code","warehouse_name"],limit_page_length:0});l.value=L}catch(L){console.error("Error loading warehouses:",L)}})}function A(){return le(this,null,function*(){r.value=!0;try{const L={};p.value.stock_take_type&&(L.stock_take_type=p.value.stock_take_type),p.value.status&&(L.status=p.value.status),p.value.warehouse&&(L.warehouse=p.value.warehouse),p.value.date_from&&(L.audit_date=[">=",p.value.date_from]),p.value.date_to&&(L.audit_date?L.audit_date=["between",[p.value.date_from,p.value.date_to]]:L.audit_date=["<=",p.value.date_to]),a.value&&(L.resolution_deadline=["<",new Date().toISOString().split("T")[0]],L.status=["not in",["Resolved","Closed"]]),yield n.loadStockTakeAudits(L,c.value,f.value),o.value=n.returnAudits,d.value=n.returnAuditsTotalCount}catch(L){console.error("Error loading stock takes:",L)}finally{r.value=!1}})}function M(){return le(this,null,function*(){p.value={stock_take_type:"",status:"",warehouse:"",date_from:"",date_to:""},a.value=!1,c.value=1,yield A()})}function $(L){return le(this,null,function*(){c.value=L,yield A()})}function R(){e.push("/inventory-audit/stock-take/new")}function I(L){e.push(`/inventory-audit/stock-take/${L}`)}function B(L){return!L.resolution_deadline||["HOD Approved","Under Investigation"].includes(L.status)?!1:new Date(L.resolution_deadline)<new Date}function j(L){return{"Sales Return":"orange","Daily Stock Take":"blue","Weekly Stock Take":"purple","Monthly Stock Take":"green"}[L]||"gray"}function z(L){return{Draft:"subtle","Physical Count Submitted":"yellow","Analyst Reviewed":"blue","HOD Approved":"green","Under Investigation":"red"}[L]||"gray"}function F(L){return L?new Date(L).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function q(L){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(L||0)}function N(L){const U=L.target.files[0];if(!U)return;const G=new FileReader;G.onload=X=>{g.value=X.target.result,O(g.value)},G.readAsText(U)}function O(L){const U=L.split(`
`).filter(X=>X.trim());if(U.length<2)return;const G=U[0].split(",").map(X=>X.trim().replace(/"/g,""));m.value=U.slice(1).map(X=>{const re=X.split(",").map(de=>de.trim().replace(/"/g,"")),ee={};return G.forEach((de,se)=>{ee[de]=re[se]||""}),ee})}function V(){return le(this,null,function*(){if(!h.value.warehouse){alert("Please select a warehouse");return}i.value=!0;try{const L=yield et("mkaguzi.inventory_audit.doctype.stock_take_audit.stock_take_audit.import_stock_take_from_csv",{file_content:g.value,warehouse:h.value.warehouse,stock_take_type:h.value.stock_take_type,audit_date:h.value.audit_date});alert(`Successfully created ${L.audits.length} stock take(s)`),s.value=!1,m.value=[],g.value="",yield A()}catch(L){console.error("Import error:",L),alert("Import failed: "+L.message)}finally{i.value=!1}})}return(L,U)=>(T(),P("div",o2n,[u("div",l2n,[u("div",u2n,[U[17]||(U[17]=u("div",null,[u("h1",{class:"text-3xl font-bold text-gray-900"},"Stock Take Management"),u("p",{class:"text-gray-600 mt-1"},"Comprehensive physical verification of stock items across all warehouses")],-1)),u("div",d2n,[b(y(Z),{variant:"solid",size:"sm",onClick:U[0]||(U[0]=G=>s.value=!0),class:"bg-blue-600 hover:bg-blue-700 shadow-sm"},{default:D(()=>[u("div",c2n,[b(y(ps),{class:"w-4 h-4"}),U[15]||(U[15]=u("span",null,"Import CSV",-1))])]),_:1}),b(y(Z),{variant:"solid",size:"sm",onClick:M,loading:r.value,class:"bg-gray-600 hover:bg-gray-700 shadow-sm"},{default:D(()=>[u("div",f2n,[b(y(hn),{class:"w-4 h-4"}),r.value?ie("",!0):(T(),P("span",p2n,"Refresh"))])]),_:1},8,["loading"]),b(y(Z),{variant:"solid",size:"sm",onClick:R,class:"bg-green-600 hover:bg-green-700 shadow-sm"},{default:D(()=>[u("div",h2n,[b(y(tt),{class:"w-4 h-4"}),U[16]||(U[16]=u("span",null,"New Stock Take",-1))])]),_:1})])])]),u("div",m2n,[u("div",g2n,[U[27]||(U[27]=u("div",{class:"px-6 py-4 border-b border-gray-200"},[u("h3",{class:"text-lg font-semibold text-gray-900"},"Filters & Search"),u("p",{class:"text-sm text-gray-600 mt-1"},"Filter stock takes by type, status, warehouse, and date range")],-1)),u("div",v2n,[u("div",y2n,[u("div",null,[U[19]||(U[19]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Stock Take Type",-1)),xe(u("select",{"onUpdate:modelValue":U[1]||(U[1]=G=>p.value.stock_take_type=G),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},[...U[18]||(U[18]=[ur('<option value="">All Types</option><option value="Sales Return">Sales Return</option><option value="Daily Stock Take">Daily Stock Take</option><option value="Weekly Stock Take">Weekly Stock Take</option><option value="Monthly Stock Take">Monthly Stock Take</option>',5)])],544),[[gn,p.value.stock_take_type]])]),u("div",null,[U[21]||(U[21]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Status",-1)),xe(u("select",{"onUpdate:modelValue":U[2]||(U[2]=G=>p.value.status=G),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},[...U[20]||(U[20]=[ur('<option value="">All Statuses</option><option value="Draft">Draft</option><option value="Physical Count Submitted">Physical Count Submitted</option><option value="Analyst Reviewed">Analyst Reviewed</option><option value="HOD Approved">HOD Approved</option><option value="Under Investigation">Under Investigation</option>',6)])],544),[[gn,p.value.status]])]),u("div",null,[U[23]||(U[23]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Warehouse",-1)),xe(u("select",{"onUpdate:modelValue":U[3]||(U[3]=G=>p.value.warehouse=G),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},[U[22]||(U[22]=u("option",{value:""},"All Warehouses",-1)),(T(!0),P(_e,null,we(l.value,G=>(T(),P("option",{key:G.name,value:G.name},E(G.warehouse_code)+" - "+E(G.warehouse_name),9,b2n))),128))],544),[[gn,p.value.warehouse]])]),u("div",null,[U[24]||(U[24]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Date From",-1)),xe(u("input",{"onUpdate:modelValue":U[4]||(U[4]=G=>p.value.date_from=G),type:"date",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},null,544),[[Mt,p.value.date_from]])]),u("div",null,[U[25]||(U[25]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Date To",-1)),xe(u("input",{"onUpdate:modelValue":U[5]||(U[5]=G=>p.value.date_to=G),type:"date",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},null,544),[[Mt,p.value.date_to]])]),u("div",_2n,[u("label",x2n,[xe(u("input",{type:"checkbox","onUpdate:modelValue":U[6]||(U[6]=G=>a.value=G),onChange:A,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,544),[[$n,a.value]]),U[26]||(U[26]=u("div",null,[u("span",{class:"text-sm font-medium text-gray-700"},"Overdue Only"),u("p",{class:"text-xs text-gray-500"},"Show only overdue stock takes")],-1))])])])])]),u("div",w2n,[u("div",k2n,[u("div",S2n,[u("div",null,[U[28]||(U[28]=u("p",{class:"text-sm font-medium text-gray-600"},"Total Stock Takes",-1)),u("p",C2n,E(d.value),1)]),u("div",A2n,[b(y(kr),{class:"w-6 h-6 text-blue-600"})])])]),u("div",T2n,[u("div",E2n,[u("div",null,[U[29]||(U[29]=u("p",{class:"text-sm font-medium text-gray-600"},"Pending Count",-1)),u("p",M2n,E(_.value),1)]),u("div",$2n,[b(y(nn),{class:"w-6 h-6 text-yellow-600"})])])]),u("div",D2n,[u("div",R2n,[u("div",null,[U[30]||(U[30]=u("p",{class:"text-sm font-medium text-gray-600"},"With Discrepancy",-1)),u("p",P2n,E(x.value),1)]),u("div",I2n,[b(y(nn),{class:"w-6 h-6 text-red-600"})])])]),u("div",O2n,[u("div",L2n,[u("div",null,[U[31]||(U[31]=u("p",{class:"text-sm font-medium text-gray-600"},"Under Investigation",-1)),u("p",V2n,E(w.value),1)]),u("div",N2n,[b(y(nn),{class:"w-6 h-6 text-orange-600"})])])]),u("div",j2n,[u("div",F2n,[u("div",null,[U[32]||(U[32]=u("p",{class:"text-sm font-medium text-gray-600"},"Resolved",-1)),u("p",B2n,E(k.value),1)]),u("div",z2n,[b(y(Gt),{class:"w-6 h-6 text-green-600"})])])]),u("div",U2n,[u("div",H2n,[u("div",null,[U[33]||(U[33]=u("p",{class:"text-sm font-medium text-gray-600"},"Total Variance",-1)),u("p",q2n,E(q(S.value)),1)]),u("div",W2n,[b(y(nn),{class:"w-6 h-6 text-red-600"})])])])]),u("div",G2n,[U[52]||(U[52]=u("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[u("h3",{class:"text-lg font-semibold text-gray-900"},"Stock Take Records"),u("p",{class:"text-sm text-gray-600 mt-1"},"Click on any record to view details and manage the stock take process")],-1)),r.value?(T(),P("div",Y2n,[...U[34]||(U[34]=[u("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),u("p",{class:"text-gray-500 mt-4 text-lg"},"Loading stock takes...",-1)])])):o.value.length>0?(T(),P("div",K2n,[(T(!0),P(_e,null,we(o.value,G=>(T(),P("div",{key:G.name,class:"p-6 hover:bg-blue-50 cursor-pointer transition-all duration-200 hover:shadow-sm border-l-4 hover:border-l-blue-500",onClick:X=>I(G.name)},[u("div",Z2n,[u("div",Q2n,[u("div",J2n,[u("h4",ekn,E(G.name),1),b(y(Ee),{variant:j(G.stock_take_type)},{default:D(()=>[W(E(G.stock_take_type),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:z(G.status)},{default:D(()=>[W(E(G.status),1)]),_:2},1032,["variant"]),B(G)?(T(),he(y(Ee),{key:0,variant:"red"},{default:D(()=>[b(y(nn),{class:"w-3 h-3 mr-1"}),U[35]||(U[35]=W(" Overdue ",-1))]),_:1})):ie("",!0)]),u("div",tkn,[u("span",nkn,[b(y(yfe),{class:"w-4 h-4"}),W(" "+E(G.warehouse),1)]),G.branch?(T(),P("span",rkn,[b(y(nb),{class:"w-4 h-4"}),W(" "+E(G.branch),1)])):ie("",!0),u("span",ikn,[b(y(er),{class:"w-4 h-4"}),W(" "+E(F(G.audit_date)),1)])]),u("div",akn,[u("span",skn,[U[36]||(U[36]=W(" Total Items: ",-1)),u("strong",null,E(G.total_items||0),1)]),u("span",okn,[U[37]||(U[37]=W(" Pending: ",-1)),u("strong",null,E(G.items_pending||0),1)]),u("span",lkn,[U[38]||(U[38]=W(" Match: ",-1)),u("strong",null,E(G.items_verified_match||0),1)]),u("span",ukn,[U[39]||(U[39]=W(" Discrepancy: ",-1)),u("strong",null,E(G.items_verified_discrepancy||0),1)]),u("span",dkn,[U[40]||(U[40]=W(" Resolved: ",-1)),u("strong",null,E(G.items_resolved||0),1)])]),u("div",ckn,[u("span",{class:fe(["text-xs px-2 py-1 rounded-full",G.analyst_verified?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},E(G.analyst_verified?"":"")+" Analyst ",3),u("span",{class:fe(["text-xs px-2 py-1 rounded-full",G.taker_verified?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},E(G.taker_verified?"":"")+" Stock Taker ",3),u("span",{class:fe(["text-xs px-2 py-1 rounded-full",G.manager_confirmed?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},E(G.manager_confirmed?"":"")+" Manager ",3),u("span",{class:fe(["text-xs px-2 py-1 rounded-full",G.hod_approved?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},E(G.hod_approved?"":"")+" HOD ",3)])]),u("div",fkn,[U[41]||(U[41]=u("p",{class:"text-sm text-gray-500"},"Variance Value",-1)),u("p",{class:fe(["text-xl font-bold",(G.total_variance_value||0)>0?"text-red-600":"text-green-600"])},E(q(G.total_variance_value||0)),3),u("p",pkn," Deadline: "+E(F(G.resolution_deadline)),1)])])],8,X2n))),128))])):(T(),P("div",hkn,[u("div",mkn,[b(y(kr),{class:"w-12 h-12 text-gray-400"})]),U[44]||(U[44]=u("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"No Stock Takes Found",-1)),U[45]||(U[45]=u("p",{class:"text-gray-600 mb-8 max-w-md mx-auto"},"Get started by importing stock data from CSV or creating a new stock take record to begin the physical verification process.",-1)),u("div",gkn,[b(y(Z),{variant:"solid",size:"sm",onClick:U[7]||(U[7]=G=>s.value=!0),class:"bg-blue-600 hover:bg-blue-700 shadow-sm px-6 py-3"},{default:D(()=>[u("div",vkn,[b(y(ps),{class:"w-5 h-5"}),U[42]||(U[42]=u("span",null,"Import CSV",-1))])]),_:1}),b(y(Z),{variant:"solid",size:"sm",onClick:R,class:"bg-green-600 hover:bg-green-700 shadow-sm px-6 py-3"},{default:D(()=>[u("div",ykn,[b(y(tt),{class:"w-5 h-5"}),U[43]||(U[43]=u("span",null,"New Stock Take",-1))])]),_:1})])])),v.value>1?(T(),P("div",bkn,[u("p",_kn,[U[46]||(U[46]=W(" Showing ",-1)),u("span",xkn,E((c.value-1)*f.value+1),1),U[47]||(U[47]=W(" - ",-1)),u("span",wkn,E(Math.min(c.value*f.value,d.value)),1),U[48]||(U[48]=W(" of ",-1)),u("span",kkn,E(d.value),1),U[49]||(U[49]=W(" stock takes ",-1))]),u("div",Skn,[b(y(Z),{variant:"solid",size:"sm",disabled:c.value===1,onClick:U[8]||(U[8]=G=>$(c.value-1)),class:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-sm px-4 py-2"},{default:D(()=>[...U[50]||(U[50]=[u("span",null,"Previous",-1)])]),_:1},8,["disabled"]),b(y(Z),{variant:"solid",size:"sm",disabled:c.value===v.value,onClick:U[9]||(U[9]=G=>$(c.value+1)),class:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-sm px-4 py-2"},{default:D(()=>[...U[51]||(U[51]=[u("span",null,"Next",-1)])]),_:1},8,["disabled"])])])):ie("",!0)]),b(y(zt),{modelValue:s.value,"onUpdate:modelValue":U[14]||(U[14]=G=>s.value=G),options:{title:"Import Stock Take from CSV"}},{"body-content":D(()=>[u("div",Ckn,[u("div",null,[U[54]||(U[54]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Stock Take Type "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("select",{"onUpdate:modelValue":U[10]||(U[10]=G=>h.value.stock_take_type=G),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...U[53]||(U[53]=[u("option",{value:"Daily Stock Take"},"Daily Stock Take",-1),u("option",{value:"Weekly Stock Take"},"Weekly Stock Take",-1),u("option",{value:"Monthly Stock Take"},"Monthly Stock Take",-1),u("option",{value:"Sales Return"},"Sales Return",-1)])],512),[[gn,h.value.stock_take_type]])]),u("div",null,[U[56]||(U[56]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Warehouse "),u("span",{class:"text-red-500"},"*")],-1)),xe(u("select",{"onUpdate:modelValue":U[11]||(U[11]=G=>h.value.warehouse=G),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[U[55]||(U[55]=u("option",{value:""},"Select Warehouse",-1)),(T(!0),P(_e,null,we(l.value,G=>(T(),P("option",{key:G.name,value:G.name},E(G.warehouse_code)+" - "+E(G.warehouse_name),9,Akn))),128))],512),[[gn,h.value.warehouse]])]),u("div",null,[U[57]||(U[57]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock Take Date",-1)),xe(u("input",{"onUpdate:modelValue":U[12]||(U[12]=G=>h.value.audit_date=G),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[Mt,h.value.audit_date]])]),u("div",null,[U[58]||(U[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Upload CSV File",-1)),u("input",{type:"file",accept:".csv",onChange:N,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),U[59]||(U[59]=u("div",{class:"text-sm text-gray-500 bg-gray-50 p-3 rounded"},[u("p",{class:"font-medium mb-1"},"Expected CSV columns:"),u("p",null,"Item Code, Description, System Qty, Value, Warehouse, Date")],-1)),m.value.length>0?(T(),P("div",Tkn,[u("p",Ekn,"Preview ("+E(m.value.length)+" items):",1),u("div",Mkn,[(T(!0),P(_e,null,we(m.value.slice(0,5),(G,X)=>(T(),P("div",{key:X,class:"py-1 border-b"},E(G["Item Code"])+" - "+E(G.Description)+" (Qty: "+E(G["System Qty"]||G["Return Qty"])+") ",1))),128)),m.value.length>5?(T(),P("div",$kn," ... and "+E(m.value.length-5)+" more items ",1)):ie("",!0)])])):ie("",!0)])]),actions:D(()=>[b(y(Z),{variant:"solid",size:"sm",onClick:U[13]||(U[13]=G=>s.value=!1),class:"bg-gray-600 hover:bg-gray-700"},{default:D(()=>[...U[60]||(U[60]=[u("span",null,"Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",size:"sm",onClick:V,disabled:!h.value.warehouse||m.value.length===0,loading:i.value,class:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400"},{default:D(()=>[u("span",null,"Import "+E(m.value.length)+" Items",1)]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])])]))}},Rkn={class:"p-6"},Pkn={class:"flex items-center justify-between mb-6"},Ikn={class:"flex items-center gap-4"},Okn={class:"text-2xl font-bold text-gray-900"},Lkn={class:"text-gray-500 mt-1"},Vkn={class:"flex items-center gap-2"},Nkn={class:"flex items-center gap-2 ml-auto"},jkn={key:0,class:"flex items-center justify-center py-20"},Fkn={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Bkn={class:"lg:col-span-2 space-y-6"},zkn={key:0,class:"bg-white rounded-lg border p-6"},Ukn={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},Hkn={class:"flex items-start gap-3"},qkn={class:"space-y-4"},Wkn={class:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors"},Gkn={key:0,class:"space-y-2"},Ykn={key:1,class:"space-y-2"},Kkn={class:"text-xs text-gray-500"},Xkn={class:"flex gap-2 justify-center"},Zkn={class:"bg-gray-50 rounded-lg p-4"},Qkn={class:"grid grid-cols-2 gap-4 text-sm"},Jkn={class:"font-medium ml-2"},eSn={key:0,class:"mt-2 text-xs text-red-600"},tSn={key:0},nSn={key:1},rSn={class:"bg-white rounded-lg border p-6"},iSn={class:"flex items-center justify-between mb-4"},aSn={class:"flex items-center gap-2"},sSn={class:"ml-2"},oSn={class:"text-xs text-gray-500"},lSn={class:"flex-1 h-1 mx-4 bg-gray-200 rounded"},uSn={class:"flex items-center gap-2"},dSn={class:"ml-2"},cSn={class:"text-xs text-gray-500"},fSn={class:"flex-1 h-1 mx-4 bg-gray-200 rounded"},pSn={class:"flex items-center gap-2"},hSn={class:"ml-2"},mSn={class:"text-xs text-gray-500"},gSn={class:"flex-1 h-1 mx-4 bg-gray-200 rounded"},vSn={class:"flex items-center gap-2"},ySn={class:"ml-2"},bSn={class:"text-xs text-gray-500"},_Sn={class:"flex items-center gap-3 pt-4 border-t"},xSn={key:3,class:"text-green-600 font-medium flex items-center"},wSn={class:"bg-white rounded-lg border p-6"},kSn={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},SSn={class:"text-center p-4 bg-gray-50 rounded-lg"},CSn={class:"text-2xl font-bold text-gray-900"},ASn={class:"text-center p-4 bg-yellow-50 rounded-lg"},TSn={class:"text-2xl font-bold text-yellow-600"},ESn={class:"text-center p-4 bg-green-50 rounded-lg"},MSn={class:"text-2xl font-bold text-green-600"},$Sn={class:"text-center p-4 bg-red-50 rounded-lg"},DSn={class:"text-2xl font-bold text-red-600"},RSn={class:"text-center p-4 bg-blue-50 rounded-lg"},PSn={class:"text-2xl font-bold text-blue-600"},ISn={class:"mt-4 pt-4 border-t text-center"},OSn={class:"bg-white rounded-lg border p-6"},LSn={class:"flex items-center justify-between mb-4"},VSn={class:"flex items-center gap-2"},NSn={class:"overflow-x-auto"},jSn={class:"min-w-full divide-y divide-gray-200"},FSn={class:"bg-white divide-y divide-gray-200"},BSn={class:"px-3 py-3 text-sm text-gray-500"},zSn={class:"px-3 py-3"},USn={class:"font-medium text-gray-900"},HSn={class:"text-sm text-gray-500"},qSn={class:"px-3 py-3 text-sm text-right"},WSn={class:"px-3 py-3 text-right"},GSn={key:0},YSn={key:1},KSn={class:"px-3 py-3 text-sm text-right"},XSn={class:"px-3 py-3"},ZSn={class:"px-3 py-3 text-sm"},QSn={key:1,class:"text-gray-400"},JSn={class:"px-3 py-3"},eCn={class:"flex items-center gap-1"},tCn={key:0},nCn={key:1,class:"bg-white rounded-lg border p-6"},rCn=["innerHTML"],iCn={class:"space-y-6"},aCn={class:"bg-white rounded-lg border p-6"},sCn={class:"space-y-4"},oCn={key:0,class:"text-xs ml-2 bg-red-100 text-red-700 px-2 py-1 rounded"},lCn={class:"bg-white rounded-lg border p-6"},uCn={class:"space-y-3"},dCn={class:"flex justify-between"},cCn={class:"font-medium"},fCn={class:"flex justify-between"},pCn={class:"font-medium"},hCn={class:"flex justify-between"},mCn={class:"font-medium"},gCn={class:"flex justify-between"},vCn={class:"font-medium"},yCn={class:"bg-white rounded-lg border p-6"},bCn={class:"space-y-4"},_Cn={key:0,class:"flex gap-3"},xCn={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},wCn={class:"text-xs text-gray-500"},kCn={class:"text-xs text-gray-400"},SCn={key:1,class:"flex gap-3"},CCn={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},ACn={class:"text-xs text-gray-500"},TCn={class:"text-xs text-gray-400"},ECn={key:2,class:"flex gap-3"},MCn={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},$Cn={class:"text-xs text-gray-500"},DCn={class:"text-xs text-gray-400"},RCn={key:3,class:"flex gap-3"},PCn={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},ICn={class:"text-xs text-gray-500"},OCn={class:"text-xs text-gray-400"},LCn={key:4,class:"flex gap-3"},VCn={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},NCn={class:"text-xs text-gray-500"},jCn={key:5,class:"text-sm text-gray-500 text-center py-4"},FCn={class:"space-y-4"},BCn={class:"bg-gray-50 p-4 rounded-lg"},zCn={class:"text-sm"},UCn={class:"text-sm"},HCn={class:"text-sm"},qCn={__name:"StockTakeDetail",setup(t){const e=gs(),n=xn(),r=Q(!0),i=Q(!1),a=Q(!1),s=Q(null),o=Q(""),l=Q(!1),d=Q(null),c=Q([]),f=Q({employee:"",reason:""}),p=Q(null),h=Q(null);bt(()=>le(this,null,function*(){yield Promise.all([m(),g()])}));function m(){return le(this,null,function*(){r.value=!0;try{const K=yield et("frappe.client.get",{doctype:"Stock Take Audit",name:e.params.id});s.value=K}catch(K){console.error("Error loading audit:",K)}finally{r.value=!1}})}function g(){return le(this,null,function*(){try{const K=yield et("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});c.value=K.map(H=>({label:H.full_name||H.name,value:H.name}))}catch(K){console.error("Error loading users:",K)}})}const v=J(()=>{var H;return{Draft:"subtle","Physical Count Submitted":"yellow","Analyst Reviewed":"blue","HOD Approved":"green","Under Investigation":"red"}[(H=s.value)==null?void 0:H.status]||"subtle"}),_=J(()=>{var K;return!["HOD Approved","Under Investigation"].includes((K=s.value)==null?void 0:K.status)}),x=J(()=>{var ae;if(!((ae=s.value)!=null&&ae.stock_take_items))return!1;const K=s.value.stock_take_items.every(be=>be.physical_quantity!==null),H=s.value.signed_stock_take_copy;return K&&H}),w=J(()=>{var K;return((K=s.value)==null?void 0:K.status)==="Physical Count Submitted"}),k=J(()=>{var K;return((K=s.value)==null?void 0:K.status)==="Analyst Reviewed"}),S=J(()=>{var K,H;return((H=(K=s.value)==null?void 0:K.stock_take_items)==null?void 0:H.length)||0}),C=J(()=>{var K;return(K=s.value)!=null&&K.stock_take_items?s.value.stock_take_items.filter(H=>H.physical_quantity!==null&&H.physical_quantity!==void 0).length:0}),A=J(()=>{var K;return(K=s.value)!=null&&K.stock_take_items?s.value.stock_take_items.every(H=>H.physical_quantity!==null&&H.physical_quantity!==void 0):!1}),M=J(()=>{var K;return(K=s.value)!=null&&K.stock_take_items?o.value?s.value.stock_take_items.filter(H=>H.verification_status===o.value):s.value.stock_take_items:[]});function $(K){var be,ue,pe,ye;const H={1:((be=s.value)==null?void 0:be.status)!=="Draft",2:(ue=s.value)==null?void 0:ue.physical_count_submitted,3:(pe=s.value)==null?void 0:pe.analyst_reviewed,4:(ye=s.value)==null?void 0:ye.hod_approved};return H[K]?"bg-green-500 text-white":(K===1?!0:H[K-1])&&!H[K]?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}function R(K){return K.verification_status==="Verified-Match"?"bg-green-50":K.verification_status==="Verified-Discrepancy"?"bg-red-50":K.verification_status==="Resolved"?"bg-blue-50":""}function I(K){return{"Verified-Match":"green","Verified-Discrepancy":"red",Resolved:"blue",Pending:"yellow"}[K]||"subtle"}function B(K){return!K||K===0?"text-green-600 font-medium":"text-red-600 font-medium"}function j(K){return{"Stock Amendment":"text-blue-600","Charge Staff":"text-red-600","Write-off":"text-gray-600","Under Investigation":"text-yellow-600"}[K]||""}function z(K){return K?new Date(K)<new Date:!1}function F(K){return K?new Date(K).toLocaleDateString():"-"}function q(K){return K?new Date(K).toLocaleString():"-"}function N(K){return K==null?"KES 0":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(K)}function O(){return le(this,null,function*(){i.value=!0;try{yield et("run_doc_method",{dt:"Stock Take Audit",dn:e.params.id,method:"submit_physical_count"}),yield m()}catch(K){console.error("Error:",K),alert(K.message)}finally{i.value=!1}})}function V(){return le(this,null,function*(){i.value=!0;try{yield et("run_doc_method",{dt:"Stock Take Audit",dn:e.params.id,method:"analyst_review"}),yield m()}catch(K){console.error("Error:",K),alert(K.message)}finally{i.value=!1}})}function L(){return le(this,null,function*(){i.value=!0;try{yield et("run_doc_method",{dt:"Stock Take Audit",dn:e.params.id,method:"hod_approve"}),yield m()}catch(K){console.error("Error:",K),alert(K.message)}finally{i.value=!1}})}function U(K){d.value=K,f.value={employee:"",reason:`Stock discrepancy for ${K.item_code}`},l.value=!0}function G(){return le(this,null,function*(){if(!f.value.employee){alert("Please select an employee");return}a.value=!0;try{yield et("run_doc_method",{dt:"Stock Take Audit",dn:e.params.id,method:"create_staff_charge",args:{item_row_name:d.value.name,employee:f.value.employee,charge_reason:f.value.reason}}),l.value=!1,yield m()}catch(K){console.error("Error:",K),alert(K.message)}finally{a.value=!1}})}function X(K){window.open(`/app/staff-charge-record/${K}`,"_blank")}function re(){n.push("/inventory-audit/stock-take")}function ee(){n.push(`/inventory-audit/stock-take/${e.params.id}/edit`)}function de(){window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=Stock Take Audit&name=${e.params.id}&format=Stock Take Audit Daily Summary`,"_blank")}function se(){console.log("Export to Excel")}function te(K){return le(this,null,function*(){const H=K.target.files[0];if(!H)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png"].includes(H.type)){alert("Please upload a PDF, DOC, DOCX, JPG, or PNG file");return}const be=10*1024*1024;if(H.size>be){alert("File size must be less than 10MB");return}try{const ue=new FormData;ue.append("file",H),ue.append("is_private","1"),ue.append("doctype","Stock Take Audit"),ue.append("docname",e.params.id),ue.append("fieldname","signed_stock_take_copy");const pe=yield fetch("/api/method/upload_file",{method:"POST",body:ue,headers:{Accept:"application/json"}});if(!pe.ok){const Me=yield pe.text();throw new Error(`Upload failed: ${pe.status} ${Me}`)}const ye=yield pe.json();if(ye.message&&ye.message.file_url)yield et("frappe.client.set_value",{doctype:"Stock Take Audit",name:e.params.id,fieldname:"signed_stock_take_copy",value:ye.message.file_url}),yield m();else throw new Error("Invalid response from server")}catch(ue){console.error("Error uploading file:",ue),alert("Error uploading file: "+ue.message)}})}function ne(K){return K?K.split("/").pop():""}function ce(K){K&&window.open(K,"_blank")}function ve(){return le(this,null,function*(){if(confirm("Are you sure you want to remove the signed stock take copy?"))try{yield et("frappe.client.set_value",{doctype:"Stock Take Audit",name:e.params.id,fieldname:"signed_stock_take_copy",value:""}),yield m()}catch(K){console.error("Error removing attachment:",K),alert("Error removing attachment: "+K.message)}})}function Y(K,H){return le(this,null,function*(){if(!h.value){h.value=K.name;try{yield et("frappe.client.set_value",{doctype:"Stock Take Audit Item",name:K.name,fieldname:"physical_quantity",value:parseFloat(H)||0}),yield m()}catch(ae){console.error("Error updating physical quantity:",ae),alert("Error updating physical quantity: "+ae.message)}finally{h.value=null}}})}return(K,H)=>{var ae,be,ue,pe;return T(),P("div",Rkn,[u("div",Pkn,[u("div",Ikn,[b(y(Z),{variant:"ghost",onClick:re,class:"p-2"},{default:D(()=>[b(y(ti),{class:"w-4 h-4"})]),_:1}),u("div",null,[u("h1",Okn,E(((ae=s.value)==null?void 0:ae.name)||"Loading..."),1),u("p",Lkn,E((be=s.value)==null?void 0:be.stock_take_type)+" | "+E((ue=s.value)==null?void 0:ue.warehouse)+" | "+E(F((pe=s.value)==null?void 0:pe.audit_date)),1)])]),u("div",Vkn,[b(y(Ee),{variant:v.value},{default:D(()=>{var ye;return[W(E((ye=s.value)==null?void 0:ye.status),1)]}),_:1},8,["variant"]),u("div",Nkn,[_.value?(T(),he(y(Z),{key:0,variant:"outline",onClick:ee},{default:D(()=>[b(y(vn),{class:"w-4 h-4 mr-2"}),H[7]||(H[7]=W(" Edit ",-1))]),_:1})):ie("",!0),b(y(Z),{variant:"outline",onClick:de},{default:D(()=>[b(y(KD),{class:"w-4 h-4 mr-2"}),H[8]||(H[8]=W(" Print ",-1))]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:se},{default:D(()=>[b(y(bn),{class:"w-4 h-4 mr-2"}),H[9]||(H[9]=W(" Export ",-1))]),_:1})])])]),r.value?(T(),P("div",jkn,[...H[10]||(H[10]=[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):s.value?(T(),P("div",Fkn,[u("div",Bkn,[s.value.status==="Draft"?(T(),P("div",zkn,[H[22]||(H[22]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Stock Take Preparation",-1)),u("div",Ukn,[u("div",Hkn,[b(y(Gt),{class:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),H[11]||(H[11]=u("div",null,[u("h4",{class:"text-sm font-medium text-blue-900 mb-1"},"Stock Taker Tasks"),u("ul",{class:"text-sm text-blue-800 space-y-1"},[u("li",null," Enter physical quantities for all items in the table below"),u("li",null," Upload the manager-signed physical stock take copy"),u("li",null," Review and verify all counts are accurate"),u("li",null," Submit for analyst review once everything is complete")])],-1))])]),u("div",qkn,[u("div",null,[H[17]||(H[17]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Signed Stock Take Copy "),u("span",{class:"text-red-500"},"*")],-1)),u("div",Wkn,[s.value.signed_stock_take_copy?(T(),P("div",Ykn,[b(y(vt),{class:"w-8 h-8 text-green-500 mx-auto"}),u("div",null,[H[14]||(H[14]=u("p",{class:"text-sm font-medium text-green-700"},"Signed copy attached",-1)),u("p",Kkn,E(ne(s.value.signed_stock_take_copy)),1)]),u("div",Xkn,[b(y(Z),{variant:"outline",size:"sm",onClick:H[1]||(H[1]=ye=>ce(s.value.signed_stock_take_copy))},{default:D(()=>[b(y(ar),{class:"w-4 h-4 mr-2"}),H[15]||(H[15]=W(" View ",-1))]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:ve},{default:D(()=>[b(y(hi),{class:"w-4 h-4 mr-2"}),H[16]||(H[16]=W(" Remove ",-1))]),_:1})])])):(T(),P("div",Gkn,[b(y(ps),{class:"w-8 h-8 text-gray-400 mx-auto"}),H[13]||(H[13]=u("div",null,[u("p",{class:"text-sm text-gray-600"},"Upload the manager-signed physical stock take copy"),u("p",{class:"text-xs text-gray-500 mt-1"},"PDF, DOC, DOCX, JPG, PNG files accepted")],-1)),u("input",{type:"file",ref_key:"fileInput",ref:p,onChange:te,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",class:"hidden"},null,544),b(y(Z),{variant:"outline",size:"sm",onClick:H[0]||(H[0]=ye=>K.$refs.fileInput.click())},{default:D(()=>[b(y(ps),{class:"w-4 h-4 mr-2"}),H[12]||(H[12]=W(" Choose File ",-1))]),_:1})]))]),H[18]||(H[18]=u("p",{class:"text-xs text-gray-500 mt-2"}," This signed document is required before submitting the physical count for review. ",-1))]),u("div",Zkn,[H[21]||(H[21]=u("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Physical Count Status",-1)),u("div",Qkn,[u("div",null,[H[19]||(H[19]=u("span",{class:"text-gray-500"},"Items Counted:",-1)),u("span",Jkn,E(C.value)+" / "+E(S.value),1)]),u("div",null,[H[20]||(H[20]=u("span",{class:"text-gray-500"},"Ready to Submit:",-1)),u("span",{class:fe([x.value?"text-green-600 font-medium":"text-red-600","ml-2"])},E(x.value?"Yes":"No"),3)])]),x.value?ie("",!0):(T(),P("div",eSn,[A.value?ie("",!0):(T(),P("p",tSn," All items must have physical quantities entered")),s.value.signed_stock_take_copy?ie("",!0):(T(),P("p",nSn," Signed stock take copy must be attached"))]))])])])):ie("",!0),u("div",rSn,[H[35]||(H[35]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Approval Workflow",-1)),u("div",iSn,[u("div",aSn,[u("div",{class:fe([$(1),"w-10 h-10 rounded-full flex items-center justify-center"])},[...H[23]||(H[23]=[u("span",{class:"text-sm font-medium"},"1",-1)])],2),u("div",sSn,[H[24]||(H[24]=u("p",{class:"text-sm font-medium"},"Analyst",-1)),u("p",oSn,E(s.value.created_by||"Not assigned"),1)])]),u("div",lSn,[u("div",{class:fe([s.value.status!=="Draft"?"bg-green-500":"bg-gray-200","h-full rounded"]),style:nt({width:s.value.status!=="Draft"?"100%":"0%"})},null,6)]),u("div",uSn,[u("div",{class:fe([$(2),"w-10 h-10 rounded-full flex items-center justify-center"])},[...H[25]||(H[25]=[u("span",{class:"text-sm font-medium"},"2",-1)])],2),u("div",dSn,[H[26]||(H[26]=u("p",{class:"text-sm font-medium"},"Stock Taker",-1)),u("p",cSn,E(s.value.physical_count_submitted_by||"Not assigned"),1)])]),u("div",fSn,[u("div",{class:fe([s.value.physical_count_submitted?"bg-green-500":"bg-gray-200","h-full rounded"]),style:nt({width:s.value.physical_count_submitted?"100%":"0%"})},null,6)]),u("div",pSn,[u("div",{class:fe([$(3),"w-10 h-10 rounded-full flex items-center justify-center"])},[...H[27]||(H[27]=[u("span",{class:"text-sm font-medium"},"3",-1)])],2),u("div",hSn,[H[28]||(H[28]=u("p",{class:"text-sm font-medium"},"Analyst Review",-1)),u("p",mSn,E(s.value.stock_analyst||"Not assigned"),1)])]),u("div",gSn,[u("div",{class:fe([s.value.analyst_reviewed?"bg-green-500":"bg-gray-200","h-full rounded"]),style:nt({width:s.value.analyst_reviewed?"100%":"0%"})},null,6)]),u("div",vSn,[u("div",{class:fe([$(4),"w-10 h-10 rounded-full flex items-center justify-center"])},[...H[29]||(H[29]=[u("span",{class:"text-sm font-medium"},"4",-1)])],2),u("div",ySn,[H[30]||(H[30]=u("p",{class:"text-sm font-medium"},"HOD",-1)),u("p",bSn,E(s.value.hod_approver||"Not assigned"),1)])])]),u("div",_Sn,[s.value.status==="Draft"&&x.value?(T(),he(y(Z),{key:0,variant:"solid",onClick:O,loading:i.value},{default:D(()=>[b(y(Gt),{class:"w-4 h-4 mr-2"}),H[31]||(H[31]=W(" Submit Physical Count ",-1))]),_:1},8,["loading"])):ie("",!0),s.value.status==="Physical Count Submitted"&&w.value?(T(),he(y(Z),{key:1,variant:"solid",onClick:V,loading:i.value},{default:D(()=>[b(y(Gt),{class:"w-4 h-4 mr-2"}),H[32]||(H[32]=W(" Analyst Review ",-1))]),_:1},8,["loading"])):ie("",!0),s.value.status==="Analyst Reviewed"&&k.value?(T(),he(y(Z),{key:2,variant:"solid",onClick:L,loading:i.value},{default:D(()=>[b(y(Gt),{class:"w-4 h-4 mr-2"}),H[33]||(H[33]=W(" HOD Approve ",-1))]),_:1},8,["loading"])):ie("",!0),s.value.status==="HOD Approved"?(T(),P("span",xSn,[b(y(Gt),{class:"w-4 h-4 mr-2"}),H[34]||(H[34]=W(" Fully Approved ",-1))])):ie("",!0)])]),u("div",wSn,[H[42]||(H[42]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Summary",-1)),u("div",kSn,[u("div",SSn,[u("p",CSn,E(s.value.total_items||0),1),H[36]||(H[36]=u("p",{class:"text-sm text-gray-500"},"Total Items",-1))]),u("div",ASn,[u("p",TSn,E(s.value.items_pending||0),1),H[37]||(H[37]=u("p",{class:"text-sm text-gray-500"},"Pending",-1))]),u("div",ESn,[u("p",MSn,E(s.value.items_verified_match||0),1),H[38]||(H[38]=u("p",{class:"text-sm text-gray-500"},"Matched",-1))]),u("div",$Sn,[u("p",DSn,E(s.value.items_verified_discrepancy||0),1),H[39]||(H[39]=u("p",{class:"text-sm text-gray-500"},"Discrepancy",-1))]),u("div",RSn,[u("p",PSn,E(s.value.items_resolved||0),1),H[40]||(H[40]=u("p",{class:"text-sm text-gray-500"},"Resolved",-1))])]),u("div",ISn,[H[41]||(H[41]=u("p",{class:"text-sm text-gray-500"},"Total Variance Value",-1)),u("p",{class:fe(["text-2xl font-bold",s.value.total_variance_value>0?"text-red-600":"text-green-600"])},E(N(s.value.total_variance_value||0)),3)])]),u("div",OSn,[u("div",LSn,[H[44]||(H[44]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Stock Take Items",-1)),u("div",VSn,[xe(u("select",{"onUpdate:modelValue":H[2]||(H[2]=ye=>o.value=ye),class:"text-sm border rounded px-3 py-1.5"},[...H[43]||(H[43]=[ur('<option value="">All Items</option><option value="Pending">Pending</option><option value="Verified-Match">Matched</option><option value="Verified-Discrepancy">Discrepancy</option><option value="Resolved">Resolved</option>',5)])],512),[[gn,o.value]])])]),u("div",NSn,[u("table",jSn,[H[46]||(H[46]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"#"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Item"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"System Qty"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Physical Qty"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Variance"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Resolution"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",FSn,[(T(!0),P(_e,null,we(M.value,(ye,Me)=>(T(),P("tr",{key:ye.name,class:fe([R(ye),"hover:bg-gray-50"])},[u("td",BSn,E(Me+1),1),u("td",zSn,[u("div",USn,E(ye.item_code),1),u("div",HSn,E(ye.item_description),1)]),u("td",qSn,E(ye.system_quantity||0),1),u("td",WSn,[s.value.status==="Draft"?(T(),P("div",GSn,[b(y(ge),{type:"number",modelValue:ye.physical_quantity,"onUpdate:modelValue":Te=>Y(ye,Te),placeholder:"Count",class:"w-20 text-right",disabled:h.value===ye.name},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(T(),P("div",YSn,E(ye.physical_quantity!==null?ye.physical_quantity:"-"),1))]),u("td",KSn,[u("span",{class:fe(B(ye.variance_quantity))},E(ye.variance_quantity||0),3)]),u("td",XSn,[b(y(Ee),{variant:I(ye.verification_status)},{default:D(()=>[W(E(ye.verification_status||"Pending"),1)]),_:2},1032,["variant"])]),u("td",ZSn,[ye.resolution_type?(T(),P("span",{key:0,class:fe(j(ye.resolution_type))},E(ye.resolution_type),3)):(T(),P("span",QSn,"-"))]),u("td",JSn,[u("div",eCn,[ye.resolution_type==="Charge Staff"&&!ye.staff_charge_record?(T(),he(y(Z),{key:0,variant:"ghost",size:"sm",onClick:Te=>U(ye),title:"Create Staff Charge",class:"p-1"},{default:D(()=>[b(y(vfe),{class:"w-4 h-4 text-red-600"})]),_:1},8,["onClick"])):ie("",!0),ye.staff_charge_record?(T(),he(y(Z),{key:1,variant:"ghost",size:"sm",onClick:Te=>X(ye.staff_charge_record),title:"View Staff Charge",class:"p-1"},{default:D(()=>[b(y(vt),{class:"w-4 h-4 text-blue-600"})]),_:1},8,["onClick"])):ie("",!0)])])],2))),128)),M.value.length===0?(T(),P("tr",tCn,[...H[45]||(H[45]=[u("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"}," No items found ",-1)])])):ie("",!0)])])])]),s.value.notes?(T(),P("div",nCn,[H[47]||(H[47]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),u("div",{class:"prose max-w-none text-gray-600",innerHTML:s.value.notes},null,8,rCn)])):ie("",!0)]),u("div",iCn,[u("div",aCn,[H[50]||(H[50]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Deadlines",-1)),u("div",sCn,[u("div",null,[H[48]||(H[48]=u("p",{class:"text-sm text-gray-500"},"Resolution Deadline",-1)),u("p",{class:fe(["font-medium",z(s.value.resolution_deadline)?"text-red-600":""])},[W(E(F(s.value.resolution_deadline))+" ",1),z(s.value.resolution_deadline)?(T(),P("span",oCn,"OVERDUE")):ie("",!0)],2)]),u("div",null,[H[49]||(H[49]=u("p",{class:"text-sm text-gray-500"},"Investigation Deadline",-1)),u("p",{class:fe(["font-medium",z(s.value.investigation_deadline)?"text-red-600":""])},E(F(s.value.investigation_deadline)),3)])])]),u("div",lCn,[H[55]||(H[55]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Stock Take Info",-1)),u("div",uCn,[u("div",dCn,[H[51]||(H[51]=u("span",{class:"text-gray-500"},"Stock Take Type",-1)),u("span",cCn,E(s.value.stock_take_type),1)]),u("div",fCn,[H[52]||(H[52]=u("span",{class:"text-gray-500"},"Warehouse",-1)),u("span",pCn,E(s.value.warehouse),1)]),u("div",hCn,[H[53]||(H[53]=u("span",{class:"text-gray-500"},"Branch",-1)),u("span",mCn,E(s.value.branch||"-"),1)]),u("div",gCn,[H[54]||(H[54]=u("span",{class:"text-gray-500"},"Audit Date",-1)),u("span",vCn,E(F(s.value.audit_date)),1)])])]),u("div",yCn,[H[61]||(H[61]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Approval Timeline",-1)),u("div",bCn,[s.value.status!=="Draft"?(T(),P("div",_Cn,[u("div",xCn,[b(y(Wr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[H[56]||(H[56]=u("p",{class:"font-medium text-sm"},"Data Imported",-1)),u("p",wCn,E(q(s.value.import_date)),1),u("p",kCn,E(s.value.created_by),1)])])):ie("",!0),s.value.physical_count_submitted_date?(T(),P("div",SCn,[u("div",CCn,[b(y(Wr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[H[57]||(H[57]=u("p",{class:"font-medium text-sm"},"Physical Count Submitted",-1)),u("p",ACn,E(q(s.value.physical_count_submitted_date)),1),u("p",TCn,E(s.value.physical_count_submitted_by),1)])])):ie("",!0),s.value.analyst_review_date?(T(),P("div",ECn,[u("div",MCn,[b(y(Wr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[H[58]||(H[58]=u("p",{class:"font-medium text-sm"},"Analyst Reviewed",-1)),u("p",$Cn,E(q(s.value.analyst_review_date)),1),u("p",DCn,E(s.value.stock_analyst),1)])])):ie("",!0),s.value.hod_approval_date?(T(),P("div",RCn,[u("div",PCn,[b(y(Wr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[H[59]||(H[59]=u("p",{class:"font-medium text-sm"},"HOD Approved",-1)),u("p",ICn,E(q(s.value.hod_approval_date)),1),u("p",OCn,E(s.value.hod_approver),1)])])):ie("",!0),s.value.final_report_date?(T(),P("div",LCn,[u("div",VCn,[b(y(Wr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[H[60]||(H[60]=u("p",{class:"font-medium text-sm"},"Report Generated",-1)),u("p",NCn,E(q(s.value.final_report_date)),1)])])):ie("",!0),s.value.status==="Draft"&&!s.value.physical_count_submitted_date&&!s.value.analyst_review_date&&!s.value.hod_approval_date?(T(),P("div",jCn," No actions yet ")):ie("",!0)])])])])):ie("",!0),b(y(zt),{modelValue:l.value,"onUpdate:modelValue":H[6]||(H[6]=ye=>l.value=ye),options:{title:"Create Staff Charge"}},{"body-content":D(()=>{var ye,Me,Te,qe;return[u("div",FCn,[u("div",null,[H[62]||(H[62]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Employee to Charge",-1)),b(y(ge),{type:"select",modelValue:f.value.employee,"onUpdate:modelValue":H[3]||(H[3]=We=>f.value.employee=We),options:c.value,placeholder:"Select employee"},null,8,["modelValue","options"])]),u("div",null,[H[63]||(H[63]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Charge Reason",-1)),b(y(ge),{type:"textarea",modelValue:f.value.reason,"onUpdate:modelValue":H[4]||(H[4]=We=>f.value.reason=We),placeholder:"Reason for the charge...",rows:3},null,8,["modelValue"])]),u("div",BCn,[u("p",zCn,[H[64]||(H[64]=u("strong",null,"Item:",-1)),W(" "+E((ye=d.value)==null?void 0:ye.item_code)+" - "+E((Me=d.value)==null?void 0:Me.item_description),1)]),u("p",UCn,[H[65]||(H[65]=u("strong",null,"Variance:",-1)),W(" "+E((Te=d.value)==null?void 0:Te.variance_quantity)+" units",1)]),u("p",HCn,[H[66]||(H[66]=u("strong",null,"Charge Amount:",-1)),W(" "+E(N(Math.abs(((qe=d.value)==null?void 0:qe.variance_value)||0))),1)])])])]}),actions:D(()=>[b(y(Z),{variant:"outline",onClick:H[5]||(H[5]=ye=>l.value=!1)},{default:D(()=>[...H[67]||(H[67]=[W(" Cancel ",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:G,loading:a.value},{default:D(()=>[...H[68]||(H[68]=[W(" Create Charge ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])])}}},WCn={class:"p-6"},GCn={class:"flex items-center justify-between mb-6"},YCn={class:"flex items-center gap-4"},KCn={class:"text-2xl font-bold text-gray-900"},XCn={class:"text-gray-500 mt-1"},ZCn={class:"flex items-center gap-2"},QCn={class:"flex items-center gap-2"},JCn={class:"max-w-6xl"},eAn={class:"space-y-6"},tAn={class:"bg-white rounded-lg border p-6"},nAn={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},rAn={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},iAn={class:"text-sm text-gray-600 bg-yellow-50 p-2 rounded"},aAn={class:"text-sm text-gray-600 bg-blue-50 p-2 rounded"},sAn={class:"bg-white rounded-lg border p-6"},oAn={class:"flex items-center justify-between mb-4"},lAn={class:"flex items-center gap-2"},uAn={class:"flex items-center gap-2"},dAn={class:"flex items-center gap-2"},cAn={class:"flex items-center gap-2"},fAn={class:"bg-white rounded-lg border p-6"},pAn={class:"flex items-center justify-between mb-4"},hAn={class:"text-lg font-semibold text-gray-900"},mAn={class:"flex items-center gap-4 text-sm"},gAn={class:"text-gray-500"},vAn={class:"text-yellow-600"},yAn={class:"text-gray-500"},bAn={class:"text-green-600"},_An={class:"text-gray-500"},xAn={class:"text-red-600"},wAn={class:"overflow-x-auto"},kAn={class:"min-w-full divide-y divide-gray-200"},SAn={class:"bg-white divide-y divide-gray-200"},CAn={class:"px-3 py-3 text-sm text-gray-500"},AAn={class:"px-3 py-3"},TAn={class:"px-3 py-3"},EAn={class:"px-3 py-3 text-right"},MAn={class:"px-3 py-3 text-right"},$An={class:"px-3 py-3 text-right"},DAn={class:"px-3 py-3 text-right"},RAn={class:"px-3 py-3 text-right"},PAn={class:"px-3 py-3"},IAn={class:"px-3 py-3"},OAn={class:"px-3 py-3"},LAn={class:"flex items-center gap-1"},VAn={class:"px-3 py-3"},NAn={key:0},jAn={class:"mt-4 pt-4 border-t bg-gray-50 -mx-6 -mb-6 px-6 py-4 rounded-b-lg"},FAn={class:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm"},BAn={class:"font-semibold ml-2"},zAn={class:"font-semibold ml-2"},UAn={class:"font-semibold ml-2"},HAn={class:"font-semibold ml-2 text-red-600"},qAn={class:"bg-white rounded-lg border p-6"},WAn={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},GAn={class:"flex items-center gap-2"},YAn={class:"space-y-4"},KAn={key:0,class:"border rounded p-3"},XAn={class:"overflow-x-auto text-xs"},ZAn={class:"min-w-full"},QAn={class:"bg-gray-100"},gW={__name:"StockTakeForm",setup(t){const e=gs(),n=xn(),r=Q(!1),i=Q([]),a=Q(!1),s=Q([]),o=Q([]),l=Q(""),d=J(()=>e.params.id&&e.params.id!=="new"),c=Q({stock_take_type:"Daily Stock Take",audit_date:new Date().toISOString().split("T")[0],warehouse:"",branch:"",status:"Draft",stock_take_items:[],notes:""}),f=J(()=>{if(!c.value.audit_date)return"";const X=new Date(c.value.audit_date),re={"Sales Return":0,"Daily Stock Take":0,"Weekly Stock Take":2,"Monthly Stock Take":5}[c.value.stock_take_type]||0;return X.setDate(X.getDate()+re),X.toISOString().split("T")[0]}),p=J(()=>{if(!c.value.audit_date)return"";const X=new Date(c.value.audit_date);return X.setDate(X.getDate()+3),X.toISOString().split("T")[0]}),h=J(()=>c.value.stock_take_items.reduce((X,re)=>X+(re.system_quantity||0),0)),m=J(()=>c.value.stock_take_items.reduce((X,re)=>X+(re.physical_quantity||0),0)),g=J(()=>c.value.stock_take_items.reduce((X,re)=>X+(re.variance_quantity||0),0)),v=J(()=>c.value.stock_take_items.reduce((X,re)=>X+Math.abs(re.variance_value||0),0)),_=J(()=>c.value.stock_take_items.filter(X=>!X.verification_status||X.verification_status==="Pending").length),x=J(()=>c.value.stock_take_items.filter(X=>X.verification_status==="Verified-Match").length),w=J(()=>c.value.stock_take_items.filter(X=>X.verification_status==="Verified-Discrepancy").length);bt(()=>le(this,null,function*(){yield k(),d.value&&(yield S())}));function k(){return le(this,null,function*(){try{const X=yield et("frappe.client.get_list",{doctype:"Warehouse Master",filters:{is_active:1},fields:["name","warehouse_code","warehouse_name","branch"],limit_page_length:0});i.value=X.map(re=>({label:`${re.warehouse_code} - ${re.warehouse_name}`,value:re.name,branch:re.branch}))}catch(X){console.error("Error loading warehouses:",X),i.value=[]}})}function S(){return le(this,null,function*(){try{const X=yield et("frappe.client.get",{doctype:"Stock Take Audit",name:e.params.id});c.value={stock_take_type:X.stock_take_type||"Daily Stock Take",audit_date:X.audit_date||"",warehouse:X.warehouse||"",branch:X.branch||"",status:X.status||"Draft",stock_take_items:X.stock_take_items||[],notes:X.notes||""}}catch(X){console.error("Error loading audit:",X)}})}function C(){const X=i.value.find(re=>re.value===c.value.warehouse);X&&(c.value.branch=X.branch)}function A(){c.value.stock_take_items.push({item_code:"",item_description:"",system_quantity:0,unit_value:0,physical_quantity:null,pending_dispatch:0,variance_quantity:0,variance_value:0,reason_provided:"",verification_status:"Pending",resolution_type:""})}function M(X){c.value.stock_take_items.splice(X,1)}function $(X){const re=c.value.stock_take_items[X];re.physical_quantity!==null&&re.physical_quantity!==void 0&&(re.variance_quantity=(re.system_quantity||0)-(re.physical_quantity||0)-(re.pending_dispatch||0),re.variance_value=re.variance_quantity*(re.unit_value||0),re.variance_quantity===0?re.verification_status="Verified-Match":re.verification_status="Verified-Discrepancy")}function R(X,re){const ee=c.value.stock_take_items[X];ee.physical_quantity=ee.system_quantity,ee.pending_dispatch=0,ee.variance_quantity=0,ee.variance_value=0,ee.verification_status="Verified-Match"}function I(X){return X.verification_status==="Verified-Match"?"bg-green-50":X.verification_status==="Verified-Discrepancy"?"bg-red-50":""}function B(X){switch(X){case"Verified-Match":return"bg-green-100 text-green-800";case"Verified-Discrepancy":return"bg-red-100 text-red-800";case"Resolved":return"bg-blue-100 text-blue-800";default:return"bg-yellow-100 text-yellow-800"}}function j(X){const re=X.target.files[0];if(!re)return;const ee=new FileReader;ee.onload=de=>{l.value=de.target.result,z(l.value)},ee.readAsText(re)}function z(X){const re=X.split(`
`).filter(ee=>ee.trim());re.length<2||(o.value=re[0].split(",").map(ee=>ee.trim().replace(/"/g,"")),s.value=re.slice(1).map(ee=>{const de=ee.split(",").map(te=>te.trim().replace(/"/g,"")),se={};return o.value.forEach((te,ne)=>{se[te]=de[ne]||""}),se}))}function F(){const ee=[["Item Code","Description","System Qty","Item Value","Physical Qty","Pending Dispatch","Reason Provided"],...[["ITEM001","Sample Item 1","100","150.00","95","3","Items in transit"],["ITEM002","Sample Item 2","50","200.00","52","0",""],["ITEM003","Sample Item 3","75","75.50","70","2","Damaged goods"]]].map(ne=>ne.map(ce=>`"${ce}"`).join(",")).join(`
`),de=new Blob([ee],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a"),te=URL.createObjectURL(de);se.setAttribute("href",te),se.setAttribute("download","stock_take_template.csv"),se.style.visibility="hidden",document.body.appendChild(se),se.click(),document.body.removeChild(se)}function q(){s.value.length!==0&&(s.value.forEach(X=>{const re={item_code:X["Item Code"]||"",item_description:X.Description||"",system_quantity:parseFloat(X["System Qty"])||0,unit_value:parseFloat(X["Item Value"])||0,physical_quantity:parseFloat(X["Physical Qty"])||null,pending_dispatch:parseFloat(X["Pending Dispatch"])||0,reason_provided:X["Reason Provided"]||"",variance_quantity:0,variance_value:0,verification_status:"Pending",resolution_type:""};re.physical_quantity!==null&&re.physical_quantity!==void 0&&(re.variance_quantity=(re.system_quantity||0)-(re.physical_quantity||0)-(re.pending_dispatch||0),re.variance_value=re.variance_quantity*(re.unit_value||0),re.variance_quantity===0?re.verification_status="Verified-Match":re.verification_status="Verified-Discrepancy"),c.value.stock_take_items.push(re)}),a.value=!1,s.value=[],o.value=[],l.value="")}function N(X){return X==null?"KES 0":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(X)}function O(){return le(this,null,function*(){if(!c.value.audit_date){alert("Stock take date is required");return}if(!c.value.warehouse){alert("Warehouse is required");return}r.value=!0;try{const X={doctype:"Stock Take Audit",stock_take_type:c.value.stock_take_type,audit_date:c.value.audit_date,warehouse:c.value.warehouse,branch:c.value.branch,notes:c.value.notes,stock_take_items:c.value.stock_take_items.map(re=>({item_code:re.item_code,item_description:re.item_description,system_quantity:re.system_quantity,physical_quantity:re.physical_quantity,unit_value:re.unit_value,pending_dispatch:re.pending_dispatch,variance_quantity:re.variance_quantity,variance_value:re.variance_value,reason_provided:re.reason_provided,verification_status:re.verification_status,resolution_type:re.resolution_type}))};if(d.value)yield et("frappe.client.set_value",{doctype:"Stock Take Audit",name:e.params.id,fieldname:X}),n.push(`/inventory-audit/stock-take/${e.params.id}`);else{const re=yield et("frappe.client.insert",{doc:X});n.push(`/inventory-audit/stock-take/${re.name}`)}}catch(X){console.error("Error saving audit:",X),alert("Error saving stock take: "+X.message)}finally{r.value=!1}})}function V(){d.value?n.push(`/inventory-audit/stock-take/${e.params.id}`):n.push("/inventory-audit/stock-take")}const L=[{label:"Sales Return",value:"Sales Return"},{label:"Daily Stock Take",value:"Daily Stock Take"},{label:"Weekly Stock Take",value:"Weekly Stock Take"},{label:"Monthly Stock Take",value:"Monthly Stock Take"}],U=[{label:"Draft",value:"Draft"},{label:"Physical Count Submitted",value:"Physical Count Submitted"},{label:"Analyst Reviewed",value:"Analyst Reviewed"},{label:"HOD Approved",value:"HOD Approved"},{label:"Under Investigation",value:"Under Investigation"}],G=[{label:"Select Resolution...",value:""},{label:"Stock Amendment",value:"Stock Amendment"},{label:"Charge Staff",value:"Charge Staff"},{label:"Write-off",value:"Write-off"},{label:"Under Investigation",value:"Under Investigation"}];return(X,re)=>(T(),P("div",WCn,[u("div",GCn,[u("div",YCn,[b(y(Z),{variant:"ghost",onClick:V},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",KCn,E(d.value?"Edit Stock Take":"New Stock Take"),1),u("p",XCn,E(d.value?`Editing ${y(e).params.id}`:"Stock take for physical verification"),1)])]),u("div",ZCn,[b(y(Z),{variant:"outline",onClick:V},{default:D(()=>[...re[8]||(re[8]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:O,loading:r.value},{default:D(()=>[u("div",QCn,[b(y(Cr),{class:"w-4 h-4"}),u("span",null,E(d.value?"Save Changes":"Create Stock Take"),1)])]),_:1},8,["loading"])])]),u("div",JCn,[u("div",eAn,[u("div",tAn,[re[17]||(re[17]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Stock Take Information",-1)),u("div",nAn,[u("div",null,[re[9]||(re[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Stock Take Type "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:c.value.stock_take_type,"onUpdate:modelValue":re[0]||(re[0]=ee=>c.value.stock_take_type=ee),options:L,disabled:d.value},null,8,["modelValue","disabled"])]),u("div",null,[re[10]||(re[10]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Stock Take Date "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"date",modelValue:c.value.audit_date,"onUpdate:modelValue":re[1]||(re[1]=ee=>c.value.audit_date=ee)},null,8,["modelValue"])]),u("div",null,[re[11]||(re[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Warehouse "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:c.value.warehouse,"onUpdate:modelValue":re[2]||(re[2]=ee=>c.value.warehouse=ee),options:i.value,placeholder:"Select warehouse",onChange:C},null,8,["modelValue","options"])]),u("div",null,[re[12]||(re[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(y(ge),{type:"select",modelValue:c.value.status,"onUpdate:modelValue":re[3]||(re[3]=ee=>c.value.status=ee),options:U,disabled:!0},null,8,["modelValue"])])]),u("div",rAn,[u("div",null,[re[14]||(re[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Deadline",-1)),u("div",iAn,[W(E(f.value||"Deadline based on stock take type")+" ",1),re[13]||(re[13]=u("span",{class:"text-yellow-700 ml-2"},"(Resolution required)",-1))])]),u("div",null,[re[16]||(re[16]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Investigation Deadline",-1)),u("div",aAn,[W(E(p.value||"3 days from stock take date")+" ",1),re[15]||(re[15]=u("span",{class:"text-blue-700 ml-2"},"(For items under investigation)",-1))])])])]),u("div",sAn,[u("div",oAn,[re[21]||(re[21]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Import Stock Items",-1)),u("div",lAn,[b(y(Z),{variant:"outline",size:"sm",onClick:F},{default:D(()=>[u("div",uAn,[b(y(bn),{class:"w-4 h-4"}),re[18]||(re[18]=u("span",null,"Download Template",-1))])]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:re[4]||(re[4]=ee=>a.value=!0)},{default:D(()=>[u("div",dAn,[b(y(ps),{class:"w-4 h-4"}),re[19]||(re[19]=u("span",null,"Import from CSV",-1))])]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:A},{default:D(()=>[u("div",cAn,[b(y(tt),{class:"w-4 h-4"}),re[20]||(re[20]=u("span",null,"Add Item Manually",-1))])]),_:1})])]),re[22]||(re[22]=u("div",{class:"text-sm text-gray-500 mb-4"}," Import stock items from Business Central CSV export. Download the template to see the required format. Expected columns: Item Code, Description, System Qty, Item Value, Physical Qty, Pending Dispatch, Reason Provided ",-1))]),u("div",fAn,[u("div",pAn,[u("h3",hAn,"Stock Take Items ("+E(c.value.stock_take_items.length)+")",1),u("div",mAn,[u("span",gAn,[re[23]||(re[23]=W("Pending: ",-1)),u("strong",vAn,E(_.value),1)]),u("span",yAn,[re[24]||(re[24]=W("Verified: ",-1)),u("strong",bAn,E(x.value),1)]),u("span",_An,[re[25]||(re[25]=W("Discrepancy: ",-1)),u("strong",xAn,E(w.value),1)])])]),u("div",wAn,[u("table",kAn,[re[27]||(re[27]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"#"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Item Code"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"System Qty"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Item Value"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Physical Qty"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Pending Dispatch"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Variance"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Reason Provided"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Proposed Resolution"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Action"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status")])],-1)),u("tbody",SAn,[(T(!0),P(_e,null,we(c.value.stock_take_items,(ee,de)=>(T(),P("tr",{key:de,class:fe([I(ee),"hover:bg-gray-50"])},[u("td",CAn,E(de+1),1),u("td",AAn,[b(y(ge),{type:"text",modelValue:ee.item_code,"onUpdate:modelValue":se=>ee.item_code=se,placeholder:"Item code",class:"w-32"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",TAn,[b(y(ge),{type:"text",modelValue:ee.item_description,"onUpdate:modelValue":se=>ee.item_description=se,placeholder:"Description",class:"w-48"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",EAn,[b(y(ge),{type:"number",modelValue:ee.system_quantity,"onUpdate:modelValue":se=>ee.system_quantity=se,placeholder:"0",class:"w-20 text-right",disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),u("td",MAn,[b(y(ge),{type:"number",modelValue:ee.unit_value,"onUpdate:modelValue":se=>ee.unit_value=se,placeholder:"0.00",class:"w-20 text-right",step:"0.01"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",$An,[b(y(ge),{type:"number",modelValue:ee.physical_quantity,"onUpdate:modelValue":se=>ee.physical_quantity=se,placeholder:"Count",class:"w-20 text-right",onChange:se=>$(de)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),u("td",DAn,[b(y(ge),{type:"number",modelValue:ee.pending_dispatch,"onUpdate:modelValue":se=>ee.pending_dispatch=se,placeholder:"0",class:"w-20 text-right",onChange:se=>$(de)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),u("td",RAn,[u("span",{class:fe(ee.variance_quantity!==0?"text-red-600 font-medium":"text-green-600")},E(ee.variance_quantity||0),3)]),u("td",PAn,[b(y(ge),{type:"text",modelValue:ee.reason_provided,"onUpdate:modelValue":se=>ee.reason_provided=se,placeholder:"Reason for variance",class:"w-40"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",IAn,[b(y(ge),{type:"select",modelValue:ee.resolution_type,"onUpdate:modelValue":se=>ee.resolution_type=se,options:G,class:"w-36",disabled:ee.verification_status!=="Verified-Discrepancy"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),u("td",OAn,[u("div",LAn,[!ee.physical_quantity&&ee.physical_quantity!==0?(T(),he(y(Z),{key:0,variant:"ghost",size:"sm",onClick:se=>R(de),title:"Mark as Match (Physical = System)"},{default:D(()=>[b(y(Wr),{class:"w-4 h-4 text-green-600"})]),_:1},8,["onClick"])):ie("",!0),b(y(Z),{variant:"ghost",size:"sm",onClick:se=>M(de),title:"Remove"},{default:D(()=>[b(y(hi),{class:"w-4 h-4 text-red-600"})]),_:1},8,["onClick"])])]),u("td",VAn,[u("span",{class:fe([B(ee.verification_status),"px-2 py-1 text-xs rounded-full"])},E(ee.verification_status||"Pending"),3)])],2))),128)),c.value.stock_take_items.length===0?(T(),P("tr",NAn,[...re[26]||(re[26]=[u("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"}," No stock take items. Import from CSV or add items manually. ",-1)])])):ie("",!0)])])]),u("div",jAn,[u("div",FAn,[u("div",null,[re[28]||(re[28]=u("span",{class:"text-gray-500"},"Total Items:",-1)),u("span",BAn,E(c.value.stock_take_items.length),1)]),u("div",null,[re[29]||(re[29]=u("span",{class:"text-gray-500"},"System Qty:",-1)),u("span",zAn,E(h.value),1)]),u("div",null,[re[30]||(re[30]=u("span",{class:"text-gray-500"},"Physical Qty:",-1)),u("span",UAn,E(m.value),1)]),u("div",null,[re[31]||(re[31]=u("span",{class:"text-gray-500"},"Total Variance:",-1)),u("span",{class:fe(["font-semibold ml-2",g.value!==0?"text-red-600":"text-green-600"])},E(g.value),3)]),u("div",null,[re[32]||(re[32]=u("span",{class:"text-gray-500"},"Variance Value:",-1)),u("span",HAn,E(N(v.value)),1)])])])]),u("div",qAn,[re[33]||(re[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),b(y(ge),{type:"textarea",modelValue:c.value.notes,"onUpdate:modelValue":re[5]||(re[5]=ee=>c.value.notes=ee),placeholder:"Additional notes or observations from the stock take...",rows:4},null,8,["modelValue"])])]),u("div",WAn,[b(y(Z),{variant:"outline",onClick:V},{default:D(()=>[...re[34]||(re[34]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:O,loading:r.value},{default:D(()=>[u("div",GAn,[b(y(Cr),{class:"w-4 h-4"}),u("span",null,E(d.value?"Save Changes":"Create Stock Take"),1)])]),_:1},8,["loading"])])]),b(y(zt),{modelValue:a.value,"onUpdate:modelValue":re[7]||(re[7]=ee=>a.value=ee),options:{title:"Import Stock Items from CSV"}},{"body-content":D(()=>[u("div",YAn,[u("div",null,[re[35]||(re[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Upload CSV File",-1)),u("input",{type:"file",accept:".csv",onChange:j,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),re[37]||(re[37]=u("div",{class:"text-sm text-gray-500 bg-gray-50 p-3 rounded"},[u("p",{class:"font-medium mb-1"},"Expected CSV columns:"),u("p",null,"Item Code, Description, System Qty, Item Value, Physical Qty, Pending Dispatch, Reason Provided")],-1)),s.value.length>0?(T(),P("div",KAn,[re[36]||(re[36]=u("p",{class:"text-sm font-medium mb-2"},"Preview (first 5 rows):",-1)),u("div",XAn,[u("table",ZAn,[u("thead",null,[u("tr",QAn,[(T(!0),P(_e,null,we(o.value,ee=>(T(),P("th",{key:ee,class:"px-2 py-1 text-left"},E(ee),1))),128))])]),u("tbody",null,[(T(!0),P(_e,null,we(s.value.slice(0,5),(ee,de)=>(T(),P("tr",{key:de},[(T(!0),P(_e,null,we(ee,(se,te)=>(T(),P("td",{key:te,class:"px-2 py-1 border-t"},E(se),1))),128))]))),128))])])])])):ie("",!0)])]),actions:D(()=>[b(y(Z),{variant:"outline",onClick:re[6]||(re[6]=ee=>a.value=!1)},{default:D(()=>[...re[38]||(re[38]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:q,disabled:s.value.length===0},{default:D(()=>[W(" Import "+E(s.value.length)+" Items ",1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]))}},JAn={class:"p-6"},eTn={class:"flex justify-between items-center mb-6"},tTn={class:"flex gap-2"},nTn={class:"bg-white rounded-lg border p-4 mb-6"},rTn={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},iTn=["value"],aTn={class:"flex items-end"},sTn={class:"flex items-center gap-2"},oTn={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},lTn={class:"bg-white rounded-lg border p-4"},uTn={class:"text-2xl font-bold"},dTn={class:"bg-white rounded-lg border p-4"},cTn={class:"text-2xl font-bold text-yellow-600"},fTn={class:"bg-white rounded-lg border p-4"},pTn={class:"text-2xl font-bold text-blue-600"},hTn={class:"bg-white rounded-lg border p-4"},mTn={class:"text-2xl font-bold text-red-600"},gTn={class:"bg-white rounded-lg border p-4"},vTn={class:"text-2xl font-bold text-green-600"},yTn={class:"bg-white rounded-lg border shadow-sm"},bTn={key:0,class:"divide-y divide-gray-200"},_Tn=["onClick"],xTn={class:"flex items-start justify-between"},wTn={class:"flex-1"},kTn={class:"flex items-center gap-3 mb-2"},STn={class:"font-medium text-gray-900"},CTn={class:"text-sm text-gray-600 mb-2"},ATn={class:"flex items-center gap-6 text-sm text-gray-500"},TTn={class:"flex items-center gap-1"},ETn={key:0,class:"flex items-center gap-1"},MTn={key:1,class:"flex items-center gap-1"},$Tn={class:"flex items-center gap-6 mt-3 text-sm"},DTn={key:0,class:"flex items-center gap-1 text-gray-700"},RTn={key:1,class:"flex items-center gap-1 text-gray-500"},PTn={class:"flex items-center gap-1 text-gray-500"},ITn={class:"text-right"},OTn={key:1,class:"p-12 text-center text-gray-500"},LTn={key:2,class:"px-4 py-3 border-t flex items-center justify-between"},VTn={class:"text-sm text-gray-500"},NTn={class:"flex gap-2"},jTn={__name:"IssueLogList",setup(t){const e=xn(),n=Xl(),r=Q(!1),i=Q(!1),a=Q({status:"",priority:"",issue_type:"",assigned_to:""}),s=J(()=>n.issues),o=J(()=>n.issuesTotalCount),l=J(()=>n.issuesPage),d=J(()=>n.issuesPageSize),c=J(()=>Math.ceil(o.value/d.value));bt(()=>le(this,null,function*(){yield f()}));function f(){return le(this,null,function*(){r.value=!0;try{const C=me({},a.value);Object.keys(C).forEach(A=>{C[A]||delete C[A]}),yield n.loadIssues(C,l.value,d.value)}finally{r.value=!1}})}function p(){return le(this,null,function*(){a.value={status:"",priority:"",issue_type:"",assigned_to:""},i.value=!1,yield f()})}let h=null;function m(){clearTimeout(h),h=setTimeout(()=>f(),300)}function g(C){return le(this,null,function*(){yield n.loadIssues(a.value,C,d.value)})}function v(){e.push("/inventory-audit/issues/new")}function _(C){e.push(`/inventory-audit/issues/${C}`)}function x(C){return{Open:"yellow","In Progress":"blue",Resolved:"green",Closed:"gray"}[C]||"gray"}function w(C){return{Critical:"red",High:"orange",Medium:"yellow",Low:"blue"}[C]||"gray"}function k(C){return C.is_sla_breached?"text-red-600":"text-gray-900"}function S(C){return C?new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}return(C,A)=>(T(),P("div",JAn,[u("div",eTn,[A[8]||(A[8]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Stock Take Issue Log"),u("p",{class:"text-gray-600"},"Track and resolve operational issues during audits")],-1)),u("div",tTn,[b(y(Z),{onClick:p,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(y(Z),{onClick:v},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),A[7]||(A[7]=W(" Log Issue ",-1))]),_:1})])]),u("div",nTn,[u("div",rTn,[u("div",null,[A[10]||(A[10]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),xe(u("select",{"onUpdate:modelValue":A[0]||(A[0]=M=>a.value.status=M),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[...A[9]||(A[9]=[ur('<option value="">All Statuses</option><option value="Open">Open</option><option value="In Progress">In Progress</option><option value="Resolved">Resolved</option><option value="Closed">Closed</option>',5)])],544),[[gn,a.value.status]])]),u("div",null,[A[12]||(A[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),xe(u("select",{"onUpdate:modelValue":A[1]||(A[1]=M=>a.value.priority=M),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[...A[11]||(A[11]=[ur('<option value="">All Priorities</option><option value="Critical">Critical</option><option value="High">High</option><option value="Medium">Medium</option><option value="Low">Low</option>',5)])],544),[[gn,a.value.priority]])]),u("div",null,[A[14]||(A[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Issue Type",-1)),xe(u("select",{"onUpdate:modelValue":A[2]||(A[2]=M=>a.value.issue_type=M),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[A[13]||(A[13]=u("option",{value:""},"All Types",-1)),(T(!0),P(_e,null,we(y(n).issueTypeOptions,M=>(T(),P("option",{key:M.value,value:M.value},E(M.label),9,iTn))),128))],544),[[gn,a.value.issue_type]])]),u("div",null,[A[15]||(A[15]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),xe(u("input",{"onUpdate:modelValue":A[3]||(A[3]=M=>a.value.assigned_to=M),type:"text",placeholder:"Filter by assignee",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:m},null,544),[[Mt,a.value.assigned_to]])]),u("div",aTn,[u("label",sTn,[xe(u("input",{type:"checkbox","onUpdate:modelValue":A[4]||(A[4]=M=>i.value=M),onChange:f,class:"rounded border-gray-300"},null,544),[[$n,i.value]]),A[16]||(A[16]=u("span",{class:"text-sm text-gray-700"},"SLA Breached Only",-1))])])])]),u("div",oTn,[u("div",lTn,[A[17]||(A[17]=u("p",{class:"text-sm text-gray-500"},"Total Issues",-1)),u("p",uTn,E(o.value),1)]),u("div",dTn,[A[18]||(A[18]=u("p",{class:"text-sm text-gray-500"},"Open",-1)),u("p",cTn,E(s.value.filter(M=>M.status==="Open").length),1)]),u("div",fTn,[A[19]||(A[19]=u("p",{class:"text-sm text-gray-500"},"In Progress",-1)),u("p",pTn,E(s.value.filter(M=>M.status==="In Progress").length),1)]),u("div",hTn,[A[20]||(A[20]=u("p",{class:"text-sm text-gray-500"},"SLA Breached",-1)),u("p",mTn,E(s.value.filter(M=>M.is_sla_breached).length),1)]),u("div",gTn,[A[21]||(A[21]=u("p",{class:"text-sm text-gray-500"},"Resolved",-1)),u("p",vTn,E(s.value.filter(M=>M.status==="Resolved").length),1)])]),u("div",yTn,[s.value.length>0?(T(),P("div",bTn,[(T(!0),P(_e,null,we(s.value,M=>(T(),P("div",{key:M.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:$=>_(M.name)},[u("div",xTn,[u("div",wTn,[u("div",kTn,[u("h4",STn,E(M.issue_title),1),b(y(Ee),{variant:x(M.status)},{default:D(()=>[W(E(M.status),1)]),_:2},1032,["variant"]),b(y(Ee),{variant:w(M.priority)},{default:D(()=>[W(E(M.priority),1)]),_:2},1032,["variant"]),M.is_sla_breached?(T(),he(y(Ee),{key:0,variant:"red"},{default:D(()=>[b(y(nn),{class:"w-3 h-3 mr-1"}),A[22]||(A[22]=W(" SLA Breached ",-1))]),_:1})):ie("",!0)]),u("p",CTn,E(M.issue_id),1),u("div",ATn,[u("span",TTn,[b(y(CY),{class:"w-4 h-4"}),W(" "+E(M.issue_type),1)]),M.warehouse?(T(),P("span",ETn,[b(y(nb),{class:"w-4 h-4"}),W(" "+E(M.warehouse),1)])):ie("",!0),M.item_code?(T(),P("span",MTn,[b(y(Ws),{class:"w-4 h-4"}),W(" "+E(M.item_code),1)])):ie("",!0)]),u("div",$Tn,[M.assigned_to?(T(),P("span",DTn,[b(y(Ro),{class:"w-4 h-4"}),A[23]||(A[23]=W(" Assigned: ",-1)),u("strong",null,E(M.assigned_to),1)])):ie("",!0),M.reported_by?(T(),P("span",RTn," Reported by: "+E(M.reported_by),1)):ie("",!0),u("span",PTn,[b(y(er),{class:"w-4 h-4"}),W(" "+E(S(M.reported_date)),1)])])]),u("div",ITn,[A[24]||(A[24]=u("p",{class:"text-sm text-gray-500"},"SLA Due",-1)),u("p",{class:fe(["font-medium",k(M)])},E(S(M.sla_due_date)),3)])])],8,_Tn))),128))])):r.value?ie("",!0):(T(),P("div",OTn,[b(y(Gt),{class:"w-12 h-12 mx-auto mb-3 text-green-300"}),A[26]||(A[26]=u("p",null,"No issues logged",-1)),b(y(Z),{variant:"outline",size:"sm",class:"mt-2",onClick:v},{default:D(()=>[...A[25]||(A[25]=[W(" Log First Issue ",-1)])]),_:1})])),c.value>1?(T(),P("div",LTn,[u("p",VTn," Showing "+E((l.value-1)*d.value+1)+" - "+E(Math.min(l.value*d.value,o.value))+" of "+E(o.value),1),u("div",NTn,[b(y(Z),{variant:"outline",size:"sm",disabled:l.value===1,onClick:A[5]||(A[5]=M=>g(l.value-1))},{default:D(()=>[...A[27]||(A[27]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",size:"sm",disabled:l.value===c.value,onClick:A[6]||(A[6]=M=>g(l.value+1))},{default:D(()=>[...A[28]||(A[28]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):ie("",!0)])]))}},FTn={class:"p-6"},BTn={class:"flex items-center justify-between mb-6"},zTn={class:"flex items-center gap-4"},UTn={class:"text-gray-500 mt-1"},HTn={class:"flex items-center gap-2"},qTn={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},WTn={class:"lg:col-span-2 space-y-6"},GTn={class:"bg-white rounded-lg border p-6"},YTn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},KTn={class:"mt-1 text-sm text-gray-900"},XTn={class:"mt-1 text-sm text-gray-900"},ZTn={class:"mt-1 text-sm text-gray-900"},QTn={class:"mt-1 text-sm text-gray-900"},JTn={class:"mt-1 text-sm text-gray-900"},e4n={class:"bg-white rounded-lg border p-6"},t4n={class:"prose max-w-none"},n4n={class:"text-gray-700 whitespace-pre-wrap"},r4n={key:0,class:"bg-white rounded-lg border p-6"},i4n={class:"space-y-4"},a4n={class:"mt-1 text-sm text-gray-900 whitespace-pre-wrap"},s4n={class:"mt-1 text-sm text-gray-900"},o4n={class:"mt-1 text-sm text-gray-900"},l4n={class:"bg-white rounded-lg border p-6"},u4n={class:"flex items-center justify-between mb-4"},d4n={key:0,class:"text-center py-8 text-gray-500"},c4n={key:1,class:"space-y-4"},f4n={class:"flex items-start justify-between"},p4n={class:"flex items-center gap-2"},h4n={class:"font-medium text-sm text-gray-900"},m4n={class:"text-xs text-gray-500"},g4n={class:"mt-2 text-sm text-gray-700 whitespace-pre-wrap"},v4n={class:"space-y-6"},y4n={class:"bg-white rounded-lg border p-6"},b4n={class:"space-y-2"},_4n={class:"bg-white rounded-lg border p-6"},x4n={class:"space-y-3"},w4n={key:0},k4n={key:1},S4n={key:2},C4n={class:"bg-white rounded-lg border p-6"},A4n={class:"space-y-3"},T4n={class:"flex items-start gap-3"},E4n={class:"flex-1"},M4n={class:"text-xs text-gray-500"},$4n={key:0,class:"flex items-start gap-3"},D4n={class:"flex-1"},R4n={class:"text-xs text-gray-500"},P4n={class:"space-y-4"},I4n={class:"space-y-4"},O4n={__name:"IssueLogDetail",setup(t){const e=gs(),n=xn(),r=Q({}),i=Q([]),a=Q(!1),s=Q(!1),o=Q(""),l=Q(""),d=Q(!1),c=Q(!1);bt(()=>le(this,null,function*(){yield f(),yield p()}));function f(){return le(this,null,function*(){try{const I=yield et("frappe.client.get",{doctype:"Issue Log",name:e.params.id});r.value=I}catch(I){console.error("Error loading issue:",I)}})}function p(){return le(this,null,function*(){try{const I=yield et("frappe.client.get_list",{doctype:"Comment",filters:{reference_doctype:"Issue Log",reference_name:e.params.id},fields:["name","comment","user","creation"],order_by:"creation desc"});i.value=I}catch(I){console.error("Error loading comments:",I)}})}function h(I){return{Low:"outline",Medium:"secondary",High:"destructive",Critical:"destructive"}[I]||"secondary"}function m(I){return{Open:"secondary","In Progress":"outline",Resolved:"solid",Closed:"outline"}[I]||"secondary"}function g(I){return{Low:"outline",Medium:"secondary",High:"destructive",Urgent:"destructive"}[I]||"secondary"}function v(I){return I?new Date(I).toLocaleDateString():"-"}function _(I){return I?new Date(I).toLocaleString():"-"}function x(){n.push("/inventory-audit/issues")}function w(){n.push(`/inventory-audit/issues/${e.params.id}/edit`)}function k(){r.value.status!=="Resolved"&&(s.value=!0)}function S(){return le(this,null,function*(){c.value=!0;try{yield et("frappe.client.set_value",{doctype:"Issue Log",name:e.params.id,fieldname:{status:"Resolved",resolution:l.value,resolved_by:frappe.session.user,resolved_date:new Date().toISOString().split("T")[0]}}),yield f(),s.value=!1,l.value=""}catch(I){console.error("Error resolving issue:",I)}finally{c.value=!1}})}function C(){return le(this,null,function*(){if(o.value.trim()){d.value=!0;try{yield et("frappe.client.insert",{doc:{doctype:"Comment",reference_doctype:"Issue Log",reference_name:e.params.id,comment:o.value,comment_type:"Comment"}}),yield p(),a.value=!1,o.value=""}catch(I){console.error("Error adding comment:",I)}finally{d.value=!1}}})}function A(){n.push(`/inventory-audit/issues/new?duplicate=${e.params.id}`)}function M(I){n.push(`/inventory-audit/sessions/${I}`)}function $(I){n.push(`/inventory-audit/variance-cases/${I}`)}function R(I){n.push(`/inventory-audit/plans/${I}`)}return(I,B)=>(T(),P("div",FTn,[u("div",BTn,[u("div",zTn,[b(y(Z),{variant:"ghost",onClick:x},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[B[10]||(B[10]=u("h1",{class:"text-2xl font-bold text-gray-900"}," Issue Details ",-1)),u("p",UTn,E(r.value.name),1)])]),u("div",HTn,[b(y(Z),{variant:"outline",onClick:w},{default:D(()=>[b(y(vn),{class:"w-4 h-4 mr-2"}),B[11]||(B[11]=W(" Edit Issue ",-1))]),_:1}),b(y(Z),{variant:"solid",onClick:k,disabled:r.value.status==="Resolved"},{default:D(()=>[b(y(Gt),{class:"w-4 h-4 mr-2"}),W(" "+E(r.value.status==="Resolved"?"Resolved":"Mark Resolved"),1)]),_:1},8,["disabled"])])]),u("div",qTn,[u("div",WTn,[u("div",GTn,[B[20]||(B[20]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Issue Overview",-1)),u("div",YTn,[u("div",null,[B[12]||(B[12]=u("label",{class:"block text-sm font-medium text-gray-700"},"Issue Type",-1)),u("p",KTn,E(r.value.issue_type||"-"),1)]),u("div",null,[B[13]||(B[13]=u("label",{class:"block text-sm font-medium text-gray-700"},"Severity",-1)),b(y(Ee),{variant:h(r.value.severity)},{default:D(()=>[W(E(r.value.severity||"Medium"),1)]),_:1},8,["variant"])]),u("div",null,[B[14]||(B[14]=u("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),b(y(Ee),{variant:m(r.value.status)},{default:D(()=>[W(E(r.value.status||"Open"),1)]),_:1},8,["variant"])]),u("div",null,[B[15]||(B[15]=u("label",{class:"block text-sm font-medium text-gray-700"},"Priority",-1)),b(y(Ee),{variant:g(r.value.priority)},{default:D(()=>[W(E(r.value.priority||"Medium"),1)]),_:1},8,["variant"])]),u("div",null,[B[16]||(B[16]=u("label",{class:"block text-sm font-medium text-gray-700"},"Reported By",-1)),u("p",XTn,E(r.value.reported_by||"-"),1)]),u("div",null,[B[17]||(B[17]=u("label",{class:"block text-sm font-medium text-gray-700"},"Assigned To",-1)),u("p",ZTn,E(r.value.assigned_to||"-"),1)]),u("div",null,[B[18]||(B[18]=u("label",{class:"block text-sm font-medium text-gray-700"},"Reported Date",-1)),u("p",QTn,E(v(r.value.reported_date)),1)]),u("div",null,[B[19]||(B[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Due Date",-1)),u("p",JTn,E(v(r.value.due_date)),1)])])]),u("div",e4n,[B[21]||(B[21]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Issue Description",-1)),u("div",t4n,[u("p",n4n,E(r.value.description||"No description provided."),1)])]),r.value.status==="Resolved"?(T(),P("div",r4n,[B[25]||(B[25]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resolution Details",-1)),u("div",i4n,[u("div",null,[B[22]||(B[22]=u("label",{class:"block text-sm font-medium text-gray-700"},"Resolution",-1)),u("p",a4n,E(r.value.resolution||"-"),1)]),u("div",null,[B[23]||(B[23]=u("label",{class:"block text-sm font-medium text-gray-700"},"Resolved By",-1)),u("p",s4n,E(r.value.resolved_by||"-"),1)]),u("div",null,[B[24]||(B[24]=u("label",{class:"block text-sm font-medium text-gray-700"},"Resolved Date",-1)),u("p",o4n,E(v(r.value.resolved_date)),1)])])])):ie("",!0),u("div",l4n,[u("div",u4n,[B[27]||(B[27]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Comments",-1)),b(y(Z),{variant:"outline",size:"sm",onClick:B[0]||(B[0]=j=>a.value=!0)},{default:D(()=>[b(y(lfe),{class:"w-4 h-4 mr-2"}),B[26]||(B[26]=W(" Add Comment ",-1))]),_:1})]),i.value.length===0?(T(),P("div",d4n," No comments yet. ")):(T(),P("div",c4n,[(T(!0),P(_e,null,we(i.value,j=>(T(),P("div",{key:j.name,class:"border-l-4 border-blue-500 pl-4"},[u("div",f4n,[u("div",p4n,[u("span",h4n,E(j.user),1),u("span",m4n,E(_(j.creation)),1)])]),u("p",g4n,E(j.comment),1)]))),128))]))])]),u("div",v4n,[u("div",y4n,[B[30]||(B[30]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),u("div",b4n,[b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:w},{default:D(()=>[b(y(vn),{class:"w-4 h-4 mr-2"}),B[28]||(B[28]=W(" Edit Issue ",-1))]),_:1}),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:k,disabled:r.value.status==="Resolved"},{default:D(()=>[b(y(Gt),{class:"w-4 h-4 mr-2"}),W(" "+E(r.value.status==="Resolved"?"Already Resolved":"Mark Resolved"),1)]),_:1},8,["disabled"]),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:A},{default:D(()=>[b(y(qs),{class:"w-4 h-4 mr-2"}),B[29]||(B[29]=W(" Duplicate Issue ",-1))]),_:1})])]),u("div",_4n,[B[34]||(B[34]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Related Records",-1)),u("div",x4n,[r.value.stock_take_session?(T(),P("div",w4n,[B[31]||(B[31]=u("label",{class:"block text-sm font-medium text-gray-700"},"Stock Take Session",-1)),b(y(Z),{variant:"link",class:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:B[1]||(B[1]=j=>M(r.value.stock_take_session))},{default:D(()=>[W(E(r.value.session_name||r.value.stock_take_session),1)]),_:1})])):ie("",!0),r.value.variance_case?(T(),P("div",k4n,[B[32]||(B[32]=u("label",{class:"block text-sm font-medium text-gray-700"},"Variance Case",-1)),b(y(Z),{variant:"link",class:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:B[2]||(B[2]=j=>$(r.value.variance_case))},{default:D(()=>[W(E(r.value.case_name||r.value.variance_case),1)]),_:1})])):ie("",!0),r.value.audit_plan?(T(),P("div",S4n,[B[33]||(B[33]=u("label",{class:"block text-sm font-medium text-gray-700"},"Audit Plan",-1)),b(y(Z),{variant:"link",class:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:B[3]||(B[3]=j=>R(r.value.audit_plan))},{default:D(()=>[W(E(r.value.plan_name||r.value.audit_plan),1)]),_:1})])):ie("",!0)])]),u("div",C4n,[B[39]||(B[39]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",A4n,[u("div",T4n,[B[36]||(B[36]=u("div",{class:"w-2 h-2 bg-blue-500 rounded-full mt-2"},null,-1)),u("div",E4n,[B[35]||(B[35]=u("p",{class:"text-sm font-medium text-gray-900"},"Issue Created",-1)),u("p",M4n,E(_(r.value.creation)),1)])]),r.value.status==="Resolved"?(T(),P("div",$4n,[B[38]||(B[38]=u("div",{class:"w-2 h-2 bg-green-500 rounded-full mt-2"},null,-1)),u("div",D4n,[B[37]||(B[37]=u("p",{class:"text-sm font-medium text-gray-900"},"Issue Resolved",-1)),u("p",R4n,E(_(r.value.resolved_date)),1)])])):ie("",!0)])])])]),b(y(zt),{modelValue:a.value,"onUpdate:modelValue":B[6]||(B[6]=j=>a.value=j),options:{title:"Add Comment"}},{"body-content":D(()=>[u("div",P4n,[b(y(ge),{type:"textarea",modelValue:o.value,"onUpdate:modelValue":B[4]||(B[4]=j=>o.value=j),placeholder:"Enter your comment...",rows:4},null,8,["modelValue"])])]),actions:D(()=>[b(y(Z),{variant:"outline",onClick:B[5]||(B[5]=j=>a.value=!1)},{default:D(()=>[...B[40]||(B[40]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:C,loading:d.value},{default:D(()=>[...B[41]||(B[41]=[W(" Add Comment ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),b(y(zt),{modelValue:s.value,"onUpdate:modelValue":B[9]||(B[9]=j=>s.value=j),options:{title:"Resolve Issue"}},{"body-content":D(()=>[u("div",I4n,[b(y(ge),{type:"textarea",modelValue:l.value,"onUpdate:modelValue":B[7]||(B[7]=j=>l.value=j),placeholder:"Describe how this issue was resolved...",rows:4,label:"Resolution Details"},null,8,["modelValue"])])]),actions:D(()=>[b(y(Z),{variant:"outline",onClick:B[8]||(B[8]=j=>s.value=!1)},{default:D(()=>[...B[42]||(B[42]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:S,loading:c.value},{default:D(()=>[...B[43]||(B[43]=[W(" Resolve Issue ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])]))}},L4n={class:"p-6"},V4n={class:"flex items-center justify-between mb-6"},N4n={class:"flex items-center gap-4"},j4n={class:"text-2xl font-bold text-gray-900"},F4n={class:"text-gray-500 mt-1"},B4n={class:"flex items-center gap-2"},z4n={class:"max-w-4xl"},U4n={class:"space-y-6"},H4n={class:"bg-white rounded-lg border p-6"},q4n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W4n={class:"bg-white rounded-lg border p-6"},G4n={class:"space-y-4"},Y4n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K4n={class:"bg-white rounded-lg border p-6"},X4n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z4n={key:0,class:"bg-white rounded-lg border p-6"},Q4n={class:"space-y-4"},J4n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},e3n={class:"bg-white rounded-lg border p-6"},t3n={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},vW={__name:"IssueLogForm",setup(t){const e=gs(),n=xn(),r=Q(!1),i=Q([]),a=Q([]),s=Q([]),o=Q([]),l=Q([]),d=J(()=>e.params.id&&e.params.id!=="new"),c=Q({issue_type:"",severity:"Medium",priority:"Medium",status:"Open",reported_by:"",assigned_to:"",reported_date:new Date().toISOString().split("T")[0],due_date:"",description:"",location:"",item_code:"",quantity_affected:0,stock_take_session:"",variance_case:"",audit_plan:"",resolution:"",resolved_by:"",resolved_date:"",notes:""});bt(()=>le(this,null,function*(){yield Promise.all([f(),p(),h(),m(),g()]),d.value&&(yield v()),!d.value&&!c.value.reported_by&&(c.value.reported_by=frappe.session.user)}));function f(){return le(this,null,function*(){try{const A=yield et("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});i.value=A.map(M=>({label:M.full_name||M.name,value:M.name}))}catch(A){console.error("Error loading users:",A)}})}function p(){return le(this,null,function*(){try{const A=yield et("frappe.client.get_list",{doctype:"Item",fields:["name","item_name"],limit_page_length:0});a.value=A.map(M=>({label:`${M.name} - ${M.item_name}`,value:M.name}))}catch(A){console.error("Error loading items:",A)}})}function h(){return le(this,null,function*(){try{const A=yield et("frappe.client.get_list",{doctype:"Stock Take Session",fields:["name","title"],limit_page_length:0});s.value=A.map(M=>({label:M.title||M.name,value:M.name}))}catch(A){console.error("Error loading sessions:",A)}})}function m(){return le(this,null,function*(){try{const A=yield et("frappe.client.get_list",{doctype:"Variance Case",fields:["name","title"],limit_page_length:0});o.value=A.map(M=>({label:M.title||M.name,value:M.name}))}catch(A){console.error("Error loading variance cases:",A)}})}function g(){return le(this,null,function*(){try{const A=yield et("frappe.client.get_list",{doctype:"Audit Plan",fields:["name","title"],limit_page_length:0});l.value=A.map(M=>({label:M.title||M.name,value:M.name}))}catch(A){console.error("Error loading audit plans:",A)}})}function v(){return le(this,null,function*(){try{const A=yield et("frappe.client.get",{doctype:"Issue Log",name:e.params.id});c.value={issue_type:A.issue_type||"",severity:A.severity||"Medium",priority:A.priority||"Medium",status:A.status||"Open",reported_by:A.reported_by||"",assigned_to:A.assigned_to||"",reported_date:A.reported_date||"",due_date:A.due_date||"",description:A.description||"",location:A.location||"",item_code:A.item_code||"",quantity_affected:A.quantity_affected||0,stock_take_session:A.stock_take_session||"",variance_case:A.variance_case||"",audit_plan:A.audit_plan||"",resolution:A.resolution||"",resolved_by:A.resolved_by||"",resolved_date:A.resolved_date||"",notes:A.notes||""}}catch(A){console.error("Error loading issue:",A)}})}function _(){return le(this,null,function*(){if(!c.value.issue_type){alert("Issue type is required");return}if(!c.value.description){alert("Description is required");return}r.value=!0;try{if(d.value)yield et("frappe.client.set_value",{doctype:"Issue Log",name:e.params.id,fieldname:c.value}),n.push(`/inventory-audit/issues/${e.params.id}`);else{const A=yield et("frappe.client.insert",{doc:me({doctype:"Issue Log"},c.value)});n.push(`/inventory-audit/issues/${A.name}`)}}catch(A){console.error("Error saving issue:",A),alert("Error saving issue: "+A.message)}finally{r.value=!1}})}function x(){d.value?n.push(`/inventory-audit/issues/${e.params.id}`):n.push("/inventory-audit/issues")}const w=[{label:"Stock Discrepancy",value:"Stock Discrepancy"},{label:"Quality Issue",value:"Quality Issue"},{label:"Documentation Error",value:"Documentation Error"},{label:"Process Violation",value:"Process Violation"},{label:"System Error",value:"System Error"},{label:"Other",value:"Other"}],k=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],S=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Urgent",value:"Urgent"}],C=[{label:"Open",value:"Open"},{label:"In Progress",value:"In Progress"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}];return(A,M)=>(T(),P("div",L4n,[u("div",V4n,[u("div",N4n,[b(y(Z),{variant:"ghost",onClick:x},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",j4n,E(d.value?"Edit Issue":"Log New Issue"),1),u("p",F4n,E(d.value?`Editing ${y(e).params.id}`:"Report a new stock take issue"),1)])]),u("div",B4n,[b(y(Z),{variant:"outline",onClick:x},{default:D(()=>[...M[19]||(M[19]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:_,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(d.value?"Save Changes":"Log Issue"),1)]),_:1},8,["loading"])])]),u("div",z4n,[u("div",U4n,[u("div",H4n,[M[28]||(M[28]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),u("div",q4n,[u("div",null,[M[20]||(M[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Issue Type "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"select",modelValue:c.value.issue_type,"onUpdate:modelValue":M[0]||(M[0]=$=>c.value.issue_type=$),options:w},null,8,["modelValue"])]),u("div",null,[M[21]||(M[21]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Severity",-1)),b(y(ge),{type:"select",modelValue:c.value.severity,"onUpdate:modelValue":M[1]||(M[1]=$=>c.value.severity=$),options:k},null,8,["modelValue"])]),u("div",null,[M[22]||(M[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),b(y(ge),{type:"select",modelValue:c.value.priority,"onUpdate:modelValue":M[2]||(M[2]=$=>c.value.priority=$),options:S},null,8,["modelValue"])]),u("div",null,[M[23]||(M[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(y(ge),{type:"select",modelValue:c.value.status,"onUpdate:modelValue":M[3]||(M[3]=$=>c.value.status=$),options:C},null,8,["modelValue"])]),u("div",null,[M[24]||(M[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reported By",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.reported_by,"onUpdate:modelValue":M[4]||(M[4]=$=>c.value.reported_by=$),options:i.value,placeholder:"Select user"},null,8,["modelValue","options"])]),u("div",null,[M[25]||(M[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.assigned_to,"onUpdate:modelValue":M[5]||(M[5]=$=>c.value.assigned_to=$),options:i.value,placeholder:"Select assignee"},null,8,["modelValue","options"])]),u("div",null,[M[26]||(M[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reported Date",-1)),b(y(ge),{type:"date",modelValue:c.value.reported_date,"onUpdate:modelValue":M[6]||(M[6]=$=>c.value.reported_date=$)},null,8,["modelValue"])]),u("div",null,[M[27]||(M[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),b(y(ge),{type:"date",modelValue:c.value.due_date,"onUpdate:modelValue":M[7]||(M[7]=$=>c.value.due_date=$)},null,8,["modelValue"])])])]),u("div",W4n,[M[33]||(M[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Issue Details",-1)),u("div",G4n,[u("div",null,[M[29]||(M[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Description "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"textarea",modelValue:c.value.description,"onUpdate:modelValue":M[8]||(M[8]=$=>c.value.description=$),placeholder:"Describe the issue in detail...",rows:4},null,8,["modelValue"])]),u("div",null,[M[30]||(M[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),b(y(ge),{type:"text",modelValue:c.value.location,"onUpdate:modelValue":M[9]||(M[9]=$=>c.value.location=$),placeholder:"Where did this issue occur?"},null,8,["modelValue"])]),u("div",Y4n,[u("div",null,[M[31]||(M[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Item Code",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.item_code,"onUpdate:modelValue":M[10]||(M[10]=$=>c.value.item_code=$),options:a.value,placeholder:"Select affected item"},null,8,["modelValue","options"])]),u("div",null,[M[32]||(M[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quantity Affected",-1)),b(y(ge),{type:"number",modelValue:c.value.quantity_affected,"onUpdate:modelValue":M[11]||(M[11]=$=>c.value.quantity_affected=$),placeholder:"0"},null,8,["modelValue"])])])])]),u("div",K4n,[M[37]||(M[37]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Related Records",-1)),u("div",X4n,[u("div",null,[M[34]||(M[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock Take Session",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.stock_take_session,"onUpdate:modelValue":M[12]||(M[12]=$=>c.value.stock_take_session=$),options:s.value,placeholder:"Link to session"},null,8,["modelValue","options"])]),u("div",null,[M[35]||(M[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Variance Case",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.variance_case,"onUpdate:modelValue":M[13]||(M[13]=$=>c.value.variance_case=$),options:o.value,placeholder:"Link to variance case"},null,8,["modelValue","options"])]),u("div",null,[M[36]||(M[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Plan",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.audit_plan,"onUpdate:modelValue":M[14]||(M[14]=$=>c.value.audit_plan=$),options:l.value,placeholder:"Link to audit plan"},null,8,["modelValue","options"])])])]),c.value.status==="Resolved"?(T(),P("div",Z4n,[M[41]||(M[41]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resolution Details",-1)),u("div",Q4n,[u("div",null,[M[38]||(M[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution",-1)),b(y(ge),{type:"textarea",modelValue:c.value.resolution,"onUpdate:modelValue":M[15]||(M[15]=$=>c.value.resolution=$),placeholder:"Describe how this issue was resolved...",rows:3},null,8,["modelValue"])]),u("div",J4n,[u("div",null,[M[39]||(M[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolved By",-1)),b(y(ge),{type:"autocomplete",modelValue:c.value.resolved_by,"onUpdate:modelValue":M[16]||(M[16]=$=>c.value.resolved_by=$),options:i.value,placeholder:"Select user"},null,8,["modelValue","options"])]),u("div",null,[M[40]||(M[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolved Date",-1)),b(y(ge),{type:"date",modelValue:c.value.resolved_date,"onUpdate:modelValue":M[17]||(M[17]=$=>c.value.resolved_date=$)},null,8,["modelValue"])])])])])):ie("",!0),u("div",e3n,[M[42]||(M[42]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Additional Notes",-1)),b(y(ge),{type:"textarea",modelValue:c.value.notes,"onUpdate:modelValue":M[18]||(M[18]=$=>c.value.notes=$),placeholder:"Any additional notes or observations...",rows:3},null,8,["modelValue"])])]),u("div",t3n,[b(y(Z),{variant:"outline",onClick:x},{default:D(()=>[...M[43]||(M[43]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:_,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(d.value?"Save Changes":"Log Issue"),1)]),_:1},8,["loading"])])])]))}},n3n={class:"p-6"},r3n={class:"flex justify-between items-center mb-6"},i3n={class:"flex gap-2"},a3n={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},s3n={class:"bg-white rounded-lg border p-4"},o3n={class:"text-2xl font-bold"},l3n={class:"bg-white rounded-lg border p-4"},u3n={class:"bg-white rounded-lg border p-4"},d3n={class:"flex items-center gap-2 mt-1"},c3n={class:"bg-white rounded-lg border p-4"},f3n={class:"text-lg font-medium"},p3n={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},h3n=["onClick"],m3n={class:"px-4 py-3 border-b bg-gray-50 flex items-center justify-between"},g3n={class:"font-medium text-gray-900"},v3n={class:"text-sm text-gray-500"},y3n={class:"text-right"},b3n={class:"p-4"},_3n={class:"text-center mb-4"},x3n={class:"w-full bg-gray-200 rounded-full h-3 mt-2"},w3n={class:"space-y-3"},k3n={class:"flex items-center justify-between text-sm"},S3n={class:"font-medium"},C3n={class:"flex items-center justify-between text-sm"},A3n={class:"font-medium"},T3n={class:"flex items-center justify-between text-sm"},E3n={class:"font-medium"},M3n={class:"flex items-center justify-between text-sm"},$3n={class:"font-medium"},D3n={class:"flex items-center justify-between text-sm"},R3n={class:"font-medium"},P3n={class:"mt-4 pt-4 border-t grid grid-cols-3 gap-2 text-center text-sm"},I3n={class:"font-medium"},O3n={class:"font-medium"},L3n={class:"font-medium"},V3n={class:"px-4 py-2 bg-gray-50 border-t flex items-center justify-between text-sm text-gray-500"},N3n={key:0,class:"bg-white rounded-lg border p-12 text-center text-gray-500"},j3n={__name:"ComplianceScorecardList",setup(t){const e=xn(),n=Xl(),r=Q(!1),i=Q(!1),a=J(()=>n.scorecards),s=J(()=>a.value.length===0?0:Math.round(a.value.reduce((w,k)=>w+(k.overall_compliance_score||0),0)/a.value.length)),o=J(()=>a.value.reduce((w,k)=>{const S=k.grade||"N/A";return w[S]=(w[S]||0)+1,w},{})),l=J(()=>{if(a.value.length===0)return"-";const w=a.value.reduce((k,S)=>{const C=new Date(S.calculation_date||0);return C>k?C:k},new Date(0));return x(w.toISOString())});bt(()=>le(this,null,function*(){yield d()}));function d(){return le(this,null,function*(){r.value=!0;try{yield n.loadScorecards()}finally{r.value=!1}})}function c(){return le(this,null,function*(){i.value=!0;try{for(const w of a.value)yield n.recalculateScorecard(w.audit_plan)}finally{i.value=!1}})}function f(w){return le(this,null,function*(){yield n.recalculateScorecard(w)})}function p(w){return le(this,null,function*(){e.push({name:"ComplianceScorecardDetail",params:{id:w}})})}function h(){e.push({name:"NewComplianceScorecard"})}function m(w){return w>=90?"text-green-600":w>=70?"text-blue-600":w>=50?"text-yellow-600":"text-red-600"}function g(w){return w>=90?"bg-green-500":w>=70?"bg-blue-500":w>=50?"bg-yellow-500":"bg-red-500"}function v(w){return{A:"text-green-600",B:"text-blue-600",C:"text-yellow-600",D:"text-orange-600",F:"text-red-600"}[w]||"text-gray-600"}function _(w){return{A:"bg-green-100 text-green-700",B:"bg-blue-100 text-blue-700",C:"bg-yellow-100 text-yellow-700",D:"bg-orange-100 text-orange-700",F:"bg-red-100 text-red-700"}[w]||"bg-gray-100 text-gray-700"}function x(w){return w?new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}return(w,k)=>(T(),P("div",n3n,[u("div",r3n,[k[2]||(k[2]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Compliance Scorecards"),u("p",{class:"text-gray-600"},"Track audit compliance metrics and performance grades")],-1)),u("div",i3n,[b(y(Z),{onClick:d,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(y(Z),{onClick:c,loading:i.value,variant:"outline",size:"sm"},{default:D(()=>[b(y(Q1),{class:"w-4 h-4 mr-2"}),k[0]||(k[0]=W(" Recalculate All ",-1))]),_:1},8,["loading"]),b(y(Z),{onClick:h,variant:"solid",size:"sm"},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),k[1]||(k[1]=W(" New Scorecard ",-1))]),_:1})])]),u("div",a3n,[u("div",s3n,[k[3]||(k[3]=u("p",{class:"text-sm text-gray-500"},"Total Scorecards",-1)),u("p",o3n,E(a.value.length),1)]),u("div",l3n,[k[4]||(k[4]=u("p",{class:"text-sm text-gray-500"},"Average Score",-1)),u("p",{class:fe(["text-2xl font-bold",m(s.value)])},E(s.value)+"%",3)]),u("div",u3n,[k[5]||(k[5]=u("p",{class:"text-sm text-gray-500"},"Grade Distribution",-1)),u("div",d3n,[(T(!0),P(_e,null,we(o.value,(S,C)=>(T(),P("span",{key:C,class:fe(["text-sm px-2 py-1 rounded-full",_(C)])},E(C)+": "+E(S),3))),128))])]),u("div",c3n,[k[6]||(k[6]=u("p",{class:"text-sm text-gray-500"},"Last Updated",-1)),u("p",f3n,E(l.value),1)])]),u("div",p3n,[(T(!0),P(_e,null,we(a.value,S=>(T(),P("div",{key:S.name,class:"bg-white rounded-lg border shadow-sm overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:C=>p(S.name)},[u("div",m3n,[u("div",null,[u("h4",g3n,E(S.audit_plan_title),1),u("p",v3n,E(S.scorecard_id),1)]),u("div",y3n,[u("p",{class:fe(["text-3xl font-bold",v(S.grade)])},E(S.grade),3)])]),u("div",b3n,[u("div",_3n,[k[7]||(k[7]=u("p",{class:"text-sm text-gray-500"},"Overall Compliance Score",-1)),u("p",{class:fe(["text-4xl font-bold",m(S.overall_compliance_score)])},E(Math.round(S.overall_compliance_score||0))+"% ",3),u("div",x3n,[u("div",{class:fe(["h-full rounded-full transition-all duration-500",g(S.overall_compliance_score)]),style:nt({width:`${S.overall_compliance_score||0}%`})},null,6)])]),u("div",w3n,[u("div",k3n,[k[8]||(k[8]=u("span",{class:"text-gray-600"},"Completion Rate",-1)),u("span",S3n,E(Math.round(S.completion_rate||0))+"%",1)]),u("div",C3n,[k[9]||(k[9]=u("span",{class:"text-gray-600"},"Accuracy Score",-1)),u("span",A3n,E(Math.round(S.accuracy_score||0))+"%",1)]),u("div",T3n,[k[10]||(k[10]=u("span",{class:"text-gray-600"},"Timeliness Score",-1)),u("span",E3n,E(Math.round(S.timeliness_score||0))+"%",1)]),u("div",M3n,[k[11]||(k[11]=u("span",{class:"text-gray-600"},"SLA Compliance",-1)),u("span",$3n,E(Math.round(S.sla_compliance_rate||0))+"%",1)]),u("div",D3n,[k[12]||(k[12]=u("span",{class:"text-gray-600"},"Issue Resolution",-1)),u("span",R3n,E(Math.round(S.issue_resolution_rate||0))+"%",1)])]),u("div",P3n,[u("div",null,[k[13]||(k[13]=u("p",{class:"text-gray-500"},"Sessions",-1)),u("p",I3n,E(S.completed_sessions||0)+"/"+E(S.total_sessions||0),1)]),u("div",null,[k[14]||(k[14]=u("p",{class:"text-gray-500"},"Cases",-1)),u("p",O3n,E(S.resolved_variance_cases||0)+"/"+E(S.total_variance_cases||0),1)]),u("div",null,[k[15]||(k[15]=u("p",{class:"text-gray-500"},"Issues",-1)),u("p",L3n,E(S.resolved_issues||0)+"/"+E(S.total_issues||0),1)])])]),u("div",V3n,[u("span",null,"Last calculated: "+E(x(S.calculation_date)),1),b(y(Z),{variant:"ghost",size:"sm",onClick:dt(C=>f(S.audit_plan),["stop"])},{default:D(()=>[b(y(hn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])],8,h3n))),128))]),a.value.length===0&&!r.value?(T(),P("div",N3n,[b(y(HD),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),k[16]||(k[16]=u("p",null,"No scorecards available",-1)),k[17]||(k[17]=u("p",{class:"text-sm mt-1"},"Scorecards are created automatically when audit plans are set up",-1))])):ie("",!0)]))}},F3n={class:"p-6"},B3n={class:"flex items-center justify-between mb-6"},z3n={class:"flex items-center gap-4"},U3n={class:"text-gray-500 mt-1"},H3n={class:"flex items-center gap-2"},q3n={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},W3n={class:"lg:col-span-2 space-y-6"},G3n={class:"bg-white rounded-lg border p-6"},Y3n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K3n={class:"mt-1 text-sm text-gray-900"},X3n={class:"mt-1 text-sm text-gray-900"},Z3n={class:"flex items-center gap-2"},Q3n={class:"text-2xl font-bold text-blue-600"},J3n={class:"mt-1 text-sm text-gray-900"},e5n={class:"mt-1 text-sm text-gray-900"},t5n={class:"bg-white rounded-lg border p-6"},n5n={key:0,class:"space-y-4"},r5n={class:"flex items-center justify-between mb-3"},i5n={class:"font-medium text-gray-900"},a5n={class:"flex items-center gap-2"},s5n={class:"text-lg font-semibold text-blue-600"},o5n={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},l5n={class:"font-medium ml-2"},u5n={class:"font-medium ml-2 text-green-600"},d5n={class:"font-medium ml-2 text-red-600"},c5n={class:"font-medium ml-2"},f5n={key:0,class:"mt-3"},p5n={class:"text-sm text-gray-700"},h5n={key:1,class:"text-center py-8 text-gray-500"},m5n={class:"bg-white rounded-lg border p-6"},g5n={class:"prose max-w-none"},v5n={class:"text-gray-700 whitespace-pre-wrap"},y5n={class:"bg-white rounded-lg border p-6"},b5n={class:"prose max-w-none"},_5n={class:"text-gray-700 whitespace-pre-wrap"},x5n={class:"space-y-6"},w5n={class:"bg-white rounded-lg border p-6"},k5n={class:"space-y-4"},S5n={class:"text-center"},C5n={class:"relative w-24 h-24 mx-auto mb-2"},A5n={class:"w-24 h-24 transform -rotate-90",viewBox:"0 0 24 24"},T5n=["stroke-dasharray"],E5n={class:"absolute inset-0 flex items-center justify-center"},M5n={class:"text-xl font-bold text-gray-900"},$5n={class:"space-y-2"},D5n={class:"flex justify-between text-sm"},R5n={class:"font-medium"},P5n={class:"flex justify-between text-sm"},I5n={class:"font-medium"},O5n={class:"flex justify-between text-sm"},L5n={class:"font-medium text-green-600"},V5n={class:"flex justify-between text-sm"},N5n={class:"font-medium text-red-600"},j5n={class:"bg-white rounded-lg border p-6"},F5n={class:"space-y-2"},B5n={class:"bg-white rounded-lg border p-6"},z5n={class:"space-y-3"},U5n={key:0},H5n={class:"bg-white rounded-lg border p-6"},q5n={class:"space-y-3"},W5n={class:"flex items-start gap-3"},G5n={class:"flex-1"},Y5n={class:"text-xs text-gray-500"},K5n={key:0,class:"flex items-start gap-3"},X5n={class:"flex-1"},Z5n={class:"text-xs text-gray-500"},Q5n={__name:"ComplianceScorecardDetail",setup(t){const e=gs(),n=xn(),r=Q({}),i=J(()=>{var w;return((w=r.value.compliance_categories)==null?void 0:w.reduce((k,S)=>k+(S.total_checks||0),0))||0}),a=J(()=>{var w;return((w=r.value.compliance_categories)==null?void 0:w.reduce((k,S)=>k+(S.passed_checks||0),0))||0}),s=J(()=>{var w;return((w=r.value.compliance_categories)==null?void 0:w.reduce((k,S)=>k+(S.failed_checks||0),0))||0});bt(()=>le(this,null,function*(){yield o()}));function o(){return le(this,null,function*(){try{const w=yield et("frappe.client.get",{doctype:"Compliance Scorecard",name:e.params.id});r.value=w}catch(w){console.error("Error loading scorecard:",w)}})}function l(w){return{Draft:"outline","In Progress":"secondary",Completed:"solid",Approved:"solid"}[w]||"outline"}function d(w){return w>=90?"solid":w>=70?"secondary":w>=50?"outline":"destructive"}function c(w){return w>=90?"Excellent":w>=80?"Good":w>=70?"Satisfactory":w>=60?"Needs Improvement":"Poor"}function f(w){return w?new Date(w).toLocaleDateString():"-"}function p(w){return w?new Date(w).toLocaleString():"-"}function h(){n.push("/inventory-audit/scorecards")}function m(){n.push(`/inventory-audit/scorecards/${e.params.id}/edit`)}function g(){alert("Report generation feature coming soon!")}function v(){n.push(`/inventory-audit/scorecards/new?duplicate=${e.params.id}`)}function _(){alert("Data export feature coming soon!")}function x(w){n.push(`/inventory-audit/plans/${w}`)}return(w,k)=>{var S;return T(),P("div",F3n,[u("div",B3n,[u("div",z3n,[b(y(Z),{variant:"ghost",onClick:h},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[k[1]||(k[1]=u("h1",{class:"text-2xl font-bold text-gray-900"}," Compliance Scorecard ",-1)),u("p",U3n,E(r.value.name),1)])]),u("div",H3n,[b(y(Z),{variant:"outline",onClick:m},{default:D(()=>[b(y(vn),{class:"w-4 h-4 mr-2"}),k[2]||(k[2]=W(" Edit Scorecard ",-1))]),_:1}),b(y(Z),{variant:"solid",onClick:g},{default:D(()=>[b(y(vt),{class:"w-4 h-4 mr-2"}),k[3]||(k[3]=W(" Generate Report ",-1))]),_:1})])]),u("div",q3n,[u("div",W3n,[u("div",G3n,[k[10]||(k[10]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Scorecard Overview",-1)),u("div",Y3n,[u("div",null,[k[4]||(k[4]=u("label",{class:"block text-sm font-medium text-gray-700"},"Audit Plan",-1)),u("p",K3n,E(r.value.audit_plan_name||r.value.audit_plan||"-"),1)]),u("div",null,[k[5]||(k[5]=u("label",{class:"block text-sm font-medium text-gray-700"},"Period",-1)),u("p",X3n,E(r.value.period||"-"),1)]),u("div",null,[k[6]||(k[6]=u("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),b(y(Ee),{variant:l(r.value.status)},{default:D(()=>[W(E(r.value.status||"Draft"),1)]),_:1},8,["variant"])]),u("div",null,[k[7]||(k[7]=u("label",{class:"block text-sm font-medium text-gray-700"},"Overall Score",-1)),u("div",Z3n,[u("div",Q3n,E(r.value.overall_score||0)+"%",1),b(y(Ee),{variant:d(r.value.overall_score)},{default:D(()=>[W(E(c(r.value.overall_score)),1)]),_:1},8,["variant"])])]),u("div",null,[k[8]||(k[8]=u("label",{class:"block text-sm font-medium text-gray-700"},"Created By",-1)),u("p",J3n,E(r.value.created_by||"-"),1)]),u("div",null,[k[9]||(k[9]=u("label",{class:"block text-sm font-medium text-gray-700"},"Created Date",-1)),u("p",e5n,E(f(r.value.creation)),1)])])]),u("div",t5n,[k[15]||(k[15]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Compliance Categories",-1)),r.value.compliance_categories&&r.value.compliance_categories.length>0?(T(),P("div",n5n,[(T(!0),P(_e,null,we(r.value.compliance_categories,C=>(T(),P("div",{key:C.name,class:"border rounded-lg p-4"},[u("div",r5n,[u("h4",i5n,E(C.category_name),1),u("div",a5n,[u("span",s5n,E(C.score)+"%",1),b(y(Ee),{variant:d(C.score)},{default:D(()=>[W(E(c(C.score)),1)]),_:2},1032,["variant"])])]),u("div",o5n,[u("div",null,[k[11]||(k[11]=u("span",{class:"text-gray-500"},"Total Checks:",-1)),u("span",l5n,E(C.total_checks),1)]),u("div",null,[k[12]||(k[12]=u("span",{class:"text-gray-500"},"Passed:",-1)),u("span",u5n,E(C.passed_checks),1)]),u("div",null,[k[13]||(k[13]=u("span",{class:"text-gray-500"},"Failed:",-1)),u("span",d5n,E(C.failed_checks),1)]),u("div",null,[k[14]||(k[14]=u("span",{class:"text-gray-500"},"Weight:",-1)),u("span",c5n,E(C.weight)+"%",1)])]),C.findings?(T(),P("div",f5n,[u("p",p5n,E(C.findings),1)])):ie("",!0)]))),128))])):(T(),P("div",h5n," No compliance categories defined. "))]),u("div",m5n,[k[16]||(k[16]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Key Findings",-1)),u("div",g5n,[u("p",v5n,E(r.value.key_findings||"No key findings recorded."),1)])]),u("div",y5n,[k[17]||(k[17]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Recommendations",-1)),u("div",b5n,[u("p",_5n,E(r.value.recommendations||"No recommendations provided."),1)])])]),u("div",x5n,[u("div",w5n,[k[24]||(k[24]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Score Summary",-1)),u("div",k5n,[u("div",S5n,[u("div",C5n,[(T(),P("svg",A5n,[k[18]||(k[18]=u("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none",class:"text-gray-200"},null,-1)),u("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-dasharray":`${(r.value.overall_score||0)*.628} 62.8`,class:"text-blue-600"},null,8,T5n)])),u("div",E5n,[u("span",M5n,E(r.value.overall_score||0)+"%",1)])]),k[19]||(k[19]=u("p",{class:"text-sm text-gray-600"},"Overall Compliance",-1))]),u("div",$5n,[u("div",D5n,[k[20]||(k[20]=u("span",{class:"text-gray-600"},"Categories Assessed:",-1)),u("span",R5n,E(((S=r.value.compliance_categories)==null?void 0:S.length)||0),1)]),u("div",P5n,[k[21]||(k[21]=u("span",{class:"text-gray-600"},"Total Checks:",-1)),u("span",I5n,E(i.value),1)]),u("div",O5n,[k[22]||(k[22]=u("span",{class:"text-gray-600"},"Passed Checks:",-1)),u("span",L5n,E(a.value),1)]),u("div",V5n,[k[23]||(k[23]=u("span",{class:"text-gray-600"},"Failed Checks:",-1)),u("span",N5n,E(s.value),1)])])])]),u("div",j5n,[k[29]||(k[29]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),u("div",F5n,[b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:m},{default:D(()=>[b(y(vn),{class:"w-4 h-4 mr-2"}),k[25]||(k[25]=W(" Edit Scorecard ",-1))]),_:1}),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:g},{default:D(()=>[b(y(vt),{class:"w-4 h-4 mr-2"}),k[26]||(k[26]=W(" Generate Report ",-1))]),_:1}),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:v},{default:D(()=>[b(y(qs),{class:"w-4 h-4 mr-2"}),k[27]||(k[27]=W(" Duplicate Scorecard ",-1))]),_:1}),b(y(Z),{variant:"outline",class:"w-full justify-start",onClick:_},{default:D(()=>[b(y(bn),{class:"w-4 h-4 mr-2"}),k[28]||(k[28]=W(" Export Data ",-1))]),_:1})])]),u("div",B5n,[k[31]||(k[31]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Related Records",-1)),u("div",z5n,[r.value.audit_plan?(T(),P("div",U5n,[k[30]||(k[30]=u("label",{class:"block text-sm font-medium text-gray-700"},"Audit Plan",-1)),b(y(Z),{variant:"link",class:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:k[0]||(k[0]=C=>x(r.value.audit_plan))},{default:D(()=>[W(E(r.value.audit_plan_name||r.value.audit_plan),1)]),_:1})])):ie("",!0)])]),u("div",H5n,[k[36]||(k[36]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",q5n,[u("div",W5n,[k[33]||(k[33]=u("div",{class:"w-2 h-2 bg-blue-500 rounded-full mt-2"},null,-1)),u("div",G5n,[k[32]||(k[32]=u("p",{class:"text-sm font-medium text-gray-900"},"Scorecard Created",-1)),u("p",Y5n,E(p(r.value.creation)),1)])]),r.value.modified!==r.value.creation?(T(),P("div",K5n,[k[35]||(k[35]=u("div",{class:"w-2 h-2 bg-green-500 rounded-full mt-2"},null,-1)),u("div",X5n,[k[34]||(k[34]=u("p",{class:"text-sm font-medium text-gray-900"},"Last Modified",-1)),u("p",Z5n,E(p(r.value.modified)),1)])])):ie("",!0)])])])])])}}},J5n={class:"p-6"},eEn={class:"flex items-center justify-between mb-6"},tEn={class:"flex items-center gap-4"},nEn={class:"text-2xl font-bold text-gray-900"},rEn={class:"text-gray-500 mt-1"},iEn={class:"flex items-center gap-2"},aEn={class:"max-w-4xl"},sEn={class:"space-y-6"},oEn={class:"bg-white rounded-lg border p-6"},lEn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uEn={class:"bg-white rounded-lg border p-6"},dEn={class:"flex items-center justify-between mb-4"},cEn={class:"flex items-center gap-2"},fEn={class:"overflow-x-auto"},pEn={class:"min-w-full divide-y divide-gray-200"},hEn={class:"bg-white divide-y divide-gray-200"},mEn={class:"px-4 py-4"},gEn={class:"px-4 py-4"},vEn={class:"px-4 py-4"},yEn={class:"px-4 py-4"},bEn={class:"px-4 py-4"},_En={class:"px-4 py-4"},xEn={class:"px-4 py-4"},wEn={class:"px-4 py-4"},kEn={class:"mt-4 pt-4 border-t"},SEn={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},CEn={class:"font-medium ml-2"},AEn={class:"font-medium ml-2"},TEn={class:"font-medium ml-2 text-blue-600"},EEn={class:"font-medium ml-2 text-green-600"},MEn={class:"bg-white rounded-lg border p-6"},$En={class:"bg-white rounded-lg border p-6"},DEn={class:"bg-white rounded-lg border p-6"},REn={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},yW={__name:"ComplianceScorecardForm",setup(t){const e=gs(),n=xn(),r=Q(!1),i=Q([]),a=J(()=>e.params.id&&e.params.id!=="new"),s=Q({audit_plan:"",period:"",status:"Draft",overall_score:0,compliance_categories:[],key_findings:"",recommendations:"",notes:""}),o=J(()=>s.value.compliance_categories.reduce((C,A)=>C+(A.weight||0),0)),l=J(()=>{if(o.value===0)return 0;const C=s.value.compliance_categories.reduce((A,M)=>A+(M.score||0)*(M.weight||0),0);return Math.round(C/o.value)}),d=J(()=>{if(s.value.compliance_categories.length===0)return 0;const C=s.value.compliance_categories.reduce((A,M)=>A+(M.score||0),0);return Math.round(C/s.value.compliance_categories.length)});bt(()=>le(this,null,function*(){yield c(),a.value&&(yield f())}));function c(){return le(this,null,function*(){try{const C=yield et("frappe.client.get_list",{doctype:"Audit Plan",fields:["name","plan_title"],limit_page_length:0});i.value=C.map(A=>({label:A.plan_title||A.name,value:A.name}))}catch(C){console.error("Error loading audit plans:",C)}})}function f(){return le(this,null,function*(){try{const C=yield et("frappe.client.get",{doctype:"Compliance Scorecard",name:e.params.id});s.value={audit_plan:C.audit_plan||"",period:C.period||"",status:C.status||"Draft",overall_score:C.overall_score||0,compliance_categories:C.compliance_categories||[],key_findings:C.key_findings||"",recommendations:C.recommendations||"",notes:C.notes||""}}catch(C){console.error("Error loading scorecard:",C)}})}function p(){i.value.find(A=>A.value===s.value.audit_plan)&&s.value.period}function h(){s.value.compliance_categories.push({category_name:"",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:0,findings:""})}function m(C){s.value.compliance_categories.splice(C,1),_()}function g(C){const A=s.value.compliance_categories[C];A.total_checks&&A.passed_checks&&(A.failed_checks=A.total_checks-A.passed_checks,v(C))}function v(C){const A=s.value.compliance_categories[C];A.total_checks>0&&(A.score=Math.round(A.passed_checks/A.total_checks*100),_())}function _(){o.value>0?s.value.overall_score=l.value:s.value.overall_score=d.value}function x(){return le(this,null,function*(){if(!s.value.audit_plan){alert("Please select an audit plan first");return}try{const C=yield et("frappe.client.get",{doctype:"Audit Plan",name:s.value.audit_plan}),A=[{category_name:"Planning & Preparation",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:20,findings:""},{category_name:"Execution & Documentation",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:25,findings:""},{category_name:"Quality Control",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:20,findings:""},{category_name:"Compliance & Standards",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:20,findings:""},{category_name:"Reporting & Follow-up",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:15,findings:""}];s.value.compliance_categories=A,_()}catch(C){console.error("Error loading from audit plan:",C)}})}function w(){return le(this,null,function*(){if(!s.value.audit_plan){alert("Audit plan is required");return}r.value=!0;try{if(a.value)yield et("frappe.client.set_value",{doctype:"Compliance Scorecard",name:e.params.id,fieldname:s.value}),n.push(`/inventory-audit/scorecards/${e.params.id}`);else{const C=yield et("frappe.client.insert",{doc:me({doctype:"Compliance Scorecard"},s.value)});n.push(`/inventory-audit/scorecards/${C.name}`)}}catch(C){console.error("Error saving scorecard:",C),alert("Error saving scorecard: "+C.message)}finally{r.value=!1}})}function k(){a.value?n.push(`/inventory-audit/scorecards/${e.params.id}`):n.push("/inventory-audit/scorecards")}const S=[{label:"Draft",value:"Draft"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Approved",value:"Approved"},{label:"Archived",value:"Archived"}];return(C,A)=>(T(),P("div",J5n,[u("div",eEn,[u("div",tEn,[b(y(Z),{variant:"ghost",onClick:k},{default:D(()=>[b(y(ti),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",nEn,E(a.value?"Edit Compliance Scorecard":"New Compliance Scorecard"),1),u("p",rEn,E(a.value?`Editing ${y(e).params.id}`:"Create a new compliance scorecard"),1)])]),u("div",iEn,[b(y(Z),{variant:"outline",onClick:k},{default:D(()=>[...A[7]||(A[7]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:w,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(a.value?"Save Changes":"Create Scorecard"),1)]),_:1},8,["loading"])])]),u("div",aEn,[u("div",sEn,[u("div",oEn,[A[12]||(A[12]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),u("div",lEn,[u("div",null,[A[8]||(A[8]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Plan "),u("span",{class:"text-red-500"},"*")],-1)),b(y(ge),{type:"autocomplete",modelValue:s.value.audit_plan,"onUpdate:modelValue":A[0]||(A[0]=M=>s.value.audit_plan=M),options:i.value,placeholder:"Select audit plan",onChange:p},null,8,["modelValue","options"])]),u("div",null,[A[9]||(A[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Period",-1)),b(y(ge),{type:"text",modelValue:s.value.period,"onUpdate:modelValue":A[1]||(A[1]=M=>s.value.period=M),placeholder:"e.g., Q4 2025"},null,8,["modelValue"])]),u("div",null,[A[10]||(A[10]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(y(ge),{type:"select",modelValue:s.value.status,"onUpdate:modelValue":A[2]||(A[2]=M=>s.value.status=M),options:S},null,8,["modelValue"])]),u("div",null,[A[11]||(A[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Overall Score (%)",-1)),b(y(ge),{type:"number",modelValue:s.value.overall_score,"onUpdate:modelValue":A[3]||(A[3]=M=>s.value.overall_score=M),placeholder:"0",min:"0",max:"100",onInput:_},null,8,["modelValue"])])])]),u("div",uEn,[u("div",dEn,[A[15]||(A[15]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Compliance Categories",-1)),u("div",cEn,[b(y(Z),{variant:"outline",size:"sm",onClick:x},{default:D(()=>[b(y(bn),{class:"w-4 h-4 mr-2"}),A[13]||(A[13]=W(" Load from Plan ",-1))]),_:1}),b(y(Z),{variant:"outline",size:"sm",onClick:h},{default:D(()=>[b(y(tt),{class:"w-4 h-4 mr-2"}),A[14]||(A[14]=W(" Add Category ",-1))]),_:1})])]),u("div",fEn,[u("table",pEn,[A[16]||(A[16]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category Name"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Score (%)"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total Checks"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Passed"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Failed"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Weight (%)"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Findings"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",hEn,[(T(!0),P(_e,null,we(s.value.compliance_categories,(M,$)=>(T(),P("tr",{key:$,class:"hover:bg-gray-50"},[u("td",mEn,[b(y(ge),{type:"text",modelValue:M.category_name,"onUpdate:modelValue":R=>M.category_name=R,placeholder:"Category name",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",gEn,[b(y(ge),{type:"number",modelValue:M.score,"onUpdate:modelValue":R=>M.score=R,placeholder:"0",min:"0",max:"100",class:"w-full",onInput:_},null,8,["modelValue","onUpdate:modelValue"])]),u("td",vEn,[b(y(ge),{type:"number",modelValue:M.total_checks,"onUpdate:modelValue":R=>M.total_checks=R,placeholder:"0",min:"0",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",yEn,[b(y(ge),{type:"number",modelValue:M.passed_checks,"onUpdate:modelValue":R=>M.passed_checks=R,placeholder:"0",min:"0",class:"w-full",onInput:R=>g($)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),u("td",bEn,[b(y(ge),{type:"number",modelValue:M.failed_checks,"onUpdate:modelValue":R=>M.failed_checks=R,placeholder:"0",min:"0",class:"w-full",onInput:R=>v($)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),u("td",_En,[b(y(ge),{type:"number",modelValue:M.weight,"onUpdate:modelValue":R=>M.weight=R,placeholder:"0",min:"0",max:"100",class:"w-full",onInput:_},null,8,["modelValue","onUpdate:modelValue"])]),u("td",xEn,[b(y(ge),{type:"text",modelValue:M.findings,"onUpdate:modelValue":R=>M.findings=R,placeholder:"Key findings",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",wEn,[b(y(Z),{variant:"ghost",size:"sm",onClick:R=>m($)},{default:D(()=>[b(y(hi),{class:"w-4 h-4 text-red-600"})]),_:1},8,["onClick"])])]))),128))])])]),u("div",kEn,[u("div",SEn,[u("div",null,[A[17]||(A[17]=u("span",{class:"text-gray-500"},"Total Categories:",-1)),u("span",CEn,E(s.value.compliance_categories.length),1)]),u("div",null,[A[18]||(A[18]=u("span",{class:"text-gray-500"},"Total Weight:",-1)),u("span",AEn,E(o.value)+"%",1)]),u("div",null,[A[19]||(A[19]=u("span",{class:"text-gray-500"},"Weighted Score:",-1)),u("span",TEn,E(l.value)+"%",1)]),u("div",null,[A[20]||(A[20]=u("span",{class:"text-gray-500"},"Auto-calculated:",-1)),u("span",EEn,E(d.value)+"%",1)])])])]),u("div",MEn,[A[21]||(A[21]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Key Findings",-1)),b(y(ge),{type:"textarea",modelValue:s.value.key_findings,"onUpdate:modelValue":A[4]||(A[4]=M=>s.value.key_findings=M),placeholder:"Summarize the key findings from the compliance assessment...",rows:4},null,8,["modelValue"])]),u("div",$En,[A[22]||(A[22]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Recommendations",-1)),b(y(ge),{type:"textarea",modelValue:s.value.recommendations,"onUpdate:modelValue":A[5]||(A[5]=M=>s.value.recommendations=M),placeholder:"Provide recommendations for improving compliance...",rows:4},null,8,["modelValue"])]),u("div",DEn,[A[23]||(A[23]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Additional Notes",-1)),b(y(ge),{type:"textarea",modelValue:s.value.notes,"onUpdate:modelValue":A[6]||(A[6]=M=>s.value.notes=M),placeholder:"Any additional notes or observations...",rows:3},null,8,["modelValue"])])]),u("div",REn,[b(y(Z),{variant:"outline",onClick:k},{default:D(()=>[...A[24]||(A[24]=[W("Cancel",-1)])]),_:1}),b(y(Z),{variant:"solid",onClick:w,loading:r.value},{default:D(()=>[b(y(Cr),{class:"w-4 h-4 mr-2"}),W(" "+E(a.value?"Save Changes":"Create Scorecard"),1)]),_:1},8,["loading"])])])]))}},PEn={class:"min-h-screen flex items-center justify-center bg-gray-50"},IEn={class:"max-w-md w-full text-center"},OEn={class:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-gray-100"},LEn={class:"mt-6"},VEn={__name:"NotFound",setup(t){return(e,n)=>{const r=Ji("router-link");return T(),P("div",PEn,[u("div",IEn,[u("div",OEn,[b(y(rE),{class:"h-6 w-6 text-gray-600"})]),n[1]||(n[1]=u("h1",{class:"mt-4 text-2xl font-bold text-gray-900"},"Page Not Found",-1)),n[2]||(n[2]=u("p",{class:"mt-2 text-gray-600"}," The page you're looking for doesn't exist. ",-1)),u("div",LEn,[b(r,{to:"/",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"},{default:D(()=>[...n[0]||(n[0]=[W(" Go to Dashboard ",-1)])]),_:1})])])])}}},NEn={class:"min-h-screen flex items-center justify-center bg-gray-50"},jEn={class:"max-w-md w-full text-center"},FEn={class:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-red-100"},BEn={class:"mt-6"},zEn={__name:"Unauthorized",setup(t){return(e,n)=>{const r=Ji("router-link");return T(),P("div",NEn,[u("div",jEn,[u("div",FEn,[b(y(Fc),{class:"h-6 w-6 text-red-600"})]),n[1]||(n[1]=u("h1",{class:"mt-4 text-2xl font-bold text-gray-900"},"Access Denied",-1)),n[2]||(n[2]=u("p",{class:"mt-2 text-gray-600"}," You don't have permission to access this page. ",-1)),u("div",BEn,[b(r,{to:"/",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"},{default:D(()=>[...n[0]||(n[0]=[W(" Go to Dashboard ",-1)])]),_:1})])])])}}},UEn=[{path:"/",component:Wnt,meta:{requiresAuth:!0},children:[{path:"",name:"Dashboard",component:OMt,meta:{title:"Dashboard",icon:"LayoutDashboard",breadcrumb:"Dashboard"}},{path:"audit-planning/universe",name:"AuditUniverse",component:t1t,meta:{title:"Audit Universe",icon:"Target",breadcrumb:"Audit Universe"}},{path:"audit-planning/universe/new",name:"NewAuditUniverse",component:()=>Va(()=>import("./AuditUniverseDetail-D65udHHj.js"),[]),meta:{title:"New Audit Universe Entity",breadcrumb:"New Entity"},props:{mode:"new"}},{path:"audit-planning/universe/:id",name:"AuditUniverseDetail",component:()=>Va(()=>import("./AuditUniverseDetail-D65udHHj.js"),[]),meta:{title:"Audit Universe Details",breadcrumb:"Entity Details"},props:t=>({entityId:t.params.id,mode:"view"})},{path:"audit-planning/universe/:id/edit",name:"EditAuditUniverse",component:()=>Va(()=>import("./AuditUniverseDetail-D65udHHj.js"),[]),meta:{title:"Edit Audit Universe Entity",breadcrumb:"Edit Entity"},props:t=>({entityId:t.params.id,mode:"edit"})},{path:"audit-planning/risk-assessment",name:"RiskAssessments",component:SKt,meta:{title:"Risk Assessments",icon:"AlertTriangle",breadcrumb:"Risk Assessments"}},{path:"audit-planning/risk-assessment/new",name:"NewRiskAssessment",component:()=>Va(()=>import("./RiskAssessmentDetail-D0tBLF4M.js"),__vite__mapDeps([0,1])),meta:{title:"New Risk Assessment",breadcrumb:"New Assessment"},props:{mode:"new"}},{path:"audit-planning/risk-assessment/:id",name:"RiskAssessmentDetail",component:()=>Va(()=>import("./RiskAssessmentDetail-D0tBLF4M.js"),__vite__mapDeps([0,1])),meta:{title:"Risk Assessment Details",breadcrumb:"Risk Assessment Details"},props:!0},{path:"audit-planning/risk-assessment/:id/edit",name:"EditRiskAssessment",component:()=>Va(()=>import("./RiskAssessmentDetail-D0tBLF4M.js"),__vite__mapDeps([0,1])),meta:{title:"Edit Risk Assessment",breadcrumb:"Edit Assessment"},props:t=>({assessmentId:t.params.id,mode:"edit"})},{path:"audit-planning/annual-plan",name:"AnnualPlan",component:hot,meta:{title:"Annual Audit Plan",icon:"Calendar",breadcrumb:"Annual Audit Plan"}},{path:"audit-planning/programs",name:"AuditPrograms",component:xmt,meta:{title:"Audit Programs",icon:"FileText",breadcrumb:"Audit Programs"}},{path:"audit-planning/calendar",name:"AuditCalendar",component:lct,meta:{title:"Audit Calendar",icon:"CalendarDays",breadcrumb:"Audit Calendar"}},{path:"audit-execution/engagements",name:"AuditEngagements",component:lVt,meta:{title:"Audit Engagements",icon:"ClipboardList",breadcrumb:"Audit Engagements"}},{path:"audit-execution/test-library",name:"TestLibrary",component:Oon,meta:{title:"Test Library",icon:"FileText",breadcrumb:"Test Library"}},{path:"audit-execution/test-execution",name:"TestExecution",component:ain,meta:{title:"Test Execution",icon:"PlayCircle",breadcrumb:"Test Execution"}},{path:"audit-execution/working-papers",name:"WorkingPapers",component:Wcn,meta:{title:"Working Papers",icon:"FileText",breadcrumb:"Working Papers"}},{path:"audit-execution/data-analytics",name:"DataAnalytics",component:T$t,meta:{title:"Data Analytics",icon:"BarChart",breadcrumb:"Data Analytics"}},{path:"findings/list",name:"FindingsList",component:W7t,meta:{title:"Audit Findings",icon:"Search",breadcrumb:"Audit Findings"}},{path:"findings/corrective-actions",name:"CorrectiveActions",component:xTt,meta:{title:"Corrective Actions",icon:"CheckCircle",breadcrumb:"Corrective Actions"}},{path:"findings/follow-up",name:"FollowUpTracker",component:YFt,meta:{title:"Follow-up Tracker",icon:"Clock",breadcrumb:"Follow-up Tracker"}},{path:"data-management/import-wizard",name:"ImportData",component:du,meta:{title:"Import Data",icon:"Upload",breadcrumb:"Import Data"}},{path:"data-management/explorer",name:"BCDataExplorer",component:du,meta:{title:"BC Data Explorer",icon:"Database",breadcrumb:"BC Data Explorer"},props:{defaultTab:"bc-explorer"}},{path:"data-management/import-history",name:"ImportHistory",component:du,meta:{title:"Import History",icon:"History",breadcrumb:"Import History"},props:{defaultTab:"history"}},{path:"data-management/periods",name:"DataPeriods",component:$Pt,meta:{title:"Data Periods",icon:"CalendarDays",breadcrumb:"Data Periods"}},{path:"data-management/quality",name:"DataQuality",component:uOt,meta:{title:"Data Quality",icon:"ShieldCheck",breadcrumb:"Data Quality"}},{path:"compliance/requirements",name:"ComplianceRequirements",component:kkt,meta:{title:"Compliance Requirements",icon:"FileCheck",breadcrumb:"Compliance Requirements"}},{path:"compliance/checklist",name:"ComplianceChecklist",component:Ywt,meta:{title:"Compliance Checklist",icon:"CheckSquare",breadcrumb:"Compliance Checklist"}},{path:"compliance/tax-tracker",name:"TaxCompliance",component:gen,meta:{title:"Tax Tracker",icon:"Calculator",breadcrumb:"Tax Tracker"}},{path:"compliance/calendar",name:"RegulatoryCalendar",component:Qzt,meta:{title:"Regulatory Calendar",icon:"Calendar",breadcrumb:"Regulatory Calendar"}},{path:"reports/audit-reports",name:"AuditReports",component:dHt,meta:{title:"Audit Reports",icon:"FileBarChart",breadcrumb:"Audit Reports"}},{path:"reports/standard",name:"StandardReports",component:QH,meta:{title:"Standard Reports",icon:"Presentation",breadcrumb:"Standard Reports"}},{path:"reports/board-reports",name:"BoardReports",component:QH,meta:{title:"Board Reports",icon:"Presentation",breadcrumb:"Board Reports"}},{path:"settings/configuration",name:"Settings",component:fW,meta:{title:"Settings",icon:"Settings",breadcrumb:"Settings"}},{path:"settings/templates",name:"SettingsTemplates",component:fW,meta:{title:"Settings Templates",icon:"FileTemplate",breadcrumb:"Settings Templates"},props:{defaultTab:"reports"}},{path:"settings/users",name:"UserManagement",component:yln,meta:{title:"User Management",icon:"Users",breadcrumb:"User Management"}},{path:"engagements/:id",name:"EngagementDetail",component:()=>Va(()=>import("./EngagementDetail-D-PBhzsO.js"),[]),meta:{title:"Engagement Details",breadcrumb:"Engagement Details"},props:!0},{path:"findings/:id",name:"FindingDetail",component:()=>Va(()=>import("./FindingDetail-09yhf10x.js"),[]),meta:{title:"Finding Details",breadcrumb:"Finding Details"},props:!0},{path:"import-data/import-type/new",name:"NewImportType",component:du,meta:{title:"New Import Type",breadcrumb:"New Import Type"},props:{defaultTab:"imports",mode:"new-import-type"}},{path:"import-data/import-type/:id/edit",name:"EditImportType",component:du,meta:{title:"Edit Import Type",breadcrumb:"Edit Import Type"},props:t=>({defaultTab:"imports",mode:"edit-import-type",importTypeId:t.params.id})},{path:"import-data/import-type/:id/run",name:"RunImport",component:du,meta:{title:"Run Import",breadcrumb:"Run Import"},props:t=>({defaultTab:"imports",mode:"run-import",importTypeId:t.params.id})},{path:"import-data/history/:id",name:"ImportHistoryDetail",component:du,meta:{title:"Import History",breadcrumb:"Import History"},props:t=>({defaultTab:"history",mode:"view-history",historyId:t.params.id})},{path:"import-data/mapping/new",name:"NewFieldMapping",component:du,meta:{title:"New Field Mapping",breadcrumb:"New Field Mapping"},props:{defaultTab:"mappings",mode:"new-mapping"}},{path:"import-data/mapping/:id/edit",name:"EditFieldMapping",component:du,meta:{title:"Edit Field Mapping",breadcrumb:"Edit Field Mapping"},props:t=>({defaultTab:"mappings",mode:"edit-mapping",mappingId:t.params.id})},{path:"inventory-audit",name:"InventoryAuditDashboard",component:Ipn,meta:{title:"Inventory Audit Dashboard",icon:"Package",breadcrumb:"Inventory Audit"}},{path:"inventory-audit/settings",name:"InventoryAuditSettings",component:Vmn,meta:{title:"Inventory Audit Settings",icon:"Settings",breadcrumb:"Settings"}},{path:"inventory-audit/items",name:"InventoryItemMaster",component:O5,meta:{title:"Inventory Item Master",icon:"Package",breadcrumb:"Item Master"}},{path:"inventory-audit/items/new",name:"NewInventoryItem",component:O5,meta:{title:"New Inventory Item",breadcrumb:"New Item"},props:{mode:"new"}},{path:"inventory-audit/items/:id",name:"InventoryItemDetail",component:O5,meta:{title:"Item Details",breadcrumb:"Item Details"},props:!0},{path:"inventory-audit/plans",name:"AuditPlanList",component:kgn,meta:{title:"Audit Plans",icon:"ClipboardList",breadcrumb:"Audit Plans"}},{path:"inventory-audit/plans/new",name:"NewAuditPlan",component:pW,meta:{title:"New Audit Plan",breadcrumb:"New Plan"}},{path:"inventory-audit/plans/:id",name:"AuditPlanDetail",component:C0n,meta:{title:"Audit Plan Details",breadcrumb:"Plan Details"},props:!0},{path:"inventory-audit/plans/:id/edit",name:"EditAuditPlan",component:pW,meta:{title:"Edit Audit Plan",breadcrumb:"Edit Plan"},props:!0},{path:"inventory-audit/sessions",name:"StockTakeSessionList",component:I1n,meta:{title:"Stock Take Sessions",icon:"Clipboard",breadcrumb:"Stock Take Sessions"}},{path:"inventory-audit/sessions/new",name:"NewStockTakeSession",component:hW,meta:{title:"New Stock Take Session",breadcrumb:"New Session"}},{path:"inventory-audit/sessions/:id",name:"StockTakeSessionDetail",component:Jbn,meta:{title:"Session Details",breadcrumb:"Session Details"},props:!0},{path:"inventory-audit/sessions/:id/edit",name:"EditStockTakeSession",component:hW,meta:{title:"Edit Session",breadcrumb:"Edit Session"},props:!0},{path:"inventory-audit/variance-cases",name:"VarianceCaseList",component:cxn,meta:{title:"Variance Cases",icon:"AlertTriangle",breadcrumb:"Variance Cases"}},{path:"inventory-audit/variance-cases/new",name:"NewVarianceCase",component:mW,meta:{title:"New Variance Case",breadcrumb:"New Case"}},{path:"inventory-audit/variance-cases/:id",name:"VarianceCaseDetail",component:Own,meta:{title:"Variance Case Details",breadcrumb:"Case Details"},props:!0},{path:"inventory-audit/variance-cases/:id/edit",name:"EditVarianceCase",component:mW,meta:{title:"Edit Variance Case",breadcrumb:"Edit Case"},props:!0},{path:"inventory-audit/stock-take",name:"StockTakeList",component:Dkn,meta:{title:"Stock Take Audits",icon:"Package",breadcrumb:"Stock Take"}},{path:"inventory-audit/stock-take/new",name:"NewStockTake",component:gW,meta:{title:"New Stock Take",breadcrumb:"New Stock Take"}},{path:"inventory-audit/stock-take/:id",name:"StockTakeDetail",component:qCn,meta:{title:"Stock Take Details",breadcrumb:"Stock Take Details"},props:!0},{path:"inventory-audit/stock-take/:id/edit",name:"EditStockTake",component:gW,meta:{title:"Edit Stock Take",breadcrumb:"Edit Stock Take"},props:!0},{path:"inventory-audit/issues",name:"IssueLogList",component:jTn,meta:{title:"Stock Take Issues",icon:"AlertCircle",breadcrumb:"Issues"}},{path:"inventory-audit/issues/new",name:"NewIssueLog",component:vW,meta:{title:"Log Issue",breadcrumb:"Log Issue"}},{path:"inventory-audit/issues/:id",name:"IssueLogDetail",component:O4n,meta:{title:"Issue Details",breadcrumb:"Issue Details"},props:!0},{path:"inventory-audit/issues/:id/edit",name:"EditIssueLog",component:vW,meta:{title:"Edit Issue",breadcrumb:"Edit Issue"},props:!0},{path:"inventory-audit/scorecards",name:"ComplianceScorecardList",component:j3n,meta:{title:"Compliance Scorecards",icon:"BarChart2",breadcrumb:"Scorecards"}},{path:"inventory-audit/scorecards/new",name:"NewComplianceScorecard",component:yW,meta:{title:"New Compliance Scorecard",breadcrumb:"New Scorecard"}},{path:"inventory-audit/scorecards/:id",name:"ComplianceScorecardDetail",component:Q5n,meta:{title:"Scorecard Details",breadcrumb:"Scorecard Details"},props:!0},{path:"inventory-audit/scorecards/:id/edit",name:"EditComplianceScorecard",component:yW,meta:{title:"Edit Compliance Scorecard",breadcrumb:"Edit Scorecard"},props:!0}]},{path:"/unauthorized",name:"Unauthorized",component:zEn,meta:{requiresAuth:!1}},{path:"/:pathMatch(.*)*",name:"NotFound",component:VEn,meta:{requiresAuth:!1}}],v6=Vce({history:mce("/frontend"),routes:UEn});v6.beforeEach((t,e,n)=>le(void 0,null,function*(){const{session:r}=yield Va(()=>le(void 0,null,function*(){const{session:i}=yield Promise.resolve().then(()=>qEn);return{session:i}}),void 0);if(t.meta.requiresAuth!==!1){if(!r.isLoggedIn){window.location.href="/login";return}t.meta.permissions}t.meta.title&&(document.title=`${t.meta.title} - Internal Audit System`),n()}));v6.afterEach(()=>{window.scrollTo(0,0)});const HEn=Ie({url:"frappe.auth.get_logged_user",cache:"User"});function CD(){let e=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return e==="Guest"&&(e=null),e}const Ym=Jt({logout:Ie({url:"logout",onSuccess(){HEn.reset(),Ym.user=CD(),window.location.href="/login"}}),user:CD(),isLoggedIn:J(()=>!!Ym.user)}),qEn=Object.freeze(Object.defineProperty({__proto__:null,session:Ym,sessionUser:CD},Symbol.toStringTag,{value:"Module"})),WEn={id:"app",class:"min-h-screen bg-gray-50"},GEn={__name:"App",setup(t){return bt(()=>{console.log("Internal Audit Management System initialized")}),(e,n)=>{const r=Ji("router-view");return T(),P("div",WEn,[b(r)])}}};let iy=null;function YEn(){const t=window.location.hostname,e=window.location.protocol==="https:"?"https":"http";let n=9023;try{const a=document.querySelector("script[data-config]");a&&a.dataset.config&&(n=JSON.parse(a.dataset.config).socketio_port||9023)}catch(a){console.warn("Could not read socketio config, using default port 9023")}const i=`${e}://${t}:${n}/ukaguzi`;return console.log("Connecting to Socket.IO at:",i),iy=qw(i,{withCredentials:!0,reconnectionAttempts:5,transports:["websocket","polling"],timeout:2e4}),iy.on("connect",()=>{console.log("Socket.IO connected successfully")}),iy.on("connect_error",a=>{console.error("Socket.IO connection error:",a)}),iy.on("disconnect",a=>{console.log("Socket.IO disconnected:",a)}),iy}const bW={Button:Z,TextInput:kR,Input:En,FormControl:ge,ErrorMessage:qK,Dialog:zt,Alert:jfe,Badge:Ee},wh=FD(GEn),KEn=Sde();J0e("resourceFetcher",met);wh.use(KEn);wh.use(v6);wh.use(het);wh.use(ZJe);const XEn=YEn();wh.config.globalProperties.$socket=XEn;for(const t in bW)wh.component(t,bW[t]);wh.mount("#app");export{kK as $,ti as A,Ye as B,er as C,ur as D,ar as E,_e as F,zt as G,US as H,En as I,Gt as J,ge as K,xe as L,$n as M,Cr as N,bn as O,tt as P,ebe as Q,qye as R,vn as S,Zr as T,nt as U,ps as V,ofe as W,ht as X,Ie as Y,cu as Z,Z as _,gs as a,Tr as a0,Xr as a1,Ze as a2,Oy as a3,dDe as a4,TQ as a5,zTe as a6,JE as a7,AQ as a8,ZE as a9,QE as aa,Pi as ab,Eu as ac,ir as ad,P as b,J as c,T as d,u as e,ie as f,b as g,D as h,W as i,y as j,Ee as k,he as l,Ke as m,v1e as n,bt as o,fe as p,we as q,Q as r,Ut as s,E as t,xn as u,vt as v,Je as w,Ft as x,xR as y,Ji as z};
//# sourceMappingURL=index-DWze2alu.js.map
