var q=(o,f,k)=>new Promise((h,C)=>{var p=x=>{try{S(k.next(x))}catch(U){C(U)}},t=x=>{try{S(k.throw(x))}catch(U){C(U)}},S=x=>x.done?h(x.value):Promise.resolve(x.value).then(p,t);S((k=k.apply(o,f)).next())});import{u as Ve,a as Ce,r as L,c as Q,o as Ae,w as he,b,d as r,e as l,f as g,g as i,h as u,i as m,j as s,A as Se,_ as c,t as v,k as A,l as _,S as Ue,E as Re,C as G,I as V,m as y,n as P,p as Ie,P as N,F,q as T,X as j,s as K,H as Ee,v as Le}from"./index-BlKKK_3z.js";const Pe={class:"space-y-6"},Oe={class:"flex items-center justify-between"},De={class:"flex items-center space-x-4"},Me={class:"text-2xl font-bold text-gray-900"},qe={class:"text-gray-600 mt-1"},Ne={key:0,class:"flex items-center space-x-3"},Fe={class:"flex items-center space-x-2"},Te={key:0,class:"flex justify-center items-center py-12"},je={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ze={class:"lg:col-span-2 space-y-6"},Be={class:"bg-white rounded-lg border border-gray-200 p-6"},He={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$e={class:"md:col-span-2"},We={class:"md:col-span-2"},Qe={class:"bg-white rounded-lg border border-gray-200 p-6"},Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ke={class:"space-y-4"},Je={class:"space-y-4"},Xe={class:"mt-6 p-4 bg-gray-50 rounded-lg"},Ye={class:"flex items-center justify-between"},Ze={class:"text-right"},el={class:"text-sm text-gray-600"},ll={class:"bg-white rounded-lg border border-gray-200 p-6"},tl={class:"flex items-center justify-between mb-4"},al={class:"space-y-4"},sl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},il={class:"flex items-end space-x-2"},ol={class:"flex-1"},nl={class:"mt-4"},dl={class:"bg-white rounded-lg border border-gray-200 p-6"},rl={class:"flex items-center justify-between mb-4"},ul={class:"space-y-4"},ml={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vl={class:"md:col-span-2"},cl={class:"flex items-end"},yl={class:"bg-white rounded-lg border border-gray-200 p-6"},bl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gl={class:"md:col-span-2"},fl={class:"mt-4"},pl={class:"bg-white rounded-lg border border-gray-200 p-6"},kl={class:"flex items-center justify-between mb-4"},xl={class:"space-y-4"},_l={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},wl={class:"flex items-end"},Vl={class:"bg-white rounded-lg border border-gray-200 p-6"},Cl={class:"space-y-4"},Al={key:0,class:"flex items-center justify-end space-x-3"},hl={class:"space-y-6"},Sl={class:"bg-white rounded-lg border border-gray-200 p-6"},Ul={class:"space-y-4"},Rl={class:"flex items-center justify-between"},Il={class:"flex items-center justify-between"},El={class:"flex items-center justify-between"},Ll={class:"bg-white rounded-lg border border-gray-200 p-6"},Pl={class:"space-y-4"},Ol={class:"font-medium"},Dl={class:"font-medium"},Ml={class:"font-medium"},ql={key:0},Nl={key:0,class:"bg-white rounded-lg border border-gray-200 p-6"},Fl={class:"space-y-3"},zl={__name:"AuditUniverseDetail",props:{entityId:{type:String,default:null},mode:{type:String,default:"view",validator:o=>["view","edit","new"].includes(o)}},setup(o){const f=o,k=Ve();Ce();const h=L(!1),C=L(!1),p=L(null),t=L({auditable_entity:"",entity_type:"",department:"",location:"",description:"",process_owner:"",inherent_risk_rating:"",inherent_risk_score:1,control_environment_rating:"",control_effectiveness_score:1,residual_risk_rating:"",residual_risk_score:1,risk_factors:[],key_controls:[],audit_frequency:"",last_audit_date:"",last_audit_opinion:"",next_scheduled_audit:"",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[],notes:"",is_active:!0}),S=[{label:"Process",value:"Process"},{label:"Function",value:"Function"},{label:"Department",value:"Department"},{label:"Location",value:"Location"},{label:"System",value:"System"},{label:"Compliance Area",value:"Compliance Area"}],x=[{label:"Finance",value:"Finance"},{label:"IT",value:"IT"},{label:"Operations",value:"Operations"},{label:"HR",value:"HR"},{label:"Sales",value:"Sales"},{label:"Procurement",value:"Procurement"}],U=[{label:"Head Office",value:"Head Office"},{label:"Branch 1",value:"Branch 1"},{label:"Branch 2",value:"Branch 2"},{label:"Warehouse",value:"Warehouse"},{label:"All Locations",value:"All"}],J=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],X=[{label:"Strong",value:"Strong"},{label:"Adequate",value:"Adequate"},{label:"Weak",value:"Weak"},{label:"Not Assessed",value:"Not Assessed"}],Y=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"Strategic",value:"Strategic"},{label:"IT",value:"IT"},{label:"Reputational",value:"Reputational"}],Z=[{label:"Rare",value:"Rare"},{label:"Unlikely",value:"Unlikely"},{label:"Possible",value:"Possible"},{label:"Likely",value:"Likely"},{label:"Almost Certain",value:"Almost Certain"}],ee=[{label:"Insignificant",value:"Insignificant"},{label:"Minor",value:"Minor"},{label:"Moderate",value:"Moderate"},{label:"Major",value:"Major"},{label:"Catastrophic",value:"Catastrophic"}],le=[{label:"Preventive",value:"Preventive"},{label:"Detective",value:"Detective"},{label:"Corrective",value:"Corrective"}],te=[{label:"Continuous",value:"Continuous"},{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Annually",value:"Annually"}],ae=[{label:"Effective",value:"Effective"},{label:"Partially Effective",value:"Partially Effective"},{label:"Ineffective",value:"Ineffective"},{label:"Not Tested",value:"Not Tested"}],se=[{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"Bi-Annual",value:"Bi-Annual"},{label:"Tri-Annual",value:"Tri-Annual"},{label:"As Needed",value:"As Needed"}],ie=[{label:"Satisfactory",value:"Satisfactory"},{label:"Needs Improvement",value:"Needs Improvement"},{label:"Unsatisfactory",value:"Unsatisfactory"}],oe=[{label:"General Ledger Entries",value:"General Ledger Entries"},{label:"Item Master Data",value:"Item Master Data"},{label:"Item Ledger Entries",value:"Item Ledger Entries"},{label:"Sales Invoices",value:"Sales Invoices"},{label:"Purchase Invoices",value:"Purchase Invoices"},{label:"Customer Ledger Entries",value:"Customer Ledger Entries"},{label:"Vendor Ledger Entries",value:"Vendor Ledger Entries"},{label:"Bank Account Ledger Entries",value:"Bank Account Ledger Entries"}],ne=[{label:"Primary",value:"Primary"},{label:"Secondary",value:"Secondary"},{label:"Reference",value:"Reference"}],de=Q(()=>t.value.next_scheduled_audit?new Date(t.value.next_scheduled_audit)<new Date:!1),re=Q(()=>t.value.is_active&&t.value.auditable_entity),z=()=>{k.push("/audit-planning/universe")},O=n=>{n==="edit"?k.push(`/audit-planning/universe/${f.entityId}/edit`):k.push(`/audit-planning/universe/${f.entityId}`)},ue=()=>q(this,null,function*(){if(f.mode!=="new"){h.value=!0;try{yield new Promise(n=>setTimeout(n,1e3)),p.value={universe_id:"AU-001",auditable_entity:"Accounts Payable",entity_type:"Process",department:"Finance",location:"Head Office",description:"Processing of vendor payments and expense reimbursements",process_owner:"John Doe",inherent_risk_rating:"High",inherent_risk_score:15,control_environment_rating:"Adequate",control_effectiveness_score:3,residual_risk_rating:"Medium",residual_risk_score:5,risk_factors:[{risk_category:"Financial",risk_description:"Payment errors leading to overpayments",likelihood:"Possible",impact:"Moderate",risk_score:12}],key_controls:[{control_description:"Three-way matching of PO, receipt, and invoice",control_type:"Preventive",control_frequency:"Continuous",control_effectiveness:"Effective"}],audit_frequency:"Quarterly",last_audit_date:"2023-10-15",last_audit_opinion:"Satisfactory",next_scheduled_audit:"2024-01-15",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[{data_type:"Purchase Invoices",relevance:"Primary"},{data_type:"Vendor Ledger Entries",relevance:"Secondary"}],notes:"Regular monitoring required due to high transaction volume",is_active:!0},Object.assign(t.value,p.value)}catch(n){console.error("Error loading entity:",n)}finally{h.value=!1}}}),B=()=>{const n={Critical:25,High:15,Medium:8,Low:3};t.value.inherent_risk_score=n[t.value.inherent_risk_rating]||1;const e={Strong:5,Adequate:3,Weak:1,"Not Assessed":1};t.value.control_effectiveness_score=e[t.value.control_environment_rating]||1,D()},D=()=>{const n=Math.round(t.value.inherent_risk_score/t.value.control_effectiveness_score);t.value.residual_risk_score=n,n>=20?t.value.residual_risk_rating="Critical":n>=12?t.value.residual_risk_rating="High":n>=6?t.value.residual_risk_rating="Medium":t.value.residual_risk_rating="Low"},H=n=>{const e={Rare:1,Unlikely:2,Possible:3,Likely:4,"Almost Certain":5},R={Insignificant:1,Minor:2,Moderate:3,Major:4,Catastrophic:5},I=e[n.likelihood]||1,E=R[n.impact]||1;n.risk_score=I*E},me=()=>{t.value.risk_factors.push({risk_category:"",risk_description:"",likelihood:"",impact:"",risk_score:1})},ve=n=>{t.value.risk_factors.splice(n,1)},ce=()=>{t.value.key_controls.push({control_description:"",control_type:"",control_frequency:"",control_effectiveness:""})},ye=n=>{t.value.key_controls.splice(n,1)},be=()=>{t.value.bc_data_sources.push({data_type:"",relevance:""})},ge=n=>{t.value.bc_data_sources.splice(n,1)},M=n=>({Critical:"danger",High:"danger",Medium:"warning",Low:"success"})[n]||"secondary",fe=n=>({Strong:"success",Adequate:"warning",Weak:"danger","Not Assessed":"secondary"})[n]||"secondary",pe=n=>({Critical:"text-red-600",High:"text-red-600",Medium:"text-yellow-600",Low:"text-green-600"})[n]||"text-gray-600",$=n=>new Date(n).toLocaleDateString(),ke=()=>q(this,null,function*(){C.value=!0;try{yield new Promise(n=>setTimeout(n,1e3)),f.mode==="new"?(console.log("Creating new entity:",t.value),k.push("/audit-planning/universe")):(console.log("Updating entity:",t.value),k.push(`/audit-planning/universe/${f.entityId}`))}catch(n){console.error("Error saving entity:",n)}finally{C.value=!1}}),xe=()=>{f.mode==="new"?z():O("view")},W=()=>{console.log("Schedule audit for entity:",f.entityId)},_e=()=>{console.log("View audit history for entity:",f.entityId)},we=()=>{console.log("Generate report for entity:",f.entityId)};return Ae(()=>{ue()}),he(()=>f.mode,n=>{n==="edit"&&p.value&&Object.assign(t.value,p.value)}),(n,e)=>{var R,I,E;return r(),b("div",Pe,[l("div",Oe,[l("div",De,[i(s(c),{variant:"ghost",onClick:z},{default:u(()=>[i(s(Se),{class:"h-4 w-4 mr-2"}),e[20]||(e[20]=m(" Back to Audit Universe ",-1))]),_:1}),l("div",null,[l("h1",Me,v(o.mode==="new"?"New Audit Universe Entity":((R=p.value)==null?void 0:R.auditable_entity)||"Audit Universe Entity"),1),l("p",qe,v(o.mode==="view"?"View entity details and risk assessment":o.mode==="edit"?"Edit entity information":"Create new auditable entity"),1)])]),o.mode!=="new"?(r(),b("div",Ne,[i(s(A),{variant:M((I=p.value)==null?void 0:I.residual_risk_rating)},{default:u(()=>{var a;return[m(v((a=p.value)==null?void 0:a.residual_risk_rating)+" Risk ",1)]}),_:1},8,["variant"]),i(s(A),{variant:(E=p.value)!=null&&E.is_active?"success":"secondary"},{default:u(()=>{var a;return[m(v((a=p.value)!=null&&a.is_active?"Active":"Inactive"),1)]}),_:1},8,["variant"]),l("div",Fe,[o.mode==="view"?(r(),_(s(c),{key:0,variant:"outline",onClick:e[0]||(e[0]=a=>O("edit"))},{default:u(()=>[i(s(Ue),{class:"h-4 w-4 mr-2"}),e[21]||(e[21]=m(" Edit ",-1))]),_:1})):g("",!0),o.mode==="edit"?(r(),_(s(c),{key:1,variant:"outline",onClick:e[1]||(e[1]=a=>O("view"))},{default:u(()=>[i(s(Re),{class:"h-4 w-4 mr-2"}),e[22]||(e[22]=m(" View ",-1))]),_:1})):g("",!0),o.mode==="view"&&re.value?(r(),_(s(c),{key:2,variant:"outline",onClick:W},{default:u(()=>[i(s(G),{class:"h-4 w-4 mr-2"}),e[23]||(e[23]=m(" Schedule Audit ",-1))]),_:1})):g("",!0)])])):g("",!0)]),h.value?(r(),b("div",Te,[...e[24]||(e[24]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),l("span",{class:"ml-3 text-gray-600"},"Loading...",-1)])])):(r(),b("div",je,[l("div",ze,[l("div",Be,[e[31]||(e[31]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),l("div",He,[l("div",$e,[e[25]||(e[25]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Auditable Entity *",-1)),i(s(V),{modelValue:t.value.auditable_entity,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.auditable_entity=a),readonly:o.mode==="view",placeholder:"e.g., Accounts Payable, IT Security Controls",class:"w-full"},null,8,["modelValue","readonly"])]),l("div",null,[e[26]||(e[26]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Entity Type *",-1)),i(s(y),{modelValue:t.value.entity_type,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.entity_type=a),options:S,disabled:o.mode==="view",placeholder:"Select entity type"},null,8,["modelValue","disabled"])]),l("div",null,[e[27]||(e[27]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Department",-1)),i(s(y),{modelValue:t.value.department,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.department=a),options:x,disabled:o.mode==="view",placeholder:"Select department"},null,8,["modelValue","disabled"])]),l("div",null,[e[28]||(e[28]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),i(s(y),{modelValue:t.value.location,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.location=a),options:U,disabled:o.mode==="view",placeholder:"Select location"},null,8,["modelValue","disabled"])]),l("div",null,[e[29]||(e[29]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Process Owner",-1)),i(s(V),{modelValue:t.value.process_owner,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.process_owner=a),readonly:o.mode==="view",placeholder:"Name of responsible person",class:"w-full"},null,8,["modelValue","readonly"])]),l("div",We,[e[30]||(e[30]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),i(s(P),{modelValue:t.value.description,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.description=a),readonly:o.mode==="view",placeholder:"Detailed description of the auditable entity",rows:"3",class:"w-full"},null,8,["modelValue","readonly"])])])]),l("div",Qe,[e[39]||(e[39]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Assessment",-1)),l("div",Ge,[l("div",Ke,[e[34]||(e[34]=l("h4",{class:"font-medium text-gray-900"},"Inherent Risk",-1)),l("div",null,[e[32]||(e[32]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Risk Rating",-1)),i(s(y),{modelValue:t.value.inherent_risk_rating,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.inherent_risk_rating=a),options:J,disabled:o.mode==="view",onChange:B},null,8,["modelValue","disabled"])]),l("div",null,[e[33]||(e[33]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Risk Score",-1)),i(s(V),{modelValue:t.value.inherent_risk_score,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.inherent_risk_score=a),modelModifiers:{number:!0},readonly:o.mode==="view",type:"number",min:"1",max:"25",onInput:D},null,8,["modelValue","readonly"])])]),l("div",Je,[e[37]||(e[37]=l("h4",{class:"font-medium text-gray-900"},"Control Environment",-1)),l("div",null,[e[35]||(e[35]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Control Rating",-1)),i(s(y),{modelValue:t.value.control_environment_rating,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.control_environment_rating=a),options:X,disabled:o.mode==="view",onChange:B},null,8,["modelValue","disabled"])]),l("div",null,[e[36]||(e[36]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Effectiveness Score",-1)),i(s(V),{modelValue:t.value.control_effectiveness_score,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.control_effectiveness_score=a),modelModifiers:{number:!0},readonly:o.mode==="view",type:"number",min:"1",max:"5",onInput:D},null,8,["modelValue","readonly"])])])]),l("div",Xe,[l("div",Ye,[e[38]||(e[38]=l("div",null,[l("h4",{class:"font-medium text-gray-900"},"Residual Risk"),l("p",{class:"text-sm text-gray-600"},"Calculated based on inherent risk and control effectiveness")],-1)),l("div",Ze,[l("div",{class:Ie(["text-2xl font-bold",pe(t.value.residual_risk_rating)])},v(t.value.residual_risk_rating),3),l("div",el,"Score: "+v(t.value.residual_risk_score),1)])])])]),l("div",ll,[l("div",tl,[e[41]||(e[41]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Risk Factors",-1)),o.mode!=="view"?(r(),_(s(c),{key:0,variant:"outline",size:"sm",onClick:me},{default:u(()=>[i(s(N),{class:"h-4 w-4 mr-2"}),e[40]||(e[40]=m(" Add Factor ",-1))]),_:1})):g("",!0)]),l("div",al,[(r(!0),b(F,null,T(t.value.risk_factors,(a,w)=>(r(),b("div",{key:w,class:"p-4 border border-gray-200 rounded-lg"},[l("div",sl,[l("div",null,[e[42]||(e[42]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),i(s(y),{modelValue:a.risk_category,"onUpdate:modelValue":d=>a.risk_category=d,options:Y,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[43]||(e[43]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Likelihood",-1)),i(s(y),{modelValue:a.likelihood,"onUpdate:modelValue":d=>a.likelihood=d,options:Z,disabled:o.mode==="view",size:"sm",onChange:d=>H(a)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),l("div",null,[e[44]||(e[44]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Impact",-1)),i(s(y),{modelValue:a.impact,"onUpdate:modelValue":d=>a.impact=d,options:ee,disabled:o.mode==="view",size:"sm",onChange:d=>H(a)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),l("div",il,[l("div",ol,[e[45]||(e[45]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Score",-1)),i(s(V),{modelValue:a.risk_score,"onUpdate:modelValue":d=>a.risk_score=d,modelModifiers:{number:!0},readonly:"",size:"sm",class:"text-center font-medium"},null,8,["modelValue","onUpdate:modelValue"])]),o.mode!=="view"?(r(),_(s(c),{key:0,variant:"ghost",size:"sm",onClick:d=>ve(w),class:"text-red-600 hover:text-red-700"},{default:u(()=>[i(s(j),{class:"h-4 w-4"})]),_:1},8,["onClick"])):g("",!0)])]),l("div",nl,[e[46]||(e[46]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),i(s(P),{modelValue:a.risk_description,"onUpdate:modelValue":d=>a.risk_description=d,readonly:o.mode==="view",placeholder:"Describe the risk factor",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue","readonly"])])]))),128))])]),l("div",dl,[l("div",rl,[e[48]||(e[48]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Key Controls",-1)),o.mode!=="view"?(r(),_(s(c),{key:0,variant:"outline",size:"sm",onClick:ce},{default:u(()=>[i(s(N),{class:"h-4 w-4 mr-2"}),e[47]||(e[47]=m(" Add Control ",-1))]),_:1})):g("",!0)]),l("div",ul,[(r(!0),b(F,null,T(t.value.key_controls,(a,w)=>(r(),b("div",{key:w,class:"p-4 border border-gray-200 rounded-lg"},[l("div",ml,[l("div",vl,[e[49]||(e[49]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Control Description",-1)),i(s(P),{modelValue:a.control_description,"onUpdate:modelValue":d=>a.control_description=d,readonly:o.mode==="view",placeholder:"Describe the control activity",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue","readonly"])]),l("div",null,[e[50]||(e[50]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Control Type",-1)),i(s(y),{modelValue:a.control_type,"onUpdate:modelValue":d=>a.control_type=d,options:le,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[51]||(e[51]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Frequency",-1)),i(s(y),{modelValue:a.control_frequency,"onUpdate:modelValue":d=>a.control_frequency=d,options:te,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[52]||(e[52]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Effectiveness",-1)),i(s(y),{modelValue:a.control_effectiveness,"onUpdate:modelValue":d=>a.control_effectiveness=d,options:ae,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",cl,[o.mode!=="view"?(r(),_(s(c),{key:0,variant:"ghost",size:"sm",onClick:d=>ye(w),class:"text-red-600 hover:text-red-700"},{default:u(()=>[i(s(j),{class:"h-4 w-4"})]),_:1},8,["onClick"])):g("",!0)])])]))),128))])]),l("div",yl,[e[58]||(e[58]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Audit Information",-1)),l("div",bl,[l("div",null,[e[53]||(e[53]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Frequency",-1)),i(s(y),{modelValue:t.value.audit_frequency,"onUpdate:modelValue":e[12]||(e[12]=a=>t.value.audit_frequency=a),options:se,disabled:o.mode==="view"},null,8,["modelValue","disabled"])]),l("div",null,[e[54]||(e[54]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Date",-1)),i(s(V),{modelValue:t.value.last_audit_date,"onUpdate:modelValue":e[13]||(e[13]=a=>t.value.last_audit_date=a),readonly:o.mode==="view",type:"date"},null,8,["modelValue","readonly"])]),l("div",null,[e[55]||(e[55]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Opinion",-1)),i(s(y),{modelValue:t.value.last_audit_opinion,"onUpdate:modelValue":e[14]||(e[14]=a=>t.value.last_audit_opinion=a),options:ie,disabled:o.mode==="view"},null,8,["modelValue","disabled"])]),l("div",null,[e[56]||(e[56]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Next Scheduled Audit",-1)),i(s(V),{modelValue:t.value.next_scheduled_audit,"onUpdate:modelValue":e[15]||(e[15]=a=>t.value.next_scheduled_audit=a),readonly:o.mode==="view",type:"date"},null,8,["modelValue","readonly"])]),l("div",gl,[e[57]||(e[57]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Regulatory Reference",-1)),i(s(V),{modelValue:t.value.regulatory_reference,"onUpdate:modelValue":e[16]||(e[16]=a=>t.value.regulatory_reference=a),readonly:o.mode==="view",placeholder:"e.g., CBK Prudential Guidelines"},null,8,["modelValue","readonly"])])]),l("div",fl,[i(s(K),{modelValue:t.value.mandatory_audit,"onUpdate:modelValue":e[17]||(e[17]=a=>t.value.mandatory_audit=a),disabled:o.mode==="view",label:"Mandatory Regulatory Audit"},null,8,["modelValue","disabled"])])]),l("div",pl,[l("div",kl,[e[60]||(e[60]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Business Central Data Sources",-1)),o.mode!=="view"?(r(),_(s(c),{key:0,variant:"outline",size:"sm",onClick:be},{default:u(()=>[i(s(N),{class:"h-4 w-4 mr-2"}),e[59]||(e[59]=m(" Add Data Source ",-1))]),_:1})):g("",!0)]),l("div",xl,[(r(!0),b(F,null,T(t.value.bc_data_sources,(a,w)=>(r(),b("div",{key:w,class:"p-4 border border-gray-200 rounded-lg"},[l("div",_l,[l("div",null,[e[61]||(e[61]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Data Type",-1)),i(s(y),{modelValue:a.data_type,"onUpdate:modelValue":d=>a.data_type=d,options:oe,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",null,[e[62]||(e[62]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Relevance",-1)),i(s(y),{modelValue:a.relevance,"onUpdate:modelValue":d=>a.relevance=d,options:ne,disabled:o.mode==="view",size:"sm"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),l("div",wl,[o.mode!=="view"?(r(),_(s(c),{key:0,variant:"ghost",size:"sm",onClick:d=>ge(w),class:"text-red-600 hover:text-red-700"},{default:u(()=>[i(s(j),{class:"h-4 w-4"})]),_:1},8,["onClick"])):g("",!0)])])]))),128))])]),l("div",Vl,[e[64]||(e[64]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Additional Information",-1)),l("div",Cl,[l("div",null,[e[63]||(e[63]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),i(s(P),{modelValue:t.value.notes,"onUpdate:modelValue":e[18]||(e[18]=a=>t.value.notes=a),readonly:o.mode==="view",placeholder:"Additional notes and comments",rows:"3"},null,8,["modelValue","readonly"])]),l("div",null,[i(s(K),{modelValue:t.value.is_active,"onUpdate:modelValue":e[19]||(e[19]=a=>t.value.is_active=a),disabled:o.mode==="view",label:"Entity is Active"},null,8,["modelValue","disabled"])])])]),o.mode!=="view"?(r(),b("div",Al,[i(s(c),{variant:"outline",onClick:xe},{default:u(()=>[...e[65]||(e[65]=[m(" Cancel ",-1)])]),_:1}),i(s(c),{onClick:ke,loading:C.value},{default:u(()=>[m(v(o.mode==="new"?"Create Entity":"Save Changes"),1)]),_:1},8,["loading"])])):g("",!0)]),l("div",hl,[l("div",Sl,[e[69]||(e[69]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Summary",-1)),l("div",Ul,[l("div",Rl,[e[66]||(e[66]=l("span",{class:"text-sm text-gray-600"},"Inherent Risk:",-1)),i(s(A),{variant:M(t.value.inherent_risk_rating)},{default:u(()=>[m(v(t.value.inherent_risk_rating)+" ("+v(t.value.inherent_risk_score)+") ",1)]),_:1},8,["variant"])]),l("div",Il,[e[67]||(e[67]=l("span",{class:"text-sm text-gray-600"},"Control Effectiveness:",-1)),i(s(A),{variant:fe(t.value.control_environment_rating)},{default:u(()=>[m(v(t.value.control_environment_rating)+" ("+v(t.value.control_effectiveness_score)+") ",1)]),_:1},8,["variant"])]),l("div",El,[e[68]||(e[68]=l("span",{class:"text-sm text-gray-600"},"Residual Risk:",-1)),i(s(A),{variant:M(t.value.residual_risk_rating)},{default:u(()=>[m(v(t.value.residual_risk_rating)+" ("+v(t.value.residual_risk_score)+") ",1)]),_:1},8,["variant"])])])]),l("div",Ll,[e[74]||(e[74]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Audit Schedule",-1)),l("div",Pl,[l("div",null,[e[70]||(e[70]=l("span",{class:"text-sm text-gray-600"},"Frequency:",-1)),l("p",Ol,v(t.value.audit_frequency||"Not set"),1)]),l("div",null,[e[71]||(e[71]=l("span",{class:"text-sm text-gray-600"},"Last Audit:",-1)),l("p",Dl,v(t.value.last_audit_date?$(t.value.last_audit_date):"Never"),1)]),l("div",null,[e[72]||(e[72]=l("span",{class:"text-sm text-gray-600"},"Next Scheduled:",-1)),l("p",Ml,v(t.value.next_scheduled_audit?$(t.value.next_scheduled_audit):"Not scheduled"),1)]),de.value?(r(),b("div",ql,[i(s(A),{variant:"danger"},{default:u(()=>[...e[73]||(e[73]=[m("Overdue",-1)])]),_:1})])):g("",!0)])]),o.mode==="view"?(r(),b("div",Nl,[e[78]||(e[78]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),l("div",Fl,[i(s(c),{variant:"outline",class:"w-full justify-start",onClick:W},{default:u(()=>[i(s(G),{class:"h-4 w-4 mr-2"}),e[75]||(e[75]=m(" Schedule Audit ",-1))]),_:1}),i(s(c),{variant:"outline",class:"w-full justify-start",onClick:_e},{default:u(()=>[i(s(Ee),{class:"h-4 w-4 mr-2"}),e[76]||(e[76]=m(" View Audit History ",-1))]),_:1}),i(s(c),{variant:"outline",class:"w-full justify-start",onClick:we},{default:u(()=>[i(s(Le),{class:"h-4 w-4 mr-2"}),e[77]||(e[77]=m(" Generate Report ",-1))]),_:1})])])):g("",!0)])]))])}}};export{zl as default};
//# sourceMappingURL=AuditUniverseDetail-DkUnoLfH.js.map
