const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RiskAssessmentDetail-D1a9iKZ8.js","assets/RiskAssessmentDetail-Cxq2ngei.css"])))=>i.map(i=>d[i]);
var gle=Object.defineProperty,vle=Object.defineProperties;var yle=Object.getOwnPropertyDescriptors;var Yb=Object.getOwnPropertySymbols;var IO=Object.prototype.hasOwnProperty,OO=Object.prototype.propertyIsEnumerable;var IA=(t,e,n)=>e in t?gle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ge=(t,e)=>{for(var n in e||(e={}))IO.call(e,n)&&IA(t,n,e[n]);if(Yb)for(var n of Yb(e))OO.call(e,n)&&IA(t,n,e[n]);return t},ze=(t,e)=>vle(t,yle(e));var $s=(t,e)=>{var n={};for(var r in t)IO.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Yb)for(var r of Yb(t))e.indexOf(r)<0&&OO.call(t,r)&&(n[r]=t[r]);return n};var ft=(t,e,n)=>IA(t,typeof e!="symbol"?e+"":e,n);var ue=(t,e,n)=>new Promise((r,s)=>{var i=l=>{try{o(n.next(l))}catch(d){s(d)}},a=l=>{try{o(n.throw(l))}catch(d){s(d)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,a);o((n=n.apply(t,e)).next())});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function DD(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Dn={},Dm=[],Tl=()=>{},$W=()=>!1,CS=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),RD=t=>t.startsWith("onUpdate:"),fs=Object.assign,PD=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ble=Object.prototype.hasOwnProperty,Bn=(t,e)=>ble.call(t,e),Lt=Array.isArray,Rm=t=>Y1(t)==="[object Map]",Mg=t=>Y1(t)==="[object Set]",LO=t=>Y1(t)==="[object Date]",Zt=t=>typeof t=="function",Tr=t=>typeof t=="string",Ro=t=>typeof t=="symbol",Zn=t=>t!==null&&typeof t=="object",MW=t=>(Zn(t)||Zt(t))&&Zt(t.then)&&Zt(t.catch),EW=Object.prototype.toString,Y1=t=>EW.call(t),xle=t=>Y1(t).slice(8,-1),DW=t=>Y1(t)==="[object Object]",AS=t=>Tr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ry=DD(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),TS=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},_le=/-\w/g,Si=TS(t=>t.replace(_le,e=>e.slice(1).toUpperCase())),wle=/\B([A-Z])/g,fd=TS(t=>t.replace(wle,"-$1").toLowerCase()),$S=TS(t=>t.charAt(0).toUpperCase()+t.slice(1)),Py=TS(t=>t?`on${$S(t)}`:""),Bi=(t,e)=>!Object.is(t,e),sw=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},RW=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},MS=t=>{const e=parseFloat(t);return isNaN(e)?t:e},kle=t=>{const e=Tr(t)?Number(t):NaN;return isNaN(e)?t:e};let VO;const ES=()=>VO||(VO=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function rt(t){if(Lt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Tr(r)?Tle(r):rt(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Tr(t)||Zn(t))return t}const Sle=/;(?![^(]*\))/g,Cle=/:([^]+)/,Ale=/\/\*[^]*?\*\//g;function Tle(t){const e={};return t.replace(Ale,"").split(Sle).forEach(n=>{if(n){const r=n.split(Cle);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function pe(t){let e="";if(Tr(t))e=t;else if(Lt(t))for(let n=0;n<t.length;n++){const r=pe(t[n]);r&&(e+=r+" ")}else if(Zn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Pn(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Tr(e)&&(t.class=pe(e)),n&&(t.style=rt(n)),t}const $le="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mle=DD($le);function PW(t){return!!t||t===""}function Ele(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=jp(t[r],e[r]);return n}function jp(t,e){if(t===e)return!0;let n=LO(t),r=LO(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Ro(t),r=Ro(e),n||r)return t===e;if(n=Lt(t),r=Lt(e),n||r)return n&&r?Ele(t,e):!1;if(n=Zn(t),r=Zn(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!jp(t[a],e[a]))return!1}}return String(t)===String(e)}function ID(t,e){return t.findIndex(n=>jp(n,e))}const IW=t=>!!(t&&t.__v_isRef===!0),$=t=>Tr(t)?t:t==null?"":Lt(t)||Zn(t)&&(t.toString===EW||!Zt(t.toString))?IW(t)?$(t.value):JSON.stringify(t,OW,2):String(t),OW=(t,e)=>IW(e)?OW(t,e.value):Rm(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[OA(r,i)+" =>"]=s,n),{})}:Mg(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>OA(n))}:Ro(e)?OA(e):Zn(e)&&!Lt(e)&&!DW(e)?String(e):e,OA=(t,e="")=>{var n;return Ro(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ys;class LW{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ys,!e&&Ys&&(this.index=(Ys.scopes||(Ys.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ys;try{return Ys=this,e()}finally{Ys=n}}}on(){++this._on===1&&(this.prevScope=Ys,Ys=this)}off(){this._on>0&&--this._on===0&&(Ys=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function DS(t){return new LW(t)}function K1(){return Ys}function X1(t,e=!1){Ys&&Ys.cleanups.push(t)}let dr;const LA=new WeakSet;class VW{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ys&&Ys.active&&Ys.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,LA.has(this)&&(LA.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jW(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,NO(this),FW(this);const e=dr,n=$o;dr=this,$o=!0;try{return this.fn()}finally{BW(this),dr=e,$o=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)VD(e);this.deps=this.depsTail=void 0,NO(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?LA.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){z5(this)&&this.run()}get dirty(){return z5(this)}}let NW=0,Iy,Oy;function jW(t,e=!1){if(t.flags|=8,e){t.next=Oy,Oy=t;return}t.next=Iy,Iy=t}function OD(){NW++}function LD(){if(--NW>0)return;if(Oy){let e=Oy;for(Oy=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Iy;){let e=Iy;for(Iy=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function FW(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function BW(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),VD(r),Dle(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function z5(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zW(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function zW(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===T0)||(t.globalVersion=T0,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!z5(t))))return;t.flags|=2;const e=t.dep,n=dr,r=$o;dr=t,$o=!0;try{FW(t);const s=t.fn(t._value);(e.version===0||Bi(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{dr=n,$o=r,BW(t),t.flags&=-3}}function VD(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)VD(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Dle(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let $o=!0;const UW=[];function Ku(){UW.push($o),$o=!1}function Xu(){const t=UW.pop();$o=t===void 0?!0:t}function NO(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=dr;dr=void 0;try{e()}finally{dr=n}}}let T0=0,Rle=class{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class RS{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!dr||!$o||dr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==dr)n=this.activeLink=new Rle(dr,this),dr.deps?(n.prevDep=dr.depsTail,dr.depsTail.nextDep=n,dr.depsTail=n):dr.deps=dr.depsTail=n,HW(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=dr.depsTail,n.nextDep=void 0,dr.depsTail.nextDep=n,dr.depsTail=n,dr.deps===n&&(dr.deps=r)}return n}trigger(e){this.version++,T0++,this.notify(e)}notify(e){OD();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{LD()}}}function HW(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)HW(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const t2=new WeakMap,pp=Symbol(""),U5=Symbol(""),$0=Symbol("");function Zs(t,e,n){if($o&&dr){let r=t2.get(t);r||t2.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new RS),s.map=r,s.key=n),s.track()}}function Mu(t,e,n,r,s,i){const a=t2.get(t);if(!a){T0++;return}const o=l=>{l&&l.trigger()};if(OD(),e==="clear")a.forEach(o);else{const l=Lt(t),d=l&&AS(n);if(l&&n==="length"){const c=Number(r);a.forEach((f,p)=>{(p==="length"||p===$0||!Ro(p)&&p>=c)&&o(f)})}else switch((n!==void 0||a.has(void 0))&&o(a.get(n)),d&&o(a.get($0)),e){case"add":l?d&&o(a.get("length")):(o(a.get(pp)),Rm(t)&&o(a.get(U5)));break;case"delete":l||(o(a.get(pp)),Rm(t)&&o(a.get(U5)));break;case"set":Rm(t)&&o(a.get(pp));break}}LD()}function Ple(t,e){const n=t2.get(t);return n&&n.get(e)}function Th(t){const e=un(t);return e===t?e:(Zs(e,"iterate",$0),pa(t)?e:e.map(Po))}function PS(t){return Zs(t=un(t),"iterate",$0),t}function Bd(t,e){return Qu(t)?Bu(t)?Qm(Po(e)):Qm(e):Po(e)}const Ile={__proto__:null,[Symbol.iterator](){return VA(this,Symbol.iterator,t=>Bd(this,t))},concat(...t){return Th(this).concat(...t.map(e=>Lt(e)?Th(e):e))},entries(){return VA(this,"entries",t=>(t[1]=Bd(this,t[1]),t))},every(t,e){return su(this,"every",t,e,void 0,arguments)},filter(t,e){return su(this,"filter",t,e,n=>n.map(r=>Bd(this,r)),arguments)},find(t,e){return su(this,"find",t,e,n=>Bd(this,n),arguments)},findIndex(t,e){return su(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return su(this,"findLast",t,e,n=>Bd(this,n),arguments)},findLastIndex(t,e){return su(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return su(this,"forEach",t,e,void 0,arguments)},includes(...t){return NA(this,"includes",t)},indexOf(...t){return NA(this,"indexOf",t)},join(t){return Th(this).join(t)},lastIndexOf(...t){return NA(this,"lastIndexOf",t)},map(t,e){return su(this,"map",t,e,void 0,arguments)},pop(){return rv(this,"pop")},push(...t){return rv(this,"push",t)},reduce(t,...e){return jO(this,"reduce",t,e)},reduceRight(t,...e){return jO(this,"reduceRight",t,e)},shift(){return rv(this,"shift")},some(t,e){return su(this,"some",t,e,void 0,arguments)},splice(...t){return rv(this,"splice",t)},toReversed(){return Th(this).toReversed()},toSorted(t){return Th(this).toSorted(t)},toSpliced(...t){return Th(this).toSpliced(...t)},unshift(...t){return rv(this,"unshift",t)},values(){return VA(this,"values",t=>Bd(this,t))}};function VA(t,e,n){const r=PS(t),s=r[e]();return r!==t&&!pa(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Ole=Array.prototype;function su(t,e,n,r,s,i){const a=PS(t),o=a!==t&&!pa(t),l=a[e];if(l!==Ole[e]){const f=l.apply(t,i);return o?Po(f):f}let d=n;a!==t&&(o?d=function(f,p){return n.call(this,Bd(t,f),p,t)}:n.length>2&&(d=function(f,p){return n.call(this,f,p,t)}));const c=l.call(a,d,r);return o&&s?s(c):c}function jO(t,e,n,r){const s=PS(t);let i=n;return s!==t&&(pa(t)?n.length>3&&(i=function(a,o,l){return n.call(this,a,o,l,t)}):i=function(a,o,l){return n.call(this,a,Bd(t,o),l,t)}),s[e](i,...r)}function NA(t,e,n){const r=un(t);Zs(r,"iterate",$0);const s=r[e](...n);return(s===-1||s===!1)&&LS(n[0])?(n[0]=un(n[0]),r[e](...n)):s}function rv(t,e,n=[]){Ku(),OD();const r=un(t)[e].apply(t,n);return LD(),Xu(),r}const Lle=DD("__proto__,__v_isRef,__isVue"),qW=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ro));function Vle(t){Ro(t)||(t=String(t));const e=un(this);return Zs(e,"has",t),e.hasOwnProperty(t)}class WW{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?ZW:QW:i?XW:KW).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Lt(e);if(!s){let l;if(a&&(l=Ile[n]))return l;if(n==="hasOwnProperty")return Vle}const o=Reflect.get(e,n,zn(e)?e:r);if((Ro(n)?qW.has(n):Lle(n))||(s||Zs(e,"get",n),i))return o;if(zn(o)){const l=a&&AS(n)?o:o.value;return s&&Zn(l)?Ka(l):l}return Zn(o)?s?Ka(o):Jt(o):o}}class GW extends WW{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const a=Lt(e)&&AS(n);if(!this._isShallow){const d=Qu(i);if(!pa(r)&&!Qu(r)&&(i=un(i),r=un(r)),!a&&zn(i)&&!zn(r))return d||(i.value=r),!0}const o=a?Number(n)<e.length:Bn(e,n),l=Reflect.set(e,n,r,zn(e)?e:s);return e===un(s)&&(o?Bi(r,i)&&Mu(e,"set",n,r):Mu(e,"add",n,r)),l}deleteProperty(e,n){const r=Bn(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Mu(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Ro(n)||!qW.has(n))&&Zs(e,"has",n),r}ownKeys(e){return Zs(e,"iterate",Lt(e)?"length":pp),Reflect.ownKeys(e)}}class YW extends WW{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Nle=new GW,jle=new YW,Fle=new GW(!0),Ble=new YW(!0),H5=t=>t,Kb=t=>Reflect.getPrototypeOf(t);function zle(t,e,n){return function(...r){const s=this.__v_raw,i=un(s),a=Rm(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,d=s[t](...r),c=n?H5:e?Qm:Po;return!e&&Zs(i,"iterate",l?U5:pp),{next(){const{value:f,done:p}=d.next();return p?{value:f,done:p}:{value:o?[c(f[0]),c(f[1])]:c(f),done:p}},[Symbol.iterator](){return this}}}}function Xb(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ule(t,e){const n={get(s){const i=this.__v_raw,a=un(i),o=un(s);t||(Bi(s,o)&&Zs(a,"get",s),Zs(a,"get",o));const{has:l}=Kb(a),d=e?H5:t?Qm:Po;if(l.call(a,s))return d(i.get(s));if(l.call(a,o))return d(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Zs(un(s),"iterate",pp),s.size},has(s){const i=this.__v_raw,a=un(i),o=un(s);return t||(Bi(s,o)&&Zs(a,"has",s),Zs(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=un(o),d=e?H5:t?Qm:Po;return!t&&Zs(l,"iterate",pp),o.forEach((c,f)=>s.call(i,d(c),d(f),a))}};return fs(n,t?{add:Xb("add"),set:Xb("set"),delete:Xb("delete"),clear:Xb("clear")}:{add(s){!e&&!pa(s)&&!Qu(s)&&(s=un(s));const i=un(this);return Kb(i).has.call(i,s)||(i.add(s),Mu(i,"add",s,s)),this},set(s,i){!e&&!pa(i)&&!Qu(i)&&(i=un(i));const a=un(this),{has:o,get:l}=Kb(a);let d=o.call(a,s);d||(s=un(s),d=o.call(a,s));const c=l.call(a,s);return a.set(s,i),d?Bi(i,c)&&Mu(a,"set",s,i):Mu(a,"add",s,i),this},delete(s){const i=un(this),{has:a,get:o}=Kb(i);let l=a.call(i,s);l||(s=un(s),l=a.call(i,s)),o&&o.call(i,s);const d=i.delete(s);return l&&Mu(i,"delete",s,void 0),d},clear(){const s=un(this),i=s.size!==0,a=s.clear();return i&&Mu(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=zle(s,t,e)}),n}function IS(t,e){const n=Ule(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Bn(n,s)&&s in r?n:r,s,i)}const Hle={get:IS(!1,!1)},qle={get:IS(!1,!0)},Wle={get:IS(!0,!1)},Gle={get:IS(!0,!0)},KW=new WeakMap,XW=new WeakMap,QW=new WeakMap,ZW=new WeakMap;function Yle(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kle(t){return t.__v_skip||!Object.isExtensible(t)?0:Yle(xle(t))}function Jt(t){return Qu(t)?t:OS(t,!1,Nle,Hle,KW)}function JW(t){return OS(t,!1,Fle,qle,XW)}function Ka(t){return OS(t,!0,jle,Wle,QW)}function $h(t){return OS(t,!0,Ble,Gle,ZW)}function OS(t,e,n,r,s){if(!Zn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Kle(t);if(i===0)return t;const a=s.get(t);if(a)return a;const o=new Proxy(t,i===2?r:n);return s.set(t,o),o}function Bu(t){return Qu(t)?Bu(t.__v_raw):!!(t&&t.__v_isReactive)}function Qu(t){return!!(t&&t.__v_isReadonly)}function pa(t){return!!(t&&t.__v_isShallow)}function LS(t){return t?!!t.__v_raw:!1}function un(t){const e=t&&t.__v_raw;return e?un(e):t}function zt(t){return!Bn(t,"__v_skip")&&Object.isExtensible(t)&&RW(t,"__v_skip",!0),t}const Po=t=>Zn(t)?Jt(t):t,Qm=t=>Zn(t)?Ka(t):t;function zn(t){return t?t.__v_isRef===!0:!1}function Q(t){return eG(t,!1)}function Mo(t){return eG(t,!0)}function eG(t,e){return zn(t)?t:new Xle(t,e)}class Xle{constructor(e,n){this.dep=new RS,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:un(e),this._value=n?e:Po(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||pa(e)||Qu(e);e=r?e:un(e),Bi(e,n)&&(this._rawValue=e,this._value=r?e:Po(e),this.dep.trigger())}}function FO(t){t.dep&&t.dep.trigger()}function v(t){return zn(t)?t.value:t}function Ur(t){return Zt(t)?t():v(t)}const Qle={get:(t,e,n)=>e==="__v_raw"?t:v(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return zn(s)&&!zn(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function tG(t){return Bu(t)?t:new Proxy(t,Qle)}class Zle{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new RS,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function VS(t){return new Zle(t)}function no(t){const e=Lt(t)?new Array(t.length):{};for(const n in t)e[n]=nG(t,n);return e}class Jle{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=un(e);let s=!0,i=e;if(!Lt(e)||!AS(String(n)))do s=!LS(i)||pa(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=v(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&zn(this._raw[this._key])){const n=this._object[this._key];if(zn(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return Ple(this._raw,this._key)}}class eue{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function n2(t,e,n){return zn(t)?t:Zt(t)?new eue(t):Zn(t)&&arguments.length>1?nG(t,e,n):Q(t)}function nG(t,e,n){return new Jle(t,e,n)}class tue{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new RS(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=T0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&dr!==this)return jW(this,!0),!0}get value(){const e=this.dep.track();return zW(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function nue(t,e,n=!1){let r,s;return Zt(t)?r=t:(r=t.get,s=t.set),new tue(r,s,n)}const Qb={},r2=new WeakMap;let If;function rue(t,e=!1,n=If){if(n){let r=r2.get(n);r||r2.set(n,r=[]),r.push(t)}}function sue(t,e,n=Dn){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=n,d=w=>s?w:pa(w)||s===!1||s===0?Eu(w,1):Eu(w);let c,f,p,h,m=!1,g=!1;if(zn(t)?(f=()=>t.value,m=pa(t)):Bu(t)?(f=()=>d(t),m=!0):Lt(t)?(g=!0,m=t.some(w=>Bu(w)||pa(w)),f=()=>t.map(w=>{if(zn(w))return w.value;if(Bu(w))return d(w);if(Zt(w))return l?l(w,2):w()})):Zt(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){Ku();try{p()}finally{Xu()}}const w=If;If=c;try{return l?l(t,3,[h]):t(h)}finally{If=w}}:f=Tl,e&&s){const w=f,S=s===!0?1/0:s;f=()=>Eu(w(),S)}const y=K1(),x=()=>{c.stop(),y&&y.active&&PD(y.effects,c)};if(i&&e){const w=e;e=(...S)=>{w(...S),x()}}let _=g?new Array(t.length).fill(Qb):Qb;const k=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(e){const S=c.run();if(s||m||(g?S.some((C,A)=>Bi(C,_[A])):Bi(S,_))){p&&p();const C=If;If=c;try{const A=[S,_===Qb?void 0:g&&_[0]===Qb?[]:_,h];_=S,l?l(e,3,A):e(...A)}finally{If=C}}}else c.run()};return o&&o(k),c=new VW(f),c.scheduler=a?()=>a(k,!1):k,h=w=>rue(w,!1,c),p=c.onStop=()=>{const w=r2.get(c);if(w){if(l)l(w,4);else for(const S of w)S();r2.delete(c)}},e?r?k(!0):_=c.run():a?a(k.bind(null,!0),!0):c.run(),x.pause=c.pause.bind(c),x.resume=c.resume.bind(c),x.stop=x,x}function Eu(t,e=1/0,n){if(e<=0||!Zn(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,zn(t))Eu(t.value,e,n);else if(Lt(t))for(let r=0;r<t.length;r++)Eu(t[r],e,n);else if(Mg(t)||Rm(t))t.forEach(r=>{Eu(r,e,n)});else if(DW(t)){for(const r in t)Eu(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Eu(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Q1(t,e,n,r){try{return r?t(...r):t()}catch(s){Z1(s,e,n)}}function Io(t,e,n,r){if(Zt(t)){const s=Q1(t,e,n,r);return s&&MW(s)&&s.catch(i=>{Z1(i,e,n)}),s}if(Lt(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Io(t[i],e,n,r));return s}}function Z1(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Dn;if(e){let o=e.parent;const l=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const c=o.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](t,l,d)===!1)return}o=o.parent}if(i){Ku(),Q1(i,null,10,[t,l,d]),Xu();return}}iue(t,n,s,r,a)}function iue(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const vi=[];let ll=-1;const Pm=[];let zd=null,dm=0;const rG=Promise.resolve();let s2=null;function nr(t){const e=s2||rG;return t?e.then(this?t.bind(this):t):e}function aue(t){let e=ll+1,n=vi.length;for(;e<n;){const r=e+n>>>1,s=vi[r],i=M0(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function ND(t){if(!(t.flags&1)){const e=M0(t),n=vi[vi.length-1];!n||!(t.flags&2)&&e>=M0(n)?vi.push(t):vi.splice(aue(e),0,t),t.flags|=1,sG()}}function sG(){s2||(s2=rG.then(aG))}function oue(t){Lt(t)?Pm.push(...t):zd&&t.id===-1?zd.splice(dm+1,0,t):t.flags&1||(Pm.push(t),t.flags|=1),sG()}function BO(t,e,n=ll+1){for(;n<vi.length;n++){const r=vi[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;vi.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function iG(t){if(Pm.length){const e=[...new Set(Pm)].sort((n,r)=>M0(n)-M0(r));if(Pm.length=0,zd){zd.push(...e);return}for(zd=e,dm=0;dm<zd.length;dm++){const n=zd[dm];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}zd=null,dm=0}}const M0=t=>t.id==null?t.flags&2?-1:1/0:t.id;function aG(t){try{for(ll=0;ll<vi.length;ll++){const e=vi[ll];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Q1(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ll<vi.length;ll++){const e=vi[ll];e&&(e.flags&=-2)}ll=-1,vi.length=0,iG(),s2=null,(vi.length||Pm.length)&&aG()}}let Os=null,oG=null;function i2(t){const e=Os;return Os=t,oG=t&&t.type.__scopeId||null,e}function D(t,e=Os,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&l2(-1);const i=i2(e);let a;try{a=t(...s)}finally{i2(i),r._d&&l2(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function we(t,e){if(Os===null)return t;const n=BS(Os),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=Dn]=e[s];i&&(Zt(i)&&(i={mounted:i,updated:i}),i.deep&&Eu(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function ef(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[r];l&&(Ku(),Io(l,n,8,[t.el,o,t,e]),Xu())}}const lG=Symbol("_vte"),uG=t=>t.__isTeleport,Ly=t=>t&&(t.disabled||t.disabled===""),zO=t=>t&&(t.defer||t.defer===""),UO=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,HO=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,q5=(t,e)=>{const n=t&&t.to;return Tr(n)?e?e(n):null:n},dG={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,a,o,l,d){const{mc:c,pc:f,pbc:p,o:{insert:h,querySelector:m,createText:g,createComment:y}}=d,x=Ly(e.props);let{shapeFlag:_,children:k,dynamicChildren:w}=e;if(t==null){const S=e.el=g(""),C=e.anchor=g("");h(S,n,r),h(C,n,r);const A=(E,P)=>{_&16&&c(k,E,P,s,i,a,o,l)},M=()=>{const E=e.target=q5(e.props,m),P=cG(E,e,g,h);E&&(a!=="svg"&&UO(E)?a="svg":a!=="mathml"&&HO(E)&&(a="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(E),x||(A(E,P),iw(e,!1)))};x&&(A(n,C),iw(e,!0)),zO(e.props)?(e.el.__isMounted=!1,ci(()=>{M(),delete e.el.__isMounted},i)):M()}else{if(zO(e.props)&&t.el.__isMounted===!1){ci(()=>{dG.process(t,e,n,r,s,i,a,o,l,d)},i);return}e.el=t.el,e.targetStart=t.targetStart;const S=e.anchor=t.anchor,C=e.target=t.target,A=e.targetAnchor=t.targetAnchor,M=Ly(t.props),E=M?n:C,P=M?S:A;if(a==="svg"||UO(C)?a="svg":(a==="mathml"||HO(C))&&(a="mathml"),w?(p(t.dynamicChildren,w,E,s,i,a,o),UD(t,e,!0)):l||f(t,e,E,P,s,i,a,o,!1),x)M?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Zb(e,n,S,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const I=e.target=q5(e.props,m);I&&Zb(e,I,null,d,0)}else M&&Zb(e,C,A,d,1);iw(e,x)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:d,targetAnchor:c,target:f,props:p}=t;if(f&&(s(d),s(c)),i&&s(l),a&16){const h=i||!Ly(p);for(let m=0;m<o.length;m++){const g=o[m];r(g,e,n,h,!!g.dynamicChildren)}}},move:Zb,hydrate:lue};function Zb(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:a,anchor:o,shapeFlag:l,children:d,props:c}=t,f=i===2;if(f&&r(a,e,n),(!f||Ly(c))&&l&16)for(let p=0;p<d.length;p++)s(d[p],e,n,2);f&&r(o,e,n)}function lue(t,e,n,r,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:d,createText:c}},f){function p(g,y,x,_){y.anchor=f(a(g),y,o(g),n,r,s,i),y.targetStart=x,y.targetAnchor=_}const h=e.target=q5(e.props,l),m=Ly(e.props);if(h){const g=h._lpa||h.firstChild;if(e.shapeFlag&16)if(m)p(t,e,g,g&&a(g));else{e.anchor=a(t);let y=g;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")e.targetStart=y;else if(y.data==="teleport anchor"){e.targetAnchor=y,h._lpa=e.targetAnchor&&a(e.targetAnchor);break}}y=a(y)}e.targetAnchor||cG(h,e,c,d),f(g&&a(g),e,h,n,r,s,i)}iw(e,m)}else m&&e.shapeFlag&16&&p(t,e,t,a(t));return e.anchor&&a(e.anchor)}const jD=dG;function iw(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function cG(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[lG]=i,t&&(r(s,t),r(i,t)),i}const Cu=Symbol("_leaveCb"),Jb=Symbol("_enterCb");function uue(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return yt(()=>{t.isMounted=!0}),Gl(()=>{t.isUnmounting=!0}),t}const ka=[Function,Array],fG={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ka,onEnter:ka,onAfterEnter:ka,onEnterCancelled:ka,onBeforeLeave:ka,onLeave:ka,onAfterLeave:ka,onLeaveCancelled:ka,onBeforeAppear:ka,onAppear:ka,onAfterAppear:ka,onAppearCancelled:ka},pG=t=>{const e=t.subTree;return e.component?pG(e.component):e},due={name:"BaseTransition",props:fG,setup(t,{slots:e}){const n=ai(),r=uue();return()=>{const s=e.default&&gG(e.default(),!0);if(!s||!s.length)return;const i=hG(s),a=un(t),{mode:o}=a;if(r.isLeaving)return jA(i);const l=qO(i);if(!l)return jA(i);let d=W5(l,a,r,n,f=>d=f);l.type!==ys&&E0(l,d);let c=n.subTree&&qO(n.subTree);if(c&&c.type!==ys&&!qf(c,l)&&pG(n).type!==ys){let f=W5(c,a,r,n);if(E0(c,f),o==="out-in"&&l.type!==ys)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,c=void 0},jA(i);o==="in-out"&&l.type!==ys?f.delayLeave=(p,h,m)=>{const g=mG(r,c);g[String(c.key)]=c,p[Cu]=()=>{h(),p[Cu]=void 0,delete d.delayedLeave,c=void 0},d.delayedLeave=()=>{m(),delete d.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function hG(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ys){e=n;break}}return e}const cue=due;function mG(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function W5(t,e,n,r,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:d,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:p,onLeave:h,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:y,onAppear:x,onAfterAppear:_,onAppearCancelled:k}=e,w=String(t.key),S=mG(n,t),C=(E,P)=>{E&&Io(E,r,9,P)},A=(E,P)=>{const I=P[1];C(E,P),Lt(E)?E.every(F=>F.length<=1)&&I():E.length<=1&&I()},M={mode:a,persisted:o,beforeEnter(E){let P=l;if(!n.isMounted)if(i)P=y||l;else return;E[Cu]&&E[Cu](!0);const I=S[w];I&&qf(t,I)&&I.el[Cu]&&I.el[Cu](),C(P,[E])},enter(E){let P=d,I=c,F=f;if(!n.isMounted)if(i)P=x||d,I=_||c,F=k||f;else return;let L=!1;const z=E[Jb]=N=>{L||(L=!0,N?C(F,[E]):C(I,[E]),M.delayedLeave&&M.delayedLeave(),E[Jb]=void 0)};P?A(P,[E,z]):z()},leave(E,P){const I=String(t.key);if(E[Jb]&&E[Jb](!0),n.isUnmounting)return P();C(p,[E]);let F=!1;const L=E[Cu]=z=>{F||(F=!0,P(),z?C(g,[E]):C(m,[E]),E[Cu]=void 0,S[I]===t&&delete S[I])};S[I]=t,h?A(h,[E,L]):L()},clone(E){const P=W5(E,e,n,r,s);return s&&s(P),P}};return M}function jA(t){if(J1(t))return t=Oo(t),t.children=null,t}function qO(t){if(!J1(t))return uG(t.type)&&t.children?hG(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Zt(n.default))return n.default()}}function E0(t,e){t.shapeFlag&6&&t.component?(t.transition=e,E0(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gG(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:i);a.type===xe?(a.patchFlag&128&&s++,r=r.concat(gG(a.children,e,o))):(e||a.type!==ys)&&r.push(o!=null?Oo(a,{key:o}):a)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Je(t,e){return Zt(t)?fs({name:t.name},e,{setup:t}):t}function aw(){const t=ai();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function FD(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Vy(t){const e=ai(),n=Mo(null);if(e){const s=e.refs===Dn?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}const a2=new WeakMap;function Ny(t,e,n,r,s=!1){if(Lt(t)){t.forEach((m,g)=>Ny(m,e&&(Lt(e)?e[g]:e),n,r,s));return}if(Im(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ny(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?BS(r.component):r.el,a=s?null:i,{i:o,r:l}=t,d=e&&e.r,c=o.refs===Dn?o.refs={}:o.refs,f=o.setupState,p=un(f),h=f===Dn?$W:m=>Bn(p,m);if(d!=null&&d!==l){if(WO(e),Tr(d))c[d]=null,h(d)&&(f[d]=null);else if(zn(d)){d.value=null;const m=e;m.k&&(c[m.k]=null)}}if(Zt(l))Q1(l,o,12,[a,c]);else{const m=Tr(l),g=zn(l);if(m||g){const y=()=>{if(t.f){const x=m?h(l)?f[l]:c[l]:l.value;if(s)Lt(x)&&PD(x,i);else if(Lt(x))x.includes(i)||x.push(i);else if(m)c[l]=[i],h(l)&&(f[l]=c[l]);else{const _=[i];l.value=_,t.k&&(c[t.k]=_)}}else m?(c[l]=a,h(l)&&(f[l]=a)):g&&(l.value=a,t.k&&(c[t.k]=a))};if(a){const x=()=>{y(),a2.delete(t)};x.id=-1,a2.set(t,x),ci(x,n)}else WO(t),y()}}}function WO(t){const e=a2.get(t);e&&(e.flags|=8,a2.delete(t))}const GO=t=>t.nodeType===8;ES().requestIdleCallback;ES().cancelIdleCallback;function fue(t,e){if(GO(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(GO(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Im=t=>!!t.type.__asyncLoader;function sv(t){Zt(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:a,suspensible:o=!0,onError:l}=t;let d=null,c,f=0;const p=()=>(f++,d=null,h()),h=()=>{let m;return d||(m=d=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),l)return new Promise((y,x)=>{l(g,()=>y(p()),()=>x(g),f+1)});throw g}).then(g=>m!==d&&d?d:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),c=g,g)))};return Je({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(m,g,y){let x=!1;(g.bu||(g.bu=[])).push(()=>x=!0);const _=()=>{x||y()},k=i?()=>{const w=i(_,S=>fue(m,S));w&&(g.bum||(g.bum=[])).push(w)}:_;c?k():h().then(()=>!g.isUnmounted&&k())},get __asyncResolved(){return c},setup(){const m=Is;if(FD(m),c)return()=>ex(c,m);const g=k=>{d=null,Z1(k,m,13,!r)};if(o&&m.suspense||Zm)return h().then(k=>()=>ex(k,m)).catch(k=>(g(k),()=>r?b(r,{error:k}):null));const y=Q(!1),x=Q(),_=Q(!!s);return s&&setTimeout(()=>{_.value=!1},s),a!=null&&setTimeout(()=>{if(!y.value&&!x.value){const k=new Error(`Async component timed out after ${a}ms.`);g(k),x.value=k}},a),h().then(()=>{y.value=!0,m.parent&&J1(m.parent.vnode)&&m.parent.update()}).catch(k=>{g(k),x.value=k}),()=>{if(y.value&&c)return ex(c,m);if(x.value&&r)return b(r,{error:x.value});if(n&&!_.value)return ex(n,m)}}})}function ex(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,a=b(t,r,s);return a.ref=n,a.ce=i,delete e.vnode.ce,a}const J1=t=>t.type.__isKeepAlive;function pue(t,e){vG(t,"a",e)}function hue(t,e){vG(t,"da",e)}function vG(t,e,n=Is){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(NS(e,r,n),n){let s=n.parent;for(;s&&s.parent;)J1(s.parent.vnode)&&mue(r,e,n,s),s=s.parent}}function mue(t,e,n,r){const s=NS(e,t,r,!0);ks(()=>{PD(r[e],s)},n)}function NS(t,e,n=Is,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...a)=>{Ku();const o=nb(n),l=Io(e,n,t,a);return o(),Xu(),l});return r?s.unshift(i):s.push(i),i}}const pd=t=>(e,n=Is)=>{(!Zm||t==="sp")&&NS(t,(...r)=>e(...r),n)},yG=pd("bm"),yt=pd("m"),bG=pd("bu"),gue=pd("u"),Gl=pd("bum"),ks=pd("um"),vue=pd("sp"),yue=pd("rtg"),bue=pd("rtc");function xue(t,e=Is){NS("ec",t,e)}const xG="components";function Vs(t,e){return wG(xG,t,!0,e)||t}const _G=Symbol.for("v-ndc");function At(t){return Tr(t)?wG(xG,t,!1)||t:t||_G}function wG(t,e,n=!0,r=!1){const s=Os||Is;if(s){const i=s.type;{const o=ade(i,!1);if(o&&(o===e||o===Si(e)||o===$S(Si(e))))return i}const a=YO(s[t]||i[t],e)||YO(s.appContext[t],e);return!a&&r?i:a}}function YO(t,e){return t&&(t[e]||t[Si(e)]||t[$S(Si(e))])}function _e(t,e,n,r){let s;const i=n,a=Lt(t);if(a||Tr(t)){const o=a&&Bu(t);let l=!1,d=!1;o&&(l=!pa(t),d=Qu(t),t=PS(t)),s=new Array(t.length);for(let c=0,f=t.length;c<f;c++)s[c]=e(l?d?Qm(Po(t[c])):Po(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i)}else if(Zn(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,d=o.length;l<d;l++){const c=o[l];s[l]=e(t[c],c,l,i)}}else s=[];return s}function FA(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Lt(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function qe(t,e,n={},r,s){if(Os.ce||Os.parent&&Im(Os.parent)&&Os.parent.ce){const d=Object.keys(n).length>0;return e!=="default"&&(n.name=e),T(),he(xe,null,[b("slot",n,r&&r())],d?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),T();const a=i&&kG(i(n)),o=n.key||a&&a.key,l=he(xe,{key:(o&&!Ro(o)?o:`_${e}`)+(!a&&r?"_fb":"")},a||(r?r():[]),a&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function kG(t){return t.some(e=>P0(e)?!(e.type===ys||e.type===xe&&!kG(e.children)):!0)?t:null}function _ue(t,e){const n={};for(const r in t)n[Py(r)]=t[r];return n}const G5=t=>t?WG(t)?BS(t):G5(t.parent):null,jy=fs(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>G5(t.parent),$root:t=>G5(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>TG(t),$forceUpdate:t=>t.f||(t.f=()=>{ND(t.update)}),$nextTick:t=>t.n||(t.n=nr.bind(t.proxy)),$watch:t=>Iue.bind(t)}),BA=(t,e)=>t!==Dn&&!t.__isScriptSetup&&Bn(t,e),wue={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:o,appContext:l}=t;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(BA(r,e))return a[e]=1,r[e];if(s!==Dn&&Bn(s,e))return a[e]=2,s[e];if(Bn(i,e))return a[e]=3,i[e];if(n!==Dn&&Bn(n,e))return a[e]=4,n[e];K5&&(a[e]=0)}}const d=jy[e];let c,f;if(d)return e==="$attrs"&&Zs(t.attrs,"get",""),d(t);if((c=o.__cssModules)&&(c=c[e]))return c;if(n!==Dn&&Bn(n,e))return a[e]=4,n[e];if(f=l.config.globalProperties,Bn(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return BA(s,e)?(s[e]=n,!0):r!==Dn&&Bn(r,e)?(r[e]=n,!0):Bn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:a}},o){let l;return!!(n[o]||t!==Dn&&o[0]!=="$"&&Bn(t,o)||BA(e,o)||Bn(i,o)||Bn(r,o)||Bn(jy,o)||Bn(s.config.globalProperties,o)||(l=a.__cssModules)&&l[o])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Bn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function eb(){return SG().slots}function ih(){return SG().attrs}function SG(t){const e=ai();return e.setupContext||(e.setupContext=YG(e))}function D0(t){return Lt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function CG(t,e){const n=D0(t);for(const r in e){if(r.startsWith("__skip"))continue;let s=n[r];s?Lt(s)||Zt(s)?s=n[r]={type:s,default:e[r]}:s.default=e[r]:s===null&&(s=n[r]={default:e[r]}),s&&e[`__skip_${r}`]&&(s.skipFactory=!0)}return n}function Y5(t,e){return!t||!e?t||e:Lt(t)&&Lt(e)?t.concat(e):fs({},D0(t),D0(e))}let K5=!0;function kue(t){const e=TG(t),n=t.proxy,r=t.ctx;K5=!1,e.beforeCreate&&KO(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:d,created:c,beforeMount:f,mounted:p,beforeUpdate:h,updated:m,activated:g,deactivated:y,beforeDestroy:x,beforeUnmount:_,destroyed:k,unmounted:w,render:S,renderTracked:C,renderTriggered:A,errorCaptured:M,serverPrefetch:E,expose:P,inheritAttrs:I,components:F,directives:L,filters:z}=e;if(d&&Sue(d,r,null),a)for(const V in a){const O=a[V];Zt(O)&&(r[V]=O.bind(n))}if(s){const V=s.call(n,n);Zn(V)&&(t.data=Jt(V))}if(K5=!0,i)for(const V in i){const O=i[V],X=Zt(O)?O.bind(n,n):Zt(O.get)?O.get.bind(n,n):Tl,j=!Zt(O)&&Zt(O.set)?O.set.bind(n):Tl,U=Z({get:X,set:j});Object.defineProperty(r,V,{enumerable:!0,configurable:!0,get:()=>U.value,set:G=>U.value=G})}if(o)for(const V in o)AG(o[V],r,n,V);if(l){const V=Zt(l)?l.call(n):l;Reflect.ownKeys(V).forEach(O=>{_i(O,V[O])})}c&&KO(c,t,"c");function q(V,O){Lt(O)?O.forEach(X=>V(X.bind(n))):O&&V(O.bind(n))}if(q(yG,f),q(yt,p),q(bG,h),q(gue,m),q(pue,g),q(hue,y),q(xue,M),q(bue,C),q(yue,A),q(Gl,_),q(ks,w),q(vue,E),Lt(P))if(P.length){const V=t.exposed||(t.exposed={});P.forEach(O=>{Object.defineProperty(V,O,{get:()=>n[O],set:X=>n[O]=X,enumerable:!0})})}else t.exposed||(t.exposed={});S&&t.render===Tl&&(t.render=S),I!=null&&(t.inheritAttrs=I),F&&(t.components=F),L&&(t.directives=L),E&&FD(t)}function Sue(t,e,n=Tl){Lt(t)&&(t=X5(t));for(const r in t){const s=t[r];let i;Zn(s)?"default"in s?i=Qn(s.from||r,s.default,!0):i=Qn(s.from||r):i=Qn(s),zn(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[r]=i}}function KO(t,e,n){Io(Lt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function AG(t,e,n,r){let s=r.includes(".")?EG(n,r):()=>n[r];if(Tr(t)){const i=e[t];Zt(i)&&et(s,i)}else if(Zt(t))et(s,t.bind(n));else if(Zn(t))if(Lt(t))t.forEach(i=>AG(i,e,n,r));else{const i=Zt(t.handler)?t.handler.bind(n):e[t.handler];Zt(i)&&et(s,i,t)}}function TG(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(d=>o2(l,d,a,!0)),o2(l,e,a)),Zn(e)&&i.set(e,l),l}function o2(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&o2(t,i,n,!0),s&&s.forEach(a=>o2(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const o=Cue[a]||n&&n[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Cue={data:XO,props:QO,emits:QO,methods:oy,computed:oy,beforeCreate:di,created:di,beforeMount:di,mounted:di,beforeUpdate:di,updated:di,beforeDestroy:di,beforeUnmount:di,destroyed:di,unmounted:di,activated:di,deactivated:di,errorCaptured:di,serverPrefetch:di,components:oy,directives:oy,watch:Tue,provide:XO,inject:Aue};function XO(t,e){return e?t?function(){return fs(Zt(t)?t.call(this,this):t,Zt(e)?e.call(this,this):e)}:e:t}function Aue(t,e){return oy(X5(t),X5(e))}function X5(t){if(Lt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function di(t,e){return t?[...new Set([].concat(t,e))]:e}function oy(t,e){return t?fs(Object.create(null),t,e):e}function QO(t,e){return t?Lt(t)&&Lt(e)?[...new Set([...t,...e])]:fs(Object.create(null),D0(t),D0(e!=null?e:{})):e}function Tue(t,e){if(!t)return e;if(!e)return t;const n=fs(Object.create(null),t);for(const r in e)n[r]=di(t[r],e[r]);return n}function $G(){return{app:null,config:{isNativeTag:$W,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $ue=0;function Mue(t,e){return function(r,s=null){Zt(r)||(r=fs({},r)),s!=null&&!Zn(s)&&(s=null);const i=$G(),a=new WeakSet,o=[];let l=!1;const d=i.app={_uid:$ue++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:lde,get config(){return i.config},set config(c){},use(c,...f){return a.has(c)||(c&&Zt(c.install)?(a.add(c),c.install(d,...f)):Zt(c)&&(a.add(c),c(d,...f))),d},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),d},component(c,f){return f?(i.components[c]=f,d):i.components[c]},directive(c,f){return f?(i.directives[c]=f,d):i.directives[c]},mount(c,f,p){if(!l){const h=d._ceVNode||b(r,s);return h.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(h,c,p),l=!0,d._container=c,c.__vue_app__=d,BS(h.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Io(o,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(c,f){return i.provides[c]=f,d},runWithContext(c){const f=hp;hp=d;try{return c()}finally{hp=f}}};return d}}let hp=null;function _i(t,e){if(Is){let n=Is.provides;const r=Is.parent&&Is.parent.provides;r===n&&(n=Is.provides=Object.create(r)),n[t]=e}}function Qn(t,e,n=!1){const r=ai();if(r||hp){let s=hp?hp._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Zt(e)?e.call(r&&r.proxy):e}}function Eue(){return!!(ai()||hp)}const Due=Symbol.for("v-scx"),Rue=()=>Qn(Due);function Hr(t,e){return tb(t,null,e)}function MG(t,e){return tb(t,null,{flush:"post"})}function Pue(t,e){return tb(t,null,{flush:"sync"})}function et(t,e,n){return tb(t,e,n)}function tb(t,e,n=Dn){const{immediate:r,deep:s,flush:i,once:a}=n,o=fs({},n),l=e&&r||!e&&i!=="post";let d;if(Zm){if(i==="sync"){const h=Rue();d=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Tl,h.resume=Tl,h.pause=Tl,h}}const c=Is;o.call=(h,m,g)=>Io(h,c,m,g);let f=!1;i==="post"?o.scheduler=h=>{ci(h,c&&c.suspense)}:i!=="sync"&&(f=!0,o.scheduler=(h,m)=>{m?h():ND(h)}),o.augmentJob=h=>{e&&(h.flags|=4),f&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const p=sue(t,e,o);return Zm&&(d?d.push(p):l&&p()),p}function Iue(t,e,n){const r=this.proxy,s=Tr(t)?t.includes(".")?EG(r,t):()=>r[t]:t.bind(r,r);let i;Zt(e)?i=e:(i=e.handler,n=e);const a=nb(this),o=tb(s,i.bind(r),n);return a(),o}function EG(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function DG(t,e,n=Dn){const r=ai(),s=Si(e),i=fd(e),a=RG(t,s),o=VS((l,d)=>{let c,f=Dn,p;return Pue(()=>{const h=t[s];Bi(c,h)&&(c=h,d())}),{get(){return l(),n.get?n.get(c):c},set(h){const m=n.set?n.set(h):h;if(!Bi(m,c)&&!(f!==Dn&&Bi(h,f)))return;const g=r.vnode.props;g&&(e in g||s in g||i in g)&&(`onUpdate:${e}`in g||`onUpdate:${s}`in g||`onUpdate:${i}`in g)||(c=h,d()),r.emit(`update:${e}`,m),Bi(h,m)&&Bi(h,f)&&!Bi(m,p)&&d(),f=h,p=m}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||Dn:o,done:!1}:{done:!0}}}},o}const RG=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Si(e)}Modifiers`]||t[`${fd(e)}Modifiers`];function Oue(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Dn;let s=n;const i=e.startsWith("update:"),a=i&&RG(r,e.slice(7));a&&(a.trim&&(s=n.map(c=>Tr(c)?c.trim():c)),a.number&&(s=n.map(MS)));let o,l=r[o=Py(e)]||r[o=Py(Si(e))];!l&&i&&(l=r[o=Py(fd(e))]),l&&Io(l,t,6,s);const d=r[o+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Io(d,t,6,s)}}const Lue=new WeakMap;function PG(t,e,n=!1){const r=n?Lue:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!Zt(t)){const l=d=>{const c=PG(d,e,!0);c&&(o=!0,fs(a,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(Zn(t)&&r.set(t,null),null):(Lt(i)?i.forEach(l=>a[l]=null):fs(a,i),Zn(t)&&r.set(t,a),a)}function jS(t,e){return!t||!CS(e)?!1:(e=e.slice(2).replace(/Once$/,""),Bn(t,e[0].toLowerCase()+e.slice(1))||Bn(t,fd(e))||Bn(t,e))}function ZO(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:d,renderCache:c,props:f,data:p,setupState:h,ctx:m,inheritAttrs:g}=t,y=i2(t);let x,_;try{if(n.shapeFlag&4){const w=s||r,S=w;x=gl(d.call(S,w,c,f,h,p,m)),_=o}else{const w=e;x=gl(w.length>1?w(f,{attrs:o,slots:a,emit:l}):w(f,null)),_=e.props?o:Vue(o)}}catch(w){Fy.length=0,Z1(w,t,1),x=b(ys)}let k=x;if(_&&g!==!1){const w=Object.keys(_),{shapeFlag:S}=k;w.length&&S&7&&(i&&w.some(RD)&&(_=Nue(_,i)),k=Oo(k,_,!1,!0))}return n.dirs&&(k=Oo(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&E0(k,n.transition),x=k,i2(y),x}const Vue=t=>{let e;for(const n in t)(n==="class"||n==="style"||CS(n))&&((e||(e={}))[n]=t[n]);return e},Nue=(t,e)=>{const n={};for(const r in t)(!RD(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function jue(t,e,n){const{props:r,children:s,component:i}=t,{props:a,children:o,patchFlag:l}=e,d=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?JO(r,a,d):!!a;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const p=c[f];if(a[p]!==r[p]&&!jS(d,p))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?JO(r,a,d):!0:!!a;return!1}function JO(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!jS(n,i))return!0}return!1}function Fue({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const IG={},OG=()=>Object.create(IG),LG=t=>Object.getPrototypeOf(t)===IG;function Bue(t,e,n,r=!1){const s={},i=OG();t.propsDefaults=Object.create(null),VG(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);n?t.props=r?s:JW(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function zue(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=un(s),[l]=t.propsOptions;let d=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let p=c[f];if(jS(t.emitsOptions,p))continue;const h=e[p];if(l)if(Bn(i,p))h!==i[p]&&(i[p]=h,d=!0);else{const m=Si(p);s[m]=Q5(l,o,m,h,t,!1)}else h!==i[p]&&(i[p]=h,d=!0)}}}else{VG(t,e,s,i)&&(d=!0);let c;for(const f in o)(!e||!Bn(e,f)&&((c=fd(f))===f||!Bn(e,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(s[f]=Q5(l,o,f,void 0,t,!0)):delete s[f]);if(i!==o)for(const f in i)(!e||!Bn(e,f))&&(delete i[f],d=!0)}d&&Mu(t.attrs,"set","")}function VG(t,e,n,r){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Ry(l))continue;const d=e[l];let c;s&&Bn(s,c=Si(l))?!i||!i.includes(c)?n[c]=d:(o||(o={}))[c]=d:jS(t.emitsOptions,l)||(!(l in r)||d!==r[l])&&(r[l]=d,a=!0)}if(i){const l=un(n),d=o||Dn;for(let c=0;c<i.length;c++){const f=i[c];n[f]=Q5(s,l,f,d[f],t,!Bn(d,f))}}return a}function Q5(t,e,n,r,s,i){const a=t[n];if(a!=null){const o=Bn(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Zt(l)){const{propsDefaults:d}=s;if(n in d)r=d[n];else{const c=nb(s);r=d[n]=l.call(null,e),c()}}else r=l;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!o?r=!1:a[1]&&(r===""||r===fd(n))&&(r=!0))}return r}const Uue=new WeakMap;function NG(t,e,n=!1){const r=n?Uue:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,a={},o=[];let l=!1;if(!Zt(t)){const c=f=>{l=!0;const[p,h]=NG(f,e,!0);fs(a,p),h&&o.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return Zn(t)&&r.set(t,Dm),Dm;if(Lt(i))for(let c=0;c<i.length;c++){const f=Si(i[c]);eL(f)&&(a[f]=Dn)}else if(i)for(const c in i){const f=Si(c);if(eL(f)){const p=i[c],h=a[f]=Lt(p)||Zt(p)?{type:p}:fs({},p),m=h.type;let g=!1,y=!0;if(Lt(m))for(let x=0;x<m.length;++x){const _=m[x],k=Zt(_)&&_.name;if(k==="Boolean"){g=!0;break}else k==="String"&&(y=!1)}else g=Zt(m)&&m.name==="Boolean";h[0]=g,h[1]=y,(g||Bn(h,"default"))&&o.push(f)}}const d=[a,o];return Zn(t)&&r.set(t,d),d}function eL(t){return t[0]!=="$"&&!Ry(t)}const BD=t=>t==="_"||t==="_ctx"||t==="$stable",zD=t=>Lt(t)?t.map(gl):[gl(t)],Hue=(t,e,n)=>{if(e._n)return e;const r=D((...s)=>zD(e(...s)),n);return r._c=!1,r},jG=(t,e,n)=>{const r=t._ctx;for(const s in t){if(BD(s))continue;const i=t[s];if(Zt(i))e[s]=Hue(s,i,r);else if(i!=null){const a=zD(i);e[s]=()=>a}}},FG=(t,e)=>{const n=zD(e);t.slots.default=()=>n},BG=(t,e,n)=>{for(const r in e)(n||!BD(r))&&(t[r]=e[r])},que=(t,e,n)=>{const r=t.slots=OG();if(t.vnode.shapeFlag&32){const s=e._;s?(BG(r,e,n),n&&RW(r,"_",s,!0)):jG(e,r)}else e&&FG(t,e)},Wue=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,a=Dn;if(r.shapeFlag&32){const o=e._;o?n&&o===1?i=!1:BG(s,e,n):(i=!e.$stable,jG(e,s)),a=e}else e&&(FG(t,e),a={default:1});if(i)for(const o in s)!BD(o)&&a[o]==null&&delete s[o]},ci=Que;function Gue(t){return Yue(t)}function Yue(t,e){const n=ES();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:d,setElementText:c,parentNode:f,nextSibling:p,setScopeId:h=Tl,insertStaticContent:m}=t,g=(H,Y,B,ae=null,be=null,fe=null,me=void 0,ye=null,Ee=!!Y.dynamicChildren)=>{if(H===Y)return;H&&!qf(H,Y)&&(ae=oe(H),G(H,be,fe,!0),H=null),Y.patchFlag===-2&&(Ee=!1,Y.dynamicChildren=null);const{type:Re,ref:Ye,shapeFlag:Xe}=Y;switch(Re){case FS:y(H,Y,B,ae);break;case ys:x(H,Y,B,ae);break;case ow:H==null&&_(Y,B,ae,me);break;case xe:F(H,Y,B,ae,be,fe,me,ye,Ee);break;default:Xe&1?S(H,Y,B,ae,be,fe,me,ye,Ee):Xe&6?L(H,Y,B,ae,be,fe,me,ye,Ee):(Xe&64||Xe&128)&&Re.process(H,Y,B,ae,be,fe,me,ye,Ee,K)}Ye!=null&&be?Ny(Ye,H&&H.ref,fe,Y||H,!Y):Ye==null&&H&&H.ref!=null&&Ny(H.ref,null,fe,H,!0)},y=(H,Y,B,ae)=>{if(H==null)r(Y.el=o(Y.children),B,ae);else{const be=Y.el=H.el;Y.children!==H.children&&d(be,Y.children)}},x=(H,Y,B,ae)=>{H==null?r(Y.el=l(Y.children||""),B,ae):Y.el=H.el},_=(H,Y,B,ae)=>{[H.el,H.anchor]=m(H.children,Y,B,ae,H.el,H.anchor)},k=({el:H,anchor:Y},B,ae)=>{let be;for(;H&&H!==Y;)be=p(H),r(H,B,ae),H=be;r(Y,B,ae)},w=({el:H,anchor:Y})=>{let B;for(;H&&H!==Y;)B=p(H),s(H),H=B;s(Y)},S=(H,Y,B,ae,be,fe,me,ye,Ee)=>{if(Y.type==="svg"?me="svg":Y.type==="math"&&(me="mathml"),H==null)C(Y,B,ae,be,fe,me,ye,Ee);else{const Re=H.el&&H.el._isVueCE?H.el:null;try{Re&&Re._beginPatch(),E(H,Y,be,fe,me,ye,Ee)}finally{Re&&Re._endPatch()}}},C=(H,Y,B,ae,be,fe,me,ye)=>{let Ee,Re;const{props:Ye,shapeFlag:Xe,transition:st,dirs:it}=H;if(Ee=H.el=a(H.type,fe,Ye&&Ye.is,Ye),Xe&8?c(Ee,H.children):Xe&16&&M(H.children,Ee,null,ae,be,zA(H,fe),me,ye),it&&ef(H,null,ae,"created"),A(Ee,H,H.scopeId,me,ae),Ye){for(const Pe in Ye)Pe!=="value"&&!Ry(Pe)&&i(Ee,Pe,null,Ye[Pe],fe,ae);"value"in Ye&&i(Ee,"value",null,Ye.value,fe),(Re=Ye.onVnodeBeforeMount)&&Go(Re,ae,H)}it&&ef(H,null,ae,"beforeMount");const Fe=Kue(be,st);Fe&&st.beforeEnter(Ee),r(Ee,Y,B),((Re=Ye&&Ye.onVnodeMounted)||Fe||it)&&ci(()=>{Re&&Go(Re,ae,H),Fe&&st.enter(Ee),it&&ef(H,null,ae,"mounted")},be)},A=(H,Y,B,ae,be)=>{if(B&&h(H,B),ae)for(let fe=0;fe<ae.length;fe++)h(H,ae[fe]);if(be){let fe=be.subTree;if(Y===fe||UG(fe.type)&&(fe.ssContent===Y||fe.ssFallback===Y)){const me=be.vnode;A(H,me,me.scopeId,me.slotScopeIds,be.parent)}}},M=(H,Y,B,ae,be,fe,me,ye,Ee=0)=>{for(let Re=Ee;Re<H.length;Re++){const Ye=H[Re]=ye?Ud(H[Re]):gl(H[Re]);g(null,Ye,Y,B,ae,be,fe,me,ye)}},E=(H,Y,B,ae,be,fe,me)=>{const ye=Y.el=H.el;let{patchFlag:Ee,dynamicChildren:Re,dirs:Ye}=Y;Ee|=H.patchFlag&16;const Xe=H.props||Dn,st=Y.props||Dn;let it;if(B&&tf(B,!1),(it=st.onVnodeBeforeUpdate)&&Go(it,B,Y,H),Ye&&ef(Y,H,B,"beforeUpdate"),B&&tf(B,!0),(Xe.innerHTML&&st.innerHTML==null||Xe.textContent&&st.textContent==null)&&c(ye,""),Re?P(H.dynamicChildren,Re,ye,B,ae,zA(Y,be),fe):me||O(H,Y,ye,null,B,ae,zA(Y,be),fe,!1),Ee>0){if(Ee&16)I(ye,Xe,st,B,be);else if(Ee&2&&Xe.class!==st.class&&i(ye,"class",null,st.class,be),Ee&4&&i(ye,"style",Xe.style,st.style,be),Ee&8){const Fe=Y.dynamicProps;for(let Pe=0;Pe<Fe.length;Pe++){const je=Fe[Pe],Ie=Xe[je],Se=st[je];(Se!==Ie||je==="value")&&i(ye,je,Ie,Se,be,B)}}Ee&1&&H.children!==Y.children&&c(ye,Y.children)}else!me&&Re==null&&I(ye,Xe,st,B,be);((it=st.onVnodeUpdated)||Ye)&&ci(()=>{it&&Go(it,B,Y,H),Ye&&ef(Y,H,B,"updated")},ae)},P=(H,Y,B,ae,be,fe,me)=>{for(let ye=0;ye<Y.length;ye++){const Ee=H[ye],Re=Y[ye],Ye=Ee.el&&(Ee.type===xe||!qf(Ee,Re)||Ee.shapeFlag&198)?f(Ee.el):B;g(Ee,Re,Ye,null,ae,be,fe,me,!0)}},I=(H,Y,B,ae,be)=>{if(Y!==B){if(Y!==Dn)for(const fe in Y)!Ry(fe)&&!(fe in B)&&i(H,fe,Y[fe],null,be,ae);for(const fe in B){if(Ry(fe))continue;const me=B[fe],ye=Y[fe];me!==ye&&fe!=="value"&&i(H,fe,ye,me,be,ae)}"value"in B&&i(H,"value",Y.value,B.value,be)}},F=(H,Y,B,ae,be,fe,me,ye,Ee)=>{const Re=Y.el=H?H.el:o(""),Ye=Y.anchor=H?H.anchor:o("");let{patchFlag:Xe,dynamicChildren:st,slotScopeIds:it}=Y;it&&(ye=ye?ye.concat(it):it),H==null?(r(Re,B,ae),r(Ye,B,ae),M(Y.children||[],B,Ye,be,fe,me,ye,Ee)):Xe>0&&Xe&64&&st&&H.dynamicChildren?(P(H.dynamicChildren,st,B,be,fe,me,ye),(Y.key!=null||be&&Y===be.subTree)&&UD(H,Y,!0)):O(H,Y,B,Ye,be,fe,me,ye,Ee)},L=(H,Y,B,ae,be,fe,me,ye,Ee)=>{Y.slotScopeIds=ye,H==null?Y.shapeFlag&512?be.ctx.activate(Y,B,ae,me,Ee):z(Y,B,ae,be,fe,me,Ee):N(H,Y,Ee)},z=(H,Y,B,ae,be,fe,me)=>{const ye=H.component=nde(H,ae,be);if(J1(H)&&(ye.ctx.renderer=K),rde(ye,!1,me),ye.asyncDep){if(be&&be.registerDep(ye,q,me),!H.el){const Ee=ye.subTree=b(ys);x(null,Ee,Y,B),H.placeholder=Ee.el}}else q(ye,H,Y,B,be,fe,me)},N=(H,Y,B)=>{const ae=Y.component=H.component;if(jue(H,Y,B))if(ae.asyncDep&&!ae.asyncResolved){V(ae,Y,B);return}else ae.next=Y,ae.update();else Y.el=H.el,ae.vnode=Y},q=(H,Y,B,ae,be,fe,me)=>{const ye=()=>{if(H.isMounted){let{next:Xe,bu:st,u:it,parent:Fe,vnode:Pe}=H;{const Le=zG(H);if(Le){Xe&&(Xe.el=Pe.el,V(H,Xe,me)),Le.asyncDep.then(()=>{H.isUnmounted||ye()});return}}let je=Xe,Ie;tf(H,!1),Xe?(Xe.el=Pe.el,V(H,Xe,me)):Xe=Pe,st&&sw(st),(Ie=Xe.props&&Xe.props.onVnodeBeforeUpdate)&&Go(Ie,Fe,Xe,Pe),tf(H,!0);const Se=ZO(H),Ce=H.subTree;H.subTree=Se,g(Ce,Se,f(Ce.el),oe(Ce),H,be,fe),Xe.el=Se.el,je===null&&Fue(H,Se.el),it&&ci(it,be),(Ie=Xe.props&&Xe.props.onVnodeUpdated)&&ci(()=>Go(Ie,Fe,Xe,Pe),be)}else{let Xe;const{el:st,props:it}=Y,{bm:Fe,m:Pe,parent:je,root:Ie,type:Se}=H,Ce=Im(Y);tf(H,!1),Fe&&sw(Fe),!Ce&&(Xe=it&&it.onVnodeBeforeMount)&&Go(Xe,je,Y),tf(H,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Se);const Le=H.subTree=ZO(H);g(null,Le,B,ae,H,be,fe),Y.el=Le.el}if(Pe&&ci(Pe,be),!Ce&&(Xe=it&&it.onVnodeMounted)){const Le=Y;ci(()=>Go(Xe,je,Le),be)}(Y.shapeFlag&256||je&&Im(je.vnode)&&je.vnode.shapeFlag&256)&&H.a&&ci(H.a,be),H.isMounted=!0,Y=B=ae=null}};H.scope.on();const Ee=H.effect=new VW(ye);H.scope.off();const Re=H.update=Ee.run.bind(Ee),Ye=H.job=Ee.runIfDirty.bind(Ee);Ye.i=H,Ye.id=H.uid,Ee.scheduler=()=>ND(Ye),tf(H,!0),Re()},V=(H,Y,B)=>{Y.component=H;const ae=H.vnode.props;H.vnode=Y,H.next=null,zue(H,Y.props,ae,B),Wue(H,Y.children,B),Ku(),BO(H),Xu()},O=(H,Y,B,ae,be,fe,me,ye,Ee=!1)=>{const Re=H&&H.children,Ye=H?H.shapeFlag:0,Xe=Y.children,{patchFlag:st,shapeFlag:it}=Y;if(st>0){if(st&128){j(Re,Xe,B,ae,be,fe,me,ye,Ee);return}else if(st&256){X(Re,Xe,B,ae,be,fe,me,ye,Ee);return}}it&8?(Ye&16&&ce(Re,be,fe),Xe!==Re&&c(B,Xe)):Ye&16?it&16?j(Re,Xe,B,ae,be,fe,me,ye,Ee):ce(Re,be,fe,!0):(Ye&8&&c(B,""),it&16&&M(Xe,B,ae,be,fe,me,ye,Ee))},X=(H,Y,B,ae,be,fe,me,ye,Ee)=>{H=H||Dm,Y=Y||Dm;const Re=H.length,Ye=Y.length,Xe=Math.min(Re,Ye);let st;for(st=0;st<Xe;st++){const it=Y[st]=Ee?Ud(Y[st]):gl(Y[st]);g(H[st],it,B,null,be,fe,me,ye,Ee)}Re>Ye?ce(H,be,fe,!0,!1,Xe):M(Y,B,ae,be,fe,me,ye,Ee,Xe)},j=(H,Y,B,ae,be,fe,me,ye,Ee)=>{let Re=0;const Ye=Y.length;let Xe=H.length-1,st=Ye-1;for(;Re<=Xe&&Re<=st;){const it=H[Re],Fe=Y[Re]=Ee?Ud(Y[Re]):gl(Y[Re]);if(qf(it,Fe))g(it,Fe,B,null,be,fe,me,ye,Ee);else break;Re++}for(;Re<=Xe&&Re<=st;){const it=H[Xe],Fe=Y[st]=Ee?Ud(Y[st]):gl(Y[st]);if(qf(it,Fe))g(it,Fe,B,null,be,fe,me,ye,Ee);else break;Xe--,st--}if(Re>Xe){if(Re<=st){const it=st+1,Fe=it<Ye?Y[it].el:ae;for(;Re<=st;)g(null,Y[Re]=Ee?Ud(Y[Re]):gl(Y[Re]),B,Fe,be,fe,me,ye,Ee),Re++}}else if(Re>st)for(;Re<=Xe;)G(H[Re],be,fe,!0),Re++;else{const it=Re,Fe=Re,Pe=new Map;for(Re=Fe;Re<=st;Re++){const Ae=Y[Re]=Ee?Ud(Y[Re]):gl(Y[Re]);Ae.key!=null&&Pe.set(Ae.key,Re)}let je,Ie=0;const Se=st-Fe+1;let Ce=!1,Le=0;const Pt=new Array(Se);for(Re=0;Re<Se;Re++)Pt[Re]=0;for(Re=it;Re<=Xe;Re++){const Ae=H[Re];if(Ie>=Se){G(Ae,be,fe,!0);continue}let ke;if(Ae.key!=null)ke=Pe.get(Ae.key);else for(je=Fe;je<=st;je++)if(Pt[je-Fe]===0&&qf(Ae,Y[je])){ke=je;break}ke===void 0?G(Ae,be,fe,!0):(Pt[ke-Fe]=Re+1,ke>=Le?Le=ke:Ce=!0,g(Ae,Y[ke],B,null,be,fe,me,ye,Ee),Ie++)}const $e=Ce?Xue(Pt):Dm;for(je=$e.length-1,Re=Se-1;Re>=0;Re--){const Ae=Fe+Re,ke=Y[Ae],Ue=Y[Ae+1],$t=Ae+1<Ye?Ue.el||Ue.placeholder:ae;Pt[Re]===0?g(null,ke,B,$t,be,fe,me,ye,Ee):Ce&&(je<0||Re!==$e[je]?U(ke,B,$t,2):je--)}}},U=(H,Y,B,ae,be=null)=>{const{el:fe,type:me,transition:ye,children:Ee,shapeFlag:Re}=H;if(Re&6){U(H.component.subTree,Y,B,ae);return}if(Re&128){H.suspense.move(Y,B,ae);return}if(Re&64){me.move(H,Y,B,K);return}if(me===xe){r(fe,Y,B);for(let Xe=0;Xe<Ee.length;Xe++)U(Ee[Xe],Y,B,ae);r(H.anchor,Y,B);return}if(me===ow){k(H,Y,B);return}if(ae!==2&&Re&1&&ye)if(ae===0)ye.beforeEnter(fe),r(fe,Y,B),ci(()=>ye.enter(fe),be);else{const{leave:Xe,delayLeave:st,afterLeave:it}=ye,Fe=()=>{H.ctx.isUnmounted?s(fe):r(fe,Y,B)},Pe=()=>{fe._isLeaving&&fe[Cu](!0),Xe(fe,()=>{Fe(),it&&it()})};st?st(fe,Fe,Pe):Pe()}else r(fe,Y,B)},G=(H,Y,B,ae=!1,be=!1)=>{const{type:fe,props:me,ref:ye,children:Ee,dynamicChildren:Re,shapeFlag:Ye,patchFlag:Xe,dirs:st,cacheIndex:it}=H;if(Xe===-2&&(be=!1),ye!=null&&(Ku(),Ny(ye,null,B,H,!0),Xu()),it!=null&&(Y.renderCache[it]=void 0),Ye&256){Y.ctx.deactivate(H);return}const Fe=Ye&1&&st,Pe=!Im(H);let je;if(Pe&&(je=me&&me.onVnodeBeforeUnmount)&&Go(je,Y,H),Ye&6)ne(H.component,B,ae);else{if(Ye&128){H.suspense.unmount(B,ae);return}Fe&&ef(H,null,Y,"beforeUnmount"),Ye&64?H.type.remove(H,Y,B,K,ae):Re&&!Re.hasOnce&&(fe!==xe||Xe>0&&Xe&64)?ce(Re,Y,B,!1,!0):(fe===xe&&Xe&384||!be&&Ye&16)&&ce(Ee,Y,B),ae&&ee(H)}(Pe&&(je=me&&me.onVnodeUnmounted)||Fe)&&ci(()=>{je&&Go(je,Y,H),Fe&&ef(H,null,Y,"unmounted")},B)},ee=H=>{const{type:Y,el:B,anchor:ae,transition:be}=H;if(Y===xe){ie(B,ae);return}if(Y===ow){w(H);return}const fe=()=>{s(B),be&&!be.persisted&&be.afterLeave&&be.afterLeave()};if(H.shapeFlag&1&&be&&!be.persisted){const{leave:me,delayLeave:ye}=be,Ee=()=>me(B,fe);ye?ye(H.el,fe,Ee):Ee()}else fe()},ie=(H,Y)=>{let B;for(;H!==Y;)B=p(H),s(H),H=B;s(Y)},ne=(H,Y,B)=>{const{bum:ae,scope:be,job:fe,subTree:me,um:ye,m:Ee,a:Re}=H;tL(Ee),tL(Re),ae&&sw(ae),be.stop(),fe&&(fe.flags|=8,G(me,H,Y,B)),ye&&ci(ye,Y),ci(()=>{H.isUnmounted=!0},Y)},ce=(H,Y,B,ae=!1,be=!1,fe=0)=>{for(let me=fe;me<H.length;me++)G(H[me],Y,B,ae,be)},oe=H=>{if(H.shapeFlag&6)return oe(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const Y=p(H.anchor||H.el),B=Y&&Y[lG];return B?p(B):Y};let re=!1;const te=(H,Y,B)=>{H==null?Y._vnode&&G(Y._vnode,null,null,!0):g(Y._vnode||null,H,Y,null,null,null,B),Y._vnode=H,re||(re=!0,BO(),iG(),re=!1)},K={p:g,um:G,m:U,r:ee,mt:z,mc:M,pc:O,pbc:P,n:oe,o:t};return{render:te,hydrate:void 0,createApp:Mue(te)}}function zA({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function tf({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Kue(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function UD(t,e,n=!1){const r=t.children,s=e.children;if(Lt(r)&&Lt(s))for(let i=0;i<r.length;i++){const a=r[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=Ud(s[i]),o.el=a.el),!n&&o.patchFlag!==-2&&UD(a,o)),o.type===FS&&o.patchFlag!==-1&&(o.el=a.el),o.type===ys&&!o.el&&(o.el=a.el)}}function Xue(t){const e=t.slice(),n=[0];let r,s,i,a,o;const l=t.length;for(r=0;r<l;r++){const d=t[r];if(d!==0){if(s=n[n.length-1],t[s]<d){e[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)o=i+a>>1,t[n[o]]<d?i=o+1:a=o;d<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=e[a];return n}function zG(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:zG(e)}function tL(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const UG=t=>t.__isSuspense;function Que(t,e){e&&e.pendingBranch?Lt(t)?e.effects.push(...t):e.effects.push(t):oue(t)}const xe=Symbol.for("v-fgt"),FS=Symbol.for("v-txt"),ys=Symbol.for("v-cmt"),ow=Symbol.for("v-stc"),Fy=[];let ca=null;function T(t=!1){Fy.push(ca=t?null:[])}function Zue(){Fy.pop(),ca=Fy[Fy.length-1]||null}let R0=1;function l2(t,e=!1){R0+=t,t<0&&ca&&e&&(ca.hasOnce=!0)}function HG(t){return t.dynamicChildren=R0>0?ca||Dm:null,Zue(),R0>0&&ca&&ca.push(t),t}function R(t,e,n,r,s,i){return HG(u(t,e,n,r,s,i,!0))}function he(t,e,n,r,s){return HG(b(t,e,n,r,s,!0))}function P0(t){return t?t.__v_isVNode===!0:!1}function qf(t,e){return t.type===e.type&&t.key===e.key}const qG=({key:t})=>t!=null?t:null,lw=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Tr(t)||zn(t)||Zt(t)?{i:Os,r:t,k:e,f:!!n}:t:null);function u(t,e=null,n=null,r=0,s=null,i=t===xe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&qG(e),ref:e&&lw(e),scopeId:oG,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Os};return o?(HD(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Tr(n)?8:16),R0>0&&!a&&ca&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&ca.push(l),l}const b=Jue;function Jue(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===_G)&&(t=ys),P0(t)){const o=Oo(t,e,!0);return n&&HD(o,n),R0>0&&!i&&ca&&(o.shapeFlag&6?ca[ca.indexOf(t)]=o:ca.push(o)),o.patchFlag=-2,o}if(ode(t)&&(t=t.__vccOpts),e){e=or(e);let{class:o,style:l}=e;o&&!Tr(o)&&(e.class=pe(o)),Zn(l)&&(LS(l)&&!Lt(l)&&(l=fs({},l)),e.style=rt(l))}const a=Tr(t)?1:UG(t)?128:uG(t)?64:Zn(t)?4:Zt(t)?2:0;return u(t,e,n,r,s,a,i,!0)}function or(t){return t?LS(t)||LG(t)?fs({},t):t:null}function Oo(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=t,d=e?xt(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&qG(d),ref:e&&e.ref?n&&i?Lt(i)?i.concat(lw(e)):[i,lw(e)]:lw(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Oo(t.ssContent),ssFallback:t.ssFallback&&Oo(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&E0(c,l.clone(c)),c}function W(t=" ",e=0){return b(FS,null,t,e)}function fr(t,e){const n=b(ow,null,t);return n.staticCount=e,n}function se(t="",e=!1){return e?(T(),he(ys,null,t)):b(ys,null,t)}function gl(t){return t==null||typeof t=="boolean"?b(ys):Lt(t)?b(xe,null,t.slice()):P0(t)?Ud(t):b(FS,null,String(t))}function Ud(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Oo(t)}function HD(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Lt(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),HD(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!LG(e)?e._ctx=Os:s===3&&Os&&(Os.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Zt(e)?(e={default:e,_ctx:Os},n=32):(e=String(e),r&64?(n=16,e=[W(e)]):n=8);t.children=e,t.shapeFlag|=n}function xt(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=pe([e.class,r.class]));else if(s==="style")e.style=rt([e.style,r.style]);else if(CS(s)){const i=e[s],a=r[s];a&&i!==a&&!(Lt(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=r[s])}return e}function Go(t,e,n,r=null){Io(t,e,7,[n,r])}const ede=$G();let tde=0;function nde(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||ede,i={uid:tde++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new LW(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:NG(r,s),emitsOptions:PG(r,s),emit:null,emitted:null,propsDefaults:Dn,inheritAttrs:r.inheritAttrs,ctx:Dn,data:Dn,props:Dn,attrs:Dn,slots:Dn,refs:Dn,setupState:Dn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Oue.bind(null,i),t.ce&&t.ce(i),i}let Is=null;const ai=()=>Is||Os;let u2,Z5;{const t=ES(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};u2=e("__VUE_INSTANCE_SETTERS__",n=>Is=n),Z5=e("__VUE_SSR_SETTERS__",n=>Zm=n)}const nb=t=>{const e=Is;return u2(t),t.scope.on(),()=>{t.scope.off(),u2(e)}},nL=()=>{Is&&Is.scope.off(),u2(null)};function WG(t){return t.vnode.shapeFlag&4}let Zm=!1;function rde(t,e=!1,n=!1){e&&Z5(e);const{props:r,children:s}=t.vnode,i=WG(t);Bue(t,r,i,e),que(t,s,n||e);const a=i?sde(t,e):void 0;return e&&Z5(!1),a}function sde(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,wue);const{setup:r}=n;if(r){Ku();const s=t.setupContext=r.length>1?YG(t):null,i=nb(t),a=Q1(r,t,0,[t.props,s]),o=MW(a);if(Xu(),i(),(o||t.sp)&&!Im(t)&&FD(t),o){if(a.then(nL,nL),e)return a.then(l=>{rL(t,l)}).catch(l=>{Z1(l,t,0)});t.asyncDep=a}else rL(t,a)}else GG(t)}function rL(t,e,n){Zt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Zn(e)&&(t.setupState=tG(e)),GG(t)}function GG(t,e,n){const r=t.type;t.render||(t.render=r.render||Tl);{const s=nb(t);Ku();try{kue(t)}finally{Xu(),s()}}}const ide={get(t,e){return Zs(t,"get",""),t[e]}};function YG(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,ide),slots:t.slots,emit:t.emit,expose:e}}function BS(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(tG(zt(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in jy)return jy[n](t)},has(e,n){return n in e||n in jy}})):t.proxy}function ade(t,e=!0){return Zt(t)?t.displayName||t.name:t.name||e&&t.__name}function ode(t){return Zt(t)&&"__vccOpts"in t}const Z=(t,e)=>nue(t,e,Zm);function pr(t,e,n){try{l2(-1);const r=arguments.length;return r===2?Zn(e)&&!Lt(e)?P0(e)?b(t,null,[e]):b(t,e):b(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&P0(n)&&(n=[n]),b(t,e,n))}finally{l2(1)}}const lde="3.5.25";/**
* @vue/runtime-dom v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let J5;const sL=typeof window!="undefined"&&window.trustedTypes;if(sL)try{J5=sL.createPolicy("vue",{createHTML:t=>t})}catch(t){}const KG=J5?t=>J5.createHTML(t):t=>t,ude="http://www.w3.org/2000/svg",dde="http://www.w3.org/1998/Math/MathML",_u=typeof document!="undefined"?document:null,iL=_u&&_u.createElement("template"),cde={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?_u.createElementNS(ude,t):e==="mathml"?_u.createElementNS(dde,t):n?_u.createElement(t,{is:n}):_u.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>_u.createTextNode(t),createComment:t=>_u.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_u.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const a=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{iL.innerHTML=KG(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const o=iL.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},wd="transition",iv="animation",I0=Symbol("_vtc"),XG={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},fde=fs({},fG,XG),pde=t=>(t.displayName="Transition",t.props=fde,t),zS=pde((t,{slots:e})=>pr(cue,hde(t),e)),nf=(t,e=[])=>{Lt(t)?t.forEach(n=>n(...e)):t&&t(...e)},aL=t=>t?Lt(t)?t.some(e=>e.length>1):t.length>1:!1;function hde(t){const e={};for(const F in t)F in XG||(e[F]=t[F]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:d=a,appearToClass:c=o,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,m=mde(s),g=m&&m[0],y=m&&m[1],{onBeforeEnter:x,onEnter:_,onEnterCancelled:k,onLeave:w,onLeaveCancelled:S,onBeforeAppear:C=x,onAppear:A=_,onAppearCancelled:M=k}=e,E=(F,L,z,N)=>{F._enterCancelled=N,rf(F,L?c:o),rf(F,L?d:a),z&&z()},P=(F,L)=>{F._isLeaving=!1,rf(F,f),rf(F,h),rf(F,p),L&&L()},I=F=>(L,z)=>{const N=F?A:_,q=()=>E(L,F,z);nf(N,[L,q]),oL(()=>{rf(L,F?l:i),iu(L,F?c:o),aL(N)||lL(L,r,g,q)})};return fs(e,{onBeforeEnter(F){nf(x,[F]),iu(F,i),iu(F,a)},onBeforeAppear(F){nf(C,[F]),iu(F,l),iu(F,d)},onEnter:I(!1),onAppear:I(!0),onLeave(F,L){F._isLeaving=!0;const z=()=>P(F,L);iu(F,f),F._enterCancelled?(iu(F,p),cL(F)):(cL(F),iu(F,p)),oL(()=>{F._isLeaving&&(rf(F,f),iu(F,h),aL(w)||lL(F,r,y,z))}),nf(w,[F,z])},onEnterCancelled(F){E(F,!1,void 0,!0),nf(k,[F])},onAppearCancelled(F){E(F,!0,void 0,!0),nf(M,[F])},onLeaveCancelled(F){P(F),nf(S,[F])}})}function mde(t){if(t==null)return null;if(Zn(t))return[UA(t.enter),UA(t.leave)];{const e=UA(t);return[e,e]}}function UA(t){return kle(t)}function iu(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[I0]||(t[I0]=new Set)).add(e)}function rf(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[I0];n&&(n.delete(e),n.size||(t[I0]=void 0))}function oL(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let gde=0;function lL(t,e,n,r){const s=t._endId=++gde,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:a,timeout:o,propCount:l}=vde(t,e);if(!a)return r();const d=a+"end";let c=0;const f=()=>{t.removeEventListener(d,p),i()},p=h=>{h.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},o+1),t.addEventListener(d,p)}function vde(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),s=r(`${wd}Delay`),i=r(`${wd}Duration`),a=uL(s,i),o=r(`${iv}Delay`),l=r(`${iv}Duration`),d=uL(o,l);let c=null,f=0,p=0;e===wd?a>0&&(c=wd,f=a,p=i.length):e===iv?d>0&&(c=iv,f=d,p=l.length):(f=Math.max(a,d),c=f>0?a>d?wd:iv:null,p=c?c===wd?i.length:l.length:0);const h=c===wd&&/\b(?:transform|all)(?:,|$)/.test(r(`${wd}Property`).toString());return{type:c,timeout:f,propCount:p,hasTransform:h}}function uL(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>dL(n)+dL(t[r])))}function dL(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function cL(t){return(t?t.ownerDocument:document).body.offsetHeight}function yde(t,e,n){const r=t[I0];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const d2=Symbol("_vod"),QG=Symbol("_vsh"),lt={name:"show",beforeMount(t,{value:e},{transition:n}){t[d2]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):av(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),av(t,!0),r.enter(t)):r.leave(t,()=>{av(t,!1)}):av(t,e))},beforeUnmount(t,{value:e}){av(t,e)}};function av(t,e){t.style.display=e?t[d2]:"none",t[QG]=!e}const bde=Symbol(""),xde=/(?:^|;)\s*display\s*:/;function _de(t,e,n){const r=t.style,s=Tr(n);let i=!1;if(n&&!s){if(e)if(Tr(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&uw(r,o,"")}else for(const a in e)n[a]==null&&uw(r,a,"");for(const a in n)a==="display"&&(i=!0),uw(r,a,n[a])}else if(s){if(e!==n){const a=r[bde];a&&(n+=";"+a),r.cssText=n,i=xde.test(n)}}else e&&t.removeAttribute("style");d2 in t&&(t[d2]=i?r.display:"",t[QG]&&(r.display="none"))}const fL=/\s*!important$/;function uw(t,e,n){if(Lt(n))n.forEach(r=>uw(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=wde(t,e);fL.test(n)?t.setProperty(fd(r),n.replace(fL,""),"important"):t[r]=n}}const pL=["Webkit","Moz","ms"],HA={};function wde(t,e){const n=HA[e];if(n)return n;let r=Si(e);if(r!=="filter"&&r in t)return HA[e]=r;r=$S(r);for(let s=0;s<pL.length;s++){const i=pL[s]+r;if(i in t)return HA[e]=i}return e}const hL="http://www.w3.org/1999/xlink";function mL(t,e,n,r,s,i=Mle(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(hL,e.slice(6,e.length)):t.setAttributeNS(hL,e,n):n==null||i&&!PW(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Ro(n)?String(n):n)}function gL(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?KG(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(o!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=PW(n):n==null&&o==="string"?(n="",a=!0):o==="number"&&(n=0,a=!0)}try{t[e]=n}catch(o){}a&&t.removeAttribute(s||e)}function Du(t,e,n,r){t.addEventListener(e,n,r)}function kde(t,e,n,r){t.removeEventListener(e,n,r)}const vL=Symbol("_vei");function Sde(t,e,n,r,s=null){const i=t[vL]||(t[vL]={}),a=i[e];if(r&&a)a.value=r;else{const[o,l]=Cde(e);if(r){const d=i[e]=$de(r,s);Du(t,o,d,l)}else a&&(kde(t,o,a,l),i[e]=void 0)}}const yL=/(?:Once|Passive|Capture)$/;function Cde(t){let e;if(yL.test(t)){e={};let r;for(;r=t.match(yL);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):fd(t.slice(2)),e]}let qA=0;const Ade=Promise.resolve(),Tde=()=>qA||(Ade.then(()=>qA=0),qA=Date.now());function $de(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Io(Mde(r,n.value),e,5,[r])};return n.value=t,n.attached=Tde(),n}function Mde(t,e){if(Lt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const bL=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Ede=(t,e,n,r,s,i)=>{const a=s==="svg";e==="class"?yde(t,r,a):e==="style"?_de(t,n,r):CS(e)?RD(e)||Sde(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Dde(t,e,r,a))?(gL(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&mL(t,e,r,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Tr(r))?gL(t,Si(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),mL(t,e,r,a))};function Dde(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&bL(e)&&Zt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return bL(e)&&Tr(n)?!1:e in t}const $c=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Lt(e)?n=>sw(e,n):e};function Rde(t){t.target.composing=!0}function xL(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Xa=Symbol("_assign");function _L(t,e,n){return e&&(t=t.trim()),n&&(t=MS(t)),t}const Rt={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Xa]=$c(s);const i=r||s.props&&s.props.type==="number";Du(t,e?"change":"input",a=>{a.target.composing||t[Xa](_L(t.value,n,i))}),(n||i)&&Du(t,"change",()=>{t.value=_L(t.value,n,i)}),e||(Du(t,"compositionstart",Rde),Du(t,"compositionend",xL),Du(t,"change",xL))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(t[Xa]=$c(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?MS(t.value):t.value,l=e==null?"":e;o!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Rn={deep:!0,created(t,e,n){t[Xa]=$c(n),Du(t,"change",()=>{const r=t._modelValue,s=Jm(t),i=t.checked,a=t[Xa];if(Lt(r)){const o=ID(r,s),l=o!==-1;if(i&&!l)a(r.concat(s));else if(!i&&l){const d=[...r];d.splice(o,1),a(d)}}else if(Mg(r)){const o=new Set(r);i?o.add(s):o.delete(s),a(o)}else a(ZG(t,i))})},mounted:wL,beforeUpdate(t,e,n){t[Xa]=$c(n),wL(t,e,n)}};function wL(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(Lt(e))s=ID(e,r.props.value)>-1;else if(Mg(e))s=e.has(r.props.value);else{if(e===n)return;s=jp(e,ZG(t,!0))}t.checked!==s&&(t.checked=s)}const Js={created(t,{value:e},n){t.checked=jp(e,n.props.value),t[Xa]=$c(n),Du(t,"change",()=>{t[Xa](Jm(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Xa]=$c(r),e!==n&&(t.checked=jp(e,r.props.value))}},vn={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Mg(e);Du(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>n?MS(Jm(a)):Jm(a));t[Xa](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,nr(()=>{t._assigning=!1})}),t[Xa]=$c(r)},mounted(t,{value:e}){kL(t,e)},beforeUpdate(t,e,n){t[Xa]=$c(n)},updated(t,{value:e}){t._assigning||kL(t,e)}};function kL(t,e){const n=t.multiple,r=Lt(e);if(!(n&&!r&&!Mg(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],o=Jm(a);if(n)if(r){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(d=>String(d)===String(o)):a.selected=ID(e,o)>-1}else a.selected=e.has(o);else if(jp(Jm(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Jm(t){return"_value"in t?t._value:t.value}function ZG(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Pde={created(t,e,n){tx(t,e,n,null,"created")},mounted(t,e,n){tx(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){tx(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){tx(t,e,n,r,"updated")}};function Ide(t,e){switch(t){case"SELECT":return vn;case"TEXTAREA":return Rt;default:switch(e){case"checkbox":return Rn;case"radio":return Js;default:return Rt}}}function tx(t,e,n,r,s){const a=Ide(t.tagName,n.props&&n.props.type)[s];a&&a(t,e,n,r)}const Ode=["ctrl","shift","alt","meta"],Lde={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Ode.some(n=>t[`${n}Key`]&&!e.includes(n))},ut=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=Lde[e[a]];if(o&&o(s,e))return}return t(s,...i)})},Vde={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ru=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=fd(s.key);if(e.some(a=>a===i||Vde[a]===i))return t(s)})},Nde=fs({patchProp:Ede},cde);let SL;function JG(){return SL||(SL=Gue(Nde))}const CL=(...t)=>{JG().render(...t)},qD=(...t)=>{const e=JG().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Fde(r);if(!s)return;const i=e._component;!Zt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,jde(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function jde(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Fde(t){return Tr(t)?document.querySelector(t):t}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let eY;const US=t=>eY=t,tY=Symbol();function e$(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var By;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(By||(By={}));function Bde(){const t=DS(!0),e=t.run(()=>Q({}));let n=[],r=[];const s=zt({install(i){US(s),s._a=i,i.provide(tY,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const nY=()=>{};function AL(t,e,n,r=nY){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&K1()&&X1(s),s}function Mh(t,...e){t.forEach(n=>{n(...e)})}const zde=t=>t(),TL=Symbol(),WA=Symbol();function t$(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];e$(s)&&e$(r)&&t.hasOwnProperty(n)&&!zn(r)&&!Bu(r)?t[n]=t$(s,r):t[n]=r}return t}const Ude=Symbol();function Hde(t){return!e$(t)||!Object.prototype.hasOwnProperty.call(t,Ude)}const{assign:Ld}=Object;function qde(t){return!!(zn(t)&&t.effect)}function Wde(t,e,n,r){const{state:s,actions:i,getters:a}=e,o=n.state.value[t];let l;function d(){o||(n.state.value[t]=s?s():{});const c=no(n.state.value[t]);return Ld(c,i,Object.keys(a||{}).reduce((f,p)=>(f[p]=zt(Z(()=>{US(n);const h=n._s.get(t);return a[p].call(h,h)})),f),{}))}return l=rY(t,d,e,n,r,!0),l}function rY(t,e,n={},r,s,i){let a;const o=Ld({actions:{}},n),l={deep:!0};let d,c,f=new Set,p=new Set,h;const m=r.state.value[t];!i&&!m&&(r.state.value[t]={}),Q({});let g;function y(M){let E;d=c=!1,typeof M=="function"?(M(r.state.value[t]),E={type:By.patchFunction,storeId:t,events:h}):(t$(r.state.value[t],M),E={type:By.patchObject,payload:M,storeId:t,events:h});const P=g=Symbol();nr().then(()=>{g===P&&(d=!0)}),c=!0,Mh(f,E,r.state.value[t])}const x=i?function(){const{state:E}=n,P=E?E():{};this.$patch(I=>{Ld(I,P)})}:nY;function _(){a.stop(),f.clear(),p.clear(),r._s.delete(t)}const k=(M,E="")=>{if(TL in M)return M[WA]=E,M;const P=function(){US(r);const I=Array.from(arguments),F=new Set,L=new Set;function z(V){F.add(V)}function N(V){L.add(V)}Mh(p,{args:I,name:P[WA],store:S,after:z,onError:N});let q;try{q=M.apply(this&&this.$id===t?this:S,I)}catch(V){throw Mh(L,V),V}return q instanceof Promise?q.then(V=>(Mh(F,V),V)).catch(V=>(Mh(L,V),Promise.reject(V))):(Mh(F,q),q)};return P[TL]=!0,P[WA]=E,P},w={_p:r,$id:t,$onAction:AL.bind(null,p),$patch:y,$reset:x,$subscribe(M,E={}){const P=AL(f,M,E.detached,()=>I()),I=a.run(()=>et(()=>r.state.value[t],F=>{(E.flush==="sync"?c:d)&&M({storeId:t,type:By.direct,events:h},F)},Ld({},l,E)));return P},$dispose:_},S=Jt(w);r._s.set(t,S);const A=(r._a&&r._a.runWithContext||zde)(()=>r._e.run(()=>(a=DS()).run(()=>e({action:k}))));for(const M in A){const E=A[M];if(zn(E)&&!qde(E)||Bu(E))i||(m&&Hde(E)&&(zn(E)?E.value=m[M]:t$(E,m[M])),r.state.value[t][M]=E);else if(typeof E=="function"){const P=k(E,M);A[M]=P,o.actions[M]=E}}return Ld(S,A),Ld(un(S),A),Object.defineProperty(S,"$state",{get:()=>r.state.value[t],set:M=>{y(E=>{Ld(E,M)})}}),r._p.forEach(M=>{Ld(S,a.run(()=>M({store:S,app:r._a,pinia:r,options:o})))}),m&&i&&n.hydrate&&n.hydrate(S.$state,m),d=!0,c=!0,S}/*! #__NO_SIDE_EFFECTS__ */function Yl(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(a,o){const l=Eue();return a=a||(l?Qn(tY,null):null),a&&US(a),a=eY,a._s.has(t)||(s?rY(t,e,r,a):Wde(t,r,a)),a._s.get(t)}return i.$id=t,i}const Gde="modulepreload",Yde=function(t){return"/assets/mkaguzi/frontend/"+t},$L={},Fi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Yde(l),l in $L)return;$L[l]=!0;const d=l.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":Gde,d||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),d)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const cm=typeof document!="undefined";function sY(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Kde(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&sY(t.default)}const Fn=Object.assign;function GA(t,e){const n={};for(const r in e){const s=e[r];n[r]=Lo(s)?s.map(t):t(s)}return n}const zy=()=>{},Lo=Array.isArray;function ML(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const iY=/#/g,Xde=/&/g,Qde=/\//g,Zde=/=/g,Jde=/\?/g,aY=/\+/g,ece=/%5B/g,tce=/%5D/g,oY=/%5E/g,nce=/%60/g,lY=/%7B/g,rce=/%7C/g,uY=/%7D/g,sce=/%20/g;function WD(t){return t==null?"":encodeURI(""+t).replace(rce,"|").replace(ece,"[").replace(tce,"]")}function ice(t){return WD(t).replace(lY,"{").replace(uY,"}").replace(oY,"^")}function n$(t){return WD(t).replace(aY,"%2B").replace(sce,"+").replace(iY,"%23").replace(Xde,"%26").replace(nce,"`").replace(lY,"{").replace(uY,"}").replace(oY,"^")}function ace(t){return n$(t).replace(Zde,"%3D")}function oce(t){return WD(t).replace(iY,"%23").replace(Jde,"%3F")}function lce(t){return oce(t).replace(Qde,"%2F")}function O0(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch(e){}return""+t}const uce=/\/$/,dce=t=>t.replace(uce,"");function YA(t,e,n="/"){let r,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return l=o>=0&&l>o?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,o>0?o:e.length),s=t(i.slice(1))),o>=0&&(r=r||e.slice(0,o),a=e.slice(o,e.length)),r=hce(r!=null?r:e,n),{fullPath:r+i+a,path:r,query:s,hash:O0(a)}}function cce(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function EL(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function fce(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&eg(e.matched[r],n.matched[s])&&dY(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function eg(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function dY(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!pce(t[n],e[n]))return!1;return!0}function pce(t,e){return Lo(t)?DL(t,e):Lo(e)?DL(e,t):t===e}function DL(t,e){return Lo(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function hce(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,o;for(a=0;a<r.length;a++)if(o=r[a],o!==".")if(o==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const kd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let r$=function(t){return t.pop="pop",t.push="push",t}({}),KA=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function mce(t){if(!t)if(cm){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),dce(t)}const gce=/^[^#]+#/;function vce(t,e){return t.replace(gce,"#")+e}function yce(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const HS=()=>({left:window.scrollX,top:window.scrollY});function bce(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=yce(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function RL(t,e){return(history.state?history.state.position-e:-1)+t}const s$=new Map;function xce(t,e){s$.set(t,e)}function _ce(t){const e=s$.get(t);return s$.delete(t),e}function wce(t){return typeof t=="string"||t&&typeof t=="object"}function cY(t){return typeof t=="string"||typeof t=="symbol"}let Rr=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const fY=Symbol("");Rr.MATCHER_NOT_FOUND+"",Rr.NAVIGATION_GUARD_REDIRECT+"",Rr.NAVIGATION_ABORTED+"",Rr.NAVIGATION_CANCELLED+"",Rr.NAVIGATION_DUPLICATED+"";function tg(t,e){return Fn(new Error,{type:t,[fY]:!0},e)}function au(t,e){return t instanceof Error&&fY in t&&(e==null||!!(t.type&e))}const kce=["params","query","hash"];function Sce(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of kce)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function Cce(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(aY," "),i=s.indexOf("="),a=O0(i<0?s:s.slice(0,i)),o=i<0?null:O0(s.slice(i+1));if(a in e){let l=e[a];Lo(l)||(l=e[a]=[l]),l.push(o)}else e[a]=o}return e}function PL(t){let e="";for(let n in t){const r=t[n];if(n=ace(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Lo(r)?r.map(s=>s&&n$(s)):[r&&n$(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function Ace(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Lo(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const Tce=Symbol(""),IL=Symbol(""),qS=Symbol(""),GD=Symbol(""),i$=Symbol("");function ov(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Hd(t,e,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const d=p=>{p===!1?l(tg(Rr.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):wce(p)?l(tg(Rr.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(a&&r.enterCallbacks[s]===a&&typeof p=="function"&&a.push(p),o())},c=i(()=>t.call(r&&r.instances[s],e,n,d));let f=Promise.resolve(c);t.length<3&&(f=f.then(d)),f.catch(p=>l(p))})}function XA(t,e,n,r,s=i=>i()){const i=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(sY(l)){const d=(l.__vccOpts||l)[e];d&&i.push(Hd(d,n,r,a,o,s))}else{let d=l();i.push(()=>d.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const f=Kde(c)?c.default:c;a.mods[o]=c,a.components[o]=f;const p=(f.__vccOpts||f)[e];return p&&Hd(p,n,r,a,o,s)()}))}}return i}function $ce(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(d=>eg(d,o))?r.push(o):n.push(o));const l=t.matched[a];l&&(e.matched.find(d=>eg(d,l))||s.push(l))}return[n,r,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Mce=()=>location.protocol+"//"+location.host;function pY(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,o=s.slice(a);return o[0]!=="/"&&(o="/"+o),EL(o,"")}return EL(n,t)+r+s}function Ece(t,e,n,r){let s=[],i=[],a=null;const o=({state:p})=>{const h=pY(t,location),m=n.value,g=e.value;let y=0;if(p){if(n.value=h,e.value=p,a&&a===m){a=null;return}y=g?p.position-g.position:0}else r(h);s.forEach(x=>{x(n.value,m,{delta:y,type:r$.pop,direction:y?y>0?KA.forward:KA.back:KA.unknown})})};function l(){a=n.value}function d(p){s.push(p);const h=()=>{const m=s.indexOf(p);m>-1&&s.splice(m,1)};return i.push(h),h}function c(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Fn({},p.state,{scroll:HS()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",o),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",o),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:l,listen:d,destroy:f}}function OL(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?HS():null}}function Dce(t){const{history:e,location:n}=window,r={value:pY(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,d,c){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:Mce()+t+l;try{e[c?"replaceState":"pushState"](d,"",p),s.value=d}catch(h){console.error(h),n[c?"replace":"assign"](p)}}function a(l,d){i(l,Fn({},e.state,OL(s.value.back,l,s.value.forward,!0),d,{position:s.value.position}),!0),r.value=l}function o(l,d){const c=Fn({},s.value,e.state,{forward:l,scroll:HS()});i(c.current,c,!0),i(l,Fn({},OL(r.value,l,null),{position:c.position+1},d),!1),r.value=l}return{location:r,state:s,push:o,replace:a}}function Rce(t){t=mce(t);const e=Dce(t),n=Ece(t,e.state,e.location,e.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=Fn({location:"",base:t,go:r,createHref:vce.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Jf=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var ns=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(ns||{});const Pce={type:Jf.Static,value:""},Ice=/[a-zA-Z0-9_]/;function Oce(t){if(!t)return[[]];if(t==="/")return[[Pce]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${d}": ${h}`)}let n=ns.Static,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,d="",c="";function f(){d&&(n===ns.Static?i.push({type:Jf.Static,value:d}):n===ns.Param||n===ns.ParamRegExp||n===ns.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Jf.Param,value:d,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),d="")}function p(){d+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&n!==ns.ParamRegExp){r=n,n=ns.EscapeNext;continue}switch(n){case ns.Static:l==="/"?(d&&f(),a()):l===":"?(f(),n=ns.Param):p();break;case ns.EscapeNext:p(),n=r;break;case ns.Param:l==="("?n=ns.ParamRegExp:Ice.test(l)?p():(f(),n=ns.Static,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case ns.ParamRegExp:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=ns.ParamRegExpEnd:c+=l;break;case ns.ParamRegExpEnd:f(),n=ns.Static,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:e("Unknown state");break}}return n===ns.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),f(),a(),s}const LL="[^/]+?",Lce={sensitive:!1,strict:!1,start:!0,end:!0};var fi=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(fi||{});const Vce=/[.+*?^${}()[\]/\\]/g;function Nce(t,e){const n=Fn({},Lce,e),r=[];let s=n.start?"^":"";const i=[];for(const d of t){const c=d.length?[]:[fi.Root];n.strict&&!d.length&&(s+="/");for(let f=0;f<d.length;f++){const p=d[f];let h=fi.Segment+(n.sensitive?fi.BonusCaseSensitive:0);if(p.type===Jf.Static)f||(s+="/"),s+=p.value.replace(Vce,"\\$&"),h+=fi.Static;else if(p.type===Jf.Param){const{value:m,repeatable:g,optional:y,regexp:x}=p;i.push({name:m,repeatable:g,optional:y});const _=x||LL;if(_!==LL){h+=fi.BonusCustomRegExp;try{`${_}`}catch(w){throw new Error(`Invalid custom RegExp for param "${m}" (${_}): `+w.message)}}let k=g?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;f||(k=y&&d.length<2?`(?:/${k})`:"/"+k),y&&(k+="?"),s+=k,h+=fi.Dynamic,y&&(h+=fi.BonusOptional),g&&(h+=fi.BonusRepeatable),_===".*"&&(h+=fi.BonusWildcard)}c.push(h)}r.push(c)}if(n.strict&&n.end){const d=r.length-1;r[d][r[d].length-1]+=fi.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function o(d){const c=d.match(a),f={};if(!c)return null;for(let p=1;p<c.length;p++){const h=c[p]||"",m=i[p-1];f[m.name]=h&&m.repeatable?h.split("/"):h}return f}function l(d){let c="",f=!1;for(const p of t){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const h of p)if(h.type===Jf.Static)c+=h.value;else if(h.type===Jf.Param){const{value:m,repeatable:g,optional:y}=h,x=m in d?d[m]:"";if(Lo(x)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const _=Lo(x)?x.join("/"):x;if(!_)if(y)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);c+=_}}return c||"/"}return{re:a,score:r,keys:i,parse:o,stringify:l}}function jce(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===fi.Static+fi.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===fi.Static+fi.Segment?1:-1:0}function hY(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=jce(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(VL(r))return 1;if(VL(s))return-1}return s.length-r.length}function VL(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Fce={strict:!1,end:!0,sensitive:!1};function Bce(t,e,n){const r=Nce(Oce(t.path),n),s=Fn(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function zce(t,e){const n=[],r=new Map;e=ML(Fce,e);function s(f){return r.get(f)}function i(f,p,h){const m=!h,g=jL(f);g.aliasOf=h&&h.record;const y=ML(e,f),x=[g];if("alias"in f){const w=typeof f.alias=="string"?[f.alias]:f.alias;for(const S of w)x.push(jL(Fn({},g,{components:h?h.record.components:g.components,path:S,aliasOf:h?h.record:g})))}let _,k;for(const w of x){const{path:S}=w;if(p&&S[0]!=="/"){const C=p.record.path,A=C[C.length-1]==="/"?"":"/";w.path=p.record.path+(S&&A+S)}if(_=Bce(w,p,y),h?h.alias.push(_):(k=k||_,k!==_&&k.alias.push(_),m&&f.name&&!FL(_)&&a(f.name)),mY(_)&&l(_),g.children){const C=g.children;for(let A=0;A<C.length;A++)i(C[A],_,h&&h.children[A])}h=h||_}return k?()=>{a(k)}:zy}function a(f){if(cY(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(a),p.alias.forEach(a))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function o(){return n}function l(f){const p=qce(f,n);n.splice(p,0,f),f.record.name&&!FL(f)&&r.set(f.record.name,f)}function d(f,p){let h,m={},g,y;if("name"in f&&f.name){if(h=r.get(f.name),!h)throw tg(Rr.MATCHER_NOT_FOUND,{location:f});y=h.record.name,m=Fn(NL(p.params,h.keys.filter(k=>!k.optional).concat(h.parent?h.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),f.params&&NL(f.params,h.keys.map(k=>k.name))),g=h.stringify(m)}else if(f.path!=null)g=f.path,h=n.find(k=>k.re.test(g)),h&&(m=h.parse(g),y=h.record.name);else{if(h=p.name?r.get(p.name):n.find(k=>k.re.test(p.path)),!h)throw tg(Rr.MATCHER_NOT_FOUND,{location:f,currentLocation:p});y=h.record.name,m=Fn({},p.params,f.params),g=h.stringify(m)}const x=[];let _=h;for(;_;)x.unshift(_.record),_=_.parent;return{name:y,path:g,params:m,matched:x,meta:Hce(x)}}t.forEach(f=>i(f));function c(){n.length=0,r.clear()}return{addRoute:i,resolve:d,removeRoute:a,clearRoutes:c,getRoutes:o,getRecordMatcher:s}}function NL(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function jL(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Uce(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Uce(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function FL(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Hce(t){return t.reduce((e,n)=>Fn(e,n.meta),{})}function qce(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;hY(t,e[i])<0?r=i:n=i+1}const s=Wce(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function Wce(t){let e=t;for(;e=e.parent;)if(mY(e)&&hY(t,e)===0)return e}function mY({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function BL(t){const e=Qn(qS),n=Qn(GD),r=Z(()=>{const l=v(t.to);return e.resolve(l)}),s=Z(()=>{const{matched:l}=r.value,{length:d}=l,c=l[d-1],f=n.matched;if(!c||!f.length)return-1;const p=f.findIndex(eg.bind(null,c));if(p>-1)return p;const h=zL(l[d-2]);return d>1&&zL(c)===h&&f[f.length-1].path!==h?f.findIndex(eg.bind(null,l[d-2])):p}),i=Z(()=>s.value>-1&&Qce(n.params,r.value.params)),a=Z(()=>s.value>-1&&s.value===n.matched.length-1&&dY(n.params,r.value.params));function o(l={}){if(Xce(l)){const d=e[v(t.replace)?"replace":"push"](v(t.to)).catch(zy);return t.viewTransition&&typeof document!="undefined"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:Z(()=>r.value.href),isActive:i,isExactActive:a,navigate:o}}function Gce(t){return t.length===1?t[0]:t}const Yce=Je({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:BL,setup(t,{slots:e}){const n=Jt(BL(t)),{options:r}=Qn(qS),s=Z(()=>({[UL(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[UL(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&Gce(e.default(n));return t.custom?i:pr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Kce=Yce;function Xce(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Qce(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Lo(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function zL(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const UL=(t,e,n)=>t!=null?t:e!=null?e:n,Zce=Je({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Qn(i$),s=Z(()=>t.route||r.value),i=Qn(IL,0),a=Z(()=>{let d=v(i);const{matched:c}=s.value;let f;for(;(f=c[d])&&!f.components;)d++;return d}),o=Z(()=>s.value.matched[a.value]);_i(IL,Z(()=>a.value+1)),_i(Tce,o),_i(i$,s);const l=Q();return et(()=>[l.value,o.value,t.name],([d,c,f],[p,h,m])=>{c&&(c.instances[f]=d,h&&h!==c&&d&&d===p&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),d&&c&&(!h||!eg(c,h)||!p)&&(c.enterCallbacks[f]||[]).forEach(g=>g(d))},{flush:"post"}),()=>{const d=s.value,c=t.name,f=o.value,p=f&&f.components[c];if(!p)return HL(n.default,{Component:p,route:d});const h=f.props[c],m=h?h===!0?d.params:typeof h=="function"?h(d):h:null,y=pr(p,Fn({},m,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return HL(n.default,{Component:y,route:d})||y}}});function HL(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Jce=Zce;function efe(t){const e=zce(t.routes,t),n=t.parseQuery||Cce,r=t.stringifyQuery||PL,s=t.history,i=ov(),a=ov(),o=ov(),l=Mo(kd);let d=kd;cm&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=GA.bind(null,oe=>""+oe),f=GA.bind(null,lce),p=GA.bind(null,O0);function h(oe,re){let te,K;return cY(oe)?(te=e.getRecordMatcher(oe),K=re):K=oe,e.addRoute(K,te)}function m(oe){const re=e.getRecordMatcher(oe);re&&e.removeRoute(re)}function g(){return e.getRoutes().map(oe=>oe.record)}function y(oe){return!!e.getRecordMatcher(oe)}function x(oe,re){if(re=Fn({},re||l.value),typeof oe=="string"){const B=YA(n,oe,re.path),ae=e.resolve({path:B.path},re),be=s.createHref(B.fullPath);return Fn(B,ae,{params:p(ae.params),hash:O0(B.hash),redirectedFrom:void 0,href:be})}let te;if(oe.path!=null)te=Fn({},oe,{path:YA(n,oe.path,re.path).path});else{const B=Fn({},oe.params);for(const ae in B)B[ae]==null&&delete B[ae];te=Fn({},oe,{params:f(B)}),re.params=f(re.params)}const K=e.resolve(te,re),le=oe.hash||"";K.params=c(p(K.params));const H=cce(r,Fn({},oe,{hash:ice(le),path:K.path})),Y=s.createHref(H);return Fn({fullPath:H,hash:le,query:r===PL?Ace(oe.query):oe.query||{}},K,{redirectedFrom:void 0,href:Y})}function _(oe){return typeof oe=="string"?YA(n,oe,l.value.path):Fn({},oe)}function k(oe,re){if(d!==oe)return tg(Rr.NAVIGATION_CANCELLED,{from:re,to:oe})}function w(oe){return A(oe)}function S(oe){return w(Fn(_(oe),{replace:!0}))}function C(oe,re){const te=oe.matched[oe.matched.length-1];if(te&&te.redirect){const{redirect:K}=te;let le=typeof K=="function"?K(oe,re):K;return typeof le=="string"&&(le=le.includes("?")||le.includes("#")?le=_(le):{path:le},le.params={}),Fn({query:oe.query,hash:oe.hash,params:le.path!=null?{}:oe.params},le)}}function A(oe,re){const te=d=x(oe),K=l.value,le=oe.state,H=oe.force,Y=oe.replace===!0,B=C(te,K);if(B)return A(Fn(_(B),{state:typeof B=="object"?Fn({},le,B.state):le,force:H,replace:Y}),re||te);const ae=te;ae.redirectedFrom=re;let be;return!H&&fce(r,K,te)&&(be=tg(Rr.NAVIGATION_DUPLICATED,{to:ae,from:K}),U(K,K,!0,!1)),(be?Promise.resolve(be):P(ae,K)).catch(fe=>au(fe)?au(fe,Rr.NAVIGATION_GUARD_REDIRECT)?fe:j(fe):O(fe,ae,K)).then(fe=>{if(fe){if(au(fe,Rr.NAVIGATION_GUARD_REDIRECT))return A(Fn({replace:Y},_(fe.to),{state:typeof fe.to=="object"?Fn({},le,fe.to.state):le,force:H}),re||ae)}else fe=F(ae,K,!0,Y,le);return I(ae,K,fe),fe})}function M(oe,re){const te=k(oe,re);return te?Promise.reject(te):Promise.resolve()}function E(oe){const re=ie.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext(oe):oe()}function P(oe,re){let te;const[K,le,H]=$ce(oe,re);te=XA(K.reverse(),"beforeRouteLeave",oe,re);for(const B of K)B.leaveGuards.forEach(ae=>{te.push(Hd(ae,oe,re))});const Y=M.bind(null,oe,re);return te.push(Y),ce(te).then(()=>{te=[];for(const B of i.list())te.push(Hd(B,oe,re));return te.push(Y),ce(te)}).then(()=>{te=XA(le,"beforeRouteUpdate",oe,re);for(const B of le)B.updateGuards.forEach(ae=>{te.push(Hd(ae,oe,re))});return te.push(Y),ce(te)}).then(()=>{te=[];for(const B of H)if(B.beforeEnter)if(Lo(B.beforeEnter))for(const ae of B.beforeEnter)te.push(Hd(ae,oe,re));else te.push(Hd(B.beforeEnter,oe,re));return te.push(Y),ce(te)}).then(()=>(oe.matched.forEach(B=>B.enterCallbacks={}),te=XA(H,"beforeRouteEnter",oe,re,E),te.push(Y),ce(te))).then(()=>{te=[];for(const B of a.list())te.push(Hd(B,oe,re));return te.push(Y),ce(te)}).catch(B=>au(B,Rr.NAVIGATION_CANCELLED)?B:Promise.reject(B))}function I(oe,re,te){o.list().forEach(K=>E(()=>K(oe,re,te)))}function F(oe,re,te,K,le){const H=k(oe,re);if(H)return H;const Y=re===kd,B=cm?history.state:{};te&&(K||Y?s.replace(oe.fullPath,Fn({scroll:Y&&B&&B.scroll},le)):s.push(oe.fullPath,le)),l.value=oe,U(oe,re,te,Y),j()}let L;function z(){L||(L=s.listen((oe,re,te)=>{if(!ne.listening)return;const K=x(oe),le=C(K,ne.currentRoute.value);if(le){A(Fn(le,{replace:!0,force:!0}),K).catch(zy);return}d=K;const H=l.value;cm&&xce(RL(H.fullPath,te.delta),HS()),P(K,H).catch(Y=>au(Y,Rr.NAVIGATION_ABORTED|Rr.NAVIGATION_CANCELLED)?Y:au(Y,Rr.NAVIGATION_GUARD_REDIRECT)?(A(Fn(_(Y.to),{force:!0}),K).then(B=>{au(B,Rr.NAVIGATION_ABORTED|Rr.NAVIGATION_DUPLICATED)&&!te.delta&&te.type===r$.pop&&s.go(-1,!1)}).catch(zy),Promise.reject()):(te.delta&&s.go(-te.delta,!1),O(Y,K,H))).then(Y=>{Y=Y||F(K,H,!1),Y&&(te.delta&&!au(Y,Rr.NAVIGATION_CANCELLED)?s.go(-te.delta,!1):te.type===r$.pop&&au(Y,Rr.NAVIGATION_ABORTED|Rr.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),I(K,H,Y)}).catch(zy)}))}let N=ov(),q=ov(),V;function O(oe,re,te){j(oe);const K=q.list();return K.length?K.forEach(le=>le(oe,re,te)):console.error(oe),Promise.reject(oe)}function X(){return V&&l.value!==kd?Promise.resolve():new Promise((oe,re)=>{N.add([oe,re])})}function j(oe){return V||(V=!oe,z(),N.list().forEach(([re,te])=>oe?te(oe):re()),N.reset()),oe}function U(oe,re,te,K){const{scrollBehavior:le}=t;if(!cm||!le)return Promise.resolve();const H=!te&&_ce(RL(oe.fullPath,0))||(K||!te)&&history.state&&history.state.scroll||null;return nr().then(()=>le(oe,re,H)).then(Y=>Y&&bce(Y)).catch(Y=>O(Y,oe,re))}const G=oe=>s.go(oe);let ee;const ie=new Set,ne={currentRoute:l,listening:!0,addRoute:h,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:g,resolve:x,options:t,push:w,replace:S,go:G,back:()=>G(-1),forward:()=>G(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:q.add,isReady:X,install(oe){oe.component("RouterLink",Kce),oe.component("RouterView",Jce),oe.config.globalProperties.$router=ne,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>v(l)}),cm&&!ee&&l.value===kd&&(ee=!0,w(s.location).catch(K=>{}));const re={};for(const K in kd)Object.defineProperty(re,K,{get:()=>l.value[K],enumerable:!0});oe.provide(qS,ne),oe.provide(GD,JW(re)),oe.provide(i$,l);const te=oe.unmount;ie.add(oe),oe.unmount=function(){ie.delete(oe),ie.size<1&&(d=kd,L&&L(),L=null,l.value=kd,ee=!1,V=!1),te()}}};function ce(oe){return oe.reduce((re,te)=>re.then(()=>E(te)),Promise.resolve())}return ne}function _n(){return Qn(qS)}function ta(t){return Qn(GD)}/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tfe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),nfe=t=>{const e=tfe(t);return e.charAt(0).toUpperCase()+e.slice(1)},rfe=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),WL=t=>t==="";/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sfe=(c,{slots:d})=>{var f=c,{name:t,iconNode:e,absoluteStrokeWidth:n,"absolute-stroke-width":r,strokeWidth:s,"stroke-width":i,size:a=lv.width,color:o=lv.stroke}=f,l=$s(f,["name","iconNode","absoluteStrokeWidth","absolute-stroke-width","strokeWidth","stroke-width","size","color"]);return pr("svg",ze(ge(ge({},lv),l),{width:a,height:a,stroke:o,"stroke-width":WL(n)||WL(r)||n===!0||r===!0?Number(s||i||lv["stroke-width"])*24/Number(a):s||i||lv["stroke-width"],class:rfe("lucide",l.class,...t?[`lucide-${qL(nfe(t))}-icon`,`lucide-${qL(t)}`]:["lucide-icon"])}),[...e.map(p=>pr(...p)),...d.default?[d.default()]:[]])};/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(t,e)=>(n,{slots:r,attrs:s})=>pr(sfe,ze(ge(ge({},s),n),{iconNode:e,name:t}),r);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=Be("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=Be("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Be("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Be("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ife=Be("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const afe=Be("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Be("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ofe=Be("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=Be("book-user",[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Be("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=Be("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=Be("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=Be("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lfe=Be("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=Be("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=Be("calendar-range",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Be("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ufe=Be("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=Be("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=Be("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=Be("chart-no-axes-column",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dfe=Be("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cfe=Be("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Be("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Be("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=Be("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Be("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=Be("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Be("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Be("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Be("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=Be("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=Be("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=Be("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=Be("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=Be("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=Be("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=Be("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=Be("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=Be("cog",[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=Be("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ffe=Be("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pfe=Be("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Be("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=Be("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Be("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hfe=Be("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Be("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=Be("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Be("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=Be("file-chart-column-increasing",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Be("file-check-corner",[["path",{d:"M10.5 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v6",key:"g5mvt7"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m14 20 2 2 4-4",key:"15kota"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=Be("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=Be("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mfe=Be("file-exclamation-point",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gfe=Be("file-pen",[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Be("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=Be("file-x",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vfe=Be("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yfe=Be("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bfe=Be("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=Be("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=Be("funnel-x",[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=Be("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=Be("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xfe=Be("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=Be("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _fe=Be("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wfe=Be("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kfe=Be("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=Be("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=Be("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sfe=Be("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=Be("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cfe=Be("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=Be("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=Be("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tfe=Be("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=Be("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=Be("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=Be("list-checks",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $fe=Be("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=Be("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=Be("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=Be("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=Be("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=Be("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mfe=Be("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=Be("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=Be("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Be("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=Be("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Efe=Be("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=Be("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rfe=Be("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Be("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=Be("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pfe=Be("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ife=Be("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=Be("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Be("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=Be("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=Be("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=Be("presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=Be("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=Be("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=Be("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ofe=Be("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=Be("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=Be("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Be("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=Be("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=Be("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Be("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Be("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=Be("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lfe=Be("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=Be("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Be("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Be("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=Be("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nfe=Be("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=Be("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=Be("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Be("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=Be("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Be("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Be("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=Be("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=Be("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Be("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ffe=Be("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Be("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bfe=Be("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=Be("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=Be("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=Be("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Be("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=Be("warehouse",[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=Be("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=Be("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=Be("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),qfe={class:"flex","aria-label":"Breadcrumb"},Wfe={class:"flex items-center space-x-2"},Gfe={__name:"Breadcrumbs",props:{items:{type:Array,default:()=>[]}},setup(t){return(e,n)=>{const r=Vs("router-link");return T(),R("nav",qfe,[u("ol",Wfe,[u("li",null,[b(r,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:D(()=>[b(v(CY),{class:"h-4 w-4"})]),_:1})]),(T(!0),R(xe,null,_e(t.items,(s,i)=>(T(),R("li",{key:i,class:"flex items-center"},[b(v(sr),{class:"h-4 w-4 text-gray-400"}),(T(),he(At(s.to&&!s.isActive?"router-link":"span"),{to:s.to,class:pe(["text-sm font-medium",s.isActive?"text-gray-900":"text-gray-500 hover:text-gray-700"])},{default:D(()=>[W($(s.label),1)]),_:2},1032,["to","class"]))]))),128))])])}}},Yfe={class:"lucide lucide-x",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Kfe(t,e){return T(),R("svg",Yfe,[...e[0]||(e[0]=[u("path",{d:"M18 6 6 18"},null,-1),u("path",{d:"m6 6 12 12"},null,-1)])])}const Eg=zt({name:"lucide-x",render:Kfe}),Xfe={class:"lucide lucide-info",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Qfe(t,e){return T(),R("svg",Xfe,[...e[0]||(e[0]=[u("circle",{cx:"12",cy:"12",r:"10"},null,-1),u("path",{d:"M12 16v-4"},null,-1),u("path",{d:"M12 8h.01"},null,-1)])])}const Zfe=zt({name:"lucide-info",render:Qfe}),Jfe={class:"lucide lucide-circle-x",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function epe(t,e){return T(),R("svg",Jfe,[...e[0]||(e[0]=[u("circle",{cx:"12",cy:"12",r:"10"},null,-1),u("path",{d:"m15 9-6 6"},null,-1),u("path",{d:"m9 9 6 6"},null,-1)])])}const tpe=zt({name:"lucide-circle-x",render:epe}),npe={class:"lucide lucide-circle-check",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function rpe(t,e){return T(),R("svg",npe,[...e[0]||(e[0]=[u("circle",{cx:"12",cy:"12",r:"10"},null,-1),u("path",{d:"m9 12 2 2 4-4"},null,-1)])])}const spe=zt({name:"lucide-circle-check",render:rpe}),ipe={class:"lucide lucide-triangle-alert",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function ape(t,e){return T(),R("svg",ipe,[...e[0]||(e[0]=[u("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"},null,-1),u("path",{d:"M12 9v4"},null,-1),u("path",{d:"M12 17h.01"},null,-1)])])}const ope=zt({name:"lucide-triangle-alert",render:ape}),lpe={class:"text-ink-gray-9"},upe={key:0,class:"text-ink-gray-6 prose-sm"},dpe=Je({__name:"Alert",props:Y5({title:{},theme:{},variant:{default:"subtle"},description:{},dismissable:{type:Boolean,default:!0}},{modelValue:{default:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=DG(t,"modelValue"),n=Z(()=>{const i={yellow:"bg-surface-amber-2",blue:"bg-surface-blue-2",red:"bg-surface-red-2",green:"bg-surface-green-2"};return s.variant=="outline"?"border border-outline-gray-3":s.theme?i[s.theme]:"bg-surface-gray-2"}),r=Z(()=>{const i={yellow:{component:ope,css:"text-ink-amber-3"},blue:{component:Zfe,css:"text-ink-blue-3"},red:{component:tpe,css:"text-ink-red-3"},green:{component:spe,css:"text-ink-green-3"}};return s.theme?i[s.theme]:null}),s=t;return(i,a)=>e.value?(T(),R("div",{key:0,role:"alert",class:pe([n.value,"grid grid-cols-[auto_1fr_auto] gap-3 rounded-md px-4 py-3.5 text-base items-start"])},[qe(i.$slots,"icon",{},()=>[r.value?(T(),he(At(r.value.component),{key:0,class:pe(["size-4",r.value.css])},null,8,["class"])):se("",!0)]),u("div",{class:pe(["grid gap-2",{"col-span-2":!i.$slots.icon&&!r.value}])},[u("span",lpe,$(s.title),1),qe(i.$slots,"description",{},()=>[s.description?(T(),R("p",upe,$(s.description),1)):se("",!0)])],2),s.dismissable?(T(),R("button",{key:0,onClick:a[0]||(a[0]=o=>e.value=!1)},[b(v(Eg),{class:"size-4"})])):se("",!0),qe(i.$slots,"footer")],2)):se("",!0)}});function Eh(t,e,n){var a;let r=(a=n.initialDeps)!=null?a:[],s;function i(){var o,l,d,c;let f;n.key&&((o=n.debug)!=null&&o.call(n))&&(f=Date.now());const p=t();if(!(p.length!==r.length||p.some((g,y)=>r[y]!==g)))return s;r=p;let m;if(n.key&&((l=n.debug)!=null&&l.call(n))&&(m=Date.now()),s=e(...p),n.key&&((d=n.debug)!=null&&d.call(n))){const g=Math.round((Date.now()-f)*100)/100,y=Math.round((Date.now()-m)*100)/100,x=y/16,_=(k,w)=>{for(k=String(k);k.length<w;)k=" "+k;return k};console.info(`%c ${_(y,5)} /${_(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(c=n==null?void 0:n.onChange)==null||c.call(n,s),s}return i.updateDeps=o=>{r=o},i}function JL(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const cpe=(t,e)=>Math.abs(t-e)<1.01,fpe=(t,e,n)=>{let r;return function(...s){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,s),n)}},e8=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},ppe=t=>t,hpe=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let s=e;s<=n;s++)r.push(s);return r},mpe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const s=a=>{const{width:o,height:l}=a;e({width:Math.round(o),height:Math.round(l)})};if(s(e8(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l!=null&&l.borderBoxSize){const d=l.borderBoxSize[0];if(d){s({width:d.inlineSize,height:d.blockSize});return}}s(e8(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},t8={passive:!0},n8=typeof window=="undefined"?!0:"onscrollend"in window,gpe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let s=0;const i=t.options.useScrollendEvent&&n8?()=>{}:fpe(r,()=>{e(s,!1)},t.options.isScrollingResetDelay),a=c=>()=>{const{horizontal:f,isRtl:p}=t.options;s=f?n.scrollLeft*(p&&-1||1):n.scrollTop,i(),e(s,c)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,t8);const d=t.options.useScrollendEvent&&n8;return d&&n.addEventListener("scrollend",l,t8),()=>{n.removeEventListener("scroll",o),d&&n.removeEventListener("scrollend",l)}},vpe=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},ype=(t,{adjustments:e=0,behavior:n},r)=>{var s,i;const a=t+e;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class bpe{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const a=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s=="undefined"&&delete n[r]}),this.options=ge({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ppe,rangeExtractor:hpe,onChange:()=>{},measureElement:vpe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1},n)},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=Eh(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(s=(n=this.scrollElement)==null?void 0:n.window)!=null?s:null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>{var n;return this.options.enabled?(this.scrollRect=(n=this.scrollRect)!=null?n:this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0)},this.getScrollOffset=()=>{var n;return this.options.enabled?(this.scrollOffset=(n=this.scrollOffset)!=null?n:typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.scrollOffset):(this.scrollOffset=null,0)},this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(s.has(o.lane))continue;const l=i.get(o.lane);if(l==null||o.end>l.end?i.set(o.lane,o):o.end<l.end&&s.set(o.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=Eh(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,s,i,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:a}),{key:!1}),this.getMeasurements=Eh(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,l);for(let c=l;c<n;c++){const f=i(c),p=this.options.lanes===1?d[c-1]:this.getFurthestMeasurement(d,c),h=p?p.end+this.options.gap:r+s,m=o.get(f),g=typeof m=="number"?m:this.options.estimateSize(c),y=h+g,x=p?p.lane:c%this.options.lanes;d[c]={index:c,start:h,size:g,end:y,key:f,lane:x}}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Eh(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?xpe({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Eh(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,a)=>i===null||a===null?[]:n({startIndex:i,endIndex:a,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const a=i.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{var o;const s=this.measurementsCache[n];if(!s)return;const i=(o=this.itemSizeCache.get(s.key))!=null?o:s.size,a=r-i;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,a,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=Eh(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,a=n.length;i<a;i++){const o=n[i],l=r[o];s.push(l)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return JL(r[NY(0,r.length-1,s=>JL(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const o=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(s.end>=a+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const a=10,o=d=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(n,d);if(!c){console.warn("Failed to get offset for index:",n);return}const[f,p]=c;this._scrollToOffset(f,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const h=this.getScrollOffset(),m=this.getOffsetForIndex(n,p);if(!m){console.warn("Failed to get offset for index:",n);return}cpe(m[0],h)||l(p)})},l=d=>{this.targetWindow&&(i++,i<a?this.targetWindow.requestAnimationFrame(()=>o(d)):console.warn(`Failed to scroll to index ${n} after ${a} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var i;var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=(i=(n=r[r.length-1])==null?void 0:n.end)!=null?i:0;else{const a=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&a.some(l=>l===null);){const l=r[o];a[l.lane]===null&&(a[l.lane]=l.end),o--}s=Math.max(...a.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const NY=(t,e,n,r)=>{for(;t<=e;){const s=(t+e)/2|0,i=n(s);if(i<r)t=s+1;else if(i>r)e=s-1;else return s}return t>0?t-1:0};function xpe({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const s=t.length-1,i=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:s};let a=NY(0,s,i,n),o=a;if(r===1)for(;o<s&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<s&&l.some(c=>c<n+e);){const c=t[o];l[c.lane]=c.end,o++}const d=Array(r).fill(n+e);for(;a>=0&&d.some(c=>c>=n);){const c=t[a];d[c.lane]=c.start,a--}a=Math.max(0,a-a%r),o=Math.min(s,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}function _pe(t){const e=new bpe(v(t)),n=Mo(e),r=e._didMount();return et(()=>v(t).getScrollElement(),s=>{s&&e._willUpdate()},{immediate:!0}),et(()=>v(t),s=>{e.setOptions(ze(ge({},s),{onChange:(i,a)=>{var o;FO(n),(o=s.onChange)==null||o.call(s,i,a)}})),e._willUpdate(),FO(n)},{immediate:!0}),X1(r),n}function wpe(t){return _pe(Z(()=>ge({observeElementRect:mpe,observeElementOffset:gpe,scrollToFn:ype},v(t))))}function kpe(t,e,n){let r=Q(n==null?void 0:n.value),s=Z(()=>t.value!==void 0);return[Z(()=>s.value?t.value:r.value),function(i){return s.value||(r.value=i),e==null?void 0:e(i)}]}function Spe(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function p2(){let t=[],e={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),e.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){e.requestAnimationFrame(()=>{e.requestAnimationFrame(...n)})},setTimeout(...n){let r=setTimeout(...n);e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Spe(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=p2();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function Cpe(){let t=p2();return ks(()=>t.dispose()),t}function Ape(){let t=Cpe();return e=>{t.dispose(),t.nextFrame(e)}}var r8;let Tpe=Symbol("headlessui.useid"),$pe=0;const nR=(r8=aw)!=null?r8:function(){return Qn(Tpe,()=>`${++$pe}`)()};function Cr(t){var e;if(t==null||t.value==null)return null;let n=(e=t.value.$el)!=null?e:t.value;return n instanceof Node?n:null}function Pu(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Pu),r}var Mpe=Object.defineProperty,Epe=(t,e,n)=>e in t?Mpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,s8=(t,e,n)=>(Epe(t,typeof e!="symbol"?e+"":e,n),n);class Dpe{constructor(){s8(this,"current",this.detect()),s8(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window=="undefined"||typeof document=="undefined"?"server":"client"}}let rR=new Dpe;function sR(t){if(rR.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=Cr(t);if(e)return e.ownerDocument}return document}let i8=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Rpe=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Rpe||{}),Ppe=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(Ppe||{}),Ipe=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(Ipe||{}),jY=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(jY||{});function Ope(t,e=0){var n;return t===((n=sR(t))==null?void 0:n.body)?!1:Pu(e,{0(){return t.matches(i8)},1(){let r=t;for(;r!==null;){if(r.matches(i8))return!0;r=r.parentElement}return!1}})}var Lpe=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(Lpe||{});typeof window!="undefined"&&typeof document!="undefined"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Vpe(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),i=e(r);if(s===null||i===null)return 0;let a=s.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Npe(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function jpe(){return/Android/gi.test(window.navigator.userAgent)}function FY(){return Npe()||jpe()}function nx(t,e,n){rR.isServer||Hr(r=>{document.addEventListener(t,e,n),r(()=>document.removeEventListener(t,e,n))})}function Fpe(t,e,n){rR.isServer||Hr(r=>{window.addEventListener(t,e,n),r(()=>window.removeEventListener(t,e,n))})}function Bpe(t,e,n=Z(()=>!0)){function r(i,a){if(!n.value||i.defaultPrevented)return;let o=a(i);if(o===null||!o.getRootNode().contains(o))return;let l=function d(c){return typeof c=="function"?d(c()):Array.isArray(c)||c instanceof Set?c:[c]}(t);for(let d of l){if(d===null)continue;let c=d instanceof HTMLElement?d:Cr(d);if(c!=null&&c.contains(o)||i.composed&&i.composedPath().includes(c))return}return!Ope(o,jY.Loose)&&o.tabIndex!==-1&&i.preventDefault(),e(i,o)}let s=Q(null);nx("pointerdown",i=>{var a,o;n.value&&(s.value=((o=(a=i.composedPath)==null?void 0:a.call(i))==null?void 0:o[0])||i.target)},!0),nx("mousedown",i=>{var a,o;n.value&&(s.value=((o=(a=i.composedPath)==null?void 0:a.call(i))==null?void 0:o[0])||i.target)},!0),nx("click",i=>{FY()||s.value&&(r(i,()=>s.value),s.value=null)},!0),nx("touchend",i=>r(i,()=>i.target instanceof HTMLElement?i.target:null),!0),Fpe("blur",i=>r(i,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function a8(t){return[t.screenX,t.screenY]}function zpe(){let t=Q([-1,-1]);return{wasMoved(e){let n=a8(e);return t.value[0]===n[0]&&t.value[1]===n[1]?!1:(t.value=n,!0)},update(e){t.value=a8(e)}}}function Upe({container:t,accept:e,walk:n,enabled:r}){Hr(()=>{let s=t.value;if(!s||r!==void 0&&!r.value)return;let i=sR(t);if(!i)return;let a=Object.assign(l=>e(l),{acceptNode:e}),o=i.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,a,!1);for(;o.nextNode();)n(o.currentNode)})}var j0=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(j0||{}),Hpe=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Hpe||{});function lb(i){var a=i,{visible:t=!0,features:e=0,ourProps:n,theirProps:r}=a,s=$s(a,["visible","features","ourProps","theirProps"]);var o;let l=zY(r,n),d=Object.assign(s,{props:l});if(t||e&2&&l.static)return ZA(d);if(e&1){let c=(o=l.unmount)==null||o?0:1;return Pu(c,{0(){return null},1(){return ZA(ze(ge({},s),{props:ze(ge({},l),{hidden:!0,style:{display:"none"}})}))}})}return ZA(d)}function ZA({props:t,attrs:e,slots:n,slot:r,name:s}){var i,a;let f=ZS(t,["unmount","static"]),{as:o}=f,l=$s(f,["as"]),d=(i=n.default)==null?void 0:i.call(n,r),c={};if(r){let p=!1,h=[];for(let[m,g]of Object.entries(r))typeof g=="boolean"&&(p=!0),g===!0&&h.push(m);p&&(c["data-headlessui-state"]=h.join(" "))}if(o==="template"){if(d=BY(d!=null?d:[]),Object.keys(l).length>0||Object.keys(e).length>0){let[p,...h]=d!=null?d:[];if(!Wpe(p)||h.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${s} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(e)).map(y=>y.trim()).filter((y,x,_)=>_.indexOf(y)===x).sort((y,x)=>y.localeCompare(x)).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let m=zY((a=p.props)!=null?a:{},l,c),g=Oo(p,m,!0);for(let y in m)y.startsWith("on")&&(g.props||(g.props={}),g.props[y]=m[y]);return g}return Array.isArray(d)&&d.length===1?d[0]:d}return pr(o,Object.assign({},l,c),{default:()=>d})}function BY(t){return t.flatMap(e=>e.type===xe?BY(e.children):[e])}function zY(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...i){let a=n[r];for(let o of a){if(s instanceof Event&&s.defaultPrevented)return;o(s,...i)}}});return e}function qpe(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function ZS(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function Wpe(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}var UY=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(UY||{});let Gpe=Je({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:e,attrs:n}){return()=>{var r;let o=t,{features:s}=o,i=$s(o,["features"]),a={"aria-hidden":(s&2)===2?!0:(r=i["aria-hidden"])!=null?r:void 0,hidden:(s&4)===4?!0:void 0,style:ge({position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},(s&4)===4&&(s&2)!==2&&{display:"none"})};return lb({ourProps:a,theirProps:i,slot:{},attrs:n,slots:e,name:"Hidden"})}}}),HY=Symbol("Context");var F0=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(F0||{});function Ype(){return Qn(HY,null)}function Kpe(t){_i(HY,t)}var tl=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(tl||{}),qY=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(qY||{});function Xpe(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window!="undefined"&&typeof document!="undefined"&&(document.addEventListener("DOMContentLoaded",e),e())}let Wf=[];Xpe(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&Wf[0]!==e.target&&(Wf.unshift(e.target),Wf=Wf.filter(n=>n!=null&&n.isConnected),Wf.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function Qpe(t){throw new Error("Unexpected object: "+t)}var Xs=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Xs||{});function o8(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),s=r!=null?r:-1;switch(t.focus){case 0:{for(let i=0;i<n.length;++i)if(!e.resolveDisabled(n[i],i,n))return i;return r}case 1:{s===-1&&(s=n.length);for(let i=s-1;i>=0;--i)if(!e.resolveDisabled(n[i],i,n))return i;return r}case 2:{for(let i=s+1;i<n.length;++i)if(!e.resolveDisabled(n[i],i,n))return i;return r}case 3:{for(let i=n.length-1;i>=0;--i)if(!e.resolveDisabled(n[i],i,n))return i;return r}case 4:{for(let i=0;i<n.length;++i)if(e.resolveId(n[i],i,n)===t.id)return i;return r}case 5:return null;default:Qpe(t)}}function WY(t={},e=null,n=[]){for(let[r,s]of Object.entries(t))YY(n,GY(e,r),s);return n}function GY(t,e){return t?t+"["+e+"]":e}function YY(t,e,n){if(Array.isArray(n))for(let[r,s]of n.entries())YY(t,GY(e,r.toString()),s);else n instanceof Date?t.push([e,n.toISOString()]):typeof n=="boolean"?t.push([e,n?"1":"0"]):typeof n=="string"?t.push([e,n]):typeof n=="number"?t.push([e,`${n}`]):n==null?t.push([e,""]):WY(n,e,t)}var Zpe={};function Jpe(t,e){return t===e}var ehe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ehe||{}),the=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(the||{}),nhe=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(nhe||{});let KY=Symbol("ComboboxContext");function ub(t){let e=Qn(KY,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ub),n}return e}let XY=Symbol("VirtualContext"),rhe=Je({name:"VirtualProvider",setup(t,{slots:e}){let n=ub("VirtualProvider"),r=Z(()=>{let o=Cr(n.optionsRef);if(!o)return{start:0,end:0};let l=window.getComputedStyle(o);return{start:parseFloat(l.paddingBlockStart||l.paddingTop),end:parseFloat(l.paddingBlockEnd||l.paddingBottom)}}),s=wpe(Z(()=>({scrollPaddingStart:r.value.start,scrollPaddingEnd:r.value.end,count:n.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return Cr(n.optionsRef)},overscan:12}))),i=Z(()=>{var o;return(o=n.virtual.value)==null?void 0:o.options}),a=Q(0);return et([i],()=>{a.value+=1}),_i(XY,n.virtual.value?s:null),()=>[pr("div",{style:{position:"relative",width:"100%",height:`${s.value.getTotalSize()}px`},ref:o=>{if(o){if(typeof process!="undefined"&&Zpe.JEST_WORKER_ID!==void 0||n.activationTrigger.value===0)return;n.activeOptionIndex.value!==null&&n.virtual.value.options.length>n.activeOptionIndex.value&&s.value.scrollToIndex(n.activeOptionIndex.value)}}},s.value.getVirtualItems().map(o=>Oo(e.default({option:n.virtual.value.options[o.index],open:n.comboboxState.value===0})[0],{key:`${a.value}-${o.index}`,"data-index":o.index,"aria-setsize":n.virtual.value.options.length,"aria-posinset":o.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${o.start}px)`,overflowAnchor:"none"}})))]}}),she=Je({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(t,{slots:e,attrs:n,emit:r}){let s=Q(1),i=Q(null),a=Q(null),o=Q(null),l=Q(null),d=Q({static:!1,hold:!1}),c=Q([]),f=Q(null),p=Q(2),h=Q(!1);function m(P=I=>I){let I=f.value!==null?c.value[f.value]:null,F=P(c.value.slice()),L=F.length>0&&F[0].dataRef.order.value!==null?F.sort((N,q)=>N.dataRef.order.value-q.dataRef.order.value):Vpe(F,N=>Cr(N.dataRef.domRef)),z=I?L.indexOf(I):null;return z===-1&&(z=null),{options:L,activeOptionIndex:z}}let g=Z(()=>t.multiple?1:0),y=Z(()=>t.nullable),[x,_]=kpe(Z(()=>t.modelValue),P=>r("update:modelValue",P),Z(()=>t.defaultValue)),k=Z(()=>x.value===void 0?Pu(g.value,{1:[],0:void 0}):x.value),w=null,S=null;function C(P){return Pu(g.value,{0(){return _==null?void 0:_(P)},1:()=>{let I=un(M.value.value).slice(),F=un(P),L=I.findIndex(z=>M.compare(F,un(z)));return L===-1?I.push(F):I.splice(L,1),_==null?void 0:_(I)}})}let A=Z(()=>{});et([A],([P],[I])=>{if(M.virtual.value&&P&&I&&f.value!==null){let F=P.indexOf(I[f.value]);F!==-1?f.value=F:f.value=null}});let M={comboboxState:s,value:k,mode:g,compare(P,I){if(typeof t.by=="string"){let F=t.by;return(P==null?void 0:P[F])===(I==null?void 0:I[F])}return t.by===null?Jpe(P,I):t.by(P,I)},calculateIndex(P){return M.virtual.value?t.by===null?M.virtual.value.options.indexOf(P):M.virtual.value.options.findIndex(I=>M.compare(I,P)):c.value.findIndex(I=>M.compare(I.dataRef.value,P))},defaultValue:Z(()=>t.defaultValue),nullable:y,immediate:Z(()=>!1),virtual:Z(()=>null),inputRef:a,labelRef:i,buttonRef:o,optionsRef:l,disabled:Z(()=>t.disabled),options:c,change(P){_(P)},activeOptionIndex:Z(()=>{if(h.value&&f.value===null&&(M.virtual.value?M.virtual.value.options.length>0:c.value.length>0)){if(M.virtual.value){let I=M.virtual.value.options.findIndex(F=>{var L;return!((L=M.virtual.value)!=null&&L.disabled(F))});if(I!==-1)return I}let P=c.value.findIndex(I=>!I.dataRef.disabled);if(P!==-1)return P}return f.value}),activationTrigger:p,optionsPropsRef:d,closeCombobox(){h.value=!1,!t.disabled&&s.value!==1&&(s.value=1,f.value=null)},openCombobox(){if(h.value=!0,!t.disabled&&s.value!==0){if(M.value.value){let P=M.calculateIndex(M.value.value);P!==-1&&(f.value=P)}s.value=0}},setActivationTrigger(P){p.value=P},goToOption(P,I,F){h.value=!1,w!==null&&cancelAnimationFrame(w),w=requestAnimationFrame(()=>{if(t.disabled||l.value&&!d.value.static&&s.value===1)return;if(M.virtual.value){f.value=P===Xs.Specific?I:o8({focus:P},{resolveItems:()=>M.virtual.value.options,resolveActiveIndex:()=>{var N,q;return(q=(N=M.activeOptionIndex.value)!=null?N:M.virtual.value.options.findIndex(V=>{var O;return!((O=M.virtual.value)!=null&&O.disabled(V))}))!=null?q:null},resolveDisabled:N=>M.virtual.value.disabled(N),resolveId(){throw new Error("Function not implemented.")}}),p.value=F!=null?F:2;return}let L=m();if(L.activeOptionIndex===null){let N=L.options.findIndex(q=>!q.dataRef.disabled);N!==-1&&(L.activeOptionIndex=N)}let z=P===Xs.Specific?I:o8({focus:P},{resolveItems:()=>L.options,resolveActiveIndex:()=>L.activeOptionIndex,resolveId:N=>N.id,resolveDisabled:N=>N.dataRef.disabled});f.value=z,p.value=F!=null?F:2,c.value=L.options})},selectOption(P){let I=c.value.find(L=>L.id===P);if(!I)return;let{dataRef:F}=I;C(F.value)},selectActiveOption(){if(M.activeOptionIndex.value!==null){if(M.virtual.value)C(M.virtual.value.options[M.activeOptionIndex.value]);else{let{dataRef:P}=c.value[M.activeOptionIndex.value];C(P.value)}M.goToOption(Xs.Specific,M.activeOptionIndex.value)}},registerOption(P,I){let F=Jt({id:P,dataRef:I});if(M.virtual.value){c.value.push(F);return}S&&cancelAnimationFrame(S);let L=m(z=>(z.push(F),z));f.value===null&&M.isSelected(I.value.value)&&(L.activeOptionIndex=L.options.indexOf(F)),c.value=L.options,f.value=L.activeOptionIndex,p.value=2,L.options.some(z=>!Cr(z.dataRef.domRef))&&(S=requestAnimationFrame(()=>{let z=m();c.value=z.options,f.value=z.activeOptionIndex}))},unregisterOption(P,I){if(w!==null&&cancelAnimationFrame(w),I&&(h.value=!0),M.virtual.value){c.value=c.value.filter(L=>L.id!==P);return}let F=m(L=>{let z=L.findIndex(N=>N.id===P);return z!==-1&&L.splice(z,1),L});c.value=F.options,f.value=F.activeOptionIndex,p.value=2},isSelected(P){return Pu(g.value,{0:()=>M.compare(un(M.value.value),un(P)),1:()=>un(M.value.value).some(I=>M.compare(un(I),un(P)))})},isActive(P){return f.value===M.calculateIndex(P)}};Bpe([a,o,l],()=>M.closeCombobox(),Z(()=>s.value===0)),_i(KY,M),Kpe(Z(()=>Pu(s.value,{0:F0.Open,1:F0.Closed})));let E=Z(()=>{var P;return(P=Cr(a))==null?void 0:P.closest("form")});return yt(()=>{et([E],()=>{if(!E.value||t.defaultValue===void 0)return;function P(){M.change(t.defaultValue)}return E.value.addEventListener("reset",P),()=>{var I;(I=E.value)==null||I.removeEventListener("reset",P)}},{immediate:!0})}),()=>{var P,I,F;let O=t,{name:L,disabled:z,form:N}=O,q=$s(O,["name","disabled","form"]),V={open:s.value===0,disabled:z,activeIndex:M.activeOptionIndex.value,activeOption:M.activeOptionIndex.value===null?null:M.virtual.value?M.virtual.value.options[(P=M.activeOptionIndex.value)!=null?P:0]:(F=(I=M.options.value[M.activeOptionIndex.value])==null?void 0:I.dataRef.value)!=null?F:null,value:k.value};return pr(xe,[...L!=null&&k.value!=null?WY({[L]:k.value}).map(([X,j])=>pr(Gpe,qpe({features:UY.Hidden,key:X,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:N,disabled:z,name:X,value:j}))):[],lb({theirProps:ge(ge({},n),ZS(q,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])),ourProps:{},slot:V,slots:e,attrs:n,name:"Combobox"})])}}}),ihe=Je({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:t=>!0},setup(t,{emit:e,attrs:n,slots:r,expose:s}){var i;let a=(i=t.id)!=null?i:`headlessui-combobox-input-${nR()}`,o=ub("ComboboxInput"),l=Z(()=>sR(Cr(o.inputRef))),d={value:!1};s({el:o.inputRef,$el:o.inputRef});function c(){o.change(null);let S=Cr(o.optionsRef);S&&(S.scrollTop=0),o.goToOption(Xs.Nothing)}let f=Z(()=>{var S;let C=o.value.value;return Cr(o.inputRef)?typeof t.displayValue!="undefined"&&C!==void 0?(S=t.displayValue(C))!=null?S:"":typeof C=="string"?C:"":""});yt(()=>{et([f,o.comboboxState,l],([S,C],[A,M])=>{if(d.value)return;let E=Cr(o.inputRef);E&&((M===0&&C===1||S!==A)&&(E.value=S),requestAnimationFrame(()=>{var P;if(d.value||!E||((P=l.value)==null?void 0:P.activeElement)!==E)return;let{selectionStart:I,selectionEnd:F}=E;Math.abs((F!=null?F:0)-(I!=null?I:0))===0&&I===0&&E.setSelectionRange(E.value.length,E.value.length)}))},{immediate:!0}),et([o.comboboxState],([S],[C])=>{if(S===0&&C===1){if(d.value)return;let A=Cr(o.inputRef);if(!A)return;let M=A.value,{selectionStart:E,selectionEnd:P,selectionDirection:I}=A;A.value="",A.value=M,I!==null?A.setSelectionRange(E,P,I):A.setSelectionRange(E,P)}})});let p=Q(!1);function h(){p.value=!0}function m(){p2().nextFrame(()=>{p.value=!1})}let g=Ape();function y(S){switch(d.value=!0,g(()=>{d.value=!1}),S.key){case tl.Enter:if(d.value=!1,o.comboboxState.value!==0||p.value)return;if(S.preventDefault(),S.stopPropagation(),o.activeOptionIndex.value===null){o.closeCombobox();return}o.selectActiveOption(),o.mode.value===0&&o.closeCombobox();break;case tl.ArrowDown:return d.value=!1,S.preventDefault(),S.stopPropagation(),Pu(o.comboboxState.value,{0:()=>o.goToOption(Xs.Next),1:()=>o.openCombobox()});case tl.ArrowUp:return d.value=!1,S.preventDefault(),S.stopPropagation(),Pu(o.comboboxState.value,{0:()=>o.goToOption(Xs.Previous),1:()=>{o.openCombobox(),nr(()=>{o.value.value||o.goToOption(Xs.Last)})}});case tl.Home:if(S.shiftKey)break;return d.value=!1,S.preventDefault(),S.stopPropagation(),o.goToOption(Xs.First);case tl.PageUp:return d.value=!1,S.preventDefault(),S.stopPropagation(),o.goToOption(Xs.First);case tl.End:if(S.shiftKey)break;return d.value=!1,S.preventDefault(),S.stopPropagation(),o.goToOption(Xs.Last);case tl.PageDown:return d.value=!1,S.preventDefault(),S.stopPropagation(),o.goToOption(Xs.Last);case tl.Escape:if(d.value=!1,o.comboboxState.value!==0)return;S.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&S.stopPropagation(),o.nullable.value&&o.mode.value===0&&o.value.value===null&&c(),o.closeCombobox();break;case tl.Tab:if(d.value=!1,o.comboboxState.value!==0)return;o.mode.value===0&&o.activationTrigger.value!==1&&o.selectActiveOption(),o.closeCombobox();break}}function x(S){e("change",S),o.nullable.value&&o.mode.value===0&&S.target.value===""&&c(),o.openCombobox()}function _(S){var C,A,M;let E=(C=S.relatedTarget)!=null?C:Wf.find(P=>P!==S.currentTarget);if(d.value=!1,!((A=Cr(o.optionsRef))!=null&&A.contains(E))&&!((M=Cr(o.buttonRef))!=null&&M.contains(E))&&o.comboboxState.value===0)return S.preventDefault(),o.mode.value===0&&(o.nullable.value&&o.value.value===null?c():o.activationTrigger.value!==1&&o.selectActiveOption()),o.closeCombobox()}function k(S){var C,A,M;let E=(C=S.relatedTarget)!=null?C:Wf.find(P=>P!==S.currentTarget);(A=Cr(o.buttonRef))!=null&&A.contains(E)||(M=Cr(o.optionsRef))!=null&&M.contains(E)||o.disabled.value||o.immediate.value&&o.comboboxState.value!==0&&(o.openCombobox(),p2().nextFrame(()=>{o.setActivationTrigger(1)}))}let w=Z(()=>{var S,C,A,M;return(M=(A=(C=t.defaultValue)!=null?C:o.defaultValue.value!==void 0?(S=t.displayValue)==null?void 0:S.call(t,o.defaultValue.value):null)!=null?A:o.defaultValue.value)!=null?M:""});return()=>{var S,C,A,M,E,P,I;let F={open:o.comboboxState.value===0},V=t,{displayValue:L,onChange:z}=V,N=$s(V,["displayValue","onChange"]),q={"aria-controls":(S=o.optionsRef.value)==null?void 0:S.id,"aria-expanded":o.comboboxState.value===0,"aria-activedescendant":o.activeOptionIndex.value===null?void 0:o.virtual.value?(C=o.options.value.find(O=>!o.virtual.value.disabled(O.dataRef.value)&&o.compare(O.dataRef.value,o.virtual.value.options[o.activeOptionIndex.value])))==null?void 0:C.id:(A=o.options.value[o.activeOptionIndex.value])==null?void 0:A.id,"aria-labelledby":(P=(M=Cr(o.labelRef))==null?void 0:M.id)!=null?P:(E=Cr(o.buttonRef))==null?void 0:E.id,"aria-autocomplete":"list",id:a,onCompositionstart:h,onCompositionend:m,onKeydown:y,onInput:x,onFocus:k,onBlur:_,role:"combobox",type:(I=n.type)!=null?I:"text",tabIndex:0,ref:o.inputRef,defaultValue:w.value,disabled:o.disabled.value===!0?!0:void 0};return lb({ourProps:q,theirProps:N,slot:F,attrs:n,slots:r,features:j0.RenderStrategy|j0.Static,name:"ComboboxInput"})}}}),ahe=Je({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:e,slots:n,expose:r}){let s=ub("ComboboxOptions"),i=`headlessui-combobox-options-${nR()}`;r({el:s.optionsRef,$el:s.optionsRef}),Hr(()=>{s.optionsPropsRef.value.static=t.static}),Hr(()=>{s.optionsPropsRef.value.hold=t.hold});let a=Ype(),o=Z(()=>a!==null?(a.value&F0.Open)===F0.Open:s.comboboxState.value===0);Upe({container:Z(()=>Cr(s.optionsRef)),enabled:Z(()=>s.comboboxState.value===0),accept(d){return d.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:d.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(d){d.setAttribute("role","none")}});function l(d){d.preventDefault()}return()=>{var d,c,f;let p={open:s.comboboxState.value===0},h={"aria-labelledby":(f=(d=Cr(s.labelRef))==null?void 0:d.id)!=null?f:(c=Cr(s.buttonRef))==null?void 0:c.id,id:i,ref:s.optionsRef,role:"listbox","aria-multiselectable":s.mode.value===1?!0:void 0,onMousedown:l},m=ZS(t,["hold"]);return lb({ourProps:h,theirProps:m,slot:p,attrs:e,slots:s.virtual.value&&s.comboboxState.value===0?ze(ge({},n),{default:()=>[pr(rhe,{},n.default)]}):n,features:j0.RenderStrategy|j0.Static,visible:o.value,name:"ComboboxOptions"})}}}),ohe=Je({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(t,{slots:e,attrs:n,expose:r}){let s=ub("ComboboxOption"),i=`headlessui-combobox-option-${nR()}`,a=Q(null),o=Z(()=>t.disabled);r({el:a,$el:a});let l=Z(()=>{var _;return s.virtual.value?s.activeOptionIndex.value===s.calculateIndex(t.value):s.activeOptionIndex.value===null?!1:((_=s.options.value[s.activeOptionIndex.value])==null?void 0:_.id)===i}),d=Z(()=>s.isSelected(t.value)),c=Qn(XY,null),f=Z(()=>({disabled:t.disabled,value:t.value,domRef:a,order:Z(()=>t.order)}));yt(()=>s.registerOption(i,f)),ks(()=>s.unregisterOption(i,l.value)),Hr(()=>{let _=Cr(a);_&&(c==null||c.value.measureElement(_))}),Hr(()=>{s.comboboxState.value===0&&l.value&&(s.virtual.value||s.activationTrigger.value!==0&&nr(()=>{var _,k;return(k=(_=Cr(a))==null?void 0:_.scrollIntoView)==null?void 0:k.call(_,{block:"nearest"})}))});function p(_){_.preventDefault(),_.button===qY.Left&&(o.value||(s.selectOption(i),FY()||requestAnimationFrame(()=>{var k;return(k=Cr(s.inputRef))==null?void 0:k.focus({preventScroll:!0})}),s.mode.value===0&&s.closeCombobox()))}function h(){var _;if(t.disabled||(_=s.virtual.value)!=null&&_.disabled(t.value))return s.goToOption(Xs.Nothing);let k=s.calculateIndex(t.value);s.goToOption(Xs.Specific,k)}let m=zpe();function g(_){m.update(_)}function y(_){var k;if(!m.wasMoved(_)||t.disabled||(k=s.virtual.value)!=null&&k.disabled(t.value)||l.value)return;let w=s.calculateIndex(t.value);s.goToOption(Xs.Specific,w,0)}function x(_){var k;m.wasMoved(_)&&(t.disabled||(k=s.virtual.value)!=null&&k.disabled(t.value)||l.value&&(s.optionsPropsRef.value.hold||s.goToOption(Xs.Nothing)))}return()=>{let{disabled:_}=t,k={active:l.value,selected:d.value,disabled:_},w={id:i,ref:a,role:"option",tabIndex:_===!0?void 0:-1,"aria-disabled":_===!0?!0:void 0,"aria-selected":d.value,disabled:void 0,onMousedown:p,onFocus:h,onPointerenter:g,onMouseenter:g,onPointermove:y,onMousemove:y,onPointerleave:x,onMouseleave:x},S=ZS(t,["order","value"]);return lb({ourProps:w,theirProps:S,slot:k,attrs:n,slots:e,name:"ComboboxOption"})}}});function na(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[a=>{const o=Qn(r,a);if(o||o===null)return o;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},a=>(_i(r,a),a)]}function Ki(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function QY(t,e,n){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function iR(t){return t?t.flatMap(e=>e.type===xe?iR(e.children):[e]):[]}const lhe=["INPUT","TEXTAREA"];function uhe(t,e,n,r={}){if(!e||r.enableIgnoredElement&&lhe.includes(e.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:i="[data-reka-collection-item]",itemsArray:a=[],loop:o=!0,dir:l="ltr",preventScroll:d=!0,focus:c=!1}=r,[f,p,h,m,g,y]=[t.key==="ArrowRight",t.key==="ArrowLeft",t.key==="ArrowUp",t.key==="ArrowDown",t.key==="Home",t.key==="End"],x=h||m,_=f||p;if(!g&&!y&&(!x&&!_||s==="vertical"&&_||s==="horizontal"&&x))return null;const k=n?Array.from(n.querySelectorAll(i)):a;if(!k.length)return null;d&&t.preventDefault();let w=null;return _||x?w=ZY(k,e,{goForward:x?m:l==="ltr"?f:p,loop:o}):g?w=k.at(0)||null:y&&(w=k.at(-1)||null),c&&(w==null||w.focus()),w}function ZY(t,e,n,r=t.length){if(--r===0)return null;const s=t.indexOf(e),i=n.goForward?s+1:s-1;if(!n.loop&&(i<0||i>=t.length))return null;const a=(i+t.length)%t.length,o=t[a];return o?o.hasAttribute("disabled")&&o.getAttribute("disabled")!=="false"?ZY(t,o,n,r):o:null}const[JY]=na("ConfigProvider");function dhe(t,e){var n;const r=Mo();return Hr(()=>{r.value=t()},ze(ge({},e),{flush:(n=void 0)!=null?n:"sync"})),Ka(r)}function db(t){return K1()?(X1(t),!0):!1}function che(){const t=new Set,e=i=>{t.delete(i)};return{on:i=>{t.add(i);const a=()=>e(i);return db(a),{off:a}},off:e,trigger:(...i)=>Promise.all(Array.from(t).map(a=>a(...i))),clear:()=>{t.clear()}}}function fhe(t){let e=!1,n;const r=DS(!0);return(...s)=>(e||(n=r.run(()=>t(...s)),e=!0),n)}function eK(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=DS(!0),n=r.run(()=>t(...i))),db(s),n)}function phe(t){if(!zn(t))return Jt(t);const e=new Proxy({},{get(n,r,s){return v(Reflect.get(t.value,r,s))},set(n,r,s){return zn(t.value[r])&&!zn(s)?t.value[r].value=s:t.value[r]=s,!0},deleteProperty(n,r){return Reflect.deleteProperty(t.value,r)},has(n,r){return Reflect.has(t.value,r)},ownKeys(){return Object.keys(t.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return Jt(e)}function hhe(t){return phe(Z(t))}function mhe(t,...e){const n=e.flat(),r=n[0];return hhe(()=>Object.fromEntries(typeof r=="function"?Object.entries(no(t)).filter(([s,i])=>!r(Ur(i),s)):Object.entries(no(t)).filter(s=>!n.includes(s[0]))))}const hd=typeof window!="undefined"&&typeof document!="undefined";typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;const ghe=t=>typeof t!="undefined",vhe=Object.prototype.toString,yhe=t=>vhe.call(t)==="[object Object]",l8=bhe();function bhe(){var t,e;return hd&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function xhe(t){return ai()}function JA(t){return Array.isArray(t)?t:[t]}function tK(t,e=1e4){return VS((n,r)=>{let s=Ur(t),i;const a=()=>setTimeout(()=>{s=Ur(t),r()},Ur(e));return db(()=>{clearTimeout(i)}),{get(){return n(),s},set(o){s=o,r(),clearTimeout(i),i=a()}}})}const _he=Ur;function whe(t,e){xhe()&&Gl(t,e)}function nK(t,e,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n,i=Mo(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function l(){i.value=!1,o()}function d(...c){s&&t(),o(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,t(...c)},Ur(e))}return r&&(i.value=!0,hd&&d()),db(l),{isPending:Ka(i),start:d,stop:l}}function khe(t,e,n){return et(t,e,ze(ge({},n),{immediate:!0}))}const aR=hd?window:void 0;function ah(t){var e;const n=Ur(t);return(e=n==null?void 0:n.$el)!=null?e:n}function ng(...t){const e=[],n=()=>{e.forEach(o=>o()),e.length=0},r=(o,l,d,c)=>(o.addEventListener(l,d,c),()=>o.removeEventListener(l,d,c)),s=Z(()=>{const o=JA(Ur(t[0])).filter(l=>l!=null);return o.every(l=>typeof l!="string")?o:void 0}),i=khe(()=>{var o,l;return[(l=(o=s.value)==null?void 0:o.map(d=>ah(d)))!=null?l:[aR].filter(d=>d!=null),JA(Ur(s.value?t[1]:t[0])),JA(v(s.value?t[2]:t[1])),Ur(s.value?t[3]:t[2])]},([o,l,d,c])=>{if(n(),!(o!=null&&o.length)||!(l!=null&&l.length)||!(d!=null&&d.length))return;const f=yhe(c)?ge({},c):c;e.push(...o.flatMap(p=>l.flatMap(h=>d.map(m=>r(p,h,m,f)))))},{flush:"post"}),a=()=>{i(),n()};return db(n),a}function She(){const t=Mo(!1),e=ai();return e&&yt(()=>{t.value=!0},e),t}function Che(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function Ahe(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=aR,eventName:i="keydown",passive:a=!1,dedupe:o=!1}=r,l=Che(e);return ng(s,i,c=>{c.repeat&&Ur(o)||l(c)&&n(c)},a)}function The(t){return JSON.parse(JSON.stringify(t))}function md(t,e,n,r={}){var s,i,a;const{clone:o=!1,passive:l=!1,eventName:d,deep:c=!1,defaultValue:f,shouldEmit:p}=r,h=ai(),m=n||(h==null?void 0:h.emit)||((s=h==null?void 0:h.$emit)==null?void 0:s.bind(h))||((a=(i=h==null?void 0:h.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(h==null?void 0:h.proxy));let g=d;e||(e="modelValue"),g=g||`update:${e.toString()}`;const y=k=>o?typeof o=="function"?o(k):The(k):k,x=()=>ghe(t[e])?y(t[e]):f,_=k=>{p?p(k)&&m(g,k):m(g,k)};if(l){const k=x(),w=Q(k);let S=!1;return et(()=>t[e],C=>{S||(S=!0,w.value=y(C),nr(()=>S=!1))}),et(w,C=>{!S&&(C!==t[e]||c)&&_(C)},{deep:c}),w}else return Z({get(){return x()},set(k){_(k)}})}function e4(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function d$(t,e,n=".",r){if(!e4(e))return d$(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const a=t[i];a!=null&&(r&&r(s,i,a,n)||(Array.isArray(a)&&Array.isArray(s[i])?s[i]=[...a,...s[i]]:e4(a)&&e4(s[i])?s[i]=d$(a,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=a))}return s}function $he(t){return(...e)=>e.reduce((n,r)=>d$(n,r,"",t),{})}const Mhe=$he(),Ehe=eK(()=>{const t=Q(new Map),e=Q(),n=Z(()=>{for(const a of t.value.values())if(a)return!0;return!1}),r=JY({scrollBody:Q(!0)});let s=null;const i=()=>{var a;document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=(a=e.value)!=null?a:"",l8&&(s==null||s()),e.value=void 0};return et(n,(a,o)=>{var f;if(!hd)return;if(!a){o&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,d={padding:l,margin:0},c=(f=r.scrollBody)!=null&&f.value?typeof r.scrollBody.value=="object"?Mhe({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},d):d:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof c.padding=="number"?`${c.padding}px`:String(c.padding),document.body.style.marginRight=typeof c.margin=="number"?`${c.margin}px`:String(c.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),l8&&(s=ng(document,"touchmove",p=>Dhe(p),{passive:!1})),nr(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function oR(t){const e=Math.random().toString(36).substring(2,7),n=Ehe();n.value.set(e,t!=null?t:!1);const r=Z({get:()=>{var s;return(s=n.value.get(e))!=null?s:!1},set:s=>n.value.set(e,s)});return whe(()=>{n.value.delete(e)}),r}function rK(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:rK(n)}}function Dhe(t){const e=t||window.event,n=e.target;return n instanceof Element&&rK(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function lR(t){const e=JY({dir:Q("ltr")});return Z(()=>{var n;return(t==null?void 0:t.value)||((n=e.dir)==null?void 0:n.value)||"ltr"})}function cb(t){const e=ai(),n=e==null?void 0:e.type.emits,r={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),n==null||n.forEach(s=>{r[Py(Si(s))]=(...i)=>t(s,...i)}),r}let t4=0;function sK(){Hr(t=>{var n,r;if(!hd)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",(n=e[0])!=null?n:u8()),document.body.insertAdjacentElement("beforeend",(r=e[1])!=null?r:u8()),t4++,t(()=>{t4===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(s=>s.remove()),t4--})})}function u8(){const t=document.createElement("span");return t.setAttribute("data-reka-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}function Rhe(t){return Z(()=>{var e;return _he(t)?!!((e=ah(t))!=null&&e.closest("form")):!0})}function cn(){const t=ai(),e=Q(),n=Z(()=>{var a,o;return["#text","#comment"].includes((a=e.value)==null?void 0:a.$el.nodeName)?(o=e.value)==null?void 0:o.$el.nextElementSibling:ah(e)}),r=Object.assign({},t.exposed),s={};for(const a in t.props)Object.defineProperty(s,a,{enumerable:!0,configurable:!0,get:()=>t.props[a]});if(Object.keys(r).length>0)for(const a in r)Object.defineProperty(s,a,{enumerable:!0,configurable:!0,get:()=>r[a]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=s;function i(a){e.value=a,a&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>a instanceof Element?a:a.$el}),t.exposed=s)}return{forwardRef:i,currentRef:e,currentElement:n}}function uR(t){var s;const e=ai(),n=Object.keys((s=e==null?void 0:e.type.props)!=null?s:{}).reduce((i,a)=>{const o=(e==null?void 0:e.type.props[a]).default;return o!==void 0&&(i[a]=o),i},{}),r=n2(t);return Z(()=>{var o;const i={},a=(o=e==null?void 0:e.vnode.props)!=null?o:{};return Object.keys(a).forEach(l=>{i[Si(l)]=a[l]}),Object.keys(ge(ge({},n),i)).reduce((l,d)=>(r.value[d]!==void 0&&(l[d]=r.value[d]),l),{})})}function Kl(t,e){const n=uR(t),r=e?cb(e):{};return Z(()=>ge(ge({},n.value),r))}function Phe(t,e){const n=tK(!1,300),r=Q(null),s=che();function i(){r.value=null,n.value=!1}function a(o,l){const d=o.currentTarget,c={x:o.clientX,y:o.clientY},f=Ihe(c,d.getBoundingClientRect()),p=Ohe(c,f),h=Lhe(l.getBoundingClientRect()),m=Nhe([...p,...h]);r.value=m,n.value=!0}return Hr(o=>{if(t.value&&e.value){const l=c=>a(c,e.value),d=c=>a(c,t.value);t.value.addEventListener("pointerleave",l),e.value.addEventListener("pointerleave",d),o(()=>{var c,f;(c=t.value)==null||c.removeEventListener("pointerleave",l),(f=e.value)==null||f.removeEventListener("pointerleave",d)})}}),Hr(o=>{var l;if(r.value){const d=c=>{var y,x;if(!r.value||!(c.target instanceof Element))return;const f=c.target,p={x:c.clientX,y:c.clientY},h=((y=t.value)==null?void 0:y.contains(f))||((x=e.value)==null?void 0:x.contains(f)),m=!Vhe(p,r.value),g=!!f.closest("[data-grace-area-trigger]");h?i():(m||g)&&(i(),s.trigger())};(l=t.value)==null||l.ownerDocument.addEventListener("pointermove",d),o(()=>{var c;return(c=t.value)==null?void 0:c.ownerDocument.removeEventListener("pointermove",d)})}}),{isPointerInTransit:n,onPointerExit:s.on}}function Ihe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Ohe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Lhe(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Vhe(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const o=e[i].x,l=e[i].y,d=e[a].x,c=e[a].y;l>r!=c>r&&n<(d-o)*(r-l)/(c-l)+o&&(s=!s)}return s}function Nhe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),jhe(e)}function jhe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Fhe=function(t){if(typeof document=="undefined")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Dh=new WeakMap,rx=new WeakMap,sx={},n4=0,iK=function(t){return t&&(t.host||iK(t.parentNode))},Bhe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=iK(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},zhe=function(t,e,n,r){var s=Bhe(e,Array.isArray(t)?t:[t]);sx[n]||(sx[n]=new WeakMap);var i=sx[n],a=[],o=new Set,l=new Set(s),d=function(f){!f||o.has(f)||(o.add(f),d(f.parentNode))};s.forEach(d);var c=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(o.has(p))c(p);else try{var h=p.getAttribute(r),m=h!==null&&h!=="false",g=(Dh.get(p)||0)+1,y=(i.get(p)||0)+1;Dh.set(p,g),i.set(p,y),a.push(p),g===1&&m&&rx.set(p,!0),y===1&&p.setAttribute(n,"true"),m||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return c(e),o.clear(),n4++,function(){a.forEach(function(f){var p=Dh.get(f)-1,h=i.get(f)-1;Dh.set(f,p),i.set(f,h),p||(rx.has(f)||f.removeAttribute(r),rx.delete(f)),h||f.removeAttribute(n)}),n4--,n4||(Dh=new WeakMap,Dh=new WeakMap,rx=new WeakMap,sx={})}},Uhe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Fhe(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),zhe(r,s,n,"aria-hidden")):function(){return null}};function dR(t){let e;et(()=>ah(t),n=>{n?e=Uhe(n):e&&e()}),ks(()=>{e&&e()})}function Ec(t,e="reka"){return`${e}-${aw==null?void 0:aw()}`}function Hhe(t){const e=Q(),n=Z(()=>{var s,i;return(i=(s=e.value)==null?void 0:s.width)!=null?i:0}),r=Z(()=>{var s,i;return(i=(s=e.value)==null?void 0:s.height)!=null?i:0});return yt(()=>{const s=ah(t);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let l,d;if("borderBoxSize"in o){const c=o.borderBoxSize,f=Array.isArray(c)?c[0]:c;l=f.inlineSize,d=f.blockSize}else l=s.offsetWidth,d=s.offsetHeight;e.value={width:l,height:d}});return i.observe(s,{box:"border-box"}),()=>i.unobserve(s)}else e.value=void 0}),{width:n,height:r}}function qhe(t,e){const n=Q(t);function r(i){const a=e[n.value][i];return a!=null?a:n.value}return{state:n,dispatch:i=>{n.value=r(i)}}}function Whe(t){const e=tK("",1e3);return{search:e,handleTypeaheadSearch:(s,i)=>{e.value=e.value+s;{const a=Ki(),o=i.map(p=>{var h,m,g,y;return ze(ge({},p),{textValue:(y=(g=(h=p.value)==null?void 0:h.textValue)!=null?g:(m=p.ref.textContent)==null?void 0:m.trim())!=null?y:""})}),l=o.find(p=>p.ref===a),d=o.map(p=>p.textValue),c=Yhe(d,e.value,l==null?void 0:l.textValue),f=o.find(p=>p.textValue===c);return f&&f.ref.focus(),f==null?void 0:f.ref}},resetTypeahead:()=>{e.value=""}}}function Ghe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Yhe(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=Ghe(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const l=a.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Khe(t,e){var y,x;const n=Q({}),r=Q("none"),s=Q(t),i=t.value?"mounted":"unmounted";let a;const o=(x=(y=e.value)==null?void 0:y.ownerDocument.defaultView)!=null?x:aR,{state:l,dispatch:d}=qhe(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=_=>{var k;if(hd){const w=new CustomEvent(_,{bubbles:!1,cancelable:!1});(k=e.value)==null||k.dispatchEvent(w)}};et(t,(_,k)=>ue(this,null,function*(){var S;const w=k!==_;if(yield nr(),w){const C=r.value,A=ix(e.value);_?(d("MOUNT"),c("enter"),A==="none"&&c("after-enter")):A==="none"||A==="undefined"||((S=n.value)==null?void 0:S.display)==="none"?(d("UNMOUNT"),c("leave"),c("after-leave")):k&&C!==A?(d("ANIMATION_OUT"),c("leave")):(d("UNMOUNT"),c("after-leave"))}}),{immediate:!0});const f=_=>{const k=ix(e.value),w=k.includes(CSS.escape(_.animationName)),S=l.value==="mounted"?"enter":"leave";if(_.target===e.value&&w&&(c(`after-${S}`),d("ANIMATION_END"),!s.value)){const C=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",a=o==null?void 0:o.setTimeout(()=>{var A;((A=e.value)==null?void 0:A.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=C)})}_.target===e.value&&k==="none"&&d("ANIMATION_END")},p=_=>{_.target===e.value&&(r.value=ix(e.value))},h=et(e,(_,k)=>{_?(n.value=getComputedStyle(_),_.addEventListener("animationstart",p),_.addEventListener("animationcancel",f),_.addEventListener("animationend",f)):(d("ANIMATION_END"),a!==void 0&&(o==null||o.clearTimeout(a)),k==null||k.removeEventListener("animationstart",p),k==null||k.removeEventListener("animationcancel",f),k==null||k.removeEventListener("animationend",f))},{immediate:!0}),m=et(l,()=>{const _=ix(e.value);r.value=l.value==="mounted"?_:"none"});return ks(()=>{h(),m()}),{isPresent:Z(()=>["mounted","unmountSuspended"].includes(l.value))}}function ix(t){return t&&getComputedStyle(t).animationName||"none"}var Dg=Je({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){var d;const{present:r,forceMount:s}=no(t),i=Q(),{isPresent:a}=Khe(r,i);n({present:a});let o=e.default({present:a.value});o=iR(o||[]);const l=ai();if(o&&(o==null?void 0:o.length)>1){const c=(d=l==null?void 0:l.parent)!=null&&d.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(f=>`  - ${f}`).join(`
`)].join(`
`))}return()=>s.value||r.value||a.value?pr(e.default({present:a.value})[0],{ref:c=>{const f=ah(c);return typeof(f==null?void 0:f.hasAttribute)=="undefined"||(f!=null&&f.hasAttribute("data-reka-popper-content-wrapper")?i.value=f.firstElementChild:i.value=f),f}}):null}});const c$=Je({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{var l;if(!n.default)return null;const r=iR(n.default()),s=r.findIndex(d=>d.type!==ys);if(s===-1)return r;const i=r[s];(l=i.props)==null||delete l.ref;const a=i.props?xt(e,i.props):e,o=Oo(ze(ge({},i),{props:{}}),a);return r.length===1?o:(r[s]=o,r)}}}),Xhe=["area","img","input"],Bs=Je({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&Xhe.includes(r)?()=>pr(r,e):r!=="template"?()=>pr(t.as,e,{default:n.default}):()=>pr(c$,e,{default:n.default})}});function f$(){const t=Q(),e=Z(()=>{var n,r;return["#text","#comment"].includes((n=t.value)==null?void 0:n.$el.nodeName)?(r=t.value)==null?void 0:r.$el.nextElementSibling:ah(t)});return{primitiveElement:t,currentElement:e}}const[gd,Qhe]=na("DialogRoot");var Zhe=Je({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=md(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=Q(),a=Q(),{modal:o}=no(n);return Qhe({open:s,modal:o,openModal:()=>{s.value=!0},onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:a}),(l,d)=>qe(l.$slots,"default",{open:v(s),close:()=>s.value=!1})}}),Jhe=Zhe,eme=Je({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t;cn();const n=gd();return(r,s)=>(T(),he(v(Bs),xt(e,{type:r.as==="button"?"button":void 0,onClick:s[0]||(s[0]=i=>v(n).onOpenChange(!1))}),{default:D(()=>[qe(r.$slots,"default")]),_:3},16,["type"]))}}),tme=eme;const nme="dismissableLayer.pointerDownOutside",rme="dismissableLayer.focusOutside";function aK(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),s=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||s.indexOf(r)<s.indexOf(n)))}function sme(t,e,n=!0){var a,o;const r=(o=(a=e==null?void 0:e.value)==null?void 0:a.ownerDocument)!=null?o:globalThis==null?void 0:globalThis.document,s=Q(!1),i=Q(()=>{});return Hr(l=>{if(!hd||!Ur(n))return;const d=f=>ue(this,null,function*(){const p=f.target;if(!(!(e!=null&&e.value)||!p)){if(aK(e.value,p)){s.value=!1;return}if(f.target&&!s.value){let m=function(){QY(nme,t,h)};const h={originalEvent:f};f.pointerType==="touch"?(r.removeEventListener("click",i.value),i.value=m,r.addEventListener("click",i.value,{once:!0})):m()}else r.removeEventListener("click",i.value);s.value=!1}}),c=window.setTimeout(()=>{r.addEventListener("pointerdown",d)},0);l(()=>{window.clearTimeout(c),r.removeEventListener("pointerdown",d),r.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{Ur(n)&&(s.value=!0)}}}function ime(t,e,n=!0){var i,a;const r=(a=(i=e==null?void 0:e.value)==null?void 0:i.ownerDocument)!=null?a:globalThis==null?void 0:globalThis.document,s=Q(!1);return Hr(o=>{if(!hd||!Ur(n))return;const l=d=>ue(this,null,function*(){if(!(e!=null&&e.value))return;yield nr(),yield nr();const c=d.target;!e.value||!c||aK(e.value,c)||d.target&&!s.value&&QY(rme,t,{originalEvent:d})});r.addEventListener("focusin",l),o(()=>r.removeEventListener("focusin",l))}),{onFocusCapture:()=>{Ur(n)&&(s.value=!0)},onBlurCapture:()=>{Ur(n)&&(s.value=!1)}}}const ou=Jt({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var ame=Je({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=cn(),a=Z(()=>{var m,g;return(g=(m=i.value)==null?void 0:m.ownerDocument)!=null?g:globalThis.document}),o=Z(()=>ou.layersRoot),l=Z(()=>i.value?Array.from(o.value).indexOf(i.value):-1),d=Z(()=>ou.layersWithOutsidePointerEventsDisabled.size>0),c=Z(()=>{const m=Array.from(o.value),[g]=[...ou.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g);return l.value>=y}),f=sme(m=>ue(this,null,function*(){const g=[...ou.branches].some(y=>y==null?void 0:y.contains(m.target));!c.value||g||(r("pointerDownOutside",m),r("interactOutside",m),yield nr(),m.defaultPrevented||r("dismiss"))}),i),p=ime(m=>{[...ou.branches].some(y=>y==null?void 0:y.contains(m.target))||(r("focusOutside",m),r("interactOutside",m),m.defaultPrevented||r("dismiss"))},i);Ahe("Escape",m=>{l.value===o.value.size-1&&(r("escapeKeyDown",m),m.defaultPrevented||r("dismiss"))});let h;return Hr(m=>{i.value&&(n.disableOutsidePointerEvents&&(ou.layersWithOutsidePointerEventsDisabled.size===0&&(h=a.value.body.style.pointerEvents,a.value.body.style.pointerEvents="none"),ou.layersWithOutsidePointerEventsDisabled.add(i.value)),o.value.add(i.value),m(()=>{n.disableOutsidePointerEvents&&ou.layersWithOutsidePointerEventsDisabled.size===1&&(a.value.body.style.pointerEvents=h)}))}),Hr(m=>{m(()=>{i.value&&(o.value.delete(i.value),ou.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(m,g)=>(T(),he(v(Bs),{ref:v(s),"as-child":m.asChild,as:m.as,"data-dismissable-layer":"",style:rt({pointerEvents:d.value?c.value?"auto":"none":void 0}),onFocusCapture:v(p).onFocusCapture,onBlurCapture:v(p).onBlurCapture,onPointerdownCapture:v(f).onPointerDownCapture},{default:D(()=>[qe(m.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),JS=ame;const ome=fhe(()=>Q([]));function lme(){const t=ome();return{add(e){const n=t.value[0];e!==n&&(n==null||n.pause()),t.value=d8(t.value,e),t.value.unshift(e)},remove(e){var n;t.value=d8(t.value,e),(n=t.value[0])==null||n.resume()}}}function d8(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function ume(t){return t.filter(e=>e.tagName!=="A")}const r4="focusScope.autoFocusOnMount",s4="focusScope.autoFocusOnUnmount",c8={bubbles:!1,cancelable:!0};function dme(t,{select:e=!1}={}){const n=Ki();for(const r of t)if(Vd(r,{select:e}),Ki()!==n)return!0}function cme(t){const e=oK(t),n=f8(e,t),r=f8(e.reverse(),t);return[n,r]}function oK(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function f8(t,e){for(const n of t)if(!fme(n,{upTo:e}))return n}function fme(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function pme(t){return t instanceof HTMLInputElement&&"select"in t}function Vd(t,{select:e=!1}={}){if(t&&t.focus){const n=Ki();t.focus({preventScroll:!0}),t!==n&&pme(t)&&e&&t.select()}}var hme=Je({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:s,currentElement:i}=cn(),a=Q(null),o=lme(),l=Jt({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Hr(c=>{if(!hd)return;const f=i.value;if(!n.trapped)return;function p(y){if(l.paused||!f)return;const x=y.target;f.contains(x)?a.value=x:Vd(a.value,{select:!0})}function h(y){if(l.paused||!f)return;const x=y.relatedTarget;x!==null&&(f.contains(x)||Vd(a.value,{select:!0}))}function m(y){f.contains(a.value)||Vd(f)}document.addEventListener("focusin",p),document.addEventListener("focusout",h);const g=new MutationObserver(m);f&&g.observe(f,{childList:!0,subtree:!0}),c(()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",h),g.disconnect()})}),Hr(c=>ue(this,null,function*(){const f=i.value;if(yield nr(),!f)return;o.add(l);const p=Ki();if(!f.contains(p)){const m=new CustomEvent(r4,c8);f.addEventListener(r4,g=>r("mountAutoFocus",g)),f.dispatchEvent(m),m.defaultPrevented||(dme(ume(oK(f)),{select:!0}),Ki()===p&&Vd(f))}c(()=>{f.removeEventListener(r4,y=>r("mountAutoFocus",y));const m=new CustomEvent(s4,c8),g=y=>{r("unmountAutoFocus",y)};f.addEventListener(s4,g),f.dispatchEvent(m),setTimeout(()=>{m.defaultPrevented||Vd(p!=null?p:document.body,{select:!0}),f.removeEventListener(s4,g),o.remove(l)},0)})}));function d(c){if(!n.loop&&!n.trapped||l.paused)return;const f=c.key==="Tab"&&!c.altKey&&!c.ctrlKey&&!c.metaKey,p=Ki();if(f&&p){const h=c.currentTarget,[m,g]=cme(h);m&&g?!c.shiftKey&&p===g?(c.preventDefault(),n.loop&&Vd(m,{select:!0})):c.shiftKey&&p===m&&(c.preventDefault(),n.loop&&Vd(g,{select:!0})):p===h&&c.preventDefault()}}return(c,f)=>(T(),he(v(Bs),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":c.asChild,as:c.as,onKeydown:d},{default:D(()=>[qe(c.$slots,"default")]),_:3},8,["as-child","as"]))}}),cR=hme;const mme="menu.itemSelect",p$=["Enter"," "],gme=["ArrowDown","PageUp","Home"],lK=["ArrowUp","PageDown","End"],vme=[...gme,...lK],yme={ltr:[...p$,"ArrowRight"],rtl:[...p$,"ArrowLeft"]},bme={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function fR(t){return t?"open":"closed"}function xme(t){const e=Ki();for(const n of t)if(n===e||(n.focus(),Ki()!==e))return}function _me(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const o=e[i].x,l=e[i].y,d=e[a].x,c=e[a].y;l>r!=c>r&&n<(d-o)*(r-l)/(c-l)+o&&(s=!s)}return s}function wme(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return _me(n,e)}function B0(t){return t.pointerType==="mouse"}var kme=Je({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=gd(),{forwardRef:i,currentElement:a}=cn();return s.titleId||(s.titleId=Ec(void 0,"reka-dialog-title")),s.descriptionId||(s.descriptionId=Ec(void 0,"reka-dialog-description")),yt(()=>{s.contentElement=a,Ki()!==document.body&&(s.triggerElement.value=Ki())}),(o,l)=>(T(),he(v(cR),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=d=>r("openAutoFocus",d)),onUnmountAutoFocus:l[6]||(l[6]=d=>r("closeAutoFocus",d))},{default:D(()=>[b(v(JS),xt({id:v(s).contentId,ref:v(i),as:o.as,"as-child":o.asChild,"disable-outside-pointer-events":o.disableOutsidePointerEvents,role:"dialog","aria-describedby":v(s).descriptionId,"aria-labelledby":v(s).titleId,"data-state":v(fR)(v(s).open.value)},o.$attrs,{onDismiss:l[0]||(l[0]=d=>v(s).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=d=>r("escapeKeyDown",d)),onFocusOutside:l[2]||(l[2]=d=>r("focusOutside",d)),onInteractOutside:l[3]||(l[3]=d=>r("interactOutside",d)),onPointerDownOutside:l[4]||(l[4]=d=>r("pointerDownOutside",d))}),{default:D(()=>[qe(o.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),uK=kme,Sme=Je({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=gd(),i=cb(r),{forwardRef:a,currentElement:o}=cn();return dR(o),(l,d)=>(T(),he(uK,xt(ge(ge({},n),v(i)),{ref:v(a),"trap-focus":v(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:d[0]||(d[0]=c=>{var f;c.defaultPrevented||(c.preventDefault(),(f=v(s).triggerElement.value)==null||f.focus())}),onPointerDownOutside:d[1]||(d[1]=c=>{const f=c.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0;(f.button===2||p)&&c.preventDefault()}),onFocusOutside:d[2]||(d[2]=c=>{c.preventDefault()})}),{default:D(()=>[qe(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),Cme=Sme,Ame=Je({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=cb(e);cn();const i=gd(),a=Q(!1),o=Q(!1);return(l,d)=>(T(),he(uK,xt(ge(ge({},n),v(s)),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:d[0]||(d[0]=c=>{var f;c.defaultPrevented||(a.value||(f=v(i).triggerElement.value)==null||f.focus(),c.preventDefault()),a.value=!1,o.value=!1}),onInteractOutside:d[1]||(d[1]=c=>{var h;c.defaultPrevented||(a.value=!0,c.detail.originalEvent.type==="pointerdown"&&(o.value=!0));const f=c.target;((h=v(i).triggerElement.value)==null?void 0:h.contains(f))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&o.value&&c.preventDefault()})}),{default:D(()=>[qe(l.$slots,"default")]),_:3},16))}}),Tme=Ame,$me=Je({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=gd(),i=cb(r),{forwardRef:a}=cn();return(o,l)=>(T(),he(v(Dg),{present:o.forceMount||v(s).open.value},{default:D(()=>[v(s).modal.value?(T(),he(Cme,xt({key:0,ref:v(a)},ge(ge(ge({},n),v(i)),o.$attrs)),{default:D(()=>[qe(o.$slots,"default")]),_:3},16)):(T(),he(Tme,xt({key:1,ref:v(a)},ge(ge(ge({},n),v(i)),o.$attrs)),{default:D(()=>[qe(o.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Mme=$me,Eme=Je({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const e=t;cn();const n=gd();return(r,s)=>(T(),he(v(Bs),xt(e,{id:v(n).descriptionId}),{default:D(()=>[qe(r.$slots,"default")]),_:3},16,["id"]))}}),dK=Eme,Dme=Je({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=gd();return oR(!0),cn(),(n,r)=>(T(),he(v(Bs),{as:n.as,"as-child":n.asChild,"data-state":v(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:D(()=>[qe(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Rme=Dme,Pme=Je({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=gd(),{forwardRef:n}=cn();return(r,s)=>{var i;return(i=v(e))!=null&&i.modal.value?(T(),he(v(Dg),{key:0,present:r.forceMount||v(e).open.value},{default:D(()=>[b(Rme,xt(r.$attrs,{ref:v(n),as:r.as,"as-child":r.asChild}),{default:D(()=>[qe(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):se("v-if",!0)}}}),Ime=Pme,Ome=Je({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=She();return(n,r)=>v(e)||n.forceMount?(T(),he(jD,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[qe(n.$slots,"default")],8,["to","disabled","defer"])):se("v-if",!0)}}),eC=Ome,Lme=Je({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(v(eC),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),Vme=Lme,Nme=Je({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const e=t,n=gd();return cn(),(r,s)=>(T(),he(v(Bs),xt(e,{id:v(n).titleId}),{default:D(()=>[qe(r.$slots,"default")]),_:3},16,["id"]))}}),cK=Nme;const p8="data-reka-collection-item";function fK(t={}){const{key:e="",isProvider:n=!1}=t,r=`${e}CollectionProvider`;let s;if(n){const c=Q(new Map);s={collectionRef:Q(),itemMap:c},_i(r,s)}else s=Qn(r);const i=(c=!1)=>{const f=s.collectionRef.value;if(!f)return[];const p=Array.from(f.querySelectorAll(`[${p8}]`)),m=Array.from(s.itemMap.value.values()).sort((g,y)=>p.indexOf(g.ref)-p.indexOf(y.ref));return c?m:m.filter(g=>g.ref.dataset.disabled!=="")},a=Je({name:"CollectionSlot",setup(c,{slots:f}){const{primitiveElement:p,currentElement:h}=f$();return et(h,()=>{s.collectionRef.value=h.value}),()=>pr(c$,{ref:p},f)}}),o=Je({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(c,{slots:f,attrs:p}){const{primitiveElement:h,currentElement:m}=f$();return Hr(g=>{if(m.value){const y=zt(m.value);s.itemMap.value.set(y,{ref:m.value,value:c.value}),g(()=>s.itemMap.value.delete(y))}}),()=>pr(c$,ze(ge({},p),{[p8]:"",ref:h}),f)}}),l=Z(()=>Array.from(s.itemMap.value.values())),d=Z(()=>s.itemMap.value.size);return{getItems:i,reactiveItems:l,itemMapSize:d,CollectionSlot:a,CollectionItem:o}}const jme="rovingFocusGroup.onEntryFocus",Fme={bubbles:!1,cancelable:!0};function Bme(t,e=!1){const n=Ki();for(const r of t)if(r===n||(r.focus({preventScroll:e}),Ki()!==n))return}const[dPn,zme]=na("RovingFocusGroup");var Ume=Je({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:n}){const r=t,s=n,{loop:i,orientation:a,dir:o}=no(r),l=lR(o),d=md(r,"currentTabStopId",s,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),c=Q(!1),f=Q(!1),p=Q(0),{getItems:h,CollectionSlot:m}=fK({isProvider:!0});function g(x){const _=!f.value;if(x.currentTarget&&x.target===x.currentTarget&&_&&!c.value){const k=new CustomEvent(jme,Fme);if(x.currentTarget.dispatchEvent(k),s("entryFocus",k),!k.defaultPrevented){const w=h().map(E=>E.ref).filter(E=>E.dataset.disabled!==""),S=w.find(E=>E.getAttribute("data-active")===""),C=w.find(E=>E.getAttribute("data-highlighted")===""),A=w.find(E=>E.id===d.value),M=[S,C,A,...w].filter(Boolean);Bme(M,r.preventScrollOnEntryFocus)}}f.value=!1}function y(){setTimeout(()=>{f.value=!1},1)}return e({getItems:h}),zme({loop:i,dir:l,orientation:a,currentTabStopId:d,onItemFocus:x=>{d.value=x},onItemShiftTab:()=>{c.value=!0},onFocusableItemAdd:()=>{p.value++},onFocusableItemRemove:()=>{p.value--}}),(x,_)=>(T(),he(v(m),null,{default:D(()=>[b(v(Bs),{tabindex:c.value||p.value===0?-1:0,"data-orientation":v(a),as:x.as,"as-child":x.asChild,dir:v(l),style:{outline:"none"},onMousedown:_[0]||(_[0]=k=>f.value=!0),onMouseup:y,onFocus:g,onBlur:_[1]||(_[1]=k=>c.value=!1)},{default:D(()=>[qe(x.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Hme=Ume,qme=Je({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){return(e,n)=>(T(),he(v(Bs),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:D(()=>[qe(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),pK=qme,Wme=Je({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(t){const e=t,{primitiveElement:n,currentElement:r}=f$(),s=Z(()=>{var i;return(i=e.checked)!=null?i:e.value});return et(s,(i,a)=>{if(!r.value)return;const o=r.value,l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(c&&i!==a){const f=new Event("input",{bubbles:!0}),p=new Event("change",{bubbles:!0});c.call(o,i),o.dispatchEvent(f),o.dispatchEvent(p)}}),(i,a)=>(T(),he(pK,xt({ref_key:"primitiveElement",ref:n},ge(ge({},e),i.$attrs),{as:"input"}),null,16))}}),h8=Wme,Gme=Je({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(t){const e=t,n=Z(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=Z(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((s,i)=>typeof s=="object"?Object.entries(s).map(([a,o])=>({name:`${e.name}[${i}][${a}]`,value:o})):{name:`${e.name}[${i}]`,value:s}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([s,i])=>({name:`${e.name}[${s}]`,value:i})):[]);return(s,i)=>(T(),R(xe,null,[se(" We render single input if it's required "),n.value?(T(),he(h8,xt({key:s.name},ge(ge({},e),s.$attrs),{name:s.name,value:s.value}),null,16,["name","value"])):(T(!0),R(xe,{key:1},_e(r.value,a=>(T(),he(h8,xt({key:a.name},{ref_for:!0},ge(ge({},e),s.$attrs),{name:a.name,value:a.value}),null,16,["name","value"]))),128))],2112))}}),Yme=Gme;const[hK,Kme]=na("PopperRoot");var Xme=Je({inheritAttrs:!1,__name:"PopperRoot",setup(t){const e=Q();return Kme({anchor:e,onAnchorChange:n=>e.value=n}),(n,r)=>qe(n.$slots,"default")}}),tC=Xme,Qme=Je({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{forwardRef:n,currentElement:r}=cn(),s=hK();return MG(()=>{var i;s.onAnchorChange((i=e.reference)!=null?i:r.value)}),(i,a)=>(T(),he(v(Bs),{ref:v(n),as:i.as,"as-child":i.asChild},{default:D(()=>[qe(i.$slots,"default")]),_:3},8,["as","as-child"]))}}),pR=Qme;const Zme={key:0,d:"M0 0L6 6L12 0"},Jme={key:1,d:"M0 0L4.58579 4.58579C5.36683 5.36683 6.63316 5.36684 7.41421 4.58579L12 0"};var ege=Je({__name:"Arrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(t){const e=t;return cn(),(n,r)=>(T(),he(v(Bs),xt(e,{width:n.width,height:n.height,viewBox:n.asChild?void 0:"0 0 12 6",preserveAspectRatio:n.asChild?void 0:"none"}),{default:D(()=>[qe(n.$slots,"default",{},()=>[n.rounded?(T(),R("path",Jme)):(T(),R("path",Zme))])]),_:3},16,["width","height","viewBox","preserveAspectRatio"]))}}),tge=ege;function nge(t){return t!==null}function rge(t){return{name:"transformOrigin",options:t,fn(e){var y,x,_,k,w;const{placement:n,rects:r,middlewareData:s}=e,a=((y=s.arrow)==null?void 0:y.centerOffset)!==0,o=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[d,c]=h$(n),f={start:"0%",center:"50%",end:"100%"}[c],p=((_=(x=s.arrow)==null?void 0:x.x)!=null?_:0)+o/2,h=((w=(k=s.arrow)==null?void 0:k.y)!=null?w:0)+l/2;let m="",g="";return d==="bottom"?(m=a?f:`${p}px`,g=`${-l}px`):d==="top"?(m=a?f:`${p}px`,g=`${r.floating.height+l}px`):d==="right"?(m=`${-l}px`,g=a?f:`${h}px`):d==="left"&&(m=`${r.floating.width+l}px`,g=a?f:`${h}px`),{data:{x:m,y:g}}}}}function h$(t){const[e,n="center"]=t.split("-");return[e,n]}const sge=["top","right","bottom","left"],Dc=Math.min,sa=Math.max,h2=Math.round,ax=Math.floor,Ml=t=>({x:t,y:t}),ige={left:"right",right:"left",bottom:"top",top:"bottom"},age={start:"end",end:"start"};function m$(t,e,n){return sa(t,Dc(e,n))}function ed(t,e){return typeof t=="function"?t(e):t}function td(t){return t.split("-")[0]}function Rg(t){return t.split("-")[1]}function hR(t){return t==="x"?"y":"x"}function mR(t){return t==="y"?"height":"width"}const oge=new Set(["top","bottom"]);function xl(t){return oge.has(td(t))?"y":"x"}function gR(t){return hR(xl(t))}function lge(t,e,n){n===void 0&&(n=!1);const r=Rg(t),s=gR(t),i=mR(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=m2(a)),[a,m2(a)]}function uge(t){const e=m2(t);return[g$(t),e,g$(e)]}function g$(t){return t.replace(/start|end/g,e=>age[e])}const m8=["left","right"],g8=["right","left"],dge=["top","bottom"],cge=["bottom","top"];function fge(t,e,n){switch(t){case"top":case"bottom":return n?e?g8:m8:e?m8:g8;case"left":case"right":return e?dge:cge;default:return[]}}function pge(t,e,n,r){const s=Rg(t);let i=fge(td(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(g$)))),i}function m2(t){return t.replace(/left|right|bottom|top/g,e=>ige[e])}function hge(t){return ge({top:0,right:0,bottom:0,left:0},t)}function mK(t){return typeof t!="number"?hge(t):{top:t,right:t,bottom:t,left:t}}function g2(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function v8(t,e,n){let{reference:r,floating:s}=t;const i=xl(e),a=gR(e),o=mR(a),l=td(e),d=i==="y",c=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[o]/2-s[o]/2;let h;switch(l){case"top":h={x:c,y:r.y-s.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-s.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Rg(e)){case"start":h[a]-=p*(n&&d?-1:1);break;case"end":h[a]+=p*(n&&d?-1:1);break}return h}const mge=(t,e,n)=>ue(void 0,null,function*(){const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,o=i.filter(Boolean),l=yield a.isRTL==null?void 0:a.isRTL(e);let d=yield a.getElementRects({reference:t,floating:e,strategy:s}),{x:c,y:f}=v8(d,r,l),p=r,h={},m=0;for(let g=0;g<o.length;g++){const{name:y,fn:x}=o[g],{x:_,y:k,data:w,reset:S}=yield x({x:c,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:h,rects:d,platform:a,elements:{reference:t,floating:e}});c=_!=null?_:c,f=k!=null?k:f,h=ze(ge({},h),{[y]:ge(ge({},h[y]),w)}),S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(d=S.rects===!0?yield a.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:c,y:f}=v8(d,p,l)),g=-1)}return{x:c,y:f,placement:p,strategy:s,middlewareData:h}});function z0(t,e){return ue(this,null,function*(){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:o,strategy:l}=t,{boundary:d="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=ed(e,t),m=mK(h),y=o[p?f==="floating"?"reference":"floating":f],x=g2(yield i.getClippingRect({element:(n=yield i.isElement==null?void 0:i.isElement(y))==null||n?y:y.contextElement||(yield i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:c,strategy:l})),_=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,k=yield i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating),w=(yield i.isElement==null?void 0:i.isElement(k))?(yield i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},S=g2(i.convertOffsetParentRelativeRectToViewportRelativeRect?yield i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:k,strategy:l}):_);return{top:(x.top-S.top+m.top)/w.y,bottom:(S.bottom-x.bottom+m.bottom)/w.y,left:(x.left-S.left+m.left)/w.x,right:(S.right-x.right+m.right)/w.x}})}const gge=t=>({name:"arrow",options:t,fn(n){return ue(this,null,function*(){const{x:r,y:s,placement:i,rects:a,platform:o,elements:l,middlewareData:d}=n,{element:c,padding:f=0}=ed(t,n)||{};if(c==null)return{};const p=mK(f),h={x:r,y:s},m=gR(i),g=mR(m),y=yield o.getDimensions(c),x=m==="y",_=x?"top":"left",k=x?"bottom":"right",w=x?"clientHeight":"clientWidth",S=a.reference[g]+a.reference[m]-h[m]-a.floating[g],C=h[m]-a.reference[m],A=yield o.getOffsetParent==null?void 0:o.getOffsetParent(c);let M=A?A[w]:0;(!M||!(yield o.isElement==null?void 0:o.isElement(A)))&&(M=l.floating[w]||a.floating[g]);const E=S/2-C/2,P=M/2-y[g]/2-1,I=Dc(p[_],P),F=Dc(p[k],P),L=I,z=M-y[g]-F,N=M/2-y[g]/2+E,q=m$(L,N,z),V=!d.arrow&&Rg(i)!=null&&N!==q&&a.reference[g]/2-(N<L?I:F)-y[g]/2<0,O=V?N<L?N-L:N-z:0;return{[m]:h[m]+O,data:ge({[m]:q,centerOffset:N-q-O},V&&{alignmentOffset:O}),reset:V}})}}),vge=function(t){return t===void 0&&(t={}),{name:"flip",options:t,fn(n){return ue(this,null,function*(){var r,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:d,elements:c}=n,N=ed(t,n),{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0}=N,x=$s(N,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const _=td(i),k=xl(l),w=td(l)===l,S=yield d.isRTL==null?void 0:d.isRTL(c.floating),C=h||(w||!y?[m2(l)]:uge(l)),A=g!=="none";!h&&A&&C.push(...pge(l,y,g,S));const M=[l,...C],E=yield z0(n,x),P=[];let I=((s=a.flip)==null?void 0:s.overflows)||[];if(f&&P.push(E[_]),p){const q=lge(i,o,S);P.push(E[q[0]],E[q[1]])}if(I=[...I,{placement:i,overflows:P}],!P.every(q=>q<=0)){var F,L;const q=(((F=a.flip)==null?void 0:F.index)||0)+1,V=M[q];if(V&&(!(p==="alignment"?k!==xl(V):!1)||I.every(j=>xl(j.placement)===k?j.overflows[0]>0:!0)))return{data:{index:q,overflows:I},reset:{placement:V}};let O=(L=I.filter(X=>X.overflows[0]<=0).sort((X,j)=>X.overflows[1]-j.overflows[1])[0])==null?void 0:L.placement;if(!O)switch(m){case"bestFit":{var z;const X=(z=I.filter(j=>{if(A){const U=xl(j.placement);return U===k||U==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(U=>U>0).reduce((U,G)=>U+G,0)]).sort((j,U)=>j[1]-U[1])[0])==null?void 0:z[0];X&&(O=X);break}case"initialPlacement":O=l;break}if(i!==O)return{reset:{placement:O}}}return{}})}}};function y8(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function b8(t){return sge.some(e=>t[e]>=0)}const yge=function(t){return t===void 0&&(t={}),{name:"hide",options:t,fn(n){return ue(this,null,function*(){const{rects:r}=n,a=ed(t,n),{strategy:s="referenceHidden"}=a,i=$s(a,["strategy"]);switch(s){case"referenceHidden":{const o=yield z0(n,ze(ge({},i),{elementContext:"reference"})),l=y8(o,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:b8(l)}}}case"escaped":{const o=yield z0(n,ze(ge({},i),{altBoundary:!0})),l=y8(o,r.floating);return{data:{escapedOffsets:l,escaped:b8(l)}}}default:return{}}})}}},gK=new Set(["left","top"]);function bge(t,e){return ue(this,null,function*(){const{placement:n,platform:r,elements:s}=t,i=yield r.isRTL==null?void 0:r.isRTL(s.floating),a=td(n),o=Rg(n),l=xl(n)==="y",d=gK.has(a)?-1:1,c=i&&l?-1:1,f=ed(e,t);let{mainAxis:p,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof m=="number"&&(h=o==="end"?m*-1:m),l?{x:h*c,y:p*d}:{x:p*d,y:h*c}})}const xge=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(n){return ue(this,null,function*(){var r,s;const{x:i,y:a,placement:o,middlewareData:l}=n,d=yield bge(n,t);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:ze(ge({},d),{placement:o})}})}}},_ge=function(t){return t===void 0&&(t={}),{name:"shift",options:t,fn(n){return ue(this,null,function*(){const{x:r,y:s,placement:i}=n,x=ed(t,n),{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:_=>{let{x:k,y:w}=_;return{x:k,y:w}}}}=x,d=$s(x,["mainAxis","crossAxis","limiter"]),c={x:r,y:s},f=yield z0(n,d),p=xl(td(i)),h=hR(p);let m=c[h],g=c[p];if(a){const _=h==="y"?"top":"left",k=h==="y"?"bottom":"right",w=m+f[_],S=m-f[k];m=m$(w,m,S)}if(o){const _=p==="y"?"top":"left",k=p==="y"?"bottom":"right",w=g+f[_],S=g-f[k];g=m$(w,g,S)}const y=l.fn(ze(ge({},n),{[h]:m,[p]:g}));return ze(ge({},y),{data:{x:y.x-r,y:y.y-s,enabled:{[h]:a,[p]:o}}})})}}},wge=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:d=!0}=ed(t,e),c={x:n,y:r},f=xl(s),p=hR(f);let h=c[p],m=c[f];const g=ed(o,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:ge({mainAxis:0,crossAxis:0},g);if(l){const k=p==="y"?"height":"width",w=i.reference[p]-i.floating[k]+y.mainAxis,S=i.reference[p]+i.reference[k]-y.mainAxis;h<w?h=w:h>S&&(h=S)}if(d){var x,_;const k=p==="y"?"width":"height",w=gK.has(td(s)),S=i.reference[f]-i.floating[k]+(w&&((x=a.offset)==null?void 0:x[f])||0)+(w?0:y.crossAxis),C=i.reference[f]+i.reference[k]+(w?0:((_=a.offset)==null?void 0:_[f])||0)-(w?y.crossAxis:0);m<S?m=S:m>C&&(m=C)}return{[p]:h,[f]:m}}}},kge=function(t){return t===void 0&&(t={}),{name:"size",options:t,fn(n){return ue(this,null,function*(){var r,s;const{placement:i,rects:a,platform:o,elements:l}=n,I=ed(t,n),{apply:d=()=>{}}=I,c=$s(I,["apply"]),f=yield z0(n,c),p=td(i),h=Rg(i),m=xl(i)==="y",{width:g,height:y}=a.floating;let x,_;p==="top"||p==="bottom"?(x=p,_=h===((yield o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=p,x=h==="end"?"top":"bottom");const k=y-f.top-f.bottom,w=g-f.left-f.right,S=Dc(y-f[x],k),C=Dc(g-f[_],w),A=!n.middlewareData.shift;let M=S,E=C;if((r=n.middlewareData.shift)!=null&&r.enabled.x&&(E=w),(s=n.middlewareData.shift)!=null&&s.enabled.y&&(M=k),A&&!h){const F=sa(f.left,0),L=sa(f.right,0),z=sa(f.top,0),N=sa(f.bottom,0);m?E=g-2*(F!==0||L!==0?F+L:sa(f.left,f.right)):M=y-2*(z!==0||N!==0?z+N:sa(f.top,f.bottom))}yield d(ze(ge({},n),{availableWidth:E,availableHeight:M}));const P=yield o.getDimensions(l.floating);return g!==P.width||y!==P.height?{reset:{rects:!0}}:{}})}}};function nC(){return typeof window!="undefined"}function oh(t){return vR(t)?(t.nodeName||"").toLowerCase():"#document"}function ma(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Xl(t){var e;return(e=(vR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vR(t){return nC()?t instanceof Node||t instanceof ma(t).Node:!1}function Vo(t){return nC()?t instanceof Element||t instanceof ma(t).Element:!1}function Vl(t){return nC()?t instanceof HTMLElement||t instanceof ma(t).HTMLElement:!1}function x8(t){return!nC()||typeof ShadowRoot=="undefined"?!1:t instanceof ShadowRoot||t instanceof ma(t).ShadowRoot}const Sge=new Set(["inline","contents"]);function fb(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=No(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Sge.has(s)}const Cge=new Set(["table","td","th"]);function Age(t){return Cge.has(oh(t))}const Tge=[":popover-open",":modal"];function rC(t){return Tge.some(e=>{try{return t.matches(e)}catch(n){return!1}})}const $ge=["transform","translate","scale","rotate","perspective"],Mge=["transform","translate","scale","rotate","perspective","filter"],Ege=["paint","layout","strict","content"];function yR(t){const e=bR(),n=Vo(t)?No(t):t;return $ge.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Mge.some(r=>(n.willChange||"").includes(r))||Ege.some(r=>(n.contain||"").includes(r))}function Dge(t){let e=Rc(t);for(;Vl(e)&&!rg(e);){if(yR(e))return e;if(rC(e))return null;e=Rc(e)}return null}function bR(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Rge=new Set(["html","body","#document"]);function rg(t){return Rge.has(oh(t))}function No(t){return ma(t).getComputedStyle(t)}function sC(t){return Vo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Rc(t){if(oh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||x8(t)&&t.host||Xl(t);return x8(e)?e.host:e}function vK(t){const e=Rc(t);return rg(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vl(e)&&fb(e)?e:vK(e)}function U0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=vK(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=ma(s);if(i){const o=v$(a);return e.concat(a,a.visualViewport||[],fb(s)?s:[],o&&n?U0(o):[])}return e.concat(s,U0(s,[],n))}function v$(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yK(t){const e=No(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Vl(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,o=h2(n)!==i||h2(r)!==a;return o&&(n=i,r=a),{width:n,height:r,$:o}}function xR(t){return Vo(t)?t:t.contextElement}function Lm(t){const e=xR(t);if(!Vl(e))return Ml(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=yK(e);let a=(i?h2(n.width):n.width)/r,o=(i?h2(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Pge=Ml(0);function bK(t){const e=ma(t);return!bR()||!e.visualViewport?Pge:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ige(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ma(t)?!1:e}function Fp(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=xR(t);let a=Ml(1);e&&(r?Vo(r)&&(a=Lm(r)):a=Lm(t));const o=Ige(i,n,r)?bK(i):Ml(0);let l=(s.left+o.x)/a.x,d=(s.top+o.y)/a.y,c=s.width/a.x,f=s.height/a.y;if(i){const p=ma(i),h=r&&Vo(r)?ma(r):r;let m=p,g=v$(m);for(;g&&r&&h!==m;){const y=Lm(g),x=g.getBoundingClientRect(),_=No(g),k=x.left+(g.clientLeft+parseFloat(_.paddingLeft))*y.x,w=x.top+(g.clientTop+parseFloat(_.paddingTop))*y.y;l*=y.x,d*=y.y,c*=y.x,f*=y.y,l+=k,d+=w,m=ma(g),g=v$(m)}}return g2({width:c,height:f,x:l,y:d})}function iC(t,e){const n=sC(t).scrollLeft;return e?e.left+n:Fp(Xl(t)).left+n}function xK(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-iC(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function Oge(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=Xl(r),o=e?rC(e.floating):!1;if(r===a||o&&i)return n;let l={scrollLeft:0,scrollTop:0},d=Ml(1);const c=Ml(0),f=Vl(r);if((f||!f&&!i)&&((oh(r)!=="body"||fb(a))&&(l=sC(r)),Vl(r))){const h=Fp(r);d=Lm(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const p=a&&!f&&!i?xK(a,l):Ml(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-l.scrollLeft*d.x+c.x+p.x,y:n.y*d.y-l.scrollTop*d.y+c.y+p.y}}function Lge(t){return Array.from(t.getClientRects())}function Vge(t){const e=Xl(t),n=sC(t),r=t.ownerDocument.body,s=sa(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=sa(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+iC(t);const o=-n.scrollTop;return No(r).direction==="rtl"&&(a+=sa(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:o}}const _8=25;function Nge(t,e){const n=ma(t),r=Xl(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,o=0,l=0;if(s){i=s.width,a=s.height;const c=bR();(!c||c&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}const d=iC(r);if(d<=0){const c=r.ownerDocument,f=c.body,p=getComputedStyle(f),h=c.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,m=Math.abs(r.clientWidth-f.clientWidth-h);m<=_8&&(i-=m)}else d<=_8&&(i+=d);return{width:i,height:a,x:o,y:l}}const jge=new Set(["absolute","fixed"]);function Fge(t,e){const n=Fp(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Vl(t)?Lm(t):Ml(1),a=t.clientWidth*i.x,o=t.clientHeight*i.y,l=s*i.x,d=r*i.y;return{width:a,height:o,x:l,y:d}}function w8(t,e,n){let r;if(e==="viewport")r=Nge(t,n);else if(e==="document")r=Vge(Xl(t));else if(Vo(e))r=Fge(e,n);else{const s=bK(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return g2(r)}function _K(t,e){const n=Rc(t);return n===e||!Vo(n)||rg(n)?!1:No(n).position==="fixed"||_K(n,e)}function Bge(t,e){const n=e.get(t);if(n)return n;let r=U0(t,[],!1).filter(o=>Vo(o)&&oh(o)!=="body"),s=null;const i=No(t).position==="fixed";let a=i?Rc(t):t;for(;Vo(a)&&!rg(a);){const o=No(a),l=yR(a);!l&&o.position==="fixed"&&(s=null),(i?!l&&!s:!l&&o.position==="static"&&!!s&&jge.has(s.position)||fb(a)&&!l&&_K(t,a))?r=r.filter(c=>c!==a):s=o,a=Rc(a)}return e.set(t,r),r}function zge(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?rC(e)?[]:Bge(e,this._c):[].concat(n),r],o=a[0],l=a.reduce((d,c)=>{const f=w8(e,c,s);return d.top=sa(f.top,d.top),d.right=Dc(f.right,d.right),d.bottom=Dc(f.bottom,d.bottom),d.left=sa(f.left,d.left),d},w8(e,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Uge(t){const{width:e,height:n}=yK(t);return{width:e,height:n}}function Hge(t,e,n){const r=Vl(e),s=Xl(e),i=n==="fixed",a=Fp(t,!0,i,e);let o={scrollLeft:0,scrollTop:0};const l=Ml(0);function d(){l.x=iC(s)}if(r||!r&&!i)if((oh(e)!=="body"||fb(s))&&(o=sC(e)),r){const h=Fp(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&d();i&&!r&&s&&d();const c=s&&!r&&!i?xK(s,o):Ml(0),f=a.left+o.scrollLeft-l.x-c.x,p=a.top+o.scrollTop-l.y-c.y;return{x:f,y:p,width:a.width,height:a.height}}function i4(t){return No(t).position==="static"}function k8(t,e){if(!Vl(t)||No(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Xl(t)===n&&(n=n.ownerDocument.body),n}function wK(t,e){const n=ma(t);if(rC(t))return n;if(!Vl(t)){let s=Rc(t);for(;s&&!rg(s);){if(Vo(s)&&!i4(s))return s;s=Rc(s)}return n}let r=k8(t,e);for(;r&&Age(r)&&i4(r);)r=k8(r,e);return r&&rg(r)&&i4(r)&&!yR(r)?n:r||Dge(t)||n}const qge=function(t){return ue(this,null,function*(){const e=this.getOffsetParent||wK,n=this.getDimensions,r=yield n(t.floating);return{reference:Hge(t.reference,yield e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}})};function Wge(t){return No(t).direction==="rtl"}const Gge={convertOffsetParentRelativeRectToViewportRelativeRect:Oge,getDocumentElement:Xl,getClippingRect:zge,getOffsetParent:wK,getElementRects:qge,getClientRects:Lge,getDimensions:Uge,getScale:Lm,isElement:Vo,isRTL:Wge};function kK(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Yge(t,e){let n=null,r;const s=Xl(t);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const d=t.getBoundingClientRect(),{left:c,top:f,width:p,height:h}=d;if(o||e(),!p||!h)return;const m=ax(f),g=ax(s.clientWidth-(c+p)),y=ax(s.clientHeight-(f+h)),x=ax(c),k={rootMargin:-m+"px "+-g+"px "+-y+"px "+-x+"px",threshold:sa(0,Dc(1,l))||1};let w=!0;function S(C){const A=C[0].intersectionRatio;if(A!==l){if(!w)return a();A?a(!1,A):r=setTimeout(()=>{a(!1,1e-7)},1e3)}A===1&&!kK(d,t.getBoundingClientRect())&&a(),w=!1}try{n=new IntersectionObserver(S,ze(ge({},k),{root:s.ownerDocument}))}catch(C){n=new IntersectionObserver(S,k)}n.observe(t)}return a(!0),i}function Kge(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,d=xR(t),c=s||i?[...d?U0(d):[],...U0(e)]:[];c.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const f=d&&o?Yge(d,n):null;let p=-1,h=null;a&&(h=new ResizeObserver(x=>{let[_]=x;_&&_.target===d&&h&&(h.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var k;(k=h)==null||k.observe(e)})),n()}),d&&!l&&h.observe(d),h.observe(e));let m,g=l?Fp(t):null;l&&y();function y(){const x=Fp(t);g&&!kK(g,x)&&n(),g=x,m=requestAnimationFrame(y)}return n(),()=>{var x;c.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const Xge=xge,Qge=_ge,S8=vge,Zge=kge,Jge=yge,eve=gge,tve=wge,nve=(t,e,n)=>{const r=new Map,s=ge({platform:Gge},n),i=ze(ge({},s.platform),{_c:r});return mge(t,e,ze(ge({},s),{platform:i}))};function rve(t){return t!=null&&typeof t=="object"&&"$el"in t}function y$(t){if(rve(t)){const e=t.$el;return vR(e)&&oh(e)==="#comment"?null:e}return t}function fm(t){return typeof t=="function"?t():v(t)}function sve(t){return{name:"arrow",options:t,fn(e){const n=y$(fm(t.element));return n==null?{}:eve({element:n,padding:t.padding}).fn(e)}}}function SK(t){return typeof window=="undefined"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function C8(t,e){const n=SK(t);return Math.round(e*n)/n}function ive(t,e,n){n===void 0&&(n={});const r=n.whileElementsMounted,s=Z(()=>{var A;return(A=fm(n.open))!=null?A:!0}),i=Z(()=>fm(n.middleware)),a=Z(()=>{var A;return(A=fm(n.placement))!=null?A:"bottom"}),o=Z(()=>{var A;return(A=fm(n.strategy))!=null?A:"absolute"}),l=Z(()=>{var A;return(A=fm(n.transform))!=null?A:!0}),d=Z(()=>y$(t.value)),c=Z(()=>y$(e.value)),f=Q(0),p=Q(0),h=Q(o.value),m=Q(a.value),g=Mo({}),y=Q(!1),x=Z(()=>{const A={position:h.value,left:"0",top:"0"};if(!c.value)return A;const M=C8(c.value,f.value),E=C8(c.value,p.value);return l.value?ge(ze(ge({},A),{transform:"translate("+M+"px, "+E+"px)"}),SK(c.value)>=1.5&&{willChange:"transform"}):{position:h.value,left:M+"px",top:E+"px"}});let _;function k(){if(d.value==null||c.value==null)return;const A=s.value;nve(d.value,c.value,{middleware:i.value,placement:a.value,strategy:o.value}).then(M=>{f.value=M.x,p.value=M.y,h.value=M.strategy,m.value=M.placement,g.value=M.middlewareData,y.value=A!==!1})}function w(){typeof _=="function"&&(_(),_=void 0)}function S(){if(w(),r===void 0){k();return}if(d.value!=null&&c.value!=null){_=r(d.value,c.value,k);return}}function C(){s.value||(y.value=!1)}return et([i,a,o,s],k,{flush:"sync"}),et([d,c],S,{flush:"sync"}),et(s,C,{flush:"sync"}),K1()&&X1(w),{x:$h(f),y:$h(p),strategy:$h(h),placement:$h(m),middlewareData:$h(g),isPositioned:$h(y),floatingStyles:x,update:k}}const CK={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[ave,ove]=na("PopperContent");var lve=Je({inheritAttrs:!1,__name:"PopperContent",props:CG({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},ge({},CK)),emits:["placed"],setup(t,{emit:e}){const n=t,r=e,s=hK(),{forwardRef:i,currentElement:a}=cn(),o=Q(),l=Q(),{width:d,height:c}=Hhe(l),f=Z(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),p=Z(()=>typeof n.collisionPadding=="number"?n.collisionPadding:ge({top:0,right:0,bottom:0,left:0},n.collisionPadding)),h=Z(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),m=Z(()=>({padding:p.value,boundary:h.value.filter(nge),altBoundary:h.value.length>0})),g=Z(()=>({mainAxis:n.sideFlip,crossAxis:n.alignFlip})),y=dhe(()=>[Xge({mainAxis:n.sideOffset+c.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&S8(ge(ge({},m.value),g.value)),n.avoidCollisions&&Qge(ge({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?tve():void 0},m.value)),!n.prioritizePosition&&n.avoidCollisions&&S8(ge(ge({},m.value),g.value)),Zge(ze(ge({},m.value),{apply:({elements:F,rects:L,availableWidth:z,availableHeight:N})=>{const{width:q,height:V}=L.reference,O=F.floating.style;O.setProperty("--reka-popper-available-width",`${z}px`),O.setProperty("--reka-popper-available-height",`${N}px`),O.setProperty("--reka-popper-anchor-width",`${q}px`),O.setProperty("--reka-popper-anchor-height",`${V}px`)}})),l.value&&sve({element:l.value,padding:n.arrowPadding}),rge({arrowWidth:d.value,arrowHeight:c.value}),n.hideWhenDetached&&Jge(ge({strategy:"referenceHidden"},m.value))]),x=Z(()=>{var F;return(F=n.reference)!=null?F:s.anchor.value}),{floatingStyles:_,placement:k,isPositioned:w,middlewareData:S}=ive(x,o,{strategy:n.positionStrategy,placement:f,whileElementsMounted:(...F)=>Kge(...F,{layoutShift:!n.disableUpdateOnLayoutShift,animationFrame:n.updatePositionStrategy==="always"}),middleware:y}),C=Z(()=>h$(k.value)[0]),A=Z(()=>h$(k.value)[1]);MG(()=>{w.value&&r("placed")});const M=Z(()=>{var F;return((F=S.value.arrow)==null?void 0:F.centerOffset)!==0}),E=Q("");Hr(()=>{a.value&&(E.value=window.getComputedStyle(a.value).zIndex)});const P=Z(()=>{var F,L;return(L=(F=S.value.arrow)==null?void 0:F.x)!=null?L:0}),I=Z(()=>{var F,L;return(L=(F=S.value.arrow)==null?void 0:F.y)!=null?L:0});return ove({placedSide:C,onArrowChange:F=>l.value=F,arrowX:P,arrowY:I,shouldHideArrow:M}),(F,L)=>{var z,N,q;return T(),R("div",{ref_key:"floatingRef",ref:o,"data-reka-popper-content-wrapper":"",style:rt(ge(ze(ge({},v(_)),{transform:v(w)?v(_).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:E.value,"--reka-popper-transform-origin":[(z=v(S).transformOrigin)==null?void 0:z.x,(N=v(S).transformOrigin)==null?void 0:N.y].join(" ")}),((q=v(S).hide)==null?void 0:q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}))},[b(v(Bs),xt({ref:v(i)},F.$attrs,{"as-child":n.asChild,as:F.as,"data-side":C.value,"data-align":A.value,style:{animation:v(w)?void 0:"none"}}),{default:D(()=>[qe(F.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}}),_R=lve;const uve={top:"bottom",right:"left",bottom:"top",left:"right"};var dve=Je({inheritAttrs:!1,__name:"PopperArrow",props:{width:{type:Number,required:!1},height:{type:Number,required:!1},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(t){const{forwardRef:e}=cn(),n=ave(),r=Z(()=>uve[n.placedSide.value]);return(s,i)=>{var a,o,l,d;return T(),R("span",{ref:c=>{v(n).onArrowChange(c)},style:rt({position:"absolute",left:(a=v(n).arrowX)!=null&&a.value?`${(o=v(n).arrowX)==null?void 0:o.value}px`:void 0,top:(l=v(n).arrowY)!=null&&l.value?`${(d=v(n).arrowY)==null?void 0:d.value}px`:void 0,[r.value]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[v(n).placedSide.value],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[v(n).placedSide.value],visibility:v(n).shouldHideArrow.value?"hidden":void 0})},[b(tge,xt(s.$attrs,{ref:v(e),style:{display:"block"},as:s.as,"as-child":s.asChild,rounded:s.rounded,width:s.width,height:s.height}),{default:D(()=>[qe(s.$slots,"default")]),_:3},16,["as","as-child","rounded","width","height"])],4)}}}),cve=dve,fve=Je({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(v(pR),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),AK=fve;function pve(){const t=Q(!1);return yt(()=>{ng("keydown",()=>{t.value=!0},{capture:!0,passive:!0}),ng(["pointerdown","pointermove"],()=>{t.value=!1},{capture:!0,passive:!0})}),t}const hve=eK(pve),[lh,TK]=na(["MenuRoot","MenuSub"],"MenuContext"),[pb,mve]=na("MenuRoot");var gve=Je({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e,{modal:s,dir:i}=no(n),a=lR(i),o=md(n,"open",r),l=Q(),d=hve();return TK({open:o,onOpenChange:c=>{o.value=c},content:l,onContentChange:c=>{l.value=c}}),mve({onClose:()=>{o.value=!1},isUsingKeyboardRef:d,dir:a,modal:s}),(c,f)=>(T(),he(v(tC),null,{default:D(()=>[qe(c.$slots,"default")]),_:3}))}}),vve=gve;const[wR,yve]=na("MenuContent");var bve=Je({__name:"MenuContentImpl",props:CG({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},ge({},CK)),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(t,{emit:e}){const n=t,r=e,s=lh(),i=pb(),{trapFocus:a,disableOutsidePointerEvents:o,loop:l}=no(n);sK(),oR(o.value);const d=Q(""),c=Q(0),f=Q(0),p=Q(null),h=Q("right"),m=Q(0),g=Q(null),y=Q(),{forwardRef:x,currentElement:_}=cn(),{handleTypeaheadSearch:k}=Whe();et(_,E=>{s.onContentChange(E)}),ks(()=>{window.clearTimeout(c.value)});function w(E){var I,F;return h.value===((I=p.value)==null?void 0:I.side)&&wme(E,(F=p.value)==null?void 0:F.area)}function S(E){return ue(this,null,function*(){var P;r("openAutoFocus",E),!E.defaultPrevented&&(E.preventDefault(),(P=_.value)==null||P.focus({preventScroll:!0}))})}function C(E){var V,O;if(E.defaultPrevented)return;const I=E.target.closest("[data-reka-menu-content]")===E.currentTarget,F=E.ctrlKey||E.altKey||E.metaKey,L=E.key.length===1,z=uhe(E,Ki(),_.value,{loop:l.value,arrowKeyOptions:"vertical",dir:i==null?void 0:i.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(z)return z==null?void 0:z.focus();if(E.code==="Space")return;const N=(O=(V=y.value)==null?void 0:V.getItems())!=null?O:[];if(I&&(E.key==="Tab"&&E.preventDefault(),!F&&L&&k(E.key,N)),E.target!==_.value||!vme.includes(E.key))return;E.preventDefault();const q=[...N.map(X=>X.ref)];lK.includes(E.key)&&q.reverse(),xme(q)}function A(E){var P,I;(I=(P=E==null?void 0:E.currentTarget)==null?void 0:P.contains)!=null&&I.call(P,E.target)||(window.clearTimeout(c.value),d.value="")}function M(E){var F;if(!B0(E))return;const P=E.target,I=m.value!==E.clientX;if((F=E==null?void 0:E.currentTarget)!=null&&F.contains(P)&&I){const L=E.clientX>m.value?"right":"left";h.value=L,m.value=E.clientX}}return yve({onItemEnter:E=>!!w(E),onItemLeave:E=>{var P;w(E)||((P=_.value)==null||P.focus(),g.value=null)},onTriggerLeave:E=>!!w(E),searchRef:d,pointerGraceTimerRef:f,onPointerGraceIntentChange:E=>{p.value=E}}),(E,P)=>(T(),he(v(cR),{"as-child":"",trapped:v(a),onMountAutoFocus:S,onUnmountAutoFocus:P[7]||(P[7]=I=>r("closeAutoFocus",I))},{default:D(()=>[b(v(JS),{"as-child":"","disable-outside-pointer-events":v(o),onEscapeKeyDown:P[2]||(P[2]=I=>r("escapeKeyDown",I)),onPointerDownOutside:P[3]||(P[3]=I=>r("pointerDownOutside",I)),onFocusOutside:P[4]||(P[4]=I=>r("focusOutside",I)),onInteractOutside:P[5]||(P[5]=I=>r("interactOutside",I)),onDismiss:P[6]||(P[6]=I=>r("dismiss"))},{default:D(()=>[b(v(Hme),{ref_key:"rovingFocusGroupRef",ref:y,"current-tab-stop-id":g.value,"onUpdate:currentTabStopId":P[0]||(P[0]=I=>g.value=I),"as-child":"",orientation:"vertical",dir:v(i).dir.value,loop:v(l),onEntryFocus:P[1]||(P[1]=I=>{r("entryFocus",I),v(i).isUsingKeyboardRef.value||I.preventDefault()})},{default:D(()=>[b(v(_R),{ref:v(x),role:"menu",as:E.as,"as-child":E.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":v(fR)(v(s).open.value),dir:v(i).dir.value,side:E.side,"side-offset":E.sideOffset,align:E.align,"align-offset":E.alignOffset,"avoid-collisions":E.avoidCollisions,"collision-boundary":E.collisionBoundary,"collision-padding":E.collisionPadding,"arrow-padding":E.arrowPadding,"prioritize-position":E.prioritizePosition,"position-strategy":E.positionStrategy,"update-position-strategy":E.updatePositionStrategy,sticky:E.sticky,"hide-when-detached":E.hideWhenDetached,reference:E.reference,onKeydown:C,onBlur:A,onPointermove:M},{default:D(()=>[qe(E.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),kR=bve,xve=Je({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,n=wR(),{forwardRef:r}=cn(),{CollectionItem:s}=fK(),i=Q(!1);function a(l){return ue(this,null,function*(){if(!l.defaultPrevented&&B0(l)){if(e.disabled)n.onItemLeave(l);else if(!n.onItemEnter(l)){const c=l.currentTarget;c==null||c.focus({preventScroll:!0})}}})}function o(l){return ue(this,null,function*(){yield nr(),!l.defaultPrevented&&B0(l)&&n.onItemLeave(l)})}return(l,d)=>(T(),he(v(s),{value:{textValue:l.textValue}},{default:D(()=>[b(v(Bs),xt({ref:v(r),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":i.value?"":void 0,onPointermove:a,onPointerleave:o,onFocus:d[0]||(d[0]=c=>ue(this,null,function*(){yield nr(),!(c.defaultPrevented||l.disabled)&&(i.value=!0)})),onBlur:d[1]||(d[1]=c=>ue(this,null,function*(){yield nr(),!c.defaultPrevented&&(i.value=!1)}))}),{default:D(()=>[qe(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),$K=xve,_ve=Je({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=cn(),a=pb(),o=wR(),l=Q(!1);function d(){return ue(this,null,function*(){const c=i.value;if(!n.disabled&&c){const f=new CustomEvent(mme,{bubbles:!0,cancelable:!0});r("select",f),yield nr(),f.defaultPrevented?l.value=!1:a.onClose()}})}return(c,f)=>(T(),he($K,xt(n,{ref:v(s),onClick:d,onPointerdown:f[0]||(f[0]=()=>{l.value=!0}),onPointerup:f[1]||(f[1]=p=>ue(this,null,function*(){var h;yield nr(),!p.defaultPrevented&&(l.value||(h=p.currentTarget)==null||h.click())})),onKeydown:f[2]||(f[2]=p=>ue(this,null,function*(){const h=v(o).searchRef.value!=="";c.disabled||h&&p.key===" "||v(p$).includes(p.key)&&(p.currentTarget.click(),p.preventDefault())}))}),{default:D(()=>[qe(c.$slots,"default")]),_:3},16))}}),wve=_ve,kve=Je({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Kl(n,r),i=lh(),{forwardRef:a,currentElement:o}=cn();return dR(o),(l,d)=>(T(),he(kR,xt(v(s),{ref:v(a),"trap-focus":v(i).open.value,"disable-outside-pointer-events":v(i).open.value,"disable-outside-scroll":!0,onDismiss:d[0]||(d[0]=c=>v(i).onOpenChange(!1)),onFocusOutside:d[1]||(d[1]=ut(c=>r("focusOutside",c),["prevent"]))}),{default:D(()=>[qe(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),Sve=kve,Cve=Je({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=Kl(t,e),i=lh();return(a,o)=>(T(),he(kR,xt(v(s),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:o[0]||(o[0]=l=>v(i).onOpenChange(!1))}),{default:D(()=>[qe(a.$slots,"default")]),_:3},16))}}),Ave=Cve,Tve=Je({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=Kl(t,e),i=lh(),a=pb();return(o,l)=>(T(),he(v(Dg),{present:o.forceMount||v(i).open.value},{default:D(()=>[v(a).modal.value?(T(),he(Sve,Pn(xt({key:0},ge(ge({},o.$attrs),v(s)))),{default:D(()=>[qe(o.$slots,"default")]),_:3},16)):(T(),he(Ave,Pn(xt({key:1},ge(ge({},o.$attrs),v(s)))),{default:D(()=>[qe(o.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),$ve=Tve,Mve=Je({__name:"MenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(t){const e=t;return(n,r)=>(T(),he(v(Bs),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),Eve=Mve,Dve=Je({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(v(eC),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),Rve=Dve;const[MK,Pve]=na("MenuSub");var Ive=Je({__name:"MenuSub",props:{open:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=md(n,"open",e,{defaultValue:!1,passive:n.open===void 0}),i=lh(),a=Q(),o=Q();return Hr(l=>{(i==null?void 0:i.open.value)===!1&&(s.value=!1),l(()=>s.value=!1)}),TK({open:s,onOpenChange:l=>{s.value=l},content:o,onContentChange:l=>{o.value=l}}),Pve({triggerId:"",contentId:"",trigger:a,onTriggerChange:l=>{a.value=l}}),(l,d)=>(T(),he(v(tC),null,{default:D(()=>[qe(l.$slots,"default")]),_:3}))}}),Ove=Ive,Lve=Je({__name:"MenuSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1,default:!0},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=Kl(t,e),i=lh(),a=pb(),o=MK(),{forwardRef:l,currentElement:d}=cn();return o.contentId||(o.contentId=Ec(void 0,"reka-menu-sub-content")),(c,f)=>(T(),he(v(Dg),{present:c.forceMount||v(i).open.value},{default:D(()=>[b(kR,xt(v(s),{id:v(o).contentId,ref:v(l),"aria-labelledby":v(o).triggerId,align:"start",side:v(a).dir.value==="rtl"?"left":"right","disable-outside-pointer-events":!1,"disable-outside-scroll":!1,"trap-focus":!1,onOpenAutoFocus:f[0]||(f[0]=ut(p=>{var h;v(a).isUsingKeyboardRef.value&&((h=v(d))==null||h.focus())},["prevent"])),onCloseAutoFocus:f[1]||(f[1]=ut(()=>{},["prevent"])),onFocusOutside:f[2]||(f[2]=p=>{p.defaultPrevented||p.target!==v(o).trigger.value&&v(i).onOpenChange(!1)}),onEscapeKeyDown:f[3]||(f[3]=p=>{v(a).onClose(),p.preventDefault()}),onKeydown:f[4]||(f[4]=p=>{var g,y;const h=(g=p.currentTarget)==null?void 0:g.contains(p.target),m=v(bme)[v(a).dir.value].includes(p.key);h&&m&&(v(i).onOpenChange(!1),(y=v(o).trigger.value)==null||y.focus(),p.preventDefault())})}),{default:D(()=>[qe(c.$slots,"default")]),_:3},16,["id","aria-labelledby","side"])]),_:3},8,["present"]))}}),Vve=Lve,Nve=Je({__name:"MenuSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,n=lh(),r=pb(),s=MK(),i=wR(),a=Q(null);s.triggerId||(s.triggerId=Ec(void 0,"reka-menu-sub-trigger"));function o(){a.value&&window.clearTimeout(a.value),a.value=null}ks(()=>{o()});function l(f){!B0(f)||i.onItemEnter(f)||!e.disabled&&!n.open.value&&!a.value&&(i.onPointerGraceIntentChange(null),a.value=window.setTimeout(()=>{n.onOpenChange(!0),o()},100))}function d(f){return ue(this,null,function*(){var h,m;if(!B0(f))return;o();const p=(h=n.content.value)==null?void 0:h.getBoundingClientRect();if(p!=null&&p.width){const g=(m=n.content.value)==null?void 0:m.dataset.side,y=g==="right",x=y?-5:5,_=p[y?"left":"right"],k=p[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:_,y:p.top},{x:k,y:p.top},{x:k,y:p.bottom},{x:_,y:p.bottom}],side:g}),window.clearTimeout(i.pointerGraceTimerRef.value),i.pointerGraceTimerRef.value=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f))return;i.onPointerGraceIntentChange(null)}})}function c(f){return ue(this,null,function*(){var h;const p=i.searchRef.value!=="";e.disabled||p&&f.key===" "||yme[r.dir.value].includes(f.key)&&(n.onOpenChange(!0),yield nr(),(h=n.content.value)==null||h.focus(),f.preventDefault())})}return(f,p)=>(T(),he(AK,{"as-child":""},{default:D(()=>[b($K,xt(e,{id:v(s).triggerId,ref:h=>{var m;(m=v(s))==null||m.onTriggerChange(h==null?void 0:h.$el)},"aria-haspopup":"menu","aria-expanded":v(n).open.value,"aria-controls":v(s).contentId,"data-state":v(fR)(v(n).open.value),onClick:p[0]||(p[0]=h=>ue(this,null,function*(){e.disabled||h.defaultPrevented||(h.currentTarget.focus(),v(n).open.value||v(n).onOpenChange(!0))})),onPointermove:l,onPointerleave:d,onKeydown:c}),{default:D(()=>[qe(f.$slots,"default")]),_:3},16,["id","aria-expanded","aria-controls","data-state"])]),_:3}))}}),jve=Nve;const[hb,Fve]=na("PopoverRoot");var Bve=Je({__name:"PopoverRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},modal:{type:Boolean,required:!1,default:!1}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e,{modal:s}=no(n),i=md(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),a=Q(),o=Q(!1);return Fve({contentId:"",triggerId:"",modal:s,open:i,onOpenChange:l=>{i.value=l},onOpenToggle:()=>{i.value=!i.value},triggerElement:a,hasCustomAnchor:o}),(l,d)=>(T(),he(v(tC),null,{default:D(()=>[qe(l.$slots,"default",{open:v(i),close:()=>i.value=!1})]),_:3}))}}),zve=Bve,Uve=Je({__name:"PopoverAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;cn();const n=hb();return yG(()=>{n.hasCustomAnchor.value=!0}),ks(()=>{n.hasCustomAnchor.value=!1}),(r,s)=>(T(),he(v(pR),Pn(or(e)),{default:D(()=>[qe(r.$slots,"default")]),_:3},16))}}),Hve=Uve,qve=Je({__name:"PopoverContentImpl",props:{trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=uR(mhe(n,"trapFocus","disableOutsidePointerEvents")),{forwardRef:i}=cn(),a=hb();return sK(),(o,l)=>(T(),he(v(cR),{"as-child":"",loop:"",trapped:o.trapFocus,onMountAutoFocus:l[5]||(l[5]=d=>r("openAutoFocus",d)),onUnmountAutoFocus:l[6]||(l[6]=d=>r("closeAutoFocus",d))},{default:D(()=>[b(v(JS),{"as-child":"","disable-outside-pointer-events":o.disableOutsidePointerEvents,onPointerDownOutside:l[0]||(l[0]=d=>r("pointerDownOutside",d)),onInteractOutside:l[1]||(l[1]=d=>r("interactOutside",d)),onEscapeKeyDown:l[2]||(l[2]=d=>r("escapeKeyDown",d)),onFocusOutside:l[3]||(l[3]=d=>r("focusOutside",d)),onDismiss:l[4]||(l[4]=d=>v(a).onOpenChange(!1))},{default:D(()=>[b(v(_R),xt(v(s),{id:v(a).contentId,ref:v(i),"data-state":v(a).open.value?"open":"closed","aria-labelledby":v(a).triggerId,style:{"--reka-popover-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-popover-content-available-width":"var(--reka-popper-available-width)","--reka-popover-content-available-height":"var(--reka-popper-available-height)","--reka-popover-trigger-width":"var(--reka-popper-anchor-width)","--reka-popover-trigger-height":"var(--reka-popper-anchor-height)"},role:"dialog"}),{default:D(()=>[qe(o.$slots,"default")]),_:3},16,["id","data-state","aria-labelledby"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),EK=qve,Wve=Je({__name:"PopoverContentModal",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=hb(),i=Q(!1);oR(!0);const a=Kl(n,r),{forwardRef:o,currentElement:l}=cn();return dR(l),(d,c)=>(T(),he(EK,xt(v(a),{ref:v(o),"trap-focus":v(s).open.value,"disable-outside-pointer-events":"",onCloseAutoFocus:c[0]||(c[0]=ut(f=>{var p;r("closeAutoFocus",f),i.value||(p=v(s).triggerElement.value)==null||p.focus()},["prevent"])),onPointerDownOutside:c[1]||(c[1]=f=>{r("pointerDownOutside",f);const p=f.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0,m=p.button===2||h;i.value=m}),onFocusOutside:c[2]||(c[2]=ut(()=>{},["prevent"]))}),{default:D(()=>[qe(d.$slots,"default")]),_:3},16,["trap-focus"]))}}),Gve=Wve,Yve=Je({__name:"PopoverContentNonModal",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=hb(),i=Q(!1),a=Q(!1),o=Kl(n,r);return(l,d)=>(T(),he(EK,xt(v(o),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:d[0]||(d[0]=c=>{var f;r("closeAutoFocus",c),c.defaultPrevented||(i.value||(f=v(s).triggerElement.value)==null||f.focus(),c.preventDefault()),i.value=!1,a.value=!1}),onInteractOutside:d[1]||(d[1]=c=>ue(this,null,function*(){var h;r("interactOutside",c),c.defaultPrevented||(i.value=!0,c.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const f=c.target;((h=v(s).triggerElement.value)==null?void 0:h.contains(f))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&a.value&&c.preventDefault()}))}),{default:D(()=>[qe(l.$slots,"default")]),_:3},16))}}),Kve=Yve,Xve=Je({__name:"PopoverContent",props:{forceMount:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=hb(),i=Kl(n,r),{forwardRef:a}=cn();return s.contentId||(s.contentId=Ec(void 0,"reka-popover-content")),(o,l)=>(T(),he(v(Dg),{present:o.forceMount||v(s).open.value},{default:D(()=>[v(s).modal.value?(T(),he(Gve,xt({key:0},v(i),{ref:v(a)}),{default:D(()=>[qe(o.$slots,"default")]),_:3},16)):(T(),he(Kve,xt({key:1},v(i),{ref:v(a)}),{default:D(()=>[qe(o.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Qve=Xve,Zve=Je({__name:"PopoverPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(v(eC),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),Jve=Zve;const[DK,eye]=na("DropdownMenuRoot");var tye=Je({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e;cn();const s=md(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=Q(),{modal:a,dir:o}=no(n),l=lR(o);return eye({open:s,onOpenChange:d=>{s.value=d},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:i,contentId:"",modal:a,dir:l}),(d,c)=>(T(),he(v(vve),{open:v(s),"onUpdate:open":c[0]||(c[0]=f=>zn(s)?s.value=f:null),dir:v(l),modal:v(a)},{default:D(()=>[qe(d.$slots,"default",{open:v(s)})]),_:3},8,["open","dir","modal"]))}}),nye=tye,rye=Je({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:e}){const s=Kl(t,e);cn();const i=DK(),a=Q(!1);function o(l){l.defaultPrevented||(a.value||setTimeout(()=>{var d;(d=i.triggerElement.value)==null||d.focus()},0),a.value=!1,l.preventDefault())}return i.contentId||(i.contentId=Ec(void 0,"reka-dropdown-menu-content")),(l,d)=>{var c;return T(),he(v($ve),xt(v(s),{id:v(i).contentId,"aria-labelledby":(c=v(i))==null?void 0:c.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:o,onInteractOutside:d[0]||(d[0]=f=>{var g;if(f.defaultPrevented)return;const p=f.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0,m=p.button===2||h;(!v(i).modal.value||m)&&(a.value=!0),(g=v(i).triggerElement.value)!=null&&g.contains(f.target)&&f.preventDefault()})}),{default:D(()=>[qe(l.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),sye=rye,iye=Je({__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,s=cb(e);return cn(),(i,a)=>(T(),he(v(wve),Pn(or(ge(ge({},n),v(s)))),{default:D(()=>[qe(i.$slots,"default")]),_:3},16))}}),A8=iye,aye=Je({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return cn(),(n,r)=>(T(),he(v(Eve),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),T8=aye,oye=Je({__name:"DropdownMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(v(Rve),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),$8=oye,lye=Je({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(t,{emit:e}){var i;const n=t,s=md(n,"open",e,{passive:n.open===void 0,defaultValue:(i=n.defaultOpen)!=null?i:!1});return cn(),(a,o)=>(T(),he(v(Ove),{open:v(s),"onUpdate:open":o[0]||(o[0]=l=>zn(s)?s.value=l:null)},{default:D(()=>[qe(a.$slots,"default",{open:v(s)})]),_:3},8,["open"]))}}),uye=lye,dye=Je({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=Kl(t,e);return cn(),(i,a)=>(T(),he(v(Vve),xt(v(s),{style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:D(()=>[qe(i.$slots,"default")]),_:3},16))}}),cye=dye,fye=Je({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return cn(),(n,r)=>(T(),he(v(jve),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),pye=fye,hye=Je({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=DK(),{forwardRef:r,currentElement:s}=cn();return yt(()=>{n.triggerElement=s}),n.triggerId||(n.triggerId=Ec(void 0,"reka-dropdown-menu-trigger")),(i,a)=>(T(),he(v(AK),{"as-child":""},{default:D(()=>[b(v(Bs),{id:v(n).triggerId,ref:v(r),type:i.as==="button"?"button":void 0,"as-child":e.asChild,as:i.as,"aria-haspopup":"menu","aria-expanded":v(n).open.value,"aria-controls":v(n).open.value?v(n).contentId:void 0,"data-disabled":i.disabled?"":void 0,disabled:i.disabled,"data-state":v(n).open.value?"open":"closed",onClick:a[0]||(a[0]=o=>ue(this,null,function*(){var l;!i.disabled&&o.button===0&&o.ctrlKey===!1&&((l=v(n))==null||l.onOpenToggle(),yield nr(),v(n).open.value&&o.preventDefault())})),onKeydown:a[1]||(a[1]=Ru(o=>{i.disabled||(["Enter"," "].includes(o.key)&&v(n).onOpenToggle(),o.key==="ArrowDown"&&v(n).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())},["enter","space","arrow-down"]))},{default:D(()=>[qe(i.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),mye=hye;const[gye,vye]=na("SwitchRoot");var yye=Je({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=no(n),i=md(n,"modelValue",r,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function a(){s.value||(i.value=!i.value)}const{forwardRef:o,currentElement:l}=cn(),d=Rhe(l),c=Z(()=>{var f;return n.id&&l.value?(f=document.querySelector(`[for="${n.id}"]`))==null?void 0:f.innerText:void 0});return vye({modelValue:i,toggleCheck:a,disabled:s}),(f,p)=>(T(),he(v(Bs),xt(f.$attrs,{id:f.id,ref:v(o),role:"switch",type:f.as==="button"?"button":void 0,value:f.value,"aria-label":f.$attrs["aria-label"]||c.value,"aria-checked":v(i),"aria-required":f.required,"data-state":v(i)?"checked":"unchecked","data-disabled":v(s)?"":void 0,"as-child":f.asChild,as:f.as,disabled:v(s),onClick:a,onKeydown:Ru(ut(a,["prevent"]),["enter"])}),{default:D(()=>[qe(f.$slots,"default",{modelValue:v(i)}),v(d)&&f.name?(T(),he(v(Yme),{key:0,type:"checkbox",name:f.name,disabled:v(s),required:f.required,value:f.value,checked:!!v(i)},null,8,["name","disabled","required","value","checked"])):se("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),bye=yye,xye=Je({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=gye();return cn(),(n,r)=>{var s;return T(),he(v(Bs),{"data-state":(s=v(e).modelValue)!=null&&s.value?"checked":"unchecked","data-disabled":v(e).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:D(()=>[qe(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),_ye=xye,wye=Je({__name:"TooltipArrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(t){const e=t;return cn(),(n,r)=>(T(),he(v(cve),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),kye=wye;const[SR,Sye]=na("TooltipProvider");var Cye=Je({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{type:Number,required:!1,default:700},skipDelayDuration:{type:Number,required:!1,default:300},disableHoverableContent:{type:Boolean,required:!1,default:!1},disableClosingTrigger:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:!1}},setup(t){const e=t,{delayDuration:n,skipDelayDuration:r,disableHoverableContent:s,disableClosingTrigger:i,ignoreNonKeyboardFocus:a,disabled:o}=no(e);cn();const l=Q(!0),d=Q(!1),{start:c,stop:f}=nK(()=>{l.value=!0},r,{immediate:!1});return Sye({isOpenDelayed:l,delayDuration:n,onOpen(){f(),l.value=!1},onClose(){c()},isPointerInTransitRef:d,disableHoverableContent:s,disableClosingTrigger:i,disabled:o,ignoreNonKeyboardFocus:a}),(p,h)=>qe(p.$slots,"default")}}),Aye=Cye;const RK="tooltip.open",[aC,Tye]=na("TooltipRoot");var $ye=Je({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},delayDuration:{type:Number,required:!1,default:void 0},disableHoverableContent:{type:Boolean,required:!1,default:void 0},disableClosingTrigger:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e;cn();const s=SR(),i=Z(()=>{var k;return(k=n.disableHoverableContent)!=null?k:s.disableHoverableContent.value}),a=Z(()=>{var k;return(k=n.disableClosingTrigger)!=null?k:s.disableClosingTrigger.value}),o=Z(()=>{var k;return(k=n.disabled)!=null?k:s.disabled.value}),l=Z(()=>{var k;return(k=n.delayDuration)!=null?k:s.delayDuration.value}),d=Z(()=>{var k;return(k=n.ignoreNonKeyboardFocus)!=null?k:s.ignoreNonKeyboardFocus.value}),c=md(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0});et(c,k=>{s.onClose&&(k?(s.onOpen(),document.dispatchEvent(new CustomEvent(RK))):s.onClose())});const f=Q(!1),p=Q(),h=Z(()=>c.value?f.value?"delayed-open":"instant-open":"closed"),{start:m,stop:g}=nK(()=>{f.value=!0,c.value=!0},l,{immediate:!1});function y(){g(),f.value=!1,c.value=!0}function x(){g(),c.value=!1}function _(){m()}return Tye({contentId:"",open:c,stateAttribute:h,trigger:p,onTriggerChange(k){p.value=k},onTriggerEnter(){s.isOpenDelayed.value?_():y()},onTriggerLeave(){i.value?x():g()},onOpen:y,onClose:x,disableHoverableContent:i,disableClosingTrigger:a,disabled:o,ignoreNonKeyboardFocus:d}),(k,w)=>(T(),he(v(tC),null,{default:D(()=>[qe(k.$slots,"default",{open:v(c)})]),_:3}))}}),Mye=$ye,Eye=Je({__name:"TooltipContentImpl",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1,default:0},align:{type:null,required:!1,default:"center"},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},arrowPadding:{type:Number,required:!1,default:0},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,r=e,s=aC(),{forwardRef:i}=cn(),a=eb(),o=Z(()=>{var c;return(c=a.default)==null?void 0:c.call(a,{})}),l=Z(()=>{var p;if(n.ariaLabel)return n.ariaLabel;let c="";function f(h){typeof h.children=="string"&&h.type!==ys?c+=h.children:Array.isArray(h.children)&&h.children.forEach(m=>f(m))}return(p=o.value)==null||p.forEach(h=>f(h)),c}),d=Z(()=>{const p=n,{ariaLabel:c}=p;return $s(p,["ariaLabel"])});return yt(()=>{ng(window,"scroll",c=>{const f=c.target;f!=null&&f.contains(s.trigger.value)&&s.onClose()}),ng(window,RK,s.onClose)}),(c,f)=>(T(),he(v(JS),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:f[0]||(f[0]=p=>r("escapeKeyDown",p)),onPointerDownOutside:f[1]||(f[1]=p=>{var h;v(s).disableClosingTrigger.value&&((h=v(s).trigger.value)!=null&&h.contains(p.target))&&p.preventDefault(),r("pointerDownOutside",p)}),onFocusOutside:f[2]||(f[2]=ut(()=>{},["prevent"])),onDismiss:f[3]||(f[3]=p=>v(s).onClose())},{default:D(()=>[b(v(_R),xt({ref:v(i),"data-state":v(s).stateAttribute.value},ge(ge({},c.$attrs),d.value),{style:{"--reka-tooltip-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-tooltip-content-available-width":"var(--reka-popper-available-width)","--reka-tooltip-content-available-height":"var(--reka-popper-available-height)","--reka-tooltip-trigger-width":"var(--reka-popper-anchor-width)","--reka-tooltip-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:D(()=>[qe(c.$slots,"default"),b(v(pK),{id:v(s).contentId,role:"tooltip"},{default:D(()=>[W($(l.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),PK=Eye,Dye=Je({__name:"TooltipContentHoverable",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},setup(t){const n=uR(t),{forwardRef:r,currentElement:s}=cn(),{trigger:i,onClose:a}=aC(),o=SR(),{isPointerInTransit:l,onPointerExit:d}=Phe(i,s);return o.isPointerInTransitRef=l,d(()=>{a()}),(c,f)=>(T(),he(PK,xt({ref:v(r)},v(n)),{default:D(()=>[qe(c.$slots,"default")]),_:3},16))}}),Rye=Dye,Pye=Je({__name:"TooltipContent",props:{forceMount:{type:Boolean,required:!1},ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,r=e,s=aC(),i=Kl(n,r),{forwardRef:a}=cn();return(o,l)=>(T(),he(v(Dg),{present:o.forceMount||v(s).open.value},{default:D(()=>[(T(),he(At(v(s).disableHoverableContent.value?PK:Rye),xt({ref:v(a)},v(i)),{default:D(()=>[qe(o.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Iye=Pye,Oye=Je({__name:"TooltipPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(T(),he(v(eC),Pn(or(e)),{default:D(()=>[qe(n.$slots,"default")]),_:3},16))}}),Lye=Oye,Vye=Je({__name:"TooltipTrigger",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=aC(),r=SR();n.contentId||(n.contentId=Ec(void 0,"reka-tooltip-content"));const{forwardRef:s,currentElement:i}=cn(),a=Q(!1),o=Q(!1),l=Z(()=>n.disabled.value?{}:{click:g,focus:h,pointermove:f,pointerleave:p,pointerdown:c,blur:m});yt(()=>{n.onTriggerChange(i.value)});function d(){setTimeout(()=>{a.value=!1},1)}function c(){n.open&&!n.disableClosingTrigger.value&&n.onClose(),a.value=!0,document.addEventListener("pointerup",d,{once:!0})}function f(y){y.pointerType!=="touch"&&!o.value&&!r.isPointerInTransitRef.value&&(n.onTriggerEnter(),o.value=!0)}function p(){n.onTriggerLeave(),o.value=!1}function h(y){var x,_;a.value||n.ignoreNonKeyboardFocus.value&&!((_=(x=y.target).matches)!=null&&_.call(x,":focus-visible"))||n.onOpen()}function m(){n.onClose()}function g(){n.disableClosingTrigger.value||n.onClose()}return(y,x)=>(T(),he(v(pR),{"as-child":"",reference:y.reference},{default:D(()=>[b(v(Bs),xt({ref:v(s),"aria-describedby":v(n).open.value?v(n).contentId:void 0,"data-state":v(n).stateAttribute.value,as:y.as,"as-child":e.asChild,"data-grace-area-trigger":""},_ue(l.value)),{default:D(()=>[qe(y.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3},8,["reference"]))}}),Nye=Vye;const jye={class:"rounded-lg border bg-surface-modal shadow-xl"},IK=Je({inheritAttrs:!1,__name:"Popover",props:{show:{type:Boolean,default:void 0},trigger:{default:"click"},hoverDelay:{default:0},leaveDelay:{default:.5},placement:{default:"bottom-start"},popoverClass:{default:""},transition:{default:null},hideOnBlur:{type:Boolean,default:!0},matchTargetWidth:{type:Boolean}},emits:["open","close","update:show"],setup(t,{expose:e,emit:n}){const r=t,s=n;e({open:y,close:x});const i=Q(!1),a=Q(!1),o=Q(null),l=Q(null),d=Q(null),c=Z({get:()=>f.value?r.show:i.value,set:A=>{f.value||(i.value=A),s("update:show",A)}}),f=Z(()=>r.show!==void 0),p=Z(()=>{const[A]=r.placement.split("-");return A}),h=Z(()=>{const[,A]=r.placement.split("-");return A||"center"});function m(A){A instanceof Event&&(A=void 0),A==null&&(A=!c.value),A=!!A,A?y():x()}function g(){}function y(){c.value=!0}function x(){c.value=!1}function _(A){s("update:show",A),s(A?"open":"close")}function k(){a.value=!0,l.value&&(clearTimeout(l.value),l.value=null),r.trigger==="hover"&&(r.hoverDelay?o.value=setTimeout(()=>{a.value&&y()},Number(r.hoverDelay)*1e3):y())}function w(){a.value=!1,o.value&&(clearTimeout(o.value),o.value=null),r.trigger==="hover"&&(l.value&&clearTimeout(l.value),r.leaveDelay?l.value=setTimeout(()=>{a.value||x()},Number(r.leaveDelay)*1e3):a.value||x())}function S(A){if(!r.hideOnBlur){A.preventDefault();return}const M=A.target;if(d.value&&(d.value.contains(M)||d.value===M)){A.preventDefault();return}}const C=Z(()=>r.transition==="default");return ks(()=>{o.value&&clearTimeout(o.value),l.value&&clearTimeout(l.value)}),(A,M)=>(T(),he(v(zve),{open:c.value,"onUpdate:open":[M[1]||(M[1]=E=>c.value=E),_]},{default:D(()=>[b(v(Hve),{asChild:""},{default:D(()=>[u("div",{ref_key:"anchorRef",ref:d,class:pe(["flex",A.$attrs.class]),onMouseover:k,onMouseleave:w},[qe(A.$slots,"target",Pn(or({togglePopover:m,updatePosition:g,open:y,close:x,isOpen:c.value})))],34)]),_:3}),b(v(Jve),null,{default:D(()=>[b(v(Qve),{side:p.value,align:h.value,style:rt({minWidth:t.matchTargetWidth?"var(--reka-popover-trigger-width)":void 0}),class:pe(["PopoverContent",{"has-transition":C.value}]),onMouseover:M[0]||(M[0]=()=>{a.value=!0}),onMouseleave:w,onInteractOutside:S},{default:D(()=>[u("div",{class:pe(["relative",["body-container",t.popoverClass]])},[qe(A.$slots,"body",Pn(or({togglePopover:m,updatePosition:g,open:y,close:x,isOpen:c.value})),()=>[u("div",jye,[qe(A.$slots,"body-main",Pn(or({togglePopover:m,updatePosition:g,open:y,close:x,isOpen:c.value})))])])],2)]),_:3},8,["side","align","style","class"])]),_:3})]),_:3},8,["open"]))}});var Fye=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function OK(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LK={exports:{}};(function(t,e){(function(r,s){t.exports=s()})(typeof self!="undefined"?self:Fye,function(){return function(n){var r={};function s(i){if(r[i])return r[i].exports;var a=r[i]={i,l:!1,exports:{}};return n[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=n,s.c=r,s.d=function(i,a,o){s.o(i,a)||Object.defineProperty(i,a,{configurable:!1,enumerable:!0,get:o})},s.r=function(i){Object.defineProperty(i,"__esModule",{value:!0})},s.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(a,"a",a),a},s.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},s.p="",s(s.s=0)}({"./dist/icons.json":function(n){n.exports={activity:'<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',airplay:'<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon>',"alert-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',"align-center":'<line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line>',"align-justify":'<line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line>',"align-left":'<line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line>',"align-right":'<line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line>',anchor:'<circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>',aperture:'<circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',"arrow-down-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line>',"arrow-down-left":'<line x1="17" y1="7" x2="7" y2="17"></line><polyline points="17 17 7 17 7 7"></polyline>',"arrow-down-right":'<line x1="7" y1="7" x2="17" y2="17"></line><polyline points="17 7 17 17 7 17"></polyline>',"arrow-down":'<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',"arrow-left-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',"arrow-left":'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',"arrow-right-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',"arrow-right":'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',"arrow-up-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line>',"arrow-up-left":'<line x1="17" y1="17" x2="7" y2="7"></line><polyline points="7 17 7 7 17 7"></polyline>',"arrow-up-right":'<line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline>',"arrow-up":'<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',"at-sign":'<circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>',award:'<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',"bar-chart-2":'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',"bar-chart":'<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',"battery-charging":'<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',battery:'<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',"bell-off":'<path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line>',bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',bluetooth:'<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',bold:'<path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>',"book-open":'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',book:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',bookmark:'<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',box:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',calendar:'<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',"camera-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"></path>',camera:'<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',cast:'<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line>',"check-circle":'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',"check-square":'<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',check:'<polyline points="20 6 9 17 4 12"></polyline>',"chevron-down":'<polyline points="6 9 12 15 18 9"></polyline>',"chevron-left":'<polyline points="15 18 9 12 15 6"></polyline>',"chevron-right":'<polyline points="9 18 15 12 9 6"></polyline>',"chevron-up":'<polyline points="18 15 12 9 6 15"></polyline>',"chevrons-down":'<polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline>',"chevrons-left":'<polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline>',"chevrons-right":'<polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline>',"chevrons-up":'<polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline>',chrome:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="21.17" y1="8" x2="12" y2="8"></line><line x1="3.95" y1="6.06" x2="8.54" y2="14"></line><line x1="10.88" y1="21.94" x2="15.46" y2="14"></line>',circle:'<circle cx="12" cy="12" r="10"></circle>',clipboard:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',clock:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',"cloud-drizzle":'<line x1="8" y1="19" x2="8" y2="21"></line><line x1="8" y1="13" x2="8" y2="15"></line><line x1="16" y1="19" x2="16" y2="21"></line><line x1="16" y1="13" x2="16" y2="15"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="12" y1="15" x2="12" y2="17"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-lightning":'<path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline>',"cloud-off":'<path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path><line x1="1" y1="1" x2="23" y2="23"></line>',"cloud-rain":'<line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-snow":'<path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="16" x2="8.01" y2="16"></line><line x1="8" y1="20" x2="8.01" y2="20"></line><line x1="12" y1="18" x2="12.01" y2="18"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="16" y1="16" x2="16.01" y2="16"></line><line x1="16" y1="20" x2="16.01" y2="20"></line>',cloud:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',code:'<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',codepen:'<polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"></polygon><line x1="12" y1="22" x2="12" y2="15.5"></line><polyline points="22 8.5 12 15.5 2 8.5"></polyline><polyline points="2 15.5 12 8.5 22 15.5"></polyline><line x1="12" y1="2" x2="12" y2="8.5"></line>',codesandbox:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',columns:'<path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>',command:'<path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>',compass:'<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',copy:'<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',"corner-down-left":'<polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path>',"corner-down-right":'<polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',"corner-left-down":'<polyline points="14 15 9 20 4 15"></polyline><path d="M20 4h-7a4 4 0 0 0-4 4v12"></path>',"corner-left-up":'<polyline points="14 9 9 4 4 9"></polyline><path d="M20 20h-7a4 4 0 0 1-4-4V4"></path>',"corner-right-down":'<polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>',"corner-right-up":'<polyline points="10 9 15 4 20 9"></polyline><path d="M4 20h7a4 4 0 0 0 4-4V4"></path>',"corner-up-left":'<polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>',"corner-up-right":'<polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>',cpu:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line>',"credit-card":'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',crop:'<path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path>',crosshair:'<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',database:'<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',delete:'<path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line>',disc:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle>',"divide-circle":'<line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line><circle cx="12" cy="12" r="10"></circle>',"divide-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line>',divide:'<circle cx="12" cy="6" r="2"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="2"></circle>',"dollar-sign":'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',"download-cloud":'<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',dribbble:'<circle cx="12" cy="12" r="10"></circle><path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32"></path>',droplet:'<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>',"edit-2":'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',"edit-3":'<path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>',edit:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',"external-link":'<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',"eye-off":'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>',eye:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',facebook:'<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>',"fast-forward":'<polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon>',feather:'<path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line>',figma:'<path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"></path><path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"></path><path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"></path><path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"></path><path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"></path>',"file-minus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line>',"file-plus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line>',"file-text":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',file:'<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',film:'<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',filter:'<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',flag:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',"folder-minus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line>',"folder-plus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line>',folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',framer:'<path d="M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7"></path>',frown:'<circle cx="12" cy="12" r="10"></circle><path d="M16 16s-1.5-2-4-2-4 2-4 2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',gift:'<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',"git-branch":'<line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path>',"git-commit":'<circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line>',"git-merge":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M6 21V9a9 9 0 0 0 9 9"></path>',"git-pull-request":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line>',github:'<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',gitlab:'<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>',globe:'<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',grid:'<rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>',"hard-drive":'<line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line>',hash:'<line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>',headphones:'<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',"help-circle":'<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',hexagon:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>',home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',inbox:'<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',instagram:'<rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>',italic:'<line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line>',key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',layers:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',layout:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',"life-buoy":'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line>',"link-2":'<path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line>',link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',linkedin:'<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',list:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',loader:'<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',"log-in":'<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',"log-out":'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',mail:'<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',"map-pin":'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',map:'<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line>',"maximize-2":'<polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line>',maximize:'<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',meh:'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',menu:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',"message-circle":'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',"message-square":'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',"mic-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',mic:'<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',"minimize-2":'<polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>',minimize:'<path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>',"minus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line>',"minus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',minus:'<line x1="5" y1="12" x2="19" y2="12"></line>',monitor:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',moon:'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',"more-horizontal":'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',"more-vertical":'<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',"mouse-pointer":'<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path>',move:'<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',"navigation-2":'<polygon points="12 2 19 21 12 17 5 21 12 2"></polygon>',navigation:'<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',octagon:'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>',package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',paperclip:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',"pause-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',"pen-tool":'<path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle>',percent:'<line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle>',"phone-call":'<path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-forwarded":'<polyline points="19 1 23 5 19 9"></polyline><line x1="15" y1="5" x2="23" y2="5"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-incoming":'<polyline points="16 2 16 8 22 8"></polyline><line x1="23" y1="1" x2="16" y2="8"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-missed":'<line x1="23" y1="1" x2="17" y2="7"></line><line x1="17" y1="1" x2="23" y2="7"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-off":'<path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path><line x1="23" y1="1" x2="1" y2="23"></line>',"phone-outgoing":'<polyline points="23 7 23 1 17 1"></polyline><line x1="16" y1="8" x2="23" y2="1"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"pie-chart":'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',"play-circle":'<circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon>',play:'<polygon points="5 3 19 12 5 21 5 3"></polygon>',"plus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',"plus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',plus:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',pocket:'<path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path><polyline points="8 10 12 14 16 10"></polyline>',power:'<path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line>',printer:'<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',radio:'<circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path>',"refresh-ccw":'<polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>',"refresh-cw":'<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',repeat:'<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path>',rewind:'<polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon>',"rotate-ccw":'<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',"rotate-cw":'<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',rss:'<path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',send:'<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',server:'<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',"share-2":'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',share:'<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line>',"shield-off":'<path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line>',shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',"shopping-bag":'<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path>',"shopping-cart":'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',shuffle:'<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',sidebar:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line>',"skip-back":'<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',"skip-forward":'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',slack:'<path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path>',slash:'<circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>',sliders:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',smile:'<circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',speaker:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><circle cx="12" cy="14" r="4"></circle><line x1="12" y1="6" x2="12.01" y2="6"></line>',square:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',"stop-circle":'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',sun:'<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',sunrise:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline>',sunset:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="9" x2="12" y2="2"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="16 5 12 9 8 5"></polyline>',table:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"></path>',tablet:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',tag:'<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',target:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',terminal:'<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',thermometer:'<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',"thumbs-down":'<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',"thumbs-up":'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',"toggle-left":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle>',"toggle-right":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle>',tool:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',"trash-2":'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',trello:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>',"trending-down":'<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',"trending-up":'<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',triangle:'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>',truck:'<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',tv:'<rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline>',twitch:'<path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>',twitter:'<path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>',type:'<polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line>',umbrella:'<path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path>',underline:'<path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line>',unlock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',"upload-cloud":'<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',"user-check":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',"user-minus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="23" y1="11" x2="17" y2="11"></line>',"user-plus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',"user-x":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="18" y1="8" x2="23" y2="13"></line><line x1="23" y1="8" x2="18" y2="13"></line>',user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',"video-off":'<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',voicemail:'<circle cx="5.5" cy="11.5" r="4.5"></circle><circle cx="18.5" cy="11.5" r="4.5"></circle><line x1="5.5" y1="16" x2="18.5" y2="16"></line>',"volume-1":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-2":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-x":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',volume:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',watch:'<circle cx="12" cy="12" r="7"></circle><polyline points="12 9 12 12 13.5 13.5"></polyline><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>',"wifi-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wifi:'<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wind:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>',"x-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line>',x:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',youtube:'<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>',"zap-off":'<polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line>',zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',"zoom-in":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line>',"zoom-out":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line>'}},"./node_modules/classnames/dedupe.js":function(n,r,s){var i,a;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var o=function(){function l(){}l.prototype=Object.create(null);function d(x,_){for(var k=_.length,w=0;w<k;++w)g(x,_[w])}var c={}.hasOwnProperty;function f(x,_){x[_]=!0}function p(x,_){for(var k in _)c.call(_,k)&&(x[k]=!!_[k])}var h=/\s+/;function m(x,_){for(var k=_.split(h),w=k.length,S=0;S<w;++S)x[k[S]]=!0}function g(x,_){if(_){var k=typeof _;k==="string"?m(x,_):Array.isArray(_)?d(x,_):k==="object"?p(x,_):k==="number"&&f(x,_)}}function y(){for(var x=arguments.length,_=Array(x),k=0;k<x;k++)_[k]=arguments[k];var w=new l;d(w,_);var S=[];for(var C in w)w[C]&&S.push(C);return S.join(" ")}return y}();typeof n!="undefined"&&n.exports?n.exports=o:(i=[],a=function(){return o}.apply(r,i),a!==void 0&&(n.exports=a))})()},"./node_modules/core-js/es/array/from.js":function(n,r,s){s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.from.js");var i=s("./node_modules/core-js/internals/path.js");n.exports=i.Array.from},"./node_modules/core-js/internals/a-function.js":function(n,r){n.exports=function(s){if(typeof s!="function")throw TypeError(String(s)+" is not a function");return s}},"./node_modules/core-js/internals/an-object.js":function(n,r,s){var i=s("./node_modules/core-js/internals/is-object.js");n.exports=function(a){if(!i(a))throw TypeError(String(a)+" is not an object");return a}},"./node_modules/core-js/internals/array-from.js":function(n,r,s){var i=s("./node_modules/core-js/internals/bind-context.js"),a=s("./node_modules/core-js/internals/to-object.js"),o=s("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),l=s("./node_modules/core-js/internals/is-array-iterator-method.js"),d=s("./node_modules/core-js/internals/to-length.js"),c=s("./node_modules/core-js/internals/create-property.js"),f=s("./node_modules/core-js/internals/get-iterator-method.js");n.exports=function(h){var m=a(h),g=typeof this=="function"?this:Array,y=arguments.length,x=y>1?arguments[1]:void 0,_=x!==void 0,k=0,w=f(m),S,C,A,M;if(_&&(x=i(x,y>2?arguments[2]:void 0,2)),w!=null&&!(g==Array&&l(w)))for(M=w.call(m),C=new g;!(A=M.next()).done;k++)c(C,k,_?o(M,x,[A.value,k],!0):A.value);else for(S=d(m.length),C=new g(S);S>k;k++)c(C,k,_?x(m[k],k):m[k]);return C.length=k,C}},"./node_modules/core-js/internals/array-includes.js":function(n,r,s){var i=s("./node_modules/core-js/internals/to-indexed-object.js"),a=s("./node_modules/core-js/internals/to-length.js"),o=s("./node_modules/core-js/internals/to-absolute-index.js");n.exports=function(l){return function(d,c,f){var p=i(d),h=a(p.length),m=o(f,h),g;if(l&&c!=c){for(;h>m;)if(g=p[m++],g!=g)return!0}else for(;h>m;m++)if((l||m in p)&&p[m]===c)return l||m||0;return!l&&-1}}},"./node_modules/core-js/internals/bind-context.js":function(n,r,s){var i=s("./node_modules/core-js/internals/a-function.js");n.exports=function(a,o,l){if(i(a),o===void 0)return a;switch(l){case 0:return function(){return a.call(o)};case 1:return function(d){return a.call(o,d)};case 2:return function(d,c){return a.call(o,d,c)};case 3:return function(d,c,f){return a.call(o,d,c,f)}}return function(){return a.apply(o,arguments)}}},"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(n,r,s){var i=s("./node_modules/core-js/internals/an-object.js");n.exports=function(a,o,l,d){try{return d?o(i(l)[0],l[1]):o(l)}catch(f){var c=a.return;throw c!==void 0&&i(c.call(a)),f}}},"./node_modules/core-js/internals/check-correctness-of-iteration.js":function(n,r,s){var i=s("./node_modules/core-js/internals/well-known-symbol.js"),a=i("iterator"),o=!1;try{var l=0,d={next:function(){return{done:!!l++}},return:function(){o=!0}};d[a]=function(){return this},Array.from(d,function(){throw 2})}catch(c){}n.exports=function(c,f){if(!f&&!o)return!1;var p=!1;try{var h={};h[a]=function(){return{next:function(){return{done:p=!0}}}},c(h)}catch(m){}return p}},"./node_modules/core-js/internals/classof-raw.js":function(n,r){var s={}.toString;n.exports=function(i){return s.call(i).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(n,r,s){var i=s("./node_modules/core-js/internals/classof-raw.js"),a=s("./node_modules/core-js/internals/well-known-symbol.js"),o=a("toStringTag"),l=i(function(){return arguments}())=="Arguments",d=function(c,f){try{return c[f]}catch(p){}};n.exports=function(c){var f,p,h;return c===void 0?"Undefined":c===null?"Null":typeof(p=d(f=Object(c),o))=="string"?p:l?i(f):(h=i(f))=="Object"&&typeof f.callee=="function"?"Arguments":h}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(n,r,s){var i=s("./node_modules/core-js/internals/has.js"),a=s("./node_modules/core-js/internals/own-keys.js"),o=s("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),l=s("./node_modules/core-js/internals/object-define-property.js");n.exports=function(d,c){for(var f=a(c),p=l.f,h=o.f,m=0;m<f.length;m++){var g=f[m];i(d,g)||p(d,g,h(c,g))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(n,r,s){var i=s("./node_modules/core-js/internals/fails.js");n.exports=!i(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},"./node_modules/core-js/internals/create-iterator-constructor.js":function(n,r,s){var i=s("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,a=s("./node_modules/core-js/internals/object-create.js"),o=s("./node_modules/core-js/internals/create-property-descriptor.js"),l=s("./node_modules/core-js/internals/set-to-string-tag.js"),d=s("./node_modules/core-js/internals/iterators.js"),c=function(){return this};n.exports=function(f,p,h){var m=p+" Iterator";return f.prototype=a(i,{next:o(1,h)}),l(f,m,!1,!0),d[m]=c,f}},"./node_modules/core-js/internals/create-property-descriptor.js":function(n,r){n.exports=function(s,i){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:i}}},"./node_modules/core-js/internals/create-property.js":function(n,r,s){var i=s("./node_modules/core-js/internals/to-primitive.js"),a=s("./node_modules/core-js/internals/object-define-property.js"),o=s("./node_modules/core-js/internals/create-property-descriptor.js");n.exports=function(l,d,c){var f=i(d);f in l?a.f(l,f,o(0,c)):l[f]=c}},"./node_modules/core-js/internals/define-iterator.js":function(n,r,s){var i=s("./node_modules/core-js/internals/export.js"),a=s("./node_modules/core-js/internals/create-iterator-constructor.js"),o=s("./node_modules/core-js/internals/object-get-prototype-of.js"),l=s("./node_modules/core-js/internals/object-set-prototype-of.js"),d=s("./node_modules/core-js/internals/set-to-string-tag.js"),c=s("./node_modules/core-js/internals/hide.js"),f=s("./node_modules/core-js/internals/redefine.js"),p=s("./node_modules/core-js/internals/well-known-symbol.js"),h=s("./node_modules/core-js/internals/is-pure.js"),m=s("./node_modules/core-js/internals/iterators.js"),g=s("./node_modules/core-js/internals/iterators-core.js"),y=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,_=p("iterator"),k="keys",w="values",S="entries",C=function(){return this};n.exports=function(A,M,E,P,I,F,L){a(E,M,P);var z=function(ie){if(ie===I&&X)return X;if(!x&&ie in V)return V[ie];switch(ie){case k:return function(){return new E(this,ie)};case w:return function(){return new E(this,ie)};case S:return function(){return new E(this,ie)}}return function(){return new E(this)}},N=M+" Iterator",q=!1,V=A.prototype,O=V[_]||V["@@iterator"]||I&&V[I],X=!x&&O||z(I),j=M=="Array"&&V.entries||O,U,G,ee;if(j&&(U=o(j.call(new A)),y!==Object.prototype&&U.next&&(!h&&o(U)!==y&&(l?l(U,y):typeof U[_]!="function"&&c(U,_,C)),d(U,N,!0,!0),h&&(m[N]=C))),I==w&&O&&O.name!==w&&(q=!0,X=function(){return O.call(this)}),(!h||L)&&V[_]!==X&&c(V,_,X),m[M]=X,I)if(G={values:z(w),keys:F?X:z(k),entries:z(S)},L)for(ee in G)(x||q||!(ee in V))&&f(V,ee,G[ee]);else i({target:M,proto:!0,forced:x||q},G);return G}},"./node_modules/core-js/internals/descriptors.js":function(n,r,s){var i=s("./node_modules/core-js/internals/fails.js");n.exports=!i(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/document-create-element.js":function(n,r,s){var i=s("./node_modules/core-js/internals/global.js"),a=s("./node_modules/core-js/internals/is-object.js"),o=i.document,l=a(o)&&a(o.createElement);n.exports=function(d){return l?o.createElement(d):{}}},"./node_modules/core-js/internals/enum-bug-keys.js":function(n,r){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(n,r,s){var i=s("./node_modules/core-js/internals/global.js"),a=s("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,o=s("./node_modules/core-js/internals/hide.js"),l=s("./node_modules/core-js/internals/redefine.js"),d=s("./node_modules/core-js/internals/set-global.js"),c=s("./node_modules/core-js/internals/copy-constructor-properties.js"),f=s("./node_modules/core-js/internals/is-forced.js");n.exports=function(p,h){var m=p.target,g=p.global,y=p.stat,x,_,k,w,S,C;if(g?_=i:y?_=i[m]||d(m,{}):_=(i[m]||{}).prototype,_)for(k in h){if(S=h[k],p.noTargetGet?(C=a(_,k),w=C&&C.value):w=_[k],x=f(g?k:m+(y?".":"#")+k,p.forced),!x&&w!==void 0){if(typeof S==typeof w)continue;c(S,w)}(p.sham||w&&w.sham)&&o(S,"sham",!0),l(_,k,S,p)}}},"./node_modules/core-js/internals/fails.js":function(n,r){n.exports=function(s){try{return!!s()}catch(i){return!0}}},"./node_modules/core-js/internals/function-to-string.js":function(n,r,s){var i=s("./node_modules/core-js/internals/shared.js");n.exports=i("native-function-to-string",Function.toString)},"./node_modules/core-js/internals/get-iterator-method.js":function(n,r,s){var i=s("./node_modules/core-js/internals/classof.js"),a=s("./node_modules/core-js/internals/iterators.js"),o=s("./node_modules/core-js/internals/well-known-symbol.js"),l=o("iterator");n.exports=function(d){if(d!=null)return d[l]||d["@@iterator"]||a[i(d)]}},"./node_modules/core-js/internals/global.js":function(n,r,s){(function(i){var a="object",o=function(l){return l&&l.Math==Math&&l};n.exports=o(typeof globalThis==a&&globalThis)||o(typeof window==a&&window)||o(typeof self==a&&self)||o(typeof i==a&&i)||Function("return this")()}).call(this,s("./node_modules/webpack/buildin/global.js"))},"./node_modules/core-js/internals/has.js":function(n,r){var s={}.hasOwnProperty;n.exports=function(i,a){return s.call(i,a)}},"./node_modules/core-js/internals/hidden-keys.js":function(n,r){n.exports={}},"./node_modules/core-js/internals/hide.js":function(n,r,s){var i=s("./node_modules/core-js/internals/descriptors.js"),a=s("./node_modules/core-js/internals/object-define-property.js"),o=s("./node_modules/core-js/internals/create-property-descriptor.js");n.exports=i?function(l,d,c){return a.f(l,d,o(1,c))}:function(l,d,c){return l[d]=c,l}},"./node_modules/core-js/internals/html.js":function(n,r,s){var i=s("./node_modules/core-js/internals/global.js"),a=i.document;n.exports=a&&a.documentElement},"./node_modules/core-js/internals/ie8-dom-define.js":function(n,r,s){var i=s("./node_modules/core-js/internals/descriptors.js"),a=s("./node_modules/core-js/internals/fails.js"),o=s("./node_modules/core-js/internals/document-create-element.js");n.exports=!i&&!a(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(n,r,s){var i=s("./node_modules/core-js/internals/fails.js"),a=s("./node_modules/core-js/internals/classof-raw.js"),o="".split;n.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return a(l)=="String"?o.call(l,""):Object(l)}:Object},"./node_modules/core-js/internals/internal-state.js":function(n,r,s){var i=s("./node_modules/core-js/internals/native-weak-map.js"),a=s("./node_modules/core-js/internals/global.js"),o=s("./node_modules/core-js/internals/is-object.js"),l=s("./node_modules/core-js/internals/hide.js"),d=s("./node_modules/core-js/internals/has.js"),c=s("./node_modules/core-js/internals/shared-key.js"),f=s("./node_modules/core-js/internals/hidden-keys.js"),p=a.WeakMap,h,m,g,y=function(A){return g(A)?m(A):h(A,{})},x=function(A){return function(M){var E;if(!o(M)||(E=m(M)).type!==A)throw TypeError("Incompatible receiver, "+A+" required");return E}};if(i){var _=new p,k=_.get,w=_.has,S=_.set;h=function(A,M){return S.call(_,A,M),M},m=function(A){return k.call(_,A)||{}},g=function(A){return w.call(_,A)}}else{var C=c("state");f[C]=!0,h=function(A,M){return l(A,C,M),M},m=function(A){return d(A,C)?A[C]:{}},g=function(A){return d(A,C)}}n.exports={set:h,get:m,has:g,enforce:y,getterFor:x}},"./node_modules/core-js/internals/is-array-iterator-method.js":function(n,r,s){var i=s("./node_modules/core-js/internals/well-known-symbol.js"),a=s("./node_modules/core-js/internals/iterators.js"),o=i("iterator"),l=Array.prototype;n.exports=function(d){return d!==void 0&&(a.Array===d||l[o]===d)}},"./node_modules/core-js/internals/is-forced.js":function(n,r,s){var i=s("./node_modules/core-js/internals/fails.js"),a=/#|\.prototype\./,o=function(p,h){var m=d[l(p)];return m==f?!0:m==c?!1:typeof h=="function"?i(h):!!h},l=o.normalize=function(p){return String(p).replace(a,".").toLowerCase()},d=o.data={},c=o.NATIVE="N",f=o.POLYFILL="P";n.exports=o},"./node_modules/core-js/internals/is-object.js":function(n,r){n.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},"./node_modules/core-js/internals/is-pure.js":function(n,r){n.exports=!1},"./node_modules/core-js/internals/iterators-core.js":function(n,r,s){var i=s("./node_modules/core-js/internals/object-get-prototype-of.js"),a=s("./node_modules/core-js/internals/hide.js"),o=s("./node_modules/core-js/internals/has.js"),l=s("./node_modules/core-js/internals/well-known-symbol.js"),d=s("./node_modules/core-js/internals/is-pure.js"),c=l("iterator"),f=!1,p=function(){return this},h,m,g;[].keys&&(g=[].keys(),"next"in g?(m=i(i(g)),m!==Object.prototype&&(h=m)):f=!0),h==null&&(h={}),!d&&!o(h,c)&&a(h,c,p),n.exports={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:f}},"./node_modules/core-js/internals/iterators.js":function(n,r){n.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(n,r,s){var i=s("./node_modules/core-js/internals/fails.js");n.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},"./node_modules/core-js/internals/native-weak-map.js":function(n,r,s){var i=s("./node_modules/core-js/internals/global.js"),a=s("./node_modules/core-js/internals/function-to-string.js"),o=i.WeakMap;n.exports=typeof o=="function"&&/native code/.test(a.call(o))},"./node_modules/core-js/internals/object-create.js":function(n,r,s){var i=s("./node_modules/core-js/internals/an-object.js"),a=s("./node_modules/core-js/internals/object-define-properties.js"),o=s("./node_modules/core-js/internals/enum-bug-keys.js"),l=s("./node_modules/core-js/internals/hidden-keys.js"),d=s("./node_modules/core-js/internals/html.js"),c=s("./node_modules/core-js/internals/document-create-element.js"),f=s("./node_modules/core-js/internals/shared-key.js"),p=f("IE_PROTO"),h="prototype",m=function(){},g=function(){var y=c("iframe"),x=o.length,_="<",k="script",w=">",S="java"+k+":",C;for(y.style.display="none",d.appendChild(y),y.src=String(S),C=y.contentWindow.document,C.open(),C.write(_+k+w+"document.F=Object"+_+"/"+k+w),C.close(),g=C.F;x--;)delete g[h][o[x]];return g()};n.exports=Object.create||function(x,_){var k;return x!==null?(m[h]=i(x),k=new m,m[h]=null,k[p]=x):k=g(),_===void 0?k:a(k,_)},l[p]=!0},"./node_modules/core-js/internals/object-define-properties.js":function(n,r,s){var i=s("./node_modules/core-js/internals/descriptors.js"),a=s("./node_modules/core-js/internals/object-define-property.js"),o=s("./node_modules/core-js/internals/an-object.js"),l=s("./node_modules/core-js/internals/object-keys.js");n.exports=i?Object.defineProperties:function(c,f){o(c);for(var p=l(f),h=p.length,m=0,g;h>m;)a.f(c,g=p[m++],f[g]);return c}},"./node_modules/core-js/internals/object-define-property.js":function(n,r,s){var i=s("./node_modules/core-js/internals/descriptors.js"),a=s("./node_modules/core-js/internals/ie8-dom-define.js"),o=s("./node_modules/core-js/internals/an-object.js"),l=s("./node_modules/core-js/internals/to-primitive.js"),d=Object.defineProperty;r.f=i?d:function(f,p,h){if(o(f),p=l(p,!0),o(h),a)try{return d(f,p,h)}catch(m){}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(f[p]=h.value),f}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(n,r,s){var i=s("./node_modules/core-js/internals/descriptors.js"),a=s("./node_modules/core-js/internals/object-property-is-enumerable.js"),o=s("./node_modules/core-js/internals/create-property-descriptor.js"),l=s("./node_modules/core-js/internals/to-indexed-object.js"),d=s("./node_modules/core-js/internals/to-primitive.js"),c=s("./node_modules/core-js/internals/has.js"),f=s("./node_modules/core-js/internals/ie8-dom-define.js"),p=Object.getOwnPropertyDescriptor;r.f=i?p:function(m,g){if(m=l(m),g=d(g,!0),f)try{return p(m,g)}catch(y){}if(c(m,g))return o(!a.f.call(m,g),m[g])}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(n,r,s){var i=s("./node_modules/core-js/internals/object-keys-internal.js"),a=s("./node_modules/core-js/internals/enum-bug-keys.js"),o=a.concat("length","prototype");r.f=Object.getOwnPropertyNames||function(d){return i(d,o)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(n,r){r.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(n,r,s){var i=s("./node_modules/core-js/internals/has.js"),a=s("./node_modules/core-js/internals/to-object.js"),o=s("./node_modules/core-js/internals/shared-key.js"),l=s("./node_modules/core-js/internals/correct-prototype-getter.js"),d=o("IE_PROTO"),c=Object.prototype;n.exports=l?Object.getPrototypeOf:function(f){return f=a(f),i(f,d)?f[d]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?c:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(n,r,s){var i=s("./node_modules/core-js/internals/has.js"),a=s("./node_modules/core-js/internals/to-indexed-object.js"),o=s("./node_modules/core-js/internals/array-includes.js"),l=s("./node_modules/core-js/internals/hidden-keys.js"),d=o(!1);n.exports=function(c,f){var p=a(c),h=0,m=[],g;for(g in p)!i(l,g)&&i(p,g)&&m.push(g);for(;f.length>h;)i(p,g=f[h++])&&(~d(m,g)||m.push(g));return m}},"./node_modules/core-js/internals/object-keys.js":function(n,r,s){var i=s("./node_modules/core-js/internals/object-keys-internal.js"),a=s("./node_modules/core-js/internals/enum-bug-keys.js");n.exports=Object.keys||function(l){return i(l,a)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(n,r,s){var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!i.call({1:2},1);r.f=o?function(d){var c=a(this,d);return!!c&&c.enumerable}:i},"./node_modules/core-js/internals/object-set-prototype-of.js":function(n,r,s){var i=s("./node_modules/core-js/internals/validate-set-prototype-of-arguments.js");n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a=!1,o={},l;try{l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,l.call(o,[]),a=o instanceof Array}catch(d){}return function(c,f){return i(c,f),a?l.call(c,f):c.__proto__=f,c}}():void 0)},"./node_modules/core-js/internals/own-keys.js":function(n,r,s){var i=s("./node_modules/core-js/internals/global.js"),a=s("./node_modules/core-js/internals/object-get-own-property-names.js"),o=s("./node_modules/core-js/internals/object-get-own-property-symbols.js"),l=s("./node_modules/core-js/internals/an-object.js"),d=i.Reflect;n.exports=d&&d.ownKeys||function(f){var p=a.f(l(f)),h=o.f;return h?p.concat(h(f)):p}},"./node_modules/core-js/internals/path.js":function(n,r,s){n.exports=s("./node_modules/core-js/internals/global.js")},"./node_modules/core-js/internals/redefine.js":function(n,r,s){var i=s("./node_modules/core-js/internals/global.js"),a=s("./node_modules/core-js/internals/shared.js"),o=s("./node_modules/core-js/internals/hide.js"),l=s("./node_modules/core-js/internals/has.js"),d=s("./node_modules/core-js/internals/set-global.js"),c=s("./node_modules/core-js/internals/function-to-string.js"),f=s("./node_modules/core-js/internals/internal-state.js"),p=f.get,h=f.enforce,m=String(c).split("toString");a("inspectSource",function(g){return c.call(g)}),(n.exports=function(g,y,x,_){var k=_?!!_.unsafe:!1,w=_?!!_.enumerable:!1,S=_?!!_.noTargetGet:!1;if(typeof x=="function"&&(typeof y=="string"&&!l(x,"name")&&o(x,"name",y),h(x).source=m.join(typeof y=="string"?y:"")),g===i){w?g[y]=x:d(y,x);return}else k?!S&&g[y]&&(w=!0):delete g[y];w?g[y]=x:o(g,y,x)})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||c.call(this)})},"./node_modules/core-js/internals/require-object-coercible.js":function(n,r){n.exports=function(s){if(s==null)throw TypeError("Can't call method on "+s);return s}},"./node_modules/core-js/internals/set-global.js":function(n,r,s){var i=s("./node_modules/core-js/internals/global.js"),a=s("./node_modules/core-js/internals/hide.js");n.exports=function(o,l){try{a(i,o,l)}catch(d){i[o]=l}return l}},"./node_modules/core-js/internals/set-to-string-tag.js":function(n,r,s){var i=s("./node_modules/core-js/internals/object-define-property.js").f,a=s("./node_modules/core-js/internals/has.js"),o=s("./node_modules/core-js/internals/well-known-symbol.js"),l=o("toStringTag");n.exports=function(d,c,f){d&&!a(d=f?d:d.prototype,l)&&i(d,l,{configurable:!0,value:c})}},"./node_modules/core-js/internals/shared-key.js":function(n,r,s){var i=s("./node_modules/core-js/internals/shared.js"),a=s("./node_modules/core-js/internals/uid.js"),o=i("keys");n.exports=function(l){return o[l]||(o[l]=a(l))}},"./node_modules/core-js/internals/shared.js":function(n,r,s){var i=s("./node_modules/core-js/internals/global.js"),a=s("./node_modules/core-js/internals/set-global.js"),o=s("./node_modules/core-js/internals/is-pure.js"),l="__core-js_shared__",d=i[l]||a(l,{});(n.exports=function(c,f){return d[c]||(d[c]=f!==void 0?f:{})})("versions",[]).push({version:"3.1.3",mode:o?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-at.js":function(n,r,s){var i=s("./node_modules/core-js/internals/to-integer.js"),a=s("./node_modules/core-js/internals/require-object-coercible.js");n.exports=function(o,l,d){var c=String(a(o)),f=i(l),p=c.length,h,m;return f<0||f>=p?d?"":void 0:(h=c.charCodeAt(f),h<55296||h>56319||f+1===p||(m=c.charCodeAt(f+1))<56320||m>57343?d?c.charAt(f):h:d?c.slice(f,f+2):(h-55296<<10)+(m-56320)+65536)}},"./node_modules/core-js/internals/to-absolute-index.js":function(n,r,s){var i=s("./node_modules/core-js/internals/to-integer.js"),a=Math.max,o=Math.min;n.exports=function(l,d){var c=i(l);return c<0?a(c+d,0):o(c,d)}},"./node_modules/core-js/internals/to-indexed-object.js":function(n,r,s){var i=s("./node_modules/core-js/internals/indexed-object.js"),a=s("./node_modules/core-js/internals/require-object-coercible.js");n.exports=function(o){return i(a(o))}},"./node_modules/core-js/internals/to-integer.js":function(n,r){var s=Math.ceil,i=Math.floor;n.exports=function(a){return isNaN(a=+a)?0:(a>0?i:s)(a)}},"./node_modules/core-js/internals/to-length.js":function(n,r,s){var i=s("./node_modules/core-js/internals/to-integer.js"),a=Math.min;n.exports=function(o){return o>0?a(i(o),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(n,r,s){var i=s("./node_modules/core-js/internals/require-object-coercible.js");n.exports=function(a){return Object(i(a))}},"./node_modules/core-js/internals/to-primitive.js":function(n,r,s){var i=s("./node_modules/core-js/internals/is-object.js");n.exports=function(a,o){if(!i(a))return a;var l,d;if(o&&typeof(l=a.toString)=="function"&&!i(d=l.call(a))||typeof(l=a.valueOf)=="function"&&!i(d=l.call(a))||!o&&typeof(l=a.toString)=="function"&&!i(d=l.call(a)))return d;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/uid.js":function(n,r){var s=0,i=Math.random();n.exports=function(a){return"Symbol(".concat(a===void 0?"":a,")_",(++s+i).toString(36))}},"./node_modules/core-js/internals/validate-set-prototype-of-arguments.js":function(n,r,s){var i=s("./node_modules/core-js/internals/is-object.js"),a=s("./node_modules/core-js/internals/an-object.js");n.exports=function(o,l){if(a(o),!i(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype")}},"./node_modules/core-js/internals/well-known-symbol.js":function(n,r,s){var i=s("./node_modules/core-js/internals/global.js"),a=s("./node_modules/core-js/internals/shared.js"),o=s("./node_modules/core-js/internals/uid.js"),l=s("./node_modules/core-js/internals/native-symbol.js"),d=i.Symbol,c=a("wks");n.exports=function(f){return c[f]||(c[f]=l&&d[f]||(l?d:o)("Symbol."+f))}},"./node_modules/core-js/modules/es.array.from.js":function(n,r,s){var i=s("./node_modules/core-js/internals/export.js"),a=s("./node_modules/core-js/internals/array-from.js"),o=s("./node_modules/core-js/internals/check-correctness-of-iteration.js"),l=!o(function(d){Array.from(d)});i({target:"Array",stat:!0,forced:l},{from:a})},"./node_modules/core-js/modules/es.string.iterator.js":function(n,r,s){var i=s("./node_modules/core-js/internals/string-at.js"),a=s("./node_modules/core-js/internals/internal-state.js"),o=s("./node_modules/core-js/internals/define-iterator.js"),l="String Iterator",d=a.set,c=a.getterFor(l);o(String,"String",function(f){d(this,{type:l,string:String(f),index:0})},function(){var p=c(this),h=p.string,m=p.index,g;return m>=h.length?{value:void 0,done:!0}:(g=i(h,m,!0),p.index+=g.length,{value:g,done:!1})})},"./node_modules/webpack/buildin/global.js":function(n,r){var s;s=function(){return this}();try{s=s||Function("return this")()||(0,eval)("this")}catch(i){typeof window=="object"&&(s=window)}n.exports=s},"./src/default-attrs.json":function(n){n.exports={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}},"./src/icon.js":function(n,r,s){Object.defineProperty(r,"__esModule",{value:!0});var i=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(g[_]=x[_])}return g},a=function(){function g(y,x){for(var _=0;_<x.length;_++){var k=x[_];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(y,k.key,k)}}return function(y,x,_){return x&&g(y.prototype,x),_&&g(y,_),y}}(),o=s("./node_modules/classnames/dedupe.js"),l=f(o),d=s("./src/default-attrs.json"),c=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}var h=function(){function g(y,x){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];p(this,g),this.name=y,this.contents=x,this.tags=_,this.attrs=i({},c.default,{class:"feather feather-"+y})}return a(g,[{key:"toSvg",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=i({},this.attrs,x,{class:(0,l.default)(this.attrs.class,x.class)});return"<svg "+m(_)+">"+this.contents+"</svg>"}},{key:"toString",value:function(){return this.contents}}]),g}();function m(g){return Object.keys(g).map(function(y){return y+'="'+g[y]+'"'}).join(" ")}r.default=h},"./src/icons.js":function(n,r,s){Object.defineProperty(r,"__esModule",{value:!0});var i=s("./src/icon.js"),a=f(i),o=s("./dist/icons.json"),l=f(o),d=s("./src/tags.json"),c=f(d);function f(p){return p&&p.__esModule?p:{default:p}}r.default=Object.keys(l.default).map(function(p){return new a.default(p,l.default[p],c.default[p])}).reduce(function(p,h){return p[h.name]=h,p},{})},"./src/index.js":function(n,r,s){var i=s("./src/icons.js"),a=f(i),o=s("./src/to-svg.js"),l=f(o),d=s("./src/replace.js"),c=f(d);function f(p){return p&&p.__esModule?p:{default:p}}n.exports={icons:a.default,toSvg:l.default,replace:c.default}},"./src/replace.js":function(n,r,s){Object.defineProperty(r,"__esModule",{value:!0});var i=Object.assign||function(m){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(m[x]=y[x])}return m},a=s("./node_modules/classnames/dedupe.js"),o=c(a),l=s("./src/icons.js"),d=c(l);function c(m){return m&&m.__esModule?m:{default:m}}function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof document=="undefined")throw new Error("`feather.replace()` only works in a browser environment.");var g=document.querySelectorAll("[data-feather]");Array.from(g).forEach(function(y){return p(y,m)})}function p(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=h(m),x=y["data-feather"];if(delete y["data-feather"],d.default[x]===void 0){console.warn("feather: '"+x+"' is not a valid icon");return}var _=d.default[x].toSvg(i({},g,y,{class:(0,o.default)(g.class,y.class)})),k=new DOMParser().parseFromString(_,"image/svg+xml"),w=k.querySelector("svg");m.parentNode.replaceChild(w,m)}function h(m){return Array.from(m.attributes).reduce(function(g,y){return g[y.name]=y.value,g},{})}r.default=f},"./src/tags.json":function(n){n.exports={activity:["pulse","health","action","motion"],airplay:["stream","cast","mirroring"],"alert-circle":["warning","alert","danger"],"alert-octagon":["warning","alert","danger"],"alert-triangle":["warning","alert","danger"],"align-center":["text alignment","center"],"align-justify":["text alignment","justified"],"align-left":["text alignment","left"],"align-right":["text alignment","right"],anchor:[],archive:["index","box"],"at-sign":["mention","at","email","message"],award:["achievement","badge"],aperture:["camera","photo"],"bar-chart":["statistics","diagram","graph"],"bar-chart-2":["statistics","diagram","graph"],battery:["power","electricity"],"battery-charging":["power","electricity"],bell:["alarm","notification","sound"],"bell-off":["alarm","notification","silent"],bluetooth:["wireless"],"book-open":["read","library"],book:["read","dictionary","booklet","magazine","library"],bookmark:["read","clip","marker","tag"],box:["cube"],briefcase:["work","bag","baggage","folder"],calendar:["date"],camera:["photo"],cast:["chromecast","airplay"],"chevron-down":["expand"],"chevron-up":["collapse"],circle:["off","zero","record"],clipboard:["copy"],clock:["time","watch","alarm"],"cloud-drizzle":["weather","shower"],"cloud-lightning":["weather","bolt"],"cloud-rain":["weather"],"cloud-snow":["weather","blizzard"],cloud:["weather"],codepen:["logo"],codesandbox:["logo"],code:["source","programming"],coffee:["drink","cup","mug","tea","cafe","hot","beverage"],columns:["layout"],command:["keyboard","cmd","terminal","prompt"],compass:["navigation","safari","travel","direction"],copy:["clone","duplicate"],"corner-down-left":["arrow","return"],"corner-down-right":["arrow"],"corner-left-down":["arrow"],"corner-left-up":["arrow"],"corner-right-down":["arrow"],"corner-right-up":["arrow"],"corner-up-left":["arrow"],"corner-up-right":["arrow"],cpu:["processor","technology"],"credit-card":["purchase","payment","cc"],crop:["photo","image"],crosshair:["aim","target"],database:["storage","memory"],delete:["remove"],disc:["album","cd","dvd","music"],"dollar-sign":["currency","money","payment"],droplet:["water"],edit:["pencil","change"],"edit-2":["pencil","change"],"edit-3":["pencil","change"],eye:["view","watch"],"eye-off":["view","watch","hide","hidden"],"external-link":["outbound"],facebook:["logo","social"],"fast-forward":["music"],figma:["logo","design","tool"],"file-minus":["delete","remove","erase"],"file-plus":["add","create","new"],"file-text":["data","txt","pdf"],film:["movie","video"],filter:["funnel","hopper"],flag:["report"],"folder-minus":["directory"],"folder-plus":["directory"],folder:["directory"],framer:["logo","design","tool"],frown:["emoji","face","bad","sad","emotion"],gift:["present","box","birthday","party"],"git-branch":["code","version control"],"git-commit":["code","version control"],"git-merge":["code","version control"],"git-pull-request":["code","version control"],github:["logo","version control"],gitlab:["logo","version control"],globe:["world","browser","language","translate"],"hard-drive":["computer","server","memory","data"],hash:["hashtag","number","pound"],headphones:["music","audio","sound"],heart:["like","love","emotion"],"help-circle":["question mark"],hexagon:["shape","node.js","logo"],home:["house","living"],image:["picture"],inbox:["email"],instagram:["logo","camera"],key:["password","login","authentication","secure"],layers:["stack"],layout:["window","webpage"],"life-buoy":["help","life ring","support"],link:["chain","url"],"link-2":["chain","url"],linkedin:["logo","social media"],list:["options"],lock:["security","password","secure"],"log-in":["sign in","arrow","enter"],"log-out":["sign out","arrow","exit"],mail:["email","message"],"map-pin":["location","navigation","travel","marker"],map:["location","navigation","travel"],maximize:["fullscreen"],"maximize-2":["fullscreen","arrows","expand"],meh:["emoji","face","neutral","emotion"],menu:["bars","navigation","hamburger"],"message-circle":["comment","chat"],"message-square":["comment","chat"],"mic-off":["record","sound","mute"],mic:["record","sound","listen"],minimize:["exit fullscreen","close"],"minimize-2":["exit fullscreen","arrows","close"],minus:["subtract"],monitor:["tv","screen","display"],moon:["dark","night"],"more-horizontal":["ellipsis"],"more-vertical":["ellipsis"],"mouse-pointer":["arrow","cursor"],move:["arrows"],music:["note"],navigation:["location","travel"],"navigation-2":["location","travel"],octagon:["stop"],package:["box","container"],paperclip:["attachment"],pause:["music","stop"],"pause-circle":["music","audio","stop"],"pen-tool":["vector","drawing"],percent:["discount"],"phone-call":["ring"],"phone-forwarded":["call"],"phone-incoming":["call"],"phone-missed":["call"],"phone-off":["call","mute"],"phone-outgoing":["call"],phone:["call"],play:["music","start"],"pie-chart":["statistics","diagram"],"play-circle":["music","start"],plus:["add","new"],"plus-circle":["add","new"],"plus-square":["add","new"],pocket:["logo","save"],power:["on","off"],printer:["fax","office","device"],radio:["signal"],"refresh-cw":["synchronise","arrows"],"refresh-ccw":["arrows"],repeat:["loop","arrows"],rewind:["music"],"rotate-ccw":["arrow"],"rotate-cw":["arrow"],rss:["feed","subscribe"],save:["floppy disk"],scissors:["cut"],search:["find","magnifier","magnifying glass"],send:["message","mail","email","paper airplane","paper aeroplane"],settings:["cog","edit","gear","preferences"],"share-2":["network","connections"],shield:["security","secure"],"shield-off":["security","insecure"],"shopping-bag":["ecommerce","cart","purchase","store"],"shopping-cart":["ecommerce","cart","purchase","store"],shuffle:["music"],"skip-back":["music"],"skip-forward":["music"],slack:["logo"],slash:["ban","no"],sliders:["settings","controls"],smartphone:["cellphone","device"],smile:["emoji","face","happy","good","emotion"],speaker:["audio","music"],star:["bookmark","favorite","like"],"stop-circle":["media","music"],sun:["brightness","weather","light"],sunrise:["weather","time","morning","day"],sunset:["weather","time","evening","night"],tablet:["device"],tag:["label"],target:["logo","bullseye"],terminal:["code","command line","prompt"],thermometer:["temperature","celsius","fahrenheit","weather"],"thumbs-down":["dislike","bad","emotion"],"thumbs-up":["like","good","emotion"],"toggle-left":["on","off","switch"],"toggle-right":["on","off","switch"],tool:["settings","spanner"],trash:["garbage","delete","remove","bin"],"trash-2":["garbage","delete","remove","bin"],triangle:["delta"],truck:["delivery","van","shipping","transport","lorry"],tv:["television","stream"],twitch:["logo"],twitter:["logo","social"],type:["text"],umbrella:["rain","weather"],unlock:["security"],"user-check":["followed","subscribed"],"user-minus":["delete","remove","unfollow","unsubscribe"],"user-plus":["new","add","create","follow","subscribe"],"user-x":["delete","remove","unfollow","unsubscribe","unavailable"],user:["person","account"],users:["group"],"video-off":["camera","movie","film"],video:["camera","movie","film"],voicemail:["phone"],volume:["music","sound","mute"],"volume-1":["music","sound"],"volume-2":["music","sound"],"volume-x":["music","sound","mute"],watch:["clock","time"],"wifi-off":["disabled"],wifi:["connection","signal","wireless"],wind:["weather","air"],"x-circle":["cancel","close","delete","remove","times","clear"],"x-octagon":["delete","stop","alert","warning","times","clear"],"x-square":["cancel","close","delete","remove","times","clear"],x:["cancel","close","delete","remove","times","clear"],youtube:["logo","video","play"],"zap-off":["flash","camera","lightning"],zap:["flash","camera","lightning"],"zoom-in":["magnifying glass"],"zoom-out":["magnifying glass"]}},"./src/to-svg.js":function(n,r,s){Object.defineProperty(r,"__esModule",{value:!0});var i=s("./src/icons.js"),a=o(i);function o(d){return d&&d.__esModule?d:{default:d}}function l(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(console.warn("feather.toSvg() is deprecated. Please use feather.icons[name].toSvg() instead."),!d)throw new Error("The required `key` (icon name) parameter is missing.");if(!a.default[d])throw new Error("No icon matching '"+d+"'. See the complete list of icons at https://feathericons.com");return a.default[d].toSvg(c)}r.default=l},0:function(n,r,s){s("./node_modules/core-js/es/array/from.js"),n.exports=s("./src/index.js")}})})})(LK);var Bye=LK.exports;const b$=OK(Bye),M8=Object.keys(b$.icons),yi={props:{name:{type:String,required:!0,validator(t){const e=M8.includes(t);return e||(console.groupCollapsed("[frappe-ui] name property for feather-icon must be one of "),console.dir(M8),console.groupEnd()),e}},color:{type:String,default:null},strokeWidth:{type:Number,default:1.5}},render(){let t=b$.icons[this.name];return t||(t=b$.icons.circle),pr("svg",xt(t.attrs,{fill:"none",stroke:"currentColor",color:this.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":this.strokeWidth,width:null,height:null,class:[t.attrs.class,"shrink-0"],innerHTML:t.contents},this.$attrs))}},CR=Je({__name:"LoadingIndicator",props:{scale:{required:!1,default:100}},setup(t){return(e,n)=>(T(),R("svg",{class:"max-w-xs animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",style:rt(`scale: ${t.scale}%;`),viewBox:"0 0 24 24"},[...n[0]||(n[0]=[u("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),u("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])],4))}}),zye={class:"rounded bg-surface-gray-7 px-2 py-1 text-xs text-ink-white shadow-xl"},ul=Je({inheritAttrs:!1,__name:"Tooltip",props:{text:{default:""},hoverDelay:{default:.5},placement:{default:"top"},arrowClass:{default:"fill-surface-gray-7"},disabled:{type:Boolean,default:!1}},setup(t){const e=t,n=Z(()=>e.hoverDelay*1e3);return(r,s)=>t.disabled?qe(r.$slots,"default",{key:0}):(T(),he(v(Aye),{key:1,delayDuration:n.value},{default:D(()=>[b(v(Mye),null,{default:D(()=>[b(v(Nye),{"as-child":""},{default:D(()=>[qe(r.$slots,"default")]),_:3}),b(v(Lye),null,{default:D(()=>[e.text||r.$slots.body||r.$slots.content?(T(),he(v(Iye),{key:0,side:e.placement,"side-offset":4,class:"z-[100]"},{default:D(()=>[qe(r.$slots,"body",{},()=>[u("div",zye,[qe(r.$slots,"content",{},()=>[W($(e.text),1)])])]),b(v(kye),{class:pe(e.arrowClass),width:8,height:4},null,8,["class"])]),_:3},8,["side"])):se("",!0)]),_:3})]),_:3})]),_:3},8,["delayDuration"]))}}),Uye=["disabled","ariaLabel","type"],J=Je({inheritAttrs:!1,__name:"Button",props:{theme:{default:"gray"},size:{default:"sm"},variant:{default:"subtle"},label:{},icon:{},iconLeft:{},iconRight:{},tooltip:{},loading:{type:Boolean,default:!1},loadingText:{},disabled:{type:Boolean,default:!1},route:{},link:{},type:{default:"button"}},setup(t,{expose:e}){const n=t,r=eb(),s=_n(),i=Z(()=>{let h={gray:"text-ink-white bg-surface-gray-7 hover:bg-surface-gray-6 active:bg-surface-gray-5",blue:"text-ink-white bg-blue-500 hover:bg-surface-blue-3 active:bg-blue-700",green:"text-ink-white bg-surface-green-3 hover:bg-green-700 active:bg-green-800",red:"text-ink-white bg-surface-red-5 hover:bg-surface-red-6 active:bg-surface-red-7"}[n.theme],m={gray:"text-ink-gray-8 bg-surface-gray-2 hover:bg-surface-gray-3 active:bg-surface-gray-4",blue:"text-ink-blue-3 bg-surface-blue-2 hover:bg-blue-200 active:bg-blue-300",green:"text-green-800 bg-surface-green-2 hover:bg-green-200 active:bg-green-300",red:"text-red-700 bg-surface-red-2 hover:bg-surface-red-3 active:bg-surface-red-4"}[n.theme],g={gray:"text-ink-gray-8 bg-surface-white bg-surface-white border border-outline-gray-2 hover:border-outline-gray-3 active:border-outline-gray-3 active:bg-surface-gray-4",blue:"text-ink-blue-3 bg-surface-white border border-outline-blue-1 hover:border-blue-400 active:border-blue-400 active:bg-blue-300",green:"text-green-800 bg-surface-white border border-outline-green-2 hover:border-green-500 active:border-green-500 active:bg-green-300",red:"text-red-700 bg-surface-white border border-outline-red-1 hover:border-outline-red-2 active:border-outline-red-2 active:bg-surface-red-3"}[n.theme],y={gray:"text-ink-gray-8 bg-transparent hover:bg-surface-gray-3 active:bg-surface-gray-4",blue:"text-ink-blue-3 bg-transparent hover:bg-blue-200 active:bg-blue-300",green:"text-green-800 bg-transparent hover:bg-green-200 active:bg-green-300",red:"text-red-700 bg-transparent hover:bg-surface-red-3 active:bg-surface-red-4"}[n.theme],x={gray:"focus-visible:ring focus-visible:ring-outline-gray-3",blue:"focus-visible:ring focus-visible:ring-blue-400",green:"focus-visible:ring focus-visible:ring-outline-green-2",red:"focus-visible:ring focus-visible:ring-outline-red-2"}[n.theme],_={subtle:m,solid:h,outline:g,ghost:y}[n.variant],k=`${n.theme}-${n.variant}`,S={"gray-solid":"bg-surface-gray-2 text-ink-gray-4","gray-subtle":"bg-surface-gray-2 text-ink-gray-4","gray-outline":"bg-surface-gray-2 text-ink-gray-4 border border-outline-gray-2","gray-ghost":"text-ink-gray-4","blue-solid":"bg-blue-300 text-ink-white","blue-subtle":"bg-surface-blue-2 text-ink-blue-link","blue-outline":"bg-surface-blue-2 text-ink-blue-link border border-outline-blue-1","blue-ghost":"text-ink-blue-link","green-solid":"bg-surface-green-2 text-ink-green-2","green-subtle":"bg-surface-green-2 text-ink-green-2","green-outline":"bg-surface-green-2 text-ink-green-2 border border-outline-green-2","green-ghost":"text-ink-green-2","red-solid":"bg-surface-red-2 text-ink-red-2","red-subtle":"bg-surface-red-2 text-ink-red-2","red-outline":"bg-surface-red-2 text-ink-red-2 border border-outline-red-1","red-ghost":"text-ink-red-2"}[k],C={sm:"h-7 text-base px-2 rounded",md:"h-8 text-base font-medium px-2.5 rounded",lg:"h-10 text-lg font-medium px-3 rounded-md",xl:"h-11.5 text-xl font-medium px-3.5 rounded-lg","2xl":"h-13 text-2xl font-medium px-3.5 rounded-xl"}[n.size];return d.value&&(C={sm:"h-7 w-7 rounded",md:"h-8 w-8 rounded",lg:"h-10 w-10 rounded-md",xl:"h-11.5 w-11.5 rounded-lg","2xl":"h-13 w-13 rounded-xl"}[n.size]),["inline-flex items-center justify-center gap-2 transition-colors focus:outline-none shrink-0",o.value?S:_,x,C]}),a=Z(()=>({sm:"h-4",md:"h-4.5",lg:"h-5",xl:"h-6","2xl":"h-6"})[n.size]),o=Z(()=>n.disabled||n.loading),l=Z(()=>d.value?n.label:null),d=Z(()=>n.icon||r.icon||c.value),c=Z(()=>{var g,y,x;if(!r.default)return!1;const h=r.default();if(!Array.isArray(h))return!1;let m=h[0];return!!(typeof((g=m.type)==null?void 0:g.name)=="string"&&((x=(y=m.type)==null?void 0:y.name)!=null&&x.startsWith("lucide-")))}),f=()=>{if(n.route)return s.push(n.route);if(n.link)return window.open(n.link,"_blank")},p=Q();return e({rootRef:p}),(h,m)=>{var g;return T(),he(ul,{text:t.tooltip,disabled:!((g=t.tooltip)!=null&&g.length)},{default:D(()=>[u("button",xt(h.$attrs,{class:i.value,onClick:f,disabled:o.value,ariaLabel:l.value,type:n.type,ref_key:"rootRef",ref:p}),[t.loading?(T(),he(CR,{key:0,class:pe({"h-3 w-3":t.size=="sm","h-[13.5px] w-[13.5px]":t.size=="md","h-[15px] w-[15px]":t.size=="lg","h-4.5 w-4.5":t.size=="xl"||t.size=="2xl"})},null,8,["class"])):h.$slots.prefix||t.iconLeft?qe(h.$slots,"prefix",{key:1},()=>[t.iconLeft&&typeof t.iconLeft=="string"?(T(),he(yi,{key:0,name:t.iconLeft,class:pe(a.value),"aria-hidden":"true"},null,8,["name","class"])):t.iconLeft?(T(),he(At(t.iconLeft),{key:1,class:pe(a.value)},null,8,["class"])):se("",!0)]):se("",!0),t.loading&&t.loadingText?(T(),R(xe,{key:2},[W($(t.loadingText),1)],64)):d.value&&!t.loading?(T(),R(xe,{key:3},[t.icon&&typeof t.icon=="string"?(T(),he(yi,{key:0,name:t.icon,class:pe(a.value),"aria-label":t.label},null,8,["name","class","aria-label"])):t.icon?(T(),he(At(t.icon),{key:1,class:pe(a.value)},null,8,["class"])):h.$slots.icon?qe(h.$slots,"icon",{key:2}):c.value?(T(),R("div",{key:3,class:pe(a.value)},[qe(h.$slots,"default",{},()=>[W($(t.label),1)])],2)):se("",!0)],64)):(T(),R("span",{key:4,class:pe([{"sr-only":d.value},"truncate"])},[qe(h.$slots,"default",{},()=>[W($(t.label),1)])],2)),qe(h.$slots,"suffix",{},()=>[t.iconRight&&typeof t.iconRight=="string"?(T(),he(yi,{key:0,name:t.iconRight,class:pe(a.value),"aria-hidden":"true"},null,8,["name","class"])):t.iconRight?(T(),he(At(t.iconRight),{key:1,class:pe(a.value)},null,8,["class"])):se("",!0)])],16,Uye)]),_:3},8,["text","disabled"])}}}),Hye={class:"w-full space-y-1.5"},qye={key:0,class:"block text-xs text-ink-gray-5"},Wye=["onClick"],Gye={class:"flex items-center overflow-hidden"},Yye={key:0,class:"truncate text-base leading-5 text-ink-gray-8"},Kye={key:1,class:"text-base leading-5 text-ink-gray-4"},Xye={key:0,class:"sticky top-0 z-10 flex items-stretch space-x-1.5 bg-surface-modal py-1.5"},Qye={class:"relative w-full"},Zye={class:"absolute right-0 inline-flex h-7 w-7 items-center justify-center"},Jye={key:0,class:"sticky top-10 truncate bg-surface-modal px-2.5 py-1.5 text-sm font-medium text-ink-gray-5"},e0e={class:"flex flex-1 gap-2 overflow-hidden items-center"},t0e={key:0,class:"flex flex-shrink-0"},n0e={key:1,class:"h-4 w-4"},r0e={class:"flex-1 truncate text-ink-gray-7"},s0e={key:0,class:"ml-2 flex-shrink-0"},i0e={key:0,class:"text-sm text-ink-gray-5"},a0e={key:1,class:"rounded-md px-2.5 py-1.5 text-base text-ink-gray-5"},o0e={key:0,class:"border-t p-1"},l0e={key:0,class:"flex items-center justify-end"},u0e={key:1,class:"flex items-center justify-end"},VK=Je({__name:"Autocomplete",props:{label:{},options:{},hideSearch:{type:Boolean,default:!1},placeholder:{},bodyClasses:{},loading:{type:Boolean},placement:{},showFooter:{type:Boolean},compareFn:{type:Function,default:(t,e)=>t.value===e.value},maxOptions:{default:50},multiple:{type:Boolean,default:!1},modelValue:{type:[Array,null,String,Number,Boolean,Object]}},emits:["update:modelValue","update:query","change"],setup(t,{expose:e,emit:n}){const r=t,s=n,i=Q(),a=Q(!1),o=Q(""),l=Z(()=>{var P;if(!((P=r.options)!=null&&P.length))return[];let E;return C(r.options[0])?E=r.options:E=[{group:"",items:c(r.options),hideLabel:!1}],E.map((I,F)=>({key:F,group:I.group,hideLabel:I.hideLabel,items:f(c(I.items||[]))})).filter(I=>I.items.length>0)}),d=Z(()=>l.value.flatMap(E=>E.items)),c=E=>E?E.map(P=>S(P)?P:{label:P.toString(),value:P}):[],f=E=>o.value?E.filter(P=>P.label.toLowerCase().includes(o.value.trim().toLowerCase())||P.value.toString().toLowerCase().includes(o.value.trim().toLowerCase())):E,p=Z({get(){if(!r.multiple)return h(r.modelValue)||m(r.modelValue);const E=r.modelValue||[];return S(E[0])?E:E.map(P=>h(P)||m(P))},set(E){o.value="",E&&!r.multiple&&(a.value=!1),s("update:modelValue",E),s("change",E)}}),h=E=>{if(!E)return E;const P=S(E)?E.value:E;return d.value.find(I=>I.value===P)},m=E=>S(E)?E:{label:E,value:E},g=E=>S(E)?(E==null?void 0:E.label)||(E==null?void 0:E.value):E,y=Z(()=>p.value?r.multiple?p.value.map(E=>g(E)).join(", "):g(p.value):""),x=E=>{if(!p.value)return!1;const P=S(E)?E.value:E;return r.multiple?p.value.find(I=>S(I)?I.value===P:I===P):p.value===P},_=Z(()=>{var E;return r.multiple?d.value.length===((E=p.value)==null?void 0:E.length):!1}),k=()=>{p.value=d.value},w=()=>{p.value=r.multiple?[]:void 0},S=E=>typeof E=="object",C=E=>typeof E=="object"&&"items"in E&&"group"in E;et(()=>o.value,()=>{s("update:query",o.value)}),et(()=>a.value,()=>{a.value&&nr(()=>{var E;return(E=i.value)==null?void 0:E.$el.focus()})});const A=Q();return e({rootRef:A,togglePopover:()=>{a.value=!a.value}}),(E,P)=>(T(),he(v(she),{modelValue:p.value,"onUpdate:modelValue":P[2]||(P[2]=I=>p.value=I),multiple:t.multiple,nullable:"",by:t.compareFn},{default:D(({open:I})=>[b(v(IK),{class:"w-full",show:a.value,"onUpdate:show":P[1]||(P[1]=F=>a.value=F),ref_key:"rootRef",ref:A,placement:t.placement,"match-target-width":!0},{target:D(({open:F,togglePopover:L,close:z})=>[qe(E.$slots,"target",Pn(or({open:F,close:z,togglePopover:L,isOpen:I})),()=>[u("div",Hye,[r.label?(T(),R("label",qye,$(r.label),1)):se("",!0),u("button",{class:pe(["flex h-7 w-full items-center justify-between gap-2 rounded bg-surface-gray-2 px-2 py-1 transition-colors hover:bg-surface-gray-3 border border-transparent focus:border-outline-gray-4 focus:outline-none focus:ring-2 focus:ring-outline-gray-3",{"bg-surface-gray-3":I}]),onClick:()=>L()},[u("div",Gye,[qe(E.$slots,"prefix"),y.value?(T(),R("span",Yye,$(y.value),1)):(T(),R("span",Kye,$(t.placeholder||""),1)),qe(E.$slots,"suffix")]),b(yi,{name:"chevron-down",class:"h-4 w-4 text-ink-gray-5","aria-hidden":"true"})],10,Wye)])])]),body:D(({isOpen:F,togglePopover:L})=>[we(u("div",null,[u("div",{class:pe(["relative mt-1 rounded-lg bg-surface-modal text-base shadow-2xl",t.bodyClasses])},[b(v(ahe),{class:pe(["max-h-[15rem] overflow-y-auto px-1.5 pb-1.5",{"pt-1.5":t.hideSearch}]),static:""},{default:D(()=>[t.hideSearch?se("",!0):(T(),R("div",Xye,[u("div",Qye,[b(v(ihe),{ref_key:"searchInput",ref:i,class:"form-input w-full focus:bg-surface-gray-3 hover:bg-surface-gray-4 text-ink-gray-8",type:"text",value:o.value,onChange:P[0]||(P[0]=z=>o.value=z.target.value),autocomplete:"off",placeholder:"Search"},null,8,["value"]),u("div",Zye,[r.loading?(T(),he(CR,{key:0,class:"h-4 w-4 text-ink-gray-5"})):(T(),R("button",{key:1,onClick:w},[b(yi,{name:"x",class:"w-4 text-ink-gray-8"})]))])])])),(T(!0),R(xe,null,_e(l.value,z=>we((T(),R("div",{key:z.key},[z.group&&!z.hideLabel?(T(),R("div",Jye,$(z.group),1)):se("",!0),(T(!0),R(xe,null,_e(z.items.slice(0,r.maxOptions),(N,q)=>(T(),he(v(ohe),{as:"template",key:q,value:N,disabled:N.disabled},{default:D(({active:V,selected:O})=>[u("li",{class:pe(["flex cursor-pointer items-center justify-between rounded px-2.5 py-1.5 text-base",{"bg-surface-gray-3":V,"opacity-50":N.disabled}])},[u("div",e0e,[E.$slots["item-prefix"]||r.multiple?(T(),R("div",t0e,[qe(E.$slots,"item-prefix",xt({ref_for:!0},{active:V,selected:O,option:N}),()=>[x(N)?(T(),he(yi,{key:0,name:"check",class:"h-4 w-4 text-ink-gray-7"})):(T(),R("div",n0e))])])):se("",!0),u("span",r0e,$(g(N)),1)]),E.$slots["item-suffix"]||N!=null&&N.description?(T(),R("div",s0e,[qe(E.$slots,"item-suffix",xt({ref_for:!0},{active:V,selected:O,option:N}),()=>[N!=null&&N.description?(T(),R("div",i0e,$(N.description),1)):se("",!0)])])):se("",!0)],2)]),_:2},1032,["value","disabled"]))),128))])),[[lt,z.items.length>0]])),128)),l.value.length==0?(T(),R("li",a0e," No results found ")):se("",!0)]),_:3},8,["class"]),E.$slots.footer||r.showFooter||t.multiple?(T(),R("div",o0e,[qe(E.$slots,"footer",Pn(or({togglePopover:L})),()=>[t.multiple?(T(),R("div",l0e,[_.value?se("",!0):(T(),he(v(J),{key:0,label:"Select All",onClick:ut(k,["stop"])})),_.value?(T(),he(v(J),{key:1,label:"Clear All",onClick:ut(w,["stop"])})):se("",!0)])):(T(),R("div",u0e,[b(v(J),{label:"Clear",onClick:ut(w,["stop"])})]))])])):se("",!0)],2)],512),[[lt,F]])]),_:2},1032,["show","placement"])]),_:3},8,["modelValue","multiple","by"]))}}),d0e={class:"lucide lucide-check",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function c0e(t,e){return T(),R("svg",d0e,[...e[0]||(e[0]=[u("path",{d:"M20 6 9 17l-5-5"},null,-1)])])}const f0e=zt({name:"lucide-check",render:c0e}),p0e={class:"lucide lucide-chevron-down",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function h0e(t,e){return T(),R("svg",p0e,[...e[0]||(e[0]=[u("path",{d:"m6 9 6 6 6-6"},null,-1)])])}zt({name:"lucide-chevron-down",render:h0e});const m0e=["src","alt"],g0e=Je({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(t){const e=Q(!1),n=t,r=Z(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[n.size]})[n.shape]),s=Z(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[n.size]),i=Z(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[n.size]]),a=Z(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[n.size]),o=Z(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[n.size]),l=Z(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[n.size]);function d(c){c.type&&(e.value=!0)}return(c,f)=>(T(),R("div",{class:pe(["relative inline-block shrink-0",[s.value,r.value]])},[t.image&&!e.value?(T(),R("img",{key:0,src:t.image,alt:t.label,class:pe([r.value,"h-full w-full object-cover"]),onError:f[0]||(f[0]=p=>d(p))},null,42,m0e)):(T(),R("div",{key:1,class:pe(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[i.value,r.value]])},[c.$slots.default?(T(),R("div",{key:0,class:pe(l.value)},[qe(c.$slots,"default")],2)):(T(),R(xe,{key:1},[W($(t.label&&t.label[0]),1)],64))],2)),c.$slots.indicator?(T(),R("div",{key:2,class:pe(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",a.value])},[u("div",{class:pe(o.value)},[qe(c.$slots,"indicator")],2)],2)):se("",!0)],2))}}),De=Je({__name:"Badge",props:{theme:{default:"gray"},size:{default:"md"},variant:{default:"subtle"},label:{}},setup(t){const e=t,n=Z(()=>{let r={gray:"text-ink-white bg-surface-gray-7",blue:"text-ink-blue-1 bg-surface-blue-2",green:"text-ink-green-1 bg-surface-green-3",orange:"text-ink-amber-1 bg-surface-amber-2",red:"text-ink-red-1 bg-surface-red-4"}[e.theme],s={gray:"text-ink-gray-6 bg-surface-gray-2",blue:"text-ink-blue-2 bg-surface-blue-1",green:"text-ink-green-3 bg-surface-green-2",orange:"text-ink-amber-3 bg-surface-amber-1",red:"text-ink-red-4 bg-surface-red-1"}[e.theme],i={gray:"text-ink-gray-6 bg-transparent border border-outline-gray-1",blue:"text-ink-blue-2 bg-transparent border border-outline-blue-1",green:"text-ink-green-3 bg-transparent border border-outline-green-2",orange:"text-ink-amber-3 bg-transparent border border-outline-amber-2",red:"text-ink-red-4 bg-transparent border border-outline-red-2"}[e.theme],a={gray:"text-ink-gray-6 bg-transparent",blue:"text-ink-blue-2 bg-transparent",green:"text-ink-green-3 bg-transparent",orange:"text-ink-amber-3 bg-transparent",red:"text-ink-red-4 bg-transparent"}[e.theme],o={subtle:s,solid:r,outline:i,ghost:a}[e.variant],l={sm:"h-4 text-xs px-1.5",md:"h-5 text-xs px-1.5",lg:"h-6 text-sm px-2"}[e.size];return[o,l]});return(r,s)=>(T(),R("div",{class:pe(["inline-flex select-none items-center gap-1 rounded-full whitespace-nowrap",n.value])},[r.$slots.prefix?(T(),R("div",{key:0,class:pe([e.size=="lg"?"max-h-6":"max-h-4"])},[qe(r.$slots,"prefix")],2)):se("",!0),qe(r.$slots,"default",{},()=>{var i;return[W($((i=e.label)==null?void 0:i.toString()),1)]}),r.$slots.suffix?(T(),R("div",{key:1,class:pe([e.size=="lg"?"max-h-6":"max-h-4"])},[qe(r.$slots,"suffix")],2)):se("",!0)],2))}});let v0e=0;function y0e(){return++v0e}function AR(){return"frappe-ui-"+y0e()}const b0e={class:"flex flex-col gap-1"},x0e={class:"flex items-center"},_0e=["for"],w0e={key:0,class:"max-w-xs text-p-sm text-ink-gray-7"},E8="mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6",D8=Je({__name:"Switch",props:Y5({size:{default:"sm"},label:{default:""},description:{default:""},disabled:{type:Boolean,default:!1},icon:{},labelClasses:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:Y5(["change"],["update:modelValue"]),setup(t,{emit:e}){const n=t,r=DG(t,"modelValue"),s=e;et(r,c=>{s("change",c)});const i=AR(),a=Z(()=>["relative inline-flex flex-shrink-0 cursor-pointer rounded-full border-transparent transition-colors duration-100 ease-in-out items-center","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3","disabled:cursor-not-allowed disabled:bg-surface-gray-3",r.value?"bg-surface-gray-7 enabled:hover:bg-surface-gray-6 active:bg-surface-gray-5 group-hover:enabled:bg-surface-gray-6":"bg-surface-gray-4 enabled:hover:bg-gray-400 active:bg-gray-500 group-hover:enabled:bg-gray-400",n.size==="md"?"h-5 w-8 border-[3px]":"h-4 w-[26px] border-2"]),o=Z(()=>["pointer-events-none inline-block transform rounded-full bg-surface-white shadow ring-0 transition duration-100 ease-in-out",n.size==="md"?"h-3.5 w-3.5":"h-3 w-3",n.size==="md"?r.value?"translate-x-3 rtl:-translate-x-3":"translate-x-0":r.value?"translate-x-2.5 rtl:-translate-x-2.5":"translate-x-0"]),l=Z(()=>["font-medium leading-normal",n.disabled&&!n.description?"text-ink-gray-4":"text-ink-gray-8",n.size==="md"?"text-lg":"text-base",n.labelClasses]),d=Z(()=>{if(!n.label)return;const c=["flex justify-between"];return n.description?(c.push("items-start"),c.push(n.size==="md"?"px-3 space-x-3.5":"px-2.5 space-x-2.5")):(c.push("group items-center space-x-3 cursor-pointer rounded focus-visible:bg-surface-gray-2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3"),c.push(n.disabled?"cursor-not-allowed":"hover:bg-surface-gray-3 active:bg-surface-gray-4"),c.push(n.size==="md"?"px-3 py-1.5":"px-2.5 py-1.5")),c});return(c,f)=>(T(),R("div",{class:pe(d.value)},[u("div",b0e,[u("div",x0e,[n.icon&&typeof n.icon=="string"?(T(),he(yi,{key:0,name:n.icon,class:pe(E8),"aria-hidden":"true"},null,8,["name"])):n.icon?(T(),he(At(n.icon),{key:1,class:pe(E8)})):se("",!0),u("label",{class:pe(l.value),for:v(i)},$(n.label),11,_0e)]),n.description?(T(),R("span",w0e,$(n.description),1)):se("",!0)]),b(v(bye),{id:v(i),modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=p=>r.value=p),onKeyup:f[1]||(f[1]=Ru(ut(p=>r.value=!r.value,["self"]),["space"])),class:pe(a.value),disabled:n.disabled},{default:D(()=>[b(v(_ye),{class:pe(o.value)},null,8,["class"])]),_:1},8,["id","modelValue","class","disabled"])],2))}}),k0e=Je({inheritAttrs:!1,__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"},side:{default:"bottom"},offset:{default:4}},setup(t){const e=Q(!1);Q(!0);const n=_n(),r=ih(),s=t;function i(){e.value=!1}const a=(k,w)=>{k.route?n.push(k.route):k.onClick&&k.onClick(w)},o=k=>ze(ge({},k),{label:k.label,theme:k.theme||"gray",icon:k.icon,component:k.component,onClick:w=>a(k,w),submenu:k.submenu}),l=k=>k.theme==="red"?"text-ink-red-3":"text-ink-gray-6",d=k=>k.theme==="red"?"text-ink-red-3":"text-ink-gray-7",c=k=>k.theme==="red"?"focus:bg-surface-red-3 data-[highlighted]:bg-surface-red-3 data-[state=open]:bg-surface-red-3":"focus:bg-surface-gray-3 data-[highlighted]:bg-surface-gray-3 data-[state=open]:bg-surface-gray-3",f=k=>c(k)+" data-[state=open]:bg-surface-"+(k.theme==="red"?"red-3":"gray-3"),p=k=>{let w=[],S=null,C=0;for(let A of k)if(A!=null){if("group"in A){S&&(w.push(S),S=null);let M=ze(ge({key:C},A),{items:m(A.items)});w.push(M)}else S||(S={key:C,group:"",hideLabel:!0,items:[]}),S.items.push(...m([A]));C++}return S&&w.push(S),w},h=k=>p(k),m=k=>(k||[]).filter(Boolean).filter(w=>w.condition?w.condition():!0).map(w=>o(w)),g=k=>k.items.some(w=>w.icon),y={dropdownContent:"min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none dropdown-content",groupContainer:"p-1.5",groupLabel:"flex h-7 items-center px-2 text-sm font-medium",itemLabel:"whitespace-nowrap",itemIcon:"mr-2 h-4 w-4 flex-shrink-0",itemIconPlaceholder:"mr-2 h-4 w-4 flex-shrink-0",chevronIcon:"ml-auto h-4 w-4 flex-shrink-0",itemButton:"group flex h-7 w-full items-center rounded px-2 text-base focus:outline-none",submenuTrigger:"group flex h-7 w-full items-center rounded px-2 text-base text-ink-gray-6 focus:outline-none"},x=Z(()=>p(s.options)),_=Z(()=>s.placement==="left"?"start":s.placement==="right"?"end":s.placement==="center"?"center":"start");return(k,w)=>(T(),he(v(nye),{open:e.value,"onUpdate:open":w[0]||(w[0]=S=>e.value=S)},{default:D(({open:S})=>[b(v(mye),{"as-child":""},{default:D(()=>[k.$slots.default?qe(k.$slots,"default",Pn(xt({key:0},ge({open:S,close:i},v(r)))),void 0,!0):(T(),he(v(J),xt({key:1,active:!1},ge(ge({},t.button),v(r))),{default:D(()=>{var C;return[W($(t.button?((C=t.button)==null?void 0:C.label)||null:"Options"),1)]}),_:1},16))]),_:2},1024),b(v($8),null,{default:D(()=>[b(v(sye),{class:pe([y.dropdownContent,{"origin-top-left":t.placement=="left","origin-top-right":t.placement=="right","origin-top":t.placement=="center"}]),side:t.side,align:_.value,"side-offset":t.offset},{default:D(()=>[(T(!0),R(xe,null,_e(x.value,C=>(T(),R(xe,{key:C.key},[C.items.length?(T(),R("div",{key:0,class:pe(y.groupContainer)},[C.group&&!C.hideLabel?(T(),he(v(T8),{key:0,class:pe([y.groupLabel,d(C)])},{default:D(()=>[W($(C.group),1)]),_:2},1032,["class"])):se("",!0),(T(!0),R(xe,null,_e(C.items,A=>(T(),R(xe,{key:A.label},[A.switch?(T(),R("div",{key:0,class:pe(y.itemButton)},[A.icon&&typeof A.icon=="string"?(T(),he(yi,{key:0,name:A.icon,class:pe([y.itemIcon,l(A)]),"aria-hidden":"true"},null,8,["name","class"])):A.icon?(T(),he(At(A.icon),{key:1,class:pe([y.itemIcon,l(A)])},null,8,["class"])):se("",!0),u("span",{class:pe([y.itemLabel,d(A)])},$(A.label),3),b(D8,{class:"ml-auto","label-classes":"font-normal cursor-pointer",onChange:M=>{var E;return(E=A.onClick)==null?void 0:E.call(A,M)},"model-value":A.switchValue||!1},null,8,["onChange","model-value"])],2)):(T(),he(v(A8),{key:1,"as-child":"",onSelect:A.onClick},{default:D(()=>[k.$slots.item?qe(k.$slots,"item",xt({key:0,ref_for:!0},{item:A,close:i}),void 0,!0):A.component?(T(),he(At(A.component),{key:1,active:!1})):A.submenu?(T(),he(v(uye),{key:2},{default:D(()=>[b(v(pye),{"as-child":""},{default:D(()=>[u("button",{class:pe([y.submenuTrigger,f(A)])},[A.icon&&typeof A.icon=="string"?(T(),he(yi,{key:0,name:A.icon,class:pe([y.itemIcon,l(A)]),"aria-hidden":"true"},null,8,["name","class"])):A.icon?(T(),he(At(A.icon),{key:1,class:pe([y.itemIcon,l(A)])},null,8,["class"])):g(C)?(T(),R("div",{key:2,class:pe(y.itemIconPlaceholder)},null,2)):se("",!0),u("span",{class:pe([y.itemLabel,d(A)])},$(A.label),3),b(yi,{name:"chevron-right",class:pe([y.chevronIcon,l(A)]),"aria-hidden":"true"},null,8,["class"])],2)]),_:2},1024),b(v($8),null,{default:D(()=>[b(v(cye),{class:pe(y.dropdownContent),"side-offset":4},{default:D(()=>[(T(!0),R(xe,null,_e(h(A.submenu),M=>(T(),R("div",{key:M.key,class:pe(y.groupContainer)},[M.group&&!M.hideLabel?(T(),he(v(T8),{key:0,class:pe(y.groupLabel)},{default:D(()=>[W($(M.group),1)]),_:2},1032,["class"])):se("",!0),(T(!0),R(xe,null,_e(M.items,E=>(T(),R(xe,{key:E.label},[E.switch?(T(),R("div",{key:0,class:pe(y.itemButton)},[E.icon&&typeof E.icon=="string"?(T(),he(yi,{key:0,name:E.icon,class:pe([y.itemIcon,l(E)]),"aria-hidden":"true"},null,8,["name","class"])):E.icon?(T(),he(At(E.icon),{key:1,class:pe([y.itemIcon,l(E)])},null,8,["class"])):se("",!0),u("span",{class:pe([y.itemLabel,d(E)])},$(E.label),3),b(D8,{class:"ml-auto","label-classes":"font-normal cursor-pointer",onChange:P=>{var I;return(I=E.onClick)==null?void 0:I.call(E,P)},"model-value":E.switchValue||!1},null,8,["onChange","model-value"])],2)):(T(),he(v(A8),{key:1,"as-child":"",onSelect:P=>a(E,P)},{default:D(()=>[E.component?(T(),he(At(E.component),{key:0,active:!1})):(T(),R("button",{key:1,class:pe([y.itemButton,c(E)])},[E.icon&&typeof E.icon=="string"?(T(),he(yi,{key:0,name:E.icon,class:pe([y.itemIcon,l(E)]),"aria-hidden":"true"},null,8,["name","class"])):E.icon?(T(),he(At(E.icon),{key:1,class:pe([y.itemIcon,l(E)])},null,8,["class"])):g(M)?(T(),R("div",{key:2,class:pe(y.itemIconPlaceholder)},null,2)):se("",!0),u("span",{class:pe([y.itemLabel,d(E)])},$(E.label),3)],2))]),_:2},1032,["onSelect"]))],64))),128))],2))),128))]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024)):(T(),R("button",{key:3,class:pe([y.itemButton,c(A)])},[A.icon&&typeof A.icon=="string"?(T(),he(yi,{key:0,name:A.icon,class:pe([y.itemIcon,l(A)]),"aria-hidden":"true"},null,8,["name","class"])):A.icon?(T(),he(At(A.icon),{key:1,class:pe([y.itemIcon,l(A)])},null,8,["class"])):g(C)?(T(),R("div",{key:2,class:pe(y.itemIconPlaceholder)},null,2)):se("",!0),u("span",{class:pe([y.itemLabel,d(A)])},$(A.label),3)],2))]),_:2},1032,["onSelect"]))],64))),128))],2)):se("",!0)],64))),128))]),_:3},8,["class","side","align","side-offset"])]),_:3})]),_:3},8,["open"]))}}),It=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},H0=It(k0e,[["__scopeId","data-v-37606d02"]]);function NK(t){return K1()?(X1(t),!0):!1}function a4(){const t=new Set,e=s=>{t.delete(s)};return{on:s=>{t.add(s);const i=()=>e(s);return NK(i),{off:i}},off:e,trigger:(...s)=>Promise.all(Array.from(t).map(i=>i(...s)))}}function za(t){return typeof t=="function"?t():v(t)}const jK=typeof window!="undefined"&&typeof document!="undefined";typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;const x$=()=>{};function S0e(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}function C0e(t,e={}){let n,r,s=x$;const i=o=>{clearTimeout(o),s(),s=x$};return o=>{const l=za(t),d=za(e.maxWait);return n&&i(n),l<=0||d!==void 0&&d<=0?(r&&(i(r),r=null),Promise.resolve(o())):new Promise((c,f)=>{s=e.rejectOnCancel?f:c,d&&!r&&(r=setTimeout(()=>{n&&i(n),r=null,c(o())},d)),n=setTimeout(()=>{r&&i(r),r=null,c(o())},l)})}}function R8(t,e=!1,n="Timeout"){return new Promise((r,s)=>{setTimeout(e?()=>s(n):r,t)})}function A0e(t,...e){return e.some(n=>n in t)}function o4(...t){if(t.length!==1)return n2(...t);const e=t[0];return typeof e=="function"?Ka(VS(()=>({get:e,set:x$}))):Q(e)}function T0e(t,e=200,n={}){return S0e(C0e(e,n),t)}function _$(t,e=!1){function n(f,{flush:p="sync",deep:h=!1,timeout:m,throwOnTimeout:g}={}){let y=null;const _=[new Promise(k=>{y=et(t,w=>{f(w)!==e&&(y==null||y(),k(w))},{flush:p,deep:h,immediate:!0})})];return m!=null&&_.push(R8(m,g).then(()=>za(t)).finally(()=>y==null?void 0:y())),Promise.race(_)}function r(f,p){if(!zn(f))return n(w=>w===f,p);const{flush:h="sync",deep:m=!1,timeout:g,throwOnTimeout:y}=p!=null?p:{};let x=null;const k=[new Promise(w=>{x=et([t,f],([S,C])=>{e!==(S===C)&&(x==null||x(),w(S))},{flush:h,deep:m,immediate:!0})})];return g!=null&&k.push(R8(g,y).then(()=>za(t)).finally(()=>(x==null||x(),za(t)))),Promise.race(k)}function s(f){return n(p=>!!p,f)}function i(f){return r(null,f)}function a(f){return r(void 0,f)}function o(f){return n(Number.isNaN,f)}function l(f,p){return n(h=>{const m=Array.from(h);return m.includes(f)||m.includes(za(f))},p)}function d(f){return c(1,f)}function c(f=1,p){let h=-1;return n(()=>(h+=1,h>=f),p)}return Array.isArray(za(t))?{toMatch:n,toContains:l,changed:d,changedTimes:c,get not(){return _$(t,!e)}}:{toMatch:n,toBe:r,toBeTruthy:s,toBeNull:i,toBeNaN:o,toBeUndefined:a,changed:d,changedTimes:c,get not(){return _$(t,!e)}}}function $0e(t){return _$(t)}function M0e(t,e,n={}){const{immediate:r=!0}=n,s=Q(!1);let i=null;function a(){i&&(clearTimeout(i),i=null)}function o(){s.value=!1,a()}function l(...d){a(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,t(...d)},za(e))}return r&&(s.value=!0,jK&&l()),NK(o),{isPending:Ka(s),start:l,stop:o}}const E0e=jK?window:void 0,D0e={json:"application/json",text:"text/plain"};function v2(t){return t&&A0e(t,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}const R0e=/^(?:[a-z][a-z\d+\-.]*:)?\/\//i;function P0e(t){return R0e.test(t)}function Uy(t){return typeof Headers!="undefined"&&t instanceof Headers?Object.fromEntries(t.entries()):t}function Rh(t,...e){return t==="overwrite"?n=>ue(this,null,function*(){const r=e[e.length-1];return r?ge(ge({},n),yield r(n)):n}):n=>ue(this,null,function*(){for(const r of e)r&&(n=ge(ge({},n),yield r(n)));return n})}function I0e(t={}){const e=t.combination||"chain",n=t.options||{},r=t.fetchOptions||{};function s(i,...a){const o=Z(()=>{const c=za(t.baseUrl),f=za(i);return c&&!P0e(f)?L0e(c,f):f});let l=n,d=r;return a.length>0&&(v2(a[0])?l=ze(ge(ge({},l),a[0]),{beforeFetch:Rh(e,n.beforeFetch,a[0].beforeFetch),afterFetch:Rh(e,n.afterFetch,a[0].afterFetch),onFetchError:Rh(e,n.onFetchError,a[0].onFetchError)}):d=ze(ge(ge({},d),a[0]),{headers:ge(ge({},Uy(d.headers)||{}),Uy(a[0].headers)||{})})),a.length>1&&v2(a[1])&&(l=ze(ge(ge({},l),a[1]),{beforeFetch:Rh(e,n.beforeFetch,a[1].beforeFetch),afterFetch:Rh(e,n.afterFetch,a[1].afterFetch),onFetchError:Rh(e,n.onFetchError,a[1].onFetchError)})),O0e(o,d,l)}return s}function O0e(t,...e){var n;const r=typeof AbortController=="function";let s={},i={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const a={method:"GET",type:"text",payload:void 0};e.length>0&&(v2(e[0])?i=ge(ge({},i),e[0]):s=e[0]),e.length>1&&v2(e[1])&&(i=ge(ge({},i),e[1]));const{fetch:o=(n=E0e)==null?void 0:n.fetch,initialData:l,timeout:d}=i,c=a4(),f=a4(),p=a4(),h=Q(!1),m=Q(!1),g=Q(!1),y=Q(null),x=Mo(null),_=Mo(null),k=Mo(l||null),w=Z(()=>r&&m.value);let S,C;const A=()=>{r&&(S==null||S.abort(),S=new AbortController,S.signal.onabort=()=>g.value=!0,s=ze(ge({},s),{signal:S.signal}))},M=q=>{m.value=q,h.value=!q};d&&(C=M0e(A,d,{immediate:!1}));let E=0;const P=(q=!1)=>ue(this,null,function*(){var V,O;A(),M(!0),_.value=null,y.value=null,g.value=!1,E+=1;const X=E,j={method:a.method,headers:{}};if(a.payload){const ie=Uy(j.headers),ne=za(a.payload);!a.payloadType&&ne&&Object.getPrototypeOf(ne)===Object.prototype&&!(ne instanceof FormData)&&(a.payloadType="json"),a.payloadType&&(ie["Content-Type"]=(V=D0e[a.payloadType])!=null?V:a.payloadType),j.body=a.payloadType==="json"?JSON.stringify(ne):ne}let U=!1;const G={url:za(t),options:ge(ge({},j),s),cancel:()=>{U=!0}};if(i.beforeFetch&&Object.assign(G,yield i.beforeFetch(G)),U||!o)return M(!1),Promise.resolve(null);let ee=null;return C&&C.start(),o(G.url,ze(ge(ge({},j),G.options),{headers:ge(ge({},Uy(j.headers)),Uy((O=G.options)==null?void 0:O.headers))})).then(ie=>ue(this,null,function*(){if(x.value=ie,y.value=ie.status,ee=yield ie.clone()[a.type](),!ie.ok)throw k.value=l||null,new Error(ie.statusText);return i.afterFetch&&({data:ee}=yield i.afterFetch({data:ee,response:ie})),k.value=ee,c.trigger(ie),ie})).catch(ie=>ue(this,null,function*(){let ne=ie.message||ie.name;if(i.onFetchError&&({error:ne,data:ee}=yield i.onFetchError({data:ee,error:ie,response:x.value})),_.value=ne,i.updateDataOnError&&(k.value=ee),f.trigger(ie),q)throw ie;return null})).finally(()=>{X===E&&M(!1),C&&C.stop(),p.trigger(null)})}),I=o4(i.refetch);et([I,o4(t)],([q])=>q&&P(),{deep:!0});const F={isFinished:Ka(h),isFetching:Ka(m),statusCode:y,response:x,error:_,data:k,canAbort:w,aborted:g,abort:A,execute:P,onFetchResponse:c.on,onFetchError:f.on,onFetchFinally:p.on,get:L("GET"),put:L("PUT"),post:L("POST"),delete:L("DELETE"),patch:L("PATCH"),head:L("HEAD"),options:L("OPTIONS"),json:N("json"),text:N("text"),blob:N("blob"),arrayBuffer:N("arrayBuffer"),formData:N("formData")};function L(q){return(V,O)=>{if(!m.value)return a.method=q,a.payload=V,a.payloadType=O,zn(a.payload)&&et([I,o4(a.payload)],([X])=>X&&P(),{deep:!0}),ze(ge({},F),{then(X,j){return z().then(X,j)}})}}function z(){return new Promise((q,V)=>{$0e(h).toBe(!0).then(()=>q(F)).catch(O=>V(O))})}function N(q){return()=>{if(!m.value)return a.type=q,ze(ge({},F),{then(V,O){return z().then(V,O)}})}}return i.immediate&&Promise.resolve().then(()=>P()),ze(ge({},F),{then(q,V){return z().then(q,V)}})}function L0e(t,e){return!t.endsWith("/")&&!e.startsWith("/")?`${t}/${e}`:`${t}${e}`}const V0e={class:"lucide lucide-ellipsis",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function N0e(t,e){return T(),R("svg",V0e,[...e[0]||(e[0]=[u("circle",{cx:"12",cy:"12",r:"1"},null,-1),u("circle",{cx:"19",cy:"12",r:"1"},null,-1),u("circle",{cx:"5",cy:"12",r:"1"},null,-1)])])}zt({name:"lucide-ellipsis",render:N0e});const j0e=["disabled","id"],F0e=["for"],St=Je({__name:"Checkbox",props:{size:{default:"sm"},label:{},disabled:{type:Boolean},padding:{type:Boolean,default:!1},modelValue:{type:[Boolean,Number]},id:{}},setup(t){var a;const e=t,n=ih(),r=(a=e.id)!=null?a:AR(),s=Z(()=>[{sm:"text-base font-medium",md:"text-lg font-medium"}[e.size],e.disabled?"text-ink-gray-4":"text-ink-gray-8","select-none"]),i=Z(()=>{let o=e.disabled?"border-outline-gray-2 bg-surface-menu-bar text-ink-gray-3":"border-outline-gray-4 text-ink-gray-9 hover:border-outline-gray-5 focus:ring-offset-0 focus:border-outline-gray-8 active:border-outline-gray-6 transition",l=e.disabled?"":e.padding?"focus:ring-0":"hover:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 active:bg-surface-gray-2",d={sm:"w-3.5 h-3.5",md:"w-4 h-4"}[e.size];return[o,l,d]});return(o,l)=>(T(),R("div",{class:pe(["inline-flex space-x-2 rounded transition",{"px-2.5 py-1.5":t.padding&&t.size==="sm","px-3 py-2":t.padding&&t.size==="md","focus-within:bg-surface-gray-2 focus-within:ring-2 focus-within:ring-outline-gray-3 hover:bg-surface-gray-3 active:bg-surface-gray-4":t.padding&&!t.disabled}])},[u("input",xt({class:["rounded-sm mt-[1px] bg-surface-white",i.value],type:"checkbox",disabled:t.disabled,id:v(r),onChange:l[0]||(l[0]=d=>o.$emit("update:modelValue",d.target.checked))},v(n)),null,16,j0e),t.label?(T(),R("label",{key:0,class:pe(["block",s.value]),for:v(r)},$(t.label),11,F0e)):se("",!0)],2))}});function oC(t,e,n){var r;return function(){var s=this,i=arguments,a=function(){r=void 0,t.apply(s,i)};clearTimeout(r),r=window.setTimeout(a,e)}}const B0e=["type","placeholder","disabled","id","value","required"],TR=Je({inheritAttrs:!1,__name:"TextInput",props:{type:{default:"text"},size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},debounce:{},required:{type:Boolean}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,s=n,i=eb(),a=ih(),o=Z(()=>Object.fromEntries(Object.entries(a).filter(([g])=>g!=="class"&&g!=="style"))),l=Q(null);e({el:l});const d=Z(()=>r.disabled?"text-ink-gray-5":"text-ink-gray-8"),c=Z(()=>{let g={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[r.size],y={sm:["py-1.5",i.prefix?"pl-8":"pl-2",i.suffix?"pr-8":"pr-2"],md:["py-1.5",i.prefix?"pl-9":"pl-2.5",i.suffix?"pr-9":"pr-2.5"],lg:["py-1.5",i.prefix?"pl-10":"pl-3",i.suffix?"pr-10":"pr-3"],xl:["py-1.5",i.prefix?"pl-10":"pl-3",i.suffix?"pr-10":"pr-3"]}[r.size],x=r.disabled?"disabled":r.variant,_={subtle:"border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",outline:"border border-outline-gray-2 bg-surface-white placeholder-ink-gray-4 hover:border-outline-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",disabled:["border bg-surface-gray-1 placeholder-ink-gray-3",r.variant==="outline"?"border-outline-gray-2":"border-transparent"],ghost:"border-0 focus:ring-0 focus-visible:ring-0"}[x];return[g,y,_,d.value,"transition-colors w-full dark:[color-scheme:dark]"]});let f=Z(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[r.size]),p=Z(()=>({sm:"pr-2",md:"pr-2.5",lg:"pr-3",xl:"pr-3"})[r.size]),h=g=>{s("update:modelValue",g)};r.debounce&&(h=oC(h,r.debounce));let m=g=>{h(g.target.value)};return(g,y)=>(T(),R("div",{class:pe(["relative flex items-center",v(a).class]),style:rt(v(a).style)},[g.$slots.prefix?(T(),R("div",{key:0,class:pe(["absolute inset-y-0 left-0 flex items-center",d.value,v(f)])},[qe(g.$slots,"prefix")],2)):se("",!0),u("input",xt({ref_key:"inputRef",ref:l,type:t.type,placeholder:t.placeholder,class:c.value,disabled:t.disabled,id:t.id,value:t.modelValue,required:t.required,onInput:y[0]||(y[0]=(...x)=>v(m)&&v(m)(...x)),onChange:y[1]||(y[1]=(...x)=>v(m)&&v(m)(...x))},o.value),null,16,B0e),g.$slots.suffix?(T(),R("div",{key:1,class:pe(["absolute inset-y-0 right-0 flex items-center",d.value,v(p)])},[qe(g.$slots,"suffix")],2)):se("",!0)],6))}});var FK=60,BK=FK*60,zK=BK*24,z0e=zK*7,nd=1e3,gp=FK*nd,q0=BK*nd,W0=zK*nd,UK=z0e*nd,lC="millisecond",ep="second",_l="minute",tp="hour",Au="day",cw="week",La="month",HK="quarter",Tu="year",Sm="date",$R="YYYY-MM-DDTHH:mm:ssZ",P8="Invalid Date",U0e=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,qK=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;const H0e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var n=["th","st","nd","rd"],r=e%100;return"["+e+(n[(r-20)%10]||n[r]||n[0])+"]"}};var w$=function(e,n,r){var s=String(e);return!s||s.length>=n?e:""+Array(n+1-s.length).join(r)+e},q0e=function(e){var n=-e.utcOffset(),r=Math.abs(n),s=Math.floor(r/60),i=r%60;return(n<=0?"+":"-")+w$(s,2,"0")+":"+w$(i,2,"0")},W0e=function t(e,n){if(e.date()<n.date())return-t(n,e);var r=(n.year()-e.year())*12+(n.month()-e.month()),s=e.clone().add(r,La),i=n-s<0,a=e.clone().add(r+(i?-1:1),La);return+(-(r+(n-s)/(i?s-a:a-s))||0)},G0e=function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},Y0e=function(e){var n={M:La,y:Tu,w:cw,d:Au,D:Sm,h:tp,m:_l,s:ep,ms:lC,Q:HK};return n[e]||String(e||"").toLowerCase().replace(/s$/,"")},K0e=function(e){return e===void 0};const X0e={s:w$,z:q0e,m:W0e,a:G0e,p:Y0e,u:K0e};var Hy="en",vp={};vp[Hy]=H0e;var WK="$isDayjsObject",MR=function(e){return e instanceof uC||!!(e&&e[WK])},y2=function t(e,n,r){var s;if(!e)return Hy;if(typeof e=="string"){var i=e.toLowerCase();vp[i]&&(s=i),n&&(vp[i]=n,s=i);var a=e.split("-");if(!s&&a.length>1)return t(a[0])}else{var o=e.name;vp[o]=e,s=o}return!r&&s&&(Hy=s),s||!r&&Hy},cr=function(e,n){if(MR(e))return e.clone();var r=typeof n=="object"?n:{};return r.date=e,r.args=arguments,new uC(r)},Q0e=function(e,n){return cr(e,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})},er=X0e;er.l=y2;er.i=MR;er.w=Q0e;var Z0e=function(e){var n=e.date,r=e.utc;if(n===null)return new Date(NaN);if(er.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var s=n.match(U0e);if(s){var i=s[2]-1||0,a=(s[7]||"0").substring(0,3);return r?new Date(Date.UTC(s[1],i,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)):new Date(s[1],i,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)}}return new Date(n)},uC=function(){function t(n){this.$L=y2(n.locale,null,!0),this.parse(n),this.$x=this.$x||n.x||{},this[WK]=!0}var e=t.prototype;return e.parse=function(r){this.$d=Z0e(r),this.init()},e.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},e.$utils=function(){return er},e.isValid=function(){return this.$d.toString()!==P8},e.isSame=function(r,s){var i=cr(r);return this.startOf(s)<=i&&i<=this.endOf(s)},e.isAfter=function(r,s){return cr(r)<this.startOf(s)},e.isBefore=function(r,s){return this.endOf(s)<cr(r)},e.$g=function(r,s,i){return er.u(r)?this[s]:this.set(i,r)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(r,s){var i=this,a=er.u(s)?!0:s,o=er.p(r),l=function(x,_){var k=er.w(i.$u?Date.UTC(i.$y,_,x):new Date(i.$y,_,x),i);return a?k:k.endOf(Au)},d=function(x,_){var k=[0,0,0,0],w=[23,59,59,999];return er.w(i.toDate()[x].apply(i.toDate("s"),(a?k:w).slice(_)),i)},c=this.$W,f=this.$M,p=this.$D,h="set"+(this.$u?"UTC":"");switch(o){case Tu:return a?l(1,0):l(31,11);case La:return a?l(1,f):l(0,f+1);case cw:{var m=this.$locale().weekStart||0,g=(c<m?c+7:c)-m;return l(a?p-g:p+(6-g),f)}case Au:case Sm:return d(h+"Hours",0);case tp:return d(h+"Minutes",1);case _l:return d(h+"Seconds",2);case ep:return d(h+"Milliseconds",3);default:return this.clone()}},e.endOf=function(r){return this.startOf(r,!1)},e.$set=function(r,s){var i,a=er.p(r),o="set"+(this.$u?"UTC":""),l=(i={},i[Au]=o+"Date",i[Sm]=o+"Date",i[La]=o+"Month",i[Tu]=o+"FullYear",i[tp]=o+"Hours",i[_l]=o+"Minutes",i[ep]=o+"Seconds",i[lC]=o+"Milliseconds",i)[a],d=a===Au?this.$D+(s-this.$W):s;if(a===La||a===Tu){var c=this.clone().set(Sm,1);c.$d[l](d),c.init(),this.$d=c.set(Sm,Math.min(this.$D,c.daysInMonth())).$d}else l&&this.$d[l](d);return this.init(),this},e.set=function(r,s){return this.clone().$set(r,s)},e.get=function(r){return this[er.p(r)]()},e.add=function(r,s){var i=this,a;r=Number(r);var o=er.p(s),l=function(p){var h=cr(i);return er.w(h.date(h.date()+Math.round(p*r)),i)};if(o===La)return this.set(La,this.$M+r);if(o===Tu)return this.set(Tu,this.$y+r);if(o===Au)return l(1);if(o===cw)return l(7);var d=(a={},a[_l]=gp,a[tp]=q0,a[ep]=nd,a)[o]||1,c=this.$d.getTime()+r*d;return er.w(c,this)},e.subtract=function(r,s){return this.add(r*-1,s)},e.format=function(r){var s=this,i=this.$locale();if(!this.isValid())return i.invalidDate||P8;var a=r||$R,o=er.z(this),l=this.$H,d=this.$m,c=this.$M,f=i.weekdays,p=i.months,h=i.meridiem,m=function(k,w,S,C){return k&&(k[w]||k(s,a))||S[w].slice(0,C)},g=function(k){return er.s(l%12||12,k,"0")},y=h||function(_,k,w){var S=_<12?"AM":"PM";return w?S.toLowerCase():S},x=function(k){switch(k){case"YY":return String(s.$y).slice(-2);case"YYYY":return er.s(s.$y,4,"0");case"M":return c+1;case"MM":return er.s(c+1,2,"0");case"MMM":return m(i.monthsShort,c,p,3);case"MMMM":return m(p,c);case"D":return s.$D;case"DD":return er.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return m(i.weekdaysMin,s.$W,f,2);case"ddd":return m(i.weekdaysShort,s.$W,f,3);case"dddd":return f[s.$W];case"H":return String(l);case"HH":return er.s(l,2,"0");case"h":return g(1);case"hh":return g(2);case"a":return y(l,d,!0);case"A":return y(l,d,!1);case"m":return String(d);case"mm":return er.s(d,2,"0");case"s":return String(s.$s);case"ss":return er.s(s.$s,2,"0");case"SSS":return er.s(s.$ms,3,"0");case"Z":return o}return null};return a.replace(qK,function(_,k){return k||x(_)||o.replace(":","")})},e.utcOffset=function(){return-Math.round(this.$d.getTimezoneOffset()/15)*15},e.diff=function(r,s,i){var a=this,o=er.p(s),l=cr(r),d=(l.utcOffset()-this.utcOffset())*gp,c=this-l,f=function(){return er.m(a,l)},p;switch(o){case Tu:p=f()/12;break;case La:p=f();break;case HK:p=f()/3;break;case cw:p=(c-d)/UK;break;case Au:p=(c-d)/W0;break;case tp:p=c/q0;break;case _l:p=c/gp;break;case ep:p=c/nd;break;default:p=c;break}return i?p:er.a(p)},e.daysInMonth=function(){return this.endOf(La).$D},e.$locale=function(){return vp[this.$L]},e.locale=function(r,s){if(!r)return this.$L;var i=this.clone(),a=y2(r,s,!0);return a&&(i.$L=a),i},e.clone=function(){return er.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}(),GK=uC.prototype;cr.prototype=GK;[["$ms",lC],["$s",ep],["$m",_l],["$H",tp],["$W",Au],["$M",La],["$y",Tu],["$D",Sm]].forEach(function(t){GK[t[1]]=function(e){return this.$g(e,t[0],t[1])}});cr.extend=function(t,e){return t.$i||(t(e,uC,cr),t.$i=!0),cr};cr.locale=y2;cr.isDayjs=MR;cr.unix=function(t){return cr(t*1e3)};cr.en=vp[Hy];cr.Ls=vp;cr.p={};const J0e=function(t,e,n){t=t||{};var r=e.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};n.en.relativeTime=s,r.fromToBase=function(o,l,d,c,f){for(var p=d.$locale().relativeTime||s,h=t.thresholds||[{l:"s",r:44,d:ep},{l:"m",r:89},{l:"mm",r:44,d:_l},{l:"h",r:89},{l:"hh",r:21,d:tp},{l:"d",r:35},{l:"dd",r:25,d:Au},{l:"M",r:45},{l:"MM",r:10,d:La},{l:"y",r:17},{l:"yy",d:Tu}],m=h.length,g,y,x,_=0;_<m;_+=1){var k=h[_];k.d&&(g=c?n(o).diff(d,k.d,!0):d.diff(o,k.d,!0));var w=(t.rounding||Math.round)(Math.abs(g));if(x=g>0,w<=k.r||!k.r){w<=1&&_>0&&(k=h[_-1]);var S=p[k.l];f&&(w=f(""+w)),typeof S=="string"?y=S.replace("%d",w):y=S(w,l,k.l,x);break}}if(l)return y;var C=x?p.future:p.past;return typeof C=="function"?C(y):C.replace("%s",y)};function i(o,l,d,c){return r.fromToBase(o,l,d,c)}r.to=function(o,l){return i(o,l,this,!0)},r.from=function(o,l){return i(o,l,this)};var a=function(l){return l.$u?n.utc():n()};r.toNow=function(o){return this.to(a(this),o)},r.fromNow=function(o){return this.from(a(this),o)}};var e1e=function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(n,r,s){return r||s.slice(1)})},YK={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},KK=function(e,n){return e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(r,s,i){var a=i&&i.toUpperCase();return s||n[i]||YK[i]||e1e(n[a])})};const t1e=function(t,e,n){var r=e.prototype,s=r.format;n.en.formats=YK,r.format=function(i){i===void 0&&(i=$R);var a=this.$locale(),o=a.formats,l=o===void 0?{}:o,d=KK(i,l);return s.call(this,d)}},n1e=function(t,e,n){n.updateLocale=function(r,s){var i=n.Ls,a=i[r];if(a){var o=s?Object.keys(s):[];return o.forEach(function(l){a[l]=s[l]}),a}}},r1e=function(t,e,n){var r=e.prototype;r.isToday=function(){var s="YYYY-MM-DD",i=n();return this.format(s)===i.format(s)}};var b2=W0*365,k$=b2/12,s1e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,uv={years:b2,months:k$,days:W0,hours:q0,minutes:gp,seconds:nd,milliseconds:1,weeks:UK},fw=function(e){return e instanceof ZK},XK,dl,ly=function(e,n,r){return new ZK(e,r,n.$l)},dv=function(e){return dl.p(e)+"s"},QK=function(e){return e<0},sf=function(e){return QK(e)?Math.ceil(e):Math.floor(e)},i1e=function(e){return Math.abs(e)},Ph=function(e,n){return e?QK(e)?{negative:!0,format:""+i1e(e)+n}:{negative:!1,format:""+e+n}:{negative:!1,format:""}},ZK=function(){function t(n,r,s){var i=this;if(this.$d={},this.$l=s,n===void 0&&(this.$ms=0,this.parseFromMilliseconds()),r)return ly(n*uv[dv(r)],this);if(typeof n=="number")return this.$ms=n,this.parseFromMilliseconds(),this;if(typeof n=="object")return Object.keys(n).forEach(function(d){i.$d[dv(d)]=n[d]}),this.calMilliseconds(),this;if(typeof n=="string"){var a=n.match(s1e);if(a){var o=a.slice(2),l=o.map(function(d){return d!=null?Number(d):0});return this.$d.years=l[0],this.$d.months=l[1],this.$d.weeks=l[2],this.$d.days=l[3],this.$d.hours=l[4],this.$d.minutes=l[5],this.$d.seconds=l[6],this.calMilliseconds(),this}}return this}var e=t.prototype;return e.calMilliseconds=function(){var r=this;this.$ms=Object.keys(this.$d).reduce(function(s,i){return s+(r.$d[i]||0)*uv[i]},0)},e.parseFromMilliseconds=function(){var r=this.$ms;this.$d.years=sf(r/b2),r%=b2,this.$d.months=sf(r/k$),r%=k$,this.$d.days=sf(r/W0),r%=W0,this.$d.hours=sf(r/q0),r%=q0,this.$d.minutes=sf(r/gp),r%=gp,this.$d.seconds=sf(r/nd),r%=nd,this.$d.milliseconds=r},e.toISOString=function(){var r=Ph(this.$d.years,"Y"),s=Ph(this.$d.months,"M"),i=+this.$d.days||0;this.$d.weeks&&(i+=this.$d.weeks*7);var a=Ph(i,"D"),o=Ph(this.$d.hours,"H"),l=Ph(this.$d.minutes,"M"),d=this.$d.seconds||0;this.$d.milliseconds&&(d+=this.$d.milliseconds/1e3,d=Math.round(d*1e3)/1e3);var c=Ph(d,"S"),f=r.negative||s.negative||a.negative||o.negative||l.negative||c.negative,p=o.format||l.format||c.format?"T":"",h=f?"-":"",m=h+"P"+r.format+s.format+a.format+p+o.format+l.format+c.format;return m==="P"||m==="-P"?"P0D":m},e.toJSON=function(){return this.toISOString()},e.format=function(r){var s=r||"YYYY-MM-DDTHH:mm:ss",i={Y:this.$d.years,YY:dl.s(this.$d.years,2,"0"),YYYY:dl.s(this.$d.years,4,"0"),M:this.$d.months,MM:dl.s(this.$d.months,2,"0"),D:this.$d.days,DD:dl.s(this.$d.days,2,"0"),H:this.$d.hours,HH:dl.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:dl.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:dl.s(this.$d.seconds,2,"0"),SSS:dl.s(this.$d.milliseconds,3,"0")};return s.replace(qK,function(a,o){return o||String(i[a])})},e.as=function(r){return this.$ms/uv[dv(r)]},e.get=function(r){var s=this.$ms,i=dv(r);return i==="milliseconds"?s%=1e3:i==="weeks"?s=sf(s/uv[i]):s=this.$d[i],s||0},e.add=function(r,s,i){var a;return s?a=r*uv[dv(s)]:fw(r)?a=r.$ms:a=ly(r,this).$ms,ly(this.$ms+a*(i?-1:1),this)},e.subtract=function(r,s){return this.add(r,s,!0)},e.locale=function(r){var s=this.clone();return s.$l=r,s},e.clone=function(){return ly(this.$ms,this)},e.humanize=function(r){return XK().add(this.$ms,"ms").locale(this.$l).fromNow(!r)},e.valueOf=function(){return this.asMilliseconds()},e.milliseconds=function(){return this.get("milliseconds")},e.asMilliseconds=function(){return this.as("milliseconds")},e.seconds=function(){return this.get("seconds")},e.asSeconds=function(){return this.as("seconds")},e.minutes=function(){return this.get("minutes")},e.asMinutes=function(){return this.as("minutes")},e.hours=function(){return this.get("hours")},e.asHours=function(){return this.as("hours")},e.days=function(){return this.get("days")},e.asDays=function(){return this.as("days")},e.weeks=function(){return this.get("weeks")},e.asWeeks=function(){return this.as("weeks")},e.months=function(){return this.get("months")},e.asMonths=function(){return this.as("months")},e.years=function(){return this.get("years")},e.asYears=function(){return this.as("years")},t}(),I8=function(e,n,r){return e.add(n.years()*r,"y").add(n.months()*r,"M").add(n.days()*r,"d").add(n.hours()*r,"h").add(n.minutes()*r,"m").add(n.seconds()*r,"s").add(n.milliseconds()*r,"ms")};const a1e=function(t,e,n){XK=n,dl=n().$utils(),n.duration=function(i,a){var o=n.locale();return ly(i,{$l:o},a)},n.isDuration=fw;var r=e.prototype.add,s=e.prototype.subtract;e.prototype.add=function(i,a){return fw(i)?I8(this,i,1):r.bind(this)(i,a)},e.prototype.subtract=function(i,a){return fw(i)?I8(this,i,-1):s.bind(this)(i,a)}};var o1e=/[+-]\d\d(?::?\d\d)?/g,l1e=/([+-]|\d\d)/g;function u1e(t){t===void 0&&(t="");var e=t.match(o1e);if(!e)return null;var n=(""+e[0]).match(l1e)||["-",0,0],r=n[0],s=n[1],i=n[2],a=+s*60+ +i;return a===0?0:r==="+"?a:-a}const d1e=function(t,e,n){var r=e.prototype;n.utc=function(f){var p={date:f,utc:!0,args:arguments};return new e(p)},r.utc=function(f){var p=n(this.toDate(),{locale:this.$L,utc:!0});return f?p.add(this.utcOffset(),_l):p},r.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var s=r.parse;r.parse=function(f){f.utc&&(this.$u=!0),this.$utils().u(f.$offset)||(this.$offset=f.$offset),s.call(this,f)};var i=r.init;r.init=function(){if(this.$u){var f=this.$d;this.$y=f.getUTCFullYear(),this.$M=f.getUTCMonth(),this.$D=f.getUTCDate(),this.$W=f.getUTCDay(),this.$H=f.getUTCHours(),this.$m=f.getUTCMinutes(),this.$s=f.getUTCSeconds(),this.$ms=f.getUTCMilliseconds()}else i.call(this)};var a=r.utcOffset;r.utcOffset=function(f,p){var h=this.$utils(),m=h.u;if(m(f))return this.$u?0:m(this.$offset)?a.call(this):this.$offset;if(typeof f=="string"&&(f=u1e(f),f===null))return this;var g=Math.abs(f)<=16?f*60:f;if(g===0)return this.utc(p);var y=this.clone();if(p)return y.$offset=g,y.$u=!1,y;var x=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return y=this.local().add(g+x,_l),y.$offset=g,y.$x.$localOffset=x,y};var o=r.format,l="YYYY-MM-DDTHH:mm:ss[Z]";r.format=function(f){var p=f||(this.$u?l:"");return o.call(this,p)},r.valueOf=function(){var f=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-f*gp},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var d=r.toDate;r.toDate=function(f){return f==="s"&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var c=r.diff;r.diff=function(f,p,h){if(f&&this.$u===f.$u)return c.call(this,f,p,h);var m=this.local(),g=n(f).local();return c.call(m,g,p,h)}};var c1e={year:0,month:1,day:2,hour:3,minute:4,second:5},O8={},f1e=function(e,n){n===void 0&&(n={});var r=n.timeZoneName||"short",s=e+"|"+r,i=O8[s];return i||(i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:r}),O8[s]=i),i};const p1e=function(t,e,n){var r,s=function(c,f,p){p===void 0&&(p={});var h=new Date(c),m=f1e(f,p);return m.formatToParts(h)},i=function(c,f){for(var p=s(c,f),h=[],m=0;m<p.length;m+=1){var g=p[m],y=g.type,x=g.value,_=c1e[y];_>=0&&(h[_]=parseInt(x,10))}var k=h[3],w=k===24?0:k,S=h[0]+"-"+h[1]+"-"+h[2]+" "+w+":"+h[4]+":"+h[5]+":000",C=n.utc(S).valueOf(),A=+c,M=A%1e3;return A-=M,(C-A)/6e4},a=function(c,f,p){var h=c-f*60*1e3,m=i(h,p);if(f===m)return[h,f];h-=(m-f)*60*1e3;var g=i(h,p);return m===g?[h,m]:[c-Math.min(m,g)*60*1e3,Math.max(m,g)]},o=e.prototype;o.tz=function(d,c){d===void 0&&(d=r);var f=this.utcOffset(),p=this.toDate(),h=p.toLocaleString("en-US",{timeZone:d}),m=Math.round((p-new Date(h))/1e3/60),g=-Math.round(p.getTimezoneOffset()/15)*15-m,y=!Number(g),x;if(y)x=this.utcOffset(0,c);else if(x=n(h,{locale:this.$L}).$set(lC,this.$ms).utcOffset(g,!0),c){var _=x.utcOffset();x=x.add(f-_,_l)}return x.$x.$timezone=d,x},o.offsetName=function(d){var c=this.$x.$timezone||n.tz.guess(),f=s(this.valueOf(),c,{timeZoneName:d}).find(function(p){return p.type.toLowerCase()==="timezonename"});return f&&f.value};var l=o.startOf;o.startOf=function(d,c){if(!this.$x||!this.$x.$timezone)return l.call(this,d,c);var f=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L}),p=l.call(f,d,c);return p.tz(this.$x.$timezone,!0)},n.tz=function(d,c,f){var p=f&&c,h=f||c||r,m=i(+n(),h);if(typeof d!="string")return n(d).tz(h);var g=n.utc(d,p).valueOf(),y=a(g,m,h),x=y[0],_=y[1],k=n(x).utcOffset(_);return k.$x.$timezone=h,k},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(d){r=d}},h1e=function(t,e){var n=e.prototype,r=n.format;n.format=function(s){var i=this,a=this.$locale();if(!this.isValid())return r.bind(this)(s);var o=this.$utils(),l=s||$R,d=l.replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(c){switch(c){case"Q":return Math.ceil((i.$M+1)/3);case"Do":return a.ordinal(i.$D);case"gggg":return i.weekYear();case"GGGG":return i.isoWeekYear();case"wo":return a.ordinal(i.week(),"W");case"w":case"ww":return o.s(i.week(),c==="w"?1:2,"0");case"W":case"WW":return o.s(i.isoWeek(),c==="W"?1:2,"0");case"k":case"kk":return o.s(String(i.$H===0?24:i.$H),c==="k"?1:2,"0");case"X":return Math.floor(i.$d.getTime()/1e3);case"x":return i.$d.getTime();case"z":return"["+i.offsetName()+"]";case"zzz":return"["+i.offsetName("long")+"]";default:return c}});return r.bind(this)(d)}};var m1e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,L8=/\d/,cv=/\d\d/,g1e=/\d{3}/,v1e=/\d{4}/,ho=/\d\d?/,y1e=/[+-]?\d+/,b1e=/[+-]\d\d:?(\d\d)?|Z/,fv=/\d*[^-_:/,()\s\d]+/,vc={},JK=function(e){return e=+e,e+(e>68?1900:2e3)};function x1e(t){if(!t||t==="Z")return 0;var e=t.match(/([+-]|\d\d)/g),n=+(e[1]*60)+(+e[2]||0);return n===0?0:e[0]==="+"?-n:n}var Us=function(e){return function(n){this[e]=+n}},V8=[b1e,function(t){var e=this.zone||(this.zone={});e.offset=x1e(t)}],l4=function(e){var n=vc[e];return n&&(n.indexOf?n:n.s.concat(n.f))},N8=function(e,n){var r,s=vc,i=s.meridiem;if(!i)r=e===(n?"pm":"PM");else for(var a=1;a<=24;a+=1)if(e.indexOf(i(a,0,n))>-1){r=a>12;break}return r},_1e={A:[fv,function(t){this.afternoon=N8(t,!1)}],a:[fv,function(t){this.afternoon=N8(t,!0)}],Q:[L8,function(t){this.month=(t-1)*3+1}],S:[L8,function(t){this.milliseconds=+t*100}],SS:[cv,function(t){this.milliseconds=+t*10}],SSS:[g1e,function(t){this.milliseconds=+t}],s:[ho,Us("seconds")],ss:[ho,Us("seconds")],m:[ho,Us("minutes")],mm:[ho,Us("minutes")],H:[ho,Us("hours")],h:[ho,Us("hours")],HH:[ho,Us("hours")],hh:[ho,Us("hours")],D:[ho,Us("day")],DD:[cv,Us("day")],Do:[fv,function(t){var e=vc,n=e.ordinal,r=t.match(/\d+/);if(this.day=r[0],!!n)for(var s=1;s<=31;s+=1)n(s).replace(/\[|\]/g,"")===t&&(this.day=s)}],w:[ho,Us("week")],ww:[cv,Us("week")],M:[ho,Us("month")],MM:[cv,Us("month")],MMM:[fv,function(t){var e=l4("months"),n=l4("monthsShort"),r=(n||e.map(function(s){return s.slice(0,3)})).indexOf(t)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[fv,function(t){var e=l4("months"),n=e.indexOf(t)+1;if(n<1)throw new Error;this.month=n%12||n}],Y:[y1e,Us("year")],YY:[cv,function(t){this.year=JK(t)}],YYYY:[v1e,Us("year")],Z:V8,ZZ:V8};function w1e(t){var e=t.afternoon;if(e!==void 0){var n=t.hours;e?n<12&&(t.hours+=12):n===12&&(t.hours=0),delete t.afternoon}}function k1e(t){t=KK(t,vc&&vc.formats);for(var e=t.match(m1e),n=e.length,r=0;r<n;r+=1){var s=e[r],i=_1e[s],a=i&&i[0],o=i&&i[1];o?e[r]={regex:a,parser:o}:e[r]=s.replace(/^\[|\]$/g,"")}return function(l){for(var d={},c=0,f=0;c<n;c+=1){var p=e[c];if(typeof p=="string")f+=p.length;else{var h=p.regex,m=p.parser,g=l.slice(f),y=h.exec(g),x=y[0];m.call(d,x),l=l.replace(x,"")}}return w1e(d),d}}var S1e=function(e,n,r,s){try{if(["x","X"].indexOf(n)>-1)return new Date((n==="X"?1e3:1)*e);var i=k1e(n),a=i(e),o=a.year,l=a.month,d=a.day,c=a.hours,f=a.minutes,p=a.seconds,h=a.milliseconds,m=a.zone,g=a.week,y=new Date,x=d||(!o&&!l?y.getDate():1),_=o||y.getFullYear(),k=0;o&&!l||(k=l>0?l-1:y.getMonth());var w=c||0,S=f||0,C=p||0,A=h||0;if(m)return new Date(Date.UTC(_,k,x,w,S,C,A+m.offset*60*1e3));if(r)return new Date(Date.UTC(_,k,x,w,S,C,A));var M;return M=new Date(_,k,x,w,S,C,A),g&&(M=s(M).week(g).toDate()),M}catch(E){return new Date("")}};const C1e=function(t,e,n){n.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(JK=t.parseTwoDigitYear);var r=e.prototype,s=r.parse;r.parse=function(i){var a=i.date,o=i.utc,l=i.args;this.$u=o;var d=l[1];if(typeof d=="string"){var c=l[2]===!0,f=l[3]===!0,p=c||f,h=l[2];f&&(h=l[2]),vc=this.$locale(),!c&&h&&(vc=n.Ls[h]),this.$d=S1e(a,d,o,n),this.init(),h&&h!==!0&&(this.$L=this.locale(h).$L),p&&a!=this.format(d)&&(this.$d=new Date("")),vc={}}else if(d instanceof Array)for(var m=d.length,g=1;g<=m;g+=1){l[1]=d[g-1];var y=n.apply(this,l);if(y.isValid()){this.$d=y.$d,this.$L=y.$L,this.init();break}g===m&&(this.$d=new Date(""))}else s.call(this,i)}};let eX={};function A1e(t,e){eX[t]=e}function Ua(t){var e;return(e=eX[t])!=null?e:null}cr.extend(n1e);cr.extend(J0e);cr.extend(t1e);cr.extend(r1e);cr.extend(a1e);cr.extend(d1e);cr.extend(p1e);cr.extend(h1e);cr.extend(C1e);const T1e={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},$1e={class:"flex"},M1e={class:"w-full flex-1"},E1e={class:"mb-6 flex items-center justify-between"},D1e={class:"flex items-center space-x-2"},R1e={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},P1e={class:"text-p-base text-ink-gray-7"},I1e={key:0,class:"px-4 pb-7 pt-4 sm:px-6"},O1e={class:"space-y-2"},L1e=Je({__name:"Dialog",props:{modelValue:{type:Boolean},options:{default:()=>({})},disableOutsideClickToClose:{type:Boolean,default:!1}},emits:["update:modelValue","close","after-leave"],setup(t,{emit:e}){const n=t,r=e,s=Z(()=>{let h=n.options.actions;return h!=null&&h.length?h.map(m=>{let g=Jt(ze(ge({},m),{loading:!1,onClick:m.onClick?()=>ue(this,null,function*(){g.loading=!0;try{if(m.onClick){let y=()=>{console.warn("Value passed to onClick is a context object. Please use context.close() instead of context() to close the dialog."),o()};y.close=o,yield m.onClick(y)}}finally{g.loading=!1}}):o}));return g}):[]}),i=Z({get(){return n.modelValue},set(h){r("update:modelValue",h),h||r("close")}});function a(h){i.value=h}function o(){i.value=!1}const l=Z(()=>{var m;if(!((m=n.options)!=null&&m.icon))return null;let h=n.options.icon;return typeof h=="string"&&(h={name:h}),h}),d=Z(()=>{var g,y;if((g=n.options)!=null&&g.paddingTop)return"";const h=((y=n.options)==null?void 0:y.position)||"center";return{center:"justify-center",top:"pt-[20vh]"}[h]}),c=Z(()=>{var h;return(h=n.options)!=null&&h.paddingTop?{paddingTop:n.options.paddingTop}:{}}),f=Z(()=>{var g;const h=(g=l.value)==null?void 0:g.appearance;return h?{warning:"bg-surface-amber-2",info:"bg-surface-blue-2",danger:"bg-surface-red-2",success:"bg-surface-green-2"}[h]:"bg-surface-gray-2"}),p=Z(()=>{var g;const h=(g=l.value)==null?void 0:g.appearance;return h?{warning:"text-ink-amber-3",info:"text-ink-blue-3",danger:"text-ink-red-4",success:"text-ink-green-3"}[h]:"text-ink-gray-5"});return(h,m)=>(T(),he(v(Jhe),{open:i.value,"onUpdate:open":[m[3]||(m[3]=g=>i.value=g),a]},{default:D(()=>[b(v(Vme),null,{default:D(()=>[b(v(Ime),{class:"fixed inset-0 bg-black-overlay-200 backdrop-filter backdrop-blur-[12px] overflow-y-auto dialog-overlay outline-none","data-dialog":t.options.title,onAfterLeave:m[2]||(m[2]=g=>h.$emit("after-leave"))},{default:D(()=>[u("div",{class:pe(["flex min-h-screen flex-col items-center px-4 py-4 text-center",d.value]),style:rt(c.value)},[b(v(Mme),{class:pe(["my-8 inline-block w-full transform overflow-hidden rounded-xl bg-surface-modal text-left align-middle shadow-xl dialog-content focus-visible:outline-none",{"max-w-7xl":t.options.size==="7xl","max-w-6xl":t.options.size==="6xl","max-w-5xl":t.options.size==="5xl","max-w-4xl":t.options.size==="4xl","max-w-3xl":t.options.size==="3xl","max-w-2xl":t.options.size==="2xl","max-w-xl":t.options.size==="xl","max-w-lg":t.options.size==="lg"||!t.options.size,"max-w-md":t.options.size==="md","max-w-sm":t.options.size==="sm","max-w-xs":t.options.size==="xs"}]),onEscapeKeyDown:m[0]||(m[0]=g=>o()),onInteractOutside:m[1]||(m[1]=g=>{n.disableOutsideClickToClose&&g.preventDefault()})},{default:D(()=>[qe(h.$slots,"body",{},()=>[qe(h.$slots,"body-main",{},()=>[u("div",T1e,[u("div",$1e,[u("div",M1e,[qe(h.$slots,"body-header",{},()=>[u("div",E1e,[u("div",D1e,[l.value?(T(),R("div",{key:0,class:pe(["flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full",f.value])},[b(yi,{name:l.value.name,class:pe(["h-4 w-4",p.value]),"aria-hidden":"true"},null,8,["name","class"])],2)):se("",!0),b(v(cK),{as:"header"},{default:D(()=>[qe(h.$slots,"body-title",{},()=>[u("h3",R1e,$(t.options.title||"Untitled"),1)],!0)]),_:3})]),b(v(tme),{"as-child":""},{default:D(()=>[b(v(J),{variant:"ghost",onClick:o},{icon:D(()=>[b(v(Eg),{class:"h-4 w-4 text-ink-gray-9"})]),_:1})]),_:1})])],!0),qe(h.$slots,"body-content",{},()=>[t.options.message?(T(),he(v(dK),{key:0,"as-child":""},{default:D(()=>[u("p",P1e,$(t.options.message),1)]),_:1})):se("",!0)],!0)])])])],!0),s.value.length||h.$slots.actions?(T(),R("div",I1e,[qe(h.$slots,"actions",Pn(or({close:o})),()=>[u("div",O1e,[(T(!0),R(xe,null,_e(s.value,g=>(T(),he(v(J),xt({class:"w-full",key:g.label,disabled:g.disabled},{ref_for:!0},g),{default:D(()=>[W($(g.label),1)]),_:2},1040,["disabled"]))),128))])],!0)])):se("",!0)],!0)]),_:3},8,["class"])],6)]),_:3},8,["data-dialog"])]),_:3})]),_:3},8,["open"]))}}),tX=It(L1e,[["__scopeId","data-v-5e9d9e2d"]]),jt=tX;jt.Title=cK;jt.Description=dK;Q([]);const V1e=["innerHTML"],nX=Je({__name:"ErrorMessage",props:{message:{}},setup(t){const e=t,n=Z(()=>e.message?e.message instanceof Error?e.message.messages||e.message.message:e.message:"");return(r,s)=>t.message?(T(),R("div",{key:0,class:"whitespace-pre-line text-sm text-ink-red-4",role:"alert",innerHTML:n.value},null,8,V1e)):se("",!0)}}),N1e={class:"relative flex items-center"},j1e=["disabled","id","value"],F1e=["value","disabled","selected"],Qe=Je({inheritAttrs:!1,__name:"Select",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e;eb();const s=ih();function i(p){r("update:modelValue",p.target.value)}const a=Z(()=>{var p;return((p=n.options)==null?void 0:p.map(h=>typeof h=="string"?{label:h,value:h}:h).filter(Boolean))||[]}),o=Z(()=>n.disabled?"text-ink-gray-5":"text-ink-gray-8"),l=Z(()=>({sm:"text-base",md:"text-base",lg:"text-lg",xl:"text-xl"})[n.size]),d=Z(()=>({sm:"pl-2 pr-5",md:"pl-2.5 pr-5.5",lg:"pl-3 pr-6",xl:"pl-3 pr-6"})[n.size]),c=Z(()=>{let p={sm:"rounded h-7",md:"rounded h-8",lg:"rounded-md h-10",xl:"rounded-md h-10"}[n.size],h=n.disabled?"disabled":n.variant,m={subtle:"border border-[--surface-gray-2] bg-surface-gray-2 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",outline:"border border-outline-gray-2 bg-surface-white hover:border-outline-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",ghost:"bg-transparent border-transparent hover:bg-surface-gray-3 focus:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",disabled:["border",n.variant!=="ghost"?"bg-surface-gray-1":"",n.variant==="outline"?"border-outline-gray-2":"border-transparent"]}[h];return[p,l.value,d.value,m,o.value,"transition-colors w-full py-0 truncate"]});let f=Z(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[n.size]);return(p,h)=>(T(),R("div",N1e,[p.$slots.prefix?(T(),R("div",{key:0,class:pe(["absolute inset-y-0 left-0 flex items-center",o.value,v(f)])},[qe(p.$slots,"prefix")],2)):se("",!0),t.placeholder?we((T(),R("div",{key:1,class:pe(["pointer-events-none absolute text-ink-gray-4 truncate w-full",[l.value,d.value]])},$(t.placeholder),3)),[[lt,!t.modelValue]]):se("",!0),u("select",xt({class:c.value,disabled:t.disabled,id:t.id,value:t.modelValue,onChange:i},v(s)),[(T(!0),R(xe,null,_e(a.value,m=>(T(),R("option",{key:m.value,value:m.value,disabled:m.disabled||!1,selected:t.modelValue===m.value},$(m.label),9,F1e))),128))],16,j1e)]))}}),B1e={class:"space-y-1.5"},z1e=["for"],U1e=["placeholder","disabled","id","value","rows"],H1e=Je({__name:"Textarea",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},debounce:{},rows:{default:3},label:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,s=n,i=ih(),a=Q(null),o=Z(()=>{let f={sm:"text-base rounded",md:"text-base rounded",lg:"text-lg rounded-md",xl:"text-xl rounded-md"}[r.size],p={sm:["py-1.5 px-2"],md:["py-1.5 px-2.5"],lg:["py-1.5 px-3"],xl:["py-1.5 px-3"]}[r.size],h=r.disabled?"disabled":r.variant,m={subtle:"border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",outline:"border border-outline-gray-2 bg-surface-white placeholder-ink-gray-4 hover:border-outline-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",disabled:["border bg-surface-gray-1 placeholder-ink-gray-3",r.variant==="outline"?"border-outline-gray-2":"border-transparent"]}[h];return[f,p,m,r.disabled?"text-ink-gray-5":"text-ink-gray-8","transition-colors w-full block"]}),l=Z(()=>[{sm:"text-xs",md:"text-base",lg:"text-lg",xl:"text-xl"}[r.size],"text-ink-gray-5"]);let d=f=>{s("update:modelValue",f)};r.debounce&&(d=oC(d,r.debounce));let c=f=>{d(f.target.value)};return e({el:a}),(f,p)=>(T(),R("div",B1e,[t.label?(T(),R("label",{key:0,class:pe(["block",l.value]),for:t.id},$(t.label),11,z1e)):se("",!0),u("textarea",xt({ref_key:"textareaRef",ref:a,placeholder:t.placeholder,class:o.value,disabled:t.disabled,id:t.id,value:t.modelValue,rows:t.rows,onInput:p[0]||(p[0]=(...h)=>v(c)&&v(c)(...h)),onChange:p[1]||(p[1]=(...h)=>v(c)&&v(c)(...h))},v(i)),null,16,U1e)]))}}),q1e=["for"],W1e=Je({__name:"FormLabel",props:{label:{},size:{default:"sm"},id:{},required:{type:Boolean}},setup(t){const e=t,n=Z(()=>[{sm:"text-xs",md:"text-base"}[e.size],"text-ink-gray-5"]);return(r,s)=>(T(),R("label",{class:pe(["block",n.value]),for:t.id},[W($(t.label)+" ",1),t.required?(T(),R(xe,{key:0},[s[0]||(s[0]=u("span",{class:"text-ink-red-3 select-none","aria-hidden":"true"},"*",-1)),s[1]||(s[1]=u("span",{class:"sr-only"},"(required)",-1))],64)):se("",!0)],10,q1e))}}),G1e={inheritAttrs:!1},ve=Je(ze(ge({},G1e),{__name:"FormControl",props:{label:{},description:{},type:{default:"text"},size:{default:"sm"},variant:{default:"subtle"},required:{type:Boolean}},setup(t){const e=AR(),n=t,r=ih(),s=Z(()=>{let a={};for(let o in r)o!=="class"&&o!=="style"&&(a[o]=r[o]);return a}),i=Z(()=>[{sm:"text-xs",md:"text-base"}[n.size],"text-ink-gray-5"]);return(a,o)=>t.type!="checkbox"?(T(),R("div",{key:0,class:pe(["space-y-1.5",v(r).class]),style:rt(v(r).style)},[t.label?(T(),he(W1e,{key:0,label:t.label,size:t.size,id:v(e),required:t.required},null,8,["label","size","id","required"])):se("",!0),t.type==="select"?(T(),he(v(Qe),xt({key:1,id:v(e)},ze(ge({},s.value),{size:t.size,variant:t.variant})),FA({_:2},[a.$slots.prefix?{name:"prefix",fn:D(()=>[qe(a.$slots,"prefix")]),key:"0"}:void 0]),1040,["id"])):t.type==="autocomplete"?(T(),he(v(VK),Pn(xt({key:2},ge({},s.value))),FA({_:2},[a.$slots.prefix?{name:"prefix",fn:D(()=>[qe(a.$slots,"prefix")]),key:"0"}:void 0,a.$slots["item-prefix"]?{name:"item-prefix",fn:D(l=>[qe(a.$slots,"item-prefix",Pn(or(l)))]),key:"1"}:void 0]),1040)):t.type==="textarea"?(T(),he(v(H1e),xt({key:3,id:v(e)},ze(ge({},s.value),{size:t.size,variant:t.variant})),null,16,["id"])):(T(),he(v(TR),xt({key:4,id:v(e)},ze(ge({},s.value),{type:t.type,size:t.size,variant:t.variant,required:t.required})),FA({_:2},[a.$slots.prefix?{name:"prefix",fn:D(()=>[qe(a.$slots,"prefix")]),key:"0"}:void 0,a.$slots.suffix?{name:"suffix",fn:D(()=>[qe(a.$slots,"suffix")]),key:"1"}:void 0]),1040,["id"])),qe(a.$slots,"description",{},()=>[t.description?(T(),R("p",{key:0,class:pe(i.value)},$(t.description),3)):se("",!0)])],6)):(T(),he(v(St),xt({key:1,id:v(e)},ze(ge({},s.value),{label:t.label,size:t.size,class:v(r).class})),null,16,["id"]))}})),Y1e={name:"Input",inheritAttrs:!1,expose:["getInputValue"],components:{FeatherIcon:yi},props:{label:{type:String},type:{type:String,default:"text",validator(t){let e=["text","number","checkbox","textarea","select","email","password","date"].includes(t);return e||console.warn(`Invalid value "${t}" for "type" prop for Input`),e}},modelValue:{type:[String,Number,Boolean,Object,Array]},inputClass:{type:[String,Array,Object]},debounce:{type:Number},options:{type:Array},disabled:{type:Boolean},rows:{type:Number,default:3},placeholder:{type:String},iconLeft:{type:String}},emits:["input","change","update:modelValue"],methods:{focus(){this.$refs.input.focus()},blur(){this.$refs.input.blur()},getInputValue(t){let e=t?t.target:this.$refs.input,n=e.value;return this.type=="checkbox"&&(n=e.checked),n}},computed:{passedInputValue(){return"value"in this.$attrs?this.$attrs.value:this.modelValue||null},inputAttributes(){let t={},e=n=>{this.$emit("input",this.getInputValue(n))};return this.debounce&&(e=oC(e,this.debounce)),this.type=="checkbox"&&(t.checked=this.passedInputValue),Object.assign(t,this.$attrs,{onInput:e,onChange:n=>{this.$emit("change",this.getInputValue(n)),this.$emit("update:modelValue",this.getInputValue(n))}})},selectOptions(){return this.options.map(t=>typeof t=="string"?{label:t,value:t}:t).filter(Boolean)},isNormalInput(){return["text","number","checkbox","email","password","date"].includes(this.type)}}},K1e={key:0,class:"mb-2 block text-sm leading-4 text-gray-700"},X1e=["type","disabled","placeholder","value"],Q1e=["placeholder","value","disabled","rows"],Z1e=["disabled"],J1e=["value","disabled","selected"],ebe={key:1,class:"ml-2 inline-block text-base leading-4"};function tbe(t,e,n,r,s,i){const a=Vs("FeatherIcon");return T(),R("label",{class:pe([n.type=="checkbox"?"flex":"block",t.$attrs.class]),style:rt(t.$attrs.style)},[n.label&&n.type!="checkbox"?(T(),R("span",K1e,$(n.label),1)):se("",!0),u("div",{class:pe(["relative flex",{"items-center":i.isNormalInput||n.type=="select"}])},[n.iconLeft&&n.type!="checkbox"?(T(),he(a,{key:0,name:n.iconLeft,class:pe(["absolute mx-2 h-4 w-4 text-gray-600",{"mt-2":n.type=="textarea"}])},null,8,["name","class"])):se("",!0),i.isNormalInput?(T(),R("input",xt({key:1},i.inputAttributes,{class:["border-gray-400 placeholder-gray-500",[{"form-input block w-full":n.type!="checkbox","form-checkbox":n.type=="checkbox","pl-8":n.iconLeft&&n.type!="checkbox"},n.inputClass]],ref:"input",type:n.type||"text",disabled:n.disabled,placeholder:n.placeholder,value:i.passedInputValue}),null,16,X1e)):se("",!0),n.type==="textarea"?(T(),R("textarea",xt({key:2},i.inputAttributes,{placeholder:n.placeholder,class:["placeholder-gray-500",["form-textarea block w-full resize-none",n.inputClass,{"pl-8":n.iconLeft}]],ref:"input",value:i.passedInputValue,disabled:n.disabled,rows:n.rows}),null,16,Q1e)):se("",!0),n.type==="select"?(T(),R("select",xt({key:3},i.inputAttributes,{class:["form-select block w-full",{"pl-8":n.iconLeft}],ref:"input",disabled:n.disabled}),[(T(!0),R(xe,null,_e(i.selectOptions,o=>(T(),R("option",{key:o.value,value:o.value,disabled:o.disabled||!1,selected:i.passedInputValue===o.value},$(o.label),9,J1e))),128))],16,Z1e)):se("",!0)],2),n.label&&n.type=="checkbox"?(T(),R("span",ebe,$(n.label),1)):se("",!0)],6)}const $n=It(Y1e,[["render",tbe]]),nbe={class:"lucide lucide-eye",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function rbe(t,e){return T(),R("svg",nbe,[...e[0]||(e[0]=[u("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"},null,-1),u("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])}zt({name:"lucide-eye",render:rbe});const sbe={class:"lucide lucide-eye-off",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function ibe(t,e){return T(),R("svg",sbe,[...e[0]||(e[0]=[u("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"},null,-1),u("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"},null,-1),u("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"},null,-1),u("path",{d:"m2 2 20 20"},null,-1)])])}zt({name:"lucide-eye-off",render:ibe});const abe={class:"lucide lucide-command",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function obe(t,e){return T(),R("svg",abe,[...e[0]||(e[0]=[u("path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"},null,-1)])])}zt({name:"lucide-command",render:obe});const lbe={class:"lucide lucide-arrow-big-up",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function ube(t,e){return T(),R("svg",lbe,[...e[0]||(e[0]=[u("path",{d:"M9 13a1 1 0 0 0-1-1H5.061a1 1 0 0 1-.75-1.811l6.836-6.835a1.207 1.207 0 0 1 1.707 0l6.835 6.835a1 1 0 0 1-.75 1.811H16a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1z"},null,-1)])])}zt({name:"lucide-arrow-big-up",render:ube});const dbe={class:"lucide lucide-option",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function cbe(t,e){return T(),R("svg",dbe,[...e[0]||(e[0]=[u("path",{d:"M3 3h6l6 18h6"},null,-1),u("path",{d:"M14 3h7"},null,-1)])])}zt({name:"lucide-option",render:cbe});const fbe={class:"lucide lucide-arrow-up",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function pbe(t,e){return T(),R("svg",fbe,[...e[0]||(e[0]=[u("path",{d:"m5 12 7-7 7 7"},null,-1),u("path",{d:"M12 19V5"},null,-1)])])}zt({name:"lucide-arrow-up",render:pbe});const hbe={class:"lucide lucide-arrow-down",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function mbe(t,e){return T(),R("svg",hbe,[...e[0]||(e[0]=[u("path",{d:"M12 5v14"},null,-1),u("path",{d:"m19 12-7 7-7-7"},null,-1)])])}zt({name:"lucide-arrow-down",render:mbe});const gbe={class:"lucide lucide-arrow-left",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function vbe(t,e){return T(),R("svg",gbe,[...e[0]||(e[0]=[u("path",{d:"m12 19-7-7 7-7"},null,-1),u("path",{d:"M19 12H5"},null,-1)])])}zt({name:"lucide-arrow-left",render:vbe});const ybe={class:"lucide lucide-arrow-right",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function bbe(t,e){return T(),R("svg",ybe,[...e[0]||(e[0]=[u("path",{d:"M5 12h14"},null,-1),u("path",{d:"m12 5 7 7-7 7"},null,-1)])])}zt({name:"lucide-arrow-right",render:bbe});const xbe={class:"lucide lucide-corner-down-left",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function _be(t,e){return T(),R("svg",xbe,[...e[0]||(e[0]=[u("path",{d:"M20 4v7a4 4 0 0 1-4 4H4"},null,-1),u("path",{d:"m9 10-5 5 5 5"},null,-1)])])}zt({name:"lucide-corner-down-left",render:_be});const wbe={class:"lucide lucide-delete",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function kbe(t,e){return T(),R("svg",wbe,[...e[0]||(e[0]=[u("path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z"},null,-1),u("path",{d:"m12 9 6 6"},null,-1),u("path",{d:"m18 9-6 6"},null,-1)])])}zt({name:"lucide-delete",render:kbe});const Sbe={},Cbe={class:"spinner",viewBox:"0 0 50 50"};function Abe(t,e){return T(),R("svg",Cbe,[...e[0]||(e[0]=[u("defs",null,[u("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[u("stop",{offset:"0%","stop-color":"rgba(0,110,219,1)"}),u("stop",{offset:"100%","stop-color":"rgba(255,255,255,0)"})])],-1),u("circle",{stroke:"url(#gradient)",class:"spinner-path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"},null,-1)])])}const Tbe=It(Sbe,[["render",Abe],["__scopeId","data-v-5c03f65e"]]);function Ms(t){this.content=t}Ms.prototype={constructor:Ms,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new Ms(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ms(n)},addToStart:function(t,e){return new Ms([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ms(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new Ms(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ms.from(t),t.size?new Ms(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ms.from(t),t.size?new Ms(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ms.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ms.from=function(t){if(t instanceof Ms)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ms(e)};function rX(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let a=0;s.text[a]==i.text[a];a++)n++;return n}if(s.content.size||i.content.size){let a=rX(s.content,i.content,n+1);if(a!=null)return a}n+=s.nodeSize}}function sX(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let a=t.child(--s),o=e.child(--i),l=a.nodeSize;if(a==o){n-=l,r-=l;continue}if(!a.sameMarkup(o))return{a:n,b:r};if(a.isText&&a.text!=o.text){let d=0,c=Math.min(a.text.length,o.text.length);for(;d<c&&a.text[a.text.length-d-1]==o.text[o.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(a.content.size||o.content.size){let d=sX(a.content,o.content,n-1,r-1);if(d)return d}n-=l,r-=l}}class Ze{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let a=0,o=0;o<n;a++){let l=this.content[a],d=o+l.nodeSize;if(d>e&&r(l,s+o,i||null,a)!==!1&&l.content.size){let c=o+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,s+c)}o=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",a=!0;return this.nodesBetween(e,n,(o,l)=>{let d=o.isText?o.text.slice(Math.max(e,l)-l,n-l):o.isLeaf?s?typeof s=="function"?s(o):s:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&d||o.isTextblock)&&r&&(a?a=!1:i+=r),i+=d},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new Ze(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,a=0;a<n;i++){let o=this.content[i],l=a+o.nodeSize;l>e&&((a<e||l>n)&&(o.isText?o=o.cut(Math.max(0,e-a),Math.min(o.text.length,n-a)):o=o.cut(Math.max(0,e-a-1),Math.min(o.content.size,n-a-1))),r.push(o),s+=o.nodeSize),a=l}return new Ze(r,s)}cutByIndex(e,n){return e==n?Ze.empty:e==0&&n==this.content.length?this:new Ze(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new Ze(s,i)}addToStart(e){return new Ze([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ze(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return rX(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return sX(this,e,n,r)}findIndex(e){if(e==0)return ox(0,e);if(e==this.size)return ox(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),i=r+s.nodeSize;if(i>=e)return i==e?ox(n+1,i):ox(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ze.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ze(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ze.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new Ze(n||e,r)}static from(e){if(!e)return Ze.empty;if(e instanceof Ze)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ze([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ze.empty=new Ze([],0);const u4={index:0,offset:0};function ox(t,e){return u4.index=t,u4.offset=e,u4}function x2(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!x2(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!x2(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ir=class S${constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&x2(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return S$.none;if(e instanceof S$)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};ir.none=[];class _2 extends Error{}class gt{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=aX(this.content,e+this.openStart,n);return r&&new gt(r,this.openStart,this.openEnd)}removeBetween(e,n){return new gt(iX(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return gt.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new gt(Ze.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new gt(e,r,s)}}gt.empty=new gt(Ze.empty,0,0);function iX(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:a,offset:o}=t.findIndex(n);if(s==e||i.isText){if(o!=n&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(iX(i.content,e-s-1,n-s-1)))}function aX(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),a=t.maybeChild(s);if(i==e||a.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let o=aX(a.content,e-i-1,n,a);return o&&t.replaceChild(s,a.copy(o))}function $be(t,e,n){if(n.openStart>t.depth)throw new _2("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new _2("Inconsistent open depths");return oX(t,e,n,0)}function oX(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let a=oX(t,e,n,r+1);return i.copy(i.content.replaceChild(s,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let a=t.parent,o=a.content;return bp(a,o.cut(0,t.parentOffset).append(n.content).append(o.cut(e.parentOffset)))}else{let{start:a,end:o}=Mbe(n,t);return bp(i,uX(t,a,o,e,r))}else return bp(i,w2(t,e,r))}function lX(t,e){if(!e.type.compatibleContent(t.type))throw new _2("Cannot join "+e.type.name+" onto "+t.type.name)}function C$(t,e,n){let r=t.node(n);return lX(r,e.node(n)),r}function yp(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function qy(t,e,n,r){let s=(e||t).node(n),i=0,a=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(yp(t.nodeAfter,r),i++));for(let o=i;o<a;o++)yp(s.child(o),r);e&&e.depth==n&&e.textOffset&&yp(e.nodeBefore,r)}function bp(t,e){return t.type.checkContent(e),t.copy(e)}function uX(t,e,n,r,s){let i=t.depth>s&&C$(t,e,s+1),a=r.depth>s&&C$(n,r,s+1),o=[];return qy(null,t,s,o),i&&a&&e.index(s)==n.index(s)?(lX(i,a),yp(bp(i,uX(t,e,n,r,s+1)),o)):(i&&yp(bp(i,w2(t,e,s+1)),o),qy(e,n,s,o),a&&yp(bp(a,w2(n,r,s+1)),o)),qy(r,null,s,o),new Ze(o)}function w2(t,e,n){let r=[];if(qy(null,t,n,r),t.depth>n){let s=C$(t,e,n+1);yp(bp(s,w2(t,e,n+1)),r)}return qy(e,null,n,r),new Ze(r)}function Mbe(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(Ze.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class G0{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ir.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let o=r;r=s,s=o}let i=r.marks;for(var a=0;a<i.length;a++)i[a].type.spec.inclusive===!1&&(!s||!i[a].isInSet(s.marks))&&(i=i[a--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new k2(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let a=e;;){let{index:o,offset:l}=a.content.findIndex(i),d=i-l;if(r.push(a,o,s+l),!d||(a=a.child(o),a.isText))break;i=d-1,s+=l+1}return new G0(n,r,i)}static resolveCached(e,n){let r=j8.get(e);if(r)for(let i=0;i<r.elts.length;i++){let a=r.elts[i];if(a.pos==n)return a}else j8.set(e,r=new Ebe);let s=r.elts[r.i]=G0.resolve(e,n);return r.i=(r.i+1)%Dbe,s}}class Ebe{constructor(){this.elts=[],this.i=0}}const Dbe=12,j8=new WeakMap;class k2{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Rbe=Object.create(null);let yc=class A${constructor(e,n,r,s=ir.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||Ze.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&x2(this.attrs,n||e.defaultAttrs||Rbe)&&ir.sameSet(this.marks,r||ir.none)}copy(e=null){return e==this.content?this:new A$(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new A$(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return gt.empty;let s=this.resolve(e),i=this.resolve(n),a=r?0:s.sharedDepth(n),o=s.start(a),d=s.node(a).content.cut(s.pos-o,i.pos-o);return new gt(d,s.depth-a,i.depth-a)}replace(e,n,r){return $be(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return G0.resolveCached(this,e)}resolveNoCache(e){return G0.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),dX(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ze.empty,s=0,i=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,s,i),o=a&&a.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),a=i&&i.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ir.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ir.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=Ze.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};yc.prototype.text=void 0;class S2 extends yc{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):dX(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new S2(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new S2(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function dX(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Bp{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Pbe(e,n);if(r.next==null)return Bp.empty;let s=cX(r);r.next&&r.err("Unexpected trailing text");let i=Fbe(jbe(s));return Bbe(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(a,o){let l=a.matchFragment(e,r);if(l&&(!n||l.validEnd))return Ze.from(o.map(d=>d.createAndFill()));for(let d=0;d<a.next.length;d++){let{type:c,next:f}=a.next[d];if(!(c.isText||c.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let p=i(f,o.concat(c));if(p)return p}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let a=[];for(let o=s;o.type;o=o.via)a.push(o.type);return a.reverse()}for(let a=0;a<i.next.length;a++){let{type:o,next:l}=i.next[a];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!s.type||l.validEnd)&&(r.push({match:o.contentMatch,type:o,via:s}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)i+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return i}).join(`
`)}}Bp.empty=new Bp(!0);class Pbe{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function cX(t){let e=[];do e.push(Ibe(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Ibe(t){let e=[];do e.push(Obe(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Obe(t){let e=Nbe(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Lbe(t,e);else break;return e}function F8(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Lbe(t,e){let n=F8(t),r=n;return t.eat(",")&&(t.next!="}"?r=F8(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Vbe(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let a=n[i];a.isInGroup(e)&&s.push(a)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function Nbe(t){if(t.eat("(")){let e=cX(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Vbe(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function jbe(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(a,o,l){let d={term:l,to:o};return e[a].push(d),d}function s(a,o){a.forEach(l=>l.to=o)}function i(a,o){if(a.type=="choice")return a.exprs.reduce((l,d)=>l.concat(i(d,o)),[]);if(a.type=="seq")for(let l=0;;l++){let d=i(a.exprs[l],o);if(l==a.exprs.length-1)return d;s(d,o=n())}else if(a.type=="star"){let l=n();return r(o,l),s(i(a.expr,l),l),[r(l)]}else if(a.type=="plus"){let l=n();return s(i(a.expr,o),l),s(i(a.expr,l),l),[r(l)]}else{if(a.type=="opt")return[r(o)].concat(i(a.expr,o));if(a.type=="range"){let l=o;for(let d=0;d<a.min;d++){let c=n();s(i(a.expr,l),c),l=c}if(a.max==-1)s(i(a.expr,l),l);else for(let d=a.min;d<a.max;d++){let c=n();r(l,c),s(i(a.expr,l),c),l=c}return[r(l)]}else{if(a.type=="name")return[r(o,void 0,a.value)];throw new Error("Unknown expr type")}}}}function fX(t,e){return e-t}function B8(t,e){let n=[];return r(e),n.sort(fX);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let a=0;a<i.length;a++){let{term:o,to:l}=i[a];!o&&n.indexOf(l)==-1&&r(l)}}}function Fbe(t){let e=Object.create(null);return n(B8(t,0));function n(r){let s=[];r.forEach(a=>{t[a].forEach(({term:o,to:l})=>{if(!o)return;let d;for(let c=0;c<s.length;c++)s[c][0]==o&&(d=s[c][1]);B8(t,l).forEach(c=>{d||s.push([o,d=[]]),d.indexOf(c)==-1&&d.push(c)})})});let i=e[r.join(",")]=new Bp(r.indexOf(t.length-1)>-1);for(let a=0;a<s.length;a++){let o=s[a][1].sort(fX);i.next.push({type:s[a][0],next:e[o.join(",")]||n(o)})}return i}}function Bbe(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,a=[];for(let o=0;o<s.next.length;o++){let{type:l,next:d}=s.next[o];a.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(d)==-1&&r.push(d)}i&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function pX(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function hX(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function mX(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function gX(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Ube(t,r,e[r]);return n}let z8=class vX{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=gX(e,r.attrs),this.defaultAttrs=pX(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Bp.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:hX(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new yc(this,this.computeAttrs(e),Ze.from(n),ir.setFrom(r))}createChecked(e=null,n,r){return n=Ze.from(n),this.checkContent(n),new yc(this,this.computeAttrs(e),n,ir.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ze.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(Ze.empty,!0);return i?new yc(this,e,n.append(i),ir.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){mX(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ir.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,a)=>r[i]=new vX(i,n,a));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function zbe(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class Ube{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?zbe(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class dC{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=gX(e,s.attrs),this.excluded=null;let i=pX(this.attrs);this.instance=i?new ir(this,i):null}create(e=null){return!e&&this.instance?this.instance:new ir(this,hX(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,a)=>r[i]=new dC(i,s++,n,a)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){mX(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class yX{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=Ms.from(e.nodes),n.marks=Ms.from(e.marks||{}),this.nodes=z8.compile(this.spec.nodes,this),this.marks=dC.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],a=i.spec.content||"",o=i.spec.marks;if(i.contentMatch=r[a]||(r[a]=Bp.parse(a,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=o=="_"?null:o?U8(this,o.split(" ")):o==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],a=i.spec.excludes;i.excluded=a==null?[i]:a==""?[]:U8(this,a.split(" "))}this.nodeFromJSON=s=>yc.fromJSON(this,s),this.markFromJSON=s=>ir.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof z8){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new S2(r,r.defaultAttrs,e,ir.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function U8(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],a=i;if(i)n.push(i);else for(let o in t.marks){let l=t.marks[o];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Hbe(t){return t.tag!=null}function qbe(t){return t.style!=null}let xp=class T${constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(Hbe(s))this.tags.push(s);else if(qbe(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new q8(this,n,!1);return r.addAll(e,ir.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new q8(this,n,!0);return r.addAll(e,ir.none,n.from,n.to),gt.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(Ybe(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let a=i.getAttrs(e);if(a===!1)continue;i.attrs=a||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let a=this.styles[i],o=a.style;if(!(o.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||o.length>e.length&&(o.charCodeAt(e.length)!=61||o.slice(e.length+1)!=n))){if(a.getAttrs){let l=a.getAttrs(n);if(l===!1)continue;a.attrs=l||void 0}return a}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,a=0;for(;a<n.length;a++){let o=n[a];if((o.priority==null?50:o.priority)<i)break}n.splice(a,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(a=>{r(a=W8(a)),a.mark||a.ignore||a.clearMark||(a.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(a=>{r(a=W8(a)),a.node||a.ignore||a.mark||(a.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new T$(e,T$.schemaRules(e)))}};const bX={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Wbe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},xX={ol:!0,ul:!0},Y0=1,$$=2,Wy=4;function H8(t,e,n){return e!=null?(e?Y0:0)|(e==="full"?$$:0):t&&t.whitespace=="pre"?Y0|$$:n&~Wy}class lx{constructor(e,n,r,s,i,a){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=a,this.content=[],this.activeMarks=ir.none,this.match=i||(a&Wy?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ze.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Y0)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=Ze.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ze.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!bX.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class q8{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,a=H8(null,n.preserveWhitespace,0)|(r?Wy:0);s?i=new lx(s.type,s.attrs,ir.none,!0,n.topMatch||s.type.contentMatch,a):r?i=new lx(null,null,ir.none,!0,null,a):i=new lx(e.schema.topNodeType,null,ir.none,!0,null,a),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,i=s.options&$$?"full":this.localPreserveWS||(s.options&Y0)>0,{schema:a}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let o=r.split(/\r?\n|\r/);for(let l=0;l<o.length;l++)l&&this.insertNode(a.linebreakReplacement.create(),n,!0),o[l]&&this.insertNode(a.text(o[l]),n,!/\S/.test(o[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=s.content[s.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),o;xX.hasOwnProperty(a)&&this.parser.normalizeLists&&Gbe(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Wbe.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let d,c=this.needsBlock;if(bX.hasOwnProperty(a))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),d=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=l&&l.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),d&&this.sync(i),this.needsBlock=c}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,l,d,l.consuming===!1?o:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],a=r.getPropertyValue(i);if(a)for(let o=void 0;;){let l=this.parser.matchStyle(i,a,this,o);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(d=>!l.clearMark(d)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)o=l;else break}}return n}addElementByRule(e,n,r,s){let i,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(a,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let o=this.top;if(a&&a.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(o)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let a=r?e.childNodes[r]:e.firstChild,o=s==null?null:e.childNodes[s];a!=o;a=a.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(a,n);this.findAtPoint(e,i)}findPlace(e,n,r){let s,i;for(let a=this.open,o=0;a>=0;a--){let l=this.nodes[a],d=l.findWrapping(e);if(d&&(!s||s.length>d.length+o)&&(s=d,i=l,!d.length))break;if(l.solid){if(r)break;o+=2}}if(!s)return null;this.sync(i);for(let a=0;a<s.length;a++)n=this.enterInner(s[a],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let a=ir.none;for(let o of s.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):G8(o.type,e.type))&&(a=o.addToSet(a));return i.content.push(e.mark(a)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let o=H8(e,i,a.options);a.options&Wy&&a.content.length==0&&(o|=Wy);let l=ir.none;return r=r.filter(d=>(a.type?a.type.allowsMarkType(d.type):G8(d.type,e))?(l=d.addToSet(l),!1):!0),this.nodes.push(new lx(e,n,l,s,null,o)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Y0)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),a=(o,l)=>{for(;o>=0;o--){let d=n[o];if(d==""){if(o==n.length-1||o==0)continue;for(;l>=i;l--)if(a(o-1,l))return!0;return!1}else{let c=l>0||l==0&&s?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!c||c.name!=d&&!c.isInGroup(d))return!1;l--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Gbe(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&xX.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Ybe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function W8(t){let e={};for(let n in t)e[n]=t[n];return e}function G8(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],a=o=>{i.push(o);for(let l=0;l<o.edgeCount;l++){let{type:d,next:c}=o.edge(l);if(d==e||i.indexOf(c)<0&&a(c))return!0}};if(a(s.contentMatch))return!0}}class uh{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=d4(n).createDocumentFragment());let s=r,i=[];return e.forEach(a=>{if(i.length||a.marks.length){let o=0,l=0;for(;o<i.length&&l<a.marks.length;){let d=a.marks[l];if(!this.marks[d.type.name]){l++;continue}if(!d.eq(i[o][0])||d.type.spec.spanning===!1)break;o++,l++}for(;o<i.length;)s=i.pop()[1];for(;l<a.marks.length;){let d=a.marks[l++],c=this.serializeMark(d,a.isInline,n);c&&(i.push([d,s]),s.appendChild(c.dom),s=c.contentDOM||c.dom)}}s.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=pw(d4(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&pw(d4(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return pw(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new uh(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Y8(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Y8(e.marks)}}function Y8(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function d4(t){return t.document||window.document}const K8=new WeakMap;function Kbe(t){let e=K8.get(t);return e===void 0&&K8.set(t,e=Xbe(t)),e}function Xbe(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function pw(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=Kbe(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=s.indexOf(" ");a>0&&(n=s.slice(0,a),s=s.slice(a+1));let o,l=n?t.createElementNS(n,s):t.createElement(s),d=e[1],c=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){c=2;for(let f in d)if(d[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),d[f]):f=="style"&&l.style?l.style.cssText=d[f]:l.setAttribute(f,d[f])}}for(let f=c;f<e.length;f++){let p=e[f];if(p===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:m}=pw(t,p,n,r);if(l.appendChild(h),m){if(o)throw new RangeError("Multiple content holes");o=m}}}return{dom:l,contentDOM:o}}const _X=65535,wX=Math.pow(2,16);function Qbe(t,e){return t+e*wX}function X8(t){return t&_X}function Zbe(t){return(t-(t&_X))/wX}const kX=1,SX=2,hw=4,CX=8;class M${constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&CX)>0}get deletedBefore(){return(this.delInfo&(kX|hw))>0}get deletedAfter(){return(this.delInfo&(SX|hw))>0}get deletedAcross(){return(this.delInfo&hw)>0}}class oa{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&oa.empty)return oa.empty}recover(e){let n=0,r=X8(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+Zbe(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?s:0);if(l>e)break;let d=this.ranges[o+i],c=this.ranges[o+a],f=l+d;if(e<=f){let p=d?e==l?-1:e==f?1:n:n,h=l+s+(p<0?0:c);if(r)return h;let m=e==(n<0?l:f)?null:Qbe(o/3,e-l),g=e==l?SX:e==f?kX:hw;return(n<0?e!=l:e!=f)&&(g|=CX),new M$(h,g,m)}s+=c-d}return r?e+s:new M$(e+s,0,null)}touches(e,n){let r=0,s=X8(n),i=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?r:0);if(l>e)break;let d=this.ranges[o+i],c=l+d;if(e<=c&&o==s*3)return!0;r+=this.ranges[o+a]-d}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let a=this.ranges[s],o=a-(this.inverted?i:0),l=a+(this.inverted?0:i),d=this.ranges[s+n],c=this.ranges[s+r];e(o,o+d,l,l+c),i+=c-d}}invert(){return new oa(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?oa.empty:new oa(e<0?[0,-e,0]:[0,0,e])}}oa.empty=new oa([]);class K0{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new K0(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new K0;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let a=this._maps[i],o=a.mapResult(e,n);if(o.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(o.recover);continue}}s|=o.delInfo,e=o.pos}return r?e:new M$(e,s,null)}}const c4=Object.create(null);class oi{getMap(){return oa.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=c4[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in c4)throw new RangeError("Duplicate use of step JSON ID "+e);return c4[e]=n,n.prototype.jsonID=e,n}}class Xr{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Xr(e,null)}static fail(e){return new Xr(null,e)}static fromReplace(e,n,r,s){try{return Xr.ok(e.replace(n,r,s))}catch(i){if(i instanceof _2)return Xr.fail(i.message);throw i}}}function ER(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(ER(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return Ze.fromArray(r)}class Jd extends oi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new gt(ER(n.content,(a,o)=>!a.isAtom||!o.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),s),n.openStart,n.openEnd);return Xr.fromReplace(e,this.from,this.to,i)}invert(){return new wl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Jd(n.pos,r.pos,this.mark)}merge(e){return e instanceof Jd&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Jd(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Jd(n.from,n.to,e.markFromJSON(n.mark))}}oi.jsonID("addMark",Jd);class wl extends oi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new gt(ER(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Xr.fromReplace(e,this.from,this.to,r)}invert(){return new Jd(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new wl(n.pos,r.pos,this.mark)}merge(e){return e instanceof wl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new wl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new wl(n.from,n.to,e.markFromJSON(n.mark))}}oi.jsonID("removeMark",wl);class ec extends oi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Xr.fromReplace(e,this.pos,this.pos+1,new gt(Ze.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new ec(this.pos,n.marks[s]);return new ec(this.pos,this.mark)}}return new zp(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ec(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ec(n.pos,e.markFromJSON(n.mark))}}oi.jsonID("addNodeMark",ec);class zp extends oi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Xr.fromReplace(e,this.pos,this.pos+1,new gt(Ze.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ec(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new zp(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new zp(n.pos,e.markFromJSON(n.mark))}}oi.jsonID("removeNodeMark",zp);class vs extends oi{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&E$(e,this.from,this.to)?Xr.fail("Structure replace would overwrite content"):Xr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new oa([this.from,this.to-this.from,this.slice.size])}invert(e){return new vs(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new vs(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof vs)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?gt.empty:new gt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new vs(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?gt.empty:new gt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new vs(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new vs(n.from,n.to,gt.fromJSON(e,n.slice),!!n.structure)}}oi.jsonID("replace",vs);class _s extends oi{constructor(e,n,r,s,i,a,o=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=a,this.structure=o}apply(e){if(this.structure&&(E$(e,this.from,this.gapFrom)||E$(e,this.gapTo,this.to)))return Xr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Xr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Xr.fromReplace(e,this.from,this.to,r):Xr.fail("Content does not fit in gap")}getMap(){return new oa([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new _s(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new _s(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new _s(n.from,n.to,n.gapFrom,n.gapTo,gt.fromJSON(e,n.slice),n.insert,!!n.structure)}}oi.jsonID("replaceAround",_s);function E$(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let a=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,s--}}return!1}function Jbe(t,e,n,r){let s=[],i=[],a,o;t.doc.nodesBetween(e,n,(l,d,c)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let p=Math.max(d,e),h=Math.min(d+l.nodeSize,n),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(a&&a.to==p&&a.mark.eq(f[g])?a.to=h:s.push(a=new wl(p,h,f[g])));o&&o.to==p?o.to=h:i.push(o=new Jd(p,h,r))}}),s.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function exe(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(a,o)=>{if(!a.isInline)return;i++;let l=null;if(r instanceof dC){let d=a.marks,c;for(;c=r.isInSet(d);)(l||(l=[])).push(c),d=c.removeFromSet(d)}else r?r.isInSet(a.marks)&&(l=[r]):l=a.marks;if(l&&l.length){let d=Math.min(o+a.nodeSize,n);for(let c=0;c<l.length;c++){let f=l[c],p;for(let h=0;h<s.length;h++){let m=s[h];m.step==i-1&&f.eq(s[h].style)&&(p=m)}p?(p.to=d,p.step=i):s.push({style:f,from:Math.max(o,e),to:d,step:i})}}}),s.forEach(a=>t.step(new wl(a.from,a.to,a.style)))}function DR(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),a=[],o=e+1;for(let l=0;l<i.childCount;l++){let d=i.child(l),c=o+d.nodeSize,f=r.matchType(d.type);if(!f)a.push(new vs(o,c,gt.empty));else{r=f;for(let p=0;p<d.marks.length;p++)n.allowsMarkType(d.marks[p].type)||t.step(new wl(o,c,d.marks[p]));if(s&&d.isText&&n.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(d.text);)m||(m=new gt(Ze.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),a.push(new vs(o+p.index,o+p.index+p[0].length,m))}}o=c}if(!r.validEnd){let l=r.fillBefore(Ze.empty,!0);t.replace(o,o,new gt(l,0,0))}for(let l=a.length-1;l>=0;l--)t.step(a[l])}function txe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Pg(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,s=0,i=0;;--r){let a=t.$from.node(r),o=t.$from.index(r)+s,l=t.$to.indexAfter(r)-i;if(r<t.depth&&a.canReplace(o,l,n))return r;if(r==0||a.type.spec.isolating||!txe(a,o,l))break;o&&(s=1),l<a.childCount&&(i=1)}return null}function nxe(t,e,n){let{$from:r,$to:s,depth:i}=e,a=r.before(i+1),o=s.after(i+1),l=a,d=o,c=Ze.empty,f=0;for(let m=i,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,c=Ze.from(r.node(m).copy(c)),f++):l--;let p=Ze.empty,h=0;for(let m=i,g=!1;m>n;m--)g||s.after(m+1)<s.end(m)?(g=!0,p=Ze.from(s.node(m).copy(p)),h++):d++;t.step(new _s(l,d,a,o,new gt(c.append(p),f,h),c.size-f,!0))}function RR(t,e,n=null,r=t){let s=rxe(t,e),i=s&&sxe(r,e);return i?s.map(Q8).concat({type:e,attrs:n}).concat(i.map(Q8)):null}function Q8(t){return{type:t,attrs:null}}function rxe(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let a=i.length?i[0]:e;return n.canReplaceWith(r,s,a)?i:null}function sxe(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(!a)return null;let l=(a.length?a[a.length-1]:e).contentMatch;for(let d=r;l&&d<s;d++)l=l.matchType(n.child(d).type);return!l||!l.validEnd?null:a}function ixe(t,e,n){let r=Ze.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let o=n[a].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ze.from(n[a].type.create(n[a].attrs,r))}let s=e.start,i=e.end;t.step(new _s(s,i,s,i,new gt(r,0,0),n.length,!0))}function axe(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(a,o)=>{let l=typeof s=="function"?s(a):s;if(a.isTextblock&&!a.hasMarkup(r,l)&&oxe(t.doc,t.mapping.slice(i).map(o),r)){let d=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?d=!1:!h&&m&&(d=!0)}d===!1&&TX(t,a,o,i),DR(t,t.mapping.slice(i).map(o,1),r,void 0,d===null);let c=t.mapping.slice(i),f=c.map(o,1),p=c.map(o+a.nodeSize,1);return t.step(new _s(f,p,f+1,p-1,new gt(Ze.from(r.create(l,null,a.marks)),0,0),1,!0)),d===!0&&AX(t,a,o,i),!1}})}function AX(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let a,o=/\r?\n|\r/g;for(;a=o.exec(s.text);){let l=t.mapping.slice(r).map(n+1+i+a.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function TX(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let a=t.mapping.slice(r).map(n+1+i);t.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function oxe(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function lxe(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let a=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,a);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new _s(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new gt(Ze.from(a),0,0),1,!0))}function zu(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,a=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!a.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let d=s.depth-1,c=n-2;d>i;d--,c--){let f=s.node(d),p=s.index(d);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(p,f.childCount),m=r&&r[c+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[c]||f;if(!f.canReplace(p+1,f.childCount)||!g.type.validContent(h))return!1}let o=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(o,o,l?l.type:s.node(i+1).type)}function uxe(t,e,n=1,r){let s=t.doc.resolve(e),i=Ze.empty,a=Ze.empty;for(let o=s.depth,l=s.depth-n,d=n-1;o>l;o--,d--){i=Ze.from(s.node(o).copy(i));let c=r&&r[d];a=Ze.from(c?c.type.create(c.attrs,a):s.node(o).copy(a))}t.step(new vs(e,e,new gt(i.append(a),n,n),!0))}function qc(t,e){let n=t.resolve(e),r=n.index();return $X(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function dxe(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),a=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(a),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function $X(t,e){return!!(t&&e&&!t.isLeaf&&dxe(t,e))}function cC(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,a,o=r.index(s);if(s==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(s+1),o++,a=r.node(s).maybeChild(o)):(i=r.node(s).maybeChild(o-1),a=r.node(s+1)),i&&!i.isTextblock&&$X(i,a)&&r.node(s).canReplace(o,o+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function cxe(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),a=i.node().type;if(s&&a.inlineContent){let c=a.whitespace=="pre",f=!!a.contentMatch.matchType(s);c&&!f?r=!1:!c&&f&&(r=!0)}let o=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);TX(t,c.node(),c.before(),o)}a.inlineContent&&DR(t,e+n-1,a,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(o),d=l.map(e-n);if(t.step(new vs(d,l.map(e+n,-1),gt.empty,!0)),r===!0){let c=t.doc.resolve(d);AX(t,c.node(),c.before(),t.steps.length)}return t}function fxe(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function MX(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let a=r.depth;a>=0;a--){let o=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(o>0?1:0),d=r.node(a),c=!1;if(i==1)c=d.canReplace(l,l,s);else{let f=d.contentMatchAt(l).findWrapping(s.firstChild.type);c=f&&d.canReplaceWith(l,l,f[0])}if(c)return o==0?r.pos:o<0?r.before(a+1):r.after(a+1)}return null}function fC(t,e,n=e,r=gt.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return EX(s,i,r)?new vs(e,n,r):new pxe(s,i,r).fit()}function EX(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class pxe{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ze.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Ze.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,a=r.depth,o=s.depth;for(;a&&o&&i.childCount==1;)i=i.firstChild.content,a--,o--;let l=new gt(i,a,o);return e>-1?new _s(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new vs(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=f4(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let a=s.firstChild;for(let o=this.depth;o>=0;o--){let{type:l,match:d}=this.frontier[o],c,f=null;if(n==1&&(a?d.matchType(a.type)||(f=d.fillBefore(Ze.from(a),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:o,parent:i,inject:f};if(n==2&&a&&(c=d.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:o,parent:i,wrap:c};if(i&&d.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=f4(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new gt(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=f4(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new gt(uy(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new gt(uy(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let g=0;g<i.length;g++)this.openFrontierNode(i[g]);let a=this.unplaced,o=r?r.content:a.content,l=a.openStart-e,d=0,c=[],{match:f,type:p}=this.frontier[n];if(s){for(let g=0;g<s.childCount;g++)c.push(s.child(g));f=f.matchFragment(s)}let h=o.size+e-(a.content.size-a.openEnd);for(;d<o.childCount;){let g=o.child(d),y=f.matchType(g.type);if(!y)break;d++,(d>1||l==0||g.content.size)&&(f=y,c.push(DX(g.mark(p.allowedMarks(g.marks)),d==1?l:0,d==o.childCount?h:-1)))}let m=d==o.childCount;m||(h=-1),this.placed=dy(this.placed,n,Ze.from(c)),this.frontier[n].match=f,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=o;g<h;g++){let x=y.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),y=x.content}this.unplaced=m?e==0?gt.empty:new gt(uy(a.content,e-1,1),e-1,h<0?a.openEnd:e-1):new gt(uy(a.content,e,d),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!p4(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),a=p4(e,n,s,r,i);if(a){for(let o=n-1;o>=0;o--){let{match:l,type:d}=this.frontier[o],c=p4(e,o,d,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:a,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=dy(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=dy(this.placed,this.depth,Ze.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ze.empty,!0);n.childCount&&(this.placed=dy(this.placed,this.frontier.length,n))}}function uy(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(uy(t.firstChild.content,e-1,n)))}function dy(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(dy(t.lastChild.content,e-1,n)))}function f4(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function DX(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,DX(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ze.empty,!0)))),t.copy(r)}function p4(t,e,n,r,s){let i=t.node(e),a=s?t.indexAfter(e):t.index(e);if(a==i.childCount&&!n.compatibleContent(i.type))return null;let o=r.fillBefore(i.content,!0,a);return o&&!hxe(n,i.content,a)?o:null}function hxe(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function mxe(t){return t.spec.defining||t.spec.definingForContent}function gxe(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(EX(s,i,r))return t.step(new vs(e,n,r));let a=PX(s,i);a[a.length-1]==0&&a.pop();let o=-(s.depth+1);a.unshift(o);for(let p=s.depth,h=s.pos-1;p>0;p--,h--){let m=s.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;a.indexOf(p)>-1?o=p:s.before(p)==h&&a.splice(1,0,-p)}let l=a.indexOf(o),d=[],c=r.openStart;for(let p=r.content,h=0;;h++){let m=p.firstChild;if(d.push(m),h==r.openStart)break;p=m.content}for(let p=c-1;p>=0;p--){let h=d[p],m=mxe(h.type);if(m&&!h.sameMarkup(s.node(Math.abs(o)-1)))c=p;else if(m||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+c+1)%(r.openStart+1),m=d[h];if(m)for(let g=0;g<a.length;g++){let y=a[(g+l)%a.length],x=!0;y<0&&(x=!1,y=-y);let _=s.node(y-1),k=s.index(y-1);if(_.canReplaceWith(k,k,m.type,m.marks))return t.replace(s.before(y),x?i.after(y):n,new gt(RX(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let p=a.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>f));p--){let h=a[p];h<0||(e=s.before(h),n=i.after(h))}}function RX(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(RX(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),a=i.fillBefore(t).append(t);t=a.append(i.matchFragment(a).fillBefore(Ze.empty,!0))}return t}function vxe(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=fxe(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new gt(Ze.from(r),0,0))}function yxe(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=PX(r,s);for(let a=0;a<i.length;a++){let o=i[a],l=a==i.length-1;if(l&&o==0||r.node(o).type.contentMatch.validEnd)return t.delete(r.start(o),s.end(o));if(o>0&&(l||r.node(o-1).canReplace(r.index(o-1),s.indexAfter(o-1))))return t.delete(r.before(o),s.after(o))}for(let a=1;a<=r.depth&&a<=s.depth;a++)if(e-r.start(a)==r.depth-a&&n>r.end(a)&&s.end(a)-n!=s.depth-a&&r.start(a-1)==s.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),s.index(a-1)))return t.delete(r.before(a),n);t.delete(e,n)}function PX(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class Vm extends oi{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xr.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Xr.fromReplace(e,this.pos,this.pos+1,new gt(Ze.from(s),0,n.isLeaf?0:1))}getMap(){return oa.empty}invert(e){return new Vm(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Vm(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Vm(n.pos,n.attr,n.value)}}oi.jsonID("attr",Vm);class X0 extends oi{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Xr.ok(r)}getMap(){return oa.empty}invert(e){return new X0(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new X0(n.attr,n.value)}}oi.jsonID("docAttr",X0);let sg=class extends Error{};sg=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};sg.prototype=Object.create(Error.prototype);sg.prototype.constructor=sg;sg.prototype.name="TransformError";class PR{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new K0}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new sg(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=gt.empty){let s=fC(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new gt(Ze.from(r),0,0))}delete(e,n){return this.replace(e,n,gt.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return gxe(this,e,n,r),this}replaceRangeWith(e,n,r){return vxe(this,e,n,r),this}deleteRange(e,n){return yxe(this,e,n),this}lift(e,n){return nxe(this,e,n),this}join(e,n=1){return cxe(this,e,n),this}wrap(e,n){return ixe(this,e,n),this}setBlockType(e,n=e,r,s=null){return axe(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return lxe(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Vm(e,n,r)),this}setDocAttribute(e,n){return this.step(new X0(e,n)),this}addNodeMark(e,n){return this.step(new ec(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof ir)n.isInSet(r.marks)&&this.step(new zp(e,n));else{let s=r.marks,i,a=[];for(;i=n.isInSet(s);)a.push(new zp(e,i)),s=i.removeFromSet(s);for(let o=a.length-1;o>=0;o--)this.step(a[o])}return this}split(e,n=1,r){return uxe(this,e,n,r),this}addMark(e,n,r){return Jbe(this,e,n,r),this}removeMark(e,n,r){return exe(this,e,n,r),this}clearIncompatible(e,n,r){return DR(this,e,n,r),this}}const h4=Object.create(null);class Yt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new IX(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=gt.empty){let r=n.content.lastChild,s=null;for(let o=0;o<n.openEnd;o++)s=r,r=r.lastChild;let i=e.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:l,$to:d}=a[o],c=e.mapping.slice(i);e.replaceRange(c.map(l.pos),c.map(d.pos),o?gt.empty:n),o==0&&eV(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:a,$to:o}=s[i],l=e.mapping.slice(r),d=l.map(a.pos),c=l.map(o.pos);i?e.deleteRange(d,c):(e.replaceRangeWith(d,c,n),eV(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new Wt(e):pm(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let a=n<0?pm(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):pm(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(a)return a}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ga(e.node(0))}static atStart(e){return pm(e,e,0,0,1)||new ga(e)}static atEnd(e){return pm(e,e,e.content.size,e.childCount,-1)||new ga(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=h4[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in h4)throw new RangeError("Duplicate use of selection JSON ID "+e);return h4[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Wt.between(this.$anchor,this.$head).getBookmark()}}Yt.prototype.visible=!0;class IX{constructor(e,n){this.$from=e,this.$to=n}}let Z8=!1;function J8(t){!Z8&&!t.parent.inlineContent&&(Z8=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Wt extends Yt{constructor(e,n=e){J8(e),J8(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Yt.near(r);let s=e.resolve(n.map(this.anchor));return new Wt(s.parent.inlineContent?s:r,r)}replace(e,n=gt.empty){if(super.replace(e,n),n==gt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Wt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new pC(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Wt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=Yt.findFrom(n,r,!0)||Yt.findFrom(n,-r,!0);if(i)n=i.$head;else return Yt.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(Yt.findFrom(e,-r,!0)||Yt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new Wt(e,n)}}Yt.jsonID("text",Wt);class pC{constructor(e,n){this.anchor=e,this.head=n}map(e){return new pC(e.map(this.anchor),e.map(this.head))}resolve(e){return Wt.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ft extends Yt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?Yt.near(i):new Ft(i)}content(){return new gt(Ze.from(this.node),0,0)}eq(e){return e instanceof Ft&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new IR(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ft(e.resolve(n.anchor))}static create(e,n){return new Ft(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ft.prototype.visible=!1;Yt.jsonID("node",Ft);class IR{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new pC(r,r):new IR(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ft.isSelectable(r)?new Ft(n):Yt.near(n)}}class ga extends Yt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=gt.empty){if(n==gt.empty){e.delete(0,e.doc.content.size);let r=Yt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ga(e)}map(e){return new ga(e)}eq(e){return e instanceof ga}getBookmark(){return bxe}}Yt.jsonID("all",ga);const bxe={map(){return this},resolve(t){return new ga(t)}};function pm(t,e,n,r,s,i=!1){if(e.inlineContent)return Wt.create(t,n);for(let a=r-(s>0?0:1);s>0?a<e.childCount:a>=0;a+=s){let o=e.child(a);if(o.isAtom){if(!i&&Ft.isSelectable(o))return Ft.create(t,n-(s<0?o.nodeSize:0))}else{let l=pm(t,o,n+s,s<0?o.childCount:0,s,i);if(l)return l}n+=o.nodeSize*s}return null}function eV(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof vs||s instanceof _s))return;let i=t.mapping.maps[r],a;i.forEach((o,l,d,c)=>{a==null&&(a=c)}),t.setSelection(Yt.near(t.doc.resolve(a),n))}const tV=1,ux=2,nV=4;class xxe extends PR{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|tV)&~ux,this.storedMarks=null,this}get selectionSet(){return(this.updated&tV)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ux,this}ensureMarks(e){return ir.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ux)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~ux,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ir.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let a=this.doc.resolve(n);i=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Yt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=nV,this}get scrolledIntoView(){return(this.updated&nV)>0}}function rV(t,e){return!e||!t?t:t.bind(e)}class cy{constructor(e,n,r){this.name=e,this.init=rV(n.init,r),this.apply=rV(n.apply,r)}}const _xe=[new cy("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new cy("selection",{init(t,e){return t.selection||Yt.atStart(e.doc)},apply(t){return t.selection}}),new cy("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new cy("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class m4{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=_xe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new cy(r.key,r.spec.state,r))})}}class Cm{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let a=0;a<this.config.plugins.length;a++){let o=this.config.plugins[a];if(o.spec.appendTransaction){let l=s?s[a].n:0,d=s?s[a].state:this,c=l<n.length&&o.spec.appendTransaction.call(o,l?n.slice(l):n,d,r);if(c&&r.filterTransaction(c,a)){if(c.setMeta("appendedTransaction",e),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<a?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),i=!0}s&&(s[a]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Cm(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new xxe(this)}static create(e){let n=new m4(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Cm(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new m4(this.schema,e.plugins),r=n.fields,s=new Cm(n);for(let i=0;i<r.length;i++){let a=r[i].name;s[a]=this.hasOwnProperty(a)?this[a]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new m4(e.schema,e.plugins),i=new Cm(s);return s.fields.forEach(a=>{if(a.name=="doc")i.doc=yc.fromJSON(e.schema,n.doc);else if(a.name=="selection")i.selection=Yt.fromJSON(i.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let o in r){let l=r[o],d=l.spec.state;if(l.key==a.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){i[a.name]=d.fromJSON.call(l,e,n[o],i);return}}i[a.name]=a.init(e,i)}}),i}}function OX(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=OX(s,e,{})),n[r]=s}return n}class Vn{constructor(e){this.spec=e,this.props={},e.props&&OX(e.props,this,this.props),this.key=e.key?e.key.key:LX("plugin")}getState(e){return e[this.key]}}const g4=Object.create(null);function LX(t){return t in g4?t+"$"+ ++g4[t]:(g4[t]=0,t+"$")}class Hn{constructor(e="key"){this.key=LX(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Rs=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ig=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let D$=null;const wu=function(t,e,n){let r=D$||(D$=document.createRange());return r.setEnd(t,n==null?t.nodeValue.length:n),r.setStart(t,e||0),r},wxe=function(){D$=null},Up=function(t,e,n,r){return n&&(sV(t,e,n,r,-1)||sV(t,e,n,r,1))},kxe=/^(img|br|input|textarea|hr)$/i;function sV(t,e,n,r,s){for(var i;;){if(t==n&&e==r)return!0;if(e==(s<0?0:Ha(t))){let a=t.parentNode;if(!a||a.nodeType!=1||mb(t)||kxe.test(t.nodeName)||t.contentEditable=="false")return!1;e=Rs(t)+(s<0?0:1),t=a}else if(t.nodeType==1){let a=t.childNodes[e+(s<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((i=a.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=a,e=s<0?Ha(t):0}else return!1}}function Ha(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Sxe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ha(t)}else if(t.parentNode&&!mb(t))e=Rs(t),t=t.parentNode;else return null}}function Cxe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!mb(t))e=Rs(t)+1,t=t.parentNode;else return null}}function Axe(t,e,n){for(let r=e==0,s=e==Ha(t);r||s;){if(t==n)return!0;let i=Rs(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==Ha(t)}}function mb(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const hC=function(t){return t.focusNode&&Up(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Gf(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Txe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $xe(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Ha(r.offsetNode),r.offset)}}catch(r){}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Ha(r.startContainer),r.startOffset)}}}const Nl=typeof navigator!="undefined"?navigator:null,iV=typeof document!="undefined"?document:null,Wc=Nl&&Nl.userAgent||"",R$=/Edge\/(\d+)/.exec(Wc),VX=/MSIE \d/.exec(Wc),P$=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Wc),Xi=!!(VX||P$||R$),bc=VX?document.documentMode:P$?+P$[1]:R$?+R$[1]:0,Za=!Xi&&/gecko\/(\d+)/i.test(Wc);Za&&+(/Firefox\/(\d+)/.exec(Wc)||[0,0])[1];const I$=!Xi&&/Chrome\/(\d+)/.exec(Wc),ti=!!I$,NX=I$?+I$[1]:0,Ci=!Xi&&!!Nl&&/Apple Computer/.test(Nl.vendor),ag=Ci&&(/Mobile\/\w+/.test(Wc)||!!Nl&&Nl.maxTouchPoints>2),Va=ag||(Nl?/Mac/.test(Nl.platform):!1),Mxe=Nl?/Win/.test(Nl.platform):!1,Iu=/Android \d/.test(Wc),gb=!!iV&&"webkitFontSmoothing"in iV.documentElement.style,Exe=gb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Dxe(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function lu(t,e){return typeof t=="number"?t:t[e]}function Rxe(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function aV(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let a=n||t.dom;a;){if(a.nodeType!=1){a=ig(a);continue}let o=a,l=o==i.body,d=l?Dxe(i):Rxe(o),c=0,f=0;if(e.top<d.top+lu(r,"top")?f=-(d.top-e.top+lu(s,"top")):e.bottom>d.bottom-lu(r,"bottom")&&(f=e.bottom-e.top>d.bottom-d.top?e.top+lu(s,"top")-d.top:e.bottom-d.bottom+lu(s,"bottom")),e.left<d.left+lu(r,"left")?c=-(d.left-e.left+lu(s,"left")):e.right>d.right-lu(r,"right")&&(c=e.right-d.right+lu(s,"right")),c||f)if(l)i.defaultView.scrollBy(c,f);else{let h=o.scrollLeft,m=o.scrollTop;f&&(o.scrollTop+=f),c&&(o.scrollLeft+=c);let g=o.scrollLeft-h,y=o.scrollTop-m;e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y}}let p=l?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(p))break;a=p=="absolute"?a.offsetParent:ig(a)}}function Pxe(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,a=n+1;a<Math.min(innerHeight,e.bottom);a+=5){let o=t.root.elementFromPoint(i,a);if(!o||o==t.dom||!t.dom.contains(o))continue;let l=o.getBoundingClientRect();if(l.top>=n-20){r=o,s=l.top;break}}return{refDOM:r,refTop:s,stack:jX(t.dom)}}function jX(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ig(r));return e}function Ixe({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;FX(n,r==0?0:r-e)}function FX(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Ih=null;function Oxe(t){if(t.setActive)return t.setActive();if(Ih)return t.focus(Ih);let e=jX(t);t.focus(Ih==null?{get preventScroll(){return Ih={preventScroll:!0},!0}}:void 0),Ih||(Ih=!1,FX(e,0))}function BX(t,e){let n,r=2e8,s,i=0,a=e.top,o=e.top,l,d;for(let c=t.firstChild,f=0;c;c=c.nextSibling,f++){let p;if(c.nodeType==1)p=c.getClientRects();else if(c.nodeType==3)p=wu(c).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=a&&m.bottom>=o){a=Math.max(m.bottom,a),o=Math.min(m.top,o);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=c,r=g,s=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,c.nodeType==1&&g&&(i=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=c,d={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=f+1)}}return!n&&l&&(n=l,s=d,r=0),n&&n.nodeType==3?Lxe(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:BX(n,s)}function Lxe(t,e){let n=t.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let i=Nd(r,1);if(i.top!=i.bottom&&OR(e,i))return{node:t,offset:s+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function OR(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Vxe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Nxe(t,e,n){let{node:r,offset:s}=BX(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();i=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function jxe(t,e,n,r){let s=-1;for(let i=e,a=!1;i!=t.dom;){let o=t.docView.nearestDesc(i,!0),l;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((l=o.dom.getBoundingClientRect()).width||l.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!a&&l.left>r.left||l.top>r.top?s=o.posBefore:(!a&&l.right<r.left||l.bottom<r.top)&&(s=o.posAfter),a=!0),!o.contentDOM&&s<0&&!o.node.isText))return(o.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?o.posBefore:o.posAfter;i=o.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function zX(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let a=t.childNodes[i];if(a.nodeType==1){let o=a.getClientRects();for(let l=0;l<o.length;l++){let d=o[l];if(OR(e,d))return zX(a,e,d)}}if((i=(i+1)%r)==s)break}return t}function Fxe(t,e){let n=t.dom.ownerDocument,r,s=0,i=$xe(n,e.left,e.top);i&&({node:r,offset:s}=i);let a=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),o;if(!a||!t.dom.contains(a.nodeType!=1?a.parentNode:a)){let d=t.dom.getBoundingClientRect();if(!OR(e,d)||(a=zX(t.dom,e,d),!a))return null}if(Ci)for(let d=a;r&&d;d=ig(d))d.draggable&&(r=void 0);if(a=Vxe(a,e),r){if(Za&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let c=r.childNodes[s],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&s++}let d;gb&&s&&r.nodeType==1&&(d=r.childNodes[s-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(o=jxe(t,r,s,e))}o==null&&(o=Nxe(t,a,e));let l=t.docView.nearestDesc(a,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function oV(t){return t.top<t.bottom||t.left<t.right}function Nd(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(oV(r))return r}return Array.prototype.find.call(n,oV)||t.getBoundingClientRect()}const Bxe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function UX(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),a=gb||Za;if(r.nodeType==3)if(a&&(Bxe.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=Nd(wu(r,s,s),n);if(Za&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let d=Nd(wu(r,s-1,s-1),-1);if(d.top==l.top){let c=Nd(wu(r,s,s+1),-1);if(c.top!=l.top)return pv(c,c.left<d.left)}}return l}else{let l=s,d=s,c=n<0?1:-1;return n<0&&!s?(d++,c=-1):n>=0&&s==r.nodeValue.length?(l--,c=1):n<0?l--:d++,pv(Nd(wu(r,l,d),c),c<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==Ha(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return v4(l.getBoundingClientRect(),!1)}if(i==null&&s<Ha(r)){let l=r.childNodes[s];if(l.nodeType==1)return v4(l.getBoundingClientRect(),!0)}return v4(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==Ha(r))){let l=r.childNodes[s-1],d=l.nodeType==3?wu(l,Ha(l)-(a?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(d)return pv(Nd(d,1),!1)}if(i==null&&s<Ha(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let d=l?l.nodeType==3?wu(l,0,a?0:1):l.nodeType==1?l:null:null;if(d)return pv(Nd(d,-1),!0)}return pv(Nd(r.nodeType==3?wu(r):r,-n),n>=0)}function pv(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function v4(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function HX(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function zxe(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return HX(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let o=t.docView.nearestDesc(i,!0);if(!o)break;if(o.node.isBlock){i=o.contentDOM||o.dom;break}i=o.dom.parentNode}let a=UX(t,s.pos,1);for(let o=i.firstChild;o;o=o.nextSibling){let l;if(o.nodeType==1)l=o.getClientRects();else if(o.nodeType==3)l=wu(o,0,o.nodeValue.length).getClientRects();else continue;for(let d=0;d<l.length;d++){let c=l[d];if(c.bottom>c.top+1&&(n=="up"?a.top-c.top>(c.bottom-a.top)*2:c.bottom-a.bottom>(a.bottom-c.top)*2))return!1}}return!0})}const Uxe=/[\u0590-\u08ac]/;function Hxe(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,a=s==r.parent.content.size,o=t.domSelection();return o?!Uxe.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?i:a:HX(t,e,()=>{let{focusNode:l,focusOffset:d,anchorNode:c,anchorOffset:f}=t.domSelectionRange(),p=o.caretBidiLevel;o.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),y=m&&!h.contains(m.nodeType==1?m:m.parentNode)||l==m&&d==g;try{o.collapse(c,f),l&&(l!=c||d!=f)&&o.extend&&o.extend(l,d)}catch(x){}return p!=null&&(o.caretBidiLevel=p),y}):r.pos==r.start()||r.pos==r.end()}let lV=null,uV=null,dV=!1;function qxe(t,e,n){return lV==e&&uV==n?dV:(lV=e,uV=n,dV=n=="up"||n=="down"?zxe(t,e,n):Hxe(t,e,n))}const Ja=0,cV=1,np=2,jl=3;class vb{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Ja,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,a;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((a=i.pmViewDesc)&&a.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(a)+a.size:this.posAtStart}else{let i,a;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((a=i.pmViewDesc)&&a.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>Rs(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return(s==null?r>0:s)?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),a;if(i&&(!n||i.node))if(r&&(a=i.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let a=0;a<s.children.length;a++){let o=s.children[a];if(o.size){s=o;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let a=this.children[r],o=i+a.size;if(o>e||a instanceof WX){s=e-i;break}i=o}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof qX&&i.side>=0;r--);if(n<=0){let i,a=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,a=!1);return i&&n&&a&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Rs(i.dom)+1:0}}else{let i,a=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,a=!1);return i&&a&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Rs(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let a=r,o=0;;o++){let l=this.children[o],d=a+l.size;if(s==-1&&e<=d){let c=a+l.border;if(e>=c&&n<=d-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,c);e=a;for(let f=o;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){s=Rs(p.dom)+1;break}e-=p.size}s==-1&&(s=0)}if(s>-1&&(d>n||o==this.children.length-1)){n=d;for(let c=o+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=Rs(f.dom);break}n+=f.size}i==-1&&(i=this.contentDOM.childNodes.length);break}a=d}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),a=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let g=this.children[h],y=m+g.size;if(i>m&&a<y)return g.setSelection(e-m-g.border,n-m-g.border,r,s);m=y}let o=this.domFromPos(e,e?-1:1),l=n==e?o:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),c=r.domSelectionRange(),f=!1;if((Za||Ci)&&e==n){let{node:h,offset:m}=o;if(h.nodeType==3){if(f=!!(m&&h.nodeValue[m-1]==`
`),f&&m==h.nodeValue.length)for(let g=h,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(o=l={node:y.parentNode,offset:Rs(y)+1});break}let x=g.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let g=h.childNodes[m-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Za&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(s=!0)}if(!(s||f&&Ci)&&Up(o.node,o.offset,c.anchorNode,c.anchorOffset)&&Up(l.node,l.offset,c.focusNode,c.focusOffset))return;let p=!1;if((d.extend||e==n)&&!(f&&Za)){d.collapse(o.node,o.offset);try{e!=n&&d.extend(l.node,l.offset),p=!0}catch(h){}}if(!p){if(e>n){let m=o;o=l,l=m}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(o.node,o.offset),d.removeAllRanges(),d.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],a=r+i.size;if(r==a?e<=a&&n>=r:e<a&&n>r){let o=r+i.border,l=a-i.border;if(e>=o&&n<=l){this.dirty=e==r||n==a?np:cV,e==o&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=jl:i.markDirty(e-o,n-o);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?np:jl}r=a}this.dirty=np}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?np:cV;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class qX extends vb{constructor(e,n,r,s){let i,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(a.nodeType!=1){let o=document.createElement("span");o.appendChild(a),a=o}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==Ja&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Wxe extends vb{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Hp extends vb{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],a=i&&i(n,s,r);return(!a||!a.dom)&&(a=uh.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Hp(e,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&jl||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=jl&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ja){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ja}}slice(e,n,r){let s=Hp.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;n<a&&(i=L$(i,n,a,r)),e>0&&(i=L$(i,0,e,r));for(let o=0;o<i.length;o++)i[o].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class xc extends vb{constructor(e,n,r,s,i,a,o,l,d){super(e,[],i,a),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=o}static create(e,n,r,s,i,a){let o=i.nodeViews[n.type.name],l,d=o&&o(n,i,()=>{if(!l)return a;if(l.parent)return l.parent.posBeforeChild(l)},r,s),c=d&&d.dom,f=d&&d.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=uh.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let p=c;return c=KX(c,r,n),d?l=new Gxe(e,n,r,s,c,f||null,p,d,i,a+1):n.isText?new mC(e,n,r,s,c,p,i):new xc(e,n,r,s,c,f||null,p,i,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ze.empty)}return e}matchesNode(e,n,r){return this.dirty==Ja&&e.eq(this.node)&&C2(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,a=i&&i.pos>-1?i:null,o=i&&i.pos<0,l=new Kxe(this,a&&a.node,e);Zxe(this.node,this.innerDeco,(d,c,f)=>{d.spec.marks?l.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!f&&l.syncToMarks(c==this.node.childCount?ir.none:this.node.child(c).marks,r,e),l.placeWidget(d,e,s)},(d,c,f,p)=>{l.syncToMarks(d.marks,r,e);let h;l.findNodeMatch(d,c,f,p)||o&&e.state.selection.from>s&&e.state.selection.to<s+d.nodeSize&&(h=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(d,c,f,h,e)||l.updateNextNode(d,c,f,e,p,s)||l.addNode(d,c,f,e,s),s+=d.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==np)&&(a&&this.protectLocalComposition(e,a),GX(this.contentDOM,this.children,e),ag&&Jxe(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof Wt)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let a=i.nodeValue,o=e_e(this.node.content,a,r-n,s-n);return o<0?null:{node:i,pos:o,text:a}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let a=new Wxe(this,i,n,s);e.input.compositionNodes.push(a),this.children=L$(this.children,r,r+s.length,e,a)}update(e,n,r,s){return this.dirty==jl||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Ja}updateOuterDeco(e){if(C2(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=YX(this.dom,this.nodeDOM,O$(this.outerDeco,this.node,n),O$(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function fV(t,e,n,r,s){KX(r,e,t);let i=new xc(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class mC extends xc{constructor(e,n,r,s,i,a,o){super(e,n,r,s,i,null,a,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==jl||this.dirty!=Ja&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ja||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Ja,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new mC(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=jl)}get domAtom(){return!1}isText(e){return this.node.text==e}}class WX extends vb{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ja&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Gxe extends xc{constructor(e,n,r,s,i,a,o,l,d,c){super(e,n,r,s,i,a,o,d,c),this.spec=l}update(e,n,r,s){if(this.dirty==jl)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function GX(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let a=e[i],o=a.dom;if(o.parentNode==t){for(;o!=r;)r=pV(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(o,r);if(a instanceof Hp){let l=r?r.previousSibling:t.lastChild;GX(a.contentDOM,a.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=pV(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const Gy=function(t){t&&(this.nodeName=t)};Gy.prototype=Object.create(null);const rp=[new Gy];function O$(t,e,n){if(t.length==0)return rp;let r=n?rp[0]:new Gy,s=[r];for(let i=0;i<t.length;i++){let a=t[i].type.attrs;if(a){a.nodeName&&s.push(r=new Gy(a.nodeName));for(let o in a){let l=a[o];l!=null&&(n&&s.length==1&&s.push(r=new Gy(e.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+l:o=="style"?r.style=(r.style?r.style+";":"")+l:o!="nodeName"&&(r[o]=l))}}}return s}function YX(t,e,n,r){if(n==rp&&r==rp)return e;let s=e;for(let i=0;i<r.length;i++){let a=r[i],o=n[i];if(i){let l;o&&o.nodeName==a.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==a.nodeName||(l=document.createElement(a.nodeName),l.pmIsDeco=!0,l.appendChild(s),o=rp[0]),s=l}Yxe(s,o||rp[0],a)}return s}function Yxe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function KX(t,e,n){return YX(t,t,rp,O$(e,n,t.nodeType!=1))}function C2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function pV(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Kxe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Xxe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,i=this.stack.length>>1,a=Math.min(i,e.length);for(;s<a&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=Ja,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let d=this.top.children[l];if(d.matchesMark(e[i])&&!this.isLocked(d.dom)){o=l;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let l=Hp.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,s){let i=-1,a;if(s>=this.preMatch.index&&(a=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&a.matchesNode(e,n,r))i=this.top.children.indexOf(a,this.index);else for(let o=this.index,l=Math.min(this.top.children.length,o+5);o<l;o++){let d=this.top.children[o];if(d.matchesNode(e,n,r)&&!this.preMatch.matched.has(d)){i=o;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let a=this.top.children[s];return a.dirty==jl&&a.dom==a.contentDOM&&(a.dirty=np),a.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,a){for(let o=this.index;o<this.top.children.length;o++){let l=this.top.children[o];if(l instanceof xc){let d=this.preMatch.matched.get(l);if(d!=null&&d!=i)return!1;let c=l.dom,f,p=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=jl&&C2(n,l.outerDeco));if(!p&&l.update(e,n,r,s))return this.destroyBetween(this.index,o),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,e,n,r,s,a)))return this.destroyBetween(this.index,o),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=np,f.updateChildren(s,a+1),f.dirty=Ja),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,a){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!C2(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let o=xc.create(this.top,n,r,s,i,a);if(o.contentDOM){o.children=e.children,e.children=[];for(let l of o.children)l.parent=o}return e.destroy(),o}addNode(e,n,r,s,i){let a=xc.create(this.top,e,n,r,s,i);a.contentDOM&&a.updateChildren(s,i+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new qX(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Hp;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof mC)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ci||ti)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new WX(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Xxe(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,a=[];e:for(;s>0;){let o;for(;;)if(r){let d=n.children[r-1];if(d instanceof Hp)n=d,r=d.children.length;else{o=d,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=o.node;if(l){if(l!=t.child(s-1))break;--s,i.set(o,s),a.push(o)}}return{index:s,matched:i,matches:a.reverse()}}function Qxe(t,e){return t.type.side-e.type.side}function Zxe(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let d=0;d<t.childCount;d++){let c=t.child(d);r(c,s,e.forChild(i,c),d),i+=c.nodeSize}return}let a=0,o=[],l=null;for(let d=0;;){let c,f;for(;a<s.length&&s[a].to==i;){let y=s[a++];y.widget&&(c?(f||(f=[c])).push(y):c=y)}if(c)if(f){f.sort(Qxe);for(let y=0;y<f.length;y++)n(f[y],d,!!l)}else n(c,d,!!l);let p,h;if(l)h=-1,p=l,l=null;else if(d<t.childCount)h=d,p=t.child(d++);else break;for(let y=0;y<o.length;y++)o[y].to<=i&&o.splice(y--,1);for(;a<s.length&&s[a].from<=i&&s[a].to>i;)o.push(s[a++]);let m=i+p.nodeSize;if(p.isText){let y=m;a<s.length&&s[a].from<y&&(y=s[a].from);for(let x=0;x<o.length;x++)o[x].to<y&&(y=o[x].to);y<m&&(l=p.cut(y-i),p=p.cut(0,y-i),m=y,h=-1)}else for(;a<s.length&&s[a].to<m;)a++;let g=p.isInline&&!p.isLeaf?o.filter(y=>!y.inline):o.slice();r(p,g,e.forChild(i,p),h),i=m}}function Jxe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function e_e(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let a=t.child(s++),o=i;if(i+=a.nodeSize,!a.isText)continue;let l=a.text;for(;s<t.childCount;){let d=t.child(s++);if(i+=d.nodeSize,!d.isText)break;l+=d.text}if(i>=n){if(i>=r&&l.slice(r-e.length-o,r-o)==e)return r-e.length;let d=o<r?l.lastIndexOf(e,r-o-1):-1;if(d>=0&&d+e.length+o>=n)return o+d;if(n==r&&l.length>=r+e.length-o&&l.slice(r-o,r-o+e.length)==e)return r}}return-1}function L$(t,e,n,r,s){let i=[];for(let a=0,o=0;a<t.length;a++){let l=t[a],d=o,c=o+=l.size;d>=n||c<=e?i.push(l):(d<e&&i.push(l.slice(0,e-d,r)),s&&(i.push(s),s=void 0),c>n&&i.push(l.slice(n-d,l.size,r)))}return i}function LR(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let o=r.resolve(a),l,d;if(hC(n)){for(l=a;s&&!s.node;)s=s.parent;let f=s.node;if(s&&f.isAtom&&Ft.isSelectable(f)&&s.parent&&!(f.isInline&&Axe(n.focusNode,n.focusOffset,s.dom))){let p=s.posBefore;d=new Ft(a==p?o:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=a,p=a;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[l,a]=p==t.state.selection.anchor?[p,f]:[f,p],o=r.resolve(a)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!d){let f=e=="pointer"||t.state.selection.head<o.pos&&!i?1:-1;d=VR(t,c,o,f)}return d}function XX(t){return t.editable?t.hasFocus():ZX(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Uu(t,e=!1){let n=t.state.selection;if(QX(t,n),!!XX(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&ti){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Up(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)n_e(t);else{let{anchor:r,head:s}=n,i,a;hV&&!(n instanceof Wt)&&(n.$from.parent.inlineContent||(i=mV(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=mV(t,n.to))),t.docView.setSelection(r,s,t,e),hV&&(i&&gV(i),a&&gV(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&t_e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const hV=Ci||ti&&NX<63;function mV(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Ci&&s&&s.contentEditable=="false")return y4(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return y4(s);if(i)return y4(i)}}function y4(t){return t.contentEditable="true",Ci&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function gV(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function t_e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!XX(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function n_e(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Rs(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Xi&&bc<=11&&(n.disabled=!0,n.disabled=!1)}function QX(t,e){if(e instanceof Ft){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(vV(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else vV(t)}function vV(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function VR(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||Wt.between(e,n,r)}function yV(t){return t.editable&&!t.hasFocus()?!1:ZX(t)}function ZX(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function r_e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Up(e.node,e.offset,n.anchorNode,n.anchorOffset)}function V$(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&Yt.findFrom(i,e)}function qd(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function bV(t,e,n){let r=t.state.selection;if(r instanceof Wt)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let a=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return qd(t,new Wt(r.$anchor,a))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=V$(t.state,e);return s&&s instanceof Ft?qd(t,s):!1}else if(!(Va&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,a;if(!i||i.isText)return!1;let o=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(a=t.docView.descAt(o))&&!a.contentDOM?Ft.isSelectable(i)?qd(t,new Ft(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):gb?qd(t,new Wt(t.state.doc.resolve(e<0?o:o+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ft&&r.node.isInline)return qd(t,new Wt(e>0?r.$to:r.$from));{let s=V$(t.state,e);return s?qd(t,s):!1}}}function A2(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Yy(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Oh(t,e){return e<0?s_e(t):i_e(t)}function s_e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,a=!1;for(Za&&n.nodeType==1&&r<A2(n)&&Yy(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if(Yy(o,-1))s=n,i=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(JX(n))break;{let o=n.previousSibling;for(;o&&Yy(o,-1);)s=n.parentNode,i=Rs(o),o=o.previousSibling;if(o)n=o,r=A2(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?N$(t,n,r):s&&N$(t,s,i)}function i_e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=A2(n),i,a;for(;;)if(r<s){if(n.nodeType!=1)break;let o=n.childNodes[r];if(Yy(o,1))i=n,a=++r;else break}else{if(JX(n))break;{let o=n.nextSibling;for(;o&&Yy(o,1);)i=o.parentNode,a=Rs(o)+1,o=o.nextSibling;if(o)n=o,r=0,s=A2(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&N$(t,i,a)}function JX(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function a_e(t,e){for(;t&&e==t.childNodes.length&&!mb(t);)e=Rs(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function o_e(t,e){for(;t&&!e&&!mb(t);)e=Rs(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function N$(t,e,n){if(e.nodeType!=3){let i,a;(a=a_e(e,n))?(e=a,n=0):(i=o_e(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(hC(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Uu(t)},50)}function xV(t,e){let n=t.state.doc.resolve(e);if(!(ti||Mxe)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),a=(i.top+i.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),a=(i.top+i.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function _V(t,e,n){let r=t.state.selection;if(r instanceof Wt&&!r.empty||n.indexOf("s")>-1||Va&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let a=V$(t.state,e);if(a&&a instanceof Ft)return qd(t,a)}if(!s.parent.inlineContent){let a=e<0?s:i,o=r instanceof ga?Yt.near(a,e):Yt.findFrom(a,e);return o?qd(t,o):!1}return!1}function wV(t,e){if(!(t.state.selection instanceof Wt))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let a=t.state.tr;return e<0?a.delete(n.pos-i.nodeSize,n.pos):a.delete(n.pos,n.pos+i.nodeSize),t.dispatch(a),!0}return!1}function kV(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function l_e(t){if(!Ci||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;kV(t,r,"true"),setTimeout(()=>kV(t,r,"false"),20)}return!1}function u_e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function d_e(t,e){let n=e.keyCode,r=u_e(e);if(n==8||Va&&n==72&&r=="c")return wV(t,-1)||Oh(t,-1);if(n==46&&!e.shiftKey||Va&&n==68&&r=="c")return wV(t,1)||Oh(t,1);if(n==13||n==27)return!0;if(n==37||Va&&n==66&&r=="c"){let s=n==37?xV(t,t.state.selection.from)=="ltr"?-1:1:-1;return bV(t,s,r)||Oh(t,s)}else if(n==39||Va&&n==70&&r=="c"){let s=n==39?xV(t,t.state.selection.from)=="ltr"?1:-1:1;return bV(t,s,r)||Oh(t,s)}else{if(n==38||Va&&n==80&&r=="c")return _V(t,-1,r)||Oh(t,-1);if(n==40||Va&&n==78&&r=="c")return l_e(t)||_V(t,1,r)||Oh(t,1);if(r==(Va?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function NR(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let a=t.someProp("clipboardSerializer")||uh.fromSchema(t.state.schema),o=iQ(),l=o.createElement("div");l.appendChild(a.serializeFragment(r,{document:o}));let d=l.firstChild,c,f=0;for(;d&&d.nodeType==1&&(c=sQ[d.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let m=o.createElement(c[h]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),f++}d=l.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${s} ${i}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:p,slice:e}}function eQ(t,e,n,r,s){let i=s.parent.type.spec.code,a,o;if(!n&&!e)return null;let l=!!e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",p=>{e=p(e,i||r,t)}),i)return o=new gt(Ze.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",p=>{o=p(o,t,!0)}),o;let f=t.someProp("clipboardTextParser",p=>p(e,s,r,t));if(f)o=f;else{let p=s.marks(),{schema:h}=t.state,m=uh.fromSchema(h);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=a.appendChild(document.createElement("p"));g&&y.appendChild(m.serializeNode(h.text(g,p)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),a=h_e(n),gb&&m_e(a);let d=a&&a.querySelector("[data-pm-slice]"),c=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let p=a.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;a=p}if(o||(o=(t.someProp("clipboardParser")||t.someProp("domParser")||xp.fromSchema(t.state.schema)).parseSlice(a,{preserveWhitespace:!!(l||c),context:s,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!c_e.test(p.parentNode.nodeName)?{ignore:!0}:null}})),c)o=g_e(SV(o,+c[1],+c[2]),c[4]);else if(o=gt.maxOpen(f_e(o.content,s),!0),o.openStart||o.openEnd){let f=0,p=0;for(let h=o.content.firstChild;f<o.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=o.content.lastChild;p<o.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);o=SV(o,f,p)}return t.someProp("transformPasted",f=>{o=f(o,t,l)}),o}const c_e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function f_e(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,a=[];if(t.forEach(o=>{if(!a)return;let l=s.findWrapping(o.type),d;if(!l)return a=null;if(d=a.length&&i.length&&nQ(l,i,o,a[a.length-1],0))a[a.length-1]=d;else{a.length&&(a[a.length-1]=rQ(a[a.length-1],i.length));let c=tQ(o,l);a.push(c),s=s.matchType(c.type),i=l}}),a)return Ze.from(a)}return t}function tQ(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ze.from(t));return t}function nQ(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=nQ(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(Ze.from(tQ(n,t,s+1))))}}function rQ(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,rQ(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ze.empty,!0);return t.copy(n.append(r))}function j$(t,e,n,r,s,i){let a=e<0?t.firstChild:t.lastChild,o=a.content;return t.childCount>1&&(i=0),s<r-1&&(o=j$(o,e,n,r,s+1,i)),s>=n&&(o=e<0?a.contentMatchAt(0).fillBefore(o,i<=s).append(o):o.append(a.contentMatchAt(a.childCount).fillBefore(Ze.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(o))}function SV(t,e,n){return e<t.openStart&&(t=new gt(j$(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new gt(j$(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const sQ={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let CV=null;function iQ(){return CV||(CV=document.implementation.createHTMLDocument("title"))}let b4=null;function p_e(t){let e=window.trustedTypes;return e?(b4||(b4=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),b4.createHTML(t)):t}function h_e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=iQ().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&sQ[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=p_e(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function m_e(t){let e=t.querySelectorAll(ti?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function g_e(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch(o){return t}let{content:s,openStart:i,openEnd:a}=t;for(let o=r.length-2;o>=0;o-=2){let l=n.nodes[r[o]];if(!l||l.hasRequiredAttrs())break;s=Ze.from(l.create(r[o+1],s)),i++,a++}return new gt(s,i,a)}const Ai={},Ti={},v_e={touchstart:!0,touchmove:!0};class y_e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function b_e(t){for(let e in Ai){let n=Ai[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{__e(t,r)&&!jR(t,r)&&(t.editable||!(r.type in Ti))&&n(t,r)},v_e[e]?{passive:!0}:void 0)}Ci&&t.dom.addEventListener("input",()=>null),F$(t)}function tc(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function x_e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function F$(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>jR(t,r))})}function jR(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function __e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function w_e(t,e){!jR(t,e)&&Ai[e.type]&&(t.editable||!(e.type in Ti))&&Ai[e.type](t,e)}Ti.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!oQ(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Iu&&ti&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ag&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,Gf(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||d_e(t,n)?n.preventDefault():tc(t,"key")};Ti.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ti.keypress=(t,e)=>{let n=e;if(oQ(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Va&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Wt)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",a=>a(t,r.$from.pos,r.$to.pos,s,i))&&t.dispatch(i()),n.preventDefault()}};function gC(t){return{left:t.clientX,top:t.clientY}}function k_e(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function FR(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let a=i.depth+1;a>0;a--)if(t.someProp(e,o=>a>i.depth?o(t,n,i.nodeAfter,i.before(a),s,!0):o(t,n,i.node(a),i.before(a),s,!1)))return!0;return!1}function Nm(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function S_e(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ft.isSelectable(r)?(Nm(t,new Ft(n)),!0):!1}function C_e(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof Ft&&(r=n.node);let i=t.state.doc.resolve(e);for(let a=i.depth+1;a>0;a--){let o=a>i.depth?i.nodeAfter:i.node(a);if(Ft.isSelectable(o)){r&&n.$from.depth>0&&a>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(a);break}}return s!=null?(Nm(t,Ft.create(t.state.doc,s)),!0):!1}function A_e(t,e,n,r,s){return FR(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?C_e(t,n):S_e(t,n))}function T_e(t,e,n,r){return FR(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function $_e(t,e,n,r){return FR(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||M_e(t,n,r)}function M_e(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Nm(t,Wt.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i),o=s.before(i);if(a.inlineContent)Nm(t,Wt.create(r,o+1,o+1+a.content.size));else if(Ft.isSelectable(a))Nm(t,Ft.create(r,o));else continue;return!0}}function BR(t){return T2(t)}const aQ=Va?"metaKey":"ctrlKey";Ai.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=BR(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&k_e(n,t.input.lastClick)&&!n[aQ]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let a=t.posAtCoords(gC(n));a&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new E_e(t,a,n,!!r)):(i=="doubleClick"?T_e:$_e)(t,a.pos,a.inside,n)?n.preventDefault():tc(t,"pointer"))};class E_e{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[aQ],this.allowDefault=r.shiftKey;let i,a;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),a=n.inside;else{let c=e.state.doc.resolve(n.pos);i=c.parent,a=c.depth?c.before():0}const o=s?null:r.target,l=o?e.docView.nearestDesc(o,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:d}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||d instanceof Ft&&d.from<=a&&d.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Za&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),tc(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Uu(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(gC(e))),this.updateAllowDefault(e),this.allowDefault||!n?tc(this.view,"pointer"):A_e(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ci&&this.mightDrag&&!this.mightDrag.node.isAtom||ti&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Nm(this.view,Yt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):tc(this.view,"pointer")}move(e){this.updateAllowDefault(e),tc(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ai.touchstart=t=>{t.input.lastTouch=Date.now(),BR(t),tc(t,"pointer")};Ai.touchmove=t=>{t.input.lastTouch=Date.now(),tc(t,"pointer")};Ai.contextmenu=t=>BR(t);function oQ(t,e){return t.composing?!0:Ci&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const D_e=Iu?5e3:-1;Ti.compositionstart=Ti.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Wt&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),T2(t,!0),t.markCursor=null;else if(T2(t,!e.selection.empty),Za&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let a=i<0?s.lastChild:s.childNodes[i-1];if(!a)break;if(a.nodeType==3){let o=t.domSelection();o&&o.collapse(a,a.nodeValue.length);break}else s=a,i=-1}}t.input.composing=!0}lQ(t,D_e)};Ti.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,lQ(t,20))};function lQ(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>T2(t),e))}function uQ(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=P_e());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function R_e(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Sxe(e.focusNode,e.focusOffset),r=Cxe(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function P_e(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function T2(t,e=!1){if(!(Iu&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),uQ(t),e||t.docView&&t.docView.dirty){let n=LR(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function I_e(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Q0=Xi&&bc<15||ag&&Exe<604;Ai.copy=Ti.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=Q0?null:n.clipboardData,a=r.content(),{dom:o,text:l}=NR(t,a);i?(n.preventDefault(),i.clearData(),i.setData("text/html",o.innerHTML),i.setData("text/plain",l)):I_e(t,o),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function O_e(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function L_e(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Z0(t,r.value,null,s,e):Z0(t,r.textContent,r.innerHTML,s,e)},50)}function Z0(t,e,n,r,s){let i=eQ(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,i||gt.empty)))return!0;if(!i)return!1;let a=O_e(i),o=a?t.state.tr.replaceSelectionWith(a,r):t.state.tr.replaceSelection(i);return t.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function dQ(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ti.paste=(t,e)=>{let n=e;if(t.composing&&!Iu)return;let r=Q0?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Z0(t,dQ(r),r.getData("text/html"),s,n)?n.preventDefault():L_e(t,n)};class cQ{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const V_e=Va?"altKey":"ctrlKey";function fQ(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n!=null?n:!e[V_e]}Ai.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(gC(n)),a;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof Ft?s.to-1:s.to))){if(r&&r.mightDrag)a=Ft.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(a=Ft.create(t.state.doc,f.posBefore))}}let o=(a||t.state.selection).content(),{dom:l,text:d,slice:c}=NR(t,o);(!n.dataTransfer.files.length||!ti||NX>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Q0?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Q0||n.dataTransfer.setData("text/plain",d),t.dragging=new cQ(c,fQ(t,n),a)};Ai.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ti.dragover=Ti.dragenter=(t,e)=>e.preventDefault();Ti.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let s=t.posAtCoords(gC(n));if(!s)return;let i=t.state.doc.resolve(s.pos),a=r&&r.slice;a?t.someProp("transformPasted",m=>{a=m(a,t,!1)}):a=eQ(t,dQ(n.dataTransfer),Q0?null:n.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&fQ(t,n));if(t.someProp("handleDrop",m=>m(t,n,a||gt.empty,o))){n.preventDefault();return}if(!a)return;n.preventDefault();let l=a?MX(t.state.doc,i.pos,a):i.pos;l==null&&(l=i.pos);let d=t.state.tr;if(o){let{node:m}=r;m?m.replace(d):d.deleteSelection()}let c=d.mapping.map(l),f=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,p=d.doc;if(f?d.replaceRangeWith(c,c,a.content.firstChild):d.replaceRange(c,c,a),d.doc.eq(p))return;let h=d.doc.resolve(c);if(f&&Ft.isSelectable(a.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(a.content.firstChild))d.setSelection(new Ft(h));else{let m=d.mapping.map(l);d.mapping.maps[d.mapping.maps.length-1].forEach((g,y,x,_)=>m=_),d.setSelection(VR(t,h,d.doc.resolve(m)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))};Ai.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Uu(t)},20))};Ai.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ai.beforeinput=(t,e)=>{if(ti&&Iu&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Gf(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Ti)Ai[t]=Ti[t];function J0(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class $2{constructor(e,n){this.toDOM=e,this.spec=n||_p,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:a}=e.mapResult(n.from+s,this.side<0?-1:1);return a?null:new bs(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof $2&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&J0(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class _c{constructor(e,n){this.attrs=e,this.spec=n||_p}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,a=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=a?null:new bs(i,a,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof _c&&J0(this.attrs,e.attrs)&&J0(this.spec,e.spec)}static is(e){return e.type instanceof _c}destroy(){}}class zR{constructor(e,n){this.attrs=e,this.spec=n||_p}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let a=e.mapResult(n.to+s,-1);return a.deleted||a.pos<=i.pos?null:new bs(i.pos-r,a.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof zR&&J0(this.attrs,e.attrs)&&J0(this.spec,e.spec)}destroy(){}}class bs{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new bs(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new bs(e,e,new $2(n,r))}static inline(e,n,r,s){return new bs(e,n,new _c(r,s))}static node(e,n,r,s){return new bs(e,n,new zR(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof _c}get widget(){return this.type instanceof $2}}const hm=[],_p={};class _r{constructor(e,n){this.local=e.length?e:hm,this.children=n.length?n:hm}static create(e,n){return n.length?M2(n,e,0,_p):Ks}find(e,n,r){let s=[];return this.findInner(e==null?0:e,n==null?1e9:n,s,0,r),s}findInner(e,n,r,s,i){for(let a=0;a<this.local.length;a++){let o=this.local[a];o.from<=n&&o.to>=e&&(!i||i(o.spec))&&r.push(o.copy(o.from+s,o.to+s))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>e){let o=this.children[a]+1;this.children[a+2].findInner(e-o,n-o,r,s+o,i)}}map(e,n,r){return this==Ks||e.maps.length==0?this:this.mapInner(e,n,0,0,r||_p)}mapInner(e,n,r,s,i){let a;for(let o=0;o<this.local.length;o++){let l=this.local[o].map(e,r,s);l&&l.type.valid(n,l)?(a||(a=[])).push(l):i.onRemove&&i.onRemove(this.local[o].spec)}return this.children.length?N_e(this.children,a||[],e,n,r,s,i):a?new _r(a.sort(wp),hm):Ks}add(e,n){return n.length?this==Ks?_r.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((o,l)=>{let d=l+r,c;if(c=hQ(n,o,d)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(o,c,d+1):s.splice(i,0,l,l+o.nodeSize,M2(c,o,d+1,_p)),i+=3}});let a=pQ(i?mQ(n):n,-r);for(let o=0;o<a.length;o++)a[o].type.valid(e,a[o])||a.splice(o--,1);return new _r(a.length?this.local.concat(a).sort(wp):this.local,s||this.children)}remove(e){return e.length==0||this==Ks?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let a,o=r[i]+n,l=r[i+1]+n;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>o&&f.to<l&&(e[c]=null,(a||(a=[])).push(f));if(!a)continue;r==this.children&&(r=this.children.slice());let d=r[i+2].removeInner(a,o+1);d!=Ks?r[i+2]=d:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,a;i<e.length;i++)if(a=e[i])for(let o=0;o<s.length;o++)s[o].eq(a,n)&&(s==this.local&&(s=this.local.slice()),s.splice(o--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new _r(s,r):Ks}forChild(e,n){if(this==Ks)return this;if(n.isLeaf)return _r.empty;let r,s;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(r=this.children[o+2]);break}let i=e+1,a=i+n.content.size;for(let o=0;o<this.local.length;o++){let l=this.local[o];if(l.from<a&&l.to>i&&l.type instanceof _c){let d=Math.max(i,l.from)-i,c=Math.min(a,l.to)-i;d<c&&(s||(s=[])).push(l.copy(d,c))}}if(s){let o=new _r(s.sort(wp),hm);return r?new Xd([o,r]):o}return r||Ks}eq(e){if(this==e)return!0;if(!(e instanceof _r)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return UR(this.localsInner(e))}localsInner(e){if(this==Ks)return hm;if(e.inlineContent||!this.local.some(_c.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof _c||n.push(this.local[r]);return n}forEachSet(e){e(this)}}_r.empty=new _r([],[]);_r.removeOverlap=UR;const Ks=_r.empty;class Xd{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,_p));return Xd.from(r)}forChild(e,n){if(n.isLeaf)return _r.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=Ks&&(i instanceof Xd?r=r.concat(i.members):r.push(i))}return Xd.from(r)}eq(e){if(!(e instanceof Xd)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let a=0;a<i.length;a++)n.push(i[a])}}return n?UR(r?n:n.sort(wp)):hm}static from(e){switch(e.length){case 0:return Ks;case 1:return e[0];default:return new Xd(e.every(n=>n instanceof _r)?e:e.reduce((n,r)=>n.concat(r instanceof _r?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function N_e(t,e,n,r,s,i,a){let o=t.slice();for(let d=0,c=i;d<n.maps.length;d++){let f=0;n.maps[d].forEach((p,h,m,g)=>{let y=g-m-(h-p);for(let x=0;x<o.length;x+=3){let _=o[x+1];if(_<0||p>_+c-f)continue;let k=o[x]+c-f;h>=k?o[x+1]=p<=k?-2:-1:p>=c&&y&&(o[x]+=y,o[x+1]+=y)}f+=y}),c=n.maps[d].map(c,-1)}let l=!1;for(let d=0;d<o.length;d+=3)if(o[d+1]<0){if(o[d+1]==-2){l=!0,o[d+1]=-1;continue}let c=n.map(t[d]+i),f=c-s;if(f<0||f>=r.content.size){l=!0;continue}let p=n.map(t[d+1]+i,-1),h=p-s,{index:m,offset:g}=r.content.findIndex(f),y=r.maybeChild(m);if(y&&g==f&&g+y.nodeSize==h){let x=o[d+2].mapInner(n,y,c+1,t[d]+i+1,a);x!=Ks?(o[d]=f,o[d+1]=h,o[d+2]=x):(o[d+1]=-2,l=!0)}else l=!0}if(l){let d=j_e(o,t,e,n,s,i,a),c=M2(d,r,0,a);e=c.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,p=0;f<c.children.length;f+=3){let h=c.children[f];for(;p<o.length&&o[p]<h;)p+=3;o.splice(p,0,c.children[f],c.children[f+1],c.children[f+2])}}return new _r(e.sort(wp),o)}function pQ(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new bs(s.from+e,s.to+e,s.type))}return n}function j_e(t,e,n,r,s,i,a){function o(l,d){for(let c=0;c<l.local.length;c++){let f=l.local[c].map(r,s,d);f?n.push(f):a.onRemove&&a.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)o(l.children[c+2],l.children[c]+d+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&o(t[l+2],e[l]+i+1);return n}function hQ(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,a;i<t.length;i++)(a=t[i])&&a.from>n&&a.to<r&&((s||(s=[])).push(a),t[i]=null);return s}function mQ(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function M2(t,e,n,r){let s=[],i=!1;e.forEach((o,l)=>{let d=hQ(t,o,l+n);if(d){i=!0;let c=M2(d,o,n+l+1,r);c!=Ks&&s.push(l,l+o.nodeSize,c)}});let a=pQ(i?mQ(t):t,-n).sort(wp);for(let o=0;o<a.length;o++)a[o].type.valid(e,a[o])||(r.onRemove&&r.onRemove(a[o].spec),a.splice(o--,1));return a.length||s.length?new _r(a,s):Ks}function wp(t,e){return t.from-e.from||t.to-e.to}function UR(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),AV(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),AV(e,s,r.copy(i.from,r.to)));break}}}return e}function AV(t,e,n){for(;e<t.length&&wp(n,t[e])>0;)e++;t.splice(e,0,n)}function x4(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ks&&e.push(r)}),t.cursorWrapper&&e.push(_r.create(t.state.doc,[t.cursorWrapper.deco])),Xd.from(e)}const F_e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},B_e=Xi&&bc<=11;class z_e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class U_e{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new z_e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Xi&&bc<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),B_e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,F_e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(yV(this.view)){if(this.suppressingSelectionUpdates)return Uu(this.view);if(Xi&&bc<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Up(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=ig(i))n.add(i);for(let i=e.anchorNode;i;i=ig(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&yV(e)&&!this.ignoreSelectionChange(r),i=-1,a=-1,o=!1,l=[];if(e.editable)for(let c=0;c<n.length;c++){let f=this.registerMutation(n[c],l);f&&(i=i<0?f.from:Math.min(f.from,i),a=a<0?f.to:Math.max(f.to,a),f.typeOver&&(o=!0))}if(Za&&l.length){let c=l.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,p]=c;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of c){let h=p.parentNode;h&&h.nodeName=="LI"&&(!f||W_e(e,f)!=h)&&p.remove()}}}let d=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&hC(r)&&(d=LR(e))&&d.eq(Yt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Uu(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,a),H_e(e)),this.handleDOMChange(i,a,o,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Uu(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Xi&&bc<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:p}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p)}let a=s&&s.parentNode==e.target?Rs(s)+1:0,o=r.localPosFromDOM(e.target,a,-1),l=i&&i.parentNode==e.target?Rs(i):e.target.childNodes.length,d=r.localPosFromDOM(e.target,l,1);return{from:o,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let TV=new WeakMap,$V=!1;function H_e(t){if(!TV.has(t)&&(TV.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Za,$V)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$V=!0}}function MV(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return Up(a.node,a.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function q_e(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return MV(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?MV(t,n):null}function W_e(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function G_e(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:a,to:o}=t.docView.parseRange(e,n),l=t.domSelectionRange(),d,c=l.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(d=[{node:c,offset:l.anchorOffset}],hC(l)||d.push({node:l.focusNode,offset:l.focusOffset})),ti&&t.input.lastKeyCode===8)for(let y=i;y>s;y--){let x=r.childNodes[y-1],_=x.pmViewDesc;if(x.nodeName=="BR"&&!_){i=y;break}if(!_||_.size)break}let f=t.state.doc,p=t.someProp("domParser")||xp.fromSchema(t.state.schema),h=f.resolve(a),m=null,g=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:Y_e,context:h});if(d&&d[0].pos!=null){let y=d[0].pos,x=d[1]&&d[1].pos;x==null&&(x=y),m={anchor:y+a,head:x+a}}return{doc:g,sel:m,from:a,to:o}}function Y_e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ci&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ci&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const K_e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function X_e(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let A=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,M=LR(t,A);if(M&&!t.state.selection.eq(M)){if(ti&&Iu&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",P=>P(t,Gf(13,"Enter"))))return;let E=t.state.tr.setSelection(M);A=="pointer"?E.setMeta("pointer",!0):A=="key"&&E.scrollIntoView(),i&&E.setMeta("composition",i),t.dispatch(E)}return}let a=t.state.doc.resolve(e),o=a.sharedDepth(n);e=a.before(o+1),n=t.state.doc.resolve(n).after(o+1);let l=t.state.selection,d=G_e(t,e,n),c=t.state.doc,f=c.slice(d.from,d.to),p,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,h="end"):(p=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=J_e(f.content,d.doc.content,d.from,p,h);if(m&&t.input.domChangeCount++,(ag&&t.input.lastIOSEnter>Date.now()-225||Iu)&&s.some(A=>A.nodeType==1&&!K_e.test(A.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",A=>A(t,Gf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof Wt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(d.sel){let A=EV(t,t.state.doc,d.sel);if(A&&!A.eq(t.state.selection)){let M=t.state.tr.setSelection(A);i&&M.setMeta("composition",i),t.dispatch(M)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Wt&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Xi&&bc<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>d.from&&d.doc.textBetween(m.start-d.from-1,m.start-d.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=d.doc.resolveNoCache(m.start-d.from),y=d.doc.resolveNoCache(m.endB-d.from),x=c.resolve(m.start),_=g.sameParent(y)&&g.parent.inlineContent&&x.end()>=m.endA;if((ag&&t.input.lastIOSEnter>Date.now()-225&&(!_||s.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!_&&g.pos<d.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&g.pos<y.pos&&!/\S/.test(d.doc.textBetween(g.pos,y.pos,"","")))&&t.someProp("handleKeyDown",A=>A(t,Gf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Z_e(c,m.start,m.endA,g,y)&&t.someProp("handleKeyDown",A=>A(t,Gf(8,"Backspace")))){Iu&&ti&&t.domObserver.suppressSelectionUpdates();return}ti&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Iu&&!_&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==m.endA&&(m.endB-=2,y=d.doc.resolveNoCache(m.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(A){return A(t,Gf(13,"Enter"))})},20));let k=m.start,w=m.endA,S=A=>{let M=A||t.state.tr.replace(k,w,d.doc.slice(m.start-d.from,m.endB-d.from));if(d.sel){let E=EV(t,M.doc,d.sel);E&&!(ti&&t.composing&&E.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(E.head==k||E.head==M.mapping.map(w)-1)||Xi&&E.empty&&E.head==k)&&M.setSelection(E)}return i&&M.setMeta("composition",i),M.scrollIntoView()},C;if(_)if(g.pos==y.pos){Xi&&bc<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Uu(t),20));let A=S(t.state.tr.delete(k,w)),M=c.resolve(m.start).marksAcross(c.resolve(m.endA));M&&A.ensureMarks(M),t.dispatch(A)}else if(m.endA==m.endB&&(C=Q_e(g.parent.content.cut(g.parentOffset,y.parentOffset),x.parent.content.cut(x.parentOffset,m.endA-x.start())))){let A=S(t.state.tr);C.type=="add"?A.addMark(k,w,C.mark):A.removeMark(k,w,C.mark),t.dispatch(A)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let A=g.parent.textBetween(g.parentOffset,y.parentOffset),M=()=>S(t.state.tr.insertText(A,k,w));t.someProp("handleTextInput",E=>E(t,k,w,A,M))||t.dispatch(M())}else t.dispatch(S());else t.dispatch(S())}function EV(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:VR(t,e.resolve(n.anchor),e.resolve(n.head))}function Q_e(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,a,o,l;for(let c=0;c<r.length;c++)s=r[c].removeFromSet(s);for(let c=0;c<n.length;c++)i=n[c].removeFromSet(i);if(s.length==1&&i.length==0)o=s[0],a="add",l=c=>c.mark(o.addToSet(c.marks));else if(s.length==0&&i.length==1)o=i[0],a="remove",l=c=>c.mark(o.removeFromSet(c.marks));else return null;let d=[];for(let c=0;c<e.childCount;c++)d.push(l(e.child(c)));if(Ze.from(d).eq(t))return{mark:o,type:a}}function Z_e(t,e,n,r,s){if(n-e<=s.pos-r.pos||_4(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let o=i.nodeAfter;return o!=null&&n==e+o.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let a=t.resolve(_4(i,!0,!0));return!a.parent.isTextblock||a.pos>n||_4(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function _4(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function J_e(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a,b:o}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(a,o));r-=a+l-i}if(a<i&&t.size<e.size){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<e.size&&DV(e.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}else if(o<i){let l=r<=i&&r>=o?i-r:0;i-=l,i&&i<t.size&&DV(t.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}return{start:i,endA:a,endB:o}}function DV(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class gQ{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new y_e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(LV),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=IV(this),PV(this),this.nodeViews=OV(this),this.docView=fV(this.state.doc,RV(this),x4(this),this.dom,this),this.domObserver=new U_e(this,(r,s,i,a)=>X_e(this,r,s,i,a)),this.domObserver.start(),b_e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&F$(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(LV),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,a=!1;e.storedMarks&&this.composing&&(uQ(this),a=!0),this.state=e;let o=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=OV(this);twe(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&F$(this),this.editable=IV(this),PV(this);let l=x4(this),d=RV(this),c=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(e.doc,d,l);(f||!e.selection.eq(s.selection))&&(a=!0);let p=c=="preserve"&&a&&this.dom.style.overflowAnchor==null&&Pxe(this);if(a){this.domObserver.stop();let h=f&&(Xi||ti)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&ewe(s.selection,e.selection);if(f){let m=ti?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=R_e(this)),(i||!this.docView.update(e.doc,d,l,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=fV(e.doc,d,l,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&r_e(this))?Uu(this,h):(QX(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():p&&Ixe(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ft){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&aV(this,n.getBoundingClientRect(),e)}else aV(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new cQ(e.slice,e.move,s<0?void 0:Ft.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let a=0;a<this.directPlugins.length;a++){let o=this.directPlugins[a].props[e];if(o!=null&&(s=n?n(o):o))return s}let i=this.state.plugins;if(i)for(let a=0;a<i.length;a++){let o=i[a].props[e];if(o!=null&&(s=n?n(o):o))return s}}hasFocus(){if(Xi){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Oxe(this.dom),Uu(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Fxe(this,e)}coordsAtPos(e,n=1){return UX(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return qxe(this,n||this.state,e)}pasteHTML(e,n){return Z0(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Z0(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return NR(this,e)}destroy(){this.docView&&(x_e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],x4(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,wxe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return w_e(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ci&&this.root.nodeType===11&&Txe(this.dom.ownerDocument)==this.dom&&q_e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}gQ.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function RV(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[bs.node(0,t.state.doc.content.size,e)]}function PV(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:bs.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function IV(t){return!t.someProp("editable",e=>e(t.state)===!1)}function ewe(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function OV(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function twe(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function LV(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Pc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E2={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nwe=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),rwe=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ps=0;Ps<10;Ps++)Pc[48+Ps]=Pc[96+Ps]=String(Ps);for(var Ps=1;Ps<=24;Ps++)Pc[Ps+111]="F"+Ps;for(var Ps=65;Ps<=90;Ps++)Pc[Ps]=String.fromCharCode(Ps+32),E2[Ps]=String.fromCharCode(Ps);for(var w4 in Pc)E2.hasOwnProperty(w4)||(E2[w4]=Pc[w4]);function swe(t){var e=nwe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||rwe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?E2:Pc)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const iwe=typeof navigator!="undefined"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),awe=typeof navigator!="undefined"&&/Win/.test(navigator.platform);function owe(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,a;for(let o=0;o<e.length-1;o++){let l=e[o];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))iwe?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),a&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function lwe(t){let e=Object.create(null);for(let n in t)e[owe(n)]=t[n];return e}function k4(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function uwe(t){return new Vn({props:{handleKeyDown:HR(t)}})}function HR(t){let e=lwe(t);return function(n,r){let s=swe(r),i,a=e[k4(s,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let o=e[k4(s,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(awe&&r.ctrlKey&&r.altKey)&&(i=Pc[r.keyCode])&&i!=s){let o=e[k4(i,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}const qR=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function vQ(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const yQ=(t,e,n)=>{let r=vQ(t,n);if(!r)return!1;let s=WR(r);if(!s){let a=r.blockRange(),o=a&&Pg(a);return o==null?!1:(e&&e(t.tr.lift(a,o).scrollIntoView()),!0)}let i=s.nodeBefore;if(TQ(t,s,e,-1))return!0;if(r.parent.content.size==0&&(og(i,"end")||Ft.isSelectable(i)))for(let a=r.depth;;a--){let o=fC(t.doc,r.before(a),r.after(a),gt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(og(i,"end")?Yt.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):Ft.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},dwe=(t,e,n)=>{let r=vQ(t,n);if(!r)return!1;let s=WR(r);return s?bQ(t,s,e):!1},cwe=(t,e,n)=>{let r=_Q(t,n);if(!r)return!1;let s=GR(r);return s?bQ(t,s,e):!1};function bQ(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let c=s.lastChild;if(!c)return!1;s=c}let a=e.nodeAfter,o=a,l=e.pos+1;for(;!o.isTextblock;l++){if(o.type.spec.isolating)return!1;let c=o.firstChild;if(!c)return!1;o=c}let d=fC(t.doc,i,l,gt.empty);if(!d||d.from!=i||d instanceof vs&&d.slice.size>=l-i)return!1;if(n){let c=t.tr.step(d);c.setSelection(Wt.create(c.doc,i)),n(c.scrollIntoView())}return!0}function og(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const xQ=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=WR(r)}let a=i&&i.nodeBefore;return!a||!Ft.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Ft.create(t.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)};function WR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function _Q(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const wQ=(t,e,n)=>{let r=_Q(t,n);if(!r)return!1;let s=GR(r);if(!s)return!1;let i=s.nodeAfter;if(TQ(t,s,e,1))return!0;if(r.parent.content.size==0&&(og(i,"start")||Ft.isSelectable(i))){let a=fC(t.doc,r.before(),r.after(),gt.empty);if(a&&a.slice.size<a.to-a.from){if(e){let o=t.tr.step(a);o.setSelection(og(i,"start")?Yt.findFrom(o.doc.resolve(o.mapping.map(s.pos)),1):Ft.create(o.doc,o.mapping.map(s.pos))),e(o.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},kQ=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=GR(r)}let a=i&&i.nodeAfter;return!a||!Ft.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Ft.create(t.doc,i.pos)).scrollIntoView()),!0)};function GR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const fwe=(t,e)=>{let n=t.selection,r=n instanceof Ft,s;if(r){if(n.node.isTextblock||!qc(t.doc,n.from))return!1;s=n.from}else if(s=cC(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(Ft.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},pwe=(t,e)=>{let n=t.selection,r;if(n instanceof Ft){if(n.node.isTextblock||!qc(t.doc,n.to))return!1;r=n.to}else if(r=cC(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},hwe=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&Pg(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},SQ=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function YR(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const mwe=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),a=YR(s.contentMatchAt(i));if(!a||!s.canReplaceWith(i,i,a))return!1;if(e){let o=n.after(),l=t.tr.replaceWith(o,o,a.createAndFill());l.setSelection(Yt.near(l.doc.resolve(o),1)),e(l.scrollIntoView())}return!0},CQ=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof ga||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=YR(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let a=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,o=t.tr.insert(a,i.createAndFill());o.setSelection(Wt.create(o.doc,a+1)),e(o.scrollIntoView())}return!0},AQ=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(zu(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Pg(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function gwe(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof Ft&&e.selection.node.isBlock)return!r.parentOffset||!zu(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],a,o,l=!1,d=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),d=r.start(h)==r.pos-(r.depth-h),o=YR(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),i.unshift(l&&o?{type:o}:null),a=h;break}else{if(h==1)return!1;i.unshift(null)}let c=e.tr;(e.selection instanceof Wt||e.selection instanceof ga)&&c.deleteSelection();let f=c.mapping.map(r.pos),p=zu(c.doc,f,i.length,i);if(p||(i[0]=o?{type:o}:null,p=zu(c.doc,f,i.length,i)),!p)return!1;if(c.split(f,i.length,i),!l&&d&&r.node(a).type!=o){let h=c.mapping.map(r.before(a)),m=c.doc.resolve(h);o&&r.node(a-1).canReplaceWith(m.index(),m.index()+1,o)&&c.setNodeMarkup(c.mapping.map(r.before(a)),o)}return n&&n(c.scrollIntoView()),!0}}const vwe=gwe(),ywe=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(Ft.create(t.doc,s))),!0)};function bwe(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||qc(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function TQ(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,a,o,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&bwe(t,e,n))return!0;let d=!l&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(a=(o=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&o.matchType(a[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,m=Ze.empty;for(let x=a.length-1;x>=0;x--)m=Ze.from(a[x].create(null,m));m=Ze.from(s.copy(m));let g=t.tr.step(new _s(e.pos-1,h,e.pos,h,new gt(m,1,0),a.length,!0)),y=g.doc.resolve(h+2*a.length);y.nodeAfter&&y.nodeAfter.type==s.type&&qc(g.doc,y.pos)&&g.join(y.pos),n(g.scrollIntoView())}return!0}let c=i.type.spec.isolating||r>0&&l?null:Yt.findFrom(e,1),f=c&&c.$from.blockRange(c.$to),p=f&&Pg(f);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(d&&og(i,"start",!0)&&og(s,"end")){let h=s,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let g=i,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let x=Ze.empty;for(let k=m.length-1;k>=0;k--)x=Ze.from(m[k].copy(x));let _=t.tr.step(new _s(e.pos-m.length,e.pos+i.nodeSize,e.pos+y,e.pos+i.nodeSize-y,new gt(x,m.length,0),0,!0));n(_.scrollIntoView())}return!0}}return!1}function $Q(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(Wt.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const xwe=$Q(-1),_we=$Q(1);function wwe(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,a=s.blockRange(i),o=a&&RR(a,t,e);return o?(r&&r(n.tr.wrap(a,o).scrollIntoView()),!0):!1}}function VV(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:a},$to:{pos:o}}=n.selection.ranges[i];n.doc.nodesBetween(a,o,(l,d)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let c=n.doc.resolve(d),f=c.index();s=c.parent.canReplaceWith(f,f+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[a];i.setBlockType(o,l,t,e)}r(i.scrollIntoView())}return!0}}function KR(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}KR(qR,yQ,xQ);KR(qR,wQ,kQ);KR(SQ,CQ,AQ,vwe);typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform&&os.platform()=="darwin";function kwe(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,a=s.blockRange(i);if(!a)return!1;let o=r?n.tr:null;return Swe(o,a,t,e)?(r&&r(o.scrollIntoView()),!0):!1}}function Swe(t,e,n,r=null){let s=!1,i=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=a.resolve(e.start-2);i=new k2(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new k2(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let o=RR(i,n,r,e);return o?(t&&Cwe(t,e,o,s,n),!0):!1}function Cwe(t,e,n,r,s){let i=Ze.empty;for(let c=n.length-1;c>=0;c--)i=Ze.from(n[c].type.create(n[c].attrs,i));t.step(new _s(e.start-(r?2:0),e.end,e.start,e.end,new gt(i,0,0),n.length,!0));let a=0;for(let c=0;c<n.length;c++)n[c].type==s&&(a=c+1);let o=n.length-a,l=e.start+n.length-(r?2:0),d=e.parent;for(let c=e.startIndex,f=e.endIndex,p=!0;c<f;c++,p=!1)!p&&zu(t.doc,l,o)&&(t.split(l,o),l+=2*o),l+=d.child(c).nodeSize;return t}function Awe(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,a=>a.childCount>0&&a.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?Twe(e,n,t,i):$we(e,n,i):!0:!1}}function Twe(t,e,n,r){let s=t.tr,i=r.end,a=r.$to.end(r.depth);i<a&&(s.step(new _s(i-1,a,i,a,new gt(Ze.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new k2(s.doc.resolve(r.$from.pos),s.doc.resolve(a),r.depth));const o=Pg(r);if(o==null)return!1;s.lift(r,o);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return qc(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function $we(t,e,n){let r=t.tr,s=n.parent;for(let h=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)h-=s.child(m).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(n.start),a=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,l=n.endIndex==s.childCount,d=i.node(-1),c=i.index(-1);if(!d.canReplace(c+(o?0:1),c+1,a.content.append(l?Ze.empty:Ze.from(s))))return!1;let f=i.pos,p=f+a.nodeSize;return r.step(new _s(f-(o?1:0),p+(l?1:0),f+1,p-1,new gt((o?Ze.empty:Ze.from(s.copy(Ze.empty))).append(l?Ze.empty:Ze.from(s.copy(Ze.empty))),o?0:1,l?0:1),o?0:1)),e(r.scrollIntoView()),!0}function Mwe(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,d=>d.childCount>0&&d.firstChild.type==t);if(!i)return!1;let a=i.startIndex;if(a==0)return!1;let o=i.parent,l=o.child(a-1);if(l.type!=t)return!1;if(n){let d=l.lastChild&&l.lastChild.type==o.type,c=Ze.from(d?t.create():null),f=new gt(Ze.from(t.create(null,Ze.from(o.type.create(null,c)))),d?3:1,0),p=i.start,h=i.end;n(e.tr.step(new _s(p-(d?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}function vC(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return ze(ge({},e),{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}})}class yC{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:s}=n,{tr:i}=r,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...c)=>{const f=l(...c)(a);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:s,state:i}=this,{view:a}=s,o=[],l=!!e,d=e||i.tr,c=()=>(!l&&n&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(d),o.every(p=>p===!0)),f=ze(ge({},Object.fromEntries(Object.entries(r).map(([p,h])=>[p,(...g)=>{const y=this.buildProps(d,n),x=h(...g)(y);return o.push(x),f}]))),{run:c});return f}createCan(e){const{rawCommands:n,state:r}=this,s=!1,i=e||r.tr,a=this.buildProps(i,s),o=Object.fromEntries(Object.entries(n).map(([l,d])=>[l,(...c)=>d(...c)(ze(ge({},a),{dispatch:void 0}))]));return ze(ge({},o),{chain:()=>this.createChain(i,s)})}buildProps(e,n=!0){const{rawCommands:r,editor:s,state:i}=this,{view:a}=s,o={tr:e,editor:s,view:a,state:vC({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,d])=>[l,(...c)=>d(...c)(o)]))}};return o}}class Ewe{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(s=>s!==n):delete this.callbacks[e]),this}once(e,n){const r=(...s)=>{this.off(e,r),n.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Ct(t,e,n){return t.config[e]===void 0&&t.parent?Ct(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind(ze(ge({},n),{parent:t.parent?Ct(t.parent,e,n):null})):t.config[e]}function bC(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function MQ(t){const e=[],{nodeExtensions:n,markExtensions:r}=bC(t),s=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage,extensions:s},l=Ct(a,"addGlobalAttributes",o);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([p,h])=>{e.push({type:f,name:p,attribute:ge(ge({},i),h)})})})})}),s.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage},l=Ct(a,"addAttributes",o);if(!l)return;const d=l();Object.entries(d).forEach(([c,f])=>{const p=ge(ge({},i),f);typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:a.name,name:c,attribute:p})})}),e}function Ss(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Ln(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r=ge({},e);return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const o=i?String(i).split(" "):[],l=r[s]?r[s].split(" "):[],d=o.filter(c=>!l.includes(c));r[s]=[...l,...d].join(" ")}else if(s==="style"){const o=i?i.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(c=>c.trim()).filter(Boolean):[],d=new Map;l.forEach(c=>{const[f,p]=c.split(":").map(h=>h.trim());d.set(f,p)}),o.forEach(c=>{const[f,p]=c.split(":").map(h=>h.trim());d.set(f,p)}),r[s]=Array.from(d.entries()).map(([c,f])=>`${c}: ${f}`).join("; ")}else r[s]=i}),r},{})}function B$(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ln(n,r),{})}function EQ(t){return typeof t=="function"}function pn(t,e=void 0,...n){return EQ(t)?e?t.bind(e)(...n):t(...n):t}function Dwe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Rwe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function NV(t,e){return"style"in t?t:ze(ge({},t),{getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,a)=>{const o=a.attribute.parseHTML?a.attribute.parseHTML(n):Rwe(n.getAttribute(a.name));return o==null?i:ze(ge({},i),{[a.name]:o})},{});return ge(ge({},r),s)}})}function jV(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Dwe(n)?!1:n!=null))}function Pwe(t,e){var n;const r=MQ(t),{nodeExtensions:s,markExtensions:i}=bC(t),a=(n=s.find(d=>Ct(d,"topNode")))===null||n===void 0?void 0:n.name,o=Object.fromEntries(s.map(d=>{const c=r.filter(x=>x.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},p=t.reduce((x,_)=>{const k=Ct(_,"extendNodeSchema",f);return ge(ge({},x),k?k(d):{})},{}),h=jV(ze(ge({},p),{content:pn(Ct(d,"content",f)),marks:pn(Ct(d,"marks",f)),group:pn(Ct(d,"group",f)),inline:pn(Ct(d,"inline",f)),atom:pn(Ct(d,"atom",f)),selectable:pn(Ct(d,"selectable",f)),draggable:pn(Ct(d,"draggable",f)),code:pn(Ct(d,"code",f)),whitespace:pn(Ct(d,"whitespace",f)),linebreakReplacement:pn(Ct(d,"linebreakReplacement",f)),defining:pn(Ct(d,"defining",f)),isolating:pn(Ct(d,"isolating",f)),attrs:Object.fromEntries(c.map(x=>{var _;return[x.name,{default:(_=x==null?void 0:x.attribute)===null||_===void 0?void 0:_.default}]}))})),m=pn(Ct(d,"parseHTML",f));m&&(h.parseDOM=m.map(x=>NV(x,c)));const g=Ct(d,"renderHTML",f);g&&(h.toDOM=x=>g({node:x,HTMLAttributes:B$(x,c)}));const y=Ct(d,"renderText",f);return y&&(h.toText=y),[d.name,h]})),l=Object.fromEntries(i.map(d=>{const c=r.filter(y=>y.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},p=t.reduce((y,x)=>{const _=Ct(x,"extendMarkSchema",f);return ge(ge({},y),_?_(d):{})},{}),h=jV(ze(ge({},p),{inclusive:pn(Ct(d,"inclusive",f)),excludes:pn(Ct(d,"excludes",f)),group:pn(Ct(d,"group",f)),spanning:pn(Ct(d,"spanning",f)),code:pn(Ct(d,"code",f)),attrs:Object.fromEntries(c.map(y=>{var x;return[y.name,{default:(x=y==null?void 0:y.attribute)===null||x===void 0?void 0:x.default}]}))})),m=pn(Ct(d,"parseHTML",f));m&&(h.parseDOM=m.map(y=>NV(y,c)));const g=Ct(d,"renderHTML",f);return g&&(h.toDOM=y=>g({mark:y,HTMLAttributes:B$(y,c)})),[d.name,h]}));return new yX({topNode:a,nodes:o,marks:l})}function S4(t,e){return e.nodes[t]||e.marks[t]||null}function FV(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function XR(t,e){const n=uh.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}const Iwe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,a,o)=>{var l,d;const c=((d=(l=s.type.spec).toText)===null||d===void 0?void 0:d.call(l,{node:s,pos:i,parent:a,index:o}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?c:c.slice(0,Math.max(0,r-i))}),n};function QR(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class yb{constructor(e){this.find=e.find,this.handler=e.handler}}const Owe=(t,e)=>{if(QR(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function dx(t){var e;const{editor:n,from:r,to:s,text:i,rules:a,plugin:o}=t,{view:l}=n;if(l.composing)return!1;const d=l.state.doc.resolve(r);if(d.parent.type.spec.code||!((e=d.nodeBefore||d.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let c=!1;const f=Iwe(d)+i;return a.forEach(p=>{if(c)return;const h=Owe(f,p.find);if(!h)return;const m=l.state.tr,g=vC({state:l.state,transaction:m}),y={from:r-(h[0].length-i.length),to:s},{commands:x,chain:_,can:k}=new yC({editor:n,state:g});p.handler({state:g,range:y,match:h,commands:x,chain:_,can:k})===null||!m.steps.length||(m.setMeta(o,{transform:m,from:r,to:s,text:i}),l.dispatch(m),c=!0)}),c}function Lwe(t){const{editor:e,rules:n}=t,r=new Vn({state:{init(){return null},apply(s,i,a){const o=s.getMeta(r);if(o)return o;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=XR(Ze.from(c),a.schema);const{from:f}=l,p=f+c.length;dx({editor:e,from:f,to:p,text:c,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,a,o){return dx({editor:e,from:i,to:a,text:o,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&dx({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:a}=s.state.selection;return a?dx({editor:e,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Vwe(t){return Object.prototype.toString.call(t).slice(8,-1)}function cx(t){return Vwe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function xC(t,e){const n=ge({},t);return cx(t)&&cx(e)&&Object.keys(e).forEach(r=>{cx(e[r])&&cx(t[r])?n[r]=xC(t[r],e[r]):n[r]=e[r]}),n}class jo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ge(ge({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pn(Ct(this,"addOptions",{name:this.name}))),this.storage=pn(Ct(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new jo(e)}configure(e={}){const n=this.extend(ze(ge({},this.config),{addOptions:()=>xC(this.options,e)}));return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new jo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=pn(Ct(n,"addOptions",{name:n.name})),n.storage=pn(Ct(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const a=s.marks();if(!!!a.find(d=>(d==null?void 0:d.type.name)===n.name))return!1;const l=a.find(d=>(d==null?void 0:d.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function Nwe(t){return typeof t=="number"}class jwe{constructor(e){this.find=e.find,this.handler=e.handler}}const Fwe=(t,e,n)=>{if(QR(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function Bwe(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:a,dropEvent:o}=t,{commands:l,chain:d,can:c}=new yC({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,s,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,m),y=Math.min(s,m+h.content.size),x=h.textBetween(g-m,y-m,void 0,"");Fwe(x,i.find,a).forEach(k=>{if(k.index===void 0)return;const w=g+k.index+1,S=w+k[0].length,C={from:n.tr.mapping.map(w),to:n.tr.mapping.map(S)},A=i.handler({state:n,range:C,match:k,commands:l,chain:d,can:c,pasteEvent:a,dropEvent:o});f.push(A)})}),f.every(h=>h!==null)}let fx=null;const zwe=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function Uwe(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,a=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(c){o=null}const l=({state:c,from:f,to:p,rule:h,pasteEvt:m})=>{const g=c.tr,y=vC({state:c,transaction:g});if(!(!Bwe({editor:e,state:y,from:Math.max(f-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:o})||!g.steps.length)){try{o=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(_){o=null}return a=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,g}};return n.map(c=>new Vn({view(f){const p=m=>{var g;r=!((g=f.dom.parentElement)===null||g===void 0)&&g.contains(m.target)?f.dom.parentElement:null,r&&(fx=e)},h=()=>{fx&&(fx=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(i=r===f.dom.parentElement,o=p,!i){const h=fx;h!=null&&h.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,p)=>{var h;const m=(h=p.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return a=p,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,h)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!s,y=m.getMeta("uiEvent")==="drop"&&!i,x=m.getMeta("applyPasteRules"),_=!!x;if(!g&&!y&&!_)return;if(_){let{text:S}=x;typeof S=="string"?S=S:S=XR(Ze.from(S),h.schema);const{from:C}=x,A=C+S.length,M=zwe(S);return l({rule:c,state:h,from:C,to:{b:A},pasteEvt:M})}const k=p.doc.content.findDiffStart(h.doc.content),w=p.doc.content.findDiffEnd(h.doc.content);if(!(!Nwe(k)||!w||k===w.b))return l({rule:c,state:h,from:k,to:w,pasteEvt:a})}}))}function Hwe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Am{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Am.resolve(e),this.schema=Pwe(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Am.sort(Am.flatten(e)),r=Hwe(n.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},s=Ct(n,"addExtensions",r);return s?[n,...this.flatten(s())]:n}).flat(10)}static sort(e){return e.sort((r,s)=>{const i=Ct(r,"priority")||100,a=Ct(s,"priority")||100;return i>a?-1:i<a?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:S4(n.name,this.schema)},s=Ct(n,"addCommands",r);return s?ge(ge({},e),s()):e},{})}get plugins(){const{editor:e}=this,n=Am.sort([...this.extensions].reverse()),r=[],s=[],i=n.map(a=>{const o={name:a.name,options:a.options,storage:a.storage,editor:e,type:S4(a.name,this.schema)},l=[],d=Ct(a,"addKeyboardShortcuts",o);let c={};if(a.type==="mark"&&Ct(a,"exitable",o)&&(c.ArrowRight=()=>jo.handleExit({editor:e,mark:a})),d){const g=Object.fromEntries(Object.entries(d()).map(([y,x])=>[y,()=>x({editor:e})]));c=ge(ge({},c),g)}const f=uwe(c);l.push(f);const p=Ct(a,"addInputRules",o);FV(a,e.options.enableInputRules)&&p&&r.push(...p());const h=Ct(a,"addPasteRules",o);FV(a,e.options.enablePasteRules)&&h&&s.push(...h());const m=Ct(a,"addProseMirrorPlugins",o);if(m){const g=m();l.push(...g)}return l}).flat();return[Lwe({editor:e,rules:r}),...Uwe({editor:e,rules:s}),...i]}get attributes(){return MQ(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=bC(this.extensions);return Object.fromEntries(n.filter(r=>!!Ct(r,"addNodeView")).map(r=>{const s=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ss(r.name,this.schema)},a=Ct(r,"addNodeView",i);if(!a)return[];const o=(l,d,c,f,p)=>{const h=B$(l,s);return a()({node:l,view:d,getPos:c,decorations:f,innerDecorations:p,editor:e,extension:r,HTMLAttributes:h})};return[r.name,o]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:S4(e.name,this.schema)};e.type==="mark"&&(!((n=pn(Ct(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const s=Ct(e,"onBeforeCreate",r),i=Ct(e,"onCreate",r),a=Ct(e,"onUpdate",r),o=Ct(e,"onSelectionUpdate",r),l=Ct(e,"onTransaction",r),d=Ct(e,"onFocus",r),c=Ct(e,"onBlur",r),f=Ct(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),a&&this.editor.on("update",a),o&&this.editor.on("selectionUpdate",o),l&&this.editor.on("transaction",l),d&&this.editor.on("focus",d),c&&this.editor.on("blur",c),f&&this.editor.on("destroy",f)})}}class wr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ge(ge({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pn(Ct(this,"addOptions",{name:this.name}))),this.storage=pn(Ct(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new wr(e)}configure(e={}){const n=this.extend(ze(ge({},this.config),{addOptions:()=>xC(this.options,e)}));return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new wr(ge(ge({},this.config),e));return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=pn(Ct(n,"addOptions",{name:n.name})),n.storage=pn(Ct(n,"addStorage",{name:n.name,options:n.options})),n}}function DQ(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:a={}}=n||{};let o="";return t.nodesBetween(r,s,(l,d,c,f)=>{var p;l.isBlock&&d>r&&(o+=i);const h=a==null?void 0:a[l.type.name];if(h)return c&&(o+=h({node:l,pos:d,parent:c,index:f,range:e})),!1;l.isText&&(o+=(p=l==null?void 0:l.text)===null||p===void 0?void 0:p.slice(Math.max(r,d)-d,s-d))}),o}function ZR(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const qwe=wr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Vn({key:new Hn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,a=Math.min(...i.map(c=>c.$from.pos)),o=Math.max(...i.map(c=>c.$to.pos)),l=ZR(n);return DQ(r,{from:a,to:o},ze(ge({},this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{}),{textSerializers:l}))}}})]}}),Wwe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Gwe=(t=!1)=>({commands:e})=>e.setContent("",t),Ywe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:a})=>{t.doc.nodesBetween(i.pos,a.pos,(o,l)=>{if(o.type.isText)return;const{doc:d,mapping:c}=e,f=d.resolve(c.map(l)),p=d.resolve(c.map(l+o.nodeSize)),h=f.blockRange(p);if(!h)return;const m=Pg(h);if(o.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,g)}(m||m===0)&&e.lift(h,m)})}),!0},Kwe=t=>e=>t(e),Xwe=()=>({state:t,dispatch:e})=>CQ(t,e),Qwe=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const a=r.mapping.map(e);return r.insert(a,i.content),r.setSelection(new Wt(r.doc.resolve(Math.max(a-1,0)))),!0},Zwe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const o=s.before(i),l=s.after(i);t.delete(o,l).scrollIntoView()}return!0}return!1},Jwe=t=>({tr:e,state:n,dispatch:r})=>{const s=Ss(t,n.schema),i=e.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===s){if(r){const l=i.before(a),d=i.after(a);e.delete(l,d).scrollIntoView()}return!0}return!1},e2e=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},t2e=()=>({state:t,dispatch:e})=>qR(t,e),n2e=()=>({commands:t})=>t.keyboardShortcut("Enter"),r2e=()=>({state:t,dispatch:e})=>mwe(t,e);function D2(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:QR(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function RQ(t,e,n={}){return t.find(r=>r.type===e&&D2(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function BV(t,e,n={}){return!!RQ(t,e,n)}function _C(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(c=>c.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(c=>c.type===e)||(n=n||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!RQ([...s.node.marks],e,n)))return;let a=s.index,o=t.start()+s.offset,l=a+1,d=o+s.node.nodeSize;for(;a>0&&BV([...t.parent.child(a-1).marks],e,n);)a-=1,o-=t.parent.child(a).nodeSize;for(;l<t.parent.childCount&&BV([...t.parent.child(l).marks],e,n);)d+=t.parent.child(l).nodeSize,l+=1;return{from:o,to:d}}function Gc(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const s2e=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=Gc(t,r.schema),{doc:a,selection:o}=n,{$from:l,from:d,to:c}=o;if(s){const f=_C(l,i,e);if(f&&f.from<=d&&f.to>=c){const p=Wt.create(a,f.from,f.to);n.setSelection(p)}}return!0},i2e=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function JR(t){return t instanceof Wt}function Ou(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function PQ(t,e=null){if(!e)return null;const n=Yt.atStart(t),r=Yt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?Wt.create(t,Ou(0,s,i),Ou(t.content.size,s,i)):Wt.create(t,Ou(e,s,i),Ou(e,s,i))}function IQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function wC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const a2e=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e=ge({scrollIntoView:!0},e);const a=()=>{(wC()||IQ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!JR(n.state.selection))return a(),!0;const o=PQ(s.doc,t)||n.state.selection,l=n.state.selection.eq(o);return i&&(l||s.setSelection(o),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),a()),!0},o2e=(t,e)=>n=>t.every((r,s)=>e(r,ze(ge({},n),{index:s}))),l2e=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),OQ=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&OQ(r)}return t};function px(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return OQ(n)}function e1(t,e,n){if(t instanceof yc||t instanceof Ze)return t;n=ge({slice:!0,parseOptions:{}},n);const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ze.fromArray(t.map(o=>e.nodeFromJSON(o)));const a=e.nodeFromJSON(t);return n.errorOnInvalidContent&&a.check(),a}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),e1("",e,n)}if(s){if(n.errorOnInvalidContent){let a=!1,o="";const l=new yX({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(a=!0,o=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?xp.fromSchema(l).parseSlice(px(t),n.parseOptions):xp.fromSchema(l).parse(px(t),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const i=xp.fromSchema(e);return n.slice?i.parseSlice(px(t),n.parseOptions).content:i.parse(px(t),n.parseOptions)}return e1("",e,n)}function u2e(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof vs||s instanceof _s))return;const i=t.mapping.maps[r];let a=0;i.forEach((o,l,d,c)=>{a===0&&(a=c)}),t.setSelection(Yt.near(t.doc.resolve(a),n))}const d2e=t=>!("type"in t),c2e=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var a;if(s){n=ge({parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1},n);let o;const l=y=>{i.emit("contentError",{editor:i,error:y,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},d=ge({preserveWhitespace:"full"},n.parseOptions);if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{e1(e,i.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(y){l(y)}try{o=e1(e,i.schema,{parseOptions:d,errorOnInvalidContent:(a=n.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck})}catch(y){return l(y),!1}let{from:c,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,h=!0;if((d2e(o)?o:[o]).forEach(y=>{y.check(),p=p?y.isText&&y.marks.length===0:!1,h=h?y.isBlock:!1}),c===f&&h){const{parent:y}=r.doc.resolve(c);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(c-=1,f+=1)}let g;if(p){if(Array.isArray(e))g=e.map(y=>y.text||"").join("");else if(e instanceof Ze){let y="";e.forEach(x=>{x.text&&(y+=x.text)}),g=y}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,c,f)}else g=o,r.replaceWith(c,f,g);n.updateSelection&&u2e(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:g})}return!0},f2e=()=>({state:t,dispatch:e})=>fwe(t,e),p2e=()=>({state:t,dispatch:e})=>pwe(t,e),h2e=()=>({state:t,dispatch:e})=>yQ(t,e),m2e=()=>({state:t,dispatch:e})=>wQ(t,e),g2e=()=>({state:t,dispatch:e,tr:n})=>{try{const r=cC(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch(r){return!1}},v2e=()=>({state:t,dispatch:e,tr:n})=>{try{const r=cC(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch(r){return!1}},y2e=()=>({state:t,dispatch:e})=>dwe(t,e),b2e=()=>({state:t,dispatch:e})=>cwe(t,e);function LQ(){return typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1}function x2e(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,a;for(let o=0;o<e.length-1;o+=1){const l=e[o];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))wC()||LQ()?a=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const _2e=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=x2e(t).split(/-(?!$)/),a=i.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),o=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,o))});return l==null||l.steps.forEach(d=>{const c=d.map(r.mapping);c&&s&&r.maybeStep(c)}),!0};function t1(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,a=e?Ss(e,t.schema):null,o=[];t.doc.nodesBetween(r,s,(f,p)=>{if(f.isText)return;const h=Math.max(r,p),m=Math.min(s,p+f.nodeSize);o.push({node:f,from:h,to:m})});const l=s-r,d=o.filter(f=>a?a.name===f.node.type.name:!0).filter(f=>D2(f.node.attrs,n,{strict:!1}));return i?!!d.length:d.reduce((f,p)=>f+p.to-p.from,0)>=l}const w2e=(t,e={})=>({state:n,dispatch:r})=>{const s=Ss(t,n.schema);return t1(n,s,e)?hwe(n,r):!1},k2e=()=>({state:t,dispatch:e})=>AQ(t,e),S2e=t=>({state:e,dispatch:n})=>{const r=Ss(t,e.schema);return Awe(r)(e,n)},C2e=()=>({state:t,dispatch:e})=>SQ(t,e);function kC(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function zV(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}const A2e=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,a=null;const o=kC(typeof t=="string"?t:t.name,r.schema);return o?(o==="node"&&(i=Ss(t,r.schema)),o==="mark"&&(a=Gc(t,r.schema)),s&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(d,c)=>{i&&i===d.type&&n.setNodeMarkup(c,void 0,zV(d.attrs,e)),a&&d.marks.length&&d.marks.forEach(f=>{a===f.type&&n.addMark(c,c+d.nodeSize,a.create(zV(f.attrs,e)))})})}),!0):!1},T2e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),$2e=()=>({tr:t,dispatch:e})=>{if(e){const n=new ga(t.doc);t.setSelection(n)}return!0},M2e=()=>({state:t,dispatch:e})=>xQ(t,e),E2e=()=>({state:t,dispatch:e})=>kQ(t,e),D2e=()=>({state:t,dispatch:e})=>ywe(t,e),R2e=()=>({state:t,dispatch:e})=>_we(t,e),P2e=()=>({state:t,dispatch:e})=>xwe(t,e);function z$(t,e,n={},r={}){return e1(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const I2e=(t,e=!1,n={},r={})=>({editor:s,tr:i,dispatch:a,commands:o})=>{var l,d;const{doc:c}=i;if(n.preserveWhitespace!=="full"){const f=z$(t,s.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return a&&i.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!e),!0}return a&&i.setMeta("preventUpdate",!e),o.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:s.options.enableContentCheck})};function VQ(t,e){const n=Gc(e,t.schema),{from:r,to:s,empty:i}=t.selection,a=[];i?(t.storedMarks&&a.push(...t.storedMarks),a.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,l=>{a.push(...l.marks)});const o=a.find(l=>l.type.name===n.name);return o?ge({},o.attrs):{}}function O2e(t,e){const n=new PR(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function L2e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function U$(t,e){const n=[];return t.descendants((r,s)=>{e(r)&&n.push({node:r,pos:s})}),n}function V2e(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function NQ(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function eP(t){return e=>NQ(e.$from,t)}function jQ(t,e){const n={from:0,to:t.content.size};return DQ(t,n,e)}function N2e(t,e){const n=Ss(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,o=>{i.push(o)});const a=i.reverse().find(o=>o.type.name===n.name);return a?ge({},a.attrs):{}}function FQ(t,e){const n=kC(typeof e=="string"?e:e.name,t.schema);return n==="node"?N2e(t,e):n==="mark"?VQ(t,e):{}}function j2e(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function F2e(t){const e=j2e(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,a)=>a!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function B2e(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,i)=>{const a=[];if(s.ranges.length)s.forEach((o,l)=>{a.push({from:o,to:l})});else{const{from:o,to:l}=n[i];if(o===void 0||l===void 0)return;a.push({from:o,to:l})}a.forEach(({from:o,to:l})=>{const d=e.slice(i).map(o,-1),c=e.slice(i).map(l),f=e.invert().map(d,-1),p=e.invert().map(c);r.push({oldRange:{from:f,to:p},newRange:{from:d,to:c}})})}),F2e(r)}function tP(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),a=_C(i,s.type);a&&r.push(ge({mark:s},a))}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(a=>({from:i,to:i+s.nodeSize,mark:a})))}),r}function mw(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}function H$(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?Gc(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>i?i.name===f.type.name:!0).find(f=>D2(f.attrs,n,{strict:!1}));let a=0;const o=[];if(s.forEach(({$from:f,$to:p})=>{const h=f.pos,m=p.pos;t.doc.nodesBetween(h,m,(g,y)=>{if(!g.isText&&!g.marks.length)return;const x=Math.max(h,y),_=Math.min(m,y+g.nodeSize),k=_-x;a+=k,o.push(...g.marks.map(w=>({mark:w,from:x,to:_})))})}),a===0)return!1;const l=o.filter(f=>i?i.name===f.mark.type.name:!0).filter(f=>D2(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),d=o.filter(f=>i?f.mark.type!==i&&f.mark.type.excludes(i):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+d:l)>=a}function z2e(t,e,n={}){if(!e)return t1(t,null,n)||H$(t,null,n);const r=kC(e,t.schema);return r==="node"?t1(t,e,n):r==="mark"?H$(t,e,n):!1}function UV(t,e){const{nodeExtensions:n}=bC(e),r=n.find(a=>a.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=pn(Ct(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function SC(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(SC(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function BQ(t){return t instanceof Ft}function zQ(t,e,n){const s=t.state.doc.content.size,i=Ou(e,0,s),a=Ou(n,0,s),o=t.coordsAtPos(i),l=t.coordsAtPos(a,-1),d=Math.min(o.top,l.top),c=Math.max(o.bottom,l.bottom),f=Math.min(o.left,l.left),p=Math.max(o.right,l.right),h=p-f,m=c-d,x={top:d,bottom:c,left:f,right:p,width:h,height:m,x:f,y:d};return ze(ge({},x),{toJSON:()=>x})}function U2e(t,e,n){var r;const{selection:s}=e;let i=null;if(JR(s)&&(i=s.$cursor),i){const o=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(o)||!o.some(l=>l.type.excludes(n))}const{ranges:a}=s;return a.some(({$from:o,$to:l})=>{let d=o.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(o.pos,l.pos,(c,f,p)=>{if(d)return!1;if(c.isInline){const h=!p||p.type.allowsMarkType(n),m=!!n.isInSet(c.marks)||!c.marks.some(g=>g.type.excludes(n));d=h&&m}return!d}),d})}const H2e=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:a,ranges:o}=i,l=Gc(t,r.schema);if(s)if(a){const d=VQ(r,l);n.addStoredMark(l.create(ge(ge({},d),e)))}else o.forEach(d=>{const c=d.$from.pos,f=d.$to.pos;r.doc.nodesBetween(c,f,(p,h)=>{const m=Math.max(h,c),g=Math.min(h+p.nodeSize,f);p.marks.find(x=>x.type===l)?p.marks.forEach(x=>{l===x.type&&n.addMark(m,g,l.create(ge(ge({},x.attrs),e)))}):n.addMark(m,g,l.create(e))})});return U2e(r,n,l)},q2e=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),W2e=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=Ss(t,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:o})=>VV(i,ge(ge({},a),e))(n)?!0:o.clearNodes()).command(({state:o})=>VV(i,ge(ge({},a),e))(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},G2e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=Ou(t,0,r.content.size),i=Ft.create(r,s);e.setSelection(i)}return!0},Y2e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,a=Wt.atStart(r).from,o=Wt.atEnd(r).to,l=Ou(s,a,o),d=Ou(i,a,o),c=Wt.create(r,l,d);e.setSelection(c)}return!0},K2e=t=>({state:e,dispatch:n})=>{const r=Ss(t,e.schema);return Mwe(r)(e,n)};function HV(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}const X2e=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:a}=e,{$from:o,$to:l}=i,d=s.extensionManager.attributes,c=mw(d,o.node().type.name,o.node().attrs);if(i instanceof Ft&&i.node.isBlock)return!o.parentOffset||!zu(a,o.pos)?!1:(r&&(t&&HV(n,s.extensionManager.splittableMarks),e.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,p=o.depth===0?void 0:L2e(o.node(-1).contentMatchAt(o.indexAfter(-1)));let h=f&&p?[{type:p,attrs:c}]:void 0,m=zu(e.doc,e.mapping.map(o.pos),1,h);if(!h&&!m&&zu(e.doc,e.mapping.map(o.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:c}]:void 0),r){if(m&&(i instanceof Wt&&e.deleteSelection(),e.split(e.mapping.map(o.pos),1,h),p&&!f&&!o.parentOffset&&o.parent.type!==p)){const g=e.mapping.map(o.before()),y=e.doc.resolve(g);o.node(-1).canReplaceWith(y.index(),y.index()+1,p)&&e.setNodeMarkup(e.mapping.map(o.before()),p)}t&&HV(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},Q2e=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var a;const o=Ss(t,r.schema),{$from:l,$to:d}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(d))return!1;const f=l.node(-1);if(f.type!==o)return!1;const p=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let x=Ze.empty;const _=l.index(-1)?1:l.index(-2)?2:3;for(let M=l.depth-_;M>=l.depth-3;M-=1)x=Ze.from(l.node(M).copy(x));const k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,w=ge(ge({},mw(p,l.node().type.name,l.node().attrs)),e),S=((a=o.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(w))||void 0;x=x.append(Ze.from(o.createAndFill(null,S)||void 0));const C=l.before(l.depth-(_-1));n.replace(C,l.after(-k),new gt(x,4-_,0));let A=-1;n.doc.nodesBetween(C,n.doc.content.size,(M,E)=>{if(A>-1)return!1;M.isTextblock&&M.content.size===0&&(A=E+1)}),A>-1&&n.setSelection(Wt.near(n.doc.resolve(A))),n.scrollIntoView()}return!0}const h=d.pos===l.end()?f.contentMatchAt(0).defaultType:null,m=ge(ge({},mw(p,f.type.name,f.attrs)),e),g=ge(ge({},mw(p,l.node().type.name,l.node().attrs)),e);n.delete(l.pos,d.pos);const y=h?[{type:o,attrs:m},{type:h,attrs:g}]:[{type:o,attrs:m}];if(!zu(n.doc,l.pos,2))return!1;if(s){const{selection:x,storedMarks:_}=r,{splittableMarks:k}=i.extensionManager,w=_||x.$to.parentOffset&&x.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!w||!s)return!0;const S=w.filter(C=>k.includes(C.type.name));n.ensureMarks(S)}return!0},C4=(t,e)=>{const n=eP(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&qc(t.doc,n.pos)&&t.join(n.pos),!0},A4=(t,e)=>{const n=eP(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&qc(t.doc,r)&&t.join(r),!0},Z2e=(t,e,n,r={})=>({editor:s,tr:i,state:a,dispatch:o,chain:l,commands:d,can:c})=>{const{extensions:f,splittableMarks:p}=s.extensionManager,h=Ss(t,a.schema),m=Ss(e,a.schema),{selection:g,storedMarks:y}=a,{$from:x,$to:_}=g,k=x.blockRange(_),w=y||g.$to.parentOffset&&g.$from.marks();if(!k)return!1;const S=eP(C=>UV(C.type.name,f))(g);if(k.depth>=1&&S&&k.depth-S.depth<=1){if(S.node.type===h)return d.liftListItem(m);if(UV(S.node.type.name,f)&&h.validContent(S.node.content)&&o)return l().command(()=>(i.setNodeMarkup(S.pos,h),!0)).command(()=>C4(i,h)).command(()=>A4(i,h)).run()}return!n||!w||!o?l().command(()=>c().wrapInList(h,r)?!0:d.clearNodes()).wrapInList(h,r).command(()=>C4(i,h)).command(()=>A4(i,h)).run():l().command(()=>{const C=c().wrapInList(h,r),A=w.filter(M=>p.includes(M.type.name));return i.ensureMarks(A),C?!0:d.clearNodes()}).wrapInList(h,r).command(()=>C4(i,h)).command(()=>A4(i,h)).run()},J2e=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,a=Gc(t,r.schema);return H$(r,a,e)?s.unsetMark(a,{extendEmptyMarkRange:i}):s.setMark(a,e)},eke=(t,e,n={})=>({state:r,commands:s})=>{const i=Ss(t,r.schema),a=Ss(e,r.schema),o=t1(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),o?s.setNode(a,l):s.setNode(i,ge(ge({},l),n))},tke=(t,e={})=>({state:n,commands:r})=>{const s=Ss(t,n.schema);return t1(n,s,e)?r.lift(s):r.wrapIn(s,e)},nke=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const a=t.tr,o=i.transform;for(let l=o.steps.length-1;l>=0;l-=1)a.step(o.steps[l].invert(o.docs[l]));if(i.text){const l=a.doc.resolve(i.from).marks();a.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else a.delete(i.from,i.to)}return!0}}return!1},rke=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},ske=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:a=!1}=e,{selection:o}=n,l=Gc(t,r.schema),{$from:d,empty:c,ranges:f}=o;if(!s)return!0;if(c&&a){let{from:p,to:h}=o;const m=(i=d.marks().find(y=>y.type===l))===null||i===void 0?void 0:i.attrs,g=_C(d,l,m);g&&(p=g.from,h=g.to),n.removeMark(p,h,l)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},ike=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,a=null;const o=kC(typeof t=="string"?t:t.name,r.schema);return o?(o==="node"&&(i=Ss(t,r.schema)),o==="mark"&&(a=Gc(t,r.schema)),s&&n.selection.ranges.forEach(l=>{const d=l.$from.pos,c=l.$to.pos;let f,p,h,m;n.selection.empty?r.doc.nodesBetween(d,c,(g,y)=>{i&&i===g.type&&(h=Math.max(y,d),m=Math.min(y+g.nodeSize,c),f=y,p=g)}):r.doc.nodesBetween(d,c,(g,y)=>{y<d&&i&&i===g.type&&(h=Math.max(y,d),m=Math.min(y+g.nodeSize,c),f=y,p=g),y>=d&&y<=c&&(i&&i===g.type&&n.setNodeMarkup(y,void 0,ge(ge({},g.attrs),e)),a&&g.marks.length&&g.marks.forEach(x=>{if(a===x.type){const _=Math.max(y,d),k=Math.min(y+g.nodeSize,c);n.addMark(_,k,a.create(ge(ge({},x.attrs),e)))}}))}),p&&(f!==void 0&&n.setNodeMarkup(f,void 0,ge(ge({},p.attrs),e)),a&&p.marks.length&&p.marks.forEach(g=>{a===g.type&&n.addMark(h,m,a.create(ge(ge({},g.attrs),e)))}))}),!0):!1},ake=(t,e={})=>({state:n,dispatch:r})=>{const s=Ss(t,n.schema);return wwe(s,e)(n,r)},oke=(t,e={})=>({state:n,dispatch:r})=>{const s=Ss(t,n.schema);return kwe(s,e)(n,r)};var lke=Object.freeze({__proto__:null,blur:Wwe,clearContent:Gwe,clearNodes:Ywe,command:Kwe,createParagraphNear:Xwe,cut:Qwe,deleteCurrentNode:Zwe,deleteNode:Jwe,deleteRange:e2e,deleteSelection:t2e,enter:n2e,exitCode:r2e,extendMarkRange:s2e,first:i2e,focus:a2e,forEach:o2e,insertContent:l2e,insertContentAt:c2e,joinBackward:h2e,joinDown:p2e,joinForward:m2e,joinItemBackward:g2e,joinItemForward:v2e,joinTextblockBackward:y2e,joinTextblockForward:b2e,joinUp:f2e,keyboardShortcut:_2e,lift:w2e,liftEmptyBlock:k2e,liftListItem:S2e,newlineInCode:C2e,resetAttributes:A2e,scrollIntoView:T2e,selectAll:$2e,selectNodeBackward:M2e,selectNodeForward:E2e,selectParentNode:D2e,selectTextblockEnd:R2e,selectTextblockStart:P2e,setContent:I2e,setMark:H2e,setMeta:q2e,setNode:W2e,setNodeSelection:G2e,setTextSelection:Y2e,sinkListItem:K2e,splitBlock:X2e,splitListItem:Q2e,toggleList:Z2e,toggleMark:J2e,toggleNode:eke,toggleWrap:tke,undoInputRule:nke,unsetAllMarks:rke,unsetMark:ske,updateAttributes:ike,wrapIn:ake,wrapInList:oke});const uke=wr.create({name:"commands",addCommands(){return ge({},lke)}}),dke=wr.create({name:"drop",addProseMirrorPlugins(){return[new Vn({key:new Hn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),cke=wr.create({name:"editable",addProseMirrorPlugins(){return[new Vn({key:new Hn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),fke=new Hn("focusEvents"),pke=wr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Vn({key:fke,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),hke=wr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:o})=>{const{selection:l,doc:d}=o,{empty:c,$anchor:f}=l,{pos:p,parent:h}=f,m=f.parent.isTextblock&&p>0?o.doc.resolve(p-1):f,g=m.parent.type.spec.isolating,y=f.pos-f.parentOffset,x=g&&m.parent.childCount===1?y===f.pos:Yt.atStart(d).from===p;return!c||!h.type.isTextblock||h.textContent.length||!x||x&&f.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s=ge({},r),i=ze(ge({},r),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return wC()||LQ()?i:s},addProseMirrorPlugins(){return[new Vn({key:new Hn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),s=t.some(g=>g.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:a,to:o}=e.selection,l=Yt.atStart(e.doc).from,d=Yt.atEnd(e.doc).to;if(i||!(a===l&&o===d)||!SC(n.doc))return;const p=n.tr,h=vC({state:n,transaction:p}),{commands:m}=new yC({editor:this.editor,state:h});if(m.clearNodes(),!!p.steps.length)return p}})]}}),mke=wr.create({name:"paste",addProseMirrorPlugins(){return[new Vn({key:new Hn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),gke=wr.create({name:"tabindex",addProseMirrorPlugins(){return[new Vn({key:new Hn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Yf{get name(){return this.node.type.name}constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Yf(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Yf(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Yf(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,a=this.pos+r+(i?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(a);if(!s&&o.depth<=this.depth)return;const l=new Yf(o,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),e.push(new Yf(o,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,a=Object.keys(n);for(let o=0;o<a.length;o+=1){const l=a[o];if(i[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(a=>{r&&s.length>0||(a.node.type.name===e&&i.every(l=>n[l]===a.node.attrs[l])&&s.push(a),!(r&&s.length>0)&&(s=s.concat(a.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,ge(ge({},this.node.attrs),e)),this.editor.view.dispatch(n)}}const vke=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function yke(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}let bke=class extends Ewe{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:s})=>this.options.onDrop(n,r,s)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=yke(vke,this.options.injectNonce))}setOptions(e={}){this.options=ge(ge({},this.options),e),!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=EQ(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(i=>{const a=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(a))}),n.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,n;const s=[...this.options.enableCoreExtensions?[cke,qwe.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),uke,pke,hke,gke,dke,mke].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Am(s,this)}createCommandManager(){this.commandManager=new yC({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=z$(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(o=>o.name!=="collaboration"),this.createExtensionManager()}}),n=z$(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=PQ(n,this.options.autofocus);this.view=new gQ(this.options.element,ze(ge({},this.options.editorProps),{attributes:ge({role:"textbox"},(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes),dispatchTransaction:this.dispatchTransaction.bind(this),state:Cm.create({doc:n,selection:r||void 0})}));const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var o;return(o=this.capturedTransaction)===null||o===void 0?void 0:o.step(a)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return FQ(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,s=typeof e=="string"?n:e;return z2e(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return XR(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return jQ(this.state.doc,{blockSeparator:n,textSerializers:ge(ge({},ZR(this.schema)),r)})}get isEmpty(){return SC(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Yf(n,this)}get $doc(){return this.$pos(0)}};function qp(t){return new yb({find:t.find,handler:({state:e,range:n,match:r})=>{const s=pn(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],o=r[0];if(a){const l=o.search(/\S/),d=n.from+o.indexOf(a),c=d+a.length;if(tP(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>d).length)return null;c<n.to&&i.delete(c,n.to),d>n.from&&i.delete(n.from+l,d);const p=n.from+l+a.length;i.addMark(n.from+l,p,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}function UQ(t){return new yb({find:t.find,handler:({state:e,range:n,match:r})=>{const s=pn(t.getAttributes,void 0,r)||{},{tr:i}=e,a=n.from;let o=n.to;const l=t.type.create(s);if(r[1]){const d=r[0].lastIndexOf(r[1]);let c=a+d;c>o?c=o:o=c+r[1].length;const f=r[0][r[0].length-1];i.insertText(f,a+r[0].length-1),i.replaceWith(c,o,l)}else if(r[0]){const d=t.type.isInline?a:a-1;i.insert(d,t.type.create(s)).delete(i.mapping.map(a),i.mapping.map(o))}i.scrollIntoView()}})}function R2(t){return new yb({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),i=pn(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)}})}function Nr(t){return new yb({find:t.find,handler:({state:e,range:n,match:r})=>{let s=t.replace,i=n.from;const a=n.to;if(r[1]){const o=r[0].lastIndexOf(r[1]);s+=r[0].slice(o+r[1].length),i+=o;const l=i-a;l>0&&(s=r[0].slice(o-l,o)+s,i=a)}e.tr.insertText(s,i,a)}})}function lg(t){return new yb({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const i=pn(t.getAttributes,void 0,r)||{},a=e.tr.delete(n.from,n.to),l=a.doc.resolve(n.from).blockRange(),d=l&&RR(l,t.type,i);if(!d)return null;if(a.wrap(l,d),t.keepMarks&&t.editor){const{selection:f,storedMarks:p}=e,{splittableMarks:h}=t.editor.extensionManager,m=p||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(y=>h.includes(y.type.name));a.ensureMarks(g)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(f,i).run()}const c=a.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&qc(a.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&a.join(n.from-1)}})}let Er=class q${constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=ge(ge({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pn(Ct(this,"addOptions",{name:this.name}))),this.storage=pn(Ct(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new q$(e)}configure(e={}){const n=this.extend(ze(ge({},this.config),{addOptions:()=>xC(this.options,e)}));return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new q$(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=pn(Ct(n,"addOptions",{name:n.name})),n.storage=pn(Ct(n,"addStorage",{name:n.name,options:n.options})),n}};class xke{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options=ge({stopEvent:null,ignoreMutation:null},r),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,s,i,a,o,l;const{view:d}=this.editor,c=e.target,f=c.nodeType===3?(n=c.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(c)||!f)return;let p=0,h=0;if(this.dom!==f){const _=this.dom.getBoundingClientRect(),k=f.getBoundingClientRect(),w=(s=e.offsetX)!==null&&s!==void 0?s:(i=e.nativeEvent)===null||i===void 0?void 0:i.offsetX,S=(a=e.offsetY)!==null&&a!==void 0?a:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetY;p=k.x-_.x+w,h=k.y-_.y+S}const m=this.dom.cloneNode(!0);(l=e.dataTransfer)===null||l===void 0||l.setDragImage(m,p,h);const g=this.getPos();if(typeof g!="number")return;const y=Ft.create(d.state.doc,g),x=d.state.tr.setSelection(y);d.dispatch(x)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const i=e.type.startsWith("drag"),a=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!a&&!i)return!0;const{isEditable:l}=this.editor,{isDragging:d}=this,c=!!this.node.type.spec.draggable,f=Ft.isSelectable(this.node),p=e.type==="copy",h=e.type==="paste",m=e.type==="cut",g=e.type==="mousedown";if(!c&&f&&i&&e.target===this.dom&&e.preventDefault(),c&&i&&!d&&e.target===this.dom)return e.preventDefault(),!1;if(c&&l&&!d&&g){const y=r.closest("[data-drag-handle]");y&&(this.dom===y||this.dom.contains(y))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(d||a||p||h||m||g&&f)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(wC()||IQ())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,ge(ge({},this.node.attrs),e)),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function Wp(t){return new jwe({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=pn(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:a}=e,o=r[r.length-1],l=r[0];let d=n.to;if(o){const c=l.search(/\S/),f=n.from+l.indexOf(o),p=f+o.length;if(tP(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>f).length)return null;p<n.to&&a.delete(p,n.to),f>n.from&&a.delete(n.from+c,f),d=n.from+c+o.length,a.addMark(n.from+c,d,t.type.create(i||{})),a.removeStoredMark(t.type)}}})}function _ke(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Ft){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}function wke(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var Qi="top",so="bottom",io="right",Zi="left",nP="auto",bb=[Qi,so,io,Zi],ug="start",n1="end",kke="clippingParents",HQ="viewport",hv="popper",Ske="reference",qV=bb.reduce(function(t,e){return t.concat([e+"-"+ug,e+"-"+n1])},[]),qQ=[].concat(bb,[nP]).reduce(function(t,e){return t.concat([e,e+"-"+ug,e+"-"+n1])},[]),Cke="beforeRead",Ake="read",Tke="afterRead",$ke="beforeMain",Mke="main",Eke="afterMain",Dke="beforeWrite",Rke="write",Pke="afterWrite",Ike=[Cke,Ake,Tke,$ke,Mke,Eke,Dke,Rke,Pke];function Fl(t){return t?(t.nodeName||"").toLowerCase():null}function _a(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Gp(t){var e=_a(t).Element;return t instanceof e||t instanceof Element}function eo(t){var e=_a(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function rP(t){if(typeof ShadowRoot=="undefined")return!1;var e=_a(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Oke(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!eo(i)||!Fl(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(a){var o=s[a];o===!1?i.removeAttribute(a):i.setAttribute(a,o===!0?"":o)}))})}function Lke(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),o=a.reduce(function(l,d){return l[d]="",l},{});!eo(s)||!Fl(s)||(Object.assign(s.style,o),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const WQ={name:"applyStyles",enabled:!0,phase:"write",fn:Oke,effect:Lke,requires:["computeStyles"]};function El(t){return t.split("-")[0]}var kp=Math.max,P2=Math.min,dg=Math.round;function W$(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function GQ(){return!/^((?!chrome|android).)*safari/i.test(W$())}function cg(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&eo(t)&&(s=t.offsetWidth>0&&dg(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&dg(r.height)/t.offsetHeight||1);var a=Gp(t)?_a(t):window,o=a.visualViewport,l=!GQ()&&n,d=(r.left+(l&&o?o.offsetLeft:0))/s,c=(r.top+(l&&o?o.offsetTop:0))/i,f=r.width/s,p=r.height/i;return{width:f,height:p,top:c,right:d+f,bottom:c+p,left:d,x:d,y:c}}function sP(t){var e=cg(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function YQ(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&rP(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function rd(t){return _a(t).getComputedStyle(t)}function Vke(t){return["table","td","th"].indexOf(Fl(t))>=0}function Yc(t){return((Gp(t)?t.ownerDocument:t.document)||window.document).documentElement}function CC(t){return Fl(t)==="html"?t:t.assignedSlot||t.parentNode||(rP(t)?t.host:null)||Yc(t)}function WV(t){return!eo(t)||rd(t).position==="fixed"?null:t.offsetParent}function Nke(t){var e=/firefox/i.test(W$()),n=/Trident/i.test(W$());if(n&&eo(t)){var r=rd(t);if(r.position==="fixed")return null}var s=CC(t);for(rP(s)&&(s=s.host);eo(s)&&["html","body"].indexOf(Fl(s))<0;){var i=rd(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function xb(t){for(var e=_a(t),n=WV(t);n&&Vke(n)&&rd(n).position==="static";)n=WV(n);return n&&(Fl(n)==="html"||Fl(n)==="body"&&rd(n).position==="static")?e:n||Nke(t)||e}function iP(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ky(t,e,n){return kp(t,P2(e,n))}function jke(t,e,n){var r=Ky(t,e,n);return r>n?n:r}function KQ(){return{top:0,right:0,bottom:0,left:0}}function XQ(t){return Object.assign({},KQ(),t)}function QQ(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Fke=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,XQ(typeof e!="number"?e:QQ(e,bb))};function Bke(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,o=El(n.placement),l=iP(o),d=[Zi,io].indexOf(o)>=0,c=d?"height":"width";if(!(!i||!a)){var f=Fke(s.padding,n),p=sP(i),h=l==="y"?Qi:Zi,m=l==="y"?so:io,g=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],y=a[l]-n.rects.reference[l],x=xb(i),_=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,k=g/2-y/2,w=f[h],S=_-p[c]-f[m],C=_/2-p[c]/2+k,A=Ky(w,C,S),M=l;n.modifiersData[r]=(e={},e[M]=A,e.centerOffset=A-C,e)}}function zke(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||YQ(e.elements.popper,s)&&(e.elements.arrow=s))}const Uke={name:"arrow",enabled:!0,phase:"main",fn:Bke,effect:zke,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fg(t){return t.split("-")[1]}var Hke={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qke(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:dg(n*s)/s||0,y:dg(r*s)/s||0}}function GV(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,a=t.offsets,o=t.position,l=t.gpuAcceleration,d=t.adaptive,c=t.roundOffsets,f=t.isFixed,p=a.x,h=p===void 0?0:p,m=a.y,g=m===void 0?0:m,y=typeof c=="function"?c({x:h,y:g}):{x:h,y:g};h=y.x,g=y.y;var x=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),k=Zi,w=Qi,S=window;if(d){var C=xb(n),A="clientHeight",M="clientWidth";if(C===_a(n)&&(C=Yc(n),rd(C).position!=="static"&&o==="absolute"&&(A="scrollHeight",M="scrollWidth")),C=C,s===Qi||(s===Zi||s===io)&&i===n1){w=so;var E=f&&C===S&&S.visualViewport?S.visualViewport.height:C[A];g-=E-r.height,g*=l?1:-1}if(s===Zi||(s===Qi||s===so)&&i===n1){k=io;var P=f&&C===S&&S.visualViewport?S.visualViewport.width:C[M];h-=P-r.width,h*=l?1:-1}}var I=Object.assign({position:o},d&&Hke),F=c===!0?qke({x:h,y:g},_a(n)):{x:h,y:g};if(h=F.x,g=F.y,l){var L;return Object.assign({},I,(L={},L[w]=_?"0":"",L[k]=x?"0":"",L.transform=(S.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",L))}return Object.assign({},I,(e={},e[w]=_?g+"px":"",e[k]=x?h+"px":"",e.transform="",e))}function Wke(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,a=i===void 0?!0:i,o=n.roundOffsets,l=o===void 0?!0:o,d={placement:El(e.placement),variation:fg(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,GV(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,GV(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Gke={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Wke,data:{}};var hx={passive:!0};function Yke(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,a=r.resize,o=a===void 0?!0:a,l=_a(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&d.forEach(function(c){c.addEventListener("scroll",n.update,hx)}),o&&l.addEventListener("resize",n.update,hx),function(){i&&d.forEach(function(c){c.removeEventListener("scroll",n.update,hx)}),o&&l.removeEventListener("resize",n.update,hx)}}const Kke={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Yke,data:{}};var Xke={left:"right",right:"left",bottom:"top",top:"bottom"};function gw(t){return t.replace(/left|right|bottom|top/g,function(e){return Xke[e]})}var Qke={start:"end",end:"start"};function YV(t){return t.replace(/start|end/g,function(e){return Qke[e]})}function aP(t){var e=_a(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function oP(t){return cg(Yc(t)).left+aP(t).scrollLeft}function Zke(t,e){var n=_a(t),r=Yc(t),s=n.visualViewport,i=r.clientWidth,a=r.clientHeight,o=0,l=0;if(s){i=s.width,a=s.height;var d=GQ();(d||!d&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}return{width:i,height:a,x:o+oP(t),y:l}}function Jke(t){var e,n=Yc(t),r=aP(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=kp(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),a=kp(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),o=-r.scrollLeft+oP(t),l=-r.scrollTop;return rd(s||n).direction==="rtl"&&(o+=kp(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:a,x:o,y:l}}function lP(t){var e=rd(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function ZQ(t){return["html","body","#document"].indexOf(Fl(t))>=0?t.ownerDocument.body:eo(t)&&lP(t)?t:ZQ(CC(t))}function Xy(t,e){var n;e===void 0&&(e=[]);var r=ZQ(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=_a(r),a=s?[i].concat(i.visualViewport||[],lP(r)?r:[]):r,o=e.concat(a);return s?o:o.concat(Xy(CC(a)))}function G$(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function eSe(t,e){var n=cg(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function KV(t,e,n){return e===HQ?G$(Zke(t,n)):Gp(e)?eSe(e,n):G$(Jke(Yc(t)))}function tSe(t){var e=Xy(CC(t)),n=["absolute","fixed"].indexOf(rd(t).position)>=0,r=n&&eo(t)?xb(t):t;return Gp(r)?e.filter(function(s){return Gp(s)&&YQ(s,r)&&Fl(s)!=="body"}):[]}function nSe(t,e,n,r){var s=e==="clippingParents"?tSe(t):[].concat(e),i=[].concat(s,[n]),a=i[0],o=i.reduce(function(l,d){var c=KV(t,d,r);return l.top=kp(c.top,l.top),l.right=P2(c.right,l.right),l.bottom=P2(c.bottom,l.bottom),l.left=kp(c.left,l.left),l},KV(t,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function JQ(t){var e=t.reference,n=t.element,r=t.placement,s=r?El(r):null,i=r?fg(r):null,a=e.x+e.width/2-n.width/2,o=e.y+e.height/2-n.height/2,l;switch(s){case Qi:l={x:a,y:e.y-n.height};break;case so:l={x:a,y:e.y+e.height};break;case io:l={x:e.x+e.width,y:o};break;case Zi:l={x:e.x-n.width,y:o};break;default:l={x:e.x,y:e.y}}var d=s?iP(s):null;if(d!=null){var c=d==="y"?"height":"width";switch(i){case ug:l[d]=l[d]-(e[c]/2-n[c]/2);break;case n1:l[d]=l[d]+(e[c]/2-n[c]/2);break}}return l}function r1(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,a=i===void 0?t.strategy:i,o=n.boundary,l=o===void 0?kke:o,d=n.rootBoundary,c=d===void 0?HQ:d,f=n.elementContext,p=f===void 0?hv:f,h=n.altBoundary,m=h===void 0?!1:h,g=n.padding,y=g===void 0?0:g,x=XQ(typeof y!="number"?y:QQ(y,bb)),_=p===hv?Ske:hv,k=t.rects.popper,w=t.elements[m?_:p],S=nSe(Gp(w)?w:w.contextElement||Yc(t.elements.popper),l,c,a),C=cg(t.elements.reference),A=JQ({reference:C,element:k,placement:s}),M=G$(Object.assign({},k,A)),E=p===hv?M:C,P={top:S.top-E.top+x.top,bottom:E.bottom-S.bottom+x.bottom,left:S.left-E.left+x.left,right:E.right-S.right+x.right},I=t.modifiersData.offset;if(p===hv&&I){var F=I[s];Object.keys(P).forEach(function(L){var z=[io,so].indexOf(L)>=0?1:-1,N=[Qi,so].indexOf(L)>=0?"y":"x";P[L]+=F[N]*z})}return P}function rSe(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,d=l===void 0?qQ:l,c=fg(r),f=c?o?qV:qV.filter(function(m){return fg(m)===c}):bb,p=f.filter(function(m){return d.indexOf(m)>=0});p.length===0&&(p=f);var h=p.reduce(function(m,g){return m[g]=r1(t,{placement:g,boundary:s,rootBoundary:i,padding:a})[El(g)],m},{});return Object.keys(h).sort(function(m,g){return h[m]-h[g]})}function sSe(t){if(El(t)===nP)return[];var e=gw(t);return[YV(t),e,YV(e)]}function iSe(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,a=n.altAxis,o=a===void 0?!0:a,l=n.fallbackPlacements,d=n.padding,c=n.boundary,f=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,m=h===void 0?!0:h,g=n.allowedAutoPlacements,y=e.options.placement,x=El(y),_=x===y,k=l||(_||!m?[gw(y)]:sSe(y)),w=[y].concat(k).reduce(function(ie,ne){return ie.concat(El(ne)===nP?rSe(e,{placement:ne,boundary:c,rootBoundary:f,padding:d,flipVariations:m,allowedAutoPlacements:g}):ne)},[]),S=e.rects.reference,C=e.rects.popper,A=new Map,M=!0,E=w[0],P=0;P<w.length;P++){var I=w[P],F=El(I),L=fg(I)===ug,z=[Qi,so].indexOf(F)>=0,N=z?"width":"height",q=r1(e,{placement:I,boundary:c,rootBoundary:f,altBoundary:p,padding:d}),V=z?L?io:Zi:L?so:Qi;S[N]>C[N]&&(V=gw(V));var O=gw(V),X=[];if(i&&X.push(q[F]<=0),o&&X.push(q[V]<=0,q[O]<=0),X.every(function(ie){return ie})){E=I,M=!1;break}A.set(I,X)}if(M)for(var j=m?3:1,U=function(ne){var ce=w.find(function(oe){var re=A.get(oe);if(re)return re.slice(0,ne).every(function(te){return te})});if(ce)return E=ce,"break"},G=j;G>0;G--){var ee=U(G);if(ee==="break")break}e.placement!==E&&(e.modifiersData[r]._skip=!0,e.placement=E,e.reset=!0)}}const aSe={name:"flip",enabled:!0,phase:"main",fn:iSe,requiresIfExists:["offset"],data:{_skip:!1}};function XV(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function QV(t){return[Qi,io,so,Zi].some(function(e){return t[e]>=0})}function oSe(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,a=r1(e,{elementContext:"reference"}),o=r1(e,{altBoundary:!0}),l=XV(a,r),d=XV(o,s,i),c=QV(l),f=QV(d);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const lSe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:oSe};function uSe(t,e,n){var r=El(t),s=[Zi,Qi].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=i[0],o=i[1];return a=a||0,o=(o||0)*s,[Zi,io].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}function dSe(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,a=qQ.reduce(function(c,f){return c[f]=uSe(f,e.rects,i),c},{}),o=a[e.placement],l=o.x,d=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=a}const cSe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:dSe};function fSe(t){var e=t.state,n=t.name;e.modifiersData[n]=JQ({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const pSe={name:"popperOffsets",enabled:!0,phase:"read",fn:fSe,data:{}};function hSe(t){return t==="x"?"y":"x"}function mSe(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,a=n.altAxis,o=a===void 0?!1:a,l=n.boundary,d=n.rootBoundary,c=n.altBoundary,f=n.padding,p=n.tether,h=p===void 0?!0:p,m=n.tetherOffset,g=m===void 0?0:m,y=r1(e,{boundary:l,rootBoundary:d,padding:f,altBoundary:c}),x=El(e.placement),_=fg(e.placement),k=!_,w=iP(x),S=hSe(w),C=e.modifiersData.popperOffsets,A=e.rects.reference,M=e.rects.popper,E=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,P=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,F={x:0,y:0};if(C){if(i){var L,z=w==="y"?Qi:Zi,N=w==="y"?so:io,q=w==="y"?"height":"width",V=C[w],O=V+y[z],X=V-y[N],j=h?-M[q]/2:0,U=_===ug?A[q]:M[q],G=_===ug?-M[q]:-A[q],ee=e.elements.arrow,ie=h&&ee?sP(ee):{width:0,height:0},ne=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:KQ(),ce=ne[z],oe=ne[N],re=Ky(0,A[q],ie[q]),te=k?A[q]/2-j-re-ce-P.mainAxis:U-re-ce-P.mainAxis,K=k?-A[q]/2+j+re+oe+P.mainAxis:G+re+oe+P.mainAxis,le=e.elements.arrow&&xb(e.elements.arrow),H=le?w==="y"?le.clientTop||0:le.clientLeft||0:0,Y=(L=I==null?void 0:I[w])!=null?L:0,B=V+te-Y-H,ae=V+K-Y,be=Ky(h?P2(O,B):O,V,h?kp(X,ae):X);C[w]=be,F[w]=be-V}if(o){var fe,me=w==="x"?Qi:Zi,ye=w==="x"?so:io,Ee=C[S],Re=S==="y"?"height":"width",Ye=Ee+y[me],Xe=Ee-y[ye],st=[Qi,Zi].indexOf(x)!==-1,it=(fe=I==null?void 0:I[S])!=null?fe:0,Fe=st?Ye:Ee-A[Re]-M[Re]-it+P.altAxis,Pe=st?Ee+A[Re]+M[Re]-it-P.altAxis:Xe,je=h&&st?jke(Fe,Ee,Pe):Ky(h?Fe:Ye,Ee,h?Pe:Xe);C[S]=je,F[S]=je-Ee}e.modifiersData[r]=F}}const gSe={name:"preventOverflow",enabled:!0,phase:"main",fn:mSe,requiresIfExists:["offset"]};function vSe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ySe(t){return t===_a(t)||!eo(t)?aP(t):vSe(t)}function bSe(t){var e=t.getBoundingClientRect(),n=dg(e.width)/t.offsetWidth||1,r=dg(e.height)/t.offsetHeight||1;return n!==1||r!==1}function xSe(t,e,n){n===void 0&&(n=!1);var r=eo(e),s=eo(e)&&bSe(e),i=Yc(e),a=cg(t,s,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Fl(e)!=="body"||lP(i))&&(o=ySe(e)),eo(e)?(l=cg(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=oP(i))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function _Se(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(o){if(!n.has(o)){var l=e.get(o);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function wSe(t){var e=_Se(t);return Ike.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function kSe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function SSe(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var ZV={placement:"bottom",modifiers:[],strategy:"absolute"};function JV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function CSe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?ZV:s;return function(o,l,d){d===void 0&&(d=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},ZV,i),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},f=[],p=!1,h={state:c,setOptions:function(x){var _=typeof x=="function"?x(c.options):x;g(),c.options=Object.assign({},i,c.options,_),c.scrollParents={reference:Gp(o)?Xy(o):o.contextElement?Xy(o.contextElement):[],popper:Xy(l)};var k=wSe(SSe([].concat(r,c.options.modifiers)));return c.orderedModifiers=k.filter(function(w){return w.enabled}),m(),h.update()},forceUpdate:function(){if(!p){var x=c.elements,_=x.reference,k=x.popper;if(JV(_,k)){c.rects={reference:xSe(_,xb(k),c.options.strategy==="fixed"),popper:sP(k)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(P){return c.modifiersData[P.name]=Object.assign({},P.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var S=c.orderedModifiers[w],C=S.fn,A=S.options,M=A===void 0?{}:A,E=S.name;typeof C=="function"&&(c=C({state:c,options:M,name:E,instance:h})||c)}}}},update:kSe(function(){return new Promise(function(y){h.forceUpdate(),y(c)})}),destroy:function(){g(),p=!0}};if(!JV(o,l))return h;h.setOptions(d).then(function(y){!p&&d.onFirstUpdate&&d.onFirstUpdate(y)});function m(){c.orderedModifiers.forEach(function(y){var x=y.name,_=y.options,k=_===void 0?{}:_,w=y.effect;if(typeof w=="function"){var S=w({state:c,name:x,instance:h,options:k}),C=function(){};f.push(S||C)}})}function g(){f.forEach(function(y){return y()}),f=[]}return h}}var ASe=[Kke,pSe,Gke,WQ,cSe,aSe,gSe,Uke,lSe],TSe=CSe({defaultModifiers:ASe}),$Se="tippy-box",eZ="tippy-content",MSe="tippy-backdrop",tZ="tippy-arrow",nZ="tippy-svg-arrow",Of={passive:!0,capture:!0},rZ=function(){return document.body};function T4(t,e,n){if(Array.isArray(t)){var r=t[e];return r==null?Array.isArray(n)?n[e]:n:r}return t}function uP(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function sZ(t,e){return typeof t=="function"?t.apply(void 0,e):t}function eN(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function ESe(t){return t.split(/\s+/).filter(Boolean)}function mm(t){return[].concat(t)}function tN(t,e){t.indexOf(e)===-1&&t.push(e)}function DSe(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function RSe(t){return t.split("-")[0]}function I2(t){return[].slice.call(t)}function nN(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Qy(){return document.createElement("div")}function AC(t){return["Element","Fragment"].some(function(e){return uP(t,e)})}function PSe(t){return uP(t,"NodeList")}function ISe(t){return uP(t,"MouseEvent")}function OSe(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function LSe(t){return AC(t)?[t]:PSe(t)?I2(t):Array.isArray(t)?t:I2(document.querySelectorAll(t))}function $4(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function rN(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function VSe(t){var e,n=mm(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function NSe(t,e){var n=e.clientX,r=e.clientY;return t.every(function(s){var i=s.popperRect,a=s.popperState,o=s.props,l=o.interactiveBorder,d=RSe(a.placement),c=a.modifiersData.offset;if(!c)return!0;var f=d==="bottom"?c.top.y:0,p=d==="top"?c.bottom.y:0,h=d==="right"?c.left.x:0,m=d==="left"?c.right.x:0,g=i.top-r+f>l,y=r-i.bottom-p>l,x=i.left-n+h>l,_=n-i.right-m>l;return g||y||x||_})}function M4(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){t[r](s,n)})}function sN(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var vl={isTouch:!1},iN=0;function jSe(){vl.isTouch||(vl.isTouch=!0,window.performance&&document.addEventListener("mousemove",iZ))}function iZ(){var t=performance.now();t-iN<20&&(vl.isTouch=!1,document.removeEventListener("mousemove",iZ)),iN=t}function FSe(){var t=document.activeElement;if(OSe(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function BSe(){document.addEventListener("touchstart",jSe,Of),window.addEventListener("blur",FSe)}var zSe=typeof window!="undefined"&&typeof document!="undefined",USe=zSe?!!window.msCrypto:!1,HSe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},qSe={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Co=Object.assign({appendTo:rZ,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},HSe,qSe),WSe=Object.keys(Co),GSe=function(e){var n=Object.keys(e);n.forEach(function(r){Co[r]=e[r]})};function aZ(t){var e=t.plugins||[],n=e.reduce(function(r,s){var i=s.name,a=s.defaultValue;if(i){var o;r[i]=t[i]!==void 0?t[i]:(o=Co[i])!=null?o:a}return r},{});return Object.assign({},t,n)}function YSe(t,e){var n=e?Object.keys(aZ(Object.assign({},Co,{plugins:e}))):WSe,r=n.reduce(function(s,i){var a=(t.getAttribute("data-tippy-"+i)||"").trim();if(!a)return s;if(i==="content")s[i]=a;else try{s[i]=JSON.parse(a)}catch(o){s[i]=a}return s},{});return r}function aN(t,e){var n=Object.assign({},e,{content:sZ(e.content,[t])},e.ignoreAttributes?{}:YSe(t,e.plugins));return n.aria=Object.assign({},Co.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var KSe=function(){return"innerHTML"};function Y$(t,e){t[KSe()]=e}function oN(t){var e=Qy();return t===!0?e.className=tZ:(e.className=nZ,AC(t)?e.appendChild(t):Y$(e,t)),e}function lN(t,e){AC(e.content)?(Y$(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Y$(t,e.content):t.textContent=e.content)}function K$(t){var e=t.firstElementChild,n=I2(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(eZ)}),arrow:n.find(function(r){return r.classList.contains(tZ)||r.classList.contains(nZ)}),backdrop:n.find(function(r){return r.classList.contains(MSe)})}}function oZ(t){var e=Qy(),n=Qy();n.className=$Se,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Qy();r.className=eZ,r.setAttribute("data-state","hidden"),lN(r,t.props),e.appendChild(n),n.appendChild(r),s(t.props,t.props);function s(i,a){var o=K$(e),l=o.box,d=o.content,c=o.arrow;a.theme?l.setAttribute("data-theme",a.theme):l.removeAttribute("data-theme"),typeof a.animation=="string"?l.setAttribute("data-animation",a.animation):l.removeAttribute("data-animation"),a.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?l.setAttribute("role",a.role):l.removeAttribute("role"),(i.content!==a.content||i.allowHTML!==a.allowHTML)&&lN(d,t.props),a.arrow?c?i.arrow!==a.arrow&&(l.removeChild(c),l.appendChild(oN(a.arrow))):l.appendChild(oN(a.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:s}}oZ.$$tippy=!0;var XSe=1,mx=[],E4=[];function QSe(t,e){var n=aN(t,Object.assign({},Co,aZ(nN(e)))),r,s,i,a=!1,o=!1,l=!1,d=!1,c,f,p,h=[],m=eN(B,n.interactiveDebounce),g,y=XSe++,x=null,_=DSe(n.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},w={id:y,reference:t,popper:Qy(),popperInstance:x,props:n,state:k,plugins:_,clearDelayTimeouts:Fe,setProps:Pe,setContent:je,show:Ie,hide:Se,hideWithInteractivity:Ce,enable:st,disable:it,unmount:Le,destroy:Pt};if(!n.render)return w;var S=n.render(w),C=S.popper,A=S.onUpdate;C.setAttribute("data-tippy-root",""),C.id="tippy-"+w.id,w.popper=C,t._tippy=w,C._tippy=w;var M=_.map(function($e){return $e.fn(w)}),E=t.hasAttribute("aria-expanded");return le(),j(),V(),O("onCreate",[w]),n.showOnCreate&&Ye(),C.addEventListener("mouseenter",function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()}),C.addEventListener("mouseleave",function(){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&z().addEventListener("mousemove",m)}),w;function P(){var $e=w.props.touch;return Array.isArray($e)?$e:[$e,0]}function I(){return P()[0]==="hold"}function F(){var $e;return!!(($e=w.props.render)!=null&&$e.$$tippy)}function L(){return g||t}function z(){var $e=L().parentNode;return $e?VSe($e):document}function N(){return K$(C)}function q($e){return w.state.isMounted&&!w.state.isVisible||vl.isTouch||c&&c.type==="focus"?0:T4(w.props.delay,$e?0:1,Co.delay)}function V($e){$e===void 0&&($e=!1),C.style.pointerEvents=w.props.interactive&&!$e?"":"none",C.style.zIndex=""+w.props.zIndex}function O($e,Ae,ke){if(ke===void 0&&(ke=!0),M.forEach(function($t){$t[$e]&&$t[$e].apply($t,Ae)}),ke){var Ue;(Ue=w.props)[$e].apply(Ue,Ae)}}function X(){var $e=w.props.aria;if($e.content){var Ae="aria-"+$e.content,ke=C.id,Ue=mm(w.props.triggerTarget||t);Ue.forEach(function($t){var Nn=$t.getAttribute(Ae);if(w.state.isVisible)$t.setAttribute(Ae,Nn?Nn+" "+ke:ke);else{var Oe=Nn&&Nn.replace(ke,"").trim();Oe?$t.setAttribute(Ae,Oe):$t.removeAttribute(Ae)}})}}function j(){if(!(E||!w.props.aria.expanded)){var $e=mm(w.props.triggerTarget||t);$e.forEach(function(Ae){w.props.interactive?Ae.setAttribute("aria-expanded",w.state.isVisible&&Ae===L()?"true":"false"):Ae.removeAttribute("aria-expanded")})}}function U(){z().removeEventListener("mousemove",m),mx=mx.filter(function($e){return $e!==m})}function G($e){if(!(vl.isTouch&&(l||$e.type==="mousedown"))){var Ae=$e.composedPath&&$e.composedPath()[0]||$e.target;if(!(w.props.interactive&&sN(C,Ae))){if(mm(w.props.triggerTarget||t).some(function(ke){return sN(ke,Ae)})){if(vl.isTouch||w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else O("onClickOutside",[w,$e]);w.props.hideOnClick===!0&&(w.clearDelayTimeouts(),w.hide(),o=!0,setTimeout(function(){o=!1}),w.state.isMounted||ce())}}}function ee(){l=!0}function ie(){l=!1}function ne(){var $e=z();$e.addEventListener("mousedown",G,!0),$e.addEventListener("touchend",G,Of),$e.addEventListener("touchstart",ie,Of),$e.addEventListener("touchmove",ee,Of)}function ce(){var $e=z();$e.removeEventListener("mousedown",G,!0),$e.removeEventListener("touchend",G,Of),$e.removeEventListener("touchstart",ie,Of),$e.removeEventListener("touchmove",ee,Of)}function oe($e,Ae){te($e,function(){!w.state.isVisible&&C.parentNode&&C.parentNode.contains(C)&&Ae()})}function re($e,Ae){te($e,Ae)}function te($e,Ae){var ke=N().box;function Ue($t){$t.target===ke&&(M4(ke,"remove",Ue),Ae())}if($e===0)return Ae();M4(ke,"remove",f),M4(ke,"add",Ue),f=Ue}function K($e,Ae,ke){ke===void 0&&(ke=!1);var Ue=mm(w.props.triggerTarget||t);Ue.forEach(function($t){$t.addEventListener($e,Ae,ke),h.push({node:$t,eventType:$e,handler:Ae,options:ke})})}function le(){I()&&(K("touchstart",Y,{passive:!0}),K("touchend",ae,{passive:!0})),ESe(w.props.trigger).forEach(function($e){if($e!=="manual")switch(K($e,Y),$e){case"mouseenter":K("mouseleave",ae);break;case"focus":K(USe?"focusout":"blur",be);break;case"focusin":K("focusout",be);break}})}function H(){h.forEach(function($e){var Ae=$e.node,ke=$e.eventType,Ue=$e.handler,$t=$e.options;Ae.removeEventListener(ke,Ue,$t)}),h=[]}function Y($e){var Ae,ke=!1;if(!(!w.state.isEnabled||fe($e)||o)){var Ue=((Ae=c)==null?void 0:Ae.type)==="focus";c=$e,g=$e.currentTarget,j(),!w.state.isVisible&&ISe($e)&&mx.forEach(function($t){return $t($e)}),$e.type==="click"&&(w.props.trigger.indexOf("mouseenter")<0||a)&&w.props.hideOnClick!==!1&&w.state.isVisible?ke=!0:Ye($e),$e.type==="click"&&(a=!ke),ke&&!Ue&&Xe($e)}}function B($e){var Ae=$e.target,ke=L().contains(Ae)||C.contains(Ae);if(!($e.type==="mousemove"&&ke)){var Ue=Re().concat(C).map(function($t){var Nn,Oe=$t._tippy,Ge=(Nn=Oe.popperInstance)==null?void 0:Nn.state;return Ge?{popperRect:$t.getBoundingClientRect(),popperState:Ge,props:n}:null}).filter(Boolean);NSe(Ue,$e)&&(U(),Xe($e))}}function ae($e){var Ae=fe($e)||w.props.trigger.indexOf("click")>=0&&a;if(!Ae){if(w.props.interactive){w.hideWithInteractivity($e);return}Xe($e)}}function be($e){w.props.trigger.indexOf("focusin")<0&&$e.target!==L()||w.props.interactive&&$e.relatedTarget&&C.contains($e.relatedTarget)||Xe($e)}function fe($e){return vl.isTouch?I()!==$e.type.indexOf("touch")>=0:!1}function me(){ye();var $e=w.props,Ae=$e.popperOptions,ke=$e.placement,Ue=$e.offset,$t=$e.getReferenceClientRect,Nn=$e.moveTransition,Oe=F()?K$(C).arrow:null,Ge=$t?{getBoundingClientRect:$t,contextElement:$t.contextElement||L()}:t,Bt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Ch){var yr=Ch.state;if(F()){var _d=N(),nv=_d.box;["placement","reference-hidden","escaped"].forEach(function(Zc){Zc==="placement"?nv.setAttribute("data-placement",yr.placement):yr.attributes.popper["data-popper-"+Zc]?nv.setAttribute("data-"+Zc,""):nv.removeAttribute("data-"+Zc)}),yr.attributes.popper={}}}},As=[{name:"offset",options:{offset:Ue}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Nn}},Bt];F()&&Oe&&As.push({name:"arrow",options:{element:Oe,padding:3}}),As.push.apply(As,(Ae==null?void 0:Ae.modifiers)||[]),w.popperInstance=TSe(Ge,C,Object.assign({},Ae,{placement:ke,onFirstUpdate:p,modifiers:As}))}function ye(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function Ee(){var $e=w.props.appendTo,Ae,ke=L();w.props.interactive&&$e===rZ||$e==="parent"?Ae=ke.parentNode:Ae=sZ($e,[ke]),Ae.contains(C)||Ae.appendChild(C),w.state.isMounted=!0,me()}function Re(){return I2(C.querySelectorAll("[data-tippy-root]"))}function Ye($e){w.clearDelayTimeouts(),$e&&O("onTrigger",[w,$e]),ne();var Ae=q(!0),ke=P(),Ue=ke[0],$t=ke[1];vl.isTouch&&Ue==="hold"&&$t&&(Ae=$t),Ae?r=setTimeout(function(){w.show()},Ae):w.show()}function Xe($e){if(w.clearDelayTimeouts(),O("onUntrigger",[w,$e]),!w.state.isVisible){ce();return}if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf($e.type)>=0&&a)){var Ae=q(!1);Ae?s=setTimeout(function(){w.state.isVisible&&w.hide()},Ae):i=requestAnimationFrame(function(){w.hide()})}}function st(){w.state.isEnabled=!0}function it(){w.hide(),w.state.isEnabled=!1}function Fe(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(i)}function Pe($e){if(!w.state.isDestroyed){O("onBeforeUpdate",[w,$e]),H();var Ae=w.props,ke=aN(t,Object.assign({},Ae,nN($e),{ignoreAttributes:!0}));w.props=ke,le(),Ae.interactiveDebounce!==ke.interactiveDebounce&&(U(),m=eN(B,ke.interactiveDebounce)),Ae.triggerTarget&&!ke.triggerTarget?mm(Ae.triggerTarget).forEach(function(Ue){Ue.removeAttribute("aria-expanded")}):ke.triggerTarget&&t.removeAttribute("aria-expanded"),j(),V(),A&&A(Ae,ke),w.popperInstance&&(me(),Re().forEach(function(Ue){requestAnimationFrame(Ue._tippy.popperInstance.forceUpdate)})),O("onAfterUpdate",[w,$e])}}function je($e){w.setProps({content:$e})}function Ie(){var $e=w.state.isVisible,Ae=w.state.isDestroyed,ke=!w.state.isEnabled,Ue=vl.isTouch&&!w.props.touch,$t=T4(w.props.duration,0,Co.duration);if(!($e||Ae||ke||Ue)&&!L().hasAttribute("disabled")&&(O("onShow",[w],!1),w.props.onShow(w)!==!1)){if(w.state.isVisible=!0,F()&&(C.style.visibility="visible"),V(),ne(),w.state.isMounted||(C.style.transition="none"),F()){var Nn=N(),Oe=Nn.box,Ge=Nn.content;$4([Oe,Ge],0)}p=function(){var As;if(!(!w.state.isVisible||d)){if(d=!0,C.offsetHeight,C.style.transition=w.props.moveTransition,F()&&w.props.animation){var tv=N(),Ch=tv.box,yr=tv.content;$4([Ch,yr],$t),rN([Ch,yr],"visible")}X(),j(),tN(E4,w),(As=w.popperInstance)==null||As.forceUpdate(),O("onMount",[w]),w.props.animation&&F()&&re($t,function(){w.state.isShown=!0,O("onShown",[w])})}},Ee()}}function Se(){var $e=!w.state.isVisible,Ae=w.state.isDestroyed,ke=!w.state.isEnabled,Ue=T4(w.props.duration,1,Co.duration);if(!($e||Ae||ke)&&(O("onHide",[w],!1),w.props.onHide(w)!==!1)){if(w.state.isVisible=!1,w.state.isShown=!1,d=!1,a=!1,F()&&(C.style.visibility="hidden"),U(),ce(),V(!0),F()){var $t=N(),Nn=$t.box,Oe=$t.content;w.props.animation&&($4([Nn,Oe],Ue),rN([Nn,Oe],"hidden"))}X(),j(),w.props.animation?F()&&oe(Ue,w.unmount):w.unmount()}}function Ce($e){z().addEventListener("mousemove",m),tN(mx,m),m($e)}function Le(){w.state.isVisible&&w.hide(),w.state.isMounted&&(ye(),Re().forEach(function($e){$e._tippy.unmount()}),C.parentNode&&C.parentNode.removeChild(C),E4=E4.filter(function($e){return $e!==w}),w.state.isMounted=!1,O("onHidden",[w]))}function Pt(){w.state.isDestroyed||(w.clearDelayTimeouts(),w.unmount(),H(),delete t._tippy,w.state.isDestroyed=!0,O("onDestroy",[w]))}}function Kc(t,e){e===void 0&&(e={});var n=Co.plugins.concat(e.plugins||[]);BSe();var r=Object.assign({},e,{plugins:n}),s=LSe(t),i=s.reduce(function(a,o){var l=o&&QSe(o,r);return l&&a.push(l),a},[]);return AC(t)?i[0]:i}Kc.defaultProps=Co;Kc.setDefaultProps=GSe;Kc.currentInput=vl;Object.assign({},WQ,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Kc.setDefaultProps({render:oZ});class ZSe{constructor({editor:e,element:n,view:r,tippyOptions:s={},updateDelay:i=250,shouldShow:a}){this.preventHide=!1,this.shouldShow=({view:o,state:l,from:d,to:c})=>{const{doc:f,selection:p}=l,{empty:h}=p,m=!f.textBetween(d,c).length&&JR(l.selection),g=this.element.contains(document.activeElement);return!(!(o.hasFocus()||g)||h||m||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:o})=>{var l;if(this.preventHide){this.preventHide=!1;return}o!=null&&o.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(o.relatedTarget))||(o==null?void 0:o.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=o=>{this.blurHandler({event:o})},this.handleDebouncedUpdate=(o,l)=>{const d=!(l!=null&&l.selection.eq(o.state.selection)),c=!(l!=null&&l.doc.eq(o.state.doc));!d&&!c||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(o,d,c,l)},this.updateDelay))},this.updateHandler=(o,l,d,c)=>{var f,p,h;const{state:m,composing:g}=o,{selection:y}=m;if(g||!l&&!d)return;this.createTooltip();const{ranges:_}=y,k=Math.min(..._.map(C=>C.$from.pos)),w=Math.max(..._.map(C=>C.$to.pos));if(!((f=this.shouldShow)===null||f===void 0?void 0:f.call(this,{editor:this.editor,element:this.element,view:o,state:m,oldState:c,from:k,to:w}))){this.hide();return}(p=this.tippy)===null||p===void 0||p.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(BQ(m.selection)){let C=o.nodeDOM(k);if(C){const A=C.dataset.nodeViewWrapper?C:C.querySelector("[data-node-view-wrapper]");if(A&&(C=A.firstChild),C)return C.getBoundingClientRect()}}return zQ(o,k,w)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=i,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=s,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!n)&&(this.tippy=Kc(e,ge({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,s=r.selection.from!==r.selection.to;if(this.updateDelay>0&&s){this.handleDebouncedUpdate(e,n);return}const i=!(n!=null&&n.selection.eq(e.state.selection)),a=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,i,a,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const lZ=t=>new Vn({key:typeof t.pluginKey=="string"?new Hn(t.pluginKey):t.pluginKey,view:e=>new ZSe(ge({view:e},t))});wr.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[lZ({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class JSe{getTextContent(e){return jQ(e,{textSerializers:ZR(this.editor.schema)})}constructor({editor:e,element:n,view:r,tippyOptions:s={},shouldShow:i}){this.preventHide=!1,this.shouldShow=({view:a,state:o})=>{const{selection:l}=o,{$anchor:d,empty:c}=l,f=d.depth===1,p=d.parent.isTextblock&&!d.parent.type.spec.code&&!d.parent.textContent&&d.parent.childCount===0&&!this.getTextContent(d.parent);return!(!a.hasFocus()||!c||!f||!p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var o;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((o=this.element.parentNode)===null||o===void 0)&&o.contains(a.relatedTarget))||(a==null?void 0:a.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.editor=e,this.element=n,this.view=r,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=s,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!n)&&(this.tippy=Kc(e,ge({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){var r,s,i;const{state:a}=e,{doc:o,selection:l}=a,{from:d,to:c}=l;if(n&&n.doc.eq(o)&&n.selection.eq(l))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:a,oldState:n}))){this.hide();return}(s=this.tippy)===null||s===void 0||s.setProps({getReferenceClientRect:((i=this.tippyOptions)===null||i===void 0?void 0:i.getReferenceClientRect)||(()=>zQ(e,d,c))}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const uZ=t=>new Vn({key:typeof t.pluginKey=="string"?new Hn(t.pluginKey):t.pluginKey,view:e=>new JSe(ge({view:e},t))});wr.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[uZ({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});const eCe=Je({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=Q(null);return yt(()=>{const{updateDelay:r,editor:s,pluginKey:i,shouldShow:a,tippyOptions:o}=t;s.registerPlugin(lZ({updateDelay:r,editor:s,element:n.value,pluginKey:i,shouldShow:a,tippyOptions:o}))}),Gl(()=>{const{pluginKey:r,editor:s}=t;s.unregisterPlugin(r)}),()=>{var r;return pr("div",{ref:n},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});function uN(t){return VS((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class dZ extends bke{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=uN(this.view.state),this.reactiveExtensionStorage=uN(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),zt(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const cZ=Je({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=Q(),n=ai();return Hr(()=>{const r=t.editor;r&&r.options.element&&e.value&&nr(()=>{if(!e.value||!r.options.element.firstChild)return;const s=v(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext=ze(ge({},n.appContext),{provides:n.provides})),r.setOptions({element:s}),r.createNodeViews()})}),Gl(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return pr("div",{ref:t=>{this.rootEl=t}})}}),tCe=Je({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=Q(null);return yt(()=>{const{pluginKey:r,editor:s,tippyOptions:i,shouldShow:a}=t;s.registerPlugin(uZ({pluginKey:r,editor:s,element:n.value,tippyOptions:i,shouldShow:a}))}),Gl(()=>{const{pluginKey:r,editor:s}=t;s.unregisterPlugin(r)}),()=>{var r;return pr("div",{ref:n},(r=e.default)===null||r===void 0?void 0:r.call(e))}}}),nCe=Je({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return pr(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),TC=Je({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var t,e;return pr(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t))}}),rCe=(t={})=>{const e=Mo();return yt(()=>{e.value=new dZ(t)}),Gl(()=>{var n,r,s;const i=(n=e.value)===null||n===void 0?void 0:n.options.element,a=i==null?void 0:i.cloneNode(!0);(r=i==null?void 0:i.parentNode)===null||r===void 0||r.replaceChild(a,i),(s=e.value)===null||s===void 0||s.destroy()}),e};class fZ{constructor(e,{props:n={},editor:r}){this.editor=r,this.component=zt(e),this.el=document.createElement("div"),this.props=Jt(n),this.renderedComponent=this.renderComponent()}get element(){return this.renderedComponent.el}get ref(){var e,n,r,s;return!((n=(e=this.renderedComponent.vNode)===null||e===void 0?void 0:e.component)===null||n===void 0)&&n.exposed?this.renderedComponent.vNode.component.exposed:(s=(r=this.renderedComponent.vNode)===null||r===void 0?void 0:r.component)===null||s===void 0?void 0:s.proxy}renderComponent(){let e=pr(this.component,this.props);return this.editor.appContext&&(e.appContext=this.editor.appContext),typeof document!="undefined"&&this.el&&CL(e,this.el),{vNode:e,destroy:()=>{this.el&&CL(null,this.el),this.el=null,e=null},el:this.el?this.el.firstElementChild:null}}updateProps(e={}){Object.entries(e).forEach(([n,r])=>{this.props[n]=r}),this.renderComponent()}destroy(){this.renderedComponent.destroy()}}const dP={editor:{type:Object,required:!0},node:{type:Object,required:!0},decorations:{type:Object,required:!0},selected:{type:Boolean,required:!0},extension:{type:Object,required:!0},getPos:{type:Function,required:!0},updateAttributes:{type:Function,required:!0},deleteNode:{type:Function,required:!0},view:{type:Object,required:!0},innerDecorations:{type:Object,required:!0},HTMLAttributes:{type:Object,required:!0}};class sCe extends xke{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(s={})=>this.updateAttributes(s),deleteNode:()=>this.deleteNode()},n=this.onDragStart.bind(this);this.decorationClasses=Q(this.getDecorationClasses());const r=Je({extends:ge({},this.component),props:Object.keys(e),template:this.component.template,setup:s=>{var i,a;return _i("onDragStart",n),_i("decorationClasses",this.decorationClasses),(a=(i=this.component).setup)===null||a===void 0?void 0:a.call(i,s,{expose:()=>{}})},__scopeId:this.component.__scopeId,__cssModules:this.component.__cssModules,__name:this.component.__name,__file:this.component.__file});this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new fZ(r,{editor:this.editor,props:e})}get dom(){if(!this.renderer.element||!this.renderer.element.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.dom.querySelector("[data-node-view-content]")}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const s=i=>{this.decorationClasses.value=this.getDecorationClasses(),this.renderer.updateProps(i)};if(typeof this.options.update=="function"){const i=this.node,a=this.decorations,o=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:n,oldInnerDecorations:o,innerDecorations:r,updateProps:()=>s({node:e,decorations:n,innerDecorations:r})})}return e.type!==this.node.type?!1:(e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,s({node:e,decorations:n,innerDecorations:r})),!0)}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element&&this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element&&this.renderer.element.classList.remove("ProseMirror-selectednode")}getDecorationClasses(){return this.decorations.map(e=>e.type.attrs.class).flat().join(" ")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate)}}function _b(t,e){return n=>{if(!n.editor.contentComponent)return{};const r=typeof t=="function"&&"__vccOpts"in t?t.__vccOpts:t;return new sCe(r,n,e)}}const iCe=/^\s*>\s$/,aCe=Er.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[lg({find:iCe,type:this.type})]}}),oCe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,lCe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,uCe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,dCe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,cCe=jo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[qp({find:oCe,type:this.type}),qp({find:uCe,type:this.type})]},addPasteRules(){return[Wp({find:lCe,type:this.type}),Wp({find:dCe,type:this.type})]}}),fCe="listItem",dN="textStyle",cN=/^\s*([-+*])\s$/,pCe=Er.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fCe,this.editor.getAttributes(dN)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=lg({find:cN,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=lg({find:cN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(dN),editor:this.editor})),[t]}}),hCe=/(^|[^`])`([^`]+)`(?!`)/,mCe=/(^|[^`])`([^`]+)`(?!`)/g,pZ=jo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[qp({find:hCe,type:this.type})]},addPasteRules(){return[Wp({find:mCe,type:this.type})]}}),gCe=/^```([a-z]+)?[\s\n]$/,vCe=/^~~~([a-z]+)?[\s\n]$/,hZ=Er.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ln(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!i||!a?!1:t.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const o=s.after();return o===void 0?!1:r.nodeAt(o)?t.commands.command(({tr:d})=>(d.setSelection(Yt.near(r.resolve(o))),!0)):t.commands.exitCode()}}},addInputRules(){return[R2({find:gCe,type:this.type,getAttributes:t=>({language:t[1]})}),R2({find:vCe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Vn({key:new Hn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:a,schema:o}=t.state,l=o.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:i},l)),a.selection.$from.parent.type!==this.type&&a.setSelection(Wt.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),t.dispatch(a),!0}}})]}}),yCe=Er.create({name:"doc",topNode:!0,content:"block+"});function bCe(t={}){return new Vn({view(e){return new xCe(e,t)}})}class xCe{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=a=>{this[s](a)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),a=i.width/s.offsetWidth,o=i.height/s.offsetHeight;if(n){let f=e.nodeBefore,p=e.nodeAfter;if(f||p){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let m=h.getBoundingClientRect(),g=f?m.bottom:m.top;f&&p&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*o;r={left:m.left,right:m.right,top:g-y,bottom:g+y}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*a;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")d=-pageXOffset,c=-pageYOffset;else{let f=l.getBoundingClientRect(),p=f.width/l.offsetWidth,h=f.height/l.offsetHeight;d=f.left-l.scrollLeft*p,c=f.top-l.scrollTop*h}this.element.style.left=(r.left-d)/a+"px",this.element.style.top=(r.top-c)/o+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=MX(this.editorView.state.doc,a,this.editorView.dragging.slice);o!=null&&(a=o)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const _Ce=wr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[bCe(this.options)]}});class Ir extends Yt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ir.valid(r)?new Ir(r):Yt.near(r)}content(){return gt.empty}eq(e){return e instanceof Ir&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ir(e.resolve(n.pos))}getBookmark(){return new cP(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!wCe(e)||!kCe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ir.valid(e))return e;let s=e.pos,i=null;for(let a=e.depth;;a--){let o=e.node(a);if(n>0?e.indexAfter(a)<o.childCount:e.index(a)>0){i=o.child(n>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;s+=n;let l=e.doc.resolve(s);if(Ir.valid(l))return l}for(;;){let a=n>0?i.firstChild:i.lastChild;if(!a){if(i.isAtom&&!i.isText&&!Ft.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=a,s+=n;let o=e.doc.resolve(s);if(Ir.valid(o))return o}return null}}}Ir.prototype.visible=!1;Ir.findFrom=Ir.findGapCursorFrom;Yt.jsonID("gapcursor",Ir);class cP{constructor(e){this.pos=e}map(e){return new cP(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ir.valid(n)?new Ir(n):Yt.near(n)}}function mZ(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function wCe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||mZ(s.type))return!0;if(s.inlineContent)return!1}}return!0}function kCe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||mZ(s.type))return!0;if(s.inlineContent)return!1}}return!0}function SCe(){return new Vn({props:{decorations:$Ce,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ir.valid(n)?new Ir(n):null},handleClick:ACe,handleKeyDown:CCe,handleDOMEvents:{beforeinput:TCe}}})}const CCe=HR({ArrowLeft:gx("horiz",-1),ArrowRight:gx("horiz",1),ArrowUp:gx("vert",-1),ArrowDown:gx("vert",1)});function gx(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let a=r.selection,o=e>0?a.$to:a.$from,l=a.empty;if(a instanceof Wt){if(!i.endOfTextblock(n)||o.depth==0)return!1;l=!1,o=r.doc.resolve(e>0?o.after():o.before())}let d=Ir.findGapCursorFrom(o,e,l);return d?(s&&s(r.tr.setSelection(new Ir(d))),!0):!1}}function ACe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ir.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Ft.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ir(r))),!0)}function TCe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ir))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=Ze.empty;for(let a=r.length-1;a>=0;a--)s=Ze.from(r[a].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new gt(s,0,0));return i.setSelection(Wt.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function $Ce(t){if(!(t.selection instanceof Ir))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",_r.create(t.doc,[bs.widget(t.selection.head,e,{key:"gapcursor"})])}const MCe=wr.create({name:"gapCursor",addProseMirrorPlugins(){return[SCe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=pn(Ct(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),ECe=Er.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ln(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:o}=r.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:c})=>{if(c&&l&&a){const f=l.filter(p=>o.includes(p.type.name));d.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),gZ=Er.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ln(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>ze(ge({},t),{[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>R2({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var O2=200,ws=function(){};ws.prototype.append=function(e){return e.length?(e=ws.from(e),!this.length&&e||e.length<O2&&this.leafAppend(e)||this.length<O2&&e.leafPrepend(this)||this.appendInner(e)):this};ws.prototype.prepend=function(e){return e.length?ws.from(e).append(this):this};ws.prototype.appendInner=function(e){return new DCe(this,e)};ws.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ws.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ws.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ws.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ws.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,a){return s.push(e(i,a))},n,r),s};ws.from=function(e){return e instanceof ws?e:e&&e.length?new vZ(e):ws.empty};var vZ=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,a,o){for(var l=i;l<a;l++)if(s(this.values[l],o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,a,o){for(var l=i-1;l>=a;l--)if(s(this.values[l],o+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=O2)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=O2)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(ws);ws.empty=new vZ([]);var DCe=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,a){var o=this.left.length;if(s<o&&this.left.forEachInner(r,s,Math.min(i,o),a)===!1||i>o&&this.right.forEachInner(r,Math.max(s-o,0),Math.min(this.length,i)-o,a+o)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,a){var o=this.left.length;if(s>o&&this.right.forEachInvertedInner(r,s-o,Math.max(i,o)-o,a+o)===!1||i<o&&this.left.forEachInvertedInner(r,Math.min(s,o),i,a)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ws);const RCe=500;class So{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let a=e.tr,o,l,d=[],c=[];return this.items.forEach((f,p)=>{if(!f.step){s||(s=this.remapping(r,p+1),i=s.maps.length),i--,c.push(f);return}if(s){c.push(new cl(f.map));let h=f.step.map(s.slice(i)),m;h&&a.maybeStep(h).doc&&(m=a.mapping.maps[a.mapping.maps.length-1],d.push(new cl(m,void 0,void 0,d.length+c.length))),i--,m&&s.appendMap(m,i)}else a.maybeStep(f.step);if(f.selection)return o=s?f.selection.map(s.slice(i)):f.selection,l=new So(this.items.slice(0,r).append(c.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:a,selection:o}}addTransform(e,n,r,s){let i=[],a=this.eventCount,o=this.items,l=!s&&o.length?o.get(o.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),p=new cl(e.mapping.maps[c],f,n),h;(h=l&&l.merge(p))&&(p=h,c?i.pop():o=o.slice(0,o.length-1)),i.push(p),n&&(a++,n=void 0),s||(l=p)}let d=a-r.depth;return d>ICe&&(o=PCe(o,d),a-=d),new So(o.append(i),a)}remapping(e,n){let r=new K0;return this.items.forEach((s,i)=>{let a=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,a)},e,n),r}addMaps(e){return this.eventCount==0?this:new So(this.items.append(e.map(n=>new cl(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,a=e.steps.length,o=this.eventCount;this.items.forEach(p=>{p.selection&&o--},s);let l=n;this.items.forEach(p=>{let h=i.getMirror(--l);if(h==null)return;a=Math.min(a,h);let m=i.maps[h];if(p.step){let g=e.steps[h].invert(e.docs[h]),y=p.selection&&p.selection.map(i.slice(l+1,h));y&&o++,r.push(new cl(m,g,y))}else r.push(new cl(m))},s);let d=[];for(let p=n;p<a;p++)d.push(new cl(i.maps[p]));let c=this.items.slice(0,s).append(d).append(r),f=new So(c,o);return f.emptyItemCount()>RCe&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((a,o)=>{if(o>=e)s.push(a),a.selection&&i++;else if(a.step){let l=a.step.map(n.slice(r)),d=l&&l.getMap();if(r--,d&&n.appendMap(d,r),l){let c=a.selection&&a.selection.map(n.slice(r));c&&i++;let f=new cl(d.invert(),l,c),p,h=s.length-1;(p=s.length&&s[h].merge(f))?s[h]=p:s.push(f)}}else a.map&&r--},this.items.length,0),new So(ws.from(s.reverse()),i)}}So.empty=new So(ws.empty,0);function PCe(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class cl{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new cl(n.getMap().invert(),n,this.selection)}}}class Wd{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const ICe=20;function OCe(t,e,n,r){let s=n.getMeta(Sp),i;if(s)return s.historyState;n.getMeta(NCe)&&(t=new Wd(t.done,t.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(a&&a.getMeta(Sp))return a.getMeta(Sp).redo?new Wd(t.done.addTransform(n,void 0,r,vw(e)),t.undone,fN(n.mapping.maps),t.prevTime,t.prevComposition):new Wd(t.done,t.undone.addTransform(n,void 0,r,vw(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),l=t.prevTime==0||!a&&t.prevComposition!=o&&(t.prevTime<(n.time||0)-r.newGroupDelay||!LCe(n,t.prevRanges)),d=a?D4(t.prevRanges,n.mapping):fN(n.mapping.maps);return new Wd(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,vw(e)),So.empty,d,n.time,o==null?t.prevComposition:o)}else return(i=n.getMeta("rebased"))?new Wd(t.done.rebased(n,i),t.undone.rebased(n,i),D4(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Wd(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),D4(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function LCe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function fN(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,a)=>e.push(i,a));return e}function D4(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function VCe(t,e,n){let r=vw(e),s=Sp.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let a=i.selection.resolve(i.transform.doc),o=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),l=new Wd(n?o:i.remaining,n?i.remaining:o,null,0,-1);return i.transform.setSelection(a).setMeta(Sp,{redo:n,historyState:l})}let R4=!1,pN=null;function vw(t){let e=t.plugins;if(pN!=e){R4=!1,pN=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){R4=!0;break}}return R4}const Sp=new Hn("history"),NCe=new Hn("closeHistory");function jCe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Vn({key:Sp,state:{init(){return new Wd(So.empty,So.empty,null,0,-1)},apply(e,n,r){return OCe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?bZ:r=="historyRedo"?xZ:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function yZ(t,e){return(n,r)=>{let s=Sp.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=VCe(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const bZ=yZ(!1,!0),xZ=yZ(!0,!0),FCe=wr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>bZ(t,e),redo:()=>({state:t,dispatch:e})=>xZ(t,e)}},addProseMirrorPlugins(){return[jCe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),BCe=Er.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ln(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!_ke(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:s}=n,i=t();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):BQ(n)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:a,dispatch:o})=>{var l;if(o){const{$to:d}=a.selection,c=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?a.setSelection(Wt.create(a.doc,d.pos+1)):d.nodeAfter.isBlock?a.setSelection(Ft.create(a.doc,d.pos)):a.setSelection(Wt.create(a.doc,d.pos));else{const f=(l=d.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();f&&(a.insert(c,f),a.setSelection(Wt.create(a.doc,c+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[UQ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),zCe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,UCe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,HCe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,qCe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,WCe=jo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[qp({find:zCe,type:this.type}),qp({find:HCe,type:this.type})]},addPasteRules(){return[Wp({find:UCe,type:this.type}),Wp({find:qCe,type:this.type})]}}),GCe=Er.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ln(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),YCe="listItem",hN="textStyle",mN=/^(\d+)\.\s$/,KCe=Er.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const r=t,{start:e}=r,n=$s(r,["start"]);return e===1?["ol",Ln(this.options.HTMLAttributes,n),0]:["ol",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(YCe,this.editor.getAttributes(hN)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=lg({find:mN,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=lg({find:mN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>ge({start:+e[1]},this.editor.getAttributes(hN)),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),XCe=Er.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),QCe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,ZCe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,JCe=jo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[qp({find:QCe,type:this.type})]},addPasteRules(){return[Wp({find:ZCe,type:this.type})]}}),eAe=Er.create({name:"text",group:"inline"}),_Z=wr.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(cCe.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(aCe.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(pCe.configure(this.options.bulletList)),this.options.code!==!1&&t.push(pZ.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(hZ.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(yCe.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(_Ce.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(MCe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(ECe.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(gZ.configure(this.options.heading)),this.options.history!==!1&&t.push(FCe.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(BCe.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(WCe.configure(this.options.italic)),this.options.listItem!==!1&&t.push(GCe.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(KCe.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(XCe.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(JCe.configure(this.options.strike)),this.options.text!==!1&&t.push(eAe.configure(this.options.text)),t}}),wZ=wr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Vn({key:new Hn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const i=this.editor.isEmpty;return t.descendants((a,o)=>{const l=r>=o&&r<=o+a.nodeSize,d=!a.isLeaf&&SC(a);if((l||!this.options.showOnlyCurrent)&&d){const c=[this.options.emptyNodeClass];i&&c.push(this.options.emptyEditorClass);const f=bs.node(o,o+a.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:o,hasAnchor:l}):this.options.placeholder});s.push(f)}return this.options.includeChildren}),_r.create(t,s)}}})]}}),tAe=wr.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var X$,Q$;if(typeof WeakMap!="undefined"){let t=new WeakMap;X$=e=>t.get(e),Q$=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;X$=r=>{for(let s=0;s<t.length;s+=2)if(t[s]==r)return t[s+1]},Q$=(r,s)=>(n==10&&(n=0),t[n++]=r,t[n++]=s)}var Or=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,s=e/this.width|0;let i=r+1,a=s+1;for(let o=1;i<this.width&&this.map[e+o]==n;o++)i++;for(let o=1;a<this.height&&this.map[e+this.width*o]==n;o++)a++;return{left:r,top:s,right:i,bottom:a}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:s,top:i,bottom:a}=this.findCell(t);return e=="horiz"?(n<0?r==0:s==this.width)?null:this.map[i*this.width+(n<0?r-1:s)]:(n<0?i==0:a==this.height)?null:this.map[r+this.width*(n<0?i-1:a)]}rectBetween(t,e){const{left:n,right:r,top:s,bottom:i}=this.findCell(t),{left:a,right:o,top:l,bottom:d}=this.findCell(e);return{left:Math.min(n,a),top:Math.min(s,l),right:Math.max(r,o),bottom:Math.max(i,d)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let s=t.left;s<t.right;s++){const i=r*this.width+s,a=this.map[i];n[a]||(n[a]=!0,!(s==t.left&&s&&this.map[i-1]==a||r==t.top&&r&&this.map[i-this.width]==a)&&e.push(a))}return e}positionAt(t,e,n){for(let r=0,s=0;;r++){const i=s+n.child(r).nodeSize;if(r==t){let a=e+t*this.width;const o=(t+1)*this.width;for(;a<o&&this.map[a]<s;)a++;return a==o?i-1:this.map[a]}s=i}}static get(t){return X$(t)||Q$(t,nAe(t))}};function nAe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=rAe(t),n=t.childCount,r=[];let s=0,i=null;const a=[];for(let d=0,c=e*n;d<c;d++)r[d]=0;for(let d=0,c=0;d<n;d++){const f=t.child(d);c++;for(let m=0;;m++){for(;s<r.length&&r[s]!=0;)s++;if(m==f.childCount)break;const g=f.child(m),{colspan:y,rowspan:x,colwidth:_}=g.attrs;for(let k=0;k<x;k++){if(k+d>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:c,n:x-k});break}const w=s+k*e;for(let S=0;S<y;S++){r[w+S]==0?r[w+S]=c:(i||(i=[])).push({type:"collision",row:d,pos:c,n:y-S});const C=_&&_[S];if(C){const A=(w+S)%e*2,M=a[A];M==null||M!=C&&a[A+1]==1?(a[A]=C,a[A+1]=1):M==C&&a[A+1]++}}}s+=y,c+=g.nodeSize}const p=(d+1)*e;let h=0;for(;s<p;)r[s++]==0&&h++;h&&(i||(i=[])).push({type:"missing",row:d,n:h}),c++}(e===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const o=new Or(e,n,r,i);let l=!1;for(let d=0;!l&&d<a.length;d+=2)a[d]!=null&&a[d+1]<n&&(l=!0);return l&&sAe(o,a,t),o}function rAe(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const s=t.child(r);let i=0;if(n)for(let a=0;a<r;a++){const o=t.child(a);for(let l=0;l<o.childCount;l++){const d=o.child(l);a+d.attrs.rowspan>r&&(i+=d.attrs.colspan)}}for(let a=0;a<s.childCount;a++){const o=s.child(a);i+=o.attrs.colspan,o.attrs.rowspan>1&&(n=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function sAe(t,e,n){t.problems||(t.problems=[]);const r={};for(let s=0;s<t.map.length;s++){const i=t.map[s];if(r[i])continue;r[i]=!0;const a=n.nodeAt(i);if(!a)throw new RangeError(`No cell with offset ${i} found`);let o=null;const l=a.attrs;for(let d=0;d<l.colspan;d++){const c=(s+d)%t.width,f=e[c*2];f!=null&&(!l.colwidth||l.colwidth[d]!=f)&&((o||(o=iAe(l)))[d]=f)}o&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:o})}}function iAe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function ri(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],s=r.spec.tableRole;s&&(e[s]=r)}}return e}var Qd=new Hn("selectingCells");function Ig(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function aAe(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function zo(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function $C(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Ig(e.$head)||oAe(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function oAe(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function Z$(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function lAe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function fP(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function kZ(t,e,n){const r=t.node(-1),s=Or.get(r),i=t.start(-1),a=s.nextCell(t.pos-i,e,n);return a==null?null:t.node(0).resolve(i+a)}function Yp(t,e,n=1){const r=ze(ge({},t),{colspan:t.colspan-n});return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}function SZ(t,e,n=1){const r=ze(ge({},t),{colspan:t.colspan+n});if(r.colwidth){r.colwidth=r.colwidth.slice();for(let s=0;s<n;s++)r.colwidth.splice(e,0,0)}return r}function uAe(t,e,n){const r=ri(e.type.schema).header_cell;for(let s=0;s<t.height;s++)if(e.nodeAt(t.map[n+s*t.width]).type!=r)return!1;return!0}var mr=class gu extends Yt{constructor(e,n=e){const r=e.node(-1),s=Or.get(r),i=e.start(-1),a=s.rectBetween(e.pos-i,n.pos-i),o=e.node(0),l=s.cellsInRect(a).filter(c=>c!=n.pos-i);l.unshift(n.pos-i);const d=l.map(c=>{const f=r.nodeAt(c);if(!f)throw RangeError(`No cell with offset ${c} found`);const p=i+c+1;return new IX(o.resolve(p),o.resolve(p+f.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),s=e.resolve(n.map(this.$headCell.pos));if(Z$(r)&&Z$(s)&&fP(r,s)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?gu.rowSelection(r,s):i&&this.isColSelection()?gu.colSelection(r,s):new gu(r,s)}return Wt.between(r,s)}content(){const e=this.$anchorCell.node(-1),n=Or.get(e),r=this.$anchorCell.start(-1),s=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},a=[];for(let l=s.top;l<s.bottom;l++){const d=[];for(let c=l*n.width+s.left,f=s.left;f<s.right;f++,c++){const p=n.map[c];if(i[p])continue;i[p]=!0;const h=n.findCell(p);let m=e.nodeAt(p);if(!m)throw RangeError(`No cell with offset ${p} found`);const g=s.left-h.left,y=h.right-s.right;if(g>0||y>0){let x=m.attrs;if(g>0&&(x=Yp(x,0,g)),y>0&&(x=Yp(x,x.colspan-y,y)),h.left<s.left){if(m=m.type.createAndFill(x),!m)throw RangeError(`Could not create cell with attrs ${JSON.stringify(x)}`)}else m=m.type.create(x,m.content)}if(h.top<s.top||h.bottom>s.bottom){const x=ze(ge({},m.attrs),{rowspan:Math.min(h.bottom,s.bottom)-Math.max(h.top,s.top)});h.top<s.top?m=m.type.createAndFill(x):m=m.type.create(x,m.content)}d.push(m)}a.push(e.child(l).copy(Ze.from(d)))}const o=this.isColSelection()&&this.isRowSelection()?e:a;return new gt(Ze.from(o),1,1)}replace(e,n=gt.empty){const r=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){const{$from:o,$to:l}=s[a],d=e.mapping.slice(r);e.replace(d.map(o.pos),d.map(l.pos),a?gt.empty:n)}const i=Yt.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,n){this.replace(e,new gt(Ze.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Or.get(n),s=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let a=0;a<i.length;a++)e(n.nodeAt(i[a]),s+i[a])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),s=Or.get(r),i=e.start(-1),a=s.findCell(e.pos-i),o=s.findCell(n.pos-i),l=e.node(0);return a.top<=o.top?(a.top>0&&(e=l.resolve(i+s.map[a.left])),o.bottom<s.height&&(n=l.resolve(i+s.map[s.width*(s.height-1)+o.right-1]))):(o.top>0&&(n=l.resolve(i+s.map[o.left])),a.bottom<s.height&&(e=l.resolve(i+s.map[s.width*(s.height-1)+a.right-1]))),new gu(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Or.get(e),r=this.$anchorCell.start(-1),s=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(s,i)>0)return!1;const a=s+this.$anchorCell.nodeAfter.attrs.colspan,o=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,o)==n.width}eq(e){return e instanceof gu&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),s=Or.get(r),i=e.start(-1),a=s.findCell(e.pos-i),o=s.findCell(n.pos-i),l=e.node(0);return a.left<=o.left?(a.left>0&&(e=l.resolve(i+s.map[a.top*s.width])),o.right<s.width&&(n=l.resolve(i+s.map[s.width*(o.top+1)-1]))):(o.left>0&&(n=l.resolve(i+s.map[o.top*s.width])),a.right<s.width&&(e=l.resolve(i+s.map[s.width*(a.top+1)-1]))),new gu(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new gu(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new gu(e.resolve(n),e.resolve(r))}getBookmark(){return new dAe(this.$anchorCell.pos,this.$headCell.pos)}};mr.prototype.visible=!1;Yt.jsonID("cell",mr);var dAe=class CZ{constructor(e,n){this.anchor=e,this.head=n}map(e){return new CZ(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&fP(n,r)?new mr(n,r):Yt.near(r,1)}};function cAe(t){if(!(t.selection instanceof mr))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(bs.node(r,r+n.nodeSize,{class:"selectedCell"}))}),_r.create(t.doc,e)}function fAe({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,s=t.depth;for(;s>=0&&!(t.after(s+1)<t.end(s));s--,n++);for(let i=e.depth;i>=0&&!(e.before(i+1)>e.start(i));i--,r--);return n==r&&/row|table/.test(t.node(s).type.spec.tableRole)}function pAe({$from:t,$to:e}){let n,r;for(let s=t.depth;s>0;s--){const i=t.node(s);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let s=e.depth;s>0;s--){const i=e.node(s);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&e.parentOffset===0}function hAe(t,e,n){const r=(e||t).selection,s=(e||t).doc;let i,a;if(r instanceof Ft&&(a=r.node.type.spec.tableRole)){if(a=="cell"||a=="header_cell")i=mr.create(s,r.from);else if(a=="row"){const o=s.resolve(r.from+1);i=mr.rowSelection(o,o)}else if(!n){const o=Or.get(r.node),l=r.from+1,d=l+o.map[o.width*o.height-1];i=mr.create(s,l+1,d)}}else r instanceof Wt&&fAe(r)?i=Wt.create(s,r.from):r instanceof Wt&&pAe(r)&&(i=Wt.create(s,r.$from.start(),r.$from.end()));return i&&(e||(e=t.tr)).setSelection(i),e}var mAe=new Hn("fix-tables");function AZ(t,e,n,r){const s=t.childCount,i=e.childCount;e:for(let a=0,o=0;a<i;a++){const l=e.child(a);for(let d=o,c=Math.min(s,a+3);d<c;d++)if(t.child(d)==l){o=d+1,n+=l.nodeSize;continue e}r(l,n),o<s&&t.child(o).sameMarkup(l)?AZ(t.child(o),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function TZ(t,e){let n;const r=(s,i)=>{s.type.spec.tableRole=="table"&&(n=gAe(t,s,i,n))};return e?e.doc!=t.doc&&AZ(e.doc,t.doc,0,r):t.doc.descendants(r),n}function gAe(t,e,n,r){const s=Or.get(e);if(!s.problems)return r;r||(r=t.tr);const i=[];for(let l=0;l<s.height;l++)i.push(0);for(let l=0;l<s.problems.length;l++){const d=s.problems[l];if(d.type=="collision"){const c=e.nodeAt(d.pos);if(!c)continue;const f=c.attrs;for(let p=0;p<f.rowspan;p++)i[d.row+p]+=d.n;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,Yp(f,f.colspan-d.n,d.n))}else if(d.type=="missing")i[d.row]+=d.n;else if(d.type=="overlong_rowspan"){const c=e.nodeAt(d.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,ze(ge({},c.attrs),{rowspan:c.attrs.rowspan-d.n}))}else if(d.type=="colwidth mismatch"){const c=e.nodeAt(d.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,ze(ge({},c.attrs),{colwidth:d.colwidth}))}else if(d.type=="zero_sized"){const c=r.mapping.map(n);r.delete(c,c+e.nodeSize)}}let a,o;for(let l=0;l<i.length;l++)i[l]&&(a==null&&(a=l),o=l);for(let l=0,d=n+1;l<s.height;l++){const c=e.child(l),f=d+c.nodeSize,p=i[l];if(p>0){let h="cell";c.firstChild&&(h=c.firstChild.type.spec.tableRole);const m=[];for(let y=0;y<p;y++){const x=ri(t.schema)[h].createAndFill();x&&m.push(x)}const g=(l==0||a==l-1)&&o==l?d+1:f-1;r.insert(r.mapping.map(g),m)}d=f}return r.setMeta(mAe,{fixTables:!0})}function Ql(t){const e=t.selection,n=$C(t),r=n.node(-1),s=n.start(-1),i=Or.get(r),a=e instanceof mr?i.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):i.findCell(n.pos-s);return ze(ge({},a),{tableStart:s,map:i,table:r})}function $Z(t,{map:e,tableStart:n,table:r},s){let i=s>0?-1:0;uAe(e,r,s+i)&&(i=s==0||s==e.width?null:0);for(let a=0;a<e.height;a++){const o=a*e.width+s;if(s>0&&s<e.width&&e.map[o-1]==e.map[o]){const l=e.map[o],d=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,SZ(d.attrs,s-e.colCount(l))),a+=d.attrs.rowspan-1}else{const l=i==null?ri(r.type.schema).cell:r.nodeAt(e.map[o+i]).type,d=e.positionAt(a,s,r);t.insert(t.mapping.map(n+d),l.createAndFill())}}return t}function vAe(t,e){if(!zo(t))return!1;if(e){const n=Ql(t);e($Z(t.tr,n,n.left))}return!0}function yAe(t,e){if(!zo(t))return!1;if(e){const n=Ql(t);e($Z(t.tr,n,n.right))}return!0}function bAe(t,{map:e,table:n,tableStart:r},s){const i=t.mapping.maps.length;for(let a=0;a<e.height;){const o=a*e.width+s,l=e.map[o],d=n.nodeAt(l),c=d.attrs;if(s>0&&e.map[o-1]==l||s<e.width-1&&e.map[o+1]==l)t.setNodeMarkup(t.mapping.slice(i).map(r+l),null,Yp(c,s-e.colCount(l)));else{const f=t.mapping.slice(i).map(r+l);t.delete(f,f+d.nodeSize)}a+=c.rowspan}}function xAe(t,e){if(!zo(t))return!1;if(e){const n=Ql(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let s=n.right-1;bAe(r,n,s),s!=n.left;s--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Or.get(i)}e(r)}return!0}function _Ae(t,e,n){var r;const s=ri(e.type.schema).header_cell;for(let i=0;i<t.width;i++)if(((r=e.nodeAt(t.map[i+n*t.width]))==null?void 0:r.type)!=s)return!1;return!0}function MZ(t,{map:e,tableStart:n,table:r},s){var i;let a=n;for(let d=0;d<s;d++)a+=r.child(d).nodeSize;const o=[];let l=s>0?-1:0;_Ae(e,r,s+l)&&(l=s==0||s==e.height?null:0);for(let d=0,c=e.width*s;d<e.width;d++,c++)if(s>0&&s<e.height&&e.map[c]==e.map[c-e.width]){const f=e.map[c],p=r.nodeAt(f).attrs;t.setNodeMarkup(n+f,null,ze(ge({},p),{rowspan:p.rowspan+1})),d+=p.colspan-1}else{const f=l==null?ri(r.type.schema).cell:(i=r.nodeAt(e.map[c+l*e.width]))==null?void 0:i.type,p=f==null?void 0:f.createAndFill();p&&o.push(p)}return t.insert(a,ri(r.type.schema).row.create(null,o)),t}function wAe(t,e){if(!zo(t))return!1;if(e){const n=Ql(t);e(MZ(t.tr,n,n.top))}return!0}function kAe(t,e){if(!zo(t))return!1;if(e){const n=Ql(t);e(MZ(t.tr,n,n.bottom))}return!0}function SAe(t,{map:e,table:n,tableStart:r},s){let i=0;for(let d=0;d<s;d++)i+=n.child(d).nodeSize;const a=i+n.child(s).nodeSize,o=t.mapping.maps.length;t.delete(i+r,a+r);const l=new Set;for(let d=0,c=s*e.width;d<e.width;d++,c++){const f=e.map[c];if(!l.has(f)){if(l.add(f),s>0&&f==e.map[c-e.width]){const p=n.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(o).map(f+r),null,ze(ge({},p),{rowspan:p.rowspan-1})),d+=p.colspan-1}else if(s<e.height&&f==e.map[c+e.width]){const p=n.nodeAt(f),h=p.attrs,m=p.type.create(ze(ge({},h),{rowspan:p.attrs.rowspan-1}),p.content),g=e.positionAt(s+1,d,n);t.insert(t.mapping.slice(o).map(r+g),m),d+=h.colspan-1}}}}function CAe(t,e){if(!zo(t))return!1;if(e){const n=Ql(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let s=n.bottom-1;SAe(r,n,s),s!=n.top;s--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Or.get(n.table)}e(r)}return!0}function gN(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function AAe({width:t,height:e,map:n},r){let s=r.top*t+r.left,i=s,a=(r.bottom-1)*t+r.left,o=s+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<t&&n[o]==n[o+1])return!0;i+=t,o+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[s]==n[s-t]||r.bottom<e&&n[a]==n[a+t])return!0;s++,a++}return!1}function vN(t,e){const n=t.selection;if(!(n instanceof mr)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Ql(t),{map:s}=r;if(AAe(s,r))return!1;if(e){const i=t.tr,a={};let o=Ze.empty,l,d;for(let c=r.top;c<r.bottom;c++)for(let f=r.left;f<r.right;f++){const p=s.map[c*s.width+f],h=r.table.nodeAt(p);if(!(a[p]||!h))if(a[p]=!0,l==null)l=p,d=h;else{gN(h)||(o=o.append(h.content));const m=i.mapping.map(p+r.tableStart);i.delete(m,m+h.nodeSize)}}if(l==null||d==null)return!0;if(i.setNodeMarkup(l+r.tableStart,null,ze(ge({},SZ(d.attrs,d.attrs.colspan,r.right-r.left-d.attrs.colspan)),{rowspan:r.bottom-r.top})),o.size){const c=l+1+d.content.size,f=gN(d)?l+1:c;i.replaceWith(f+r.tableStart,c+r.tableStart,o)}i.setSelection(new mr(i.doc.resolve(l+r.tableStart))),e(i)}return!0}function yN(t,e){const n=ri(t.schema);return TAe(({node:r})=>n[r.type.spec.tableRole])(t,e)}function TAe(t){return(e,n)=>{var r;const s=e.selection;let i,a;if(s instanceof mr){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;i=s.$anchorCell.nodeAfter,a=s.$anchorCell.pos}else{if(i=aAe(s.$from),!i)return!1;a=(r=Ig(s.$from))==null?void 0:r.pos}if(i==null||a==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let o=i.attrs;const l=[],d=o.colwidth;o.rowspan>1&&(o=ze(ge({},o),{rowspan:1})),o.colspan>1&&(o=ze(ge({},o),{colspan:1}));const c=Ql(e),f=e.tr;for(let h=0;h<c.right-c.left;h++)l.push(d?ze(ge({},o),{colwidth:d&&d[h]?[d[h]]:null}):o);let p;for(let h=c.top;h<c.bottom;h++){let m=c.map.positionAt(h,c.left,c.table);h==c.top&&(m+=i.nodeSize);for(let g=c.left,y=0;g<c.right;g++,y++)g==c.left&&h==c.top||f.insert(p=f.mapping.map(m+c.tableStart,1),t({node:i,row:h,col:g}).createAndFill(l[y]))}f.setNodeMarkup(a,t({node:i,row:c.top,col:c.left}),l[0]),s instanceof mr&&f.setSelection(new mr(f.doc.resolve(s.$anchorCell.pos),p?f.doc.resolve(p):void 0)),n(f)}return!0}}function $Ae(t,e){return function(n,r){if(!zo(n))return!1;const s=$C(n);if(s.nodeAfter.attrs[t]===e)return!1;if(r){const i=n.tr;n.selection instanceof mr?n.selection.forEachCell((a,o)=>{a.attrs[t]!==e&&i.setNodeMarkup(o,null,ze(ge({},a.attrs),{[t]:e}))}):i.setNodeMarkup(s.pos,null,ze(ge({},s.nodeAfter.attrs),{[t]:e})),r(i)}return!0}}function MAe(t){return function(e,n){if(!zo(e))return!1;if(n){const r=ri(e.schema),s=Ql(e),i=e.tr,a=s.map.cellsInRect(t=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:t=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),o=a.map(l=>s.table.nodeAt(l));for(let l=0;l<a.length;l++)o[l].type==r.header_cell&&i.setNodeMarkup(s.tableStart+a[l],r.cell,o[l].attrs);if(i.steps.length==0)for(let l=0;l<a.length;l++)i.setNodeMarkup(s.tableStart+a[l],r.header_cell,o[l].attrs);n(i)}return!0}}function bN(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const i=e.table.nodeAt(r[s]);if(i&&i.type!==n.header_cell)return!1}return!0}function s1(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?MAe(t):function(n,r){if(!zo(n))return!1;if(r){const s=ri(n.schema),i=Ql(n),a=n.tr,o=bN("row",i,s),l=bN("column",i,s),c=(t==="column"?o:t==="row"?l:!1)?1:0,f=t=="column"?{left:0,top:c,right:1,bottom:i.map.height}:t=="row"?{left:c,top:0,right:i.map.width,bottom:1}:i,p=t=="column"?l?s.cell:s.header_cell:t=="row"?o?s.cell:s.header_cell:s.cell;i.map.cellsInRect(f).forEach(h=>{const m=h+i.tableStart,g=a.doc.nodeAt(m);g&&a.setNodeMarkup(m,p,g.attrs)}),r(a)}return!0}}s1("row",{useDeprecatedLogic:!0});s1("column",{useDeprecatedLogic:!0});var EAe=s1("cell",{useDeprecatedLogic:!0});function DAe(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,s=t.before();r>=0;r--){const i=t.node(-1).child(r),a=i.lastChild;if(a)return s-1-a.nodeSize;s-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),s=t.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return s+1;s+=i.nodeSize}}return null}function xN(t){return function(e,n){if(!zo(e))return!1;const r=DAe($C(e),t);if(r==null)return!1;if(n){const s=e.doc.resolve(r);n(e.tr.setSelection(Wt.between(s,lAe(s))).scrollIntoView())}return!0}}function RAe(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function vx(t,e){const n=t.selection;if(!(n instanceof mr))return!1;if(e){const r=t.tr,s=ri(t.schema).cell.createAndFill().content;n.forEachCell((i,a)=>{i.content.eq(s)||r.replace(r.mapping.map(a+1),r.mapping.map(a+i.nodeSize-1),new gt(s,0,0))}),r.docChanged&&e(r)}return!0}function PAe(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const s=e.child(0),i=s.type.spec.tableRole,a=s.type.schema,o=[];if(i=="row")for(let l=0;l<e.childCount;l++){let d=e.child(l).content;const c=l?0:Math.max(0,n-1),f=l<e.childCount-1?0:Math.max(0,r-1);(c||f)&&(d=J$(ri(a).row,new gt(d,c,f)).content),o.push(d)}else if(i=="cell"||i=="header_cell")o.push(n||r?J$(ri(a).row,new gt(e,n,r)).content:e);else return null;return IAe(a,o)}function IAe(t,e){const n=[];for(let s=0;s<e.length;s++){const i=e[s];for(let a=i.childCount-1;a>=0;a--){const{rowspan:o,colspan:l}=i.child(a).attrs;for(let d=s;d<s+o;d++)n[d]=(n[d]||0)+l}}let r=0;for(let s=0;s<n.length;s++)r=Math.max(r,n[s]);for(let s=0;s<n.length;s++)if(s>=e.length&&e.push(Ze.empty),n[s]<r){const i=ri(t).cell.createAndFill(),a=[];for(let o=n[s];o<r;o++)a.push(i);e[s]=e[s].append(Ze.from(a))}return{height:e.length,width:r,rows:e}}function J$(t,e){const n=t.createAndFill();return new PR(n).replace(0,n.content.size,e).doc}function OAe({width:t,height:e,rows:n},r,s){if(t!=r){const i=[],a=[];for(let o=0;o<n.length;o++){const l=n[o],d=[];for(let c=i[o]||0,f=0;c<r;f++){let p=l.child(f%l.childCount);c+p.attrs.colspan>r&&(p=p.type.createChecked(Yp(p.attrs,p.attrs.colspan,c+p.attrs.colspan-r),p.content)),d.push(p),c+=p.attrs.colspan;for(let h=1;h<p.attrs.rowspan;h++)i[o+h]=(i[o+h]||0)+p.attrs.colspan}a.push(Ze.from(d))}n=a,t=r}if(e!=s){const i=[];for(let a=0,o=0;a<s;a++,o++){const l=[],d=n[o%e];for(let c=0;c<d.childCount;c++){let f=d.child(c);a+f.attrs.rowspan>s&&(f=f.type.create(ze(ge({},f.attrs),{rowspan:Math.max(1,s-f.attrs.rowspan)}),f.content)),l.push(f)}i.push(Ze.from(l))}n=i,e=s}return{width:t,height:e,rows:n}}function LAe(t,e,n,r,s,i,a){const o=t.doc.type.schema,l=ri(o);let d,c;if(s>e.width)for(let f=0,p=0;f<e.height;f++){const h=n.child(f);p+=h.nodeSize;const m=[];let g;h.lastChild==null||h.lastChild.type==l.cell?g=d||(d=l.cell.createAndFill()):g=c||(c=l.header_cell.createAndFill());for(let y=e.width;y<s;y++)m.push(g);t.insert(t.mapping.slice(a).map(p-1+r),m)}if(i>e.height){const f=[];for(let m=0,g=(e.height-1)*e.width;m<Math.max(e.width,s);m++){const y=m>=e.width?!1:n.nodeAt(e.map[g+m]).type==l.header_cell;f.push(y?c||(c=l.header_cell.createAndFill()):d||(d=l.cell.createAndFill()))}const p=l.row.create(null,Ze.from(f)),h=[];for(let m=e.height;m<i;m++)h.push(p);t.insert(t.mapping.slice(a).map(r+n.nodeSize-2),h)}return!!(d||c)}function _N(t,e,n,r,s,i,a,o){if(a==0||a==e.height)return!1;let l=!1;for(let d=s;d<i;d++){const c=a*e.width+d,f=e.map[c];if(e.map[c-e.width]==f){l=!0;const p=n.nodeAt(f),{top:h,left:m}=e.findCell(f);t.setNodeMarkup(t.mapping.slice(o).map(f+r),null,ze(ge({},p.attrs),{rowspan:a-h})),t.insert(t.mapping.slice(o).map(e.positionAt(a,m,n)),p.type.createAndFill(ze(ge({},p.attrs),{rowspan:h+p.attrs.rowspan-a}))),d+=p.attrs.colspan-1}}return l}function wN(t,e,n,r,s,i,a,o){if(a==0||a==e.width)return!1;let l=!1;for(let d=s;d<i;d++){const c=d*e.width+a,f=e.map[c];if(e.map[c-1]==f){l=!0;const p=n.nodeAt(f),h=e.colCount(f),m=t.mapping.slice(o).map(f+r);t.setNodeMarkup(m,null,Yp(p.attrs,a-h,p.attrs.colspan-(a-h))),t.insert(m+p.nodeSize,p.type.createAndFill(Yp(p.attrs,0,a-h))),d+=p.attrs.rowspan-1}}return l}function kN(t,e,n,r,s){let i=n?t.doc.nodeAt(n-1):t.doc;if(!i)throw new Error("No table found");let a=Or.get(i);const{top:o,left:l}=r,d=l+s.width,c=o+s.height,f=t.tr;let p=0;function h(){if(i=n?f.doc.nodeAt(n-1):f.doc,!i)throw new Error("No table found");a=Or.get(i),p=f.mapping.maps.length}LAe(f,a,i,n,d,c,p)&&h(),_N(f,a,i,n,l,d,o,p)&&h(),_N(f,a,i,n,l,d,c,p)&&h(),wN(f,a,i,n,o,c,l,p)&&h(),wN(f,a,i,n,o,c,d,p)&&h();for(let m=o;m<c;m++){const g=a.positionAt(m,l,i),y=a.positionAt(m,d,i);f.replace(f.mapping.slice(p).map(g+n),f.mapping.slice(p).map(y+n),new gt(s.rows[m-o],0,0))}h(),f.setSelection(new mr(f.doc.resolve(n+a.positionAt(o,l,i)),f.doc.resolve(n+a.positionAt(c-1,d-1,i)))),e(f)}var VAe=HR({ArrowLeft:yx("horiz",-1),ArrowRight:yx("horiz",1),ArrowUp:yx("vert",-1),ArrowDown:yx("vert",1),"Shift-ArrowLeft":bx("horiz",-1),"Shift-ArrowRight":bx("horiz",1),"Shift-ArrowUp":bx("vert",-1),"Shift-ArrowDown":bx("vert",1),Backspace:vx,"Mod-Backspace":vx,Delete:vx,"Mod-Delete":vx});function yw(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function yx(t,e){return(n,r,s)=>{if(!s)return!1;const i=n.selection;if(i instanceof mr)return yw(n,r,Yt.near(i.$headCell,e));if(t!="horiz"&&!i.empty)return!1;const a=EZ(s,t,e);if(a==null)return!1;if(t=="horiz")return yw(n,r,Yt.near(n.doc.resolve(i.head+e),e));{const o=n.doc.resolve(a),l=kZ(o,t,e);let d;return l?d=Yt.near(l,1):e<0?d=Yt.near(n.doc.resolve(o.before(-1)),-1):d=Yt.near(n.doc.resolve(o.after(-1)),1),yw(n,r,d)}}}function bx(t,e){return(n,r,s)=>{if(!s)return!1;const i=n.selection;let a;if(i instanceof mr)a=i;else{const l=EZ(s,t,e);if(l==null)return!1;a=new mr(n.doc.resolve(l))}const o=kZ(a.$headCell,t,e);return o?yw(n,r,new mr(a.$anchorCell,o)):!1}}function NAe(t,e){const n=t.state.doc,r=Ig(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new mr(r))),!0):!1}function jAe(t,e,n){if(!zo(t.state))return!1;let r=PAe(n);const s=t.state.selection;if(s instanceof mr){r||(r={width:1,height:1,rows:[Ze.from(J$(ri(t.state.schema).cell,n))]});const i=s.$anchorCell.node(-1),a=s.$anchorCell.start(-1),o=Or.get(i).rectBetween(s.$anchorCell.pos-a,s.$headCell.pos-a);return r=OAe(r,o.right-o.left,o.bottom-o.top),kN(t.state,t.dispatch,a,o,r),!0}else if(r){const i=$C(t.state),a=i.start(-1);return kN(t.state,t.dispatch,a,Or.get(i.node(-1)).findCell(i.pos-a),r),!0}else return!1}function FAe(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=SN(t,e.target);let s;if(e.shiftKey&&t.state.selection instanceof mr)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(s=Ig(t.state.selection.$anchor))!=null&&((n=P4(t,e))==null?void 0:n.pos)!=s.pos)i(s,e),e.preventDefault();else if(!r)return;function i(l,d){let c=P4(t,d);const f=Qd.getState(t.state)==null;if(!c||!fP(l,c))if(f)c=l;else return;const p=new mr(l,c);if(f||!t.state.selection.eq(p)){const h=t.state.tr.setSelection(p);f&&h.setMeta(Qd,l.pos),t.dispatch(h)}}function a(){t.root.removeEventListener("mouseup",a),t.root.removeEventListener("dragstart",a),t.root.removeEventListener("mousemove",o),Qd.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Qd,-1))}function o(l){const d=l,c=Qd.getState(t.state);let f;if(c!=null)f=t.state.doc.resolve(c);else if(SN(t,d.target)!=r&&(f=P4(t,e),!f))return a();f&&i(f,d)}t.root.addEventListener("mouseup",a),t.root.addEventListener("dragstart",a),t.root.addEventListener("mousemove",o)}function EZ(t,e,n){if(!(t.state.selection instanceof Wt))return null;const{$head:r}=t.state.selection;for(let s=r.depth-1;s>=0;s--){const i=r.node(s);if((n<0?r.index(s):r.indexAfter(s))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const o=r.before(s),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?o:null}}return null}function SN(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function P4(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Ig(t.state.doc.resolve(n.pos)):null}var BAe=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),eM(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,eM(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function eM(t,e,n,r,s,i){var a;let o=0,l=!0,d=e.firstChild;const c=t.firstChild;if(c){for(let f=0,p=0;f<c.childCount;f++){const{colspan:h,colwidth:m}=c.child(f).attrs;for(let g=0;g<h;g++,p++){const y=s==p?i:m&&m[g],x=y?y+"px":"";if(o+=y||r,y||(l=!1),d)d.style.width!=x&&(d.style.width=x),d=d.nextSibling;else{const _=document.createElement("col");_.style.width=x,e.appendChild(_)}}}for(;d;){const f=d.nextSibling;(a=d.parentNode)==null||a.removeChild(d),d=f}l?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}var la=new Hn("tableColumnResizing");function zAe({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=BAe,lastColumnResizable:s=!0}={}){const i=new Vn({key:la,state:{init(a,o){var l,d;const c=(d=(l=i.spec)==null?void 0:l.props)==null?void 0:d.nodeViews,f=ri(o.schema).table.name;return r&&c&&(c[f]=(p,h)=>new r(p,n,h)),new UAe(-1,!1)},apply(a,o){return o.apply(a)}},props:{attributes:a=>{const o=la.getState(a);return o&&o.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(a,o)=>{HAe(a,o,t,s)},mouseleave:a=>{qAe(a)},mousedown:(a,o)=>{WAe(a,o,e,n)}},decorations:a=>{const o=la.getState(a);if(o&&o.activeHandle>-1)return QAe(a,o.activeHandle)},nodeViews:{}}});return i}var UAe=class bw{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(la);if(r&&r.setHandle!=null)return new bw(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new bw(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let s=e.mapping.map(n.activeHandle,-1);return Z$(e.doc.resolve(s))||(s=-1),new bw(s,n.dragging)}return n}};function HAe(t,e,n,r){if(!t.editable)return;const s=la.getState(t.state);if(s&&!s.dragging){const i=YAe(e.target);let a=-1;if(i){const{left:o,right:l}=i.getBoundingClientRect();e.clientX-o<=n?a=CN(t,e,"left",n):l-e.clientX<=n&&(a=CN(t,e,"right",n))}if(a!=s.activeHandle){if(!r&&a!==-1){const o=t.state.doc.resolve(a),l=o.node(-1),d=Or.get(l),c=o.start(-1);if(d.colCount(o.pos-c)+o.nodeAfter.attrs.colspan-1==d.width-1)return}DZ(t,a)}}}function qAe(t){if(!t.editable)return;const e=la.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&DZ(t,-1)}function WAe(t,e,n,r){var s;if(!t.editable)return!1;const i=(s=t.dom.ownerDocument.defaultView)!=null?s:window,a=la.getState(t.state);if(!a||a.activeHandle==-1||a.dragging)return!1;const o=t.state.doc.nodeAt(a.activeHandle),l=GAe(t,a.activeHandle,o.attrs);t.dispatch(t.state.tr.setMeta(la,{setDragging:{startX:e.clientX,startWidth:l}}));function d(f){i.removeEventListener("mouseup",d),i.removeEventListener("mousemove",c);const p=la.getState(t.state);p!=null&&p.dragging&&(KAe(t,p.activeHandle,AN(p.dragging,f,n)),t.dispatch(t.state.tr.setMeta(la,{setDragging:null})))}function c(f){if(!f.which)return d(f);const p=la.getState(t.state);if(p&&p.dragging){const h=AN(p.dragging,f,n);TN(t,p.activeHandle,h,r)}}return TN(t,a.activeHandle,l,r),i.addEventListener("mouseup",d),i.addEventListener("mousemove",c),e.preventDefault(),!0}function GAe(t,e,{colspan:n,colwidth:r}){const s=r&&r[r.length-1];if(s)return s;const i=t.domAtPos(e);let o=i.node.childNodes[i.offset].offsetWidth,l=n;if(r)for(let d=0;d<n;d++)r[d]&&(o-=r[d],l--);return o/l}function YAe(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function CN(t,e,n,r){const s=n=="right"?-r:r,i=t.posAtCoords({left:e.clientX+s,top:e.clientY});if(!i)return-1;const{pos:a}=i,o=Ig(t.state.doc.resolve(a));if(!o)return-1;if(n=="right")return o.pos;const l=Or.get(o.node(-1)),d=o.start(-1),c=l.map.indexOf(o.pos-d);return c%l.width==0?-1:d+l.map[c-1]}function AN(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function DZ(t,e){t.dispatch(t.state.tr.setMeta(la,{setHandle:e}))}function KAe(t,e,n){const r=t.state.doc.resolve(e),s=r.node(-1),i=Or.get(s),a=r.start(-1),o=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let d=0;d<i.height;d++){const c=d*i.width+o;if(d&&i.map[c]==i.map[c-i.width])continue;const f=i.map[c],p=s.nodeAt(f).attrs,h=p.colspan==1?0:o-i.colCount(f);if(p.colwidth&&p.colwidth[h]==n)continue;const m=p.colwidth?p.colwidth.slice():XAe(p.colspan);m[h]=n,l.setNodeMarkup(a+f,null,ze(ge({},p),{colwidth:m}))}l.docChanged&&t.dispatch(l)}function TN(t,e,n,r){const s=t.state.doc.resolve(e),i=s.node(-1),a=s.start(-1),o=Or.get(i).colCount(s.pos-a)+s.nodeAfter.attrs.colspan-1;let l=t.domAtPos(s.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&eM(i,l.firstChild,l,r,o,n)}function XAe(t){return Array(t).fill(0)}function QAe(t,e){var n;const r=[],s=t.doc.resolve(e),i=s.node(-1);if(!i)return _r.empty;const a=Or.get(i),o=s.start(-1),l=a.colCount(s.pos-o)+s.nodeAfter.attrs.colspan-1;for(let d=0;d<a.height;d++){const c=l+d*a.width;if((l==a.width-1||a.map[c]!=a.map[c+1])&&(d==0||a.map[c]!=a.map[c-a.width])){const f=a.map[c],p=o+f+i.nodeAt(f).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",(n=la.getState(t))!=null&&n.dragging&&r.push(bs.node(o+f,o+f+i.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(bs.widget(p,h))}}return _r.create(t.doc,r)}function ZAe({allowTableNodeSelection:t=!1}={}){return new Vn({key:Qd,state:{init(){return null},apply(e,n){const r=e.getMeta(Qd);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:s,pos:i}=e.mapping.mapResult(n);return s?null:i}},props:{decorations:cAe,handleDOMEvents:{mousedown:FAe},createSelectionBetween(e){return Qd.getState(e.state)!=null?e.state.selection:null},handleTripleClick:NAe,handleKeyDown:VAe,handlePaste:jAe},appendTransaction(e,n,r){return hAe(r,TZ(r,n),t)}})}function tM(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function $N(t,e,n,r,s,i){var a;let o=0,l=!0,d=e.firstChild;const c=t.firstChild;if(c!==null)for(let f=0,p=0;f<c.childCount;f+=1){const{colspan:h,colwidth:m}=c.child(f).attrs;for(let g=0;g<h;g+=1,p+=1){const y=s===p?i:m&&m[g],x=y?`${y}px`:"";if(o+=y||r,y||(l=!1),d){if(d.style.width!==x){const[_,k]=tM(r,y);d.style.setProperty(_,k)}d=d.nextSibling}else{const _=document.createElement("col"),[k,w]=tM(r,y);_.style.setProperty(k,w),e.appendChild(_)}}}for(;d;){const f=d.nextSibling;(a=d.parentNode)===null||a===void 0||a.removeChild(d),d=f}l?(n.style.width=`${o}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${o}px`)}class JAe{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),$N(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,$N(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function e4e(t,e,n,r){let s=0,i=!0;const a=[],o=t.firstChild;if(!o)return{};for(let f=0,p=0;f<o.childCount;f+=1){const{colspan:h,colwidth:m}=o.child(f).attrs;for(let g=0;g<h;g+=1,p+=1){const y=n===p?r:m&&m[g];s+=y||e,y||(i=!1);const[x,_]=tM(e,y);a.push(["col",{style:`${x}: ${_}`}])}}const l=i?`${s}px`:"",d=i?"":`${s}px`;return{colgroup:["colgroup",{},...a],tableWidth:l,tableMinWidth:d}}function MN(t,e){return t.createAndFill()}function t4e(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function n4e(t,e,n,r,s){const i=t4e(t),a=[],o=[];for(let d=0;d<n;d+=1){const c=MN(i.cell);if(c&&o.push(c),r){const f=MN(i.header_cell);f&&a.push(f)}}const l=[];for(let d=0;d<e;d+=1)l.push(i.row.createChecked(null,r&&d===0?a:o));return i.table.createChecked(null,l)}function r4e(t){return t instanceof mr}const xx=({editor:t})=>{const{selection:e}=t.state;if(!r4e(e))return!1;let n=0;const r=NQ(e.ranges[0].$from,i=>i.type.name==="table");return r==null||r.node.descendants(i=>{if(i.type.name==="table")return!1;["tableCell","tableHeader"].includes(i.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},s4e=Er.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:JAe,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:s}=e4e(t,this.options.cellMinWidth),i=["table",Ln(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${s}`}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},i]:i},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:s,editor:i})=>{const a=n4e(i.schema,t,e,n);if(s){const o=r.selection.from+1;r.replaceSelectionWith(a).scrollIntoView().setSelection(Wt.near(r.doc.resolve(o)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>vAe(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>yAe(t,e),deleteColumn:()=>({state:t,dispatch:e})=>xAe(t,e),addRowBefore:()=>({state:t,dispatch:e})=>wAe(t,e),addRowAfter:()=>({state:t,dispatch:e})=>kAe(t,e),deleteRow:()=>({state:t,dispatch:e})=>CAe(t,e),deleteTable:()=>({state:t,dispatch:e})=>RAe(t,e),mergeCells:()=>({state:t,dispatch:e})=>vN(t,e),splitCell:()=>({state:t,dispatch:e})=>yN(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>s1("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>s1("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>EAe(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>vN(t,e)?!0:yN(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>$Ae(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>xN(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>xN(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&TZ(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=mr.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:xx,"Mod-Backspace":xx,Delete:xx,"Mod-Delete":xx}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[zAe({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],ZAe({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:pn(Ct(t,"tableRole",e))}}}),i4e=Er.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Ln(this.options.HTMLAttributes,t),0]}}),a4e=Er.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Ln(this.options.HTMLAttributes,t),0]}}),o4e=Er.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Ln(this.options.HTMLAttributes,t),0]}}),l4e={class:"lucide lucide-move-diagonal-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function u4e(t,e){return T(),R("svg",l4e,[...e[0]||(e[0]=[u("path",{d:"M19 13v6h-6"},null,-1),u("path",{d:"M5 11V5h6"},null,-1),u("path",{d:"m5 5 14 14"},null,-1)])])}const RZ=zt({name:"lucide-move-diagonal-2",render:u4e}),d4e={class:"lucide lucide-align-left",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function c4e(t,e){return T(),R("svg",d4e,[...e[0]||(e[0]=[u("path",{d:"M15 12H3"},null,-1),u("path",{d:"M17 18H3"},null,-1),u("path",{d:"M21 6H3"},null,-1)])])}const PZ=zt({name:"lucide-align-left",render:c4e}),f4e={class:"lucide lucide-align-center",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function p4e(t,e){return T(),R("svg",f4e,[...e[0]||(e[0]=[u("path",{d:"M17 12H7"},null,-1),u("path",{d:"M19 18H5"},null,-1),u("path",{d:"M21 6H3"},null,-1)])])}const IZ=zt({name:"lucide-align-center",render:p4e}),h4e={class:"lucide lucide-align-right",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function m4e(t,e){return T(),R("svg",h4e,[...e[0]||(e[0]=[u("path",{d:"M21 12H9"},null,-1),u("path",{d:"M21 18H7"},null,-1),u("path",{d:"M21 6H3"},null,-1)])])}const OZ=zt({name:"lucide-align-right",render:m4e}),g4e={class:"relative"},v4e=["src","alt","width","height"],y4e={class:"absolute bottom-2 right-2 flex items-center gap-2"},b4e={key:0,class:"flex divide-x divide-outline-gray-5 rounded bg-black/65"},x4e={key:1,class:"inset-0 absolute flex items-center justify-center z-10"},_4e={class:"bg-gray-900/80 p-2 inset-0 leading-none rounded-sm flex flex-col items-center justify-center gap-2"},w4e={class:"flex items-center gap-2"},k4e=["disabled"],S4e={key:1,class:"w-full py-1.5"},C4e=Je({__name:"ImageNodeView",props:dP,setup(t){const e=t,n=Q(null),r=Q(null),s=Q(!1),i=Q(0),a=Q(0),o=Q(1);function l(){e.editor.commands.setNodeSelection(e.getPos())}const d=Q(e.node.attrs.alt||""),c=Q(!1);yt(()=>{if(c.value=e.editor.isEditable,n.value){const S=e.node.attrs.width||n.value.naturalWidth,C=e.node.attrs.height||n.value.naturalHeight;S&&C&&(o.value=C/S)}}),e.editor.on("update",()=>{c.value=e.editor.isEditable});function f(S){const C=S.target.value;d.value=C,e.updateAttributes({alt:C})}function p(S){S.key==="Enter"?(S.preventDefault(),m()):(S.key==="Escape"||S.key==="ArrowDown")&&(S.preventDefault(),g()),S.key==="ArrowUp"&&(S.preventDefault(),y())}function h(S){e.editor.commands.focus(),e.editor.chain().setTextSelection(S).scrollIntoView().run()}function m(){const S=e.getPos();e.editor.commands.focus(),e.editor.chain().setTextSelection(S+1).createParagraphNear().scrollIntoView().run()}function g(){const S=e.getPos();h(S+1)}function y(){const S=e.getPos();h(S-1)}function x(S){var M,E,P;if(!c.value)return;l(),s.value=!0,i.value=S.clientX,a.value=((M=n.value)==null?void 0:M.offsetWidth)||e.node.attrs.width||0;const C=e.node.attrs.width||((E=n.value)==null?void 0:E.naturalWidth),A=e.node.attrs.height||((P=n.value)==null?void 0:P.naturalHeight);C&&A?o.value=A/C:o.value=1,window.addEventListener("mousemove",_),window.addEventListener("mouseup",k),document.body.style.cursor="ew-resize"}function _(S){if(!s.value||!n.value||!r.value)return;const A=e.editor.view.dom.clientWidth,M=S.clientX-i.value;let E=a.value+M;E=Math.max(50,Math.min(E,A));const P=E*o.value;n.value.style.width=`${E}px`,n.value.style.height=`${P}px`,r.value.style.width=`${E}px`}function k(){if(s.value&&(s.value=!1,window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",k),document.body.style.cursor="",n.value&&r.value)){const S=n.value.offsetWidth,C=n.value.offsetHeight;e.updateAttributes({width:S,height:C}),n.value.style.width="",n.value.style.height="",r.value.style.width=""}}function w(S){e.editor.commands.setImageAlign(S)}return(S,C)=>(T(),he(v(TC),null,{default:D(()=>[u("div",{ref_key:"containerRef",ref:r,class:pe(["relative overflow-hidden not-prose my-6 rounded-[2px] block max-w-full",[{"ring-2 ring-outline-gray-3 ring-offset-2":S.selected},S.node.attrs.align==="center"?"mx-auto":"",S.node.attrs.align==="right"?"ml-auto mr-0":"",S.node.attrs.align==="left"?"mr-auto ml-0":""]]),style:rt({width:S.node.attrs.width?`${S.node.attrs.width}px`:"auto"})},[u("div",g4e,[S.node.attrs.src?(T(),R("img",{key:0,ref_key:"imageRef",ref:n,class:"rounded-[2px]",src:S.node.attrs.src,alt:S.node.attrs.alt||"",width:S.node.attrs.width,height:S.node.attrs.height,onClick:ut(l,["stop"])},null,8,v4e)):se("",!0),u("div",y4e,[S.selected&&c.value?(T(),R("div",b4e,[u("button",{onClick:C[0]||(C[0]=ut(A=>w("left"),["stop"])),class:pe(["px-1.5 py-1 hover:text-ink-white",S.node.attrs.align==="left"?"text-ink-white":"text-ink-gray-4"])},[b(v(PZ),{class:"size-4"})],2),u("button",{onClick:C[1]||(C[1]=ut(A=>w("center"),["stop"])),class:pe(["px-1.5 py-1 hover:text-ink-white",S.node.attrs.align==="center"?"text-ink-white":"text-ink-gray-4"])},[b(v(IZ),{class:"size-4"})],2),u("button",{onClick:C[2]||(C[2]=ut(A=>w("right"),["stop"])),class:pe(["px-1.5 py-1 hover:text-ink-white",S.node.attrs.align==="right"?"text-ink-white":"text-ink-gray-4"])},[b(v(OZ),{class:"size-4"})],2)])):se("",!0),S.selected&&c.value?(T(),R("button",{key:1,class:"cursor-nw-resize bg-black/65 rounded p-1",onMousedown:ut(x,["prevent"])},[b(v(RZ),{class:"text-white size-4"})],32)):se("",!0)]),S.node.attrs.loading?(T(),R("div",x4e,[u("div",_4e,[u("div",w4e,[b(CR,{class:"text-gray-100 size-4"}),C[4]||(C[4]=u("span",{class:"text-gray-100"},"Uploading...",-1))])])])):se("",!0)]),(c.value||S.node.attrs.alt)&&!S.node.attrs.error?we((T(),R("input",{key:0,"onUpdate:modelValue":C[3]||(C[3]=A=>d.value=A),class:"w-full text-center bg-transparent text-sm text-ink-gray-6 h-7 border-none focus:ring-0 placeholder-ink-gray-4",placeholder:"Add caption",disabled:!c.value,onChange:f,onKeydown:p},null,40,k4e)),[[Rt,d.value]]):se("",!0),S.node.attrs.error?(T(),R("div",S4e,[b(v(nX),{message:`Upload Failed: ${S.node.attrs.error}`},null,8,["message"])])):se("",!0)],6)]),_:1}))}}),A4e=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,T4e=Er.create({name:"image",group:"block",draggable:!0,selectable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null},loading:{default:!1,parseHTML:()=>!1},align:{default:"left",parseHTML:t=>{const e=(t.getAttribute("data-align")||t.getAttribute("align")||"left").toLowerCase();return["left","center","right"].includes(e)?e:"left"},renderHTML:t=>({"data-align":t.align||"left"})},uploadId:{default:null,parseHTML:()=>null},error:{default:null,parseHTML:()=>null}}},parseHTML(){return[{tag:"img[src]",getAttrs:t=>{if(typeof t=="string")return{};const e=t;return{src:e.getAttribute("src"),alt:e.getAttribute("alt"),title:e.getAttribute("title"),width:e.getAttribute("width"),height:e.getAttribute("height")}}}]},renderHTML({HTMLAttributes:t}){return["img",Ln(this.options.HTMLAttributes||{},t)]},addNodeView(){return _b(C4e)},addOptions(){return{uploadFunction:null,HTMLAttributes:{}}},addCommands(){return{setImageAlign:t=>({commands:e})=>e.updateAttributes(this.name,{align:t}),setImage:t=>({commands:e,editor:n})=>{const r=e.insertContent({type:this.name,attrs:t});return r&&t.src&&E4e(n.view,t.src,(s,i)=>{EN(t.src,n.view,i)}),r},uploadImage:t=>({editor:e})=>VZ(t,e.view,null,this.options),selectAndUploadImage:()=>({editor:t})=>{const e=document.createElement("input");return e.type="file",e.accept="image/*",e.onchange=n=>{const r=n.target;if(r.files&&r.files.length){const s=r.files[0];t.commands.uploadImage(s)}},e.click(),!0}}},addInputRules(){return[UQ({find:A4e,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]},addProseMirrorPlugins(){const t=this;return[new Vn({props:{handleDOMEvents:{drop:(e,n)=>{var o,l;if(!((l=(o=n.dataTransfer)==null?void 0:o.files)==null?void 0:l.length)||!t.options.uploadFunction)return!1;const s=Array.from(n.dataTransfer.files).filter(d=>/image/i.test(d.type));if(s.length===0)return!1;n.preventDefault();const i=e.posAtCoords({left:n.clientX,top:n.clientY});let a=null;if(i){a=i.pos;const d=e.state.tr.setSelection(Yt.near(e.state.doc.resolve(a)));e.dispatch(d)}return L2(s,e,a,t.options),!0},handlePaste:(e,n)=>{var i;if(!t.options.uploadFunction)return!1;const r=(i=n.clipboardData)==null?void 0:i.items;if(!r||r.length===0)return!1;const s=[];for(let a=0;a<r.length;a++){const o=r[a];if(o.kind==="file"&&o.type.indexOf("image/")!==-1){const l=o.getAsFile();l&&s.push(l)}}return s.length===0?!1:(n.preventDefault(),L2(s,e,null,t.options),!0)}}},appendTransaction(e,n,r){const s=[];return e.some(i=>i.docChanged)&&r.doc.descendants((i,a)=>{i.type.name==="image"&&i.attrs.src&&(!i.attrs.width||!i.attrs.height)&&!i.attrs.loading&&s.push({node:i,pos:a})}),s.length===0||s.forEach(({node:i,pos:a})=>{const o=t.editor;o&&EN(i.attrs.src,o.view,a)}),null}})]}});function $4e(t,e){if(!e)return null;let n=null;return t.state.doc.descendants((r,s)=>{if(r.type.name==="image"&&r.attrs.uploadId===e)return n=s+r.nodeSize,!1}),n}function LZ(t,e,n,r,s,i,a=!1){if(!r.uploadFunction)return console.error("uploadFunction option is not provided"),!1;const o=`upload-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;return Zet(t).then(l=>{const d=e.state.schema.nodes.image.create({loading:!0,uploadId:o,src:l}),c=e.state.tr;if(s==="replace")if(n===null)c.replaceSelectionWith(d);else{const f=e.state.doc.nodeAt(n);f&&c.replaceWith(n,n+f.nodeSize,d)}else if(n!=null)c.insert(n,d);else{const f=e.state.selection.from;c.insert(f,d)}if(e.dispatch(c),a){const f=d.nodeSize||1;setTimeout(()=>{try{let p=null;if(e.state.doc.descendants((h,m)=>{if(h.type.name==="image"&&h.attrs.uploadId===o)return p=m,!1}),p!==null){const h=p+f,m=e.state.tr.setSelection(Yt.near(e.state.doc.resolve(h)));e.dispatch(m)}}catch(p){console.error("Error moving cursor:",p)}},10)}return r.uploadFunction(t)}).then(l=>NZ(l.file_url).then(d=>ze(ge({},l),{width:d.width,height:d.height})).catch(()=>l)).then(l=>{const d=e.state.tr;e.state.doc.descendants((c,f)=>{if(c.type.name==="image"&&c.attrs.uploadId===o)return d.setNodeMarkup(f,void 0,ze(ge({},c.attrs),{src:l.file_url,width:l.width||c.attrs.width,height:l.height||c.attrs.height,loading:!1})),!1}),e.dispatch(d),i&&i(o)}).catch(l=>{console.error("Image upload failed:",l);try{const d=e.state.tr;e.state.doc.descendants((c,f)=>{if(c.type.name==="image"&&c.attrs.uploadId===o)return d.setNodeMarkup(f,void 0,ze(ge({},c.attrs),{loading:!1,error:l.message||"Failed to upload image"})),!1}),e.dispatch(d)}catch(d){console.error("Error updating failed node:",d)}i&&i(o)}),!0}function M4e(t,e,n,r,s){return LZ(t,e,n,r,"insert",s,!0)}function VZ(t,e,n,r){return LZ(t,e,n,r,"replace")}function E4e(t,e,n){t.state.doc.descendants((r,s)=>{if(r.type.name==="image"&&r.attrs.src===e)return n(r,s),!1})}function EN(t,e,n){NZ(t).then(r=>{var a,o;const s=e.state.doc.nodeAt(n);if(!s||s.type.name!=="image")return;const i=s.attrs;if(i.width==null||i.height==null){const l=e.state.tr.setNodeMarkup(n,void 0,ze(ge({},i),{width:(a=i.width)!=null?a:r.width,height:(o=i.height)!=null?o:r.height}));e.dispatch(l)}}).catch(r=>{})}function NZ(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e({width:r.naturalWidth,height:r.naturalHeight}),r.onerror=n,r.src=t})}function L2(t,e,n,r){if(t.length===1){VZ(t[0],e,n,r);return}let s=[...t],i=null;const a=()=>{if(s.length===0)return;const o=s.shift();if(!o)return;const l=i?$4e(e,i):n;M4e(o,e,l,r,d=>{i=d,setTimeout(a,100)})};a()}function D4e(t){const{targetRef:e,zoomLevel:n=Q(100),onSwipeLeft:r,onSwipeRight:s,onDoubleTap:i,onTap:a,onPanStart:o,onPanMove:l,onPanAnimate:d,onPanEnd:c,onPinchStart:f,onPinchMove:p,onPinchEnd:h,doubleTapDelay:m=300,minSwipeDistance:g=50,maxVerticalSwipeDistance:y=75,maxTapDuration:x=200,maxTapMovement:_=10,panThreshold:k=5,inertiaDamping:w=.94,inertiaVelocityThreshold:S=.5}=t,C=Q(!1),A=Q(!1),M=Q(!1),E=Q({x:0,y:0}),P=Q(0),I=Q(0),F=Q(0),L=Q(null),z=Q(0),N=Q({x:0,y:0}),q=Q({x:0,y:0}),V=Q(null),O=()=>{V.value!==null&&(cancelAnimationFrame(V.value),V.value=null),M.value=!1,q.value={x:0,y:0}},X=G=>{O(),G.preventDefault(),C.value=!1,A.value=!1,L.value=G.touches;const ee=performance.now(),ie=ee-P.value;if(ie<m&&ie>0&&G.touches.length===1&&i){i(G),P.value=0,I.value=0;return}if(I.value=ee,G.touches.length===1){P.value=ee;const ne=G.touches[0];E.value={x:ne.clientX,y:ne.clientY},z.value=ee,N.value=ge({},E.value),q.value={x:0,y:0},o&&o(G)}else if(G.touches.length===2){P.value=0;const ne=G.touches[0],ce=G.touches[1];F.value=Math.hypot(ce.clientX-ne.clientX,ce.clientY-ne.clientY),A.value=!0,f&&f(G)}else P.value=0,I.value=0},j=G=>{if(!L.value)return;G.preventDefault();const ee=performance.now(),ie=ee-z.value;if(G.touches.length===2&&L.value.length===2){C.value=!1,A.value=!0;const ne=G.touches[0],ce=G.touches[1],oe=Math.hypot(ce.clientX-ne.clientX,ce.clientY-ne.clientY);if(F.value>0&&p){const re=oe/F.value;p(re,G)}q.value={x:0,y:0}}else if(G.touches.length===1&&L.value.length===1&&!A.value){const ne=G.touches[0].clientX,ce=G.touches[0].clientY,oe=ne-N.value.x,re=ce-N.value.y;ie>1?q.value={x:oe/ie,y:re/ie}:q.value={x:0,y:0},z.value=ee,N.value={x:ne,y:ce};const te=ne-E.value.x,K=ce-E.value.y;if(!C.value&&n.value>100&&(Math.abs(te)>k||Math.abs(K)>k)&&(C.value=!0,E.value={x:ne,y:ce}),C.value&&l){const le=n.value/100,H=te/le,Y=K/le;l(H,Y,G)}}},U=G=>{var re;const ee=G.touches.length,ie=performance.now(),ne=C.value,ce=A.value,oe=ge({},q.value);if(ne&&L.value&&ee<L.value.length)if(C.value=!1,c&&c(G),Math.hypot(oe.x,oe.y)>S&&d&&n.value>100){M.value=!0;let K=performance.now(),le=ge({},oe);const H=Y=>{if(!M.value)return;const B=Math.max(1,Y-K);K=Y;const ae=n.value/100,be=le.x*B/ae,fe=le.y*B/ae;d(be,fe);const me=Math.pow(Math.min(.999,w),B/16.67);le.x*=me,le.y*=me,Math.hypot(le.x,le.y)<.01||n.value<=100?O():V.value=requestAnimationFrame(H)};V.value=requestAnimationFrame(H)}else q.value={x:0,y:0};else ne||(q.value={x:0,y:0});if(ce&&ee<2&&(A.value=!1,F.value=0,h&&h(G)),ee===0&&G.changedTouches.length===1&&I.value>0&&((re=L.value)==null?void 0:re.length)===1){const te=G.changedTouches[0],K=te.clientX-E.value.x,le=te.clientY-E.value.y,H=ie-I.value;!ne&&n.value<=100&&Math.abs(K)>g&&Math.abs(le)<y?K<0&&r?r():K>0&&s&&s():!ne&&H<x&&Math.abs(K)<_&&Math.abs(le)<_&&a&&a(G)}ee===0?(I.value=0,E.value={x:0,y:0},L.value=null,A.value=!1,M.value||(q.value={x:0,y:0})):ee===1&&!C.value&&!A.value&&(E.value={x:G.touches[0].clientX,y:G.touches[0].clientY},I.value=performance.now(),L.value=G.touches)};return et(e,(G,ee)=>{ee&&(ee.removeEventListener("touchstart",X),ee.removeEventListener("touchmove",j),ee.removeEventListener("touchend",U),ee.removeEventListener("touchcancel",U),O()),G&&(G.addEventListener("touchstart",X,{passive:!1}),G.addEventListener("touchmove",j,{passive:!1}),G.addEventListener("touchend",U,{passive:!0}),G.addEventListener("touchcancel",U,{passive:!0}))},{immediate:!0}),{isPanning:Ka(C),isPinching:Ka(A),isAnimatingPan:Ka(M)}}function R4e({initialIndex:t,imageCount:e,onNavigate:n}){const r=Q(t.value);et(t,a=>{r.value=a,n==null||n()});function s(){e.value>0&&(r.value=(r.value+1)%e.value,n==null||n())}function i(){e.value>0&&(r.value=(r.value-1+e.value)%e.value,n==null||n())}return{currentIndex:r,nextImage:s,previousImage:i}}function P4e({containerRef:t,isEnabled:e}){const n=Q(100),r=Q({x:0,y:0}),s=Q(!1),i=Q({x:0,y:0}),a=Q({x:0,y:0}),o=90,l=110;et(n,(m,g)=>{m<=100&&g>100&&(r.value={x:0,y:0})});function d(){n.value=Math.min(n.value+25,300)}function c(){const m=Math.max(n.value-25,25);n.value>100&&m<100?n.value=100:n.value=m}function f(){n.value=100,r.value={x:0,y:0},s.value=!1,a.value={x:0,y:0}}function p(m){if(n.value<=100)return;m.preventDefault(),s.value=!0,i.value={x:m.clientX,y:m.clientY},a.value=ge({},r.value);const g=x=>{if(!s.value)return;const _=x.clientX-i.value.x,k=x.clientY-i.value.y,w=n.value/100;r.value={x:a.value.x+_/w,y:a.value.y+k/w}},y=()=>{s.value&&(s.value=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y))};document.addEventListener("mousemove",g),document.addEventListener("mouseup",y)}function h(m){var g;if(e.value&&(g=t.value)!=null&&g.contains(m.target)){m.preventDefault();let y=m.ctrlKey?.5:.2;const x=-m.deltaY*y,_=n.value,k=Math.round(_+x);let w=Math.max(25,Math.min(300,k));(_>100&&w<100||_<100&&w>100)&&Math.abs(100-w)<Math.abs(x)*1.5&&(w=100),n.value=w}}return yt(()=>{const m=t.value;m&&m.addEventListener("wheel",h,{passive:!1,capture:!0})}),ks(()=>{const m=t.value;m&&m.removeEventListener("wheel",h,{capture:!0}),s.value&&(s.value=!1)}),{zoomLevel:n,panPosition:r,isMousePanning:s,initialPanPositionOnGestureStart:a,zoomIn:d,zoomOut:c,resetZoom:f,handlePanStart:p,snapThresholdLower:o,snapThresholdUpper:l}}const I4e={class:"lucide lucide-download",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function O4e(t,e){return T(),R("svg",I4e,[...e[0]||(e[0]=[u("path",{d:"M12 15V3"},null,-1),u("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),u("path",{d:"m7 10 5 5 5-5"},null,-1)])])}const L4e=zt({name:"lucide-download",render:O4e}),V4e={class:"lucide lucide-maximize",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function N4e(t,e){return T(),R("svg",V4e,[...e[0]||(e[0]=[u("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"},null,-1),u("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"},null,-1),u("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"},null,-1),u("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"},null,-1)])])}const j4e=zt({name:"lucide-maximize",render:N4e}),F4e={class:"lucide lucide-minimize",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function B4e(t,e){return T(),R("svg",F4e,[...e[0]||(e[0]=[u("path",{d:"M8 3v3a2 2 0 0 1-2 2H3"},null,-1),u("path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"},null,-1),u("path",{d:"M3 16h3a2 2 0 0 1 2 2v3"},null,-1),u("path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"},null,-1)])])}const z4e=zt({name:"lucide-minimize",render:B4e}),U4e={class:"lucide lucide-chevron-left",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function H4e(t,e){return T(),R("svg",U4e,[...e[0]||(e[0]=[u("path",{d:"m15 18-6-6 6-6"},null,-1)])])}const q4e=zt({name:"lucide-chevron-left",render:H4e}),W4e={class:"lucide lucide-chevron-right",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function G4e(t,e){return T(),R("svg",W4e,[...e[0]||(e[0]=[u("path",{d:"m9 18 6-6-6-6"},null,-1)])])}const Y4e=zt({name:"lucide-chevron-right",render:G4e}),K4e={class:"lucide lucide-plus",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function X4e(t,e){return T(),R("svg",K4e,[...e[0]||(e[0]=[u("path",{d:"M5 12h14"},null,-1),u("path",{d:"M12 5v14"},null,-1)])])}const Q4e=zt({name:"lucide-plus",render:X4e}),Z4e={class:"lucide lucide-minus",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function J4e(t,e){return T(),R("svg",Z4e,[...e[0]||(e[0]=[u("path",{d:"M5 12h14"},null,-1)])])}const jZ=zt({name:"lucide-minus",render:J4e}),eTe={class:"relative z-10 flex flex-col items-center"},tTe=["src","alt"],nTe={class:"bg-black/65 rounded flex items-center"},rTe={class:"px-2 text-sm tabular-nums text-gray-400 select-none"},sTe={class:"bg-black/65 rounded flex items-center"},iTe={class:"bg-black/65 rounded flex items-center"},aTe={class:"bg-black/65 rounded flex items-center"},oTe=3e3,FZ=Je({__name:"ImageViewerModal",props:{show:{type:Boolean},images:{},initialIndex:{}},emits:["update:show"],setup(t,{emit:e}){const n=t,r=e,s=Vy("imageContainer"),i=Vy("backdropElement"),a=Vy("controlsBar"),o=Q(0),l=Q(!1),d=Q(100),c=Q(!0),f=Q(null),{zoomLevel:p,panPosition:h,isMousePanning:m,initialPanPositionOnGestureStart:g,zoomIn:y,zoomOut:x,resetZoom:_,handlePanStart:k,snapThresholdLower:w,snapThresholdUpper:S}=P4e({containerRef:s,isEnabled:n2(n,"show")}),{currentIndex:C,nextImage:A,previousImage:M}=R4e({initialIndex:n2(n,"initialIndex"),imageCount:Z(()=>n.images.length),onNavigate:_}),E=Z(()=>n.images[C.value]),{isPanning:P,isPinching:I,isAnimatingPan:F}=D4e({targetRef:s,zoomLevel:p,panThreshold:10,onSwipeLeft:()=>{p.value<=100&&A()},onSwipeRight:()=>{p.value<=100&&M()},onDoubleTap:U=>{var G;(G=a.value)!=null&&G.contains(U.target)||(p.value>100?_():(p.value=200,h.value={x:0,y:0}))},onTap:U=>{U.target===i.value&&q()},onPanStart:()=>{p.value<=100||(g.value=ge({},h.value))},onPanMove:(U,G)=>{p.value<=100||(h.value={x:g.value.x+U,y:g.value.y+G})},onPanAnimate:(U,G)=>{h.value={x:h.value.x+U,y:h.value.y+G}},onPinchStart:()=>{d.value=p.value,g.value=ge({},h.value)},onPinchMove:U=>{const G=d.value*U;let ee=Math.max(25,Math.min(300,Math.round(G)));ee>w&&ee<S&&(ee=100),p.value=ee},onPinchEnd:()=>{p.value<100&&_(),g.value={x:0,y:0}}}),L=Z(()=>m.value||P.value);function z(){c.value=!0,f.value&&clearTimeout(f.value),f.value=setTimeout(()=>{!L.value&&!I.value?c.value=!1:z()},oTe)}function N(){(!I.value||!c.value)&&z()}function q(){r("update:show",!1),_(),f.value&&(clearTimeout(f.value),f.value=null)}function V(){var ie;const U=E.value,G=document.createElement("a");G.href=U.src;const ee=((ie=U.alt)==null?void 0:ie.replace(/[^a-z0-9]/gi,"_").toLowerCase())||U.src.split("/").pop()||"download";G.download=ee.includes(".")?ee:`${ee}.jpg`,document.body.appendChild(G),G.click(),document.body.removeChild(G)}function O(){const U=s.value;l.value?document.exitFullscreen&&(document.exitFullscreen(),l.value=!1):U!=null&&U.requestFullscreen&&(U.requestFullscreen(),l.value=!0)}function X(){l.value=!!document.fullscreenElement}function j(U){if(n.show)switch(N(),U.key){case"ArrowLeft":L.value||M(),U.preventDefault();break;case"ArrowRight":L.value||A(),U.preventDefault();break;case"+":case"=":y(),U.preventDefault();break;case"-":x(),U.preventDefault();break;case"Escape":q(),U.preventDefault();break;case"f":case"F":O(),U.preventDefault();break}}return et(()=>n.show,U=>{U?(c.value=!0,_(),z()):(f.value&&(clearTimeout(f.value),f.value=null),l.value&&document.exitFullscreen&&document.exitFullscreen())}),et(a,U=>{if(U){const G=()=>{o.value=U.offsetHeight},ee=new ResizeObserver(G);ee.observe(U),G(),ks(()=>ee.disconnect())}else o.value=0}),yt(()=>{document.addEventListener("fullscreenchange",X),document.addEventListener("keydown",j)}),ks(()=>{document.removeEventListener("fullscreenchange",X),document.removeEventListener("keydown",j),f.value&&clearTimeout(f.value),l.value&&document.exitFullscreen&&document.exitFullscreen()}),(U,G)=>(T(),he(jD,{to:"body"},[b(zS,{"enter-active-class":"transition-opacity duration-150 ease-in-out","leave-active-class":"transition-opacity duration-150 ease-in-out","enter-from-class":"opacity-0","leave-to-class":"opacity-0",appear:""},{default:D(()=>[n.show?(T(),R("div",{key:0,class:"fixed top-0 left-0 w-full h-full bg-black sm:bg-black/90 z-[50] flex flex-col justify-center items-center overflow-hidden touch-none",ref_key:"imageContainer",ref:s,onMousemove:N,onTouchstart:N,onTouchmove:N},[u("div",{class:"absolute inset-0 z-0",ref_key:"backdropElement",ref:i,onClick:q},null,512),u("div",eTe,[u("img",{src:E.value.src,alt:E.value.alt||"Image preview",class:"max-w-screen max-h-screen object-contain block",style:rt({transform:`scale(${v(p)/100}) translate(${v(h).x}px, ${v(h).y}px)`,cursor:v(p)>100?v(m)?"grabbing":"grab":"default",transition:L.value||v(I)||v(F)?"none":"transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)"}),onMousedown:G[0]||(G[0]=(...ee)=>v(k)&&v(k)(...ee)),draggable:"false"},null,44,tTe)]),E.value.alt?(T(),R("div",{key:0,class:pe(["absolute bottom-4 p-2 text-center rounded-sm text-white text-sm bg-black/65 z-10 transition-opacity duration-300 ease-in-out",{"opacity-0 pointer-events-none":!c.value}])},$(E.value.alt),3)):se("",!0),u("div",{ref_key:"controlsBar",ref:a,class:pe(["absolute top-4 flex items-center space-x-3 p-2 text-white z-20 transition-opacity duration-300 ease-in-out",{"opacity-0 pointer-events-none":!c.value}]),onTouchstart:G[6]||(G[6]=ut(()=>{},["stop"])),onTouchmove:G[7]||(G[7]=ut(()=>{},["stop"])),onTouchend:G[8]||(G[8]=ut(()=>{},["stop"])),onMousedown:G[9]||(G[9]=ut(()=>{},["stop"])),onWheel:G[10]||(G[10]=ut(()=>{},["stop"]))},[u("div",nTe,[b(ul,{text:"Previous image"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-l focus:outline-none",onClick:G[1]||(G[1]=ut((...ee)=>v(M)&&v(M)(...ee),["stop"]))},[b(v(q4e),{class:"size-4"})])]),_:1}),u("span",rTe,$(v(C)+1)+"/"+$(n.images.length),1),b(ul,{text:"Next image"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-r focus:outline-none",onClick:G[2]||(G[2]=ut((...ee)=>v(A)&&v(A)(...ee),["stop"]))},[b(v(Y4e),{class:"size-4"})])]),_:1})]),u("div",sTe,[b(ul,{text:"Zoom out"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-l focus:outline-none",onClick:G[3]||(G[3]=ut((...ee)=>v(x)&&v(x)(...ee),["stop"]))},[b(v(jZ),{class:"size-4"})])]),_:1}),b(ul,{text:"Reset zoom"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 text-sm text-gray-400 focus:outline-none",onClick:G[4]||(G[4]=ut((...ee)=>v(_)&&v(_)(...ee),["stop"]))},$(v(p))+"% ",1)]),_:1}),b(ul,{text:"Zoom in"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-r focus:outline-none",onClick:G[5]||(G[5]=ut((...ee)=>v(y)&&v(y)(...ee),["stop"]))},[b(v(Q4e),{class:"size-4"})])]),_:1})]),u("div",iTe,[b(ul,{text:"Download image"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-l focus:outline-none",onClick:ut(V,["stop"])},[b(v(L4e),{class:"size-4"})])]),_:1}),b(ul,{text:l.value?"Exit fullscreen":"Enter fullscreen"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded-r focus:outline-none hidden sm:block",onClick:ut(O,["stop"])},[l.value?(T(),he(v(z4e),{key:1,class:"size-4"})):(T(),he(v(j4e),{key:0,class:"size-4"}))])]),_:1},8,["text"])]),u("div",aTe,[b(ul,{text:"Close"},{default:D(()=>[u("button",{class:"p-2 hover:bg-gray-900 rounded focus:outline-none",onClick:ut(q,["stop"])},[b(v(Eg),{class:"size-4"})])]),_:1})])],34)],544)):se("",!0)]),_:1})]))}}),lTe=wr.create({name:"imageViewer",onBeforeCreate(){if(!document.querySelector("style[data-image-viewer-style]")){const t=document.createElement("style");t.textContent=`
          .ProseMirror:not(.ProseMirror-focused) img {
            cursor: pointer;
          }
        `,t.setAttribute("data-image-viewer-style","true"),document.head.appendChild(t)}},onDestroy(){const t=document.querySelector("style[data-image-viewer-style]");t&&document.head.removeChild(t)},addCommands(){return{openImageViewer:t=>({editor:e})=>{const n=[];e.state.doc.descendants(s=>(s.type.name==="image"&&n.push({src:s.attrs.src,alt:s.attrs.alt||null}),!0));const r=n.findIndex(s=>s.src===t);return uTe(n,r),!0}}},addProseMirrorPlugins(){const t=this;return[new Vn({key:new Hn("imageViewer"),props:{handleClick(e,n,r){if(t.editor.isEditable)return!1;const{state:s}=e,i=s.doc.nodeAt(n);if((i==null?void 0:i.type.name)==="image"){r.preventDefault();const a=i.attrs.src;return t.editor.commands.openImageViewer(a),!0}if(r.target instanceof HTMLImageElement){let a=!1;if(s.doc.descendants((o,l)=>{if(o.type.name==="image"&&!a){const d=e.nodeDOM(l);if(d&&(d===r.target||d.contains(r.target)))return r.preventDefault(),t.editor.commands.openImageViewer(o.attrs.src),a=!0,!1}return!0}),a)return!0}return!1}}})]}});function uTe(t,e){const n=document.createElement("div");document.body.appendChild(n);const r=qD({render(){return pr(FZ,{show:!0,images:t,initialIndex:e,"onUpdate:show":s=>{s||setTimeout(()=>{r.unmount(),n.remove()},0)}})}});r.mount(n)}const dTe=Er.create({name:"video",group:"block",selectable:!0,draggable:!0,atom:!0,addOptions(){return{uploadFunction:null,HTMLAttributes:{}}},addAttributes(){return{src:{default:null}}},parseHTML(){return[{tag:"video"}]},renderHTML({HTMLAttributes:t}){return["video",Ln(this.options.HTMLAttributes,t,{controls:""})]},addCommands(){return{setVideo:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t}),uploadVideo:t=>({editor:e})=>{const n=e.state.selection.from;return cTe(t,e.view,n,this.options)},selectAndUploadVideo:()=>({editor:t})=>{if(!this.options.uploadFunction)return console.error("uploadFunction option is not provided for videos."),!1;const e=document.createElement("input");return e.type="file",e.accept="video/*",e.onchange=n=>{const r=n.target;if(r.files&&r.files.length){const s=r.files[0];t.commands.uploadVideo(s)}},e.click(),!0}}},addNodeView(){return({editor:t,node:e})=>{const n=document.createElement("div");n.className="relative aspect-w-16 aspect-h-9"+(t.isEditable?" cursor-pointer":"");const r=document.createElement("video");if(r.src=e.attrs.src,r.setAttribute("controls",""),t.isEditable){let s=document.createElement("div");s.className="absolute top-0 right-0 text-xs m-2 bg-surface-gray-6 text-ink-white px-2 py-1 rounded-md",s.innerHTML="Video",n.append(s)}return n.append(r),{dom:n}}}});function cTe(t,e,n,r){return r.uploadFunction?(r.uploadFunction(t).then(s=>{const{schema:i}=e.state,a=i.nodes.video.create({src:s.file_url}),o=e.state.tr;n!=null?o.insert(n,a):o.replaceSelectionWith(a),e.dispatch(o)}).catch(s=>{console.error("Video upload failed:",s)}),!0):(console.error("uploadFunction option is not provided for videos."),!1)}const fTe=["youtube.com","www.youtube.com","youtu.be","vimeo.com","player.vimeo.com","codepen.io","codesandbox.io","figma.com","www.figma.com","embed.figma.com","docs.google.com","drive.google.com","notion.so","www.notion.so"],pTe=[{name:"YouTube",ratio:9/16,defaultWidth:640,urlPatterns:["youtube.com","youtu.be","youtube-nocookie.com"]},{name:"Vimeo",ratio:9/16,defaultWidth:640,urlPatterns:["vimeo.com","player.vimeo.com"]},{name:"CodePen",ratio:3/2,defaultWidth:500,urlPatterns:["codepen.io"]},{name:"CodeSandbox",ratio:3/2,defaultWidth:500,urlPatterns:["codesandbox.io"]},{name:"Figma",ratio:9/16,defaultWidth:800,urlPatterns:["figma.com","www.figma.com","embed.figma.com"]},{name:"Google Docs",ratio:4/3,defaultWidth:600,urlPatterns:["docs.google.com","drive.google.com"]},{name:"Notion",ratio:4/3,defaultWidth:600,urlPatterns:["notion.so","www.notion.so"]}];function BZ(t){try{const n=new URL(t).hostname.toLowerCase();return pTe.find(r=>r.urlPatterns.some(s=>n.includes(s)))||null}catch(e){return null}}function nM(t){const e=BZ(t);return e?{ratio:e.ratio,width:e.defaultWidth,height:Math.round(e.defaultWidth*e.ratio),platform:e.name}:{ratio:9/16,width:640,height:360,platform:"Generic"}}function rM(t,e){const n=nM(t);if(e){const s=Math.min(e-40,n.width);return{width:s,height:Math.round(s*n.ratio)}}return{width:n.width,height:n.height}}function zZ(t,e){var n,r;try{if(t.startsWith("/"))return!0;const i=new URL(t).hostname.toLowerCase();return(n=e.blockedDomains)!=null&&n.some(a=>i.includes(a))?!1:(r=e.allowedDomains)!=null&&r.length?e.allowedDomains.some(a=>i.includes(a.toLowerCase())):!0}catch(s){return!1}}function sM(t){try{const n=new URL(t).hostname.toLowerCase();return n.includes("youtube.com")||n.includes("youtu.be")?hTe(t):n.includes("vimeo.com")?mTe(t):n.includes("codepen.io")?gTe(t):n.includes("figma.com")?vTe(t):t}catch(e){return t}}function hTe(t){try{const e=new URL(t);let n="";if(e.hostname==="youtu.be")n=e.pathname.slice(1);else if(e.hostname.includes("youtube.com")&&(n=e.searchParams.get("v")||"",e.pathname.includes("/embed/")))return t;if(n)return`https://www.youtube.com/embed/${n}?rel=0&modestbranding=1`}catch(e){console.warn("Failed to convert YouTube URL:",e)}return t}function mTe(t){try{if(t.includes("player.vimeo.com"))return t;const e=t.match(/vimeo\.com\/(?:.*\/)?(\d+)/);if(e!=null&&e[1])return`https://player.vimeo.com/video/${e[1]}?title=0&byline=0&portrait=0`}catch(e){console.warn("Failed to convert Vimeo URL:",e)}return t}function gTe(t){try{if(t.includes("/embed/"))return t;const e=t.match(/codepen\.io\/([^\/]+)\/pen\/([^\/\?]+)/);if(e!=null&&e[1]&&(e!=null&&e[2]))return`https://codepen.io/${e[1]}/embed/${e[2]}?default-tab=result`}catch(e){console.warn("Failed to convert CodePen URL:",e)}return t}function vTe(t){try{const e=new URL(t);return(e.hostname==="www.figma.com"||e.hostname==="figma.com")&&e.pathname.startsWith("/design/")?(e.hostname="embed.figma.com",e.searchParams.set("embed-host","share"),e.toString()):e.hostname==="embed.figma.com"?(e.searchParams.has("embed-host")||e.searchParams.set("embed-host","share"),e.toString()):t}catch(e){console.warn("Failed to convert Figma URL:",e)}return t}const yTe={class:"relative"},bTe=["src","title"],xTe={class:"absolute bottom-2 right-2 flex items-center gap-2 z-20"},_Te={key:0,class:"flex divide-x divide-ink-gray-6 rounded-md bg-black/65"},wTe={key:2,class:"flex items-center justify-center bg-surface-gray-1 rounded-lg w-[640px] h-[360px]"},kTe=["value","disabled"],STe=Je({__name:"IframeNodeView",props:dP,setup(t){const e=t,n=Q(null),r=Q(null),s=Q(!1),i=Q(0),a=Q(0),o=Q(9/16),l=Q(!1);function d(){e.editor.commands.setNodeSelection(e.getPos())}Z(()=>{if(e.node.attrs.src){const w=BZ(e.node.attrs.src),S=nM(e.node.attrs.src);return{platform:(w==null?void 0:w.name)||"Generic",aspectRatio:S.ratio}}return{platform:"Generic",aspectRatio:9/16}});const c=Z(()=>{const w=e.node.attrs.width||640,S=e.node.attrs.height||w*o.value;return{width:`${w}px`,height:`${S}px`}});yt(()=>{if(l.value=e.editor.isEditable,e.node.attrs.aspectRatio)o.value=e.node.attrs.aspectRatio;else if(e.node.attrs.src){const w=nM(e.node.attrs.src);o.value=w.ratio,e.updateAttributes({aspectRatio:w.ratio})}}),e.editor.on("update",()=>{l.value=e.editor.isEditable});function f(w){var S;if(l.value){if(d(),s.value=!0,i.value=w.clientX,a.value=((S=r.value)==null?void 0:S.offsetWidth)||e.node.attrs.width||640,e.node.attrs.aspectRatio)o.value=e.node.attrs.aspectRatio;else{const C=e.node.attrs.width||a.value,A=e.node.attrs.height||C*o.value;C&&A&&(o.value=A/C)}window.addEventListener("mousemove",p),window.addEventListener("mouseup",h),document.body.style.cursor="ew-resize"}}function p(w){if(!s.value||!n.value||!r.value)return;const C=e.editor.view.dom.clientWidth,A=w.clientX-i.value;let M=a.value+A;M=Math.max(200,Math.min(M,C-40));const I=M*o.value;n.value.style.width=`${M}px`,n.value.style.height=`${I}px`,r.value.style.width=`${M}px`}function h(){if(s.value&&(s.value=!1,window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",h),document.body.style.cursor="",n.value&&r.value)){const w=n.value.offsetWidth,S=n.value.offsetHeight;e.updateAttributes({width:w,height:S,aspectRatio:o.value}),n.value.style.width="",n.value.style.height="",r.value.style.width=""}}function m(w){e.updateAttributes({align:w})}function g(w){w.key==="Enter"?(w.preventDefault(),x()):(w.key==="Escape"||w.key==="ArrowDown")&&(w.preventDefault(),_()),w.key==="ArrowUp"&&(w.preventDefault(),k())}function y(w){e.editor.commands.focus(),e.editor.chain().setTextSelection(w).scrollIntoView().run()}function x(){const w=e.getPos();e.editor.commands.focus(),e.editor.chain().setTextSelection(w+1).createParagraphNear().scrollIntoView().run()}function _(){const w=e.getPos();y(w+1)}function k(){const w=e.getPos();y(w-1)}return(w,S)=>(T(),he(v(TC),null,{default:D(()=>[u("div",{ref_key:"containerRef",ref:r,class:pe(["relative overflow-hidden not-prose my-6 rounded-lg block max-w-full focus:outline-none",[{"ring-2 ring-outline-gray-3 ring-offset-2":w.selected},w.node.attrs.align==="center"?"mx-auto":"",w.node.attrs.align==="right"?"ml-auto mr-0":"",w.node.attrs.align==="left"?"mr-auto ml-0":""]]),style:rt({width:w.node.attrs.width?`${w.node.attrs.width}px`:"auto",maxWidth:"100%"}),onKeydown:g,tabindex:"0"},[u("div",yTe,[w.node.attrs.src?(T(),R("iframe",{key:0,ref_key:"iframeRef",ref:n,class:pe(["rounded-lg border-0 block max-w-full h-auto",{"pointer-events-none":l.value&&!e.node.attrs.interactive}]),src:w.node.attrs.src,style:rt(c.value),title:w.node.attrs.title||"",frameborder:"0",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",sandbox:"allow-scripts allow-same-origin allow-popups allow-forms",onClick:ut(d,["stop"])},null,14,bTe)):se("",!0),l.value&&!e.node.attrs.interactive?(T(),R("div",{key:1,class:"absolute inset-0 cursor-pointer z-10",onClick:ut(d,["stop"])})):se("",!0),u("div",xTe,[w.selected&&l.value?(T(),R("div",_Te,[u("button",{onClick:S[0]||(S[0]=ut(C=>m("left"),["stop"])),class:pe(["px-1.5 py-1 text-ink-gray-4 hover:text-white transition-colors duration-150",{"text-white":w.node.attrs.align==="left"}]),title:"Align Left"},[b(v(PZ),{class:"size-4"})],2),u("button",{onClick:S[1]||(S[1]=ut(C=>m("center"),["stop"])),class:pe(["px-1.5 py-1 text-ink-gray-4 hover:text-white transition-colors duration-150",{"text-white":w.node.attrs.align==="center"}]),title:"Align Center"},[b(v(IZ),{class:"size-4"})],2),u("button",{onClick:S[2]||(S[2]=ut(C=>m("right"),["stop"])),class:pe(["px-1.5 py-1 text-ink-gray-4 hover:text-white transition-colors duration-150",{"text-white":w.node.attrs.align==="right"}]),title:"Align Right"},[b(v(OZ),{class:"size-4"})],2)])):se("",!0),w.selected&&l.value?(T(),R("button",{key:1,class:"cursor-nw-resize bg-black/65 rounded-md p-1",onMousedown:ut(f,["prevent"]),title:"Resize"},[b(v(RZ),{class:"text-white size-4"})],32)):se("",!0)]),w.node.attrs.src?se("",!0):(T(),R("div",wTe,[...S[4]||(S[4]=[u("div",{class:"text-ink-gray-5 text-center"},[u("div",{class:"text-lg mb-1"},""),u("div",{class:"text-sm"},"Loading embed...")],-1)])]))]),(l.value||w.node.attrs.title)&&w.node.attrs.src?(T(),R("input",{key:0,value:w.node.attrs.title,class:"w-full text-center bg-transparent text-sm text-ink-gray-6 h-7 border-0 mt-2 focus:outline-none focus:ring-0 placeholder-ink-gray-4 disabled:opacity-60",placeholder:"Add caption",disabled:!l.value,onInput:S[3]||(S[3]=C=>e.updateAttributes({title:C.target.value})),onKeydown:g},null,40,kTe)):se("",!0)],38)]),_:1}))}}),CTe=It(STe,[["__scopeId","data-v-ffd6a61a"]]),ATe=Er.create({name:"iframe",group:"block",selectable:!0,draggable:!0,atom:!0,addOptions(){return{allowedDomains:fTe,blockedDomains:[],HTMLAttributes:{}}},addAttributes(){return{src:{default:null,parseHTML:t=>t.getAttribute("src"),renderHTML:t=>({src:t.src})},width:{default:null,parseHTML:t=>{const e=t.getAttribute("width");return e?parseInt(e,10):null},renderHTML:t=>({width:t.width?String(t.width):null})},height:{default:null,parseHTML:t=>{const e=t.getAttribute("height");return e?parseInt(e,10):null},renderHTML:t=>({height:t.height?String(t.height):null})},aspectRatio:{default:9/16,parseHTML:()=>null,renderHTML:()=>({})},align:{default:"center",parseHTML:t=>{const e=(t.getAttribute("data-align")||t.getAttribute("align")||"left").toLowerCase();return["left","center","right"].includes(e)?e:"left"},renderHTML:t=>({"data-align":t.align||"center"})},title:{default:null,parseHTML:t=>t.getAttribute("title"),renderHTML:t=>({title:t.title})},frameborder:{default:"0",renderHTML:()=>({frameborder:"0"})},allowfullscreen:{default:"true",renderHTML:()=>({allowfullscreen:"true"})},sandbox:{default:"allow-scripts allow-same-origin allow-popups allow-forms",renderHTML:t=>({sandbox:t.sandbox})},interactive:{default:!1,parseHTML:t=>t.getAttribute("data-interactive")==="true",renderHTML:t=>({"data-interactive":t.interactive?"true":"false"})}}},parseHTML(){return[{tag:"iframe[src]",getAttrs:t=>{const e=t.getAttribute("src"),n=t.getAttribute("width"),r=t.getAttribute("height"),s=t.getAttribute("title"),i=t.getAttribute("data-align");return{src:e,width:n?parseInt(n,10):null,height:r?parseInt(r,10):null,title:s||null,align:i||"center"}}}]},renderHTML({HTMLAttributes:t}){return["iframe",Ln(this.options.HTMLAttributes,t,{loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"})]},addNodeView(){return _b(CTe)},addCommands(){return{setIframeAlign:t=>({commands:e})=>e.updateAttributes(this.name,{align:t}),setIframe:t=>({commands:e,editor:n})=>{if(!zZ(t.src,this.options))return!1;const r=sM(t.src),s=n.view.dom,i=(s==null?void 0:s.clientWidth)||800,a=rM(r,i),o={src:r,width:t.width||a.width,height:t.height||a.height,title:t.title,align:t.align||"center",aspectRatio:a.height/a.width,interactive:t.interactive};return e.insertContent({type:this.name,attrs:o})},insertIframeURL:t=>({commands:e})=>{const n=sM(t);return e.setIframe({src:n})},openIframeDialog:()=>({editor:t})=>{const e=new CustomEvent("iframe:open-dialog",{detail:{editor:t}});return t.view.dom.dispatchEvent(e),!0}}},addProseMirrorPlugins(){const t=this;return[new Vn({key:new Hn("iframe-paste-handler"),props:{handlePaste:(e,n,r)=>{var a,o;const s=(a=n.clipboardData)==null?void 0:a.getData("text/plain"),i=(o=n.clipboardData)==null?void 0:o.getData("text/html");if(i){const l=DN(i);if(l)return I4(e,t,l.src,l.width,l.height,l.title)}if(s&&s.includes("<iframe")){const l=DN(s);if(l)return I4(e,t,l.src,l.width,l.height,l.title)}return s&&/^https?:\/\/(?:www\.)?(?:youtube\.com\/watch\?v=[\w-]+|youtu\.be\/[\w-]+|youtube\.com\/embed\/[\w-]+|vimeo\.com\/\d+|player\.vimeo\.com\/video\/\d+|codepen\.io\/[\w-]+\/pen\/[\w-]+|codesandbox\.io\/[\w\/.-]+|figma\.com\/[\w\/.-]+|embed\.figma\.com\/[\w\/.-]+)$/.test(s.trim())?I4(e,t,s.trim()):!1}}})]}});function DN(t){try{const r=new DOMParser().parseFromString(t,"text/html").querySelector("iframe");if(!r){const l=t.match(/<iframe[^>]*src=["']([^"']+)["'][^>]*>/i);if(l){const d=l[1],c=t.match(/width=["'](\d+)["']/i),f=t.match(/height=["'](\d+)["']/i),p=t.match(/title=["']([^"']+)["']/i);return{src:d,width:c?parseInt(c[1],10):void 0,height:f?parseInt(f[1],10):void 0,title:p?p[1]:void 0}}return null}const s=r.getAttribute("src");if(!s)return null;const i=r.getAttribute("width")?parseInt(r.getAttribute("width"),10):void 0,a=r.getAttribute("height")?parseInt(r.getAttribute("height"),10):void 0,o=r.getAttribute("title")||void 0;return{src:s,width:i,height:a,title:o}}catch(e){return null}}function I4(t,e,n,r,s,i){if(!confirm(`Do you want to embed this content?

URL: ${n}

Click "OK" to create an embed, or "Cancel" to paste as plain text.`)||!zZ(n,e.options))return!1;console.log("URL validated, creating iframe node");const o=sM(n),l=e.editor.view.dom,d=(l==null?void 0:l.clientWidth)||800,c=r||rM(o,d).width,f=s||rM(o,d).height,p={src:o,width:c,height:f,title:i,align:"center",aspectRatio:f/c},h=t.state.schema.nodes.iframe.create(p),m=t.state.tr.replaceSelectionWith(h);return t.dispatch(m),!0}const TTe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",$Te="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",iM="numeric",aM="ascii",oM="alpha",Zy="asciinumeric",fy="alphanumeric",lM="domain",UZ="emoji",MTe="scheme",ETe="slashscheme",O4="whitespace";function DTe(t,e){return t in e||(e[t]=[]),e[t]}function sp(t,e,n){e[iM]&&(e[Zy]=!0,e[fy]=!0),e[aM]&&(e[Zy]=!0,e[oM]=!0),e[Zy]&&(e[fy]=!0),e[oM]&&(e[fy]=!0),e[fy]&&(e[lM]=!0),e[UZ]&&(e[lM]=!0);for(const r in e){const s=DTe(r,n);s.indexOf(t)<0&&s.push(t)}}function RTe(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function zi(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}zi.groups={};zi.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||zi.groups;let s;return e&&e.j?s=e:(s=new zi(e),n&&r&&sp(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let a=0;a<i-1;a++)s=s.tt(t[a]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||zi.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let a,o=s.go(t);if(o?(a=new zi,Object.assign(a.j,o.j),a.jr.push.apply(a.jr,o.jr),a.jd=o.jd,a.t=o.t):a=new zi,i){if(r)if(a.t&&typeof a.t=="string"){const l=Object.assign(RTe(a.t,r),n);sp(i,l,r)}else n&&sp(i,n,r);a.t=i}return s.j[t]=a,a}};const fn=(t,e,n,r,s)=>t.ta(e,n,r,s),Dr=(t,e,n,r,s)=>t.tr(e,n,r,s),RN=(t,e,n,r,s)=>t.ts(e,n,r,s),at=(t,e,n,r,s)=>t.tt(e,n,r,s),vu="WORD",uM="UWORD",HZ="ASCIINUMERICAL",qZ="ALPHANUMERICAL",i1="LOCALHOST",dM="TLD",cM="UTLD",xw="SCHEME",gm="SLASH_SCHEME",pP="NUM",fM="WS",hP="NL",Jy="OPENBRACE",e0="CLOSEBRACE",V2="OPENBRACKET",N2="CLOSEBRACKET",j2="OPENPAREN",F2="CLOSEPAREN",B2="OPENANGLEBRACKET",z2="CLOSEANGLEBRACKET",U2="FULLWIDTHLEFTPAREN",H2="FULLWIDTHRIGHTPAREN",q2="LEFTCORNERBRACKET",W2="RIGHTCORNERBRACKET",G2="LEFTWHITECORNERBRACKET",Y2="RIGHTWHITECORNERBRACKET",K2="FULLWIDTHLESSTHAN",X2="FULLWIDTHGREATERTHAN",Q2="AMPERSAND",Z2="APOSTROPHE",J2="ASTERISK",Gd="AT",ek="BACKSLASH",tk="BACKTICK",nk="CARET",Zd="COLON",mP="COMMA",rk="DOLLAR",fl="DOT",sk="EQUALS",gP="EXCLAMATION",Da="HYPHEN",t0="PERCENT",ik="PIPE",ak="PLUS",ok="POUND",n0="QUERY",vP="QUOTE",WZ="FULLWIDTHMIDDLEDOT",yP="SEMI",pl="SLASH",r0="TILDE",lk="UNDERSCORE",GZ="EMOJI",uk="SYM";var YZ=Object.freeze({__proto__:null,ALPHANUMERICAL:qZ,AMPERSAND:Q2,APOSTROPHE:Z2,ASCIINUMERICAL:HZ,ASTERISK:J2,AT:Gd,BACKSLASH:ek,BACKTICK:tk,CARET:nk,CLOSEANGLEBRACKET:z2,CLOSEBRACE:e0,CLOSEBRACKET:N2,CLOSEPAREN:F2,COLON:Zd,COMMA:mP,DOLLAR:rk,DOT:fl,EMOJI:GZ,EQUALS:sk,EXCLAMATION:gP,FULLWIDTHGREATERTHAN:X2,FULLWIDTHLEFTPAREN:U2,FULLWIDTHLESSTHAN:K2,FULLWIDTHMIDDLEDOT:WZ,FULLWIDTHRIGHTPAREN:H2,HYPHEN:Da,LEFTCORNERBRACKET:q2,LEFTWHITECORNERBRACKET:G2,LOCALHOST:i1,NL:hP,NUM:pP,OPENANGLEBRACKET:B2,OPENBRACE:Jy,OPENBRACKET:V2,OPENPAREN:j2,PERCENT:t0,PIPE:ik,PLUS:ak,POUND:ok,QUERY:n0,QUOTE:vP,RIGHTCORNERBRACKET:W2,RIGHTWHITECORNERBRACKET:Y2,SCHEME:xw,SEMI:yP,SLASH:pl,SLASH_SCHEME:gm,SYM:uk,TILDE:r0,TLD:dM,UNDERSCORE:lk,UTLD:cM,UWORD:uM,WORD:vu,WS:fM});const uu=/[a-z]/,mv=new RegExp("\\p{L}","u"),L4=new RegExp("\\p{Emoji}","u"),du=/\d/,V4=/\s/,PN="\r",N4=`
`,PTe="",ITe="",j4="";let _x=null,kx=null;function OTe(t=[]){const e={};zi.groups=e;const n=new zi;_x==null&&(_x=IN(TTe)),kx==null&&(kx=IN($Te)),at(n,"'",Z2),at(n,"{",Jy),at(n,"}",e0),at(n,"[",V2),at(n,"]",N2),at(n,"(",j2),at(n,")",F2),at(n,"<",B2),at(n,">",z2),at(n,"",U2),at(n,"",H2),at(n,"",q2),at(n,"",W2),at(n,"",G2),at(n,"",Y2),at(n,"",K2),at(n,"",X2),at(n,"&",Q2),at(n,"*",J2),at(n,"@",Gd),at(n,"`",tk),at(n,"^",nk),at(n,":",Zd),at(n,",",mP),at(n,"$",rk),at(n,".",fl),at(n,"=",sk),at(n,"!",gP),at(n,"-",Da),at(n,"%",t0),at(n,"|",ik),at(n,"+",ak),at(n,"#",ok),at(n,"?",n0),at(n,'"',vP),at(n,"/",pl),at(n,";",yP),at(n,"~",r0),at(n,"_",lk),at(n,"\\",ek),at(n,"",WZ);const r=Dr(n,du,pP,{[iM]:!0});Dr(r,du,r);const s=Dr(r,uu,HZ,{[Zy]:!0}),i=Dr(r,mv,qZ,{[fy]:!0}),a=Dr(n,uu,vu,{[aM]:!0});Dr(a,du,s),Dr(a,uu,a),Dr(s,du,s),Dr(s,uu,s);const o=Dr(n,mv,uM,{[oM]:!0});Dr(o,uu),Dr(o,du,i),Dr(o,mv,o),Dr(i,du,i),Dr(i,uu),Dr(i,mv,i);const l=at(n,N4,hP,{[O4]:!0}),d=at(n,PN,fM,{[O4]:!0}),c=Dr(n,V4,fM,{[O4]:!0});at(n,j4,c),at(d,N4,l),at(d,j4,c),Dr(d,V4,c),at(c,PN),at(c,N4),Dr(c,V4,c),at(c,j4,c);const f=Dr(n,L4,GZ,{[UZ]:!0});at(f,"#"),Dr(f,L4,f),at(f,PTe,f);const p=at(f,ITe);at(p,"#"),Dr(p,L4,f);const h=[[uu,a],[du,s]],m=[[uu,null],[mv,o],[du,i]];for(let g=0;g<_x.length;g++)Sd(n,_x[g],dM,vu,h);for(let g=0;g<kx.length;g++)Sd(n,kx[g],cM,uM,m);sp(dM,{tld:!0,ascii:!0},e),sp(cM,{utld:!0,alpha:!0},e),Sd(n,"file",xw,vu,h),Sd(n,"mailto",xw,vu,h),Sd(n,"http",gm,vu,h),Sd(n,"https",gm,vu,h),Sd(n,"ftp",gm,vu,h),Sd(n,"ftps",gm,vu,h),sp(xw,{scheme:!0,ascii:!0},e),sp(gm,{slashscheme:!0,ascii:!0},e),t=t.sort((g,y)=>g[0]>y[0]?1:-1);for(let g=0;g<t.length;g++){const y=t[g][0],_=t[g][1]?{[MTe]:!0}:{[ETe]:!0};y.indexOf("-")>=0?_[lM]=!0:uu.test(y)?du.test(y)?_[Zy]=!0:_[aM]=!0:_[iM]=!0,RN(n,y,y,_)}return RN(n,"localhost",i1,{ascii:!0}),n.jd=new zi(uk),{start:n,tokens:Object.assign({groups:e},YZ)}}function KZ(t,e){const n=LTe(e.replace(/[A-Z]/g,o=>o.toLowerCase())),r=n.length,s=[];let i=0,a=0;for(;a<r;){let o=t,l=null,d=0,c=null,f=-1,p=-1;for(;a<r&&(l=o.go(n[a]));)o=l,o.accepts()?(f=0,p=0,c=o):f>=0&&(f+=n[a].length,p++),d+=n[a].length,i+=n[a].length,a++;i-=f,a-=p,d-=f,s.push({t:c.t,v:e.slice(i-d,i),s:i-d,e:i})}return s}function LTe(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,a=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(a),r+=a.length}return e}function Sd(t,e,n,r,s){let i;const a=e.length;for(let o=0;o<a-1;o++){const l=e[o];t.j[l]?i=t.j[l]:(i=new zi(r),i.jr=s.slice(),t.j[l]=i),t=i}return i=new zi(n),i.jr=s.slice(),t.j[e[a-1]]=i,i}function IN(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let a=parseInt(t.substring(r,r+i),10);a>0;a--)n.pop();r+=i}else n.push(t[r]),r++}return e}const a1={defaultProtocol:"http",events:null,format:ON,formatHref:ON,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function bP(t,e=null){let n=Object.assign({},a1);t&&(n=Object.assign(n,t instanceof bP?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}bP.prototype={o:a1,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:a1[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function ON(t){return t}function XZ(t,e){this.t="token",this.v=t,this.tk=e}XZ.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=a1.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),a={},o=t.get("className",n,e),l=t.get("target",n,e),d=t.get("rel",n,e),c=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return a.href=r,o&&(a.class=o),l&&(a.target=l),d&&(a.rel=d),c&&Object.assign(a,c),{tagName:s,attributes:a,content:i,eventListeners:f}}};function MC(t,e){class n extends XZ{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const LN=MC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),VN=MC("text"),VTe=MC("nl"),Sx=MC("url",{isLink:!0,toHref(t=a1.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==i1&&t[1].t===Zd}}),Sa=t=>new zi(t);function NTe({groups:t}){const e=t.domain.concat([Q2,J2,Gd,ek,tk,nk,rk,sk,Da,pP,t0,ik,ak,ok,pl,uk,r0,lk]),n=[Z2,Zd,mP,fl,gP,t0,n0,vP,yP,B2,z2,Jy,e0,N2,V2,j2,F2,U2,H2,q2,W2,G2,Y2,K2,X2],r=[Q2,Z2,J2,ek,tk,nk,rk,sk,Da,Jy,e0,t0,ik,ak,ok,n0,pl,uk,r0,lk],s=Sa(),i=at(s,r0);fn(i,r,i),fn(i,t.domain,i);const a=Sa(),o=Sa(),l=Sa();fn(s,t.domain,a),fn(s,t.scheme,o),fn(s,t.slashscheme,l),fn(a,r,i),fn(a,t.domain,a);const d=at(a,Gd);at(i,Gd,d),at(o,Gd,d),at(l,Gd,d);const c=at(i,fl);fn(c,r,i),fn(c,t.domain,i);const f=Sa();fn(d,t.domain,f),fn(f,t.domain,f);const p=at(f,fl);fn(p,t.domain,f);const h=Sa(LN);fn(p,t.tld,h),fn(p,t.utld,h),at(d,i1,h);const m=at(f,Da);at(m,Da,m),fn(m,t.domain,f),fn(h,t.domain,f),at(h,fl,p),at(h,Da,m);const g=at(h,Zd);fn(g,t.numeric,LN);const y=at(a,Da),x=at(a,fl);at(y,Da,y),fn(y,t.domain,a),fn(x,r,i),fn(x,t.domain,a);const _=Sa(Sx);fn(x,t.tld,_),fn(x,t.utld,_),fn(_,t.domain,a),fn(_,r,i),at(_,fl,x),at(_,Da,y),at(_,Gd,d);const k=at(_,Zd),w=Sa(Sx);fn(k,t.numeric,w);const S=Sa(Sx),C=Sa();fn(S,e,S),fn(S,n,C),fn(C,e,S),fn(C,n,C),at(_,pl,S),at(w,pl,S);const A=at(o,Zd),M=at(l,Zd),E=at(M,pl),P=at(E,pl);fn(o,t.domain,a),at(o,fl,x),at(o,Da,y),fn(l,t.domain,a),at(l,fl,x),at(l,Da,y),fn(A,t.domain,S),at(A,pl,S),at(A,n0,S),fn(P,t.domain,S),fn(P,e,S),at(P,pl,S);const I=[[Jy,e0],[V2,N2],[j2,F2],[B2,z2],[U2,H2],[q2,W2],[G2,Y2],[K2,X2]];for(let F=0;F<I.length;F++){const[L,z]=I[F],N=at(S,L);at(C,L,N),at(N,z,S);const q=Sa(Sx);fn(N,e,q);const V=Sa();fn(N,n),fn(q,e,q),fn(q,n,V),fn(V,e,q),fn(V,n,V),at(q,z,S),at(V,z,S)}return at(s,i1,_),at(s,hP,VTe),{start:s,tokens:YZ}}function jTe(t,e,n){let r=n.length,s=0,i=[],a=[];for(;s<r;){let o=t,l=null,d=null,c=0,f=null,p=-1;for(;s<r&&!(l=o.go(n[s].t));)a.push(n[s++]);for(;s<r&&(d=l||o.go(n[s].t));)l=null,o=d,o.accepts()?(p=0,f=o):p>=0&&p++,s++,c++;if(p<0)s-=c,s<r&&(a.push(n[s]),s++);else{a.length>0&&(i.push(F4(VN,e,a)),a=[]),s-=p,c-=p;const h=f.t,m=n.slice(s-c,s);i.push(F4(h,e,m))}}return a.length>0&&i.push(F4(VN,e,a)),i}function F4(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const FTe=typeof console!="undefined"&&console&&console.warn||(()=>{}),BTe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",br={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function zTe(){return zi.groups={},br.scanner=null,br.parser=null,br.tokenQueue=[],br.pluginQueue=[],br.customSchemes=[],br.initialized=!1,br}function NN(t,e=!1){if(br.initialized&&FTe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${BTe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);br.customSchemes.push([t,e])}function UTe(){br.scanner=OTe(br.customSchemes);for(let t=0;t<br.tokenQueue.length;t++)br.tokenQueue[t][1]({scanner:br.scanner});br.parser=NTe(br.scanner.tokens);for(let t=0;t<br.pluginQueue.length;t++)br.pluginQueue[t][1]({scanner:br.scanner,parser:br.parser});return br.initialized=!0,br}function xP(t){return br.initialized||UTe(),jTe(br.parser.start,t,KZ(br.scanner.start,t))}xP.scan=KZ;function QZ(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new bP(n),s=xP(t),i=[];for(let a=0;a<s.length;a++){const o=s[a];o.isLink&&(!e||o.t===e)&&r.check(o)&&i.push(o.toFormattedObject(r))}return i}const _P="[\0- -\u2029]",HTe=new RegExp(_P),qTe=new RegExp(`${_P}$`),WTe=new RegExp(_P,"g");function GTe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function YTe(t){return new Vn({key:new Hn("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(d=>d.docChanged)&&!n.doc.eq(r.doc),i=e.some(d=>d.getMeta("preventAutolink"));if(!s||i)return;const{tr:a}=r,o=O2e(n.doc,[...e]);if(B2e(o).forEach(({newRange:d})=>{const c=V2e(r.doc,d,h=>h.isTextblock);let f,p;if(c.length>1)f=c[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(c.length){const h=r.doc.textBetween(d.from,d.to," "," ");if(!qTe.test(h))return;f=c[0],p=r.doc.textBetween(f.pos,d.to,void 0," ")}if(f&&p){const h=p.split(HTe).filter(Boolean);if(h.length<=0)return!1;const m=h[h.length-1],g=f.pos+p.lastIndexOf(m);if(!m)return!1;const y=xP(m).map(x=>x.toObject(t.defaultProtocol));if(!GTe(y))return!1;y.filter(x=>x.isLink).map(x=>ze(ge({},x),{from:g+x.start+1,to:g+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>t.validate(x.value)).filter(x=>t.shouldAutoLink(x.value)).forEach(x=>{tP(x.from,x.to,r.doc).some(_=>_.mark.type===t.type)||a.addMark(x.from,x.to,t.type.create({href:x.href}))})}}),!!a.steps.length)return a}})}function KTe(t){return new Vn({key:new Hn("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let a=r.target;const o=[];for(;a.nodeName!=="DIV";)o.push(a),a=a.parentNode;if(!o.find(p=>p.nodeName==="A"))return!1;const l=FQ(e.state,t.type.name),d=r.target,c=(s=d==null?void 0:d.href)!==null&&s!==void 0?s:l.href,f=(i=d==null?void 0:d.target)!==null&&i!==void 0?i:l.target;return d&&c?(window.open(c,f),!0):!1}}})}function XTe(t){return new Vn({key:new Hn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:s}=e,{selection:i}=s,{empty:a}=i;if(a)return!1;let o="";r.content.forEach(d=>{o+=d.textContent});const l=QZ(o,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===o);return!o||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}function af(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(WTe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const QTe=jo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){NN(t);return}NN(t.scheme,t.optionalSlashes)})},onDestroy(){zTe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!af(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!af(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!af(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ln(this.options.HTMLAttributes,t),0]:["a",Ln(this.options.HTMLAttributes,ze(ge({},t),{href:""})),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!af(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!af(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Wp({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=QZ(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:a=>!!af(a,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(YTe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!af(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(KTe({type:this.type})),this.options.linkOnPaste&&t.push(XTe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),ZTe={class:"lucide lucide-copy",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function JTe(t,e){return T(),R("svg",ZTe,[...e[0]||(e[0]=[u("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"},null,-1),u("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"},null,-1)])])}const e3e=zt({name:"lucide-copy",render:JTe}),t3e={class:"lucide lucide-pencil",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function n3e(t,e){return T(),R("svg",t3e,[...e[0]||(e[0]=[u("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},null,-1),u("path",{d:"m15 5 4 4"},null,-1)])])}const r3e=zt({name:"lucide-pencil",render:n3e}),s3e={class:"lucide lucide-link-2-off",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function i3e(t,e){return T(),R("svg",s3e,[...e[0]||(e[0]=[u("path",{d:"M9 17H7A5 5 0 0 1 7 7"},null,-1),u("path",{d:"M15 7h2a5 5 0 0 1 4 8"},null,-1),u("line",{x1:"8",x2:"12",y1:"12",y2:"12"},null,-1),u("line",{x1:"2",x2:"22",y1:"2",y2:"22"},null,-1)])])}const a3e=zt({name:"lucide-link-2-off",render:i3e});function ZZ(t){return!!(t===""||/^(https?:\/\/|mailto:|tel:|\/\/)[^\s]+$/i.test(t)||/^([./#][^\s]*)$/i.test(t)||/^[\w\-]([\w\-./#?=&%]*)$/i.test(t))}const o3e={class:"p-2 w-72 flex items-center gap-2 bg-surface-white shadow-xl rounded"},l3e=["title","href"],u3e={class:"shrink-0 flex items-center gap-1.5 ml-auto"},d3e=Je({__name:"LinkPopup",props:{href:{}},emits:["updateHref","close"],setup(t,{emit:e}){const n=t,r=e,s=Q(n.href),i=Vy("input"),a=Q(n.href===""),o=()=>{(s.value===""||ZZ(s.value))&&r("updateHref",s.value)},l=()=>ue(this,null,function*(){s.value&&(yield navigator.clipboard.writeText(s.value))});return yt(()=>ue(this,null,function*(){var d;yield nr(),(d=i.value)!=null&&d.el&&(i.value.el.focus(),i.value.el.select())})),(d,c)=>(T(),R("div",o3e,[a.value?(T(),he(TR,{key:0,ref_key:"input",ref:i,type:"text",class:"w-full",placeholder:"https://example.com",modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=f=>s.value=f),onKeydown:[Ru(o,["enter"]),c[1]||(c[1]=Ru(f=>d.$emit("close"),["esc"]))]},null,8,["modelValue"])):(T(),R("a",{key:1,class:"text-ink-gray-700 underline text-sm flex-1 truncate pl-1",title:s.value,href:s.value,target:"_blank"},$(s.value),9,l3e)),u("div",u3e,[a.value?(T(),R(xe,{key:0},[b(J,{onClick:o,tooltip:"Submit",icon:v(f0e),variant:"subtle"},null,8,["icon"]),b(J,{onClick:c[2]||(c[2]=f=>n.href?a.value=!1:d.$emit("updateHref","")),tooltip:"Exit",icon:v(Eg),variant:"subtle"},null,8,["icon"])],64)):(T(),R(xe,{key:1},[b(J,{onClick:l,tooltip:"Copy",icon:v(e3e),variant:"subtle"},null,8,["icon"]),b(J,{onClick:c[3]||(c[3]=f=>a.value=!0),tooltip:"Edit",icon:v(r3e),variant:"subtle"},null,8,["icon"]),b(J,{tooltip:"Remove",variant:"subtle",onClick:c[4]||(c[4]=f=>d.$emit("updateHref","")),icon:v(a3e)},null,8,["icon"])],64))])]))}});function c3e(t){return new Vn({key:new Hn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:s}=e,{selection:i}=s,{empty:a}=i;if(a)return!1;let o="";if(r.content.forEach(d=>{o+=d.textContent}),!o)return!1;let l=ZZ(o)?o:null;return l?t.editor.chain().setTextSelection({from:i.from,to:i.to}).setLink({href:l}).setTextSelection(i.to).command(({tr:d})=>(d.setStoredMarks([]),!0)).run():!1}}})}const f3e=QTe.extend({addOptions(){var t;return ze(ge({},(t=this.parent)==null?void 0:t.call(this)),{openOnClick:!1,autolink:!0,defaultProtocol:"https",linkOnPaste:!1})},addCommands(){var t;return ze(ge({},(t=this.parent)==null?void 0:t.call(this)),{openLinkEditor:()=>({editor:e})=>{const{state:n}=e,{from:r,to:s}=n.selection,{doc:i}=n;let a,o,l=!1;if(r===s){const h=n.selection.$from,m=_C(h,this.type);if(m){a=m;const g=i.nodeAt(h.pos);g&&(o=g.marks.find(y=>y.type===this.type)),e.chain().setTextSelection({from:m.from,to:m.to}).run(),l=!0}else return!1}else a={from:r,to:s},o=i.resolve(r).marks().find(h=>h.type===this.type);if(!a)return!1;const d=(o==null?void 0:o.attrs.href)||"",c=a.from,f=a.to,p=()=>{p3e(d,e.view.dom).then(h=>{if(h===null)return;let m=e.chain().focus(null,{scrollIntoView:!1});if(h===""){m.setTextSelection({from:c,to:f}).unsetLink().command(({tr:g})=>(g.setStoredMarks([]),!0)).run();return}m=m.setTextSelection({from:c,to:f}).setLink({href:h}).setTextSelection(f).command(({tr:g})=>(g.setStoredMarks([]),!0)),m.run()}).catch(()=>{})};return l?requestAnimationFrame(p):p(),!0}})},addKeyboardShortcuts(){return{"Mod-k":()=>this.editor.commands.openLinkEditor()}},addProseMirrorPlugins(){var e;let t=((e=this.parent)==null?void 0:e.call(this))||[];return t.push(c3e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t.push(h3e({editor:this.editor,type:this.type})),t.push(new Vn({props:{handleClick:(n,r,s)=>{var i;if(this.editor.isEditable){if(!this.editor.isActive("link"))return!1;if(s.preventDefault(),s.metaKey){const a=(i=s.target)==null?void 0:i.getAttribute("href");a&&window.open(a,"_blank")}else this.editor.commands.openLinkEditor()}}}})),t}});function p3e(t,e){return new Promise((n,r)=>{const s=document.createElement("div");document.body.appendChild(s);let i;const a=window.getSelection();if(a&&a.rangeCount>0){const h=a.getRangeAt(0),m=h.getBoundingClientRect(),g=h.collapsed;i={getBoundingClientRect:()=>({width:0,height:m.height,top:m.top,right:g?m.left:m.right,bottom:m.bottom,left:m.left,x:m.left,y:m.top,toJSON:()=>{}})}}else i={getBoundingClientRect:()=>e.getBoundingClientRect()};let o=null,l=null,d=!1,c=!1;const f=(h,m)=>{c||(c=!0,h==="resolve"?n(m):r(m))},p=()=>{d||(d=!0,f("reject","Link editing cancelled or destroyed"),requestAnimationFrame(()=>{l==null||l.destroy(),o==null||o.unmount(),s==null||s.remove(),o=null,l=null}))};if(o=qD({render(){return pr(d3e,{href:t,onClose:()=>{f("reject","Link editing cancelled"),p()},onUpdateHref:h=>{f("resolve",h),p()}})}}),o.mount(s),l=Kc(e,{getReferenceClientRect:()=>i.getBoundingClientRect(),content:s,trigger:"manual",interactive:!0,appendTo:document.body,placement:"top",arrow:!1,theme:"link-editor",maxWidth:"none",onHidden(){p()},hideOnClick:!0,interactiveDebounce:75}),!l){s.remove(),f("reject","Failed to initialize link editor tooltip");return}l.show()})}function h3e(t){return new Vn({key:new Hn("clearLinkMarkOnBoundary"),appendTransaction:(e,n,r)=>{if(!t.editor.isEditable)return null;const{tr:s,doc:i,selection:a,storedMarks:o}=r,{$from:l,empty:d}=a;if(!d||!o||o.length===0)return null;const c=t.type;return!o.some(m=>m.type===c)||l.marks().some(m=>m.type===c)?null:s.setStoredMarks([])}})}const m3e=t=>Nr({find:/--$/,replace:t!=null?t:""}),g3e=t=>Nr({find:/\.\.\.$/,replace:t!=null?t:""}),v3e=t=>Nr({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:t!=null?t:""}),y3e=t=>Nr({find:/"$/,replace:t!=null?t:""}),b3e=t=>Nr({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:t!=null?t:""}),x3e=t=>Nr({find:/'$/,replace:t!=null?t:""}),_3e=t=>Nr({find:/<-$/,replace:t!=null?t:""}),w3e=t=>Nr({find:/->$/,replace:t!=null?t:""}),k3e=t=>Nr({find:/\(c\)$/,replace:t!=null?t:""}),S3e=t=>Nr({find:/\(tm\)$/,replace:t!=null?t:""}),C3e=t=>Nr({find:/\(sm\)$/,replace:t!=null?t:""}),A3e=t=>Nr({find:/\(r\)$/,replace:t!=null?t:""}),T3e=t=>Nr({find:/(?:^|\s)(1\/2)\s$/,replace:t!=null?t:""}),$3e=t=>Nr({find:/\+\/-$/,replace:t!=null?t:""}),M3e=t=>Nr({find:/!=$/,replace:t!=null?t:""}),E3e=t=>Nr({find:/<<$/,replace:t!=null?t:""}),D3e=t=>Nr({find:/>>$/,replace:t!=null?t:""}),R3e=t=>Nr({find:/\d+\s?([*x])\s?\d+$/,replace:t!=null?t:""}),P3e=t=>Nr({find:/\^2$/,replace:t!=null?t:""}),I3e=t=>Nr({find:/\^3$/,replace:t!=null?t:""}),O3e=t=>Nr({find:/(?:^|\s)(1\/4)\s$/,replace:t!=null?t:""}),L3e=t=>Nr({find:/(?:^|\s)(3\/4)\s$/,replace:t!=null?t:""}),V3e=wr.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const t=[];return this.options.emDash!==!1&&t.push(m3e(this.options.emDash)),this.options.ellipsis!==!1&&t.push(g3e(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&t.push(v3e(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&t.push(y3e(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&t.push(b3e(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&t.push(x3e(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&t.push(_3e(this.options.leftArrow)),this.options.rightArrow!==!1&&t.push(w3e(this.options.rightArrow)),this.options.copyright!==!1&&t.push(k3e(this.options.copyright)),this.options.trademark!==!1&&t.push(S3e(this.options.trademark)),this.options.servicemark!==!1&&t.push(C3e(this.options.servicemark)),this.options.registeredTrademark!==!1&&t.push(A3e(this.options.registeredTrademark)),this.options.oneHalf!==!1&&t.push(T3e(this.options.oneHalf)),this.options.plusMinus!==!1&&t.push($3e(this.options.plusMinus)),this.options.notEqual!==!1&&t.push(M3e(this.options.notEqual)),this.options.laquo!==!1&&t.push(E3e(this.options.laquo)),this.options.raquo!==!1&&t.push(D3e(this.options.raquo)),this.options.multiplication!==!1&&t.push(R3e(this.options.multiplication)),this.options.superscriptTwo!==!1&&t.push(P3e(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&t.push(I3e(this.options.superscriptThree)),this.options.oneQuarter!==!1&&t.push(O3e(this.options.oneQuarter)),this.options.threeQuarters!==!1&&t.push(L3e(this.options.threeQuarters)),t}}),N3e=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,s;const i=n.getAttribute("style"),a=(s=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||s===void 0?void 0:s.getAttribute("style");n.setAttribute("style",`${a};${i}`)})},j3e=jo.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&N3e(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(i=>!!i))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),F3e=/^\s*(\[([( |x])?\])\s$/,B3e=Er.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Ln(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?ze(ge({},t),{Tab:()=>this.editor.commands.sinkListItem(this.name)}):t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),a=document.createElement("span"),o=document.createElement("input"),l=document.createElement("div"),d=()=>{var c,f;o.ariaLabel=((f=(c=this.options.a11y)===null||c===void 0?void 0:c.checkboxLabel)===null||f===void 0?void 0:f.call(c,t,o.checked))||`Task item checkbox for ${t.textContent||"empty task item"}`};return d(),i.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",c=>c.preventDefault()),o.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:f}=c.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const h=n();if(typeof h!="number")return!1;const m=p.doc.nodeAt(h);return p.setNodeMarkup(h,void 0,ze(ge({},m==null?void 0:m.attrs),{checked:f})),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,f])=>{s.setAttribute(c,f)}),s.dataset.checked=t.attrs.checked,o.checked=t.attrs.checked,i.append(o,a),s.append(i,l),Object.entries(e).forEach(([c,f])=>{s.setAttribute(c,f)}),{dom:s,contentDOM:l,update:c=>c.type!==this.type?!1:(s.dataset.checked=c.attrs.checked,o.checked=c.attrs.checked,d(),!0)}}},addInputRules(){return[lg({find:F3e,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),z3e=Er.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Ln(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),JZ={black:"#000000",red:"#dc2626",blue:"#1579D0",green:"#16a34a",yellow:"#ca8a04",orange:"#ea580c",purple:"#9333ea",pink:"#db2777",gray:"#6b7280",indigo:"#4f46e5",teal:"#0d9488",cyan:"#06b6d4"},eJ={red:"#fecaca",blue:"#bfdbfe",green:"#bbf7d0",yellow:"#fef08a",orange:"#fed7aa",purple:"#e9d5ff",pink:"#fbcfe8",gray:"#e5e7eb",indigo:"#c7d2fe",teal:"#99f6e4",cyan:"#a5f3fc"},tJ={"#1F272E":"gray","#ca8a04":"yellow","#ea580c":"orange","#dc2626":"red","#16a34a":"green","#1579D0":"blue","#9333ea":"purple","#db2777":"pink"},nJ={"#fef9c3":"yellow","#ffedd5":"orange","#fee2e2":"red","#dcfce7":"green","#D3E9FC":"blue","#f3e8ff":"purple","#fce7f3":"pink"};function pM(t,e,n,r){if(r&&t.startsWith("#")&&r[t])return r[t];let s=0,i=0,a=0;if(t.startsWith("#")){const d=t.substring(1);d.length===6&&(s=parseInt(d.substring(0,2),16),i=parseInt(d.substring(2,4),16),a=parseInt(d.substring(4,6),16))}else if(t.startsWith("rgb")){const d=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i.exec(t);d&&(s=parseInt(d[1],10),i=parseInt(d[2],10),a=parseInt(d[3],10))}if(isNaN(s)||isNaN(i)||isNaN(a))return null;let o=null,l=1/0;for(const d of e){const c=n[d];if(!c)continue;const f=c.startsWith("#")?c.substring(1):c;if(f.length!==6)continue;const p=parseInt(f.substring(0,2),16),h=parseInt(f.substring(2,4),16),m=parseInt(f.substring(4,6),16),g=Math.sqrt(Math.pow(s-p,2)+Math.pow(i-h,2)+Math.pow(a-m,2));g<l&&(l=g,o=d)}return o}function rJ(t,e,n=JZ,r=tJ,s="color"){const i=Object.keys(n),a=new RegExp(`${s}:\\s*(#[0-9a-f]{6})`,"i").exec(t);if(a&&a[1]){const l=pM(a[1],i,n,r);if(l&&e.includes(l))return l==="gray"?null:l}const o=new RegExp(`${s}:\\s*(rgb\\(\\s*\\d+\\s*,\\s*\\d+\\s*,\\s*\\d+\\s*\\))`,"i").exec(t);if(o&&o[1]){const l=pM(o[1],i,n,r);if(l&&e.includes(l))return l==="gray"?null:l}return null}function U3e(t,e){return rJ(t,e,JZ,tJ,"color")}function H3e(t,e){return rJ(t,e,eJ,nJ,"background-color")}const q3e=wr.create({name:"namedColor",addOptions(){return{types:["textStyle"],colors:["red","blue","green","yellow","orange","purple","pink","gray","teal","cyan"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{const e=t.getAttribute("style");if(e){const n=e.match(/color:\s*var\(--prose-color-(\w+)\)/);if(n&&this.options.colors.includes(n[1]))return n[1];const r=U3e(e,this.options.colors);if(r)return r}return null},renderHTML:t=>!t.color||!this.options.colors.includes(t.color)?{}:{style:`color: var(--prose-color-${t.color})`}}}}]},addCommands(){return{setColorByName:t=>({chain:e,state:n,editor:r})=>{if(!this.options.colors.includes(t))return console.warn(`Color "${t}" is not in the allowed colors list`),!1;const{to:s,empty:i}=n.selection;let a=e().setMark("textStyle",{color:t});return i||(a=a.setTextSelection(s).command(({tr:o})=>(o.setStoredMarks([]),!0))),a.focus().run()},unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),W3e=jo.create({name:"namedHighlight",addOptions(){return{HTMLAttributes:{},multicolor:!0,colors:["yellow","blue","green","red","orange","purple","pink","gray","teal","cyan"]}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>{const e=t.getAttribute("style");if(e){const r=e.match(/background-color:\s*var\(--prose-highlight-(\w+)\)/);if(r&&this.options.colors.includes(r[1]))return r[1]}const n=t.getAttribute("data-color");if(n){const r=pM(n,this.options.colors,eJ,nJ);if(r)return r}if(e){const r=H3e(e,this.options.colors);if(r)return r}return null},renderHTML:t=>!t.color||!this.options.colors.includes(t.color)?{}:{style:`background-color: var(--prose-highlight-${t.color})`}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Ln(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlightByName:t=>({chain:e,commands:n,editor:r,state:s})=>{if(!this.options.colors.includes(t))return console.warn(`Highlight color "${t}" is not in the allowed colors list`),!1;const{from:i,to:a,empty:o}=s.selection;let l=e();return this.options.multicolor?l=l.setMark(this.name,{color:t}):l=l.setMark(this.name),o||(l=l.setTextSelection(a).command(({tr:d})=>(d.setStoredMarks([]),!0))),l.focus().run()},toggleHighlightByName:t=>({chain:e,commands:n,editor:r,state:s})=>{if(!this.options.colors.includes(t))return console.warn(`Highlight color "${t}" is not in the allowed colors list`),!1;const{to:i,empty:a}=s.selection,o=this.options.multicolor?{color:t}:void 0,l=r.isActive(this.name,o);let d=e().toggleMark(this.name,o);return!a&&!l&&(d=d.setTextSelection(i).command(({tr:c})=>(c.setStoredMarks([]),!0))),d.focus().run()},unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}}});function G3e(t){const e=t.view.state.selection,{$from:n}=e;if(n.parentOffset>0||!e.empty)return!1;let r=t.view.state.doc.resolve(n.pos-1).nodeBefore;if(r||(r=t.state.doc.resolve(n.before()-1).nodeBefore),console.log(r),r&&["bulletList","orderedList","listItem"].includes(r.type.name))return t.chain().command(({tr:s})=>{const i=n.parent.content,a=r.type.name==="listItem";console.log(a),s.delete(n.before()-(a?1:0),n.after());const o=n.pos-4;s.insert(o,i),s.setSelection(Yt.near(s.doc.resolve(o)))}).run(),!0;if(t.can().liftListItem("listItem"))return t.commands.liftListItem("listItem")}function Y3e(t){var e;const{char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:i,startOfLine:a,$position:o}=t,l=r&&!s,d=wke(n),c=new RegExp(`\\s${d}$`),f=a?"^":"",p=s?"":d,h=l?new RegExp(`${f}${d}.*?(?=\\s${p}|$)`,"gm"):new RegExp(`${f}(?:^)?${d}[^\\s${p}]*`,"gm"),m=((e=o.nodeBefore)===null||e===void 0?void 0:e.isText)&&o.nodeBefore.text;if(!m)return null;const g=o.pos-m.length,y=Array.from(m.matchAll(h)).pop();if(!y||y.input===void 0||y.index===void 0)return null;const x=y.input.slice(Math.max(0,y.index-1),y.index),_=new RegExp(`^[${i==null?void 0:i.join("")}\0]?$`).test(x);if(i!==null&&!_)return null;const k=g+y.index;let w=k+y[0].length;return l&&c.test(m.slice(w-1,w+1))&&(y[0]+=" ",w+=1),k<o.pos&&w>=o.pos?{range:{from:k,to:w},query:y[0].slice(n.length),text:y[0]}:null}const K3e=new Hn("suggestion");function X3e({pluginKey:t=K3e,editor:e,char:n="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:i=[" "],startOfLine:a=!1,decorationTag:o="span",decorationClass:l="suggestion",decorationContent:d="",decorationEmptyClass:c="is-empty",command:f=()=>null,items:p=()=>[],render:h=()=>({}),allow:m=()=>!0,findSuggestionMatch:g=Y3e}){let y;const x=h==null?void 0:h(),_=new Vn({key:t,view(){return{update:(k,w)=>ue(this,null,function*(){var S,C,A,M,E,P,I;const F=(S=this.key)===null||S===void 0?void 0:S.getState(w),L=(C=this.key)===null||C===void 0?void 0:C.getState(k.state),z=F.active&&L.active&&F.range.from!==L.range.from,N=!F.active&&L.active,q=F.active&&!L.active,V=!N&&!q&&F.query!==L.query,O=N||z&&V,X=V||z,j=q||z&&V;if(!O&&!X&&!j)return;const U=j&&!O?F:L,G=k.dom.querySelector(`[data-decoration-id="${U.decorationId}"]`);y={editor:e,range:U.range,query:U.query,text:U.text,items:[],command:ee=>f({editor:e,range:U.range,props:ee}),decorationNode:G,clientRect:G?()=>{var ee;const{decorationId:ie}=(ee=this.key)===null||ee===void 0?void 0:ee.getState(e.state),ne=k.dom.querySelector(`[data-decoration-id="${ie}"]`);return(ne==null?void 0:ne.getBoundingClientRect())||null}:null},O&&((A=x==null?void 0:x.onBeforeStart)===null||A===void 0||A.call(x,y)),X&&((M=x==null?void 0:x.onBeforeUpdate)===null||M===void 0||M.call(x,y)),(X||O)&&(y.items=yield p({editor:e,query:U.query})),j&&((E=x==null?void 0:x.onExit)===null||E===void 0||E.call(x,y)),X&&((P=x==null?void 0:x.onUpdate)===null||P===void 0||P.call(x,y)),O&&((I=x==null?void 0:x.onStart)===null||I===void 0||I.call(x,y))}),destroy:()=>{var k;y&&((k=x==null?void 0:x.onExit)===null||k===void 0||k.call(x,y))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(k,w,S,C){const{isEditable:A}=e,{composing:M}=e.view,{selection:E}=k,{empty:P,from:I}=E,F=ge({},w);if(F.composing=M,A&&(P||e.view.composing)){(I<w.range.from||I>w.range.to)&&!M&&!w.composing&&(F.active=!1);const L=g({char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:i,startOfLine:a,$position:E.$from}),z=`id_${Math.floor(Math.random()*4294967295)}`;L&&m({editor:e,state:C,range:L.range,isActive:w.active})?(F.active=!0,F.decorationId=w.decorationId?w.decorationId:z,F.range=L.range,F.query=L.query,F.text=L.text):F.active=!1}else F.active=!1;return F.active||(F.decorationId=null,F.range={from:0,to:0},F.query=null,F.text=null),F}},props:{handleKeyDown(k,w){var S;const{active:C,range:A}=_.getState(k.state);return C&&((S=x==null?void 0:x.onKeyDown)===null||S===void 0?void 0:S.call(x,{view:k,event:w,range:A}))||!1},decorations(k){const{active:w,range:S,decorationId:C,query:A}=_.getState(k);if(!w)return null;const M=!(A!=null&&A.length),E=[l];return M&&E.push(c),_r.create(k.doc,[bs.inline(S.from,S.to,{nodeName:o,class:E.join(" "),"data-decoration-id":C,"data-decoration-content":d})])}}});return _}function EC(t){return wr.create({name:t.name,addOptions(){const e=t.addOptions?t.addOptions.call(this):{};return ze(ge({},e),{suggestion:{char:t.char,pluginKey:t.pluginKey,items:t.items,command:t.command,allowSpaces:t.allowSpaces,startOfLine:t.startOfLine,decorationTag:t.decorationTag||"span",decorationClass:t.decorationClass||"suggestion",render:()=>{let n,r;return{onStart:s=>{if(n=new fZ(t.component,{editor:s.editor,props:s}),!s.clientRect||!n.element)return;const i={getReferenceClientRect:s.clientRect,appendTo:()=>document.body,content:n.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"};r=Kc("body",ge(ge({},i),t.tippyOptions))},onUpdate(s){n==null||n.updateProps(s),s.clientRect&&r&&r[0]&&r[0].setProps({getReferenceClientRect:s.clientRect})},onKeyDown(s){return s.event.key==="Escape"?(r&&r[0]&&r[0].hide(),!0):n&&n.ref&&typeof n.ref.onKeyDown=="function"?n.ref.onKeyDown(s):!1},onExit(){r&&r[0]&&r[0].destroy(),n&&n.destroy(),r=null,n=null}}}}})},addProseMirrorPlugins(){return[X3e(ge({editor:this.editor},this.options.suggestion))]}})}const Q3e=["onClick","onMouseover"],Z3e={key:0,class:"px-3 py-1.5 text-sm text-ink-gray-5"},DC=Je({__name:"SuggestionList",props:{items:{type:Array,required:!0},command:{type:Function,required:!0},containerClass:{type:String,default:""},itemClass:{type:String,default:""},showNoResults:{type:Boolean,default:!1}},setup(t,{expose:e}){const n=t,r=Q(0),s=Q(null),i=Q([]);bG(()=>{i.value=[]});const a=()=>{nr(()=>{const p=i.value[r.value];p&&p.scrollIntoView({block:"nearest"})})},o=p=>{const h=n.items[p];h&&n.command(h)},l=({event:p})=>n.items.length?p.key==="ArrowUp"?(d(),!0):p.key==="ArrowDown"?(c(),!0):p.key==="Enter"?(f(),!0):!1:!1,d=()=>{r.value=(r.value+n.items.length-1)%n.items.length,a()},c=()=>{r.value=(r.value+1)%n.items.length,a()},f=()=>{o(r.value)};return et(()=>n.items,()=>{r.value=0}),e({onKeyDown:l}),(p,h)=>t.items.length?(T(),R("div",{key:0,ref_key:"container",ref:s,class:pe(["relative max-h-[300px] min-w-40 overflow-y-auto rounded-lg bg-surface-white p-1 text-base shadow-lg",t.containerClass])},[(T(!0),R(xe,null,_e(t.items,(m,g)=>(T(),R("button",{key:g,ref_for:!0,ref:y=>{y&&(i.value[g]=y)},class:pe(["flex w-full items-center whitespace-nowrap rounded-md px-2 py-1.5 text-sm text-ink-gray-9",g===r.value?"bg-surface-gray-2":"",t.itemClass]),onClick:y=>o(g),onMouseover:y=>r.value=g},[qe(p.$slots,"default",{item:m,index:g},()=>[u("span",null,$(m.display||m.title||m.name),1)])],42,Q3e))),128)),!t.items.length&&t.showNoResults?(T(),R("div",Z3e," No results ")):se("",!0)],2)):se("",!0)}});function J3e(t){const e={name:"mention",group:"inline",inline:!0,selectable:!0,atom:!0,addOptions(){return{component:void 0}},addAttributes(){return{id:{default:null,parseHTML:n=>n.getAttribute("data-id"),renderHTML:n=>n.id?{"data-id":n.id}:{}},label:{default:null,parseHTML:n=>n.getAttribute("data-label"),renderHTML:n=>n.label?{"data-label":n.label}:{}}}},parseHTML(){return[{tag:'span.mention[data-type="mention"]',getAttrs:n=>{const r=n;return{id:r.getAttribute("data-id"),label:r.getAttribute("data-label")}}}]},renderHTML({HTMLAttributes:n}){return["span",Ln(n,{class:"mention","data-type":"mention"}),`@${n["data-label"]||n.id||""}`]},renderText({node:n}){return`@${n.attrs.label||n.attrs.id||""}`}};return t&&(e.addNodeView=()=>_b(t)),Er.create(e)}const e5e=EC({name:"mentionSuggestion",char:"@",pluginKey:new Hn("mentionSuggestion"),component:DC,addOptions(){return{mentions:[]}},items:({query:t,editor:e})=>{const{mentions:n}=e.extensionManager.extensions.find(i=>i.name==="mentionSuggestion").options;return Ur(n).filter(i=>i.label.toLowerCase().startsWith(t.toLowerCase())).slice(0,10).map(i=>ze(ge({},i),{display:i.label}))},command:({editor:t,range:e,props:n})=>{const r={id:n.id||n.value,label:n.label};t.chain().focus().insertContentAt(e,[{type:"mention",attrs:r}]).run()},tippyOptions:{placement:"bottom-start",offset:[0,8]},allowSpaces:!1,decorationTag:"span",decorationClass:"mention-suggestion-active"}),t5e=wr.create({name:"mentionExtension",addOptions(){return{mentions:[],component:void 0}},addExtensions(){return[J3e(this.options.component),e5e.configure({mentions:this.options.mentions})]}}),n5e={name:"TipTapMenu",props:["buttons"],inject:["editor"],components:{Popover:IK},methods:{onButtonClick(t){t.action(this.editor)}}},r5e={class:"inline-flex bg-surface-white px-1 py-1"},s5e={class:"inline-flex items-center gap-1"},i5e={key:0,class:"h-4 w-[2px] border-l"},a5e={key:1,class:"shrink-0"},o5e=["onClick","set"],l5e={key:1},u5e={class:"p-1.5 mt-2 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},d5e=["onClick"],c5e={key:1,class:"whitespace-nowrap text-ink-gray-7"},f5e=["onClick","title"],p5e={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function h5e(t,e,n,r,s,i){const a=Vs("Popover");return T(),R("div",r5e,[u("div",s5e,[(T(!0),R(xe,null,_e(n.buttons,o=>(T(),R(xe,{key:o.label},[o.type==="separator"?(T(),R("div",i5e)):o.map?(T(),R("div",a5e,[b(a,null,{target:D(({togglePopover:l})=>[u("button",{class:"rounded px-2 py-1 text-base font-medium text-ink-gray-8 transition-colors hover:bg-surface-gray-2",onClick:l,set:t.activeBtn=o.find(d=>d.isActive(i.editor))||o[0]},[t.activeBtn.icon?(T(),he(At(t.activeBtn.icon),{key:0,class:"h-4 w-4"})):(T(),R("span",l5e,$(t.activeBtn.label),1))],8,o5e)]),body:D(({close:l})=>[u("ul",u5e,[(T(!0),R(xe,null,_e(o,d=>we((T(),R("li",null,[u("button",{class:"w-full h-7 rounded px-2 text-base flex items-center gap-2 hover:bg-surface-gray-3",onClick:()=>{i.onButtonClick(d),l()}},[d.icon?(T(),he(At(d.icon),{key:0,class:"size-4 flex-shrink-0 text-ink-gray-6"})):se("",!0),d.label?(T(),R("span",c5e,$(d.label),1)):se("",!0)],8,d5e)],512)),[[lt,d.isDisabled?!d.isDisabled(i.editor):!0]])),256))])]),_:2},1024)])):(T(),he(At(o.component||"div"),xt({key:2,ref_for:!0},{editor:i.editor}),{default:D(l=>[u("button",{class:pe(["flex rounded p-1 text-ink-gray-8 transition-colors",[o.isActive(i.editor)||l!=null&&l.isActive?"bg-surface-gray-3":"hover:bg-surface-gray-2",o.class]]),onClick:d=>l!=null&&l.onClick?l.onClick(o):i.onButtonClick(o),title:o.label},[o.icon?(T(),he(At(o.icon),{key:0,class:"h-4 w-4"})):(T(),R("span",p5e,$(o.text),1))],10,f5e)]),_:2},1040))],64))),128))])])}const sJ=It(n5e,[["render",h5e]]),m5e={},g5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function v5e(t,e){return T(),R("svg",g5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm8-12v12h-2v-9.796l-2 .536V8.67L19.5 8H21z",fill:"currentColor"},null,-1)])])}const y5e=It(m5e,[["render",v5e]]),b5e={},x5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function _5e(t,e){return T(),R("svg",x5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 4c2.071 0 3.75 1.679 3.75 3.75 0 .857-.288 1.648-.772 2.28l-.148.18L18.034 18H22v2h-7v-1.556l4.82-5.546c.268-.307.43-.709.43-1.148 0-.966-.784-1.75-1.75-1.75-.918 0-1.671.707-1.744 1.606l-.006.144h-2C14.75 9.679 16.429 8 18.5 8z",fill:"currentColor"},null,-1)])])}const w5e=It(b5e,[["render",_5e]]),k5e={},S5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function C5e(t,e){return T(),R("svg",S5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M22 8l-.002 2-2.505 2.883c1.59.435 2.757 1.89 2.757 3.617 0 2.071-1.679 3.75-3.75 3.75-1.826 0-3.347-1.305-3.682-3.033l1.964-.382c.156.806.866 1.415 1.718 1.415.966 0 1.75-.784 1.75-1.75s-.784-1.75-1.75-1.75c-.286 0-.556.069-.794.19l-1.307-1.547L19.35 10H15V8h7zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)])])}const A5e=It(k5e,[["render",C5e]]),T5e={},$5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function M5e(t,e){return T(),R("svg",$5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm9-12v8h1.5v2H22v2h-2v-2h-5.5v-1.34l5-8.66H22zm-2 3.133L17.19 16H20v-4.867z",fill:"currentColor"},null,-1)])])}const E5e=It(T5e,[["render",M5e]]),D5e={},R5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function P5e(t,e){return T(),R("svg",R5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M22 8v2h-4.323l-.464 2.636c.33-.089.678-.136 1.037-.136 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.827 0-3.367-1.224-3.846-2.897l1.923-.551c.24.836 1.01 1.448 1.923 1.448 1.105 0 2-.895 2-2s-.895-2-2-2c-.63 0-1.193.292-1.56.748l-1.81-.904L16 8h6zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)])])}const I5e=It(D5e,[["render",P5e]]),O5e={},L5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function V5e(t,e){return T(),R("svg",L5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M21.097 8l-2.598 4.5c2.21 0 4.001 1.79 4.001 4s-1.79 4-4 4-4-1.79-4-4c0-.736.199-1.426.546-2.019L18.788 8h2.309zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 10.5c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2z",fill:"currentColor"},null,-1)])])}const N5e=It(O5e,[["render",V5e]]),j5e={},F5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function B5e(t,e){return T(),R("svg",F5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M13 6v15h-2V6H5V4h14v2z",fill:"currentColor"},null,-1)])])}const z5e=It(j5e,[["render",B5e]]),U5e={},H5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function q5e(t,e){return T(),R("svg",H5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z",fill:"currentColor"},null,-1)])])}const W5e=It(U5e,[["render",q5e]]),G5e={},Y5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function K5e(t,e){return T(),R("svg",Y5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z",fill:"currentColor"},null,-1)])])}const X5e=It(G5e,[["render",K5e]]),Q5e={},Z5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function J5e(t,e){return T(),R("svg",Z5e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M8 3v9a4 4 0 1 0 8 0V3h2v9a6 6 0 1 1-12 0V3h2zM4 20h16v2H4v-2z",fill:"currentColor"},null,-1)])])}const e$e=It(Q5e,[["render",J5e]]),t$e={},n$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function r$e(t,e){return T(),R("svg",n$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M17.154 14c.23.516.346 1.09.346 1.72 0 1.342-.524 2.392-1.571 3.147C14.88 19.622 13.433 20 11.586 20c-1.64 0-3.263-.381-4.87-1.144V16.6c1.52.877 3.075 1.316 4.666 1.316 2.551 0 3.83-.732 3.839-2.197a2.21 2.21 0 0 0-.648-1.603l-.12-.117H3v-2h18v2h-3.846zm-4.078-3H7.629a4.086 4.086 0 0 1-.481-.522C6.716 9.92 6.5 9.246 6.5 8.452c0-1.236.466-2.287 1.397-3.153C8.83 4.433 10.271 4 12.222 4c1.471 0 2.879.328 4.222.984v2.152c-1.2-.687-2.515-1.03-3.946-1.03-2.48 0-3.719.782-3.719 2.346 0 .42.218.786.654 1.099.436.313.974.562 1.613.75.62.18 1.297.414 2.03.699z",fill:"currentColor"},null,-1)])])}const s$e=It(t$e,[["render",r$e]]),i$e={},a$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function o$e(t,e){return T(),R("svg",a$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z",fill:"currentColor"},null,-1)])])}const l$e=It(i$e,[["render",o$e]]),u$e={},d$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function c$e(t,e){return T(),R("svg",d$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z",fill:"currentColor"},null,-1)])])}const f$e=It(u$e,[["render",c$e]]),p$e={},h$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function m$e(t,e){return T(),R("svg",h$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z",fill:"currentColor"},null,-1)])])}const g$e=It(p$e,[["render",m$e]]),v$e={},y$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function b$e(t,e){return T(),R("svg",y$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M15.246 14H8.754l-1.6 4H5l6-15h2l6 15h-2.154l-1.6-4zm-.8-2L12 5.885 9.554 12h4.892zM3 20h18v2H3v-2z",fill:"currentColor"},null,-1)])])}const x$e=It(v$e,[["render",b$e]]),_$e={},w$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function k$e(t,e){return T(),R("svg",w$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M8 4h13v2H8V4zM5 3v3h1v1H3V6h1V4H3V3h2zM3 14v-2.5h2V11H3v-1h3v2.5H4v.5h2v1H3zm2 5.5H3v-1h2V18H3v-1h3v4H3v-1h2v-.5zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)])])}const S$e=It(_$e,[["render",k$e]]),C$e={},A$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function T$e(t,e){return T(),R("svg",A$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)])])}const $$e=It(C$e,[["render",T$e]]),M$e={},E$e={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-list-checks-icon lucide-list-checks"};function D$e(t,e){return T(),R("svg",E$e,[...e[0]||(e[0]=[fr('<path d="m3 17 2 2 4-4"></path><path d="m3 7 2 2 4-4"></path><path d="M13 6h8"></path><path d="M13 12h8"></path><path d="M13 18h8"></path>',5)])])}const R$e=It(M$e,[["render",D$e]]),P$e={},I$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function O$e(t,e){return T(),R("svg",I$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M19.417 6.679C20.447 7.773 21 9 21 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311-1.804-.167-3.226-1.648-3.226-3.489a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179zm-10 0C10.447 7.773 11 9 11 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311C4.591 12.322 3.17 10.841 3.17 9a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179z",fill:"currentColor"},null,-1)])])}const L$e=It(P$e,[["render",O$e]]),V$e={},N$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function j$e(t,e){return T(),R("svg",N$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M16.95 8.464l1.414-1.414 4.95 4.95-4.95 4.95-1.414-1.414L20.485 12 16.95 8.464zm-9.9 0L3.515 12l3.535 3.536-1.414 1.414L.686 12l4.95-4.95L7.05 8.464z",fill:"currentColor"},null,-1)])])}const F$e=It(V$e,[["render",j$e]]),B$e={},z$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function U$e(t,e){return T(),R("svg",z$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z",fill:"currentColor"},null,-1)])])}const H$e=It(B$e,[["render",U$e]]),q$e={},W$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function G$e(t,e){return T(),R("svg",W$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M21 15v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2zm.008-12c.548 0 .992.445.992.993V13h-2V5H4v13.999L14 9l3 3v2.829l-3-3L6.827 19H14v2H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016zM8 7a2 2 0 1 1 0 4 2 2 0 0 1 0-4z",fill:"currentColor"},null,-1)])])}const Y$e=It(q$e,[["render",G$e]]),K$e={},X$e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Q$e(t,e){return T(),R("svg",X$e,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),u("path",{d:"M16 4c.552 0 1 .448 1 1v4.2l5.213-3.65c.226-.158.538-.103.697.124.058.084.09.184.09.286v12.08c0 .276-.224.5-.5.5-.103 0-.203-.032-.287-.09L17 14.8V19c0 .552-.448 1-1 1H2c-.552 0-1-.448-1-1V5c0-.552.448-1 1-1h14zm-1 2H3v12h12V6zM8 8h2v3h3v2H9.999L10 16H8l-.001-3H5v-2h3V8zm13 .841l-4 2.8v.718l4 2.8V8.84z",fill:"currentColor"},null,-1)])])}const Z$e=It(K$e,[["render",Q$e]]),J$e={class:"lucide lucide-gallery-vertical",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function eMe(t,e){return T(),R("svg",J$e,[...e[0]||(e[0]=[u("path",{d:"M3 2h18"},null,-1),u("rect",{width:"18",height:"12",x:"3",y:"6",rx:"2"},null,-1),u("path",{d:"M3 22h18"},null,-1)])])}const iJ=zt({name:"lucide-gallery-vertical",render:eMe}),tMe={},nMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function rMe(t,e){return T(),R("svg",nMe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M5.828 7l2.536 2.536L6.95 10.95 2 6l4.95-4.95 1.414 1.414L5.828 5H13a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H5.828z",fill:"currentColor"},null,-1)])])}const sMe=It(tMe,[["render",rMe]]),iMe={},aMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function oMe(t,e){return T(),R("svg",aMe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M18.172 7H11a6 6 0 1 0 0 12h9v2h-9a8 8 0 1 1 0-16h7.172l-2.536-2.536L17.05 1.05 22 6l-4.95 4.95-1.414-1.414L18.172 7z",fill:"currentColor"},null,-1)])])}const lMe=It(iMe,[["render",oMe]]),uMe={},dMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function cMe(t,e){return T(),R("svg",dMe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M2 11h2v2H2v-2zm4 0h12v2H6v-2zm14 0h2v2h-2v-2z",fill:"currentColor"},null,-1)])])}const fMe=It(uMe,[["render",cMe]]),pMe={},hMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function mMe(t,e){return T(),R("svg",hMe,[...e[0]||(e[0]=[u("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),u("path",{d:"M13 10v4h6v-4h-6zm-2 0H5v4h6v-4zm2 9h6v-3h-6v3zm-2 0v-3H5v3h6zm2-14v3h6V5h-6zm-2 0H5v3h6V5zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z",fill:"currentColor"},null,-1)])])}const gMe=It(pMe,[["render",mMe]]),vMe={Paragraph:{label:"Paragraph",icon:z5e,action:t=>t.chain().focus().setParagraph().run(),isActive:t=>t.isActive("paragraph")},"Heading 1":{label:"Heading 1",text:"H1",icon:y5e,action:t=>t.chain().focus().toggleHeading({level:1}).run(),isActive:t=>t.isActive("heading",{level:1})},"Heading 2":{label:"Heading 2",text:"H2",icon:w5e,action:t=>t.chain().focus().toggleHeading({level:2}).run(),isActive:t=>t.isActive("heading",{level:2})},"Heading 3":{label:"Heading 3",text:"H3",icon:A5e,action:t=>t.chain().focus().toggleHeading({level:3}).run(),isActive:t=>t.isActive("heading",{level:3})},"Heading 4":{label:"Heading 4",text:"H4",icon:E5e,action:t=>t.chain().focus().toggleHeading({level:4}).run(),isActive:t=>t.isActive("heading",{level:4})},"Heading 5":{label:"Heading 5",text:"H5",icon:I5e,action:t=>t.chain().focus().toggleHeading({level:5}).run(),isActive:t=>t.isActive("heading",{level:5})},"Heading 6":{label:"Heading 6",text:"H6",icon:N5e,action:t=>t.chain().focus().toggleHeading({level:6}).run(),isActive:t=>t.isActive("heading",{level:6})},Bold:{label:"Bold",icon:W5e,action:t=>t.chain().focus().toggleBold().run(),isActive:t=>t.isActive("bold")},Italic:{label:"Italic",icon:X5e,action:t=>t.chain().focus().toggleItalic().run(),isActive:t=>t.isActive("italic")},Underline:{label:"Underline",icon:e$e,action:t=>t.chain().focus().toggleUnderline().run(),isActive:t=>t.isActive("underline")},Strikethrough:{label:"Strikethrough",icon:s$e,action:t=>t.chain().focus().toggleStrike().run(),isActive:t=>t.isActive("strike")},"Bullet List":{label:"Bullet List",icon:$$e,action:t=>t.chain().focus().toggleBulletList().run(),isActive:t=>t.isActive("bulletList")},"Numbered List":{label:"Numbered List",icon:S$e,action:t=>t.chain().focus().toggleOrderedList().run(),isActive:t=>t.isActive("orderedList")},"Task List":{label:"Task List",icon:R$e,action:t=>t.chain().focus().toggleTaskList().run(),isActive:t=>t.isActive("taskList")},"Align Center":{label:"Align Center",icon:l$e,action:t=>t.chain().focus().setTextAlign("center").run(),isActive:t=>t.isActive({textAlign:"center"})},"Align Left":{label:"Align Left",icon:f$e,action:t=>t.chain().focus().setTextAlign("left").run(),isActive:t=>t.isActive({textAlign:"left"})},"Align Right":{label:"Align Right",icon:g$e,action:t=>t.chain().focus().setTextAlign("right").run(),isActive:t=>t.isActive({textAlign:"right"})},FontColor:{label:"Font Color",icon:x$e,isActive:t=>t.isActive("textStyle")||t.isActive("highlight"),component:sv(()=>Fi(()=>import("./FontColor-CBcncBk1.js"),[]))},Blockquote:{label:"Blockquote",icon:L$e,action:t=>t.chain().focus().toggleBlockquote().run(),isActive:t=>t.isActive("blockquote")},Code:{label:"Code",icon:F$e,action:t=>t.chain().focus().toggleCodeBlock().run(),isActive:t=>t.isActive("codeBlock")},"Horizontal Rule":{label:"Horizontal Rule",icon:fMe,action:t=>t.chain().focus().setHorizontalRule().run(),isActive:t=>!1},Link:{label:"Link",icon:H$e,isActive:t=>t.isActive("link"),component:sv(()=>Fi(()=>import("./InsertLink-Bi6uYzX2.js"),[]))},Image:{label:"Image",icon:Y$e,isActive:t=>!1,component:sv(()=>Fi(()=>import("./InsertImage-S11dINUF.js"),[]))},Video:{label:"Video",icon:Z$e,isActive:t=>!1,component:sv(()=>Fi(()=>import("./InsertVideo-BglfOyMb.js"),[]))},Iframe:{label:"Embed",icon:iJ,isActive:t=>t.isActive("iframe"),component:sv(()=>Fi(()=>import("./InsertIframe-CNxXyN3t.js"),[]))},Undo:{label:"Undo",icon:sMe,action:t=>t.chain().focus().undo().run(),isActive:t=>!1},Redo:{label:"Redo",icon:lMe,action:t=>t.chain().focus().redo().run(),isActive:t=>!1},InsertTable:{label:"Insert Table",icon:gMe,action:t=>t.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),isActive:t=>!1},AddColumnBefore:{label:"Add Column Before",action:t=>t.chain().focus().addColumnBefore().run(),isActive:t=>!1,isDisabled:t=>!t.can().addColumnBefore()},AddColumnAfter:{label:"Add Column After",action:t=>t.chain().focus().addColumnAfter().run(),isActive:t=>!1,isDisabled:t=>!t.can().addColumnAfter()},DeleteColumn:{label:"Delete Column",action:t=>t.chain().focus().deleteColumn().run(),isActive:t=>!1,isDisabled:t=>!t.can().deleteColumn()},AddRowBefore:{label:"Add Row Before",action:t=>t.chain().focus().addRowBefore().run(),isActive:t=>!1,isDisabled:t=>!t.can().addRowBefore()},AddRowAfter:{label:"Add Row After",action:t=>t.chain().focus().addRowAfter().run(),isActive:t=>!1,isDisabled:t=>!t.can().addRowAfter()},DeleteRow:{label:"Delete Row",action:t=>t.chain().focus().deleteRow().run(),isActive:t=>!1,isDisabled:t=>!t.can().deleteRow()},DeleteTable:{label:"Delete Table",action:t=>t.chain().focus().deleteTable().run(),isActive:t=>!1,isDisabled:t=>!t.can().deleteTable()},MergeCells:{label:"Merge Cells",action:t=>t.chain().focus().mergeCells().run(),isActive:t=>!1,isDisabled:t=>!t.can().mergeCells()},SplitCell:{label:"Split Cell",action:t=>t.chain().focus().splitCell().run(),isActive:t=>!1,isDisabled:t=>!t.can().splitCell()},ToggleHeaderColumn:{label:"Toggle Header Column",action:t=>t.chain().focus().toggleHeaderColumn().run(),isActive:t=>!1,isDisabled:t=>!t.can().toggleHeaderColumn()},ToggleHeaderRow:{label:"Toggle Header Row",action:t=>t.chain().focus().toggleHeaderRow().run(),isActive:t=>!1,isDisabled:t=>!t.can().toggleHeaderRow()},ToggleHeaderCell:{label:"Toggle Header Cell",action:t=>t.chain().focus().toggleHeaderCell().run(),isActive:t=>!1,isDisabled:t=>!t.can().toggleHeaderCell()},Separator:{type:"separator"}};function RC(t){return t instanceof Array?t.map(RC):typeof t=="object"?t:vMe[t]}const yMe={name:"TextEditorFixedMenu",props:["buttons"],components:{Menu:sJ},inject:["editor"],computed:{fixedMenuButtons(){if(!this.buttons)return!1;let t;return Array.isArray(this.buttons)?t=this.buttons:t=[["Heading 1","Heading 2","Heading 3","Heading 4","Heading 5","Heading 6"],"Paragraph","Separator","Bold","Italic","Separator","Bullet List","Numbered List","Task List","Separator","Align Left","Align Center","Align Right","FontColor","Separator","Image","Video","Iframe","Link","Blockquote","Code","Horizontal Rule",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"],"Separator","Undo","Redo"],t.map(RC)}}};function bMe(t,e,n,r,s,i){const a=Vs("Menu");return i.fixedMenuButtons?(T(),he(a,{key:0,buttons:i.fixedMenuButtons},null,8,["buttons"])):se("",!0)}const xMe=It(yMe,[["render",bMe]]),_Me={name:"TextEditorBubbleMenu",props:["buttons","options"],components:{BubbleMenu:eCe,Menu:sJ},inject:["editor"],computed:{bubbleMenuButtons(){if(!this.buttons)return!1;let t;return Array.isArray(this.buttons)?t=this.buttons:t=["Paragraph","Heading 2","Heading 3","Separator","Bold","Italic","Strikethrough","FontColor","Link","Separator","Bullet List","Numbered List","Task List","Separator","Align Left","Align Center","Align Right","Separator","Image","Video","Blockquote","Code",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"]],t.map(RC)}}};function wMe(t,e,n,r,s,i){const a=Vs("Menu"),o=Vs("BubbleMenu");return i.bubbleMenuButtons?(T(),he(o,xt({key:0,class:"bubble-menu rounded-md shadow-sm","tippy-options":{duration:100},editor:i.editor},n.options),{default:D(()=>[b(a,{class:"rounded-md border-gray-100 shadow-lg",buttons:i.bubbleMenuButtons},null,8,["buttons"])]),_:1},16,["editor"])):se("",!0)}const kMe=It(_Me,[["render",wMe]]),SMe={name:"TextEditorFloatingMenu",props:["buttons"],components:{FloatingMenu:tCe},inject:["editor"],computed:{floatingMenuButtons(){if(!this.buttons)return!1;let t;return Array.isArray(this.buttons)?t=this.buttons:t=["Paragraph","Heading 2","Heading 3","Bullet List","Numbered List","Task List","Blockquote","Code","Horizontal Rule"],t.map(RC)}}},CMe=["onClick","title"],AMe={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function TMe(t,e,n,r,s,i){const a=Vs("FloatingMenu");return i.floatingMenuButtons?(T(),he(a,{key:0,"tippy-options":{duration:100},editor:i.editor,class:"flex"},{default:D(()=>[(T(!0),R(xe,null,_e(i.floatingMenuButtons,o=>(T(),R("button",{key:o.label,class:pe(["flex rounded p-1 text-ink-gray-8 transition-colors",o.isActive(i.editor)?"bg-surface-gray-2":"hover:bg-surface-gray-2"]),onClick:()=>o.action(i.editor),title:o.label},[o.icon?(T(),he(At(o.icon),{key:0,class:"h-4 w-4"})):(T(),R("span",AMe,$(o.text),1))],10,CMe))),128))]),_:1},8,["editor"])):se("",!0)}const $Me=It(SMe,[["render",TMe]]),MMe={class:"mr-2"},EMe=Je({__name:"EmojiList",props:{items:{type:Array,required:!0},editor:{type:Object,required:!0},range:{type:Object,required:!0},command:{type:Function,required:!0}},setup(t,{expose:e}){const n=t,r=Q(null),s=a=>{a&&n.command(a)};return e({onKeyDown:({event:a})=>{var o,l;return(l=(o=r.value)==null?void 0:o.onKeyDown({event:a}))!=null?l:!1}}),(a,o)=>(T(),he(DC,{ref_key:"suggestionList",ref:r,items:t.items,command:l=>s(l),"item-class":"py-2"},{default:D(({item:l})=>[u("span",MMe,$(l.emoji),1),u("span",null,$(l.name),1)]),_:1},8,["items","command"]))}}),DMe=[{name:"grinning",emoji:""},{name:"grimacing",emoji:""},{name:"grin",emoji:""},{name:"joy",emoji:""},{name:"rofl",emoji:""},{name:"smiley",emoji:""},{name:"smile",emoji:""},{name:"sweat_smile",emoji:""},{name:"laughing",emoji:""},{name:"innocent",emoji:""},{name:"wink",emoji:""},{name:"blush",emoji:""},{name:"slightly_smiling_face",emoji:""},{name:"upside_down_face",emoji:""},{name:"relaxed",emoji:""},{name:"yum",emoji:""},{name:"relieved",emoji:""},{name:"heart_eyes",emoji:""},{name:"kissing_heart",emoji:""},{name:"kissing",emoji:""},{name:"kissing_smiling_eyes",emoji:""},{name:"kissing_closed_eyes",emoji:""},{name:"stuck_out_tongue_winking_eye",emoji:""},{name:"stuck_out_tongue_closed_eyes",emoji:""},{name:"stuck_out_tongue",emoji:""},{name:"money_mouth_face",emoji:""},{name:"nerd_face",emoji:""},{name:"sunglasses",emoji:""},{name:"clown_face",emoji:""},{name:"cowboy_hat_face",emoji:""},{name:"hugs",emoji:""},{name:"smirk",emoji:""},{name:"no_mouth",emoji:""},{name:"neutral_face",emoji:""},{name:"expressionless",emoji:""},{name:"unamused",emoji:""},{name:"roll_eyes",emoji:""},{name:"thinking",emoji:""},{name:"lying_face",emoji:""},{name:"flushed",emoji:""},{name:"disappointed",emoji:""},{name:"worried",emoji:""},{name:"angry",emoji:""},{name:"rage",emoji:""},{name:"pensive",emoji:""},{name:"confused",emoji:""},{name:"slightly_frowning_face",emoji:""},{name:"frowning_face",emoji:""},{name:"persevere",emoji:""},{name:"confounded",emoji:""},{name:"tired_face",emoji:""},{name:"weary",emoji:""},{name:"triumph",emoji:""},{name:"open_mouth",emoji:""},{name:"scream",emoji:""},{name:"fearful",emoji:""},{name:"cold_sweat",emoji:""},{name:"hushed",emoji:""},{name:"frowning_with_open_mouth",emoji:""},{name:"anguished",emoji:""},{name:"cry",emoji:""},{name:"disappointed_relieved",emoji:""},{name:"drooling_face",emoji:""},{name:"sleepy",emoji:""},{name:"sweat",emoji:""},{name:"sob",emoji:""},{name:"dizzy_face",emoji:""},{name:"astonished",emoji:""},{name:"zipper_mouth_face",emoji:""},{name:"nauseated_face",emoji:""},{name:"sneezing_face",emoji:""},{name:"mask",emoji:""},{name:"face_with_thermometer",emoji:""},{name:"face_with_head_bandage",emoji:""},{name:"sleeping",emoji:""},{name:"zzz",emoji:""},{name:"poop",emoji:""},{name:"smiling_imp",emoji:""},{name:"imp",emoji:""},{name:"japanese_ogre",emoji:""},{name:"japanese_goblin",emoji:""},{name:"skull",emoji:""},{name:"ghost",emoji:""},{name:"alien",emoji:""},{name:"robot",emoji:""},{name:"smiley_cat",emoji:""},{name:"smile_cat",emoji:""},{name:"joy_cat",emoji:""},{name:"heart_eyes_cat",emoji:""},{name:"smirk_cat",emoji:""},{name:"kissing_cat",emoji:""},{name:"scream_cat",emoji:""},{name:"crying_cat_face",emoji:""},{name:"pouting_cat",emoji:""},{name:"raised_hands",emoji:""},{name:"clap",emoji:""},{name:"wave",emoji:""},{name:"call_me_hand",emoji:""},{name:"+1",emoji:""},{name:"-1",emoji:""},{name:"facepunch",emoji:""},{name:"fist",emoji:""},{name:"fist_left",emoji:""},{name:"fist_right",emoji:""},{name:"v",emoji:""},{name:"ok_hand",emoji:""},{name:"raised_hand",emoji:""},{name:"raised_back_of_hand",emoji:""},{name:"open_hands",emoji:""},{name:"muscle",emoji:""},{name:"pray",emoji:""},{name:"handshake",emoji:""},{name:"point_up",emoji:""},{name:"point_up_2",emoji:""},{name:"point_down",emoji:""},{name:"point_left",emoji:""},{name:"point_right",emoji:""},{name:"fu",emoji:""},{name:"raised_hand_with_fingers_splayed",emoji:""},{name:"metal",emoji:""},{name:"crossed_fingers",emoji:""},{name:"vulcan_salute",emoji:""},{name:"writing_hand",emoji:""},{name:"selfie",emoji:""},{name:"nail_care",emoji:""},{name:"lips",emoji:""},{name:"tongue",emoji:""},{name:"ear",emoji:""},{name:"nose",emoji:""},{name:"eye",emoji:""},{name:"eyes",emoji:""},{name:"bust_in_silhouette",emoji:""},{name:"busts_in_silhouette",emoji:""},{name:"speaking_head",emoji:""},{name:"baby",emoji:""},{name:"boy",emoji:""},{name:"girl",emoji:""},{name:"man",emoji:""},{name:"woman",emoji:""},{name:"blonde_woman",emoji:""},{name:"blonde_man",emoji:""},{name:"older_man",emoji:""},{name:"older_woman",emoji:""},{name:"man_with_gua_pi_mao",emoji:""},{name:"woman_with_turban",emoji:""},{name:"man_with_turban",emoji:""},{name:"policewoman",emoji:""},{name:"policeman",emoji:""},{name:"construction_worker_woman",emoji:""},{name:"construction_worker_man",emoji:""},{name:"guardswoman",emoji:""},{name:"guardsman",emoji:""},{name:"female_detective",emoji:""},{name:"male_detective",emoji:""},{name:"woman_health_worker",emoji:""},{name:"man_health_worker",emoji:""},{name:"woman_farmer",emoji:""},{name:"man_farmer",emoji:""},{name:"woman_cook",emoji:""},{name:"man_cook",emoji:""},{name:"woman_student",emoji:""},{name:"man_student",emoji:""},{name:"woman_singer",emoji:""},{name:"man_singer",emoji:""},{name:"woman_teacher",emoji:""},{name:"man_teacher",emoji:""},{name:"woman_factory_worker",emoji:""},{name:"man_factory_worker",emoji:""},{name:"woman_technologist",emoji:""},{name:"man_technologist",emoji:""},{name:"woman_office_worker",emoji:""},{name:"man_office_worker",emoji:""},{name:"woman_mechanic",emoji:""},{name:"man_mechanic",emoji:""},{name:"woman_scientist",emoji:""},{name:"man_scientist",emoji:""},{name:"woman_artist",emoji:""},{name:"man_artist",emoji:""},{name:"woman_firefighter",emoji:""},{name:"man_firefighter",emoji:""},{name:"woman_pilot",emoji:""},{name:"man_pilot",emoji:""},{name:"woman_astronaut",emoji:""},{name:"man_astronaut",emoji:""},{name:"woman_judge",emoji:""},{name:"man_judge",emoji:""},{name:"mrs_claus",emoji:""},{name:"santa",emoji:""},{name:"angel",emoji:""},{name:"pregnant_woman",emoji:""},{name:"princess",emoji:""},{name:"prince",emoji:""},{name:"bride_with_veil",emoji:""},{name:"person_in_tuxedo",emoji:""},{name:"running_woman",emoji:""},{name:"running_man",emoji:""},{name:"walking_woman",emoji:""},{name:"walking_man",emoji:""},{name:"dancer",emoji:""},{name:"man_dancing",emoji:""},{name:"dancing_women",emoji:""},{name:"dancing_men",emoji:""},{name:"couple",emoji:""},{name:"two_men_holding_hands",emoji:""},{name:"two_women_holding_hands",emoji:""},{name:"bowing_woman",emoji:""},{name:"bowing_man",emoji:""},{name:"man_facepalming",emoji:""},{name:"woman_facepalming",emoji:""},{name:"woman_shrugging",emoji:""},{name:"man_shrugging",emoji:""},{name:"tipping_hand_woman",emoji:""},{name:"tipping_hand_man",emoji:""},{name:"no_good_woman",emoji:""},{name:"no_good_man",emoji:""},{name:"ok_woman",emoji:""},{name:"ok_man",emoji:""},{name:"raising_hand_woman",emoji:""},{name:"raising_hand_man",emoji:""},{name:"pouting_woman",emoji:""},{name:"pouting_man",emoji:""},{name:"frowning_woman",emoji:""},{name:"frowning_man",emoji:""},{name:"haircut_woman",emoji:""},{name:"haircut_man",emoji:""},{name:"massage_woman",emoji:""},{name:"massage_man",emoji:""},{name:"couple_with_heart",emoji:""},{name:"couple_with_heart_woman_woman",emoji:""},{name:"couple_with_heart_man_man",emoji:""},{name:"couplekiss_man_woman",emoji:""},{name:"couplekiss_woman_woman",emoji:""},{name:"couplekiss_man_man",emoji:""},{name:"family",emoji:""},{name:"family_man_woman_girl",emoji:""},{name:"family_man_woman_girl_boy",emoji:""},{name:"family_man_woman_boy_boy",emoji:""},{name:"family_man_woman_girl_girl",emoji:""},{name:"family_woman_woman_boy",emoji:""},{name:"family_woman_woman_girl",emoji:""},{name:"family_woman_woman_girl_boy",emoji:""},{name:"family_woman_woman_boy_boy",emoji:""},{name:"family_woman_woman_girl_girl",emoji:""},{name:"family_man_man_boy",emoji:""},{name:"family_man_man_girl",emoji:""},{name:"family_man_man_girl_boy",emoji:""},{name:"family_man_man_boy_boy",emoji:""},{name:"family_man_man_girl_girl",emoji:""},{name:"family_woman_boy",emoji:""},{name:"family_woman_girl",emoji:""},{name:"family_woman_girl_boy",emoji:""},{name:"family_woman_boy_boy",emoji:""},{name:"family_woman_girl_girl",emoji:""},{name:"family_man_boy",emoji:""},{name:"family_man_girl",emoji:""},{name:"family_man_girl_boy",emoji:""},{name:"family_man_boy_boy",emoji:""},{name:"family_man_girl_girl",emoji:""},{name:"womans_clothes",emoji:""},{name:"tshirt",emoji:""},{name:"jeans",emoji:""},{name:"necktie",emoji:""},{name:"dress",emoji:""},{name:"bikini",emoji:""},{name:"kimono",emoji:""},{name:"lipstick",emoji:""},{name:"kiss",emoji:""},{name:"footprints",emoji:""},{name:"high_heel",emoji:""},{name:"sandal",emoji:""},{name:"boot",emoji:""},{name:"mans_shoe",emoji:""},{name:"athletic_shoe",emoji:""},{name:"womans_hat",emoji:""},{name:"tophat",emoji:""},{name:"rescue_worker_helmet",emoji:""},{name:"mortar_board",emoji:""},{name:"crown",emoji:""},{name:"school_satchel",emoji:""},{name:"pouch",emoji:""},{name:"purse",emoji:""},{name:"handbag",emoji:""},{name:"briefcase",emoji:""},{name:"eyeglasses",emoji:""},{name:"dark_sunglasses",emoji:""},{name:"ring",emoji:""},{name:"closed_umbrella",emoji:""},{name:"dog",emoji:""},{name:"cat",emoji:""},{name:"mouse",emoji:""},{name:"hamster",emoji:""},{name:"rabbit",emoji:""},{name:"fox_face",emoji:""},{name:"bear",emoji:""},{name:"panda_face",emoji:""},{name:"koala",emoji:""},{name:"tiger",emoji:""},{name:"lion",emoji:""},{name:"cow",emoji:""},{name:"pig",emoji:""},{name:"pig_nose",emoji:""},{name:"frog",emoji:""},{name:"squid",emoji:""},{name:"octopus",emoji:""},{name:"shrimp",emoji:""},{name:"monkey_face",emoji:""},{name:"gorilla",emoji:""},{name:"see_no_evil",emoji:""},{name:"hear_no_evil",emoji:""},{name:"speak_no_evil",emoji:""},{name:"monkey",emoji:""},{name:"chicken",emoji:""},{name:"penguin",emoji:""},{name:"bird",emoji:""},{name:"baby_chick",emoji:""},{name:"hatching_chick",emoji:""},{name:"hatched_chick",emoji:""},{name:"duck",emoji:""},{name:"eagle",emoji:""},{name:"owl",emoji:""},{name:"bat",emoji:""},{name:"wolf",emoji:""},{name:"boar",emoji:""},{name:"horse",emoji:""},{name:"unicorn",emoji:""},{name:"honeybee",emoji:""},{name:"bug",emoji:""},{name:"butterfly",emoji:""},{name:"snail",emoji:""},{name:"lady_beetle",emoji:""},{name:"ant",emoji:""},{name:"spider",emoji:""},{name:"scorpion",emoji:""},{name:"crab",emoji:""},{name:"snake",emoji:""},{name:"lizard",emoji:""},{name:"turtle",emoji:""},{name:"tropical_fish",emoji:""},{name:"fish",emoji:""},{name:"blowfish",emoji:""},{name:"dolphin",emoji:""},{name:"shark",emoji:""},{name:"whale",emoji:""},{name:"whale2",emoji:""},{name:"crocodile",emoji:""},{name:"leopard",emoji:""},{name:"tiger2",emoji:""},{name:"water_buffalo",emoji:""},{name:"ox",emoji:""},{name:"cow2",emoji:""},{name:"deer",emoji:""},{name:"dromedary_camel",emoji:""},{name:"camel",emoji:""},{name:"elephant",emoji:""},{name:"rhinoceros",emoji:""},{name:"goat",emoji:""},{name:"ram",emoji:""},{name:"sheep",emoji:""},{name:"racehorse",emoji:""},{name:"pig2",emoji:""},{name:"rat",emoji:""},{name:"mouse2",emoji:""},{name:"rooster",emoji:""},{name:"turkey",emoji:""},{name:"dove",emoji:""},{name:"dog2",emoji:""},{name:"poodle",emoji:""},{name:"cat2",emoji:""},{name:"rabbit2",emoji:""},{name:"chipmunk",emoji:""},{name:"paw_prints",emoji:""},{name:"dragon",emoji:""},{name:"dragon_face",emoji:""},{name:"cactus",emoji:""},{name:"christmas_tree",emoji:""},{name:"evergreen_tree",emoji:""},{name:"deciduous_tree",emoji:""},{name:"palm_tree",emoji:""},{name:"seedling",emoji:""},{name:"herb",emoji:""},{name:"shamrock",emoji:""},{name:"four_leaf_clover",emoji:""},{name:"bamboo",emoji:""},{name:"tanabata_tree",emoji:""},{name:"leaves",emoji:""},{name:"fallen_leaf",emoji:""},{name:"maple_leaf",emoji:""},{name:"ear_of_rice",emoji:""},{name:"hibiscus",emoji:""},{name:"sunflower",emoji:""},{name:"rose",emoji:""},{name:"wilted_flower",emoji:""},{name:"tulip",emoji:""},{name:"blossom",emoji:""},{name:"cherry_blossom",emoji:""},{name:"bouquet",emoji:""},{name:"mushroom",emoji:""},{name:"chestnut",emoji:""},{name:"jack_o_lantern",emoji:""},{name:"shell",emoji:""},{name:"spider_web",emoji:""},{name:"earth_americas",emoji:""},{name:"earth_africa",emoji:""},{name:"earth_asia",emoji:""},{name:"full_moon",emoji:""},{name:"waning_gibbous_moon",emoji:""},{name:"last_quarter_moon",emoji:""},{name:"waning_crescent_moon",emoji:""},{name:"new_moon",emoji:""},{name:"waxing_crescent_moon",emoji:""},{name:"first_quarter_moon",emoji:""},{name:"waxing_gibbous_moon",emoji:""},{name:"new_moon_with_face",emoji:""},{name:"full_moon_with_face",emoji:""},{name:"first_quarter_moon_with_face",emoji:""},{name:"last_quarter_moon_with_face",emoji:""},{name:"sun_with_face",emoji:""},{name:"crescent_moon",emoji:""},{name:"star",emoji:""},{name:"star2",emoji:""},{name:"dizzy",emoji:""},{name:"sparkles",emoji:""},{name:"comet",emoji:""},{name:"sunny",emoji:""},{name:"sun_behind_small_cloud",emoji:""},{name:"partly_sunny",emoji:""},{name:"sun_behind_large_cloud",emoji:""},{name:"sun_behind_rain_cloud",emoji:""},{name:"cloud",emoji:""},{name:"cloud_with_rain",emoji:""},{name:"cloud_with_lightning_and_rain",emoji:""},{name:"cloud_with_lightning",emoji:""},{name:"zap",emoji:""},{name:"fire",emoji:""},{name:"boom",emoji:""},{name:"snowflake",emoji:""},{name:"cloud_with_snow",emoji:""},{name:"snowman",emoji:""},{name:"snowman_with_snow",emoji:""},{name:"wind_face",emoji:""},{name:"dash",emoji:""},{name:"tornado",emoji:""},{name:"fog",emoji:""},{name:"open_umbrella",emoji:""},{name:"umbrella",emoji:""},{name:"droplet",emoji:""},{name:"sweat_drops",emoji:""},{name:"ocean",emoji:""},{name:"green_apple",emoji:""},{name:"apple",emoji:""},{name:"pear",emoji:""},{name:"tangerine",emoji:""},{name:"lemon",emoji:""},{name:"banana",emoji:""},{name:"watermelon",emoji:""},{name:"grapes",emoji:""},{name:"strawberry",emoji:""},{name:"melon",emoji:""},{name:"cherries",emoji:""},{name:"peach",emoji:""},{name:"pineapple",emoji:""},{name:"kiwi_fruit",emoji:""},{name:"avocado",emoji:""},{name:"tomato",emoji:""},{name:"eggplant",emoji:""},{name:"cucumber",emoji:""},{name:"carrot",emoji:""},{name:"hot_pepper",emoji:""},{name:"potato",emoji:""},{name:"corn",emoji:""},{name:"sweet_potato",emoji:""},{name:"peanuts",emoji:""},{name:"honey_pot",emoji:""},{name:"croissant",emoji:""},{name:"bread",emoji:""},{name:"baguette_bread",emoji:""},{name:"cheese",emoji:""},{name:"egg",emoji:""},{name:"bacon",emoji:""},{name:"pancakes",emoji:""},{name:"poultry_leg",emoji:""},{name:"meat_on_bone",emoji:""},{name:"fried_shrimp",emoji:""},{name:"fried_egg",emoji:""},{name:"hamburger",emoji:""},{name:"fries",emoji:""},{name:"stuffed_flatbread",emoji:""},{name:"hotdog",emoji:""},{name:"pizza",emoji:""},{name:"spaghetti",emoji:""},{name:"taco",emoji:""},{name:"burrito",emoji:""},{name:"green_salad",emoji:""},{name:"shallow_pan_of_food",emoji:""},{name:"ramen",emoji:""},{name:"stew",emoji:""},{name:"fish_cake",emoji:""},{name:"sushi",emoji:""},{name:"bento",emoji:""},{name:"curry",emoji:""},{name:"rice_ball",emoji:""},{name:"rice",emoji:""},{name:"rice_cracker",emoji:""},{name:"oden",emoji:""},{name:"dango",emoji:""},{name:"shaved_ice",emoji:""},{name:"ice_cream",emoji:""},{name:"icecream",emoji:""},{name:"cake",emoji:""},{name:"birthday",emoji:""},{name:"custard",emoji:""},{name:"candy",emoji:""},{name:"lollipop",emoji:""},{name:"chocolate_bar",emoji:""},{name:"popcorn",emoji:""},{name:"doughnut",emoji:""},{name:"cookie",emoji:""},{name:"milk_glass",emoji:""},{name:"beer",emoji:""},{name:"beers",emoji:""},{name:"clinking_glasses",emoji:""},{name:"wine_glass",emoji:""},{name:"tumbler_glass",emoji:""},{name:"cocktail",emoji:""},{name:"tropical_drink",emoji:""},{name:"champagne",emoji:""},{name:"sake",emoji:""},{name:"tea",emoji:""},{name:"coffee",emoji:""},{name:"baby_bottle",emoji:""},{name:"spoon",emoji:""},{name:"fork_and_knife",emoji:""},{name:"plate_with_cutlery",emoji:""},{name:"soccer",emoji:""},{name:"basketball",emoji:""},{name:"football",emoji:""},{name:"baseball",emoji:""},{name:"tennis",emoji:""},{name:"volleyball",emoji:""},{name:"rugby_football",emoji:""},{name:"8ball",emoji:""},{name:"golf",emoji:""},{name:"golfing_woman",emoji:""},{name:"golfing_man",emoji:""},{name:"ping_pong",emoji:""},{name:"badminton",emoji:""},{name:"goal_net",emoji:""},{name:"ice_hockey",emoji:""},{name:"field_hockey",emoji:""},{name:"cricket_bat_and_ball",emoji:""},{name:"ski",emoji:""},{name:"skier",emoji:""},{name:"snowboarder",emoji:""},{name:"person_fencing",emoji:""},{name:"women_wrestling",emoji:""},{name:"men_wrestling",emoji:""},{name:"woman_cartwheeling",emoji:""},{name:"man_cartwheeling",emoji:""},{name:"woman_playing_handball",emoji:""},{name:"man_playing_handball",emoji:""},{name:"ice_skate",emoji:""},{name:"bow_and_arrow",emoji:""},{name:"fishing_pole_and_fish",emoji:""},{name:"boxing_glove",emoji:""},{name:"martial_arts_uniform",emoji:""},{name:"rowing_woman",emoji:""},{name:"rowing_man",emoji:""},{name:"swimming_woman",emoji:""},{name:"swimming_man",emoji:""},{name:"woman_playing_water_polo",emoji:""},{name:"man_playing_water_polo",emoji:""},{name:"surfing_woman",emoji:""},{name:"surfing_man",emoji:""},{name:"bath",emoji:""},{name:"basketball_woman",emoji:""},{name:"basketball_man",emoji:""},{name:"weight_lifting_woman",emoji:""},{name:"weight_lifting_man",emoji:""},{name:"biking_woman",emoji:""},{name:"biking_man",emoji:""},{name:"mountain_biking_woman",emoji:""},{name:"mountain_biking_man",emoji:""},{name:"horse_racing",emoji:""},{name:"business_suit_levitating",emoji:""},{name:"trophy",emoji:""},{name:"running_shirt_with_sash",emoji:""},{name:"medal_sports",emoji:""},{name:"medal_military",emoji:""},{name:"1st_place_medal",emoji:""},{name:"2nd_place_medal",emoji:""},{name:"3rd_place_medal",emoji:""},{name:"reminder_ribbon",emoji:""},{name:"rosette",emoji:""},{name:"ticket",emoji:""},{name:"tickets",emoji:""},{name:"performing_arts",emoji:""},{name:"art",emoji:""},{name:"circus_tent",emoji:""},{name:"woman_juggling",emoji:""},{name:"man_juggling",emoji:""},{name:"microphone",emoji:""},{name:"headphones",emoji:""},{name:"musical_score",emoji:""},{name:"musical_keyboard",emoji:""},{name:"drum",emoji:""},{name:"saxophone",emoji:""},{name:"trumpet",emoji:""},{name:"guitar",emoji:""},{name:"violin",emoji:""},{name:"clapper",emoji:""},{name:"video_game",emoji:""},{name:"space_invader",emoji:""},{name:"dart",emoji:""},{name:"game_die",emoji:""},{name:"slot_machine",emoji:""},{name:"bowling",emoji:""},{name:"red_car",emoji:""},{name:"taxi",emoji:""},{name:"blue_car",emoji:""},{name:"bus",emoji:""},{name:"trolleybus",emoji:""},{name:"racing_car",emoji:""},{name:"police_car",emoji:""},{name:"ambulance",emoji:""},{name:"fire_engine",emoji:""},{name:"minibus",emoji:""},{name:"truck",emoji:""},{name:"articulated_lorry",emoji:""},{name:"tractor",emoji:""},{name:"kick_scooter",emoji:""},{name:"motorcycle",emoji:""},{name:"bike",emoji:""},{name:"motor_scooter",emoji:""},{name:"rotating_light",emoji:""},{name:"oncoming_police_car",emoji:""},{name:"oncoming_bus",emoji:""},{name:"oncoming_automobile",emoji:""},{name:"oncoming_taxi",emoji:""},{name:"aerial_tramway",emoji:""},{name:"mountain_cableway",emoji:""},{name:"suspension_railway",emoji:""},{name:"railway_car",emoji:""},{name:"train",emoji:""},{name:"monorail",emoji:""},{name:"bullettrain_side",emoji:""},{name:"bullettrain_front",emoji:""},{name:"light_rail",emoji:""},{name:"mountain_railway",emoji:""},{name:"steam_locomotive",emoji:""},{name:"train2",emoji:""},{name:"metro",emoji:""},{name:"tram",emoji:""},{name:"station",emoji:""},{name:"helicopter",emoji:""},{name:"small_airplane",emoji:""},{name:"airplane",emoji:""},{name:"flight_departure",emoji:""},{name:"flight_arrival",emoji:""},{name:"sailboat",emoji:""},{name:"motor_boat",emoji:""},{name:"speedboat",emoji:""},{name:"ferry",emoji:""},{name:"passenger_ship",emoji:""},{name:"rocket",emoji:""},{name:"artificial_satellite",emoji:""},{name:"seat",emoji:""},{name:"canoe",emoji:""},{name:"anchor",emoji:""},{name:"construction",emoji:""},{name:"fuelpump",emoji:""},{name:"busstop",emoji:""},{name:"vertical_traffic_light",emoji:""},{name:"traffic_light",emoji:""},{name:"checkered_flag",emoji:""},{name:"ship",emoji:""},{name:"ferris_wheel",emoji:""},{name:"roller_coaster",emoji:""},{name:"carousel_horse",emoji:""},{name:"building_construction",emoji:""},{name:"foggy",emoji:""},{name:"tokyo_tower",emoji:""},{name:"factory",emoji:""},{name:"fountain",emoji:""},{name:"rice_scene",emoji:""},{name:"mountain",emoji:""},{name:"mountain_snow",emoji:""},{name:"mount_fuji",emoji:""},{name:"volcano",emoji:""},{name:"japan",emoji:""},{name:"camping",emoji:""},{name:"tent",emoji:""},{name:"national_park",emoji:""},{name:"motorway",emoji:""},{name:"railway_track",emoji:""},{name:"sunrise",emoji:""},{name:"sunrise_over_mountains",emoji:""},{name:"desert",emoji:""},{name:"beach_umbrella",emoji:""},{name:"desert_island",emoji:""},{name:"city_sunrise",emoji:""},{name:"city_sunset",emoji:""},{name:"cityscape",emoji:""},{name:"night_with_stars",emoji:""},{name:"bridge_at_night",emoji:""},{name:"milky_way",emoji:""},{name:"stars",emoji:""},{name:"sparkler",emoji:""},{name:"fireworks",emoji:""},{name:"rainbow",emoji:""},{name:"houses",emoji:""},{name:"european_castle",emoji:""},{name:"japanese_castle",emoji:""},{name:"stadium",emoji:""},{name:"statue_of_liberty",emoji:""},{name:"house",emoji:""},{name:"house_with_garden",emoji:""},{name:"derelict_house",emoji:""},{name:"office",emoji:""},{name:"department_store",emoji:""},{name:"post_office",emoji:""},{name:"european_post_office",emoji:""},{name:"hospital",emoji:""},{name:"bank",emoji:""},{name:"hotel",emoji:""},{name:"convenience_store",emoji:""},{name:"school",emoji:""},{name:"love_hotel",emoji:""},{name:"wedding",emoji:""},{name:"classical_building",emoji:""},{name:"church",emoji:""},{name:"mosque",emoji:""},{name:"synagogue",emoji:""},{name:"kaaba",emoji:""},{name:"shinto_shrine",emoji:""},{name:"watch",emoji:""},{name:"iphone",emoji:""},{name:"calling",emoji:""},{name:"computer",emoji:""},{name:"keyboard",emoji:""},{name:"desktop_computer",emoji:""},{name:"printer",emoji:""},{name:"computer_mouse",emoji:""},{name:"trackball",emoji:""},{name:"joystick",emoji:""},{name:"clamp",emoji:""},{name:"minidisc",emoji:""},{name:"floppy_disk",emoji:""},{name:"cd",emoji:""},{name:"dvd",emoji:""},{name:"vhs",emoji:""},{name:"camera",emoji:""},{name:"camera_flash",emoji:""},{name:"video_camera",emoji:""},{name:"movie_camera",emoji:""},{name:"film_projector",emoji:""},{name:"film_strip",emoji:""},{name:"telephone_receiver",emoji:""},{name:"phone",emoji:""},{name:"pager",emoji:""},{name:"fax",emoji:""},{name:"tv",emoji:""},{name:"radio",emoji:""},{name:"studio_microphone",emoji:""},{name:"level_slider",emoji:""},{name:"control_knobs",emoji:""},{name:"stopwatch",emoji:""},{name:"timer_clock",emoji:""},{name:"alarm_clock",emoji:""},{name:"mantelpiece_clock",emoji:""},{name:"hourglass_flowing_sand",emoji:""},{name:"hourglass",emoji:""},{name:"satellite",emoji:""},{name:"battery",emoji:""},{name:"electric_plug",emoji:""},{name:"bulb",emoji:""},{name:"flashlight",emoji:""},{name:"candle",emoji:""},{name:"wastebasket",emoji:""},{name:"oil_drum",emoji:""},{name:"money_with_wings",emoji:""},{name:"dollar",emoji:""},{name:"yen",emoji:""},{name:"euro",emoji:""},{name:"pound",emoji:""},{name:"moneybag",emoji:""},{name:"credit_card",emoji:""},{name:"gem",emoji:""},{name:"balance_scale",emoji:""},{name:"wrench",emoji:""},{name:"hammer",emoji:""},{name:"hammer_and_pick",emoji:""},{name:"hammer_and_wrench",emoji:""},{name:"pick",emoji:""},{name:"nut_and_bolt",emoji:""},{name:"gear",emoji:""},{name:"chains",emoji:""},{name:"gun",emoji:""},{name:"bomb",emoji:""},{name:"hocho",emoji:""},{name:"dagger",emoji:""},{name:"crossed_swords",emoji:""},{name:"shield",emoji:""},{name:"smoking",emoji:""},{name:"skull_and_crossbones",emoji:""},{name:"coffin",emoji:""},{name:"funeral_urn",emoji:""},{name:"amphora",emoji:""},{name:"crystal_ball",emoji:""},{name:"prayer_beads",emoji:""},{name:"barber",emoji:""},{name:"alembic",emoji:""},{name:"telescope",emoji:""},{name:"microscope",emoji:""},{name:"hole",emoji:""},{name:"pill",emoji:""},{name:"syringe",emoji:""},{name:"thermometer",emoji:""},{name:"label",emoji:""},{name:"bookmark",emoji:""},{name:"toilet",emoji:""},{name:"shower",emoji:""},{name:"bathtub",emoji:""},{name:"key",emoji:""},{name:"old_key",emoji:""},{name:"couch_and_lamp",emoji:""},{name:"sleeping_bed",emoji:""},{name:"bed",emoji:""},{name:"door",emoji:""},{name:"bellhop_bell",emoji:""},{name:"framed_picture",emoji:""},{name:"world_map",emoji:""},{name:"parasol_on_ground",emoji:""},{name:"moyai",emoji:""},{name:"shopping",emoji:""},{name:"shopping_cart",emoji:""},{name:"balloon",emoji:""},{name:"flags",emoji:""},{name:"ribbon",emoji:""},{name:"gift",emoji:""},{name:"confetti_ball",emoji:""},{name:"tada",emoji:""},{name:"dolls",emoji:""},{name:"wind_chime",emoji:""},{name:"crossed_flags",emoji:""},{name:"izakaya_lantern",emoji:""},{name:"email",emoji:""},{name:"envelope_with_arrow",emoji:""},{name:"incoming_envelope",emoji:""},{name:"e-mail",emoji:""},{name:"love_letter",emoji:""},{name:"postbox",emoji:""},{name:"mailbox_closed",emoji:""},{name:"mailbox",emoji:""},{name:"mailbox_with_mail",emoji:""},{name:"mailbox_with_no_mail",emoji:""},{name:"package",emoji:""},{name:"postal_horn",emoji:""},{name:"inbox_tray",emoji:""},{name:"outbox_tray",emoji:""},{name:"scroll",emoji:""},{name:"page_with_curl",emoji:""},{name:"bookmark_tabs",emoji:""},{name:"bar_chart",emoji:""},{name:"chart_with_upwards_trend",emoji:""},{name:"chart_with_downwards_trend",emoji:""},{name:"page_facing_up",emoji:""},{name:"date",emoji:""},{name:"calendar",emoji:""},{name:"spiral_calendar",emoji:""},{name:"card_index",emoji:""},{name:"card_file_box",emoji:""},{name:"ballot_box",emoji:""},{name:"file_cabinet",emoji:""},{name:"clipboard",emoji:""},{name:"spiral_notepad",emoji:""},{name:"file_folder",emoji:""},{name:"open_file_folder",emoji:""},{name:"card_index_dividers",emoji:""},{name:"newspaper_roll",emoji:""},{name:"newspaper",emoji:""},{name:"notebook",emoji:""},{name:"closed_book",emoji:""},{name:"green_book",emoji:""},{name:"blue_book",emoji:""},{name:"orange_book",emoji:""},{name:"notebook_with_decorative_cover",emoji:""},{name:"ledger",emoji:""},{name:"books",emoji:""},{name:"open_book",emoji:""},{name:"link",emoji:""},{name:"paperclip",emoji:""},{name:"paperclips",emoji:""},{name:"scissors",emoji:""},{name:"triangular_ruler",emoji:""},{name:"straight_ruler",emoji:""},{name:"pushpin",emoji:""},{name:"round_pushpin",emoji:""},{name:"triangular_flag_on_post",emoji:""},{name:"white_flag",emoji:""},{name:"black_flag",emoji:""},{name:"rainbow_flag",emoji:""},{name:"closed_lock_with_key",emoji:""},{name:"lock",emoji:""},{name:"unlock",emoji:""},{name:"lock_with_ink_pen",emoji:""},{name:"pen",emoji:""},{name:"fountain_pen",emoji:""},{name:"black_nib",emoji:""},{name:"memo",emoji:""},{name:"pencil2",emoji:""},{name:"crayon",emoji:""},{name:"paintbrush",emoji:""},{name:"mag",emoji:""},{name:"mag_right",emoji:""},{name:"heart",emoji:""},{name:"yellow_heart",emoji:""},{name:"green_heart",emoji:""},{name:"blue_heart",emoji:""},{name:"purple_heart",emoji:""},{name:"black_heart",emoji:""},{name:"broken_heart",emoji:""},{name:"heavy_heart_exclamation",emoji:""},{name:"two_hearts",emoji:""},{name:"revolving_hearts",emoji:""},{name:"heartbeat",emoji:""},{name:"heartpulse",emoji:""},{name:"sparkling_heart",emoji:""},{name:"cupid",emoji:""},{name:"gift_heart",emoji:""},{name:"heart_decoration",emoji:""},{name:"peace_symbol",emoji:""},{name:"latin_cross",emoji:""},{name:"star_and_crescent",emoji:""},{name:"om",emoji:""},{name:"wheel_of_dharma",emoji:""},{name:"star_of_david",emoji:""},{name:"six_pointed_star",emoji:""},{name:"menorah",emoji:""},{name:"yin_yang",emoji:""},{name:"orthodox_cross",emoji:""},{name:"place_of_worship",emoji:""},{name:"ophiuchus",emoji:""},{name:"aries",emoji:""},{name:"taurus",emoji:""},{name:"gemini",emoji:""},{name:"cancer",emoji:""},{name:"leo",emoji:""},{name:"virgo",emoji:""},{name:"libra",emoji:""},{name:"scorpius",emoji:""},{name:"sagittarius",emoji:""},{name:"capricorn",emoji:""},{name:"aquarius",emoji:""},{name:"pisces",emoji:""},{name:"id",emoji:""},{name:"atom_symbol",emoji:""},{name:"u7a7a",emoji:""},{name:"u5272",emoji:""},{name:"radioactive",emoji:""},{name:"biohazard",emoji:""},{name:"mobile_phone_off",emoji:""},{name:"vibration_mode",emoji:""},{name:"u6709",emoji:""},{name:"u7121",emoji:""},{name:"u7533",emoji:""},{name:"u55b6",emoji:""},{name:"u6708",emoji:""},{name:"eight_pointed_black_star",emoji:""},{name:"vs",emoji:""},{name:"accept",emoji:""},{name:"white_flower",emoji:""},{name:"ideograph_advantage",emoji:""},{name:"secret",emoji:""},{name:"congratulations",emoji:""},{name:"u5408",emoji:""},{name:"u6e80",emoji:""},{name:"u7981",emoji:""},{name:"a",emoji:""},{name:"b",emoji:""},{name:"ab",emoji:""},{name:"cl",emoji:""},{name:"o2",emoji:""},{name:"sos",emoji:""},{name:"no_entry",emoji:""},{name:"name_badge",emoji:""},{name:"no_entry_sign",emoji:""},{name:"x",emoji:""},{name:"o",emoji:""},{name:"stop_sign",emoji:""},{name:"anger",emoji:""},{name:"hotsprings",emoji:""},{name:"no_pedestrians",emoji:""},{name:"do_not_litter",emoji:""},{name:"no_bicycles",emoji:""},{name:"non-potable_water",emoji:""},{name:"underage",emoji:""},{name:"no_mobile_phones",emoji:""},{name:"exclamation",emoji:""},{name:"grey_exclamation",emoji:""},{name:"question",emoji:""},{name:"grey_question",emoji:""},{name:"bangbang",emoji:""},{name:"interrobang",emoji:""},{name:"100",emoji:""},{name:"low_brightness",emoji:""},{name:"high_brightness",emoji:""},{name:"trident",emoji:""},{name:"fleur_de_lis",emoji:""},{name:"part_alternation_mark",emoji:""},{name:"warning",emoji:""},{name:"children_crossing",emoji:""},{name:"beginner",emoji:""},{name:"recycle",emoji:""},{name:"u6307",emoji:""},{name:"chart",emoji:""},{name:"sparkle",emoji:""},{name:"eight_spoked_asterisk",emoji:""},{name:"negative_squared_cross_mark",emoji:""},{name:"white_check_mark",emoji:""},{name:"diamond_shape_with_a_dot_inside",emoji:""},{name:"cyclone",emoji:""},{name:"loop",emoji:""},{name:"globe_with_meridians",emoji:""},{name:"m",emoji:""},{name:"atm",emoji:""},{name:"sa",emoji:""},{name:"passport_control",emoji:""},{name:"customs",emoji:""},{name:"baggage_claim",emoji:""},{name:"left_luggage",emoji:""},{name:"wheelchair",emoji:""},{name:"no_smoking",emoji:""},{name:"wc",emoji:""},{name:"parking",emoji:""},{name:"potable_water",emoji:""},{name:"mens",emoji:""},{name:"womens",emoji:""},{name:"baby_symbol",emoji:""},{name:"restroom",emoji:""},{name:"put_litter_in_its_place",emoji:""},{name:"cinema",emoji:""},{name:"signal_strength",emoji:""},{name:"koko",emoji:""},{name:"ng",emoji:""},{name:"ok",emoji:""},{name:"up",emoji:""},{name:"cool",emoji:""},{name:"new",emoji:""},{name:"free",emoji:""},{name:"zero",emoji:"0"},{name:"one",emoji:"1"},{name:"two",emoji:"2"},{name:"three",emoji:"3"},{name:"four",emoji:"4"},{name:"five",emoji:"5"},{name:"six",emoji:"6"},{name:"seven",emoji:"7"},{name:"eight",emoji:"8"},{name:"nine",emoji:"9"},{name:"keycap_ten",emoji:""},{name:"asterisk",emoji:"*"},{name:"1234",emoji:""},{name:"arrow_forward",emoji:""},{name:"pause_button",emoji:""},{name:"next_track_button",emoji:""},{name:"stop_button",emoji:""},{name:"record_button",emoji:""},{name:"play_or_pause_button",emoji:""},{name:"previous_track_button",emoji:""},{name:"fast_forward",emoji:""},{name:"rewind",emoji:""},{name:"twisted_rightwards_arrows",emoji:""},{name:"repeat",emoji:""},{name:"repeat_one",emoji:""},{name:"arrow_backward",emoji:""},{name:"arrow_up_small",emoji:""},{name:"arrow_down_small",emoji:""},{name:"arrow_double_up",emoji:""},{name:"arrow_double_down",emoji:""},{name:"arrow_right",emoji:""},{name:"arrow_left",emoji:""},{name:"arrow_up",emoji:""},{name:"arrow_down",emoji:""},{name:"arrow_upper_right",emoji:""},{name:"arrow_lower_right",emoji:""},{name:"arrow_lower_left",emoji:""},{name:"arrow_upper_left",emoji:""},{name:"arrow_up_down",emoji:""},{name:"left_right_arrow",emoji:""},{name:"arrows_counterclockwise",emoji:""},{name:"arrow_right_hook",emoji:""},{name:"leftwards_arrow_with_hook",emoji:""},{name:"arrow_heading_up",emoji:""},{name:"arrow_heading_down",emoji:""},{name:"hash",emoji:"#"},{name:"information_source",emoji:""},{name:"abc",emoji:""},{name:"abcd",emoji:""},{name:"capital_abcd",emoji:""},{name:"symbols",emoji:""},{name:"musical_note",emoji:""},{name:"notes",emoji:""},{name:"wavy_dash",emoji:""},{name:"curly_loop",emoji:""},{name:"heavy_check_mark",emoji:""},{name:"arrows_clockwise",emoji:""},{name:"heavy_plus_sign",emoji:""},{name:"heavy_minus_sign",emoji:""},{name:"heavy_division_sign",emoji:""},{name:"heavy_multiplication_x",emoji:""},{name:"heavy_dollar_sign",emoji:""},{name:"currency_exchange",emoji:""},{name:"copyright",emoji:""},{name:"registered",emoji:""},{name:"tm",emoji:""},{name:"end",emoji:""},{name:"back",emoji:""},{name:"on",emoji:""},{name:"top",emoji:""},{name:"soon",emoji:""},{name:"ballot_box_with_check",emoji:""},{name:"radio_button",emoji:""},{name:"white_circle",emoji:""},{name:"black_circle",emoji:""},{name:"red_circle",emoji:""},{name:"large_blue_circle",emoji:""},{name:"small_orange_diamond",emoji:""},{name:"small_blue_diamond",emoji:""},{name:"large_orange_diamond",emoji:""},{name:"large_blue_diamond",emoji:""},{name:"small_red_triangle",emoji:""},{name:"black_small_square",emoji:""},{name:"white_small_square",emoji:""},{name:"black_large_square",emoji:""},{name:"white_large_square",emoji:""},{name:"small_red_triangle_down",emoji:""},{name:"black_medium_square",emoji:""},{name:"white_medium_square",emoji:""},{name:"black_medium_small_square",emoji:""},{name:"white_medium_small_square",emoji:""},{name:"black_square_button",emoji:""},{name:"white_square_button",emoji:""},{name:"speaker",emoji:""},{name:"sound",emoji:""},{name:"loud_sound",emoji:""},{name:"mute",emoji:""},{name:"mega",emoji:""},{name:"loudspeaker",emoji:""},{name:"bell",emoji:""},{name:"no_bell",emoji:""},{name:"black_joker",emoji:""},{name:"mahjong",emoji:""},{name:"spades",emoji:""},{name:"clubs",emoji:""},{name:"hearts",emoji:""},{name:"diamonds",emoji:""},{name:"flower_playing_cards",emoji:""},{name:"thought_balloon",emoji:""},{name:"right_anger_bubble",emoji:""},{name:"speech_balloon",emoji:""},{name:"left_speech_bubble",emoji:""},{name:"clock1",emoji:""},{name:"clock2",emoji:""},{name:"clock3",emoji:""},{name:"clock4",emoji:""},{name:"clock5",emoji:""},{name:"clock6",emoji:""},{name:"clock7",emoji:""},{name:"clock8",emoji:""},{name:"clock9",emoji:""},{name:"clock10",emoji:""},{name:"clock11",emoji:""},{name:"clock12",emoji:""},{name:"clock130",emoji:""},{name:"clock230",emoji:""},{name:"clock330",emoji:""},{name:"clock430",emoji:""},{name:"clock530",emoji:""},{name:"clock630",emoji:""},{name:"clock730",emoji:""},{name:"clock830",emoji:""},{name:"clock930",emoji:""},{name:"clock1030",emoji:""},{name:"clock1130",emoji:""},{name:"clock1230",emoji:""},{name:"afghanistan",emoji:""},{name:"aland_islands",emoji:""},{name:"albania",emoji:""},{name:"algeria",emoji:""},{name:"american_samoa",emoji:""},{name:"andorra",emoji:""},{name:"angola",emoji:""},{name:"anguilla",emoji:""},{name:"antarctica",emoji:""},{name:"antigua_barbuda",emoji:""},{name:"argentina",emoji:""},{name:"armenia",emoji:""},{name:"aruba",emoji:""},{name:"australia",emoji:""},{name:"austria",emoji:""},{name:"azerbaijan",emoji:""},{name:"bahamas",emoji:""},{name:"bahrain",emoji:""},{name:"bangladesh",emoji:""},{name:"barbados",emoji:""},{name:"belarus",emoji:""},{name:"belgium",emoji:""},{name:"belize",emoji:""},{name:"benin",emoji:""},{name:"bermuda",emoji:""},{name:"bhutan",emoji:""},{name:"bolivia",emoji:""},{name:"caribbean_netherlands",emoji:""},{name:"bosnia_herzegovina",emoji:""},{name:"botswana",emoji:""},{name:"brazil",emoji:""},{name:"british_indian_ocean_territory",emoji:""},{name:"british_virgin_islands",emoji:""},{name:"brunei",emoji:""},{name:"bulgaria",emoji:""},{name:"burkina_faso",emoji:""},{name:"burundi",emoji:""},{name:"cape_verde",emoji:""},{name:"cambodia",emoji:""},{name:"cameroon",emoji:""},{name:"canada",emoji:""},{name:"canary_islands",emoji:""},{name:"cayman_islands",emoji:""},{name:"central_african_republic",emoji:""},{name:"chad",emoji:""},{name:"chile",emoji:""},{name:"cn",emoji:""},{name:"christmas_island",emoji:""},{name:"cocos_islands",emoji:""},{name:"colombia",emoji:""},{name:"comoros",emoji:""},{name:"congo_brazzaville",emoji:""},{name:"congo_kinshasa",emoji:""},{name:"cook_islands",emoji:""},{name:"costa_rica",emoji:""},{name:"croatia",emoji:""},{name:"cuba",emoji:""},{name:"curacao",emoji:""},{name:"cyprus",emoji:""},{name:"czech_republic",emoji:""},{name:"denmark",emoji:""},{name:"djibouti",emoji:""},{name:"dominica",emoji:""},{name:"dominican_republic",emoji:""},{name:"ecuador",emoji:""},{name:"egypt",emoji:""},{name:"el_salvador",emoji:""},{name:"equatorial_guinea",emoji:""},{name:"eritrea",emoji:""},{name:"estonia",emoji:""},{name:"ethiopia",emoji:""},{name:"eu",emoji:""},{name:"falkland_islands",emoji:""},{name:"faroe_islands",emoji:""},{name:"fiji",emoji:""},{name:"finland",emoji:""},{name:"fr",emoji:""},{name:"french_guiana",emoji:""},{name:"french_polynesia",emoji:""},{name:"french_southern_territories",emoji:""},{name:"gabon",emoji:""},{name:"gambia",emoji:""},{name:"georgia",emoji:""},{name:"de",emoji:""},{name:"ghana",emoji:""},{name:"gibraltar",emoji:""},{name:"greece",emoji:""},{name:"greenland",emoji:""},{name:"grenada",emoji:""},{name:"guadeloupe",emoji:""},{name:"guam",emoji:""},{name:"guatemala",emoji:""},{name:"guernsey",emoji:""},{name:"guinea",emoji:""},{name:"guinea_bissau",emoji:""},{name:"guyana",emoji:""},{name:"haiti",emoji:""},{name:"honduras",emoji:""},{name:"hong_kong",emoji:""},{name:"hungary",emoji:""},{name:"iceland",emoji:""},{name:"india",emoji:""},{name:"indonesia",emoji:""},{name:"iran",emoji:""},{name:"iraq",emoji:""},{name:"ireland",emoji:""},{name:"isle_of_man",emoji:""},{name:"israel",emoji:""},{name:"it",emoji:""},{name:"cote_divoire",emoji:""},{name:"jamaica",emoji:""},{name:"jp",emoji:""},{name:"jersey",emoji:""},{name:"jordan",emoji:""},{name:"kazakhstan",emoji:""},{name:"kenya",emoji:""},{name:"kiribati",emoji:""},{name:"kosovo",emoji:""},{name:"kuwait",emoji:""},{name:"kyrgyzstan",emoji:""},{name:"laos",emoji:""},{name:"latvia",emoji:""},{name:"lebanon",emoji:""},{name:"lesotho",emoji:""},{name:"liberia",emoji:""},{name:"libya",emoji:""},{name:"liechtenstein",emoji:""},{name:"lithuania",emoji:""},{name:"luxembourg",emoji:""},{name:"macau",emoji:""},{name:"macedonia",emoji:""},{name:"madagascar",emoji:""},{name:"malawi",emoji:""},{name:"malaysia",emoji:""},{name:"maldives",emoji:""},{name:"mali",emoji:""},{name:"malta",emoji:""},{name:"marshall_islands",emoji:""},{name:"martinique",emoji:""},{name:"mauritania",emoji:""},{name:"mauritius",emoji:""},{name:"mayotte",emoji:""},{name:"mexico",emoji:""},{name:"micronesia",emoji:""},{name:"moldova",emoji:""},{name:"monaco",emoji:""},{name:"mongolia",emoji:""},{name:"montenegro",emoji:""},{name:"montserrat",emoji:""},{name:"morocco",emoji:""},{name:"mozambique",emoji:""},{name:"myanmar",emoji:""},{name:"namibia",emoji:""},{name:"nauru",emoji:""},{name:"nepal",emoji:""},{name:"netherlands",emoji:""},{name:"new_caledonia",emoji:""},{name:"new_zealand",emoji:""},{name:"nicaragua",emoji:""},{name:"niger",emoji:""},{name:"nigeria",emoji:""},{name:"niue",emoji:""},{name:"norfolk_island",emoji:""},{name:"northern_mariana_islands",emoji:""},{name:"north_korea",emoji:""},{name:"norway",emoji:""},{name:"oman",emoji:""},{name:"pakistan",emoji:""},{name:"palau",emoji:""},{name:"palestinian_territories",emoji:""},{name:"panama",emoji:""},{name:"papua_new_guinea",emoji:""},{name:"paraguay",emoji:""},{name:"peru",emoji:""},{name:"philippines",emoji:""},{name:"pitcairn_islands",emoji:""},{name:"poland",emoji:""},{name:"portugal",emoji:""},{name:"puerto_rico",emoji:""},{name:"qatar",emoji:""},{name:"reunion",emoji:""},{name:"romania",emoji:""},{name:"ru",emoji:""},{name:"rwanda",emoji:""},{name:"st_barthelemy",emoji:""},{name:"st_helena",emoji:""},{name:"st_kitts_nevis",emoji:""},{name:"st_lucia",emoji:""},{name:"st_pierre_miquelon",emoji:""},{name:"st_vincent_grenadines",emoji:""},{name:"samoa",emoji:""},{name:"san_marino",emoji:""},{name:"sao_tome_principe",emoji:""},{name:"saudi_arabia",emoji:""},{name:"senegal",emoji:""},{name:"serbia",emoji:""},{name:"seychelles",emoji:""},{name:"sierra_leone",emoji:""},{name:"singapore",emoji:""},{name:"sint_maarten",emoji:""},{name:"slovakia",emoji:""},{name:"slovenia",emoji:""},{name:"solomon_islands",emoji:""},{name:"somalia",emoji:""},{name:"south_africa",emoji:""},{name:"south_georgia_south_sandwich_islands",emoji:""},{name:"kr",emoji:""},{name:"south_sudan",emoji:""},{name:"es",emoji:""},{name:"sri_lanka",emoji:""},{name:"sudan",emoji:""},{name:"suriname",emoji:""},{name:"swaziland",emoji:""},{name:"sweden",emoji:""},{name:"switzerland",emoji:""},{name:"syria",emoji:""},{name:"taiwan",emoji:""},{name:"tajikistan",emoji:""},{name:"tanzania",emoji:""},{name:"thailand",emoji:""},{name:"timor_leste",emoji:""},{name:"togo",emoji:""},{name:"tokelau",emoji:""},{name:"tonga",emoji:""},{name:"trinidad_tobago",emoji:""},{name:"tunisia",emoji:""},{name:"tr",emoji:""},{name:"turkmenistan",emoji:""},{name:"turks_caicos_islands",emoji:""},{name:"tuvalu",emoji:""},{name:"uganda",emoji:""},{name:"ukraine",emoji:""},{name:"united_arab_emirates",emoji:""},{name:"uk",emoji:""},{name:"us",emoji:""},{name:"us_virgin_islands",emoji:""},{name:"uruguay",emoji:""},{name:"uzbekistan",emoji:""},{name:"vanuatu",emoji:""},{name:"vatican_city",emoji:""},{name:"venezuela",emoji:""},{name:"vietnam",emoji:""},{name:"wallis_futuna",emoji:""},{name:"western_sahara",emoji:""},{name:"yemen",emoji:""},{name:"zambia",emoji:""},{name:"zimbabwe",emoji:""},{name:"star_struck",emoji:""},{name:"face_with_raised_eyebrow",emoji:""},{name:"exploding_head",emoji:""},{name:"crazy_face",emoji:""},{name:"face_with_symbols_over_mouth",emoji:""},{name:"face_vomiting",emoji:""},{name:"shushing_face",emoji:""},{name:"face_with_hand_over_mouth",emoji:""},{name:"face_with_monocle",emoji:""},{name:"child",emoji:""},{name:"adult",emoji:""},{name:"older_adult",emoji:""},{name:"woman_with_headscarf",emoji:""},{name:"bearded_person",emoji:""},{name:"breast_feeding",emoji:""},{name:"mage",emoji:""},{name:"woman_mage",emoji:""},{name:"fairy",emoji:""},{name:"vampire",emoji:""},{name:"merperson",emoji:""},{name:"merman",emoji:""},{name:"elf",emoji:""},{name:"genie",emoji:""},{name:"woman_genie",emoji:""},{name:"zombie",emoji:""},{name:"woman_zombie",emoji:""},{name:"person_in_steamy_room",emoji:""},{name:"woman_in_steamy_room",emoji:""},{name:"person_climbing",emoji:""},{name:"woman_climbing",emoji:""},{name:"person_in_lotus_position",emoji:""},{name:"woman_in_lotus_position",emoji:""},{name:"love_you_gesture",emoji:""},{name:"palms_up_together",emoji:""},{name:"brain",emoji:""},{name:"orange_heart",emoji:""},{name:"scarf",emoji:""},{name:"gloves",emoji:""},{name:"coat",emoji:""},{name:"socks",emoji:""},{name:"billed_cap",emoji:""},{name:"zebra",emoji:""},{name:"giraffe",emoji:""},{name:"hedgehog",emoji:""},{name:"sauropod",emoji:""},{name:"t_rex",emoji:""},{name:"cricket",emoji:""},{name:"coconut",emoji:""},{name:"broccoli",emoji:""},{name:"pretzel",emoji:""},{name:"cut_of_meat",emoji:""},{name:"sandwich",emoji:""},{name:"bowl_with_spoon",emoji:""},{name:"canned_food",emoji:""},{name:"dumpling",emoji:""},{name:"fortune_cookie",emoji:""},{name:"takeout_box",emoji:""},{name:"pie",emoji:""},{name:"cup_with_straw",emoji:""},{name:"chopsticks",emoji:""},{name:"flying_saucer",emoji:""},{name:"sled",emoji:""},{name:"curling_stone",emoji:""},{name:"svalbard_and_jan_mayen",emoji:""},{name:"st_martin",emoji:""},{name:"us_outlying_islands",emoji:""},{name:"tristan_da_cunha",emoji:""},{name:"heard_and_mc_donald_islands",emoji:""},{name:"ceuta_and_melilla",emoji:""},{name:"diego_garcia",emoji:""},{name:"ascension_island",emoji:""},{name:"bouvet_island",emoji:""},{name:"clipperton_island",emoji:""},{name:"united_nations",emoji:""},{name:"smiling_face_with_three_hearts",emoji:""},{name:"hot_face",emoji:""},{name:"cold_face",emoji:""},{name:"partying_face",emoji:""},{name:"woozy_face",emoji:""},{name:"pleading_face",emoji:""},{name:"man_red_haired",emoji:""},{name:"man_curly_haired",emoji:""},{name:"man_white_haired",emoji:""},{name:"man_bald",emoji:""},{name:"woman_red_haired",emoji:""},{name:"woman_curly_haired",emoji:""},{name:"woman_white_haired",emoji:""},{name:"woman_bald",emoji:""},{name:"superhero",emoji:""},{name:"man_superhero",emoji:""},{name:"woman_superhero",emoji:""},{name:"supervillain",emoji:""},{name:"woman_supervillain",emoji:""},{name:"man_supervillain",emoji:""},{name:"leg",emoji:""},{name:"foot",emoji:""},{name:"bone",emoji:""},{name:"tooth",emoji:""},{name:"goggles",emoji:""},{name:"lab_coat",emoji:""},{name:"hiking_boot",emoji:""},{name:"flat_shoe",emoji:""},{name:"raccoon",emoji:""},{name:"llama",emoji:""},{name:"hippopotamus",emoji:""},{name:"kangaroo",emoji:""},{name:"badger",emoji:""},{name:"swan",emoji:""},{name:"peacock",emoji:""},{name:"parrot",emoji:""},{name:"lobster",emoji:""},{name:"mosquito",emoji:""},{name:"microbe",emoji:""},{name:"mango",emoji:""},{name:"leafy_green",emoji:""},{name:"bagel",emoji:""},{name:"salt",emoji:""},{name:"moon_cake",emoji:""},{name:"cupcake",emoji:""},{name:"compass",emoji:""},{name:"brick",emoji:""},{name:"skateboard",emoji:""},{name:"luggage",emoji:""},{name:"firecracker",emoji:""},{name:"red_gift_envelope",emoji:""},{name:"softball",emoji:""},{name:"flying_disc",emoji:""},{name:"lacrosse",emoji:""},{name:"nazar_amulet",emoji:""},{name:"jigsaw",emoji:""},{name:"teddy_bear",emoji:""},{name:"chess_pawn",emoji:""},{name:"thread",emoji:""},{name:"yarn",emoji:""},{name:"abacus",emoji:""},{name:"receipt",emoji:""},{name:"toolbox",emoji:""},{name:"magnet",emoji:""},{name:"test_tube",emoji:""},{name:"petri_dish",emoji:""},{name:"dna",emoji:""},{name:"lotion_bottle",emoji:""},{name:"safety_pin",emoji:""},{name:"broom",emoji:""},{name:"basket",emoji:""},{name:"roll_of_toilet_paper",emoji:""},{name:"soap",emoji:""},{name:"sponge",emoji:""},{name:"fire_extinguisher",emoji:""},{name:"infinity",emoji:""},{name:"pirate_flag",emoji:""},{name:"waffle",emoji:""},{name:"otter",emoji:""},{name:"sloth",emoji:""},{name:"ice_cube",emoji:""},{name:"ringer_planet",emoji:""},{name:"flamingo",emoji:""},{name:"yawning_face",emoji:""},{name:"pinching_hand",emoji:""},{name:"service_dog",emoji:""},{name:"orangutan",emoji:""},{name:"auto_rickshaw",emoji:""},{name:"parachute",emoji:""},{name:"yo-yo",emoji:""},{name:"kite",emoji:""},{name:"brown_square",emoji:""},{name:"purple_square",emoji:""},{name:"blue_square",emoji:""},{name:"green_square",emoji:""},{name:"yellow_square",emoji:""},{name:"orange_square",emoji:""},{name:"red_square",emoji:""},{name:"brown_circle",emoji:""},{name:"purple_circle",emoji:""},{name:"green_circle",emoji:""},{name:"yellow_circle",emoji:""},{name:"orange_circle",emoji:""},{name:"razor",emoji:""},{name:"chair",emoji:""},{name:"stethoscope",emoji:""},{name:"adhesive_bandage",emoji:""},{name:"drop_of_blood",emoji:""},{name:"probing_cane",emoji:""},{name:"axe",emoji:""},{name:"diya_lamp",emoji:""},{name:"banjo",emoji:""},{name:"ballet_shoes",emoji:""},{name:"shorts",emoji:""},{name:"briefs",emoji:""},{name:"one_piece_swimsuit",emoji:""},{name:"sari",emoji:""},{name:"safety_vest",emoji:""},{name:"diving_mask",emoji:""},{name:"motorized_wheelchair",emoji:""},{name:"manual_wheelchair",emoji:""},{name:"hindu_temple",emoji:""},{name:"mat",emoji:""},{name:"beverage_box",emoji:""},{name:"oyster",emoji:""},{name:"butter",emoji:""},{name:"falafel",emoji:""},{name:"onion",emoji:""},{name:"garlic",emoji:""},{name:"skunk",emoji:""},{name:"guide_dog",emoji:""},{name:"people_holding_hands",emoji:""},{name:"woman_in_manual_wheelchair",emoji:""},{name:"man_in_manual_wheelchair",emoji:""},{name:"woman_in_motorized_wheelchair",emoji:""},{name:"man_in_motorized_wheelchair",emoji:""},{name:"woman_with_probing_cane",emoji:""},{name:"man_with_probing_cane",emoji:""},{name:"woman_kneeling",emoji:""},{name:"man_kneeling",emoji:""},{name:"man_standing",emoji:""},{name:"woman_standing",emoji:""},{name:"deaf_woman",emoji:""},{name:"deaf_man",emoji:""},{name:"hear_with_hearing_aid",emoji:""},{name:"mechanical_leg",emoji:""},{name:"mechanical_arm",emoji:""},{name:"white_heart",emoji:""},{name:"brown_heart",emoji:""},{name:"transgender_flag",emoji:""},{name:"smiling_face_with_tear",emoji:""},{name:"disguised_face",emoji:""},{name:"pinched_fingers",emoji:""},{name:"anatomical_heart",emoji:""},{name:"lungs",emoji:""},{name:"ninja",emoji:""},{name:"mx_claus",emoji:""},{name:"people_hugging",emoji:""},{name:"black_cat",emoji:""},{name:"bison",emoji:""},{name:"mammoth",emoji:""},{name:"beaver",emoji:""},{name:"dodo",emoji:""},{name:"feather",emoji:""},{name:"seal",emoji:""},{name:"beetle",emoji:""},{name:"cockroach",emoji:""},{name:"fly",emoji:""},{name:"worm",emoji:""},{name:"potted_plant",emoji:""},{name:"blueberries",emoji:""},{name:"olive",emoji:""},{name:"bell_pepper",emoji:""},{name:"flatbread",emoji:""},{name:"tamale",emoji:""},{name:"fondue",emoji:""},{name:"teapot",emoji:""},{name:"bubble_tea",emoji:""},{name:"rock",emoji:""},{name:"wood",emoji:""},{name:"hut",emoji:""},{name:"pickup_truck",emoji:""},{name:"roller_skate",emoji:""},{name:"magic_wand",emoji:""},{name:"piata",emoji:""},{name:"nesting_dolls",emoji:""},{name:"sewing_needle",emoji:""},{name:"knot",emoji:""},{name:"thong_sandal",emoji:""},{name:"military_helmet",emoji:""},{name:"accordion",emoji:""},{name:"long_drum",emoji:""},{name:"coin",emoji:""},{name:"boomerang",emoji:""},{name:"carpentry_saw",emoji:""},{name:"screwdriver",emoji:""},{name:"hook",emoji:""},{name:"ladder",emoji:""},{name:"mirror",emoji:""},{name:"window",emoji:""},{name:"plunger",emoji:""},{name:"mouse_trap",emoji:""},{name:"bucket",emoji:""},{name:"toothbrush",emoji:""},{name:"headstone",emoji:""},{name:"placard",emoji:""},{name:"transgender_symbol",emoji:""},{name:"man_feeding_baby",emoji:""},{name:"person_feeding_baby",emoji:""},{name:"polar_bear",emoji:""},{name:"melting_face",emoji:""},{name:"smiling_face",emoji:""},{name:"face_with_open_eyes_and_hand_over_mouth",emoji:""},{name:"face_with_peeking_eye",emoji:""},{name:"saluting_face",emoji:""},{name:"dotted_line_face",emoji:""},{name:"face_in_clouds",emoji:""},{name:"face_exhaling",emoji:""},{name:"face_with_spiral_eyes",emoji:""},{name:"face_with_diagonal_mouth",emoji:""},{name:"frowning_face",emoji:""},{name:"face_holding_back_tears",emoji:""},{name:"heart_on_fire",emoji:""},{name:"mending_heart",emoji:""},{name:"eye_in_speech_bubble",emoji:""},{name:"rightwards_hand",emoji:""},{name:"leftwards_hand",emoji:""},{name:"palm_down_hand",emoji:""},{name:"palm_up_hand",emoji:""},{name:"hand_with_index_finger_and_thumb_crossed",emoji:""},{name:"index_pointing_at_the_viewer",emoji:""},{name:"heart_hands",emoji:""},{name:"biting_lip",emoji:""},{name:"man_beard",emoji:""},{name:"woman_beard",emoji:""},{name:"person_red_hair",emoji:""},{name:"person_curly_hair",emoji:""},{name:"person_white_hair",emoji:""},{name:"person_bald",emoji:""},{name:"man_blond_hair",emoji:""},{name:"person_frowning",emoji:""},{name:"person_pouting",emoji:""},{name:"person_gesturing_no",emoji:""},{name:"person_gesturing_ok",emoji:""},{name:"person_tipping_hand",emoji:""},{name:"person_raising_hand",emoji:""},{name:"deaf_person",emoji:""},{name:"man_bowing",emoji:""},{name:"person_facepalming",emoji:""},{name:"person_shrugging",emoji:""},{name:"health_worker",emoji:""},{name:"student",emoji:""},{name:"teacher",emoji:""},{name:"judge",emoji:""},{name:"farmer",emoji:""},{name:"cook",emoji:""},{name:"mechanic",emoji:""},{name:"factory_worker",emoji:""},{name:"office_worker",emoji:""},{name:"scientist",emoji:""},{name:"technologist",emoji:""},{name:"singer",emoji:""},{name:"artist",emoji:""},{name:"pilot",emoji:""},{name:"astronaut",emoji:""},{name:"firefighter",emoji:""},{name:"man_police_officer",emoji:""},{name:"man_detective",emoji:""},{name:"man_guard",emoji:""},{name:"man_construction_worker",emoji:""},{name:"person_with_crown",emoji:""},{name:"man_wearing_turban",emoji:""},{name:"man_in_tuxedo",emoji:""},{name:"woman_in_tuxedo",emoji:""},{name:"man_with_veil",emoji:""},{name:"woman_with_veil",emoji:""},{name:"pregnant_man",emoji:""},{name:"pregnant_person",emoji:""},{name:"woman_feeding_baby",emoji:""},{name:"man_mage",emoji:""},{name:"man_fairy",emoji:""},{name:"woman_fairy",emoji:""},{name:"man_vampire",emoji:""},{name:"woman_vampire",emoji:""},{name:"mermaid",emoji:""},{name:"man_elf",emoji:""},{name:"woman_elf",emoji:""},{name:"man_genie",emoji:""},{name:"man_zombie",emoji:""},{name:"troll",emoji:""},{name:"person_getting_massage",emoji:""},{name:"person_getting_haircut",emoji:""},{name:"man_walking",emoji:""},{name:"person_standing",emoji:""},{name:"person_kneeling",emoji:""},{name:"person_with_white_cane",emoji:""},{name:"person_in_motorized_wheelchair",emoji:""},{name:"person_in_manual_wheelchair",emoji:""},{name:"man_running",emoji:""},{name:"women_with_bunny_ears",emoji:""},{name:"man_in_steamy_room",emoji:""},{name:"man_climbing",emoji:""},{name:"man_golfing",emoji:""},{name:"man_surfing",emoji:""},{name:"man_rowing_boat",emoji:""},{name:"man_swimming",emoji:""},{name:"man_bouncing_ball",emoji:""},{name:"man_lifting_weights",emoji:""},{name:"man_biking",emoji:""},{name:"man_mountain_biking",emoji:""},{name:"person_cartwheeling",emoji:""},{name:"people_wrestling",emoji:""},{name:"person_playing_water_polo",emoji:""},{name:"person_playing_handball",emoji:""},{name:"person_juggling",emoji:""},{name:"man_in_lotus_position",emoji:""},{name:"kiss_woman_man",emoji:""},{name:"couple_with_heart_woman_man",emoji:""},{name:"family_man_woman_boy",emoji:""},{name:"red_hair",emoji:""},{name:"curly_hair",emoji:""},{name:"white_hair",emoji:""},{name:"bald",emoji:""},{name:"coral",emoji:""},{name:"lotus",emoji:""},{name:"empty_nest",emoji:""},{name:"nest_with_eggs",emoji:""},{name:"beans",emoji:""},{name:"pouring_liquid",emoji:""},{name:"jar",emoji:""},{name:"playground_slide",emoji:""},{name:"wheel",emoji:""},{name:"ring_buoy",emoji:""},{name:"hamsa",emoji:""},{name:"mirror_ball",emoji:""},{name:"low_battery",emoji:""},{name:"crutch",emoji:""},{name:"xray",emoji:""},{name:"elevator",emoji:""},{name:"bubbles",emoji:""},{name:"identification_card",emoji:""},{name:"eject_button",emoji:""},{name:"female_sign",emoji:""},{name:"male_sign",emoji:""},{name:"heavy_equals_sign",emoji:""},{name:"medical_symbol",emoji:""},{name:"england",emoji:""},{name:"scotland",emoji:""},{name:"wales",emoji:""}],RMe=DMe,PMe=EC({name:"emoji",char:":",pluginKey:new Hn("emojiSuggestion"),items:({query:t})=>RMe.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())).sort((e,n)=>{const r=e.name.toLowerCase(),s=n.name.toLowerCase(),i=t.toLowerCase();return r===i&&s!==i?-1:s===i&&r!==i?1:r.startsWith(i)&&!s.startsWith(i)?-1:s.startsWith(i)&&!r.startsWith(i)?1:r.length-s.length}).slice(0,5),command:({editor:t,range:e,props:n})=>{n&&n.emoji?t.chain().focus().deleteRange(e).insertContent(n.emoji).run():console.error("Emoji command execution error: emoji property not found on selected item or item is invalid.",n)},component:EMe}),IMe={key:1,class:"mr-2 h-4 w-4"},OMe=Je({__name:"SlashCommandsList",props:{items:{type:Array,required:!0},editor:{type:Object,required:!0},range:{type:Object,required:!0},command:{type:Function,required:!0},query:String},setup(t,{expose:e}){const n=t,r=Q(null),s=a=>{a&&n.command(a)};return e({onKeyDown:({event:a})=>{var o,l;return(l=(o=r.value)==null?void 0:o.onKeyDown({event:a}))!=null?l:!1}}),(a,o)=>(T(),he(DC,{ref_key:"suggestionList",ref:r,items:n.items,command:l=>s(l),"container-class":"min-w-48","item-class":"h-7","show-no-results":!0},{default:D(({item:l})=>[l.icon?(T(),he(At(l.icon),{key:0,class:"mr-2 h-4 w-4"})):(T(),R("div",IMe)),u("span",null,$(l.title),1)]),_:1},8,["items","command"]))}}),LMe={class:"lucide lucide-heading-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function VMe(t,e){return T(),R("svg",LMe,[...e[0]||(e[0]=[u("path",{d:"M4 12h8"},null,-1),u("path",{d:"M4 18V6"},null,-1),u("path",{d:"M12 18V6"},null,-1),u("path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"},null,-1)])])}const NMe=zt({name:"lucide-heading-2",render:VMe}),jMe={class:"lucide lucide-heading-3",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function FMe(t,e){return T(),R("svg",jMe,[...e[0]||(e[0]=[fr('<path d="M4 12h8"></path><path d="M4 18V6"></path><path d="M12 18V6"></path><path d="M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"></path><path d="M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"></path>',5)])])}const BMe=zt({name:"lucide-heading-3",render:FMe}),zMe={class:"lucide lucide-list",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function UMe(t,e){return T(),R("svg",zMe,[...e[0]||(e[0]=[fr('<path d="M3 12h.01"></path><path d="M3 18h.01"></path><path d="M3 6h.01"></path><path d="M8 12h13"></path><path d="M8 18h13"></path><path d="M8 6h13"></path>',6)])])}const HMe=zt({name:"lucide-list",render:UMe}),qMe={class:"lucide lucide-list-ordered",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function WMe(t,e){return T(),R("svg",qMe,[...e[0]||(e[0]=[fr('<path d="M10 12h11"></path><path d="M10 18h11"></path><path d="M10 6h11"></path><path d="M4 10h2"></path><path d="M4 6h1v4"></path><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"></path>',6)])])}const GMe=zt({name:"lucide-list-ordered",render:WMe}),YMe={class:"lucide lucide-list-checks",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function KMe(t,e){return T(),R("svg",YMe,[...e[0]||(e[0]=[fr('<path d="m3 17 2 2 4-4"></path><path d="m3 7 2 2 4-4"></path><path d="M13 6h8"></path><path d="M13 12h8"></path><path d="M13 18h8"></path>',5)])])}const XMe=zt({name:"lucide-list-checks",render:KMe}),QMe={class:"lucide lucide-code",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function ZMe(t,e){return T(),R("svg",QMe,[...e[0]||(e[0]=[u("path",{d:"m16 18 6-6-6-6"},null,-1),u("path",{d:"m8 6-6 6 6 6"},null,-1)])])}const JMe=zt({name:"lucide-code",render:ZMe}),eEe={class:"lucide lucide-quote",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function tEe(t,e){return T(),R("svg",eEe,[...e[0]||(e[0]=[u("path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"},null,-1),u("path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"},null,-1)])])}const nEe=zt({name:"lucide-quote",render:tEe}),rEe={class:"lucide lucide-image",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function sEe(t,e){return T(),R("svg",rEe,[...e[0]||(e[0]=[u("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},null,-1),u("circle",{cx:"9",cy:"9",r:"2"},null,-1),u("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"},null,-1)])])}const iEe=zt({name:"lucide-image",render:sEe}),aEe={class:"lucide lucide-video",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function oEe(t,e){return T(),R("svg",aEe,[...e[0]||(e[0]=[u("path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"},null,-1),u("rect",{x:"2",y:"6",width:"14",height:"12",rx:"2"},null,-1)])])}const lEe=zt({name:"lucide-video",render:oEe}),uEe={class:"lucide lucide-link",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function dEe(t,e){return T(),R("svg",uEe,[...e[0]||(e[0]=[u("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},null,-1),u("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},null,-1)])])}const cEe=zt({name:"lucide-link",render:dEe}),fEe={class:"lucide lucide-table-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function pEe(t,e){return T(),R("svg",fEe,[...e[0]||(e[0]=[u("path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"},null,-1)])])}const hEe=zt({name:"lucide-table-2",render:pEe}),mEe=new Hn("slashCommandSuggestion"),gEe=()=>[{title:"Heading 2",icon:NMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setNode("heading",{level:2}).run()}},{title:"Heading 3",icon:BMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setNode("heading",{level:3}).run()}},{title:"Bullet List",icon:HMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleBulletList().run()}},{title:"Numbered List",icon:GMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleOrderedList().run()}},{title:"Task List",icon:XMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleTaskList().run()}},{title:"Code Block",icon:JMe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleCodeBlock().run()}},{title:"Blockquote",icon:nEe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).toggleBlockquote().run()}},{title:"Image",icon:iEe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).selectAndUploadImage().run()}},{title:"Video",icon:lEe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).selectAndUploadVideo().run()}},{title:"Embed",icon:iJ,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).openIframeDialog().run()}},{title:"Link",icon:cEe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setLink({href:""}).run()}},{title:"Horizontal Rule",icon:jZ,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).setHorizontalRule().run()}},{title:"Table",icon:hEe,command:({editor:t,range:e})=>{t.chain().focus().deleteRange(e).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}}],vEe=EC({name:"slashCommands",char:"/",pluginKey:mEe,items:({query:t})=>gEe().filter(n=>n.title.toLowerCase().startsWith(t.toLowerCase())),command:({editor:t,range:e,props:n})=>{n&&typeof n.command=="function"?n.command({editor:t,range:e}):console.error("Slash command execution error: command function not found on selected item or item is invalid.",n)},component:OMe});function wP(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var dh=wP();function aJ(t){dh=t}var s0={exec:()=>null};function Un(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(s,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(xi.caret,"$1"),n=n.replace(s,a),r},getRegex:()=>new RegExp(n,e)};return r}var xi={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},yEe=/^(?:[ \t]*(?:\n|$))+/,bEe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,xEe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,wb=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,_Ee=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,kP=/(?:[*+-]|\d{1,9}[.)])/,oJ=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,lJ=Un(oJ).replace(/bull/g,kP).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),wEe=Un(oJ).replace(/bull/g,kP).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),SP=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,kEe=/^[^\n]+/,CP=/(?!\s*\])(?:\\.|[^\[\]\\])+/,SEe=Un(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",CP).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),CEe=Un(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,kP).getRegex(),PC="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",AP=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,AEe=Un("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",AP).replace("tag",PC).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),uJ=Un(SP).replace("hr",wb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",PC).getRegex(),TEe=Un(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",uJ).getRegex(),TP={blockquote:TEe,code:bEe,def:SEe,fences:xEe,heading:_Ee,hr:wb,html:AEe,lheading:lJ,list:CEe,newline:yEe,paragraph:uJ,table:s0,text:kEe},jN=Un("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",wb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",PC).getRegex(),$Ee=ze(ge({},TP),{lheading:wEe,table:jN,paragraph:Un(SP).replace("hr",wb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",jN).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",PC).getRegex()}),MEe=ze(ge({},TP),{html:Un(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",AP).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:s0,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Un(SP).replace("hr",wb).replace("heading",` *#{1,6} *[^
]`).replace("lheading",lJ).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),EEe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,DEe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,dJ=/^( {2,}|\\)\n(?!\s*$)/,REe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,IC=/[\p{P}\p{S}]/u,$P=/[\s\p{P}\p{S}]/u,cJ=/[^\s\p{P}\p{S}]/u,PEe=Un(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,$P).getRegex(),fJ=/(?!~)[\p{P}\p{S}]/u,IEe=/(?!~)[\s\p{P}\p{S}]/u,OEe=/(?:[^\s\p{P}\p{S}]|~)/u,LEe=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,pJ=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,VEe=Un(pJ,"u").replace(/punct/g,IC).getRegex(),NEe=Un(pJ,"u").replace(/punct/g,fJ).getRegex(),hJ="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",jEe=Un(hJ,"gu").replace(/notPunctSpace/g,cJ).replace(/punctSpace/g,$P).replace(/punct/g,IC).getRegex(),FEe=Un(hJ,"gu").replace(/notPunctSpace/g,OEe).replace(/punctSpace/g,IEe).replace(/punct/g,fJ).getRegex(),BEe=Un("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,cJ).replace(/punctSpace/g,$P).replace(/punct/g,IC).getRegex(),zEe=Un(/\\(punct)/,"gu").replace(/punct/g,IC).getRegex(),UEe=Un(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),HEe=Un(AP).replace("(?:-->|$)","-->").getRegex(),qEe=Un("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",HEe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),dk=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,WEe=Un(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",dk).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),mJ=Un(/^!?\[(label)\]\[(ref)\]/).replace("label",dk).replace("ref",CP).getRegex(),gJ=Un(/^!?\[(ref)\](?:\[\])?/).replace("ref",CP).getRegex(),GEe=Un("reflink|nolink(?!\\()","g").replace("reflink",mJ).replace("nolink",gJ).getRegex(),MP={_backpedal:s0,anyPunctuation:zEe,autolink:UEe,blockSkip:LEe,br:dJ,code:DEe,del:s0,emStrongLDelim:VEe,emStrongRDelimAst:jEe,emStrongRDelimUnd:BEe,escape:EEe,link:WEe,nolink:gJ,punctuation:PEe,reflink:mJ,reflinkSearch:GEe,tag:qEe,text:REe,url:s0},YEe=ze(ge({},MP),{link:Un(/^!?\[(label)\]\((.*?)\)/).replace("label",dk).getRegex(),reflink:Un(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dk).getRegex()}),hM=ze(ge({},MP),{emStrongRDelimAst:FEe,emStrongLDelim:NEe,url:Un(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),KEe=ze(ge({},hM),{br:Un(dJ).replace("{2,}","*").getRegex(),text:Un(hM.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),Cx={normal:TP,gfm:$Ee,pedantic:MEe},gv={normal:MP,gfm:hM,breaks:KEe,pedantic:YEe},XEe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},FN=t=>XEe[t];function nl(t,e){if(e){if(xi.escapeTest.test(t))return t.replace(xi.escapeReplace,FN)}else if(xi.escapeTestNoEncode.test(t))return t.replace(xi.escapeReplaceNoEncode,FN);return t}function BN(t){try{t=encodeURI(t).replace(xi.percentDecode,"%")}catch(e){return null}return t}function zN(t,e){var i;const n=t.replace(xi.findPipe,(a,o,l)=>{let d=!1,c=o;for(;--c>=0&&l[c]==="\\";)d=!d;return d?"|":" |"}),r=n.split(xi.splitPipe);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(xi.slashPipe,"|");return r}function vv(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function QEe(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function UN(t,e,n,r,s){const i=e.href,a=e.title||null,o=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:i,title:a,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,l}function ZEe(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const s=r[1];return e.split(`
`).map(i=>{const a=i.match(n.other.beginningSpace);if(a===null)return i;const[o]=a;return o.length>=s.length?i.slice(s.length):i}).join(`
`)}var ck=class{constructor(t){ft(this,"options");ft(this,"rules");ft(this,"lexer");this.options=t||dh}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:vv(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=ZEe(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const r=vv(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:vv(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=vv(e[0],`
`).split(`
`),r="",s="";const i=[];for(;n.length>0;){let a=!1;const o=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))o.push(n[l]),a=!0;else if(!a)o.push(n[l]);else break;n=n.slice(l);const d=o.join(`
`),c=d.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${d}`:d,s=s?`${s}
${c}`:c;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,i,!0),this.lexer.state.top=f,n.length===0)break;const p=i.at(-1);if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){const h=p,m=h.raw+`
`+n.join(`
`),g=this.blockquote(m);i[i.length-1]=g,r=r.substring(0,r.length-h.raw.length)+g.raw,s=s.substring(0,s.length-h.text.length)+g.text;break}else if((p==null?void 0:p.type)==="list"){const h=p,m=h.raw+`
`+n.join(`
`),g=this.list(m);i[i.length-1]=g,r=r.substring(0,r.length-p.raw.length)+g.raw,s=s.substring(0,s.length-h.raw.length)+g.raw,n=m.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const i=this.rules.other.listItemRegex(n);let a=!1;for(;t;){let l=!1,d="",c="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;d=e[0],t=t.substring(d.length);let f=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),p=t.split(`
`,1)[0],h=!f.trim(),m=0;if(this.options.pedantic?(m=2,c=f.trimStart()):h?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,c=f.slice(m),m+=e[1].length),h&&this.rules.other.blankLine.test(p)&&(d+=p+`
`,t=t.substring(p.length+1),l=!0),!l){const x=this.rules.other.nextBulletRegex(m),_=this.rules.other.hrRegex(m),k=this.rules.other.fencesBeginRegex(m),w=this.rules.other.headingBeginRegex(m),S=this.rules.other.htmlBeginRegex(m);for(;t;){const C=t.split(`
`,1)[0];let A;if(p=C,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),A=p):A=p.replace(this.rules.other.tabCharGlobal,"    "),k.test(p)||w.test(p)||S.test(p)||x.test(p)||_.test(p))break;if(A.search(this.rules.other.nonSpaceChar)>=m||!p.trim())c+=`
`+A.slice(m);else{if(h||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||k.test(f)||w.test(f)||_.test(f))break;c+=`
`+p}!h&&!p.trim()&&(h=!0),d+=C+`
`,t=t.substring(C.length+1),f=A.slice(m)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(d)&&(a=!0));let g=null,y;this.options.gfm&&(g=this.rules.other.listIsTask.exec(c),g&&(y=g[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:d,task:!!g,checked:y,loose:!1,text:c,tokens:[]}),s.raw+=d}const o=s.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const d=s.items[l].tokens.filter(f=>f.type==="space"),c=d.length>0&&d.some(f=>this.rules.other.anyLine.test(f.raw));s.loose=c}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:s}}}table(t){var a;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=zN(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(a=e[3])!=null&&a.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const o of r)this.rules.other.tableAlignRight.test(o)?i.align.push("right"):this.rules.other.tableAlignCenter.test(o)?i.align.push("center"):this.rules.other.tableAlignLeft.test(o)?i.align.push("left"):i.align.push(null);for(let o=0;o<n.length;o++)i.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:i.align[o]});for(const o of s)i.rows.push(zN(o,i.header.length).map((l,d)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[d]})));return i}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const i=vv(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{const i=QEe(e[2],"()");if(i===-2)return;if(i>-1){const o=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],s=i[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),UN(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){const i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return UN(n,s,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const i=[...r[0]].length-1;let a,o,l=i,d=0;const c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+i);(r=c.exec(e))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(o=[...a].length,r[3]||r[4]){l+=o;continue}else if((r[5]||r[6])&&i%3&&!((i+o)%3)){d+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+d);const f=[...r[0]][0].length,p=t.slice(0,i+r.index+f+o);if(Math.min(i,o)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n,r;let e;if(e=this.rules.inline.url.exec(t)){let s,i;if(e[2]==="@")s=e[0],i="mailto:"+s;else{let a;do a=e[0],e[0]=(r=(n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])!=null?r:"";while(a!==e[0]);s=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},Lu=class mM{constructor(e){ft(this,"tokens");ft(this,"options");ft(this,"state");ft(this,"tokenizer");ft(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||dh,this.options.tokenizer=this.options.tokenizer||new ck,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:xi,block:Cx.normal,inline:gv.normal};this.options.pedantic?(n.block=Cx.pedantic,n.inline=gv.pedantic):this.options.gfm&&(n.block=Cx.gfm,this.options.breaks?n.inline=gv.breaks:n.inline=gv.gfm),this.tokenizer.rules=n}static get rules(){return{block:Cx,inline:gv}}static lex(e,n){return new mM(n).lex(e)}static lexInline(e,n){return new mM(n).inlineTokens(e)}lex(e){e=e.replace(xi.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var s,i,a;for(this.options.pedantic&&(e=e.replace(xi.tabCharGlobal,"    ").replace(xi.spaceLine,""));e;){let o;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(d=>(o=d.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);const d=n.at(-1);o.raw.length===1&&d!==void 0?d.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);const d=n.at(-1);(d==null?void 0:d.type)==="paragraph"||(d==null?void 0:d.type)==="text"?(d.raw+=`
`+o.raw,d.text+=`
`+o.text,this.inlineQueue.at(-1).src=d.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);const d=n.at(-1);(d==null?void 0:d.type)==="paragraph"||(d==null?void 0:d.type)==="text"?(d.raw+=`
`+o.raw,d.text+=`
`+o.raw,this.inlineQueue.at(-1).src=d.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}let l=e;if((a=this.options.extensions)!=null&&a.startBlock){let d=1/0;const c=e.slice(1);let f;this.options.extensions.startBlock.forEach(p=>{f=p.call({lexer:this},c),typeof f=="number"&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(l=e.substring(0,d+1))}if(this.state.top&&(o=this.tokenizer.paragraph(l))){const d=n.at(-1);r&&(d==null?void 0:d.type)==="paragraph"?(d.raw+=`
`+o.raw,d.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=d.text):n.push(o),r=l.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);const d=n.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=`
`+o.raw,d.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=d.text):n.push(o);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var o,l,d;let r=e,s=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)c.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,a="";for(;e;){i||(a=""),i=!1;let c;if((l=(o=this.options.extensions)==null?void 0:o.inline)!=null&&l.some(p=>(c=p.call({lexer:this},e,n))?(e=e.substring(c.raw.length),n.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const p=n.at(-1);c.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=c.raw,p.text+=c.text):n.push(c);continue}if(c=this.tokenizer.emStrong(e,r,a)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),n.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),n.push(c);continue}let f=e;if((d=this.options.extensions)!=null&&d.startInline){let p=1/0;const h=e.slice(1);let m;this.options.extensions.startInline.forEach(g=>{m=g.call({lexer:this},h),typeof m=="number"&&m>=0&&(p=Math.min(p,m))}),p<1/0&&p>=0&&(f=e.substring(0,p+1))}if(c=this.tokenizer.inlineText(f)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(a=c.raw.slice(-1)),i=!0;const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=c.raw,p.text+=c.text):n.push(c);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return n}},fk=class{constructor(t){ft(this,"options");ft(this,"parser");this.options=t||dh}space(t){return""}code({text:t,lang:e,escaped:n}){var i;const r=(i=(e||"").match(xi.notSpaceStart))==null?void 0:i[0],s=t.replace(xi.endingNewline,"")+`
`;return r?'<pre><code class="language-'+nl(r)+'">'+(n?s:nl(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:nl(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let r="";for(let a=0;a<t.items.length;a++){const o=t.items[a];r+=this.listitem(o)}const s=e?"ol":"ul",i=e&&n!==1?' start="'+n+'"':"";return"<"+s+i+`>
`+r+"</"+s+`>
`}listitem(t){var n;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+nl(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let s=0;s<t.header.length;s++)n+=this.tablecell(t.header[s]);e+=this.tablerow({text:n});let r="";for(let s=0;s<t.rows.length;s++){const i=t.rows[s];n="";for(let a=0;a<i.length;a++)n+=this.tablecell(i[a]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${nl(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),s=BN(t);if(s===null)return r;t=s;let i='<a href="'+t+'"';return e&&(i+=' title="'+nl(e)+'"'),i+=">"+r+"</a>",i}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const s=BN(t);if(s===null)return nl(n);t=s;let i=`<img src="${t}" alt="${n}"`;return e&&(i+=` title="${nl(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:nl(t.text)}},EP=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Vu=class gM{constructor(e){ft(this,"options");ft(this,"renderer");ft(this,"textRenderer");this.options=e||dh,this.options.renderer=this.options.renderer||new fk,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new EP}static parse(e,n){return new gM(n).parse(e)}static parseInline(e,n){return new gM(n).parseInline(e)}parse(e,n=!0){var s,i;let r="";for(let a=0;a<e.length;a++){const o=e[a];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[o.type]){const d=o,c=this.options.extensions.renderers[d.type].call({parser:this},d);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)){r+=c||"";continue}}const l=o;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let d=l,c=this.renderer.text(d);for(;a+1<e.length&&e[a+1].type==="text";)d=e[++a],c+=`
`+this.renderer.text(d);n?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):r+=c;continue}default:{const d='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return r}parseInline(e,n=this.renderer){var s,i;let r="";for(let a=0;a<e.length;a++){const o=e[a];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[o.type]){const d=this.options.extensions.renderers[o.type].call({parser:this},o);if(d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=d||"";continue}}const l=o;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const d='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return r}},B5,_w=(B5=class{constructor(t){ft(this,"options");ft(this,"block");this.options=t||dh}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Lu.lex:Lu.lexInline}provideParser(){return this.block?Vu.parse:Vu.parseInline}},ft(B5,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),B5),JEe=class{constructor(...t){ft(this,"defaults",wP());ft(this,"options",this.setOptions);ft(this,"parse",this.parseMarkdown(!0));ft(this,"parseInline",this.parseMarkdown(!1));ft(this,"Parser",Vu);ft(this,"Renderer",fk);ft(this,"TextRenderer",EP);ft(this,"Lexer",Lu);ft(this,"Tokenizer",ck);ft(this,"Hooks",_w);this.use(...t)}walkTokens(t,e){var r,s;let n=[];for(const i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{const a=i;for(const o of a.header)n=n.concat(this.walkTokens(o.tokens,e));for(const o of a.rows)for(const l of o)n=n.concat(this.walkTokens(l.tokens,e));break}case"list":{const a=i;n=n.concat(this.walkTokens(a.items,e));break}default:{const a=i;(s=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(o=>{const l=a[o].flat(1/0);n=n.concat(this.walkTokens(l,e))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r=ge({},n);if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const i=e.renderers[s.name];i?e.renderers[s.name]=function(...a){let o=s.renderer.apply(this,a);return o===!1&&(o=i.apply(this,a)),o}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=e[s.level];i?i.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),n.renderer){const s=this.defaults.renderer||new fk(this.defaults);for(const i in n.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const a=i,o=n.renderer[a],l=s[a];s[a]=(...d)=>{let c=o.apply(s,d);return c===!1&&(c=l.apply(s,d)),c||""}}r.renderer=s}if(n.tokenizer){const s=this.defaults.tokenizer||new ck(this.defaults);for(const i in n.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const a=i,o=n.tokenizer[a],l=s[a];s[a]=(...d)=>{let c=o.apply(s,d);return c===!1&&(c=l.apply(s,d)),c}}r.tokenizer=s}if(n.hooks){const s=this.defaults.hooks||new _w;for(const i in n.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const a=i,o=n.hooks[a],l=s[a];_w.passThroughHooks.has(i)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(o.call(s,d)).then(f=>l.call(s,f));const c=o.call(s,d);return l.call(s,c)}:s[a]=(...d)=>{let c=o.apply(s,d);return c===!1&&(c=l.apply(s,d)),c}}r.hooks=s}if(n.walkTokens){const s=this.defaults.walkTokens,i=n.walkTokens;r.walkTokens=function(a){let o=[];return o.push(i.call(this,a)),s&&(o=o.concat(s.call(this,a))),o}}this.defaults=ge(ge({},this.defaults),r)}),this}setOptions(t){return this.defaults=ge(ge({},this.defaults),t),this}lexer(t,e){return Lu.lex(t,e!=null?e:this.defaults)}parser(t,e){return Vu.parse(t,e!=null?e:this.defaults)}parseMarkdown(t){return(n,r)=>{const s=ge({},r),i=ge(ge({},this.defaults),s),a=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&s.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n=="undefined"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const o=i.hooks?i.hooks.provideLexer():t?Lu.lex:Lu.lexInline,l=i.hooks?i.hooks.provideParser():t?Vu.parse:Vu.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(d=>o(d,i)).then(d=>i.hooks?i.hooks.processAllTokens(d):d).then(d=>i.walkTokens?Promise.all(this.walkTokens(d,i.walkTokens)).then(()=>d):d).then(d=>l(d,i)).then(d=>i.hooks?i.hooks.postprocess(d):d).catch(a);try{i.hooks&&(n=i.hooks.preprocess(n));let d=o(n,i);i.hooks&&(d=i.hooks.processAllTokens(d)),i.walkTokens&&this.walkTokens(d,i.walkTokens);let c=l(d,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(d){return a(d)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+nl(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},Kp=new JEe;function Kn(t,e){return Kp.parse(t,e)}Kn.options=Kn.setOptions=function(t){return Kp.setOptions(t),Kn.defaults=Kp.defaults,aJ(Kn.defaults),Kn};Kn.getDefaults=wP;Kn.defaults=dh;Kn.use=function(...t){return Kp.use(...t),Kn.defaults=Kp.defaults,aJ(Kn.defaults),Kn};Kn.walkTokens=function(t,e){return Kp.walkTokens(t,e)};Kn.parseInline=Kp.parseInline;Kn.Parser=Vu;Kn.parser=Vu.parse;Kn.Renderer=fk;Kn.TextRenderer=EP;Kn.Lexer=Lu;Kn.lexer=Lu.lex;Kn.Tokenizer=ck;Kn.Hooks=_w;Kn.parse=Kn;Kn.options;Kn.setOptions;Kn.use;Kn.walkTokens;Kn.parseInline;Vu.parse;Lu.lex;function eDe(t){return Kn.parse(t,{gfm:!0,breaks:!0,async:!1})}function tDe(t){return t.split(`
`).filter(r=>/!\[.*\]\(.*\)/.test(r)||/\[.*\]\(.*\)/.test(r)||/(^|\s)\*.*\*(\s|$)/.test(r)||/(^|\s)_.*_(\s|$)/.test(r)||/(^|\s)\*\*.*\*\*(\s|$)/.test(r)||/(^|\s)__.*__(\s|$)/.test(r)||/(^|\s)~~.*~~(\s|$)/.test(r)||r.startsWith("![")||r.startsWith("#")||r.startsWith("> ")||r.startsWith("*")||r.startsWith("- ")||r.startsWith("1. ")||r.startsWith("```")||r.startsWith("`")||r.startsWith("[")||r.startsWith("---")).length>0}const nDe=wr.create({name:"contentPaste",addOptions(){return{enabled:!0,uploadFunction:null}},addProseMirrorPlugins(){const t=this;return[new Vn({key:new Hn("contentPaste"),props:{handleDOMEvents:{copy:(e,n)=>{var a,o;const r=window.getSelection();if(!r)return!1;const s=document.createElement("div");for(let l=0;l<r.rangeCount;l++)s.appendChild(r.getRangeAt(l).cloneContents());return s.querySelectorAll("img").forEach(l=>{const d=l.getAttribute("src");d&&d.startsWith("/")&&l.setAttribute("src",`${window.location.origin}${d}`)}),(a=n.clipboardData)==null||a.setData("text/html",s.innerHTML),(o=n.clipboardData)==null||o.setData("text/plain",r.toString()),n.preventDefault(),!0}},handlePaste:(e,n,r)=>{var h,m,g;if(!this.options.enabled)return!1;const s=Array.from(((h=n.clipboardData)==null?void 0:h.files)||[]),i=Array.from(s).filter(y=>y.type.startsWith("image/"));if(i.length>0)return L2(i,e,null,t.options),!0;const a=(m=n.clipboardData)==null?void 0:m.getData("text/html");if(a)return rDe(a,e,this.options),!0;const o=(g=n.clipboardData)==null?void 0:g.getData("text/plain");if(!o||!tDe(o))return!1;const l=eDe(o),d=document.createElement("div");d.innerHTML=l;const f=xp.fromSchema(e.state.schema).parseSlice(d,{preserveWhitespace:!0}),p=e.state.tr.replaceSelection(f);return e.dispatch(p),!0}}})]}});function rDe(t,e,n){return ue(this,null,function*(){const r=document.createElement("div");r.innerHTML=t;const s=r.querySelectorAll("img"),a=xp.fromSchema(e.state.schema).parseSlice(r,{preserveWhitespace:!0}),o=e.state.tr.replaceSelection(a);e.dispatch(o);const l=[];e.state.doc.descendants((c,f)=>{for(let p of s){const h=p.getAttribute("src");c.type.name==="image"&&c.attrs.src===h&&l.push([h,f])}});const d=Array.from(l).map(p=>ue(this,[p],function*([c,f]){if(c.startsWith("data:")||c.startsWith("blob:"))try{const m=yield(yield fetch(c)).blob(),g=new File([m],"pasted-data-image.png",{type:m.type});L2([g],e,f,n)}catch(h){console.error("Failed to process image:",h)}}));yield Promise.all(d)})}const vJ=Er.create({name:"tagItem",group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes(){return{tagId:{default:null,parseHTML:t=>t.getAttribute("data-tag-id"),renderHTML:t=>t.tagId?{"data-tag-id":t.tagId}:{}},tagLabel:{default:"tag",parseHTML:t=>t.getAttribute("data-tag-label"),renderHTML:t=>({"data-tag-label":t.tagLabel})}}},parseHTML(){return[{tag:"span.tag-item",getAttrs:t=>{const e=t;return{tagId:e.getAttribute("data-tag-id"),tagLabel:e.getAttribute("data-tag-label")||e.innerText.replace(/^#/,"")}}}]},renderHTML({HTMLAttributes:t}){return["span",Ln(t,{class:"tag-item"}),`#${t["data-tag-label"]}`]},renderText({node:t}){return`#${t.attrs.tagLabel||""}`},addCommands(){return{setTag:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}}}),sDe=EC({name:"tagSuggestion",char:"#",pluginKey:new Hn("tagSuggestion"),component:DC,addOptions(){return{tags:[]}},items:({query:t,editor:e})=>{const{tags:n}=e.extensionManager.extensions.find(i=>i.name==="tagSuggestion").options;let r=Ur(n),s=r.filter(i=>i.label.toLowerCase().startsWith(t.toLowerCase())).map(i=>ze(ge({},i),{display:i.label}));return t.length>0&&!r.some(i=>i.label.toLowerCase()===t.toLowerCase())&&s.push({display:`New tag: "${t}"`,label:t,isNew:!0}),s},command:({editor:t,range:e,props:n})=>{const r=ge({tagLabel:n.label},n.id&&!n.isNew&&{tagId:n.id});t.chain().focus().insertContentAt(e,[{type:vJ.name,attrs:r},{type:"text",text:" "}]).run()},tippyOptions:{placement:"bottom-start",offset:[0,8]},allowSpaces:!1,decorationTag:"span",decorationClass:"tag-suggestion-active"}),iDe=gZ.extend({addInputRules(){return this.options.levels.map(t=>{let e=new RegExp(`^(#{${t}})( |\\u00A0)$`);return R2({find:e,type:this.type,getAttributes:{level:t}})})}}),aDe={class:"lucide lucide-square-pen",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function oDe(t,e){return T(),R("svg",aDe,[...e[0]||(e[0]=[u("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},null,-1),u("path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"},null,-1)])])}const lDe=zt({name:"lucide-edit",render:oDe}),uDe={class:"lucide lucide-image-plus",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function dDe(t,e){return T(),R("svg",uDe,[...e[0]||(e[0]=[fr('<path d="M16 5h6"></path><path d="M19 2v6"></path><path d="M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5"></path><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path><circle cx="9" cy="9" r="2"></circle>',5)])])}const HN=zt({name:"lucide-image-plus",render:dDe}),cDe={class:"space-y-2"},fDe={class:"flex items-center gap-2"},pDe=["onDragstart","onDragover","onDragleave"],hDe=["onClick"],mDe=["src","alt"],gDe=["onClick"],vDe=["title"],yDe=["onBlur","onKeydown"],bDe={key:0,class:"flex flex-col items-center justify-center w-full h-full text-ink-gray-4 bg-surface-gray-1 rounded-[2px]"},xDe=["title"],_De=["src","alt"],wDe=["onClick"],kDe=["title"],SDe=["onBlur","onKeydown"],CDe={key:1,class:"text-p-sm text-ink-gray-5"},ADe={key:2,class:"flex flex-col items-center justify-center min-h-[200px]"},TDe={class:"text-ink-gray-4 mb-2"},$De={key:3},MDe={class:"mb-2 text-sm"},EDe={class:"w-full bg-gray-200 rounded h-2 overflow-hidden"},DDe={key:0,class:"mt-2 text-red-500 text-xs"},RDe={class:"flex justify-end gap-2"},PDe={key:0,class:"fixed inset-0 z-50 bg-gray-900/60 pointer-events-none flex items-center justify-center"},IDe=Je({__name:"ImageGroupUploadDialog",props:{modelValue:{type:Boolean},files:{},editor:{},mode:{default:"new"},existingImages:{},initialColumns:{}},emits:["update:modelValue","close","update:files","save"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.modelValue,set:H=>r("update:modelValue",H)}),i=Q(!1),a=Q(null),o=Q(null),l=Q(!1),d=Q(null),c=Q(""),f=Q(null),p=Q(!1),h=Q(4),m=Q(0),g=Q(0),y=Q(0),x=Q([]),_=Q([]),k=Q([]);et(()=>n.modelValue,H=>{if(H&&n.mode==="edit"){const Y=(n.existingImages||[]).map(F),B=(n.files||[]).map(I);k.value=[...Y,...B],n.initialColumns&&(h.value=n.initialColumns,l.value=!0)}else H&&n.mode==="new"&&(k.value=(n.files||[]).map(I),h.value=L(k.value.length),l.value=!0)},{immediate:!0}),et(()=>n.existingImages,H=>{if(n.modelValue&&n.mode==="edit"){const Y=(H||[]).map(F),B=(n.files||[]).map(I);k.value=[...Y,...B]}},{deep:!0}),et(()=>n.files,H=>{n.mode==="new"&&(k.value=(H||[]).map(I))},{deep:!0}),yt(()=>{window.addEventListener("dragover",G),window.addEventListener("drop",P),window.addEventListener("dragleave",ee)}),ks(()=>{window.removeEventListener("dragover",G),window.removeEventListener("drop",P),window.removeEventListener("dragleave",ee)});function w(){return ue(this,null,function*(){const H=k.value.filter(be=>be.type==="file"&&be.file).map(be=>be.file);k.value.filter(be=>be.type==="existing"&&be.existing).map(be=>be.existing);let Y=[];H.length>0&&(Y=yield le(H));const B=new Map;H.forEach((be,fe)=>{const me=Y[fe];me!=null&&me.success&&me.file&&B.set(be,{src:me.file.file_url||"",alt:me.file.file_name||""})});const ae=[];for(const be of k.value)if(be.type==="existing"&&be.existing)ae.push(be.existing);else if(be.type==="file"&&be.file){const fe=B.get(be.file);fe&&ae.push(fe)}r("save",{images:ae,columns:h.value}),p.value=!1,s.value=!1})}function S(){return ue(this,null,function*(){if(!n.files||n.files.length===0)return;const Y=(yield le(n.files)).filter(B=>B.success&&B.file).map(B=>{var ae,be;return{src:((ae=B.file)==null?void 0:ae.file_url)||"",alt:((be=B.file)==null?void 0:be.file_name)||""}});Y.length>1&&n.editor.chain().focus().setImageGroup({images:Y,columns:h.value}).run(),p.value=!1,s.value=!1,r("close")})}function C(){s.value=!1,r("close")}function A(H){if(k.value.splice(H,1),n.mode==="new"){const Y=k.value.filter(B=>B.type==="file"&&B.file).map(B=>B.file);r("update:files",Y)}}function M(){const H=document.createElement("input");H.type="file",H.accept="image/*",H.multiple=!0,H.onchange=Y=>{const B=Y.target.files;B&&E(Array.from(B))},H.click()}function E(H){const B=H.filter(fe=>fe.type.startsWith("image/")).map(I),ae=k.value.filter(fe=>fe.type==="file"&&fe.file).map(fe=>`${fe.file.name}-${fe.file.size}`),be=B.filter(fe=>!ae.includes(`${fe.file.name}-${fe.file.size}`));if(k.value.push(...be),n.mode==="new"){const fe=k.value.filter(me=>me.type==="file"&&me.file).map(me=>me.file);r("update:files",fe)}}function P(H){var B;H.preventDefault(),H.stopPropagation();const Y=Array.from(((B=H.dataTransfer)==null?void 0:B.files)||[]);if(Y.length)E(Y);else if(a.value!==null&&o.value!==null&&a.value!==o.value){const[ae]=k.value.splice(a.value,1);if(k.value.splice(o.value,0,ae),n.mode==="new"){const be=k.value.filter(fe=>fe.type==="file"&&fe.file).map(fe=>fe.file);r("update:files",be)}}i.value=!1,a.value=null,o.value=null}function I(H){return{type:"file",file:H,id:`file-${H.name}-${H.size}-${Date.now()}`}}function F(H){return{type:"existing",existing:H,id:`existing-${H.src}-${Date.now()}`}}function L(H){return H<=4?H:H%4===0?4:H%3===0?3:H>10?4:3}function z(){var Y;const H=n.editor.extensionManager.extensions.find(B=>B.name==="imageGroup");return(Y=H==null?void 0:H.options)==null?void 0:Y.uploadFunction}function N(H){const Y=URL.createObjectURL(H);return ks(()=>{URL.revokeObjectURL(Y)}),Y}function q(H){const Y=["image/heic","image/heif"],B=[".heic",".heif"],ae=Y.includes(H.type),be=B.some(fe=>{var me;return(me=H.name)==null?void 0:me.toLowerCase().endsWith(fe)});return!ae&&!be}function V(H,Y){H.preventDefault(),o.value=Y}function O(H){a.value=H}function X(){a.value=null,o.value=null}function j(H,Y){o.value===Y&&(o.value=null)}function U(H){return o.value===H&&a.value!==null&&a.value!==H}function G(H){H.preventDefault(),H.dataTransfer&&Array.from(H.dataTransfer.types).includes("Files")&&(i.value=!0)}function ee(H){(H.target===window||H.relatedTarget===null)&&(i.value=!1)}const ie=Z(()=>({gridTemplateColumns:`repeat(${h.value||4}, minmax(0, 1fr))`})),ne=Z({get:()=>{var H;return String((H=h.value)!=null?H:4)},set:H=>{h.value=+H}}),ce=[{label:"2 columns",value:"2"},{label:"3 columns",value:"3"},{label:"4 columns",value:"4"}];function oe(H,Y){d.value=H,c.value=Y,nr(()=>{f.value&&(f.value.focus(),f.value.select())})}function re(H,Y){var fe;const[B,ae]=H.split("-"),be=c.value.trim();B==="existing"?(fe=k.value[Y])!=null&&fe.existing&&(k.value[Y].existing.alt=be):B==="file"&&k.value[Y]&&(k.value[Y].alt=be),d.value=null,c.value=""}function te(){d.value=null,c.value=""}function K(H,Y){d.value===H&&re(H,Y)}function le(H){return ue(this,null,function*(){const Y=z();if(!Y)throw console.error("uploadFunction not found"),new Error("Upload function not found");p.value=!0,y.value=H.length,g.value=0,m.value=0,x.value=Array(H.length).fill(null),_.value=Array(H.length).fill(null);const B=H.map((be,fe)=>ue(this,null,function*(){try{const me=yield Y(be);return _.value[fe]={success:!0,file:me},{success:!0,file:me}}catch(me){const ye=me;return x.value[fe]=ye,_.value[fe]={success:!1,error:ye},{success:!1,error:ye}}finally{g.value++,m.value=Math.round(g.value/y.value*100)}}));return yield Promise.all(B)})}return(H,Y)=>(T(),R(xe,null,[b(tX,{modelValue:s.value,"onUpdate:modelValue":Y[8]||(Y[8]=B=>s.value=B),options:{title:n.mode==="edit"?"Edit Images":"Upload Images",size:"3xl"},onClose:Y[9]||(Y[9]=B=>H.$emit("close")),disableOutsideClickToClose:!0},{"body-content":D(()=>[u("div",cDe,[u("div",fDe,[b(J,{onClick:M},{prefix:D(()=>[b(v(HN),{class:"size-4"})]),default:D(()=>[Y[10]||(Y[10]=W(" Add images ",-1))]),_:1}),b(Qe,{id:"columns-select",options:ce,modelValue:ne.value,"onUpdate:modelValue":[Y[0]||(Y[0]=B=>ne.value=B),Y[1]||(Y[1]=B=>h.value=+B)],size:"sm",variant:"subtle",class:"w-28"},null,8,["modelValue"])]),k.value&&k.value.length?(T(),R("div",{key:0,class:"grid gap-px mb-4",style:rt(ie.value)},[(T(!0),R(xe,null,_e(k.value,(B,ae)=>{var be,fe,me,ye;return T(),R("div",{key:B.id,class:pe(["relative aspect-square w-full h-full overflow-hidden group bg-surface-white",{"ring-2 ring-primary-400 z-10":U(ae)}]),draggable:!0,onDragstart:Ee=>O(ae),onDragover:Ee=>V(Ee,ae),onDrop:Y[6]||(Y[6]=Ee=>P(Ee)),onDragend:X,onDragleave:Ee=>j(Ee,ae)},[u("button",{type:"button",class:"absolute top-1 right-1 z-10 bg-white/80 hover:bg-white rounded-full p-1 shadow transition-opacity opacity-0 group-hover:opacity-100 focus:opacity-100","aria-label":"Remove image",onClick:ut(Ee=>A(ae),["stop"])},[b(v(Eg),{class:"w-4 h-4 text-gray-700"})],8,hDe),B.type==="existing"?(T(),R(xe,{key:0},[u("img",{src:(be=B.existing)==null?void 0:be.src,alt:((fe=B.existing)==null?void 0:fe.alt)||"",class:"object-cover w-full h-full rounded-[2px]"},null,8,mDe),u("div",{class:pe(["absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent rounded-b-[2px] transition-opacity",d.value===`${B.type}-${ae}`?"opacity-100":"opacity-0 group-hover:opacity-100"])},[d.value!==`${B.type}-${ae}`?(T(),R("div",{key:0,class:"p-2 cursor-pointer",onClick:ut(Ee=>{var Re;return oe(`${B.type}-${ae}`,((Re=B.existing)==null?void 0:Re.alt)||"")},["stop"])},[u("div",{class:"text-white text-xs truncate",title:((me=B.existing)==null?void 0:me.alt)||"Click to add caption"},$(((ye=B.existing)==null?void 0:ye.alt)||"Add caption..."),9,vDe)],8,gDe)):(T(),R("div",{key:1,class:"p-2",onClick:Y[3]||(Y[3]=ut(()=>{},["stop"]))},[we(u("input",{ref_for:!0,ref:Ee=>f.value=Ee,"onUpdate:modelValue":Y[2]||(Y[2]=Ee=>c.value=Ee),onBlur:Ee=>K(`${B.type}-${ae}`,ae),onKeydown:[Ru(ut(Ee=>re(`${B.type}-${ae}`,ae),["prevent"]),["enter"]),Ru(te,["escape"])],class:"w-full text-xs bg-white/90 text-gray-900 px-1 py-0.5 rounded-sm border-none outline-none",placeholder:"Add caption...",maxlength:"200"},null,40,yDe),[[Rt,c.value]])]))],2)],64)):B.type==="file"&&B.file?(T(),R(xe,{key:1},[q(B.file)?B.file.type.startsWith("image/")?(T(),R(xe,{key:1},[u("img",{src:N(B.file),class:"object-cover w-full h-full rounded-[2px]",alt:B.alt||""},null,8,_De),u("div",{class:pe(["absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent rounded-b-[2px] transition-opacity",d.value===`${B.type}-${ae}`?"opacity-100":"opacity-0 group-hover:opacity-100"])},[d.value!==`${B.type}-${ae}`?(T(),R("div",{key:0,class:"p-2 cursor-pointer",onClick:ut(Ee=>oe(`${B.type}-${ae}`,B.alt||""),["stop"])},[u("div",{class:"text-white text-xs truncate",title:B.alt||"Click to add caption"},$(B.alt||"Add caption..."),9,kDe)],8,wDe)):(T(),R("div",{key:1,class:"p-2",onClick:Y[5]||(Y[5]=ut(()=>{},["stop"]))},[we(u("input",{ref_for:!0,ref:"captionInput","onUpdate:modelValue":Y[4]||(Y[4]=Ee=>c.value=Ee),onBlur:Ee=>K(`${B.type}-${ae}`,ae),onKeydown:[Ru(ut(Ee=>re(`${B.type}-${ae}`,ae),["prevent"]),["enter"]),Ru(te,["escape"])],class:"w-full text-xs bg-white/90 text-gray-900 px-1 py-0.5 rounded border-none outline-none",placeholder:"Add caption...",maxlength:"200"},null,40,SDe),[[Rt,c.value]])]))],2)],64)):se("",!0):(T(),R("div",bDe,[u("span",{class:"text-p-xs text-ink-gray-4 w-full text-center px-2 mt-1",title:B.file.name},$(B.file.name),9,xDe)]))],64)):se("",!0)],42,pDe)}),128))],4)):se("",!0),k.value&&k.value.length?(T(),R("div",CDe," Upload more images by dropping them anywhere in this window. Reorder images by dragging them. Hover over an image to edit caption. ")):(T(),R("div",ADe,[u("div",{class:"w-full flex flex-1 flex-col items-center justify-center border border-outline-gray-2 rounded-lg bg-surface-gray-1 h-full cursor-pointer transition hover:border-primary-400 hover:bg-primary-50 text-center",onClick:M,onDragover:Y[7]||(Y[7]=ut(()=>{},["prevent"])),onDrop:ut(P,["prevent"])},[u("div",TDe,[b(v(HN),{class:"size-6"})]),Y[11]||(Y[11]=u("div",{class:"text-ink-gray-5 text-sm font-medium"}," Drag & drop images here or click to select ",-1))],32)])),p.value?(T(),R("div",$De,[u("div",MDe," Uploading: "+$(g.value)+"/"+$(y.value),1),u("div",EDe,[u("div",{class:"bg-surface-gray-5 h-2 transition-all",style:rt({width:m.value+"%"})},null,4)]),x.value&&x.value.some(B=>B)?(T(),R("div",DDe," Some files failed to upload. ")):se("",!0)])):se("",!0)])]),actions:D(()=>[u("div",RDe,[b(J,{variant:"ghost",disabled:p.value,onClick:C},{default:D(()=>[...Y[12]||(Y[12]=[W(" Cancel ",-1)])]),_:1},8,["disabled"]),n.mode==="edit"?(T(),he(J,{key:0,variant:"solid",loading:p.value,onClick:w},{default:D(()=>[...Y[13]||(Y[13]=[W(" Save ",-1)])]),_:1},8,["loading"])):se("",!0),n.mode==="new"?(T(),he(J,{key:1,variant:"solid",loading:p.value,onClick:S},{default:D(()=>[...Y[14]||(Y[14]=[W(" Upload ",-1)])]),_:1},8,["loading"])):se("",!0)])]),_:1},8,["modelValue","options"]),(T(),he(jD,{to:"body"},[b(zS,{name:"fade","enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:D(()=>[i.value?(T(),R("div",PDe,[...Y[15]||(Y[15]=[u("div",{class:"text-ink-gray-1 text-base font-medium"}," Drop images anywhere ",-1)])])):se("",!0)]),_:1})]))],64))}}),ODe={class:"w-full"},LDe={key:0,class:"flex items-center mb-2 gap-2"},VDe=["onClick"],NDe=["src","alt","onClick"],jDe=["src","alt"],FDe={key:3,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent rounded-b-[2px] opacity-0 group-hover:opacity-100 transition-opacity"},BDe={class:"p-2"},zDe=["title"],UDe=Je({__name:"ImageGroupNodeView",props:{decorations:{},selected:{type:Boolean},updateAttributes:{type:Function},deleteNode:{type:Function},node:{},view:{},getPos:{type:Function},innerDecorations:{},editor:{},extension:{},HTMLAttributes:{}},setup(t){const e=t,n=Z(()=>e.node.attrs.columns||4),r=Z(()=>e.node.content.content||[]),s=Z(()=>({gridTemplateColumns:`repeat(${n.value}, minmax(0, 1fr))`})),i=Q(e.editor.isEditable),a=[{label:"2 columns",value:"2"},{label:"3 columns",value:"3"},{label:"4 columns",value:"4"}],o=Z({get:()=>String(n.value),set:k=>e.updateAttributes({columns:+k})}),l=Q(!1),d=Q(0),c=Z(()=>r.value.map(k=>({src:k.attrs.src,alt:k.attrs.alt||""}))),f=Q(!1),p=Q([]),h=Z(()=>r.value.map(k=>({src:k.attrs.src,alt:k.attrs.alt||""})));yt(()=>{const k=()=>{i.value=e.editor.isEditable};e.editor.on("update",k),ks(()=>{e.editor.off("update",k)})});function m(){p.value=[],f.value=!0}function g(){f.value=!1,p.value=[]}function y(k){return ue(this,null,function*(){e.editor.commands.command(({tr:w,state:S})=>{const C=e.getPos();if(typeof C=="number"){const A=S.doc.nodeAt(C);if(A&&A.type.name==="imageGroup"){const M=k.images.map(I=>S.schema.nodes.image.create({src:I.src,alt:I.alt})),E=ze(ge({},A.attrs),{columns:k.columns}),P=A.type.create(E,M);return w.replaceWith(C,C+A.nodeSize,P),!0}}return!1}),f.value=!1})}function x(k){e.editor.isEditable||(d.value=k,l.value=!0)}function _(k){const w=r.value.slice();w.splice(k,1),w.length===0?e.editor.commands.deleteNode("imageGroup"):(e.updateAttributes({}),e.editor.commands.command(({tr:S,state:C})=>{const A=e.getPos();if(typeof A=="number"){const M=C.doc.nodeAt(A);if(M&&M.type.name==="imageGroup"){const E=w.map(P=>C.schema.nodes.image.create(P.attrs));return S.replaceWith(A+1,A+1+M.content.size,E),!0}}return!1}))}return(k,w)=>(T(),he(v(TC),null,{default:D(()=>[u("div",ODe,[i.value?(T(),R("div",LDe,[b(J,{onClick:m},{prefix:D(()=>[b(v(lDe),{class:"size-4"})]),default:D(()=>[w[3]||(w[3]=W(" Edit ",-1))]),_:1}),b(Qe,{options:a,modelValue:o.value,"onUpdate:modelValue":w[0]||(w[0]=S=>o.value=S),size:"sm",variant:"subtle",class:"w-28"},null,8,["modelValue"])])):se("",!0),u("div",{class:"grid gap-px",style:rt(s.value)},[(T(!0),R(xe,null,_e(r.value,(S,C)=>(T(),R("div",{key:S.attrs.src+C,class:"relative aspect-square w-full h-full overflow-hidden bg-surface-white group"},[i.value?(T(),R("button",{key:0,type:"button",class:"absolute top-1 right-1 z-10 bg-white/80 hover:bg-white rounded-full p-1 shadow transition-opacity opacity-0 group-hover:opacity-100 focus:opacity-100","aria-label":"Remove image",onClick:ut(A=>_(C),["stop"])},[b(v(Eg),{class:"w-4 h-4 text-gray-700"})],8,VDe)):se("",!0),i.value?(T(),R("img",{key:2,src:S.attrs.src,alt:S.attrs.alt||"",class:"object-cover w-full h-full not-prose rounded-[2px]"},null,8,jDe)):(T(),R("img",{key:1,src:S.attrs.src,alt:S.attrs.alt||"",class:"object-cover w-full h-full not-prose cursor-pointer rounded-[2px]",onClick:A=>x(C)},null,8,NDe)),S.attrs.alt?(T(),R("div",FDe,[u("div",BDe,[u("div",{class:"text-white text-xs truncate",title:S.attrs.alt},$(S.attrs.alt),9,zDe)])])):se("",!0)]))),128))],4),l.value?(T(),he(FZ,{key:1,show:l.value,"onUpdate:show":w[1]||(w[1]=S=>l.value=S),images:c.value,initialIndex:d.value},null,8,["show","images","initialIndex"])):se("",!0),f.value?(T(),he(IDe,{key:2,modelValue:f.value,"onUpdate:modelValue":w[2]||(w[2]=S=>f.value=S),files:p.value,editor:e.editor,mode:"edit",existingImages:h.value,initialColumns:n.value,onClose:g,onSave:y},null,8,["modelValue","files","editor","existingImages","initialColumns"])):se("",!0),qe(k.$slots,"default")])]),_:3}))}}),HDe=Er.create({name:"imageGroup",group:"block",content:"image+",selectable:!0,draggable:!0,isolating:!0,addOptions(){return{uploadFunction:null,HTMLAttributes:{}}},addAttributes(){return{columns:{default:4}}},parseHTML(){return[{tag:'div[data-type="image-group"]',getAttrs:t=>{if(typeof t=="string")return{};const e=t;return{columns:e.getAttribute("data-columns")?Number(e.getAttribute("data-columns")):4}}}]},renderHTML({HTMLAttributes:t,node:e}){return["div",Ln({"data-type":"image-group","data-columns":e.attrs.columns},this.options.HTMLAttributes,t),0]},addNodeView(){return _b(UDe)},addCommands(){return{setImageGroup:t=>({commands:e})=>e.insertContent({type:this.name,attrs:{columns:t.columns||4},content:t.images.map(n=>({type:"image",attrs:n}))})}}});function qDe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",a="(?!struct)("+r+"|"+e.optional(s)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},d={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},c={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(d,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(s)+t.IDENT_RE,relevance:0},h=e.optional(s)+t.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],y=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],x=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],w={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:y},S={className:"function.dispatch",relevance:0,keywords:{_hint:x},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},C=[S,f,o,n,t.C_BLOCK_COMMENT_MODE,c,d],A={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:w,contains:C.concat([{begin:/\(/,end:/\)/,keywords:w,contains:C.concat(["self"]),relevance:0}]),relevance:0},M={className:"function",begin:"("+a+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:w,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:w,relevance:0},{begin:h,returnBegin:!0,contains:[p],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[d,c]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,d,c,o,{begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,d,c,o]}]},o,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:w,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(A,M,S,C,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:w,contains:["self",o]},{begin:t.IDENT_RE+"::",keywords:w},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function WDe(t){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=qDe(t),r=n.keywords;return r.type=[...r.type,...e.type],r.literal=[...r.literal,...e.literal],r.built_in=[...r.built_in,...e.built_in],r._hints=e._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function GDe(t){const e=t.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const s={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},i=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),a={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},o={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,s]};s.contains.push(o);const l={match:/\\"/},d={className:"string",begin:/'/,end:/'/},c={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},p=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],h=t.SHEBANG({binary:`(${p.join("|")})`,relevance:10}),m={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},g=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],y=["true","false"],x={match:/(\/[a-z._-]+)+/},_=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],k=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],w=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],S=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:g,literal:y,built_in:[..._,...k,"set","shopt",...w,...S]},contains:[h,t.SHEBANG(),m,f,i,a,x,o,l,d,c,n]}}function YDe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",a="("+r+"|"+e.optional(s)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},d={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},c={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(d,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(s)+t.IDENT_RE,relevance:0},h=e.optional(s)+t.IDENT_RE+"\\s*\\(",y={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},x=[f,o,n,t.C_BLOCK_COMMENT_MODE,c,d],_={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:y,contains:x.concat([{begin:/\(/,end:/\)/,keywords:y,contains:x.concat(["self"]),relevance:0}]),relevance:0},k={begin:"("+a+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:y,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:y,relevance:0},{begin:h,returnBegin:!0,contains:[t.inherit(p,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:y,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,d,c,o,{begin:/\(/,end:/\)/,keywords:y,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,d,c,o]}]},o,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:y,disableAutodetect:!0,illegal:"</",contains:[].concat(_,k,x,[f,{begin:t.IDENT_RE+"::",keywords:y},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:f,strings:d,keywords:y}}}function KDe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",a="(?!struct)("+r+"|"+e.optional(s)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},d={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},c={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(d,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(s)+t.IDENT_RE,relevance:0},h=e.optional(s)+t.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],y=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],x=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],w={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:y},S={className:"function.dispatch",relevance:0,keywords:{_hint:x},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},C=[S,f,o,n,t.C_BLOCK_COMMENT_MODE,c,d],A={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:w,contains:C.concat([{begin:/\(/,end:/\)/,keywords:w,contains:C.concat(["self"]),relevance:0}]),relevance:0},M={className:"function",begin:"("+a+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:w,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:w,relevance:0},{begin:h,returnBegin:!0,contains:[p],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[d,c]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,d,c,o,{begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,d,c,o]}]},o,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:w,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(A,M,S,C,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:w,contains:["self",o]},{begin:t.IDENT_RE+"::",keywords:w},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function XDe(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],s=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],i=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],a={keyword:s.concat(i),built_in:e,literal:r},o=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},d={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},c={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=t.inherit(c,{illegal:/\n/}),p={className:"subst",begin:/\{/,end:/\}/,keywords:a},h=t.inherit(p,{illegal:/\n/}),m={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,h]},g={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},p]},y=t.inherit(g,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]});p.contains=[g,m,c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.C_BLOCK_COMMENT_MODE],h.contains=[y,m,f,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const x={variants:[d,g,m,c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},_={begin:"<",end:">",contains:[{beginKeywords:"in out"},o]},k=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",w={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:a,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},x,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},o,_,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,_,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+k+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:a,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,_],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,relevance:0,contains:[x,l,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},w]}}const QDe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),ZDe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],JDe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],eRe=[...ZDe,...JDe],tRe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),nRe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),rRe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),sRe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function iRe(t){const e=t.regex,n=QDe(t),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",i=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+nRe.join("|")+")"},{begin:":(:)?("+rRe.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+sRe.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:i},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:tRe.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+eRe.join("|")+")\\b"}]}}function aRe(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function oRe(t){const i={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:i,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,illegal:/["']/}]}]}}function lRe(t){const e=t.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(n,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function uRe(t){const e=t.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},r=t.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const s={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},a={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},o={begin:/\[/,end:/\]/,contains:[r,i,s,a,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,d=/"(\\"|[^"])*"/,c=/'[^']*'/,f=e.either(l,d,c),p=e.concat(f,"(\\s*\\.\\s*",f,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:p,className:"attr",starts:{end:/$/,contains:[r,o,i,s,a,n]}}]}}var vm="[0-9](_*[0-9])*",Ax=`\\.(${vm})`,Tx="[0-9a-fA-F](_*[0-9a-fA-F])*",qN={className:"number",variants:[{begin:`(\\b(${vm})((${Ax})|\\.)?|(${Ax}))[eE][+-]?(${vm})[fFdD]?\\b`},{begin:`\\b(${vm})((${Ax})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Ax})[fFdD]?\\b`},{begin:`\\b(${vm})[fFdD]\\b`},{begin:`\\b0[xX]((${Tx})\\.?|(${Tx})?\\.(${Tx}))[pP][+-]?(${vm})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Tx})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function yJ(t,e,n){return n===-1?"":t.replace(e,r=>yJ(t,e,n-1))}function dRe(t){const e=t.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+yJ("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},d={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},c={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[t.BACKSLASH_ESCAPE]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[c,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",t.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,qN,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},qN,d]}}const WN="[A-Za-z$_][0-9A-Za-z$_]*",cRe=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],fRe=["true","false","null","undefined","NaN","Infinity"],bJ=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],xJ=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],_J=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],pRe=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],hRe=[].concat(_J,bJ,xJ);function mRe(t){const e=t.regex,n=(O,{after:X})=>{const j="</"+O[0].slice(1);return O.input.indexOf(j,X)!==-1},r=WN,s={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(O,X)=>{const j=O[0].length+O.index,U=O.input[j];if(U==="<"||U===","){X.ignoreMatch();return}U===">"&&(n(O,{after:j})||X.ignoreMatch());let G;const ee=O.input.substring(j);if(G=ee.match(/^\s*=/)){X.ignoreMatch();return}if((G=ee.match(/^\s+extends\s+/))&&G.index===0){X.ignoreMatch();return}}},o={$pattern:WN,keyword:cRe,literal:fRe,built_in:hRe,"variable.language":pRe},l="[0-9](_?[0-9])*",d=`\\.(${l})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${c})((${d})|\\.)?|(${d}))[eE][+-]?(${l})\\b`},{begin:`\\b(${c})\\b((${d})\\b|\\.)?|(${d})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"graphql"}},y={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},_={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},k=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,y,{match:/\$\d+/},f];p.contains=k.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(k)});const w=[].concat(_,p.contains),S=w.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(w)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S},A={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},M={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...bJ,...xJ]}},E={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},I={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function F(O){return e.concat("(?!",O.join("|"),")")}const L={match:e.concat(/\b/,F([..._J,"super","import"].map(O=>`${O}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},z={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},N={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},q="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",V={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(q)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:S,CLASS_REFERENCE:M},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),E,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,y,_,{match:/\$\d+/},f,M,{scope:"attr",match:r+e.lookahead(":"),relevance:0},V,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[_,t.REGEXP_MODE,{className:"function",begin:q,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:i},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},L,I,A,N,{match:/\$[(.]/}]}}function gRe(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],s={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,s,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var ym="[0-9](_*[0-9])*",$x=`\\.(${ym})`,Mx="[0-9a-fA-F](_*[0-9a-fA-F])*",vRe={className:"number",variants:[{begin:`(\\b(${ym})((${$x})|\\.)?|(${$x}))[eE][+-]?(${ym})[fFdD]?\\b`},{begin:`\\b(${ym})((${$x})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${$x})[fFdD]?\\b`},{begin:`\\b(${ym})[fFdD]\\b`},{begin:`\\b0[xX]((${Mx})\\.?|(${Mx})?\\.(${Mx}))[pP][+-]?(${ym})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Mx})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function yRe(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},s={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},i={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},a={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[i,s]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,i,s]}]};s.contains.push(a);const o={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(a,{className:"string"}),"self"]}]},d=vRe,c=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},p=f;return p.variants[1].contains=[f],f.variants[1].contains=[p],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,c,n,r,o,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,t.C_LINE_COMMENT_MODE,c],relevance:0},t.C_LINE_COMMENT_MODE,c,o,l,a,t.C_NUMBER_MODE]},c]},{begin:[/class|interface|trait/,/\s+/,t.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},o,l]},a,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},d]}}const bRe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),xRe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],_Re=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],wRe=[...xRe,..._Re],kRe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),wJ=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),kJ=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),SRe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),CRe=wJ.concat(kJ).sort().reverse();function ARe(t){const e=bRe(t),n=CRe,r="and or not only",s="[\\w-]+",i="("+s+"|@\\{"+s+"\\})",a=[],o=[],l=function(k){return{className:"string",begin:"~?"+k+".*?"+k}},d=function(k,w,S){return{className:k,begin:w,relevance:S}},c={$pattern:/[a-z-]+/,keyword:r,attribute:kRe.join(" ")},f={begin:"\\(",end:"\\)",contains:o,keywords:c,relevance:0};o.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,l("'"),l('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,f,d("variable","@@?"+s,10),d("variable","@\\{"+s+"\\}"),d("built_in","~?`[^`]*?`"),{className:"attribute",begin:s+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const p=o.concat({begin:/\{/,end:/\}/,contains:a}),h={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(o)},m={begin:i+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+SRe.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:o}}]},g={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:c,returnEnd:!0,contains:o,relevance:0}},y={className:"variable",variants:[{begin:"@"+s+"\\s*:",relevance:15},{begin:"@"+s}],starts:{end:"[;}]",returnEnd:!0,contains:p}},x={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:i,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,h,d("keyword","all\\b"),d("variable","@\\{"+s+"\\}"),{begin:"\\b("+wRe.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,d("selector-tag",i,0),d("selector-id","#"+i),d("selector-class","\\."+i,0),d("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+wJ.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+kJ.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:p},{begin:"!important"},e.FUNCTION_DISPATCH]},_={begin:s+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[x]};return a.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,g,y,_,m,x,h,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:a}}function TRe(t){const e="\\[=*\\[",n="\\]=*\\]",r={begin:e,end:n,contains:["self"]},s=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:s.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:s}].concat(s)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:n,contains:[r],relevance:5}])}}function $Re(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,n]},s={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},a={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,n,r,s,i,a]}}function MRe(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},s={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},a={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},o=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,o,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},d={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},c={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=t.inherit(d,{contains:[]}),p=t.inherit(c,{contains:[]});d.contains.push(p),c.contains.push(f);let h=[n,l];return[d,c,f,p].forEach(x=>{x.contains=x.contains.concat(h)}),h=h.concat(d,c),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},n,i,d,c,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},s,r,l,a,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function ERe(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,o={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:o,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}function DRe(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,s={$pattern:/[\w.]+/,keyword:n.join(" ")},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:s},a={begin:/->\{/,end:/\}/},o={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[o]},d={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},c=[t.BACKSLASH_ESCAPE,i,l],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],p=(g,y,x="\\1")=>{const _=x==="\\1"?x:e.concat(x,y);return e.concat(e.concat("(?:",g,")"),y,/(?:\\.|[^\\\/])*?/,_,/(?:\\.|[^\\\/])*?/,x,r)},h=(g,y,x)=>e.concat(e.concat("(?:",g,")"),y,/(?:\\.|[^\\\/])*?/,x,r),m=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),a,{className:"string",contains:c,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},d,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:p("s|tr|y",e.either(...f,{capture:!0}))},{begin:p("s|tr|y","\\(","\\)")},{begin:p("s|tr|y","\\[","\\]")},{begin:p("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:h("(?:m|qr)?",/\//,/\//)},{begin:h("m|qr",e.either(...f,{capture:!0}),/\1/)},{begin:h("m|qr",/\(/,/\)/)},{begin:h("m|qr",/\[/,/\]/)},{begin:h("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,o]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,o,d]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=m,a.contains=m,{name:"Perl",aliases:["pl","pm"],keywords:s,contains:m}}function RRe(t){const e=t.regex,n=/(?![A-Za-z0-9])(?![$])/,r=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),s=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),i=e.concat(/[A-Z]+/,n),a={scope:"variable",match:"\\$+"+r},o={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},d=t.inherit(t.APOS_STRING_MODE,{illegal:null}),c=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(l)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(z,N)=>{N.data._beginMatch=z[1]||z[2]},"on:end":(z,N)=>{N.data._beginMatch!==z[1]&&N.ignoreMatch()}},p=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),h=`[ 	
]`,m={scope:"string",variants:[c,d,f,p]},g={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},y=["false","null","true"],x=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],_=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],w={keyword:x,literal:(z=>{const N=[];return z.forEach(q=>{N.push(q),q.toLowerCase()===q?N.push(q.toUpperCase()):N.push(q.toLowerCase())}),N})(y),built_in:_},S=z=>z.map(N=>N.replace(/\|\d+$/,"")),C={variants:[{match:[/new/,e.concat(h,"+"),e.concat("(?!",S(_).join("\\b|"),"\\b)"),s],scope:{1:"keyword",4:"title.class"}}]},A=e.concat(r,"\\b(?!\\()"),M={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),A],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[s,e.concat(/::/,e.lookahead(/(?!class\b)/)),A],scope:{1:"title.class",3:"variable.constant"}},{match:[s,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[s,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},E={scope:"attr",match:e.concat(r,e.lookahead(":"),e.lookahead(/(?!::)/))},P={relevance:0,begin:/\(/,end:/\)/,keywords:w,contains:[E,a,M,t.C_BLOCK_COMMENT_MODE,m,g,C]},I={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",S(x).join("\\b|"),"|",S(_).join("\\b|"),"\\b)"),r,e.concat(h,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[P]};P.contains.push(I);const F=[E,M,t.C_BLOCK_COMMENT_MODE,m,g,C],L={begin:e.concat(/#\[\s*\\?/,e.either(s,i)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:y,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:y,keyword:["new","array"]},contains:["self",...F]},...F,{scope:"meta",variants:[{match:s},{match:i}]}]};return{case_insensitive:!1,keywords:w,contains:[L,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},o,{scope:"variable.language",match:/\$this\b/},a,I,M,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},C,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:w,contains:["self",L,a,M,t.C_BLOCK_COMMENT_MODE,m,g]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},m,g]}}function PRe(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function IRe(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function ORe(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],o={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},d={className:"subst",begin:/\{/,end:/\}/,keywords:o,illegal:/#/},c={begin:/\{\{/,relevance:0},f={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l,c,d]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l,c,d]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,c,d]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,c,d]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},p="[0-9](_?[0-9])*",h=`(\\b(${p}))?\\.(${p})|\\b(${p})\\.`,m=`\\b|${r.join("|")}`,g={className:"number",relevance:0,variants:[{begin:`(\\b(${p})|(${h}))[eE][+-]?(${p})[jJ]?(?=${m})`},{begin:`(${h})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${m})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${m})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${m})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${m})`},{begin:`\\b(${p})[jJ](?=${m})`}]},y={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:o,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},x={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:["self",l,g,f,t.HASH_COMMENT_MODE]}]};return d.contains=[f,g,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:o,illegal:/(<\/|\?)|=>/,contains:[l,g,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,y,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[x]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[g,x,f]}]}}function LRe(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function VRe(t){const e=t.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),s=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[s,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[i,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:s},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function NRe(t){const e=t.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),s=e.concat(r,/(::\w+)*/),a={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},o={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},d=[t.COMMENT("#","$",{contains:[o]}),t.COMMENT("^=begin","^=end",{contains:[o],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],c={className:"subst",begin:/#\{/,end:/\}/,keywords:a},f={className:"string",contains:[t.BACKSLASH_ESCAPE,c],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,c]})]}]},p="[1-9](_?[0-9])*|0",h="[0-9](_?[0-9])*",m={className:"number",relevance:0,variants:[{begin:`\\b(${p})(\\.(${h}))?([eE][+-]?(${h})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},g={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:a}]},C=[f,{variants:[{match:[/class\s+/,s,/\s+<\s+/,s]},{match:[/\b(class|module)\s+/,s]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:a},{match:[/(include|extend)\s+/,s],scope:{2:"title.class"},keywords:a},{relevance:0,match:[s,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[g]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:n}],relevance:0},m,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:a},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,c],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,d),relevance:0}].concat(l,d);c.contains=C,g.contains=C;const P=[{begin:/^\s*=>/,starts:{end:"$",contains:C}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:a,contains:C}}];return d.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:a,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(P).concat(d).concat(C)}}function jRe(t){const e=t.regex,n=/(r#)?/,r=e.concat(n,t.UNDERSCORE_IDENT_RE),s=e.concat(n,t.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,s,e.lookahead(/\s*\(/))},a="([ui](8|16|32|64|128|size)|f(32|64))?",o=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],d=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],c=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:c,keyword:o,literal:l,built_in:d},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+a},{begin:"\\b0o([0-7_]+)"+a},{begin:"\\b0x([A-Fa-f0-9_]+)"+a},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+a}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:d,type:c}},{className:"punctuation",begin:"->"},i]}}const FRe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),BRe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],zRe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],URe=[...BRe,...zRe],HRe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),qRe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),WRe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),GRe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function YRe(t){const e=FRe(t),n=WRe,r=qRe,s="@[a-z-]+",i="and or not only",o={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+URe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},o,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+GRe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,o,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:s,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:HRe.join(" ")},contains:[{begin:s,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},o,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function KRe(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function XRe(t){const e=t.regex,n=t.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},s={begin:/"/,end:/"/,contains:[{match:/""/}]},i=["true","false","unknown"],a=["double precision","large object","with timezone","without timezone"],o=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],d=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],c=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],p=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],h=c,m=[...d,...l].filter(S=>!c.includes(S)),g={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},y={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},x={match:e.concat(/\b/,e.either(...h),/\s*\(/),relevance:0,keywords:{built_in:h}};function _(S){return e.concat(/\b/,e.either(...S.map(C=>C.replace(/\s+/,"\\s+"))),/\b/)}const k={scope:"keyword",match:_(p),relevance:0};function w(S,{exceptions:C,when:A}={}){const M=A;return C=C||[],S.map(E=>E.match(/\|\d+$/)||C.includes(E)?E:M(E)?`${E}|0`:E)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:w(m,{when:S=>S.length<3}),literal:i,type:o,built_in:f},contains:[{scope:"type",match:_(a)},k,x,g,r,s,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,y]}}function SJ(t){return t?typeof t=="string"?t:t.source:null}function yv(t){return tr("(?=",t,")")}function tr(...t){return t.map(n=>SJ(n)).join("")}function QRe(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function pi(...t){return"("+(QRe(t).capture?"":"?:")+t.map(r=>SJ(r)).join("|")+")"}const DP=t=>tr(/\b/,t,/\w$/.test(t)?/\b/:/\B/),ZRe=["Protocol","Type"].map(DP),GN=["init","self"].map(DP),JRe=["Any","Self"],B4=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],YN=["false","nil","true"],ePe=["assignment","associativity","higherThan","left","lowerThan","none","right"],tPe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],KN=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],CJ=pi(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),AJ=pi(CJ,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),z4=tr(CJ,AJ,"*"),TJ=pi(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),pk=pi(TJ,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),rl=tr(TJ,pk,"*"),Ex=tr(/[A-Z]/,pk,"*"),nPe=["attached","autoclosure",tr(/convention\(/,pi("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",tr(/objc\(/,rl,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],rPe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function sPe(t){const e={match:/\s+/,relevance:0},n=t.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[t.C_LINE_COMMENT_MODE,n],s={match:[/\./,pi(...ZRe,...GN)],className:{2:"keyword"}},i={match:tr(/\./,pi(...B4)),relevance:0},a=B4.filter(be=>typeof be=="string").concat(["_|0"]),o=B4.filter(be=>typeof be!="string").concat(JRe).map(DP),l={variants:[{className:"keyword",match:pi(...o,...GN)}]},d={$pattern:pi(/\b\w+/,/#\w+/),keyword:a.concat(tPe),literal:YN},c=[s,i,l],f={match:tr(/\./,pi(...KN)),relevance:0},p={className:"built_in",match:tr(/\b/,pi(...KN),/(?=\()/)},h=[f,p],m={match:/->/,relevance:0},g={className:"operator",relevance:0,variants:[{match:z4},{match:`\\.(\\.|${AJ})+`}]},y=[m,g],x="([0-9]_*)+",_="([0-9a-fA-F]_*)+",k={className:"number",relevance:0,variants:[{match:`\\b(${x})(\\.(${x}))?([eE][+-]?(${x}))?\\b`},{match:`\\b0x(${_})(\\.(${_}))?([pP][+-]?(${x}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},w=(be="")=>({className:"subst",variants:[{match:tr(/\\/,be,/[0\\tnr"']/)},{match:tr(/\\/,be,/u\{[0-9a-fA-F]{1,8}\}/)}]}),S=(be="")=>({className:"subst",match:tr(/\\/,be,/[\t ]*(?:[\r\n]|\r\n)/)}),C=(be="")=>({className:"subst",label:"interpol",begin:tr(/\\/,be,/\(/),end:/\)/}),A=(be="")=>({begin:tr(be,/"""/),end:tr(/"""/,be),contains:[w(be),S(be),C(be)]}),M=(be="")=>({begin:tr(be,/"/),end:tr(/"/,be),contains:[w(be),C(be)]}),E={className:"string",variants:[A(),A("#"),A("##"),A("###"),M(),M("#"),M("##"),M("###")]},P=[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}],I={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:P},F=be=>{const fe=tr(be,/\//),me=tr(/\//,be);return{begin:fe,end:me,contains:[...P,{scope:"comment",begin:`#(?!.*${me})`,end:/$/}]}},L={scope:"regexp",variants:[F("###"),F("##"),F("#"),I]},z={match:tr(/`/,rl,/`/)},N={className:"variable",match:/\$\d+/},q={className:"variable",match:`\\$${pk}+`},V=[z,N,q],O={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:rPe,contains:[...y,k,E]}]}},X={scope:"keyword",match:tr(/@/,pi(...nPe),yv(pi(/\(/,/\s+/)))},j={scope:"meta",match:tr(/@/,rl)},U=[O,X,j],G={match:yv(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:tr(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,pk,"+")},{className:"type",match:Ex,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:tr(/\s+&\s+/,yv(Ex)),relevance:0}]},ee={begin:/</,end:/>/,keywords:d,contains:[...r,...c,...U,m,G]};G.contains.push(ee);const ie={match:tr(rl,/\s*:/),keywords:"_|0",relevance:0},ne={begin:/\(/,end:/\)/,relevance:0,keywords:d,contains:["self",ie,...r,L,...c,...h,...y,k,E,...V,...U,G]},ce={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,G]},oe={begin:pi(yv(tr(rl,/\s*:/)),yv(tr(rl,/\s+/,rl,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:rl}]},re={begin:/\(/,end:/\)/,keywords:d,contains:[oe,...r,...c,...y,k,E,...U,G,ne],endsParent:!0,illegal:/["']/},te={match:[/(func|macro)/,/\s+/,pi(z.match,rl,z4)],className:{1:"keyword",3:"title.function"},contains:[ce,re,e],illegal:[/\[/,/%/]},K={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[ce,re,e],illegal:/\[|%/},le={match:[/operator/,/\s+/,z4],className:{1:"keyword",3:"title"}},H={begin:[/precedencegroup/,/\s+/,Ex],className:{1:"keyword",3:"title"},contains:[G],keywords:[...ePe,...YN],end:/}/},Y={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},B={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},ae={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,rl,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:d,contains:[ce,...c,{begin:/:/,end:/\{/,keywords:d,contains:[{scope:"title.class.inherited",match:Ex},...c],relevance:0}]};for(const be of E.variants){const fe=be.contains.find(ye=>ye.label==="interpol");fe.keywords=d;const me=[...c,...h,...y,k,E,...V];fe.contains=[...me,{begin:/\(/,end:/\)/,contains:["self",...me]}]}return{name:"Swift",keywords:d,contains:[...r,te,K,Y,B,ae,le,H,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},L,...c,...h,...y,k,E,...V,...U,G,ne]}}const hk="[A-Za-z$_][0-9A-Za-z$_]*",$J=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],MJ=["true","false","null","undefined","NaN","Infinity"],EJ=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],DJ=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],RJ=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],PJ=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],IJ=[].concat(RJ,EJ,DJ);function iPe(t){const e=t.regex,n=(O,{after:X})=>{const j="</"+O[0].slice(1);return O.input.indexOf(j,X)!==-1},r=hk,s={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(O,X)=>{const j=O[0].length+O.index,U=O.input[j];if(U==="<"||U===","){X.ignoreMatch();return}U===">"&&(n(O,{after:j})||X.ignoreMatch());let G;const ee=O.input.substring(j);if(G=ee.match(/^\s*=/)){X.ignoreMatch();return}if((G=ee.match(/^\s+extends\s+/))&&G.index===0){X.ignoreMatch();return}}},o={$pattern:hk,keyword:$J,literal:MJ,built_in:IJ,"variable.language":PJ},l="[0-9](_?[0-9])*",d=`\\.(${l})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${c})((${d})|\\.)?|(${d}))[eE][+-]?(${l})\\b`},{begin:`\\b(${c})\\b((${d})\\b|\\.)?|(${d})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"graphql"}},y={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},_={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},k=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,y,{match:/\$\d+/},f];p.contains=k.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(k)});const w=[].concat(_,p.contains),S=w.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(w)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S},A={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},M={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...EJ,...DJ]}},E={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},I={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function F(O){return e.concat("(?!",O.join("|"),")")}const L={match:e.concat(/\b/,F([...RJ,"super","import"].map(O=>`${O}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},z={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},N={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},q="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",V={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(q)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:S,CLASS_REFERENCE:M},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),E,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,y,_,{match:/\$\d+/},f,M,{scope:"attr",match:r+e.lookahead(":"),relevance:0},V,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[_,t.REGEXP_MODE,{className:"function",begin:q,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:S}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:i},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},L,I,A,N,{match:/\$[(.]/}]}}function aPe(t){const e=t.regex,n=iPe(t),r=hk,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},a={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[n.exports.CLASS_REFERENCE]},o={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],d={$pattern:hk,keyword:$J.concat(l),literal:MJ,built_in:IJ.concat(s),"variable.language":PJ},c={className:"meta",begin:"@"+r},f=(g,y,x)=>{const _=g.contains.findIndex(k=>k.label===y);if(_===-1)throw new Error("can not find mode to replace");g.contains.splice(_,1,x)};Object.assign(n.keywords,d),n.exports.PARAMS_CONTAINS.push(c);const p=n.contains.find(g=>g.scope==="attr"),h=Object.assign({},p,{match:e.concat(r,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,p,h]),n.contains=n.contains.concat([c,i,a,h]),f(n,"shebang",t.SHEBANG()),f(n,"use_strict",o);const m=n.contains.find(g=>g.label==="func.def");return m.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function oPe(t){const e=t.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},s=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,a=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,o=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:e.concat(/# */,e.either(i,s),/ *#/)},{begin:e.concat(/# */,o,/ *#/)},{begin:e.concat(/# */,a,/ *#/)},{begin:e.concat(/# */,e.either(i,s),/ +/,e.either(a,o),/ *#/)}]},d={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},c={className:"label",begin:/^\w+:/},f=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),p=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,d,c,f,p,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[p]}]}}function lPe(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const n=t.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],s={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},i={className:"variable",begin:/\$[\w_]+/},a={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},o={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},d={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},i,a,s,t.QUOTE_STRING_MODE,l,d,o]}}function uPe(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=t.inherit(i,{begin:/\(/,end:/\)/}),o=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),d={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,l,o,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,a,l,o]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[d],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[d],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:d}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function dPe(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},s={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},a={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,s]},o=t.inherit(a,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),p={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},h={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},m={begin:/\{/,end:/\}/,contains:[h],illegal:"\\n",relevance:0},g={begin:"\\[",end:"\\]",contains:[h],illegal:"\\n",relevance:0},y=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},p,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},m,g,i,a],x=[...y];return x.pop(),x.push(o),h.contains=x,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:y}}const cPe={arduino:WDe,bash:GDe,c:YDe,cpp:KDe,csharp:XDe,css:iRe,diff:aRe,go:oRe,graphql:lRe,ini:uRe,java:dRe,javascript:mRe,json:gRe,kotlin:yRe,less:ARe,lua:TRe,makefile:$Re,markdown:MRe,objectivec:ERe,perl:DRe,php:RRe,"php-template":PRe,plaintext:IRe,python:ORe,"python-repl":LRe,r:VRe,ruby:NRe,rust:jRe,scss:YRe,shell:KRe,sql:XRe,swift:sPe,typescript:aPe,vbnet:oPe,wasm:lPe,xml:uPe,yaml:dPe};function OJ(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],r=typeof n;(r==="object"||r==="function")&&!Object.isFrozen(n)&&OJ(n)}),t}let XN=class{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function LJ(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function nc(t,...e){const n=Object.create(null);for(const r in t)n[r]=t[r];return e.forEach(function(r){for(const s in r)n[s]=r[s]}),n}const fPe="</span>",QN=t=>!!t.scope,pPe=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((r,s)=>`${r}${"_".repeat(s+1)}`)].join(" ")}return`${e}${t}`};let hPe=class{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=LJ(e)}openNode(e){if(!QN(e))return;const n=pPe(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){QN(e)&&(this.buffer+=fPe)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}};const ZN=(t={})=>{const e={children:[]};return Object.assign(e,t),e};let mPe=class VJ{constructor(){this.rootNode=ZN(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=ZN({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(r=>this._walk(e,r)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{VJ._collapse(n)}))}},gPe=class extends mPe{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const r=e.root;n&&(r.scope=`language:${n}`),this.add(r)}toHTML(){return new hPe(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}};function o1(t){return t?typeof t=="string"?t:t.source:null}function NJ(t){return ch("(?=",t,")")}function vPe(t){return ch("(?:",t,")*")}function yPe(t){return ch("(?:",t,")?")}function ch(...t){return t.map(n=>o1(n)).join("")}function bPe(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function RP(...t){return"("+(bPe(t).capture?"":"?:")+t.map(r=>o1(r)).join("|")+")"}function jJ(t){return new RegExp(t.toString()+"|").exec("").length-1}function xPe(t,e){const n=t&&t.exec(e);return n&&n.index===0}const _Pe=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function PP(t,{joinWith:e}){let n=0;return t.map(r=>{n+=1;const s=n;let i=o1(r),a="";for(;i.length>0;){const o=_Pe.exec(i);if(!o){a+=i;break}a+=i.substring(0,o.index),i=i.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+s):(a+=o[0],o[0]==="("&&n++)}return a}).map(r=>`(${r})`).join(e)}const wPe=/\b\B/,FJ="[a-zA-Z]\\w*",IP="[a-zA-Z_]\\w*",BJ="\\b\\d+(\\.\\d+)?",zJ="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",UJ="\\b(0b[01]+)",kPe="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SPe=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=ch(e,/.*\b/,t.binary,/\b.*/)),nc({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},t)},l1={begin:"\\\\[\\s\\S]",relevance:0},CPe={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[l1]},APe={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[l1]},TPe={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},OC=function(t,e,n={}){const r=nc({scope:"comment",begin:t,end:e,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=RP("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:ch(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},$Pe=OC("//","$"),MPe=OC("/\\*","\\*/"),EPe=OC("#","$"),DPe={scope:"number",begin:BJ,relevance:0},RPe={scope:"number",begin:zJ,relevance:0},PPe={scope:"number",begin:UJ,relevance:0},IPe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[l1,{begin:/\[/,end:/\]/,relevance:0,contains:[l1]}]},OPe={scope:"title",begin:FJ,relevance:0},LPe={scope:"title",begin:IP,relevance:0},VPe={begin:"\\.\\s*"+IP,relevance:0},NPe=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var Dx=Object.freeze({__proto__:null,APOS_STRING_MODE:CPe,BACKSLASH_ESCAPE:l1,BINARY_NUMBER_MODE:PPe,BINARY_NUMBER_RE:UJ,COMMENT:OC,C_BLOCK_COMMENT_MODE:MPe,C_LINE_COMMENT_MODE:$Pe,C_NUMBER_MODE:RPe,C_NUMBER_RE:zJ,END_SAME_AS_BEGIN:NPe,HASH_COMMENT_MODE:EPe,IDENT_RE:FJ,MATCH_NOTHING_RE:wPe,METHOD_GUARD:VPe,NUMBER_MODE:DPe,NUMBER_RE:BJ,PHRASAL_WORDS_MODE:TPe,QUOTE_STRING_MODE:APe,REGEXP_MODE:IPe,RE_STARTERS_RE:kPe,SHEBANG:SPe,TITLE_MODE:OPe,UNDERSCORE_IDENT_RE:IP,UNDERSCORE_TITLE_MODE:LPe});function jPe(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function FPe(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function BPe(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=jPe,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function zPe(t,e){Array.isArray(t.illegal)&&(t.illegal=RP(...t.illegal))}function UPe(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function HPe(t,e){t.relevance===void 0&&(t.relevance=1)}const qPe=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(r=>{delete t[r]}),t.keywords=n.keywords,t.begin=ch(n.beforeMatch,NJ(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},WPe=["of","and","for","in","not","or","if","then","parent","list","value"],GPe="keyword";function HJ(t,e,n=GPe){const r=Object.create(null);return typeof t=="string"?s(n,t.split(" ")):Array.isArray(t)?s(n,t):Object.keys(t).forEach(function(i){Object.assign(r,HJ(t[i],e,i))}),r;function s(i,a){e&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");r[l[0]]=[i,YPe(l[0],l[1])]})}}function YPe(t,e){return e?Number(e):KPe(t)?0:1}function KPe(t){return WPe.includes(t.toLowerCase())}const JN={},Cp=t=>{console.error(t)},e7=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Lh=(t,e)=>{JN[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),JN[`${t}/${e}`]=!0)},mk=new Error;function qJ(t,e,{key:n}){let r=0;const s=t[n],i={},a={};for(let o=1;o<=e.length;o++)a[o+r]=s[o],i[o+r]=!0,r+=jJ(e[o-1]);t[n]=a,t[n]._emit=i,t[n]._multi=!0}function XPe(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw Cp("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),mk;if(typeof t.beginScope!="object"||t.beginScope===null)throw Cp("beginScope must be object"),mk;qJ(t,t.begin,{key:"beginScope"}),t.begin=PP(t.begin,{joinWith:""})}}function QPe(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw Cp("skip, excludeEnd, returnEnd not compatible with endScope: {}"),mk;if(typeof t.endScope!="object"||t.endScope===null)throw Cp("endScope must be object"),mk;qJ(t,t.end,{key:"endScope"}),t.end=PP(t.end,{joinWith:""})}}function ZPe(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function JPe(t){ZPe(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),XPe(t),QPe(t)}function e6e(t){function e(a,o){return new RegExp(o1(a),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(o?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=jJ(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=e(PP(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const d=l.findIndex((f,p)=>p>0&&f!==void 0),c=this.matchIndexes[d];return l.splice(0,d),Object.assign(l,c)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new n;return this.rules.slice(o).forEach(([d,c])=>l.addRule(d,c)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let d=l.exec(o);if(this.resumingScanAtSamePosition()&&!(d&&d.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,d=c.exec(o)}return d&&(this.regexIndex+=d.position+1,this.regexIndex===this.count&&this.considerAll()),d}}function s(a){const o=new r;return a.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function i(a,o){const l=a;if(a.isCompiled)return l;[FPe,UPe,JPe,qPe].forEach(c=>c(a,o)),t.compilerExtensions.forEach(c=>c(a,o)),a.__beforeBegin=null,[BPe,zPe,HPe].forEach(c=>c(a,o)),a.isCompiled=!0;let d=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),d=a.keywords.$pattern,delete a.keywords.$pattern),d=d||/\w+/,a.keywords&&(a.keywords=HJ(a.keywords,t.case_insensitive)),l.keywordPatternRe=e(d,!0),o&&(a.begin||(a.begin=/\B|\b/),l.beginRe=e(l.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(l.endRe=e(l.end)),l.terminatorEnd=o1(l.end)||"",a.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(l.illegalRe=e(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(c){return t6e(c==="self"?a:c)})),a.contains.forEach(function(c){i(c,l)}),a.starts&&i(a.starts,o),l.matcher=s(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=nc(t.classNameAliases||{}),i(t)}function WJ(t){return t?t.endsWithParent||WJ(t.starts):!1}function t6e(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return nc(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:WJ(t)?nc(t,{starts:t.starts?nc(t.starts):null}):Object.isFrozen(t)?nc(t):t}var n6e="11.11.1";let r6e=class extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}};const U4=LJ,t7=nc,n7=Symbol("nomatch"),s6e=7,GJ=function(t){const e=Object.create(null),n=Object.create(null),r=[];let s=!0;const i="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:gPe};function l(q){return o.noHighlightRe.test(q)}function d(q){let V=q.className+" ";V+=q.parentNode?q.parentNode.className:"";const O=o.languageDetectRe.exec(V);if(O){const X=M(O[1]);return X||(e7(i.replace("{}",O[1])),e7("Falling back to no-highlight mode for this block.",q)),X?O[1]:"no-highlight"}return V.split(/\s+/).find(X=>l(X)||M(X))}function c(q,V,O){let X="",j="";typeof V=="object"?(X=q,O=V.ignoreIllegals,j=V.language):(Lh("10.7.0","highlight(lang, code, ...args) has been deprecated."),Lh("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),j=q,X=V),O===void 0&&(O=!0);const U={code:X,language:j};z("before:highlight",U);const G=U.result?U.result:f(U.language,U.code,O);return G.code=U.code,z("after:highlight",G),G}function f(q,V,O,X){const j=Object.create(null);function U(Fe,Pe){return Fe.keywords[Pe]}function G(){if(!me.keywords){Ee.addText(Re);return}let Fe=0;me.keywordPatternRe.lastIndex=0;let Pe=me.keywordPatternRe.exec(Re),je="";for(;Pe;){je+=Re.substring(Fe,Pe.index);const Ie=ae.case_insensitive?Pe[0].toLowerCase():Pe[0],Se=U(me,Ie);if(Se){const[Ce,Le]=Se;if(Ee.addText(je),je="",j[Ie]=(j[Ie]||0)+1,j[Ie]<=s6e&&(Ye+=Le),Ce.startsWith("_"))je+=Pe[0];else{const Pt=ae.classNameAliases[Ce]||Ce;ne(Pe[0],Pt)}}else je+=Pe[0];Fe=me.keywordPatternRe.lastIndex,Pe=me.keywordPatternRe.exec(Re)}je+=Re.substring(Fe),Ee.addText(je)}function ee(){if(Re==="")return;let Fe=null;if(typeof me.subLanguage=="string"){if(!e[me.subLanguage]){Ee.addText(Re);return}Fe=f(me.subLanguage,Re,!0,ye[me.subLanguage]),ye[me.subLanguage]=Fe._top}else Fe=h(Re,me.subLanguage.length?me.subLanguage:null);me.relevance>0&&(Ye+=Fe.relevance),Ee.__addSublanguage(Fe._emitter,Fe.language)}function ie(){me.subLanguage!=null?ee():G(),Re=""}function ne(Fe,Pe){Fe!==""&&(Ee.startScope(Pe),Ee.addText(Fe),Ee.endScope())}function ce(Fe,Pe){let je=1;const Ie=Pe.length-1;for(;je<=Ie;){if(!Fe._emit[je]){je++;continue}const Se=ae.classNameAliases[Fe[je]]||Fe[je],Ce=Pe[je];Se?ne(Ce,Se):(Re=Ce,G(),Re=""),je++}}function oe(Fe,Pe){return Fe.scope&&typeof Fe.scope=="string"&&Ee.openNode(ae.classNameAliases[Fe.scope]||Fe.scope),Fe.beginScope&&(Fe.beginScope._wrap?(ne(Re,ae.classNameAliases[Fe.beginScope._wrap]||Fe.beginScope._wrap),Re=""):Fe.beginScope._multi&&(ce(Fe.beginScope,Pe),Re="")),me=Object.create(Fe,{parent:{value:me}}),me}function re(Fe,Pe,je){let Ie=xPe(Fe.endRe,je);if(Ie){if(Fe["on:end"]){const Se=new XN(Fe);Fe["on:end"](Pe,Se),Se.isMatchIgnored&&(Ie=!1)}if(Ie){for(;Fe.endsParent&&Fe.parent;)Fe=Fe.parent;return Fe}}if(Fe.endsWithParent)return re(Fe.parent,Pe,je)}function te(Fe){return me.matcher.regexIndex===0?(Re+=Fe[0],1):(it=!0,0)}function K(Fe){const Pe=Fe[0],je=Fe.rule,Ie=new XN(je),Se=[je.__beforeBegin,je["on:begin"]];for(const Ce of Se)if(Ce&&(Ce(Fe,Ie),Ie.isMatchIgnored))return te(Pe);return je.skip?Re+=Pe:(je.excludeBegin&&(Re+=Pe),ie(),!je.returnBegin&&!je.excludeBegin&&(Re=Pe)),oe(je,Fe),je.returnBegin?0:Pe.length}function le(Fe){const Pe=Fe[0],je=V.substring(Fe.index),Ie=re(me,Fe,je);if(!Ie)return n7;const Se=me;me.endScope&&me.endScope._wrap?(ie(),ne(Pe,me.endScope._wrap)):me.endScope&&me.endScope._multi?(ie(),ce(me.endScope,Fe)):Se.skip?Re+=Pe:(Se.returnEnd||Se.excludeEnd||(Re+=Pe),ie(),Se.excludeEnd&&(Re=Pe));do me.scope&&Ee.closeNode(),!me.skip&&!me.subLanguage&&(Ye+=me.relevance),me=me.parent;while(me!==Ie.parent);return Ie.starts&&oe(Ie.starts,Fe),Se.returnEnd?0:Pe.length}function H(){const Fe=[];for(let Pe=me;Pe!==ae;Pe=Pe.parent)Pe.scope&&Fe.unshift(Pe.scope);Fe.forEach(Pe=>Ee.openNode(Pe))}let Y={};function B(Fe,Pe){const je=Pe&&Pe[0];if(Re+=Fe,je==null)return ie(),0;if(Y.type==="begin"&&Pe.type==="end"&&Y.index===Pe.index&&je===""){if(Re+=V.slice(Pe.index,Pe.index+1),!s){const Ie=new Error(`0 width match regex (${q})`);throw Ie.languageName=q,Ie.badRule=Y.rule,Ie}return 1}if(Y=Pe,Pe.type==="begin")return K(Pe);if(Pe.type==="illegal"&&!O){const Ie=new Error('Illegal lexeme "'+je+'" for mode "'+(me.scope||"<unnamed>")+'"');throw Ie.mode=me,Ie}else if(Pe.type==="end"){const Ie=le(Pe);if(Ie!==n7)return Ie}if(Pe.type==="illegal"&&je==="")return Re+=`
`,1;if(st>1e5&&st>Pe.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Re+=je,je.length}const ae=M(q);if(!ae)throw Cp(i.replace("{}",q)),new Error('Unknown language: "'+q+'"');const be=e6e(ae);let fe="",me=X||be;const ye={},Ee=new o.__emitter(o);H();let Re="",Ye=0,Xe=0,st=0,it=!1;try{if(ae.__emitTokens)ae.__emitTokens(V,Ee);else{for(me.matcher.considerAll();;){st++,it?it=!1:me.matcher.considerAll(),me.matcher.lastIndex=Xe;const Fe=me.matcher.exec(V);if(!Fe)break;const Pe=V.substring(Xe,Fe.index),je=B(Pe,Fe);Xe=Fe.index+je}B(V.substring(Xe))}return Ee.finalize(),fe=Ee.toHTML(),{language:q,value:fe,relevance:Ye,illegal:!1,_emitter:Ee,_top:me}}catch(Fe){if(Fe.message&&Fe.message.includes("Illegal"))return{language:q,value:U4(V),illegal:!0,relevance:0,_illegalBy:{message:Fe.message,index:Xe,context:V.slice(Xe-100,Xe+100),mode:Fe.mode,resultSoFar:fe},_emitter:Ee};if(s)return{language:q,value:U4(V),illegal:!1,relevance:0,errorRaised:Fe,_emitter:Ee,_top:me};throw Fe}}function p(q){const V={value:U4(q),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return V._emitter.addText(q),V}function h(q,V){V=V||o.languages||Object.keys(e);const O=p(q),X=V.filter(M).filter(P).map(ie=>f(ie,q,!1));X.unshift(O);const j=X.sort((ie,ne)=>{if(ie.relevance!==ne.relevance)return ne.relevance-ie.relevance;if(ie.language&&ne.language){if(M(ie.language).supersetOf===ne.language)return 1;if(M(ne.language).supersetOf===ie.language)return-1}return 0}),[U,G]=j,ee=U;return ee.secondBest=G,ee}function m(q,V,O){const X=V&&n[V]||O;q.classList.add("hljs"),q.classList.add(`language-${X}`)}function g(q){let V=null;const O=d(q);if(l(O))return;if(z("before:highlightElement",{el:q,language:O}),q.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",q);return}if(q.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(q)),o.throwUnescapedHTML))throw new r6e("One of your code blocks includes unescaped HTML.",q.innerHTML);V=q;const X=V.textContent,j=O?c(X,{language:O,ignoreIllegals:!0}):h(X);q.innerHTML=j.value,q.dataset.highlighted="yes",m(q,O,j.language),q.result={language:j.language,re:j.relevance,relevance:j.relevance},j.secondBest&&(q.secondBest={language:j.secondBest.language,relevance:j.secondBest.relevance}),z("after:highlightElement",{el:q,result:j,text:X})}function y(q){o=t7(o,q)}const x=()=>{w(),Lh("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function _(){w(),Lh("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let k=!1;function w(){function q(){w()}if(document.readyState==="loading"){k||window.addEventListener("DOMContentLoaded",q,!1),k=!0;return}document.querySelectorAll(o.cssSelector).forEach(g)}function S(q,V){let O=null;try{O=V(t)}catch(X){if(Cp("Language definition for '{}' could not be registered.".replace("{}",q)),s)Cp(X);else throw X;O=a}O.name||(O.name=q),e[q]=O,O.rawDefinition=V.bind(null,t),O.aliases&&E(O.aliases,{languageName:q})}function C(q){delete e[q];for(const V of Object.keys(n))n[V]===q&&delete n[V]}function A(){return Object.keys(e)}function M(q){return q=(q||"").toLowerCase(),e[q]||e[n[q]]}function E(q,{languageName:V}){typeof q=="string"&&(q=[q]),q.forEach(O=>{n[O.toLowerCase()]=V})}function P(q){const V=M(q);return V&&!V.disableAutodetect}function I(q){q["before:highlightBlock"]&&!q["before:highlightElement"]&&(q["before:highlightElement"]=V=>{q["before:highlightBlock"](Object.assign({block:V.el},V))}),q["after:highlightBlock"]&&!q["after:highlightElement"]&&(q["after:highlightElement"]=V=>{q["after:highlightBlock"](Object.assign({block:V.el},V))})}function F(q){I(q),r.push(q)}function L(q){const V=r.indexOf(q);V!==-1&&r.splice(V,1)}function z(q,V){const O=q;r.forEach(function(X){X[O]&&X[O](V)})}function N(q){return Lh("10.7.0","highlightBlock will be removed entirely in v12.0"),Lh("10.7.0","Please use highlightElement now."),g(q)}Object.assign(t,{highlight:c,highlightAuto:h,highlightAll:w,highlightElement:g,highlightBlock:N,configure:y,initHighlighting:x,initHighlightingOnLoad:_,registerLanguage:S,unregisterLanguage:C,listLanguages:A,getLanguage:M,registerAliases:E,autoDetection:P,inherit:t7,addPlugin:F,removePlugin:L}),t.debugMode=function(){s=!1},t.safeMode=function(){s=!0},t.versionString=n6e,t.regex={concat:ch,lookahead:NJ,either:RP,optional:yPe,anyNumberOfTimes:vPe};for(const q in Dx)typeof Dx[q]=="object"&&OJ(Dx[q]);return Object.assign(t,Dx),t},pg=GJ({});pg.newInstance=()=>GJ({});var i6e=pg;pg.HighlightJS=pg;pg.default=pg;const a6e=OK(i6e),r7={},o6e="hljs-";function l6e(t){const e=a6e.newInstance();return t&&i(t),{highlight:n,highlightAuto:r,listLanguages:s,register:i,registerAlias:a,registered:o};function n(l,d,c){const f=c||r7,p=typeof f.prefix=="string"?f.prefix:o6e;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:u6e,classPrefix:p});const h=e.highlight(d,{ignoreIllegals:!0,language:l});if(h.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:h.errorRaised});const m=h._emitter.root,g=m.data;return g.language=h.language,g.relevance=h.relevance,m}function r(l,d){const f=(d||r7).subset||s();let p=-1,h=0,m;for(;++p<f.length;){const g=f[p];if(!e.getLanguage(g))continue;const y=n(g,l,d);y.data&&y.data.relevance!==void 0&&y.data.relevance>h&&(h=y.data.relevance,m=y)}return m||{type:"root",children:[],data:{language:void 0,relevance:h}}}function s(){return e.listLanguages()}function i(l,d){if(typeof l=="string")e.registerLanguage(l,d);else{let c;for(c in l)Object.hasOwn(l,c)&&e.registerLanguage(c,l[c])}}function a(l,d){if(typeof l=="string")e.registerAliases(typeof d=="string"?d:[...d],{languageName:l});else{let c;for(c in l)if(Object.hasOwn(l,c)){const f=l[c];e.registerAliases(typeof f=="string"?f:[...f],{languageName:c})}}}function o(l){return!!e.getLanguage(l)}}class u6e{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],s=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:s}):r.children.push(...s)}openNode(e){const n=this,r=e.split(".").map(function(a,o){return o?a+"_".repeat(o):n.options.classPrefix+a}),s=this.stack[this.stack.length-1],i={type:"element",tagName:"span",properties:{className:r},children:[]};s.children.push(i),this.stack.push(i)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}function d6e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function YJ(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],r=typeof n;(r==="object"||r==="function")&&!Object.isFrozen(n)&&YJ(n)}),t}class s7{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function KJ(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function rc(t,...e){const n=Object.create(null);for(const r in t)n[r]=t[r];return e.forEach(function(r){for(const s in r)n[s]=r[s]}),n}const c6e="</span>",i7=t=>!!t.scope,f6e=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((r,s)=>`${r}${"_".repeat(s+1)}`)].join(" ")}return`${e}${t}`};class p6e{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=KJ(e)}openNode(e){if(!i7(e))return;const n=f6e(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){i7(e)&&(this.buffer+=c6e)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const a7=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class OP{constructor(){this.rootNode=a7(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=a7({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(r=>this._walk(e,r)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{OP._collapse(n)}))}}class h6e extends OP{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const r=e.root;n&&(r.scope=`language:${n}`),this.add(r)}toHTML(){return new p6e(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function u1(t){return t?typeof t=="string"?t:t.source:null}function XJ(t){return fh("(?=",t,")")}function m6e(t){return fh("(?:",t,")*")}function g6e(t){return fh("(?:",t,")?")}function fh(...t){return t.map(n=>u1(n)).join("")}function v6e(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function LP(...t){return"("+(v6e(t).capture?"":"?:")+t.map(r=>u1(r)).join("|")+")"}function QJ(t){return new RegExp(t.toString()+"|").exec("").length-1}function y6e(t,e){const n=t&&t.exec(e);return n&&n.index===0}const b6e=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function VP(t,{joinWith:e}){let n=0;return t.map(r=>{n+=1;const s=n;let i=u1(r),a="";for(;i.length>0;){const o=b6e.exec(i);if(!o){a+=i;break}a+=i.substring(0,o.index),i=i.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+s):(a+=o[0],o[0]==="("&&n++)}return a}).map(r=>`(${r})`).join(e)}const x6e=/\b\B/,ZJ="[a-zA-Z]\\w*",NP="[a-zA-Z_]\\w*",JJ="\\b\\d+(\\.\\d+)?",eee="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",tee="\\b(0b[01]+)",_6e="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",w6e=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=fh(e,/.*\b/,t.binary,/\b.*/)),rc({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},t)},d1={begin:"\\\\[\\s\\S]",relevance:0},k6e={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[d1]},S6e={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[d1]},C6e={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},LC=function(t,e,n={}){const r=rc({scope:"comment",begin:t,end:e,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=LP("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:fh(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},A6e=LC("//","$"),T6e=LC("/\\*","\\*/"),$6e=LC("#","$"),M6e={scope:"number",begin:JJ,relevance:0},E6e={scope:"number",begin:eee,relevance:0},D6e={scope:"number",begin:tee,relevance:0},R6e={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[d1,{begin:/\[/,end:/\]/,relevance:0,contains:[d1]}]},P6e={scope:"title",begin:ZJ,relevance:0},I6e={scope:"title",begin:NP,relevance:0},O6e={begin:"\\.\\s*"+NP,relevance:0},L6e=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var Rx=Object.freeze({__proto__:null,APOS_STRING_MODE:k6e,BACKSLASH_ESCAPE:d1,BINARY_NUMBER_MODE:D6e,BINARY_NUMBER_RE:tee,COMMENT:LC,C_BLOCK_COMMENT_MODE:T6e,C_LINE_COMMENT_MODE:A6e,C_NUMBER_MODE:E6e,C_NUMBER_RE:eee,END_SAME_AS_BEGIN:L6e,HASH_COMMENT_MODE:$6e,IDENT_RE:ZJ,MATCH_NOTHING_RE:x6e,METHOD_GUARD:O6e,NUMBER_MODE:M6e,NUMBER_RE:JJ,PHRASAL_WORDS_MODE:C6e,QUOTE_STRING_MODE:S6e,REGEXP_MODE:R6e,RE_STARTERS_RE:_6e,SHEBANG:w6e,TITLE_MODE:P6e,UNDERSCORE_IDENT_RE:NP,UNDERSCORE_TITLE_MODE:I6e});function V6e(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function N6e(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function j6e(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=V6e,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function F6e(t,e){Array.isArray(t.illegal)&&(t.illegal=LP(...t.illegal))}function B6e(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function z6e(t,e){t.relevance===void 0&&(t.relevance=1)}const U6e=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(r=>{delete t[r]}),t.keywords=n.keywords,t.begin=fh(n.beforeMatch,XJ(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},H6e=["of","and","for","in","not","or","if","then","parent","list","value"],q6e="keyword";function nee(t,e,n=q6e){const r=Object.create(null);return typeof t=="string"?s(n,t.split(" ")):Array.isArray(t)?s(n,t):Object.keys(t).forEach(function(i){Object.assign(r,nee(t[i],e,i))}),r;function s(i,a){e&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");r[l[0]]=[i,W6e(l[0],l[1])]})}}function W6e(t,e){return e?Number(e):G6e(t)?0:1}function G6e(t){return H6e.includes(t.toLowerCase())}const o7={},Ap=t=>{console.error(t)},l7=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Vh=(t,e)=>{o7[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),o7[`${t}/${e}`]=!0)},gk=new Error;function ree(t,e,{key:n}){let r=0;const s=t[n],i={},a={};for(let o=1;o<=e.length;o++)a[o+r]=s[o],i[o+r]=!0,r+=QJ(e[o-1]);t[n]=a,t[n]._emit=i,t[n]._multi=!0}function Y6e(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw Ap("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),gk;if(typeof t.beginScope!="object"||t.beginScope===null)throw Ap("beginScope must be object"),gk;ree(t,t.begin,{key:"beginScope"}),t.begin=VP(t.begin,{joinWith:""})}}function K6e(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw Ap("skip, excludeEnd, returnEnd not compatible with endScope: {}"),gk;if(typeof t.endScope!="object"||t.endScope===null)throw Ap("endScope must be object"),gk;ree(t,t.end,{key:"endScope"}),t.end=VP(t.end,{joinWith:""})}}function X6e(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function Q6e(t){X6e(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),Y6e(t),K6e(t)}function Z6e(t){function e(a,o){return new RegExp(u1(a),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(o?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=QJ(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=e(VP(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const d=l.findIndex((f,p)=>p>0&&f!==void 0),c=this.matchIndexes[d];return l.splice(0,d),Object.assign(l,c)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new n;return this.rules.slice(o).forEach(([d,c])=>l.addRule(d,c)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let d=l.exec(o);if(this.resumingScanAtSamePosition()&&!(d&&d.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,d=c.exec(o)}return d&&(this.regexIndex+=d.position+1,this.regexIndex===this.count&&this.considerAll()),d}}function s(a){const o=new r;return a.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function i(a,o){const l=a;if(a.isCompiled)return l;[N6e,B6e,Q6e,U6e].forEach(c=>c(a,o)),t.compilerExtensions.forEach(c=>c(a,o)),a.__beforeBegin=null,[j6e,F6e,z6e].forEach(c=>c(a,o)),a.isCompiled=!0;let d=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),d=a.keywords.$pattern,delete a.keywords.$pattern),d=d||/\w+/,a.keywords&&(a.keywords=nee(a.keywords,t.case_insensitive)),l.keywordPatternRe=e(d,!0),o&&(a.begin||(a.begin=/\B|\b/),l.beginRe=e(l.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(l.endRe=e(l.end)),l.terminatorEnd=u1(l.end)||"",a.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(l.illegalRe=e(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(c){return J6e(c==="self"?a:c)})),a.contains.forEach(function(c){i(c,l)}),a.starts&&i(a.starts,o),l.matcher=s(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=rc(t.classNameAliases||{}),i(t)}function see(t){return t?t.endsWithParent||see(t.starts):!1}function J6e(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return rc(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:see(t)?rc(t,{starts:t.starts?rc(t.starts):null}):Object.isFrozen(t)?rc(t):t}var eIe="11.10.0";class tIe extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const H4=KJ,u7=rc,d7=Symbol("nomatch"),nIe=7,iee=function(t){const e=Object.create(null),n=Object.create(null),r=[];let s=!0;const i="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:h6e};function l(V){return o.noHighlightRe.test(V)}function d(V){let O=V.className+" ";O+=V.parentNode?V.parentNode.className:"";const X=o.languageDetectRe.exec(O);if(X){const j=E(X[1]);return j||(l7(i.replace("{}",X[1])),l7("Falling back to no-highlight mode for this block.",V)),j?X[1]:"no-highlight"}return O.split(/\s+/).find(j=>l(j)||E(j))}function c(V,O,X){let j="",U="";typeof O=="object"?(j=V,X=O.ignoreIllegals,U=O.language):(Vh("10.7.0","highlight(lang, code, ...args) has been deprecated."),Vh("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),U=V,j=O),X===void 0&&(X=!0);const G={code:j,language:U};N("before:highlight",G);const ee=G.result?G.result:f(G.language,G.code,X);return ee.code=G.code,N("after:highlight",ee),ee}function f(V,O,X,j){const U=Object.create(null);function G(Pe,je){return Pe.keywords[je]}function ee(){if(!ye.keywords){Re.addText(Ye);return}let Pe=0;ye.keywordPatternRe.lastIndex=0;let je=ye.keywordPatternRe.exec(Ye),Ie="";for(;je;){Ie+=Ye.substring(Pe,je.index);const Se=be.case_insensitive?je[0].toLowerCase():je[0],Ce=G(ye,Se);if(Ce){const[Le,Pt]=Ce;if(Re.addText(Ie),Ie="",U[Se]=(U[Se]||0)+1,U[Se]<=nIe&&(Xe+=Pt),Le.startsWith("_"))Ie+=je[0];else{const $e=be.classNameAliases[Le]||Le;ce(je[0],$e)}}else Ie+=je[0];Pe=ye.keywordPatternRe.lastIndex,je=ye.keywordPatternRe.exec(Ye)}Ie+=Ye.substring(Pe),Re.addText(Ie)}function ie(){if(Ye==="")return;let Pe=null;if(typeof ye.subLanguage=="string"){if(!e[ye.subLanguage]){Re.addText(Ye);return}Pe=f(ye.subLanguage,Ye,!0,Ee[ye.subLanguage]),Ee[ye.subLanguage]=Pe._top}else Pe=h(Ye,ye.subLanguage.length?ye.subLanguage:null);ye.relevance>0&&(Xe+=Pe.relevance),Re.__addSublanguage(Pe._emitter,Pe.language)}function ne(){ye.subLanguage!=null?ie():ee(),Ye=""}function ce(Pe,je){Pe!==""&&(Re.startScope(je),Re.addText(Pe),Re.endScope())}function oe(Pe,je){let Ie=1;const Se=je.length-1;for(;Ie<=Se;){if(!Pe._emit[Ie]){Ie++;continue}const Ce=be.classNameAliases[Pe[Ie]]||Pe[Ie],Le=je[Ie];Ce?ce(Le,Ce):(Ye=Le,ee(),Ye=""),Ie++}}function re(Pe,je){return Pe.scope&&typeof Pe.scope=="string"&&Re.openNode(be.classNameAliases[Pe.scope]||Pe.scope),Pe.beginScope&&(Pe.beginScope._wrap?(ce(Ye,be.classNameAliases[Pe.beginScope._wrap]||Pe.beginScope._wrap),Ye=""):Pe.beginScope._multi&&(oe(Pe.beginScope,je),Ye="")),ye=Object.create(Pe,{parent:{value:ye}}),ye}function te(Pe,je,Ie){let Se=y6e(Pe.endRe,Ie);if(Se){if(Pe["on:end"]){const Ce=new s7(Pe);Pe["on:end"](je,Ce),Ce.isMatchIgnored&&(Se=!1)}if(Se){for(;Pe.endsParent&&Pe.parent;)Pe=Pe.parent;return Pe}}if(Pe.endsWithParent)return te(Pe.parent,je,Ie)}function K(Pe){return ye.matcher.regexIndex===0?(Ye+=Pe[0],1):(Fe=!0,0)}function le(Pe){const je=Pe[0],Ie=Pe.rule,Se=new s7(Ie),Ce=[Ie.__beforeBegin,Ie["on:begin"]];for(const Le of Ce)if(Le&&(Le(Pe,Se),Se.isMatchIgnored))return K(je);return Ie.skip?Ye+=je:(Ie.excludeBegin&&(Ye+=je),ne(),!Ie.returnBegin&&!Ie.excludeBegin&&(Ye=je)),re(Ie,Pe),Ie.returnBegin?0:je.length}function H(Pe){const je=Pe[0],Ie=O.substring(Pe.index),Se=te(ye,Pe,Ie);if(!Se)return d7;const Ce=ye;ye.endScope&&ye.endScope._wrap?(ne(),ce(je,ye.endScope._wrap)):ye.endScope&&ye.endScope._multi?(ne(),oe(ye.endScope,Pe)):Ce.skip?Ye+=je:(Ce.returnEnd||Ce.excludeEnd||(Ye+=je),ne(),Ce.excludeEnd&&(Ye=je));do ye.scope&&Re.closeNode(),!ye.skip&&!ye.subLanguage&&(Xe+=ye.relevance),ye=ye.parent;while(ye!==Se.parent);return Se.starts&&re(Se.starts,Pe),Ce.returnEnd?0:je.length}function Y(){const Pe=[];for(let je=ye;je!==be;je=je.parent)je.scope&&Pe.unshift(je.scope);Pe.forEach(je=>Re.openNode(je))}let B={};function ae(Pe,je){const Ie=je&&je[0];if(Ye+=Pe,Ie==null)return ne(),0;if(B.type==="begin"&&je.type==="end"&&B.index===je.index&&Ie===""){if(Ye+=O.slice(je.index,je.index+1),!s){const Se=new Error(`0 width match regex (${V})`);throw Se.languageName=V,Se.badRule=B.rule,Se}return 1}if(B=je,je.type==="begin")return le(je);if(je.type==="illegal"&&!X){const Se=new Error('Illegal lexeme "'+Ie+'" for mode "'+(ye.scope||"<unnamed>")+'"');throw Se.mode=ye,Se}else if(je.type==="end"){const Se=H(je);if(Se!==d7)return Se}if(je.type==="illegal"&&Ie==="")return 1;if(it>1e5&&it>je.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ye+=Ie,Ie.length}const be=E(V);if(!be)throw Ap(i.replace("{}",V)),new Error('Unknown language: "'+V+'"');const fe=Z6e(be);let me="",ye=j||fe;const Ee={},Re=new o.__emitter(o);Y();let Ye="",Xe=0,st=0,it=0,Fe=!1;try{if(be.__emitTokens)be.__emitTokens(O,Re);else{for(ye.matcher.considerAll();;){it++,Fe?Fe=!1:ye.matcher.considerAll(),ye.matcher.lastIndex=st;const Pe=ye.matcher.exec(O);if(!Pe)break;const je=O.substring(st,Pe.index),Ie=ae(je,Pe);st=Pe.index+Ie}ae(O.substring(st))}return Re.finalize(),me=Re.toHTML(),{language:V,value:me,relevance:Xe,illegal:!1,_emitter:Re,_top:ye}}catch(Pe){if(Pe.message&&Pe.message.includes("Illegal"))return{language:V,value:H4(O),illegal:!0,relevance:0,_illegalBy:{message:Pe.message,index:st,context:O.slice(st-100,st+100),mode:Pe.mode,resultSoFar:me},_emitter:Re};if(s)return{language:V,value:H4(O),illegal:!1,relevance:0,errorRaised:Pe,_emitter:Re,_top:ye};throw Pe}}function p(V){const O={value:H4(V),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return O._emitter.addText(V),O}function h(V,O){O=O||o.languages||Object.keys(e);const X=p(V),j=O.filter(E).filter(I).map(ne=>f(ne,V,!1));j.unshift(X);const U=j.sort((ne,ce)=>{if(ne.relevance!==ce.relevance)return ce.relevance-ne.relevance;if(ne.language&&ce.language){if(E(ne.language).supersetOf===ce.language)return 1;if(E(ce.language).supersetOf===ne.language)return-1}return 0}),[G,ee]=U,ie=G;return ie.secondBest=ee,ie}function m(V,O,X){const j=O&&n[O]||X;V.classList.add("hljs"),V.classList.add(`language-${j}`)}function g(V){let O=null;const X=d(V);if(l(X))return;if(N("before:highlightElement",{el:V,language:X}),V.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",V);return}if(V.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(V)),o.throwUnescapedHTML))throw new tIe("One of your code blocks includes unescaped HTML.",V.innerHTML);O=V;const j=O.textContent,U=X?c(j,{language:X,ignoreIllegals:!0}):h(j);V.innerHTML=U.value,V.dataset.highlighted="yes",m(V,X,U.language),V.result={language:U.language,re:U.relevance,relevance:U.relevance},U.secondBest&&(V.secondBest={language:U.secondBest.language,relevance:U.secondBest.relevance}),N("after:highlightElement",{el:V,result:U,text:j})}function y(V){o=u7(o,V)}const x=()=>{w(),Vh("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function _(){w(),Vh("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let k=!1;function w(){if(document.readyState==="loading"){k=!0;return}document.querySelectorAll(o.cssSelector).forEach(g)}function S(){k&&w()}typeof window!="undefined"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",S,!1);function C(V,O){let X=null;try{X=O(t)}catch(j){if(Ap("Language definition for '{}' could not be registered.".replace("{}",V)),s)Ap(j);else throw j;X=a}X.name||(X.name=V),e[V]=X,X.rawDefinition=O.bind(null,t),X.aliases&&P(X.aliases,{languageName:V})}function A(V){delete e[V];for(const O of Object.keys(n))n[O]===V&&delete n[O]}function M(){return Object.keys(e)}function E(V){return V=(V||"").toLowerCase(),e[V]||e[n[V]]}function P(V,{languageName:O}){typeof V=="string"&&(V=[V]),V.forEach(X=>{n[X.toLowerCase()]=O})}function I(V){const O=E(V);return O&&!O.disableAutodetect}function F(V){V["before:highlightBlock"]&&!V["before:highlightElement"]&&(V["before:highlightElement"]=O=>{V["before:highlightBlock"](Object.assign({block:O.el},O))}),V["after:highlightBlock"]&&!V["after:highlightElement"]&&(V["after:highlightElement"]=O=>{V["after:highlightBlock"](Object.assign({block:O.el},O))})}function L(V){F(V),r.push(V)}function z(V){const O=r.indexOf(V);O!==-1&&r.splice(O,1)}function N(V,O){const X=V;r.forEach(function(j){j[X]&&j[X](O)})}function q(V){return Vh("10.7.0","highlightBlock will be removed entirely in v12.0"),Vh("10.7.0","Please use highlightElement now."),g(V)}Object.assign(t,{highlight:c,highlightAuto:h,highlightAll:w,highlightElement:g,highlightBlock:q,configure:y,initHighlighting:x,initHighlightingOnLoad:_,registerLanguage:C,unregisterLanguage:A,listLanguages:M,getLanguage:E,registerAliases:P,autoDetection:I,inherit:u7,addPlugin:L,removePlugin:z}),t.debugMode=function(){s=!1},t.safeMode=function(){s=!0},t.versionString=eIe,t.regex={concat:fh,lookahead:XJ,either:LP,optional:g6e,anyNumberOfTimes:m6e};for(const V in Rx)typeof Rx[V]=="object"&&YJ(Rx[V]);return Object.assign(t,Rx),t},hg=iee({});hg.newInstance=()=>iee({});var rIe=hg;hg.HighlightJS=hg;hg.default=hg;var sIe=d6e(rIe);function aee(t,e=[]){return t.map(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?aee(n.children,r):{text:n.value,classes:r}}).flat()}function c7(t){return t.value||t.children||[]}function iIe(t){return!!sIe.getLanguage(t)}function f7({doc:t,name:e,lowlight:n,defaultLanguage:r}){const s=[];return U$(t,i=>i.type.name===e).forEach(i=>{var a;let o=i.pos+1;const l=i.node.attrs.language||r,d=n.listLanguages(),c=l&&(d.includes(l)||iIe(l)||!((a=n.registered)===null||a===void 0)&&a.call(n,l))?c7(n.highlight(l,i.node.textContent)):c7(n.highlightAuto(i.node.textContent));aee(c).forEach(f=>{const p=o+f.text.length;if(f.classes.length){const h=bs.inline(o,p,{class:f.classes.join(" ")});s.push(h)}o=p})}),_r.create(t,s)}function aIe(t){return typeof t=="function"}function oIe({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(s=>aIe(e[s])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Vn({key:new Hn("lowlight"),state:{init:(s,{doc:i})=>f7({doc:i,name:t,lowlight:e,defaultLanguage:n}),apply:(s,i,a,o)=>{const l=a.selection.$head.parent.type.name,d=o.selection.$head.parent.type.name,c=U$(a.doc,p=>p.type.name===t),f=U$(o.doc,p=>p.type.name===t);return s.docChanged&&([l,d].includes(t)||f.length!==c.length||s.steps.some(p=>p.from!==void 0&&p.to!==void 0&&c.some(h=>h.pos>=p.from&&h.pos+h.node.nodeSize<=p.to)))?f7({doc:s.doc,name:t,lowlight:e,defaultLanguage:n}):i.map(s.mapping,s.doc)}},props:{decorations(s){return r.getState(s)}}});return r}const lIe=hZ.extend({addOptions(){var t;return ze(ge({},(t=this.parent)===null||t===void 0?void 0:t.call(this)),{lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}})},addProseMirrorPlugins(){var t;return[...((t=this.parent)===null||t===void 0?void 0:t.call(this))||[],oIe({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),uIe={components:{NodeViewWrapper:TC,NodeViewContent:nCe},props:dP,computed:{selectedLanguage:{get(){return this.node.attrs.language},set(t){this.updateAttributes({language:t})}},languages(){return this.extension.options.lowlight.listLanguages().map(e=>({label:e,value:e})).concat([{label:"html",value:"xml"}]).sort((e,n)=>e.label.localeCompare(n.label))}}},dIe={class:"code-block-container"},cIe=["value"];function fIe(t,e,n,r,s,i){const a=Vs("node-view-content"),o=Vs("node-view-wrapper");return T(),he(o,null,{default:D(()=>[u("div",dIe,[we(u("select",{class:"language-selector form-select py-0",contenteditable:"false","onUpdate:modelValue":e[0]||(e[0]=l=>i.selectedLanguage=l)},[e[1]||(e[1]=u("option",{value:null},"auto",-1)),e[2]||(e[2]=u("option",{disabled:""},"",-1)),(T(!0),R(xe,null,_e(i.languages,(l,d)=>(T(),R("option",{value:l.value,key:l.value},$(l.label),9,cIe))),128))],512),[[vn,i.selectedLanguage]]),u("pre",null,[u("code",null,[b(a)])])])]),_:1})}const pIe=It(uIe,[["render",fIe]]),q4=" ".repeat(4),hIe=new RegExp("(?<=^|[^`])`([^`]+)`(?!`)$");function p7(t){const{$from:e,from:n,to:r}=t.selection;let s=e.depth;for(;s>0&&e.node(s).type.name!=="codeBlock";)s--;if(s===0)return null;const i=e.node(s),a=e.start(s),o=i.textContent,l=n-a,d=r-a;return{start:a,text:o,fromOffset:l,toOffset:d}}function h7(t,e,n){let r=t.lastIndexOf(`
`,Math.max(0,e-1))+1,s=n;s>0&&t[s-1]===`
`&&s--;const i=[r];let a=r;for(;;){const o=t.indexOf(`
`,a);if(o===-1||o>=s)break;i.push(o+1),a=o+1}return i}const mIe=l6e(cPe),gIe=lIe.extend({addNodeView(){return _b(pIe)},addKeyboardShortcuts(){return{Tab:()=>{const{state:t,dispatch:e}=this.editor.view,n=p7(t);if(!n)return!1;const{start:r,text:s,fromOffset:i,toOffset:a}=n,o=s.slice(i,a).includes(`
`),l=t.tr;if(o)for(const d of h7(s,i,a)){const c=l.mapping.map(r+d);l.insertText(q4,c)}else l.insertText(q4,t.selection.from);return e(l),!0},"Shift-Tab":()=>{const{state:t,dispatch:e}=this.editor.view,n=p7(t);if(!n)return!1;const{start:r,text:s,fromOffset:i,toOffset:a}=n,o=t.tr;for(const l of h7(s,i,a)){let d=0;if(s.substr(l,4)===q4?d=4:s[l]==="	"&&(d=1),d>0){const c=o.mapping.map(r+l),f=o.mapping.map(r+l+d);o.delete(c,f)}}return e(o),!0},"`":()=>{const{from:t,to:e}=this.editor.state.selection;return t===e?!1:this.editor.commands.toggleCode()}}}}).configure({lowlight:mIe}),vIe=pZ.extend({addKeyboardShortcuts(){return{"`":()=>{const{from:t,to:e}=this.editor.state.selection;return t===e?!1:this.editor.commands.toggleCode()}}},addInputRules(){return[qp({find:hIe,type:this.type})]}});function yIe(){const t=Jt({uploading:!1,progress:0,uploaded:0,total:0,error:null,result:null}),e=()=>{t.uploading=!1,t.progress=0,t.uploaded=0,t.total=0,t.error=null,t.result=null},n=Z(()=>t.uploading),r=Z(()=>t.progress),s=Z(()=>t.error),i=Z(()=>t.result);return{upload:(a,o={})=>bIe(a,o,t,e),reset:e,state:t,isUploading:n,progress:r,error:s,result:i}}function bIe(s){return ue(this,arguments,function*(t,e={},n,r){return r(),n.uploading=!0,new Promise((i,a)=>{const o=new XMLHttpRequest;o.upload.addEventListener("loadstart",()=>{n.uploading=!0,n.error=null}),o.upload.addEventListener("progress",c=>{c.lengthComputable&&(n.uploaded=c.loaded,n.total=c.total,n.progress=Math.round(c.loaded/c.total*100))}),o.upload.addEventListener("load",()=>{n.progress=100}),o.addEventListener("error",c=>{n.uploading=!1,n.error="Upload failed",a("Upload failed")}),o.onreadystatechange=()=>{if(o.readyState==XMLHttpRequest.DONE){let c;if(o.status===200){let f=null;try{f=JSON.parse(o.responseText)}catch(h){f=o.responseText}const p=f.message||f;n.result=p,i(p)}else if(o.status===403)c=JSON.parse(o.responseText);else try{c=JSON.parse(o.responseText)}catch(f){c="Upload failed"}if(c){let f,p=[[c.exc_type,c._error_message].filter(Boolean).join(" ")];if(c.exc){f=c.exc;try{f=JSON.parse(f)[0],console.log(f)}catch(g){}}let h=new Error(p.join(`
`)),m=c._server_messages?JSON.parse(c._server_messages):[];m=m.map(g=>{try{return JSON.parse(g).message}catch(y){return g}}).filter(Boolean),m.length||(m=c._error_message?[c._error_message]:["Internal Server Error"]),h.message=m.join(`
`),n.error=h,a(h)}n.uploading=!1}};const l=e.upload_endpoint||"/api/method/upload_file";o.open("POST",l,!0),o.setRequestHeader("Accept","application/json"),window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&o.setRequestHeader("X-Frappe-CSRF-Token",window.csrf_token);const d=new FormData;if(t&&d.append("file",t,t.name),d.append("is_private",e.private?"1":"0"),d.append("folder",e.folder||"Home"),e.file_url&&d.append("file_url",e.file_url),e.doctype&&d.append("doctype",e.doctype),e.docname&&d.append("docname",e.docname),e.fieldname&&d.append("fieldname",e.fieldname),e.method&&d.append("method",e.method),e.type&&d.append("type",e.type),e.optimize&&(d.append("optimize","1"),e.max_width&&d.append("max_width",e.max_width.toString()),e.max_height&&d.append("max_height",e.max_height.toString())),e.params)for(let[c,f]of Object.entries(e.params))d.append(c,f);o.send(d)})})}const an=Je({inheritAttrs:!1,__name:"TextEditor",props:{content:{default:null},placeholder:{type:[String,Function],default:""},editorClass:{default:""},editable:{type:Boolean,default:!0},autofocus:{type:Boolean,default:!1},bubbleMenu:{type:[Boolean,Array],default:!1},bubbleMenuOptions:{default:()=>({})},fixedMenu:{type:[Boolean,Array],default:!1},floatingMenu:{type:[Boolean,Array],default:!1},extensions:{default:()=>[]},starterkitOptions:{default:()=>({})},mentions:{default:null},tags:{default:()=>[]},uploadFunction:{},uploadArgs:{}},emits:["change","focus","blur","transaction"],setup(t,{expose:e,emit:n}){function r(h){return yIe().upload(h,s.uploadArgs||{})}const s=t,i=n,a=Q(null),o=ih(),l=Z(()=>pe(o.class)),d=Z(()=>rt(o.style)),c=Z(()=>Object.fromEntries(Object.entries(o).filter(([h])=>h!=="class"&&h!=="style"))),f=Z(()=>({attributes:{class:pe(["prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2",s.editorClass])}}));et(()=>s.content,h=>{a.value&&a.value.getHTML()!==h&&a.value.commands.setContent(h)}),et(()=>s.editable,h=>{a.value&&a.value.setEditable(h)}),et(f,h=>{a.value&&a.value.setOptions({editorProps:h})},{deep:!0}),yt(()=>{var h;a.value=new dZ({content:s.content||null,editorProps:f.value,editable:s.editable,autofocus:s.autofocus,extensions:[_Z.configure(ze(ge({},s.starterkitOptions),{code:!1,codeBlock:!1,heading:!1})).extend({addKeyboardShortcuts(){return{Backspace:()=>G3e(this.editor)}}}),iDe.configure(ge({},typeof((h=s.starterkitOptions)==null?void 0:h.heading)=="object"&&s.starterkitOptions.heading!==null?s.starterkitOptions.heading:{})),s4e.configure({resizable:!0}),z3e,B3e.configure({nested:!0}),o4e,a4e,i4e,V3e,tAe.configure({types:["heading","paragraph"]}),j3e,q3e,W3e,vIe,gIe,T4e.configure({uploadFunction:s.uploadFunction||r}),HDe.configure({uploadFunction:s.uploadFunction||r}),lTe,dTe.configure({uploadFunction:s.uploadFunction||r}),ATe,f3e.configure({openOnClick:!1}),wZ.configure({placeholder:typeof s.placeholder=="function"?s.placeholder:()=>s.placeholder}),s.mentions&&t5e.configure(Array.isArray(s.mentions)?{mentions:s.mentions}:{mentions:s.mentions.mentions,component:s.mentions.component}),PMe,vEe,vJ,sDe.configure({tags:()=>s.tags}),nDe.configure({enabled:!0,uploadFunction:s.uploadFunction||r}),...s.extensions||[]],onUpdate:({editor:m})=>{i("change",m.getHTML())},onTransaction:({editor:m})=>{i("transaction",m)},onFocus:({editor:m,event:g})=>{i("focus",g)},onBlur:({editor:m,event:g})=>{i("blur",g)}})}),Gl(()=>{a.value&&(a.value.destroy(),a.value=null)}),_i("editor",Z(()=>a.value));const p=Vy("rootRef");return e({editor:a,rootRef:p}),(h,m)=>a.value?(T(),R("div",xt({key:0,class:["relative w-full",l.value],style:d.value},c.value,{ref_key:"rootRef",ref:p}),[b(kMe,{buttons:t.bubbleMenu,options:t.bubbleMenuOptions},null,8,["buttons","options"]),b(xMe,{class:"w-full overflow-x-auto rounded-t-lg border border-outline-gray-modals",buttons:t.fixedMenu},null,8,["buttons"]),b($Me,{buttons:t.floatingMenu},null,8,["buttons"]),qe(h.$slots,"top",{editor:a.value}),qe(h.$slots,"editor",{editor:a.value},()=>[b(v(cZ),{editor:a.value},null,8,["editor"])]),qe(h.$slots,"bottom",{editor:a.value})],16)):se("",!0)}}),xIe={class:"flex h-full w-full flex-col items-center justify-center text-base"},_Ie={class:"text-xl font-medium text-ink-gray-8 mt-6"},wIe={class:"mt-1 text-base text-ink-gray-5"},kIe={__name:"ListEmptyState",setup(t){const e=Qn("list");return(n,r)=>(T(),R("div",xIe,[qe(n.$slots,"default",{},()=>[u("div",_Ie,$(v(e).options.emptyState.title),1),u("div",wIe,$(v(e).options.emptyState.description),1),v(e).options.emptyState.button?(T(),he(v(J),xt({key:0},v(e).options.emptyState.button,{class:"mt-4"}),null,16)):se("",!0)])]))}};function oee(t,e=!0){let n=e?"14px ":"",r=t.map(s=>{let i=s.width||1;return typeof i=="number"?i+"fr":i}).join(" ");return n+r}const jP={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},SIe={class:"truncate"},CIe={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(t,{emit:e}){const n=t,r=e,s=Q(null),i=Q(null),a=Z(()=>{if(typeof n.item.width=="string"){const c=parseInt(n.item.width);if(n.item.width.includes("rem"))return c*16;if(n.item.width.includes("px"))return c}return i.value.offsetWidth}),o=c=>{const f=c.clientX,p=a.value,h=g=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),s.value.style.backgroundColor="rgb(199 199 199)";let y=p+(g.clientX-f);n.item.width=`${y<50?50:y}px`,l(n.item.width)},m=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),s.value.style.backgroundColor="",window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",m)};window.addEventListener("mousemove",h),window.addEventListener("mouseup",m)},l=T0e(c=>{n.item.width=c,r("columnWidthUpdated")},n.debounce),d=Qn("list");return(c,f)=>(T(),R("div",{ref_key:"columnRef",ref:i,class:pe(["group relative flex items-center",t.item.align?v(jP)[t.item.align]:"justify-between"])},[u("div",{class:pe(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",c.$attrs.class])},[qe(c.$slots,"prefix",Pn(or({item:t.item}))),qe(c.$slots,"default",{},()=>[u("div",SIe,$(t.item.label),1)]),qe(c.$slots,"suffix",Pn(or({item:t.item})))],2),v(d).options.resizeColumn?qe(c.$slots,"resizer",Pn(xt({key:0},{item:t.item})),()=>[u("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:o},[u("div",{ref_key:"resizer",ref:s,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):se("",!0)],2))}},AIe={__name:"ListHeader",emits:["columnWidthUpdated"],setup(t,{emit:e}){const n=e,r=Qn("list");return(s,i)=>(T(),R("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:rt({gridTemplateColumns:v(oee)(v(r).columns,v(r).options.selectable)})},[v(r).options.selectable?(T(),he(St,{key:0,class:"cursor-pointer duration-300",modelValue:v(r).allRowsSelected,onClick:ut(v(r).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):se("",!0),qe(s.$slots,"default",{},()=>[(T(!0),R(xe,null,_e(v(r).columns,a=>(T(),he(CIe,{key:a.key,item:a,onColumnWidthUpdated:o=>n("columnWidthUpdated",a)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},TIe={class:"truncate text-base"},$Ie={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(t){const e=t,n=Z(()=>{var a,o;return(a=e.column)!=null&&a.getLabel?(o=e.column)==null?void 0:o.getLabel({row:e.row}):s(e.item).label||""}),r=Z(()=>i.value.options.showTooltip?e.column.getTooltip?e.column.getTooltip(e.row):s(e.item).label:"");function s(a){return a&&typeof a=="object"?a:{label:a}}const i=Qn("list");return(a,o)=>(T(),R("div",{class:pe(["flex items-center space-x-2",v(jP)[t.align]])},[qe(a.$slots,"prefix",{},()=>[t.column.prefix?(T(),he(At(typeof t.column.prefix=="function"?t.column.prefix({row:t.row}):t.column.prefix),{key:0})):se("",!0)]),b(v(ul),Pn(or(v(i).options.showTooltip?{text:r.value}:{text:""})),{default:D(()=>[qe(a.$slots,"default",Pn(or({label:n.value})),()=>[u("div",TIe,$(n.value),1)])]),_:3},16),qe(a.$slots,"suffix")],2))}},lee={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(t){const e=t,n=Qn("list"),r=Z(()=>{var f;return(f=n.value.rows)!=null&&f.length?n.value.rows[n.value.rows.length-1][n.value.rowKey]===e.row[n.value.rowKey]:!1}),s=Z(()=>n.value.selections.has(e.row[n.value.rowKey])),i=Z(()=>n.value.options.enableActive&&n.value.activeRow.value===e.row.name),a=Z(()=>n.value.options.getRowRoute||n.value.options.onRowClick),o=Z(()=>typeof n.value.options.rowHeight=="number"?`${n.value.options.rowHeight}px`:n.value.options.rowHeight),l=Z(()=>{var h,m,g;if(!s.value)return"rounded";const f=[...n.value.selections];let p=(h=n.value.rows[0])!=null&&h.group?n.value.rows.map(y=>y.rows):[n.value.rows];for(let y of p){let x=y.findIndex(w=>w==e.row);if(x===-1)continue;let _=!f.includes((m=y[x+1])==null?void 0:m.name),k=!f.includes((g=y[x-1])==null?void 0:g.name);return(_?"rounded-b ":"")+(k?"rounded-t":"")}}),d=f=>{n.value.options.onRowClick&&n.value.options.onRowClick(e.row,f),n.value.activeRow.value===e.row.name?n.value.activeRow.value=null:n.value.activeRow.value=e.row.name},c=f=>{const p=e.row[n.value.rowKey];if(f.shiftKey&&!n.value.selections.has(p)){const h=Array.from(n.value.selections).pop(),m=n.value.rows.find(k=>k.group)?n.value.rows.reduce((k,w)=>k.concat(w.rows),[]):n.value.rows,g=m.findIndex(k=>h===k[n.value.rowKey]),y=m.findIndex(k=>p===k[n.value.rowKey]),x=Math.min(g,y),_=Math.max(g,y);for(let k=x;k<=_;k++)n.value.selections.add(m[k][n.value.rowKey])}else n.value.toggleRow(p)};return(f,p)=>(T(),he(At(v(n).options.getRowRoute?"router-link":"div"),xt({class:[[l.value,s.value||i.value?"bg-surface-gray-2":"",a.value?"cursor-pointer":"",a.value?s.value||i.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:v(n).options.getRowRoute?v(n).options.getRowRoute(t.row):void 0,onClick:d}),{default:D(()=>[(T(),he(At(v(n).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:D(()=>{var h,m;return[u("div",{class:"grid items-center space-x-4 px-2",style:rt({height:o.value,gridTemplateColumns:v(oee)(v(n).columns,v(n).options.selectable)})},[v(n).options.selectable?(T(),R("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:p[0]||(p[0]=ut(()=>{},["stop","prevent"])),onDblclick:p[1]||(p[1]=ut(()=>{},["stop"]))},[b(St,{modelValue:s.value,class:"cursor-pointer duration-300",onClick:ut(c,["stop"])},null,8,["modelValue"])],32)):se("",!0),(T(!0),R(xe,null,_e(v(n).columns,(g,y)=>(T(),R("div",{key:g.key,class:pe([v(jP)[g.align],y==0?"text-ink-gray-9":"text-ink-gray-7"])},[qe(f.$slots,"default",xt({ref_for:!0},{idx:y,column:g,item:t.row[g.key],isActive:i.value}),()=>[v(n).slots.cell?(T(),he(At(v(n).slots.cell),xt({key:0,ref_for:!0},{column:g,row:t.row,item:t.row[g.key],align:g.align}),null,16)):(T(),he($Ie,{key:1,column:g,row:t.row,item:t.row[g.key],align:g.align},null,8,["column","row","item","align"]))])],2))),128))],4),r.value?se("",!0):(T(),R("div",{key:0,class:pe(["h-px border-t",l.value==="rounded"||(m=(h=l.value)==null?void 0:h.includes)!=null&&m.call(h,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},MIe={class:"h-full overflow-y-auto"},EIe={__name:"ListRows",setup(t){const e=Qn("list");return(n,r)=>(T(),R("div",MIe,[qe(n.$slots,"default",{},()=>[(T(!0),R(xe,null,_e(v(e).rows,s=>(T(),he(lee,{key:s[v(e).rowKey],row:s},null,8,["row"]))),128))])]))}},DIe={},RIe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function PIe(t,e){return T(),R("svg",RIe,[...e[0]||(e[0]=[u("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)])])}const IIe=It(DIe,[["render",PIe]]),OIe={class:"flex items-center"},LIe={class:"w-full py-1.5 pr-2"},VIe={key:1,class:"text-base font-medium leading-6"},NIe={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(t){const e=t,n=Qn("list");function r(){e.group.collapsed==null&&(e.group.collapsed=!1),e.group.collapsed=!e.group.collapsed}return(s,i)=>(T(),R(xe,null,[u("div",OIe,[u("button",{onClick:r,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[b(IIe,{class:pe(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[t.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),qe(s.$slots,"default",{},()=>[u("div",LIe,[v(n).slots["group-header"]?(T(),he(At(v(n).slots["group-header"]),Pn(xt({key:0},{group:t.group})),null,16)):(T(),R("span",VIe,$(t.group.group),1))])])]),i[0]||(i[0]=u("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},jIe={key:0,class:"mb-5 mt-2"},FIe={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(t){const e=Qn("list");return(n,r)=>t.group.collapsed?se("",!0):(T(),R("div",jIe,[qe(n.$slots,"default",{},()=>[(T(!0),R(xe,null,_e(t.group.rows,s=>(T(),he(lee,{key:s[v(e).rowKey],row:s},null,8,["row"]))),128))])]))}},BIe={class:"h-full overflow-y-auto"},zIe={__name:"ListGroups",setup(t){const e=Qn("list");return(n,r)=>(T(),R("div",BIe,[(T(!0),R(xe,null,_e(v(e).rows,s=>(T(),R("div",{key:s.group},[qe(n.$slots,"default",{},()=>[b(NIe,{group:s},{default:D(()=>[n.$slots["group-header"]?qe(n.$slots,"group-header",xt({key:0,ref_for:!0},{group:s})):se("",!0)]),_:2},1032,["group"]),b(FIe,{group:s},null,8,["group"])])]))),128))]))}},UIe={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},HIe={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},qIe={class:"flex items-center space-x-3"},WIe={class:"mr-3"},GIe={class:"flex items-center space-x-1"},YIe=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(t){const e=Qn("list");let n=Z(()=>e.value.options.selectionText(e.value.selections.size));return(r,s)=>(T(),he(zS,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:D(()=>[v(e).selections.size?(T(),R("div",UIe,[u("div",{class:pe(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",r.$attrs.class])},[qe(r.$slots,"default",Pn(or({selections:v(e).selections,allRowsSelected:v(e).allRowsSelected,selectAll:()=>v(e).toggleAllRows(!0),unselectAll:()=>v(e).toggleAllRows(!1)})),()=>[u("div",HIe,[u("div",qIe,[b(St,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),u("div",null,$(v(n)),1)]),u("div",WIe,[qe(r.$slots,"actions",Pn(or({selections:v(e).selections,allRowsSelected:v(e).allRowsSelected,selectAll:()=>v(e).toggleAllRows(!0),unselectAll:()=>v(e).toggleAllRows(!1)})))])]),u("div",GIe,[b(v(J),{class:pe(["w- text-ink-gray-7",v(e).allRowsSelected?"cursor-not-allowed":""]),disabled:v(e).allRowsSelected,variant:"ghost",onClick:s[0]||(s[0]=i=>v(e).toggleAllRows(!0))},{default:D(()=>[...s[2]||(s[2]=[W(" Select all ",-1)])]),_:1},8,["disabled","class"]),b(v(J),{icon:"x",variant:"ghost",onClick:s[1]||(s[1]=i=>v(e).toggleAllRows(!1))})])])],2)])):se("",!0)]),_:3}))}}),KIe={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},XIe=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(t,{expose:e,emit:n}){const r=t,s=eb();let i=Jt(new Set),a=Q(null);const o=n;et(i,m=>{i.size&&(a.value=null),o("update:selections",m)}),et(a,m=>{o("update:active-row",m)});let l=Z(()=>{function m(y){return y===void 0?!0:y}function g(y){return y===void 0?!1:y}return{getRowRoute:r.options.getRowRoute||null,onRowClick:r.options.onRowClick||null,showTooltip:m(r.options.showTooltip),selectionText:r.options.selectionText||(y=>y===1?"1 row selected":`${y} rows selected`),enableActive:g(r.options.enableActive),selectable:m(r.options.selectable),resizeColumn:g(r.options.resizeColumn),rowHeight:r.options.rowHeight||40,emptyState:r.options.emptyState}});const d=Z(()=>r.rows.length?f.value?i.size===r.rows.reduce((m,g)=>m+g.rows.length,0):i.size===r.rows.length:!1),c=Z(()=>l.value.selectable);let f=Z(()=>r.rows.every(m=>m.group&&m.rows&&Array.isArray(m.rows)));function p(m){i.delete(m)||i.add(m)}function h(m){if(!m||d.value){i.clear();return}if(f.value){r.rows.forEach(g=>{g.rows.forEach(y=>i.add(y[r.rowKey]))});return}r.rows.forEach(g=>i.add(g[r.rowKey]))}return _i("list",Z(()=>({rowKey:r.rowKey,rows:r.rows,columns:r.columns,options:l.value,selections:i,activeRow:a,allRowsSelected:d.value,slots:s,toggleRow:p,toggleAllRows:h}))),e({selections:i,allRowsSelected:d,toggleRow:p,toggleAllRows:h}),(m,g)=>(T(),R("div",KIe,[u("div",{class:pe(["flex w-max min-w-full flex-col overflow-y-hidden",m.$attrs.class]),style:rt(m.$attrs.style)},[qe(m.$slots,"default",Pn(or({showGroupedRows:v(f),selectable:c.value})),()=>[b(AIe),r.rows.length?(T(),R(xe,{key:0},[v(f)?(T(),he(zIe,{key:0})):(T(),he(EIe,{key:1}))],64)):(T(),he(kIe,{key:1})),c.value?(T(),he(YIe,{key:2})):se("",!0)])],6)]))}}),QIe={class:"lucide lucide-triangle-alert",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function ZIe(t,e){return T(),R("svg",QIe,[...e[0]||(e[0]=[u("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"},null,-1),u("path",{d:"M12 9v4"},null,-1),u("path",{d:"M12 17h.01"},null,-1)])])}zt({name:"lucide-alert-triangle",render:ZIe});/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:uee,setPrototypeOf:m7,isFrozen:JIe,getPrototypeOf:eOe,getOwnPropertyDescriptor:tOe}=Object;let{freeze:$i,seal:ao,create:vM}=Object,{apply:yM,construct:bM}=typeof Reflect!="undefined"&&Reflect;$i||($i=function(e){return e});ao||(ao=function(e){return e});yM||(yM=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];return e.apply(n,s)});bM||(bM=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return new e(...r)});const Px=Mi(Array.prototype.forEach),nOe=Mi(Array.prototype.lastIndexOf),g7=Mi(Array.prototype.pop),bv=Mi(Array.prototype.push),rOe=Mi(Array.prototype.splice),ww=Mi(String.prototype.toLowerCase),W4=Mi(String.prototype.toString),G4=Mi(String.prototype.match),xv=Mi(String.prototype.replace),sOe=Mi(String.prototype.indexOf),iOe=Mi(String.prototype.trim),yo=Mi(Object.prototype.hasOwnProperty),li=Mi(RegExp.prototype.test),_v=aOe(TypeError);function Mi(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return yM(t,e,r)}}function aOe(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return bM(t,n)}}function wn(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ww;m7&&m7(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(JIe(e)||(e[r]=i),s=i)}t[s]=!0}return t}function oOe(t){for(let e=0;e<t.length;e++)yo(t,e)||(t[e]=null);return t}function yu(t){const e=vM(null);for(const[n,r]of uee(t))yo(t,n)&&(Array.isArray(r)?e[n]=oOe(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=yu(r):e[n]=r);return e}function wv(t,e){for(;t!==null;){const r=tOe(t,e);if(r){if(r.get)return Mi(r.get);if(typeof r.value=="function")return Mi(r.value)}t=eOe(t)}function n(){return null}return n}const v7=$i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Y4=$i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),K4=$i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),lOe=$i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),X4=$i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),uOe=$i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),y7=$i(["#text"]),b7=$i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Q4=$i(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),x7=$i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ix=$i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),dOe=ao(/\{\{[\w\W]*|[\w\W]*\}\}/gm),cOe=ao(/<%[\w\W]*|[\w\W]*%>/gm),fOe=ao(/\$\{[\w\W]*/gm),pOe=ao(/^data-[\-\w.\u00B7-\uFFFF]+$/),hOe=ao(/^aria-[\-\w]+$/),dee=ao(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mOe=ao(/^(?:\w+script|data):/i),gOe=ao(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cee=ao(/^html$/i),vOe=ao(/^[a-z][.\w]*(-[.\w]+)+$/i);var _7=Object.freeze({__proto__:null,ARIA_ATTR:hOe,ATTR_WHITESPACE:gOe,CUSTOM_ELEMENT:vOe,DATA_ATTR:pOe,DOCTYPE_NAME:cee,ERB_EXPR:cOe,IS_ALLOWED_URI:dee,IS_SCRIPT_OR_DATA:mOe,MUSTACHE_EXPR:dOe,TMPLIT_EXPR:fOe});const kv={element:1,text:3,progressingInstruction:7,comment:8,document:9},yOe=function(){return typeof window=="undefined"?null:window},bOe=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch(a){return console.warn("TrustedTypes policy "+i+" could not be created."),null}},w7=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function fee(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yOe();const e=Ut=>fee(Ut);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==kv.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:d,NamedNodeMap:c=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:h}=t,m=l.prototype,g=wv(m,"cloneNode"),y=wv(m,"remove"),x=wv(m,"nextSibling"),_=wv(m,"childNodes"),k=wv(m,"parentNode");if(typeof a=="function"){const Ut=n.createElement("template");Ut.content&&Ut.content.ownerDocument&&(n=Ut.content.ownerDocument)}let w,S="";const{implementation:C,createNodeIterator:A,createDocumentFragment:M,getElementsByTagName:E}=n,{importNode:P}=r;let I=w7();e.isSupported=typeof uee=="function"&&typeof k=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:L,TMPLIT_EXPR:z,DATA_ATTR:N,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:O,CUSTOM_ELEMENT:X}=_7;let{IS_ALLOWED_URI:j}=_7,U=null;const G=wn({},[...v7,...Y4,...K4,...X4,...y7]);let ee=null;const ie=wn({},[...b7,...Q4,...x7,...Ix]);let ne=Object.seal(vM(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,oe=null;const re=Object.seal(vM(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let te=!0,K=!0,le=!1,H=!0,Y=!1,B=!0,ae=!1,be=!1,fe=!1,me=!1,ye=!1,Ee=!1,Re=!0,Ye=!1;const Xe="user-content-";let st=!0,it=!1,Fe={},Pe=null;const je=wn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ie=null;const Se=wn({},["audio","video","img","source","image","track"]);let Ce=null;const Le=wn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pt="http://www.w3.org/1998/Math/MathML",$e="http://www.w3.org/2000/svg",Ae="http://www.w3.org/1999/xhtml";let ke=Ae,Ue=!1,$t=null;const Nn=wn({},[Pt,$e,Ae],W4);let Oe=wn({},["mi","mo","mn","ms","mtext"]),Ge=wn({},["annotation-xml"]);const Bt=wn({},["title","style","font","a","script"]);let As=null;const tv=["application/xhtml+xml","text/html"],Ch="text/html";let yr=null,_d=null;const nv=n.createElement("form"),Zc=function(Me){return Me instanceof RegExp||Me instanceof Function},DA=function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(_d&&_d===Me)){if((!Me||typeof Me!="object")&&(Me={}),Me=yu(Me),As=tv.indexOf(Me.PARSER_MEDIA_TYPE)===-1?Ch:Me.PARSER_MEDIA_TYPE,yr=As==="application/xhtml+xml"?W4:ww,U=yo(Me,"ALLOWED_TAGS")?wn({},Me.ALLOWED_TAGS,yr):G,ee=yo(Me,"ALLOWED_ATTR")?wn({},Me.ALLOWED_ATTR,yr):ie,$t=yo(Me,"ALLOWED_NAMESPACES")?wn({},Me.ALLOWED_NAMESPACES,W4):Nn,Ce=yo(Me,"ADD_URI_SAFE_ATTR")?wn(yu(Le),Me.ADD_URI_SAFE_ATTR,yr):Le,Ie=yo(Me,"ADD_DATA_URI_TAGS")?wn(yu(Se),Me.ADD_DATA_URI_TAGS,yr):Se,Pe=yo(Me,"FORBID_CONTENTS")?wn({},Me.FORBID_CONTENTS,yr):je,ce=yo(Me,"FORBID_TAGS")?wn({},Me.FORBID_TAGS,yr):yu({}),oe=yo(Me,"FORBID_ATTR")?wn({},Me.FORBID_ATTR,yr):yu({}),Fe=yo(Me,"USE_PROFILES")?Me.USE_PROFILES:!1,te=Me.ALLOW_ARIA_ATTR!==!1,K=Me.ALLOW_DATA_ATTR!==!1,le=Me.ALLOW_UNKNOWN_PROTOCOLS||!1,H=Me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Y=Me.SAFE_FOR_TEMPLATES||!1,B=Me.SAFE_FOR_XML!==!1,ae=Me.WHOLE_DOCUMENT||!1,me=Me.RETURN_DOM||!1,ye=Me.RETURN_DOM_FRAGMENT||!1,Ee=Me.RETURN_TRUSTED_TYPE||!1,fe=Me.FORCE_BODY||!1,Re=Me.SANITIZE_DOM!==!1,Ye=Me.SANITIZE_NAMED_PROPS||!1,st=Me.KEEP_CONTENT!==!1,it=Me.IN_PLACE||!1,j=Me.ALLOWED_URI_REGEXP||dee,ke=Me.NAMESPACE||Ae,Oe=Me.MATHML_TEXT_INTEGRATION_POINTS||Oe,Ge=Me.HTML_INTEGRATION_POINTS||Ge,ne=Me.CUSTOM_ELEMENT_HANDLING||{},Me.CUSTOM_ELEMENT_HANDLING&&Zc(Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ne.tagNameCheck=Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&Zc(Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ne.attributeNameCheck=Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&typeof Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ne.allowCustomizedBuiltInElements=Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Y&&(K=!1),ye&&(me=!0),Fe&&(U=wn({},y7),ee=[],Fe.html===!0&&(wn(U,v7),wn(ee,b7)),Fe.svg===!0&&(wn(U,Y4),wn(ee,Q4),wn(ee,Ix)),Fe.svgFilters===!0&&(wn(U,K4),wn(ee,Q4),wn(ee,Ix)),Fe.mathMl===!0&&(wn(U,X4),wn(ee,x7),wn(ee,Ix))),Me.ADD_TAGS&&(typeof Me.ADD_TAGS=="function"?re.tagCheck=Me.ADD_TAGS:(U===G&&(U=yu(U)),wn(U,Me.ADD_TAGS,yr))),Me.ADD_ATTR&&(typeof Me.ADD_ATTR=="function"?re.attributeCheck=Me.ADD_ATTR:(ee===ie&&(ee=yu(ee)),wn(ee,Me.ADD_ATTR,yr))),Me.ADD_URI_SAFE_ATTR&&wn(Ce,Me.ADD_URI_SAFE_ATTR,yr),Me.FORBID_CONTENTS&&(Pe===je&&(Pe=yu(Pe)),wn(Pe,Me.FORBID_CONTENTS,yr)),st&&(U["#text"]=!0),ae&&wn(U,["html","head","body"]),U.table&&(wn(U,["tbody"]),delete ce.tbody),Me.TRUSTED_TYPES_POLICY){if(typeof Me.TRUSTED_TYPES_POLICY.createHTML!="function")throw _v('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw _v('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=Me.TRUSTED_TYPES_POLICY,S=w.createHTML("")}else w===void 0&&(w=bOe(h,s)),w!==null&&typeof S=="string"&&(S=w.createHTML(""));$i&&$i(Me),_d=Me}},kO=wn({},[...Y4,...K4,...lOe]),SO=wn({},[...X4,...uOe]),hle=function(Me){let dt=k(Me);(!dt||!dt.tagName)&&(dt={namespaceURI:ke,tagName:"template"});const Dt=ww(Me.tagName),Sr=ww(dt.tagName);return $t[Me.namespaceURI]?Me.namespaceURI===$e?dt.namespaceURI===Ae?Dt==="svg":dt.namespaceURI===Pt?Dt==="svg"&&(Sr==="annotation-xml"||Oe[Sr]):!!kO[Dt]:Me.namespaceURI===Pt?dt.namespaceURI===Ae?Dt==="math":dt.namespaceURI===$e?Dt==="math"&&Ge[Sr]:!!SO[Dt]:Me.namespaceURI===Ae?dt.namespaceURI===$e&&!Ge[Sr]||dt.namespaceURI===Pt&&!Oe[Sr]?!1:!SO[Dt]&&(Bt[Dt]||!kO[Dt]):!!(As==="application/xhtml+xml"&&$t[Me.namespaceURI]):!1},Wo=function(Me){bv(e.removed,{element:Me});try{k(Me).removeChild(Me)}catch(dt){y(Me)}},Jc=function(Me,dt){try{bv(e.removed,{attribute:dt.getAttributeNode(Me),from:dt})}catch(Dt){bv(e.removed,{attribute:null,from:dt})}if(dt.removeAttribute(Me),Me==="is")if(me||ye)try{Wo(dt)}catch(Dt){}else try{dt.setAttribute(Me,"")}catch(Dt){}},CO=function(Me){let dt=null,Dt=null;if(fe)Me="<remove></remove>"+Me;else{const Yr=G4(Me,/^[\r\n\t ]+/);Dt=Yr&&Yr[0]}As==="application/xhtml+xml"&&ke===Ae&&(Me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Me+"</body></html>");const Sr=w?w.createHTML(Me):Me;if(ke===Ae)try{dt=new p().parseFromString(Sr,As)}catch(Yr){}if(!dt||!dt.documentElement){dt=C.createDocument(ke,"template",null);try{dt.documentElement.innerHTML=Ue?S:Sr}catch(Yr){}}const zs=dt.body||dt.documentElement;return Me&&Dt&&zs.insertBefore(n.createTextNode(Dt),zs.childNodes[0]||null),ke===Ae?E.call(dt,ae?"html":"body")[0]:ae?dt.documentElement:zs},AO=function(Me){return A.call(Me.ownerDocument||Me,Me,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},RA=function(Me){return Me instanceof f&&(typeof Me.nodeName!="string"||typeof Me.textContent!="string"||typeof Me.removeChild!="function"||!(Me.attributes instanceof c)||typeof Me.removeAttribute!="function"||typeof Me.setAttribute!="function"||typeof Me.namespaceURI!="string"||typeof Me.insertBefore!="function"||typeof Me.hasChildNodes!="function")},TO=function(Me){return typeof o=="function"&&Me instanceof o};function nu(Ut,Me,dt){Px(Ut,Dt=>{Dt.call(e,Me,dt,_d)})}const $O=function(Me){let dt=null;if(nu(I.beforeSanitizeElements,Me,null),RA(Me))return Wo(Me),!0;const Dt=yr(Me.nodeName);if(nu(I.uponSanitizeElement,Me,{tagName:Dt,allowedTags:U}),B&&Me.hasChildNodes()&&!TO(Me.firstElementChild)&&li(/<[/\w!]/g,Me.innerHTML)&&li(/<[/\w!]/g,Me.textContent)||Me.nodeType===kv.progressingInstruction||B&&Me.nodeType===kv.comment&&li(/<[/\w]/g,Me.data))return Wo(Me),!0;if(!(re.tagCheck instanceof Function&&re.tagCheck(Dt))&&(!U[Dt]||ce[Dt])){if(!ce[Dt]&&EO(Dt)&&(ne.tagNameCheck instanceof RegExp&&li(ne.tagNameCheck,Dt)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(Dt)))return!1;if(st&&!Pe[Dt]){const Sr=k(Me)||Me.parentNode,zs=_(Me)||Me.childNodes;if(zs&&Sr){const Yr=zs.length;for(let Li=Yr-1;Li>=0;--Li){const ru=g(zs[Li],!0);ru.__removalCount=(Me.__removalCount||0)+1,Sr.insertBefore(ru,x(Me))}}}return Wo(Me),!0}return Me instanceof l&&!hle(Me)||(Dt==="noscript"||Dt==="noembed"||Dt==="noframes")&&li(/<\/no(script|embed|frames)/i,Me.innerHTML)?(Wo(Me),!0):(Y&&Me.nodeType===kv.text&&(dt=Me.textContent,Px([F,L,z],Sr=>{dt=xv(dt,Sr," ")}),Me.textContent!==dt&&(bv(e.removed,{element:Me.cloneNode()}),Me.textContent=dt)),nu(I.afterSanitizeElements,Me,null),!1)},MO=function(Me,dt,Dt){if(Re&&(dt==="id"||dt==="name")&&(Dt in n||Dt in nv))return!1;if(!(K&&!oe[dt]&&li(N,dt))){if(!(te&&li(q,dt))){if(!(re.attributeCheck instanceof Function&&re.attributeCheck(dt,Me))){if(!ee[dt]||oe[dt]){if(!(EO(Me)&&(ne.tagNameCheck instanceof RegExp&&li(ne.tagNameCheck,Me)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(Me))&&(ne.attributeNameCheck instanceof RegExp&&li(ne.attributeNameCheck,dt)||ne.attributeNameCheck instanceof Function&&ne.attributeNameCheck(dt,Me))||dt==="is"&&ne.allowCustomizedBuiltInElements&&(ne.tagNameCheck instanceof RegExp&&li(ne.tagNameCheck,Dt)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(Dt))))return!1}else if(!Ce[dt]){if(!li(j,xv(Dt,O,""))){if(!((dt==="src"||dt==="xlink:href"||dt==="href")&&Me!=="script"&&sOe(Dt,"data:")===0&&Ie[Me])){if(!(le&&!li(V,xv(Dt,O,"")))){if(Dt)return!1}}}}}}}return!0},EO=function(Me){return Me!=="annotation-xml"&&G4(Me,X)},DO=function(Me){nu(I.beforeSanitizeAttributes,Me,null);const{attributes:dt}=Me;if(!dt||RA(Me))return;const Dt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ee,forceKeepAttr:void 0};let Sr=dt.length;for(;Sr--;){const zs=dt[Sr],{name:Yr,namespaceURI:Li,value:ru}=zs,Ah=yr(Yr),PA=ru;let Ts=Yr==="value"?PA:iOe(PA);if(Dt.attrName=Ah,Dt.attrValue=Ts,Dt.keepAttr=!0,Dt.forceKeepAttr=void 0,nu(I.uponSanitizeAttribute,Me,Dt),Ts=Dt.attrValue,Ye&&(Ah==="id"||Ah==="name")&&(Jc(Yr,Me),Ts=Xe+Ts),B&&li(/((--!?|])>)|<\/(style|title|textarea)/i,Ts)){Jc(Yr,Me);continue}if(Ah==="attributename"&&G4(Ts,"href")){Jc(Yr,Me);continue}if(Dt.forceKeepAttr)continue;if(!Dt.keepAttr){Jc(Yr,Me);continue}if(!H&&li(/\/>/i,Ts)){Jc(Yr,Me);continue}Y&&Px([F,L,z],PO=>{Ts=xv(Ts,PO," ")});const RO=yr(Me.nodeName);if(!MO(RO,Ah,Ts)){Jc(Yr,Me);continue}if(w&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Li)switch(h.getAttributeType(RO,Ah)){case"TrustedHTML":{Ts=w.createHTML(Ts);break}case"TrustedScriptURL":{Ts=w.createScriptURL(Ts);break}}if(Ts!==PA)try{Li?Me.setAttributeNS(Li,Yr,Ts):Me.setAttribute(Yr,Ts),RA(Me)?Wo(Me):g7(e.removed)}catch(PO){Jc(Yr,Me)}}nu(I.afterSanitizeAttributes,Me,null)},mle=function Ut(Me){let dt=null;const Dt=AO(Me);for(nu(I.beforeSanitizeShadowDOM,Me,null);dt=Dt.nextNode();)nu(I.uponSanitizeShadowNode,dt,null),$O(dt),DO(dt),dt.content instanceof i&&Ut(dt.content);nu(I.afterSanitizeShadowDOM,Me,null)};return e.sanitize=function(Ut){let Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=null,Dt=null,Sr=null,zs=null;if(Ue=!Ut,Ue&&(Ut="<!-->"),typeof Ut!="string"&&!TO(Ut))if(typeof Ut.toString=="function"){if(Ut=Ut.toString(),typeof Ut!="string")throw _v("dirty is not a string, aborting")}else throw _v("toString is not a function");if(!e.isSupported)return Ut;if(be||DA(Me),e.removed=[],typeof Ut=="string"&&(it=!1),it){if(Ut.nodeName){const ru=yr(Ut.nodeName);if(!U[ru]||ce[ru])throw _v("root node is forbidden and cannot be sanitized in-place")}}else if(Ut instanceof o)dt=CO("<!---->"),Dt=dt.ownerDocument.importNode(Ut,!0),Dt.nodeType===kv.element&&Dt.nodeName==="BODY"||Dt.nodeName==="HTML"?dt=Dt:dt.appendChild(Dt);else{if(!me&&!Y&&!ae&&Ut.indexOf("<")===-1)return w&&Ee?w.createHTML(Ut):Ut;if(dt=CO(Ut),!dt)return me?null:Ee?S:""}dt&&fe&&Wo(dt.firstChild);const Yr=AO(it?Ut:dt);for(;Sr=Yr.nextNode();)$O(Sr),DO(Sr),Sr.content instanceof i&&mle(Sr.content);if(it)return Ut;if(me){if(ye)for(zs=M.call(dt.ownerDocument);dt.firstChild;)zs.appendChild(dt.firstChild);else zs=dt;return(ee.shadowroot||ee.shadowrootmode)&&(zs=P.call(r,zs,!0)),zs}let Li=ae?dt.outerHTML:dt.innerHTML;return ae&&U["!doctype"]&&dt.ownerDocument&&dt.ownerDocument.doctype&&dt.ownerDocument.doctype.name&&li(cee,dt.ownerDocument.doctype.name)&&(Li="<!DOCTYPE "+dt.ownerDocument.doctype.name+`>
`+Li),Y&&Px([F,L,z],ru=>{Li=xv(Li,ru," ")}),w&&Ee?w.createHTML(Li):Li},e.setConfig=function(){let Ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};DA(Ut),be=!0},e.clearConfig=function(){_d=null,be=!1},e.isValidAttribute=function(Ut,Me,dt){_d||DA({});const Dt=yr(Ut),Sr=yr(Me);return MO(Dt,Sr,dt)},e.addHook=function(Ut,Me){typeof Me=="function"&&bv(I[Ut],Me)},e.removeHook=function(Ut,Me){if(Me!==void 0){const dt=nOe(I[Ut],Me);return dt===-1?void 0:rOe(I[Ut],dt,1)[0]}return g7(I[Ut])},e.removeHooks=function(Ut){I[Ut]=[]},e.removeAllHooks=function(){I=w7()},e}fee();Q([]);Q("");const xOe={class:"lucide lucide-panel-right-open",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function _Oe(t,e){return T(),R("svg",xOe,[...e[0]||(e[0]=[u("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"},null,-1),u("path",{d:"M15 3v18"},null,-1),u("path",{d:"m10 15-3-3 3-3"},null,-1)])])}zt({name:"lucide-panel-right-open",render:_Oe});const wOe=typeof window<"u";var k7;wOe&&((k7=window==null?void 0:window.navigator)!=null&&k7.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const kOe=Object.freeze({aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"});Object.freeze(new Set(Object.keys(kOe)));const ph=typeof window<"u";var S7;ph&&(S7=window==null?void 0:window.navigator)!=null&&S7.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function C7(t){return t!=null}const SOe=Object.freeze({aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"});Object.freeze(new Set(Object.keys(SOe)));const COe=ph&&("ontouchstart"in window||TOe()>0),AOe=COe?"pointerdown":"click";function TOe(){return typeof navigator<"u"&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)||0}function $Oe(t,e,n=window.Event){const l=e,{type:r,bubbles:s=!1,cancelable:i=!1}=l,a=$s(l,["type","bubbles","cancelable"]);if(!C7(r)||r==="")return!1;let o;return C7(n)?o=new n(r,{bubbles:s,cancelable:i}):(o=document.createEvent("HTMLEvents"),o.initEvent(r,s,i)),Object.assign(o,a),t.dispatchEvent(o)}const MOe="clickoutside",EOe=new Set;ph&&document.addEventListener(AOe,t=>{const e=t.target,n=t.composedPath&&t.composedPath();EOe.forEach(r=>{r!==e&&(n?!n.includes(r):!r.contains(e))&&(!r.__transferElement||r.__transferElement!==e&&!r.__transferElement.contains(e))&&$Oe(r,{type:MOe})})},!0);const DOe=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];let kw;if(ph){for(const t of DOe)if(t[1]in document){kw=t;break}}Z(()=>!1);const ROe=new Set,POe=new WeakMap;if(ph&&kw){const t=kw[2],e=kw[4];document.addEventListener(e,()=>{if(ROe.forEach(n=>{n.value=!1}),document[t]){const n=POe.get(document[t]);n&&(n.value=!0)}},!1)}const pee=new Map;pee.set("x",0);pee.set("y",0);var Tp=[],IOe=function(){return Tp.some(function(t){return t.activeTargets.length>0})},OOe=function(){return Tp.some(function(t){return t.skippedTargets.length>0})},A7="ResizeObserver loop completed with undelivered notifications.",LOe=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:A7}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=A7),window.dispatchEvent(t)},c1;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(c1||(c1={}));var $p=function(t){return Object.freeze(t)},VOe=function(){function t(e,n){this.inlineSize=e,this.blockSize=n,$p(this)}return t}(),hee=function(){function t(e,n,r,s){return this.x=e,this.y=n,this.width=r,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,$p(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,s=e.top,i=e.right,a=e.bottom,o=e.left,l=e.width,d=e.height;return{x:n,y:r,top:s,right:i,bottom:a,left:o,width:l,height:d}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),FP=function(t){return t instanceof SVGElement&&"getBBox"in t},mee=function(t){if(FP(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var s=t,i=s.offsetWidth,a=s.offsetHeight;return!(i||a||t.getClientRects().length)},T7=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},NOe=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},i0=typeof window<"u"?window:{},Ox=new WeakMap,$7=/auto|scroll/,jOe=/^tb|vertical/,FOe=/msie|trident/i.test(i0.navigator&&i0.navigator.userAgent),Yo=function(t){return parseFloat(t||"0")},jm=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new VOe((n?e:t)||0,(n?t:e)||0)},M7=$p({devicePixelContentBoxSize:jm(),borderBoxSize:jm(),contentBoxSize:jm(),contentRect:new hee(0,0,0,0)}),gee=function(t,e){if(e===void 0&&(e=!1),Ox.has(t)&&!e)return Ox.get(t);if(mee(t))return Ox.set(t,M7),M7;var n=getComputedStyle(t),r=FP(t)&&t.ownerSVGElement&&t.getBBox(),s=!FOe&&n.boxSizing==="border-box",i=jOe.test(n.writingMode||""),a=!r&&$7.test(n.overflowY||""),o=!r&&$7.test(n.overflowX||""),l=r?0:Yo(n.paddingTop),d=r?0:Yo(n.paddingRight),c=r?0:Yo(n.paddingBottom),f=r?0:Yo(n.paddingLeft),p=r?0:Yo(n.borderTopWidth),h=r?0:Yo(n.borderRightWidth),m=r?0:Yo(n.borderBottomWidth),g=r?0:Yo(n.borderLeftWidth),y=f+d,x=l+c,_=g+h,k=p+m,w=o?t.offsetHeight-k-t.clientHeight:0,S=a?t.offsetWidth-_-t.clientWidth:0,C=s?y+_:0,A=s?x+k:0,M=r?r.width:Yo(n.width)-C-S,E=r?r.height:Yo(n.height)-A-w,P=M+y+S+_,I=E+x+w+k,F=$p({devicePixelContentBoxSize:jm(Math.round(M*devicePixelRatio),Math.round(E*devicePixelRatio),i),borderBoxSize:jm(P,I,i),contentBoxSize:jm(M,E,i),contentRect:new hee(f,l,M,E)});return Ox.set(t,F),F},vee=function(t,e,n){var r=gee(t,n),s=r.borderBoxSize,i=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(e){case c1.DEVICE_PIXEL_CONTENT_BOX:return a;case c1.BORDER_BOX:return s;default:return i}},BOe=function(){function t(e){var n=gee(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=$p([n.borderBoxSize]),this.contentBoxSize=$p([n.contentBoxSize]),this.devicePixelContentBoxSize=$p([n.devicePixelContentBoxSize])}return t}(),yee=function(t){if(mee(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},zOe=function(){var t=1/0,e=[];Tp.forEach(function(i){if(i.activeTargets.length!==0){var a=[];i.activeTargets.forEach(function(o){var l=new BOe(o.target),d=yee(o.target);a.push(l),o.lastReportedSize=vee(o.target,o.observedBox),d<t&&(t=d)}),e.push(function(){i.callback.call(i.observer,a,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var s=r[n];s()}return t},E7=function(t){Tp.forEach(function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach(function(n){n.isActive()&&(yee(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))})})},UOe=function(){var t=0;for(E7(t);IOe();)t=zOe(),E7(t);return OOe()&&LOe(),t>0},Z4,bee=[],HOe=function(){return bee.splice(0).forEach(function(t){return t()})},qOe=function(t){if(!Z4){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return HOe()}).observe(n,r),Z4=function(){n.textContent="".concat(e?e--:e++)}}bee.push(t),Z4()},WOe=function(t){qOe(function(){requestAnimationFrame(t)})},Sw=0,GOe=function(){return!!Sw},YOe=250,KOe={attributes:!0,characterData:!0,childList:!0,subtree:!0},D7=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],R7=function(t){return t===void 0&&(t=0),Date.now()+t},J4=!1,XOe=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=YOe),!J4){J4=!0;var r=R7(e);WOe(function(){var s=!1;try{s=UOe()}finally{if(J4=!1,e=r-R7(),!GOe())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,KOe)};document.body?n():i0.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),D7.forEach(function(n){return i0.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),D7.forEach(function(n){return i0.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t}(),xM=new XOe,P7=function(t){!Sw&&t>0&&xM.start(),Sw+=t,!Sw&&xM.stop()},QOe=function(t){return!FP(t)&&!NOe(t)&&getComputedStyle(t).display==="inline"},ZOe=function(){function t(e,n){this.target=e,this.observedBox=n||c1.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=vee(this.target,this.observedBox,!0);return QOe(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),JOe=function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t}(),Lx=new WeakMap,I7=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Vx=function(){function t(){}return t.connect=function(e,n){var r=new JOe(e,n);Lx.set(e,r)},t.observe=function(e,n,r){var s=Lx.get(e),i=s.observationTargets.length===0;I7(s.observationTargets,n)<0&&(i&&Tp.push(s),s.observationTargets.push(new ZOe(n,r&&r.box)),P7(1),xM.schedule())},t.unobserve=function(e,n){var r=Lx.get(e),s=I7(r.observationTargets,n),i=r.observationTargets.length===1;s>=0&&(i&&Tp.splice(Tp.indexOf(r),1),r.observationTargets.splice(s,1),P7(-1))},t.disconnect=function(e){var n=this,r=Lx.get(e);r.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t}(),eLe=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Vx.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!T7(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Vx.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!T7(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Vx.unobserve(this,e)},t.prototype.disconnect=function(){Vx.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();const tLe=new WeakMap;function nLe(t){var n;var e;for(let r=0,s=t.length;r<s;++r){const i=t[r],a=tLe.get(i.target);if(typeof a=="function"){const{inlineSize:o,blockSize:l}=(n=(e=i.borderBoxSize)==null?void 0:e[0])!=null?n:{},{offsetWidth:d,offsetHeight:c}=i.target;a(Object.assign(i,{offsetWidth:d,offsetHeight:c,width:o!=null?o:d,height:l!=null?l:c}))}}}new(ph&&window.ResizeObserver||eLe)(nLe);const rLe=Q(!1);Z(()=>rLe.value);const O7="__theme_style__",eT="__theme_observer__",L7=Jt(new Map),V7=new Map;et(L7,()=>{if(!ph)return;V7.clear();const t=document.head.querySelector(`#${O7}`);t&&document.head.removeChild(t);const e=document.createElement("style");let n=`.${eT} { width: 1px }`,r=1;for(const[s,[i,a]]of L7.entries())n+=` html.${i} .${eT}, .${a} .${eT} { width: ${++r}px }`,V7.set(r,s);e.textContent=n,e.id=O7,document.head.appendChild(e)});(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.vgl-layout{--vgl-placeholder-bg: red;--vgl-placeholder-opacity: 20%;--vgl-placeholder-z-index: 2;--vgl-item-resizing-z-index: 3;--vgl-item-resizing-opacity: 60%;--vgl-item-dragging-z-index: 3;--vgl-item-dragging-opacity: 100%;--vgl-resizer-size: 10px;--vgl-resizer-border-color: #444;--vgl-resizer-border-width: 2px;position:relative;box-sizing:border-box;transition:height .2s ease}.vgl-item{position:absolute;box-sizing:border-box;transition:.2s ease;transition-property:left,top,right}.vgl-item--placeholder{z-index:var(--vgl-placeholder-z-index, 2);-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:var(--vgl-placeholder-bg, red);opacity:var(--vgl-placeholder-opacity, 20%);transition-duration:.1s}.vgl-item--no-touch{touch-action:none}.vgl-item--transform{right:auto;left:0;transition-property:transform}.vgl-item--transform.vgl-item--rtl{right:0;left:auto}.vgl-item--resizing{z-index:var(--vgl-item-resizing-z-index, 3);-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:var(--vgl-item-resizing-opacity, 60%)}.vgl-item--dragging{z-index:var(--vgl-item-dragging-z-index, 3);-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:var(--vgl-item-dragging-opacity, 100%);transition:none}.vgl-item__resizer{position:absolute;right:0;bottom:0;box-sizing:border-box;width:var(--vgl-resizer-size);height:var(--vgl-resizer-size);cursor:se-resize}.vgl-item__resizer:before{position:absolute;top:0;right:3px;bottom:3px;left:0;content:"";border:0 solid var(--vgl-resizer-border-color);border-right-width:var(--vgl-resizer-border-width);border-bottom-width:var(--vgl-resizer-border-width)}.vgl-item__resizer--rtl{right:auto;left:0;cursor:sw-resize}.vgl-item__resizer--rtl:before{top:0;right:0;bottom:3px;left:3px;border-right-width:0;border-bottom-width:var(--vgl-resizer-border-width);border-left-width:var(--vgl-resizer-border-width)}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _M=function(t,e){return _M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},_M(t,e)};function Te(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_M(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sLe=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),iLe=function(){function t(){this.browser=new sLe,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window!="undefined"}return t}(),tn=new iLe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(tn.wxa=!0,tn.touchEventsSupported=!0):typeof document=="undefined"&&typeof self!="undefined"?tn.worker=!0:!tn.hasGlobalWindow||"Deno"in window?(tn.node=!0,tn.svgSupported=!0):aLe(navigator.userAgent,tn);function aLe(t,e){var n=e.browser,r=t.match(/Firefox\/([\d.]+)/),s=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),i=t.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]),s&&(n.ie=!0,n.version=s[1]),i&&(n.edge=!0,n.version=i[1],n.newEdge=+i[1].split(".")[0]>18),a&&(n.weChat=!0),e.svgSupported=typeof SVGRect!="undefined",e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported=typeof document!="undefined";var o=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in o||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}var BP=12,xee="sans-serif",Ic=BP+"px "+xee,oLe=20,lLe=100,uLe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function dLe(t){var e={};if(typeof JSON=="undefined")return e;for(var n=0;n<t.length;n++){var r=String.fromCharCode(n+32),s=(t.charCodeAt(n)-oLe)/lLe;e[r]=s}return e}var cLe=dLe(uLe),Oc={createCanvas:function(){return typeof document!="undefined"&&document.createElement("canvas")},measureText:function(){var t,e;return function(n,r){if(!t){var s=Oc.createCanvas();t=s&&s.getContext("2d")}if(t)return e!==r&&(e=t.font=r||Ic),t.measureText(n);n=n||"",r=r||Ic;var i=/((?:\d+)?\.?\d*)px/.exec(r),a=i&&+i[1]||BP,o=0;if(r.indexOf("mono")>=0)o=a*n.length;else for(var l=0;l<n.length;l++){var d=cLe[n[l]];o+=d==null?a:d*a}return{width:o}}}(),loadImage:function(t,e,n){var r=new Image;return r.onload=e,r.onerror=n,r.src=t,r}},_ee=Bl(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,e){return t["[object "+e+"]"]=!0,t},{}),wee=Bl(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,e){return t["[object "+e+"Array]"]=!0,t},{}),Og=Object.prototype.toString,VC=Array.prototype,fLe=VC.forEach,pLe=VC.filter,zP=VC.slice,hLe=VC.map,N7=function(){}.constructor,Nx=N7?N7.prototype:null,UP="__proto__",mLe=2311;function kee(){return mLe++}function HP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];typeof console!="undefined"&&console.error.apply(console,t)}function kt(t){if(t==null||typeof t!="object")return t;var e=t,n=Og.call(t);if(n==="[object Array]"){if(!a0(t)){e=[];for(var r=0,s=t.length;r<s;r++)e[r]=kt(t[r])}}else if(wee[n]){if(!a0(t)){var i=t.constructor;if(i.from)e=i.from(t);else{e=new i(t.length);for(var r=0,s=t.length;r<s;r++)e[r]=t[r]}}}else if(!_ee[n]&&!a0(t)&&!mg(t)){e={};for(var a in t)t.hasOwnProperty(a)&&a!==UP&&(e[a]=kt(t[a]))}return e}function Ht(t,e,n){if(!wt(e)||!wt(t))return n?kt(e):t;for(var r in e)if(e.hasOwnProperty(r)&&r!==UP){var s=t[r],i=e[r];wt(i)&&wt(s)&&!He(i)&&!He(s)&&!mg(i)&&!mg(s)&&!j7(i)&&!j7(s)&&!a0(i)&&!a0(s)?Ht(s,i,n):(n||!(r in t))&&(t[r]=kt(e[r]))}return t}function qP(t,e){for(var n=t[0],r=1,s=t.length;r<s;r++)n=Ht(n,t[r],e);return n}function Ne(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&n!==UP&&(t[n]=e[n]);return t}function _t(t,e,n){for(var r=sn(e),s=0,i=r.length;s<i;s++){var a=r[s];(n?e[a]!=null:t[a]==null)&&(t[a]=e[a])}return t}function Xt(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function gLe(t,e){var n=t.prototype;function r(){}r.prototype=e.prototype,t.prototype=new r;for(var s in n)n.hasOwnProperty(s)&&(t.prototype[s]=n[s]);t.prototype.constructor=t,t.superClass=e}function Gr(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),s=0;s<r.length;s++){var i=r[s];i!=="constructor"&&(n?e[i]!=null:t[i]==null)&&(t[i]=e[i])}else _t(t,e,n)}function si(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function de(t,e,n){if(t&&e)if(t.forEach&&t.forEach===fLe)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,s=t.length;r<s;r++)e.call(n,t[r],r,t);else for(var i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function We(t,e,n){if(!t)return[];if(!e)return WP(t);if(t.map&&t.map===hLe)return t.map(e,n);for(var r=[],s=0,i=t.length;s<i;s++)r.push(e.call(n,t[s],s,t));return r}function Bl(t,e,n,r){if(t&&e){for(var s=0,i=t.length;s<i;s++)n=e.call(r,n,t[s],s,t);return n}}function Sn(t,e,n){if(!t)return[];if(!e)return WP(t);if(t.filter&&t.filter===pLe)return t.filter(e,n);for(var r=[],s=0,i=t.length;s<i;s++)e.call(n,t[s],s,t)&&r.push(t[s]);return r}function vLe(t,e,n){if(t&&e){for(var r=0,s=t.length;r<s;r++)if(e.call(n,t[r],r,t))return t[r]}}function sn(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function yLe(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return t.apply(e,n.concat(zP.call(arguments)))}}var ct=Nx&&bt(Nx.bind)?Nx.call.bind(Nx.bind):yLe;function Nt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(zP.call(arguments)))}}function He(t){return Array.isArray?Array.isArray(t):Og.call(t)==="[object Array]"}function bt(t){return typeof t=="function"}function ot(t){return typeof t=="string"}function wM(t){return Og.call(t)==="[object String]"}function hn(t){return typeof t=="number"}function wt(t){var e=typeof t;return e==="function"||!!t&&e==="object"}function j7(t){return!!_ee[Og.call(t)]}function ea(t){return!!wee[Og.call(t)]}function mg(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function NC(t){return t.colorStops!=null}function bLe(t){return t.image!=null}function xLe(t){return Og.call(t)==="[object RegExp]"}function f1(t){return t!==t}function xs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)if(t[n]!=null)return t[n]}function Ot(t,e){return t!=null?t:e}function Dl(t,e,n){return t!=null?t:e!=null?e:n}function WP(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return zP.apply(t,e)}function GP(t){if(typeof t=="number")return[t,t,t,t];var e=t.length;return e===2?[t[0],t[1],t[0],t[1]]:e===3?[t[0],t[1],t[2],t[1]]:t}function Ei(t,e){if(!t)throw new Error(e)}function Ao(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var See="__ec_primitive__";function vk(t){t[See]=!0}function a0(t){return t[See]}var _Le=function(){function t(){this.data={}}return t.prototype.delete=function(e){var n=this.has(e);return n&&delete this.data[e],n},t.prototype.has=function(e){return this.data.hasOwnProperty(e)},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,n){return this.data[e]=n,this},t.prototype.keys=function(){return sn(this.data)},t.prototype.forEach=function(e){var n=this.data;for(var r in n)n.hasOwnProperty(r)&&e(n[r],r)},t}(),Cee=typeof Map=="function";function wLe(){return Cee?new Map:new _Le}var kLe=function(){function t(e){var n=He(e);this.data=wLe();var r=this;e instanceof t?e.each(s):e&&de(e,s);function s(i,a){n?r.set(i,a):r.set(a,i)}}return t.prototype.hasKey=function(e){return this.data.has(e)},t.prototype.get=function(e){return this.data.get(e)},t.prototype.set=function(e,n){return this.data.set(e,n),n},t.prototype.each=function(e,n){this.data.forEach(function(r,s){e.call(n,r,s)})},t.prototype.keys=function(){var e=this.data.keys();return Cee?Array.from(e):e},t.prototype.removeKey=function(e){this.data.delete(e)},t}();function mt(t){return new kLe(t)}function p1(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];for(var s=t.length,r=0;r<e.length;r++)n[r+s]=e[r];return n}function jC(t,e){var n;if(Object.create)n=Object.create(t);else{var r=function(){};r.prototype=t,n=new r}return e&&Ne(n,e),n}function Aee(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function pt(t,e){return t.hasOwnProperty(e)}function Vr(){}var Cw=180/Math.PI;function hh(t,e){return t==null&&(t=0),e==null&&(e=0),[t,e]}function hi(t,e){return t[0]=e[0],t[1]=e[1],t}function Hu(t){return[t[0],t[1]]}function SLe(t,e,n){return t[0]=e,t[1]=n,t}function F7(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function kM(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function ip(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function SM(t){return Math.sqrt(CLe(t))}function CLe(t){return t[0]*t[0]+t[1]*t[1]}function Aw(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Lg(t,e){var n=SM(e);return n===0?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function CM(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var sc=CM;function ALe(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var Mp=ALe;function Tw(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function Ls(t,e,n){var r=e[0],s=e[1];return t[0]=n[0]*r+n[2]*s+n[4],t[1]=n[1]*r+n[3]*s+n[5],t}function ic(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function ac(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var Nh=function(){function t(e,n){this.target=e,this.topTarget=n&&n.topTarget}return t}(),TLe=function(){function t(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(e){for(var n=e.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Nh(n,e),"dragstart",e.event))},t.prototype._drag=function(e){var n=this._draggingTarget;if(n){var r=e.offsetX,s=e.offsetY,i=r-this._x,a=s-this._y;this._x=r,this._y=s,n.drift(i,a,e),this.handler.dispatchToElement(new Nh(n,e),"drag",e.event);var o=this.handler.findHover(r,s,n).target,l=this._dropTarget;this._dropTarget=o,n!==o&&(l&&o!==l&&this.handler.dispatchToElement(new Nh(l,e),"dragleave",e.event),o&&o!==l&&this.handler.dispatchToElement(new Nh(o,e),"dragenter",e.event))}},t.prototype._dragEnd=function(e){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new Nh(n,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Nh(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},t}(),co=function(){function t(e){e&&(this._$eventProcessor=e)}return t.prototype.on=function(e,n,r,s){this._$handlers||(this._$handlers={});var i=this._$handlers;if(typeof n=="function"&&(s=r,r=n,n=null),!r||!e)return this;var a=this._$eventProcessor;n!=null&&a&&a.normalizeQuery&&(n=a.normalizeQuery(n)),i[e]||(i[e]=[]);for(var o=0;o<i[e].length;o++)if(i[e][o].h===r)return this;var l={h:r,query:n,ctx:s||this,callAtLast:r.zrEventfulCallAtLast},d=i[e].length-1,c=i[e][d];return c&&c.callAtLast?i[e].splice(d,0,l):i[e].push(l),this},t.prototype.isSilent=function(e){var n=this._$handlers;return!n||!n[e]||!n[e].length},t.prototype.off=function(e,n){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(n){if(r[e]){for(var s=[],i=0,a=r[e].length;i<a;i++)r[e][i].h!==n&&s.push(r[e][i]);r[e]=s}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},t.prototype.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var s=this._$handlers[e],i=this._$eventProcessor;if(s)for(var a=n.length,o=s.length,l=0;l<o;l++){var d=s[l];if(!(i&&i.filter&&d.query!=null&&!i.filter(e,d.query)))switch(a){case 0:d.h.call(d.ctx);break;case 1:d.h.call(d.ctx,n[0]);break;case 2:d.h.call(d.ctx,n[0],n[1]);break;default:d.h.apply(d.ctx,n);break}}return i&&i.afterTrigger&&i.afterTrigger(e),this},t.prototype.triggerWithContext=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var s=this._$handlers[e],i=this._$eventProcessor;if(s)for(var a=n.length,o=n[a-1],l=s.length,d=0;d<l;d++){var c=s[d];if(!(i&&i.filter&&c.query!=null&&!i.filter(e,c.query)))switch(a){case 0:c.h.call(o);break;case 1:c.h.call(o,n[0]);break;case 2:c.h.call(o,n[0],n[1]);break;default:c.h.apply(o,n.slice(1,a-1));break}}return i&&i.afterTrigger&&i.afterTrigger(e),this},t}(),$Le=Math.log(2);function AM(t,e,n,r,s,i){var a=r+"-"+s,o=t.length;if(i.hasOwnProperty(a))return i[a];if(e===1){var l=Math.round(Math.log((1<<o)-1&~s)/$Le);return t[n][l]}for(var d=r|1<<n,c=n+1;r&1<<c;)c++;for(var f=0,p=0,h=0;p<o;p++){var m=1<<p;m&s||(f+=(h%2?-1:1)*t[n][p]*AM(t,e-1,c,d,s|m,i),h++)}return i[a]=f,f}function B7(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},s=AM(n,8,0,0,0,r);if(s!==0){for(var i=[],a=0;a<8;a++)for(var o=0;o<8;o++)i[o]==null&&(i[o]=0),i[o]+=((a+o)%2?-1:1)*AM(n,7,a===0?1:0,1<<a,1<<o,r)/s*e[a];return function(l,d,c){var f=d*i[6]+c*i[7]+1;l[0]=(d*i[0]+c*i[1]+i[2])/f,l[1]=(d*i[3]+c*i[4]+i[5])/f}}}var z7="___zrEVENTSAVED",tT=[];function MLe(t,e,n,r,s){return TM(tT,e,r,s,!0)&&TM(t,n,tT[0],tT[1])}function TM(t,e,n,r,s){if(e.getBoundingClientRect&&tn.domSupported&&!Tee(e)){var i=e[z7]||(e[z7]={}),a=ELe(e,i),o=DLe(a,i,s);if(o)return o(t,n,r),!0}return!1}function ELe(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],s=["top","bottom"],i=0;i<4;i++){var a=document.createElement("div"),o=a.style,l=i%2,d=(i>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",s[d]+":0",r[1-l]+":auto",s[1-d]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}function DLe(t,e,n){for(var r=n?"invTrans":"trans",s=e[r],i=e.srcCoords,a=[],o=[],l=!0,d=0;d<4;d++){var c=t[d].getBoundingClientRect(),f=2*d,p=c.left,h=c.top;a.push(p,h),l=l&&i&&p===i[f]&&h===i[f+1],o.push(t[d].offsetLeft,t[d].offsetTop)}return l&&s?s:(e.srcCoords=a,e[r]=n?B7(o,a):B7(a,o))}function Tee(t){return t.nodeName.toUpperCase()==="CANVAS"}var RLe=/([&<>"'])/g,PLe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function bi(t){return t==null?"":(t+"").replace(RLe,function(e,n){return PLe[n]})}var ILe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,nT=[],OLe=tn.browser.firefox&&+tn.browser.version.split(".")[0]<39;function $M(t,e,n,r){return n=n||{},r?U7(t,e,n):OLe&&e.layerX!=null&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):e.offsetX!=null?(n.zrX=e.offsetX,n.zrY=e.offsetY):U7(t,e,n),n}function U7(t,e,n){if(tn.domSupported&&t.getBoundingClientRect){var r=e.clientX,s=e.clientY;if(Tee(t)){var i=t.getBoundingClientRect();n.zrX=r-i.left,n.zrY=s-i.top;return}else if(TM(nT,t,r,s)){n.zrX=nT[0],n.zrY=nT[1];return}}n.zrX=n.zrY=0}function YP(t){return t||window.event}function Ra(t,e,n){if(e=YP(e),e.zrX!=null)return e;var r=e.type,s=r&&r.indexOf("touch")>=0;if(s){var a=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];a&&$M(t,a,e,n)}else{$M(t,e,e,n);var i=LLe(e);e.zrDelta=i?i/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&ILe.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function LLe(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,r=t.deltaY;if(n==null||r==null)return e;var s=Math.abs(r!==0?r:n),i=r>0?-1:r<0?1:n>0?-1:1;return 3*s*i}function MM(t,e,n,r){t.addEventListener(e,n,r)}function VLe(t,e,n,r){t.removeEventListener(e,n,r)}var sd=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function H7(t){return t.which===2||t.which===3}var NLe=function(){function t(){this._track=[]}return t.prototype.recognize=function(e,n,r){return this._doTrack(e,n,r),this._recognize(e)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(e,n,r){var s=e.touches;if(s){for(var i={points:[],touches:[],target:n,event:e},a=0,o=s.length;a<o;a++){var l=s[a],d=$M(r,l,{});i.points.push([d.zrX,d.zrY]),i.touches.push(l)}this._track.push(i)}},t.prototype._recognize=function(e){for(var n in rT)if(rT.hasOwnProperty(n)){var r=rT[n](this._track,e);if(r)return r}},t}();function q7(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function jLe(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var rT={pinch:function(t,e){var n=t.length;if(n){var r=(t[n-1]||{}).points,s=(t[n-2]||{}).points||r;if(s&&s.length>1&&r&&r.length>1){var i=q7(r)/q7(s);!isFinite(i)&&(i=1),e.pinchScale=i;var a=jLe(r);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:t[0].target,event:e}}}}};function va(){return[1,0,0,1,0,0]}function FC(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function KP(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function qu(t,e,n){var r=e[0]*n[0]+e[2]*n[1],s=e[1]*n[0]+e[3]*n[1],i=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],o=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=s,t[2]=i,t[3]=a,t[4]=o,t[5]=l,t}function zl(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function mh(t,e,n,r){r===void 0&&(r=[0,0]);var s=e[0],i=e[2],a=e[4],o=e[1],l=e[3],d=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=s*f+o*c,t[1]=-s*c+o*f,t[2]=i*f+l*c,t[3]=-i*c+f*l,t[4]=f*(a-r[0])+c*(d-r[1])+r[0],t[5]=f*(d-r[1])-c*(a-r[0])+r[1],t}function XP(t,e,n){var r=n[0],s=n[1];return t[0]=e[0]*r,t[1]=e[1]*s,t[2]=e[2]*r,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*s,t}function Vg(t,e){var n=e[0],r=e[2],s=e[4],i=e[1],a=e[3],o=e[5],l=n*a-i*r;return l?(l=1/l,t[0]=a*l,t[1]=-i*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*o-a*s)*l,t[5]=(i*s-n*o)*l,t):null}function FLe(t){var e=va();return KP(e,t),e}var qt=function(){function t(e,n){this.x=e||0,this.y=n||0}return t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(e,n){return this.x=e,this.y=n,this},t.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.scale=function(e){this.x*=e,this.y*=e},t.prototype.scaleAndAdd=function(e,n){this.x+=e.x*n,this.y+=e.y*n},t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},t.prototype.distance=function(e){var n=this.x-e.x,r=this.y-e.y;return Math.sqrt(n*n+r*r)},t.prototype.distanceSquare=function(e){var n=this.x-e.x,r=this.y-e.y;return n*n+r*r},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(e){if(e){var n=this.x,r=this.y;return this.x=e[0]*n+e[2]*r+e[4],this.y=e[1]*n+e[3]*r+e[5],this}},t.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},t.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},t.set=function(e,n,r){e.x=n,e.y=r},t.copy=function(e,n){e.x=n.x,e.y=n.y},t.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.lenSquare=function(e){return e.x*e.x+e.y*e.y},t.dot=function(e,n){return e.x*n.x+e.y*n.y},t.add=function(e,n,r){e.x=n.x+r.x,e.y=n.y+r.y},t.sub=function(e,n,r){e.x=n.x-r.x,e.y=n.y-r.y},t.scale=function(e,n,r){e.x=n.x*r,e.y=n.y*r},t.scaleAndAdd=function(e,n,r,s){e.x=n.x+r.x*s,e.y=n.y+r.y*s},t.lerp=function(e,n,r,s){var i=1-s;e.x=i*n.x+s*r.x,e.y=i*n.y+s*r.y},t}(),jx=Math.min,Fx=Math.max,of=new qt,lf=new qt,uf=new qt,df=new qt,Sv=new qt,Cv=new qt,Gt=function(){function t(e,n,r,s){r<0&&(e=e+r,r=-r),s<0&&(n=n+s,s=-s),this.x=e,this.y=n,this.width=r,this.height=s}return t.prototype.union=function(e){var n=jx(e.x,this.x),r=jx(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Fx(e.x+e.width,this.x+this.width)-n:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Fx(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=n,this.y=r},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(e){var n=this,r=e.width/n.width,s=e.height/n.height,i=va();return zl(i,i,[-n.x,-n.y]),XP(i,i,[r,s]),zl(i,i,[e.x,e.y]),i},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var r=this,s=r.x,i=r.x+r.width,a=r.y,o=r.y+r.height,l=e.x,d=e.x+e.width,c=e.y,f=e.y+e.height,p=!(i<l||d<s||o<c||f<a);if(n){var h=1/0,m=0,g=Math.abs(i-l),y=Math.abs(d-s),x=Math.abs(o-c),_=Math.abs(f-a),k=Math.min(g,y),w=Math.min(x,_);i<l||d<s?k>m&&(m=k,g<y?qt.set(Cv,-g,0):qt.set(Cv,y,0)):k<h&&(h=k,g<y?qt.set(Sv,g,0):qt.set(Sv,-y,0)),o<c||f<a?w>m&&(m=w,x<_?qt.set(Cv,0,-x):qt.set(Cv,0,_)):k<h&&(h=k,x<_?qt.set(Sv,0,x):qt.set(Sv,0,-_))}return n&&qt.copy(n,p?Sv:Cv),p},t.prototype.contain=function(e,n){var r=this;return e>=r.x&&e<=r.x+r.width&&n>=r.y&&n<=r.y+r.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(e,n){e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height},t.applyTransform=function(e,n,r){if(!r){e!==n&&t.copy(e,n);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var s=r[0],i=r[3],a=r[4],o=r[5];e.x=n.x*s+a,e.y=n.y*i+o,e.width=n.width*s,e.height=n.height*i,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}of.x=uf.x=n.x,of.y=df.y=n.y,lf.x=df.x=n.x+n.width,lf.y=uf.y=n.y+n.height,of.transform(r),df.transform(r),lf.transform(r),uf.transform(r),e.x=jx(of.x,lf.x,uf.x,df.x),e.y=jx(of.y,lf.y,uf.y,df.y);var l=Fx(of.x,lf.x,uf.x,df.x),d=Fx(of.y,lf.y,uf.y,df.y);e.width=l-e.x,e.height=d-e.y},t}(),$ee="silent";function BLe(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:zLe}}function zLe(){sd(this.event)}var ULe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.handler=null,n}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(co),Av=function(){function t(e,n){this.x=e,this.y=n}return t}(),HLe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],sT=new Gt(0,0,0,0),Mee=function(t){Te(e,t);function e(n,r,s,i,a){var o=t.call(this)||this;return o._hovered=new Av(0,0),o.storage=n,o.painter=r,o.painterRoot=i,o._pointerSize=a,s=s||new ULe,o.proxy=null,o.setHandlerProxy(s),o._draggingMgr=new TLe(o),o}return e.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(de(HLe,function(r){n.on&&n.on(r,this[r],this)},this),n.handler=this),this.proxy=n},e.prototype.mousemove=function(n){var r=n.zrX,s=n.zrY,i=Eee(this,r,s),a=this._hovered,o=a.target;o&&!o.__zr&&(a=this.findHover(a.x,a.y),o=a.target);var l=this._hovered=i?new Av(r,s):this.findHover(r,s),d=l.target,c=this.proxy;c.setCursor&&c.setCursor(d?d.cursor:"default"),o&&d!==o&&this.dispatchToElement(a,"mouseout",n),this.dispatchToElement(l,"mousemove",n),d&&d!==o&&this.dispatchToElement(l,"mouseover",n)},e.prototype.mouseout=function(n){var r=n.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},e.prototype.resize=function(){this._hovered=new Av(0,0)},e.prototype.dispatch=function(n,r){var s=this[n];s&&s.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(n){var r=this.proxy;r.setCursor&&r.setCursor(n)},e.prototype.dispatchToElement=function(n,r,s){n=n||{};var i=n.target;if(!(i&&i.silent)){for(var a="on"+r,o=BLe(r,n,s);i&&(i[a]&&(o.cancelBubble=!!i[a].call(i,o)),i.trigger(r,o),i=i.__hostTarget?i.__hostTarget:i.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(r,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,o),l.trigger&&l.trigger(r,o)}))}},e.prototype.findHover=function(n,r,s){var i=this.storage.getDisplayList(),a=new Av(n,r);if(W7(i,a,n,r,s),this._pointerSize&&!a.target){for(var o=[],l=this._pointerSize,d=l/2,c=new Gt(n-d,r-d,l,l),f=i.length-1;f>=0;f--){var p=i[f];p!==s&&!p.ignore&&!p.ignoreCoarsePointer&&(!p.parent||!p.parent.ignoreCoarsePointer)&&(sT.copy(p.getBoundingRect()),p.transform&&sT.applyTransform(p.transform),sT.intersect(c)&&o.push(p))}if(o.length)for(var h=4,m=Math.PI/12,g=Math.PI*2,y=0;y<d;y+=h)for(var x=0;x<g;x+=m){var _=n+y*Math.cos(x),k=r+y*Math.sin(x);if(W7(o,a,_,k,s),a.target)return a}}return a},e.prototype.processGesture=function(n,r){this._gestureMgr||(this._gestureMgr=new NLe);var s=this._gestureMgr;r==="start"&&s.clear();var i=s.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(r==="end"&&s.clear(),i){var a=i.type;n.gestureEvent=a;var o=new Av;o.target=i.target,this.dispatchToElement(o,a,i.event)}},e}(co);de(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Mee.prototype[t]=function(e){var n=e.zrX,r=e.zrY,s=Eee(this,n,r),i,a;if((t!=="mouseup"||!s)&&(i=this.findHover(n,r),a=i.target),t==="mousedown")this._downEl=a,this._downPoint=[e.zrX,e.zrY],this._upEl=a;else if(t==="mouseup")this._upEl=a;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||sc(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(i,t,e)}});function qLe(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r=t,s=void 0,i=!1;r;){if(r.ignoreClip&&(i=!0),!i){var a=r.getClipPath();if(a&&!a.contain(e,n))return!1}r.silent&&(s=!0);var o=r.__hostTarget;r=o||r.parent}return s?$ee:!0}return!1}function W7(t,e,n,r,s){for(var i=t.length-1;i>=0;i--){var a=t[i],o=void 0;if(a!==s&&!a.ignore&&(o=qLe(a,n,r))&&(!e.topTarget&&(e.topTarget=a),o!==$ee)){e.target=a;break}}}function Eee(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}var Dee=32,Tv=7;function WLe(t){for(var e=0;t>=Dee;)e|=t&1,t>>=1;return t+e}function G7(t,e,n,r){var s=e+1;if(s===n)return 1;if(r(t[s++],t[e])<0){for(;s<n&&r(t[s],t[s-1])<0;)s++;GLe(t,e,s)}else for(;s<n&&r(t[s],t[s-1])>=0;)s++;return s-e}function GLe(t,e,n){for(n--;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}function Y7(t,e,n,r,s){for(r===e&&r++;r<n;r++){for(var i=t[r],a=e,o=r,l;a<o;)l=a+o>>>1,s(i,t[l])<0?o=l:a=l+1;var d=r-a;switch(d){case 3:t[a+3]=t[a+2];case 2:t[a+2]=t[a+1];case 1:t[a+1]=t[a];break;default:for(;d>0;)t[a+d]=t[a+d-1],d--}t[a]=i}}function iT(t,e,n,r,s,i){var a=0,o=0,l=1;if(i(t,e[n+s])>0){for(o=r-s;l<o&&i(t,e[n+s+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=s,l+=s}else{for(o=s+1;l<o&&i(t,e[n+s-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var d=a;a=s-l,l=s-d}for(a++;a<l;){var c=a+(l-a>>>1);i(t,e[n+c])>0?a=c+1:l=c}return l}function aT(t,e,n,r,s,i){var a=0,o=0,l=1;if(i(t,e[n+s])<0){for(o=s+1;l<o&&i(t,e[n+s-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var d=a;a=s-l,l=s-d}else{for(o=r-s;l<o&&i(t,e[n+s+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=s,l+=s}for(a++;a<l;){var c=a+(l-a>>>1);i(t,e[n+c])<0?l=c:a=c+1}return l}function YLe(t,e){var n=Tv,r,s,i=0,a=[];r=[],s=[];function o(h,m){r[i]=h,s[i]=m,i+=1}function l(){for(;i>1;){var h=i-2;if(h>=1&&s[h-1]<=s[h]+s[h+1]||h>=2&&s[h-2]<=s[h]+s[h-1])s[h-1]<s[h+1]&&h--;else if(s[h]>s[h+1])break;c(h)}}function d(){for(;i>1;){var h=i-2;h>0&&s[h-1]<s[h+1]&&h--,c(h)}}function c(h){var m=r[h],g=s[h],y=r[h+1],x=s[h+1];s[h]=g+x,h===i-3&&(r[h+1]=r[h+2],s[h+1]=s[h+2]),i--;var _=aT(t[y],t,m,g,0,e);m+=_,g-=_,g!==0&&(x=iT(t[m+g-1],t,y,x,x-1,e),x!==0&&(g<=x?f(m,g,y,x):p(m,g,y,x)))}function f(h,m,g,y){var x=0;for(x=0;x<m;x++)a[x]=t[h+x];var _=0,k=g,w=h;if(t[w++]=t[k++],--y===0){for(x=0;x<m;x++)t[w+x]=a[_+x];return}if(m===1){for(x=0;x<y;x++)t[w+x]=t[k+x];t[w+y]=a[_];return}for(var S=n,C,A,M;;){C=0,A=0,M=!1;do if(e(t[k],a[_])<0){if(t[w++]=t[k++],A++,C=0,--y===0){M=!0;break}}else if(t[w++]=a[_++],C++,A=0,--m===1){M=!0;break}while((C|A)<S);if(M)break;do{if(C=aT(t[k],a,_,m,0,e),C!==0){for(x=0;x<C;x++)t[w+x]=a[_+x];if(w+=C,_+=C,m-=C,m<=1){M=!0;break}}if(t[w++]=t[k++],--y===0){M=!0;break}if(A=iT(a[_],t,k,y,0,e),A!==0){for(x=0;x<A;x++)t[w+x]=t[k+x];if(w+=A,k+=A,y-=A,y===0){M=!0;break}}if(t[w++]=a[_++],--m===1){M=!0;break}S--}while(C>=Tv||A>=Tv);if(M)break;S<0&&(S=0),S+=2}if(n=S,n<1&&(n=1),m===1){for(x=0;x<y;x++)t[w+x]=t[k+x];t[w+y]=a[_]}else{if(m===0)throw new Error;for(x=0;x<m;x++)t[w+x]=a[_+x]}}function p(h,m,g,y){var x=0;for(x=0;x<y;x++)a[x]=t[g+x];var _=h+m-1,k=y-1,w=g+y-1,S=0,C=0;if(t[w--]=t[_--],--m===0){for(S=w-(y-1),x=0;x<y;x++)t[S+x]=a[x];return}if(y===1){for(w-=m,_-=m,C=w+1,S=_+1,x=m-1;x>=0;x--)t[C+x]=t[S+x];t[w]=a[k];return}for(var A=n;;){var M=0,E=0,P=!1;do if(e(a[k],t[_])<0){if(t[w--]=t[_--],M++,E=0,--m===0){P=!0;break}}else if(t[w--]=a[k--],E++,M=0,--y===1){P=!0;break}while((M|E)<A);if(P)break;do{if(M=m-aT(a[k],t,h,m,m-1,e),M!==0){for(w-=M,_-=M,m-=M,C=w+1,S=_+1,x=M-1;x>=0;x--)t[C+x]=t[S+x];if(m===0){P=!0;break}}if(t[w--]=a[k--],--y===1){P=!0;break}if(E=y-iT(t[_],a,0,y,y-1,e),E!==0){for(w-=E,k-=E,y-=E,C=w+1,S=k+1,x=0;x<E;x++)t[C+x]=a[S+x];if(y<=1){P=!0;break}}if(t[w--]=t[_--],--m===0){P=!0;break}A--}while(M>=Tv||E>=Tv);if(P)break;A<0&&(A=0),A+=2}if(n=A,n<1&&(n=1),y===1){for(w-=m,_-=m,C=w+1,S=_+1,x=m-1;x>=0;x--)t[C+x]=t[S+x];t[w]=a[k]}else{if(y===0)throw new Error;for(S=w-(y-1),x=0;x<y;x++)t[S+x]=a[x]}}return{mergeRuns:l,forceMergeRuns:d,pushRun:o}}function $w(t,e,n,r){n||(n=0),r||(r=t.length);var s=r-n;if(!(s<2)){var i=0;if(s<Dee){i=G7(t,n,r,e),Y7(t,n,r,n+i,e);return}var a=YLe(t,e),o=WLe(s);do{if(i=G7(t,n,r,e),i<o){var l=s;l>o&&(l=o),Y7(t,n,n+l,n+i,e),i=l}a.pushRun(n,i),a.mergeRuns(),s-=i,n+=i}while(s!==0);a.forceMergeRuns()}}var ua=1,py=2,bm=4,K7=!1;function oT(){K7||(K7=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function X7(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var KLe=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=X7}return t.prototype.traverse=function(e,n){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,n)},t.prototype.getDisplayList=function(e,n){n=n||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(n),r},t.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var n=this._roots,r=this._displayList,s=0,i=n.length;s<i;s++)this._updateAndAddDisplayable(n[s],null,e);r.length=this._displayListLen,$w(r,X7)},t.prototype._updateAndAddDisplayable=function(e,n,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var s=e.getClipPath();if(e.ignoreClip)n=null;else if(s){n?n=n.slice():n=[];for(var i=s,a=e;i;)i.parent=a,i.updateTransform(),n.push(i),a=i,i=i.getClipPath()}if(e.childrenRef){for(var o=e.childrenRef(),l=0;l<o.length;l++){var d=o[l];e.__dirty&&(d.__dirty|=ua),this._updateAndAddDisplayable(d,n,r)}e.__dirty=0}else{var c=e;n&&n.length?c.__clipPaths=n:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(oT(),c.z=0),isNaN(c.z2)&&(oT(),c.z2=0),isNaN(c.zlevel)&&(oT(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=e.getDecalElement&&e.getDecalElement();f&&this._updateAndAddDisplayable(f,n,r);var p=e.getTextGuideLine();p&&this._updateAndAddDisplayable(p,n,r);var h=e.getTextContent();h&&this._updateAndAddDisplayable(h,n,r)}},t.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},t.prototype.delRoot=function(e){if(e instanceof Array){for(var n=0,r=e.length;n<r;n++)this.delRoot(e[n]);return}var s=Xt(this._roots,e);s>=0&&this._roots.splice(s,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),yk;yk=tn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var o0={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)))},elasticOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-o0.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?o0.bounceIn(t*2)*.5:o0.bounceOut(t*2-1)*.5+.5}},Bx=Math.pow,wc=Math.sqrt,bk=1e-8,Ree=1e-4,Q7=wc(3),zx=1/3,yl=hh(),ja=hh(),Fm=hh();function oc(t){return t>-bk&&t<bk}function Pee(t){return t>bk||t<-bk}function rs(t,e,n,r,s){var i=1-s;return i*i*(i*t+3*s*e)+s*s*(s*r+3*i*n)}function Z7(t,e,n,r,s){var i=1-s;return 3*(((e-t)*i+2*(n-e)*s)*i+(r-n)*s*s)}function xk(t,e,n,r,s,i){var a=r+3*(e-n)-t,o=3*(n-e*2+t),l=3*(e-t),d=t-s,c=o*o-3*a*l,f=o*l-9*a*d,p=l*l-3*o*d,h=0;if(oc(c)&&oc(f))if(oc(o))i[0]=0;else{var m=-l/o;m>=0&&m<=1&&(i[h++]=m)}else{var g=f*f-4*c*p;if(oc(g)){var y=f/c,m=-o/a+y,x=-y/2;m>=0&&m<=1&&(i[h++]=m),x>=0&&x<=1&&(i[h++]=x)}else if(g>0){var _=wc(g),k=c*o+1.5*a*(-f+_),w=c*o+1.5*a*(-f-_);k<0?k=-Bx(-k,zx):k=Bx(k,zx),w<0?w=-Bx(-w,zx):w=Bx(w,zx);var m=(-o-(k+w))/(3*a);m>=0&&m<=1&&(i[h++]=m)}else{var S=(2*c*o-3*a*f)/(2*wc(c*c*c)),C=Math.acos(S)/3,A=wc(c),M=Math.cos(C),m=(-o-2*A*M)/(3*a),x=(-o+A*(M+Q7*Math.sin(C)))/(3*a),E=(-o+A*(M-Q7*Math.sin(C)))/(3*a);m>=0&&m<=1&&(i[h++]=m),x>=0&&x<=1&&(i[h++]=x),E>=0&&E<=1&&(i[h++]=E)}}return h}function Iee(t,e,n,r,s){var i=6*n-12*e+6*t,a=9*e+3*r-3*t-9*n,o=3*e-3*t,l=0;if(oc(a)){if(Pee(i)){var d=-o/i;d>=0&&d<=1&&(s[l++]=d)}}else{var c=i*i-4*a*o;if(oc(c))s[0]=-i/(2*a);else if(c>0){var f=wc(c),d=(-i+f)/(2*a),p=(-i-f)/(2*a);d>=0&&d<=1&&(s[l++]=d),p>=0&&p<=1&&(s[l++]=p)}}return l}function Lc(t,e,n,r,s,i){var a=(e-t)*s+t,o=(n-e)*s+e,l=(r-n)*s+n,d=(o-a)*s+a,c=(l-o)*s+o,f=(c-d)*s+d;i[0]=t,i[1]=a,i[2]=d,i[3]=f,i[4]=f,i[5]=c,i[6]=l,i[7]=r}function Oee(t,e,n,r,s,i,a,o,l,d,c){var f,p=.005,h=1/0,m,g,y,x;yl[0]=l,yl[1]=d;for(var _=0;_<1;_+=.05)ja[0]=rs(t,n,s,a,_),ja[1]=rs(e,r,i,o,_),y=Mp(yl,ja),y<h&&(f=_,h=y);h=1/0;for(var k=0;k<32&&!(p<Ree);k++)m=f-p,g=f+p,ja[0]=rs(t,n,s,a,m),ja[1]=rs(e,r,i,o,m),y=Mp(ja,yl),m>=0&&y<h?(f=m,h=y):(Fm[0]=rs(t,n,s,a,g),Fm[1]=rs(e,r,i,o,g),x=Mp(Fm,yl),g<=1&&x<h?(f=g,h=x):p*=.5);return c&&(c[0]=rs(t,n,s,a,f),c[1]=rs(e,r,i,o,f)),wc(h)}function XLe(t,e,n,r,s,i,a,o,l){for(var d=t,c=e,f=0,p=1/l,h=1;h<=l;h++){var m=h*p,g=rs(t,n,s,a,m),y=rs(e,r,i,o,m),x=g-d,_=y-c;f+=Math.sqrt(x*x+_*_),d=g,c=y}return f}function gs(t,e,n,r){var s=1-r;return s*(s*t+2*r*e)+r*r*n}function EM(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function QLe(t,e,n,r,s){var i=t-2*e+n,a=2*(e-t),o=t-r,l=0;if(oc(i)){if(Pee(a)){var d=-o/a;d>=0&&d<=1&&(s[l++]=d)}}else{var c=a*a-4*i*o;if(oc(c)){var d=-a/(2*i);d>=0&&d<=1&&(s[l++]=d)}else if(c>0){var f=wc(c),d=(-a+f)/(2*i),p=(-a-f)/(2*i);d>=0&&d<=1&&(s[l++]=d),p>=0&&p<=1&&(s[l++]=p)}}return l}function Lee(t,e,n){var r=t+n-2*e;return r===0?.5:(t-e)/r}function h1(t,e,n,r,s){var i=(e-t)*r+t,a=(n-e)*r+e,o=(a-i)*r+i;s[0]=t,s[1]=i,s[2]=o,s[3]=o,s[4]=a,s[5]=n}function Vee(t,e,n,r,s,i,a,o,l){var d,c=.005,f=1/0;yl[0]=a,yl[1]=o;for(var p=0;p<1;p+=.05){ja[0]=gs(t,n,s,p),ja[1]=gs(e,r,i,p);var h=Mp(yl,ja);h<f&&(d=p,f=h)}f=1/0;for(var m=0;m<32&&!(c<Ree);m++){var g=d-c,y=d+c;ja[0]=gs(t,n,s,g),ja[1]=gs(e,r,i,g);var h=Mp(ja,yl);if(g>=0&&h<f)d=g,f=h;else{Fm[0]=gs(t,n,s,y),Fm[1]=gs(e,r,i,y);var x=Mp(Fm,yl);y<=1&&x<f?(d=y,f=x):c*=.5}}return l&&(l[0]=gs(t,n,s,d),l[1]=gs(e,r,i,d)),wc(f)}function ZLe(t,e,n,r,s,i,a){for(var o=t,l=e,d=0,c=1/a,f=1;f<=a;f++){var p=f*c,h=gs(t,n,s,p),m=gs(e,r,i,p),g=h-o,y=m-l;d+=Math.sqrt(g*g+y*y),o=h,l=m}return d}var JLe=/cubic-bezier\(([0-9,\.e ]+)\)/;function QP(t){var e=t&&JLe.exec(t);if(e){var n=e[1].split(","),r=+Ao(n[0]),s=+Ao(n[1]),i=+Ao(n[2]),a=+Ao(n[3]);if(isNaN(r+s+i+a))return;var o=[];return function(l){return l<=0?0:l>=1?1:xk(0,r,i,1,l,o)&&rs(0,s,a,1,o[0])}}}var e8e=function(){function t(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Vr,this.ondestroy=e.ondestroy||Vr,this.onrestart=e.onrestart||Vr,e.easing&&this.setEasing(e.easing)}return t.prototype.step=function(e,n){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var r=this._life,s=e-this._startTime-this._pausedTime,i=s/r;i<0&&(i=0),i=Math.min(i,1);var a=this.easingFunc,o=a?a(i):i;if(this.onframe(o),i===1)if(this.loop){var l=s%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(e){this.easing=e,this.easingFunc=bt(e)?e:o0[e]||QP(e)},t}(),Nee=function(){function t(e){this.value=e}return t}(),t8e=function(){function t(){this._len=0}return t.prototype.insert=function(e){var n=new Nee(e);return this.insertEntry(n),n},t.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},t.prototype.remove=function(e){var n=e.prev,r=e.next;n?n.next=r:this.head=r,r?r.prev=n:this.tail=n,e.next=e.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),kb=function(){function t(e){this._list=new t8e,this._maxSize=10,this._map={},this._maxSize=e}return t.prototype.put=function(e,n){var r=this._list,s=this._map,i=null;if(s[e]==null){var a=r.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=r.head;r.remove(l),delete s[l.key],i=l.value,this._lastRemovedEntry=l}o?o.value=n:o=new Nee(n),o.key=e,r.insertEntry(o),s[e]=o}return i},t.prototype.get=function(e){var n=this._map[e],r=this._list;if(n!=null)return n!==r.tail&&(r.remove(n),r.insertEntry(n)),n.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),J7={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Eo(t){return t=Math.round(t),t<0?0:t>255?255:t}function n8e(t){return t=Math.round(t),t<0?0:t>360?360:t}function m1(t){return t<0?0:t>1?1:t}function lT(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?Eo(parseFloat(e)/100*255):Eo(parseInt(e,10))}function Ep(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?m1(parseFloat(e)/100):m1(parseFloat(e))}function uT(t,e,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?t+(e-t)*n*6:n*2<1?e:n*3<2?t+(e-t)*(2/3-n)*6:t}function lc(t,e,n){return t+(e-t)*n}function Ea(t,e,n,r,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=s,t}function DM(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var jee=new kb(20),Ux=null;function jh(t,e){Ux&&DM(Ux,e),Ux=jee.put(t,Ux||e.slice())}function ya(t,e){if(t){e=e||[];var n=jee.get(t);if(n)return DM(e,n);t=t+"";var r=t.replace(/ /g,"").toLowerCase();if(r in J7)return DM(e,J7[r]),jh(t,e),e;var s=r.length;if(r.charAt(0)==="#"){if(s===4||s===5){var i=parseInt(r.slice(1,4),16);if(!(i>=0&&i<=4095)){Ea(e,0,0,0,1);return}return Ea(e,(i&3840)>>4|(i&3840)>>8,i&240|(i&240)>>4,i&15|(i&15)<<4,s===5?parseInt(r.slice(4),16)/15:1),jh(t,e),e}else if(s===7||s===9){var i=parseInt(r.slice(1,7),16);if(!(i>=0&&i<=16777215)){Ea(e,0,0,0,1);return}return Ea(e,(i&16711680)>>16,(i&65280)>>8,i&255,s===9?parseInt(r.slice(7),16)/255:1),jh(t,e),e}return}var a=r.indexOf("("),o=r.indexOf(")");if(a!==-1&&o+1===s){var l=r.substr(0,a),d=r.substr(a+1,o-(a+1)).split(","),c=1;switch(l){case"rgba":if(d.length!==4)return d.length===3?Ea(e,+d[0],+d[1],+d[2],1):Ea(e,0,0,0,1);c=Ep(d.pop());case"rgb":if(d.length>=3)return Ea(e,lT(d[0]),lT(d[1]),lT(d[2]),d.length===3?c:Ep(d[3])),jh(t,e),e;Ea(e,0,0,0,1);return;case"hsla":if(d.length!==4){Ea(e,0,0,0,1);return}return d[3]=Ep(d[3]),RM(d,e),jh(t,e),e;case"hsl":if(d.length!==3){Ea(e,0,0,0,1);return}return RM(d,e),jh(t,e),e;default:return}}Ea(e,0,0,0,1)}}function RM(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=Ep(t[1]),s=Ep(t[2]),i=s<=.5?s*(r+1):s+r-s*r,a=s*2-i;return e=e||[],Ea(e,Eo(uT(a,i,n+1/3)*255),Eo(uT(a,i,n)*255),Eo(uT(a,i,n-1/3)*255),1),t.length===4&&(e[3]=t[3]),e}function r8e(t){if(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.min(e,n,r),i=Math.max(e,n,r),a=i-s,o=(i+s)/2,l,d;if(a===0)l=0,d=0;else{o<.5?d=a/(i+s):d=a/(2-i-s);var c=((i-e)/6+a/2)/a,f=((i-n)/6+a/2)/a,p=((i-r)/6+a/2)/a;e===i?l=p-f:n===i?l=1/3+c-p:r===i&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var h=[l*360,d,o];return t[3]!=null&&h.push(t[3]),h}}function PM(t,e){var n=ya(t);if(n){for(var r=0;r<3;r++)e<0?n[r]=n[r]*(1-e)|0:n[r]=(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return Wu(n,n.length===4?"rgba":"rgb")}}function dT(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){n=n||[];var r=t*(e.length-1),s=Math.floor(r),i=Math.ceil(r),a=e[s],o=e[i],l=r-s;return n[0]=Eo(lc(a[0],o[0],l)),n[1]=Eo(lc(a[1],o[1],l)),n[2]=Eo(lc(a[2],o[2],l)),n[3]=m1(lc(a[3],o[3],l)),n}}function s8e(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){var r=t*(e.length-1),s=Math.floor(r),i=Math.ceil(r),a=ya(e[s]),o=ya(e[i]),l=r-s,d=Wu([Eo(lc(a[0],o[0],l)),Eo(lc(a[1],o[1],l)),Eo(lc(a[2],o[2],l)),m1(lc(a[3],o[3],l))],"rgba");return n?{color:d,leftIndex:s,rightIndex:i,value:r}:d}}function l0(t,e,n,r){var s=ya(t);if(t)return s=r8e(s),e!=null&&(s[0]=n8e(e)),n!=null&&(s[1]=Ep(n)),r!=null&&(s[2]=Ep(r)),Wu(RM(s),"rgba")}function _k(t,e){var n=ya(t);if(n&&e!=null)return n[3]=m1(e),Wu(n,"rgba")}function Wu(t,e){if(!(!t||!t.length)){var n=t[0]+","+t[1]+","+t[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(n+=","+t[3]),e+"("+n+")"}}function wk(t,e){var n=ya(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}var ej=new kb(100);function IM(t){if(ot(t)){var e=ej.get(t);return e||(e=PM(t,-.1),ej.put(t,e)),e}else if(NC(t)){var n=Ne({},t);return n.colorStops=We(t.colorStops,function(r){return{offset:r.offset,color:PM(r.color,-.1)}}),n}return t}var kk=Math.round;function g1(t){var e;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var n=ya(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}return{color:t,opacity:e==null?1:e}}var tj=1e-4;function uc(t){return t<tj&&t>-tj}function Hx(t){return kk(t*1e3)/1e3}function OM(t){return kk(t*1e4)/1e4}function i8e(t){return"matrix("+Hx(t[0])+","+Hx(t[1])+","+Hx(t[2])+","+Hx(t[3])+","+OM(t[4])+","+OM(t[5])+")"}var a8e={left:"start",right:"end",center:"middle",middle:"middle"};function o8e(t,e,n){return n==="top"?t+=e/2:n==="bottom"&&(t-=e/2),t}function l8e(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function u8e(t){var e=t.style,n=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function Fee(t){return t&&!!t.image}function d8e(t){return t&&!!t.svgElement}function ZP(t){return Fee(t)||d8e(t)}function Bee(t){return t.type==="linear"}function zee(t){return t.type==="radial"}function Uee(t){return t&&(t.type==="linear"||t.type==="radial")}function BC(t){return"url(#"+t+")"}function Hee(t){var e=t.getGlobalScale(),n=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function qee(t){var e=t.x||0,n=t.y||0,r=(t.rotation||0)*Cw,s=Ot(t.scaleX,1),i=Ot(t.scaleY,1),a=t.skewX||0,o=t.skewY||0,l=[];return(e||n)&&l.push("translate("+e+"px,"+n+"px)"),r&&l.push("rotate("+r+")"),(s!==1||i!==1)&&l.push("scale("+s+","+i+")"),(a||o)&&l.push("skew("+kk(a*Cw)+"deg, "+kk(o*Cw)+"deg)"),l.join(" ")}var c8e=function(){return tn.hasGlobalWindow&&bt(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer!="undefined"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}}(),LM=Array.prototype.slice;function ku(t,e,n){return(e-t)*n+t}function cT(t,e,n,r){for(var s=e.length,i=0;i<s;i++)t[i]=ku(e[i],n[i],r);return t}function f8e(t,e,n,r){for(var s=e.length,i=s&&e[0].length,a=0;a<s;a++){t[a]||(t[a]=[]);for(var o=0;o<i;o++)t[a][o]=ku(e[a][o],n[a][o],r)}return t}function qx(t,e,n,r){for(var s=e.length,i=0;i<s;i++)t[i]=e[i]+n[i]*r;return t}function nj(t,e,n,r){for(var s=e.length,i=s&&e[0].length,a=0;a<s;a++){t[a]||(t[a]=[]);for(var o=0;o<i;o++)t[a][o]=e[a][o]+n[a][o]*r}return t}function p8e(t,e){for(var n=t.length,r=e.length,s=n>r?e:t,i=Math.min(n,r),a=s[i-1]||{color:[0,0,0,0],offset:0},o=i;o<Math.max(n,r);o++)s.push({offset:a.offset,color:a.color.slice()})}function h8e(t,e,n){var r=t,s=e;if(!(!r.push||!s.push)){var i=r.length,a=s.length;if(i!==a){var o=i>a;if(o)r.length=a;else for(var l=i;l<a;l++)r.push(n===1?s[l]:LM.call(s[l]))}for(var d=r[0]&&r[0].length,l=0;l<r.length;l++)if(n===1)isNaN(r[l])&&(r[l]=s[l]);else for(var c=0;c<d;c++)isNaN(r[l][c])&&(r[l][c]=s[l][c])}}function u0(t){if(si(t)){var e=t.length;if(si(t[0])){for(var n=[],r=0;r<e;r++)n.push(LM.call(t[r]));return n}return LM.call(t)}return t}function Mw(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function m8e(t){return si(t&&t[0])?2:1}var Wx=0,Ew=1,Wee=2,hy=3,VM=4,NM=5,rj=6;function sj(t){return t===VM||t===NM}function Gx(t){return t===Ew||t===Wee}var $v=[0,0,0,0],g8e=function(){function t(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(e,n,r){this._needsSort=!0;var s=this.keyframes,i=s.length,a=!1,o=rj,l=n;if(si(n)){var d=m8e(n);o=d,(d===1&&!hn(n[0])||d===2&&!hn(n[0][0]))&&(a=!0)}else if(hn(n)&&!f1(n))o=Wx;else if(ot(n))if(!isNaN(+n))o=Wx;else{var c=ya(n);c&&(l=c,o=hy)}else if(NC(n)){var f=Ne({},l);f.colorStops=We(n.colorStops,function(h){return{offset:h.offset,color:ya(h.color)}}),Bee(n)?o=VM:zee(n)&&(o=NM),l=f}i===0?this.valType=o:(o!==this.valType||o===rj)&&(a=!0),this.discrete=this.discrete||a;var p={time:e,value:l,rawValue:n,percent:0};return r&&(p.easing=r,p.easingFunc=bt(r)?r:o0[r]||QP(r)),s.push(p),p},t.prototype.prepare=function(e,n){var r=this.keyframes;this._needsSort&&r.sort(function(g,y){return g.time-y.time});for(var s=this.valType,i=r.length,a=r[i-1],o=this.discrete,l=Gx(s),d=sj(s),c=0;c<i;c++){var f=r[c],p=f.value,h=a.value;f.percent=f.time/e,o||(l&&c!==i-1?h8e(p,h,s):d&&p8e(p.colorStops,h.colorStops))}if(!o&&s!==NM&&n&&this.needsAnimate()&&n.needsAnimate()&&s===n.valType&&!n._finished){this._additiveTrack=n;for(var m=r[0].value,c=0;c<i;c++)s===Wx?r[c].additiveValue=r[c].value-m:s===hy?r[c].additiveValue=qx([],r[c].value,m,-1):Gx(s)&&(r[c].additiveValue=s===Ew?qx([],r[c].value,m,-1):nj([],r[c].value,m,-1))}},t.prototype.step=function(e,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,s=r?"additiveValue":"value",i=this.valType,a=this.keyframes,o=a.length,l=this.propName,d=i===hy,c,f=this._lastFr,p=Math.min,h,m;if(o===1)h=m=a[0];else{if(n<0)c=0;else if(n<this._lastFrP){var g=p(f+1,o-1);for(c=g;c>=0&&!(a[c].percent<=n);c--);c=p(c,o-2)}else{for(c=f;c<o&&!(a[c].percent>n);c++);c=p(c-1,o-2)}m=a[c+1],h=a[c]}if(h&&m){this._lastFr=c,this._lastFrP=n;var y=m.percent-h.percent,x=y===0?1:p((n-h.percent)/y,1);m.easingFunc&&(x=m.easingFunc(x));var _=r?this._additiveValue:d?$v:e[l];if((Gx(i)||d)&&!_&&(_=this._additiveValue=[]),this.discrete)e[l]=x<1?h.rawValue:m.rawValue;else if(Gx(i))i===Ew?cT(_,h[s],m[s],x):f8e(_,h[s],m[s],x);else if(sj(i)){var k=h[s],w=m[s],S=i===VM;e[l]={type:S?"linear":"radial",x:ku(k.x,w.x,x),y:ku(k.y,w.y,x),colorStops:We(k.colorStops,function(A,M){var E=w.colorStops[M];return{offset:ku(A.offset,E.offset,x),color:Mw(cT([],A.color,E.color,x))}}),global:w.global},S?(e[l].x2=ku(k.x2,w.x2,x),e[l].y2=ku(k.y2,w.y2,x)):e[l].r=ku(k.r,w.r,x)}else if(d)cT(_,h[s],m[s],x),r||(e[l]=Mw(_));else{var C=ku(h[s],m[s],x);r?this._additiveValue=C:e[l]=C}r&&this._addToTarget(e)}}},t.prototype._addToTarget=function(e){var n=this.valType,r=this.propName,s=this._additiveValue;n===Wx?e[r]=e[r]+s:n===hy?(ya(e[r],$v),qx($v,$v,s,1),e[r]=Mw($v)):n===Ew?qx(e[r],e[r],s,1):n===Wee&&nj(e[r],e[r],s,1)},t}(),JP=function(){function t(e,n,r,s){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=n,n&&s){HP("Can' use additive animation on looped animation.");return}this._additiveAnimators=s,this._allowDiscrete=r}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(e){this._target=e},t.prototype.when=function(e,n,r){return this.whenWithKeys(e,n,sn(n),r)},t.prototype.whenWithKeys=function(e,n,r,s){for(var i=this._tracks,a=0;a<r.length;a++){var o=r[a],l=i[o];if(!l){l=i[o]=new g8e(o);var d=void 0,c=this._getAdditiveTrack(o);if(c){var f=c.keyframes,p=f[f.length-1];d=p&&p.value,c.valType===hy&&d&&(d=Mw(d))}else d=this._target[o];if(d==null)continue;e>0&&l.addKeyframe(0,u0(d),s),this._trackKeys.push(o)}l.addKeyframe(e,u0(n[o]),s)}return this._maxTime=Math.max(this._maxTime,e),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var n=e.length,r=0;r<n;r++)e[r].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,n=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,n)for(var r=0;r<n.length;r++)n[r].call(this)},t.prototype._setTracksFinished=function(){for(var e=this._tracks,n=this._trackKeys,r=0;r<n.length;r++)e[n[r]].setFinished()},t.prototype._getAdditiveTrack=function(e){var n,r=this._additiveAnimators;if(r)for(var s=0;s<r.length;s++){var i=r[s].getTrack(e);i&&(n=i)}return n},t.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var n=this,r=[],s=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var a=this._trackKeys[i],o=this._tracks[a],l=this._getAdditiveTrack(a),d=o.keyframes,c=d.length;if(o.prepare(s,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var f=d[c-1];f&&(n._target[o.propName]=f.rawValue),o.setFinished()}else r.push(o)}if(r.length||this._force){var p=new e8e({life:s,loop:this._loop,delay:this._delay||0,onframe:function(h){n._started=2;var m=n._additiveAnimators;if(m){for(var g=!1,y=0;y<m.length;y++)if(m[y]._clip){g=!0;break}g||(n._additiveAnimators=null)}for(var y=0;y<r.length;y++)r[y].step(n._target,h);var x=n._onframeCbs;if(x)for(var y=0;y<x.length;y++)x[y](n._target,h)},ondestroy:function(){n._doneCallback()}});this._clip=p,this.animation&&this.animation.addClip(p),e&&p.setEasing(e)}else this._doneCallback();return this}},t.prototype.stop=function(e){if(this._clip){var n=this._clip;e&&n.onframe(1),this._abortedCallback()}},t.prototype.delay=function(e){return this._delay=e,this},t.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},t.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},t.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(e){return this._tracks[e]},t.prototype.getTracks=function(){var e=this;return We(this._trackKeys,function(n){return e._tracks[n]})},t.prototype.stopTracks=function(e,n){if(!e.length||!this._clip)return!0;for(var r=this._tracks,s=this._trackKeys,i=0;i<e.length;i++){var a=r[e[i]];a&&!a.isFinished()&&(n?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var o=!0,i=0;i<s.length;i++)if(!r[s[i]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},t.prototype.saveTo=function(e,n,r){if(e){n=n||this._trackKeys;for(var s=0;s<n.length;s++){var i=n[s],a=this._tracks[i];if(!(!a||a.isFinished())){var o=a.keyframes,l=o[r?0:o.length-1];l&&(e[i]=u0(l.rawValue))}}}},t.prototype.__changeFinalValue=function(e,n){n=n||sn(e);for(var r=0;r<n.length;r++){var s=n[r],i=this._tracks[s];if(i){var a=i.keyframes;if(a.length>1){var o=a.pop();i.addKeyframe(o.time,e[s]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},t}();function Tm(){return new Date().getTime()}var v8e=function(t){Te(e,t);function e(n){var r=t.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,n=n||{},r.stage=n.stage||{},r}return e.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},e.prototype.addAnimator=function(n){n.animation=this;var r=n.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(n){if(n.animation){var r=n.prev,s=n.next;r?r.next=s:this._head=s,s?s.prev=r:this._tail=r,n.next=n.prev=n.animation=null}},e.prototype.removeAnimator=function(n){var r=n.getClip();r&&this.removeClip(r),n.animation=null},e.prototype.update=function(n){for(var r=Tm()-this._pausedTime,s=r-this._time,i=this._head;i;){var a=i.next,o=i.step(r,s);o&&(i.ondestroy(),this.removeClip(i)),i=a}this._time=r,n||(this.trigger("frame",s),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var n=this;this._running=!0;function r(){n._running&&(yk(r),!n._paused&&n.update())}yk(r)},e.prototype.start=function(){this._running||(this._time=Tm(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=Tm(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=Tm()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var n=this._head;n;){var r=n.next;n.prev=n.next=n.animation=null,n=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(n,r){r=r||{},this.start();var s=new JP(n,r.loop);return this.addAnimator(s),s},e}(co),y8e=300,fT=tn.domSupported,pT=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=We(t,function(s){var i=s.replace("mouse","pointer");return n.hasOwnProperty(i)?i:s});return{mouse:t,touch:e,pointer:r}}(),ij={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},aj=!1;function jM(t){var e=t.pointerType;return e==="pen"||e==="touch"}function b8e(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function hT(t){t&&(t.zrByTouch=!0)}function x8e(t,e){return Ra(t.dom,new _8e(t,e),!0)}function Gee(t,e){for(var n=e,r=!1;n&&n.nodeType!==9&&!(r=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return r}var _8e=function(){function t(e,n){this.stopPropagation=Vr,this.stopImmediatePropagation=Vr,this.preventDefault=Vr,this.type=n.type,this.target=this.currentTarget=e.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return t}(),bo={mousedown:function(t){t=Ra(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=Ra(this.dom,t);var e=this.__mayPointerCapture;e&&(t.zrX!==e[0]||t.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=Ra(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=Ra(this.dom,t);var e=t.toElement||t.relatedTarget;Gee(this,e)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){aj=!0,t=Ra(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){aj||(t=Ra(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=Ra(this.dom,t),hT(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),bo.mousemove.call(this,t),bo.mousedown.call(this,t)},touchmove:function(t){t=Ra(this.dom,t),hT(t),this.handler.processGesture(t,"change"),bo.mousemove.call(this,t)},touchend:function(t){t=Ra(this.dom,t),hT(t),this.handler.processGesture(t,"end"),bo.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<y8e&&bo.click.call(this,t)},pointerdown:function(t){bo.mousedown.call(this,t)},pointermove:function(t){jM(t)||bo.mousemove.call(this,t)},pointerup:function(t){bo.mouseup.call(this,t)},pointerout:function(t){jM(t)||bo.mouseout.call(this,t)}};de(["click","dblclick","contextmenu"],function(t){bo[t]=function(e){e=Ra(this.dom,e),this.trigger(t,e)}});var FM={pointermove:function(t){jM(t)||FM.mousemove.call(this,t)},pointerup:function(t){FM.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function w8e(t,e){var n=e.domHandlers;tn.pointerEventsSupported?de(pT.pointer,function(r){Dw(e,r,function(s){n[r].call(t,s)})}):(tn.touchEventsSupported&&de(pT.touch,function(r){Dw(e,r,function(s){n[r].call(t,s),b8e(e)})}),de(pT.mouse,function(r){Dw(e,r,function(s){s=YP(s),e.touching||n[r].call(t,s)})}))}function k8e(t,e){tn.pointerEventsSupported?de(ij.pointer,n):tn.touchEventsSupported||de(ij.mouse,n);function n(r){function s(i){i=YP(i),Gee(t,i.target)||(i=x8e(t,i),e.domHandlers[r].call(t,i))}Dw(e,r,s,{capture:!0})}}function Dw(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,MM(t.domTarget,e,n,r)}function mT(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&VLe(t.domTarget,n,e[n],t.listenerOpts[n]);t.mounted={}}var oj=function(){function t(e,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=n}return t}(),S8e=function(t){Te(e,t);function e(n,r){var s=t.call(this)||this;return s.__pointerCapturing=!1,s.dom=n,s.painterRoot=r,s._localHandlerScope=new oj(n,bo),fT&&(s._globalHandlerScope=new oj(document,FM)),w8e(s,s._localHandlerScope),s}return e.prototype.dispose=function(){mT(this._localHandlerScope),fT&&mT(this._globalHandlerScope)},e.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},e.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,fT&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var r=this._globalHandlerScope;n?k8e(this,r):mT(r)}},e}(co),Yee=1;tn.hasGlobalWindow&&(Yee=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Sk=Yee,BM=.4,zM="#333",UM="#ccc",C8e="#eee",lj=FC,uj=5e-5;function cf(t){return t>uj||t<-uj}var ff=[],Fh=[],gT=va(),vT=Math.abs,Nu=function(){function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},t.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},t.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},t.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},t.prototype.needLocalTransform=function(){return cf(this.rotation)||cf(this.x)||cf(this.y)||cf(this.scaleX-1)||cf(this.scaleY-1)||cf(this.skewX)||cf(this.skewY)},t.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,n=this.needLocalTransform(),r=this.transform;if(!(n||e)){r&&(lj(r),this.invTransform=null);return}r=r||va(),n?this.getLocalTransform(r):lj(r),e&&(n?qu(r,e,r):KP(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},t.prototype._resolveGlobalScaleRatio=function(e){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(ff);var r=ff[0]<0?-1:1,s=ff[1]<0?-1:1,i=((ff[0]-r)*n+r)/ff[0]||0,a=((ff[1]-s)*n+s)/ff[1]||0;e[0]*=i,e[1]*=i,e[2]*=a,e[3]*=a}this.invTransform=this.invTransform||va(),Vg(this.invTransform,e)},t.prototype.getComputedTransform=function(){for(var e=this,n=[];e;)n.push(e),e=e.parent;for(;e=n.pop();)e.updateTransform();return this.transform},t.prototype.setLocalTransform=function(e){if(e){var n=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],s=Math.atan2(e[1],e[0]),i=Math.PI/2+s-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(i),n=Math.sqrt(n),this.skewX=i,this.skewY=0,this.rotation=-s,this.x=+e[4],this.y=+e[5],this.scaleX=n,this.scaleY=r,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,n=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||va(),qu(Fh,e.invTransform,n),n=Fh);var r=this.originX,s=this.originY;(r||s)&&(gT[4]=r,gT[5]=s,qu(Fh,n,gT),Fh[4]-=r,Fh[5]-=s,n=Fh),this.setLocalTransform(n)}},t.prototype.getGlobalScale=function(e){var n=this.transform;return e=e||[],n?(e[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),e[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(e[0]=-e[0]),n[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},t.prototype.transformCoordToLocal=function(e,n){var r=[e,n],s=this.invTransform;return s&&Ls(r,r,s),r},t.prototype.transformCoordToGlobal=function(e,n){var r=[e,n],s=this.transform;return s&&Ls(r,r,s),r},t.prototype.getLineScale=function(){var e=this.transform;return e&&vT(e[0]-1)>1e-10&&vT(e[3]-1)>1e-10?Math.sqrt(vT(e[0]*e[3]-e[2]*e[1])):1},t.prototype.copyTransform=function(e){Kee(this,e)},t.getLocalTransform=function(e,n){n=n||[];var r=e.originX||0,s=e.originY||0,i=e.scaleX,a=e.scaleY,o=e.anchorX,l=e.anchorY,d=e.rotation||0,c=e.x,f=e.y,p=e.skewX?Math.tan(e.skewX):0,h=e.skewY?Math.tan(-e.skewY):0;if(r||s||o||l){var m=r+o,g=s+l;n[4]=-m*i-p*g*a,n[5]=-g*a-h*m*i}else n[4]=n[5]=0;return n[0]=i,n[3]=a,n[1]=h*i,n[2]=p*a,d&&mh(n,n,d),n[4]+=r+c,n[5]+=s+f,n},t.initDefaultProps=function(){var e=t.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),t}(),Ul=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function Kee(t,e){for(var n=0;n<Ul.length;n++){var r=Ul[n];t[r]=e[r]}}var dj={};function ba(t,e){e=e||Ic;var n=dj[e];n||(n=dj[e]=new kb(500));var r=n.get(t);return r==null&&(r=Oc.measureText(t,e).width,n.put(t,r)),r}function cj(t,e,n,r){var s=ba(t,e),i=zC(e),a=my(0,s,n),o=xm(0,i,r),l=new Gt(a,o,s,i);return l}function Sb(t,e,n,r){var s=((t||"")+"").split(`
`),i=s.length;if(i===1)return cj(s[0],e,n,r);for(var a=new Gt(0,0,0,0),o=0;o<s.length;o++){var l=cj(s[o],e,n,r);o===0?a.copy(l):a.union(l)}return a}function my(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function xm(t,e,n){return n==="middle"?t-=e/2:n==="bottom"&&(t-=e),t}function zC(t){return ba("",t)}function Fo(t,e){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function Ck(t,e,n){var r=e.position||"inside",s=e.distance!=null?e.distance:5,i=n.height,a=n.width,o=i/2,l=n.x,d=n.y,c="left",f="top";if(r instanceof Array)l+=Fo(r[0],n.width),d+=Fo(r[1],n.height),c=null,f=null;else switch(r){case"left":l-=s,d+=o,c="right",f="middle";break;case"right":l+=s+a,d+=o,f="middle";break;case"top":l+=a/2,d-=s,c="center",f="bottom";break;case"bottom":l+=a/2,d+=i+s,c="center";break;case"inside":l+=a/2,d+=o,c="center",f="middle";break;case"insideLeft":l+=s,d+=o,f="middle";break;case"insideRight":l+=a-s,d+=o,c="right",f="middle";break;case"insideTop":l+=a/2,d+=s,c="center";break;case"insideBottom":l+=a/2,d+=i-s,c="center",f="bottom";break;case"insideTopLeft":l+=s,d+=s;break;case"insideTopRight":l+=a-s,d+=s,c="right";break;case"insideBottomLeft":l+=s,d+=i-s,f="bottom";break;case"insideBottomRight":l+=a-s,d+=i-s,c="right",f="bottom";break}return t=t||{},t.x=l,t.y=d,t.align=c,t.verticalAlign=f,t}var yT="__zr_normal__",bT=Ul.concat(["ignore"]),A8e=Bl(Ul,function(t,e){return t[e]=!0,t},{ignore:!1}),Bh={},T8e=new Gt(0,0,0,0),UC=function(){function t(e){this.id=kee(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return t.prototype._init=function(e){this.attr(e)},t.prototype.drift=function(e,n,r){switch(this.draggable){case"horizontal":n=0;break;case"vertical":e=0;break}var s=this.transform;s||(s=this.transform=[1,0,0,1,0,0]),s[4]+=e,s[5]+=n,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(e){var n=this._textContent;if(n&&(!n.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,s=r.local,i=n.innerTransformable,a=void 0,o=void 0,l=!1;i.parent=s?this:null;var d=!1;if(i.copyTransform(n),r.position!=null){var c=T8e;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),s||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Bh,r,c):Ck(Bh,r,c),i.x=Bh.x,i.y=Bh.y,a=Bh.align,o=Bh.verticalAlign;var f=r.origin;if(f&&r.rotation!=null){var p=void 0,h=void 0;f==="center"?(p=c.width*.5,h=c.height*.5):(p=Fo(f[0],c.width),h=Fo(f[1],c.height)),d=!0,i.originX=-i.x+p+(s?0:c.x),i.originY=-i.y+h+(s?0:c.y)}}r.rotation!=null&&(i.rotation=r.rotation);var m=r.offset;m&&(i.x+=m[0],i.y+=m[1],d||(i.originX=-m[0],i.originY=-m[1]));var g=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,y=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),x=void 0,_=void 0,k=void 0;g&&this.canBeInsideText()?(x=r.insideFill,_=r.insideStroke,(x==null||x==="auto")&&(x=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(x),k=!0)):(x=r.outsideFill,_=r.outsideStroke,(x==null||x==="auto")&&(x=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(x),k=!0)),x=x||"#000",(x!==y.fill||_!==y.stroke||k!==y.autoStroke||a!==y.align||o!==y.verticalAlign)&&(l=!0,y.fill=x,y.stroke=_,y.autoStroke=k,y.align=a,y.verticalAlign=o,n.setDefaultTextStyle(y)),n.__dirty|=ua,l&&n.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(e){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?UM:zM},t.prototype.getOutsideStroke=function(e){var n=this.__zr&&this.__zr.getBackgroundColor(),r=typeof n=="string"&&ya(n);r||(r=[255,255,255,1]);for(var s=r[3],i=this.__zr.isDarkMode(),a=0;a<3;a++)r[a]=r[a]*s+(i?0:255)*(1-s);return r[3]=1,Wu(r,"rgba")},t.prototype.traverse=function(e,n){},t.prototype.attrKV=function(e,n){e==="textConfig"?this.setTextConfig(n):e==="textContent"?this.setTextContent(n):e==="clipPath"?this.setClipPath(n):e==="extra"?(this.extra=this.extra||{},Ne(this.extra,n)):this[e]=n},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(e,n){if(typeof e=="string")this.attrKV(e,n);else if(wt(e))for(var r=e,s=sn(r),i=0;i<s.length;i++){var a=s[i];this.attrKV(a,e[a])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var n=this._normalState,r=0;r<this.animators.length;r++){var s=this.animators[r],i=s.__fromStateTransition;if(!(s.getLoop()||i&&i!==yT)){var a=s.targetName,o=a?n[a]:n;s.saveTo(o)}}},t.prototype._innerSaveToNormal=function(e){var n=this._normalState;n||(n=this._normalState={}),e.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(e,n,bT)},t.prototype._savePrimaryToNormal=function(e,n,r){for(var s=0;s<r.length;s++){var i=r[s];e[i]!=null&&!(i in n)&&(n[i]=this[i])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(e){return this.states[e]},t.prototype.ensureState=function(e){var n=this.states;return n[e]||(n[e]={}),n[e]},t.prototype.clearStates=function(e){this.useState(yT,!1,e)},t.prototype.useState=function(e,n,r,s){var i=e===yT,a=this.hasState();if(!(!a&&i)){var o=this.currentStates,l=this.stateTransition;if(!(Xt(o,e)>=0&&(n||o.length===1))){var d;if(this.stateProxy&&!i&&(d=this.stateProxy(e)),d||(d=this.states&&this.states[e]),!d&&!i){HP("State "+e+" not exists.");return}i||this.saveCurrentToNormalState(d);var c=!!(d&&d.hoverLayer||s);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,d,this._normalState,n,!r&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,p=this._textGuide;return f&&f.useState(e,n,r,c),p&&p.useState(e,n,r,c),i?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ua),d}}},t.prototype.useStates=function(e,n,r){if(!e.length)this.clearStates();else{var s=[],i=this.currentStates,a=e.length,o=a===i.length;if(o){for(var l=0;l<a;l++)if(e[l]!==i[l]){o=!1;break}}if(o)return;for(var l=0;l<a;l++){var d=e[l],c=void 0;this.stateProxy&&(c=this.stateProxy(d,e)),c||(c=this.states[d]),c&&s.push(c)}var f=s[a-1],p=!!(f&&f.hoverLayer||r);p&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(s),m=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(e.join(","),h,this._normalState,!1,!n&&!this.__inHover&&m&&m.duration>0,m);var g=this._textContent,y=this._textGuide;g&&g.useStates(e,n,p),y&&y.useStates(e,n,p),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!p&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ua)}},t.prototype.isSilent=function(){for(var e=this.silent,n=this.parent;!e&&n;){if(n.silent){e=!0;break}n=n.parent}return e},t.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var n=this.animators[e];n.targetName&&n.changeTarget(this[n.targetName])}},t.prototype.removeState=function(e){var n=Xt(this.currentStates,e);if(n>=0){var r=this.currentStates.slice();r.splice(n,1),this.useStates(r)}},t.prototype.replaceState=function(e,n,r){var s=this.currentStates.slice(),i=Xt(s,e),a=Xt(s,n)>=0;i>=0?a?s.splice(i,1):s[i]=n:r&&!a&&s.push(n),this.useStates(s)},t.prototype.toggleState=function(e,n){n?this.useState(e,!0):this.removeState(e)},t.prototype._mergeStates=function(e){for(var n={},r,s=0;s<e.length;s++){var i=e[s];Ne(n,i),i.textConfig&&(r=r||{},Ne(r,i.textConfig))}return r&&(n.textConfig=r),n},t.prototype._applyStateObj=function(e,n,r,s,i,a){var o=!(n&&s);n&&n.textConfig?(this.textConfig=Ne({},s?this.textConfig:r.textConfig),Ne(this.textConfig,n.textConfig)):o&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},d=!1,c=0;c<bT.length;c++){var f=bT[c],p=i&&A8e[f];n&&n[f]!=null?p?(d=!0,l[f]=n[f]):this[f]=n[f]:o&&r[f]!=null&&(p?(d=!0,l[f]=r[f]):this[f]=r[f])}if(!i)for(var c=0;c<this.animators.length;c++){var h=this.animators[c],m=h.targetName;h.getLoop()||h.__changeFinalValue(m?(n||r)[m]:n||r)}d&&this._transitionState(e,l,a)},t.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var n=this.__zr;n&&e.addSelfToZr(n),e.__zr=n,e.__hostTarget=this}},t.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},t.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(e){var n=this._textContent;n!==e&&(n&&n!==e&&this.removeTextContent(),e.innerTransformable=new Nu,this._attachComponent(e),this._textContent=e,this.markRedraw())},t.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Ne(this.textConfig,e),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=ua;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var n=this._textContent,r=this._textGuide;n&&(n.__inHover=e),r&&(r.__inHover=e)},t.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.addAnimator(n[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.removeAnimator(n[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},t.prototype.animate=function(e,n,r){var s=e?this[e]:this,i=new JP(s,n,r);return e&&(i.targetName=e),this.addAnimator(i,e),i},t.prototype.addAnimator=function(e,n){var r=this.__zr,s=this;e.during(function(){s.updateDuringAnimation(n)}).done(function(){var i=s.animators,a=Xt(i,e);a>=0&&i.splice(a,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},t.prototype.updateDuringAnimation=function(e){this.markRedraw()},t.prototype.stopAnimation=function(e,n){for(var r=this.animators,s=r.length,i=[],a=0;a<s;a++){var o=r[a];!e||e===o.scope?o.stop(n):i.push(o)}return this.animators=i,this},t.prototype.animateTo=function(e,n,r){xT(this,e,n,r)},t.prototype.animateFrom=function(e,n,r){xT(this,e,n,r,!0)},t.prototype._transitionState=function(e,n,r,s){for(var i=xT(this,n,r,s),a=0;a<i.length;a++)i[a].__fromStateTransition=e},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=ua;function n(r,s,i,a){Object.defineProperty(e,r,{get:function(){if(!this[s]){var l=this[s]=[];o(this,l)}return this[s]},set:function(l){this[i]=l[0],this[a]=l[1],this[s]=l,o(this,l)}});function o(l,d){Object.defineProperty(d,0,{get:function(){return l[i]},set:function(c){l[i]=c}}),Object.defineProperty(d,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),t}();Gr(UC,co);Gr(UC,Nu);function xT(t,e,n,r,s){n=n||{};var i=[];Xee(t,"",t,e,n,r,i,s);var a=i.length,o=!1,l=n.done,d=n.aborted,c=function(){o=!0,a--,a<=0&&(o?l&&l():d&&d())},f=function(){a--,a<=0&&(o?l&&l():d&&d())};a||l&&l(),i.length>0&&n.during&&i[0].during(function(m,g){n.during(g)});for(var p=0;p<i.length;p++){var h=i[p];c&&h.done(c),f&&h.aborted(f),n.force&&h.duration(n.duration),h.start(n.easing)}return i}function _T(t,e,n){for(var r=0;r<n;r++)t[r]=e[r]}function $8e(t){return si(t[0])}function M8e(t,e,n){if(si(e[n]))if(si(t[n])||(t[n]=[]),ea(e[n])){var r=e[n].length;t[n].length!==r&&(t[n]=new e[n].constructor(r),_T(t[n],e[n],r))}else{var s=e[n],i=t[n],a=s.length;if($8e(s))for(var o=s[0].length,l=0;l<a;l++)i[l]?_T(i[l],s[l],o):i[l]=Array.prototype.slice.call(s[l]);else _T(i,s,a);i.length=s.length}else t[n]=e[n]}function E8e(t,e){return t===e||si(t)&&si(e)&&D8e(t,e)}function D8e(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Xee(t,e,n,r,s,i,a,o){for(var l=sn(r),d=s.duration,c=s.delay,f=s.additive,p=s.setToFinal,h=!wt(i),m=t.animators,g=[],y=0;y<l.length;y++){var x=l[y],_=r[x];if(_!=null&&n[x]!=null&&(h||i[x]))if(wt(_)&&!si(_)&&!NC(_)){if(e){o||(n[x]=_,t.updateDuringAnimation(e));continue}Xee(t,x,n[x],_,s,i&&i[x],a,o)}else g.push(x);else o||(n[x]=_,t.updateDuringAnimation(e),g.push(x))}var k=g.length;if(!f&&k)for(var w=0;w<m.length;w++){var S=m[w];if(S.targetName===e){var C=S.stopTracks(g);if(C){var A=Xt(m,S);m.splice(A,1)}}}if(s.force||(g=Sn(g,function(I){return!E8e(r[I],n[I])}),k=g.length),k>0||s.force&&!a.length){var M=void 0,E=void 0,P=void 0;if(o){E={},p&&(M={});for(var w=0;w<k;w++){var x=g[w];E[x]=n[x],p?M[x]=r[x]:n[x]=r[x]}}else if(p){P={};for(var w=0;w<k;w++){var x=g[w];P[x]=u0(n[x]),M8e(n,r,x)}}var S=new JP(n,!1,!1,f?Sn(m,function(F){return F.targetName===e}):null);S.targetName=e,s.scope&&(S.scope=s.scope),p&&M&&S.whenWithKeys(0,M,g),P&&S.whenWithKeys(0,P,g),S.whenWithKeys(d==null?500:d,o?E:r,g).delay(c||0),t.addAnimator(S,e),a.push(S)}}var Tt=function(t){Te(e,t);function e(n){var r=t.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(n){return this._children[n]},e.prototype.childOfName=function(n){for(var r=this._children,s=0;s<r.length;s++)if(r[s].name===n)return r[s]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},e.prototype.addBefore=function(n,r){if(n&&n!==this&&n.parent!==this&&r&&r.parent===this){var s=this._children,i=s.indexOf(r);i>=0&&(s.splice(i,0,n),this._doAdd(n))}return this},e.prototype.replace=function(n,r){var s=Xt(this._children,n);return s>=0&&this.replaceAt(r,s),this},e.prototype.replaceAt=function(n,r){var s=this._children,i=s[r];if(n&&n!==this&&n.parent!==this&&n!==i){s[r]=n,i.parent=null;var a=this.__zr;a&&i.removeSelfFromZr(a),this._doAdd(n)}return this},e.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var r=this.__zr;r&&r!==n.__zr&&n.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(n){var r=this.__zr,s=this._children,i=Xt(s,n);return i<0?this:(s.splice(i,1),n.parent=null,r&&n.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var n=this._children,r=this.__zr,s=0;s<n.length;s++){var i=n[s];r&&i.removeSelfFromZr(r),i.parent=null}return n.length=0,this},e.prototype.eachChild=function(n,r){for(var s=this._children,i=0;i<s.length;i++){var a=s[i];n.call(r,a,i)}return this},e.prototype.traverse=function(n,r){for(var s=0;s<this._children.length;s++){var i=this._children[s],a=n.call(r,i);i.isGroup&&!a&&i.traverse(n,r)}return this},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++){var s=this._children[r];s.addSelfToZr(n)}},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++){var s=this._children[r];s.removeSelfFromZr(n)}},e.prototype.getBoundingRect=function(n){for(var r=new Gt(0,0,0,0),s=n||this._children,i=[],a=null,o=0;o<s.length;o++){var l=s[o];if(!(l.ignore||l.invisible)){var d=l.getBoundingRect(),c=l.getLocalTransform(i);c?(Gt.applyTransform(r,d,c),a=a||r.clone(),a.union(r)):(a=a||d.clone(),a.union(d))}}return a||r},e}(UC);Tt.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Rw={},Qee={};function R8e(t){delete Qee[t]}function P8e(t){if(!t)return!1;if(typeof t=="string")return wk(t,1)<BM;if(t.colorStops){for(var e=t.colorStops,n=0,r=e.length,s=0;s<r;s++)n+=wk(e[s].color,1);return n/=r,n<BM}return!1}var I8e=function(){function t(e,n,r){var s=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=n,this.id=e;var i=new KLe,a=r.renderer||"canvas";Rw[a]||(a=sn(Rw)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var o=new Rw[a](n,i,r,e),l=r.ssr||o.ssrOnly;this.storage=i,this.painter=o;var d=!tn.node&&!tn.worker&&!l?new S8e(o.getViewportRoot(),o.root):null,c=r.useCoarsePointer,f=c==null||c==="auto"?tn.touchEventsSupported:!!c,p=44,h;f&&(h=Ot(r.pointerSize,p)),this.handler=new Mee(i,o,d,o.root,h),this.animation=new v8e({stage:{update:l?null:function(){return s._flush(!0)}}}),l||this.animation.start()}return t.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},t.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(e,n){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,n),this.refresh())},t.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=P8e(e))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(e){this._darkMode=e},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(e){var n,r=Tm();this._needsRefresh&&(n=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var s=Tm();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:s-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},t.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},t.prototype.findHover=function(e,n){if(!this._disposed)return this.handler.findHover(e,n)},t.prototype.on=function(e,n,r){return this._disposed||this.handler.on(e,n,r),this},t.prototype.off=function(e,n){this._disposed||this.handler.off(e,n)},t.prototype.trigger=function(e,n){this._disposed||this.handler.trigger(e,n)},t.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),n=0;n<e.length;n++)e[n]instanceof Tt&&e[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,R8e(this.id))},t}();function fj(t,e){var n=new I8e(kee(),t,e);return Qee[n.id]=n,n}function O8e(t,e){Rw[t]=e}var HM;function L8e(t){if(typeof HM=="function")return HM(t)}function V8e(t){HM=t}var pj=1e-4,Zee=20;function N8e(t){return t.replace(/^\s+|\s+$/g,"")}function An(t,e,n,r){var s=e[0],i=e[1],a=n[0],o=n[1],l=i-s,d=o-a;if(l===0)return d===0?a:(a+o)/2;if(r)if(l>0){if(t<=s)return a;if(t>=i)return o}else{if(t>=s)return a;if(t<=i)return o}else{if(t===s)return a;if(t===i)return o}return(t-s)/l*d+a}function tt(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return ot(t)?N8e(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):t==null?NaN:+t}function Mr(t,e,n){return e==null&&(e=10),e=Math.min(Math.max(0,e),Zee),t=(+t).toFixed(e),n?t:+t}function Ga(t){return t.sort(function(e,n){return e-n}),t}function kl(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n}return j8e(t)}function j8e(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),r=n>0?+e.slice(n+1):0,s=n>0?n:e.length,i=e.indexOf("."),a=i<0?0:s-1-i;return Math.max(0,a-r)}function Jee(t,e){var n=Math.log,r=Math.LN10,s=Math.floor(n(t[1]-t[0])/r),i=Math.round(n(Math.abs(e[1]-e[0]))/r),a=Math.min(Math.max(-s+i,0),20);return isFinite(a)?a:20}function F8e(t,e){var n=Bl(t,function(h,m){return h+(isNaN(m)?0:m)},0);if(n===0)return[];for(var r=Math.pow(10,e),s=We(t,function(h){return(isNaN(h)?0:h)/n*r*100}),i=r*100,a=We(s,function(h){return Math.floor(h)}),o=Bl(a,function(h,m){return h+m},0),l=We(s,function(h,m){return h-a[m]});o<i;){for(var d=Number.NEGATIVE_INFINITY,c=null,f=0,p=l.length;f<p;++f)l[f]>d&&(d=l[f],c=f);++a[c],l[c]=0,++o}return We(a,function(h){return h/r})}function B8e(t,e){var n=Math.max(kl(t),kl(e)),r=t+e;return n>Zee?r:Mr(r,n)}var hj=9007199254740991;function ete(t){var e=Math.PI*2;return(t%e+e)%e}function v1(t){return t>-pj&&t<pj}var z8e=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Hl(t){if(t instanceof Date)return t;if(ot(t)){var e=z8e.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function U8e(t){return Math.pow(10,e6(t))}function e6(t){if(t===0)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function tte(t,e){var n=e6(t),r=Math.pow(10,n),s=t/r,i;return s<1.5?i=1:s<2.5?i=2:s<4?i=3:s<7?i=5:i=10,t=i*r,n>=-20?+t.toFixed(n<0?-n:0):t}function wT(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),s=+t[r-1],i=n-r;return i?s+i*(t[r]-s):s}function mj(t){t.sort(function(l,d){return o(l,d,0)?-1:1});for(var e=-1/0,n=1,r=0;r<t.length;){for(var s=t[r].interval,i=t[r].close,a=0;a<2;a++)s[a]<=e&&(s[a]=e,i[a]=a?1:1-n),e=s[a],n=i[a];s[0]===s[1]&&i[0]*i[1]!==1?t.splice(r,1):r++}return t;function o(l,d,c){return l.interval[c]<d.interval[c]||l.interval[c]===d.interval[c]&&(l.close[c]-d.close[c]===(c?-1:1)||!c&&o(l,d,1))}}function id(t){var e=parseFloat(t);return e==t&&(e!==0||!ot(t)||t.indexOf("x")<=0)?e:NaN}function nte(t){return!isNaN(id(t))}function rte(){return Math.round(Math.random()*9)}function ste(t,e){return e===0?t:ste(e,t%e)}function gj(t,e){return t==null?e:e==null?t:t*e/ste(t,e)}function kn(t){throw new Error(t)}function vj(t,e,n){return(e-t)*n+t}var ite="series\0",ate="\0_ec_\0";function In(t){return t instanceof Array?t:t==null?[]:[t]}function Xp(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,s=n.length;r<s;r++){var i=n[r];!t.emphasis[e].hasOwnProperty(i)&&t[e].hasOwnProperty(i)&&(t.emphasis[e][i]=t[e][i])}}}var yj=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Ng(t){return wt(t)&&!He(t)&&!(t instanceof Date)?t.value:t}function H8e(t){return wt(t)&&!(t instanceof Array)}function ote(t,e,n){var r=n==="normalMerge",s=n==="replaceMerge",i=n==="replaceAll";t=t||[],e=(e||[]).slice();var a=mt();de(e,function(l,d){if(!wt(l)){e[d]=null;return}});var o=q8e(t,a,n);return(r||s)&&W8e(o,t,a,e),r&&G8e(o,e),r||s?Y8e(o,e,s):i&&K8e(o,e),X8e(o),o}function q8e(t,e,n){var r=[];if(n==="replaceAll")return r;for(var s=0;s<t.length;s++){var i=t[s];i&&i.id!=null&&e.set(i.id,s),r.push({existing:n==="replaceMerge"||y1(i)?null:i,newOption:null,keyInfo:null,brandNew:null})}return r}function W8e(t,e,n,r){de(r,function(s,i){if(!(!s||s.id==null)){var a=d0(s.id),o=n.get(a);if(o!=null){var l=t[o];Ei(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=s,l.existing=e[o],r[i]=null}}})}function G8e(t,e){de(e,function(n,r){if(!(!n||n.name==null))for(var s=0;s<t.length;s++){var i=t[s].existing;if(!t[s].newOption&&i&&(i.id==null||n.id==null)&&!y1(n)&&!y1(i)&&lte("name",i,n)){t[s].newOption=n,e[r]=null;return}}})}function Y8e(t,e,n){de(e,function(r){if(r){for(var s,i=0;(s=t[i])&&(s.newOption||y1(s.existing)||s.existing&&r.id!=null&&!lte("id",r,s.existing));)i++;s?(s.newOption=r,s.brandNew=n):t.push({newOption:r,brandNew:n,existing:null,keyInfo:null}),i++}})}function K8e(t,e){de(e,function(n){t.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function X8e(t){var e=mt();de(t,function(n){var r=n.existing;r&&e.set(r.id,n)}),de(t,function(n){var r=n.newOption;Ei(!r||r.id==null||!e.get(r.id)||e.get(r.id)===n,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,n),!n.keyInfo&&(n.keyInfo={})}),de(t,function(n,r){var s=n.existing,i=n.newOption,a=n.keyInfo;if(wt(i)){if(a.name=i.name!=null?d0(i.name):s?s.name:ite+r,s)a.id=d0(s.id);else if(i.id!=null)a.id=d0(i.id);else{var o=0;do a.id="\0"+a.name+"\0"+o++;while(e.get(a.id))}e.set(a.id,n)}})}function lte(t,e,n){var r=Qr(e[t],null),s=Qr(n[t],null);return r!=null&&s!=null&&r===s}function d0(t){return Qr(t,"")}function Qr(t,e){return t==null?e:ot(t)?t:hn(t)||wM(t)?t+"":e}function t6(t){var e=t.name;return!!(e&&e.indexOf(ite))}function y1(t){return t&&t.id!=null&&d0(t.id).indexOf(ate)===0}function Q8e(t){return ate+t}function Z8e(t,e,n){de(t,function(r){var s=r.newOption;wt(s)&&(r.keyInfo.mainType=e,r.keyInfo.subType=J8e(e,s,r.existing,n))})}function J8e(t,e,n,r){var s=e.type?e.type:n?n.subType:r.determineSubType(t,e);return s}function eVe(t,e){var n={},r={};return s(t||[],n),s(e||[],r,n),[i(n),i(r)];function s(a,o,l){for(var d=0,c=a.length;d<c;d++){var f=Qr(a[d].seriesId,null);if(f==null)return;for(var p=In(a[d].dataIndex),h=l&&l[f],m=0,g=p.length;m<g;m++){var y=p[m];h&&h[y]?h[y]=null:(o[f]||(o[f]={}))[y]=1}}}function i(a,o){var l=[];for(var d in a)if(a.hasOwnProperty(d)&&a[d]!=null)if(o)l.push(+d);else{var c=i(a[d],!0);c.length&&l.push({seriesId:d,dataIndex:c})}return l}}function Qp(t,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return He(e.dataIndex)?We(e.dataIndex,function(n){return t.indexOfRawIndex(n)}):t.indexOfRawIndex(e.dataIndex);if(e.name!=null)return He(e.name)?We(e.name,function(n){return t.indexOfName(n)}):t.indexOfName(e.name)}function ln(){var t="__ec_inner_"+tVe++;return function(e){return e[t]||(e[t]={})}}var tVe=rte();function c0(t,e,n){var r=n6(e,n),s=r.mainTypeSpecified,i=r.queryOptionMap,a=r.others,o=a,l=n?n.defaultMainType:null;return!s&&l&&i.set(l,{}),i.each(function(d,c){var f=Cb(t,c,d,{useDefault:l===c,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});o[c+"Models"]=f.models,o[c+"Model"]=f.models[0]}),o}function n6(t,e){var n;if(ot(t)){var r={};r[t+"Index"]=0,n=r}else n=t;var s=mt(),i={},a=!1;return de(n,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){i[l]=o;return}var d=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=d[1],f=(d[2]||"").toLowerCase();if(!(!c||!f||e&&e.includeMainTypes&&Xt(e.includeMainTypes,c)<0)){a=a||!!c;var p=s.get(c)||s.set(c,{});p[f]=o}}),{mainTypeSpecified:a,queryOptionMap:s,others:i}}var Br={useDefault:!0,enableAll:!1,enableNone:!1},nVe={useDefault:!1,enableAll:!0,enableNone:!0};function Cb(t,e,n,r){r=r||Br;var s=n.index,i=n.id,a=n.name,o={models:null,specified:s!=null||i!=null||a!=null};if(!o.specified){var l=void 0;return o.models=r.useDefault&&(l=t.getComponent(e))?[l]:[],o}return s==="none"||s===!1?(Ei(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(s==="all"&&(Ei(r.enableAll,'`"all"` is not a valid value on index option.'),s=i=a=null),o.models=t.queryComponents({mainType:e,index:s,id:i,name:a}),o)}function rVe(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function sVe(t){return t==="auto"?tn.domSupported?"html":"richText":t||"html"}function qM(t,e){var n=mt(),r=[];return de(t,function(s){var i=e(s);(n.get(i)||(r.push(i),n.set(i,[]))).push(s)}),{keys:r,buckets:n}}function ute(t,e,n,r,s){var i=e==null||e==="auto";if(r==null)return r;if(hn(r)){var a=vj(n||0,r,s);return Mr(a,i?Math.max(kl(n||0),kl(r)):e)}else{if(ot(r))return s<1?n:r;for(var o=[],l=n,d=r,c=Math.max(l?l.length:0,d.length),f=0;f<c;++f){var p=t.getDimensionInfo(f);if(p&&p.type==="ordinal")o[f]=(s<1&&l?l:d)[f];else{var h=l&&l[f]?l[f]:0,m=d[f],a=vj(h,m,s);o[f]=Mr(a,i?Math.max(kl(h),kl(m)):e)}}return o}}var iVe=".",pf="___EC__COMPONENT__CONTAINER___",dte="___EC__EXTENDED_CLASS___";function Sl(t){var e={main:"",sub:""};if(t){var n=t.split(iVe);e.main=n[0]||"",e.sub=n[1]||""}return e}function aVe(t){Ei(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function oVe(t){return!!(t&&t[dte])}function r6(t,e){t.$constructor=t,t.extend=function(n){var r=this,s;return lVe(r)?s=function(i){Te(a,i);function a(){return i.apply(this,arguments)||this}return a}(r):(s=function(){(n.$constructor||r).apply(this,arguments)},gLe(s,this)),Ne(s.prototype,n),s[dte]=!0,s.extend=this.extend,s.superCall=cVe,s.superApply=fVe,s.superClass=r,s}}function lVe(t){return bt(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function cte(t,e){t.extend=e.extend}var uVe=Math.round(Math.random()*10);function dVe(t){var e=["__\0is_clz",uVe++].join("_");t.prototype[e]=!0,t.isInstance=function(n){return!!(n&&n[e])}}function cVe(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[e].apply(t,n)}function fVe(t,e,n){return this.superClass.prototype[e].apply(t,n)}function HC(t){var e={};t.registerClass=function(r){var s=r.type||r.prototype.type;if(s){aVe(s),r.prototype.type=s;var i=Sl(s);if(!i.sub)e[i.main]=r;else if(i.sub!==pf){var a=n(i);a[i.sub]=r}}return r},t.getClass=function(r,s,i){var a=e[r];if(a&&a[pf]&&(a=s?a[s]:null),i&&!a)throw new Error(s?"Component "+r+"."+(s||"")+" is used but not imported.":r+".type should be specified.");return a},t.getClassesByMainType=function(r){var s=Sl(r),i=[],a=e[s.main];return a&&a[pf]?de(a,function(o,l){l!==pf&&i.push(o)}):i.push(a),i},t.hasClass=function(r){var s=Sl(r);return!!e[s.main]},t.getAllClassMainTypes=function(){var r=[];return de(e,function(s,i){r.push(i)}),r},t.hasSubTypes=function(r){var s=Sl(r),i=e[s.main];return i&&i[pf]};function n(r){var s=e[r.main];return(!s||!s[pf])&&(s=e[r.main]={},s[pf]=!0),s}}function Zp(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(r,s,i){for(var a={},o=0;o<t.length;o++){var l=t[o][1];if(!(s&&Xt(s,l)>=0||i&&Xt(i,l)<0)){var d=r.getShallow(l,e);d!=null&&(a[t[o][0]]=d)}}return a}}var pVe=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],hVe=Zp(pVe),mVe=function(){function t(){}return t.prototype.getAreaStyle=function(e,n){return hVe(this,e,n)},t}(),WM=new kb(50);function gVe(t){if(typeof t=="string"){var e=WM.get(t);return e&&e.image}else return t}function s6(t,e,n,r,s){if(t)if(typeof t=="string"){if(e&&e.__zrImageSrc===t||!n)return e;var i=WM.get(t),a={hostEl:n,cb:r,cbPayload:s};return i?(e=i.image,!qC(e)&&i.pending.push(a)):(e=Oc.loadImage(t,bj,bj),e.__zrImageSrc=t,WM.put(t,e.__cachedImgObj={image:e,pending:[a]})),e}else return t;else return e}function bj(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function qC(t){return t&&t.width&&t.height}var kT=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function vVe(t,e,n,r,s,i){if(!n){t.text="",t.isTruncated=!1;return}var a=(e+"").split(`
`);i=fte(n,r,s,i);for(var o=!1,l={},d=0,c=a.length;d<c;d++)pte(l,a[d],i),a[d]=l.textLine,o=o||l.isTruncated;t.text=a.join(`
`),t.isTruncated=o}function fte(t,e,n,r){r=r||{};var s=Ne({},r);s.font=e,n=Ot(n,"..."),s.maxIterations=Ot(r.maxIterations,2);var i=s.minChar=Ot(r.minChar,0);s.cnCharWidth=ba("",e);var a=s.ascCharWidth=ba("a",e);s.placeholder=Ot(r.placeholder,"");for(var o=t=Math.max(0,t-1),l=0;l<i&&o>=a;l++)o-=a;var d=ba(n,e);return d>o&&(n="",d=0),o=t-d,s.ellipsis=n,s.ellipsisWidth=d,s.contentWidth=o,s.containerWidth=t,s}function pte(t,e,n){var r=n.containerWidth,s=n.font,i=n.contentWidth;if(!r){t.textLine="",t.isTruncated=!1;return}var a=ba(e,s);if(a<=r){t.textLine=e,t.isTruncated=!1;return}for(var o=0;;o++){if(a<=i||o>=n.maxIterations){e+=n.ellipsis;break}var l=o===0?yVe(e,i,n.ascCharWidth,n.cnCharWidth):a>0?Math.floor(e.length*i/a):0;e=e.substr(0,l),a=ba(e,s)}e===""&&(e=n.placeholder),t.textLine=e,t.isTruncated=!0}function yVe(t,e,n,r){for(var s=0,i=0,a=t.length;i<a&&s<e;i++){var o=t.charCodeAt(i);s+=0<=o&&o<=127?n:r}return i}function bVe(t,e){t!=null&&(t+="");var n=e.overflow,r=e.padding,s=e.font,i=n==="truncate",a=zC(s),o=Ot(e.lineHeight,a),l=!!e.backgroundColor,d=e.lineOverflow==="truncate",c=!1,f=e.width,p;f!=null&&(n==="break"||n==="breakAll")?p=t?hte(t,e.font,f,n==="breakAll",0).lines:[]:p=t?t.split(`
`):[];var h=p.length*o,m=Ot(e.height,h);if(h>m&&d){var g=Math.floor(m/o);c=c||p.length>g,p=p.slice(0,g)}if(t&&i&&f!=null)for(var y=fte(f,s,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),x={},_=0;_<p.length;_++)pte(x,p[_],y),p[_]=x.textLine,c=c||x.isTruncated;for(var k=m,w=0,_=0;_<p.length;_++)w=Math.max(ba(p[_],s),w);f==null&&(f=w);var S=w;return r&&(k+=r[0]+r[2],S+=r[1]+r[3],f+=r[1]+r[3]),l&&(S=f),{lines:p,height:m,outerWidth:S,outerHeight:k,lineHeight:o,calculatedLineHeight:a,contentWidth:w,contentHeight:h,width:f,isTruncated:c}}var xVe=function(){function t(){}return t}(),xj=function(){function t(e){this.tokens=[],e&&(this.tokens=e)}return t}(),_Ve=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return t}();function wVe(t,e){var n=new _Ve;if(t!=null&&(t+=""),!t)return n;for(var r=e.width,s=e.height,i=e.overflow,a=(i==="break"||i==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:i==="breakAll"}:null,o=kT.lastIndex=0,l;(l=kT.exec(t))!=null;){var d=l.index;d>o&&ST(n,t.substring(o,d),e,a),ST(n,l[2],e,a,l[1]),o=kT.lastIndex}o<t.length&&ST(n,t.substring(o,t.length),e,a);var c=[],f=0,p=0,h=e.padding,m=i==="truncate",g=e.lineOverflow==="truncate",y={};function x(j,U,G){j.width=U,j.lineHeight=G,f+=G,p=Math.max(p,U)}e:for(var _=0;_<n.lines.length;_++){for(var k=n.lines[_],w=0,S=0,C=0;C<k.tokens.length;C++){var A=k.tokens[C],M=A.styleName&&e.rich[A.styleName]||{},E=A.textPadding=M.padding,P=E?E[1]+E[3]:0,I=A.font=M.font||e.font;A.contentHeight=zC(I);var F=Ot(M.height,A.contentHeight);if(A.innerHeight=F,E&&(F+=E[0]+E[2]),A.height=F,A.lineHeight=Dl(M.lineHeight,e.lineHeight,F),A.align=M&&M.align||e.align,A.verticalAlign=M&&M.verticalAlign||"middle",g&&s!=null&&f+A.lineHeight>s){var L=n.lines.length;C>0?(k.tokens=k.tokens.slice(0,C),x(k,S,w),n.lines=n.lines.slice(0,_+1)):n.lines=n.lines.slice(0,_),n.isTruncated=n.isTruncated||n.lines.length<L;break e}var z=M.width,N=z==null||z==="auto";if(typeof z=="string"&&z.charAt(z.length-1)==="%")A.percentWidth=z,c.push(A),A.contentWidth=ba(A.text,I);else{if(N){var q=M.backgroundColor,V=q&&q.image;V&&(V=gVe(V),qC(V)&&(A.width=Math.max(A.width,V.width*F/V.height)))}var O=m&&r!=null?r-S:null;O!=null&&O<A.width?!N||O<P?(A.text="",A.width=A.contentWidth=0):(vVe(y,A.text,O-P,I,e.ellipsis,{minChar:e.truncateMinChar}),A.text=y.text,n.isTruncated=n.isTruncated||y.isTruncated,A.width=A.contentWidth=ba(A.text,I)):A.contentWidth=ba(A.text,I)}A.width+=P,S+=A.width,M&&(w=Math.max(w,A.lineHeight))}x(k,S,w)}n.outerWidth=n.width=Ot(r,p),n.outerHeight=n.height=Ot(s,f),n.contentHeight=f,n.contentWidth=p,h&&(n.outerWidth+=h[1]+h[3],n.outerHeight+=h[0]+h[2]);for(var _=0;_<c.length;_++){var A=c[_],X=A.percentWidth;A.width=parseInt(X,10)/100*n.width}return n}function ST(t,e,n,r,s){var i=e==="",a=s&&n.rich[s]||{},o=t.lines,l=a.font||n.font,d=!1,c,f;if(r){var p=a.padding,h=p?p[1]+p[3]:0;if(a.width!=null&&a.width!=="auto"){var m=Fo(a.width,r.width)+h;o.length>0&&m+r.accumWidth>r.width&&(c=e.split(`
`),d=!0),r.accumWidth=m}else{var g=hte(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=g.accumWidth+h,f=g.linesWidths,c=g.lines}}else c=e.split(`
`);for(var y=0;y<c.length;y++){var x=c[y],_=new xVe;if(_.styleName=s,_.text=x,_.isLineHolder=!x&&!i,typeof a.width=="number"?_.width=a.width:_.width=f?f[y]:ba(x,l),!y&&!d){var k=(o[o.length-1]||(o[0]=new xj)).tokens,w=k.length;w===1&&k[0].isLineHolder?k[0]=_:(x||!w||i)&&k.push(_)}else o.push(new xj([_]))}}function kVe(t){var e=t.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var SVe=Bl(",&?/;] ".split(""),function(t,e){return t[e]=!0,t},{});function CVe(t){return kVe(t)?!!SVe[t]:!0}function hte(t,e,n,r,s){for(var i=[],a=[],o="",l="",d=0,c=0,f=0;f<t.length;f++){var p=t.charAt(f);if(p===`
`){l&&(o+=l,c+=d),i.push(o),a.push(c),o="",l="",d=0,c=0;continue}var h=ba(p,e),m=r?!1:!CVe(p);if(i.length?c+h>n:s+c+h>n){c?(o||l)&&(m?(o||(o=l,l="",d=0,c=d),i.push(o),a.push(c-d),l+=p,d+=h,o="",c=d):(l&&(o+=l,l="",d=0),i.push(o),a.push(c),o=p,c=h)):m?(i.push(l),a.push(d),l=p,d=h):(i.push(p),a.push(h));continue}c+=h,m?(l+=p,d+=h):(l&&(o+=l,l="",d=0),o+=p)}return!i.length&&!o&&(o=t,l="",d=0),l&&(o+=l),o&&(i.push(o),a.push(c)),i.length===1&&(c+=s),{accumWidth:c,lines:i,linesWidths:a}}var GM="__zr_style_"+Math.round(Math.random()*10),Dp={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},WC={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Dp[GM]=!0;var _j=["z","z2","invisible"],AVe=["invisible"],oo=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype._init=function(n){for(var r=sn(n),s=0;s<r.length;s++){var i=r[s];i==="style"?this.useStyle(n[i]):t.prototype.attrKV.call(this,i,n[i])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(n,r,s,i){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&TVe(this,n,r)||a&&!a[0]&&!a[3])return!1;if(s&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(i&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(n,r){return this.rectContain(n,r)},e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.rectContain=function(n,r){var s=this.transformCoordToLocal(n,r),i=this.getBoundingRect();return i.contain(s[0],s[1])},e.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,s=this.getBoundingRect(),i=this.style,a=i.shadowBlur||0,o=i.shadowOffsetX||0,l=i.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new Gt(0,0,0,0)),r?Gt.applyTransform(n,s,r):n.copy(s),(a||o||l)&&(n.width+=a*2+Math.abs(o),n.height+=a*2+Math.abs(l),n.x=Math.min(n.x,n.x+o-a),n.y=Math.min(n.y,n.y+l-a));var d=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-d),n.y=Math.floor(n.y-d),n.width=Math.ceil(n.width+1+d*2),n.height=Math.ceil(n.height+1+d*2))}return n},e.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new Gt(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(n){return this.animate("style",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(n,r){n!=="style"?t.prototype.attrKV.call(this,n,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(n,r){return typeof n=="string"?this.style[n]=r:Ne(this.style,n),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=py,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&py)},e.prototype.styleUpdated=function(){this.__dirty&=~py},e.prototype.createStyle=function(n){return jC(Dp,n)},e.prototype.useStyle=function(n){n[GM]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},e.prototype.isStyleObject=function(n){return n[GM]},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,r,_j)},e.prototype._applyStateObj=function(n,r,s,i,a,o){t.prototype._applyStateObj.call(this,n,r,s,i,a,o);var l=!(r&&i),d;if(r&&r.style?a?i?d=r.style:(d=this._mergeStyle(this.createStyle(),s.style),this._mergeStyle(d,r.style)):(d=this._mergeStyle(this.createStyle(),i?this.style:s.style),this._mergeStyle(d,r.style)):l&&(d=s.style),d)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=sn(c),p=0;p<f.length;p++){var h=f[p];h in d&&(d[h]=d[h],this.style[h]=c[h])}for(var m=sn(d),p=0;p<m.length;p++){var h=m[p];this.style[h]=this.style[h]}this._transitionState(n,{style:d},o,this.getAnimationStyleProps())}else this.useStyle(d);for(var g=this.__inHover?AVe:_j,p=0;p<g.length;p++){var h=g[p];r&&r[h]!=null?this[h]=r[h]:l&&s[h]!=null&&(this[h]=s[h])}},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),s,i=0;i<n.length;i++){var a=n[i];a.style&&(s=s||{},this._mergeStyle(s,a.style))}return s&&(r.style=s),r},e.prototype._mergeStyle=function(n,r){return Ne(n,r),n},e.prototype.getAnimationStyleProps=function(){return WC},e.initDefaultProps=function(){var n=e.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=ua|py}(),e}(UC),CT=new Gt(0,0,0,0),AT=new Gt(0,0,0,0);function TVe(t,e,n){return CT.copy(t.getBoundingRect()),t.transform&&CT.applyTransform(t.transform),AT.width=e,AT.height=n,!CT.intersect(AT)}var Ui=Math.min,Hi=Math.max,TT=Math.sin,$T=Math.cos,hf=Math.PI*2,Yx=hh(),Kx=hh(),Xx=hh();function GC(t,e,n){if(t.length!==0){for(var r=t[0],s=r[0],i=r[0],a=r[1],o=r[1],l=1;l<t.length;l++)r=t[l],s=Ui(s,r[0]),i=Hi(i,r[0]),a=Ui(a,r[1]),o=Hi(o,r[1]);e[0]=s,e[1]=a,n[0]=i,n[1]=o}}function wj(t,e,n,r,s,i){s[0]=Ui(t,n),s[1]=Ui(e,r),i[0]=Hi(t,n),i[1]=Hi(e,r)}var kj=[],Sj=[];function $Ve(t,e,n,r,s,i,a,o,l,d){var c=Iee,f=rs,p=c(t,n,s,a,kj);l[0]=1/0,l[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var h=0;h<p;h++){var m=f(t,n,s,a,kj[h]);l[0]=Ui(m,l[0]),d[0]=Hi(m,d[0])}p=c(e,r,i,o,Sj);for(var h=0;h<p;h++){var g=f(e,r,i,o,Sj[h]);l[1]=Ui(g,l[1]),d[1]=Hi(g,d[1])}l[0]=Ui(t,l[0]),d[0]=Hi(t,d[0]),l[0]=Ui(a,l[0]),d[0]=Hi(a,d[0]),l[1]=Ui(e,l[1]),d[1]=Hi(e,d[1]),l[1]=Ui(o,l[1]),d[1]=Hi(o,d[1])}function MVe(t,e,n,r,s,i,a,o){var l=Lee,d=gs,c=Hi(Ui(l(t,n,s),1),0),f=Hi(Ui(l(e,r,i),1),0),p=d(t,n,s,c),h=d(e,r,i,f);a[0]=Ui(t,s,p),a[1]=Ui(e,i,h),o[0]=Hi(t,s,p),o[1]=Hi(e,i,h)}function EVe(t,e,n,r,s,i,a,o,l){var d=ic,c=ac,f=Math.abs(s-i);if(f%hf<1e-4&&f>1e-4){o[0]=t-n,o[1]=e-r,l[0]=t+n,l[1]=e+r;return}if(Yx[0]=$T(s)*n+t,Yx[1]=TT(s)*r+e,Kx[0]=$T(i)*n+t,Kx[1]=TT(i)*r+e,d(o,Yx,Kx),c(l,Yx,Kx),s=s%hf,s<0&&(s=s+hf),i=i%hf,i<0&&(i=i+hf),s>i&&!a?i+=hf:s<i&&a&&(s+=hf),a){var p=i;i=s,s=p}for(var h=0;h<i;h+=Math.PI/2)h>s&&(Xx[0]=$T(h)*n+t,Xx[1]=TT(h)*r+e,d(o,Xx,o),c(l,Xx,l))}var jn={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},mf=[],gf=[],Ko=[],Cd=[],Xo=[],Qo=[],MT=Math.min,ET=Math.max,vf=Math.cos,yf=Math.sin,cu=Math.abs,YM=Math.PI,jd=YM*2,DT=typeof Float32Array!="undefined",Mv=[];function RT(t){var e=Math.round(t/YM*1e8)/1e8;return e%2*YM}function i6(t,e){var n=RT(t[0]);n<0&&(n+=jd);var r=n-t[0],s=t[1];s+=r,!e&&s-n>=jd?s=n+jd:e&&n-s>=jd?s=n-jd:!e&&n>s?s=n+(jd-RT(n-s)):e&&n<s&&(s=n-(jd-RT(s-n))),t[0]=n,t[1]=s}var ql=function(){function t(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(e,n,r){r=r||0,r>0&&(this._ux=cu(r/Sk/e)||0,this._uy=cu(r/Sk/n)||0)},t.prototype.setDPR=function(e){this.dpr=e},t.prototype.setContext=function(e){this._ctx=e},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(e,n){return this._drawPendingPt(),this.addData(jn.M,e,n),this._ctx&&this._ctx.moveTo(e,n),this._x0=e,this._y0=n,this._xi=e,this._yi=n,this},t.prototype.lineTo=function(e,n){var r=cu(e-this._xi),s=cu(n-this._yi),i=r>this._ux||s>this._uy;if(this.addData(jn.L,e,n),this._ctx&&i&&this._ctx.lineTo(e,n),i)this._xi=e,this._yi=n,this._pendingPtDist=0;else{var a=r*r+s*s;a>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=n,this._pendingPtDist=a)}return this},t.prototype.bezierCurveTo=function(e,n,r,s,i,a){return this._drawPendingPt(),this.addData(jn.C,e,n,r,s,i,a),this._ctx&&this._ctx.bezierCurveTo(e,n,r,s,i,a),this._xi=i,this._yi=a,this},t.prototype.quadraticCurveTo=function(e,n,r,s){return this._drawPendingPt(),this.addData(jn.Q,e,n,r,s),this._ctx&&this._ctx.quadraticCurveTo(e,n,r,s),this._xi=r,this._yi=s,this},t.prototype.arc=function(e,n,r,s,i,a){this._drawPendingPt(),Mv[0]=s,Mv[1]=i,i6(Mv,a),s=Mv[0],i=Mv[1];var o=i-s;return this.addData(jn.A,e,n,r,r,s,o,0,a?0:1),this._ctx&&this._ctx.arc(e,n,r,s,i,a),this._xi=vf(i)*r+e,this._yi=yf(i)*r+n,this},t.prototype.arcTo=function(e,n,r,s,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,n,r,s,i),this},t.prototype.rect=function(e,n,r,s){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,n,r,s),this.addData(jn.R,e,n,r,s),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(jn.Z);var e=this._ctx,n=this._x0,r=this._y0;return e&&e.closePath(),this._xi=n,this._yi=r,this},t.prototype.fill=function(e){e&&e.fill(),this.toStatic()},t.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(e){var n=e.length;!(this.data&&this.data.length===n)&&DT&&(this.data=new Float32Array(n));for(var r=0;r<n;r++)this.data[r]=e[r];this._len=n},t.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var n=e.length,r=0,s=this._len,i=0;i<n;i++)r+=e[i].len();DT&&this.data instanceof Float32Array&&(this.data=new Float32Array(s+r));for(var i=0;i<n;i++)for(var a=e[i].data,o=0;o<a.length;o++)this.data[s++]=a[o];this._len=s},t.prototype.addData=function(e,n,r,s,i,a,o,l,d){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],n=0;n<this._len;n++)e[n]=this.data[n];this.data=e}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,DT&&this._len>11&&(this.data=new Float32Array(e)))}},t.prototype.getBoundingRect=function(){Ko[0]=Ko[1]=Xo[0]=Xo[1]=Number.MAX_VALUE,Cd[0]=Cd[1]=Qo[0]=Qo[1]=-Number.MAX_VALUE;var e=this.data,n=0,r=0,s=0,i=0,a;for(a=0;a<this._len;){var o=e[a++],l=a===1;switch(l&&(n=e[a],r=e[a+1],s=n,i=r),o){case jn.M:n=s=e[a++],r=i=e[a++],Xo[0]=s,Xo[1]=i,Qo[0]=s,Qo[1]=i;break;case jn.L:wj(n,r,e[a],e[a+1],Xo,Qo),n=e[a++],r=e[a++];break;case jn.C:$Ve(n,r,e[a++],e[a++],e[a++],e[a++],e[a],e[a+1],Xo,Qo),n=e[a++],r=e[a++];break;case jn.Q:MVe(n,r,e[a++],e[a++],e[a],e[a+1],Xo,Qo),n=e[a++],r=e[a++];break;case jn.A:var d=e[a++],c=e[a++],f=e[a++],p=e[a++],h=e[a++],m=e[a++]+h;a+=1;var g=!e[a++];l&&(s=vf(h)*f+d,i=yf(h)*p+c),EVe(d,c,f,p,h,m,g,Xo,Qo),n=vf(m)*f+d,r=yf(m)*p+c;break;case jn.R:s=n=e[a++],i=r=e[a++];var y=e[a++],x=e[a++];wj(s,i,s+y,i+x,Xo,Qo);break;case jn.Z:n=s,r=i;break}ic(Ko,Ko,Xo),ac(Cd,Cd,Qo)}return a===0&&(Ko[0]=Ko[1]=Cd[0]=Cd[1]=0),new Gt(Ko[0],Ko[1],Cd[0]-Ko[0],Cd[1]-Ko[1])},t.prototype._calculateLength=function(){var e=this.data,n=this._len,r=this._ux,s=this._uy,i=0,a=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var d=this._pathSegLen,c=0,f=0,p=0;p<n;){var h=e[p++],m=p===1;m&&(i=e[p],a=e[p+1],o=i,l=a);var g=-1;switch(h){case jn.M:i=o=e[p++],a=l=e[p++];break;case jn.L:{var y=e[p++],x=e[p++],_=y-i,k=x-a;(cu(_)>r||cu(k)>s||p===n-1)&&(g=Math.sqrt(_*_+k*k),i=y,a=x);break}case jn.C:{var w=e[p++],S=e[p++],y=e[p++],x=e[p++],C=e[p++],A=e[p++];g=XLe(i,a,w,S,y,x,C,A,10),i=C,a=A;break}case jn.Q:{var w=e[p++],S=e[p++],y=e[p++],x=e[p++];g=ZLe(i,a,w,S,y,x,10),i=y,a=x;break}case jn.A:var M=e[p++],E=e[p++],P=e[p++],I=e[p++],F=e[p++],L=e[p++],z=L+F;p+=1,m&&(o=vf(F)*P+M,l=yf(F)*I+E),g=ET(P,I)*MT(jd,Math.abs(L)),i=vf(z)*P+M,a=yf(z)*I+E;break;case jn.R:{o=i=e[p++],l=a=e[p++];var N=e[p++],q=e[p++];g=N*2+q*2;break}case jn.Z:{var _=o-i,k=l-a;g=Math.sqrt(_*_+k*k),i=o,a=l;break}}g>=0&&(d[f++]=g,c+=g)}return this._pathLen=c,c},t.prototype.rebuildPath=function(e,n){var r=this.data,s=this._ux,i=this._uy,a=this._len,o,l,d,c,f,p,h=n<1,m,g,y=0,x=0,_,k=0,w,S;if(!(h&&(this._pathSegLen||this._calculateLength(),m=this._pathSegLen,g=this._pathLen,_=n*g,!_)))e:for(var C=0;C<a;){var A=r[C++],M=C===1;switch(M&&(d=r[C],c=r[C+1],o=d,l=c),A!==jn.L&&k>0&&(e.lineTo(w,S),k=0),A){case jn.M:o=d=r[C++],l=c=r[C++],e.moveTo(d,c);break;case jn.L:{f=r[C++],p=r[C++];var E=cu(f-d),P=cu(p-c);if(E>s||P>i){if(h){var I=m[x++];if(y+I>_){var F=(_-y)/I;e.lineTo(d*(1-F)+f*F,c*(1-F)+p*F);break e}y+=I}e.lineTo(f,p),d=f,c=p,k=0}else{var L=E*E+P*P;L>k&&(w=f,S=p,k=L)}break}case jn.C:{var z=r[C++],N=r[C++],q=r[C++],V=r[C++],O=r[C++],X=r[C++];if(h){var I=m[x++];if(y+I>_){var F=(_-y)/I;Lc(d,z,q,O,F,mf),Lc(c,N,V,X,F,gf),e.bezierCurveTo(mf[1],gf[1],mf[2],gf[2],mf[3],gf[3]);break e}y+=I}e.bezierCurveTo(z,N,q,V,O,X),d=O,c=X;break}case jn.Q:{var z=r[C++],N=r[C++],q=r[C++],V=r[C++];if(h){var I=m[x++];if(y+I>_){var F=(_-y)/I;h1(d,z,q,F,mf),h1(c,N,V,F,gf),e.quadraticCurveTo(mf[1],gf[1],mf[2],gf[2]);break e}y+=I}e.quadraticCurveTo(z,N,q,V),d=q,c=V;break}case jn.A:var j=r[C++],U=r[C++],G=r[C++],ee=r[C++],ie=r[C++],ne=r[C++],ce=r[C++],oe=!r[C++],re=G>ee?G:ee,te=cu(G-ee)>.001,K=ie+ne,le=!1;if(h){var I=m[x++];y+I>_&&(K=ie+ne*(_-y)/I,le=!0),y+=I}if(te&&e.ellipse?e.ellipse(j,U,G,ee,ce,ie,K,oe):e.arc(j,U,re,ie,K,oe),le)break e;M&&(o=vf(ie)*G+j,l=yf(ie)*ee+U),d=vf(K)*G+j,c=yf(K)*ee+U;break;case jn.R:o=d=r[C],l=c=r[C+1],f=r[C++],p=r[C++];var H=r[C++],Y=r[C++];if(h){var I=m[x++];if(y+I>_){var B=_-y;e.moveTo(f,p),e.lineTo(f+MT(B,H),p),B-=H,B>0&&e.lineTo(f+H,p+MT(B,Y)),B-=Y,B>0&&e.lineTo(f+ET(H-B,0),p+Y),B-=H,B>0&&e.lineTo(f,p+ET(Y-B,0));break e}y+=I}e.rect(f,p,H,Y);break;case jn.Z:if(h){var I=m[x++];if(y+I>_){var F=(_-y)/I;e.lineTo(d*(1-F)+o*F,c*(1-F)+l*F);break e}y+=I}e.closePath(),d=o,c=l}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=jn,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}();function Yd(t,e,n,r,s,i,a){if(s===0)return!1;var o=s,l=0,d=t;if(a>e+o&&a>r+o||a<e-o&&a<r-o||i>t+o&&i>n+o||i<t-o&&i<n-o)return!1;if(t!==n)l=(e-r)/(t-n),d=(t*r-n*e)/(t-n);else return Math.abs(i-t)<=o/2;var c=l*i-a+d,f=c*c/(l*l+1);return f<=o/2*o/2}function DVe(t,e,n,r,s,i,a,o,l,d,c){if(l===0)return!1;var f=l;if(c>e+f&&c>r+f&&c>i+f&&c>o+f||c<e-f&&c<r-f&&c<i-f&&c<o-f||d>t+f&&d>n+f&&d>s+f&&d>a+f||d<t-f&&d<n-f&&d<s-f&&d<a-f)return!1;var p=Oee(t,e,n,r,s,i,a,o,d,c,null);return p<=f/2}function mte(t,e,n,r,s,i,a,o,l){if(a===0)return!1;var d=a;if(l>e+d&&l>r+d&&l>i+d||l<e-d&&l<r-d&&l<i-d||o>t+d&&o>n+d&&o>s+d||o<t-d&&o<n-d&&o<s-d)return!1;var c=Vee(t,e,n,r,s,i,o,l,null);return c<=d/2}var Cj=Math.PI*2;function fa(t){return t%=Cj,t<0&&(t+=Cj),t}var Ev=Math.PI*2;function RVe(t,e,n,r,s,i,a,o,l){if(a===0)return!1;var d=a;o-=t,l-=e;var c=Math.sqrt(o*o+l*l);if(c-d>n||c+d<n)return!1;if(Math.abs(r-s)%Ev<1e-4)return!0;if(i){var f=r;r=fa(s),s=fa(f)}else r=fa(r),s=fa(s);r>s&&(s+=Ev);var p=Math.atan2(l,o);return p<0&&(p+=Ev),p>=r&&p<=s||p+Ev>=r&&p+Ev<=s}function Su(t,e,n,r,s,i){if(i>e&&i>r||i<e&&i<r||r===e)return 0;var a=(i-e)/(r-e),o=r<e?1:-1;(a===1||a===0)&&(o=r<e?.5:-.5);var l=a*(n-t)+t;return l===s?1/0:l>s?o:0}var Ad=ql.CMD,bf=Math.PI*2,PVe=1e-4;function IVe(t,e){return Math.abs(t-e)<PVe}var mi=[-1,-1,-1],Ia=[-1,-1];function OVe(){var t=Ia[0];Ia[0]=Ia[1],Ia[1]=t}function LVe(t,e,n,r,s,i,a,o,l,d){if(d>e&&d>r&&d>i&&d>o||d<e&&d<r&&d<i&&d<o)return 0;var c=xk(e,r,i,o,d,mi);if(c===0)return 0;for(var f=0,p=-1,h=void 0,m=void 0,g=0;g<c;g++){var y=mi[g],x=y===0||y===1?.5:1,_=rs(t,n,s,a,y);_<l||(p<0&&(p=Iee(e,r,i,o,Ia),Ia[1]<Ia[0]&&p>1&&OVe(),h=rs(e,r,i,o,Ia[0]),p>1&&(m=rs(e,r,i,o,Ia[1]))),p===2?y<Ia[0]?f+=h<e?x:-x:y<Ia[1]?f+=m<h?x:-x:f+=o<m?x:-x:y<Ia[0]?f+=h<e?x:-x:f+=o<h?x:-x)}return f}function VVe(t,e,n,r,s,i,a,o){if(o>e&&o>r&&o>i||o<e&&o<r&&o<i)return 0;var l=QLe(e,r,i,o,mi);if(l===0)return 0;var d=Lee(e,r,i);if(d>=0&&d<=1){for(var c=0,f=gs(e,r,i,d),p=0;p<l;p++){var h=mi[p]===0||mi[p]===1?.5:1,m=gs(t,n,s,mi[p]);m<a||(mi[p]<d?c+=f<e?h:-h:c+=i<f?h:-h)}return c}else{var h=mi[0]===0||mi[0]===1?.5:1,m=gs(t,n,s,mi[0]);return m<a?0:i<e?h:-h}}function NVe(t,e,n,r,s,i,a,o){if(o-=e,o>n||o<-n)return 0;var l=Math.sqrt(n*n-o*o);mi[0]=-l,mi[1]=l;var d=Math.abs(r-s);if(d<1e-4)return 0;if(d>=bf-1e-4){r=0,s=bf;var c=i?1:-1;return a>=mi[0]+t&&a<=mi[1]+t?c:0}if(r>s){var f=r;r=s,s=f}r<0&&(r+=bf,s+=bf);for(var p=0,h=0;h<2;h++){var m=mi[h];if(m+t>a){var g=Math.atan2(o,m),c=i?1:-1;g<0&&(g=bf+g),(g>=r&&g<=s||g+bf>=r&&g+bf<=s)&&(g>Math.PI/2&&g<Math.PI*1.5&&(c=-c),p+=c)}}return p}function gte(t,e,n,r,s){for(var i=t.data,a=t.len(),o=0,l=0,d=0,c=0,f=0,p,h,m=0;m<a;){var g=i[m++],y=m===1;switch(g===Ad.M&&m>1&&(n||(o+=Su(l,d,c,f,r,s))),y&&(l=i[m],d=i[m+1],c=l,f=d),g){case Ad.M:c=i[m++],f=i[m++],l=c,d=f;break;case Ad.L:if(n){if(Yd(l,d,i[m],i[m+1],e,r,s))return!0}else o+=Su(l,d,i[m],i[m+1],r,s)||0;l=i[m++],d=i[m++];break;case Ad.C:if(n){if(DVe(l,d,i[m++],i[m++],i[m++],i[m++],i[m],i[m+1],e,r,s))return!0}else o+=LVe(l,d,i[m++],i[m++],i[m++],i[m++],i[m],i[m+1],r,s)||0;l=i[m++],d=i[m++];break;case Ad.Q:if(n){if(mte(l,d,i[m++],i[m++],i[m],i[m+1],e,r,s))return!0}else o+=VVe(l,d,i[m++],i[m++],i[m],i[m+1],r,s)||0;l=i[m++],d=i[m++];break;case Ad.A:var x=i[m++],_=i[m++],k=i[m++],w=i[m++],S=i[m++],C=i[m++];m+=1;var A=!!(1-i[m++]);p=Math.cos(S)*k+x,h=Math.sin(S)*w+_,y?(c=p,f=h):o+=Su(l,d,p,h,r,s);var M=(r-x)*w/k+x;if(n){if(RVe(x,_,w,S,S+C,A,e,M,s))return!0}else o+=NVe(x,_,w,S,S+C,A,M,s);l=Math.cos(S+C)*k+x,d=Math.sin(S+C)*w+_;break;case Ad.R:c=l=i[m++],f=d=i[m++];var E=i[m++],P=i[m++];if(p=c+E,h=f+P,n){if(Yd(c,f,p,f,e,r,s)||Yd(p,f,p,h,e,r,s)||Yd(p,h,c,h,e,r,s)||Yd(c,h,c,f,e,r,s))return!0}else o+=Su(p,f,p,h,r,s),o+=Su(c,h,c,f,r,s);break;case Ad.Z:if(n){if(Yd(l,d,c,f,e,r,s))return!0}else o+=Su(l,d,c,f,r,s);l=c,d=f;break}}return!n&&!IVe(d,f)&&(o+=Su(l,d,c,f,r,s)||0),o!==0}function jVe(t,e,n){return gte(t,0,!1,e,n)}function FVe(t,e,n,r){return gte(t,e,!0,n,r)}var Ak=_t({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Dp),BVe={style:_t({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},WC.style)},PT=Ul.concat(["invisible","culling","z","z2","zlevel","parent"]),en=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.update=function(){var n=this;t.prototype.update.call(this);var r=this.style;if(r.decal){var s=this._decalEl=this._decalEl||new e;s.buildPath===e.prototype.buildPath&&(s.buildPath=function(l){n.buildPath(l,n.shape)}),s.silent=!0;var i=s.style;for(var a in r)i[a]!==r[a]&&(i[a]=r[a]);i.fill=r.fill?r.decal:null,i.decal=null,i.shadowColor=null,r.strokeFirst&&(i.stroke=null);for(var o=0;o<PT.length;++o)s[PT[o]]=this[PT[o]];s.__dirty|=ua}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(n){var r=sn(n);this.shape=this.getDefaultShape();var s=this.getDefaultStyle();s&&this.useStyle(s);for(var i=0;i<r.length;i++){var a=r[i],o=n[a];a==="style"?this.style?Ne(this.style,o):this.useStyle(o):a==="shape"?Ne(this.shape,o):t.prototype.attrKV.call(this,a,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(ot(n)){var r=wk(n,0);return r>.5?zM:r>.2?C8e:UM}else if(n)return UM}return zM},e.prototype.getInsideTextStroke=function(n){var r=this.style.fill;if(ot(r)){var s=this.__zr,i=!!(s&&s.isDarkMode()),a=wk(n,0)<BM;if(i===a)return r}},e.prototype.buildPath=function(n,r,s){},e.prototype.pathUpdated=function(){this.__dirty&=~bm},e.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},e.prototype.createPathProxy=function(){this.path=new ql(!1)},e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return!(r==null||r==="none"||!(n.lineWidth>0))},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var n=this._rect,r=this.style,s=!n;if(s){var i=!1;this.path||(i=!0,this.createPathProxy());var a=this.path;(i||this.__dirty&bm)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),n=a.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||s){o.copy(n);var l=r.strokeNoScale?this.getLineScale():1,d=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;d=Math.max(d,c==null?4:c)}l>1e-10&&(o.width+=d/l,o.height+=d/l,o.x-=d/l/2,o.y-=d/l/2)}return o}return n},e.prototype.contain=function(n,r){var s=this.transformCoordToLocal(n,r),i=this.getBoundingRect(),a=this.style;if(n=s[0],r=s[1],i.contain(n,r)){var o=this.path;if(this.hasStroke()){var l=a.lineWidth,d=a.strokeNoScale?this.getLineScale():1;if(d>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),FVe(o,l/d,n,r)))return!0}if(this.hasFill())return jVe(o,n,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=bm,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(n){return this.animate("shape",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(n,r){n==="shape"?this.setShape(r):t.prototype.attrKV.call(this,n,r)},e.prototype.setShape=function(n,r){var s=this.shape;return s||(s=this.shape={}),typeof n=="string"?s[n]=r:Ne(s,n),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&bm)},e.prototype.createStyle=function(n){return jC(Ak,n)},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.shape&&!r.shape&&(r.shape=Ne({},this.shape))},e.prototype._applyStateObj=function(n,r,s,i,a,o){t.prototype._applyStateObj.call(this,n,r,s,i,a,o);var l=!(r&&i),d;if(r&&r.shape?a?i?d=r.shape:(d=Ne({},s.shape),Ne(d,r.shape)):(d=Ne({},i?this.shape:s.shape),Ne(d,r.shape)):l&&(d=s.shape),d)if(a){this.shape=Ne({},this.shape);for(var c={},f=sn(d),p=0;p<f.length;p++){var h=f[p];typeof d[h]=="object"?this.shape[h]=d[h]:c[h]=d[h]}this._transitionState(n,{shape:c},o)}else this.shape=d,this.dirtyShape()},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),s,i=0;i<n.length;i++){var a=n[i];a.shape&&(s=s||{},this._mergeStyle(s,a.shape))}return s&&(r.shape=s),r},e.prototype.getAnimationStyleProps=function(){return BVe},e.prototype.isZeroArea=function(){return!1},e.extend=function(n){var r=function(i){Te(a,i);function a(o){var l=i.call(this,o)||this;return n.init&&n.init.call(l,o),l}return a.prototype.getDefaultStyle=function(){return kt(n.style)},a.prototype.getDefaultShape=function(){return kt(n.shape)},a}(e);for(var s in n)typeof n[s]=="function"&&(r.prototype[s]=n[s]);return r},e.initDefaultProps=function(){var n=e.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=ua|py|bm}(),e}(oo),zVe=_t({strokeFirst:!0,font:Ic,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Ak),gg=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return r!=null&&r!=="none"&&n.lineWidth>0},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(n){return jC(zVe,n)},e.prototype.setBoundingRect=function(n){this._rect=n},e.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var r=n.text;r!=null?r+="":r="";var s=Sb(r,n.font,n.textAlign,n.textBaseline);if(s.x+=n.x||0,s.y+=n.y||0,this.hasStroke()){var i=n.lineWidth;s.x-=i/2,s.y-=i/2,s.width+=i,s.height+=i}this._rect=s}return this._rect},e.initDefaultProps=function(){var n=e.prototype;n.dirtyRectTolerance=10}(),e}(oo);gg.prototype.type="tspan";var UVe=_t({x:0,y:0},Dp),HVe={style:_t({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},WC.style)};function qVe(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var Cs=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createStyle=function(n){return jC(UVe,n)},e.prototype._getSize=function(n){var r=this.style,s=r[n];if(s!=null)return s;var i=qVe(r.image)?r.image:this.__image;if(!i)return 0;var a=n==="width"?"height":"width",o=r[a];return o==null?i[n]:i[n]/i[a]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return HVe},e.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new Gt(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},e}(oo);Cs.prototype.type="image";function WVe(t,e){var n=e.x,r=e.y,s=e.width,i=e.height,a=e.r,o,l,d,c;s<0&&(n=n+s,s=-s),i<0&&(r=r+i,i=-i),typeof a=="number"?o=l=d=c=a:a instanceof Array?a.length===1?o=l=d=c=a[0]:a.length===2?(o=d=a[0],l=c=a[1]):a.length===3?(o=a[0],l=c=a[1],d=a[2]):(o=a[0],l=a[1],d=a[2],c=a[3]):o=l=d=c=0;var f;o+l>s&&(f=o+l,o*=s/f,l*=s/f),d+c>s&&(f=d+c,d*=s/f,c*=s/f),l+d>i&&(f=l+d,l*=i/f,d*=i/f),o+c>i&&(f=o+c,o*=i/f,c*=i/f),t.moveTo(n+o,r),t.lineTo(n+s-l,r),l!==0&&t.arc(n+s-l,r+l,l,-Math.PI/2,0),t.lineTo(n+s,r+i-d),d!==0&&t.arc(n+s-d,r+i-d,d,0,Math.PI/2),t.lineTo(n+c,r+i),c!==0&&t.arc(n+c,r+i-c,c,Math.PI/2,Math.PI),t.lineTo(n,r+o),o!==0&&t.arc(n+o,r+o,o,Math.PI,Math.PI*1.5)}var $m=Math.round;function vte(t,e,n){if(e){var r=e.x1,s=e.x2,i=e.y1,a=e.y2;t.x1=r,t.x2=s,t.y1=i,t.y2=a;var o=n&&n.lineWidth;return o&&($m(r*2)===$m(s*2)&&(t.x1=t.x2=ap(r,o,!0)),$m(i*2)===$m(a*2)&&(t.y1=t.y2=ap(i,o,!0))),t}}function yte(t,e,n){if(e){var r=e.x,s=e.y,i=e.width,a=e.height;t.x=r,t.y=s,t.width=i,t.height=a;var o=n&&n.lineWidth;return o&&(t.x=ap(r,o,!0),t.y=ap(s,o,!0),t.width=Math.max(ap(r+i,o,!1)-t.x,i===0?0:1),t.height=Math.max(ap(s+a,o,!1)-t.y,a===0?0:1)),t}}function ap(t,e,n){if(!e)return t;var r=$m(t*2);return(r+$m(e))%2===0?r/2:(r+(n?1:-1))/2}var GVe=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),YVe={},on=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new GVe},e.prototype.buildPath=function(n,r){var s,i,a,o;if(this.subPixelOptimize){var l=yte(YVe,r,this.style);s=l.x,i=l.y,a=l.width,o=l.height,l.r=r.r,r=l}else s=r.x,i=r.y,a=r.width,o=r.height;r.r?WVe(n,r):n.rect(s,i,a,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(en);on.prototype.type="rect";var Aj={fill:"#000"},Tj=2,KVe={style:_t({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},WC.style)},dn=function(t){Te(e,t);function e(n){var r=t.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=Aj,r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var r=this._children[n];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(n){var r=this.innerTransformable;return r?r.getLocalTransform(n):t.prototype.getLocalTransform.call(this,n)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,ZVe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=n},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new Gt(0,0,0,0),r=this._children,s=[],i=null,a=0;a<r.length;a++){var o=r[a],l=o.getBoundingRect(),d=o.getLocalTransform(s);d?(n.copy(l),n.applyTransform(d),i=i||n.clone(),i.union(n)):(i=i||l.clone(),i.union(l))}this._rect=i||n}return this._rect},e.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||Aj},e.prototype.setTextContent=function(n){},e.prototype._mergeStyle=function(n,r){if(!r)return n;var s=r.rich,i=n.rich||s&&{};return Ne(n,r),s&&i?(this._mergeRich(i,s),n.rich=i):i&&(n.rich=i),n},e.prototype._mergeRich=function(n,r){for(var s=sn(r),i=0;i<s.length;i++){var a=s[i];n[a]=n[a]||{},Ne(n[a],r[a])}},e.prototype.getAnimationStyleProps=function(){return KVe},e.prototype._getOrCreateChild=function(n){var r=this._children[this._childCursor];return(!r||!(r instanceof n))&&(r=new n),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var n=this.style,r=n.font||Ic,s=n.padding,i=Ij(n),a=bVe(i,n),o=IT(n),l=!!n.backgroundColor,d=a.outerHeight,c=a.outerWidth,f=a.contentWidth,p=a.lines,h=a.lineHeight,m=this._defaultStyle;this.isTruncated=!!a.isTruncated;var g=n.x||0,y=n.y||0,x=n.align||m.align||"left",_=n.verticalAlign||m.verticalAlign||"top",k=g,w=xm(y,a.contentHeight,_);if(o||s){var S=my(g,c,x),C=xm(y,d,_);o&&this._renderBackground(n,n,S,C,c,d)}w+=h/2,s&&(k=Pj(g,x,s),_==="top"?w+=s[0]:_==="bottom"&&(w-=s[2]));for(var A=0,M=!1,E=Rj("fill"in n?n.fill:(M=!0,m.fill)),P=Dj("stroke"in n?n.stroke:!l&&(!m.autoStroke||M)?(A=Tj,m.stroke):null),I=n.textShadowBlur>0,F=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),L=a.calculatedLineHeight,z=0;z<p.length;z++){var N=this._getOrCreateChild(gg),q=N.createStyle();N.useStyle(q),q.text=p[z],q.x=k,q.y=w,q.textAlign=x,q.textBaseline="middle",q.opacity=n.opacity,q.strokeFirst=!0,I&&(q.shadowBlur=n.textShadowBlur||0,q.shadowColor=n.textShadowColor||"transparent",q.shadowOffsetX=n.textShadowOffsetX||0,q.shadowOffsetY=n.textShadowOffsetY||0),q.stroke=P,q.fill=E,P&&(q.lineWidth=n.lineWidth||A,q.lineDash=n.lineDash,q.lineDashOffset=n.lineDashOffset||0),q.font=r,Mj(q,n),w+=h,F&&N.setBoundingRect(new Gt(my(q.x,f,q.textAlign),xm(q.y,L,q.textBaseline),f,L))}},e.prototype._updateRichTexts=function(){var n=this.style,r=Ij(n),s=wVe(r,n),i=s.width,a=s.outerWidth,o=s.outerHeight,l=n.padding,d=n.x||0,c=n.y||0,f=this._defaultStyle,p=n.align||f.align,h=n.verticalAlign||f.verticalAlign;this.isTruncated=!!s.isTruncated;var m=my(d,a,p),g=xm(c,o,h),y=m,x=g;l&&(y+=l[3],x+=l[0]);var _=y+i;IT(n)&&this._renderBackground(n,n,m,g,a,o);for(var k=!!n.backgroundColor,w=0;w<s.lines.length;w++){for(var S=s.lines[w],C=S.tokens,A=C.length,M=S.lineHeight,E=S.width,P=0,I=y,F=_,L=A-1,z=void 0;P<A&&(z=C[P],!z.align||z.align==="left");)this._placeToken(z,n,M,x,I,"left",k),E-=z.width,I+=z.width,P++;for(;L>=0&&(z=C[L],z.align==="right");)this._placeToken(z,n,M,x,F,"right",k),E-=z.width,F-=z.width,L--;for(I+=(i-(I-y)-(_-F)-E)/2;P<=L;)z=C[P],this._placeToken(z,n,M,x,I+z.width/2,"center",k),I+=z.width,P++;x+=M}},e.prototype._placeToken=function(n,r,s,i,a,o,l){var d=r.rich[n.styleName]||{};d.text=n.text;var c=n.verticalAlign,f=i+s/2;c==="top"?f=i+n.height/2:c==="bottom"&&(f=i+s-n.height/2);var p=!n.isLineHolder&&IT(d);p&&this._renderBackground(d,r,o==="right"?a-n.width:o==="center"?a-n.width/2:a,f-n.height/2,n.width,n.height);var h=!!d.backgroundColor,m=n.textPadding;m&&(a=Pj(a,o,m),f-=n.height/2-m[0]-n.innerHeight/2);var g=this._getOrCreateChild(gg),y=g.createStyle();g.useStyle(y);var x=this._defaultStyle,_=!1,k=0,w=Rj("fill"in d?d.fill:"fill"in r?r.fill:(_=!0,x.fill)),S=Dj("stroke"in d?d.stroke:"stroke"in r?r.stroke:!h&&!l&&(!x.autoStroke||_)?(k=Tj,x.stroke):null),C=d.textShadowBlur>0||r.textShadowBlur>0;y.text=n.text,y.x=a,y.y=f,C&&(y.shadowBlur=d.textShadowBlur||r.textShadowBlur||0,y.shadowColor=d.textShadowColor||r.textShadowColor||"transparent",y.shadowOffsetX=d.textShadowOffsetX||r.textShadowOffsetX||0,y.shadowOffsetY=d.textShadowOffsetY||r.textShadowOffsetY||0),y.textAlign=o,y.textBaseline="middle",y.font=n.font||Ic,y.opacity=Dl(d.opacity,r.opacity,1),Mj(y,d),S&&(y.lineWidth=Dl(d.lineWidth,r.lineWidth,k),y.lineDash=Ot(d.lineDash,r.lineDash),y.lineDashOffset=r.lineDashOffset||0,y.stroke=S),w&&(y.fill=w);var A=n.contentWidth,M=n.contentHeight;g.setBoundingRect(new Gt(my(y.x,A,y.textAlign),xm(y.y,M,y.textBaseline),A,M))},e.prototype._renderBackground=function(n,r,s,i,a,o){var l=n.backgroundColor,d=n.borderWidth,c=n.borderColor,f=l&&l.image,p=l&&!f,h=n.borderRadius,m=this,g,y;if(p||n.lineHeight||d&&c){g=this._getOrCreateChild(on),g.useStyle(g.createStyle()),g.style.fill=null;var x=g.shape;x.x=s,x.y=i,x.width=a,x.height=o,x.r=h,g.dirtyShape()}if(p){var _=g.style;_.fill=l||null,_.fillOpacity=Ot(n.fillOpacity,1)}else if(f){y=this._getOrCreateChild(Cs),y.onload=function(){m.dirtyStyle()};var k=y.style;k.image=l.image,k.x=s,k.y=i,k.width=a,k.height=o}if(d&&c){var _=g.style;_.lineWidth=d,_.stroke=c,_.strokeOpacity=Ot(n.strokeOpacity,1),_.lineDash=n.borderDash,_.lineDashOffset=n.borderDashOffset||0,g.strokeContainThreshold=0,g.hasFill()&&g.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var w=(g||y).style;w.shadowBlur=n.shadowBlur||0,w.shadowColor=n.shadowColor||"transparent",w.shadowOffsetX=n.shadowOffsetX||0,w.shadowOffsetY=n.shadowOffsetY||0,w.opacity=Dl(n.opacity,r.opacity,1)},e.makeFont=function(n){var r="";return xte(n)&&(r=[n.fontStyle,n.fontWeight,bte(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),r&&Ao(r)||n.textFont||n.font},e}(oo),XVe={left:!0,right:1,center:1},QVe={top:1,bottom:1,middle:1},$j=["fontStyle","fontWeight","fontSize","fontFamily"];function bte(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?BP+"px":t+"px"}function Mj(t,e){for(var n=0;n<$j.length;n++){var r=$j[n],s=e[r];s!=null&&(t[r]=s)}}function xte(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function ZVe(t){return Ej(t),de(t.rich,Ej),t}function Ej(t){if(t){t.font=dn.makeFont(t);var e=t.align;e==="middle"&&(e="center"),t.align=e==null||XVe[e]?e:"left";var n=t.verticalAlign;n==="center"&&(n="middle"),t.verticalAlign=n==null||QVe[n]?n:"top";var r=t.padding;r&&(t.padding=GP(t.padding))}}function Dj(t,e){return t==null||e<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function Rj(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function Pj(t,e,n){return e==="right"?t-n[1]:e==="center"?t+n[3]/2-n[1]/2:t+n[3]}function Ij(t){var e=t.text;return e!=null&&(e+=""),e}function IT(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var Et=ln(),KM=function(t,e,n,r){if(r){var s=Et(r);s.dataIndex=n,s.dataType=e,s.seriesIndex=t,s.ssrType="chart",r.type==="group"&&r.traverse(function(i){var a=Et(i);a.seriesIndex=t,a.dataIndex=n,a.dataType=e,a.ssrType="chart"})}},Oj=1,Lj={},_te=ln(),a6=ln(),o6=0,Ab=1,YC=2,Di=["emphasis","blur","select"],b1=["normal","emphasis","blur","select"],jg=10,JVe=9,Rp="highlight",Pw="downplay",f0="select",Iw="unselect",p0="toggleSelect";function zh(t){return t!=null&&t!=="none"}function KC(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function wte(t){KC(t,"emphasis",YC)}function kte(t){t.hoverState===YC&&KC(t,"normal",o6)}function l6(t){KC(t,"blur",Ab)}function Ste(t){t.hoverState===Ab&&KC(t,"normal",o6)}function eNe(t){t.selected=!0}function tNe(t){t.selected=!1}function Vj(t,e,n){e(t,n)}function vd(t,e,n){Vj(t,e,n),t.isGroup&&t.traverse(function(r){Vj(r,e,n)})}function Tk(t,e){switch(e){case"emphasis":t.hoverState=YC;break;case"normal":t.hoverState=o6;break;case"blur":t.hoverState=Ab;break;case"select":t.selected=!0}}function nNe(t,e,n,r){for(var s=t.style,i={},a=0;a<e.length;a++){var o=e[a],l=s[o];i[o]=l==null?r&&r[o]:l}for(var a=0;a<t.animators.length;a++){var d=t.animators[a];d.__fromStateTransition&&d.__fromStateTransition.indexOf(n)<0&&d.targetName==="style"&&d.saveTo(i,e)}return i}function rNe(t,e,n,r){var s=n&&Xt(n,"select")>=0,i=!1;if(t instanceof en){var a=_te(t),o=s&&a.selectFill||a.normalFill,l=s&&a.selectStroke||a.normalStroke;if(zh(o)||zh(l)){r=r||{};var d=r.style||{};d.fill==="inherit"?(i=!0,r=Ne({},r),d=Ne({},d),d.fill=o):!zh(d.fill)&&zh(o)?(i=!0,r=Ne({},r),d=Ne({},d),d.fill=IM(o)):!zh(d.stroke)&&zh(l)&&(i||(r=Ne({},r),d=Ne({},d)),d.stroke=IM(l)),r.style=d}}if(r&&r.z2==null){i||(r=Ne({},r));var c=t.z2EmphasisLift;r.z2=t.z2+(c!=null?c:jg)}return r}function sNe(t,e,n){if(n&&n.z2==null){n=Ne({},n);var r=t.z2SelectLift;n.z2=t.z2+(r!=null?r:JVe)}return n}function iNe(t,e,n){var r=Xt(t.currentStates,e)>=0,s=t.style.opacity,i=r?null:nNe(t,["opacity"],e,{opacity:1});n=n||{};var a=n.style||{};return a.opacity==null&&(n=Ne({},n),a=Ne({opacity:r?s:i.opacity*.1},a),n.style=a),n}function OT(t,e){var n=this.states[t];if(this.style){if(t==="emphasis")return rNe(this,t,e,n);if(t==="blur")return iNe(this,t,n);if(t==="select")return sNe(this,t,n)}return n}function Jp(t){t.stateProxy=OT;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=OT),n&&(n.stateProxy=OT)}function Nj(t,e){!$te(t,e)&&!t.__highByOuter&&vd(t,wte)}function jj(t,e){!$te(t,e)&&!t.__highByOuter&&vd(t,kte)}function ad(t,e){t.__highByOuter|=1<<(e||0),vd(t,wte)}function od(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&vd(t,kte)}function Cte(t){vd(t,l6)}function u6(t){vd(t,Ste)}function Ate(t){vd(t,eNe)}function Tte(t){vd(t,tNe)}function $te(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function Mte(t){var e=t.getModel(),n=[],r=[];e.eachComponent(function(s,i){var a=a6(i),o=s==="series",l=o?t.getViewOfSeriesModel(i):t.getViewOfComponentModel(i);!o&&r.push(l),a.isBlured&&(l.group.traverse(function(d){Ste(d)}),o&&n.push(i)),a.isBlured=!1}),de(r,function(s){s&&s.toggleBlurSeries&&s.toggleBlurSeries(n,!1,e)})}function XM(t,e,n,r){var s=r.getModel();n=n||"coordinateSystem";function i(d,c){for(var f=0;f<c.length;f++){var p=d.getItemGraphicEl(c[f]);p&&u6(p)}}if(t!=null&&!(!e||e==="none")){var a=s.getSeriesByIndex(t),o=a.coordinateSystem;o&&o.master&&(o=o.master);var l=[];s.eachSeries(function(d){var c=a===d,f=d.coordinateSystem;f&&f.master&&(f=f.master);var p=f&&o?f===o:c;if(!(n==="series"&&!c||n==="coordinateSystem"&&!p||e==="series"&&c)){var h=r.getViewOfSeriesModel(d);if(h.group.traverse(function(y){y.__highByOuter&&c&&e==="self"||l6(y)}),si(e))i(d.getData(),e);else if(wt(e))for(var m=sn(e),g=0;g<m.length;g++)i(d.getData(m[g]),e[m[g]]);l.push(d),a6(d).isBlured=!0}}),s.eachComponent(function(d,c){if(d!=="series"){var f=r.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,s)}})}}function QM(t,e,n){if(!(t==null||e==null)){var r=n.getModel().getComponent(t,e);if(r){a6(r).isBlured=!0;var s=n.getViewOfComponentModel(r);!s||!s.focusBlurEnabled||s.group.traverse(function(i){l6(i)})}}}function aNe(t,e,n){var r=t.seriesIndex,s=t.getData(e.dataType);if(s){var i=Qp(s,e);i=(He(i)?i[0]:i)||0;var a=s.getItemGraphicEl(i);if(!a)for(var o=s.count(),l=0;!a&&l<o;)a=s.getItemGraphicEl(l++);if(a){var d=Et(a);XM(r,d.focus,d.blurScope,n)}else{var c=t.get(["emphasis","focus"]),f=t.get(["emphasis","blurScope"]);c!=null&&XM(r,c,f,n)}}}function d6(t,e,n,r){var s={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||e==null||n==null)return s;var i=r.getModel().getComponent(t,e);if(!i)return s;var a=r.getViewOfComponentModel(i);if(!a||!a.findHighDownDispatchers)return s;for(var o=a.findHighDownDispatchers(n),l,d=0;d<o.length;d++)if(Et(o[d]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function oNe(t,e,n){var r=Et(t),s=d6(r.componentMainType,r.componentIndex,r.componentHighDownName,n),i=s.dispatchers,a=s.focusSelf;i?(a&&QM(r.componentMainType,r.componentIndex,n),de(i,function(o){return Nj(o,e)})):(XM(r.seriesIndex,r.focus,r.blurScope,n),r.focus==="self"&&QM(r.componentMainType,r.componentIndex,n),Nj(t,e))}function lNe(t,e,n){Mte(n);var r=Et(t),s=d6(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;s?de(s,function(i){return jj(i,e)}):jj(t,e)}function uNe(t,e,n){if(JM(e)){var r=e.dataType,s=t.getData(r),i=Qp(s,e);He(i)||(i=[i]),t[e.type===p0?"toggleSelect":e.type===f0?"select":"unselect"](i,r)}}function Fj(t){var e=t.getAllData();de(e,function(n){var r=n.data,s=n.type;r.eachItemGraphicEl(function(i,a){t.isSelected(a,s)?Ate(i):Tte(i)})})}function dNe(t){var e=[];return t.eachSeries(function(n){var r=n.getAllData();de(r,function(s){s.data;var i=s.type,a=n.getSelectedDataIndices();if(a.length>0){var o={dataIndex:a,seriesIndex:n.seriesIndex};i!=null&&(o.dataType=i),e.push(o)}})}),e}function Pp(t,e,n){op(t,!0),vd(t,Jp),ZM(t,e,n)}function cNe(t){op(t,!1)}function kr(t,e,n,r){r?cNe(t):Pp(t,e,n)}function ZM(t,e,n){var r=Et(t);e!=null?(r.focus=e,r.blurScope=n):r.focus&&(r.focus=null)}var Bj=["emphasis","blur","select"],fNe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function js(t,e,n,r){n=n||"itemStyle";for(var s=0;s<Bj.length;s++){var i=Bj[s],a=e.getModel([i,n]),o=t.ensureState(i);o.style=r?r(a):a[fNe[n]]()}}function op(t,e){var n=e===!1,r=t;t.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!n||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function x1(t){return!!(t&&t.__highDownDispatcher)}function pNe(t,e,n){var r=Et(t);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=n}function hNe(t){var e=Lj[t];return e==null&&Oj<=32&&(e=Lj[t]=Oj++),e}function JM(t){var e=t.type;return e===f0||e===Iw||e===p0}function zj(t){var e=t.type;return e===Rp||e===Pw}function mNe(t){var e=_te(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}var Uh=ql.CMD,gNe=[[],[],[]],Uj=Math.sqrt,vNe=Math.atan2;function Ete(t,e){if(e){var n=t.data,r=t.len(),s,i,a,o,l,d,c=Uh.M,f=Uh.C,p=Uh.L,h=Uh.R,m=Uh.A,g=Uh.Q;for(a=0,o=0;a<r;){switch(s=n[a++],o=a,i=0,s){case c:i=1;break;case p:i=1;break;case f:i=3;break;case g:i=2;break;case m:var y=e[4],x=e[5],_=Uj(e[0]*e[0]+e[1]*e[1]),k=Uj(e[2]*e[2]+e[3]*e[3]),w=vNe(-e[1]/k,e[0]/_);n[a]*=_,n[a++]+=y,n[a]*=k,n[a++]+=x,n[a++]*=_,n[a++]*=k,n[a++]+=w,n[a++]+=w,a+=2,o=a;break;case h:d[0]=n[a++],d[1]=n[a++],Ls(d,d,e),n[o++]=d[0],n[o++]=d[1],d[0]+=n[a++],d[1]+=n[a++],Ls(d,d,e),n[o++]=d[0],n[o++]=d[1]}for(l=0;l<i;l++){var S=gNe[l];S[0]=n[a++],S[1]=n[a++],Ls(S,S,e),n[o++]=S[0],n[o++]=S[1]}}t.increaseVersion()}}var LT=Math.sqrt,Qx=Math.sin,Zx=Math.cos,Dv=Math.PI;function Hj(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function eE(t,e){return(t[0]*e[0]+t[1]*e[1])/(Hj(t)*Hj(e))}function qj(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(eE(t,e))}function Wj(t,e,n,r,s,i,a,o,l,d,c){var f=l*(Dv/180),p=Zx(f)*(t-n)/2+Qx(f)*(e-r)/2,h=-1*Qx(f)*(t-n)/2+Zx(f)*(e-r)/2,m=p*p/(a*a)+h*h/(o*o);m>1&&(a*=LT(m),o*=LT(m));var g=(s===i?-1:1)*LT((a*a*(o*o)-a*a*(h*h)-o*o*(p*p))/(a*a*(h*h)+o*o*(p*p)))||0,y=g*a*h/o,x=g*-o*p/a,_=(t+n)/2+Zx(f)*y-Qx(f)*x,k=(e+r)/2+Qx(f)*y+Zx(f)*x,w=qj([1,0],[(p-y)/a,(h-x)/o]),S=[(p-y)/a,(h-x)/o],C=[(-1*p-y)/a,(-1*h-x)/o],A=qj(S,C);if(eE(S,C)<=-1&&(A=Dv),eE(S,C)>=1&&(A=0),A<0){var M=Math.round(A/Dv*1e6)/1e6;A=Dv*2+M%2*Dv}c.addData(d,_,k,a,o,w,A,f,i)}var yNe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,bNe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function xNe(t){var e=new ql;if(!t)return e;var n=0,r=0,s=n,i=r,a,o=ql.CMD,l=t.match(yNe);if(!l)return e;for(var d=0;d<l.length;d++){for(var c=l[d],f=c.charAt(0),p=void 0,h=c.match(bNe)||[],m=h.length,g=0;g<m;g++)h[g]=parseFloat(h[g]);for(var y=0;y<m;){var x=void 0,_=void 0,k=void 0,w=void 0,S=void 0,C=void 0,A=void 0,M=n,E=r,P=void 0,I=void 0;switch(f){case"l":n+=h[y++],r+=h[y++],p=o.L,e.addData(p,n,r);break;case"L":n=h[y++],r=h[y++],p=o.L,e.addData(p,n,r);break;case"m":n+=h[y++],r+=h[y++],p=o.M,e.addData(p,n,r),s=n,i=r,f="l";break;case"M":n=h[y++],r=h[y++],p=o.M,e.addData(p,n,r),s=n,i=r,f="L";break;case"h":n+=h[y++],p=o.L,e.addData(p,n,r);break;case"H":n=h[y++],p=o.L,e.addData(p,n,r);break;case"v":r+=h[y++],p=o.L,e.addData(p,n,r);break;case"V":r=h[y++],p=o.L,e.addData(p,n,r);break;case"C":p=o.C,e.addData(p,h[y++],h[y++],h[y++],h[y++],h[y++],h[y++]),n=h[y-2],r=h[y-1];break;case"c":p=o.C,e.addData(p,h[y++]+n,h[y++]+r,h[y++]+n,h[y++]+r,h[y++]+n,h[y++]+r),n+=h[y-2],r+=h[y-1];break;case"S":x=n,_=r,P=e.len(),I=e.data,a===o.C&&(x+=n-I[P-4],_+=r-I[P-3]),p=o.C,M=h[y++],E=h[y++],n=h[y++],r=h[y++],e.addData(p,x,_,M,E,n,r);break;case"s":x=n,_=r,P=e.len(),I=e.data,a===o.C&&(x+=n-I[P-4],_+=r-I[P-3]),p=o.C,M=n+h[y++],E=r+h[y++],n+=h[y++],r+=h[y++],e.addData(p,x,_,M,E,n,r);break;case"Q":M=h[y++],E=h[y++],n=h[y++],r=h[y++],p=o.Q,e.addData(p,M,E,n,r);break;case"q":M=h[y++]+n,E=h[y++]+r,n+=h[y++],r+=h[y++],p=o.Q,e.addData(p,M,E,n,r);break;case"T":x=n,_=r,P=e.len(),I=e.data,a===o.Q&&(x+=n-I[P-4],_+=r-I[P-3]),n=h[y++],r=h[y++],p=o.Q,e.addData(p,x,_,n,r);break;case"t":x=n,_=r,P=e.len(),I=e.data,a===o.Q&&(x+=n-I[P-4],_+=r-I[P-3]),n+=h[y++],r+=h[y++],p=o.Q,e.addData(p,x,_,n,r);break;case"A":k=h[y++],w=h[y++],S=h[y++],C=h[y++],A=h[y++],M=n,E=r,n=h[y++],r=h[y++],p=o.A,Wj(M,E,n,r,C,A,k,w,S,p,e);break;case"a":k=h[y++],w=h[y++],S=h[y++],C=h[y++],A=h[y++],M=n,E=r,n+=h[y++],r+=h[y++],p=o.A,Wj(M,E,n,r,C,A,k,w,S,p,e);break}}(f==="z"||f==="Z")&&(p=o.Z,e.addData(p),n=s,r=i),a=p}return e.toStatic(),e}var Dte=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.applyTransform=function(n){},e}(en);function Rte(t){return t.setData!=null}function Pte(t,e){var n=xNe(t),r=Ne({},e);return r.buildPath=function(s){if(Rte(s)){s.setData(n.data);var i=s.getContext();i&&s.rebuildPath(i,1)}else{var i=s;n.rebuildPath(i,1)}},r.applyTransform=function(s){Ete(n,s),this.dirtyShape()},r}function Ite(t,e){return new Dte(Pte(t,e))}function _Ne(t,e){var n=Pte(t,e),r=function(s){Te(i,s);function i(a){var o=s.call(this,a)||this;return o.applyTransform=n.applyTransform,o.buildPath=n.buildPath,o}return i}(Dte);return r}function wNe(t,e){for(var n=[],r=t.length,s=0;s<r;s++){var i=t[s];n.push(i.getUpdatedPathProxy(!0))}var a=new en(e);return a.createPathProxy(),a.buildPath=function(o){if(Rte(o)){o.appendPath(n);var l=o.getContext();l&&o.rebuildPath(l,1)}},a}function c6(t,e){e=e||{};var n=new en;return t.shape&&n.setShape(t.shape),n.setStyle(t.style),e.bakeTransform?Ete(n.path,t.getComputedTransform()):e.toLocal?n.setLocalTransform(t.getComputedTransform()):n.copyTransform(t),n.buildPath=t.buildPath,n.applyTransform=n.applyTransform,n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n}var kNe=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),yd=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new kNe},e.prototype.buildPath=function(n,r){n.moveTo(r.cx+r.r,r.cy),n.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(en);yd.prototype.type="circle";var SNe=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),XC=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new SNe},e.prototype.buildPath=function(n,r){var s=.5522848,i=r.cx,a=r.cy,o=r.rx,l=r.ry,d=o*s,c=l*s;n.moveTo(i-o,a),n.bezierCurveTo(i-o,a-c,i-d,a-l,i,a-l),n.bezierCurveTo(i+d,a-l,i+o,a-c,i+o,a),n.bezierCurveTo(i+o,a+c,i+d,a+l,i,a+l),n.bezierCurveTo(i-d,a+l,i-o,a+c,i-o,a),n.closePath()},e}(en);XC.prototype.type="ellipse";var Ote=Math.PI,VT=Ote*2,xf=Math.sin,Hh=Math.cos,CNe=Math.acos,Hs=Math.atan2,Gj=Math.abs,h0=Math.sqrt,gy=Math.max,Zo=Math.min,vo=1e-4;function ANe(t,e,n,r,s,i,a,o){var l=n-t,d=r-e,c=a-s,f=o-i,p=f*l-c*d;if(!(p*p<vo))return p=(c*(e-i)-f*(t-s))/p,[t+p*l,e+p*d]}function Jx(t,e,n,r,s,i,a){var o=t-n,l=e-r,d=(a?i:-i)/h0(o*o+l*l),c=d*l,f=-d*o,p=t+c,h=e+f,m=n+c,g=r+f,y=(p+m)/2,x=(h+g)/2,_=m-p,k=g-h,w=_*_+k*k,S=s-i,C=p*g-m*h,A=(k<0?-1:1)*h0(gy(0,S*S*w-C*C)),M=(C*k-_*A)/w,E=(-C*_-k*A)/w,P=(C*k+_*A)/w,I=(-C*_+k*A)/w,F=M-y,L=E-x,z=P-y,N=I-x;return F*F+L*L>z*z+N*N&&(M=P,E=I),{cx:M,cy:E,x0:-c,y0:-f,x1:M*(s/S-1),y1:E*(s/S-1)}}function TNe(t){var e;if(He(t)){var n=t.length;if(!n)return t;n===1?e=[t[0],t[0],0,0]:n===2?e=[t[0],t[0],t[1],t[1]]:n===3?e=t.concat(t[2]):e=t}else e=[t,t,t,t];return e}function $Ne(t,e){var n,r=gy(e.r,0),s=gy(e.r0||0,0),i=r>0,a=s>0;if(!(!i&&!a)){if(i||(r=s,s=0),s>r){var o=r;r=s,s=o}var l=e.startAngle,d=e.endAngle;if(!(isNaN(l)||isNaN(d))){var c=e.cx,f=e.cy,p=!!e.clockwise,h=Gj(d-l),m=h>VT&&h%VT;if(m>vo&&(h=m),!(r>vo))t.moveTo(c,f);else if(h>VT-vo)t.moveTo(c+r*Hh(l),f+r*xf(l)),t.arc(c,f,r,l,d,!p),s>vo&&(t.moveTo(c+s*Hh(d),f+s*xf(d)),t.arc(c,f,s,d,l,p));else{var g=void 0,y=void 0,x=void 0,_=void 0,k=void 0,w=void 0,S=void 0,C=void 0,A=void 0,M=void 0,E=void 0,P=void 0,I=void 0,F=void 0,L=void 0,z=void 0,N=r*Hh(l),q=r*xf(l),V=s*Hh(d),O=s*xf(d),X=h>vo;if(X){var j=e.cornerRadius;j&&(n=TNe(j),g=n[0],y=n[1],x=n[2],_=n[3]);var U=Gj(r-s)/2;if(k=Zo(U,x),w=Zo(U,_),S=Zo(U,g),C=Zo(U,y),E=A=gy(k,w),P=M=gy(S,C),(A>vo||M>vo)&&(I=r*Hh(d),F=r*xf(d),L=s*Hh(l),z=s*xf(l),h<Ote)){var G=ANe(N,q,L,z,I,F,V,O);if(G){var ee=N-G[0],ie=q-G[1],ne=I-G[0],ce=F-G[1],oe=1/xf(CNe((ee*ne+ie*ce)/(h0(ee*ee+ie*ie)*h0(ne*ne+ce*ce)))/2),re=h0(G[0]*G[0]+G[1]*G[1]);E=Zo(A,(r-re)/(oe+1)),P=Zo(M,(s-re)/(oe-1))}}}if(!X)t.moveTo(c+N,f+q);else if(E>vo){var te=Zo(x,E),K=Zo(_,E),le=Jx(L,z,N,q,r,te,p),H=Jx(I,F,V,O,r,K,p);t.moveTo(c+le.cx+le.x0,f+le.cy+le.y0),E<A&&te===K?t.arc(c+le.cx,f+le.cy,E,Hs(le.y0,le.x0),Hs(H.y0,H.x0),!p):(te>0&&t.arc(c+le.cx,f+le.cy,te,Hs(le.y0,le.x0),Hs(le.y1,le.x1),!p),t.arc(c,f,r,Hs(le.cy+le.y1,le.cx+le.x1),Hs(H.cy+H.y1,H.cx+H.x1),!p),K>0&&t.arc(c+H.cx,f+H.cy,K,Hs(H.y1,H.x1),Hs(H.y0,H.x0),!p))}else t.moveTo(c+N,f+q),t.arc(c,f,r,l,d,!p);if(!(s>vo)||!X)t.lineTo(c+V,f+O);else if(P>vo){var te=Zo(g,P),K=Zo(y,P),le=Jx(V,O,I,F,s,-K,p),H=Jx(N,q,L,z,s,-te,p);t.lineTo(c+le.cx+le.x0,f+le.cy+le.y0),P<M&&te===K?t.arc(c+le.cx,f+le.cy,P,Hs(le.y0,le.x0),Hs(H.y0,H.x0),!p):(K>0&&t.arc(c+le.cx,f+le.cy,K,Hs(le.y0,le.x0),Hs(le.y1,le.x1),!p),t.arc(c,f,s,Hs(le.cy+le.y1,le.cx+le.x1),Hs(H.cy+H.y1,H.cx+H.x1),p),te>0&&t.arc(c+H.cx,f+H.cy,te,Hs(H.y1,H.x1),Hs(H.y0,H.x0),!p))}else t.lineTo(c+V,f+O),t.arc(c,f,s,d,l,p)}t.closePath()}}}var MNe=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),Ri=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new MNe},e.prototype.buildPath=function(n,r){$Ne(n,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(en);Ri.prototype.type="sector";var ENe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),Tb=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new ENe},e.prototype.buildPath=function(n,r){var s=r.cx,i=r.cy,a=Math.PI*2;n.moveTo(s+r.r,i),n.arc(s,i,r.r,0,a,!1),n.moveTo(s+r.r0,i),n.arc(s,i,r.r0,0,a,!0)},e}(en);Tb.prototype.type="ring";function DNe(t,e,n,r){var s=[],i=[],a=[],o=[],l,d,c,f;if(r){c=[1/0,1/0],f=[-1/0,-1/0];for(var p=0,h=t.length;p<h;p++)ic(c,c,t[p]),ac(f,f,t[p]);ic(c,c,r[0]),ac(f,f,r[1])}for(var p=0,h=t.length;p<h;p++){var m=t[p];if(n)l=t[p?p-1:h-1],d=t[(p+1)%h];else if(p===0||p===h-1){s.push(Hu(t[p]));continue}else l=t[p-1],d=t[p+1];ip(i,d,l),Aw(i,i,e);var g=CM(m,l),y=CM(m,d),x=g+y;x!==0&&(g/=x,y/=x),Aw(a,i,-g),Aw(o,i,y);var _=F7([],m,a),k=F7([],m,o);r&&(ac(_,_,c),ic(_,_,f),ac(k,k,c),ic(k,k,f)),s.push(_),s.push(k)}return n&&s.push(s.shift()),s}function Lte(t,e,n){var r=e.smooth,s=e.points;if(s&&s.length>=2){if(r){var i=DNe(s,r,n,e.smoothConstraint);t.moveTo(s[0][0],s[0][1]);for(var a=s.length,o=0;o<(n?a:a-1);o++){var l=i[o*2],d=i[o*2+1],c=s[(o+1)%a];t.bezierCurveTo(l[0],l[1],d[0],d[1],c[0],c[1])}}else{t.moveTo(s[0][0],s[0][1]);for(var o=1,f=s.length;o<f;o++)t.lineTo(s[o][0],s[o][1])}n&&t.closePath()}}var RNe=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),Pi=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new RNe},e.prototype.buildPath=function(n,r){Lte(n,r,!0)},e}(en);Pi.prototype.type="polygon";var PNe=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),Ii=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new PNe},e.prototype.buildPath=function(n,r){Lte(n,r,!1)},e}(en);Ii.prototype.type="polyline";var INe={},ONe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),ls=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new ONe},e.prototype.buildPath=function(n,r){var s,i,a,o;if(this.subPixelOptimize){var l=vte(INe,r,this.style);s=l.x1,i=l.y1,a=l.x2,o=l.y2}else s=r.x1,i=r.y1,a=r.x2,o=r.y2;var d=r.percent;d!==0&&(n.moveTo(s,i),d<1&&(a=s*(1-d)+a*d,o=i*(1-d)+o*d),n.lineTo(a,o))},e.prototype.pointAt=function(n){var r=this.shape;return[r.x1*(1-n)+r.x2*n,r.y1*(1-n)+r.y2*n]},e}(en);ls.prototype.type="line";var Vi=[],LNe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function Yj(t,e,n){var r=t.cpx2,s=t.cpy2;return r!=null||s!=null?[(n?Z7:rs)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?Z7:rs)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?EM:gs)(t.x1,t.cpx1,t.x2,e),(n?EM:gs)(t.y1,t.cpy1,t.y2,e)]}var $b=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new LNe},e.prototype.buildPath=function(n,r){var s=r.x1,i=r.y1,a=r.x2,o=r.y2,l=r.cpx1,d=r.cpy1,c=r.cpx2,f=r.cpy2,p=r.percent;p!==0&&(n.moveTo(s,i),c==null||f==null?(p<1&&(h1(s,l,a,p,Vi),l=Vi[1],a=Vi[2],h1(i,d,o,p,Vi),d=Vi[1],o=Vi[2]),n.quadraticCurveTo(l,d,a,o)):(p<1&&(Lc(s,l,c,a,p,Vi),l=Vi[1],c=Vi[2],a=Vi[3],Lc(i,d,f,o,p,Vi),d=Vi[1],f=Vi[2],o=Vi[3]),n.bezierCurveTo(l,d,c,f,a,o)))},e.prototype.pointAt=function(n){return Yj(this.shape,n,!1)},e.prototype.tangentAt=function(n){var r=Yj(this.shape,n,!0);return Lg(r,r)},e}(en);$b.prototype.type="bezier-curve";var VNe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),QC=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new VNe},e.prototype.buildPath=function(n,r){var s=r.cx,i=r.cy,a=Math.max(r.r,0),o=r.startAngle,l=r.endAngle,d=r.clockwise,c=Math.cos(o),f=Math.sin(o);n.moveTo(c*a+s,f*a+i),n.arc(s,i,a,o,l,!d)},e}(en);QC.prototype.type="arc";var f6=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="compound",n}return e.prototype._updatePathDirty=function(){for(var n=this.shape.paths,r=this.shapeChanged(),s=0;s<n.length;s++)r=r||n[s].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],r=this.getGlobalScale(),s=0;s<n.length;s++)n[s].path||n[s].createPathProxy(),n[s].path.setScale(r[0],r[1],n[s].segmentIgnoreThreshold)},e.prototype.buildPath=function(n,r){for(var s=r.paths||[],i=0;i<s.length;i++)s[i].buildPath(n,s[i].shape,!0)},e.prototype.afterBrush=function(){for(var n=this.shape.paths||[],r=0;r<n.length;r++)n[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),en.prototype.getBoundingRect.call(this)},e}(en),Vte=function(){function t(e){this.colorStops=e||[]}return t.prototype.addColorStop=function(e,n){this.colorStops.push({offset:e,color:n})},t}(),Mb=function(t){Te(e,t);function e(n,r,s,i,a,o){var l=t.call(this,a)||this;return l.x=n==null?0:n,l.y=r==null?0:r,l.x2=s==null?1:s,l.y2=i==null?0:i,l.type="linear",l.global=o||!1,l}return e}(Vte),Nte=function(t){Te(e,t);function e(n,r,s,i,a){var o=t.call(this,i)||this;return o.x=n==null?.5:n,o.y=r==null?.5:r,o.r=s==null?.5:s,o.type="radial",o.global=a||!1,o}return e}(Vte),_f=[0,0],wf=[0,0],e_=new qt,t_=new qt,$k=function(){function t(e,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new qt;for(var r=0;r<2;r++)this._axes[r]=new qt;e&&this.fromBoundingRect(e,n)}return t.prototype.fromBoundingRect=function(e,n){var r=this._corners,s=this._axes,i=e.x,a=e.y,o=i+e.width,l=a+e.height;if(r[0].set(i,a),r[1].set(o,a),r[2].set(o,l),r[3].set(i,l),n)for(var d=0;d<4;d++)r[d].transform(n);qt.sub(s[0],r[1],r[0]),qt.sub(s[1],r[3],r[0]),s[0].normalize(),s[1].normalize();for(var d=0;d<2;d++)this._origin[d]=s[d].dot(r[0])},t.prototype.intersect=function(e,n){var r=!0,s=!n;return e_.set(1/0,1/0),t_.set(0,0),!this._intersectCheckOneSide(this,e,e_,t_,s,1)&&(r=!1,s)||!this._intersectCheckOneSide(e,this,e_,t_,s,-1)&&(r=!1,s)||s||qt.copy(n,r?e_:t_),r},t.prototype._intersectCheckOneSide=function(e,n,r,s,i,a){for(var o=!0,l=0;l<2;l++){var d=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,_f),this._getProjMinMaxOnAxis(l,n._corners,wf),_f[1]<wf[0]||_f[0]>wf[1]){if(o=!1,i)return o;var c=Math.abs(wf[0]-_f[1]),f=Math.abs(_f[0]-wf[1]);Math.min(c,f)>s.len()&&(c<f?qt.scale(s,d,-c*a):qt.scale(s,d,f*a))}else if(r){var c=Math.abs(wf[0]-_f[1]),f=Math.abs(_f[0]-wf[1]);Math.min(c,f)<r.len()&&(c<f?qt.scale(r,d,c*a):qt.scale(r,d,-f*a))}}return o},t.prototype._getProjMinMaxOnAxis=function(e,n,r){for(var s=this._axes[e],i=this._origin,a=n[0].dot(s)+i[e],o=a,l=a,d=1;d<n.length;d++){var c=n[d].dot(s)+i[e];o=Math.min(c,o),l=Math.max(c,l)}r[0]=o,r[1]=l},t}(),NNe=[],jNe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(n,r){r?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},e.prototype.addDisplayables=function(n,r){r=r||!1;for(var s=0;s<n.length;s++)this.addDisplayable(n[s],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(n){for(var r=this._cursor;r<this._displayables.length;r++)n&&n(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)n&&n(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var r=this._displayables[n];r.parent=this,r.update(),r.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var r=this._temporaryDisplayables[n];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new Gt(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var s=this._displayables[r],i=s.getBoundingRect().clone();s.needLocalTransform()&&i.applyTransform(s.getLocalTransform(NNe)),n.union(i)}this._rect=n}return this._rect},e.prototype.contain=function(n,r){var s=this.transformCoordToLocal(n,r),i=this.getBoundingRect();if(i.contain(s[0],s[1]))for(var a=0;a<this._displayables.length;a++){var o=this._displayables[a];if(o.contain(n,r))return!0}return!1},e}(oo),jte=ln();function Fg(t,e,n,r,s){var i;if(e&&e.ecModel){var a=e.ecModel.getUpdatePayload();i=a&&a.animation}var o=e&&e.isAnimationEnabled(),l=t==="update";if(o){var d=void 0,c=void 0,f=void 0;r?(d=Ot(r.duration,200),c=Ot(r.easing,"cubicOut"),f=0):(d=e.getShallow(l?"animationDurationUpdate":"animationDuration"),c=e.getShallow(l?"animationEasingUpdate":"animationEasing"),f=e.getShallow(l?"animationDelayUpdate":"animationDelay")),i&&(i.duration!=null&&(d=i.duration),i.easing!=null&&(c=i.easing),i.delay!=null&&(f=i.delay)),bt(f)&&(f=f(n,s)),bt(d)&&(d=d(n));var p={duration:d||0,delay:f,easing:c};return p}else return null}function p6(t,e,n,r,s,i,a){var o=!1,l;bt(s)?(a=i,i=s,s=null):wt(s)&&(i=s.cb,a=s.during,o=s.isFrom,l=s.removeOpt,s=s.dataIndex);var d=t==="leave";d||e.stopAnimation("leave");var c=Fg(t,r,s,d?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,s):null);if(c&&c.duration>0){var f=c.duration,p=c.delay,h=c.easing,m={duration:f,delay:p||0,easing:h,done:i,force:!!i||!!a,setToFinal:!d,scope:t,during:a};o?e.animateFrom(n,m):e.animateTo(n,m)}else e.stopAnimation(),!o&&e.attr(n),a&&a(1),i&&i()}function bn(t,e,n,r,s,i){p6("update",t,e,n,r,s,i)}function ur(t,e,n,r,s,i){p6("enter",t,e,n,r,s,i)}function Bm(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){var n=t.animators[e];if(n.scope==="leave")return!0}return!1}function Vc(t,e,n,r,s,i){Bm(t)||p6("leave",t,e,n,r,s,i)}function Kj(t,e,n,r){t.removeTextContent(),t.removeTextGuideLine(),Vc(t,{style:{opacity:0}},e,n,r)}function _1(t,e,n){function r(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(s){s.isGroup||Kj(s,e,n,r)}):Kj(t,e,n,r)}function Bo(t){jte(t).oldStyle=t.style}function FNe(t){return jte(t).oldStyle}var Mk=Math.max,Ek=Math.min,tE={};function BNe(t){return en.extend(t)}var zNe=_Ne;function UNe(t,e){return zNe(t,e)}function Uo(t,e){tE[t]=e}function h6(t){if(tE.hasOwnProperty(t))return tE[t]}function ZC(t,e,n,r){var s=Ite(t,e);return n&&(r==="center"&&(n=Bte(n,s.getBoundingRect())),zte(s,n)),s}function Fte(t,e,n){var r=new Cs({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(s){if(n==="center"){var i={width:s.width,height:s.height};r.setStyle(Bte(e,i))}}});return r}function Bte(t,e){var n=e.width/e.height,r=t.height*n,s;r<=t.width?s=t.height:(r=t.width,s=r/n);var i=t.x+t.width/2,a=t.y+t.height/2;return{x:i-r/2,y:a-s/2,width:r,height:s}}var qa=wNe;function zte(t,e){if(t.applyTransform){var n=t.getBoundingRect(),r=n.calculateTransform(e);t.applyTransform(r)}}function vg(t,e){return vte(t,t,{lineWidth:e}),t}function HNe(t){return yte(t.shape,t.shape,t.style),t}var Ow=ap;function Ip(t,e){for(var n=FC([]);t&&t!==e;)qu(n,t.getLocalTransform(),n),t=t.parent;return n}function Do(t,e,n){return e&&!si(e)&&(e=Nu.getLocalTransform(e)),n&&(e=Vg([],e)),Ls([],t,e)}function JC(t,e,n){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),s=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),i=[t==="left"?-r:t==="right"?r:0,t==="top"?-s:t==="bottom"?s:0];return i=Do(i,e,n),Math.abs(i[0])>Math.abs(i[1])?i[0]>0?"right":"left":i[1]>0?"bottom":"top"}function Xj(t){return!t.isGroup}function qNe(t){return t.shape!=null}function Eb(t,e,n){if(!t||!e)return;function r(a){var o={};return a.traverse(function(l){Xj(l)&&l.anid&&(o[l.anid]=l)}),o}function s(a){var o={x:a.x,y:a.y,rotation:a.rotation};return qNe(a)&&(o.shape=Ne({},a.shape)),o}var i=r(t);e.traverse(function(a){if(Xj(a)&&a.anid){var o=i[a.anid];if(o){var l=s(a);a.attr(s(o)),bn(a,l,n,Et(a).dataIndex)}}})}function Ute(t,e){return We(t,function(n){var r=n[0];r=Mk(r,e.x),r=Ek(r,e.x+e.width);var s=n[1];return s=Mk(s,e.y),s=Ek(s,e.y+e.height),[r,s]})}function WNe(t,e){var n=Mk(t.x,e.x),r=Ek(t.x+t.width,e.x+e.width),s=Mk(t.y,e.y),i=Ek(t.y+t.height,e.y+e.height);if(r>=n&&i>=s)return{x:n,y:s,width:r-n,height:i-s}}function Db(t,e,n){var r=Ne({rectHover:!0},e),s=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(s.image=t.slice(8),_t(s,n),new Cs(r)):ZC(t.replace("path://",""),r,n,"center")}function vy(t,e,n,r,s){for(var i=0,a=s[s.length-1];i<s.length;i++){var o=s[i];if(Hte(t,e,n,r,o[0],o[1],a[0],a[1]))return!0;a=o}}function Hte(t,e,n,r,s,i,a,o){var l=n-t,d=r-e,c=a-s,f=o-i,p=NT(c,f,l,d);if(GNe(p))return!1;var h=t-s,m=e-i,g=NT(h,m,l,d)/p;if(g<0||g>1)return!1;var y=NT(h,m,c,f)/p;return!(y<0||y>1)}function NT(t,e,n,r){return t*r-n*e}function GNe(t){return t<=1e-6&&t>=-1e-6}function gh(t){var e=t.itemTooltipOption,n=t.componentModel,r=t.itemName,s=ot(e)?{formatter:e}:e,i=n.mainType,a=n.componentIndex,o={componentType:i,name:r,$vars:["name"]};o[i+"Index"]=a;var l=t.formatterParamsExtra;l&&de(sn(l),function(c){pt(o,c)||(o[c]=l[c],o.$vars.push(c))});var d=Et(t.el);d.componentMainType=i,d.componentIndex=a,d.tooltipConfig={name:r,option:_t({content:r,encodeHTMLContent:!0,formatterParams:o},s)}}function Qj(t,e){var n;t.isGroup&&(n=e(t)),n||t.traverse(e)}function Xc(t,e){if(t)if(He(t))for(var n=0;n<t.length;n++)Qj(t[n],e);else Qj(t,e)}Uo("circle",yd);Uo("ellipse",XC);Uo("sector",Ri);Uo("ring",Tb);Uo("polygon",Pi);Uo("polyline",Ii);Uo("rect",on);Uo("line",ls);Uo("bezierCurve",$b);Uo("arc",QC);const vh=Object.freeze(Object.defineProperty({__proto__:null,Arc:QC,BezierCurve:$b,BoundingRect:Gt,Circle:yd,CompoundPath:f6,Ellipse:XC,Group:Tt,Image:Cs,IncrementalDisplayable:jNe,Line:ls,LinearGradient:Mb,OrientedBoundingRect:$k,Path:en,Point:qt,Polygon:Pi,Polyline:Ii,RadialGradient:Nte,Rect:on,Ring:Tb,Sector:Ri,Text:dn,applyTransform:Do,clipPointsByRect:Ute,clipRectByRect:WNe,createIcon:Db,extendPath:UNe,extendShape:BNe,getShapeClass:h6,getTransform:Ip,groupTransition:Eb,initProps:ur,isElementRemoved:Bm,lineLineIntersect:Hte,linePolygonIntersect:vy,makeImage:Fte,makePath:ZC,mergePath:qa,registerShape:Uo,removeElement:Vc,removeElementWithFadeOut:_1,resizePath:zte,setTooltipConfig:gh,subPixelOptimize:Ow,subPixelOptimizeLine:vg,subPixelOptimizeRect:HNe,transformDirection:JC,traverseElements:Xc,updateProps:bn},Symbol.toStringTag,{value:"Module"}));var eA={};function qte(t,e){for(var n=0;n<Di.length;n++){var r=Di[n],s=e[r],i=t.ensureState(r);i.style=i.style||{},i.style.text=s}var a=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(a,!0)}function nE(t,e,n){var r=t.labelFetcher,s=t.labelDataIndex,i=t.labelDimIndex,a=e.normal,o;r&&(o=r.getFormattedLabel(s,"normal",null,i,a&&a.get("formatter"),n!=null?{interpolatedValue:n}:null)),o==null&&(o=bt(t.defaultText)?t.defaultText(s,t,n):t.defaultText);for(var l={normal:o},d=0;d<Di.length;d++){var c=Di[d],f=e[c];l[c]=Ot(r?r.getFormattedLabel(s,c,null,i,f&&f.get("formatter")):null,o)}return l}function Fs(t,e,n,r){n=n||eA;for(var s=t instanceof dn,i=!1,a=0;a<b1.length;a++){var o=e[b1[a]];if(o&&o.getShallow("show")){i=!0;break}}var l=s?t:t.getTextContent();if(i){s||(l||(l=new dn,t.setTextContent(l)),t.stateProxy&&(l.stateProxy=t.stateProxy));var d=nE(n,e),c=e.normal,f=!!c.getShallow("show"),p=Xn(c,r&&r.normal,n,!1,!s);p.text=d.normal,s||t.setTextConfig(Dk(c,n,!1));for(var a=0;a<Di.length;a++){var h=Di[a],o=e[h];if(o){var m=l.ensureState(h),g=!!Ot(o.getShallow("show"),f);if(g!==f&&(m.ignore=!g),m.style=Xn(o,r&&r[h],n,!0,!s),m.style.text=d[h],!s){var y=t.ensureState(h);y.textConfig=Dk(o,n,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(p.x=l.style.x),l.style.y!=null&&(p.y=l.style.y),l.ignore=!f,l.useStyle(p),l.dirty(),n.enableTextSetter&&(Bg(l).setLabelText=function(x){var _=nE(n,e,x);qte(l,_)})}else l&&(l.ignore=!0);t.dirty()}function ps(t,e){e=e||"label";for(var n={normal:t.getModel(e)},r=0;r<Di.length;r++){var s=Di[r];n[s]=t.getModel([s,e])}return n}function Xn(t,e,n,r,s){var i={};return YNe(i,t,n,r,s),e&&Ne(i,e),i}function Dk(t,e,n){e=e||{};var r={},s,i=t.getShallow("rotate"),a=Ot(t.getShallow("distance"),n?null:5),o=t.getShallow("offset");return s=t.getShallow("position")||(n?null:"inside"),s==="outside"&&(s=e.defaultOutsidePosition||"top"),s!=null&&(r.position=s),o!=null&&(r.offset=o),i!=null&&(i*=Math.PI/180,r.rotation=i),a!=null&&(r.distance=a),r.outsideFill=t.get("color")==="inherit"?e.inheritColor||null:"auto",r}function YNe(t,e,n,r,s){n=n||eA;var i=e.ecModel,a=i&&i.option.textStyle,o=KNe(e),l;if(o){l={};for(var d in o)if(o.hasOwnProperty(d)){var c=e.getModel(["rich",d]);t9(l[d]={},c,a,n,r,s,!1,!0)}}l&&(t.rich=l);var f=e.get("overflow");f&&(t.overflow=f);var p=e.get("minMargin");p!=null&&(t.margin=p),t9(t,e,a,n,r,s,!0,!1)}function KNe(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||eA).rich;if(n){e=e||{};for(var r=sn(n),s=0;s<r.length;s++){var i=r[s];e[i]=1}}t=t.parentModel}return e}var Zj=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Jj=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],e9=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function t9(t,e,n,r,s,i,a,o){n=!s&&n||eA;var l=r&&r.inheritColor,d=e.getShallow("color"),c=e.getShallow("textBorderColor"),f=Ot(e.getShallow("opacity"),n.opacity);(d==="inherit"||d==="auto")&&(l?d=l:d=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),i||(d=d||n.color,c=c||n.textBorderColor),d!=null&&(t.fill=d),c!=null&&(t.stroke=c);var p=Ot(e.getShallow("textBorderWidth"),n.textBorderWidth);p!=null&&(t.lineWidth=p);var h=Ot(e.getShallow("textBorderType"),n.textBorderType);h!=null&&(t.lineDash=h);var m=Ot(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);m!=null&&(t.lineDashOffset=m),!s&&f==null&&!o&&(f=r&&r.defaultOpacity),f!=null&&(t.opacity=f),!s&&!i&&t.fill==null&&r.inheritColor&&(t.fill=r.inheritColor);for(var g=0;g<Zj.length;g++){var y=Zj[g],x=Ot(e.getShallow(y),n[y]);x!=null&&(t[y]=x)}for(var g=0;g<Jj.length;g++){var y=Jj[g],x=e.getShallow(y);x!=null&&(t[y]=x)}if(t.verticalAlign==null){var _=e.getShallow("baseline");_!=null&&(t.verticalAlign=_)}if(!a||!r.disableBox){for(var g=0;g<e9.length;g++){var y=e9[g],x=e.getShallow(y);x!=null&&(t[y]=x)}var k=e.getShallow("borderType");k!=null&&(t.borderDash=k),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&l&&(t.backgroundColor=l),(t.borderColor==="auto"||t.borderColor==="inherit")&&l&&(t.borderColor=l)}}function m6(t,e){var n=e&&e.getModel("textStyle");return Ao([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var Bg=ln();function Wte(t,e,n,r){if(t){var s=Bg(t);s.prevValue=s.value,s.value=n;var i=e.normal;s.valueAnimation=i.get("valueAnimation"),s.valueAnimation&&(s.precision=i.get("precision"),s.defaultInterpolatedText=r,s.statesModels=e)}}function Gte(t,e,n,r,s){var i=Bg(t);if(!i.valueAnimation||i.prevValue===i.value)return;var a=i.defaultInterpolatedText,o=Ot(i.interpolatedValue,i.prevValue),l=i.value;function d(c){var f=ute(n,i.precision,o,l,c);i.interpolatedValue=c===1?null:f;var p=nE({labelDataIndex:e,labelFetcher:s,defaultText:a?a(f):f+""},i.statesModels,f);qte(t,p)}t.percent=0,(i.prevValue==null?ur:bn)(t,{percent:1},r,e,null,d)}var XNe=["textStyle","color"],jT=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],FT=new dn,QNe=function(){function t(){}return t.prototype.getTextColor=function(e){var n=this.ecModel;return this.getShallow("color")||(!e&&n?n.get(XNe):null)},t.prototype.getFont=function(){return m6({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(e){for(var n={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<jT.length;r++)n[jT[r]]=this.getShallow(jT[r]);return FT.useStyle(n),FT.update(),FT.getBoundingRect()},t}(),Yte=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],ZNe=Zp(Yte),JNe=function(){function t(){}return t.prototype.getLineStyle=function(e){return ZNe(this,e)},t}(),Kte=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],e7e=Zp(Kte),t7e=function(){function t(){}return t.prototype.getItemStyle=function(e,n){return e7e(this,e,n)},t}(),Tn=function(){function t(e,n,r){this.parentModel=n,this.ecModel=r,this.option=e}return t.prototype.init=function(e,n,r){},t.prototype.mergeOption=function(e,n){Ht(this.option,e,!0)},t.prototype.get=function(e,n){return e==null?this.option:this._doGet(this.parsePath(e),!n&&this.parentModel)},t.prototype.getShallow=function(e,n){var r=this.option,s=r==null?r:r[e];if(s==null&&!n){var i=this.parentModel;i&&(s=i.getShallow(e))}return s},t.prototype.getModel=function(e,n){var r=e!=null,s=r?this.parsePath(e):null,i=r?this._doGet(s):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(s)),new t(i,n,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var e=this.constructor;return new e(kt(this.option))},t.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},t.prototype.resolveParentPath=function(e){return e},t.prototype.isAnimationEnabled=function(){if(!tn.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(e,n){var r=this.option;if(!e)return r;for(var s=0;s<e.length&&!(e[s]&&(r=r&&typeof r=="object"?r[e[s]]:null,r==null));s++);return r==null&&n&&(r=n._doGet(this.resolveParentPath(e),n.parentModel)),r},t}();r6(Tn);dVe(Tn);Gr(Tn,JNe);Gr(Tn,t7e);Gr(Tn,mVe);Gr(Tn,QNe);var n7e=Math.round(Math.random()*10);function zg(t){return[t||"",n7e++].join("_")}function r7e(t){var e={};t.registerSubTypeDefaulter=function(n,r){var s=Sl(n);e[s.main]=r},t.determineSubType=function(n,r){var s=r.type;if(!s){var i=Sl(n).main;t.hasSubTypes(n)&&e[i]&&(s=e[i](r))}return s}}function s7e(t,e){t.topologicalTravel=function(i,a,o,l){if(!i.length)return;var d=n(a),c=d.graph,f=d.noEntryList,p={};for(de(i,function(_){p[_]=!0});f.length;){var h=f.pop(),m=c[h],g=!!p[h];g&&(o.call(l,h,m.originalDeps.slice()),delete p[h]),de(m.successor,g?x:y)}de(p,function(){var _="";throw new Error(_)});function y(_){c[_].entryCount--,c[_].entryCount===0&&f.push(_)}function x(_){p[_]=!0,y(_)}};function n(i){var a={},o=[];return de(i,function(l){var d=r(a,l),c=d.originalDeps=e(l),f=s(c,i);d.entryCount=f.length,d.entryCount===0&&o.push(l),de(f,function(p){Xt(d.predecessor,p)<0&&d.predecessor.push(p);var h=r(a,p);Xt(h.successor,p)<0&&h.successor.push(l)})}),{graph:a,noEntryList:o}}function r(i,a){return i[a]||(i[a]={predecessor:[],successor:[]}),i[a]}function s(i,a){var o=[];return de(i,function(l){Xt(a,l)>=0&&o.push(l)}),o}}function Qc(t,e){return Ht(Ht({},t,!0),e,!0)}const i7e={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},a7e={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var Rk="ZH",g6="EN",zm=g6,Lw={},v6={},Xte=tn.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage||zm).toUpperCase();return t.indexOf(Rk)>-1?Rk:zm}():zm;function Qte(t,e){t=t.toUpperCase(),v6[t]=new Tn(e),Lw[t]=e}function o7e(t){if(ot(t)){var e=Lw[t.toUpperCase()]||{};return t===Rk||t===g6?kt(e):Ht(kt(e),kt(Lw[zm]),!1)}else return Ht(kt(t),kt(Lw[zm]),!1)}function rE(t){return v6[t]}function l7e(){return v6[zm]}Qte(g6,i7e);Qte(Rk,a7e);var y6=1e3,b6=y6*60,m0=b6*60,Wa=m0*24,n9=Wa*365,yy={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},n_="{yyyy}-{MM}-{dd}",r9={year:"{yyyy}",month:"{yyyy}-{MM}",day:n_,hour:n_+" "+yy.hour,minute:n_+" "+yy.minute,second:n_+" "+yy.second,millisecond:yy.none},BT=["year","month","day","hour","minute","second","millisecond"],Zte=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Td(t,e){return t+="","0000".substr(0,e-t.length)+t}function Um(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function u7e(t){return t===Um(t)}function d7e(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function tA(t,e,n,r){var s=Hl(t),i=s[x6(n)](),a=s[Hm(n)]()+1,o=Math.floor((a-1)/3)+1,l=s[nA(n)](),d=s["get"+(n?"UTC":"")+"Day"](),c=s[w1(n)](),f=(c-1)%12+1,p=s[rA(n)](),h=s[sA(n)](),m=s[iA(n)](),g=c>=12?"pm":"am",y=g.toUpperCase(),x=r instanceof Tn?r:rE(r||Xte)||l7e(),_=x.getModel("time"),k=_.get("month"),w=_.get("monthAbbr"),S=_.get("dayOfWeek"),C=_.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,g+"").replace(/{A}/g,y+"").replace(/{yyyy}/g,i+"").replace(/{yy}/g,Td(i%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,k[a-1]).replace(/{MMM}/g,w[a-1]).replace(/{MM}/g,Td(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,Td(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,S[d]).replace(/{ee}/g,C[d]).replace(/{e}/g,d+"").replace(/{HH}/g,Td(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,Td(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,Td(p,2)).replace(/{m}/g,p+"").replace(/{ss}/g,Td(h,2)).replace(/{s}/g,h+"").replace(/{SSS}/g,Td(m,3)).replace(/{S}/g,m+"")}function c7e(t,e,n,r,s){var i=null;if(ot(n))i=n;else if(bt(n))i=n(t.value,e,{level:t.level});else{var a=Ne({},yy);if(t.level>0)for(var o=0;o<BT.length;++o)a[BT[o]]="{primary|"+a[BT[o]]+"}";var l=n?n.inherit===!1?n:_t(n,a):a,d=Jte(t.value,s);if(l[d])i=l[d];else if(l.inherit){for(var c=Zte.indexOf(d),o=c-1;o>=0;--o)if(l[d]){i=l[d];break}i=i||a.none}if(He(i)){var f=t.level==null?0:t.level>=0?t.level:i.length+t.level;f=Math.min(f,i.length-1),i=i[f]}}return tA(new Date(t.value),i,s,r)}function Jte(t,e){var n=Hl(t),r=n[Hm(e)]()+1,s=n[nA(e)](),i=n[w1(e)](),a=n[rA(e)](),o=n[sA(e)](),l=n[iA(e)](),d=l===0,c=d&&o===0,f=c&&a===0,p=f&&i===0,h=p&&s===1,m=h&&r===1;return m?"year":h?"month":p?"day":f?"hour":c?"minute":d?"second":"millisecond"}function s9(t,e,n){var r=hn(t)?Hl(t):t;switch(e=e||Jte(t,n),e){case"year":return r[x6(n)]();case"half-year":return r[Hm(n)]()>=6?1:0;case"quarter":return Math.floor((r[Hm(n)]()+1)/4);case"month":return r[Hm(n)]();case"day":return r[nA(n)]();case"half-day":return r[w1(n)]()/24;case"hour":return r[w1(n)]();case"minute":return r[rA(n)]();case"second":return r[sA(n)]();case"millisecond":return r[iA(n)]()}}function x6(t){return t?"getUTCFullYear":"getFullYear"}function Hm(t){return t?"getUTCMonth":"getMonth"}function nA(t){return t?"getUTCDate":"getDate"}function w1(t){return t?"getUTCHours":"getHours"}function rA(t){return t?"getUTCMinutes":"getMinutes"}function sA(t){return t?"getUTCSeconds":"getSeconds"}function iA(t){return t?"getUTCMilliseconds":"getMilliseconds"}function f7e(t){return t?"setUTCFullYear":"setFullYear"}function ene(t){return t?"setUTCMonth":"setMonth"}function tne(t){return t?"setUTCDate":"setDate"}function nne(t){return t?"setUTCHours":"setHours"}function rne(t){return t?"setUTCMinutes":"setMinutes"}function sne(t){return t?"setUTCSeconds":"setSeconds"}function ine(t){return t?"setUTCMilliseconds":"setMilliseconds"}function ane(t){if(!nte(t))return ot(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function one(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var Ug=GP;function sE(t,e,n){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function s(c){return c&&Ao(c)?c:"-"}function i(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=e==="time",o=t instanceof Date;if(a||o){var l=a?Hl(t):t;if(isNaN(+l)){if(o)return"-"}else return tA(l,r,n)}if(e==="ordinal")return wM(t)?s(t):hn(t)&&i(t)?t+"":"-";var d=id(t);return i(d)?ane(d):wM(t)?s(t):typeof t=="boolean"?t+"":"-"}var i9=["a","b","c","d","e","f","g"],zT=function(t,e){return"{"+t+(e==null?"":e)+"}"};function lne(t,e,n){He(e)||(e=[e]);var r=e.length;if(!r)return"";for(var s=e[0].$vars||[],i=0;i<s.length;i++){var a=i9[i];t=t.replace(zT(a),zT(a,0))}for(var o=0;o<r;o++)for(var l=0;l<s.length;l++){var d=e[o][s[l]];t=t.replace(zT(i9[l],o),n?bi(d):d)}return t}function p7e(t,e,n){return de(e,function(r,s){t=t.replace("{"+s+"}",r)}),t}function h7e(t,e){var n=ot(t)?{color:t,extraCssText:e}:t||{},r=n.color,s=n.type;e=n.extraCssText;var i=n.renderMode||"html";if(!r)return"";if(i==="html")return s==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+bi(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+bi(r)+";"+(e||"")+'"></span>';var a=n.markerId||"markerX";return{renderMode:i,content:"{"+a+"|}  ",style:s==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function eh(t,e){return e=e||"transparent",ot(t)?t:wt(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function Pk(t,e){if(e==="_blank"||e==="blank"){var n=window.open();n.opener=null,n.location.href=t}else window.open(t,e)}var Vw=de,une=["left","right","top","bottom","width","height"],lp=[["width","left","right"],["height","top","bottom"]];function _6(t,e,n,r,s){var i=0,a=0;r==null&&(r=1/0),s==null&&(s=1/0);var o=0;e.eachChild(function(l,d){var c=l.getBoundingRect(),f=e.childAt(d+1),p=f&&f.getBoundingRect(),h,m;if(t==="horizontal"){var g=c.width+(p?-p.x+c.x:0);h=i+g,h>r||l.newline?(i=0,h=g,a+=o+n,o=c.height):o=Math.max(o,c.height)}else{var y=c.height+(p?-p.y+c.y:0);m=a+y,m>s||l.newline?(i+=o+n,a=0,m=y,o=c.width):o=Math.max(o,c.width)}l.newline||(l.x=i,l.y=a,l.markRedraw(),t==="horizontal"?i=h+n:a=m+n)})}var Op=_6;Nt(_6,"vertical");Nt(_6,"horizontal");function m7e(t,e,n){var r=e.width,s=e.height,i=tt(t.left,r),a=tt(t.top,s),o=tt(t.right,r),l=tt(t.bottom,s);return(isNaN(i)||isNaN(parseFloat(t.left)))&&(i=0),(isNaN(o)||isNaN(parseFloat(t.right)))&&(o=r),(isNaN(a)||isNaN(parseFloat(t.top)))&&(a=0),(isNaN(l)||isNaN(parseFloat(t.bottom)))&&(l=s),n=Ug(n||0),{width:Math.max(o-i-n[1]-n[3],0),height:Math.max(l-a-n[0]-n[2],0)}}function ts(t,e,n){n=Ug(n||0);var r=e.width,s=e.height,i=tt(t.left,r),a=tt(t.top,s),o=tt(t.right,r),l=tt(t.bottom,s),d=tt(t.width,r),c=tt(t.height,s),f=n[2]+n[0],p=n[1]+n[3],h=t.aspect;switch(isNaN(d)&&(d=r-o-p-i),isNaN(c)&&(c=s-l-f-a),h!=null&&(isNaN(d)&&isNaN(c)&&(h>r/s?d=r*.8:c=s*.8),isNaN(d)&&(d=h*c),isNaN(c)&&(c=d/h)),isNaN(i)&&(i=r-o-d-p),isNaN(a)&&(a=s-l-c-f),t.left||t.right){case"center":i=r/2-d/2-n[3];break;case"right":i=r-d-p;break}switch(t.top||t.bottom){case"middle":case"center":a=s/2-c/2-n[0];break;case"bottom":a=s-c-f;break}i=i||0,a=a||0,isNaN(d)&&(d=r-p-i-(o||0)),isNaN(c)&&(c=s-f-a-(l||0));var m=new Gt(i+n[3],a+n[0],d,c);return m.margin=n,m}function aA(t,e,n,r,s,i){var a=!s||!s.hv||s.hv[0],o=!s||!s.hv||s.hv[1],l=s&&s.boundingMode||"all";if(i=i||t,i.x=t.x,i.y=t.y,!a&&!o)return!1;var d;if(l==="raw")d=t.type==="group"?new Gt(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(d=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();d=d.clone(),d.applyTransform(c)}var f=ts(_t({width:d.width,height:d.height},e),n,r),p=a?f.x-d.x:0,h=o?f.y-d.y:0;return l==="raw"?(i.x=p,i.y=h):(i.x+=p,i.y+=h),i===t&&t.markRedraw(),!0}function g7e(t,e){return t[lp[e][0]]!=null||t[lp[e][1]]!=null&&t[lp[e][2]]!=null}function k1(t){var e=t.layoutMode||t.constructor.layoutMode;return wt(e)?e:e?{type:e}:null}function Nc(t,e,n){var r=n&&n.ignoreSize;!He(r)&&(r=[r,r]);var s=a(lp[0],0),i=a(lp[1],1);d(lp[0],t,s),d(lp[1],t,i);function a(c,f){var p={},h=0,m={},g=0,y=2;if(Vw(c,function(k){m[k]=t[k]}),Vw(c,function(k){o(e,k)&&(p[k]=m[k]=e[k]),l(p,k)&&h++,l(m,k)&&g++}),r[f])return l(e,c[1])?m[c[2]]=null:l(e,c[2])&&(m[c[1]]=null),m;if(g===y||!h)return m;if(h>=y)return p;for(var x=0;x<c.length;x++){var _=c[x];if(!o(p,_)&&o(t,_)){p[_]=t[_];break}}return p}function o(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function d(c,f,p){Vw(c,function(h){f[h]=p[h]})}}function Hg(t){return dne({},t)}function dne(t,e){return e&&t&&Vw(une,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var v7e=ln(),nn=function(t){Te(e,t);function e(n,r,s){var i=t.call(this,n,r,s)||this;return i.uid=zg("ec_cpt_model"),i}return e.prototype.init=function(n,r,s){this.mergeDefaultAndTheme(n,s)},e.prototype.mergeDefaultAndTheme=function(n,r){var s=k1(this),i=s?Hg(n):{},a=r.getTheme();Ht(n,a.get(this.mainType)),Ht(n,this.getDefaultOption()),s&&Nc(n,i,s)},e.prototype.mergeOption=function(n,r){Ht(this.option,n,!0);var s=k1(this);s&&Nc(this.option,n,s)},e.prototype.optionUpdated=function(n,r){},e.prototype.getDefaultOption=function(){var n=this.constructor;if(!oVe(n))return n.defaultOption;var r=v7e(this);if(!r.defaultOption){for(var s=[],i=n;i;){var a=i.prototype.defaultOption;a&&s.push(a),i=i.superClass}for(var o={},l=s.length-1;l>=0;l--)o=Ht(o,s[l],!0);r.defaultOption=o}return r.defaultOption},e.prototype.getReferringComponents=function(n,r){var s=n+"Index",i=n+"Id";return Cb(this.ecModel,n,{index:this.get(s,!0),id:this.get(i,!0)},r)},e.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(n){this.option.zlevel=n},e.protoInitialize=function(){var n=e.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),e}(Tn);cte(nn,Tn);HC(nn);r7e(nn);s7e(nn,y7e);function y7e(t){var e=[];return de(nn.getClassesByMainType(t),function(n){e=e.concat(n.dependencies||n.prototype.dependencies||[])}),e=We(e,function(n){return Sl(n).main}),t!=="dataset"&&Xt(e,"dataset")<=0&&e.unshift("dataset"),e}var cne="";typeof navigator!="undefined"&&(cne=navigator.platform||"");var qh="rgba(0, 0, 0, 0.2)";const b7e={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:qh,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:qh,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:qh,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:qh,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:qh,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:qh,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:cne.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var fne=mt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),fo="original",ii="arrayRows",po="objectRows",Zl="keyedColumns",kc="typedArray",pne="unknown",Rl="column",qg="row",Es={Must:1,Might:2,Not:3},hne=ln();function x7e(t){hne(t).datasetMap=mt()}function mne(t,e,n){var r={},s=k6(e);if(!s||!t)return r;var i=[],a=[],o=e.ecModel,l=hne(o).datasetMap,d=s.uid+"_"+n.seriesLayoutBy,c,f;t=t.slice(),de(t,function(g,y){var x=wt(g)?g:t[y]={name:g};x.type==="ordinal"&&c==null&&(c=y,f=m(x)),r[x.name]=[]});var p=l.get(d)||l.set(d,{categoryWayDim:f,valueWayDim:0});de(t,function(g,y){var x=g.name,_=m(g);if(c==null){var k=p.valueWayDim;h(r[x],k,_),h(a,k,_),p.valueWayDim+=_}else if(c===y)h(r[x],0,_),h(i,0,_);else{var k=p.categoryWayDim;h(r[x],k,_),h(a,k,_),p.categoryWayDim+=_}});function h(g,y,x){for(var _=0;_<x;_++)g.push(y+_)}function m(g){var y=g.dimsDef;return y?y.length:1}return i.length&&(r.itemName=i),a.length&&(r.seriesName=a),r}function w6(t,e,n){var r={},s=k6(t);if(!s)return r;var i=e.sourceFormat,a=e.dimensionsDefine,o;(i===po||i===Zl)&&de(a,function(c,f){(wt(c)?c.name:c)==="name"&&(o=f)});var l=function(){for(var c={},f={},p=[],h=0,m=Math.min(5,n);h<m;h++){var g=vne(e.data,i,e.seriesLayoutBy,a,e.startIndex,h);p.push(g);var y=g===Es.Not;if(y&&c.v==null&&h!==o&&(c.v=h),(c.n==null||c.n===c.v||!y&&p[c.n]===Es.Not)&&(c.n=h),x(c)&&p[c.n]!==Es.Not)return c;y||(g===Es.Might&&f.v==null&&h!==o&&(f.v=h),(f.n==null||f.n===f.v)&&(f.n=h))}function x(_){return _.v!=null&&_.n!=null}return x(c)?c:x(f)?f:null}();if(l){r.value=[l.v];var d=o!=null?o:l.n;r.itemName=[d],r.seriesName=[d]}return r}function k6(t){var e=t.get("data",!0);if(!e)return Cb(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},Br).models[0]}function _7e(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:Cb(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},Br).models}function gne(t,e){return vne(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function vne(t,e,n,r,s,i){var a,o=5;if(ea(t))return Es.Not;var l,d;if(r){var c=r[i];wt(c)?(l=c.name,d=c.type):ot(c)&&(l=c)}if(d!=null)return d==="ordinal"?Es.Must:Es.Not;if(e===ii){var f=t;if(n===qg){for(var p=f[i],h=0;h<(p||[]).length&&h<o;h++)if((a=w(p[s+h]))!=null)return a}else for(var h=0;h<f.length&&h<o;h++){var m=f[s+h];if(m&&(a=w(m[i]))!=null)return a}}else if(e===po){var g=t;if(!l)return Es.Not;for(var h=0;h<g.length&&h<o;h++){var y=g[h];if(y&&(a=w(y[l]))!=null)return a}}else if(e===Zl){var x=t;if(!l)return Es.Not;var p=x[l];if(!p||ea(p))return Es.Not;for(var h=0;h<p.length&&h<o;h++)if((a=w(p[h]))!=null)return a}else if(e===fo)for(var _=t,h=0;h<_.length&&h<o;h++){var y=_[h],k=Ng(y);if(!He(k))return Es.Not;if((a=w(k[i]))!=null)return a}function w(S){var C=ot(S);if(S!=null&&Number.isFinite(Number(S))&&S!=="")return C?Es.Might:Es.Not;if(C&&S!=="-")return Es.Must}return Es.Not}var iE=mt();function w7e(t,e){Ei(iE.get(t)==null&&e),iE.set(t,e)}function k7e(t,e,n){var r=iE.get(e);if(!r)return n;var s=r(t);return s?n.concat(s):n}var a9=ln(),S7e=ln(),S6=function(){function t(){}return t.prototype.getColorFromPalette=function(e,n,r){var s=In(this.get("color",!0)),i=this.get("colorLayer",!0);return yne(this,a9,s,i,e,n,r)},t.prototype.clearColorPalette=function(){A7e(this,a9)},t}();function aE(t,e,n,r){var s=In(t.get(["aria","decal","decals"]));return yne(t,S7e,s,null,e,n,r)}function C7e(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].length>e)return t[r];return t[n-1]}function yne(t,e,n,r,s,i,a){i=i||t;var o=e(i),l=o.paletteIdx||0,d=o.paletteNameMap=o.paletteNameMap||{};if(d.hasOwnProperty(s))return d[s];var c=a==null||!r?n:C7e(r,a);if(c=c||n,!(!c||!c.length)){var f=c[l];return s&&(d[s]=f),o.paletteIdx=(l+1)%c.length,f}}function A7e(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}var r_,Rv,o9,l9="\0_ec_inner",T7e=1,C6=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n,r,s,i,a,o){i=i||{},this.option=null,this._theme=new Tn(i),this._locale=new Tn(a),this._optionManager=o},e.prototype.setOption=function(n,r,s){var i=c9(r);this._optionManager.setOption(n,s,i),this._resetOption(null,i)},e.prototype.resetOption=function(n,r){return this._resetOption(n,c9(r))},e.prototype._resetOption=function(n,r){var s=!1,i=this._optionManager;if(!n||n==="recreate"){var a=i.mountOption(n==="recreate");!this.option||n==="recreate"?o9(this,a):(this.restoreData(),this._mergeOption(a,r)),s=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var o=i.getTimelineOption(this);o&&(s=!0,this._mergeOption(o,r))}if(!n||n==="recreate"||n==="media"){var l=i.getMediaOption(this);l.length&&de(l,function(d){s=!0,this._mergeOption(d,r)},this)}return s},e.prototype.mergeOption=function(n){this._mergeOption(n,null)},e.prototype._mergeOption=function(n,r){var s=this.option,i=this._componentsMap,a=this._componentsCount,o=[],l=mt(),d=r&&r.replaceMergeMainTypeMap;x7e(this),de(n,function(f,p){f!=null&&(nn.hasClass(p)?p&&(o.push(p),l.set(p,!0)):s[p]=s[p]==null?kt(f):Ht(s[p],f,!0))}),d&&d.each(function(f,p){nn.hasClass(p)&&!l.get(p)&&(o.push(p),l.set(p,!0))}),nn.topologicalTravel(o,nn.getAllClassMainTypes(),c,this);function c(f){var p=k7e(this,f,In(n[f])),h=i.get(f),m=h?d&&d.get(f)?"replaceMerge":"normalMerge":"replaceAll",g=ote(h,p,m);Z8e(g,f,nn),s[f]=null,i.set(f,null),a.set(f,0);var y=[],x=[],_=0,k;de(g,function(w,S){var C=w.existing,A=w.newOption;if(!A)C&&(C.mergeOption({},this),C.optionUpdated({},!1));else{var M=f==="series",E=nn.getClass(f,w.keyInfo.subType,!M);if(!E)return;if(f==="tooltip"){if(k)return;k=!0}if(C&&C.constructor===E)C.name=w.keyInfo.name,C.mergeOption(A,this),C.optionUpdated(A,!1);else{var P=Ne({componentIndex:S},w.keyInfo);C=new E(A,this,this,P),Ne(C,P),w.brandNew&&(C.__requireNewView=!0),C.init(A,this,this),C.optionUpdated(null,!0)}}C?(y.push(C.option),x.push(C),_++):(y.push(void 0),x.push(void 0))},this),s[f]=y,i.set(f,x),a.set(f,_),f==="series"&&r_(this)}this._seriesIndices||r_(this)},e.prototype.getOption=function(){var n=kt(this.option);return de(n,function(r,s){if(nn.hasClass(s)){for(var i=In(r),a=i.length,o=!1,l=a-1;l>=0;l--)i[l]&&!y1(i[l])?o=!0:(i[l]=null,!o&&a--);i.length=a,n[s]=i}}),delete n[l9],n},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(n){this._payload=n},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(n,r){var s=this._componentsMap.get(n);if(s){var i=s[r||0];if(i)return i;if(r==null){for(var a=0;a<s.length;a++)if(s[a])return s[a]}}},e.prototype.queryComponents=function(n){var r=n.mainType;if(!r)return[];var s=n.index,i=n.id,a=n.name,o=this._componentsMap.get(r);if(!o||!o.length)return[];var l;return s!=null?(l=[],de(In(s),function(d){o[d]&&l.push(o[d])})):i!=null?l=u9("id",i,o):a!=null?l=u9("name",a,o):l=Sn(o,function(d){return!!d}),d9(l,n)},e.prototype.findComponents=function(n){var r=n.query,s=n.mainType,i=o(r),a=i?this.queryComponents(i):Sn(this._componentsMap.get(s),function(d){return!!d});return l(d9(a,n));function o(d){var c=s+"Index",f=s+"Id",p=s+"Name";return d&&(d[c]!=null||d[f]!=null||d[p]!=null)?{mainType:s,index:d[c],id:d[f],name:d[p]}:null}function l(d){return n.filter?Sn(d,n.filter):d}},e.prototype.eachComponent=function(n,r,s){var i=this._componentsMap;if(bt(n)){var a=r,o=n;i.each(function(f,p){for(var h=0;f&&h<f.length;h++){var m=f[h];m&&o.call(a,p,m,m.componentIndex)}})}else for(var l=ot(n)?i.get(n):wt(n)?this.findComponents(n):null,d=0;l&&d<l.length;d++){var c=l[d];c&&r.call(s,c,c.componentIndex)}},e.prototype.getSeriesByName=function(n){var r=Qr(n,null);return Sn(this._componentsMap.get("series"),function(s){return!!s&&r!=null&&s.name===r})},e.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},e.prototype.getSeriesByType=function(n){return Sn(this._componentsMap.get("series"),function(r){return!!r&&r.subType===n})},e.prototype.getSeries=function(){return Sn(this._componentsMap.get("series"),function(n){return!!n})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(n,r){Rv(this),de(this._seriesIndices,function(s){var i=this._componentsMap.get("series")[s];n.call(r,i,s)},this)},e.prototype.eachRawSeries=function(n,r){de(this._componentsMap.get("series"),function(s){s&&n.call(r,s,s.componentIndex)})},e.prototype.eachSeriesByType=function(n,r,s){Rv(this),de(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];a.subType===n&&r.call(s,a,i)},this)},e.prototype.eachRawSeriesByType=function(n,r,s){return de(this.getSeriesByType(n),r,s)},e.prototype.isSeriesFiltered=function(n){return Rv(this),this._seriesIndicesMap.get(n.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(n,r){Rv(this);var s=[];de(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];n.call(r,a,i)&&s.push(i)},this),this._seriesIndices=s,this._seriesIndicesMap=mt(s)},e.prototype.restoreData=function(n){r_(this);var r=this._componentsMap,s=[];r.each(function(i,a){nn.hasClass(a)&&s.push(a)}),nn.topologicalTravel(s,nn.getAllClassMainTypes(),function(i){de(r.get(i),function(a){a&&(i!=="series"||!$7e(a,n))&&a.restoreData()})})},e.internalField=function(){r_=function(n){var r=n._seriesIndices=[];de(n._componentsMap.get("series"),function(s){s&&r.push(s.componentIndex)}),n._seriesIndicesMap=mt(r)},Rv=function(n){},o9=function(n,r){n.option={},n.option[l9]=T7e,n._componentsMap=mt({series:[]}),n._componentsCount=mt();var s=r.aria;wt(s)&&s.enabled==null&&(s.enabled=!0),M7e(r,n._theme.option),Ht(r,b7e,!1),n._mergeOption(r,null)}}(),e}(Tn);function $7e(t,e){if(e){var n=e.seriesIndex,r=e.seriesId,s=e.seriesName;return n!=null&&t.componentIndex!==n||r!=null&&t.id!==r||s!=null&&t.name!==s}}function M7e(t,e){var n=t.color&&!t.colorLayer;de(e,function(r,s){s==="colorLayer"&&n||nn.hasClass(s)||(typeof r=="object"?t[s]=t[s]?Ht(t[s],r,!1):kt(r):t[s]==null&&(t[s]=r))})}function u9(t,e,n){if(He(e)){var r=mt();return de(e,function(i){if(i!=null){var a=Qr(i,null);a!=null&&r.set(i,!0)}}),Sn(n,function(i){return i&&r.get(i[t])})}else{var s=Qr(e,null);return Sn(n,function(i){return i&&s!=null&&i[t]===s})}}function d9(t,e){return e.hasOwnProperty("subType")?Sn(t,function(n){return n&&n.subType===e.subType}):t}function c9(t){var e=mt();return t&&de(In(t.replaceMerge),function(n){e.set(n,!0)}),{replaceMergeMainTypeMap:e}}Gr(C6,S6);var E7e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],bne=function(){function t(e){de(E7e,function(n){this[n]=ct(e[n],e)},this)}return t}(),UT={},Rb=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(e,n){var r=[];de(UT,function(s,i){var a=s.create(e,n);r=r.concat(a||[])}),this._coordinateSystems=r},t.prototype.update=function(e,n){de(this._coordinateSystems,function(r){r.update&&r.update(e,n)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(e,n){UT[e]=n},t.get=function(e){return UT[e]},t}(),D7e=/^(min|max)?(.+)$/,R7e=function(){function t(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return t.prototype.setOption=function(e,n,r){e&&(de(In(e.series),function(a){a&&a.data&&ea(a.data)&&vk(a.data)}),de(In(e.dataset),function(a){a&&a.source&&ea(a.source)&&vk(a.source)})),e=kt(e);var s=this._optionBackup,i=P7e(e,n,!s);this._newBaseOption=i.baseOption,s?(i.timelineOptions.length&&(s.timelineOptions=i.timelineOptions),i.mediaList.length&&(s.mediaList=i.mediaList),i.mediaDefault&&(s.mediaDefault=i.mediaDefault)):this._optionBackup=i},t.prototype.mountOption=function(e){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],kt(e?n.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(e){var n,r=this._timelineOptions;if(r.length){var s=e.getComponent("timeline");s&&(n=kt(r[s.getCurrentIndex()]))}return n},t.prototype.getMediaOption=function(e){var n=this._api.getWidth(),r=this._api.getHeight(),s=this._mediaList,i=this._mediaDefault,a=[],o=[];if(!s.length&&!i)return o;for(var l=0,d=s.length;l<d;l++)I7e(s[l].query,n,r)&&a.push(l);return!a.length&&i&&(a=[-1]),a.length&&!L7e(a,this._currentMediaIndices)&&(o=We(a,function(c){return kt(c===-1?i.option:s[c].option)})),this._currentMediaIndices=a,o},t}();function P7e(t,e,n){var r=[],s,i,a=t.baseOption,o=t.timeline,l=t.options,d=t.media,c=!!t.media,f=!!(l||o||a&&a.timeline);a?(i=a,i.timeline||(i.timeline=o)):((f||c)&&(t.options=t.media=null),i=t),c&&He(d)&&de(d,function(h){h&&h.option&&(h.query?r.push(h):s||(s=h))}),p(i),de(l,function(h){return p(h)}),de(r,function(h){return p(h.option)});function p(h){de(e,function(m){m(h,n)})}return{baseOption:i,timelineOptions:l||[],mediaDefault:s,mediaList:r}}function I7e(t,e,n){var r={width:e,height:n,aspectratio:e/n},s=!0;return de(t,function(i,a){var o=a.match(D7e);if(!(!o||!o[1]||!o[2])){var l=o[1],d=o[2].toLowerCase();O7e(r[d],i,l)||(s=!1)}}),s}function O7e(t,e,n){return n==="min"?t>=e:n==="max"?t<=e:t===e}function L7e(t,e){return t.join(",")===e.join(",")}var mo=de,S1=wt,f9=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function HT(t){var e=t&&t.itemStyle;if(e)for(var n=0,r=f9.length;n<r;n++){var s=f9[n],i=e.normal,a=e.emphasis;i&&i[s]&&(t[s]=t[s]||{},t[s].normal?Ht(t[s].normal,i[s]):t[s].normal=i[s],i[s]=null),a&&a[s]&&(t[s]=t[s]||{},t[s].emphasis?Ht(t[s].emphasis,a[s]):t[s].emphasis=a[s],a[s]=null)}}function Qs(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,s=t[e].emphasis;r&&(n?(t[e].normal=t[e].emphasis=null,_t(t[e],r)):t[e]=r),s&&(t.emphasis=t.emphasis||{},t.emphasis[e]=s,s.focus&&(t.emphasis.focus=s.focus),s.blurScope&&(t.emphasis.blurScope=s.blurScope))}}function by(t){Qs(t,"itemStyle"),Qs(t,"lineStyle"),Qs(t,"areaStyle"),Qs(t,"label"),Qs(t,"labelLine"),Qs(t,"upperLabel"),Qs(t,"edgeLabel")}function jr(t,e){var n=S1(t)&&t[e],r=S1(n)&&n.textStyle;if(r)for(var s=0,i=yj.length;s<i;s++){var a=yj[s];r.hasOwnProperty(a)&&(n[a]=r[a])}}function Pa(t){t&&(by(t),jr(t,"label"),t.emphasis&&jr(t.emphasis,"label"))}function V7e(t){if(S1(t)){HT(t),by(t),jr(t,"label"),jr(t,"upperLabel"),jr(t,"edgeLabel"),t.emphasis&&(jr(t.emphasis,"label"),jr(t.emphasis,"upperLabel"),jr(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(HT(e),Pa(e));var n=t.markLine;n&&(HT(n),Pa(n));var r=t.markArea;r&&Pa(r);var s=t.data;if(t.type==="graph"){s=s||t.nodes;var i=t.links||t.edges;if(i&&!ea(i))for(var a=0;a<i.length;a++)Pa(i[a]);de(t.categories,function(d){by(d)})}if(s&&!ea(s))for(var a=0;a<s.length;a++)Pa(s[a]);if(e=t.markPoint,e&&e.data)for(var o=e.data,a=0;a<o.length;a++)Pa(o[a]);if(n=t.markLine,n&&n.data)for(var l=n.data,a=0;a<l.length;a++)He(l[a])?(Pa(l[a][0]),Pa(l[a][1])):Pa(l[a]);t.type==="gauge"?(jr(t,"axisLabel"),jr(t,"title"),jr(t,"detail")):t.type==="treemap"?(Qs(t.breadcrumb,"itemStyle"),de(t.levels,function(d){by(d)})):t.type==="tree"&&by(t.leaves)}}function fu(t){return He(t)?t:t?[t]:[]}function p9(t){return(He(t)?t[0]:t)||{}}function N7e(t,e){mo(fu(t.series),function(r){S1(r)&&V7e(r)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),mo(n,function(r){mo(fu(t[r]),function(s){s&&(jr(s,"axisLabel"),jr(s.axisPointer,"label"))})}),mo(fu(t.parallel),function(r){var s=r&&r.parallelAxisDefault;jr(s,"axisLabel"),jr(s&&s.axisPointer,"label")}),mo(fu(t.calendar),function(r){Qs(r,"itemStyle"),jr(r,"dayLabel"),jr(r,"monthLabel"),jr(r,"yearLabel")}),mo(fu(t.radar),function(r){jr(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),mo(fu(t.geo),function(r){S1(r)&&(Pa(r),mo(fu(r.regions),function(s){Pa(s)}))}),mo(fu(t.timeline),function(r){Pa(r),Qs(r,"label"),Qs(r,"itemStyle"),Qs(r,"controlStyle",!0);var s=r.data;He(s)&&de(s,function(i){wt(i)&&(Qs(i,"label"),Qs(i,"itemStyle"))})}),mo(fu(t.toolbox),function(r){Qs(r,"iconStyle"),mo(r.feature,function(s){Qs(s,"iconStyle")})}),jr(p9(t.axisPointer),"label"),jr(p9(t.tooltip).axisPointer,"label")}function j7e(t,e){for(var n=e.split(","),r=t,s=0;s<n.length&&(r=r&&r[n[s]],r!=null);s++);return r}function F7e(t,e,n,r){for(var s=e.split(","),i=t,a,o=0;o<s.length-1;o++)a=s[o],i[a]==null&&(i[a]={}),i=i[a];i[s[o]]==null&&(i[s[o]]=n)}function h9(t){t&&de(B7e,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var B7e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],z7e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],qT=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Pv(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<qT.length;n++){var r=qT[n][1],s=qT[n][0];e[r]!=null&&(e[s]=e[r])}}function m9(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function g9(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function U7e(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function xne(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&xne(t[n].children,e)}function _ne(t,e){N7e(t,e),t.series=In(t.series),de(t.series,function(n){if(wt(n)){var r=n.type;if(r==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(r==="pie"||r==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),m9(n.label);var s=n.data;if(s&&!ea(s))for(var i=0;i<s.length;i++)m9(s[i]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(r==="gauge"){var a=j7e(n,"pointer.color");a!=null&&F7e(n,"itemStyle.color",a)}else if(r==="bar"){Pv(n),Pv(n.backgroundStyle),Pv(n.emphasis);var s=n.data;if(s&&!ea(s))for(var i=0;i<s.length;i++)typeof s[i]=="object"&&(Pv(s[i]),Pv(s[i]&&s[i].emphasis))}else if(r==="sunburst"){var o=n.highlightPolicy;o&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=o)),g9(n),xne(n.data,g9)}else r==="graph"||r==="sankey"?U7e(n):r==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&_t(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),h9(n)}}),t.dataRange&&(t.visualMap=t.dataRange),de(z7e,function(n){var r=t[n];r&&(He(r)||(r=[r]),de(r,function(s){h9(s)}))})}function H7e(t){var e=mt();t.eachSeries(function(n){var r=n.get("stack");if(r){var s=e.get(r)||e.set(r,[]),i=n.getData(),a={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:n};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;s.length&&i.setCalculationInfo("stackedOnSeries",s[s.length-1].seriesModel),s.push(a)}}),e.each(q7e)}function q7e(t){de(t,function(e,n){var r=[],s=[NaN,NaN],i=[e.stackResultDimension,e.stackedOverDimension],a=e.data,o=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";a.modify(i,function(d,c,f){var p=a.get(e.stackedDimension,f);if(isNaN(p))return s;var h,m;o?m=a.getRawIndex(f):h=a.get(e.stackedByDimension,f);for(var g=NaN,y=n-1;y>=0;y--){var x=t[y];if(o||(m=x.data.rawIndexOf(x.stackedByDimension,h)),m>=0){var _=x.data.getByRawIndex(x.stackResultDimension,m);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&p>=0&&_>0||l==="samesign"&&p<=0&&_<0){p=B8e(p,_),g=_;break}}}return r[0]=p,r[1]=g,r})})}var oA=function(){function t(e){this.data=e.data||(e.sourceFormat===Zl?{}:[]),this.sourceFormat=e.sourceFormat||pne,this.seriesLayoutBy=e.seriesLayoutBy||Rl,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var n=this.dimensionsDefine=e.dimensionsDefine;if(n)for(var r=0;r<n.length;r++){var s=n[r];s.type==null&&gne(this,r)===Es.Must&&(s.type="ordinal")}}return t}();function A6(t){return t instanceof oA}function oE(t,e,n){n=n||wne(t);var r=e.seriesLayoutBy,s=G7e(t,n,r,e.sourceHeader,e.dimensions),i=new oA({data:t,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:s.dimensionsDefine,startIndex:s.startIndex,dimensionsDetectedCount:s.dimensionsDetectedCount,metaRawOption:kt(e)});return i}function T6(t){return new oA({data:t,sourceFormat:ea(t)?kc:fo})}function W7e(t){return new oA({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:kt(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function wne(t){var e=pne;if(ea(t))e=kc;else if(He(t)){t.length===0&&(e=ii);for(var n=0,r=t.length;n<r;n++){var s=t[n];if(s!=null){if(He(s)||ea(s)){e=ii;break}else if(wt(s)){e=po;break}}}}else if(wt(t)){for(var i in t)if(pt(t,i)&&si(t[i])){e=Zl;break}}return e}function G7e(t,e,n,r,s){var i,a;if(!t)return{dimensionsDefine:v9(s),startIndex:a,dimensionsDetectedCount:i};if(e===ii){var o=t;r==="auto"||r==null?y9(function(d){d!=null&&d!=="-"&&(ot(d)?a==null&&(a=1):a=0)},n,o,10):a=hn(r)?r:r?1:0,!s&&a===1&&(s=[],y9(function(d,c){s[c]=d!=null?d+"":""},n,o,1/0)),i=s?s.length:n===qg?o.length:o[0]?o[0].length:null}else if(e===po)s||(s=Y7e(t));else if(e===Zl)s||(s=[],de(t,function(d,c){s.push(c)}));else if(e===fo){var l=Ng(t[0]);i=He(l)&&l.length||1}return{startIndex:a,dimensionsDefine:v9(s),dimensionsDetectedCount:i}}function Y7e(t){for(var e=0,n;e<t.length&&!(n=t[e++]););if(n)return sn(n)}function v9(t){if(t){var e=mt();return We(t,function(n,r){n=wt(n)?n:{name:n};var s={name:n.name,displayName:n.displayName,type:n.type};if(s.name==null)return s;s.name+="",s.displayName==null&&(s.displayName=s.name);var i=e.get(s.name);return i?s.name+="-"+i.count++:e.set(s.name,{count:1}),s})}}function y9(t,e,n,r){if(e===qg)for(var s=0;s<n.length&&s<r;s++)t(n[s]?n[s][0]:null,s);else for(var i=n[0]||[],s=0;s<i.length&&s<r;s++)t(i[s],s)}function kne(t){var e=t.sourceFormat;return e===po||e===Zl}var kf,Sf,Cf,b9,x9,Sne=function(){function t(e,n){var r=A6(e)?e:T6(e);this._source=r;var s=this._data=r.data;r.sourceFormat===kc&&(this._offset=0,this._dimSize=n,this._data=s),x9(this,s,r)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(e,n){},t.prototype.appendData=function(e){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var e;x9=function(a,o,l){var d=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,p=l.dimensionsDefine,h=b9[$6(d,c)];if(Ne(a,h),d===kc)a.getItem=n,a.count=s,a.fillStorage=r;else{var m=Cne(d,c);a.getItem=ct(m,null,o,f,p);var g=Ane(d,c);a.count=ct(g,null,o,f,p)}};var n=function(a,o){a=a-this._offset,o=o||[];for(var l=this._data,d=this._dimSize,c=d*a,f=0;f<d;f++)o[f]=l[c+f];return o},r=function(a,o,l,d){for(var c=this._data,f=this._dimSize,p=0;p<f;p++){for(var h=d[p],m=h[0]==null?1/0:h[0],g=h[1]==null?-1/0:h[1],y=o-a,x=l[p],_=0;_<y;_++){var k=c[_*f+p];x[a+_]=k,k<m&&(m=k),k>g&&(g=k)}h[0]=m,h[1]=g}},s=function(){return this._data?this._data.length/this._dimSize:0};b9=(e={},e[ii+"_"+Rl]={pure:!0,appendData:i},e[ii+"_"+qg]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[po]={pure:!0,appendData:i},e[Zl]={pure:!0,appendData:function(a){var o=this._data;de(a,function(l,d){for(var c=o[d]||(o[d]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},e[fo]={appendData:i},e[kc]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},e);function i(a){for(var o=0;o<a.length;o++)this._data.push(a[o])}}(),t}(),_9=function(t,e,n,r){return t[r]},K7e=(kf={},kf[ii+"_"+Rl]=function(t,e,n,r){return t[r+e]},kf[ii+"_"+qg]=function(t,e,n,r,s){r+=e;for(var i=s||[],a=t,o=0;o<a.length;o++){var l=a[o];i[o]=l?l[r]:null}return i},kf[po]=_9,kf[Zl]=function(t,e,n,r,s){for(var i=s||[],a=0;a<n.length;a++){var o=n[a].name,l=t[o];i[a]=l?l[r]:null}return i},kf[fo]=_9,kf);function Cne(t,e){var n=K7e[$6(t,e)];return n}var w9=function(t,e,n){return t.length},X7e=(Sf={},Sf[ii+"_"+Rl]=function(t,e,n){return Math.max(0,t.length-e)},Sf[ii+"_"+qg]=function(t,e,n){var r=t[0];return r?Math.max(0,r.length-e):0},Sf[po]=w9,Sf[Zl]=function(t,e,n){var r=n[0].name,s=t[r];return s?s.length:0},Sf[fo]=w9,Sf);function Ane(t,e){var n=X7e[$6(t,e)];return n}var WT=function(t,e,n){return t[e]},Q7e=(Cf={},Cf[ii]=WT,Cf[po]=function(t,e,n){return t[n]},Cf[Zl]=WT,Cf[fo]=function(t,e,n){var r=Ng(t);return r instanceof Array?r[e]:r},Cf[kc]=WT,Cf);function Tne(t){var e=Q7e[t];return e}function $6(t,e){return t===ii?t+"_"+e:t}function yg(t,e,n){if(t){var r=t.getRawDataItem(e);if(r!=null){var s=t.getStore(),i=s.getSource().sourceFormat;if(n!=null){var a=t.getDimensionIndex(n),o=s.getDimensionProperty(a);return Tne(i)(r,a,o)}else{var l=r;return i===fo&&(l=Ng(r)),l}}}}var Z7e=/\{@(.+?)\}/g,lA=function(){function t(){}return t.prototype.getDataParams=function(e,n){var r=this.getData(n),s=this.getRawValue(e,n),i=r.getRawIndex(e),a=r.getName(e),o=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),d=l&&l[r.getItemVisual(e,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,p=f==="series",h=r.userOutput&&r.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:p?this.subType:null,seriesIndex:this.seriesIndex,seriesId:p?this.id:null,seriesName:p?this.name:null,name:a,dataIndex:i,data:o,dataType:n,value:s,color:d,borderColor:c,dimensionNames:h?h.fullDimensions:null,encode:h?h.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(e,n,r,s,i,a){n=n||"normal";var o=this.getData(r),l=this.getDataParams(e,r);if(a&&(l.value=a.interpolatedValue),s!=null&&He(l.value)&&(l.value=l.value[s]),!i){var d=o.getItemModel(e);i=d.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(bt(i))return l.status=n,l.dimensionIndex=s,i(l);if(ot(i)){var c=lne(i,l);return c.replace(Z7e,function(f,p){var h=p.length,m=p;m.charAt(0)==="["&&m.charAt(h-1)==="]"&&(m=+m.slice(1,h-1));var g=yg(o,e,m);if(a&&He(a.interpolatedValue)){var y=o.getDimensionIndex(m);y>=0&&(g=a.interpolatedValue[y])}return g!=null?g+"":""})}},t.prototype.getRawValue=function(e,n){return yg(this.getData(n),e)},t.prototype.formatTooltip=function(e,n,r){},t}();function k9(t){var e,n;return wt(t)?t.type&&(n=t):e=t,{text:e,frag:n}}function g0(t){return new J7e(t)}var J7e=function(){function t(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return t.prototype.perform=function(e){var n=this._upstream,r=e&&e.skip;if(this._dirty&&n){var s=this.context;s.data=s.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var i;this._plan&&!r&&(i=this._plan(this.context));var a=c(this._modBy),o=this._modDataCount||0,l=c(e&&e.modBy),d=e&&e.modDataCount||0;(a!==l||o!==d)&&(i="reset");function c(_){return!(_>=1)&&(_=1),_}var f;(this._dirty||i==="reset")&&(this._dirty=!1,f=this._doReset(r)),this._modBy=l,this._modDataCount=d;var p=e&&e.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,m=Math.min(p!=null?this._dueIndex+p:1/0,this._dueEnd);if(!r&&(f||h<m)){var g=this._progress;if(He(g))for(var y=0;y<g.length;y++)this._doProgress(g[y],h,m,l,d);else this._doProgress(g,h,m,l,d)}this._dueIndex=m;var x=this._settedOutputEnd!=null?this._settedOutputEnd:m;this._outputDueEnd=x}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(e,n,r,s,i){S9.reset(n,r,s,i),this._callingProgress=e,this._callingProgress({start:n,end:r,count:r-n,next:S9.next},this.context)},t.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,r;!e&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(r=n.forceFirstProgress,n=n.progress),He(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var s=this._downstream;return s&&s.dirty(),r},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},t}(),S9=function(){var t,e,n,r,s,i={reset:function(l,d,c,f){e=l,t=d,n=c,r=f,s=Math.ceil(r/n),i.next=n>1&&r>0?o:a}};return i;function a(){return e<t?e++:null}function o(){var l=e%s*n+Math.ceil(e/s),d=e>=t?null:l<r?l:e;return e++,d}}();function Sc(t,e){var n=e&&e.type;return n==="ordinal"?t:(n==="time"&&!hn(t)&&t!=null&&t!=="-"&&(t=+Hl(t)),t==null||t===""?NaN:Number(t))}var eje=mt({number:function(t){return parseFloat(t)},time:function(t){return+Hl(t)},trim:function(t){return ot(t)?Ao(t):t}});function $ne(t){return eje.get(t)}var Mne={lt:function(t,e){return t<e},lte:function(t,e){return t<=e},gt:function(t,e){return t>e},gte:function(t,e){return t>=e}},tje=function(){function t(e,n){if(!hn(n)){var r="";kn(r)}this._opFn=Mne[e],this._rvalFloat=id(n)}return t.prototype.evaluate=function(e){return hn(e)?this._opFn(e,this._rvalFloat):this._opFn(id(e),this._rvalFloat)},t}(),Ene=function(){function t(e,n){var r=e==="desc";this._resultLT=r?1:-1,n==null&&(n=r?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return t.prototype.evaluate=function(e,n){var r=hn(e)?e:id(e),s=hn(n)?n:id(n),i=isNaN(r),a=isNaN(s);if(i&&(r=this._incomparable),a&&(s=this._incomparable),i&&a){var o=ot(e),l=ot(n);o&&(r=l?e:0),l&&(s=o?n:0)}return r<s?this._resultLT:r>s?-this._resultLT:0},t}(),nje=function(){function t(e,n){this._rval=n,this._isEQ=e,this._rvalTypeof=typeof n,this._rvalFloat=id(n)}return t.prototype.evaluate=function(e){var n=e===this._rval;if(!n){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(n=id(e)===this._rvalFloat)}return this._isEQ?n:!n},t}();function rje(t,e){return t==="eq"||t==="ne"?new nje(t==="eq",e):pt(Mne,t)?new tje(t,e):null}var sje=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(e){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(e){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(e,n){},t.prototype.retrieveValueFromItem=function(e,n){},t.prototype.convertValue=function(e,n){return Sc(e,n)},t}();function ije(t,e){var n=new sje,r=t.data,s=n.sourceFormat=t.sourceFormat,i=t.startIndex,a="";t.seriesLayoutBy!==Rl&&kn(a);var o=[],l={},d=t.dimensionsDefine;if(d)de(d,function(g,y){var x=g.name,_={index:y,name:x,displayName:g.displayName};if(o.push(_),x!=null){var k="";pt(l,x)&&kn(k),l[x]=_}});else for(var c=0;c<t.dimensionsDetectedCount;c++)o.push({index:c});var f=Cne(s,Rl);e.__isBuiltIn&&(n.getRawDataItem=function(g){return f(r,i,o,g)},n.getRawData=ct(aje,null,t)),n.cloneRawData=ct(oje,null,t);var p=Ane(s,Rl);n.count=ct(p,null,r,i,o);var h=Tne(s);n.retrieveValue=function(g,y){var x=f(r,i,o,g);return m(x,y)};var m=n.retrieveValueFromItem=function(g,y){if(g!=null){var x=o[y];if(x)return h(g,y,x.name)}};return n.getDimensionInfo=ct(lje,null,o,l),n.cloneAllDimensionInfo=ct(uje,null,o),n}function aje(t){var e=t.sourceFormat;if(!M6(e)){var n="";kn(n)}return t.data}function oje(t){var e=t.sourceFormat,n=t.data;if(!M6(e)){var r="";kn(r)}if(e===ii){for(var s=[],i=0,a=n.length;i<a;i++)s.push(n[i].slice());return s}else if(e===po){for(var s=[],i=0,a=n.length;i<a;i++)s.push(Ne({},n[i]));return s}}function lje(t,e,n){if(n!=null){if(hn(n)||!isNaN(n)&&!pt(e,n))return t[n];if(pt(e,n))return e[n]}}function uje(t){return kt(t)}var Dne=mt();function dje(t){t=kt(t);var e=t.type,n="";e||kn(n);var r=e.split(":");r.length!==2&&kn(n);var s=!1;r[0]==="echarts"&&(e=r[1],s=!0),t.__isBuiltIn=s,Dne.set(e,t)}function cje(t,e,n){var r=In(t),s=r.length,i="";s||kn(i);for(var a=0,o=s;a<o;a++){var l=r[a];e=fje(l,e),a!==o-1&&(e.length=Math.max(e.length,1))}return e}function fje(t,e,n,r){var s="";e.length||kn(s),wt(t)||kn(s);var i=t.type,a=Dne.get(i);a||kn(s);var o=We(e,function(d){return ije(d,a)}),l=In(a.transform({upstream:o[0],upstreamList:o,config:kt(t.config)}));return We(l,function(d,c){var f="";wt(d)||kn(f),d.data||kn(f);var p=wne(d.data);M6(p)||kn(f);var h,m=e[0];if(m&&c===0&&!d.dimensions){var g=m.startIndex;g&&(d.data=m.data.slice(0,g).concat(d.data)),h={seriesLayoutBy:Rl,sourceHeader:g,dimensions:m.metaRawOption.dimensions}}else h={seriesLayoutBy:Rl,sourceHeader:0,dimensions:d.dimensions};return oE(d.data,h,null)})}function M6(t){return t===ii||t===po}var uA="undefined",pje=typeof Uint32Array===uA?Array:Uint32Array,hje=typeof Uint16Array===uA?Array:Uint16Array,Rne=typeof Int32Array===uA?Array:Int32Array,C9=typeof Float64Array===uA?Array:Float64Array,Pne={float:C9,int:Rne,ordinal:Array,number:Array,time:C9},GT;function Wh(t){return t>65535?pje:hje}function Gh(){return[1/0,-1/0]}function mje(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function A9(t,e,n,r,s){var i=Pne[n||"float"];if(s){var a=t[e],o=a&&a.length;if(o!==r){for(var l=new i(r),d=0;d<o;d++)l[d]=a[d];t[e]=l}}else t[e]=new i(r)}var lE=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=mt()}return t.prototype.initData=function(e,n,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var s=e.getSource(),i=this.defaultDimValueGetter=GT[s.sourceFormat];this._dimValueGetter=r||i,this._rawExtent=[],kne(s),this._dimensions=We(n,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,e.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(e,n){var r=this._calcDimNameToIdx,s=this._dimensions,i=r.get(e);if(i!=null){if(s[i].type===n)return i}else i=s.length;return s[i]={type:n},r.set(e,i),this._chunks[i]=new Pne[n||"float"](this._rawCount),this._rawExtent[i]=Gh(),i},t.prototype.collectOrdinalMeta=function(e,n){var r=this._chunks[e],s=this._dimensions[e],i=this._rawExtent,a=s.ordinalOffset||0,o=r.length;a===0&&(i[e]=Gh());for(var l=i[e],d=a;d<o;d++){var c=r[d]=n.parseAndCollect(r[d]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}s.ordinalMeta=n,s.ordinalOffset=o,s.type="ordinal"},t.prototype.getOrdinalMeta=function(e){var n=this._dimensions[e],r=n.ordinalMeta;return r},t.prototype.getDimensionProperty=function(e){var n=this._dimensions[e];return n&&n.property},t.prototype.appendData=function(e){var n=this._provider,r=this.count();n.appendData(e);var s=n.count();return n.persistent||(s+=r),r<s&&this._initDataFromProvider(r,s,!0),[r,s]},t.prototype.appendValues=function(e,n){for(var r=this._chunks,s=this._dimensions,i=s.length,a=this._rawExtent,o=this.count(),l=o+Math.max(e.length,n||0),d=0;d<i;d++){var c=s[d];A9(r,d,c.type,l,!0)}for(var f=[],p=o;p<l;p++)for(var h=p-o,m=0;m<i;m++){var c=s[m],g=GT.arrayRows.call(this,e[h]||f,c.property,h,m);r[m][p]=g;var y=a[m];g<y[0]&&(y[0]=g),g>y[1]&&(y[1]=g)}return this._rawCount=this._count=l,{start:o,end:l}},t.prototype._initDataFromProvider=function(e,n,r){for(var s=this._provider,i=this._chunks,a=this._dimensions,o=a.length,l=this._rawExtent,d=We(a,function(_){return _.property}),c=0;c<o;c++){var f=a[c];l[c]||(l[c]=Gh()),A9(i,c,f.type,n,r)}if(s.fillStorage)s.fillStorage(e,n,i,l);else for(var p=[],h=e;h<n;h++){p=s.getItem(h,p);for(var m=0;m<o;m++){var g=i[m],y=this._dimValueGetter(p,d[m],h,m);g[h]=y;var x=l[m];y<x[0]&&(x[0]=y),y>x[1]&&(x[1]=y)}}!s.persistent&&s.clean&&s.clean(),this._rawCount=this._count=n,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(e,n){if(!(n>=0&&n<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(n)]:NaN},t.prototype.getValues=function(e,n){var r=[],s=[];if(n==null){n=e,e=[];for(var i=0;i<this._dimensions.length;i++)s.push(i)}else s=e;for(var i=0,a=s.length;i<a;i++)r.push(this.get(s[i],n));return r},t.prototype.getByRawIndex=function(e,n){if(!(n>=0&&n<this._rawCount))return NaN;var r=this._chunks[e];return r?r[n]:NaN},t.prototype.getSum=function(e){var n=this._chunks[e],r=0;if(n)for(var s=0,i=this.count();s<i;s++){var a=this.get(e,s);isNaN(a)||(r+=a)}return r},t.prototype.getMedian=function(e){var n=[];this.each([e],function(i){isNaN(i)||n.push(i)});var r=n.sort(function(i,a){return i-a}),s=this.count();return s===0?0:s%2===1?r[(s-1)/2]:(r[s/2]+r[s/2-1])/2},t.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var n=this._indices,r=n[e];if(r!=null&&r<this._count&&r===e)return e;for(var s=0,i=this._count-1;s<=i;){var a=(s+i)/2|0;if(n[a]<e)s=a+1;else if(n[a]>e)i=a-1;else return a}return-1},t.prototype.indicesOfNearest=function(e,n,r){var s=this._chunks,i=s[e],a=[];if(!i)return a;r==null&&(r=1/0);for(var o=1/0,l=-1,d=0,c=0,f=this.count();c<f;c++){var p=this.getRawIndex(c),h=n-i[p],m=Math.abs(h);m<=r&&((m<o||m===o&&h>=0&&l<0)&&(o=m,l=h,d=0),h===l&&(a[d++]=c))}return a.length=d,a},t.prototype.getIndices=function(){var e,n=this._indices;if(n){var r=n.constructor,s=this._count;if(r===Array){e=new r(s);for(var i=0;i<s;i++)e[i]=n[i]}else e=new r(n.buffer,0,s)}else{var r=Wh(this._rawCount);e=new r(this.count());for(var i=0;i<e.length;i++)e[i]=i}return e},t.prototype.filter=function(e,n){if(!this._count)return this;for(var r=this.clone(),s=r.count(),i=Wh(r._rawCount),a=new i(s),o=[],l=e.length,d=0,c=e[0],f=r._chunks,p=0;p<s;p++){var h=void 0,m=r.getRawIndex(p);if(l===0)h=n(p);else if(l===1){var g=f[c][m];h=n(g,p)}else{for(var y=0;y<l;y++)o[y]=f[e[y]][m];o[y]=p,h=n.apply(null,o)}h&&(a[d++]=m)}return d<s&&(r._indices=a),r._count=d,r._extent=[],r._updateGetRawIdx(),r},t.prototype.selectRange=function(e){var n=this.clone(),r=n._count;if(!r)return this;var s=sn(e),i=s.length;if(!i)return this;var a=n.count(),o=Wh(n._rawCount),l=new o(a),d=0,c=s[0],f=e[c][0],p=e[c][1],h=n._chunks,m=!1;if(!n._indices){var g=0;if(i===1){for(var y=h[s[0]],x=0;x<r;x++){var _=y[x];(_>=f&&_<=p||isNaN(_))&&(l[d++]=g),g++}m=!0}else if(i===2){for(var y=h[s[0]],k=h[s[1]],w=e[s[1]][0],S=e[s[1]][1],x=0;x<r;x++){var _=y[x],C=k[x];(_>=f&&_<=p||isNaN(_))&&(C>=w&&C<=S||isNaN(C))&&(l[d++]=g),g++}m=!0}}if(!m)if(i===1)for(var x=0;x<a;x++){var A=n.getRawIndex(x),_=h[s[0]][A];(_>=f&&_<=p||isNaN(_))&&(l[d++]=A)}else for(var x=0;x<a;x++){for(var M=!0,A=n.getRawIndex(x),E=0;E<i;E++){var P=s[E],_=h[P][A];(_<e[P][0]||_>e[P][1])&&(M=!1)}M&&(l[d++]=n.getRawIndex(x))}return d<a&&(n._indices=l),n._count=d,n._extent=[],n._updateGetRawIdx(),n},t.prototype.map=function(e,n){var r=this.clone(e);return this._updateDims(r,e,n),r},t.prototype.modify=function(e,n){this._updateDims(this,e,n)},t.prototype._updateDims=function(e,n,r){for(var s=e._chunks,i=[],a=n.length,o=e.count(),l=[],d=e._rawExtent,c=0;c<n.length;c++)d[n[c]]=Gh();for(var f=0;f<o;f++){for(var p=e.getRawIndex(f),h=0;h<a;h++)l[h]=s[n[h]][p];l[a]=f;var m=r&&r.apply(null,l);if(m!=null){typeof m!="object"&&(i[0]=m,m=i);for(var c=0;c<m.length;c++){var g=n[c],y=m[c],x=d[g],_=s[g];_&&(_[p]=y),y<x[0]&&(x[0]=y),y>x[1]&&(x[1]=y)}}}},t.prototype.lttbDownSample=function(e,n){var r=this.clone([e],!0),s=r._chunks,i=s[e],a=this.count(),o=0,l=Math.floor(1/n),d=this.getRawIndex(0),c,f,p,h=new(Wh(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));h[o++]=d;for(var m=1;m<a-1;m+=l){for(var g=Math.min(m+l,a-1),y=Math.min(m+l*2,a),x=(y+g)/2,_=0,k=g;k<y;k++){var w=this.getRawIndex(k),S=i[w];isNaN(S)||(_+=S)}_/=y-g;var C=m,A=Math.min(m+l,a),M=m-1,E=i[d];c=-1,p=C;for(var P=-1,I=0,k=C;k<A;k++){var w=this.getRawIndex(k),S=i[w];if(isNaN(S)){I++,P<0&&(P=w);continue}f=Math.abs((M-x)*(S-E)-(M-k)*(_-E)),f>c&&(c=f,p=w)}I>0&&I<A-C&&(h[o++]=Math.min(P,p),p=Math.max(P,p)),h[o++]=p,d=p}return h[o++]=this.getRawIndex(a-1),r._count=o,r._indices=h,r.getRawIndex=this._getRawIdx,r},t.prototype.minmaxDownSample=function(e,n){for(var r=this.clone([e],!0),s=r._chunks,i=Math.floor(1/n),a=s[e],o=this.count(),l=new(Wh(this._rawCount))(Math.ceil(o/i)*2),d=0,c=0;c<o;c+=i){var f=c,p=a[this.getRawIndex(f)],h=c,m=a[this.getRawIndex(h)],g=i;c+i>o&&(g=o-c);for(var y=0;y<g;y++){var x=this.getRawIndex(c+y),_=a[x];_<p&&(p=_,f=c+y),_>m&&(m=_,h=c+y)}var k=this.getRawIndex(f),w=this.getRawIndex(h);f<h?(l[d++]=k,l[d++]=w):(l[d++]=w,l[d++]=k)}return r._count=d,r._indices=l,r._updateGetRawIdx(),r},t.prototype.downSample=function(e,n,r,s){for(var i=this.clone([e],!0),a=i._chunks,o=[],l=Math.floor(1/n),d=a[e],c=this.count(),f=i._rawExtent[e]=Gh(),p=new(Wh(this._rawCount))(Math.ceil(c/l)),h=0,m=0;m<c;m+=l){l>c-m&&(l=c-m,o.length=l);for(var g=0;g<l;g++){var y=this.getRawIndex(m+g);o[g]=d[y]}var x=r(o),_=this.getRawIndex(Math.min(m+s(o,x)||0,c-1));d[_]=x,x<f[0]&&(f[0]=x),x>f[1]&&(f[1]=x),p[h++]=_}return i._count=h,i._indices=p,i._updateGetRawIdx(),i},t.prototype.each=function(e,n){if(this._count)for(var r=e.length,s=this._chunks,i=0,a=this.count();i<a;i++){var o=this.getRawIndex(i);switch(r){case 0:n(i);break;case 1:n(s[e[0]][o],i);break;case 2:n(s[e[0]][o],s[e[1]][o],i);break;default:for(var l=0,d=[];l<r;l++)d[l]=s[e[l]][o];d[l]=i,n.apply(null,d)}}},t.prototype.getDataExtent=function(e){var n=this._chunks[e],r=Gh();if(!n)return r;var s=this.count(),i=!this._indices,a;if(i)return this._rawExtent[e].slice();if(a=this._extent[e],a)return a.slice();a=r;for(var o=a[0],l=a[1],d=0;d<s;d++){var c=this.getRawIndex(d),f=n[c];f<o&&(o=f),f>l&&(l=f)}return a=[o,l],this._extent[e]=a,a},t.prototype.getRawDataItem=function(e){var n=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(n);for(var r=[],s=this._chunks,i=0;i<s.length;i++)r.push(s[i][n]);return r},t.prototype.clone=function(e,n){var r=new t,s=this._chunks,i=e&&Bl(e,function(o,l){return o[l]=!0,o},{});if(i)for(var a=0;a<s.length;a++)r._chunks[a]=i[a]?mje(s[a]):s[a];else r._chunks=s;return this._copyCommonProps(r),n||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},t.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=kt(this._extent),e._rawExtent=kt(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,n=void 0;if(e===Array){var r=this._indices.length;n=new e(r);for(var s=0;s<r;s++)n[s]=this._indices[s]}else n=new e(this._indices);return n}return null},t.prototype._getRawIdxIdentity=function(e){return e},t.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function e(n,r,s,i){return Sc(n[i],this._dimensions[i])}GT={arrayRows:e,objectRows:function(n,r,s,i){return Sc(n[r],this._dimensions[i])},keyedColumns:e,original:function(n,r,s,i){var a=n&&(n.value==null?n:n.value);return Sc(a instanceof Array?a[i]:a,this._dimensions[i])},typedArray:function(n,r,s,i){return n[i]}}}(),t}(),Ine=function(){function t(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(e,n){this._sourceList=e,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,n=this._getUpstreamSourceManagers(),r=!!n.length,s,i;if(s_(e)){var a=e,o=void 0,l=void 0,d=void 0;if(r){var c=n[0];c.prepareSource(),d=c.getSource(),o=d.data,l=d.sourceFormat,i=[c._getVersionSign()]}else o=a.get("data",!0),l=ea(o)?kc:fo,i=[];var f=this._getSourceMetaRawOption()||{},p=d&&d.metaRawOption||{},h=Ot(f.seriesLayoutBy,p.seriesLayoutBy)||null,m=Ot(f.sourceHeader,p.sourceHeader),g=Ot(f.dimensions,p.dimensions),y=h!==p.seriesLayoutBy||!!m!=!!p.sourceHeader||g;s=y?[oE(o,{seriesLayoutBy:h,sourceHeader:m,dimensions:g},l)]:[]}else{var x=e;if(r){var _=this._applyTransform(n);s=_.sourceList,i=_.upstreamSignList}else{var k=x.get("source",!0);s=[oE(k,this._getSourceMetaRawOption(),null)],i=[]}}this._setLocalSource(s,i)},t.prototype._applyTransform=function(e){var n=this._sourceHost,r=n.get("transform",!0),s=n.get("fromTransformResult",!0);if(s!=null){var i="";e.length!==1&&$9(i)}var a,o=[],l=[];return de(e,function(d){d.prepareSource();var c=d.getSource(s||0),f="";s!=null&&!c&&$9(f),o.push(c),l.push(d._getVersionSign())}),r?a=cje(r,o,{datasetIndex:n.componentIndex}):s!=null&&(a=[W7e(o[0])]),{sourceList:a,upstreamSignList:l}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),n=0;n<e.length;n++){var r=e[n];if(r._isDirty()||this._upstreamSignList[n]!==r._getVersionSign())return!0}},t.prototype.getSource=function(e){e=e||0;var n=this._sourceList[e];if(!n){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return n},t.prototype.getSharedDataStore=function(e){var n=e.makeStoreSchema();return this._innerGetDataStore(n.dimensions,e.source,n.hash)},t.prototype._innerGetDataStore=function(e,n,r){var s=0,i=this._storeList,a=i[s];a||(a=i[s]={});var o=a[r];if(!o){var l=this._getUpstreamSourceManagers()[0];s_(this._sourceHost)&&l?o=l._innerGetDataStore(e,n,r):(o=new lE,o.initData(new Sne(n,e.length),e)),a[r]=o}return o},t.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(s_(e)){var n=k6(e);return n?[n.getSourceManager()]:[]}else return We(_7e(e),function(r){return r.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,n,r,s;if(s_(e))n=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),s=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var i=e;n=i.get("seriesLayoutBy",!0),r=i.get("sourceHeader",!0),s=i.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:r,dimensions:s}},t}();function T9(t){var e=t.option.transform;e&&vk(t.option.transform)}function s_(t){return t.mainType==="series"}function $9(t){throw new Error(t)}var gje="line-height:1";function One(t){var e=t.lineHeight;return e==null?gje:"line-height:"+bi(e+"")+"px"}function Lne(t,e){var n=t.color||"#6e7079",r=t.fontSize||12,s=t.fontWeight||"400",i=t.color||"#464646",a=t.fontSize||14,o=t.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+bi(r+"")+"px;color:"+bi(n)+";font-weight:"+bi(s+""),valueStyle:"font-size:"+bi(a+"")+"px;color:"+bi(i)+";font-weight:"+bi(o+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:s},valueStyle:{fontSize:a,fill:i,fontWeight:o}}}var vje=[0,10,20,30],yje=["",`
`,`

`,`


`];function hs(t,e){return e.type=t,e}function uE(t){return t.type==="section"}function Vne(t){return uE(t)?bje:xje}function Nne(t){if(uE(t)){var e=0,n=t.blocks.length,r=n>1||n>0&&!t.noHeader;return de(t.blocks,function(s){var i=Nne(s);i>=e&&(e=i+ +(r&&(!i||uE(s)&&!s.noHeader)))}),e}return 0}function bje(t,e,n,r){var s=e.noHeader,i=_je(Nne(e)),a=[],o=e.blocks||[];Ei(!o||He(o)),o=o||[];var l=t.orderMode;if(e.sortBlocks&&l){o=o.slice();var d={valueAsc:"asc",valueDesc:"desc"};if(pt(d,l)){var c=new Ene(d[l],null);o.sort(function(g,y){return c.evaluate(g.sortParam,y.sortParam)})}else l==="seriesDesc"&&o.reverse()}de(o,function(g,y){var x=e.valueFormatter,_=Vne(g)(x?Ne(Ne({},t),{valueFormatter:x}):t,g,y>0?i.html:0,r);_!=null&&a.push(_)});var f=t.renderMode==="richText"?a.join(i.richText):dE(r,a.join(""),s?n:i.html);if(s)return f;var p=sE(e.header,"ordinal",t.useUTC),h=Lne(r,t.renderMode).nameStyle,m=One(r);return t.renderMode==="richText"?jne(t,p,h)+i.richText+f:dE(r,'<div style="'+h+";"+m+';">'+bi(p)+"</div>"+f,n)}function xje(t,e,n,r){var s=t.renderMode,i=e.noName,a=e.noValue,o=!e.markerType,l=e.name,d=t.useUTC,c=e.valueFormatter||t.valueFormatter||function(w){return w=He(w)?w:[w],We(w,function(S,C){return sE(S,He(h)?h[C]:h,d)})};if(!(i&&a)){var f=o?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",s),p=i?"":sE(l,"ordinal",d),h=e.valueType,m=a?[]:c(e.value,e.dataIndex),g=!o||!i,y=!o&&i,x=Lne(r,s),_=x.nameStyle,k=x.valueStyle;return s==="richText"?(o?"":f)+(i?"":jne(t,p,_))+(a?"":Sje(t,m,g,y,k)):dE(r,(o?"":f)+(i?"":wje(p,!o,_))+(a?"":kje(m,g,y,k)),n)}}function M9(t,e,n,r,s,i){if(t){var a=Vne(t),o={useUTC:s,renderMode:n,orderMode:r,markupStyleCreator:e,valueFormatter:t.valueFormatter};return a(o,t,0,i)}}function _je(t){return{html:vje[t],richText:yje[t]}}function dE(t,e,n){var r='<div style="clear:both"></div>',s="margin: "+n+"px 0 0",i=One(t);return'<div style="'+s+";"+i+';">'+e+r+"</div>"}function wje(t,e,n){var r=e?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+bi(t)+"</span>"}function kje(t,e,n,r){var s=n?"10px":"20px",i=e?"float:right;margin-left:"+s:"";return t=He(t)?t:[t],'<span style="'+i+";"+r+'">'+We(t,function(a){return bi(a)}).join("&nbsp;&nbsp;")+"</span>"}function jne(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function Sje(t,e,n,r,s){var i=[s],a=r?10:20;return n&&i.push({padding:[0,0,0,a],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(He(e)?e.join("  "):e,i)}function Fne(t,e){var n=t.getData().getItemVisual(e,"style"),r=n[t.visualDrawType];return eh(r)}function Bne(t,e){var n=t.get("padding");return n!=null?n:e==="richText"?[8,10]:10}var YT=function(){function t(){this.richTextStyles={},this._nextStyleNameId=rte()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(e,n,r){var s=r==="richText"?this._generateStyleName():null,i=h7e({color:n,type:e,renderMode:r,markerId:s});return ot(i)?i:(this.richTextStyles[s]=i.style,i.content)},t.prototype.wrapRichTextStyle=function(e,n){var r={};He(n)?de(n,function(i){return Ne(r,i)}):Ne(r,n);var s=this._generateStyleName();return this.richTextStyles[s]=r,"{"+s+"|"+e+"}"},t}();function zne(t){var e=t.series,n=t.dataIndex,r=t.multipleSeries,s=e.getData(),i=s.mapDimensionsAll("defaultedTooltip"),a=i.length,o=e.getRawValue(n),l=He(o),d=Fne(e,n),c,f,p,h;if(a>1||l&&!a){var m=Cje(o,e,n,i,d);c=m.inlineValues,f=m.inlineValueTypes,p=m.blocks,h=m.inlineValues[0]}else if(a){var g=s.getDimensionInfo(i[0]);h=c=yg(s,n,i[0]),f=g.type}else h=c=l?o[0]:o;var y=t6(e),x=y&&e.name||"",_=s.getName(n),k=r?x:_;return hs("section",{header:x,noHeader:r||!y,sortParam:h,blocks:[hs("nameValue",{markerType:"item",markerColor:d,name:k,noName:!Ao(k),value:c,valueType:f,dataIndex:n})].concat(p||[])})}function Cje(t,e,n,r,s){var i=e.getData(),a=Bl(t,function(f,p,h){var m=i.getDimensionInfo(h);return f=f||m&&m.tooltip!==!1&&m.displayName!=null},!1),o=[],l=[],d=[];r.length?de(r,function(f){c(yg(i,n,f),f)}):de(t,c);function c(f,p){var h=i.getDimensionInfo(p);!h||h.otherDims.tooltip===!1||(a?d.push(hs("nameValue",{markerType:"subItem",markerColor:s,name:h.displayName,value:f,valueType:h.type})):(o.push(f),l.push(h.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:d}}var $d=ln();function i_(t,e){return t.getName(e)||t.getId(e)}var Nw="__universalTransitionEnabled",Jn=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return e.prototype.init=function(n,r,s){this.seriesIndex=this.componentIndex,this.dataTask=g0({count:Tje,reset:$je}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,s);var i=$d(this).sourceManager=new Ine(this);i.prepareSource();var a=this.getInitialData(n,s);D9(a,this),this.dataTask.context.data=a,$d(this).dataBeforeProcessed=a,E9(this),this._initSelectedMapFromData(a)},e.prototype.mergeDefaultAndTheme=function(n,r){var s=k1(this),i=s?Hg(n):{},a=this.subType;nn.hasClass(a)&&(a+="Series"),Ht(n,r.getTheme().get(this.subType)),Ht(n,this.getDefaultOption()),Xp(n,"label",["show"]),this.fillDataTextStyle(n.data),s&&Nc(n,i,s)},e.prototype.mergeOption=function(n,r){n=Ht(this.option,n,!0),this.fillDataTextStyle(n.data);var s=k1(this);s&&Nc(this.option,n,s);var i=$d(this).sourceManager;i.dirty(),i.prepareSource();var a=this.getInitialData(n,r);D9(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,$d(this).dataBeforeProcessed=a,E9(this),this._initSelectedMapFromData(a)},e.prototype.fillDataTextStyle=function(n){if(n&&!ea(n))for(var r=["show"],s=0;s<n.length;s++)n[s]&&n[s].label&&Xp(n[s],"label",r)},e.prototype.getInitialData=function(n,r){},e.prototype.appendData=function(n){var r=this.getRawData();r.appendData(n.data)},e.prototype.getData=function(n){var r=cE(this);if(r){var s=r.context.data;return n==null||!s.getLinkedData?s:s.getLinkedData(n)}else return $d(this).data},e.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},e.prototype.setData=function(n){var r=cE(this);if(r){var s=r.context;s.outputData=n,r!==this.dataTask&&(s.data=n)}$d(this).data=n},e.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return mt(n)},e.prototype.getSourceManager=function(){return $d(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return $d(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},e.prototype.formatTooltip=function(n,r,s){return zne({series:this,dataIndex:n,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(tn.node&&!(n&&n.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(n,r,s){var i=this.ecModel,a=S6.prototype.getColorFromPalette.call(this,n,r,s);return a||(a=i.getColorFromPalette(n,r,s)),a},e.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(n,r){this._innerSelect(this.getData(r),n)},e.prototype.unselect=function(n,r){var s=this.option.selectedMap;if(s){var i=this.option.selectedMode,a=this.getData(r);if(i==="series"||s==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<n.length;o++){var l=n[o],d=i_(a,l);s[d]=!1,this._selectedDataIndicesMap[d]=-1}}},e.prototype.toggleSelect=function(n,r){for(var s=[],i=0;i<n.length;i++)s[0]=n[i],this.isSelected(n[i],r)?this.unselect(s,r):this.select(s,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,r=sn(n),s=[],i=0;i<r.length;i++){var a=n[r[i]];a>=0&&s.push(a)}return s},e.prototype.isSelected=function(n,r){var s=this.option.selectedMap;if(!s)return!1;var i=this.getData(r);return(s==="all"||s[i_(i,n)])&&!i.getItemModel(n).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[Nw])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},e.prototype._innerSelect=function(n,r){var s,i,a=this.option,o=a.selectedMode,l=r.length;if(!(!o||!l)){if(o==="series")a.selectedMap="all";else if(o==="multiple"){wt(a.selectedMap)||(a.selectedMap={});for(var d=a.selectedMap,c=0;c<l;c++){var f=r[c],p=i_(n,f);d[p]=!0,this._selectedDataIndicesMap[p]=n.getRawIndex(f)}}else if(o==="single"||o===!0){var h=r[l-1],p=i_(n,h);a.selectedMap=(s={},s[p]=!0,s),this._selectedDataIndicesMap=(i={},i[p]=n.getRawIndex(h),i)}}},e.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var r=[];n.hasItemOption&&n.each(function(s){var i=n.getRawDataItem(s);i&&i.selected&&r.push(s)}),r.length>0&&this._innerSelect(n,r)}},e.registerClass=function(n){return nn.registerClass(n)},e.protoInitialize=function(){var n=e.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),e}(nn);Gr(Jn,lA);Gr(Jn,S6);cte(Jn,nn);function E9(t){var e=t.name;t6(t)||(t.name=Aje(t)||e)}function Aje(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),r=[];return de(n,function(s){var i=e.getDimensionInfo(s);i.displayName&&r.push(i.displayName)}),r.join(" ")}function Tje(t){return t.model.getRawData().count()}function $je(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),Mje}function Mje(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function D9(t,e){de(p1(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(n){t.wrapMethod(n,Nt(Eje,e))})}function Eje(t,e){var n=cE(t);return n&&n.setOutputEnd((e||this).count()),e}function cE(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var r=n.currentTask;if(r){var s=r.agentStubMap;s&&(r=s.get(t.uid))}return r}}var vr=function(){function t(){this.group=new Tt,this.uid=zg("viewComponent")}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,s){},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,s){},t.prototype.updateLayout=function(e,n,r,s){},t.prototype.updateVisual=function(e,n,r,s){},t.prototype.toggleBlurSeries=function(e,n,r){},t.prototype.eachRendered=function(e){var n=this.group;n&&n.traverse(e)},t}();r6(vr);HC(vr);function Wg(){var t=ln();return function(e){var n=t(e),r=e.pipelineContext,s=!!n.large,i=!!n.progressiveRender,a=n.large=!!(r&&r.large),o=n.progressiveRender=!!(r&&r.progressiveRender);return(s!==a||i!==o)&&"reset"}}var Une=ln(),Dje=Wg(),On=function(){function t(){this.group=new Tt,this.uid=zg("viewChart"),this.renderTask=g0({plan:Rje,reset:Pje}),this.renderTask.context={view:this}}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,s){},t.prototype.highlight=function(e,n,r,s){var i=e.getData(s&&s.dataType);i&&P9(i,s,"emphasis")},t.prototype.downplay=function(e,n,r,s){var i=e.getData(s&&s.dataType);i&&P9(i,s,"normal")},t.prototype.remove=function(e,n){this.group.removeAll()},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,s){this.render(e,n,r,s)},t.prototype.updateLayout=function(e,n,r,s){this.render(e,n,r,s)},t.prototype.updateVisual=function(e,n,r,s){this.render(e,n,r,s)},t.prototype.eachRendered=function(e){Xc(this.group,e)},t.markUpdateMethod=function(e,n){Une(e).updateMethod=n},t.protoInitialize=function(){var e=t.prototype;e.type="chart"}(),t}();function R9(t,e,n){t&&x1(t)&&(e==="emphasis"?ad:od)(t,n)}function P9(t,e,n){var r=Qp(t,e),s=e&&e.highlightKey!=null?hNe(e.highlightKey):null;r!=null?de(In(r),function(i){R9(t.getItemGraphicEl(i),n,s)}):t.eachItemGraphicEl(function(i){R9(i,n,s)})}r6(On);HC(On);function Rje(t){return Dje(t.model)}function Pje(t){var e=t.model,n=t.ecModel,r=t.api,s=t.payload,i=e.pipelineContext.progressiveRender,a=t.view,o=s&&Une(s).updateMethod,l=i?"incrementalPrepareRender":o&&a[o]?o:"render";return l!=="render"&&a[l](e,n,r,s),Ije[l]}var Ije={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},Ik="\0__throttleOriginMethod",I9="\0__throttleRate",O9="\0__throttleType";function E6(t,e,n){var r,s=0,i=0,a=null,o,l,d,c;e=e||0;function f(){i=new Date().getTime(),a=null,t.apply(l,d||[])}var p=function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];r=new Date().getTime(),l=this,d=h;var g=c||e,y=c||n;c=null,o=r-(y?s:i)-g,clearTimeout(a),y?a=setTimeout(f,g):o>=0?f():a=setTimeout(f,-o),s=r};return p.clear=function(){a&&(clearTimeout(a),a=null)},p.debounceNextCall=function(h){c=h},p}function Gg(t,e,n,r){var s=t[e];if(s){var i=s[Ik]||s,a=s[O9],o=s[I9];if(o!==n||a!==r){if(n==null||!r)return t[e]=i;s=t[e]=E6(i,n,r==="debounce"),s[Ik]=i,s[O9]=r,s[I9]=n}return s}}function C1(t,e){var n=t[e];n&&n[Ik]&&(n.clear&&n.clear(),t[e]=n[Ik])}var L9=ln(),V9={itemStyle:Zp(Kte,!0),lineStyle:Zp(Yte,!0)},Oje={lineStyle:"stroke",itemStyle:"fill"};function Hne(t,e){var n=t.visualStyleMapper||V9[e];return n||(console.warn("Unknown style type '"+e+"'."),V9.itemStyle)}function qne(t,e){var n=t.visualDrawType||Oje[e];return n||(console.warn("Unknown style type '"+e+"'."),"fill")}var Lje={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",s=t.getModel(r),i=Hne(t,r),a=i(s),o=s.getShallow("decal");o&&(n.setVisual("decal",o),o.dirty=!0);var l=qne(t,r),d=a[l],c=bt(d)?d:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||f){var p=t.getColorFromPalette(t.name,null,e.getSeriesCount());a[l]||(a[l]=p,n.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||bt(a.fill)?p:a.fill,a.stroke=a.stroke==="auto"||bt(a.stroke)?p:a.stroke}if(n.setVisual("style",a),n.setVisual("drawType",l),!e.isSeriesFiltered(t)&&c)return n.setVisual("colorFromPalette",!1),{dataEach:function(h,m){var g=t.getDataParams(m),y=Ne({},a);y[l]=c(g),h.setItemVisual(m,"style",y)}}}},Iv=new Tn,Vje={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!(t.ignoreStyleOnData||e.isSeriesFiltered(t))){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",s=Hne(t,r),i=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(a,o){var l=a.getRawDataItem(o);if(l&&l[r]){Iv.option=l[r];var d=s(Iv),c=a.ensureUniqueItemVisual(o,"style");Ne(c,d),Iv.option.decal&&(a.setItemVisual(o,"decal",Iv.option.decal),Iv.option.decal.dirty=!0),i in d&&a.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},Nje={performRawSeries:!0,overallReset:function(t){var e=mt();t.eachSeries(function(n){var r=n.getColorBy();if(!n.isColorBySeries()){var s=n.type+"-"+r,i=e.get(s);i||(i={},e.set(s,i)),L9(n).scope=i}}),t.eachSeries(function(n){if(!(n.isColorBySeries()||t.isSeriesFiltered(n))){var r=n.getRawData(),s={},i=n.getData(),a=L9(n).scope,o=n.visualStyleAccessPath||"itemStyle",l=qne(n,o);i.each(function(d){var c=i.getRawIndex(d);s[c]=d}),r.each(function(d){var c=s[d],f=i.getItemVisual(c,"colorFromPalette");if(f){var p=i.ensureUniqueItemVisual(c,"style"),h=r.getName(d)||d+"",m=r.count();p[l]=n.getColorFromPalette(h,a,m)}})}})}},a_=Math.PI;function jje(t,e){e=e||{},_t(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Tt,r=new on({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(r);var s=new dn({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),i=new on({style:{fill:"none"},textContent:s,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});n.add(i);var a;return e.showSpinner&&(a=new QC({shape:{startAngle:-a_/2,endAngle:-a_/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:a_*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:a_*3/2}).delay(300).start("circularInOut"),n.add(a)),n.resize=function(){var o=s.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,d=(t.getWidth()-l*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:l),c=t.getHeight()/2;e.showSpinner&&a.setShape({cx:d,cy:c}),i.setShape({x:d-l,y:c-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}var Wne=function(){function t(e,n,r,s){this._stageTaskMap=mt(),this.ecInstance=e,this.api=n,r=this._dataProcessorHandlers=r.slice(),s=this._visualHandlers=s.slice(),this._allHandlers=r.concat(s)}return t.prototype.restoreData=function(e,n){e.restoreData(n),this._stageTaskMap.each(function(r){var s=r.overallTask;s&&s.dirty()})},t.prototype.getPerformArgs=function(e,n){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),s=r.context,i=!n&&r.progressiveEnabled&&(!s||s.progressiveRender)&&e.__idxInPipeline>r.blockIndex,a=i?r.step:null,o=s&&s.modDataCount,l=o!=null?Math.ceil(o/a):null;return{step:a,modBy:l,modDataCount:o}}},t.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},t.prototype.updateStreamModes=function(e,n){var r=this._pipelineMap.get(e.uid),s=e.getData(),i=s.count(),a=r.progressiveEnabled&&n.incrementalPrepareRender&&i>=r.threshold,o=e.get("large")&&i>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?i:null;e.pipelineContext=r.context={progressiveRender:a,modDataCount:l,large:o}},t.prototype.restorePipelines=function(e){var n=this,r=n._pipelineMap=mt();e.eachSeries(function(s){var i=s.getProgressive(),a=s.uid;r.set(a,{id:a,head:null,tail:null,threshold:s.getProgressiveThreshold(),progressiveEnabled:i&&!(s.preventIncremental&&s.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),n._pipe(s,s.dataTask)})},t.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,n=this.api.getModel(),r=this.api;de(this._allHandlers,function(s){var i=e.get(s.uid)||e.set(s.uid,{}),a="";Ei(!(s.reset&&s.overallReset),a),s.reset&&this._createSeriesStageTask(s,i,n,r),s.overallReset&&this._createOverallStageTask(s,i,n,r)},this)},t.prototype.prepareView=function(e,n,r,s){var i=e.renderTask,a=i.context;a.model=n,a.ecModel=r,a.api=s,i.__block=!e.incrementalPrepareRender,this._pipe(n,i)},t.prototype.performDataProcessorTasks=function(e,n){this._performStageTasks(this._dataProcessorHandlers,e,n,{block:!0})},t.prototype.performVisualTasks=function(e,n,r){this._performStageTasks(this._visualHandlers,e,n,r)},t.prototype._performStageTasks=function(e,n,r,s){s=s||{};var i=!1,a=this;de(e,function(l,d){if(!(s.visualType&&s.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),f=c.seriesTaskMap,p=c.overallTask;if(p){var h,m=p.agentStubMap;m.each(function(y){o(s,y)&&(y.dirty(),h=!0)}),h&&p.dirty(),a.updatePayload(p,r);var g=a.getPerformArgs(p,s.block);m.each(function(y){y.perform(g)}),p.perform(g)&&(i=!0)}else f&&f.each(function(y,x){o(s,y)&&y.dirty();var _=a.getPerformArgs(y,s.block);_.skip=!l.performRawSeries&&n.isSeriesFiltered(y.context.model),a.updatePayload(y,r),y.perform(_)&&(i=!0)})}});function o(l,d){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(d.__pipeline.id))}this.unfinished=i||this.unfinished},t.prototype.performSeriesTasks=function(e){var n;e.eachSeries(function(r){n=r.dataTask.perform()||n}),this.unfinished=n||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(e){var n=e.tail;do{if(n.__block){e.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},t.prototype.updatePayload=function(e,n){n!=="remain"&&(e.context.payload=n)},t.prototype._createSeriesStageTask=function(e,n,r,s){var i=this,a=n.seriesTaskMap,o=n.seriesTaskMap=mt(),l=e.seriesType,d=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(c):l?r.eachRawSeriesByType(l,c):d&&d(r,s).each(c);function c(f){var p=f.uid,h=o.set(p,a&&a.get(p)||g0({plan:Hje,reset:qje,count:Gje}));h.context={model:f,ecModel:r,api:s,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:i},i._pipe(f,h)}},t.prototype._createOverallStageTask=function(e,n,r,s){var i=this,a=n.overallTask=n.overallTask||g0({reset:Fje});a.context={ecModel:r,api:s,overallReset:e.overallReset,scheduler:i};var o=a.agentStubMap,l=a.agentStubMap=mt(),d=e.seriesType,c=e.getTargetSeries,f=!0,p=!1,h="";Ei(!e.createOnAllSeries,h),d?r.eachRawSeriesByType(d,m):c?c(r,s).each(m):(f=!1,de(r.getSeries(),m));function m(g){var y=g.uid,x=l.set(y,o&&o.get(y)||(p=!0,g0({reset:Bje,onDirty:Uje})));x.context={model:g,overallProgress:f},x.agent=a,x.__block=f,i._pipe(g,x)}p&&a.dirty()},t.prototype._pipe=function(e,n){var r=e.uid,s=this._pipelineMap.get(r);!s.head&&(s.head=n),s.tail&&s.tail.pipe(n),s.tail=n,n.__idxInPipeline=s.count++,n.__pipeline=s},t.wrapStageHandler=function(e,n){return bt(e)&&(e={overallReset:e,seriesType:Yje(e)}),e.uid=zg("stageHandler"),n&&(e.visualType=n),e},t}();function Fje(t){t.overallReset(t.ecModel,t.api,t.payload)}function Bje(t){return t.overallProgress&&zje}function zje(){this.agent.dirty(),this.getDownstream().dirty()}function Uje(){this.agent&&this.agent.dirty()}function Hje(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function qje(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=In(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?We(e,function(n,r){return Gne(r)}):Wje}var Wje=Gne(0);function Gne(t){return function(e,n){var r=n.data,s=n.resetDefines[t];if(s&&s.dataEach)for(var i=e.start;i<e.end;i++)s.dataEach(r,i);else s&&s.progress&&s.progress(e,r)}}function Gje(t){return t.data.count()}function Yje(t){Ok=null;try{t(A1,Yne)}catch(e){}return Ok}var A1={},Yne={},Ok;Kne(A1,C6);Kne(Yne,bne);A1.eachSeriesByType=A1.eachRawSeriesByType=function(t){Ok=t};A1.eachComponent=function(t){t.mainType==="series"&&t.subType&&(Ok=t.subType)};function Kne(t,e){for(var n in e.prototype)t[n]=Vr}var N9=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Kje={color:N9,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],N9]};var Ws="#B9B8CE",j9="#100C2A",o_=function(){return{axisLine:{lineStyle:{color:Ws}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},F9=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Xne={darkMode:!0,color:F9,backgroundColor:j9,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Ws},pageTextStyle:{color:Ws}},textStyle:{color:Ws},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Ws}},dataZoom:{borderColor:"#71708A",textStyle:{color:Ws},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Ws}},timeline:{lineStyle:{color:Ws},label:{color:Ws},controlStyle:{color:Ws,borderColor:Ws}},calendar:{itemStyle:{color:j9},dayLabel:{color:Ws},monthLabel:{color:Ws},yearLabel:{color:Ws}},timeAxis:o_(),logAxis:o_(),valueAxis:o_(),categoryAxis:o_(),line:{symbol:"circle"},graph:{color:F9},gauge:{title:{color:Ws},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Ws},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Xne.categoryAxis.splitLine.show=!1;var Xje=function(){function t(){}return t.prototype.normalizeQuery=function(e){var n={},r={},s={};if(ot(e)){var i=Sl(e);n.mainType=i.main||null,n.subType=i.sub||null}else{var a=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};de(e,function(l,d){for(var c=!1,f=0;f<a.length;f++){var p=a[f],h=d.lastIndexOf(p);if(h>0&&h===d.length-p.length){var m=d.slice(0,h);m!=="data"&&(n.mainType=m,n[p.toLowerCase()]=l,c=!0)}}o.hasOwnProperty(d)&&(r[d]=l,c=!0),c||(s[d]=l)})}return{cptQuery:n,dataQuery:r,otherQuery:s}},t.prototype.filter=function(e,n){var r=this.eventInfo;if(!r)return!0;var s=r.targetEl,i=r.packedEvent,a=r.model,o=r.view;if(!a||!o)return!0;var l=n.cptQuery,d=n.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(d,i,"name")&&c(d,i,"dataIndex")&&c(d,i,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,n.otherQuery,s,i));function c(f,p,h,m){return f[h]==null||p[m||h]===f[h]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),fE=["symbol","symbolSize","symbolRotate","symbolOffset"],B9=fE.concat(["symbolKeepAspect"]),Qje={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var r={},s={},i=!1,a=0;a<fE.length;a++){var o=fE[a],l=t.get(o);bt(l)?(i=!0,s[o]=l):r[o]=l}if(r.symbol=r.symbol||t.defaultSymbol,n.setVisual(Ne({legendIcon:t.legendIcon||r.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},r)),e.isSeriesFiltered(t))return;var d=sn(s);function c(f,p){for(var h=t.getRawValue(p),m=t.getDataParams(p),g=0;g<d.length;g++){var y=d[g];f.setItemVisual(p,y,s[y](h,m))}}return{dataEach:i?c:null}}},Zje={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.hasSymbolVisual||e.isSeriesFiltered(t))return;var n=t.getData();function r(s,i){for(var a=s.getItemModel(i),o=0;o<B9.length;o++){var l=B9[o],d=a.getShallow(l,!0);d!=null&&s.setItemVisual(i,l,d)}}return{dataEach:n.hasItemOption?r:null}}};function D6(t,e,n){switch(n){case"color":var r=t.getItemVisual(e,"style");return r[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n)}}function Pb(t,e){switch(e){case"color":var n=t.getVisual("style");return n[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}function Qne(t,e,n,r){switch(n){case"color":var s=t.ensureUniqueItemVisual(e,"style");s[t.getVisual("drawType")]=r,t.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(e,n,r);break}}function Zne(t,e){function n(r,s){var i=[];return r.eachComponent({mainType:"series",subType:t,query:s},function(a){i.push(a.seriesIndex)}),i}de([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(r){e(r[0],function(s,i,a){s=Ne({},s),a.dispatchAction(Ne(s,{type:r[1],seriesIndex:n(i,s)}))})})}function Yh(t,e,n,r,s){var i=t+e;n.isSilent(i)||r.eachComponent({mainType:"series",subType:"pie"},function(a){for(var o=a.seriesIndex,l=a.option.selectedMap,d=s.selected,c=0;c<d.length;c++)if(d[c].seriesIndex===o){var f=a.getData(),p=Qp(f,s.fromActionPayload);n.trigger(i,{type:i,seriesId:a.id,name:He(p)?f.getName(p[0]):f.getName(p),selected:ot(l)?l:Ne({},l)})}})}function Jje(t,e,n){t.on("selectchanged",function(r){var s=n.getModel();r.isFromClick?(Yh("map","selectchanged",e,s,r),Yh("pie","selectchanged",e,s,r)):r.fromAction==="select"?(Yh("map","selected",e,s,r),Yh("pie","selected",e,s,r)):r.fromAction==="unselect"&&(Yh("map","unselected",e,s,r),Yh("pie","unselected",e,s,r))})}function up(t,e,n){for(var r;t&&!(e(t)&&(r=t,n));)t=t.__hostTarget||t.parent;return r}var e9e=Math.round(Math.random()*9),t9e=typeof Object.defineProperty=="function",n9e=function(){function t(){this._id="__ec_inner_"+e9e++}return t.prototype.get=function(e){return this._guard(e)[this._id]},t.prototype.set=function(e,n){var r=this._guard(e);return t9e?Object.defineProperty(r,this._id,{value:n,enumerable:!1,configurable:!0}):r[this._id]=n,this},t.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},t.prototype.has=function(e){return!!this._guard(e)[this._id]},t.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},t}(),r9e=en.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,s=e.width/2,i=e.height/2;t.moveTo(n,r-i),t.lineTo(n+s,r+i),t.lineTo(n-s,r+i),t.closePath()}}),s9e=en.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,s=e.width/2,i=e.height/2;t.moveTo(n,r-i),t.lineTo(n+s,r),t.lineTo(n,r+i),t.lineTo(n-s,r),t.closePath()}}),i9e=en.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,s=e.width/5*3,i=Math.max(s,e.height),a=s/2,o=a*a/(i-a),l=r-i+a+o,d=Math.asin(o/a),c=Math.cos(d)*a,f=Math.sin(d),p=Math.cos(d),h=a*.6,m=a*.7;t.moveTo(n-c,l+o),t.arc(n,l,a,Math.PI-d,Math.PI*2+d),t.bezierCurveTo(n+c-f*h,l+o+p*h,n,r-m,n,r),t.bezierCurveTo(n,r-m,n-c+f*h,l+o+p*h,n-c,l+o),t.closePath()}}),a9e=en.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,r=e.width,s=e.x,i=e.y,a=r/3*2;t.moveTo(s,i),t.lineTo(s+a,i+n),t.lineTo(s,i+n/4*3),t.lineTo(s-a,i+n),t.lineTo(s,i),t.closePath()}}),o9e={line:ls,rect:on,roundRect:on,square:on,circle:yd,diamond:s9e,pin:i9e,arrow:a9e,triangle:r9e},l9e={line:function(t,e,n,r,s){s.x1=t,s.y1=e+r/2,s.x2=t+n,s.y2=e+r/2},rect:function(t,e,n,r,s){s.x=t,s.y=e,s.width=n,s.height=r},roundRect:function(t,e,n,r,s){s.x=t,s.y=e,s.width=n,s.height=r,s.r=Math.min(n,r)/4},square:function(t,e,n,r,s){var i=Math.min(n,r);s.x=t,s.y=e,s.width=i,s.height=i},circle:function(t,e,n,r,s){s.cx=t+n/2,s.cy=e+r/2,s.r=Math.min(n,r)/2},diamond:function(t,e,n,r,s){s.cx=t+n/2,s.cy=e+r/2,s.width=n,s.height=r},pin:function(t,e,n,r,s){s.x=t+n/2,s.y=e+r/2,s.width=n,s.height=r},arrow:function(t,e,n,r,s){s.x=t+n/2,s.y=e+r/2,s.width=n,s.height=r},triangle:function(t,e,n,r,s){s.cx=t+n/2,s.cy=e+r/2,s.width=n,s.height=r}},Lk={};de(o9e,function(t,e){Lk[e]=new t});var u9e=en.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var r=Ck(t,e,n),s=this.shape;return s&&s.symbolType==="pin"&&e.position==="inside"&&(r.y=n.y+n.height*.4),r},buildPath:function(t,e,n){var r=e.symbolType;if(r!=="none"){var s=Lk[r];s||(r="rect",s=Lk[r]),l9e[r](e.x,e.y,e.width,e.height,s.shape),s.buildPath(t,s.shape,n)}}});function d9e(t,e){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=t:n.fill=t,this.markRedraw()}}function Wr(t,e,n,r,s,i,a){var o=t.indexOf("empty")===0;o&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var l;return t.indexOf("image://")===0?l=Fte(t.slice(8),new Gt(e,n,r,s),a?"center":"cover"):t.indexOf("path://")===0?l=ZC(t.slice(7),{},new Gt(e,n,r,s),a?"center":"cover"):l=new u9e({shape:{symbolType:t,x:e,y:n,width:r,height:s}}),l.__isEmptyBrush=o,l.setColor=d9e,i&&l.setColor(i),l}function Yg(t){return He(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function yh(t,e){if(t!=null)return He(t)||(t=[t,t]),[tt(t[0],e[0])||0,tt(Ot(t[1],t[0]),e[1])||0]}function dp(t){return isFinite(t)}function c9e(t,e,n){var r=e.x==null?0:e.x,s=e.x2==null?1:e.x2,i=e.y==null?0:e.y,a=e.y2==null?0:e.y2;e.global||(r=r*n.width+n.x,s=s*n.width+n.x,i=i*n.height+n.y,a=a*n.height+n.y),r=dp(r)?r:0,s=dp(s)?s:1,i=dp(i)?i:0,a=dp(a)?a:0;var o=t.createLinearGradient(r,i,s,a);return o}function f9e(t,e,n){var r=n.width,s=n.height,i=Math.min(r,s),a=e.x==null?.5:e.x,o=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(a=a*r+n.x,o=o*s+n.y,l=l*i),a=dp(a)?a:.5,o=dp(o)?o:.5,l=l>=0&&dp(l)?l:.5;var d=t.createRadialGradient(a,o,0,a,o,l);return d}function pE(t,e,n){for(var r=e.type==="radial"?f9e(t,e,n):c9e(t,e,n),s=e.colorStops,i=0;i<s.length;i++)r.addColorStop(s[i].offset,s[i].color);return r}function p9e(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function l_(t){return parseInt(t,10)}function Mm(t,e,n){var r=["width","height"][e],s=["clientWidth","clientHeight"][e],i=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(n[r]!=null&&n[r]!=="auto")return parseFloat(n[r]);var o=document.defaultView.getComputedStyle(t);return(t[s]||l_(o[r])||l_(t.style[r]))-(l_(o[i])||0)-(l_(o[a])||0)|0}function h9e(t,e){return!t||t==="solid"||!(e>0)?null:t==="dashed"?[4*e,2*e]:t==="dotted"?[e]:hn(t)?[t]:He(t)?t:null}function R6(t){var e=t.style,n=e.lineDash&&e.lineWidth>0&&h9e(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(n){var s=e.strokeNoScale&&t.getLineScale?t.getLineScale():1;s&&s!==1&&(n=We(n,function(i){return i/s}),r/=s)}return[n,r]}var m9e=new ql(!0);function Vk(t){var e=t.stroke;return!(e==null||e==="none"||!(t.lineWidth>0))}function z9(t){return typeof t=="string"&&t!=="none"}function Nk(t){var e=t.fill;return e!=null&&e!=="none"}function U9(t,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function H9(t,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function hE(t,e,n){var r=s6(e.image,e.__image,n);if(qC(r)){var s=t.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&s&&s.setTransform){var i=new DOMMatrix;i.translateSelf(e.x||0,e.y||0),i.rotateSelf(0,0,(e.rotation||0)*Cw),i.scaleSelf(e.scaleX||1,e.scaleY||1),s.setTransform(i)}return s}}function g9e(t,e,n,r){var s,i=Vk(n),a=Nk(n),o=n.strokePercent,l=o<1,d=!e.path;(!e.silent||l)&&d&&e.createPathProxy();var c=e.path||m9e,f=e.__dirty;if(!r){var p=n.fill,h=n.stroke,m=a&&!!p.colorStops,g=i&&!!h.colorStops,y=a&&!!p.image,x=i&&!!h.image,_=void 0,k=void 0,w=void 0,S=void 0,C=void 0;(m||g)&&(C=e.getBoundingRect()),m&&(_=f?pE(t,p,C):e.__canvasFillGradient,e.__canvasFillGradient=_),g&&(k=f?pE(t,h,C):e.__canvasStrokeGradient,e.__canvasStrokeGradient=k),y&&(w=f||!e.__canvasFillPattern?hE(t,p,e):e.__canvasFillPattern,e.__canvasFillPattern=w),x&&(S=f||!e.__canvasStrokePattern?hE(t,h,e):e.__canvasStrokePattern,e.__canvasStrokePattern=w),m?t.fillStyle=_:y&&(w?t.fillStyle=w:a=!1),g?t.strokeStyle=k:x&&(S?t.strokeStyle=S:i=!1)}var A=e.getGlobalScale();c.setScale(A[0],A[1],e.segmentIgnoreThreshold);var M,E;t.setLineDash&&n.lineDash&&(s=R6(e),M=s[0],E=s[1]);var P=!0;(d||f&bm)&&(c.setDPR(t.dpr),l?c.setContext(null):(c.setContext(t),P=!1),c.reset(),e.buildPath(c,e.shape,r),c.toStatic(),e.pathUpdated()),P&&c.rebuildPath(t,l?o:1),M&&(t.setLineDash(M),t.lineDashOffset=E),r||(n.strokeFirst?(i&&H9(t,n),a&&U9(t,n)):(a&&U9(t,n),i&&H9(t,n))),M&&t.setLineDash([])}function v9e(t,e,n){var r=e.__image=s6(n.image,e.__image,e,e.onload);if(!(!r||!qC(r))){var s=n.x||0,i=n.y||0,a=e.getWidth(),o=e.getHeight(),l=r.width/r.height;if(a==null&&o!=null?a=o*l:o==null&&a!=null?o=a/l:a==null&&o==null&&(a=r.width,o=r.height),n.sWidth&&n.sHeight){var d=n.sx||0,c=n.sy||0;t.drawImage(r,d,c,n.sWidth,n.sHeight,s,i,a,o)}else if(n.sx&&n.sy){var d=n.sx,c=n.sy,f=a-d,p=o-c;t.drawImage(r,d,c,f,p,s,i,a,o)}else t.drawImage(r,s,i,a,o)}}function y9e(t,e,n){var r,s=n.text;if(s!=null&&(s+=""),s){t.font=n.font||Ic,t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var i=void 0,a=void 0;t.setLineDash&&n.lineDash&&(r=R6(e),i=r[0],a=r[1]),i&&(t.setLineDash(i),t.lineDashOffset=a),n.strokeFirst?(Vk(n)&&t.strokeText(s,n.x,n.y),Nk(n)&&t.fillText(s,n.x,n.y)):(Nk(n)&&t.fillText(s,n.x,n.y),Vk(n)&&t.strokeText(s,n.x,n.y)),i&&t.setLineDash([])}}var q9=["shadowBlur","shadowOffsetX","shadowOffsetY"],W9=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Jne(t,e,n,r,s){var i=!1;if(!r&&(n=n||{},e===n))return!1;if(r||e.opacity!==n.opacity){qi(t,s),i=!0;var a=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(a)?Dp.opacity:a}(r||e.blend!==n.blend)&&(i||(qi(t,s),i=!0),t.globalCompositeOperation=e.blend||Dp.blend);for(var o=0;o<q9.length;o++){var l=q9[o];(r||e[l]!==n[l])&&(i||(qi(t,s),i=!0),t[l]=t.dpr*(e[l]||0))}return(r||e.shadowColor!==n.shadowColor)&&(i||(qi(t,s),i=!0),t.shadowColor=e.shadowColor||Dp.shadowColor),i}function G9(t,e,n,r,s){var i=T1(e,s.inHover),a=r?null:n&&T1(n,s.inHover)||{};if(i===a)return!1;var o=Jne(t,i,a,r,s);if((r||i.fill!==a.fill)&&(o||(qi(t,s),o=!0),z9(i.fill)&&(t.fillStyle=i.fill)),(r||i.stroke!==a.stroke)&&(o||(qi(t,s),o=!0),z9(i.stroke)&&(t.strokeStyle=i.stroke)),(r||i.opacity!==a.opacity)&&(o||(qi(t,s),o=!0),t.globalAlpha=i.opacity==null?1:i.opacity),e.hasStroke()){var l=i.lineWidth,d=l/(i.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==d&&(o||(qi(t,s),o=!0),t.lineWidth=d)}for(var c=0;c<W9.length;c++){var f=W9[c],p=f[0];(r||i[p]!==a[p])&&(o||(qi(t,s),o=!0),t[p]=i[p]||f[1])}return o}function b9e(t,e,n,r,s){return Jne(t,T1(e,s.inHover),n&&T1(n,s.inHover),r,s)}function ere(t,e){var n=e.transform,r=t.dpr||1;n?t.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):t.setTransform(r,0,0,r,0,0)}function x9e(t,e,n){for(var r=!1,s=0;s<t.length;s++){var i=t[s];r=r||i.isZeroArea(),ere(e,i),e.beginPath(),i.buildPath(e,i.shape),e.clip()}n.allClipped=r}function _9e(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]:!(!t&&!e)}var Y9=1,K9=2,X9=3,Q9=4;function w9e(t){var e=Nk(t),n=Vk(t);return!(t.lineDash||!(+e^+n)||e&&typeof t.fill!="string"||n&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function qi(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function T1(t,e){return e&&t.__hoverStyle||t.style}function tre(t,e){cp(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function cp(t,e,n,r){var s=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){e.__dirty&=~ua,e.__isRendered=!1;return}var i=e.__clipPaths,a=n.prevElClipPaths,o=!1,l=!1;if((!a||p9e(i,a))&&(a&&a.length&&(qi(t,n),t.restore(),l=o=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),i&&i.length&&(qi(t,n),t.save(),x9e(i,t,n),o=!0),n.prevElClipPaths=i),n.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var d=n.prevEl;d||(l=o=!0);var c=e instanceof en&&e.autoBatch&&w9e(e.style);o||_9e(s,d.transform)?(qi(t,n),ere(t,e)):c||qi(t,n);var f=T1(e,n.inHover);e instanceof en?(n.lastDrawType!==Y9&&(l=!0,n.lastDrawType=Y9),G9(t,e,d,l,n),(!c||!n.batchFill&&!n.batchStroke)&&t.beginPath(),g9e(t,e,f,c),c&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):e instanceof gg?(n.lastDrawType!==X9&&(l=!0,n.lastDrawType=X9),G9(t,e,d,l,n),y9e(t,e,f)):e instanceof Cs?(n.lastDrawType!==K9&&(l=!0,n.lastDrawType=K9),b9e(t,e,d,l,n),v9e(t,e,f)):e.getTemporalDisplayables&&(n.lastDrawType!==Q9&&(l=!0,n.lastDrawType=Q9),k9e(t,e,n)),c&&r&&qi(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}function k9e(t,e,n){var r=e.getDisplayables(),s=e.getTemporalDisplayables();t.save();var i={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},a,o;for(a=e.getCursor(),o=r.length;a<o;a++){var l=r[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),cp(t,l,i,a===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),i.prevEl=l}for(var d=0,c=s.length;d<c;d++){var l=s[d];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),cp(t,l,i,d===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),i.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}var KT=new n9e,Z9=new kb(100),J9=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function bg(t,e){if(t==="none")return null;var n=e.getDevicePixelRatio(),r=e.getZr(),s=r.painter.type==="svg";t.dirty&&KT.delete(t);var i=KT.get(t);if(i)return i;var a=_t(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=a.rotation,o.scaleX=o.scaleY=s?1:1/n,KT.set(t,o),t.dirty=!1,o;function l(d){for(var c=[n],f=!0,p=0;p<J9.length;++p){var h=a[J9[p]];if(h!=null&&!He(h)&&!ot(h)&&!hn(h)&&typeof h!="boolean"){f=!1;break}c.push(h)}var m;if(f){m=c.join(",")+(s?"-svg":"");var g=Z9.get(m);g&&(s?d.svgElement=g:d.image=g)}var y=rre(a.dashArrayX),x=S9e(a.dashArrayY),_=nre(a.symbol),k=C9e(y),w=sre(x),S=!s&&Oc.createCanvas(),C=s&&{tag:"g",attrs:{},key:"dcl",children:[]},A=E(),M;S&&(S.width=A.width*n,S.height=A.height*n,M=S.getContext("2d")),P(),f&&Z9.put(m,S||C),d.image=S,d.svgElement=C,d.svgWidth=A.width,d.svgHeight=A.height;function E(){for(var I=1,F=0,L=k.length;F<L;++F)I=gj(I,k[F]);for(var z=1,F=0,L=_.length;F<L;++F)z=gj(z,_[F].length);I*=z;var N=w*k.length*_.length;return{width:Math.max(1,Math.min(I,a.maxTileWidth)),height:Math.max(1,Math.min(N,a.maxTileHeight))}}function P(){M&&(M.clearRect(0,0,S.width,S.height),a.backgroundColor&&(M.fillStyle=a.backgroundColor,M.fillRect(0,0,S.width,S.height)));for(var I=0,F=0;F<x.length;++F)I+=x[F];if(I<=0)return;for(var L=-w,z=0,N=0,q=0;L<A.height;){if(z%2===0){for(var V=N/2%_.length,O=0,X=0,j=0;O<A.width*2;){for(var U=0,F=0;F<y[q].length;++F)U+=y[q][F];if(U<=0)break;if(X%2===0){var G=(1-a.symbolSize)*.5,ee=O+y[q][X]*G,ie=L+x[z]*G,ne=y[q][X]*a.symbolSize,ce=x[z]*a.symbolSize,oe=j/2%_[V].length;re(ee,ie,ne,ce,_[V][oe])}O+=y[q][X],++j,++X,X===y[q].length&&(X=0)}++q,q===y.length&&(q=0)}L+=x[z],++N,++z,z===x.length&&(z=0)}function re(te,K,le,H,Y){var B=s?1:n,ae=Wr(Y,te*B,K*B,le*B,H*B,a.color,a.symbolKeepAspect);if(s){var be=r.painter.renderOneToVNode(ae);be&&C.children.push(be)}else tre(M,ae)}}}}function nre(t){if(!t||t.length===0)return[["rect"]];if(ot(t))return[[t]];for(var e=!0,n=0;n<t.length;++n)if(!ot(t[n])){e=!1;break}if(e)return nre([t]);for(var r=[],n=0;n<t.length;++n)ot(t[n])?r.push([t[n]]):r.push(t[n]);return r}function rre(t){if(!t||t.length===0)return[[0,0]];if(hn(t)){var e=Math.ceil(t);return[[e,e]]}for(var n=!0,r=0;r<t.length;++r)if(!hn(t[r])){n=!1;break}if(n)return rre([t]);for(var s=[],r=0;r<t.length;++r)if(hn(t[r])){var e=Math.ceil(t[r]);s.push([e,e])}else{var e=We(t[r],function(o){return Math.ceil(o)});e.length%2===1?s.push(e.concat(e)):s.push(e)}return s}function S9e(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(hn(t)){var e=Math.ceil(t);return[e,e]}var n=We(t,function(r){return Math.ceil(r)});return t.length%2?n.concat(n):n}function C9e(t){return We(t,function(e){return sre(e)})}function sre(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2===1?e*2:e}function A9e(t,e){t.eachRawSeries(function(n){if(!t.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(a){var o=r.getItemVisual(a,"decal");if(o){var l=r.ensureUniqueItemVisual(a,"style");l.decal=bg(o,e)}});var s=r.getVisual("decal");if(s){var i=r.getVisual("style");i.decal=bg(s,e)}}})}var sl=new co,ire={};function T9e(t,e){ire[t]=e}function $9e(t){return ire[t]}var M9e=1,E9e=800,D9e=900,R9e=1e3,P9e=2e3,I9e=5e3,are=1e3,O9e=1100,P6=2e3,ore=3e3,L9e=4e3,dA=4500,V9e=4600,N9e=5e3,j9e=6e3,lre=7e3,F9e={PROCESSOR:{FILTER:R9e,SERIES_FILTER:E9e,STATISTIC:I9e},VISUAL:{LAYOUT:are,PROGRESSIVE_LAYOUT:O9e,GLOBAL:P6,CHART:ore,POST_CHART_LAYOUT:V9e,COMPONENT:L9e,BRUSH:N9e,CHART_ITEM:dA,ARIA:j9e,DECAL:lre}},qs="__flagInMainProcess",Ni="__pendingUpdate",XT="__needsUpdateStatus",eF=/^[a-zA-Z0-9_]+$/;function ure(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.isDisposed()){this.id;return}return cre(this,t,e)}}function dre(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return cre(this,t,e)}}function cre(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),co.prototype[e].apply(t,n)}var fre=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(co),pre=fre.prototype;pre.on=dre("on");pre.off=dre("off");var Kh,QT,u_,Md,ZT,JT,e3,Ov,Lv,tF,nF,t3,rF,d_,sF,Ca,iF,B9e=function(t){Te(e,t);function e(n,r,s){var i=t.call(this,new Xje)||this;i._chartsViews=[],i._chartsMap={},i._componentsViews=[],i._componentsMap={},i._pendingActions=[],s=s||{},ot(r)&&(r=hre[r]),i._dom=n;var a="canvas",o="auto",l=!1;s.ssr&&V8e(function(p){var h=Et(p),m=h.dataIndex;if(m!=null){var g=mt();return g.set("series_index",h.seriesIndex),g.set("data_index",m),h.ssrType&&g.set("ssr_type",h.ssrType),g}});var d=i._zr=fj(n,{renderer:s.renderer||a,devicePixelRatio:s.devicePixelRatio,width:s.width,height:s.height,ssr:s.ssr,useDirtyRect:Ot(s.useDirtyRect,l),useCoarsePointer:Ot(s.useCoarsePointer,o),pointerSize:s.pointerSize});i._ssr=s.ssr,i._throttledZrFlush=E6(ct(d.flush,d),17),r=kt(r),r&&_ne(r,!0),i._theme=r,i._locale=o7e(s.locale||Xte),i._coordSysMgr=new Rb;var c=i._api=sF(i);function f(p,h){return p.__prio-h.__prio}return $w(Bk,f),$w(mE,f),i._scheduler=new Wne(i,c,mE,Bk),i._messageCenter=new fre,i._initEvents(),i.resize=ct(i.resize,i),d.animation.on("frame",i._onframe,i),tF(d,i),nF(d,i),vk(i),i}return e.prototype._onframe=function(){if(!this._disposed){iF(this);var n=this._scheduler;if(this[Ni]){var r=this[Ni].silent;this[qs]=!0;try{Kh(this),Md.update.call(this,null,this[Ni].updateParams)}catch(l){throw this[qs]=!1,this[Ni]=null,l}this._zr.flush(),this[qs]=!1,this[Ni]=null,Ov.call(this,r),Lv.call(this,r)}else if(n.unfinished){var s=M9e,i=this._model,a=this._api;n.unfinished=!1;do{var o=+new Date;n.performSeriesTasks(i),n.performDataProcessorTasks(i),JT(this,i),n.performVisualTasks(i),d_(this,this._model,a,"remain",{}),s-=+new Date-o}while(s>0&&n.unfinished);n.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(n,r,s){if(!this[qs]){if(this._disposed){this.id;return}var i,a,o;if(wt(r)&&(s=r.lazyUpdate,i=r.silent,a=r.replaceMerge,o=r.transition,r=r.notMerge),this[qs]=!0,!this._model||r){var l=new R7e(this._api),d=this._theme,c=this._model=new C6;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,d,this._locale,l)}this._model.setOption(n,{replaceMerge:a},gE);var f={seriesTransition:o,optionChanged:!0};if(s)this[Ni]={silent:i,updateParams:f},this[qs]=!1,this.getZr().wakeUp();else{try{Kh(this),Md.update.call(this,null,f)}catch(p){throw this[Ni]=null,this[qs]=!1,p}this._ssr||this._zr.flush(),this[Ni]=null,this[qs]=!1,Ov.call(this,i),Lv.call(this,i)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||tn.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},e.prototype.renderToCanvas=function(n){n=n||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(n){n=n||{};var r=this._zr.painter;return r.renderToString({useViewBox:n.useViewBox})},e.prototype.getSvgDataURL=function(){if(tn.svgSupported){var n=this._zr,r=n.storage.getDisplayList();return de(r,function(s){s.stopAnimation(null,!0)}),n.painter.toDataURL()}},e.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var r=n.excludeComponents,s=this._model,i=[],a=this;de(r,function(l){s.eachComponent({mainType:l},function(d){var c=a._componentsMap[d.__viewId];c.group.ignore||(i.push(c),c.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return de(i,function(l){l.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var r=n.type==="svg",s=this.group,i=Math.min,a=Math.max,o=1/0;if(U9e[s]){var l=o,d=o,c=-o,f=-o,p=[],h=n&&n.pixelRatio||this.getDevicePixelRatio();de(aF,function(k,w){if(k.group===s){var S=r?k.getZr().painter.getSvgDom().innerHTML:k.renderToCanvas(kt(n)),C=k.getDom().getBoundingClientRect();l=i(C.left,l),d=i(C.top,d),c=a(C.right,c),f=a(C.bottom,f),p.push({dom:S,left:C.left,top:C.top})}}),l*=h,d*=h,c*=h,f*=h;var m=c-l,g=f-d,y=Oc.createCanvas(),x=fj(y,{renderer:r?"svg":"canvas"});if(x.resize({width:m,height:g}),r){var _="";return de(p,function(k){var w=k.left-l,S=k.top-d;_+='<g transform="translate('+w+","+S+')">'+k.dom+"</g>"}),x.painter.getSvgRoot().innerHTML=_,n.connectedBackgroundColor&&x.painter.setBackgroundColor(n.connectedBackgroundColor),x.refreshImmediately(),x.painter.toDataURL()}else return n.connectedBackgroundColor&&x.add(new on({shape:{x:0,y:0,width:m,height:g},style:{fill:n.connectedBackgroundColor}})),de(p,function(k){var w=new Cs({style:{x:k.left*h-l,y:k.top*h-d,image:k.dom}});x.add(w)}),x.refreshImmediately(),y.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},e.prototype.convertToPixel=function(n,r){return ZT(this,"convertToPixel",n,r)},e.prototype.convertFromPixel=function(n,r){return ZT(this,"convertFromPixel",n,r)},e.prototype.containPixel=function(n,r){if(this._disposed){this.id;return}var s=this._model,i,a=c0(s,n);return de(a,function(o,l){l.indexOf("Models")>=0&&de(o,function(d){var c=d.coordinateSystem;if(c&&c.containPoint)i=i||!!c.containPoint(r);else if(l==="seriesModels"){var f=this._chartsMap[d.__viewId];f&&f.containPoint&&(i=i||f.containPoint(r,d))}},this)},this),!!i},e.prototype.getVisual=function(n,r){var s=this._model,i=c0(s,n,{defaultMainType:"series"}),a=i.seriesModel,o=a.getData(),l=i.hasOwnProperty("dataIndexInside")?i.dataIndexInside:i.hasOwnProperty("dataIndex")?o.indexOfRawIndex(i.dataIndex):null;return l!=null?D6(o,l,r):Pb(o,r)},e.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},e.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},e.prototype._initEvents=function(){var n=this;de(z9e,function(r){var s=function(i){var a=n.getModel(),o=i.target,l,d=r==="globalout";if(d?l={}:o&&up(o,function(m){var g=Et(m);if(g&&g.dataIndex!=null){var y=g.dataModel||a.getSeriesByIndex(g.seriesIndex);return l=y&&y.getDataParams(g.dataIndex,g.dataType,o)||{},!0}else if(g.eventData)return l=Ne({},g.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var p=c&&f!=null&&a.getComponent(c,f),h=p&&n[p.mainType==="series"?"_chartsMap":"_componentsMap"][p.__viewId];l.event=i,l.type=r,n._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:p,view:h},n.trigger(r,l)}};s.zrEventfulCallAtLast=!0,n._zr.on(r,s,n)}),de(Fk,function(r,s){n._messageCenter.on(s,function(i){this.trigger(s,i)},n)}),de(["selectchanged"],function(r){n._messageCenter.on(r,function(s){this.trigger(r,s)},n)}),Jje(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&rVe(this.getDom(),H9e,"");var r=this,s=r._api,i=r._model;de(r._componentsViews,function(a){a.dispose(i,s)}),de(r._chartsViews,function(a){a.dispose(i,s)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete aF[r.id]},e.prototype.resize=function(n){if(!this[qs]){if(this._disposed){this.id;return}this._zr.resize(n);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var s=r.resetOption("media"),i=n&&n.silent;this[Ni]&&(i==null&&(i=this[Ni].silent),s=!0,this[Ni]=null),this[qs]=!0;try{s&&Kh(this),Md.update.call(this,{type:"resize",animation:Ne({duration:0},n&&n.animation)})}catch(a){throw this[qs]=!1,a}this[qs]=!1,Ov.call(this,i),Lv.call(this,i)}}},e.prototype.showLoading=function(n,r){if(this._disposed){this.id;return}if(wt(n)&&(r=n,n=""),n=n||"default",this.hideLoading(),!!vE[n]){var s=vE[n](this._api,r),i=this._zr;this._loadingFX=s,i.add(s)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(n){var r=Ne({},n);return r.type=Fk[n.type],r},e.prototype.dispatchAction=function(n,r){if(this._disposed){this.id;return}if(wt(r)||(r={silent:!!r}),!!jk[n.type]&&this._model){if(this[qs]){this._pendingActions.push(n);return}var s=r.silent;e3.call(this,n,s);var i=r.flush;i?this._zr.flush():i!==!1&&tn.browser.weChat&&this._throttledZrFlush(),Ov.call(this,s),Lv.call(this,s)}},e.prototype.updateLabelLayout=function(){sl.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(n){if(this._disposed){this.id;return}var r=n.seriesIndex,s=this.getModel(),i=s.getSeriesByIndex(r);i.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Kh=function(f){var p=f._scheduler;p.restorePipelines(f._model),p.prepareStageTasks(),QT(f,!0),QT(f,!1),p.plan()},QT=function(f,p){for(var h=f._model,m=f._scheduler,g=p?f._componentsViews:f._chartsViews,y=p?f._componentsMap:f._chartsMap,x=f._zr,_=f._api,k=0;k<g.length;k++)g[k].__alive=!1;p?h.eachComponent(function(C,A){C!=="series"&&w(A)}):h.eachSeries(w);function w(C){var A=C.__requireNewView;C.__requireNewView=!1;var M="_ec_"+C.id+"_"+C.type,E=!A&&y[M];if(!E){var P=Sl(C.type),I=p?vr.getClass(P.main,P.sub):On.getClass(P.sub);E=new I,E.init(h,_),y[M]=E,g.push(E),x.add(E.group)}C.__viewId=E.__id=M,E.__alive=!0,E.__model=C,E.group.__ecComponentInfo={mainType:C.mainType,index:C.componentIndex},!p&&m.prepareView(E,C,h,_)}for(var k=0;k<g.length;){var S=g[k];S.__alive?k++:(!p&&S.renderTask.dispose(),x.remove(S.group),S.dispose(h,_),g.splice(k,1),y[S.__id]===S&&delete y[S.__id],S.__id=S.group.__ecComponentInfo=null)}},u_=function(f,p,h,m,g){var y=f._model;if(y.setUpdatePayload(h),!m){de([].concat(f._componentsViews).concat(f._chartsViews),S);return}var x={};x[m+"Id"]=h[m+"Id"],x[m+"Index"]=h[m+"Index"],x[m+"Name"]=h[m+"Name"];var _={mainType:m,query:x};g&&(_.subType=g);var k=h.excludeSeriesId,w;k!=null&&(w=mt(),de(In(k),function(C){var A=Qr(C,null);A!=null&&w.set(A,!0)})),y&&y.eachComponent(_,function(C){var A=w&&w.get(C.id)!=null;if(!A)if(zj(h))if(C instanceof Jn)h.type===Rp&&!h.notBlur&&!C.get(["emphasis","disabled"])&&aNe(C,h,f._api);else{var M=d6(C.mainType,C.componentIndex,h.name,f._api),E=M.focusSelf,P=M.dispatchers;h.type===Rp&&E&&!h.notBlur&&QM(C.mainType,C.componentIndex,f._api),P&&de(P,function(I){h.type===Rp?ad(I):od(I)})}else JM(h)&&C instanceof Jn&&(uNe(C,h,f._api),Fj(C),Ca(f))},f),y&&y.eachComponent(_,function(C){var A=w&&w.get(C.id)!=null;A||S(f[m==="series"?"_chartsMap":"_componentsMap"][C.__viewId])},f);function S(C){C&&C.__alive&&C[p]&&C[p](C.__model,y,f._api,h)}},Md={prepareAndUpdate:function(f){Kh(this),Md.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,p){var h=this._model,m=this._api,g=this._zr,y=this._coordSysMgr,x=this._scheduler;if(h){h.setUpdatePayload(f),x.restoreData(h,f),x.performSeriesTasks(h),y.create(h,m),x.performDataProcessorTasks(h,f),JT(this,h),y.update(h,m),n(h),x.performVisualTasks(h,f),t3(this,h,m,f,p);var _=h.get("backgroundColor")||"transparent",k=h.get("darkMode");g.setBackgroundColor(_),k!=null&&k!=="auto"&&g.setDarkMode(k),sl.trigger("afterupdate",h,m)}},updateTransform:function(f){var p=this,h=this._model,m=this._api;if(h){h.setUpdatePayload(f);var g=[];h.eachComponent(function(x,_){if(x!=="series"){var k=p.getViewOfComponentModel(_);if(k&&k.__alive)if(k.updateTransform){var w=k.updateTransform(_,h,m,f);w&&w.update&&g.push(k)}else g.push(k)}});var y=mt();h.eachSeries(function(x){var _=p._chartsMap[x.__viewId];if(_.updateTransform){var k=_.updateTransform(x,h,m,f);k&&k.update&&y.set(x.uid,1)}else y.set(x.uid,1)}),n(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0,dirtyMap:y}),d_(this,h,m,f,{},y),sl.trigger("afterupdate",h,m)}},updateView:function(f){var p=this._model;p&&(p.setUpdatePayload(f),On.markUpdateMethod(f,"updateView"),n(p),this._scheduler.performVisualTasks(p,f,{setDirty:!0}),t3(this,p,this._api,f,{}),sl.trigger("afterupdate",p,this._api))},updateVisual:function(f){var p=this,h=this._model;h&&(h.setUpdatePayload(f),h.eachSeries(function(m){m.getData().clearAllVisual()}),On.markUpdateMethod(f,"updateVisual"),n(h),this._scheduler.performVisualTasks(h,f,{visualType:"visual",setDirty:!0}),h.eachComponent(function(m,g){if(m!=="series"){var y=p.getViewOfComponentModel(g);y&&y.__alive&&y.updateVisual(g,h,p._api,f)}}),h.eachSeries(function(m){var g=p._chartsMap[m.__viewId];g.updateVisual(m,h,p._api,f)}),sl.trigger("afterupdate",h,this._api))},updateLayout:function(f){Md.update.call(this,f)}},ZT=function(f,p,h,m){if(f._disposed){f.id;return}for(var g=f._model,y=f._coordSysMgr.getCoordinateSystems(),x,_=c0(g,h),k=0;k<y.length;k++){var w=y[k];if(w[p]&&(x=w[p](g,_,m))!=null)return x}},JT=function(f,p){var h=f._chartsMap,m=f._scheduler;p.eachSeries(function(g){m.updateStreamModes(g,h[g.__viewId])})},e3=function(f,p){var h=this,m=this.getModel(),g=f.type,y=f.escapeConnect,x=jk[g],_=x.actionInfo,k=(_.update||"update").split(":"),w=k.pop(),S=k[0]!=null&&Sl(k[0]);this[qs]=!0;var C=[f],A=!1;f.batch&&(A=!0,C=We(f.batch,function(z){return z=_t(Ne({},z),f),z.batch=null,z}));var M=[],E,P=JM(f),I=zj(f);if(I&&Mte(this._api),de(C,function(z){if(E=x.action(z,h._model,h._api),E=E||Ne({},z),E.type=_.event||E.type,M.push(E),I){var N=n6(f),q=N.queryOptionMap,V=N.mainTypeSpecified,O=V?q.keys()[0]:"series";u_(h,w,z,O),Ca(h)}else P?(u_(h,w,z,"series"),Ca(h)):S&&u_(h,w,z,S.main,S.sub)}),w!=="none"&&!I&&!P&&!S)try{this[Ni]?(Kh(this),Md.update.call(this,f),this[Ni]=null):Md[w].call(this,f)}catch(z){throw this[qs]=!1,z}if(A?E={type:_.event||g,escapeConnect:y,batch:M}:E=M[0],this[qs]=!1,!p){var F=this._messageCenter;if(F.trigger(E.type,E),P){var L={type:"selectchanged",escapeConnect:y,selected:dNe(m),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};F.trigger(L.type,L)}}},Ov=function(f){for(var p=this._pendingActions;p.length;){var h=p.shift();e3.call(this,h,f)}},Lv=function(f){!f&&this.trigger("updated")},tF=function(f,p){f.on("rendered",function(h){p.trigger("rendered",h),f.animation.isFinished()&&!p[Ni]&&!p._scheduler.unfinished&&!p._pendingActions.length&&p.trigger("finished")})},nF=function(f,p){f.on("mouseover",function(h){var m=h.target,g=up(m,x1);g&&(oNe(g,h,p._api),Ca(p))}).on("mouseout",function(h){var m=h.target,g=up(m,x1);g&&(lNe(g,h,p._api),Ca(p))}).on("click",function(h){var m=h.target,g=up(m,function(_){return Et(_).dataIndex!=null},!0);if(g){var y=g.selected?"unselect":"select",x=Et(g);p._api.dispatchAction({type:y,dataType:x.dataType,dataIndexInside:x.dataIndex,seriesIndex:x.seriesIndex,isFromClick:!0})}})};function n(f){f.clearColorPalette(),f.eachSeries(function(p){p.clearColorPalette()})}function r(f){var p=[],h=[],m=!1;if(f.eachComponent(function(_,k){var w=k.get("zlevel")||0,S=k.get("z")||0,C=k.getZLevelKey();m=m||!!C,(_==="series"?h:p).push({zlevel:w,z:S,idx:k.componentIndex,type:_,key:C})}),m){var g=p.concat(h),y,x;$w(g,function(_,k){return _.zlevel===k.zlevel?_.z-k.z:_.zlevel-k.zlevel}),de(g,function(_){var k=f.getComponent(_.type,_.idx),w=_.zlevel,S=_.key;y!=null&&(w=Math.max(y,w)),S?(w===y&&S!==x&&w++,x=S):x&&(w===y&&w++,x=""),y=w,k.setZLevel(w)})}}t3=function(f,p,h,m,g){r(p),rF(f,p,h,m,g),de(f._chartsViews,function(y){y.__alive=!1}),d_(f,p,h,m,g),de(f._chartsViews,function(y){y.__alive||y.remove(p,h)})},rF=function(f,p,h,m,g,y){de(y||f._componentsViews,function(x){var _=x.__model;d(_,x),x.render(_,p,h,m),o(_,x),c(_,x)})},d_=function(f,p,h,m,g,y){var x=f._scheduler;g=Ne(g||{},{updatedSeries:p.getSeries()}),sl.trigger("series:beforeupdate",p,h,g);var _=!1;p.eachSeries(function(k){var w=f._chartsMap[k.__viewId];w.__alive=!0;var S=w.renderTask;x.updatePayload(S,m),d(k,w),y&&y.get(k.uid)&&S.dirty(),S.perform(x.getPerformArgs(S))&&(_=!0),w.group.silent=!!k.get("silent"),a(k,w),Fj(k)}),x.unfinished=_||x.unfinished,sl.trigger("series:layoutlabels",p,h,g),sl.trigger("series:transition",p,h,g),p.eachSeries(function(k){var w=f._chartsMap[k.__viewId];o(k,w),c(k,w)}),i(f,p),sl.trigger("series:afterupdate",p,h,g)},Ca=function(f){f[XT]=!0,f.getZr().wakeUp()},iF=function(f){f[XT]&&(f.getZr().storage.traverse(function(p){Bm(p)||s(p)}),f[XT]=!1)};function s(f){for(var p=[],h=f.currentStates,m=0;m<h.length;m++){var g=h[m];g==="emphasis"||g==="blur"||g==="select"||p.push(g)}f.selected&&f.states.select&&p.push("select"),f.hoverState===YC&&f.states.emphasis?p.push("emphasis"):f.hoverState===Ab&&f.states.blur&&p.push("blur"),f.useStates(p)}function i(f,p){var h=f._zr,m=h.storage,g=0;m.traverse(function(y){y.isGroup||g++}),g>p.get("hoverLayerThreshold")&&!tn.node&&!tn.worker&&p.eachSeries(function(y){if(!y.preventUsingHoverLayer){var x=f._chartsMap[y.__viewId];x.__alive&&x.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function a(f,p){var h=f.get("blendMode")||null;p.eachRendered(function(m){m.isGroup||(m.style.blend=h)})}function o(f,p){if(!f.preventAutoZ){var h=f.get("z")||0,m=f.get("zlevel")||0;p.eachRendered(function(g){return l(g,h,m,-1/0),!0})}}function l(f,p,h,m){var g=f.getTextContent(),y=f.getTextGuideLine(),x=f.isGroup;if(x)for(var _=f.childrenRef(),k=0;k<_.length;k++)m=Math.max(l(_[k],p,h,m),m);else f.z=p,f.zlevel=h,m=Math.max(f.z2,m);if(g&&(g.z=p,g.zlevel=h,isFinite(m)&&(g.z2=m+2)),y){var w=f.textGuideLineConfig;y.z=p,y.zlevel=h,isFinite(m)&&(y.z2=m+(w&&w.showAbove?1:-1))}return m}function d(f,p){p.eachRendered(function(h){if(!Bm(h)){var m=h.getTextContent(),g=h.getTextGuideLine();h.stateTransition&&(h.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),h.hasState()?(h.prevStates=h.currentStates,h.clearStates()):h.prevStates&&(h.prevStates=null)}})}function c(f,p){var h=f.getModel("stateAnimation"),m=f.isAnimationEnabled(),g=h.get("duration"),y=g>0?{duration:g,delay:h.get("delay"),easing:h.get("easing")}:null;p.eachRendered(function(x){if(x.states&&x.states.emphasis){if(Bm(x))return;if(x instanceof en&&mNe(x),x.__dirty){var _=x.prevStates;_&&x.useStates(_)}if(m){x.stateTransition=y;var k=x.getTextContent(),w=x.getTextGuideLine();k&&(k.stateTransition=y),w&&(w.stateTransition=y)}x.__dirty&&s(x)}})}sF=function(f){return new(function(p){Te(h,p);function h(){return p!==null&&p.apply(this,arguments)||this}return h.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},h.prototype.getComponentByElement=function(m){for(;m;){var g=m.__ecComponentInfo;if(g!=null)return f._model.getComponent(g.mainType,g.index);m=m.parent}},h.prototype.enterEmphasis=function(m,g){ad(m,g),Ca(f)},h.prototype.leaveEmphasis=function(m,g){od(m,g),Ca(f)},h.prototype.enterBlur=function(m){Cte(m),Ca(f)},h.prototype.leaveBlur=function(m){u6(m),Ca(f)},h.prototype.enterSelect=function(m){Ate(m),Ca(f)},h.prototype.leaveSelect=function(m){Tte(m),Ca(f)},h.prototype.getModel=function(){return f.getModel()},h.prototype.getViewOfComponentModel=function(m){return f.getViewOfComponentModel(m)},h.prototype.getViewOfSeriesModel=function(m){return f.getViewOfSeriesModel(m)},h}(bne))(f)}}(),e}(co),I6=B9e.prototype;I6.on=ure("on");I6.off=ure("off");I6.one=function(t,e,n){var r=this;function s(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];e&&e.apply&&e.apply(this,i),r.off(t,s)}this.on.call(this,t,s,n)};var z9e=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var jk={},Fk={},mE=[],gE=[],Bk=[],hre={},vE={},aF={},U9e={},H9e="_echarts_instance_";function mre(t,e){hre[t]=e}function gre(t){Xt(gE,t)<0&&gE.push(t)}function vre(t,e){L6(mE,t,e,P9e)}function q9e(t){O6("afterinit",t)}function W9e(t){O6("afterupdate",t)}function O6(t,e){sl.on(t,e)}function Jl(t,e,n){bt(e)&&(n=e,e="");var r=wt(t)?t.type:[t,t={event:e}][0];t.event=(t.event||r).toLowerCase(),e=t.event,!Fk[e]&&(Ei(eF.test(r)&&eF.test(e)),jk[r]||(jk[r]={action:n,actionInfo:t}),Fk[e]=r)}function G9e(t,e){Rb.register(t,e)}function Y9e(t,e){L6(Bk,t,e,are,"layout")}function bh(t,e){L6(Bk,t,e,ore,"visual")}var oF=[];function L6(t,e,n,r,s){if((bt(e)||wt(e))&&(n=e,e=r),!(Xt(oF,n)>=0)){oF.push(n);var i=Wne.wrapStageHandler(n,s);i.__prio=e,i.__raw=n,t.push(i)}}function yre(t,e){vE[t]=e}function K9e(t,e,n){var r=$9e("registerMap");r&&r(t,e,n)}var X9e=dje;bh(P6,Lje);bh(dA,Vje);bh(dA,Nje);bh(P6,Qje);bh(dA,Zje);bh(lre,A9e);gre(_ne);vre(D9e,H7e);yre("default",jje);Jl({type:Rp,event:Rp,update:Rp},Vr);Jl({type:Pw,event:Pw,update:Pw},Vr);Jl({type:f0,event:f0,update:f0},Vr);Jl({type:Iw,event:Iw,update:Iw},Vr);Jl({type:p0,event:p0,update:p0},Vr);mre("light",Kje);mre("dark",Xne);var lF=[],Q9e={registerPreprocessor:gre,registerProcessor:vre,registerPostInit:q9e,registerPostUpdate:W9e,registerUpdateLifecycle:O6,registerAction:Jl,registerCoordinateSystem:G9e,registerLayout:Y9e,registerVisual:bh,registerTransform:X9e,registerLoading:yre,registerMap:K9e,registerImpl:T9e,PRIORITY:F9e,ComponentModel:nn,ComponentView:vr,SeriesModel:Jn,ChartView:On,registerComponentModel:function(t){nn.registerClass(t)},registerComponentView:function(t){vr.registerClass(t)},registerSeriesModel:function(t){Jn.registerClass(t)},registerChartView:function(t){On.registerClass(t)},registerSubTypeDefaulter:function(t,e){nn.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){O8e(t,e)}};function Qt(t){if(He(t)){de(t,function(e){Qt(e)});return}Xt(lF,t)>=0||(lF.push(t),bt(t)&&(t={install:t}),t.install(Q9e))}function Vv(t){return t==null?0:t.length||1}function uF(t){return t}var ld=function(){function t(e,n,r,s,i,a){this._old=e,this._new=n,this._oldKeyGetter=r||uF,this._newKeyGetter=s||uF,this.context=i,this._diffModeMultiple=a==="multiple"}return t.prototype.add=function(e){return this._add=e,this},t.prototype.update=function(e){return this._update=e,this},t.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},t.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},t.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},t.prototype.remove=function(e){return this._remove=e,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var e=this._old,n=this._new,r={},s=new Array(e.length),i=new Array(n.length);this._initIndexMap(e,null,s,"_oldKeyGetter"),this._initIndexMap(n,r,i,"_newKeyGetter");for(var a=0;a<e.length;a++){var o=s[a],l=r[o],d=Vv(l);if(d>1){var c=l.shift();l.length===1&&(r[o]=l[0]),this._update&&this._update(c,a)}else d===1?(r[o]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(i,r)},t.prototype._executeMultiple=function(){var e=this._old,n=this._new,r={},s={},i=[],a=[];this._initIndexMap(e,r,i,"_oldKeyGetter"),this._initIndexMap(n,s,a,"_newKeyGetter");for(var o=0;o<i.length;o++){var l=i[o],d=r[l],c=s[l],f=Vv(d),p=Vv(c);if(f>1&&p===1)this._updateManyToOne&&this._updateManyToOne(c,d),s[l]=null;else if(f===1&&p>1)this._updateOneToMany&&this._updateOneToMany(c,d),s[l]=null;else if(f===1&&p===1)this._update&&this._update(c,d),s[l]=null;else if(f>1&&p>1)this._updateManyToMany&&this._updateManyToMany(c,d),s[l]=null;else if(f>1)for(var h=0;h<f;h++)this._remove&&this._remove(d[h]);else this._remove&&this._remove(d)}this._performRestAdd(a,s)},t.prototype._performRestAdd=function(e,n){for(var r=0;r<e.length;r++){var s=e[r],i=n[s],a=Vv(i);if(a>1)for(var o=0;o<a;o++)this._add&&this._add(i[o]);else a===1&&this._add&&this._add(i);n[s]=null}},t.prototype._initIndexMap=function(e,n,r,s){for(var i=this._diffModeMultiple,a=0;a<e.length;a++){var o="_ec_"+this[s](e[a],a);if(i||(r[a]=o),!!n){var l=n[o],d=Vv(l);d===0?(n[o]=a,i&&r.push(o)):d===1?n[o]=[l,a]:l.push(a)}}},t}(),Z9e=function(){function t(e,n){this._encode=e,this._schema=n}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function J9e(t,e){var n={},r=n.encode={},s=mt(),i=[],a=[],o={};de(t.dimensions,function(p){var h=t.getDimensionInfo(p),m=h.coordDim;if(m){var g=h.coordDimIndex;n3(r,m)[g]=p,h.isExtraCoord||(s.set(m,1),eFe(h.type)&&(i[0]=p),n3(o,m)[g]=t.getDimensionIndex(h.name)),h.defaultTooltip&&a.push(p)}fne.each(function(y,x){var _=n3(r,x),k=h.otherDims[x];k!=null&&k!==!1&&(_[k]=h.name)})});var l=[],d={};s.each(function(p,h){var m=r[h];d[h]=m[0],l=l.concat(m)}),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=We(l,function(p){return t.getDimensionInfo(p).storeDimIndex}),n.encodeFirstDimNotExtra=d;var c=r.label;c&&c.length&&(i=c.slice());var f=r.tooltip;return f&&f.length?a=f.slice():a.length||(a=i.slice()),r.defaultedLabel=i,r.defaultedTooltip=a,n.userOutput=new Z9e(o,e),n}function n3(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function zk(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function eFe(t){return!(t==="ordinal"||t==="time")}var jw=function(){function t(e){this.otherDims={},e!=null&&Ne(this,e)}return t}(),tFe=ln(),nFe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},bre=function(){function t(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=wre(this.source)))},t.prototype.getSourceDimensionIndex=function(e){return Ot(this._dimNameMap.get(e),-1)},t.prototype.getSourceDimension=function(e){var n=this.source.dimensionsDefine;if(n)return n[e]},t.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,n=kne(this.source),r=!kre(e),s="",i=[],a=0,o=0;a<e;a++){var l=void 0,d=void 0,c=void 0,f=this.dimensions[o];if(f&&f.storeDimIndex===a)l=n?f.name:null,d=f.type,c=f.ordinalMeta,o++;else{var p=this.getSourceDimension(a);p&&(l=n?p.name:null,d=p.type)}i.push({property:l,type:d,ordinalMeta:c}),n&&l!=null&&(!f||!f.isCalculationCoord)&&(s+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),s+="$",s+=nFe[d]||"f",c&&(s+=c.uid),s+="$"}var h=this.source,m=[h.seriesLayoutBy,h.startIndex,s].join("$$");return{dimensions:i,hash:m}},t.prototype.makeOutputDimensionNames=function(){for(var e=[],n=0,r=0;n<this._fullDimCount;n++){var s=void 0,i=this.dimensions[r];if(i&&i.storeDimIndex===n)i.isCalculationCoord||(s=i.name),r++;else{var a=this.getSourceDimension(n);a&&(s=a.name)}e.push(s)}return e},t.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function xre(t){return t instanceof bre}function _re(t){for(var e=mt(),n=0;n<(t||[]).length;n++){var r=t[n],s=wt(r)?r.name:r;s!=null&&e.get(s)==null&&e.set(s,n)}return e}function wre(t){var e=tFe(t);return e.dimNameMap||(e.dimNameMap=_re(t.dimensionsDefine))}function kre(t){return t>30}var Nv=wt,Ed=We,rFe=typeof Int32Array=="undefined"?Array:Int32Array,sFe="e\0\0",dF=-1,iFe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],aFe=["_approximateExtent"],cF,c_,jv,Fv,r3,Bv,s3,wi=function(){function t(e,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,s=!1;xre(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(s=!0,r=e),r=r||["x","y"];for(var i={},a=[],o={},l=!1,d={},c=0;c<r.length;c++){var f=r[c],p=ot(f)?new jw({name:f}):f instanceof jw?f:new jw(f),h=p.name;p.type=p.type||"float",p.coordDim||(p.coordDim=h,p.coordDimIndex=0);var m=p.otherDims=p.otherDims||{};a.push(h),i[h]=p,d[h]!=null&&(l=!0),p.createInvertedIndices&&(o[h]=[]),m.itemName===0&&(this._nameDimIdx=c),m.itemId===0&&(this._idDimIdx=c),s&&(p.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=i,this._initGetDimensionInfo(l),this.hostModel=n,this._invertedIndicesMap=o,this._dimOmitted){var g=this._dimIdxToName=mt();de(a,function(y){g.set(i[y].storeDimIndex,y)})}}return t.prototype.getDimension=function(e){var n=this._recognizeDimIndex(e);if(n==null)return e;if(n=e,!this._dimOmitted)return this.dimensions[n];var r=this._dimIdxToName.get(n);if(r!=null)return r;var s=this._schema.getSourceDimension(n);if(s)return s.name},t.prototype.getDimensionIndex=function(e){var n=this._recognizeDimIndex(e);if(n!=null)return n;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},t.prototype._recognizeDimIndex=function(e){if(hn(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},t.prototype._getStoreDimIndex=function(e){var n=this.getDimensionIndex(e);return n},t.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},t.prototype._initGetDimensionInfo=function(e){var n=this._dimInfos;this._getDimInfo=e?function(r){return n.hasOwnProperty(r)?n[r]:void 0}:function(r){return n[r]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(e,n){var r=this._dimSummary;if(n==null)return r.encodeFirstDimNotExtra[e];var s=r.encode[e];return s?s[n]:null},t.prototype.mapDimensionsAll=function(e){var n=this._dimSummary,r=n.encode[e];return(r||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(e,n,r){var s=this,i;if(e instanceof lE&&(i=e),!i){var a=this.dimensions,o=A6(e)||si(e)?new Sne(e,a.length):e;i=new lE;var l=Ed(a,function(d){return{type:s._dimInfos[d].type,property:d}});i.initData(o,l,r)}this._store=i,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=J9e(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(e){var n=this._store.appendData(e);this._doInit(n[0],n[1])},t.prototype.appendValues=function(e,n){var r=this._store.appendValues(e,n&&n.length),s=r.start,i=r.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var o=s;o<i;o++){var l=o-s;this._nameList[o]=n[l],a&&s3(this,o)}},t.prototype._updateOrdinalMeta=function(){for(var e=this._store,n=this.dimensions,r=0;r<n.length;r++){var s=this._dimInfos[n[r]];s.ordinalMeta&&e.collectOrdinalMeta(s.storeDimIndex,s.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==kc&&!e.fillStorage},t.prototype._doInit=function(e,n){if(!(e>=n)){var r=this._store,s=r.getProvider();this._updateOrdinalMeta();var i=this._nameList,a=this._idList,o=s.getSource().sourceFormat,l=o===fo;if(l&&!s.pure)for(var d=[],c=e;c<n;c++){var f=s.getItem(c,d);if(!this.hasItemOption&&H8e(f)&&(this.hasItemOption=!0),f){var p=f.name;i[c]==null&&p!=null&&(i[c]=Qr(p,null));var h=f.id;a[c]==null&&h!=null&&(a[c]=Qr(h,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<n;c++)s3(this,c);cF(this)}},t.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.setApproximateExtent=function(e,n){n=this.getDimension(n),this._approximateExtent[n]=e.slice()},t.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},t.prototype.setCalculationInfo=function(e,n){Nv(e)?Ne(this._calculationInfo,e):this._calculationInfo[e]=n},t.prototype.getName=function(e){var n=this.getRawIndex(e),r=this._nameList[n];return r==null&&this._nameDimIdx!=null&&(r=jv(this,this._nameDimIdx,n)),r==null&&(r=""),r},t.prototype._getCategory=function(e,n){var r=this._store.get(e,n),s=this._store.getOrdinalMeta(e);return s?s.categories[r]:r},t.prototype.getId=function(e){return c_(this,this.getRawIndex(e))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(e,n){var r=this._store,s=this._dimInfos[e];if(s)return r.get(s.storeDimIndex,n)},t.prototype.getByRawIndex=function(e,n){var r=this._store,s=this._dimInfos[e];if(s)return r.getByRawIndex(s.storeDimIndex,n)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},t.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},t.prototype.getValues=function(e,n){var r=this,s=this._store;return He(e)?s.getValues(Ed(e,function(i){return r._getStoreDimIndex(i)}),n):s.getValues(e)},t.prototype.hasValue=function(e){for(var n=this._dimSummary.dataDimIndicesOnCoord,r=0,s=n.length;r<s;r++)if(isNaN(this._store.get(n[r],e)))return!1;return!0},t.prototype.indexOfName=function(e){for(var n=0,r=this._store.count();n<r;n++)if(this.getName(n)===e)return n;return-1},t.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},t.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},t.prototype.rawIndexOf=function(e,n){var r=e&&this._invertedIndicesMap[e],s=r&&r[n];return s==null||isNaN(s)?dF:s},t.prototype.indicesOfNearest=function(e,n,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),n,r)},t.prototype.each=function(e,n,r){bt(e)&&(r=n,n=e,e=[]);var s=r||this,i=Ed(Fv(e),this._getStoreDimIndex,this);this._store.each(i,s?ct(n,s):n)},t.prototype.filterSelf=function(e,n,r){bt(e)&&(r=n,n=e,e=[]);var s=r||this,i=Ed(Fv(e),this._getStoreDimIndex,this);return this._store=this._store.filter(i,s?ct(n,s):n),this},t.prototype.selectRange=function(e){var n=this,r={},s=sn(e);return de(s,function(i){var a=n._getStoreDimIndex(i);r[a]=e[i]}),this._store=this._store.selectRange(r),this},t.prototype.mapArray=function(e,n,r){bt(e)&&(r=n,n=e,e=[]),r=r||this;var s=[];return this.each(e,function(){s.push(n&&n.apply(this,arguments))},r),s},t.prototype.map=function(e,n,r,s){var i=r||s||this,a=Ed(Fv(e),this._getStoreDimIndex,this),o=Bv(this);return o._store=this._store.map(a,i?ct(n,i):n),o},t.prototype.modify=function(e,n,r,s){var i=r||s||this,a=Ed(Fv(e),this._getStoreDimIndex,this);this._store.modify(a,i?ct(n,i):n)},t.prototype.downSample=function(e,n,r,s){var i=Bv(this);return i._store=this._store.downSample(this._getStoreDimIndex(e),n,r,s),i},t.prototype.minmaxDownSample=function(e,n){var r=Bv(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),n),r},t.prototype.lttbDownSample=function(e,n){var r=Bv(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),n),r},t.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},t.prototype.getItemModel=function(e){var n=this.hostModel,r=this.getRawDataItem(e);return new Tn(r,n,n&&n.ecModel)},t.prototype.diff=function(e){var n=this;return new ld(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return c_(e,r)},function(r){return c_(n,r)})},t.prototype.getVisual=function(e){var n=this._visual;return n&&n[e]},t.prototype.setVisual=function(e,n){this._visual=this._visual||{},Nv(e)?Ne(this._visual,e):this._visual[e]=n},t.prototype.getItemVisual=function(e,n){var r=this._itemVisuals[e],s=r&&r[n];return s==null?this.getVisual(n):s},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(e,n){var r=this._itemVisuals,s=r[e];s||(s=r[e]={});var i=s[n];return i==null&&(i=this.getVisual(n),He(i)?i=i.slice():Nv(i)&&(i=Ne({},i)),s[n]=i),i},t.prototype.setItemVisual=function(e,n,r){var s=this._itemVisuals[e]||{};this._itemVisuals[e]=s,Nv(n)?Ne(s,n):s[n]=r},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(e,n){Nv(e)?Ne(this._layout,e):this._layout[e]=n},t.prototype.getLayout=function(e){return this._layout[e]},t.prototype.getItemLayout=function(e){return this._itemLayouts[e]},t.prototype.setItemLayout=function(e,n,r){this._itemLayouts[e]=r?Ne(this._itemLayouts[e]||{},n):n},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(e,n){var r=this.hostModel&&this.hostModel.seriesIndex;KM(r,this.dataType,e,n),this._graphicEls[e]=n},t.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},t.prototype.eachItemGraphicEl=function(e,n){de(this._graphicEls,function(r,s){r&&e&&e.call(n,r,s)})},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:Ed(this.dimensions,this._getDimInfo,this),this.hostModel)),r3(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(e,n){var r=this[e];bt(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var s=r.apply(this,arguments);return n.apply(this,[s].concat(WP(arguments)))})},t.internalField=function(){cF=function(e){var n=e._invertedIndicesMap;de(n,function(r,s){var i=e._dimInfos[s],a=i.ordinalMeta,o=e._store;if(a){r=n[s]=new rFe(a.categories.length);for(var l=0;l<r.length;l++)r[l]=dF;for(var l=0;l<o.count();l++)r[o.get(i.storeDimIndex,l)]=l}})},jv=function(e,n,r){return Qr(e._getCategory(n,r),null)},c_=function(e,n){var r=e._idList[n];return r==null&&e._idDimIdx!=null&&(r=jv(e,e._idDimIdx,n)),r==null&&(r=sFe+n),r},Fv=function(e){return He(e)||(e=e!=null?[e]:[]),e},Bv=function(e){var n=new t(e._schema?e._schema:Ed(e.dimensions,e._getDimInfo,e),e.hostModel);return r3(n,e),n},r3=function(e,n){de(iFe.concat(n.__wrappedMethods||[]),function(r){n.hasOwnProperty(r)&&(e[r]=n[r])}),e.__wrappedMethods=n.__wrappedMethods,de(aFe,function(r){e[r]=kt(n[r])}),e._calculationInfo=Ne({},n._calculationInfo)},s3=function(e,n){var r=e._nameList,s=e._idList,i=e._nameDimIdx,a=e._idDimIdx,o=r[n],l=s[n];if(o==null&&i!=null&&(r[n]=o=jv(e,i,n)),l==null&&a!=null&&(s[n]=l=jv(e,a,n)),l==null&&o!=null){var d=e._nameRepeatCount,c=d[o]=(d[o]||0)+1;l=o,c>1&&(l+="__ec__"+c),s[n]=l}}}(),t}();function Ib(t,e){A6(t)||(t=T6(t)),e=e||{};var n=e.coordDimensions||[],r=e.dimensionsDefine||t.dimensionsDefine||[],s=mt(),i=[],a=lFe(t,n,r,e.dimensionsCount),o=e.canOmitUnusedDimensions&&kre(a),l=r===t.dimensionsDefine,d=l?wre(t):_re(r),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(t,a));for(var f=mt(c),p=new Rne(a),h=0;h<p.length;h++)p[h]=-1;function m(E){var P=p[E];if(P<0){var I=r[E],F=wt(I)?I:{name:I},L=new jw,z=F.name;z!=null&&d.get(z)!=null&&(L.name=L.displayName=z),F.type!=null&&(L.type=F.type),F.displayName!=null&&(L.displayName=F.displayName);var N=i.length;return p[E]=N,L.storeDimIndex=E,i.push(L),L}return i[P]}if(!o)for(var h=0;h<a;h++)m(h);f.each(function(E,P){var I=In(E).slice();if(I.length===1&&!ot(I[0])&&I[0]<0){f.set(P,!1);return}var F=f.set(P,[]);de(I,function(L,z){var N=ot(L)?d.get(L):L;N!=null&&N<a&&(F[z]=N,y(m(N),P,z))})});var g=0;de(n,function(E){var P,I,F,L;if(ot(E))P=E,L={};else{L=E,P=L.name;var z=L.ordinalMeta;L.ordinalMeta=null,L=Ne({},L),L.ordinalMeta=z,I=L.dimsDef,F=L.otherDims,L.name=L.coordDim=L.coordDimIndex=L.dimsDef=L.otherDims=null}var N=f.get(P);if(N!==!1){if(N=In(N),!N.length)for(var q=0;q<(I&&I.length||1);q++){for(;g<a&&m(g).coordDim!=null;)g++;g<a&&N.push(g++)}de(N,function(V,O){var X=m(V);if(l&&L.type!=null&&(X.type=L.type),y(_t(X,L),P,O),X.name==null&&I){var j=I[O];!wt(j)&&(j={name:j}),X.name=X.displayName=j.name,X.defaultTooltip=j.defaultTooltip}F&&_t(X.otherDims,F)})}});function y(E,P,I){fne.get(P)!=null?E.otherDims[P]=I:(E.coordDim=P,E.coordDimIndex=I,s.set(P,!0))}var x=e.generateCoord,_=e.generateCoordCount,k=_!=null;_=x?_||1:0;var w=x||"value";function S(E){E.name==null&&(E.name=E.coordDim)}if(o)de(i,function(E){S(E)}),i.sort(function(E,P){return E.storeDimIndex-P.storeDimIndex});else for(var C=0;C<a;C++){var A=m(C),M=A.coordDim;M==null&&(A.coordDim=uFe(w,s,k),A.coordDimIndex=0,(!x||_<=0)&&(A.isExtraCoord=!0),_--),S(A),A.type==null&&(gne(t,C)===Es.Must||A.isExtraCoord&&(A.otherDims.itemName!=null||A.otherDims.seriesName!=null))&&(A.type="ordinal")}return oFe(i),new bre({source:t,dimensions:i,fullDimensionCount:a,dimensionOmitted:o})}function oFe(t){for(var e=mt(),n=0;n<t.length;n++){var r=t[n],s=r.name,i=e.get(s)||0;i>0&&(r.name=s+(i-1)),i++,e.set(s,i)}}function lFe(t,e,n,r){var s=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,r||0);return de(e,function(i){var a;wt(i)&&(a=i.dimsDef)&&(s=Math.max(s,a.length))}),s}function uFe(t,e,n){if(n||e.hasKey(t)){for(var r=0;e.hasKey(t+r);)r++;t+=r}return e.set(t,!0),t}var dFe=function(){function t(e){this.coordSysDims=[],this.axisMap=mt(),this.categoryAxisMap=mt(),this.coordSysName=e}return t}();function cFe(t){var e=t.get("coordinateSystem"),n=new dFe(e),r=fFe[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}var fFe={cartesian2d:function(t,e,n,r){var s=t.getReferringComponents("xAxis",Br).models[0],i=t.getReferringComponents("yAxis",Br).models[0];e.coordSysDims=["x","y"],n.set("x",s),n.set("y",i),Xh(s)&&(r.set("x",s),e.firstCategoryDimIndex=0),Xh(i)&&(r.set("y",i),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var s=t.getReferringComponents("singleAxis",Br).models[0];e.coordSysDims=["single"],n.set("single",s),Xh(s)&&(r.set("single",s),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var s=t.getReferringComponents("polar",Br).models[0],i=s.findAxisModel("radiusAxis"),a=s.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",i),n.set("angle",a),Xh(i)&&(r.set("radius",i),e.firstCategoryDimIndex=0),Xh(a)&&(r.set("angle",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var s=t.ecModel,i=s.getComponent("parallel",t.get("parallelIndex")),a=e.coordSysDims=i.dimensions.slice();de(i.parallelAxisIndex,function(o,l){var d=s.getComponent("parallelAxis",o),c=a[l];n.set(c,d),Xh(d)&&(r.set(c,d),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function Xh(t){return t.get("type")==="category"}function pFe(t,e,n){n=n||{};var r=n.byIndex,s=n.stackedCoordDimension,i,a,o;hFe(e)?i=e:(a=e.schema,i=a.dimensions,o=e.store);var l=!!(t&&t.get("stack")),d,c,f,p;if(de(i,function(_,k){ot(_)&&(i[k]=_={name:_}),l&&!_.isExtraCoord&&(!r&&!d&&_.ordinalMeta&&(d=_),!c&&_.type!=="ordinal"&&_.type!=="time"&&(!s||s===_.coordDim)&&(c=_))}),c&&!r&&!d&&(r=!0),c){f="__\0ecstackresult_"+t.id,p="__\0ecstackedover_"+t.id,d&&(d.createInvertedIndices=!0);var h=c.coordDim,m=c.type,g=0;de(i,function(_){_.coordDim===h&&g++});var y={name:f,coordDim:h,coordDimIndex:g,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},x={name:p,coordDim:p,coordDimIndex:g+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};a?(o&&(y.storeDimIndex=o.ensureCalculationDimension(p,m),x.storeDimIndex=o.ensureCalculationDimension(f,m)),a.appendCalculationDimension(y),a.appendCalculationDimension(x)):(i.push(y),i.push(x))}return{stackedDimension:c&&c.name,stackedByDimension:d&&d.name,isStackedByIndex:r,stackedOverDimension:p,stackResultDimension:f}}function hFe(t){return!xre(t.schema)}function jc(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function Sre(t,e){return jc(t,e)?t.getCalculationInfo("stackResultDimension"):e}function mFe(t,e){var n=t.get("coordinateSystem"),r=Rb.get(n),s;return e&&e.coordSysDims&&(s=We(e.coordSysDims,function(i){var a={name:i},o=e.axisMap.get(i);if(o){var l=o.get("type");a.type=zk(l)}return a})),s||(s=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),s}function gFe(t,e,n){var r,s;return n&&de(t,function(i,a){var o=i.coordDim,l=n.categoryAxisMap.get(o);l&&(r==null&&(r=a),i.ordinalMeta=l.getOrdinalMeta(),e&&(i.createInvertedIndices=!0)),i.otherDims.itemName!=null&&(s=!0)}),!s&&r!=null&&(t[r].otherDims.itemName=0),r}function bd(t,e,n){n=n||{};var r=e.getSourceManager(),s,i=!1;t?(i=!0,s=T6(t)):(s=r.getSource(),i=s.sourceFormat===fo);var a=cFe(e),o=mFe(e,a),l=n.useEncodeDefaulter,d=bt(l)?l:l?Nt(mne,o,e):null,c={coordDimensions:o,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:d,canOmitUnusedDimensions:!i},f=Ib(s,c),p=gFe(f.dimensions,n.createInvertedIndices,a),h=i?null:r.getSharedDataStore(f),m=pFe(e,{schema:f,store:h}),g=new wi(f,e);g.setCalculationInfo(m);var y=p!=null&&vFe(s)?function(x,_,k,w){return w===p?k:this.defaultDimValueGetter(x,_,k,w)}:null;return g.hasItemOption=!1,g.initData(i?s:h,null,y),g}function vFe(t){if(t.sourceFormat===fo){var e=yFe(t.data||[]);return!He(Ng(e))}}function yFe(t){for(var e=0;e<t.length&&t[e]==null;)e++;return t[e]}var eu=function(){function t(e){this._setting=e||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(e){return this._setting[e]},t.prototype.unionExtent=function(e){var n=this._extent;e[0]<n[0]&&(n[0]=e[0]),e[1]>n[1]&&(n[1]=e[1])},t.prototype.unionExtentFromData=function(e,n){this.unionExtent(e.getApproximateExtent(n))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(e,n){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(n)||(r[1]=n)},t.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(e){this._isBlank=e},t}();HC(eu);var bFe=0,yE=function(){function t(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++bFe}return t.createByAxisModel=function(e){var n=e.option,r=n.data,s=r&&We(r,xFe);return new t({categories:s,needCollect:!s,deduplication:n.dedplication!==!1})},t.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},t.prototype.parseAndCollect=function(e){var n,r=this._needCollect;if(!ot(e)&&!r)return e;if(r&&!this._deduplication)return n=this.categories.length,this.categories[n]=e,n;var s=this._getOrCreateMap();return n=s.get(e),n==null&&(r?(n=this.categories.length,this.categories[n]=e,s.set(e,n)):n=NaN),n},t.prototype._getOrCreateMap=function(){return this._map||(this._map=mt(this.categories))},t}();function xFe(t){return wt(t)&&t.value!=null?t.value:t+""}function bE(t){return t.type==="interval"||t.type==="log"}function _Fe(t,e,n,r){var s={},i=t[1]-t[0],a=s.interval=tte(i/e);n!=null&&a<n&&(a=s.interval=n),r!=null&&a>r&&(a=s.interval=r);var o=s.intervalPrecision=Cre(a),l=s.niceTickExtent=[Mr(Math.ceil(t[0]/a)*a,o),Mr(Math.floor(t[1]/a)*a,o)];return wFe(l,t),s}function i3(t){var e=Math.pow(10,e6(t)),n=t/e;return n?n===2?n=3:n===3?n=5:n*=2:n=1,Mr(n*e)}function Cre(t){return kl(t)+2}function fF(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function wFe(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),fF(t,0,e),fF(t,1,e),t[0]>t[1]&&(t[0]=t[1])}function cA(t,e){return t>=e[0]&&t<=e[1]}function fA(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function pA(t,e){return t*(e[1]-e[0])+e[0]}var hA=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;r.type="ordinal";var s=r.getSetting("ordinalMeta");return s||(s=new yE({})),He(s)&&(s=new yE({categories:We(s,function(i){return wt(i)?i.value:i})})),r._ordinalMeta=s,r._extent=r.getSetting("extent")||[0,s.categories.length-1],r}return e.prototype.parse=function(n){return n==null?NaN:ot(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},e.prototype.contain=function(n){return n=this.parse(n),cA(n,this._extent)&&this._ordinalMeta.categories[n]!=null},e.prototype.normalize=function(n){return n=this._getTickNumber(this.parse(n)),fA(n,this._extent)},e.prototype.scale=function(n){return n=Math.round(pA(n,this._extent)),this.getRawOrdinalNumber(n)},e.prototype.getTicks=function(){for(var n=[],r=this._extent,s=r[0];s<=r[1];)n.push({value:s}),s++;return n},e.prototype.getMinorTicks=function(n){},e.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=n.ordinalNumbers,s=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],a=0,o=this._ordinalMeta.categories.length,l=Math.min(o,r.length);a<l;++a){var d=r[a];s[a]=d,i[d]=a}for(var c=0;a<o;++a){for(;i[c]!=null;)c++;s.push(c),i[c]=a}},e.prototype._getTickNumber=function(n){var r=this._ticksByOrdinalNumber;return r&&n>=0&&n<r.length?r[n]:n},e.prototype.getRawOrdinalNumber=function(n){var r=this._ordinalNumbersByTick;return r&&n>=0&&n<r.length?r[n]:n},e.prototype.getLabel=function(n){if(!this.isBlank()){var r=this.getRawOrdinalNumber(n.value),s=this._ordinalMeta.categories[r];return s==null?"":s+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},e.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(eu);eu.registerClass(hA);var Af=Mr,ud=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return e.prototype.parse=function(n){return n},e.prototype.contain=function(n){return cA(n,this._extent)},e.prototype.normalize=function(n){return fA(n,this._extent)},e.prototype.scale=function(n){return pA(n,this._extent)},e.prototype.setExtent=function(n,r){var s=this._extent;isNaN(n)||(s[0]=parseFloat(n)),isNaN(r)||(s[1]=parseFloat(r))},e.prototype.unionExtent=function(n){var r=this._extent;n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=Cre(n)},e.prototype.getTicks=function(n){var r=this._interval,s=this._extent,i=this._niceExtent,a=this._intervalPrecision,o=[];if(!r)return o;var l=1e4;s[0]<i[0]&&(n?o.push({value:Af(i[0]-r,a)}):o.push({value:s[0]}));for(var d=i[0];d<=i[1]&&(o.push({value:d}),d=Af(d+r,a),d!==o[o.length-1].value);)if(o.length>l)return[];var c=o.length?o[o.length-1].value:i[1];return s[1]>c&&(n?o.push({value:Af(c+r,a)}):o.push({value:s[1]})),o},e.prototype.getMinorTicks=function(n){for(var r=this.getTicks(!0),s=[],i=this.getExtent(),a=1;a<r.length;a++){for(var o=r[a],l=r[a-1],d=0,c=[],f=o.value-l.value,p=f/n;d<n-1;){var h=Af(l.value+(d+1)*p);h>i[0]&&h<i[1]&&c.push(h),d++}s.push(c)}return s},e.prototype.getLabel=function(n,r){if(n==null)return"";var s=r&&r.precision;s==null?s=kl(n.value)||0:s==="auto"&&(s=this._intervalPrecision);var i=Af(n.value,s,!0);return ane(i)},e.prototype.calcNiceTicks=function(n,r,s){n=n||5;var i=this._extent,a=i[1]-i[0];if(isFinite(a)){a<0&&(a=-a,i.reverse());var o=_Fe(i,n,r,s);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},e.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var s=Math.abs(r[0]);n.fixMax||(r[1]+=s/2),r[0]-=s/2}else r[1]=1;var i=r[1]-r[0];isFinite(i)||(r[0]=0,r[1]=1),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var a=this._interval;n.fixMin||(r[0]=Af(Math.floor(r[0]/a)*a)),n.fixMax||(r[1]=Af(Math.ceil(r[1]/a)*a))},e.prototype.setNiceExtent=function(n,r){this._niceExtent=[n,r]},e.type="interval",e}(eu);eu.registerClass(ud);var Are=typeof Float32Array!="undefined",kFe=Are?Float32Array:Array;function Cl(t){return He(t)?Are?new Float32Array(t):t:new kFe(t)}var xE="__ec_stack_";function Tre(t){return t.get("stack")||xE+t.seriesIndex}function V6(t){return t.dim+t.index}function SFe(t){var e=[],n=t.axis,r="axis0";if(n.type==="category"){for(var s=n.getBandWidth(),i=0;i<t.count;i++)e.push(_t({bandWidth:s,axisKey:r,stackId:xE+i},t));for(var a=Ere(e),o=[],i=0;i<t.count;i++){var l=a[r][xE+i];l.offsetCenter=l.offset+l.width/2,o.push(l)}return o}}function $re(t,e){var n=[];return e.eachSeriesByType(t,function(r){Pre(r)&&n.push(r)}),n}function CFe(t){var e={};de(t,function(l){var d=l.coordinateSystem,c=d.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),p=c.dim+"_"+c.index,h=f.getDimensionIndex(f.mapDimension(c.dim)),m=f.getStore(),g=0,y=m.count();g<y;++g){var x=m.get(h,g);e[p]?e[p].push(x):e[p]=[x]}});var n={};for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];if(s){s.sort(function(l,d){return l-d});for(var i=null,a=1;a<s.length;++a){var o=s[a]-s[a-1];o>0&&(i=i===null?o:Math.min(i,o))}n[r]=i}}return n}function Mre(t){var e=CFe(t),n=[];return de(t,function(r){var s=r.coordinateSystem,i=s.getBaseAxis(),a=i.getExtent(),o;if(i.type==="category")o=i.getBandWidth();else if(i.type==="value"||i.type==="time"){var l=i.dim+"_"+i.index,d=e[l],c=Math.abs(a[1]-a[0]),f=i.scale.getExtent(),p=Math.abs(f[1]-f[0]);o=d?c/p*d:c}else{var h=r.getData();o=Math.abs(a[1]-a[0])/h.count()}var m=tt(r.get("barWidth"),o),g=tt(r.get("barMaxWidth"),o),y=tt(r.get("barMinWidth")||(Ire(r)?.5:1),o),x=r.get("barGap"),_=r.get("barCategoryGap");n.push({bandWidth:o,barWidth:m,barMaxWidth:g,barMinWidth:y,barGap:x,barCategoryGap:_,axisKey:V6(i),stackId:Tre(r)})}),Ere(n)}function Ere(t){var e={};de(t,function(r,s){var i=r.axisKey,a=r.bandWidth,o=e[i]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=o.stacks;e[i]=o;var d=r.stackId;l[d]||o.autoWidthCount++,l[d]=l[d]||{width:0,maxWidth:0};var c=r.barWidth;c&&!l[d].width&&(l[d].width=c,c=Math.min(o.remainedWidth,c),o.remainedWidth-=c);var f=r.barMaxWidth;f&&(l[d].maxWidth=f);var p=r.barMinWidth;p&&(l[d].minWidth=p);var h=r.barGap;h!=null&&(o.gap=h);var m=r.barCategoryGap;m!=null&&(o.categoryGap=m)});var n={};return de(e,function(r,s){n[s]={};var i=r.stacks,a=r.bandWidth,o=r.categoryGap;if(o==null){var l=sn(i).length;o=Math.max(35-l*4,15)+"%"}var d=tt(o,a),c=tt(r.gap,1),f=r.remainedWidth,p=r.autoWidthCount,h=(f-d)/(p+(p-1)*c);h=Math.max(h,0),de(i,function(x){var _=x.maxWidth,k=x.minWidth;if(x.width){var w=x.width;_&&(w=Math.min(w,_)),k&&(w=Math.max(w,k)),x.width=w,f-=w+c*w,p--}else{var w=h;_&&_<w&&(w=Math.min(_,f)),k&&k>w&&(w=k),w!==h&&(x.width=w,f-=w+c*w,p--)}}),h=(f-d)/(p+(p-1)*c),h=Math.max(h,0);var m=0,g;de(i,function(x,_){x.width||(x.width=h),g=x,m+=x.width*(1+c)}),g&&(m-=g.width*c);var y=-m/2;de(i,function(x,_){n[s][_]=n[s][_]||{bandWidth:a,offset:y,width:x.width},y+=x.width*(1+c)})}),n}function AFe(t,e,n){if(t&&e){var r=t[V6(e)];return r}}function Dre(t,e){var n=$re(t,e),r=Mre(n);de(n,function(s){var i=s.getData(),a=s.coordinateSystem,o=a.getBaseAxis(),l=Tre(s),d=r[V6(o)][l],c=d.offset,f=d.width;i.setLayout({bandWidth:d.bandWidth,offset:c,size:f})})}function Rre(t){return{seriesType:t,plan:Wg(),reset:function(e){if(Pre(e)){var n=e.getData(),r=e.coordinateSystem,s=r.getBaseAxis(),i=r.getOtherAxis(s),a=n.getDimensionIndex(n.mapDimension(i.dim)),o=n.getDimensionIndex(n.mapDimension(s.dim)),l=e.get("showBackground",!0),d=n.mapDimension(i.dim),c=n.getCalculationInfo("stackResultDimension"),f=jc(n,d)&&!!n.getCalculationInfo("stackedOnSeries"),p=i.isHorizontal(),h=TFe(s,i),m=Ire(e),g=e.get("barMinHeight")||0,y=c&&n.getDimensionIndex(c),x=n.getLayout("size"),_=n.getLayout("offset");return{progress:function(k,w){for(var S=k.count,C=m&&Cl(S*3),A=m&&l&&Cl(S*3),M=m&&Cl(S),E=r.master.getRect(),P=p?E.width:E.height,I,F=w.getStore(),L=0;(I=k.next())!=null;){var z=F.get(f?y:a,I),N=F.get(o,I),q=h,V=void 0;f&&(V=+z-F.get(a,I));var O=void 0,X=void 0,j=void 0,U=void 0;if(p){var G=r.dataToPoint([z,N]);if(f){var ee=r.dataToPoint([V,N]);q=ee[0]}O=q,X=G[1]+_,j=G[0]-q,U=x,Math.abs(j)<g&&(j=(j<0?-1:1)*g)}else{var G=r.dataToPoint([N,z]);if(f){var ee=r.dataToPoint([N,V]);q=ee[1]}O=G[0]+_,X=q,j=x,U=G[1]-q,Math.abs(U)<g&&(U=(U<=0?-1:1)*g)}m?(C[L]=O,C[L+1]=X,C[L+2]=p?j:U,A&&(A[L]=p?E.x:O,A[L+1]=p?X:E.y,A[L+2]=P),M[I]=I):w.setItemLayout(I,{x:O,y:X,width:j,height:U}),L+=3}m&&w.setLayout({largePoints:C,largeDataIndices:M,largeBackgroundPoints:A,valueAxisHorizontal:p})}}}}}}function Pre(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function Ire(t){return t.pipelineContext&&t.pipelineContext.large}function TFe(t,e){var n=e.model.get("startValue");return n||(n=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?n>0?n:1:n))}var $Fe=function(t,e,n,r){for(;n<r;){var s=n+r>>>1;t[s][1]<e?n=s+1:r=s}return n},N6=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="time",r}return e.prototype.getLabel=function(n){var r=this.getSetting("useUTC");return tA(n.value,r9[d7e(Um(this._minLevelUnit))]||r9.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(n,r,s){var i=this.getSetting("useUTC"),a=this.getSetting("locale");return c7e(n,r,s,a,i)},e.prototype.getTicks=function(){var n=this._interval,r=this._extent,s=[];if(!n)return s;s.push({value:r[0],level:0});var i=this.getSetting("useUTC"),a=OFe(this._minLevelUnit,this._approxInterval,i,r);return s=s.concat(a),s.push({value:r[1],level:0}),s},e.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1]&&(r[0]-=Wa,r[1]+=Wa),r[1]===-1/0&&r[0]===1/0){var s=new Date;r[1]=+new Date(s.getFullYear(),s.getMonth(),s.getDate()),r[0]=r[1]-Wa}this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},e.prototype.calcNiceTicks=function(n,r,s){n=n||10;var i=this._extent,a=i[1]-i[0];this._approxInterval=a/n,r!=null&&this._approxInterval<r&&(this._approxInterval=r),s!=null&&this._approxInterval>s&&(this._approxInterval=s);var o=f_.length,l=Math.min($Fe(f_,this._approxInterval,0,o),o-1);this._interval=f_[l][1],this._minLevelUnit=f_[Math.max(l-1,0)][0]},e.prototype.parse=function(n){return hn(n)?n:+Hl(n)},e.prototype.contain=function(n){return cA(this.parse(n),this._extent)},e.prototype.normalize=function(n){return fA(this.parse(n),this._extent)},e.prototype.scale=function(n){return pA(n,this._extent)},e.type="time",e}(ud),f_=[["second",y6],["minute",b6],["hour",m0],["quarter-day",m0*6],["half-day",m0*12],["day",Wa*1.2],["half-week",Wa*3.5],["week",Wa*7],["month",Wa*31],["quarter",Wa*95],["half-year",n9/2],["year",n9]];function MFe(t,e,n,r){var s=Hl(e),i=Hl(n),a=function(m){return s9(s,m,r)===s9(i,m,r)},o=function(){return a("year")},l=function(){return o()&&a("month")},d=function(){return l()&&a("day")},c=function(){return d()&&a("hour")},f=function(){return c()&&a("minute")},p=function(){return f()&&a("second")},h=function(){return p()&&a("millisecond")};switch(t){case"year":return o();case"month":return l();case"day":return d();case"hour":return c();case"minute":return f();case"second":return p();case"millisecond":return h()}}function EFe(t,e){return t/=Wa,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function DFe(t){var e=30*Wa;return t/=e,t>6?6:t>3?3:t>2?2:1}function RFe(t){return t/=m0,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function pF(t,e){return t/=e?b6:y6,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function PFe(t){return tte(t)}function IFe(t,e,n){var r=new Date(t);switch(Um(e)){case"year":case"month":r[ene(n)](0);case"day":r[tne(n)](1);case"hour":r[nne(n)](0);case"minute":r[rne(n)](0);case"second":r[sne(n)](0),r[ine(n)](0)}return r.getTime()}function OFe(t,e,n,r){var s=1e4,i=Zte,a=0;function o(P,I,F,L,z,N,q){for(var V=new Date(I),O=I,X=V[L]();O<F&&O<=r[1];)q.push({value:O}),X+=P,V[z](X),O=V.getTime();q.push({value:O,notAdd:!0})}function l(P,I,F){var L=[],z=!I.length;if(!MFe(Um(P),r[0],r[1],n)){z&&(I=[{value:IFe(new Date(r[0]),P,n)},{value:r[1]}]);for(var N=0;N<I.length-1;N++){var q=I[N].value,V=I[N+1].value;if(q!==V){var O=void 0,X=void 0,j=void 0,U=!1;switch(P){case"year":O=Math.max(1,Math.round(e/Wa/365)),X=x6(n),j=f7e(n);break;case"half-year":case"quarter":case"month":O=DFe(e),X=Hm(n),j=ene(n);break;case"week":case"half-week":case"day":O=EFe(e),X=nA(n),j=tne(n),U=!0;break;case"half-day":case"quarter-day":case"hour":O=RFe(e),X=w1(n),j=nne(n);break;case"minute":O=pF(e,!0),X=rA(n),j=rne(n);break;case"second":O=pF(e,!1),X=sA(n),j=sne(n);break;case"millisecond":O=PFe(e),X=iA(n),j=ine(n);break}o(O,q,V,X,j,U,L),P==="year"&&F.length>1&&N===0&&F.unshift({value:F[0].value-O})}}for(var N=0;N<L.length;N++)F.push(L[N]);return L}}for(var d=[],c=[],f=0,p=0,h=0;h<i.length&&a++<s;++h){var m=Um(i[h]);if(u7e(i[h])){l(i[h],d[d.length-1]||[],c);var g=i[h+1]?Um(i[h+1]):null;if(m!==g){if(c.length){p=f,c.sort(function(P,I){return P.value-I.value});for(var y=[],x=0;x<c.length;++x){var _=c[x].value;(x===0||c[x-1].value!==_)&&(y.push(c[x]),_>=r[0]&&_<=r[1]&&f++)}var k=(r[1]-r[0])/e;if(f>k*1.5&&p>k/1.5||(d.push(y),f>k||t===i[h]))break}c=[]}}}for(var w=Sn(We(d,function(P){return Sn(P,function(I){return I.value>=r[0]&&I.value<=r[1]&&!I.notAdd})}),function(P){return P.length>0}),S=[],C=w.length-1,h=0;h<w.length;++h)for(var A=w[h],M=0;M<A.length;++M)S.push({value:A[M].value,level:C-h});S.sort(function(P,I){return P.value-I.value});for(var E=[],h=0;h<S.length;++h)(h===0||S[h].value!==S[h-1].value)&&E.push(S[h]);return E}eu.registerClass(N6);var hF=eu.prototype,v0=ud.prototype,LFe=Mr,VFe=Math.floor,NFe=Math.ceil,p_=Math.pow,go=Math.log,j6=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new ud,n._interval=0,n}return e.prototype.getTicks=function(n){var r=this._originalScale,s=this._extent,i=r.getExtent(),a=v0.getTicks.call(this,n);return We(a,function(o){var l=o.value,d=Mr(p_(this.base,l));return d=l===s[0]&&this._fixMin?h_(d,i[0]):d,d=l===s[1]&&this._fixMax?h_(d,i[1]):d,{value:d}},this)},e.prototype.setExtent=function(n,r){var s=go(this.base);n=go(Math.max(0,n))/s,r=go(Math.max(0,r))/s,v0.setExtent.call(this,n,r)},e.prototype.getExtent=function(){var n=this.base,r=hF.getExtent.call(this);r[0]=p_(n,r[0]),r[1]=p_(n,r[1]);var s=this._originalScale,i=s.getExtent();return this._fixMin&&(r[0]=h_(r[0],i[0])),this._fixMax&&(r[1]=h_(r[1],i[1])),r},e.prototype.unionExtent=function(n){this._originalScale.unionExtent(n);var r=this.base;n[0]=go(n[0])/go(r),n[1]=go(n[1])/go(r),hF.unionExtent.call(this,n)},e.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(n){n=n||10;var r=this._extent,s=r[1]-r[0];if(!(s===1/0||s<=0)){var i=U8e(s),a=n/s*i;for(a<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var o=[Mr(NFe(r[0]/i)*i),Mr(VFe(r[1]/i)*i)];this._interval=i,this._niceExtent=o}},e.prototype.calcNiceExtent=function(n){v0.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},e.prototype.parse=function(n){return n},e.prototype.contain=function(n){return n=go(n)/go(this.base),cA(n,this._extent)},e.prototype.normalize=function(n){return n=go(n)/go(this.base),fA(n,this._extent)},e.prototype.scale=function(n){return n=pA(n,this._extent),p_(this.base,n)},e.type="log",e}(eu),Ore=j6.prototype;Ore.getMinorTicks=v0.getMinorTicks;Ore.getLabel=v0.getLabel;function h_(t,e){return LFe(t,kl(e))}eu.registerClass(j6);var jFe=function(){function t(e,n,r){this._prepareParams(e,n,r)}return t.prototype._prepareParams=function(e,n,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var s=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var i=n.get("min",!0);i==null&&(i=n.get("startValue",!0));var a=this._modelMinRaw=i;bt(a)?this._modelMinNum=m_(e,a({min:r[0],max:r[1]})):a!=="dataMin"&&(this._modelMinNum=m_(e,a));var o=this._modelMaxRaw=n.get("max",!0);if(bt(o)?this._modelMaxNum=m_(e,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=m_(e,o)),s)this._axisDataLen=n.getCategories().length;else{var l=n.get("boundaryGap"),d=He(l)?l:[l||0,l||0];typeof d[0]=="boolean"||typeof d[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Fo(d[0],1),Fo(d[1],1)]}},t.prototype.calculate=function(){var e=this._isOrdinal,n=this._dataMin,r=this._dataMax,s=this._axisDataLen,i=this._boundaryGapInner,a=e?null:r-n||Math.abs(n),o=this._modelMinRaw==="dataMin"?n:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,d=o!=null,c=l!=null;o==null&&(o=e?s?0:NaN:n-i[0]*a),l==null&&(l=e?s?s-1:NaN:r+i[1]*a),(o==null||!isFinite(o))&&(o=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=f1(o)||f1(l)||e&&!s;this._needCrossZero&&(o>0&&l>0&&!d&&(o=0),o<0&&l<0&&!c&&(l=0));var p=this._determinedMin,h=this._determinedMax;return p!=null&&(o=p,d=!0),h!=null&&(l=h,c=!0),{min:o,max:l,minFixed:d,maxFixed:c,isBlank:f}},t.prototype.modifyDataMinMax=function(e,n){this[BFe[e]]=n},t.prototype.setDeterminedMinMax=function(e,n){var r=FFe[e];this[r]=n},t.prototype.freeze=function(){this.frozen=!0},t}(),FFe={min:"_determinedMin",max:"_determinedMax"},BFe={min:"_dataMin",max:"_dataMax"};function Lre(t,e,n){var r=t.rawExtentInfo;return r||(r=new jFe(t,e,n),t.rawExtentInfo=r,r)}function m_(t,e){return e==null?null:f1(e)?NaN:t.parse(e)}function Vre(t,e){var n=t.type,r=Lre(t,e,t.getExtent()).calculate();t.setBlank(r.isBlank);var s=r.min,i=r.max,a=e.ecModel;if(a&&n==="time"){var o=$re("bar",a),l=!1;if(de(o,function(f){l=l||f.getBaseAxis()===e.axis}),l){var d=Mre(o),c=zFe(s,i,e,d);s=c.min,i=c.max}}return{extent:[s,i],fixMin:r.minFixed,fixMax:r.maxFixed}}function zFe(t,e,n,r){var s=n.axis.getExtent(),i=Math.abs(s[1]-s[0]),a=AFe(r,n.axis);if(a===void 0)return{min:t,max:e};var o=1/0;de(a,function(h){o=Math.min(h.offset,o)});var l=-1/0;de(a,function(h){l=Math.max(h.offset+h.width,l)}),o=Math.abs(o),l=Math.abs(l);var d=o+l,c=e-t,f=1-(o+l)/i,p=c/f-c;return e+=p*(l/d),t-=p*(o/d),{min:t,max:e}}function xg(t,e){var n=e,r=Vre(t,n),s=r.extent,i=n.get("splitNumber");t instanceof j6&&(t.base=n.get("logBase"));var a=t.type,o=n.get("interval"),l=a==="interval"||a==="time";t.setExtent(s[0],s[1]),t.calcNiceExtent({splitNumber:i,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?n.get("minInterval"):null,maxInterval:l?n.get("maxInterval"):null}),o!=null&&t.setInterval&&t.setInterval(o)}function mA(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new hA({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new N6({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(eu.getClass(e)||ud)}}function UFe(t){var e=t.scale.getExtent(),n=e[0],r=e[1];return!(n>0&&r>0||n<0&&r<0)}function Kg(t){var e=t.getLabelModel().get("formatter"),n=t.type==="category"?t.scale.getExtent()[0]:null;return t.scale.type==="time"?function(r){return function(s,i){return t.scale.getFormattedLabel(s,i,r)}}(e):ot(e)?function(r){return function(s){var i=t.scale.getLabel(s),a=r.replace("{value}",i!=null?i:"");return a}}(e):bt(e)?function(r){return function(s,i){return n!=null&&(i=s.value-n),r(F6(t,s),i,s.level!=null?{level:s.level}:null)}}(e):function(r){return t.scale.getLabel(r)}}function F6(t,e){return t.type==="category"?t.scale.getLabel(e):e.value}function HFe(t){var e=t.model,n=t.scale;if(!(!e.get(["axisLabel","show"])||n.isBlank())){var r,s,i=n.getExtent();n instanceof hA?s=n.count():(r=n.getTicks(),s=r.length);var a=t.getLabelModel(),o=Kg(t),l,d=1;s>40&&(d=Math.ceil(s/40));for(var c=0;c<s;c+=d){var f=r?r[c]:{value:i[0]+c},p=o(f,c),h=a.getTextRect(p),m=qFe(h,a.get("rotate")||0);l?l.union(m):l=m}return l}}function qFe(t,e){var n=e*Math.PI/180,r=t.width,s=t.height,i=r*Math.abs(Math.cos(n))+Math.abs(s*Math.sin(n)),a=r*Math.abs(Math.sin(n))+Math.abs(s*Math.cos(n)),o=new Gt(t.x,t.y,i,a);return o}function B6(t){var e=t.get("interval");return e==null?"auto":e}function Nre(t){return t.type==="category"&&B6(t.getLabelModel())===0}function Uk(t,e){var n={};return de(t.mapDimensionsAll(e),function(r){n[Sre(t,r)]=!0}),sn(n)}function WFe(t,e,n){e&&de(Uk(e,n),function(r){var s=e.getApproximateExtent(r);s[0]<t[0]&&(t[0]=s[0]),s[1]>t[1]&&(t[1]=s[1])})}var Ob=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},t.prototype.getCoordSysModel=function(){},t}(),GFe=1e-8;function mF(t,e){return Math.abs(t-e)<GFe}function Kf(t,e,n){var r=0,s=t[0];if(!s)return!1;for(var i=1;i<t.length;i++){var a=t[i];r+=Su(s[0],s[1],a[0],a[1],e,n),s=a}var o=t[0];return(!mF(s[0],o[0])||!mF(s[1],o[1]))&&(r+=Su(s[0],s[1],o[0],o[1],e,n)),r!==0}var YFe=[];function a3(t,e){for(var n=0;n<t.length;n++)Ls(t[n],t[n],e)}function gF(t,e,n,r){for(var s=0;s<t.length;s++){var i=t[s];r&&(i=r.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(ic(e,e,i),ac(n,n,i))}}function KFe(t){for(var e=0,n=0,r=0,s=t.length,i=t[s-1][0],a=t[s-1][1],o=0;o<s;o++){var l=t[o][0],d=t[o][1],c=i*d-l*a;e+=c,n+=(i+l)*c,r+=(a+d)*c,i=l,a=d}return e?[n/e/3,r/e/3,e]:[t[0][0]||0,t[0][1]||0]}var jre=function(){function t(e){this.name=e}return t.prototype.setCenter=function(e){this._center=e},t.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},t}(),vF=function(){function t(e,n){this.type="polygon",this.exterior=e,this.interiors=n}return t}(),yF=function(){function t(e){this.type="linestring",this.points=e}return t}(),Fre=function(t){Te(e,t);function e(n,r,s){var i=t.call(this,n)||this;return i.type="geoJSON",i.geometries=r,i._center=s&&[s[0],s[1]],i}return e.prototype.calcCenter=function(){for(var n=this.geometries,r,s=0,i=0;i<n.length;i++){var a=n[i],o=a.exterior,l=o&&o.length;l>s&&(r=a,s=l)}if(r)return KFe(r.exterior);var d=this.getBoundingRect();return[d.x+d.width/2,d.y+d.height/2]},e.prototype.getBoundingRect=function(n){var r=this._rect;if(r&&!n)return r;var s=[1/0,1/0],i=[-1/0,-1/0],a=this.geometries;return de(a,function(o){o.type==="polygon"?gF(o.exterior,s,i,n):de(o.points,function(l){gF(l,s,i,n)})}),isFinite(s[0])&&isFinite(s[1])&&isFinite(i[0])&&isFinite(i[1])||(s[0]=s[1]=i[0]=i[1]=0),r=new Gt(s[0],s[1],i[0]-s[0],i[1]-s[1]),n||(this._rect=r),r},e.prototype.contain=function(n){var r=this.getBoundingRect(),s=this.geometries;if(!r.contain(n[0],n[1]))return!1;e:for(var i=0,a=s.length;i<a;i++){var o=s[i];if(o.type==="polygon"){var l=o.exterior,d=o.interiors;if(Kf(l,n[0],n[1])){for(var c=0;c<(d?d.length:0);c++)if(Kf(d[c],n[0],n[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(n,r,s,i){var a=this.getBoundingRect(),o=a.width/a.height;s?i||(i=s/o):s=o*i;for(var l=new Gt(n,r,s,i),d=a.calculateTransform(l),c=this.geometries,f=0;f<c.length;f++){var p=c[f];p.type==="polygon"?(a3(p.exterior,d),de(p.interiors,function(h){a3(h,d)})):de(p.points,function(h){a3(h,d)})}a=this._rect,a.copy(l),this._center=[a.x+a.width/2,a.y+a.height/2]},e.prototype.cloneShallow=function(n){n==null&&(n=this.name);var r=new e(n,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(jre),XFe=function(t){Te(e,t);function e(n,r){var s=t.call(this,n)||this;return s.type="geoSVG",s._elOnlyForCalculate=r,s}return e.prototype.calcCenter=function(){for(var n=this._elOnlyForCalculate,r=n.getBoundingRect(),s=[r.x+r.width/2,r.y+r.height/2],i=FC(YFe),a=n;a&&!a.isGeoSVGGraphicRoot;)qu(i,a.getLocalTransform(),i),a=a.parent;return Vg(i,i),Ls(s,s,i),s},e}(jre);function QFe(t){if(!t.UTF8Encoding)return t;var e=t,n=e.UTF8Scale;n==null&&(n=1024);var r=e.features;return de(r,function(s){var i=s.geometry,a=i.encodeOffsets,o=i.coordinates;if(a)switch(i.type){case"LineString":i.coordinates=Bre(o,a,n);break;case"Polygon":o3(o,a,n);break;case"MultiLineString":o3(o,a,n);break;case"MultiPolygon":de(o,function(l,d){return o3(l,a[d],n)})}}),e.UTF8Encoding=!1,e}function o3(t,e,n){for(var r=0;r<t.length;r++)t[r]=Bre(t[r],e[r],n)}function Bre(t,e,n){for(var r=[],s=e[0],i=e[1],a=0;a<t.length;a+=2){var o=t.charCodeAt(a)-64,l=t.charCodeAt(a+1)-64;o=o>>1^-(o&1),l=l>>1^-(l&1),o+=s,l+=i,s=o,i=l,r.push([o/n,l/n])}return r}function ZFe(t,e){return t=QFe(t),We(Sn(t.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var r=n.properties,s=n.geometry,i=[];switch(s.type){case"Polygon":var a=s.coordinates;i.push(new vF(a[0],a.slice(1)));break;case"MultiPolygon":de(s.coordinates,function(l){l[0]&&i.push(new vF(l[0],l.slice(1)))});break;case"LineString":i.push(new yF([s.coordinates]));break;case"MultiLineString":i.push(new yF(s.coordinates))}var o=new Fre(r[e||"name"],i,r.cp);return o.properties=r,o})}var $1=ln();function zre(t,e){var n=We(e,function(r){return t.scale.parse(r)});return t.type==="time"&&n.length>0&&(n.sort(),n.unshift(n[0]),n.push(n[n.length-1])),n}function JFe(t){var e=t.getLabelModel().get("customValues");if(e){var n=Kg(t),r=t.scale.getExtent(),s=zre(t,e),i=Sn(s,function(a){return a>=r[0]&&a<=r[1]});return{labels:We(i,function(a){var o={value:a};return{formattedLabel:n(o),rawLabel:t.scale.getLabel(o),tickValue:a}})}}return t.type==="category"?tBe(t):rBe(t)}function eBe(t,e){var n=t.getTickModel().get("customValues");if(n){var r=t.scale.getExtent(),s=zre(t,n);return{ticks:Sn(s,function(i){return i>=r[0]&&i<=r[1]})}}return t.type==="category"?nBe(t,e):{ticks:We(t.scale.getTicks(),function(i){return i.value})}}function tBe(t){var e=t.getLabelModel(),n=Ure(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function Ure(t,e){var n=Hre(t,"labels"),r=B6(e),s=qre(n,r);if(s)return s;var i,a;return bt(r)?i=Yre(t,r):(a=r==="auto"?sBe(t):r,i=Gre(t,a)),Wre(n,r,{labels:i,labelCategoryInterval:a})}function nBe(t,e){var n=Hre(t,"ticks"),r=B6(e),s=qre(n,r);if(s)return s;var i,a;if((!e.get("show")||t.scale.isBlank())&&(i=[]),bt(r))i=Yre(t,r,!0);else if(r==="auto"){var o=Ure(t,t.getLabelModel());a=o.labelCategoryInterval,i=We(o.labels,function(l){return l.tickValue})}else a=r,i=Gre(t,a,!0);return Wre(n,r,{ticks:i,tickCategoryInterval:a})}function rBe(t){var e=t.scale.getTicks(),n=Kg(t);return{labels:We(e,function(r,s){return{level:r.level,formattedLabel:n(r,s),rawLabel:t.scale.getLabel(r),tickValue:r.value}})}}function Hre(t,e){return $1(t)[e]||($1(t)[e]=[])}function qre(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function Wre(t,e,n){return t.push({key:e,value:n}),n}function sBe(t){var e=$1(t).autoInterval;return e!=null?e:$1(t).autoInterval=t.calculateCategoryInterval()}function iBe(t){var e=aBe(t),n=Kg(t),r=(e.axisRotate-e.labelRotate)/180*Math.PI,s=t.scale,i=s.getExtent(),a=s.count();if(i[1]-i[0]<1)return 0;var o=1;a>40&&(o=Math.max(1,Math.floor(a/40)));for(var l=i[0],d=t.dataToCoord(l+1)-t.dataToCoord(l),c=Math.abs(d*Math.cos(r)),f=Math.abs(d*Math.sin(r)),p=0,h=0;l<=i[1];l+=o){var m=0,g=0,y=Sb(n({value:l}),e.font,"center","top");m=y.width*1.3,g=y.height*1.3,p=Math.max(p,m,7),h=Math.max(h,g,7)}var x=p/c,_=h/f;isNaN(x)&&(x=1/0),isNaN(_)&&(_=1/0);var k=Math.max(0,Math.floor(Math.min(x,_))),w=$1(t.model),S=t.getExtent(),C=w.lastAutoInterval,A=w.lastTickCount;return C!=null&&A!=null&&Math.abs(C-k)<=1&&Math.abs(A-a)<=1&&C>k&&w.axisExtent0===S[0]&&w.axisExtent1===S[1]?k=C:(w.lastTickCount=a,w.lastAutoInterval=k,w.axisExtent0=S[0],w.axisExtent1=S[1]),k}function aBe(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function Gre(t,e,n){var r=Kg(t),s=t.scale,i=s.getExtent(),a=t.getLabelModel(),o=[],l=Math.max((e||0)+1,1),d=i[0],c=s.count();d!==0&&l>1&&c/l>2&&(d=Math.round(Math.ceil(d/l)*l));var f=Nre(t),p=a.get("showMinLabel")||f,h=a.get("showMaxLabel")||f;p&&d!==i[0]&&g(i[0]);for(var m=d;m<=i[1];m+=l)g(m);h&&m-l!==i[1]&&g(i[1]);function g(y){var x={value:y};o.push(n?y:{formattedLabel:r(x),rawLabel:s.getLabel(x),tickValue:y})}return o}function Yre(t,e,n){var r=t.scale,s=Kg(t),i=[];return de(r.getTicks(),function(a){var o=r.getLabel(a),l=a.value;e(a.value,o)&&i.push(n?l:{formattedLabel:s(a),rawLabel:o,tickValue:l})}),i}var bF=[0,1],Ho=function(){function t(e,n,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=n,this._extent=r||[0,0]}return t.prototype.contain=function(e){var n=this._extent,r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return e>=r&&e<=s},t.prototype.containData=function(e){return this.scale.contain(e)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(e){return Jee(e||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(e,n){var r=this._extent;r[0]=e,r[1]=n},t.prototype.dataToCoord=function(e,n){var r=this._extent,s=this.scale;return e=s.normalize(e),this.onBand&&s.type==="ordinal"&&(r=r.slice(),xF(r,s.count())),An(e,bF,r,n)},t.prototype.coordToData=function(e,n){var r=this._extent,s=this.scale;this.onBand&&s.type==="ordinal"&&(r=r.slice(),xF(r,s.count()));var i=An(e,r,bF,n);return this.scale.scale(i)},t.prototype.pointToData=function(e,n){},t.prototype.getTicksCoords=function(e){e=e||{};var n=e.tickModel||this.getTickModel(),r=eBe(this,n),s=r.ticks,i=We(s,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),a=n.get("alignWithLabel");return oBe(this,i,a,e.clamp),i},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),n=e.get("splitNumber");n>0&&n<100||(n=5);var r=this.scale.getMinorTicks(n),s=We(r,function(i){return We(i,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return s},t.prototype.getViewLabels=function(){return JFe(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var e=this._extent,n=this.scale.getExtent(),r=n[1]-n[0]+(this.onBand?1:0);r===0&&(r=1);var s=Math.abs(e[1]-e[0]);return Math.abs(s)/r},t.prototype.calculateCategoryInterval=function(){return iBe(this)},t}();function xF(t,e){var n=t[1]-t[0],r=e,s=n/r/2;t[0]+=s,t[1]-=s}function oBe(t,e,n,r){var s=e.length;if(!t.onBand||n||!s)return;var i=t.getExtent(),a,o;if(s===1)e[0].coord=i[0],a=e[1]={coord:i[1],tickValue:e[0].tickValue};else{var l=e[s-1].tickValue-e[0].tickValue,d=(e[s-1].coord-e[0].coord)/l;de(e,function(h){h.coord-=d/2});var c=t.scale.getExtent();o=1+c[1]-e[s-1].tickValue,a={coord:e[s-1].coord+d*o,tickValue:c[1]+1},e.push(a)}var f=i[0]>i[1];p(e[0].coord,i[0])&&(r?e[0].coord=i[0]:e.shift()),r&&p(i[0],e[0].coord)&&e.unshift({coord:i[0]}),p(i[1],a.coord)&&(r?a.coord=i[1]:e.pop()),r&&p(a.coord,i[1])&&e.push({coord:i[1]});function p(h,m){return h=Mr(h),m=Mr(m),f?h>m:h<m}}var zv=Math.PI*2,Tf=ql.CMD,lBe=["top","right","bottom","left"];function uBe(t,e,n,r,s){var i=n.width,a=n.height;switch(t){case"top":r.set(n.x+i/2,n.y-e),s.set(0,-1);break;case"bottom":r.set(n.x+i/2,n.y+a+e),s.set(0,1);break;case"left":r.set(n.x-e,n.y+a/2),s.set(-1,0);break;case"right":r.set(n.x+i+e,n.y+a/2),s.set(1,0);break}}function dBe(t,e,n,r,s,i,a,o,l){a-=t,o-=e;var d=Math.sqrt(a*a+o*o);a/=d,o/=d;var c=a*n+t,f=o*n+e;if(Math.abs(r-s)%zv<1e-4)return l[0]=c,l[1]=f,d-n;if(i){var p=r;r=fa(s),s=fa(p)}else r=fa(r),s=fa(s);r>s&&(s+=zv);var h=Math.atan2(o,a);if(h<0&&(h+=zv),h>=r&&h<=s||h+zv>=r&&h+zv<=s)return l[0]=c,l[1]=f,d-n;var m=n*Math.cos(r)+t,g=n*Math.sin(r)+e,y=n*Math.cos(s)+t,x=n*Math.sin(s)+e,_=(m-a)*(m-a)+(g-o)*(g-o),k=(y-a)*(y-a)+(x-o)*(x-o);return _<k?(l[0]=m,l[1]=g,Math.sqrt(_)):(l[0]=y,l[1]=x,Math.sqrt(k))}function Hk(t,e,n,r,s,i,a,o){var l=s-t,d=i-e,c=n-t,f=r-e,p=Math.sqrt(c*c+f*f);c/=p,f/=p;var h=l*c+d*f,m=h/p;o&&(m=Math.min(Math.max(m,0),1)),m*=p;var g=a[0]=t+m*c,y=a[1]=e+m*f;return Math.sqrt((g-s)*(g-s)+(y-i)*(y-i))}function Kre(t,e,n,r,s,i,a){n<0&&(t=t+n,n=-n),r<0&&(e=e+r,r=-r);var o=t+n,l=e+r,d=a[0]=Math.min(Math.max(s,t),o),c=a[1]=Math.min(Math.max(i,e),l);return Math.sqrt((d-s)*(d-s)+(c-i)*(c-i))}var _o=[];function cBe(t,e,n){var r=Kre(e.x,e.y,e.width,e.height,t.x,t.y,_o);return n.set(_o[0],_o[1]),r}function fBe(t,e,n){for(var r=0,s=0,i=0,a=0,o,l,d=1/0,c=e.data,f=t.x,p=t.y,h=0;h<c.length;){var m=c[h++];h===1&&(r=c[h],s=c[h+1],i=r,a=s);var g=d;switch(m){case Tf.M:i=c[h++],a=c[h++],r=i,s=a;break;case Tf.L:g=Hk(r,s,c[h],c[h+1],f,p,_o,!0),r=c[h++],s=c[h++];break;case Tf.C:g=Oee(r,s,c[h++],c[h++],c[h++],c[h++],c[h],c[h+1],f,p,_o),r=c[h++],s=c[h++];break;case Tf.Q:g=Vee(r,s,c[h++],c[h++],c[h],c[h+1],f,p,_o),r=c[h++],s=c[h++];break;case Tf.A:var y=c[h++],x=c[h++],_=c[h++],k=c[h++],w=c[h++],S=c[h++];h+=1;var C=!!(1-c[h++]);o=Math.cos(w)*_+y,l=Math.sin(w)*k+x,h<=1&&(i=o,a=l);var A=(f-y)*k/_+y;g=dBe(y,x,k,w,w+S,C,A,p,_o),r=Math.cos(w+S)*_+y,s=Math.sin(w+S)*k+x;break;case Tf.R:i=r=c[h++],a=s=c[h++];var M=c[h++],E=c[h++];g=Kre(i,a,M,E,f,p,_o);break;case Tf.Z:g=Hk(r,s,i,a,f,p,_o,!0),r=i,s=a;break}g<d&&(d=g,n.set(_o[0],_o[1]))}return d}var To=new qt,Wn=new qt,Pr=new qt,Al=new qt,bl=new qt;function _F(t,e){if(t){var n=t.getTextGuideLine(),r=t.getTextContent();if(r&&n){var s=t.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],a=s.candidates||lBe,o=r.getBoundingRect().clone();o.applyTransform(r.getComputedTransform());var l=1/0,d=s.anchor,c=t.getComputedTransform(),f=c&&Vg([],c),p=e.get("length2")||0;d&&Pr.copy(d);for(var h=0;h<a.length;h++){var m=a[h];uBe(m,0,o,To,Al),qt.scaleAndAdd(Wn,To,Al,p),Wn.transform(f);var g=t.getBoundingRect(),y=d?d.distance(Wn):t instanceof en?fBe(Wn,t.path,Pr):cBe(Wn,g,Pr);y<l&&(l=y,Wn.transform(c),Pr.transform(c),Pr.toArray(i[0]),Wn.toArray(i[1]),To.toArray(i[2]))}Xre(i,e.get("minTurnAngle")),n.setShape({points:i})}}}var qk=[],gi=new qt;function Xre(t,e){if(e<=180&&e>0){e=e/180*Math.PI,To.fromArray(t[0]),Wn.fromArray(t[1]),Pr.fromArray(t[2]),qt.sub(Al,To,Wn),qt.sub(bl,Pr,Wn);var n=Al.len(),r=bl.len();if(!(n<.001||r<.001)){Al.scale(1/n),bl.scale(1/r);var s=Al.dot(bl),i=Math.cos(e);if(i<s){var a=Hk(Wn.x,Wn.y,Pr.x,Pr.y,To.x,To.y,qk,!1);gi.fromArray(qk),gi.scaleAndAdd(bl,a/Math.tan(Math.PI-e));var o=Pr.x!==Wn.x?(gi.x-Wn.x)/(Pr.x-Wn.x):(gi.y-Wn.y)/(Pr.y-Wn.y);if(isNaN(o))return;o<0?qt.copy(gi,Wn):o>1&&qt.copy(gi,Pr),gi.toArray(t[1])}}}}function pBe(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,To.fromArray(t[0]),Wn.fromArray(t[1]),Pr.fromArray(t[2]),qt.sub(Al,Wn,To),qt.sub(bl,Pr,Wn);var r=Al.len(),s=bl.len();if(!(r<.001||s<.001)){Al.scale(1/r),bl.scale(1/s);var i=Al.dot(e),a=Math.cos(n);if(i<a){var o=Hk(Wn.x,Wn.y,Pr.x,Pr.y,To.x,To.y,qk,!1);gi.fromArray(qk);var l=Math.PI/2,d=Math.acos(bl.dot(e)),c=l+d-n;if(c>=l)qt.copy(gi,Pr);else{gi.scaleAndAdd(bl,o/Math.tan(Math.PI/2-c));var f=Pr.x!==Wn.x?(gi.x-Wn.x)/(Pr.x-Wn.x):(gi.y-Wn.y)/(Pr.y-Wn.y);if(isNaN(f))return;f<0?qt.copy(gi,Wn):f>1&&qt.copy(gi,Pr)}gi.toArray(t[1])}}}}function l3(t,e,n,r){var s=n==="normal",i=s?t:t.ensureState(n);i.ignore=e;var a=r.get("smooth");a&&a===!0&&(a=.3),i.shape=i.shape||{},a>0&&(i.shape.smooth=a);var o=r.getModel("lineStyle").getLineStyle();s?t.useStyle(o):i.style=o}function hBe(t,e){var n=e.smooth,r=e.points;if(r)if(t.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var s=sc(r[0],r[1]),i=sc(r[1],r[2]);if(!s||!i){t.lineTo(r[1][0],r[1][1]),t.lineTo(r[2][0],r[2][1]);return}var a=Math.min(s,i)*n,o=Tw([],r[1],r[0],a/s),l=Tw([],r[1],r[2],a/i),d=Tw([],o,l,.5);t.bezierCurveTo(o[0],o[1],o[0],o[1],d[0],d[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)t.lineTo(r[c][0],r[c][1])}function z6(t,e,n){var r=t.getTextGuideLine(),s=t.getTextContent();if(!s){r&&t.removeTextGuideLine();return}for(var i=e.normal,a=i.get("show"),o=s.ignore,l=0;l<b1.length;l++){var d=b1[l],c=e[d],f=d==="normal";if(c){var p=c.get("show"),h=f?o:Ot(s.states[d]&&s.states[d].ignore,o);if(h||!Ot(p,a)){var m=f?r:r&&r.states[d];m&&(m.ignore=!0),r&&l3(r,!0,d,c);continue}r||(r=new Ii,t.setTextGuideLine(r),!f&&(o||!a)&&l3(r,!0,"normal",e.normal),t.stateProxy&&(r.stateProxy=t.stateProxy)),l3(r,!1,d,c)}}if(r){_t(r.style,n),r.style.fill=null;var g=i.get("showAbove"),y=t.textGuideLineConfig=t.textGuideLineConfig||{};y.showAbove=g||!1,r.buildPath=hBe}}function U6(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},r=0;r<Di.length;r++){var s=Di[r];n[s]=t.getModel([s,e])}return n}function Qre(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.defaultAttr.ignore){var s=r.label,i=s.getComputedTransform(),a=s.getBoundingRect(),o=!i||i[1]<1e-5&&i[2]<1e-5,l=s.style.margin||0,d=a.clone();d.applyTransform(i),d.x-=l/2,d.y-=l/2,d.width+=l,d.height+=l;var c=o?new $k(a,i):null;e.push({label:s,labelLine:r.labelLine,rect:d,localRect:a,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:o,transform:i})}}return e}function Zre(t,e,n,r,s,i){var a=t.length;if(a<2)return;t.sort(function(C,A){return C.rect[e]-A.rect[e]});for(var o=0,l,d=!1,c=0;c<a;c++){var f=t[c],p=f.rect;l=p[e]-o,l<0&&(p[e]-=l,f.label[e]-=l,d=!0),o=p[e]+p[n]}var h=t[0],m=t[a-1],g,y;x(),g<0&&w(-g,.8),y<0&&w(y,.8),x(),_(g,y,1),_(y,g,-1),x(),g<0&&S(-g),y<0&&S(y);function x(){g=h.rect[e]-r,y=s-m.rect[e]-m.rect[n]}function _(C,A,M){if(C<0){var E=Math.min(A,-C);if(E>0){k(E*M,0,a);var P=E+C;P<0&&w(-P*M,1)}else w(-C*M,1)}}function k(C,A,M){C!==0&&(d=!0);for(var E=A;E<M;E++){var P=t[E],I=P.rect;I[e]+=C,P.label[e]+=C}}function w(C,A){for(var M=[],E=0,P=1;P<a;P++){var I=t[P-1].rect,F=Math.max(t[P].rect[e]-I[e]-I[n],0);M.push(F),E+=F}if(E){var L=Math.min(Math.abs(C)/E,A);if(C>0)for(var P=0;P<a-1;P++){var z=M[P]*L;k(z,0,P+1)}else for(var P=a-1;P>0;P--){var z=M[P-1]*L;k(-z,P,a)}}}function S(C){var A=C<0?-1:1;C=Math.abs(C);for(var M=Math.ceil(C/(a-1)),E=0;E<a-1;E++)if(A>0?k(M,0,E+1):k(-M,a-E-1,a),C-=M,C<=0)return}return d}function mBe(t,e,n,r){return Zre(t,"x","width",e,n)}function Jre(t,e,n,r){return Zre(t,"y","height",e,n)}function ese(t){var e=[];t.sort(function(g,y){return y.priority-g.priority});var n=new Gt(0,0,0,0);function r(g){if(!g.ignore){var y=g.ensureState("emphasis");y.ignore==null&&(y.ignore=!1)}g.ignore=!0}for(var s=0;s<t.length;s++){var i=t[s],a=i.axisAligned,o=i.localRect,l=i.transform,d=i.label,c=i.labelLine;n.copy(i.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var f=i.obb,p=!1,h=0;h<e.length;h++){var m=e[h];if(n.intersect(m.rect)){if(a&&m.axisAligned){p=!0;break}if(m.obb||(m.obb=new $k(m.localRect,m.transform)),f||(f=new $k(o,l)),f.intersect(m.obb)){p=!0;break}}}p?(r(d),c&&r(c)):(d.attr("ignore",i.defaultAttr.ignore),c&&c.attr("ignore",i.defaultAttr.labelGuideIgnore),e.push(i))}}function gBe(t){if(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice());return e}}function vBe(t,e){var n=t.label,r=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:gBe(r&&r.shape.points)}}var wF=["align","verticalAlign","width","height","fontSize"],ui=new Nu,u3=ln(),yBe=ln();function g_(t,e,n){for(var r=0;r<n.length;r++){var s=n[r];e[s]!=null&&(t[s]=e[s])}}var v_=["x","y","rotation"],bBe=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(e,n,r,s,i){var a=s.style,o=s.__hostTarget,l=o.textConfig||{},d=s.getComputedTransform(),c=s.getBoundingRect().plain();Gt.applyTransform(c,c,d),d?ui.setLocalTransform(d):(ui.x=ui.y=ui.rotation=ui.originX=ui.originY=0,ui.scaleX=ui.scaleY=1),ui.rotation=fa(ui.rotation);var f=s.__hostTarget,p;if(f){p=f.getBoundingRect().plain();var h=f.getComputedTransform();Gt.applyTransform(p,p,h)}var m=p&&f.getTextGuideLine();this._labelList.push({label:s,labelLine:m,seriesModel:r,dataIndex:e,dataType:n,layoutOption:i,computedLayoutOption:null,rect:c,hostRect:p,priority:p?p.width*p.height:0,defaultAttr:{ignore:s.ignore,labelGuideIgnore:m&&m.ignore,x:ui.x,y:ui.y,scaleX:ui.scaleX,scaleY:ui.scaleY,rotation:ui.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:s.cursor,attachedPos:l.position,attachedRot:l.rotation}})},t.prototype.addLabelsOfSeries=function(e){var n=this;this._chartViewList.push(e);var r=e.__model,s=r.get("labelLayout");(bt(s)||sn(s).length)&&e.group.traverse(function(i){if(i.ignore)return!0;var a=i.getTextContent(),o=Et(i);a&&!a.disableLabelLayout&&n._addLabel(o.dataIndex,o.dataType,r,a,s)})},t.prototype.updateLayoutConfig=function(e){var n=e.getWidth(),r=e.getHeight();function s(k,w){return function(){_F(k,w)}}for(var i=0;i<this._labelList.length;i++){var a=this._labelList[i],o=a.label,l=o.__hostTarget,d=a.defaultAttr,c=void 0;bt(a.layoutOption)?c=a.layoutOption(vBe(a,l)):c=a.layoutOption,c=c||{},a.computedLayoutOption=c;var f=Math.PI/180;l&&l.setTextConfig({local:!1,position:c.x!=null||c.y!=null?null:d.attachedPos,rotation:c.rotate!=null?c.rotate*f:d.attachedRot,offset:[c.dx||0,c.dy||0]});var p=!1;if(c.x!=null?(o.x=tt(c.x,n),o.setStyle("x",0),p=!0):(o.x=d.x,o.setStyle("x",d.style.x)),c.y!=null?(o.y=tt(c.y,r),o.setStyle("y",0),p=!0):(o.y=d.y,o.setStyle("y",d.style.y)),c.labelLinePoints){var h=l.getTextGuideLine();h&&(h.setShape({points:c.labelLinePoints}),p=!1)}var m=u3(o);m.needsUpdateLabelLine=p,o.rotation=c.rotate!=null?c.rotate*f:d.rotation,o.scaleX=d.scaleX,o.scaleY=d.scaleY;for(var g=0;g<wF.length;g++){var y=wF[g];o.setStyle(y,c[y]!=null?c[y]:d.style[y])}if(c.draggable){if(o.draggable=!0,o.cursor="move",l){var x=a.seriesModel;if(a.dataIndex!=null){var _=a.seriesModel.getData(a.dataType);x=_.getItemModel(a.dataIndex)}o.on("drag",s(l,x.getModel("labelLine")))}}else o.off("drag"),o.cursor=d.cursor}},t.prototype.layout=function(e){var n=e.getWidth(),r=e.getHeight(),s=Qre(this._labelList),i=Sn(s,function(l){return l.layoutOption.moveOverlap==="shiftX"}),a=Sn(s,function(l){return l.layoutOption.moveOverlap==="shiftY"});mBe(i,0,n),Jre(a,0,r);var o=Sn(s,function(l){return l.layoutOption.hideOverlap});ese(o)},t.prototype.processLabelsOverall=function(){var e=this;de(this._chartViewList,function(n){var r=n.__model,s=n.ignoreLabelLineUpdate,i=r.isAnimationEnabled();n.group.traverse(function(a){if(a.ignore&&!a.forceLabelAnimation)return!0;var o=!s,l=a.getTextContent();!o&&l&&(o=u3(l).needsUpdateLabelLine),o&&e._updateLabelLine(a,r),i&&e._animateLabels(a,r)})})},t.prototype._updateLabelLine=function(e,n){var r=e.getTextContent(),s=Et(e),i=s.dataIndex;if(r&&i!=null){var a=n.getData(s.dataType),o=a.getItemModel(i),l={},d=a.getItemVisual(i,"style");if(d){var c=a.getVisual("drawType");l.stroke=d[c]}var f=o.getModel("labelLine");z6(e,U6(o),l),_F(e,f)}},t.prototype._animateLabels=function(e,n){var r=e.getTextContent(),s=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!Bm(e))){var i=u3(r),a=i.oldLayout,o=Et(e),l=o.dataIndex,d={x:r.x,y:r.y,rotation:r.rotation},c=n.getData(o.dataType);if(a){r.attr(a);var p=e.prevStates;p&&(Xt(p,"select")>=0&&r.attr(i.oldLayoutSelect),Xt(p,"emphasis")>=0&&r.attr(i.oldLayoutEmphasis)),bn(r,d,n,l)}else if(r.attr(d),!Bg(r).valueAnimation){var f=Ot(r.style.opacity,1);r.style.opacity=0,ur(r,{style:{opacity:f}},n,l)}if(i.oldLayout=d,r.states.select){var h=i.oldLayoutSelect={};g_(h,d,v_),g_(h,r.states.select,v_)}if(r.states.emphasis){var m=i.oldLayoutEmphasis={};g_(m,d,v_),g_(m,r.states.emphasis,v_)}Gte(r,l,c,n,n)}if(s&&!s.ignore&&!s.invisible){var i=yBe(s),a=i.oldLayout,g={points:s.shape.points};a?(s.attr({shape:a}),bn(s,{shape:g},n)):(s.setShape(g),s.style.strokePercent=0,ur(s,{style:{strokePercent:1}},n)),i.oldLayout=g}},t}(),d3=ln();function xBe(t){t.registerUpdateLifecycle("series:beforeupdate",function(e,n,r){var s=d3(n).labelManager;s||(s=d3(n).labelManager=new bBe),s.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(e,n,r){var s=d3(n).labelManager;r.updatedSeries.forEach(function(i){s.addLabelsOfSeries(n.getViewOfSeriesModel(i))}),s.updateLayoutConfig(n),s.layout(n),s.processLabelsOverall()})}var c3=Math.sin,f3=Math.cos,tse=Math.PI,$f=Math.PI*2,_Be=180/tse,nse=function(){function t(){}return t.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},t.prototype.moveTo=function(e,n){this._add("M",e,n)},t.prototype.lineTo=function(e,n){this._add("L",e,n)},t.prototype.bezierCurveTo=function(e,n,r,s,i,a){this._add("C",e,n,r,s,i,a)},t.prototype.quadraticCurveTo=function(e,n,r,s){this._add("Q",e,n,r,s)},t.prototype.arc=function(e,n,r,s,i,a){this.ellipse(e,n,r,r,0,s,i,a)},t.prototype.ellipse=function(e,n,r,s,i,a,o,l){var d=o-a,c=!l,f=Math.abs(d),p=uc(f-$f)||(c?d>=$f:-d>=$f),h=d>0?d%$f:d%$f+$f,m=!1;p?m=!0:uc(f)?m=!1:m=h>=tse==!!c;var g=e+r*f3(a),y=n+s*c3(a);this._start&&this._add("M",g,y);var x=Math.round(i*_Be);if(p){var _=1/this._p,k=(c?1:-1)*($f-_);this._add("A",r,s,x,1,+c,e+r*f3(a+k),n+s*c3(a+k)),_>.01&&this._add("A",r,s,x,0,+c,g,y)}else{var w=e+r*f3(o),S=n+s*c3(o);this._add("A",r,s,x,+m,+c,w,S)}},t.prototype.rect=function(e,n,r,s){this._add("M",e,n),this._add("l",r,0),this._add("l",0,s),this._add("l",-r,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(e,n,r,s,i,a,o,l,d){for(var c=[],f=this._p,p=1;p<arguments.length;p++){var h=arguments[p];if(isNaN(h)){this._invalid=!0;return}c.push(Math.round(h*f)/f)}this._d.push(e+c.join(" ")),this._start=e==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),H6="none",wBe=Math.round;function kBe(t){var e=t.fill;return e!=null&&e!==H6}function SBe(t){var e=t.stroke;return e!=null&&e!==H6}var _E=["lineCap","miterLimit","lineJoin"],CBe=We(_E,function(t){return"stroke-"+t.toLowerCase()});function ABe(t,e,n,r){var s=e.opacity==null?1:e.opacity;if(n instanceof Cs){t("opacity",s);return}if(kBe(e)){var i=g1(e.fill);t("fill",i.color);var a=e.fillOpacity!=null?e.fillOpacity*i.opacity*s:i.opacity*s;a<1&&t("fill-opacity",a)}else t("fill",H6);if(SBe(e)){var o=g1(e.stroke);t("stroke",o.color);var l=e.strokeNoScale?n.getLineScale():1,d=l?(e.lineWidth||0)/l:0,c=e.strokeOpacity!=null?e.strokeOpacity*o.opacity*s:o.opacity*s,f=e.strokeFirst;if(d!==1&&t("stroke-width",d),f&&t("paint-order",f?"stroke":"fill"),c<1&&t("stroke-opacity",c),e.lineDash){var p=R6(n),h=p[0],m=p[1];h&&(m=wBe(m||0),t("stroke-dasharray",h.join(",")),(m||r)&&t("stroke-dashoffset",m))}for(var g=0;g<_E.length;g++){var y=_E[g];if(e[y]!==Ak[y]){var x=e[y]||Ak[y];x&&t(CBe[g],x)}}}}var rse="http://www.w3.org/2000/svg",sse="http://www.w3.org/1999/xlink",TBe="http://www.w3.org/2000/xmlns/",$Be="http://www.w3.org/XML/1998/namespace",kF="ecmeta_";function ise(t){return document.createElementNS(rse,t)}function us(t,e,n,r,s){return{tag:t,attrs:n||{},children:r,text:s,key:e}}function MBe(t,e){var n=[];if(e)for(var r in e){var s=e[r],i=r;s!==!1&&(s!==!0&&s!=null&&(i+='="'+s+'"'),n.push(i))}return"<"+t+" "+n.join(" ")+">"}function EBe(t){return"</"+t+">"}function q6(t,e){e=e||{};var n=e.newline?`
`:"";function r(s){var i=s.children,a=s.tag,o=s.attrs,l=s.text;return MBe(a,o)+(a!=="style"?bi(l):l||"")+(i?""+n+We(i,function(d){return r(d)}).join(n)+n:"")+EBe(a)}return r(t)}function DBe(t,e,n){n=n||{};var r=n.newline?`
`:"",s=" {"+r,i=r+"}",a=We(sn(t),function(l){return l+s+We(sn(t[l]),function(d){return d+":"+t[l][d]+";"}).join(r)+i}).join(r),o=We(sn(e),function(l){return"@keyframes "+l+s+We(sn(e[l]),function(d){return d+s+We(sn(e[l][d]),function(c){var f=e[l][d][c];return c==="d"&&(f='path("'+f+'")'),c+":"+f+";"}).join(r)+i}).join(r)+i}).join(r);return!a&&!o?"":["<![CDATA[",a,o,"]]>"].join(r)}function wE(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function SF(t,e,n,r){return us("svg","root",{width:t,height:e,xmlns:rse,"xmlns:xlink":sse,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+t+" "+e:!1},n)}var RBe=0;function ase(){return RBe++}var CF={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Lf="transform-origin";function PBe(t,e,n){var r=Ne({},t.shape);Ne(r,e),t.buildPath(n,r);var s=new nse;return s.reset(Hee(t)),n.rebuildPath(s,1),s.generateStr(),s.getStr()}function IBe(t,e){var n=e.originX,r=e.originY;(n||r)&&(t[Lf]=n+"px "+r+"px")}var OBe={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function ose(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function LBe(t,e,n){var r=t.shape.paths,s={},i,a;if(de(r,function(l){var d=wE(n.zrId);d.animation=!0,gA(l,{},d,!0);var c=d.cssAnims,f=d.cssNodes,p=sn(c),h=p.length;if(h){a=p[h-1];var m=c[a];for(var g in m){var y=m[g];s[g]=s[g]||{d:""},s[g].d+=y.d||""}for(var x in f){var _=f[x].animation;_.indexOf(a)>=0&&(i=_)}}}),!!i){e.d=!1;var o=ose(s,n);return i.replace(a,o)}}function AF(t){return ot(t)?CF[t]?"cubic-bezier("+CF[t]+")":QP(t)?t:"":""}function gA(t,e,n,r){var s=t.animators,i=s.length,a=[];if(t instanceof f6){var o=LBe(t,e,n);if(o)a.push(o);else if(!i)return}else if(!i)return;for(var l={},d=0;d<i;d++){var c=s[d],f=[c.getMaxTime()/1e3+"s"],p=AF(c.getClip().easing),h=c.getDelay();p?f.push(p):f.push("linear"),h&&f.push(h/1e3+"s"),c.getLoop()&&f.push("infinite");var m=f.join(" ");l[m]=l[m]||[m,[]],l[m][1].push(c)}function g(_){var k=_[1],w=k.length,S={},C={},A={},M="animation-timing-function";function E(re,te,K){for(var le=re.getTracks(),H=re.getMaxTime(),Y=0;Y<le.length;Y++){var B=le[Y];if(B.needsAnimate()){var ae=B.keyframes,be=B.propName;if(K&&(be=K(be)),be)for(var fe=0;fe<ae.length;fe++){var me=ae[fe],ye=Math.round(me.time/H*100)+"%",Ee=AF(me.easing),Re=me.rawValue;(ot(Re)||hn(Re))&&(te[ye]=te[ye]||{},te[ye][be]=me.rawValue,Ee&&(te[ye][M]=Ee))}}}}for(var P=0;P<w;P++){var I=k[P],F=I.targetName;F?F==="shape"&&E(I,C):!r&&E(I,S)}for(var L in S){var z={};Kee(z,t),Ne(z,S[L]);var N=qee(z),q=S[L][M];A[L]=N?{transform:N}:{},IBe(A[L],z),q&&(A[L][M]=q)}var V,O=!0;for(var L in C){A[L]=A[L]||{};var X=!V,q=C[L][M];X&&(V=new ql);var j=V.len();V.reset(),A[L].d=PBe(t,C[L],V);var U=V.len();if(!X&&j!==U){O=!1;break}q&&(A[L][M]=q)}if(!O)for(var L in A)delete A[L].d;if(!r)for(var P=0;P<w;P++){var I=k[P],F=I.targetName;F==="style"&&E(I,A,function(le){return OBe[le]})}for(var G=sn(A),ee=!0,ie,P=1;P<G.length;P++){var ne=G[P-1],ce=G[P];if(A[ne][Lf]!==A[ce][Lf]){ee=!1;break}ie=A[ne][Lf]}if(ee&&ie){for(var L in A)A[L][Lf]&&delete A[L][Lf];e[Lf]=ie}if(Sn(G,function(re){return sn(A[re]).length>0}).length){var oe=ose(A,n);return oe+" "+_[0]+" both"}}for(var y in l){var o=g(l[y]);o&&a.push(o)}if(a.length){var x=n.zrId+"-cls-"+ase();n.cssNodes["."+x]={animation:a.join(",")},e.class=x}}function VBe(t,e,n){if(!t.ignore)if(t.isSilent()){var r={"pointer-events":"none"};TF(r,e,n)}else{var s=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},i=s.fill;if(!i){var a=t.style&&t.style.fill,o=t.states.select&&t.states.select.style&&t.states.select.style.fill,l=t.currentStates.indexOf("select")>=0&&o||a;l&&(i=IM(l))}var d=s.lineWidth;if(d){var c=!s.strokeNoScale&&t.transform?t.transform[0]:1;d=d/c}var r={cursor:"pointer"};i&&(r.fill=i),s.stroke&&(r.stroke=s.stroke),d&&(r["stroke-width"]=d),TF(r,e,n)}}function TF(t,e,n,r){var s=JSON.stringify(t),i=n.cssStyleCache[s];i||(i=n.zrId+"-cls-"+ase(),n.cssStyleCache[s]=i,n.cssNodes["."+i+":hover"]=t),e.class=e.class?e.class+" "+i:i}var M1=Math.round;function lse(t){return t&&ot(t.src)}function use(t){return t&&bt(t.toDataURL)}function W6(t,e,n,r){ABe(function(s,i){var a=s==="fill"||s==="stroke";a&&Uee(i)?cse(e,t,s,r):a&&ZP(i)?fse(n,t,s,r):t[s]=i,a&&r.ssr&&i==="none"&&(t["pointer-events"]="visible")},e,n,!1),HBe(n,t,r)}function G6(t,e){var n=L8e(e);n&&(n.each(function(r,s){r!=null&&(t[(kF+s).toLowerCase()]=r+"")}),e.isSilent()&&(t[kF+"silent"]="true"))}function $F(t){return uc(t[0]-1)&&uc(t[1])&&uc(t[2])&&uc(t[3]-1)}function NBe(t){return uc(t[4])&&uc(t[5])}function Y6(t,e,n){if(e&&!(NBe(e)&&$F(e))){var r=1e4;t.transform=$F(e)?"translate("+M1(e[4]*r)/r+" "+M1(e[5]*r)/r+")":i8e(e)}}function MF(t,e,n){for(var r=t.points,s=[],i=0;i<r.length;i++)s.push(M1(r[i][0]*n)/n),s.push(M1(r[i][1]*n)/n);e.points=s.join(" ")}function EF(t){return!t.smooth}function jBe(t){var e=We(t,function(n){return typeof n=="string"?[n,n]:n});return function(n,r,s){for(var i=0;i<e.length;i++){var a=e[i],o=n[a[0]];o!=null&&(r[a[1]]=M1(o*s)/s)}}}var FBe={circle:[jBe(["cx","cy","r"])],polyline:[MF,EF],polygon:[MF,EF]};function BBe(t){for(var e=t.animators,n=0;n<e.length;n++)if(e[n].targetName==="shape")return!0;return!1}function dse(t,e){var n=t.style,r=t.shape,s=FBe[t.type],i={},a=e.animation,o="path",l=t.style.strokePercent,d=e.compress&&Hee(t)||4;if(s&&!e.willUpdate&&!(s[1]&&!s[1](r))&&!(a&&BBe(t))&&!(l<1)){o=t.type;var c=Math.pow(10,d);s[0](r,i,c)}else{var f=!t.path||t.shapeChanged();t.path||t.createPathProxy();var p=t.path;f&&(p.beginPath(),t.buildPath(p,t.shape),t.pathUpdated());var h=p.getVersion(),m=t,g=m.__svgPathBuilder;(m.__svgPathVersion!==h||!g||l!==m.__svgPathStrokePercent)&&(g||(g=m.__svgPathBuilder=new nse),g.reset(d),p.rebuildPath(g,l),g.generateStr(),m.__svgPathVersion=h,m.__svgPathStrokePercent=l),i.d=g.getStr()}return Y6(i,t.transform),W6(i,n,t,e),G6(i,t),e.animation&&gA(t,i,e),e.emphasis&&VBe(t,i,e),us(o,t.id+"",i)}function zBe(t,e){var n=t.style,r=n.image;if(r&&!ot(r)&&(lse(r)?r=r.src:use(r)&&(r=r.toDataURL())),!!r){var s=n.x||0,i=n.y||0,a=n.width,o=n.height,l={href:r,width:a,height:o};return s&&(l.x=s),i&&(l.y=i),Y6(l,t.transform),W6(l,n,t,e),G6(l,t),e.animation&&gA(t,l,e),us("image",t.id+"",l)}}function UBe(t,e){var n=t.style,r=n.text;if(r!=null&&(r+=""),!(!r||isNaN(n.x)||isNaN(n.y))){var s=n.font||Ic,i=n.x||0,a=o8e(n.y||0,zC(s),n.textBaseline),o=a8e[n.textAlign]||n.textAlign,l={"dominant-baseline":"central","text-anchor":o};if(xte(n)){var d="",c=n.fontStyle,f=bte(n.fontSize);if(!parseFloat(f))return;var p=n.fontFamily||xee,h=n.fontWeight;d+="font-size:"+f+";font-family:"+p+";",c&&c!=="normal"&&(d+="font-style:"+c+";"),h&&h!=="normal"&&(d+="font-weight:"+h+";"),l.style=d}else l.style="font: "+s;return r.match(/\s/)&&(l["xml:space"]="preserve"),i&&(l.x=i),a&&(l.y=a),Y6(l,t.transform),W6(l,n,t,e),G6(l,t),e.animation&&gA(t,l,e),us("text",t.id+"",l,void 0,r)}}function DF(t,e){if(t instanceof en)return dse(t,e);if(t instanceof Cs)return zBe(t,e);if(t instanceof gg)return UBe(t,e)}function HBe(t,e,n){var r=t.style;if(l8e(r)){var s=u8e(t),i=n.shadowCache,a=i[s];if(!a){var o=t.getGlobalScale(),l=o[0],d=o[1];if(!l||!d)return;var c=r.shadowOffsetX||0,f=r.shadowOffsetY||0,p=r.shadowBlur,h=g1(r.shadowColor),m=h.opacity,g=h.color,y=p/2/l,x=p/2/d,_=y+" "+x;a=n.zrId+"-s"+n.shadowIdx++,n.defs[a]=us("filter",a,{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},[us("feDropShadow","",{dx:c/l,dy:f/d,stdDeviation:_,"flood-color":g,"flood-opacity":m})]),i[s]=a}e.filter=BC(a)}}function cse(t,e,n,r){var s=t[n],i,a={gradientUnits:s.global?"userSpaceOnUse":"objectBoundingBox"};if(Bee(s))i="linearGradient",a.x1=s.x,a.y1=s.y,a.x2=s.x2,a.y2=s.y2;else if(zee(s))i="radialGradient",a.cx=Ot(s.x,.5),a.cy=Ot(s.y,.5),a.r=Ot(s.r,.5);else return;for(var o=s.colorStops,l=[],d=0,c=o.length;d<c;++d){var f=OM(o[d].offset)*100+"%",p=o[d].color,h=g1(p),m=h.color,g=h.opacity,y={offset:f};y["stop-color"]=m,g<1&&(y["stop-opacity"]=g),l.push(us("stop",d+"",y))}var x=us(i,"",a,l),_=q6(x),k=r.gradientCache,w=k[_];w||(w=r.zrId+"-g"+r.gradientIdx++,k[_]=w,a.id=w,r.defs[w]=us(i,w,a,l)),e[n]=BC(w)}function fse(t,e,n,r){var s=t.style[n],i=t.getBoundingRect(),a={},o=s.repeat,l=o==="no-repeat",d=o==="repeat-x",c=o==="repeat-y",f;if(Fee(s)){var p=s.imageWidth,h=s.imageHeight,m=void 0,g=s.image;if(ot(g)?m=g:lse(g)?m=g.src:use(g)&&(m=g.toDataURL()),typeof Image=="undefined"){var y="Image width/height must been given explictly in svg-ssr renderer.";Ei(p,y),Ei(h,y)}else if(p==null||h==null){var x=function(P,I){if(P){var F=P.elm,L=p||I.width,z=h||I.height;P.tag==="pattern"&&(d?(z=1,L/=i.width):c&&(L=1,z/=i.height)),P.attrs.width=L,P.attrs.height=z,F&&(F.setAttribute("width",L),F.setAttribute("height",z))}},_=s6(m,null,t,function(P){l||x(C,P),x(f,P)});_&&_.width&&_.height&&(p=p||_.width,h=h||_.height)}f=us("image","img",{href:m,width:p,height:h}),a.width=p,a.height=h}else s.svgElement&&(f=kt(s.svgElement),a.width=s.svgWidth,a.height=s.svgHeight);if(f){var k,w;l?k=w=1:d?(w=1,k=a.width/i.width):c?(k=1,w=a.height/i.height):a.patternUnits="userSpaceOnUse",k!=null&&!isNaN(k)&&(a.width=k),w!=null&&!isNaN(w)&&(a.height=w);var S=qee(s);S&&(a.patternTransform=S);var C=us("pattern","",a,[f]),A=q6(C),M=r.patternCache,E=M[A];E||(E=r.zrId+"-p"+r.patternIdx++,M[A]=E,a.id=E,C=r.defs[E]=us("pattern",E,a,[f])),e[n]=BC(E)}}function qBe(t,e,n){var r=n.clipPathCache,s=n.defs,i=r[t.id];if(!i){i=n.zrId+"-c"+n.clipPathIdx++;var a={id:i};r[t.id]=i,s[i]=us("clipPath",i,a,[dse(t,n)])}e["clip-path"]=BC(i)}function RF(t){return document.createTextNode(t)}function Xf(t,e,n){t.insertBefore(e,n)}function PF(t,e){t.removeChild(e)}function IF(t,e){t.appendChild(e)}function pse(t){return t.parentNode}function hse(t){return t.nextSibling}function p3(t,e){t.textContent=e}var OF=58,WBe=120,GBe=us("","");function kE(t){return t===void 0}function ml(t){return t!==void 0}function YBe(t,e,n){for(var r={},s=e;s<=n;++s){var i=t[s].key;i!==void 0&&(r[i]=s)}return r}function xy(t,e){var n=t.key===e.key,r=t.tag===e.tag;return r&&n}function E1(t){var e,n=t.children,r=t.tag;if(ml(r)){var s=t.elm=ise(r);if(K6(GBe,t),He(n))for(e=0;e<n.length;++e){var i=n[e];i!=null&&IF(s,E1(i))}else ml(t.text)&&!wt(t.text)&&IF(s,RF(t.text))}else t.elm=RF(t.text);return t.elm}function mse(t,e,n,r,s){for(;r<=s;++r){var i=n[r];i!=null&&Xf(t,E1(i),e)}}function Wk(t,e,n,r){for(;n<=r;++n){var s=e[n];if(s!=null)if(ml(s.tag)){var i=pse(s.elm);PF(i,s.elm)}else PF(t,s.elm)}}function K6(t,e){var n,r=e.elm,s=t&&t.attrs||{},i=e.attrs||{};if(s!==i){for(n in i){var a=i[n],o=s[n];o!==a&&(a===!0?r.setAttribute(n,""):a===!1?r.removeAttribute(n):n==="style"?r.style.cssText=a:n.charCodeAt(0)!==WBe?r.setAttribute(n,a):n==="xmlns:xlink"||n==="xmlns"?r.setAttributeNS(TBe,n,a):n.charCodeAt(3)===OF?r.setAttributeNS($Be,n,a):n.charCodeAt(5)===OF?r.setAttributeNS(sse,n,a):r.setAttribute(n,a))}for(n in s)n in i||r.removeAttribute(n)}}function KBe(t,e,n){for(var r=0,s=0,i=e.length-1,a=e[0],o=e[i],l=n.length-1,d=n[0],c=n[l],f,p,h,m;r<=i&&s<=l;)a==null?a=e[++r]:o==null?o=e[--i]:d==null?d=n[++s]:c==null?c=n[--l]:xy(a,d)?(_m(a,d),a=e[++r],d=n[++s]):xy(o,c)?(_m(o,c),o=e[--i],c=n[--l]):xy(a,c)?(_m(a,c),Xf(t,a.elm,hse(o.elm)),a=e[++r],c=n[--l]):xy(o,d)?(_m(o,d),Xf(t,o.elm,a.elm),o=e[--i],d=n[++s]):(kE(f)&&(f=YBe(e,r,i)),p=f[d.key],kE(p)?Xf(t,E1(d),a.elm):(h=e[p],h.tag!==d.tag?Xf(t,E1(d),a.elm):(_m(h,d),e[p]=void 0,Xf(t,h.elm,a.elm))),d=n[++s]);(r<=i||s<=l)&&(r>i?(m=n[l+1]==null?null:n[l+1].elm,mse(t,m,n,s,l)):Wk(t,e,r,i))}function _m(t,e){var n=e.elm=t.elm,r=t.children,s=e.children;t!==e&&(K6(t,e),kE(e.text)?ml(r)&&ml(s)?r!==s&&KBe(n,r,s):ml(s)?(ml(t.text)&&p3(n,""),mse(n,null,s,0,s.length-1)):ml(r)?Wk(n,r,0,r.length-1):ml(t.text)&&p3(n,""):t.text!==e.text&&(ml(r)&&Wk(n,r,0,r.length-1),p3(n,e.text)))}function XBe(t,e){if(xy(t,e))_m(t,e);else{var n=t.elm,r=pse(n);E1(e),r!==null&&(Xf(r,e.elm,hse(n)),Wk(r,[t],0,0))}return e}var QBe=0,ZBe=function(){function t(e,n,r){if(this.type="svg",this.refreshHover=LF(),this.configLayer=LF(),this.storage=n,this._opts=r=Ne({},r),this.root=e,this._id="zr"+QBe++,this._oldVNode=SF(r.width,r.height),e&&!r.ssr){var s=this._viewport=document.createElement("div");s.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=ise("svg");K6(null,this._oldVNode),s.appendChild(i),e.appendChild(s)}this.resize(r.width,r.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",XBe(this._oldVNode,e),this._oldVNode=e}},t.prototype.renderOneToVNode=function(e){return DF(e,wE(this._id))},t.prototype.renderToVNode=function(e){e=e||{};var n=this.storage.getDisplayList(!0),r=this._width,s=this._height,i=wE(this._id);i.animation=e.animation,i.willUpdate=e.willUpdate,i.compress=e.compress,i.emphasis=e.emphasis,i.ssr=this._opts.ssr;var a=[],o=this._bgVNode=JBe(r,s,this._backgroundColor,i);o&&a.push(o);var l=e.compress?null:this._mainVNode=us("g","main",{},[]);this._paintList(n,i,l?l.children:a),l&&a.push(l);var d=We(sn(i.defs),function(p){return i.defs[p]});if(d.length&&a.push(us("defs","defs",{},d)),e.animation){var c=DBe(i.cssNodes,i.cssAnims,{newline:!0});if(c){var f=us("style","stl",{},[],c);a.push(f)}}return SF(r,s,a,e.useViewBox)},t.prototype.renderToString=function(e){return e=e||{},q6(this.renderToVNode({animation:Ot(e.cssAnimation,!0),emphasis:Ot(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Ot(e.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(e,n,r){for(var s=e.length,i=[],a=0,o,l,d=0,c=0;c<s;c++){var f=e[c];if(!f.invisible){var p=f.__clipPaths,h=p&&p.length||0,m=l&&l.length||0,g=void 0;for(g=Math.max(h-1,m-1);g>=0&&!(p&&l&&p[g]===l[g]);g--);for(var y=m-1;y>g;y--)a--,o=i[a-1];for(var x=g+1;x<h;x++){var _={};qBe(p[x],_,n);var k=us("g","clip-g-"+d++,_,[]);(o?o.children:r).push(k),i[a++]=k,o=k}l=p;var w=DF(f,n);w&&(o?o.children:r).push(w)}}},t.prototype.resize=function(e,n){var r=this._opts,s=this.root,i=this._viewport;if(e!=null&&(r.width=e),n!=null&&(r.height=n),s&&i&&(i.style.display="none",e=Mm(s,0,r),n=Mm(s,1,r),i.style.display=""),this._width!==e||this._height!==n){if(this._width=e,this._height=n,i){var a=i.style;a.width=e+"px",a.height=n+"px"}if(ZP(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",e),o.setAttribute("height",n));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",n))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(e){var n=this.renderToString(),r="data:image/svg+xml;";return e?(n=c8e(n),n&&r+"base64,"+n):r+"charset=UTF-8,"+encodeURIComponent(n)},t}();function LF(t){return function(){}}function JBe(t,e,n,r){var s;if(n&&n!=="none")if(s=us("rect","bg",{width:t,height:e,x:"0",y:"0"}),Uee(n))cse({fill:n},s.attrs,"fill",r);else if(ZP(n))fse({style:{fill:n},dirty:Vr,getBoundingRect:function(){return{width:t,height:e}}},s.attrs,"fill",r);else{var i=g1(n),a=i.color,o=i.opacity;s.attrs.fill=a,o<1&&(s.attrs["fill-opacity"]=o)}return s}function eze(t){t.registerPainter("svg",ZBe)}function VF(t,e,n){var r=Oc.createCanvas(),s=e.getWidth(),i=e.getHeight(),a=r.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=s+"px",a.height=i+"px",r.setAttribute("data-zr-dom-id",t)),r.width=s*n,r.height=i*n,r}var h3=function(t){Te(e,t);function e(n,r,s){var i=t.call(this)||this;i.motionBlur=!1,i.lastFrameAlpha=.7,i.dpr=1,i.virtual=!1,i.config={},i.incremental=!1,i.zlevel=0,i.maxRepaintRectCount=5,i.__dirty=!0,i.__firstTimePaint=!0,i.__used=!1,i.__drawIndex=0,i.__startIndex=0,i.__endIndex=0,i.__prevStartIndex=null,i.__prevEndIndex=null;var a;s=s||Sk,typeof n=="string"?a=VF(n,r,s):wt(n)&&(a=n,n=a.id),i.id=n,i.dom=a;var o=a.style;return o&&(Aee(a),a.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),i.painter=r,i.dpr=s,i}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=VF("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},e.prototype.createRepaintRects=function(n,r,s,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],o=this.maxRepaintRectCount,l=!1,d=new Gt(0,0,0,0);function c(_){if(!(!_.isFinite()||_.isZero()))if(a.length===0){var k=new Gt(0,0,0,0);k.copy(_),a.push(k)}else{for(var w=!1,S=1/0,C=0,A=0;A<a.length;++A){var M=a[A];if(M.intersect(_)){var E=new Gt(0,0,0,0);E.copy(M),E.union(_),a[A]=E,w=!0;break}else if(l){d.copy(_),d.union(M);var P=_.width*_.height,I=M.width*M.height,F=d.width*d.height,L=F-P-I;L<S&&(S=L,C=A)}}if(l&&(a[C].union(_),w=!0),!w){var k=new Gt(0,0,0,0);k.copy(_),a.push(k)}l||(l=a.length>=o)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var p=n[f];if(p){var h=p.shouldBePainted(s,i,!0,!0),m=p.__isRendered&&(p.__dirty&ua||!h)?p.getPrevPaintRect():null;m&&c(m);var g=h&&(p.__dirty&ua||!p.__isRendered)?p.getPaintRect():null;g&&c(g)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var p=r[f],h=p&&p.shouldBePainted(s,i,!0,!0);if(p&&(!h||!p.__zr)&&p.__isRendered){var m=p.getPrevPaintRect();m&&c(m)}}var y;do{y=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var x=f+1;x<a.length;)a[f].intersect(a[x])?(y=!0,a[f].union(a[x]),a.splice(x,1)):x++;f++}}while(y);return this._paintRects=a,a},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(n,r){var s=this.dpr,i=this.dom,a=i.style,o=this.domBack;a&&(a.width=n+"px",a.height=r+"px"),i.width=n*s,i.height=r*s,o&&(o.width=n*s,o.height=r*s,s!==1&&this.ctxBack.scale(s,s))},e.prototype.clear=function(n,r,s){var i=this.dom,a=this.ctx,o=i.width,l=i.height;r=r||this.clearColor;var d=this.motionBlur&&!n,c=this.lastFrameAlpha,f=this.dpr,p=this;d&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,o/f,l/f));var h=this.domBack;function m(g,y,x,_){if(a.clearRect(g,y,x,_),r&&r!=="transparent"){var k=void 0;if(NC(r)){var w=r.global||r.__width===x&&r.__height===_;k=w&&r.__canvasGradient||pE(a,r,{x:0,y:0,width:x,height:_}),r.__canvasGradient=k,r.__width=x,r.__height=_}else bLe(r)&&(r.scaleX=r.scaleX||f,r.scaleY=r.scaleY||f,k=hE(a,r,{dirty:function(){p.setUnpainted(),p.painter.refresh()}}));a.save(),a.fillStyle=k||r,a.fillRect(g,y,x,_),a.restore()}d&&(a.save(),a.globalAlpha=c,a.drawImage(h,g,y,x,_),a.restore())}!s||d?m(0,0,o,l):s.length&&de(s,function(g){m(g.x*f,g.y*f,g.width*f,g.height*f)})},e}(co),NF=1e5,Mf=314159,y_=.01,tze=.001;function nze(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function rze(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var sze=function(){function t(e,n,r,s){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=Ne({},r||{}),this.dpr=r.devicePixelRatio||Sk,this._singleCanvas=i,this.root=e;var a=e.style;a&&(Aee(e),e.innerHTML=""),this.storage=n;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(i){var c=e,f=c.width,p=c.height;r.width!=null&&(f=r.width),r.height!=null&&(p=r.height),this.dpr=r.devicePixelRatio||1,c.width=f*this.dpr,c.height=p*this.dpr,this._width=f,this._height=p;var h=new h3(c,this,this.dpr);h.__builtin__=!0,h.initContext(),l[Mf]=h,h.zlevel=Mf,o.push(Mf),this._domRoot=e}else{this._width=Mm(e,0,r),this._height=Mm(e,1,r);var d=this._domRoot=rze(this._width,this._height);e.appendChild(d)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.refresh=function(e){var n=this.storage.getDisplayList(!0),r=this._prevDisplayList,s=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,r,e,this._redrawId);for(var i=0;i<s.length;i++){var a=s[i],o=this._layers[a];if(!o.__builtin__&&o.refresh){var l=i===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(e){var n=e.length,r=this._hoverlayer;if(r&&r.clear(),!!n){for(var s={inHover:!0,viewWidth:this._width,viewHeight:this._height},i,a=0;a<n;a++){var o=e[a];o.__inHover&&(r||(r=this._hoverlayer=this.getLayer(NF)),i||(i=r.ctx,i.save()),cp(i,o,s,a===n-1))}i&&i.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(NF)},t.prototype.paintOne=function(e,n){tre(e,n)},t.prototype._paintList=function(e,n,r,s){if(this._redrawId===s){r=r||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,n,r),a=i.finished,o=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),a)this.eachLayer(function(d){d.afterBrush&&d.afterBrush()});else{var l=this;yk(function(){l._paintList(e,n,r,s)})}}},t.prototype._compositeManually=function(){var e=this.getLayer(Mf).ctx,n=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,n,r),this.eachBuiltinLayer(function(s){s.virtual&&e.drawImage(s.dom,0,0,n,r)})},t.prototype._doPaintList=function(e,n,r){for(var s=this,i=[],a=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],d=this._layers[l];d.__builtin__&&d!==this._hoverlayer&&(d.__dirty||r)&&i.push(d)}for(var c=!0,f=!1,p=function(g){var y=i[g],x=y.ctx,_=a&&y.createRepaintRects(e,n,h._width,h._height),k=r?y.__startIndex:y.__drawIndex,w=!r&&y.incremental&&Date.now,S=w&&Date.now(),C=y.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(y.__startIndex===y.__endIndex)y.clear(!1,C,_);else if(k===y.__startIndex){var A=e[k];(!A.incremental||!A.notClear||r)&&y.clear(!1,C,_)}k===-1&&(console.error("For some unknown reason. drawIndex is -1"),k=y.__startIndex);var M,E=function(L){var z={inHover:!1,allClipped:!1,prevEl:null,viewWidth:s._width,viewHeight:s._height};for(M=k;M<y.__endIndex;M++){var N=e[M];if(N.__inHover&&(f=!0),s._doPaintEl(N,y,a,L,z,M===y.__endIndex-1),w){var q=Date.now()-S;if(q>15)break}}z.prevElClipPaths&&x.restore()};if(_)if(_.length===0)M=y.__endIndex;else for(var P=h.dpr,I=0;I<_.length;++I){var F=_[I];x.save(),x.beginPath(),x.rect(F.x*P,F.y*P,F.width*P,F.height*P),x.clip(),E(F),x.restore()}else x.save(),E(),x.restore();y.__drawIndex=M,y.__drawIndex<y.__endIndex&&(c=!1)},h=this,m=0;m<i.length;m++)p(m);return tn.wxa&&de(this._layers,function(g){g&&g.ctx&&g.ctx.draw&&g.ctx.draw()}),{finished:c,needsRefreshHover:f}},t.prototype._doPaintEl=function(e,n,r,s,i,a){var o=n.ctx;if(r){var l=e.getPaintRect();(!s||l&&l.intersect(s))&&(cp(o,e,i,a),e.setPrevPaintRect(l))}else cp(o,e,i,a)},t.prototype.getLayer=function(e,n){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Mf);var r=this._layers[e];return r||(r=new h3("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?Ht(r,this._layerConfig[e],!0):this._layerConfig[e-y_]&&Ht(r,this._layerConfig[e-y_],!0),n&&(r.virtual=n),this.insertLayer(e,r),r.initContext()),r},t.prototype.insertLayer=function(e,n){var r=this._layers,s=this._zlevelList,i=s.length,a=this._domRoot,o=null,l=-1;if(!r[e]&&nze(n)){if(i>0&&e>s[0]){for(l=0;l<i-1&&!(s[l]<e&&s[l+1]>e);l++);o=r[s[l]]}if(s.splice(l+1,0,e),r[e]=n,!n.virtual)if(o){var d=o.dom;d.nextSibling?a.insertBefore(n.dom,d.nextSibling):a.appendChild(n.dom)}else a.firstChild?a.insertBefore(n.dom,a.firstChild):a.appendChild(n.dom);n.painter||(n.painter=this)}},t.prototype.eachLayer=function(e,n){for(var r=this._zlevelList,s=0;s<r.length;s++){var i=r[s];e.call(n,this._layers[i],i)}},t.prototype.eachBuiltinLayer=function(e,n){for(var r=this._zlevelList,s=0;s<r.length;s++){var i=r[s],a=this._layers[i];a.__builtin__&&e.call(n,a,i)}},t.prototype.eachOtherLayer=function(e,n){for(var r=this._zlevelList,s=0;s<r.length;s++){var i=r[s],a=this._layers[i];a.__builtin__||e.call(n,a,i)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(f,p){f.__dirty=f.__used=!1});function n(f){i&&(i.__endIndex!==f&&(i.__dirty=!0),i.__endIndex=f)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var s=e[r];if(s.zlevel!==e[r-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}}var i=null,a=0,o,l;for(l=0;l<e.length;l++){var s=e[l],d=s.zlevel,c=void 0;o!==d&&(o=d,a=0),s.incremental?(c=this.getLayer(d+tze,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(d+(a>0?y_:0),this._needsManuallyCompositing),c.__builtin__||HP("ZLevel "+d+" has been used by unkown layer "+c.id),c!==i&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,n(l),i=c),s.__dirty&ua&&!s.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}n(l),this.eachBuiltinLayer(function(f,p){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(e){e.clear()},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e,de(this._layers,function(n){n.setUnpainted()})},t.prototype.configLayer=function(e,n){if(n){var r=this._layerConfig;r[e]?Ht(r[e],n,!0):r[e]=n;for(var s=0;s<this._zlevelList.length;s++){var i=this._zlevelList[s];if(i===e||i===e+y_){var a=this._layers[i];Ht(a,r[e],!0)}}}},t.prototype.delLayer=function(e){var n=this._layers,r=this._zlevelList,s=n[e];s&&(s.dom.parentNode.removeChild(s.dom),delete n[e],r.splice(Xt(r,e),1))},t.prototype.resize=function(e,n){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var s=this._opts,i=this.root;if(e!=null&&(s.width=e),n!=null&&(s.height=n),e=Mm(i,0,s),n=Mm(i,1,s),r.style.display="",this._width!==e||n!==this._height){r.style.width=e+"px",r.style.height=n+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,n);this.refresh(!0)}this._width=e,this._height=n}else{if(e==null||n==null)return;this._width=e,this._height=n,this.getLayer(Mf).resize(e,n)}return this},t.prototype.clearLayer=function(e){var n=this._layers[e];n&&n.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Mf].dom;var n=new h3("image",this,e.pixelRatio||this.dpr);n.initContext(),n.clear(!1,e.backgroundColor||this._backgroundColor);var r=n.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var s=n.dom.width,i=n.dom.height;this.eachLayer(function(f){f.__builtin__?r.drawImage(f.dom,0,0,s,i):f.renderToCanvas&&(r.save(),f.renderToCanvas(r),r.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,d=o.length;l<d;l++){var c=o[l];cp(r,c,a,l===d-1)}return n.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();function ize(t){t.registerPainter("canvas",sze)}var aze=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n){return bd(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(n){var r=new Tt,s=Wr("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);r.add(s),s.setStyle(n.lineStyle);var i=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),o=i==="none"?"circle":i,l=n.itemHeight*.8,d=Wr(o,(n.itemWidth-l)/2,(n.itemHeight-l)/2,l,l,n.itemStyle.fill);r.add(d),d.setStyle(n.itemStyle);var c=n.iconRotate==="inherit"?a:n.iconRotate||0;return d.rotation=c*Math.PI/180,d.setOrigin([n.itemWidth/2,n.itemHeight/2]),o.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill="#fff",d.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Jn);function _g(t,e){var n=t.mapDimensionsAll("defaultedLabel"),r=n.length;if(r===1){var s=yg(t,e,n[0]);return s!=null?s+"":null}else if(r){for(var i=[],a=0;a<n.length;a++)i.push(yg(t,e,n[a]));return i.join(" ")}}function gse(t,e){var n=t.mapDimensionsAll("defaultedLabel");if(!He(e))return e+"";for(var r=[],s=0;s<n.length;s++){var i=t.getDimensionIndex(n[s]);i>=0&&r.push(e[i])}return r.join(" ")}var Lb=function(t){Te(e,t);function e(n,r,s,i){var a=t.call(this)||this;return a.updateData(n,r,s,i),a}return e.prototype._createSymbol=function(n,r,s,i,a){this.removeAll();var o=Wr(n,-1,-1,2,2,null,a);o.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),o.drift=oze,this._symbolType=n,this.add(o)},e.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){ad(this.childAt(0))},e.prototype.downplay=function(){od(this.childAt(0))},e.prototype.setZ=function(n,r){var s=this.childAt(0);s.zlevel=n,s.z=r},e.prototype.setDraggable=function(n,r){var s=this.childAt(0);s.draggable=n,s.cursor=!r&&n?"move":s.cursor},e.prototype.updateData=function(n,r,s,i){this.silent=!1;var a=n.getItemVisual(r,"symbol")||"circle",o=n.hostModel,l=e.getSymbolSize(n,r),d=a!==this._symbolType,c=i&&i.disableAnimation;if(d){var f=n.getItemVisual(r,"symbolKeepAspect");this._createSymbol(a,n,r,l,f)}else{var p=this.childAt(0);p.silent=!1;var h={scaleX:l[0]/2,scaleY:l[1]/2};c?p.attr(h):bn(p,h,o,r),Bo(p)}if(this._updateCommon(n,r,l,s,i),d){var p=this.childAt(0);if(!c){var h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:p.style.opacity}};p.scaleX=p.scaleY=0,p.style.opacity=0,ur(p,h,o,r)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(n,r,s,i,a){var o=this.childAt(0),l=n.hostModel,d,c,f,p,h,m,g,y,x;if(i&&(d=i.emphasisItemStyle,c=i.blurItemStyle,f=i.selectItemStyle,p=i.focus,h=i.blurScope,g=i.labelStatesModels,y=i.hoverScale,x=i.cursorStyle,m=i.emphasisDisabled),!i||n.hasItemOption){var _=i&&i.itemModel?i.itemModel:n.getItemModel(r),k=_.getModel("emphasis");d=k.getModel("itemStyle").getItemStyle(),f=_.getModel(["select","itemStyle"]).getItemStyle(),c=_.getModel(["blur","itemStyle"]).getItemStyle(),p=k.get("focus"),h=k.get("blurScope"),m=k.get("disabled"),g=ps(_),y=k.getShallow("scale"),x=_.getShallow("cursor")}var w=n.getItemVisual(r,"symbolRotate");o.attr("rotation",(w||0)*Math.PI/180||0);var S=yh(n.getItemVisual(r,"symbolOffset"),s);S&&(o.x=S[0],o.y=S[1]),x&&o.attr("cursor",x);var C=n.getItemVisual(r,"style"),A=C.fill;if(o instanceof Cs){var M=o.style;o.useStyle(Ne({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},C))}else o.__isEmptyBrush?o.useStyle(Ne({},C)):o.useStyle(C),o.style.decal=null,o.setColor(A,a&&a.symbolInnerColor),o.style.strokeNoScale=!0;var E=n.getItemVisual(r,"liftZ"),P=this._z2;E!=null?P==null&&(this._z2=o.z2,o.z2+=E):P!=null&&(o.z2=P,this._z2=null);var I=a&&a.useNameLabel;Fs(o,g,{labelFetcher:l,labelDataIndex:r,defaultText:F,inheritColor:A,defaultOpacity:C.opacity});function F(N){return I?n.getName(N):_g(n,N)}this._sizeX=s[0]/2,this._sizeY=s[1]/2;var L=o.ensureState("emphasis");L.style=d,o.ensureState("select").style=f,o.ensureState("blur").style=c;var z=y==null||y===!0?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;L.scaleX=this._sizeX*z,L.scaleY=this._sizeY*z,this.setSymbolScale(1),kr(this,p,h,m)},e.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},e.prototype.fadeOut=function(n,r,s){var i=this.childAt(0),a=Et(this).dataIndex,o=s&&s.animation;if(this.silent=i.silent=!0,s&&s.fadeLabel){var l=i.getTextContent();l&&Vc(l,{style:{opacity:0}},r,{dataIndex:a,removeOpt:o,cb:function(){i.removeTextContent()}})}else i.removeTextContent();Vc(i,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:a,cb:n,removeOpt:o})},e.getSymbolSize=function(n,r){return Yg(n.getItemVisual(r,"symbolSize"))},e}(Tt);function oze(t,e){this.parent.drift(t,e)}function m3(t,e,n,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&t.getItemVisual(n,"symbol")!=="none"}function jF(t){return t!=null&&!wt(t)&&(t={isIgnore:t}),t||{}}function FF(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:ps(e),cursorStyle:e.get("cursor")}}var Vb=function(){function t(e){this.group=new Tt,this._SymbolCtor=e||Lb}return t.prototype.updateData=function(e,n){this._progressiveEls=null,n=jF(n);var r=this.group,s=e.hostModel,i=this._data,a=this._SymbolCtor,o=n.disableAnimation,l=FF(e),d={disableAnimation:o},c=n.getSymbolPoint||function(f){return e.getItemLayout(f)};i||r.removeAll(),e.diff(i).add(function(f){var p=c(f);if(m3(e,p,f,n)){var h=new a(e,f,l,d);h.setPosition(p),e.setItemGraphicEl(f,h),r.add(h)}}).update(function(f,p){var h=i.getItemGraphicEl(p),m=c(f);if(!m3(e,m,f,n)){r.remove(h);return}var g=e.getItemVisual(f,"symbol")||"circle",y=h&&h.getSymbolType&&h.getSymbolType();if(!h||y&&y!==g)r.remove(h),h=new a(e,f,l,d),h.setPosition(m);else{h.updateData(e,f,l,d);var x={x:m[0],y:m[1]};o?h.attr(x):bn(h,x,s)}r.add(h),e.setItemGraphicEl(f,h)}).remove(function(f){var p=i.getItemGraphicEl(f);p&&p.fadeOut(function(){r.remove(p)},s)}).execute(),this._getSymbolPoint=c,this._data=e},t.prototype.updateLayout=function(){var e=this,n=this._data;n&&n.eachItemGraphicEl(function(r,s){var i=e._getSymbolPoint(s);r.setPosition(i),r.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=FF(e),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,n,r){this._progressiveEls=[],r=jF(r);function s(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var a=n.getItemLayout(i);if(m3(n,a,i,r)){var o=new this._SymbolCtor(n,i,this._seriesScope);o.traverse(s),o.setPosition(a),this.group.add(o),n.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},t.prototype.eachRendered=function(e){Xc(this._progressiveEls||this.group,e)},t.prototype.remove=function(e){var n=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(s){s.fadeOut(function(){n.remove(s)},r.hostModel)}):n.removeAll()},t}();function vse(t,e,n){var r=t.getBaseAxis(),s=t.getOtherAxis(r),i=lze(s,n),a=r.dim,o=s.dim,l=e.mapDimension(o),d=e.mapDimension(a),c=o==="x"||o==="radius"?1:0,f=We(t.dimensions,function(m){return e.mapDimension(m)}),p=!1,h=e.getCalculationInfo("stackResultDimension");return jc(e,f[0])&&(p=!0,f[0]=h),jc(e,f[1])&&(p=!0,f[1]=h),{dataDimsForPoint:f,valueStart:i,valueAxisDim:o,baseAxisDim:a,stacked:!!p,valueDim:l,baseDim:d,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function lze(t,e){var n=0,r=t.scale.getExtent();return e==="start"?n=r[0]:e==="end"?n=r[1]:hn(e)&&!isNaN(e)?n=e:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}function yse(t,e,n,r){var s=NaN;t.stacked&&(s=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(s)&&(s=t.valueStart);var i=t.baseDataOffset,a=[];return a[i]=n.get(t.baseDim,r),a[1-i]=s,e.dataToPoint(a)}function uze(t,e){var n=[];return e.diff(t).add(function(r){n.push({cmd:"+",idx:r})}).update(function(r,s){n.push({cmd:"=",idx:s,idx1:r})}).remove(function(r){n.push({cmd:"-",idx:r})}).execute(),n}function dze(t,e,n,r,s,i,a,o){for(var l=uze(t,e),d=[],c=[],f=[],p=[],h=[],m=[],g=[],y=vse(s,e,a),x=t.getLayout("points")||[],_=e.getLayout("points")||[],k=0;k<l.length;k++){var w=l[k],S=!0,C=void 0,A=void 0;switch(w.cmd){case"=":C=w.idx*2,A=w.idx1*2;var M=x[C],E=x[C+1],P=_[A],I=_[A+1];(isNaN(M)||isNaN(E))&&(M=P,E=I),d.push(M,E),c.push(P,I),f.push(n[C],n[C+1]),p.push(r[A],r[A+1]),g.push(e.getRawIndex(w.idx1));break;case"+":var F=w.idx,L=y.dataDimsForPoint,z=s.dataToPoint([e.get(L[0],F),e.get(L[1],F)]);A=F*2,d.push(z[0],z[1]),c.push(_[A],_[A+1]);var N=yse(y,s,e,F);f.push(N[0],N[1]),p.push(r[A],r[A+1]),g.push(e.getRawIndex(F));break;case"-":S=!1}S&&(h.push(w),m.push(m.length))}m.sort(function(ne,ce){return g[ne]-g[ce]});for(var q=d.length,V=Cl(q),O=Cl(q),X=Cl(q),j=Cl(q),U=[],k=0;k<m.length;k++){var G=m[k],ee=k*2,ie=G*2;V[ee]=d[ie],V[ee+1]=d[ie+1],O[ee]=c[ie],O[ee+1]=c[ie+1],X[ee]=f[ie],X[ee+1]=f[ie+1],j[ee]=p[ie],j[ee+1]=p[ie+1],U[k]=h[G]}return{current:V,next:O,stackedOnCurrent:X,stackedOnNext:j,status:U}}var Dd=Math.min,Rd=Math.max;function Lp(t,e){return isNaN(t)||isNaN(e)}function SE(t,e,n,r,s,i,a,o,l){for(var d,c,f,p,h,m,g=n,y=0;y<r;y++){var x=e[g*2],_=e[g*2+1];if(g>=s||g<0)break;if(Lp(x,_)){if(l){g+=i;continue}break}if(g===n)t[i>0?"moveTo":"lineTo"](x,_),f=x,p=_;else{var k=x-d,w=_-c;if(k*k+w*w<.5){g+=i;continue}if(a>0){for(var S=g+i,C=e[S*2],A=e[S*2+1];C===x&&A===_&&y<r;)y++,S+=i,g+=i,C=e[S*2],A=e[S*2+1],x=e[g*2],_=e[g*2+1],k=x-d,w=_-c;var M=y+1;if(l)for(;Lp(C,A)&&M<r;)M++,S+=i,C=e[S*2],A=e[S*2+1];var E=.5,P=0,I=0,F=void 0,L=void 0;if(M>=r||Lp(C,A))h=x,m=_;else{P=C-d,I=A-c;var z=x-d,N=C-x,q=_-c,V=A-_,O=void 0,X=void 0;if(o==="x"){O=Math.abs(z),X=Math.abs(N);var j=P>0?1:-1;h=x-j*O*a,m=_,F=x+j*X*a,L=_}else if(o==="y"){O=Math.abs(q),X=Math.abs(V);var U=I>0?1:-1;h=x,m=_-U*O*a,F=x,L=_+U*X*a}else O=Math.sqrt(z*z+q*q),X=Math.sqrt(N*N+V*V),E=X/(X+O),h=x-P*a*(1-E),m=_-I*a*(1-E),F=x+P*a*E,L=_+I*a*E,F=Dd(F,Rd(C,x)),L=Dd(L,Rd(A,_)),F=Rd(F,Dd(C,x)),L=Rd(L,Dd(A,_)),P=F-x,I=L-_,h=x-P*O/X,m=_-I*O/X,h=Dd(h,Rd(d,x)),m=Dd(m,Rd(c,_)),h=Rd(h,Dd(d,x)),m=Rd(m,Dd(c,_)),P=x-h,I=_-m,F=x+P*X/O,L=_+I*X/O}t.bezierCurveTo(f,p,h,m,x,_),f=F,p=L}else t.lineTo(x,_)}d=x,c=_,g+=i}return y}var bse=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),cze=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new bse},e.prototype.buildPath=function(n,r){var s=r.points,i=0,a=s.length/2;if(r.connectNulls){for(;a>0&&Lp(s[a*2-2],s[a*2-1]);a--);for(;i<a&&Lp(s[i*2],s[i*2+1]);i++);}for(;i<a;)i+=SE(n,s,i,a,a,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(n,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var s=this.path,i=s.data,a=ql.CMD,o,l,d=r==="x",c=[],f=0;f<i.length;){var p=i[f++],h=void 0,m=void 0,g=void 0,y=void 0,x=void 0,_=void 0,k=void 0;switch(p){case a.M:o=i[f++],l=i[f++];break;case a.L:if(h=i[f++],m=i[f++],k=d?(n-o)/(h-o):(n-l)/(m-l),k<=1&&k>=0){var w=d?(m-l)*k+l:(h-o)*k+o;return d?[n,w]:[w,n]}o=h,l=m;break;case a.C:h=i[f++],m=i[f++],g=i[f++],y=i[f++],x=i[f++],_=i[f++];var S=d?xk(o,h,g,x,n,c):xk(l,m,y,_,n,c);if(S>0)for(var C=0;C<S;C++){var A=c[C];if(A<=1&&A>=0){var w=d?rs(l,m,y,_,A):rs(o,h,g,x,A);return d?[n,w]:[w,n]}}o=x,l=_;break}}},e}(en),fze=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(bse),xse=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new fze},e.prototype.buildPath=function(n,r){var s=r.points,i=r.stackedOnPoints,a=0,o=s.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;o>0&&Lp(s[o*2-2],s[o*2-1]);o--);for(;a<o&&Lp(s[a*2],s[a*2+1]);a++);}for(;a<o;){var d=SE(n,s,a,o,o,1,r.smooth,l,r.connectNulls);SE(n,i,a+d-1,d,o,-1,r.stackedOnSmooth,l,r.connectNulls),a+=d+1,n.closePath()}},e}(en);function _se(t,e,n,r,s){var i=t.getArea(),a=i.x,o=i.y,l=i.width,d=i.height,c=n.get(["lineStyle","width"])||0;a-=c/2,o-=c/2,l+=c,d+=c,l=Math.ceil(l),a!==Math.floor(a)&&(a=Math.floor(a),l++);var f=new on({shape:{x:a,y:o,width:l,height:d}});if(e){var p=t.getBaseAxis(),h=p.isHorizontal(),m=p.inverse;h?(m&&(f.shape.x+=l),f.shape.width=0):(m||(f.shape.y+=d),f.shape.height=0);var g=bt(s)?function(y){s(y,f)}:null;ur(f,{shape:{width:l,height:d,x:a,y:o}},n,null,r,g)}return f}function wse(t,e,n){var r=t.getArea(),s=Mr(r.r0,1),i=Mr(r.r,1),a=new Ri({shape:{cx:Mr(t.cx,1),cy:Mr(t.cy,1),r0:s,r:i,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var o=t.getBaseAxis().dim==="angle";o?a.shape.endAngle=r.startAngle:a.shape.r=s,ur(a,{shape:{endAngle:r.endAngle,r:i}},n)}return a}function Nb(t,e,n,r,s){if(t){if(t.type==="polar")return wse(t,e,n);if(t.type==="cartesian2d")return _se(t,e,n,r,s)}else return null;return null}function xh(t,e){return t.type===e}function BF(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function zF(t){for(var e=1/0,n=1/0,r=-1/0,s=-1/0,i=0;i<t.length;){var a=t[i++],o=t[i++];isNaN(a)||(e=Math.min(a,e),r=Math.max(a,r)),isNaN(o)||(n=Math.min(o,n),s=Math.max(o,s))}return[[e,n],[r,s]]}function UF(t,e){var n=zF(t),r=n[0],s=n[1],i=zF(e),a=i[0],o=i[1];return Math.max(Math.abs(r[0]-a[0]),Math.abs(r[1]-a[1]),Math.abs(s[0]-o[0]),Math.abs(s[1]-o[1]))}function HF(t){return hn(t)?t:t?.5:0}function pze(t,e,n){if(!n.valueDim)return[];for(var r=e.count(),s=Cl(r*2),i=0;i<r;i++){var a=yse(n,t,e,i);s[i*2]=a[0],s[i*2+1]=a[1]}return s}function Pd(t,e,n,r,s){var i=n.getBaseAxis(),a=i.dim==="x"||i.dim==="radius"?0:1,o=[],l=0,d=[],c=[],f=[],p=[];if(s){for(l=0;l<t.length;l+=2){var h=e||t;!isNaN(h[l])&&!isNaN(h[l+1])&&p.push(t[l],t[l+1])}t=p}for(l=0;l<t.length-2;l+=2)switch(f[0]=t[l+2],f[1]=t[l+3],c[0]=t[l],c[1]=t[l+1],o.push(c[0],c[1]),r){case"end":d[a]=f[a],d[1-a]=c[1-a],o.push(d[0],d[1]);break;case"middle":var m=(c[a]+f[a])/2,g=[];d[a]=g[a]=m,d[1-a]=c[1-a],g[1-a]=f[1-a],o.push(d[0],d[1]),o.push(g[0],g[1]);break;default:d[a]=c[a],d[1-a]=f[1-a],o.push(d[0],d[1])}return o.push(t[l++],t[l++]),o}function hze(t,e){var n=[],r=t.length,s,i;function a(c,f,p){var h=c.coord,m=(p-h)/(f.coord-h),g=s8e(m,[c.color,f.color]);return{coord:p,color:g}}for(var o=0;o<r;o++){var l=t[o],d=l.coord;if(d<0)s=l;else if(d>e){i?n.push(a(i,l,e)):s&&n.push(a(s,l,0),a(s,l,e));break}else s&&(n.push(a(s,l,0)),s=null),n.push(l),i=l}return n}function mze(t,e,n){var r=t.getVisual("visualMeta");if(!(!r||!r.length||!t.count())&&e.type==="cartesian2d"){for(var s,i,a=r.length-1;a>=0;a--){var o=t.getDimensionInfo(r[a].dimension);if(s=o&&o.coordDim,s==="x"||s==="y"){i=r[a];break}}if(i){var l=e.getAxis(s),d=We(i.stops,function(k){return{coord:l.toGlobalCoord(l.dataToCoord(k.value)),color:k.color}}),c=d.length,f=i.outerColors.slice();c&&d[0].coord>d[c-1].coord&&(d.reverse(),f.reverse());var p=hze(d,s==="x"?n.getWidth():n.getHeight()),h=p.length;if(!h&&c)return d[0].coord<0?f[1]?f[1]:d[c-1].color:f[0]?f[0]:d[0].color;var m=10,g=p[0].coord-m,y=p[h-1].coord+m,x=y-g;if(x<.001)return"transparent";de(p,function(k){k.offset=(k.coord-g)/x}),p.push({offset:h?p[h-1].offset:.5,color:f[1]||"transparent"}),p.unshift({offset:h?p[0].offset:.5,color:f[0]||"transparent"});var _=new Mb(0,0,0,0,p,!0);return _[s]=g,_[s+"2"]=y,_}}}function gze(t,e,n){var r=t.get("showAllSymbol"),s=r==="auto";if(!(r&&!s)){var i=n.getAxesByScale("ordinal")[0];if(i&&!(s&&vze(i,e))){var a=e.mapDimension(i.dim),o={};return de(i.getViewLabels(),function(l){var d=i.scale.getRawOrdinalNumber(l.tickValue);o[d]=1}),function(l){return!o.hasOwnProperty(e.get(a,l))}}}}function vze(t,e){var n=t.getExtent(),r=Math.abs(n[1]-n[0])/t.scale.count();isNaN(r)&&(r=0);for(var s=e.count(),i=Math.max(1,Math.round(s/5)),a=0;a<s;a+=i)if(Lb.getSymbolSize(e,a)[t.isHorizontal()?1:0]*1.5>r)return!1;return!0}function yze(t,e){return isNaN(t)||isNaN(e)}function bze(t){for(var e=t.length/2;e>0&&yze(t[e*2-2],t[e*2-1]);e--);return e-1}function qF(t,e){return[t[e*2],t[e*2+1]]}function xze(t,e,n){for(var r=t.length/2,s=n==="x"?0:1,i,a,o=0,l=-1,d=0;d<r;d++)if(a=t[d*2+s],!(isNaN(a)||isNaN(t[d*2+1-s]))){if(d===0){i=a;continue}if(i<=e&&a>=e||i>=e&&a<=e){l=d;break}o=d,i=a}return{range:[o,l],t:(e-i)/(a-i)}}function kse(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<Di.length;e++)if(t.get([Di[e],"endLabel","show"]))return!0;return!1}function g3(t,e,n,r){if(xh(e,"cartesian2d")){var s=r.getModel("endLabel"),i=s.get("valueAnimation"),a=r.getData(),o={lastFrameIndex:0},l=kse(r)?function(h,m){t._endLabelOnDuring(h,m,a,o,i,s,e)}:null,d=e.getBaseAxis().isHorizontal(),c=_se(e,n,r,function(){var h=t._endLabel;h&&n&&o.originalX!=null&&h.attr({x:o.originalX,y:o.originalY})},l);if(!r.get("clip",!0)){var f=c.shape,p=Math.max(f.width,f.height);d?(f.y-=p,f.height+=p*2):(f.x-=p,f.width+=p*2)}return l&&l(1,c),c}else return wse(e,n,r)}function _ze(t,e){var n=e.getBaseAxis(),r=n.isHorizontal(),s=n.inverse,i=r?s?"right":"left":"center",a=r?"middle":s?"top":"bottom";return{normal:{align:t.get("align")||i,verticalAlign:t.get("verticalAlign")||a}}}var wze=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){var n=new Tt,r=new Vb;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=n,this._changePolyState=ct(this._changePolyState,this)},e.prototype.render=function(n,r,s){var i=n.coordinateSystem,a=this.group,o=n.getData(),l=n.getModel("lineStyle"),d=n.getModel("areaStyle"),c=o.getLayout("points")||[],f=i.type==="polar",p=this._coordSys,h=this._symbolDraw,m=this._polyline,g=this._polygon,y=this._lineGroup,x=!r.ssr&&n.get("animation"),_=!d.isEmpty(),k=d.get("origin"),w=vse(i,o,k),S=_&&pze(i,o,w),C=n.get("showSymbol"),A=n.get("connectNulls"),M=C&&!f&&gze(n,o,i),E=this._data;E&&E.eachItemGraphicEl(function(ne,ce){ne.__temp&&(a.remove(ne),E.setItemGraphicEl(ce,null))}),C||h.remove(),a.add(y);var P=f?!1:n.get("step"),I;i&&i.getArea&&n.get("clip",!0)&&(I=i.getArea(),I.width!=null?(I.x-=.1,I.y-=.1,I.width+=.2,I.height+=.2):I.r0&&(I.r0-=.5,I.r+=.5)),this._clipShapeForSymbol=I;var F=mze(o,i,s)||o.getVisual("style")[o.getVisual("drawType")];if(!(m&&p.type===i.type&&P===this._step))C&&h.updateData(o,{isIgnore:M,clipShape:I,disableAnimation:!0,getSymbolPoint:function(ne){return[c[ne*2],c[ne*2+1]]}}),x&&this._initSymbolLabelAnimation(o,i,I),P&&(S&&(S=Pd(S,c,i,P,A)),c=Pd(c,null,i,P,A)),m=this._newPolyline(c),_?g=this._newPolygon(c,S):g&&(y.remove(g),g=this._polygon=null),f||this._initOrUpdateEndLabel(n,i,eh(F)),y.setClipPath(g3(this,i,!0,n));else{_&&!g?g=this._newPolygon(c,S):g&&!_&&(y.remove(g),g=this._polygon=null),f||this._initOrUpdateEndLabel(n,i,eh(F));var L=y.getClipPath();if(L){var z=g3(this,i,!1,n);ur(L,{shape:z.shape},n)}else y.setClipPath(g3(this,i,!0,n));C&&h.updateData(o,{isIgnore:M,clipShape:I,disableAnimation:!0,getSymbolPoint:function(ne){return[c[ne*2],c[ne*2+1]]}}),(!BF(this._stackedOnPoints,S)||!BF(this._points,c))&&(x?this._doUpdateAnimation(o,S,i,s,P,k,A):(P&&(S&&(S=Pd(S,c,i,P,A)),c=Pd(c,null,i,P,A)),m.setShape({points:c}),g&&g.setShape({points:c,stackedOnPoints:S})))}var N=n.getModel("emphasis"),q=N.get("focus"),V=N.get("blurScope"),O=N.get("disabled");if(m.useStyle(_t(l.getLineStyle(),{fill:"none",stroke:F,lineJoin:"bevel"})),js(m,n,"lineStyle"),m.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var X=m.getState("emphasis").style;X.lineWidth=+m.style.lineWidth+1}Et(m).seriesIndex=n.seriesIndex,kr(m,q,V,O);var j=HF(n.get("smooth")),U=n.get("smoothMonotone");if(m.setShape({smooth:j,smoothMonotone:U,connectNulls:A}),g){var G=o.getCalculationInfo("stackedOnSeries"),ee=0;g.useStyle(_t(d.getAreaStyle(),{fill:F,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),G&&(ee=HF(G.get("smooth"))),g.setShape({smooth:j,stackedOnSmooth:ee,smoothMonotone:U,connectNulls:A}),js(g,n,"areaStyle"),Et(g).seriesIndex=n.seriesIndex,kr(g,q,V,O)}var ie=this._changePolyState;o.eachItemGraphicEl(function(ne){ne&&(ne.onHoverStateChange=ie)}),this._polyline.onHoverStateChange=ie,this._data=o,this._coordSys=i,this._stackedOnPoints=S,this._points=c,this._step=P,this._valueOrigin=k,n.get("triggerLineEvent")&&(this.packEventData(n,m),g&&this.packEventData(n,g))},e.prototype.packEventData=function(n,r){Et(r).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},e.prototype.highlight=function(n,r,s,i){var a=n.getData(),o=Qp(a,i);if(this._changePolyState("emphasis"),!(o instanceof Array)&&o!=null&&o>=0){var l=a.getLayout("points"),d=a.getItemGraphicEl(o);if(!d){var c=l[o*2],f=l[o*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var p=n.get("zlevel")||0,h=n.get("z")||0;d=new Lb(a,o),d.x=c,d.y=f,d.setZ(p,h);var m=d.getSymbolPath().getTextContent();m&&(m.zlevel=p,m.z=h,m.z2=this._polyline.z2+1),d.__temp=!0,a.setItemGraphicEl(o,d),d.stopSymbolAnimation(!0),this.group.add(d)}d.highlight()}else On.prototype.highlight.call(this,n,r,s,i)},e.prototype.downplay=function(n,r,s,i){var a=n.getData(),o=Qp(a,i);if(this._changePolyState("normal"),o!=null&&o>=0){var l=a.getItemGraphicEl(o);l&&(l.__temp?(a.setItemGraphicEl(o,null),this.group.remove(l)):l.downplay())}else On.prototype.downplay.call(this,n,r,s,i)},e.prototype._changePolyState=function(n){var r=this._polygon;Tk(this._polyline,n),r&&Tk(r,n)},e.prototype._newPolyline=function(n){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new cze({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(n,r){var s=this._polygon;return s&&this._lineGroup.remove(s),s=new xse({shape:{points:n,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(s),this._polygon=s,s},e.prototype._initSymbolLabelAnimation=function(n,r,s){var i,a,o=r.getBaseAxis(),l=o.inverse;r.type==="cartesian2d"?(i=o.isHorizontal(),a=!1):r.type==="polar"&&(i=o.dim==="angle",a=!0);var d=n.hostModel,c=d.get("animationDuration");bt(c)&&(c=c(null));var f=d.get("animationDelay")||0,p=bt(f)?f(null):f;n.eachItemGraphicEl(function(h,m){var g=h;if(g){var y=[h.x,h.y],x=void 0,_=void 0,k=void 0;if(s)if(a){var w=s,S=r.pointToCoord(y);i?(x=w.startAngle,_=w.endAngle,k=-S[1]/180*Math.PI):(x=w.r0,_=w.r,k=S[0])}else{var C=s;i?(x=C.x,_=C.x+C.width,k=h.x):(x=C.y+C.height,_=C.y,k=h.y)}var A=_===x?0:(k-x)/(_-x);l&&(A=1-A);var M=bt(f)?f(m):c*A+p,E=g.getSymbolPath(),P=E.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),P&&P.animateFrom({style:{opacity:0}},{duration:300,delay:M}),E.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(n,r,s){var i=n.getModel("endLabel");if(kse(n)){var a=n.getData(),o=this._polyline,l=a.getLayout("points");if(!l){o.removeTextContent(),this._endLabel=null;return}var d=this._endLabel;d||(d=this._endLabel=new dn({z2:200}),d.ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var c=bze(l);c>=0&&(Fs(o,ps(n,"endLabel"),{inheritColor:s,labelFetcher:n,labelDataIndex:c,defaultText:function(f,p,h){return h!=null?gse(a,h):_g(a,f)},enableTextSetter:!0},_ze(i,r)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(n,r,s,i,a,o,l){var d=this._endLabel,c=this._polyline;if(d){n<1&&i.originalX==null&&(i.originalX=d.x,i.originalY=d.y);var f=s.getLayout("points"),p=s.hostModel,h=p.get("connectNulls"),m=o.get("precision"),g=o.get("distance")||0,y=l.getBaseAxis(),x=y.isHorizontal(),_=y.inverse,k=r.shape,w=_?x?k.x:k.y+k.height:x?k.x+k.width:k.y,S=(x?g:0)*(_?-1:1),C=(x?0:-g)*(_?-1:1),A=x?"x":"y",M=xze(f,w,A),E=M.range,P=E[1]-E[0],I=void 0;if(P>=1){if(P>1&&!h){var F=qF(f,E[0]);d.attr({x:F[0]+S,y:F[1]+C}),a&&(I=p.getRawValue(E[0]))}else{var F=c.getPointOn(w,A);F&&d.attr({x:F[0]+S,y:F[1]+C});var L=p.getRawValue(E[0]),z=p.getRawValue(E[1]);a&&(I=ute(s,m,L,z,M.t))}i.lastFrameIndex=E[0]}else{var N=n===1||i.lastFrameIndex>0?E[0]:0,F=qF(f,N);a&&(I=p.getRawValue(N)),d.attr({x:F[0]+S,y:F[1]+C})}if(a){var q=Bg(d);typeof q.setLabelText=="function"&&q.setLabelText(I)}}},e.prototype._doUpdateAnimation=function(n,r,s,i,a,o,l){var d=this._polyline,c=this._polygon,f=n.hostModel,p=dze(this._data,n,this._stackedOnPoints,r,this._coordSys,s,this._valueOrigin),h=p.current,m=p.stackedOnCurrent,g=p.next,y=p.stackedOnNext;if(a&&(m=Pd(p.stackedOnCurrent,p.current,s,a,l),h=Pd(p.current,null,s,a,l),y=Pd(p.stackedOnNext,p.next,s,a,l),g=Pd(p.next,null,s,a,l)),UF(h,g)>3e3||c&&UF(m,y)>3e3){d.stopAnimation(),d.setShape({points:g}),c&&(c.stopAnimation(),c.setShape({points:g,stackedOnPoints:y}));return}d.shape.__points=p.current,d.shape.points=h;var x={shape:{points:g}};p.current!==h&&(x.shape.__points=p.next),d.stopAnimation(),bn(d,x,f),c&&(c.setShape({points:h,stackedOnPoints:m}),c.stopAnimation(),bn(c,{shape:{stackedOnPoints:y}},f),d.shape.points!==c.shape.points&&(c.shape.points=d.shape.points));for(var _=[],k=p.status,w=0;w<k.length;w++){var S=k[w].cmd;if(S==="="){var C=n.getItemGraphicEl(k[w].idx1);C&&_.push({el:C,ptIdx:w})}}d.animators&&d.animators.length&&d.animators[0].during(function(){c&&c.dirtyShape();for(var A=d.shape.__points,M=0;M<_.length;M++){var E=_[M].el,P=_[M].ptIdx*2;E.x=A[P],E.y=A[P+1],E.markRedraw()}})},e.prototype.remove=function(n){var r=this.group,s=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),s&&s.eachItemGraphicEl(function(i,a){i.__temp&&(r.remove(i),s.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(On);function jb(t,e){return{seriesType:t,plan:Wg(),reset:function(n){var r=n.getData(),s=n.coordinateSystem,i=n.pipelineContext,a=e||i.large;if(s){var o=We(s.dimensions,function(h){return r.mapDimension(h)}).slice(0,2),l=o.length,d=r.getCalculationInfo("stackResultDimension");jc(r,o[0])&&(o[0]=d),jc(r,o[1])&&(o[1]=d);var c=r.getStore(),f=r.getDimensionIndex(o[0]),p=r.getDimensionIndex(o[1]);return l&&{progress:function(h,m){for(var g=h.end-h.start,y=a&&Cl(g*l),x=[],_=[],k=h.start,w=0;k<h.end;k++){var S=void 0;if(l===1){var C=c.get(f,k);S=s.dataToPoint(C,null,_)}else x[0]=c.get(f,k),x[1]=c.get(p,k),S=s.dataToPoint(x,null,_);a?(y[w++]=S[0],y[w++]=S[1]):m.setItemLayout(k,S.slice())}a&&m.setLayout("points",y)}}}}}}var kze={average:function(t){for(var e=0,n=0,r=0;r<t.length;r++)isNaN(t[r])||(e+=t[r],n++);return n===0?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},Sze=function(t){return Math.round(t.length/2)};function Sse(t){return{seriesType:t,reset:function(e,n,r){var s=e.getData(),i=e.get("sampling"),a=e.coordinateSystem,o=s.count();if(o>10&&a.type==="cartesian2d"&&i){var l=a.getBaseAxis(),d=a.getOtherAxis(l),c=l.getExtent(),f=r.getDevicePixelRatio(),p=Math.abs(c[1]-c[0])*(f||1),h=Math.round(o/p);if(isFinite(h)&&h>1){i==="lttb"?e.setData(s.lttbDownSample(s.mapDimension(d.dim),1/h)):i==="minmax"&&e.setData(s.minmaxDownSample(s.mapDimension(d.dim),1/h));var m=void 0;ot(i)?m=kze[i]:bt(i)&&(m=i),m&&e.setData(s.downSample(s.mapDimension(d.dim),1/h,m,Sze))}}}}}function Cze(t){t.registerChartView(wze),t.registerSeriesModel(aze),t.registerLayout(jb("line",!0)),t.registerVisual({seriesType:"line",reset:function(e){var n=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",r)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Sse("line"))}var D1=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){return bd(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(n,r,s){var i=this.coordinateSystem;if(i&&i.clampData){var a=i.clampData(n),o=i.dataToPoint(a);if(s)de(i.getAxes(),function(p,h){if(p.type==="category"&&r!=null){var m=p.getTicksCoords(),g=p.getTickModel().get("alignWithLabel"),y=a[h],x=r[h]==="x1"||r[h]==="y1";if(x&&!g&&(y+=1),m.length<2)return;if(m.length===2){o[h]=p.toGlobalCoord(p.getExtent()[x?1:0]);return}for(var _=void 0,k=void 0,w=1,S=0;S<m.length;S++){var C=m[S].coord,A=S===m.length-1?m[S-1].tickValue+w:m[S].tickValue;if(A===y){k=C;break}else if(A<y)_=C;else if(_!=null&&A>y){k=(C+_)/2;break}S===1&&(w=A-m[0].tickValue)}k==null&&(_?_&&(k=m[m.length-1].coord):k=m[0].coord),o[h]=p.toGlobalCoord(k)}});else{var l=this.getData(),d=l.getLayout("offset"),c=l.getLayout("size"),f=i.getBaseAxis().isHorizontal()?0:1;o[f]+=d+c/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Jn);Jn.registerClass(D1);var Aze=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(){return bd(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>n&&(n=r),n},e.prototype.brushSelector=function(n,r,s){return s.rect(r.getItemLayout(n))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Qc(D1.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(D1),Tze=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),Gk=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new Tze},e.prototype.buildPath=function(n,r){var s=r.cx,i=r.cy,a=Math.max(r.r0||0,0),o=Math.max(r.r,0),l=(o-a)*.5,d=a+l,c=r.startAngle,f=r.endAngle,p=r.clockwise,h=Math.PI*2,m=p?f-c<h:c-f<h;m||(c=f-(p?h:-h));var g=Math.cos(c),y=Math.sin(c),x=Math.cos(f),_=Math.sin(f);m?(n.moveTo(g*a+s,y*a+i),n.arc(g*d+s,y*d+i,l,-Math.PI+c,c,!p)):n.moveTo(g*o+s,y*o+i),n.arc(s,i,o,c,f,!p),n.arc(x*d+s,_*d+i,l,f-Math.PI*2,f-Math.PI,!p),a!==0&&n.arc(s,i,a,f,c,p)},e}(en);function $ze(t,e){e=e||{};var n=e.isRoundCap;return function(r,s,i){var a=s.position;if(!a||a instanceof Array)return Ck(r,s,i);var o=t(a),l=s.distance!=null?s.distance:5,d=this.shape,c=d.cx,f=d.cy,p=d.r,h=d.r0,m=(p+h)/2,g=d.startAngle,y=d.endAngle,x=(g+y)/2,_=n?Math.abs(p-h)/2:0,k=Math.cos,w=Math.sin,S=c+p*k(g),C=f+p*w(g),A="left",M="top";switch(o){case"startArc":S=c+(h-l)*k(x),C=f+(h-l)*w(x),A="center",M="top";break;case"insideStartArc":S=c+(h+l)*k(x),C=f+(h+l)*w(x),A="center",M="bottom";break;case"startAngle":S=c+m*k(g)+b_(g,l+_,!1),C=f+m*w(g)+x_(g,l+_,!1),A="right",M="middle";break;case"insideStartAngle":S=c+m*k(g)+b_(g,-l+_,!1),C=f+m*w(g)+x_(g,-l+_,!1),A="left",M="middle";break;case"middle":S=c+m*k(x),C=f+m*w(x),A="center",M="middle";break;case"endArc":S=c+(p+l)*k(x),C=f+(p+l)*w(x),A="center",M="bottom";break;case"insideEndArc":S=c+(p-l)*k(x),C=f+(p-l)*w(x),A="center",M="top";break;case"endAngle":S=c+m*k(y)+b_(y,l+_,!0),C=f+m*w(y)+x_(y,l+_,!0),A="left",M="middle";break;case"insideEndAngle":S=c+m*k(y)+b_(y,-l+_,!0),C=f+m*w(y)+x_(y,-l+_,!0),A="right",M="middle";break;default:return Ck(r,s,i)}return r=r||{},r.x=S,r.y=C,r.align=A,r.verticalAlign=M,r}}function Mze(t,e,n,r){if(hn(r)){t.setTextConfig({rotation:r});return}else if(He(e)){t.setTextConfig({rotation:0});return}var s=t.shape,i=s.clockwise?s.startAngle:s.endAngle,a=s.clockwise?s.endAngle:s.startAngle,o=(i+a)/2,l,d=n(e);switch(d){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=o;break;case"startAngle":case"insideStartAngle":l=i;break;case"endAngle":case"insideEndAngle":l=a;break;default:t.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;d==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),t.setTextConfig({rotation:c})}function b_(t,e,n){return e*Math.sin(t)*(n?-1:1)}function x_(t,e,n){return e*Math.cos(t)*(n?1:-1)}function fp(t,e,n){var r=t.get("borderRadius");if(r==null)return n?{cornerRadius:0}:null;He(r)||(r=[r,r,r,r]);var s=Math.abs(e.r||0-e.r0||0);return{cornerRadius:We(r,function(i){return Fo(i,s)})}}var v3=Math.max,y3=Math.min;function Eze(t,e){var n=t.getArea&&t.getArea();if(xh(t,"cartesian2d")){var r=t.getBaseAxis();if(r.type!=="category"||!r.onBand){var s=e.getLayout("bandWidth");r.isHorizontal()?(n.x-=s,n.width+=s*2):(n.y-=s,n.height+=s*2)}}return n}var Dze=function(t){Te(e,t);function e(){var n=t.call(this)||this;return n.type=e.type,n._isFirstFrame=!0,n}return e.prototype.render=function(n,r,s,i){this._model=n,this._removeOnRenderedListener(s),this._updateDrawMode(n);var a=n.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,r,s):this._renderNormal(n,r,s,i))},e.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},e.prototype.incrementalRender=function(n,r){this._progressiveEls=[],this._incrementalRenderLarge(n,r)},e.prototype.eachRendered=function(n){Xc(this._progressiveEls||this.group,n)},e.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(n,r,s,i){var a=this.group,o=n.getData(),l=this._data,d=n.coordinateSystem,c=d.getBaseAxis(),f;d.type==="cartesian2d"?f=c.isHorizontal():d.type==="polar"&&(f=c.dim==="angle");var p=n.isAnimationEnabled()?n:null,h=Rze(n,d);h&&this._enableRealtimeSort(h,o,s);var m=n.get("clip",!0)||h,g=Eze(d,o);a.removeClipPath();var y=n.get("roundCap",!0),x=n.get("showBackground",!0),_=n.getModel("backgroundStyle"),k=_.get("borderRadius")||0,w=[],S=this._backgroundEls,C=i&&i.isInitSort,A=i&&i.type==="changeAxisOrder";function M(I){var F=__[d.type](o,I),L=jze(d,f,F);return L.useStyle(_.getItemStyle()),d.type==="cartesian2d"?L.setShape("r",k):L.setShape("cornerRadius",k),w[I]=L,L}o.diff(l).add(function(I){var F=o.getItemModel(I),L=__[d.type](o,I,F);if(x&&M(I),!(!o.hasValue(I)||!XF[d.type](L))){var z=!1;m&&(z=WF[d.type](g,L));var N=GF[d.type](n,o,I,L,f,p,c.model,!1,y);h&&(N.forceLabelAnimation=!0),QF(N,o,I,F,L,n,f,d.type==="polar"),C?N.attr({shape:L}):h?YF(h,p,N,L,I,f,!1,!1):ur(N,{shape:L},n,I),o.setItemGraphicEl(I,N),a.add(N),N.ignore=z}}).update(function(I,F){var L=o.getItemModel(I),z=__[d.type](o,I,L);if(x){var N=void 0;S.length===0?N=M(F):(N=S[F],N.useStyle(_.getItemStyle()),d.type==="cartesian2d"?N.setShape("r",k):N.setShape("cornerRadius",k),w[I]=N);var q=__[d.type](o,I),V=Ase(f,q,d);bn(N,{shape:V},p,I)}var O=l.getItemGraphicEl(F);if(!o.hasValue(I)||!XF[d.type](z)){a.remove(O);return}var X=!1;if(m&&(X=WF[d.type](g,z),X&&a.remove(O)),O?Bo(O):O=GF[d.type](n,o,I,z,f,p,c.model,!!O,y),h&&(O.forceLabelAnimation=!0),A){var j=O.getTextContent();if(j){var U=Bg(j);U.prevValue!=null&&(U.prevValue=U.value)}}else QF(O,o,I,L,z,n,f,d.type==="polar");C?O.attr({shape:z}):h?YF(h,p,O,z,I,f,!0,A):bn(O,{shape:z},n,I,null),o.setItemGraphicEl(I,O),O.ignore=X,a.add(O)}).remove(function(I){var F=l.getItemGraphicEl(I);F&&_1(F,n,I)}).execute();var E=this._backgroundGroup||(this._backgroundGroup=new Tt);E.removeAll();for(var P=0;P<w.length;++P)E.add(w[P]);a.add(E),this._backgroundEls=w,this._data=o},e.prototype._renderLarge=function(n,r,s){this._clear(),JF(n,this.group),this._updateLargeClip(n)},e.prototype._incrementalRenderLarge=function(n,r){this._removeBackground(),JF(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(n){var r=n.get("clip",!0)&&Nb(n.coordinateSystem,!1,n),s=this.group;r?s.setClipPath(r):s.removeClipPath()},e.prototype._enableRealtimeSort=function(n,r,s){var i=this;if(r.count()){var a=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,n,s),this._isFirstFrame=!1;else{var o=function(l){var d=r.getItemGraphicEl(l),c=d&&d.shape;return c&&Math.abs(a.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){i._updateSortWithinSameData(r,o,a,s)},s.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(n,r,s){var i=[];return n.each(n.mapDimension(r.dim),function(a,o){var l=s(o);l=l==null?NaN:l,i.push({dataIndex:o,mappedValue:l,ordinalNumber:a})}),i.sort(function(a,o){return o.mappedValue-a.mappedValue}),{ordinalNumbers:We(i,function(a){return a.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(n,r,s){for(var i=s.scale,a=n.mapDimension(s.dim),o=Number.MAX_VALUE,l=0,d=i.getOrdinalMeta().categories.length;l<d;++l){var c=n.rawIndexOf(a,i.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:r(n.indexOfRawIndex(c));if(f>o)return!0;o=f}return!1},e.prototype._isOrderDifferentInView=function(n,r){for(var s=r.scale,i=s.getExtent(),a=Math.max(0,i[0]),o=Math.min(i[1],s.getOrdinalMeta().categories.length-1);a<=o;++a)if(n.ordinalNumbers[a]!==s.getRawOrdinalNumber(a))return!0},e.prototype._updateSortWithinSameData=function(n,r,s,i){if(this._isOrderChangedWithinSameData(n,r,s)){var a=this._dataSort(n,s,r);this._isOrderDifferentInView(a,s)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",axisId:s.index,sortInfo:a}))}},e.prototype._dispatchInitSort=function(n,r,s){var i=r.baseAxis,a=this._dataSort(n,i,function(o){return n.get(n.mapDimension(r.otherAxis.dim),o)});s.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:a})},e.prototype.remove=function(n,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(n,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(n){var r=this.group,s=this._data;n&&n.isAnimationEnabled()&&s&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],s.eachItemGraphicEl(function(i){_1(i,n,Et(i).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(On),WF={cartesian2d:function(t,e){var n=e.width<0?-1:1,r=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var s=t.x+t.width,i=t.y+t.height,a=v3(e.x,t.x),o=y3(e.x+e.width,s),l=v3(e.y,t.y),d=y3(e.y+e.height,i),c=o<a,f=d<l;return e.x=c&&a>s?o:a,e.y=f&&l>i?d:l,e.width=c?0:o-a,e.height=f?0:d-l,n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),c||f},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}var s=y3(e.r,t.r),i=v3(e.r0,t.r0);e.r=s,e.r0=i;var a=s-i<0;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}return a}},GF={cartesian2d:function(t,e,n,r,s,i,a,o,l){var d=new on({shape:Ne({},r),z2:1});if(d.__dataIndex=n,d.name="item",i){var c=d.shape,f=s?"height":"width";c[f]=0}return d},polar:function(t,e,n,r,s,i,a,o,l){var d=!s&&l?Gk:Ri,c=new d({shape:r,z2:1});c.name="item";var f=Cse(s);if(c.calculateTextPosition=$ze(f,{isRoundCap:d===Gk}),i){var p=c.shape,h=s?"r":"endAngle",m={};p[h]=s?r.r0:r.startAngle,m[h]=r[h],(o?bn:ur)(c,{shape:m},i)}return c}};function Rze(t,e){var n=t.get("realtimeSort",!0),r=e.getBaseAxis();if(n&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function YF(t,e,n,r,s,i,a,o){var l,d;i?(d={x:r.x,width:r.width},l={y:r.y,height:r.height}):(d={y:r.y,height:r.height},l={x:r.x,width:r.width}),o||(a?bn:ur)(n,{shape:l},e,s,null);var c=e?t.baseAxis.model:null;(a?bn:ur)(n,{shape:d},c,s)}function KF(t,e){for(var n=0;n<e.length;n++)if(!isFinite(t[e[n]]))return!0;return!1}var Pze=["x","y","width","height"],Ize=["cx","cy","r","startAngle","endAngle"],XF={cartesian2d:function(t){return!KF(t,Pze)},polar:function(t){return!KF(t,Ize)}},__={cartesian2d:function(t,e,n){var r=t.getItemLayout(e),s=n?Lze(n,r):0,i=r.width>0?1:-1,a=r.height>0?1:-1;return{x:r.x+i*s/2,y:r.y+a*s/2,width:r.width-i*s,height:r.height-a*s}},polar:function(t,e,n){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Oze(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function Cse(t){return function(e){var n=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+n;default:return r}}}(t)}function QF(t,e,n,r,s,i,a,o){var l=e.getItemVisual(n,"style");if(o){if(!i.get("roundCap")){var c=t.shape,f=fp(r.getModel("itemStyle"),c,!0);Ne(c,f),t.setShape(c)}}else{var d=r.get(["itemStyle","borderRadius"])||0;t.setShape("r",d)}t.useStyle(l);var p=r.getShallow("cursor");p&&t.attr("cursor",p);var h=o?a?s.r>=s.r0?"endArc":"startArc":s.endAngle>=s.startAngle?"endAngle":"startAngle":a?s.height>=0?"bottom":"top":s.width>=0?"right":"left",m=ps(r);Fs(t,m,{labelFetcher:i,labelDataIndex:n,defaultText:_g(i.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:h});var g=t.getTextContent();if(o&&g){var y=r.get(["label","position"]);t.textConfig.inside=y==="middle"?!0:null,Mze(t,y==="outside"?h:y,Cse(a),r.get(["label","rotate"]))}Wte(g,m,i.getRawValue(n),function(_){return gse(e,_)});var x=r.getModel(["emphasis"]);kr(t,x.get("focus"),x.get("blurScope"),x.get("disabled")),js(t,r),Oze(s)&&(t.style.fill="none",t.style.stroke="none",de(t.states,function(_){_.style&&(_.style.fill=_.style.stroke="none")}))}function Lze(t,e){var n=t.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var r=t.get(["itemStyle","borderWidth"])||0,s=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,s,i)}var Vze=function(){function t(){}return t}(),ZF=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new Vze},e.prototype.buildPath=function(n,r){for(var s=r.points,i=this.baseDimIdx,a=1-this.baseDimIdx,o=[],l=[],d=this.barWidth,c=0;c<s.length;c+=3)l[i]=d,l[a]=s[c+2],o[i]=s[c+i],o[a]=s[c+a],n.rect(o[0],o[1],l[0],l[1])},e}(en);function JF(t,e,n,r){var s=t.getData(),i=s.getLayout("valueAxisHorizontal")?1:0,a=s.getLayout("largeDataIndices"),o=s.getLayout("size"),l=t.getModel("backgroundStyle"),d=s.getLayout("largeBackgroundPoints");if(d){var c=new ZF({shape:{points:d},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=i,c.largeDataIndices=a,c.barWidth=o,c.useStyle(l.getItemStyle()),e.add(c),n&&n.push(c)}var f=new ZF({shape:{points:s.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=i,f.largeDataIndices=a,f.barWidth=o,e.add(f),f.useStyle(s.getVisual("style")),f.style.stroke=null,Et(f).seriesIndex=t.seriesIndex,t.get("silent")||(f.on("mousedown",eB),f.on("mousemove",eB)),n&&n.push(f)}var eB=E6(function(t){var e=this,n=Nze(e,t.offsetX,t.offsetY);Et(e).dataIndex=n>=0?n:null},30,!1);function Nze(t,e,n){for(var r=t.baseDimIdx,s=1-r,i=t.shape.points,a=t.largeDataIndices,o=[],l=[],d=t.barWidth,c=0,f=i.length/3;c<f;c++){var p=c*3;if(l[r]=d,l[s]=i[p+2],o[r]=i[p+r],o[s]=i[p+s],l[s]<0&&(o[s]+=l[s],l[s]=-l[s]),e>=o[0]&&e<=o[0]+l[0]&&n>=o[1]&&n<=o[1]+l[1])return a[c]}return-1}function Ase(t,e,n){if(xh(n,"cartesian2d")){var r=e,s=n.getArea();return{x:t?r.x:s.x,y:t?s.y:r.y,width:t?r.width:s.width,height:t?s.height:r.height}}else{var s=n.getArea(),i=e;return{cx:s.cx,cy:s.cy,r0:t?s.r0:i.r0,r:t?s.r:i.r,startAngle:t?i.startAngle:0,endAngle:t?i.endAngle:Math.PI*2}}}function jze(t,e,n){var r=t.type==="polar"?Ri:on;return new r({shape:Ase(e,n,t),silent:!0,z2:0})}function Fze(t){t.registerChartView(Dze),t.registerSeriesModel(Aze),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Nt(Dre,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Rre("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Sse("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,n){var r=e.componentType||"series";n.eachComponent({mainType:r,query:e},function(s){e.sortInfo&&s.axis.setCategorySortInfo(e.sortInfo)})})}var tB=Math.PI*2,w_=Math.PI/180;function Tse(t,e){return ts(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function $se(t,e){var n=Tse(t,e),r=t.get("center"),s=t.get("radius");He(s)||(s=[0,s]);var i=tt(n.width,e.getWidth()),a=tt(n.height,e.getHeight()),o=Math.min(i,a),l=tt(s[0],o/2),d=tt(s[1],o/2),c,f,p=t.coordinateSystem;if(p){var h=p.dataToPoint(r);c=h[0]||0,f=h[1]||0}else He(r)||(r=[r,r]),c=tt(r[0],i)+n.x,f=tt(r[1],a)+n.y;return{cx:c,cy:f,r0:l,r:d}}function Bze(t,e,n){e.eachSeriesByType(t,function(r){var s=r.getData(),i=s.mapDimension("value"),a=Tse(r,n),o=$se(r,n),l=o.cx,d=o.cy,c=o.r,f=o.r0,p=-r.get("startAngle")*w_,h=r.get("endAngle"),m=r.get("padAngle")*w_;h=h==="auto"?p-tB:-h*w_;var g=r.get("minAngle")*w_,y=g+m,x=0;s.each(i,function(V){!isNaN(V)&&x++});var _=s.getSum(i),k=Math.PI/(_||x)*2,w=r.get("clockwise"),S=r.get("roseType"),C=r.get("stillShowZeroSum"),A=s.getDataExtent(i);A[0]=0;var M=w?1:-1,E=[p,h],P=M*m/2;i6(E,!w),p=E[0],h=E[1];var I=Mse(r);I.startAngle=p,I.endAngle=h,I.clockwise=w;var F=Math.abs(h-p),L=F,z=0,N=p;if(s.setLayout({viewRect:a,r:c}),s.each(i,function(V,O){var X;if(isNaN(V)){s.setItemLayout(O,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:w,cx:l,cy:d,r0:f,r:S?NaN:c});return}S!=="area"?X=_===0&&C?k:V*k:X=F/x,X<y?(X=y,L-=y):z+=V;var j=N+M*X,U=0,G=0;m>X?(U=N+M*X/2,G=U):(U=N+P,G=j-P),s.setItemLayout(O,{angle:X,startAngle:U,endAngle:G,clockwise:w,cx:l,cy:d,r0:f,r:S?An(V,A,[f,c]):c}),N=j}),L<tB&&x)if(L<=.001){var q=F/x;s.each(i,function(V,O){if(!isNaN(V)){var X=s.getItemLayout(O);X.angle=q;var j=0,U=0;q<m?(j=p+M*(O+1/2)*q,U=j):(j=p+M*O*q+P,U=p+M*(O+1)*q-P),X.startAngle=j,X.endAngle=U}})}else k=L/z,N=p,s.each(i,function(V,O){if(!isNaN(V)){var X=s.getItemLayout(O),j=X.angle===y?y:V*k,U=0,G=0;j<m?(U=N+M*j/2,G=U):(U=N+P,G=N+M*j-P),X.startAngle=U,X.endAngle=G,N+=M*j}})})}var Mse=ln();function Fb(t){return{seriesType:t,reset:function(e,n){var r=n.findComponents({mainType:"legend"});if(!(!r||!r.length)){var s=e.getData();s.filterSelf(function(i){for(var a=s.getName(i),o=0;o<r.length;o++)if(!r[o].isSelected(a))return!1;return!0})}}}}var zze=Math.PI/180;function nB(t,e,n,r,s,i,a,o,l,d){if(t.length<2)return;function c(g){for(var y=g.rB,x=y*y,_=0;_<g.list.length;_++){var k=g.list[_],w=Math.abs(k.label.y-n),S=r+k.len,C=S*S,A=Math.sqrt(Math.abs((1-w*w/x)*C)),M=e+(A+k.len2)*s,E=M-k.label.x,P=k.targetTextWidth-E*s;Ese(k,P,!0),k.label.x=M}}function f(g){for(var y={list:[],maxY:0},x={list:[],maxY:0},_=0;_<g.length;_++)if(g[_].labelAlignTo==="none"){var k=g[_],w=k.label.y>n?x:y,S=Math.abs(k.label.y-n);if(S>=w.maxY){var C=k.label.x-e-k.len2*s,A=r+k.len,M=Math.abs(C)<A?Math.sqrt(S*S/(1-C*C/A/A)):A;w.rB=M,w.maxY=S}w.list.push(k)}c(y),c(x)}for(var p=t.length,h=0;h<p;h++)if(t[h].position==="outer"&&t[h].labelAlignTo==="labelLine"){var m=t[h].label.x-d;t[h].linePoints[1][0]+=m,t[h].label.x=d}Jre(t,l,l+a)&&f(t)}function Uze(t,e,n,r,s,i,a,o){for(var l=[],d=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,p=0;p<t.length;p++){var h=t[p].label;b3(t[p])||(h.x<e?(c=Math.min(c,h.x),l.push(t[p])):(f=Math.max(f,h.x),d.push(t[p])))}for(var p=0;p<t.length;p++){var m=t[p];if(!b3(m)&&m.linePoints){if(m.labelStyleWidth!=null)continue;var h=m.label,g=m.linePoints,y=void 0;m.labelAlignTo==="edge"?h.x<e?y=g[2][0]-m.labelDistance-a-m.edgeDistance:y=a+s-m.edgeDistance-g[2][0]-m.labelDistance:m.labelAlignTo==="labelLine"?h.x<e?y=c-a-m.bleedMargin:y=a+s-f-m.bleedMargin:h.x<e?y=h.x-a-m.bleedMargin:y=a+s-h.x-m.bleedMargin,m.targetTextWidth=y,Ese(m,y)}}nB(d,e,n,r,1,s,i,a,o,f),nB(l,e,n,r,-1,s,i,a,o,c);for(var p=0;p<t.length;p++){var m=t[p];if(!b3(m)&&m.linePoints){var h=m.label,g=m.linePoints,x=m.labelAlignTo==="edge",_=h.style.padding,k=_?_[1]+_[3]:0,w=h.style.backgroundColor?0:k,S=m.rect.width+w,C=g[1][0]-g[2][0];x?h.x<e?g[2][0]=a+m.edgeDistance+S+m.labelDistance:g[2][0]=a+s-m.edgeDistance-S-m.labelDistance:(h.x<e?g[2][0]=h.x+m.labelDistance:g[2][0]=h.x-m.labelDistance,g[1][0]=g[2][0]+C),g[1][1]=g[2][1]=h.y}}}function Ese(t,e,n){if(n===void 0&&(n=!1),t.labelStyleWidth==null){var r=t.label,s=r.style,i=t.rect,a=s.backgroundColor,o=s.padding,l=o?o[1]+o[3]:0,d=s.overflow,c=i.width+(a?0:l);if(e<c||n){var f=i.height;if(d&&d.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var p=r.getBoundingRect();r.setStyle("width",Math.ceil(p.width)),r.setStyle("backgroundColor",a)}else{var h=e-l,m=e<c?h:n?h>t.unconstrainedWidth?null:h:null;r.setStyle("width",m)}var g=r.getBoundingRect();i.width=g.width;var y=(r.style.margin||0)+2.1;i.height=g.height+y,i.y-=(i.height-f)/2}}}function b3(t){return t.position==="center"}function Hze(t){var e=t.getData(),n=[],r,s,i=!1,a=(t.get("minShowLabelAngle")||0)*zze,o=e.getLayout("viewRect"),l=e.getLayout("r"),d=o.width,c=o.x,f=o.y,p=o.height;function h(C){C.ignore=!0}function m(C){if(!C.ignore)return!0;for(var A in C.states)if(C.states[A].ignore===!1)return!0;return!1}e.each(function(C){var A=e.getItemGraphicEl(C),M=A.shape,E=A.getTextContent(),P=A.getTextGuideLine(),I=e.getItemModel(C),F=I.getModel("label"),L=F.get("position")||I.get(["emphasis","label","position"]),z=F.get("distanceToLabelLine"),N=F.get("alignTo"),q=tt(F.get("edgeDistance"),d),V=F.get("bleedMargin"),O=I.getModel("labelLine"),X=O.get("length");X=tt(X,d);var j=O.get("length2");if(j=tt(j,d),Math.abs(M.endAngle-M.startAngle)<a){de(E.states,h),E.ignore=!0,P&&(de(P.states,h),P.ignore=!0);return}if(m(E)){var U=(M.startAngle+M.endAngle)/2,G=Math.cos(U),ee=Math.sin(U),ie,ne,ce,oe;r=M.cx,s=M.cy;var re=L==="inside"||L==="inner";if(L==="center")ie=M.cx,ne=M.cy,oe="center";else{var te=(re?(M.r+M.r0)/2*G:M.r*G)+r,K=(re?(M.r+M.r0)/2*ee:M.r*ee)+s;if(ie=te+G*3,ne=K+ee*3,!re){var le=te+G*(X+l-M.r),H=K+ee*(X+l-M.r),Y=le+(G<0?-1:1)*j,B=H;N==="edge"?ie=G<0?c+q:c+d-q:ie=Y+(G<0?-z:z),ne=B,ce=[[te,K],[le,H],[Y,B]]}oe=re?"center":N==="edge"?G>0?"right":"left":G>0?"left":"right"}var ae=Math.PI,be=0,fe=F.get("rotate");if(hn(fe))be=fe*(ae/180);else if(L==="center")be=0;else if(fe==="radial"||fe===!0){var me=G<0?-U+ae:-U;be=me}else if(fe==="tangential"&&L!=="outside"&&L!=="outer"){var ye=Math.atan2(G,ee);ye<0&&(ye=ae*2+ye);var Ee=ee>0;Ee&&(ye=ae+ye),be=ye-ae}if(i=!!be,E.x=ie,E.y=ne,E.rotation=be,E.setStyle({verticalAlign:"middle"}),re){E.setStyle({align:oe});var Xe=E.states.select;Xe&&(Xe.x+=E.x,Xe.y+=E.y)}else{var Re=E.getBoundingRect().clone();Re.applyTransform(E.getComputedTransform());var Ye=(E.style.margin||0)+2.1;Re.y-=Ye/2,Re.height+=Ye,n.push({label:E,labelLine:P,position:L,len:X,len2:j,minTurnAngle:O.get("minTurnAngle"),maxSurfaceAngle:O.get("maxSurfaceAngle"),surfaceNormal:new qt(G,ee),linePoints:ce,textAlign:oe,labelDistance:z,labelAlignTo:N,edgeDistance:q,bleedMargin:V,rect:Re,unconstrainedWidth:Re.width,labelStyleWidth:E.style.width})}A.setTextConfig({inside:re})}}),!i&&t.get("avoidLabelOverlap")&&Uze(n,r,s,l,d,p,c,f);for(var g=0;g<n.length;g++){var y=n[g],x=y.label,_=y.labelLine,k=isNaN(x.x)||isNaN(x.y);if(x){x.setStyle({align:y.textAlign}),k&&(de(x.states,h),x.ignore=!0);var w=x.states.select;w&&(w.x+=x.x,w.y+=x.y)}if(_){var S=y.linePoints;k||!S?(de(_.states,h),_.ignore=!0):(Xre(S,y.minTurnAngle),pBe(S,y.surfaceNormal,y.maxSurfaceAngle),_.setShape({points:S}),x.__hostTarget.textGuideLineConfig={anchor:new qt(S[0][0],S[0][1])})}}}var qze=function(t){Te(e,t);function e(n,r,s){var i=t.call(this)||this;i.z2=2;var a=new dn;return i.setTextContent(a),i.updateData(n,r,s,!0),i}return e.prototype.updateData=function(n,r,s,i){var a=this,o=n.hostModel,l=n.getItemModel(r),d=l.getModel("emphasis"),c=n.getItemLayout(r),f=Ne(fp(l.getModel("itemStyle"),c,!0),c);if(isNaN(f.startAngle)){a.setShape(f);return}if(i){a.setShape(f);var p=o.getShallow("animationType");o.ecModel.ssr?(ur(a,{scaleX:0,scaleY:0},o,{dataIndex:r,isFrom:!0}),a.originX=f.cx,a.originY=f.cy):p==="scale"?(a.shape.r=c.r0,ur(a,{shape:{r:c.r}},o,r)):s!=null?(a.setShape({startAngle:s,endAngle:s}),ur(a,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},o,r)):(a.shape.endAngle=c.startAngle,bn(a,{shape:{endAngle:c.endAngle}},o,r))}else Bo(a),bn(a,{shape:f},o,r);a.useStyle(n.getItemVisual(r,"style")),js(a,l);var h=(c.startAngle+c.endAngle)/2,m=o.get("selectedOffset"),g=Math.cos(h)*m,y=Math.sin(h)*m,x=l.getShallow("cursor");x&&a.attr("cursor",x),this._updateLabel(o,n,r),a.ensureState("emphasis").shape=Ne({r:c.r+(d.get("scale")&&d.get("scaleSize")||0)},fp(d.getModel("itemStyle"),c)),Ne(a.ensureState("select"),{x:g,y,shape:fp(l.getModel(["select","itemStyle"]),c)}),Ne(a.ensureState("blur"),{shape:fp(l.getModel(["blur","itemStyle"]),c)});var _=a.getTextGuideLine(),k=a.getTextContent();_&&Ne(_.ensureState("select"),{x:g,y}),Ne(k.ensureState("select"),{x:g,y}),kr(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(n,r,s){var i=this,a=r.getItemModel(s),o=a.getModel("labelLine"),l=r.getItemVisual(s,"style"),d=l&&l.fill,c=l&&l.opacity;Fs(i,ps(a),{labelFetcher:r.hostModel,labelDataIndex:s,inheritColor:d,defaultOpacity:c,defaultText:n.getFormattedLabel(s,"normal")||r.getName(s)});var f=i.getTextContent();i.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var p=n.get(["label","position"]);if(p!=="outside"&&p!=="outer")i.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new Ii,this.setTextGuideLine(h)),z6(this,U6(a),{stroke:d,opacity:Dl(o.get(["lineStyle","opacity"]),c,1)})}},e}(Ri),Wze=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,s,i){var a=n.getData(),o=this._data,l=this.group,d;if(!o&&a.count()>0){for(var c=a.getItemLayout(0),f=1;isNaN(c&&c.startAngle)&&f<a.count();++f)c=a.getItemLayout(f);c&&(d=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),a.count()===0&&n.get("showEmptyCircle")){var p=Mse(n),h=new Ri({shape:Ne($se(n,s),p)});h.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,l.add(h)}a.diff(o).add(function(m){var g=new qze(a,m,d);a.setItemGraphicEl(m,g),l.add(g)}).update(function(m,g){var y=o.getItemGraphicEl(g);y.updateData(a,m,d),y.off("click"),l.add(y),a.setItemGraphicEl(m,y)}).remove(function(m){var g=o.getItemGraphicEl(m);_1(g,n,m)}).execute(),Hze(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},e.prototype.dispose=function(){},e.prototype.containPoint=function(n,r){var s=r.getData(),i=s.getItemLayout(0);if(i){var a=n[0]-i.cx,o=n[1]-i.cy,l=Math.sqrt(a*a+o*o);return l<=i.r&&l>=i.r0}},e.type="pie",e}(On);function Xg(t,e,n){e=He(e)&&{coordDimensions:e}||Ne({encodeDefine:t.getEncode()},e);var r=t.getSource(),s=Ib(r,e).dimensions,i=new wi(s,t);return i.initData(r,n),i}var Bb=function(){function t(e,n){this._getDataWithEncodedVisual=e,this._getRawData=n}return t.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},t.prototype.containName=function(e){var n=this._getRawData();return n.indexOfName(e)>=0},t.prototype.indexOfName=function(e){var n=this._getDataWithEncodedVisual();return n.indexOfName(e)},t.prototype.getItemVisual=function(e,n){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,n)},t}(),Gze=ln(),Yze=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Bb(ct(this.getData,this),ct(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Xg(this,{coordDimensions:["value"],encodeDefaulter:Nt(w6,this)})},e.prototype.getDataParams=function(n){var r=this.getData(),s=Gze(r),i=s.seats;if(!i){var a=[];r.each(r.mapDimension("value"),function(l){a.push(l)}),i=s.seats=F8e(a,r.hostModel.get("percentPrecision"))}var o=t.prototype.getDataParams.call(this,n);return o.percent=i[n]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(n){Xp(n,"labelLine",["show"]);var r=n.labelLine,s=n.emphasis.labelLine;r.show=r.show&&n.label.show,s.show=s.show&&n.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Jn);function Kze(t){return{seriesType:t,reset:function(e,n){var r=e.getData();r.filterSelf(function(s){var i=r.mapDimension("value"),a=r.get(i,s);return!(hn(a)&&!isNaN(a)&&a<0)})}}}function Xze(t){t.registerChartView(Wze),t.registerSeriesModel(Yze),Zne("pie",t.registerAction),t.registerLayout(Nt(Bze,"pie")),t.registerProcessor(Fb("pie")),t.registerProcessor(Kze("pie"))}var Qze=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n,r){return bd(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var n=this.option.progressive;return n==null?this.option.large?5e3:this.get("progressive"):n},e.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n==null?this.option.large?1e4:this.get("progressiveThreshold"):n},e.prototype.brushSelector=function(n,r,s){return s.point(r.getItemLayout(n))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Jn),Dse=4,Zze=function(){function t(){}return t}(),Jze=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new Zze},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(n,r){var s=r.points,i=r.size,a=this.symbolProxy,o=a.shape,l=n.getContext?n.getContext():n,d=l&&i[0]<Dse,c=this.softClipShape,f;if(d){this._ctx=l;return}for(this._ctx=null,f=this._off;f<s.length;){var p=s[f++],h=s[f++];isNaN(p)||isNaN(h)||c&&!c.contain(p,h)||(o.x=p-i[0]/2,o.y=h-i[1]/2,o.width=i[0],o.height=i[1],a.buildPath(n,o,!0))}this.incremental&&(this._off=f,this.notClear=!0)},e.prototype.afterBrush=function(){var n=this.shape,r=n.points,s=n.size,i=this._ctx,a=this.softClipShape,o;if(i){for(o=this._off;o<r.length;){var l=r[o++],d=r[o++];isNaN(l)||isNaN(d)||a&&!a.contain(l,d)||i.fillRect(l-s[0]/2,d-s[1]/2,s[0],s[1])}this.incremental&&(this._off=o,this.notClear=!0)}},e.prototype.findDataIndex=function(n,r){for(var s=this.shape,i=s.points,a=s.size,o=Math.max(a[0],4),l=Math.max(a[1],4),d=i.length/2-1;d>=0;d--){var c=d*2,f=i[c]-o/2,p=i[c+1]-l/2;if(n>=f&&r>=p&&n<=f+o&&r<=p+l)return d}return-1},e.prototype.contain=function(n,r){var s=this.transformCoordToLocal(n,r),i=this.getBoundingRect();if(n=s[0],r=s[1],i.contain(n,r)){var a=this.hoverDataIdx=this.findDataIndex(n,r);return a>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,s=r.points,i=r.size,a=i[0],o=i[1],l=1/0,d=1/0,c=-1/0,f=-1/0,p=0;p<s.length;){var h=s[p++],m=s[p++];l=Math.min(h,l),c=Math.max(h,c),d=Math.min(m,d),f=Math.max(m,f)}n=this._rect=new Gt(l-a/2,d-o/2,c-l+a,f-d+o)}return n},e}(en),eUe=function(){function t(){this.group=new Tt}return t.prototype.updateData=function(e,n){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,n)},t.prototype.updateLayout=function(e){var n=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var s=(r.endIndex-r.startIndex)*2,i=r.startIndex*4*2;n=new Float32Array(n.buffer,i,s)}r.setShape("points",n),r.reset()})},t.prototype.incrementalPrepareUpdate=function(e){this._clear()},t.prototype.incrementalUpdate=function(e,n,r){var s=this._newAdded[0],i=n.getLayout("points"),a=s&&s.shape.points;if(a&&a.length<2e4){var o=a.length,l=new Float32Array(o+i.length);l.set(a),l.set(i,o),s.endIndex=e.end,s.setShape({points:l})}else{this._newAdded=[];var d=this._create();d.startIndex=e.start,d.endIndex=e.end,d.incremental=!0,d.setShape({points:i}),this._setCommon(d,n,r)}},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new Jze({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},t.prototype._setCommon=function(e,n,r){var s=n.hostModel;r=r||{};var i=n.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=r.clipShape||null,e.symbolProxy=Wr(n.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var a=e.shape.size[0]<Dse;e.useStyle(s.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var o=n.getVisual("style"),l=o&&o.fill;l&&e.setColor(l);var d=Et(e);d.seriesIndex=s.seriesIndex,e.on("mousemove",function(c){d.dataIndex=null;var f=e.hoverDataIdx;f>=0&&(d.dataIndex=f+(e.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),tUe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){var i=n.getData(),a=this._updateSymbolDraw(i,n);a.updateData(i,{clipShape:this._getClipShape(n)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(n,r,s){var i=n.getData(),a=this._updateSymbolDraw(i,n);a.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(n,r,s){this._symbolDraw.incrementalUpdate(n,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=n.end===r.getData().count()},e.prototype.updateTransform=function(n,r,s){var i=n.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var a=jb("").reset(n,r,s);a.progress&&a.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},e.prototype._getClipShape=function(n){if(n.get("clip",!0)){var r=n.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(n,r){var s=this._symbolDraw,i=r.pipelineContext,a=i.large;return(!s||a!==this._isLargeDraw)&&(s&&s.remove(),s=this._symbolDraw=a?new eUe:new Vb,this._isLargeDraw=a,this.group.removeAll()),this.group.add(s.group),s},e.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(On),nUe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(nn),CE=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Br).models[0]},e.type="cartesian2dAxis",e}(nn);Gr(CE,Ob);var Rse={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},rUe=Ht({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Rse),X6=Ht({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Rse),sUe=Ht({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},X6),iUe=_t({logBase:10},X6);const Pse={category:rUe,value:X6,time:sUe,log:iUe};var aUe={value:1,category:1,time:1,log:1};function wg(t,e,n,r){de(aUe,function(s,i){var a=Ht(Ht({},Pse[i],!0),r,!0),o=function(l){Te(d,l);function d(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=e+"Axis."+i,c}return d.prototype.mergeDefaultAndTheme=function(c,f){var p=k1(this),h=p?Hg(c):{},m=f.getTheme();Ht(c,m.get(i+"Axis")),Ht(c,this.getDefaultOption()),c.type=rB(c),p&&Nc(c,h,p)},d.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=yE.createByAxisModel(this))},d.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.type=e+"Axis."+i,d.defaultOption=a,d}(n);t.registerComponentModel(o)}),t.registerSubTypeDefaulter(e+"Axis",rB)}function rB(t){return t.type||(t.data?"category":"value")}var oUe=function(){function t(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return t.prototype.getAxis=function(e){return this._axes[e]},t.prototype.getAxes=function(){return We(this._dimList,function(e){return this._axes[e]},this)},t.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Sn(this.getAxes(),function(n){return n.scale.type===e})},t.prototype.addAxis=function(e){var n=e.dim;this._axes[n]=e,this._dimList.push(n)},t}(),AE=["x","y"];function sB(t){return t.type==="interval"||t.type==="time"}var lUe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=AE,n}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!sB(n)||!sB(r))){var s=n.getExtent(),i=r.getExtent(),a=this.dataToPoint([s[0],i[0]]),o=this.dataToPoint([s[1],i[1]]),l=s[1]-s[0],d=i[1]-i[0];if(!(!l||!d)){var c=(o[0]-a[0])/l,f=(o[1]-a[1])/d,p=a[0]-s[0]*c,h=a[1]-i[0]*f,m=this._transform=[c,0,0,f,p,h];this._invTransform=Vg([],m)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(n){var r=this.getAxis("x"),s=this.getAxis("y");return r.contain(r.toLocalCoord(n[0]))&&s.contain(s.toLocalCoord(n[1]))},e.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},e.prototype.containZone=function(n,r){var s=this.dataToPoint(n),i=this.dataToPoint(r),a=this.getArea(),o=new Gt(s[0],s[1],i[0]-s[0],i[1]-s[1]);return a.intersect(o)},e.prototype.dataToPoint=function(n,r,s){s=s||[];var i=n[0],a=n[1];if(this._transform&&i!=null&&isFinite(i)&&a!=null&&isFinite(a))return Ls(s,n,this._transform);var o=this.getAxis("x"),l=this.getAxis("y");return s[0]=o.toGlobalCoord(o.dataToCoord(i,r)),s[1]=l.toGlobalCoord(l.dataToCoord(a,r)),s},e.prototype.clampData=function(n,r){var s=this.getAxis("x").scale,i=this.getAxis("y").scale,a=s.getExtent(),o=i.getExtent(),l=s.parse(n[0]),d=i.parse(n[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),r[1]=Math.min(Math.max(Math.min(o[0],o[1]),d),Math.max(o[0],o[1])),r},e.prototype.pointToData=function(n,r){var s=[];if(this._invTransform)return Ls(s,n,this._invTransform);var i=this.getAxis("x"),a=this.getAxis("y");return s[0]=i.coordToData(i.toLocalCoord(n[0]),r),s[1]=a.coordToData(a.toLocalCoord(n[1]),r),s},e.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},e.prototype.getArea=function(n){n=n||0;var r=this.getAxis("x").getGlobalExtent(),s=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1])-n,a=Math.min(s[0],s[1])-n,o=Math.max(r[0],r[1])-i+n,l=Math.max(s[0],s[1])-a+n;return new Gt(i,a,o,l)},e}(oUe),uUe=function(t){Te(e,t);function e(n,r,s,i,a){var o=t.call(this,n,r,s)||this;return o.index=0,o.type=i||"value",o.position=a||"bottom",o}return e.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},e.prototype.getGlobalExtent=function(n){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),n&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(n,r){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},e}(Ho);function TE(t,e,n){n=n||{};var r=t.coordinateSystem,s=e.axis,i={},a=s.getAxesOnZeroOf()[0],o=s.position,l=a?"onZero":o,d=s.dim,c=r.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],p={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,m=d==="x"?[f[2]-h,f[3]+h]:[f[0]-h,f[1]+h];if(a){var g=a.toGlobalCoord(a.dataToCoord(0));m[p.onZero]=Math.max(Math.min(g,m[1]),m[0])}i.position=[d==="y"?m[p[l]]:f[0],d==="x"?m[p[l]]:f[3]],i.rotation=Math.PI/2*(d==="x"?0:1);var y={top:-1,bottom:1,left:-1,right:1};i.labelDirection=i.tickDirection=i.nameDirection=y[o],i.labelOffset=a?m[p[o]]-m[p.onZero]:0,e.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),xs(n.labelInside,e.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var x=e.get(["axisLabel","rotate"]);return i.labelRotate=l==="top"?-x:x,i.z2=1,i}function iB(t){return t.get("coordinateSystem")==="cartesian2d"}function aB(t){var e={xAxisModel:null,yAxisModel:null};return de(e,function(n,r){var s=r.replace(/Model$/,""),i=t.getReferringComponents(s,Br).models[0];e[r]=i}),e}var x3=Math.log;function Ise(t,e,n){var r=ud.prototype,s=r.getTicks.call(n),i=r.getTicks.call(n,!0),a=s.length-1,o=r.getInterval.call(n),l=Vre(t,e),d=l.extent,c=l.fixMin,f=l.fixMax;if(t.type==="log"){var p=x3(t.base);d=[x3(d[0])/p,x3(d[1])/p]}t.setExtent(d[0],d[1]),t.calcNiceExtent({splitNumber:a,fixMin:c,fixMax:f});var h=r.getExtent.call(t);c&&(d[0]=h[0]),f&&(d[1]=h[1]);var m=r.getInterval.call(t),g=d[0],y=d[1];if(c&&f)m=(y-g)/a;else if(c)for(y=d[0]+m*a;y<d[1]&&isFinite(y)&&isFinite(d[1]);)m=i3(m),y=d[0]+m*a;else if(f)for(g=d[1]-m*a;g>d[0]&&isFinite(g)&&isFinite(d[0]);)m=i3(m),g=d[1]-m*a;else{var x=t.getTicks().length-1;x>a&&(m=i3(m));var _=m*a;y=Math.ceil(d[1]/m)*m,g=Mr(y-_),g<0&&d[0]>=0?(g=0,y=Mr(_)):y>0&&d[1]<=0&&(y=0,g=-Mr(_))}var k=(s[0].value-i[0].value)/o,w=(s[a].value-i[a].value)/o;r.setExtent.call(t,g+m*k,y+m*w),r.setInterval.call(t,m),(k||w)&&r.setNiceExtent.call(t,g+m,y-m)}var dUe=function(){function t(e,n,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=AE,this._initCartesian(e,n,r),this.model=e}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(e,n){var r=this._axesMap;this._updateScale(e,this.model);function s(a){var o,l=sn(a),d=l.length;if(d){for(var c=[],f=d-1;f>=0;f--){var p=+l[f],h=a[p],m=h.model,g=h.scale;bE(g)&&m.get("alignTicks")&&m.get("interval")==null?c.push(h):(xg(g,m),bE(g)&&(o=h))}c.length&&(o||(o=c.pop(),xg(o.scale,o.model)),de(c,function(y){Ise(y.scale,y.model,o.scale)}))}}s(r.x),s(r.y);var i={};de(r.x,function(a){oB(r,"y",a,i)}),de(r.y,function(a){oB(r,"x",a,i)}),this.resize(this.model,n)},t.prototype.resize=function(e,n,r){var s=e.getBoxLayoutParams(),i=!r&&e.get("containLabel"),a=ts(s,{width:n.getWidth(),height:n.getHeight()});this._rect=a;var o=this._axesList;l(),i&&(de(o,function(d){if(!d.model.get(["axisLabel","inside"])){var c=HFe(d);if(c){var f=d.isHorizontal()?"height":"width",p=d.model.get(["axisLabel","margin"]);a[f]-=c[f]+p,d.position==="top"?a.y+=c.height+p:d.position==="left"&&(a.x+=c.width+p)}}}),l()),de(this._coordsList,function(d){d.calcAffineTransform()});function l(){de(o,function(d){var c=d.isHorizontal(),f=c?[0,a.width]:[0,a.height],p=d.inverse?1:0;d.setExtent(f[p],f[1-p]),cUe(d,c?a.x:a.y)})}},t.prototype.getAxis=function(e,n){var r=this._axesMap[e];if(r!=null)return r[n||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(e,n){if(e!=null&&n!=null){var r="x"+e+"y"+n;return this._coordsMap[r]}wt(e)&&(n=e.yAxisIndex,e=e.xAxisIndex);for(var s=0,i=this._coordsList;s<i.length;s++)if(i[s].getAxis("x").index===e||i[s].getAxis("y").index===n)return i[s]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(e,n,r){var s=this._findConvertTarget(n);return s.cartesian?s.cartesian.dataToPoint(r):s.axis?s.axis.toGlobalCoord(s.axis.dataToCoord(r)):null},t.prototype.convertFromPixel=function(e,n,r){var s=this._findConvertTarget(n);return s.cartesian?s.cartesian.pointToData(r):s.axis?s.axis.coordToData(s.axis.toLocalCoord(r)):null},t.prototype._findConvertTarget=function(e){var n=e.seriesModel,r=e.xAxisModel||n&&n.getReferringComponents("xAxis",Br).models[0],s=e.yAxisModel||n&&n.getReferringComponents("yAxis",Br).models[0],i=e.gridModel,a=this._coordsList,o,l;if(n)o=n.coordinateSystem,Xt(a,o)<0&&(o=null);else if(r&&s)o=this.getCartesian(r.componentIndex,s.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(s)l=this.getAxis("y",s.componentIndex);else if(i){var d=i.coordinateSystem;d===this&&(o=this._coordsList[0])}return{cartesian:o,axis:l}},t.prototype.containPoint=function(e){var n=this._coordsList[0];if(n)return n.containPoint(e)},t.prototype._initCartesian=function(e,n,r){var s=this,i=this,a={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},l={x:0,y:0};if(n.eachComponent("xAxis",d("x"),this),n.eachComponent("yAxis",d("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,de(o.x,function(c,f){de(o.y,function(p,h){var m="x"+f+"y"+h,g=new lUe(m);g.master=s,g.model=e,s._coordsMap[m]=g,s._coordsList.push(g),g.addAxis(c),g.addAxis(p)})});function d(c){return function(f,p){if(_3(f,e)){var h=f.get("position");c==="x"?h!=="top"&&h!=="bottom"&&(h=a.bottom?"top":"bottom"):h!=="left"&&h!=="right"&&(h=a.left?"right":"left"),a[h]=!0;var m=new uUe(c,mA(f),[0,0],f.get("type"),h),g=m.type==="category";m.onBand=g&&f.get("boundaryGap"),m.inverse=f.get("inverse"),f.axis=m,m.model=f,m.grid=i,m.index=p,i._axesList.push(m),o[c][p]=m,l[c]++}}}},t.prototype._updateScale=function(e,n){de(this._axesList,function(s){if(s.scale.setExtent(1/0,-1/0),s.type==="category"){var i=s.model.get("categorySortInfo");s.scale.setSortInfo(i)}}),e.eachSeries(function(s){if(iB(s)){var i=aB(s),a=i.xAxisModel,o=i.yAxisModel;if(!_3(a,n)||!_3(o,n))return;var l=this.getCartesian(a.componentIndex,o.componentIndex),d=s.getData(),c=l.getAxis("x"),f=l.getAxis("y");r(d,c),r(d,f)}},this);function r(s,i){de(Uk(s,i.dim),function(a){i.scale.unionExtentFromData(s,a)})}},t.prototype.getTooltipAxes=function(e){var n=[],r=[];return de(this.getCartesians(),function(s){var i=e!=null&&e!=="auto"?s.getAxis(e):s.getBaseAxis(),a=s.getOtherAxis(i);Xt(n,i)<0&&n.push(i),Xt(r,a)<0&&r.push(a)}),{baseAxes:n,otherAxes:r}},t.create=function(e,n){var r=[];return e.eachComponent("grid",function(s,i){var a=new t(s,e,n);a.name="grid_"+i,a.resize(s,n,!0),s.coordinateSystem=a,r.push(a)}),e.eachSeries(function(s){if(iB(s)){var i=aB(s),a=i.xAxisModel,o=i.yAxisModel,l=a.getCoordSysModel(),d=l.coordinateSystem;s.coordinateSystem=d.getCartesian(a.componentIndex,o.componentIndex)}}),r},t.dimensions=AE,t}();function _3(t,e){return t.getCoordSysModel()===e}function oB(t,e,n,r){n.getAxesOnZeroOf=function(){return i?[i]:[]};var s=t[e],i,a=n.model,o=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(l!=null)lB(s[l])&&(i=s[l]);else for(var d in s)if(s.hasOwnProperty(d)&&lB(s[d])&&!r[c(s[d])]){i=s[d];break}i&&(r[c(i)]=!0);function c(f){return f.dim+"_"+f.index}}function lB(t){return t&&t.type!=="category"&&t.type!=="time"&&UFe(t)}function cUe(t,e){var n=t.getExtent(),r=n[0]+n[1];t.toGlobalCoord=t.dim==="x"?function(s){return s+e}:function(s){return r-s+e},t.toLocalCoord=t.dim==="x"?function(s){return s-e}:function(s){return r-s+e}}var dc=Math.PI,ki=function(){function t(e,n){this.group=new Tt,this.opt=n,this.axisModel=e,_t(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new Tt({x:n.position[0],y:n.position[1],rotation:n.rotation});r.updateTransform(),this._transformGroup=r}return t.prototype.hasBuilder=function(e){return!!uB[e]},t.prototype.add=function(e){uB[e](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(e,n,r){var s=ete(n-e),i,a;return v1(s)?(a=r>0?"top":"bottom",i="center"):v1(s-dc)?(a=r>0?"bottom":"top",i="center"):(a="middle",s>0&&s<dc?i=r>0?"right":"left":i=r>0?"left":"right"),{rotation:s,textAlign:i,textVerticalAlign:a}},t.makeAxisEventDataBase=function(e){var n={componentType:e.mainType,componentIndex:e.componentIndex};return n[e.mainType+"Index"]=e.componentIndex,n},t.isLabelSilent=function(e){var n=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||n&&n.show)},t}(),uB={axisLine:function(t,e,n,r){var s=e.get(["axisLine","show"]);if(s==="auto"&&t.handleAutoShown&&(s=t.handleAutoShown("axisLine")),!!s){var i=e.axis.getExtent(),a=r.transform,o=[i[0],0],l=[i[1],0],d=o[0]>l[0];a&&(Ls(o,o,a),Ls(l,l,a));var c=Ne({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new ls({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});vg(f.shape,f.style.lineWidth),f.anid="line",n.add(f);var p=e.get(["axisLine","symbol"]);if(p!=null){var h=e.get(["axisLine","symbolSize"]);ot(p)&&(p=[p,p]),(ot(h)||hn(h))&&(h=[h,h]);var m=yh(e.get(["axisLine","symbolOffset"])||0,h),g=h[0],y=h[1];de([{rotate:t.rotation+Math.PI/2,offset:m[0],r:0},{rotate:t.rotation-Math.PI/2,offset:m[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(x,_){if(p[_]!=="none"&&p[_]!=null){var k=Wr(p[_],-g/2,-y/2,g,y,c.stroke,!0),w=x.r+x.offset,S=d?l:o;k.attr({rotation:x.rotate,x:S[0]+w*Math.cos(t.rotation),y:S[1]-w*Math.sin(t.rotation),silent:!0,z2:11}),n.add(k)}})}}},axisTickLabel:function(t,e,n,r){var s=hUe(n,r,e,t),i=gUe(n,r,e,t);if(pUe(e,i,s),mUe(n,r,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])){var a=Qre(We(i,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));ese(a)}},axisName:function(t,e,n,r){var s=xs(t.axisName,e.get("name"));if(s){var i=e.get("nameLocation"),a=t.nameDirection,o=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,d=e.axis.getExtent(),c=d[0]>d[1]?-1:1,f=[i==="start"?d[0]-c*l:i==="end"?d[1]+c*l:(d[0]+d[1])/2,cB(i)?t.labelOffset+a*l:0],p,h=e.get("nameRotate");h!=null&&(h=h*dc/180);var m;cB(i)?p=ki.innerTextLayout(t.rotation,h!=null?h:t.rotation,a):(p=fUe(t.rotation,i,h||0,d),m=t.axisNameAvailableWidth,m!=null&&(m=Math.abs(m/Math.sin(p.rotation)),!isFinite(m)&&(m=null)));var g=o.getFont(),y=e.get("nameTruncate",!0)||{},x=y.ellipsis,_=xs(t.nameTruncateMaxWidth,y.maxWidth,m),k=new dn({x:f[0],y:f[1],rotation:p.rotation,silent:ki.isLabelSilent(e),style:Xn(o,{text:s,font:g,overflow:"truncate",width:_,ellipsis:x,fill:o.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:o.get("align")||p.textAlign,verticalAlign:o.get("verticalAlign")||p.textVerticalAlign}),z2:1});if(gh({el:k,componentModel:e,itemName:s}),k.__fullText=s,k.anid="name",e.get("triggerEvent")){var w=ki.makeAxisEventDataBase(e);w.targetType="axisName",w.name=s,Et(k).eventData=w}r.add(k),k.updateTransform(),n.add(k),k.decomposeTransform()}}};function fUe(t,e,n,r){var s=ete(n-t),i,a,o=r[0]>r[1],l=e==="start"&&!o||e!=="start"&&o;return v1(s-dc/2)?(a=l?"bottom":"top",i="center"):v1(s-dc*1.5)?(a=l?"top":"bottom",i="center"):(a="middle",s<dc*1.5&&s>dc/2?i=l?"left":"right":i=l?"right":"left"),{rotation:s,textAlign:i,textVerticalAlign:a}}function pUe(t,e,n){if(!Nre(t.axis)){var r=t.get(["axisLabel","showMinLabel"]),s=t.get(["axisLabel","showMaxLabel"]);e=e||[],n=n||[];var i=e[0],a=e[1],o=e[e.length-1],l=e[e.length-2],d=n[0],c=n[1],f=n[n.length-1],p=n[n.length-2];r===!1?(Aa(i),Aa(d)):dB(i,a)&&(r?(Aa(a),Aa(c)):(Aa(i),Aa(d))),s===!1?(Aa(o),Aa(f)):dB(l,o)&&(s?(Aa(l),Aa(p)):(Aa(o),Aa(f)))}}function Aa(t){t&&(t.ignore=!0)}function dB(t,e){var n=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!n||!r)){var s=FC([]);return mh(s,s,-t.rotation),n.applyTransform(qu([],s,t.getLocalTransform())),r.applyTransform(qu([],s,e.getLocalTransform())),n.intersect(r)}}function cB(t){return t==="middle"||t==="center"}function Ose(t,e,n,r,s){for(var i=[],a=[],o=[],l=0;l<t.length;l++){var d=t[l].coord;a[0]=d,a[1]=0,o[0]=d,o[1]=n,e&&(Ls(a,a,e),Ls(o,o,e));var c=new ls({shape:{x1:a[0],y1:a[1],x2:o[0],y2:o[1]},style:r,z2:2,autoBatch:!0,silent:!0});vg(c.shape,c.style.lineWidth),c.anid=s+"_"+t[l].tickValue,i.push(c)}return i}function hUe(t,e,n,r){var s=n.axis,i=n.getModel("axisTick"),a=i.get("show");if(a==="auto"&&r.handleAutoShown&&(a=r.handleAutoShown("axisTick")),!(!a||s.scale.isBlank())){for(var o=i.getModel("lineStyle"),l=r.tickDirection*i.get("length"),d=s.getTicksCoords(),c=Ose(d,e.transform,l,_t(o.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)t.add(c[f]);return c}}function mUe(t,e,n,r){var s=n.axis,i=n.getModel("minorTick");if(!(!i.get("show")||s.scale.isBlank())){var a=s.getMinorTicksCoords();if(a.length)for(var o=i.getModel("lineStyle"),l=r*i.get("length"),d=_t(o.getLineStyle(),_t(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=Ose(a[c],e.transform,l,d,"minorticks_"+c),p=0;p<f.length;p++)t.add(f[p])}}function gUe(t,e,n,r){var s=n.axis,i=xs(r.axisLabelShow,n.get(["axisLabel","show"]));if(!(!i||s.scale.isBlank())){var a=n.getModel("axisLabel"),o=a.get("margin"),l=s.getViewLabels(),d=(xs(r.labelRotate,a.get("rotate"))||0)*dc/180,c=ki.innerTextLayout(r.rotation,d,r.labelDirection),f=n.getCategories&&n.getCategories(!0),p=[],h=ki.isLabelSilent(n),m=n.get("triggerEvent");return de(l,function(g,y){var x=s.scale.type==="ordinal"?s.scale.getRawOrdinalNumber(g.tickValue):g.tickValue,_=g.formattedLabel,k=g.rawLabel,w=a;if(f&&f[x]){var S=f[x];wt(S)&&S.textStyle&&(w=new Tn(S.textStyle,a,n.ecModel))}var C=w.getTextColor()||n.get(["axisLine","lineStyle","color"]),A=s.dataToCoord(x),M=w.getShallow("align",!0)||c.textAlign,E=Ot(w.getShallow("alignMinLabel",!0),M),P=Ot(w.getShallow("alignMaxLabel",!0),M),I=w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,F=Ot(w.getShallow("verticalAlignMinLabel",!0),I),L=Ot(w.getShallow("verticalAlignMaxLabel",!0),I),z=new dn({x:A,y:r.labelOffset+r.labelDirection*o,rotation:c.rotation,silent:h,z2:10+(g.level||0),style:Xn(w,{text:_,align:y===0?E:y===l.length-1?P:M,verticalAlign:y===0?F:y===l.length-1?L:I,fill:bt(C)?C(s.type==="category"?k:s.type==="value"?x+"":x,y):C})});if(z.anid="label_"+x,gh({el:z,componentModel:n,itemName:_,formatterParamsExtra:{isTruncated:function(){return z.isTruncated},value:k,tickIndex:y}}),m){var N=ki.makeAxisEventDataBase(n);N.targetType="axisLabel",N.value=k,N.tickIndex=y,s.type==="category"&&(N.dataIndex=x),Et(z).eventData=N}e.add(z),z.updateTransform(),p.push(z),t.add(z),z.decomposeTransform()}),p}}function vUe(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return yUe(n,t,e),n.seriesInvolved&&xUe(n,t),n}function yUe(t,e,n){var r=e.getComponent("tooltip"),s=e.getComponent("axisPointer"),i=s.get("link",!0)||[],a=[];de(n.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=R1(o.model),d=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=o;var c=o.model,f=c.getModel("tooltip",r);if(de(o.getAxes(),Nt(g,!1,null)),o.getTooltipAxes&&r&&f.get("show")){var p=f.get("trigger")==="axis",h=f.get(["axisPointer","type"])==="cross",m=o.getTooltipAxes(f.get(["axisPointer","axis"]));(p||h)&&de(m.baseAxes,Nt(g,h?"cross":!0,p)),h&&de(m.otherAxes,Nt(g,"cross",!1))}function g(y,x,_){var k=_.model.getModel("axisPointer",s),w=k.get("show");if(!(!w||w==="auto"&&!y&&!$E(k))){x==null&&(x=k.get("triggerTooltip")),k=y?bUe(_,f,s,e,y,x):k;var S=k.get("snap"),C=k.get("triggerEmphasis"),A=R1(_.model),M=x||S||_.type==="category",E=t.axesInfo[A]={key:A,axis:_,coordSys:o,axisPointerModel:k,triggerTooltip:x,triggerEmphasis:C,involveSeries:M,snap:S,useHandle:$E(k),seriesModels:[],linkGroup:null};d[A]=E,t.seriesInvolved=t.seriesInvolved||M;var P=_Ue(i,_);if(P!=null){var I=a[P]||(a[P]={axesInfo:{}});I.axesInfo[A]=E,I.mapper=i[P].mapper,E.linkGroup=I}}}})}function bUe(t,e,n,r,s,i){var a=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};de(o,function(p){l[p]=kt(a.get(p))}),l.snap=t.type!=="category"&&!!i,a.get("type")==="cross"&&(l.type="line");var d=l.label||(l.label={});if(d.show==null&&(d.show=!1),s==="cross"){var c=a.get(["label","show"]);if(d.show=c!=null?c:!0,!i){var f=l.lineStyle=a.get("crossStyle");f&&_t(d,f.textStyle)}}return t.model.getModel("axisPointer",new Tn(l,n,r))}function xUe(t,e){e.eachSeries(function(n){var r=n.coordinateSystem,s=n.get(["tooltip","trigger"],!0),i=n.get(["tooltip","show"],!0);!r||s==="none"||s===!1||s==="item"||i===!1||n.get(["axisPointer","show"],!0)===!1||de(t.coordSysAxesInfo[R1(r.model)],function(a){var o=a.axis;r.getAxis(o.dim)===o&&(a.seriesModels.push(n),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=n.getData().count())})})}function _Ue(t,e){for(var n=e.model,r=e.dim,s=0;s<t.length;s++){var i=t[s]||{};if(w3(i[r+"AxisId"],n.id)||w3(i[r+"AxisIndex"],n.componentIndex)||w3(i[r+"AxisName"],n.name))return s}}function w3(t,e){return t==="all"||He(t)&&Xt(t,e)>=0||t===e}function wUe(t){var e=Q6(t);if(e){var n=e.axisPointerModel,r=e.axis.scale,s=n.option,i=n.get("status"),a=n.get("value");a!=null&&(a=r.parse(a));var o=$E(n);i==null&&(s.status=o?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),s.value=a,o&&(s.status=e.axis.scale.isBlank()?"hide":"show")}}function Q6(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[R1(t)]}function kUe(t){var e=Q6(t);return e&&e.axisPointerModel}function $E(t){return!!t.get(["handle","show"])}function R1(t){return t.type+"||"+t.id}var fB={},_h=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s,i){this.axisPointerClass&&wUe(n),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,s,!0)},e.prototype.updateAxisPointer=function(n,r,s,i){this._doUpdateAxisPointerClass(n,s,!1)},e.prototype.remove=function(n,r){var s=this._axisPointer;s&&s.remove(r)},e.prototype.dispose=function(n,r){this._disposeAxisPointer(r),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(n,r,s){var i=e.getAxisPointerClass(this.axisPointerClass);if(i){var a=kUe(n);a?(this._axisPointer||(this._axisPointer=new i)).render(n,a,r,s):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},e.registerAxisPointerClass=function(n,r){fB[n]=r},e.getAxisPointerClass=function(n){return n&&fB[n]},e.type="axis",e}(vr),ME=ln();function Lse(t,e,n,r){var s=n.axis;if(!s.scale.isBlank()){var i=n.getModel("splitArea"),a=i.getModel("areaStyle"),o=a.get("color"),l=r.coordinateSystem.getRect(),d=s.getTicksCoords({tickModel:i,clamp:!0});if(d.length){var c=o.length,f=ME(t).splitAreaColors,p=mt(),h=0;if(f)for(var m=0;m<d.length;m++){var g=f.get(d[m].tickValue);if(g!=null){h=(g+(c-1)*m)%c;break}}var y=s.toGlobalCoord(d[0].coord),x=a.getAreaStyle();o=He(o)?o:[o];for(var m=1;m<d.length;m++){var _=s.toGlobalCoord(d[m].coord),k=void 0,w=void 0,S=void 0,C=void 0;s.isHorizontal()?(k=y,w=l.y,S=_-k,C=l.height,y=k+S):(k=l.x,w=y,S=l.width,C=_-w,y=w+C);var A=d[m-1].tickValue;A!=null&&p.set(A,h),e.add(new on({anid:A!=null?"area_"+A:null,shape:{x:k,y:w,width:S,height:C},style:_t({fill:o[h]},x),autoBatch:!0,silent:!0})),h=(h+1)%c}ME(t).splitAreaColors=p}}}function Vse(t){ME(t).splitAreaColors=null}var SUe=["axisLine","axisTickLabel","axisName"],CUe=["splitArea","splitLine","minorSplitLine"],Nse=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return e.prototype.render=function(n,r,s,i){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new Tt,this.group.add(this._axisGroup),!!n.get("show")){var o=n.getCoordSysModel(),l=TE(o,n),d=new ki(n,Ne({handleAutoShown:function(f){for(var p=o.coordinateSystem.getCartesians(),h=0;h<p.length;h++)if(bE(p[h].getOtherAxis(n.axis).scale))return!0;return!1}},l));de(SUe,d.add,d),this._axisGroup.add(d.getGroup()),de(CUe,function(f){n.get([f,"show"])&&AUe[f](this,this._axisGroup,n,o)},this);var c=i&&i.type==="changeAxisOrder"&&i.isInitSort;c||Eb(a,this._axisGroup,n),t.prototype.render.call(this,n,r,s,i)}},e.prototype.remove=function(){Vse(this)},e.type="cartesianAxis",e}(_h),AUe={splitLine:function(t,e,n,r){var s=n.axis;if(!s.scale.isBlank()){var i=n.getModel("splitLine"),a=i.getModel("lineStyle"),o=a.get("color"),l=i.get("showMinLine")!==!1,d=i.get("showMaxLine")!==!1;o=He(o)?o:[o];for(var c=r.coordinateSystem.getRect(),f=s.isHorizontal(),p=0,h=s.getTicksCoords({tickModel:i}),m=[],g=[],y=a.getLineStyle(),x=0;x<h.length;x++){var _=s.toGlobalCoord(h[x].coord);if(!(x===0&&!l||x===h.length-1&&!d)){var k=h[x].tickValue;f?(m[0]=_,m[1]=c.y,g[0]=_,g[1]=c.y+c.height):(m[0]=c.x,m[1]=_,g[0]=c.x+c.width,g[1]=_);var w=p++%o.length,S=new ls({anid:k!=null?"line_"+k:null,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:g[0],y2:g[1]},style:_t({stroke:o[w]},y),silent:!0});vg(S.shape,y.lineWidth),e.add(S)}}}},minorSplitLine:function(t,e,n,r){var s=n.axis,i=n.getModel("minorSplitLine"),a=i.getModel("lineStyle"),o=r.coordinateSystem.getRect(),l=s.isHorizontal(),d=s.getMinorTicksCoords();if(d.length)for(var c=[],f=[],p=a.getLineStyle(),h=0;h<d.length;h++)for(var m=0;m<d[h].length;m++){var g=s.toGlobalCoord(d[h][m].coord);l?(c[0]=g,c[1]=o.y,f[0]=g,f[1]=o.y+o.height):(c[0]=o.x,c[1]=g,f[0]=o.x+o.width,f[1]=g);var y=new ls({anid:"minor_line_"+d[h][m].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:p,silent:!0});vg(y.shape,p.lineWidth),e.add(y)}},splitArea:function(t,e,n,r){Lse(t,e,n,r)}},jse=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="xAxis",e}(Nse),TUe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=jse.type,n}return e.type="yAxis",e}(Nse),$Ue=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="grid",n}return e.prototype.render=function(n,r){this.group.removeAll(),n.get("show")&&this.group.add(new on({shape:n.coordinateSystem.getRect(),style:_t({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(vr),pB={offset:0};function Fse(t){t.registerComponentView($Ue),t.registerComponentModel(nUe),t.registerCoordinateSystem("cartesian2d",dUe),wg(t,"x",CE,pB),wg(t,"y",CE,pB),t.registerComponentView(jse),t.registerComponentView(TUe),t.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function MUe(t){Qt(Fse),t.registerSeriesModel(Qze),t.registerChartView(tUe),t.registerLayout(jb("scatter"))}function EUe(t){t.eachSeriesByType("radar",function(e){var n=e.getData(),r=[],s=e.coordinateSystem;if(s){var i=s.getIndicatorAxes();de(i,function(a,o){n.each(n.mapDimension(i[o].dim),function(l,d){r[d]=r[d]||[];var c=s.dataToPoint(l,o);r[d][o]=hB(c)?c:mB(s)})}),n.each(function(a){var o=vLe(r[a],function(l){return hB(l)})||mB(s);r[a].push(o.slice()),n.setItemLayout(a,r[a])})}})}function hB(t){return!isNaN(t[0])&&!isNaN(t[1])}function mB(t){return[t.cx,t.cy]}function DUe(t){var e=t.polar;if(e){He(e)||(e=[e]);var n=[];de(e,function(r,s){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),t.radar=t.radar||[],He(t.radar)||(t.radar=[t.radar]),t.radar.push(r)):n.push(r)}),t.polar=n}de(t.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var RUe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){var i=n.coordinateSystem,a=this.group,o=n.getData(),l=this._data;function d(p,h){var m=p.getItemVisual(h,"symbol")||"circle";if(m!=="none"){var g=Yg(p.getItemVisual(h,"symbolSize")),y=Wr(m,-1,-1,2,2),x=p.getItemVisual(h,"symbolRotate")||0;return y.attr({style:{strokeNoScale:!0},z2:100,scaleX:g[0]/2,scaleY:g[1]/2,rotation:x*Math.PI/180||0}),y}}function c(p,h,m,g,y,x){m.removeAll();for(var _=0;_<h.length-1;_++){var k=d(g,y);k&&(k.__dimIdx=_,p[_]?(k.setPosition(p[_]),vh[x?"initProps":"updateProps"](k,{x:h[_][0],y:h[_][1]},n,y)):k.setPosition(h[_]),m.add(k))}}function f(p){return We(p,function(h){return[i.cx,i.cy]})}o.diff(l).add(function(p){var h=o.getItemLayout(p);if(h){var m=new Pi,g=new Ii,y={shape:{points:h}};m.shape.points=f(h),g.shape.points=f(h),ur(m,y,n,p),ur(g,y,n,p);var x=new Tt,_=new Tt;x.add(g),x.add(m),x.add(_),c(g.shape.points,h,_,o,p,!0),o.setItemGraphicEl(p,x)}}).update(function(p,h){var m=l.getItemGraphicEl(h),g=m.childAt(0),y=m.childAt(1),x=m.childAt(2),_={shape:{points:o.getItemLayout(p)}};_.shape.points&&(c(g.shape.points,_.shape.points,x,o,p,!1),Bo(y),Bo(g),bn(g,_,n),bn(y,_,n),o.setItemGraphicEl(p,m))}).remove(function(p){a.remove(l.getItemGraphicEl(p))}).execute(),o.eachItemGraphicEl(function(p,h){var m=o.getItemModel(h),g=p.childAt(0),y=p.childAt(1),x=p.childAt(2),_=o.getItemVisual(h,"style"),k=_.fill;a.add(p),g.useStyle(_t(m.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:k})),js(g,m,"lineStyle"),js(y,m,"areaStyle");var w=m.getModel("areaStyle"),S=w.isEmpty()&&w.parentModel.isEmpty();y.ignore=S,de(["emphasis","select","blur"],function(M){var E=m.getModel([M,"areaStyle"]),P=E.isEmpty()&&E.parentModel.isEmpty();y.ensureState(M).ignore=P&&S}),y.useStyle(_t(w.getAreaStyle(),{fill:k,opacity:.7,decal:_.decal}));var C=m.getModel("emphasis"),A=C.getModel("itemStyle").getItemStyle();x.eachChild(function(M){if(M instanceof Cs){var E=M.style;M.useStyle(Ne({image:E.image,x:E.x,y:E.y,width:E.width,height:E.height},_))}else M.useStyle(_),M.setColor(k),M.style.strokeNoScale=!0;var P=M.ensureState("emphasis");P.style=kt(A);var I=o.getStore().get(o.getDimensionIndex(M.__dimIdx),h);(I==null||isNaN(I))&&(I=""),Fs(M,ps(m),{labelFetcher:o.hostModel,labelDataIndex:h,labelDimIndex:M.__dimIdx,defaultText:I,inheritColor:k,defaultOpacity:_.opacity})}),kr(p,C.get("focus"),C.get("blurScope"),C.get("disabled"))}),this._data=o},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(On),PUe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Bb(ct(this.getData,this),ct(this.getRawData,this))},e.prototype.getInitialData=function(n,r){return Xg(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(n,r,s){var i=this.getData(),a=this.coordinateSystem,o=a.getIndicatorAxes(),l=this.getData().getName(n),d=l===""?this.name:l,c=Fne(this,n);return hs("section",{header:d,sortBlocks:!0,blocks:We(o,function(f){var p=i.get(i.mapDimension(f.dim),n);return hs("nameValue",{markerType:"subItem",markerColor:c,name:f.name,value:p,sortParam:p})})})},e.prototype.getTooltipPosition=function(n){if(n!=null){for(var r=this.getData(),s=this.coordinateSystem,i=r.getValues(We(s.dimensions,function(d){return r.mapDimension(d)}),n),a=0,o=i.length;a<o;a++)if(!isNaN(i[a])){var l=s.getIndicatorAxes();return s.coordToPoint(l[a].dataToCoord(i[a]),a)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(Jn),Uv=Pse.value;function k_(t,e){return _t({show:e},t)}var IUe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){var n=this.get("boundaryGap"),r=this.get("splitNumber"),s=this.get("scale"),i=this.get("axisLine"),a=this.get("axisTick"),o=this.get("axisLabel"),l=this.get("axisName"),d=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),f=this.get("axisNameGap"),p=this.get("triggerEvent"),h=We(this.get("indicator")||[],function(m){m.max!=null&&m.max>0&&!m.min?m.min=0:m.min!=null&&m.min<0&&!m.max&&(m.max=0);var g=l;m.color!=null&&(g=_t({color:m.color},l));var y=Ht(kt(m),{boundaryGap:n,splitNumber:r,scale:s,axisLine:i,axisTick:a,axisLabel:o,name:m.text,showName:d,nameLocation:"end",nameGap:f,nameTextStyle:g,triggerEvent:p},!1);if(ot(c)){var x=y.name;y.name=c.replace("{value}",x!=null?x:"")}else bt(c)&&(y.name=c(y.name,y));var _=new Tn(y,null,this.ecModel);return Gr(_,Ob.prototype),_.mainType="radar",_.componentIndex=this.componentIndex,_},this);this._indicatorModels=h},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Ht({lineStyle:{color:"#bbb"}},Uv.axisLine),axisLabel:k_(Uv.axisLabel,!1),axisTick:k_(Uv.axisTick,!1),splitLine:k_(Uv.splitLine,!0),splitArea:k_(Uv.splitArea,!0),indicator:[]},e}(nn),OUe=["axisLine","axisTickLabel","axisName"],LUe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){var i=this.group;i.removeAll(),this._buildAxes(n),this._buildSplitLineAndArea(n)},e.prototype._buildAxes=function(n){var r=n.coordinateSystem,s=r.getIndicatorAxes(),i=We(s,function(a){var o=a.model.get("showName")?a.name:"",l=new ki(a.model,{axisName:o,position:[r.cx,r.cy],rotation:a.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});de(i,function(a){de(OUe,a.add,a),this.group.add(a.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(n){var r=n.coordinateSystem,s=r.getIndicatorAxes();if(!s.length)return;var i=n.get("shape"),a=n.getModel("splitLine"),o=n.getModel("splitArea"),l=a.getModel("lineStyle"),d=o.getModel("areaStyle"),c=a.get("show"),f=o.get("show"),p=l.get("color"),h=d.get("color"),m=He(p)?p:[p],g=He(h)?h:[h],y=[],x=[];function _(N,q,V){var O=V%q.length;return N[O]=N[O]||[],O}if(i==="circle")for(var k=s[0].getTicksCoords(),w=r.cx,S=r.cy,C=0;C<k.length;C++){if(c){var A=_(y,m,C);y[A].push(new yd({shape:{cx:w,cy:S,r:k[C].coord}}))}if(f&&C<k.length-1){var A=_(x,g,C);x[A].push(new Tb({shape:{cx:w,cy:S,r0:k[C].coord,r:k[C+1].coord}}))}}else for(var M,E=We(s,function(N,q){var V=N.getTicksCoords();return M=M==null?V.length-1:Math.min(V.length-1,M),We(V,function(O){return r.coordToPoint(O.coord,q)})}),P=[],C=0;C<=M;C++){for(var I=[],F=0;F<s.length;F++)I.push(E[F][C]);if(I[0]&&I.push(I[0].slice()),c){var A=_(y,m,C);y[A].push(new Ii({shape:{points:I}}))}if(f&&P){var A=_(x,g,C-1);x[A].push(new Pi({shape:{points:I.concat(P)}}))}P=I.slice().reverse()}var L=l.getLineStyle(),z=d.getAreaStyle();de(x,function(N,q){this.group.add(qa(N,{style:_t({stroke:"none",fill:g[q%g.length]},z),silent:!0}))},this),de(y,function(N,q){this.group.add(qa(N,{style:_t({fill:"none",stroke:m[q%m.length]},L),silent:!0}))},this)},e.type="radar",e}(vr),VUe=function(t){Te(e,t);function e(n,r,s){var i=t.call(this,n,r,s)||this;return i.type="value",i.angle=0,i.name="",i}return e}(Ho),NUe=function(){function t(e,n,r){this.dimensions=[],this._model=e,this._indicatorAxes=We(e.getIndicatorModels(),function(s,i){var a="indicator_"+i,o=new VUe(a,new ud);return o.name=s.get("name"),o.model=s,s.axis=o,this.dimensions.push(a),o},this),this.resize(e,r)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(e,n){var r=this._indicatorAxes[n];return this.coordToPoint(r.dataToCoord(e),n)},t.prototype.coordToPoint=function(e,n){var r=this._indicatorAxes[n],s=r.angle,i=this.cx+e*Math.cos(s),a=this.cy-e*Math.sin(s);return[i,a]},t.prototype.pointToData=function(e){var n=e[0]-this.cx,r=e[1]-this.cy,s=Math.sqrt(n*n+r*r);n/=s,r/=s;for(var i=Math.atan2(-r,n),a=1/0,o,l=-1,d=0;d<this._indicatorAxes.length;d++){var c=this._indicatorAxes[d],f=Math.abs(i-c.angle);f<a&&(o=c,l=d,a=f)}return[l,+(o&&o.coordToData(s))]},t.prototype.resize=function(e,n){var r=e.get("center"),s=n.getWidth(),i=n.getHeight(),a=Math.min(s,i)/2;this.cx=tt(r[0],s),this.cy=tt(r[1],i),this.startAngle=e.get("startAngle")*Math.PI/180;var o=e.get("radius");(ot(o)||hn(o))&&(o=[0,o]),this.r0=tt(o[0],a),this.r=tt(o[1],a),de(this._indicatorAxes,function(l,d){l.setExtent(this.r0,this.r);var c=this.startAngle+d*Math.PI*2/this._indicatorAxes.length;c=Math.atan2(Math.sin(c),Math.cos(c)),l.angle=c},this)},t.prototype.update=function(e,n){var r=this._indicatorAxes,s=this._model;de(r,function(o){o.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(o,l){if(!(o.get("coordinateSystem")!=="radar"||e.getComponent("radar",o.get("radarIndex"))!==s)){var d=o.getData();de(r,function(c){c.scale.unionExtentFromData(d,d.mapDimension(c.dim))})}},this);var i=s.get("splitNumber"),a=new ud;a.setExtent(0,i),a.setInterval(1),de(r,function(o,l){Ise(o.scale,o.model,a)})},t.prototype.convertToPixel=function(e,n,r){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(e,n,r){return console.warn("Not implemented."),null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.create=function(e,n){var r=[];return e.eachComponent("radar",function(s){var i=new t(s,e,n);r.push(i),s.coordinateSystem=i}),e.eachSeriesByType("radar",function(s){s.get("coordinateSystem")==="radar"&&(s.coordinateSystem=r[s.get("radarIndex")||0])}),r},t.dimensions=[],t}();function jUe(t){t.registerCoordinateSystem("radar",NUe),t.registerComponentModel(IUe),t.registerComponentView(LUe),t.registerVisual({seriesType:"radar",reset:function(e){var n=e.getData();n.each(function(r){n.setItemVisual(r,"legendIcon","roundRect")}),n.setVisual("legendIcon","roundRect")}})}function FUe(t){Qt(jUe),t.registerChartView(RUe),t.registerSeriesModel(PUe),t.registerLayout(EUe),t.registerProcessor(Fb("radar")),t.registerPreprocessor(DUe)}var gB="\0_ec_interaction_mutex";function BUe(t,e,n){var r=Z6(t);r[e]=n}function zUe(t,e,n){var r=Z6(t),s=r[e];s===n&&(r[e]=null)}function vB(t,e){return!!Z6(t)[e]}function Z6(t){return t[gB]||(t[gB]={})}Jl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Vr);var zb=function(t){Te(e,t);function e(n){var r=t.call(this)||this;r._zr=n;var s=ct(r._mousedownHandler,r),i=ct(r._mousemoveHandler,r),a=ct(r._mouseupHandler,r),o=ct(r._mousewheelHandler,r),l=ct(r._pinchHandler,r);return r.enable=function(d,c){this.disable(),this._opt=_t(kt(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),d==null&&(d=!0),(d===!0||d==="move"||d==="pan")&&(n.on("mousedown",s),n.on("mousemove",i),n.on("mouseup",a)),(d===!0||d==="scale"||d==="zoom")&&(n.on("mousewheel",o),n.on("pinch",l))},r.disable=function(){n.off("mousedown",s),n.off("mousemove",i),n.off("mouseup",a),n.off("mousewheel",o),n.off("pinch",l)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(n){this.pointerChecker=n},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(n){if(!H7(n)){for(var r=n.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var s=n.offsetX,i=n.offsetY;this.pointerChecker&&this.pointerChecker(n,s,i)&&(this._x=s,this._y=i,this._dragging=!0)}},e.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!Fw("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||vB(this._zr,"globalPan"))){var r=n.offsetX,s=n.offsetY,i=this._x,a=this._y,o=r-i,l=s-a;this._x=r,this._y=s,this._opt.preventDefaultMouseMove&&sd(n.event),Bse(this,"pan","moveOnMouseMove",n,{dx:o,dy:l,oldX:i,oldY:a,newX:r,newY:s,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(n){H7(n)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(n){var r=Fw("zoomOnMouseWheel",n,this._opt),s=Fw("moveOnMouseWheel",n,this._opt),i=n.wheelDelta,a=Math.abs(i),o=n.offsetX,l=n.offsetY;if(!(i===0||!r&&!s)){if(r){var d=a>3?1.4:a>1?1.2:1.1,c=i>0?d:1/d;k3(this,"zoom","zoomOnMouseWheel",n,{scale:c,originX:o,originY:l,isAvailableBehavior:null})}if(s){var f=Math.abs(i),p=(i>0?1:-1)*(f>3?.4:f>1?.15:.05);k3(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:p,originX:o,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(n){if(!vB(this._zr,"globalPan")){var r=n.pinchScale>1?1.1:1/1.1;k3(this,"zoom",null,n,{scale:r,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},e}(co);function k3(t,e,n,r,s){t.pointerChecker&&t.pointerChecker(r,s.originX,s.originY)&&(sd(r.event),Bse(t,e,n,r,s))}function Bse(t,e,n,r,s){s.isAvailableBehavior=ct(Fw,null,n,r),t.trigger(e,s)}function Fw(t,e,n){var r=n[t];return!t||r&&(!ot(r)||e.event[r+"Key"])}function J6(t,e,n){var r=t.target;r.x+=e,r.y+=n,r.dirty()}function eI(t,e,n,r){var s=t.target,i=t.zoomLimit,a=t.zoom=t.zoom||1;if(a*=e,i){var o=i.min||0,l=i.max||1/0;a=Math.max(Math.min(l,a),o)}var d=a/t.zoom;t.zoom=a,s.x-=(n-s.x)*(d-1),s.y-=(r-s.y)*(d-1),s.scaleX*=d,s.scaleY*=d,s.dirty()}var UUe={axisPointer:1,tooltip:1,brush:1};function vA(t,e,n){var r=e.getComponentByElement(t.topTarget),s=r&&r.coordinateSystem;return r&&r!==n&&!UUe.hasOwnProperty(r.mainType)&&s&&s.model!==n}function zse(t){if(ot(t)){var e=new DOMParser;t=e.parseFromString(t,"text/xml")}var n=t;for(n.nodeType===9&&(n=n.firstChild);n.nodeName.toLowerCase()!=="svg"||n.nodeType!==1;)n=n.nextSibling;return n}var S3,Yk={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},yB=sn(Yk),Kk={"alignment-baseline":"textBaseline","stop-color":"stopColor"},bB=sn(Kk),HUe=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(e,n){n=n||{};var r=zse(e);this._defsUsePending=[];var s=new Tt;this._root=s;var i=[],a=r.getAttribute("viewBox")||"",o=parseFloat(r.getAttribute("width")||n.width),l=parseFloat(r.getAttribute("height")||n.height);isNaN(o)&&(o=null),isNaN(l)&&(l=null),ra(r,s,null,!0,!1);for(var d=r.firstChild;d;)this._parseNode(d,s,i,null,!1,!1),d=d.nextSibling;GUe(this._defs,this._defsUsePending),this._defsUsePending=[];var c,f;if(a){var p=yA(a);p.length>=4&&(c={x:parseFloat(p[0]||0),y:parseFloat(p[1]||0),width:parseFloat(p[2]),height:parseFloat(p[3])})}if(c&&o!=null&&l!=null&&(f=Hse(c,{x:0,y:0,width:o,height:l}),!n.ignoreViewBox)){var h=s;s=new Tt,s.add(h),h.scaleX=h.scaleY=f.scale,h.x=f.x,h.y=f.y}return!n.ignoreRootClip&&o!=null&&l!=null&&s.setClipPath(new on({shape:{x:0,y:0,width:o,height:l}})),{root:s,width:o,height:l,viewBoxRect:c,viewBoxTransform:f,named:i}},t.prototype._parseNode=function(e,n,r,s,i,a){var o=e.nodeName.toLowerCase(),l,d=s;if(o==="defs"&&(i=!0),o==="text"&&(a=!0),o==="defs"||o==="switch")l=n;else{if(!i){var c=S3[o];if(c&&pt(S3,o)){l=c.call(this,e,n);var f=e.getAttribute("name");if(f){var p={name:f,namedFrom:null,svgNodeTagLower:o,el:l};r.push(p),o==="g"&&(d=p)}else s&&r.push({name:s.name,namedFrom:s,svgNodeTagLower:o,el:l});n.add(l)}}var h=xB[o];if(h&&pt(xB,o)){var m=h.call(this,e),g=e.getAttribute("id");g&&(this._defs[g]=m)}}if(l&&l.isGroup)for(var y=e.firstChild;y;)y.nodeType===1?this._parseNode(y,l,r,d,i,a):y.nodeType===3&&a&&this._parseText(y,l),y=y.nextSibling},t.prototype._parseText=function(e,n){var r=new gg({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Ta(n,r),ra(e,r,this._defsUsePending,!1,!1),qUe(r,n);var s=r.style,i=s.fontSize;i&&i<9&&(s.fontSize=9,r.scaleX*=i/9,r.scaleY*=i/9);var a=(s.fontSize||s.fontFamily)&&[s.fontStyle,s.fontWeight,(s.fontSize||12)+"px",s.fontFamily||"sans-serif"].join(" ");s.font=a;var o=r.getBoundingRect();return this._textX+=o.width,n.add(r),r},t.internalField=function(){S3={g:function(e,n){var r=new Tt;return Ta(n,r),ra(e,r,this._defsUsePending,!1,!1),r},rect:function(e,n){var r=new on;return Ta(n,r),ra(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,n){var r=new yd;return Ta(n,r),ra(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,n){var r=new ls;return Ta(n,r),ra(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,n){var r=new XC;return Ta(n,r),ra(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,n){var r=e.getAttribute("points"),s;r&&(s=kB(r));var i=new Pi({shape:{points:s||[]},silent:!0});return Ta(n,i),ra(e,i,this._defsUsePending,!1,!1),i},polyline:function(e,n){var r=e.getAttribute("points"),s;r&&(s=kB(r));var i=new Ii({shape:{points:s||[]},silent:!0});return Ta(n,i),ra(e,i,this._defsUsePending,!1,!1),i},image:function(e,n){var r=new Cs;return Ta(n,r),ra(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,n){var r=e.getAttribute("x")||"0",s=e.getAttribute("y")||"0",i=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(i),this._textY=parseFloat(s)+parseFloat(a);var o=new Tt;return Ta(n,o),ra(e,o,this._defsUsePending,!1,!0),o},tspan:function(e,n){var r=e.getAttribute("x"),s=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),s!=null&&(this._textY=parseFloat(s));var i=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0",o=new Tt;return Ta(n,o),ra(e,o,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(a),o},path:function(e,n){var r=e.getAttribute("d")||"",s=Ite(r);return Ta(n,s),ra(e,s,this._defsUsePending,!1,!1),s.silent=!0,s}}}(),t}(),xB={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||"0",10),n=parseInt(t.getAttribute("y1")||"0",10),r=parseInt(t.getAttribute("x2")||"10",10),s=parseInt(t.getAttribute("y2")||"0",10),i=new Mb(e,n,r,s);return _B(t,i),wB(t,i),i},radialgradient:function(t){var e=parseInt(t.getAttribute("cx")||"0",10),n=parseInt(t.getAttribute("cy")||"0",10),r=parseInt(t.getAttribute("r")||"0",10),s=new Nte(e,n,r);return _B(t,s),wB(t,s),s}};function _B(t,e){var n=t.getAttribute("gradientUnits");n==="userSpaceOnUse"&&(e.global=!0)}function wB(t,e){for(var n=t.firstChild;n;){if(n.nodeType===1&&n.nodeName.toLocaleLowerCase()==="stop"){var r=n.getAttribute("offset"),s=void 0;r&&r.indexOf("%")>0?s=parseInt(r,10)/100:r?s=parseFloat(r):s=0;var i={};Use(n,i,i);var a=i.stopColor||n.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:s,color:a})}n=n.nextSibling}}function Ta(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),_t(e.__inheritedStyle,t.__inheritedStyle))}function kB(t){for(var e=yA(t),n=[],r=0;r<e.length;r+=2){var s=parseFloat(e[r]),i=parseFloat(e[r+1]);n.push([s,i])}return n}function ra(t,e,n,r,s){var i=e,a=i.__inheritedStyle=i.__inheritedStyle||{},o={};t.nodeType===1&&(XUe(t,e),Use(t,a,o),r||QUe(t,a,o)),i.style=i.style||{},a.fill!=null&&(i.style.fill=SB(i,"fill",a.fill,n)),a.stroke!=null&&(i.style.stroke=SB(i,"stroke",a.stroke,n)),de(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){a[l]!=null&&(i.style[l]=parseFloat(a[l]))}),de(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){a[l]!=null&&(i.style[l]=a[l])}),s&&(i.__selfStyle=o),a.lineDash&&(i.style.lineDash=We(yA(a.lineDash),function(l){return parseFloat(l)})),(a.visibility==="hidden"||a.visibility==="collapse")&&(i.invisible=!0),a.display==="none"&&(i.ignore=!0)}function qUe(t,e){var n=e.__selfStyle;if(n){var r=n.textBaseline,s=r;!r||r==="auto"||r==="baseline"?s="alphabetic":r==="before-edge"||r==="text-before-edge"?s="top":r==="after-edge"||r==="text-after-edge"?s="bottom":(r==="central"||r==="mathematical")&&(s="middle"),t.style.textBaseline=s}var i=e.__inheritedStyle;if(i){var a=i.textAlign,o=a;a&&(a==="middle"&&(o="center"),t.style.textAlign=o)}}var WUe=/^url\(\s*#(.*?)\)/;function SB(t,e,n,r){var s=n&&n.match(WUe);if(s){var i=Ao(s[1]);r.push([t,e,i]);return}return n==="none"&&(n=null),n}function GUe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r[0].style[r[1]]=t[r[2]]}}var YUe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function yA(t){return t.match(YUe)||[]}var KUe=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,C3=Math.PI/180;function XUe(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var r=[],s=null;n.replace(KUe,function(f,p,h){return r.push(p,h),""});for(var i=r.length-1;i>0;i-=2){var a=r[i],o=r[i-1],l=yA(a);switch(s=s||va(),o){case"translate":zl(s,s,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":XP(s,s,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":mh(s,s,-parseFloat(l[0])*C3,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var d=Math.tan(parseFloat(l[0])*C3);qu(s,[1,0,d,1,0,0],s);break;case"skewY":var c=Math.tan(parseFloat(l[0])*C3);qu(s,[1,c,0,1,0,0],s);break;case"matrix":s[0]=parseFloat(l[0]),s[1]=parseFloat(l[1]),s[2]=parseFloat(l[2]),s[3]=parseFloat(l[3]),s[4]=parseFloat(l[4]),s[5]=parseFloat(l[5]);break}}e.setLocalTransform(s)}}var CB=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Use(t,e,n){var r=t.getAttribute("style");if(r){CB.lastIndex=0;for(var s;(s=CB.exec(r))!=null;){var i=s[1],a=pt(Yk,i)?Yk[i]:null;a&&(e[a]=s[2]);var o=pt(Kk,i)?Kk[i]:null;o&&(n[o]=s[2])}}}function QUe(t,e,n){for(var r=0;r<yB.length;r++){var s=yB[r],i=t.getAttribute(s);i!=null&&(e[Yk[s]]=i)}for(var r=0;r<bB.length;r++){var s=bB[r],i=t.getAttribute(s);i!=null&&(n[Kk[s]]=i)}}function Hse(t,e){var n=e.width/t.width,r=e.height/t.height,s=Math.min(n,r);return{scale:s,x:-(t.x+t.width/2)*s+(e.x+e.width/2),y:-(t.y+t.height/2)*s+(e.y+e.height/2)}}function ZUe(t,e){var n=new HUe;return n.parse(t,e)}var JUe=mt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),eHe=function(){function t(e,n){this.type="geoSVG",this._usedGraphicMap=mt(),this._freedGraphics=[],this._mapName=e,this._parsedXML=zse(n)}return t.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var n=nHe(e.named),r=n.regions,s=n.regionsMap;this._regions=r,this._regionsMap=s}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(e){var n,r;try{n=e&&ZUe(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=n.root,Ei(r!=null)}catch(y){throw new Error(`Invalid svg format
`+y.message)}var s=new Tt;s.add(r),s.isGeoSVGGraphicRoot=!0;var i=n.width,a=n.height,o=n.viewBoxRect,l=this._boundingRect;if(!l){var d=void 0,c=void 0,f=void 0,p=void 0;if(i!=null?(d=0,f=i):o&&(d=o.x,f=o.width),a!=null?(c=0,p=a):o&&(c=o.y,p=o.height),d==null||c==null){var h=r.getBoundingRect();d==null&&(d=h.x,f=h.width),c==null&&(c=h.y,p=h.height)}l=this._boundingRect=new Gt(d,c,f,p)}if(o){var m=Hse(o,l);r.scaleX=r.scaleY=m.scale,r.x=m.x,r.y=m.y}s.setClipPath(new on({shape:l.plain()}));var g=[];return de(n.named,function(y){JUe.get(y.svgNodeTagLower)!=null&&(g.push(y),tHe(y.el))}),{root:s,boundingRect:l,named:g}},t.prototype.useGraphic=function(e){var n=this._usedGraphicMap,r=n.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),n.set(e,r),r)},t.prototype.freeGraphic=function(e){var n=this._usedGraphicMap,r=n.get(e);r&&(n.removeKey(e),this._freedGraphics.push(r))},t}();function tHe(t){t.silent=!1,t.isGroup&&t.traverse(function(e){e.silent=!1})}function nHe(t){var e=[],n=mt();return de(t,function(r){if(r.namedFrom==null){var s=new XFe(r.name,r.el);e.push(s),n.set(r.name,s)}}),{regions:e,regionsMap:n}}var EE=[126,25],AB="",Vf=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Ef=0;Ef<Vf.length;Ef++)for(var Qh=0;Qh<Vf[Ef].length;Qh++)Vf[Ef][Qh][0]/=10.5,Vf[Ef][Qh][1]/=-10.5/.75,Vf[Ef][Qh][0]+=EE[0],Vf[Ef][Qh][1]+=EE[1];function rHe(t,e){if(t==="china"){for(var n=0;n<e.length;n++)if(e[n].name===AB)return;e.push(new Fre(AB,We(Vf,function(r){return{type:"polygon",exterior:r}}),EE))}}var sHe={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function iHe(t,e){if(t==="china"){var n=sHe[e.name];if(n){var r=e.getCenter();r[0]+=n[0]/10.5,r[1]+=-n[1]/(10.5/.75),e.setCenter(r)}}}var aHe=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function oHe(t,e){t==="china"&&e.name===""&&e.geometries.push({type:"polygon",exterior:aHe[0]})}var lHe="name",uHe=function(){function t(e,n,r){this.type="geoJSON",this._parsedMap=mt(),this._mapName=e,this._specialAreas=r,this._geoJSON=cHe(n)}return t.prototype.load=function(e,n){n=n||lHe;var r=this._parsedMap.get(n);if(!r){var s=this._parseToRegions(n);r=this._parsedMap.set(n,{regions:s,boundingRect:dHe(s)})}var i=mt(),a=[];return de(r.regions,function(o){var l=o.name;e&&pt(e,l)&&(o=o.cloneShallow(l=e[l])),a.push(o),i.set(l,o)}),{regions:a,boundingRect:r.boundingRect||new Gt(0,0,0,0),regionsMap:i}},t.prototype._parseToRegions=function(e){var n=this._mapName,r=this._geoJSON,s;try{s=r?ZFe(r,e):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return rHe(n,s),de(s,function(i){var a=i.name;iHe(n,i),oHe(n,i);var o=this._specialAreas&&this._specialAreas[a];o&&i.transformTo(o.left,o.top,o.width,o.height)},this),s},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function dHe(t){for(var e,n=0;n<t.length;n++){var r=t[n].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function cHe(t){return ot(t)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var Hv=mt();const dd={registerMap:function(t,e,n){if(e.svg){var r=new eHe(t,e.svg);Hv.set(t,r)}else{var s=e.geoJson||e.geoJSON;s&&!e.features?n=e.specialAreas:s=e;var r=new uHe(t,s,n);Hv.set(t,r)}},getGeoResource:function(t){return Hv.get(t)},getMapForUser:function(t){var e=Hv.get(t);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(t,e,n){var r=Hv.get(t);if(r)return r.load(e,n)}};var tI=["rect","circle","line","ellipse","polygon","polyline","path"],fHe=mt(tI),pHe=mt(tI.concat(["g"])),hHe=mt(tI.concat(["g"])),qse=ln();function S_(t){var e=t.getItemStyle(),n=t.get("areaColor");return n!=null&&(e.fill=n),e}function TB(t){var e=t.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var Wse=function(){function t(e){var n=new Tt;this.uid=zg("ec_map_draw"),this._controller=new zb(e.getZr()),this._controllerHost={target:n},this.group=n,n.add(this._regionsGroup=new Tt),n.add(this._svgGroup=new Tt)}return t.prototype.draw=function(e,n,r,s,i){var a=e.mainType==="geo",o=e.getData&&e.getData();a&&n.eachComponent({mainType:"series",subType:"map"},function(x){!o&&x.getHostGeoModel()===e&&(o=x.getData())});var l=e.coordinateSystem,d=this._regionsGroup,c=this.group,f=l.getTransformInfo(),p=f.raw,h=f.roam,m=!d.childAt(0)||i;m?(c.x=h.x,c.y=h.y,c.scaleX=h.scaleX,c.scaleY=h.scaleY,c.dirty()):bn(c,h,e);var g=o&&o.getVisual("visualMeta")&&o.getVisual("visualMeta").length>0,y={api:r,geo:l,mapOrGeoModel:e,data:o,isVisualEncodedByVisualMap:g,isGeo:a,transformInfoRaw:p};l.resourceType==="geoJSON"?this._buildGeoJSON(y):l.resourceType==="geoSVG"&&this._buildSVG(y),this._updateController(e,n,r),this._updateMapSelectHandler(e,d,r,s)},t.prototype._buildGeoJSON=function(e){var n=this._regionsGroupByName=mt(),r=mt(),s=this._regionsGroup,i=e.transformInfoRaw,a=e.mapOrGeoModel,o=e.data,l=e.geo.projection,d=l&&l.stream;function c(h,m){return m&&(h=m(h)),h&&[h[0]*i.scaleX+i.x,h[1]*i.scaleY+i.y]}function f(h){for(var m=[],g=!d&&l&&l.project,y=0;y<h.length;++y){var x=c(h[y],g);x&&m.push(x)}return m}function p(h){return{shape:{points:f(h)}}}s.removeAll(),de(e.geo.regions,function(h){var m=h.name,g=n.get(m),y=r.get(m)||{},x=y.dataIdx,_=y.regionModel;if(!g){g=n.set(m,new Tt),s.add(g),x=o?o.indexOfName(m):null,_=e.isGeo?a.getRegionModel(m):o?o.getItemModel(x):null;var k=_.get("silent",!0);k!=null&&(g.silent=k),r.set(m,{dataIdx:x,regionModel:_})}var w=[],S=[];de(h.geometries,function(M){if(M.type==="polygon"){var E=[M.exterior].concat(M.interiors||[]);d&&(E=PB(E,d)),de(E,function(I){w.push(new Pi(p(I)))})}else{var P=M.points;d&&(P=PB(P,d,!0)),de(P,function(I){S.push(new Ii(p(I)))})}});var C=c(h.getCenter(),l&&l.project);function A(M,E){if(M.length){var P=new f6({culling:!0,segmentIgnoreThreshold:1,shape:{paths:M}});g.add(P),$B(e,P,x,_),MB(e,P,m,_,a,x,C),E&&(TB(P),de(P.states,TB))}}A(w),A(S,!0)}),n.each(function(h,m){var g=r.get(m),y=g.dataIdx,x=g.regionModel;EB(e,h,m,x,a,y),DB(e,h,m,x,a),RB(e,h,m,x,a)},this)},t.prototype._buildSVG=function(e){var n=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(n)&&(this._freeSVG(),this._useSVG(n));var s=this._svgDispatcherMap=mt(),i=!1;de(this._svgGraphicRecord.named,function(a){var o=a.name,l=e.mapOrGeoModel,d=e.data,c=a.svgNodeTagLower,f=a.el,p=d?d.indexOfName(o):null,h=l.getRegionModel(o);fHe.get(c)!=null&&f instanceof oo&&$B(e,f,p,h),f instanceof oo&&(f.culling=!0);var m=h.get("silent",!0);if(m!=null&&(f.silent=m),f.z2EmphasisLift=0,!a.namedFrom&&(hHe.get(c)!=null&&MB(e,f,o,h,l,p,null),EB(e,f,o,h,l,p),DB(e,f,o,h,l),pHe.get(c)!=null)){var g=RB(e,f,o,h,l);g==="self"&&(i=!0);var y=s.get(o)||s.set(o,[]);y.push(f)}},this),this._enableBlurEntireSVG(i,e)},t.prototype._enableBlurEntireSVG=function(e,n){if(e&&n.isGeo){var r=n.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),s=r.opacity;this._svgGraphicRecord.root.traverse(function(i){if(!i.isGroup){Jp(i);var a=i.ensureState("blur").style||{};a.opacity==null&&s!=null&&(a.opacity=s),i.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(e,n){if(e==null)return[];var r=n.coordinateSystem;if(r.resourceType==="geoJSON"){var s=this._regionsGroupByName;if(s){var i=s.get(e);return i?[i]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},t.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},t.prototype._useSVG=function(e){var n=dd.getGeoResource(e);if(n&&n.type==="geoSVG"){var r=n.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},t.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var n=dd.getGeoResource(e);n&&n.type==="geoSVG"&&n.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(e,n,r){var s=e.coordinateSystem,i=this._controller,a=this._controllerHost;a.zoomLimit=e.get("scaleLimit"),a.zoom=s.getZoom(),i.enable(e.get("roam")||!1);var o=e.mainType;function l(){var d={type:"geoRoam",componentType:o};return d[o+"Id"]=e.id,d}i.off("pan").on("pan",function(d){this._mouseDownFlag=!1,J6(a,d.dx,d.dy),r.dispatchAction(Ne(l(),{dx:d.dx,dy:d.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(d){this._mouseDownFlag=!1,eI(a,d.scale,d.originX,d.originY),r.dispatchAction(Ne(l(),{totalZoom:a.zoom,zoom:d.scale,originX:d.originX,originY:d.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(d,c,f){return s.containPoint([c,f])&&!vA(d,r,e)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var n=e.getTextContent();n&&(n.ignore=qse(n).ignore)})},t.prototype._updateMapSelectHandler=function(e,n,r,s){var i=this;n.off("mousedown"),n.off("click"),e.get("selectedMode")&&(n.on("mousedown",function(){i._mouseDownFlag=!0}),n.on("click",function(a){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},t}();function $B(t,e,n,r){var s=r.getModel("itemStyle"),i=r.getModel(["emphasis","itemStyle"]),a=r.getModel(["blur","itemStyle"]),o=r.getModel(["select","itemStyle"]),l=S_(s),d=S_(i),c=S_(o),f=S_(a),p=t.data;if(p){var h=p.getItemVisual(n,"style"),m=p.getItemVisual(n,"decal");t.isVisualEncodedByVisualMap&&h.fill&&(l.fill=h.fill),m&&(l.decal=bg(m,t.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=d,e.ensureState("select").style=c,e.ensureState("blur").style=f,Jp(e)}function MB(t,e,n,r,s,i,a){var o=t.data,l=t.isGeo,d=o&&isNaN(o.get(o.mapDimension("value"),i)),c=o&&o.getItemLayout(i);if(l||d||c&&c.showLabel){var f=l?n:i,p=void 0;(!o||i>=0)&&(p=s);var h=a?{normal:{align:"center",verticalAlign:"middle"}}:null;Fs(e,ps(r),{labelFetcher:p,labelDataIndex:f,defaultText:n},h);var m=e.getTextContent();if(m&&(qse(m).ignore=m.ignore,e.textConfig&&a)){var g=e.getBoundingRect().clone();e.textConfig.layoutRect=g,e.textConfig.position=[(a[0]-g.x)/g.width*100+"%",(a[1]-g.y)/g.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function EB(t,e,n,r,s,i){t.data?t.data.setItemGraphicEl(i,e):Et(e).eventData={componentType:"geo",componentIndex:s.componentIndex,geoIndex:s.componentIndex,name:n,region:r&&r.option||{}}}function DB(t,e,n,r,s){t.data||gh({el:e,componentModel:s,itemName:n,itemTooltipOption:r.get("tooltip")})}function RB(t,e,n,r,s){e.highDownSilentOnTouch=!!s.get("selectedMode");var i=r.getModel("emphasis"),a=i.get("focus");return kr(e,a,i.get("blurScope"),i.get("disabled")),t.isGeo&&pNe(e,s,n),a}function PB(t,e,n){var r=[],s;function i(){s=[]}function a(){s.length&&(r.push(s),s=[])}var o=e({polygonStart:i,polygonEnd:a,lineStart:i,lineEnd:a,point:function(l,d){isFinite(l)&&isFinite(d)&&s.push([l,d])},sphere:function(){}});return!n&&o.polygonStart(),de(t,function(l){o.lineStart();for(var d=0;d<l.length;d++)o.point(l[d][0],l[d][1]);o.lineEnd()}),!n&&o.polygonEnd(),r}var mHe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var a=this.group;if(a.removeAll(),!n.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===n.id){var o=this._mapDraw;o&&a.add(o.group)}else if(n.needsDrawMap){var o=this._mapDraw||new Wse(s);a.add(o.group),o.draw(n,r,s,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;n.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(n,r,s)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(n,r,s){var i=n.originalData,a=this.group;i.each(i.mapDimension("value"),function(o,l){if(!isNaN(o)){var d=i.getItemLayout(l);if(!(!d||!d.point)){var c=d.point,f=d.offset,p=new yd({style:{fill:n.getData().getVisual("style").fill},shape:{cx:c[0]+f*9,cy:c[1],r:3},silent:!0,z2:8+(f?0:jg+1)});if(!f){var h=n.mainSeries.getData(),m=i.getName(l),g=h.indexOfName(m),y=i.getItemModel(l),x=y.getModel("label"),_=h.getItemGraphicEl(g);Fs(p,ps(y),{labelFetcher:{getFormattedLabel:function(k,w){return n.getFormattedLabel(g,w)}},defaultText:m}),p.disableLabelAnimation=!0,x.get("position")||p.setTextConfig({position:"bottom"}),_.onHoverStateChange=function(k){Tk(p,k)}}a.add(p)}}})},e.type="map",e}(On),gHe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(r){if(r!=null){var s=this.getData().getName(r),i=this.coordinateSystem,a=i.getRegion(s);return a&&i.dataToPoint(a.getCenter())}},n}return e.prototype.getInitialData=function(n){for(var r=Xg(this,{coordDimensions:["value"],encodeDefaulter:Nt(w6,this)}),s=mt(),i=[],a=0,o=r.count();a<o;a++){var l=r.getName(a);s.set(l,a)}var d=dd.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return de(d.regions,function(c){var f=c.name,p=s.get(f),h=c.properties&&c.properties.echartsStyle,m;p==null?(m={name:f},i.push(m)):m=r.getRawDataItem(p),h&&Ht(m,h)}),r.appendData(i),r},e.prototype.getHostGeoModel=function(){var n=this.option.geoIndex;return n!=null?this.ecModel.getComponent("geo",n):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(n){var r=this.getData();return r.get(r.mapDimension("value"),n)},e.prototype.getRegionModel=function(n){var r=this.getData();return r.getItemModel(r.indexOfName(n))},e.prototype.formatTooltip=function(n,r,s){for(var i=this.getData(),a=this.getRawValue(n),o=i.getName(n),l=this.seriesGroup,d=[],c=0;c<l.length;c++){var f=l[c].originalData.indexOfName(o),p=i.mapDimension("value");isNaN(l[c].originalData.get(p,f))||d.push(l[c].name)}return hs("section",{header:d.join(", "),noHeader:!d.length,blocks:[hs("nameValue",{name:o,value:a})]})},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.getLegendIcon=function(n){var r=n.icon||"roundRect",s=Wr(r,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill);return s.setStyle(n.itemStyle),s.style.stroke="none",r.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),s},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(Jn);function vHe(t,e){var n={};return de(t,function(r){r.each(r.mapDimension("value"),function(s,i){var a="ec-"+r.getName(i);n[a]=n[a]||[],isNaN(s)||n[a].push(s)})}),t[0].map(t[0].mapDimension("value"),function(r,s){for(var i="ec-"+t[0].getName(s),a=0,o=1/0,l=-1/0,d=n[i].length,c=0;c<d;c++)o=Math.min(o,n[i][c]),l=Math.max(l,n[i][c]),a+=n[i][c];var f;return e==="min"?f=o:e==="max"?f=l:e==="average"?f=a/d:f=a,d===0?NaN:f})}function yHe(t){var e={};t.eachSeriesByType("map",function(n){var r=n.getHostGeoModel(),s=r?"o"+r.id:"i"+n.getMapType();(e[s]=e[s]||[]).push(n)}),de(e,function(n,r){for(var s=vHe(We(n,function(a){return a.getData()}),n[0].get("mapValueCalculation")),i=0;i<n.length;i++)n[i].originalData=n[i].getData();for(var i=0;i<n.length;i++)n[i].seriesGroup=n,n[i].needsDrawMap=i===0&&!n[i].getHostGeoModel(),n[i].setData(s.cloneShallow()),n[i].mainSeries=n[0]})}function bHe(t){var e={};t.eachSeriesByType("map",function(n){var r=n.getMapType();if(!(n.getHostGeoModel()||e[r])){var s={};de(n.seriesGroup,function(a){var o=a.coordinateSystem,l=a.originalData;a.get("showLegendSymbol")&&t.getComponent("legend")&&l.each(l.mapDimension("value"),function(d,c){var f=l.getName(c),p=o.getRegion(f);if(!(!p||isNaN(d))){var h=s[f]||0,m=o.dataToPoint(p.getCenter());s[f]=h+1,l.setItemLayout(c,{point:m,offset:h})}})});var i=n.getData();i.each(function(a){var o=i.getName(a),l=i.getItemLayout(a)||{};l.showLabel=!s[o],i.setItemLayout(a,l)}),e[r]=!0}})}var IB=Ls,Ub=function(t){Te(e,t);function e(n){var r=t.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new Nu,r._rawTransformable=new Nu,r.name=n,r}return e.prototype.setBoundingRect=function(n,r,s,i){return this._rect=new Gt(n,r,s,i),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(n,r,s,i){this._transformTo(n,r,s,i),this._viewRect=new Gt(n,r,s,i)},e.prototype._transformTo=function(n,r,s,i){var a=this.getBoundingRect(),o=this._rawTransformable;o.transform=a.calculateTransform(new Gt(n,r,s,i));var l=o.parent;o.parent=null,o.decomposeTransform(),o.parent=l,this._updateTransform()},e.prototype.setCenter=function(n,r){n&&(this._center=[tt(n[0],r.getWidth()),tt(n[1],r.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(n){n=n||1;var r=this.zoomLimit;r&&(r.max!=null&&(n=Math.min(r.max,n)),r.min!=null&&(n=Math.max(r.min,n))),this._zoom=n,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var n=this.getBoundingRect(),r=n.x+n.width/2,s=n.y+n.height/2;return[r,s]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var n=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,s=this.getDefaultCenter(),i=this.getCenter(),a=this.getZoom();i=Ls([],i,n),s=Ls([],s,n),r.originX=i[0],r.originY=i[1],r.x=s[0]-i[0],r.y=s[1]-i[1],r.scaleX=r.scaleY=a,this._updateTransform()},e.prototype._updateTransform=function(){var n=this._roamTransformable,r=this._rawTransformable;r.parent=n,n.updateTransform(),r.updateTransform(),KP(this.transform||(this.transform=[]),r.transform||va()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],Vg(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var n=this._rawTransformable,r=this._roamTransformable,s=new Nu;return s.transform=r.transform,s.decomposeTransform(),{roam:{x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY},raw:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var n=this.getBoundingRect().clone();return n.applyTransform(this.transform),n},e.prototype.dataToPoint=function(n,r,s){var i=r?this._rawTransform:this.transform;return s=s||[],i?IB(s,n,i):hi(s,n)},e.prototype.pointToData=function(n){var r=this.invTransform;return r?IB([],n,r):[n[0],n[1]]},e.prototype.convertToPixel=function(n,r,s){var i=OB(r);return i===this?i.dataToPoint(s):null},e.prototype.convertFromPixel=function(n,r,s){var i=OB(r);return i===this?i.pointToData(s):null},e.prototype.containPoint=function(n){return this.getViewRectAfterRoam().contain(n[0],n[1])},e.dimensions=["x","y"],e}(Nu);function OB(t){var e=t.seriesModel;return e?e.coordinateSystem:null}var xHe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Gse=["lng","lat"],DE=function(t){Te(e,t);function e(n,r,s){var i=t.call(this,n)||this;i.dimensions=Gse,i.type="geo",i._nameCoordMap=mt(),i.map=r;var a=s.projection,o=dd.load(r,s.nameMap,s.nameProperty),l=dd.getGeoResource(r);i.resourceType=l?l.type:null;var d=i.regions=o.regions,c=xHe[l.type];i._regionsMap=o.regionsMap,i.regions=o.regions,i.projection=a;var f;if(a)for(var p=0;p<d.length;p++){var h=d[p].getBoundingRect(a);f=f||h.clone(),f.union(h)}else f=o.boundingRect;return i.setBoundingRect(f.x,f.y,f.width,f.height),i.aspectScale=a?1:Ot(s.aspectScale,c.aspectScale),i._invertLongitute=a?!1:c.invertLongitute,i}return e.prototype._transformTo=function(n,r,s,i){var a=this.getBoundingRect(),o=this._invertLongitute;a=a.clone(),o&&(a.y=-a.y-a.height);var l=this._rawTransformable;l.transform=a.calculateTransform(new Gt(n,r,s,i));var d=l.parent;l.parent=null,l.decomposeTransform(),l.parent=d,o&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(n){return this._regionsMap.get(n)},e.prototype.getRegionByCoord=function(n){for(var r=this.regions,s=0;s<r.length;s++){var i=r[s];if(i.type==="geoJSON"&&i.contain(n))return r[s]}},e.prototype.addGeoCoord=function(n,r){this._nameCoordMap.set(n,r)},e.prototype.getGeoCoord=function(n){var r=this._regionsMap.get(n);return this._nameCoordMap.get(n)||r&&r.getCenter()},e.prototype.dataToPoint=function(n,r,s){if(ot(n)&&(n=this.getGeoCoord(n)),n){var i=this.projection;return i&&(n=i.project(n)),n&&this.projectedToPoint(n,r,s)}},e.prototype.pointToData=function(n){var r=this.projection;return r&&(n=r.unproject(n)),n&&this.pointToProjected(n)},e.prototype.pointToProjected=function(n){return t.prototype.pointToData.call(this,n)},e.prototype.projectedToPoint=function(n,r,s){return t.prototype.dataToPoint.call(this,n,r,s)},e.prototype.convertToPixel=function(n,r,s){var i=LB(r);return i===this?i.dataToPoint(s):null},e.prototype.convertFromPixel=function(n,r,s){var i=LB(r);return i===this?i.pointToData(s):null},e}(Ub);Gr(DE,Ub);function LB(t){var e=t.geoModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",Br).models[0]||{}).coordinateSystem:null}function VB(t,e){var n=t.get("boundingCoords");if(n!=null){var r=n[0],s=n[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])){var i=this.projection;if(i){var a=r[0],o=r[1],l=s[0],d=s[1];r=[1/0,1/0],s=[-1/0,-1/0];var c=function(C,A,M,E){for(var P=M-C,I=E-A,F=0;F<=100;F++){var L=F/100,z=i.project([C+P*L,A+I*L]);ic(r,r,z),ac(s,s,z)}};c(a,o,l,o),c(l,o,l,d),c(l,d,a,d),c(a,d,l,o)}this.setBoundingRect(r[0],r[1],s[0]-r[0],s[1]-r[1])}}var f=this.getBoundingRect(),p=t.get("layoutCenter"),h=t.get("layoutSize"),m=e.getWidth(),g=e.getHeight(),y=f.width/f.height*this.aspectScale,x=!1,_,k;p&&h&&(_=[tt(p[0],m),tt(p[1],g)],k=tt(h,Math.min(m,g)),!isNaN(_[0])&&!isNaN(_[1])&&!isNaN(k)&&(x=!0));var w;if(x)w={},y>1?(w.width=k,w.height=k/y):(w.height=k,w.width=k*y),w.y=_[1]-w.height/2,w.x=_[0]-w.width/2;else{var S=t.getBoxLayoutParams();S.aspect=y,w=ts(S,{width:m,height:g})}this.setViewRect(w.x,w.y,w.width,w.height),this.setCenter(t.get("center"),e),this.setZoom(t.get("zoom"))}function _He(t,e){de(e.get("geoCoord"),function(n,r){t.addGeoCoord(r,n)})}var wHe=function(){function t(){this.dimensions=Gse}return t.prototype.create=function(e,n){var r=[];function s(a){return{nameProperty:a.get("nameProperty"),aspectScale:a.get("aspectScale"),projection:a.get("projection")}}e.eachComponent("geo",function(a,o){var l=a.get("map"),d=new DE(l+o,l,Ne({nameMap:a.get("nameMap")},s(a)));d.zoomLimit=a.get("scaleLimit"),r.push(d),a.coordinateSystem=d,d.model=a,d.resize=VB,d.resize(a,n)}),e.eachSeries(function(a){var o=a.get("coordinateSystem");if(o==="geo"){var l=a.get("geoIndex")||0;a.coordinateSystem=r[l]}});var i={};return e.eachSeriesByType("map",function(a){if(!a.getHostGeoModel()){var o=a.getMapType();i[o]=i[o]||[],i[o].push(a)}}),de(i,function(a,o){var l=We(a,function(c){return c.get("nameMap")}),d=new DE(o,o,Ne({nameMap:qP(l)},s(a[0])));d.zoomLimit=xs.apply(null,We(a,function(c){return c.get("scaleLimit")})),r.push(d),d.resize=VB,d.resize(a[0],n),de(a,function(c){c.coordinateSystem=d,_He(d,c)})}),r},t.prototype.getFilledRegions=function(e,n,r,s){for(var i=(e||[]).slice(),a=mt(),o=0;o<i.length;o++)a.set(i[o].name,i[o]);var l=dd.load(n,r,s);return de(l.regions,function(d){var c=d.name,f=a.get(c),p=d.properties&&d.properties.echartsStyle;f||(f={name:c},i.push(f)),p&&Ht(f,p)}),i},t}(),Yse=new wHe,kHe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r,s){var i=dd.getGeoResource(n.map);if(i&&i.type==="geoJSON"){var a=n.itemStyle=n.itemStyle||{};"color"in a||(a.color="#eee")}this.mergeDefaultAndTheme(n,s),Xp(n,"label",["show"])},e.prototype.optionUpdated=function(){var n=this,r=this.option;r.regions=Yse.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var s={};this._optionModelMap=Bl(r.regions||[],function(i,a){var o=a.name;return o&&(i.set(o,new Tn(a,n,n.ecModel)),a.selected&&(s[o]=!0)),i},mt()),r.selectedMap||(r.selectedMap=s)},e.prototype.getRegionModel=function(n){return this._optionModelMap.get(n)||new Tn(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(n,r){var s=this.getRegionModel(n),i=r==="normal"?s.get(["label","formatter"]):s.get(["emphasis","label","formatter"]),a={name:n};if(bt(i))return a.status=r,i(a);if(ot(i))return i.replace("{a}",n!=null?n:"")},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.select=function(n){var r=this.option,s=r.selectedMode;if(s){s!=="multiple"&&(r.selectedMap=null);var i=r.selectedMap||(r.selectedMap={});i[n]=!0}},e.prototype.unSelect=function(n){var r=this.option.selectedMap;r&&(r[n]=!1)},e.prototype.toggleSelected=function(n){this[this.isSelected(n)?"unSelect":"select"](n)},e.prototype.isSelected=function(n){var r=this.option.selectedMap;return!!(r&&r[n])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(nn);function NB(t,e){return t.pointToProjected?t.pointToProjected(e):t.pointToData(e)}function nI(t,e,n,r){var s=t.getZoom(),i=t.getCenter(),a=e.zoom,o=t.projectedToPoint?t.projectedToPoint(i):t.dataToPoint(i);if(e.dx!=null&&e.dy!=null&&(o[0]-=e.dx,o[1]-=e.dy,t.setCenter(NB(t,o),r)),a!=null){if(n){var l=n.min||0,d=n.max||1/0;a=Math.max(Math.min(s*a,d),l)/s}t.scaleX*=a,t.scaleY*=a;var c=(e.originX-t.x)*(a-1),f=(e.originY-t.y)*(a-1);t.x-=c,t.y-=f,t.updateTransform(),t.setCenter(NB(t,o),r),t.setZoom(a*s)}return{center:t.getCenter(),zoom:t.getZoom()}}var SHe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.focusBlurEnabled=!0,n}return e.prototype.init=function(n,r){this._api=r},e.prototype.render=function(n,r,s,i){if(this._model=n,!n.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new Wse(s));var a=this._mapDraw;a.draw(n,r,s,this,i),a.group.on("click",this._handleRegionClick,this),a.group.silent=n.get("silent"),this.group.add(a.group),this.updateSelectStatus(n,r,s)},e.prototype._handleRegionClick=function(n){var r;up(n.target,function(s){return(r=Et(s).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(n,r,s){var i=this;this._mapDraw.group.traverse(function(a){var o=Et(a).eventData;if(o)return i._model.isSelected(o.name)?s.enterSelect(a):s.leaveSelect(a),!0})},e.prototype.findHighDownDispatchers=function(n){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(n,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(vr);function CHe(t,e,n){dd.registerMap(t,e,n)}function Kse(t){t.registerCoordinateSystem("geo",Yse),t.registerComponentModel(kHe),t.registerComponentView(SHe),t.registerImpl("registerMap",CHe),t.registerImpl("getMap",function(n){return dd.getMapForUser(n)});function e(n,r){r.update="geo:updateSelectStatus",t.registerAction(r,function(s,i){var a={},o=[];return i.eachComponent({mainType:"geo",query:s},function(l){l[n](s.name);var d=l.coordinateSystem;de(d.regions,function(f){a[f.name]=l.isSelected(f.name)||!1});var c=[];de(a,function(f,p){a[p]&&c.push(p)}),o.push({geoIndex:l.componentIndex,name:c})}),{selected:a,allSelected:o,name:s.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(n,r,s){var i=n.componentType||"series";r.eachComponent({mainType:i,query:n},function(a){var o=a.coordinateSystem;if(o.type==="geo"){var l=nI(o,n,a.get("scaleLimit"),s);a.setCenter&&a.setCenter(l.center),a.setZoom&&a.setZoom(l.zoom),i==="series"&&de(a.seriesGroup,function(d){d.setCenter(l.center),d.setZoom(l.zoom)})}})})}function AHe(t){Qt(Kse),t.registerChartView(mHe),t.registerSeriesModel(gHe),t.registerLayout(bHe),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,yHe),Zne("map",t.registerAction)}function THe(t){var e=t;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n=[e],r,s;r=n.pop();)if(s=r.children,r.isExpand&&s.length)for(var i=s.length,a=i-1;a>=0;a--){var o=s[a];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},n.push(o)}}function $He(t,e){var n=t.isExpand?t.children:[],r=t.parentNode.children,s=t.hierNode.i?r[t.hierNode.i-1]:null;if(n.length){DHe(t);var i=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;s?(t.hierNode.prelim=s.hierNode.prelim+e(t,s),t.hierNode.modifier=t.hierNode.prelim-i):t.hierNode.prelim=i}else s&&(t.hierNode.prelim=s.hierNode.prelim+e(t,s));t.parentNode.hierNode.defaultAncestor=RHe(t,s,t.parentNode.hierNode.defaultAncestor||r[0],e)}function MHe(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function jB(t){return arguments.length?t:OHe}function _y(t,e){return t-=Math.PI/2,{x:e*Math.cos(t),y:e*Math.sin(t)}}function EHe(t,e){return ts(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function DHe(t){for(var e=t.children,n=e.length,r=0,s=0;--n>=0;){var i=e[n];i.hierNode.prelim+=r,i.hierNode.modifier+=r,s+=i.hierNode.change,r+=i.hierNode.shift+s}}function RHe(t,e,n,r){if(e){for(var s=t,i=t,a=i.parentNode.children[0],o=e,l=s.hierNode.modifier,d=i.hierNode.modifier,c=a.hierNode.modifier,f=o.hierNode.modifier;o=A3(o),i=T3(i),o&&i;){s=A3(s),a=T3(a),s.hierNode.ancestor=t;var p=o.hierNode.prelim+f-i.hierNode.prelim-d+r(o,i);p>0&&(IHe(PHe(o,t,n),t,p),d+=p,l+=p),f+=o.hierNode.modifier,d+=i.hierNode.modifier,l+=s.hierNode.modifier,c+=a.hierNode.modifier}o&&!A3(s)&&(s.hierNode.thread=o,s.hierNode.modifier+=f-l),i&&!T3(a)&&(a.hierNode.thread=i,a.hierNode.modifier+=d-c,n=t)}return n}function A3(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function T3(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function PHe(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function IHe(t,e,n){var r=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=r}function OHe(t,e){return t.parentNode===e.parentNode?1:2}var LHe=function(){function t(){this.parentPoint=[],this.childPoints=[]}return t}(),VHe=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new LHe},e.prototype.buildPath=function(n,r){var s=r.childPoints,i=s.length,a=r.parentPoint,o=s[0],l=s[i-1];if(i===1){n.moveTo(a[0],a[1]),n.lineTo(o[0],o[1]);return}var d=r.orient,c=d==="TB"||d==="BT"?0:1,f=1-c,p=tt(r.forkPosition,1),h=[];h[c]=a[c],h[f]=a[f]+(l[f]-a[f])*p,n.moveTo(a[0],a[1]),n.lineTo(h[0],h[1]),n.moveTo(o[0],o[1]),h[c]=o[c],n.lineTo(h[0],h[1]),h[c]=l[c],n.lineTo(h[0],h[1]),n.lineTo(l[0],l[1]);for(var m=1;m<i-1;m++){var g=s[m];n.moveTo(g[0],g[1]),h[c]=g[c],n.lineTo(h[0],h[1])}},e}(en),NHe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new Tt,n}return e.prototype.init=function(n,r){this._controller=new zb(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(n,r,s){var i=n.getData(),a=n.layoutInfo,o=this._mainGroup,l=n.get("layout");l==="radial"?(o.x=a.x+a.width/2,o.y=a.y+a.height/2):(o.x=a.x,o.y=a.y),this._updateViewCoordSys(n,s),this._updateController(n,r,s);var d=this._data;i.diff(d).add(function(c){FB(i,c)&&BB(i,c,null,o,n)}).update(function(c,f){var p=d.getItemGraphicEl(f);if(!FB(i,c)){p&&UB(d,f,p,o,n);return}BB(i,c,p,o,n)}).remove(function(c){var f=d.getItemGraphicEl(c);f&&UB(d,c,f,o,n)}).execute(),this._nodeScaleRatio=n.get("nodeScaleRatio"),this._updateNodeAndLinkScale(n),n.get("expandAndCollapse")===!0&&i.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){s.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:f})})}),this._data=i},e.prototype._updateViewCoordSys=function(n,r){var s=n.getData(),i=[];s.each(function(f){var p=s.getItemLayout(f);p&&!isNaN(p.x)&&!isNaN(p.y)&&i.push([+p.x,+p.y])});var a=[],o=[];GC(i,a,o);var l=this._min,d=this._max;o[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,o[0]=d?d[0]:o[0]+1),o[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,o[1]=d?d[1]:o[1]+1);var c=n.coordinateSystem=new Ub;c.zoomLimit=n.get("scaleLimit"),c.setBoundingRect(a[0],a[1],o[0]-a[0],o[1]-a[1]),c.setCenter(n.get("center"),r),c.setZoom(n.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=a,this._max=o},e.prototype._updateController=function(n,r,s){var i=this,a=this._controller,o=this._controllerHost,l=this.group;a.setPointerChecker(function(d,c,f){var p=l.getBoundingRect();return p.applyTransform(l.transform),p.contain(c,f)&&!vA(d,s,n)}),a.enable(n.get("roam")),o.zoomLimit=n.get("scaleLimit"),o.zoom=n.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(d){J6(o,d.dx,d.dy),s.dispatchAction({seriesId:n.id,type:"treeRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){eI(o,d.scale,d.originX,d.originY),s.dispatchAction({seriesId:n.id,type:"treeRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),i._updateNodeAndLinkScale(n),s.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(n){var r=n.getData(),s=this._getNodeGlobalScale(n);r.eachItemGraphicEl(function(i,a){i.setSymbolScale(s)})},e.prototype._getNodeGlobalScale=function(n){var r=n.coordinateSystem;if(r.type!=="view")return 1;var s=this._nodeScaleRatio,i=r.scaleX||1,a=r.getZoom(),o=(a-1)*s+1;return o/i},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(On);function FB(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)}function BB(t,e,n,r,s){var i=!n,a=t.tree.getNodeByDataIndex(e),o=a.getModel(),l=a.getVisual("style").fill,d=a.isExpand===!1&&a.children.length!==0?l:"#fff",c=t.tree.root,f=a.parentNode===c?a:a.parentNode||a,p=t.getItemGraphicEl(f.dataIndex),h=f.getLayout(),m=p?{x:p.__oldX,y:p.__oldY,rawX:p.__radialOldRawX,rawY:p.__radialOldRawY}:h,g=a.getLayout();i?(n=new Lb(t,e,null,{symbolInnerColor:d,useNameLabel:!0}),n.x=m.x,n.y=m.y):n.updateData(t,e,null,{symbolInnerColor:d,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,r.add(n),t.setItemGraphicEl(e,n),n.__oldX=n.x,n.__oldY=n.y,bn(n,{x:g.x,y:g.y},s);var y=n.getSymbolPath();if(s.get("layout")==="radial"){var x=c.children[0],_=x.getLayout(),k=x.children.length,w=void 0,S=void 0;if(g.x===_.x&&a.isExpand===!0&&x.children.length){var C={x:(x.children[0].getLayout().x+x.children[k-1].getLayout().x)/2,y:(x.children[0].getLayout().y+x.children[k-1].getLayout().y)/2};w=Math.atan2(C.y-_.y,C.x-_.x),w<0&&(w=Math.PI*2+w),S=C.x<_.x,S&&(w=w-Math.PI)}else w=Math.atan2(g.y-_.y,g.x-_.x),w<0&&(w=Math.PI*2+w),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(S=g.x<_.x,S&&(w=w-Math.PI)):(S=g.x>_.x,S||(w=w-Math.PI));var A=S?"left":"right",M=o.getModel("label"),E=M.get("rotate"),P=E*(Math.PI/180),I=y.getTextContent();I&&(y.setTextConfig({position:M.get("position")||A,rotation:E==null?-w:P,origin:"center"}),I.setStyle("verticalAlign","middle"))}var F=o.get(["emphasis","focus"]),L=F==="relative"?p1(a.getAncestorsIndices(),a.getDescendantIndices()):F==="ancestor"?a.getAncestorsIndices():F==="descendant"?a.getDescendantIndices():null;L&&(Et(n).focus=L),jHe(s,a,c,n,m,h,g,r),n.__edge&&(n.onHoverStateChange=function(z){if(z!=="blur"){var N=a.parentNode&&t.getItemGraphicEl(a.parentNode.dataIndex);N&&N.hoverState===Ab||Tk(n.__edge,z)}})}function jHe(t,e,n,r,s,i,a,o){var l=e.getModel(),d=t.get("edgeShape"),c=t.get("layout"),f=t.getOrient(),p=t.get(["lineStyle","curveness"]),h=t.get("edgeForkPosition"),m=l.getModel("lineStyle").getLineStyle(),g=r.__edge;if(d==="curve")e.parentNode&&e.parentNode!==n&&(g||(g=r.__edge=new $b({shape:RE(c,f,p,s,s)})),bn(g,{shape:RE(c,f,p,i,a)},t));else if(d==="polyline"&&c==="orthogonal"&&e!==n&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var y=e.children,x=[],_=0;_<y.length;_++){var k=y[_].getLayout();x.push([k.x,k.y])}g||(g=r.__edge=new VHe({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:h}})),bn(g,{shape:{parentPoint:[a.x,a.y],childPoints:x}},t)}g&&!(d==="polyline"&&!e.isExpand)&&(g.useStyle(_t({strokeNoScale:!0,fill:null},m)),js(g,l,"lineStyle"),Jp(g),o.add(g))}function zB(t,e,n,r,s){var i=e.tree.root,a=Xse(i,t),o=a.source,l=a.sourceLayout,d=e.getItemGraphicEl(t.dataIndex);if(d){var c=e.getItemGraphicEl(o.dataIndex),f=c.__edge,p=d.__edge||(o.isExpand===!1||o.children.length===1?f:void 0),h=r.get("edgeShape"),m=r.get("layout"),g=r.get("orient"),y=r.get(["lineStyle","curveness"]);p&&(h==="curve"?Vc(p,{shape:RE(m,g,y,l,l),style:{opacity:0}},r,{cb:function(){n.remove(p)},removeOpt:s}):h==="polyline"&&r.get("layout")==="orthogonal"&&Vc(p,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){n.remove(p)},removeOpt:s}))}}function Xse(t,e){for(var n=e.parentNode===t?e:e.parentNode||e,r;r=n.getLayout(),r==null;)n=n.parentNode===t?n:n.parentNode||n;return{source:n,sourceLayout:r}}function UB(t,e,n,r,s){var i=t.tree.getNodeByDataIndex(e),a=t.tree.root,o=Xse(a,i).sourceLayout,l={duration:s.get("animationDurationUpdate"),easing:s.get("animationEasingUpdate")};Vc(n,{x:o.x+1,y:o.y+1},s,{cb:function(){r.remove(n),t.setItemGraphicEl(e,null)},removeOpt:l}),n.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:l}),i.children.forEach(function(d){zB(d,t,r,s,l)}),zB(i,t,r,s,l)}function RE(t,e,n,r,s){var i,a,o,l,d,c,f,p;if(t==="radial"){d=r.rawX,f=r.rawY,c=s.rawX,p=s.rawY;var h=_y(d,f),m=_y(d,f+(p-f)*n),g=_y(c,p+(f-p)*n),y=_y(c,p);return{x1:h.x||0,y1:h.y||0,x2:y.x||0,y2:y.y||0,cpx1:m.x||0,cpy1:m.y||0,cpx2:g.x||0,cpy2:g.y||0}}else d=r.x,f=r.y,c=s.x,p=s.y,(e==="LR"||e==="RL")&&(i=d+(c-d)*n,a=f,o=c+(d-c)*n,l=p),(e==="TB"||e==="BT")&&(i=d,a=f+(p-f)*n,o=c,l=p+(f-p)*n);return{x1:d,y1:f,x2:c,y2:p,cpx1:i,cpy1:a,cpx2:o,cpy2:l}}var to=ln();function Qse(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,Zse(e,n,t),de(n,function(r){de(e.TRANSFERABLE_METHODS,function(s){r.wrapMethod(s,Nt(FHe,t))})}),e.wrapMethod("cloneShallow",Nt(zHe,t)),de(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,Nt(BHe,t))}),Ei(n[e.dataType]===e)}function FHe(t,e){if(qHe(this)){var n=Ne({},to(this).datas);n[this.dataType]=e,Zse(e,n,t)}else rI(e,this.dataType,to(this).mainData,t);return e}function BHe(t,e){return t.struct&&t.struct.update(),e}function zHe(t,e){return de(to(e).datas,function(n,r){n!==e&&rI(n.cloneShallow(),r,e,t)}),e}function UHe(t){var e=to(this).mainData;return t==null||e==null?e:to(e).datas[t]}function HHe(){var t=to(this).mainData;return t==null?[{data:t}]:We(sn(to(t).datas),function(e){return{type:e,data:to(t).datas[e]}})}function qHe(t){return to(t).mainData===t}function Zse(t,e,n){to(t).datas={},de(e,function(r,s){rI(r,s,t,n)})}function rI(t,e,n,r){to(n).datas[e]=t,to(t).mainData=n,t.dataType=e,r.struct&&(t[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=t),t.getLinkedData=UHe,t.getLinkedDataAll=HHe}var WHe=function(){function t(e,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=n}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(e,n,r){bt(e)&&(r=n,n=e,e=null),e=e||{},ot(e)&&(e={order:e});var s=e.order||"preorder",i=this[e.attr||"children"],a;s==="preorder"&&(a=n.call(r,this));for(var o=0;!a&&o<i.length;o++)i[o].eachNode(e,n,r);s==="postorder"&&n.call(r,this)},t.prototype.updateDepthAndHeight=function(e){var n=0;this.depth=e;for(var r=0;r<this.children.length;r++){var s=this.children[r];s.updateDepthAndHeight(e+1),s.height>n&&(n=s.height)}this.height=n+1},t.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var n=0,r=this.children,s=r.length;n<s;n++){var i=r[n].getNodeById(e);if(i)return i}},t.prototype.contains=function(e){if(e===this)return!0;for(var n=0,r=this.children,s=r.length;n<s;n++){var i=r[n].contains(e);if(i)return i}},t.prototype.getAncestors=function(e){for(var n=[],r=e?this:this.parentNode;r;)n.push(r),r=r.parentNode;return n.reverse(),n},t.prototype.getAncestorsIndices=function(){for(var e=[],n=this;n;)e.push(n.dataIndex),n=n.parentNode;return e.reverse(),e},t.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(n){e.push(n.dataIndex)}),e},t.prototype.getValue=function(e){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(e||"value"),this.dataIndex)},t.prototype.setLayout=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,n)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostTree,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,n)},t.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,n=0;n<e.length;++n)if(e[n]===this)return n;return-1}return-1},t.prototype.isAncestorOf=function(e){for(var n=e.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},t.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},t}(),sI=function(){function t(e){this.type="tree",this._nodes=[],this.hostModel=e}return t.prototype.eachNode=function(e,n,r){this.root.eachNode(e,n,r)},t.prototype.getNodeByDataIndex=function(e){var n=this.data.getRawIndex(e);return this._nodes[n]},t.prototype.getNodeById=function(e){return this.root.getNodeById(e)},t.prototype.update=function(){for(var e=this.data,n=this._nodes,r=0,s=n.length;r<s;r++)n[r].dataIndex=-1;for(var r=0,s=e.count();r<s;r++)n[e.getRawIndex(r)].dataIndex=r},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,r){var s=new t(n),i=[],a=1;o(e);function o(c,f){var p=c.value;a=Math.max(a,He(p)?p.length:1),i.push(c);var h=new WHe(Qr(c.name,""),s);f?GHe(h,f):s.root=h,s._nodes.push(h);var m=c.children;if(m)for(var g=0;g<m.length;g++)o(m[g],h)}s.root.updateDepthAndHeight(0);var l=Ib(i,{coordDimensions:["value"],dimensionsCount:a}).dimensions,d=new wi(l,n);return d.initData(i),r&&r(d),Qse({mainData:d,struct:s,structAttr:"tree"}),s.update(),s},t}();function GHe(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}function P1(t,e,n){if(t&&Xt(e,t.type)>=0){var r=n.getData().tree.root,s=t.targetNode;if(ot(s)&&(s=r.getNodeById(s)),s&&r.contains(s))return{node:s};var i=t.targetNodeId;if(i!=null&&(s=r.getNodeById(i)))return{node:s}}}function Jse(t){for(var e=[];t;)t=t.parentNode,t&&e.push(t);return e.reverse()}function iI(t,e){var n=Jse(t);return Xt(n,e)>=0}function bA(t,e){for(var n=[];t;){var r=t.dataIndex;n.push({name:t.name,dataIndex:r,value:e.getRawValue(r)}),t=t.parentNode}return n.reverse(),n}var YHe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.hasSymbolVisual=!0,n.ignoreStyleOnData=!0,n}return e.prototype.getInitialData=function(n){var r={name:n.name,children:n.data},s=n.leaves||{},i=new Tn(s,this,this.ecModel),a=sI.createTree(r,this,o);function o(f){f.wrapMethod("getItemModel",function(p,h){var m=a.getNodeByDataIndex(h);return m&&m.children.length&&m.isExpand||(p.parentModel=i),p})}var l=0;a.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var d=n.expandAndCollapse,c=d&&n.initialTreeDepth>=0?n.initialTreeDepth:l;return a.root.eachNode("preorder",function(f){var p=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=p&&p.collapsed!=null?!p.collapsed:f.depth<=c}),a.data},e.prototype.getOrient=function(){var n=this.get("orient");return n==="horizontal"?n="LR":n==="vertical"&&(n="TB"),n},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.formatTooltip=function(n,r,s){for(var i=this.getData().tree,a=i.root.children[0],o=i.getNodeByDataIndex(n),l=o.getValue(),d=o.name;o&&o!==a;)d=o.parentNode.name+"."+d,o=o.parentNode;return hs("nameValue",{name:d,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(n);return r.treeAncestors=bA(s,this),r.collapsed=!s.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Jn);function KHe(t,e,n){for(var r=[t],s=[],i;i=r.pop();)if(s.push(i),i.isExpand){var a=i.children;if(a.length)for(var o=0;o<a.length;o++)r.push(a[o])}for(;i=s.pop();)e(i,n)}function qv(t,e){for(var n=[t],r;r=n.pop();)if(e(r),r.isExpand){var s=r.children;if(s.length)for(var i=s.length-1;i>=0;i--)n.push(s[i])}}function XHe(t,e){t.eachSeriesByType("tree",function(n){QHe(n,e)})}function QHe(t,e){var n=EHe(t,e);t.layoutInfo=n;var r=t.get("layout"),s=0,i=0,a=null;r==="radial"?(s=2*Math.PI,i=Math.min(n.height,n.width)/2,a=jB(function(k,w){return(k.parentNode===w.parentNode?1:2)/k.depth})):(s=n.width,i=n.height,a=jB());var o=t.getData().tree.root,l=o.children[0];if(l){THe(o),KHe(l,$He,a),o.hierNode.modifier=-l.hierNode.prelim,qv(l,MHe);var d=l,c=l,f=l;qv(l,function(k){var w=k.getLayout().x;w<d.getLayout().x&&(d=k),w>c.getLayout().x&&(c=k),k.depth>f.depth&&(f=k)});var p=d===c?1:a(d,c)/2,h=p-d.getLayout().x,m=0,g=0,y=0,x=0;if(r==="radial")m=s/(c.getLayout().x+p+h),g=i/(f.depth-1||1),qv(l,function(k){y=(k.getLayout().x+h)*m,x=(k.depth-1)*g;var w=_y(y,x);k.setLayout({x:w.x,y:w.y,rawX:y,rawY:x},!0)});else{var _=t.getOrient();_==="RL"||_==="LR"?(g=i/(c.getLayout().x+p+h),m=s/(f.depth-1||1),qv(l,function(k){x=(k.getLayout().x+h)*g,y=_==="LR"?(k.depth-1)*m:s-(k.depth-1)*m,k.setLayout({x:y,y:x},!0)})):(_==="TB"||_==="BT")&&(m=s/(c.getLayout().x+p+h),g=i/(f.depth-1||1),qv(l,function(k){y=(k.getLayout().x+h)*m,x=_==="TB"?(k.depth-1)*g:i-(k.depth-1)*g,k.setLayout({x:y,y:x},!0)}))}}}function ZHe(t){t.eachSeriesByType("tree",function(e){var n=e.getData(),r=n.tree;r.eachNode(function(s){var i=s.getModel(),a=i.getModel("itemStyle").getItemStyle(),o=n.ensureUniqueItemVisual(s.dataIndex,"style");Ne(o,a)})})}function JHe(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,n){n.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var s=e.dataIndex,i=r.getData().tree,a=i.getNodeByDataIndex(s);a.isExpand=!a.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,n,r){n.eachComponent({mainType:"series",subType:"tree",query:e},function(s){var i=s.coordinateSystem,a=nI(i,e,void 0,r);s.setCenter&&s.setCenter(a.center),s.setZoom&&s.setZoom(a.zoom)})})}function eqe(t){t.registerChartView(NHe),t.registerSeriesModel(YHe),t.registerLayout(XHe),t.registerVisual(ZHe),JHe(t)}var HB=["treemapZoomToNode","treemapRender","treemapMove"];function tqe(t){for(var e=0;e<HB.length;e++)t.registerAction({type:HB[e],update:"updateView"},Vr);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(n,r){r.eachComponent({mainType:"series",subType:"treemap",query:n},s);function s(i,a){var o=["treemapZoomToNode","treemapRootToNode"],l=P1(n,o,i);if(l){var d=i.getViewRoot();d&&(n.direction=iI(d,l.node)?"rollUp":"drillDown"),i.resetViewRoot(l.node)}}})}function eie(t){var e=t.getData(),n=e.tree,r={};n.eachNode(function(s){for(var i=s;i&&i.depth>1;)i=i.parentNode;var a=aE(t.ecModel,i.name||i.dataIndex+"",r);s.setVisual("decal",a)})}var nqe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.preventUsingHoverLayer=!0,n}return e.prototype.getInitialData=function(n,r){var s={name:n.name,children:n.data};tie(s);var i=n.levels||[],a=this.designatedVisualItemStyle={},o=new Tn({itemStyle:a},this,r);i=n.levels=rqe(i,r);var l=We(i||[],function(f){return new Tn(f,o,r)},this),d=sI.createTree(s,this,c);function c(f){f.wrapMethod("getItemModel",function(p,h){var m=d.getNodeByDataIndex(h),g=m?l[m.depth]:null;return p.parentModel=g||o,p})}return d.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(n,r,s){var i=this.getData(),a=this.getRawValue(n),o=i.getName(n);return hs("nameValue",{name:o,value:a})},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(n);return r.treeAncestors=bA(s,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(n){this.layoutInfo=this.layoutInfo||{},Ne(this.layoutInfo,n)},e.prototype.mapIdToIndex=function(n){var r=this._idIndexMap;r||(r=this._idIndexMap=mt(),this._idIndexMapCount=0);var s=r.get(n);return s==null&&r.set(n,s=this._idIndexMapCount++),s},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){eie(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Jn);function tie(t){var e=0;de(t.children,function(r){tie(r);var s=r.value;He(s)&&(s=s[0]),e+=s});var n=t.value;He(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=e),n<0&&(n=0),He(t.value)?t.value[0]=n:t.value=n}function rqe(t,e){var n=In(e.get("color")),r=In(e.get(["aria","decal","decals"]));if(n){t=t||[];var s,i;de(t,function(o){var l=new Tn(o),d=l.get("color"),c=l.get("decal");(l.get(["itemStyle","color"])||d&&d!=="none")&&(s=!0),(l.get(["itemStyle","decal"])||c&&c!=="none")&&(i=!0)});var a=t[0]||(t[0]={});return s||(a.color=n.slice()),!i&&r&&(a.decal=r.slice()),t}}var sqe=8,qB=8,$3=5,iqe=function(){function t(e){this.group=new Tt,e.add(this.group)}return t.prototype.render=function(e,n,r,s){var i=e.getModel("breadcrumb"),a=this.group;if(a.removeAll(),!(!i.get("show")||!r)){var o=i.getModel("itemStyle"),l=i.getModel("emphasis"),d=o.getModel("textStyle"),c=l.getModel(["itemStyle","textStyle"]),f={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:n.getWidth(),height:n.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,f,d),this._renderContent(e,f,o,l,d,c,s),aA(a,f.pos,f.box)}},t.prototype._prepare=function(e,n,r){for(var s=e;s;s=s.parentNode){var i=Qr(s.getModel().get("name"),""),a=r.getTextRect(i),o=Math.max(a.width+sqe*2,n.emptyItemWidth);n.totalWidth+=o+qB,n.renderList.push({node:s,text:i,width:o})}},t.prototype._renderContent=function(e,n,r,s,i,a,o){for(var l=0,d=n.emptyItemWidth,c=e.get(["breadcrumb","height"]),f=m7e(n.pos,n.box),p=n.totalWidth,h=n.renderList,m=s.getModel("itemStyle").getItemStyle(),g=h.length-1;g>=0;g--){var y=h[g],x=y.node,_=y.width,k=y.text;p>f.width&&(p-=_-d,_=d,k=null);var w=new Pi({shape:{points:aqe(l,0,_,c,g===h.length-1,g===0)},style:_t(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new dn({style:Xn(i,{text:k})}),textConfig:{position:"inside"},z2:jg*1e4,onclick:Nt(o,x)});w.disableLabelAnimation=!0,w.getTextContent().ensureState("emphasis").style=Xn(a,{text:k}),w.ensureState("emphasis").style=m,kr(w,s.get("focus"),s.get("blurScope"),s.get("disabled")),this.group.add(w),oqe(w,e,x),l+=_+qB}},t.prototype.remove=function(){this.group.removeAll()},t}();function aqe(t,e,n,r,s,i){var a=[[s?t:t-$3,e],[t+n,e],[t+n,e+r],[s?t:t-$3,e+r]];return!i&&a.splice(2,0,[t+n+$3,e+r/2]),!s&&a.push([t,e+r/2]),a}function oqe(t,e,n){Et(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&bA(n,e)}}var lqe=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(e,n,r,s,i){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:n,duration:r,delay:s,easing:i}),!0)},t.prototype.finished=function(e){return this._finishedCallback=e,this},t.prototype.start=function(){for(var e=this,n=this._storage.length,r=function(){n--,n<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},s=0,i=this._storage.length;s<i;s++){var a=this._storage[s];a.el.animateTo(a.target,{duration:a.duration,delay:a.delay,easing:a.easing,setToFinal:!0,done:r,aborted:r})}return this},t}();function uqe(){return new lqe}var PE=Tt,WB=on,GB=3,YB="label",KB="upperLabel",dqe=jg*10,cqe=jg*2,fqe=jg*3,Nf=Zp([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),XB=function(t){var e=Nf(t);return e.stroke=e.fill=e.lineWidth=null,e},Xk=ln(),pqe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._state="ready",n._storage=Wv(),n}return e.prototype.render=function(n,r,s,i){var a=r.findComponents({mainType:"series",subType:"treemap",query:i});if(!(Xt(a,n)<0)){this.seriesModel=n,this.api=s,this.ecModel=r;var o=["treemapZoomToNode","treemapRootToNode"],l=P1(i,o,n),d=i&&i.type,c=n.layoutInfo,f=!this._oldTree,p=this._storage,h=d==="treemapRootToNode"&&l&&p?{rootNodeGroup:p.nodeGroup[l.node.getRawIndex()],direction:i.direction}:null,m=this._giveContainerGroup(c),g=n.get("animation"),y=this._doRender(m,n,h);g&&!f&&(!d||d==="treemapZoomToNode"||d==="treemapRootToNode")?this._doAnimation(m,y,n,h):y.renderFinally(),this._resetController(s),this._renderBreadcrumb(n,s,l)}},e.prototype._giveContainerGroup=function(n){var r=this._containerGroup;return r||(r=this._containerGroup=new PE,this._initEvents(r),this.group.add(r)),r.x=n.x,r.y=n.y,r},e.prototype._doRender=function(n,r,s){var i=r.getData().tree,a=this._oldTree,o=Wv(),l=Wv(),d=this._storage,c=[];function f(_,k,w,S){return hqe(r,l,d,s,o,c,_,k,w,S)}g(i.root?[i.root]:[],a&&a.root?[a.root]:[],n,i===a||!a,0);var p=y(d);if(this._oldTree=i,this._storage=l,this._controllerHost){var h=this.seriesModel.layoutInfo,m=i.root.getLayout();m.width===h.width&&m.height===h.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:o,willDeleteEls:p,renderFinally:x};function g(_,k,w,S,C){S?(k=_,de(_,function(E,P){!E.isRemoved()&&M(P,P)})):new ld(k,_,A,A).add(M).update(M).remove(Nt(M,null)).execute();function A(E){return E.getId()}function M(E,P){var I=E!=null?_[E]:null,F=P!=null?k[P]:null,L=f(I,F,w,C);L&&g(I&&I.viewChildren||[],F&&F.viewChildren||[],L,S,C+1)}}function y(_){var k=Wv();return _&&de(_,function(w,S){var C=k[S];de(w,function(A){A&&(C.push(A),Xk(A).willDelete=!0)})}),k}function x(){de(p,function(_){de(_,function(k){k.parent&&k.parent.remove(k)})}),de(c,function(_){_.invisible=!0,_.dirty()})}},e.prototype._doAnimation=function(n,r,s,i){var a=s.get("animationDurationUpdate"),o=s.get("animationEasing"),l=(bt(a)?0:a)||0,d=(bt(o)?null:o)||"cubicOut",c=uqe();de(r.willDeleteEls,function(f,p){de(f,function(h,m){if(!h.invisible){var g=h.parent,y,x=Xk(g);if(i&&i.direction==="drillDown")y=g===i.rootNodeGroup?{shape:{x:0,y:0,width:x.nodeWidth,height:x.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var _=0,k=0;x.willDelete||(_=x.nodeWidth/2,k=x.nodeHeight/2),y=p==="nodeGroup"?{x:_,y:k,style:{opacity:0}}:{shape:{x:_,y:k,width:0,height:0},style:{opacity:0}}}y&&c.add(h,y,l,0,d)}})}),de(this._storage,function(f,p){de(f,function(h,m){var g=r.lastsForAnimation[p][m],y={};g&&(h instanceof Tt?g.oldX!=null&&(y.x=h.x,y.y=h.y,h.x=g.oldX,h.y=g.oldY):(g.oldShape&&(y.shape=Ne({},h.shape),h.setShape(g.oldShape)),g.fadein?(h.setStyle("opacity",0),y.style={opacity:1}):h.style.opacity!==1&&(y.style={opacity:1})),c.add(h,y,l,0,d))})},this),this._state="animating",c.finished(ct(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(n){var r=this._controller,s=this._controllerHost;s||(this._controllerHost={target:this.group},s=this._controllerHost),r||(r=this._controller=new zb(n.getZr()),r.enable(this.seriesModel.get("roam")),s.zoomLimit=this.seriesModel.get("scaleLimit"),s.zoom=this.seriesModel.get("zoom"),r.on("pan",ct(this._onPan,this)),r.on("zoom",ct(this._onZoom,this)));var i=new Gt(0,0,n.getWidth(),n.getHeight());r.setPointerChecker(function(a,o,l){return i.contain(o,l)})},e.prototype._clearController=function(){var n=this._controller;this._controllerHost=null,n&&(n.dispose(),n=null)},e.prototype._onPan=function(n){if(this._state!=="animating"&&(Math.abs(n.dx)>GB||Math.abs(n.dy)>GB)){var r=this.seriesModel.getData().tree.root;if(!r)return;var s=r.getLayout();if(!s)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x+n.dx,y:s.y+n.dy,width:s.width,height:s.height}})}},e.prototype._onZoom=function(n){var r=n.originX,s=n.originY,i=n.scale;if(this._state!=="animating"){var a=this.seriesModel.getData().tree.root;if(!a)return;var o=a.getLayout();if(!o)return;var l=new Gt(o.x,o.y,o.width,o.height),d=null,c=this._controllerHost;d=c.zoomLimit;var f=c.zoom=c.zoom||1;if(f*=i,d){var p=d.min||0,h=d.max||1/0;f=Math.max(Math.min(h,f),p)}var m=f/c.zoom;c.zoom=f;var g=this.seriesModel.layoutInfo;r-=g.x,s-=g.y;var y=va();zl(y,y,[-r,-s]),XP(y,y,[m,m]),zl(y,y,[r,s]),l.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(n){var r=this;n.on("click",function(s){if(r._state==="ready"){var i=r.seriesModel.get("nodeClick",!0);if(i){var a=r.findTarget(s.offsetX,s.offsetY);if(a){var o=a.node;if(o.getLayout().isLeafRoot)r._rootToNode(a);else if(i==="zoomToNode")r._zoomToNode(a);else if(i==="link"){var l=o.hostTree.data.getItemModel(o.dataIndex),d=l.get("link",!0),c=l.get("target",!0)||"blank";d&&Pk(d,c)}}}}},this)},e.prototype._renderBreadcrumb=function(n,r,s){var i=this;s||(s=n.get("leafDepth",!0)!=null?{node:n.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),s||(s={node:n.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new iqe(this.group))).render(n,r,s.node,function(a){i._state!=="animating"&&(iI(n.getViewRoot(),a)?i._rootToNode({node:a}):i._zoomToNode({node:a}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Wv(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(n){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},e.prototype._rootToNode=function(n){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},e.prototype.findTarget=function(n,r){var s,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},function(a){var o=this._storage.background[a.getRawIndex()];if(o){var l=o.transformCoordToLocal(n,r),d=o.shape;if(d.x<=l[0]&&l[0]<=d.x+d.width&&d.y<=l[1]&&l[1]<=d.y+d.height)s={node:a,offsetX:l[0],offsetY:l[1]};else return!1}},this),s},e.type="treemap",e}(On);function Wv(){return{nodeGroup:[],background:[],content:[]}}function hqe(t,e,n,r,s,i,a,o,l,d){if(!a)return;var c=a.getLayout(),f=t.getData(),p=a.getModel();if(f.setItemGraphicEl(a.dataIndex,null),!c||!c.isInView)return;var h=c.width,m=c.height,g=c.borderWidth,y=c.invisible,x=a.getRawIndex(),_=o&&o.getRawIndex(),k=a.viewChildren,w=c.upperHeight,S=k&&k.length,C=p.getModel("itemStyle"),A=p.getModel(["emphasis","itemStyle"]),M=p.getModel(["blur","itemStyle"]),E=p.getModel(["select","itemStyle"]),P=C.get("borderRadius")||0,I=ne("nodeGroup",PE);if(!I)return;if(l.add(I),I.x=c.x||0,I.y=c.y||0,I.markRedraw(),Xk(I).nodeWidth=h,Xk(I).nodeHeight=m,c.isAboveViewRoot)return I;var F=ne("background",WB,d,cqe);F&&j(I,F,S&&c.upperLabelHeight);var L=p.getModel("emphasis"),z=L.get("focus"),N=L.get("blurScope"),q=L.get("disabled"),V=z==="ancestor"?a.getAncestorsIndices():z==="descendant"?a.getDescendantIndices():z;if(S)x1(I)&&op(I,!1),F&&(op(F,!q),f.setItemGraphicEl(a.dataIndex,F),ZM(F,V,N));else{var O=ne("content",WB,d,fqe);O&&U(I,O),F.disableMorphing=!0,F&&x1(F)&&op(F,!1),op(I,!q),f.setItemGraphicEl(a.dataIndex,I);var X=p.getShallow("cursor");X&&O.attr("cursor",X),ZM(I,V,N)}return I;function j(re,te,K){var le=Et(te);if(le.dataIndex=a.dataIndex,le.seriesIndex=t.seriesIndex,te.setShape({x:0,y:0,width:h,height:m,r:P}),y)G(te);else{te.invisible=!1;var H=a.getVisual("style"),Y=H.stroke,B=XB(C);B.fill=Y;var ae=Nf(A);ae.fill=A.get("borderColor");var be=Nf(M);be.fill=M.get("borderColor");var fe=Nf(E);if(fe.fill=E.get("borderColor"),K){var me=h-2*g;ee(te,Y,H.opacity,{x:g,y:0,width:me,height:w})}else te.removeTextContent();te.setStyle(B),te.ensureState("emphasis").style=ae,te.ensureState("blur").style=be,te.ensureState("select").style=fe,Jp(te)}re.add(te)}function U(re,te){var K=Et(te);K.dataIndex=a.dataIndex,K.seriesIndex=t.seriesIndex;var le=Math.max(h-2*g,0),H=Math.max(m-2*g,0);if(te.culling=!0,te.setShape({x:g,y:g,width:le,height:H,r:P}),y)G(te);else{te.invisible=!1;var Y=a.getVisual("style"),B=Y.fill,ae=XB(C);ae.fill=B,ae.decal=Y.decal;var be=Nf(A),fe=Nf(M),me=Nf(E);ee(te,B,Y.opacity,null),te.setStyle(ae),te.ensureState("emphasis").style=be,te.ensureState("blur").style=fe,te.ensureState("select").style=me,Jp(te)}re.add(te)}function G(re){!re.invisible&&i.push(re)}function ee(re,te,K,le){var H=p.getModel(le?KB:YB),Y=Qr(p.get("name"),null),B=H.getShallow("show");Fs(re,ps(p,le?KB:YB),{defaultText:B?Y:null,inheritColor:te,defaultOpacity:K,labelFetcher:t,labelDataIndex:a.dataIndex});var ae=re.getTextContent();if(ae){var be=ae.style,fe=GP(be.padding||0);le&&(re.setTextConfig({layoutRect:le}),ae.disableLabelLayout=!0),ae.beforeUpdate=function(){var ye=Math.max((le?le.width:re.shape.width)-fe[1]-fe[3],0),Ee=Math.max((le?le.height:re.shape.height)-fe[0]-fe[2],0);(be.width!==ye||be.height!==Ee)&&ae.setStyle({width:ye,height:Ee})},be.truncateMinChar=2,be.lineOverflow="truncate",ie(be,le,c);var me=ae.getState("emphasis");ie(me?me.style:null,le,c)}}function ie(re,te,K){var le=re?re.text:null;if(!te&&K.isLeafRoot&&le!=null){var H=t.get("drillDownIcon",!0);re.text=H?H+" "+le:le}}function ne(re,te,K,le){var H=_!=null&&n[re][_],Y=s[re];return H?(n[re][_]=null,ce(Y,H)):y||(H=new te,H instanceof oo&&(H.z2=mqe(K,le)),oe(Y,H)),e[re][x]=H}function ce(re,te){var K=re[x]={};te instanceof PE?(K.oldX=te.x,K.oldY=te.y):K.oldShape=Ne({},te.shape)}function oe(re,te){var K=re[x]={},le=a.parentNode,H=te instanceof Tt;if(le&&(!r||r.direction==="drillDown")){var Y=0,B=0,ae=s.background[le.getRawIndex()];!r&&ae&&ae.oldShape&&(Y=ae.oldShape.width,B=ae.oldShape.height),H?(K.oldX=0,K.oldY=B):K.oldShape={x:Y,y:B,width:0,height:0}}K.fadein=!H}}function mqe(t,e){return t*dqe+e}var I1=de,gqe=wt,Qk=-1,cs=function(){function t(e){var n=e.mappingMethod,r=e.type,s=this.option=kt(e);this.type=r,this.mappingMethod=n,this._normalizeData=bqe[n];var i=t.visualHandlers[r];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[n],n==="piecewise"?(M3(s),vqe(s)):n==="category"?s.categories?yqe(s):M3(s,!0):(Ei(n!=="linear"||s.dataExtent),M3(s))}return t.prototype.mapValueToVisual=function(e){var n=this._normalizeData(e);return this._normalizedToVisual(n,e)},t.prototype.getNormalizer=function(){return ct(this._normalizeData,this)},t.listVisualTypes=function(){return sn(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(e,n,r){wt(e)?de(e,n,r):n.call(r,e)},t.mapVisual=function(e,n,r){var s,i=He(e)?[]:wt(e)?{}:(s=!0,null);return t.eachVisual(e,function(a,o){var l=n.call(r,a,o);s?i=l:i[o]=l}),i},t.retrieveVisuals=function(e){var n={},r;return e&&I1(t.visualHandlers,function(s,i){e.hasOwnProperty(i)&&(n[i]=e[i],r=!0)}),r?n:null},t.prepareVisualTypes=function(e){if(He(e))e=e.slice();else if(gqe(e)){var n=[];I1(e,function(r,s){n.push(s)}),e=n}else return[];return e.sort(function(r,s){return s==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},t.dependsOn=function(e,n){return n==="color"?!!(e&&e.indexOf(n)===0):e===n},t.findPieceIndex=function(e,n,r){for(var s,i=1/0,a=0,o=n.length;a<o;a++){var l=n[a].value;if(l!=null){if(l===e||ot(l)&&l===e+"")return a;r&&p(l,a)}}for(var a=0,o=n.length;a<o;a++){var d=n[a],c=d.interval,f=d.close;if(c){if(c[0]===-1/0){if(A_(f[1],e,c[1]))return a}else if(c[1]===1/0){if(A_(f[0],c[0],e))return a}else if(A_(f[0],c[0],e)&&A_(f[1],e,c[1]))return a;r&&p(c[0],a),r&&p(c[1],a)}}if(r)return e===1/0?n.length-1:e===-1/0?0:s;function p(h,m){var g=Math.abs(h-e);g<i&&(i=g,s=m)}},t.visualHandlers={color:{applyVisual:Gv("color"),getColorMapper:function(){var e=this.option;return ct(e.mappingMethod==="category"?function(n,r){return!r&&(n=this._normalizeData(n)),wy.call(this,n)}:function(n,r,s){var i=!!s;return!r&&(n=this._normalizeData(n)),s=dT(n,e.parsedVisual,s),i?s:Wu(s,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Wu(dT(e,this.option.parsedVisual),"rgba")},category:wy,piecewise:function(e,n){var r=OE.call(this,n);return r==null&&(r=Wu(dT(e,this.option.parsedVisual),"rgba")),r},fixed:jf}},colorHue:C_(function(e,n){return l0(e,n)}),colorSaturation:C_(function(e,n){return l0(e,null,n)}),colorLightness:C_(function(e,n){return l0(e,null,null,n)}),colorAlpha:C_(function(e,n){return _k(e,n)}),decal:{applyVisual:Gv("decal"),_normalizedToVisual:{linear:null,category:wy,piecewise:null,fixed:null}},opacity:{applyVisual:Gv("opacity"),_normalizedToVisual:IE([0,1])},liftZ:{applyVisual:Gv("liftZ"),_normalizedToVisual:{linear:jf,category:jf,piecewise:jf,fixed:jf}},symbol:{applyVisual:function(e,n,r){var s=this.mapValueToVisual(e);r("symbol",s)},_normalizedToVisual:{linear:QB,category:wy,piecewise:function(e,n){var r=OE.call(this,n);return r==null&&(r=QB.call(this,e)),r},fixed:jf}},symbolSize:{applyVisual:Gv("symbolSize"),_normalizedToVisual:IE([0,1])}},t}();function vqe(t){var e=t.pieceList;t.hasSpecialVisual=!1,de(e,function(n,r){n.originIndex=r,n.visual!=null&&(t.hasSpecialVisual=!0)})}function yqe(t){var e=t.categories,n=t.categoryMap={},r=t.visual;if(I1(e,function(a,o){n[a]=o}),!He(r)){var s=[];wt(r)?I1(r,function(a,o){var l=n[o];s[l!=null?l:Qk]=a}):s[Qk]=r,r=nie(t,s)}for(var i=e.length-1;i>=0;i--)r[i]==null&&(delete n[e[i]],e.pop())}function M3(t,e){var n=t.visual,r=[];wt(n)?I1(n,function(i){r.push(i)}):n!=null&&r.push(n);var s={color:1,symbol:1};!e&&r.length===1&&!s.hasOwnProperty(t.type)&&(r[1]=r[0]),nie(t,r)}function C_(t){return{applyVisual:function(e,n,r){var s=this.mapValueToVisual(e);r("color",t(n("color"),s))},_normalizedToVisual:IE([0,1])}}function QB(t){var e=this.option.visual;return e[Math.round(An(t,[0,1],[0,e.length-1],!0))]||{}}function Gv(t){return function(e,n,r){r(t,this.mapValueToVisual(e))}}function wy(t){var e=this.option.visual;return e[this.option.loop&&t!==Qk?t%e.length:t]}function jf(){return this.option.visual[0]}function IE(t){return{linear:function(e){return An(e,t,this.option.visual,!0)},category:wy,piecewise:function(e,n){var r=OE.call(this,n);return r==null&&(r=An(e,t,this.option.visual,!0)),r},fixed:jf}}function OE(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var r=cs.findPieceIndex(t,n),s=n[r];if(s&&s.visual)return s.visual[this.type]}}function nie(t,e){return t.visual=e,t.type==="color"&&(t.parsedVisual=We(e,function(n){var r=ya(n);return r||[0,0,0,1]})),e}var bqe={linear:function(t){return An(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=cs.findPieceIndex(t,e,!0);if(n!=null)return An(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return e==null?Qk:e},fixed:Vr};function A_(t,e,n){return t?e<=n:e<n}var xqe="itemStyle",rie=ln();const _qe={seriesType:"treemap",reset:function(t){var e=t.getData().tree,n=e.root;n.isRemoved()||sie(n,{},t.getViewRoot().getAncestors(),t)}};function sie(t,e,n,r){var s=t.getModel(),i=t.getLayout(),a=t.hostTree.data;if(!(!i||i.invisible||!i.isInView)){var o=s.getModel(xqe),l=wqe(o,e,r),d=a.ensureUniqueItemVisual(t.dataIndex,"style"),c=o.get("borderColor"),f=o.get("borderColorSaturation"),p;f!=null&&(p=ZB(l),c=kqe(f,p)),d.stroke=c;var h=t.viewChildren;if(!h||!h.length)p=ZB(l),d.fill=p;else{var m=Sqe(t,s,i,o,l,h);de(h,function(g,y){if(g.depth>=n.length||g===n[g.depth]){var x=Cqe(s,l,g,y,m,r);sie(g,x,n,r)}})}}}function wqe(t,e,n){var r=Ne({},e),s=n.designatedVisualItemStyle;return de(["color","colorAlpha","colorSaturation"],function(i){s[i]=e[i];var a=t.get(i);s[i]=null,a!=null&&(r[i]=a)}),r}function ZB(t){var e=E3(t,"color");if(e){var n=E3(t,"colorAlpha"),r=E3(t,"colorSaturation");return r&&(e=l0(e,null,null,r)),n&&(e=_k(e,n)),e}}function kqe(t,e){return e!=null?l0(e,null,null,t):null}function E3(t,e){var n=t[e];if(n!=null&&n!=="none")return n}function Sqe(t,e,n,r,s,i){if(!(!i||!i.length)){var a=D3(e,"color")||s.color!=null&&s.color!=="none"&&(D3(e,"colorAlpha")||D3(e,"colorSaturation"));if(a){var o=e.get("visualMin"),l=e.get("visualMax"),d=n.dataExtent.slice();o!=null&&o<d[0]&&(d[0]=o),l!=null&&l>d[1]&&(d[1]=l);var c=e.get("colorMappingBy"),f={type:a.name,dataExtent:d,visual:a.range};f.type==="color"&&(c==="index"||c==="id")?(f.mappingMethod="category",f.loop=!0):f.mappingMethod="linear";var p=new cs(f);return rie(p).drColorMappingBy=c,p}}}function D3(t,e){var n=t.get(e);return He(n)&&n.length?{name:e,range:n}:null}function Cqe(t,e,n,r,s,i){var a=Ne({},e);if(s){var o=s.type,l=o==="color"&&rie(s).drColorMappingBy,d=l==="index"?r:l==="id"?i.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));a[o]=s.mapValueToVisual(d)}return a}var O1=Math.max,Zk=Math.min,JB=xs,aI=de,iie=["itemStyle","borderWidth"],Aqe=["itemStyle","gapWidth"],Tqe=["upperLabel","show"],$qe=["upperLabel","height"];const Mqe={seriesType:"treemap",reset:function(t,e,n,r){var s=n.getWidth(),i=n.getHeight(),a=t.option,o=ts(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=a.size||[],d=tt(JB(o.width,l[0]),s),c=tt(JB(o.height,l[1]),i),f=r&&r.type,p=["treemapZoomToNode","treemapRootToNode"],h=P1(r,p,t),m=f==="treemapRender"||f==="treemapMove"?r.rootRect:null,g=t.getViewRoot(),y=Jse(g);if(f!=="treemapMove"){var x=f==="treemapZoomToNode"?Oqe(t,h,g,d,c):m?[m.width,m.height]:[d,c],_=a.sort;_&&_!=="asc"&&_!=="desc"&&(_="desc");var k={squareRatio:a.squareRatio,sort:_,leafDepth:a.leafDepth};g.hostTree.clearLayouts();var w={x:0,y:0,width:x[0],height:x[1],area:x[0]*x[1]};g.setLayout(w),aie(g,k,!1,0),w=g.getLayout(),aI(y,function(C,A){var M=(y[A+1]||g).getValue();C.setLayout(Ne({dataExtent:[M,M],borderWidth:0,upperHeight:0},w))})}var S=t.getData().tree.root;S.setLayout(Lqe(o,m,h),!0),t.setLayoutInfo(o),oie(S,new Gt(-o.x,-o.y,s,i),y,g,0)}};function aie(t,e,n,r){var s,i;if(!t.isRemoved()){var a=t.getLayout();s=a.width,i=a.height;var o=t.getModel(),l=o.get(iie),d=o.get(Aqe)/2,c=lie(o),f=Math.max(l,c),p=l-d,h=f-d;t.setLayout({borderWidth:l,upperHeight:f,upperLabelHeight:c},!0),s=O1(s-2*p,0),i=O1(i-p-h,0);var m=s*i,g=Eqe(t,o,m,e,n,r);if(g.length){var y={x:p,y:h,width:s,height:i},x=Zk(s,i),_=1/0,k=[];k.area=0;for(var w=0,S=g.length;w<S;){var C=g[w];k.push(C),k.area+=C.getLayout().area;var A=Iqe(k,x,e.squareRatio);A<=_?(w++,_=A):(k.area-=k.pop().getLayout().area,ez(k,x,y,d,!1),x=Zk(y.width,y.height),k.length=k.area=0,_=1/0)}if(k.length&&ez(k,x,y,d,!0),!n){var M=o.get("childrenVisibleMin");M!=null&&m<M&&(n=!0)}for(var w=0,S=g.length;w<S;w++)aie(g[w],e,n,r+1)}}}function Eqe(t,e,n,r,s,i){var a=t.children||[],o=r.sort;o!=="asc"&&o!=="desc"&&(o=null);var l=r.leafDepth!=null&&r.leafDepth<=i;if(s&&!l)return t.viewChildren=[];a=Sn(a,function(h){return!h.isRemoved()}),Rqe(a,o);var d=Pqe(e,a,o);if(d.sum===0)return t.viewChildren=[];if(d.sum=Dqe(e,n,d.sum,o,a),d.sum===0)return t.viewChildren=[];for(var c=0,f=a.length;c<f;c++){var p=a[c].getValue()/d.sum*n;a[c].setLayout({area:p})}return l&&(a.length&&t.setLayout({isLeafRoot:!0},!0),a.length=0),t.viewChildren=a,t.setLayout({dataExtent:d.dataExtent},!0),a}function Dqe(t,e,n,r,s){if(!r)return n;for(var i=t.get("visibleMin"),a=s.length,o=a,l=a-1;l>=0;l--){var d=s[r==="asc"?a-l-1:l].getValue();d/n*e<i&&(o=l,n-=d)}return r==="asc"?s.splice(0,a-o):s.splice(o,a-o),n}function Rqe(t,e){return e&&t.sort(function(n,r){var s=e==="asc"?n.getValue()-r.getValue():r.getValue()-n.getValue();return s===0?e==="asc"?n.dataIndex-r.dataIndex:r.dataIndex-n.dataIndex:s}),t}function Pqe(t,e,n){for(var r=0,s=0,i=e.length;s<i;s++)r+=e[s].getValue();var a=t.get("visualDimension"),o;return!e||!e.length?o=[NaN,NaN]:a==="value"&&n?(o=[e[e.length-1].getValue(),e[0].getValue()],n==="asc"&&o.reverse()):(o=[1/0,-1/0],aI(e,function(l){var d=l.getValue(a);d<o[0]&&(o[0]=d),d>o[1]&&(o[1]=d)})),{sum:r,dataExtent:o}}function Iqe(t,e,n){for(var r=0,s=1/0,i=0,a=void 0,o=t.length;i<o;i++)a=t[i].getLayout().area,a&&(a<s&&(s=a),a>r&&(r=a));var l=t.area*t.area,d=e*e*n;return l?O1(d*r/l,l/(d*s)):1/0}function ez(t,e,n,r,s){var i=e===n.width?0:1,a=1-i,o=["x","y"],l=["width","height"],d=n[o[i]],c=e?t.area/e:0;(s||c>n[l[a]])&&(c=n[l[a]]);for(var f=0,p=t.length;f<p;f++){var h=t[f],m={},g=c?h.getLayout().area/c:0,y=m[l[a]]=O1(c-2*r,0),x=n[o[i]]+n[l[i]]-d,_=f===p-1||x<g?x:g,k=m[l[i]]=O1(_-2*r,0);m[o[a]]=n[o[a]]+Zk(r,y/2),m[o[i]]=d+Zk(r,k/2),d+=_,h.setLayout(m,!0)}n[o[a]]+=c,n[l[a]]-=c}function Oqe(t,e,n,r,s){var i=(e||{}).node,a=[r,s];if(!i||i===n)return a;for(var o,l=r*s,d=l*t.option.zoomToNodeRatio;o=i.parentNode;){for(var c=0,f=o.children,p=0,h=f.length;p<h;p++)c+=f[p].getValue();var m=i.getValue();if(m===0)return a;d*=c/m;var g=o.getModel(),y=g.get(iie),x=Math.max(y,lie(g));d+=4*y*y+(3*y+x)*Math.pow(d,.5),d>hj&&(d=hj),i=o}d<l&&(d=l);var _=Math.pow(d/l,.5);return[r*_,s*_]}function Lqe(t,e,n){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!n)return r;var s=n.node,i=s.getLayout();if(!i)return r;for(var a=[i.width/2,i.height/2],o=s;o;){var l=o.getLayout();a[0]+=l.x,a[1]+=l.y,o=o.parentNode}return{x:t.width/2-a[0],y:t.height/2-a[1]}}function oie(t,e,n,r,s){var i=t.getLayout(),a=n[s],o=a&&a===t;if(!(a&&!o||s===n.length&&t!==r)){t.setLayout({isInView:!0,invisible:!o&&!e.intersect(i),isAboveViewRoot:o},!0);var l=new Gt(e.x-i.x,e.y-i.y,e.width,e.height);aI(t.viewChildren||[],function(d){oie(d,l,n,r,s+1)})}}function lie(t){return t.get(Tqe)?t.get($qe):0}function Vqe(t){t.registerSeriesModel(nqe),t.registerChartView(pqe),t.registerVisual(_qe),t.registerLayout(Mqe),tqe(t)}function Nqe(t){var e=t.findComponents({mainType:"legend"});!e||!e.length||t.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),s=n.getGraph(),i=s.data,a=r.mapArray(r.getName);i.filterSelf(function(o){var l=i.getItemModel(o),d=l.getShallow("category");if(d!=null){hn(d)&&(d=a[d]);for(var c=0;c<e.length;c++)if(!e[c].isSelected(d))return!1}return!0})})}function jqe(t){var e={};t.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),s=n.getData(),i={};r.each(function(a){var o=r.getName(a);i["ec-"+o]=a;var l=r.getItemModel(a),d=l.getModel("itemStyle").getItemStyle();d.fill||(d.fill=n.getColorFromPalette(o,e)),r.setItemVisual(a,"style",d);for(var c=["symbol","symbolSize","symbolKeepAspect"],f=0;f<c.length;f++){var p=l.getShallow(c[f],!0);p!=null&&r.setItemVisual(a,c[f],p)}}),r.count()&&s.each(function(a){var o=s.getItemModel(a),l=o.getShallow("category");if(l!=null){ot(l)&&(l=i["ec-"+l]);var d=r.getItemVisual(l,"style"),c=s.ensureUniqueItemVisual(a,"style");Ne(c,d);for(var f=["symbol","symbolSize","symbolKeepAspect"],p=0;p<f.length;p++)s.setItemVisual(a,f[p],r.getItemVisual(l,f[p]))}})})}function T_(t){return t instanceof Array||(t=[t,t]),t}function Fqe(t){t.eachSeriesByType("graph",function(e){var n=e.getGraph(),r=e.getEdgeData(),s=T_(e.get("edgeSymbol")),i=T_(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",s&&s[0]),r.setVisual("toSymbol",s&&s[1]),r.setVisual("fromSymbolSize",i&&i[0]),r.setVisual("toSymbolSize",i&&i[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(a){var o=r.getItemModel(a),l=n.getEdgeByIndex(a),d=T_(o.getShallow("symbol",!0)),c=T_(o.getShallow("symbolSize",!0)),f=o.getModel("lineStyle").getLineStyle(),p=r.ensureUniqueItemVisual(a,"style");switch(Ne(p,f),p.stroke){case"source":{var h=l.node1.getVisual("style");p.stroke=h&&h.fill;break}case"target":{var h=l.node2.getVisual("style");p.stroke=h&&h.fill;break}}d[0]&&l.setVisual("fromSymbol",d[0]),d[1]&&l.setVisual("toSymbol",d[1]),c[0]&&l.setVisual("fromSymbolSize",c[0]),c[1]&&l.setVisual("toSymbolSize",c[1])})})}var LE="-->",xA=function(t){return t.get("autoCurveness")||null},uie=function(t,e){var n=xA(t),r=20,s=[];if(hn(n))r=n;else if(He(n)){t.__curvenessList=n;return}e>r&&(r=e);var i=r%2?r+2:r+3;s=[];for(var a=0;a<i;a++)s.push((a%2?a+1:a)/10*(a%2?-1:1));t.__curvenessList=s},L1=function(t,e,n){var r=[t.id,t.dataIndex].join("."),s=[e.id,e.dataIndex].join(".");return[n.uid,r,s].join(LE)},die=function(t){var e=t.split(LE);return[e[0],e[2],e[1]].join(LE)},Bqe=function(t,e){var n=L1(t.node1,t.node2,e);return e.__edgeMap[n]},zqe=function(t,e){var n=VE(L1(t.node1,t.node2,e),e),r=VE(L1(t.node2,t.node1,e),e);return n+r},VE=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function Uqe(t){xA(t)&&(t.__curvenessList=[],t.__edgeMap={},uie(t))}function Hqe(t,e,n,r){if(xA(n)){var s=L1(t,e,n),i=n.__edgeMap,a=i[die(s)];i[s]&&!a?i[s].isForward=!0:a&&i[s]&&(a.isForward=!0,i[s].isForward=!1),i[s]=i[s]||[],i[s].push(r)}}function oI(t,e,n,r){var s=xA(e),i=He(s);if(!s)return null;var a=Bqe(t,e);if(!a)return null;for(var o=-1,l=0;l<a.length;l++)if(a[l]===n){o=l;break}var d=zqe(t,e);uie(e,d),t.lineStyle=t.lineStyle||{};var c=L1(t.node1,t.node2,e),f=e.__curvenessList,p=i||d%2?0:1;if(a.isForward)return f[p+o];var h=die(c),m=VE(h,e),g=f[o+m+p];return r?i?s&&s[0]===0?(m+p)%2?g:-g:((m%2?0:1)+p)%2?g:-g:(m+p)%2?g:-g:f[o+m+p]}function cie(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view")){var n=t.getGraph();n.eachNode(function(r){var s=r.getModel();r.setLayout([+s.get("x"),+s.get("y")])}),lI(n,t)}}function lI(t,e){t.eachEdge(function(n,r){var s=Dl(n.getModel().get(["lineStyle","curveness"]),-oI(n,e,r,!0),0),i=Hu(n.node1.getLayout()),a=Hu(n.node2.getLayout()),o=[i,a];+s&&o.push([(i[0]+a[0])/2-(i[1]-a[1])*s,(i[1]+a[1])/2-(a[0]-i[0])*s]),n.setLayout(o)})}function qqe(t,e){t.eachSeriesByType("graph",function(n){var r=n.get("layout"),s=n.coordinateSystem;if(s&&s.type!=="view"){var i=n.getData(),a=[];de(s.dimensions,function(p){a=a.concat(i.mapDimensionsAll(p))});for(var o=0;o<i.count();o++){for(var l=[],d=!1,c=0;c<a.length;c++){var f=i.get(a[c],o);isNaN(f)||(d=!0),l.push(f)}d?i.setItemLayout(o,s.dataToPoint(l)):i.setItemLayout(o,[NaN,NaN])}lI(i.graph,n)}else(!r||r==="none")&&cie(n)})}function ky(t){var e=t.coordinateSystem;if(e.type!=="view")return 1;var n=t.option.nodeScaleRatio,r=e.scaleX,s=e.getZoom(),i=(s-1)*n+1;return i/r}function Sy(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var tz=Math.PI,R3=[];function uI(t,e,n,r){var s=t.coordinateSystem;if(!(s&&s.type!=="view")){var i=s.getBoundingRect(),a=t.getData(),o=a.graph,l=i.width/2+i.x,d=i.height/2+i.y,c=Math.min(i.width,i.height)/2,f=a.count();if(a.setLayout({cx:l,cy:d}),!!f){if(n){var p=s.pointToData(r),h=p[0],m=p[1],g=[h-l,m-d];Lg(g,g),Aw(g,g,c),n.setLayout([l+g[0],d+g[1]],!0);var y=t.get(["circular","rotateLabel"]);fie(n,y,l,d)}Wqe[e](t,o,a,c,l,d,f),o.eachEdge(function(x,_){var k=Dl(x.getModel().get(["lineStyle","curveness"]),oI(x,t,_),0),w=Hu(x.node1.getLayout()),S=Hu(x.node2.getLayout()),C,A=(w[0]+S[0])/2,M=(w[1]+S[1])/2;+k&&(k*=3,C=[l*k+A*(1-k),d*k+M*(1-k)]),x.setLayout([w,S,C])})}}}var Wqe={value:function(t,e,n,r,s,i,a){var o=0,l=n.getSum("value"),d=Math.PI*2/(l||a);e.eachNode(function(c){var f=c.getValue("value"),p=d*(l?f:1)/2;o+=p,c.setLayout([r*Math.cos(o)+s,r*Math.sin(o)+i]),o+=p})},symbolSize:function(t,e,n,r,s,i,a){var o=0;R3.length=a;var l=ky(t);e.eachNode(function(f){var p=Sy(f);isNaN(p)&&(p=2),p<0&&(p=0),p*=l;var h=Math.asin(p/2/r);isNaN(h)&&(h=tz/2),R3[f.dataIndex]=h,o+=h*2});var d=(2*tz-o)/a/2,c=0;e.eachNode(function(f){var p=d+R3[f.dataIndex];c+=p,(!f.getLayout()||!f.getLayout().fixed)&&f.setLayout([r*Math.cos(c)+s,r*Math.sin(c)+i]),c+=p})}};function fie(t,e,n,r){var s=t.getGraphicEl();if(s){var i=t.getModel(),a=i.get(["label","rotate"])||0,o=s.getSymbolPath();if(e){var l=t.getLayout(),d=Math.atan2(l[1]-r,l[0]-n);d<0&&(d=Math.PI*2+d);var c=l[0]<n;c&&(d=d-Math.PI);var f=c?"left":"right";o.setTextConfig({rotation:-d,position:f,origin:"center"});var p=o.ensureState("emphasis");Ne(p.textConfig||(p.textConfig={}),{position:f})}else o.setTextConfig({rotation:a*=Math.PI/180})}}function Gqe(t){t.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&uI(e,"symbolSize")})}var Zh=kM;function Yqe(t,e,n){for(var r=t,s=e,i=n.rect,a=i.width,o=i.height,l=[i.x+a/2,i.y+o/2],d=n.gravity==null?.1:n.gravity,c=0;c<r.length;c++){var f=r[c];f.p||(f.p=hh(a*(Math.random()-.5)+l[0],o*(Math.random()-.5)+l[1])),f.pp=Hu(f.p),f.edges=null}var p=n.friction==null?.6:n.friction,h=p,m,g;return{warmUp:function(){h=p*.8},setFixed:function(y){r[y].fixed=!0},setUnfixed:function(y){r[y].fixed=!1},beforeStep:function(y){m=y},afterStep:function(y){g=y},step:function(y){m&&m(r,s);for(var x=[],_=r.length,k=0;k<s.length;k++){var w=s[k];if(!w.ignoreForceLayout){var S=w.n1,C=w.n2;ip(x,C.p,S.p);var A=SM(x)-w.d,M=C.w/(S.w+C.w);isNaN(M)&&(M=0),Lg(x,x),!S.fixed&&Zh(S.p,S.p,x,M*A*h),!C.fixed&&Zh(C.p,C.p,x,-(1-M)*A*h)}}for(var k=0;k<_;k++){var E=r[k];E.fixed||(ip(x,l,E.p),Zh(E.p,E.p,x,d*h))}for(var k=0;k<_;k++)for(var S=r[k],P=k+1;P<_;P++){var C=r[P];ip(x,C.p,S.p);var A=SM(x);A===0&&(SLe(x,Math.random()-.5,Math.random()-.5),A=1);var I=(S.rep+C.rep)/A/A;!S.fixed&&Zh(S.pp,S.pp,x,I),!C.fixed&&Zh(C.pp,C.pp,x,-I)}for(var F=[],k=0;k<_;k++){var E=r[k];E.fixed||(ip(F,E.p,E.pp),Zh(E.p,E.p,F,h),hi(E.pp,E.p))}h=h*.992;var L=h<.01;g&&g(r,s,L),y&&y(L)}}}function Kqe(t){t.eachSeriesByType("graph",function(e){var n=e.coordinateSystem;if(!(n&&n.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},s=e.getGraph(),i=s.data,a=s.edgeData,o=e.getModel("force"),l=o.get("initLayout");e.preservedPoints?i.each(function(k){var w=i.getId(k);i.setItemLayout(k,r[w]||[NaN,NaN])}):!l||l==="none"?cie(e):l==="circular"&&uI(e,"value");var d=i.getDataExtent("value"),c=a.getDataExtent("value"),f=o.get("repulsion"),p=o.get("edgeLength"),h=He(f)?f:[f,f],m=He(p)?p:[p,p];m=[m[1],m[0]];var g=i.mapArray("value",function(k,w){var S=i.getItemLayout(w),C=An(k,d,h);return isNaN(C)&&(C=(h[0]+h[1])/2),{w:C,rep:C,fixed:i.getItemModel(w).get("fixed"),p:!S||isNaN(S[0])||isNaN(S[1])?null:S}}),y=a.mapArray("value",function(k,w){var S=s.getEdgeByIndex(w),C=An(k,c,m);isNaN(C)&&(C=(m[0]+m[1])/2);var A=S.getModel(),M=Dl(S.getModel().get(["lineStyle","curveness"]),-oI(S,e,w,!0),0);return{n1:g[S.node1.dataIndex],n2:g[S.node2.dataIndex],d:C,curveness:M,ignoreForceLayout:A.get("ignoreForceLayout")}}),x=n.getBoundingRect(),_=Yqe(g,y,{rect:x,gravity:o.get("gravity"),friction:o.get("friction")});_.beforeStep(function(k,w){for(var S=0,C=k.length;S<C;S++)k[S].fixed&&hi(k[S].p,s.getNodeByIndex(S).getLayout())}),_.afterStep(function(k,w,S){for(var C=0,A=k.length;C<A;C++)k[C].fixed||s.getNodeByIndex(C).setLayout(k[C].p),r[i.getId(C)]=k[C].p;for(var C=0,A=w.length;C<A;C++){var M=w[C],E=s.getEdgeByIndex(C),P=M.n1.p,I=M.n2.p,F=E.getLayout();F=F?F.slice():[],F[0]=F[0]||[],F[1]=F[1]||[],hi(F[0],P),hi(F[1],I),+M.curveness&&(F[2]=[(P[0]+I[0])/2-(P[1]-I[1])*M.curveness,(P[1]+I[1])/2-(I[0]-P[0])*M.curveness]),E.setLayout(F)}}),e.forceLayout=_,e.preservedPoints=r,_.step()}else e.forceLayout=null})}function Xqe(t,e,n){var r=Ne(t.getBoxLayoutParams(),{aspect:n});return ts(r,{width:e.getWidth(),height:e.getHeight()})}function Qqe(t,e){var n=[];return t.eachSeriesByType("graph",function(r){var s=r.get("coordinateSystem");if(!s||s==="view"){var i=r.getData(),a=i.mapArray(function(y){var x=i.getItemModel(y);return[+x.get("x"),+x.get("y")]}),o=[],l=[];GC(a,o,l),l[0]-o[0]===0&&(l[0]+=1,o[0]-=1),l[1]-o[1]===0&&(l[1]+=1,o[1]-=1);var d=(l[0]-o[0])/(l[1]-o[1]),c=Xqe(r,e,d);isNaN(d)&&(o=[c.x,c.y],l=[c.x+c.width,c.y+c.height]);var f=l[0]-o[0],p=l[1]-o[1],h=c.width,m=c.height,g=r.coordinateSystem=new Ub;g.zoomLimit=r.get("scaleLimit"),g.setBoundingRect(o[0],o[1],f,p),g.setViewRect(c.x,c.y,h,m),g.setCenter(r.get("center"),e),g.setZoom(r.get("zoom")),n.push(g)}}),n}var nz=ls.prototype,P3=$b.prototype,pie=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(pie);function I3(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var Zqe=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new pie},e.prototype.buildPath=function(n,r){I3(r)?nz.buildPath.call(this,n,r):P3.buildPath.call(this,n,r)},e.prototype.pointAt=function(n){return I3(this.shape)?nz.pointAt.call(this,n):P3.pointAt.call(this,n)},e.prototype.tangentAt=function(n){var r=this.shape,s=I3(r)?[r.x2-r.x1,r.y2-r.y1]:P3.tangentAt.call(this,n);return Lg(s,s)},e}(en),O3=["fromSymbol","toSymbol"];function rz(t){return"_"+t+"Type"}function sz(t,e,n){var r=e.getItemVisual(n,t);if(!r||r==="none")return r;var s=e.getItemVisual(n,t+"Size"),i=e.getItemVisual(n,t+"Rotate"),a=e.getItemVisual(n,t+"Offset"),o=e.getItemVisual(n,t+"KeepAspect"),l=Yg(s),d=yh(a||0,l);return r+l+d+(i||"")+(o||"")}function iz(t,e,n){var r=e.getItemVisual(n,t);if(!(!r||r==="none")){var s=e.getItemVisual(n,t+"Size"),i=e.getItemVisual(n,t+"Rotate"),a=e.getItemVisual(n,t+"Offset"),o=e.getItemVisual(n,t+"KeepAspect"),l=Yg(s),d=yh(a||0,l),c=Wr(r,-l[0]/2+d[0],-l[1]/2+d[1],l[0],l[1],null,o);return c.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,c.name=t,c}}function Jqe(t){var e=new Zqe({name:"line",subPixelOptimize:!0});return NE(e.shape,t),e}function NE(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}var dI=function(t){Te(e,t);function e(n,r,s){var i=t.call(this)||this;return i._createLine(n,r,s),i}return e.prototype._createLine=function(n,r,s){var i=n.hostModel,a=n.getItemLayout(r),o=Jqe(a);o.shape.percent=0,ur(o,{shape:{percent:1}},i,r),this.add(o),de(O3,function(l){var d=iz(l,n,r);this.add(d),this[rz(l)]=sz(l,n,r)},this),this._updateCommonStl(n,r,s)},e.prototype.updateData=function(n,r,s){var i=n.hostModel,a=this.childOfName("line"),o=n.getItemLayout(r),l={shape:{}};NE(l.shape,o),bn(a,l,i,r),de(O3,function(d){var c=sz(d,n,r),f=rz(d);if(this[f]!==c){this.remove(this.childOfName(d));var p=iz(d,n,r);this.add(p)}this[f]=c},this),this._updateCommonStl(n,r,s)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(n,r,s){var i=n.hostModel,a=this.childOfName("line"),o=s&&s.emphasisLineStyle,l=s&&s.blurLineStyle,d=s&&s.selectLineStyle,c=s&&s.labelStatesModels,f=s&&s.emphasisDisabled,p=s&&s.focus,h=s&&s.blurScope;if(!s||n.hasItemOption){var m=n.getItemModel(r),g=m.getModel("emphasis");o=g.getModel("lineStyle").getLineStyle(),l=m.getModel(["blur","lineStyle"]).getLineStyle(),d=m.getModel(["select","lineStyle"]).getLineStyle(),f=g.get("disabled"),p=g.get("focus"),h=g.get("blurScope"),c=ps(m)}var y=n.getItemVisual(r,"style"),x=y.stroke;a.useStyle(y),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=o,a.ensureState("blur").style=l,a.ensureState("select").style=d,de(O3,function(C){var A=this.childOfName(C);if(A){A.setColor(x),A.style.opacity=y.opacity;for(var M=0;M<Di.length;M++){var E=Di[M],P=a.getState(E);if(P){var I=P.style||{},F=A.ensureState(E),L=F.style||(F.style={});I.stroke!=null&&(L[A.__isEmptyBrush?"stroke":"fill"]=I.stroke),I.opacity!=null&&(L.opacity=I.opacity)}}A.markRedraw()}},this);var _=i.getRawValue(r);Fs(this,c,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(C,A){return i.getFormattedLabel(C,A,n.dataType)}},inheritColor:x||"#000",defaultOpacity:y.opacity,defaultText:(_==null?n.getName(r):isFinite(_)?Mr(_):_)+""});var k=this.getTextContent();if(k){var w=c.normal;k.__align=k.style.align,k.__verticalAlign=k.style.verticalAlign,k.__position=w.get("position")||"middle";var S=w.get("distance");He(S)||(S=[S,S]),k.__labelDistance=S}this.setTextConfig({position:null,local:!0,inside:!1}),kr(this,p,h,f)},e.prototype.highlight=function(){ad(this)},e.prototype.downplay=function(){od(this)},e.prototype.updateLayout=function(n,r){this.setLinePoints(n.getItemLayout(r))},e.prototype.setLinePoints=function(n){var r=this.childOfName("line");NE(r.shape,n),r.dirty()},e.prototype.beforeUpdate=function(){var n=this,r=n.childOfName("fromSymbol"),s=n.childOfName("toSymbol"),i=n.getTextContent();if(!r&&!s&&(!i||i.ignore))return;for(var a=1,o=this.parent;o;)o.scaleX&&(a/=o.scaleX),o=o.parent;var l=n.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var d=l.shape.percent,c=l.pointAt(0),f=l.pointAt(d),p=ip([],f,c);Lg(p,p);function h(P,I){var F=P.__specifiedRotation;if(F==null){var L=l.tangentAt(I);P.attr("rotation",(I===1?-1:1)*Math.PI/2-Math.atan2(L[1],L[0]))}else P.attr("rotation",F)}if(r&&(r.setPosition(c),h(r,0),r.scaleX=r.scaleY=a*d,r.markRedraw()),s&&(s.setPosition(f),h(s,1),s.scaleX=s.scaleY=a*d,s.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var m=void 0,g=void 0,y=i.__labelDistance,x=y[0]*a,_=y[1]*a,k=d/2,w=l.tangentAt(k),S=[w[1],-w[0]],C=l.pointAt(k);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var A=w[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var M=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(M=Math.PI+M),i.rotation=M}var E=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":E=-_,g="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":E=_,g="top";break;default:E=0,g="middle"}switch(i.__position){case"end":i.x=p[0]*x+f[0],i.y=p[1]*_+f[1],m=p[0]>.8?"left":p[0]<-.8?"right":"center",g=p[1]>.8?"top":p[1]<-.8?"bottom":"middle";break;case"start":i.x=-p[0]*x+c[0],i.y=-p[1]*_+c[1],m=p[0]>.8?"right":p[0]<-.8?"left":"center",g=p[1]>.8?"bottom":p[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=x*A+c[0],i.y=c[1]+E,m=w[0]<0?"right":"left",i.originX=-x*A,i.originY=-E;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=C[0],i.y=C[1]+E,m="center",i.originY=-E;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-x*A+f[0],i.y=f[1]+E,m=w[0]>=0?"right":"left",i.originX=x*A,i.originY=-E;break}i.scaleX=i.scaleY=a,i.setStyle({verticalAlign:i.__verticalAlign||g,align:i.__align||m})}},e}(Tt),cI=function(){function t(e){this.group=new Tt,this._LineCtor=e||dI}return t.prototype.updateData=function(e){var n=this;this._progressiveEls=null;var r=this,s=r.group,i=r._lineData;r._lineData=e,i||s.removeAll();var a=az(e);e.diff(i).add(function(o){n._doAdd(e,o,a)}).update(function(o,l){n._doUpdate(i,e,l,o,a)}).remove(function(o){s.remove(i.getItemGraphicEl(o))}).execute()},t.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(n,r){n.updateLayout(e,r)},this)},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=az(e),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,n){this._progressiveEls=[];function r(o){!o.isGroup&&!eWe(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var s=e.start;s<e.end;s++){var i=n.getItemLayout(s);if(L3(i)){var a=new this._LineCtor(n,s,this._seriesScope);a.traverse(r),this.group.add(a),n.setItemGraphicEl(s,a),this._progressiveEls.push(a)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(e){Xc(this._progressiveEls||this.group,e)},t.prototype._doAdd=function(e,n,r){var s=e.getItemLayout(n);if(L3(s)){var i=new this._LineCtor(e,n,r);e.setItemGraphicEl(n,i),this.group.add(i)}},t.prototype._doUpdate=function(e,n,r,s,i){var a=e.getItemGraphicEl(r);if(!L3(n.getItemLayout(s))){this.group.remove(a);return}a?a.updateData(n,s,i):a=new this._LineCtor(n,s,i),n.setItemGraphicEl(s,a),this.group.add(a)},t}();function eWe(t){return t.animators&&t.animators.length>0}function az(t){var e=t.hostModel,n=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:ps(e)}}function oz(t){return isNaN(t[0])||isNaN(t[1])}function L3(t){return t&&!oz(t[0])&&!oz(t[1])}var V3=[],N3=[],j3=[],Jh=gs,F3=Mp,lz=Math.abs;function uz(t,e,n){for(var r=t[0],s=t[1],i=t[2],a=1/0,o,l=n*n,d=.1,c=.1;c<=.9;c+=.1){V3[0]=Jh(r[0],s[0],i[0],c),V3[1]=Jh(r[1],s[1],i[1],c);var f=lz(F3(V3,e)-l);f<a&&(a=f,o=c)}for(var p=0;p<32;p++){var h=o+d;N3[0]=Jh(r[0],s[0],i[0],o),N3[1]=Jh(r[1],s[1],i[1],o),j3[0]=Jh(r[0],s[0],i[0],h),j3[1]=Jh(r[1],s[1],i[1],h);var f=F3(N3,e)-l;if(lz(f)<.01)break;var m=F3(j3,e)-l;d/=2,f<0?m>=0?o=o+d:o=o-d:m>=0?o=o-d:o=o+d}return o}function B3(t,e){var n=[],r=h1,s=[[],[],[]],i=[[],[]],a=[];e/=2,t.eachEdge(function(o,l){var d=o.getLayout(),c=o.getVisual("fromSymbol"),f=o.getVisual("toSymbol");d.__original||(d.__original=[Hu(d[0]),Hu(d[1])],d[2]&&d.__original.push(Hu(d[2])));var p=d.__original;if(d[2]!=null){if(hi(s[0],p[0]),hi(s[1],p[2]),hi(s[2],p[1]),c&&c!=="none"){var h=Sy(o.node1),m=uz(s,p[0],h*e);r(s[0][0],s[1][0],s[2][0],m,n),s[0][0]=n[3],s[1][0]=n[4],r(s[0][1],s[1][1],s[2][1],m,n),s[0][1]=n[3],s[1][1]=n[4]}if(f&&f!=="none"){var h=Sy(o.node2),m=uz(s,p[1],h*e);r(s[0][0],s[1][0],s[2][0],m,n),s[1][0]=n[1],s[2][0]=n[2],r(s[0][1],s[1][1],s[2][1],m,n),s[1][1]=n[1],s[2][1]=n[2]}hi(d[0],s[0]),hi(d[1],s[2]),hi(d[2],s[1])}else{if(hi(i[0],p[0]),hi(i[1],p[1]),ip(a,i[1],i[0]),Lg(a,a),c&&c!=="none"){var h=Sy(o.node1);kM(i[0],i[0],a,h*e)}if(f&&f!=="none"){var h=Sy(o.node2);kM(i[1],i[1],a,-h*e)}hi(d[0],i[0]),hi(d[1],i[1])}})}function dz(t){return t.type==="view"}var tWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){var s=new Vb,i=new cI,a=this.group;this._controller=new zb(r.getZr()),this._controllerHost={target:a},a.add(s.group),a.add(i.group),this._symbolDraw=s,this._lineDraw=i,this._firstRender=!0},e.prototype.render=function(n,r,s){var i=this,a=n.coordinateSystem;this._model=n;var o=this._symbolDraw,l=this._lineDraw,d=this.group;if(dz(a)){var c={x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY};this._firstRender?d.attr(c):bn(d,c,n)}B3(n.getGraph(),ky(n));var f=n.getData();o.updateData(f);var p=n.getEdgeData();l.updateData(p),this._updateNodeAndLinkScale(),this._updateController(n,r,s),clearTimeout(this._layoutTimeout);var h=n.forceLayout,m=n.get(["force","layoutAnimation"]);h&&this._startForceLayoutIteration(h,m);var g=n.get("layout");f.graph.eachNode(function(k){var w=k.dataIndex,S=k.getGraphicEl(),C=k.getModel();if(S){S.off("drag").off("dragend");var A=C.get("draggable");A&&S.on("drag",function(E){switch(g){case"force":h.warmUp(),!i._layouting&&i._startForceLayoutIteration(h,m),h.setFixed(w),f.setItemLayout(w,[S.x,S.y]);break;case"circular":f.setItemLayout(w,[S.x,S.y]),k.setLayout({fixed:!0},!0),uI(n,"symbolSize",k,[E.offsetX,E.offsetY]),i.updateLayout(n);break;case"none":default:f.setItemLayout(w,[S.x,S.y]),lI(n.getGraph(),n),i.updateLayout(n);break}}).on("dragend",function(){h&&h.setUnfixed(w)}),S.setDraggable(A,!!C.get("cursor"));var M=C.get(["emphasis","focus"]);M==="adjacency"&&(Et(S).focus=k.getAdjacentDataIndices())}}),f.graph.eachEdge(function(k){var w=k.getGraphicEl(),S=k.getModel().get(["emphasis","focus"]);w&&S==="adjacency"&&(Et(w).focus={edge:[k.dataIndex],node:[k.node1.dataIndex,k.node2.dataIndex]})});var y=n.get("layout")==="circular"&&n.get(["circular","rotateLabel"]),x=f.getLayout("cx"),_=f.getLayout("cy");f.graph.eachNode(function(k){fie(k,y,x,_)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(n,r){var s=this;(function i(){n.step(function(a){s.updateLayout(s._model),(s._layouting=!a)&&(r?s._layoutTimeout=setTimeout(i,16):i())})})()},e.prototype._updateController=function(n,r,s){var i=this,a=this._controller,o=this._controllerHost,l=this.group;if(a.setPointerChecker(function(d,c,f){var p=l.getBoundingRect();return p.applyTransform(l.transform),p.contain(c,f)&&!vA(d,s,n)}),!dz(n.coordinateSystem)){a.disable();return}a.enable(n.get("roam")),o.zoomLimit=n.get("scaleLimit"),o.zoom=n.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(d){J6(o,d.dx,d.dy),s.dispatchAction({seriesId:n.id,type:"graphRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){eI(o,d.scale,d.originX,d.originY),s.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),i._updateNodeAndLinkScale(),B3(n.getGraph(),ky(n)),i._lineDraw.updateLayout(),s.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var n=this._model,r=n.getData(),s=ky(n);r.eachItemGraphicEl(function(i,a){i&&i.setSymbolScale(s)})},e.prototype.updateLayout=function(n){B3(n.getGraph(),ky(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(On);function em(t){return"_EC_"+t}var nWe=function(){function t(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(e,n){e=e==null?""+n:""+e;var r=this._nodesMap;if(!r[em(e)]){var s=new Ff(e,n);return s.hostGraph=this,this.nodes.push(s),r[em(e)]=s,s}},t.prototype.getNodeByIndex=function(e){var n=this.data.getRawIndex(e);return this.nodes[n]},t.prototype.getNodeById=function(e){return this._nodesMap[em(e)]},t.prototype.addEdge=function(e,n,r){var s=this._nodesMap,i=this._edgesMap;if(hn(e)&&(e=this.nodes[e]),hn(n)&&(n=this.nodes[n]),e instanceof Ff||(e=s[em(e)]),n instanceof Ff||(n=s[em(n)]),!(!e||!n)){var a=e.id+"-"+n.id,o=new hie(e,n,r);return o.hostGraph=this,this._directed&&(e.outEdges.push(o),n.inEdges.push(o)),e.edges.push(o),e!==n&&n.edges.push(o),this.edges.push(o),i[a]=o,o}},t.prototype.getEdgeByIndex=function(e){var n=this.edgeData.getRawIndex(e);return this.edges[n]},t.prototype.getEdge=function(e,n){e instanceof Ff&&(e=e.id),n instanceof Ff&&(n=n.id);var r=this._edgesMap;return this._directed?r[e+"-"+n]:r[e+"-"+n]||r[n+"-"+e]},t.prototype.eachNode=function(e,n){for(var r=this.nodes,s=r.length,i=0;i<s;i++)r[i].dataIndex>=0&&e.call(n,r[i],i)},t.prototype.eachEdge=function(e,n){for(var r=this.edges,s=r.length,i=0;i<s;i++)r[i].dataIndex>=0&&r[i].node1.dataIndex>=0&&r[i].node2.dataIndex>=0&&e.call(n,r[i],i)},t.prototype.breadthFirstTraverse=function(e,n,r,s){if(n instanceof Ff||(n=this._nodesMap[em(n)]),!!n){for(var i=r==="out"?"outEdges":r==="in"?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!e.call(s,n,null))for(var o=[n];o.length;)for(var l=o.shift(),d=l[i],a=0;a<d.length;a++){var c=d[a],f=c.node1===l?c.node2:c.node1;if(!f.__visited){if(e.call(s,f,l))return;o.push(f),f.__visited=!0}}}},t.prototype.update=function(){for(var e=this.data,n=this.edgeData,r=this.nodes,s=this.edges,i=0,a=r.length;i<a;i++)r[i].dataIndex=-1;for(var i=0,a=e.count();i<a;i++)r[e.getRawIndex(i)].dataIndex=i;n.filterSelf(function(o){var l=s[n.getRawIndex(o)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var i=0,a=s.length;i<a;i++)s[i].dataIndex=-1;for(var i=0,a=n.count();i<a;i++)s[n.getRawIndex(i)].dataIndex=i},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,r=this.edges,s=0;s<n.length;s++)e.addNode(n[s].id,n[s].dataIndex);for(var s=0;s<r.length;s++){var i=r[s];e.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return e},t}(),Ff=function(){function t(e,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e==null?"":e,this.dataIndex=n==null?-1:n}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},n=0;n<this.edges.length;n++){var r=this.edges[n];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},t.prototype.getTrajectoryDataIndices=function(){for(var e=mt(),n=mt(),r=0;r<this.edges.length;r++){var s=this.edges[r];if(!(s.dataIndex<0)){e.set(s.dataIndex,!0);for(var i=[s.node1],a=[s.node2],o=0;o<i.length;){var l=i[o];o++,n.set(l.dataIndex,!0);for(var d=0;d<l.inEdges.length;d++)e.set(l.inEdges[d].dataIndex,!0),i.push(l.inEdges[d].node1)}for(o=0;o<a.length;){var c=a[o];o++,n.set(c.dataIndex,!0);for(var d=0;d<c.outEdges.length;d++)e.set(c.outEdges[d].dataIndex,!0),a.push(c.outEdges[d].node2)}}}return{edge:e.keys(),node:n.keys()}},t}(),hie=function(){function t(e,n,r){this.dataIndex=-1,this.node1=e,this.node2=n,this.dataIndex=r==null?-1:r}return t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var e=mt(),n=mt();e.set(this.dataIndex,!0);for(var r=[this.node1],s=[this.node2],i=0;i<r.length;){var a=r[i];i++,n.set(a.dataIndex,!0);for(var o=0;o<a.inEdges.length;o++)e.set(a.inEdges[o].dataIndex,!0),r.push(a.inEdges[o].node1)}for(i=0;i<s.length;){var l=s[i];i++,n.set(l.dataIndex,!0);for(var o=0;o<l.outEdges.length;o++)e.set(l.outEdges[o].dataIndex,!0),s.push(l.outEdges[o].node2)}return{edge:e.keys(),node:n.keys()}},t}();function mie(t,e){return{getValue:function(n){var r=this[t][e];return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,r)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,r){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}Gr(Ff,mie("hostGraph","data"));Gr(hie,mie("hostGraph","edgeData"));function gie(t,e,n,r,s){for(var i=new nWe(r),a=0;a<t.length;a++)i.addNode(xs(t[a].id,t[a].name,a),a);for(var o=[],l=[],d=0,a=0;a<e.length;a++){var c=e[a],f=c.source,p=c.target;i.addEdge(f,p,d)&&(l.push(c),o.push(xs(Qr(c.id,null),f+" > "+p)),d++)}var h=n.get("coordinateSystem"),m;if(h==="cartesian2d"||h==="polar")m=bd(t,n);else{var g=Rb.get(h),y=g?g.dimensions||[]:[];Xt(y,"value")<0&&y.concat(["value"]);var x=Ib(t,{coordDimensions:y,encodeDefine:n.getEncode()}).dimensions;m=new wi(x,n),m.initData(t)}var _=new wi(["value"],n);return _.initData(l,o),s&&s(m,_),Qse({mainData:m,struct:i,structAttr:"graph",datas:{node:m,edge:_},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}var rWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments);var r=this;function s(){return r._categoriesData}this.legendVisualProvider=new Bb(s,s),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},e.prototype.mergeOption=function(n){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(n){t.prototype.mergeDefaultAndTheme.apply(this,arguments),Xp(n,"edgeLabel",["show"])},e.prototype.getInitialData=function(n,r){var s=n.edges||n.links||[],i=n.data||n.nodes||[],a=this;if(i&&s){Uqe(this);var o=gie(i,s,this,!0,l);return de(o.edges,function(d){Hqe(d.node1,d.node2,this,d.dataIndex)},this),o.data}function l(d,c){d.wrapMethod("getItemModel",function(m){var g=a._categoriesModels,y=m.getShallow("category"),x=g[y];return x&&(x.parentModel=m.parentModel,m.parentModel=x),m});var f=Tn.prototype.getModel;function p(m,g){var y=f.call(this,m,g);return y.resolveParentPath=h,y}c.wrapMethod("getItemModel",function(m){return m.resolveParentPath=h,m.getModel=p,m});function h(m){if(m&&(m[0]==="label"||m[1]==="label")){var g=m.slice();return m[0]==="label"?g[0]="edgeLabel":m[1]==="label"&&(g[1]="edgeLabel"),g}return m}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(n,r,s){if(s==="edge"){var i=this.getData(),a=this.getDataParams(n,s),o=i.graph.getEdgeByIndex(n),l=i.getName(o.node1.dataIndex),d=i.getName(o.node2.dataIndex),c=[];return l!=null&&c.push(l),d!=null&&c.push(d),hs("nameValue",{name:c.join(" > "),value:a.value,noValue:a.value==null})}var f=zne({series:this,dataIndex:n,multipleSeries:r});return f},e.prototype._updateCategoriesData=function(){var n=We(this.option.categories||[],function(s){return s.value!=null?s:Ne({value:0},s)}),r=new wi(["value"],this);r.initData(n),this._categoriesData=r,this._categoriesModels=r.mapArray(function(s){return r.getItemModel(s)})},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Jn),sWe={type:"graphRoam",event:"graphRoam",update:"none"};function iWe(t){t.registerChartView(tWe),t.registerSeriesModel(rWe),t.registerProcessor(Nqe),t.registerVisual(jqe),t.registerVisual(Fqe),t.registerLayout(qqe),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,Gqe),t.registerLayout(Kqe),t.registerCoordinateSystem("graphView",{dimensions:Ub.dimensions,create:Qqe}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Vr),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Vr),t.registerAction(sWe,function(e,n,r){n.eachComponent({mainType:"series",query:e},function(s){var i=s.coordinateSystem,a=nI(i,e,void 0,r);s.setCenter&&s.setCenter(a.center),s.setZoom&&s.setZoom(a.zoom)})})}var aWe=function(){function t(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return t}(),oWe=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new aWe},e.prototype.buildPath=function(n,r){var s=Math.cos,i=Math.sin,a=r.r,o=r.width,l=r.angle,d=r.x-s(l)*o*(o>=a/3?1:2),c=r.y-i(l)*o*(o>=a/3?1:2);l=r.angle-Math.PI/2,n.moveTo(d,c),n.lineTo(r.x+s(l)*o,r.y+i(l)*o),n.lineTo(r.x+s(r.angle)*a,r.y+i(r.angle)*a),n.lineTo(r.x-s(l)*o,r.y-i(l)*o),n.lineTo(d,c)},e}(en);function lWe(t,e){var n=t.get("center"),r=e.getWidth(),s=e.getHeight(),i=Math.min(r,s),a=tt(n[0],e.getWidth()),o=tt(n[1],e.getHeight()),l=tt(t.get("radius"),i/2);return{cx:a,cy:o,r:l}}function $_(t,e){var n=t==null?"":t+"";return e&&(ot(e)?n=e.replace("{value}",n):bt(e)&&(n=e(t))),n}var uWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){this.group.removeAll();var i=n.get(["axisLine","lineStyle","color"]),a=lWe(n,s);this._renderMain(n,r,s,i,a),this._data=n.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(n,r,s,i,a){var o=this.group,l=n.get("clockwise"),d=-n.get("startAngle")/180*Math.PI,c=-n.get("endAngle")/180*Math.PI,f=n.getModel("axisLine"),p=f.get("roundCap"),h=p?Gk:Ri,m=f.get("show"),g=f.getModel("lineStyle"),y=g.get("width"),x=[d,c];i6(x,!l),d=x[0],c=x[1];for(var _=c-d,k=d,w=[],S=0;m&&S<i.length;S++){var C=Math.min(Math.max(i[S][0],0),1);c=d+_*C;var A=new h({shape:{startAngle:k,endAngle:c,cx:a.cx,cy:a.cy,clockwise:l,r0:a.r-y,r:a.r},silent:!0});A.setStyle({fill:i[S][1]}),A.setStyle(g.getLineStyle(["color","width"])),w.push(A),k=c}w.reverse(),de(w,function(E){return o.add(E)});var M=function(E){if(E<=0)return i[0][1];var P;for(P=0;P<i.length;P++)if(i[P][0]>=E&&(P===0?0:i[P-1][0])<E)return i[P][1];return i[P-1][1]};this._renderTicks(n,r,s,M,a,d,c,l,y),this._renderTitleAndDetail(n,r,s,M,a),this._renderAnchor(n,a),this._renderPointer(n,r,s,M,a,d,c,l,y)},e.prototype._renderTicks=function(n,r,s,i,a,o,l,d,c){for(var f=this.group,p=a.cx,h=a.cy,m=a.r,g=+n.get("min"),y=+n.get("max"),x=n.getModel("splitLine"),_=n.getModel("axisTick"),k=n.getModel("axisLabel"),w=n.get("splitNumber"),S=_.get("splitNumber"),C=tt(x.get("length"),m),A=tt(_.get("length"),m),M=o,E=(l-o)/w,P=E/S,I=x.getModel("lineStyle").getLineStyle(),F=_.getModel("lineStyle").getLineStyle(),L=x.get("distance"),z,N,q=0;q<=w;q++){if(z=Math.cos(M),N=Math.sin(M),x.get("show")){var V=L?L+c:c,O=new ls({shape:{x1:z*(m-V)+p,y1:N*(m-V)+h,x2:z*(m-C-V)+p,y2:N*(m-C-V)+h},style:I,silent:!0});I.stroke==="auto"&&O.setStyle({stroke:i(q/w)}),f.add(O)}if(k.get("show")){var V=k.get("distance")+L,X=$_(Mr(q/w*(y-g)+g),k.get("formatter")),j=i(q/w),U=z*(m-C-V)+p,G=N*(m-C-V)+h,ee=k.get("rotate"),ie=0;ee==="radial"?(ie=-M+2*Math.PI,ie>Math.PI/2&&(ie+=Math.PI)):ee==="tangential"?ie=-M-Math.PI/2:hn(ee)&&(ie=ee*Math.PI/180),ie===0?f.add(new dn({style:Xn(k,{text:X,x:U,y:G,verticalAlign:N<-.8?"top":N>.8?"bottom":"middle",align:z<-.4?"left":z>.4?"right":"center"},{inheritColor:j}),silent:!0})):f.add(new dn({style:Xn(k,{text:X,x:U,y:G,verticalAlign:"middle",align:"center"},{inheritColor:j}),silent:!0,originX:U,originY:G,rotation:ie}))}if(_.get("show")&&q!==w){var V=_.get("distance");V=V?V+c:c;for(var ne=0;ne<=S;ne++){z=Math.cos(M),N=Math.sin(M);var ce=new ls({shape:{x1:z*(m-V)+p,y1:N*(m-V)+h,x2:z*(m-A-V)+p,y2:N*(m-A-V)+h},silent:!0,style:F});F.stroke==="auto"&&ce.setStyle({stroke:i((q+ne/S)/w)}),f.add(ce),M+=P}M-=P}else M+=E}},e.prototype._renderPointer=function(n,r,s,i,a,o,l,d,c){var f=this.group,p=this._data,h=this._progressEls,m=[],g=n.get(["pointer","show"]),y=n.getModel("progress"),x=y.get("show"),_=n.getData(),k=_.mapDimension("value"),w=+n.get("min"),S=+n.get("max"),C=[w,S],A=[o,l];function M(P,I){var F=_.getItemModel(P),L=F.getModel("pointer"),z=tt(L.get("width"),a.r),N=tt(L.get("length"),a.r),q=n.get(["pointer","icon"]),V=L.get("offsetCenter"),O=tt(V[0],a.r),X=tt(V[1],a.r),j=L.get("keepAspect"),U;return q?U=Wr(q,O-z/2,X-N,z,N,null,j):U=new oWe({shape:{angle:-Math.PI/2,width:z,r:N,x:O,y:X}}),U.rotation=-(I+Math.PI/2),U.x=a.cx,U.y=a.cy,U}function E(P,I){var F=y.get("roundCap"),L=F?Gk:Ri,z=y.get("overlap"),N=z?y.get("width"):c/_.count(),q=z?a.r-N:a.r-(P+1)*N,V=z?a.r:a.r-P*N,O=new L({shape:{startAngle:o,endAngle:I,cx:a.cx,cy:a.cy,clockwise:d,r0:q,r:V}});return z&&(O.z2=An(_.get(k,P),[w,S],[100,0],!0)),O}(x||g)&&(_.diff(p).add(function(P){var I=_.get(k,P);if(g){var F=M(P,o);ur(F,{rotation:-((isNaN(+I)?A[0]:An(I,C,A,!0))+Math.PI/2)},n),f.add(F),_.setItemGraphicEl(P,F)}if(x){var L=E(P,o),z=y.get("clip");ur(L,{shape:{endAngle:An(I,C,A,z)}},n),f.add(L),KM(n.seriesIndex,_.dataType,P,L),m[P]=L}}).update(function(P,I){var F=_.get(k,P);if(g){var L=p.getItemGraphicEl(I),z=L?L.rotation:o,N=M(P,z);N.rotation=z,bn(N,{rotation:-((isNaN(+F)?A[0]:An(F,C,A,!0))+Math.PI/2)},n),f.add(N),_.setItemGraphicEl(P,N)}if(x){var q=h[I],V=q?q.shape.endAngle:o,O=E(P,V),X=y.get("clip");bn(O,{shape:{endAngle:An(F,C,A,X)}},n),f.add(O),KM(n.seriesIndex,_.dataType,P,O),m[P]=O}}).execute(),_.each(function(P){var I=_.getItemModel(P),F=I.getModel("emphasis"),L=F.get("focus"),z=F.get("blurScope"),N=F.get("disabled");if(g){var q=_.getItemGraphicEl(P),V=_.getItemVisual(P,"style"),O=V.fill;if(q instanceof Cs){var X=q.style;q.useStyle(Ne({image:X.image,x:X.x,y:X.y,width:X.width,height:X.height},V))}else q.useStyle(V),q.type!=="pointer"&&q.setColor(O);q.setStyle(I.getModel(["pointer","itemStyle"]).getItemStyle()),q.style.fill==="auto"&&q.setStyle("fill",i(An(_.get(k,P),C,[0,1],!0))),q.z2EmphasisLift=0,js(q,I),kr(q,L,z,N)}if(x){var j=m[P];j.useStyle(_.getItemVisual(P,"style")),j.setStyle(I.getModel(["progress","itemStyle"]).getItemStyle()),j.z2EmphasisLift=0,js(j,I),kr(j,L,z,N)}}),this._progressEls=m)},e.prototype._renderAnchor=function(n,r){var s=n.getModel("anchor"),i=s.get("show");if(i){var a=s.get("size"),o=s.get("icon"),l=s.get("offsetCenter"),d=s.get("keepAspect"),c=Wr(o,r.cx-a/2+tt(l[0],r.r),r.cy-a/2+tt(l[1],r.r),a,a,null,d);c.z2=s.get("showAbove")?1:0,c.setStyle(s.getModel("itemStyle").getItemStyle()),this.group.add(c)}},e.prototype._renderTitleAndDetail=function(n,r,s,i,a){var o=this,l=n.getData(),d=l.mapDimension("value"),c=+n.get("min"),f=+n.get("max"),p=new Tt,h=[],m=[],g=n.isAnimationEnabled(),y=n.get(["pointer","showAbove"]);l.diff(this._data).add(function(x){h[x]=new dn({silent:!0}),m[x]=new dn({silent:!0})}).update(function(x,_){h[x]=o._titleEls[_],m[x]=o._detailEls[_]}).execute(),l.each(function(x){var _=l.getItemModel(x),k=l.get(d,x),w=new Tt,S=i(An(k,[c,f],[0,1],!0)),C=_.getModel("title");if(C.get("show")){var A=C.get("offsetCenter"),M=a.cx+tt(A[0],a.r),E=a.cy+tt(A[1],a.r),P=h[x];P.attr({z2:y?0:2,style:Xn(C,{x:M,y:E,text:l.getName(x),align:"center",verticalAlign:"middle"},{inheritColor:S})}),w.add(P)}var I=_.getModel("detail");if(I.get("show")){var F=I.get("offsetCenter"),L=a.cx+tt(F[0],a.r),z=a.cy+tt(F[1],a.r),N=tt(I.get("width"),a.r),q=tt(I.get("height"),a.r),V=n.get(["progress","show"])?l.getItemVisual(x,"style").fill:S,P=m[x],O=I.get("formatter");P.attr({z2:y?0:2,style:Xn(I,{x:L,y:z,text:$_(k,O),width:isNaN(N)?null:N,height:isNaN(q)?null:q,align:"center",verticalAlign:"middle"},{inheritColor:V})}),Wte(P,{normal:I},k,function(j){return $_(j,O)}),g&&Gte(P,x,l,n,{getFormattedLabel:function(j,U,G,ee,ie,ne){return $_(ne?ne.interpolatedValue:k,O)}}),w.add(P)}p.add(w)}),this.group.add(p),this._titleEls=h,this._detailEls=m},e.type="gauge",e}(On),dWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="itemStyle",n}return e.prototype.getInitialData=function(n,r){return Xg(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(Jn);function cWe(t){t.registerChartView(uWe),t.registerSeriesModel(dWe)}var fWe=["itemStyle","opacity"],pWe=function(t){Te(e,t);function e(n,r){var s=t.call(this)||this,i=s,a=new Ii,o=new dn;return i.setTextContent(o),s.setTextGuideLine(a),s.updateData(n,r,!0),s}return e.prototype.updateData=function(n,r,s){var i=this,a=n.hostModel,o=n.getItemModel(r),l=n.getItemLayout(r),d=o.getModel("emphasis"),c=o.get(fWe);c=c==null?1:c,s||Bo(i),i.useStyle(n.getItemVisual(r,"style")),i.style.lineJoin="round",s?(i.setShape({points:l.points}),i.style.opacity=0,ur(i,{style:{opacity:c}},a,r)):bn(i,{style:{opacity:c},shape:{points:l.points}},a,r),js(i,o),this._updateLabel(n,r),kr(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(n,r){var s=this,i=this.getTextGuideLine(),a=s.getTextContent(),o=n.hostModel,l=n.getItemModel(r),d=n.getItemLayout(r),c=d.label,f=n.getItemVisual(r,"style"),p=f.fill;Fs(a,ps(l),{labelFetcher:n.hostModel,labelDataIndex:r,defaultOpacity:f.opacity,defaultText:n.getName(r)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}}),s.setTextConfig({local:!0,inside:!!c.inside,insideStroke:p,outsideFill:p});var h=c.linePoints;i.setShape({points:h}),s.textGuideLineConfig={anchor:h?new qt(h[0][0],h[0][1]):null},bn(a,{style:{x:c.x,y:c.y}},o,r),a.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),z6(s,U6(l),{stroke:p})},e}(Pi),hWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,s){var i=n.getData(),a=this._data,o=this.group;i.diff(a).add(function(l){var d=new pWe(i,l);i.setItemGraphicEl(l,d),o.add(d)}).update(function(l,d){var c=a.getItemGraphicEl(d);c.updateData(i,l),o.add(c),i.setItemGraphicEl(l,c)}).remove(function(l){var d=a.getItemGraphicEl(l);_1(d,n,l)}).execute(),this._data=i},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(On),mWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Bb(ct(this.getData,this),ct(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.getInitialData=function(n,r){return Xg(this,{coordDimensions:["value"],encodeDefaulter:Nt(w6,this)})},e.prototype._defaultLabelLine=function(n){Xp(n,"labelLine",["show"]);var r=n.labelLine,s=n.emphasis.labelLine;r.show=r.show&&n.label.show,s.show=s.show&&n.emphasis.label.show},e.prototype.getDataParams=function(n){var r=this.getData(),s=t.prototype.getDataParams.call(this,n),i=r.mapDimension("value"),a=r.getSum(i);return s.percent=a?+(r.get(i,n)/a*100).toFixed(2):0,s.$vars.push("percent"),s},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Jn);function gWe(t,e){return ts(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function vWe(t,e){for(var n=t.mapDimension("value"),r=t.mapArray(n,function(l){return l}),s=[],i=e==="ascending",a=0,o=t.count();a<o;a++)s[a]=a;return bt(e)?s.sort(e):e!=="none"&&s.sort(function(l,d){return i?r[l]-r[d]:r[d]-r[l]}),s}function yWe(t){var e=t.hostModel,n=e.get("orient");t.each(function(r){var s=t.getItemModel(r),i=s.getModel("label"),a=i.get("position"),o=s.getModel("labelLine"),l=t.getItemLayout(r),d=l.points,c=a==="inner"||a==="inside"||a==="center"||a==="insideLeft"||a==="insideRight",f,p,h,m;if(c)a==="insideLeft"?(p=(d[0][0]+d[3][0])/2+5,h=(d[0][1]+d[3][1])/2,f="left"):a==="insideRight"?(p=(d[1][0]+d[2][0])/2-5,h=(d[1][1]+d[2][1])/2,f="right"):(p=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,h=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,f="center"),m=[[p,h],[p,h]];else{var g=void 0,y=void 0,x=void 0,_=void 0,k=o.get("length");a==="left"?(g=(d[3][0]+d[0][0])/2,y=(d[3][1]+d[0][1])/2,x=g-k,p=x-5,f="right"):a==="right"?(g=(d[1][0]+d[2][0])/2,y=(d[1][1]+d[2][1])/2,x=g+k,p=x+5,f="left"):a==="top"?(g=(d[3][0]+d[0][0])/2,y=(d[3][1]+d[0][1])/2,_=y-k,h=_-5,f="center"):a==="bottom"?(g=(d[1][0]+d[2][0])/2,y=(d[1][1]+d[2][1])/2,_=y+k,h=_+5,f="center"):a==="rightTop"?(g=n==="horizontal"?d[3][0]:d[1][0],y=n==="horizontal"?d[3][1]:d[1][1],n==="horizontal"?(_=y-k,h=_-5,f="center"):(x=g+k,p=x+5,f="top")):a==="rightBottom"?(g=d[2][0],y=d[2][1],n==="horizontal"?(_=y+k,h=_+5,f="center"):(x=g+k,p=x+5,f="bottom")):a==="leftTop"?(g=d[0][0],y=n==="horizontal"?d[0][1]:d[1][1],n==="horizontal"?(_=y-k,h=_-5,f="center"):(x=g-k,p=x-5,f="right")):a==="leftBottom"?(g=n==="horizontal"?d[1][0]:d[3][0],y=n==="horizontal"?d[1][1]:d[2][1],n==="horizontal"?(_=y+k,h=_+5,f="center"):(x=g-k,p=x-5,f="right")):(g=(d[1][0]+d[2][0])/2,y=(d[1][1]+d[2][1])/2,n==="horizontal"?(_=y+k,h=_+5,f="center"):(x=g+k,p=x+5,f="left")),n==="horizontal"?(x=g,p=x):(_=y,h=_),m=[[g,y],[x,_]]}l.label={linePoints:m,x:p,y:h,verticalAlign:"middle",textAlign:f,inside:c}})}function bWe(t,e){t.eachSeriesByType("funnel",function(n){var r=n.getData(),s=r.mapDimension("value"),i=n.get("sort"),a=gWe(n,e),o=n.get("orient"),l=a.width,d=a.height,c=vWe(r,i),f=a.x,p=a.y,h=o==="horizontal"?[tt(n.get("minSize"),d),tt(n.get("maxSize"),d)]:[tt(n.get("minSize"),l),tt(n.get("maxSize"),l)],m=r.getDataExtent(s),g=n.get("min"),y=n.get("max");g==null&&(g=Math.min(m[0],0)),y==null&&(y=m[1]);var x=n.get("funnelAlign"),_=n.get("gap"),k=o==="horizontal"?l:d,w=(k-_*(r.count()-1))/r.count(),S=function(z,N){if(o==="horizontal"){var q=r.get(s,z)||0,V=An(q,[g,y],h,!0),O=void 0;switch(x){case"top":O=p;break;case"center":O=p+(d-V)/2;break;case"bottom":O=p+(d-V);break}return[[N,O],[N,O+V]]}var X=r.get(s,z)||0,j=An(X,[g,y],h,!0),U;switch(x){case"left":U=f;break;case"center":U=f+(l-j)/2;break;case"right":U=f+l-j;break}return[[U,N],[U+j,N]]};i==="ascending"&&(w=-w,_=-_,o==="horizontal"?f+=l:p+=d,c=c.reverse());for(var C=0;C<c.length;C++){var A=c[C],M=c[C+1],E=r.getItemModel(A);if(o==="horizontal"){var P=E.get(["itemStyle","width"]);P==null?P=w:(P=tt(P,l),i==="ascending"&&(P=-P));var I=S(A,f),F=S(M,f+P);f+=P+_,r.setItemLayout(A,{points:I.concat(F.slice().reverse())})}else{var L=E.get(["itemStyle","height"]);L==null?L=w:(L=tt(L,d),i==="ascending"&&(L=-L));var I=S(A,p),F=S(M,p+L);p+=L+_,r.setItemLayout(A,{points:I.concat(F.slice().reverse())})}}yWe(r)})}function xWe(t){t.registerChartView(hWe),t.registerSeriesModel(mWe),t.registerLayout(bWe),t.registerProcessor(Fb("funnel"))}var _We=.3,wWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._dataGroup=new Tt,n._initialized=!1,n}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(n,r,s,i){this._progressiveEls=null;var a=this._dataGroup,o=n.getData(),l=this._data,d=n.coordinateSystem,c=d.dimensions,f=fz(n);o.diff(l).add(p).update(h).remove(m).execute();function p(y){var x=cz(o,a,y,c,d);z3(x,o,y,f)}function h(y,x){var _=l.getItemGraphicEl(x),k=vie(o,y,c,d);o.setItemGraphicEl(y,_),bn(_,{shape:{points:k}},n,y),Bo(_),z3(_,o,y,f)}function m(y){var x=l.getItemGraphicEl(y);a.remove(x)}if(!this._initialized){this._initialized=!0;var g=kWe(d,n,function(){setTimeout(function(){a.removeClipPath()})});a.setClipPath(g)}this._data=o},e.prototype.incrementalPrepareRender=function(n,r,s){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(n,r,s){for(var i=r.getData(),a=r.coordinateSystem,o=a.dimensions,l=fz(r),d=this._progressiveEls=[],c=n.start;c<n.end;c++){var f=cz(i,this._dataGroup,c,o,a);f.incremental=!0,z3(f,i,c,l),d.push(f)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(On);function kWe(t,e,n){var r=t.model,s=t.getRect(),i=new on({shape:{x:s.x,y:s.y,width:s.width,height:s.height}}),a=r.get("layout")==="horizontal"?"width":"height";return i.setShape(a,0),ur(i,{shape:{width:s.width,height:s.height}},e,n),i}function vie(t,e,n,r){for(var s=[],i=0;i<n.length;i++){var a=n[i],o=t.get(t.mapDimension(a),e);SWe(o,r.getAxis(a).type)||s.push(r.dataToPoint(o,a))}return s}function cz(t,e,n,r,s){var i=vie(t,n,r,s),a=new Ii({shape:{points:i},z2:10});return e.add(a),t.setItemGraphicEl(n,a),a}function fz(t){var e=t.get("smooth",!0);return e===!0&&(e=_We),e=id(e),f1(e)&&(e=0),{smooth:e}}function z3(t,e,n,r){t.useStyle(e.getItemVisual(n,"style")),t.style.fill=null,t.setShape("smooth",r.smooth);var s=e.getItemModel(n),i=s.getModel("emphasis");js(t,s,"lineStyle"),kr(t,i.get("focus"),i.get("blurScope"),i.get("disabled"))}function SWe(t,e){return e==="category"?t==null:t==null||isNaN(t)}var CWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return e.prototype.getInitialData=function(n,r){return bd(null,this,{useEncodeDefaulter:ct(AWe,null,this)})},e.prototype.getRawIndicesByActiveState=function(n){var r=this.coordinateSystem,s=this.getData(),i=[];return r.eachActiveState(s,function(a,o){n===a&&i.push(s.getRawIndex(o))}),i},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Jn);function AWe(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var n={};return de(e.dimensions,function(r){var s=TWe(r);n[r]=s}),n}}function TWe(t){return+t.replace("dim","")}var $We=["lineStyle","opacity"],MWe={seriesType:"parallel",reset:function(t,e){var n=t.coordinateSystem,r={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(s,i){n.eachActiveState(i,function(a,o){var l=r[a];if(a==="normal"&&i.hasItemOption){var d=i.getItemModel(o).get($We,!0);d!=null&&(l=d)}var c=i.ensureUniqueItemVisual(o,"style");c.opacity=l},s.start,s.end)}}}};function EWe(t){DWe(t),RWe(t)}function DWe(t){if(!t.parallel){var e=!1;de(t.series,function(n){n&&n.type==="parallel"&&(e=!0)}),e&&(t.parallel=[{}])}}function RWe(t){var e=In(t.parallelAxis);de(e,function(n){if(wt(n)){var r=n.parallelIndex||0,s=In(t.parallel)[r];s&&s.parallelAxisDefault&&Ht(n,s.parallelAxisDefault,!1)}})}var PWe=5,IWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){this._model=n,this._api=s,this._handlers||(this._handlers={},de(OWe,function(i,a){s.getZr().on(a,this._handlers[a]=ct(i,this))},this)),Gg(this,"_throttledDispatchExpand",n.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(n,r){C1(this,"_throttledDispatchExpand"),de(this._handlers,function(s,i){r.getZr().off(i,s)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(n){this._dispatchExpand(n)},e.prototype._dispatchExpand=function(n){n&&this._api.dispatchAction(Ne({type:"parallelAxisExpand"},n))},e.type="parallel",e}(vr),OWe={mousedown:function(t){U3(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(U3(this,"click")&&e){var n=[t.offsetX,t.offsetY],r=Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2);if(r>PWe)return;var s=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);s.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:s.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!(this._mouseDownPoint||!U3(this,"mousemove"))){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),r=n.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:n.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function U3(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}var LWe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(n){var r=this.option;n&&Ht(r,n,!0),this._initDimensions()},e.prototype.contains=function(n,r){var s=n.get("parallelIndex");return s!=null&&r.getComponent("parallel",s)===this},e.prototype.setAxisExpand=function(n){de(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){n.hasOwnProperty(r)&&(this.option[r]=n[r])},this)},e.prototype._initDimensions=function(){var n=this.dimensions=[],r=this.parallelAxisIndex=[],s=Sn(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(i){return(i.get("parallelIndex")||0)===this.componentIndex},this);de(s,function(i){n.push("dim"+i.get("dim")),r.push(i.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(nn),VWe=function(t){Te(e,t);function e(n,r,s,i,a){var o=t.call(this,n,r,s)||this;return o.type=i||"value",o.axisIndex=a,o}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(Ho);function wh(t,e,n,r,s,i){t=t||0;var a=n[1]-n[0];if(s!=null&&(s=tm(s,[0,a])),i!=null&&(i=Math.max(i,s!=null?s:0)),r==="all"){var o=Math.abs(e[1]-e[0]);o=tm(o,[0,a]),s=i=tm(o,[s,i]),r=0}e[0]=tm(e[0],n),e[1]=tm(e[1],n);var l=H3(e,r);e[r]+=t;var d=s||0,c=n.slice();l.sign<0?c[0]+=d:c[1]-=d,e[r]=tm(e[r],c);var f;return f=H3(e,r),s!=null&&(f.sign!==l.sign||f.span<s)&&(e[1-r]=e[r]+l.sign*s),f=H3(e,r),i!=null&&f.span>i&&(e[1-r]=e[r]+f.sign*i),e}function H3(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function tm(t,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,t))}var q3=de,yie=Math.min,bie=Math.max,pz=Math.floor,NWe=Math.ceil,hz=Mr,jWe=Math.PI,FWe=function(){function t(e,n,r){this.type="parallel",this._axesMap=mt(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,n,r)}return t.prototype._init=function(e,n,r){var s=e.dimensions,i=e.parallelAxisIndex;q3(s,function(a,o){var l=i[o],d=n.getComponent("parallelAxis",l),c=this._axesMap.set(a,new VWe(a,mA(d),[0,0],d.get("type"),l)),f=c.type==="category";c.onBand=f&&d.get("boundaryGap"),c.inverse=d.get("inverse"),d.axis=c,c.model=d,c.coordinateSystem=d.coordinateSystem=this},this)},t.prototype.update=function(e,n){this._updateAxesFromSeries(this._model,e)},t.prototype.containPoint=function(e){var n=this._makeLayoutInfo(),r=n.axisBase,s=n.layoutBase,i=n.pixelDimIndex,a=e[1-i],o=e[i];return a>=r&&a<=r+n.axisLength&&o>=s&&o<=s+n.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(e,n){n.eachSeries(function(r){if(e.contains(r,n)){var s=r.getData();q3(this.dimensions,function(i){var a=this._axesMap.get(i);a.scale.unionExtentFromData(s,s.mapDimension(i)),xg(a.scale,a.model)},this)}},this)},t.prototype.resize=function(e,n){this._rect=ts(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var e=this._model,n=this._rect,r=["x","y"],s=["width","height"],i=e.get("layout"),a=i==="horizontal"?0:1,o=n[s[a]],l=[0,o],d=this.dimensions.length,c=M_(e.get("axisExpandWidth"),l),f=M_(e.get("axisExpandCount")||0,[0,d]),p=e.get("axisExpandable")&&d>3&&d>f&&f>1&&c>0&&o>0,h=e.get("axisExpandWindow"),m;if(h)m=M_(h[1]-h[0],l),h[1]=h[0]+m;else{m=M_(c*(f-1),l);var g=e.get("axisExpandCenter")||pz(d/2);h=[c*g-m/2],h[1]=h[0]+m}var y=(o-m)/(d-f);y<3&&(y=0);var x=[pz(hz(h[0]/c,1))+1,NWe(hz(h[1]/c,1))-1],_=y/c*h[0];return{layout:i,pixelDimIndex:a,layoutBase:n[r[a]],layoutLength:o,axisBase:n[r[1-a]],axisLength:n[s[1-a]],axisExpandable:p,axisExpandWidth:c,axisCollapseWidth:y,axisExpandWindow:h,axisCount:d,winInnerIndices:x,axisExpandWindow0Pos:_}},t.prototype._layoutAxes=function(){var e=this._rect,n=this._axesMap,r=this.dimensions,s=this._makeLayoutInfo(),i=s.layout;n.each(function(a){var o=[0,s.axisLength],l=a.inverse?1:0;a.setExtent(o[l],o[1-l])}),q3(r,function(a,o){var l=(s.axisExpandable?zWe:BWe)(o,s),d={horizontal:{x:l.position,y:s.axisLength},vertical:{x:0,y:l.position}},c={horizontal:jWe/2,vertical:0},f=[d[i].x+e.x,d[i].y+e.y],p=c[i],h=va();mh(h,h,p),zl(h,h,f),this._axesLayout[a]={position:f,rotation:p,transform:h,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(e){return this._axesMap.get(e)},t.prototype.dataToPoint=function(e,n){return this.axisCoordToPoint(this._axesMap.get(n).dataToCoord(e),n)},t.prototype.eachActiveState=function(e,n,r,s){r==null&&(r=0),s==null&&(s=e.count());var i=this._axesMap,a=this.dimensions,o=[],l=[];de(a,function(y){o.push(e.mapDimension(y)),l.push(i.get(y).model)});for(var d=this.hasAxisBrushed(),c=r;c<s;c++){var f=void 0;if(!d)f="normal";else{f="active";for(var p=e.getValues(o,c),h=0,m=a.length;h<m;h++){var g=l[h].getActiveState(p[h]);if(g==="inactive"){f="inactive";break}}}n(f,c)}},t.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,n=this._axesMap,r=!1,s=0,i=e.length;s<i;s++)n.get(e[s]).model.getActiveState()!=="normal"&&(r=!0);return r},t.prototype.axisCoordToPoint=function(e,n){var r=this._axesLayout[n];return Do([e,0],r.transform)},t.prototype.getAxisLayout=function(e){return kt(this._axesLayout[e])},t.prototype.getSlidedAxisExpandWindow=function(e){var n=this._makeLayoutInfo(),r=n.pixelDimIndex,s=n.axisExpandWindow.slice(),i=s[1]-s[0],a=[0,n.axisExpandWidth*(n.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:s};var o=e[r]-n.layoutBase-n.axisExpandWindow0Pos,l,d="slide",c=n.axisCollapseWidth,f=this._model.get("axisExpandSlideTriggerArea"),p=f[0]!=null;if(c)p&&c&&o<i*f[0]?(d="jump",l=o-i*f[2]):p&&c&&o>i*(1-f[0])?(d="jump",l=o-i*(1-f[2])):(l=o-i*f[1])>=0&&(l=o-i*(1-f[1]))<=0&&(l=0),l*=n.axisExpandWidth/c,l?wh(l,s,a,"all"):d="none";else{var h=s[1]-s[0],m=a[1]*o/h;s=[bie(0,m-h/2)],s[1]=yie(a[1],s[0]+h),s[0]=s[1]-h}return{axisExpandWindow:s,behavior:d}},t}();function M_(t,e){return yie(bie(t,e[0]),e[1])}function BWe(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}}function zWe(t,e){var n=e.layoutLength,r=e.axisExpandWidth,s=e.axisCount,i=e.axisCollapseWidth,a=e.winInnerIndices,o,l=i,d=!1,c;return t<a[0]?(o=t*i,c=i):t<=a[1]?(o=e.axisExpandWindow0Pos+t*r-e.axisExpandWindow[0],l=r,d=!0):(o=n-(s-1-t)*i,c=i),{position:o,axisNameAvailableWidth:l,axisLabelShow:d,nameTruncateMaxWidth:c}}function UWe(t,e){var n=[];return t.eachComponent("parallel",function(r,s){var i=new FWe(r,t,e);i.name="parallel_"+s,i.resize(r,e),r.coordinateSystem=i,i.model=r,n.push(i)}),t.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var s=r.getReferringComponents("parallel",Br).models[0];r.coordinateSystem=s.coordinateSystem}}),n}var HWe={create:UWe},jE=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.activeIntervals=[],n}return e.prototype.getAreaSelectStyle=function(){return Zp([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(n){var r=this.activeIntervals=kt(n);if(r)for(var s=r.length-1;s>=0;s--)Ga(r[s])},e.prototype.getActiveState=function(n){var r=this.activeIntervals;if(!r.length)return"normal";if(n==null||isNaN(+n))return"inactive";if(r.length===1){var s=r[0];if(s[0]<=n&&n<=s[1])return"active"}else for(var i=0,a=r.length;i<a;i++)if(r[i][0]<=n&&n<=r[i][1])return"active";return"inactive"},e}(nn);Gr(jE,Ob);var th=!0,V1=Math.min,kg=Math.max,qWe=Math.pow,WWe=1e4,GWe=6,YWe=6,mz="globalPan",KWe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},XWe={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},gz={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},QWe=0,fI=function(t){Te(e,t);function e(n){var r=t.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=n,r.group=new Tt,r._uid="brushController_"+QWe++,de(sGe,function(s,i){this._handlers[i]=ct(s,this)},r),r}return e.prototype.enableBrush=function(n){return this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},e.prototype._doEnableBrush=function(n){var r=this._zr;this._enableGlobalPan||BUe(r,mz,this._uid),de(this._handlers,function(s,i){r.on(i,s)}),this._brushType=n.brushType,this._brushOption=Ht(kt(gz),n,!0)},e.prototype._doDisableBrush=function(){var n=this._zr;zUe(n,mz,this._uid),de(this._handlers,function(r,s){n.off(s,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(n){if(n&&n.length){var r=this._panels={};de(n,function(s){r[s.panelId]=kt(s)})}else this._panels=null;return this},e.prototype.mount=function(n){n=n||{},this._enableGlobalPan=n.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(n){n=We(n,function(p){return Ht(kt(gz),p,!0)});var r="\0-brush-index-",s=this._covers,i=this._covers=[],a=this,o=this._creatingCover;return new ld(s,n,d,l).add(c).update(c).remove(f).execute(),this;function l(p,h){return(p.id!=null?p.id:r+h)+"-"+p.brushType}function d(p,h){return l(p.__brushOption,h)}function c(p,h){var m=n[p];if(h!=null&&s[h]===o)i[p]=s[h];else{var g=i[p]=h!=null?(s[h].__brushOption=m,s[h]):_ie(a,xie(a,m));pI(a,g)}}function f(p){s[p]!==o&&a.group.remove(s[p])}},e.prototype.unmount=function(){return this.enableBrush(!1),FE(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(co);function xie(t,e){var n=_A[e.brushType].createCover(t,e);return n.__brushOption=e,kie(n,e),t.group.add(n),n}function _ie(t,e){var n=hI(e);return n.endCreating&&(n.endCreating(t,e),kie(e,e.__brushOption)),e}function wie(t,e){var n=e.__brushOption;hI(e).updateCoverShape(t,e,n.range,n)}function kie(t,e){var n=e.z;n==null&&(n=WWe),t.traverse(function(r){r.z=n,r.z2=n})}function pI(t,e){hI(e).updateCommon(t,e),wie(t,e)}function hI(t){return _A[t.__brushOption.brushType]}function mI(t,e,n){var r=t._panels;if(!r)return th;var s,i=t._transform;return de(r,function(a){a.isTargetByCursor(e,n,i)&&(s=a)}),s}function Sie(t,e){var n=t._panels;if(!n)return th;var r=e.__brushOption.panelId;return r!=null?n[r]:th}function FE(t){var e=t._covers,n=e.length;return de(e,function(r){t.group.remove(r)},t),e.length=0,!!n}function nh(t,e){var n=We(t._covers,function(r){var s=r.__brushOption,i=kt(s.range);return{brushType:s.brushType,panelId:s.panelId,range:i}});t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function ZWe(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],r=e[0],s=n[0]-r[0],i=n[1]-r[1],a=qWe(s*s+i*i,.5);return a>GWe}function Cie(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function Aie(t,e,n,r){var s=new Tt;return s.add(new on({name:"main",style:gI(n),silent:!0,draggable:!0,cursor:"move",drift:Nt(vz,t,e,s,["n","s","w","e"]),ondragend:Nt(nh,e,{isEnd:!0})})),de(r,function(i){s.add(new on({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Nt(vz,t,e,s,i),ondragend:Nt(nh,e,{isEnd:!0})}))}),s}function Tie(t,e,n,r){var s=r.brushStyle.lineWidth||0,i=kg(s,YWe),a=n[0][0],o=n[1][0],l=a-s/2,d=o-s/2,c=n[0][1],f=n[1][1],p=c-i+s/2,h=f-i+s/2,m=c-a,g=f-o,y=m+s,x=g+s;pu(t,e,"main",a,o,m,g),r.transformable&&(pu(t,e,"w",l,d,i,x),pu(t,e,"e",p,d,i,x),pu(t,e,"n",l,d,y,i),pu(t,e,"s",l,h,y,i),pu(t,e,"nw",l,d,i,i),pu(t,e,"ne",p,d,i,i),pu(t,e,"sw",l,h,i,i),pu(t,e,"se",p,h,i,i))}function BE(t,e){var n=e.__brushOption,r=n.transformable,s=e.childAt(0);s.useStyle(gI(n)),s.attr({silent:!r,cursor:r?"move":"default"}),de([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var a=e.childOfName(i.join("")),o=i.length===1?zE(t,i[0]):eGe(t,i);a&&a.attr({silent:!r,invisible:!r,cursor:r?XWe[o]+"-resize":null})})}function pu(t,e,n,r,s,i,a){var o=e.childOfName(n);o&&o.setShape(nGe(vI(t,e,[[r,s],[r+i,s+a]])))}function gI(t){return _t({strokeNoScale:!0},t.brushStyle)}function $ie(t,e,n,r){var s=[V1(t,n),V1(e,r)],i=[kg(t,n),kg(e,r)];return[[s[0],i[0]],[s[1],i[1]]]}function JWe(t){return Ip(t.group)}function zE(t,e){var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},s=JC(n[e],JWe(t));return r[s]}function eGe(t,e){var n=[zE(t,e[0]),zE(t,e[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function vz(t,e,n,r,s,i){var a=n.__brushOption,o=t.toRectRange(a.range),l=Mie(e,s,i);de(r,function(d){var c=KWe[d];o[c[0]][c[1]]+=l[c[0]]}),a.range=t.fromRectRange($ie(o[0][0],o[1][0],o[0][1],o[1][1])),pI(e,n),nh(e,{isEnd:!1})}function tGe(t,e,n,r){var s=e.__brushOption.range,i=Mie(t,n,r);de(s,function(a){a[0]+=i[0],a[1]+=i[1]}),pI(t,e),nh(t,{isEnd:!1})}function Mie(t,e,n){var r=t.group,s=r.transformCoordToLocal(e,n),i=r.transformCoordToLocal(0,0);return[s[0]-i[0],s[1]-i[1]]}function vI(t,e,n){var r=Sie(t,e);return r&&r!==th?r.clipPath(n,t._transform):kt(n)}function nGe(t){var e=V1(t[0][0],t[1][0]),n=V1(t[0][1],t[1][1]),r=kg(t[0][0],t[1][0]),s=kg(t[0][1],t[1][1]);return{x:e,y:n,width:r-e,height:s-n}}function rGe(t,e,n){if(!(!t._brushType||iGe(t,e.offsetX,e.offsetY))){var r=t._zr,s=t._covers,i=mI(t,e,n);if(!t._dragging)for(var a=0;a<s.length;a++){var o=s[a].__brushOption;if(i&&(i===th||o.panelId===i.panelId)&&_A[o.brushType].contain(s[a],n[0],n[1]))return}i&&r.setCursorStyle("crosshair")}}function UE(t){var e=t.event;e.preventDefault&&e.preventDefault()}function HE(t,e,n){return t.childOfName("main").contain(e,n)}function Eie(t,e,n,r){var s=t._creatingCover,i=t._creatingPanel,a=t._brushOption,o;if(t._track.push(n.slice()),ZWe(t)||s){if(i&&!s){a.brushMode==="single"&&FE(t);var l=kt(a);l.brushType=yz(l.brushType,i),l.panelId=i===th?null:i.panelId,s=t._creatingCover=xie(t,l),t._covers.push(s)}if(s){var d=_A[yz(t._brushType,i)],c=s.__brushOption;c.range=d.getCreatingRange(vI(t,s,t._track)),r&&(_ie(t,s),d.updateCommon(t,s)),wie(t,s),o={isEnd:r}}}else r&&a.brushMode==="single"&&a.removeOnClick&&mI(t,e,n)&&FE(t)&&(o={isEnd:r,removeOnClick:!0});return o}function yz(t,e){return t==="auto"?e.defaultBrushType:t}var sGe={mousedown:function(t){if(this._dragging)bz(this,t);else if(!t.target||!t.target.draggable){UE(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var n=this._creatingPanel=mI(this,t,e);n&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,r=this.group.transformCoordToLocal(e,n);if(rGe(this,t,r),this._dragging){UE(t);var s=Eie(this,t,r,!1);s&&nh(this,s)}},mouseup:function(t){bz(this,t)}};function bz(t,e){if(t._dragging){UE(e);var n=e.offsetX,r=e.offsetY,s=t.group.transformCoordToLocal(n,r),i=Eie(t,e,s,!0);t._dragging=!1,t._track=[],t._creatingCover=null,i&&nh(t,i)}}function iGe(t,e,n){var r=t._zr;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}var _A={lineX:xz(0),lineY:xz(1),rect:{createCover:function(t,e){function n(r){return r}return Aie({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=Cie(t);return $ie(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,r){Tie(t,e,n,r)},updateCommon:BE,contain:HE},polygon:{createCover:function(t,e){var n=new Tt;return n.add(new Ii({name:"main",style:gI(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new Pi({name:"main",draggable:!0,drift:Nt(tGe,t,e),ondragend:Nt(nh,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,r){e.childAt(0).setShape({points:vI(t,e,n)})},updateCommon:BE,contain:HE}};function xz(t){return{createCover:function(e,n){return Aie({toRectRange:function(r){var s=[r,[0,100]];return t&&s.reverse(),s},fromRectRange:function(r){return r[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=Cie(e),r=V1(n[0][t],n[1][t]),s=kg(n[0][t],n[1][t]);return[r,s]},updateCoverShape:function(e,n,r,s){var i,a=Sie(e,n);if(a!==th&&a.getLinearBrushOtherExtent)i=a.getLinearBrushOtherExtent(t);else{var o=e._zr;i=[0,[o.getWidth(),o.getHeight()][1-t]]}var l=[r,i];t&&l.reverse(),Tie(e,n,l,s)},updateCommon:BE,contain:HE}}function Die(t){return t=yI(t),function(e){return Ute(e,t)}}function Rie(t,e){return t=yI(t),function(n){var r=e!=null?e:n,s=r?t.width:t.height,i=r?t.x:t.y;return[i,i+(s||0)]}}function Pie(t,e,n){var r=yI(t);return function(s,i){return r.contain(i[0],i[1])&&!vA(s,e,n)}}function yI(t){return Gt.create(t)}var aGe=["axisLine","axisTickLabel","axisName"],oGe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){t.prototype.init.apply(this,arguments),(this._brushController=new fI(r.getZr())).on("brush",ct(this._onBrush,this))},e.prototype.render=function(n,r,s,i){if(!lGe(n,r,i)){this.axisModel=n,this.api=s,this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new Tt,this.group.add(this._axisGroup),!!n.get("show")){var o=dGe(n,r),l=o.coordinateSystem,d=n.getAreaSelectStyle(),c=d.width,f=n.axis.dim,p=l.getAxisLayout(f),h=Ne({strokeContainThreshold:c},p),m=new ki(n,h);de(aGe,m.add,m),this._axisGroup.add(m.getGroup()),this._refreshBrushController(h,d,n,o,c,s),Eb(a,this._axisGroup,n)}}},e.prototype._refreshBrushController=function(n,r,s,i,a,o){var l=s.axis.getExtent(),d=l[1]-l[0],c=Math.min(30,Math.abs(d)*.1),f=Gt.create({x:l[0],y:-a/2,width:d,height:a});f.x-=c,f.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:n.rotation,x:n.position[0],y:n.position[1]}).setPanels([{panelId:"pl",clipPath:Die(f),isTargetByCursor:Pie(f,o,i),getLinearBrushOtherExtent:Rie(f,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(uGe(s))},e.prototype._onBrush=function(n){var r=n.areas,s=this.axisModel,i=s.axis,a=We(r,function(o){return[i.coordToData(o.range[0],!0),i.coordToData(o.range[1],!0)]});(!s.option.realtime===n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:s.id,intervals:a})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(vr);function lGe(t,e,n){return n&&n.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}function uGe(t){var e=t.axis;return We(t.activeIntervals,function(n){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(n[0],!0),e.dataToCoord(n[1],!0)]}})}function dGe(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}var cGe={type:"axisAreaSelect",event:"axisAreaSelected"};function fGe(t){t.registerAction(cGe,function(e,n){n.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),t.registerAction("parallelAxisExpand",function(e,n){n.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var pGe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Iie(t){t.registerComponentView(IWe),t.registerComponentModel(LWe),t.registerCoordinateSystem("parallel",HWe),t.registerPreprocessor(EWe),t.registerComponentModel(jE),t.registerComponentView(oGe),wg(t,"parallel",jE,pGe),fGe(t)}function hGe(t){Qt(Iie),t.registerChartView(wWe),t.registerSeriesModel(CWe),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,MWe)}var mGe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),gGe=function(t){Te(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new mGe},e.prototype.buildPath=function(n,r){var s=r.extent;n.moveTo(r.x1,r.y1),n.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(n.lineTo(r.x2+s,r.y2),n.bezierCurveTo(r.cpx2+s,r.cpy2,r.cpx1+s,r.cpy1,r.x1+s,r.y1)):(n.lineTo(r.x2,r.y2+s),n.bezierCurveTo(r.cpx2,r.cpy2+s,r.cpx1,r.cpy1+s,r.x1,r.y1+s)),n.closePath()},e.prototype.highlight=function(){ad(this)},e.prototype.downplay=function(){od(this)},e}(en),vGe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._focusAdjacencyDisabled=!1,n}return e.prototype.render=function(n,r,s){var i=this,a=n.getGraph(),o=this.group,l=n.layoutInfo,d=l.width,c=l.height,f=n.getData(),p=n.getData("edge"),h=n.get("orient");this._model=n,o.removeAll(),o.x=l.x,o.y=l.y,a.eachEdge(function(m){var g=new gGe,y=Et(g);y.dataIndex=m.dataIndex,y.seriesIndex=n.seriesIndex,y.dataType="edge";var x=m.getModel(),_=x.getModel("lineStyle"),k=_.get("curveness"),w=m.node1.getLayout(),S=m.node1.getModel(),C=S.get("localX"),A=S.get("localY"),M=m.node2.getLayout(),E=m.node2.getModel(),P=E.get("localX"),I=E.get("localY"),F=m.getLayout(),L,z,N,q,V,O,X,j;g.shape.extent=Math.max(1,F.dy),g.shape.orient=h,h==="vertical"?(L=(C!=null?C*d:w.x)+F.sy,z=(A!=null?A*c:w.y)+w.dy,N=(P!=null?P*d:M.x)+F.ty,q=I!=null?I*c:M.y,V=L,O=z*(1-k)+q*k,X=N,j=z*k+q*(1-k)):(L=(C!=null?C*d:w.x)+w.dx,z=(A!=null?A*c:w.y)+F.sy,N=P!=null?P*d:M.x,q=(I!=null?I*c:M.y)+F.ty,V=L*(1-k)+N*k,O=z,X=L*k+N*(1-k),j=q),g.setShape({x1:L,y1:z,x2:N,y2:q,cpx1:V,cpy1:O,cpx2:X,cpy2:j}),g.useStyle(_.getItemStyle()),_z(g.style,h,m);var U=""+x.get("value"),G=ps(x,"edgeLabel");Fs(g,G,{labelFetcher:{getFormattedLabel:function(ne,ce,oe,re,te,K){return n.getFormattedLabel(ne,ce,"edge",re,Dl(te,G.normal&&G.normal.get("formatter"),U),K)}},labelDataIndex:m.dataIndex,defaultText:U}),g.setTextConfig({position:"inside"});var ee=x.getModel("emphasis");js(g,x,"lineStyle",function(ne){var ce=ne.getItemStyle();return _z(ce,h,m),ce}),o.add(g),p.setItemGraphicEl(m.dataIndex,g);var ie=ee.get("focus");kr(g,ie==="adjacency"?m.getAdjacentDataIndices():ie==="trajectory"?m.getTrajectoryDataIndices():ie,ee.get("blurScope"),ee.get("disabled"))}),a.eachNode(function(m){var g=m.getLayout(),y=m.getModel(),x=y.get("localX"),_=y.get("localY"),k=y.getModel("emphasis"),w=y.get(["itemStyle","borderRadius"])||0,S=new on({shape:{x:x!=null?x*d:g.x,y:_!=null?_*c:g.y,width:g.dx,height:g.dy,r:w},style:y.getModel("itemStyle").getItemStyle(),z2:10});Fs(S,ps(y),{labelFetcher:{getFormattedLabel:function(A,M){return n.getFormattedLabel(A,M,"node")}},labelDataIndex:m.dataIndex,defaultText:m.id}),S.disableLabelAnimation=!0,S.setStyle("fill",m.getVisual("color")),S.setStyle("decal",m.getVisual("style").decal),js(S,y),o.add(S),f.setItemGraphicEl(m.dataIndex,S),Et(S).dataType="node";var C=k.get("focus");kr(S,C==="adjacency"?m.getAdjacentDataIndices():C==="trajectory"?m.getTrajectoryDataIndices():C,k.get("blurScope"),k.get("disabled"))}),f.eachItemGraphicEl(function(m,g){var y=f.getItemModel(g);y.get("draggable")&&(m.drift=function(x,_){i._focusAdjacencyDisabled=!0,this.shape.x+=x,this.shape.y+=_,this.dirty(),s.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:f.getRawIndex(g),localX:this.shape.x/d,localY:this.shape.y/c})},m.ondragend=function(){i._focusAdjacencyDisabled=!1},m.draggable=!0,m.cursor="move")}),!this._data&&n.isAnimationEnabled()&&o.setClipPath(yGe(o.getBoundingRect(),n,function(){o.removeClipPath()})),this._data=n.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(On);function _z(t,e,n){switch(t.fill){case"source":t.fill=n.node1.getVisual("color"),t.decal=n.node1.getVisual("style").decal;break;case"target":t.fill=n.node2.getVisual("color"),t.decal=n.node2.getVisual("style").decal;break;case"gradient":var r=n.node1.getVisual("color"),s=n.node2.getVisual("color");ot(r)&&ot(s)&&(t.fill=new Mb(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:s,offset:1}]))}}function yGe(t,e,n){var r=new on({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return ur(r,{shape:{width:t.width+20}},e,n),r}var bGe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){var s=n.edges||n.links||[],i=n.data||n.nodes||[],a=n.levels||[];this.levelModels=[];for(var o=this.levelModels,l=0;l<a.length;l++)a[l].depth!=null&&a[l].depth>=0&&(o[a[l].depth]=new Tn(a[l],this,r));var d=gie(i,s,this,!0,c);return d.data;function c(f,p){f.wrapMethod("getItemModel",function(h,m){var g=h.parentModel,y=g.getData().getItemLayout(m);if(y){var x=y.depth,_=g.levelModels[x];_&&(h.parentModel=_)}return h}),p.wrapMethod("getItemModel",function(h,m){var g=h.parentModel,y=g.getGraph().getEdgeByIndex(m),x=y.node1.getLayout();if(x){var _=x.depth,k=g.levelModels[_];k&&(h.parentModel=k)}return h})}},e.prototype.setNodePosition=function(n,r){var s=this.option.data||this.option.nodes,i=s[n];i.localX=r[0],i.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(n,r,s){function i(h){return isNaN(h)||h==null}if(s==="edge"){var a=this.getDataParams(n,s),o=a.data,l=a.value,d=o.source+" -- "+o.target;return hs("nameValue",{name:d,value:l,noValue:i(l)})}else{var c=this.getGraph().getNodeByIndex(n),f=c.getLayout().value,p=this.getDataParams(n,s).data.name;return hs("nameValue",{name:p!=null?p+"":null,value:f,noValue:i(f)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(n,r){var s=t.prototype.getDataParams.call(this,n,r);if(s.value==null&&r==="node"){var i=this.getGraph().getNodeByIndex(n),a=i.getLayout().value;s.value=a}return s},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Jn);function xGe(t,e){t.eachSeriesByType("sankey",function(n){var r=n.get("nodeWidth"),s=n.get("nodeGap"),i=_Ge(n,e);n.layoutInfo=i;var a=i.width,o=i.height,l=n.getGraph(),d=l.nodes,c=l.edges;kGe(d);var f=Sn(d,function(g){return g.getLayout().value===0}),p=f.length!==0?0:n.get("layoutIterations"),h=n.get("orient"),m=n.get("nodeAlign");wGe(d,c,r,s,a,o,p,h,m)})}function _Ge(t,e){return ts(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function wGe(t,e,n,r,s,i,a,o,l){SGe(t,e,n,s,i,o,l),$Ge(t,e,i,s,r,a,o),VGe(t,o)}function kGe(t){de(t,function(e){var n=Cc(e.outEdges,Jk),r=Cc(e.inEdges,Jk),s=e.getValue()||0,i=Math.max(n,r,s);e.setLayout({value:i},!0)})}function SGe(t,e,n,r,s,i,a){for(var o=[],l=[],d=[],c=[],f=0,p=0;p<e.length;p++)o[p]=1;for(var p=0;p<t.length;p++)l[p]=t[p].inEdges.length,l[p]===0&&d.push(t[p]);for(var h=-1;d.length;){for(var m=0;m<d.length;m++){var g=d[m],y=g.hostGraph.data.getRawDataItem(g.dataIndex),x=y.depth!=null&&y.depth>=0;x&&y.depth>h&&(h=y.depth),g.setLayout({depth:x?y.depth:f},!0),i==="vertical"?g.setLayout({dy:n},!0):g.setLayout({dx:n},!0);for(var _=0;_<g.outEdges.length;_++){var k=g.outEdges[_],w=e.indexOf(k);o[w]=0;var S=k.node2,C=t.indexOf(S);--l[C]===0&&c.indexOf(S)<0&&c.push(S)}}++f,d=c,c=[]}for(var p=0;p<o.length;p++)if(o[p]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var A=h>f-1?h:f-1;a&&a!=="left"&&CGe(t,a,i,A);var M=i==="vertical"?(s-n)/A:(r-n)/A;TGe(t,M,i)}function Oie(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return e.depth!=null&&e.depth>=0}function CGe(t,e,n,r){if(e==="right"){for(var s=[],i=t,a=0;i.length;){for(var o=0;o<i.length;o++){var l=i[o];l.setLayout({skNodeHeight:a},!0);for(var d=0;d<l.inEdges.length;d++){var c=l.inEdges[d];s.indexOf(c.node1)<0&&s.push(c.node1)}}i=s,s=[],++a}de(t,function(f){Oie(f)||f.setLayout({depth:Math.max(0,r-f.getLayout().skNodeHeight)},!0)})}else e==="justify"&&AGe(t,r)}function AGe(t,e){de(t,function(n){!Oie(n)&&!n.outEdges.length&&n.setLayout({depth:e},!0)})}function TGe(t,e,n){de(t,function(r){var s=r.getLayout().depth*e;n==="vertical"?r.setLayout({y:s},!0):r.setLayout({x:s},!0)})}function $Ge(t,e,n,r,s,i,a){var o=MGe(t,a);EGe(o,e,n,r,s,a),W3(o,s,n,r,a);for(var l=1;i>0;i--)l*=.99,DGe(o,l,a),W3(o,s,n,r,a),LGe(o,l,a),W3(o,s,n,r,a)}function MGe(t,e){var n=[],r=e==="vertical"?"y":"x",s=qM(t,function(i){return i.getLayout()[r]});return s.keys.sort(function(i,a){return i-a}),de(s.keys,function(i){n.push(s.buckets.get(i))}),n}function EGe(t,e,n,r,s,i){var a=1/0;de(t,function(o){var l=o.length,d=0;de(o,function(f){d+=f.getLayout().value});var c=i==="vertical"?(r-(l-1)*s)/d:(n-(l-1)*s)/d;c<a&&(a=c)}),de(t,function(o){de(o,function(l,d){var c=l.getLayout().value*a;i==="vertical"?(l.setLayout({x:d},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:d},!0),l.setLayout({dy:c},!0))})}),de(e,function(o){var l=+o.getValue()*a;o.setLayout({dy:l},!0)})}function W3(t,e,n,r,s){var i=s==="vertical"?"x":"y";de(t,function(a){a.sort(function(g,y){return g.getLayout()[i]-y.getLayout()[i]});for(var o,l,d,c=0,f=a.length,p=s==="vertical"?"dx":"dy",h=0;h<f;h++)l=a[h],d=c-l.getLayout()[i],d>0&&(o=l.getLayout()[i]+d,s==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0)),c=l.getLayout()[i]+l.getLayout()[p]+e;var m=s==="vertical"?r:n;if(d=c-e-m,d>0){o=l.getLayout()[i]-d,s==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0),c=o;for(var h=f-2;h>=0;--h)l=a[h],d=l.getLayout()[i]+l.getLayout()[p]+e-c,d>0&&(o=l.getLayout()[i]-d,s==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0)),c=l.getLayout()[i]}})}function DGe(t,e,n){de(t.slice().reverse(),function(r){de(r,function(s){if(s.outEdges.length){var i=Cc(s.outEdges,RGe,n)/Cc(s.outEdges,Jk);if(isNaN(i)){var a=s.outEdges.length;i=a?Cc(s.outEdges,PGe,n)/a:0}if(n==="vertical"){var o=s.getLayout().x+(i-Fc(s,n))*e;s.setLayout({x:o},!0)}else{var l=s.getLayout().y+(i-Fc(s,n))*e;s.setLayout({y:l},!0)}}})})}function RGe(t,e){return Fc(t.node2,e)*t.getValue()}function PGe(t,e){return Fc(t.node2,e)}function IGe(t,e){return Fc(t.node1,e)*t.getValue()}function OGe(t,e){return Fc(t.node1,e)}function Fc(t,e){return e==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function Jk(t){return t.getValue()}function Cc(t,e,n){for(var r=0,s=t.length,i=-1;++i<s;){var a=+e(t[i],n);isNaN(a)||(r+=a)}return r}function LGe(t,e,n){de(t,function(r){de(r,function(s){if(s.inEdges.length){var i=Cc(s.inEdges,IGe,n)/Cc(s.inEdges,Jk);if(isNaN(i)){var a=s.inEdges.length;i=a?Cc(s.inEdges,OGe,n)/a:0}if(n==="vertical"){var o=s.getLayout().x+(i-Fc(s,n))*e;s.setLayout({x:o},!0)}else{var l=s.getLayout().y+(i-Fc(s,n))*e;s.setLayout({y:l},!0)}}})})}function VGe(t,e){var n=e==="vertical"?"x":"y";de(t,function(r){r.outEdges.sort(function(s,i){return s.node2.getLayout()[n]-i.node2.getLayout()[n]}),r.inEdges.sort(function(s,i){return s.node1.getLayout()[n]-i.node1.getLayout()[n]})}),de(t,function(r){var s=0,i=0;de(r.outEdges,function(a){a.setLayout({sy:s},!0),s+=a.getLayout().dy}),de(r.inEdges,function(a){a.setLayout({ty:i},!0),i+=a.getLayout().dy})})}function NGe(t){t.eachSeriesByType("sankey",function(e){var n=e.getGraph(),r=n.nodes,s=n.edges;if(r.length){var i=1/0,a=-1/0;de(r,function(o){var l=o.getLayout().value;l<i&&(i=l),l>a&&(a=l)}),de(r,function(o){var l=new cs({type:"color",mappingMethod:"linear",dataExtent:[i,a],visual:e.get("color")}),d=l.mapValueToVisual(o.getLayout().value),c=o.getModel().get(["itemStyle","color"]);c!=null?(o.setVisual("color",c),o.setVisual("style",{fill:c})):(o.setVisual("color",d),o.setVisual("style",{fill:d}))})}s.length&&de(s,function(o){var l=o.getModel().get("lineStyle");o.setVisual("style",l)})})}function jGe(t){t.registerChartView(vGe),t.registerSeriesModel(bGe),t.registerLayout(xGe),t.registerVisual(NGe),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,n){n.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var Lie=function(){function t(){}return t.prototype._hasEncodeRule=function(e){var n=this.getEncode();return n&&n.get(e)!=null},t.prototype.getInitialData=function(e,n){var r,s=n.getComponent("xAxis",this.get("xAxisIndex")),i=n.getComponent("yAxis",this.get("yAxisIndex")),a=s.get("type"),o=i.get("type"),l;a==="category"?(e.layout="horizontal",r=s.getOrdinalMeta(),l=!this._hasEncodeRule("x")):o==="category"?(e.layout="vertical",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var d=["x","y"],c=e.layout==="horizontal"?0:1,f=this._baseAxisDim=d[c],p=d[1-c],h=[s,i],m=h[c].get("type"),g=h[1-c].get("type"),y=e.data;if(y&&l){var x=[];de(y,function(w,S){var C;He(w)?(C=w.slice(),w.unshift(S)):He(w.value)?(C=Ne({},w),C.value=C.value.slice(),w.value.unshift(S)):C=w,x.push(C)}),e.data=x}var _=this.defaultValueDimensions,k=[{name:f,type:zk(m),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:zk(g),dimsDef:_.slice()}];return Xg(this,{coordDimensions:k,dimensionsCount:_.length+1,encodeDefaulter:Nt(mne,k,this)})},t.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},t}(),Vie=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(Jn);Gr(Vie,Lie,!0);var FGe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){var i=n.getData(),a=this.group,o=this._data;this._data||a.removeAll();var l=n.get("layout")==="horizontal"?1:0;i.diff(o).add(function(d){if(i.hasValue(d)){var c=i.getItemLayout(d),f=wz(c,i,d,l,!0);i.setItemGraphicEl(d,f),a.add(f)}}).update(function(d,c){var f=o.getItemGraphicEl(c);if(!i.hasValue(d)){a.remove(f);return}var p=i.getItemLayout(d);f?(Bo(f),Nie(p,f,i,d)):f=wz(p,i,d,l),a.add(f),i.setItemGraphicEl(d,f)}).remove(function(d){var c=o.getItemGraphicEl(d);c&&a.remove(c)}).execute(),this._data=i},e.prototype.remove=function(n){var r=this.group,s=this._data;this._data=null,s&&s.eachItemGraphicEl(function(i){i&&r.remove(i)})},e.type="boxplot",e}(On),BGe=function(){function t(){}return t}(),zGe=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new BGe},e.prototype.buildPath=function(n,r){var s=r.points,i=0;for(n.moveTo(s[i][0],s[i][1]),i++;i<4;i++)n.lineTo(s[i][0],s[i][1]);for(n.closePath();i<s.length;i++)n.moveTo(s[i][0],s[i][1]),i++,n.lineTo(s[i][0],s[i][1])},e}(en);function wz(t,e,n,r,s){var i=t.ends,a=new zGe({shape:{points:s?UGe(i,r,t):i}});return Nie(t,a,e,n,s),a}function Nie(t,e,n,r,s){var i=n.hostModel,a=vh[s?"initProps":"updateProps"];a(e,{shape:{points:t.ends}},i,r),e.useStyle(n.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var o=n.getItemModel(r),l=o.getModel("emphasis");js(e,o),kr(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function UGe(t,e,n){return We(t,function(r){return r=r.slice(),r[e]=n.initBaseline,r})}var y0=de;function HGe(t){var e=qGe(t);y0(e,function(n){var r=n.seriesModels;r.length&&(WGe(n),y0(r,function(s,i){GGe(s,n.boxOffsetList[i],n.boxWidthList[i])}))})}function qGe(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(r){var s=r.getBaseAxis(),i=Xt(n,s);i<0&&(i=n.length,n[i]=s,e[i]={axis:s,seriesModels:[]}),e[i].seriesModels.push(r)}),e}function WGe(t){var e=t.axis,n=t.seriesModels,r=n.length,s=t.boxWidthList=[],i=t.boxOffsetList=[],a=[],o;if(e.type==="category")o=e.getBandWidth();else{var l=0;y0(n,function(m){l=Math.max(l,m.getData().count())});var d=e.getExtent();o=Math.abs(d[1]-d[0])/l}y0(n,function(m){var g=m.get("boxWidth");He(g)||(g=[g,g]),a.push([tt(g[0],o)||0,tt(g[1],o)||0])});var c=o*.8-2,f=c/r*.3,p=(c-f*(r-1))/r,h=p/2-c/2;y0(n,function(m,g){i.push(h),h+=f+p,s.push(Math.min(Math.max(p,a[g][0]),a[g][1]))})}function GGe(t,e,n){var r=t.coordinateSystem,s=t.getData(),i=n/2,a=t.get("layout")==="horizontal"?0:1,o=1-a,l=["x","y"],d=s.mapDimension(l[a]),c=s.mapDimensionsAll(l[o]);if(d==null||c.length<5)return;for(var f=0;f<s.count();f++){var p=s.get(d,f),h=k(p,c[2],f),m=k(p,c[0],f),g=k(p,c[1],f),y=k(p,c[3],f),x=k(p,c[4],f),_=[];w(_,g,!1),w(_,y,!0),_.push(m,g,x,y),S(_,m),S(_,x),S(_,h),s.setItemLayout(f,{initBaseline:h[o],ends:_})}function k(C,A,M){var E=s.get(A,M),P=[];P[a]=C,P[o]=E;var I;return isNaN(C)||isNaN(E)?I=[NaN,NaN]:(I=r.dataToPoint(P),I[a]+=e),I}function w(C,A,M){var E=A.slice(),P=A.slice();E[a]+=i,P[a]-=i,M?C.push(E,P):C.push(P,E)}function S(C,A){var M=A.slice(),E=A.slice();M[a]-=i,E[a]+=i,C.push(M,E)}}function YGe(t,e){e=e||{};for(var n=[],r=[],s=e.boundIQR,i=s==="none"||s===0,a=0;a<t.length;a++){var o=Ga(t[a].slice()),l=wT(o,.25),d=wT(o,.5),c=wT(o,.75),f=o[0],p=o[o.length-1],h=(s==null?1.5:s)*(c-l),m=i?f:Math.max(f,l-h),g=i?p:Math.min(p,c+h),y=e.itemNameFormatter,x=bt(y)?y({value:a}):ot(y)?y.replace("{value}",a+""):a+"";n.push([x,m,l,d,c,g]);for(var _=0;_<o.length;_++){var k=o[_];if(k<m||k>g){var w=[x,k];r.push(w)}}}return{boxData:n,outliers:r}}var KGe={type:"echarts:boxplot",transform:function(e){var n=e.upstream;if(n.sourceFormat!==ii){var r="";kn(r)}var s=YGe(n.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:s.boxData},{data:s.outliers}]}};function XGe(t){t.registerSeriesModel(Vie),t.registerChartView(FGe),t.registerLayout(HGe),t.registerTransform(KGe)}var QGe=["itemStyle","borderColor"],ZGe=["itemStyle","borderColor0"],JGe=["itemStyle","borderColorDoji"],eYe=["itemStyle","color"],tYe=["itemStyle","color0"];function bI(t,e){return e.get(t>0?eYe:tYe)}function xI(t,e){return e.get(t===0?JGe:t>0?QGe:ZGe)}var nYe={seriesType:"candlestick",plan:Wg(),performRawSeries:!0,reset:function(t,e){if(!e.isSeriesFiltered(t)){var n=t.pipelineContext.large;return!n&&{progress:function(r,s){for(var i;(i=r.next())!=null;){var a=s.getItemModel(i),o=s.getItemLayout(i).sign,l=a.getItemStyle();l.fill=bI(o,a),l.stroke=xI(o,a)||l.fill;var d=s.ensureUniqueItemVisual(i,"style");Ne(d,l)}}}}}},rYe=["color","borderColor"],sYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(n),this._isLargeDraw?this._renderLarge(n):this._renderNormal(n)},e.prototype.incrementalPrepareRender=function(n,r,s){this._clear(),this._updateDrawMode(n)},e.prototype.incrementalRender=function(n,r,s,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(n,r):this._incrementalRenderNormal(n,r)},e.prototype.eachRendered=function(n){Xc(this._progressiveEls||this.group,n)},e.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(n){var r=n.getData(),s=this._data,i=this.group,a=r.getLayout("isSimpleBox"),o=n.get("clip",!0),l=n.coordinateSystem,d=l.getArea&&l.getArea();this._data||i.removeAll(),r.diff(s).add(function(c){if(r.hasValue(c)){var f=r.getItemLayout(c);if(o&&kz(d,f))return;var p=G3(f,c,!0);ur(p,{shape:{points:f.ends}},n,c),Y3(p,r,c,a),i.add(p),r.setItemGraphicEl(c,p)}}).update(function(c,f){var p=s.getItemGraphicEl(f);if(!r.hasValue(c)){i.remove(p);return}var h=r.getItemLayout(c);if(o&&kz(d,h)){i.remove(p);return}p?(bn(p,{shape:{points:h.ends}},n,c),Bo(p)):p=G3(h),Y3(p,r,c,a),i.add(p),r.setItemGraphicEl(c,p)}).remove(function(c){var f=s.getItemGraphicEl(c);f&&i.remove(f)}).execute(),this._data=r},e.prototype._renderLarge=function(n){this._clear(),Sz(n,this.group);var r=n.get("clip",!0)?Nb(n.coordinateSystem,!1,n):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(n,r){for(var s=r.getData(),i=s.getLayout("isSimpleBox"),a;(a=n.next())!=null;){var o=s.getItemLayout(a),l=G3(o);Y3(l,s,a,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(n,r){Sz(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(n){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(On),iYe=function(){function t(){}return t}(),aYe=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new iYe},e.prototype.buildPath=function(n,r){var s=r.points;this.__simpleBox?(n.moveTo(s[4][0],s[4][1]),n.lineTo(s[6][0],s[6][1])):(n.moveTo(s[0][0],s[0][1]),n.lineTo(s[1][0],s[1][1]),n.lineTo(s[2][0],s[2][1]),n.lineTo(s[3][0],s[3][1]),n.closePath(),n.moveTo(s[4][0],s[4][1]),n.lineTo(s[5][0],s[5][1]),n.moveTo(s[6][0],s[6][1]),n.lineTo(s[7][0],s[7][1]))},e}(en);function G3(t,e,n){var r=t.ends;return new aYe({shape:{points:n?oYe(r,t):r},z2:100})}function kz(t,e){for(var n=!0,r=0;r<e.ends.length;r++)if(t.contain(e.ends[r][0],e.ends[r][1])){n=!1;break}return n}function Y3(t,e,n,r){var s=e.getItemModel(n);t.useStyle(e.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.__simpleBox=r,js(t,s);var i=e.getItemLayout(n).sign;de(t.states,function(o,l){var d=s.getModel(l),c=bI(i,d),f=xI(i,d)||c,p=o.style||(o.style={});c&&(p.fill=c),f&&(p.stroke=f)});var a=s.getModel("emphasis");kr(t,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function oYe(t,e){return We(t,function(n){return n=n.slice(),n[1]=e.initBaseline,n})}var lYe=function(){function t(){}return t}(),K3=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new lYe},e.prototype.buildPath=function(n,r){for(var s=r.points,i=0;i<s.length;)if(this.__sign===s[i++]){var a=s[i++];n.moveTo(a,s[i++]),n.lineTo(a,s[i++])}else i+=3},e}(en);function Sz(t,e,n,r){var s=t.getData(),i=s.getLayout("largePoints"),a=new K3({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(a);var o=new K3({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(o);var l=new K3({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(l),X3(1,a,t),X3(-1,o,t),X3(0,l,t),r&&(a.incremental=!0,o.incremental=!0),n&&n.push(a,o)}function X3(t,e,n,r){var s=xI(t,n)||bI(t,n),i=n.getModel("itemStyle").getItemStyle(rYe);e.useStyle(i),e.style.fill=null,e.style.stroke=s}var jie=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(n,r,s){var i=r.getItemLayout(n);return i&&s.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Jn);Gr(jie,Lie,!0);function uYe(t){!t||!He(t.series)||de(t.series,function(e){wt(e)&&e.type==="k"&&(e.type="candlestick")})}var dYe={seriesType:"candlestick",plan:Wg(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),r=cYe(t,n),s=0,i=1,a=["x","y"],o=n.getDimensionIndex(n.mapDimension(a[s])),l=We(n.mapDimensionsAll(a[i]),n.getDimensionIndex,n),d=l[0],c=l[1],f=l[2],p=l[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),o<0||l.length<4)return;return{progress:t.pipelineContext.large?m:h};function h(g,y){for(var x,_=y.getStore();(x=g.next())!=null;){var k=_.get(o,x),w=_.get(d,x),S=_.get(c,x),C=_.get(f,x),A=_.get(p,x),M=Math.min(w,S),E=Math.max(w,S),P=V(M,k),I=V(E,k),F=V(C,k),L=V(A,k),z=[];O(z,I,0),O(z,P,1),z.push(j(L),j(I),j(F),j(P));var N=y.getItemModel(x),q=!!N.get(["itemStyle","borderColorDoji"]);y.setItemLayout(x,{sign:Cz(_,x,w,S,c,q),initBaseline:w>S?I[i]:P[i],ends:z,brushRect:X(C,A,k)})}function V(U,G){var ee=[];return ee[s]=G,ee[i]=U,isNaN(G)||isNaN(U)?[NaN,NaN]:e.dataToPoint(ee)}function O(U,G,ee){var ie=G.slice(),ne=G.slice();ie[s]=Ow(ie[s]+r/2,1,!1),ne[s]=Ow(ne[s]-r/2,1,!0),ee?U.push(ie,ne):U.push(ne,ie)}function X(U,G,ee){var ie=V(U,ee),ne=V(G,ee);return ie[s]-=r/2,ne[s]-=r/2,{x:ie[0],y:ie[1],width:r,height:ne[1]-ie[1]}}function j(U){return U[s]=Ow(U[s],1),U}}function m(g,y){for(var x=Cl(g.count*4),_=0,k,w=[],S=[],C,A=y.getStore(),M=!!t.get(["itemStyle","borderColorDoji"]);(C=g.next())!=null;){var E=A.get(o,C),P=A.get(d,C),I=A.get(c,C),F=A.get(f,C),L=A.get(p,C);if(isNaN(E)||isNaN(F)||isNaN(L)){x[_++]=NaN,_+=3;continue}x[_++]=Cz(A,C,P,I,c,M),w[s]=E,w[i]=F,k=e.dataToPoint(w,null,S),x[_++]=k?k[0]:NaN,x[_++]=k?k[1]:NaN,w[i]=L,k=e.dataToPoint(w,null,S),x[_++]=k?k[1]:NaN}y.setLayout("largePoints",x)}}};function Cz(t,e,n,r,s,i){var a;return n>r?a=-1:n<r?a=1:a=i?0:e>0?t.get(s,e-1)<=r?1:-1:1,a}function cYe(t,e){var n=t.getBaseAxis(),r,s=n.type==="category"?n.getBandWidth():(r=n.getExtent(),Math.abs(r[1]-r[0])/e.count()),i=tt(Ot(t.get("barMaxWidth"),s),s),a=tt(Ot(t.get("barMinWidth"),1),s),o=t.get("barWidth");return o!=null?tt(o,s):Math.max(Math.min(s/2,i),a)}function fYe(t){t.registerChartView(sYe),t.registerSeriesModel(jie),t.registerPreprocessor(uYe),t.registerVisual(nYe),t.registerLayout(dYe)}function Az(t,e){var n=e.rippleEffectColor||e.color;t.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?n:null,fill:e.brushType==="fill"?n:null}})})}var pYe=function(t){Te(e,t);function e(n,r){var s=t.call(this)||this,i=new Lb(n,r),a=new Tt;return s.add(i),s.add(a),s.updateData(n,r),s}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(n){for(var r=n.symbolType,s=n.color,i=n.rippleNumber,a=this.childAt(1),o=0;o<i;o++){var l=Wr(r,-1,-1,2,2,s);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-o/i*n.period+n.effectOffset;l.animate("",!0).when(n.period,{scaleX:n.rippleScale/2,scaleY:n.rippleScale/2}).delay(d).start(),l.animateStyle(!0).when(n.period,{opacity:0}).delay(d).start(),a.add(l)}Az(a,n)},e.prototype.updateEffectAnimation=function(n){for(var r=this._effectCfg,s=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],a=0;a<i.length;a++){var o=i[a];if(r[o]!==n[o]){this.stopEffectAnimation(),this.startEffectAnimation(n);return}}Az(s,n)},e.prototype.highlight=function(){ad(this)},e.prototype.downplay=function(){od(this)},e.prototype.getSymbolType=function(){var n=this.childAt(0);return n&&n.getSymbolType()},e.prototype.updateData=function(n,r){var s=this,i=n.hostModel;this.childAt(0).updateData(n,r);var a=this.childAt(1),o=n.getItemModel(r),l=n.getItemVisual(r,"symbol"),d=Yg(n.getItemVisual(r,"symbolSize")),c=n.getItemVisual(r,"style"),f=c&&c.fill,p=o.getModel("emphasis");a.setScale(d),a.traverse(function(y){y.setStyle("fill",f)});var h=yh(n.getItemVisual(r,"symbolOffset"),d);h&&(a.x=h[0],a.y=h[1]);var m=n.getItemVisual(r,"symbolRotate");a.rotation=(m||0)*Math.PI/180||0;var g={};g.showEffectOn=i.get("showEffectOn"),g.rippleScale=o.get(["rippleEffect","scale"]),g.brushType=o.get(["rippleEffect","brushType"]),g.period=o.get(["rippleEffect","period"])*1e3,g.effectOffset=r/n.count(),g.z=i.getShallow("z")||0,g.zlevel=i.getShallow("zlevel")||0,g.symbolType=l,g.color=f,g.rippleEffectColor=o.get(["rippleEffect","color"]),g.rippleNumber=o.get(["rippleEffect","number"]),g.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(g):this.startEffectAnimation(g),this._effectCfg=g):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(y){y==="emphasis"?g.showEffectOn!=="render"&&s.startEffectAnimation(g):y==="normal"&&g.showEffectOn!=="render"&&s.stopEffectAnimation()}),this._effectCfg=g,kr(this,p.get("focus"),p.get("blurScope"),p.get("disabled"))},e.prototype.fadeOut=function(n){n&&n()},e}(Tt),hYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){this._symbolDraw=new Vb(pYe)},e.prototype.render=function(n,r,s){var i=n.getData(),a=this._symbolDraw;a.updateData(i,{clipShape:this._getClipShape(n)}),this.group.add(a.group)},e.prototype._getClipShape=function(n){var r=n.coordinateSystem,s=r&&r.getArea&&r.getArea();return n.get("clip",!0)?s:null},e.prototype.updateTransform=function(n,r,s){var i=n.getData();this.group.dirty();var a=jb("").reset(n,r,s);a.progress&&a.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(n){var r=n.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=FLe(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(On),mYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n,r){return bd(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(n,r,s){return s.point(r.getItemLayout(n))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(Jn);function gYe(t){t.registerChartView(hYe),t.registerSeriesModel(mYe),t.registerLayout(jb("effectScatter"))}var Fie=function(t){Te(e,t);function e(n,r,s){var i=t.call(this)||this;return i.add(i.createLine(n,r,s)),i._updateEffectSymbol(n,r),i}return e.prototype.createLine=function(n,r,s){return new dI(n,r,s)},e.prototype._updateEffectSymbol=function(n,r){var s=n.getItemModel(r),i=s.getModel("effect"),a=i.get("symbolSize"),o=i.get("symbol");He(a)||(a=[a,a]);var l=n.getItemVisual(r,"style"),d=i.get("color")||l&&l.stroke,c=this.childAt(1);this._symbolType!==o&&(this.remove(c),c=Wr(o,-.5,-.5,1,1,d),c.z2=100,c.culling=!0,this.add(c)),c&&(c.setStyle("shadowColor",d),c.setStyle(i.getItemStyle(["color"])),c.scaleX=a[0],c.scaleY=a[1],c.setColor(d),this._symbolType=o,this._symbolScale=a,this._updateEffectAnimation(n,i,r))},e.prototype._updateEffectAnimation=function(n,r,s){var i=this.childAt(1);if(i){var a=n.getItemLayout(s),o=r.get("period")*1e3,l=r.get("loop"),d=r.get("roundTrip"),c=r.get("constantSpeed"),f=xs(r.get("delay"),function(h){return h/n.count()*o/3});if(i.ignore=!0,this._updateAnimationPoints(i,a),c>0&&(o=this._getLineLength(i)/c*1e3),o!==this._period||l!==this._loop||d!==this._roundTrip){i.stopAnimation();var p=void 0;bt(f)?p=f(s):p=f,i.__t>0&&(p=-o*i.__t),this._animateSymbol(i,o,p,l,d)}this._period=o,this._loop=l,this._roundTrip=d}},e.prototype._animateSymbol=function(n,r,s,i,a){if(r>0){n.__t=0;var o=this,l=n.animate("",i).when(a?r*2:r,{__t:a?2:1}).delay(s).during(function(){o._updateSymbolPosition(n)});i||l.done(function(){o.remove(n)}),l.start()}},e.prototype._getLineLength=function(n){return sc(n.__p1,n.__cp1)+sc(n.__cp1,n.__p2)},e.prototype._updateAnimationPoints=function(n,r){n.__p1=r[0],n.__p2=r[1],n.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(n,r,s){this.childAt(0).updateData(n,r,s),this._updateEffectSymbol(n,r)},e.prototype._updateSymbolPosition=function(n){var r=n.__p1,s=n.__p2,i=n.__cp1,a=n.__t<1?n.__t:2-n.__t,o=[n.x,n.y],l=o.slice(),d=gs,c=EM;o[0]=d(r[0],i[0],s[0],a),o[1]=d(r[1],i[1],s[1],a);var f=n.__t<1?c(r[0],i[0],s[0],a):c(s[0],i[0],r[0],1-a),p=n.__t<1?c(r[1],i[1],s[1],a):c(s[1],i[1],r[1],1-a);n.rotation=-Math.atan2(p,f)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(n.__lastT!==void 0&&n.__lastT<n.__t?(n.scaleY=sc(l,o)*1.05,a===1&&(o[0]=l[0]+(o[0]-l[0])/2,o[1]=l[1]+(o[1]-l[1])/2)):n.__lastT===1?n.scaleY=2*sc(r,o):n.scaleY=this._symbolScale[1]),n.__lastT=n.__t,n.ignore=!1,n.x=o[0],n.y=o[1]},e.prototype.updateLayout=function(n,r){this.childAt(0).updateLayout(n,r);var s=n.getItemModel(r).getModel("effect");this._updateEffectAnimation(n,s,r)},e}(Tt),Bie=function(t){Te(e,t);function e(n,r,s){var i=t.call(this)||this;return i._createPolyline(n,r,s),i}return e.prototype._createPolyline=function(n,r,s){var i=n.getItemLayout(r),a=new Ii({shape:{points:i}});this.add(a),this._updateCommonStl(n,r,s)},e.prototype.updateData=function(n,r,s){var i=n.hostModel,a=this.childAt(0),o={shape:{points:n.getItemLayout(r)}};bn(a,o,i,r),this._updateCommonStl(n,r,s)},e.prototype._updateCommonStl=function(n,r,s){var i=this.childAt(0),a=n.getItemModel(r),o=s&&s.emphasisLineStyle,l=s&&s.focus,d=s&&s.blurScope,c=s&&s.emphasisDisabled;if(!s||n.hasItemOption){var f=a.getModel("emphasis");o=f.getModel("lineStyle").getLineStyle(),c=f.get("disabled"),l=f.get("focus"),d=f.get("blurScope")}i.useStyle(n.getItemVisual(r,"style")),i.style.fill=null,i.style.strokeNoScale=!0;var p=i.ensureState("emphasis");p.style=o,kr(this,l,d,c)},e.prototype.updateLayout=function(n,r){var s=this.childAt(0);s.setShape("points",n.getItemLayout(r))},e}(Tt),vYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._lastFrame=0,n._lastFramePercent=0,n}return e.prototype.createLine=function(n,r,s){return new Bie(n,r,s)},e.prototype._updateAnimationPoints=function(n,r){this._points=r;for(var s=[0],i=0,a=1;a<r.length;a++){var o=r[a-1],l=r[a];i+=sc(o,l),s.push(i)}if(i===0){this._length=0;return}for(var a=0;a<s.length;a++)s[a]/=i;this._offsets=s,this._length=i},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(n){var r=n.__t<1?n.__t:2-n.__t,s=this._points,i=this._offsets,a=s.length;if(i){var o=this._lastFrame,l;if(r<this._lastFramePercent){var d=Math.min(o+1,a-1);for(l=d;l>=0&&!(i[l]<=r);l--);l=Math.min(l,a-2)}else{for(l=o;l<a&&!(i[l]>r);l++);l=Math.min(l-1,a-2)}var c=(r-i[l])/(i[l+1]-i[l]),f=s[l],p=s[l+1];n.x=f[0]*(1-c)+c*p[0],n.y=f[1]*(1-c)+c*p[1];var h=n.__t<1?p[0]-f[0]:f[0]-p[0],m=n.__t<1?p[1]-f[1]:f[1]-p[1];n.rotation=-Math.atan2(m,h)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,n.ignore=!1}},e}(Fie),yYe=function(){function t(){this.polyline=!1,this.curveness=0,this.segs=[]}return t}(),bYe=function(t){Te(e,t);function e(n){var r=t.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new yYe},e.prototype.buildPath=function(n,r){var s=r.segs,i=r.curveness,a;if(r.polyline)for(a=this._off;a<s.length;){var o=s[a++];if(o>0){n.moveTo(s[a++],s[a++]);for(var l=1;l<o;l++)n.lineTo(s[a++],s[a++])}}else for(a=this._off;a<s.length;){var d=s[a++],c=s[a++],f=s[a++],p=s[a++];if(n.moveTo(d,c),i>0){var h=(d+f)/2-(c-p)*i,m=(c+p)/2-(f-d)*i;n.quadraticCurveTo(h,m,f,p)}else n.lineTo(f,p)}this.incremental&&(this._off=a,this.notClear=!0)},e.prototype.findDataIndex=function(n,r){var s=this.shape,i=s.segs,a=s.curveness,o=this.style.lineWidth;if(s.polyline)for(var l=0,d=0;d<i.length;){var c=i[d++];if(c>0)for(var f=i[d++],p=i[d++],h=1;h<c;h++){var m=i[d++],g=i[d++];if(Yd(f,p,m,g,o,n,r))return l}l++}else for(var l=0,d=0;d<i.length;){var f=i[d++],p=i[d++],m=i[d++],g=i[d++];if(a>0){var y=(f+m)/2-(p-g)*a,x=(p+g)/2-(m-f)*a;if(mte(f,p,y,x,m,g,o,n,r))return l}else if(Yd(f,p,m,g,o,n,r))return l;l++}return-1},e.prototype.contain=function(n,r){var s=this.transformCoordToLocal(n,r),i=this.getBoundingRect();if(n=s[0],r=s[1],i.contain(n,r)){var a=this.hoverDataIdx=this.findDataIndex(n,r);return a>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,s=r.segs,i=1/0,a=1/0,o=-1/0,l=-1/0,d=0;d<s.length;){var c=s[d++],f=s[d++];i=Math.min(c,i),o=Math.max(c,o),a=Math.min(f,a),l=Math.max(f,l)}n=this._rect=new Gt(i,a,o,l)}return n},e}(en),xYe=function(){function t(){this.group=new Tt}return t.prototype.updateData=function(e){this._clear();var n=this._create();n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e)},t.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(e,n){var r=this._newAdded[0],s=n.getLayout("linesPoints"),i=r&&r.shape.segs;if(i&&i.length<2e4){var a=i.length,o=new Float32Array(a+s.length);o.set(i),o.set(s,a),r.setShape({segs:o})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:s}),this._setCommon(l,n),l.__startIndex=e.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new bYe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},t.prototype._setCommon=function(e,n,r){var s=n.hostModel;e.setShape({polyline:s.get("polyline"),curveness:s.get(["lineStyle","curveness"])}),e.useStyle(s.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=n.getVisual("style");i&&i.stroke&&e.setStyle("stroke",i.stroke),e.setStyle("fill",null);var a=Et(e);a.seriesIndex=s.seriesIndex,e.on("mousemove",function(o){a.dataIndex=null;var l=e.hoverDataIdx;l>0&&(a.dataIndex=l+e.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),zie={seriesType:"lines",plan:Wg(),reset:function(t){var e=t.coordinateSystem;if(e){var n=t.get("polyline"),r=t.pipelineContext.large;return{progress:function(s,i){var a=[];if(r){var o=void 0,l=s.end-s.start;if(n){for(var d=0,c=s.start;c<s.end;c++)d+=t.getLineCoordsCount(c);o=new Float32Array(l+d*2)}else o=new Float32Array(l*4);for(var f=0,p=[],c=s.start;c<s.end;c++){var h=t.getLineCoords(c,a);n&&(o[f++]=h);for(var m=0;m<h;m++)p=e.dataToPoint(a[m],!1,p),o[f++]=p[0],o[f++]=p[1]}i.setLayout("linesPoints",o)}else for(var c=s.start;c<s.end;c++){var g=i.getItemModel(c),h=t.getLineCoords(c,a),y=[];if(n)for(var x=0;x<h;x++)y.push(e.dataToPoint(a[x]));else{y[0]=e.dataToPoint(a[0]),y[1]=e.dataToPoint(a[1]);var _=g.get(["lineStyle","curveness"]);+_&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*_,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*_])}i.setItemLayout(c,y)}}}}}},_Ye=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){var i=n.getData(),a=this._updateLineDraw(i,n),o=n.get("zlevel"),l=n.get(["effect","trailLength"]),d=s.getZr(),c=d.painter.getType()==="svg";c||d.painter.getLayer(o).clear(!0),this._lastZlevel!=null&&!c&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(n)&&l>0&&(c||d.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),a.updateData(i);var f=n.get("clip",!0)&&Nb(n.coordinateSystem,!1,n);f?this.group.setClipPath(f):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},e.prototype.incrementalPrepareRender=function(n,r,s){var i=n.getData(),a=this._updateLineDraw(i,n);a.incrementalPrepareUpdate(i),this._clearLayer(s),this._finished=!1},e.prototype.incrementalRender=function(n,r,s){this._lineDraw.incrementalUpdate(n,r.getData()),this._finished=n.end===r.getData().count()},e.prototype.eachRendered=function(n){this._lineDraw&&this._lineDraw.eachRendered(n)},e.prototype.updateTransform=function(n,r,s){var i=n.getData(),a=n.pipelineContext;if(!this._finished||a.large||a.progressiveRender)return{update:!0};var o=zie.reset(n,r,s);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(s)},e.prototype._updateLineDraw=function(n,r){var s=this._lineDraw,i=this._showEffect(r),a=!!r.get("polyline"),o=r.pipelineContext,l=o.large;return(!s||i!==this._hasEffet||a!==this._isPolyline||l!==this._isLargeDraw)&&(s&&s.remove(),s=this._lineDraw=l?new xYe:new cI(a?i?vYe:Bie:i?Fie:dI),this._hasEffet=i,this._isPolyline=a,this._isLargeDraw=l),this.group.add(s.group),s},e.prototype._showEffect=function(n){return!!n.get(["effect","show"])},e.prototype._clearLayer=function(n){var r=n.getZr(),s=r.painter.getType()==="svg";!s&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(n,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(n,r){this.remove(n,r)},e.type="lines",e}(On),wYe=typeof Uint32Array=="undefined"?Array:Uint32Array,kYe=typeof Float64Array=="undefined"?Array:Float64Array;function Tz(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=We(e,function(n){var r=[n[0].coord,n[1].coord],s={coords:r};return n[0].name&&(s.fromName=n[0].name),n[1].name&&(s.toName=n[1].name),qP([s,n[0],n[1]])}))}var SYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return e.prototype.init=function(n){n.data=n.data||[],Tz(n);var r=this._processFlatCoordsArray(n.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(n.data=new Float32Array(r.count)),t.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(n){if(Tz(n),n.data){var r=this._processFlatCoordsArray(n.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(n.data=new Float32Array(r.count))}t.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(n){var r=this._processFlatCoordsArray(n.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=p1(this._flatCoords,r.flatCoords),this._flatCoordsOffset=p1(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),n.data=new Float32Array(r.count)),this.getRawData().appendData(n.data)},e.prototype._getCoordsFromItemModel=function(n){var r=this.getData().getItemModel(n),s=r.option instanceof Array?r.option:r.getShallow("coords");return s},e.prototype.getLineCoordsCount=function(n){return this._flatCoordsOffset?this._flatCoordsOffset[n*2+1]:this._getCoordsFromItemModel(n).length},e.prototype.getLineCoords=function(n,r){if(this._flatCoordsOffset){for(var s=this._flatCoordsOffset[n*2],i=this._flatCoordsOffset[n*2+1],a=0;a<i;a++)r[a]=r[a]||[],r[a][0]=this._flatCoords[s+a*2],r[a][1]=this._flatCoords[s+a*2+1];return i}else{for(var o=this._getCoordsFromItemModel(n),a=0;a<o.length;a++)r[a]=r[a]||[],r[a][0]=o[a][0],r[a][1]=o[a][1];return o.length}},e.prototype._processFlatCoordsArray=function(n){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),hn(n[0])){for(var s=n.length,i=new wYe(s),a=new kYe(s),o=0,l=0,d=0,c=0;c<s;){d++;var f=n[c++];i[l++]=o+r,i[l++]=f;for(var p=0;p<f;p++){var h=n[c++],m=n[c++];a[o++]=h,a[o++]=m}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,l),flatCoords:a,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:n.length}},e.prototype.getInitialData=function(n,r){var s=new wi(["value"],this);return s.hasItemOption=!1,s.initData(n.data,[],function(i,a,o,l){if(i instanceof Array)return NaN;s.hasItemOption=!0;var d=i.value;if(d!=null)return d instanceof Array?d[l]:d}),s},e.prototype.formatTooltip=function(n,r,s){var i=this.getData(),a=i.getItemModel(n),o=a.get("name");if(o)return o;var l=a.get("fromName"),d=a.get("toName"),c=[];return l!=null&&c.push(l),d!=null&&c.push(d),hs("nameValue",{name:c.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var n=this.option.progressive;return n==null?this.option.large?1e4:this.get("progressive"):n},e.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n==null?this.option.large?2e4:this.get("progressiveThreshold"):n},e.prototype.getZLevelKey=function(){var n=this.getModel("effect"),r=n.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:n.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(Jn);function E_(t){return t instanceof Array||(t=[t,t]),t}var CYe={seriesType:"lines",reset:function(t){var e=E_(t.get("symbol")),n=E_(t.get("symbolSize")),r=t.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",n&&n[0]),r.setVisual("toSymbolSize",n&&n[1]);function s(i,a){var o=i.getItemModel(a),l=E_(o.getShallow("symbol",!0)),d=E_(o.getShallow("symbolSize",!0));l[0]&&i.setItemVisual(a,"fromSymbol",l[0]),l[1]&&i.setItemVisual(a,"toSymbol",l[1]),d[0]&&i.setItemVisual(a,"fromSymbolSize",d[0]),d[1]&&i.setItemVisual(a,"toSymbolSize",d[1])}return{dataEach:r.hasItemOption?s:null}}};function AYe(t){t.registerChartView(_Ye),t.registerSeriesModel(SYe),t.registerLayout(zie),t.registerVisual(CYe)}var TYe=256,$Ye=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=Oc.createCanvas();this.canvas=e}return t.prototype.update=function(e,n,r,s,i,a){var o=this._getBrush(),l=this._getGradient(i,"inRange"),d=this._getGradient(i,"outOfRange"),c=this.pointSize+this.blurSize,f=this.canvas,p=f.getContext("2d"),h=e.length;f.width=n,f.height=r;for(var m=0;m<h;++m){var g=e[m],y=g[0],x=g[1],_=g[2],k=s(_);p.globalAlpha=k,p.drawImage(o,y-c,x-c)}if(!f.width||!f.height)return f;for(var w=p.getImageData(0,0,f.width,f.height),S=w.data,C=0,A=S.length,M=this.minOpacity,E=this.maxOpacity,P=E-M;C<A;){var k=S[C+3]/256,I=Math.floor(k*(TYe-1))*4;if(k>0){var F=a(k)?l:d;k>0&&(k=k*P+M),S[C++]=F[I],S[C++]=F[I+1],S[C++]=F[I+2],S[C++]=F[I+3]*k*256}else C+=4}return p.putImageData(w,0,0),f},t.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=Oc.createCanvas()),n=this.pointSize+this.blurSize,r=n*2;e.width=r,e.height=r;var s=e.getContext("2d");return s.clearRect(0,0,r,r),s.shadowOffsetX=r,s.shadowBlur=this.blurSize,s.shadowColor="#000",s.beginPath(),s.arc(-n,n,this.pointSize,0,Math.PI*2,!0),s.closePath(),s.fill(),e},t.prototype._getGradient=function(e,n){for(var r=this._gradientPixels,s=r[n]||(r[n]=new Uint8ClampedArray(256*4)),i=[0,0,0,0],a=0,o=0;o<256;o++)e[n](o/255,!0,i),s[a++]=i[0],s[a++]=i[1],s[a++]=i[2],s[a++]=i[3];return s},t}();function MYe(t,e,n){var r=t[1]-t[0];e=We(e,function(a){return{interval:[(a.interval[0]-t[0])/r,(a.interval[1]-t[0])/r]}});var s=e.length,i=0;return function(a){var o;for(o=i;o<s;o++){var l=e[o].interval;if(l[0]<=a&&a<=l[1]){i=o;break}}if(o===s)for(o=i-1;o>=0;o--){var l=e[o].interval;if(l[0]<=a&&a<=l[1]){i=o;break}}return o>=0&&o<s&&n[o]}}function EYe(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(r){return r>=e[0]&&r<=e[1]}}function $z(t){var e=t.dimensions;return e[0]==="lng"&&e[1]==="lat"}var DYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){var i;r.eachComponent("visualMap",function(o){o.eachTargetSeries(function(l){l===n&&(i=o)})}),this._progressiveEls=null,this.group.removeAll();var a=n.coordinateSystem;a.type==="cartesian2d"||a.type==="calendar"?this._renderOnCartesianAndCalendar(n,s,0,n.getData().count()):$z(a)&&this._renderOnGeo(a,n,i,s)},e.prototype.incrementalPrepareRender=function(n,r,s){this.group.removeAll()},e.prototype.incrementalRender=function(n,r,s,i){var a=r.coordinateSystem;a&&($z(a)?this.render(r,s,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,i,n.start,n.end,!0)))},e.prototype.eachRendered=function(n){Xc(this._progressiveEls||this.group,n)},e.prototype._renderOnCartesianAndCalendar=function(n,r,s,i,a){var o=n.coordinateSystem,l=xh(o,"cartesian2d"),d,c,f,p;if(l){var h=o.getAxis("x"),m=o.getAxis("y");d=h.getBandWidth()+.5,c=m.getBandWidth()+.5,f=h.scale.getExtent(),p=m.scale.getExtent()}for(var g=this.group,y=n.getData(),x=n.getModel(["emphasis","itemStyle"]).getItemStyle(),_=n.getModel(["blur","itemStyle"]).getItemStyle(),k=n.getModel(["select","itemStyle"]).getItemStyle(),w=n.get(["itemStyle","borderRadius"]),S=ps(n),C=n.getModel("emphasis"),A=C.get("focus"),M=C.get("blurScope"),E=C.get("disabled"),P=l?[y.mapDimension("x"),y.mapDimension("y"),y.mapDimension("value")]:[y.mapDimension("time"),y.mapDimension("value")],I=s;I<i;I++){var F=void 0,L=y.getItemVisual(I,"style");if(l){var z=y.get(P[0],I),N=y.get(P[1],I);if(isNaN(y.get(P[2],I))||isNaN(z)||isNaN(N)||z<f[0]||z>f[1]||N<p[0]||N>p[1])continue;var q=o.dataToPoint([z,N]);F=new on({shape:{x:q[0]-d/2,y:q[1]-c/2,width:d,height:c},style:L})}else{if(isNaN(y.get(P[1],I)))continue;F=new on({z2:1,shape:o.dataToRect([y.get(P[0],I)]).contentShape,style:L})}if(y.hasItemOption){var V=y.getItemModel(I),O=V.getModel("emphasis");x=O.getModel("itemStyle").getItemStyle(),_=V.getModel(["blur","itemStyle"]).getItemStyle(),k=V.getModel(["select","itemStyle"]).getItemStyle(),w=V.get(["itemStyle","borderRadius"]),A=O.get("focus"),M=O.get("blurScope"),E=O.get("disabled"),S=ps(V)}F.shape.r=w;var X=n.getRawValue(I),j="-";X&&X[2]!=null&&(j=X[2]+""),Fs(F,S,{labelFetcher:n,labelDataIndex:I,defaultOpacity:L.opacity,defaultText:j}),F.ensureState("emphasis").style=x,F.ensureState("blur").style=_,F.ensureState("select").style=k,kr(F,A,M,E),F.incremental=a,a&&(F.states.emphasis.hoverLayer=!0),g.add(F),y.setItemGraphicEl(I,F),this._progressiveEls&&this._progressiveEls.push(F)}},e.prototype._renderOnGeo=function(n,r,s,i){var a=s.targetVisuals.inRange,o=s.targetVisuals.outOfRange,l=r.getData(),d=this._hmLayer||this._hmLayer||new $Ye;d.blurSize=r.get("blurSize"),d.pointSize=r.get("pointSize"),d.minOpacity=r.get("minOpacity"),d.maxOpacity=r.get("maxOpacity");var c=n.getViewRect().clone(),f=n.getRoamTransform();c.applyTransform(f);var p=Math.max(c.x,0),h=Math.max(c.y,0),m=Math.min(c.width+c.x,i.getWidth()),g=Math.min(c.height+c.y,i.getHeight()),y=m-p,x=g-h,_=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],k=l.mapArray(_,function(A,M,E){var P=n.dataToPoint([A,M]);return P[0]-=p,P[1]-=h,P.push(E),P}),w=s.getExtent(),S=s.type==="visualMap.continuous"?EYe(w,s.option.range):MYe(w,s.getPieceList(),s.option.selected);d.update(k,y,x,a.color.getNormalizer(),{inRange:a.color.getColorMapper(),outOfRange:o.color.getColorMapper()},S);var C=new Cs({style:{width:y,height:x,x:p,y:h,image:d.canvas},silent:!0});this.group.add(C)},e.type="heatmap",e}(On),RYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){return bd(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var n=Rb.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(Jn);function PYe(t){t.registerChartView(DYe),t.registerSeriesModel(RYe)}var IYe=["itemStyle","borderWidth"],Mz=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Q3=new yd,OYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){var i=this.group,a=n.getData(),o=this._data,l=n.coordinateSystem,d=l.getBaseAxis(),c=d.isHorizontal(),f=l.master.getRect(),p={ecSize:{width:s.getWidth(),height:s.getHeight()},seriesModel:n,coordSys:l,coordSysExtent:[[f.x,f.x+f.width],[f.y,f.y+f.height]],isHorizontal:c,valueDim:Mz[+c],categoryDim:Mz[1-+c]};a.diff(o).add(function(m){if(a.hasValue(m)){var g=Dz(a,m),y=Ez(a,m,g,p),x=Rz(a,p,y);a.setItemGraphicEl(m,x),i.add(x),Iz(x,p,y)}}).update(function(m,g){var y=o.getItemGraphicEl(g);if(!a.hasValue(m)){i.remove(y);return}var x=Dz(a,m),_=Ez(a,m,x,p),k=Yie(a,_);y&&k!==y.__pictorialShapeStr&&(i.remove(y),a.setItemGraphicEl(m,null),y=null),y?zYe(y,p,_):y=Rz(a,p,_,!0),a.setItemGraphicEl(m,y),y.__pictorialSymbolMeta=_,i.add(y),Iz(y,p,_)}).remove(function(m){var g=o.getItemGraphicEl(m);g&&Pz(o,m,g.__pictorialSymbolMeta.animationModel,g)}).execute();var h=n.get("clip",!0)?Nb(n.coordinateSystem,!1,n):null;return h?i.setClipPath(h):i.removeClipPath(),this._data=a,this.group},e.prototype.remove=function(n,r){var s=this.group,i=this._data;n.get("animation")?i&&i.eachItemGraphicEl(function(a){Pz(i,Et(a).dataIndex,n,a)}):s.removeAll()},e.type="pictorialBar",e}(On);function Ez(t,e,n,r){var s=t.getItemLayout(e),i=n.get("symbolRepeat"),a=n.get("symbolClip"),o=n.get("symbolPosition")||"start",l=n.get("symbolRotate"),d=(l||0)*Math.PI/180||0,c=n.get("symbolPatternSize")||2,f=n.isAnimationEnabled(),p={dataIndex:e,layout:s,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:a,symbolRepeat:i,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:d,animationModel:f?n:null,hoverScale:f&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};LYe(n,i,s,r,p),VYe(t,e,s,i,a,p.boundingLength,p.pxSign,c,r,p),NYe(n,p.symbolScale,d,r,p);var h=p.symbolSize,m=yh(n.get("symbolOffset"),h);return jYe(n,h,s,i,a,m,o,p.valueLineWidth,p.boundingLength,p.repeatCutLength,r,p),p}function LYe(t,e,n,r,s){var i=r.valueDim,a=t.get("symbolBoundingData"),o=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=o.toGlobalCoord(o.dataToCoord(0)),d=1-+(n[i.wh]<=0),c;if(He(a)){var f=[Z3(o,a[0])-l,Z3(o,a[1])-l];f[1]<f[0]&&f.reverse(),c=f[d]}else a!=null?c=Z3(o,a)-l:e?c=r.coordSysExtent[i.index][d]-l:c=n[i.wh];s.boundingLength=c,e&&(s.repeatCutLength=n[i.wh]);var p=i.xy==="x",h=o.inverse;s.pxSign=p&&!h||!p&&h?c>=0?1:-1:c>0?1:-1}function Z3(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function VYe(t,e,n,r,s,i,a,o,l,d){var c=l.valueDim,f=l.categoryDim,p=Math.abs(n[f.wh]),h=t.getItemVisual(e,"symbolSize"),m;He(h)?m=h.slice():h==null?m=["100%","100%"]:m=[h,h],m[f.index]=tt(m[f.index],p),m[c.index]=tt(m[c.index],r?p:Math.abs(i)),d.symbolSize=m;var g=d.symbolScale=[m[0]/o,m[1]/o];g[c.index]*=(l.isHorizontal?-1:1)*a}function NYe(t,e,n,r,s){var i=t.get(IYe)||0;i&&(Q3.attr({scaleX:e[0],scaleY:e[1],rotation:n}),Q3.updateTransform(),i/=Q3.getLineScale(),i*=e[r.valueDim.index]),s.valueLineWidth=i||0}function jYe(t,e,n,r,s,i,a,o,l,d,c,f){var p=c.categoryDim,h=c.valueDim,m=f.pxSign,g=Math.max(e[h.index]+o,0),y=g;if(r){var x=Math.abs(l),_=xs(t.get("symbolMargin"),"15%")+"",k=!1;_.lastIndexOf("!")===_.length-1&&(k=!0,_=_.slice(0,_.length-1));var w=tt(_,e[h.index]),S=Math.max(g+w*2,0),C=k?0:w*2,A=nte(r),M=A?r:Oz((x+C)/S),E=x-M*g;w=E/2/(k?M:Math.max(M-1,1)),S=g+w*2,C=k?0:w*2,!A&&r!=="fixed"&&(M=d?Oz((Math.abs(d)+C)/S):0),y=M*S-C,f.repeatTimes=M,f.symbolMargin=w}var P=m*(y/2),I=f.pathPosition=[];I[p.index]=n[p.wh]/2,I[h.index]=a==="start"?P:a==="end"?l-P:l/2,i&&(I[0]+=i[0],I[1]+=i[1]);var F=f.bundlePosition=[];F[p.index]=n[p.xy],F[h.index]=n[h.xy];var L=f.barRectShape=Ne({},n);L[h.wh]=m*Math.max(Math.abs(n[h.wh]),Math.abs(I[h.index]+P)),L[p.wh]=n[p.wh];var z=f.clipShape={};z[p.xy]=-n[p.xy],z[p.wh]=c.ecSize[p.wh],z[h.xy]=0,z[h.wh]=n[h.wh]}function Uie(t){var e=t.symbolPatternSize,n=Wr(t.symbolType,-e/2,-e/2,e,e);return n.attr({culling:!0}),n.type!=="image"&&n.setStyle({strokeNoScale:!0}),n}function Hie(t,e,n,r){var s=t.__pictorialBundle,i=n.symbolSize,a=n.valueLineWidth,o=n.pathPosition,l=e.valueDim,d=n.repeatTimes||0,c=0,f=i[e.valueDim.index]+a+n.symbolMargin*2;for(_I(t,function(g){g.__pictorialAnimationIndex=c,g.__pictorialRepeatTimes=d,c<d?qm(g,null,m(c),n,r):qm(g,null,{scaleX:0,scaleY:0},n,r,function(){s.remove(g)}),c++});c<d;c++){var p=Uie(n);p.__pictorialAnimationIndex=c,p.__pictorialRepeatTimes=d,s.add(p);var h=m(c);qm(p,{x:h.x,y:h.y,scaleX:0,scaleY:0},{scaleX:h.scaleX,scaleY:h.scaleY,rotation:h.rotation},n,r)}function m(g){var y=o.slice(),x=n.pxSign,_=g;return(n.symbolRepeatDirection==="start"?x>0:x<0)&&(_=d-1-g),y[l.index]=f*(_-d/2+.5)+o[l.index],{x:y[0],y:y[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function qie(t,e,n,r){var s=t.__pictorialBundle,i=t.__pictorialMainPath;i?qm(i,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,r):(i=t.__pictorialMainPath=Uie(n),s.add(i),qm(i,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,r))}function Wie(t,e,n){var r=Ne({},e.barRectShape),s=t.__pictorialBarRect;s?qm(s,null,{shape:r},e,n):(s=t.__pictorialBarRect=new on({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),s.disableMorphing=!0,t.add(s))}function Gie(t,e,n,r){if(n.symbolClip){var s=t.__pictorialClipPath,i=Ne({},n.clipShape),a=e.valueDim,o=n.animationModel,l=n.dataIndex;if(s)bn(s,{shape:i},o,l);else{i[a.wh]=0,s=new on({shape:i}),t.__pictorialBundle.setClipPath(s),t.__pictorialClipPath=s;var d={};d[a.wh]=n.clipShape[a.wh],vh[r?"updateProps":"initProps"](s,{shape:d},o,l)}}}function Dz(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=FYe,n.isAnimationEnabled=BYe,n}function FYe(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function BYe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Rz(t,e,n,r){var s=new Tt,i=new Tt;return s.add(i),s.__pictorialBundle=i,i.x=n.bundlePosition[0],i.y=n.bundlePosition[1],n.symbolRepeat?Hie(s,e,n):qie(s,e,n),Wie(s,n,r),Gie(s,e,n,r),s.__pictorialShapeStr=Yie(t,n),s.__pictorialSymbolMeta=n,s}function zYe(t,e,n){var r=n.animationModel,s=n.dataIndex,i=t.__pictorialBundle;bn(i,{x:n.bundlePosition[0],y:n.bundlePosition[1]},r,s),n.symbolRepeat?Hie(t,e,n,!0):qie(t,e,n,!0),Wie(t,n,!0),Gie(t,e,n,!0)}function Pz(t,e,n,r){var s=r.__pictorialBarRect;s&&s.removeTextContent();var i=[];_I(r,function(a){i.push(a)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),de(i,function(a){Vc(a,{scaleX:0,scaleY:0},n,e,function(){r.parent&&r.parent.remove(r)})}),t.setItemGraphicEl(e,null)}function Yie(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function _I(t,e,n){de(t.__pictorialBundle.children(),function(r){r!==t.__pictorialBarRect&&e.call(n,r)})}function qm(t,e,n,r,s,i){e&&t.attr(e),r.symbolClip&&!s?n&&t.attr(n):n&&vh[s?"updateProps":"initProps"](t,n,r.animationModel,r.dataIndex,i)}function Iz(t,e,n){var r=n.dataIndex,s=n.itemModel,i=s.getModel("emphasis"),a=i.getModel("itemStyle").getItemStyle(),o=s.getModel(["blur","itemStyle"]).getItemStyle(),l=s.getModel(["select","itemStyle"]).getItemStyle(),d=s.getShallow("cursor"),c=i.get("focus"),f=i.get("blurScope"),p=i.get("scale");_I(t,function(g){if(g instanceof Cs){var y=g.style;g.useStyle(Ne({image:y.image,x:y.x,y:y.y,width:y.width,height:y.height},n.style))}else g.useStyle(n.style);var x=g.ensureState("emphasis");x.style=a,p&&(x.scaleX=g.scaleX*1.1,x.scaleY=g.scaleY*1.1),g.ensureState("blur").style=o,g.ensureState("select").style=l,d&&(g.cursor=d),g.z2=n.z2});var h=e.valueDim.posDesc[+(n.boundingLength>0)],m=t.__pictorialBarRect;m.ignoreClip=!0,Fs(m,ps(s),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:_g(e.seriesModel.getData(),r),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:h}),kr(t,c,f,i.get("disabled"))}function Oz(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var UYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return e.prototype.getInitialData=function(n){return n.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Qc(D1.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(D1);function HYe(t){t.registerChartView(OYe),t.registerSeriesModel(UYe),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Nt(Dre,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Rre("pictorialBar"))}var qYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._layers=[],n}return e.prototype.render=function(n,r,s){var i=n.getData(),a=this,o=this.group,l=n.getLayerSeries(),d=i.getLayout("layoutInfo"),c=d.rect,f=d.boundaryGap;o.x=0,o.y=c.y+f[0];function p(y){return y.name}var h=new ld(this._layersSeries||[],l,p,p),m=[];h.add(ct(g,this,"add")).update(ct(g,this,"update")).remove(ct(g,this,"remove")).execute();function g(y,x,_){var k=a._layers;if(y==="remove"){o.remove(k[x]);return}for(var w=[],S=[],C,A=l[x].indices,M=0;M<A.length;M++){var E=i.getItemLayout(A[M]),P=E.x,I=E.y0,F=E.y;w.push(P,I),S.push(P,I+F),C=i.getItemVisual(A[M],"style")}var L,z=i.getItemLayout(A[0]),N=n.getModel("label"),q=N.get("margin"),V=n.getModel("emphasis");if(y==="add"){var O=m[x]=new Tt;L=new xse({shape:{points:w,stackedOnPoints:S,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),O.add(L),o.add(O),n.isAnimationEnabled()&&L.setClipPath(WYe(L.getBoundingRect(),n,function(){L.removeClipPath()}))}else{var O=k[_];L=O.childAt(0),o.add(O),m[x]=O,bn(L,{shape:{points:w,stackedOnPoints:S}},n),Bo(L)}Fs(L,ps(n),{labelDataIndex:A[M-1],defaultText:i.getName(A[M-1]),inheritColor:C.fill},{normal:{verticalAlign:"middle"}}),L.setTextConfig({position:null,local:!0});var X=L.getTextContent();X&&(X.x=z.x-q,X.y=z.y0+z.y/2),L.useStyle(C),i.setItemGraphicEl(x,L),js(L,n),kr(L,V.get("focus"),V.get("blurScope"),V.get("disabled"))}this._layersSeries=l,this._layers=m},e.type="themeRiver",e}(On);function WYe(t,e,n){var r=new on({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return ur(r,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},e,n),r}var J3=2,GYe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Bb(ct(this.getData,this),ct(this.getRawData,this))},e.prototype.fixData=function(n){var r=n.length,s={},i=qM(n,function(p){return s.hasOwnProperty(p[0]+"")||(s[p[0]+""]=-1),p[2]}),a=[];i.buckets.each(function(p,h){a.push({name:h,dataList:p})});for(var o=a.length,l=0;l<o;++l){for(var d=a[l].name,c=0;c<a[l].dataList.length;++c){var f=a[l].dataList[c][0]+"";s[f]=l}for(var f in s)s.hasOwnProperty(f)&&s[f]!==l&&(s[f]=l,n[r]=[f,0,d],r++)}return n},e.prototype.getInitialData=function(n,r){for(var s=this.getReferringComponents("singleAxis",Br).models[0],i=s.get("type"),a=Sn(n.data,function(m){return m[2]!==void 0}),o=this.fixData(a||[]),l=[],d=this.nameMap=mt(),c=0,f=0;f<o.length;++f)l.push(o[f][J3]),d.get(o[f][J3])||(d.set(o[f][J3],c),c++);var p=Ib(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:zk(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,h=new wi(p,this);return h.initData(o),h},e.prototype.getLayerSeries=function(){for(var n=this.getData(),r=n.count(),s=[],i=0;i<r;++i)s[i]=i;var a=n.mapDimension("single"),o=qM(s,function(d){return n.get("name",d)}),l=[];return o.buckets.each(function(d,c){d.sort(function(f,p){return n.get(a,f)-n.get(a,p)}),l.push({name:c,indices:d})}),l},e.prototype.getAxisTooltipData=function(n,r,s){He(n)||(n=n?[n]:[]);for(var i=this.getData(),a=this.getLayerSeries(),o=[],l=a.length,d,c=0;c<l;++c){for(var f=Number.MAX_VALUE,p=-1,h=a[c].indices.length,m=0;m<h;++m){var g=i.get(n[0],a[c].indices[m]),y=Math.abs(g-r);y<=f&&(d=g,f=y,p=a[c].indices[m])}o.push(p)}return{dataIndices:o,nestestValue:d}},e.prototype.formatTooltip=function(n,r,s){var i=this.getData(),a=i.getName(n),o=i.get(i.mapDimension("value"),n);return hs("nameValue",{name:a,value:o})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Jn);function YYe(t,e){t.eachSeriesByType("themeRiver",function(n){var r=n.getData(),s=n.coordinateSystem,i={},a=s.getRect();i.rect=a;var o=n.get("boundaryGap"),l=s.getAxis();if(i.boundaryGap=o,l.orient==="horizontal"){o[0]=tt(o[0],a.height),o[1]=tt(o[1],a.height);var d=a.height-o[0]-o[1];Lz(r,n,d)}else{o[0]=tt(o[0],a.width),o[1]=tt(o[1],a.width);var c=a.width-o[0]-o[1];Lz(r,n,c)}r.setLayout("layoutInfo",i)})}function Lz(t,e,n){if(t.count())for(var r=e.coordinateSystem,s=e.getLayerSeries(),i=t.mapDimension("single"),a=t.mapDimension("value"),o=We(s,function(y){return We(y.indices,function(x){var _=r.dataToPoint(t.get(i,x));return _[1]=t.get(a,x),_})}),l=KYe(o),d=l.y0,c=n/l.max,f=s.length,p=s[0].indices.length,h,m=0;m<p;++m){h=d[m]*c,t.setItemLayout(s[0].indices[m],{layerIndex:0,x:o[0][m][0],y0:h,y:o[0][m][1]*c});for(var g=1;g<f;++g)h+=o[g-1][m][1]*c,t.setItemLayout(s[g].indices[m],{layerIndex:g,x:o[g][m][0],y0:h,y:o[g][m][1]*c})}}function KYe(t){for(var e=t.length,n=t[0].length,r=[],s=[],i=0,a=0;a<n;++a){for(var o=0,l=0;l<e;++l)o+=t[l][a][1];o>i&&(i=o),r.push(o)}for(var d=0;d<n;++d)s[d]=(i-r[d])/2;i=0;for(var c=0;c<n;++c){var f=r[c]+s[c];f>i&&(i=f)}return{y0:s,max:i}}function XYe(t){t.registerChartView(qYe),t.registerSeriesModel(GYe),t.registerLayout(YYe),t.registerProcessor(Fb("themeRiver"))}var QYe=2,ZYe=4,Vz=function(t){Te(e,t);function e(n,r,s,i){var a=t.call(this)||this;a.z2=QYe,a.textConfig={inside:!0},Et(a).seriesIndex=r.seriesIndex;var o=new dn({z2:ZYe,silent:n.getModel().get(["label","silent"])});return a.setTextContent(o),a.updateData(!0,n,r,s,i),a}return e.prototype.updateData=function(n,r,s,i,a){this.node=r,r.piece=this,s=s||this._seriesModel,i=i||this._ecModel;var o=this;Et(o).dataIndex=r.dataIndex;var l=r.getModel(),d=l.getModel("emphasis"),c=r.getLayout(),f=Ne({},c);f.label=null;var p=r.getVisual("style");p.lineJoin="bevel";var h=r.getVisual("decal");h&&(p.decal=bg(h,a));var m=fp(l.getModel("itemStyle"),f,!0);Ne(f,m),de(Di,function(_){var k=o.ensureState(_),w=l.getModel([_,"itemStyle"]);k.style=w.getItemStyle();var S=fp(w,f);S&&(k.shape=S)}),n?(o.setShape(f),o.shape.r=c.r0,ur(o,{shape:{r:c.r}},s,r.dataIndex)):(bn(o,{shape:f},s),Bo(o)),o.useStyle(p),this._updateLabel(s);var g=l.getShallow("cursor");g&&o.attr("cursor",g),this._seriesModel=s||this._seriesModel,this._ecModel=i||this._ecModel;var y=d.get("focus"),x=y==="relative"?p1(r.getAncestorsIndices(),r.getDescendantIndices()):y==="ancestor"?r.getAncestorsIndices():y==="descendant"?r.getDescendantIndices():y;kr(this,x,d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(n){var r=this,s=this.node.getModel(),i=s.getModel("label"),a=this.node.getLayout(),o=a.endAngle-a.startAngle,l=(a.startAngle+a.endAngle)/2,d=Math.cos(l),c=Math.sin(l),f=this,p=f.getTextContent(),h=this.node.dataIndex,m=i.get("minAngle")/180*Math.PI,g=i.get("show")&&!(m!=null&&Math.abs(o)<m);p.ignore=!g,de(b1,function(x){var _=x==="normal"?s.getModel("label"):s.getModel([x,"label"]),k=x==="normal",w=k?p:p.ensureState(x),S=n.getFormattedLabel(h,x);k&&(S=S||r.node.name),w.style=Xn(_,{},null,x!=="normal",!0),S&&(w.style.text=S);var C=_.get("show");C!=null&&!k&&(w.ignore=!C);var A=y(_,"position"),M=k?f:f.states[x],E=M.style.fill;M.textConfig={outsideFill:_.get("color")==="inherit"?E:null,inside:A!=="outside"};var P,I=y(_,"distance")||0,F=y(_,"align"),L=y(_,"rotate"),z=Math.PI*.5,N=Math.PI*1.5,q=fa(L==="tangential"?Math.PI/2-l:l),V=q>z&&!v1(q-z)&&q<N;A==="outside"?(P=a.r+I,F=V?"right":"left"):!F||F==="center"?(o===2*Math.PI&&a.r0===0?P=0:P=(a.r+a.r0)/2,F="center"):F==="left"?(P=a.r0+I,F=V?"right":"left"):F==="right"&&(P=a.r-I,F=V?"left":"right"),w.style.align=F,w.style.verticalAlign=y(_,"verticalAlign")||"middle",w.x=P*d+a.cx,w.y=P*c+a.cy;var O=0;L==="radial"?O=fa(-l)+(V?Math.PI:0):L==="tangential"?O=fa(Math.PI/2-l)+(V?Math.PI:0):hn(L)&&(O=L*Math.PI/180),w.rotation=fa(O)});function y(x,_){var k=x.get(_);return k==null?i.get(_):k}p.dirtyStyle()},e}(Ri),qE="sunburstRootToNode",Nz="sunburstHighlight",JYe="sunburstUnhighlight";function eKe(t){t.registerAction({type:qE,update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(s,i){var a=P1(e,[qE],s);if(a){var o=s.getViewRoot();o&&(e.direction=iI(o,a.node)?"rollUp":"drillDown"),s.resetViewRoot(a.node)}}}),t.registerAction({type:Nz,update:"none"},function(e,n,r){e=Ne({},e),n.eachComponent({mainType:"series",subType:"sunburst",query:e},s);function s(i){var a=P1(e,[Nz],i);a&&(e.dataIndex=a.node.dataIndex)}r.dispatchAction(Ne(e,{type:"highlight"}))}),t.registerAction({type:JYe,update:"updateView"},function(e,n,r){e=Ne({},e),r.dispatchAction(Ne(e,{type:"downplay"}))})}var tKe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s,i){var a=this;this.seriesModel=n,this.api=s,this.ecModel=r;var o=n.getData(),l=o.tree.root,d=n.getViewRoot(),c=this.group,f=n.get("renderLabelForZeroData"),p=[];d.eachNode(function(_){p.push(_)});var h=this._oldChildren||[];m(p,h),x(l,d),this._initEvents(),this._oldChildren=p;function m(_,k){if(_.length===0&&k.length===0)return;new ld(k,_,w,w).add(S).update(S).remove(Nt(S,null)).execute();function w(C){return C.getId()}function S(C,A){var M=C==null?null:_[C],E=A==null?null:k[A];g(M,E)}}function g(_,k){if(!f&&_&&!_.getValue()&&(_=null),_!==l&&k!==l){if(k&&k.piece)_?(k.piece.updateData(!1,_,n,r,s),o.setItemGraphicEl(_.dataIndex,k.piece)):y(k);else if(_){var w=new Vz(_,n,r,s);c.add(w),o.setItemGraphicEl(_.dataIndex,w)}}}function y(_){_&&_.piece&&(c.remove(_.piece),_.piece=null)}function x(_,k){k.depth>0?(a.virtualPiece?a.virtualPiece.updateData(!1,_,n,r,s):(a.virtualPiece=new Vz(_,n,r,s),c.add(a.virtualPiece)),k.piece.off("click"),a.virtualPiece.on("click",function(w){a._rootToNode(k.parentNode)})):a.virtualPiece&&(c.remove(a.virtualPiece),a.virtualPiece=null)}},e.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(r){var s=!1,i=n.seriesModel.getViewRoot();i.eachNode(function(a){if(!s&&a.piece&&a.piece===r.target){var o=a.getModel().get("nodeClick");if(o==="rootToNode")n._rootToNode(a);else if(o==="link"){var l=a.getModel(),d=l.get("link");if(d){var c=l.get("target",!0)||"_blank";Pk(d,c)}}s=!0}})})},e.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:qE,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},e.prototype.containPoint=function(n,r){var s=r.getData(),i=s.getItemLayout(0);if(i){var a=n[0]-i.cx,o=n[1]-i.cy,l=Math.sqrt(a*a+o*o);return l<=i.r&&l>=i.r0}},e.type="sunburst",e}(On),nKe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return e.prototype.getInitialData=function(n,r){var s={name:n.name,children:n.data};Kie(s);var i=this._levelModels=We(n.levels||[],function(l){return new Tn(l,this,r)},this),a=sI.createTree(s,this,o);function o(l){l.wrapMethod("getItemModel",function(d,c){var f=a.getNodeByDataIndex(c),p=i[f.depth];return p&&(d.parentModel=p),d})}return a.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(n);return r.treePathInfo=bA(s,this),r},e.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){eie(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Jn);function Kie(t){var e=0;de(t.children,function(r){Kie(r);var s=r.value;He(s)&&(s=s[0]),e+=s});var n=t.value;He(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=e),n<0&&(n=0),He(t.value)?t.value[0]=n:t.value=n}var jz=Math.PI/180;function rKe(t,e,n){e.eachSeriesByType(t,function(r){var s=r.get("center"),i=r.get("radius");He(i)||(i=[0,i]),He(s)||(s=[s,s]);var a=n.getWidth(),o=n.getHeight(),l=Math.min(a,o),d=tt(s[0],a),c=tt(s[1],o),f=tt(i[0],l/2),p=tt(i[1],l/2),h=-r.get("startAngle")*jz,m=r.get("minAngle")*jz,g=r.getData().tree.root,y=r.getViewRoot(),x=y.depth,_=r.get("sort");_!=null&&Xie(y,_);var k=0;de(y.children,function(q){!isNaN(q.getValue())&&k++});var w=y.getValue(),S=Math.PI/(w||k)*2,C=y.depth>0,A=y.height-(C?-1:1),M=(p-f)/(A||1),E=r.get("clockwise"),P=r.get("stillShowZeroSum"),I=E?1:-1,F=function(q,V){if(q){var O=V;if(q!==g){var X=q.getValue(),j=w===0&&P?S:X*S;j<m&&(j=m),O=V+I*j;var U=q.depth-x-(C?-1:1),G=f+M*U,ee=f+M*(U+1),ie=r.getLevelModel(q);if(ie){var ne=ie.get("r0",!0),ce=ie.get("r",!0),oe=ie.get("radius",!0);oe!=null&&(ne=oe[0],ce=oe[1]),ne!=null&&(G=tt(ne,l/2)),ce!=null&&(ee=tt(ce,l/2))}q.setLayout({angle:j,startAngle:V,endAngle:O,clockwise:E,cx:d,cy:c,r0:G,r:ee})}if(q.children&&q.children.length){var re=0;de(q.children,function(te){re+=F(te,V+re)})}return O-V}};if(C){var L=f,z=f+M,N=Math.PI*2;g.setLayout({angle:N,startAngle:h,endAngle:h+N,clockwise:E,cx:d,cy:c,r0:L,r:z})}F(y,h)})}function Xie(t,e){var n=t.children||[];t.children=sKe(n,e),n.length&&de(t.children,function(r){Xie(r,e)})}function sKe(t,e){if(bt(e)){var n=We(t,function(s,i){var a=s.getValue();return{params:{depth:s.depth,height:s.height,dataIndex:s.dataIndex,getValue:function(){return a}},index:i}});return n.sort(function(s,i){return e(s.params,i.params)}),We(n,function(s){return t[s.index]})}else{var r=e==="asc";return t.sort(function(s,i){var a=(s.getValue()-i.getValue())*(r?1:-1);return a===0?(s.dataIndex-i.dataIndex)*(r?-1:1):a})}}function iKe(t){var e={};function n(r,s,i){for(var a=r;a&&a.depth>1;)a=a.parentNode;var o=s.getColorFromPalette(a.name||a.dataIndex+"",e);return r.depth>1&&ot(o)&&(o=PM(o,(r.depth-1)/(i-1)*.5)),o}t.eachSeriesByType("sunburst",function(r){var s=r.getData(),i=s.tree;i.eachNode(function(a){var o=a.getModel(),l=o.getModel("itemStyle").getItemStyle();l.fill||(l.fill=n(a,r,i.root.height));var d=s.ensureUniqueItemVisual(a.dataIndex,"style");Ne(d,l)})})}function aKe(t){t.registerChartView(tKe),t.registerSeriesModel(nKe),t.registerLayout(Nt(rKe,"sunburst")),t.registerProcessor(Nt(Fb,"sunburst")),t.registerVisual(iKe),eKe(t)}var Fz={color:"fill",borderColor:"stroke"},oKe={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Gu=ln(),lKe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(n,r){return bd(null,this)},e.prototype.getDataParams=function(n,r,s){var i=t.prototype.getDataParams.call(this,n,r);return s&&(i.info=Gu(s).info),i},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(Jn);function uKe(t,e){return e=e||[0,0],We(["x","y"],function(n,r){var s=this.getAxis(n),i=e[r],a=t[r]/2;return s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(i-a)-s.dataToCoord(i+a))},this)}function dKe(t){var e=t.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(n){return t.dataToPoint(n)},size:ct(uKe,t)}}}function cKe(t,e){return e=e||[0,0],We([0,1],function(n){var r=e[n],s=t[n]/2,i=[],a=[];return i[n]=r-s,a[n]=r+s,i[1-n]=a[1-n]=e[1-n],Math.abs(this.dataToPoint(i)[n]-this.dataToPoint(a)[n])},this)}function fKe(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(n){return t.dataToPoint(n)},size:ct(cKe,t)}}}function pKe(t,e){var n=this.getAxis(),r=e instanceof Array?e[0]:e,s=(t instanceof Array?t[0]:t)/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(r-s)-n.dataToCoord(r+s))}function hKe(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(n){return t.dataToPoint(n)},size:ct(pKe,t)}}}function mKe(t,e){return e=e||[0,0],We(["Radius","Angle"],function(n,r){var s="get"+n+"Axis",i=this[s](),a=e[r],o=t[r]/2,l=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-o)-i.dataToCoord(a+o));return n==="Angle"&&(l=l*Math.PI/180),l},this)}function gKe(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:r[1],r0:r[0]},api:{coord:function(s){var i=e.dataToRadius(s[0]),a=n.dataToAngle(s[1]),o=t.coordToPoint([i,a]);return o.push(i,a*Math.PI/180),o},size:ct(mKe,t)}}}function vKe(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(r,s){return t.dataToPoint(r,s)}}}}function Qie(t,e,n,r){return t&&(t.legacy||t.legacy!==!1&&!n&&!r&&e!=="tspan"&&(e==="text"||pt(t,"text")))}function Zie(t,e,n){var r=t,s,i,a;if(e==="text")a=r;else{a={},pt(r,"text")&&(a.text=r.text),pt(r,"rich")&&(a.rich=r.rich),pt(r,"textFill")&&(a.fill=r.textFill),pt(r,"textStroke")&&(a.stroke=r.textStroke),pt(r,"fontFamily")&&(a.fontFamily=r.fontFamily),pt(r,"fontSize")&&(a.fontSize=r.fontSize),pt(r,"fontStyle")&&(a.fontStyle=r.fontStyle),pt(r,"fontWeight")&&(a.fontWeight=r.fontWeight),i={type:"text",style:a,silent:!0},s={};var o=pt(r,"textPosition");n?s.position=o?r.textPosition:"inside":o&&(s.position=r.textPosition),pt(r,"textPosition")&&(s.position=r.textPosition),pt(r,"textOffset")&&(s.offset=r.textOffset),pt(r,"textRotation")&&(s.rotation=r.textRotation),pt(r,"textDistance")&&(s.distance=r.textDistance)}return Bz(a,t),de(a.rich,function(l){Bz(l,l)}),{textConfig:s,textContent:i}}function Bz(t,e){e&&(e.font=e.textFont||e.font,pt(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),pt(e,"textAlign")&&(t.align=e.textAlign),pt(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),pt(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),pt(e,"textWidth")&&(t.width=e.textWidth),pt(e,"textHeight")&&(t.height=e.textHeight),pt(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),pt(e,"textPadding")&&(t.padding=e.textPadding),pt(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),pt(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),pt(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),pt(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),pt(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),pt(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),pt(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}function zz(t,e,n){var r=t;r.textPosition=r.textPosition||n.position||"inside",n.offset!=null&&(r.textOffset=n.offset),n.rotation!=null&&(r.textRotation=n.rotation),n.distance!=null&&(r.textDistance=n.distance);var s=r.textPosition.indexOf("inside")>=0,i=t.fill||"#000";Uz(r,e);var a=r.textFill==null;return s?a&&(r.textFill=n.insideFill||"#fff",!r.textStroke&&n.insideStroke&&(r.textStroke=n.insideStroke),!r.textStroke&&(r.textStroke=i),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(a&&(r.textFill=t.fill||n.outsideFill||"#000"),!r.textStroke&&n.outsideStroke&&(r.textStroke=n.outsideStroke)),r.text=e.text,r.rich=e.rich,de(e.rich,function(o){Uz(o,o)}),r}function Uz(t,e){e&&(pt(e,"fill")&&(t.textFill=e.fill),pt(e,"stroke")&&(t.textStroke=e.fill),pt(e,"lineWidth")&&(t.textStrokeWidth=e.lineWidth),pt(e,"font")&&(t.font=e.font),pt(e,"fontStyle")&&(t.fontStyle=e.fontStyle),pt(e,"fontWeight")&&(t.fontWeight=e.fontWeight),pt(e,"fontSize")&&(t.fontSize=e.fontSize),pt(e,"fontFamily")&&(t.fontFamily=e.fontFamily),pt(e,"align")&&(t.textAlign=e.align),pt(e,"verticalAlign")&&(t.textVerticalAlign=e.verticalAlign),pt(e,"lineHeight")&&(t.textLineHeight=e.lineHeight),pt(e,"width")&&(t.textWidth=e.width),pt(e,"height")&&(t.textHeight=e.height),pt(e,"backgroundColor")&&(t.textBackgroundColor=e.backgroundColor),pt(e,"padding")&&(t.textPadding=e.padding),pt(e,"borderColor")&&(t.textBorderColor=e.borderColor),pt(e,"borderWidth")&&(t.textBorderWidth=e.borderWidth),pt(e,"borderRadius")&&(t.textBorderRadius=e.borderRadius),pt(e,"shadowColor")&&(t.textBoxShadowColor=e.shadowColor),pt(e,"shadowBlur")&&(t.textBoxShadowBlur=e.shadowBlur),pt(e,"shadowOffsetX")&&(t.textBoxShadowOffsetX=e.shadowOffsetX),pt(e,"shadowOffsetY")&&(t.textBoxShadowOffsetY=e.shadowOffsetY),pt(e,"textShadowColor")&&(t.textShadowColor=e.textShadowColor),pt(e,"textShadowBlur")&&(t.textShadowBlur=e.textShadowBlur),pt(e,"textShadowOffsetX")&&(t.textShadowOffsetX=e.textShadowOffsetX),pt(e,"textShadowOffsetY")&&(t.textShadowOffsetY=e.textShadowOffsetY))}var Jie={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Hz=sn(Jie);Bl(Ul,function(t,e){return t[e]=1,t},{});Ul.join(", ");var eS=["","style","shape","extra"],Sg=ln();function wI(t,e,n,r,s){var i=t+"Animation",a=Fg(t,r,s)||{},o=Sg(e).userDuring;return a.duration>0&&(a.during=o?ct(wKe,{el:e,userDuring:o}):null,a.setToFinal=!0,a.scope=t),Ne(a,n[i]),a}function Bw(t,e,n,r){r=r||{};var s=r.dataIndex,i=r.isInit,a=r.clearStyle,o=n.isAnimationEnabled(),l=Sg(t),d=e.style;l.userDuring=e.during;var c={},f={};if(SKe(t,e,f),Wz("shape",e,f),Wz("extra",e,f),!i&&o&&(kKe(t,e,c),qz("shape",t,e,c),qz("extra",t,e,c),CKe(t,e,d,c)),f.style=d,yKe(t,f,a),xKe(t,e),o)if(i){var p={};de(eS,function(m){var g=m?e[m]:e;g&&g.enterFrom&&(m&&(p[m]=p[m]||{}),Ne(m?p[m]:p,g.enterFrom))});var h=wI("enter",t,e,n,s);h.duration>0&&t.animateFrom(p,h)}else bKe(t,e,s||0,n,c);eae(t,e),d?t.dirty():t.markRedraw()}function eae(t,e){for(var n=Sg(t).leaveToProps,r=0;r<eS.length;r++){var s=eS[r],i=s?e[s]:e;i&&i.leaveTo&&(n||(n=Sg(t).leaveToProps={}),s&&(n[s]=n[s]||{}),Ne(s?n[s]:n,i.leaveTo))}}function wA(t,e,n,r){if(t){var s=t.parent,i=Sg(t).leaveToProps;if(i){var a=wI("update",t,e,n,0);a.done=function(){s.remove(t)},t.animateTo(i,a)}else s.remove(t)}}function Vp(t){return t==="all"}function yKe(t,e,n){var r=e.style;if(!t.isGroup&&r){if(n){t.useStyle({});for(var s=t.animators,i=0;i<s.length;i++){var a=s[i];a.targetName==="style"&&a.changeTarget(t.style)}}t.setStyle(r)}e&&(e.style=null,e&&t.attr(e),e.style=r)}function bKe(t,e,n,r,s){if(s){var i=wI("update",t,e,r,n);i.duration>0&&t.animateFrom(s,i)}}function xKe(t,e){pt(e,"silent")&&(t.silent=e.silent),pt(e,"ignore")&&(t.ignore=e.ignore),t instanceof oo&&pt(e,"invisible")&&(t.invisible=e.invisible),t instanceof en&&pt(e,"autoBatch")&&(t.autoBatch=e.autoBatch)}var il={},_Ke={setTransform:function(t,e){return il.el[t]=e,this},getTransform:function(t){return il.el[t]},setShape:function(t,e){var n=il.el,r=n.shape||(n.shape={});return r[t]=e,n.dirtyShape&&n.dirtyShape(),this},getShape:function(t){var e=il.el.shape;if(e)return e[t]},setStyle:function(t,e){var n=il.el,r=n.style;return r&&(r[t]=e,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(t){var e=il.el.style;if(e)return e[t]},setExtra:function(t,e){var n=il.el.extra||(il.el.extra={});return n[t]=e,this},getExtra:function(t){var e=il.el.extra;if(e)return e[t]}};function wKe(){var t=this,e=t.el;if(e){var n=Sg(e).userDuring,r=t.userDuring;if(n!==r){t.el=t.userDuring=null;return}il.el=e,r(_Ke)}}function qz(t,e,n,r){var s=n[t];if(s){var i=e[t],a;if(i){var o=n.transition,l=s.transition;if(l)if(!a&&(a=r[t]={}),Vp(l))Ne(a,i);else for(var d=In(l),c=0;c<d.length;c++){var f=d[c],p=i[f];a[f]=p}else if(Vp(o)||Xt(o,t)>=0){!a&&(a=r[t]={});for(var h=sn(i),c=0;c<h.length;c++){var f=h[c],p=i[f];AKe(s[f],p)&&(a[f]=p)}}}}}function Wz(t,e,n){var r=e[t];if(r)for(var s=n[t]={},i=sn(r),a=0;a<i.length;a++){var o=i[a];s[o]=u0(r[o])}}function kKe(t,e,n){for(var r=e.transition,s=Vp(r)?Ul:In(r||[]),i=0;i<s.length;i++){var a=s[i];if(!(a==="style"||a==="shape"||a==="extra")){var o=t[a];n[a]=o}}}function SKe(t,e,n){for(var r=0;r<Hz.length;r++){var s=Hz[r],i=Jie[s],a=e[s];a&&(n[i[0]]=a[0],n[i[1]]=a[1])}for(var r=0;r<Ul.length;r++){var o=Ul[r];e[o]!=null&&(n[o]=e[o])}}function CKe(t,e,n,r){if(n){var s=t.style,i;if(s){var a=n.transition,o=e.transition;if(a&&!Vp(a)){var l=In(a);!i&&(i=r.style={});for(var d=0;d<l.length;d++){var c=l[d],f=s[c];i[c]=f}}else if(t.getAnimationStyleProps&&(Vp(o)||Vp(a)||Xt(o,"style")>=0)){var p=t.getAnimationStyleProps(),h=p?p.style:null;if(h){!i&&(i=r.style={});for(var m=sn(n),d=0;d<m.length;d++){var c=m[d];if(h[c]){var f=s[c];i[c]=f}}}}}}}function AKe(t,e){return si(t)?t!==e:t!=null&&isFinite(t)}var tae=ln(),TKe=["percent","easing","shape","style","extra"];function nae(t){t.stopAnimation("keyframe"),t.attr(tae(t))}function tS(t,e,n){if(!(!n.isAnimationEnabled()||!e)){if(He(e)){de(e,function(o){tS(t,o,n)});return}var r=e.keyframes,s=e.duration;if(n&&s==null){var i=Fg("enter",n,0);s=i&&i.duration}if(!(!r||!s)){var a=tae(t);de(eS,function(o){if(!(o&&!t[o])){var l;r.sort(function(d,c){return d.percent-c.percent}),de(r,function(d){var c=t.animators,f=o?d[o]:d;if(f){var p=sn(f);if(o||(p=Sn(p,function(g){return Xt(TKe,g)<0})),!!p.length){l||(l=t.animate(o,e.loop,!0),l.scope="keyframe");for(var h=0;h<c.length;h++)c[h]!==l&&c[h].targetName===l.targetName&&c[h].stopTracks(p);o&&(a[o]=a[o]||{});var m=o?a[o]:a;de(p,function(g){m[g]=((o?t[o]:t)||{})[g]}),l.whenWithKeys(s*d.percent,f,p,d.easing)}}}),l&&l.delay(e.delay||0).duration(s).start(e.easing)}})}}}var Yu="emphasis",cc="normal",kI="blur",SI="select",Bc=[cc,Yu,kI,SI],e5={normal:["itemStyle"],emphasis:[Yu,"itemStyle"],blur:[kI,"itemStyle"],select:[SI,"itemStyle"]},t5={normal:["label"],emphasis:[Yu,"label"],blur:[kI,"label"],select:[SI,"label"]},$Ke=["x","y"],MKe="e\0\0",$a={normal:{},emphasis:{},blur:{},select:{}},EKe={cartesian2d:dKe,geo:fKe,single:hKe,polar:gKe,calendar:vKe};function WE(t){return t instanceof en}function GE(t){return t instanceof oo}function DKe(t,e){e.copyTransform(t),GE(e)&&GE(t)&&(e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel,e.invisible=t.invisible,e.ignore=t.ignore,WE(e)&&WE(t)&&e.setShape(t.shape))}var RKe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s,i){this._progressiveEls=null;var a=this._data,o=n.getData(),l=this.group,d=Gz(n,o,r,s);a||l.removeAll(),o.diff(a).add(function(f){n5(s,null,f,d(f,i),n,l,o)}).remove(function(f){var p=a.getItemGraphicEl(f);p&&wA(p,Gu(p).option,n)}).update(function(f,p){var h=a.getItemGraphicEl(p);n5(s,h,f,d(f,i),n,l,o)}).execute();var c=n.get("clip",!0)?Nb(n.coordinateSystem,!1,n):null;c?l.setClipPath(c):l.removeClipPath(),this._data=o},e.prototype.incrementalPrepareRender=function(n,r,s){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(n,r,s,i,a){var o=r.getData(),l=Gz(r,o,s,i),d=this._progressiveEls=[];function c(h){h.isGroup||(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var f=n.start;f<n.end;f++){var p=n5(null,null,f,l(f,a),r,this.group,o);p&&(p.traverse(c),d.push(p))}},e.prototype.eachRendered=function(n){Xc(this._progressiveEls||this.group,n)},e.prototype.filterForExposedEvent=function(n,r,s,i){var a=r.element;if(a==null||s.name===a)return!0;for(;(s=s.__hostTarget||s.parent)&&s!==this.group;)if(s.name===a)return!0;return!1},e.type="custom",e}(On);function CI(t){var e=t.type,n;if(e==="path"){var r=t.shape,s=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,i=iae(r);n=ZC(i,null,s,r.layout||"center"),Gu(n).customPathData=i}else if(e==="image")n=new Cs({}),Gu(n).customImagePath=t.style.image;else if(e==="text")n=new dn({});else if(e==="group")n=new Tt;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=h6(e);if(!a){var o="";kn(o)}n=new a}return Gu(n).customGraphicType=e,n.name=t.name,n.z2EmphasisLift=1,n.z2SelectLift=1,n}function AI(t,e,n,r,s,i,a){nae(e);var o=s&&s.normal.cfg;o&&e.setTextConfig(o),r&&r.transition==null&&(r.transition=$Ke);var l=r&&r.style;if(l){if(e.type==="text"){var d=l;pt(d,"textFill")&&(d.fill=d.textFill),pt(d,"textStroke")&&(d.stroke=d.textStroke)}var c=void 0,f=WE(e)?l.decal:null;t&&f&&(f.dirty=!0,c=bg(f,t)),l.__decalPattern=c}if(GE(e)&&l){var c=l.__decalPattern;c&&(l.decal=c)}Bw(e,r,i,{dataIndex:n,isInit:a,clearStyle:!0}),tS(e,r.keyframeAnimation,i)}function rae(t,e,n,r,s){var i=e.isGroup?null:e,a=s&&s[t].cfg;if(i){var o=i.ensureState(t);if(r===!1){var l=i.getState(t);l&&(l.style=null)}else o.style=r||null;a&&(o.textConfig=a),Jp(i)}}function PKe(t,e,n){if(!t.isGroup){var r=t,s=n.currentZ,i=n.currentZLevel;r.z=s,r.zlevel=i;var a=e.z2;a!=null&&(r.z2=a||0);for(var o=0;o<Bc.length;o++)IKe(r,e,Bc[o])}}function IKe(t,e,n){var r=n===cc,s=r?e:nS(e,n),i=s?s.z2:null,a;i!=null&&(a=r?t:t.ensureState(n),a.z2=i||0)}function Gz(t,e,n,r){var s=t.get("renderItem"),i=t.coordinateSystem,a={};i&&(a=i.prepareCustoms?i.prepareCustoms(i):EKe[i.type](i));for(var o=_t({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:w,style:C,ordinalRawValue:S,styleEmphasis:A,visual:P,barLayout:I,currentSeriesIndices:F,font:L},a.api||{}),l={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:a.coordSys,dataInsideLength:e.count(),encode:OKe(t.getData())},d,c,f={},p={},h={},m={},g=0;g<Bc.length;g++){var y=Bc[g];h[y]=t.getModel(e5[y]),m[y]=t.getModel(t5[y])}function x(z){return z===d?c||(c=e.getItemModel(z)):e.getItemModel(z)}function _(z,N){return e.hasItemOption?z===d?f[N]||(f[N]=x(z).getModel(e5[N])):x(z).getModel(e5[N]):h[N]}function k(z,N){return e.hasItemOption?z===d?p[N]||(p[N]=x(z).getModel(t5[N])):x(z).getModel(t5[N]):m[N]}return function(z,N){return d=z,c=null,f={},p={},s&&s(_t({dataIndexInside:z,dataIndex:e.getRawIndex(z),actionType:N?N.type:null},l),o)};function w(z,N){return N==null&&(N=d),e.getStore().get(e.getDimensionIndex(z||0),N)}function S(z,N){N==null&&(N=d),z=z||0;var q=e.getDimensionInfo(z);if(!q){var V=e.getDimensionIndex(z);return V>=0?e.getStore().get(V,N):void 0}var O=e.get(q.name,N),X=q&&q.ordinalMeta;return X?X.categories[O]:O}function C(z,N){N==null&&(N=d);var q=e.getItemVisual(N,"style"),V=q&&q.fill,O=q&&q.opacity,X=_(N,cc).getItemStyle();V!=null&&(X.fill=V),O!=null&&(X.opacity=O);var j={inheritColor:ot(V)?V:"#000"},U=k(N,cc),G=Xn(U,null,j,!1,!0);G.text=U.getShallow("show")?Ot(t.getFormattedLabel(N,cc),_g(e,N)):null;var ee=Dk(U,j,!1);return E(z,X),X=zz(X,G,ee),z&&M(X,z),X.legacy=!0,X}function A(z,N){N==null&&(N=d);var q=_(N,Yu).getItemStyle(),V=k(N,Yu),O=Xn(V,null,null,!0,!0);O.text=V.getShallow("show")?Dl(t.getFormattedLabel(N,Yu),t.getFormattedLabel(N,cc),_g(e,N)):null;var X=Dk(V,null,!0);return E(z,q),q=zz(q,O,X),z&&M(q,z),q.legacy=!0,q}function M(z,N){for(var q in N)pt(N,q)&&(z[q]=N[q])}function E(z,N){z&&(z.textFill&&(N.textFill=z.textFill),z.textPosition&&(N.textPosition=z.textPosition))}function P(z,N){if(N==null&&(N=d),pt(Fz,z)){var q=e.getItemVisual(N,"style");return q?q[Fz[z]]:null}if(pt(oKe,z))return e.getItemVisual(N,z)}function I(z){if(i.type==="cartesian2d"){var N=i.getBaseAxis();return SFe(_t({axis:N},z))}}function F(){return n.getCurrentSeriesIndices()}function L(z){return m6(z,n)}}function OKe(t){var e={};return de(t.dimensions,function(n){var r=t.getDimensionInfo(n);if(!r.isExtraCoord){var s=r.coordDim,i=e[s]=e[s]||[];i[r.coordDimIndex]=t.getDimensionIndex(n)}}),e}function n5(t,e,n,r,s,i,a){if(!r){i.remove(e);return}var o=TI(t,e,n,r,s,i);return o&&a.setItemGraphicEl(n,o),o&&kr(o,r.focus,r.blurScope,r.emphasisDisabled),o}function TI(t,e,n,r,s,i){var a=-1,o=e;e&&sae(e,r,s)&&(a=Xt(i.childrenRef(),e),e=null);var l=!e,d=e;d?d.clearStates():(d=CI(r),o&&DKe(o,d)),r.morph===!1?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),$a.normal.cfg=$a.normal.conOpt=$a.emphasis.cfg=$a.emphasis.conOpt=$a.blur.cfg=$a.blur.conOpt=$a.select.cfg=$a.select.conOpt=null,$a.isLegacy=!1,VKe(d,n,r,s,l,$a),LKe(d,n,r,s,l),AI(t,d,n,r,$a,s,l),pt(r,"info")&&(Gu(d).info=r.info);for(var c=0;c<Bc.length;c++){var f=Bc[c];if(f!==cc){var p=nS(r,f),h=$I(r,p,f);rae(f,d,p,h,$a)}}return PKe(d,r,s),r.type==="group"&&NKe(t,d,n,r,s),a>=0?i.replaceAt(d,a):i.add(d),d}function sae(t,e,n){var r=Gu(t),s=e.type,i=e.shape,a=e.style;return n.isUniversalTransitionEnabled()||s!=null&&s!==r.customGraphicType||s==="path"&&zKe(i)&&iae(i)!==r.customPathData||s==="image"&&pt(a,"image")&&a.image!==r.customImagePath}function LKe(t,e,n,r,s){var i=n.clipPath;if(i===!1)t&&t.getClipPath()&&t.removeClipPath();else if(i){var a=t.getClipPath();a&&sae(a,i,r)&&(a=null),a||(a=CI(i),t.setClipPath(a)),AI(null,a,e,i,null,r,s)}}function VKe(t,e,n,r,s,i){if(!t.isGroup){Yz(n,null,i),Yz(n,Yu,i);var a=i.normal.conOpt,o=i.emphasis.conOpt,l=i.blur.conOpt,d=i.select.conOpt;if(a!=null||o!=null||d!=null||l!=null){var c=t.getTextContent();if(a===!1)c&&t.removeTextContent();else{a=i.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=CI(a),t.setTextContent(c)),AI(null,c,e,a,null,r,s);for(var f=a&&a.style,p=0;p<Bc.length;p++){var h=Bc[p];if(h!==cc){var m=i[h].conOpt;rae(h,c,m,$I(a,m,h),null)}}f?c.dirty():c.markRedraw()}}}}function Yz(t,e,n){var r=e?nS(t,e):t,s=e?$I(t,r,Yu):t.style,i=t.type,a=r?r.textConfig:null,o=t.textContent,l=o?e?nS(o,e):o:null;if(s&&(n.isLegacy||Qie(s,i,!!a,!!l))){n.isLegacy=!0;var d=Zie(s,i,!e);!a&&d.textConfig&&(a=d.textConfig),!l&&d.textContent&&(l=d.textContent)}if(!e&&l){var c=l;!c.type&&(c.type="text")}var f=e?n[e]:n.normal;f.cfg=a,f.conOpt=l}function nS(t,e){return e?t?t[e]:null:t}function $I(t,e,n){var r=e&&e.style;return r==null&&n===Yu&&t&&(r=t.styleEmphasis),r}function NKe(t,e,n,r,s){var i=r.children,a=i?i.length:0,o=r.$mergeChildren,l=o==="byName"||r.diffChildrenByName,d=o===!1;if(!(!a&&!l&&!d)){if(l){FKe({api:t,oldChildren:e.children()||[],newChildren:i||[],dataIndex:n,seriesModel:s,group:e});return}d&&e.removeAll();for(var c=0;c<a;c++){var f=i[c],p=e.childAt(c);f?(f.ignore==null&&(f.ignore=!1),TI(t,p,n,f,s,e)):p.ignore=!0}for(var h=e.childCount()-1;h>=c;h--){var m=e.childAt(h);jKe(e,m,s)}}}function jKe(t,e,n){e&&wA(e,Gu(t).option,n)}function FKe(t){new ld(t.oldChildren,t.newChildren,Kz,Kz,t).add(Xz).update(Xz).remove(BKe).execute()}function Kz(t,e){var n=t&&t.name;return n!=null?n:MKe+e}function Xz(t,e){var n=this.context,r=t!=null?n.newChildren[t]:null,s=e!=null?n.oldChildren[e]:null;TI(n.api,s,n.dataIndex,r,n.seriesModel,n.group)}function BKe(t){var e=this.context,n=e.oldChildren[t];n&&wA(n,Gu(n).option,e.seriesModel)}function iae(t){return t&&(t.pathData||t.d)}function zKe(t){return t&&(pt(t,"pathData")||pt(t,"d"))}function UKe(t){t.registerChartView(RKe),t.registerSeriesModel(lKe)}var Qf=ln(),Qz=kt,r5=ct,MI=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(e,n,r,s){var i=n.get("value"),a=n.get("status");if(this._axisModel=e,this._axisPointerModel=n,this._api=r,!(!s&&this._lastValue===i&&this._lastStatus===a)){this._lastValue=i,this._lastStatus=a;var o=this._group,l=this._handle;if(!a||a==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var d={};this.makeElOption(d,i,e,n,r);var c=d.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(e,n);if(!o)o=this._group=new Tt,this.createPointerEl(o,d,e,n),this.createLabelEl(o,d,e,n),r.getZr().add(o);else{var p=Nt(Zz,n,f);this.updatePointerEl(o,d,p),this.updateLabelEl(o,d,p,n)}eU(o,n,!0),this._renderHandle(i)}},t.prototype.remove=function(e){this.clear(e)},t.prototype.dispose=function(e){this.clear(e)},t.prototype.determineAnimation=function(e,n){var r=n.get("animation"),s=e.axis,i=s.type==="category",a=n.get("snap");if(!a&&!i)return!1;if(r==="auto"||r==null){var o=this.animationThreshold;if(i&&s.getBandWidth()>o)return!0;if(a){var l=Q6(e).seriesDataCount,d=s.getExtent();return Math.abs(d[0]-d[1])/l>o}return!1}return r===!0},t.prototype.makeElOption=function(e,n,r,s,i){},t.prototype.createPointerEl=function(e,n,r,s){var i=n.pointer;if(i){var a=Qf(e).pointerEl=new vh[i.type](Qz(n.pointer));e.add(a)}},t.prototype.createLabelEl=function(e,n,r,s){if(n.label){var i=Qf(e).labelEl=new dn(Qz(n.label));e.add(i),Jz(i,s)}},t.prototype.updatePointerEl=function(e,n,r){var s=Qf(e).pointerEl;s&&n.pointer&&(s.setStyle(n.pointer.style),r(s,{shape:n.pointer.shape}))},t.prototype.updateLabelEl=function(e,n,r,s){var i=Qf(e).labelEl;i&&(i.setStyle(n.label.style),r(i,{x:n.label.x,y:n.label.y}),Jz(i,s))},t.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,r=this._api.getZr(),s=this._handle,i=n.getModel("handle"),a=n.get("status");if(!i.get("show")||!a||a==="hide"){s&&r.remove(s),this._handle=null;return}var o;this._handle||(o=!0,s=this._handle=Db(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){sd(d.event)},onmousedown:r5(this._onHandleDragMove,this,0,0),drift:r5(this._onHandleDragMove,this),ondragend:r5(this._onHandleDragEnd,this)}),r.add(s)),eU(s,n,!1),s.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=i.get("size");He(l)||(l=[l,l]),s.scaleX=l[0]/2,s.scaleY=l[1]/2,Gg(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},t.prototype._moveHandleToValue=function(e,n){Zz(this._axisPointerModel,!n&&this._moveAnimation,this._handle,s5(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(e,n){var r=this._handle;if(r){this._dragging=!0;var s=this.updateHandleTransform(s5(r),[e,n],this._axisModel,this._axisPointerModel);this._payloadInfo=s,r.stopAnimation(),r.attr(s5(s)),Qf(r).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var n=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var n=e.getZr(),r=this._group,s=this._handle;n&&r&&(this._lastGraphicKey=null,r&&n.remove(r),s&&n.remove(s),this._group=null,this._handle=null,this._payloadInfo=null),C1(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(e,n,r){return r=r||0,{x:e[r],y:e[1-r],width:n[r],height:n[1-r]}},t}();function Zz(t,e,n,r){aae(Qf(n).lastProp,r)||(Qf(n).lastProp=r,e?bn(n,r,t):(n.stopAnimation(),n.attr(r)))}function aae(t,e){if(wt(t)&&wt(e)){var n=!0;return de(e,function(r,s){n=n&&aae(t[s],r)}),!!n}else return t===e}function Jz(t,e){t[e.get(["label","show"])?"show":"hide"]()}function s5(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function eU(t,e,n){var r=e.get("z"),s=e.get("zlevel");t&&t.traverse(function(i){i.type!=="group"&&(r!=null&&(i.z=r),s!=null&&(i.zlevel=s),i.silent=n)})}function EI(t){var e=t.get("type"),n=t.getModel(e+"Style"),r;return e==="line"?(r=n.getLineStyle(),r.fill=null):e==="shadow"&&(r=n.getAreaStyle(),r.stroke=null),r}function oae(t,e,n,r,s){var i=n.get("value"),a=lae(i,e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),o=n.getModel("label"),l=Ug(o.get("padding")||0),d=o.getFont(),c=Sb(a,d),f=s.position,p=c.width+l[1]+l[3],h=c.height+l[0]+l[2],m=s.align;m==="right"&&(f[0]-=p),m==="center"&&(f[0]-=p/2);var g=s.verticalAlign;g==="bottom"&&(f[1]-=h),g==="middle"&&(f[1]-=h/2),HKe(f,p,h,r);var y=o.get("backgroundColor");(!y||y==="auto")&&(y=e.get(["axisLine","lineStyle","color"])),t.label={x:f[0],y:f[1],style:Xn(o,{text:a,font:d,fill:o.getTextColor(),padding:l,backgroundColor:y}),z2:10}}function HKe(t,e,n,r){var s=r.getWidth(),i=r.getHeight();t[0]=Math.min(t[0]+e,s)-e,t[1]=Math.min(t[1]+n,i)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function lae(t,e,n,r,s){t=e.scale.parse(t);var i=e.scale.getLabel({value:t},{precision:s.precision}),a=s.formatter;if(a){var o={value:F6(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};de(r,function(l){var d=n.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=d&&d.getDataParams(c);f&&o.seriesData.push(f)}),ot(a)?i=a.replace("{value}",i):bt(a)&&(i=a(o))}return i}function DI(t,e,n){var r=va();return mh(r,r,n.rotation),zl(r,r,n.position),Do([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function uae(t,e,n,r,s,i){var a=ki.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=s.get(["label","margin"]),oae(e,r,s,i,{position:DI(r.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function RI(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}}function dae(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}function tU(t,e,n,r,s,i){return{cx:t,cy:e,r0:n,r,startAngle:s,endAngle:i,clockwise:!0}}var qKe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,s,i,a){var o=s.axis,l=o.grid,d=i.get("type"),c=nU(l,o).getOtherAxis(o).getGlobalExtent(),f=o.toGlobalCoord(o.dataToCoord(r,!0));if(d&&d!=="none"){var p=EI(i),h=WKe[d](o,f,c);h.style=p,n.graphicKey=h.type,n.pointer=h}var m=TE(l.model,s);uae(r,n,m,s,i,a)},e.prototype.getHandleTransform=function(n,r,s){var i=TE(r.axis.grid.model,r,{labelInside:!1});i.labelMargin=s.get(["handle","margin"]);var a=DI(r.axis,n,i);return{x:a[0],y:a[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(n,r,s,i){var a=s.axis,o=a.grid,l=a.getGlobalExtent(!0),d=nU(o,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,f=[n.x,n.y];f[c]+=r[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var p=(d[1]+d[0])/2,h=[p,p];h[c]=f[c];var m=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:n.rotation,cursorPoint:h,tooltipOption:m[c]}},e}(MI);function nU(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var WKe={line:function(t,e,n){var r=RI([e,n[0]],[e,n[1]],rU(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=Math.max(1,t.getBandWidth()),s=n[1]-n[0];return{type:"Rect",shape:dae([e-r/2,n[0]],[r,s],rU(t))}}};function rU(t){return t.dim==="x"?0:1}var GKe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(nn),ju=ln(),YKe=de;function cae(t,e,n){if(!tn.node){var r=e.getZr();ju(r).records||(ju(r).records={}),KKe(r,e);var s=ju(r).records[t]||(ju(r).records[t]={});s.handler=n}}function KKe(t,e){if(ju(t).initialized)return;ju(t).initialized=!0,n("click",Nt(sU,"click")),n("mousemove",Nt(sU,"mousemove")),n("globalout",QKe);function n(r,s){t.on(r,function(i){var a=ZKe(e);YKe(ju(t).records,function(o){o&&s(o,i,a.dispatchAction)}),XKe(a.pendings,e)})}}function XKe(t,e){var n=t.showTip.length,r=t.hideTip.length,s;n?s=t.showTip[n-1]:r&&(s=t.hideTip[r-1]),s&&(s.dispatchAction=null,e.dispatchAction(s))}function QKe(t,e,n){t.handler("leave",null,n)}function sU(t,e,n,r){e.handler(t,n,r)}function ZKe(t){var e={showTip:[],hideTip:[]},n=function(r){var s=e[r.type];s?s.push(r):(r.dispatchAction=n,t.dispatchAction(r))};return{dispatchAction:n,pendings:e}}function YE(t,e){if(!tn.node){var n=e.getZr(),r=(ju(n).records||{})[t];r&&(ju(n).records[t]=null)}}var JKe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){var i=r.getComponent("tooltip"),a=n.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";cae("axisPointer",s,function(o,l,d){a!=="none"&&(o==="leave"||a.indexOf(o)>=0)&&d({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(n,r){YE("axisPointer",r)},e.prototype.dispose=function(n,r){YE("axisPointer",r)},e.type="axisPointer",e}(vr);function fae(t,e){var n=[],r=t.seriesIndex,s;if(r==null||!(s=e.getSeriesByIndex(r)))return{point:[]};var i=s.getData(),a=Qp(i,t);if(a==null||a<0||He(a))return{point:[]};var o=i.getItemGraphicEl(a),l=s.coordinateSystem;if(s.getTooltipPosition)n=s.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(t.isStacked){var d=l.getBaseAxis(),c=l.getOtherAxis(d),f=c.dim,p=d.dim,h=f==="x"||f==="radius"?1:0,m=i.mapDimension(p),g=[];g[h]=i.get(m,a),g[1-h]=i.get(i.getCalculationInfo("stackResultDimension"),a),n=l.dataToPoint(g)||[]}else n=l.dataToPoint(i.getValues(We(l.dimensions,function(x){return i.mapDimension(x)}),a))||[];else if(o){var y=o.getBoundingRect().clone();y.applyTransform(o.transform),n=[y.x+y.width/2,y.y+y.height/2]}return{point:n,el:o}}var iU=ln();function eXe(t,e,n){var r=t.currTrigger,s=[t.x,t.y],i=t,a=t.dispatchAction||ct(n.dispatchAction,n),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){zw(s)&&(s=fae({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},e).point);var l=zw(s),d=i.axesInfo,c=o.axesInfo,f=r==="leave"||zw(s),p={},h={},m={list:[],map:{}},g={showPointer:Nt(nXe,h),showTooltip:Nt(rXe,m)};de(o.coordSysMap,function(x,_){var k=l||x.containPoint(s);de(o.coordSysAxesInfo[_],function(w,S){var C=w.axis,A=oXe(d,w);if(!f&&k&&(!d||A)){var M=A&&A.value;M==null&&!l&&(M=C.pointToData(s)),M!=null&&aU(w,M,g,!1,p)}})});var y={};return de(c,function(x,_){var k=x.linkGroup;k&&!h[_]&&de(k.axesInfo,function(w,S){var C=h[S];if(w!==x&&C){var A=C.value;k.mapper&&(A=x.axis.scale.parse(k.mapper(A,oU(w),oU(x)))),y[x.key]=A}})}),de(y,function(x,_){aU(c[_],x,g,!0,p)}),sXe(h,c,p),iXe(m,s,t,a),aXe(c,a,n),p}}function aU(t,e,n,r,s){var i=t.axis;if(!(i.scale.isBlank()||!i.containData(e))){if(!t.involveSeries){n.showPointer(t,e);return}var a=tXe(e,t),o=a.payloadBatch,l=a.snapToValue;o[0]&&s.seriesIndex==null&&Ne(s,o[0]),!r&&t.snap&&i.containData(l)&&l!=null&&(e=l),n.showPointer(t,e,o),n.showTooltip(t,a,l)}}function tXe(t,e){var n=e.axis,r=n.dim,s=t,i=[],a=Number.MAX_VALUE,o=-1;return de(e.seriesModels,function(l,d){var c=l.getData().mapDimensionsAll(r),f,p;if(l.getAxisTooltipData){var h=l.getAxisTooltipData(c,t,n);p=h.dataIndices,f=h.nestestValue}else{if(p=l.getData().indicesOfNearest(c[0],t,n.type==="category"?.5:null),!p.length)return;f=l.getData().get(c[0],p[0])}if(!(f==null||!isFinite(f))){var m=t-f,g=Math.abs(m);g<=a&&((g<a||m>=0&&o<0)&&(a=g,o=m,s=f,i.length=0),de(p,function(y){i.push({seriesIndex:l.seriesIndex,dataIndexInside:y,dataIndex:l.getData().getRawIndex(y)})}))}}),{payloadBatch:i,snapToValue:s}}function nXe(t,e,n,r){t[e.key]={value:n,payloadBatch:r}}function rXe(t,e,n,r){var s=n.payloadBatch,i=e.axis,a=i.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!s.length)){var l=e.coordSys.model,d=R1(l),c=t.map[d];c||(c=t.map[d]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:i.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:r,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:s.slice()})}}function sXe(t,e,n){var r=n.axesInfo=[];de(e,function(s,i){var a=s.axisPointerModel.option,o=t[i];o?(!s.useHandle&&(a.status="show"),a.value=o.value,a.seriesDataIndices=(o.payloadBatch||[]).slice()):!s.useHandle&&(a.status="hide"),a.status==="show"&&r.push({axisDim:s.axis.dim,axisIndex:s.axis.model.componentIndex,value:a.value})})}function iXe(t,e,n,r){if(zw(e)||!t.list.length){r({type:"hideTip"});return}var s=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:s.dataIndexInside,dataIndex:s.dataIndex,seriesIndex:s.seriesIndex,dataByCoordSys:t.list})}function aXe(t,e,n){var r=n.getZr(),s="axisPointerLastHighlights",i=iU(r)[s]||{},a=iU(r)[s]={};de(t,function(d,c){var f=d.axisPointerModel.option;f.status==="show"&&d.triggerEmphasis&&de(f.seriesDataIndices,function(p){var h=p.seriesIndex+" | "+p.dataIndex;a[h]=p})});var o=[],l=[];de(i,function(d,c){!a[c]&&l.push(d)}),de(a,function(d,c){!i[c]&&o.push(d)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function oXe(t,e){for(var n=0;n<(t||[]).length;n++){var r=t[n];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function oU(t){var e=t.axis.model,n={},r=n.axisDim=t.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=e.componentIndex,n.axisName=n[r+"AxisName"]=e.name,n.axisId=n[r+"AxisId"]=e.id,n}function zw(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function Hb(t){_h.registerAxisPointerClass("CartesianAxisPointer",qKe),t.registerComponentModel(GKe),t.registerComponentView(JKe),t.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var n=e.axisPointer.link;n&&!He(n)&&(e.axisPointer.link=[n])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(e,n){e.getComponent("axisPointer").coordSysAxesInfo=vUe(e,n)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},eXe)}function lXe(t){Qt(Fse),Qt(Hb)}var uXe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,s,i,a){var o=s.axis;o.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=o.polar,d=l.getOtherAxis(o),c=d.getExtent(),f=o.dataToCoord(r),p=i.get("type");if(p&&p!=="none"){var h=EI(i),m=cXe[p](o,l,f,c);m.style=h,n.graphicKey=m.type,n.pointer=m}var g=i.get(["label","margin"]),y=dXe(r,s,i,l,g);oae(n,s,i,a,y)},e}(MI);function dXe(t,e,n,r,s){var i=e.axis,a=i.dataToCoord(t),o=r.getAngleAxis().getExtent()[0];o=o/180*Math.PI;var l=r.getRadiusAxis().getExtent(),d,c,f;if(i.dim==="radius"){var p=va();mh(p,p,o),zl(p,p,[r.cx,r.cy]),d=Do([a,-s],p);var h=e.getModel("axisLabel").get("rotate")||0,m=ki.innerTextLayout(o,h*Math.PI/180,-1);c=m.textAlign,f=m.textVerticalAlign}else{var g=l[1];d=r.coordToPoint([g+s,a]);var y=r.cx,x=r.cy;c=Math.abs(d[0]-y)/g<.3?"center":d[0]>y?"left":"right",f=Math.abs(d[1]-x)/g<.3?"middle":d[1]>x?"top":"bottom"}return{position:d,align:c,verticalAlign:f}}var cXe={line:function(t,e,n,r){return t.dim==="angle"?{type:"Line",shape:RI(e.coordToPoint([r[0],n]),e.coordToPoint([r[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,r){var s=Math.max(1,t.getBandWidth()),i=Math.PI/180;return t.dim==="angle"?{type:"Sector",shape:tU(e.cx,e.cy,r[0],r[1],(-n-s/2)*i,(-n+s/2)*i)}:{type:"Sector",shape:tU(e.cx,e.cy,n-s/2,n+s/2,0,Math.PI*2)}}},fXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.findAxisModel=function(n){var r,s=this.ecModel;return s.eachComponent(n,function(i){i.getCoordSysModel()===this&&(r=i)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(nn),PI=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Br).models[0]},e.type="polarAxis",e}(nn);Gr(PI,Ob);var pXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="angleAxis",e}(PI),hXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="radiusAxis",e}(PI),II=function(t){Te(e,t);function e(n,r){return t.call(this,"radius",n,r)||this}return e.prototype.pointToData=function(n,r){return this.polar.pointToData(n,r)[this.dim==="radius"?0:1]},e}(Ho);II.prototype.dataToRadius=Ho.prototype.dataToCoord;II.prototype.radiusToData=Ho.prototype.coordToData;var mXe=ln(),OI=function(t){Te(e,t);function e(n,r){return t.call(this,"angle",n,r||[0,360])||this}return e.prototype.pointToData=function(n,r){return this.polar.pointToData(n,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var n=this,r=n.getLabelModel(),s=n.scale,i=s.getExtent(),a=s.count();if(i[1]-i[0]<1)return 0;var o=i[0],l=n.dataToCoord(o+1)-n.dataToCoord(o),d=Math.abs(l),c=Sb(o==null?"":o+"",r.getFont(),"center","top"),f=Math.max(c.height,7),p=f/d;isNaN(p)&&(p=1/0);var h=Math.max(0,Math.floor(p)),m=mXe(n.model),g=m.lastAutoInterval,y=m.lastTickCount;return g!=null&&y!=null&&Math.abs(g-h)<=1&&Math.abs(y-a)<=1&&g>h?h=g:(m.lastTickCount=a,m.lastAutoInterval=h),h},e}(Ho);OI.prototype.dataToAngle=Ho.prototype.dataToCoord;OI.prototype.angleToData=Ho.prototype.coordToData;var pae=["radius","angle"],gXe=function(){function t(e){this.dimensions=pae,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new II,this._angleAxis=new OI,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(e){var n=this.pointToCoord(e);return this._radiusAxis.contain(n[0])&&this._angleAxis.contain(n[1])},t.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},t.prototype.getAxis=function(e){var n="_"+e+"Axis";return this[n]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(e){var n=[],r=this._angleAxis,s=this._radiusAxis;return r.scale.type===e&&n.push(r),s.scale.type===e&&n.push(s),n},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(e){var n=this._angleAxis;return e===n?this._radiusAxis:n},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(e){var n=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[n],otherAxes:[this.getOtherAxis(n)]}},t.prototype.dataToPoint=function(e,n){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],n),this._angleAxis.dataToAngle(e[1],n)])},t.prototype.pointToData=function(e,n){var r=this.pointToCoord(e);return[this._radiusAxis.radiusToData(r[0],n),this._angleAxis.angleToData(r[1],n)]},t.prototype.pointToCoord=function(e){var n=e[0]-this.cx,r=e[1]-this.cy,s=this.getAngleAxis(),i=s.getExtent(),a=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]);s.inverse?a=o-360:o=a+360;var l=Math.sqrt(n*n+r*r);n/=l,r/=l;for(var d=Math.atan2(-r,n)/Math.PI*180,c=d<a?1:-1;d<a||d>o;)d+=c*360;return[l,d]},t.prototype.coordToPoint=function(e){var n=e[0],r=e[1]/180*Math.PI,s=Math.cos(r)*n+this.cx,i=-Math.sin(r)*n+this.cy;return[s,i]},t.prototype.getArea=function(){var e=this.getAngleAxis(),n=this.getRadiusAxis(),r=n.getExtent().slice();r[0]>r[1]&&r.reverse();var s=e.getExtent(),i=Math.PI/180,a=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-s[0]*i,endAngle:-s[1]*i,clockwise:e.inverse,contain:function(o,l){var d=o-this.cx,c=l-this.cy,f=d*d+c*c,p=this.r,h=this.r0;return p!==h&&f-a<=p*p&&f+a>=h*h}}},t.prototype.convertToPixel=function(e,n,r){var s=lU(n);return s===this?this.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,n,r){var s=lU(n);return s===this?this.pointToData(r):null},t}();function lU(t){var e=t.seriesModel,n=t.polarModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}function vXe(t,e,n){var r=e.get("center"),s=n.getWidth(),i=n.getHeight();t.cx=tt(r[0],s),t.cy=tt(r[1],i);var a=t.getRadiusAxis(),o=Math.min(s,i)/2,l=e.get("radius");l==null?l=[0,"100%"]:He(l)||(l=[0,l]);var d=[tt(l[0],o),tt(l[1],o)];a.inverse?a.setExtent(d[1],d[0]):a.setExtent(d[0],d[1])}function yXe(t,e){var n=this,r=n.getAngleAxis(),s=n.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),s.scale.setExtent(1/0,-1/0),t.eachSeries(function(o){if(o.coordinateSystem===n){var l=o.getData();de(Uk(l,"radius"),function(d){s.scale.unionExtentFromData(l,d)}),de(Uk(l,"angle"),function(d){r.scale.unionExtentFromData(l,d)})}}),xg(r.scale,r.model),xg(s.scale,s.model),r.type==="category"&&!r.onBand){var i=r.getExtent(),a=360/r.scale.count();r.inverse?i[1]+=a:i[1]-=a,r.setExtent(i[0],i[1])}}function bXe(t){return t.mainType==="angleAxis"}function uU(t,e){var n;if(t.type=e.get("type"),t.scale=mA(e),t.onBand=e.get("boundaryGap")&&t.type==="category",t.inverse=e.get("inverse"),bXe(e)){t.inverse=t.inverse!==e.get("clockwise");var r=e.get("startAngle"),s=(n=e.get("endAngle"))!==null&&n!==void 0?n:r+(t.inverse?-360:360);t.setExtent(r,s)}e.axis=t,t.model=e}var xXe={dimensions:pae,create:function(t,e){var n=[];return t.eachComponent("polar",function(r,s){var i=new gXe(s+"");i.update=yXe;var a=i.getRadiusAxis(),o=i.getAngleAxis(),l=r.findAxisModel("radiusAxis"),d=r.findAxisModel("angleAxis");uU(a,l),uU(o,d),vXe(i,r,e),n.push(i),r.coordinateSystem=i,i.model=r}),t.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var s=r.getReferringComponents("polar",Br).models[0];r.coordinateSystem=s.coordinateSystem}}),n}},_Xe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function D_(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var r=t.coordToPoint([e[0],n]),s=t.coordToPoint([e[1],n]);return{x1:r[0],y1:r[1],x2:s[0],y2:s[1]}}function R_(t){var e=t.getRadiusAxis();return e.inverse?0:1}function dU(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}var wXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return e.prototype.render=function(n,r){if(this.group.removeAll(),!!n.get("show")){var s=n.axis,i=s.polar,a=i.getRadiusAxis().getExtent(),o=s.getTicksCoords(),l=s.getMinorTicksCoords(),d=We(s.getViewLabels(),function(c){c=kt(c);var f=s.scale,p=f.type==="ordinal"?f.getRawOrdinalNumber(c.tickValue):c.tickValue;return c.coord=s.dataToCoord(p),c});dU(d),dU(o),de(_Xe,function(c){n.get([c,"show"])&&(!s.scale.isBlank()||c==="axisLine")&&kXe[c](this.group,n,i,o,l,a,d)},this)}},e.type="angleAxis",e}(_h),kXe={axisLine:function(t,e,n,r,s,i){var a=e.getModel(["axisLine","lineStyle"]),o=n.getAngleAxis(),l=Math.PI/180,d=o.getExtent(),c=R_(n),f=c?0:1,p,h=Math.abs(d[1]-d[0])===360?"Circle":"Arc";i[f]===0?p=new vh[h]({shape:{cx:n.cx,cy:n.cy,r:i[c],startAngle:-d[0]*l,endAngle:-d[1]*l,clockwise:o.inverse},style:a.getLineStyle(),z2:1,silent:!0}):p=new Tb({shape:{cx:n.cx,cy:n.cy,r:i[c],r0:i[f]},style:a.getLineStyle(),z2:1,silent:!0}),p.style.fill=null,t.add(p)},axisTick:function(t,e,n,r,s,i){var a=e.getModel("axisTick"),o=(a.get("inside")?-1:1)*a.get("length"),l=i[R_(n)],d=We(r,function(c){return new ls({shape:D_(n,[l,l+o],c.coord)})});t.add(qa(d,{style:_t(a.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,n,r,s,i){if(s.length){for(var a=e.getModel("axisTick"),o=e.getModel("minorTick"),l=(a.get("inside")?-1:1)*o.get("length"),d=i[R_(n)],c=[],f=0;f<s.length;f++)for(var p=0;p<s[f].length;p++)c.push(new ls({shape:D_(n,[d,d+l],s[f][p].coord)}));t.add(qa(c,{style:_t(o.getModel("lineStyle").getLineStyle(),_t(a.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,n,r,s,i,a){var o=e.getCategories(!0),l=e.getModel("axisLabel"),d=l.get("margin"),c=e.get("triggerEvent");de(a,function(f,p){var h=l,m=f.tickValue,g=i[R_(n)],y=n.coordToPoint([g+d,f.coord]),x=n.cx,_=n.cy,k=Math.abs(y[0]-x)/g<.3?"center":y[0]>x?"left":"right",w=Math.abs(y[1]-_)/g<.3?"middle":y[1]>_?"top":"bottom";if(o&&o[m]){var S=o[m];wt(S)&&S.textStyle&&(h=new Tn(S.textStyle,l,l.ecModel))}var C=new dn({silent:ki.isLabelSilent(e),style:Xn(h,{x:y[0],y:y[1],fill:h.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:f.formattedLabel,align:k,verticalAlign:w})});if(t.add(C),c){var A=ki.makeAxisEventDataBase(e);A.targetType="axisLabel",A.value=f.rawLabel,Et(C).eventData=A}},this)},splitLine:function(t,e,n,r,s,i){var a=e.getModel("splitLine"),o=a.getModel("lineStyle"),l=o.get("color"),d=0;l=l instanceof Array?l:[l];for(var c=[],f=0;f<r.length;f++){var p=d++%l.length;c[p]=c[p]||[],c[p].push(new ls({shape:D_(n,i,r[f].coord)}))}for(var f=0;f<c.length;f++)t.add(qa(c[f],{style:_t({stroke:l[f%l.length]},o.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,n,r,s,i){if(s.length){for(var a=e.getModel("minorSplitLine"),o=a.getModel("lineStyle"),l=[],d=0;d<s.length;d++)for(var c=0;c<s[d].length;c++)l.push(new ls({shape:D_(n,i,s[d][c].coord)}));t.add(qa(l,{style:o.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,n,r,s,i){if(r.length){var a=e.getModel("splitArea"),o=a.getModel("areaStyle"),l=o.get("color"),d=0;l=l instanceof Array?l:[l];for(var c=[],f=Math.PI/180,p=-r[0].coord*f,h=Math.min(i[0],i[1]),m=Math.max(i[0],i[1]),g=e.get("clockwise"),y=1,x=r.length;y<=x;y++){var _=y===x?r[0].coord:r[y].coord,k=d++%l.length;c[k]=c[k]||[],c[k].push(new Ri({shape:{cx:n.cx,cy:n.cy,r0:h,r:m,startAngle:p,endAngle:-_*f,clockwise:g},silent:!0})),p=-_*f}for(var y=0;y<c.length;y++)t.add(qa(c[y],{style:_t({fill:l[y%l.length]},o.getAreaStyle()),silent:!0}))}}},SXe=["axisLine","axisTickLabel","axisName"],CXe=["splitLine","splitArea","minorSplitLine"],AXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return e.prototype.render=function(n,r){if(this.group.removeAll(),!!n.get("show")){var s=this._axisGroup,i=this._axisGroup=new Tt;this.group.add(i);var a=n.axis,o=a.polar,l=o.getAngleAxis(),d=a.getTicksCoords(),c=a.getMinorTicksCoords(),f=l.getExtent()[0],p=a.getExtent(),h=$Xe(o,n,f),m=new ki(n,h);de(SXe,m.add,m),i.add(m.getGroup()),Eb(s,i,n),de(CXe,function(g){n.get([g,"show"])&&!a.scale.isBlank()&&TXe[g](this.group,n,o,f,p,d,c)},this)}},e.type="radiusAxis",e}(_h),TXe={splitLine:function(t,e,n,r,s,i){var a=e.getModel("splitLine"),o=a.getModel("lineStyle"),l=o.get("color"),d=0,c=n.getAngleAxis(),f=Math.PI/180,p=c.getExtent(),h=Math.abs(p[1]-p[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var m=[],g=0;g<i.length;g++){var y=d++%l.length;m[y]=m[y]||[],m[y].push(new vh[h]({shape:{cx:n.cx,cy:n.cy,r:Math.max(i[g].coord,0),startAngle:-p[0]*f,endAngle:-p[1]*f,clockwise:c.inverse}}))}for(var g=0;g<m.length;g++)t.add(qa(m[g],{style:_t({stroke:l[g%l.length],fill:null},o.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,n,r,s,i,a){if(a.length){for(var o=e.getModel("minorSplitLine"),l=o.getModel("lineStyle"),d=[],c=0;c<a.length;c++)for(var f=0;f<a[c].length;f++)d.push(new yd({shape:{cx:n.cx,cy:n.cy,r:a[c][f].coord}}));t.add(qa(d,{style:_t({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(t,e,n,r,s,i){if(i.length){var a=e.getModel("splitArea"),o=a.getModel("areaStyle"),l=o.get("color"),d=0;l=l instanceof Array?l:[l];for(var c=[],f=i[0].coord,p=1;p<i.length;p++){var h=d++%l.length;c[h]=c[h]||[],c[h].push(new Ri({shape:{cx:n.cx,cy:n.cy,r0:f,r:i[p].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),f=i[p].coord}for(var p=0;p<c.length;p++)t.add(qa(c[p],{style:_t({fill:l[p%l.length]},o.getAreaStyle()),silent:!0}))}}};function $Xe(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function hae(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function mae(t,e){return e.dim+t.model.componentIndex}function MXe(t,e,n){var r={},s=EXe(Sn(e.getSeriesByType(t),function(i){return!e.isSeriesFiltered(i)&&i.coordinateSystem&&i.coordinateSystem.type==="polar"}));e.eachSeriesByType(t,function(i){if(i.coordinateSystem.type==="polar"){var a=i.getData(),o=i.coordinateSystem,l=o.getBaseAxis(),d=mae(o,l),c=hae(i),f=s[d][c],p=f.offset,h=f.width,m=o.getOtherAxis(l),g=i.coordinateSystem.cx,y=i.coordinateSystem.cy,x=i.get("barMinHeight")||0,_=i.get("barMinAngle")||0;r[c]=r[c]||[];for(var k=a.mapDimension(m.dim),w=a.mapDimension(l.dim),S=jc(a,k),C=l.dim!=="radius"||!i.get("roundCap",!0),A=m.model,M=A.get("startValue"),E=m.dataToCoord(M||0),P=0,I=a.count();P<I;P++){var F=a.get(k,P),L=a.get(w,P),z=F>=0?"p":"n",N=E;S&&(r[c][L]||(r[c][L]={p:E,n:E}),N=r[c][L][z]);var q=void 0,V=void 0,O=void 0,X=void 0;if(m.dim==="radius"){var j=m.dataToCoord(F)-E,U=l.dataToCoord(L);Math.abs(j)<x&&(j=(j<0?-1:1)*x),q=N,V=N+j,O=U-p,X=O-h,S&&(r[c][L][z]=V)}else{var G=m.dataToCoord(F,C)-E,ee=l.dataToCoord(L);Math.abs(G)<_&&(G=(G<0?-1:1)*_),q=ee+p,V=q+h,O=N,X=N+G,S&&(r[c][L][z]=X)}a.setItemLayout(P,{cx:g,cy:y,r0:q,r:V,startAngle:-O*Math.PI/180,endAngle:-X*Math.PI/180,clockwise:O>=X})}}})}function EXe(t){var e={};de(t,function(r,s){var i=r.getData(),a=r.coordinateSystem,o=a.getBaseAxis(),l=mae(a,o),d=o.getExtent(),c=o.type==="category"?o.getBandWidth():Math.abs(d[1]-d[0])/i.count(),f=e[l]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},p=f.stacks;e[l]=f;var h=hae(r);p[h]||f.autoWidthCount++,p[h]=p[h]||{width:0,maxWidth:0};var m=tt(r.get("barWidth"),c),g=tt(r.get("barMaxWidth"),c),y=r.get("barGap"),x=r.get("barCategoryGap");m&&!p[h].width&&(m=Math.min(f.remainedWidth,m),p[h].width=m,f.remainedWidth-=m),g&&(p[h].maxWidth=g),y!=null&&(f.gap=y),x!=null&&(f.categoryGap=x)});var n={};return de(e,function(r,s){n[s]={};var i=r.stacks,a=r.bandWidth,o=tt(r.categoryGap,a),l=tt(r.gap,1),d=r.remainedWidth,c=r.autoWidthCount,f=(d-o)/(c+(c-1)*l);f=Math.max(f,0),de(i,function(g,y){var x=g.maxWidth;x&&x<f&&(x=Math.min(x,d),g.width&&(x=Math.min(x,g.width)),d-=x,g.width=x,c--)}),f=(d-o)/(c+(c-1)*l),f=Math.max(f,0);var p=0,h;de(i,function(g,y){g.width||(g.width=f),h=g,p+=g.width*(1+l)}),h&&(p-=h.width*l);var m=-p/2;de(i,function(g,y){n[s][y]=n[s][y]||{offset:m,width:g.width},m+=g.width*(1+l)})}),n}var DXe={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},RXe={splitNumber:5},PXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="polar",e}(vr);function IXe(t){Qt(Hb),_h.registerAxisPointerClass("PolarAxisPointer",uXe),t.registerCoordinateSystem("polar",xXe),t.registerComponentModel(fXe),t.registerComponentView(PXe),wg(t,"angle",pXe,DXe),wg(t,"radius",hXe,RXe),t.registerComponentView(wXe),t.registerComponentView(AXe),t.registerLayout(Nt(MXe,"bar"))}function KE(t,e){e=e||{};var n=t.coordinateSystem,r=t.axis,s={},i=r.position,a=r.orient,o=n.getRect(),l=[o.x,o.x+o.width,o.y,o.y+o.height],d={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};s.position=[a==="vertical"?d.vertical[i]:l[0],a==="horizontal"?d.horizontal[i]:l[3]];var c={horizontal:0,vertical:1};s.rotation=Math.PI/2*c[a];var f={top:-1,bottom:1,right:1,left:-1};s.labelDirection=s.tickDirection=s.nameDirection=f[i],t.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),xs(e.labelInside,t.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var p=e.rotate;return p==null&&(p=t.get(["axisLabel","rotate"])),s.labelRotation=i==="top"?-p:p,s.z2=1,s}var OXe=["axisLine","axisTickLabel","axisName"],LXe=["splitArea","splitLine"],VXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="SingleAxisPointer",n}return e.prototype.render=function(n,r,s,i){var a=this.group;a.removeAll();var o=this._axisGroup;this._axisGroup=new Tt;var l=KE(n),d=new ki(n,l);de(OXe,d.add,d),a.add(this._axisGroup),a.add(d.getGroup()),de(LXe,function(c){n.get([c,"show"])&&NXe[c](this,this.group,this._axisGroup,n)},this),Eb(o,this._axisGroup,n),t.prototype.render.call(this,n,r,s,i)},e.prototype.remove=function(){Vse(this)},e.type="singleAxis",e}(_h),NXe={splitLine:function(t,e,n,r){var s=r.axis;if(!s.scale.isBlank()){var i=r.getModel("splitLine"),a=i.getModel("lineStyle"),o=a.get("color");o=o instanceof Array?o:[o];for(var l=a.get("width"),d=r.coordinateSystem.getRect(),c=s.isHorizontal(),f=[],p=0,h=s.getTicksCoords({tickModel:i}),m=[],g=[],y=0;y<h.length;++y){var x=s.toGlobalCoord(h[y].coord);c?(m[0]=x,m[1]=d.y,g[0]=x,g[1]=d.y+d.height):(m[0]=d.x,m[1]=x,g[0]=d.x+d.width,g[1]=x);var _=new ls({shape:{x1:m[0],y1:m[1],x2:g[0],y2:g[1]},silent:!0});vg(_.shape,l);var k=p++%o.length;f[k]=f[k]||[],f[k].push(_)}for(var w=a.getLineStyle(["color"]),y=0;y<f.length;++y)e.add(qa(f[y],{style:_t({stroke:o[y%o.length]},w),silent:!0}))}},splitArea:function(t,e,n,r){Lse(t,n,r,r)}},Uw=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(nn);Gr(Uw,Ob.prototype);var jXe=function(t){Te(e,t);function e(n,r,s,i,a){var o=t.call(this,n,r,s)||this;return o.type=i||"value",o.position=a||"bottom",o}return e.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},e.prototype.pointToData=function(n,r){return this.coordinateSystem.pointToData(n)[0]},e}(Ho),gae=["single"],FXe=function(){function t(e,n,r){this.type="single",this.dimension="single",this.dimensions=gae,this.axisPointerEnabled=!0,this.model=e,this._init(e,n,r)}return t.prototype._init=function(e,n,r){var s=this.dimension,i=new jXe(s,mA(e),[0,0],e.get("type"),e.get("position")),a=i.type==="category";i.onBand=a&&e.get("boundaryGap"),i.inverse=e.get("inverse"),i.orient=e.get("orient"),e.axis=i,i.model=e,i.coordinateSystem=this,this._axis=i},t.prototype.update=function(e,n){e.eachSeries(function(r){if(r.coordinateSystem===this){var s=r.getData();de(s.mapDimensionsAll(this.dimension),function(i){this._axis.scale.unionExtentFromData(s,i)},this),xg(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(e,n){this._rect=ts({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:n.getWidth(),height:n.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var e=this._rect,n=this._axis,r=n.isHorizontal(),s=r?[0,e.width]:[0,e.height],i=n.inverse?1:0;n.setExtent(s[i],s[1-i]),this._updateAxisTransform(n,r?e.x:e.y)},t.prototype._updateAxisTransform=function(e,n){var r=e.getExtent(),s=r[0]+r[1],i=e.isHorizontal();e.toGlobalCoord=i?function(a){return a+n}:function(a){return s-a+n},e.toLocalCoord=i?function(a){return a-n}:function(a){return s-a+n}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(e){var n=this.getRect(),r=this.getAxis(),s=r.orient;return s==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=n.y&&e[1]<=n.y+n.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=n.y&&e[0]<=n.y+n.height},t.prototype.pointToData=function(e){var n=this.getAxis();return[n.coordToData(n.toLocalCoord(e[n.orient==="horizontal"?0:1]))]},t.prototype.dataToPoint=function(e){var n=this.getAxis(),r=this.getRect(),s=[],i=n.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),s[i]=n.toGlobalCoord(n.dataToCoord(+e)),s[1-i]=i===0?r.y+r.height/2:r.x+r.width/2,s},t.prototype.convertToPixel=function(e,n,r){var s=cU(n);return s===this?this.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,n,r){var s=cU(n);return s===this?this.pointToData(r):null},t}();function cU(t){var e=t.seriesModel,n=t.singleAxisModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}function BXe(t,e){var n=[];return t.eachComponent("singleAxis",function(r,s){var i=new FXe(r,t,e);i.name="single_"+s,i.resize(r,e),r.coordinateSystem=i,n.push(i)}),t.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var s=r.getReferringComponents("singleAxis",Br).models[0];r.coordinateSystem=s&&s.coordinateSystem}}),n}var zXe={create:BXe,dimensions:gae},fU=["x","y"],UXe=["width","height"],HXe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,s,i,a){var o=s.axis,l=o.coordinateSystem,d=i5(l,1-rS(o)),c=l.dataToPoint(r)[0],f=i.get("type");if(f&&f!=="none"){var p=EI(i),h=qXe[f](o,c,d);h.style=p,n.graphicKey=h.type,n.pointer=h}var m=KE(s);uae(r,n,m,s,i,a)},e.prototype.getHandleTransform=function(n,r,s){var i=KE(r,{labelInside:!1});i.labelMargin=s.get(["handle","margin"]);var a=DI(r.axis,n,i);return{x:a[0],y:a[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(n,r,s,i){var a=s.axis,o=a.coordinateSystem,l=rS(a),d=i5(o,l),c=[n.x,n.y];c[l]+=r[l],c[l]=Math.min(d[1],c[l]),c[l]=Math.max(d[0],c[l]);var f=i5(o,1-l),p=(f[1]+f[0])/2,h=[p,p];return h[l]=c[l],{x:c[0],y:c[1],rotation:n.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}},e}(MI),qXe={line:function(t,e,n){var r=RI([e,n[0]],[e,n[1]],rS(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=t.getBandWidth(),s=n[1]-n[0];return{type:"Rect",shape:dae([e-r/2,n[0]],[r,s],rS(t))}}};function rS(t){return t.isHorizontal()?0:1}function i5(t,e){var n=t.getRect();return[n[fU[e]],n[fU[e]]+n[UXe[e]]]}var WXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="single",e}(vr);function GXe(t){Qt(Hb),_h.registerAxisPointerClass("SingleAxisPointer",HXe),t.registerComponentView(WXe),t.registerComponentView(VXe),t.registerComponentModel(Uw),wg(t,"single",Uw,Uw.defaultOption),t.registerCoordinateSystem("single",zXe)}var YXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r,s){var i=Hg(n);t.prototype.init.apply(this,arguments),pU(n,i)},e.prototype.mergeOption=function(n){t.prototype.mergeOption.apply(this,arguments),pU(this.option,n)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(nn);function pU(t,e){var n=t.cellSize,r;He(n)?r=n:r=t.cellSize=[n,n],r.length===1&&(r[1]=r[0]);var s=We([0,1],function(i){return g7e(e,i)&&(r[i]="auto"),r[i]!=null&&r[i]!=="auto"});Nc(t,e,{type:"box",ignoreSize:s})}var KXe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){var i=this.group;i.removeAll();var a=n.coordinateSystem,o=a.getRangeInfo(),l=a.getOrient(),d=r.getLocaleModel();this._renderDayRect(n,o,i),this._renderLines(n,o,l,i),this._renderYearText(n,o,l,i),this._renderMonthText(n,d,l,i),this._renderWeekText(n,d,o,l,i)},e.prototype._renderDayRect=function(n,r,s){for(var i=n.coordinateSystem,a=n.getModel("itemStyle").getItemStyle(),o=i.getCellWidth(),l=i.getCellHeight(),d=r.start.time;d<=r.end.time;d=i.getNextNDay(d,1).time){var c=i.dataToRect([d],!1).tl,f=new on({shape:{x:c[0],y:c[1],width:o,height:l},cursor:"default",style:a});s.add(f)}},e.prototype._renderLines=function(n,r,s,i){var a=this,o=n.coordinateSystem,l=n.getModel(["splitLine","lineStyle"]).getLineStyle(),d=n.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var f=r.start,p=0;f.time<=r.end.time;p++){m(f.formatedDate),p===0&&(f=o.getDateInfo(r.start.y+"-"+r.start.m));var h=f.date;h.setMonth(h.getMonth()+1),f=o.getDateInfo(h)}m(o.getNextNDay(r.end.time,1).formatedDate);function m(g){a._firstDayOfMonth.push(o.getDateInfo(g)),a._firstDayPoints.push(o.dataToRect([g],!1).tl);var y=a._getLinePointsOfOneWeek(n,g,s);a._tlpoints.push(y[0]),a._blpoints.push(y[y.length-1]),d&&a._drawSplitline(y,l,i)}d&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,c,s),l,i),d&&this._drawSplitline(a._getEdgesPoints(a._blpoints,c,s),l,i)},e.prototype._getEdgesPoints=function(n,r,s){var i=[n[0].slice(),n[n.length-1].slice()],a=s==="horizontal"?0:1;return i[0][a]=i[0][a]-r/2,i[1][a]=i[1][a]+r/2,i},e.prototype._drawSplitline=function(n,r,s){var i=new Ii({z2:20,shape:{points:n},style:r});s.add(i)},e.prototype._getLinePointsOfOneWeek=function(n,r,s){for(var i=n.coordinateSystem,a=i.getDateInfo(r),o=[],l=0;l<7;l++){var d=i.getNextNDay(a.time,l),c=i.dataToRect([d.time],!1);o[2*d.day]=c.tl,o[2*d.day+1]=c[s==="horizontal"?"bl":"tr"]}return o},e.prototype._formatterLabel=function(n,r){return ot(n)&&n?p7e(n,r):bt(n)?n(r):r.nameMap},e.prototype._yearTextPositionControl=function(n,r,s,i,a){var o=r[0],l=r[1],d=["center","bottom"];i==="bottom"?(l+=a,d=["center","top"]):i==="left"?o-=a:i==="right"?(o+=a,d=["center","top"]):l-=a;var c=0;return(i==="left"||i==="right")&&(c=Math.PI/2),{rotation:c,x:o,y:l,style:{align:d[0],verticalAlign:d[1]}}},e.prototype._renderYearText=function(n,r,s,i){var a=n.getModel("yearLabel");if(a.get("show")){var o=a.get("margin"),l=a.get("position");l||(l=s!=="horizontal"?"top":"left");var d=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(d[0][0]+d[1][0])/2,f=(d[0][1]+d[1][1])/2,p=s==="horizontal"?0:1,h={top:[c,d[p][1]],bottom:[c,d[1-p][1]],left:[d[1-p][0],f],right:[d[p][0],f]},m=r.start.y;+r.end.y>+r.start.y&&(m=m+"-"+r.end.y);var g=a.get("formatter"),y={start:r.start.y,end:r.end.y,nameMap:m},x=this._formatterLabel(g,y),_=new dn({z2:30,style:Xn(a,{text:x}),silent:a.get("silent")});_.attr(this._yearTextPositionControl(_,h[l],s,l,o)),i.add(_)}},e.prototype._monthTextPositionControl=function(n,r,s,i,a){var o="left",l="top",d=n[0],c=n[1];return s==="horizontal"?(c=c+a,r&&(o="center"),i==="start"&&(l="bottom")):(d=d+a,r&&(l="middle"),i==="start"&&(o="right")),{x:d,y:c,align:o,verticalAlign:l}},e.prototype._renderMonthText=function(n,r,s,i){var a=n.getModel("monthLabel");if(a.get("show")){var o=a.get("nameMap"),l=a.get("margin"),d=a.get("position"),c=a.get("align"),f=[this._tlpoints,this._blpoints];(!o||ot(o))&&(o&&(r=rE(o)||r),o=r.get(["time","monthAbbr"])||[]);var p=d==="start"?0:1,h=s==="horizontal"?0:1;l=d==="start"?-l:l;for(var m=c==="center",g=a.get("silent"),y=0;y<f[p].length-1;y++){var x=f[p][y].slice(),_=this._firstDayOfMonth[y];if(m){var k=this._firstDayPoints[y];x[h]=(k[h]+f[0][y+1][h])/2}var w=a.get("formatter"),S=o[+_.m-1],C={yyyy:_.y,yy:(_.y+"").slice(2),MM:_.m,M:+_.m,nameMap:S},A=this._formatterLabel(w,C),M=new dn({z2:30,style:Ne(Xn(a,{text:A}),this._monthTextPositionControl(x,m,s,d,l)),silent:g});i.add(M)}}},e.prototype._weekTextPositionControl=function(n,r,s,i,a){var o="center",l="middle",d=n[0],c=n[1],f=s==="start";return r==="horizontal"?(d=d+i+(f?1:-1)*a[0]/2,o=f?"right":"left"):(c=c+i+(f?1:-1)*a[1]/2,l=f?"bottom":"top"),{x:d,y:c,align:o,verticalAlign:l}},e.prototype._renderWeekText=function(n,r,s,i,a){var o=n.getModel("dayLabel");if(o.get("show")){var l=n.coordinateSystem,d=o.get("position"),c=o.get("nameMap"),f=o.get("margin"),p=l.getFirstDayOfWeek();if(!c||ot(c)){c&&(r=rE(c)||r);var h=r.get(["time","dayOfWeekShort"]);c=h||We(r.get(["time","dayOfWeekAbbr"]),function(C){return C[0]})}var m=l.getNextNDay(s.end.time,7-s.lweek).time,g=[l.getCellWidth(),l.getCellHeight()];f=tt(f,Math.min(g[1],g[0])),d==="start"&&(m=l.getNextNDay(s.start.time,-(7+s.fweek)).time,f=-f);for(var y=o.get("silent"),x=0;x<7;x++){var _=l.getNextNDay(m,x),k=l.dataToRect([_.time],!1).center,w=x;w=Math.abs((x+p)%7);var S=new dn({z2:30,style:Ne(Xn(o,{text:c[w]}),this._weekTextPositionControl(k,i,d,f,g)),silent:y});a.add(S)}}},e.type="calendar",e}(vr),a5=864e5,XXe=function(){function t(e,n,r){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(e){e=Hl(e);var n=e.getFullYear(),r=e.getMonth()+1,s=r<10?"0"+r:""+r,i=e.getDate(),a=i<10?"0"+i:""+i,o=e.getDay();return o=Math.abs((o+7-this.getFirstDayOfWeek())%7),{y:n+"",m:s,d:a,day:o,time:e.getTime(),formatedDate:n+"-"+s+"-"+a,date:e}},t.prototype.getNextNDay=function(e,n){return n=n||0,n===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+n),this.getDateInfo(e))},t.prototype.update=function(e,n){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,s=["width","height"],i=this._model.getCellSize().slice(),a=this._model.getBoxLayoutParams(),o=this._orient==="horizontal"?[r,7]:[7,r];de([0,1],function(f){c(i,f)&&(a[s[f]]=i[f]*o[f])});var l={width:n.getWidth(),height:n.getHeight()},d=this._rect=ts(a,l);de([0,1],function(f){c(i,f)||(i[f]=d[s[f]]/o[f])});function c(f,p){return f[p]!=null&&f[p]!=="auto"}this._sw=i[0],this._sh=i[1]},t.prototype.dataToPoint=function(e,n){He(e)&&(e=e[0]),n==null&&(n=!0);var r=this.getDateInfo(e),s=this._rangeInfo,i=r.formatedDate;if(n&&!(r.time>=s.start.time&&r.time<s.end.time+a5))return[NaN,NaN];var a=r.day,o=this._getRangeInfo([s.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]:[this._rect.x+o*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},t.prototype.pointToData=function(e){var n=this.pointToDate(e);return n&&n.time},t.prototype.dataToRect=function(e,n){var r=this.dataToPoint(e,n);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},t.prototype.pointToDate=function(e){var n=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,s=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,n-1,s):this._getDateByWeeksAndDay(n,r-1,s)},t.prototype.convertToPixel=function(e,n,r){var s=hU(n);return s===this?s.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,n,r){var s=hU(n);return s===this?s.pointToData(r):null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var e=this._model.get("range"),n;if(He(e)&&e.length===1&&(e=e[0]),He(e))n=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(n=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var s=this.getDateInfo(r),i=s.date;i.setMonth(i.getMonth()+1);var a=this.getNextNDay(i,-1);n=[s.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(n=[r,r])}if(!n)return e;var o=this._getRangeInfo(n);return o.start.time>o.end.time&&n.reverse(),n},t.prototype._getRangeInfo=function(e){var n=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;n[0].time>n[1].time&&(r=!0,n.reverse());var s=Math.floor(n[1].time/a5)-Math.floor(n[0].time/a5)+1,i=new Date(n[0].time),a=i.getDate(),o=n[1].date.getDate();i.setDate(a+s-1);var l=i.getDate();if(l!==o)for(var d=i.getTime()-n[1].time>0?1:-1;(l=i.getDate())!==o&&(i.getTime()-n[1].time)*d>0;)s-=d,i.setDate(l-d);var c=Math.floor((s+n[0].day+6)/7),f=r?-c+1:c-1;return r&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:s,weeks:c,nthWeek:f,fweek:n[0].day,lweek:n[1].day}},t.prototype._getDateByWeeksAndDay=function(e,n,r){var s=this._getRangeInfo(r);if(e>s.weeks||e===0&&n<s.fweek||e===s.weeks&&n>s.lweek)return null;var i=(e-1)*7-s.fweek+n,a=new Date(s.start.time);return a.setDate(+s.start.d+i),this.getDateInfo(a)},t.create=function(e,n){var r=[];return e.eachComponent("calendar",function(s){var i=new t(s);r.push(i),s.coordinateSystem=i}),e.eachSeries(function(s){s.get("coordinateSystem")==="calendar"&&(s.coordinateSystem=r[s.get("calendarIndex")||0])}),r},t.dimensions=["time","value"],t}();function hU(t){var e=t.calendarModel,n=t.seriesModel,r=e?e.coordinateSystem:n?n.coordinateSystem:null;return r}function QXe(t){t.registerComponentModel(YXe),t.registerComponentView(KXe),t.registerCoordinateSystem("calendar",XXe)}function ZXe(t,e){var n=t.existing;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:n&&(e.parentId=n.parentId)}e.parentOption=null}function mU(t,e){var n;return de(e,function(r){t[r]!=null&&t[r]!=="auto"&&(n=!0)}),n}function JXe(t,e,n){var r=Ne({},n),s=t[e],i=n.$action||"merge";i==="merge"?s?(Ht(s,r,!0),Nc(s,r,{ignoreSize:!0}),dne(n,s),P_(n,s),P_(n,s,"shape"),P_(n,s,"style"),P_(n,s,"extra"),n.clipPath=s.clipPath):t[e]=r:i==="replace"?t[e]=r:i==="remove"&&s&&(t[e]=null)}var vae=["transition","enterFrom","leaveTo"],eQe=vae.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function P_(t,e,n){if(n&&(!t[n]&&e[n]&&(t[n]={}),t=t[n],e=e[n]),!(!t||!e))for(var r=n?vae:eQe,s=0;s<r.length;s++){var i=r[s];t[i]==null&&e[i]!=null&&(t[i]=e[i])}}function tQe(t,e){if(t&&(t.hv=e.hv=[mU(e,["left","right"]),mU(e,["top","bottom"])],t.type==="group")){var n=t,r=e;n.width==null&&(n.width=r.width=0),n.height==null&&(n.height=r.height=0)}}var nQe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return e.prototype.mergeOption=function(n,r){var s=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,n,r),this.option.elements=s},e.prototype.optionUpdated=function(n,r){var s=this.option,i=(r?s:n).elements,a=s.elements=r?[]:s.elements,o=[];this._flatten(i,o,null);var l=ote(a,o,"normalMerge"),d=this._elOptionsToUpdate=[];de(l,function(c,f){var p=c.newOption;p&&(d.push(p),ZXe(c,p),JXe(a,f,p),tQe(a[f],p))},this),s.elements=Sn(a,function(c){return c&&delete c.$action,c!=null})},e.prototype._flatten=function(n,r,s){de(n,function(i){if(i){s&&(i.parentOption=s),r.push(i);var a=i.children;a&&a.length&&this._flatten(a,r,i),delete i.children}},this)},e.prototype.useElOptionsToUpdate=function(){var n=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,n},e.type="graphic",e.defaultOption={elements:[]},e}(nn),gU={path:null,compoundPath:null,group:Tt,image:Cs,text:dn},Oa=ln(),rQe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){this._elMap=mt()},e.prototype.render=function(n,r,s){n!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=n,this._updateElements(n),this._relocate(n,s)},e.prototype._updateElements=function(n){var r=n.useElOptionsToUpdate();if(r){var s=this._elMap,i=this.group,a=n.get("z"),o=n.get("zlevel");de(r,function(l){var d=Qr(l.id,null),c=d!=null?s.get(d):null,f=Qr(l.parentId,null),p=f!=null?s.get(f):i,h=l.type,m=l.style;h==="text"&&m&&l.hv&&l.hv[1]&&(m.textVerticalAlign=m.textBaseline=m.verticalAlign=m.align=null);var g=l.textContent,y=l.textConfig;if(m&&Qie(m,h,!!y,!!g)){var x=Zie(m,h,!0);!y&&x.textConfig&&(y=l.textConfig=x.textConfig),!g&&x.textContent&&(g=x.textContent)}var _=sQe(l),k=l.$action||"merge",w=k==="merge",S=k==="replace";if(w){var C=!c,A=c;C?A=vU(d,p,l.type,s):(A&&(Oa(A).isNew=!1),nae(A)),A&&(Bw(A,_,n,{isInit:C}),yU(A,l,a,o))}else if(S){Hw(c,l,s,n);var M=vU(d,p,l.type,s);M&&(Bw(M,_,n,{isInit:!0}),yU(M,l,a,o))}else k==="remove"&&(eae(c,l),Hw(c,l,s,n));var E=s.get(d);if(E&&g)if(w){var P=E.getTextContent();P?P.attr(g):E.setTextContent(new dn(g))}else S&&E.setTextContent(new dn(g));if(E){var I=l.clipPath;if(I){var F=I.type,L=void 0,C=!1;if(w){var z=E.getClipPath();C=!z||Oa(z).type!==F,L=C?XE(F):z}else S&&(C=!0,L=XE(F));E.setClipPath(L),Bw(L,I,n,{isInit:C}),tS(L,I.keyframeAnimation,n)}var N=Oa(E);E.setTextConfig(y),N.option=l,iQe(E,n,l),gh({el:E,componentModel:n,itemName:E.name,itemTooltipOption:l.tooltip}),tS(E,l.keyframeAnimation,n)}})}},e.prototype._relocate=function(n,r){for(var s=n.option.elements,i=this.group,a=this._elMap,o=r.getWidth(),l=r.getHeight(),d=["x","y"],c=0;c<s.length;c++){var f=s[c],p=Qr(f.id,null),h=p!=null?a.get(p):null;if(!(!h||!h.isGroup)){var m=h.parent,g=m===i,y=Oa(h),x=Oa(m);y.width=tt(y.option.width,g?o:x.width)||0,y.height=tt(y.option.height,g?l:x.height)||0}}for(var c=s.length-1;c>=0;c--){var f=s[c],p=Qr(f.id,null),h=p!=null?a.get(p):null;if(h){var m=h.parent,x=Oa(m),_=m===i?{width:o,height:l}:{width:x.width,height:x.height},k={},w=aA(h,f,_,null,{hv:f.hv,boundingMode:f.bounding},k);if(!Oa(h).isNew&&w){for(var S=f.transition,C={},A=0;A<d.length;A++){var M=d[A],E=k[M];S&&(Vp(S)||Xt(S,M)>=0)?C[M]=E:h[M]=E}bn(h,C,n,0)}else h.attr(k)}}},e.prototype._clear=function(){var n=this,r=this._elMap;r.each(function(s){Hw(s,Oa(s).option,r,n._lastGraphicModel)}),this._elMap=mt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(vr);function XE(t){var e=pt(gU,t)?gU[t]:h6(t),n=new e({});return Oa(n).type=t,n}function vU(t,e,n,r){var s=XE(n);return e.add(s),r.set(t,s),Oa(s).id=t,Oa(s).isNew=!0,s}function Hw(t,e,n,r){var s=t&&t.parent;s&&(t.type==="group"&&t.traverse(function(i){Hw(i,e,n,r)}),wA(t,e,r),n.removeKey(Oa(t).id))}function yU(t,e,n,r){t.isGroup||de([["cursor",oo.prototype.cursor],["zlevel",r||0],["z",n||0],["z2",0]],function(s){var i=s[0];pt(e,i)?t[i]=Ot(e[i],s[1]):t[i]==null&&(t[i]=s[1])}),de(sn(e),function(s){if(s.indexOf("on")===0){var i=e[s];t[s]=bt(i)?i:null}}),pt(e,"draggable")&&(t.draggable=e.draggable),e.name!=null&&(t.name=e.name),e.id!=null&&(t.id=e.id)}function sQe(t){return t=Ne({},t),de(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(une),function(e){delete t[e]}),t}function iQe(t,e,n){var r=Et(t).eventData;!t.silent&&!t.ignore&&!r&&(r=Et(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),r&&(r.info=n.info)}function aQe(t){t.registerComponentModel(nQe),t.registerComponentView(rQe),t.registerPreprocessor(function(e){var n=e.graphic;He(n)?!n[0]||!n[0].elements?e.graphic=[{elements:n}]:e.graphic=[e.graphic[0]]:n&&!n.elements&&(e.graphic=[{elements:[n]}])})}var bU=["x","y","radius","angle","single"],oQe=["cartesian2d","polar","singleAxis"];function lQe(t){var e=t.get("coordinateSystem");return Xt(oQe,e)>=0}function fc(t){return t+"Axis"}function uQe(t,e){var n=mt(),r=[],s=mt();t.eachComponent({mainType:"dataZoom",query:e},function(c){s.get(c.uid)||o(c)});var i;do i=!1,t.eachComponent("dataZoom",a);while(i);function a(c){!s.get(c.uid)&&l(c)&&(o(c),i=!0)}function o(c){s.set(c.uid,!0),r.push(c),d(c)}function l(c){var f=!1;return c.eachTargetAxis(function(p,h){var m=n.get(p);m&&m[h]&&(f=!0)}),f}function d(c){c.eachTargetAxis(function(f,p){(n.get(f)||n.set(f,[]))[p]=!0})}return r}function yae(t){var e=t.ecModel,n={infoList:[],infoMap:mt()};return t.eachTargetAxis(function(r,s){var i=e.getComponent(fc(r),s);if(i){var a=i.getCoordSysModel();if(a){var o=a.uid,l=n.infoMap.get(o);l||(l={model:a,axisModels:[]},n.infoList.push(l),n.infoMap.set(o,l)),l.axisModels.push(i)}}}),n}var o5=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},t}(),N1=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return e.prototype.init=function(n,r,s){var i=xU(n);this.settledOption=i,this.mergeDefaultAndTheme(n,s),this._doInit(i)},e.prototype.mergeOption=function(n){var r=xU(n);Ht(this.option,n,!0),Ht(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(n){var r=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var s=this.settledOption;de([["start","startValue"],["end","endValue"]],function(i,a){this._rangePropMode[a]==="value"&&(r[i[0]]=s[i[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var n=this.get("orient",!0),r=this._targetAxisInfoMap=mt(),s=this._fillSpecifiedTargetAxis(r);s?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(n){var r=!1;return de(bU,function(s){var i=this.getReferringComponents(fc(s),nVe);if(i.specified){r=!0;var a=new o5;de(i.models,function(o){a.add(o.componentIndex)}),n.set(s,a)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(n,r){var s=this.ecModel,i=!0;if(i){var a=r==="vertical"?"y":"x",o=s.findComponents({mainType:a+"Axis"});l(o,a)}if(i){var o=s.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});l(o,"single")}function l(d,c){var f=d[0];if(f){var p=new o5;if(p.add(f.componentIndex),n.set(c,p),i=!1,c==="x"||c==="y"){var h=f.getReferringComponents("grid",Br).models[0];h&&de(d,function(m){f.componentIndex!==m.componentIndex&&h===m.getReferringComponents("grid",Br).models[0]&&p.add(m.componentIndex)})}}}i&&de(bU,function(d){if(i){var c=s.findComponents({mainType:fc(d),filter:function(p){return p.get("type",!0)==="category"}});if(c[0]){var f=new o5;f.add(c[0].componentIndex),n.set(d,f),i=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(r){!n&&(n=r)},this),n==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(n){var r=this._rangePropMode,s=this.get("rangeMode");de([["start","startValue"],["end","endValue"]],function(i,a){var o=n[i[0]]!=null,l=n[i[1]]!=null;o&&!l?r[a]="percent":!o&&l?r[a]="value":s?r[a]=s[a]:o&&(r[a]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(r,s){n==null&&(n=this.ecModel.getComponent(fc(r),s))},this),n},e.prototype.eachTargetAxis=function(n,r){this._targetAxisInfoMap.each(function(s,i){de(s.indexList,function(a){n.call(r,i,a)})})},e.prototype.getAxisProxy=function(n,r){var s=this.getAxisModel(n,r);if(s)return s.__dzAxisProxy},e.prototype.getAxisModel=function(n,r){var s=this._targetAxisInfoMap.get(n);if(s&&s.indexMap[r])return this.ecModel.getComponent(fc(n),r)},e.prototype.setRawRange=function(n){var r=this.option,s=this.settledOption;de([["start","startValue"],["end","endValue"]],function(i){(n[i[0]]!=null||n[i[1]]!=null)&&(r[i[0]]=s[i[0]]=n[i[0]],r[i[1]]=s[i[1]]=n[i[1]])},this),this._updateRangeUse(n)},e.prototype.setCalculatedRange=function(n){var r=this.option;de(["start","startValue","end","endValue"],function(s){r[s]=n[s]})},e.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},e.prototype.getValueRange=function(n,r){if(n==null&&r==null){var s=this.findRepresentativeAxisProxy();if(s)return s.getDataValueWindow()}else return this.getAxisProxy(n,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var r,s=this._targetAxisInfoMap.keys(),i=0;i<s.length;i++)for(var a=s[i],o=this._targetAxisInfoMap.get(a),l=0;l<o.indexList.length;l++){var d=this.getAxisProxy(a,o.indexList[l]);if(d.hostedBy(this))return d;r||(r=d)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(nn);function xU(t){var e={};return de(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var dQe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}(N1),LI=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s,i){this.dataZoomModel=n,this.ecModel=r,this.api=s},e.type="dataZoom",e}(vr),cQe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}(LI),wm=de,_U=Ga,fQe=function(){function t(e,n,r,s){this._dimName=e,this._axisIndex=n,this.ecModel=s,this._dataZoomModel=r}return t.prototype.hostedBy=function(e){return this._dataZoomModel===e},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(n){if(lQe(n)){var r=fc(this._dimName),s=n.getReferringComponents(r,Br).models[0];s&&this._axisIndex===s.componentIndex&&e.push(n)}},this),e},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return kt(this._minMaxSpan)},t.prototype.calculateDataWindow=function(e){var n=this._dataExtent,r=this.getAxisModel(),s=r.axis.scale,i=this._dataZoomModel.getRangePropMode(),a=[0,100],o=[],l=[],d;wm(["start","end"],function(p,h){var m=e[p],g=e[p+"Value"];i[h]==="percent"?(m==null&&(m=a[h]),g=s.parse(An(m,a,n))):(d=!0,g=g==null?n[h]:s.parse(g),m=An(g,n,a)),l[h]=g==null||isNaN(g)?n[h]:g,o[h]=m==null||isNaN(m)?a[h]:m}),_U(l),_U(o);var c=this._minMaxSpan;d?f(l,o,n,a,!1):f(o,l,a,n,!0);function f(p,h,m,g,y){var x=y?"Span":"ValueSpan";wh(0,p,m,"all",c["min"+x],c["max"+x]);for(var _=0;_<2;_++)h[_]=An(p[_],m,g,!0),y&&(h[_]=s.parse(h[_]))}return{valueWindow:l,percentWindow:o}},t.prototype.reset=function(e){if(e===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=pQe(this,this._dimName,n),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(e,n){if(e!==this._dataZoomModel)return;var r=this._dimName,s=this.getTargetSeriesModels(),i=e.get("filterMode"),a=this._valueWindow;if(i==="none")return;wm(s,function(l){var d=l.getData(),c=d.mapDimensionsAll(r);if(c.length){if(i==="weakFilter"){var f=d.getStore(),p=We(c,function(h){return d.getDimensionIndex(h)},d);d.filterSelf(function(h){for(var m,g,y,x=0;x<c.length;x++){var _=f.get(p[x],h),k=!isNaN(_),w=_<a[0],S=_>a[1];if(k&&!w&&!S)return!0;k&&(y=!0),w&&(m=!0),S&&(g=!0)}return y&&m&&g})}else wm(c,function(h){if(i==="empty")l.setData(d=d.map(h,function(g){return o(g)?g:NaN}));else{var m={};m[h]=a,d.selectRange(m)}});wm(c,function(h){d.setApproximateExtent(a,h)})}});function o(l){return l>=a[0]&&l<=a[1]}},t.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},n=this._dataZoomModel,r=this._dataExtent;wm(["min","max"],function(s){var i=n.get(s+"Span"),a=n.get(s+"ValueSpan");a!=null&&(a=this.getAxisModel().axis.scale.parse(a)),a!=null?i=An(r[0]+a,r,[0,100],!0):i!=null&&(a=An(i,[0,100],r,!0)-r[0]),e[s+"Span"]=i,e[s+"ValueSpan"]=a},this)},t.prototype._setAxisModel=function(){var e=this.getAxisModel(),n=this._percentWindow,r=this._valueWindow;if(n){var s=Jee(r,[0,500]);s=Math.min(s,20);var i=e.axis.scale.rawExtentInfo;n[0]!==0&&i.setDeterminedMinMax("min",+r[0].toFixed(s)),n[1]!==100&&i.setDeterminedMinMax("max",+r[1].toFixed(s)),i.freeze()}},t}();function pQe(t,e,n){var r=[1/0,-1/0];wm(n,function(a){WFe(r,a.getData(),e)});var s=t.getAxisModel(),i=Lre(s.axis.scale,s,r).calculate();return[i.min,i.max]}var hQe={getTargetSeries:function(t){function e(s){t.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(a,o){var l=t.getComponent(fc(a),o);s(a,o,l,i)})})}e(function(s,i,a,o){a.__dzAxisProxy=null});var n=[];e(function(s,i,a,o){a.__dzAxisProxy||(a.__dzAxisProxy=new fQe(s,i,o,t),n.push(a.__dzAxisProxy))});var r=mt();return de(n,function(s){de(s.getTargetSeriesModels(),function(i){r.set(i.uid,i)})}),r},overallReset:function(t,e){t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,s){n.getAxisProxy(r,s).reset(n)}),n.eachTargetAxis(function(r,s){n.getAxisProxy(r,s).filterData(n,e)})}),t.eachComponent("dataZoom",function(n){var r=n.findRepresentativeAxisProxy();if(r){var s=r.getDataPercentWindow(),i=r.getDataValueWindow();n.setCalculatedRange({start:s[0],end:s[1],startValue:i[0],endValue:i[1]})}})}};function mQe(t){t.registerAction("dataZoom",function(e,n){var r=uQe(n,e);de(r,function(s){s.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var wU=!1;function VI(t){wU||(wU=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,hQe),mQe(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function gQe(t){t.registerComponentModel(dQe),t.registerComponentView(cQe),VI(t)}var Fa=function(){function t(){}return t}(),bae={};function km(t,e){bae[t]=e}function xae(t){return bae[t]}var vQe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;de(this.option.feature,function(r,s){var i=xae(s);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(n)),Ht(r,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(nn);function yQe(t,e,n){var r=e.getBoxLayoutParams(),s=e.get("padding"),i={width:n.getWidth(),height:n.getHeight()},a=ts(r,i,s);Op(e.get("orient"),t,e.get("itemGap"),a.width,a.height),aA(t,r,i,s)}function _ae(t,e){var n=Ug(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),t=new on({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),t}var bQe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,s,i){var a=this.group;if(a.removeAll(),!n.get("show"))return;var o=+n.get("itemSize"),l=n.get("orient")==="vertical",d=n.get("feature")||{},c=this._features||(this._features={}),f=[];de(d,function(m,g){f.push(g)}),new ld(this._featureNames||[],f).add(p).update(p).remove(Nt(p,null)).execute(),this._featureNames=f;function p(m,g){var y=f[m],x=f[g],_=d[y],k=new Tn(_,n,n.ecModel),w;if(i&&i.newTitle!=null&&i.featureName===y&&(_.title=i.newTitle),y&&!x){if(xQe(y))w={onclick:k.option.onclick,featureName:y};else{var S=xae(y);if(!S)return;w=new S}c[y]=w}else if(w=c[x],!w)return;w.uid=zg("toolbox-feature"),w.model=k,w.ecModel=r,w.api=s;var C=w instanceof Fa;if(!y&&x){C&&w.dispose&&w.dispose(r,s);return}if(!k.get("show")||C&&w.unusable){C&&w.remove&&w.remove(r,s);return}h(k,w,y),k.setIconStatus=function(A,M){var E=this.option,P=this.iconPaths;E.iconStatus=E.iconStatus||{},E.iconStatus[A]=M,P[A]&&(M==="emphasis"?ad:od)(P[A])},w instanceof Fa&&w.render&&w.render(k,r,s,i)}function h(m,g,y){var x=m.getModel("iconStyle"),_=m.getModel(["emphasis","iconStyle"]),k=g instanceof Fa&&g.getIcons?g.getIcons():m.get("icon"),w=m.get("title")||{},S,C;ot(k)?(S={},S[y]=k):S=k,ot(w)?(C={},C[y]=w):C=w;var A=m.iconPaths={};de(S,function(M,E){var P=Db(M,{},{x:-o/2,y:-o/2,width:o,height:o});P.setStyle(x.getItemStyle());var I=P.ensureState("emphasis");I.style=_.getItemStyle();var F=new dn({style:{text:C[E],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null,font:m6({fontStyle:_.get("textFontStyle"),fontFamily:_.get("textFontFamily"),fontSize:_.get("textFontSize"),fontWeight:_.get("textFontWeight")},r)},ignore:!0});P.setTextContent(F),gh({el:P,componentModel:n,itemName:E,formatterParamsExtra:{title:C[E]}}),P.__title=C[E],P.on("mouseover",function(){var L=_.getItemStyle(),z=l?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";F.setStyle({fill:_.get("textFill")||L.fill||L.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),P.setTextConfig({position:_.get("textPosition")||z}),F.ignore=!n.get("showTitle"),s.enterEmphasis(this)}).on("mouseout",function(){m.get(["iconStatus",E])!=="emphasis"&&s.leaveEmphasis(this),F.hide()}),(m.get(["iconStatus",E])==="emphasis"?ad:od)(P),a.add(P),P.on("click",ct(g.onclick,g,r,s,E)),A[E]=P})}yQe(a,n,s),a.add(_ae(a.getBoundingRect(),n)),l||a.eachChild(function(m){var g=m.__title,y=m.ensureState("emphasis"),x=y.textConfig||(y.textConfig={}),_=m.getTextContent(),k=_&&_.ensureState("emphasis");if(k&&!bt(k)&&g){var w=k.style||(k.style={}),S=Sb(g,dn.makeFont(w)),C=m.x+a.x,A=m.y+a.y+o,M=!1;A+S.height>s.getHeight()&&(x.position="top",M=!0);var E=M?-5-S.height:o+10;C+S.width/2>s.getWidth()?(x.position=["100%",E],w.align="right"):C-S.width/2<0&&(x.position=[0,E],w.align="left")}})},e.prototype.updateView=function(n,r,s,i){de(this._features,function(a){a instanceof Fa&&a.updateView&&a.updateView(a.model,r,s,i)})},e.prototype.remove=function(n,r){de(this._features,function(s){s instanceof Fa&&s.remove&&s.remove(n,r)}),this.group.removeAll()},e.prototype.dispose=function(n,r){de(this._features,function(s){s instanceof Fa&&s.dispose&&s.dispose(n,r)})},e.type="toolbox",e}(vr);function xQe(t){return t.indexOf("my")===0}var _Qe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){var s=this.model,i=s.get("name")||n.get("title.0.text")||"echarts",a=r.getZr().painter.getType()==="svg",o=a?"svg":s.get("type",!0)||"png",l=r.getConnectedDataURL({type:o,backgroundColor:s.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:s.get("connectedBackgroundColor"),excludeComponents:s.get("excludeComponents"),pixelRatio:s.get("pixelRatio")}),d=tn.browser;if(typeof MouseEvent=="function"&&(d.newEdge||!d.ie&&!d.edge)){var c=document.createElement("a");c.download=i+"."+o,c.target="_blank",c.href=l;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||a){var p=l.split(","),h=p[0].indexOf("base64")>-1,m=a?decodeURIComponent(p[1]):p[1];h&&(m=window.atob(m));var g=i+"."+o;if(window.navigator.msSaveOrOpenBlob){for(var y=m.length,x=new Uint8Array(y);y--;)x[y]=m.charCodeAt(y);var _=new Blob([x]);window.navigator.msSaveOrOpenBlob(_,g)}else{var k=document.createElement("iframe");document.body.appendChild(k);var w=k.contentWindow,S=w.document;S.open("image/svg+xml","replace"),S.write(m),S.close(),w.focus(),S.execCommand("SaveAs",!0,g),document.body.removeChild(k)}}else{var C=s.get("lang"),A='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',M=window.open();M.document.write(A),M.document.title=i}},e.getDefaultOption=function(n){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(Fa),kU="__ec_magicType_stack__",wQe=[["line","bar"],["stack"]],kQe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getIcons=function(){var n=this.model,r=n.get("icon"),s={};return de(n.get("type"),function(i){r[i]&&(s[i]=r[i])}),s},e.getDefaultOption=function(n){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(n,r,s){var i=this.model,a=i.get(["seriesIndex",s]);if(SU[s]){var o={series:[]},l=function(f){var p=f.subType,h=f.id,m=SU[s](p,h,f,i);m&&(_t(m,f.option),o.series.push(m));var g=f.coordinateSystem;if(g&&g.type==="cartesian2d"&&(s==="line"||s==="bar")){var y=g.getAxesByScale("ordinal")[0];if(y){var x=y.dim,_=x+"Axis",k=f.getReferringComponents(_,Br).models[0],w=k.componentIndex;o[_]=o[_]||[];for(var S=0;S<=w;S++)o[_][w]=o[_][w]||{};o[_][w].boundaryGap=s==="bar"}}};de(wQe,function(f){Xt(f,s)>=0&&de(f,function(p){i.setIconStatus(p,"normal")})}),i.setIconStatus(s,"emphasis"),n.eachComponent({mainType:"series",query:a==null?null:{seriesIndex:a}},l);var d,c=s;s==="stack"&&(d=Ht({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",s])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:o,newTitle:d,featureName:"magicType"})}},e}(Fa),SU={line:function(t,e,n,r){if(t==="bar")return Ht({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(t,e,n,r){if(t==="line")return Ht({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(t,e,n,r){var s=n.get("stack")===kU;if(t==="line"||t==="bar")return r.setIconStatus("stack",s?"normal":"emphasis"),Ht({id:e,stack:s?"":kU},r.get(["option","stack"])||{},!0)}};Jl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});var kA=new Array(60).join("-"),Cg="	";function SQe(t){var e={},n=[],r=[];return t.eachRawSeries(function(s){var i=s.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var a=i.getBaseAxis();if(a.type==="category"){var o=a.dim+"_"+a.index;e[o]||(e[o]={categoryAxis:a,valueAxis:i.getOtherAxis(a),series:[]},r.push({axisDim:a.dim,axisIndex:a.index})),e[o].series.push(s)}else n.push(s)}else n.push(s)}),{seriesGroupByCategoryAxis:e,other:n,meta:r}}function CQe(t){var e=[];return de(t,function(n,r){var s=n.categoryAxis,i=n.valueAxis,a=i.dim,o=[" "].concat(We(n.series,function(h){return h.name})),l=[s.model.getCategories()];de(n.series,function(h){var m=h.getRawData();l.push(h.getRawData().mapArray(m.mapDimension(a),function(g){return g}))});for(var d=[o.join(Cg)],c=0;c<l[0].length;c++){for(var f=[],p=0;p<l.length;p++)f.push(l[p][c]);d.push(f.join(Cg))}e.push(d.join(`
`))}),e.join(`

`+kA+`

`)}function AQe(t){return We(t,function(e){var n=e.getRawData(),r=[e.name],s=[];return n.each(n.dimensions,function(){for(var i=arguments.length,a=arguments[i-1],o=n.getName(a),l=0;l<i-1;l++)s[l]=arguments[l];r.push((o?o+Cg:"")+s.join(Cg))}),r.join(`
`)}).join(`

`+kA+`

`)}function TQe(t){var e=SQe(t);return{value:Sn([CQe(e.seriesGroupByCategoryAxis),AQe(e.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+kA+`

`),meta:e.meta}}function sS(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function $Qe(t){var e=t.slice(0,t.indexOf(`
`));if(e.indexOf(Cg)>=0)return!0}var QE=new RegExp("["+Cg+"]+","g");function MQe(t){for(var e=t.split(/\n+/g),n=sS(e.shift()).split(QE),r=[],s=We(n,function(l){return{name:l,data:[]}}),i=0;i<e.length;i++){var a=sS(e[i]).split(QE);r.push(a.shift());for(var o=0;o<a.length;o++)s[o]&&(s[o].data[i]=a[o])}return{series:s,categories:r}}function EQe(t){for(var e=t.split(/\n+/g),n=sS(e.shift()),r=[],s=0;s<e.length;s++){var i=sS(e[s]);if(i){var a=i.split(QE),o="",l=void 0,d=!1;isNaN(a[0])?(d=!0,o=a[0],a=a.slice(1),r[s]={name:o,value:[]},l=r[s].value):l=r[s]=[];for(var c=0;c<a.length;c++)l.push(+a[c]);l.length===1&&(d?r[s].value=l[0]:r[s]=l[0])}}return{name:n,data:r}}function DQe(t,e){var n=t.split(new RegExp(`
*`+kA+`
*`,"g")),r={series:[]};return de(n,function(s,i){if($Qe(s)){var a=MQe(s),o=e[i],l=o.axisDim+"Axis";o&&(r[l]=r[l]||[],r[l][o.axisIndex]={data:a.categories},r.series=r.series.concat(a.series))}else{var a=EQe(s);r.series.push(a)}}),r}var RQe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var s=r.getDom(),i=this.model;this._dom&&s.removeChild(this._dom);var a=document.createElement("div");a.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",a.style.backgroundColor=i.get("backgroundColor")||"#fff";var o=document.createElement("h4"),l=i.get("lang")||[];o.innerHTML=l[0]||i.get("title"),o.style.cssText="margin:10px 20px",o.style.color=i.get("textColor");var d=document.createElement("div"),c=document.createElement("textarea");d.style.cssText="overflow:auto";var f=i.get("optionToContent"),p=i.get("contentToOption"),h=TQe(n);if(bt(f)){var m=f(r.getOption());ot(m)?d.innerHTML=m:mg(m)&&d.appendChild(m)}else{c.readOnly=i.get("readOnly");var g=c.style;g.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",g.color=i.get("textColor"),g.borderColor=i.get("textareaBorderColor"),g.backgroundColor=i.get("textareaColor"),c.value=h.value,d.appendChild(c)}var y=h.meta,x=document.createElement("div");x.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",k=document.createElement("div"),w=document.createElement("div");_+=";background-color:"+i.get("buttonColor"),_+=";color:"+i.get("buttonTextColor");var S=this;function C(){s.removeChild(a),S._dom=null}MM(k,"click",C),MM(w,"click",function(){if(p==null&&f!=null||p!=null&&f==null){C();return}var A;try{bt(p)?A=p(d,r.getOption()):A=DQe(c.value,y)}catch(M){throw C(),new Error("Data view format error "+M)}A&&r.dispatchAction({type:"changeDataView",newOption:A}),C()}),k.innerHTML=l[1],w.innerHTML=l[2],w.style.cssText=k.style.cssText=_,!i.get("readOnly")&&x.appendChild(w),x.appendChild(k),a.appendChild(o),a.appendChild(d),a.appendChild(x),d.style.height=s.clientHeight-80+"px",s.appendChild(a),this._dom=a},e.prototype.remove=function(n,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(n,r){this.remove(n,r)},e.getDefaultOption=function(n){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(Fa);function PQe(t,e){return We(t,function(n,r){var s=e&&e[r];if(wt(s)&&!He(s)){var i=wt(n)&&!He(n);i||(n={value:n});var a=s.name!=null&&n.name==null;return n=_t(n,s),a&&delete n.name,n}else return n})}Jl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];de(t.newOption.series,function(r){var s=e.getSeriesByName(r.name)[0];if(!s)n.push(Ne({type:"scatter"},r));else{var i=s.get("data");n.push({name:r.name,data:PQe(r.data,i)})}}),e.mergeOption(_t({series:n},t.newOption))});var wae=de,kae=ln();function IQe(t,e){var n=NI(t);wae(e,function(r,s){for(var i=n.length-1;i>=0;i--){var a=n[i];if(a[s])break}if(i<0){var o=t.queryComponents({mainType:"dataZoom",subType:"select",id:s})[0];if(o){var l=o.getPercentRange();n[0][s]={dataZoomId:s,start:l[0],end:l[1]}}}}),n.push(e)}function OQe(t){var e=NI(t),n=e[e.length-1];e.length>1&&e.pop();var r={};return wae(n,function(s,i){for(var a=e.length-1;a>=0;a--)if(s=e[a][i],s){r[i]=s;break}}),r}function LQe(t){kae(t).snapshots=null}function VQe(t){return NI(t).length}function NI(t){var e=kae(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var NQe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){LQe(n),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(n){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(Fa);Jl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var jQe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],jI=function(){function t(e,n,r){var s=this;this._targetInfoList=[];var i=CU(n,e);de(FQe,function(a,o){(!r||!r.include||Xt(r.include,o)>=0)&&a(i,s._targetInfoList)})}return t.prototype.setOutputRanges=function(e,n){return this.matchOutputRanges(e,n,function(r,s,i){if((r.coordRanges||(r.coordRanges=[])).push(s),!r.coordRange){r.coordRange=s;var a=l5[r.brushType](0,i,s);r.__rangeOffset={offset:MU[r.brushType](a.values,r.range,[1,1]),xyMinMax:a.xyMinMax}}}),e},t.prototype.matchOutputRanges=function(e,n,r){de(e,function(s){var i=this.findTargetInfo(s,n);i&&i!==!0&&de(i.coordSyses,function(a){var o=l5[s.brushType](1,a,s.range,!0);r(s,o.values,a,n)})},this)},t.prototype.setInputRanges=function(e,n){de(e,function(r){var s=this.findTargetInfo(r,n);if(r.range=r.range||[],s&&s!==!0){r.panelId=s.panelId;var i=l5[r.brushType](0,s.coordSys,r.coordRange),a=r.__rangeOffset;r.range=a?MU[r.brushType](i.values,a.offset,BQe(i.xyMinMax,a.xyMinMax)):i.values}},this)},t.prototype.makePanelOpts=function(e,n){return We(this._targetInfoList,function(r){var s=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:n?n(r):null,clipPath:Die(s),isTargetByCursor:Pie(s,e,r.coordSysModel),getLinearBrushOtherExtent:Rie(s)}})},t.prototype.controlSeries=function(e,n,r){var s=this.findTargetInfo(e,r);return s===!0||s&&Xt(s.coordSyses,n.coordinateSystem)>=0},t.prototype.findTargetInfo=function(e,n){for(var r=this._targetInfoList,s=CU(n,e),i=0;i<r.length;i++){var a=r[i],o=e.panelId;if(o){if(a.panelId===o)return a}else for(var l=0;l<AU.length;l++)if(AU[l](s,a))return a}return!0},t}();function ZE(t){return t[0]>t[1]&&t.reverse(),t}function CU(t,e){return c0(t,e,{includeMainTypes:jQe})}var FQe={grid:function(t,e){var n=t.xAxisModels,r=t.yAxisModels,s=t.gridModels,i=mt(),a={},o={};!n&&!r&&!s||(de(n,function(l){var d=l.axis.grid.model;i.set(d.id,d),a[d.id]=!0}),de(r,function(l){var d=l.axis.grid.model;i.set(d.id,d),o[d.id]=!0}),de(s,function(l){i.set(l.id,l),a[l.id]=!0,o[l.id]=!0}),i.each(function(l){var d=l.coordinateSystem,c=[];de(d.getCartesians(),function(f,p){(Xt(n,f.getAxis("x").model)>=0||Xt(r,f.getAxis("y").model)>=0)&&c.push(f)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:TU.grid,xAxisDeclared:a[l.id],yAxisDeclared:o[l.id]})}))},geo:function(t,e){de(t.geoModels,function(n){var r=n.coordinateSystem;e.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:r,coordSyses:[r],getPanelRect:TU.geo})})}},AU=[function(t,e){var n=t.xAxisModel,r=t.yAxisModel,s=t.gridModel;return!s&&n&&(s=n.axis.grid.model),!s&&r&&(s=r.axis.grid.model),s&&s===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],TU={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Ip(t)),e}},l5={lineX:Nt($U,0),lineY:Nt($U,1),rect:function(t,e,n,r){var s=t?e.pointToData([n[0][0],n[1][0]],r):e.dataToPoint([n[0][0],n[1][0]],r),i=t?e.pointToData([n[0][1],n[1][1]],r):e.dataToPoint([n[0][1],n[1][1]],r),a=[ZE([s[0],i[0]]),ZE([s[1],i[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n,r){var s=[[1/0,-1/0],[1/0,-1/0]],i=We(n,function(a){var o=t?e.pointToData(a,r):e.dataToPoint(a,r);return s[0][0]=Math.min(s[0][0],o[0]),s[1][0]=Math.min(s[1][0],o[1]),s[0][1]=Math.max(s[0][1],o[0]),s[1][1]=Math.max(s[1][1],o[1]),o});return{values:i,xyMinMax:s}}};function $U(t,e,n,r){var s=n.getAxis(["x","y"][t]),i=ZE(We([0,1],function(o){return e?s.coordToData(s.toLocalCoord(r[o]),!0):s.toGlobalCoord(s.dataToCoord(r[o]))})),a=[];return a[t]=i,a[1-t]=[NaN,NaN],{values:i,xyMinMax:a}}var MU={lineX:Nt(EU,0),lineY:Nt(EU,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return We(t,function(r,s){return[r[0]-n[0]*e[s][0],r[1]-n[1]*e[s][1]]})}};function EU(t,e,n,r){return[e[0]-r[t]*n[0],e[1]-r[t]*n[1]]}function BQe(t,e){var n=DU(t),r=DU(e),s=[n[0]/r[0],n[1]/r[1]];return isNaN(s[0])&&(s[0]=1),isNaN(s[1])&&(s[1]=1),s}function DU(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var JE=de,zQe=Q8e("toolbox-dataZoom_"),UQe=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,s,i){this._brushController||(this._brushController=new fI(s.getZr()),this._brushController.on("brush",ct(this._onBrush,this)).mount()),WQe(n,r,this,i,s),qQe(n,r)},e.prototype.onclick=function(n,r,s){HQe[s].call(this)},e.prototype.remove=function(n,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(n,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(n){var r=n.areas;if(!n.isEnd||!r.length)return;var s={},i=this.ecModel;this._brushController.updateCovers([]);var a=new jI(FI(this.model),i,{include:["grid"]});a.matchOutputRanges(r,i,function(d,c,f){if(f.type==="cartesian2d"){var p=d.brushType;p==="rect"?(o("x",f,c[0]),o("y",f,c[1])):o({lineX:"x",lineY:"y"}[p],f,c)}}),IQe(i,s),this._dispatchZoomAction(s);function o(d,c,f){var p=c.getAxis(d),h=p.model,m=l(d,h,i),g=m.findRepresentativeAxisProxy(h).getMinMaxSpan();(g.minValueSpan!=null||g.maxValueSpan!=null)&&(f=wh(0,f.slice(),p.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)),m&&(s[m.id]={dataZoomId:m.id,startValue:f[0],endValue:f[1]})}function l(d,c,f){var p;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(h){var m=h.getAxisModel(d,c.componentIndex);m&&(p=h)}),p}},e.prototype._dispatchZoomAction=function(n){var r=[];JE(n,function(s,i){r.push(kt(s))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(n){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(Fa),HQe={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(OQe(this.ecModel))}};function FI(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function qQe(t,e){t.setIconStatus("back",VQe(e)>1?"emphasis":"normal")}function WQe(t,e,n,r,s){var i=n._isZoomActive;r&&r.type==="takeGlobalCursor"&&(i=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),n._isZoomActive=i,t.setIconStatus("zoom",i?"emphasis":"normal");var a=new jI(FI(t),e,{include:["grid"]}),o=a.makePanelOpts(s,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(o).enableBrush(i&&o.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}w7e("dataZoom",function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(!e||e.get(n)==null)return;var r=e.getModel(n),s=[],i=FI(r),a=c0(t,i);JE(a.xAxisModels,function(l){return o(l,"xAxis","xAxisIndex")}),JE(a.yAxisModels,function(l){return o(l,"yAxis","yAxisIndex")});function o(l,d,c){var f=l.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:zQe+d+f};p[c]=f,s.push(p)}return s});function GQe(t){t.registerComponentModel(vQe),t.registerComponentView(bQe),km("saveAsImage",_Qe),km("magicType",kQe),km("dataView",RQe),km("dataZoom",UQe),km("restore",NQe),Qt(gQe)}var YQe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(nn);function Sae(t){var e=t.get("confine");return e!=null?!!e:t.get("renderMode")==="richText"}function Cae(t){if(tn.domSupported){for(var e=document.documentElement.style,n=0,r=t.length;n<r;n++)if(t[n]in e)return t[n]}}var Aae=Cae(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),KQe=Cae(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Tae(t,e){if(!t)return e;e=one(e,!0);var n=t.indexOf(e);return t=n===-1?e:"-"+t.slice(0,n)+"-"+e,t.toLowerCase()}function XQe(t,e){var n=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return n?n[e]:null}var QQe=Tae(KQe,"transition"),BI=Tae(Aae,"transform"),ZQe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(tn.transform3dSupported?"will-change:transform;":"");function JQe(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function eZe(t,e,n){if(!ot(n)||n==="inside")return"";var r=t.get("backgroundColor"),s=t.get("borderWidth");e=eh(e);var i=JQe(n),a=Math.max(Math.round(s)*1.5,6),o="",l=BI+":",d;Xt(["left","right"],i)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(d=i==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(d=i==="top"?225:45)+"deg)");var c=d*Math.PI/180,f=a+s,p=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),h=Math.round(((p-Math.SQRT2*s)/2+Math.SQRT2*s-(p-f)/2)*100)/100;o+=";"+i+":-"+h+"px";var m=e+" solid "+s+"px;",g=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",o+";"+l+";","border-bottom:"+m,"border-right:"+m,"background-color:"+r+";"];return'<div style="'+g.join("")+'"></div>'}function tZe(t,e){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+t/2+"s "+n,s="opacity"+r+",visibility"+r;return e||(r=" "+t+"s "+n,s+=tn.transformSupported?","+BI+r:",left"+r+",top"+r),QQe+":"+s}function RU(t,e,n){var r=t.toFixed(0)+"px",s=e.toFixed(0)+"px";if(!tn.transformSupported)return n?"top:"+s+";left:"+r+";":[["top",s],["left",r]];var i=tn.transform3dSupported,a="translate"+(i?"3d":"")+"("+r+","+s+(i?",0":"")+")";return n?"top:0;left:0;"+BI+":"+a+";":[["top",0],["left",0],[Aae,a]]}function nZe(t){var e=[],n=t.get("fontSize"),r=t.getTextColor();r&&e.push("color:"+r),e.push("font:"+t.getFont());var s=Ot(t.get("lineHeight"),Math.round(n*3/2));n&&e.push("line-height:"+s+"px");var i=t.get("textShadowColor"),a=t.get("textShadowBlur")||0,o=t.get("textShadowOffsetX")||0,l=t.get("textShadowOffsetY")||0;return i&&a&&e.push("text-shadow:"+o+"px "+l+"px "+a+"px "+i),de(["decoration","align"],function(d){var c=t.get(d);c&&e.push("text-"+d+":"+c)}),e.join(";")}function rZe(t,e,n){var r=[],s=t.get("transitionDuration"),i=t.get("backgroundColor"),a=t.get("shadowBlur"),o=t.get("shadowColor"),l=t.get("shadowOffsetX"),d=t.get("shadowOffsetY"),c=t.getModel("textStyle"),f=Bne(t,"html"),p=l+"px "+d+"px "+a+"px "+o;return r.push("box-shadow:"+p),e&&s&&r.push(tZe(s,n)),i&&r.push("background-color:"+i),de(["width","color","radius"],function(h){var m="border-"+h,g=one(m),y=t.get(g);y!=null&&r.push(m+":"+y+(h==="color"?"":"px"))}),r.push(nZe(c)),f!=null&&r.push("padding:"+Ug(f).join("px ")+"px"),r.join(";")+";"}function PU(t,e,n,r,s){var i=e&&e.painter;if(n){var a=i&&i.getViewportRoot();a&&MLe(t,a,n,r,s)}else{t[0]=r,t[1]=s;var o=i&&i.getViewportRootOffset();o&&(t[0]+=o.offsetLeft,t[1]+=o.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var sZe=function(){function t(e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,tn.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var s=this._zr=e.getZr(),i=n.appendTo,a=i&&(ot(i)?document.querySelector(i):mg(i)?i:bt(i)&&i(e.getDom()));PU(this._styleCoord,s,a,e.getWidth()/2,e.getHeight()/2),(a||e.getDom()).appendChild(r),this._api=e,this._container=a;var o=this;r.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!o._enterable){var d=s.handler,c=s.painter.getViewportRoot();Ra(c,l,!0),d.dispatch("mousemove",l)}},r.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return t.prototype.update=function(e){if(!this._container){var n=this._api.getDom(),r=XQe(n,"position"),s=n.style;s.position!=="absolute"&&r!=="absolute"&&(s.position="relative")}var i=e.get("alwaysShowContent");i&&this._moveIfResized(),this._alwaysShowContent=i,this.el.className=e.get("className")||""},t.prototype.show=function(e,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,s=r.style,i=this._styleCoord;r.innerHTML?s.cssText=ZQe+rZe(e,!this._firstShow,this._longHide)+RU(i[0],i[1],!0)+("border-color:"+eh(n)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):s.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(e,n,r,s,i){var a=this.el;if(e==null){a.innerHTML="";return}var o="";if(ot(i)&&r.get("trigger")==="item"&&!Sae(r)&&(o=eZe(r,s,i)),ot(e))a.innerHTML=e+o;else if(e){a.innerHTML="",He(e)||(e=[e]);for(var l=0;l<e.length;l++)mg(e[l])&&e[l].parentNode!==a&&a.appendChild(e[l]);if(o&&a.childNodes.length){var d=document.createElement("div");d.innerHTML=o,a.appendChild(d)}}},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},t.prototype.moveTo=function(e,n){if(this.el){var r=this._styleCoord;if(PU(r,this._zr,this._container,e,n),r[0]!=null&&r[1]!=null){var s=this.el.style,i=RU(r[0],r[1]);de(i,function(a){s[a[0]]=a[1]})}}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){var e=this,n=this.el.style;n.visibility="hidden",n.opacity="0",tn.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ct(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},t}(),iZe=function(){function t(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),OU(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return t.prototype.update=function(e){var n=e.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(e,n,r,s,i){var a=this;wt(e)&&kn(""),this.el&&this._zr.remove(this.el);var o=r.getModel("textStyle");this.el=new dn({style:{rich:n.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:s,textShadowColor:o.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:Bne(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),de(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){a.el.style[d]=r.get(d)}),de(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){a.el.style[d]=o.get(d)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el,n=this.el.getBoundingRect(),r=IU(e.style);return[n.width+r.left+r.right,n.height+r.top+r.bottom]},t.prototype.moveTo=function(e,n){var r=this.el;if(r){var s=this._styleCoord;OU(s,this._zr,e,n),e=s[0],n=s[1];var i=r.style,a=Fd(i.borderWidth||0),o=IU(i);r.x=e+a+o.left,r.y=n+a+o.top,r.markRedraw()}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ct(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function Fd(t){return Math.max(0,t)}function IU(t){var e=Fd(t.shadowBlur||0),n=Fd(t.shadowOffsetX||0),r=Fd(t.shadowOffsetY||0);return{left:Fd(e-n),right:Fd(e+n),top:Fd(e-r),bottom:Fd(e+r)}}function OU(t,e,n,r){t[0]=n,t[1]=r,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var aZe=new on({shape:{x:-1,y:-1,width:2,height:2}}),oZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){if(!(tn.node||!r.getDom())){var s=n.getComponent("tooltip"),i=this._renderMode=sVe(s.get("renderMode"));this._tooltipContent=i==="richText"?new iZe(r):new sZe(r,{appendTo:s.get("appendToBody",!0)?"body":s.get("appendTo",!0)})}},e.prototype.render=function(n,r,s){if(!(tn.node||!s.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=r,this._api=s;var i=this._tooltipContent;i.update(n),i.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?Gg(this,"_updatePosition",50,"fixRate"):C1(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var n=this._tooltipModel,r=n.get("triggerOn");cae("itemTooltip",this._api,ct(function(s,i,a){r!=="none"&&(r.indexOf(s)>=0?this._tryShow(i,a):s==="leave"&&this._hide(a))},this))},e.prototype._keepShow=function(){var n=this._tooltipModel,r=this._ecModel,s=this._api,i=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&i!=="none"&&i!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!s.isDisposed()&&a.manuallyShowTip(n,r,s,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(n,r,s,i){if(!(i.from===this.uid||tn.node||!s.getDom())){var a=LU(i,s);this._ticket="";var o=i.dataByCoordSys,l=cZe(i,r,s);if(l){var d=l.el.getBoundingRect().clone();d.applyTransform(l.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:l.el,position:i.position,positionDefault:"bottom"},a)}else if(i.tooltip&&i.x!=null&&i.y!=null){var c=aZe;c.x=i.x,c.y=i.y,c.update(),Et(c).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:c},a)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:o,tooltipOption:i.tooltipOption},a);else if(i.seriesIndex!=null){if(this._manuallyAxisShowTip(n,r,s,i))return;var f=fae(i,r),p=f.point[0],h=f.point[1];p!=null&&h!=null&&this._tryShow({offsetX:p,offsetY:h,target:f.el,position:i.position,positionDefault:"bottom"},a)}else i.x!=null&&i.y!=null&&(s.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:s.getZr().findHover(i.x,i.y).target},a))}},e.prototype.manuallyHideTip=function(n,r,s,i){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(LU(i,s))},e.prototype._manuallyAxisShowTip=function(n,r,s,i){var a=i.seriesIndex,o=i.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||o==null||l==null)){var d=r.getSeriesByIndex(a);if(d){var c=d.getData(),f=Yv([c.getItemModel(o),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return s.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:o,position:i.position}),!0}}},e.prototype._tryShow=function(n,r){var s=n.target,i=this._tooltipModel;if(i){this._lastX=n.offsetX,this._lastY=n.offsetY;var a=n.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,n);else if(s){var o=Et(s);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,d;up(s,function(c){if(Et(c).dataIndex!=null)return l=c,!0;if(Et(c).tooltipConfig!=null)return d=c,!0},!0),l?this._showSeriesItemTooltip(n,l,r):d?this._showComponentItemTooltip(n,d,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(n,r){var s=n.get("showDelay");r=ct(r,this),clearTimeout(this._showTimout),s>0?this._showTimout=setTimeout(r,s):r()},e.prototype._showAxisTooltip=function(n,r){var s=this._ecModel,i=this._tooltipModel,a=[r.offsetX,r.offsetY],o=Yv([r.tooltipOption],i),l=this._renderMode,d=[],c=hs("section",{blocks:[],noHeader:!0}),f=[],p=new YT;de(n,function(_){de(_.dataByAxis,function(k){var w=s.getComponent(k.axisDim+"Axis",k.axisIndex),S=k.value;if(!(!w||S==null)){var C=lae(S,w.axis,s,k.seriesDataIndices,k.valueLabelOpt),A=hs("section",{header:C,noHeader:!Ao(C),sortBlocks:!0,blocks:[]});c.blocks.push(A),de(k.seriesDataIndices,function(M){var E=s.getSeriesByIndex(M.seriesIndex),P=M.dataIndexInside,I=E.getDataParams(P);if(!(I.dataIndex<0)){I.axisDim=k.axisDim,I.axisIndex=k.axisIndex,I.axisType=k.axisType,I.axisId=k.axisId,I.axisValue=F6(w.axis,{value:S}),I.axisValueLabel=C,I.marker=p.makeTooltipMarker("item",eh(I.color),l);var F=k9(E.formatTooltip(P,!0,null)),L=F.frag;if(L){var z=Yv([E],i).get("valueFormatter");A.blocks.push(z?Ne({valueFormatter:z},L):L)}F.text&&f.push(F.text),d.push(I)}})}})}),c.blocks.reverse(),f.reverse();var h=r.position,m=o.get("order"),g=M9(c,p,l,m,s.get("useUTC"),o.get("textStyle"));g&&f.unshift(g);var y=l==="richText"?`

`:"<br/>",x=f.join(y);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(n,d)?this._updatePosition(o,h,a[0],a[1],this._tooltipContent,d):this._showTooltipContent(o,x,d,Math.random()+"",a[0],a[1],h,null,p)})},e.prototype._showSeriesItemTooltip=function(n,r,s){var i=this._ecModel,a=Et(r),o=a.seriesIndex,l=i.getSeriesByIndex(o),d=a.dataModel||l,c=a.dataIndex,f=a.dataType,p=d.getData(f),h=this._renderMode,m=n.positionDefault,g=Yv([p.getItemModel(c),d,l&&(l.coordinateSystem||{}).model],this._tooltipModel,m?{position:m}:null),y=g.get("trigger");if(!(y!=null&&y!=="item")){var x=d.getDataParams(c,f),_=new YT;x.marker=_.makeTooltipMarker("item",eh(x.color),h);var k=k9(d.formatTooltip(c,!1,f)),w=g.get("order"),S=g.get("valueFormatter"),C=k.frag,A=C?M9(S?Ne({valueFormatter:S},C):C,_,h,w,i.get("useUTC"),g.get("textStyle")):k.text,M="item_"+d.name+"_"+c;this._showOrMove(g,function(){this._showTooltipContent(g,A,x,M,n.offsetX,n.offsetY,n.position,n.target,_)}),s({type:"showTip",dataIndexInside:c,dataIndex:p.getRawIndex(c),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(n,r,s){var i=this._renderMode==="html",a=Et(r),o=a.tooltipConfig,l=o.option||{},d=l.encodeHTMLContent;if(ot(l)){var c=l;l={content:c,formatter:c},d=!0}d&&i&&l.content&&(l=kt(l),l.content=bi(l.content));var f=[l],p=this._ecModel.getComponent(a.componentMainType,a.componentIndex);p&&f.push(p),f.push({formatter:l.content});var h=n.positionDefault,m=Yv(f,this._tooltipModel,h?{position:h}:null),g=m.get("content"),y=Math.random()+"",x=new YT;this._showOrMove(m,function(){var _=kt(m.get("formatterParams")||{});this._showTooltipContent(m,g,_,y,n.offsetX,n.offsetY,n.position,r,x)}),s({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(n,r,s,i,a,o,l,d,c){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var f=this._tooltipContent;f.setEnterable(n.get("enterable"));var p=n.get("formatter");l=l||n.get("position");var h=r,m=this._getNearestPoint([a,o],s,n.get("trigger"),n.get("borderColor")),g=m.color;if(p)if(ot(p)){var y=n.ecModel.get("useUTC"),x=He(s)?s[0]:s,_=x&&x.axisType&&x.axisType.indexOf("time")>=0;h=p,_&&(h=tA(x.axisValue,h,y)),h=lne(h,s,!0)}else if(bt(p)){var k=ct(function(w,S){w===this._ticket&&(f.setContent(S,c,n,g,l),this._updatePosition(n,l,a,o,f,s,d))},this);this._ticket=i,h=p(s,i,k)}else h=p;f.setContent(h,c,n,g,l),f.show(n,g),this._updatePosition(n,l,a,o,f,s,d)}},e.prototype._getNearestPoint=function(n,r,s,i){if(s==="axis"||He(r))return{color:i||(this._renderMode==="html"?"#fff":"none")};if(!He(r))return{color:i||r.color||r.borderColor}},e.prototype._updatePosition=function(n,r,s,i,a,o,l){var d=this._api.getWidth(),c=this._api.getHeight();r=r||n.get("position");var f=a.getSize(),p=n.get("align"),h=n.get("verticalAlign"),m=l&&l.getBoundingRect().clone();if(l&&m.applyTransform(l.transform),bt(r)&&(r=r([s,i],o,a.el,m,{viewSize:[d,c],contentSize:f.slice()})),He(r))s=tt(r[0],d),i=tt(r[1],c);else if(wt(r)){var g=r;g.width=f[0],g.height=f[1];var y=ts(g,{width:d,height:c});s=y.x,i=y.y,p=null,h=null}else if(ot(r)&&l){var x=dZe(r,m,f,n.get("borderWidth"));s=x[0],i=x[1]}else{var x=lZe(s,i,a,d,c,p?null:20,h?null:20);s=x[0],i=x[1]}if(p&&(s-=VU(p)?f[0]/2:p==="right"?f[0]:0),h&&(i-=VU(h)?f[1]/2:h==="bottom"?f[1]:0),Sae(n)){var x=uZe(s,i,a,d,c);s=x[0],i=x[1]}a.moveTo(s,i)},e.prototype._updateContentNotChangedOnAxis=function(n,r){var s=this._lastDataByCoordSys,i=this._cbParamsList,a=!!s&&s.length===n.length;return a&&de(s,function(o,l){var d=o.dataByAxis||[],c=n[l]||{},f=c.dataByAxis||[];a=a&&d.length===f.length,a&&de(d,function(p,h){var m=f[h]||{},g=p.seriesDataIndices||[],y=m.seriesDataIndices||[];a=a&&p.value===m.value&&p.axisType===m.axisType&&p.axisId===m.axisId&&g.length===y.length,a&&de(g,function(x,_){var k=y[_];a=a&&x.seriesIndex===k.seriesIndex&&x.dataIndex===k.dataIndex}),i&&de(p.seriesDataIndices,function(x){var _=x.seriesIndex,k=r[_],w=i[_];k&&w&&w.data!==k.data&&(a=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=r,!!a},e.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},e.prototype.dispose=function(n,r){tn.node||!r.getDom()||(C1(this,"_updatePosition"),this._tooltipContent.dispose(),YE("itemTooltip",r))},e.type="tooltip",e}(vr);function Yv(t,e,n){var r=e.ecModel,s;n?(s=new Tn(n,r,r),s=new Tn(e.option,s,r)):s=e;for(var i=t.length-1;i>=0;i--){var a=t[i];a&&(a instanceof Tn&&(a=a.get("tooltip",!0)),ot(a)&&(a={formatter:a}),a&&(s=new Tn(a,s,r)))}return s}function LU(t,e){return t.dispatchAction||ct(e.dispatchAction,e)}function lZe(t,e,n,r,s,i,a){var o=n.getSize(),l=o[0],d=o[1];return i!=null&&(t+l+i+2>r?t-=l+i:t+=i),a!=null&&(e+d+a>s?e-=d+a:e+=a),[t,e]}function uZe(t,e,n,r,s){var i=n.getSize(),a=i[0],o=i[1];return t=Math.min(t+a,r)-a,e=Math.min(e+o,s)-o,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function dZe(t,e,n,r){var s=n[0],i=n[1],a=Math.ceil(Math.SQRT2*r)+8,o=0,l=0,d=e.width,c=e.height;switch(t){case"inside":o=e.x+d/2-s/2,l=e.y+c/2-i/2;break;case"top":o=e.x+d/2-s/2,l=e.y-i-a;break;case"bottom":o=e.x+d/2-s/2,l=e.y+c+a;break;case"left":o=e.x-s-a,l=e.y+c/2-i/2;break;case"right":o=e.x+d+a,l=e.y+c/2-i/2}return[o,l]}function VU(t){return t==="center"||t==="middle"}function cZe(t,e,n){var r=n6(t).queryOptionMap,s=r.keys()[0];if(!(!s||s==="series")){var i=Cb(e,s,r.get(s),{useDefault:!1,enableAll:!1,enableNone:!1}),a=i.models[0];if(a){var o=n.getViewOfComponentModel(a),l;if(o.group.traverse(function(d){var c=Et(d).tooltipConfig;if(c&&c.name===t.name)return l=d,!0}),l)return{componentMainType:s,componentIndex:a.componentIndex,el:l}}}}function fZe(t){Qt(Hb),t.registerComponentModel(YQe),t.registerComponentView(oZe),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Vr),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Vr)}var pZe=["rect","polygon","keep","clear"];function hZe(t,e){var n=In(t?t.brush:[]);if(n.length){var r=[];de(n,function(l){var d=l.hasOwnProperty("toolbox")?l.toolbox:[];d instanceof Array&&(r=r.concat(d))});var s=t&&t.toolbox;He(s)&&(s=s[0]),s||(s={feature:{}},t.toolbox=[s]);var i=s.feature||(s.feature={}),a=i.brush||(i.brush={}),o=a.type||(a.type=[]);o.push.apply(o,r),mZe(o),e&&!o.length&&o.push.apply(o,pZe)}}function mZe(t){var e={};de(t,function(n){e[n]=1}),t.length=0,de(e,function(n,r){t.push(r)})}var NU=de;function jU(t){if(t){for(var e in t)if(t.hasOwnProperty(e))return!0}}function eD(t,e,n){var r={};return NU(e,function(i){var a=r[i]=s();NU(t[i],function(o,l){if(cs.isValidType(l)){var d={type:l,visual:o};n&&n(d,i),a[l]=new cs(d),l==="opacity"&&(d=kt(d),d.type="colorAlpha",a.__hidden.__alphaForOpacity=new cs(d))}})}),r;function s(){var i=function(){};i.prototype.__hidden=i.prototype;var a=new i;return a}}function $ae(t,e,n){var r;de(n,function(s){e.hasOwnProperty(s)&&jU(e[s])&&(r=!0)}),r&&de(n,function(s){e.hasOwnProperty(s)&&jU(e[s])?t[s]=kt(e[s]):delete t[s]})}function gZe(t,e,n,r,s,i){var a={};de(t,function(f){var p=cs.prepareVisualTypes(e[f]);a[f]=p});var o;function l(f){return D6(n,o,f)}function d(f,p){Qne(n,o,f,p)}n.each(c);function c(f,p){o=f;var h=n.getRawDataItem(o);if(!(h&&h.visualMap===!1))for(var m=r.call(s,f),g=e[m],y=a[m],x=0,_=y.length;x<_;x++){var k=y[x];g[k]&&g[k].applyVisual(f,l,d)}}}function vZe(t,e,n,r){var s={};return de(t,function(i){var a=cs.prepareVisualTypes(e[i]);s[i]=a}),{progress:function(a,o){var l;r!=null&&(l=o.getDimensionIndex(r));function d(S){return D6(o,f,S)}function c(S,C){Qne(o,f,S,C)}for(var f,p=o.getStore();(f=a.next())!=null;){var h=o.getRawDataItem(f);if(!(h&&h.visualMap===!1))for(var m=r!=null?p.get(l,f):f,g=n(m),y=e[g],x=s[g],_=0,k=x.length;_<k;_++){var w=x[_];y[w]&&y[w].applyVisual(m,d,c)}}}}}function yZe(t){var e=t.brushType,n={point:function(r){return FU[e].point(r,n,t)},rect:function(r){return FU[e].rect(r,n,t)}};return n}var FU={lineX:BU(0),lineY:BU(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&Kf(n.range,t[0],t[1])},rect:function(t,e,n){var r=n.range;if(!t||r.length<=1)return!1;var s=t.x,i=t.y,a=t.width,o=t.height,l=r[0];if(Kf(r,s,i)||Kf(r,s+a,i)||Kf(r,s,i+o)||Kf(r,s+a,i+o)||Gt.create(t).contain(l[0],l[1])||vy(s,i,s+a,i,r)||vy(s,i,s,i+o,r)||vy(s+a,i,s+a,i+o,r)||vy(s,i+o,s+a,i+o,r))return!0}}};function BU(t){var e=["x","y"],n=["width","height"];return{point:function(r,s,i){if(r){var a=i.range,o=r[t];return Kv(o,a)}},rect:function(r,s,i){if(r){var a=i.range,o=[r[e[t]],r[e[t]]+r[n[t]]];return o[1]<o[0]&&o.reverse(),Kv(o[0],a)||Kv(o[1],a)||Kv(a[0],o)||Kv(a[1],o)}}}}function Kv(t,e){return e[0]<=t&&t<=e[1]}var zU=["inBrush","outOfBrush"],u5="__ecBrushSelect",tD="__ecInBrushSelectEvent";function Mae(t){t.eachComponent({mainType:"brush"},function(e){var n=e.brushTargetManager=new jI(e.option,t);n.setInputRanges(e.areas,t)})}function bZe(t,e,n){var r=[],s,i;t.eachComponent({mainType:"brush"},function(a){n&&n.type==="takeGlobalCursor"&&a.setBrushOption(n.key==="brush"?n.brushOption:{brushType:!1})}),Mae(t),t.eachComponent({mainType:"brush"},function(a,o){var l={brushId:a.id,brushIndex:o,brushName:a.name,areas:kt(a.areas),selected:[]};r.push(l);var d=a.option,c=d.brushLink,f=[],p=[],h=[],m=!1;o||(s=d.throttleType,i=d.throttleDelay);var g=We(a.areas,function(S){var C=kZe[S.brushType],A=_t({boundingRect:C?C(S):void 0},S);return A.selectors=yZe(A),A}),y=eD(a.option,zU,function(S){S.mappingMethod="fixed"});He(c)&&de(c,function(S){f[S]=1});function x(S){return c==="all"||!!f[S]}function _(S){return!!S.length}t.eachSeries(function(S,C){var A=h[C]=[];S.subType==="parallel"?k(S,C):w(S,C,A)});function k(S,C){var A=S.coordinateSystem;m=m||A.hasAxisBrushed(),x(C)&&A.eachActiveState(S.getData(),function(M,E){M==="active"&&(p[E]=1)})}function w(S,C,A){if(!(!S.brushSelector||wZe(a,C))&&(de(g,function(E){a.brushTargetManager.controlSeries(E,S,t)&&A.push(E),m=m||_(A)}),x(C)&&_(A))){var M=S.getData();M.each(function(E){UU(S,A,M,E)&&(p[E]=1)})}}t.eachSeries(function(S,C){var A={seriesId:S.id,seriesIndex:C,seriesName:S.name,dataIndex:[]};l.selected.push(A);var M=h[C],E=S.getData(),P=x(C)?function(I){return p[I]?(A.dataIndex.push(E.getRawIndex(I)),"inBrush"):"outOfBrush"}:function(I){return UU(S,M,E,I)?(A.dataIndex.push(E.getRawIndex(I)),"inBrush"):"outOfBrush"};(x(C)?m:_(M))&&gZe(zU,y,E,P)})}),xZe(e,s,i,r,n)}function xZe(t,e,n,r,s){if(s){var i=t.getZr();if(!i[tD]){i[u5]||(i[u5]=_Ze);var a=Gg(i,u5,n,e);a(t,r)}}}function _Ze(t,e){if(!t.isDisposed()){var n=t.getZr();n[tD]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[tD]=!1}}function UU(t,e,n,r){for(var s=0,i=e.length;s<i;s++){var a=e[s];if(t.brushSelector(r,n,a.selectors,a))return!0}}function wZe(t,e){var n=t.option.seriesIndex;return n!=null&&n!=="all"&&(He(n)?Xt(n,e)<0:e!==n)}var kZe={rect:function(t){return HU(t.range)},polygon:function(t){for(var e,n=t.range,r=0,s=n.length;r<s;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var i=n[r];i[0]<e[0][0]&&(e[0][0]=i[0]),i[0]>e[0][1]&&(e[0][1]=i[0]),i[1]<e[1][0]&&(e[1][0]=i[1]),i[1]>e[1][1]&&(e[1][1]=i[1])}return e&&HU(e)}};function HU(t){return new Gt(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var SZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){this.ecModel=n,this.api=r,this.model,(this._brushController=new fI(r.getZr())).on("brush",ct(this._onBrush,this)).mount()},e.prototype.render=function(n,r,s,i){this.model=n,this._updateController(n,r,s,i)},e.prototype.updateTransform=function(n,r,s,i){Mae(r),this._updateController(n,r,s,i)},e.prototype.updateVisual=function(n,r,s,i){this.updateTransform(n,r,s,i)},e.prototype.updateView=function(n,r,s,i){this._updateController(n,r,s,i)},e.prototype._updateController=function(n,r,s,i){(!i||i.$from!==n.id)&&this._brushController.setPanels(n.brushTargetManager.makePanelOpts(s)).enableBrush(n.brushOption).updateCovers(n.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(n){var r=this.model.id,s=this.model.brushTargetManager.setOutputRanges(n.areas,this.ecModel);(!n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:kt(s),$from:r}),n.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:kt(s),$from:r})},e.type="brush",e}(vr),CZe="#ddd",AZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.areas=[],n.brushOption={},n}return e.prototype.optionUpdated=function(n,r){var s=this.option;!r&&$ae(s,n,["inBrush","outOfBrush"]);var i=s.inBrush=s.inBrush||{};s.outOfBrush=s.outOfBrush||{color:CZe},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(n){n&&(this.areas=We(n,function(r){return qU(this.option,r)},this))},e.prototype.setBrushOption=function(n){this.brushOption=qU(this.option,n),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(nn);function qU(t,e){return Ht({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Tn(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var TZe=["rect","polygon","lineX","lineY","keep","clear"],$Ze=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,s){var i,a,o;r.eachComponent({mainType:"brush"},function(l){i=l.brushType,a=l.brushOption.brushMode||"single",o=o||!!l.areas.length}),this._brushType=i,this._brushMode=a,de(n.get("type",!0),function(l){n.setIconStatus(l,(l==="keep"?a==="multiple":l==="clear"?o:l===i)?"emphasis":"normal")})},e.prototype.updateView=function(n,r,s){this.render(n,r,s)},e.prototype.getIcons=function(){var n=this.model,r=n.get("icon",!0),s={};return de(n.get("type",!0),function(i){r[i]&&(s[i]=r[i])}),s},e.prototype.onclick=function(n,r,s){var i=this._brushType,a=this._brushMode;s==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:s==="keep"?i:i===s?!1:s,brushMode:s==="keep"?a==="multiple"?"single":"multiple":a}})},e.getDefaultOption=function(n){var r={show:!0,type:TZe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:n.getLocaleModel().get(["toolbox","brush","title"])};return r},e}(Fa);function MZe(t){t.registerComponentView(SZe),t.registerComponentModel(AZe),t.registerPreprocessor(hZe),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,bZe),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,n){n.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Vr),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Vr),km("brush",$Ze)}var EZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(nn),DZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,s){if(this.group.removeAll(),!!n.get("show")){var i=this.group,a=n.getModel("textStyle"),o=n.getModel("subtextStyle"),l=n.get("textAlign"),d=Ot(n.get("textBaseline"),n.get("textVerticalAlign")),c=new dn({style:Xn(a,{text:n.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),p=n.get("subtext"),h=new dn({style:Xn(o,{text:p,fill:o.getTextColor(),y:f.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),m=n.get("link"),g=n.get("sublink"),y=n.get("triggerEvent",!0);c.silent=!m&&!y,h.silent=!g&&!y,m&&c.on("click",function(){Pk(m,"_"+n.get("target"))}),g&&h.on("click",function(){Pk(g,"_"+n.get("subtarget"))}),Et(c).eventData=Et(h).eventData=y?{componentType:"title",componentIndex:n.componentIndex}:null,i.add(c),p&&i.add(h);var x=i.getBoundingRect(),_=n.getBoxLayoutParams();_.width=x.width,_.height=x.height;var k=ts(_,{width:s.getWidth(),height:s.getHeight()},n.get("padding"));l||(l=n.get("left")||n.get("right"),l==="middle"&&(l="center"),l==="right"?k.x+=k.width:l==="center"&&(k.x+=k.width/2)),d||(d=n.get("top")||n.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?k.y+=k.height:d==="middle"&&(k.y+=k.height/2),d=d||"top"),i.x=k.x,i.y=k.y,i.markRedraw();var w={align:l,verticalAlign:d};c.setStyle(w),h.setStyle(w),x=i.getBoundingRect();var S=k.margin,C=n.getItemStyle(["color","opacity"]);C.fill=n.get("backgroundColor");var A=new on({shape:{x:x.x-S[3],y:x.y-S[0],width:x.width+S[1]+S[3],height:x.height+S[0]+S[2],r:n.get("borderRadius")},style:C,subPixelOptimize:!0,silent:!0});i.add(A)}},e.type="title",e}(vr);function RZe(t){t.registerComponentModel(EZe),t.registerComponentView(DZe)}var WU=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return e.prototype.init=function(n,r,s){this.mergeDefaultAndTheme(n,s),this._initData()},e.prototype.mergeOption=function(n){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(n){n==null&&(n=this.option.currentIndex);var r=this._data.count();this.option.loop?n=(n%r+r)%r:(n>=r&&(n=r-1),n<0&&(n=0)),this.option.currentIndex=n},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(n){this.option.autoPlay=!!n},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var n=this.option,r=n.data||[],s=n.axisType,i=this._names=[],a;s==="category"?(a=[],de(r,function(d,c){var f=Qr(Ng(d),""),p;wt(d)?(p=kt(d),p.value=c):p=c,a.push(p),i.push(f)})):a=r;var o={category:"ordinal",time:"time",value:"number"}[s]||"number",l=this._data=new wi([{name:"value",type:o}],this);l.initData(a,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(nn),Eae=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="timeline.slider",e.defaultOption=Qc(WU.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(WU);Gr(Eae,lA.prototype);var PZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="timeline",e}(vr),IZe=function(t){Te(e,t);function e(n,r,s,i){var a=t.call(this,n,r,s)||this;return a.type=i||"value",a}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(Ho),d5=Math.PI,GU=ln(),OZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){this.api=r},e.prototype.render=function(n,r,s){if(this.model=n,this.api=s,this.ecModel=r,this.group.removeAll(),n.get("show",!0)){var i=this._layout(n,s),a=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(i,n);n.formatTooltip=function(d){var c=l.scale.getLabel({value:d});return hs("nameValue",{noName:!0,value:c})},de(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](i,a,l,n)},this),this._renderAxisLabel(i,o,l,n),this._position(i,n)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(n,r){var s=n.get(["label","position"]),i=n.get("orient"),a=VZe(n,r),o;s==null||s==="auto"?o=i==="horizontal"?a.y+a.height/2<r.getHeight()/2?"-":"+":a.x+a.width/2<r.getWidth()/2?"+":"-":ot(s)?o={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][s]:o=s;var l={horizontal:"center",vertical:o>=0||o==="+"?"left":"right"},d={horizontal:o>=0||o==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:d5/2},f=i==="vertical"?a.height:a.width,p=n.getModel("controlStyle"),h=p.get("show",!0),m=h?p.get("itemSize"):0,g=h?p.get("itemGap"):0,y=m+g,x=n.get(["label","rotate"])||0;x=x*d5/180;var _,k,w,S=p.get("position",!0),C=h&&p.get("showPlayBtn",!0),A=h&&p.get("showPrevBtn",!0),M=h&&p.get("showNextBtn",!0),E=0,P=f;S==="left"||S==="bottom"?(C&&(_=[0,0],E+=y),A&&(k=[E,0],E+=y),M&&(w=[P-m,0],P-=y)):(C&&(_=[P-m,0],P-=y),A&&(k=[0,0],E+=y),M&&(w=[P-m,0],P-=y));var I=[E,P];return n.get("inverse")&&I.reverse(),{viewRect:a,mainLength:f,orient:i,rotation:c[i],labelRotation:x,labelPosOpt:o,labelAlign:n.get(["label","align"])||l[i],labelBaseline:n.get(["label","verticalAlign"])||n.get(["label","baseline"])||d[i],playPosition:_,prevBtnPosition:k,nextBtnPosition:w,axisExtent:I,controlSize:m,controlGap:g}},e.prototype._position=function(n,r){var s=this._mainGroup,i=this._labelGroup,a=n.viewRect;if(n.orient==="vertical"){var o=va(),l=a.x,d=a.y+a.height;zl(o,o,[-l,-d]),mh(o,o,-d5/2),zl(o,o,[l,d]),a=a.clone(),a.applyTransform(o)}var c=_(a),f=_(s.getBoundingRect()),p=_(i.getBoundingRect()),h=[s.x,s.y],m=[i.x,i.y];m[0]=h[0]=c[0][0];var g=n.labelPosOpt;if(g==null||ot(g)){var y=g==="+"?0:1;k(h,f,c,1,y),k(m,p,c,1,1-y)}else{var y=g>=0?0:1;k(h,f,c,1,y),m[1]=h[1]+g}s.setPosition(h),i.setPosition(m),s.rotation=i.rotation=n.rotation,x(s),x(i);function x(w){w.originX=c[0][0]-w.x,w.originY=c[1][0]-w.y}function _(w){return[[w.x,w.x+w.width],[w.y,w.y+w.height]]}function k(w,S,C,A,M){w[A]+=C[A][M]-S[A][M]}},e.prototype._createAxis=function(n,r){var s=r.getData(),i=r.get("axisType"),a=LZe(r,i);a.getTicks=function(){return s.mapArray(["value"],function(d){return{value:d}})};var o=s.getDataExtent("value");a.setExtent(o[0],o[1]),a.calcNiceTicks();var l=new IZe("value",a,n.axisExtent,i);return l.model=r,l},e.prototype._createGroup=function(n){var r=this[n]=new Tt;return this.group.add(r),r},e.prototype._renderAxisLine=function(n,r,s,i){var a=s.getExtent();if(i.get(["lineStyle","show"])){var o=new ls({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:Ne({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(o);var l=this._progressLine=new ls({shape:{x1:a[0],x2:this._currentPointer?this._currentPointer.x:a[0],y1:0,y2:0},style:_t({lineCap:"round",lineWidth:o.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},e.prototype._renderAxisTick=function(n,r,s,i){var a=this,o=i.getData(),l=s.scale.getTicks();this._tickSymbols=[],de(l,function(d){var c=s.dataToCoord(d.value),f=o.getItemModel(d.value),p=f.getModel("itemStyle"),h=f.getModel(["emphasis","itemStyle"]),m=f.getModel(["progress","itemStyle"]),g={x:c,y:0,onclick:ct(a._changeTimeline,a,d.value)},y=YU(f,p,r,g);y.ensureState("emphasis").style=h.getItemStyle(),y.ensureState("progress").style=m.getItemStyle(),Pp(y);var x=Et(y);f.get("tooltip")?(x.dataIndex=d.value,x.dataModel=i):x.dataIndex=x.dataModel=null,a._tickSymbols.push(y)})},e.prototype._renderAxisLabel=function(n,r,s,i){var a=this,o=s.getLabelModel();if(o.get("show")){var l=i.getData(),d=s.getViewLabels();this._tickLabels=[],de(d,function(c){var f=c.tickValue,p=l.getItemModel(f),h=p.getModel("label"),m=p.getModel(["emphasis","label"]),g=p.getModel(["progress","label"]),y=s.dataToCoord(c.tickValue),x=new dn({x:y,y:0,rotation:n.labelRotation-n.rotation,onclick:ct(a._changeTimeline,a,f),silent:!1,style:Xn(h,{text:c.formattedLabel,align:n.labelAlign,verticalAlign:n.labelBaseline})});x.ensureState("emphasis").style=Xn(m),x.ensureState("progress").style=Xn(g),r.add(x),Pp(x),GU(x).dataIndex=f,a._tickLabels.push(x)})}},e.prototype._renderControl=function(n,r,s,i){var a=n.controlSize,o=n.rotation,l=i.getModel("controlStyle").getItemStyle(),d=i.getModel(["emphasis","controlStyle"]).getItemStyle(),c=i.getPlayState(),f=i.get("inverse",!0);p(n.nextBtnPosition,"next",ct(this._changeTimeline,this,f?"-":"+")),p(n.prevBtnPosition,"prev",ct(this._changeTimeline,this,f?"+":"-")),p(n.playPosition,c?"stop":"play",ct(this._handlePlayClick,this,!c),!0);function p(h,m,g,y){if(h){var x=Fo(Ot(i.get(["controlStyle",m+"BtnSize"]),a),a),_=[0,-x/2,x,x],k=NZe(i,m+"Icon",_,{x:h[0],y:h[1],originX:a/2,originY:0,rotation:y?-o:0,rectHover:!0,style:l,onclick:g});k.ensureState("emphasis").style=d,r.add(k),Pp(k)}}},e.prototype._renderCurrentPointer=function(n,r,s,i){var a=i.getData(),o=i.getCurrentIndex(),l=a.getItemModel(o).getModel("checkpointStyle"),d=this,c={onCreate:function(f){f.draggable=!0,f.drift=ct(d._handlePointerDrag,d),f.ondragend=ct(d._handlePointerDragend,d),KU(f,d._progressLine,o,s,i,!0)},onUpdate:function(f){KU(f,d._progressLine,o,s,i)}};this._currentPointer=YU(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(n){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:n,from:this.uid})},e.prototype._handlePointerDrag=function(n,r,s){this._clearTimer(),this._pointerChangeTimeline([s.offsetX,s.offsetY])},e.prototype._handlePointerDragend=function(n){this._pointerChangeTimeline([n.offsetX,n.offsetY],!0)},e.prototype._pointerChangeTimeline=function(n,r){var s=this._toAxisCoord(n)[0],i=this._axis,a=Ga(i.getExtent().slice());s>a[1]&&(s=a[1]),s<a[0]&&(s=a[0]),this._currentPointer.x=s,this._currentPointer.markRedraw();var o=this._progressLine;o&&(o.shape.x2=s,o.dirty());var l=this._findNearestTick(s),d=this.model;(r||l!==d.getCurrentIndex()&&d.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var n=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=n.model;n._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(n){var r=this._mainGroup.getLocalTransform();return Do(n,r,!0)},e.prototype._findNearestTick=function(n){var r=this.model.getData(),s=1/0,i,a=this._axis;return r.each(["value"],function(o,l){var d=a.dataToCoord(o),c=Math.abs(d-n);c<s&&(s=c,i=l)}),i},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(n){var r=this.model.getCurrentIndex();n==="+"?n=r+1:n==="-"&&(n=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:n,from:this.uid})},e.prototype._updateTicksStatus=function(){var n=this.model.getCurrentIndex(),r=this._tickSymbols,s=this._tickLabels;if(r)for(var i=0;i<r.length;i++)r&&r[i]&&r[i].toggleState("progress",i<n);if(s)for(var i=0;i<s.length;i++)s&&s[i]&&s[i].toggleState("progress",GU(s[i]).dataIndex<=n)},e.type="timeline.slider",e}(PZe);function LZe(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new hA({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new N6({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new ud}}function VZe(t,e){return ts(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function NZe(t,e,n,r){var s=r.style,i=Db(t.get(["controlStyle",e]),r||{},new Gt(n[0],n[1],n[2],n[3]));return s&&i.setStyle(s),i}function YU(t,e,n,r,s,i){var a=e.get("color");if(s)s.setColor(a),n.add(s),i&&i.onUpdate(s);else{var o=t.get("symbol");s=Wr(o,-1,-1,2,2,a),s.setStyle("strokeNoScale",!0),n.add(s),i&&i.onCreate(s)}var l=e.getItemStyle(["color"]);s.setStyle(l),r=Ht({rectHover:!0,z2:100},r,!0);var d=Yg(t.get("symbolSize"));r.scaleX=d[0]/2,r.scaleY=d[1]/2;var c=yh(t.get("symbolOffset"),d);c&&(r.x=(r.x||0)+c[0],r.y=(r.y||0)+c[1]);var f=t.get("symbolRotate");return r.rotation=(f||0)*Math.PI/180||0,s.attr(r),s.updateTransform(),s}function KU(t,e,n,r,s,i){if(!t.dragging){var a=s.getModel("checkpointStyle"),o=r.dataToCoord(s.getData().get("value",n));if(i||!a.get("animation",!0))t.attr({x:o,y:0}),e&&e.attr({shape:{x2:o}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:o,y:0},l),e&&e.animateTo({shape:{x2:o}},l)}}}function jZe(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,n,r){var s=n.getComponent("timeline");return s&&e.currentIndex!=null&&(s.setCurrentIndex(e.currentIndex),!s.get("loop",!0)&&s.isIndexMax()&&s.getPlayState()&&(s.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),n.resetOption("timeline",{replaceMerge:s.get("replaceMerge",!0)}),_t({currentIndex:s.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,n){var r=n.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function FZe(t){var e=t&&t.timeline;He(e)||(e=e?[e]:[]),de(e,function(n){n&&BZe(n)})}function BZe(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),XU(t),Zf(t,"controlPosition")){var r=t.controlStyle||(t.controlStyle={});Zf(r,"position")||(r.position=t.controlPosition),r.position==="none"&&!Zf(r,"show")&&(r.show=!1,delete r.position),delete t.controlPosition}de(t.data||[],function(s){wt(s)&&!He(s)&&(!Zf(s,"value")&&Zf(s,"name")&&(s.value=s.name),XU(s))})}function XU(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),r=t.label||t.label||{},s=r.normal||(r.normal={}),i={normal:1,emphasis:1};de(r,function(a,o){!i[o]&&!Zf(s,o)&&(s[o]=a)}),n.label&&!Zf(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function Zf(t,e){return t.hasOwnProperty(e)}function zZe(t){t.registerComponentModel(Eae),t.registerComponentView(OZe),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),jZe(t),t.registerPreprocessor(FZe)}function zI(t,e){if(!t)return!1;for(var n=He(t)?t:[t],r=0;r<n.length;r++)if(n[r]&&n[r][e])return!0;return!1}function I_(t){Xp(t,"label",["show"])}var O_=ln(),cd=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return e.prototype.init=function(n,r,s){this.mergeDefaultAndTheme(n,s),this._mergeOption(n,s,!1,!0)},e.prototype.isAnimationEnabled=function(){if(tn.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},e.prototype.mergeOption=function(n,r){this._mergeOption(n,r,!1,!1)},e.prototype._mergeOption=function(n,r,s,i){var a=this.mainType;s||r.eachSeries(function(o){var l=o.get(this.mainType,!0),d=O_(o)[a];if(!l||!l.data){O_(o)[a]=null;return}d?d._mergeOption(l,r,!0):(i&&I_(l),de(l.data,function(c){c instanceof Array?(I_(c[0]),I_(c[1])):I_(c)}),d=this.createMarkerModelFromSeries(l,this,r),Ne(d,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),d.__hostSeries=o),O_(o)[a]=d},this)},e.prototype.formatTooltip=function(n,r,s){var i=this.getData(),a=this.getRawValue(n),o=i.getName(n);return hs("section",{header:this.name,blocks:[hs("nameValue",{name:o,value:a,noName:!o,noValue:a==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(n){this._data=n},e.prototype.getDataParams=function(n,r){var s=lA.prototype.getDataParams.call(this,n,r),i=this.__hostSeries;return i&&(s.seriesId=i.id,s.seriesName=i.name,s.seriesType=i.subType),s},e.getMarkerModelFromSeries=function(n,r){return O_(n)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(nn);Gr(cd,lA.prototype);var UZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.createMarkerModelFromSeries=function(n,r,s){return new e(n,r,s)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(cd);function nD(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function HZe(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function L_(t,e,n,r,s,i){var a=[],o=jc(e,r),l=o?e.getCalculationInfo("stackResultDimension"):r,d=UI(e,l,t),c=e.indicesOfNearest(l,d)[0];a[s]=e.get(n,c),a[i]=e.get(l,c);var f=e.get(r,c),p=kl(e.get(r,c));return p=Math.min(p,20),p>=0&&(a[i]=+a[i].toFixed(p)),[a,f]}var c5={min:Nt(L_,"min"),max:Nt(L_,"max"),average:Nt(L_,"average"),median:Nt(L_,"median")};function j1(t,e){if(e){var n=t.getData(),r=t.coordinateSystem,s=r&&r.dimensions;if(!HZe(e)&&!He(e.coord)&&He(s)){var i=Dae(e,n,r,t);if(e=kt(e),e.type&&c5[e.type]&&i.baseAxis&&i.valueAxis){var a=Xt(s,i.baseAxis.dim),o=Xt(s,i.valueAxis.dim),l=c5[e.type](n,i.baseDataDim,i.valueDataDim,a,o);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!He(s))e.coord=[];else for(var d=e.coord,c=0;c<2;c++)c5[d[c]]&&(d[c]=UI(n,n.mapDimension(s[c]),d[c]));return e}}function Dae(t,e,n,r){var s={};return t.valueIndex!=null||t.valueDim!=null?(s.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim,s.valueAxis=n.getAxis(qZe(r,s.valueDataDim)),s.baseAxis=n.getOtherAxis(s.valueAxis),s.baseDataDim=e.mapDimension(s.baseAxis.dim)):(s.baseAxis=r.getBaseAxis(),s.valueAxis=n.getOtherAxis(s.baseAxis),s.baseDataDim=e.mapDimension(s.baseAxis.dim),s.valueDataDim=e.mapDimension(s.valueAxis.dim)),s}function qZe(t,e){var n=t.getData().getDimensionInfo(e);return n&&n.coordDim}function F1(t,e){return t&&t.containData&&e.coord&&!nD(e)?t.containData(e.coord):!0}function WZe(t,e,n){return t&&t.containZone&&e.coord&&n.coord&&!nD(e)&&!nD(n)?t.containZone(e.coord,n.coord):!0}function Rae(t,e){return t?function(n,r,s,i){var a=i<2?n.coord&&n.coord[i]:n.value;return Sc(a,e[i])}:function(n,r,s,i){return Sc(n.value,e[i])}}function UI(t,e,n){if(n==="average"){var r=0,s=0;return t.each(e,function(i,a){isNaN(i)||(r+=i,s++)}),r/s}else return n==="median"?t.getMedian(e):t.getDataExtent(e)[n==="max"?1:0]}var f5=ln(),HI=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){this.markerGroupMap=mt()},e.prototype.render=function(n,r,s){var i=this,a=this.markerGroupMap;a.each(function(o){f5(o).keep=!1}),r.eachSeries(function(o){var l=cd.getMarkerModelFromSeries(o,i.type);l&&i.renderSeries(o,l,r,s)}),a.each(function(o){!f5(o).keep&&i.group.remove(o.group)})},e.prototype.markKeep=function(n){f5(n).keep=!0},e.prototype.toggleBlurSeries=function(n,r){var s=this;de(n,function(i){var a=cd.getMarkerModelFromSeries(i,s.type);if(a){var o=a.getData();o.eachItemGraphicEl(function(l){l&&(r?Cte(l):u6(l))})}})},e.type="marker",e}(vr);function QU(t,e,n){var r=e.coordinateSystem;t.each(function(s){var i=t.getItemModel(s),a,o=tt(i.get("x"),n.getWidth()),l=tt(i.get("y"),n.getHeight());if(!isNaN(o)&&!isNaN(l))a=[o,l];else if(e.getMarkerPosition)a=e.getMarkerPosition(t.getValues(t.dimensions,s));else if(r){var d=t.get(r.dimensions[0],s),c=t.get(r.dimensions[1],s);a=r.dataToPoint([d,c])}isNaN(o)||(a[0]=o),isNaN(l)||(a[1]=l),t.setItemLayout(s,a)})}var GZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.updateTransform=function(n,r,s){r.eachSeries(function(i){var a=cd.getMarkerModelFromSeries(i,"markPoint");a&&(QU(a.getData(),i,s),this.markerGroupMap.get(i.id).updateLayout())},this)},e.prototype.renderSeries=function(n,r,s,i){var a=n.coordinateSystem,o=n.id,l=n.getData(),d=this.markerGroupMap,c=d.get(o)||d.set(o,new Vb),f=YZe(a,n,r);r.setData(f),QU(r.getData(),n,i),f.each(function(p){var h=f.getItemModel(p),m=h.getShallow("symbol"),g=h.getShallow("symbolSize"),y=h.getShallow("symbolRotate"),x=h.getShallow("symbolOffset"),_=h.getShallow("symbolKeepAspect");if(bt(m)||bt(g)||bt(y)||bt(x)){var k=r.getRawValue(p),w=r.getDataParams(p);bt(m)&&(m=m(k,w)),bt(g)&&(g=g(k,w)),bt(y)&&(y=y(k,w)),bt(x)&&(x=x(k,w))}var S=h.getModel("itemStyle").getItemStyle(),C=Pb(l,"color");S.fill||(S.fill=C),f.setItemVisual(p,{symbol:m,symbolSize:g,symbolRotate:y,symbolOffset:x,symbolKeepAspect:_,style:S})}),c.updateData(f),this.group.add(c.group),f.eachItemGraphicEl(function(p){p.traverse(function(h){Et(h).dataModel=r})}),this.markKeep(c),c.group.silent=r.get("silent")||n.get("silent")},e.type="markPoint",e}(HI);function YZe(t,e,n){var r;t?r=We(t&&t.dimensions,function(o){var l=e.getData().getDimensionInfo(e.getData().mapDimension(o))||{};return Ne(Ne({},l),{name:o,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var s=new wi(r,n),i=We(n.get("data"),Nt(j1,e));t&&(i=Sn(i,Nt(F1,t)));var a=Rae(!!t,r);return s.initData(i,null,a),s}function KZe(t){t.registerComponentModel(UZe),t.registerComponentView(GZe),t.registerPreprocessor(function(e){zI(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var XZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.createMarkerModelFromSeries=function(n,r,s){return new e(n,r,s)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(cd),V_=ln(),QZe=function(t,e,n,r){var s=t.getData(),i;if(He(r))i=r;else{var a=r.type;if(a==="min"||a==="max"||a==="average"||a==="median"||r.xAxis!=null||r.yAxis!=null){var o=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)o=e.getAxis(r.yAxis!=null?"y":"x"),l=xs(r.yAxis,r.xAxis);else{var d=Dae(r,s,e,t);o=d.valueAxis;var c=Sre(s,d.valueDataDim);l=UI(s,c,a)}var f=o.dim==="x"?0:1,p=1-f,h=kt(r),m={coord:[]};h.type=null,h.coord=[],h.coord[p]=-1/0,m.coord[p]=1/0;var g=n.get("precision");g>=0&&hn(l)&&(l=+l.toFixed(Math.min(g,20))),h.coord[f]=m.coord[f]=l,i=[h,m,{type:a,valueIndex:r.valueIndex,value:l}]}else i=[]}var y=[j1(t,i[0]),j1(t,i[1]),Ne({},i[2])];return y[2].type=y[2].type||null,Ht(y[2],y[0]),Ht(y[2],y[1]),y};function iS(t){return!isNaN(t)&&!isFinite(t)}function ZU(t,e,n,r){var s=1-t,i=r.dimensions[t];return iS(e[s])&&iS(n[s])&&e[t]===n[t]&&r.getAxis(i).containData(e[t])}function ZZe(t,e){if(t.type==="cartesian2d"){var n=e[0].coord,r=e[1].coord;if(n&&r&&(ZU(1,n,r,t)||ZU(0,n,r,t)))return!0}return F1(t,e[0])&&F1(t,e[1])}function p5(t,e,n,r,s){var i=r.coordinateSystem,a=t.getItemModel(e),o,l=tt(a.get("x"),s.getWidth()),d=tt(a.get("y"),s.getHeight());if(!isNaN(l)&&!isNaN(d))o=[l,d];else{if(r.getMarkerPosition)o=r.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=i.dimensions,f=t.get(c[0],e),p=t.get(c[1],e);o=i.dataToPoint([f,p])}if(xh(i,"cartesian2d")){var h=i.getAxis("x"),m=i.getAxis("y"),c=i.dimensions;iS(t.get(c[0],e))?o[0]=h.toGlobalCoord(h.getExtent()[n?0:1]):iS(t.get(c[1],e))&&(o[1]=m.toGlobalCoord(m.getExtent()[n?0:1]))}isNaN(l)||(o[0]=l),isNaN(d)||(o[1]=d)}t.setItemLayout(e,o)}var JZe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.updateTransform=function(n,r,s){r.eachSeries(function(i){var a=cd.getMarkerModelFromSeries(i,"markLine");if(a){var o=a.getData(),l=V_(a).from,d=V_(a).to;l.each(function(c){p5(l,c,!0,i,s),p5(d,c,!1,i,s)}),o.each(function(c){o.setItemLayout(c,[l.getItemLayout(c),d.getItemLayout(c)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(n,r,s,i){var a=n.coordinateSystem,o=n.id,l=n.getData(),d=this.markerGroupMap,c=d.get(o)||d.set(o,new cI);this.group.add(c.group);var f=eJe(a,n,r),p=f.from,h=f.to,m=f.line;V_(r).from=p,V_(r).to=h,r.setData(m);var g=r.get("symbol"),y=r.get("symbolSize"),x=r.get("symbolRotate"),_=r.get("symbolOffset");He(g)||(g=[g,g]),He(y)||(y=[y,y]),He(x)||(x=[x,x]),He(_)||(_=[_,_]),f.from.each(function(w){k(p,w,!0),k(h,w,!1)}),m.each(function(w){var S=m.getItemModel(w).getModel("lineStyle").getLineStyle();m.setItemLayout(w,[p.getItemLayout(w),h.getItemLayout(w)]),S.stroke==null&&(S.stroke=p.getItemVisual(w,"style").fill),m.setItemVisual(w,{fromSymbolKeepAspect:p.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:p.getItemVisual(w,"symbolOffset"),fromSymbolRotate:p.getItemVisual(w,"symbolRotate"),fromSymbolSize:p.getItemVisual(w,"symbolSize"),fromSymbol:p.getItemVisual(w,"symbol"),toSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(w,"symbolOffset"),toSymbolRotate:h.getItemVisual(w,"symbolRotate"),toSymbolSize:h.getItemVisual(w,"symbolSize"),toSymbol:h.getItemVisual(w,"symbol"),style:S})}),c.updateData(m),f.line.eachItemGraphicEl(function(w){Et(w).dataModel=r,w.traverse(function(S){Et(S).dataModel=r})});function k(w,S,C){var A=w.getItemModel(S);p5(w,S,C,n,i);var M=A.getModel("itemStyle").getItemStyle();M.fill==null&&(M.fill=Pb(l,"color")),w.setItemVisual(S,{symbolKeepAspect:A.get("symbolKeepAspect"),symbolOffset:Ot(A.get("symbolOffset",!0),_[C?0:1]),symbolRotate:Ot(A.get("symbolRotate",!0),x[C?0:1]),symbolSize:Ot(A.get("symbolSize"),y[C?0:1]),symbol:Ot(A.get("symbol",!0),g[C?0:1]),style:M})}this.markKeep(c),c.group.silent=r.get("silent")||n.get("silent")},e.type="markLine",e}(HI);function eJe(t,e,n){var r;t?r=We(t&&t.dimensions,function(d){var c=e.getData().getDimensionInfo(e.getData().mapDimension(d))||{};return Ne(Ne({},c),{name:d,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var s=new wi(r,n),i=new wi(r,n),a=new wi([],n),o=We(n.get("data"),Nt(QZe,e,t,n));t&&(o=Sn(o,Nt(ZZe,t)));var l=Rae(!!t,r);return s.initData(We(o,function(d){return d[0]}),null,l),i.initData(We(o,function(d){return d[1]}),null,l),a.initData(We(o,function(d){return d[2]})),a.hasItemOption=!0,{from:s,to:i,line:a}}function tJe(t){t.registerComponentModel(XZe),t.registerComponentView(JZe),t.registerPreprocessor(function(e){zI(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var nJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.createMarkerModelFromSeries=function(n,r,s){return new e(n,r,s)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(cd),N_=ln(),rJe=function(t,e,n,r){var s=r[0],i=r[1];if(!(!s||!i)){var a=j1(t,s),o=j1(t,i),l=a.coord,d=o.coord;l[0]=xs(l[0],-1/0),l[1]=xs(l[1],-1/0),d[0]=xs(d[0],1/0),d[1]=xs(d[1],1/0);var c=qP([{},a,o]);return c.coord=[a.coord,o.coord],c.x0=a.x,c.y0=a.y,c.x1=o.x,c.y1=o.y,c}};function aS(t){return!isNaN(t)&&!isFinite(t)}function JU(t,e,n,r){var s=1-t;return aS(e[s])&&aS(n[s])}function sJe(t,e){var n=e.coord[0],r=e.coord[1],s={coord:n,x:e.x0,y:e.y0},i={coord:r,x:e.x1,y:e.y1};return xh(t,"cartesian2d")?n&&r&&(JU(1,n,r)||JU(0,n,r))?!0:WZe(t,s,i):F1(t,s)||F1(t,i)}function eH(t,e,n,r,s){var i=r.coordinateSystem,a=t.getItemModel(e),o,l=tt(a.get(n[0]),s.getWidth()),d=tt(a.get(n[1]),s.getHeight());if(!isNaN(l)&&!isNaN(d))o=[l,d];else{if(r.getMarkerPosition){var c=t.getValues(["x0","y0"],e),f=t.getValues(["x1","y1"],e),p=i.clampData(c),h=i.clampData(f),m=[];n[0]==="x0"?m[0]=p[0]>h[0]?f[0]:c[0]:m[0]=p[0]>h[0]?c[0]:f[0],n[1]==="y0"?m[1]=p[1]>h[1]?f[1]:c[1]:m[1]=p[1]>h[1]?c[1]:f[1],o=r.getMarkerPosition(m,n,!0)}else{var g=t.get(n[0],e),y=t.get(n[1],e),x=[g,y];i.clampData&&i.clampData(x,x),o=i.dataToPoint(x,!0)}if(xh(i,"cartesian2d")){var _=i.getAxis("x"),k=i.getAxis("y"),g=t.get(n[0],e),y=t.get(n[1],e);aS(g)?o[0]=_.toGlobalCoord(_.getExtent()[n[0]==="x0"?0:1]):aS(y)&&(o[1]=k.toGlobalCoord(k.getExtent()[n[1]==="y0"?0:1]))}isNaN(l)||(o[0]=l),isNaN(d)||(o[1]=d)}return o}var tH=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],iJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.updateTransform=function(n,r,s){r.eachSeries(function(i){var a=cd.getMarkerModelFromSeries(i,"markArea");if(a){var o=a.getData();o.each(function(l){var d=We(tH,function(f){return eH(o,l,f,i,s)});o.setItemLayout(l,d);var c=o.getItemGraphicEl(l);c.setShape("points",d)})}},this)},e.prototype.renderSeries=function(n,r,s,i){var a=n.coordinateSystem,o=n.id,l=n.getData(),d=this.markerGroupMap,c=d.get(o)||d.set(o,{group:new Tt});this.group.add(c.group),this.markKeep(c);var f=aJe(a,n,r);r.setData(f),f.each(function(p){var h=We(tH,function(M){return eH(f,p,M,n,i)}),m=a.getAxis("x").scale,g=a.getAxis("y").scale,y=m.getExtent(),x=g.getExtent(),_=[m.parse(f.get("x0",p)),m.parse(f.get("x1",p))],k=[g.parse(f.get("y0",p)),g.parse(f.get("y1",p))];Ga(_),Ga(k);var w=!(y[0]>_[1]||y[1]<_[0]||x[0]>k[1]||x[1]<k[0]),S=!w;f.setItemLayout(p,{points:h,allClipped:S});var C=f.getItemModel(p).getModel("itemStyle").getItemStyle(),A=Pb(l,"color");C.fill||(C.fill=A,ot(C.fill)&&(C.fill=_k(C.fill,.4))),C.stroke||(C.stroke=A),f.setItemVisual(p,"style",C)}),f.diff(N_(c).data).add(function(p){var h=f.getItemLayout(p);if(!h.allClipped){var m=new Pi({shape:{points:h.points}});f.setItemGraphicEl(p,m),c.group.add(m)}}).update(function(p,h){var m=N_(c).data.getItemGraphicEl(h),g=f.getItemLayout(p);g.allClipped?m&&c.group.remove(m):(m?bn(m,{shape:{points:g.points}},r,p):m=new Pi({shape:{points:g.points}}),f.setItemGraphicEl(p,m),c.group.add(m))}).remove(function(p){var h=N_(c).data.getItemGraphicEl(p);c.group.remove(h)}).execute(),f.eachItemGraphicEl(function(p,h){var m=f.getItemModel(h),g=f.getItemVisual(h,"style");p.useStyle(f.getItemVisual(h,"style")),Fs(p,ps(m),{labelFetcher:r,labelDataIndex:h,defaultText:f.getName(h)||"",inheritColor:ot(g.fill)?_k(g.fill,1):"#000"}),js(p,m),kr(p,null,null,m.get(["emphasis","disabled"])),Et(p).dataModel=r}),N_(c).data=f,c.group.silent=r.get("silent")||n.get("silent")},e.type="markArea",e}(HI);function aJe(t,e,n){var r,s,i=["x0","y0","x1","y1"];if(t){var a=We(t&&t.dimensions,function(d){var c=e.getData(),f=c.getDimensionInfo(c.mapDimension(d))||{};return Ne(Ne({},f),{name:d,ordinalMeta:null})});s=We(i,function(d,c){return{name:d,type:a[c%2].type}}),r=new wi(s,n)}else s=[{name:"value",type:"float"}],r=new wi(s,n);var o=We(n.get("data"),Nt(rJe,e,t,n));t&&(o=Sn(o,Nt(sJe,t)));var l=t?function(d,c,f,p){var h=d.coord[Math.floor(p/2)][p%2];return Sc(h,s[p])}:function(d,c,f,p){return Sc(d.value,s[p])};return r.initData(o,null,l),r.hasItemOption=!0,r}function oJe(t){t.registerComponentModel(nJe),t.registerComponentView(iJe),t.registerPreprocessor(function(e){zI(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var lJe=function(t,e){if(e==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},rD=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.prototype.init=function(n,r,s){this.mergeDefaultAndTheme(n,s),n.selected=n.selected||{},this._updateSelector(n)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),this._updateSelector(n)},e.prototype._updateSelector=function(n){var r=n.selector,s=this.ecModel;r===!0&&(r=n.selector=["all","inverse"]),He(r)&&de(r,function(i,a){ot(i)&&(i={type:i}),r[a]=Ht(i,lJe(s,i.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var r=!1,s=0;s<n.length;s++){var i=n[s].get("name");if(this.isSelected(i)){this.select(i),r=!0;break}}!r&&this.select(n[0].get("name"))}},e.prototype._updateData=function(n){var r=[],s=[];n.eachRawSeries(function(l){var d=l.name;s.push(d);var c;if(l.legendVisualProvider){var f=l.legendVisualProvider,p=f.getAllNames();n.isSeriesFiltered(l)||(s=s.concat(p)),p.length?r=r.concat(p):c=!0}else c=!0;c&&t6(l)&&r.push(l.name)}),this._availableNames=s;var i=this.get("data")||r,a=mt(),o=We(i,function(l){return(ot(l)||hn(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new Tn(l,this,this.ecModel))},this);this._data=Sn(o,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(n){var r=this.option.selected,s=this.get("selectedMode");if(s==="single"){var i=this._data;de(i,function(a){r[a.get("name")]=!1})}r[n]=!0},e.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},e.prototype.toggleSelected=function(n){var r=this.option.selected;r.hasOwnProperty(n)||(r[n]=!0),this[r[n]?"unSelect":"select"](n)},e.prototype.allSelect=function(){var n=this._data,r=this.option.selected;de(n,function(s){r[s.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var n=this._data,r=this.option.selected;de(n,function(s){var i=s.get("name",!0);r.hasOwnProperty(i)||(r[i]=!0),r[i]=!r[i]})},e.prototype.isSelected=function(n){var r=this.option.selected;return!(r.hasOwnProperty(n)&&!r[n])&&Xt(this._availableNames,n)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(nn),nm=Nt,sD=de,j_=Tt,Pae=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return e.prototype.init=function(){this.group.add(this._contentGroup=new j_),this.group.add(this._selectorGroup=new j_),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(n,r,s){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var a=n.get("align"),o=n.get("orient");(!a||a==="auto")&&(a=n.get("left")==="right"&&o==="vertical"?"right":"left");var l=n.get("selector",!0),d=n.get("selectorPosition",!0);l&&(!d||d==="auto")&&(d=o==="horizontal"?"end":"start"),this.renderInner(a,n,r,s,l,o,d);var c=n.getBoxLayoutParams(),f={width:s.getWidth(),height:s.getHeight()},p=n.get("padding"),h=ts(c,f,p),m=this.layoutInner(n,a,h,i,l,d),g=ts(_t({width:m.width,height:m.height},c),f,p);this.group.x=g.x-m.x,this.group.y=g.y-m.y,this.group.markRedraw(),this.group.add(this._backgroundEl=_ae(m,n))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(n,r,s,i,a,o,l){var d=this.getContentGroup(),c=mt(),f=r.get("selectedMode"),p=[];s.eachRawSeries(function(h){!h.get("legendHoverLink")&&p.push(h.id)}),sD(r.getData(),function(h,m){var g=h.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var y=new j_;y.newline=!0,d.add(y);return}var x=s.getSeriesByName(g)[0];if(!c.get(g))if(x){var _=x.getData(),k=_.getVisual("legendLineStyle")||{},w=_.getVisual("legendIcon"),S=_.getVisual("style"),C=this._createItem(x,g,m,h,r,n,k,S,w,f,i);C.on("click",nm(nH,g,null,i,p)).on("mouseover",nm(iD,x.name,null,i,p)).on("mouseout",nm(aD,x.name,null,i,p)),s.ssr&&C.eachChild(function(A){var M=Et(A);M.seriesIndex=x.seriesIndex,M.dataIndex=m,M.ssrType="legend"}),c.set(g,!0)}else s.eachRawSeries(function(A){if(!c.get(g)&&A.legendVisualProvider){var M=A.legendVisualProvider;if(!M.containName(g))return;var E=M.indexOfName(g),P=M.getItemVisual(E,"style"),I=M.getItemVisual(E,"legendIcon"),F=ya(P.fill);F&&F[3]===0&&(F[3]=.2,P=Ne(Ne({},P),{fill:Wu(F,"rgba")}));var L=this._createItem(A,g,m,h,r,n,{},P,I,f,i);L.on("click",nm(nH,null,g,i,p)).on("mouseover",nm(iD,null,g,i,p)).on("mouseout",nm(aD,null,g,i,p)),s.ssr&&L.eachChild(function(z){var N=Et(z);N.seriesIndex=A.seriesIndex,N.dataIndex=m,N.ssrType="legend"}),c.set(g,!0)}},this)},this),a&&this._createSelector(a,r,i,o,l)},e.prototype._createSelector=function(n,r,s,i,a){var o=this.getSelectorGroup();sD(n,function(d){var c=d.type,f=new dn({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){s.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});o.add(f);var p=r.getModel("selectorLabel"),h=r.getModel(["emphasis","selectorLabel"]);Fs(f,{normal:p,emphasis:h},{defaultText:d.title}),Pp(f)})},e.prototype._createItem=function(n,r,s,i,a,o,l,d,c,f,p){var h=n.visualDrawType,m=a.get("itemWidth"),g=a.get("itemHeight"),y=a.isSelected(r),x=i.get("symbolRotate"),_=i.get("symbolKeepAspect"),k=i.get("icon");c=k||c||"roundRect";var w=uJe(c,i,l,d,h,y,p),S=new j_,C=i.getModel("textStyle");if(bt(n.getLegendIcon)&&(!k||k==="inherit"))S.add(n.getLegendIcon({itemWidth:m,itemHeight:g,icon:c,iconRotate:x,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:_}));else{var A=k==="inherit"&&n.getData().getVisual("symbol")?x==="inherit"?n.getData().getVisual("symbolRotate"):x:0;S.add(dJe({itemWidth:m,itemHeight:g,icon:c,iconRotate:A,itemStyle:w.itemStyle,symbolKeepAspect:_}))}var M=o==="left"?m+5:-5,E=o,P=a.get("formatter"),I=r;ot(P)&&P?I=P.replace("{name}",r!=null?r:""):bt(P)&&(I=P(r));var F=y?C.getTextColor():i.get("inactiveColor");S.add(new dn({style:Xn(C,{text:I,x:M,y:g/2,fill:F,align:E,verticalAlign:"middle"},{inheritColor:F})}));var L=new on({shape:S.getBoundingRect(),style:{fill:"transparent"}}),z=i.getModel("tooltip");return z.get("show")&&gh({el:L,componentModel:a,itemName:r,itemTooltipOption:z.option}),S.add(L),S.eachChild(function(N){N.silent=!0}),L.silent=!f,this.getContentGroup().add(S),Pp(S),S.__legendDataIndex=s,S},e.prototype.layoutInner=function(n,r,s,i,a,o){var l=this.getContentGroup(),d=this.getSelectorGroup();Op(n.get("orient"),l,n.get("itemGap"),s.width,s.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(d.markRedraw(),l.markRedraw(),a){Op("horizontal",d,n.get("selectorItemGap",!0));var p=d.getBoundingRect(),h=[-p.x,-p.y],m=n.get("selectorButtonGap",!0),g=n.getOrient().index,y=g===0?"width":"height",x=g===0?"height":"width",_=g===0?"y":"x";o==="end"?h[g]+=c[y]+m:f[g]+=p[y]+m,h[1-g]+=c[x]/2-p[x]/2,d.x=h[0],d.y=h[1],l.x=f[0],l.y=f[1];var k={x:0,y:0};return k[y]=c[y]+m+p[y],k[x]=Math.max(c[x],p[x]),k[_]=Math.min(0,p[_]+h[1-g]),k}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(vr);function uJe(t,e,n,r,s,i,a){function o(y,x){y.lineWidth==="auto"&&(y.lineWidth=x.lineWidth>0?2:0),sD(y,function(_,k){y[k]==="inherit"&&(y[k]=x[k])})}var l=e.getModel("itemStyle"),d=l.getItemStyle(),c=t.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");d.decal=!f||f==="inherit"?r.decal:bg(f,a),d.fill==="inherit"&&(d.fill=r[s]),d.stroke==="inherit"&&(d.stroke=r[c]),d.opacity==="inherit"&&(d.opacity=(s==="fill"?r:n).opacity),o(d,r);var p=e.getModel("lineStyle"),h=p.getLineStyle();if(o(h,n),d.fill==="auto"&&(d.fill=r.fill),d.stroke==="auto"&&(d.stroke=r.fill),h.stroke==="auto"&&(h.stroke=r.fill),!i){var m=e.get("inactiveBorderWidth"),g=d[c];d.lineWidth=m==="auto"?r.lineWidth>0&&g?2:0:d.lineWidth,d.fill=e.get("inactiveColor"),d.stroke=e.get("inactiveBorderColor"),h.stroke=p.get("inactiveColor"),h.lineWidth=p.get("inactiveWidth")}return{itemStyle:d,lineStyle:h}}function dJe(t){var e=t.icon||"roundRect",n=Wr(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function nH(t,e,n,r){aD(t,e,n,r),n.dispatchAction({type:"legendToggleSelect",name:t!=null?t:e}),iD(t,e,n,r)}function Iae(t){for(var e=t.getZr().storage.getDisplayList(),n,r=0,s=e.length;r<s&&!(n=e[r].states.emphasis);)r++;return n&&n.hoverLayer}function iD(t,e,n,r){Iae(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function aD(t,e,n,r){Iae(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}function cJe(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(n){for(var r=0;r<e.length;r++)if(!e[r].isSelected(n.name))return!1;return!0})}function Xv(t,e,n){var r=t==="allSelect"||t==="inverseSelect",s={},i=[];n.eachComponent({mainType:"legend",query:e},function(o){r?o[t]():o[t](e.name),rH(o,s),i.push(o.componentIndex)});var a={};return n.eachComponent("legend",function(o){de(s,function(l,d){o[l?"select":"unSelect"](d)}),rH(o,a)}),r?{selected:a,legendIndex:i}:{name:e.name,selected:a}}function rH(t,e){var n=e||{};return de(t.getData(),function(r){var s=r.get("name");if(!(s===`
`||s==="")){var i=t.isSelected(s);pt(n,s)?n[s]=n[s]&&i:n[s]=i}}),n}function fJe(t){t.registerAction("legendToggleSelect","legendselectchanged",Nt(Xv,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Nt(Xv,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Nt(Xv,"inverseSelect")),t.registerAction("legendSelect","legendselected",Nt(Xv,"select")),t.registerAction("legendUnSelect","legendunselected",Nt(Xv,"unSelect"))}function Oae(t){t.registerComponentModel(rD),t.registerComponentView(Pae),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,cJe),t.registerSubTypeDefaulter("legend",function(){return"plain"}),fJe(t)}var pJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},e.prototype.init=function(n,r,s){var i=Hg(n);t.prototype.init.call(this,n,r,s),sH(this,n,i)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),sH(this,this.option,n)},e.type="legend.scroll",e.defaultOption=Qc(rD.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(rD);function sH(t,e,n){var r=t.getOrient(),s=[1,1];s[r.index]=0,Nc(e,n,{type:"box",ignoreSize:!!s})}var iH=Tt,h5=["width","height"],m5=["x","y"],hJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new iH),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new iH)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(n,r,s,i,a,o,l){var d=this;t.prototype.renderInner.call(this,n,r,s,i,a,o,l);var c=this._controllerGroup,f=r.get("pageIconSize",!0),p=He(f)?f:[f,f];m("pagePrev",0);var h=r.getModel("pageTextStyle");c.add(new dn({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),m("pageNext",1);function m(g,y){var x=g+"DataIndex",_=Db(r.get("pageIcons",!0)[r.getOrient().name][y],{onclick:ct(d._pageGo,d,x,r,i)},{x:-p[0]/2,y:-p[1]/2,width:p[0],height:p[1]});_.name=g,c.add(_)}},e.prototype.layoutInner=function(n,r,s,i,a,o){var l=this.getSelectorGroup(),d=n.getOrient().index,c=h5[d],f=m5[d],p=h5[1-d],h=m5[1-d];a&&Op("horizontal",l,n.get("selectorItemGap",!0));var m=n.get("selectorButtonGap",!0),g=l.getBoundingRect(),y=[-g.x,-g.y],x=kt(s);a&&(x[c]=s[c]-g[c]-m);var _=this._layoutContentAndController(n,i,x,d,c,p,h,f);if(a){if(o==="end")y[d]+=_[c]+m;else{var k=g[c]+m;y[d]-=k,_[f]-=k}_[c]+=g[c]+m,y[1-d]+=_[h]+_[p]/2-g[p]/2,_[p]=Math.max(_[p],g[p]),_[h]=Math.min(_[h],g[h]+y[1-d]),l.x=y[0],l.y=y[1],l.markRedraw()}return _},e.prototype._layoutContentAndController=function(n,r,s,i,a,o,l,d){var c=this.getContentGroup(),f=this._containerGroup,p=this._controllerGroup;Op(n.get("orient"),c,n.get("itemGap"),i?s.width:null,i?null:s.height),Op("horizontal",p,n.get("pageButtonItemGap",!0));var h=c.getBoundingRect(),m=p.getBoundingRect(),g=this._showController=h[a]>s[a],y=[-h.x,-h.y];r||(y[i]=c[d]);var x=[0,0],_=[-m.x,-m.y],k=Ot(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(g){var w=n.get("pageButtonPosition",!0);w==="end"?_[i]+=s[a]-m[a]:x[i]+=m[a]+k}_[1-i]+=h[o]/2-m[o]/2,c.setPosition(y),f.setPosition(x),p.setPosition(_);var S={x:0,y:0};if(S[a]=g?s[a]:h[a],S[o]=Math.max(h[o],m[o]),S[l]=Math.min(0,m[l]+_[1-i]),f.__rectSize=s[a],g){var C={x:0,y:0};C[a]=Math.max(s[a]-m[a]-k,0),C[o]=S[o],f.setClipPath(new on({shape:C})),f.__rectSize=C[a]}else p.eachChild(function(M){M.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(n);return A.pageIndex!=null&&bn(c,{x:A.contentPosition[0],y:A.contentPosition[1]},g?n:null),this._updatePageInfoView(n,A),S},e.prototype._pageGo=function(n,r,s){var i=this._getPageInfo(r)[n];i!=null&&s.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:r.id})},e.prototype._updatePageInfoView=function(n,r){var s=this._controllerGroup;de(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",p=r[f]!=null,h=s.childOfName(c);h&&(h.setStyle("fill",p?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),h.cursor=p?"pointer":"default")});var i=s.childOfName("pageText"),a=n.get("pageFormatter"),o=r.pageIndex,l=o!=null?o+1:0,d=r.pageCount;i&&a&&i.setStyle("text",ot(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",d==null?"":d+""):a({current:l,total:d}))},e.prototype._getPageInfo=function(n){var r=n.get("scrollDataIndex",!0),s=this.getContentGroup(),i=this._containerGroup.__rectSize,a=n.getOrient().index,o=h5[a],l=m5[a],d=this._findTargetItemIndex(r),c=s.children(),f=c[d],p=c.length,h=p?1:0,m={contentPosition:[s.x,s.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return m;var g=w(f);m.contentPosition[a]=-g.s;for(var y=d+1,x=g,_=g,k=null;y<=p;++y)k=w(c[y]),(!k&&_.e>x.s+i||k&&!S(k,x.s))&&(_.i>x.i?x=_:x=k,x&&(m.pageNextDataIndex==null&&(m.pageNextDataIndex=x.i),++m.pageCount)),_=k;for(var y=d-1,x=g,_=g,k=null;y>=-1;--y)k=w(c[y]),(!k||!S(_,k.s))&&x.i<_.i&&(_=x,m.pagePrevDataIndex==null&&(m.pagePrevDataIndex=x.i),++m.pageCount,++m.pageIndex),x=k;return m;function w(C){if(C){var A=C.getBoundingRect(),M=A[l]+C[l];return{s:M,e:M+A[o],i:C.__legendDataIndex}}}function S(C,A){return C.e>=A&&C.s<=A+i}},e.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var r,s=this.getContentGroup(),i;return s.eachChild(function(a,o){var l=a.__legendDataIndex;i==null&&l!=null&&(i=o),l===n&&(r=o)}),r!=null?r:i},e.type="legend.scroll",e}(Pae);function mJe(t){t.registerAction("legendScroll","legendscroll",function(e,n){var r=e.scrollDataIndex;r!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:e},function(s){s.setScrollDataIndex(r)})})}function gJe(t){Qt(Oae),t.registerComponentModel(pJe),t.registerComponentView(hJe),mJe(t)}function vJe(t){Qt(Oae),Qt(gJe)}var yJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.inside",e.defaultOption=Qc(N1.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(N1),qI=ln();function bJe(t,e,n){qI(t).coordSysRecordMap.each(function(r){var s=r.dataZoomInfoMap.get(e.uid);s&&(s.getRange=n)})}function xJe(t,e){for(var n=qI(t).coordSysRecordMap,r=n.keys(),s=0;s<r.length;s++){var i=r[s],a=n.get(i),o=a.dataZoomInfoMap;if(o){var l=e.uid,d=o.get(l);d&&(o.removeKey(l),o.keys().length||Lae(n,a))}}}function Lae(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function _Je(t,e){var n={model:e,containsPoint:Nt(kJe,e),dispatchAction:Nt(wJe,t),dataZoomInfoMap:null,controller:null},r=n.controller=new zb(t.getZr());return de(["pan","zoom","scrollMove"],function(s){r.on(s,function(i){var a=[];n.dataZoomInfoMap.each(function(o){if(i.isAvailableBehavior(o.model.option)){var l=(o.getRange||{})[s],d=l&&l(o.dzReferCoordSysInfo,n.model.mainType,n.controller,i);!o.model.get("disabled",!0)&&d&&a.push({dataZoomId:o.model.id,start:d[0],end:d[1]})}}),a.length&&n.dispatchAction(a)})}),n}function wJe(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function kJe(t,e,n,r){return t.coordinateSystem.containPoint([n,r])}function SJe(t){var e,n="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},s=!0;return t.each(function(i){var a=i.model,o=a.get("disabled",!0)?!1:a.get("zoomLock",!0)?"move":!0;r[n+o]>r[n+e]&&(e=o),s=s&&a.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!s}}}function CJe(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(e,n){var r=qI(n),s=r.coordSysRecordMap||(r.coordSysRecordMap=mt());s.each(function(i){i.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var a=yae(i);de(a.infoList,function(o){var l=o.model.uid,d=s.get(l)||s.set(l,_Je(n,o.model)),c=d.dataZoomInfoMap||(d.dataZoomInfoMap=mt());c.set(i.uid,{dzReferCoordSysInfo:o,model:i,getRange:null})})}),s.each(function(i){var a=i.controller,o,l=i.dataZoomInfoMap;if(l){var d=l.keys()[0];d!=null&&(o=l.get(d))}if(!o){Lae(s,i);return}var c=SJe(l);a.enable(c.controlType,c.opt),a.setPointerChecker(i.containsPoint),Gg(i,"dispatchAction",o.model.get("throttle",!0),"fixRate")})})}var AJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return e.prototype.render=function(n,r,s){if(t.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),bJe(s,n,{pan:ct(g5.pan,this),zoom:ct(g5.zoom,this),scrollMove:ct(g5.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){xJe(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(LI),g5={zoom:function(t,e,n,r){var s=this.range,i=s.slice(),a=t.axisModels[0];if(a){var o=v5[e](null,[r.originX,r.originY],a,n,t),l=(o.signal>0?o.pixelStart+o.pixelLength-o.pixel:o.pixel-o.pixelStart)/o.pixelLength*(i[1]-i[0])+i[0],d=Math.max(1/r.scale,0);i[0]=(i[0]-l)*d+l,i[1]=(i[1]-l)*d+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(wh(0,i,[0,100],0,c.minSpan,c.maxSpan),this.range=i,s[0]!==i[0]||s[1]!==i[1])return i}},pan:aH(function(t,e,n,r,s,i){var a=v5[r]([i.oldX,i.oldY],[i.newX,i.newY],e,s,n);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength}),scrollMove:aH(function(t,e,n,r,s,i){var a=v5[r]([0,0],[i.scrollDelta,i.scrollDelta],e,s,n);return a.signal*(t[1]-t[0])*i.scrollDelta})};function aH(t){return function(e,n,r,s){var i=this.range,a=i.slice(),o=e.axisModels[0];if(o){var l=t(a,o,e,n,r,s);if(wh(l,a,[0,100],"all"),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}}}var v5={grid:function(t,e,n,r,s){var i=n.axis,a={},o=s.model.coordinateSystem.getRect();return t=t||[0,0],i.dim==="x"?(a.pixel=e[0]-t[0],a.pixelLength=o.width,a.pixelStart=o.x,a.signal=i.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=o.height,a.pixelStart=o.y,a.signal=i.inverse?-1:1),a},polar:function(t,e,n,r,s){var i=n.axis,a={},o=s.model.coordinateSystem,l=o.getRadiusAxis().getExtent(),d=o.getAngleAxis().getExtent();return t=t?o.pointToCoord(t):[0,0],e=o.pointToCoord(e),n.mainType==="radiusAxis"?(a.pixel=e[0]-t[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=i.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=d[1]-d[0],a.pixelStart=d[0],a.signal=i.inverse?-1:1),a},singleAxis:function(t,e,n,r,s){var i=n.axis,a=s.model.coordinateSystem.getRect(),o={};return t=t||[0,0],i.orient==="horizontal"?(o.pixel=e[0]-t[0],o.pixelLength=a.width,o.pixelStart=a.x,o.signal=i.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=a.height,o.pixelStart=a.y,o.signal=i.inverse?-1:1),o}};function Vae(t){VI(t),t.registerComponentModel(yJe),t.registerComponentView(AJe),CJe(t)}var TJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Qc(N1.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(N1),Qv=on,oH=7,$Je=1,y5=30,MJe=7,Zv="horizontal",lH="vertical",EJe=5,DJe=["line","bar","candlestick","scatter"],RJe={easing:"cubicOut",duration:100,delay:0},PJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return e.prototype.init=function(n,r){this.api=r,this._onBrush=ct(this._onBrush,this),this._onBrushEnd=ct(this._onBrushEnd,this)},e.prototype.render=function(n,r,s,i){if(t.prototype.render.apply(this,arguments),Gg(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){C1(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new Tt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var n=this.dataZoomModel,r=this.api,s=n.get("brushSelect"),i=s?MJe:0,a=this._findCoordRect(),o={width:r.getWidth(),height:r.getHeight()},l=this._orient===Zv?{right:o.width-a.x-a.width,top:o.height-y5-oH-i,width:a.width,height:y5}:{right:oH,top:a.y,width:y5,height:a.height},d=Hg(n.option);de(["right","top","width","height"],function(f){d[f]==="ph"&&(d[f]=l[f])});var c=ts(d,o);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===lH&&this._size.reverse()},e.prototype._positionGroup=function(){var n=this.group,r=this._location,s=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),a=i&&i.get("inverse"),o=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(s===Zv&&!a?{scaleY:l?1:-1,scaleX:1}:s===Zv&&a?{scaleY:l?1:-1,scaleX:-1}:s===lH&&!a?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var d=n.getBoundingRect([o]);n.x=r.x-d.x,n.y=r.y-d.y,n.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var n=this.dataZoomModel,r=this._size,s=this._displayables.sliderGroup,i=n.get("brushSelect");s.add(new Qv({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var a=new Qv({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:ct(this._onClickPanel,this)}),o=this.api.getZr();i?(a.on("mousedown",this._onBrushStart,this),a.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),s.add(a)},e.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var r=this._size,s=this._shadowSize||[],i=n.series,a=i.getRawData(),o=i.getShadowDim&&i.getShadowDim(),l=o&&a.getDimensionInfo(o)?i.getShadowDim():n.otherDim;if(l==null)return;var d=this._shadowPolygonPts,c=this._shadowPolylinePts;if(a!==this._shadowData||l!==this._shadowDim||r[0]!==s[0]||r[1]!==s[1]){var f=a.getDataExtent(l),p=(f[1]-f[0])*.3;f=[f[0]-p,f[1]+p];var h=[0,r[1]],m=[0,r[0]],g=[[r[0],0],[0,0]],y=[],x=m[1]/(a.count()-1),_=0,k=Math.round(a.count()/r[0]),w;a.each([l],function(E,P){if(k>0&&P%k){_+=x;return}var I=E==null||isNaN(E)||E==="",F=I?0:An(E,f,h,!0);I&&!w&&P?(g.push([g[g.length-1][0],0]),y.push([y[y.length-1][0],0])):!I&&w&&(g.push([_,0]),y.push([_,0])),g.push([_,F]),y.push([_,F]),_+=x,w=I}),d=this._shadowPolygonPts=g,c=this._shadowPolylinePts=y}this._shadowData=a,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var S=this.dataZoomModel;function C(E){var P=S.getModel(E?"selectedDataBackground":"dataBackground"),I=new Tt,F=new Pi({shape:{points:d},segmentIgnoreThreshold:1,style:P.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),L=new Ii({shape:{points:c},segmentIgnoreThreshold:1,style:P.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return I.add(F),I.add(L),I}for(var A=0;A<3;A++){var M=C(A===1);this._displayables.sliderGroup.add(M),this._displayables.dataShadowSegs.push(M)}},e.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,r=n.get("showDataShadow");if(r!==!1){var s,i=this.ecModel;return n.eachTargetAxis(function(a,o){var l=n.getAxisProxy(a,o).getTargetSeriesModels();de(l,function(d){if(!s&&!(r!==!0&&Xt(DJe,d.get("type"))<0)){var c=i.getComponent(fc(a),o).axis,f=IJe(a),p,h=d.coordinateSystem;f!=null&&h.getOtherAxis&&(p=h.getOtherAxis(c).inverse),f=d.getData().mapDimension(f),s={thisAxis:c,series:d,thisDim:a,otherDim:f,otherAxisInverse:p}}},this)},this),s}},e.prototype._renderHandle=function(){var n=this.group,r=this._displayables,s=r.handles=[null,null],i=r.handleLabels=[null,null],a=this._displayables.sliderGroup,o=this._size,l=this.dataZoomModel,d=this.api,c=l.get("borderRadius")||0,f=l.get("brushSelect"),p=r.filler=new Qv({silent:f,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});a.add(p),a.add(new Qv({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:$Je,fill:"rgba(0,0,0,0)"}})),de([0,1],function(k){var w=l.get("handleIcon");!Lk[w]&&w.indexOf("path://")<0&&w.indexOf("image://")<0&&(w="path://"+w);var S=Wr(w,-1,0,2,2,null,!0);S.attr({cursor:uH(this._orient),draggable:!0,drift:ct(this._onDragMove,this,k),ondragend:ct(this._onDragEnd,this),onmouseover:ct(this._showDataInfo,this,!0),onmouseout:ct(this._showDataInfo,this,!1),z2:5});var C=S.getBoundingRect(),A=l.get("handleSize");this._handleHeight=tt(A,this._size[1]),this._handleWidth=C.width/C.height*this._handleHeight,S.setStyle(l.getModel("handleStyle").getItemStyle()),S.style.strokeNoScale=!0,S.rectHover=!0,S.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Pp(S);var M=l.get("handleColor");M!=null&&(S.style.fill=M),a.add(s[k]=S);var E=l.getModel("textStyle"),P=l.get("handleLabel")||{},I=P.show||!1;n.add(i[k]=new dn({silent:!0,invisible:!I,style:Xn(E,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:E.getTextColor(),font:E.getFont()}),z2:10}))},this);var h=p;if(f){var m=tt(l.get("moveHandleSize"),o[1]),g=r.moveHandle=new on({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:m}}),y=m*.8,x=r.moveHandleIcon=Wr(l.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);x.silent=!0,x.y=o[1]+m/2-.5,g.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _=Math.min(o[1]/2,Math.max(m,10));h=r.moveZone=new on({invisible:!0,shape:{y:o[1]-_,height:m+_}}),h.on("mouseover",function(){d.enterEmphasis(g)}).on("mouseout",function(){d.leaveEmphasis(g)}),a.add(g),a.add(x),a.add(h)}h.attr({draggable:!0,cursor:uH(this._orient),drift:ct(this._onDragMove,this,"all"),ondragstart:ct(this._showDataInfo,this,!0),ondragend:ct(this._onDragEnd,this),onmouseover:ct(this._showDataInfo,this,!0),onmouseout:ct(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[An(n[0],[0,100],r,!0),An(n[1],[0,100],r,!0)]},e.prototype._updateInterval=function(n,r){var s=this.dataZoomModel,i=this._handleEnds,a=this._getViewExtent(),o=s.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];wh(r,i,a,s.get("zoomLock")?"all":n,o.minSpan!=null?An(o.minSpan,l,a,!0):null,o.maxSpan!=null?An(o.maxSpan,l,a,!0):null);var d=this._range,c=this._range=Ga([An(i[0],a,l,!0),An(i[1],a,l,!0)]);return!d||d[0]!==c[0]||d[1]!==c[1]},e.prototype._updateView=function(n){var r=this._displayables,s=this._handleEnds,i=Ga(s.slice()),a=this._size;de([0,1],function(h){var m=r.handles[h],g=this._handleHeight;m.attr({scaleX:g/2,scaleY:g/2,x:s[h]+(h?-1:1),y:a[1]/2-g/2})},this),r.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:a[1]});var o={x:i[0],width:i[1]-i[0]};r.moveHandle&&(r.moveHandle.setShape(o),r.moveZone.setShape(o),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",o.x+o.width/2));for(var l=r.dataShadowSegs,d=[0,i[0],i[1],a[0]],c=0;c<l.length;c++){var f=l[c],p=f.getClipPath();p||(p=new on,f.setClipPath(p)),p.setShape({x:d[c],y:0,width:d[c+1]-d[c],height:a[1]})}this._updateDataInfo(n)},e.prototype._updateDataInfo=function(n){var r=this.dataZoomModel,s=this._displayables,i=s.handleLabels,a=this._orient,o=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var d=l.getAxisModel().axis,c=this._range,f=n?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();o=[this._formatLabel(f[0],d),this._formatLabel(f[1],d)]}}var p=Ga(this._handleEnds.slice());h.call(this,0),h.call(this,1);function h(m){var g=Ip(s.handles[m].parent,this.group),y=JC(m===0?"right":"left",g),x=this._handleWidth/2+EJe,_=Do([p[m]+(m===0?-x:x),this._size[1]/2],g);i[m].setStyle({x:_[0],y:_[1],verticalAlign:a===Zv?"middle":y,align:a===Zv?y:"center",text:o[m]})}},e.prototype._formatLabel=function(n,r){var s=this.dataZoomModel,i=s.get("labelFormatter"),a=s.get("labelPrecision");(a==null||a==="auto")&&(a=r.getPixelPrecision());var o=n==null||isNaN(n)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(a,20));return bt(i)?i(n,o):ot(i)?i.replace("{value}",o):o},e.prototype._showDataInfo=function(n){var r=this.dataZoomModel.get("handleLabel")||{},s=r.show||!1,i=this.dataZoomModel.getModel(["emphasis","handleLabel"]),a=i.get("show")||!1,o=n||this._dragging?a:s,l=this._displayables,d=l.handleLabels;d[0].attr("invisible",!o),d[1].attr("invisible",!o),l.moveHandle&&this.api[o?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},e.prototype._onDragMove=function(n,r,s,i){this._dragging=!0,sd(i.event);var a=this._displayables.sliderGroup.getLocalTransform(),o=Do([r,s],a,!0),l=this._updateInterval(n,o[0]),d=this.dataZoomModel.get("realtime");this._updateView(!d),l&&d&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(n){var r=this._size,s=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(s[0]<0||s[0]>r[0]||s[1]<0||s[1]>r[1])){var i=this._handleEnds,a=(i[0]+i[1])/2,o=this._updateInterval("all",s[0]-a);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(n){var r=n.offsetX,s=n.offsetY;this._brushStart=new qt(r,s),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(n){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var s=r.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(s.width)<5)){var a=this._getViewExtent(),o=[0,100];this._range=Ga([An(s.x,a,o,!0),An(s.x+s.width,a,o,!0)]),this._handleEnds=[s.x,s.x+s.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(n){this._brushing&&(sd(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},e.prototype._updateBrushRect=function(n,r){var s=this._displayables,i=this.dataZoomModel,a=s.brushRect;a||(a=s.brushRect=new Qv({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),s.sliderGroup.add(a)),a.attr("ignore",!1);var o=this._brushStart,l=this._displayables.sliderGroup,d=l.transformCoordToLocal(n,r),c=l.transformCoordToLocal(o.x,o.y),f=this._size;d[0]=Math.max(Math.min(f[0],d[0]),0),a.setShape({x:c[0],y:0,width:d[0]-c[0],height:f[1]})},e.prototype._dispatchZoomAction=function(n){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?RJe:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var n,r=yae(this.dataZoomModel).infoList;if(!n&&r.length){var s=r[0].model.coordinateSystem;n=s.getRect&&s.getRect()}if(!n){var i=this.api.getWidth(),a=this.api.getHeight();n={x:i*.2,y:a*.2,width:i*.6,height:a*.6}}return n},e.type="dataZoom.slider",e}(LI);function IJe(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function uH(t){return t==="vertical"?"ns-resize":"ew-resize"}function Nae(t){t.registerComponentModel(TJe),t.registerComponentView(PJe),VI(t)}function OJe(t){Qt(Vae),Qt(Nae)}var jae={get:function(t,e,n){var r=kt((LJe[t]||{})[e]);return n&&He(r)?r[r.length-1]:r}},LJe={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},dH=cs.mapVisual,VJe=cs.eachVisual,NJe=He,cH=de,jJe=Ga,FJe=An,oS=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return e.prototype.init=function(n,r,s){this.mergeDefaultAndTheme(n,s)},e.prototype.optionUpdated=function(n,r){var s=this.option;!r&&$ae(s,n,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(n){var r=this.stateList;n=ct(n,this),this.controllerVisuals=eD(this.option.controller,r,n),this.targetVisuals=eD(this.option.target,r,n)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var n=this.option.seriesIndex,r=[];return n==null||n==="all"?this.ecModel.eachSeries(function(s,i){r.push(i)}):r=In(n),r},e.prototype.eachTargetSeries=function(n,r){de(this.getTargetSeriesIndices(),function(s){var i=this.ecModel.getSeriesByIndex(s);i&&n.call(r,i)},this)},e.prototype.isTargetSeries=function(n){var r=!1;return this.eachTargetSeries(function(s){s===n&&(r=!0)}),r},e.prototype.formatValueText=function(n,r,s){var i=this.option,a=i.precision,o=this.dataBound,l=i.formatter,d;s=s||["<",">"],He(n)&&(n=n.slice(),d=!0);var c=r?n:d?[f(n[0]),f(n[1])]:f(n);if(ot(l))return l.replace("{value}",d?c[0]:c).replace("{value2}",d?c[1]:c);if(bt(l))return d?l(n[0],n[1]):l(n);if(d)return n[0]===o[0]?s[0]+" "+c[1]:n[1]===o[1]?s[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(p){return p===o[0]?"min":p===o[1]?"max":(+p).toFixed(Math.min(a,20))}},e.prototype.resetExtent=function(){var n=this.option,r=jJe([n.min,n.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(n){var r=this.option.dimension;if(r!=null)return n.getDimensionIndex(r);for(var s=n.dimensions,i=s.length-1;i>=0;i--){var a=s[i],o=n.getDimensionInfo(a);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var n=this.ecModel,r=this.option,s={inRange:r.inRange,outOfRange:r.outOfRange},i=r.target||(r.target={}),a=r.controller||(r.controller={});Ht(i,s),Ht(a,s);var o=this.isCategory();l.call(this,i),l.call(this,a),d.call(this,i,"inRange","outOfRange"),c.call(this,a);function l(f){NJe(r.color)&&!f.inRange&&(f.inRange={color:r.color.slice().reverse()}),f.inRange=f.inRange||{color:n.get("gradientColor")}}function d(f,p,h){var m=f[p],g=f[h];m&&!g&&(g=f[h]={},cH(m,function(y,x){if(cs.isValidType(x)){var _=jae.get(x,"inactive",o);_!=null&&(g[x]=_,x==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function c(f){var p=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,h=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,m=this.get("inactiveColor"),g=this.getItemSymbol(),y=g||"roundRect";cH(this.stateList,function(x){var _=this.itemSize,k=f[x];k||(k=f[x]={color:o?m:[m]}),k.symbol==null&&(k.symbol=p&&kt(p)||(o?y:[y])),k.symbolSize==null&&(k.symbolSize=h&&kt(h)||(o?_[0]:[_[0],_[0]])),k.symbol=dH(k.symbol,function(C){return C==="none"?y:C});var w=k.symbolSize;if(w!=null){var S=-1/0;VJe(w,function(C){C>S&&(S=C)}),k.symbolSize=dH(w,function(C){return FJe(C,[0,S],[0,_[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(n){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(n){return null},e.prototype.getVisualMeta=function(n){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(nn),fH=[20,140],BJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(n,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(s){s.mappingMethod="linear",s.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var n=this.itemSize;(n[0]==null||isNaN(n[0]))&&(n[0]=fH[0]),(n[1]==null||isNaN(n[1]))&&(n[1]=fH[1])},e.prototype._resetRange=function(){var n=this.getExtent(),r=this.option.range;!r||r.auto?(n.auto=1,this.option.range=n):He(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],n[0]),r[1]=Math.min(r[1],n[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),de(this.stateList,function(n){var r=this.option.controller[n].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(n){this.option.range=n.slice(),this._resetRange()},e.prototype.getSelected=function(){var n=this.getExtent(),r=Ga((this.get("range")||[]).slice());return r[0]>n[1]&&(r[0]=n[1]),r[1]>n[1]&&(r[1]=n[1]),r[0]<n[0]&&(r[0]=n[0]),r[1]<n[0]&&(r[1]=n[0]),r},e.prototype.getValueState=function(n){var r=this.option.range,s=this.getExtent();return(r[0]<=s[0]||r[0]<=n)&&(r[1]>=s[1]||n<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(n){var r=[];return this.eachTargetSeries(function(s){var i=[],a=s.getData();a.each(this.getDataDimensionIndex(a),function(o,l){n[0]<=o&&o<=n[1]&&i.push(l)},this),r.push({seriesId:s.id,dataIndex:i})},this),r},e.prototype.getVisualMeta=function(n){var r=pH(this,"outOfRange",this.getExtent()),s=pH(this,"inRange",this.option.range.slice()),i=[];function a(h,m){i.push({value:h,color:n(h,m)})}for(var o=0,l=0,d=s.length,c=r.length;l<c&&(!s.length||r[l]<=s[0]);l++)r[l]<s[o]&&a(r[l],"outOfRange");for(var f=1;o<d;o++,f=0)f&&i.length&&a(s[o],"outOfRange"),a(s[o],"inRange");for(var f=1;l<c;l++)(!s.length||s[s.length-1]<r[l])&&(f&&(i.length&&a(i[i.length-1].value,"outOfRange"),f=0),a(r[l],"outOfRange"));var p=i.length;return{stops:i,outerColors:[p?i[0].color:"transparent",p?i[p-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Qc(oS.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(oS);function pH(t,e,n){if(n[0]===n[1])return n.slice();for(var r=200,s=(n[1]-n[0])/r,i=n[0],a=[],o=0;o<=r&&i<n[1];o++)a.push(i),i+=s;return a.push(n[1]),a}var Fae=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return e.prototype.init=function(n,r){this.ecModel=n,this.api=r},e.prototype.render=function(n,r,s,i){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender(n,r,s,i)},e.prototype.renderBackground=function(n){var r=this.visualMapModel,s=Ug(r.get("padding")||0),i=n.getBoundingRect();n.add(new on({z2:-1,silent:!0,shape:{x:i.x-s[3],y:i.y-s[0],width:i.width+s[3]+s[1],height:i.height+s[0]+s[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(n,r,s){s=s||{};var i=s.forceState,a=this.visualMapModel,o={};if(r==="color"){var l=a.get("contentColor");o.color=l}function d(h){return o[h]}function c(h,m){o[h]=m}var f=a.controllerVisuals[i||a.getValueState(n)],p=cs.prepareVisualTypes(f);return de(p,function(h){var m=f[h];s.convertOpacityToAlpha&&h==="opacity"&&(h="colorAlpha",m=f.__alphaForOpacity),cs.dependsOn(h,r)&&m&&m.applyVisual(n,d,c)}),o[r]},e.prototype.positionGroup=function(n){var r=this.visualMapModel,s=this.api;aA(n,r.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})},e.prototype.doRender=function(n,r,s,i){},e.type="visualMap",e}(vr),hH=[["left","right","width"],["top","bottom","height"]];function Bae(t,e,n){var r=t.option,s=r.align;if(s!=null&&s!=="auto")return s;for(var i={width:e.getWidth(),height:e.getHeight()},a=r.orient==="horizontal"?1:0,o=hH[a],l=[0,null,10],d={},c=0;c<3;c++)d[hH[1-a][c]]=l[c],d[o[c]]=c===2?n[0]:r[o[c]];var f=[["x","width",3],["y","height",0]][a],p=ts(d,i,r.padding);return o[(p.margin[f[2]]||0)+p[f[0]]+p[f[1]]*.5<i[f[1]]*.5?0:1]}function qw(t,e){return de(t||[],function(n){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var al=An,zJe=de,mH=Math.min,b5=Math.max,UJe=12,HJe=6,qJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return e.prototype.init=function(n,r){t.prototype.init.call(this,n,r),this._hoverLinkFromSeriesMouseOver=ct(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=ct(this._hideIndicator,this)},e.prototype.doRender=function(n,r,s,i){(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var n=this.visualMapModel,r=this.group;this._orient=n.get("orient"),this._useHandle=n.get("calculable"),this._resetInterval(),this._renderBar(r);var s=n.get("text");this._renderEndsText(r,s,0),this._renderEndsText(r,s,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(n,r,s){if(r){var i=r[1-s];i=i!=null?i+"":"";var a=this.visualMapModel,o=a.get("textGap"),l=a.itemSize,d=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,s===0?-o:l[1]+o],d),f=this._applyTransform(s===0?"bottom":"top",d),p=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new dn({style:Xn(h,{x:c[0],y:c[1],verticalAlign:p==="horizontal"?"middle":f,align:p==="horizontal"?f:"center",text:i})}))}},e.prototype._renderBar=function(n){var r=this.visualMapModel,s=this._shapes,i=r.itemSize,a=this._orient,o=this._useHandle,l=Bae(r,this.api,i),d=s.mainGroup=this._createBarGroup(l),c=new Tt;d.add(c),c.add(s.outOfRange=gH()),c.add(s.inRange=gH(null,o?yH(this._orient):null,ct(this._dragHandle,this,"all",!1),ct(this._dragHandle,this,"all",!0))),c.setClipPath(new on({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var f=r.textStyleModel.getTextRect(""),p=b5(f.width,f.height);o&&(s.handleThumbs=[],s.handleLabels=[],s.handleLabelPoints=[],this._createHandle(r,d,0,i,p,a),this._createHandle(r,d,1,i,p,a)),this._createIndicator(r,d,i,p,a),n.add(d)},e.prototype._createHandle=function(n,r,s,i,a,o){var l=ct(this._dragHandle,this,s,!1),d=ct(this._dragHandle,this,s,!0),c=Fo(n.get("handleSize"),i[0]),f=Wr(n.get("handleIcon"),-c/2,-c/2,c,c,null,!0),p=yH(this._orient);f.attr({cursor:p,draggable:!0,drift:l,ondragend:d,onmousemove:function(x){sd(x.event)}}),f.x=i[0]/2,f.useStyle(n.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),op(f,!0),r.add(f);var h=this.visualMapModel.textStyleModel,m=new dn({cursor:p,draggable:!0,drift:l,onmousemove:function(x){sd(x.event)},ondragend:d,style:Xn(h,{x:0,y:0,text:""})});m.ensureState("blur").style={opacity:.1},m.stateTransition={duration:200},this.group.add(m);var g=[c,0],y=this._shapes;y.handleThumbs[s]=f,y.handleLabelPoints[s]=g,y.handleLabels[s]=m},e.prototype._createIndicator=function(n,r,s,i,a){var o=Fo(n.get("indicatorSize"),s[0]),l=Wr(n.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:s[0]/2});var d=n.getModel("indicatorStyle").getItemStyle();if(l instanceof Cs){var c=l.style;l.useStyle(Ne({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},d))}else l.useStyle(d);r.add(l);var f=this.visualMapModel.textStyleModel,p=new dn({silent:!0,invisible:!0,style:Xn(f,{x:0,y:0,text:""})});this.group.add(p);var h=[(a==="horizontal"?i/2:HJe)+s[0]/2,0],m=this._shapes;m.indicator=l,m.indicatorLabel=p,m.indicatorLabelPoint=h,this._firstShowIndicator=!0},e.prototype._dragHandle=function(n,r,s,i){if(this._useHandle){if(this._dragging=!r,!r){var a=this._applyTransform([s,i],this._shapes.mainGroup,!0);this._updateInterval(n,a[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():vH(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},e.prototype._resetInterval=function(){var n=this.visualMapModel,r=this._dataInterval=n.getSelected(),s=n.getExtent(),i=[0,n.itemSize[1]];this._handleEnds=[al(r[0],s,i,!0),al(r[1],s,i,!0)]},e.prototype._updateInterval=function(n,r){r=r||0;var s=this.visualMapModel,i=this._handleEnds,a=[0,s.itemSize[1]];wh(r,i,a,n,0);var o=s.getExtent();this._dataInterval=[al(i[0],a,o,!0),al(i[1],a,o,!0)]},e.prototype._updateView=function(n){var r=this.visualMapModel,s=r.getExtent(),i=this._shapes,a=[0,r.itemSize[1]],o=n?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,s,o,"inRange"),d=this._createBarVisual(s,s,a,"outOfRange");i.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),i.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(o,l)},e.prototype._createBarVisual=function(n,r,s,i){var a={forceState:i,convertOpacityToAlpha:!0},o=this._makeColorGradient(n,a),l=[this.getControllerVisual(n[0],"symbolSize",a),this.getControllerVisual(n[1],"symbolSize",a)],d=this._createBarPoints(s,l);return{barColor:new Mb(0,0,0,1,o),barPoints:d,handlesColor:[o[0].color,o[o.length-1].color]}},e.prototype._makeColorGradient=function(n,r){var s=100,i=[],a=(n[1]-n[0])/s;i.push({color:this.getControllerVisual(n[0],"color",r),offset:0});for(var o=1;o<s;o++){var l=n[0]+a*o;if(l>n[1])break;i.push({color:this.getControllerVisual(l,"color",r),offset:o/s})}return i.push({color:this.getControllerVisual(n[1],"color",r),offset:1}),i},e.prototype._createBarPoints=function(n,r){var s=this.visualMapModel.itemSize;return[[s[0]-r[0],n[0]],[s[0],n[0]],[s[0],n[1]],[s[0]-r[1],n[1]]]},e.prototype._createBarGroup=function(n){var r=this._orient,s=this.visualMapModel.get("inverse");return new Tt(r==="horizontal"&&!s?{scaleX:n==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&s?{scaleX:n==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!s?{scaleX:n==="left"?1:-1,scaleY:-1}:{scaleX:n==="left"?1:-1})},e.prototype._updateHandle=function(n,r){if(this._useHandle){var s=this._shapes,i=this.visualMapModel,a=s.handleThumbs,o=s.handleLabels,l=i.itemSize,d=i.getExtent(),c=this._applyTransform("left",s.mainGroup);zJe([0,1],function(f){var p=a[f];p.setStyle("fill",r.handlesColor[f]),p.y=n[f];var h=al(n[f],[0,l[1]],d,!0),m=this.getControllerVisual(h,"symbolSize");p.scaleX=p.scaleY=m/l[0],p.x=l[0]-m/2;var g=Do(s.handleLabelPoints[f],Ip(p,this.group));if(this._orient==="horizontal"){var y=c==="left"||c==="top"?(l[0]-m)/2:(l[0]-m)/-2;g[1]+=y}o[f].setStyle({x:g[0],y:g[1],text:i.formatValueText(this._dataInterval[f]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",s.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(n,r,s,i){var a=this.visualMapModel,o=a.getExtent(),l=a.itemSize,d=[0,l[1]],c=this._shapes,f=c.indicator;if(f){f.attr("invisible",!1);var p={convertOpacityToAlpha:!0},h=this.getControllerVisual(n,"color",p),m=this.getControllerVisual(n,"symbolSize"),g=al(n,o,d,!0),y=l[0]-m/2,x={x:f.x,y:f.y};f.y=g,f.x=y;var _=Do(c.indicatorLabelPoint,Ip(f,this.group)),k=c.indicatorLabel;k.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),S=this._orient,C=S==="horizontal";k.setStyle({text:(s||"")+a.formatValueText(r),verticalAlign:C?w:"middle",align:C?"center":w});var A={x:y,y:g,style:{fill:h}},M={style:{x:_[0],y:_[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var E={duration:100,easing:"cubicInOut",additive:!0};f.x=x.x,f.y=x.y,f.animateTo(A,E),k.animateTo(M,E)}else f.attr(A),k.attr(M);this._firstShowIndicator=!1;var P=this._shapes.handleLabels;if(P)for(var I=0;I<P.length;I++)this.api.enterBlur(P[I])}},e.prototype._enableHoverLinkToSeries=function(){var n=this;this._shapes.mainGroup.on("mousemove",function(r){if(n._hovering=!0,!n._dragging){var s=n.visualMapModel.itemSize,i=n._applyTransform([r.offsetX,r.offsetY],n._shapes.mainGroup,!0,!0);i[1]=mH(b5(0,i[1]),s[1]),n._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=s[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var n=this.api.getZr();this.visualMapModel.option.hoverLink?(n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),n.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(n,r){var s=this.visualMapModel,i=s.itemSize;if(s.option.hoverLink){var a=[0,i[1]],o=s.getExtent();n=mH(b5(a[0],n),a[1]);var l=WJe(s,o,a),d=[n-l,n+l],c=al(n,a,o,!0),f=[al(d[0],a,o,!0),al(d[1],a,o,!0)];d[0]<a[0]&&(f[0]=-1/0),d[1]>a[1]&&(f[1]=1/0),r&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c," ",l));var p=this._hoverLinkDataIndices,h=[];(r||vH(s))&&(h=this._hoverLinkDataIndices=s.findTargetDataIndices(f));var m=eVe(p,h);this._dispatchHighDown("downplay",qw(m[0],s)),this._dispatchHighDown("highlight",qw(m[1],s))}},e.prototype._hoverLinkFromSeriesMouseOver=function(n){var r;if(up(n.target,function(l){var d=Et(l);if(d.dataIndex!=null)return r=d,!0},!0),!!r){var s=this.ecModel.getSeriesByIndex(r.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(s)){var a=s.getData(r.dataType),o=a.getStore().get(i.getDataDimensionIndex(a),r.dataIndex);isNaN(o)||this._showIndicator(o,o)}}},e.prototype._hideIndicator=function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0),n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var s=0;s<r.length;s++)this.api.leaveBlur(r[s])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",qw(n,this.visualMapModel)),n.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver),n.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(n,r,s,i){var a=Ip(r,i?null:this.group);return He(n)?Do(n,a,s):JC(n,a,s)},e.prototype._dispatchHighDown=function(n,r){r&&r.length&&this.api.dispatchAction({type:n,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(Fae);function gH(t,e,n,r){return new Pi({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(s){sd(s.event)},ondragend:r})}function WJe(t,e,n){var r=UJe/2,s=t.get("hoverLinkDataSize");return s&&(r=al(s,e,n,!0)/2),r}function vH(t){var e=t.get("hoverLinkOnHandle");return!!(e==null?t.get("realtime"):e)}function yH(t){return t==="vertical"?"ns-resize":"ew-resize"}var GJe={type:"selectDataRange",event:"dataRangeSelected",update:"update"},YJe=function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(n){n.setSelected(t.selected)})},KJe=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(r){var s=t.pipelineContext;!r.isTargetSeries(t)||s&&s.large||n.push(vZe(r.stateList,r.targetVisuals,ct(r.getValueState,r),r.getDataDimensionIndex(t.getData())))}),n}},{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),r=[];e.eachComponent("visualMap",function(s){if(s.isTargetSeries(t)){var i=s.getVisualMeta(ct(XJe,null,t,s))||{stops:[],outerColors:[]},a=s.getDataDimensionIndex(n);a>=0&&(i.dimension=a,r.push(i))}}),t.getData().setVisual("visualMeta",r)}}];function XJe(t,e,n,r){for(var s=e.targetVisuals[r],i=cs.prepareVisualTypes(s),a={color:Pb(t.getData(),"color")},o=0,l=i.length;o<l;o++){var d=i[o],c=s[d==="opacity"?"__alphaForOpacity":d];c&&c.applyVisual(n,f,p)}return a.color;function f(h){return a[h]}function p(h,m){a[h]=m}}var bH=de;function QJe(t){var e=t&&t.visualMap;He(e)||(e=e?[e]:[]),bH(e,function(n){if(n){rm(n,"splitList")&&!rm(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var r=n.pieces;r&&He(r)&&bH(r,function(s){wt(s)&&(rm(s,"start")&&!rm(s,"min")&&(s.min=s.start),rm(s,"end")&&!rm(s,"max")&&(s.max=s.end))})}})}function rm(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var xH=!1;function zae(t){xH||(xH=!0,t.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),t.registerAction(GJe,YJe),de(KJe,function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)}),t.registerPreprocessor(QJe))}function Uae(t){t.registerComponentModel(BJe),t.registerComponentView(qJe),zae(t)}var ZJe=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return e.prototype.optionUpdated=function(n,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var s=this._mode=this._determineMode();this._pieceList=[],JJe[this._mode].call(this,this._pieceList),this._resetSelected(n,r);var i=this.option.categories;this.resetVisual(function(a,o){s==="categories"?(a.mappingMethod="category",a.categories=kt(i)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=We(this._pieceList,function(l){return l=kt(l),o!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var n=this.option,r={},s=cs.listVisualTypes(),i=this.isCategory();de(n.pieces,function(o){de(s,function(l){o.hasOwnProperty(l)&&(r[l]=1)})}),de(r,function(o,l){var d=!1;de(this.stateList,function(c){d=d||a(n,c,l)||a(n.target,c,l)},this),!d&&de(this.stateList,function(c){(n[c]||(n[c]={}))[l]=jae.get(l,c==="inRange"?"active":"inactive",i)})},this);function a(o,l,d){return o&&o[l]&&o[l].hasOwnProperty(d)}t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(n,r){var s=this.option,i=this._pieceList,a=(r?s:n).selected||{};if(s.selected=a,de(i,function(l,d){var c=this.getSelectedMapKey(l);a.hasOwnProperty(c)||(a[c]=!0)},this),s.selectedMode==="single"){var o=!1;de(i,function(l,d){var c=this.getSelectedMapKey(l);a[c]&&(o?a[c]=!1:o=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(n){return this._mode==="categories"?n.value+"":n.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(n){this.option.selected=kt(n)},e.prototype.getValueState=function(n){var r=cs.findPieceIndex(n,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(n){var r=[],s=this._pieceList;return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(l,d){var c=cs.findPieceIndex(l,s);c===n&&a.push(d)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},e.prototype.getRepresentValue=function(n){var r;if(this.isCategory())r=n.value;else if(n.value!=null)r=n.value;else{var s=n.interval||[];r=s[0]===-1/0&&s[1]===1/0?0:(s[0]+s[1])/2}return r},e.prototype.getVisualMeta=function(n){if(this.isCategory())return;var r=[],s=["",""],i=this;function a(c,f){var p=i.getRepresentValue({interval:c});f||(f=i.getValueState(p));var h=n(p,f);c[0]===-1/0?s[0]=h:c[1]===1/0?s[1]=h:r.push({value:c[0],color:h},{value:c[1],color:h})}var o=this._pieceList.slice();if(!o.length)o.push({interval:[-1/0,1/0]});else{var l=o[0].interval[0];l!==-1/0&&o.unshift({interval:[-1/0,l]}),l=o[o.length-1].interval[1],l!==1/0&&o.push({interval:[l,1/0]})}var d=-1/0;return de(o,function(c){var f=c.interval;f&&(f[0]>d&&a([d,f[0]],"outOfRange"),a(f.slice()),d=f[1])},this),{stops:r,outerColors:s}},e.type="visualMap.piecewise",e.defaultOption=Qc(oS.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(oS),JJe={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),r=this.getExtent(),s=e.splitNumber;s=Math.max(parseInt(s,10),1),e.splitNumber=s;for(var i=(r[1]-r[0])/s;+i.toFixed(n)!==i&&n<5;)n++;e.precision=n,i=+i.toFixed(n),e.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var a=0,o=r[0];a<s;o+=i,a++){var l=a===s-1?r[1]:o+i;t.push({interval:[o,l],close:[1,1]})}e.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),mj(t),de(t,function(d,c){d.index=c,d.text=this.formatValueText(d.interval)},this)},categories:function(t){var e=this.option;de(e.categories,function(n){t.push({text:this.formatValueText(n,!0),value:n})},this),_H(e,t)},pieces:function(t){var e=this.option;de(e.pieces,function(n,r){wt(n)||(n={value:n});var s={text:"",index:r};if(n.label!=null&&(s.text=n.label),n.hasOwnProperty("value")){var i=s.value=n.value;s.interval=[i,i],s.close=[1,1]}else{for(var a=s.interval=[],o=s.close=[0,0],l=[1,0,1],d=[-1/0,1/0],c=[],f=0;f<2;f++){for(var p=[["gte","gt","min"],["lte","lt","max"]][f],h=0;h<3&&a[f]==null;h++)a[f]=n[p[h]],o[f]=l[h],c[f]=h===2;a[f]==null&&(a[f]=d[f])}c[0]&&a[1]===1/0&&(o[0]=0),c[1]&&a[0]===-1/0&&(o[1]=0),a[0]===a[1]&&o[0]&&o[1]&&(s.value=a[0])}s.visual=cs.retrieveVisuals(n),t.push(s)},this),_H(e,t),mj(t),de(t,function(n){var r=n.close,s=[["<",""][r[1]],[">",""][r[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,s)},this)}};function _H(t,e){var n=t.inverse;(t.orient==="vertical"?!n:n)&&e.reverse()}var eet=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.doRender=function(){var n=this.group;n.removeAll();var r=this.visualMapModel,s=r.get("textGap"),i=r.textStyleModel,a=i.getFont(),o=i.getTextColor(),l=this._getItemAlign(),d=r.itemSize,c=this._getViewData(),f=c.endsText,p=xs(r.get("showLabel",!0),!f),h=!r.get("selectedMode");f&&this._renderEndsText(n,f[0],d,p,l),de(c.viewPieceList,function(m){var g=m.piece,y=new Tt;y.onclick=ct(this._onItemClick,this,g),this._enableHoverLink(y,m.indexInModelPieceList);var x=r.getRepresentValue(g);if(this._createItemSymbol(y,x,[0,0,d[0],d[1]],h),p){var _=this.visualMapModel.getValueState(x);y.add(new dn({style:{x:l==="right"?-s:d[0]+s,y:d[1]/2,text:g.text,verticalAlign:"middle",align:l,font:a,fill:o,opacity:_==="outOfRange"?.5:1},silent:h}))}n.add(y)},this),f&&this._renderEndsText(n,f[1],d,p,l),Op(r.get("orient"),n,r.get("itemGap")),this.renderBackground(n),this.positionGroup(n)},e.prototype._enableHoverLink=function(n,r){var s=this;n.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(a){var o=s.visualMapModel;o.option.hoverLink&&s.api.dispatchAction({type:a,batch:qw(o.findTargetDataIndices(r),o)})}},e.prototype._getItemAlign=function(){var n=this.visualMapModel,r=n.option;if(r.orient==="vertical")return Bae(n,this.api,n.itemSize);var s=r.align;return(!s||s==="auto")&&(s="left"),s},e.prototype._renderEndsText=function(n,r,s,i,a){if(r){var o=new Tt,l=this.visualMapModel.textStyleModel;o.add(new dn({style:Xn(l,{x:i?a==="right"?s[0]:0:s[0]/2,y:s[1]/2,verticalAlign:"middle",align:i?a:"center",text:r})})),n.add(o)}},e.prototype._getViewData=function(){var n=this.visualMapModel,r=We(n.getPieceList(),function(o,l){return{piece:o,indexInModelPieceList:l}}),s=n.get("text"),i=n.get("orient"),a=n.get("inverse");return(i==="horizontal"?a:!a)?r.reverse():s&&(s=s.slice().reverse()),{viewPieceList:r,endsText:s}},e.prototype._createItemSymbol=function(n,r,s,i){var a=Wr(this.getControllerVisual(r,"symbol"),s[0],s[1],s[2],s[3],this.getControllerVisual(r,"color"));a.silent=i,n.add(a)},e.prototype._onItemClick=function(n){var r=this.visualMapModel,s=r.option,i=s.selectedMode;if(i){var a=kt(s.selected),o=r.getSelectedMapKey(n);i==="single"||i===!0?(a[o]=!0,de(a,function(l,d){a[d]=d===o})):a[o]=!a[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},e.type="visualMap.piecewise",e}(Fae);function Hae(t){t.registerComponentModel(ZJe),t.registerComponentView(eet),zae(t)}function tet(t){Qt(Uae),Qt(Hae)}var net={label:{enabled:!0},decal:{show:!1}},wH=ln(),ret={};function set(t,e){var n=t.getModel("aria");if(!n.get("enabled"))return;var r=kt(net);Ht(r.label,t.getLocaleModel().get("aria"),!1),Ht(n.option,r,!1),s(),i();function s(){var d=n.getModel("decal"),c=d.get("show");if(c){var f=mt();t.eachSeries(function(p){if(!p.isColorBySeries()){var h=f.get(p.type);h||(h={},f.set(p.type,h)),wH(p).scope=h}}),t.eachRawSeries(function(p){if(t.isSeriesFiltered(p))return;if(bt(p.enableAriaDecal)){p.enableAriaDecal();return}var h=p.getData();if(p.isColorBySeries()){var _=aE(p.ecModel,p.name,ret,t.getSeriesCount()),k=h.getVisual("decal");h.setVisual("decal",w(k,_))}else{var m=p.getRawData(),g={},y=wH(p).scope;h.each(function(S){var C=h.getRawIndex(S);g[C]=S});var x=m.count();m.each(function(S){var C=g[S],A=m.getName(S)||S+"",M=aE(p.ecModel,A,y,x),E=h.getItemVisual(C,"decal");h.setItemVisual(C,"decal",w(E,M))})}function w(S,C){var A=S?Ne(Ne({},C),S):C;return A.dirty=!0,A}})}}function i(){var d=e.getZr().dom;if(d){var c=t.getLocaleModel().get("aria"),f=n.getModel("label");if(f.option=_t(f.option,c),!!f.get("enabled")){if(d.setAttribute("role","img"),f.get("description")){d.setAttribute("aria-label",f.get("description"));return}var p=t.getSeriesCount(),h=f.get(["data","maxCount"])||10,m=f.get(["series","maxCount"])||10,g=Math.min(p,m),y;if(!(p<1)){var x=o();if(x){var _=f.get(["general","withTitle"]);y=a(_,{title:x})}else y=f.get(["general","withoutTitle"]);var k=[],w=p>1?f.get(["series","multiple","prefix"]):f.get(["series","single","prefix"]);y+=a(w,{seriesCount:p}),t.eachSeries(function(M,E){if(E<g){var P=void 0,I=M.get("name"),F=I?"withName":"withoutName";P=p>1?f.get(["series","multiple",F]):f.get(["series","single",F]),P=a(P,{seriesId:M.seriesIndex,seriesName:M.get("name"),seriesType:l(M.subType)});var L=M.getData();if(L.count()>h){var z=f.get(["data","partialData"]);P+=a(z,{displayCnt:h})}else P+=f.get(["data","allData"]);for(var N=f.get(["data","separator","middle"]),q=f.get(["data","separator","end"]),V=f.get(["data","excludeDimensionId"]),O=[],X=0;X<L.count();X++)if(X<h){var j=L.getName(X),U=V?Sn(L.getValues(X),function(ee,ie){return Xt(V,ie)===-1}):L.getValues(X),G=f.get(["data",j?"withName":"withoutName"]);O.push(a(G,{name:j,value:U.join(N)}))}P+=O.join(N)+q,k.push(P)}});var S=f.getModel(["series","multiple","separator"]),C=S.get("middle"),A=S.get("end");y+=k.join(C)+A,d.setAttribute("aria-label",y)}}}}function a(d,c){if(!ot(d))return d;var f=d;return de(c,function(p,h){f=f.replace(new RegExp("\\{\\s*"+h+"\\s*\\}","g"),p)}),f}function o(){var d=t.get("title");return d&&d.length&&(d=d[0]),d&&d.text}function l(d){var c=t.getLocaleModel().get(["series","typeNames"]);return c[d]||c.chart}}function iet(t){if(!(!t||!t.aria)){var e=t.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},de(["description","general","series","data"],function(n){e[n]!=null&&(e.label[n]=e[n])})}}function aet(t){t.registerPreprocessor(iet),t.registerVisual(t.PRIORITY.VISUAL.ARIA,set)}var kH={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},oet=function(){function t(e){var n=this._condVal=ot(e)?new RegExp(e):xLe(e)?e:null;if(n==null){var r="";kn(r)}}return t.prototype.evaluate=function(e){var n=typeof e;return ot(n)?this._condVal.test(e):hn(n)?this._condVal.test(e+""):!1},t}(),uet=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),det=function(){function t(){}return t.prototype.evaluate=function(){for(var e=this.children,n=0;n<e.length;n++)if(!e[n].evaluate())return!1;return!0},t}(),cet=function(){function t(){}return t.prototype.evaluate=function(){for(var e=this.children,n=0;n<e.length;n++)if(e[n].evaluate())return!0;return!1},t}(),fet=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),pet=function(){function t(){}return t.prototype.evaluate=function(){for(var e=!!this.valueParser,n=this.getValue,r=n(this.valueGetterParam),s=e?this.valueParser(r):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(e?s:r))return!1;return!0},t}();function WI(t,e){if(t===!0||t===!1){var n=new uet;return n.value=t,n}var r="";return qae(t)||kn(r),t.and?SH("and",t,e):t.or?SH("or",t,e):t.not?het(t,e):met(t,e)}function SH(t,e,n){var r=e[t],s="";He(r)||kn(s),r.length||kn(s);var i=t==="and"?new det:new cet;return i.children=We(r,function(a){return WI(a,n)}),i.children.length||kn(s),i}function het(t,e){var n=t.not,r="";qae(n)||kn(r);var s=new fet;return s.child=WI(n,e),s.child||kn(r),s}function met(t,e){for(var n="",r=e.prepareGetValue(t),s=[],i=sn(t),a=t.parser,o=a?$ne(a):null,l=0;l<i.length;l++){var d=i[l];if(!(d==="parser"||e.valueGetterAttrMap.get(d))){var c=pt(kH,d)?kH[d]:d,f=t[d],p=o?o(f):f,h=rje(c,p)||c==="reg"&&new oet(p);h||kn(n),s.push(h)}}s.length||kn(n);var m=new pet;return m.valueGetterParam=r,m.valueParser=o,m.getValue=e.getValue,m.subCondList=s,m}function qae(t){return wt(t)&&!si(t)}var get=function(){function t(e,n){this._cond=WI(e,n)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();function vet(t,e){return new get(t,e)}var yet={type:"echarts:filter",transform:function(t){for(var e=t.upstream,n,r=vet(t.config,{valueGetterAttrMap:mt({dimension:!0}),prepareGetValue:function(o){var l="",d=o.dimension;pt(o,"dimension")||kn(l);var c=e.getDimensionInfo(d);return c||kn(l),{dimIdx:c.index}},getValue:function(o){return e.retrieveValueFromItem(n,o.dimIdx)}}),s=[],i=0,a=e.count();i<a;i++)n=e.getRawDataItem(i),r.evaluate()&&s.push(n);return{data:s}}},bet={type:"echarts:sort",transform:function(t){var e=t.upstream,n=t.config,r="",s=In(n);s.length||kn(r);var i=[];de(s,function(c){var f=c.dimension,p=c.order,h=c.parser,m=c.incomparable;if(f==null&&kn(r),p!=="asc"&&p!=="desc"&&kn(r),m&&m!=="min"&&m!=="max"){var g="";kn(g)}if(p!=="asc"&&p!=="desc"){var y="";kn(y)}var x=e.getDimensionInfo(f);x||kn(r);var _=h?$ne(h):null;h&&!_&&kn(r),i.push({dimIdx:x.index,parser:_,comparator:new Ene(p,m)})});var a=e.sourceFormat;a!==ii&&a!==po&&kn(r);for(var o=[],l=0,d=e.count();l<d;l++)o.push(e.getRawDataItem(l));return o.sort(function(c,f){for(var p=0;p<i.length;p++){var h=i[p],m=e.retrieveValueFromItem(c,h.dimIdx),g=e.retrieveValueFromItem(f,h.dimIdx);h.parser&&(m=h.parser(m),g=h.parser(g));var y=h.comparator.evaluate(m,g);if(y!==0)return y}return 0}),{data:o}}};function xet(t){t.registerTransform(yet),t.registerTransform(bet)}var _et=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dataset",n}return e.prototype.init=function(n,r,s){t.prototype.init.call(this,n,r,s),this._sourceManager=new Ine(this),T9(this)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),T9(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Rl},e}(nn),wet=function(t){Te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dataset",n}return e.type="dataset",e}(vr);function ket(t){t.registerComponentModel(_et),t.registerComponentView(wet)}var Jo=ql.CMD;function Em(t,e){return Math.abs(t-e)<1e-5}function oD(t){var e=t.data,n=t.len(),r=[],s,i=0,a=0,o=0,l=0;function d(L,z){s&&s.length>2&&r.push(s),s=[L,z]}function c(L,z,N,q){Em(L,N)&&Em(z,q)||s.push(L,z,N,q,N,q)}function f(L,z,N,q,V,O){var X=Math.abs(z-L),j=Math.tan(X/4)*4/3,U=z<L?-1:1,G=Math.cos(L),ee=Math.sin(L),ie=Math.cos(z),ne=Math.sin(z),ce=G*V+N,oe=ee*O+q,re=ie*V+N,te=ne*O+q,K=V*j*U,le=O*j*U;s.push(ce-K*ee,oe+le*G,re+K*ne,te-le*ie,re,te)}for(var p,h,m,g,y=0;y<n;){var x=e[y++],_=y===1;switch(_&&(i=e[y],a=e[y+1],o=i,l=a,(x===Jo.L||x===Jo.C||x===Jo.Q)&&(s=[o,l])),x){case Jo.M:i=o=e[y++],a=l=e[y++],d(o,l);break;case Jo.L:p=e[y++],h=e[y++],c(i,a,p,h),i=p,a=h;break;case Jo.C:s.push(e[y++],e[y++],e[y++],e[y++],i=e[y++],a=e[y++]);break;case Jo.Q:p=e[y++],h=e[y++],m=e[y++],g=e[y++],s.push(i+2/3*(p-i),a+2/3*(h-a),m+2/3*(p-m),g+2/3*(h-g),m,g),i=m,a=g;break;case Jo.A:var k=e[y++],w=e[y++],S=e[y++],C=e[y++],A=e[y++],M=e[y++]+A;y+=1;var E=!e[y++];p=Math.cos(A)*S+k,h=Math.sin(A)*C+w,_?(o=p,l=h,d(o,l)):c(i,a,p,h),i=Math.cos(M)*S+k,a=Math.sin(M)*C+w;for(var P=(E?-1:1)*Math.PI/2,I=A;E?I>M:I<M;I+=P){var F=E?Math.max(I+P,M):Math.min(I+P,M);f(I,F,k,w,S,C)}break;case Jo.R:o=i=e[y++],l=a=e[y++],p=o+e[y++],h=l+e[y++],d(p,l),c(p,l,p,h),c(p,h,o,h),c(o,h,o,l),c(o,l,p,l);break;case Jo.Z:s&&c(i,a,o,l),i=o,a=l;break}}return s&&s.length>2&&r.push(s),r}function lD(t,e,n,r,s,i,a,o,l,d){if(Em(t,n)&&Em(e,r)&&Em(s,a)&&Em(i,o)){l.push(a,o);return}var c=2/d,f=c*c,p=a-t,h=o-e,m=Math.sqrt(p*p+h*h);p/=m,h/=m;var g=n-t,y=r-e,x=s-a,_=i-o,k=g*g+y*y,w=x*x+_*_;if(k<f&&w<f){l.push(a,o);return}var S=p*g+h*y,C=-p*x-h*_,A=k-S*S,M=w-C*C;if(A<f&&S>=0&&M<f&&C>=0){l.push(a,o);return}var E=[],P=[];Lc(t,n,s,a,.5,E),Lc(e,r,i,o,.5,P),lD(E[0],P[0],E[1],P[1],E[2],P[2],E[3],P[3],l,d),lD(E[4],P[4],E[5],P[5],E[6],P[6],E[7],P[7],l,d)}function Cet(t,e){var n=oD(t),r=[];e=e||1;for(var s=0;s<n.length;s++){var i=n[s],a=[],o=i[0],l=i[1];a.push(o,l);for(var d=2;d<i.length;){var c=i[d++],f=i[d++],p=i[d++],h=i[d++],m=i[d++],g=i[d++];lD(o,l,c,f,p,h,m,g,a,e),o=m,l=g}r.push(a)}return r}function Wae(t,e,n){var r=t[e],s=t[1-e],i=Math.abs(r/s),a=Math.ceil(Math.sqrt(i*n)),o=Math.floor(n/a);o===0&&(o=1,a=n);for(var l=[],d=0;d<a;d++)l.push(o);var c=a*o,f=n-c;if(f>0)for(var d=0;d<f;d++)l[d%a]+=1;return l}function CH(t,e,n){for(var r=t.r0,s=t.r,i=t.startAngle,a=t.endAngle,o=Math.abs(a-i),l=o*s,d=s-r,c=l>Math.abs(d),f=Wae([l,d],c?0:1,e),p=(c?o:d)/f.length,h=0;h<f.length;h++)for(var m=(c?d:o)/f[h],g=0;g<f[h];g++){var y={};c?(y.startAngle=i+p*h,y.endAngle=i+p*(h+1),y.r0=r+m*g,y.r=r+m*(g+1)):(y.startAngle=i+m*g,y.endAngle=i+m*(g+1),y.r0=r+p*h,y.r=r+p*(h+1)),y.clockwise=t.clockwise,y.cx=t.cx,y.cy=t.cy,n.push(y)}}function Aet(t,e,n){for(var r=t.width,s=t.height,i=r>s,a=Wae([r,s],i?0:1,e),o=i?"width":"height",l=i?"height":"width",d=i?"x":"y",c=i?"y":"x",f=t[o]/a.length,p=0;p<a.length;p++)for(var h=t[l]/a[p],m=0;m<a[p];m++){var g={};g[d]=p*f,g[c]=m*h,g[o]=f,g[l]=h,g.x+=t.x,g.y+=t.y,n.push(g)}}function AH(t,e,n,r){return t*r-n*e}function Tet(t,e,n,r,s,i,a,o){var l=n-t,d=r-e,c=a-s,f=o-i,p=AH(c,f,l,d);if(Math.abs(p)<1e-6)return null;var h=t-s,m=e-i,g=AH(h,m,c,f)/p;return g<0||g>1?null:new qt(g*l+t,g*d+e)}function $et(t,e,n){var r=new qt;qt.sub(r,n,e),r.normalize();var s=new qt;qt.sub(s,t,e);var i=s.dot(r);return i}function sm(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function Met(t,e,n){for(var r=t.length,s=[],i=0;i<r;i++){var a=t[i],o=t[(i+1)%r],l=Tet(a[0],a[1],o[0],o[1],e.x,e.y,n.x,n.y);l&&s.push({projPt:$et(l,e,n),pt:l,idx:i})}if(s.length<2)return[{points:t},{points:t}];s.sort(function(y,x){return y.projPt-x.projPt});var d=s[0],c=s[s.length-1];if(c.idx<d.idx){var f=d;d=c,c=f}for(var p=[d.pt.x,d.pt.y],h=[c.pt.x,c.pt.y],m=[p],g=[h],i=d.idx+1;i<=c.idx;i++)sm(m,t[i].slice());sm(m,h),sm(m,p);for(var i=c.idx+1;i<=d.idx+r;i++)sm(g,t[i%r].slice());return sm(g,p),sm(g,h),[{points:m},{points:g}]}function TH(t){var e=t.points,n=[],r=[];GC(e,n,r);var s=new Gt(n[0],n[1],r[0]-n[0],r[1]-n[1]),i=s.width,a=s.height,o=s.x,l=s.y,d=new qt,c=new qt;return i>a?(d.x=c.x=o+i/2,d.y=l,c.y=l+a):(d.y=c.y=l+a/2,d.x=o,c.x=o+i),Met(e,d,c)}function lS(t,e,n,r){if(n===1)r.push(e);else{var s=Math.floor(n/2),i=t(e);lS(t,i[0],s,r),lS(t,i[1],n-s,r)}return r}function Eet(t,e){for(var n=[],r=0;r<e;r++)n.push(c6(t));return n}function Det(t,e){e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel}function Ret(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}function Pet(t,e){var n=[],r=t.shape,s;switch(t.type){case"rect":Aet(r,e,n),s=on;break;case"sector":CH(r,e,n),s=Ri;break;case"circle":CH({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,n),s=Ri;break;default:var i=t.getComputedTransform(),a=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,o=We(Cet(t.getUpdatedPathProxy(),a),function(x){return Ret(x)}),l=o.length;if(l===0)lS(TH,{points:o[0]},e,n);else if(l===e)for(var d=0;d<l;d++)n.push({points:o[d]});else{var c=0,f=We(o,function(x){var _=[],k=[];GC(x,_,k);var w=(k[1]-_[1])*(k[0]-_[0]);return c+=w,{poly:x,area:w}});f.sort(function(x,_){return _.area-x.area});for(var p=e,d=0;d<l;d++){var h=f[d];if(p<=0)break;var m=d===l-1?p:Math.ceil(h.area/c*e);m<0||(lS(TH,{points:h.poly},m,n),p-=m)}}s=Pi;break}if(!s)return Eet(t,e);for(var g=[],d=0;d<n.length;d++){var y=new s;y.setShape(n[d]),Det(t,y),g.push(y)}return g}function Iet(t,e){var n=t.length,r=e.length;if(n===r)return[t,e];for(var s=[],i=[],a=n<r?t:e,o=Math.min(n,r),l=Math.abs(r-n)/6,d=(o-2)/6,c=Math.ceil(l/d)+1,f=[a[0],a[1]],p=l,h=2;h<o;){var m=a[h-2],g=a[h-1],y=a[h++],x=a[h++],_=a[h++],k=a[h++],w=a[h++],S=a[h++];if(p<=0){f.push(y,x,_,k,w,S);continue}for(var C=Math.min(p,c-1)+1,A=1;A<=C;A++){var M=A/C;Lc(m,y,_,w,M,s),Lc(g,x,k,S,M,i),m=s[3],g=i[3],f.push(s[1],i[1],s[2],i[2],m,g),y=s[5],x=i[5],_=s[6],k=i[6]}p-=C-1}return a===t?[f,e]:[t,f]}function $H(t,e){for(var n=t.length,r=t[n-2],s=t[n-1],i=[],a=0;a<e.length;)i[a++]=r,i[a++]=s;return i}function Oet(t,e){for(var n,r,s,i=[],a=[],o=0;o<Math.max(t.length,e.length);o++){var l=t[o],d=e[o],c=void 0,f=void 0;l?d?(n=Iet(l,d),c=n[0],f=n[1],r=c,s=f):(f=$H(s||l,l),c=l):(c=$H(r||d,d),f=d),i.push(c),a.push(f)}return[i,a]}function MH(t){for(var e=0,n=0,r=0,s=t.length,i=0,a=s-2;i<s;a=i,i+=2){var o=t[a],l=t[a+1],d=t[i],c=t[i+1],f=o*c-d*l;e+=f,n+=(o+d)*f,r+=(l+c)*f}return e===0?[t[0]||0,t[1]||0]:[n/e/3,r/e/3,e]}function Let(t,e,n,r){for(var s=(t.length-2)/6,i=1/0,a=0,o=t.length,l=o-2,d=0;d<s;d++){for(var c=d*6,f=0,p=0;p<o;p+=2){var h=p===0?c:(c+p-2)%l+2,m=t[h]-n[0],g=t[h+1]-n[1],y=e[p]-r[0],x=e[p+1]-r[1],_=y-m,k=x-g;f+=_*_+k*k}f<i&&(i=f,a=d)}return a}function Vet(t){for(var e=[],n=t.length,r=0;r<n;r+=2)e[r]=t[n-r-2],e[r+1]=t[n-r-1];return e}function Net(t,e,n,r){for(var s=[],i,a=0;a<t.length;a++){var o=t[a],l=e[a],d=MH(o),c=MH(l);i==null&&(i=d[2]<0!=c[2]<0);var f=[],p=[],h=0,m=1/0,g=[],y=o.length;i&&(o=Vet(o));for(var x=Let(o,l,d,c)*6,_=y-2,k=0;k<_;k+=2){var w=(x+k)%_+2;f[k+2]=o[w]-d[0],f[k+3]=o[w+1]-d[1]}f[0]=o[x]-d[0],f[1]=o[x+1]-d[1];for(var S=r/n,C=-r/2;C<=r/2;C+=S){for(var A=Math.sin(C),M=Math.cos(C),E=0,k=0;k<o.length;k+=2){var P=f[k],I=f[k+1],F=l[k]-c[0],L=l[k+1]-c[1],z=F*M-L*A,N=F*A+L*M;g[k]=z,g[k+1]=N;var q=z-P,V=N-I;E+=q*q+V*V}if(E<m){m=E,h=C;for(var O=0;O<g.length;O++)p[O]=g[O]}}s.push({from:f,to:p,fromCp:d,toCp:c,rotation:-h})}return s}function uS(t){return t.__isCombineMorphing}var Gae="__mOriginal_";function dS(t,e,n){var r=Gae+e,s=t[r]||t[e];t[r]||(t[r]=t[e]);var i=n.replace,a=n.after,o=n.before;t[e]=function(){var l=arguments,d;return o&&o.apply(this,l),i?d=i.apply(this,l):d=s.apply(this,l),a&&a.apply(this,l),d}}function b0(t,e){var n=Gae+e;t[n]&&(t[e]=t[n],t[n]=null)}function EH(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],s=0;s<r.length;){var i=r[s],a=r[s+1];r[s++]=e[0]*i+e[2]*a+e[4],r[s++]=e[1]*i+e[3]*a+e[5]}}function Yae(t,e){var n=t.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),s=Oet(oD(n),oD(r)),i=s[0],a=s[1],o=t.getComputedTransform(),l=e.getComputedTransform();function d(){this.transform=null}o&&EH(i,o),l&&EH(a,l),dS(e,"updateTransform",{replace:d}),e.transform=null;var c=Net(i,a,10,Math.PI),f=[];dS(e,"buildPath",{replace:function(p){for(var h=e.__morphT,m=1-h,g=[],y=0;y<c.length;y++){var x=c[y],_=x.from,k=x.to,w=x.rotation*h,S=x.fromCp,C=x.toCp,A=Math.sin(w),M=Math.cos(w);Tw(g,S,C,h);for(var E=0;E<_.length;E+=2){var P=_[E],I=_[E+1],F=k[E],L=k[E+1],z=P*m+F*h,N=I*m+L*h;f[E]=z*M-N*A+g[0],f[E+1]=z*A+N*M+g[1]}var q=f[0],V=f[1];p.moveTo(q,V);for(var E=2;E<_.length;){var F=f[E++],L=f[E++],O=f[E++],X=f[E++],j=f[E++],U=f[E++];q===F&&V===L&&O===j&&X===U?p.lineTo(j,U):p.bezierCurveTo(F,L,O,X,j,U),q=j,V=U}}}})}function GI(t,e,n){if(!t||!e)return e;var r=n.done,s=n.during;Yae(t,e),e.__morphT=0;function i(){b0(e,"buildPath"),b0(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},_t({during:function(a){e.dirtyShape(),s&&s(a)},done:function(){i(),r&&r()}},n)),e}function jet(t,e,n,r,s,i){var a=16;t=s===n?0:Math.round(32767*(t-n)/(s-n)),e=i===r?0:Math.round(32767*(e-r)/(i-r));for(var o=0,l,d=(1<<a)/2;d>0;d/=2){var c=0,f=0;(t&d)>0&&(c=1),(e&d)>0&&(f=1),o+=d*d*(3*c^f),f===0&&(c===1&&(t=d-1-t,e=d-1-e),l=t,t=e,e=l)}return o}function cS(t){var e=1/0,n=1/0,r=-1/0,s=-1/0,i=We(t,function(o){var l=o.getBoundingRect(),d=o.getComputedTransform(),c=l.x+l.width/2+(d?d[4]:0),f=l.y+l.height/2+(d?d[5]:0);return e=Math.min(c,e),n=Math.min(f,n),r=Math.max(c,r),s=Math.max(f,s),[c,f]}),a=We(i,function(o,l){return{cp:o,z:jet(o[0],o[1],e,n,r,s),path:t[l]}});return a.sort(function(o,l){return o.z-l.z}).map(function(o){return o.path})}function Kae(t){return Pet(t.path,t.count)}function uD(){return{fromIndividuals:[],toIndividuals:[],count:0}}function Fet(t,e,n){var r=[];function s(S){for(var C=0;C<S.length;C++){var A=S[C];uS(A)?s(A.childrenRef()):A instanceof en&&r.push(A)}}s(t);var i=r.length;if(!i)return uD();var a=n.dividePath||Kae,o=a({path:e,count:i});if(o.length!==i)return console.error("Invalid morphing: unmatched splitted path"),uD();r=cS(r),o=cS(o);for(var l=n.done,d=n.during,c=n.individualDelay,f=new Nu,p=0;p<i;p++){var h=r[p],m=o[p];m.parent=e,m.copyTransform(f),c||Yae(h,m)}e.__isCombineMorphing=!0,e.childrenRef=function(){return o};function g(S){for(var C=0;C<o.length;C++)o[C].addSelfToZr(S)}dS(e,"addSelfToZr",{after:function(S){g(S)}}),dS(e,"removeSelfFromZr",{after:function(S){for(var C=0;C<o.length;C++)o[C].removeSelfFromZr(S)}});function y(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,b0(e,"addSelfToZr"),b0(e,"removeSelfFromZr")}var x=o.length;if(c)for(var _=x,k=function(){_--,_===0&&(y(),l&&l())},p=0;p<x;p++){var w=c?_t({delay:(n.delay||0)+c(p,x,r[p],o[p]),done:k},n):n;GI(r[p],o[p],w)}else e.__morphT=0,e.animateTo({__morphT:1},_t({during:function(S){for(var C=0;C<x;C++){var A=o[C];A.__morphT=e.__morphT,A.dirtyShape()}d&&d(S)},done:function(){y();for(var S=0;S<t.length;S++)b0(t[S],"updateTransform");l&&l()}},n));return e.__zr&&g(e.__zr),{fromIndividuals:r,toIndividuals:o,count:x}}function Bet(t,e,n){var r=e.length,s=[],i=n.dividePath||Kae;function a(h){for(var m=0;m<h.length;m++){var g=h[m];uS(g)?a(g.childrenRef()):g instanceof en&&s.push(g)}}if(uS(t)){a(t.childrenRef());var o=s.length;if(o<r)for(var l=0,d=o;d<r;d++)s.push(c6(s[l++%o]));s.length=r}else{s=i({path:t,count:r});for(var c=t.getComputedTransform(),d=0;d<s.length;d++)s[d].setLocalTransform(c);if(s.length!==r)return console.error("Invalid morphing: unmatched splitted path"),uD()}s=cS(s),e=cS(e);for(var f=n.individualDelay,d=0;d<r;d++){var p=f?_t({delay:(n.delay||0)+f(d,r,s[d],e[d])},n):n;GI(s[d],e[d],p)}return{fromIndividuals:s,toIndividuals:e,count:e.length}}function DH(t){return He(t[0])}function RH(t,e){for(var n=[],r=t.length,s=0;s<r;s++)n.push({one:t[s],many:[]});for(var s=0;s<e.length;s++){var i=e[s].length,a=void 0;for(a=0;a<i;a++)n[a%r].many.push(e[s][a])}for(var o=0,s=r-1;s>=0;s--)if(!n[s].many.length){var l=n[o].many;if(l.length<=1)if(o)o=0;else return n;var i=l.length,d=Math.ceil(i/2);n[s].many=l.slice(d,i),n[o].many=l.slice(0,d),o++}return n}var zet={clone:function(t){for(var e=[],n=1-Math.pow(1-t.path.style.opacity,1/t.count),r=0;r<t.count;r++){var s=c6(t.path);s.setStyle("opacity",n),e.push(s)}return e},split:null};function x5(t,e,n,r,s,i){if(!t.length||!e.length)return;var a=Fg("update",r,s);if(!(a&&a.duration>0))return;var o=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},a),d,c;DH(t)&&(d=t,c=e),DH(e)&&(d=e,c=t);function f(x,_,k,w,S){var C=x.many,A=x.one;if(C.length===1&&!S){var M=_?C[0]:A,E=_?A:C[0];if(uS(M))f({many:[M],one:E},!0,k,w,!0);else{var P=o?_t({delay:o(k,w)},l):l;GI(M,E,P),i(M,E,M,E,P)}}else for(var I=_t({dividePath:zet[n],individualDelay:o&&function(V,O,X,j){return o(V+k,w)}},l),F=_?Fet(C,A,I):Bet(A,C,I),L=F.fromIndividuals,z=F.toIndividuals,N=L.length,q=0;q<N;q++){var P=o?_t({delay:o(q,N)},l):l;i(L[q],z[q],_?C[q]:x.one,_?x.one:C[q],P)}}for(var p=d?d===t:t.length>e.length,h=d?RH(c,d):RH(p?e:t,[p?t:e]),m=0,g=0;g<h.length;g++)m+=h[g].many.length;for(var y=0,g=0;g<h.length;g++)f(h[g],p,y,m),y+=h[g].many.length}function Bf(t){if(!t)return[];if(He(t)){for(var e=[],n=0;n<t.length;n++)e.push(Bf(t[n]));return e}var r=[];return t.traverse(function(s){s instanceof en&&!s.disableMorphing&&!s.invisible&&!s.ignore&&r.push(s)}),r}var Xae=1e4,Uet=0,PH=1,IH=2,Het=ln();function qet(t,e){for(var n=t.dimensions,r=0;r<n.length;r++){var s=t.getDimensionInfo(n[r]);if(s&&s.otherDims[e]===0)return n[r]}}function Wet(t,e,n){var r=t.getDimensionInfo(n),s=r&&r.ordinalMeta;if(r){var i=t.get(r.name,e);return s&&s.categories[i]||i+""}}function OH(t,e,n,r){var s=r?"itemChildGroupId":"itemGroupId",i=qet(t,s);if(i){var a=Wet(t,e,i);return a}var o=t.getRawDataItem(e),l=r?"childGroupId":"groupId";if(o&&o[l])return o[l]+"";if(!r)return n||t.getId(e)}function LH(t){var e=[];return de(t,function(n){var r=n.data,s=n.dataGroupId;if(!(r.count()>Xae))for(var i=r.getIndices(),a=0;a<i.length;a++)e.push({data:r,groupId:OH(r,a,s,!1),childGroupId:OH(r,a,s,!0),divide:n.divide,dataIndex:a})}),e}function _5(t,e,n){t.traverse(function(r){r instanceof en&&ur(r,{style:{opacity:0}},e,{dataIndex:n,isFrom:!0})})}function w5(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function im(t){t.stopAnimation(),t.isGroup&&t.traverse(function(e){e.stopAnimation()})}function Get(t,e,n){var r=Fg("update",n,e);r&&t.traverse(function(s){if(s instanceof oo){var i=FNe(s);i&&s.animateFrom({style:i},r)}})}function Yet(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++){var s=t[r],i=e[r];if(s.data.getId(s.dataIndex)!==i.data.getId(i.dataIndex))return!1}return!0}function Qae(t,e,n){var r=LH(t),s=LH(e);function i(k,w,S,C,A){(S||k)&&w.animateFrom({style:S&&S!==k?Ne(Ne({},S.style),k.style):k.style},A)}var a=!1,o=Uet,l=mt(),d=mt();r.forEach(function(k){k.groupId&&l.set(k.groupId,!0),k.childGroupId&&d.set(k.childGroupId,!0)});for(var c=0;c<s.length;c++){var f=s[c].groupId;if(d.get(f)){o=PH;break}var p=s[c].childGroupId;if(p&&l.get(p)){o=IH;break}}function h(k,w){return function(S){var C=S.data,A=S.dataIndex;return w?C.getId(A):k?o===PH?S.childGroupId:S.groupId:o===IH?S.childGroupId:S.groupId}}var m=Yet(r,s),g={};if(!m)for(var c=0;c<s.length;c++){var y=s[c],x=y.data.getItemGraphicEl(y.dataIndex);x&&(g[x.id]=!0)}function _(k,w){var S=r[w],C=s[k],A=C.data.hostModel,M=S.data.getItemGraphicEl(S.dataIndex),E=C.data.getItemGraphicEl(C.dataIndex);if(M===E){E&&Get(E,C.dataIndex,A);return}M&&g[M.id]||E&&(im(E),M?(im(M),w5(M),a=!0,x5(Bf(M),Bf(E),C.divide,A,k,i)):_5(E,A,k))}new ld(r,s,h(!0,m),h(!1,m),null,"multiple").update(_).updateManyToOne(function(k,w){var S=s[k],C=S.data,A=C.hostModel,M=C.getItemGraphicEl(S.dataIndex),E=Sn(We(w,function(P){return r[P].data.getItemGraphicEl(r[P].dataIndex)}),function(P){return P&&P!==M&&!g[P.id]});M&&(im(M),E.length?(de(E,function(P){im(P),w5(P)}),a=!0,x5(Bf(E),Bf(M),S.divide,A,k,i)):_5(M,A,S.dataIndex))}).updateOneToMany(function(k,w){var S=r[w],C=S.data.getItemGraphicEl(S.dataIndex);if(!(C&&g[C.id])){var A=Sn(We(k,function(E){return s[E].data.getItemGraphicEl(s[E].dataIndex)}),function(E){return E&&E!==C}),M=s[k[0]].data.hostModel;A.length&&(de(A,function(E){return im(E)}),C?(im(C),w5(C),a=!0,x5(Bf(C),Bf(A),S.divide,M,k[0],i)):de(A,function(E){return _5(E,M,k[0])}))}}).updateManyToMany(function(k,w){new ld(w,k,function(S){return r[S].data.getId(r[S].dataIndex)},function(S){return s[S].data.getId(s[S].dataIndex)}).update(function(S,C){_(k[S],w[C])}).execute()}).execute(),a&&de(e,function(k){var w=k.data,S=w.hostModel,C=S&&n.getViewOfSeriesModel(S),A=Fg("update",S,0);C&&S.isAnimationEnabled()&&A&&A.duration>0&&C.group.traverse(function(M){M instanceof en&&!M.animators.length&&M.animateFrom({style:{opacity:0}},A)})})}function VH(t){var e=t.getModel("universalTransition").get("seriesKey");return e||t.id}function NH(t){return He(t)?t.sort().join(","):t}function Kd(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function Ket(t,e){var n=mt(),r=mt(),s=mt();return de(t.oldSeries,function(i,a){var o=t.oldDataGroupIds[a],l=t.oldData[a],d=VH(i),c=NH(d);r.set(c,{dataGroupId:o,data:l}),He(d)&&de(d,function(f){s.set(f,{key:c,dataGroupId:o,data:l})})}),de(e.updatedSeries,function(i){if(i.isUniversalTransitionEnabled()&&i.isAnimationEnabled()){var a=i.get("dataGroupId"),o=i.getData(),l=VH(i),d=NH(l),c=r.get(d);if(c)n.set(d,{oldSeries:[{dataGroupId:c.dataGroupId,divide:Kd(c.data),data:c.data}],newSeries:[{dataGroupId:a,divide:Kd(o),data:o}]});else if(He(l)){var f=[];de(l,function(m){var g=r.get(m);g.data&&f.push({dataGroupId:g.dataGroupId,divide:Kd(g.data),data:g.data})}),f.length&&n.set(d,{oldSeries:f,newSeries:[{dataGroupId:a,data:o,divide:Kd(o)}]})}else{var p=s.get(l);if(p){var h=n.get(p.key);h||(h={oldSeries:[{dataGroupId:p.dataGroupId,data:p.data,divide:Kd(p.data)}],newSeries:[]},n.set(p.key,h)),h.newSeries.push({dataGroupId:a,data:o,divide:Kd(o)})}}}}),n}function jH(t,e){for(var n=0;n<t.length;n++){var r=e.seriesIndex!=null&&e.seriesIndex===t[n].seriesIndex||e.seriesId!=null&&e.seriesId===t[n].id;if(r)return n}}function Xet(t,e,n,r){var s=[],i=[];de(In(t.from),function(a){var o=jH(e.oldSeries,a);o>=0&&s.push({dataGroupId:e.oldDataGroupIds[o],data:e.oldData[o],divide:Kd(e.oldData[o]),groupIdDim:a.dimension})}),de(In(t.to),function(a){var o=jH(n.updatedSeries,a);if(o>=0){var l=n.updatedSeries[o].getData();i.push({dataGroupId:e.oldDataGroupIds[o],data:l,divide:Kd(l),groupIdDim:a.dimension})}}),s.length>0&&i.length>0&&Qae(s,i,r)}function Qet(t){t.registerUpdateLifecycle("series:beforeupdate",function(e,n,r){de(In(r.seriesTransition),function(s){de(In(s.to),function(i){for(var a=r.updatedSeries,o=0;o<a.length;o++)(i.seriesIndex!=null&&i.seriesIndex===a[o].seriesIndex||i.seriesId!=null&&i.seriesId===a[o].id)&&(a[o][Nw]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(e,n,r){var s=Het(n);if(s.oldSeries&&r.updatedSeries&&r.optionChanged){var i=r.seriesTransition;if(i)de(In(i),function(h){Xet(h,s,r,n)});else{var a=Ket(s,r);de(a.keys(),function(h){var m=a.get(h);Qae(m.oldSeries,m.newSeries,n)})}de(r.updatedSeries,function(h){h[Nw]&&(h[Nw]=!1)})}for(var o=e.getSeries(),l=s.oldSeries=[],d=s.oldDataGroupIds=[],c=s.oldData=[],f=0;f<o.length;f++){var p=o[f].getData();p.count()<Xae&&(l.push(o[f]),d.push(o[f].get("dataGroupId")),c.push(p))}})}Qt([ize]);Qt([eze]);Qt([Cze,Fze,Xze,MUe,FUe,AHe,eqe,Vqe,iWe,cWe,xWe,hGe,jGe,XGe,fYe,gYe,AYe,PYe,HYe,XYe,aKe,UKe]);Qt(lXe);Qt(IXe);Qt(Kse);Qt(GXe);Qt(Iie);Qt(QXe);Qt(aQe);Qt(GQe);Qt(fZe);Qt(Hb);Qt(MZe);Qt(RZe);Qt(zZe);Qt(KZe);Qt(tJe);Qt(oJe);Qt(vJe);Qt(OJe);Qt(Vae);Qt(Nae);Qt(tet);Qt(Uae);Qt(Hae);Qt(aet);Qt(xet);Qt(ket);Qt(Qet);Qt(xBe);function Ke(r,s){return ue(this,arguments,function*(t,e,n={}){e||(e={});let i=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},n.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(i["X-Frappe-CSRF-Token"]=window.csrf_token);let a=t.startsWith("/")?t:`/api/method/${t}`;const o=yield fetch(a,{method:"POST",headers:i,body:JSON.stringify(e)});if(o.ok){const l=yield o.json();if(l.docs||t==="login")return l;if(l.exc)try{console.groupCollapsed(t),console.log(`method: ${t}`),console.log("params:",e);let d=JSON.parse(l.exc);for(let c of d)console.log(c);console.groupEnd()}catch(d){console.warn("Error printing debug messages",d)}return l.message}else{let l=yield o.text(),d,c;try{d=JSON.parse(l)}catch(h){}let f=[[t,d.exc_type,d._error_message].filter(Boolean).join(" ")];if(d.exc){c=d.exc;try{c=JSON.parse(c)[0],console.log(c)}catch(h){}}let p=new Error(f.join(`
`));throw p.exc_type=d.exc_type,p.exc=c,p.status=o.status,p.messages=d._server_messages?JSON.parse(d._server_messages):[],p.messages=p.messages.concat(d.message),p.messages=p.messages.map(h=>{try{return JSON.parse(h).message}catch(m){return h}}),p.messages=p.messages.filter(Boolean),p.messages.length||(p.messages=d._error_message?[d._error_message]:["Internal Server Error"]),n.onError&&n.onError({response:o,status:o.status,error:p}),p}})}const Zet=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{r.result==null?n(new Error("FileReader result is null")):typeof r.result=="string"&&e(r.result)},r.readAsDataURL(t)});let Na=null,dD=null;function FH(){typeof window!="undefined"&&!Na&&(Na=document.querySelector('link[rel="icon"]'),dD=(Na==null?void 0:Na.href)||null)}function Jet(t){typeof window!="undefined"&&FH();const e=et(()=>{try{return t()}catch(r){return null}},r=>{if(typeof window!="undefined"&&r)if(r.title&&(document.title=r.title),Na||FH(),r.emoji){const s=`data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>${r.emoji}</text></svg>`;Na&&(Na.href=s)}else r.icon?Na&&(Na.href=r.icon):Na&&dD&&(Na.href=dD)},{immediate:!0,deep:!0});return ai()&&Gl(e),e}const ett={install(t){t.mixin(ttt())}};function ttt(){return{mounted(){if(this.$options.pageMeta){const t=this.$options.pageMeta.bind(this);this._pageMetaStopWatcher=Jet(t)}},beforeUnmount(){this._pageMetaStopWatcher&&(this._pageMetaStopWatcher(),this._pageMetaStopWatcher=void 0)}}}function Zae(t){let e=Object.assign({},t);if(!e.url)throw new Error("[request] options.url is required");e.transformRequest&&(e=e.transformRequest(t)),e.responseType||(e.responseType="json"),e.method||(e.method="GET");let n=e.url,r;if(e.params)if(e.method==="GET"){let s=new URLSearchParams;for(let i in e.params)s.append(i,e.params[i]);n=e.url+"?"+s.toString()}else r=JSON.stringify(e.params);return fetch(n,{method:e.method||"GET",headers:e.headers,body:r}).then(s=>{if(e.transformResponse)return e.transformResponse(s,e);if(s.status>=200&&s.status<300)return e.responseType==="json"?s.json():s;{let i=new Error(s.statusText);throw i.response=s,i}}).catch(s=>{if(e.transformError)return e.transformError(s);throw s})}function kh(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function ntt(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=kh(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(a=>i(a.transaction(e,s).objectStore(e)))}let k5;function qb(){return k5||(k5=ntt("keyval-store","keyval")),k5}function Jae(t,e=qb()){return e("readonly",n=>kh(n.get(t)))}function eoe(t,e,n=qb()){return n("readwrite",r=>(r.put(e,t),kh(r.transaction)))}function rtt(t,e=qb()){return e("readwrite",n=>(t.forEach(r=>n.put(r[1],r[0])),kh(n.transaction)))}function toe(t,e=qb()){return e("readwrite",n=>(n.delete(t),kh(n.transaction)))}function stt(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},kh(t.transaction)}function itt(t=qb()){return t("readonly",e=>{if(e.getAllKeys)return kh(e.getAllKeys());const n=[];return stt(e,r=>n.push(r.key)).then(()=>n)})}function YI(t,e){return typeof indexedDB=="undefined"?Promise.resolve(null):t?eoe(t,JSON.stringify(e)):Promise.resolve()}function att(t){return typeof indexedDB=="undefined"?Promise.resolve(null):t?toe(t):Promise.resolve()}function KI(t){return typeof indexedDB=="undefined"?Promise.resolve(null):Jae(t).then(e=>e&&JSON.parse(e))}let Ww={};function Ve(t,e){let n=null;if(t.cache){n=Qg(t.cache);let f=Ww[n];if(f)return f.auto&&f.reload(),f}typeof t=="string"&&(t={url:t,auto:!0});let r=t.debounce?oC(i,t.debounce):i,s=Jt({method:t.method,url:t.url,data:t.initialData||null,previousData:null,loading:!1,fetched:!1,error:null,promise:null,auto:t.auto,params:null,fetch:r,reload:r,submit:r,reset:o,update:a,setData:d});function i(h){return ue(this,arguments,function*(f,p={}){let m=t.resourceFetcher||Ua("resourceFetcher")||Zae;f instanceof Event&&(f=null),f=f||s.params,t.makeParams&&(f=t.makeParams.call(e,f)),s.params=f,s.previousData=s.data?JSON.parse(JSON.stringify(s.data)):null,s.loading=!0,s.error=null,t.onFetch&&t.onFetch.call(e,s.params);let g=[t.beforeSubmit,p.beforeSubmit];for(let w of g)w&&w.call(e,s.params);let y=p.validate||t.validate,x=[t.onError,p.onError],_=[t.onSuccess,p.onSuccess],k=[t.onData,p.onData];if(y){let w;try{if(w=yield y.call(e,s.params),w&&typeof w=="string")throw new Error(w)}catch(S){l(S,x);return}}try{s.promise=m(ze(ge({},t),{params:f||t.params}));let w=yield s.promise;YI(n,w),s.data=c(w),s.fetched=!0;for(let S of _)S&&S.call(e,w);for(let S of k)S&&S.call(e,w)}catch(w){l(w,x)}return s.loading=!1,s.data})}function a({method:f,url:p,params:h,auto:m}){f&&f!==t.method&&(s.method=f),p&&p!==t.url&&(s.url=p),h&&h!==t.params&&(s.params=h),m!==void 0&&m!==s.auto&&(s.auto=m)}function o(){s.data=t.initialData||null,s.previousData=null,s.loading=!1,s.fetched=!1,s.error=null,s.params=null,s.auto=t.auto}function l(f,p){s.loading=!1,s.previousData&&(s.data=s.previousData),s.error=f;for(let h of p)h&&h.call(e,f);if(p.every(h=>h==null)){let h=Ua("fallbackErrorHandler");if(h)try{h(f)}catch(m){console.warn("Error in fallbackErrorHandler",m)}}throw f}function d(f){typeof f=="function"&&(f=f.call(e,s.data)),s.data=c(f)}function c(f){if(t.transform){let p=t.transform.call(e,f);if(p!=null)return p}return f}return n&&!Ww[n]&&(Ww[n]=s,KI(n).then(f=>{var p;(s.loading||!s.fetched)&&f&&(d(f),(p=t.onData)==null||p.call(e,f))})),t.auto&&s.fetch(),s}function Qg(t){return t?(typeof t=="string"&&(t=[t]),JSON.stringify(t)):null}function ott(t){return t=Qg(t),Ww[t]||null}function noe(t,e,n){ltt(t,e),t.on("list_update",r=>{r.doctype==e&&n(r.name)})}let BH={};function ltt(t,e){BH[e]||(t.emit("doctype_subscribe",e),BH[e]=!0)}let cD=Jt({}),Wm={};function utt(t,e){var x,_,k,w,S;if(!t.doctype)throw new Error("List resource requires doctype");let n=Qg(t.cache);if(n){let C=cD[n];if(C)return C.auto&&C.reload(),C}let r=Ua("defaultListUrl")||"frappe.client.get_list",s=Ua("defaultDocInsertUrl")||"frappe.client.insert",i=Ua("defaultDocUpdateUrl")||"frappe.client.set_value",a=Ua("defaultDocDeleteUrl")||"frappe.client.delete",o=Ua("defaultRunDocMethodUrl")||"run_doc_method",l=Jt({doctype:t.doctype,fields:t.fields,filters:t.filters,orFilters:t.orFilters,orderBy:t.orderBy,start:t.start||0,pageLength:t.pageLength||20,groupBy:t.groupBy,parent:t.parent,debug:t.debug||0,originalData:null,dataMap:{},data:null,previous:m,hasPreviousPage:!1,next:g,hasNextPage:!0,auto:t.auto,list:Ve({url:t.url||r,makeParams(){return{doctype:l.doctype,fields:l.fields,filters:l.filters,or_filters:l.orFilters,order_by:l.orderBy,start:l.start,limit:l.pageLength,limit_start:l.start,limit_page_length:l.pageLength,group_by:l.groupBy,parent:l.parent,debug:l.debug}},onSuccess(C){var M;l.hasPreviousPage=!!l.start,l.hasNextPage=!(C.length<l.pageLength);let A;!l.start||l.start==0?A=C:l.start>0&&(A=l.originalData.concat(C)),YI(n,A),h(A),(M=t.onSuccess)==null||M.call(e,l.data)},onError:t.onError},e),fetchOne:Ve({url:t.url||r,makeParams(C){return{doctype:l.doctype,fields:l.fields||"*",filters:{name:C}}},onSuccess(C){var A,M;if(C.length>0&&l.originalData){let E=C[0];x0(l.doctype,E)}(M=(A=t.fetchOne)==null?void 0:A.onSuccess)==null||M.call(e,l.data)},onError:(x=t.fetchOne)==null?void 0:x.onError},e),insert:Ve({url:s,makeParams(C){return{doc:ge({doctype:l.doctype},C)}},onSuccess(C){var A,M;l.list.fetch(),(M=(A=t.insert)==null?void 0:A.onSuccess)==null||M.call(e,C)},onError:(_=t.insert)==null?void 0:_.onError},e),setValue:Ve({url:i,makeParams(C){let E=C,{name:A}=E,M=$s(E,["name"]);return{doctype:l.doctype,name:A,fieldname:M}},onSuccess(C){var A,M;x0(l.doctype,C),(M=(A=t.setValue)==null?void 0:A.onSuccess)==null||M.call(e,C)},onError:(k=t.setValue)==null?void 0:k.onError},e),delete:Ve({url:a,makeParams(C){return{doctype:l.doctype,name:C}},onSuccess(C){var A,M;l.list.fetch(),(M=(A=t.delete)==null?void 0:A.onSuccess)==null||M.call(e,C)},onError:(w=t.delete)==null?void 0:w.onError},e),runDocMethod:Ve({url:o,makeParams(E){var P=E,{method:C,name:A}=P,M=$s(P,["method","name"]);return{dt:l.doctype,dn:A,method:C,args:M}},onSuccess(C){var A,M;if(C.docs)for(let E of C.docs)x0(E.doctype,E);(M=(A=t.runDocMethod)==null?void 0:A.onSuccess)==null||M.call(e,C)},onError:(S=t.runDocMethod)==null?void 0:S.onError},e),update:d,fetch:p,reload:f,setData:h,transform:c,getRow:y});function d(C){Object.assign(l,C)}function c(C){if(t.transform){let A=t.transform.call(e,C);if(A!=null)return A}return C}function f(){let C=l.start,A=l.pageLength;return l.start>0&&(l.start=0,l.pageLength=l.originalData.length),l.list.fetch().finally(()=>{l.start=C,l.pageLength=A})}function p(){f()}function h(C){if(l.originalData=C,typeof C=="function"&&(C=C.call(e,l.data)),l.data=c(C),Array.isArray(l.data)){l.dataMap={};for(let A of l.data){if(!A.name)continue;let M=A.name.toString();l.dataMap[M]=A}}}function m(){l.start=l.start-l.pageLength,l.list.fetch()}function g(){l.start=l.start+l.pageLength,l.list.fetch()}function y(C){let A=C.toString();return l.dataMap[A]}return t.realtime&&(e!=null&&e.$socket)&&noe(e.$socket,l.doctype,C=>{var A;(A=l.originalData)!=null&&A.find(M=>M.name===C)&&l.fetchOne.submit(C)}),n&&(cD[n]=l,KI(n).then(C=>{var A;(l.list.loading||!l.list.fetched)&&C&&(h(C),(A=t.onData)==null||A.call(e,C))})),t.auto&&l.list.fetch(),Wm[l.doctype]=Wm[l.doctype]||[],Wm[l.doctype].push(l),l}function dtt(t){return t=Qg(t),cD[t]||null}function x0(t,e){if(!e.name)return;let n=Wm[t]||[];for(let r of n)if(r.originalData){for(let s of r.originalData)if(s.name&&s.name==e.name){delete s._previousData;let i=JSON.stringify(s);for(let a in s)a in e&&(s[a]=e[a]);s._previousData=i}r.data=r.transform(r.originalData)}}function ctt(t,e){let n=Wm[t]||[];for(let r of n)r.originalData&&(r.originalData=r.originalData.filter(s=>s.name.toString()!==e.toString()),r.data=r.transform(r.originalData))}function ftt(t,e){let n=Wm[t]||[];for(let r of n)if(r.originalData){for(let s of r.originalData)if(s.name&&s.name==e.name){let i=JSON.parse(s._previousData);for(let a in s)s[a]=i[a];delete s._previousData}r.data=r.transform(r.originalData)}}let fD=Jt({});function ptt(t,e){var m;if(!(t.doctype&&t.name))return;let n=Qg([t.doctype,t.name]),r=fD[n];if(r)return r.auto&&r.reload(),r;let s=Ua("defaultDocGetUrl")||"frappe.client.get",i=Ua("defaultDocUpdateUrl")||"frappe.client.set_value",a=Ua("defaultDocDeleteUrl")||"frappe.client.delete",o=Ua("defaultRunDocMethodUrl")||"run_doc_method",l={url:i,makeParams(y){return{doctype:c.doctype,name:c.name,fieldname:y}},validate(y){var x,_;(_=(x=t.setValue)==null?void 0:x.validate)==null||_.call(e,y)},beforeSubmit(y){c.previousDoc=JSON.stringify(c.doc),Object.assign(c.doc,y.fieldname||{}),x0(c.doctype,c.doc)},onSuccess(y){var x,_;c.doc=h(y),c.originalDoc=JSON.parse(JSON.stringify(c.doc)),(_=(x=t.setValue)==null?void 0:x.onSuccess)==null||_.call(e,y)},onError(y){var x,_;c.doc=JSON.parse(c.previousDoc),(_=(x=t.setValue)==null?void 0:x.onError)==null||_.call(e,y),ftt(c.doctype,c.doc)}};const d=t.auto!==void 0;let c=Jt({doctype:t.doctype,name:t.name,doc:null,originalDoc:null,isDirty:!1,auto:d?t.auto:!0,get:Ve({url:s,makeParams(){return{doctype:c.doctype,name:c.name}},onSuccess(y){var x;YI(n,y),c.doc=h(y),c.originalDoc=JSON.parse(JSON.stringify(c.doc)),(x=t.onSuccess)==null||x.call(e,c.doc)},onError(y){var x;att(n),c.doc=null,c.originalDoc=null,(x=t.onError)==null||x.call(e,y)}},e),setValue:Ve(l,e),setValueDebounced:Ve(ze(ge({},l),{debounce:t.debounce||500}),e),save:Ve(ze(ge({},l),{makeParams(){let y=JSON.parse(JSON.stringify(c.doc));return delete y.doctype,delete y.name,{doctype:c.doctype,name:c.name,fieldname:y}}}),e),delete:Ve({url:a,makeParams(){return{doctype:c.doctype,name:c.name}},onSuccess(){var y,x;c.doc=null,(x=(y=t.delete)==null?void 0:y.onSuccess)==null||x.call(e),ctt(c.doctype,c.name)},onError:(m=t.delete)==null?void 0:m.onError},e),reload:f,setDoc:p});et(()=>c.doc,()=>{c.isDirty=JSON.stringify(c.doc)!==JSON.stringify(c.originalDoc)},{deep:!0});for(let y in t.whitelistedMethods){let x=t.whitelistedMethods[y];typeof x=="string"&&(x={method:x});let g=x,{method:_,onSuccess:k,makeParams:w,transform:S}=g,C=$s(g,["method","onSuccess","makeParams","transform"]);c[y]=Ve(ge({url:o,makeParams(A){return A=w?w.call(e,A):A,{dt:c.doctype,dn:c.name,method:_,args:A}},transform(A){if(S){let M=S.call(e,A.message);if(M!=null)return M}return A.message},onSuccess(A){if(A.docs){for(let M of A.docs)if(M.doctype===c.doctype&&M.name.toString()===c.name.toString()){c.doc=h(M),x0(c.doctype,c.doc);break}}k==null||k.call(e,A.message)}},C),e)}function f(){return c.get.fetch()}function p(y){typeof y=="function"&&(y=y.call(e,c.doc)),c.doc=h(y)}function h(y){if(t.transform){let x=t.transform.call(e,y);if(typeof x=="object")return x}return y}return t.realtime&&e.$socket&&noe(e.$socket,c.doctype,y=>{y==c.name&&c.get.fetch()}),fD[n]=c,KI(n).then(y=>{(c.get.loading||!c.get.fetched)&&y&&(c.doc=h(y))}),c.auto&&c.get.fetch(),c}function htt(t,e){let n=Qg([t,e]);return fD[n]||null}let mtt=t=>({created(){if(this.$options.resources){this._resources=Jt({});for(let e in this.$options.resources){let n=this.$options.resources[e];if(typeof n=="function")et(()=>{let r=null;try{r=n.call(this)}catch(s){console.warn(`Failed to get resource options

`,s),r=null}return r},(r,s)=>{!r||!(!s||JSON.stringify(r)!==JSON.stringify(s))||(this._resources[e]=zH(r,this))},{immediate:!0,deep:!0});else{let r=zH(n,this);this._resources[e]=r}}}},methods:{$getResource(e){return ott(e)},$getDocumentResource(e,n){return htt(e,n)},$getDoc(e,n){let r=this.$getDocumentResource(e,n);return r?r.doc:null},$getListResource(e){return dtt(e)},$refetchResource(e){let n=this.$getResource(e);n&&n.fetch()}},computed:{$resources(){return this._resources}}});function zH(t,e){return t.type==="document"?ptt(t,e):t.type==="list"?utt(t,e):Ve(t,e)}const gtt={install(t,e){let n=mtt();t.mixin(n)}};function vtt(t){return Zae(ze(ge({},t),{transformRequest:(e={})=>{if(!e.url)throw new Error("[frappeRequest] options.url is required");let n=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},e.headers||{});return window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(n["X-Frappe-CSRF-Token"]=window.csrf_token),!e.url.startsWith("/")&&!e.url.startsWith("http")&&(e.url="/api/method/"+e.url),ze(ge({},e),{method:e.method||"POST",headers:n})},transformResponse:(e,n)=>ue(this,null,function*(){let r=n.url;if(e.ok){const s=yield e.json();if(s.docs||r==="/api/method/login")return s;if(s.exc)try{console.groupCollapsed(r),console.log(n);let i=JSON.parse(s.exc);for(let a of i)console.log(a);console.groupEnd()}catch(i){console.warn("Error printing debug messages",i)}if(s._server_messages){let i=Ua("serverMessagesHandler")||n.onServerMessages||null;i&&i(JSON.parse(s==null?void 0:s._server_messages)||[])}return s.message}else{let s=yield e.text(),i,a;try{i=JSON.parse(s)}catch(d){}let o=[[n.url,i==null?void 0:i.exc_type,i==null?void 0:i._error_message].filter(Boolean).join(" ")];if(i.exc){a=i.exc;try{a=JSON.parse(a)[0],console.log(a)}catch(d){}}let l=new Error(o.join(`
`));throw l.exc_type=i.exc_type,l.exc=a,l.response=e,l.status=s.status,l.messages=i._server_messages?JSON.parse(i._server_messages):[],l.messages=l.messages.concat(i.message),l.messages=l.messages.map(d=>{try{return JSON.parse(d).message}catch(c){return d}}),l.messages=l.messages.filter(Boolean),l.messages.length||(l.messages=i._error_message?[i._error_message]:["Internal Server Error"]),n.onError&&n.onError(l),l}}),transformError:e=>{throw t.onError&&t.onError(e),e}}))}const Wl=Object.create(null);Wl.open="0";Wl.close="1";Wl.ping="2";Wl.pong="3";Wl.message="4";Wl.upgrade="5";Wl.noop="6";const Gw=Object.create(null);Object.keys(Wl).forEach(t=>{Gw[Wl[t]]=t});const pD={type:"error",data:"parser error"},roe=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",soe=typeof ArrayBuffer=="function",ioe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,XI=({type:t,data:e},n,r)=>roe&&e instanceof Blob?n?r(e):UH(e,r):soe&&(e instanceof ArrayBuffer||ioe(e))?n?r(e):UH(new Blob([e]),r):r(Wl[t]+(e||"")),UH=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function HH(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let S5;function ytt(t,e){if(roe&&t.data instanceof Blob)return t.data.arrayBuffer().then(HH).then(e);if(soe&&(t.data instanceof ArrayBuffer||ioe(t.data)))return e(HH(t.data));XI(t,!1,n=>{S5||(S5=new TextEncoder),e(S5.encode(n))})}const qH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cy=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let t=0;t<qH.length;t++)Cy[qH.charCodeAt(t)]=t;const btt=t=>{let e=t.length*.75,n=t.length,r,s=0,i,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),c=new Uint8Array(d);for(r=0;r<n;r+=4)i=Cy[t.charCodeAt(r)],a=Cy[t.charCodeAt(r+1)],o=Cy[t.charCodeAt(r+2)],l=Cy[t.charCodeAt(r+3)],c[s++]=i<<2|a>>4,c[s++]=(a&15)<<4|o>>2,c[s++]=(o&3)<<6|l&63;return d},xtt=typeof ArrayBuffer=="function",QI=(t,e)=>{if(typeof t!="string")return{type:"message",data:aoe(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:_tt(t.substring(1),e)}:Gw[n]?t.length>1?{type:Gw[n],data:t.substring(1)}:{type:Gw[n]}:pD},_tt=(t,e)=>{if(xtt){const n=btt(t);return aoe(n,e)}else return{base64:!0,data:t}},aoe=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},ooe="",wtt=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,a)=>{XI(i,!1,o=>{r[a]=o,++s===n&&e(r.join(ooe))})})},ktt=(t,e)=>{const n=t.split(ooe),r=[];for(let s=0;s<n.length;s++){const i=QI(n[s],e);if(r.push(i),i.type==="error")break}return r};function Stt(){return new TransformStream({transform(t,e){ytt(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let C5;function F_(t){return t.reduce((e,n)=>e+n.length,0)}function B_(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Ctt(t,e){C5||(C5=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(a,o){for(n.push(a);;){if(r===0){if(F_(n)<1)break;const l=B_(n,1);i=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(F_(n)<2)break;const l=B_(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(F_(n)<8)break;const l=B_(n,8),d=new DataView(l.buffer,l.byteOffset,l.length),c=d.getUint32(0);if(c>Math.pow(2,21)-1){o.enqueue(pD);break}s=c*Math.pow(2,32)+d.getUint32(4),r=3}else{if(F_(n)<s)break;const l=B_(n,s);o.enqueue(QI(i?l:C5.decode(l),e)),r=0}if(s===0||s>t){o.enqueue(pD);break}}}})}const loe=4;function Zr(t){if(t)return Att(t)}function Att(t){for(var e in Zr.prototype)t[e]=Zr.prototype[e];return t}Zr.prototype.on=Zr.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Zr.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Zr.prototype.off=Zr.prototype.removeListener=Zr.prototype.removeAllListeners=Zr.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Zr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};Zr.prototype.emitReserved=Zr.prototype.emit;Zr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Zr.prototype.hasListeners=function(t){return!!this.listeners(t).length};const SA=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Ba=typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")(),Ttt="arraybuffer";function uoe(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const $tt=Ba.setTimeout,Mtt=Ba.clearTimeout;function CA(t,e){e.useNativeTimers?(t.setTimeoutFn=$tt.bind(Ba),t.clearTimeoutFn=Mtt.bind(Ba)):(t.setTimeoutFn=Ba.setTimeout.bind(Ba),t.clearTimeoutFn=Ba.clearTimeout.bind(Ba))}const Ett=1.33;function Dtt(t){return typeof t=="string"?Rtt(t):Math.ceil((t.byteLength||t.size)*Ett)}function Rtt(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function doe(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ptt(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Itt(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Ott extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class ZI extends Zr{constructor(e){super(),this.writable=!1,CA(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Ott(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=QI(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Ptt(e);return n.length?"?"+n:""}}class Ltt extends ZI{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};ktt(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,wtt(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=doe()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let coe=!1;try{coe=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){}const Vtt=coe;function Ntt(){}class jtt extends Ltt{constructor(e){if(super(e),typeof location!="undefined"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Pl extends Zr{constructor(e,n,r){super(),this.createRequest=e,CA(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=uoe(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch(s){}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{r.setRequestHeader("Accept","*/*")}catch(s){}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document!="undefined"&&(this._index=Pl.requestsCount++,Pl.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr=="undefined"||this._xhr===null)){if(this._xhr.onreadystatechange=Ntt,e)try{this._xhr.abort()}catch(n){}typeof document!="undefined"&&delete Pl.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Pl.requestsCount=0;Pl.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",WH);else if(typeof addEventListener=="function"){const t="onpagehide"in Ba?"pagehide":"unload";addEventListener(t,WH,!1)}}function WH(){for(let t in Pl.requests)Pl.requests.hasOwnProperty(t)&&Pl.requests[t].abort()}const Ftt=function(){const t=foe({xdomain:!1});return t&&t.responseType!==null}();class Btt extends jtt{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Ftt&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Pl(foe,this.uri(),e)}}function foe(t){const e=t.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Vtt))return new XMLHttpRequest}catch(n){}if(!e)try{return new Ba[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(n){}}const poe=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ztt extends ZI{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=poe?{}:uoe(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;XI(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch(a){}s&&SA(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=doe()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const A5=Ba.WebSocket||Ba.MozWebSocket;class Utt extends ztt{createSocket(e,n,r){return poe?new A5(e,n,r):n?new A5(e,n):new A5(e)}doWrite(e,n){this.ws.send(n)}}class Htt extends ZI{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Ctt(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=Stt();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:o,value:l})=>{o||(this.onPacket(l),i())}).catch(o=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&SA(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const qtt={websocket:Utt,webtransport:Htt,polling:Btt},Wtt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gtt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hD(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=Wtt.exec(t||""),i={},a=14;for(;a--;)i[Gtt[a]]=s[a]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Ytt(i,i.path),i.queryKey=Ktt(i,i.query),i}function Ytt(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Ktt(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const mD=typeof addEventListener=="function"&&typeof removeEventListener=="function",Yw=[];mD&&addEventListener("offline",()=>{Yw.forEach(t=>t())},!1);class Ac extends Zr{constructor(e,n){if(super(),this.binaryType=Ttt,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=hD(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=hD(n.host).host);CA(this,n),this.secure=n.secure!=null?n.secure:typeof location!="undefined"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=n.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Itt(this.opts.query)),mD&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Yw.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=loe,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ac.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ac.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Dtt(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,SA(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Ac.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),mD&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Yw.indexOf(this._offlineEventListener);r!==-1&&Yw.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ac.protocol=loe;class Xtt extends Ac{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Ac.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ac.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function i(){r||(r=!0,c(),n.close(),n=null)}const a=f=>{const p=new Error("probe error: "+f);p.transport=n.name,i(),this.emitReserved("upgradeError",p)};function o(){a("transport closed")}function l(){a("socket closed")}function d(f){n&&f.name!==n.name&&i()}const c=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",o),this.off("close",l),this.off("upgrading",d)};n.once("open",s),n.once("error",a),n.once("close",o),this.once("close",l),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Qtt=class extends Xtt{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>qtt[s]).filter(s=>!!s)),super(e,r)}};function Ztt(t,e="",n){let r=t;n=n||typeof location!="undefined"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n!="undefined"?t=n.protocol+"//"+t:t="https://"+t),r=hD(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Jtt=typeof ArrayBuffer=="function",ent=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,hoe=Object.prototype.toString,tnt=typeof Blob=="function"||typeof Blob!="undefined"&&hoe.call(Blob)==="[object BlobConstructor]",nnt=typeof File=="function"||typeof File!="undefined"&&hoe.call(File)==="[object FileConstructor]";function JI(t){return Jtt&&(t instanceof ArrayBuffer||ent(t))||tnt&&t instanceof Blob||nnt&&t instanceof File}function Kw(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Kw(t[n]))return!0;return!1}if(JI(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Kw(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Kw(t[n]))return!0;return!1}function rnt(t){const e=[],n=t.data,r=t;return r.data=gD(n,e),r.attachments=e.length,{packet:r,buffers:e}}function gD(t,e){if(!t)return t;if(JI(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=gD(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=gD(t[r],e));return n}return t}function snt(t,e){return t.data=vD(t.data,e),delete t.attachments,t}function vD(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=vD(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=vD(t[n],e));return t}const int=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ant=5;var Cn;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Cn||(Cn={}));class ont{constructor(e){this.replacer=e}encode(e){return(e.type===Cn.EVENT||e.type===Cn.ACK)&&Kw(e)?this.encodeAsBinary({type:e.type===Cn.EVENT?Cn.BINARY_EVENT:Cn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Cn.BINARY_EVENT||e.type===Cn.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=rnt(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function GH(t){return Object.prototype.toString.call(t)==="[object Object]"}class eO extends Zr{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Cn.BINARY_EVENT;r||n.type===Cn.BINARY_ACK?(n.type=r?Cn.EVENT:Cn.ACK,this.reconstructor=new lnt(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(JI(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Cn[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Cn.BINARY_EVENT||r.type===Cn.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(i,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(eO.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(n){return!1}}static isPayloadValid(e,n){switch(e){case Cn.CONNECT:return GH(n);case Cn.DISCONNECT:return n===void 0;case Cn.CONNECT_ERROR:return typeof n=="string"||GH(n);case Cn.EVENT:case Cn.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&int.indexOf(n[0])===-1);case Cn.ACK:case Cn.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class lnt{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=snt(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const unt=Object.freeze(Object.defineProperty({__proto__:null,Decoder:eO,Encoder:ont,get PacketType(){return Cn},protocol:ant},Symbol.toStringTag,{value:"Module"}));function wo(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const dnt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class moe extends Zr{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[wo(e,"open",this.onopen.bind(this)),wo(e,"packet",this.onpacket.bind(this)),wo(e,"error",this.onerror.bind(this)),wo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(dnt.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:Cn.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),a.id=c}const o=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},s),a=(...o)=>{this.io.clearTimeoutFn(i),n.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(a,o)=>a?s(a):r(o);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Cn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Cn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Cn.EVENT:case Cn.BINARY_EVENT:this.onevent(e);break;case Cn.ACK:case Cn.BINARY_ACK:this.onack(e);break;case Cn.DISCONNECT:this.ondisconnect();break;case Cn.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:Cn.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Cn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Zg(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Zg.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Zg.prototype.reset=function(){this.attempts=0};Zg.prototype.setMin=function(t){this.ms=t};Zg.prototype.setMax=function(t){this.max=t};Zg.prototype.setJitter=function(t){this.jitter=t};class yD extends Zr{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,CA(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Zg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||unt;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Qtt(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=wo(n,"open",function(){r.onopen(),e&&e()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=wo(n,"error",i);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(wo(e,"ping",this.onping.bind(this)),wo(e,"data",this.ondata.bind(this)),wo(e,"error",this.onerror.bind(this)),wo(e,"close",this.onclose.bind(this)),wo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){SA(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new moe(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Jv={};function Xw(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Ztt(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,a=Jv[s]&&i in Jv[s].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return o?l=new yD(r,e):(Jv[s]||(Jv[s]=new yD(r,e)),l=Jv[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Xw,{Manager:yD,Socket:moe,io:Xw,connect:Xw});class cnt{constructor(){this.memoryStore={},this.useIndexedDB=typeof window!="undefined"&&!!window.indexedDB}set(e,n){if(!this.validateKey(e))return Promise.resolve(null);try{return this.useIndexedDB?eoe(e,JSON.stringify(n)):(this.memoryStore[e]=JSON.stringify(n),Promise.resolve())}catch(r){return this.handleError(r,"save to")}}setMany(e){try{if(this.useIndexedDB){let n=[];for(const[r,s]of Object.entries(e))n.push([r,JSON.stringify(s)]);return rtt(n)}for(const[n,r]of Object.entries(e))this.memoryStore[n]=JSON.stringify(r);return Promise.resolve()}catch(n){return this.handleError(n,"save to")}}delete(e){if(!this.validateKey(e))return Promise.resolve(null);try{return this.useIndexedDB?toe(e):(delete this.memoryStore[e],Promise.resolve())}catch(n){return this.handleError(n,"delete from")}}get(e){if(!this.validateKey(e))return Promise.resolve(null);if(this.useIndexedDB)return Jae(e).then(n=>{if(!n)return null;try{return JSON.parse(n)}catch(r){return this.handleError(r,"parse data from")}});try{const n=this.memoryStore[e];return Promise.resolve(n?JSON.parse(n):null)}catch(n){return this.handleError(n,"parse data from")}}keys(){return ue(this,null,function*(){try{return this.useIndexedDB?itt():Promise.resolve(Object.keys(this.memoryStore))}catch(e){return console.error(`Failed to get keys from ${this.useIndexedDB?"IndexedDB":"memory store"}:`,e),Promise.resolve([])}})}validateKey(e){return!!e}handleError(e,n){return console.error(`Failed to ${n} ${this.useIndexedDB?"IndexedDB":"memory store"}:`,e),Promise.resolve(null)}}let am=new cnt;class fnt{constructor(){this.cacheTimeout=5*60*1e3,this.storePrefix="doc:",this.docs=new Map,this.lastFetched=new Map}setCacheTimeout(e){if(e<1)throw new Error("Cache timeout must be at least 1 minute");this.cacheTimeout=e*60*1e3}setDoc(e){return ue(this,null,function*(){if(!(e!=null&&e.doctype)||!(e!=null&&e.name))throw new Error("Invalid doc: must have doctype and name");e.name=e.name.toString();const n=this.getKey(e.doctype,e.name);try{yield am.set(this.storePrefix+n,e),this.docs.has(n)||this.docs.set(n,Q(null));const r=this.docs.get(n);r&&(r.value=e),this.lastFetched.set(n,Date.now())}catch(r){throw console.error("Failed to set doc in IDB:",r),r}})}getDoc(e,n){const r=Ur(n);if(!e||!r)throw new Error("doctype and name are required");const s=this.getKey(e,r);return this.docs.has(s)?this.isStale(s)&&this.loadDoc(s,!1):(this.docs.set(s,Q(null)),this.loadDoc(s,!0)),this.docs.get(s)}loadDoc(e,n){return ue(this,null,function*(){try{!n&&this.isStale(e)&&(yield this.cleanup(e));const r=yield am.get(this.storePrefix+e);if(r){const s=this.docs.get(e);s&&(s.value=r),this.lastFetched.set(e,Date.now())}}catch(r){throw console.error("Failed to load doc from IDB:",r),r}})}setDocs(e){return ue(this,null,function*(){const n={};for(const r of e){if(!(r!=null&&r.doctype)||!(r!=null&&r.name))continue;r.name=r.name.toString();const s=this.getKey(r.doctype,r.name);this.docs.has(s)||this.docs.set(s,Q(null));const i=this.docs.get(s);i&&(i.value=r),this.lastFetched.set(s,Date.now()),n[this.storePrefix+s]=r}yield am.setMany(n)})}invalidateDoc(e,n){return ue(this,null,function*(){if(!e||!n)return;const r=this.getKey(e,n);yield this.cleanup(r)})}removeDoc(e,n){return this.invalidateDoc(e,n)}getKey(e,n){return`${e.trim()}/${n.trim()}`}isStale(e){const n=this.lastFetched.get(e);return n?Date.now()-n>this.cacheTimeout:!0}cleanup(e){return ue(this,null,function*(){this.docs.delete(e),this.lastFetched.delete(e),yield am.delete(this.storePrefix+e)})}clearAll(){return ue(this,null,function*(){try{const n=(yield am.keys()).filter(r=>r.startsWith(this.storePrefix));yield Promise.all(n.map(r=>am.delete(r))),this.docs.clear(),this.lastFetched.clear()}catch(e){throw console.error("Failed to clear all docs:",e),e}})}}const pnt=new fnt;class hnt{constructor(){this.byDocType={}}addList(e,n){this.ensureList(e),this.byDocType[e].push(n)}updateRows(e){for(let n of e)this.updateRow(n.doctype,n)}updateRow(e,n){this.ensureList(e),this.byDocType[e].forEach(r=>{r.updateRow(n)})}removeRow(e,n){this.ensureList(e),this.byDocType[e].forEach(r=>{r.removeRow(n)})}ensureList(e){this.byDocType[e]||(this.byDocType[e]=[])}}const mnt=new hnt;class tO extends Error{constructor(e,n){super(e),this.name="FrappeResponseError",this.title=n.title,this.type=n.type,this.exception=n.exception,this.indicator=n.indicator,Error.captureStackTrace&&Error.captureStackTrace(this,tO)}}I0e({options:{fetch:(...t)=>fetch(...t),beforeFetch({options:t}){return t.headers=gnt(t.headers||{}),{options:t}},afterFetch(t){let e=JSON.parse(t.data);if(t.data=e,e.debug){let n=t.response.url.replace(window.location.origin,"");console.group(n);for(let r of e.debug)console.log(r==null?void 0:r.message);console.groupEnd()}if(e.docs){let n=e.docs;for(let r of n)r.name=r.name.toString();pnt.setDocs(n),mnt.updateRows(n)}return t},onFetchError(t){var e;if((e=t.response)!=null&&e.ok&&t.error)return console.error(`Fetch request succeeded but there was a programming error:

`,t.error),t;try{let s=JSON.parse(t.data).errors[0],i=s.message?`: ${s.message}`:s.exception?" (Traceback)":"",a=new tO(`${s.type}${i}`,{title:s.title,type:s.type,exception:s.exception,indicator:s.indicator});return t.error=a,t}catch(n){return console.log("Error parsing error response:",n),t}}}});function gnt(t){let e=null,n=null;typeof window!="undefined"&&(e=window.location.hostname,n=window.csrf_token!=="{{ csrf_token }}"?window.csrf_token:null);const r={Accept:"application/json","Content-Type":"application/json; charset=utf-8"};return e&&(r["X-Frappe-Site-Name"]=e),n&&(r["X-Frappe-CSRF-Token"]=n),ge(ge({},t),r)}const vnt={class:"flex h-screen w-full flex-col bg-surface-white"},ynt={class:"flex h-16 items-center justify-between border-b border-outline-gray-200 bg-surface-white px-6 shadow-sm"},bnt={class:"flex items-center space-x-4"},xnt={class:"text-sm text-gray-500"},_nt={class:"flex items-center space-x-4"},wnt={class:"flex flex-1 overflow-hidden"},knt={class:"flex h-16 items-center justify-between px-4"},Snt={key:0,class:"text-sm font-semibold text-gray-900"},Cnt={class:"flex-1 space-y-1 px-2 py-4"},Ant={key:0},Tnt={class:"nav-group"},$nt={class:"flex items-center space-x-2"},Mnt={key:0},Ent={key:0,class:"nav-group-items"},Dnt={key:0},Rnt={key:0},Pnt={key:0},Int={key:0},Ont={key:0},Lnt={class:"nav-group"},Vnt={class:"flex items-center space-x-2"},Nnt={key:0},jnt={key:0,class:"nav-group-items"},Fnt={key:0},Bnt={key:0},znt={key:0},Unt={key:0},Hnt={key:0},qnt={class:"nav-group"},Wnt={class:"flex items-center space-x-2"},Gnt={key:0},Ynt={key:0,class:"nav-group-items"},Knt={key:0},Xnt={key:0},Qnt={key:0},Znt={class:"nav-group"},Jnt={class:"flex items-center space-x-2"},ert={key:0},trt={key:0,class:"nav-group-items"},nrt={key:0},rrt={key:0},srt={key:0},irt={key:0},art={key:0},ort={class:"nav-group"},lrt={class:"flex items-center space-x-2"},urt={key:0},drt={key:0,class:"nav-group-items"},crt={key:0},frt={key:0},prt={key:0},hrt={key:0},mrt={class:"nav-group"},grt={class:"flex items-center space-x-2"},vrt={key:0},yrt={key:0,class:"nav-group-items"},brt={key:0},xrt={key:0},_rt={key:0},wrt={key:0},krt={class:"nav-group"},Srt={class:"flex items-center space-x-2"},Crt={key:0},Art={key:0,class:"nav-group-items"},Trt={key:0},$rt={key:0},Mrt={key:0},Ert={key:0},Drt={key:0},Rrt={key:0},Prt={key:0},Irt={key:0},Ort={key:0},Lrt={key:0},Vrt={class:"nav-group"},Nrt={class:"flex items-center space-x-2"},jrt={key:0},Frt={key:0,class:"nav-group-items"},Brt={key:0},zrt={key:0},Urt={key:0},Hrt={class:"flex-1 overflow-hidden flex flex-col"},qrt={key:0,class:"flex h-12 items-center border-b border-outline-gray-200 bg-surface-white px-6"},Wrt={__name:"AppLayout",setup(t){const e=ta(),n=_n(),r=Q(!1),s=Q(!1),i=Q(3),a=Q({auditPlanning:!0,auditExecution:!1,findings:!1,dataManagement:!1,compliance:!1,reports:!1,inventoryAudit:!1,settings:!1}),o=Z(()=>{var g;return((g=e.meta)==null?void 0:g.fullHeight)===!0}),l=Z(()=>{const g=[],y=e.path.split("/").filter(Boolean);let x="";return y.forEach((_,k)=>{var S;x+=`/${_}`;const w=n.getRoutes().find(C=>C.path===x);w&&g.push({label:((S=w.meta)==null?void 0:S.title)||_.charAt(0).toUpperCase()+_.slice(1),to:x,isActive:k===y.length-1})}),g}),d=[{label:"Profile Settings",icon:"user",onClick:()=>console.log("Profile settings")},{label:"System Preferences",icon:"settings",onClick:()=>console.log("System preferences")},{label:"Help & Support",icon:"help-circle",onClick:()=>console.log("Help & support")}],c=[{label:"My Profile",icon:"user",onClick:()=>console.log("My profile")},{label:"Change Password",icon:"lock",onClick:()=>console.log("Change password")},{label:"Sign Out",icon:"log-out",onClick:()=>Xm.logout.submit()}],f=()=>{r.value=!r.value},p=()=>{s.value=!s.value;const g=s.value?"dark":"light";document.documentElement.setAttribute("data-theme",g),localStorage.setItem("theme",g)},h=()=>{console.log("Toggle notifications panel")},m=g=>{r.value||(a.value[g]=!a.value[g])};return yt(()=>{const g=localStorage.getItem("theme")||"light";s.value=g==="dark",document.documentElement.setAttribute("data-theme",g)}),(g,y)=>{const x=Vs("router-link"),_=Vs("router-view");return T(),R("div",vnt,[u("header",ynt,[u("div",bnt,[y[9]||(y[9]=u("img",{src:"https://raw.githubusercontent.com/frappe/erpnext/develop/erpnext/public/images/erpnext-logo.svg",alt:"Organization Logo",class:"h-8 w-8"},null,-1)),u("div",null,[y[8]||(y[8]=u("h1",{class:"text-lg font-semibold text-gray-900"},"Internal Audit Management",-1)),u("p",xnt,$(v(Xm).user),1)])]),u("div",_nt,[b(v(J),{variant:"ghost",onClick:h},{default:D(()=>[b(v(mp),{class:"h-5 w-5"}),i.value>0?(T(),he(v(De),{key:0,variant:"destructive",class:"ml-1"},{default:D(()=>[W($(i.value),1)]),_:1})):se("",!0)]),_:1}),b(v(J),{variant:"ghost",onClick:p},{default:D(()=>[s.value?(T(),he(v(Rfe),{key:0,class:"h-5 w-5"})):(T(),he(v(Nfe),{key:1,class:"h-5 w-5"}))]),_:1}),b(v(H0),{options:d},{default:D(()=>[b(v(J),{variant:"ghost"},{default:D(()=>[b(v(ha),{class:"h-5 w-5"})]),_:1})]),_:1}),b(v(H0),{options:c},{default:D(()=>[b(v(g0e),{label:v(Xm).user,size:"sm"},null,8,["label"])]),_:1})])]),u("div",wnt,[u("aside",{class:pe(["flex flex-col border-r border-outline-gray-200 bg-surface-white transition-all duration-300",r.value?"w-16":"w-64"])},[u("div",knt,[r.value?se("",!0):(T(),R("h2",Snt," Navigation ")),b(v(J),{variant:"ghost",size:"sm",onClick:f},{default:D(()=>[b(v(gr),{class:pe(["h-4 w-4 transition-transform",r.value?"rotate-180":""])},null,8,["class"])]),_:1})]),u("nav",Cnt,[b(x,{to:"/",class:pe(["nav-item",{"nav-item-active":g.$route.path==="/"}])},{default:D(()=>[b(v(CY),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",Ant,"Dashboard"))]),_:1},8,["class"]),u("div",Tnt,[u("div",{class:"nav-group-header",onClick:y[0]||(y[0]=k=>m("auditPlanning"))},[u("div",$nt,[b(v(vt),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",Mnt,"Audit Planning"))]),r.value?se("",!0):(T(),he(v(xo),{key:0,class:pe(["h-4 w-4 transition-transform",a.value.auditPlanning?"rotate-180":""])},null,8,["class"]))]),a.value.auditPlanning||r.value?(T(),R("div",Ent,[b(x,{to:"/audit-planning/universe",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-planning/universe"}])},{default:D(()=>[b(v(xfe),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Dnt,"Audit Universe"))]),_:1},8,["class"]),b(x,{to:"/audit-planning/risk-assessment",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-planning/risk-assessment"}])},{default:D(()=>[b(v(rn),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Rnt,"Risk Assessments"))]),_:1},8,["class"]),b(x,{to:"/audit-planning/annual-plan",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-planning/annual-plan"}])},{default:D(()=>[b(v(rr),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Pnt,"Annual Audit Plan"))]),_:1},8,["class"]),b(x,{to:"/audit-planning/programs",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-planning/programs"}])},{default:D(()=>[b(v(vt),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Int,"Audit Programs"))]),_:1},8,["class"]),b(x,{to:"/audit-planning/calendar",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-planning/calendar"}])},{default:D(()=>[b(v(a$),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Ont,"Audit Calendar"))]),_:1},8,["class"])])):se("",!0)]),u("div",Lnt,[u("div",{class:"nav-group-header",onClick:y[1]||(y[1]=k=>m("auditExecution"))},[u("div",Vnt,[b(v(Ar),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",Nnt,"Audit Execution"))]),r.value?se("",!0):(T(),he(v(xo),{key:0,class:pe(["h-4 w-4 transition-transform",a.value.auditExecution?"rotate-180":""])},null,8,["class"]))]),a.value.auditExecution||r.value?(T(),R("div",jnt,[b(x,{to:"/audit-execution/engagements",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-execution/engagements"}])},{default:D(()=>[b(v(WS),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Fnt,"Audit Engagements"))]),_:1},8,["class"]),b(x,{to:"/audit-execution/working-papers",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-execution/working-papers"}])},{default:D(()=>[b(v(QD),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Bnt,"Working Papers"))]),_:1},8,["class"]),b(x,{to:"/audit-execution/data-analytics",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-execution/data-analytics"}])},{default:D(()=>[b(v(sb),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",znt,"Data Analytics"))]),_:1},8,["class"]),b(x,{to:"/audit-execution/test-library",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-execution/test-library"}])},{default:D(()=>[b(v(jfe),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Unt,"Test Library"))]),_:1},8,["class"]),b(x,{to:"/audit-execution/test-execution",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/audit-execution/test-execution"}])},{default:D(()=>[b(v(ib),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Hnt,"Test Execution"))]),_:1},8,["class"])])):se("",!0)]),u("div",qnt,[u("div",{class:"nav-group-header",onClick:y[2]||(y[2]=k=>m("findings"))},[u("div",Wnt,[b(v(qr),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",Gnt,"Findings & Follow-up"))]),r.value?se("",!0):(T(),he(v(xo),{key:0,class:pe(["h-4 w-4 transition-transform",a.value.findings?"rotate-180":""])},null,8,["class"]))]),a.value.findings||r.value?(T(),R("div",Ynt,[b(x,{to:"/findings/list",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/findings/list"}])},{default:D(()=>[b(v(En),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Knt,"Audit Findings"))]),_:1},8,["class"]),b(x,{to:"/findings/corrective-actions",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/findings/corrective-actions"}])},{default:D(()=>[b(v(Kt),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Xnt,"Corrective Actions"))]),_:1},8,["class"]),b(x,{to:"/findings/follow-up",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/findings/follow-up"}])},{default:D(()=>[b(v(Ns),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Qnt,"Follow-up Tracker"))]),_:1},8,["class"])])):se("",!0)]),u("div",Znt,[u("div",{class:"nav-group-header",onClick:y[3]||(y[3]=k=>m("dataManagement"))},[u("div",Jnt,[b(v(Kr),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",ert,"Data Management"))]),r.value?se("",!0):(T(),he(v(xo),{key:0,class:pe(["h-4 w-4 transition-transform",a.value.dataManagement?"rotate-180":""])},null,8,["class"]))]),a.value.dataManagement||r.value?(T(),R("div",trt,[b(x,{to:"/data-management/import-wizard",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/data-management/import-wizard"}])},{default:D(()=>[b(v(xa),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",nrt,"Import Data"))]),_:1},8,["class"]),b(x,{to:"/data-management/import-history",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/data-management/import-history"}])},{default:D(()=>[b(v(GS),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",rrt,"Import History"))]),_:1},8,["class"]),b(x,{to:"/data-management/periods",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/data-management/periods"}])},{default:D(()=>[b(v(a$),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",srt,"Data Periods"))]),_:1},8,["class"]),b(x,{to:"/data-management/quality",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/data-management/quality"}])},{default:D(()=>[b(v(Ds),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",irt,"Data Quality"))]),_:1},8,["class"]),b(x,{to:"/data-management/explorer",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/data-management/explorer"}])},{default:D(()=>[b(v(En),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",art,"BC Data Explorer"))]),_:1},8,["class"])])):se("",!0)]),u("div",ort,[u("div",{class:"nav-group-header",onClick:y[4]||(y[4]=k=>m("compliance"))},[u("div",lrt,[b(v(IY),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",urt,"Compliance"))]),r.value?se("",!0):(T(),he(v(xo),{key:0,class:pe(["h-4 w-4 transition-transform",a.value.compliance?"rotate-180":""])},null,8,["class"]))]),a.value.compliance||r.value?(T(),R("div",drt,[b(x,{to:"/compliance/requirements",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/compliance/requirements"}])},{default:D(()=>[b(v(dw),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",crt,"Requirements"))]),_:1},8,["class"]),b(x,{to:"/compliance/checklist",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/compliance/checklist"}])},{default:D(()=>[b(v(Ar),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",frt,"Compliance Checklist"))]),_:1},8,["class"]),b(x,{to:"/compliance/tax-tracker",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/compliance/tax-tracker"}])},{default:D(()=>[b(v(rb),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",prt,"Tax Tracker"))]),_:1},8,["class"]),b(x,{to:"/compliance/calendar",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/compliance/calendar"}])},{default:D(()=>[b(v(rr),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",hrt,"Regulatory Calendar"))]),_:1},8,["class"])])):se("",!0)]),u("div",mrt,[u("div",{class:"nav-group-header",onClick:y[5]||(y[5]=k=>m("reports"))},[u("div",grt,[b(v(YL),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",vrt,"Reports"))]),r.value?se("",!0):(T(),he(v(xo),{key:0,class:pe(["h-4 w-4 transition-transform",a.value.reports?"rotate-180":""])},null,8,["class"]))]),a.value.reports||r.value?(T(),R("div",yrt,[b(x,{to:"/reports/builder",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/reports/builder"}])},{default:D(()=>[b(v(Hfe),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",brt,"Report Builder"))]),_:1},8,["class"]),b(x,{to:"/reports/audit-reports",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/reports/audit-reports"}])},{default:D(()=>[b(v(vt),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",xrt,"Audit Reports"))]),_:1},8,["class"]),b(x,{to:"/reports/board-reports",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/reports/board-reports"}])},{default:D(()=>[b(v(u$),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",_rt,"Board Reports"))]),_:1},8,["class"]),b(x,{to:"/reports/standard",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/reports/standard"}])},{default:D(()=>[b(v(YL),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",wrt,"Standard Reports"))]),_:1},8,["class"])])):se("",!0)]),u("div",krt,[u("div",{class:"nav-group-header",onClick:y[6]||(y[6]=k=>m("inventoryAudit"))},[u("div",Srt,[b(v(Qa),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",Crt,"Inventory Audit"))]),r.value?se("",!0):(T(),he(v(xo),{key:0,class:pe(["h-4 w-4 transition-transform",a.value.inventoryAudit?"rotate-180":""])},null,8,["class"]))]),a.value.inventoryAudit||r.value?(T(),R("div",Art,[b(x,{to:"/inventory-audit",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/inventory-audit"}])},{default:D(()=>[b(v(Tfe),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Trt,"Dashboard"))]),_:1},8,["class"]),b(x,{to:"/inventory-audit/items",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path.startsWith("/inventory-audit/items")}])},{default:D(()=>[b(v(Qa),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",$rt,"Item Master"))]),_:1},8,["class"]),b(x,{to:"/inventory-audit/plans",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path.startsWith("/inventory-audit/plans")}])},{default:D(()=>[b(v(Ar),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Mrt,"Audit Plans"))]),_:1},8,["class"]),b(x,{to:"/inventory-audit/sessions",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path.startsWith("/inventory-audit/sessions")}])},{default:D(()=>[b(v(L0),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Ert,"Stock Take Sessions"))]),_:1},8,["class"]),b(x,{to:"/inventory-audit/variance-cases",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path.startsWith("/inventory-audit/variance-cases")}])},{default:D(()=>[b(v(rn),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Drt,"Variance Cases"))]),_:1},8,["class"]),b(x,{to:"/inventory-audit/stock-take",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path.startsWith("/inventory-audit/stock-take")}])},{default:D(()=>[b(v(RY),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Rrt,"Stock Take"))]),_:1},8,["class"]),b(x,{to:"/inventory-audit/issues",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path.startsWith("/inventory-audit/issues")}])},{default:D(()=>[b(v(qr),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Prt,"Issue Log"))]),_:1},8,["class"]),b(x,{to:"/inventory-audit/scorecards",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path.startsWith("/inventory-audit/scorecards")}])},{default:D(()=>[b(v(KD),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Irt,"Scorecards"))]),_:1},8,["class"]),b(x,{to:"/inventory-audit/settings",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/inventory-audit/settings"}])},{default:D(()=>[b(v(ha),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Ort,"Settings"))]),_:1},8,["class"])])):se("",!0)]),b(x,{to:"/chat",class:pe(["nav-item",{"nav-item-active":g.$route.path.startsWith("/chat")}])},{default:D(()=>[b(v(aa),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",Lrt,"AI Chat"))]),_:1},8,["class"]),u("div",Vrt,[u("div",{class:"nav-group-header",onClick:y[7]||(y[7]=k=>m("settings"))},[u("div",Nrt,[b(v(ha),{class:"h-5 w-5"}),r.value?se("",!0):(T(),R("span",jrt,"Settings"))]),r.value?se("",!0):(T(),he(v(xo),{key:0,class:pe(["h-4 w-4 transition-transform",a.value.settings?"rotate-180":""])},null,8,["class"]))]),a.value.settings||r.value?(T(),R("div",Frt,[b(x,{to:"/settings/users",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/settings/users"}])},{default:D(()=>[b(v(Jr),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Brt,"Users & Roles"))]),_:1},8,["class"]),b(x,{to:"/settings/templates",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/settings/templates"}])},{default:D(()=>[b(v(vt),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",zrt,"Templates"))]),_:1},8,["class"]),b(x,{to:"/settings/configuration",class:pe(["nav-subitem",{"nav-subitem-active":g.$route.path==="/settings/configuration"}])},{default:D(()=>[b(v(xY),{class:"h-4 w-4"}),r.value?se("",!0):(T(),R("span",Urt,"Configuration"))]),_:1},8,["class"])])):se("",!0)])])],2),u("main",Hrt,[o.value?se("",!0):(T(),R("div",qrt,[b(Gfe,{items:l.value},null,8,["items"])])),u("div",{class:pe(["flex-1 overflow-auto",o.value?"":"p-6"])},[b(_)],2)])]),y[10]||(y[10]=u("footer",{class:"flex h-10 items-center justify-center border-t border-outline-gray-200 bg-surface-white px-6"},[u("p",{class:"text-sm text-gray-500"},"  2025 Internal Audit Management System. All rights reserved. ")],-1))])}}},Grt=It(Wrt,[["__scopeId","data-v-19b38fb8"]]),Yrt={class:"child-table"},Krt={class:"flex items-center justify-between mb-4"},Xrt={class:"text-lg font-medium text-gray-900"},Qrt={key:0,class:"text-red-500"},Zrt={key:0,class:"text-center py-6 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg"},Jrt={class:"text-sm mt-1"},est={key:1,class:"bg-gray-50 rounded-lg overflow-hidden"},tst={class:"overflow-x-auto"},nst={class:"min-w-full"},rst={class:"bg-gray-100"},sst={class:"divide-y divide-gray-200"},ist={key:1},ast={class:"px-4 py-2"},ost={class:"flex items-center space-x-2"},lst={class:"space-y-4"},ust={key:0,class:"field-wrapper"},dst={key:0,class:"block text-sm font-medium text-gray-700 mb-2"},cst={key:0,class:"text-red-500"},fst=["onUpdate:modelValue","onInput"],pst={key:2,class:"mt-1 text-xs text-red-500"},hst={__name:"ChildTable",props:{modelValue:{type:Array,default:()=>[]},title:{type:String,required:!0},modalTitle:{type:String,required:!0},columns:{type:Array,required:!0,validator:t=>t.every(e=>typeof e=="object"&&"key"in e&&"label"in e)},formFields:{type:Array,required:!0,validator:t=>t.every(e=>typeof e=="object"&&"name"in e&&"component"in e)},validate:{type:Function,default:null},emptyMessage:{type:String,default:""},required:{type:Boolean,default:!1},modalSize:{type:String,default:"xl"}},emits:["update:modelValue","row-change"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.modelValue,set:k=>r("update:modelValue",k)}),i=Z(()=>n.formFields.filter(k=>{var w;return((w=k.props)==null?void 0:w.type)!=="hidden"})),a=Q(!1),o=Q(null),l=Q({}),d=Q({}),c=()=>{const k={};return n.formFields.forEach(w=>{k[w.name]=w.defaultValue!==void 0?w.defaultValue:""}),k},f=()=>{o.value=null,l.value=c(),d.value={},a.value=!0},p=(k,w)=>{o.value=k,l.value=ge({},w),d.value={},a.value=!0},h=()=>{if(n.validate){const w=n.validate(l.value);if(w){d.value=w;return}}d.value={};const k=[...s.value];o.value!==null?k[o.value]=ge({},l.value):k.push(ge({},l.value)),s.value=k,r("row-change",l.value),a.value=!1},m=k=>{if(confirm(`Are you sure you want to delete this ${n.modalTitle.toLowerCase()}?`)){const w=[...s.value];w.splice(k,1),s.value=w}},g=()=>{a.value=!1,d.value={}},y=(k,w)=>{k.autoPopulate&&w&&w.relatedData&&Object.entries(k.autoPopulate).forEach(([S,C])=>{w.relatedData[S]!==void 0&&(l.value[C]=w.relatedData[S])})},x=(k,w)=>k==null||k===""?"-":w.format?w.format(k):w.type==="currency"?`$${Number.parseFloat(k).toFixed(2)}`:w.type==="percent"?`${Number.parseFloat(k).toFixed(1)}%`:w.type==="number"?Number.parseFloat(k).toFixed(2):w.type==="boolean"?k?"Yes":"No":k,_=k=>{const w=String(k).toLowerCase();return w.includes("completed")||w.includes("active")?"green":w.includes("pending")||w.includes("assigned")?"blue":w.includes("removed")||w.includes("rejected")?"red":"gray"};return(k,w)=>(T(),R("div",Yrt,[u("div",Krt,[u("h3",Xrt,[W($(t.title)+" ",1),t.required?(T(),R("span",Qrt,"*")):se("",!0)]),b(v(J),{variant:"solid",theme:"green",size:"sm",onClick:f},{default:D(()=>[b(v(nt),{class:"h-3.5 w-3.5 mr-1"}),W(" Add "+$(t.modalTitle),1)]),_:1})]),s.value.length===0?(T(),R("div",Zrt,[u("p",null,$(t.emptyMessage||`No ${t.modalTitle.toLowerCase()}s added yet`),1),u("p",Jrt,'Click "Add '+$(t.modalTitle)+'" to add a new record',1)])):(T(),R("div",est,[u("div",tst,[u("table",nst,[u("thead",rst,[u("tr",null,[(T(!0),R(xe,null,_e(t.columns,S=>(T(),R("th",{key:S.key,class:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase",style:rt({width:S.width})},$(S.label),5))),128)),w[1]||(w[1]=u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase"}," Actions ",-1))])]),u("tbody",sst,[(T(!0),R(xe,null,_e(s.value,(S,C)=>(T(),R("tr",{key:C,class:"hover:bg-gray-50"},[(T(!0),R(xe,null,_e(t.columns,A=>(T(),R("td",{key:A.key,class:"px-4 py-2 text-sm text-gray-900"},[qe(k.$slots,`column-${A.key}`,{row:S,value:S[A.key]},()=>[A.component==="Badge"?(T(),he(v(De),{key:0,theme:_(S[A.key])},{default:D(()=>[W($(x(S[A.key],A)),1)]),_:2},1032,["theme"])):(T(),R("span",ist,$(x(S[A.key],A)),1))],!0)]))),128)),u("td",ast,[u("div",ost,[b(v(J),{variant:"ghost",size:"sm",onClick:A=>p(C,S)},{default:D(()=>[b(v(yn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",theme:"red",onClick:A=>m(C)},{default:D(()=>[b(v(es),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"])])])]))),128))])])])])),b(v(jt),{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=S=>a.value=S),options:{title:o.value!==null?`Edit ${t.modalTitle}`:`Add ${t.modalTitle}`,size:t.modalSize}},{"body-content":D(()=>[u("div",lst,[(T(!0),R(xe,null,_e(i.value,S=>{var C,A,M;return T(),R(xe,{key:S.name},[typeof S.component=="string"?(T(),R("div",ust,[S.label&&((C=S.props)==null?void 0:C.type)!=="hidden"?(T(),R("label",dst,[W($(S.label)+" ",1),(A=S.props)!=null&&A.required?(T(),R("span",cst,"*")):se("",!0)])):se("",!0),S.component==="input"?we((T(),R("input",xt({key:1,"onUpdate:modelValue":E=>l.value[S.name]=E},{ref_for:!0},S.props,{class:["w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",{"border-red-500":d.value[S.name]}],onInput:E=>y(S,E.target.value)}),null,16,fst)),[[Pde,l.value[S.name]]]):se("",!0),d.value[S.name]?(T(),R("p",pst,$(d.value[S.name]),1)):se("",!0)])):(T(),he(At(S.component),xt({key:1,modelValue:l.value[S.name],"onUpdate:modelValue":E=>l.value[S.name]=E},{ref_for:!0},S.props,{label:S.label,required:(M=S.props)==null?void 0:M.required,error:d.value[S.name],onChange:E=>y(S,E)}),null,16,["modelValue","onUpdate:modelValue","label","required","error","onChange"]))],64)}),128))])]),actions:D(()=>[b(v(J),{variant:"ghost",onClick:g},{default:D(()=>[...w[2]||(w[2]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:h,class:"bg-green-600 hover:bg-green-700"},{default:D(()=>[W(" Save "+$(t.modalTitle),1)]),_:1})]),_:1},8,["modelValue","options"])]))}},da=It(hst,[["__scopeId","data-v-acd42537"]]),mst={class:"flex items-center space-x-4 mb-6 pb-4 border-b border-gray-200"},gst={class:"text-lg font-semibold text-gray-900"},vst={key:0,class:"text-sm text-gray-500"},yst={key:0,class:"ml-auto px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},Vt={__name:"SectionHeader",props:{title:{type:String,required:!0},description:{type:String,default:""},icon:{type:[String,Object],default:"file-text"},step:{type:[String,Number],default:null},totalSteps:{type:[String,Number],default:8},color:{type:String,default:"blue"}},setup(t){const e=t,n={"file-text":vt,target:ei,settings:ha,calendar:rr,users:Jr,"book-user":vY,database:Kr,folder:QD,search:En,"message-circle":aa,"clipboard-check":L0,"refresh-cw":mn,"shield-check":Ds,"file-check":c2,"clipboard-list":Ar,"alert-triangle":rn},r=Z(()=>typeof e.icon=="object"?zt(e.icon):n[e.icon]||vt),s={green:{bg:"bg-green-100",icon:"text-green-600"},blue:{bg:"bg-blue-100",icon:"text-blue-600"},purple:{bg:"bg-purple-100",icon:"text-purple-600"},amber:{bg:"bg-amber-100",icon:"text-amber-600"},red:{bg:"bg-red-100",icon:"text-red-600"},yellow:{bg:"bg-yellow-100",icon:"text-yellow-600"},orange:{bg:"bg-orange-100",icon:"text-orange-600"},gray:{bg:"bg-gray-100",icon:"text-gray-600"}},i=Z(()=>{var o;return((o=s[e.color])==null?void 0:o.bg)||s.blue.bg}),a=Z(()=>{var o;return((o=s[e.color])==null?void 0:o.icon)||s.blue.icon});return(o,l)=>(T(),R("div",mst,[u("div",{class:pe(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",i.value])},[(T(),he(At(r.value),{class:pe(["h-5 w-5",a.value])},null,8,["class"]))],2),u("div",null,[u("h3",gst,$(t.title),1),t.description?(T(),R("p",vst,$(t.description),1)):se("",!0)]),t.step?(T(),R("div",yst," Step "+$(t.step)+" of "+$(t.totalSteps),1)):se("",!0)]))}};function nO(t={}){var z;const{sections:e=[],form:n=Jt({}),validateSection:r=null,childTables:s={}}=t,i=Q(((z=e[0])==null?void 0:z.id)||""),a=Jt({}),o=Jt({}),l=Q(!1),d=Q(!1),c=Q(!1);et(()=>n,()=>{c.value=!0},{deep:!0});const f=N=>{var X;if(((X=o[N])==null?void 0:X.length)>0)return"error";const q=e.find(j=>j.id===N);if(!(q!=null&&q.requiredFields))return"incomplete";const V=q.requiredFields,O=V.filter(j=>{const U=n[j];return Array.isArray(U)?U.length>0:typeof U=="boolean"?!0:U!=null&&U!==""});return O.length===0?"incomplete":O.length===V.length?"complete":"partial"},p=N=>{const q=f(N),V={complete:"bg-green-500 text-white",partial:"bg-yellow-400 text-white",incomplete:"bg-gray-200 text-gray-600",error:"bg-red-500 text-white"};return V[q]||V.incomplete},h=Z(()=>e.filter(N=>f(N.id)==="complete").length),m=Z(()=>e.length===0?0:Math.round(h.value/e.length*100)),g=Z(()=>e.filter(q=>q.required!==!1).every(q=>f(q.id)==="complete")),y=N=>{e.find(q=>q.id===N)&&(i.value=N)},x=()=>{const N=e.findIndex(q=>q.id===i.value);N<e.length-1&&(i.value=e[N+1].id)},_=()=>{const N=e.findIndex(q=>q.id===i.value);N>0&&(i.value=e[N-1].id)},k=Z(()=>e.findIndex(N=>N.id===i.value)===0),w=Z(()=>e.findIndex(N=>N.id===i.value)===e.length-1),S=()=>{const N=e.find(q=>{const V=f(q.id);return V==="error"||V==="incomplete"});N&&(i.value=N.id)},C=()=>{Object.keys(a).forEach(q=>delete a[q]),Object.keys(o).forEach(q=>delete o[q]);let N=!0;for(const q of e)if(r){const V=r(q.id,n);V&&Object.keys(V).length>0&&(o[q.id]=Object.keys(V),Object.assign(a,V),N=!1)}return N||S(),N},A=N=>{a[N]&&delete a[N]},M=()=>{Object.keys(a).forEach(N=>delete a[N]),Object.keys(o).forEach(N=>delete o[N])},E=()=>{const N=ge({},n);for(const[q,V]of Object.entries(s))Array.isArray(N[q])&&(N[q]=N[q].map(O=>ze(ge({},O),{doctype:V})));return N},P=(N={})=>{var q;Object.keys(n).forEach(V=>{Array.isArray(n[V])?n[V]=[]:typeof n[V]=="object"&&n[V]!==null?n[V]={}:n[V]=""}),Object.assign(n,N),i.value=((q=e[0])==null?void 0:q.id)||"",M(),c.value=!1},I=N=>{N&&(Object.keys(n).forEach(q=>{N[q]!==void 0&&(n[q]=N[q])}),c.value=!1)},F=N=>e.find(q=>q.id===N),L=Z(()=>e.findIndex(N=>N.id===i.value)+1);return{activeSection:i,errors:a,sectionErrors:o,isSaving:l,isSavingDraft:d,hasUnsavedChanges:c,completedSections:h,formProgress:m,isFormValid:g,isFirstSection:k,isLastSection:w,currentSectionIndex:L,getSectionStatus:f,getSectionStatusClass:p,navigateToSection:y,nextSection:x,prevSection:_,navigateToFirstError:S,validateForm:C,clearError:A,clearAllErrors:M,prepareFormData:E,resetForm:P,loadFormData:I,getSection:F}}const bst={class:"flex h-[calc(100vh-180px)] overflow-hidden"},xst={class:"w-72 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0"},_st={class:"mb-6"},wst={class:"flex items-center justify-between mb-2"},kst={class:"text-sm text-gray-500"},Sst={class:"w-full bg-gray-200 rounded-full h-2"},Cst={class:"space-y-1"},Ast=["onClick"],Tst={class:"flex-1 text-left"},$st={key:0,class:"ml-2 flex-shrink-0"},Mst={key:1,class:"ml-2 flex-shrink-0"},Est={class:"mt-6 pt-4 border-t border-gray-200"},Dst={class:"flex items-center text-sm text-gray-500"},Rst={key:0},Pst={key:1},Ist={class:"flex-1 overflow-y-auto p-6"},Ost={class:"space-y-6"},Lst={class:"grid grid-cols-2 gap-6"},Vst={class:"grid grid-cols-3 gap-6"},Nst={class:"grid grid-cols-2 gap-6"},jst={class:"space-y-6"},Fst={class:"space-y-6"},Bst={class:"bg-blue-50 rounded-lg p-4 mb-6"},zst={class:"grid grid-cols-3 gap-4"},Ust={class:"text-center"},Hst={class:"text-2xl font-bold text-blue-700"},qst={class:"text-center"},Wst={class:"text-2xl font-bold text-green-700"},Gst={class:"text-center"},Yst={class:"grid grid-cols-3 gap-6"},Kst={class:"space-y-6"},Xst={key:0,class:"bg-gray-50 rounded-lg p-4"},Qst={class:"grid grid-cols-4 gap-4"},Zst={class:"text-center p-3 bg-white rounded-lg border border-gray-200"},Jst={class:"text-xl font-bold text-gray-900"},eit={class:"text-center p-3 bg-white rounded-lg border border-gray-200"},tit={class:"text-xl font-bold text-red-600"},nit={class:"text-center p-3 bg-white rounded-lg border border-gray-200"},rit={class:"text-xl font-bold text-blue-600"},sit={class:"text-center p-3 bg-white rounded-lg border border-gray-200"},iit={class:"text-xl font-bold text-green-600"},ait={class:"space-y-6"},oit={class:"space-y-6"},lit={class:"space-y-6"},uit={class:"space-y-6"},dit={class:"flex items-center justify-between w-full"},cit={class:"flex items-center space-x-2"},fit={class:"flex items-center space-x-3"},pit={__name:"AnnualPlanForm",props:{modelValue:{type:Boolean,default:!1},plan:{type:Object,default:null}},emits:["update:modelValue","saved","close"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.modelValue,set:U=>r("update:modelValue",U)}),i=Z(()=>{var U;return!!((U=n.plan)!=null&&U.name)}),a=Q(!1),o=Q(null),l={basic:{label:"Basic Information",icon:vt},overview:{label:"Plan Overview",icon:ei},resources:{label:"Resource Summary",icon:Jr},audits:{label:"Planned Audits",icon:Ar},budget:{label:"Budget Allocation",icon:rb},risk:{label:"Risk Prioritization",icon:rn},contingency:{label:"Contingency & Monitoring",icon:Ds},additional:{label:"Additional Information",icon:c2}},{activeSection:d,formProgress:c,setActiveSection:f,getSectionStatus:p,validateForm:h,prepareFormData:m}=nO(l),g=Jt({plan_id:"",plan_year:new Date().getFullYear(),plan_period:"Annual",prepared_by:"",prepared_date:"",approved_by:"",approved_date:"",status:"Draft",plan_objectives:"",scope_and_coverage:"",key_assumptions:"",total_available_days:null,total_planned_days:null,utilization_percentage:null,resource_allocation:[],planned_audits:[],budget_allocation:[],risk_based_prioritization:[],contingency_plan:"",monitoring_and_reporting:"",notes:"",attachments:""}),y=[{label:"Annual",value:"Annual"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Quarterly",value:"Quarterly"}],x=[{label:"Draft",value:"Draft"},{label:"Submitted for Approval",value:"Submitted for Approval"},{label:"Approved",value:"Approved"},{label:"Rejected",value:"Rejected"},{label:"Active",value:"Active"},{label:"Completed",value:"Completed"}],_=Q([]),k=[{key:"auditor",label:"Auditor",width:"150px"},{key:"role",label:"Role",width:"120px"},{key:"available_days",label:"Available",width:"80px"},{key:"allocated_days",label:"Allocated",width:"80px"},{key:"utilization_percentage",label:"Util %",width:"80px"}],w=[{key:"auditor",label:"Auditor",type:"link",doctype:"User",required:!0},{key:"auditor_name",label:"Auditor Name",type:"text",readOnly:!0},{key:"role",label:"Role",type:"select",required:!0,options:[{label:"Lead Auditor",value:"Lead Auditor"},{label:"Senior Auditor",value:"Senior Auditor"},{label:"Auditor",value:"Auditor"},{label:"Trainee",value:"Trainee"},{label:"Specialist",value:"Specialist"}]},{key:"available_days",label:"Available Days",type:"number",required:!0},{key:"allocated_days",label:"Allocated Days",type:"number"},{key:"utilization_percentage",label:"Utilization %",type:"number",readOnly:!0},{key:"skills_expertise",label:"Skills/Expertise",type:"textarea"},{key:"location",label:"Location",type:"select",options:[{label:"Head Office",value:"Head Office"},{label:"Branch 1",value:"Branch 1"},{label:"Branch 2",value:"Branch 2"},{label:"Remote",value:"Remote"}]},{key:"cost_rate_per_day",label:"Cost Rate/Day",type:"currency"},{key:"total_cost",label:"Total Cost",type:"currency",readOnly:!0}],S=[{key:"audit_universe",label:"Audit Universe",width:"180px"},{key:"audit_type",label:"Type",width:"100px"},{key:"priority",label:"Priority",width:"80px",component:"Badge"},{key:"planned_days",label:"Days",width:"60px"},{key:"planned_start_date",label:"Start",width:"100px"}],C=[{key:"audit_universe",label:"Audit Universe",type:"link",doctype:"Audit Universe",required:!0},{key:"audit_type",label:"Audit Type",type:"select",required:!0,options:[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Integrated",value:"Integrated"},{label:"Special Investigation",value:"Special Investigation"},{label:"Follow-up",value:"Follow-up"}]},{key:"priority",label:"Priority",type:"select",required:!0,options:[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}]},{key:"planned_start_date",label:"Planned Start Date",type:"date",required:!0},{key:"planned_end_date",label:"Planned End Date",type:"date",required:!0},{key:"planned_days",label:"Planned Days",type:"number",required:!0},{key:"lead_auditor",label:"Lead Auditor",type:"link",doctype:"User",required:!0},{key:"team_members",label:"Team Members",type:"textarea"},{key:"objectives",label:"Objectives",type:"textarea"},{key:"scope",label:"Scope",type:"textarea"},{key:"risk_assessment_reference",label:"Risk Assessment",type:"link",doctype:"Risk Assessment"},{key:"budget_allocated",label:"Budget Allocated",type:"currency"}],A=[{key:"budget_category",label:"Category",width:"180px"},{key:"planned_amount",label:"Planned",width:"120px"},{key:"actual_amount",label:"Actual",width:"120px"},{key:"variance",label:"Variance",width:"100px"}],M=[{key:"budget_category",label:"Budget Category",type:"select",required:!0,options:[{label:"Personnel Costs",value:"Personnel Costs"},{label:"Travel & Accommodation",value:"Travel & Accommodation"},{label:"Training & Development",value:"Training & Development"},{label:"Technology & Tools",value:"Technology & Tools"},{label:"Consulting Services",value:"Consulting Services"},{label:"Office Supplies",value:"Office Supplies"},{label:"Miscellaneous",value:"Miscellaneous"},{label:"Contingency",value:"Contingency"}]},{key:"description",label:"Description",type:"textarea"},{key:"planned_amount",label:"Planned Amount",type:"currency",required:!0},{key:"actual_amount",label:"Actual Amount",type:"currency"},{key:"variance",label:"Variance",type:"currency",readOnly:!0},{key:"variance_percentage",label:"Variance %",type:"number",readOnly:!0},{key:"budget_type",label:"Budget Type",type:"select",options:[{label:"Fixed",value:"Fixed"},{label:"Variable",value:"Variable"},{label:"Contingency",value:"Contingency"}]},{key:"allocation_basis",label:"Allocation Basis",type:"select",options:[{label:"Per Audit",value:"Per Audit"},{label:"Per Day",value:"Per Day"},{label:"Percentage of Total",value:"Percentage of Total"},{label:"Fixed Amount",value:"Fixed Amount"}]},{key:"notes",label:"Notes",type:"textarea"}],E=[{key:"audit_universe",label:"Audit Universe",width:"180px"},{key:"risk_rating",label:"Risk Rating",width:"100px",component:"Badge"},{key:"priority_level",label:"Priority",width:"100px",component:"Badge"},{key:"planned_audit_timing",label:"Timing",width:"80px"}],P=[{key:"audit_universe",label:"Audit Universe",type:"link",doctype:"Audit Universe",required:!0},{key:"risk_rating",label:"Risk Rating",type:"select",required:!0,options:[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}]},{key:"risk_score",label:"Risk Score",type:"number",required:!0},{key:"last_assessment_date",label:"Last Assessment Date",type:"date"},{key:"audit_frequency",label:"Audit Frequency",type:"select",options:[{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"Bi-Annual",value:"Bi-Annual"},{label:"Tri-Annual",value:"Tri-Annual"},{label:"As Needed",value:"As Needed"}]},{key:"priority_level",label:"Priority Level",type:"select",required:!0,options:[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}]},{key:"justification",label:"Justification",type:"textarea",required:!0},{key:"planned_audit_timing",label:"Planned Timing",type:"select",options:[{label:"Q1",value:"Q1"},{label:"Q2",value:"Q2"},{label:"Q3",value:"Q3"},{label:"Q4",value:"Q4"},{label:"H1",value:"H1"},{label:"H2",value:"H2"},{label:"As Required",value:"As Required"}]},{key:"resource_intensity",label:"Resource Intensity",type:"select",options:[{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}]}],I=Z(()=>{const U=g.utilization_percentage||0;return U>=90?"text-red-600":U>=75?"text-yellow-600":"text-green-600"}),F=Z(()=>g.planned_audits.filter(U=>U.priority==="Critical"||U.priority==="High").length),L=Z(()=>g.planned_audits.reduce((U,G)=>U+(G.planned_days||0),0)),z=Z(()=>g.planned_audits.reduce((G,ee)=>G+(ee.budget_allocated||0),0).toLocaleString());et([()=>g.total_available_days,()=>g.total_planned_days],()=>{g.total_available_days>0&&(g.utilization_percentage=Math.round(g.total_planned_days/g.total_available_days*100))});const N=()=>{const U=Object.keys(l),G=U.indexOf(d.value);G>0&&f(U[G-1])},q=()=>{const U=Object.keys(l),G=U.indexOf(d.value);G<U.length-1&&f(U[G+1])},V=U=>{if(!U)return"";const G=Math.floor((new Date-new Date(U))/1e3);if(G<60)return"just now";const ee=Math.floor(G/60);if(ee<60)return`${ee}m ago`;const ie=Math.floor(ee/60);return ie<24?`${ie}h ago`:`${Math.floor(ie/24)}d ago`},O=()=>ue(this,null,function*(){try{o.value=new Date}catch(U){console.error("Failed to save draft:",U)}}),X=()=>ue(this,null,function*(){const U=h(g);if(!U.isValid){console.error("Validation errors:",U.errors);return}a.value=!0;try{const G=m(g,{planned_audits:"Annual Audit Plan Item",resource_allocation:"Annual Audit Plan Resource",budget_allocation:"Annual Audit Plan Budget",risk_based_prioritization:"Annual Audit Plan Risk Priority"});r("saved",G),j()}catch(G){console.error("Failed to save plan:",G)}finally{a.value=!1}}),j=()=>{s.value=!1,r("close")};return et(()=>n.plan,U=>{U&&Object.keys(g).forEach(G=>{U[G]!==void 0&&(g[G]=U[G])})},{immediate:!0,deep:!0}),(U,G)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":G[22]||(G[22]=ee=>s.value=ee),options:{size:"7xl",title:i.value?"Edit Annual Audit Plan":"New Annual Audit Plan"}},{body:D(()=>[u("div",bst,[u("div",xst,[u("div",_st,[u("div",wst,[G[23]||(G[23]=u("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),u("span",kst,$(v(c))+"%",1)]),u("div",Sst,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${v(c)}%`})},null,4)])]),u("nav",Cst,[(T(),R(xe,null,_e(l,(ee,ie)=>u("button",{key:ie,onClick:ne=>v(f)(ie),class:pe(["w-full flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors",[v(d)===ie?"bg-blue-100 text-blue-700 border-l-4 border-blue-600":"text-gray-600 hover:bg-gray-100"]])},[(T(),he(At(ee.icon),{class:pe(["h-5 w-5 mr-3 flex-shrink-0",v(d)===ie?"text-blue-600":"text-gray-400"])},null,8,["class"])),u("span",Tst,$(ee.label),1),v(p)(ie)==="complete"?(T(),R("span",$st,[b(v(ro),{class:"h-5 w-5 text-green-500"})])):v(p)(ie)==="partial"?(T(),R("span",Mst,[b(v(qr),{class:"h-5 w-5 text-yellow-500"})])):se("",!0)],10,Ast)),64))]),u("div",Est,[u("div",Dst,[b(v(XD),{class:"h-4 w-4 mr-2"}),o.value?(T(),R("span",Rst,"Saved "+$(V(o.value)),1)):(T(),R("span",Pst,"Not saved yet"))])])]),u("div",Ist,[we(u("div",Ost,[b(Vt,{title:"Basic Information",description:"Essential plan identification and classification",icon:"file-text"}),u("div",Lst,[b(v(ve),{label:"Plan ID",modelValue:g.plan_id,"onUpdate:modelValue":G[0]||(G[0]=ee=>g.plan_id=ee),type:"text",placeholder:"e.g., AAP-2025-001",required:!0},null,8,["modelValue"]),b(v(ve),{label:"Plan Year",modelValue:g.plan_year,"onUpdate:modelValue":G[1]||(G[1]=ee=>g.plan_year=ee),type:"number",placeholder:new Date().getFullYear().toString(),required:!0},null,8,["modelValue","placeholder"])]),u("div",Vst,[b(v(ve),{label:"Plan Period",modelValue:g.plan_period,"onUpdate:modelValue":G[2]||(G[2]=ee=>g.plan_period=ee),type:"select",options:y,required:!0},null,8,["modelValue"]),b(v(ve),{label:"Status",modelValue:g.status,"onUpdate:modelValue":G[3]||(G[3]=ee=>g.status=ee),type:"select",options:x},null,8,["modelValue"]),b(v(ve),{label:"Prepared Date",modelValue:g.prepared_date,"onUpdate:modelValue":G[4]||(G[4]=ee=>g.prepared_date=ee),type:"date",required:!0},null,8,["modelValue"])]),u("div",Nst,[b(v(ve),{label:"Prepared By",modelValue:g.prepared_by,"onUpdate:modelValue":G[5]||(G[5]=ee=>g.prepared_by=ee),type:"autocomplete",options:_.value,placeholder:"Select preparer",required:!0},null,8,["modelValue","options"]),b(v(ve),{label:"Approved By",modelValue:g.approved_by,"onUpdate:modelValue":G[6]||(G[6]=ee=>g.approved_by=ee),type:"autocomplete",options:_.value,placeholder:"Select approver"},null,8,["modelValue","options"])]),b(v(ve),{label:"Approved Date",modelValue:g.approved_date,"onUpdate:modelValue":G[7]||(G[7]=ee=>g.approved_date=ee),type:"date"},null,8,["modelValue"])],512),[[lt,v(d)==="basic"]]),we(u("div",jst,[b(Vt,{title:"Plan Overview",description:"Objectives, scope, and key assumptions for the audit plan",icon:"target"}),u("div",null,[G[24]||(G[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Plan Objectives "),u("span",{class:"text-red-500"},"*")],-1)),G[25]||(G[25]=u("p",{class:"text-xs text-gray-500 mb-2"},"Define the main objectives of this annual audit plan",-1)),b(v(an),{modelValue:g.plan_objectives,"onUpdate:modelValue":G[8]||(G[8]=ee=>g.plan_objectives=ee),placeholder:"Enter the key objectives for this annual audit plan...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[G[26]||(G[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Scope and Coverage "),u("span",{class:"text-red-500"},"*")],-1)),G[27]||(G[27]=u("p",{class:"text-xs text-gray-500 mb-2"},"Describe the scope and coverage of planned audits",-1)),b(v(an),{modelValue:g.scope_and_coverage,"onUpdate:modelValue":G[9]||(G[9]=ee=>g.scope_and_coverage=ee),placeholder:"Describe the scope and coverage areas...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[G[28]||(G[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Key Assumptions ",-1)),G[29]||(G[29]=u("p",{class:"text-xs text-gray-500 mb-2"},"List the key assumptions underlying this plan",-1)),b(v(an),{modelValue:g.key_assumptions,"onUpdate:modelValue":G[10]||(G[10]=ee=>g.key_assumptions=ee),placeholder:"List the key assumptions for this plan...",editorClass:"min-h-[120px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])],512),[[lt,v(d)==="overview"]]),we(u("div",Fst,[b(Vt,{title:"Resource Summary",description:"Resource availability and utilization planning",icon:"users"}),u("div",Bst,[G[33]||(G[33]=u("h4",{class:"text-sm font-medium text-blue-900 mb-3"},"Resource Overview",-1)),u("div",zst,[u("div",Ust,[u("p",Hst,$(g.total_available_days||0),1),G[30]||(G[30]=u("p",{class:"text-xs text-blue-600"},"Available Days",-1))]),u("div",qst,[u("p",Wst,$(g.total_planned_days||0),1),G[31]||(G[31]=u("p",{class:"text-xs text-green-600"},"Planned Days",-1))]),u("div",Gst,[u("p",{class:pe(["text-2xl font-bold",I.value])},$(g.utilization_percentage||0)+"%",3),G[32]||(G[32]=u("p",{class:"text-xs text-gray-600"},"Utilization",-1))])])]),u("div",Yst,[b(v(ve),{label:"Total Available Days",modelValue:g.total_available_days,"onUpdate:modelValue":G[11]||(G[11]=ee=>g.total_available_days=ee),type:"number",placeholder:"0"},null,8,["modelValue"]),b(v(ve),{label:"Total Planned Days",modelValue:g.total_planned_days,"onUpdate:modelValue":G[12]||(G[12]=ee=>g.total_planned_days=ee),type:"number",placeholder:"0"},null,8,["modelValue"]),b(v(ve),{label:"Utilization %",modelValue:g.utilization_percentage,"onUpdate:modelValue":G[13]||(G[13]=ee=>g.utilization_percentage=ee),type:"number",placeholder:"0",disabled:!0},null,8,["modelValue"])]),b(da,{modelValue:g.resource_allocation,"onUpdate:modelValue":G[14]||(G[14]=ee=>g.resource_allocation=ee),title:"Resource Allocation",columns:k,fields:w,modalTitle:"Resource",emptyMessage:"No resources allocated yet",doctype:"Annual Audit Plan Resource"},null,8,["modelValue"])],512),[[lt,v(d)==="resources"]]),we(u("div",Kst,[b(Vt,{title:"Planned Audits",description:"Schedule and plan individual audit engagements",icon:"clipboard-list"}),b(da,{modelValue:g.planned_audits,"onUpdate:modelValue":G[15]||(G[15]=ee=>g.planned_audits=ee),title:"Planned Audits",columns:S,fields:C,modalTitle:"Planned Audit",emptyMessage:"No audits planned yet",doctype:"Annual Audit Plan Item",required:!0},null,8,["modelValue"]),g.planned_audits.length>0?(T(),R("div",Xst,[G[38]||(G[38]=u("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Audit Summary",-1)),u("div",Qst,[u("div",Zst,[u("p",Jst,$(g.planned_audits.length),1),G[34]||(G[34]=u("p",{class:"text-xs text-gray-500"},"Total Audits",-1))]),u("div",eit,[u("p",tit,$(F.value),1),G[35]||(G[35]=u("p",{class:"text-xs text-gray-500"},"Critical/High",-1))]),u("div",nit,[u("p",rit,$(L.value),1),G[36]||(G[36]=u("p",{class:"text-xs text-gray-500"},"Total Days",-1))]),u("div",sit,[u("p",iit,$(z.value),1),G[37]||(G[37]=u("p",{class:"text-xs text-gray-500"},"Budget",-1))])])])):se("",!0)],512),[[lt,v(d)==="audits"]]),we(u("div",ait,[b(Vt,{title:"Budget Allocation",description:"Plan and allocate budget across different categories",icon:"calculator"}),b(da,{modelValue:g.budget_allocation,"onUpdate:modelValue":G[16]||(G[16]=ee=>g.budget_allocation=ee),title:"Budget Items",columns:A,fields:M,modalTitle:"Budget Item",emptyMessage:"No budget items added yet",doctype:"Annual Audit Plan Budget"},null,8,["modelValue"])],512),[[lt,v(d)==="budget"]]),we(u("div",oit,[b(Vt,{title:"Risk-Based Prioritization",description:"Prioritize audit areas based on risk assessment",icon:"alert-triangle"}),b(da,{modelValue:g.risk_based_prioritization,"onUpdate:modelValue":G[17]||(G[17]=ee=>g.risk_based_prioritization=ee),title:"Risk Priorities",columns:E,fields:P,modalTitle:"Risk Priority",emptyMessage:"No risk priorities defined yet",doctype:"Annual Audit Plan Risk Priority"},null,8,["modelValue"])],512),[[lt,v(d)==="risk"]]),we(u("div",lit,[b(Vt,{title:"Contingency & Monitoring",description:"Contingency planning and progress monitoring approach",icon:"shield-check"}),u("div",null,[G[39]||(G[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Contingency Plan ",-1)),G[40]||(G[40]=u("p",{class:"text-xs text-gray-500 mb-2"},"Describe contingency plans for unexpected situations",-1)),b(v(an),{modelValue:g.contingency_plan,"onUpdate:modelValue":G[18]||(G[18]=ee=>g.contingency_plan=ee),placeholder:"Describe contingency plans and backup strategies...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[G[41]||(G[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Monitoring and Reporting ",-1)),G[42]||(G[42]=u("p",{class:"text-xs text-gray-500 mb-2"},"Define how progress will be monitored and reported",-1)),b(v(an),{modelValue:g.monitoring_and_reporting,"onUpdate:modelValue":G[19]||(G[19]=ee=>g.monitoring_and_reporting=ee),placeholder:"Describe the monitoring and reporting approach...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])],512),[[lt,v(d)==="contingency"]]),we(u("div",uit,[b(Vt,{title:"Additional Information",description:"Notes, attachments, and supplementary details",icon:"file-check"}),u("div",null,[G[43]||(G[43]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notes ",-1)),b(v(an),{modelValue:g.notes,"onUpdate:modelValue":G[20]||(G[20]=ee=>g.notes=ee),placeholder:"Add any additional notes or comments...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),b(v(ve),{label:"Attachments",modelValue:g.attachments,"onUpdate:modelValue":G[21]||(G[21]=ee=>g.attachments=ee),type:"file",placeholder:"Upload supporting documents"},null,8,["modelValue"])],512),[[lt,v(d)==="additional"]])])])]),actions:D(()=>[u("div",dit,[u("div",cit,[b(v(J),{variant:"subtle",onClick:N,disabled:v(d)==="basic"},{default:D(()=>[b(v(gr),{class:"h-4 w-4 mr-1"}),G[44]||(G[44]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(v(J),{variant:"subtle",onClick:q,disabled:v(d)==="additional"},{default:D(()=>[G[45]||(G[45]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4 ml-1"})]),_:1},8,["disabled"])]),u("div",fit,[b(v(J),{variant:"subtle",onClick:O},{default:D(()=>[...G[46]||(G[46]=[W(" Save as Draft ",-1)])]),_:1}),b(v(J),{variant:"outline",onClick:j},{default:D(()=>[...G[47]||(G[47]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{variant:"solid",theme:"blue",onClick:X,loading:a.value},{default:D(()=>[W($(i.value?"Update Plan":"Create Plan"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","options"]))}},hit=It(pit,[["__scopeId","data-v-54375d86"]]),mit={class:"flex flex-wrap items-center gap-3 mb-6"},git={class:"flex-1 min-w-[250px] max-w-md"},vit={class:"relative"},yit=["value"],bit={class:"w-40"},xit={class:"w-32"},_it={class:"w-40"},wit={class:"flex items-center gap-1 bg-gray-100 rounded-lg p-1"},kit={key:0,class:"flex flex-wrap gap-2 mb-4"},Sit={key:0,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium"},Cit={key:1,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},Ait={key:2,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium"},Tit={key:3,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium"},$it={__name:"PlanFilters",props:{searchQuery:{type:String,default:""},statusFilter:{type:String,default:""},yearFilter:{type:[String,Number],default:""},periodFilter:{type:String,default:""},viewMode:{type:String,default:"table"}},emits:["update:searchQuery","update:statusFilter","update:yearFilter","update:periodFilter","update:viewMode"],setup(t,{emit:e}){const n=t,r=e,s=[{label:"All Status",value:""},{label:"Draft",value:"Draft"},{label:"Pending Approval",value:"Pending Approval"},{label:"Approved",value:"Approved"},{label:"Active",value:"Active"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}],i=[{label:"All Periods",value:""},{label:"Annual",value:"Annual"},{label:"Q1",value:"Q1"},{label:"Q2",value:"Q2"},{label:"Q3",value:"Q3"},{label:"Q4",value:"Q4"},{label:"H1",value:"H1"},{label:"H2",value:"H2"}],a=new Date().getFullYear(),o=Z(()=>{const c=[{label:"All Years",value:""}];for(let f=a+2;f>=a-3;f--)c.push({label:String(f),value:f});return c}),l=Z(()=>n.searchQuery||n.statusFilter||n.yearFilter||n.periodFilter),d=()=>{r("update:searchQuery",""),r("update:statusFilter",""),r("update:yearFilter",""),r("update:periodFilter","")};return(c,f)=>(T(),R(xe,null,[u("div",mit,[u("div",git,[u("div",vit,[b(v(En),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),u("input",{type:"text",value:t.searchQuery,onInput:f[0]||(f[0]=p=>c.$emit("update:searchQuery",p.target.value)),placeholder:"Search plans...",class:"w-full pl-10 pr-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,40,yit),t.searchQuery?(T(),R("button",{key:0,onClick:f[1]||(f[1]=p=>c.$emit("update:searchQuery","")),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},[b(v(ht),{class:"h-4 w-4"})])):se("",!0)])]),u("div",bit,[b(v(ve),{type:"select",modelValue:t.statusFilter,"onUpdate:modelValue":f[2]||(f[2]=p=>c.$emit("update:statusFilter",p)),options:s,size:"sm",placeholder:"All Status"},null,8,["modelValue"])]),u("div",xit,[b(v(ve),{type:"select",modelValue:t.yearFilter,"onUpdate:modelValue":f[3]||(f[3]=p=>c.$emit("update:yearFilter",p)),options:o.value,size:"sm",placeholder:"All Years"},null,8,["modelValue","options"])]),u("div",_it,[b(v(ve),{type:"select",modelValue:t.periodFilter,"onUpdate:modelValue":f[4]||(f[4]=p=>c.$emit("update:periodFilter",p)),options:i,size:"sm",placeholder:"All Periods"},null,8,["modelValue"])]),u("div",wit,[u("button",{onClick:f[5]||(f[5]=p=>c.$emit("update:viewMode","table")),class:pe(["p-2 rounded-md transition-all duration-200",t.viewMode==="table"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Table View"},[b(v(KS),{class:"h-4 w-4"})],2),u("button",{onClick:f[6]||(f[6]=p=>c.$emit("update:viewMode","cards")),class:pe(["p-2 rounded-md transition-all duration-200",t.viewMode==="cards"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Card View"},[b(v(ZD),{class:"h-4 w-4"})],2),u("button",{onClick:f[7]||(f[7]=p=>c.$emit("update:viewMode","timeline")),class:pe(["p-2 rounded-md transition-all duration-200",t.viewMode==="timeline"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Timeline View"},[b(v(a$),{class:"h-4 w-4"})],2)]),l.value?(T(),R("button",{key:0,onClick:d,class:"flex items-center gap-1.5 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all"},[b(v(wY),{class:"h-4 w-4"}),f[12]||(f[12]=u("span",null,"Clear",-1))])):se("",!0)]),l.value?(T(),R("div",kit,[t.searchQuery?(T(),R("span",Sit,[b(v(En),{class:"h-3 w-3"}),W(' "'+$(t.searchQuery)+'" ',1),u("button",{onClick:f[8]||(f[8]=p=>c.$emit("update:searchQuery","")),class:"hover:text-blue-600"},[b(v(ht),{class:"h-3 w-3"})])])):se("",!0),t.statusFilter?(T(),R("span",Cit,[W(" Status: "+$(t.statusFilter)+" ",1),u("button",{onClick:f[9]||(f[9]=p=>c.$emit("update:statusFilter","")),class:"hover:text-green-600"},[b(v(ht),{class:"h-3 w-3"})])])):se("",!0),t.yearFilter?(T(),R("span",Ait,[W(" Year: "+$(t.yearFilter)+" ",1),u("button",{onClick:f[10]||(f[10]=p=>c.$emit("update:yearFilter","")),class:"hover:text-amber-600"},[b(v(ht),{class:"h-3 w-3"})])])):se("",!0),t.periodFilter?(T(),R("span",Tit,[W(" Period: "+$(t.periodFilter)+" ",1),u("button",{onClick:f[11]||(f[11]=p=>c.$emit("update:periodFilter","")),class:"hover:text-purple-600"},[b(v(ht),{class:"h-3 w-3"})])])):se("",!0)])):se("",!0)],64))}},Mit={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4 mb-6"},Eit={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-5 hover:shadow-lg transition-all duration-200"},Dit={class:"flex items-center justify-between"},Rit={class:"text-3xl font-bold text-green-900 mt-1"},Pit={class:"text-xs text-green-600 mt-1"},Iit={class:"p-3 bg-green-500 rounded-xl shadow-sm"},Oit={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-5 hover:shadow-lg transition-all duration-200"},Lit={class:"flex items-center justify-between"},Vit={class:"text-3xl font-bold text-blue-900 mt-1"},Nit={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},jit={class:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl border border-amber-200 p-5 hover:shadow-lg transition-all duration-200"},Fit={class:"flex items-center justify-between"},Bit={class:"w-full"},zit={class:"text-3xl font-bold text-amber-900 mt-1"},Uit={class:"w-full bg-amber-200 rounded-full h-2 mt-2"},Hit={class:"p-3 bg-amber-500 rounded-xl shadow-sm ml-3"},qit={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-5 hover:shadow-lg transition-all duration-200"},Wit={class:"flex items-center justify-between"},Git={class:"text-3xl font-bold text-purple-900 mt-1"},Yit={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},Kit={class:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200 p-5 hover:shadow-lg transition-all duration-200"},Xit={class:"flex items-center justify-between"},Qit={class:"text-3xl font-bold text-gray-900 mt-1"},Zit={class:"p-3 bg-gray-500 rounded-xl shadow-sm"},Jit={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},eat={class:"bg-white rounded-xl border border-gray-200 p-5"},tat={class:"space-y-3"},nat={class:"w-24 text-sm text-gray-600"},rat={class:"flex-1 mx-3"},sat={class:"w-full bg-gray-100 rounded-full h-3"},iat={class:"w-12 text-sm font-medium text-gray-900 text-right"},aat={class:"bg-white rounded-xl border border-gray-200 p-5"},oat={class:"grid grid-cols-4 gap-3"},lat={class:"text-xs text-gray-500"},uat={__name:"PlanStats",props:{stats:{type:Object,default:()=>({total:0,active:0,draft:0,approved:0,completed:0,plannedAudits:0,avgUtilization:0,upcoming:0,totalDays:0,byQuarter:{q1:0,q2:0,q3:0,q4:0}})},showDetails:{type:Boolean,default:!0}},setup(t){const e=t,n=Z(()=>e.stats.total?Math.round(e.stats.active/e.stats.total*100):0),r=Z(()=>{const i=e.stats.total||1;return[{label:"Draft",count:e.stats.draft||0,percentage:(e.stats.draft||0)/i*100,color:"bg-gray-400"},{label:"Approved",count:e.stats.approved||0,percentage:(e.stats.approved||0)/i*100,color:"bg-blue-500"},{label:"Active",count:e.stats.active||0,percentage:(e.stats.active||0)/i*100,color:"bg-green-500"},{label:"Completed",count:e.stats.completed||0,percentage:(e.stats.completed||0)/i*100,color:"bg-purple-500"}]}),s=Z(()=>{const i=e.stats.byQuarter||{q1:0,q2:0,q3:0,q4:0};return[{label:"Q1",count:i.q1,color:"text-blue-600"},{label:"Q2",count:i.q2,color:"text-green-600"},{label:"Q3",count:i.q3,color:"text-amber-600"},{label:"Q4",count:i.q4,color:"text-purple-600"}]});return(i,a)=>(T(),R(xe,null,[u("div",Mit,[u("div",Eit,[u("div",Dit,[u("div",null,[a[0]||(a[0]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Active Plans",-1)),u("p",Rit,$(t.stats.active||0),1),u("p",Pit,$(n.value)+"% of total",1)]),u("div",Iit,[b(v(ro),{class:"h-7 w-7 text-white"})])])]),u("div",Oit,[u("div",Lit,[u("div",null,[a[1]||(a[1]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Planned Audits",-1)),u("p",Vit,$(t.stats.plannedAudits||0),1),a[2]||(a[2]=u("p",{class:"text-xs text-blue-600 mt-1"},"Across all plans",-1))]),u("div",Nit,[b(v(Ar),{class:"h-7 w-7 text-white"})])])]),u("div",jit,[u("div",Fit,[u("div",Bit,[a[3]||(a[3]=u("p",{class:"text-sm font-semibold text-amber-700 uppercase tracking-wide"},"Avg Utilization",-1)),u("p",zit,$(t.stats.avgUtilization||0)+"%",1),u("div",Uit,[u("div",{class:"bg-amber-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${Math.min(t.stats.avgUtilization||0,100)}%`})},null,4)])]),u("div",Hit,[b(v(Jr),{class:"h-7 w-7 text-white"})])])]),u("div",qit,[u("div",Wit,[u("div",null,[a[4]||(a[4]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Upcoming",-1)),u("p",Git,$(t.stats.upcoming||0),1),a[5]||(a[5]=u("p",{class:"text-xs text-purple-600 mt-1"},"Next 30 days",-1))]),u("div",Yit,[b(v(rr),{class:"h-7 w-7 text-white"})])])]),u("div",Kit,[u("div",Xit,[u("div",null,[a[6]||(a[6]=u("p",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Total Days",-1)),u("p",Qit,$(t.stats.totalDays||0),1),a[7]||(a[7]=u("p",{class:"text-xs text-gray-600 mt-1"},"Planned across all",-1))]),u("div",Zit,[b(v(Ns),{class:"h-7 w-7 text-white"})])])])]),t.showDetails?(T(),R("div",Jit,[u("div",eat,[a[8]||(a[8]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Plans by Status",-1)),u("div",tat,[(T(!0),R(xe,null,_e(r.value,o=>(T(),R("div",{key:o.label,class:"flex items-center"},[u("div",nat,$(o.label),1),u("div",rat,[u("div",sat,[u("div",{class:pe(["h-3 rounded-full transition-all duration-300",o.color]),style:rt({width:`${o.percentage}%`})},null,6)])]),u("div",iat,$(o.count),1)]))),128))])]),u("div",aat,[a[9]||(a[9]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Quarterly Audit Distribution",-1)),u("div",oat,[(T(!0),R(xe,null,_e(s.value,o=>(T(),R("div",{key:o.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[u("p",{class:pe(["text-lg font-bold",o.color])},$(o.count),3),u("p",lat,$(o.label),1)]))),128))])])])):se("",!0)],64))}},qo=Yl("audit",()=>{const t=Q(null),e=Q(null),n=Q([]),r=Q([]),s=Q(new Map),i=Q([]),a=Q([]),o=Q([]),l=Q([]),d=Q([]),c=Q([]),f=Z(()=>r.value.filter(Oe=>Oe.status==="in_progress"||Oe.status==="active")),p=Z(()=>n.value.filter(Oe=>Oe.risk_rating==="Critical")),h=Z(()=>{const Oe=new Date;return n.value.filter(Ge=>Ge.due_date?new Date(Ge.due_date)<Oe&&Ge.status!=="Closed":!1)}),m=Z(()=>{const Oe={};return n.value.forEach(Ge=>{Oe[Ge.status]=(Oe[Ge.status]||0)+1}),Oe}),g=Z(()=>i.value.filter(Oe=>Oe.status==="Active"||Oe.status==="Approved")),y=Z(()=>{const Oe=[];return i.value.forEach(Ge=>{Ge.planned_audits&&Oe.push(...Ge.planned_audits)}),Oe}),x=Z(()=>{const Oe=new Date;return o.value.filter(Ge=>new Date(Ge.planned_start_date)>Oe&&Ge.status==="Planned").sort((Ge,Bt)=>new Date(Ge.planned_start_date)-new Date(Bt.planned_start_date))}),_=Z(()=>a.value.filter(Oe=>Oe.is_template)),k=Z(()=>c.value.filter(Oe=>Oe.overall_risk_rating==="Critical")),w=Z(()=>c.value.filter(Oe=>Oe.overall_risk_rating==="High")),S=Z(()=>{const Oe={};return c.value.forEach(Ge=>{Oe[Ge.approval_status]=(Oe[Ge.approval_status]||0)+1}),Oe}),C=Oe=>{t.value=Oe},A=Oe=>{e.value=Oe},M=Oe=>{n.value=Oe,Oe.forEach(Ge=>{s.value.set(Ge.name,Ge)})},E=Oe=>{r.value=Oe},P=Oe=>{n.value.push(Oe),s.value.set(Oe.name,Oe)},I=Oe=>{r.value.push(Oe)},F=(Oe,Ge)=>{const Bt=n.value.findIndex(As=>As.name===Oe);Bt!==-1&&(n.value[Bt]=ge(ge({},n.value[Bt]),Ge),s.value.set(Oe,n.value[Bt]))},L=(Oe,Ge)=>{const Bt=r.value.findIndex(As=>As.name===Oe);Bt!==-1&&(r.value[Bt]=ge(ge({},r.value[Bt]),Ge))},z=Oe=>{n.value=n.value.filter(Ge=>Ge.name!==Oe),s.value.delete(Oe)},N=Oe=>{r.value=r.value.filter(Ge=>Ge.name!==Oe)},q=Oe=>s.value.get(Oe),V=Oe=>r.value.find(Ge=>Ge.name===Oe),O=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Audit Engagement",fields:["name","engagement_id","engagement_title","status","audit_type","period_start","period_end","creation","modified"],limit_page_length:1e3}}).fetch();E(Oe||[])}catch(Oe){console.error("Error fetching engagements:",Oe),E([])}}),X=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Audit Finding",fields:["name","finding_id","finding_title","risk_rating","creation","modified","engagement_reference"],limit_page_length:1e3}}).fetch();M(Oe||[])}catch(Oe){console.error("Error fetching findings:",Oe),M([])}}),j=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Annual Audit Plan",fields:["name","plan_id","plan_year","status","total_available_days","total_planned_days","utilization_percentage","creation","modified"],limit_page_length:1e3}}).fetch();i.value=Oe||[]}catch(Oe){console.error("Error fetching annual plans:",Oe),i.value=[]}}),U=Oe=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Annual Audit Plan",name:Oe}}).fetch()}catch(Ge){return console.error("Error fetching annual plan details:",Ge),null}}),G=Oe=>ue(void 0,null,function*(){try{const Ge=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Annual Audit Plan"},Oe)}}).fetch();return yield j(),Ge}catch(Ge){throw console.error("Error creating annual plan:",Ge),Ge}}),ee=(Oe,Ge)=>ue(void 0,null,function*(){try{const Bt=yield Ve({url:"frappe.client.set_value",params:{doctype:"Annual Audit Plan",name:Oe,fieldname:Ge}}).fetch();return yield j(),Bt}catch(Bt){throw console.error("Error updating annual plan:",Bt),Bt}}),ie=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Audit Program",fields:["name","program_id","program_name","audit_type","is_template","engagement_reference","total_procedures","completed_procedures","completion_percent","creation","modified"],limit_page_length:1e3}}).fetch();a.value=Oe||[]}catch(Oe){console.error("Error fetching audit programs:",Oe),a.value=[]}}),ne=Oe=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Audit Program",name:Oe}}).fetch()}catch(Ge){return console.error("Error fetching audit program details:",Ge),null}}),ce=Oe=>ue(void 0,null,function*(){try{const Ge=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Audit Program"},Oe)}}).fetch();return yield ie(),Ge}catch(Ge){throw console.error("Error creating audit program:",Ge),Ge}}),oe=(Oe,Ge)=>ue(void 0,null,function*(){try{const Bt=yield Ve({url:"frappe.client.set_value",params:{doctype:"Audit Program",name:Oe,fieldname:Ge}}).fetch();return yield ie(),Bt}catch(Bt){throw console.error("Error updating audit program:",Bt),Bt}}),re=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Audit Calendar",fields:["name","calendar_id","audit_universe","audit_type","status","planned_start_date","planned_end_date","actual_start_date","actual_end_date","lead_auditor","progress_percentage","creation","modified"],limit_page_length:1e3}}).fetch();o.value=Oe||[]}catch(Oe){console.error("Error fetching audit calendar:",Oe),o.value=[]}}),te=Oe=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Audit Calendar",name:Oe}}).fetch()}catch(Ge){return console.error("Error fetching audit calendar details:",Ge),null}}),K=Oe=>ue(void 0,null,function*(){try{const Ge=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Audit Calendar"},Oe)}}).fetch();return yield re(),Ge}catch(Ge){throw console.error("Error creating audit calendar entry:",Ge),Ge}}),le=(Oe,Ge)=>ue(void 0,null,function*(){try{const Bt=yield Ve({url:"frappe.client.set_value",params:{doctype:"Audit Calendar",name:Oe,fieldname:Ge}}).fetch();return yield re(),Bt}catch(Bt){throw console.error("Error updating audit calendar entry:",Bt),Bt}}),H=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Audit Procedure",fields:["name","procedure_id","procedure_name","procedure_type","risk_area","estimated_hours","status","program_reference","creation","modified"],limit_page_length:1e3}}).fetch();l.value=Oe||[]}catch(Oe){console.error("Error fetching audit procedures:",Oe),l.value=[]}}),Y=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Audit Universe",fields:["name","universe_id","auditable_entity","entity_type","department","location","process_owner","inherent_risk_rating","last_audit_date","next_scheduled_audit","is_active","creation","modified"],limit_page_length:1e3}}).fetch();d.value=Oe||[]}catch(Oe){console.error("Error fetching audit universe:",Oe),d.value=[]}}),B=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Risk Assessment",fields:["name","assessment_id","assessment_name","assessment_period","assessment_date","fiscal_year","status","prepared_by","approved_by","approval_date","creation","modified"],limit_page_length:1e3}}).fetch();c.value=Oe||[]}catch(Oe){console.error("Error fetching risk assessments:",Oe),c.value=[]}}),ae=Oe=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Risk Assessment",name:Oe}}).fetch()}catch(Ge){return console.error("Error fetching risk assessment details:",Ge),null}}),be=Oe=>ue(void 0,null,function*(){try{const Ge=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Risk Assessment"},Oe)}}).fetch();return yield B(),Ge}catch(Ge){throw console.error("Error creating risk assessment:",Ge),Ge}}),fe=(Oe,Ge)=>ue(void 0,null,function*(){try{const Bt=yield Ve({url:"frappe.client.set_value",params:{doctype:"Risk Assessment",name:Oe,fieldname:Ge}}).fetch();return yield B(),Bt}catch(Bt){throw console.error("Error updating risk assessment:",Bt),Bt}}),me=Q([]),ye=Q([]),Ee=Q([]),Re=Q([]),Ye=Q([]),Xe=Q([]),st=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Working Paper",fields:["name","working_paper_id","wp_title","wp_reference_no","wp_type","engagement_reference","procedure_reference","prepared_by","preparation_date","reviewed_by","review_date","review_status","work_performed","objective","scope","creation","modified"],limit_page_length:1e3}}).fetch();me.value=Oe||[]}catch(Oe){console.error("Error fetching working papers:",Oe),me.value=[]}}),it=Oe=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Working Paper",name:Oe}}).fetch()}catch(Ge){return console.error("Error fetching working paper details:",Ge),null}}),Fe=Oe=>ue(void 0,null,function*(){try{const Ge=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Working Paper"},Oe)}}).fetch();return yield st(),Ge}catch(Ge){throw console.error("Error creating working paper:",Ge),Ge}}),Pe=(Oe,Ge)=>ue(void 0,null,function*(){try{const Bt=yield Ve({url:"frappe.client.set_value",params:{doctype:"Working Paper",name:Oe,fieldname:Ge}}).fetch();return yield st(),Bt}catch(Bt){throw console.error("Error updating working paper:",Bt),Bt}}),je=Oe=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Audit Finding",name:Oe}}).fetch()}catch(Ge){return console.error("Error fetching finding details:",Ge),null}}),Ie=Oe=>ue(void 0,null,function*(){try{const Ge=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Audit Finding"},Oe)}}).fetch();return yield X(),Ge}catch(Ge){throw console.error("Error creating finding:",Ge),Ge}}),Se=(Oe,Ge)=>ue(void 0,null,function*(){try{const Bt=yield Ve({url:"frappe.client.set_value",params:{doctype:"Audit Finding",name:Oe,fieldname:Ge}}).fetch();return yield X(),Bt}catch(Bt){throw console.error("Error updating finding:",Bt),Bt}}),Ce=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Follow-up Tracker",fields:["name","tracker_id","audit_finding","finding_title","status","follow_up_type","start_date","next_due_date","frequency","responsible_person","responsible_department","last_follow_up_date","current_status","progress_rating","creation","modified"],limit_page_length:1e3}}).fetch();ye.value=Oe||[]}catch(Oe){console.error("Error fetching follow-up trackers:",Oe),ye.value=[]}}),Le=Oe=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Follow-up Tracker",name:Oe}}).fetch()}catch(Ge){return console.error("Error fetching follow-up tracker details:",Ge),null}}),Pt=Oe=>ue(void 0,null,function*(){try{const Ge=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Follow-up Tracker"},Oe)}}).fetch();return yield Ce(),Ge}catch(Ge){throw console.error("Error creating follow-up tracker:",Ge),Ge}}),$e=(Oe,Ge)=>ue(void 0,null,function*(){try{const Bt=yield Ve({url:"frappe.client.set_value",params:{doctype:"Follow-up Tracker",name:Oe,fieldname:Ge}}).fetch();return yield Ce(),Bt}catch(Bt){throw console.error("Error updating follow-up tracker:",Bt),Bt}}),Ae=()=>ue(void 0,null,function*(){try{const Oe=yield Ve({url:"frappe.client.get_list",params:{doctype:"Corrective Action Plan",fields:["name","plan_id","audit_finding","title","status","priority","start_date","target_completion_date","actual_completion_date","responsible_person","responsible_department","overall_progress","completion_percentage","creation","modified"],limit_page_length:1e3}}).fetch();Ee.value=Oe||[]}catch(Oe){console.error("Error fetching corrective action plans:",Oe),Ee.value=[]}});return{currentEngagement:t,auditPlan:e,findings:n,engagements:r,findingsCache:s,annualPlans:i,auditPrograms:a,auditCalendar:o,auditProcedures:l,auditUniverse:d,riskAssessments:c,workingPapers:me,followUpTrackers:ye,correctiveActionPlans:Ee,findingEvidence:Re,findingStatusChanges:Ye,followUpActivities:Xe,activeEngagements:f,criticalFindings:p,overdueFindings:h,findingsByStatus:m,activeAnnualPlans:g,plannedAudits:y,upcomingAudits:x,auditProgramTemplates:_,criticalRiskAssessments:k,highRiskAssessments:w,riskAssessmentByStatus:S,setCurrentEngagement:C,setAuditPlan:A,setFindings:M,setEngagements:E,addFinding:P,addEngagement:I,updateFinding:F,updateEngagement:L,removeFinding:z,removeEngagement:N,getFindingById:q,getEngagementById:V,fetchEngagements:O,fetchFindings:X,fetchFindingDetails:je,createFinding:Ie,updateFindingDetails:Se,fetchAnnualPlans:j,fetchAnnualPlanDetails:U,createAnnualPlan:G,updateAnnualPlan:ee,fetchAuditPrograms:ie,fetchAuditProgramDetails:ne,createAuditProgram:ce,updateAuditProgram:oe,createEngagement:Oe=>ue(void 0,null,function*(){try{const Ge=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Audit Engagement"},Oe)}}).fetch();return yield O(),Ge}catch(Ge){throw console.error("Error creating engagement:",Ge),Ge}}),fetchAuditCalendar:re,fetchAuditCalendarDetails:te,createAuditCalendarEntry:K,updateAuditCalendarEntry:le,fetchAuditProcedures:H,fetchAuditUniverse:Y,fetchRiskAssessments:B,fetchRiskAssessmentDetails:ae,createRiskAssessment:be,updateRiskAssessment:fe,fetchWorkingPapers:st,fetchWorkingPaperDetails:it,createWorkingPaper:Fe,updateWorkingPaper:Pe,fetchFollowUpTrackers:Ce,fetchFollowUpTrackerDetails:Le,createFollowUpTracker:Pt,updateFollowUpTracker:$e,fetchCorrectiveActionPlans:Ae,fetchCorrectiveActionPlanDetails:Oe=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Corrective Action Plan",name:Oe}}).fetch()}catch(Ge){return console.error("Error fetching corrective action plan details:",Ge),null}}),createCorrectiveActionPlan:Oe=>ue(void 0,null,function*(){try{const Ge=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Corrective Action Plan"},Oe)}}).fetch();return yield Ae(),Ge}catch(Ge){throw console.error("Error creating corrective action plan:",Ge),Ge}}),updateCorrectiveActionPlan:(Oe,Ge)=>ue(void 0,null,function*(){try{const Bt=yield Ve({url:"frappe.client.set_value",params:{doctype:"Corrective Action Plan",name:Oe,fieldname:Ge}}).fetch();return yield Ae(),Bt}catch(Bt){throw console.error("Error updating corrective action plan:",Bt),Bt}}),clearCache:()=>{s.value.clear(),n.value=[],r.value=[],i.value=[],a.value=[],o.value=[],l.value=[],d.value=[],c.value=[],me.value=[],ye.value=[],Ee.value=[],Re.value=[],Ye.value=[],Xe.value=[],t.value=null,e.value=null}}}),dat={class:"space-y-6"},cat={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},fat={class:"flex items-center space-x-3"},pat={class:"p-2 bg-blue-100 rounded-lg"},hat={class:"flex flex-wrap items-center gap-2"},mat={class:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm"},gat={class:"flex flex-wrap items-center justify-between gap-4"},vat={class:"flex items-center gap-3"},yat={class:"text-sm text-gray-600"},bat={class:"bg-white rounded-xl border border-gray-200 shadow-sm"},xat={class:"px-6 py-4 border-b border-gray-200"},_at={class:"flex items-center justify-between"},wat={class:"flex items-center space-x-2"},kat={key:0,class:"overflow-x-auto"},Sat={class:"min-w-full divide-y divide-gray-200"},Cat={class:"bg-gray-50"},Aat={class:"px-6 py-3 text-left w-10"},Tat=["checked"],$at={class:"flex items-center space-x-1"},Mat={class:"flex items-center space-x-1"},Eat={class:"bg-white divide-y divide-gray-200"},Dat={class:"px-6 py-4"},Rat=["checked","onChange"],Pat={class:"px-6 py-4 whitespace-nowrap"},Iat={class:"flex items-center"},Oat={class:"flex-shrink-0 h-10 w-10"},Lat={class:"h-10 w-10 rounded-lg bg-blue-500 flex items-center justify-center text-white font-bold text-sm"},Vat={class:"ml-4"},Nat={class:"text-sm font-semibold text-gray-900"},jat={class:"text-sm text-gray-500"},Fat={class:"px-6 py-4 whitespace-nowrap"},Bat={class:"text-sm font-medium text-gray-900"},zat={class:"px-6 py-4 whitespace-nowrap"},Uat={class:"px-6 py-4 whitespace-nowrap"},Hat={class:"flex items-center"},qat={class:"w-20 bg-gray-200 rounded-full h-2 mr-2"},Wat={class:"text-sm text-gray-600"},Gat={class:"px-6 py-4 whitespace-nowrap"},Yat={class:"flex items-center"},Kat={class:"text-sm font-medium text-gray-900"},Xat={class:"ml-2 w-12 bg-gray-200 rounded-full h-1.5"},Qat={class:"px-6 py-4 whitespace-nowrap"},Zat={class:"flex items-center space-x-2"},Jat={class:"text-sm font-medium text-gray-900"},eot={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},tot={class:"flex items-center space-x-1"},not={key:1,class:"p-6"},rot={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},sot={class:"flex items-start justify-between mb-4"},iot={class:"flex items-center space-x-3"},aot={class:"h-12 w-12 rounded-xl bg-blue-500 flex items-center justify-center text-white font-bold"},oot={class:"text-lg font-semibold text-gray-900 group-hover:text-blue-900"},lot={class:"text-sm text-gray-600"},uot={class:"space-y-3"},dot={class:"flex justify-between items-center mb-1"},cot={class:"text-sm font-medium"},fot={class:"w-full bg-gray-200 rounded-full h-2"},pot={class:"flex justify-between items-center"},hot={class:"text-sm font-medium"},mot={class:"flex justify-between items-center"},got={class:"text-sm font-medium"},vot={class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200"},yot={class:"flex items-center space-x-1"},bot={class:"text-xs text-gray-500"},xot={key:2,class:"p-6"},_ot={class:"relative"},wot={class:"flex-shrink-0 w-16 h-16 rounded-xl bg-blue-500 flex items-center justify-center text-white font-bold text-lg z-10"},kot={class:"ml-6 flex-1 bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow"},Sot={class:"flex items-start justify-between mb-3"},Cot={class:"text-lg font-semibold text-gray-900"},Aot={class:"text-sm text-gray-500"},Tot={class:"grid grid-cols-3 gap-4 mb-4"},$ot={class:"text-lg font-semibold text-gray-900"},Mot={class:"text-lg font-semibold text-gray-900"},Eot={class:"text-lg font-semibold text-gray-900"},Dot={class:"flex items-center justify-end space-x-2"},Rot={key:3,class:"px-6 py-20 text-center"},Pot={class:"mx-auto h-20 w-20 rounded-2xl bg-blue-50 border-2 border-blue-100 flex items-center justify-center mb-8 shadow-sm"},Iot={class:"max-w-md mx-auto"},Oot={class:"flex flex-col sm:flex-row justify-center gap-3"},Lot={key:4,class:"px-6 py-12 text-center"},Vot={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4"},Not=["onClick"],jot={class:"flex items-start space-x-3"},Fot={class:"p-2 bg-blue-100 rounded-lg"},Bot={class:"font-semibold text-gray-900"},zot={class:"text-sm text-gray-500 mt-1"},Uot={class:"p-6 space-y-4"},Hot={class:"text-gray-600"},qot={class:"grid grid-cols-2 gap-3"},Wot={class:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6"},Got={class:"md:col-span-2"},Yot={class:"bg-white border border-gray-200 rounded-lg p-6"},Kot={class:"space-y-4"},Xot={class:"w-32 text-sm text-gray-600"},Qot={class:"flex-1 mx-3"},Zot={class:"w-full bg-gray-100 rounded-full h-4"},Jot={class:"w-16 text-sm font-medium text-gray-900 text-right"},elt={class:"space-y-4"},tlt={class:"bg-blue-50 rounded-lg p-6"},nlt={class:"space-y-3 text-sm"},rlt={class:"flex justify-between"},slt={class:"font-medium text-blue-900"},ilt={class:"flex justify-between"},alt={class:"font-medium text-blue-900"},olt={class:"flex justify-between"},llt={class:"font-medium text-blue-900"},ult={class:"bg-amber-50 rounded-lg p-6"},dlt={class:"space-y-3 text-sm"},clt={class:"flex justify-between"},flt={class:"font-medium text-amber-900"},plt={class:"flex justify-between"},hlt={class:"font-medium text-amber-900"},mlt={__name:"AnnualPlan",setup(t){const e=_n(),n=qo(),r=Q(!1),s=Q(!1),i=Q(!1),a=Q(!1),o=Q(!1),l=Q(!1),d=Q(!0),c=Q(null),f=Q("create"),p=Q(""),h=Q(""),m=Q(""),g=Q(""),y=Q("table"),x=Q([]),_=Q("plan_year"),k=Q("desc"),w=Z(()=>n.annualPlans||[]),S=Z(()=>{const Y=w.value,B=Y.filter(it=>it.status==="Active").length,ae=Y.filter(it=>it.status==="Draft").length,be=Y.filter(it=>it.status==="Approved").length,fe=Y.filter(it=>it.status==="Completed").length,me=Y.reduce((it,Fe)=>{var Pe;return it+(((Pe=Fe.planned_audits)==null?void 0:Pe.length)||0)},0),ye=Y.reduce((it,Fe)=>it+(Fe.total_planned_days||0),0),Ee=Y.filter(it=>["Active","Approved"].includes(it.status)),Re=Ee.length>0?Math.round(Ee.reduce((it,Fe)=>it+(Fe.utilization_percentage||0),0)/Ee.length):0,Ye=new Date,Xe=new Date(Ye.getTime()+30*24*60*60*1e3);let st=0;return Y.forEach(it=>{(it.planned_audits||[]).forEach(Fe=>{if(Fe.planned_start_date){const Pe=new Date(Fe.planned_start_date);Pe>=Ye&&Pe<=Xe&&st++}})}),{total:Y.length,active:B,draft:ae,approved:be,completed:fe,plannedAudits:me,avgUtilization:Re,upcoming:st,totalDays:ye,byQuarter:{q1:0,q2:0,q3:0,q4:0}}}),C=Z(()=>{let Y=[...w.value];if(p.value){const B=p.value.toLowerCase();Y=Y.filter(ae=>{var be,fe,me;return((be=ae.plan_id)==null?void 0:be.toLowerCase().includes(B))||((fe=ae.status)==null?void 0:fe.toLowerCase().includes(B))||((me=ae.plan_objectives)==null?void 0:me.toLowerCase().includes(B))})}return h.value&&(Y=Y.filter(B=>B.status===h.value)),m.value&&(Y=Y.filter(B=>{var ae;return((ae=B.plan_year)==null?void 0:ae.toString())===m.value.toString()})),g.value&&(Y=Y.filter(B=>B.plan_period===g.value)),Y.sort((B,ae)=>{const be=B[_.value]||"",fe=ae[_.value]||"";return k.value==="asc"?be>fe?1:-1:be<fe?1:-1}),Y}),A=Z(()=>[{name:"Financial Audits",utilization:78},{name:"Operational Audits",utilization:65},{name:"Compliance Audits",utilization:82},{name:"IT Audits",utilization:45},{name:"Special Reviews",utilization:30}]),M=Z(()=>w.value.reduce((Y,B)=>Y+(B.total_available_days||0),0)||1e3),E=Z(()=>w.value.reduce((Y,B)=>Y+(B.total_planned_days||0),0)),P=[{id:"standard",name:"Standard Annual Plan",description:"Comprehensive annual audit plan template",icon:rr},{id:"financial",name:"Financial Focus",description:"Emphasis on financial audits and controls",icon:Ar},{id:"compliance",name:"Compliance-Driven",description:"Focus on regulatory compliance audits",icon:Ds},{id:"operational",name:"Operational Excellence",description:"Emphasis on operational efficiency audits",icon:Ol}],I=()=>ue(this,null,function*(){r.value=!0;try{yield Promise.all([n.fetchAnnualPlans(),n.fetchAuditUniverse()])}finally{r.value=!1}}),F=()=>{c.value=null,f.value="create",i.value=!0},L=Y=>ue(this,null,function*(){c.value=Y,f.value="edit",i.value=!0}),z=Y=>{e.push(`/audit-planning/annual-plan/${Y.name}`)},N=Y=>ue(this,null,function*(){try{const B=yield n.fetchAnnualPlanDetails(Y.name);B&&(c.value=ze(ge({},B),{plan_id:`${B.plan_id}_copy`,status:"Draft",name:null}),f.value="create",i.value=!0)}catch(B){console.error("Error duplicating plan:",B)}}),q=Y=>ue(this,null,function*(){if(confirm(`Are you sure you want to delete ${Y.plan_id}?`))try{yield n.deleteAnnualPlan(Y.name),yield I()}catch(B){console.error("Error deleting plan:",B)}}),V=()=>ue(this,null,function*(){i.value=!1,c.value=null,yield I()}),O=()=>{i.value=!1,c.value=null},X=Y=>{c.value={template:Y.id},f.value="create",a.value=!1,i.value=!0},j=Y=>({Draft:"subtle","Pending Approval":"warning",Approved:"success",Active:"info",Completed:"success",Cancelled:"subtle"})[Y]||"subtle",U=Y=>Math.min(Y.utilization_percentage||0,100),G=Y=>Y>=90?"bg-red-500":Y>=75?"bg-amber-500":Y>=50?"bg-green-500":"bg-blue-500",ee=Y=>Y?new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",ie=Y=>{const B=x.value.indexOf(Y);B>-1?x.value.splice(B,1):x.value.push(Y)},ne=()=>{x.value.length===C.value.length?x.value=[]:x.value=C.value.map(Y=>Y.name)},ce=Y=>{_.value===Y?k.value=k.value==="asc"?"desc":"asc":(_.value=Y,k.value="asc")},oe=()=>{p.value="",h.value="",m.value="",g.value="",x.value=[]},re=()=>ue(this,null,function*(){s.value=!0;try{console.log("Exporting plans...",x.value.length||C.value.length,"plans")}finally{s.value=!1}}),te=()=>{console.log("Bulk update status for:",x.value),o.value=!1},K=()=>{console.log("Bulk export for:",x.value),o.value=!1},le=()=>{console.log("Bulk duplicate for:",x.value),o.value=!1},H=()=>{confirm(`Are you sure you want to delete ${x.value.length} plan(s)?`)&&(console.log("Bulk delete for:",x.value),o.value=!1,x.value=[])};return yt(()=>ue(this,null,function*(){yield I()})),(Y,B)=>(T(),R("div",dat,[u("div",cat,[u("div",null,[u("div",fat,[u("div",pat,[b(v(rr),{class:"h-6 w-6 text-blue-600"})]),B[15]||(B[15]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Annual Audit Plan"),u("p",{class:"text-gray-600 mt-1"}," Create and manage comprehensive annual audit planning ")],-1))])]),u("div",hat,[b(v(J),{variant:"outline",size:"sm",onClick:re,loading:s.value},{prefix:D(()=>[b(v(xn),{class:"h-4 w-4"})]),default:D(()=>[B[16]||(B[16]=W(" Export ",-1))]),_:1},8,["loading"]),b(v(J),{variant:"outline",size:"sm",onClick:B[0]||(B[0]=ae=>a.value=!0)},{prefix:D(()=>[b(v(vt),{class:"h-4 w-4"})]),default:D(()=>[B[17]||(B[17]=W(" Templates ",-1))]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:B[1]||(B[1]=ae=>l.value=!0)},{prefix:D(()=>[b(v(hr),{class:"h-4 w-4"})]),default:D(()=>[B[18]||(B[18]=W(" Capacity ",-1))]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:I,loading:r.value},{prefix:D(()=>[b(v(mn),{class:"h-4 w-4"})]),default:D(()=>[B[19]||(B[19]=W(" Refresh ",-1))]),_:1},8,["loading"]),b(v(J),{variant:"solid",theme:"blue",size:"sm",onClick:F},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[B[20]||(B[20]=W(" New Plan ",-1))]),_:1})])]),b(uat,{stats:S.value,showDetails:d.value},null,8,["stats","showDetails"]),b($it,{searchQuery:p.value,"onUpdate:searchQuery":B[2]||(B[2]=ae=>p.value=ae),statusFilter:h.value,"onUpdate:statusFilter":B[3]||(B[3]=ae=>h.value=ae),yearFilter:m.value,"onUpdate:yearFilter":B[4]||(B[4]=ae=>m.value=ae),periodFilter:g.value,"onUpdate:periodFilter":B[5]||(B[5]=ae=>g.value=ae),viewMode:y.value,"onUpdate:viewMode":B[6]||(B[6]=ae=>y.value=ae)},null,8,["searchQuery","statusFilter","yearFilter","periodFilter","viewMode"]),u("div",mat,[u("div",gat,[u("div",vat,[B[21]||(B[21]=u("h3",{class:"text-sm font-semibold text-gray-900"},"Quick Actions",-1)),b(v(J),{variant:"outline",size:"sm",onClick:B[7]||(B[7]=ae=>o.value=!0),disabled:x.value.length===0},{prefix:D(()=>[b(v(Hc),{class:"h-4 w-4"})]),default:D(()=>[W(" Bulk Actions ("+$(x.value.length)+") ",1)]),_:1},8,["disabled"])]),u("div",yat," Showing "+$(C.value.length)+" of "+$(w.value.length)+" plans ",1)])]),u("div",bat,[u("div",xat,[u("div",_at,[B[22]||(B[22]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Annual Audit Plans",-1)),u("div",wat,[y.value==="table"&&C.value.length>0?(T(),he(v(J),{key:0,variant:"outline",size:"sm",onClick:ne},{default:D(()=>[W($(x.value.length===C.value.length?"Deselect All":"Select All"),1)]),_:1})):se("",!0)])])]),y.value==="table"?(T(),R("div",kat,[u("table",Sat,[u("thead",Cat,[u("tr",null,[u("th",Aat,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:x.value.length===C.value.length&&C.value.length>0,onChange:ne},null,40,Tat)]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:B[8]||(B[8]=ae=>ce("plan_id"))},[u("div",$at,[B[23]||(B[23]=u("span",null,"Plan ID",-1)),b(v(Zu),{class:"h-3 w-3"})])]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:B[9]||(B[9]=ae=>ce("plan_year"))},[u("div",Mat,[B[24]||(B[24]=u("span",null,"Year",-1)),b(v(Zu),{class:"h-3 w-3"})])]),B[25]||(B[25]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1)),B[26]||(B[26]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Progress",-1)),B[27]||(B[27]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilization",-1)),B[28]||(B[28]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Planned Audits",-1)),B[29]||(B[29]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions",-1))])]),u("tbody",Eat,[(T(!0),R(xe,null,_e(C.value,ae=>{var be;return T(),R("tr",{key:ae.name,class:pe(["hover:bg-gray-50 transition-colors",{"bg-blue-50":x.value.includes(ae.name)}])},[u("td",Dat,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:x.value.includes(ae.name),onChange:fe=>ie(ae.name)},null,40,Rat)]),u("td",Pat,[u("div",Iat,[u("div",Oat,[u("div",Lat,$(((be=ae.plan_year)==null?void 0:be.toString().slice(-2))||"NA"),1)]),u("div",Vat,[u("div",Nat,$(ae.plan_id),1),u("div",jat,$(ae.plan_period),1)])])]),u("td",Fat,[u("div",Bat,$(ae.plan_year),1)]),u("td",zat,[b(v(De),{variant:j(ae.status),size:"sm"},{default:D(()=>[W($(ae.status),1)]),_:2},1032,["variant"])]),u("td",Uat,[u("div",Hat,[u("div",qat,[u("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:rt({width:`${U(ae)}%`})},null,4)]),u("span",Wat,$(U(ae))+"%",1)])]),u("td",Gat,[u("div",Yat,[u("span",Kat,$(ae.utilization_percentage||0)+"%",1),u("div",Xat,[u("div",{class:pe(["h-1.5 rounded-full transition-all duration-300",G(ae.utilization_percentage||0)]),style:rt({width:`${Math.min(ae.utilization_percentage||0,100)}%`})},null,6)])])]),u("td",Qat,[u("div",Zat,[u("span",Jat,$((ae.planned_audits||[]).length),1),B[30]||(B[30]=u("span",{class:"text-xs text-gray-500"},"audits",-1))])]),u("td",eot,[u("div",tot,[b(v(J),{variant:"ghost",size:"sm",onClick:fe=>z(ae),class:"!p-1.5"},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:fe=>L(ae),class:"!p-1.5"},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:fe=>N(ae),class:"!p-1.5"},{default:D(()=>[b(v(Yi),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:fe=>q(ae),class:"!p-1.5 text-red-500 hover:text-red-700"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2)}),128))])])])):y.value==="cards"?(T(),R("div",not,[u("div",rot,[(T(!0),R(xe,null,_e(C.value,ae=>{var be;return T(),R("div",{key:ae.name,class:pe(["bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",{"ring-2 ring-blue-500 bg-blue-50":x.value.includes(ae.name)}])},[u("div",sot,[u("div",iot,[u("div",aot,$(((be=ae.plan_year)==null?void 0:be.toString().slice(-2))||"NA"),1),u("div",null,[u("h3",oot,$(ae.plan_id),1),u("p",lot,$(ae.plan_period)+" Plan",1)])]),b(v(De),{variant:j(ae.status),size:"sm"},{default:D(()=>[W($(ae.status),1)]),_:2},1032,["variant"])]),u("div",uot,[u("div",null,[u("div",dot,[B[31]||(B[31]=u("span",{class:"text-sm text-gray-600"},"Progress",-1)),u("span",cot,$(U(ae))+"%",1)]),u("div",fot,[u("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:rt({width:`${U(ae)}%`})},null,4)])]),u("div",pot,[B[32]||(B[32]=u("span",{class:"text-sm text-gray-600"},"Utilization",-1)),u("span",hot,$(ae.utilization_percentage||0)+"%",1)]),u("div",mot,[B[33]||(B[33]=u("span",{class:"text-sm text-gray-600"},"Planned Audits",-1)),u("span",got,$((ae.planned_audits||[]).length),1)])]),u("div",vot,[u("div",yot,[b(v(J),{variant:"ghost",size:"sm",onClick:ut(fe=>z(ae),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(fe=>L(ae),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(fe=>N(ae),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(Yi),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",bot,$(ee(ae.modified)),1)])],2)}),128))])])):y.value==="timeline"?(T(),R("div",xot,[u("div",_ot,[B[39]||(B[39]=u("div",{class:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200"},null,-1)),(T(!0),R(xe,null,_e(C.value,(ae,be)=>{var fe;return T(),R("div",{key:ae.name,class:"relative flex items-start mb-8 last:mb-0"},[u("div",wot,$(((fe=ae.plan_year)==null?void 0:fe.toString().slice(-2))||"NA"),1),u("div",kot,[u("div",Sot,[u("div",null,[u("h3",Cot,$(ae.plan_id),1),u("p",Aot,$(ae.plan_period)+"  "+$(ae.plan_year),1)]),b(v(De),{variant:j(ae.status),size:"sm"},{default:D(()=>[W($(ae.status),1)]),_:2},1032,["variant"])]),u("div",Tot,[u("div",null,[B[34]||(B[34]=u("p",{class:"text-xs text-gray-500"},"Planned Audits",-1)),u("p",$ot,$((ae.planned_audits||[]).length),1)]),u("div",null,[B[35]||(B[35]=u("p",{class:"text-xs text-gray-500"},"Utilization",-1)),u("p",Mot,$(ae.utilization_percentage||0)+"%",1)]),u("div",null,[B[36]||(B[36]=u("p",{class:"text-xs text-gray-500"},"Days Planned",-1)),u("p",Eot,$(ae.total_planned_days||0),1)])]),u("div",Dot,[b(v(J),{variant:"outline",size:"sm",onClick:me=>z(ae)},{default:D(()=>[...B[37]||(B[37]=[W("View",-1)])]),_:1},8,["onClick"]),b(v(J),{variant:"outline",size:"sm",onClick:me=>L(ae)},{default:D(()=>[...B[38]||(B[38]=[W("Edit",-1)])]),_:1},8,["onClick"])])])])}),128))])])):se("",!0),C.value.length===0&&w.value.length===0?(T(),R("div",Rot,[u("div",Pot,[b(v(rr),{class:"h-10 w-10 text-blue-500"})]),u("div",Iot,[B[42]||(B[42]=u("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Welcome to Annual Planning",-1)),B[43]||(B[43]=u("p",{class:"text-gray-600 mb-8 leading-relaxed"}," Create comprehensive annual audit plans. Set up your audit universe, allocate resources, and track planned activities. ",-1)),u("div",Oot,[b(v(J),{variant:"solid",theme:"blue",size:"lg",onClick:F},{prefix:D(()=>[b(v(nt),{class:"h-5 w-5"})]),default:D(()=>[B[40]||(B[40]=W(" Create Your First Plan ",-1))]),_:1}),b(v(J),{variant:"outline",size:"lg",onClick:B[10]||(B[10]=ae=>a.value=!0)},{prefix:D(()=>[b(v(vt),{class:"h-5 w-5"})]),default:D(()=>[B[41]||(B[41]=W(" Browse Templates ",-1))]),_:1})])])])):C.value.length===0?(T(),R("div",Lot,[b(v(En),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),B[45]||(B[45]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No plans found",-1)),B[46]||(B[46]=u("p",{class:"text-gray-600 mb-6"}," Try adjusting your search or filter criteria. ",-1)),b(v(J),{variant:"outline",onClick:oe},{default:D(()=>[...B[44]||(B[44]=[W("Clear Filters",-1)])]),_:1})])):se("",!0)]),b(hit,{show:i.value,"onUpdate:show":B[11]||(B[11]=ae=>i.value=ae),plan:c.value,mode:f.value,onSaved:V,onClose:O},null,8,["show","plan","mode"]),b(v(jt),{modelValue:a.value,"onUpdate:modelValue":B[12]||(B[12]=ae=>a.value=ae),options:{title:"Plan Templates",size:"lg"}},{body:D(()=>[u("div",Vot,[(T(),R(xe,null,_e(P,ae=>u("div",{key:ae.id,class:"border border-gray-200 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition-all",onClick:be=>X(ae)},[u("div",jot,[u("div",Fot,[(T(),he(At(ae.icon),{class:"h-5 w-5 text-blue-600"}))]),u("div",null,[u("h4",Bot,$(ae.name),1),u("p",zot,$(ae.description),1)])])],8,Not)),64))])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:o.value,"onUpdate:modelValue":B[13]||(B[13]=ae=>o.value=ae),options:{title:"Bulk Actions",size:"md"}},{body:D(()=>[u("div",Uot,[u("p",Hot,$(x.value.length)+" plan(s) selected",1),u("div",qot,[b(v(J),{variant:"outline",onClick:te},{prefix:D(()=>[b(v(mn),{class:"h-4 w-4"})]),default:D(()=>[B[47]||(B[47]=W(" Update Status ",-1))]),_:1}),b(v(J),{variant:"outline",onClick:K},{prefix:D(()=>[b(v(xn),{class:"h-4 w-4"})]),default:D(()=>[B[48]||(B[48]=W(" Export Selected ",-1))]),_:1}),b(v(J),{variant:"outline",onClick:le},{prefix:D(()=>[b(v(Yi),{class:"h-4 w-4"})]),default:D(()=>[B[49]||(B[49]=W(" Duplicate ",-1))]),_:1}),b(v(J),{variant:"outline",theme:"red",onClick:H},{prefix:D(()=>[b(v(es),{class:"h-4 w-4"})]),default:D(()=>[B[50]||(B[50]=W(" Delete Selected ",-1))]),_:1})])])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:l.value,"onUpdate:modelValue":B[14]||(B[14]=ae=>l.value=ae),options:{title:"Capacity Planning",size:"xl"}},{body:D(()=>[u("div",Wot,[u("div",Got,[u("div",Yot,[B[51]||(B[51]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resource Allocation Overview",-1)),u("div",Kot,[(T(!0),R(xe,null,_e(A.value,ae=>(T(),R("div",{key:ae.name,class:"flex items-center"},[u("div",Xot,$(ae.name),1),u("div",Qot,[u("div",Zot,[u("div",{class:pe(["h-4 rounded-full transition-all duration-300",ae.utilization>90?"bg-red-500":ae.utilization>75?"bg-amber-500":"bg-green-500"]),style:rt({width:`${ae.utilization}%`})},null,6)])]),u("div",Jot,$(ae.utilization)+"%",1)]))),128))])])]),u("div",elt,[u("div",tlt,[B[55]||(B[55]=u("h3",{class:"text-lg font-semibold text-blue-900 mb-4"},"Summary",-1)),u("div",nlt,[u("div",rlt,[B[52]||(B[52]=u("span",{class:"text-blue-700"},"Total Capacity",-1)),u("span",slt,$(M.value)+" days",1)]),u("div",ilt,[B[53]||(B[53]=u("span",{class:"text-blue-700"},"Allocated",-1)),u("span",alt,$(E.value)+" days",1)]),u("div",olt,[B[54]||(B[54]=u("span",{class:"text-blue-700"},"Available",-1)),u("span",llt,$(M.value-E.value)+" days",1)])])]),u("div",ult,[B[58]||(B[58]=u("h3",{class:"text-lg font-semibold text-amber-900 mb-4"},"Insights",-1)),u("div",dlt,[u("div",clt,[B[56]||(B[56]=u("span",{class:"text-amber-700"},"Active Plans",-1)),u("span",flt,$(S.value.active),1)]),u("div",plt,[B[57]||(B[57]=u("span",{class:"text-amber-700"},"Upcoming Audits",-1)),u("span",hlt,$(S.value.upcoming),1)])])])])])]),_:1},8,["modelValue"])]))}},glt={class:"space-y-6"},vlt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ylt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},blt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xlt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},_lt={class:"space-y-4"},wlt={__name:"AuditCalendarForm",props:{form:{type:Object,required:!0},universeOptions:{type:Array,required:!0},auditTypeOptions:{type:Array,required:!0},statusOptions:{type:Array,required:!0},planOptions:{type:Array,required:!0}},setup(t){return(e,n)=>(T(),R("div",glt,[u("div",vlt,[b(v(ve),{modelValue:t.form.calendar_id,"onUpdate:modelValue":n[0]||(n[0]=r=>t.form.calendar_id=r),label:"Calendar ID",placeholder:"Enter calendar ID",required:!0},null,8,["modelValue"]),b(v(Qe),{modelValue:t.form.audit_universe,"onUpdate:modelValue":n[1]||(n[1]=r=>t.form.audit_universe=r),options:t.universeOptions,label:"Audit Universe",placeholder:"Select universe",required:!0},null,8,["modelValue","options"])]),u("div",ylt,[b(v(Qe),{modelValue:t.form.audit_type,"onUpdate:modelValue":n[2]||(n[2]=r=>t.form.audit_type=r),options:t.auditTypeOptions,label:"Audit Type",placeholder:"Select type",required:!0},null,8,["modelValue","options"]),b(v(Qe),{modelValue:t.form.status,"onUpdate:modelValue":n[3]||(n[3]=r=>t.form.status=r),options:t.statusOptions,label:"Status",placeholder:"Select status"},null,8,["modelValue","options"]),b(v(Qe),{modelValue:t.form.annual_audit_plan,"onUpdate:modelValue":n[4]||(n[4]=r=>t.form.annual_audit_plan=r),options:t.planOptions,label:"Annual Audit Plan",placeholder:"Select plan"},null,8,["modelValue","options"])]),u("div",blt,[b(v(ve),{modelValue:t.form.planned_start_date,"onUpdate:modelValue":n[5]||(n[5]=r=>t.form.planned_start_date=r),type:"date",label:"Planned Start Date",required:!0},null,8,["modelValue"]),b(v(ve),{modelValue:t.form.planned_end_date,"onUpdate:modelValue":n[6]||(n[6]=r=>t.form.planned_end_date=r),type:"date",label:"Planned End Date",required:!0},null,8,["modelValue"])]),u("div",xlt,[b(v(ve),{modelValue:t.form.lead_auditor,"onUpdate:modelValue":n[7]||(n[7]=r=>t.form.lead_auditor=r),label:"Lead Auditor",placeholder:"Select lead auditor",required:!0},null,8,["modelValue"]),b(v(ve),{modelValue:t.form.estimated_days,"onUpdate:modelValue":n[8]||(n[8]=r=>t.form.estimated_days=r),type:"number",label:"Estimated Days",placeholder:"0"},null,8,["modelValue"]),b(v(ve),{modelValue:t.form.progress_percentage,"onUpdate:modelValue":n[9]||(n[9]=r=>t.form.progress_percentage=r),type:"number",label:"Progress %",placeholder:"0",min:"0",max:"100"},null,8,["modelValue"])]),u("div",_lt,[b(v(ve),{modelValue:t.form.objectives,"onUpdate:modelValue":n[10]||(n[10]=r=>t.form.objectives=r),type:"textarea",label:"Objectives",placeholder:"Enter audit objectives",rows:"3"},null,8,["modelValue"]),b(v(ve),{modelValue:t.form.scope,"onUpdate:modelValue":n[11]||(n[11]=r=>t.form.scope=r),type:"textarea",label:"Scope",placeholder:"Define audit scope",rows:"3"},null,8,["modelValue"]),b(v(ve),{modelValue:t.form.key_risks,"onUpdate:modelValue":n[12]||(n[12]=r=>t.form.key_risks=r),type:"textarea",label:"Key Risks",placeholder:"Identify key risks",rows:"3"},null,8,["modelValue"])])]))}},klt={class:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm"},Slt={class:"flex flex-wrap items-center justify-between gap-4"},Clt={class:"flex flex-wrap items-center gap-4"},Alt={class:"flex items-center space-x-2"},Tlt={class:"relative"},$lt={class:"flex items-center space-x-2"},Mlt={class:"p-1"},Elt={class:"p-1"},Dlt={class:"p-1"},Rlt={class:"flex items-center space-x-2 text-sm text-gray-600"},Plt={__name:"CalendarFilters",props:{filters:{type:Object,required:!0,validator:t=>typeof t=="object"&&typeof t.searchQuery=="string"&&typeof t.statusFilter=="string"&&typeof t.typeFilter=="string"&&typeof t.universeFilter=="string"},statusOptions:{type:Array,required:!0},auditTypeOptions:{type:Array,required:!0},universeOptions:{type:Array,required:!0},selectedCount:{type:Number,default:0},filteredCount:{type:Number,required:!0},totalCount:{type:Number,required:!0},viewMode:{type:String,required:!0,validator:t=>["calendar","list"].includes(t)}},emits:["update:filters","bulk-actions","capacity-planning","toggle-view"],setup(t,{emit:e}){const n=t,r=e,s=Q({searchQuery:"",statusFilter:"",typeFilter:"",universeFilter:""});et(()=>n.filters,a=>{s.value=ge({},a)},{immediate:!0,deep:!0});const i=()=>{r("update:filters",ge({},s.value))};return(a,o)=>(T(),R("div",klt,[u("div",Slt,[u("div",Clt,[o[7]||(o[7]=u("h3",{class:"text-sm font-semibold text-gray-900"},"Quick Actions",-1)),u("div",Alt,[u("div",Tlt,[b(v(En),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),we(u("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>s.value.searchQuery=l),type:"text",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm w-48",placeholder:"Search audits...",onInput:i},null,544),[[Rt,s.value.searchQuery]])]),b(v(Qe),{modelValue:s.value.statusFilter,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value.statusFilter=l),options:[{label:"All Status",value:""},...t.statusOptions],class:"min-w-36",onChange:i},null,8,["modelValue","options"]),b(v(Qe),{modelValue:s.value.typeFilter,"onUpdate:modelValue":o[2]||(o[2]=l=>s.value.typeFilter=l),options:[{label:"All Types",value:""},...t.auditTypeOptions],class:"min-w-32",onChange:i},null,8,["modelValue","options"]),b(v(Qe),{modelValue:s.value.universeFilter,"onUpdate:modelValue":o[3]||(o[3]=l=>s.value.universeFilter=l),options:[{label:"All Universes",value:""},...t.universeOptions],class:"min-w-40",onChange:i},null,8,["modelValue","options"])])]),u("div",$lt,[u("div",Mlt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:o[4]||(o[4]=l=>a.$emit("bulk-actions")),disabled:t.selectedCount===0},{prefix:D(()=>[b(v(Hc),{class:"h-3.5 w-3.5"})]),default:D(()=>[W(" Bulk Actions ("+$(t.selectedCount)+") ",1)]),_:1},8,["disabled"])]),u("div",Elt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:o[5]||(o[5]=l=>a.$emit("capacity-planning"))},{prefix:D(()=>[b(v(hr),{class:"h-3.5 w-3.5"})]),default:D(()=>[o[8]||(o[8]=W(" Capacity Planning ",-1))]),_:1})]),u("div",Dlt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:o[6]||(o[6]=l=>a.$emit("toggle-view"))},{prefix:D(()=>[(T(),he(At(t.viewMode==="calendar"?"TableIcon":"CalendarIcon"),{class:"h-3.5 w-3.5"}))]),default:D(()=>[W(" "+$(t.viewMode==="calendar"?"List View":"Calendar View"),1)]),_:1})])]),u("div",Rlt,[u("span",null,"Showing "+$(t.filteredCount)+" of "+$(t.totalCount)+" audits",1)])])]))}},Ilt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4"},Olt={class:"bg-blue-50 rounded-xl border border-blue-200 p-6 hover:shadow-lg transition-shadow"},Llt={class:"flex items-center justify-between"},Vlt={class:"text-3xl font-bold text-blue-900 mt-1"},Nlt={class:"text-xs text-blue-600 mt-1"},jlt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},Flt={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-6 hover:shadow-lg transition-shadow"},Blt={class:"flex items-center justify-between"},zlt={class:"text-3xl font-bold text-yellow-900 mt-1"},Ult={class:"p-3 bg-yellow-500 rounded-xl shadow-sm"},Hlt={class:"bg-green-50 rounded-xl border border-green-200 p-6 hover:shadow-lg transition-shadow"},qlt={class:"flex items-center justify-between"},Wlt={class:"text-3xl font-bold text-green-900 mt-1"},Glt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},Ylt={class:"bg-purple-50 rounded-xl border border-purple-200 p-6 hover:shadow-lg transition-shadow"},Klt={class:"flex items-center justify-between"},Xlt={class:"text-3xl font-bold text-purple-900 mt-1"},Qlt={class:"w-full bg-purple-200 rounded-full h-2 mt-2"},Zlt={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},Jlt={class:"bg-red-50 rounded-xl border border-red-200 p-6 hover:shadow-lg transition-shadow"},eut={class:"flex items-center justify-between"},tut={class:"text-3xl font-bold text-red-900 mt-1"},nut={class:"p-3 bg-red-500 rounded-xl shadow-sm"},rut={__name:"CalendarStats",props:{stats:{type:Object,required:!0,validator:t=>typeof t=="object"&&typeof t.totalScheduled=="number"&&typeof t.inProgress=="number"&&typeof t.upcoming=="number"&&typeof t.averageProgress=="number"&&typeof t.overdue=="number"&&typeof t.totalCapacity=="number"}},setup(t){return(e,n)=>(T(),R("div",Ilt,[u("div",Olt,[u("div",Llt,[u("div",null,[n[0]||(n[0]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Total Scheduled",-1)),u("p",Vlt,$(t.stats.totalScheduled),1),u("p",Nlt,$((t.stats.totalScheduled/Math.max(t.stats.totalCapacity,1)*100).toFixed(0))+"% of capacity",1)]),u("div",jlt,[b(v(rr),{class:"h-7 w-7 text-white"})])])]),u("div",Flt,[u("div",Blt,[u("div",null,[n[1]||(n[1]=u("p",{class:"text-sm font-semibold text-yellow-700 uppercase tracking-wide"},"In Progress",-1)),u("p",zlt,$(t.stats.inProgress),1),n[2]||(n[2]=u("p",{class:"text-xs text-yellow-600 mt-1"},"Active audits",-1))]),u("div",Ult,[b(v(Ll),{class:"h-7 w-7 text-white"})])])]),u("div",Hlt,[u("div",qlt,[u("div",null,[n[3]||(n[3]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Upcoming",-1)),u("p",Wlt,$(t.stats.upcoming),1),n[4]||(n[4]=u("p",{class:"text-xs text-green-600 mt-1"},"Next 30 days",-1))]),u("div",Glt,[b(v(Ns),{class:"h-7 w-7 text-white"})])])]),u("div",Ylt,[u("div",Klt,[u("div",null,[n[5]||(n[5]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Avg. Progress",-1)),u("p",Xlt,$(t.stats.averageProgress)+"%",1),u("div",Qlt,[u("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${Math.min(t.stats.averageProgress,100)}%`})},null,4)])]),u("div",Zlt,[b(v(sb),{class:"h-7 w-7 text-white"})])])]),u("div",Jlt,[u("div",eut,[u("div",null,[n[6]||(n[6]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Overdue",-1)),u("p",tut,$(t.stats.overdue),1),n[7]||(n[7]=u("p",{class:"text-xs text-red-600 mt-1"},"Need attention",-1))]),u("div",nut,[b(v(rn),{class:"h-7 w-7 text-white"})])])])]))}},goe=6048e5,sut=864e5,YH=Symbol.for("constructDateFrom");function wa(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&YH in t?t[YH](e):t instanceof Date?new t.constructor(e):new Date(e)}function Oi(t,e){return wa(e||t,t)}function voe(t,e,n){const r=Oi(t,n==null?void 0:n.in);if(isNaN(e))return wa(t,NaN);if(!e)return r;const s=r.getDate(),i=wa(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}let iut={};function Wb(){return iut}function Ag(t,e){var o,l,d,c,f,p,h,m;const n=Wb(),r=(m=(h=(c=(d=e==null?void 0:e.weekStartsOn)!=null?d:(l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)!=null?c:n.weekStartsOn)!=null?h:(p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)!=null?m:0,s=Oi(t,e==null?void 0:e.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function fS(t,e){return Ag(t,ze(ge({},e),{weekStartsOn:1}))}function yoe(t,e){const n=Oi(t,e==null?void 0:e.in),r=n.getFullYear(),s=wa(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=fS(s),a=wa(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=fS(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function KH(t){const e=Oi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function AA(t,...e){const n=wa.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function pS(t,e){const n=Oi(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function aut(t,e,n){const[r,s]=AA(n==null?void 0:n.in,t,e),i=pS(r),a=pS(s),o=+i-KH(i),l=+a-KH(a);return Math.round((o-l)/sut)}function out(t,e){const n=yoe(t,e),r=wa(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),fS(r)}function lut(t){return wa(t,Date.now())}function bD(t,e,n){const[r,s]=AA(n==null?void 0:n.in,t,e);return+pS(r)==+pS(s)}function uut(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function dut(t){return!(!uut(t)&&typeof t!="number"||isNaN(+Oi(t)))}function cut(t,e){const n=Oi(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function fut(t,e){const[n,r]=AA(t,e.start,e.end);return{start:n,end:r}}function put(t,e){const{start:n,end:r}=fut(e==null?void 0:e.in,t);let s=+n>+r;const i=s?+n:+r,a=s?r:n;a.setHours(0,0,0,0);let o=1;const l=[];for(;+a<=i;)l.push(wa(n,a)),a.setDate(a.getDate()+o),a.setHours(0,0,0,0);return s?l.reverse():l}function hut(t,e){const n=Oi(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function mut(t,e){const n=Oi(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function gut(t,e){var o,l,d,c;const n=Wb(),r=(c=(d=n.weekStartsOn)!=null?d:(l=(o=n.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)!=null?c:0,s=Oi(t,e==null?void 0:e.in),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}const vut={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yut=(t,e,n)=>{let r;const s=vut[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function T5(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const but={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xut={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_ut={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wut={date:T5({formats:but,defaultWidth:"full"}),time:T5({formats:xut,defaultWidth:"full"}),dateTime:T5({formats:_ut,defaultWidth:"full"})},kut={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Sut=(t,e,n,r)=>kut[t];function ey(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Cut={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Aut={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Tut={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$ut={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mut={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Eut={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dut=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Rut={ordinalNumber:Dut,era:ey({values:Cut,defaultWidth:"wide"}),quarter:ey({values:Aut,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ey({values:Tut,defaultWidth:"wide"}),day:ey({values:$ut,defaultWidth:"wide"}),dayPeriod:ey({values:Mut,defaultWidth:"wide",formattingValues:Eut,defaultFormattingWidth:"wide"})};function ty(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?Iut(o,f=>f.test(a)):Put(o,f=>f.test(a));let d;d=t.valueCallback?t.valueCallback(l):l,d=n.valueCallback?n.valueCallback(d):d;const c=e.slice(a.length);return{value:d,rest:c}}}function Put(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Iut(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Out(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const Lut=/^(\d+)(th|st|nd|rd)?/i,Vut=/\d+/i,Nut={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jut={any:[/^b/i,/^(a|c)/i]},Fut={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},But={any:[/1/i,/2/i,/3/i,/4/i]},zut={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Uut={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Hut={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qut={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Wut={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gut={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Yut={ordinalNumber:Out({matchPattern:Lut,parsePattern:Vut,valueCallback:t=>parseInt(t,10)}),era:ty({matchPatterns:Nut,defaultMatchWidth:"wide",parsePatterns:jut,defaultParseWidth:"any"}),quarter:ty({matchPatterns:Fut,defaultMatchWidth:"wide",parsePatterns:But,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ty({matchPatterns:zut,defaultMatchWidth:"wide",parsePatterns:Uut,defaultParseWidth:"any"}),day:ty({matchPatterns:Hut,defaultMatchWidth:"wide",parsePatterns:qut,defaultParseWidth:"any"}),dayPeriod:ty({matchPatterns:Wut,defaultMatchWidth:"any",parsePatterns:Gut,defaultParseWidth:"any"})},Kut={code:"en-US",formatDistance:yut,formatLong:wut,formatRelative:Sut,localize:Rut,match:Yut,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Xut(t,e){const n=Oi(t,e==null?void 0:e.in);return aut(n,mut(n))+1}function Qut(t,e){const n=Oi(t,e==null?void 0:e.in),r=+fS(n)-+out(n);return Math.round(r/goe)+1}function boe(t,e){var c,f,p,h,m,g,y,x;const n=Oi(t,e==null?void 0:e.in),r=n.getFullYear(),s=Wb(),i=(x=(y=(h=(p=e==null?void 0:e.firstWeekContainsDate)!=null?p:(f=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)!=null?h:s.firstWeekContainsDate)!=null?y:(g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)!=null?x:1,a=wa((e==null?void 0:e.in)||t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=Ag(a,e),l=wa((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const d=Ag(l,e);return+n>=+o?r+1:+n>=+d?r:r-1}function Zut(t,e){var o,l,d,c,f,p,h,m;const n=Wb(),r=(m=(h=(c=(d=e==null?void 0:e.firstWeekContainsDate)!=null?d:(l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)!=null?c:n.firstWeekContainsDate)!=null?h:(p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)!=null?m:1,s=boe(t,e),i=wa((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Ag(i,e)}function Jut(t,e){const n=Oi(t,e==null?void 0:e.in),r=+Ag(n,e)-+Zut(n,e);return Math.round(r/goe)+1}function qn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Id={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return qn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):qn(n+1,2)},d(t,e){return qn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return qn(t.getHours()%12||12,e.length)},H(t,e){return qn(t.getHours(),e.length)},m(t,e){return qn(t.getMinutes(),e.length)},s(t,e){return qn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return qn(s,e.length)}},om={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},XH={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Id.y(t,e)},Y:function(t,e,n,r){const s=boe(t,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return qn(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):qn(i,e.length)},R:function(t,e){const n=yoe(t);return qn(n,e.length)},u:function(t,e){const n=t.getFullYear();return qn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return qn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return qn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Id.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return qn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Jut(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):qn(s,e.length)},I:function(t,e,n){const r=Qut(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):qn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Id.d(t,e)},D:function(t,e,n){const r=Xut(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):qn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return qn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return qn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return qn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=om.noon:r===0?s=om.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=om.evening:r>=12?s=om.afternoon:r>=4?s=om.morning:s=om.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Id.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Id.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):qn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):qn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Id.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Id.s(t,e)},S:function(t,e){return Id.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ZH(r);case"XXXX":case"XX":return zf(r);case"XXXXX":case"XXX":default:return zf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return ZH(r);case"xxxx":case"xx":return zf(r);case"xxxxx":case"xxx":default:return zf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+QH(r,":");case"OOOO":default:return"GMT"+zf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+QH(r,":");case"zzzz":default:return"GMT"+zf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return qn(r,e.length)},T:function(t,e,n){return qn(+t,e.length)}};function QH(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+qn(i,2)}function ZH(t,e){return t%60===0?(t>0?"-":"+")+qn(Math.abs(t)/60,2):zf(t,e)}function zf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=qn(Math.trunc(r/60),2),i=qn(r%60,2);return n+s+e+i}const JH=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},xoe=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},edt=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return JH(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",JH(r,e)).replace("{{time}}",xoe(s,e))},tdt={p:xoe,P:edt},ndt=/^D+$/,rdt=/^Y+$/,sdt=["D","DD","YY","YYYY"];function idt(t){return ndt.test(t)}function adt(t){return rdt.test(t)}function odt(t,e,n){const r=ldt(t,e,n);if(console.warn(r),sdt.includes(t))throw new RangeError(r)}function ldt(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const udt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ddt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cdt=/^'([^]*?)'?$/,fdt=/''/g,pdt=/[a-zA-Z]/;function eq(t,e,n){var c,f,p,h,m,g,y,x,_,k,w,S,C,A,M,E,P,I;const r=Wb(),s=(f=(c=n==null?void 0:n.locale)!=null?c:r.locale)!=null?f:Kut,i=(k=(_=(g=(m=n==null?void 0:n.firstWeekContainsDate)!=null?m:(h=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)!=null?g:r.firstWeekContainsDate)!=null?_:(x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)!=null?k:1,a=(I=(P=(A=(C=n==null?void 0:n.weekStartsOn)!=null?C:(S=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:S.weekStartsOn)!=null?A:r.weekStartsOn)!=null?P:(E=(M=r.locale)==null?void 0:M.options)==null?void 0:E.weekStartsOn)!=null?I:0,o=Oi(t,n==null?void 0:n.in);if(!dut(o))throw new RangeError("Invalid time value");let l=e.match(ddt).map(F=>{const L=F[0];if(L==="p"||L==="P"){const z=tdt[L];return z(F,s.formatLong)}return F}).join("").match(udt).map(F=>{if(F==="''")return{isToken:!1,value:"'"};const L=F[0];if(L==="'")return{isToken:!1,value:hdt(F)};if(XH[L])return{isToken:!0,value:F};if(L.match(pdt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return{isToken:!1,value:F}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(F=>{if(!F.isToken)return F.value;const L=F.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&adt(L)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&idt(L))&&odt(L,e,String(t));const z=XH[L[0]];return z(o,L,s.localize,d)}).join("")}function hdt(t){const e=t.match(cdt);return e?e[1].replace(fdt,"'"):t}function z_(t,e,n){const[r,s]=AA(n==null?void 0:n.in,t,e);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function tq(t,e){return bD(wa(t,t),lut(t))}function mdt(t,e,n){return voe(t,-1,n)}const gdt={class:"space-y-6"},vdt={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},ydt={class:"flex items-center space-x-3"},bdt={class:"p-2 bg-blue-100 rounded-lg"},xdt={class:"flex flex-wrap items-center gap-3"},_dt={class:"flex items-center space-x-2"},wdt={class:"p-1"},kdt={class:"p-1"},Sdt={class:"p-1"},Cdt={class:"p-1"},Adt={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},Tdt={key:0,class:"p-6"},$dt={class:"flex items-center justify-between mb-6"},Mdt={class:"flex items-center space-x-4"},Edt={class:"text-xl font-semibold text-gray-900"},Ddt={class:"grid grid-cols-7 gap-1 mb-4"},Rdt={class:"grid grid-cols-7 gap-1"},Pdt=["onClick"],Idt={class:"flex justify-between items-start mb-2"},Odt={key:0,class:"text-xs text-gray-500"},Ldt={class:"space-y-1"},Vdt=["onClick"],Ndt={key:0,class:"text-xs text-gray-500 text-center"},jdt={key:1,class:"overflow-hidden"},Fdt={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},Bdt={class:"flex items-center justify-between"},zdt={class:"flex items-center space-x-3"},Udt={class:"text-sm font-medium text-gray-700"},Hdt={class:"flex items-center space-x-2"},qdt={class:"overflow-x-auto"},Wdt={class:"min-w-full divide-y divide-gray-200"},Gdt={class:"bg-gray-50"},Ydt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Kdt={class:"bg-white divide-y divide-gray-200"},Xdt={class:"px-6 py-4 whitespace-nowrap"},Qdt={class:"px-6 py-4 whitespace-nowrap"},Zdt={class:"flex items-center"},Jdt={class:"flex-shrink-0 h-10 w-10"},ect={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},tct={class:"ml-4"},nct={class:"text-sm font-medium text-gray-900"},rct={class:"text-sm text-gray-500"},sct={class:"px-6 py-4 whitespace-nowrap"},ict={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},act={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},oct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lct={class:"px-6 py-4 whitespace-nowrap"},uct={class:"flex items-center"},dct={class:"w-16 bg-gray-200 rounded-full h-2 mr-2"},cct={class:"text-sm text-gray-600"},fct={class:"px-6 py-4 whitespace-nowrap"},pct={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},hct={class:"flex items-center space-x-2"},mct={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},gct={class:"flex items-center justify-between"},vct={class:"text-sm text-gray-700"},yct={class:"flex items-center space-x-2"},bct={class:"text-sm text-gray-700"},xct={key:0,class:"text-center py-12 bg-white rounded-xl border border-gray-200"},_ct={class:"mt-1 text-sm text-gray-500"},wct={class:"mt-6"},kct={class:"flex justify-end space-x-3"},Sct={class:"space-y-4"},Cct={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Act=["onClick"],Tct={class:"flex items-start space-x-3"},$ct={class:"p-2 bg-blue-100 rounded-lg"},Mct={class:"flex-1"},Ect={class:"font-medium text-gray-900"},Dct={class:"text-sm text-gray-600 mt-1"},Rct={class:"flex items-center space-x-4 mt-2 text-xs text-gray-500"},Pct={class:"flex justify-end"},Ict={class:"space-y-6"},Oct={class:"bg-blue-50 rounded-lg p-4"},Lct={class:"flex items-center space-x-2"},Vct={class:"font-medium text-blue-900"},Nct={class:"space-y-4"},jct={class:"border-t pt-4"},Fct={class:"flex justify-end"},Bct={class:"space-y-6"},zct={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Uct={class:"bg-blue-50 rounded-lg p-4"},Hct={class:"flex items-center justify-between"},qct={class:"text-2xl font-bold text-blue-900"},Wct={class:"bg-green-50 rounded-lg p-4"},Gct={class:"flex items-center justify-between"},Yct={class:"text-2xl font-bold text-green-900"},Kct={class:"bg-yellow-50 rounded-lg p-4"},Xct={class:"flex items-center justify-between"},Qct={class:"text-2xl font-bold text-yellow-900"},Zct={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Jct={class:"p-4"},eft={class:"space-y-4"},tft={class:"flex items-center space-x-3"},nft={class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},rft={class:"font-medium text-gray-900"},sft={class:"text-sm text-gray-600"},ift={class:"text-right"},aft={class:"w-24 bg-gray-200 rounded-full h-2"},oft={class:"text-xs text-gray-600 mt-1"},lft={class:"flex justify-end"},uft={__name:"AuditCalendar",setup(t){const e=_n(),n=qo(),r=Q(!1),s=Q(!1),i=Q(!1),a=Q(null),o=Q("calendar"),l=Q(new Date),d=Q(null),c=Q(""),f=Q(""),p=Q(""),h=Q(""),m=Q([]),g=Q("start_date"),y=Q(1),x=Q(10),_=Q(!1),k=Q(!1),w=Q(!1),S=Q(!1),C=Q({searchQuery:"",statusFilter:"",typeFilter:"",universeFilter:""}),A=Q({calendar_id:"",annual_audit_plan:"",audit_universe:"",audit_type:"",status:"Planned",planned_start_date:"",planned_end_date:"",lead_auditor:"",estimated_days:0,progress_percentage:0,objectives:"",scope:"",key_risks:""}),M=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Integrated",value:"Integrated"},{label:"Special Investigation",value:"Special Investigation"},{label:"Follow-up",value:"Follow-up"}],E=[{label:"Planned",value:"Planned"},{label:"Scheduled",value:"Scheduled"},{label:"In Progress",value:"In Progress"},{label:"On Hold",value:"On Hold"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"},{label:"Rescheduled",value:"Rescheduled"}],P=Z(()=>n.auditCalendar);Z(()=>n.auditCalendar.filter(Ae=>Ae.status==="In Progress")),Z(()=>n.upcomingAudits);const I=Z(()=>{if(n.auditCalendar.length===0)return 0;const Ae=n.auditCalendar.reduce((ke,Ue)=>ke+(Ue.progress_percentage||0),0);return Math.round(Ae/n.auditCalendar.length)}),F=Z(()=>n.auditUniverse.map(Ae=>({label:`${Ae.universe_id} - ${Ae.auditable_entity}`,value:Ae.name}))),L=Z(()=>n.activeAnnualPlans.map(Ae=>({label:`${Ae.plan_id} (${Ae.plan_year})`,value:Ae.name}))),z=Z(()=>{let Ae=[...P.value];if(C.value.searchQuery){const ke=C.value.searchQuery.toLowerCase();Ae=Ae.filter(Ue=>{var $t,Nn,Oe,Ge;return(($t=Ue.calendar_id)==null?void 0:$t.toLowerCase().includes(ke))||((Nn=Ue.audit_type)==null?void 0:Nn.toLowerCase().includes(ke))||((Oe=ce(Ue.audit_universe))==null?void 0:Oe.toLowerCase().includes(ke))||((Ge=Ue.status)==null?void 0:Ge.toLowerCase().includes(ke))})}return C.value.statusFilter&&(Ae=Ae.filter(ke=>ke.status===C.value.statusFilter)),C.value.typeFilter&&(Ae=Ae.filter(ke=>ke.audit_type===C.value.typeFilter)),C.value.universeFilter&&(Ae=Ae.filter(ke=>ke.audit_universe===C.value.universeFilter)),Ae.sort((ke,Ue)=>{const $t=new Date(ke.planned_start_date||ke.planned_end_date),Nn=new Date(Ue.planned_start_date||Ue.planned_end_date);return g.value==="start_date"?$t-Nn:Nn-$t}),Ae}),N=Z({get:()=>z.value.length>0&&m.value.length===z.value.length,set:Ae=>{Ae?m.value=z.value.map(ke=>ke.name):m.value=[]}}),q=Z(()=>{const Ae=(y.value-1)*x.value,ke=Ae+x.value;return z.value.slice(Ae,ke)}),V=Z(()=>Math.ceil(z.value.length/x.value));Z(()=>P.value.length);const O=Z(()=>P.value.filter(Ae=>Ae.status==="In Progress").length),X=Z(()=>{const Ae=new Date,ke=new Date;return ke.setDate(Ae.getDate()+30),P.value.filter(Ue=>{if(!Ue.planned_start_date)return!1;const $t=new Date(Ue.planned_start_date);return $t>=Ae&&$t<=ke}).length}),j=Z(()=>{const Ae=new Date;return P.value.filter(ke=>!ke.planned_end_date||ke.status==="Completed"?!1:new Date(ke.planned_end_date)<Ae).length}),U=Z(()=>({totalScheduled:P.value.length,inProgress:O.value,upcoming:X.value,averageProgress:I.value,overdue:j.value,totalCapacity:15})),G=Z(()=>{const Ae=hut(l.value),ke=cut(l.value),Ue=Ag(Ae),$t=gut(ke);return put({start:Ue,end:$t}).map(Oe=>({date:Oe,isCurrentMonth:z_(Oe,l.value),isToday:tq(Oe),audits:be(Oe)}))}),ee=()=>ue(this,null,function*(){r.value=!0;try{yield Promise.all([n.fetchAuditCalendar(),n.fetchAuditUniverse(),n.fetchAnnualPlans()])}finally{r.value=!1}}),ie=Ae=>{C.value=ge({},Ae),c.value=Ae.searchQuery,f.value=Ae.statusFilter,p.value=Ae.typeFilter,h.value=Ae.universeFilter},ne=()=>{o.value=o.value==="calendar"?"list":"calendar"},ce=Ae=>{const ke=n.auditUniverse.find(Ue=>Ue.name===Ae);return ke?ke.auditable_entity:Ae},oe=Ae=>{e.push(`/audit-planning/calendar/${Ae.name}`)},re=Ae=>{a.value=Ae,A.value=ge({},Ae),i.value=!0},te=()=>ue(this,null,function*(){s.value=!0;try{a.value?yield n.updateAuditCalendarEntry(a.value.name,A.value):yield n.createAuditCalendarEntry(A.value),i.value=!1,K(),yield ee()}catch(Ae){console.error("Error saving calendar item:",Ae)}finally{s.value=!1}}),K=()=>{A.value={calendar_id:"",annual_audit_plan:"",audit_universe:"",audit_type:"",status:"Planned",planned_start_date:"",planned_end_date:"",lead_auditor:"",estimated_days:0,progress_percentage:0,objectives:"",scope:"",key_risks:""},a.value=null},le=Ae=>Ae?new Date(Ae).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",H=Ae=>tq(Ae),Y=()=>{l.value=mdt(l.value),d.value=null},B=()=>{l.value=voe(l.value,1),d.value=null},ae=Ae=>{d.value=d.value&&bD(d.value,Ae)?null:Ae},be=Ae=>P.value.filter(ke=>{if(!ke.planned_start_date)return!1;const Ue=new Date(ke.planned_start_date);return bD(Ue,Ae)}),fe=Ae=>{Ae?m.value=z.value.map(ke=>ke.name):m.value=[]},me=Ae=>{const ke=m.value.indexOf(Ae);ke>-1?m.value.splice(ke,1):m.value.push(Ae)},ye=Ae=>({Planned:"bg-gray-100 text-gray-800",Scheduled:"bg-blue-100 text-blue-800","In Progress":"bg-yellow-100 text-yellow-800","On Hold":"bg-red-100 text-red-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-gray-200 text-gray-600",Rescheduled:"bg-orange-100 text-orange-800"})[Ae]||"bg-gray-100 text-gray-800",Ee=Ae=>({Financial:"blue",Operational:"green",Compliance:"purple",IT:"orange",Integrated:"red","Special Investigation":"gray","Follow-up":"yellow"})[Ae]||"gray",Re=Ae=>({Planned:"gray",Scheduled:"blue","In Progress":"yellow","On Hold":"red",Completed:"green",Cancelled:"gray",Rescheduled:"orange"})[Ae]||"gray",Ye=Ae=>{a.value=Ae,A.value=ge({},Ae),i.value=!0},Xe=Ae=>ue(this,null,function*(){if(confirm(`Are you sure you want to delete audit "${Ae.calendar_id}"?`))try{yield n.deleteAuditCalendarEntry(Ae.name),yield ee()}catch(ke){console.error("Error deleting audit:",ke)}}),st=()=>ue(this,null,function*(){S.value=!0;try{console.log("Exporting calendar data...")}finally{S.value=!1}}),it=Q(""),Fe=Q(!1),Pe=[{id:"annual-financial",name:"Annual Financial Audit",description:"Complete financial audit cycle with quarterly reviews",audits:5,duration:12},{id:"compliance-check",name:"Compliance Review",description:"Regulatory compliance and internal controls assessment",audits:8,duration:6},{id:"operational-efficiency",name:"Operational Efficiency",description:"Process optimization and efficiency improvement audits",audits:6,duration:9},{id:"it-security",name:"IT Security Audit",description:"Information security and data protection assessments",audits:4,duration:8}],je=Z(()=>15),Ie=Z(()=>je.value-O.value),Se=Z(()=>je.value===0?0:Math.round(O.value/je.value*100)),Ce=Z(()=>[{name:"John Smith",audits:3,utilization:75},{name:"Sarah Johnson",audits:2,utilization:50},{name:"Mike Davis",audits:4,utilization:90},{name:"Lisa Brown",audits:1,utilization:25}]),Le=Ae=>{console.log("Applying template:",Ae),w.value=!1},Pt=()=>ue(this,null,function*(){if(!(!it.value||m.value.length===0)){Fe.value=!0;try{for(const Ae of m.value)yield n.updateAuditCalendarEntry(Ae,{status:it.value});m.value=[],it.value="",_.value=!1,yield ee()}catch(Ae){console.error("Error applying bulk status update:",Ae)}finally{Fe.value=!1}}}),$e=()=>ue(this,null,function*(){if(m.value.length!==0&&confirm(`Are you sure you want to delete ${m.value.length} selected audits? This action cannot be undone.`))try{for(const Ae of m.value)yield n.deleteAuditCalendarEntry(Ae);m.value=[],_.value=!1,yield ee()}catch(Ae){console.error("Error deleting audits:",Ae)}});return yt(()=>ue(this,null,function*(){yield ee()})),(Ae,ke)=>(T(),R("div",gdt,[u("div",vdt,[u("div",null,[u("div",ydt,[u("div",bdt,[b(v(rr),{class:"h-6 w-6 text-blue-600"})]),ke[18]||(ke[18]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Calendar"),u("p",{class:"text-gray-600 mt-1"}," Schedule and manage audit engagements and timelines ")],-1))])]),u("div",xdt,[u("div",_dt,[u("div",wdt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:st,loading:S.value},{prefix:D(()=>[b(v(xn),{class:"h-3.5 w-3.5"})]),default:D(()=>[ke[19]||(ke[19]=W(" Export ",-1))]),_:1},8,["loading"])]),u("div",kdt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ke[0]||(ke[0]=Ue=>w.value=!0)},{prefix:D(()=>[b(v(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[ke[20]||(ke[20]=W(" Templates ",-1))]),_:1})]),u("div",Sdt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ee,loading:r.value},{prefix:D(()=>[b(v(mn),{class:"h-3.5 w-3.5"})]),default:D(()=>[ke[21]||(ke[21]=W(" Refresh ",-1))]),_:1},8,["loading"])]),u("div",Cdt,[b(v(J),{variant:"solid",theme:"blue",size:"sm",onClick:ke[1]||(ke[1]=Ue=>i.value=!0)},{prefix:D(()=>[b(v(nt),{class:"h-3.5 w-3.5"})]),default:D(()=>[ke[22]||(ke[22]=W(" Schedule Audit ",-1))]),_:1})])])])]),b(rut,{stats:U.value},null,8,["stats"]),b(Plt,{filters:C.value,"status-options":E,"audit-type-options":M,"universe-options":F.value,"selected-count":m.value.length,"filtered-count":z.value.length,"total-count":P.value.length,"view-mode":o.value,"onUpdate:filters":ie,onBulkActions:ke[2]||(ke[2]=Ue=>_.value=!0),onCapacityPlanning:ke[3]||(ke[3]=Ue=>k.value=!0),onToggleView:ne},null,8,["filters","universe-options","selected-count","filtered-count","total-count","view-mode"]),u("div",Adt,[o.value==="calendar"?(T(),R("div",Tdt,[u("div",$dt,[u("div",Mdt,[b(v(J),{variant:"outline",size:"sm",onClick:Y},{default:D(()=>[b(v(gr),{class:"h-4 w-4"})]),_:1}),u("h3",Edt,$(v(eq)(l.value,"MMMM yyyy")),1),b(v(J),{variant:"outline",size:"sm",onClick:B},{default:D(()=>[b(v(sr),{class:"h-4 w-4"})]),_:1})]),b(v(J),{variant:"outline",size:"sm",onClick:ke[4]||(ke[4]=Ue=>l.value=new Date)},{default:D(()=>[...ke[23]||(ke[23]=[W(" Today ",-1)])]),_:1})]),u("div",Ddt,[(T(),R(xe,null,_e(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ue=>u("div",{key:Ue,class:"p-3 text-center text-sm font-medium text-gray-500 bg-gray-50 rounded-lg"},$(Ue),1)),64))]),u("div",Rdt,[(T(!0),R(xe,null,_e(G.value,Ue=>(T(),R("div",{key:Ue.date,class:pe(["min-h-32 p-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",{"bg-blue-50 border-blue-200":H(Ue.date),"bg-gray-100":!v(z_)(Ue.date,l.value)}]),onClick:$t=>ae(Ue.date)},[u("div",Idt,[u("span",{class:pe(["text-sm font-medium",{"text-blue-600":H(Ue.date),"text-gray-400":!v(z_)(Ue.date,l.value),"text-gray-900":v(z_)(Ue.date,l.value)&&!H(Ue.date)}])},$(v(eq)(Ue.date,"d")),3),Ue.audits.length>0?(T(),R("div",Odt,$(Ue.audits.length),1)):se("",!0)]),u("div",Ldt,[(T(!0),R(xe,null,_e(Ue.audits.slice(0,3),$t=>(T(),R("div",{key:$t.name,class:pe(["text-xs p-1 rounded truncate",ye($t.status)]),onClick:ut(Nn=>Ye($t),["stop"])},$($t.calendar_id||$t.name),11,Vdt))),128)),Ue.audits.length>3?(T(),R("div",Ndt," +"+$(Ue.audits.length-3)+" more ",1)):se("",!0)])],10,Pdt))),128))])])):(T(),R("div",jdt,[u("div",Fdt,[u("div",Bdt,[u("div",zdt,[b(v(St),{modelValue:N.value,"onUpdate:modelValue":fe},null,8,["modelValue"]),u("span",Udt,$(m.value.length)+" of "+$(z.value.length)+" selected ",1)]),u("div",Hdt,[b(v(J),{variant:"outline",size:"sm",onClick:ke[5]||(ke[5]=Ue=>g.value=g.value==="start_date"?"end_date":"start_date")},{default:D(()=>[b(v(Zu),{class:"h-4 w-4 mr-2"}),W(" Sort by "+$(g.value==="start_date"?"End Date":"Start Date"),1)]),_:1})])])]),u("div",qdt,[u("table",Wdt,[u("thead",Gdt,[u("tr",null,[u("th",Ydt,[b(v(St),{modelValue:N.value,"onUpdate:modelValue":fe},null,8,["modelValue"])]),ke[24]||(ke[24]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Calendar ID ",-1)),ke[25]||(ke[25]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ",-1)),ke[26]||(ke[26]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Universe ",-1)),ke[27]||(ke[27]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Start Date ",-1)),ke[28]||(ke[28]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," End Date ",-1)),ke[29]||(ke[29]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Progress ",-1)),ke[30]||(ke[30]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),ke[31]||(ke[31]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",Kdt,[(T(!0),R(xe,null,_e(q.value,Ue=>{var $t;return T(),R("tr",{key:Ue.name,class:pe(["hover:bg-gray-50 transition-colors",{"bg-blue-50":m.value.includes(Ue.name)}])},[u("td",Xdt,[b(v(St),{modelValue:m.value.includes(Ue.name),"onUpdate:modelValue":Nn=>me(Ue.name)},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Qdt,[u("div",Zdt,[u("div",Jdt,[u("div",ect,[b(v(vt),{class:"h-5 w-5 text-gray-600"})])]),u("div",tct,[u("div",nct,$(Ue.calendar_id||Ue.name),1),u("div",rct,$(($t=Ue.objectives)==null?void 0:$t.substring(0,50))+"... ",1)])])]),u("td",sct,[b(v(De),{theme:Ee(Ue.audit_type)},{default:D(()=>[W($(Ue.audit_type),1)]),_:2},1032,["theme"])]),u("td",ict,$(ce(Ue.audit_universe)),1),u("td",act,$(le(Ue.planned_start_date)),1),u("td",oct,$(le(Ue.planned_end_date)),1),u("td",lct,[u("div",uct,[u("div",dct,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${Ue.progress_percentage||0}%`})},null,4)]),u("span",cct,$(Ue.progress_percentage||0)+"%",1)])]),u("td",fct,[b(v(De),{theme:Re(Ue.status)},{default:D(()=>[W($(Ue.status),1)]),_:2},1032,["theme"])]),u("td",pct,[u("div",hct,[b(v(J),{variant:"ghost",size:"sm",onClick:Nn=>oe(Ue)},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:Nn=>re(Ue)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:Nn=>Xe(Ue),theme:"red"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2)}),128))])])]),u("div",mct,[u("div",gct,[u("div",vct," Showing "+$((y.value-1)*x.value+1)+" to "+$(Math.min(y.value*x.value,z.value.length))+" of "+$(z.value.length)+" results ",1),u("div",yct,[b(v(J),{variant:"outline",size:"sm",disabled:y.value===1,onClick:ke[6]||(ke[6]=Ue=>y.value--)},{default:D(()=>[b(v(gr),{class:"h-4 w-4"}),ke[32]||(ke[32]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",bct," Page "+$(y.value)+" of "+$(V.value),1),b(v(J),{variant:"outline",size:"sm",disabled:y.value===V.value,onClick:ke[7]||(ke[7]=Ue=>y.value++)},{default:D(()=>[ke[33]||(ke[33]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])]))]),z.value.length===0?(T(),R("div",xct,[b(v(rr),{class:"mx-auto h-12 w-12 text-gray-400"}),ke[35]||(ke[35]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No audits scheduled",-1)),u("p",_ct,$(C.value.searchQuery||C.value.statusFilter||C.value.typeFilter||C.value.universeFilter?"No audits match your current filters.":"Get started by scheduling your first audit."),1),u("div",wct,[b(v(J),{onClick:ke[8]||(ke[8]=Ue=>i.value=!0),class:"bg-blue-600 hover:bg-blue-700 text-white"},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),ke[34]||(ke[34]=W(" Schedule Audit ",-1))]),_:1})])])):se("",!0),b(v(jt),{modelValue:i.value,"onUpdate:modelValue":ke[10]||(ke[10]=Ue=>i.value=Ue),title:a.value?"Edit Audit Schedule":"Schedule New Audit",size:"4xl"},{body:D(()=>[b(wlt,{form:A.value,"universe-options":F.value,"audit-type-options":M,"status-options":E,"plan-options":L.value},null,8,["form","universe-options","plan-options"])]),footer:D(()=>[u("div",kct,[b(v(J),{variant:"outline",onClick:ke[9]||(ke[9]=Ue=>i.value=!1)},{default:D(()=>[...ke[36]||(ke[36]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{onClick:te,loading:s.value,class:"bg-blue-600 hover:bg-blue-700 text-white"},{default:D(()=>[W($(a.value?"Update":"Schedule")+" Audit ",1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"]),b(v(jt),{modelValue:w.value,"onUpdate:modelValue":ke[12]||(ke[12]=Ue=>w.value=Ue),title:"Audit Calendar Templates",size:"3xl"},{body:D(()=>[u("div",Sct,[ke[37]||(ke[37]=u("p",{class:"text-gray-600"}," Choose from pre-built audit calendar templates to quickly schedule your audits. ",-1)),u("div",Cct,[(T(),R(xe,null,_e(Pe,Ue=>u("div",{key:Ue.id,class:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all cursor-pointer",onClick:$t=>Le(Ue)},[u("div",Tct,[u("div",$ct,[b(v(vt),{class:"h-5 w-5 text-blue-600"})]),u("div",Mct,[u("h4",Ect,$(Ue.name),1),u("p",Dct,$(Ue.description),1),u("div",Rct,[u("span",null,$(Ue.audits)+" audits",1),u("span",null,$(Ue.duration)+" months",1)])])])],8,Act)),64))])])]),footer:D(()=>[u("div",Pct,[b(v(J),{variant:"outline",onClick:ke[11]||(ke[11]=Ue=>w.value=!1)},{default:D(()=>[...ke[38]||(ke[38]=[W(" Cancel ",-1)])]),_:1})])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:_.value,"onUpdate:modelValue":ke[15]||(ke[15]=Ue=>_.value=Ue),title:"Bulk Actions",size:"2xl"},{body:D(()=>[u("div",Ict,[u("div",Oct,[u("div",Lct,[b(v(Hc),{class:"h-5 w-5 text-blue-600"}),u("span",Vct,$(m.value.length)+" audits selected ",1)])]),u("div",Nct,[u("div",null,[ke[40]||(ke[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Update Status ",-1)),b(v(Qe),{modelValue:it.value,"onUpdate:modelValue":ke[13]||(ke[13]=Ue=>it.value=Ue),options:E,placeholder:"Select new status"},null,8,["modelValue"]),b(v(J),{variant:"solid",theme:"blue",size:"sm",class:"mt-2",onClick:Pt,loading:Fe.value},{default:D(()=>[...ke[39]||(ke[39]=[W(" Apply Status Update ",-1)])]),_:1},8,["loading"])]),u("div",jct,[ke[42]||(ke[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Bulk Delete ",-1)),ke[43]||(ke[43]=u("p",{class:"text-sm text-gray-600 mb-3"}," This action cannot be undone. All selected audits will be permanently deleted. ",-1)),b(v(J),{variant:"solid",theme:"red",size:"sm",onClick:$e},{default:D(()=>[...ke[41]||(ke[41]=[W(" Delete Selected Audits ",-1)])]),_:1})])])])]),footer:D(()=>[u("div",Fct,[b(v(J),{variant:"outline",onClick:ke[14]||(ke[14]=Ue=>_.value=!1)},{default:D(()=>[...ke[44]||(ke[44]=[W(" Close ",-1)])]),_:1})])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:k.value,"onUpdate:modelValue":ke[17]||(ke[17]=Ue=>k.value=Ue),title:"Capacity Planning",size:"4xl"},{body:D(()=>[u("div",Bct,[u("div",zct,[u("div",Uct,[u("div",Hct,[u("div",null,[ke[45]||(ke[45]=u("p",{class:"text-sm font-medium text-blue-700"},"Total Capacity",-1)),u("p",qct,$(je.value),1)]),b(v(Ji),{class:"h-8 w-8 text-blue-600"})])]),u("div",Wct,[u("div",Gct,[u("div",null,[ke[46]||(ke[46]=u("p",{class:"text-sm font-medium text-green-700"},"Available",-1)),u("p",Yct,$(Ie.value),1)]),b(v(Kt),{class:"h-8 w-8 text-green-600"})])]),u("div",Kct,[u("div",Xct,[u("div",null,[ke[47]||(ke[47]=u("p",{class:"text-sm font-medium text-yellow-700"},"Utilization",-1)),u("p",Qct,$(Se.value)+"%",1)]),b(v(sb),{class:"h-8 w-8 text-yellow-600"})])])]),u("div",Zct,[ke[48]||(ke[48]=u("div",{class:"px-4 py-3 border-b border-gray-200 bg-gray-50"},[u("h4",{class:"font-medium text-gray-900"},"Auditor Workload")],-1)),u("div",Jct,[u("div",eft,[(T(!0),R(xe,null,_e(Ce.value,Ue=>(T(),R("div",{key:Ue.name,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[u("div",tft,[u("div",nft,[b(v(Ji),{class:"h-4 w-4 text-blue-600"})]),u("div",null,[u("p",rft,$(Ue.name),1),u("p",sft,$(Ue.audits)+" active audits",1)])]),u("div",ift,[u("div",aft,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${Ue.utilization}%`})},null,4)]),u("p",oft,$(Ue.utilization)+"% utilized",1)])]))),128))])])])])]),footer:D(()=>[u("div",lft,[b(v(J),{variant:"outline",onClick:ke[16]||(ke[16]=Ue=>k.value=!1)},{default:D(()=>[...ke[49]||(ke[49]=[W(" Close ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}};typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;const nq=()=>{};function dft(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}function cft(t,e={}){let n,r,s=nq;const i=l=>{clearTimeout(l),s(),s=nq};let a;return l=>{const d=Ur(t),c=Ur(e.maxWait);return n&&i(n),d<=0||c!==void 0&&c<=0?(r&&(i(r),r=void 0),Promise.resolve(l())):new Promise((f,p)=>{s=e.rejectOnCancel?p:f,a=l,c&&!r&&(r=setTimeout(()=>{n&&i(n),r=void 0,f(a())},c)),n=setTimeout(()=>{r&&i(r),r=void 0,f(l())},d)})}}function fft(t,e=200,n={}){return dft(cft(e,n),t)}function pft(t,e={}){const n=Q([]),r=Q(!1),s=Q(new Map),i=Q(new Map),a=Ve({url:"frappe.desk.search.search_link",params:{doctype:t,txt:"",filters:JSON.stringify(e)},auto:!1,transform:f=>f?f.map(p=>({label:p.description||p.value,value:p.value})):[],onSuccess:f=>{n.value=f||[],r.value=!1},onError:f=>{console.error(`Link field search error for ${t}:`,f),n.value=[],r.value=!1}});return{searchResults:n,isSearching:r,search:fft(f=>ue(this,null,function*(){if(!f||f.trim()===""){n.value=[];return}const p=`${t}:${f.toLowerCase()}`;if(s.value.has(p)){n.value=s.value.get(p);return}r.value=!0,a.params.txt=f;try{yield a.fetch(),s.value.set(p,n.value)}catch(h){console.error("Search failed:",h),r.value=!1}}),300),getValue:(f,p)=>ue(this,null,function*(){if(!f||!p||p.length===0)return null;const h=`${t}:${f}:${p.join(",")}`;if(i.value.has(h))return i.value.get(h);const m=Ve({url:"frappe.client.get_value",params:{doctype:t,name:f,fieldname:JSON.stringify(p)},auto:!1});try{yield m.fetch();const g=m.data;return i.value.set(h,g),g}catch(g){return console.error(`Failed to fetch ${t} values:`,g),null}}),clearCache:()=>{s.value.clear(),i.value.clear(),n.value=[]},clearResults:()=>{n.value=[]}}}const hft={class:"link-field"},mft={class:"w-full space-y-1.5"},gft={key:0,class:"block text-xs font-medium text-gray-700"},vft={key:0,class:"text-red-500"},yft=["disabled","onClick"],bft={key:0,class:"truncate text-gray-900"},xft={key:1,class:"text-gray-500"},_ft={key:0,class:"mt-1 text-xs text-red-500"},wft={__name:"LinkField",props:{modelValue:{type:[String,Number],default:""},doctype:{type:String,required:!0},label:{type:String,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},fetchFields:{type:Array,default:()=>[]},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(t,{emit:e}){const n=t,r=e,{searchResults:s,isSearching:i,search:a,getValue:o}=pft(n.doctype,n.filters),l=Q(n.modelValue),d=Q(""),c=Z(()=>s.value.map(m=>({label:m.label,value:m.value})));et(()=>n.modelValue,m=>{l.value=m,m?f(m):d.value=""},{immediate:!0});const f=m=>ue(this,null,function*(){if(!m){d.value="";return}if(n.fetchFields.length>0){const g=yield o(m,n.fetchFields);g?d.value=g[n.fetchFields[0]]||m:d.value=m}else d.value=m}),p=m=>{m&&m.length>0&&a(m)},h=m=>ue(this,null,function*(){if(!m){l.value="",d.value="",r("update:modelValue",""),r("change",{value:"",relatedData:null});return}const g=typeof m=="object"?m.value:m;l.value=g,r("update:modelValue",g);let y=null;n.fetchFields.length>0?(y=yield o(g,n.fetchFields),y&&(d.value=y[n.fetchFields[0]]||g)):d.value=typeof m=="object"?m.label:g,r("change",{value:g,relatedData:y})});return(m,g)=>(T(),R("div",hft,[b(v(VK),{modelValue:l.value,"onUpdate:modelValue":[g[0]||(g[0]=y=>l.value=y),h],label:t.label,placeholder:t.placeholder,options:c.value,loading:v(i),"onUpdate:query":p},{target:D(({open:y,close:x,togglePopover:_,isOpen:k})=>[u("div",mft,[t.label?(T(),R("label",gft,[W($(t.label)+" ",1),t.required?(T(),R("span",vft,"*")):se("",!0)])):se("",!0),u("button",{type:"button",class:pe(["flex h-9 w-full items-center justify-between gap-2 rounded border px-3 py-2 text-sm transition-colors",[k?"border-green-500 ring-2 ring-green-500 ring-opacity-20":"border-gray-300 hover:border-gray-400",t.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"]]),disabled:t.disabled,onClick:_},[d.value?(T(),R("span",bft,$(d.value),1)):(T(),R("span",xft,$(t.placeholder||`Select ${t.label||"option"}`),1)),(T(),R("svg",{class:pe(["h-4 w-4 text-gray-500 transition-transform",{"rotate-180":k}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...g[1]||(g[1]=[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],10,yft)])]),_:1},8,["modelValue","label","placeholder","options","loading"]),t.error?(T(),R("p",_ft,$(t.error),1)):se("",!0)]))}},Mt=It(wft,[["__scopeId","data-v-742712b6"]]),kft={class:"h-[80vh] flex"},Sft={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},Cft={class:"p-4"},Aft={class:"space-y-2"},Tft=["onClick"],$ft={key:1},Mft={class:"flex-1 min-w-0"},Eft={class:"text-sm font-medium text-gray-900 truncate"},Dft={class:"text-xs text-gray-500 truncate"},Rft={class:"mt-4 p-3 bg-white rounded-lg border border-gray-200"},Pft={class:"flex items-center justify-between mb-2"},Ift={class:"text-xs font-semibold text-purple-600"},Oft={class:"w-full bg-gray-200 rounded-full h-1.5"},Lft={key:0,class:"mt-3 text-xs text-gray-500 text-center"},Vft={class:"flex-1 overflow-y-auto"},Nft={class:"p-6 space-y-8"},jft={class:"space-y-6"},Fft={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Bft={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},zft={class:"flex gap-2"},Uft={class:"flex items-center mt-2"},Hft={key:0},qft={class:"space-y-6"},Wft={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Gft={class:"space-y-6"},Yft={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Kft={class:"flex items-center justify-between mb-4"},Xft={class:"text-xs text-gray-500"},Qft={key:0,class:"space-y-4"},Zft={class:"flex items-start justify-between mb-4"},Jft={class:"flex items-center gap-2"},ept={class:"text-sm font-medium text-gray-900"},tpt={class:"flex items-center gap-1"},npt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},rpt={class:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},spt={class:"mt-4"},ipt=["onUpdate:modelValue"],apt={class:"mt-4"},opt=["onUpdate:modelValue"],lpt={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},upt={class:"space-y-6"},dpt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},cpt={class:"flex items-center justify-between mb-4"},fpt={class:"text-xs text-gray-500"},ppt={key:0,class:"space-y-4"},hpt={class:"flex items-start justify-between mb-4"},mpt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},gpt={class:"md:col-span-2"},vpt=["onUpdate:modelValue"],ypt={class:"mt-4"},bpt=["onUpdate:modelValue"],xpt={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},_pt={class:"space-y-6"},wpt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},kpt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},Spt={class:"bg-gray-50 rounded-lg p-4"},Cpt={class:"text-lg font-semibold text-gray-900 mt-1"},Apt={class:"bg-gray-50 rounded-lg p-4"},Tpt={class:"text-lg font-semibold text-gray-900 mt-1"},$pt={class:"bg-gray-50 rounded-lg p-4"},Mpt={class:"text-lg font-semibold text-gray-900 mt-1"},Ept={class:"bg-gray-50 rounded-lg p-4"},Dpt={class:"text-lg font-semibold text-gray-900 mt-1"},Rpt={class:"border-t border-gray-200 pt-4"},Ppt={class:"space-y-2"},Ipt={class:"flex items-center justify-between w-full"},Opt={class:"flex items-center gap-2"},Lpt={class:"flex items-center gap-2"},Vpt={__name:"AuditProgramForm",props:{show:{type:Boolean,default:!1},program:{type:Object,default:null},mode:{type:String,default:"create"}},emits:["update:show","saved","close"],setup(t,{emit:e}){const n=t,r=e,s=qo(),i=Q(0),a=Q(!1),o=Q(!1),l=Q(null),d=Z({get:()=>n.show,set:j=>r("update:show",j)}),c=Q(f());function f(){return{program_id:"",program_name:"",audit_type:"",is_template:!1,engagement_reference:"",program_objectives:"",program_procedures:[],risk_areas:[]}}const p=[{id:"basic",title:"Basic Information",description:"Program ID and type"},{id:"objectives",title:"Program Objectives",description:"Define objectives"},{id:"procedures",title:"Audit Procedures",description:"Detailed procedures"},{id:"risks",title:"Risk Areas",description:"Key risk areas"},{id:"review",title:"Review & Submit",description:"Review and submit"}],h=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Inventory",value:"Inventory"},{label:"Cash",value:"Cash"},{label:"Sales",value:"Sales"},{label:"Procurement",value:"Procurement"}],m=[{label:"Inquiry",value:"Inquiry"},{label:"Observation",value:"Observation"},{label:"Inspection",value:"Inspection"},{label:"Re-performance",value:"Re-performance"},{label:"Analytical",value:"Analytical"},{label:"Confirmation",value:"Confirmation"},{label:"Computation",value:"Computation"}],g=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Not Applicable",value:"Not Applicable"}],y=[{label:"Existence",value:"Existence"},{label:"Completeness",value:"Completeness"},{label:"Accuracy",value:"Accuracy"},{label:"Valuation",value:"Valuation"},{label:"Rights",value:"Rights"},{label:"Presentation",value:"Presentation"},{label:"Occurrence",value:"Occurrence"},{label:"Cutoff",value:"Cutoff"}],x=[{label:"Random",value:"Random"},{label:"Systematic",value:"Systematic"},{label:"Judgmental",value:"Judgmental"},{label:"100%",value:"100%"},{label:"Other",value:"Other"}],_=[{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}];et(()=>n.program,j=>{j?c.value=ze(ge(ge({},f()),j),{program_procedures:j.program_procedures||[],risk_areas:j.risk_areas||[]}):c.value=f(),i.value=0},{immediate:!0}),et(()=>n.show,j=>{j||(i.value=0,l.value=null)});const k=Z(()=>{var U;let j=0;return c.value.program_id&&c.value.program_name&&c.value.audit_type&&(j+=25),c.value.program_objectives&&(j+=25),((U=c.value.program_procedures)==null?void 0:U.length)>0&&(j+=25),j+=25,j}),w=Z(()=>{var j;return c.value.program_id&&c.value.program_name&&c.value.audit_type&&c.value.program_objectives&&((j=c.value.program_procedures)==null?void 0:j.length)>0}),S=Z(()=>{var j;return[{label:"Program ID is set",valid:!!c.value.program_id},{label:"Program Name is set",valid:!!c.value.program_name},{label:"Audit Type is selected",valid:!!c.value.audit_type},{label:"Objectives are defined",valid:!!c.value.program_objectives},{label:"At least one procedure is added",valid:((j=c.value.program_procedures)==null?void 0:j.length)>0}]}),C=j=>{var U;switch(j){case"basic":return c.value.program_id&&c.value.program_name&&c.value.audit_type;case"objectives":return!!c.value.program_objectives;case"procedures":return((U=c.value.program_procedures)==null?void 0:U.length)>0;case"risks":return!0;case"review":return!0;default:return!1}},A=j=>C(j)?"bg-green-500 text-white":"bg-gray-300 text-gray-600",M=j=>{i.value=j},E=()=>{i.value>0&&i.value--},P=()=>{i.value<p.length-1&&i.value++},I=()=>{const j=new Date().getFullYear(),U=c.value.audit_type?c.value.audit_type.substring(0,3).toUpperCase():"AUD",G=Math.floor(Math.random()*1e3).toString().padStart(3,"0");c.value.program_id=`${U}-${j}-${G}`},F=()=>{var U;const j=((U=c.value.program_procedures)==null?void 0:U.length)||0;c.value.program_procedures.push({procedure_no:`P${(j+1).toString().padStart(3,"0")}`,procedure_section:"",procedure_description:"",procedure_type:"",control_objective:"",assertion:"",sample_size:0,sampling_method:"",assigned_to:"",budgeted_hours:0,actual_hours:0,status:"Not Started",completion_date:"",working_paper_reference:"",findings_count:0,conclusion:"",notes:""})},L=j=>{c.value.program_procedures.splice(j,1)},z=j=>{console.log("Edit procedure",j)},N=()=>{c.value.risk_areas.push({risk_description:"",risk_rating:"",procedures_addressing_risk:""})},q=j=>{c.value.risk_areas.splice(j,1)},V=j=>({High:"subtle",Medium:"subtle",Low:"subtle"})[j]||"subtle",O=()=>ue(this,null,function*(){var j;a.value=!0;try{n.mode==="edit"&&((j=n.program)!=null&&j.name)?yield s.updateAuditProgram(n.program.name,c.value):yield s.createAuditProgram(c.value),l.value=new Date().toLocaleTimeString()}catch(U){console.error("Error saving draft:",U)}finally{a.value=!1}}),X=()=>ue(this,null,function*(){var j;o.value=!0;try{n.mode==="edit"&&((j=n.program)!=null&&j.name)?yield s.updateAuditProgram(n.program.name,c.value):yield s.createAuditProgram(c.value),r("saved"),r("update:show",!1)}catch(U){console.error("Error submitting form:",U)}finally{o.value=!1}});return(j,U)=>(T(),he(v(jt),{modelValue:d.value,"onUpdate:modelValue":U[6]||(U[6]=G=>d.value=G),options:{title:t.mode==="edit"?"Edit Audit Program":"Create Audit Program",size:"full"}},{body:D(()=>{var G,ee,ie,ne,ce,oe;return[u("div",kft,[u("div",Sft,[u("div",Cft,[U[8]||(U[8]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Progress",-1)),u("div",Aft,[(T(),R(xe,null,_e(p,(re,te)=>u("div",{key:re.id,class:pe(["flex items-center space-x-2 p-2 rounded-lg cursor-pointer transition-all",i.value===te?"bg-purple-100 border border-purple-300":"hover:bg-gray-100"]),onClick:K=>M(te)},[u("div",{class:pe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold",A(re.id)])},[C(re.id)?(T(),he(v(Fr),{key:0,class:"h-3 w-3"})):(T(),R("span",$ft,$(te+1),1))],2),u("div",Mft,[u("div",Eft,$(re.title),1),u("div",Dft,$(re.description),1)])],10,Tft)),64))]),u("div",Rft,[u("div",Pft,[U[7]||(U[7]=u("span",{class:"text-xs font-medium text-gray-700"},"Overall Progress",-1)),u("span",Ift,$(k.value)+"%",1)]),u("div",Oft,[u("div",{class:"bg-purple-600 h-1.5 rounded-full transition-all duration-500",style:rt({width:`${k.value}%`})},null,4)])]),l.value?(T(),R("div",Lft," Last saved: "+$(l.value),1)):se("",!0)])]),u("div",Vft,[u("div",Nft,[we(u("div",jft,[b(Vt,{title:"Basic Information",description:"Program identification and type",sectionNumber:1,color:"purple"}),u("div",Fft,[u("div",Bft,[u("div",null,[U[9]||(U[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Program ID "),u("span",{class:"text-red-500"},"*")],-1)),u("div",zft,[b(v(ve),{modelValue:c.value.program_id,"onUpdate:modelValue":U[0]||(U[0]=re=>c.value.program_id=re),placeholder:"e.g., FIN-2025-001",class:"flex-1"},null,8,["modelValue"]),b(v(J),{variant:"outline",size:"sm",onClick:I},{default:D(()=>[b(v(mn),{class:"h-4 w-4"})]),_:1})])]),b(v(ve),{modelValue:c.value.program_name,"onUpdate:modelValue":U[1]||(U[1]=re=>c.value.program_name=re),label:"Program Name",placeholder:"Enter program name",required:!0},null,8,["modelValue"]),u("div",null,[U[10]||(U[10]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Type "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:c.value.audit_type,"onUpdate:modelValue":U[2]||(U[2]=re=>c.value.audit_type=re),options:h,placeholder:"Select audit type"},null,8,["modelValue"])]),u("div",null,[U[12]||(U[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Is Template",-1)),u("div",Uft,[we(u("input",{type:"checkbox","onUpdate:modelValue":U[3]||(U[3]=re=>c.value.is_template=re),class:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"},null,512),[[Rn,c.value.is_template]]),U[11]||(U[11]=u("span",{class:"ml-2 text-sm text-gray-600"},"Save as reusable template",-1))])]),c.value.is_template?se("",!0):(T(),R("div",Hft,[U[13]||(U[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Engagement Reference",-1)),b(Mt,{modelValue:c.value.engagement_reference,"onUpdate:modelValue":U[4]||(U[4]=re=>c.value.engagement_reference=re),doctype:"Audit Engagement",placeholder:"Link to engagement"},null,8,["modelValue"])]))])])],512),[[lt,i.value===0]]),we(u("div",qft,[b(Vt,{title:"Program Objectives",description:"Define the objectives of this audit program",sectionNumber:2,color:"blue"}),u("div",Wft,[U[14]||(U[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Program Objectives "),u("span",{class:"text-red-500"},"*")],-1)),b(v(an),{content:c.value.program_objectives,onChange:U[5]||(U[5]=re=>c.value.program_objectives=re),placeholder:"Enter the objectives of this audit program...",editable:!0,editorClass:"min-h-[200px] prose-sm"},null,8,["content"])])],512),[[lt,i.value===1]]),we(u("div",Gft,[b(Vt,{title:"Audit Procedures",description:"Define the detailed audit procedures to be performed",sectionNumber:3,color:"green"}),u("div",Yft,[u("div",Kft,[u("div",null,[U[15]||(U[15]=u("h4",{class:"text-sm font-medium text-gray-900"},"Procedures",-1)),u("p",Xft,$(((G=c.value.program_procedures)==null?void 0:G.length)||0)+" procedures defined",1)]),b(v(J),{variant:"outline",size:"sm",onClick:F},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[U[16]||(U[16]=W(" Add Procedure ",-1))]),_:1})]),((ee=c.value.program_procedures)==null?void 0:ee.length)>0?(T(),R("div",Qft,[(T(!0),R(xe,null,_e(c.value.program_procedures,(re,te)=>(T(),R("div",{key:te,class:"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors"},[u("div",Zft,[u("div",Jft,[b(v(De),{variant:"subtle",theme:"gray"},{default:D(()=>[W($(te+1),1)]),_:2},1024),u("span",ept,$(re.procedure_no||"New Procedure"),1)]),u("div",tpt,[b(v(J),{variant:"ghost",size:"sm",onClick:K=>z(te)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:K=>L(te),class:"text-red-500"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),u("div",npt,[b(v(ve),{modelValue:re.procedure_no,"onUpdate:modelValue":K=>re.procedure_no=K,label:"Procedure No",placeholder:"e.g., P001",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),b(v(ve),{modelValue:re.procedure_section,"onUpdate:modelValue":K=>re.procedure_section=K,label:"Section",placeholder:"e.g., Revenue Testing",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[U[17]||(U[17]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Type",-1)),b(v(ve),{type:"select",modelValue:re.procedure_type,"onUpdate:modelValue":K=>re.procedure_type=K,options:m,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[U[18]||(U[18]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Status",-1)),b(v(ve),{type:"select",modelValue:re.status,"onUpdate:modelValue":K=>re.status=K,options:g,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",rpt,[u("div",null,[U[19]||(U[19]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Assertion",-1)),b(v(ve),{type:"select",modelValue:re.assertion,"onUpdate:modelValue":K=>re.assertion=K,options:y,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),b(v(ve),{modelValue:re.sample_size,"onUpdate:modelValue":K=>re.sample_size=K,type:"number",label:"Sample Size",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[U[20]||(U[20]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Sampling Method",-1)),b(v(ve),{type:"select",modelValue:re.sampling_method,"onUpdate:modelValue":K=>re.sampling_method=K,options:x,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),b(v(ve),{modelValue:re.budgeted_hours,"onUpdate:modelValue":K=>re.budgeted_hours=K,type:"number",label:"Budgeted Hours",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",spt,[U[21]||(U[21]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Procedure Description",-1)),we(u("textarea",{"onUpdate:modelValue":K=>re.procedure_description=K,rows:"2",class:"w-full text-sm border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe the audit procedure..."},null,8,ipt),[[Rt,re.procedure_description]])]),u("div",apt,[U[22]||(U[22]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Control Objective",-1)),we(u("textarea",{"onUpdate:modelValue":K=>re.control_objective=K,rows:"2",class:"w-full text-sm border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"What control does this procedure test?"},null,8,opt),[[Rt,re.control_objective]])])]))),128))])):(T(),R("div",lpt,[b(v(Ar),{class:"mx-auto h-12 w-12 text-gray-400"}),U[24]||(U[24]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No procedures defined",-1)),U[25]||(U[25]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add audit procedures to this program.",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-4",onClick:F},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[U[23]||(U[23]=W(" Add First Procedure ",-1))]),_:1})]))])],512),[[lt,i.value===2]]),we(u("div",upt,[b(Vt,{title:"Risk Areas",description:"Identify key risk areas addressed by this program",sectionNumber:4,color:"amber"}),u("div",dpt,[u("div",cpt,[u("div",null,[U[26]||(U[26]=u("h4",{class:"text-sm font-medium text-gray-900"},"Risk Areas",-1)),u("p",fpt,$(((ie=c.value.risk_areas)==null?void 0:ie.length)||0)+" risk areas identified",1)]),b(v(J),{variant:"outline",size:"sm",onClick:N},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[U[27]||(U[27]=W(" Add Risk Area ",-1))]),_:1})]),((ne=c.value.risk_areas)==null?void 0:ne.length)>0?(T(),R("div",ppt,[(T(!0),R(xe,null,_e(c.value.risk_areas,(re,te)=>(T(),R("div",{key:te,class:"border border-gray-200 rounded-lg p-4 hover:border-amber-300 transition-colors"},[u("div",hpt,[b(v(De),{variant:V(re.risk_rating),size:"sm"},{default:D(()=>[W($(re.risk_rating||"Unrated"),1)]),_:2},1032,["variant"]),b(v(J),{variant:"ghost",size:"sm",onClick:K=>q(te),class:"text-red-500"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",mpt,[u("div",gpt,[U[28]||(U[28]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Risk Description",-1)),we(u("textarea",{"onUpdate:modelValue":K=>re.risk_description=K,rows:"2",class:"w-full text-sm border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe the risk..."},null,8,vpt),[[Rt,re.risk_description]])]),u("div",null,[U[29]||(U[29]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Risk Rating",-1)),b(v(ve),{type:"select",modelValue:re.risk_rating,"onUpdate:modelValue":K=>re.risk_rating=K,options:_},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",ypt,[U[30]||(U[30]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Procedures Addressing Risk",-1)),we(u("textarea",{"onUpdate:modelValue":K=>re.procedures_addressing_risk=K,rows:"2",class:"w-full text-sm border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Which procedures address this risk?"},null,8,bpt),[[Rt,re.procedures_addressing_risk]])])]))),128))])):(T(),R("div",xpt,[b(v(rn),{class:"mx-auto h-12 w-12 text-gray-400"}),U[32]||(U[32]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No risk areas defined",-1)),U[33]||(U[33]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add risk areas to document what this program addresses.",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-4",onClick:N},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[U[31]||(U[31]=W(" Add Risk Area ",-1))]),_:1})]))])],512),[[lt,i.value===3]]),we(u("div",_pt,[b(Vt,{title:"Review & Submit",description:"Review your program and submit",sectionNumber:5,color:"purple"}),u("div",wpt,[U[39]||(U[39]=u("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Program Summary",-1)),u("div",kpt,[u("div",Spt,[U[34]||(U[34]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Program ID",-1)),u("p",Cpt,$(c.value.program_id||"Not set"),1)]),u("div",Apt,[U[35]||(U[35]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Type",-1)),u("p",Tpt,$(c.value.audit_type||"Not set"),1)]),u("div",$pt,[U[36]||(U[36]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Procedures",-1)),u("p",Mpt,$(((ce=c.value.program_procedures)==null?void 0:ce.length)||0),1)]),u("div",Ept,[U[37]||(U[37]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Risk Areas",-1)),u("p",Dpt,$(((oe=c.value.risk_areas)==null?void 0:oe.length)||0),1)])]),u("div",Rpt,[U[38]||(U[38]=u("h5",{class:"text-sm font-medium text-gray-900 mb-3"},"Validation Status",-1)),u("div",Ppt,[(T(!0),R(xe,null,_e(S.value,re=>(T(),R("div",{key:re.label,class:"flex items-center"},[(T(),he(At(re.valid?v(ro):v(Uc)),{class:pe([re.valid?"text-green-500":"text-red-500","h-5 w-5 mr-2"])},null,8,["class"])),u("span",{class:pe([re.valid?"text-gray-700":"text-red-600","text-sm"])},$(re.label),3)]))),128))])])])],512),[[lt,i.value===4]])])])])]}),actions:D(()=>[u("div",Ipt,[u("div",Opt,[i.value>0?(T(),he(v(J),{key:0,variant:"outline",onClick:E},{prefix:D(()=>[b(v(gr),{class:"h-4 w-4"})]),default:D(()=>[U[40]||(U[40]=W(" Previous ",-1))]),_:1})):se("",!0)]),u("div",Lpt,[b(v(J),{variant:"outline",onClick:O,loading:a.value},{prefix:D(()=>[b(v($r),{class:"h-4 w-4"})]),default:D(()=>[U[41]||(U[41]=W(" Save Draft ",-1))]),_:1},8,["loading"]),i.value<p.length-1?(T(),he(v(J),{key:0,variant:"solid",theme:"purple",onClick:P},{suffix:D(()=>[b(v(sr),{class:"h-4 w-4"})]),default:D(()=>[U[42]||(U[42]=W(" Next ",-1))]),_:1})):(T(),he(v(J),{key:1,variant:"solid",theme:"purple",onClick:X,loading:o.value,disabled:!w.value},{prefix:D(()=>[b(v(Fr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+$(t.mode==="edit"?"Update Program":"Create Program"),1)]),_:1},8,["loading","disabled"]))])])]),_:1},8,["modelValue","options"]))}},Npt={class:"flex flex-wrap items-center gap-3 mb-6"},jpt={class:"flex-1 min-w-[250px] max-w-md"},Fpt={class:"relative"},Bpt=["value"],zpt={class:"w-36"},Upt={class:"w-36"},Hpt={class:"w-36"},qpt={class:"flex items-center gap-1 bg-gray-100 rounded-lg p-1"},Wpt={key:0,class:"flex flex-wrap gap-2 mb-4"},Gpt={key:0,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium"},Ypt={key:1,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium"},Kpt={key:2,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},Xpt={key:3,class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium"},Qpt={__name:"ProgramFilters",props:{searchQuery:{type:String,default:""},typeFilter:{type:String,default:""},templateFilter:{type:String,default:""},statusFilter:{type:String,default:""},viewMode:{type:String,default:"table"}},emits:["update:searchQuery","update:typeFilter","update:templateFilter","update:statusFilter","update:viewMode"],setup(t,{emit:e}){const n=t,r=e,s=[{label:"All Types",value:""},{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Inventory",value:"Inventory"},{label:"Cash",value:"Cash"},{label:"Sales",value:"Sales"},{label:"Procurement",value:"Procurement"}],i=[{label:"All Programs",value:""},{label:"Templates Only",value:"templates"},{label:"Programs Only",value:"programs"}],a=[{label:"All Status",value:""},{label:"Not Started",value:"not_started"},{label:"In Progress",value:"in_progress"},{label:"Completed",value:"completed"}],o=Z(()=>n.searchQuery||n.typeFilter||n.templateFilter||n.statusFilter),l=()=>{r("update:searchQuery",""),r("update:typeFilter",""),r("update:templateFilter",""),r("update:statusFilter","")};return(d,c)=>(T(),R(xe,null,[u("div",Npt,[u("div",jpt,[u("div",Fpt,[b(v(En),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),u("input",{type:"text",value:t.searchQuery,onInput:c[0]||(c[0]=f=>d.$emit("update:searchQuery",f.target.value)),placeholder:"Search programs...",class:"w-full pl-10 pr-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all"},null,40,Bpt),t.searchQuery?(T(),R("button",{key:0,onClick:c[1]||(c[1]=f=>d.$emit("update:searchQuery","")),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},[b(v(ht),{class:"h-4 w-4"})])):se("",!0)])]),u("div",zpt,[b(v(ve),{type:"select",modelValue:t.typeFilter,"onUpdate:modelValue":c[2]||(c[2]=f=>d.$emit("update:typeFilter",f)),options:s,size:"sm",placeholder:"All Types"},null,8,["modelValue"])]),u("div",Upt,[b(v(ve),{type:"select",modelValue:t.templateFilter,"onUpdate:modelValue":c[3]||(c[3]=f=>d.$emit("update:templateFilter",f)),options:i,size:"sm",placeholder:"All Programs"},null,8,["modelValue"])]),u("div",Hpt,[b(v(ve),{type:"select",modelValue:t.statusFilter,"onUpdate:modelValue":c[4]||(c[4]=f=>d.$emit("update:statusFilter",f)),options:a,size:"sm",placeholder:"All Status"},null,8,["modelValue"])]),u("div",qpt,[u("button",{onClick:c[5]||(c[5]=f=>d.$emit("update:viewMode","table")),class:pe(["p-2 rounded-md transition-all duration-200",t.viewMode==="table"?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Table View"},[b(v(KS),{class:"h-4 w-4"})],2),u("button",{onClick:c[6]||(c[6]=f=>d.$emit("update:viewMode","cards")),class:pe(["p-2 rounded-md transition-all duration-200",t.viewMode==="cards"?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),title:"Card View"},[b(v(ZD),{class:"h-4 w-4"})],2)]),o.value?(T(),R("button",{key:0,onClick:l,class:"flex items-center gap-1.5 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all"},[b(v(wY),{class:"h-4 w-4"}),c[11]||(c[11]=u("span",null,"Clear",-1))])):se("",!0)]),o.value?(T(),R("div",Wpt,[t.searchQuery?(T(),R("span",Gpt,[b(v(En),{class:"h-3 w-3"}),W(' "'+$(t.searchQuery)+'" ',1),u("button",{onClick:c[7]||(c[7]=f=>d.$emit("update:searchQuery","")),class:"hover:text-purple-600"},[b(v(ht),{class:"h-3 w-3"})])])):se("",!0),t.typeFilter?(T(),R("span",Ypt,[W(" Type: "+$(t.typeFilter)+" ",1),u("button",{onClick:c[8]||(c[8]=f=>d.$emit("update:typeFilter","")),class:"hover:text-blue-600"},[b(v(ht),{class:"h-3 w-3"})])])):se("",!0),t.templateFilter?(T(),R("span",Kpt,[W($(t.templateFilter==="templates"?"Templates Only":"Programs Only")+" ",1),u("button",{onClick:c[9]||(c[9]=f=>d.$emit("update:templateFilter","")),class:"hover:text-green-600"},[b(v(ht),{class:"h-3 w-3"})])])):se("",!0),t.statusFilter?(T(),R("span",Xpt,[W(" Status: "+$(t.statusFilter)+" ",1),u("button",{onClick:c[10]||(c[10]=f=>d.$emit("update:statusFilter","")),class:"hover:text-amber-600"},[b(v(ht),{class:"h-3 w-3"})])])):se("",!0)])):se("",!0)],64))}},Zpt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4 mb-6"},Jpt={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-5 hover:shadow-lg transition-all duration-200"},eht={class:"flex items-center justify-between"},tht={class:"text-3xl font-bold text-purple-900 mt-1"},nht={class:"text-xs text-purple-600 mt-1"},rht={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},sht={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-5 hover:shadow-lg transition-all duration-200"},iht={class:"flex items-center justify-between"},aht={class:"text-3xl font-bold text-green-900 mt-1"},oht={class:"p-3 bg-green-500 rounded-xl shadow-sm"},lht={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-5 hover:shadow-lg transition-all duration-200"},uht={class:"flex items-center justify-between"},dht={class:"w-full"},cht={class:"text-3xl font-bold text-blue-900 mt-1"},fht={class:"w-full bg-blue-200 rounded-full h-2 mt-2"},pht={class:"p-3 bg-blue-500 rounded-xl shadow-sm ml-3"},hht={class:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl border border-amber-200 p-5 hover:shadow-lg transition-all duration-200"},mht={class:"flex items-center justify-between"},ght={class:"text-3xl font-bold text-amber-900 mt-1"},vht={class:"text-xs text-amber-600 mt-1"},yht={class:"p-3 bg-amber-500 rounded-xl shadow-sm"},bht={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200 p-5 hover:shadow-lg transition-all duration-200"},xht={class:"flex items-center justify-between"},_ht={class:"text-3xl font-bold text-red-900 mt-1"},wht={class:"p-3 bg-red-500 rounded-xl shadow-sm"},kht={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},Sht={class:"bg-white rounded-xl border border-gray-200 p-5"},Cht={class:"space-y-3"},Aht={class:"w-24 text-sm text-gray-600"},Tht={class:"flex-1 mx-3"},$ht={class:"w-full bg-gray-100 rounded-full h-3"},Mht={class:"w-12 text-sm font-medium text-gray-900 text-right"},Eht={class:"bg-white rounded-xl border border-gray-200 p-5"},Dht={class:"grid grid-cols-2 gap-3"},Rht={class:"text-xs text-gray-500"},Pht={__name:"ProgramStats",props:{stats:{type:Object,default:()=>({total:0,templates:0,active:0,avgCompletion:0,totalProcedures:0,completedProcedures:0,overdue:0,byType:{},proceduresByStatus:{}})},showDetails:{type:Boolean,default:!0}},setup(t){const e=t,n=Z(()=>{const s=e.stats.byType||{},i=Object.values(s).reduce((o,l)=>o+l,0)||1,a={Financial:"bg-blue-500",Operational:"bg-green-500",Compliance:"bg-purple-500",IT:"bg-amber-500",Inventory:"bg-cyan-500",Cash:"bg-emerald-500",Sales:"bg-pink-500",Procurement:"bg-indigo-500"};return Object.entries(s).map(([o,l])=>({label:o,count:l,percentage:l/i*100,color:a[o]||"bg-gray-400"}))}),r=Z(()=>{const s=e.stats.proceduresByStatus||{};return[{label:"Not Started",count:s["Not Started"]||0,color:"text-gray-600"},{label:"In Progress",count:s["In Progress"]||0,color:"text-blue-600"},{label:"Completed",count:s.Completed||0,color:"text-green-600"},{label:"N/A",count:s["Not Applicable"]||0,color:"text-amber-600"}]});return(s,i)=>(T(),R(xe,null,[u("div",Zpt,[u("div",Jpt,[u("div",eht,[u("div",null,[i[0]||(i[0]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Total Programs",-1)),u("p",tht,$(t.stats.total||0),1),u("p",nht,$(t.stats.templates||0)+" templates",1)]),u("div",rht,[b(v(vt),{class:"h-7 w-7 text-white"})])])]),u("div",sht,[u("div",iht,[u("div",null,[i[1]||(i[1]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Active",-1)),u("p",aht,$(t.stats.active||0),1),i[2]||(i[2]=u("p",{class:"text-xs text-green-600 mt-1"},"Currently in use",-1))]),u("div",oht,[b(v(ib),{class:"h-7 w-7 text-white"})])])]),u("div",lht,[u("div",uht,[u("div",dht,[i[3]||(i[3]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Avg Completion",-1)),u("p",cht,$(t.stats.avgCompletion||0)+"%",1),u("div",fht,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${Math.min(t.stats.avgCompletion||0,100)}%`})},null,4)])]),u("div",pht,[b(v(XS),{class:"h-7 w-7 text-white"})])])]),u("div",hht,[u("div",mht,[u("div",null,[i[4]||(i[4]=u("p",{class:"text-sm font-semibold text-amber-700 uppercase tracking-wide"},"Procedures",-1)),u("p",ght,$(t.stats.totalProcedures||0),1),u("p",vht,$(t.stats.completedProcedures||0)+" completed",1)]),u("div",yht,[b(v(L0),{class:"h-7 w-7 text-white"})])])]),u("div",bht,[u("div",xht,[u("div",null,[i[5]||(i[5]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Overdue",-1)),u("p",_ht,$(t.stats.overdue||0),1),i[6]||(i[6]=u("p",{class:"text-xs text-red-600 mt-1"},"Need attention",-1))]),u("div",wht,[b(v(qr),{class:"h-7 w-7 text-white"})])])])]),t.showDetails?(T(),R("div",kht,[u("div",Sht,[i[7]||(i[7]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Programs by Type",-1)),u("div",Cht,[(T(!0),R(xe,null,_e(n.value,a=>(T(),R("div",{key:a.label,class:"flex items-center"},[u("div",Aht,$(a.label),1),u("div",Tht,[u("div",$ht,[u("div",{class:pe(["h-3 rounded-full transition-all duration-300",a.color]),style:rt({width:`${a.percentage}%`})},null,6)])]),u("div",Mht,$(a.count),1)]))),128))])]),u("div",Eht,[i[8]||(i[8]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Procedure Status",-1)),u("div",Dht,[(T(!0),R(xe,null,_e(r.value,a=>(T(),R("div",{key:a.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[u("p",{class:pe(["text-lg font-bold",a.color])},$(a.count),3),u("p",Rht,$(a.label),1)]))),128))])])])):se("",!0)],64))}},Iht={class:"space-y-6"},Oht={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},Lht={class:"flex items-center space-x-3"},Vht={class:"p-2 bg-purple-100 rounded-lg"},Nht={class:"flex flex-wrap items-center gap-2"},jht={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Fht={class:"flex items-center justify-between"},Bht={class:"flex items-center"},zht={class:"text-sm text-red-800"},Uht={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Hht={class:"flex items-center justify-between"},qht={class:"flex items-center"},Wht={class:"text-sm text-green-800"},Ght={key:2,class:"bg-purple-50 border border-purple-200 rounded-lg p-4"},Yht={class:"flex items-center justify-between"},Kht={class:"flex items-center space-x-3"},Xht={class:"text-sm font-medium text-purple-900"},Qht={class:"flex items-center space-x-2"},Zht={class:"bg-white rounded-xl border border-gray-200 shadow-sm"},Jht={class:"px-6 py-4 border-b border-gray-200"},emt={class:"flex items-center justify-between"},tmt={class:"flex items-center space-x-2"},nmt={class:"text-sm text-gray-600"},rmt={key:0,class:"overflow-x-auto"},smt={class:"min-w-full divide-y divide-gray-200"},imt={class:"bg-gray-50"},amt={class:"px-6 py-3 text-left w-10"},omt=["checked"],lmt={class:"bg-white divide-y divide-gray-200"},umt={class:"px-6 py-4"},dmt=["checked","onChange"],cmt={class:"px-6 py-4 whitespace-nowrap"},fmt={class:"flex items-center"},pmt={class:"flex-shrink-0 h-10 w-10"},hmt={class:"h-10 w-10 rounded-lg bg-purple-500 flex items-center justify-center text-white font-bold text-sm"},mmt={class:"ml-4"},gmt={class:"text-sm font-semibold text-gray-900"},vmt={class:"text-sm text-gray-500"},ymt={class:"px-6 py-4 whitespace-nowrap"},bmt={class:"px-6 py-4 whitespace-nowrap"},xmt={key:1,class:"text-sm text-gray-500"},_mt={class:"px-6 py-4 whitespace-nowrap"},wmt={class:"flex items-center"},kmt={class:"w-20 bg-gray-200 rounded-full h-2 mr-2"},Smt={class:"text-sm text-gray-600"},Cmt={class:"px-6 py-4 whitespace-nowrap"},Amt={class:"flex items-center space-x-2"},Tmt={class:"text-sm font-medium text-gray-900"},$mt={class:"text-xs text-gray-500"},Mmt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Emt={class:"flex items-center space-x-1"},Dmt={key:1,class:"p-6"},Rmt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Pmt=["onClick"],Imt={class:"flex items-start justify-between mb-4"},Omt={class:"flex items-center space-x-3"},Lmt={class:"h-12 w-12 rounded-xl bg-purple-500 flex items-center justify-center text-white font-bold"},Vmt={class:"text-lg font-semibold text-gray-900 group-hover:text-purple-900"},Nmt={class:"text-sm text-gray-600 truncate max-w-[150px]"},jmt={class:"flex flex-col gap-1"},Fmt={class:"space-y-3"},Bmt={class:"flex justify-between items-center mb-1"},zmt={class:"text-sm font-medium"},Umt={class:"w-full bg-gray-200 rounded-full h-2"},Hmt={class:"flex justify-between items-center"},qmt={class:"text-sm font-medium"},Wmt={class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200"},Gmt={class:"flex items-center space-x-1"},Ymt={class:"text-xs text-gray-500"},Kmt={key:2,class:"px-6 py-20 text-center"},Xmt={class:"mx-auto h-20 w-20 rounded-2xl bg-purple-50 border-2 border-purple-100 flex items-center justify-center mb-8 shadow-sm"},Qmt={class:"max-w-md mx-auto"},Zmt={class:"flex flex-col sm:flex-row justify-center gap-3"},Jmt={key:3,class:"px-6 py-12 text-center"},egt={key:0,class:"p-6 space-y-6"},tgt={class:"flex items-start justify-between"},ngt={class:"text-lg font-semibold text-gray-900"},rgt={class:"text-sm text-gray-500"},sgt=["innerHTML"],igt={class:"text-sm font-medium text-gray-900 mb-2"},agt={class:"bg-gray-50 rounded-lg p-4"},ogt={class:"grid grid-cols-4 gap-4 text-center"},lgt={class:"text-2xl font-bold text-gray-900"},ugt={class:"text-2xl font-bold text-green-600"},dgt={class:"text-2xl font-bold text-amber-600"},cgt={class:"text-2xl font-bold text-purple-600"},fgt={key:0},pgt={class:"space-y-2"},hgt={class:"text-sm text-gray-700"},mgt={class:"p-6 space-y-4"},ggt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vgt=["onClick"],ygt={class:"flex items-start space-x-3"},bgt={class:"p-2 bg-purple-100 rounded-lg"},xgt={class:"font-semibold text-gray-900"},_gt={class:"text-xs text-gray-500 mt-1"},wgt={__name:"AuditPrograms",setup(t){const e=qo(),n=Q(!1),r=Q(""),s=Q(""),i=Q(!1),a=Q(!1),o=Q(!1),l=Q(!0),d=Q(null),c=Q(null),f=Q("create"),p=Q(""),h=Q(""),m=Q(""),g=Q(""),y=Q("table"),x=Q([]),_=Z(()=>e.auditPrograms||[]),k=Z(()=>_.value.filter(re=>re.is_template)),w=Z(()=>{const re=_.value,te=re.filter(me=>me.is_template).length,K=re.filter(me=>!me.is_template&&(me.completion_percent||0)<100).length,le=re.filter(me=>!me.is_template),H=le.length>0?Math.round(le.reduce((me,ye)=>me+(ye.completion_percent||0),0)/le.length):0,Y=re.reduce((me,ye)=>me+(ye.total_procedures||0),0),B=re.reduce((me,ye)=>me+(ye.completed_procedures||0),0),ae=new Date,be=re.filter(me=>{if(me.is_template||!me.modified)return!1;const ye=new Date(me.modified);return(ae-ye)/(1e3*60*60*24)>30&&(me.completion_percent||0)<100}).length,fe={};return re.forEach(me=>{me.audit_type&&(fe[me.audit_type]=(fe[me.audit_type]||0)+1)}),{total:re.length,templates:te,active:K,avgCompletion:H,totalProcedures:Y,completedProcedures:B,overdue:be,byType:fe}}),S=Z(()=>{let re=[..._.value];if(p.value){const te=p.value.toLowerCase();re=re.filter(K=>{var le,H,Y;return((le=K.program_id)==null?void 0:le.toLowerCase().includes(te))||((H=K.program_name)==null?void 0:H.toLowerCase().includes(te))||((Y=K.audit_type)==null?void 0:Y.toLowerCase().includes(te))})}return h.value&&(re=re.filter(te=>te.audit_type===h.value)),m.value==="templates"?re=re.filter(te=>te.is_template):m.value==="programs"&&(re=re.filter(te=>!te.is_template)),g.value==="not_started"?re=re.filter(te=>!te.is_template&&(te.completion_percent||0)===0):g.value==="in_progress"?re=re.filter(te=>!te.is_template&&(te.completion_percent||0)>0&&(te.completion_percent||0)<100):g.value==="completed"&&(re=re.filter(te=>!te.is_template&&(te.completion_percent||0)>=100)),re}),C=()=>ue(this,null,function*(){n.value=!0,r.value="";try{yield e.fetchAuditPrograms()}catch(re){console.error("Error refreshing data:",re),r.value="Failed to refresh data. Please try again."}finally{n.value=!1}}),A=()=>{d.value=null,f.value="create",i.value=!0},M=re=>ue(this,null,function*(){try{const te=yield e.fetchAuditProgramDetails(re.name);d.value=te||re,f.value="edit",i.value=!0}catch(te){console.error("Error fetching program details:",te),d.value=re,f.value="edit",i.value=!0}}),E=re=>ue(this,null,function*(){try{const te=yield e.fetchAuditProgramDetails(re.name);c.value=te||re,a.value=!0}catch(te){console.error("Error fetching program details:",te),c.value=re,a.value=!0}}),P=re=>ue(this,null,function*(){try{const te=yield e.fetchAuditProgramDetails(re.name);te&&(d.value=ze(ge({},te),{program_id:`${te.program_id}_copy`,program_name:`${te.program_name} (Copy)`,is_template:!1,name:null}),f.value="create",i.value=!0)}catch(te){console.error("Error duplicating program:",te)}}),I=re=>ue(this,null,function*(){if(confirm(`Are you sure you want to delete "${re.program_name}"?`))try{yield e.deleteAuditProgram(re.name),s.value="Program deleted successfully",yield C(),setTimeout(()=>{s.value=""},3e3)}catch(te){console.error("Error deleting program:",te),r.value="Failed to delete program. Please try again."}}),F=()=>ue(this,null,function*(){i.value=!1,d.value=null,s.value=f.value==="edit"?"Program updated successfully":"Program created successfully",yield C(),setTimeout(()=>{s.value=""},3e3)}),L=()=>{i.value=!1,d.value=null},z=()=>{o.value=!0},N=re=>ue(this,null,function*(){try{const te=yield e.fetchAuditProgramDetails(re.name);te&&(d.value=ze(ge({},te),{program_id:"",program_name:"",is_template:!1,engagement_reference:"",name:null}),f.value="create",o.value=!1,i.value=!0)}catch(te){console.error("Error using template:",te)}}),q=re=>({Financial:"subtle",Operational:"subtle",Compliance:"subtle",IT:"subtle",Inventory:"subtle",Cash:"subtle",Sales:"subtle",Procurement:"subtle"})[re]||"subtle",V=re=>re>=100?"bg-green-500":re>=75?"bg-blue-500":re>=50?"bg-yellow-500":re>=25?"bg-orange-500":"bg-red-500",O=re=>({Low:"subtle",Medium:"subtle",High:"subtle"})[re]||"subtle",X=re=>re?new Date(re).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",j=re=>{const te=x.value.indexOf(re);te>-1?x.value.splice(te,1):x.value.push(re)},U=()=>{x.value.length===S.value.length?x.value=[]:x.value=S.value.map(re=>re.name)},G=()=>{x.value=[]},ee=()=>{p.value="",h.value="",m.value="",g.value=""},ie=()=>ue(this,null,function*(){if(x.value.length===0)return;const re=x.value.length;confirm(`Create templates for ${re} selected program${re>1?"s":""}?`)&&(s.value=`Created templates for ${re} program${re>1?"s":""}`,x.value=[],setTimeout(()=>{s.value=""},3e3))}),ne=()=>ue(this,null,function*(){if(x.value.length===0)return;const re=x.value.length;if(confirm(`Are you sure you want to delete ${re} program${re>1?"s":""}?`))try{for(const te of x.value)yield e.deleteAuditProgram(te);x.value=[],s.value=`Deleted ${re} program${re>1?"s":""}`,yield C(),setTimeout(()=>{s.value=""},3e3)}catch(te){console.error("Error deleting programs:",te),r.value="Failed to delete some programs. Please try again."}}),ce=()=>{const re=S.value.map(Y=>({"Program ID":Y.program_id,"Program Name":Y.program_name,"Audit Type":Y.audit_type,"Is Template":Y.is_template?"Yes":"No","Completion %":Y.completion_percent||0,Procedures:Y.total_procedures||0,Completed:Y.completed_procedures||0,Modified:X(Y.modified)})),te=[Object.keys(re[0]||{}).join(","),...re.map(Y=>Object.values(Y).map(B=>`"${B}"`).join(","))].join(`
`),K=new Blob([te],{type:"text/csv"}),le=window.URL.createObjectURL(K),H=document.createElement("a");H.href=le,H.download=`audit-programs-${new Date().toISOString().split("T")[0]}.csv`,H.click(),window.URL.revokeObjectURL(le)},oe=re=>{(re.ctrlKey||re.metaKey)&&re.key==="n"&&(re.preventDefault(),A()),re.key==="Escape"&&(i.value?(i.value=!1,d.value=null):a.value&&(a.value=!1))};return et(S,()=>{x.value=[]}),yt(()=>ue(this,null,function*(){yield C(),document.addEventListener("keydown",oe)})),ks(()=>{document.removeEventListener("keydown",oe)}),(re,te)=>{var K;return T(),R("div",Iht,[u("div",Oht,[u("div",null,[u("div",Lht,[u("div",Vht,[b(v(vt),{class:"h-6 w-6 text-purple-600"})]),te[12]||(te[12]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Programs"),u("p",{class:"text-gray-600 mt-1"}," Create and manage comprehensive audit programs with detailed procedures ")],-1))])]),u("div",Nht,[b(v(J),{variant:"outline",size:"sm",onClick:ce,disabled:_.value.length===0},{prefix:D(()=>[b(v(xn),{class:"h-4 w-4"})]),default:D(()=>[te[13]||(te[13]=W(" Export ",-1))]),_:1},8,["disabled"]),b(v(J),{variant:"outline",size:"sm",onClick:C,loading:n.value},{prefix:D(()=>[b(v(mn),{class:"h-4 w-4"})]),default:D(()=>[te[14]||(te[14]=W(" Refresh ",-1))]),_:1},8,["loading"]),b(v(J),{variant:"outline",theme:"purple",size:"sm",onClick:z,disabled:k.value.length===0},{prefix:D(()=>[b(v(Yi),{class:"h-4 w-4"})]),default:D(()=>[te[15]||(te[15]=W(" Use Template ",-1))]),_:1},8,["disabled"]),b(v(J),{variant:"solid",theme:"purple",size:"sm",onClick:A},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[te[16]||(te[16]=W(" New Program ",-1))]),_:1})])]),r.value?(T(),R("div",jht,[u("div",Fht,[u("div",Bht,[b(v(Uc),{class:"h-5 w-5 text-red-400 mr-2"}),u("p",zht,$(r.value),1)]),u("button",{onClick:te[0]||(te[0]=le=>r.value=""),class:"text-red-500 hover:text-red-700"},[b(v(ht),{class:"h-4 w-4"})])])])):se("",!0),s.value?(T(),R("div",Uht,[u("div",Hht,[u("div",qht,[b(v(ro),{class:"h-5 w-5 text-green-400 mr-2"}),u("p",Wht,$(s.value),1)]),u("button",{onClick:te[1]||(te[1]=le=>s.value=""),class:"text-green-500 hover:text-green-700"},[b(v(ht),{class:"h-4 w-4"})])])])):se("",!0),b(Pht,{stats:w.value,showDetails:l.value},null,8,["stats","showDetails"]),b(Qpt,{searchQuery:p.value,"onUpdate:searchQuery":te[2]||(te[2]=le=>p.value=le),typeFilter:h.value,"onUpdate:typeFilter":te[3]||(te[3]=le=>h.value=le),templateFilter:m.value,"onUpdate:templateFilter":te[4]||(te[4]=le=>m.value=le),statusFilter:g.value,"onUpdate:statusFilter":te[5]||(te[5]=le=>g.value=le),viewMode:y.value,"onUpdate:viewMode":te[6]||(te[6]=le=>y.value=le)},null,8,["searchQuery","typeFilter","templateFilter","statusFilter","viewMode"]),x.value.length>0?(T(),R("div",Ght,[u("div",Yht,[u("div",Kht,[u("span",Xht,$(x.value.length)+" program"+$(x.value.length>1?"s":"")+" selected ",1)]),u("div",Qht,[b(v(J),{variant:"outline",size:"sm",onClick:G},{default:D(()=>[...te[17]||(te[17]=[W("Clear Selection",-1)])]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:ie},{prefix:D(()=>[b(v(Hc),{class:"h-4 w-4"})]),default:D(()=>[te[18]||(te[18]=W(" Create Templates ",-1))]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:ne,class:"text-red-600 hover:text-red-700"},{prefix:D(()=>[b(v(es),{class:"h-4 w-4"})]),default:D(()=>[te[19]||(te[19]=W(" Delete Selected ",-1))]),_:1})])])])):se("",!0),u("div",Zht,[u("div",Jht,[u("div",emt,[te[20]||(te[20]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Audit Programs",-1)),u("div",tmt,[u("span",nmt," Showing "+$(S.value.length)+" of "+$(_.value.length)+" programs ",1),y.value==="table"&&S.value.length>0?(T(),he(v(J),{key:0,variant:"outline",size:"sm",onClick:U},{default:D(()=>[W($(x.value.length===S.value.length?"Deselect All":"Select All"),1)]),_:1})):se("",!0)])])]),y.value==="table"?(T(),R("div",rmt,[u("table",smt,[u("thead",imt,[u("tr",null,[u("th",amt,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-500",checked:x.value.length===S.value.length&&S.value.length>0,onChange:U},null,40,omt)]),te[21]||(te[21]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Program",-1)),te[22]||(te[22]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type",-1)),te[23]||(te[23]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Template",-1)),te[24]||(te[24]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Completion",-1)),te[25]||(te[25]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Procedures",-1)),te[26]||(te[26]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions",-1))])]),u("tbody",lmt,[(T(!0),R(xe,null,_e(S.value,le=>(T(),R("tr",{key:le.name,class:pe(["hover:bg-gray-50 transition-colors",{"bg-purple-50":x.value.includes(le.name)}])},[u("td",umt,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-500",checked:x.value.includes(le.name),onChange:H=>j(le.name)},null,40,dmt)]),u("td",cmt,[u("div",fmt,[u("div",pmt,[u("div",hmt,$((le.audit_type||"AU").substring(0,2).toUpperCase()),1)]),u("div",mmt,[u("div",gmt,$(le.program_id),1),u("div",vmt,$(le.program_name),1)])])]),u("td",ymt,[b(v(De),{variant:q(le.audit_type),size:"sm"},{default:D(()=>[W($(le.audit_type),1)]),_:2},1032,["variant"])]),u("td",bmt,[le.is_template?(T(),he(v(De),{key:0,variant:"subtle",theme:"purple",size:"sm"},{default:D(()=>[b(v(vt),{class:"h-3 w-3 mr-1"}),te[27]||(te[27]=W(" Template ",-1))]),_:1})):(T(),R("span",xmt,"-"))]),u("td",_mt,[u("div",wmt,[u("div",kmt,[u("div",{class:pe([V(le.completion_percent||0),"h-2 rounded-full transition-all duration-300"]),style:rt({width:`${le.completion_percent||0}%`})},null,6)]),u("span",Smt,$(le.completion_percent||0)+"%",1)])]),u("td",Cmt,[u("div",Amt,[u("span",Tmt,$(le.total_procedures||0),1),u("span",$mt,"("+$(le.completed_procedures||0)+" done)",1)])]),u("td",Mmt,[u("div",Emt,[b(v(J),{variant:"ghost",size:"sm",onClick:H=>E(le),class:"!p-1.5"},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:H=>M(le),class:"!p-1.5"},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:H=>P(le),class:"!p-1.5"},{default:D(()=>[b(v(Yi),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:H=>I(le),class:"!p-1.5 text-red-500 hover:text-red-700"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2))),128))])])])):(T(),R("div",Dmt,[u("div",Rmt,[(T(!0),R(xe,null,_e(S.value,le=>(T(),R("div",{key:le.name,class:pe(["bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",{"ring-2 ring-purple-500 bg-purple-50":x.value.includes(le.name)}]),onClick:H=>j(le.name)},[u("div",Imt,[u("div",Omt,[u("div",Lmt,$((le.audit_type||"AU").substring(0,2).toUpperCase()),1),u("div",null,[u("h3",Vmt,$(le.program_id),1),u("p",Nmt,$(le.program_name),1)])]),u("div",jmt,[b(v(De),{variant:q(le.audit_type),size:"sm"},{default:D(()=>[W($(le.audit_type),1)]),_:2},1032,["variant"]),le.is_template?(T(),he(v(De),{key:0,variant:"subtle",theme:"purple",size:"sm"},{default:D(()=>[...te[28]||(te[28]=[W(" Template ",-1)])]),_:1})):se("",!0)])]),u("div",Fmt,[u("div",null,[u("div",Bmt,[te[29]||(te[29]=u("span",{class:"text-sm text-gray-600"},"Completion",-1)),u("span",zmt,$(le.completion_percent||0)+"%",1)]),u("div",Umt,[u("div",{class:pe([V(le.completion_percent||0),"h-2 rounded-full transition-all duration-300"]),style:rt({width:`${le.completion_percent||0}%`})},null,6)])]),u("div",Hmt,[te[30]||(te[30]=u("span",{class:"text-sm text-gray-600"},"Procedures",-1)),u("span",qmt,$(le.completed_procedures||0)+"/"+$(le.total_procedures||0),1)])]),u("div",Wmt,[u("div",Gmt,[b(v(J),{variant:"ghost",size:"sm",onClick:ut(H=>E(le),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(H=>M(le),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(H=>P(le),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(Yi),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",Ymt,$(X(le.modified)),1)])],10,Pmt))),128))])])),S.value.length===0&&_.value.length===0?(T(),R("div",Kmt,[u("div",Xmt,[b(v(vt),{class:"h-10 w-10 text-purple-500"})]),u("div",Qmt,[te[32]||(te[32]=u("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Welcome to Audit Programs",-1)),te[33]||(te[33]=u("p",{class:"text-gray-600 mb-8 leading-relaxed"}," Create detailed audit programs with procedures, risk areas, and control objectives. ",-1)),u("div",Zmt,[b(v(J),{variant:"solid",theme:"purple",size:"lg",onClick:A},{prefix:D(()=>[b(v(nt),{class:"h-5 w-5"})]),default:D(()=>[te[31]||(te[31]=W(" Create Your First Program ",-1))]),_:1})])])])):S.value.length===0?(T(),R("div",Jmt,[b(v(En),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),te[35]||(te[35]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No programs found",-1)),te[36]||(te[36]=u("p",{class:"text-gray-600 mb-6"}," Try adjusting your search or filter criteria. ",-1)),b(v(J),{variant:"outline",onClick:ee},{default:D(()=>[...te[34]||(te[34]=[W("Clear Filters",-1)])]),_:1})])):se("",!0)]),b(Vpt,{show:i.value,"onUpdate:show":te[7]||(te[7]=le=>i.value=le),program:d.value,mode:f.value,onSaved:F,onClose:L},null,8,["show","program","mode"]),b(v(jt),{modelValue:a.value,"onUpdate:modelValue":te[10]||(te[10]=le=>a.value=le),options:{title:((K=c.value)==null?void 0:K.program_name)||"Program Details",size:"xl"}},{body:D(()=>{var le,H;return[c.value?(T(),R("div",egt,[u("div",tgt,[u("div",null,[u("h3",ngt,$(c.value.program_id),1),u("p",rgt,$(c.value.audit_type),1)]),c.value.is_template?(T(),he(v(De),{key:0,variant:"subtle",theme:"purple"},{default:D(()=>[...te[37]||(te[37]=[W("Template",-1)])]),_:1})):se("",!0)]),u("div",null,[te[38]||(te[38]=u("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Objectives",-1)),u("div",{class:"prose prose-sm max-w-none",innerHTML:c.value.program_objectives},null,8,sgt)]),u("div",null,[u("h4",igt,"Procedures ("+$(((le=c.value.program_procedures)==null?void 0:le.length)||0)+")",1),u("div",agt,[u("div",ogt,[u("div",null,[u("p",lgt,$(c.value.total_procedures||0),1),te[39]||(te[39]=u("p",{class:"text-xs text-gray-500"},"Total",-1))]),u("div",null,[u("p",ugt,$(c.value.completed_procedures||0),1),te[40]||(te[40]=u("p",{class:"text-xs text-gray-500"},"Completed",-1))]),u("div",null,[u("p",dgt,$(c.value.not_applicable_procedures||0),1),te[41]||(te[41]=u("p",{class:"text-xs text-gray-500"},"N/A",-1))]),u("div",null,[u("p",cgt,$(c.value.completion_percent||0)+"%",1),te[42]||(te[42]=u("p",{class:"text-xs text-gray-500"},"Complete",-1))])])])]),((H=c.value.risk_areas)==null?void 0:H.length)>0?(T(),R("div",fgt,[te[43]||(te[43]=u("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Risk Areas",-1)),u("div",pgt,[(T(!0),R(xe,null,_e(c.value.risk_areas,(Y,B)=>(T(),R("div",{key:B,class:"flex items-start gap-2 p-2 bg-gray-50 rounded-lg"},[b(v(De),{variant:O(Y.risk_rating),size:"sm"},{default:D(()=>[W($(Y.risk_rating),1)]),_:2},1032,["variant"]),u("span",hgt,$(Y.risk_description),1)]))),128))])])):se("",!0)])):se("",!0)]}),actions:D(()=>[b(v(J),{variant:"outline",onClick:te[8]||(te[8]=le=>a.value=!1)},{default:D(()=>[...te[44]||(te[44]=[W("Close",-1)])]),_:1}),b(v(J),{variant:"solid",theme:"purple",onClick:te[9]||(te[9]=le=>{M(c.value),a.value=!1})},{default:D(()=>[...te[45]||(te[45]=[W(" Edit Program ",-1)])]),_:1})]),_:1},8,["modelValue","options"]),b(v(jt),{modelValue:o.value,"onUpdate:modelValue":te[11]||(te[11]=le=>o.value=le),options:{title:"Select Template",size:"lg"}},{body:D(()=>[u("div",mgt,[te[46]||(te[46]=u("p",{class:"text-sm text-gray-600"},"Select a template to create a new program from:",-1)),u("div",ggt,[(T(!0),R(xe,null,_e(k.value,le=>(T(),R("div",{key:le.name,class:"border border-gray-200 rounded-lg p-4 hover:border-purple-500 hover:bg-purple-50 cursor-pointer transition-all",onClick:H=>N(le)},[u("div",ygt,[u("div",bgt,[b(v(vt),{class:"h-5 w-5 text-purple-600"})]),u("div",null,[u("h4",xgt,$(le.program_name),1),u("p",_gt,$(le.audit_type)+"  "+$(le.total_procedures||0)+" procedures",1)])])],8,vgt))),128))])])]),_:1},8,["modelValue"])])}}},kgt={class:"h-[80vh] flex"},Sgt={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},Cgt={class:"p-4"},Agt={class:"space-y-2"},Tgt=["onClick"],$gt={key:1},Mgt={class:"flex-1 min-w-0"},Egt={class:"text-sm font-medium text-gray-900 truncate"},Dgt={class:"text-xs text-gray-500 truncate"},Rgt={class:"mt-4 p-3 bg-white rounded-lg border border-gray-200"},Pgt={class:"flex items-center justify-between mb-2"},Igt={class:"text-xs font-semibold text-blue-600"},Ogt={class:"w-full bg-gray-200 rounded-full h-1.5"},Lgt={key:0,class:"mt-3 text-xs text-gray-500 text-center"},Vgt={class:"flex-1 overflow-y-auto"},Ngt={class:"p-6 space-y-8"},jgt={class:"space-y-6"},Fgt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Bgt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},zgt={class:"flex gap-2"},Ugt={class:"mt-6"},Hgt={class:"mt-6 flex items-center space-x-3"},qgt={class:"space-y-6"},Wgt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Ggt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ygt={class:"mt-6 p-4 bg-gray-50 rounded-lg"},Kgt={class:"grid grid-cols-3 gap-4"},Xgt={class:"text-center p-3 bg-white rounded-lg border"},Qgt={class:"text-center p-3 bg-white rounded-lg border"},Zgt={class:"text-2xl font-bold text-blue-600"},Jgt={class:"text-center p-3 bg-white rounded-lg border"},evt={class:"space-y-6"},tvt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},nvt={class:"flex items-center justify-between mb-4"},rvt={class:"text-xs text-gray-500"},svt={key:0,class:"space-y-4"},ivt={class:"flex items-start justify-between mb-4"},avt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ovt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},lvt={class:"grid grid-cols-2 gap-4"},uvt={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},dvt={class:"space-y-6"},cvt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},fvt={class:"flex items-center justify-between mb-4"},pvt={class:"text-xs text-gray-500"},hvt={key:0,class:"space-y-4"},mvt={class:"flex items-start justify-between mb-4"},gvt={class:"flex items-center gap-2"},vvt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},yvt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},bvt={class:"md:col-span-2"},xvt={class:"grid grid-cols-2 gap-4 mt-4"},_vt={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},wvt={class:"space-y-6"},kvt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Svt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Cvt={class:"flex items-center space-x-3 pt-6"},Avt={key:0,class:"mt-6"},Tvt={class:"mt-6 p-4 bg-gray-50 rounded-lg"},$vt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Mvt={class:"text-center p-3 bg-white rounded-lg border"},Evt={class:"text-lg font-bold text-gray-900"},Dvt={class:"text-center p-3 bg-white rounded-lg border"},Rvt={class:"text-center p-3 bg-white rounded-lg border"},Pvt={class:"text-lg font-bold text-blue-600"},Ivt={class:"text-center p-3 bg-white rounded-lg border"},Ovt={class:"space-y-6"},Lvt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},Vvt={class:"flex items-center justify-between w-full"},Nvt={class:"flex items-center gap-2"},jvt={class:"flex items-center gap-2"},Fvt={__name:"AuditUniverseForm",props:{show:{type:Boolean,default:!1},entity:{type:Object,default:null},mode:{type:String,default:"create"}},emits:["update:show","saved","close"],setup(t,{emit:e}){const n=t,r=e,s=qo(),i=Q(0),a=Q(!1),o=Q(!1),l=Q(null),d=Z({get:()=>n.show,set:te=>r("update:show",te)}),c=Q(f());function f(){return{universe_id:"",auditable_entity:"",entity_type:"Process",department:"",location:"",description:"",process_owner:"",is_active:!0,inherent_risk_rating:"Medium",inherent_risk_score:0,control_environment_rating:"Adequate",control_effectiveness_score:0,residual_risk_rating:"",residual_risk_score:0,risk_factors:[],key_controls:[],audit_frequency:"Annual",last_audit_date:"",last_audit_reference:"",last_audit_opinion:"",next_scheduled_audit:"",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[],notes:""}}const p=[{id:"basic",title:"Basic Information",description:"Entity details"},{id:"risk",title:"Risk Assessment",description:"Risk ratings"},{id:"factors",title:"Risk Factors",description:"Identified risks"},{id:"controls",title:"Key Controls",description:"Mitigating controls"},{id:"planning",title:"Audit Planning",description:"Scheduling"},{id:"notes",title:"Additional Info",description:"Notes & references"}],h=[{label:"Process",value:"Process"},{label:"Function",value:"Function"},{label:"Department",value:"Department"},{label:"Location",value:"Location"},{label:"System",value:"System"},{label:"Compliance Area",value:"Compliance Area"}],m=[{label:"Head Office",value:"Head Office"},{label:"Branch 1",value:"Branch 1"},{label:"Branch 2",value:"Branch 2"},{label:"Warehouse",value:"Warehouse"},{label:"All",value:"All"}],g=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],y=[{label:"Strong",value:"Strong"},{label:"Adequate",value:"Adequate"},{label:"Weak",value:"Weak"},{label:"Not Assessed",value:"Not Assessed"}],x=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"Strategic",value:"Strategic"},{label:"Reputational",value:"Reputational"},{label:"Technology",value:"Technology"},{label:"Human Resources",value:"Human Resources"}],_=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],k=[{label:"Very High",value:"Very High"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],w=[{label:"Not Mitigated",value:"Not Mitigated"},{label:"Partially Mitigated",value:"Partially Mitigated"},{label:"Fully Mitigated",value:"Fully Mitigated"},{label:"Accepted",value:"Accepted"}],S=[{label:"Preventive",value:"Preventive"},{label:"Detective",value:"Detective"},{label:"Corrective",value:"Corrective"},{label:"Directive",value:"Directive"}],C=[{label:"Continuous",value:"Continuous"},{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Annually",value:"Annually"},{label:"Ad-hoc",value:"Ad-hoc"}],A=[{label:"Very Effective",value:"Very Effective"},{label:"Effective",value:"Effective"},{label:"Partially Effective",value:"Partially Effective"},{label:"Ineffective",value:"Ineffective"}],M=[{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"Bi-Annual",value:"Bi-Annual"},{label:"Tri-Annual",value:"Tri-Annual"},{label:"As Needed",value:"As Needed"}],E=[{label:"Satisfactory",value:"Satisfactory"},{label:"Needs Improvement",value:"Needs Improvement"},{label:"Unsatisfactory",value:"Unsatisfactory"}];et(()=>n.entity,te=>{te?c.value=ze(ge(ge({},f()),te),{risk_factors:te.risk_factors||[],key_controls:te.key_controls||[],bc_data_sources:te.bc_data_sources||[]}):c.value=f(),i.value=0},{immediate:!0}),et(()=>n.show,te=>{te||(i.value=0,l.value=null)}),et([()=>c.value.inherent_risk_score,()=>c.value.control_effectiveness_score],()=>{const te=c.value.inherent_risk_score||0,K=c.value.control_effectiveness_score||0;c.value.residual_risk_score=Math.max(0,te-te*K/100),c.value.residual_risk_score>=75?c.value.residual_risk_rating="Critical":c.value.residual_risk_score>=50?c.value.residual_risk_rating="High":c.value.residual_risk_score>=25?c.value.residual_risk_rating="Medium":c.value.residual_risk_rating="Low"});const P=Z(()=>{var K,le;let te=0;return c.value.universe_id&&c.value.auditable_entity&&c.value.entity_type&&(te+=20),c.value.inherent_risk_rating&&(te+=20),((K=c.value.risk_factors)==null?void 0:K.length)>0&&(te+=20),((le=c.value.key_controls)==null?void 0:le.length)>0&&(te+=20),c.value.audit_frequency&&(te+=20),te}),I=Z(()=>c.value.universe_id&&c.value.auditable_entity&&c.value.entity_type&&c.value.inherent_risk_rating),F=te=>{var K,le;switch(te){case"basic":return c.value.universe_id&&c.value.auditable_entity&&c.value.entity_type;case"risk":return!!c.value.inherent_risk_rating;case"factors":return((K=c.value.risk_factors)==null?void 0:K.length)>0;case"controls":return((le=c.value.key_controls)==null?void 0:le.length)>0;case"planning":return!!c.value.audit_frequency;case"notes":return!0;default:return!1}},L=te=>F(te)?"bg-green-500 text-white":"bg-gray-300 text-gray-600",z=te=>{i.value=te},N=()=>{i.value>0&&i.value--},q=()=>{i.value<p.length-1&&i.value++},V=()=>{const te=Math.floor(Math.random()*1e3).toString().padStart(3,"0");c.value.universe_id=`AUE-${te}`},O=()=>{c.value.risk_factors.push({risk_category:"Operational",risk_description:"",risk_impact:"Medium",risk_likelihood:"Medium",risk_weight:0,mitigation_status:"Not Mitigated"})},X=te=>{c.value.risk_factors.splice(te,1)},j=()=>{c.value.key_controls.push({control_id:"",control_description:"",control_type:"Preventive",control_owner:"",control_frequency:"Monthly",control_effectiveness:"Effective",last_tested_date:"",next_test_date:""})},U=te=>{c.value.key_controls.splice(te,1)},G=te=>te>=75?"text-red-600":te>=50?"text-orange-600":te>=25?"text-amber-600":"text-green-600",ee=te=>({Critical:"subtle",High:"subtle",Medium:"subtle",Low:"subtle"})[te]||"subtle",ie=te=>"subtle",ne=te=>({Satisfactory:"subtle","Needs Improvement":"subtle",Unsatisfactory:"subtle"})[te]||"subtle",ce=te=>te?new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",oe=()=>ue(this,null,function*(){var te;a.value=!0;try{n.mode==="edit"&&((te=n.entity)!=null&&te.name)?yield s.updateAuditUniverse(n.entity.name,c.value):yield s.createAuditUniverse(c.value),l.value=new Date().toLocaleTimeString()}catch(K){console.error("Error saving draft:",K)}finally{a.value=!1}}),re=()=>ue(this,null,function*(){var te;o.value=!0;try{n.mode==="edit"&&((te=n.entity)!=null&&te.name)?yield s.updateAuditUniverse(n.entity.name,c.value):yield s.createAuditUniverse(c.value),r("saved"),r("update:show",!1)}catch(K){console.error("Error submitting form:",K)}finally{o.value=!1}});return(te,K)=>(T(),he(v(jt),{modelValue:d.value,"onUpdate:modelValue":K[22]||(K[22]=le=>d.value=le),options:{title:t.mode==="edit"?"Edit Audit Entity":"Create Audit Entity",size:"full"}},{body:D(()=>{var le,H,Y,B;return[u("div",kgt,[u("div",Sgt,[u("div",Cgt,[K[24]||(K[24]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Progress",-1)),u("div",Agt,[(T(),R(xe,null,_e(p,(ae,be)=>u("div",{key:ae.id,class:pe(["flex items-center space-x-2 p-2 rounded-lg cursor-pointer transition-all",i.value===be?"bg-blue-100 border border-blue-300":"hover:bg-gray-100"]),onClick:fe=>z(be)},[u("div",{class:pe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold",L(ae.id)])},[F(ae.id)?(T(),he(v(Fr),{key:0,class:"h-3 w-3"})):(T(),R("span",$gt,$(be+1),1))],2),u("div",Mgt,[u("div",Egt,$(ae.title),1),u("div",Dgt,$(ae.description),1)])],10,Tgt)),64))]),u("div",Rgt,[u("div",Pgt,[K[23]||(K[23]=u("span",{class:"text-xs font-medium text-gray-700"},"Overall Progress",-1)),u("span",Igt,$(P.value)+"%",1)]),u("div",Ogt,[u("div",{class:"bg-blue-600 h-1.5 rounded-full transition-all duration-500",style:rt({width:`${P.value}%`})},null,4)])]),l.value?(T(),R("div",Lgt," Last saved: "+$(l.value),1)):se("",!0)])]),u("div",Vgt,[u("div",Ngt,[we(u("div",jgt,[b(Vt,{title:"Basic Information",description:"Entity identification and classification",sectionNumber:1,color:"blue"}),u("div",Fgt,[u("div",Bgt,[u("div",null,[K[25]||(K[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Universe ID "),u("span",{class:"text-red-500"},"*")],-1)),u("div",zgt,[b(v(ve),{modelValue:c.value.universe_id,"onUpdate:modelValue":K[0]||(K[0]=ae=>c.value.universe_id=ae),placeholder:"e.g., AUE-001",class:"flex-1"},null,8,["modelValue"]),b(v(J),{variant:"outline",size:"sm",onClick:V},{default:D(()=>[b(v(mn),{class:"h-4 w-4"})]),_:1})])]),b(v(ve),{modelValue:c.value.auditable_entity,"onUpdate:modelValue":K[1]||(K[1]=ae=>c.value.auditable_entity=ae),label:"Auditable Entity",placeholder:"Enter entity name",required:!0},null,8,["modelValue"]),u("div",null,[K[26]||(K[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Entity Type "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:c.value.entity_type,"onUpdate:modelValue":K[2]||(K[2]=ae=>c.value.entity_type=ae),options:h},null,8,["modelValue"])]),u("div",null,[K[27]||(K[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Department",-1)),b(Mt,{modelValue:c.value.department,"onUpdate:modelValue":K[3]||(K[3]=ae=>c.value.department=ae),doctype:"Department",placeholder:"Select department"},null,8,["modelValue"])]),u("div",null,[K[28]||(K[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),b(v(ve),{type:"select",modelValue:c.value.location,"onUpdate:modelValue":K[4]||(K[4]=ae=>c.value.location=ae),options:m},null,8,["modelValue"])]),u("div",null,[K[29]||(K[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Process Owner",-1)),b(Mt,{modelValue:c.value.process_owner,"onUpdate:modelValue":K[5]||(K[5]=ae=>c.value.process_owner=ae),doctype:"User",placeholder:"Select process owner"},null,8,["modelValue"])])]),u("div",Ugt,[K[30]||(K[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),b(v(an),{content:c.value.description,onChange:K[6]||(K[6]=ae=>c.value.description=ae),placeholder:"Describe the auditable entity...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",Hgt,[we(u("input",{type:"checkbox","onUpdate:modelValue":K[7]||(K[7]=ae=>c.value.is_active=ae),class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[Rn,c.value.is_active]]),K[31]||(K[31]=u("label",{class:"text-sm text-gray-700"},"Entity is Active",-1))])])],512),[[lt,i.value===0]]),we(u("div",qgt,[b(Vt,{title:"Risk Assessment",description:"Inherent and residual risk evaluation",sectionNumber:2,color:"red"}),u("div",Wgt,[u("div",Ggt,[u("div",null,[K[32]||(K[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Inherent Risk Rating "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:c.value.inherent_risk_rating,"onUpdate:modelValue":K[8]||(K[8]=ae=>c.value.inherent_risk_rating=ae),options:g},null,8,["modelValue"])]),b(v(ve),{modelValue:c.value.inherent_risk_score,"onUpdate:modelValue":K[9]||(K[9]=ae=>c.value.inherent_risk_score=ae),type:"number",label:"Inherent Risk Score",placeholder:"0-100",min:"0",max:"100"},null,8,["modelValue"]),u("div",null,[K[33]||(K[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Control Environment Rating ",-1)),b(v(ve),{type:"select",modelValue:c.value.control_environment_rating,"onUpdate:modelValue":K[10]||(K[10]=ae=>c.value.control_environment_rating=ae),options:y},null,8,["modelValue"])]),b(v(ve),{modelValue:c.value.control_effectiveness_score,"onUpdate:modelValue":K[11]||(K[11]=ae=>c.value.control_effectiveness_score=ae),type:"number",label:"Control Effectiveness Score",placeholder:"0-100",min:"0",max:"100"},null,8,["modelValue"]),u("div",null,[K[34]||(K[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Residual Risk Rating ",-1)),b(v(ve),{type:"select",modelValue:c.value.residual_risk_rating,"onUpdate:modelValue":K[12]||(K[12]=ae=>c.value.residual_risk_rating=ae),options:g,disabled:""},null,8,["modelValue"]),K[35]||(K[35]=u("p",{class:"text-xs text-gray-500 mt-1"},"Auto-calculated",-1))]),b(v(ve),{modelValue:c.value.residual_risk_score,"onUpdate:modelValue":K[13]||(K[13]=ae=>c.value.residual_risk_score=ae),type:"number",label:"Residual Risk Score",placeholder:"Auto-calculated",disabled:""},null,8,["modelValue"])]),u("div",Ygt,[K[39]||(K[39]=u("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Risk Score Summary",-1)),u("div",Kgt,[u("div",Xgt,[u("p",{class:pe(["text-2xl font-bold",G(c.value.inherent_risk_score)])},$(c.value.inherent_risk_score||0),3),K[36]||(K[36]=u("p",{class:"text-xs text-gray-500"},"Inherent Risk",-1))]),u("div",Qgt,[u("p",Zgt,$(c.value.control_effectiveness_score||0),1),K[37]||(K[37]=u("p",{class:"text-xs text-gray-500"},"Control Score",-1))]),u("div",Jgt,[u("p",{class:pe(["text-2xl font-bold",G(c.value.residual_risk_score)])},$(c.value.residual_risk_score||0),3),K[38]||(K[38]=u("p",{class:"text-xs text-gray-500"},"Residual Risk",-1))])])])])],512),[[lt,i.value===1]]),we(u("div",evt,[b(Vt,{title:"Risk Factors",description:"Identified risk factors for this entity",sectionNumber:3,color:"orange"}),u("div",tvt,[u("div",nvt,[u("div",null,[K[40]||(K[40]=u("h4",{class:"text-sm font-medium text-gray-900"},"Risk Factors",-1)),u("p",rvt,$(((le=c.value.risk_factors)==null?void 0:le.length)||0)+" factors identified",1)]),b(v(J),{variant:"outline",size:"sm",onClick:O},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[K[41]||(K[41]=W(" Add Risk Factor ",-1))]),_:1})]),((H=c.value.risk_factors)==null?void 0:H.length)>0?(T(),R("div",svt,[(T(!0),R(xe,null,_e(c.value.risk_factors,(ae,be)=>(T(),R("div",{key:be,class:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors"},[u("div",ivt,[b(v(De),{variant:ee(ae.risk_impact),size:"sm"},{default:D(()=>[W($(ae.risk_impact||"Not Rated"),1)]),_:2},1032,["variant"]),b(v(J),{variant:"ghost",size:"sm",onClick:fe=>X(be),class:"text-red-500"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",avt,[u("div",null,[K[42]||(K[42]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Category",-1)),b(v(ve),{type:"select",modelValue:ae.risk_category,"onUpdate:modelValue":fe=>ae.risk_category=fe,options:x,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[K[43]||(K[43]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Impact",-1)),b(v(ve),{type:"select",modelValue:ae.risk_impact,"onUpdate:modelValue":fe=>ae.risk_impact=fe,options:_,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[K[44]||(K[44]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Likelihood",-1)),b(v(ve),{type:"select",modelValue:ae.risk_likelihood,"onUpdate:modelValue":fe=>ae.risk_likelihood=fe,options:k,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",ovt,[b(v(ve),{modelValue:ae.risk_description,"onUpdate:modelValue":fe=>ae.risk_description=fe,type:"textarea",label:"Description",placeholder:"Describe the risk factor...",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",lvt,[b(v(ve),{modelValue:ae.risk_weight,"onUpdate:modelValue":fe=>ae.risk_weight=fe,type:"number",label:"Weight (%)",placeholder:"0-100",min:"0",max:"100",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[K[45]||(K[45]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Mitigation",-1)),b(v(ve),{type:"select",modelValue:ae.mitigation_status,"onUpdate:modelValue":fe=>ae.mitigation_status=fe,options:w,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])])])]))),128))])):(T(),R("div",uvt,[b(v(rn),{class:"mx-auto h-12 w-12 text-gray-400"}),K[47]||(K[47]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No risk factors defined",-1)),K[48]||(K[48]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add risk factors to assess this entity.",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-4",onClick:O},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[K[46]||(K[46]=W(" Add First Risk Factor ",-1))]),_:1})]))])],512),[[lt,i.value===2]]),we(u("div",dvt,[b(Vt,{title:"Key Controls",description:"Controls mitigating identified risks",sectionNumber:4,color:"green"}),u("div",cvt,[u("div",fvt,[u("div",null,[K[49]||(K[49]=u("h4",{class:"text-sm font-medium text-gray-900"},"Key Controls",-1)),u("p",pvt,$(((Y=c.value.key_controls)==null?void 0:Y.length)||0)+" controls defined",1)]),b(v(J),{variant:"outline",size:"sm",onClick:j},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[K[50]||(K[50]=W(" Add Control ",-1))]),_:1})]),((B=c.value.key_controls)==null?void 0:B.length)>0?(T(),R("div",hvt,[(T(!0),R(xe,null,_e(c.value.key_controls,(ae,be)=>(T(),R("div",{key:be,class:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors"},[u("div",mvt,[u("div",gvt,[b(v(De),{variant:"subtle",size:"sm"},{default:D(()=>[W($(ae.control_id||"New"),1)]),_:2},1024),b(v(De),{variant:ie(ae.control_effectiveness),size:"sm"},{default:D(()=>[W($(ae.control_effectiveness||"Not Rated"),1)]),_:2},1032,["variant"])]),b(v(J),{variant:"ghost",size:"sm",onClick:fe=>U(be),class:"text-red-500"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",vvt,[b(v(ve),{modelValue:ae.control_id,"onUpdate:modelValue":fe=>ae.control_id=fe,label:"Control ID",placeholder:"CTL-001",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[K[51]||(K[51]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Type",-1)),b(v(ve),{type:"select",modelValue:ae.control_type,"onUpdate:modelValue":fe=>ae.control_type=fe,options:S,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[K[52]||(K[52]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Frequency",-1)),b(v(ve),{type:"select",modelValue:ae.control_frequency,"onUpdate:modelValue":fe=>ae.control_frequency=fe,options:C,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[K[53]||(K[53]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Effectiveness",-1)),b(v(ve),{type:"select",modelValue:ae.control_effectiveness,"onUpdate:modelValue":fe=>ae.control_effectiveness=fe,options:A,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",yvt,[u("div",bvt,[b(v(ve),{modelValue:ae.control_description,"onUpdate:modelValue":fe=>ae.control_description=fe,type:"textarea",label:"Description",placeholder:"Describe the control...",rows:"2",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[K[54]||(K[54]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Control Owner",-1)),b(Mt,{modelValue:ae.control_owner,"onUpdate:modelValue":fe=>ae.control_owner=fe,doctype:"User",placeholder:"Select owner"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",xvt,[b(v(ve),{modelValue:ae.last_tested_date,"onUpdate:modelValue":fe=>ae.last_tested_date=fe,type:"date",label:"Last Tested",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),b(v(ve),{modelValue:ae.next_test_date,"onUpdate:modelValue":fe=>ae.next_test_date=fe,type:"date",label:"Next Test Date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):(T(),R("div",_vt,[b(v(Ju),{class:"mx-auto h-12 w-12 text-gray-400"}),K[56]||(K[56]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No controls defined",-1)),K[57]||(K[57]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add key controls for this entity.",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-4",onClick:j},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[K[55]||(K[55]=W(" Add First Control ",-1))]),_:1})]))])],512),[[lt,i.value===3]]),we(u("div",wvt,[b(Vt,{title:"Audit Planning",description:"Audit frequency and scheduling information",sectionNumber:5,color:"purple"}),u("div",kvt,[u("div",Svt,[u("div",null,[K[58]||(K[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Frequency "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:c.value.audit_frequency,"onUpdate:modelValue":K[14]||(K[14]=ae=>c.value.audit_frequency=ae),options:M},null,8,["modelValue"])]),b(v(ve),{modelValue:c.value.last_audit_date,"onUpdate:modelValue":K[15]||(K[15]=ae=>c.value.last_audit_date=ae),type:"date",label:"Last Audit Date"},null,8,["modelValue"]),u("div",null,[K[59]||(K[59]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Reference",-1)),b(Mt,{modelValue:c.value.last_audit_reference,"onUpdate:modelValue":K[16]||(K[16]=ae=>c.value.last_audit_reference=ae),doctype:"Audit Engagement",placeholder:"Select engagement"},null,8,["modelValue"])]),u("div",null,[K[60]||(K[60]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Audit Opinion",-1)),b(v(ve),{type:"select",modelValue:c.value.last_audit_opinion,"onUpdate:modelValue":K[17]||(K[17]=ae=>c.value.last_audit_opinion=ae),options:E},null,8,["modelValue"])]),b(v(ve),{modelValue:c.value.next_scheduled_audit,"onUpdate:modelValue":K[18]||(K[18]=ae=>c.value.next_scheduled_audit=ae),type:"date",label:"Next Scheduled Audit",disabled:""},null,8,["modelValue"]),u("div",Cvt,[we(u("input",{type:"checkbox","onUpdate:modelValue":K[19]||(K[19]=ae=>c.value.mandatory_audit=ae),class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[Rn,c.value.mandatory_audit]]),K[61]||(K[61]=u("label",{class:"text-sm text-gray-700"},"Mandatory Audit (Regulatory)",-1))])]),c.value.mandatory_audit?(T(),R("div",Avt,[b(v(ve),{modelValue:c.value.regulatory_reference,"onUpdate:modelValue":K[20]||(K[20]=ae=>c.value.regulatory_reference=ae),label:"Regulatory Reference",placeholder:"Enter regulatory requirement reference..."},null,8,["modelValue"])])):se("",!0),u("div",Tvt,[K[66]||(K[66]=u("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Audit History Summary",-1)),u("div",$vt,[u("div",Mvt,[u("p",Evt,$(c.value.last_audit_date?ce(c.value.last_audit_date):"Never"),1),K[62]||(K[62]=u("p",{class:"text-xs text-gray-500"},"Last Audited",-1))]),u("div",Dvt,[b(v(De),{variant:ne(c.value.last_audit_opinion),size:"sm"},{default:D(()=>[W($(c.value.last_audit_opinion||"N/A"),1)]),_:1},8,["variant"]),K[63]||(K[63]=u("p",{class:"text-xs text-gray-500 mt-1"},"Last Opinion",-1))]),u("div",Rvt,[u("p",Pvt,$(c.value.audit_frequency||"Not Set"),1),K[64]||(K[64]=u("p",{class:"text-xs text-gray-500"},"Frequency",-1))]),u("div",Ivt,[u("p",{class:pe(["text-lg font-bold",c.value.mandatory_audit?"text-red-600":"text-gray-600"])},$(c.value.mandatory_audit?"Yes":"No"),3),K[65]||(K[65]=u("p",{class:"text-xs text-gray-500"},"Mandatory",-1))])])])])],512),[[lt,i.value===4]]),we(u("div",Ovt,[b(Vt,{title:"Additional Information",description:"Notes and data source references",sectionNumber:6,color:"gray"}),u("div",Lvt,[u("div",null,[K[67]||(K[67]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes",-1)),b(v(an),{content:c.value.notes,onChange:K[21]||(K[21]=ae=>c.value.notes=ae),placeholder:"Add any additional notes...",editable:!0,editorClass:"min-h-[200px] prose-sm"},null,8,["content"])])])],512),[[lt,i.value===5]])])])])]}),actions:D(()=>[u("div",Vvt,[u("div",Nvt,[i.value>0?(T(),he(v(J),{key:0,variant:"outline",onClick:N},{prefix:D(()=>[b(v(gr),{class:"h-4 w-4"})]),default:D(()=>[K[68]||(K[68]=W(" Previous ",-1))]),_:1})):se("",!0)]),u("div",jvt,[b(v(J),{variant:"outline",onClick:oe,loading:a.value},{prefix:D(()=>[b(v($r),{class:"h-4 w-4"})]),default:D(()=>[K[69]||(K[69]=W(" Save Draft ",-1))]),_:1},8,["loading"]),i.value<p.length-1?(T(),he(v(J),{key:0,variant:"solid",theme:"blue",onClick:q},{suffix:D(()=>[b(v(sr),{class:"h-4 w-4"})]),default:D(()=>[K[70]||(K[70]=W(" Next ",-1))]),_:1})):(T(),he(v(J),{key:1,variant:"solid",theme:"blue",onClick:re,loading:o.value,disabled:!I.value},{prefix:D(()=>[b(v(Fr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+$(t.mode==="edit"?"Update Entity":"Create Entity"),1)]),_:1},8,["loading","disabled"]))])])]),_:1},8,["modelValue","options"]))}},Bvt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-5 mb-6"},zvt={class:"flex flex-wrap items-center justify-between gap-4"},Uvt={class:"flex flex-wrap items-center gap-3"},Hvt={class:"relative"},qvt={class:"w-44"},Wvt={class:"flex items-center gap-2"},Gvt={key:0,class:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-100"},Yvt={__name:"UniverseFilters",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","refresh","export","create"],setup(t,{emit:e}){const n=t,r=e,s=Jt({search:"",entityType:"",riskRating:"",department:"",status:""}),i=[{label:"All Types",value:""},{label:"Process",value:"Process"},{label:"Function",value:"Function"},{label:"Department",value:"Department"},{label:"Location",value:"Location"},{label:"System",value:"System"},{label:"Compliance Area",value:"Compliance Area"}],a=[{label:"All Risk Levels",value:""},{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],o=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],l=Z(()=>s.search||s.entityType||s.riskRating||s.department||s.status),d=()=>{r("update:modelValue",ge({},s))},c=()=>{s.search="",s.entityType="",s.riskRating="",s.department="",s.status="",d()};return et(()=>n.modelValue,f=>{f&&Object.assign(s,f)},{deep:!0,immediate:!0}),(f,p)=>(T(),R("div",Bvt,[u("div",zvt,[u("div",Uvt,[u("div",Hvt,[b(v(En),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),we(u("input",{"onUpdate:modelValue":p[0]||(p[0]=h=>s.search=h),type:"text",placeholder:"Search entities...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm w-64 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:d},null,544),[[Rt,s.search]])]),b(v(ve),{type:"select",modelValue:s.entityType,"onUpdate:modelValue":p[1]||(p[1]=h=>s.entityType=h),options:i,placeholder:"All Types",class:"w-40",onChange:d},null,8,["modelValue"]),b(v(ve),{type:"select",modelValue:s.riskRating,"onUpdate:modelValue":p[2]||(p[2]=h=>s.riskRating=h),options:a,placeholder:"All Risk Levels",class:"w-40",onChange:d},null,8,["modelValue"]),u("div",qvt,[b(Mt,{modelValue:s.department,"onUpdate:modelValue":p[3]||(p[3]=h=>s.department=h),doctype:"Department",placeholder:"Department",onChange:d},null,8,["modelValue"])]),b(v(ve),{type:"select",modelValue:s.status,"onUpdate:modelValue":p[4]||(p[4]=h=>s.status=h),options:o,placeholder:"All Status",class:"w-32",onChange:d},null,8,["modelValue"]),l.value?(T(),he(v(J),{key:0,variant:"ghost",size:"sm",onClick:c},{default:D(()=>[b(v(ht),{class:"h-4 w-4 mr-1"}),p[12]||(p[12]=W(" Clear ",-1))]),_:1})):se("",!0)]),u("div",Wvt,[b(v(J),{variant:"outline",size:"sm",onClick:p[5]||(p[5]=h=>f.$emit("refresh"))},{default:D(()=>[b(v(mn),{class:"h-4 w-4"})]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:p[6]||(p[6]=h=>f.$emit("export"))},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-1"}),p[13]||(p[13]=W(" Export ",-1))]),_:1}),b(v(J),{variant:"solid",theme:"blue",size:"sm",onClick:p[7]||(p[7]=h=>f.$emit("create"))},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-1"}),p[14]||(p[14]=W(" Add Entity ",-1))]),_:1})])]),l.value?(T(),R("div",Gvt,[s.entityType?(T(),he(v(De),{key:0,variant:"outline",class:"cursor-pointer",onClick:p[8]||(p[8]=h=>{s.entityType="",d()})},{default:D(()=>[W(" Type: "+$(s.entityType)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.riskRating?(T(),he(v(De),{key:1,variant:"outline",class:"cursor-pointer",onClick:p[9]||(p[9]=h=>{s.riskRating="",d()})},{default:D(()=>[W(" Risk: "+$(s.riskRating)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.department?(T(),he(v(De),{key:2,variant:"outline",class:"cursor-pointer",onClick:p[10]||(p[10]=h=>{s.department="",d()})},{default:D(()=>[W(" Dept: "+$(s.department)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.status?(T(),he(v(De),{key:3,variant:"outline",class:"cursor-pointer",onClick:p[11]||(p[11]=h=>{s.status="",d()})},{default:D(()=>[W(" Status: "+$(s.status==="active"?"Active":"Inactive")+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0)])):se("",!0)]))}},Kvt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4 mb-6"},Xvt={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-5 hover:shadow-lg transition-all duration-200"},Qvt={class:"flex items-center justify-between"},Zvt={class:"text-3xl font-bold text-blue-900 mt-1"},Jvt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},eyt={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200 p-5 hover:shadow-lg transition-all duration-200"},tyt={class:"flex items-center justify-between"},nyt={class:"text-3xl font-bold text-red-900 mt-1"},ryt={class:"p-3 bg-red-500 rounded-xl shadow-sm"},syt={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200 p-5 hover:shadow-lg transition-all duration-200"},iyt={class:"flex items-center justify-between"},ayt={class:"text-3xl font-bold text-orange-900 mt-1"},oyt={class:"p-3 bg-orange-500 rounded-xl shadow-sm"},lyt={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-5 hover:shadow-lg transition-all duration-200"},uyt={class:"flex items-center justify-between"},dyt={class:"text-3xl font-bold text-purple-900 mt-1"},cyt={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},fyt={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-5 hover:shadow-lg transition-all duration-200"},pyt={class:"flex items-center justify-between"},hyt={class:"text-3xl font-bold text-green-900 mt-1"},myt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},gyt={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},vyt={class:"bg-white rounded-xl border border-gray-200 p-5"},yyt={class:"space-y-3"},byt={class:"w-20 text-sm text-gray-600"},xyt={class:"flex-1 mx-3"},_yt={class:"w-full bg-gray-100 rounded-full h-3"},wyt={class:"w-10 text-sm font-medium text-gray-900 text-right"},kyt={class:"bg-white rounded-xl border border-gray-200 p-5"},Syt={class:"grid grid-cols-2 gap-3"},Cyt={class:"text-lg font-bold text-blue-600"},Ayt={class:"text-xs text-gray-500 truncate"},Tyt={class:"bg-white rounded-xl border border-gray-200 p-5"},$yt={class:"space-y-3"},Myt={class:"text-sm text-gray-600"},Eyt={class:"flex items-center gap-2"},Dyt={class:"w-16 bg-gray-100 rounded-full h-2"},Ryt={class:"text-sm font-medium text-gray-900 w-8 text-right"},Pyt={key:1,class:"bg-white rounded-xl border border-gray-200 p-5 mb-6"},Iyt={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},Oyt={class:"text-center p-4 bg-red-50 rounded-lg"},Lyt={class:"text-2xl font-bold text-red-600"},Vyt={class:"text-center p-4 bg-amber-50 rounded-lg"},Nyt={class:"text-2xl font-bold text-amber-600"},jyt={class:"text-center p-4 bg-purple-50 rounded-lg"},Fyt={class:"text-2xl font-bold text-purple-600"},Byt={class:"text-center p-4 bg-blue-50 rounded-lg"},zyt={class:"text-2xl font-bold text-blue-600"},Uyt={class:"text-center p-4 bg-gray-50 rounded-lg"},Hyt={class:"text-2xl font-bold text-gray-600"},qyt={__name:"UniverseStats",props:{stats:{type:Object,default:()=>({total:0,criticalRisk:0,highRisk:0,mediumRisk:0,lowRisk:0,active:0,inactive:0,dueThisQuarter:0,dueThisMonth:0,overdue:0,mandatory:0,byType:{},byControlEnvironment:{}})},showDetails:{type:Boolean,default:!0}},setup(t){const e=t,n=Z(()=>{const i=e.stats.total||1;return[{label:"Critical",count:e.stats.criticalRisk||0,percentage:(e.stats.criticalRisk||0)/i*100,color:"bg-red-500"},{label:"High",count:e.stats.highRisk||0,percentage:(e.stats.highRisk||0)/i*100,color:"bg-orange-500"},{label:"Medium",count:e.stats.mediumRisk||0,percentage:(e.stats.mediumRisk||0)/i*100,color:"bg-amber-500"},{label:"Low",count:e.stats.lowRisk||0,percentage:(e.stats.lowRisk||0)/i*100,color:"bg-green-500"}]}),r=Z(()=>{const i=e.stats.byType||{};return Object.entries(i).map(([a,o])=>({label:a,count:o}))}),s=Z(()=>{const i=e.stats.byControlEnvironment||{},a=Object.values(i).reduce((l,d)=>l+d,0)||1,o={Strong:"bg-green-500",Adequate:"bg-blue-500",Weak:"bg-orange-500","Not Assessed":"bg-gray-400"};return Object.entries(i).map(([l,d])=>({label:l,count:d,percentage:d/a*100,color:o[l]||"bg-gray-400"}))});return(i,a)=>(T(),R(xe,null,[u("div",Kvt,[u("div",Xvt,[u("div",Qvt,[u("div",null,[a[0]||(a[0]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Total Entities",-1)),u("p",Zvt,$(t.stats.total||0),1),a[1]||(a[1]=u("p",{class:"text-xs text-blue-600 mt-1"},"Auditable universe",-1))]),u("div",Jvt,[b(v(Ol),{class:"h-7 w-7 text-white"})])])]),u("div",eyt,[u("div",tyt,[u("div",null,[a[2]||(a[2]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Critical Risk",-1)),u("p",nyt,$(t.stats.criticalRisk||0),1),a[3]||(a[3]=u("p",{class:"text-xs text-red-600 mt-1"},"High priority",-1))]),u("div",ryt,[b(v(rn),{class:"h-7 w-7 text-white"})])])]),u("div",syt,[u("div",iyt,[u("div",null,[a[4]||(a[4]=u("p",{class:"text-sm font-semibold text-orange-700 uppercase tracking-wide"},"High Risk",-1)),u("p",ayt,$(t.stats.highRisk||0),1),a[5]||(a[5]=u("p",{class:"text-xs text-orange-600 mt-1"},"Medium priority",-1))]),u("div",oyt,[b(v(qr),{class:"h-7 w-7 text-white"})])])]),u("div",lyt,[u("div",uyt,[u("div",null,[a[6]||(a[6]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Due This Quarter",-1)),u("p",dyt,$(t.stats.dueThisQuarter||0),1),a[7]||(a[7]=u("p",{class:"text-xs text-purple-600 mt-1"},"Upcoming audits",-1))]),u("div",cyt,[b(v(rr),{class:"h-7 w-7 text-white"})])])]),u("div",fyt,[u("div",pyt,[u("div",null,[a[8]||(a[8]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Active",-1)),u("p",hyt,$(t.stats.active||0),1),a[9]||(a[9]=u("p",{class:"text-xs text-green-600 mt-1"},"In scope entities",-1))]),u("div",myt,[b(v(Kt),{class:"h-7 w-7 text-white"})])])])]),t.showDetails?(T(),R("div",gyt,[u("div",vyt,[a[10]||(a[10]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Risk Distribution",-1)),u("div",yyt,[(T(!0),R(xe,null,_e(n.value,o=>(T(),R("div",{key:o.label,class:"flex items-center"},[u("div",byt,$(o.label),1),u("div",xyt,[u("div",_yt,[u("div",{class:pe(["h-3 rounded-full transition-all duration-300",o.color]),style:rt({width:`${o.percentage}%`})},null,6)])]),u("div",wyt,$(o.count),1)]))),128))])]),u("div",kyt,[a[11]||(a[11]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Entity Types",-1)),u("div",Syt,[(T(!0),R(xe,null,_e(r.value,o=>(T(),R("div",{key:o.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[u("p",Cyt,$(o.count),1),u("p",Ayt,$(o.label),1)]))),128))])]),u("div",Tyt,[a[12]||(a[12]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Control Environment",-1)),u("div",$yt,[(T(!0),R(xe,null,_e(s.value,o=>(T(),R("div",{key:o.label,class:"flex items-center justify-between"},[u("span",Myt,$(o.label),1),u("div",Eyt,[u("div",Dyt,[u("div",{class:pe(["h-2 rounded-full transition-all duration-300",o.color]),style:rt({width:`${o.percentage}%`})},null,6)]),u("span",Ryt,$(o.count),1)])]))),128))])])])):se("",!0),t.showDetails?(T(),R("div",Pyt,[a[18]||(a[18]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Audit Schedule Summary",-1)),u("div",Iyt,[u("div",Oyt,[u("p",Lyt,$(t.stats.overdue||0),1),a[13]||(a[13]=u("p",{class:"text-xs text-red-700"},"Overdue",-1))]),u("div",Vyt,[u("p",Nyt,$(t.stats.dueThisMonth||0),1),a[14]||(a[14]=u("p",{class:"text-xs text-amber-700"},"Due This Month",-1))]),u("div",jyt,[u("p",Fyt,$(t.stats.dueThisQuarter||0),1),a[15]||(a[15]=u("p",{class:"text-xs text-purple-700"},"Due This Quarter",-1))]),u("div",Byt,[u("p",zyt,$(t.stats.mandatory||0),1),a[16]||(a[16]=u("p",{class:"text-xs text-blue-700"},"Mandatory",-1))]),u("div",Uyt,[u("p",Hyt,$(t.stats.inactive||0),1),a[17]||(a[17]=u("p",{class:"text-xs text-gray-700"},"Inactive",-1))])])])):se("",!0)],64))}},Wyt={class:"space-y-6"},Gyt={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},Yyt={class:"flex items-center space-x-3"},Kyt={class:"p-2 bg-blue-100 rounded-lg"},Xyt={class:"flex flex-wrap items-center gap-3"},Qyt={class:"flex items-center space-x-2"},Zyt={class:"p-1"},Jyt={class:"p-1"},e0t={class:"p-1"},t0t={class:"p-1"},n0t={class:"bg-white rounded-xl border border-gray-200 shadow-sm"},r0t={class:"px-6 py-4 border-b border-gray-200"},s0t={class:"flex items-center justify-between"},i0t={class:"flex items-center space-x-2"},a0t={key:0,class:"p-1"},o0t={key:0,class:"overflow-x-auto"},l0t={class:"min-w-full divide-y divide-gray-200"},u0t={class:"bg-gray-50"},d0t={class:"px-6 py-3 text-left"},c0t=["checked"],f0t={class:"flex items-center space-x-1"},p0t={class:"flex items-center space-x-1"},h0t={class:"bg-white divide-y divide-gray-200"},m0t={class:"px-6 py-4"},g0t=["checked","onChange"],v0t={class:"px-6 py-4 whitespace-nowrap"},y0t={class:"flex items-center"},b0t={class:"flex-shrink-0 h-10 w-10"},x0t={class:"h-10 w-10 rounded-lg bg-blue-500 flex items-center justify-center text-white font-bold text-sm"},_0t={class:"ml-4"},w0t={class:"text-sm font-semibold text-gray-900"},k0t={class:"text-sm text-gray-500"},S0t={class:"px-6 py-4 whitespace-nowrap"},C0t={class:"text-sm font-medium text-gray-900"},A0t={class:"px-6 py-4 whitespace-nowrap"},T0t={class:"px-6 py-4 whitespace-nowrap"},$0t={class:"px-6 py-4 whitespace-nowrap"},M0t={key:0},E0t={class:"text-sm font-medium"},D0t={class:"text-xs text-gray-600"},R0t={key:1,class:"text-gray-400 text-sm"},P0t={class:"px-6 py-4 whitespace-nowrap"},I0t={key:0},O0t={class:"text-sm font-medium"},L0t={key:1,class:"text-gray-400 text-sm"},V0t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},N0t={class:"flex items-center space-x-1"},j0t={key:1,class:"p-6"},F0t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},B0t=["onClick"],z0t={class:"flex items-start justify-between mb-4"},U0t={class:"flex items-center space-x-3"},H0t={class:"h-12 w-12 rounded-xl bg-blue-500 flex items-center justify-center text-white font-bold"},q0t={class:"text-lg font-semibold text-gray-900 group-hover:text-blue-900"},W0t={class:"text-sm text-gray-600"},G0t={class:"space-y-3"},Y0t={class:"flex justify-between items-center"},K0t={class:"text-sm font-medium"},X0t={class:"flex justify-between items-center"},Q0t={class:"text-sm font-medium"},Z0t={key:0,class:"flex justify-between items-center"},J0t={class:"flex justify-between items-center"},e1t={class:"text-sm font-medium"},t1t={class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200"},n1t={class:"flex items-center space-x-1"},r1t={key:2,class:"px-6 py-20 text-center"},s1t={class:"mx-auto h-20 w-20 rounded-2xl bg-blue-50 border-2 border-blue-100 flex items-center justify-center mb-8 shadow-sm"},i1t={class:"max-w-md mx-auto"},a1t={class:"flex flex-col sm:flex-row justify-center gap-3"},o1t={key:3,class:"px-6 py-12 text-center"},l1t={class:"p-1"},u1t={class:"space-y-6 p-6 bg-gray-50"},d1t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6"},c1t={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-blue-300 cursor-pointer transition-all duration-200 group"},f1t={class:"flex items-start space-x-4 mb-5"},p1t={class:"flex-shrink-0 p-3 bg-blue-50 rounded-xl group-hover:bg-blue-100 transition-colors"},h1t={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-green-300 cursor-pointer transition-all duration-200 group"},m1t={class:"flex items-start space-x-4 mb-5"},g1t={class:"flex-shrink-0 p-3 bg-green-50 rounded-xl group-hover:bg-green-100 transition-colors"},v1t={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-purple-300 cursor-pointer transition-all duration-200 group"},y1t={class:"flex items-start space-x-4 mb-5"},b1t={class:"flex-shrink-0 p-3 bg-purple-50 rounded-xl group-hover:bg-purple-100 transition-colors"},x1t={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-amber-300 cursor-pointer transition-all duration-200 group"},_1t={class:"flex items-start space-x-4 mb-5"},w1t={class:"flex-shrink-0 p-3 bg-amber-50 rounded-xl group-hover:bg-amber-100 transition-colors"},k1t={class:"space-y-6"},S1t={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},C1t={class:"text-blue-800"},A1t={class:"font-semibold"},T1t={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$1t={class:"p-1"},M1t={class:"flex flex-col items-center justify-center space-y-2"},E1t={class:"p-1"},D1t={class:"flex flex-col items-center justify-center space-y-2"},R1t={class:"p-1"},P1t={class:"flex flex-col items-center justify-center space-y-2"},I1t={class:"p-1"},O1t={class:"flex flex-col items-center justify-center space-y-2"},L1t={class:"space-y-6"},V1t={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},N1t={class:"bg-red-50 rounded-lg p-6"},j1t={class:"space-y-3"},F1t={class:"flex justify-between"},B1t={class:"font-medium text-red-900"},z1t={class:"flex justify-between"},U1t={class:"font-medium text-red-900"},H1t={class:"bg-amber-50 rounded-lg p-6"},q1t={class:"space-y-3"},W1t={class:"flex justify-between"},G1t={class:"font-medium text-amber-900"},Y1t={class:"flex justify-between"},K1t={class:"font-medium text-amber-900"},X1t={class:"bg-green-50 rounded-lg p-6"},Q1t={class:"space-y-3"},Z1t={class:"flex justify-between"},J1t={class:"font-medium text-green-900"},ebt={class:"flex justify-between"},tbt={class:"font-medium text-green-900"},nbt={__name:"AuditUniverse",setup(t){const e=_n(),n=Q(!1),r=Q(!1),s=Q("table"),i=Q([]),a=Q("auditable_entity"),o=Q("asc"),l=Q(!1),d=Q(!1),c=Q(!1),f=Q(!1),p=Q(null),h=Q("create"),m=Q({search:"",entityType:"",riskRating:"",department:"",status:""}),g=Q([{universe_id:"AU-001",auditable_entity:"Accounts Payable",entity_type:"Process",department:"Finance",location:"Head Office",description:"Processing of vendor payments and expense reimbursements",process_owner:"John Doe",inherent_risk_rating:"High",inherent_risk_score:15,control_environment_rating:"Adequate",control_effectiveness_score:3,residual_risk_rating:"Medium",residual_risk_score:5,risk_factors:[],key_controls:[],audit_frequency:"Quarterly",last_audit_date:"2023-10-15",last_audit_opinion:"Satisfactory",next_scheduled_audit:"2024-01-15",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[],notes:"",is_active:!0},{universe_id:"AU-002",auditable_entity:"IT Security Controls",entity_type:"System",department:"IT",location:"Head Office",description:"Access controls, data protection, and cybersecurity measures",process_owner:"Jane Smith",inherent_risk_rating:"Critical",inherent_risk_score:25,control_environment_rating:"Strong",control_effectiveness_score:4,residual_risk_rating:"High",residual_risk_score:6,risk_factors:[],key_controls:[],audit_frequency:"Quarterly",last_audit_date:"2023-08-20",last_audit_opinion:"Needs Improvement",next_scheduled_audit:"2023-11-20",mandatory_audit:!0,regulatory_reference:"CBK Cybersecurity Guidelines",bc_data_sources:[],notes:"",is_active:!0},{universe_id:"AU-003",auditable_entity:"Inventory Management",entity_type:"Process",department:"Operations",location:"Warehouse",description:"Stock control, valuation, and warehouse operations",process_owner:"Bob Johnson",inherent_risk_rating:"Medium",inherent_risk_score:8,control_environment_rating:"Adequate",control_effectiveness_score:3,residual_risk_rating:"Low",residual_risk_score:3,risk_factors:[],key_controls:[],audit_frequency:"Semi-Annual",last_audit_date:"2023-09-10",last_audit_opinion:"Satisfactory",next_scheduled_audit:"2024-03-10",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[],notes:"",is_active:!0},{universe_id:"AU-004",auditable_entity:"HR Payroll",entity_type:"Process",department:"HR",location:"Head Office",description:"Employee compensation, benefits, and payroll processing",process_owner:"Alice Brown",inherent_risk_rating:"High",inherent_risk_score:15,control_environment_rating:"Weak",control_effectiveness_score:2,residual_risk_rating:"High",residual_risk_score:8,risk_factors:[],key_controls:[],audit_frequency:"Quarterly",last_audit_date:null,last_audit_opinion:"",next_scheduled_audit:"2023-12-01",mandatory_audit:!0,regulatory_reference:"Employment Act, PAYE Regulations",bc_data_sources:[],notes:"",is_active:!0},{universe_id:"AU-005",auditable_entity:"Sales Order Processing",entity_type:"Process",department:"Sales",location:"Head Office",description:"Customer order processing and fulfillment",process_owner:"Charlie Wilson",inherent_risk_rating:"Medium",inherent_risk_score:8,control_environment_rating:"Adequate",control_effectiveness_score:3,residual_risk_rating:"Low",residual_risk_score:3,risk_factors:[],key_controls:[],audit_frequency:"Semi-Annual",last_audit_date:"2023-07-15",last_audit_opinion:"Satisfactory",next_scheduled_audit:"2024-01-15",mandatory_audit:!1,regulatory_reference:"",bc_data_sources:[],notes:"",is_active:!1}]),y=Z(()=>g.value.length),x=Z(()=>g.value.filter(G=>G.residual_risk_rating==="Critical").length),_=Z(()=>g.value.filter(G=>G.residual_risk_rating==="High").length);Z(()=>{const G=new Date,ee=new Date(G.getFullYear(),Math.floor(G.getMonth()/3)*3+3,0);return g.value.filter(ie=>ie.next_scheduled_audit?new Date(ie.next_scheduled_audit)<=ee:!1).length}),Z(()=>g.value.filter(G=>!G.is_active).length);const k=Z(()=>{let G=[...g.value];if(m.value.search){const ee=m.value.search.toLowerCase();G=G.filter(ie=>{var ne,ce,oe,re;return((ne=ie.auditable_entity)==null?void 0:ne.toLowerCase().includes(ee))||((ce=ie.description)==null?void 0:ce.toLowerCase().includes(ee))||((oe=ie.process_owner)==null?void 0:oe.toLowerCase().includes(ee))||((re=ie.department)==null?void 0:re.toLowerCase().includes(ee))})}return m.value.riskRating&&(G=G.filter(ee=>ee.residual_risk_rating===m.value.riskRating)),m.value.entityType&&(G=G.filter(ee=>ee.entity_type===m.value.entityType)),m.value.department&&(G=G.filter(ee=>ee.department===m.value.department)),m.value.status&&(G=G.filter(ee=>m.value.status==="active"&&ee.is_active||m.value.status==="inactive"&&!ee.is_active)),G.sort((ee,ie)=>{const ne=ee[a.value]||"",ce=ie[a.value]||"";return o.value==="asc"?ne>ce?1:-1:ne<ce?1:-1}),G}),w=Z(()=>{const G=g.value.length,ee=g.value.filter(fe=>fe.residual_risk_rating==="Critical").length,ie=g.value.filter(fe=>fe.residual_risk_rating==="High").length,ne=g.value.filter(fe=>fe.residual_risk_rating==="Medium").length,ce=g.value.filter(fe=>fe.residual_risk_rating==="Low").length,oe=g.value.filter(fe=>fe.is_active).length,re=g.value.filter(fe=>!fe.is_active).length,te=new Date,K=new Date(te.getFullYear(),Math.floor(te.getMonth()/3)*3+3,0),le=g.value.filter(fe=>fe.next_scheduled_audit?new Date(fe.next_scheduled_audit)<=K:!1).length,H=g.value.filter(fe=>{if(!fe.next_scheduled_audit)return!1;const me=new Date(fe.next_scheduled_audit),ye=new Date(te.getFullYear(),te.getMonth()+1,0);return me<=ye}).length,Y=g.value.filter(fe=>fe.next_scheduled_audit?new Date(fe.next_scheduled_audit)<te:!1).length,B=g.value.filter(fe=>fe.mandatory_audit).length,ae={};g.value.forEach(fe=>{ae[fe.entity_type]=(ae[fe.entity_type]||0)+1});const be={};return g.value.forEach(fe=>{be[fe.control_environment_rating]=(be[fe.control_environment_rating]||0)+1}),{total:G,criticalRisk:ee,highRisk:ie,mediumRisk:ne,lowRisk:ce,active:oe,inactive:re,dueThisQuarter:le,dueThisMonth:H,overdue:Y,mandatory:B,byType:ae,byControlEnvironment:be}}),S=G=>({Critical:"danger",High:"danger",Medium:"warning",Low:"success"})[G]||"secondary",C=G=>new Date(G).toLocaleDateString(),A=G=>G?new Date(G)<new Date:!1,M=()=>ue(this,null,function*(){n.value=!0;try{console.log("Refreshing audit universe data...")}finally{n.value=!1}}),E=G=>{e.push(`/audit-planning/universe/${G.universe_id}`)},P=G=>{console.log("Schedule audit for:",G.universe_id)},I=G=>{G.is_active=!G.is_active,console.log("Toggled status for:",G.universe_id,"to:",G.is_active)},F=G=>{const ee=i.value.indexOf(G);ee>-1?i.value.splice(ee,1):i.value.push(G)},L=()=>{i.value.length===k.value.length?i.value=[]:i.value=k.value.map(G=>G.universe_id)},z=G=>{a.value===G?o.value=o.value==="asc"?"desc":"asc":(a.value=G,o.value="asc")},N=()=>{m.value={search:"",entityType:"",riskRating:"",department:"",status:""},i.value=[]},q=()=>{p.value=null,h.value="create",f.value=!0},V=G=>{p.value=G,h.value="edit",f.value=!0},O=()=>{M(),f.value=!1,p.value=null},X=()=>{console.log("Bulk update status for:",i.value),d.value=!1},j=()=>{console.log("Bulk export for:",i.value),d.value=!1},U=()=>{console.log("Bulk delete for:",i.value),d.value=!1};return(G,ee)=>(T(),R(xe,null,[u("div",Wyt,[u("div",Gyt,[u("div",null,[u("div",Yyt,[u("div",Kyt,[b(v(ei),{class:"h-6 w-6 text-blue-600"})]),ee[11]||(ee[11]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Universe"),u("p",{class:"text-gray-600 mt-1"}," Manage auditable entities, risk areas, and audit planning scope ")],-1))])]),u("div",Xyt,[u("div",Qyt,[u("div",Zyt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:G.exportEntities,loading:r.value},{prefix:D(()=>[b(v(xn),{class:"h-3.5 w-3.5"})]),default:D(()=>[ee[12]||(ee[12]=W(" Export ",-1))]),_:1},8,["onClick","loading"])]),u("div",Jyt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ee[0]||(ee[0]=ie=>l.value=!0)},{prefix:D(()=>[b(v(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[ee[13]||(ee[13]=W(" Templates ",-1))]),_:1})]),u("div",e0t,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:M,loading:n.value},{prefix:D(()=>[b(v(mn),{class:"h-3.5 w-3.5"})]),default:D(()=>[ee[14]||(ee[14]=W(" Refresh ",-1))]),_:1},8,["loading"])]),u("div",t0t,[b(v(J),{variant:"solid",theme:"blue",size:"sm",onClick:q},{prefix:D(()=>[b(v(nt),{class:"h-3.5 w-3.5"})]),default:D(()=>[ee[15]||(ee[15]=W(" Add Entity ",-1))]),_:1})])])])]),b(qyt,{stats:w.value},null,8,["stats"]),b(Yvt,{modelValue:m.value,"onUpdate:modelValue":ee[1]||(ee[1]=ie=>m.value=ie),onRefresh:M,onExport:G.exportEntities,onCreate:ee[2]||(ee[2]=ie=>f.value=!0)},null,8,["modelValue","onExport"]),u("div",n0t,[u("div",r0t,[u("div",s0t,[ee[16]||(ee[16]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Auditable Entities",-1)),u("div",i0t,[s.value==="table"&&k.value.length>0?(T(),R("div",a0t,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:L},{default:D(()=>[W($(i.value.length===k.value.length?"Deselect All":"Select All"),1)]),_:1})])):se("",!0)])])]),s.value==="table"?(T(),R("div",o0t,[u("table",l0t,[u("thead",u0t,[u("tr",null,[u("th",d0t,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:i.value.length===k.value.length&&k.value.length>0,onChange:L},null,40,c0t)]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:ee[3]||(ee[3]=ie=>z("auditable_entity"))},[u("div",f0t,[ee[17]||(ee[17]=u("span",null,"Entity Name",-1)),b(v(Zu),{class:"h-3 w-3"})])]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:ee[4]||(ee[4]=ie=>z("entity_type"))},[u("div",p0t,[ee[18]||(ee[18]=u("span",null,"Type",-1)),b(v(Zu),{class:"h-3 w-3"})])]),ee[19]||(ee[19]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Risk Level ",-1)),ee[20]||(ee[20]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),ee[21]||(ee[21]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Audit ",-1)),ee[22]||(ee[22]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Next Due ",-1)),ee[23]||(ee[23]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",h0t,[(T(!0),R(xe,null,_e(k.value,ie=>(T(),R("tr",{key:ie.universe_id,class:pe(["hover:bg-gray-50 transition-colors",{"bg-blue-50":i.value.includes(ie.universe_id)}])},[u("td",m0t,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:i.value.includes(ie.universe_id),onChange:ne=>F(ie.universe_id)},null,40,g0t)]),u("td",v0t,[u("div",y0t,[u("div",b0t,[u("div",x0t,$(ie.universe_id.slice(-2)),1)]),u("div",_0t,[u("div",w0t,$(ie.auditable_entity),1),u("div",k0t,$(ie.department),1)])])]),u("td",S0t,[u("div",C0t,$(ie.entity_type),1)]),u("td",A0t,[b(v(De),{variant:S(ie.residual_risk_rating)},{default:D(()=>[W($(ie.residual_risk_rating),1)]),_:2},1032,["variant"])]),u("td",T0t,[b(v(De),{variant:ie.is_active?"success":"secondary"},{default:D(()=>[W($(ie.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),u("td",$0t,[ie.last_audit_date?(T(),R("div",M0t,[u("p",E0t,$(C(ie.last_audit_date)),1),u("p",D0t,$(ie.last_audit_opinion),1)])):(T(),R("span",R0t,"Never"))]),u("td",P0t,[ie.next_scheduled_audit?(T(),R("div",I0t,[u("p",O0t,$(C(ie.next_scheduled_audit)),1),A(ie.next_scheduled_audit)?(T(),he(v(De),{key:0,variant:"danger",size:"sm",class:"mt-1"},{default:D(()=>[...ee[24]||(ee[24]=[W(" Overdue ",-1)])]),_:1})):se("",!0)])):(T(),R("span",L0t,"Not scheduled"))]),u("td",V0t,[u("div",N0t,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ne=>E(ie),class:"!p-1.5"},{default:D(()=>[b(v(lr),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ne=>V(ie),class:"!p-1.5"},{default:D(()=>[b(v(yn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ne=>P(ie),class:"!p-1.5"},{default:D(()=>[b(v(rr),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ne=>I(ie),class:pe(["!p-1.5",ie.is_active?"text-orange-600":"text-green-600"])},{default:D(()=>[b(v(ZL),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick","class"])])])],2))),128))])])])):(T(),R("div",j0t,[u("div",F0t,[(T(!0),R(xe,null,_e(k.value,ie=>(T(),R("div",{key:ie.universe_id,class:pe(["bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",{"ring-2 ring-blue-500 bg-blue-50":i.value.includes(ie.universe_id)}]),onClick:ne=>F(ie.universe_id)},[u("div",z0t,[u("div",U0t,[u("div",H0t,$(ie.universe_id.slice(-2)),1),u("div",null,[u("h3",q0t,$(ie.auditable_entity),1),u("p",W0t,$(ie.entity_type),1)])]),b(v(De),{variant:S(ie.residual_risk_rating),size:"sm"},{default:D(()=>[W($(ie.residual_risk_rating),1)]),_:2},1032,["variant"])]),u("div",G0t,[u("div",Y0t,[ee[25]||(ee[25]=u("span",{class:"text-sm text-gray-600"},"Department",-1)),u("span",K0t,$(ie.department),1)]),u("div",X0t,[ee[26]||(ee[26]=u("span",{class:"text-sm text-gray-600"},"Location",-1)),u("span",Q0t,$(ie.location),1)]),ie.next_scheduled_audit?(T(),R("div",Z0t,[ee[27]||(ee[27]=u("span",{class:"text-sm text-gray-600"},"Next Audit",-1)),u("span",{class:pe(["text-sm font-medium",A(ie.next_scheduled_audit)?"text-red-600":""])},$(C(ie.next_scheduled_audit)),3)])):se("",!0),u("div",J0t,[ee[28]||(ee[28]=u("span",{class:"text-sm text-gray-600"},"Risk Score",-1)),u("span",e1t,$(ie.residual_risk_score),1)])]),u("div",t1t,[b(v(De),{variant:ie.is_active?"success":"secondary",size:"sm"},{default:D(()=>[W($(ie.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),u("div",n1t,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ut(ne=>E(ie),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(lr),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ut(ne=>V(ie),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(yn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ut(ne=>P(ie),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(rr),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"])])])],10,B0t))),128))])])),k.value.length===0&&g.value.length===0?(T(),R("div",r1t,[u("div",s1t,[b(v(ei),{class:"h-10 w-10 text-blue-500"})]),u("div",i1t,[ee[31]||(ee[31]=u("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Welcome to Audit Universe",-1)),ee[32]||(ee[32]=u("p",{class:"text-gray-600 mb-8 leading-relaxed"}," Define your auditable entities and establish the foundation for comprehensive audit planning. ",-1)),u("div",a1t,[b(v(J),{variant:"solid",theme:"blue",size:"lg",onClick:q,class:"shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(v(nt),{class:"h-5 w-5"})]),default:D(()=>[ee[29]||(ee[29]=W(" Add Your First Entity ",-1))]),_:1}),b(v(J),{variant:"outline",theme:"gray",size:"lg",onClick:ee[5]||(ee[5]=ie=>l.value=!0),class:"border-gray-300 hover:border-gray-400"},{prefix:D(()=>[b(v(vt),{class:"h-5 w-5"})]),default:D(()=>[ee[30]||(ee[30]=W(" Browse Templates ",-1))]),_:1})])]),ee[33]||(ee[33]=fr('<div class="mt-12 max-w-2xl mx-auto"><div class="bg-gray-50 border border-gray-200 rounded-xl p-6"><h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center"><div class="h-2 w-2 bg-blue-500 rounded-full mr-3"></div> Quick Start Tips </h4><div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-blue-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-blue-600 font-semibold text-xs">1</span></div><div><p class="font-medium text-gray-900">Define Entities</p><p class="text-gray-600">Identify all auditable processes and systems</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-green-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-green-600 font-semibold text-xs">2</span></div><div><p class="font-medium text-gray-900">Assess Risk</p><p class="text-gray-600">Evaluate inherent and residual risk levels</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-purple-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-purple-600 font-semibold text-xs">3</span></div><div><p class="font-medium text-gray-900">Plan Audits</p><p class="text-gray-600">Schedule audits based on risk and frequency</p></div></div></div></div></div>',1))])):k.value.length===0?(T(),R("div",o1t,[b(v(En),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),ee[35]||(ee[35]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No entities found",-1)),ee[36]||(ee[36]=u("p",{class:"text-gray-600 mb-6"}," Try adjusting your search or filter criteria to find the entities you're looking for. ",-1)),u("div",l1t,[b(v(J),{variant:"solid",theme:"gray",onClick:N},{default:D(()=>[...ee[34]||(ee[34]=[W(" Clear Filters ",-1)])]),_:1})])])):se("",!0)]),b(v(jt),{modelValue:l.value,"onUpdate:modelValue":ee[6]||(ee[6]=ie=>l.value=ie),title:"Entity Templates",options:{size:"custom",width:"70vw"}},{body:D(()=>[u("div",u1t,[ee[49]||(ee[49]=u("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[u("p",{class:"text-blue-800 text-sm"},[W("  "),u("strong",null,"Pro Tip:"),W(" Templates provide a structured starting point with pre-configured risk assessments and audit frequencies. ")])],-1)),u("div",d1t,[u("div",c1t,[u("div",f1t,[u("div",p1t,[b(v(Ol),{class:"h-6 w-6 text-blue-600"})]),ee[37]||(ee[37]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-blue-900 transition-colors"},"Financial Process Template"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Pre-configured template for financial processes with standard risk assessments")],-1))]),ee[39]||(ee[39]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-blue-400 rounded-full"}),u("span",null,"Revenue cycle processes")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-blue-400 rounded-full"}),u("span",null,"Expenditure management")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-blue-400 rounded-full"}),u("span",null,"Financial reporting")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-blue-400 rounded-full"}),u("span",null,"Quarterly audit frequency")])])],-1)),b(v(J),{variant:"solid",theme:"blue",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[ee[38]||(ee[38]=W(" Use This Template ",-1))]),_:1})]),u("div",h1t,[u("div",m1t,[u("div",g1t,[b(v(ei),{class:"h-6 w-6 text-green-600"})]),ee[40]||(ee[40]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-green-900 transition-colors"},"IT Systems Template"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Template for IT systems and cybersecurity controls")],-1))]),ee[42]||(ee[42]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-green-400 rounded-full"}),u("span",null,"Access controls")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-green-400 rounded-full"}),u("span",null,"Data protection")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-green-400 rounded-full"}),u("span",null,"System security")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-green-400 rounded-full"}),u("span",null,"Quarterly audit frequency")])])],-1)),b(v(J),{variant:"solid",theme:"green",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(v(ei),{class:"h-4 w-4"})]),default:D(()=>[ee[41]||(ee[41]=W(" Use This Template ",-1))]),_:1})]),u("div",v1t,[u("div",y1t,[u("div",b1t,[b(v(Ji),{class:"h-6 w-6 text-purple-600"})]),ee[43]||(ee[43]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-purple-900 transition-colors"},"HR Operations Template"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Template for HR processes and compliance requirements")],-1))]),ee[45]||(ee[45]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-purple-400 rounded-full"}),u("span",null,"Payroll processing")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-purple-400 rounded-full"}),u("span",null,"Employee records")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-purple-400 rounded-full"}),u("span",null,"Benefits administration")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-purple-400 rounded-full"}),u("span",null,"Annual audit frequency")])])],-1)),b(v(J),{variant:"solid",theme:"gray",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow bg-purple-600 hover:bg-purple-700 text-white border-purple-600"},{prefix:D(()=>[b(v(Ji),{class:"h-4 w-4"})]),default:D(()=>[ee[44]||(ee[44]=W(" Use This Template ",-1))]),_:1})]),u("div",x1t,[u("div",_1t,[u("div",w1t,[b(v(Ns),{class:"h-6 w-6 text-amber-600"})]),ee[46]||(ee[46]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-amber-900 transition-colors"},"Operations Template"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Template for operational processes and efficiency controls")],-1))]),ee[48]||(ee[48]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-amber-400 rounded-full"}),u("span",null,"Procurement processes")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-amber-400 rounded-full"}),u("span",null,"Inventory management")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-amber-400 rounded-full"}),u("span",null,"Quality control")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-amber-400 rounded-full"}),u("span",null,"Semi-annual audit frequency")])])],-1)),b(v(J),{variant:"solid",theme:"gray",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow bg-amber-500 hover:bg-amber-600 text-white border-amber-500"},{prefix:D(()=>[b(v(Ns),{class:"h-4 w-4"})]),default:D(()=>[ee[47]||(ee[47]=W(" Use This Template ",-1))]),_:1})])])])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:d.value,"onUpdate:modelValue":ee[8]||(ee[8]=ie=>d.value=ie),title:"Bulk Actions",size:"xl"},{body:D(()=>[u("div",k1t,[u("div",S1t,[u("p",C1t,[u("span",A1t,$(i.value.length),1),ee[50]||(ee[50]=W(" entit(ies) selected for bulk action. ",-1))])]),u("div",T1t,[u("div",$1t,[b(v(J),{variant:"solid",theme:"green",class:"h-20 w-full",onClick:X},{default:D(()=>[u("div",M1t,[b(v(ZL),{class:"h-5 w-5"}),ee[51]||(ee[51]=u("span",{class:"text-sm font-medium"},"Update Status",-1))])]),_:1})]),u("div",E1t,[b(v(J),{variant:"solid",theme:"blue",class:"h-20 w-full",onClick:j},{default:D(()=>[u("div",D1t,[b(v(xn),{class:"h-5 w-5"}),ee[52]||(ee[52]=u("span",{class:"text-sm font-medium"},"Export Selected",-1))])]),_:1})]),u("div",R1t,[b(v(J),{variant:"solid",theme:"purple",class:"h-20 w-full",onClick:ee[7]||(ee[7]=ie=>{c.value=!0,d.value=!1})},{default:D(()=>[u("div",P1t,[b(v(hr),{class:"h-5 w-5"}),ee[53]||(ee[53]=u("span",{class:"text-sm font-medium"},"Risk Analysis",-1))])]),_:1})]),u("div",I1t,[b(v(J),{variant:"solid",theme:"red",class:"h-20 w-full",onClick:U},{default:D(()=>[u("div",O1t,[b(v(es),{class:"h-5 w-5"}),ee[54]||(ee[54]=u("span",{class:"text-sm font-medium"},"Delete Selected",-1))])]),_:1})])])])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:c.value,"onUpdate:modelValue":ee[9]||(ee[9]=ie=>c.value=ie),title:"Risk Analysis Dashboard",size:"5xl"},{body:D(()=>[u("div",L1t,[u("div",V1t,[u("div",N1t,[ee[58]||(ee[58]=u("h3",{class:"text-lg font-semibold text-red-900 mb-4"},"Critical Risk Entities",-1)),u("div",j1t,[u("div",F1t,[ee[55]||(ee[55]=u("span",{class:"text-red-700"},"Count",-1)),u("span",B1t,$(x.value),1)]),u("div",z1t,[ee[56]||(ee[56]=u("span",{class:"text-red-700"},"Percentage",-1)),u("span",U1t,$((x.value/Math.max(y.value,1)*100).toFixed(1))+"%",1)]),ee[57]||(ee[57]=u("div",{class:"flex justify-between"},[u("span",{class:"text-red-700"},"Priority Level"),u("span",{class:"font-medium text-red-900"},"High")],-1))])]),u("div",H1t,[ee[62]||(ee[62]=u("h3",{class:"text-lg font-semibold text-amber-900 mb-4"},"High Risk Entities",-1)),u("div",q1t,[u("div",W1t,[ee[59]||(ee[59]=u("span",{class:"text-amber-700"},"Count",-1)),u("span",G1t,$(_.value),1)]),u("div",Y1t,[ee[60]||(ee[60]=u("span",{class:"text-amber-700"},"Percentage",-1)),u("span",K1t,$((_.value/Math.max(y.value,1)*100).toFixed(1))+"%",1)]),ee[61]||(ee[61]=u("div",{class:"flex justify-between"},[u("span",{class:"text-amber-700"},"Priority Level"),u("span",{class:"font-medium text-amber-900"},"Medium")],-1))])]),u("div",X1t,[ee[66]||(ee[66]=u("h3",{class:"text-lg font-semibold text-green-900 mb-4"},"Low Risk Entities",-1)),u("div",Q1t,[u("div",Z1t,[ee[63]||(ee[63]=u("span",{class:"text-green-700"},"Count",-1)),u("span",J1t,$(g.value.value.filter(ie=>ie.residual_risk_rating==="Low").length),1)]),u("div",ebt,[ee[64]||(ee[64]=u("span",{class:"text-green-700"},"Percentage",-1)),u("span",tbt,$((g.value.value.filter(ie=>ie.residual_risk_rating==="Low").length/Math.max(y.value,1)*100).toFixed(1))+"%",1)]),ee[65]||(ee[65]=u("div",{class:"flex justify-between"},[u("span",{class:"text-green-700"},"Priority Level"),u("span",{class:"font-medium text-green-900"},"Low")],-1))])])]),ee[67]||(ee[67]=u("div",{class:"bg-white border border-gray-200 rounded-lg p-6"},[u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Distribution"),u("div",{class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},[u("p",{class:"text-gray-500"},"Risk distribution chart would be displayed here")])],-1))])]),_:1},8,["modelValue"])]),b(Fvt,{show:f.value,entity:p.value,mode:h.value,"onUpdate:show":ee[10]||(ee[10]=ie=>f.value=ie),onSaved:O},null,8,["show","entity","mode"])],64))}},rbt={class:"board-report-form"},sbt={class:"form-sections"},ibt={class:"form-section"},abt={class:"form-grid"},obt={class:"form-section"},lbt={class:"form-grid"},ubt={__name:"BoardReportForm",props:{formData:{type:Object,required:!0,default:()=>({title:"",period:"",type:"Comprehensive",presentationDate:"",focusAreas:"",notes:""})}},setup(t){const e=[{label:"Q1 2025",value:"Q1 2025"},{label:"Q2 2025",value:"Q2 2025"},{label:"Q3 2025",value:"Q3 2025"},{label:"Q4 2025",value:"Q4 2025"},{label:"Annual 2025",value:"Annual 2025"},{label:"Q1 2026",value:"Q1 2026"}],n=[{label:"Comprehensive",value:"Comprehensive"},{label:"Financial Focus",value:"Financial Focus"},{label:"Risk & Compliance",value:"Risk & Compliance"},{label:"Operational Review",value:"Operational Review"}];return(r,s)=>(T(),R("div",rbt,[u("div",sbt,[u("div",ibt,[s[6]||(s[6]=u("h3",{class:"section-title"},"Basic Information",-1)),u("div",abt,[b(v(ve),{label:"Report Title",modelValue:t.formData.title,"onUpdate:modelValue":s[0]||(s[0]=i=>t.formData.title=i),type:"text",placeholder:"e.g., Q4 2025 Board Report",required:""},null,8,["modelValue"]),b(v(ve),{label:"Reporting Period",modelValue:t.formData.period,"onUpdate:modelValue":s[1]||(s[1]=i=>t.formData.period=i),type:"select",options:e,required:""},null,8,["modelValue"]),b(v(ve),{label:"Report Type",modelValue:t.formData.type,"onUpdate:modelValue":s[2]||(s[2]=i=>t.formData.type=i),type:"select",options:n,required:""},null,8,["modelValue"]),b(v(ve),{label:"Presentation Date",modelValue:t.formData.presentationDate,"onUpdate:modelValue":s[3]||(s[3]=i=>t.formData.presentationDate=i),type:"date"},null,8,["modelValue"])])]),u("div",obt,[s[7]||(s[7]=u("h3",{class:"section-title"},"Content & Focus",-1)),u("div",lbt,[b(v(ve),{label:"Key Focus Areas",modelValue:t.formData.focusAreas,"onUpdate:modelValue":s[4]||(s[4]=i=>t.formData.focusAreas=i),type:"textarea",placeholder:"Enter key areas to focus on in this report",rows:"3"},null,8,["modelValue"]),b(v(ve),{label:"Additional Notes",modelValue:t.formData.notes,"onUpdate:modelValue":s[5]||(s[5]=i=>t.formData.notes=i),type:"textarea",placeholder:"Any additional context or notes",rows:"3"},null,8,["modelValue"])])])])]))}},dbt=It(ubt,[["__scopeId","data-v-78e0a771"]]),cbt={class:"board-stats"},fbt={class:"stats-grid"},pbt={class:"stat-card"},hbt={class:"stat-header"},mbt={class:"stat-value"},gbt={class:"stat-card"},vbt={class:"stat-header"},ybt={class:"stat-value"},bbt={class:"stat-card"},xbt={class:"stat-header"},_bt={class:"stat-value"},wbt={class:"stat-card"},kbt={class:"stat-header"},Sbt={__name:"BoardStats",props:{boardMetrics:{type:Object,required:!0,default:()=>({auditCoverage:0,auditCoverageTrend:0,openFindings:0,findingsTrend:0,complianceScore:0,complianceTrend:0,overallRisk:"Medium"})}},setup(t){const e=r=>r>0?"positive":r<0?"negative":"neutral",n=r=>({Low:"low-risk",Medium:"medium-risk",High:"high-risk",Critical:"critical-risk"})[r]||"medium-risk";return(r,s)=>(T(),R("div",cbt,[u("div",fbt,[u("div",pbt,[u("div",hbt,[s[0]||(s[0]=u("h3",null,"Audit Coverage",-1)),b(v(ei),{class:"stat-icon"})]),u("div",mbt,$(Math.round(t.boardMetrics.auditCoverage))+"%",1),u("div",{class:pe(["stat-trend",e(t.boardMetrics.auditCoverageTrend)])},[t.boardMetrics.auditCoverageTrend>0?(T(),he(v($l),{key:0})):(T(),he(v(Om),{key:1})),W(" "+$(Math.abs(t.boardMetrics.auditCoverageTrend))+"% from last period ",1)],2)]),u("div",gbt,[u("div",vbt,[s[1]||(s[1]=u("h3",null,"Open Findings",-1)),b(v(rn),{class:"stat-icon"})]),u("div",ybt,$(t.boardMetrics.openFindings),1),u("div",{class:pe(["stat-trend",e(-t.boardMetrics.findingsTrend)])},[t.boardMetrics.findingsTrend>0?(T(),he(v(Om),{key:0})):(T(),he(v($l),{key:1})),W(" "+$(Math.abs(t.boardMetrics.findingsTrend))+" from last period ",1)],2)]),u("div",bbt,[u("div",xbt,[s[2]||(s[2]=u("h3",null,"Compliance Score",-1)),b(v(Ds),{class:"stat-icon"})]),u("div",_bt,$(Math.round(t.boardMetrics.complianceScore))+"%",1),u("div",{class:pe(["stat-trend",e(t.boardMetrics.complianceTrend)])},[t.boardMetrics.complianceTrend>0?(T(),he(v($l),{key:0})):(T(),he(v(Om),{key:1})),W(" "+$(Math.abs(t.boardMetrics.complianceTrend))+"% from last period ",1)],2)]),u("div",wbt,[u("div",kbt,[s[3]||(s[3]=u("h3",null,"Risk Level",-1)),b(v(qr),{class:"stat-icon"})]),u("div",{class:pe(["stat-value risk-level",n(t.boardMetrics.overallRisk)])},$(t.boardMetrics.overallRisk),3),s[4]||(s[4]=u("div",{class:"stat-trend"}," Based on current assessments ",-1))])])]))}},Cbt=It(Sbt,[["__scopeId","data-v-2d507e6b"]]),_oe=Yl("reports",{state:()=>({auditReports:[],boardReports:[],managementDashboards:[],dataAnalyticsDashboards:[],reportTemplates:[],customReports:[],currentReport:null,currentTemplate:null,previewData:null,exportProgress:{progress:0,status:"idle"},loading:!1,error:null,reportTypes:[{label:"Compliance Report",value:"Compliance Report"},{label:"Audit Report",value:"Audit Report"},{label:"Risk Assessment",value:"Risk Assessment"},{label:"Control Testing",value:"Control Testing"},{label:"Finding Summary",value:"Finding Summary"},{label:"Management Letter",value:"Management Letter"},{label:"Remediation Report",value:"Remediation Report"},{label:"Custom Report",value:"Custom Report"}],exportFormats:[{label:"PDF Document",value:"pdf",icon:"FileText"},{label:"Excel Workbook",value:"xlsx",icon:"Sheet"},{label:"Word Document",value:"docx",icon:"FileText"},{label:"CSV Data",value:"csv",icon:"Database"},{label:"JSON Data",value:"json",icon:"Code"},{label:"HTML Page",value:"html",icon:"Globe"}],chartTypes:[{label:"Bar Chart",value:"bar",icon:"BarChart3"},{label:"Line Chart",value:"line",icon:"LineChart"},{label:"Pie Chart",value:"pie",icon:"PieChart"},{label:"Donut Chart",value:"donut",icon:"CircleDot"},{label:"Area Chart",value:"area",icon:"AreaChart"},{label:"Scatter Plot",value:"scatter",icon:"ScatterChart"},{label:"Gauge Chart",value:"gauge",icon:"Gauge"},{label:"KPI Card",value:"kpi",icon:"Activity"},{label:"Table",value:"table",icon:"Table"}],sectionTypes:[{label:"Header Section",value:"header",icon:"Heading1"},{label:"Text Content",value:"text",icon:"Type"},{label:"Data Table",value:"table",icon:"Table"},{label:"Chart/Graph",value:"chart",icon:"BarChart3"},{label:"Finding List",value:"findings",icon:"AlertTriangle"},{label:"Image/Logo",value:"image",icon:"Image"},{label:"Page Break",value:"pagebreak",icon:"Minus"},{label:"Footer Section",value:"footer",icon:"AlignLeft"}]}),getters:{activeAuditReports:t=>t.auditReports.filter(e=>e.docstatus===0),activeBoardReports:t=>t.boardReports.filter(e=>e.is_active),activeDashboards:t=>t.managementDashboards.filter(e=>e.is_active),defaultDashboards:t=>t.managementDashboards.filter(e=>e.is_default),reportsByStatus:t=>{const e={};return t.auditReports.forEach(n=>{const r=n.report_status||"Draft";e[r]||(e[r]=[]),e[r].push(n)}),e},boardReportsByPeriod:t=>{const e={};return t.boardReports.forEach(n=>{const r=n.reporting_period||"Other";e[r]||(e[r]=[]),e[r].push(n)}),e},dashboardKPIs:t=>{const e={totalEngagements:0,completedEngagements:0,totalFindings:0,criticalFindings:0,complianceScore:0,compliantItems:0};t.managementDashboards.forEach(r=>{r.is_active&&r.kpi_section&&(e.totalEngagements+=r.total_engagements||0,e.completedEngagements+=r.completed_engagements||0,e.totalFindings+=r.total_findings||0,e.criticalFindings+=r.critical_findings||0,e.compliantItems+=r.compliant_items||0)});const n=t.managementDashboards.filter(r=>r.is_active&&r.compliance_section);if(n.length>0){const r=n.reduce((s,i)=>s+(i.compliance_score||0),0);e.complianceScore=r/n.length}return e},reportStats:t=>({total:t.customReports.length,published:t.customReports.filter(e=>e.status==="Published").length,draft:t.customReports.filter(e=>e.status==="Draft").length,templates:t.reportTemplates.length,scheduled:t.customReports.filter(e=>e.is_scheduled).length}),reportsByType:t=>{const e={};return t.customReports.forEach(n=>{const r=n.report_type||"Other";e[r]||(e[r]=[]),e[r].push(n)}),e},recentReports:t=>t.customReports.slice().sort((e,n)=>new Date(n.modified)-new Date(e.modified)).slice(0,5),scheduledReports:t=>t.customReports.filter(e=>e.is_scheduled),activeTemplates:t=>t.reportTemplates.filter(e=>e.is_active),defaultTemplates:t=>t.reportTemplates.filter(e=>e.is_default)},actions:{fetchAuditReports(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Audit Report",fields:["name","report_id","engagement_reference","report_title","report_type","report_date","report_status","prepared_by","creation","modified","docstatus"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.auditReports=t||[]}catch(t){console.error("Error fetching audit reports:",t),this.error=t.message||"Failed to fetch audit reports",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Audit Report doctype"),this.auditReports=[])}finally{this.loading=!1}})},fetchBoardReports(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Board Report",fields:["name","report_id","report_title","reporting_period","report_type","report_status","is_active","prepared_by","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.boardReports=t||[]}catch(t){console.error("Error fetching board reports:",t),this.error=t.message||"Failed to fetch board reports",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Board Report doctype"),this.boardReports=[])}finally{this.loading=!1}})},fetchManagementDashboards(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Management Dashboard",fields:["name","dashboard_id","dashboard_title","dashboard_type","is_active","is_default","time_period","last_updated","total_engagements","completed_engagements","total_findings","critical_findings","compliance_score","compliant_items","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.managementDashboards=t||[]}catch(t){console.error("Error fetching management dashboards:",t),this.error=t.message||"Failed to fetch management dashboards",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Management Dashboard doctype"),this.managementDashboards=[])}finally{this.loading=!1}})},fetchDataAnalyticsDashboards(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Data Analytics Dashboard",fields:["name","dashboard_id","dashboard_name","dashboard_type","is_active","is_default","last_refresh_date","total_views","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.dataAnalyticsDashboards=t||[]}catch(t){console.error("Error fetching data analytics dashboards:",t),this.error=t.message||"Failed to fetch data analytics dashboards",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Data Analytics Dashboard doctype"),this.dataAnalyticsDashboards=[])}finally{this.loading=!1}})},fetchReportTemplates(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Report Template",fields:["name","template_id","template_name","template_type","description","is_default","is_active","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.reportTemplates=t||[]}catch(t){console.error("Error fetching report templates:",t),this.error=t.message||"Failed to fetch report templates",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Report Template doctype"),this.reportTemplates=[])}finally{this.loading=!1}})},createAuditReport(t){return ue(this,null,function*(){try{const e=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Audit Report"},t)}}).fetch();return yield this.fetchAuditReports(),e}catch(e){throw console.error("Error creating audit report:",e),e}})},createBoardReport(t){return ue(this,null,function*(){try{const e=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Board Report"},t)}}).fetch();return yield this.fetchBoardReports(),e}catch(e){throw console.error("Error creating board report:",e),e}})},createManagementDashboard(t){return ue(this,null,function*(){try{const e=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Management Dashboard"},t)}}).fetch();return yield this.fetchManagementDashboards(),e}catch(e){throw console.error("Error creating management dashboard:",e),e}})},getAuditReportDetails(t){return ue(this,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Audit Report",name:t}}).fetch()}catch(e){throw console.error("Error fetching audit report details:",e),e}})},getBoardReportDetails(t){return ue(this,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Board Report",name:t}}).fetch()}catch(e){throw console.error("Error fetching board report details:",e),e}})},getDashboardData(t){return ue(this,null,function*(){try{return yield Ve({url:"mkaguzi.api.get_dashboard_data",params:{dashboard_name:t}}).fetch()}catch(e){throw console.error("Error fetching dashboard data:",e),e}})},refreshDashboard(t){return ue(this,null,function*(){try{const e=yield Ve({url:"mkaguzi.api.refresh_dashboard",params:{dashboard_name:t}}).fetch();return yield this.fetchManagementDashboards(),e}catch(e){throw console.error("Error refreshing dashboard:",e),e}})},createDefaultDashboards(){return ue(this,null,function*(){try{const t=yield Ve({url:"mkaguzi.api.create_default_dashboards"}).fetch();return yield this.fetchManagementDashboards(),t}catch(t){throw console.error("Error creating default dashboards:",t),t}})},fetchCustomReports(){return ue(this,arguments,function*(t={}){try{this.loading=!0,this.error=null;const e=yield Ve({url:"mkaguzi.api.reports.get_custom_reports",params:{filters:t}}).fetch();this.customReports=e||[]}catch(e){console.error("Error fetching custom reports:",e),this.error=e.message||"Failed to fetch custom reports"}finally{this.loading=!1}})},createCustomReport(t){return ue(this,null,function*(){try{this.loading=!0;const e=yield Ve({url:"mkaguzi.api.reports.create_custom_report",params:{report:t}}).fetch();return this.customReports.unshift(e),this.currentReport=e,e}catch(e){throw console.error("Error creating custom report:",e),this.error=e.message,e}finally{this.loading=!1}})},updateCustomReport(t,e){return ue(this,null,function*(){var n;try{const r=yield Ve({url:"mkaguzi.api.reports.update_custom_report",params:{report_id:t,updates:e}}).fetch(),s=this.customReports.findIndex(i=>i.name===t);return s!==-1&&(this.customReports[s]=ge(ge({},this.customReports[s]),r)),((n=this.currentReport)==null?void 0:n.name)===t&&(this.currentReport=ge(ge({},this.currentReport),r)),r}catch(r){throw console.error("Error updating custom report:",r),r}})},deleteCustomReport(t){return ue(this,null,function*(){var e;try{yield Ve({url:"mkaguzi.api.reports.delete_custom_report",params:{report_id:t}}).fetch(),this.customReports=this.customReports.filter(n=>n.name!==t),((e=this.currentReport)==null?void 0:e.name)===t&&(this.currentReport=null)}catch(n){throw console.error("Error deleting custom report:",n),n}})},generateReport(n){return ue(this,arguments,function*(t,e={}){try{this.loading=!0;const r=yield Ve({url:"mkaguzi.api.reports.generate_report",params:{report_id:t,parameters:e}}).fetch();return this.previewData=r,r}catch(r){throw console.error("Error generating report:",r),this.error=r.message,r}finally{this.loading=!1}})},exportReport(r,s){return ue(this,arguments,function*(t,e,n={}){try{this.exportProgress={progress:0,status:"exporting"};const i=yield Ve({url:"mkaguzi.api.reports.export_report",params:{report_id:t,format:e,options:n}}).fetch();if(this.exportProgress={progress:100,status:"completed"},i.download_url){const a=document.createElement("a");a.href=i.download_url,a.download=i.filename||`report.${e}`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}return i}catch(i){throw this.exportProgress={progress:0,status:"failed"},this.error=i.message,i}})},previewReport(t){return ue(this,null,function*(){try{const e=this.validateReportStructure(t);if(e.length>0)throw new Error(`Validation errors: ${e.join(", ")}`);this.loading=!0;const n=yield Ve({url:"mkaguzi.api.reports.preview_report",params:{report:t}}).fetch();return this.previewData=n,n}catch(e){throw console.error("Error previewing report:",e),this.error=e.message,e}finally{this.loading=!1}})},scheduleReport(t,e){return ue(this,null,function*(){try{const n=yield Ve({url:"mkaguzi.api.reports.schedule_report",params:{report_id:t,schedule:e}}).fetch(),r=this.customReports.find(s=>s.name===t);return r&&(r.is_scheduled=!0,r.schedule_config=e),n}catch(n){throw console.error("Error scheduling report:",n),n}})},unscheduleReport(t){return ue(this,null,function*(){try{yield Ve({url:"mkaguzi.api.reports.unschedule_report",params:{report_id:t}}).fetch();const e=this.customReports.find(n=>n.name===t);e&&(e.is_scheduled=!1,e.schedule_config=null)}catch(e){throw console.error("Error unscheduling report:",e),e}})},createReportTemplate(t){return ue(this,null,function*(){try{const e=yield Ve({url:"mkaguzi.api.reports.create_template",params:{template:t}}).fetch();return this.reportTemplates.unshift(e),this.currentTemplate=e,e}catch(e){throw console.error("Error creating report template:",e),e}})},updateReportTemplate(t,e){return ue(this,null,function*(){try{const n=yield Ve({url:"mkaguzi.api.reports.update_template",params:{template_id:t,updates:e}}).fetch(),r=this.reportTemplates.findIndex(s=>s.name===t);return r!==-1&&(this.reportTemplates[r]=ge(ge({},this.reportTemplates[r]),n)),n}catch(n){throw console.error("Error updating report template:",n),n}})},duplicateTemplate(t,e){return ue(this,null,function*(){try{const n=yield Ve({url:"mkaguzi.api.reports.duplicate_template",params:{template_id:t,new_name:e}}).fetch();return this.reportTemplates.unshift(n),n}catch(n){throw console.error("Error duplicating template:",n),n}})},fetchSectionData(t){return ue(this,null,function*(){try{return yield Ve({url:"mkaguzi.api.reports.fetch_section_data",params:{config:t}}).fetch()}catch(e){throw console.error("Error fetching section data:",e),e}})},fetchAvailableFields(t){return ue(this,null,function*(){try{return yield Ve({url:"mkaguzi.api.reports.get_doctype_fields",params:{doctype:t}}).fetch()}catch(e){throw console.error("Error fetching doctype fields:",e),e}})},fetchFilterOptions(t,e){return ue(this,null,function*(){try{return yield Ve({url:"mkaguzi.api.reports.get_field_options",params:{doctype:t,field:e}}).fetch()}catch(n){throw console.error("Error fetching field options:",n),n}})},validateReportStructure(t){const e=[];return(!t.title||t.title.trim()==="")&&e.push("Report title is required"),t.report_type||e.push("Report type is required"),(!t.sections||t.sections.length===0)&&e.push("Report must have at least one section"),t.sections&&t.sections.forEach((n,r)=>{n.type||e.push(`Section ${r+1}: Section type is required`),n.type==="chart"&&!n.chart_config&&e.push(`Section ${r+1}: Chart configuration is required`),n.type==="table"&&!n.data_source&&e.push(`Section ${r+1}: Data source is required for table`)}),e},formatReportSize(t){if(!t)return"N/A";const e=["B","KB","MB","GB"];let n=0;for(;t>=1024&&n<e.length-1;)t/=1024,n++;return`${t.toFixed(1)} ${e[n]}`},getReportIcon(t){return{"Compliance Report":"Shield","Audit Report":"Search","Risk Assessment":"AlertTriangle","Control Testing":"CheckCircle2","Finding Summary":"List","Management Letter":"Mail","Remediation Report":"Tool","Custom Report":"Settings"}[t]||"FileText"},getStatusColor(t){return{Draft:"orange",Published:"green",Archived:"gray",Scheduled:"blue"}[t]||"gray"},searchReports(t){if(!t.trim())return this.customReports;const e=t.toLowerCase();return this.customReports.filter(n=>{var r,s,i,a;return((r=n.title)==null?void 0:r.toLowerCase().includes(e))||((s=n.description)==null?void 0:s.toLowerCase().includes(e))||((i=n.report_type)==null?void 0:i.toLowerCase().includes(e))||((a=n.tags)==null?void 0:a.some(o=>o.toLowerCase().includes(e)))})},searchTemplates(t){if(!t.trim())return this.reportTemplates;const e=t.toLowerCase();return this.reportTemplates.filter(n=>{var r,s,i;return((r=n.template_name)==null?void 0:r.toLowerCase().includes(e))||((s=n.description)==null?void 0:s.toLowerCase().includes(e))||((i=n.template_type)==null?void 0:i.toLowerCase().includes(e))})},getReportById(t){return this.customReports.find(e=>e.name===t)},getTemplateById(t){return this.reportTemplates.find(e=>e.name===t)},resetError(){this.error=null},resetPreviewData(){this.previewData=null},resetExportProgress(){this.exportProgress={progress:0,status:"idle"}},setCurrentReport(t){this.currentReport=t},setCurrentTemplate(t){this.currentTemplate=t}}}),Abt={class:"board-reports-page"},Tbt={class:"page-header"},$bt={class:"header-content"},Mbt={class:"page-title"},Ebt={class:"header-actions"},Dbt={class:"content-grid"},Rbt={class:"reports-section"},Pbt={class:"section-header"},Ibt={class:"reports-list"},Obt=["onClick"],Lbt={class:"report-header"},Vbt={class:"report-title"},Nbt={class:"report-meta"},jbt={class:"period"},Fbt={class:"date"},Bbt={class:"report-summary"},zbt={class:"summary-item"},Ubt={class:"value"},Hbt={class:"summary-item"},qbt={class:"value"},Wbt={class:"summary-item"},Gbt={class:"value"},Ybt={key:0,class:"empty-state"},Kbt={class:"risk-indicators-section"},Xbt={class:"section-header"},Qbt={class:"risk-indicators"},Zbt={class:"indicator-header"},Jbt={class:"indicator-title"},ext={class:"indicator-value"},txt={class:"indicator-description"},nxt={class:"indicator-trend"},rxt={class:"findings-overview-section"},sxt={class:"section-header"},ixt={class:"findings-chart"},axt={class:"chart-placeholder"},oxt={class:"findings-summary"},lxt={class:"finding-category"},uxt={class:"category-header"},dxt={class:"category-count"},cxt={class:"finding-category"},fxt={class:"category-header"},pxt={class:"category-count"},hxt={class:"finding-category"},mxt={class:"category-header"},gxt={class:"category-count"},vxt={class:"compliance-section"},yxt={class:"section-header"},bxt={class:"compliance-overview"},xxt={class:"compliance-score"},_xt={class:"score-value"},wxt={class:"compliance-breakdown"},kxt={class:"compliance-item"},Sxt={class:"progress-bar"},Cxt={class:"item-value"},Axt={class:"compliance-item"},Txt={class:"progress-bar"},$xt={class:"item-value"},Mxt={class:"compliance-item"},Ext={class:"progress-bar"},Dxt={class:"item-value"},Rxt={class:"recommendations-section"},Pxt={class:"section-header"},Ixt={class:"recommendations-list"},Oxt={class:"recommendation-header"},Lxt={class:"recommendation-description"},Vxt={class:"recommendation-meta"},Nxt={class:"category"},jxt={class:"timeline"},Fxt={class:"meetings-section"},Bxt={class:"section-header"},zxt={class:"meetings-list"},Uxt={class:"meeting-date"},Hxt={class:"date"},qxt={class:"month"},Wxt={class:"meeting-details"},Gxt={class:"meeting-time"},Yxt={class:"meeting-location"},Kxt={class:"meeting-agenda"},Xxt={class:"agenda-items"},Qxt={class:"meeting-actions"},Zxt={key:0,class:"empty-state"},Jxt={__name:"BoardReports",setup(t){const e=_oe(),n=Q(!1),r=Q(!1),s=Q({title:"",period:"",type:"Comprehensive",presentationDate:"",focusAreas:"",notes:""}),i=Z(()=>e.activeBoardReports.slice(0,5)),a=Q({auditCoverage:87,auditCoverageTrend:5.2,openFindings:23,findingsTrend:-8,complianceScore:92,complianceTrend:3.1,overallRisk:"Medium"}),o=Q([{id:1,title:"Financial Reporting Risk",level:"Medium",value:"78%",description:"Risk of material misstatement in financial statements",trend:2.3},{id:2,title:"Cybersecurity Risk",level:"High",value:"85%",description:"Exposure to cyber threats and data breaches",trend:12.5},{id:3,title:"Regulatory Compliance",level:"Low",value:"45%",description:"Compliance with new regulatory requirements",trend:-5.1},{id:4,title:"Operational Risk",level:"Medium",value:"62%",description:"Risk of operational disruptions",trend:1.8}]),l=Q({highRisk:5,mediumRisk:12,lowRisk:8}),d=Q({regulatory:94,policies:89,standards:91}),c=Q([{id:1,title:"Enhance Cybersecurity Framework",description:"Implement advanced threat detection and response capabilities",priority:"High",category:"Technology",timeline:"Q1 2026"},{id:2,title:"Strengthen Internal Controls",description:"Review and update financial controls framework",priority:"High",category:"Finance",timeline:"Q2 2026"},{id:3,title:"Risk Management Training",description:"Develop comprehensive risk management training program",priority:"Medium",category:"Human Resources",timeline:"Q3 2026"}]),f=Q([{id:1,title:"Q4 2025 Board Meeting",date:"2025-12-15",time:"10:00 AM - 4:00 PM",location:"Board Room A",agenda:["Financial Results Review","Risk Management Update","Strategic Planning"]},{id:2,title:"Annual Strategy Session",date:"2026-01-20",time:"9:00 AM - 5:00 PM",location:"Executive Conference Room",agenda:["2026 Strategic Objectives","Budget Planning","Performance Targets"]}]),p=()=>{n.value=!0},h=()=>ue(this,null,function*(){try{r.value=!0,yield e.createBoardReport({report_title:s.value.title,reporting_period:s.value.period,report_type:s.value.type,presentation_date:s.value.presentationDate,focus_areas:s.value.focusAreas,additional_notes:s.value.notes,report_status:"Draft",is_active:1}),n.value=!1,s.value={title:"",period:"",type:"Comprehensive",presentationDate:"",focusAreas:"",notes:""}}catch(V){console.error("Error creating board report:",V)}finally{r.value=!1}}),m=V=>{router.push(`/reports/board-reports/${V.name}`)},g=()=>{router.push("/reports/board-reports")},y=()=>{console.log("Export board report")},x=()=>{console.log("Schedule report")},_=()=>{router.push("/audit-planning/risk-assessment")},k=()=>{router.push("/findings/list")},w=()=>{router.push("/compliance/requirements")},S=()=>{router.push("/findings/corrective-actions")},C=()=>{console.log("Schedule meeting")},A=V=>{console.log("Prepare materials for:",V)},M=V=>({Draft:"secondary","Under Review":"warning",Approved:"success",Finalized:"success",Presented:"success"})[V]||"secondary",E=V=>`risk-${V.toLowerCase()}`,P=V=>({Low:"success",Medium:"warning",High:"danger",Critical:"danger"})[V]||"warning",I=V=>V>=90?"excellent":V>=80?"good":V>=70?"fair":"poor",F=V=>V>=90?"excellent":V>=80?"good":V>=70?"fair":"poor",L=V=>`priority-${V.toLowerCase()}`,z=V=>({High:"danger",Medium:"warning",Low:"success"})[V]||"warning",N=V=>V>0?"positive":V<0?"negative":"neutral",q=(V,O="medium")=>{if(!V)return"";const X=new Date(V);return O==="dd"?X.getDate().toString().padStart(2,"0"):O==="MMM"?X.toLocaleDateString("en-US",{month:"short"}):O==="short"?X.toLocaleDateString("en-US",{month:"short",day:"numeric"}):O==="long"?X.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):X.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};return yt(()=>ue(this,null,function*(){yield e.fetchBoardReports()})),(V,O)=>(T(),R("div",Abt,[u("div",Tbt,[u("div",$bt,[u("h1",Mbt,[b(v(u$),{class:"title-icon"}),O[3]||(O[3]=W(" Board Reports ",-1))]),O[4]||(O[4]=u("p",{class:"page-description"}," Executive-level reporting and strategic insights for board of directors ",-1))]),u("div",Ebt,[b(v(J),{variant:"outline",onClick:y},{default:D(()=>[b(v(xn)),O[5]||(O[5]=W(" Export Report ",-1))]),_:1}),b(v(J),{variant:"outline",onClick:x},{default:D(()=>[b(v(rr)),O[6]||(O[6]=W(" Schedule Report ",-1))]),_:1}),b(v(J),{onClick:p},{default:D(()=>[b(v(nt)),O[7]||(O[7]=W(" New Board Report ",-1))]),_:1})])]),b(Cbt,{"board-metrics":a.value},null,8,["board-metrics"]),u("div",Dbt,[u("div",Rbt,[u("div",Pbt,[O[9]||(O[9]=u("h2",null,"Recent Board Reports",-1)),b(v(J),{variant:"outline",size:"sm",onClick:g},{default:D(()=>[...O[8]||(O[8]=[W(" View All ",-1)])]),_:1})]),u("div",Ibt,[(T(!0),R(xe,null,_e(i.value,X=>(T(),R("div",{key:X.name,class:"report-card",onClick:j=>m(X)},[u("div",Lbt,[u("div",Vbt,[u("h4",null,$(X.report_title),1),b(v(De),{variant:M(X.report_status)},{default:D(()=>[W($(X.report_status),1)]),_:2},1032,["variant"])]),u("div",Nbt,[u("span",jbt,$(X.reporting_period),1),u("span",Fbt,$(q(X.report_date)),1)])]),u("div",Bbt,[u("div",zbt,[O[10]||(O[10]=u("span",{class:"label"},"Key Findings:",-1)),u("span",Ubt,$(X.key_findings_count||0),1)]),u("div",Hbt,[O[11]||(O[11]=u("span",{class:"label"},"Recommendations:",-1)),u("span",qbt,$(X.recommendations_count||0),1)]),u("div",Wbt,[O[12]||(O[12]=u("span",{class:"label"},"Risk Areas:",-1)),u("span",Gbt,$(X.risk_areas_count||0),1)])])],8,Obt))),128)),i.value.length===0?(T(),R("div",Ybt,[b(v(u$),{class:"empty-icon"}),O[14]||(O[14]=u("h3",null,"No Board Reports",-1)),O[15]||(O[15]=u("p",null,"Create your first board report to get started",-1)),b(v(J),{onClick:p},{default:D(()=>[b(v(nt)),O[13]||(O[13]=W(" Create First Report ",-1))]),_:1})])):se("",!0)])]),u("div",Kbt,[u("div",Xbt,[O[17]||(O[17]=u("h2",null,"Key Risk Indicators",-1)),b(v(J),{variant:"outline",size:"sm",onClick:_},{default:D(()=>[...O[16]||(O[16]=[W(" View Details ",-1)])]),_:1})]),u("div",Qbt,[(T(!0),R(xe,null,_e(o.value,X=>(T(),R("div",{key:X.id,class:pe(["risk-indicator-card",E(X.level)])},[u("div",Zbt,[u("div",Jbt,[u("h4",null,$(X.title),1),b(v(De),{variant:P(X.level)},{default:D(()=>[W($(X.level),1)]),_:2},1032,["variant"])]),u("div",ext,$(X.value),1)]),u("div",txt,$(X.description),1),u("div",nxt,[u("span",{class:pe(N(X.trend))},$(X.trend>0?"":X.trend<0?"":"")+" "+$(Math.abs(X.trend))+"% vs last period ",3)])],2))),128))])]),u("div",rxt,[u("div",sxt,[O[19]||(O[19]=u("h2",null,"Audit Findings Overview",-1)),b(v(J),{variant:"outline",size:"sm",onClick:k},{default:D(()=>[...O[18]||(O[18]=[W(" View All Findings ",-1)])]),_:1})]),u("div",ixt,[u("div",axt,[b(v(hr),{class:"chart-icon"}),O[20]||(O[20]=u("p",null,"Findings by Risk Level",-1))])]),u("div",oxt,[u("div",lxt,[u("div",uxt,[b(v(rn),{class:"category-icon high-risk"}),O[21]||(O[21]=u("span",null,"High Risk",-1))]),u("div",dxt,$(l.value.highRisk),1)]),u("div",cxt,[u("div",fxt,[b(v(qr),{class:"category-icon medium-risk"}),O[22]||(O[22]=u("span",null,"Medium Risk",-1))]),u("div",pxt,$(l.value.mediumRisk),1)]),u("div",hxt,[u("div",mxt,[b(v(YS),{class:"category-icon low-risk"}),O[23]||(O[23]=u("span",null,"Low Risk",-1))]),u("div",gxt,$(l.value.lowRisk),1)])])]),u("div",vxt,[u("div",yxt,[O[25]||(O[25]=u("h2",null,"Compliance Status",-1)),b(v(J),{variant:"outline",size:"sm",onClick:w},{default:D(()=>[...O[24]||(O[24]=[W(" View Details ",-1)])]),_:1})]),u("div",bxt,[u("div",xxt,[u("div",{class:pe(["score-circle",I(a.value.complianceScore)])},[u("span",_xt,$(Math.round(a.value.complianceScore))+"%",1),O[26]||(O[26]=u("span",{class:"score-label"},"Overall",-1))],2)]),u("div",wxt,[u("div",kxt,[O[27]||(O[27]=u("span",{class:"item-label"},"Regulatory",-1)),u("div",Sxt,[u("div",{class:pe(["progress-fill",F(d.value.regulatory)]),style:rt({width:d.value.regulatory+"%"})},null,6)]),u("span",Cxt,$(d.value.regulatory)+"%",1)]),u("div",Axt,[O[28]||(O[28]=u("span",{class:"item-label"},"Internal Policies",-1)),u("div",Txt,[u("div",{class:pe(["progress-fill",F(d.value.policies)]),style:rt({width:d.value.policies+"%"})},null,6)]),u("span",$xt,$(d.value.policies)+"%",1)]),u("div",Mxt,[O[29]||(O[29]=u("span",{class:"item-label"},"Industry Standards",-1)),u("div",Ext,[u("div",{class:pe(["progress-fill",F(d.value.standards)]),style:rt({width:d.value.standards+"%"})},null,6)]),u("span",Dxt,$(d.value.standards)+"%",1)])])])]),u("div",Rxt,[u("div",Pxt,[O[31]||(O[31]=u("h2",null,"Strategic Recommendations",-1)),b(v(J),{variant:"outline",size:"sm",onClick:S},{default:D(()=>[...O[30]||(O[30]=[W(" View All ",-1)])]),_:1})]),u("div",Ixt,[(T(!0),R(xe,null,_e(c.value,X=>(T(),R("div",{key:X.id,class:pe(["recommendation-card",L(X.priority)])},[u("div",Oxt,[u("div",{class:pe(["priority-indicator",X.priority.toLowerCase()])},null,2),u("h4",null,$(X.title),1),b(v(De),{variant:z(X.priority)},{default:D(()=>[W($(X.priority),1)]),_:2},1032,["variant"])]),u("p",Lxt,$(X.description),1),u("div",Vxt,[u("span",Nxt,$(X.category),1),u("span",jxt,$(X.timeline),1)])],2))),128))])]),u("div",Fxt,[u("div",Bxt,[O[33]||(O[33]=u("h2",null,"Upcoming Board Meetings",-1)),b(v(J),{variant:"outline",size:"sm",onClick:C},{default:D(()=>[...O[32]||(O[32]=[W(" Schedule Meeting ",-1)])]),_:1})]),u("div",zxt,[(T(!0),R(xe,null,_e(f.value,X=>(T(),R("div",{key:X.id,class:"meeting-card"},[u("div",Uxt,[u("div",Hxt,$(q(X.date,"dd")),1),u("div",qxt,$(q(X.date,"MMM")),1)]),u("div",Wxt,[u("h4",null,$(X.title),1),u("p",Gxt,$(X.time),1),u("p",Yxt,$(X.location),1),u("div",Kxt,[O[34]||(O[34]=u("span",{class:"agenda-label"},"Key Topics:",-1)),u("span",Xxt,$(X.agenda.join(", ")),1)])]),u("div",Qxt,[b(v(J),{variant:"outline",size:"sm",onClick:j=>A(X)},{default:D(()=>[...O[35]||(O[35]=[W(" Prepare Materials ",-1)])]),_:1},8,["onClick"])])]))),128)),f.value.length===0?(T(),R("div",Zxt,[b(v(rr),{class:"empty-icon"}),O[37]||(O[37]=u("h3",null,"No Upcoming Meetings",-1)),O[38]||(O[38]=u("p",null,"Schedule your next board meeting",-1)),b(v(J),{onClick:C},{default:D(()=>[b(v(rr)),O[36]||(O[36]=W(" Schedule Meeting ",-1))]),_:1})])):se("",!0)])])]),b(v(jt),{modelValue:n.value,"onUpdate:modelValue":O[2]||(O[2]=X=>n.value=X),options:{title:"Create New Board Report"}},{"body-content":D(()=>[b(dbt,{"form-data":s.value,"onUpdate:formData":O[0]||(O[0]=X=>s.value=X)},null,8,["form-data"])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:O[1]||(O[1]=X=>n.value=!1)},{default:D(()=>[...O[39]||(O[39]=[W("Cancel",-1)])]),_:1}),b(v(J),{onClick:h,loading:r.value},{default:D(()=>[...O[40]||(O[40]=[W("Create Report",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])]))}},rq=It(Jxt,[["__scopeId","data-v-e049bad2"]]),e_t={class:"bg-white rounded-xl border p-4"},t_t={class:"flex flex-wrap items-center gap-4"},n_t={class:"flex-1 min-w-[200px] max-w-md"},r_t={class:"w-32"},s_t={class:"w-44"},i_t={class:"w-36"},a_t={class:"w-36"},o_t={class:"w-32"},l_t={class:"flex items-center gap-2 ml-auto"},u_t={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},d_t={__name:"ChecklistFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,s=Jt({search:"",periodType:"",compliancePeriod:"",fiscalYear:"",completionStatus:"",hasOverdue:""});et(()=>n.filters,p=>{p&&Object.assign(s,p)},{immediate:!0,deep:!0});const i=[{label:"All Types",value:""},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Annual",value:"Annual"}],a=[{label:"All",value:""},{label:"Complete (100%)",value:"complete"},{label:"Almost Done (75-99%)",value:"almost"},{label:"In Progress (25-74%)",value:"progress"},{label:"Just Started (1-24%)",value:"started"},{label:"Not Started (0%)",value:"notstarted"}],o=[{label:"All",value:""},{label:"Has Overdue",value:"yes"},{label:"No Overdue",value:"no"}],l=Z(()=>Object.values(s).some(p=>p!==""));function d(){r("update:filters",ge({},s))}function c(p){s[p]="",d()}function f(){Object.keys(s).forEach(p=>{s[p]=""}),d()}return(p,h)=>(T(),R("div",e_t,[u("div",t_t,[u("div",n_t,[b(v(ve),{modelValue:s.search,"onUpdate:modelValue":[h[0]||(h[0]=m=>s.search=m),d],type:"text",placeholder:"Search by checklist ID...",debounce:300},{prefix:D(()=>[b(v(En),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",r_t,[b(v(Qe),{modelValue:s.periodType,"onUpdate:modelValue":[h[1]||(h[1]=m=>s.periodType=m),d],options:i,placeholder:"Period Type"},null,8,["modelValue"])]),u("div",s_t,[b(Mt,{modelValue:s.compliancePeriod,"onUpdate:modelValue":[h[2]||(h[2]=m=>s.compliancePeriod=m),d],doctype:"Data Period",placeholder:"All Periods"},null,8,["modelValue"])]),u("div",i_t,[b(Mt,{modelValue:s.fiscalYear,"onUpdate:modelValue":[h[3]||(h[3]=m=>s.fiscalYear=m),d],doctype:"Fiscal Year",placeholder:"Fiscal Year"},null,8,["modelValue"])]),u("div",a_t,[b(v(Qe),{modelValue:s.completionStatus,"onUpdate:modelValue":[h[4]||(h[4]=m=>s.completionStatus=m),d],options:a,placeholder:"Completion"},null,8,["modelValue"])]),u("div",o_t,[b(v(Qe),{modelValue:s.hasOverdue,"onUpdate:modelValue":[h[5]||(h[5]=m=>s.hasOverdue=m),d],options:o,placeholder:"Overdue"},null,8,["modelValue"])]),u("div",l_t,[l.value?(T(),he(v(J),{key:0,variant:"outline",onClick:f},{prefix:D(()=>[b(v(ht),{class:"h-4 w-4"})]),default:D(()=>[h[14]||(h[14]=W(" Clear ",-1))]),_:1})):se("",!0),b(v(J),{variant:"outline",onClick:h[6]||(h[6]=m=>p.$emit("refresh"))},{prefix:D(()=>[b(v(mn),{class:"h-4 w-4"})]),default:D(()=>[h[15]||(h[15]=W(" Refresh ",-1))]),_:1}),b(v(J),{variant:"solid",onClick:h[7]||(h[7]=m=>p.$emit("create"))},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[h[16]||(h[16]=W(" New Checklist ",-1))]),_:1})])]),l.value?(T(),R("div",u_t,[h[17]||(h[17]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),s.search?(T(),he(v(De),{key:0,theme:"blue",class:"cursor-pointer",onClick:h[8]||(h[8]=m=>c("search"))},{default:D(()=>[W(' Search: "'+$(s.search)+'" ',1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.periodType?(T(),he(v(De),{key:1,theme:"purple",class:"cursor-pointer",onClick:h[9]||(h[9]=m=>c("periodType"))},{default:D(()=>[W(" Type: "+$(s.periodType)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.compliancePeriod?(T(),he(v(De),{key:2,theme:"green",class:"cursor-pointer",onClick:h[10]||(h[10]=m=>c("compliancePeriod"))},{default:D(()=>[W(" Period: "+$(s.compliancePeriod)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.fiscalYear?(T(),he(v(De),{key:3,theme:"indigo",class:"cursor-pointer",onClick:h[11]||(h[11]=m=>c("fiscalYear"))},{default:D(()=>[W(" FY: "+$(s.fiscalYear)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.completionStatus?(T(),he(v(De),{key:4,theme:"orange",class:"cursor-pointer",onClick:h[12]||(h[12]=m=>c("completionStatus"))},{default:D(()=>[W($(s.completionStatus)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.hasOverdue?(T(),he(v(De),{key:5,theme:"red",class:"cursor-pointer",onClick:h[13]||(h[13]=m=>c("hasOverdue"))},{default:D(()=>[W($(s.hasOverdue==="yes"?"Has Overdue":"No Overdue")+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0)])):se("",!0)]))}},c_t={class:"grid grid-cols-5 gap-4"},f_t={class:"bg-white rounded-xl border p-4"},p_t={class:"flex items-center justify-between"},h_t={class:"text-2xl font-bold text-gray-900"},m_t={class:"h-10 w-10 rounded-lg bg-blue-50 flex items-center justify-center"},g_t={class:"mt-2 flex items-center gap-2 text-xs"},v_t={class:"text-gray-500"},y_t={class:"bg-white rounded-xl border p-4"},b_t={class:"flex items-center justify-between"},x_t={class:"text-2xl font-bold text-gray-900"},__t={class:"h-10 w-10 rounded-lg bg-indigo-50 flex items-center justify-center"},w_t={class:"bg-white rounded-xl border p-4"},k_t={class:"flex items-center justify-between"},S_t={class:"text-2xl font-bold text-green-600"},C_t={class:"h-10 w-10 rounded-lg bg-green-50 flex items-center justify-center"},A_t={class:"mt-2"},T_t={class:"w-full bg-gray-100 rounded-full h-1.5"},$_t={class:"text-xs text-gray-500 mt-1"},M_t={class:"bg-white rounded-xl border p-4"},E_t={class:"flex items-center justify-between"},D_t={class:"mt-2 flex items-center gap-2 text-xs"},R_t={class:"bg-white rounded-xl border p-4"},P_t={class:"flex items-center justify-between"},I_t={class:"mt-2 flex items-center gap-2 text-xs"},O_t={key:1,class:"text-gray-500"},L_t={class:"grid grid-cols-3 gap-4 mt-4"},V_t={class:"bg-white rounded-xl border p-4"},N_t={class:"space-y-3"},j_t={class:"flex-1"},F_t={class:"flex items-center justify-between"},B_t={class:"text-sm text-gray-700"},z_t={class:"text-sm font-medium text-gray-900"},U_t={class:"w-full bg-gray-100 rounded-full h-1.5 mt-1"},H_t={class:"bg-white rounded-xl border p-4"},q_t={class:"space-y-2"},W_t={class:"flex items-center gap-2"},G_t={class:"text-sm text-gray-600"},Y_t={class:"text-sm font-medium text-gray-900"},K_t={class:"bg-white rounded-xl border p-4"},X_t={class:"flex items-center justify-center py-4"},Q_t={class:"relative h-28 w-28"},Z_t={class:"h-28 w-28 transform -rotate-90"},J_t=["stroke-dashoffset"],ewt={class:"absolute inset-0 flex items-center justify-center"},twt={class:"text-2xl font-bold text-gray-900"},nwt={__name:"ChecklistStats",props:{checklists:{type:Array,default:()=>[]}},setup(t){const e=t,n=2*Math.PI*48,r=Z(()=>{const l=e.checklists.length,d=e.checklists.flatMap(w=>w.checklist_items||[]),c=d.length,f=d.filter(w=>["Completed","Filed"].includes(w.status)).length,p=d.filter(w=>w.status==="Overdue").length,h=c>0?Math.round(f/c*100):0,m=e.checklists.flatMap(w=>w.alerts||[]),g=m.length,y=m.filter(w=>w.severity==="Critical").length,x=e.checklists.filter(w=>w.completion_percent!==null&&w.completion_percent!==void 0).map(w=>w.completion_percent||0),_=x.length>0?Math.round(x.reduce((w,S)=>w+S,0)/x.length):0,k=new Set(e.checklists.map(w=>w.compliance_period)).size;return{total:l,totalRequirements:c,completedRequirements:f,overdueRequirements:p,completionRate:h,totalAlerts:g,criticalAlerts:y,avgCompletion:_,periodsCount:k}}),s=Z(()=>{const l=r.value.avgCompletion/100;return n*(1-l)}),i=Z(()=>{const l=e.checklists.length||1,d=["Monthly","Quarterly","Annual"],c={Monthly:{bgClass:"bg-blue-50",iconClass:"text-blue-600",barClass:"bg-blue-500"},Quarterly:{bgClass:"bg-purple-50",iconClass:"text-purple-600",barClass:"bg-purple-500"},Annual:{bgClass:"bg-green-50",iconClass:"text-green-600",barClass:"bg-green-500"}};return d.map(f=>{const p=e.checklists.filter(h=>h.period_type===f).length;return ge({type:f,count:p,percentage:Math.round(p/l*100)},c[f])})}),a=Z(()=>{const l=e.checklists.flatMap(c=>c.checklist_items||[]);return[{label:"Not Started",color:"bg-gray-400"},{label:"In Progress",color:"bg-blue-500"},{label:"Completed",color:"bg-green-500"},{label:"Filed",color:"bg-purple-500"},{label:"Overdue",color:"bg-red-500"},{label:"Not Applicable",color:"bg-gray-300"}].map(c=>ze(ge({},c),{count:l.filter(f=>f.status===c.label).length}))});function o(l){return l>=90?"text-green-500":l>=70?"text-blue-500":l>=50?"text-orange-500":"text-red-500"}return(l,d)=>(T(),R(xe,null,[u("div",c_t,[u("div",f_t,[u("div",p_t,[u("div",null,[d[0]||(d[0]=u("p",{class:"text-sm text-gray-500"},"Total Checklists",-1)),u("p",h_t,$(r.value.total),1)]),u("div",m_t,[b(v(Ar),{class:"h-5 w-5 text-blue-600"})])]),u("div",g_t,[u("span",v_t,$(r.value.periodsCount)+" periods",1)])]),u("div",y_t,[u("div",b_t,[u("div",null,[d[1]||(d[1]=u("p",{class:"text-sm text-gray-500"},"Total Requirements",-1)),u("p",x_t,$(r.value.totalRequirements),1)]),u("div",__t,[b(v(AY),{class:"h-5 w-5 text-indigo-600"})])]),d[2]||(d[2]=u("div",{class:"mt-2 flex items-center gap-2 text-xs"},[u("span",{class:"text-gray-500"},"Across all checklists")],-1))]),u("div",w_t,[u("div",k_t,[u("div",null,[d[3]||(d[3]=u("p",{class:"text-sm text-gray-500"},"Completed",-1)),u("p",S_t,$(r.value.completedRequirements),1)]),u("div",C_t,[b(v(Kt),{class:"h-5 w-5 text-green-600"})])]),u("div",A_t,[u("div",T_t,[u("div",{class:"bg-green-500 h-1.5 rounded-full",style:rt({width:`${r.value.completionRate}%`})},null,4)]),u("span",$_t,$(r.value.completionRate)+"% complete",1)])]),u("div",M_t,[u("div",E_t,[u("div",null,[d[4]||(d[4]=u("p",{class:"text-sm text-gray-500"},"Overdue",-1)),u("p",{class:pe(["text-2xl font-bold",r.value.overdueRequirements>0?"text-red-600":"text-gray-400"])},$(r.value.overdueRequirements),3)]),u("div",{class:pe(["h-10 w-10 rounded-lg flex items-center justify-center",r.value.overdueRequirements>0?"bg-red-50":"bg-gray-50"])},[b(v(rn),{class:pe(["h-5 w-5",r.value.overdueRequirements>0?"text-red-600":"text-gray-400"])},null,8,["class"])],2)]),u("div",D_t,[u("span",{class:pe(r.value.overdueRequirements>0?"text-red-600":"text-gray-500")},$(r.value.overdueRequirements>0?"Action required":"All on track"),3)])]),u("div",R_t,[u("div",P_t,[u("div",null,[d[5]||(d[5]=u("p",{class:"text-sm text-gray-500"},"Active Alerts",-1)),u("p",{class:pe(["text-2xl font-bold",r.value.totalAlerts>0?"text-orange-600":"text-gray-400"])},$(r.value.totalAlerts),3)]),u("div",{class:pe(["h-10 w-10 rounded-lg flex items-center justify-center",r.value.totalAlerts>0?"bg-orange-50":"bg-gray-50"])},[b(v(mp),{class:pe(["h-5 w-5",r.value.totalAlerts>0?"text-orange-600":"text-gray-400"])},null,8,["class"])],2)]),u("div",I_t,[r.value.criticalAlerts>0?(T(),he(v(De),{key:0,theme:"red",size:"sm"},{default:D(()=>[W($(r.value.criticalAlerts)+" critical ",1)]),_:1})):(T(),R("span",O_t,"No critical alerts"))])])]),u("div",L_t,[u("div",V_t,[d[6]||(d[6]=u("div",{class:"flex items-center justify-between mb-3"},[u("h4",{class:"font-medium text-gray-700"},"By Period Type")],-1)),u("div",N_t,[(T(!0),R(xe,null,_e(i.value,c=>(T(),R("div",{key:c.type,class:"flex items-center gap-3"},[u("div",{class:pe(["h-8 w-8 rounded-lg flex items-center justify-center",c.bgClass])},[b(v(rr),{class:pe(["h-4 w-4",c.iconClass])},null,8,["class"])],2),u("div",j_t,[u("div",F_t,[u("span",B_t,$(c.type),1),u("span",z_t,$(c.count),1)]),u("div",U_t,[u("div",{class:pe(["h-1.5 rounded-full",c.barClass]),style:rt({width:`${c.percentage}%`})},null,6)])])]))),128))])]),u("div",H_t,[d[7]||(d[7]=u("div",{class:"flex items-center justify-between mb-3"},[u("h4",{class:"font-medium text-gray-700"},"Status Distribution")],-1)),u("div",q_t,[(T(!0),R(xe,null,_e(a.value,c=>(T(),R("div",{key:c.label,class:"flex items-center justify-between"},[u("div",W_t,[u("div",{class:pe(["h-3 w-3 rounded-full",c.color])},null,2),u("span",G_t,$(c.label),1)]),u("span",Y_t,$(c.count),1)]))),128))])]),u("div",K_t,[d[9]||(d[9]=u("div",{class:"flex items-center justify-between mb-3"},[u("h4",{class:"font-medium text-gray-700"},"Average Completion")],-1)),u("div",X_t,[u("div",Q_t,[(T(),R("svg",Z_t,[d[8]||(d[8]=u("circle",{cx:"56",cy:"56",r:"48",stroke:"currentColor","stroke-width":"12",fill:"transparent",class:"text-gray-200"},null,-1)),u("circle",{cx:"56",cy:"56",r:"48",stroke:"currentColor","stroke-width":"12",fill:"transparent","stroke-dasharray":n,"stroke-dashoffset":s.value,"stroke-linecap":"round",class:pe(o(r.value.avgCompletion))},null,10,J_t)])),u("div",ewt,[u("span",twt,$(r.value.avgCompletion)+"%",1)])])])])])],64))}},rwt={class:"flex h-[75vh]"},swt={class:"w-56 border-r pr-4 flex-shrink-0"},iwt={class:"space-y-1 sticky top-0"},awt=["onClick"],owt={class:"flex-1"},lwt={class:"mt-6 pt-6 border-t"},uwt={class:"w-full bg-gray-200 rounded-full h-2"},dwt={class:"text-xs text-gray-500 mt-1"},cwt={class:"flex-1 pl-6 overflow-y-auto"},fwt={class:"space-y-6"},pwt={class:"grid grid-cols-2 gap-6"},hwt={class:"grid grid-cols-3 gap-6"},mwt={class:"space-y-6"},gwt={class:"flex justify-end"},vwt={class:"border rounded-lg overflow-hidden"},ywt={class:"w-full"},bwt={class:"divide-y"},xwt={class:"px-4 py-3"},_wt={class:"px-4 py-3"},wwt={class:"px-4 py-3"},kwt={class:"px-4 py-3"},Swt={class:"px-4 py-3"},Cwt={class:"px-4 py-3"},Awt={class:"flex items-center gap-1"},Twt={key:0},$wt={colspan:"6",class:"px-4 py-8 text-center text-gray-500"},Mwt={class:"space-y-6"},Ewt={class:"grid grid-cols-4 gap-4"},Dwt={class:"bg-blue-50 rounded-lg p-4 text-center"},Rwt={class:"text-3xl font-bold text-blue-600"},Pwt={class:"bg-green-50 rounded-lg p-4 text-center"},Iwt={class:"text-3xl font-bold text-green-600"},Owt={class:"bg-red-50 rounded-lg p-4 text-center"},Lwt={class:"text-3xl font-bold text-red-600"},Vwt={class:"bg-purple-50 rounded-lg p-4 text-center"},Nwt={class:"text-3xl font-bold text-purple-600"},jwt={class:"border rounded-lg p-6"},Fwt={class:"flex items-center justify-between mb-3"},Bwt={class:"w-full bg-gray-200 rounded-full h-4"},zwt={class:"border rounded-lg p-4"},Uwt={class:"space-y-3"},Hwt={class:"w-28 text-sm text-gray-600"},qwt={class:"flex-1 bg-gray-100 rounded-full h-2"},Wwt={class:"w-12 text-sm text-gray-600 text-right"},Gwt={class:"space-y-6"},Ywt={class:"flex justify-end"},Kwt={class:"space-y-3"},Xwt={class:"flex items-start gap-4"},Qwt={class:"flex-1 grid grid-cols-3 gap-4"},Zwt={class:"mt-3 ml-14"},Jwt={key:0,class:"border rounded-lg p-8 text-center text-gray-500"},e2t={class:"space-y-6"},t2t={class:"grid grid-cols-3 gap-6"},n2t={class:"border rounded-lg p-4"},r2t={class:"flex items-center gap-3 mb-4"},s2t={class:"h-10 w-10 rounded-lg bg-blue-50 flex items-center justify-center"},i2t={class:"border rounded-lg p-4"},a2t={class:"flex items-center gap-3 mb-4"},o2t={class:"h-10 w-10 rounded-lg bg-purple-50 flex items-center justify-center"},l2t={class:"border rounded-lg p-4"},u2t={class:"flex items-center gap-3 mb-4"},d2t={class:"h-10 w-10 rounded-lg bg-green-50 flex items-center justify-center"},c2t={key:0,class:"space-y-6"},f2t={class:"grid grid-cols-2 gap-6"},p2t={class:"grid grid-cols-3 gap-6"},h2t={class:"grid grid-cols-2 gap-6"},m2t={class:"border-t pt-6"},g2t={class:"grid grid-cols-3 gap-6"},v2t={class:"border-t pt-6"},y2t={class:"grid grid-cols-3 gap-6"},b2t={class:"mt-4"},x2t={class:"flex items-center justify-between w-full"},_2t={class:"flex items-center gap-2"},w2t={class:"flex items-center gap-2"},k2t={__name:"ComplianceChecklistForm",props:{show:{type:Boolean,default:!1},checklist:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.show,set:U=>r("update:show",U)}),i=Z(()=>{var U;return!!((U=n.checklist)!=null&&U.name)}),a=Q(!1),o=Q("basic"),l=Q(!1),d=Q(null),c=Q(-1),f=[{id:"basic",label:"Basic Info",icon:vt},{id:"items",label:"Checklist Items",icon:Ar},{id:"summary",label:"Summary",icon:hr},{id:"alerts",label:"Alerts",icon:mp},{id:"approval",label:"Approval",icon:Bfe}],p=Jt({checklist_id:"",compliance_period:"",period_type:"",period_month:"",fiscal_year:"",checklist_items:[],total_requirements:0,completed_requirements:0,overdue_requirements:0,completion_percent:0,alerts:[],prepared_by:"",reviewed_by:"",approved_by:""}),h=[{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Annual",value:"Annual"}],m=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Filed",value:"Filed"},{label:"Overdue",value:"Overdue"},{label:"Not Applicable",value:"Not Applicable"}],g=[{label:"Not Verified",value:"Not Verified"},{label:"Verified",value:"Verified"},{label:"Issues Found",value:"Issues Found"}],y=[{label:"Due Soon",value:"Due Soon"},{label:"Overdue",value:"Overdue"},{label:"Missing Data",value:"Missing Data"}],x=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}];et(()=>n.checklist,U=>{U&&Object.keys(p).forEach(G=>{U[G]!==void 0&&(p[G]=U[G])})},{immediate:!0}),et(()=>n.show,U=>{U&&!n.checklist&&(Object.keys(p).forEach(G=>{G==="checklist_items"||G==="alerts"?p[G]=[]:typeof p[G]=="number"?p[G]=0:p[G]=""}),o.value="basic")}),et(()=>p.checklist_items,()=>{_()},{deep:!0});function _(){const U=p.checklist_items||[];p.total_requirements=U.length,p.completed_requirements=U.filter(G=>["Completed","Filed"].includes(G.status)).length,p.overdue_requirements=U.filter(G=>G.status==="Overdue").length,p.completion_percent=U.length>0?Math.round(p.completed_requirements/U.length*100):0}const k=Z(()=>{const U=p.checklist_items||[],G=U.length||1;return[{label:"Not Started",color:"bg-gray-400"},{label:"In Progress",color:"bg-blue-500"},{label:"Completed",color:"bg-green-500"},{label:"Filed",color:"bg-purple-500"},{label:"Overdue",color:"bg-red-500"},{label:"Not Applicable",color:"bg-gray-300"}].map(ie=>{const ne=U.filter(ce=>ce.status===ie.label).length;return ze(ge({},ie),{count:ne,percentage:Math.round(ne/G*100)})})});function w(){p.checklist_items.push({requirement:"",regulatory_body:"",description:"",due_date:"",status:"Not Started",completion_date:"",completed_by:"",reference_no:"",amount_paid:0,payment_date:"",payment_reference:"",supporting_documents:"",notes:"",verification_status:"Not Verified",verified_by:"",verification_date:"",verification_notes:""})}function S(U){c.value=U,d.value=ge({},p.checklist_items[U]),l.value=!0}function C(){c.value>=0&&d.value&&(p.checklist_items[c.value]=ge({},d.value)),l.value=!1,d.value=null,c.value=-1}function A(U){p.checklist_items.splice(U,1)}function M(){p.alerts.push({requirement:"",alert_type:"",alert_message:"",severity:"Medium"})}function E(U){p.alerts.splice(U,1)}const P=Z(()=>f.findIndex(U=>U.id===o.value));function I(){P.value<f.length-1&&(o.value=f[P.value+1].id)}function F(){P.value>0&&(o.value=f[P.value-1].id)}function L(U){var G;switch(U){case"basic":return!!p.checklist_id&&!!p.period_type;case"items":return((G=p.checklist_items)==null?void 0:G.length)>0;case"summary":return!0;case"alerts":return!0;case"approval":return!!p.approved_by;default:return!1}}const z=Z(()=>{const U=f.filter(G=>L(G.id)).length;return Math.round(U/f.length*100)});function N(U){return U>=90?"green":U>=70?"blue":U>=50?"orange":"red"}function q(U){return U>=90?"bg-green-500":U>=70?"bg-blue-500":U>=50?"bg-orange-500":"bg-red-500"}function V(U){return{Critical:"border-red-200 bg-red-50",High:"border-orange-200 bg-orange-50",Medium:"border-yellow-200 bg-yellow-50",Low:"border-blue-200 bg-blue-50"}[U]||"border-gray-200"}function O(U){return{Critical:"bg-red-100",High:"bg-orange-100",Medium:"bg-yellow-100",Low:"bg-blue-100"}[U]||"bg-gray-100"}function X(U){return{Critical:"text-red-600",High:"text-orange-600",Medium:"text-yellow-600",Low:"text-blue-600"}[U]||"text-gray-600"}function j(){return ue(this,null,function*(){a.value=!0;try{yield new Promise(U=>setTimeout(U,1e3)),r("saved",ge({},p)),s.value=!1}catch(U){console.error("Failed to save checklist:",U)}finally{a.value=!1}})}return(U,G)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":G[27]||(G[27]=ee=>s.value=ee),options:{size:"7xl",title:i.value?"Edit Compliance Checklist":"New Compliance Checklist"}},{"body-content":D(()=>{var ee,ie;return[u("div",rwt,[u("div",swt,[u("nav",iwt,[(T(),R(xe,null,_e(f,(ne,ce)=>u("button",{key:ne.id,onClick:oe=>o.value=ne.id,class:pe(["w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",o.value===ne.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50"])},[(T(),he(At(ne.icon),{class:pe(["h-4 w-4",o.value===ne.id?"text-blue-600":"text-gray-400"])},null,8,["class"])),u("span",owt,$(ne.label),1),L(ne.id)?(T(),he(v(Kt),{key:0,class:"h-4 w-4 text-green-500"})):se("",!0)],10,awt)),64))]),u("div",lwt,[G[28]||(G[28]=u("div",{class:"text-xs font-medium text-gray-500 mb-2"},"Completion",-1)),u("div",uwt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:rt({width:`${z.value}%`})},null,4)]),u("div",dwt,$(z.value)+"% complete",1)])]),u("div",cwt,[we(u("div",fwt,[b(Vt,{title:"Basic Information",description:"Checklist identification and period details"}),u("div",pwt,[b(v(ve),{modelValue:p.checklist_id,"onUpdate:modelValue":G[0]||(G[0]=ne=>p.checklist_id=ne),label:"Checklist ID",type:"text",required:!0,placeholder:"Auto-generated if left empty"},null,8,["modelValue"]),b(Mt,{modelValue:p.compliance_period,"onUpdate:modelValue":G[1]||(G[1]=ne=>p.compliance_period=ne),label:"Compliance Period",doctype:"Data Period",placeholder:"Select period"},null,8,["modelValue"])]),u("div",hwt,[u("div",null,[G[29]||(G[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Period Type "),u("span",{class:"text-red-500"},"*")],-1)),b(v(Qe),{modelValue:p.period_type,"onUpdate:modelValue":G[2]||(G[2]=ne=>p.period_type=ne),options:h,placeholder:"Select type"},null,8,["modelValue"])]),b(v(ve),{modelValue:p.period_month,"onUpdate:modelValue":G[3]||(G[3]=ne=>p.period_month=ne),label:"Period Month",type:"text",placeholder:"e.g., January 2025"},null,8,["modelValue"]),b(Mt,{modelValue:p.fiscal_year,"onUpdate:modelValue":G[4]||(G[4]=ne=>p.fiscal_year=ne),label:"Fiscal Year",doctype:"Fiscal Year",placeholder:"Select fiscal year"},null,8,["modelValue"])])],512),[[lt,o.value==="basic"]]),we(u("div",mwt,[b(Vt,{title:"Checklist Items",description:"Compliance requirements and their status"}),u("div",gwt,[b(v(J),{variant:"outline",onClick:w},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[G[30]||(G[30]=W(" Add Item ",-1))]),_:1})]),u("div",vwt,[u("table",ywt,[G[33]||(G[33]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Requirement "),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Regulatory Body "),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Due Date "),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Status "),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Verification "),u("th",{class:"px-4 py-3 w-20"})])],-1)),u("tbody",bwt,[(T(!0),R(xe,null,_e(p.checklist_items,(ne,ce)=>(T(),R("tr",{key:ce,class:"hover:bg-gray-50"},[u("td",xwt,[b(Mt,{modelValue:ne.requirement,"onUpdate:modelValue":oe=>ne.requirement=oe,doctype:"Compliance Requirement",placeholder:"Select requirement",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",_wt,[b(v(ve),{modelValue:ne.regulatory_body,"onUpdate:modelValue":oe=>ne.regulatory_body=oe,type:"text",size:"sm",disabled:!0,placeholder:"Auto-filled"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",wwt,[b(v(ve),{modelValue:ne.due_date,"onUpdate:modelValue":oe=>ne.due_date=oe,type:"date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",kwt,[b(v(Qe),{modelValue:ne.status,"onUpdate:modelValue":oe=>ne.status=oe,options:m,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Swt,[b(v(Qe),{modelValue:ne.verification_status,"onUpdate:modelValue":oe=>ne.verification_status=oe,options:g,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Cwt,[u("div",Awt,[b(v(J),{size:"sm",variant:"ghost",onClick:oe=>S(ce)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{size:"sm",variant:"ghost",theme:"red",onClick:oe=>A(ce)},{default:D(()=>[b(v(is),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128)),(ee=p.checklist_items)!=null&&ee.length?se("",!0):(T(),R("tr",Twt,[u("td",$wt,[b(v(Ar),{class:"h-8 w-8 mx-auto mb-2 text-gray-400"}),G[31]||(G[31]=u("p",null,"No checklist items added",-1)),G[32]||(G[32]=u("p",{class:"text-sm mt-1"},'Click "Add Item" to add compliance requirements',-1))])]))])])])],512),[[lt,o.value==="items"]]),we(u("div",Mwt,[b(Vt,{title:"Summary",description:"Compliance completion overview"}),u("div",Ewt,[u("div",Dwt,[u("p",Rwt,$(p.total_requirements),1),G[34]||(G[34]=u("p",{class:"text-sm text-blue-700"},"Total Requirements",-1))]),u("div",Pwt,[u("p",Iwt,$(p.completed_requirements),1),G[35]||(G[35]=u("p",{class:"text-sm text-green-700"},"Completed",-1))]),u("div",Owt,[u("p",Lwt,$(p.overdue_requirements),1),G[36]||(G[36]=u("p",{class:"text-sm text-red-700"},"Overdue",-1))]),u("div",Vwt,[u("p",Nwt,$(p.completion_percent)+"%",1),G[37]||(G[37]=u("p",{class:"text-sm text-purple-700"},"Completion",-1))])]),u("div",jwt,[u("div",Fwt,[G[38]||(G[38]=u("h4",{class:"font-medium text-gray-700"},"Overall Progress",-1)),b(v(De),{theme:N(p.completion_percent),size:"lg"},{default:D(()=>[W($(p.completion_percent)+"% ",1)]),_:1},8,["theme"])]),u("div",Bwt,[u("div",{class:pe(["h-4 rounded-full transition-all",q(p.completion_percent)]),style:rt({width:`${p.completion_percent||0}%`})},null,6)])]),u("div",zwt,[G[39]||(G[39]=u("h4",{class:"font-medium text-gray-700 mb-4"},"Status Breakdown",-1)),u("div",Uwt,[(T(!0),R(xe,null,_e(k.value,ne=>(T(),R("div",{key:ne.label,class:"flex items-center gap-3"},[u("div",Hwt,$(ne.label),1),u("div",qwt,[u("div",{class:pe(["h-2 rounded-full",ne.color]),style:rt({width:`${ne.percentage}%`})},null,6)]),u("div",Wwt,$(ne.count),1)]))),128))])])],512),[[lt,o.value==="summary"]]),we(u("div",Gwt,[b(Vt,{title:"Alerts",description:"Compliance alerts and notifications"}),u("div",Ywt,[b(v(J),{variant:"outline",onClick:M},{prefix:D(()=>[b(v(mp),{class:"h-4 w-4"})]),default:D(()=>[G[40]||(G[40]=W(" Add Alert ",-1))]),_:1})]),u("div",Kwt,[(T(!0),R(xe,null,_e(p.alerts,(ne,ce)=>(T(),R("div",{key:ce,class:pe(["border rounded-lg p-4",V(ne.severity)])},[u("div",Xwt,[u("div",{class:pe(["h-10 w-10 rounded-lg flex items-center justify-center flex-shrink-0",O(ne.severity)])},[b(v(rn),{class:pe(["h-5 w-5",X(ne.severity)])},null,8,["class"])],2),u("div",Qwt,[b(Mt,{modelValue:ne.requirement,"onUpdate:modelValue":oe=>ne.requirement=oe,doctype:"Compliance Requirement",label:"Requirement",placeholder:"Select requirement"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[G[41]||(G[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Alert Type",-1)),b(v(Qe),{modelValue:ne.alert_type,"onUpdate:modelValue":oe=>ne.alert_type=oe,options:y},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[G[42]||(G[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Severity",-1)),b(v(Qe),{modelValue:ne.severity,"onUpdate:modelValue":oe=>ne.severity=oe,options:x},null,8,["modelValue","onUpdate:modelValue"])])]),b(v(J),{size:"sm",variant:"ghost",theme:"red",onClick:oe=>E(ce)},{default:D(()=>[b(v(is),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",Zwt,[b(v(ve),{modelValue:ne.alert_message,"onUpdate:modelValue":oe=>ne.alert_message=oe,type:"textarea",rows:2,placeholder:"Enter alert message..."},null,8,["modelValue","onUpdate:modelValue"])])],2))),128)),(ie=p.alerts)!=null&&ie.length?se("",!0):(T(),R("div",Jwt,[b(v(mp),{class:"h-8 w-8 mx-auto mb-2 text-gray-400"}),G[43]||(G[43]=u("p",null,"No alerts configured",-1)),G[44]||(G[44]=u("p",{class:"text-sm mt-1"},'Click "Add Alert" to create compliance alerts',-1))]))])],512),[[lt,o.value==="alerts"]]),we(u("div",e2t,[b(Vt,{title:"Approval",description:"Checklist review and approval workflow"}),u("div",t2t,[u("div",n2t,[u("div",r2t,[u("div",s2t,[b(v(gfe),{class:"h-5 w-5 text-blue-600"})]),G[45]||(G[45]=u("div",null,[u("h4",{class:"font-medium text-gray-700"},"Prepared By"),u("p",{class:"text-xs text-gray-500"},"Person who prepared this checklist")],-1))]),b(Mt,{modelValue:p.prepared_by,"onUpdate:modelValue":G[5]||(G[5]=ne=>p.prepared_by=ne),doctype:"User",placeholder:"Select user",disabled:!0},null,8,["modelValue"])]),u("div",i2t,[u("div",a2t,[u("div",o2t,[b(v(lr),{class:"h-5 w-5 text-purple-600"})]),G[46]||(G[46]=u("div",null,[u("h4",{class:"font-medium text-gray-700"},"Reviewed By"),u("p",{class:"text-xs text-gray-500"},"Person who reviewed this checklist")],-1))]),b(Mt,{modelValue:p.reviewed_by,"onUpdate:modelValue":G[6]||(G[6]=ne=>p.reviewed_by=ne),doctype:"User",placeholder:"Select reviewer"},null,8,["modelValue"])]),u("div",l2t,[u("div",u2t,[u("div",d2t,[b(v(Kt),{class:"h-5 w-5 text-green-600"})]),G[47]||(G[47]=u("div",null,[u("h4",{class:"font-medium text-gray-700"},"Approved By"),u("p",{class:"text-xs text-gray-500"},"Person who approved this checklist")],-1))]),b(Mt,{modelValue:p.approved_by,"onUpdate:modelValue":G[7]||(G[7]=ne=>p.approved_by=ne),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])])])],512),[[lt,o.value==="approval"]])])]),b(v(jt),{modelValue:l.value,"onUpdate:modelValue":G[25]||(G[25]=ne=>l.value=ne),options:{size:"3xl",title:"Edit Checklist Item"}},{"body-content":D(()=>[d.value?(T(),R("div",c2t,[u("div",f2t,[b(Mt,{modelValue:d.value.requirement,"onUpdate:modelValue":G[8]||(G[8]=ne=>d.value.requirement=ne),label:"Requirement",doctype:"Compliance Requirement",required:!0},null,8,["modelValue"]),b(v(ve),{modelValue:d.value.regulatory_body,"onUpdate:modelValue":G[9]||(G[9]=ne=>d.value.regulatory_body=ne),label:"Regulatory Body",type:"text",disabled:!0},null,8,["modelValue"])]),b(v(ve),{modelValue:d.value.description,"onUpdate:modelValue":G[10]||(G[10]=ne=>d.value.description=ne),label:"Description",type:"text",disabled:!0},null,8,["modelValue"]),u("div",p2t,[b(v(ve),{modelValue:d.value.due_date,"onUpdate:modelValue":G[11]||(G[11]=ne=>d.value.due_date=ne),label:"Due Date",type:"date"},null,8,["modelValue"]),u("div",null,[G[48]||(G[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(v(Qe),{modelValue:d.value.status,"onUpdate:modelValue":G[12]||(G[12]=ne=>d.value.status=ne),options:m},null,8,["modelValue"])]),b(v(ve),{modelValue:d.value.completion_date,"onUpdate:modelValue":G[13]||(G[13]=ne=>d.value.completion_date=ne),label:"Completion Date",type:"date"},null,8,["modelValue"])]),u("div",h2t,[b(Mt,{modelValue:d.value.completed_by,"onUpdate:modelValue":G[14]||(G[14]=ne=>d.value.completed_by=ne),label:"Completed By",doctype:"User"},null,8,["modelValue"]),b(v(ve),{modelValue:d.value.reference_no,"onUpdate:modelValue":G[15]||(G[15]=ne=>d.value.reference_no=ne),label:"Reference No",type:"text"},null,8,["modelValue"])]),u("div",m2t,[G[49]||(G[49]=u("h4",{class:"font-medium text-gray-700 mb-4"},"Payment Details",-1)),u("div",g2t,[b(v(ve),{modelValue:d.value.amount_paid,"onUpdate:modelValue":G[16]||(G[16]=ne=>d.value.amount_paid=ne),label:"Amount Paid",type:"number",placeholder:"0.00"},null,8,["modelValue"]),b(v(ve),{modelValue:d.value.payment_date,"onUpdate:modelValue":G[17]||(G[17]=ne=>d.value.payment_date=ne),label:"Payment Date",type:"date"},null,8,["modelValue"]),b(v(ve),{modelValue:d.value.payment_reference,"onUpdate:modelValue":G[18]||(G[18]=ne=>d.value.payment_reference=ne),label:"Payment Reference",type:"text"},null,8,["modelValue"])])]),b(v(ve),{modelValue:d.value.notes,"onUpdate:modelValue":G[19]||(G[19]=ne=>d.value.notes=ne),label:"Notes",type:"textarea",rows:3},null,8,["modelValue"]),u("div",v2t,[G[51]||(G[51]=u("h4",{class:"font-medium text-gray-700 mb-4"},"Verification",-1)),u("div",y2t,[u("div",null,[G[50]||(G[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(v(Qe),{modelValue:d.value.verification_status,"onUpdate:modelValue":G[20]||(G[20]=ne=>d.value.verification_status=ne),options:g},null,8,["modelValue"])]),b(Mt,{modelValue:d.value.verified_by,"onUpdate:modelValue":G[21]||(G[21]=ne=>d.value.verified_by=ne),label:"Verified By",doctype:"User"},null,8,["modelValue"]),b(v(ve),{modelValue:d.value.verification_date,"onUpdate:modelValue":G[22]||(G[22]=ne=>d.value.verification_date=ne),label:"Verification Date",type:"date"},null,8,["modelValue"])]),u("div",b2t,[b(v(ve),{modelValue:d.value.verification_notes,"onUpdate:modelValue":G[23]||(G[23]=ne=>d.value.verification_notes=ne),label:"Verification Notes",type:"textarea",rows:2},null,8,["modelValue"])])])])):se("",!0)]),actions:D(()=>[b(v(J),{variant:"outline",onClick:G[24]||(G[24]=ne=>l.value=!1)},{default:D(()=>[...G[52]||(G[52]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:C},{default:D(()=>[...G[53]||(G[53]=[W("Save Changes",-1)])]),_:1})]),_:1},8,["modelValue"])]}),actions:D(()=>[u("div",x2t,[u("div",_2t,[o.value!=="basic"?(T(),he(v(J),{key:0,variant:"outline",onClick:F},{prefix:D(()=>[b(v(gr),{class:"h-4 w-4"})]),default:D(()=>[G[54]||(G[54]=W(" Previous ",-1))]),_:1})):se("",!0)]),u("div",w2t,[b(v(J),{variant:"outline",onClick:G[26]||(G[26]=ee=>s.value=!1)},{default:D(()=>[...G[55]||(G[55]=[W("Cancel",-1)])]),_:1}),o.value!=="approval"?(T(),he(v(J),{key:0,variant:"solid",onClick:I},{suffix:D(()=>[b(v(sr),{class:"h-4 w-4"})]),default:D(()=>[G[56]||(G[56]=W(" Next ",-1))]),_:1})):(T(),he(v(J),{key:1,variant:"solid",theme:"green",loading:a.value,onClick:j},{prefix:D(()=>[b(v($r),{class:"h-4 w-4"})]),default:D(()=>[W(" "+$(i.value?"Update Checklist":"Create Checklist"),1)]),_:1},8,["loading"]))])])]),_:1},8,["modelValue","options"]))}},rO=Yl("compliance",{state:()=>({complianceRequirements:[],complianceChecklists:[],taxComplianceTrackers:[],loading:!1,error:null}),getters:{activeRequirements:t=>t.complianceRequirements.filter(e=>e.is_active),requirementsByCategory:t=>{const e={};return t.complianceRequirements.forEach(n=>{const r=n.compliance_category||"Other";e[r]||(e[r]=[]),e[r].push(n)}),e},requirementsByRegulatoryBody:t=>{const e={};return t.complianceRequirements.forEach(n=>{const r=n.regulatory_body||"Other";e[r]||(e[r]=[]),e[r].push(n)}),e},activeChecklists:t=>t.complianceChecklists.filter(e=>e.docstatus===0),checklistSummary:t=>{const e={total:t.complianceChecklists.length,completed:0,overdue:0,alerts:0};return t.complianceChecklists.forEach(n=>{n.completion_percent===100&&e.completed++,n.overdue_requirements>0&&e.overdue++,n.alerts&&n.alerts.length>0&&e.alerts++}),e},taxComplianceSummary:t=>{if(t.taxComplianceTrackers.length===0)return null;const n=t.taxComplianceTrackers.reduce((s,i)=>s+(i.compliance_score||0),0)/t.taxComplianceTrackers.length,r={vat:t.taxComplianceTrackers.filter(s=>s.vat_return_filed).length,paye:t.taxComplianceTrackers.filter(s=>s.paye_return_filed).length,wht:t.taxComplianceTrackers.filter(s=>s.wht_return_filed).length,nssf:t.taxComplianceTrackers.filter(s=>s.nssf_return_filed).length,nhif:t.taxComplianceTrackers.filter(s=>s.nhif_return_filed).length};return{totalTrackers:t.taxComplianceTrackers.length,averageScore:Math.round(n),filings:r}}},actions:{fetchComplianceRequirements(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Compliance Requirement",fields:["name","requirement_id","requirement_name","regulatory_body","regulation_reference","compliance_category","description","frequency","due_date_calculation","fixed_due_day","due_days_after_period","responsible_person","responsible_department","is_active","creation","modified"],limit_page_length:1e3,order_by:"regulatory_body, compliance_category"}}).fetch();this.complianceRequirements=t||[]}catch(t){console.error("Error fetching compliance requirements:",t),this.error=t.message||"Failed to fetch compliance requirements",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Compliance Requirement doctype"),this.complianceRequirements=[])}finally{this.loading=!1}})},fetchComplianceChecklists(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Compliance Checklist",fields:["name","checklist_id","compliance_period","period_type","period_month","fiscal_year","total_requirements","completed_requirements","overdue_requirements","completion_percent","prepared_by","reviewed_by","approved_by","creation","modified","docstatus"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.complianceChecklists=t||[]}catch(t){console.error("Error fetching compliance checklists:",t),this.error=t.message||"Failed to fetch compliance checklists",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Compliance Checklist doctype"),this.complianceChecklists=[])}finally{this.loading=!1}})},fetchTaxComplianceTrackers(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Tax Compliance Tracker",fields:["name","tracker_id","tax_period","compliance_score","vat_return_filed","paye_return_filed","wht_return_filed","nssf_return_filed","nhif_return_filed","creation","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();this.taxComplianceTrackers=t||[]}catch(t){console.error("Error fetching tax compliance trackers:",t),this.error=t.message||"Failed to fetch tax compliance trackers",t.message&&t.message.includes("PermissionError")&&(console.warn("No permission to access Tax Compliance Tracker doctype"),this.taxComplianceTrackers=[])}finally{this.loading=!1}})},createComplianceRequirement(t){return ue(this,null,function*(){try{const e=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Compliance Requirement"},t)}}).fetch();return yield this.fetchComplianceRequirements(),e}catch(e){throw console.error("Error creating compliance requirement:",e),e}})},updateComplianceRequirement(t,e){return ue(this,null,function*(){try{const n=yield Ve({url:"frappe.client.set_value",params:{doctype:"Compliance Requirement",name:t,fieldname:e}}).fetch();return yield this.fetchComplianceRequirements(),n}catch(n){throw console.error("Error updating compliance requirement:",n),n}})},createComplianceChecklist(t){return ue(this,null,function*(){try{const e=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Compliance Checklist"},t)}}).fetch();return yield this.fetchComplianceChecklists(),e}catch(e){throw console.error("Error creating compliance checklist:",e),e}})},createTaxComplianceTracker(t){return ue(this,null,function*(){try{const e=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Tax Compliance Tracker"},t)}}).fetch();return yield this.fetchTaxComplianceTrackers(),e}catch(e){throw console.error("Error creating tax compliance tracker:",e),e}})},getChecklistDetails(t){return ue(this,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Compliance Checklist",name:t}}).fetch()}catch(e){throw console.error("Error fetching checklist details:",e),e}})},getTaxTrackerDetails(t){return ue(this,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Tax Compliance Tracker",name:t}}).fetch()}catch(e){throw console.error("Error fetching tax tracker details:",e),e}})},getRequirementDetails(t){return ue(this,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Compliance Requirement",name:t}}).fetch()}catch(e){throw console.error("Error fetching requirement details:",e),e}})},createStandardRequirements(){return ue(this,null,function*(){try{const t=yield Ve({url:"mkaguzi.api.create_standard_kenya_requirements"}).fetch();return yield this.fetchComplianceRequirements(),t}catch(t){throw console.error("Error creating standard requirements:",t),t}})}}}),S2t={class:"p-6"},C2t={class:"flex justify-between items-center mb-6"},A2t={class:"bg-white rounded-lg border shadow-sm"},T2t={class:"p-4 border-b"},$2t={class:"flex justify-between items-center"},M2t={class:"flex gap-2"},E2t={class:"overflow-x-auto"},D2t={class:"w-full"},R2t={class:"divide-y divide-gray-200"},P2t={class:"px-4 py-3"},I2t={class:"font-medium"},O2t={class:"text-sm text-gray-500"},L2t={class:"px-4 py-3"},V2t={class:"text-sm text-gray-500"},N2t={class:"px-4 py-3"},j2t={class:"px-4 py-3"},F2t={class:"flex items-center gap-2"},B2t={class:"w-24 bg-gray-200 rounded-full h-2"},z2t={class:"text-sm"},U2t={class:"px-4 py-3"},H2t={class:"flex flex-col gap-1"},q2t={key:0,class:"text-xs text-red-600"},W2t={class:"px-4 py-3"},G2t={class:"flex gap-1"},Y2t={key:0,class:"p-8 text-center text-gray-500"},K2t={__name:"ComplianceChecklist",setup(t){const e=rO(),n=Q(!1),r=Q(!1),s=Q(null),i=Z(()=>e.loading),a=Z(()=>e.complianceChecklists);Z(()=>e.checklistSummary);const o=Q(""),l=Q(""),d=Q(""),c=Q(""),f=Q(""),p=Z(()=>{const C=a.value,A=C.length,M=C.filter(F=>F.completion_percent===100).length,E=C.filter(F=>(F.overdue_requirements||0)>0).length,P=C.filter(F=>F.completion_percent>0&&F.completion_percent<100).length,I=C.filter(F=>{var L;return(((L=F.alerts)==null?void 0:L.length)||0)>0}).length;return{total:A,completed:M,overdue:E,inProgress:P,alerts:I}}),h=()=>ue(this,null,function*(){yield e.fetchComplianceChecklists()}),m=()=>{s.value=null,r.value=!1,n.value=!0},g=C=>ue(this,null,function*(){try{s.value=yield e.getChecklistDetails(C.name),r.value=!0,n.value=!0}catch(A){console.error("Error fetching checklist details:",A)}}),y=C=>ue(this,null,function*(){try{s.value=yield e.getChecklistDetails(C.name),r.value=!0,n.value=!0}catch(A){console.error("Error fetching checklist details:",A)}}),x=()=>ue(this,null,function*(){n.value=!1,yield h()}),_=C=>({Monthly:"blue",Quarterly:"green",Annual:"purple"})[C]||"gray",k=C=>C>=80?"bg-green-500":C>=50?"bg-yellow-500":"bg-red-500",w=C=>C.overdue_requirements>0?"red":C.completion_percent===100?"green":C.completion_percent>0?"yellow":"gray",S=C=>C.overdue_requirements>0?"Overdue":C.completion_percent===100?"Completed":C.completion_percent>0?"In Progress":"Not Started";return yt(()=>ue(this,null,function*(){yield h()})),(C,A)=>(T(),R("div",S2t,[u("div",C2t,[A[7]||(A[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Compliance Checklist"),u("p",{class:"text-gray-600"},"Manage regulatory compliance requirements and track completion status.")],-1)),b(v(J),{onClick:m,class:"flex items-center gap-2"},{default:D(()=>[b(v(nt),{class:"w-4 h-4"}),A[6]||(A[6]=W(" Create Checklist ",-1))]),_:1})]),b(nwt,{stats:p.value},null,8,["stats"]),b(d_t,{searchQuery:o.value,"onUpdate:searchQuery":A[0]||(A[0]=M=>o.value=M),selectedPeriodType:l.value,"onUpdate:selectedPeriodType":A[1]||(A[1]=M=>l.value=M),selectedStatus:d.value,"onUpdate:selectedStatus":A[2]||(A[2]=M=>d.value=M),selectedCompletionStatus:c.value,"onUpdate:selectedCompletionStatus":A[3]||(A[3]=M=>c.value=M),selectedAlertLevel:f.value,"onUpdate:selectedAlertLevel":A[4]||(A[4]=M=>f.value=M)},null,8,["searchQuery","selectedPeriodType","selectedStatus","selectedCompletionStatus","selectedAlertLevel"]),u("div",A2t,[u("div",T2t,[u("div",$2t,[A[8]||(A[8]=u("h2",{class:"text-lg font-semibold"},"Compliance Checklists",-1)),u("div",M2t,[b(v(J),{onClick:h,loading:i.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"])])])]),u("div",E2t,[u("table",D2t,[A[9]||(A[9]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Checklist ID"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Period"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Progress"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",R2t,[(T(!0),R(xe,null,_e(a.value,M=>(T(),R("tr",{key:M.name,class:"hover:bg-gray-50"},[u("td",P2t,[u("div",I2t,$(M.checklist_id),1),u("div",O2t,$(M.name),1)]),u("td",L2t,[u("div",null,$(M.period_month||M.fiscal_year),1),u("div",V2t,$(M.compliance_period),1)]),u("td",N2t,[b(v(De),{variant:_(M.period_type)},{default:D(()=>[W($(M.period_type),1)]),_:2},1032,["variant"])]),u("td",j2t,[u("div",F2t,[u("div",B2t,[u("div",{class:pe(["h-2 rounded-full",k(M.completion_percent)]),style:rt({width:`${M.completion_percent||0}%`})},null,6)]),u("span",z2t,$(M.completion_percent||0)+"%",1)])]),u("td",U2t,[u("div",H2t,[b(v(De),{variant:w(M)},{default:D(()=>[W($(S(M)),1)]),_:2},1032,["variant"]),M.overdue_requirements>0?(T(),R("div",q2t,$(M.overdue_requirements)+" overdue ",1)):se("",!0)])]),u("td",W2t,[u("div",G2t,[b(v(J),{onClick:E=>g(M),variant:"outline",size:"sm"},{default:D(()=>[b(v(lr),{class:"w-4 h-4"})]),_:1},8,["onClick"]),b(v(J),{onClick:E=>y(M),variant:"outline",size:"sm"},{default:D(()=>[b(v(yn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])])]))),128))])])]),a.value.length===0&&!i.value?(T(),R("div",Y2t,[b(v(vt),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),A[11]||(A[11]=u("p",null,"No compliance checklists found.",-1)),b(v(J),{onClick:m,class:"mt-4"},{default:D(()=>[...A[10]||(A[10]=[W(" Create Your First Checklist ",-1)])]),_:1})])):se("",!0)]),b(k2t,{show:n.value,"onUpdate:show":A[5]||(A[5]=M=>n.value=M),"checklist-data":s.value,"is-edit-mode":r.value,onSaved:x},null,8,["show","checklist-data","is-edit-mode"])]))}},X2t={class:"compliance-filters"},Q2t={class:"filters-grid"},Z2t={class:"filter-actions"},J2t={__name:"ComplianceFilters",props:{filters:{type:Object,required:!0,default:()=>({regulatory_body:"",compliance_category:"",is_active:""})}},emits:["clear-filters"],setup(t,{emit:e}){const n=e,r=[{label:"KRA",value:"KRA"},{label:"NSSF",value:"NSSF"},{label:"NHIF",value:"NHIF"},{label:"NEMA",value:"NEMA"},{label:"County Government",value:"County Government"},{label:"KEBS",value:"KEBS"},{label:"Central Bank of Kenya",value:"Central Bank of Kenya"},{label:"CMA",value:"CMA"},{label:"IRA",value:"IRA"},{label:"Other",value:"Other"}],s=[{label:"Tax",value:"Tax"},{label:"Social Security",value:"Social Security"},{label:"Environmental",value:"Environmental"},{label:"Licensing",value:"Licensing"},{label:"Health & Safety",value:"Health & Safety"},{label:"Industry-Specific",value:"Industry-Specific"},{label:"Employment",value:"Employment"},{label:"Data Protection",value:"Data Protection"}],i=[{label:"All",value:""},{label:"Active",value:"true"},{label:"Inactive",value:"false"}],a=()=>{n("clear-filters")};return(o,l)=>(T(),R("div",X2t,[u("div",Q2t,[b(v(ve),{label:"Regulatory Body",modelValue:t.filters.regulatory_body,"onUpdate:modelValue":l[0]||(l[0]=d=>t.filters.regulatory_body=d),type:"select",options:r,placeholder:"All Bodies"},null,8,["modelValue"]),b(v(ve),{label:"Category",modelValue:t.filters.compliance_category,"onUpdate:modelValue":l[1]||(l[1]=d=>t.filters.compliance_category=d),type:"select",options:s,placeholder:"All Categories"},null,8,["modelValue"]),b(v(ve),{label:"Status",modelValue:t.filters.is_active,"onUpdate:modelValue":l[2]||(l[2]=d=>t.filters.is_active=d),type:"select",options:i,placeholder:"All Status"},null,8,["modelValue"]),u("div",Z2t,[b(v(J),{onClick:a,variant:"outline"},{default:D(()=>[...l[3]||(l[3]=[W("Clear Filters",-1)])]),_:1})])])]))}},ekt=It(J2t,[["__scopeId","data-v-eccd2ff4"]]),tkt={class:"compliance-requirement-form"},nkt={class:"form-sections"},rkt={class:"form-section"},skt={class:"form-grid"},ikt={class:"form-section"},akt={class:"form-grid"},okt={class:"form-row"},lkt={__name:"ComplianceRequirementForm",props:{formData:{type:Object,required:!0,default:()=>({requirement_id:"",requirement_name:"",regulatory_body:"",compliance_category:"",description:"",frequency:"",responsible_person:"",responsible_department:"",is_active:!0})}},setup(t){const e=[{label:"KRA",value:"KRA"},{label:"NSSF",value:"NSSF"},{label:"NHIF",value:"NHIF"},{label:"NEMA",value:"NEMA"},{label:"County Government",value:"County Government"},{label:"KEBS",value:"KEBS"},{label:"Central Bank of Kenya",value:"Central Bank of Kenya"},{label:"CMA",value:"CMA"},{label:"IRA",value:"IRA"},{label:"Other",value:"Other"}],n=[{label:"Tax",value:"Tax"},{label:"Social Security",value:"Social Security"},{label:"Environmental",value:"Environmental"},{label:"Licensing",value:"Licensing"},{label:"Health & Safety",value:"Health & Safety"},{label:"Industry-Specific",value:"Industry-Specific"},{label:"Employment",value:"Employment"},{label:"Data Protection",value:"Data Protection"}],r=[{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"One-time",value:"One-time"},{label:"Event-Based",value:"Event-Based"}];return(s,i)=>(T(),R("div",tkt,[u("div",nkt,[u("div",rkt,[i[9]||(i[9]=u("h3",{class:"section-title"},"Basic Information",-1)),u("div",skt,[b(v(ve),{label:"Requirement ID",modelValue:t.formData.requirement_id,"onUpdate:modelValue":i[0]||(i[0]=a=>t.formData.requirement_id=a),type:"text",required:""},null,8,["modelValue"]),b(v(ve),{label:"Requirement Name",modelValue:t.formData.requirement_name,"onUpdate:modelValue":i[1]||(i[1]=a=>t.formData.requirement_name=a),type:"text",required:""},null,8,["modelValue"]),b(v(ve),{label:"Regulatory Body",modelValue:t.formData.regulatory_body,"onUpdate:modelValue":i[2]||(i[2]=a=>t.formData.regulatory_body=a),type:"select",options:e,required:""},null,8,["modelValue"]),b(v(ve),{label:"Category",modelValue:t.formData.compliance_category,"onUpdate:modelValue":i[3]||(i[3]=a=>t.formData.compliance_category=a),type:"select",options:n,required:""},null,8,["modelValue"])])]),u("div",ikt,[i[10]||(i[10]=u("h3",{class:"section-title"},"Details & Responsibility",-1)),u("div",akt,[b(v(ve),{label:"Description",modelValue:t.formData.description,"onUpdate:modelValue":i[4]||(i[4]=a=>t.formData.description=a),type:"textarea",rows:"3",required:""},null,8,["modelValue"]),b(v(ve),{label:"Frequency",modelValue:t.formData.frequency,"onUpdate:modelValue":i[5]||(i[5]=a=>t.formData.frequency=a),type:"select",options:r,required:""},null,8,["modelValue"]),b(v(ve),{label:"Responsible Person",modelValue:t.formData.responsible_person,"onUpdate:modelValue":i[6]||(i[6]=a=>t.formData.responsible_person=a),type:"link",doctype:"User"},null,8,["modelValue"]),b(v(ve),{label:"Responsible Department",modelValue:t.formData.responsible_department,"onUpdate:modelValue":i[7]||(i[7]=a=>t.formData.responsible_department=a),type:"link",doctype:"Department"},null,8,["modelValue"])]),u("div",okt,[b(v(ve),{label:"Is Active",modelValue:t.formData.is_active,"onUpdate:modelValue":i[8]||(i[8]=a=>t.formData.is_active=a),type:"checkbox"},null,8,["modelValue"])])])])]))}},ukt=It(lkt,[["__scopeId","data-v-afd00570"]]),dkt={class:"compliance-stats"},ckt={class:"stats-grid"},fkt={class:"stat-card"},pkt={class:"stat-header"},hkt={class:"stat-value"},mkt={class:"stat-card"},gkt={class:"stat-header"},vkt={class:"stat-value"},ykt={class:"stat-card"},bkt={class:"stat-header"},xkt={class:"stat-value"},_kt={class:"stat-card"},wkt={class:"stat-header"},kkt={class:"stat-value"},Skt={__name:"ComplianceStats",props:{totalRequirements:{type:Number,required:!0,default:0},activeRequirementsCount:{type:Number,required:!0,default:0},regulatoryBodiesCount:{type:Number,required:!0,default:0},categoriesCount:{type:Number,required:!0,default:0}},setup(t){return(e,n)=>(T(),R("div",dkt,[u("div",ckt,[u("div",fkt,[u("div",pkt,[n[0]||(n[0]=u("h3",null,"Total Requirements",-1)),b(v(vt),{class:"stat-icon"})]),u("div",hkt,$(t.totalRequirements),1),n[1]||(n[1]=u("div",{class:"stat-description"}," All compliance requirements ",-1))]),u("div",mkt,[u("div",gkt,[n[2]||(n[2]=u("h3",null,"Active Requirements",-1)),b(v(Kt),{class:"stat-icon"})]),u("div",vkt,$(t.activeRequirementsCount),1),n[3]||(n[3]=u("div",{class:"stat-description"}," Currently active requirements ",-1))]),u("div",ykt,[u("div",bkt,[n[4]||(n[4]=u("h3",null,"Regulatory Bodies",-1)),b(v(Ol),{class:"stat-icon"})]),u("div",xkt,$(t.regulatoryBodiesCount),1),n[5]||(n[5]=u("div",{class:"stat-description"}," Different regulatory authorities ",-1))]),u("div",_kt,[u("div",wkt,[n[6]||(n[6]=u("h3",null,"Categories",-1)),b(v(OY),{class:"stat-icon"})]),u("div",kkt,$(t.categoriesCount),1),n[7]||(n[7]=u("div",{class:"stat-description"}," Compliance requirement categories ",-1))])])]))}},Ckt=It(Skt,[["__scopeId","data-v-fce2c824"]]),Akt={class:"p-6"},Tkt={class:"flex justify-between items-center mb-6"},$kt={class:"flex gap-2"},Mkt={class:"bg-white rounded-lg border shadow-sm"},Ekt={class:"p-4 border-b"},Dkt={class:"flex justify-between items-center"},Rkt={class:"flex gap-2"},Pkt={class:"overflow-x-auto"},Ikt={class:"w-full"},Okt={class:"divide-y divide-gray-200"},Lkt={class:"px-4 py-3"},Vkt={class:"font-medium"},Nkt={class:"text-sm text-gray-500"},jkt={class:"px-4 py-3"},Fkt={class:"font-medium"},Bkt={class:"text-sm text-gray-600 line-clamp-2"},zkt={class:"px-4 py-3"},Ukt={class:"px-4 py-3"},Hkt={class:"px-4 py-3"},qkt={key:0,class:"text-xs text-gray-500"},Wkt={class:"px-4 py-3"},Gkt={key:0},Ykt={key:1,class:"text-sm text-gray-500"},Kkt={class:"px-4 py-3"},Xkt={class:"px-4 py-3"},Qkt={class:"flex gap-1"},Zkt={key:0,class:"p-8 text-center text-gray-500"},Jkt={class:"mt-4 space-x-2"},eSt={key:0,class:"space-y-6"},tSt={class:"grid grid-cols-2 gap-4"},nSt={class:"mt-2 space-y-1 text-sm"},rSt={class:"mt-2 space-y-1 text-sm"},sSt={key:0},iSt={key:1},aSt={key:2},oSt={key:3},lSt={class:"mt-2 text-sm"},uSt={key:0},dSt={class:"mt-2 text-sm"},cSt={key:1},fSt={class:"mt-2 space-y-2"},pSt={class:"font-medium"},hSt={class:"text-sm text-gray-600"},mSt={key:2},gSt={class:"mt-2 space-y-2"},vSt={class:"font-medium"},ySt={class:"text-sm"},bSt={key:0,class:"text-sm font-medium text-red-600"},xSt={key:3},_St={class:"mt-2 space-y-2"},wSt={class:"font-medium"},kSt={class:"text-sm text-gray-600"},SSt={__name:"ComplianceRequirements",setup(t){const e=rO(),n=Q(!1),r=Q(!1),s=Q(null),i=Q(!1),a=Q({regulatory_body:"",compliance_category:"",is_active:""}),o=Q({requirement_id:"",requirement_name:"",regulatory_body:"",compliance_category:"",description:"",frequency:"",responsible_person:"",responsible_department:"",is_active:!0}),l=Z(()=>e.complianceRequirements),d=Z(()=>e.activeRequirements),c=Z(()=>e.requirementsByRegulatoryBody),f=Z(()=>e.requirementsByCategory),p=Z(()=>e.loading),h=Z(()=>{let A=l.value;if(a.value.regulatory_body&&(A=A.filter(M=>M.regulatory_body===a.value.regulatory_body)),a.value.compliance_category&&(A=A.filter(M=>M.compliance_category===a.value.compliance_category)),a.value.is_active!==""){const M=a.value.is_active==="true";A=A.filter(E=>E.is_active===M)}return A}),m=()=>ue(this,null,function*(){yield e.fetchComplianceRequirements()}),g=()=>ue(this,null,function*(){try{i.value=!0,yield e.createComplianceRequirement(o.value),n.value=!1,o.value={requirement_id:"",requirement_name:"",regulatory_body:"",compliance_category:"",description:"",frequency:"",responsible_person:"",responsible_department:"",is_active:!0}}catch(A){console.error("Error creating requirement:",A)}finally{i.value=!1}}),y=()=>ue(this,null,function*(){try{yield e.createStandardRequirements()}catch(A){console.error("Error creating standard requirements:",A)}}),x=A=>ue(this,null,function*(){try{s.value=yield e.getRequirementDetails(A.name),r.value=!0}catch(M){console.error("Error fetching requirement details:",M)}}),_=A=>{console.log("Edit requirement:",A)},k=()=>{a.value={regulatory_body:"",compliance_category:"",is_active:""}},w=A=>({KRA:"blue",NSSF:"green",NHIF:"purple",NEMA:"green","County Government":"orange"})[A]||"gray",S=A=>({Tax:"red","Social Security":"blue",Environmental:"green",Licensing:"purple","Health & Safety":"orange"})[A]||"gray",C=A=>A.due_date_calculation==="Fixed Date"?`Due day: ${A.fixed_due_day}`:A.due_date_calculation==="X Days After Period End"?`${A.due_days_after_period} days after period`:A.due_date_calculation;return yt(()=>ue(this,null,function*(){yield m()})),(A,M)=>(T(),R("div",Akt,[u("div",Tkt,[M[8]||(M[8]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Compliance Requirements"),u("p",{class:"text-gray-600"},"Manage regulatory compliance requirements and obligations.")],-1)),u("div",$kt,[b(v(J),{onClick:y,variant:"outline",class:"flex items-center gap-2"},{default:D(()=>[b(v(xn),{class:"w-4 h-4"}),M[6]||(M[6]=W(" Load Standards ",-1))]),_:1}),b(v(J),{onClick:M[0]||(M[0]=E=>n.value=!0),class:"flex items-center gap-2"},{default:D(()=>[b(v(nt),{class:"w-4 h-4"}),M[7]||(M[7]=W(" Add Requirement ",-1))]),_:1})])]),b(Ckt,{"total-requirements":l.value.length,"active-requirements-count":d.value.length,"regulatory-bodies-count":Object.keys(c.value).length,"categories-count":Object.keys(f.value).length},null,8,["total-requirements","active-requirements-count","regulatory-bodies-count","categories-count"]),b(ekt,{filters:a.value,onClearFilters:k},null,8,["filters"]),u("div",Mkt,[u("div",Ekt,[u("div",Dkt,[M[9]||(M[9]=u("h2",{class:"text-lg font-semibold"},"Compliance Requirements",-1)),u("div",Rkt,[b(v(J),{onClick:m,loading:p.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"])])])]),u("div",Pkt,[u("table",Ikt,[M[10]||(M[10]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Requirement ID"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Name"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Regulatory Body"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Frequency"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Responsible"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",Okt,[(T(!0),R(xe,null,_e(h.value,E=>(T(),R("tr",{key:E.name,class:"hover:bg-gray-50"},[u("td",Lkt,[u("div",Vkt,$(E.requirement_id),1),u("div",Nkt,$(E.name),1)]),u("td",jkt,[u("div",Fkt,$(E.requirement_name),1),u("div",Bkt,$(E.description),1)]),u("td",zkt,[b(v(De),{variant:w(E.regulatory_body)},{default:D(()=>[W($(E.regulatory_body),1)]),_:2},1032,["variant"])]),u("td",Ukt,[b(v(De),{variant:S(E.compliance_category)},{default:D(()=>[W($(E.compliance_category),1)]),_:2},1032,["variant"])]),u("td",Hkt,[u("div",null,$(E.frequency),1),E.due_date_calculation?(T(),R("div",qkt,$(C(E)),1)):se("",!0)]),u("td",Wkt,[E.responsible_person?(T(),R("div",Gkt,$(E.responsible_person),1)):se("",!0),E.responsible_department?(T(),R("div",Ykt,$(E.responsible_department),1)):se("",!0)]),u("td",Kkt,[b(v(De),{variant:E.is_active?"green":"gray"},{default:D(()=>[W($(E.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),u("td",Xkt,[u("div",Qkt,[b(v(J),{onClick:P=>x(E),variant:"outline",size:"sm"},{default:D(()=>[b(v(lr),{class:"w-4 h-4"})]),_:1},8,["onClick"]),b(v(J),{onClick:P=>_(E),variant:"outline",size:"sm"},{default:D(()=>[b(v(yn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])])]))),128))])])]),h.value.length===0&&!p.value?(T(),R("div",Zkt,[b(v(vt),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),M[13]||(M[13]=u("p",null,"No compliance requirements found.",-1)),u("div",Jkt,[b(v(J),{onClick:y},{default:D(()=>[...M[11]||(M[11]=[W("Load Standard Requirements",-1)])]),_:1}),b(v(J),{onClick:M[1]||(M[1]=E=>n.value=!0),variant:"outline"},{default:D(()=>[...M[12]||(M[12]=[W("Add Custom Requirement",-1)])]),_:1})])])):se("",!0)]),b(v(jt),{modelValue:n.value,"onUpdate:modelValue":M[4]||(M[4]=E=>n.value=E),options:{title:"Add Compliance Requirement",size:"2xl"}},{"body-content":D(()=>[b(ukt,{"form-data":o.value,"onUpdate:formData":M[2]||(M[2]=E=>o.value=E)},null,8,["form-data"])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:M[3]||(M[3]=E=>n.value=!1)},{default:D(()=>[...M[14]||(M[14]=[W("Cancel",-1)])]),_:1}),b(v(J),{onClick:g,loading:i.value},{default:D(()=>[...M[15]||(M[15]=[W("Create Requirement",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:r.value,"onUpdate:modelValue":M[5]||(M[5]=E=>r.value=E),options:{title:"Requirement Details",size:"4xl"}},{"body-content":D(()=>[s.value?(T(),R("div",eSt,[u("div",tSt,[u("div",null,[M[22]||(M[22]=u("h3",{class:"font-semibold"},"Basic Information",-1)),u("div",nSt,[u("p",null,[M[16]||(M[16]=u("span",{class:"font-medium"},"ID:",-1)),W(" "+$(s.value.requirement_id),1)]),u("p",null,[M[17]||(M[17]=u("span",{class:"font-medium"},"Name:",-1)),W(" "+$(s.value.requirement_name),1)]),u("p",null,[M[18]||(M[18]=u("span",{class:"font-medium"},"Regulatory Body:",-1)),W(" "+$(s.value.regulatory_body),1)]),u("p",null,[M[19]||(M[19]=u("span",{class:"font-medium"},"Category:",-1)),W(" "+$(s.value.compliance_category),1)]),u("p",null,[M[20]||(M[20]=u("span",{class:"font-medium"},"Frequency:",-1)),W(" "+$(s.value.frequency),1)]),u("p",null,[M[21]||(M[21]=u("span",{class:"font-medium"},"Status:",-1)),b(v(De),{variant:s.value.is_active?"green":"gray",class:"ml-2"},{default:D(()=>[W($(s.value.is_active?"Active":"Inactive"),1)]),_:1},8,["variant"])])])]),u("div",null,[M[28]||(M[28]=u("h3",{class:"font-semibold"},"Responsibility",-1)),u("div",rSt,[s.value.responsible_person?(T(),R("p",sSt,[M[23]||(M[23]=u("span",{class:"font-medium"},"Person:",-1)),W(" "+$(s.value.responsible_person),1)])):se("",!0),s.value.responsible_department?(T(),R("p",iSt,[M[24]||(M[24]=u("span",{class:"font-medium"},"Department:",-1)),W(" "+$(s.value.responsible_department),1)])):se("",!0),u("p",null,[M[25]||(M[25]=u("span",{class:"font-medium"},"Due Date Calculation:",-1)),W(" "+$(s.value.due_date_calculation),1)]),s.value.fixed_due_day?(T(),R("p",aSt,[M[26]||(M[26]=u("span",{class:"font-medium"},"Fixed Due Day:",-1)),W(" "+$(s.value.fixed_due_day),1)])):se("",!0),s.value.due_days_after_period?(T(),R("p",oSt,[M[27]||(M[27]=u("span",{class:"font-medium"},"Days After Period:",-1)),W(" "+$(s.value.due_days_after_period),1)])):se("",!0)])])]),u("div",null,[M[29]||(M[29]=u("h3",{class:"font-semibold"},"Description",-1)),u("p",lSt,$(s.value.description),1)]),s.value.applicability?(T(),R("div",uSt,[M[30]||(M[30]=u("h3",{class:"font-semibold"},"Applicability",-1)),u("p",dSt,$(s.value.applicability),1)])):se("",!0),s.value.requirement_details&&s.value.requirement_details.length>0?(T(),R("div",cSt,[M[31]||(M[31]=u("h3",{class:"font-semibold"},"Requirement Details",-1)),u("div",fSt,[(T(!0),R(xe,null,_e(s.value.requirement_details,E=>(T(),R("div",{key:E.name,class:"p-3 border rounded"},[u("p",pSt,$(E.detail_type),1),u("p",hSt,$(E.description),1),b(v(De),{variant:E.mandatory?"red":"gray",class:"mt-1"},{default:D(()=>[W($(E.mandatory?"Mandatory":"Optional"),1)]),_:2},1032,["variant"])]))),128))])])):se("",!0),s.value.penalties_for_non_compliance&&s.value.penalties_for_non_compliance.length>0?(T(),R("div",mSt,[M[32]||(M[32]=u("h3",{class:"font-semibold text-red-600"},"Penalties for Non-Compliance",-1)),u("div",gSt,[(T(!0),R(xe,null,_e(s.value.penalties_for_non_compliance,E=>(T(),R("div",{key:E.name,class:"p-3 bg-red-50 border border-red-200 rounded"},[u("p",vSt,$(E.penalty_type),1),u("p",ySt,$(E.description),1),E.penalty_amount_range?(T(),R("p",bSt," Amount Range: "+$(E.penalty_amount_range),1)):se("",!0)]))),128))])])):se("",!0),s.value.bc_data_sources&&s.value.bc_data_sources.length>0?(T(),R("div",xSt,[M[33]||(M[33]=u("h3",{class:"font-semibold"},"BC Data Sources",-1)),u("div",_St,[(T(!0),R(xe,null,_e(s.value.bc_data_sources,E=>(T(),R("div",{key:E.name,class:"p-3 border rounded"},[u("p",wSt,$(E.data_source_name),1),u("p",kSt,$(E.description),1)]))),128))])])):se("",!0)])):se("",!0)]),_:1},8,["modelValue"])]))}},CSt={class:"w-full"},ASt={class:"flex items-center justify-between border-b border-gray-200 bg-gray-50 px-4 py-3"},TSt={class:"flex items-center space-x-4"},$St={class:"text-lg font-medium text-gray-900"},MSt={class:"flex items-center space-x-2"},ESt={class:"relative"},DSt={key:2,class:"flex items-center space-x-2"},RSt={class:"text-sm text-gray-600"},PSt={class:"overflow-x-auto"},ISt={class:"min-w-full divide-y divide-gray-200"},OSt={class:"bg-gray-50"},LSt={key:0,class:"w-12 px-6 py-3"},VSt=["onClick"],NSt={class:"flex items-center space-x-1"},jSt={key:0,class:"flex flex-col"},FSt={key:1,class:"w-32 px-6 py-3 text-right"},BSt={class:"divide-y divide-gray-200 bg-white"},zSt={key:0,class:"px-6 py-4"},USt={key:1,class:"px-6 py-4 text-right"},HSt={key:0},qSt=["colspan"],WSt={class:"flex flex-col items-center space-y-2"},GSt={key:0,class:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3"},YSt={class:"flex items-center space-x-2"},KSt={class:"text-sm text-gray-700"},XSt={class:"flex items-center space-x-2"},QSt={class:"flex items-center space-x-1"},ZSt={class:"space-y-4"},JSt={class:"block text-sm font-medium text-gray-700"},eCt={class:"flex justify-between"},tCt={class:"space-x-2"},sO={__name:"DataTable",props:{title:{type:String,default:"Data Table"},columns:{type:Array,required:!0},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},exportable:{type:Boolean,default:!0},showFilters:{type:Boolean,default:!0},showPagination:{type:Boolean,default:!0},pageSize:{type:Number,default:10},emptyMessage:{type:String,default:"No data available"},rowActions:{type:Array,default:()=>[]},bulkActions:{type:Array,default:()=>[]},availableFilters:{type:Array,default:()=>[]}},emits:["sort","filter","export","row-action","bulk-action","selection-change"],setup(t,{emit:e}){const n=t,r=e,s=Q(""),i=Q(""),a=Q("asc"),o=Q(1),l=Q(n.pageSize),d=Q([]),c=Q(!1),f=Q({}),p=Z(()=>n.columns.filter(U=>!U.hidden)),h=Z(()=>{let U=p.value.length;return n.selectable&&U++,n.rowActions.length>0&&U++,U}),m=Z(()=>{let U=[...n.data];return s.value&&(U=U.filter(G=>Object.values(G).some(ee=>String(ee).toLowerCase().includes(s.value.toLowerCase())))),Object.entries(f.value).forEach(([G,ee])=>{ee.value&&(U=U.filter(ie=>{const ne=A(ie,{key:G});return j(ne,ee)}))}),i.value&&U.sort((G,ee)=>{const ie=A(G,{key:i.value}),ne=A(ee,{key:i.value});return a.value==="asc"?ie>ne?1:-1:ie<ne?1:-1}),U}),g=Z(()=>{if(!n.showPagination)return m.value;const U=(o.value-1)*l.value,G=U+l.value;return m.value.slice(U,G)}),y=Z(()=>m.value.length),x=Z(()=>Math.ceil(y.value/l.value)),_=Z(()=>{const U=[];let ee=Math.max(1,o.value-Math.floor(2.5));const ie=Math.min(x.value,ee+5-1);ie-ee+1<5&&(ee=Math.max(1,ie-5+1));for(let ne=ee;ne<=ie;ne++)U.push(ne);return U}),k=Z(()=>{const U=(o.value-1)*l.value+1,G=Math.min(o.value*l.value,y.value);return`${U}-${G} of ${y.value}`}),w=Z(()=>d.value.length===g.value.length&&g.value.length>0),S=[{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100}],C=[{label:"Equals",value:"eq"},{label:"Contains",value:"contains"},{label:"Starts with",value:"startswith"},{label:"Ends with",value:"endswith"},{label:"Greater than",value:"gt"},{label:"Less than",value:"lt"}],A=(U,G)=>typeof G.key=="function"?G.key(U):U[G.key],M=(U,G)=>G.formatter?G.formatter(U):U==null?"-":G.type==="date"&&U?new Date(U).toLocaleDateString():G.type==="currency"&&U?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(U):String(U),E=()=>{o.value=1,r("filter",{search:s.value,filters:f.value})},P=U=>{i.value===U?a.value=a.value==="asc"?"desc":"asc":(i.value=U,a.value="asc"),r("sort",{field:i.value,order:a.value})},I=()=>{r("export",{data:m.value,columns:p.value,filename:`${n.title.toLowerCase().replace(/\s+/g,"_")}_export`})},F=U=>{const G=d.value.indexOf(U);G>-1?d.value.splice(G,1):d.value.push(U),r("selection-change",d.value)},L=U=>{U?d.value=g.value.map(G=>G.name||G.id):d.value=[],r("selection-change",d.value)},z=U=>n.rowActions.map(G=>ze(ge({},G),{onClick:()=>r("row-action",{action:G.key,row:U})})),N=U=>{r("bulk-action",{action:U.key,rows:d.value})},q=U=>{o.value=U},V=()=>{c.value=!1,o.value=1,r("filter",{search:s.value,filters:f.value})},O=U=>{delete f.value[U]},X=()=>{f.value={},s.value="",o.value=1,r("filter",{search:"",filters:{}})},j=(U,G)=>{const{operator:ee,filterValue:ie}=G;switch(ee){case"eq":return U==ie;case"contains":return String(U).toLowerCase().includes(String(ie).toLowerCase());case"startswith":return String(U).toLowerCase().startsWith(String(ie).toLowerCase());case"endswith":return String(U).toLowerCase().endsWith(String(ie).toLowerCase());case"gt":return Number(U)>Number(ie);case"lt":return Number(U)<Number(ie);default:return!0}};return et(()=>n.pageSize,U=>{l.value=U,o.value=1}),et(()=>n.data,()=>{o.value=1,d.value=[]}),(U,G)=>(T(),R("div",CSt,[u("div",ASt,[u("div",TSt,[u("h3",$St,$(t.title),1),y.value?(T(),he(v(De),{key:0,variant:"secondary"},{default:D(()=>[W($(y.value)+" "+$(y.value===1?"record":"records"),1)]),_:1})):se("",!0)]),u("div",MSt,[u("div",ESt,[b(v(En),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),b(v($n),{modelValue:s.value,"onUpdate:modelValue":G[0]||(G[0]=ee=>s.value=ee),placeholder:"Search...",class:"w-64 pl-10",onInput:E},null,8,["modelValue"])]),t.showFilters?(T(),he(v(J),{key:0,variant:"outline",onClick:G[1]||(G[1]=ee=>c.value=!0)},{default:D(()=>[b(v(kY),{class:"h-4 w-4"}),G[7]||(G[7]=W(" Filters ",-1))]),_:1})):se("",!0),t.exportable?(T(),he(v(J),{key:1,variant:"outline",onClick:I},{default:D(()=>[b(v(xn),{class:"h-4 w-4"}),G[8]||(G[8]=W(" Export ",-1))]),_:1})):se("",!0),d.value.length>0?(T(),R("div",DSt,[u("span",RSt,$(d.value.length)+" selected ",1),(T(!0),R(xe,null,_e(t.bulkActions,ee=>(T(),he(v(J),{key:ee.key,variant:"outline",size:"sm",onClick:ie=>N(ee)},{default:D(()=>[W($(ee.label),1)]),_:2},1032,["onClick"]))),128))])):se("",!0)])]),u("div",PSt,[u("table",ISt,[u("thead",OSt,[u("tr",null,[t.selectable?(T(),R("th",LSt,[b(v(St),{"model-value":w.value,"onUpdate:modelValue":L},null,8,["model-value"])])):se("",!0),(T(!0),R(xe,null,_e(p.value,ee=>(T(),R("th",{key:ee.key,class:pe(["px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",{"cursor-pointer hover:bg-gray-100":ee.sortable}]),onClick:ie=>ee.sortable&&P(ee.key)},[u("div",NSt,[u("span",null,$(ee.label),1),ee.sortable?(T(),R("div",jSt,[b(v(yY),{class:pe(["h-3 w-3",{"text-blue-600":i.value===ee.key&&a.value==="asc"}])},null,8,["class"]),b(v(xo),{class:pe(["h-3 w-3 -mt-1",{"text-blue-600":i.value===ee.key&&a.value==="desc"}])},null,8,["class"])])):se("",!0)])],10,VSt))),128)),t.rowActions.length>0?(T(),R("th",FSt," Actions ")):se("",!0)])]),u("tbody",BSt,[(T(!0),R(xe,null,_e(g.value,ee=>(T(),R("tr",{key:ee.name||ee.id,class:pe(["hover:bg-gray-50",{"bg-blue-50":d.value.includes(ee.name||ee.id)}])},[t.selectable?(T(),R("td",zSt,[b(v(St),{"model-value":d.value.includes(ee.name||ee.id),"onUpdate:modelValue":ie=>F(ee.name||ee.id)},null,8,["model-value","onUpdate:modelValue"])])):se("",!0),(T(!0),R(xe,null,_e(p.value,ie=>(T(),R("td",{key:ie.key,class:"px-6 py-4 text-sm text-gray-900"},[qe(U.$slots,`column-${ie.key}`,{row:ee,value:A(ee,ie)},()=>[W($(M(A(ee,ie),ie)),1)])]))),128)),t.rowActions.length>0?(T(),R("td",USt,[b(v(H0),{options:z(ee)},{default:D(()=>[b(v(J),{variant:"ghost",size:"sm"},{default:D(()=>[b(v(V0),{class:"h-4 w-4"})]),_:1})]),_:1},8,["options"])])):se("",!0)],2))),128)),g.value.length===0?(T(),R("tr",HSt,[u("td",{colspan:h.value,class:"px-6 py-12 text-center text-gray-500"},[u("div",WSt,[b(v(Kr),{class:"h-8 w-8 text-gray-400"}),u("p",null,$(t.emptyMessage),1)])],8,qSt)])):se("",!0)])])]),t.showPagination?(T(),R("div",GSt,[u("div",YSt,[G[9]||(G[9]=u("span",{class:"text-sm text-gray-700"},"Rows per page:",-1)),b(v(Qe),{modelValue:l.value,"onUpdate:modelValue":G[2]||(G[2]=ee=>l.value=ee),options:S,class:"w-20"},null,8,["modelValue"])]),u("div",KSt,$(k.value),1),u("div",XSt,[b(v(J),{variant:"outline",size:"sm",disabled:o.value===1,onClick:G[3]||(G[3]=ee=>q(o.value-1))},{default:D(()=>[b(v(gr),{class:"h-4 w-4"}),G[10]||(G[10]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",QSt,[(T(!0),R(xe,null,_e(_.value,ee=>(T(),he(v(J),{key:ee,variant:"outline",size:"sm",class:pe({"bg-blue-600 text-white":ee===o.value}),onClick:ie=>q(ee)},{default:D(()=>[W($(ee),1)]),_:2},1032,["class","onClick"]))),128))]),b(v(J),{variant:"outline",size:"sm",disabled:o.value===x.value,onClick:G[4]||(G[4]=ee=>q(o.value+1))},{default:D(()=>[G[11]||(G[11]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):se("",!0),b(v(jt),{modelValue:c.value,"onUpdate:modelValue":G[6]||(G[6]=ee=>c.value=ee),title:"Filter Data",options:{size:"lg"}},{body:D(()=>[u("div",ZSt,[(T(!0),R(xe,null,_e(t.availableFilters,ee=>(T(),R("div",{key:ee.key,class:"grid grid-cols-3 gap-4 items-end"},[u("div",null,[u("label",JSt,$(ee.label),1),b(v(Qe),{modelValue:f.value[ee.key].operator,"onUpdate:modelValue":ie=>f.value[ee.key].operator=ie,options:C,placeholder:"Operator"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",null,[b(v($n),{modelValue:f.value[ee.key].value,"onUpdate:modelValue":ie=>f.value[ee.key].value=ie,placeholder:ee.placeholder||"Value",type:ee.type||"text"},null,8,["modelValue","onUpdate:modelValue","placeholder","type"])]),u("div",null,[b(v(J),{variant:"outline",size:"sm",onClick:ie=>O(ee.key)},{default:D(()=>[b(v(ht),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]))),128)),u("div",eCt,[b(v(J),{variant:"outline",onClick:X},{default:D(()=>[...G[12]||(G[12]=[W(" Clear All ",-1)])]),_:1}),u("div",tCt,[b(v(J),{variant:"outline",onClick:G[5]||(G[5]=ee=>c.value=!1)},{default:D(()=>[...G[13]||(G[13]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{onClick:V},{default:D(()=>[...G[14]||(G[14]=[W(" Apply Filters ",-1)])]),_:1})])])])]),_:1},8,["modelValue"])]))}},nCt={class:"w-full"},rCt=["multiple","accept"],sCt={class:"text-center"},iCt={class:"flex justify-center mb-4"},aCt={class:"space-y-2"},oCt={class:"text-lg font-medium text-gray-900"},lCt={class:"text-sm text-gray-500"},uCt={key:0,class:"text-xs text-gray-400"},dCt={key:1,class:"text-xs text-gray-400"},cCt={key:0,class:"mt-4 space-y-2"},fCt={class:"flex items-center space-x-3"},pCt={class:"flex-shrink-0"},hCt={class:"min-w-0 flex-1"},mCt={class:"text-sm font-medium text-gray-900 truncate"},gCt={class:"text-xs text-gray-500"},vCt={class:"flex items-center space-x-2"},yCt={key:0,class:"flex-1 max-w-24"},bCt={class:"w-full bg-gray-200 rounded-full h-2"},xCt={class:"flex-shrink-0"},_Ct={key:1,class:"mt-4 flex justify-end space-x-2"},wCt={__name:"FileUploader",props:{multiple:{type:Boolean,default:!1},accept:{type:String,default:""},maxSize:{type:Number,default:0},maxFiles:{type:Number,default:0},disabled:{type:Boolean,default:!1},uploadButtonText:{type:String,default:"Upload Files"},autoUpload:{type:Boolean,default:!1}},emits:["files-selected","file-removed","upload-start","upload-progress","upload-complete","upload-error"],setup(t,{emit:e}){const n=t,r=e,s=Q(!1),i=Q([]),a=Q(!1),o=Z(()=>i.value.length>0&&i.value.every(x=>x.status!=="uploading")&&!n.disabled),l=x=>{const _=Array.from(x.target.files);c(_)},d=x=>{s.value=!1;const _=Array.from(x.dataTransfer.files);c(_)},c=x=>{const _=[];for(const k of x){const w=f(k);w.valid?_.push({file:k,name:k.name,size:k.size,type:k.type,status:"pending",progress:0,error:null}):r("upload-error",{file:k,error:w.error})}if(n.maxFiles>0&&i.value.length+_.length>n.maxFiles){r("upload-error",{error:`Maximum ${n.maxFiles} files allowed`});return}n.multiple?i.value.push(..._):i.value=_.slice(0,1),r("files-selected",i.value),n.autoUpload&&_.length>0&&m()},f=x=>{if(n.maxSize>0&&x.size>n.maxSize)return{valid:!1,error:`File size exceeds maximum limit of ${y(n.maxSize)}`};if(n.accept){const _=n.accept.split(",").map(C=>C.trim()),k=x.type.toLowerCase(),w=x.name.toLowerCase();if(!_.some(C=>C.startsWith(".")?w.endsWith(C):k.includes(C.replace("*",""))))return{valid:!1,error:`File type not accepted. Accepted types: ${n.accept}`}}return{valid:!0}},p=x=>{const _=i.value.splice(x,1)[0];r("file-removed",_)},h=()=>{i.value=[],r("files-selected",[])},m=()=>ue(this,null,function*(){if(o.value){a.value=!0,r("upload-start",i.value);try{for(const x of i.value)if(x.status!=="completed"){x.status="uploading",x.progress=0;try{yield g(x),x.status="completed",x.progress=100,r("upload-progress",{file:x,progress:100})}catch(_){x.status="error",x.error=_.message,r("upload-error",{file:x,error:_.message})}}r("upload-complete",i.value)}catch(x){r("upload-error",{error:x.message})}finally{a.value=!1}}}),g=x=>ue(this,null,function*(){return new Promise((_,k)=>{let w=0;const S=setInterval(()=>{w+=Math.random()*20,w>=100&&(w=100,clearInterval(S),_()),x.progress=Math.round(w),r("upload-progress",{file:x,progress:x.progress})},200)})}),y=x=>{if(x===0)return"0 Bytes";const _=1024,k=["Bytes","KB","MB","GB"],w=Math.floor(Math.log(x)/Math.log(_));return Number.parseFloat((x/Math.pow(_,w)).toFixed(2))+" "+k[w]};return(x,_)=>(T(),R("div",nCt,[u("div",{class:pe(["relative border-2 border-dashed rounded-lg p-6 transition-colors",s.value?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400",t.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"]),onDragover:_[0]||(_[0]=ut(k=>s.value=!0,["prevent"])),onDragleave:_[1]||(_[1]=ut(k=>s.value=!1,["prevent"])),onDrop:ut(d,["prevent"]),onClick:_[2]||(_[2]=k=>t.disabled?null:x.$refs.fileInput.click())},[u("input",{ref:"fileInput",type:"file",multiple:t.multiple,accept:t.accept,class:"hidden",onChange:l},null,40,rCt),u("div",sCt,[u("div",iCt,[u("div",{class:pe(["rounded-full p-3",s.value?"bg-blue-100":"bg-gray-100"])},[b(v(xa),{class:pe(["h-8 w-8",s.value?"text-blue-600":"text-gray-400"])},null,8,["class"])],2)]),u("div",aCt,[u("p",oCt,$(s.value?"Drop files here":"Upload files"),1),u("p",lCt,$(t.multiple?"Select multiple files":"Select a file")+" or drag and drop ",1),t.accept?(T(),R("p",uCt," Accepted formats: "+$(t.accept),1)):se("",!0),t.maxSize?(T(),R("p",dCt," Maximum file size: "+$(y(t.maxSize)),1)):se("",!0)])])],34),i.value.length>0?(T(),R("div",cCt,[_[3]||(_[3]=u("h4",{class:"text-sm font-medium text-gray-700"},"Selected Files",-1)),(T(!0),R(xe,null,_e(i.value,(k,w)=>(T(),R("div",{key:w,class:"flex items-center justify-between rounded-lg border border-gray-200 bg-white p-3"},[u("div",fCt,[u("div",pCt,[b(v(vfe),{class:"h-8 w-8 text-gray-400"})]),u("div",hCt,[u("p",mCt,$(k.name),1),u("p",gCt,$(y(k.size)),1)])]),u("div",vCt,[k.status==="uploading"?(T(),R("div",yCt,[u("div",bCt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${k.progress||0}%`})},null,4)])])):se("",!0),u("div",xCt,[k.status==="completed"?(T(),he(v(Kt),{key:0,class:"h-5 w-5 text-green-500"})):se("",!0),k.status==="error"?(T(),he(v(Uc),{key:1,class:"h-5 w-5 text-red-500"})):se("",!0),k.status==="uploading"?(T(),he(v(TY),{key:2,class:"h-5 w-5 text-blue-500 animate-spin"})):se("",!0)]),b(v(J),{variant:"ghost",size:"sm",onClick:S=>p(w),disabled:k.status==="uploading"},{default:D(()=>[b(v(ht),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])])]))),128))])):se("",!0),i.value.length>0?(T(),R("div",_Ct,[b(v(J),{variant:"outline",onClick:h},{default:D(()=>[..._[4]||(_[4]=[W(" Clear All ",-1)])]),_:1}),b(v(J),{onClick:m,disabled:!o.value,loading:a.value},{default:D(()=>[W($(t.uploadButtonText),1)]),_:1},8,["disabled","loading"])])):se("",!0)]))}},kCt={class:"inline-child-table w-full"},SCt={class:"flex items-center justify-between mb-4"},CCt={class:"text-lg font-medium text-gray-900"},ACt={class:"flex items-center space-x-2"},TCt={class:"text-sm text-gray-500"},$Ct={class:"overflow-x-auto border border-gray-200 rounded-lg"},MCt={class:"min-w-full divide-y divide-gray-200"},ECt={class:"bg-gray-50"},DCt={class:"flex items-center"},RCt={key:0,class:"text-red-500 ml-1"},PCt={class:"bg-white divide-y divide-gray-200"},ICt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-center align-middle"},OCt={key:1,class:"relative"},LCt={key:0,class:"text-xs text-gray-500 mt-1"},VCt={key:1,class:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"},NCt=["onMousedown"],jCt={class:"font-normal ml-3 block truncate"},FCt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-center align-middle"},BCt={class:"flex items-center justify-center"},zCt={key:0,class:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg mt-4"},UCt={class:"text-sm"},HCt={class:"mt-4 flex items-center justify-between"},qCt={class:"flex items-center space-x-2"},WCt={class:"flex items-center space-x-2"},GCt={key:1,class:"mt-4"},YCt={class:"bg-red-50 border border-red-200 rounded-md p-4"},KCt={class:"flex"},XCt={class:"ml-3"},QCt={class:"mt-2 text-sm text-red-700"},ZCt={class:"list-disc pl-5 space-y-1"},JCt={__name:"InlineChildTable",props:{modelValue:{type:Array,default:()=>[]},title:{type:String,default:"Items"},modalTitle:{type:String,default:"Item"},doctype:{type:String,default:null},columns:{type:Array,default:()=>[]},validate:{type:Function,default:null},required:{type:Boolean,default:!1},minRows:{type:Number,default:0},maxRows:{type:Number,default:null},autoAddRow:{type:Boolean,default:!1},allowBulkAdd:{type:Boolean,default:!1},allowExport:{type:Boolean,default:!1},allowImport:{type:Boolean,default:!1}},emits:["update:modelValue","add-row","remove-row","validate"],setup(t,{emit:e}){const n=t,r=e,s=Q([]),i=Q(null),a=Q([]),o=Z({get:()=>n.modelValue||[],set:N=>{r("update:modelValue",N),A(N)}}),l=Q(null),d=Z(()=>n.columns&&n.columns.length>0?n.columns:l.value&&l.value.fields?m(l.value):[]);function c(N){switch(N){case"text":case"data":case"small_text":case"long_text":return $n;case"int":case"float":case"currency":return $n;case"date":case"datetime":return $n;case"select":return Qe;case"check":return St;case"link":return null;default:return $n}}function f(N){var O,X;const q={},V=N.fieldType.toLowerCase();return["int","float","currency"].includes(V)?(q.type="number",N.min!==void 0&&(q.min=N.min),N.step!==void 0&&(q.step=N.step),(V==="float"||V==="currency")&&(q.step=q.step||"0.01")):V==="date"?q.type="date":V==="datetime"?q.type="datetime-local":V==="data"&&N.options==="Email"?q.type="email":V==="data"&&((O=N.key)!=null&&O.toLowerCase().includes("phone")||(X=N.label)!=null&&X.toLowerCase().includes("phone"))&&(q.type="tel"),V==="select"&&N.options&&(q.options=N.options),q.placeholder=N.placeholder||N.label,q.size="sm",q.class="w-full",q}function p(N){switch(N.toLowerCase()){case"int":case"float":case"currency":return"text-right";case"check":return"text-center";case"date":case"datetime":case"select":case"link":case"text":case"data":case"small_text":case"long_text":case"email":default:return"text-left"}}function h(){return ue(this,null,function*(){if(!(!n.doctype||typeof frappe=="undefined"))try{const N=yield frappe.call({method:"frappe.client.get",args:{doctype:"DocType",name:n.doctype}});N.message&&(l.value=N.message)}catch(N){console.error("Error fetching schema for doctype",n.doctype,N)}})}function m(N){return N.fields.filter(q=>{const V=q.in_list_view||["name","title"].includes(q.fieldname),O=q.read_only&&q.fieldname.endsWith("_name")&&N.fields.some(X=>X.fieldtype.toLowerCase()==="link"&&`${X.fieldname}_name`===q.fieldname);return V&&!O}).map(q=>{const V=q.fieldtype.toLowerCase(),O={key:q.fieldname,label:q.label,fieldType:V,required:!!q.reqd,width:g(q.fieldtype),placeholder:`Enter ${q.label}`,options:q.options};if(V==="select"&&q.options&&(O.options=q.options.split(`
`).map(X=>({value:X.trim(),label:X.trim()}))),V==="link"){O.doctype=q.options;const X=`${q.fieldname}_name`;N.fields.some(U=>U.fieldname===X)&&(O.displayFieldKey=X)}return V==="data"&&q.options==="Email"&&(O.fieldType="email"),O})}function g(N){switch(N.toLowerCase()){case"int":case"float":case"currency":return"120px";case"check":return"80px";case"date":case"datetime":return"130px";case"select":return"160px";case"link":return"180px";case"small_text":case"long_text":return"200px";case"email":return"200px";case"data":case"text":default:return"160px"}}function y(N){switch(N.toLowerCase()){case"int":case"float":case"currency":return 0;case"check":return!1;case"date":case"datetime":return"";case"select":return"";case"link":return"";case"email":case"data":case"text":case"small_text":case"long_text":default:return""}}function x(){if(n.maxRows!=null&&o.value.length>=n.maxRows)return;const N={};d.value.forEach(q=>{q&&q.key&&(N[q.key]=q.default!==void 0?q.default:y(q.fieldType),typeof q.compute=="function"&&(N[q.key]=q.compute(N)))}),o.value=[...o.value,N],r("add-row",N),nr(()=>{if(d.value.length>0){const q=`input-${o.value.length-1}-${d.value[0].key}`,V=k[q];V&&V.focus&&V.focus()}})}function _(N){if(o.value.length<=n.minRows)return;const q=o.value[N];o.value=o.value.filter((V,O)=>O!==N),r("remove-row",q)}const k={};function w(N,q){const V=`input-${N}-${q}`;return k[V]=null,V}function S(N,q){return N.displayFieldKey&&q[N.displayFieldKey]?q[N.displayFieldKey]:q[N.key]||""}function C(N,q,V){N.displayFieldKey?q[N.displayFieldKey]=V:q[N.key]=V}et(o,N=>{N.forEach(q=>{d.value.forEach(V=>{V&&typeof V.compute=="function"&&(q[V.key]=V.compute(q))})}),A(N)},{deep:!0});function A(N){a.value=[],N.forEach((q,V)=>{if(d.value.forEach(O=>{if(!(!O||!O.key)&&(O.required&&(q[O.key]===""||q[O.key]==null)&&a.value.push(`Row ${V+1} - ${O.label}: Required`),typeof O.validator=="function")){const X=O.validator(q[O.key],q,N);X&&a.value.push(`Row ${V+1} - ${O.label}: ${X}`)}}),n.validate){const O=n.validate(q,N,V);O&&Object.entries(O).forEach(([X,j])=>{const U=d.value.find(ee=>ee&&ee.key===X),G=U?U.label:X;a.value.push(`Row ${V+1} - ${G}: ${j}`)})}}),r("validate",a.value.length===0)}function M(N,q,V){return ue(this,null,function*(){const O=V.target.value;if(!(!N.doctype||typeof frappe=="undefined")){if(O.length<2){s.value=[];return}try{const X=yield frappe.call({method:"frappe.client.get_list",args:{doctype:N.doctype,filters:{name:["like",`%${O}%`]},fields:["name","title",...N.fetchMap&&Object.values(N.fetchMap)||[]],limit:10}});s.value=X.message.map(j=>({value:j.name,label:j.title||j.name,data:j}))}catch(X){console.error("Link suggestions error",X),s.value=[]}}})}function E(N,q,V){i.value=`${N.key}-${V}`}function P(){setTimeout(()=>{i.value=null,s.value=[]},200)}function I(N,q,V){if(q[N.key]=V.value,N.displayFieldKey&&(q[N.displayFieldKey]=V.label),N.fetchMap)for(const[O,X]of Object.entries(N.fetchMap))q[O]=V.data[X];s.value=[],i.value=null}function F(){console.log("bulk-add not implemented yet")}function L(){console.log("export not implemented yet")}function z(){console.log("import not implemented yet")}return n.autoAddRow&&o.value.length===0&&x(),et(()=>n.doctype,()=>{n.doctype&&h()},{immediate:!0}),(N,q)=>(T(),R("div",kCt,[u("div",SCt,[u("h3",CCt,$(t.title),1),u("div",ACt,[t.required&&o.value.length===0?(T(),he(v(De),{key:0,theme:"red",variant:"subtle"},{default:D(()=>[...q[0]||(q[0]=[W(" Required ",-1)])]),_:1})):se("",!0),u("span",TCt,$(o.value.length)+" "+$(t.title.toLowerCase()),1)])]),u("div",$Ct,[u("table",MCt,[u("thead",ECt,[u("tr",null,[q[1]||(q[1]=u("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-16"}," # ",-1)),(T(!0),R(xe,null,_e(d.value,V=>(T(),R("th",{key:V.key,class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:rt({minWidth:V.width||"140px",width:V.width||"auto"})},[u("div",DCt,[u("span",null,$(V.label),1),V.required?(T(),R("span",RCt,"*")):se("",!0)])],4))),128)),q[2]||(q[2]=u("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20"}," Actions ",-1))])]),u("tbody",PCt,[(T(!0),R(xe,null,_e(o.value,(V,O)=>(T(),R("tr",{key:V._uid||V.name||O,class:"hover:bg-gray-50"},[u("td",ICt,$(O+1),1),(T(!0),R(xe,null,_e(d.value,X=>(T(),R("td",{key:X.key,class:pe(["px-4 py-3 whitespace-nowrap align-middle",p(X.fieldType)])},[qe(N.$slots,`cell-${X.key}`,{row:V,column:X},()=>[c(X.fieldType)?(T(),he(At(c(X.fieldType)),xt({key:0,modelValue:V[X.key],"onUpdate:modelValue":j=>V[X.key]=j},{ref_for:!0},f(X),{ref_for:!0,ref:w(O,X.key)}),null,16,["modelValue","onUpdate:modelValue"])):se("",!0),X.fieldType==="link"?(T(),R("div",OCt,[b(v($n),{"model-value":S(X,V),placeholder:X.placeholder||`Select ${X.label}`,size:"sm",class:"w-full","onUpdate:modelValue":j=>C(X,V,j),onInput:j=>M(X,V,j),onFocus:j=>E(X,V,O),onBlur:P},null,8,["model-value","placeholder","onUpdate:modelValue","onInput","onFocus"]),X.displayFieldKey&&V[X.displayFieldKey]&&V[X.displayFieldKey]!==V[X.key]?(T(),R("div",LCt,$(V[X.key])+": "+$(V[X.displayFieldKey]),1)):se("",!0),s.value.length>0&&i.value===`${X.key}-${O}`?(T(),R("div",VCt,[(T(!0),R(xe,null,_e(s.value,j=>(T(),R("div",{key:j.value,class:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-gray-100",onMousedown:ut(U=>I(X,V,j),["prevent"])},[u("span",jCt,$(j.label),1)],40,NCt))),128))])):se("",!0)])):se("",!0),!c(X.fieldType)&&X.fieldType!=="link"?(T(),he(v($n),{key:2,modelValue:V[X.key],"onUpdate:modelValue":j=>V[X.key]=j,placeholder:X.placeholder||X.label,size:"sm",class:"w-full",ref_for:!0,ref:w(O,X.key)},null,8,["modelValue","onUpdate:modelValue","placeholder"])):se("",!0)],!0)],2))),128)),u("td",FCt,[u("div",BCt,[b(v(J),{variant:"ghost",size:"sm",theme:"red",onClick:X=>_(O),disabled:o.value.length<=(t.minRows||0)},{default:D(()=>[b(v(ht),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])])])]))),128))])])]),o.value.length===0?(T(),R("div",zCt,[u("div",UCt,"No "+$(t.title.toLowerCase())+" added yet.",1),q[3]||(q[3]=u("div",{class:"text-xs mt-1"},'Click "Add Row" to get started.',-1))])):se("",!0),u("div",HCt,[u("div",qCt,[b(v(J),{variant:"solid",size:"sm",theme:"blue",onClick:x},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),W(" Add "+$(t.modalTitle||"Row"),1)]),_:1}),t.allowBulkAdd?(T(),he(v(J),{key:0,variant:"outline",size:"sm",onClick:F},{default:D(()=>[...q[4]||(q[4]=[W(" Add Multiple ",-1)])]),_:1})):se("",!0)]),u("div",WCt,[t.allowExport?(T(),he(v(J),{key:0,variant:"outline",size:"sm",onClick:L},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),q[5]||(q[5]=W(" Export ",-1))]),_:1})):se("",!0),t.allowImport?(T(),he(v(J),{key:1,variant:"outline",size:"sm",onClick:z},{default:D(()=>[b(v(xa),{class:"h-4 w-4 mr-2"}),q[6]||(q[6]=W(" Import ",-1))]),_:1})):se("",!0)])]),a.value.length>0?(T(),R("div",GCt,[u("div",YCt,[u("div",KCt,[b(v(rn),{class:"h-5 w-5 text-red-400"}),u("div",XCt,[q[7]||(q[7]=u("h3",{class:"text-sm font-medium text-red-800"}," Validation Errors ",-1)),u("div",QCt,[u("ul",ZCt,[(T(!0),R(xe,null,_e(a.value,V=>(T(),R("li",{key:V},$(V),1))),128))])])])])])])):se("",!0)]))}},_0=It(JCt,[["__scopeId","data-v-c7420c56"]]),eAt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-5 mb-6"},tAt={class:"flex flex-wrap items-center justify-between gap-4"},nAt={class:"flex flex-wrap items-center gap-3"},rAt={class:"relative"},sAt={class:"w-44"},iAt={class:"flex items-center gap-2"},aAt={key:0,class:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-100"},oAt={__name:"ActionFilters",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","refresh","export","create"],setup(t,{emit:e}){const n=t,r=e,s=Jt({search:"",status:"",priority:"",dueRange:"",responsiblePerson:""}),i=[{label:"All Status",value:""},{label:"Draft",value:"Draft"},{label:"Approved",value:"Approved"},{label:"In Progress",value:"In Progress"},{label:"On Hold",value:"On Hold"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}],a=[{label:"All Priority",value:""},{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],o=[{label:"All Due Dates",value:""},{label:"Overdue",value:"overdue"},{label:"Due Today",value:"today"},{label:"Due This Week",value:"this_week"},{label:"Due This Month",value:"this_month"},{label:"Due Later",value:"later"}],l=Z(()=>s.search||s.status||s.priority||s.dueRange||s.responsiblePerson),d=p=>{const h=o.find(m=>m.value===p);return h?h.label:p},c=()=>{r("update:modelValue",ge({},s))},f=()=>{s.search="",s.status="",s.priority="",s.dueRange="",s.responsiblePerson="",c()};return et(()=>n.modelValue,p=>{p&&Object.assign(s,p)},{deep:!0,immediate:!0}),(p,h)=>(T(),R("div",eAt,[u("div",tAt,[u("div",nAt,[u("div",rAt,[b(v(En),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),we(u("input",{"onUpdate:modelValue":h[0]||(h[0]=m=>s.search=m),type:"text",placeholder:"Search action plans...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm w-64 focus:ring-2 focus:ring-orange-500 focus:border-orange-500",onInput:c},null,544),[[Rt,s.search]])]),b(v(ve),{type:"select",modelValue:s.status,"onUpdate:modelValue":h[1]||(h[1]=m=>s.status=m),options:i,placeholder:"All Status",class:"w-36",onChange:c},null,8,["modelValue"]),b(v(ve),{type:"select",modelValue:s.priority,"onUpdate:modelValue":h[2]||(h[2]=m=>s.priority=m),options:a,placeholder:"All Priority",class:"w-36",onChange:c},null,8,["modelValue"]),b(v(ve),{type:"select",modelValue:s.dueRange,"onUpdate:modelValue":h[3]||(h[3]=m=>s.dueRange=m),options:o,placeholder:"Due Date",class:"w-40",onChange:c},null,8,["modelValue"]),u("div",sAt,[b(Mt,{modelValue:s.responsiblePerson,"onUpdate:modelValue":h[4]||(h[4]=m=>s.responsiblePerson=m),doctype:"User",placeholder:"Responsible Person",onChange:c},null,8,["modelValue"])]),l.value?(T(),he(v(J),{key:0,variant:"ghost",size:"sm",onClick:f},{default:D(()=>[b(v(ht),{class:"h-4 w-4 mr-1"}),h[12]||(h[12]=W(" Clear ",-1))]),_:1})):se("",!0)]),u("div",iAt,[b(v(J),{variant:"outline",size:"sm",onClick:h[5]||(h[5]=m=>p.$emit("refresh"))},{default:D(()=>[b(v(mn),{class:"h-4 w-4"})]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:h[6]||(h[6]=m=>p.$emit("export"))},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-1"}),h[13]||(h[13]=W(" Export ",-1))]),_:1}),b(v(J),{variant:"solid",theme:"orange",size:"sm",onClick:h[7]||(h[7]=m=>p.$emit("create"))},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-1"}),h[14]||(h[14]=W(" New Action Plan ",-1))]),_:1})])]),l.value?(T(),R("div",aAt,[s.status?(T(),he(v(De),{key:0,variant:"outline",class:"cursor-pointer",onClick:h[8]||(h[8]=m=>{s.status="",c()})},{default:D(()=>[W(" Status: "+$(s.status)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.priority?(T(),he(v(De),{key:1,variant:"outline",class:"cursor-pointer",onClick:h[9]||(h[9]=m=>{s.priority="",c()})},{default:D(()=>[W(" Priority: "+$(s.priority)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.dueRange?(T(),he(v(De),{key:2,variant:"outline",class:"cursor-pointer",onClick:h[10]||(h[10]=m=>{s.dueRange="",c()})},{default:D(()=>[W(" Due: "+$(d(s.dueRange))+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.responsiblePerson?(T(),he(v(De),{key:3,variant:"outline",class:"cursor-pointer",onClick:h[11]||(h[11]=m=>{s.responsiblePerson="",c()})},{default:D(()=>[W(" Responsible: "+$(s.responsiblePerson)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0)])):se("",!0)]))}},lAt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4 mb-6"},uAt={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200 p-5 hover:shadow-lg transition-all duration-200"},dAt={class:"flex items-center justify-between"},cAt={class:"text-3xl font-bold text-orange-900 mt-1"},fAt={class:"p-3 bg-orange-500 rounded-xl shadow-sm"},pAt={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-5 hover:shadow-lg transition-all duration-200"},hAt={class:"flex items-center justify-between"},mAt={class:"text-3xl font-bold text-blue-900 mt-1"},gAt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},vAt={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-5 hover:shadow-lg transition-all duration-200"},yAt={class:"flex items-center justify-between"},bAt={class:"text-3xl font-bold text-green-900 mt-1"},xAt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},_At={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200 p-5 hover:shadow-lg transition-all duration-200"},wAt={class:"flex items-center justify-between"},kAt={class:"text-3xl font-bold text-red-900 mt-1"},SAt={class:"p-3 bg-red-500 rounded-xl shadow-sm"},CAt={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-5 hover:shadow-lg transition-all duration-200"},AAt={class:"flex items-center justify-between"},TAt={class:"w-full"},$At={class:"text-3xl font-bold text-purple-900 mt-1"},MAt={class:"w-full bg-purple-200 rounded-full h-2 mt-2"},EAt={class:"p-3 bg-purple-500 rounded-xl shadow-sm ml-3"},DAt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},RAt={class:"bg-white rounded-xl border border-gray-200 p-5"},PAt={class:"space-y-3"},IAt={class:"w-24 text-sm text-gray-600"},OAt={class:"flex-1 mx-3"},LAt={class:"w-full bg-gray-100 rounded-full h-3"},VAt={class:"w-12 text-sm font-medium text-gray-900 text-right"},NAt={class:"bg-white rounded-xl border border-gray-200 p-5"},jAt={class:"grid grid-cols-2 gap-3"},FAt={class:"text-xs text-gray-500"},BAt={key:1,class:"bg-white rounded-xl border border-gray-200 p-5 mb-6"},zAt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},UAt={class:"text-center p-4 bg-red-50 rounded-lg"},HAt={class:"text-2xl font-bold text-red-600"},qAt={class:"text-center p-4 bg-amber-50 rounded-lg"},WAt={class:"text-2xl font-bold text-amber-600"},GAt={class:"text-center p-4 bg-blue-50 rounded-lg"},YAt={class:"text-2xl font-bold text-blue-600"},KAt={class:"text-center p-4 bg-green-50 rounded-lg"},XAt={class:"text-2xl font-bold text-green-600"},QAt={__name:"ActionStats",props:{stats:{type:Object,default:()=>({total:0,inProgress:0,completed:0,overdue:0,avgProgress:0,dueThisWeek:0,dueThisMonth:0,dueLater:0,byStatus:{},byPriority:{}})},showDetails:{type:Boolean,default:!0}},setup(t){const e=t,n=Z(()=>{const s=e.stats.byStatus||{},i=Object.values(s).reduce((o,l)=>o+l,0)||1,a={Draft:"bg-gray-400",Approved:"bg-blue-500","In Progress":"bg-amber-500","On Hold":"bg-purple-500",Completed:"bg-green-500",Cancelled:"bg-red-500"};return Object.entries(s).map(([o,l])=>({label:o,count:l,percentage:l/i*100,color:a[o]||"bg-gray-400"}))}),r=Z(()=>{const s=e.stats.byPriority||{};return[{label:"Critical",count:s.Critical||0,color:"text-red-600"},{label:"High",count:s.High||0,color:"text-orange-600"},{label:"Medium",count:s.Medium||0,color:"text-amber-600"},{label:"Low",count:s.Low||0,color:"text-green-600"}]});return(s,i)=>(T(),R(xe,null,[u("div",lAt,[u("div",uAt,[u("div",dAt,[u("div",null,[i[0]||(i[0]=u("p",{class:"text-sm font-semibold text-orange-700 uppercase tracking-wide"},"Total Plans",-1)),u("p",cAt,$(t.stats.total||0),1),i[1]||(i[1]=u("p",{class:"text-xs text-orange-600 mt-1"},"All action plans",-1))]),u("div",fAt,[b(v(Ar),{class:"h-7 w-7 text-white"})])])]),u("div",pAt,[u("div",hAt,[u("div",null,[i[2]||(i[2]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"In Progress",-1)),u("p",mAt,$(t.stats.inProgress||0),1),i[3]||(i[3]=u("p",{class:"text-xs text-blue-600 mt-1"},"Currently active",-1))]),u("div",gAt,[b(v(ib),{class:"h-7 w-7 text-white"})])])]),u("div",vAt,[u("div",yAt,[u("div",null,[i[4]||(i[4]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Completed",-1)),u("p",bAt,$(t.stats.completed||0),1),i[5]||(i[5]=u("p",{class:"text-xs text-green-600 mt-1"},"Successfully closed",-1))]),u("div",xAt,[b(v(Kt),{class:"h-7 w-7 text-white"})])])]),u("div",_At,[u("div",wAt,[u("div",null,[i[6]||(i[6]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Overdue",-1)),u("p",kAt,$(t.stats.overdue||0),1),i[7]||(i[7]=u("p",{class:"text-xs text-red-600 mt-1"},"Past due date",-1))]),u("div",SAt,[b(v(qr),{class:"h-7 w-7 text-white"})])])]),u("div",CAt,[u("div",AAt,[u("div",TAt,[i[8]||(i[8]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Avg Progress",-1)),u("p",$At,$(t.stats.avgProgress||0)+"%",1),u("div",MAt,[u("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${Math.min(t.stats.avgProgress||0,100)}%`})},null,4)])]),u("div",EAt,[b(v(XS),{class:"h-7 w-7 text-white"})])])])]),t.showDetails?(T(),R("div",DAt,[u("div",RAt,[i[9]||(i[9]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Status Distribution",-1)),u("div",PAt,[(T(!0),R(xe,null,_e(n.value,a=>(T(),R("div",{key:a.label,class:"flex items-center"},[u("div",IAt,$(a.label),1),u("div",OAt,[u("div",LAt,[u("div",{class:pe(["h-3 rounded-full transition-all duration-300",a.color]),style:rt({width:`${a.percentage}%`})},null,6)])]),u("div",VAt,$(a.count),1)]))),128))])]),u("div",NAt,[i[10]||(i[10]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Priority Distribution",-1)),u("div",jAt,[(T(!0),R(xe,null,_e(r.value,a=>(T(),R("div",{key:a.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[u("p",{class:pe(["text-lg font-bold",a.color])},$(a.count),3),u("p",FAt,$(a.label),1)]))),128))])])])):se("",!0),t.showDetails?(T(),R("div",BAt,[i[15]||(i[15]=u("h3",{class:"text-sm font-semibold text-gray-900 mb-4"},"Due Date Summary",-1)),u("div",zAt,[u("div",UAt,[u("p",HAt,$(t.stats.overdue||0),1),i[11]||(i[11]=u("p",{class:"text-xs text-red-700"},"Overdue",-1))]),u("div",qAt,[u("p",WAt,$(t.stats.dueThisWeek||0),1),i[12]||(i[12]=u("p",{class:"text-xs text-amber-700"},"Due This Week",-1))]),u("div",GAt,[u("p",YAt,$(t.stats.dueThisMonth||0),1),i[13]||(i[13]=u("p",{class:"text-xs text-blue-700"},"Due This Month",-1))]),u("div",KAt,[u("p",XAt,$(t.stats.dueLater||0),1),i[14]||(i[14]=u("p",{class:"text-xs text-green-700"},"Due Later",-1))])])])):se("",!0)],64))}},woe=Yl("correctiveActions",{state:()=>({actions:[],selectedAction:null,loading:!1,saving:!1,error:null,searchQuery:"",filters:{status:"",priority:"",dueRange:"",responsiblePerson:""}}),getters:{filteredActions:t=>{let e=t.actions;if(t.searchQuery){const n=t.searchQuery.toLowerCase();e=e.filter(r=>{var s,i,a;return((s=r.plan_id)==null?void 0:s.toLowerCase().includes(n))||((i=r.title)==null?void 0:i.toLowerCase().includes(n))||((a=r.audit_finding)==null?void 0:a.toLowerCase().includes(n))})}if(t.filters.status&&(e=e.filter(n=>n.status===t.filters.status)),t.filters.priority&&(e=e.filter(n=>n.priority===t.filters.priority)),t.filters.dueRange){const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(r.getTime()+7*24*60*60*1e3),i=new Date(r.getTime()+30*24*60*60*1e3);e=e.filter(a=>{if(!a.target_completion_date)return!1;const o=new Date(a.target_completion_date);switch(t.filters.dueRange){case"overdue":return o<r&&a.status!=="Completed";case"today":return o.toDateString()===r.toDateString();case"this_week":return o>=r&&o<=s;case"this_month":return o>=r&&o<=i;case"later":return o>i;default:return!0}})}if(t.filters.responsiblePerson){const n=t.filters.responsiblePerson.toLowerCase();e=e.filter(r=>{var s;return(s=r.responsible_person)==null?void 0:s.toLowerCase().includes(n)})}return e},stats:t=>{const e=t.actions.length,n=t.actions.filter(d=>d.status==="In Progress").length,r=t.actions.filter(d=>d.status==="Completed").length,s=new Date,i=t.actions.filter(d=>!d.target_completion_date||d.status==="Completed"?!1:new Date(d.target_completion_date)<s).length,a=e>0?Math.round(t.actions.reduce((d,c)=>d+(c.completion_percentage||0),0)/e):0,o={Draft:t.actions.filter(d=>d.status==="Draft").length,Approved:t.actions.filter(d=>d.status==="Approved").length,"In Progress":n,"On Hold":t.actions.filter(d=>d.status==="On Hold").length,Completed:r,Cancelled:t.actions.filter(d=>d.status==="Cancelled").length},l={Critical:t.actions.filter(d=>d.priority==="Critical").length,High:t.actions.filter(d=>d.priority==="High").length,Medium:t.actions.filter(d=>d.priority==="Medium").length,Low:t.actions.filter(d=>d.priority==="Low").length};return{total:e,inProgress:n,completed:r,overdue:i,avgProgress:a,statusDistribution:o,priorityDistribution:l}}},actions:{fetchActions(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Corrective Action Plan",fields:["name","plan_id","audit_finding","title","status","priority","start_date","target_completion_date","actual_completion_date","responsible_person","responsible_department","overall_progress","completion_percentage","creation","modified"],limit_page_length:0,order_by:"modified desc"}}).fetch();this.actions=t||[]}catch(t){console.error("Error fetching corrective actions:",t),this.error=t.message||"Failed to fetch corrective actions",this.actions=[]}finally{this.loading=!1}})},getActionDetails(t){return ue(this,null,function*(){try{this.loading=!0;const e=yield Ve({url:"frappe.client.get",params:{doctype:"Corrective Action Plan",name:t}}).fetch();return this.selectedAction=e,e}catch(e){throw console.error("Error fetching action details:",e),e}finally{this.loading=!1}})},createAction(t){return ue(this,null,function*(){try{this.saving=!0;const e=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Corrective Action Plan"},t)}}).fetch();return yield this.fetchActions(),e}catch(e){throw console.error("Error creating action:",e),e}finally{this.saving=!1}})},updateAction(t,e){return ue(this,null,function*(){try{this.saving=!0;const n=yield Ve({url:"frappe.client.set_value",params:{doctype:"Corrective Action Plan",name:t,fieldname:e}}).fetch();return yield this.fetchActions(),n}catch(n){throw console.error("Error updating action:",n),n}finally{this.saving=!1}})},saveAction(t){return ue(this,null,function*(){return t.name?this.updateAction(t.name,t):this.createAction(t)})},deleteAction(t){return ue(this,null,function*(){try{this.saving=!0,yield Ve({url:"frappe.client.delete",params:{doctype:"Corrective Action Plan",name:t}}).fetch(),yield this.fetchActions()}catch(e){throw console.error("Error deleting action:",e),e}finally{this.saving=!1}})},setFilters(t){this.filters=ge(ge({},this.filters),t)},clearFilters(){this.searchQuery="",this.filters={status:"",priority:"",dueRange:"",responsiblePerson:""}}}}),ZAt={class:"h-[80vh] flex"},JAt={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},e4t={class:"p-4"},t4t={class:"space-y-2"},n4t=["onClick"],r4t={key:1},s4t={class:"flex-1 min-w-0"},i4t={class:"text-sm font-medium text-gray-900 truncate"},a4t={class:"text-xs text-gray-500 truncate"},o4t={class:"mt-4 p-3 bg-white rounded-lg border border-gray-200"},l4t={class:"flex items-center justify-between mb-2"},u4t={class:"text-xs font-semibold text-orange-600"},d4t={class:"w-full bg-gray-200 rounded-full h-1.5"},c4t={key:0,class:"mt-3 text-xs text-gray-500 text-center"},f4t={class:"flex-1 overflow-y-auto"},p4t={class:"p-6 space-y-8"},h4t={class:"space-y-6"},m4t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},g4t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},v4t={class:"flex gap-2"},y4t={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6"},b4t={class:"space-y-6"},x4t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},_4t={class:"space-y-6"},w4t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},k4t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},S4t={class:"space-y-6"},C4t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},A4t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T4t={class:"space-y-6"},$4t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},M4t={class:"flex items-center justify-between mb-4"},E4t={class:"text-xs text-gray-500"},D4t={key:0,class:"space-y-4"},R4t={class:"flex items-start justify-between mb-4"},P4t={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},I4t={class:"md:col-span-2"},O4t={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},L4t={key:1,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},V4t={class:"space-y-6"},N4t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},j4t={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},F4t={class:"mt-6"},B4t={class:"space-y-6"},z4t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},U4t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},H4t={class:"flex items-center space-x-3"},q4t={class:"space-y-6"},W4t={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},G4t={class:"text-sm font-semibold text-gray-900 mb-4 flex items-center"},Y4t={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},K4t={class:"flex items-center space-x-3"},X4t={key:0},Q4t={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4"},Z4t={key:1,class:"mt-4"},J4t={class:"border-t border-gray-200 pt-6"},eTt={class:"text-sm font-semibold text-gray-900 mb-4 flex items-center"},tTt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},nTt={class:"flex items-center space-x-3"},rTt={key:0},sTt={class:"border-t border-gray-200 pt-6"},iTt={class:"text-sm font-semibold text-gray-900 mb-4 flex items-center"},aTt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oTt={class:"mt-4"},lTt={class:"mt-4"},uTt={class:"flex items-center justify-between w-full"},dTt={class:"flex items-center gap-2"},cTt={class:"flex items-center gap-2"},fTt={__name:"CorrectiveActionForm",props:{show:{type:Boolean,default:!1},action:{type:Object,default:null},mode:{type:String,default:"create"}},emits:["update:show","saved","close"],setup(t,{emit:e}){const n=t,r=e,s=woe(),i=Q(0),a=Q(!1),o=Q(!1),l=Q(null),d=Z({get:()=>n.show,set:q=>r("update:show",q)}),c=Q(f());function f(){return{plan_id:"",audit_finding:"",title:"",status:"Draft",priority:"Medium",start_date:"",target_completion_date:"",actual_completion_date:"",action_description:"",root_cause_analysis:"",expected_outcomes:"",success_criteria:"",responsible_person:"",responsible_department:"",accountable_person:"",supporting_team:"",estimated_cost:0,actual_cost:0,resources_required:"",allocated_resources:"",milestones:[],overall_progress:"Not Started",completion_percentage:0,last_progress_update:"",progress_notes:"",identified_issues:"",mitigation_actions:"",escalation_required:!1,escalation_details:"",verification_required:!0,verification_method:"",verification_date:"",verified_by:"",verification_results:"",approval_required:!1,approved_by:"",approval_date:"",approval_notes:"",closure_reason:"",closure_notes:"",lessons_learned:""}}const p=[{id:"basic",title:"Basic Information",description:"Plan ID and status"},{id:"details",title:"Plan Details",description:"Description and analysis"},{id:"responsibility",title:"Responsibility",description:"Assign ownership"},{id:"resources",title:"Resources",description:"Budget allocation"},{id:"milestones",title:"Milestones",description:"Track progress"},{id:"progress",title:"Progress Tracking",description:"Overall progress"},{id:"issues",title:"Issues & Risks",description:"Document issues"},{id:"closure",title:"Verification & Closure",description:"Complete the plan"}],h=[{label:"Draft",value:"Draft"},{label:"Approved",value:"Approved"},{label:"In Progress",value:"In Progress"},{label:"On Hold",value:"On Hold"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}],m=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],g=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Delayed",value:"Delayed"}],y=[{label:"Not Started",value:"Not Started"},{label:"Planning",value:"Planning"},{label:"In Progress",value:"In Progress"},{label:"Review",value:"Review"},{label:"Testing",value:"Testing"},{label:"Completed",value:"Completed"}],x=[{label:"Document Review",value:"Document Review"},{label:"Re-testing",value:"Re-testing"},{label:"Observation",value:"Observation"},{label:"Interview",value:"Interview"},{label:"Data Analysis",value:"Data Analysis"},{label:"Audit Testing",value:"Audit Testing"}],_=[{label:"Successfully Completed",value:"Successfully Completed"},{label:"No Longer Applicable",value:"No Longer Applicable"},{label:"Alternative Solution",value:"Alternative Solution"},{label:"Cancelled by Management",value:"Cancelled by Management"}];et(()=>n.action,q=>{q?c.value=ze(ge(ge({},f()),q),{milestones:q.milestones||[]}):c.value=f(),i.value=0},{immediate:!0}),et(()=>n.show,q=>{q||(i.value=0,l.value=null)});const k=Z(()=>{var V;let q=0;return c.value.plan_id&&c.value.title&&c.value.audit_finding&&(q+=15),c.value.action_description&&(q+=15),c.value.responsible_person&&c.value.responsible_department&&(q+=15),q+=10,((V=c.value.milestones)==null?void 0:V.length)>0&&(q+=15),q+=10,q+=10,q+=10,q}),w=Z(()=>c.value.plan_id&&c.value.audit_finding&&c.value.title&&c.value.status&&c.value.priority&&c.value.target_completion_date&&c.value.action_description&&c.value.responsible_person&&c.value.responsible_department),S=q=>{var V;switch(q){case"basic":return c.value.plan_id&&c.value.title&&c.value.audit_finding&&c.value.target_completion_date;case"details":return!!c.value.action_description;case"responsibility":return c.value.responsible_person&&c.value.responsible_department;case"resources":return!0;case"milestones":return((V=c.value.milestones)==null?void 0:V.length)>0;case"progress":return!0;case"issues":return!0;case"closure":return!0;default:return!1}},C=q=>S(q)?"bg-green-500 text-white":"bg-gray-300 text-gray-600",A=q=>{i.value=q},M=()=>{i.value>0&&i.value--},E=()=>{i.value<p.length-1&&i.value++},P=()=>{const q=new Date().getFullYear(),V=Math.floor(Math.random()*1e3).toString().padStart(3,"0");c.value.plan_id=`CAP-${q}-${V}`},I=()=>{c.value.milestones.push({milestone_description:"",due_date:"",status:"Not Started",completion_date:"",notes:""})},F=q=>{c.value.milestones.splice(q,1)},L=q=>({"Not Started":"subtle","In Progress":"subtle",Completed:"subtle",Delayed:"subtle"})[q]||"subtle",z=()=>ue(this,null,function*(){var q;a.value=!0;try{n.mode==="edit"&&((q=n.action)!=null&&q.name)?yield s.updateAction(n.action.name,c.value):yield s.createAction(c.value),l.value=new Date().toLocaleTimeString()}catch(V){console.error("Error saving draft:",V)}finally{a.value=!1}}),N=()=>ue(this,null,function*(){var q;o.value=!0;try{n.mode==="edit"&&((q=n.action)!=null&&q.name)?yield s.updateAction(n.action.name,c.value):yield s.createAction(c.value),r("saved"),r("update:show",!1)}catch(V){console.error("Error submitting form:",V)}finally{o.value=!1}});return(q,V)=>(T(),he(v(jt),{modelValue:d.value,"onUpdate:modelValue":V[40]||(V[40]=O=>d.value=O),options:{title:t.mode==="edit"?"Edit Corrective Action Plan":"Create Corrective Action Plan",size:"full"}},{body:D(()=>{var O,X;return[u("div",ZAt,[u("div",JAt,[u("div",e4t,[V[42]||(V[42]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Progress",-1)),u("div",t4t,[(T(),R(xe,null,_e(p,(j,U)=>u("div",{key:j.id,class:pe(["flex items-center space-x-2 p-2 rounded-lg cursor-pointer transition-all",i.value===U?"bg-orange-100 border border-orange-300":"hover:bg-gray-100"]),onClick:G=>A(U)},[u("div",{class:pe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold",C(j.id)])},[S(j.id)?(T(),he(v(Fr),{key:0,class:"h-3 w-3"})):(T(),R("span",r4t,$(U+1),1))],2),u("div",s4t,[u("div",i4t,$(j.title),1),u("div",a4t,$(j.description),1)])],10,n4t)),64))]),u("div",o4t,[u("div",l4t,[V[41]||(V[41]=u("span",{class:"text-xs font-medium text-gray-700"},"Overall Progress",-1)),u("span",u4t,$(k.value)+"%",1)]),u("div",d4t,[u("div",{class:"bg-orange-600 h-1.5 rounded-full transition-all duration-500",style:rt({width:`${k.value}%`})},null,4)])]),l.value?(T(),R("div",c4t," Last saved: "+$(l.value),1)):se("",!0)])]),u("div",f4t,[u("div",p4t,[we(u("div",h4t,[b(Vt,{title:"Basic Information",description:"Action plan identification and status",sectionNumber:1,color:"orange"}),u("div",m4t,[u("div",g4t,[u("div",null,[V[43]||(V[43]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Plan ID "),u("span",{class:"text-red-500"},"*")],-1)),u("div",v4t,[b(v(ve),{modelValue:c.value.plan_id,"onUpdate:modelValue":V[0]||(V[0]=j=>c.value.plan_id=j),placeholder:"e.g., CAP-2025-001",class:"flex-1"},null,8,["modelValue"]),b(v(J),{variant:"outline",size:"sm",onClick:P},{default:D(()=>[b(v(mn),{class:"h-4 w-4"})]),_:1})])]),u("div",null,[V[44]||(V[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Finding "),u("span",{class:"text-red-500"},"*")],-1)),b(Mt,{modelValue:c.value.audit_finding,"onUpdate:modelValue":V[1]||(V[1]=j=>c.value.audit_finding=j),doctype:"Audit Finding",placeholder:"Link to finding"},null,8,["modelValue"])]),b(v(ve),{modelValue:c.value.title,"onUpdate:modelValue":V[2]||(V[2]=j=>c.value.title=j),label:"Title",placeholder:"Action plan title",required:!0},null,8,["modelValue"]),u("div",null,[V[45]||(V[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Status "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:c.value.status,"onUpdate:modelValue":V[3]||(V[3]=j=>c.value.status=j),options:h},null,8,["modelValue"])]),u("div",null,[V[46]||(V[46]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Priority "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:c.value.priority,"onUpdate:modelValue":V[4]||(V[4]=j=>c.value.priority=j),options:m},null,8,["modelValue"])])]),u("div",y4t,[b(v(ve),{modelValue:c.value.start_date,"onUpdate:modelValue":V[5]||(V[5]=j=>c.value.start_date=j),type:"date",label:"Start Date"},null,8,["modelValue"]),b(v(ve),{modelValue:c.value.target_completion_date,"onUpdate:modelValue":V[6]||(V[6]=j=>c.value.target_completion_date=j),type:"date",label:"Target Completion Date",required:!0},null,8,["modelValue"]),b(v(ve),{modelValue:c.value.actual_completion_date,"onUpdate:modelValue":V[7]||(V[7]=j=>c.value.actual_completion_date=j),type:"date",label:"Actual Completion Date"},null,8,["modelValue"])])])],512),[[lt,i.value===0]]),we(u("div",b4t,[b(Vt,{title:"Plan Details",description:"Action description, root cause, and expected outcomes",sectionNumber:2,color:"blue"}),u("div",x4t,[u("div",null,[V[47]||(V[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Action Description "),u("span",{class:"text-red-500"},"*")],-1)),b(v(an),{content:c.value.action_description,onChange:V[8]||(V[8]=j=>c.value.action_description=j),placeholder:"Describe the corrective action to be taken...",editable:!0,editorClass:"min-h-[150px] prose-sm"},null,8,["content"])]),u("div",null,[V[48]||(V[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Root Cause Analysis",-1)),b(v(an),{content:c.value.root_cause_analysis,onChange:V[9]||(V[9]=j=>c.value.root_cause_analysis=j),placeholder:"Analyze the root cause of the finding...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",null,[V[49]||(V[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Expected Outcomes",-1)),b(v(an),{content:c.value.expected_outcomes,onChange:V[10]||(V[10]=j=>c.value.expected_outcomes=j),placeholder:"What outcomes are expected from this action...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",null,[V[50]||(V[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Success Criteria",-1)),b(v(an),{content:c.value.success_criteria,onChange:V[11]||(V[11]=j=>c.value.success_criteria=j),placeholder:"Define measurable criteria for success...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])])])],512),[[lt,i.value===1]]),we(u("div",_4t,[b(Vt,{title:"Responsibility",description:"Assign accountability and supporting team",sectionNumber:3,color:"green"}),u("div",w4t,[u("div",k4t,[u("div",null,[V[51]||(V[51]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Responsible Person "),u("span",{class:"text-red-500"},"*")],-1)),b(Mt,{modelValue:c.value.responsible_person,"onUpdate:modelValue":V[12]||(V[12]=j=>c.value.responsible_person=j),doctype:"User",placeholder:"Select responsible person"},null,8,["modelValue"])]),u("div",null,[V[52]||(V[52]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Responsible Department "),u("span",{class:"text-red-500"},"*")],-1)),b(Mt,{modelValue:c.value.responsible_department,"onUpdate:modelValue":V[13]||(V[13]=j=>c.value.responsible_department=j),doctype:"Department",placeholder:"Select department"},null,8,["modelValue"])]),u("div",null,[V[53]||(V[53]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Accountable Person",-1)),b(Mt,{modelValue:c.value.accountable_person,"onUpdate:modelValue":V[14]||(V[14]=j=>c.value.accountable_person=j),doctype:"User",placeholder:"Select accountable person"},null,8,["modelValue"])]),b(v(ve),{modelValue:c.value.supporting_team,"onUpdate:modelValue":V[15]||(V[15]=j=>c.value.supporting_team=j),type:"textarea",label:"Supporting Team",placeholder:"List team members supporting this action...",rows:"3"},null,8,["modelValue"])])])],512),[[lt,i.value===2]]),we(u("div",S4t,[b(Vt,{title:"Resources",description:"Budget and resource allocation",sectionNumber:4,color:"amber"}),u("div",C4t,[u("div",A4t,[b(v(ve),{modelValue:c.value.estimated_cost,"onUpdate:modelValue":V[16]||(V[16]=j=>c.value.estimated_cost=j),type:"number",label:"Estimated Cost",placeholder:"0.00"},null,8,["modelValue"]),b(v(ve),{modelValue:c.value.actual_cost,"onUpdate:modelValue":V[17]||(V[17]=j=>c.value.actual_cost=j),type:"number",label:"Actual Cost",placeholder:"0.00"},null,8,["modelValue"]),b(v(ve),{modelValue:c.value.resources_required,"onUpdate:modelValue":V[18]||(V[18]=j=>c.value.resources_required=j),type:"textarea",label:"Resources Required",placeholder:"List the resources needed...",rows:"3"},null,8,["modelValue"]),b(v(ve),{modelValue:c.value.allocated_resources,"onUpdate:modelValue":V[19]||(V[19]=j=>c.value.allocated_resources=j),type:"textarea",label:"Allocated Resources",placeholder:"List the resources allocated...",rows:"3"},null,8,["modelValue"])])])],512),[[lt,i.value===3]]),we(u("div",T4t,[b(Vt,{title:"Milestones",description:"Track progress with key milestones",sectionNumber:5,color:"purple"}),u("div",$4t,[u("div",M4t,[u("div",null,[V[54]||(V[54]=u("h4",{class:"text-sm font-medium text-gray-900"},"Milestones",-1)),u("p",E4t,$(((O=c.value.milestones)==null?void 0:O.length)||0)+" milestones defined",1)]),b(v(J),{variant:"outline",size:"sm",onClick:I},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[V[55]||(V[55]=W(" Add Milestone ",-1))]),_:1})]),((X=c.value.milestones)==null?void 0:X.length)>0?(T(),R("div",D4t,[(T(!0),R(xe,null,_e(c.value.milestones,(j,U)=>(T(),R("div",{key:U,class:"border border-gray-200 rounded-lg p-4 hover:border-orange-300 transition-colors"},[u("div",R4t,[b(v(De),{variant:L(j.status),size:"sm"},{default:D(()=>[W($(j.status||"Not Started"),1)]),_:2},1032,["variant"]),b(v(J),{variant:"ghost",size:"sm",onClick:G=>F(U),class:"text-red-500"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",P4t,[u("div",I4t,[b(v(ve),{modelValue:j.milestone_description,"onUpdate:modelValue":G=>j.milestone_description=G,label:"Description",placeholder:"Milestone description...",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),b(v(ve),{modelValue:j.due_date,"onUpdate:modelValue":G=>j.due_date=G,type:"date",label:"Due Date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),u("div",null,[V[56]||(V[56]=u("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Status",-1)),b(v(ve),{type:"select",modelValue:j.status,"onUpdate:modelValue":G=>j.status=G,options:g,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]),u("div",O4t,[b(v(ve),{modelValue:j.completion_date,"onUpdate:modelValue":G=>j.completion_date=G,type:"date",label:"Completion Date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),b(v(ve),{modelValue:j.notes,"onUpdate:modelValue":G=>j.notes=G,label:"Notes",placeholder:"Additional notes...",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):(T(),R("div",L4t,[b(v(yfe),{class:"mx-auto h-12 w-12 text-gray-400"}),V[58]||(V[58]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No milestones defined",-1)),V[59]||(V[59]=u("p",{class:"mt-1 text-sm text-gray-500"},"Add milestones to track progress.",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-4",onClick:I},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[V[57]||(V[57]=W(" Add First Milestone ",-1))]),_:1})]))])],512),[[lt,i.value===4]]),we(u("div",V4t,[b(Vt,{title:"Progress Tracking",description:"Track overall progress and updates",sectionNumber:6,color:"cyan"}),u("div",N4t,[u("div",j4t,[u("div",null,[V[60]||(V[60]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Overall Progress",-1)),b(v(ve),{type:"select",modelValue:c.value.overall_progress,"onUpdate:modelValue":V[20]||(V[20]=j=>c.value.overall_progress=j),options:y},null,8,["modelValue"])]),b(v(ve),{modelValue:c.value.completion_percentage,"onUpdate:modelValue":V[21]||(V[21]=j=>c.value.completion_percentage=j),type:"number",label:"Completion %",placeholder:"0",min:"0",max:"100"},null,8,["modelValue"]),b(v(ve),{modelValue:c.value.last_progress_update,"onUpdate:modelValue":V[22]||(V[22]=j=>c.value.last_progress_update=j),type:"date",label:"Last Progress Update"},null,8,["modelValue"])]),u("div",F4t,[V[61]||(V[61]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Progress Notes",-1)),b(v(an),{content:c.value.progress_notes,onChange:V[23]||(V[23]=j=>c.value.progress_notes=j),placeholder:"Document progress updates...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])])])],512),[[lt,i.value===5]]),we(u("div",B4t,[b(Vt,{title:"Issues & Risks",description:"Document issues and mitigation actions",sectionNumber:7,color:"red"}),u("div",z4t,[u("div",null,[V[62]||(V[62]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Identified Issues",-1)),b(v(an),{content:c.value.identified_issues,onChange:V[24]||(V[24]=j=>c.value.identified_issues=j),placeholder:"Document any identified issues...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",null,[V[63]||(V[63]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mitigation Actions",-1)),b(v(an),{content:c.value.mitigation_actions,onChange:V[25]||(V[25]=j=>c.value.mitigation_actions=j),placeholder:"Describe mitigation actions taken...",editable:!0,editorClass:"min-h-[120px] prose-sm"},null,8,["content"])]),u("div",U4t,[u("div",H4t,[we(u("input",{type:"checkbox","onUpdate:modelValue":V[26]||(V[26]=j=>c.value.escalation_required=j),class:"h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"},null,512),[[Rn,c.value.escalation_required]]),V[64]||(V[64]=u("label",{class:"text-sm text-gray-700"},"Escalation Required",-1))]),c.value.escalation_required?(T(),he(v(ve),{key:0,modelValue:c.value.escalation_details,"onUpdate:modelValue":V[27]||(V[27]=j=>c.value.escalation_details=j),type:"textarea",label:"Escalation Details",placeholder:"Describe escalation details...",rows:"2"},null,8,["modelValue"])):se("",!0)])])],512),[[lt,i.value===6]]),we(u("div",q4t,[b(Vt,{title:"Verification & Closure",description:"Verification, approval, and closure details",sectionNumber:8,color:"orange"}),u("div",W4t,[u("div",null,[u("h4",G4t,[b(v(Ds),{class:"h-4 w-4 mr-2 text-green-600"}),V[65]||(V[65]=W(" Verification ",-1))]),u("div",Y4t,[u("div",K4t,[we(u("input",{type:"checkbox","onUpdate:modelValue":V[28]||(V[28]=j=>c.value.verification_required=j),class:"h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"},null,512),[[Rn,c.value.verification_required]]),V[66]||(V[66]=u("label",{class:"text-sm text-gray-700"},"Verification Required",-1))]),c.value.verification_required?(T(),R("div",X4t,[V[67]||(V[67]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Verification Method",-1)),b(v(ve),{type:"select",modelValue:c.value.verification_method,"onUpdate:modelValue":V[29]||(V[29]=j=>c.value.verification_method=j),options:x},null,8,["modelValue"])])):se("",!0),c.value.verification_required?(T(),he(v(ve),{key:1,modelValue:c.value.verification_date,"onUpdate:modelValue":V[30]||(V[30]=j=>c.value.verification_date=j),type:"date",label:"Verification Date"},null,8,["modelValue"])):se("",!0)]),c.value.verification_required?(T(),R("div",Q4t,[u("div",null,[V[68]||(V[68]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Verified By",-1)),b(Mt,{modelValue:c.value.verified_by,"onUpdate:modelValue":V[31]||(V[31]=j=>c.value.verified_by=j),doctype:"User",placeholder:"Select verifier"},null,8,["modelValue"])])])):se("",!0),c.value.verification_required?(T(),R("div",Z4t,[V[69]||(V[69]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Verification Results",-1)),b(v(an),{content:c.value.verification_results,onChange:V[32]||(V[32]=j=>c.value.verification_results=j),placeholder:"Document verification results...",editable:!0,editorClass:"min-h-[100px] prose-sm"},null,8,["content"])])):se("",!0)]),u("div",J4t,[u("h4",eTt,[b(v(ro),{class:"h-4 w-4 mr-2 text-blue-600"}),V[70]||(V[70]=W(" Approval ",-1))]),u("div",tTt,[u("div",nTt,[we(u("input",{type:"checkbox","onUpdate:modelValue":V[33]||(V[33]=j=>c.value.approval_required=j),class:"h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"},null,512),[[Rn,c.value.approval_required]]),V[71]||(V[71]=u("label",{class:"text-sm text-gray-700"},"Approval Required",-1))]),c.value.approval_required?(T(),R("div",rTt,[V[72]||(V[72]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved By",-1)),b(Mt,{modelValue:c.value.approved_by,"onUpdate:modelValue":V[34]||(V[34]=j=>c.value.approved_by=j),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])])):se("",!0),c.value.approval_required?(T(),he(v(ve),{key:1,modelValue:c.value.approval_date,"onUpdate:modelValue":V[35]||(V[35]=j=>c.value.approval_date=j),type:"date",label:"Approval Date"},null,8,["modelValue"])):se("",!0)]),c.value.approval_required?(T(),he(v(ve),{key:0,modelValue:c.value.approval_notes,"onUpdate:modelValue":V[36]||(V[36]=j=>c.value.approval_notes=j),type:"textarea",label:"Approval Notes",placeholder:"Add approval notes...",rows:"2",class:"mt-4"},null,8,["modelValue"])):se("",!0)]),u("div",sTt,[u("h4",iTt,[b(v(YD),{class:"h-4 w-4 mr-2 text-gray-600"}),V[73]||(V[73]=W(" Closure ",-1))]),u("div",aTt,[u("div",null,[V[74]||(V[74]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Closure Reason",-1)),b(v(ve),{type:"select",modelValue:c.value.closure_reason,"onUpdate:modelValue":V[37]||(V[37]=j=>c.value.closure_reason=j),options:_},null,8,["modelValue"])])]),u("div",oTt,[V[75]||(V[75]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Closure Notes",-1)),b(v(an),{content:c.value.closure_notes,onChange:V[38]||(V[38]=j=>c.value.closure_notes=j),placeholder:"Document closure details...",editable:!0,editorClass:"min-h-[100px] prose-sm"},null,8,["content"])]),u("div",lTt,[V[76]||(V[76]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lessons Learned",-1)),b(v(an),{content:c.value.lessons_learned,onChange:V[39]||(V[39]=j=>c.value.lessons_learned=j),placeholder:"Document lessons learned...",editable:!0,editorClass:"min-h-[100px] prose-sm"},null,8,["content"])])])])],512),[[lt,i.value===7]])])])])]}),actions:D(()=>[u("div",uTt,[u("div",dTt,[i.value>0?(T(),he(v(J),{key:0,variant:"outline",onClick:M},{prefix:D(()=>[b(v(gr),{class:"h-4 w-4"})]),default:D(()=>[V[77]||(V[77]=W(" Previous ",-1))]),_:1})):se("",!0)]),u("div",cTt,[b(v(J),{variant:"outline",onClick:z,loading:a.value},{prefix:D(()=>[b(v($r),{class:"h-4 w-4"})]),default:D(()=>[V[78]||(V[78]=W(" Save Draft ",-1))]),_:1},8,["loading"]),i.value<p.length-1?(T(),he(v(J),{key:0,variant:"solid",theme:"orange",onClick:E},{suffix:D(()=>[b(v(sr),{class:"h-4 w-4"})]),default:D(()=>[V[79]||(V[79]=W(" Next ",-1))]),_:1})):(T(),he(v(J),{key:1,variant:"solid",theme:"orange",onClick:N,loading:o.value,disabled:!w.value},{prefix:D(()=>[b(v(Fr),{class:"h-4 w-4"})]),default:D(()=>[W(" "+$(t.mode==="edit"?"Update Plan":"Create Plan"),1)]),_:1},8,["loading","disabled"]))])])]),_:1},8,["modelValue","options"]))}},pTt={class:"space-y-6"},hTt={class:"flex items-center justify-between"},mTt={class:"flex items-center space-x-3"},gTt={class:"bg-white rounded-lg border border-gray-200"},vTt={class:"p-6"},yTt={class:"flex items-center space-x-2"},bTt={class:"w-20 bg-gray-200 rounded-full h-2"},xTt={class:"text-sm text-gray-600"},_Tt={class:"flex items-center space-x-2"},wTt={__name:"CorrectiveActions",setup(t){const e=_n(),n=woe(),r=Q(!1),s=Q(null),i=Q("create");Z(()=>n.actions);const a=Z(()=>n.filteredActions),o=Z(()=>n.stats),l=Z(()=>n.loading),d=Z(()=>n.saving),c=Z({get:()=>ge({search:n.searchQuery},n.filters),set:C=>{n.searchQuery=C.search||"",n.setFilters(C)}});Z(()=>o.value.total),Z(()=>o.value.inProgress),Z(()=>o.value.completed),Z(()=>o.value.overdue);const f=[{key:"plan_id",label:"Action ID",sortable:!0,width:"120px"},{key:"title",label:"Action Title",sortable:!0},{key:"priority",label:"Priority",sortable:!0,width:"100px"},{key:"status",label:"Status",sortable:!0,width:"120px"},{key:"overall_progress",label:"Progress",sortable:!0,width:"150px"},{key:"audit_finding",label:"Related Finding",sortable:!0,width:"150px"},{key:"responsible_person",label:"Responsible Person",sortable:!0,width:"150px"},{key:"responsible_department",label:"Department",sortable:!0,width:"120px"},{key:"target_completion_date",label:"Due Date",sortable:!0,width:"100px"},{key:"creation",label:"Created",sortable:!0,width:"100px"},{key:"actions",label:"Actions",width:"120px"}],p=()=>ue(this,null,function*(){yield n.fetchActions()}),h=C=>({Critical:"danger",High:"danger",Medium:"warning",Low:"success"})[C]||"secondary",m=C=>({Draft:"secondary",Approved:"info","In Progress":"warning","On Hold":"secondary",Completed:"success",Cancelled:"secondary"})[C]||"secondary",g=C=>{e.push(`/corrective-actions/${C.name}`)},y=C=>{e.push(`/corrective-actions/${C.name}`)},x=C=>{s.value=C,i.value="edit",r.value=!0},_=C=>ue(this,null,function*(){if(confirm("Are you sure you want to delete this corrective action?"))try{yield n.deleteAction(C.name)}catch(A){console.error("Error deleting action:",A)}}),k=()=>{console.log("Exporting actions...")},w=()=>{r.value=!1,s.value=null,i.value="create"},S=()=>{r.value=!1,s.value=null,i.value="create"};return yt(()=>ue(this,null,function*(){yield p()})),(C,A)=>(T(),R("div",pTt,[u("div",hTt,[A[6]||(A[6]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Corrective Actions"),u("p",{class:"text-gray-600 mt-1"}," Track and manage corrective action plans and remediation activities ")],-1)),u("div",mTt,[b(v(J),{variant:"outline"},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),A[4]||(A[4]=W(" Export ",-1))]),_:1}),b(v(J),{onClick:A[0]||(A[0]=M=>r.value=!0),loading:d.value},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),A[5]||(A[5]=W(" New Corrective Action ",-1))]),_:1},8,["loading"])])]),b(QAt,{stats:o.value,loading:l.value,"show-details":!0},null,8,["stats","loading"]),b(oAt,{modelValue:c.value,"onUpdate:modelValue":A[1]||(A[1]=M=>c.value=M),onRefresh:p,onExport:k,onCreate:A[2]||(A[2]=M=>r.value=!0)},null,8,["modelValue"]),u("div",gTt,[u("div",vTt,[b(v(sO),{columns:f,data:a.value,loading:l.value,pagination:!0,sortable:!0,onRowClick:g},{"column-priority":D(({row:M})=>[b(v(De),{variant:h(M.priority)},{default:D(()=>[W($(M.priority||"Medium"),1)]),_:2},1032,["variant"])]),"column-status":D(({row:M})=>[b(v(De),{variant:m(M.status)},{default:D(()=>[W($(M.status||"Draft"),1)]),_:2},1032,["variant"])]),"column-overall_progress":D(({row:M})=>[u("div",yTt,[u("div",bTt,[u("div",{class:"bg-blue-600 h-2 rounded-full",style:rt({width:`${M.completion_percentage||0}%`})},null,4)]),u("span",xTt,$(M.completion_percentage||0)+"%",1)])]),"column-actions":D(({row:M})=>[u("div",_Tt,[b(v(J),{variant:"ghost",size:"sm",onClick:E=>y(M)},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:E=>x(M)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",color:"red",onClick:E=>_(M)},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:1},8,["data","loading"])])]),b(fTt,{show:r.value,"onUpdate:show":A[3]||(A[3]=M=>r.value=M),action:s.value,mode:i.value,onSaved:w,onClose:S},null,8,["show","action","mode"])]))}},TA=Yl("data",()=>{const t=Q([]),e=Q(null),n=Q(new Map),r=Q([]),s=Q([]),i=Q([]),a=Q([]),o=Q([]),l=Q([]),d=Q([]),c=Q({}),f=Z(()=>r.value.filter(ne=>ne.is_active)),p=Z(()=>r.value.filter(ne=>ne.dashboard_type==="Public")),h=Z(()=>o.value.filter(ne=>ne.is_active)),m=Z(()=>t.value.filter(ne=>ne.is_active)),g=Z(()=>{if(Object.keys(c.value).length===0)return 0;const ne=Object.values(c.value),ce=ne.length,oe=ne.filter(re=>re.completeness>=80).length;return Math.round(oe/ce*100)}),y=()=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.get_list",params:{doctype:"Data Analytics Dashboard",fields:["name","dashboard_id","dashboard_name","dashboard_type","description","is_active","is_default","created_by","creation_date","last_refresh_date","total_views","last_viewed_date","modified"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();r.value=ne||[]}catch(ne){console.error("Error fetching dashboards:",ne),ne.message&&ne.message.includes("PermissionError")?(console.warn("No permission to access Data Analytics Dashboard doctype"),r.value=[]):r.value=[]}}),x=ne=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"Data Analytics Dashboard",name:ne}}).fetch()}catch(ce){return console.error("Error fetching dashboard details:",ce),null}}),_=ne=>ue(void 0,null,function*(){try{const ce=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Data Analytics Dashboard"},ne)}}).fetch();return yield y(),ce}catch(ce){throw console.error("Error creating dashboard:",ce),ce}}),k=(ne,ce)=>ue(void 0,null,function*(){try{const oe=yield Ve({url:"frappe.client.set_value",params:{doctype:"Data Analytics Dashboard",name:ne,fieldname:ce}}).fetch();return yield y(),oe}catch(oe){throw console.error("Error updating dashboard:",oe),oe}}),w=ne=>ue(void 0,null,function*(){try{const ce=yield Ve({url:"frappe.client.get_list",params:{doctype:"Dashboard Chart",filters:{parent:ne,parenttype:"Data Analytics Dashboard"},fields:["name","chart_name","chart_type","data_source","x_axis_field","y_axis_field","chart_title","width","height","position_x","position_y","is_active","refresh_interval"],limit_page_length:1e3}}).fetch();return s.value=ce||[],ce}catch(ce){return ce.message&&ce.message.includes("PermissionError")?(console.warn("No permission to access Dashboard Chart doctype"),s.value=[],[]):(console.error("Error fetching dashboard charts:",ce),s.value=[],[])}}),S=ne=>ue(void 0,null,function*(){try{const ce=yield Ve({url:"frappe.client.get_list",params:{doctype:"Dashboard Data Source",filters:{parent:ne,parenttype:"Data Analytics Dashboard"},fields:["name","data_source_name","data_source_type","connection_string","query","refresh_interval","is_active","last_refresh","cache_enabled"],limit_page_length:1e3}}).fetch();return i.value=ce||[],ce}catch(ce){return ce.message&&ce.message.includes("PermissionError")?(console.warn("No permission to access Dashboard Data Source doctype"),i.value=[],[]):(console.error("Error fetching dashboard data sources:",ce),i.value=[],[])}}),C=()=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.get_list",params:{doctype:"CSV Import Type",fields:["name","import_type_id","import_name","description","bc_source_table","target_doctype","is_active","import_frequency","last_import_date","total_records_imported","successful_imports","failed_imports","creation","modified","field_mappings"],limit_page_length:1e3,order_by:"modified desc"}}).fetch();o.value=ne||[];const ce=[];o.value.forEach(oe=>{oe.field_mappings&&Array.isArray(oe.field_mappings)&&oe.field_mappings.forEach(re=>{ce.push(ze(ge({},re),{import_type_name:oe.import_name||oe.name}))})}),l.value=ce}catch(ne){console.error("Error fetching CSV import types:",ne),ne.message&&ne.message.includes("PermissionError")?(console.warn("No permission to access CSV Import Type doctype"),o.value=[],l.value=[]):(o.value=[],l.value=[])}}),A=ne=>ue(void 0,null,function*(){try{return yield Ve({url:"frappe.client.get",params:{doctype:"CSV Import Type",name:ne}}).fetch()}catch(ce){return console.error("Error fetching CSV import type details:",ce),null}}),M=ne=>ue(void 0,null,function*(){try{const ce=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"CSV Import Type"},ne)}}).fetch();return yield C(),ce}catch(ce){throw console.error("Error creating CSV import type:",ce),ce}}),E=(ne,ce)=>ue(void 0,null,function*(){try{const oe=yield Ve({url:"frappe.client.set_value",params:{doctype:"CSV Import Type",name:ne,fieldname:ce}}).fetch();return yield C(),oe}catch(oe){throw console.error("Error updating CSV import type:",oe),oe}}),P=(ne,ce)=>ue(void 0,null,function*(){try{return yield Ve({url:"mkaguzi.api.execute_csv_import",params:{import_type_id:ne,csv_data:ce}}).fetch()}catch(oe){throw console.error("Error executing CSV import:",oe),oe}}),I=()=>ue(void 0,null,function*(){try{console.warn("Skipping direct field mappings fetch - CSV Import Field Mapping is a child table"),l.value=[]}catch(ne){console.error("Error fetching CSV import field mappings:",ne),l.value=[]}}),F=()=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.get_list",params:{doctype:"CSV Import History",fields:["name","import_type","import_type_name","file_name","status","started_at","completed_at","duration","total_records","records_processed","records_failed","success_rate","error_message","creation","modified"],limit_page_length:1e3,order_by:"started_at desc"}}).fetch();d.value=ne||[]}catch(ne){console.error("Error fetching CSV import history:",ne),ne.message&&ne.message.includes("PermissionError")?(console.warn("No permission to access CSV Import History doctype"),d.value=[]):d.value=[]}}),L=()=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"mkaguzi.api.get_data_quality_metrics"}).fetch();return c.value=ne||{},ne}catch(ne){return console.error("Error fetching data quality metrics:",ne),c.value={},{}}}),z=ne=>{t.value=ne};return{dataPeriods:t,importStatus:e,bcDataCache:n,dashboards:r,dashboardCharts:s,dashboardDataSources:i,dashboardFilters:a,csvImportTypes:o,csvImportFieldMappings:l,csvImportHistory:d,dataQualityMetrics:c,activeDataPeriods:m,activeDashboards:f,publicDashboards:p,activeCsvImports:h,dataCompleteness:g,setDataPeriods:z,addDataPeriod:ne=>{t.value.push(ne)},updateDataPeriod:(ne,ce)=>{const oe=t.value.findIndex(re=>re.name===ne);oe!==-1&&(t.value[oe]=ge(ge({},t.value[oe]),ce))},setImportStatus:ne=>{e.value=ne},cacheBCData:(ne,ce)=>{n.value.set(ne,{data:ce,timestamp:Date.now()})},getCachedBCData:ne=>{const ce=n.value.get(ne);return ce?Date.now()-ce.timestamp>5*60*1e3?(n.value.delete(ne),null):ce.data:null},setDataQualityMetrics:ne=>{c.value=ne},updateDataQualityMetric:(ne,ce)=>{c.value[ne]=ce},fetchDataPeriods:()=>ue(void 0,null,function*(){console.warn("Skipping data periods fetch - Audit Engagement Data Period is a child table with restricted access"),z([])}),fetchDashboards:y,fetchDashboardDetails:x,createDashboard:_,updateDashboard:k,fetchDashboardCharts:w,fetchDashboardDataSources:S,fetchCsvImportTypes:C,fetchCsvImportTypeDetails:A,createCsvImportType:M,updateCsvImportType:E,executeCsvImport:P,fetchCsvImportFieldMappings:I,fetchCsvImportHistory:F,fetchDataQualityMetrics:L,clearCache:()=>{n.value.clear(),c.value={}},getDataPeriodByName:ne=>t.value.find(ce=>ce.name===ne)}});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Gb(t){return t+.5|0}const pc=(t,e,n)=>Math.max(Math.min(t,n),e);function Ay(t){return pc(Gb(t*2.55),0,255)}function Tc(t){return pc(Gb(t*255),0,255)}function $u(t){return pc(Gb(t/2.55)/100,0,1)}function sq(t){return pc(Gb(t*100),0,100)}const Ma={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xD=[..."0123456789ABCDEF"],kTt=t=>xD[t&15],STt=t=>xD[(t&240)>>4]+xD[t&15],U_=t=>(t&240)>>4===(t&15),CTt=t=>U_(t.r)&&U_(t.g)&&U_(t.b)&&U_(t.a);function ATt(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Ma[t[1]]*17,g:255&Ma[t[2]]*17,b:255&Ma[t[3]]*17,a:e===5?Ma[t[4]]*17:255}:(e===7||e===9)&&(n={r:Ma[t[1]]<<4|Ma[t[2]],g:Ma[t[3]]<<4|Ma[t[4]],b:Ma[t[5]]<<4|Ma[t[6]],a:e===9?Ma[t[7]]<<4|Ma[t[8]]:255})),n}const TTt=(t,e)=>t<255?e(t):"";function $Tt(t){var e=CTt(t)?kTt:STt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+TTt(t.a,e):void 0}const MTt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function koe(t,e,n){const r=e*Math.min(n,1-n),s=(i,a=(i+t/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function ETt(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function DTt(t,e,n){const r=koe(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function RTt(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function iO(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),a=Math.min(n,r,s),o=(i+a)/2;let l,d,c;return i!==a&&(c=i-a,d=o>.5?c/(2-i-a):c/(i+a),l=RTt(n,r,s,c,i),l=l*60+.5),[l|0,d||0,o]}function aO(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Tc)}function oO(t,e,n){return aO(koe,t,e,n)}function PTt(t,e,n){return aO(DTt,t,e,n)}function ITt(t,e,n){return aO(ETt,t,e,n)}function Soe(t){return(t%360+360)%360}function OTt(t){const e=MTt.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ay(+e[5]):Tc(+e[5]));const s=Soe(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?r=PTt(s,i,a):e[1]==="hsv"?r=ITt(s,i,a):r=oO(s,i,a),{r:r[0],g:r[1],b:r[2],a:n}}function LTt(t,e){var n=iO(t);n[0]=Soe(n[0]+e),n=oO(n),t.r=n[0],t.g=n[1],t.b=n[2]}function VTt(t){if(!t)return;const e=iO(t),n=e[0],r=sq(e[1]),s=sq(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${$u(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const iq={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},aq={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function NTt(){const t={},e=Object.keys(aq),n=Object.keys(iq);let r,s,i,a,o;for(r=0;r<e.length;r++){for(a=o=e[r],s=0;s<n.length;s++)i=n[s],o=o.replace(i,iq[i]);i=parseInt(aq[a],16),t[o]=[i>>16&255,i>>8&255,i&255]}return t}let H_;function jTt(t){H_||(H_=NTt(),H_.transparent=[0,0,0,0]);const e=H_[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const FTt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function BTt(t){const e=FTt.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const a=+e[7];n=e[8]?Ay(a):pc(a*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Ay(r):pc(r,0,255)),s=255&(e[4]?Ay(s):pc(s,0,255)),i=255&(e[6]?Ay(i):pc(i,0,255)),{r,g:s,b:i,a:n}}}function zTt(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${$u(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const $5=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,lm=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function UTt(t,e,n){const r=lm($u(t.r)),s=lm($u(t.g)),i=lm($u(t.b));return{r:Tc($5(r+n*(lm($u(e.r))-r))),g:Tc($5(s+n*(lm($u(e.g))-s))),b:Tc($5(i+n*(lm($u(e.b))-i))),a:t.a+n*(e.a-t.a)}}function q_(t,e,n){if(t){let r=iO(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=oO(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Coe(t,e){return t&&Object.assign(e||{},t)}function oq(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Tc(t[3]))):(e=Coe(t,{r:0,g:0,b:0,a:1}),e.a=Tc(e.a)),e}function HTt(t){return t.charAt(0)==="r"?BTt(t):OTt(t)}class B1{constructor(e){if(e instanceof B1)return e;const n=typeof e;let r;n==="object"?r=oq(e):n==="string"&&(r=ATt(e)||jTt(e)||HTt(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Coe(this._rgb);return e&&(e.a=$u(e.a)),e}set rgb(e){this._rgb=oq(e)}rgbString(){return this._valid?zTt(this._rgb):void 0}hexString(){return this._valid?$Tt(this._rgb):void 0}hslString(){return this._valid?VTt(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const a=n===i?.5:n,o=2*a-1,l=r.a-s.a,d=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;i=1-d,r.r=255&d*r.r+i*s.r+.5,r.g=255&d*r.g+i*s.g+.5,r.b=255&d*r.b+i*s.b+.5,r.a=a*r.a+(1-a)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=UTt(this._rgb,e._rgb,n)),this}clone(){return new B1(this.rgb)}alpha(e){return this._rgb.a=Tc(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Gb(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return q_(this._rgb,2,e),this}darken(e){return q_(this._rgb,2,-e),this}saturate(e){return q_(this._rgb,1,e),this}desaturate(e){return q_(this._rgb,1,-e),this}rotate(e){return LTt(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function hu(){}const qTt=(()=>{let t=0;return()=>t++})();function ar(t){return t==null}function as(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Mn(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function lo(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function el(t,e){return lo(t)?t:e}function gn(t,e){return typeof t=="undefined"?e:t}const WTt=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Aoe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function xr(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Gn(t,e,n,r){let s,i,a;if(as(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Mn(t))for(a=Object.keys(t),i=a.length,s=0;s<i;s++)e.call(n,t[a[s]],a[s])}function hS(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function mS(t){if(as(t))return t.map(mS);if(Mn(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=mS(t[n[s]]);return e}return t}function Toe(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function GTt(t,e,n,r){if(!Toe(t))return;const s=e[t],i=n[t];Mn(s)&&Mn(i)?z1(s,i,r):e[t]=mS(i)}function z1(t,e,n){const r=as(e)?e:[e],s=r.length;if(!Mn(t))return t;n=n||{};const i=n.merger||GTt;let a;for(let o=0;o<s;++o){if(a=r[o],!Mn(a))continue;const l=Object.keys(a);for(let d=0,c=l.length;d<c;++d)i(l[d],t,a,n)}return t}function w0(t,e){return z1(t,e,{merger:YTt})}function YTt(t,e,n){if(!Toe(t))return;const r=e[t],s=n[t];Mn(r)&&Mn(s)?w0(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=mS(s))}const lq={"":t=>t,x:t=>t.x,y:t=>t.y};function KTt(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function XTt(t){const e=KTt(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function rh(t,e){return(lq[e]||(lq[e]=XTt(e)))(t)}function lO(t){return t.charAt(0).toUpperCase()+t.slice(1)}const U1=t=>typeof t!="undefined",zc=t=>typeof t=="function",uq=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function QTt(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Yn=Math.PI,Lr=2*Yn,ZTt=Lr+Yn,gS=Number.POSITIVE_INFINITY,JTt=Yn/180,ds=Yn/2,Df=Yn/4,dq=Yn*2/3,$oe=Math.log10,Il=Math.sign;function k0(t,e,n){return Math.abs(t-e)<n}function cq(t){const e=Math.round(t);t=k0(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor($oe(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function e3t(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function t3t(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function vS(t){return!t3t(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function n3t(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function r3t(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Fu(t){return t*(Yn/180)}function s3t(t){return t*(180/Yn)}function fq(t){if(!lo(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Moe(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Yn&&(i+=Lr),{angle:i,distance:s}}function _D(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function i3t(t,e){return(t-e+ZTt)%Lr-Yn}function ko(t){return(t%Lr+Lr)%Lr}function H1(t,e,n,r){const s=ko(t),i=ko(e),a=ko(n),o=ko(i-s),l=ko(a-s),d=ko(s-i),c=ko(s-a);return s===i||s===a||r&&i===a||o>l&&d<c}function Gi(t,e,n){return Math.max(e,Math.min(n,t))}function a3t(t){return Gi(t,-32768,32767)}function hc(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function uO(t,e,n){n=n||(a=>t[a]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const wD=(t,e,n,r)=>uO(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),o3t=(t,e,n)=>uO(t,n,r=>t[r][e]>=n);function l3t(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Eoe=["push","pop","shift","splice","unshift"];function u3t(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Eoe.forEach(n=>{const r="_onData"+lO(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const a=s.apply(this,i);return t._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...i)}),a}})})}function pq(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Eoe.forEach(i=>{delete t[i]}),delete t._chartjs)}function Doe(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Roe=function(){return typeof window=="undefined"?function(t){return t()}:window.requestAnimationFrame}();function Poe(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,Roe.call(window,()=>{r=!1,t.apply(e,n)}))}}function d3t(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const dO=t=>t==="start"?"left":t==="end"?"right":"center",Gs=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,c3t=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,W_=t=>t===0||t===1,hq=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Lr/n)),mq=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Lr/n)+1,S0={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ds)+1,easeOutSine:t=>Math.sin(t*ds),easeInOutSine:t=>-.5*(Math.cos(Yn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>W_(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>W_(t)?t:hq(t,.075,.3),easeOutElastic:t=>W_(t)?t:mq(t,.075,.3),easeInOutElastic(t){return W_(t)?t:t<.5?.5*hq(t*2,.1125,.45):.5+.5*mq(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-S0.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?S0.easeInBounce(t*2)*.5:S0.easeOutBounce(t*2-1)*.5+.5};function cO(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function gq(t){return cO(t)?t:new B1(t)}function M5(t){return cO(t)?t:new B1(t).saturate(.5).darken(.1).hexString()}const f3t=["x","y","borderWidth","radius","tension"],p3t=["color","borderColor","backgroundColor"];function h3t(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:p3t},numbers:{type:"number",properties:f3t}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function m3t(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const vq=new Map;function g3t(t,e){e=e||{};const n=t+JSON.stringify(e);let r=vq.get(n);return r||(r=new Intl.NumberFormat(t,e),vq.set(n,r)),r}function fO(t,e,n){return g3t(e,n).format(t)}const v3t={values(t){return as(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const d=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),i=y3t(t,n)}const a=$oe(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),fO(t,r,l)}};function y3t(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Ioe={formatters:v3t};function b3t(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ioe.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const sh=Object.create(null),kD=Object.create(null);function C0(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function E5(t,e,n){return typeof e=="string"?z1(C0(t,e),n):z1(C0(t,""),e)}class x3t{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>M5(s.backgroundColor),this.hoverBorderColor=(r,s)=>M5(s.borderColor),this.hoverColor=(r,s)=>M5(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return E5(this,e,n)}get(e){return C0(this,e)}describe(e,n){return E5(kD,e,n)}override(e,n){return E5(sh,e,n)}route(e,n,r,s){const i=C0(this,e),a=C0(this,r),o="_"+n;Object.defineProperties(i,{[o]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[o],d=a[s];return Mn(l)?Object.assign({},d,l):gn(l,d)},set(l){this[o]=l}}})}apply(e){e.forEach(n=>n(this))}}var zr=new x3t({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[h3t,m3t,b3t]);function _3t(t){return!t||ar(t.size)||ar(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function yq(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Rf(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function bq(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function SD(t,e,n,r){Ooe(t,e,n,r,null)}function Ooe(t,e,n,r,s){let i,a,o,l,d,c,f,p;const h=e.pointStyle,m=e.rotation,g=e.radius;let y=(m||0)*JTt;if(h&&typeof h=="object"&&(i=h.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(y),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),h){default:s?t.ellipse(n,r,s/2,g,0,0,Lr):t.arc(n,r,g,0,Lr),t.closePath();break;case"triangle":c=s?s/2:g,t.moveTo(n+Math.sin(y)*c,r-Math.cos(y)*g),y+=dq,t.lineTo(n+Math.sin(y)*c,r-Math.cos(y)*g),y+=dq,t.lineTo(n+Math.sin(y)*c,r-Math.cos(y)*g),t.closePath();break;case"rectRounded":d=g*.516,l=g-d,a=Math.cos(y+Df)*l,f=Math.cos(y+Df)*(s?s/2-d:l),o=Math.sin(y+Df)*l,p=Math.sin(y+Df)*(s?s/2-d:l),t.arc(n-f,r-o,d,y-Yn,y-ds),t.arc(n+p,r-a,d,y-ds,y),t.arc(n+f,r+o,d,y,y+ds),t.arc(n-p,r+a,d,y+ds,y+Yn),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,c=s?s/2:l,t.rect(n-c,r-l,2*c,2*l);break}y+=Df;case"rectRot":f=Math.cos(y)*(s?s/2:g),a=Math.cos(y)*g,o=Math.sin(y)*g,p=Math.sin(y)*(s?s/2:g),t.moveTo(n-f,r-o),t.lineTo(n+p,r-a),t.lineTo(n+f,r+o),t.lineTo(n-p,r+a),t.closePath();break;case"crossRot":y+=Df;case"cross":f=Math.cos(y)*(s?s/2:g),a=Math.cos(y)*g,o=Math.sin(y)*g,p=Math.sin(y)*(s?s/2:g),t.moveTo(n-f,r-o),t.lineTo(n+f,r+o),t.moveTo(n+p,r-a),t.lineTo(n-p,r+a);break;case"star":f=Math.cos(y)*(s?s/2:g),a=Math.cos(y)*g,o=Math.sin(y)*g,p=Math.sin(y)*(s?s/2:g),t.moveTo(n-f,r-o),t.lineTo(n+f,r+o),t.moveTo(n+p,r-a),t.lineTo(n-p,r+a),y+=Df,f=Math.cos(y)*(s?s/2:g),a=Math.cos(y)*g,o=Math.sin(y)*g,p=Math.sin(y)*(s?s/2:g),t.moveTo(n-f,r-o),t.lineTo(n+f,r+o),t.moveTo(n+p,r-a),t.lineTo(n-p,r+a);break;case"line":a=s?s/2:Math.cos(y)*g,o=Math.sin(y)*g,t.moveTo(n-a,r-o),t.lineTo(n+a,r+o);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(y)*(s?s/2:g),r+Math.sin(y)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function q1(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function pO(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function hO(t){t.restore()}function w3t(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function k3t(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function S3t(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ar(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function C3t(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),a=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,d=n+i.actualBoundingBoxDescent,c=s.strikethrough?(l+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(a,c),t.lineTo(o,c),t.stroke()}}function A3t(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function W1(t,e,n,r,s,i={}){const a=as(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let l,d;for(t.save(),t.font=s.string,S3t(t,i),l=0;l<a.length;++l)d=a[l],i.backdrop&&A3t(t,i.backdrop),o&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ar(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,n,r,i.maxWidth)),t.fillText(d,n,r,i.maxWidth),C3t(t,n,r,d,i),r+=Number(s.lineHeight);t.restore()}function yS(t,e){const{x:n,y:r,w:s,h:i,radius:a}=e;t.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Yn,Yn,!0),t.lineTo(n,r+i-a.bottomLeft),t.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,Yn,ds,!0),t.lineTo(n+s-a.bottomRight,r+i),t.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,ds,0,!0),t.lineTo(n+s,r+a.topRight),t.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-ds,!0),t.lineTo(n+a.topLeft,r)}const T3t=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$3t=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function M3t(t,e){const n=(""+t).match(T3t);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const E3t=t=>+t||0;function mO(t,e){const n={},r=Mn(e),s=r?Object.keys(e):e,i=Mn(t)?r?a=>gn(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of s)n[a]=E3t(i(a));return n}function Loe(t){return mO(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Gm(t){return mO(t,["topLeft","topRight","bottomLeft","bottomRight"])}function uo(t){const e=Loe(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ni(t,e){t=t||{},e=e||zr.font;let n=gn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=gn(t.style,e.style);r&&!(""+r).match($3t)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:gn(t.family,e.family),lineHeight:M3t(gn(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:gn(t.weight,e.weight),string:""};return s.string=_3t(s),s}function G_(t,e,n,r){let s,i,a;for(s=0,i=t.length;s<i;++s)if(a=t[s],a!==void 0&&a!==void 0)return a}function D3t(t,e,n){const{min:r,max:s}=t,i=Aoe(e,(s-r)/2),a=(o,l)=>n&&o===0?0:o+l;return{min:a(r,-Math.abs(i)),max:a(s,i)}}function Sh(t,e){return Object.assign(Object.create(t),e)}function gO(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r=="undefined"&&(r=Foe("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:o=>gO([o,...t],e,i,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return Noe(o,l,()=>j3t(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return _q(o).includes(l)},ownKeys(o){return _q(o)},set(o,l,d){const c=o._storage||(o._storage=s());return o[l]=c[l]=d,delete o._keys,!0}})}function Tg(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Voe(t,r),setContext:i=>Tg(t,i,n,r),override:i=>Tg(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,o){return Noe(i,a,()=>P3t(i,a,o))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,o){return t[a]=o,delete i[a],!0}})}function Voe(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:zc(n)?n:()=>n,isIndexable:zc(r)?r:()=>r}}const R3t=(t,e)=>t?t+lO(e):e,vO=(t,e)=>Mn(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Noe(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function P3t(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=t;let o=r[e];return zc(o)&&a.isScriptable(e)&&(o=I3t(e,o,t,n)),as(o)&&o.length&&(o=O3t(e,o,t,a.isIndexable)),vO(e,o)&&(o=Tg(o,s,i&&i[e],a)),o}function I3t(t,e,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=n;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(i,a||r);return o.delete(t),vO(t,l)&&(l=yO(s._scopes,s,t,l)),l}function O3t(t,e,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=n;if(typeof i.index!="undefined"&&r(t))return e[i.index%e.length];if(Mn(e[0])){const l=e,d=s._scopes.filter(c=>c!==l);e=[];for(const c of l){const f=yO(d,s,t,c);e.push(Tg(f,i,a&&a[t],o))}}return e}function joe(t,e,n){return zc(t)?t(e,n):t}const L3t=(t,e)=>t===!0?e:typeof t=="string"?rh(e,t):void 0;function V3t(t,e,n,r,s){for(const i of e){const a=L3t(n,i);if(a){t.add(a);const o=joe(a._fallback,n,s);if(typeof o!="undefined"&&o!==n&&o!==r)return o}else if(a===!1&&typeof r!="undefined"&&n!==r)return null}return!1}function yO(t,e,n,r){const s=e._rootScopes,i=joe(e._fallback,n,r),a=[...t,...s],o=new Set;o.add(r);let l=xq(o,a,n,i||n,r);return l===null||typeof i!="undefined"&&i!==n&&(l=xq(o,a,i,l,r),l===null)?!1:gO(Array.from(o),[""],s,i,()=>N3t(e,n,r))}function xq(t,e,n,r,s){for(;n;)n=V3t(t,e,n,r,s);return n}function N3t(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return as(s)&&Mn(n)?n:s||{}}function j3t(t,e,n,r){let s;for(const i of e)if(s=Foe(R3t(i,t),n),typeof s!="undefined")return vO(t,s)?yO(n,r,t,s):s}function Foe(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r!="undefined")return r}}function _q(t){let e=t._keys;return e||(e=t._keys=F3t(t._scopes)),e}function F3t(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const B3t=Number.EPSILON||1e-14,$g=(t,e)=>e<t.length&&!t[e].skip&&t[e],Boe=t=>t==="x"?"y":"x";function z3t(t,e,n,r){const s=t.skip?e:t,i=e,a=n.skip?e:n,o=_D(i,s),l=_D(a,i);let d=o/(o+l),c=l/(o+l);d=isNaN(d)?0:d,c=isNaN(c)?0:c;const f=r*d,p=r*c;return{previous:{x:i.x-f*(a.x-s.x),y:i.y-f*(a.y-s.y)},next:{x:i.x+p*(a.x-s.x),y:i.y+p*(a.y-s.y)}}}function U3t(t,e,n){const r=t.length;let s,i,a,o,l,d=$g(t,0);for(let c=0;c<r-1;++c)if(l=d,d=$g(t,c+1),!(!l||!d)){if(k0(e[c],0,B3t)){n[c]=n[c+1]=0;continue}s=n[c]/e[c],i=n[c+1]/e[c],o=Math.pow(s,2)+Math.pow(i,2),!(o<=9)&&(a=3/Math.sqrt(o),n[c]=s*a*e[c],n[c+1]=i*a*e[c])}}function H3t(t,e,n="x"){const r=Boe(n),s=t.length;let i,a,o,l=$g(t,0);for(let d=0;d<s;++d){if(a=o,o=l,l=$g(t,d+1),!o)continue;const c=o[n],f=o[r];a&&(i=(c-a[n])/3,o[`cp1${n}`]=c-i,o[`cp1${r}`]=f-i*e[d]),l&&(i=(l[n]-c)/3,o[`cp2${n}`]=c+i,o[`cp2${r}`]=f+i*e[d])}}function q3t(t,e="x"){const n=Boe(e),r=t.length,s=Array(r).fill(0),i=Array(r);let a,o,l,d=$g(t,0);for(a=0;a<r;++a)if(o=l,l=d,d=$g(t,a+1),!!l){if(d){const c=d[e]-l[e];s[a]=c!==0?(d[n]-l[n])/c:0}i[a]=o?d?Il(s[a-1])!==Il(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}U3t(t,s,i),H3t(t,i,e)}function Y_(t,e,n){return Math.max(Math.min(t,n),e)}function W3t(t,e){let n,r,s,i,a,o=q1(t[0],e);for(n=0,r=t.length;n<r;++n)a=i,i=o,o=n<r-1&&q1(t[n+1],e),i&&(s=t[n],a&&(s.cp1x=Y_(s.cp1x,e.left,e.right),s.cp1y=Y_(s.cp1y,e.top,e.bottom)),o&&(s.cp2x=Y_(s.cp2x,e.left,e.right),s.cp2y=Y_(s.cp2y,e.top,e.bottom)))}function G3t(t,e,n,r,s){let i,a,o,l;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")q3t(t,s);else{let d=r?t[t.length-1]:t[0];for(i=0,a=t.length;i<a;++i)o=t[i],l=z3t(d,o,t[Math.min(i+1,a-(r?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,d=o}e.capBezierPoints&&W3t(t,n)}function bO(){return typeof window!="undefined"&&typeof document!="undefined"}function xO(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bS(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const $A=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Y3t(t,e){return $A(t).getPropertyValue(e)}const K3t=["top","right","bottom","left"];function Np(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=K3t[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const X3t=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Q3t(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let a=!1,o,l;if(X3t(s,i,t.target))o=s,l=i;else{const d=e.getBoundingClientRect();o=r.clientX-d.left,l=r.clientY-d.top,a=!0}return{x:o,y:l,box:a}}function Uf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=$A(n),i=s.boxSizing==="border-box",a=Np(s,"padding"),o=Np(s,"border","width"),{x:l,y:d,box:c}=Q3t(t,n),f=a.left+(c&&o.left),p=a.top+(c&&o.top);let{width:h,height:m}=e;return i&&(h-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-f)/h*n.width/r),y:Math.round((d-p)/m*n.height/r)}}function Z3t(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&xO(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const a=i.getBoundingClientRect(),o=$A(i),l=Np(o,"border","width"),d=Np(o,"padding");e=a.width-d.width-l.width,n=a.height-d.height-l.height,r=bS(o.maxWidth,i,"clientWidth"),s=bS(o.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||gS,maxHeight:s||gS}}const mc=t=>Math.round(t*10)/10;function J3t(t,e,n,r){const s=$A(t),i=Np(s,"margin"),a=bS(s.maxWidth,t,"clientWidth")||gS,o=bS(s.maxHeight,t,"clientHeight")||gS,l=Z3t(t,e,n);let{width:d,height:c}=l;if(s.boxSizing==="content-box"){const p=Np(s,"border","width"),h=Np(s,"padding");d-=h.width+p.width,c-=h.height+p.height}return d=Math.max(0,d-i.width),c=Math.max(0,r?d/r:c-i.height),d=mc(Math.min(d,a,l.maxWidth)),c=mc(Math.min(c,o,l.maxHeight)),d&&!c&&(c=mc(d/2)),(e!==void 0||n!==void 0)&&r&&l.height&&c>l.height&&(c=l.height,d=mc(Math.floor(c*r))),{width:d,height:c}}function wq(t,e,n){const r=e||1,s=mc(t.height*r),i=mc(t.width*r);t.height=mc(t.height),t.width=mc(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||a.height!==s||a.width!==i?(t.currentDevicePixelRatio=r,a.height=s,a.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const e5t=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};bO()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();function kq(t,e){const n=Y3t(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Hf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function t5t(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function n5t(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},a=Hf(t,s,n),o=Hf(s,i,n),l=Hf(i,e,n),d=Hf(a,o,n),c=Hf(o,l,n);return Hf(d,c,n)}const r5t=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},s5t=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ym(t,e,n){return t?r5t(e,n):s5t()}function zoe(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Uoe(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Hoe(t){return t==="angle"?{between:H1,compare:i3t,normalize:ko}:{between:hc,compare:(e,n)=>e-n,normalize:e=>e}}function Sq({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function i5t(t,e,n){const{property:r,start:s,end:i}=n,{between:a,normalize:o}=Hoe(r),l=e.length;let{start:d,end:c,loop:f}=t,p,h;if(f){for(d+=l,c+=l,p=0,h=l;p<h&&a(o(e[d%l][r]),s,i);++p)d--,c--;d%=l,c%=l}return c<d&&(c+=l),{start:d,end:c,loop:f,style:t.style}}function a5t(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,a=e.length,{compare:o,between:l,normalize:d}=Hoe(r),{start:c,end:f,loop:p,style:h}=i5t(t,e,n),m=[];let g=!1,y=null,x,_,k;const w=()=>l(s,k,x)&&o(s,k)!==0,S=()=>o(i,x)===0||l(i,k,x),C=()=>g||w(),A=()=>!g||S();for(let M=c,E=c;M<=f;++M)_=e[M%a],!_.skip&&(x=d(_[r]),x!==k&&(g=l(x,s,i),y===null&&C()&&(y=o(x,s)===0?M:E),y!==null&&A()&&(m.push(Sq({start:y,end:M,loop:p,count:a,style:h})),y=null),E=M,k=x));return y!==null&&m.push(Sq({start:y,end:f,loop:p,count:a,style:h})),m}function o5t(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=a5t(r[s],t.points,e);i.length&&n.push(...i)}return n}function l5t(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function u5t(t,e,n,r){const s=t.length,i=[];let a=e,o=t[e],l;for(l=e+1;l<=n;++l){const d=t[l%s];d.skip||d.stop?o.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=a=d.stop?l:null):(a=l,o.skip&&(e=l)),o=d}return a!==null&&i.push({start:e%s,end:a%s,loop:r}),i}function d5t(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:a,end:o}=l5t(n,s,i,r);if(r===!0)return Cq(t,[{start:a,end:o,loop:i}],n,e);const l=o<a?o+s:o,d=!!t._fullLoop&&a===0&&o===s-1;return Cq(t,u5t(n,a,l,d),n,e)}function Cq(t,e,n,r){return!r||!r.setContext||!n?e:c5t(t,e,n,r)}function c5t(t,e,n,r){const s=t._chart.getContext(),i=Aq(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,l=n.length,d=[];let c=i,f=e[0].start,p=f;function h(m,g,y,x){const _=o?-1:1;if(m!==g){for(m+=l;n[m%l].skip;)m-=_;for(;n[g%l].skip;)g+=_;m%l!==g%l&&(d.push({start:m%l,end:g%l,loop:y,style:x}),c=x,f=g%l)}}for(const m of e){f=o?f:m.start;let g=n[f%l],y;for(p=f+1;p<=m.end;p++){const x=n[p%l];y=Aq(r.setContext(Sh(s,{type:"segment",p0:g,p1:x,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:a}))),f5t(y,c)&&h(f,p-1,m.loop,c),g=x,c=y}f<p-1&&h(f,p-1,m.loop,c)}return d}function Aq(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function f5t(t,e){if(!e)return!1;const n=[],r=function(s,i){return cO(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function K_(t,e,n){return t.options.clip?t[n]:e[n]}function p5t(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:K_(n,e,"left"),right:K_(n,e,"right"),top:K_(r,e,"top"),bottom:K_(r,e,"bottom")}:e}function h5t(t,e){const n=e._clip;if(n.disabled)return!1;const r=p5t(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class m5t{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],a=n.duration;i.forEach(o=>o({chart:e,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Roe.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let a=i.length-1,o=!1,l;for(;a>=0;--a)l=i[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var bu=new m5t;const Tq="transparent",g5t={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=gq(t||Tq),s=r.valid&&gq(e||Tq);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class v5t{constructor(e,n,r,s){const i=n[r];s=G_([e.to,s,i,e.from]);const a=G_([e.from,i,s]);this._active=!0,this._fn=e.fn||g5t[e.type||typeof a],this._easing=S0[e.easing]||S0.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,a=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=G_([e.to,n,s,e.from]),this._from=G_([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,a=this._loop,o=this._to;let l;if(this._active=i!==o&&(a||n<r),!this._active){this._target[s]=o,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class qoe{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Mn(e))return;const n=Object.keys(zr.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Mn(i))return;const a={};for(const o of n)a[o]=i[o];(as(i.properties)&&i.properties||[s]).forEach(o=>{(o===s||!r.has(o))&&r.set(o,a)})})}_animateOptions(e,n){const r=n.options,s=b5t(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&y5t(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),a=Object.keys(n),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const d=a[l];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(e,n));continue}const c=n[d];let f=i[d];const p=r.get(d);if(f)if(p&&f.active()){f.update(p,c,o);continue}else f.cancel();if(!p||!p.duration){e[d]=c;continue}i[d]=f=new v5t(p,e,d,c),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return bu.add(this._chart,r),!0}}function y5t(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function b5t(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function $q(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function x5t(t,e,n){if(n===!1)return!1;const r=$q(t,n),s=$q(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function _5t(t){let e,n,r,s;return Mn(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Woe(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Mq(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let a,o,l,d;if(e===null)return;let c=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(c=!0,r.all)continue;break}d=t.values[l],lo(d)&&(i||e===0||Il(e)===Il(d))&&(e+=d)}return!c&&!r.all?0:e}function w5t(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",a=Object.keys(t),o=new Array(a.length);let l,d,c;for(l=0,d=a.length;l<d;++l)c=a[l],o[l]={[s]:c,[i]:t[c]};return o}function D5(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function k5t(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function S5t(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function C5t(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Eq(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Dq(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=r,l=i.axis,d=a.axis,c=k5t(i,a,r),f=e.length;let p;for(let h=0;h<f;++h){const m=e[h],{[l]:g,[d]:y}=m,x=m._stacks||(m._stacks={});p=x[d]=C5t(s,c,g),p[o]=y,p._top=Eq(p,a,!0,r.type),p._bottom=Eq(p,a,!1,r.type);const _=p._visualValues||(p._visualValues={});_[o]=y}}function R5(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function A5t(t,e){return Sh(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function T5t(t,e,n){return Sh(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ny(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const P5=t=>t==="reset"||t==="none",Rq=(t,e)=>e?t:Object.assign({},t),$5t=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Woe(n,!0),values:null};class Km{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=D5(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ny(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,p,h,m)=>f==="x"?p:f==="r"?m:h,i=n.xAxisID=gn(r.xAxisID,R5(e,"x")),a=n.yAxisID=gn(r.yAxisID,R5(e,"y")),o=n.rAxisID=gn(r.rAxisID,R5(e,"r")),l=n.indexAxis,d=n.iAxisID=s(l,i,a,o),c=n.vAxisID=s(l,a,i,o);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&pq(this._data,this),e._stacked&&ny(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Mn(n)){const s=this._cachedMeta;this._data=w5t(n,s)}else if(r!==n){if(r){pq(r,this);const s=this._cachedMeta;ny(s),s._parsed=[]}n&&Object.isExtensible(n)&&u3t(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=D5(n.vScale,n),n.stack!==r.stack&&(s=!0,ny(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Dq(this,n._parsed),n._stacked=D5(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:a}=r,o=i.axis;let l=e===0&&n===s.length?!0:r._sorted,d=e>0&&r._parsed[e-1],c,f,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{as(s[e])?p=this.parseArrayData(r,s,e,n):Mn(s[e])?p=this.parseObjectData(r,s,e,n):p=this.parsePrimitiveData(r,s,e,n);const h=()=>f[o]===null||d&&f[o]<d[o];for(c=0;c<n;++c)r._parsed[c+e]=f=p[c],l&&(h()&&(l=!1),d=f);r._sorted=l}a&&Dq(this,p)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:a}=e,o=i.axis,l=a.axis,d=i.getLabels(),c=i===a,f=new Array(s);let p,h,m;for(p=0,h=s;p<h;++p)m=p+r,f[p]={[o]:c||i.parse(d[m],m),[l]:a.parse(n[m],m)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:a}=e,o=new Array(s);let l,d,c,f;for(l=0,d=s;l<d;++l)c=l+r,f=n[c],o[l]={x:i.parse(f[0],c),y:a.parse(f[1],c)};return o}parseObjectData(e,n,r,s){const{xScale:i,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,d=new Array(s);let c,f,p,h;for(c=0,f=s;c<f;++c)p=c+r,h=n[p],d[c]={x:i.parse(rh(h,o),p),y:a.parse(rh(h,l),p)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,a=n[e.axis],o={keys:Woe(s,!0),values:n._stacks[e.axis]._visualValues};return Mq(o,a,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let a=i===null?NaN:i;const o=s&&r._stacks[n.axis];s&&o&&(s.values=o,a=Mq(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,a=s.length,o=this._getOtherScale(e),l=$5t(n,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:f}=S5t(o);let p,h;function m(){h=s[p];const g=h[o.axis];return!lo(h[e.axis])||c>g||f<g}for(p=0;p<a&&!(!m()&&(this.updateRangeFromParsed(d,e,h,l),i));++p);if(i){for(p=a-1;p>=0;--p)if(!m()){this.updateRangeFromParsed(d,e,h,l);break}}return d}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,a;for(s=0,i=n.length;s<i;++s)a=n[s][e.axis],lo(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_5t(gn(this.options.clip,x5t(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||s.length-o,d=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,i,o,l),c=o;c<o+l;++c){const f=s[c];f.hidden||(f.active&&d?a.push(f):f.draw(e,i))}for(c=0;c<a.length;++c)a[c].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=T5t(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=A5t(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,a=e+"-"+n,o=i[a],l=this.enableOptionSharing&&U1(r);if(o)return Rq(o,l);const d=this.chart.config,c=d.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],p=d.getOptionScopes(this.getDataset(),c),h=Object.keys(zr.elements[e]),m=()=>this.getContext(r,s,n),g=d.resolveNamedOptions(p,h,m,f);return g.$shared&&(g.$shared=l,i[a]=Object.freeze(Rq(g,l))),g}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,o=i[a];if(o)return o;let l;if(s.options.animation!==!1){const c=this.chart.config,f=c.datasetAnimationScopeKeys(this._type,n),p=c.getOptionScopes(this.getDataset(),f);l=c.createResolver(p,this.getContext(e,r,n))}const d=new qoe(s,l&&l.animations);return l&&l._cacheable&&(i[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||P5(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),a=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:a}}updateElement(e,n,r,s){P5(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!P5(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[o,l,d]of this._syncList)this[o](l,d);this._syncList=[];const s=r.length,i=n.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,a=e+n;let o;const l=d=>{for(d.length+=n,o=d.length-1;o>=a;o--)d[o]=d[o-n]};for(l(i),o=e;o<a;++o)i[o]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&ny(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ft(Km,"defaults",{}),ft(Km,"datasetElementType",null),ft(Km,"dataElementType",null);function M5t(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=Doe(r.sort((s,i)=>s-i))}return t._cache.$bar}function E5t(t){const e=t.iScale,n=M5t(e,t.type);let r=e._length,s,i,a,o;const l=()=>{a===32767||a===-32768||(U1(o)&&(r=Math.min(r,Math.abs(a-o)||r)),o=a)};for(s=0,i=n.length;s<i;++s)a=e.getPixelForValue(n[s]),l();for(o=void 0,s=0,i=e.ticks.length;s<i;++s)a=e.getPixelForTick(s),l();return r}function D5t(t,e,n,r){const s=n.barThickness;let i,a;return ar(s)?(i=e.min*n.categoryPercentage,a=n.barPercentage):(i=s*r,a=1),{chunk:i/r,ratio:a,start:e.pixels[t]-i/2}}function R5t(t,e,n,r){const s=e.pixels,i=s[t];let a=t>0?s[t-1]:null,o=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;a===null&&(a=i-(o===null?e.end-e.start:o-i)),o===null&&(o=i+i-a);const d=i-(i-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:d}}function P5t(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),a=Math.min(s,i),o=Math.max(s,i);let l=a,d=o;Math.abs(a)>Math.abs(o)&&(l=o,d=a),e[n.axis]=d,e._custom={barStart:l,barEnd:d,start:s,end:i,min:a,max:o}}function Goe(t,e,n,r){return as(t)?P5t(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Pq(t,e,n,r){const s=t.iScale,i=t.vScale,a=s.getLabels(),o=s===i,l=[];let d,c,f,p;for(d=n,c=n+r;d<c;++d)p=e[d],f={},f[s.axis]=o||s.parse(a[d],d),l.push(Goe(p,f,i,d));return l}function I5(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function I5t(t,e,n){return t!==0?Il(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function O5t(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function L5t(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:d,bottom:c}=O5t(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=d:(n._bottom||0)===r?s=c:(i[Iq(c,a,o,l)]=!0,s=d)),i[Iq(s,a,o,l)]=!0,t.borderSkipped=i}function Iq(t,e,n,r){return r?(t=V5t(t,e,n),t=Oq(t,n,e)):t=Oq(t,e,n),t}function V5t(t,e,n){return t===e?n:t===n?e:t}function Oq(t,e,n){return t==="start"?e:t==="end"?n:t}function N5t(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Qw extends Km{parsePrimitiveData(e,n,r,s){return Pq(e,n,r,s)}parseArrayData(e,n,r,s){return Pq(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,d=i.axis==="x"?o:l,c=a.axis==="x"?o:l,f=[];let p,h,m,g;for(p=r,h=r+s;p<h;++p)g=n[p],m={},m[i.axis]=i.parse(rh(g,d),p),f.push(Goe(rh(g,c),m,a,p));return f}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),a=i._custom,o=I5(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),d=o.isHorizontal(),c=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,s);for(let h=n;h<n+r;h++){const m=this.getParsed(h),g=i||ar(m[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),y=this._calculateBarIndexPixels(h,c),x=(m._stacks||{})[o.axis],_={horizontal:d,base:g.base,enableBorderRadius:!x||I5(m._custom)||a===x._top||a===x._bottom,x:d?g.head:y.center,y:d?y.center:g.head,height:d?y.size:Math.abs(g.size),width:d?Math.abs(g.size):y.size};p&&(_.options=f||this.resolveDataElementOptions(h,e[h].active?"active":s));const k=_.options||e[h].options;L5t(_,k,x,a),N5t(_,k,c.ratio),this.updateElement(e[h],h,_,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),i=r.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(n),l=o&&o[r.axis],d=c=>{const f=c._parsed.find(h=>h[r.axis]===l),p=f&&f[c.vScale.axis];if(ar(p)||isNaN(p))return!0};for(const c of s)if(!(n!==void 0&&d(c))&&((i===!1||a.indexOf(c.stack)===-1||i===void 0&&c.stack===void 0)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[gn(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,a;for(i=0,a=n.data.length;i<a;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const o=e.barThickness;return{min:o||E5t(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:a}}=this,o=i||0,l=this.getParsed(e),d=l._custom,c=I5(d);let f=l[n.axis],p=0,h=r?this.applyStack(n,l,r):f,m,g;h!==f&&(p=h-f,h=f),c&&(f=d.barStart,h=d.barEnd-d.barStart,f!==0&&Il(f)!==Il(d.barEnd)&&(p=0),p+=f);const y=!ar(i)&&!c?i:p;let x=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?m=n.getPixelForValue(p+h):m=x,g=m-x,Math.abs(g)<a){g=I5t(g,n,o)*a,f===o&&(x-=g/2);const _=n.getPixelForDecimal(0),k=n.getPixelForDecimal(1),w=Math.min(_,k),S=Math.max(_,k);x=Math.max(Math.min(x,S),w),m=x+g,r&&!c&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(m)-n.getValueForPixel(x))}if(x===n.getPixelForValue(o)){const _=Il(g)*n.getLineWidthForValue(o)/2;x+=_,g-=_}return{size:g,base:x,head:m,center:m+g/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,a=gn(s.maxBarThickness,1/0);let o,l;const d=this._getAxisCount();if(n.grouped){const c=i?this._getStackCount(e):n.stackCount,f=s.barThickness==="flex"?R5t(e,n,s,c*d):D5t(e,n,s,c*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(gn(p,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+h;o=f.start+f.chunk*m+f.chunk/2,l=Math.min(a,f.chunk*f.ratio)}else o=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(a,n.min*n.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}ft(Qw,"id","bar"),ft(Qw,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ft(Qw,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function j5t(t,e,n){let r=1,s=1,i=0,a=0;if(e<Lr){const o=t,l=o+e,d=Math.cos(o),c=Math.sin(o),f=Math.cos(l),p=Math.sin(l),h=(k,w,S)=>H1(k,o,l,!0)?1:Math.max(w,w*n,S,S*n),m=(k,w,S)=>H1(k,o,l,!0)?-1:Math.min(w,w*n,S,S*n),g=h(0,d,f),y=h(ds,c,p),x=m(Yn,d,f),_=m(Yn+ds,c,p);r=(g-x)/2,s=(y-_)/2,i=-(g+x)/2,a=-(y+_)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}class Ty extends Km{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(Mn(r[e])){const{key:l="value"}=this._parsing;i=d=>+rh(r[d],l)}let a,o;for(a=e,o=e+n;a<o;++a)s._parsed[a]=i(a)}}_getRotation(){return Fu(this.options.rotation-90)}_getCircumference(){return Fu(this.options.circumference)}_getRotationExtents(){let e=Lr,n=-Lr;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),a=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+a)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(WTt(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:c,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:h,offsetX:m,offsetY:g}=j5t(f,c,l),y=(r.width-a)/p,x=(r.height-a)/h,_=Math.max(Math.min(y,x)/2,0),k=Aoe(this.options.radius,_),w=Math.max(k*l,0),S=(k-w)/this._getVisibleDatasetWeightTotal();this.offsetX=m*k,this.offsetY=g*k,s.total=this.calculateTotal(),this.outerRadius=k-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/Lr)}updateElements(e,n,r,s){const i=s==="reset",a=this.chart,o=a.chartArea,d=a.options.animation,c=(o.left+o.right)/2,f=(o.top+o.bottom)/2,p=i&&d.animateScale,h=p?0:this.innerRadius,m=p?0:this.outerRadius,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(n,s);let x=this._getRotation(),_;for(_=0;_<n;++_)x+=this._circumference(_,i);for(_=n;_<n+r;++_){const k=this._circumference(_,i),w=e[_],S={x:c+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+k,circumference:k,outerRadius:m,innerRadius:h};y&&(S.options=g||this.resolveDataElementOptions(_,w.active?"active":s)),x+=k,this.updateElement(w,_,S,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Lr*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=fO(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,a,o,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,o=a.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=o.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(gn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ft(Ty,"id","doughnut"),ft(Ty,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ft(Ty,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ft(Ty,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,d)=>{const f=e.getDatasetMeta(0).controller.getStyle(d);return{text:l,fillStyle:f.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(d),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:s,pointStyle:r,borderRadius:a&&(o||f.borderRadius),index:d}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class CD extends Ty{}ft(CD,"id","pie"),ft(CD,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Pf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _O{constructor(e){ft(this,"options");this.options=e||{}}static override(e){Object.assign(_O.prototype,e)}init(){}formats(){return Pf()}parse(){return Pf()}format(){return Pf()}add(){return Pf()}diff(){return Pf()}startOf(){return Pf()}endOf(){return Pf()}}var F5t={_date:_O};function B5t(t,e,n,r){const{controller:s,data:i,_sorted:a}=t,o=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&i.length){const d=o._reversePixels?o3t:wD;if(r){if(s._sharedOptions){const c=i[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){const p=d(i,e,n-f),h=d(i,e,n+f);return{lo:p.lo,hi:h.hi}}}}else{const c=d(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:p}=t,h=p.slice(0,c.lo+1).reverse().findIndex(g=>!ar(g[f.axis]));c.lo-=Math.max(0,h);const m=p.slice(c.hi).findIndex(g=>!ar(g[f.axis]));c.hi+=Math.max(0,m)}return c}}return{lo:0,hi:i.length-1}}function MA(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),a=n[e];for(let o=0,l=i.length;o<l;++o){const{index:d,data:c}=i[o],{lo:f,hi:p}=B5t(i[o],e,a,s);for(let h=f;h<=p;++h){const m=c[h];m.skip||r(m,d,h)}}}function z5t(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,a=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function O5(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||MA(t,n,e,function(o,l,d){!s&&!q1(o,t.chartArea,0)||o.inRange(e.x,e.y,r)&&i.push({element:o,datasetIndex:l,index:d})},!0),i}function U5t(t,e,n,r){let s=[];function i(a,o,l){const{startAngle:d,endAngle:c}=a.getProps(["startAngle","endAngle"],r),{angle:f}=Moe(a,{x:e.x,y:e.y});H1(f,d,c)&&s.push({element:a,datasetIndex:o,index:l})}return MA(t,n,e,i),s}function H5t(t,e,n,r,s,i){let a=[];const o=z5t(n);let l=Number.POSITIVE_INFINITY;function d(c,f,p){const h=c.inRange(e.x,e.y,s);if(r&&!h)return;const m=c.getCenterPoint(s);if(!(!!i||t.isPointInArea(m))&&!h)return;const y=o(e,m);y<l?(a=[{element:c,datasetIndex:f,index:p}],l=y):y===l&&a.push({element:c,datasetIndex:f,index:p})}return MA(t,n,e,d),a}function L5(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?U5t(t,e,n,s):H5t(t,e,n,r,s,i)}function Lq(t,e,n,r,s){const i=[],a=n==="x"?"inXRange":"inYRange";let o=!1;return MA(t,n,e,(l,d,c)=>{l[a]&&l[a](e[n],s)&&(i.push({element:l,datasetIndex:d,index:c}),o=o||l.inRange(e.x,e.y,s))}),r&&!o?[]:i}var q5t={modes:{index(t,e,n,r){const s=Uf(e,t),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?O5(t,s,i,r,a):L5(t,s,i,!1,r,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const c=o[0].index,f=d.data[c];f&&!f.skip&&l.push({element:f,datasetIndex:d.index,index:c})}),l):[]},dataset(t,e,n,r){const s=Uf(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?O5(t,s,i,r,a):L5(t,s,i,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,d=t.getDatasetMeta(l).data;o=[];for(let c=0;c<d.length;++c)o.push({element:d[c],datasetIndex:l,index:c})}return o},point(t,e,n,r){const s=Uf(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;return O5(t,s,i,r,a)},nearest(t,e,n,r){const s=Uf(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;return L5(t,s,i,n.intersect,r,a)},x(t,e,n,r){const s=Uf(e,t);return Lq(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Uf(e,t);return Lq(t,s,"y",n.intersect,r)}}};const Yoe=["left","top","right","bottom"];function ry(t,e){return t.filter(n=>n.pos===e)}function Vq(t,e){return t.filter(n=>Yoe.indexOf(n.pos)===-1&&n.box.axis===e)}function sy(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function W5t(t){const e=[];let n,r,s,i,a,o;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:a,stackWeight:o=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return e}function G5t(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!Yoe.includes(s))continue;const a=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function Y5t(t,e){const n=G5t(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,a,o;for(i=0,a=t.length;i<a;++i){o=t[i];const{fullSize:l}=o.box,d=n[o.stack],c=d&&o.stackWeight/d.weight;o.horizontal?(o.width=c?c*r:l&&e.availableWidth,o.height=s):(o.width=r,o.height=c?c*s:l&&e.availableHeight)}return n}function K5t(t){const e=W5t(t),n=sy(e.filter(d=>d.box.fullSize),!0),r=sy(ry(e,"left"),!0),s=sy(ry(e,"right")),i=sy(ry(e,"top"),!0),a=sy(ry(e,"bottom")),o=Vq(e,"x"),l=Vq(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:ry(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(a).concat(o)}}function Nq(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Koe(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function X5t(t,e,n,r){const{pos:s,box:i}=n,a=t.maxPadding;if(!Mn(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&Koe(a,i.getPadding());const o=Math.max(0,e.outerWidth-Nq(a,t,"left","right")),l=Math.max(0,e.outerHeight-Nq(a,t,"top","bottom")),d=o!==t.w,c=l!==t.h;return t.w=o,t.h=l,n.horizontal?{same:d,other:c}:{same:c,other:d}}function Q5t(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Z5t(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{i[a]=Math.max(e[a],n[a])}),i}return r(t?["left","right"]:["top","bottom"])}function $y(t,e,n,r){const s=[];let i,a,o,l,d,c;for(i=0,a=t.length,d=0;i<a;++i){o=t[i],l=o.box,l.update(o.width||e.w,o.height||e.h,Z5t(o.horizontal,e));const{same:f,other:p}=X5t(e,n,o,r);d|=f&&s.length,c=c||p,l.fullSize||s.push(o)}return d&&$y(s,e,n,r)||c}function X_(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function jq(t,e,n,r){const s=n.padding;let{x:i,y:a}=e;for(const o of t){const l=o.box,d=r[o.stack]||{placed:0,weight:1},c=o.stackWeight/d.weight||1;if(o.horizontal){const f=e.w*c,p=d.size||l.height;U1(d.start)&&(a=d.start),l.fullSize?X_(l,s.left,a,n.outerWidth-s.right-s.left,p):X_(l,e.left+d.placed,a,f,p),d.start=a,d.placed+=f,a=l.bottom}else{const f=e.h*c,p=d.size||l.width;U1(d.start)&&(i=d.start),l.fullSize?X_(l,i,s.top,p,n.outerHeight-s.bottom-s.top):X_(l,i,e.top+d.placed,p,f),d.start=i,d.placed+=f,i=l.right}}e.x=i,e.y=a}var Ya={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=uo(t.options.layout.padding),i=Math.max(e-s.width,0),a=Math.max(n-s.height,0),o=K5t(t.boxes),l=o.vertical,d=o.horizontal;Gn(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const c=l.reduce((g,y)=>y.box.options&&y.box.options.display===!1?g:g+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/c,hBoxMaxHeight:a/2}),p=Object.assign({},s);Koe(p,uo(r));const h=Object.assign({maxPadding:p,w:i,h:a,x:s.left,y:s.top},s),m=Y5t(l.concat(d),f);$y(o.fullSize,h,f,m),$y(l,h,f,m),$y(d,h,f,m)&&$y(l,h,f,m),Q5t(h),jq(o.leftAndTop,h,f,m),h.x+=h.w,h.y+=h.h,jq(o.rightAndBottom,h,f,m),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Gn(o.chartArea,g=>{const y=g.box;Object.assign(y,t.chartArea),y.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class Xoe{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class J5t extends Xoe{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Zw="$chartjs",e$t={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Fq=t=>t===null||t==="";function t$t(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Zw]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Fq(s)){const i=kq(t,"width");i!==void 0&&(t.width=i)}if(Fq(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=kq(t,"height");i!==void 0&&(t.height=i)}return t}const Qoe=e5t?{passive:!0}:!1;function n$t(t,e,n){t&&t.addEventListener(e,n,Qoe)}function r$t(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Qoe)}function s$t(t,e){const n=e$t[t.type]||t.type,{x:r,y:s}=Uf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function xS(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function i$t(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||xS(o.addedNodes,r),a=a&&!xS(o.removedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function a$t(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||xS(o.removedNodes,r),a=a&&!xS(o.addedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const G1=new Map;let Bq=0;function Zoe(){const t=window.devicePixelRatio;t!==Bq&&(Bq=t,G1.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function o$t(t,e){G1.size||window.addEventListener("resize",Zoe),G1.set(t,e)}function l$t(t){G1.delete(t),G1.size||window.removeEventListener("resize",Zoe)}function u$t(t,e,n){const r=t.canvas,s=r&&xO(r);if(!s)return;const i=Poe((o,l)=>{const d=s.clientWidth;n(o,l),d<s.clientWidth&&n()},window),a=new ResizeObserver(o=>{const l=o[0],d=l.contentRect.width,c=l.contentRect.height;d===0&&c===0||i(d,c)});return a.observe(s),o$t(t,i),a}function V5(t,e,n){n&&n.disconnect(),e==="resize"&&l$t(t)}function d$t(t,e,n){const r=t.canvas,s=Poe(i=>{t.ctx!==null&&n(s$t(i,t))},t);return n$t(r,e,s),s}class c$t extends Xoe{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(t$t(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Zw])return!1;const r=n[Zw].initial;["height","width"].forEach(i=>{const a=r[i];ar(a)?n.removeAttribute(i):n.setAttribute(i,a)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Zw],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),a={attach:i$t,detach:a$t,resize:u$t}[n]||d$t;s[n]=a(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:V5,detach:V5,resize:V5}[n]||r$t)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return J3t(e,n,r,s)}isAttached(e){const n=e&&xO(e);return!!(n&&n.isConnected)}}function f$t(t){return!bO()||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas?J5t:c$t}var rw;let xd=(rw=class{constructor(){ft(this,"x");ft(this,"y");ft(this,"active",!1);ft(this,"options");ft(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return vS(this.x)&&vS(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},ft(rw,"defaults",{}),ft(rw,"defaultRoutes"),rw);function p$t(t,e){const n=t.options.ticks,r=h$t(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?g$t(e):[],a=i.length,o=i[0],l=i[a-1],d=[];if(a>s)return v$t(e,d,i,a/s),d;const c=m$t(i,e,s);if(a>0){let f,p;const h=a>1?Math.round((l-o)/(a-1)):null;for(Q_(e,d,c,ar(h)?0:o-h,o),f=0,p=a-1;f<p;f++)Q_(e,d,c,i[f],i[f+1]);return Q_(e,d,c,l,ar(h)?e.length:l+h),d}return Q_(e,d,c),d}function h$t(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function m$t(t,e,n){const r=y$t(t),s=e.length/n;if(!r)return Math.max(s,1);const i=e3t(r);for(let a=0,o=i.length-1;a<o;a++){const l=i[a];if(l>s)return l}return Math.max(s,1)}function g$t(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function v$t(t,e,n,r){let s=0,i=n[0],a;for(r=Math.ceil(r),a=0;a<t.length;a++)a===i&&(e.push(t[a]),s++,i=n[s*r])}function Q_(t,e,n,r,s){const i=gn(r,0),a=Math.min(gn(s,t.length),t.length);let o=0,l,d,c;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),c=i;c<0;)o++,c=Math.round(i+o*n);for(d=Math.max(i,0);d<a;d++)d===c&&(e.push(t[d]),o++,c=Math.round(i+o*n))}function y$t(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const b$t=t=>t==="left"?"right":t==="right"?"left":t,zq=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Uq=(t,e)=>Math.min(e||t,t);function Hq(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function x$t(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,a=t._endPixel,o=1e-6;let l=t.getPixelForTick(s),d;if(!(n&&(r===1?d=Math.max(l-i,a-l):e===0?d=(t.getPixelForTick(1)-l)/2:d=(l-t.getPixelForTick(s-1))/2,l+=s<e?d:-d,l<i-o||l>a+o)))return l}function _$t(t,e){Gn(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function iy(t){return t.drawTicks?t.tickLength:0}function qq(t,e){if(!t.display)return 0;const n=ni(t.font,e),r=uo(t.padding);return(as(t.text)?t.text.length:1)*n.lineHeight+r.height}function w$t(t,e){return Sh(t,{scale:e,type:"scale"})}function k$t(t,e,n){return Sh(t,{tick:n,index:e,type:"tick"})}function S$t(t,e,n){let r=dO(t);return(n&&e!=="right"||!n&&e==="right")&&(r=b$t(r)),r}function C$t(t,e,n,r){const{top:s,left:i,bottom:a,right:o,chart:l}=t,{chartArea:d,scales:c}=l;let f=0,p,h,m;const g=a-s,y=o-i;if(t.isHorizontal()){if(h=Gs(r,i,o),Mn(n)){const x=Object.keys(n)[0],_=n[x];m=c[x].getPixelForValue(_)+g-e}else n==="center"?m=(d.bottom+d.top)/2+g-e:m=zq(t,n,e);p=o-i}else{if(Mn(n)){const x=Object.keys(n)[0],_=n[x];h=c[x].getPixelForValue(_)-y+e}else n==="center"?h=(d.left+d.right)/2-y+e:h=zq(t,n,e);m=Gs(r,a,s),f=n==="left"?-ds:ds}return{titleX:h,titleY:m,maxWidth:p,rotation:f}}class Jg extends xd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=el(e,Number.POSITIVE_INFINITY),n=el(n,Number.NEGATIVE_INFINITY),r=el(r,Number.POSITIVE_INFINITY),s=el(s,Number.NEGATIVE_INFINITY),{min:el(e,r),max:el(n,s),minDefined:lo(e),maxDefined:lo(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),a;if(s&&i)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,d=o.length;l<d;++l)a=o[l].controller.getMinMax(this,e),s||(n=Math.min(n,a.min)),i||(r=Math.max(r,a.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:el(n,el(r,n)),max:el(r,el(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){xr(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=D3t(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?Hq(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=p$t(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){xr(this.options.afterUpdate,[this])}beforeSetDimensions(){xr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){xr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),xr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){xr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=xr(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){xr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){xr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Uq(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let a=s,o,l,d;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const c=this._getLabelSizes(),f=c.widest.width,p=c.highest.height,h=Gi(this.chart.width-f,0,this.maxWidth);o=e.offset?this.maxWidth/r:h/(r-1),f+6>o&&(o=h/(r-(e.offset?.5:1)),l=this.maxHeight-iy(e.grid)-n.padding-qq(e.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),a=s3t(Math.min(Math.asin(Gi((c.highest.height+6)/o,-1,1)),Math.asin(Gi(l/d,-1,1))-Math.asin(Gi(p/d,-1,1)))),a=Math.max(s,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){xr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){xr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=qq(s,n.options.font);if(o?(e.width=this.maxWidth,e.height=iy(i)+l):(e.height=this.maxHeight,e.width=iy(i)+l),r.display&&this.ticks.length){const{first:d,last:c,widest:f,highest:p}=this._getLabelSizes(),h=r.padding*2,m=Fu(this.labelRotation),g=Math.cos(m),y=Math.sin(m);if(o){const x=r.mirror?0:y*f.width+g*p.height;e.height=Math.min(this.maxHeight,e.height+x+h)}else{const x=r.mirror?0:g*f.width+y*p.height;e.width=Math.min(this.maxWidth,e.width+x+h)}this._calculatePadding(d,c,y,g)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:a},position:o}=this.options,l=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,h=0;l?d?(p=s*e.width,h=r*n.height):(p=r*e.height,h=s*n.width):i==="start"?h=n.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,h=n.width/2),this.paddingLeft=Math.max((p-c+a)*this.width/(this.width-c),0),this.paddingRight=Math.max((h-f+a)*this.width/(this.width-f),0)}else{let c=n.height/2,f=e.height/2;i==="start"?(c=0,f=e.height):i==="end"&&(c=n.height,f=0),this.paddingTop=c+a,this.paddingBottom=f+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){xr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)ar(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Hq(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,a=[],o=[],l=Math.floor(n/Uq(n,r));let d=0,c=0,f,p,h,m,g,y,x,_,k,w,S;for(f=0;f<n;f+=l){if(m=e[f].label,g=this._resolveTickFontOptions(f),s.font=y=g.string,x=i[y]=i[y]||{data:{},gc:[]},_=g.lineHeight,k=w=0,!ar(m)&&!as(m))k=yq(s,x.data,x.gc,k,m),w=_;else if(as(m))for(p=0,h=m.length;p<h;++p)S=m[p],!ar(S)&&!as(S)&&(k=yq(s,x.data,x.gc,k,S),w+=_);a.push(k),o.push(w),d=Math.max(k,d),c=Math.max(w,c)}_$t(i,n);const C=a.indexOf(d),A=o.indexOf(c),M=E=>({width:a[E]||0,height:o[E]||0});return{first:M(0),last:M(n-1),widest:M(C),highest:M(A),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return a3t(this._alignToPixels?Rf(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=k$t(this.getContext(),e,r))}return this.$context||(this.$context=w$t(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Fu(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,l=i?i.highest.height+a:0;return this.isHorizontal()?l*r>o*s?o/r:l/s:l*s<o*r?l/r:o/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:a,border:o}=s,l=i.offset,d=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=iy(i),h=[],m=o.setContext(this.getContext()),g=m.display?m.width:0,y=g/2,x=function(q){return Rf(r,q,g)};let _,k,w,S,C,A,M,E,P,I,F,L;if(a==="top")_=x(this.bottom),A=this.bottom-p,E=_-y,I=x(e.top)+y,L=e.bottom;else if(a==="bottom")_=x(this.top),I=e.top,L=x(e.bottom)-y,A=_+y,E=this.top+p;else if(a==="left")_=x(this.right),C=this.right-p,M=_-y,P=x(e.left)+y,F=e.right;else if(a==="right")_=x(this.left),P=e.left,F=x(e.right)-y,C=_+y,M=this.left+p;else if(n==="x"){if(a==="center")_=x((e.top+e.bottom)/2+.5);else if(Mn(a)){const q=Object.keys(a)[0],V=a[q];_=x(this.chart.scales[q].getPixelForValue(V))}I=e.top,L=e.bottom,A=_+y,E=A+p}else if(n==="y"){if(a==="center")_=x((e.left+e.right)/2);else if(Mn(a)){const q=Object.keys(a)[0],V=a[q];_=x(this.chart.scales[q].getPixelForValue(V))}C=_-y,M=C-p,P=e.left,F=e.right}const z=gn(s.ticks.maxTicksLimit,f),N=Math.max(1,Math.ceil(f/z));for(k=0;k<f;k+=N){const q=this.getContext(k),V=i.setContext(q),O=o.setContext(q),X=V.lineWidth,j=V.color,U=O.dash||[],G=O.dashOffset,ee=V.tickWidth,ie=V.tickColor,ne=V.tickBorderDash||[],ce=V.tickBorderDashOffset;w=x$t(this,k,l),w!==void 0&&(S=Rf(r,w,X),d?C=M=P=F=S:A=E=I=L=S,h.push({tx1:C,ty1:A,tx2:M,ty2:E,x1:P,y1:I,x2:F,y2:L,width:X,color:j,borderDash:U,borderDashOffset:G,tickWidth:ee,tickColor:ie,tickBorderDash:ne,tickBorderDashOffset:ce}))}return this._ticksLength=f,this._borderValue=_,h}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:d,padding:c,mirror:f}=i,p=iy(r.grid),h=p+c,m=f?-c:h,g=-Fu(this.labelRotation),y=[];let x,_,k,w,S,C,A,M,E,P,I,F,L="middle";if(s==="top")C=this.bottom-m,A=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+m,A=this._getXAxisLabelAlignment();else if(s==="left"){const N=this._getYAxisLabelAlignment(p);A=N.textAlign,S=N.x}else if(s==="right"){const N=this._getYAxisLabelAlignment(p);A=N.textAlign,S=N.x}else if(n==="x"){if(s==="center")C=(e.top+e.bottom)/2+h;else if(Mn(s)){const N=Object.keys(s)[0],q=s[N];C=this.chart.scales[N].getPixelForValue(q)+h}A=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")S=(e.left+e.right)/2-h;else if(Mn(s)){const N=Object.keys(s)[0],q=s[N];S=this.chart.scales[N].getPixelForValue(q)}A=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?L="top":l==="end"&&(L="bottom"));const z=this._getLabelSizes();for(x=0,_=o.length;x<_;++x){k=o[x],w=k.label;const N=i.setContext(this.getContext(x));M=this.getPixelForTick(x)+i.labelOffset,E=this._resolveTickFontOptions(x),P=E.lineHeight,I=as(w)?w.length:1;const q=I/2,V=N.color,O=N.textStrokeColor,X=N.textStrokeWidth;let j=A;a?(S=M,A==="inner"&&(x===_-1?j=this.options.reverse?"left":"right":x===0?j=this.options.reverse?"right":"left":j="center"),s==="top"?d==="near"||g!==0?F=-I*P+P/2:d==="center"?F=-z.highest.height/2-q*P+P:F=-z.highest.height+P/2:d==="near"||g!==0?F=P/2:d==="center"?F=z.highest.height/2-q*P:F=z.highest.height-I*P,f&&(F*=-1),g!==0&&!N.showLabelBackdrop&&(S+=P/2*Math.sin(g))):(C=M,F=(1-I)*P/2);let U;if(N.showLabelBackdrop){const G=uo(N.backdropPadding),ee=z.heights[x],ie=z.widths[x];let ne=F-G.top,ce=0-G.left;switch(L){case"middle":ne-=ee/2;break;case"bottom":ne-=ee;break}switch(A){case"center":ce-=ie/2;break;case"right":ce-=ie;break;case"inner":x===_-1?ce-=ie:x>0&&(ce-=ie/2);break}U={left:ce,top:ne,width:ie+G.width,height:ee+G.height,color:N.backdropColor}}y.push({label:w,font:E,textOffset:F,options:{rotation:g,color:V,strokeColor:O,strokeWidth:X,textAlign:j,textBaseline:L,translation:[S,C],backdrop:U}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Fu(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,a=this._getLabelSizes(),o=e+i,l=a.widest.width;let d,c;return n==="left"?s?(c=this.right+i,r==="near"?d="left":r==="center"?(d="center",c+=l/2):(d="right",c+=l)):(c=this.right-o,r==="near"?d="right":r==="center"?(d="center",c-=l/2):(d="left",c=this.left)):n==="right"?s?(c=this.left+i,r==="near"?d="right":r==="center"?(d="center",c-=l/2):(d="left",c-=l)):(c=this.left+o,r==="near"?d="left":r==="center"?(d="center",c+=l/2):(d="right",c=this.right)):d="right",{textAlign:d,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:a}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,a),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const o=(l,d,c)=>{!c.width||!c.color||(r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.setLineDash(c.borderDash||[]),r.lineDashOffset=c.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(n.display)for(i=0,a=s.length;i<a;++i){const l=s[i];n.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),a=r.display?i.width:0;if(!a)return;const o=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,c,f,p;this.isHorizontal()?(d=Rf(e,this.left,a)-a/2,c=Rf(e,this.right,o)+o/2,f=p=l):(f=Rf(e,this.top,a)-a/2,p=Rf(e,this.bottom,o)+o/2,d=c=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(d,f),n.lineTo(c,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&pO(r,s);const i=this.getLabelItems(e);for(const a of i){const o=a.options,l=a.font,d=a.label,c=a.textOffset;W1(r,d,0,c,l,o)}s&&hO(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=ni(r.font),a=uo(r.padding),o=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Mn(n)?(l+=a.bottom,as(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:d,titleY:c,maxWidth:f,rotation:p}=C$t(this,l,n,o);W1(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:p,textAlign:S$t(o,n,s),textBaseline:"middle",translation:[d,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=gn(e.grid&&e.grid.z,-1),s=gn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Jg.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,a;for(i=0,a=n.length;i<a;++i){const o=n[i];o[r]===this.id&&(!e||o.type===e)&&s.push(o)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ni(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Z_{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;$$t(n)&&(r=this.register(n));const s=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,A$t(e,a,r),this.override&&zr.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in zr[s]&&(delete zr[s][r],this.override&&delete sh[r])}}function A$t(t,e,n){const r=z1(Object.create(null),[n?zr.get(n):{},zr.get(e),t.defaults]);zr.set(e,r),t.defaultRoutes&&T$t(e,t.defaultRoutes),t.descriptors&&zr.describe(e,t.descriptors)}function T$t(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),a=e[n].split("."),o=a.pop(),l=a.join(".");zr.route(i,s,l,o)})}function $$t(t){return"id"in t&&"defaults"in t}class M$t{constructor(){this.controllers=new Z_(Km,"datasets",!0),this.elements=new Z_(xd,"elements"),this.plugins=new Z_(Object,"plugins"),this.scales=new Z_(Jg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Gn(s,a=>{const o=r||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,n,r){const s=lO(e);xr(r["before"+s],[],r),n[e](r),xr(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var hl=new M$t;class E$t{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,n,r,s){s=s||{};for(const i of e){const a=i.plugin,o=a[r],l=[n,s,i.options];if(xr(o,l,a)===!1&&s.cancelable)return!1}return!0}invalidate(){ar(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=gn(r.options&&r.options.plugins,{}),i=D$t(r);return s===!1&&!n?[]:P$t(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,a)=>i.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function D$t(t){const e={},n=[],r=Object.keys(hl.plugins.items);for(let i=0;i<r.length;i++)n.push(hl.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const a=s[i];n.indexOf(a)===-1&&(n.push(a),e[a.id]=!0)}return{plugins:n,localIds:e}}function R$t(t,e){return!e&&t===!1?null:t===!0?{}:t}function P$t(t,{plugins:e,localIds:n},r,s){const i=[],a=t.getContext();for(const o of e){const l=o.id,d=R$t(r[l],s);d!==null&&i.push({plugin:o,options:I$t(t.config,{plugin:o,local:n[l]},d,a)})}return i}function I$t(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(r,i);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function AD(t,e){const n=zr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function O$t(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function L$t(t,e){return t===e?"_index_":"_value_"}function Wq(t){if(t==="x"||t==="y"||t==="r")return t}function V$t(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function TD(t,...e){if(Wq(t))return t;for(const n of e){const r=n.axis||V$t(n.position)||t.length>1&&Wq(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Gq(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function N$t(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Gq(t,"x",n[0])||Gq(t,"y",n[0])}return{}}function j$t(t,e){const n=sh[t.type]||{scales:{}},r=e.scales||{},s=AD(t.type,e),i=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!Mn(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=TD(a,o,N$t(a,t),zr.scales[o.type]),d=L$t(l,s),c=n.scales||{};i[a]=w0(Object.create(null),[{axis:l},o,c[l],c[d]])}),t.data.datasets.forEach(a=>{const o=a.type||t.type,l=a.indexAxis||AD(o,e),c=(sh[o]||{}).scales||{};Object.keys(c).forEach(f=>{const p=O$t(f,l),h=a[p+"AxisID"]||p;i[h]=i[h]||Object.create(null),w0(i[h],[{axis:p},r[h],c[f]])})}),Object.keys(i).forEach(a=>{const o=i[a];w0(o,[zr.scales[o.type],zr.scale])}),i}function Joe(t){const e=t.options||(t.options={});e.plugins=gn(e.plugins,{}),e.scales=j$t(t,e)}function ele(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function F$t(t){return t=t||{},t.data=ele(t.data),Joe(t),t}const Yq=new Map,tle=new Set;function J_(t,e){let n=Yq.get(t);return n||(n=e(),Yq.set(t,n),tle.add(n)),n}const ay=(t,e,n)=>{const r=rh(e,n);r!==void 0&&t.add(r)};class B$t{constructor(e){this._config=F$t(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ele(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Joe(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return J_(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return J_(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return J_(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return J_(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,a=this._cachedScopes(e,r),o=a.get(n);if(o)return o;const l=new Set;n.forEach(c=>{e&&(l.add(e),c.forEach(f=>ay(l,e,f))),c.forEach(f=>ay(l,s,f)),c.forEach(f=>ay(l,sh[i]||{},f)),c.forEach(f=>ay(l,zr,f)),c.forEach(f=>ay(l,kD,f))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),tle.has(n)&&a.set(n,d),d}chartOptionScopes(){const{options:e,type:n}=this;return[e,sh[n]||{},zr.datasets[n]||{},{type:n},zr,kD]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:a,subPrefixes:o}=Kq(this._resolverCache,e,s);let l=a;if(U$t(a,n)){i.$shared=!1,r=zc(r)?r():r;const d=this.createResolver(e,r,o);l=Tg(a,r,d)}for(const d of n)i[d]=l[d];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Kq(this._resolverCache,e,r);return Mn(n)?Tg(i,n,void 0,s):i}}function Kq(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:gO(e,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},r.set(s,i)),i}const z$t=t=>Mn(t)&&Object.getOwnPropertyNames(t).some(e=>zc(t[e]));function U$t(t,e){const{isScriptable:n,isIndexable:r}=Voe(t);for(const s of e){const i=n(s),a=r(s),o=(a||i)&&t[s];if(i&&(zc(o)||z$t(o))||a&&as(o))return!0}return!1}var H$t="4.5.1";const q$t=["top","bottom","left","right","chartArea"];function Xq(t,e){return t==="top"||t==="bottom"||q$t.indexOf(t)===-1&&e==="x"}function Qq(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Zq(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),xr(n&&n.onComplete,[t],e)}function W$t(t){const e=t.chart,n=e.options.animation;xr(n&&n.onProgress,[t],e)}function nle(t){return bO()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Jw={},Jq=t=>{const e=nle(t);return Object.values(Jw).filter(n=>n.canvas===e).pop()};function G$t(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const a=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=a)}}}function Y$t(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}class ia{static register(...e){hl.add(...e),eW()}static unregister(...e){hl.remove(...e),eW()}constructor(e,n){const r=this.config=new B$t(n),s=nle(e),i=Jq(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||f$t(s)),this.platform.updateConfig(r);const o=this.platform.acquireContext(s,a.aspectRatio),l=o&&o.canvas,d=l&&l.height,c=l&&l.width;if(this.id=qTt(),this.ctx=o,this.canvas=l,this.width=c,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new E$t,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=d3t(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],Jw[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}bu.listen(this,"complete",Zq),bu.listen(this,"progress",W$t),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return ar(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return hl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():wq(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return bq(this.canvas,this.ctx),this}stop(){return bu.stop(this),this}resize(e,n){bu.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,n,i),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,wq(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),xr(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Gn(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const o=n[a],l=TD(a,o),d=l==="r",c=l==="x";return{options:o,dposition:d?"chartArea":c?"bottom":"left",dtype:d?"radialLinear":c?"category":"linear"}}))),Gn(i,a=>{const o=a.options,l=o.id,d=TD(l,o),c=gn(o.type,a.dtype);(o.position===void 0||Xq(o.position,d)!==Xq(a.dposition))&&(o.position=a.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===c)f=r[l];else{const p=hl.getScale(c);f=new p({id:l,type:c,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(o,e)}),Gn(s,(a,o)=>{a||delete r[o]}),Gn(r,a=>{Ya.configure(this,a,a.options),Ya.addBox(this,a)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Qq("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let a=this.getDatasetMeta(r);const o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=i.indexAxis||AD(o,this.options),a.order=i.order||0,a.index=r,a.label=""+i.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=hl.getController(o),{datasetElementType:d,dataElementType:c}=zr.datasets[o];Object.assign(l,{dataElementType:hl.getElement(c),datasetElementType:d&&hl.getElement(d)}),a.controller=new l(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Gn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,c=this.data.datasets.length;d<c;d++){const{controller:f}=this.getDatasetMeta(d),p=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Gn(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Qq("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Gn(this.scales,e=>{Ya.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!uq(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const a=r==="_removeElements"?-i:i;G$t(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(a=>a[0]===i).map((a,o)=>o+","+a.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!uq(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ya.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Gn(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,zc(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(bu.has(this)?this.attached&&!bu.running(this)&&bu.start(this):(this.draw(),Zq({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const a=n[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=h5t(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&pO(n,s),e.controller.draw(),s&&hO(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return q1(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=q5t.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Sh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,s);U1(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(i,{visible:r}),this.update(o=>o.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),bu.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),bq(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Jw[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,a)=>{n.addEventListener(this,i,a),e[i]=a},s=(i,a,o)=>{i.offsetX=a,i.offsetY=o,this._eventHandler(i)};Gn(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,d)=>{n.addEventListener(this,l,d),e[l]=d},s=(l,d)=>{e[l]&&(n.removeEventListener(this,l,d),delete e[l])},i=(l,d)=>{this.canvas&&this.resize(l,d)};let a;const o=()=>{s("attach",o),this.attached=!0,this.resize(),r("resize",i),r("detach",a)};a=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",o)},n.isAttached(this.canvas)?o():a()}unbindEvents(){Gn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Gn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,a,o,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:a})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[a],index:a}});!hS(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,d)=>l.filter(c=>!d.some(f=>c.datasetIndex===f.datasetIndex&&c.index===f.index)),a=i(n,e),o=r?e:i(e,n);a.length&&this.updateHoverStyle(a,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,a=n,o=this._getActiveElements(e,s,r,a),l=QTt(e),d=Y$t(e,this._lastEvent,r,l);r&&(this._lastEvent=null,xr(i.onHover,[e,o,this],this),l&&xr(i.onClick,[e,o,this],this));const c=!hS(o,s);return(c||n)&&(this._active=o,this._updateHoverStyles(o,s,n)),this._lastEvent=d,c}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}}ft(ia,"defaults",zr),ft(ia,"instances",Jw),ft(ia,"overrides",sh),ft(ia,"registry",hl),ft(ia,"version",H$t),ft(ia,"getChart",Jq);function eW(){return Gn(ia.instances,t=>t._plugins.invalidate())}function K$t(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:a,innerRadius:o,options:l}=e,{borderWidth:d,borderJoinStyle:c}=l,f=Math.min(d/a,ko(r-n));if(t.beginPath(),t.arc(s,i,a-d/2,r+f/2,n-f/2),o>0){const p=Math.min(d/o,ko(r-n));t.arc(s,i,o+d/2,n-p/2,r+p/2,!0)}else{const p=Math.min(d/2,a*ko(r-n));if(c==="round")t.arc(s,i,p,n-Yn/2,r+Yn/2,!0);else if(c==="bevel"){const h=2*p*p,m=-h*Math.cos(n+Yn/2)+s,g=-h*Math.sin(n+Yn/2)+i,y=h*Math.cos(r+Yn/2)+s,x=h*Math.sin(r+Yn/2)+i;t.lineTo(m,g),t.lineTo(y,x)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function X$t(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:o,innerRadius:l}=e;let d=s/o;t.beginPath(),t.arc(i,a,o,r-d,n+d),l>s?(d=s/l,t.arc(i,a,l,n+d,r-d,!0)):t.arc(i,a,s,n+ds,r-ds),t.closePath(),t.clip()}function Q$t(t){return mO(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Z$t(t,e,n,r){const s=Q$t(t.options.borderRadius),i=(n-e)/2,a=Math.min(i,r*e/2),o=l=>{const d=(n-Math.min(i,l))*r/2;return Gi(l,0,Math.min(i,d))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:Gi(s.innerStart,0,a),innerEnd:Gi(s.innerEnd,0,a)}}function um(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function _S(t,e,n,r,s,i){const{x:a,y:o,startAngle:l,pixelMargin:d,innerRadius:c}=e,f=Math.max(e.outerRadius+r+n-d,0),p=c>0?c+r+n+d:0;let h=0;const m=s-l;if(r){const N=c>0?c-r:0,q=f>0?f-r:0,V=(N+q)/2,O=V!==0?m*V/(V+r):m;h=(m-O)/2}const g=Math.max(.001,m*f-n/Yn)/f,y=(m-g)/2,x=l+y+h,_=s-y-h,{outerStart:k,outerEnd:w,innerStart:S,innerEnd:C}=Z$t(e,p,f,_-x),A=f-k,M=f-w,E=x+k/A,P=_-w/M,I=p+S,F=p+C,L=x+S/I,z=_-C/F;if(t.beginPath(),i){const N=(E+P)/2;if(t.arc(a,o,f,E,N),t.arc(a,o,f,N,P),w>0){const X=um(M,P,a,o);t.arc(X.x,X.y,w,P,_+ds)}const q=um(F,_,a,o);if(t.lineTo(q.x,q.y),C>0){const X=um(F,z,a,o);t.arc(X.x,X.y,C,_+ds,z+Math.PI)}const V=(_-C/p+(x+S/p))/2;if(t.arc(a,o,p,_-C/p,V,!0),t.arc(a,o,p,V,x+S/p,!0),S>0){const X=um(I,L,a,o);t.arc(X.x,X.y,S,L+Math.PI,x-ds)}const O=um(A,x,a,o);if(t.lineTo(O.x,O.y),k>0){const X=um(A,E,a,o);t.arc(X.x,X.y,k,x-ds,E)}}else{t.moveTo(a,o);const N=Math.cos(E)*f+a,q=Math.sin(E)*f+o;t.lineTo(N,q);const V=Math.cos(P)*f+a,O=Math.sin(P)*f+o;t.lineTo(V,O)}t.closePath()}function J$t(t,e,n,r,s){const{fullCircles:i,startAngle:a,circumference:o}=e;let l=e.endAngle;if(i){_S(t,e,n,r,l,s);for(let d=0;d<i;++d)t.fill();isNaN(o)||(l=a+(o%Lr||Lr))}return _S(t,e,n,r,l,s),t.fill(),l}function eMt(t,e,n,r,s){const{fullCircles:i,startAngle:a,circumference:o,options:l}=e,{borderWidth:d,borderJoinStyle:c,borderDash:f,borderDashOffset:p,borderRadius:h}=l,m=l.borderAlign==="inner";if(!d)return;t.setLineDash(f||[]),t.lineDashOffset=p,m?(t.lineWidth=d*2,t.lineJoin=c||"round"):(t.lineWidth=d,t.lineJoin=c||"bevel");let g=e.endAngle;if(i){_S(t,e,n,r,g,s);for(let y=0;y<i;++y)t.stroke();isNaN(o)||(g=a+(o%Lr||Lr))}m&&X$t(t,e,g),l.selfJoin&&g-a>=Yn&&h===0&&c!=="miter"&&K$t(t,e,g),i||(_S(t,e,n,r,g,s),t.stroke())}class My extends xd{constructor(n){super();ft(this,"circumference");ft(this,"endAngle");ft(this,"fullCircles");ft(this,"innerRadius");ft(this,"outerRadius");ft(this,"pixelMargin");ft(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:a,distance:o}=Moe(i,{x:n,y:r}),{startAngle:l,endAngle:d,innerRadius:c,outerRadius:f,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),h=(this.options.spacing+this.options.borderWidth)/2,m=gn(p,d-l),g=H1(a,l,d)&&l!==d,y=m>=Lr||g,x=hc(o,c+h,f+h);return y&&x}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:d,spacing:c}=this.options,f=(i+a)/2,p=(o+l+c+d)/2;return{x:r+Math.cos(f)*p,y:s+Math.sin(f)*p}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,a=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>Lr?Math.floor(s/Lr):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const d=1-Math.sin(Math.min(Yn,s||0)),c=i*d;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,J$t(n,this,c,a,o),eMt(n,this,c,a,o),n.restore()}}ft(My,"id","arc"),ft(My,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ft(My,"defaultRoutes",{backgroundColor:"backgroundColor"}),ft(My,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function rle(t,e,n=e){t.lineCap=gn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(gn(n.borderDash,e.borderDash)),t.lineDashOffset=gn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=gn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=gn(n.borderWidth,e.borderWidth),t.strokeStyle=gn(n.borderColor,e.borderColor)}function tMt(t,e,n){t.lineTo(n.x,n.y)}function nMt(t){return t.stepped?w3t:t.tension||t.cubicInterpolationMode==="monotone"?k3t:tMt}function sle(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:a,end:o}=e,l=Math.max(s,a),d=Math.min(i,o),c=s<a&&i<a||s>o&&i>o;return{count:r,start:l,loop:e.loop,ilen:d<l&&!c?r+d-l:d-l}}function rMt(t,e,n,r){const{points:s,options:i}=e,{count:a,start:o,loop:l,ilen:d}=sle(s,n,r),c=nMt(i);let{move:f=!0,reverse:p}=r||{},h,m,g;for(h=0;h<=d;++h)m=s[(o+(p?d-h:h))%a],!m.skip&&(f?(t.moveTo(m.x,m.y),f=!1):c(t,g,m,p,i.stepped),g=m);return l&&(m=s[(o+(p?d:0))%a],c(t,g,m,p,i.stepped)),!!l}function sMt(t,e,n,r){const s=e.points,{count:i,start:a,ilen:o}=sle(s,n,r),{move:l=!0,reverse:d}=r||{};let c=0,f=0,p,h,m,g,y,x;const _=w=>(a+(d?o-w:w))%i,k=()=>{g!==y&&(t.lineTo(c,y),t.lineTo(c,g),t.lineTo(c,x))};for(l&&(h=s[_(0)],t.moveTo(h.x,h.y)),p=0;p<=o;++p){if(h=s[_(p)],h.skip)continue;const w=h.x,S=h.y,C=w|0;C===m?(S<g?g=S:S>y&&(y=S),c=(f*c+w)/++f):(k(),t.lineTo(w,S),m=C,f=0,g=y=S),x=S}k()}function $D(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?sMt:rMt}function iMt(t){return t.stepped?t5t:t.tension||t.cubicInterpolationMode==="monotone"?n5t:Hf}function aMt(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),rle(t,e.options),t.stroke(s)}function oMt(t,e,n,r){const{segments:s,options:i}=e,a=$D(e);for(const o of s)rle(t,i,o.style),t.beginPath(),a(t,e,o,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const lMt=typeof Path2D=="function";function uMt(t,e,n,r){lMt&&!e.options.segment?aMt(t,e,n,r):oMt(t,e,n,r)}class Ey extends xd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;G3t(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=d5t(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,a=o5t(this,{property:n,start:s,end:s});if(!a.length)return;const o=[],l=iMt(r);let d,c;for(d=0,c=a.length;d<c;++d){const{start:f,end:p}=a[d],h=i[f],m=i[p];if(h===m){o.push(h);continue}const g=Math.abs((s-h[n])/(m[n]-h[n])),y=l(h,m,g,r.stepped);y[n]=e[n],o.push(y)}return o.length===1?o[0]:o}pathSegment(e,n,r){return $D(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=$D(this);let a=this._loop;n=n||0,r=r||this.points.length-n;for(const o of s)a&=i(e,this,o,{start:n,end:n+r-1});return!!a}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),uMt(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ft(Ey,"id","line"),ft(Ey,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ft(Ey,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ft(Ey,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function tW(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class e2 extends xd{constructor(n){super();ft(this,"parsed");ft(this,"skip");ft(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:a,y:o}=this.getProps(["x","y"],s);return Math.pow(n-a,2)+Math.pow(r-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return tW(this,n,"x",r)}inYRange(n,r){return tW(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!q1(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,SD(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ft(e2,"id","point"),ft(e2,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ft(e2,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ile(t,e){const{x:n,y:r,base:s,width:i,height:a}=t.getProps(["x","y","base","width","height"],e);let o,l,d,c,f;return t.horizontal?(f=a/2,o=Math.min(n,s),l=Math.max(n,s),d=r-f,c=r+f):(f=i/2,o=n-f,l=n+f,d=Math.min(r,s),c=Math.max(r,s)),{left:o,top:d,right:l,bottom:c}}function gc(t,e,n,r){return t?0:Gi(e,n,r)}function dMt(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=Loe(r);return{t:gc(s.top,i.top,0,n),r:gc(s.right,i.right,0,e),b:gc(s.bottom,i.bottom,0,n),l:gc(s.left,i.left,0,e)}}function cMt(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=Gm(s),a=Math.min(e,n),o=t.borderSkipped,l=r||Mn(s);return{topLeft:gc(!l||o.top||o.left,i.topLeft,0,a),topRight:gc(!l||o.top||o.right,i.topRight,0,a),bottomLeft:gc(!l||o.bottom||o.left,i.bottomLeft,0,a),bottomRight:gc(!l||o.bottom||o.right,i.bottomRight,0,a)}}function fMt(t){const e=ile(t),n=e.right-e.left,r=e.bottom-e.top,s=dMt(t,n/2,r/2),i=cMt(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function N5(t,e,n,r){const s=e===null,i=n===null,o=t&&!(s&&i)&&ile(t,r);return o&&(s||hc(e,o.left,o.right))&&(i||hc(n,o.top,o.bottom))}function pMt(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function hMt(t,e){t.rect(e.x,e.y,e.w,e.h)}function j5(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,a=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+a,radius:t.radius}}class A0 extends xd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:a}=fMt(this),o=pMt(a.radius)?yS:hMt;e.save(),(a.w!==i.w||a.h!==i.h)&&(e.beginPath(),o(e,j5(a,n,i)),e.clip(),o(e,j5(i,-n,a)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),o(e,j5(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return N5(this,e,n,r)}inXRange(e,n){return N5(this,e,null,n)}inYRange(e,n){return N5(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ft(A0,"id","bar"),ft(A0,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ft(A0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const nW=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},mMt=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class rW extends xd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=xr(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=ni(r.font),i=s.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=nW(r,i);let d,c;n.font=s.string,this.isHorizontal()?(d=this.maxWidth,c=this._fitRows(a,i,o,l)+10):(c=this.maxHeight,d=this._fitCols(a,s,o,l)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],c=s+o;let f=e;i.textAlign="left",i.textBaseline="middle";let p=-1,h=-c;return this.legendItems.forEach((m,g)=>{const y=r+n/2+i.measureText(m.text).width;(g===0||d[d.length-1]+y+2*o>a)&&(f+=c,d[d.length-(g>0?0:1)]=0,h+=c,p++),l[g]={left:0,top:h,row:p,width:y,height:s},d[d.length-1]+=y+o}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],c=a-e;let f=o,p=0,h=0,m=0,g=0;return this.legendItems.forEach((y,x)=>{const{itemWidth:_,itemHeight:k}=gMt(r,n,i,y,s);x>0&&h+k+2*o>c&&(f+=p+o,d.push({width:p,height:h}),m+=p+o,g++,p=h=0),l[x]={left:m,top:h,col:g,width:_,height:k},p=Math.max(p,_),h+=k+o}),f+=p,d.push({width:p,height:h}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,a=Ym(i,this.left,this.width);if(this.isHorizontal()){let o=0,l=Gs(r,this.left+s,this.right-this.lineWidths[o]);for(const d of n)o!==d.row&&(o=d.row,l=Gs(r,this.left+s,this.right-this.lineWidths[o])),d.top+=this.top+e+s,d.left=a.leftForLtr(a.x(l),d.width),l+=d.width+s}else{let o=0,l=Gs(r,this.top+e+s,this.bottom-this.columnSizes[o].height);for(const d of n)d.col!==o&&(o=d.col,l=Gs(r,this.top+e+s,this.bottom-this.columnSizes[o].height)),d.top=l,d.left+=this.left+s,d.left=a.leftForLtr(a.x(d.left),d.width),l+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;pO(e,this),this._draw(),hO(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:a}=e,o=zr.color,l=Ym(e.rtl,this.left,this.width),d=ni(a.font),{padding:c}=a,f=d.size,p=f/2;let h;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:m,boxHeight:g,itemHeight:y}=nW(a,f),x=function(C,A,M){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;s.save();const E=gn(M.lineWidth,1);if(s.fillStyle=gn(M.fillStyle,o),s.lineCap=gn(M.lineCap,"butt"),s.lineDashOffset=gn(M.lineDashOffset,0),s.lineJoin=gn(M.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=gn(M.strokeStyle,o),s.setLineDash(gn(M.lineDash,[])),a.usePointStyle){const P={radius:g*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:E},I=l.xPlus(C,m/2),F=A+p;Ooe(s,P,I,F,a.pointStyleWidth&&m)}else{const P=A+Math.max((f-g)/2,0),I=l.leftForLtr(C,m),F=Gm(M.borderRadius);s.beginPath(),Object.values(F).some(L=>L!==0)?yS(s,{x:I,y:P,w:m,h:g,radius:F}):s.rect(I,P,m,g),s.fill(),E!==0&&s.stroke()}s.restore()},_=function(C,A,M){W1(s,M.text,C,A+y/2,d,{strikethrough:M.hidden,textAlign:l.textAlign(M.textAlign)})},k=this.isHorizontal(),w=this._computeTitleHeight();k?h={x:Gs(i,this.left+c,this.right-r[0]),y:this.top+c+w,line:0}:h={x:this.left+c,y:Gs(i,this.top+w+c,this.bottom-n[0].height),line:0},zoe(this.ctx,e.textDirection);const S=y+c;this.legendItems.forEach((C,A)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;const M=s.measureText(C.text).width,E=l.textAlign(C.textAlign||(C.textAlign=a.textAlign)),P=m+p+M;let I=h.x,F=h.y;l.setWidth(this.width),k?A>0&&I+P+c>this.right&&(F=h.y+=S,h.line++,I=h.x=Gs(i,this.left+c,this.right-r[h.line])):A>0&&F+S>this.bottom&&(I=h.x=I+n[h.line].width+c,h.line++,F=h.y=Gs(i,this.top+w+c,this.bottom-n[h.line].height));const L=l.x(I);if(x(L,F,C),I=c3t(E,I+m+p,k?I+P:this.right,e.rtl),_(l.x(I),F,C),k)h.x+=P+c;else if(typeof C.text!="string"){const z=d.lineHeight;h.y+=ale(C,z)+c}else h.y+=S}),Uoe(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ni(n.font),s=uo(n.padding);if(!n.display)return;const i=Ym(e.rtl,this.left,this.width),a=this.ctx,o=n.position,l=r.size/2,d=s.top+l;let c,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),c=this.top+d,f=Gs(e.align,f,this.right-p);else{const m=this.columnSizes.reduce((g,y)=>Math.max(g,y.height),0);c=d+Gs(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const h=Gs(o,f,f+p);a.textAlign=i.textAlign(dO(o)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,W1(a,n.text,h,c,r)}_computeTitleHeight(){const e=this.options.title,n=ni(e.font),r=uo(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(hc(e,this.left,this.right)&&hc(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],hc(e,s.left,s.left+s.width)&&hc(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!bMt(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=mMt(s,r);s&&!i&&xr(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&xr(n.onHover,[e,r,this],this)}else r&&xr(n.onClick,[e,r,this],this)}}function gMt(t,e,n,r,s){const i=vMt(r,t,e,n),a=yMt(s,r,e.lineHeight);return{itemWidth:i,itemHeight:a}}function vMt(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,a)=>i.length>a.length?i:a)),e+n.size/2+r.measureText(s).width}function yMt(t,e,n){let r=t;return typeof e.text!="string"&&(r=ale(e,n)),r}function ale(t,e){const n=t.text?t.text.length:0;return e*n}function bMt(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var ole={id:"legend",_element:rW,start(t,e,n){const r=t.legend=new rW({ctx:t.ctx,options:n,chart:t});Ya.configure(t,r,n),Ya.addBox(t,r)},stop(t){Ya.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Ya.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(n?0:void 0),c=uo(d.borderWidth);return{text:e[l.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:a&&(o||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class lle extends xd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=as(r.text)?r.text.length:1;this._padding=uo(r.padding);const i=s*ni(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:a}=this,o=a.align;let l=0,d,c,f;return this.isHorizontal()?(c=Gs(o,r,i),f=n+e,d=i-r):(a.position==="left"?(c=r+e,f=Gs(o,s,n),l=Yn*-.5):(c=i-e,f=Gs(o,n,s),l=Yn*.5),d=s-n),{titleX:c,titleY:f,maxWidth:d,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ni(n.font),i=r.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:d}=this._drawArgs(i);W1(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:d,textAlign:dO(n.align),textBaseline:"middle",translation:[a,o]})}}function xMt(t,e){const n=new lle({ctx:t.ctx,options:e,chart:t});Ya.configure(t,n,e),Ya.addBox(t,n),t.titleBlock=n}var ule={id:"title",_element:lle,start(t,e,n){xMt(t,n)},stop(t){const e=t.titleBlock;Ya.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Ya.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Dy={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,a,o;for(i=0,a=t.length;i<a;++i){const l=t[i].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),c=_D(e,d);c<s&&(s=c,o=l)}}if(o){const l=o.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function ol(t,e){return e&&(as(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xu(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function _Mt(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:t,label:a,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function sW(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:a,boxHeight:o}=e,l=ni(e.bodyFont),d=ni(e.titleFont),c=ni(e.footerFont),f=i.length,p=s.length,h=r.length,m=uo(e.padding);let g=m.height,y=0,x=r.reduce((w,S)=>w+S.before.length+S.lines.length+S.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,f&&(g+=f*d.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),x){const w=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;g+=h*w+(x-h)*l.lineHeight+(x-1)*e.bodySpacing}p&&(g+=e.footerMarginTop+p*c.lineHeight+(p-1)*e.footerSpacing);let _=0;const k=function(w){y=Math.max(y,n.measureText(w).width+_)};return n.save(),n.font=d.string,Gn(t.title,k),n.font=l.string,Gn(t.beforeBody.concat(t.afterBody),k),_=e.displayColors?a+2+e.boxPadding:0,Gn(r,w=>{Gn(w.before,k),Gn(w.lines,k),Gn(w.after,k)}),_=0,n.font=c.string,Gn(t.footer,k),n.restore(),y+=m.width,{width:y,height:g}}function wMt(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function kMt(t,e,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;if(t==="left"&&s+i+a>e.width||t==="right"&&s-i-a<0)return!0}function SMt(t,e,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:o,right:l}}=t;let d="center";return r==="center"?d=s<=(o+l)/2?"left":"right":s<=i/2?d="left":s>=a-i/2&&(d="right"),kMt(d,t,e,n)&&(d="center"),d}function iW(t,e,n){const r=n.yAlign||e.yAlign||wMt(t,n);return{xAlign:n.xAlign||e.xAlign||SMt(t,e,n,r),yAlign:r}}function CMt(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function AMt(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function aW(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=t,{xAlign:o,yAlign:l}=n,d=s+i,{topLeft:c,topRight:f,bottomLeft:p,bottomRight:h}=Gm(a);let m=CMt(e,o);const g=AMt(e,l,d);return l==="center"?o==="left"?m+=d:o==="right"&&(m-=d):o==="left"?m-=Math.max(c,p)+s:o==="right"&&(m+=Math.max(f,h)+s),{x:Gi(m,0,r.width-e.width),y:Gi(g,0,r.height-e.height)}}function ew(t,e,n){const r=uo(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function oW(t){return ol([],xu(t))}function TMt(t,e,n){return Sh(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function lW(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const dle={beforeTitle:hu,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:hu,beforeBody:hu,beforeLabel:hu,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ar(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:hu,afterBody:hu,beforeFooter:hu,footer:hu,afterFooter:hu};function ji(t,e,n,r){const s=t[e].call(n,r);return typeof s=="undefined"?dle[e].call(n,r):s}class MD extends xd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new qoe(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=TMt(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=ji(r,"beforeTitle",this,e),i=ji(r,"title",this,e),a=ji(r,"afterTitle",this,e);let o=[];return o=ol(o,xu(s)),o=ol(o,xu(i)),o=ol(o,xu(a)),o}getBeforeBody(e,n){return oW(ji(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Gn(e,i=>{const a={before:[],lines:[],after:[]},o=lW(r,i);ol(a.before,xu(ji(o,"beforeLabel",this,i))),ol(a.lines,ji(o,"label",this,i)),ol(a.after,xu(ji(o,"afterLabel",this,i))),s.push(a)}),s}getAfterBody(e,n){return oW(ji(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=ji(r,"beforeFooter",this,e),i=ji(r,"footer",this,e),a=ji(r,"afterFooter",this,e);let o=[];return o=ol(o,xu(s)),o=ol(o,xu(i)),o=ol(o,xu(a)),o}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],a=[];let o=[],l,d;for(l=0,d=n.length;l<d;++l)o.push(_Mt(this.chart,n[l]));return e.filter&&(o=o.filter((c,f,p)=>e.filter(c,f,p,r))),e.itemSort&&(o=o.sort((c,f)=>e.itemSort(c,f,r))),Gn(o,c=>{const f=lW(e.callbacks,c);s.push(ji(f,"labelColor",this,c)),i.push(ji(f,"labelPointStyle",this,c)),a.push(ji(f,"labelTextColor",this,c))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=o,o}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const o=Dy[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=sW(this,r),d=Object.assign({},o,l),c=iW(this.chart,r,d),f=aW(r,d,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:d,bottomLeft:c,bottomRight:f}=Gm(o),{x:p,y:h}=e,{width:m,height:g}=n;let y,x,_,k,w,S;return i==="center"?(w=h+g/2,s==="left"?(y=p,x=y-a,k=w+a,S=w-a):(y=p+m,x=y+a,k=w-a,S=w+a),_=y):(s==="left"?x=p+Math.max(l,c)+a:s==="right"?x=p+m-Math.max(d,f)-a:x=this.caretX,i==="top"?(k=h,w=k-a,y=x-a,_=x+a):(k=h+g,w=k+a,y=x+a,_=x-a),S=k),{x1:y,x2:x,x3:_,y1:k,y2:w,y3:S}}drawTitle(e,n,r){const s=this.title,i=s.length;let a,o,l;if(i){const d=Ym(r.rtl,this.x,this.width);for(e.x=ew(this,r.titleAlign,r),n.textAlign=d.textAlign(r.titleAlign),n.textBaseline="middle",a=ni(r.titleFont),o=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,l=0;l<i;++l)n.fillText(s[l],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===i&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,n,r,s,i){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:d}=i,c=ni(i.bodyFont),f=ew(this,"left",i),p=s.x(f),h=l<c.lineHeight?(c.lineHeight-l)/2:0,m=n.y+h;if(i.usePointStyle){const g={radius:Math.min(d,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},y=s.leftForLtr(p,d)+d/2,x=m+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,SD(e,g,y,x),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,SD(e,g,y,x)}else{e.lineWidth=Mn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const g=s.leftForLtr(p,d),y=s.leftForLtr(s.xPlus(p,1),d-2),x=Gm(a.borderRadius);Object.values(x).some(_=>_!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,yS(e,{x:g,y:m,w:d,h:l,radius:x}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),yS(e,{x:y,y:m+1,w:d-2,h:l-2,radius:x}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(g,m,d,l),e.strokeRect(g,m,d,l),e.fillStyle=a.backgroundColor,e.fillRect(y,m+1,d-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:d,boxPadding:c}=r,f=ni(r.bodyFont);let p=f.lineHeight,h=0;const m=Ym(r.rtl,this.x,this.width),g=function(M){n.fillText(M,m.x(e.x+h),e.y+p/2),e.y+=p+i},y=m.textAlign(a);let x,_,k,w,S,C,A;for(n.textAlign=a,n.textBaseline="middle",n.font=f.string,e.x=ew(this,y,r),n.fillStyle=r.bodyColor,Gn(this.beforeBody,g),h=o&&y!=="right"?a==="center"?d/2+c:d+2+c:0,w=0,C=s.length;w<C;++w){for(x=s[w],_=this.labelTextColors[w],n.fillStyle=_,Gn(x.before,g),k=x.lines,o&&k.length&&(this._drawColorBox(n,e,w,m,r),p=Math.max(f.lineHeight,l)),S=0,A=k.length;S<A;++S)g(k[S]),p=f.lineHeight;Gn(x.after,g)}h=0,p=f.lineHeight,Gn(this.afterBody,g),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let a,o;if(i){const l=Ym(r.rtl,this.x,this.width);for(e.x=ew(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",a=ni(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,o=0;o<i;++o)n.fillText(s[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:a}=this,{x:o,y:l}=e,{width:d,height:c}=r,{topLeft:f,topRight:p,bottomLeft:h,bottomRight:m}=Gm(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(o+f,l),a==="top"&&this.drawCaret(e,n,r,s),n.lineTo(o+d-p,l),n.quadraticCurveTo(o+d,l,o+d,l+p),a==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(o+d,l+c-m),n.quadraticCurveTo(o+d,l+c,o+d-m,l+c),a==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(o+h,l+c),n.quadraticCurveTo(o,l+c,o,l+c-h),a==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(o,l+f),n.quadraticCurveTo(o,l,o+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const a=Dy[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=sW(this,e),l=Object.assign({},a,this._size),d=iW(n,e,l),c=aW(e,l,d,n);(s._to!==c.x||i._to!==c.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=uo(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),zoe(e,n.textDirection),i.y+=a.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Uoe(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:o,index:l})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[l],index:l}}),i=!hS(r,s),a=this._positionChanged(s,n);(i||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],a=this._getActiveElements(e,i,n,r),o=this._positionChanged(a,e),l=n||!hS(a,i)||o;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&a.reverse(),a}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,a=Dy[i.position].call(this,e,n);return a!==!1&&(r!==a.x||s!==a.y)}}ft(MD,"positioners",Dy);var cle={id:"tooltip",_element:MD,positioners:Dy,afterInit(t,e,n){n&&(t.tooltip=new MD({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",ze(ge({},n),{cancelable:!0}))===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:dle},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const $Mt=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function MMt(t,e,n,r){const s=t.indexOf(e);if(s===-1)return $Mt(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const EMt=(t,e)=>t===null?null:Gi(Math.round(t),0,e);function uW(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class wS extends Jg{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ar(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:MMt(r,e,gn(n,e),this._addedLabels),EMt(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=n;a++)s.push({value:a});return s}getLabelForValue(e){return uW.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ft(wS,"id","category"),ft(wS,"defaults",{ticks:{callback:uW}});function DMt(t,e){const n=[],{bounds:s,step:i,min:a,max:o,precision:l,count:d,maxTicks:c,maxDigits:f,includeBounds:p}=t,h=i||1,m=c-1,{min:g,max:y}=e,x=!ar(a),_=!ar(o),k=!ar(d),w=(y-g)/(f+1);let S=cq((y-g)/m/h)*h,C,A,M,E;if(S<1e-14&&!x&&!_)return[{value:g},{value:y}];E=Math.ceil(y/S)-Math.floor(g/S),E>m&&(S=cq(E*S/m/h)*h),ar(l)||(C=Math.pow(10,l),S=Math.ceil(S*C)/C),s==="ticks"?(A=Math.floor(g/S)*S,M=Math.ceil(y/S)*S):(A=g,M=y),x&&_&&i&&n3t((o-a)/i,S/1e3)?(E=Math.round(Math.min((o-a)/S,c)),S=(o-a)/E,A=a,M=o):k?(A=x?a:A,M=_?o:M,E=d-1,S=(M-A)/E):(E=(M-A)/S,k0(E,Math.round(E),S/1e3)?E=Math.round(E):E=Math.ceil(E));const P=Math.max(fq(S),fq(A));C=Math.pow(10,ar(l)?P:l),A=Math.round(A*C)/C,M=Math.round(M*C)/C;let I=0;for(x&&(p&&A!==a?(n.push({value:a}),A<a&&I++,k0(Math.round((A+I*S)*C)/C,a,dW(a,w,t))&&I++):A<a&&I++);I<E;++I){const F=Math.round((A+I*S)*C)/C;if(_&&F>o)break;n.push({value:F})}return _&&p&&M!==o?n.length&&k0(n[n.length-1].value,o,dW(o,w,t))?n[n.length-1].value=o:n.push({value:o}):(!_||M===o)&&n.push({value:M}),n}function dW(t,e,{horizontal:n,minRotation:r}){const s=Fu(r),i=(n?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class RMt extends Jg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ar(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const a=l=>s=n?s:l,o=l=>i=r?i:l;if(e){const l=Il(s),d=Il(i);l<0&&d<0?o(0):l>0&&d>0&&a(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);o(i+l),e||a(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,a=DMt(s,i);return e.bounds==="ticks"&&r3t(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return fO(e,this.chart.options.locale,this.options.ticks.format)}}class kS extends RMt{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=lo(e)?e:0,this.max=lo(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Fu(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ft(kS,"id","linear"),ft(kS,"defaults",{ticks:{callback:Ioe.formatters.numeric}});const EA={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wi=Object.keys(EA);function cW(t,e){return t-e}function fW(t,e){if(ar(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let a=e;return typeof r=="function"&&(a=r(a)),lo(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(s&&(a=s==="week"&&(vS(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,s)),+a)}function pW(t,e,n,r){const s=Wi.length;for(let i=Wi.indexOf(t);i<s-1;++i){const a=EA[Wi[i]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-e)/(o*a.size))<=r)return Wi[i]}return Wi[s-1]}function PMt(t,e,n,r,s){for(let i=Wi.length-1;i>=Wi.indexOf(n);i--){const a=Wi[i];if(EA[a].common&&t._adapter.diff(s,r,a)>=e-1)return a}return Wi[n?Wi.indexOf(n):0]}function IMt(t){for(let e=Wi.indexOf(t)+1,n=Wi.length;e<n;++e)if(EA[Wi[e]].common)return Wi[e]}function hW(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=uO(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function OMt(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),a=e[e.length-1].value;let o,l;for(o=i;o<=a;o=+s.add(o,1,r))l=n[o],l>=0&&(e[l].major=!0);return e}function mW(t,e,n){const r=[],s={},i=e.length;let a,o;for(a=0;a<i;++a)o=e[a],s[o]=a,r.push({value:o,major:!1});return i===0||!n?r:OMt(t,r,s,n)}class SS extends Jg{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new F5t._date(e.adapters.date);s.init(n),w0(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:fW(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:a,maxDefined:o}=this.getUserBounds();function l(d){!a&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!o&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=lo(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=lo(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,a=this.max,o=l3t(s,i,a);return this._unit=n.unit||(r.autoSkip?pW(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):PMt(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:IMt(this._unit),this.initOffsets(s),e.reverse&&o.reverse(),mW(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;n=Gi(n,0,a),r=Gi(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,a=i.unit||pW(i.minUnit,n,r,this._getLabelCapacity(n)),o=gn(s.ticks.stepSize,1),l=a==="week"?i.isoWeekday:!1,d=vS(l)||l===!0,c={};let f=n,p,h;if(d&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,d?"day":a),e.diff(r,n,a)>1e5*o)throw new Error(n+" and "+r+" are too far apart with stepSize of "+o+" "+a);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(p=f,h=0;p<r;p=+e.add(p,o,a),h++)hW(c,p,m);return(p===r||s.bounds==="ticks"||h===1)&&hW(c,p,m),Object.keys(c).sort(cW).map(g=>+g)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,a=n||s[i];return this._adapter.format(e,a)}_tickFormatFunction(e,n,r,s){const i=this.options,a=i.ticks.callback;if(a)return xr(a,[e,n,r],this);const o=i.time.displayFormats,l=this._unit,d=this._majorUnit,c=l&&o[l],f=d&&o[d],p=r[n],h=d&&f&&p&&p.major;return this._adapter.format(e,s||(h?f:c))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Fu(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),a=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:r*i+o*a,h:r*a+o*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,mW(this,[e],this._majorUnit),s),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(fW(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Doe(e.sort(cW))}}ft(SS,"id","time"),ft(SS,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function tw(t,e,n){let r=0,s=t.length-1,i,a,o,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=wD(t,"pos",e)),{pos:i,time:o}=t[r],{pos:a,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=wD(t,"time",e)),{time:i,pos:o}=t[r],{time:a,pos:l}=t[s]);const d=a-i;return d?o+(l-o)*(e-i)/d:o}class gW extends SS{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=tw(n,this.min),this._tableRange=tw(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let a,o,l,d,c;for(a=0,o=e.length;a<o;++a)d=e[a],d>=n&&d<=r&&s.push(d);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,o=s.length;a<o;++a)c=s[a+1],l=s[a-1],d=s[a],Math.round((c+l)/2)!==d&&i.push({time:d,pos:a/(o-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(tw(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return tw(this._table,r*this._tableRange+this._minPos,!0)}}ft(gW,"id","timeseries"),ft(gW,"defaults",SS.defaults);const LMt={class:"space-y-6"},VMt={class:"flex items-center justify-between"},NMt={class:"flex items-center space-x-3"},jMt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},FMt={class:"bg-white rounded-lg border border-gray-200 p-6"},BMt={class:"flex items-center justify-between"},zMt={class:"text-3xl font-bold text-gray-900"},UMt={class:"p-3 bg-blue-100 rounded-full"},HMt={class:"mt-4 flex items-center text-sm"},qMt={class:"bg-white rounded-lg border border-gray-200 p-6"},WMt={class:"flex items-center justify-between"},GMt={class:"text-3xl font-bold text-gray-900"},YMt={class:"p-3 bg-yellow-100 rounded-full"},KMt={class:"mt-4 flex items-center text-sm"},XMt={class:"bg-white rounded-lg border border-gray-200 p-6"},QMt={class:"flex items-center justify-between"},ZMt={class:"text-3xl font-bold text-gray-900"},JMt={class:"p-3 bg-green-100 rounded-full"},eEt={class:"mt-4 flex items-center text-sm"},tEt={class:"bg-white rounded-lg border border-gray-200 p-6"},nEt={class:"flex items-center justify-between"},rEt={class:"text-3xl font-bold text-gray-900"},sEt={class:"p-3 bg-red-100 rounded-full"},iEt={class:"mt-4 flex items-center text-sm"},aEt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},oEt={class:"bg-white rounded-lg border border-gray-200 p-6"},lEt={class:"flex items-center justify-between mb-4"},uEt={class:"h-64"},dEt={class:"bg-white rounded-lg border border-gray-200 p-6"},cEt={class:"flex items-center justify-between mb-4"},fEt={class:"h-64"},pEt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},hEt={class:"bg-white rounded-lg border border-gray-200"},mEt={class:"px-6 py-4 border-b border-gray-200"},gEt={class:"flex items-center justify-between"},vEt={class:"divide-y divide-gray-200"},yEt={class:"flex items-start space-x-3"},bEt={class:"flex-shrink-0"},xEt={class:"flex-1 min-w-0"},_Et={class:"text-sm font-medium text-gray-900"},wEt={class:"text-sm text-gray-500"},kEt={class:"text-xs text-gray-400 mt-1"},SEt={class:"bg-white rounded-lg border border-gray-200"},CEt={class:"px-6 py-4 border-b border-gray-200"},AEt={class:"flex items-center justify-between"},TEt={class:"divide-y divide-gray-200"},$Et={class:"flex items-start space-x-3"},MEt={class:"flex-1 min-w-0"},EEt={class:"text-sm font-medium text-gray-900"},DEt={class:"text-sm text-gray-500"},REt={class:"flex items-center space-x-2 mt-1"},PEt={class:"text-xs text-gray-400"},IEt={class:"bg-white rounded-lg border border-gray-200 p-6"},OEt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},LEt={__name:"Dashboard",setup(t){ia.register(My,cle,ole,wS,kS,A0,Qw,ule,CD),_n();const e=qo(),n=TA(),r=Q(!1),s=Q("month"),i=Q(null),a=Q(null),o=[{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Quarter",value:"quarter"},{label:"Year",value:"year"}],l=Z(()=>({activeEngagements:e.activeEngagements.length,openFindings:e.findings.filter(w=>w.finding_status==="Open").length,complianceScore:87,overallRisk:"Medium"})),d=Z(()=>{const w=e.engagements,S={Planning:0,"In Progress":0,Review:0,Completed:0};return w.forEach(C=>{const A=C.status;A==="planned"?S.Planning++:A==="in_progress"?S["In Progress"]++:A==="under_review"?S.Review++:A==="completed"&&S.Completed++}),{labels:Object.keys(S),datasets:[{data:Object.values(S),backgroundColor:["#3B82F6","#F59E0B","#8B5CF6","#10B981"],borderWidth:1}]}}),c=Z(()=>{const w=e.findings,S={Low:0,Medium:0,High:0,Critical:0};return w.forEach(C=>{const A=C.risk_rating;S.hasOwnProperty(A)&&S[A]++}),{labels:Object.keys(S),datasets:[{label:"Risk Count",data:Object.values(S),backgroundColor:["#10B981","#F59E0B","#EF4444","#7C2D12"],borderWidth:1}]}}),f=Z(()=>{const w=[];return e.engagements.slice(0,2).forEach(S=>{w.push({id:`engagement-${S.name}`,type:"engagement",title:"Audit engagement updated",description:`${S.engagement_title}`,timestamp:new Date(S.modified)})}),e.findings.slice(0,2).forEach(S=>{w.push({id:`finding-${S.name}`,type:"finding",title:"New finding reported",description:`${S.finding_title}`,timestamp:new Date(S.creation)})}),w.sort((S,C)=>C.timestamp-S.timestamp).slice(0,5)}),p=Z(()=>{const w=[];return e.findings.filter(S=>S.target_completion_date).sort((S,C)=>new Date(S.target_completion_date)-new Date(C.target_completion_date)).slice(0,3).forEach(S=>{w.push({id:`finding-${S.name}`,title:`Review finding: ${S.finding_title}`,description:"Complete corrective action review",priority:S.risk_rating==="Critical"||S.risk_rating==="High"?"high":"medium",dueDate:new Date(S.target_completion_date),completed:!1})}),w}),h=()=>ue(this,null,function*(){r.value=!0;try{yield e.fetchEngagements(),yield e.fetchFindings(),yield n.fetchDataPeriods()}finally{r.value=!1}}),m=()=>{i.value&&new ia(i.value,{type:"pie",data:d.value,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!1}}}}),a.value&&new ia(a.value,{type:"bar",data:c.value,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!0}}}})},g=w=>({engagement:vt,finding:rn,report:hr})[w]||vt,y=w=>({engagement:"bg-blue-500",finding:"bg-yellow-500",report:"bg-green-500"})[w]||"bg-gray-500",x=w=>({low:"secondary",medium:"warning",high:"danger"})[w]||"secondary",_=w=>{w.completed=!w.completed},k=w=>new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return yt(()=>ue(this,null,function*(){yield h(),yield nr(),m()})),(w,S)=>(T(),R("div",LMt,[u("div",VMt,[S[6]||(S[6]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Dashboard"),u("p",{class:"text-gray-600 mt-1"}," Overview of audit activities and key metrics ")],-1)),u("div",NMt,[b(v(Qe),{modelValue:s.value,"onUpdate:modelValue":S[0]||(S[0]=C=>s.value=C),options:o,class:"w-32"},null,8,["modelValue"]),b(v(J),{variant:"outline",onClick:h,loading:r.value},{default:D(()=>[b(v(mn),{class:"h-4 w-4 mr-2"}),S[5]||(S[5]=W(" Refresh ",-1))]),_:1},8,["loading"])])]),u("div",jMt,[u("div",FMt,[u("div",BMt,[u("div",null,[S[7]||(S[7]=u("p",{class:"text-sm font-medium text-gray-600"},"Active Engagements",-1)),u("p",zMt,$(l.value.activeEngagements),1)]),u("div",UMt,[b(v(vt),{class:"h-6 w-6 text-blue-600"})])]),u("div",HMt,[b(v($l),{class:"h-4 w-4 text-green-500 mr-1"}),S[8]||(S[8]=u("span",{class:"text-green-600 font-medium"},"+12%",-1)),S[9]||(S[9]=u("span",{class:"text-gray-500 ml-1"},"from last month",-1))])]),u("div",qMt,[u("div",WMt,[u("div",null,[S[10]||(S[10]=u("p",{class:"text-sm font-medium text-gray-600"},"Open Findings",-1)),u("p",GMt,$(l.value.openFindings),1)]),u("div",YMt,[b(v(rn),{class:"h-6 w-6 text-yellow-600"})])]),u("div",KMt,[b(v(Om),{class:"h-4 w-4 text-red-500 mr-1"}),S[11]||(S[11]=u("span",{class:"text-red-600 font-medium"},"-5%",-1)),S[12]||(S[12]=u("span",{class:"text-gray-500 ml-1"},"from last month",-1))])]),u("div",XMt,[u("div",QMt,[u("div",null,[S[13]||(S[13]=u("p",{class:"text-sm font-medium text-gray-600"},"Compliance Score",-1)),u("p",ZMt,$(l.value.complianceScore)+"%",1)]),u("div",JMt,[b(v(Kt),{class:"h-6 w-6 text-green-600"})])]),u("div",eEt,[b(v($l),{class:"h-4 w-4 text-green-500 mr-1"}),S[14]||(S[14]=u("span",{class:"text-green-600 font-medium"},"+2%",-1)),S[15]||(S[15]=u("span",{class:"text-gray-500 ml-1"},"from last month",-1))])]),u("div",tEt,[u("div",nEt,[u("div",null,[S[16]||(S[16]=u("p",{class:"text-sm font-medium text-gray-600"},"Overall Risk",-1)),u("p",rEt,$(l.value.overallRisk),1)]),u("div",sEt,[b(v(qr),{class:"h-6 w-6 text-red-600"})])]),u("div",iEt,[b(v(Efe),{class:"h-4 w-4 text-gray-500 mr-1"}),S[17]||(S[17]=u("span",{class:"text-gray-600 font-medium"},"No change",-1)),S[18]||(S[18]=u("span",{class:"text-gray-500 ml-1"},"from last month",-1))])])]),u("div",aEt,[u("div",oEt,[u("div",lEt,[S[19]||(S[19]=u("h3",{class:"text-lg font-medium text-gray-900"},"Audit Status Overview",-1)),b(v(J),{variant:"ghost",size:"sm"},{default:D(()=>[b(v(V0),{class:"h-4 w-4"})]),_:1})]),u("div",uEt,[u("canvas",{ref_key:"auditStatusChartRef",ref:i,class:"w-full h-full"},null,512)])]),u("div",dEt,[u("div",cEt,[S[20]||(S[20]=u("h3",{class:"text-lg font-medium text-gray-900"},"Risk Distribution",-1)),b(v(J),{variant:"ghost",size:"sm"},{default:D(()=>[b(v(V0),{class:"h-4 w-4"})]),_:1})]),u("div",fEt,[u("canvas",{ref_key:"riskDistributionChartRef",ref:a,class:"w-full h-full"},null,512)])])]),u("div",pEt,[u("div",hEt,[u("div",mEt,[u("div",gEt,[S[22]||(S[22]=u("h3",{class:"text-lg font-medium text-gray-900"},"Recent Activities",-1)),b(v(J),{variant:"ghost",size:"sm"},{default:D(()=>[...S[21]||(S[21]=[W(" View All ",-1)])]),_:1})])]),u("div",vEt,[(T(!0),R(xe,null,_e(f.value,C=>(T(),R("div",{key:C.id,class:"px-6 py-4 hover:bg-gray-50"},[u("div",yEt,[u("div",bEt,[u("div",{class:pe(["w-8 h-8 rounded-full flex items-center justify-center",y(C.type)])},[(T(),he(At(g(C.type)),{class:"h-4 w-4 text-white"}))],2)]),u("div",xEt,[u("p",_Et,$(C.title),1),u("p",wEt,$(C.description),1),u("p",kEt,$(k(C.timestamp)),1)])])]))),128))])]),u("div",SEt,[u("div",CEt,[u("div",AEt,[S[24]||(S[24]=u("h3",{class:"text-lg font-medium text-gray-900"},"Upcoming Tasks",-1)),b(v(J),{variant:"ghost",size:"sm"},{default:D(()=>[...S[23]||(S[23]=[W(" View All ",-1)])]),_:1})])]),u("div",TEt,[(T(!0),R(xe,null,_e(p.value,C=>(T(),R("div",{key:C.id,class:"px-6 py-4 hover:bg-gray-50"},[u("div",$Et,[b(v(St),{checked:C.completed,onChange:A=>_(C),class:"mt-0.5"},null,8,["checked","onChange"]),u("div",MEt,[u("p",EEt,$(C.title),1),u("p",DEt,$(C.description),1),u("div",REt,[b(v(De),{variant:x(C.priority),size:"sm"},{default:D(()=>[W($(C.priority),1)]),_:2},1032,["variant"]),u("span",PEt," Due "+$(k(C.dueDate)),1)])])])]))),128))])])]),u("div",IEt,[S[29]||(S[29]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Quick Actions",-1)),u("div",OEt,[b(v(J),{variant:"outline",class:"h-20 flex flex-col items-center justify-center space-y-2",onClick:S[1]||(S[1]=C=>w.$router.push("/engagements/new"))},{default:D(()=>[b(v(nt),{class:"h-6 w-6"}),S[25]||(S[25]=u("span",{class:"text-sm"},"New Engagement",-1))]),_:1}),b(v(J),{variant:"outline",class:"h-20 flex flex-col items-center justify-center space-y-2",onClick:S[2]||(S[2]=C=>w.$router.push("/findings"))},{default:D(()=>[b(v(En),{class:"h-6 w-6"}),S[26]||(S[26]=u("span",{class:"text-sm"},"Review Findings",-1))]),_:1}),b(v(J),{variant:"outline",class:"h-20 flex flex-col items-center justify-center space-y-2",onClick:S[3]||(S[3]=C=>w.$router.push("/reports"))},{default:D(()=>[b(v(hr),{class:"h-6 w-6"}),S[27]||(S[27]=u("span",{class:"text-sm"},"Generate Report",-1))]),_:1}),b(v(J),{variant:"outline",class:"h-20 flex flex-col items-center justify-center space-y-2",onClick:S[4]||(S[4]=C=>w.$router.push("/compliance"))},{default:D(()=>[b(v(IY),{class:"h-6 w-6"}),S[28]||(S[28]=u("span",{class:"text-sm"},"Compliance Check",-1))]),_:1})])])]))}},VEt={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},NEt={class:"bg-white rounded-lg border border-gray-200 p-6"},jEt={class:"flex items-center"},FEt={class:"p-2 bg-blue-100 rounded-lg"},BEt={class:"ml-4"},zEt={class:"text-2xl font-bold text-gray-900"},UEt={class:"bg-white rounded-lg border border-gray-200 p-6"},HEt={class:"flex items-center"},qEt={class:"p-2 bg-green-100 rounded-lg"},WEt={class:"ml-4"},GEt={class:"text-2xl font-bold text-gray-900"},YEt={class:"bg-white rounded-lg border border-gray-200 p-6"},KEt={class:"flex items-center"},XEt={class:"p-2 bg-purple-100 rounded-lg"},QEt={class:"ml-4"},ZEt={class:"text-2xl font-bold text-gray-900"},JEt={class:"bg-white rounded-lg border border-gray-200 p-6"},eDt={class:"flex items-center"},tDt={class:"p-2 bg-orange-100 rounded-lg"},nDt={class:"ml-4"},rDt={class:"text-2xl font-bold text-gray-900"},sDt={__name:"DataAnalyticsStats",props:{dashboards:{type:Array,default:()=>[]},dashboardCharts:{type:Array,default:()=>[]},dashboardDataSources:{type:Array,default:()=>[]}},setup(t){const e=t,n=Z(()=>e.dashboards.length),r=Z(()=>e.dashboards.filter(a=>a.is_active).length),s=Z(()=>e.dashboardCharts.length),i=Z(()=>e.dashboardDataSources.length);return(a,o)=>(T(),R("div",VEt,[u("div",NEt,[u("div",jEt,[u("div",FEt,[b(v(hr),{class:"h-6 w-6 text-blue-600"})]),u("div",BEt,[o[0]||(o[0]=u("p",{class:"text-sm font-medium text-gray-600"},"Total Dashboards",-1)),u("p",zEt,$(n.value),1)])])]),u("div",UEt,[u("div",HEt,[u("div",qEt,[b(v(Kt),{class:"h-6 w-6 text-green-600"})]),u("div",WEt,[o[1]||(o[1]=u("p",{class:"text-sm font-medium text-gray-600"},"Active Dashboards",-1)),u("p",GEt,$(r.value),1)])])]),u("div",YEt,[u("div",KEt,[u("div",XEt,[b(v(dfe),{class:"h-6 w-6 text-purple-600"})]),u("div",QEt,[o[2]||(o[2]=u("p",{class:"text-sm font-medium text-gray-600"},"Total Charts",-1)),u("p",ZEt,$(s.value),1)])])]),u("div",JEt,[u("div",eDt,[u("div",tDt,[b(v(Kr),{class:"h-6 w-6 text-orange-600"})]),u("div",nDt,[o[3]||(o[3]=u("p",{class:"text-sm font-medium text-gray-600"},"Data Sources",-1)),u("p",rDt,$(i.value),1)])])])]))}},iDt={class:"space-y-6"},aDt={class:"flex items-center justify-between"},oDt={class:"flex items-center space-x-3"},lDt={class:"bg-white rounded-lg border border-gray-200"},uDt={class:"border-b border-gray-200"},dDt={class:"flex"},cDt={class:"p-6"},fDt={key:0},pDt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},hDt={class:"flex flex-col items-center justify-center h-full"},mDt=["onClick"],gDt={class:"flex items-start justify-between mb-4"},vDt={class:"flex-1"},yDt={class:"text-lg font-medium text-gray-900 mb-1"},bDt={class:"text-sm text-gray-600 mb-2"},xDt={class:"flex items-center space-x-2"},_Dt={class:"flex items-center justify-between text-sm text-gray-500"},wDt={key:1},kDt={class:"flex items-center justify-between mb-6"},SDt={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center"},CDt={key:2},ADt={class:"flex items-center justify-between mb-6"},TDt={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center"},$Dt={__name:"DataAnalytics",setup(t){const e=_n(),n=TA(),r=Q("dashboards"),s=Q(!1),i=()=>ue(this,null,function*(){s.value=!0;try{yield Promise.all([n.fetchDashboards()])}catch(h){console.error("Error loading data analytics:",h)}finally{s.value=!1}}),a=h=>({Private:"secondary",Public:"success",Shared:"info"})[h]||"secondary",o=h=>h?new Date(h).toLocaleDateString():"Never",l=()=>{e.push("/data-analytics/dashboard/new")},d=h=>{e.push(`/data-analytics/dashboard/${h.name}`)},c=h=>{e.push(`/data-analytics/dashboard/${h.name}/edit`)},f=()=>{e.push("/data-analytics/chart/new")},p=()=>{e.push("/data-analytics/data-source/new")};return yt(()=>ue(this,null,function*(){yield i()})),(h,m)=>(T(),R("div",iDt,[u("div",aDt,[m[5]||(m[5]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Data Analytics"),u("p",{class:"text-gray-600 mt-1"}," Create and manage data analytics dashboards and visualizations ")],-1)),u("div",oDt,[b(v(J),{variant:"outline"},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),m[3]||(m[3]=W(" Export ",-1))]),_:1}),b(v(J),{onClick:l},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),m[4]||(m[4]=W(" New Dashboard ",-1))]),_:1})])]),u("div",lDt,[u("div",uDt,[u("nav",dDt,[u("button",{onClick:m[0]||(m[0]=g=>r.value="dashboards"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="dashboards"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Dashboards ",2),u("button",{onClick:m[1]||(m[1]=g=>r.value="charts"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="charts"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Charts ",2),u("button",{onClick:m[2]||(m[2]=g=>r.value="data-sources"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="data-sources"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Data Sources ",2)])]),u("div",cDt,[r.value==="dashboards"?(T(),R("div",fDt,[u("div",pDt,[u("div",{class:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-400 hover:bg-blue-50 cursor-pointer transition-colors",onClick:l},[u("div",hDt,[b(v(nt),{class:"h-12 w-12 text-gray-400 mb-4"}),m[6]||(m[6]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Create New Dashboard",-1)),m[7]||(m[7]=u("p",{class:"text-sm text-gray-600 text-center"}," Build a custom dashboard with charts and visualizations ",-1))])]),(T(!0),R(xe,null,_e(v(n).dashboards,g=>(T(),R("div",{key:g.name,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:y=>d(g)},[u("div",gDt,[u("div",vDt,[u("h3",yDt,$(g.dashboard_name),1),u("p",bDt,$(g.description||"No description"),1),u("div",xDt,[b(v(De),{variant:a(g.dashboard_type)},{default:D(()=>[W($(g.dashboard_type),1)]),_:2},1032,["variant"]),b(v(De),{variant:g.is_active?"success":"secondary"},{default:D(()=>[W($(g.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])])]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(y=>c(g),["stop"])},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",_Dt,[u("span",null,"Modified "+$(o(g.modified)),1),u("span",null,$(g.total_views||0)+" views",1)])],8,mDt))),128))])])):se("",!0),r.value==="charts"?(T(),R("div",wDt,[u("div",kDt,[m[9]||(m[9]=u("h2",{class:"text-lg font-medium text-gray-900"},"Chart Library",-1)),b(v(J),{onClick:f},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),m[8]||(m[8]=W(" New Chart ",-1))]),_:1})]),u("div",SDt,[b(v(hr),{class:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),m[10]||(m[10]=u("h3",{class:"text-lg font-medium text-yellow-800 mb-2"},"Charts Feature Restricted",-1)),m[11]||(m[11]=u("p",{class:"text-yellow-700"}," The chart library is currently not available due to permission restrictions. Please contact your administrator for access to advanced analytics features. ",-1))])])):se("",!0),r.value==="data-sources"?(T(),R("div",CDt,[u("div",ADt,[m[13]||(m[13]=u("h2",{class:"text-lg font-medium text-gray-900"},"Data Sources",-1)),b(v(J),{onClick:p},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),m[12]||(m[12]=W(" New Data Source ",-1))]),_:1})]),u("div",TDt,[b(v(Kr),{class:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),m[14]||(m[14]=u("h3",{class:"text-lg font-medium text-yellow-800 mb-2"},"Data Sources Feature Restricted",-1)),m[15]||(m[15]=u("p",{class:"text-yellow-700"}," The data sources management is currently not available due to permission restrictions. Please contact your administrator for access to advanced data management features. ",-1))])])):se("",!0)])]),b(sDt,{dashboards:v(n).dashboards,"dashboard-charts":[],"dashboard-data-sources":[]},null,8,["dashboards"])]))}},MDt={class:"flex h-[65vh]"},EDt={class:"w-52 border-r bg-gray-50 p-4 flex flex-col"},DDt={class:"space-y-1 flex-1"},RDt=["onClick"],PDt={class:"text-sm"},IDt={class:"mt-4 pt-4 border-t"},ODt={class:"text-xs text-gray-500 mb-2"},LDt={class:"w-full bg-gray-200 rounded-full h-2"},VDt={class:"flex-1 flex flex-col overflow-hidden"},NDt={class:"flex-1 overflow-y-auto p-6"},jDt={class:"space-y-4"},FDt={class:"grid grid-cols-2 gap-4"},BDt={class:"grid grid-cols-3 gap-4"},zDt={class:"grid grid-cols-2 gap-4"},UDt={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},HDt={class:"flex items-center gap-2"},qDt={class:"text-sm text-blue-700"},WDt={class:"space-y-4"},GDt={class:"grid grid-cols-2 gap-4"},YDt={class:"p-4 bg-white rounded-lg border"},KDt={class:"flex items-center justify-between mb-3"},XDt={class:"w-full bg-gray-200 rounded-full h-3"},QDt={class:"p-4 bg-white rounded-lg border"},ZDt={class:"flex items-center justify-between mb-3"},JDt={class:"w-full bg-gray-200 rounded-full h-3"},eRt={class:"mt-6"},tRt={class:"flex items-center justify-between mb-3"},nRt={class:"border rounded-lg overflow-hidden"},rRt={class:"min-w-full divide-y divide-gray-200"},sRt={class:"bg-white divide-y divide-gray-200"},iRt={class:"px-4 py-2"},aRt={class:"px-4 py-2"},oRt={class:"px-4 py-2"},lRt={class:"px-4 py-2"},uRt={class:"px-4 py-2"},dRt={key:0},cRt={class:"space-y-4"},fRt={class:"grid grid-cols-2 gap-4"},pRt={class:"grid grid-cols-2 gap-4"},hRt={class:"mt-6 bg-gray-50 rounded-lg p-4"},mRt={class:"flex flex-wrap gap-3"},gRt={class:"border-t bg-gray-50 px-6 py-4 flex items-center justify-between"},vRt={class:"flex items-center gap-2"},yRt={__name:"DataPeriodForm",props:{show:{type:Boolean,default:!1},period:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.show,set:V=>r("update:show",V)}),i=Z(()=>{var V;return!!((V=n.period)!=null&&V.name)}),a=Q(!1),o=Q(0),l=[{id:"details",title:"Period Details",icon:GL,description:"Define period identification and dates"},{id:"quality",title:"Data Quality",icon:hr,description:"Track data completeness and imports"},{id:"approval",title:"Approval & Lock",icon:Ju,description:"Manage period approval and archiving"}],d=Jt({period_id:"",period_name:"",period_type:"",fiscal_year:"",start_date:"",end_date:"",status:"Open",data_completeness_score:0,data_quality_score:0,reconciliation_status:"",import_checklist:[],approved_by:"",approval_date:"",lock_date:"",archive_date:"",notes:""}),c=[{label:"Month",value:"Month"},{label:"Quarter",value:"Quarter"},{label:"Half-Year",value:"Half-Year"},{label:"Year",value:"Year"},{label:"Custom",value:"Custom"}],f=[{label:"Open",value:"Open"},{label:"Locked",value:"Locked"},{label:"Closed",value:"Closed"},{label:"Archived",value:"Archived"}],p=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Issues Found",value:"Issues Found"}],h=[{label:"Pending",value:"Pending"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Failed",value:"Failed"}];et(()=>n.period,V=>{V?Object.keys(d).forEach(O=>{V[O]!==void 0&&(d[O]=V[O])}):z()},{immediate:!0});const m=Z(()=>{if(!d.start_date||!d.end_date)return 0;const V=new Date(d.start_date),O=new Date(d.end_date);return Math.ceil((O-V)/(1e3*60*60*24))+1}),g=Z(()=>[!!(d.period_id&&d.period_name&&d.start_date&&d.end_date),!0,!0]),y=Z(()=>g.value.filter(Boolean).length),x=Z(()=>Math.round(y.value/l.length*100));function _(V){return g.value[V]}function k(V){return o.value===V?"text-blue-600":_(V)?"text-green-500":"text-gray-400"}function w(V){o.value=V}function S(){o.value<l.length-1&&o.value++}function C(){o.value>0&&o.value--}function A(V){return V>=80?"green":V>=60?"orange":V>=40?"yellow":"red"}function M(V){return V>=80?"bg-green-500":V>=60?"bg-yellow-500":V>=40?"bg-orange-500":"bg-red-500"}function E(){d.import_checklist.push({import_type:"",status:"Pending",record_count:0,imported_date:""})}function P(V){d.import_checklist.splice(V,1)}function I(){d.status="Locked",d.lock_date=new Date().toISOString().split("T")[0]}function F(){d.status="Open",d.lock_date=""}function L(){d.status="Archived",d.archive_date=new Date().toISOString().split("T")[0]}function z(){Object.keys(d).forEach(V=>{Array.isArray(d[V])?d[V]=[]:typeof d[V]=="number"?d[V]=0:d[V]=""}),d.status="Open",o.value=0}function N(){r("update:show",!1),z()}function q(){return ue(this,null,function*(){a.value=!0;try{console.log("Saving period:",d),r("saved",ge({},d)),N()}catch(V){console.error("Error saving period:",V)}finally{a.value=!1}})}return(V,O)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":O[13]||(O[13]=X=>s.value=X),options:{title:i.value?"Edit Data Period":"Create Data Period",size:"5xl"}},{"body-content":D(()=>{var X,j,U,G;return[u("div",MDt,[u("div",EDt,[u("div",DDt,[(T(),R(xe,null,_e(l,(ee,ie)=>u("button",{key:ee.id,onClick:ne=>w(ie),class:pe(["w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors",o.value===ie?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"])},[(T(),he(At(ee.icon),{class:pe(["h-4 w-4",k(ie)])},null,8,["class"])),u("span",PDt,$(ee.title),1),_(ie)?(T(),he(v(ro),{key:0,class:"h-4 w-4 ml-auto text-green-500"})):se("",!0)],10,RDt)),64))]),u("div",IDt,[u("div",ODt," Progress: "+$(y.value)+"/"+$(l.length)+" sections ",1),u("div",LDt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:rt({width:`${x.value}%`})},null,4)])])]),u("div",VDt,[b(Vt,{icon:(X=l[o.value])==null?void 0:X.icon,title:(j=l[o.value])==null?void 0:j.title,description:(U=l[o.value])==null?void 0:U.description},null,8,["icon","title","description"]),u("div",NDt,[we(u("div",jDt,[u("div",FDt,[b(v(ve),{modelValue:d.period_id,"onUpdate:modelValue":O[0]||(O[0]=ee=>d.period_id=ee),label:"Period ID *",type:"text",placeholder:"e.g., 2025-Q1"},null,8,["modelValue"]),b(v(ve),{modelValue:d.period_name,"onUpdate:modelValue":O[1]||(O[1]=ee=>d.period_name=ee),label:"Period Name *",type:"text",placeholder:"e.g., Q1 2025"},null,8,["modelValue"])]),u("div",BDt,[u("div",null,[O[14]||(O[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Period Type",-1)),b(v(Qe),{modelValue:d.period_type,"onUpdate:modelValue":O[2]||(O[2]=ee=>d.period_type=ee),options:c,placeholder:"Select type"},null,8,["modelValue"])]),u("div",null,[O[15]||(O[15]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fiscal Year",-1)),b(Mt,{modelValue:d.fiscal_year,"onUpdate:modelValue":O[3]||(O[3]=ee=>d.fiscal_year=ee),doctype:"Fiscal Year",placeholder:"Select fiscal year"},null,8,["modelValue"])]),u("div",null,[O[16]||(O[16]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(v(Qe),{modelValue:d.status,"onUpdate:modelValue":O[4]||(O[4]=ee=>d.status=ee),options:f,placeholder:"Select status"},null,8,["modelValue"])])]),u("div",zDt,[b(v(ve),{modelValue:d.start_date,"onUpdate:modelValue":O[5]||(O[5]=ee=>d.start_date=ee),label:"Start Date *",type:"date"},null,8,["modelValue"]),b(v(ve),{modelValue:d.end_date,"onUpdate:modelValue":O[6]||(O[6]=ee=>d.end_date=ee),label:"End Date *",type:"date"},null,8,["modelValue"])]),d.start_date&&d.end_date?(T(),R("div",UDt,[u("div",HDt,[b(v(GL),{class:"h-5 w-5 text-blue-600"}),u("span",qDt,[O[17]||(O[17]=W(" Period Duration: ",-1)),u("strong",null,$(m.value)+" days",1)])])])):se("",!0)],512),[[lt,o.value===0]]),we(u("div",WDt,[u("div",GDt,[u("div",YDt,[u("div",KDt,[O[18]||(O[18]=u("span",{class:"text-sm font-medium text-gray-700"},"Data Completeness",-1)),b(v(De),{theme:A(d.data_completeness_score)},{default:D(()=>[W($(d.data_completeness_score||0)+"% ",1)]),_:1},8,["theme"])]),u("div",XDt,[u("div",{class:pe(["h-3 rounded-full transition-all",M(d.data_completeness_score)]),style:rt({width:`${d.data_completeness_score||0}%`})},null,6)])]),u("div",QDt,[u("div",ZDt,[O[19]||(O[19]=u("span",{class:"text-sm font-medium text-gray-700"},"Data Quality",-1)),b(v(De),{theme:A(d.data_quality_score)},{default:D(()=>[W($(d.data_quality_score||0)+"% ",1)]),_:1},8,["theme"])]),u("div",JDt,[u("div",{class:pe(["h-3 rounded-full transition-all",M(d.data_quality_score)]),style:rt({width:`${d.data_quality_score||0}%`})},null,6)])])]),u("div",null,[O[20]||(O[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reconciliation Status",-1)),b(v(Qe),{modelValue:d.reconciliation_status,"onUpdate:modelValue":O[7]||(O[7]=ee=>d.reconciliation_status=ee),options:p,placeholder:"Select status"},null,8,["modelValue"])]),u("div",eRt,[u("div",tRt,[O[22]||(O[22]=u("h4",{class:"text-sm font-medium text-gray-700"},"Import Checklist",-1)),b(v(J),{size:"sm",onClick:E},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[O[21]||(O[21]=W(" Add Item ",-1))]),_:1})]),u("div",nRt,[u("table",rRt,[O[24]||(O[24]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Import Type"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Status"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Records"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Imported Date"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",sRt,[(T(!0),R(xe,null,_e(d.import_checklist,(ee,ie)=>(T(),R("tr",{key:ie},[u("td",iRt,[b(v(ve),{modelValue:ee.import_type,"onUpdate:modelValue":ne=>ee.import_type=ne,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",aRt,[b(v(Qe),{modelValue:ee.status,"onUpdate:modelValue":ne=>ee.status=ne,options:h,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",oRt,[b(v(ve),{modelValue:ee.record_count,"onUpdate:modelValue":ne=>ee.record_count=ne,type:"number",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",lRt,[b(v(ve),{modelValue:ee.imported_date,"onUpdate:modelValue":ne=>ee.imported_date=ne,type:"date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",uRt,[b(v(J),{variant:"ghost",size:"sm",onClick:ne=>P(ie)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(G=d.import_checklist)!=null&&G.length?se("",!0):(T(),R("tr",dRt,[...O[23]||(O[23]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No import checklist items. Click "Add Item" to add one. ',-1)])]))])])])])],512),[[lt,o.value===1]]),we(u("div",cRt,[u("div",fRt,[u("div",null,[O[25]||(O[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved By",-1)),b(Mt,{modelValue:d.approved_by,"onUpdate:modelValue":O[8]||(O[8]=ee=>d.approved_by=ee),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])]),b(v(ve),{modelValue:d.approval_date,"onUpdate:modelValue":O[9]||(O[9]=ee=>d.approval_date=ee),label:"Approval Date",type:"datetime-local"},null,8,["modelValue"])]),u("div",pRt,[b(v(ve),{modelValue:d.lock_date,"onUpdate:modelValue":O[10]||(O[10]=ee=>d.lock_date=ee),label:"Lock Date",type:"date"},null,8,["modelValue"]),b(v(ve),{modelValue:d.archive_date,"onUpdate:modelValue":O[11]||(O[11]=ee=>d.archive_date=ee),label:"Archive Date",type:"date"},null,8,["modelValue"])]),u("div",hRt,[O[29]||(O[29]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Period Actions",-1)),u("div",mRt,[b(v(J),{variant:"outline",onClick:I,disabled:d.status==="Locked"||d.status==="Archived"},{prefix:D(()=>[b(v(MY),{class:"h-4 w-4"})]),default:D(()=>[O[26]||(O[26]=W(" Lock Period ",-1))]),_:1},8,["disabled"]),b(v(J),{variant:"outline",onClick:F,disabled:d.status!=="Locked"},{prefix:D(()=>[b(v($Y),{class:"h-4 w-4"})]),default:D(()=>[O[27]||(O[27]=W(" Unlock Period ",-1))]),_:1},8,["disabled"]),b(v(J),{variant:"outline",theme:"orange",onClick:L,disabled:d.status==="Archived"},{prefix:D(()=>[b(v(YD),{class:"h-4 w-4"})]),default:D(()=>[O[28]||(O[28]=W(" Archive Period ",-1))]),_:1},8,["disabled"])])]),u("div",null,[O[30]||(O[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),b(v(an),{modelValue:d.notes,"onUpdate:modelValue":O[12]||(O[12]=ee=>d.notes=ee),content:d.notes,placeholder:"Additional notes about this period...","editor-class":"prose-sm max-w-none min-h-[120px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[lt,o.value===2]])]),u("div",gRt,[b(v(J),{variant:"outline",onClick:C,disabled:o.value===0},{prefix:D(()=>[b(v(gr),{class:"h-4 w-4"})]),default:D(()=>[O[31]||(O[31]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",vRt,[b(v(J),{variant:"outline",onClick:N},{default:D(()=>[...O[32]||(O[32]=[W("Cancel",-1)])]),_:1}),o.value<l.length-1?(T(),he(v(J),{key:0,variant:"solid",onClick:S},{suffix:D(()=>[b(v(sr),{class:"h-4 w-4"})]),default:D(()=>[O[33]||(O[33]=W(" Next ",-1))]),_:1})):(T(),he(v(J),{key:1,variant:"solid",theme:"green",onClick:q,loading:a.value},{prefix:D(()=>[b(v($r),{class:"h-4 w-4"})]),default:D(()=>[W(" "+$(i.value?"Update Period":"Create Period"),1)]),_:1},8,["loading"]))])])])])]}),_:1},8,["modelValue","options"]))}},bRt={class:"bg-white rounded-xl border p-4"},xRt={class:"flex flex-wrap items-center gap-4"},_Rt={class:"flex-1 min-w-[200px] max-w-md"},wRt={class:"w-36"},kRt={class:"w-40"},SRt={class:"w-32"},CRt={class:"w-40"},ARt={class:"flex items-center gap-2 ml-auto"},TRt={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},$Rt={__name:"PeriodFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,s=Jt({search:"",periodType:"",fiscalYear:"",status:"",reconciliation:""});et(()=>n.filters,p=>{p&&Object.assign(s,p)},{immediate:!0,deep:!0});const i=[{label:"All Types",value:""},{label:"Month",value:"Month"},{label:"Quarter",value:"Quarter"},{label:"Half-Year",value:"Half-Year"},{label:"Year",value:"Year"},{label:"Custom",value:"Custom"}],a=[{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Locked",value:"Locked"},{label:"Closed",value:"Closed"},{label:"Archived",value:"Archived"}],o=[{label:"All",value:""},{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Issues Found",value:"Issues Found"}],l=Z(()=>Object.values(s).some(p=>p!==""));function d(){r("update:filters",ge({},s))}function c(p){s[p]="",d()}function f(){Object.keys(s).forEach(p=>{s[p]=""}),d()}return(p,h)=>(T(),R("div",bRt,[u("div",xRt,[u("div",_Rt,[b(v(ve),{modelValue:s.search,"onUpdate:modelValue":[h[0]||(h[0]=m=>s.search=m),d],type:"text",placeholder:"Search by period name or ID...",debounce:300},{prefix:D(()=>[b(v(En),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",wRt,[b(v(Qe),{modelValue:s.periodType,"onUpdate:modelValue":[h[1]||(h[1]=m=>s.periodType=m),d],options:i,placeholder:"All Types"},null,8,["modelValue"])]),u("div",kRt,[b(Mt,{modelValue:s.fiscalYear,"onUpdate:modelValue":[h[2]||(h[2]=m=>s.fiscalYear=m),d],doctype:"Fiscal Year",placeholder:"All Years"},null,8,["modelValue"])]),u("div",SRt,[b(v(Qe),{modelValue:s.status,"onUpdate:modelValue":[h[3]||(h[3]=m=>s.status=m),d],options:a,placeholder:"All Status"},null,8,["modelValue"])]),u("div",CRt,[b(v(Qe),{modelValue:s.reconciliation,"onUpdate:modelValue":[h[4]||(h[4]=m=>s.reconciliation=m),d],options:o,placeholder:"All Reconciliation"},null,8,["modelValue"])]),u("div",ARt,[l.value?(T(),he(v(J),{key:0,variant:"outline",onClick:f},{prefix:D(()=>[b(v(ht),{class:"h-4 w-4"})]),default:D(()=>[h[12]||(h[12]=W(" Clear ",-1))]),_:1})):se("",!0),b(v(J),{variant:"outline",onClick:h[5]||(h[5]=m=>p.$emit("refresh"))},{prefix:D(()=>[b(v(mn),{class:"h-4 w-4"})]),default:D(()=>[h[13]||(h[13]=W(" Refresh ",-1))]),_:1}),b(v(J),{variant:"solid",onClick:h[6]||(h[6]=m=>p.$emit("create"))},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[h[14]||(h[14]=W(" New Period ",-1))]),_:1})])]),l.value?(T(),R("div",TRt,[h[15]||(h[15]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),s.search?(T(),he(v(De),{key:0,theme:"blue",class:"cursor-pointer",onClick:h[7]||(h[7]=m=>c("search"))},{default:D(()=>[W(' Search: "'+$(s.search)+'" ',1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.periodType?(T(),he(v(De),{key:1,theme:"purple",class:"cursor-pointer",onClick:h[8]||(h[8]=m=>c("periodType"))},{default:D(()=>[W(" Type: "+$(s.periodType)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.fiscalYear?(T(),he(v(De),{key:2,theme:"indigo",class:"cursor-pointer",onClick:h[9]||(h[9]=m=>c("fiscalYear"))},{default:D(()=>[W(" Year: "+$(s.fiscalYear)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.status?(T(),he(v(De),{key:3,theme:"green",class:"cursor-pointer",onClick:h[10]||(h[10]=m=>c("status"))},{default:D(()=>[W(" Status: "+$(s.status)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.reconciliation?(T(),he(v(De),{key:4,theme:"orange",class:"cursor-pointer",onClick:h[11]||(h[11]=m=>c("reconciliation"))},{default:D(()=>[W(" Reconciliation: "+$(s.reconciliation)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0)])):se("",!0)]))}},MRt={class:"space-y-4"},ERt={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4"},DRt=["onClick"],RRt={class:"flex items-center gap-3"},PRt={class:"text-2xl font-bold text-gray-900"},IRt={class:"text-xs text-gray-500"},ORt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},LRt={class:"bg-white rounded-xl border p-4"},VRt={class:"space-y-3"},NRt=["onClick"],jRt={class:"flex-1 text-sm text-gray-600"},FRt={class:"text-sm font-medium text-gray-700"},BRt={class:"bg-white rounded-xl border p-4"},zRt={class:"flex items-center justify-center"},URt={class:"relative h-32 w-32"},HRt={viewBox:"0 0 36 36",class:"transform -rotate-90"},qRt=["stroke","stroke-dasharray"],WRt={class:"absolute inset-0 flex flex-col items-center justify-center"},GRt={class:"text-2xl font-bold text-gray-900"},YRt={class:"flex justify-center gap-4 mt-4 text-xs"},KRt={class:"flex items-center gap-1"},XRt={class:"text-gray-500"},QRt={class:"bg-white rounded-xl border p-4"},ZRt={class:"space-y-3"},JRt=["onClick"],ePt={class:"flex-1 text-sm text-gray-600"},tPt={class:"bg-white rounded-xl border p-4"},nPt={class:"flex items-center gap-2 overflow-x-auto pb-2"},rPt=["onClick"],sPt={class:"flex items-center justify-between mb-2"},iPt={class:"text-xs text-gray-500"},aPt={class:"text-sm font-medium text-gray-800"},oPt={class:"text-xs text-gray-500 mt-1"},lPt={class:"mt-2 flex items-center gap-2"},uPt={class:"flex-1 bg-gray-200 rounded-full h-1.5"},dPt={class:"text-xs text-gray-500"},cPt={key:0,class:"text-sm text-gray-500 py-4"},fPt={__name:"PeriodStats",props:{periods:{type:Array,default:()=>[]},activeFilter:{type:String,default:""}},emits:["filter","select"],setup(t){const e=t,n=Z(()=>{const p=e.periods,h=p.length,m=p.filter(_=>_.status==="Open").length,g=p.filter(_=>_.status==="Locked").length,y=p.filter(_=>_.status==="Closed").length,x=p.filter(_=>_.status==="Archived").length;return[{label:"Total Periods",value:h,icon:rr,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:null,filterValue:null},{label:"Open",value:m,icon:$Y,bgColor:"bg-green-100",iconColor:"text-green-600",filterKey:"status",filterValue:"Open",active:e.activeFilter==="Open"},{label:"Locked",value:g,icon:MY,bgColor:"bg-yellow-100",iconColor:"text-yellow-600",filterKey:"status",filterValue:"Locked",active:e.activeFilter==="Locked"},{label:"Closed",value:y,icon:lfe,bgColor:"bg-gray-100",iconColor:"text-gray-600",filterKey:"status",filterValue:"Closed",active:e.activeFilter==="Closed"},{label:"Archived",value:x,icon:YD,bgColor:"bg-purple-100",iconColor:"text-purple-600",filterKey:"status",filterValue:"Archived",active:e.activeFilter==="Archived"}]}),r=Z(()=>{const p=e.periods,h=["Month","Quarter","Half-Year","Year","Custom"],m={Month:"bg-blue-500",Quarter:"bg-green-500","Half-Year":"bg-purple-500",Year:"bg-orange-500",Custom:"bg-gray-500"};return h.map(g=>({name:g,count:p.filter(y=>y.period_type===g).length,dotColor:m[g]||"bg-gray-400"})).filter(g=>g.count>0)}),s=Z(()=>{const p=e.periods.filter(h=>h.data_quality_score);return p.length?Math.round(p.reduce((h,m)=>h+m.data_quality_score,0)/p.length):0}),i=Z(()=>{const p=e.periods.filter(h=>h.data_completeness_score);return p.length?Math.round(p.reduce((h,m)=>h+m.data_completeness_score,0)/p.length):0}),a=Z(()=>{const p=s.value;return p>=80?"#22C55E":p>=60?"#F59E0B":"#EF4444"}),o=Z(()=>{const p=e.periods;return[{name:"Completed",count:p.filter(h=>h.reconciliation_status==="Completed").length,icon:Kt,iconColor:"text-green-600",theme:"green"},{name:"In Progress",count:p.filter(h=>h.reconciliation_status==="In Progress").length,icon:Ns,iconColor:"text-blue-600",theme:"blue"},{name:"Not Started",count:p.filter(h=>h.reconciliation_status==="Not Started").length,icon:rn,iconColor:"text-yellow-600",theme:"orange"},{name:"Issues Found",count:p.filter(h=>h.reconciliation_status==="Issues Found").length,icon:Uc,iconColor:"text-red-600",theme:"red"}].filter(h=>h.count>0)}),l=Z(()=>[...e.periods].sort((p,h)=>new Date(h.start_date)-new Date(p.start_date)).slice(0,8));function d(p){return p?new Date(p).toLocaleDateString("en-US",{month:"short",year:"numeric"}):""}function c(p){return{Open:"green",Locked:"orange",Closed:"gray",Archived:"blue"}[p]||"gray"}function f(p){return{Open:"bg-green-50 border-green-200",Locked:"bg-yellow-50 border-yellow-200",Closed:"bg-gray-50 border-gray-200",Archived:"bg-purple-50 border-purple-200"}[p]||"bg-gray-50 border-gray-200"}return(p,h)=>(T(),R("div",MRt,[u("div",ERt,[(T(!0),R(xe,null,_e(n.value,m=>(T(),R("div",{key:m.label,class:pe(["bg-white rounded-xl border p-4 hover:shadow-md transition-shadow cursor-pointer",m.active?"ring-2 ring-blue-500":""]),onClick:g=>p.$emit("filter",m.filterKey,m.filterValue)},[u("div",RRt,[u("div",{class:pe(["p-2 rounded-lg",m.bgColor])},[(T(),he(At(m.icon),{class:pe(["h-5 w-5",m.iconColor])},null,8,["class"]))],2),u("div",null,[u("div",PRt,$(m.value),1),u("div",IRt,$(m.label),1)])])],10,DRt))),128))]),u("div",ORt,[u("div",LRt,[h[0]||(h[0]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"By Period Type",-1)),u("div",VRt,[(T(!0),R(xe,null,_e(r.value,m=>(T(),R("div",{key:m.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:g=>p.$emit("filter","period_type",m.name)},[u("div",{class:pe(["w-3 h-3 rounded-full",m.dotColor])},null,2),u("div",jRt,$(m.name),1),u("div",FRt,$(m.count),1)],8,NRt))),128))])]),u("div",BRt,[h[4]||(h[4]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Data Quality Overview",-1)),u("div",zRt,[u("div",URt,[(T(),R("svg",HRt,[h[1]||(h[1]=u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:"#E5E7EB","stroke-width":"3"},null,-1)),u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:a.value,"stroke-width":"3","stroke-dasharray":`${s.value} ${100-s.value}`,"stroke-linecap":"round"},null,8,qRt)])),u("div",WRt,[u("div",GRt,$(s.value)+"%",1),h[2]||(h[2]=u("div",{class:"text-xs text-gray-500"},"Avg Quality",-1))])])]),u("div",YRt,[u("div",KRt,[h[3]||(h[3]=u("div",{class:"w-2 h-2 rounded-full bg-green-500"},null,-1)),u("span",XRt,"Complete: "+$(i.value)+"%",1)])])]),u("div",QRt,[h[5]||(h[5]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Reconciliation Status",-1)),u("div",ZRt,[(T(!0),R(xe,null,_e(o.value,m=>(T(),R("div",{key:m.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:g=>p.$emit("filter","reconciliation_status",m.name)},[(T(),he(At(m.icon),{class:pe(["h-4 w-4",m.iconColor])},null,8,["class"])),u("div",ePt,$(m.name),1),b(v(De),{theme:m.theme},{default:D(()=>[W($(m.count),1)]),_:2},1032,["theme"])],8,JRt))),128))])])]),u("div",tPt,[h[6]||(h[6]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Period Timeline",-1)),u("div",nPt,[(T(!0),R(xe,null,_e(l.value,m=>(T(),R("div",{key:m.name,class:pe(["flex-shrink-0 p-3 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow min-w-[180px]",f(m.status)]),onClick:g=>p.$emit("select",m)},[u("div",sPt,[b(v(De),{theme:c(m.status)},{default:D(()=>[W($(m.status),1)]),_:2},1032,["theme"]),u("span",iPt,$(m.period_type),1)]),u("div",aPt,$(m.period_name),1),u("div",oPt,$(d(m.start_date))+" - "+$(d(m.end_date)),1),u("div",lPt,[u("div",uPt,[u("div",{class:"h-1.5 rounded-full bg-blue-500",style:rt({width:`${m.data_completeness_score||0}%`})},null,4)]),u("span",dPt,$(m.data_completeness_score||0)+"%",1)])],10,rPt))),128)),l.value.length?se("",!0):(T(),R("div",cPt," No periods defined "))])])]))}},pPt=Yl("dataPeriods",{state:()=>({periods:[],selectedPeriod:null,loading:!1,saving:!1,error:null,searchQuery:"",filters:{status:"",periodType:"",fiscalYear:"",reconciliationStatus:""}}),getters:{filteredPeriods:t=>{let e=t.periods;if(t.searchQuery){const n=t.searchQuery.toLowerCase();e=e.filter(r=>{var s,i,a;return((s=r.period_name)==null?void 0:s.toLowerCase().includes(n))||((i=r.period_id)==null?void 0:i.toLowerCase().includes(n))||((a=r.description)==null?void 0:a.toLowerCase().includes(n))})}return t.filters.status&&(e=e.filter(n=>n.status===t.filters.status)),t.filters.periodType&&(e=e.filter(n=>n.period_type===t.filters.periodType)),t.filters.fiscalYear&&(e=e.filter(n=>n.fiscal_year===t.filters.fiscalYear)),t.filters.reconciliationStatus&&(e=e.filter(n=>n.reconciliation_status===t.filters.reconciliationStatus)),e},stats:t=>{const e=t.periods.length,n=t.periods.filter(f=>f.status==="Open").length,r=t.periods.filter(f=>f.status==="Locked").length,s=t.periods.filter(f=>f.status==="Closed").length,i=t.periods.filter(f=>f.data_quality_score!==null&&f.data_quality_score!==void 0),a=i.length>0?Math.round(i.reduce((f,p)=>f+(p.data_quality_score||0),0)/i.length):0,o=t.periods.filter(f=>f.data_completeness_score!==null&&f.data_completeness_score!==void 0),l=o.length>0?Math.round(o.reduce((f,p)=>f+(p.data_completeness_score||0),0)/o.length):0,d={};t.periods.forEach(f=>{const p=f.fiscal_year||"Unknown";d[p]||(d[p]=0),d[p]++});const c={};return t.periods.forEach(f=>{const p=f.period_type||"Unknown";c[p]||(c[p]=0),c[p]++}),{total:e,open:n,locked:r,closed:s,avgDataQuality:a,avgCompleteness:l,byFiscalYear:d,byPeriodType:c}},fiscalYears:t=>{const e=new Set(t.periods.map(n=>n.fiscal_year).filter(Boolean));return Array.from(e).sort().reverse()}},actions:{fetchPeriods(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Data Period",fields:["name","period_id","period_name","period_type","fiscal_year","start_date","end_date","status","description","company","data_completeness_score","data_quality_score","reconciliation_status","is_locked","locked_by","locked_date","closure_date","closed_by","closure_notes","creation","modified"],limit_page_length:0,order_by:"start_date desc"}}).fetch();this.periods=t||[]}catch(t){console.error("Error fetching data periods:",t),this.error=t.message||"Failed to fetch data periods",this.periods=[]}finally{this.loading=!1}})},getPeriodDetails(t){return ue(this,null,function*(){try{this.loading=!0;const e=yield Ve({url:"frappe.client.get",params:{doctype:"Data Period",name:t}}).fetch();return this.selectedPeriod=e,e}catch(e){throw console.error("Error fetching period details:",e),e}finally{this.loading=!1}})},createPeriod(t){return ue(this,null,function*(){try{this.saving=!0;const e=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Data Period"},t)}}).fetch();return yield this.fetchPeriods(),e}catch(e){throw console.error("Error creating period:",e),e}finally{this.saving=!1}})},updatePeriod(t,e){return ue(this,null,function*(){try{this.saving=!0;const n=yield Ve({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:e}}).fetch();return yield this.fetchPeriods(),n}catch(n){throw console.error("Error updating period:",n),n}finally{this.saving=!1}})},savePeriod(t){return ue(this,null,function*(){return t.name?this.updatePeriod(t.name,t):this.createPeriod(t)})},lockPeriod(t){return ue(this,null,function*(){try{this.saving=!0,yield Ve({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:{is_locked:1,locked_date:new Date().toISOString().split("T")[0],status:"Locked"}}}).fetch(),yield this.fetchPeriods()}catch(e){throw console.error("Error locking period:",e),e}finally{this.saving=!1}})},unlockPeriod(t){return ue(this,null,function*(){try{this.saving=!0,yield Ve({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:{is_locked:0,locked_date:null,locked_by:null,status:"Open"}}}).fetch(),yield this.fetchPeriods()}catch(e){throw console.error("Error unlocking period:",e),e}finally{this.saving=!1}})},closePeriod(t,e=""){return ue(this,null,function*(){try{this.saving=!0,yield Ve({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:{status:"Closed",closure_date:new Date().toISOString().split("T")[0],closure_notes:e}}}).fetch(),yield this.fetchPeriods()}catch(n){throw console.error("Error closing period:",n),n}finally{this.saving=!1}})},reopenPeriod(t){return ue(this,null,function*(){try{this.saving=!0,yield Ve({url:"frappe.client.set_value",params:{doctype:"Data Period",name:t,fieldname:{status:"Open",closure_date:null,closed_by:null,closure_notes:null}}}).fetch(),yield this.fetchPeriods()}catch(e){throw console.error("Error reopening period:",e),e}finally{this.saving=!1}})},deletePeriod(t){return ue(this,null,function*(){try{this.saving=!0,yield Ve({url:"frappe.client.delete",params:{doctype:"Data Period",name:t}}).fetch(),yield this.fetchPeriods()}catch(e){throw console.error("Error deleting period:",e),e}finally{this.saving=!1}})},setFilters(t){this.filters=ge(ge({},this.filters),t)},clearFilters(){this.searchQuery="",this.filters={status:"",periodType:"",fiscalYear:"",reconciliationStatus:""}}}}),hPt={class:"space-y-6"},mPt={class:"flex items-center justify-between"},gPt={class:"flex items-center space-x-3"},vPt={class:"bg-white rounded-lg border border-gray-200"},yPt={class:"border-b border-gray-200"},bPt={class:"flex"},xPt={class:"p-6"},_Pt={key:0},wPt={class:"flex items-center justify-between mb-6"},kPt={class:"flex items-center space-x-3"},SPt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},CPt={class:"flex items-start justify-between mb-4"},APt={class:"flex-1"},TPt={class:"text-lg font-medium text-gray-900 mb-1"},$Pt={class:"text-sm text-gray-600 mb-2"},MPt={class:"flex items-center space-x-2"},EPt={class:"space-y-2 text-sm text-gray-500"},DPt={class:"flex justify-between"},RPt={class:"flex justify-between"},PPt={class:"flex justify-between"},IPt={class:"flex justify-between"},OPt={class:"mt-4 flex items-center justify-between"},LPt={class:"text-xs text-gray-500"},VPt={class:"flex items-center space-x-2"},NPt={key:1},jPt={class:"flex items-center justify-between mb-6"},FPt={class:"flex items-center space-x-3"},BPt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},zPt={class:"bg-white border border-gray-200 rounded-lg p-6"},UPt={class:"space-y-4"},HPt={class:"text-sm font-medium text-gray-900"},qPt={class:"text-xs text-gray-500"},WPt={class:"flex items-center space-x-2"},GPt={class:"text-xs text-gray-500"},YPt={class:"bg-white border border-gray-200 rounded-lg p-6"},KPt={class:"space-y-4"},XPt={class:"flex justify-between items-center"},QPt={class:"text-sm font-medium"},ZPt={class:"flex justify-between items-center"},JPt={class:"text-sm font-medium"},e6t={class:"flex justify-between items-center"},t6t={class:"text-sm font-medium"},n6t={class:"flex justify-between items-center"},r6t={class:"text-sm font-medium"},s6t={class:"mt-6"},i6t={class:"space-y-2"},a6t={key:2},o6t={class:"flex items-center justify-between mb-6"},l6t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},u6t={class:"flex items-start justify-between mb-4"},d6t={class:"flex-1"},c6t={class:"text-lg font-medium text-gray-900 mb-1"},f6t={class:"text-sm text-gray-600 mb-2"},p6t={class:"flex items-center space-x-2"},h6t={class:"space-y-2 text-sm text-gray-500"},m6t={class:"flex justify-between"},g6t={class:"flex justify-between"},v6t={class:"flex justify-between"},y6t={class:"flex justify-between"},b6t={key:3},x6t={class:"space-y-6"},_6t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},w6t={class:"bg-white border border-gray-200 rounded-lg p-6"},k6t={class:"space-y-4"},S6t={class:"flex items-center"},C6t={class:"bg-white border border-gray-200 rounded-lg p-6"},A6t={class:"space-y-4"},T6t={class:"flex items-center"},$6t={class:"flex items-center"},M6t={class:"flex items-center"},E6t={class:"flex justify-end"},D6t={__name:"DataPeriods",setup(t){const e=pPt(),n=Q("periods"),r=Q(""),s=Q(""),i=Q(!1),a=Q(!1),o=Q(null);Z(()=>e.loading);const l=Z(()=>e.filteredPeriods),d=Z(()=>e.stats),c=Z({get:()=>e.searchQuery,set:X=>e.searchQuery=X}),f=Z({get:()=>e.filters.status,set:X=>e.filters.status=X}),p=Z({get:()=>e.filters.periodType,set:X=>e.filters.periodType=X}),h=Z({get:()=>e.filters.fiscalYear,set:X=>e.filters.fiscalYear=X}),m=Z({get:()=>e.filters.reconciliationStatus,set:X=>e.filters.reconciliationStatus=X});Z(()=>e.periods);const g=Q([{name:"type_1",period_type_name:"Monthly",description:"Standard monthly accounting periods",is_active:!0,is_default:!1,frequency:"Monthly",duration_days:30,auto_close:!0,carry_forward:!0},{name:"type_2",period_type_name:"Quarterly",description:"Quarterly financial reporting periods",is_active:!0,is_default:!0,frequency:"Quarterly",duration_days:91,auto_close:!1,carry_forward:!0},{name:"type_3",period_type_name:"Annually",description:"Annual fiscal year periods",is_active:!0,is_default:!1,frequency:"Annually",duration_days:365,auto_close:!1,carry_forward:!1}]),y=Q([{name:"January",periods:1,status:"complete"},{name:"February",periods:1,status:"complete"},{name:"March",periods:1,status:"complete"},{name:"April",periods:1,status:"partial"},{name:"May",periods:1,status:"pending"},{name:"June",periods:1,status:"pending"},{name:"July",periods:0,status:"empty"},{name:"August",periods:0,status:"empty"},{name:"September",periods:0,status:"empty"},{name:"October",periods:0,status:"empty"},{name:"November",periods:0,status:"empty"},{name:"December",periods:0,status:"empty"}]),x=Q({totalPeriods:12,openPeriods:3,closedPeriods:9,companies:2}),_=Q({defaultFiscalStart:"2024-01-01",autoCloseThreshold:30,allowPeriodOverlap:!1,notifyOnPeriodClose:!0,notifyOnPeriodOpen:!1,notifyUpcomingPeriods:!0}),k=[{label:"All Periods",value:""},{label:"Open",value:"Open"},{label:"Closed",value:"Closed"},{label:"Upcoming",value:"Upcoming"}],w=[{label:"2024",value:"2024"},{label:"2023",value:"2023"},{label:"2022",value:"2022"}],S=()=>ue(this,null,function*(){yield e.fetchPeriods()}),C=X=>({Open:"success",Closed:"secondary",Upcoming:"info"})[X]||"secondary",A=X=>({Monthly:"info",Quarterly:"success",Annually:"warning",Custom:"secondary"})[X]||"secondary",M=X=>X?new Date(X).toLocaleDateString():"N/A",E=()=>{o.value=null,a.value=!1,i.value=!0},P=X=>ue(this,null,function*(){try{o.value=yield e.getPeriodDetails(X.name),a.value=!0,i.value=!0}catch(j){console.error("Error fetching period details:",j)}}),I=()=>ue(this,null,function*(){i.value=!1,yield S()}),F=X=>ue(this,null,function*(){try{yield e.closePeriod(X.name)}catch(j){console.error("Error closing period:",j)}}),L=X=>ue(this,null,function*(){try{yield e.reopenPeriod(X.name)}catch(j){console.error("Error reopening period:",j)}}),z=()=>{console.log("Create fiscal year")},N=()=>{console.log("Create period type")},q=X=>{console.log("Edit period type:",X.name)},V=()=>{console.log("Saving settings:",_.value)},O=()=>{console.log("Export periods")};return yt(()=>ue(this,null,function*(){yield S()})),(X,j)=>(T(),R("div",hPt,[u("div",mPt,[j[20]||(j[20]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Data Periods"),u("p",{class:"text-gray-600 mt-1"}," Manage fiscal periods, data periods, and period configurations ")],-1)),u("div",gPt,[b(v(J),{variant:"outline",onClick:O},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),j[18]||(j[18]=W(" Export Periods ",-1))]),_:1}),b(v(J),{onClick:E},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),j[19]||(j[19]=W(" New Period ",-1))]),_:1})])]),b(fPt,{stats:d.value},null,8,["stats"]),b($Rt,{searchQuery:c.value,"onUpdate:searchQuery":j[0]||(j[0]=U=>c.value=U),selectedStatus:f.value,"onUpdate:selectedStatus":j[1]||(j[1]=U=>f.value=U),selectedPeriodType:p.value,"onUpdate:selectedPeriodType":j[2]||(j[2]=U=>p.value=U),selectedFiscalYear:h.value,"onUpdate:selectedFiscalYear":j[3]||(j[3]=U=>h.value=U),selectedReconciliationStatus:m.value,"onUpdate:selectedReconciliationStatus":j[4]||(j[4]=U=>m.value=U)},null,8,["searchQuery","selectedStatus","selectedPeriodType","selectedFiscalYear","selectedReconciliationStatus"]),u("div",vPt,[u("div",yPt,[u("nav",bPt,[u("button",{onClick:j[5]||(j[5]=U=>n.value="periods"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",n.value==="periods"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Data Periods ",2),u("button",{onClick:j[6]||(j[6]=U=>n.value="fiscal"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",n.value==="fiscal"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Fiscal Calendar ",2),u("button",{onClick:j[7]||(j[7]=U=>n.value="types"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",n.value==="types"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Period Types ",2),u("button",{onClick:j[8]||(j[8]=U=>n.value="settings"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",n.value==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Settings ",2)])]),u("div",xPt,[n.value==="periods"?(T(),R("div",_Pt,[u("div",wPt,[j[22]||(j[22]=u("h2",{class:"text-lg font-medium text-gray-900"},"Data Periods",-1)),u("div",kPt,[b(v(Qe),{modelValue:r.value,"onUpdate:modelValue":j[9]||(j[9]=U=>r.value=U),options:k,placeholder:"Filter periods",class:"w-40"},null,8,["modelValue"]),b(v(J),{onClick:E},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),j[21]||(j[21]=W(" New Period ",-1))]),_:1})])]),u("div",SPt,[(T(!0),R(xe,null,_e(l.value,U=>(T(),R("div",{key:U.name,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow"},[u("div",CPt,[u("div",APt,[u("h3",TPt,$(U.period_name),1),u("p",$Pt,$(U.description||"Data period configuration"),1),u("div",MPt,[b(v(De),{variant:C(U.status)},{default:D(()=>[W($(U.status),1)]),_:2},1032,["variant"]),b(v(De),{variant:A(U.period_type)},{default:D(()=>[W($(U.period_type),1)]),_:2},1032,["variant"])])]),b(v(J),{variant:"ghost",size:"sm",onClick:G=>P(U)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",EPt,[u("div",DPt,[j[23]||(j[23]=u("span",null,"Start Date:",-1)),u("span",null,$(M(U.start_date)),1)]),u("div",RPt,[j[24]||(j[24]=u("span",null,"End Date:",-1)),u("span",null,$(M(U.end_date)),1)]),u("div",PPt,[j[25]||(j[25]=u("span",null,"Fiscal Year:",-1)),u("span",null,$(U.fiscal_year),1)]),u("div",IPt,[j[26]||(j[26]=u("span",null,"Company:",-1)),u("span",null,$(U.company||"All"),1)])]),u("div",OPt,[u("div",LPt," Modified: "+$(M(U.modified)),1),u("div",VPt,[U.status==="Open"?(T(),he(v(J),{key:0,variant:"outline",size:"sm",onClick:G=>F(U)},{default:D(()=>[...j[27]||(j[27]=[W(" Close ",-1)])]),_:1},8,["onClick"])):se("",!0),U.status==="Closed"?(T(),he(v(J),{key:1,variant:"outline",size:"sm",onClick:G=>L(U)},{default:D(()=>[...j[28]||(j[28]=[W(" Reopen ",-1)])]),_:1},8,["onClick"])):se("",!0)])])]))),128))])])):se("",!0),n.value==="fiscal"?(T(),R("div",NPt,[u("div",jPt,[j[30]||(j[30]=u("h2",{class:"text-lg font-medium text-gray-900"},"Fiscal Calendar",-1)),u("div",FPt,[b(v(Qe),{modelValue:s.value,"onUpdate:modelValue":j[10]||(j[10]=U=>s.value=U),options:w,placeholder:"Select year",class:"w-32"},null,8,["modelValue"]),b(v(J),{onClick:z},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),j[29]||(j[29]=W(" New Fiscal Year ",-1))]),_:1})])]),u("div",BPt,[u("div",zPt,[j[31]||(j[31]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Period Calendar",-1)),u("div",UPt,[(T(!0),R(xe,null,_e(y.value,U=>(T(),R("div",{key:U.name,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[u("div",null,[u("p",HPt,$(U.name),1),u("p",qPt,$(U.periods)+" periods",1)]),u("div",WPt,[u("div",{class:pe(["w-3 h-3 rounded-full",U.status==="complete"?"bg-green-500":U.status==="partial"?"bg-yellow-500":"bg-gray-300"])},null,2),u("span",GPt,$(U.status),1)])]))),128))])]),u("div",YPt,[j[39]||(j[39]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Fiscal Year Summary",-1)),u("div",KPt,[u("div",XPt,[j[32]||(j[32]=u("span",{class:"text-sm text-gray-600"},"Total Periods:",-1)),u("span",QPt,$(x.value.totalPeriods),1)]),u("div",ZPt,[j[33]||(j[33]=u("span",{class:"text-sm text-gray-600"},"Open Periods:",-1)),u("span",JPt,$(x.value.openPeriods),1)]),u("div",e6t,[j[34]||(j[34]=u("span",{class:"text-sm text-gray-600"},"Closed Periods:",-1)),u("span",t6t,$(x.value.closedPeriods),1)]),u("div",n6t,[j[35]||(j[35]=u("span",{class:"text-sm text-gray-600"},"Companies:",-1)),u("span",r6t,$(x.value.companies),1)])]),u("div",s6t,[j[38]||(j[38]=u("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Quick Actions",-1)),u("div",i6t,[b(v(J),{variant:"outline",size:"sm",class:"w-full justify-start"},{default:D(()=>[b(v(vt),{class:"h-4 w-4 mr-2"}),j[36]||(j[36]=W(" Generate Period Report ",-1))]),_:1}),b(v(J),{variant:"outline",size:"sm",class:"w-full justify-start"},{default:D(()=>[b(v(ha),{class:"h-4 w-4 mr-2"}),j[37]||(j[37]=W(" Configure Auto-close ",-1))]),_:1})])])])])])):se("",!0),n.value==="types"?(T(),R("div",a6t,[u("div",o6t,[j[41]||(j[41]=u("h2",{class:"text-lg font-medium text-gray-900"},"Period Types",-1)),b(v(J),{onClick:N},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),j[40]||(j[40]=W(" New Type ",-1))]),_:1})]),u("div",l6t,[(T(!0),R(xe,null,_e(g.value,U=>(T(),R("div",{key:U.name,class:"bg-white border border-gray-200 rounded-lg p-6"},[u("div",u6t,[u("div",d6t,[u("h3",c6t,$(U.period_type_name),1),u("p",f6t,$(U.description||"Period type configuration"),1),u("div",p6t,[b(v(De),{variant:U.is_active?"success":"secondary"},{default:D(()=>[W($(U.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),b(v(De),{variant:U.is_default?"info":"secondary"},{default:D(()=>[W($(U.is_default?"Default":"Custom"),1)]),_:2},1032,["variant"])])]),b(v(J),{variant:"ghost",size:"sm",onClick:G=>q(U)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",h6t,[u("div",m6t,[j[42]||(j[42]=u("span",null,"Frequency:",-1)),u("span",null,$(U.frequency),1)]),u("div",g6t,[j[43]||(j[43]=u("span",null,"Duration (days):",-1)),u("span",null,$(U.duration_days),1)]),u("div",v6t,[j[44]||(j[44]=u("span",null,"Auto-close:",-1)),u("span",null,$(U.auto_close?"Yes":"No"),1)]),u("div",y6t,[j[45]||(j[45]=u("span",null,"Carry Forward:",-1)),u("span",null,$(U.carry_forward?"Yes":"No"),1)])])]))),128))])])):se("",!0),n.value==="settings"?(T(),R("div",b6t,[u("div",x6t,[j[55]||(j[55]=u("h2",{class:"text-lg font-medium text-gray-900"},"Period Management Settings",-1)),u("div",_6t,[u("div",w6t,[j[49]||(j[49]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"General Settings",-1)),u("div",k6t,[u("div",null,[j[46]||(j[46]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Default Fiscal Year Start ",-1)),b(v($n),{modelValue:_.value.defaultFiscalStart,"onUpdate:modelValue":j[11]||(j[11]=U=>_.value.defaultFiscalStart=U),type:"date",class:"w-full"},null,8,["modelValue"])]),u("div",null,[j[47]||(j[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Auto-close Threshold (days) ",-1)),b(v($n),{modelValue:_.value.autoCloseThreshold,"onUpdate:modelValue":j[12]||(j[12]=U=>_.value.autoCloseThreshold=U),type:"number",class:"w-full"},null,8,["modelValue"])]),u("div",S6t,[we(u("input",{id:"allowOverlap","onUpdate:modelValue":j[13]||(j[13]=U=>_.value.allowPeriodOverlap=U),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Rn,_.value.allowPeriodOverlap]]),j[48]||(j[48]=u("label",{for:"allowOverlap",class:"ml-2 block text-sm text-gray-900"}," Allow period overlap ",-1))])])]),u("div",C6t,[j[53]||(j[53]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Notifications",-1)),u("div",A6t,[u("div",T6t,[we(u("input",{id:"notifyPeriodClose","onUpdate:modelValue":j[14]||(j[14]=U=>_.value.notifyOnPeriodClose=U),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Rn,_.value.notifyOnPeriodClose]]),j[50]||(j[50]=u("label",{for:"notifyPeriodClose",class:"ml-2 block text-sm text-gray-900"}," Notify on period close ",-1))]),u("div",$6t,[we(u("input",{id:"notifyPeriodOpen","onUpdate:modelValue":j[15]||(j[15]=U=>_.value.notifyOnPeriodOpen=U),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Rn,_.value.notifyOnPeriodOpen]]),j[51]||(j[51]=u("label",{for:"notifyPeriodOpen",class:"ml-2 block text-sm text-gray-900"}," Notify on period open ",-1))]),u("div",M6t,[we(u("input",{id:"notifyUpcoming","onUpdate:modelValue":j[16]||(j[16]=U=>_.value.notifyUpcomingPeriods=U),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Rn,_.value.notifyUpcomingPeriods]]),j[52]||(j[52]=u("label",{for:"notifyUpcoming",class:"ml-2 block text-sm text-gray-900"}," Notify upcoming periods ",-1))])])])]),u("div",E6t,[b(v(J),{onClick:V},{default:D(()=>[...j[54]||(j[54]=[W(" Save Settings ",-1)])]),_:1})])])])):se("",!0)])]),b(yRt,{show:i.value,"onUpdate:show":j[17]||(j[17]=U=>i.value=U),"period-data":o.value,"is-edit-mode":a.value,onSaved:I},null,8,["show","period-data","is-edit-mode"])]))}},R6t={class:"space-y-6"},P6t={class:"flex items-center justify-between"},I6t={class:"flex items-center space-x-3"},O6t={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},L6t={class:"bg-white rounded-lg border border-gray-200 p-6"},V6t={class:"flex items-center"},N6t={class:"p-2 bg-green-100 rounded-lg"},j6t={class:"ml-4"},F6t={class:"text-2xl font-bold text-gray-900"},B6t={class:"bg-white rounded-lg border border-gray-200 p-6"},z6t={class:"flex items-center"},U6t={class:"p-2 bg-blue-100 rounded-lg"},H6t={class:"ml-4"},q6t={class:"text-2xl font-bold text-gray-900"},W6t={class:"bg-white rounded-lg border border-gray-200 p-6"},G6t={class:"flex items-center"},Y6t={class:"p-2 bg-red-100 rounded-lg"},K6t={class:"ml-4"},X6t={class:"text-2xl font-bold text-gray-900"},Q6t={class:"text-xs text-red-600 mt-1"},Z6t={class:"bg-white rounded-lg border border-gray-200 p-6"},J6t={class:"flex items-center"},eIt={class:"p-2 bg-purple-100 rounded-lg"},tIt={class:"ml-4"},nIt={class:"text-2xl font-bold text-gray-900"},rIt={class:"text-xs text-purple-600 mt-1"},sIt={class:"bg-white rounded-lg border border-gray-200"},iIt={class:"border-b border-gray-200"},aIt={class:"flex"},oIt={class:"p-6"},lIt={key:0},uIt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},dIt={class:"bg-white border border-gray-200 rounded-lg p-6"},cIt={class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},fIt={class:"text-center"},pIt={class:"bg-white border border-gray-200 rounded-lg p-6"},hIt={class:"space-y-4"},mIt={class:"flex-1"},gIt={class:"text-sm font-medium text-gray-900"},vIt={class:"text-xs text-gray-500"},yIt={class:"text-right"},bIt={class:"text-lg font-bold text-gray-900"},xIt={class:"mt-6 bg-white border border-gray-200 rounded-lg p-6"},_It={class:"space-y-4"},wIt={class:"flex items-center space-x-3"},kIt={class:"text-sm font-medium text-gray-900"},SIt={class:"text-xs text-gray-500"},CIt={class:"text-right"},AIt={class:"text-sm font-medium text-gray-900"},TIt={class:"text-xs text-gray-500"},$It={key:1},MIt={class:"flex items-center justify-between mb-6"},EIt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},DIt={class:"flex items-start justify-between mb-4"},RIt={class:"flex-1"},PIt={class:"text-lg font-medium text-gray-900 mb-1"},IIt={class:"text-sm text-gray-600 mb-2"},OIt={class:"flex items-center space-x-2"},LIt={class:"space-y-2 text-sm text-gray-500"},VIt={class:"flex justify-between"},NIt={class:"flex justify-between"},jIt={class:"flex justify-between"},FIt={class:"flex justify-between"},BIt={key:2},zIt={class:"space-y-4"},UIt={class:"flex items-center justify-between"},HIt={class:"flex items-center space-x-3"},qIt={class:"space-y-4"},WIt={class:"flex items-start justify-between mb-4"},GIt={class:"flex-1"},YIt={class:"flex items-center space-x-2 mb-2"},KIt={class:"text-lg font-medium text-gray-900 mb-1"},XIt={class:"text-sm text-gray-600 mb-2"},QIt={class:"text-sm text-gray-500"},ZIt={class:"flex items-center space-x-2"},JIt={class:"flex items-center justify-between text-sm text-gray-500"},eOt={key:3},tOt={class:"space-y-4"},nOt={class:"flex items-center justify-between"},rOt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},sOt=["onClick"],iOt={class:"flex items-start justify-between mb-4"},aOt={class:"flex-1"},oOt={class:"text-lg font-medium text-gray-900 mb-1"},lOt={class:"text-sm text-gray-600 mb-2"},uOt={class:"text-sm text-gray-500"},dOt={__name:"DataQuality",setup(t){const e=_n(),n=TA(),r=Q("dashboard"),s=Q(""),i=Q(!1),a=Q(87),o=Q(15420),l=Q(12),d=Q(3),c=Q(8),f=Q([{name:"completeness",label:"Data Completeness",description:"Percentage of required fields filled",value:92,trend:1.5},{name:"accuracy",label:"Data Accuracy",description:"Percentage of accurate data entries",value:89,trend:-.8},{name:"consistency",label:"Data Consistency",description:"Percentage of consistent data across records",value:94,trend:2.1},{name:"timeliness",label:"Data Timeliness",description:"Percentage of data updated within timeframe",value:78,trend:3.2}]),p=Q([{id:1,rule_name:"Required Field Validation",doctype:"Audit Engagement",records_checked:150,issues_found:5,status:"completed",checked_at:new Date().toISOString()},{id:2,rule_name:"Date Format Validation",doctype:"Finding",records_checked:89,issues_found:12,status:"completed",checked_at:new Date(Date.now()-36e5).toISOString()},{id:3,rule_name:"Numeric Range Validation",doctype:"Working Paper",records_checked:234,issues_found:0,status:"completed",checked_at:new Date(Date.now()-72e5).toISOString()}]),h=Q([{name:"rule_1",rule_name:"Required Field Check",description:"Ensures all required fields are filled",is_active:!0,rule_type:"Required Field",target_doctype:"Audit Engagement",target_field:null,severity_level:"High",last_run:new Date().toISOString()},{name:"rule_2",rule_name:"Date Format Validation",description:"Validates date fields are in correct format",is_active:!0,rule_type:"Format Check",target_doctype:"Finding",target_field:"finding_date",severity_level:"Medium",last_run:new Date(Date.now()-36e5).toISOString()}]),m=Q([{name:"alert_1",alert_title:"Missing Required Fields",alert_description:"12 audit engagements have missing required fields",severity:"High",status:"Open",rule_name:"Required Field Check",target_doctype:"Audit Engagement",affected_records:12,creation:new Date().toISOString()},{name:"alert_2",alert_title:"Invalid Date Formats",alert_description:"8 findings have invalid date formats",severity:"Medium",status:"Open",rule_name:"Date Format Validation",target_doctype:"Finding",affected_records:8,creation:new Date(Date.now()-36e5).toISOString()}]),g=Q([{id:1,report_name:"Monthly Data Quality Report",description:"Comprehensive quality assessment for the current month",status:"Generated",generated_at:new Date().toISOString()},{id:2,report_name:"Critical Issues Summary",description:"Summary of all critical data quality issues",status:"Generated",generated_at:new Date(Date.now()-864e5).toISOString()}]),y=[{label:"All Alerts",value:""},{label:"Open",value:"Open"},{label:"Resolved",value:"Resolved"},{label:"Critical",value:"Critical"}],x=Z(()=>{let V=m.value;return s.value==="Open"?V=V.filter(O=>O.status==="Open"):s.value==="Resolved"?V=V.filter(O=>O.status==="Resolved"):s.value==="Critical"&&(V=V.filter(O=>O.severity==="High")),V}),_=()=>ue(this,null,function*(){i.value=!0;try{yield n.fetchDataQualityMetrics()}catch(V){console.error("Error loading data quality metrics:",V)}finally{i.value=!1}}),k=V=>({completed:"bg-green-500",failed:"bg-red-500",running:"bg-yellow-500"})[V]||"bg-gray-500",w=V=>({"Required Field":"warning","Format Check":"info","Range Check":"success","Duplicate Check":"secondary","Reference Check":"info"})[V]||"secondary",S=V=>({High:"danger",Medium:"warning",Low:"info"})[V]||"secondary",C=V=>({Open:"warning",Resolved:"success",Dismissed:"secondary"})[V]||"secondary",A=V=>({Generated:"success",Generating:"warning",Failed:"danger"})[V]||"secondary",M=V=>V?new Date(V).toLocaleString():"N/A",E=()=>{e.push("/data-quality/rule/new")},P=V=>{e.push(`/data-quality/rule/${V.name}/edit`)},I=V=>{e.push(`/data-quality/alert/${V.name}`)},F=V=>{V.status="Resolved"},L=()=>{m.value=m.value.filter(V=>V.status!=="Resolved")},z=()=>{e.push("/data-quality/report/generate")},N=V=>{e.push(`/data-quality/report/${V.id}`)},q=V=>{console.log("Downloading report:",V.report_name)};return yt(()=>ue(this,null,function*(){yield _()})),(V,O)=>(T(),R("div",R6t,[u("div",P6t,[O[7]||(O[7]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Data Quality"),u("p",{class:"text-gray-600 mt-1"}," Monitor data quality metrics and manage data validation rules ")],-1)),u("div",I6t,[b(v(J),{variant:"outline"},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),O[5]||(O[5]=W(" Export Report ",-1))]),_:1}),b(v(J),{onClick:E},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),O[6]||(O[6]=W(" New Rule ",-1))]),_:1})])]),u("div",O6t,[u("div",L6t,[u("div",V6t,[u("div",N6t,[b(v(Kt),{class:"h-6 w-6 text-green-600"})]),u("div",j6t,[O[8]||(O[8]=u("p",{class:"text-sm font-medium text-gray-600"},"Overall Quality Score",-1)),u("p",F6t,$(a.value)+"%",1),O[9]||(O[9]=u("p",{class:"text-xs text-green-600 mt-1"}," 2.1% from last month",-1))])])]),u("div",B6t,[u("div",z6t,[u("div",U6t,[b(v(Kr),{class:"h-6 w-6 text-blue-600"})]),u("div",H6t,[O[10]||(O[10]=u("p",{class:"text-sm font-medium text-gray-600"},"Records Validated",-1)),u("p",q6t,$(o.value),1),O[11]||(O[11]=u("p",{class:"text-xs text-blue-600 mt-1"},"Last 30 days",-1))])])]),u("div",W6t,[u("div",G6t,[u("div",Y6t,[b(v(rn),{class:"h-6 w-6 text-red-600"})]),u("div",K6t,[O[12]||(O[12]=u("p",{class:"text-sm font-medium text-gray-600"},"Active Alerts",-1)),u("p",X6t,$(l.value),1),u("p",Q6t,$(d.value)+" critical",1)])])]),u("div",Z6t,[u("div",J6t,[u("div",eIt,[b(v(Ju),{class:"h-6 w-6 text-purple-600"})]),u("div",tIt,[O[13]||(O[13]=u("p",{class:"text-sm font-medium text-gray-600"},"Validation Rules",-1)),u("p",nIt,$(h.value.length),1),u("p",rIt,$(c.value)+" active",1)])])])]),u("div",sIt,[u("div",iIt,[u("nav",aIt,[u("button",{onClick:O[0]||(O[0]=X=>r.value="dashboard"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Quality Dashboard ",2),u("button",{onClick:O[1]||(O[1]=X=>r.value="rules"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="rules"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Validation Rules ",2),u("button",{onClick:O[2]||(O[2]=X=>r.value="alerts"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="alerts"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Alerts & Issues ",2),u("button",{onClick:O[3]||(O[3]=X=>r.value="reports"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",r.value==="reports"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Quality Reports ",2)])]),u("div",oIt,[r.value==="dashboard"?(T(),R("div",lIt,[u("div",uIt,[u("div",dIt,[O[15]||(O[15]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Quality Score Trend",-1)),u("div",cIt,[u("div",fIt,[b(v(hr),{class:"h-12 w-12 text-gray-400 mx-auto mb-2"}),O[14]||(O[14]=u("p",{class:"text-gray-500"},"Quality score chart will be displayed here",-1))])])]),u("div",pIt,[O[16]||(O[16]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Data Quality Metrics",-1)),u("div",hIt,[(T(!0),R(xe,null,_e(f.value,X=>(T(),R("div",{key:X.name,class:"flex items-center justify-between"},[u("div",mIt,[u("p",gIt,$(X.label),1),u("p",vIt,$(X.description),1)]),u("div",yIt,[u("p",bIt,$(X.value)+"%",1),u("p",{class:pe(["text-xs",X.trend>0?"text-green-600":"text-red-600"])},$(X.trend>0?"":"")+" "+$(Math.abs(X.trend))+"% ",3)])]))),128))])])]),u("div",xIt,[O[17]||(O[17]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Recent Quality Checks",-1)),u("div",_It,[(T(!0),R(xe,null,_e(p.value,X=>(T(),R("div",{key:X.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[u("div",wIt,[u("div",{class:pe(["w-3 h-3 rounded-full",k(X.status)])},null,2),u("div",null,[u("p",kIt,$(X.rule_name),1),u("p",SIt,$(X.doctype)+"  "+$(X.records_checked)+" records",1)])]),u("div",CIt,[u("p",AIt,$(X.issues_found)+" issues",1),u("p",TIt,$(M(X.checked_at)),1)])]))),128))])])])):se("",!0),r.value==="rules"?(T(),R("div",$It,[u("div",MIt,[O[19]||(O[19]=u("h2",{class:"text-lg font-medium text-gray-900"},"Validation Rules",-1)),b(v(J),{onClick:E},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),O[18]||(O[18]=W(" New Rule ",-1))]),_:1})]),u("div",EIt,[(T(!0),R(xe,null,_e(h.value,X=>(T(),R("div",{key:X.name,class:"bg-white border border-gray-200 rounded-lg p-6"},[u("div",DIt,[u("div",RIt,[u("h3",PIt,$(X.rule_name),1),u("p",IIt,$(X.description||"Validation rule"),1),u("div",OIt,[b(v(De),{variant:X.is_active?"success":"secondary"},{default:D(()=>[W($(X.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),b(v(De),{variant:w(X.rule_type)},{default:D(()=>[W($(X.rule_type),1)]),_:2},1032,["variant"])])]),b(v(J),{variant:"ghost",size:"sm",onClick:j=>P(X)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",LIt,[u("div",VIt,[O[20]||(O[20]=u("span",null,"DocType:",-1)),u("span",null,$(X.target_doctype),1)]),u("div",NIt,[O[21]||(O[21]=u("span",null,"Field:",-1)),u("span",null,$(X.target_field||"All fields"),1)]),u("div",jIt,[O[22]||(O[22]=u("span",null,"Severity:",-1)),u("span",null,$(X.severity_level),1)]),u("div",FIt,[O[23]||(O[23]=u("span",null,"Last Run:",-1)),u("span",null,$(X.last_run?M(X.last_run):"Never"),1)])])]))),128))])])):se("",!0),r.value==="alerts"?(T(),R("div",BIt,[u("div",zIt,[u("div",UIt,[O[25]||(O[25]=u("h2",{class:"text-lg font-medium text-gray-900"},"Alerts & Data Quality Issues",-1)),u("div",HIt,[b(v(Qe),{modelValue:s.value,"onUpdate:modelValue":O[4]||(O[4]=X=>s.value=X),options:y,placeholder:"Filter alerts",class:"w-40"},null,8,["modelValue"]),b(v(J),{variant:"outline",onClick:L},{default:D(()=>[...O[24]||(O[24]=[W(" Clear Resolved ",-1)])]),_:1})])]),u("div",qIt,[(T(!0),R(xe,null,_e(x.value,X=>(T(),R("div",{key:X.name,class:"bg-white border border-gray-200 rounded-lg p-6"},[u("div",WIt,[u("div",GIt,[u("div",YIt,[b(v(De),{variant:S(X.severity)},{default:D(()=>[W($(X.severity),1)]),_:2},1032,["variant"]),b(v(De),{variant:C(X.status)},{default:D(()=>[W($(X.status),1)]),_:2},1032,["variant"])]),u("h3",KIt,$(X.alert_title),1),u("p",XIt,$(X.alert_description),1),u("div",QIt," Rule: "+$(X.rule_name)+"  DocType: "+$(X.target_doctype),1)]),u("div",ZIt,[b(v(J),{variant:"ghost",size:"sm",onClick:j=>I(X)},{default:D(()=>[...O[26]||(O[26]=[W(" View Details ",-1)])]),_:1},8,["onClick"]),X.status!=="Resolved"?(T(),he(v(J),{key:0,variant:"ghost",size:"sm",onClick:j=>F(X)},{default:D(()=>[...O[27]||(O[27]=[W(" Resolve ",-1)])]),_:1},8,["onClick"])):se("",!0)])]),u("div",JIt,[u("span",null,"Created: "+$(M(X.creation)),1),u("span",null,"Affected Records: "+$(X.affected_records||0),1)])]))),128))])])])):se("",!0),r.value==="reports"?(T(),R("div",eOt,[u("div",tOt,[u("div",nOt,[O[29]||(O[29]=u("h2",{class:"text-lg font-medium text-gray-900"},"Quality Reports",-1)),b(v(J),{onClick:z},{default:D(()=>[b(v(vt),{class:"h-4 w-4 mr-2"}),O[28]||(O[28]=W(" Generate Report ",-1))]),_:1})]),u("div",rOt,[(T(!0),R(xe,null,_e(g.value,X=>(T(),R("div",{key:X.id,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:j=>N(X)},[u("div",iOt,[u("div",aOt,[u("h3",oOt,$(X.report_name),1),u("p",lOt,$(X.description),1),b(v(De),{variant:A(X.status)},{default:D(()=>[W($(X.status),1)]),_:2},1032,["variant"])]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(j=>q(X),["stop"])},{default:D(()=>[b(v(xn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",uOt," Generated: "+$(M(X.generated_at)),1)],8,sOt))),128))])])])):se("",!0)])])]))}},cOt={class:"flex items-center space-x-4"},fOt={class:"text-lg font-semibold text-gray-900"},pOt={class:"text-sm text-gray-500"},hOt={key:0,class:"ml-auto px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},Od={__name:"SectionHeader",props:{title:{type:String,required:!0},description:{type:String,default:""},icon:{type:String,default:"file-text"},step:{type:[String,Number],default:null},color:{type:String,default:"green"}},setup(t){const e=t,n={"file-text":vt,target:ei,settings:ha,calendar:rr,users:Jr,"book-user":vY,database:Kr,folder:QD},r=Z(()=>n[e.icon]||vt),s={green:{bg:"bg-green-100",icon:"text-green-600"},blue:{bg:"bg-blue-100",icon:"text-blue-600"},purple:{bg:"bg-purple-100",icon:"text-purple-600"},amber:{bg:"bg-amber-100",icon:"text-amber-600"},red:{bg:"bg-red-100",icon:"text-red-600"}},i=Z(()=>{var o;return((o=s[e.color])==null?void 0:o.bg)||s.green.bg}),a=Z(()=>{var o;return((o=s[e.color])==null?void 0:o.icon)||s.green.icon});return(o,l)=>(T(),R("div",cOt,[u("div",{class:pe(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",i.value])},[(T(),he(At(r.value),{class:pe(["h-5 w-5",a.value])},null,8,["class"]))],2),u("div",null,[u("h3",fOt,$(t.title),1),u("p",pOt,$(t.description),1)]),t.step?(T(),R("div",hOt," Step "+$(t.step)+" of 8 ",1)):se("",!0)]))}},mOt={class:"h-[80vh] flex"},gOt={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},vOt={class:"p-5"},yOt={class:"space-y-1"},bOt=["onClick"],xOt={key:1},_Ot={class:"flex-1 min-w-0"},wOt={class:"text-sm font-medium truncate"},kOt={class:"text-xs text-gray-500"},SOt={class:"mt-6 p-4 bg-white rounded-lg border border-gray-200"},COt={class:"flex items-center justify-between mb-2"},AOt={class:"text-sm font-bold text-green-600"},TOt={class:"w-full bg-gray-200 rounded-full h-2"},$Ot={class:"text-xs text-gray-500 mt-2"},MOt={class:"flex-1 overflow-y-auto"},EOt={class:"p-6 max-w-5xl mx-auto"},DOt={class:"space-y-6"},ROt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},POt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},IOt={key:0,class:"mt-1 text-xs text-red-500"},OOt={key:1,class:"mt-1 text-xs text-gray-500"},LOt=["value"],VOt=["value"],NOt={key:0,class:"mt-1 text-xs text-red-500"},jOt={class:"mt-6"},FOt={key:0,class:"mt-1 text-xs text-red-500"},BOt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6"},zOt={class:"space-y-6"},UOt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},HOt={key:0,class:"mt-1 text-xs text-red-500"},qOt={key:0,class:"mt-1 text-xs text-red-500"},WOt={class:"space-y-6"},GOt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},YOt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},KOt=["value"],XOt={class:"relative"},QOt=["value"],ZOt={class:"space-y-6"},JOt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},eLt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},tLt={key:0,class:"mt-1 text-xs text-red-500"},nLt={key:0,class:"mt-1 text-xs text-red-500"},rLt={class:"border-t border-gray-200 pt-6"},sLt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},iLt={class:"bg-blue-50 rounded-lg p-4"},aLt={class:"space-y-3"},oLt={class:"bg-amber-50 rounded-lg p-4"},lLt={class:"space-y-3"},uLt={class:"bg-green-50 rounded-lg p-4"},dLt={class:"space-y-3"},cLt={class:"space-y-6"},fLt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},pLt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},hLt={class:"border-t border-gray-200 pt-6"},mLt={class:"space-y-6"},gLt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},vLt={class:"max-w-md"},yLt={class:"border-t border-gray-200 pt-6"},bLt={class:"space-y-6"},xLt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-8"},_Lt={class:"border-t border-gray-200 pt-6"},wLt={class:"space-y-6"},kLt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},SLt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},CLt={class:"border-t border-gray-200 pt-6"},ALt={class:"border-t border-gray-200 pt-6"},TLt={class:"flex items-center justify-between w-full"},$Lt={class:"flex items-center space-x-4"},MLt={class:"flex items-center space-x-2"},ELt={class:"flex items-center space-x-2"},DLt={class:"flex items-center space-x-3"},RLt={__name:"EngagementForm",props:{modelValue:{type:Boolean,default:!1},engagement:{type:Object,default:null}},emits:["update:modelValue","created","updated","cancelled"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.modelValue,set:re=>r("update:modelValue",re)}),i=Z(()=>{var re;return!!((re=n.engagement)!=null&&re.name)}),a=[{id:"basic",label:"Basic Information",description:"Core details"},{id:"scope",label:"Scope & Objectives",description:"Audit coverage"},{id:"methodology",label:"Methodology",description:"Approach & methods"},{id:"timeline",label:"Timeline",description:"Dates & phases"},{id:"team",label:"Audit Team",description:"Team members"},{id:"contacts",label:"Contacts",description:"Stakeholders"},{id:"data",label:"Data Requirements",description:"Data needs"},{id:"documentation",label:"Documentation",description:"Notes & files"}],o=Q("basic"),l=Jt({engagement_id:"",engagement_title:"",audit_type:"",status:"Planning",planned_audit_reference:"",audit_universe:"",risk_assessment_reference:"",audit_objectives:"",audit_scope:"",scope_exclusions:"",audit_approach:"Risk-Based",materiality_threshold:null,sampling_methodology:"",period_start:"",period_end:"",planning_start:"",planning_end:"",fieldwork_start:"",fieldwork_end:"",reporting_start:"",reporting_end:"",actual_completion_date:"",lead_auditor:"",budgeted_hours:null,process_owner:"",audit_program_reference:"",working_papers_folder:"",notes:"",audit_team:[],key_contacts:[],data_periods:[],bc_data_requirements:[],amendments:[]}),d=Jt({}),c=Q(!1),f=Q(!1),p=[{label:"Planning",value:"Planning"},{label:"Fieldwork",value:"Fieldwork"},{label:"Reporting",value:"Reporting"},{label:"Management Review",value:"Management Review"},{label:"Quality Review",value:"Quality Review"},{label:"Finalized",value:"Finalized"},{label:"Issued",value:"Issued"}],h=[{label:"Financial",value:"Financial"},{label:"Operational",value:"Operational"},{label:"Compliance",value:"Compliance"},{label:"IT",value:"IT"},{label:"Integrated",value:"Integrated"},{label:"Special Investigation",value:"Special Investigation"},{label:"Follow-up",value:"Follow-up"},{label:"Advisory",value:"Advisory"}],m=[{label:"Risk-Based",value:"Risk-Based"},{label:"Controls-Based",value:"Controls-Based"},{label:"Substantive",value:"Substantive"},{label:"Compliance",value:"Compliance"},{label:"Combined",value:"Combined"}],g=[{label:"Random",value:"Random"},{label:"Systematic",value:"Systematic"},{label:"Stratified",value:"Stratified"},{label:"Judgmental",value:"Judgmental"},{label:"Statistical",value:"Statistical"},{label:"100% Testing",value:"100% Testing"}],y=(re,te=[],K=null)=>{const le={};return re.team_member||(le.team_member="Team member is required"),re.role||(le.role="Role is required"),re.planned_hours<0&&(le.planned_hours="Planned hours cannot be negative"),re.actual_hours<0&&(le.actual_hours="Actual hours cannot be negative"),Object.keys(le).length?le:null},x=[{key:"contact_type",label:"Type",width:"140px",fieldType:"select",options:[{label:"Management",value:"Management"},{label:"Process Owner",value:"Process Owner"},{label:"Subject Matter Expert",value:"Subject Matter Expert"},{label:"IT Contact",value:"IT Contact"},{label:"External Auditor",value:"External Auditor"},{label:"Other",value:"Other"}],required:!0},{key:"contact_name",label:"Name",width:"160px",fieldType:"text",required:!0,placeholder:"Enter name"},{key:"designation",label:"Designation",width:"130px",fieldType:"text",placeholder:"Job title"},{key:"department",label:"Department",width:"120px",fieldType:"text",placeholder:"Department"},{key:"email",label:"Email",width:"170px",fieldType:"data",options:"Email",placeholder:"email@example.com"},{key:"phone",label:"Phone",width:"120px",fieldType:"data",placeholder:"+1234567890"},{key:"is_primary",label:"Primary",width:"65px",fieldType:"checkbox",defaultValue:!1}],_=[{name:"contact_type",label:"Contact Type",component:"select",props:{options:[{label:"Management",value:"Management"},{label:"Process Owner",value:"Process Owner"},{label:"Subject Matter Expert",value:"Subject Matter Expert"},{label:"IT Contact",value:"IT Contact"},{label:"External Auditor",value:"External Auditor"},{label:"Other",value:"Other"}],required:!0}},{name:"contact_name",label:"Contact Name",component:"input",props:{type:"text",required:!0}},{name:"designation",label:"Designation",component:"input",props:{type:"text"}},{name:"department",label:"Department",component:"input",props:{type:"text"}},{name:"email",label:"Email",component:"input",props:{type:"email"}},{name:"phone",label:"Phone",component:"input",props:{type:"tel"}},{name:"is_primary",label:"Is Primary Contact",component:"checkbox"},{name:"communication_preference",label:"Communication Preference",component:"select",props:{options:[{label:"Email",value:"Email"},{label:"Phone",value:"Phone"},{label:"Meeting",value:"Meeting"},{label:"All",value:"All"}]}},{name:"notes",label:"Notes",component:"textarea",props:{rows:2}}],k=(re,te=[],K=null)=>{const le={};return re.contact_type||(le.contact_type="Contact type is required"),re.contact_name||(le.contact_name="Contact name is required"),re.email&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(re.email)||(le.email="Invalid email address")),re.phone&&(/^[\d\s\-\+\(\)\.]+$/.test(re.phone)||(le.phone="Invalid phone number format")),re.is_primary&&te.length>0&&te.filter((Y,B)=>Y.is_primary&&Y.contact_type===re.contact_type&&B!==K).length>0&&(le.is_primary=`Only one primary contact allowed per contact type (${re.contact_type})`),Object.keys(le).length?le:null},w=[{key:"period_name",label:"Period Name",width:"200px",fieldType:"text",required:!0,placeholder:"e.g., Q1 2024"},{key:"start_date",label:"Start Date",width:"130px",fieldType:"date",required:!0},{key:"end_date",label:"End Date",width:"130px",fieldType:"date",required:!0},{key:"data_completeness",label:"Completeness",width:"130px",fieldType:"select",options:[{label:"Complete",value:"Complete"},{label:"Partial",value:"Partial"},{label:"Missing",value:"Missing"}],defaultValue:"Complete",component:"Badge",badgeTheme:{Complete:"green",Partial:"orange",Missing:"red"}},{key:"notes",label:"Notes",width:"200px",fieldType:"text",placeholder:"Additional notes"}],S=[{name:"period_name",label:"Period Name",component:"input",props:{type:"text",required:!0}},{name:"start_date",label:"Start Date",component:"input",props:{type:"date",required:!0}},{name:"end_date",label:"End Date",component:"input",props:{type:"date",required:!0}},{name:"data_completeness",label:"Data Completeness",component:"select",props:{options:[{label:"Complete",value:"Complete"},{label:"Partial",value:"Partial"},{label:"Missing",value:"Missing"}]},defaultValue:"Complete"},{name:"notes",label:"Notes",component:"textarea",props:{rows:2}}],C=re=>{const te={};return re.period_name||(te.period_name="Period name is required"),re.start_date||(te.start_date="Start date is required"),re.end_date||(te.end_date="End date is required"),re.start_date&&re.end_date&&new Date(re.end_date)<=new Date(re.start_date)&&(te.end_date="End date must be after start date"),Object.keys(te).length?te:null},A=[{key:"data_type",label:"Type",width:"150px"},{key:"description",label:"Description",width:"250px"},{key:"source_system",label:"Source",width:"120px"},{key:"priority",label:"Priority",width:"100px",component:"Badge"},{key:"status",label:"Status",width:"100px",component:"Badge"}],M=[{name:"data_type",label:"Data Type",component:"select",props:{options:[{label:"General Ledger",value:"General Ledger"},{label:"Accounts Payable",value:"Accounts Payable"},{label:"Accounts Receivable",value:"Accounts Receivable"},{label:"Inventory",value:"Inventory"},{label:"Fixed Assets",value:"Fixed Assets"},{label:"Payroll",value:"Payroll"},{label:"Sales Transactions",value:"Sales Transactions"},{label:"Purchase Transactions",value:"Purchase Transactions"},{label:"Bank Statements",value:"Bank Statements"},{label:"Reconciliations",value:"Reconciliations"},{label:"Other",value:"Other"}],required:!0}},{name:"description",label:"Description",component:"textarea",props:{rows:2,required:!0}},{name:"source_system",label:"Source System",component:"input",props:{type:"text"}},{name:"required_fields",label:"Required Fields",component:"textarea",props:{rows:2}},{name:"date_range_required",label:"Date Range Required",component:"checkbox"},{name:"period_start",label:"Period Start",component:"input",props:{type:"date"}},{name:"period_end",label:"Period End",component:"input",props:{type:"date"}},{name:"priority",label:"Priority",component:"select",props:{options:[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}]},defaultValue:"Medium"},{name:"status",label:"Status",component:"select",props:{options:[{label:"Requested",value:"Requested"},{label:"Received",value:"Received"},{label:"Under Review",value:"Under Review"},{label:"Approved",value:"Approved"},{label:"Rejected",value:"Rejected"}]},defaultValue:"Requested"},{name:"requested_date",label:"Requested Date",component:"input",props:{type:"date"}},{name:"received_date",label:"Received Date",component:"input",props:{type:"date"}},{name:"data_quality_notes",label:"Data Quality Notes",component:"textarea",props:{rows:2}}],E=re=>{const te={};return re.data_type||(te.data_type="Data type is required"),re.description||(te.description="Description is required"),re.period_start&&re.period_end&&new Date(re.period_end)<new Date(re.period_start)&&(te.period_end="Period end date cannot be before period start date"),Object.keys(te).length?te:null},P=[{key:"amendment_date",label:"Date",width:"120px",format:re=>re?new Date(re).toLocaleDateString():"-"},{key:"amendment_type",label:"Type",width:"150px"},{key:"description",label:"Description",width:"250px"},{key:"status",label:"Status",width:"100px",component:"Badge"}],I=[{name:"amendment_date",label:"Amendment Date",component:"input",props:{type:"date",required:!0}},{name:"amendment_type",label:"Amendment Type",component:"select",props:{options:[{label:"Scope Change",value:"Scope Change"},{label:"Timeline Extension",value:"Timeline Extension"},{label:"Budget Adjustment",value:"Budget Adjustment"},{label:"Resource Change",value:"Resource Change"},{label:"Methodology Change",value:"Methodology Change"},{label:"Other",value:"Other"}],required:!0}},{name:"description",label:"Description",component:"textarea",props:{rows:2,required:!0}},{name:"reason",label:"Reason",component:"textarea",props:{rows:2,required:!0}},{name:"approved_by",label:"Approved By",component:Mt,props:{doctype:"User",filters:{enabled:1}}},{name:"impact_on_timeline",label:"Impact on Timeline",component:"textarea",props:{rows:2}},{name:"impact_on_budget",label:"Impact on Budget",component:"textarea",props:{rows:2}},{name:"status",label:"Status",component:"select",props:{options:[{label:"Draft",value:"Draft"},{label:"Approved",value:"Approved"},{label:"Rejected",value:"Rejected"},{label:"Implemented",value:"Implemented"}]},defaultValue:"Draft"}],F=re=>{const te={};return re.amendment_date||(te.amendment_date="Amendment date is required"),re.amendment_type||(te.amendment_type="Amendment type is required"),re.description||(te.description="Description is required"),re.reason||(te.reason="Reason is required"),(re.status==="Approved"||re.status==="Implemented")&&!re.approved_by&&(te.approved_by=`Approval required for status: ${re.status}`),Object.keys(te).length?te:null},L=Z(()=>a.findIndex(re=>re.id===o.value)),z=re=>{switch(re){case"basic":return l.engagement_title&&l.audit_type&&l.audit_universe?"complete":l.engagement_title||l.audit_type?"partial":"incomplete";case"scope":return l.audit_objectives&&l.audit_scope?"complete":l.audit_objectives||l.audit_scope?"partial":"incomplete";case"methodology":return l.audit_approach?"complete":"incomplete";case"timeline":return l.period_start&&l.period_end?"complete":l.period_start||l.period_end?"partial":"incomplete";case"team":return l.lead_auditor&&l.audit_team.length>0?"complete":l.lead_auditor||l.audit_team.length>0?"partial":"incomplete";case"contacts":return l.key_contacts.length>0?"complete":"incomplete";case"data":return l.data_periods.length>0||l.bc_data_requirements.length>0?"complete":"incomplete";case"documentation":return"complete";default:return"incomplete"}},N=re=>{const te=z(re);return te==="complete"?"bg-green-500 text-white":te==="partial"?"bg-amber-500 text-white":"bg-gray-300 text-gray-600"},q=Z(()=>a.filter(re=>z(re.id)==="complete").length),V=Z(()=>Math.round(q.value/a.length*100)),O=Z(()=>!!(l.engagement_title&&l.audit_type&&l.audit_universe&&l.audit_objectives&&l.audit_scope&&l.audit_approach&&l.period_start&&l.period_end&&l.lead_auditor&&l.audit_team.length>0)),X=()=>{const re=L.value;re>0&&(o.value=a[re-1].id)},j=()=>{const re=L.value;re<a.length-1&&(o.value=a[re+1].id)},U=()=>{const re={};return l.engagement_title||(re.engagement_title="Engagement title is required"),l.audit_type||(re.audit_type="Audit type is required"),l.audit_universe||(re.audit_universe="Audit universe is required"),l.audit_objectives||(re.audit_objectives="Audit objectives are required"),l.audit_scope||(re.audit_scope="Audit scope is required"),l.period_start||(re.period_start="Period start is required"),l.period_end||(re.period_end="Period end is required"),l.lead_auditor||(re.lead_auditor="Lead auditor is required"),l.period_start&&l.period_end&&new Date(l.period_end)<new Date(l.period_start)&&(re.period_end="Period end must be after period start"),l.audit_team.length===0&&(re.audit_team="At least one team member is required"),Object.assign(d,re),Object.keys(re).length===0},G=()=>ze(ge({},l),{audit_team:l.audit_team.map(re=>ze(ge({},re),{doctype:"Audit Team Member"})),key_contacts:l.key_contacts.map(re=>ze(ge({},re),{doctype:"Audit Contact"})),data_periods:l.data_periods.map(re=>ze(ge({},re),{doctype:"Audit Engagement Data Period"})),bc_data_requirements:l.bc_data_requirements.map(re=>ze(ge({},re),{doctype:"Audit Data Requirement"})),amendments:l.amendments.map(re=>ze(ge({},re),{doctype:"Engagement Amendment"}))}),ee=()=>ue(this,null,function*(){if(!U()){const re=a.find(te=>z(te.id)!=="complete");re&&(o.value=re.id);return}try{c.value=!0;const re=G();i.value?r("updated",ze(ge({},re),{name:n.engagement.name})):r("created",re),s.value=!1}catch(re){console.error("Error saving engagement:",re)}finally{c.value=!1}}),ie=()=>ue(this,null,function*(){try{f.value=!0;const re=G();r("created",ze(ge({},re),{status:"Planning"})),s.value=!1}catch(re){console.error("Error saving draft:",re)}finally{f.value=!1}}),ne=()=>{r("cancelled"),s.value=!1},ce=()=>{Object.keys(l).forEach(re=>{Array.isArray(l[re])?l[re]=[]:typeof l[re]=="number"?l[re]=null:l[re]=""}),l.status="Planning",l.audit_approach="Risk-Based",Object.keys(d).forEach(re=>delete d[re]),o.value="basic"},oe=re=>{re&&Object.keys(l).forEach(te=>{re[te]!==void 0&&(l[te]=re[te])})};return et(()=>n.modelValue,re=>{re&&(n.engagement?oe(n.engagement):ce())}),et(()=>n.engagement,re=>{re&&n.modelValue&&oe(re)},{deep:!0}),(re,te)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":te[32]||(te[32]=K=>s.value=K),options:{title:i.value?"Edit Audit Engagement":"Create New Audit Engagement",size:"full"}},{"body-content":D(()=>[u("div",mOt,[u("div",gOt,[u("div",vOt,[te[34]||(te[34]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Form Sections",-1)),u("nav",yOt,[(T(),R(xe,null,_e(a,(K,le)=>u("button",{key:K.id,onClick:H=>o.value=K.id,class:pe(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-left transition-all",[o.value===K.id?"bg-green-100 border border-green-300 text-green-800":"hover:bg-gray-100 text-gray-700"]])},[u("div",{class:pe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold flex-shrink-0",N(K.id)])},[z(K.id)==="complete"?(T(),he(v(Fr),{key:0,class:"h-3 w-3"})):(T(),R("span",xOt,$(le+1),1))],2),u("div",_Ot,[u("div",wOt,$(K.label),1),u("div",kOt,$(K.description),1)])],10,bOt)),64))]),u("div",SOt,[u("div",COt,[te[33]||(te[33]=u("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),u("span",AOt,$(V.value)+"%",1)]),u("div",TOt,[u("div",{class:"bg-green-500 h-2 rounded-full transition-all duration-300",style:rt({width:`${V.value}%`})},null,4)]),u("p",$Ot,$(q.value)+" of "+$(a.length)+" sections complete ",1)])])]),u("div",MOt,[u("div",EOt,[we(u("div",DOt,[b(Od,{title:"Basic Information",description:"Essential engagement details and identification",icon:"file-text",step:"1"}),u("div",ROt,[u("div",POt,[u("div",null,[te[35]||(te[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Engagement ID "),u("span",{class:"text-red-500"},"*")],-1)),we(u("input",{"onUpdate:modelValue":te[0]||(te[0]=K=>l.engagement_id=K),type:"text",placeholder:"Auto-generated if left blank",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.engagement_id?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.engagement_id]]),d.engagement_id?(T(),R("p",IOt,$(d.engagement_id),1)):(T(),R("p",OOt,"Format: AE-YYYY-XXX"))]),u("div",null,[te[36]||(te[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Status "),u("span",{class:"text-red-500"},"*")],-1)),we(u("select",{"onUpdate:modelValue":te[1]||(te[1]=K=>l.status=K),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[(T(),R(xe,null,_e(p,K=>u("option",{key:K.value,value:K.value},$(K.label),9,LOt)),64))],512),[[vn,l.status]])]),u("div",null,[te[38]||(te[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Type "),u("span",{class:"text-red-500"},"*")],-1)),we(u("select",{"onUpdate:modelValue":te[2]||(te[2]=K=>l.audit_type=K),class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.audit_type?"border-red-300":"border-gray-300"])},[te[37]||(te[37]=u("option",{value:""},"Select audit type",-1)),(T(),R(xe,null,_e(h,K=>u("option",{key:K.value,value:K.value},$(K.label),9,VOt)),64))],2),[[vn,l.audit_type]]),d.audit_type?(T(),R("p",NOt,$(d.audit_type),1)):se("",!0)])]),u("div",jOt,[te[39]||(te[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Engagement Title "),u("span",{class:"text-red-500"},"*")],-1)),we(u("input",{"onUpdate:modelValue":te[3]||(te[3]=K=>l.engagement_title=K),type:"text",placeholder:"Enter a descriptive engagement title",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.engagement_title?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.engagement_title]]),d.engagement_title?(T(),R("p",FOt,$(d.engagement_title),1)):se("",!0)]),u("div",BOt,[u("div",null,[te[40]||(te[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Universe "),u("span",{class:"text-red-500"},"*")],-1)),b(Mt,{modelValue:l.audit_universe,"onUpdate:modelValue":te[4]||(te[4]=K=>l.audit_universe=K),doctype:"Audit Universe",placeholder:"Select audit universe",required:!0,error:d.audit_universe},null,8,["modelValue","error"])]),u("div",null,[te[41]||(te[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Planned Audit Reference ",-1)),b(Mt,{modelValue:l.planned_audit_reference,"onUpdate:modelValue":te[5]||(te[5]=K=>l.planned_audit_reference=K),doctype:"Annual Audit Plan Item",placeholder:"Link to annual plan"},null,8,["modelValue"])]),u("div",null,[te[42]||(te[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Risk Assessment Reference ",-1)),b(Mt,{modelValue:l.risk_assessment_reference,"onUpdate:modelValue":te[6]||(te[6]=K=>l.risk_assessment_reference=K),doctype:"Risk Assessment",placeholder:"Link to risk assessment"},null,8,["modelValue"])])])])],512),[[lt,o.value==="basic"]]),we(u("div",zOt,[b(Od,{title:"Audit Scope & Objectives",description:"Define what the audit will cover and its goals",icon:"target",step:"2"}),u("div",UOt,[u("div",null,[te[43]||(te[43]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Objectives "),u("span",{class:"text-red-500"},"*")],-1)),we(u("textarea",{"onUpdate:modelValue":te[7]||(te[7]=K=>l.audit_objectives=K),rows:"4",placeholder:"Describe the primary objectives of this audit engagement...",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.audit_objectives?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.audit_objectives]]),d.audit_objectives?(T(),R("p",HOt,$(d.audit_objectives),1)):se("",!0)]),u("div",null,[te[44]||(te[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Scope "),u("span",{class:"text-red-500"},"*")],-1)),we(u("textarea",{"onUpdate:modelValue":te[8]||(te[8]=K=>l.audit_scope=K),rows:"4",placeholder:"Define the boundaries and areas covered by this audit...",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition",d.audit_scope?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.audit_scope]]),d.audit_scope?(T(),R("p",qOt,$(d.audit_scope),1)):se("",!0)]),u("div",null,[te[45]||(te[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Scope Exclusions ",-1)),we(u("textarea",{"onUpdate:modelValue":te[9]||(te[9]=K=>l.scope_exclusions=K),rows:"3",placeholder:"Specify any areas explicitly excluded from this audit...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Rt,l.scope_exclusions]])])])],512),[[lt,o.value==="scope"]]),we(u("div",WOt,[b(Od,{title:"Audit Methodology",description:"Define the approach and methods to be used",icon:"settings",step:"3"}),u("div",GOt,[u("div",YOt,[u("div",null,[te[46]||(te[46]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Audit Approach "),u("span",{class:"text-red-500"},"*")],-1)),we(u("select",{"onUpdate:modelValue":te[10]||(te[10]=K=>l.audit_approach=K),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[(T(),R(xe,null,_e(m,K=>u("option",{key:K.value,value:K.value},$(K.label),9,KOt)),64))],512),[[vn,l.audit_approach]])]),u("div",null,[te[48]||(te[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Materiality Threshold ",-1)),u("div",XOt,[te[47]||(te[47]=u("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},"$",-1)),we(u("input",{"onUpdate:modelValue":te[11]||(te[11]=K=>l.materiality_threshold=K),type:"number",min:"0",step:"100",placeholder:"0.00",class:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Rt,l.materiality_threshold,void 0,{number:!0}]])])]),u("div",null,[te[49]||(te[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Sampling Methodology ",-1)),we(u("select",{"onUpdate:modelValue":te[12]||(te[12]=K=>l.sampling_methodology=K),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[(T(),R(xe,null,_e(g,K=>u("option",{key:K.value,value:K.value},$(K.label),9,QOt)),64))],512),[[vn,l.sampling_methodology]])])])])],512),[[lt,o.value==="methodology"]]),we(u("div",ZOt,[b(Od,{title:"Audit Period & Timeline",description:"Set the audit period and key milestone dates",icon:"calendar",step:"4"}),u("div",JOt,[u("div",null,[te[52]||(te[52]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Audit Period",-1)),u("div",eLt,[u("div",null,[te[50]||(te[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Period Start "),u("span",{class:"text-red-500"},"*")],-1)),we(u("input",{"onUpdate:modelValue":te[13]||(te[13]=K=>l.period_start=K),type:"date",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",d.period_start?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.period_start]]),d.period_start?(T(),R("p",tLt,$(d.period_start),1)):se("",!0)]),u("div",null,[te[51]||(te[51]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Period End "),u("span",{class:"text-red-500"},"*")],-1)),we(u("input",{"onUpdate:modelValue":te[14]||(te[14]=K=>l.period_end=K),type:"date",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",d.period_end?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.period_end]]),d.period_end?(T(),R("p",nLt,$(d.period_end),1)):se("",!0)])])]),u("div",rLt,[te[62]||(te[62]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Engagement Timeline",-1)),u("div",sLt,[u("div",iLt,[te[55]||(te[55]=u("h5",{class:"text-sm font-medium text-blue-800 mb-3"},"Planning Phase",-1)),u("div",aLt,[u("div",null,[te[53]||(te[53]=u("label",{class:"block text-xs font-medium text-blue-700 mb-1"},"Start Date",-1)),we(u("input",{"onUpdate:modelValue":te[15]||(te[15]=K=>l.planning_start=K),type:"date",class:"w-full px-2 py-1.5 text-sm border border-blue-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[Rt,l.planning_start]])]),u("div",null,[te[54]||(te[54]=u("label",{class:"block text-xs font-medium text-blue-700 mb-1"},"End Date",-1)),we(u("input",{"onUpdate:modelValue":te[16]||(te[16]=K=>l.planning_end=K),type:"date",class:"w-full px-2 py-1.5 text-sm border border-blue-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[Rt,l.planning_end]])])])]),u("div",oLt,[te[58]||(te[58]=u("h5",{class:"text-sm font-medium text-amber-800 mb-3"},"Fieldwork Phase",-1)),u("div",lLt,[u("div",null,[te[56]||(te[56]=u("label",{class:"block text-xs font-medium text-amber-700 mb-1"},"Start Date",-1)),we(u("input",{"onUpdate:modelValue":te[17]||(te[17]=K=>l.fieldwork_start=K),type:"date",class:"w-full px-2 py-1.5 text-sm border border-amber-200 rounded focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[Rt,l.fieldwork_start]])]),u("div",null,[te[57]||(te[57]=u("label",{class:"block text-xs font-medium text-amber-700 mb-1"},"End Date",-1)),we(u("input",{"onUpdate:modelValue":te[18]||(te[18]=K=>l.fieldwork_end=K),type:"date",class:"w-full px-2 py-1.5 text-sm border border-amber-200 rounded focus:ring-2 focus:ring-amber-500 focus:border-transparent"},null,512),[[Rt,l.fieldwork_end]])])])]),u("div",uLt,[te[61]||(te[61]=u("h5",{class:"text-sm font-medium text-green-800 mb-3"},"Reporting Phase",-1)),u("div",dLt,[u("div",null,[te[59]||(te[59]=u("label",{class:"block text-xs font-medium text-green-700 mb-1"},"Start Date",-1)),we(u("input",{"onUpdate:modelValue":te[19]||(te[19]=K=>l.reporting_start=K),type:"date",class:"w-full px-2 py-1.5 text-sm border border-green-200 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Rt,l.reporting_start]])]),u("div",null,[te[60]||(te[60]=u("label",{class:"block text-xs font-medium text-green-700 mb-1"},"End Date",-1)),we(u("input",{"onUpdate:modelValue":te[20]||(te[20]=K=>l.reporting_end=K),type:"date",class:"w-full px-2 py-1.5 text-sm border border-green-200 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Rt,l.reporting_end]])])])])])])])],512),[[lt,o.value==="timeline"]]),we(u("div",cLt,[b(Od,{title:"Audit Team",description:"Assign team members and define roles",icon:"users",step:"5"}),u("div",fLt,[u("div",pLt,[u("div",null,[te[63]||(te[63]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Lead Auditor "),u("span",{class:"text-red-500"},"*")],-1)),b(Mt,{modelValue:l.lead_auditor,"onUpdate:modelValue":te[21]||(te[21]=K=>l.lead_auditor=K),doctype:"User",filters:{enabled:1},placeholder:"Select lead auditor",required:!0,error:d.lead_auditor},null,8,["modelValue","error"])]),u("div",null,[te[64]||(te[64]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Budgeted Hours ",-1)),we(u("input",{"onUpdate:modelValue":te[22]||(te[22]=K=>l.budgeted_hours=K),type:"number",min:"0",step:"0.5",placeholder:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Rt,l.budgeted_hours,void 0,{number:!0}]])])]),u("div",hLt,[b(_0,{modelValue:l.audit_team,"onUpdate:modelValue":te[23]||(te[23]=K=>l.audit_team=K),title:"Audit Team Members","modal-title":"Team Member",doctype:"Audit Team Member",validate:y,required:!0,"auto-add-row":!0},null,8,["modelValue"])])])],512),[[lt,o.value==="team"]]),we(u("div",mLt,[b(Od,{title:"Auditee Information",description:"Process owners and key stakeholder contacts",icon:"book-user",step:"6"}),u("div",gLt,[u("div",vLt,[te[65]||(te[65]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Process Owner ",-1)),b(Mt,{modelValue:l.process_owner,"onUpdate:modelValue":te[24]||(te[24]=K=>l.process_owner=K),doctype:"User",filters:{enabled:1},placeholder:"Select process owner"},null,8,["modelValue"])]),u("div",yLt,[b(_0,{modelValue:l.key_contacts,"onUpdate:modelValue":te[25]||(te[25]=K=>l.key_contacts=K),title:"Key Contacts","modal-title":"Contact",columns:x,"form-fields":_,validate:k,"auto-add-row":!0},null,8,["modelValue"])])])],512),[[lt,o.value==="contacts"]]),we(u("div",bLt,[b(Od,{title:"Data Requirements",description:"Define data periods and BC data needs",icon:"database",step:"7"}),u("div",xLt,[b(_0,{modelValue:l.data_periods,"onUpdate:modelValue":te[26]||(te[26]=K=>l.data_periods=K),title:"Data Periods","modal-title":"Data Period",columns:w,"form-fields":S,validate:C,"auto-add-row":!0},null,8,["modelValue"]),u("div",_Lt,[b(da,{modelValue:l.bc_data_requirements,"onUpdate:modelValue":te[27]||(te[27]=K=>l.bc_data_requirements=K),title:"BC Data Requirements","modal-title":"Data Requirement",columns:A,"form-fields":M,validate:E},null,8,["modelValue"])])])],512),[[lt,o.value==="data"]]),we(u("div",wLt,[b(Od,{title:"Documentation & Notes",description:"Working papers, amendments, and additional notes",icon:"folder",step:"8"}),u("div",kLt,[u("div",SLt,[u("div",null,[te[66]||(te[66]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Audit Program Reference ",-1)),b(Mt,{modelValue:l.audit_program_reference,"onUpdate:modelValue":te[28]||(te[28]=K=>l.audit_program_reference=K),doctype:"Audit Program",placeholder:"Link to audit program"},null,8,["modelValue"])]),u("div",null,[te[67]||(te[67]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Working Papers Folder ",-1)),we(u("input",{"onUpdate:modelValue":te[29]||(te[29]=K=>l.working_papers_folder=K),type:"text",placeholder:"Enter folder path or reference",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Rt,l.working_papers_folder]])])]),u("div",CLt,[b(da,{modelValue:l.amendments,"onUpdate:modelValue":te[30]||(te[30]=K=>l.amendments=K),title:"Engagement Amendments","modal-title":"Amendment",columns:P,"form-fields":I,validate:F},null,8,["modelValue"])]),u("div",ALt,[te[68]||(te[68]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Notes ",-1)),we(u("textarea",{"onUpdate:modelValue":te[31]||(te[31]=K=>l.notes=K),rows:"4",placeholder:"Additional notes or comments...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Rt,l.notes]])])])],512),[[lt,o.value==="documentation"]])])])])]),actions:D(()=>[u("div",TLt,[u("div",$Lt,[u("div",MLt,[u("div",{class:pe(["w-3 h-3 rounded-full",O.value?"bg-green-500":"bg-amber-500"])},null,2),u("span",{class:pe(["text-sm font-medium",O.value?"text-green-700":"text-amber-700"])},$(O.value?"Ready to save":"Complete required fields"),3)]),u("div",ELt,[b(v(J),{variant:"ghost",size:"sm",disabled:L.value===0,onClick:X},{default:D(()=>[b(v(gr),{class:"h-4 w-4 mr-1"}),te[69]||(te[69]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(v(J),{variant:"ghost",size:"sm",disabled:L.value===a.length-1,onClick:j},{default:D(()=>[te[70]||(te[70]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4 ml-1"})]),_:1},8,["disabled"])])]),u("div",DLt,[b(v(J),{variant:"outline",onClick:ne,disabled:c.value},{default:D(()=>[...te[71]||(te[71]=[W(" Cancel ",-1)])]),_:1},8,["disabled"]),i.value?se("",!0):(T(),he(v(J),{key:0,variant:"outline",theme:"gray",onClick:ie,loading:f.value,disabled:c.value},{default:D(()=>[...te[72]||(te[72]=[W(" Save as Draft ",-1)])]),_:1},8,["loading","disabled"])),b(v(J),{variant:"solid",theme:"green",onClick:ee,loading:c.value},{prefix:D(()=>[i.value?(T(),he(v(Fr),{key:1,class:"h-4 w-4"})):(T(),he(v(nt),{key:0,class:"h-4 w-4"}))]),default:D(()=>[W(" "+$(i.value?"Update Engagement":"Create Engagement"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","options"]))}},PLt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-6 gap-4"},ILt={class:"bg-green-50 rounded-xl border border-green-200 p-6 hover:shadow-lg transition-shadow"},OLt={class:"flex items-center justify-between"},LLt={class:"text-3xl font-bold text-green-900 mt-1"},VLt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},NLt={class:"bg-blue-50 rounded-xl border border-blue-200 p-6 hover:shadow-lg transition-shadow"},jLt={class:"flex items-center justify-between"},FLt={class:"text-3xl font-bold text-blue-900 mt-1"},BLt={class:"text-xs text-blue-600 mt-1"},zLt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},ULt={class:"bg-purple-50 rounded-xl border border-purple-200 p-6 hover:shadow-lg transition-shadow"},HLt={class:"flex items-center justify-between"},qLt={class:"text-3xl font-bold text-purple-900 mt-1"},WLt={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},GLt={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-6 hover:shadow-lg transition-shadow"},YLt={class:"flex items-center justify-between"},KLt={class:"text-3xl font-bold text-yellow-900 mt-1"},XLt={class:"w-full bg-yellow-200 rounded-full h-2 mt-2"},QLt={class:"p-3 bg-yellow-500 rounded-xl shadow-sm"},ZLt={class:"bg-indigo-50 rounded-xl border border-indigo-200 p-6 hover:shadow-lg transition-shadow"},JLt={class:"flex items-center justify-between"},e8t={class:"text-3xl font-bold text-indigo-900 mt-1"},t8t={class:"p-3 bg-indigo-500 rounded-xl shadow-sm"},n8t={class:"bg-emerald-50 rounded-xl border border-emerald-200 p-6 hover:shadow-lg transition-shadow"},r8t={class:"flex items-center justify-between"},s8t={class:"text-3xl font-bold text-emerald-900 mt-1"},i8t={class:"text-xs text-emerald-600 mt-1"},a8t={class:"p-3 bg-emerald-500 rounded-xl shadow-sm"},o8t={__name:"EngagementStats",props:{engagements:{type:Array,default:()=>[]}},setup(t){const e=t,n=Z(()=>e.engagements.length),r=Z(()=>e.engagements.filter(l=>l.status==="In Progress").length),s=Z(()=>e.engagements.filter(l=>l.status==="Reporting").length),i=Z(()=>e.engagements.filter(l=>l.status==="Quality Review").length),a=Z(()=>e.engagements.filter(l=>l.status==="Completed").length),o=Z(()=>{if(e.engagements.length===0)return 0;const l=e.engagements.reduce((d,c)=>d+(c.progress_percentage||0),0);return Math.round(l/e.engagements.length)});return(l,d)=>(T(),R("div",PLt,[u("div",ILt,[u("div",OLt,[u("div",null,[d[0]||(d[0]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Total Engagements",-1)),u("p",LLt,$(n.value),1),d[1]||(d[1]=u("p",{class:"text-xs text-green-600 mt-1"},"Active projects",-1))]),u("div",VLt,[b(v(WS),{class:"h-7 w-7 text-white"})])])]),u("div",NLt,[u("div",jLt,[u("div",null,[d[2]||(d[2]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"In Progress",-1)),u("p",FLt,$(r.value),1),u("p",BLt,$((r.value/Math.max(n.value,1)*100).toFixed(0))+"% of total",1)]),u("div",zLt,[b(v(ib),{class:"h-7 w-7 text-white"})])])]),u("div",ULt,[u("div",HLt,[u("div",null,[d[3]||(d[3]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Reporting",-1)),u("p",qLt,$(s.value),1),d[4]||(d[4]=u("p",{class:"text-xs text-purple-600 mt-1"},"Final reports",-1))]),u("div",WLt,[b(v(vt),{class:"h-7 w-7 text-white"})])])]),u("div",GLt,[u("div",YLt,[u("div",null,[d[5]||(d[5]=u("p",{class:"text-sm font-semibold text-yellow-700 uppercase tracking-wide"},"Avg. Progress",-1)),u("p",KLt,$(o.value)+"%",1),u("div",XLt,[u("div",{class:"bg-yellow-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${o.value}%`})},null,4)])]),u("div",QLt,[b(v(sb),{class:"h-7 w-7 text-white"})])])]),u("div",ZLt,[u("div",JLt,[u("div",null,[d[6]||(d[6]=u("p",{class:"text-sm font-semibold text-indigo-700 uppercase tracking-wide"},"Quality Review",-1)),u("p",e8t,$(i.value),1),d[7]||(d[7]=u("p",{class:"text-xs text-indigo-600 mt-1"},"Under review",-1))]),u("div",t8t,[b(v(Kt),{class:"h-7 w-7 text-white"})])])]),u("div",n8t,[u("div",r8t,[u("div",null,[d[8]||(d[8]=u("p",{class:"text-sm font-semibold text-emerald-700 uppercase tracking-wide"},"Completed",-1)),u("p",s8t,$(a.value),1),u("p",i8t,$((a.value/Math.max(n.value,1)*100).toFixed(0))+"% completion rate",1)]),u("div",a8t,[b(v(Kt),{class:"h-7 w-7 text-white"})])])])]))}},l8t={class:"space-y-6"},u8t={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},d8t={class:"flex items-center space-x-3"},c8t={class:"p-2 bg-green-100 rounded-lg"},f8t={class:"flex flex-wrap items-center gap-3"},p8t={class:"p-1"},h8t={class:"p-1"},m8t={class:"p-1"},g8t={class:"p-1"},v8t={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},y8t={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},b8t={class:"flex flex-col sm:flex-row gap-4 flex-1"},x8t={class:"relative flex-1 max-w-md"},_8t={class:"flex gap-2"},w8t=["value"],k8t={class:"flex items-center gap-3"},S8t={class:"flex items-center bg-gray-100 rounded-lg p-1"},C8t={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},A8t={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},T8t={class:"flex items-center justify-between"},$8t={class:"flex items-center space-x-3"},M8t={class:"text-sm font-medium text-gray-700"},E8t={class:"flex items-center space-x-2"},D8t={key:0,class:"p-6"},R8t={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},P8t=["onClick"],I8t={class:"flex items-start justify-between mb-4"},O8t={class:"flex-1"},L8t={class:"text-lg font-semibold text-gray-900 mb-1"},V8t={class:"text-sm text-gray-600 mb-2"},N8t={class:"flex items-center space-x-2"},j8t={class:"space-y-3"},F8t={class:"grid grid-cols-2 gap-4"},B8t={class:"text-sm font-medium text-gray-900"},z8t={class:"text-sm font-medium text-gray-900"},U8t={class:"grid grid-cols-2 gap-4"},H8t={class:"text-sm font-medium text-gray-900"},q8t={class:"grid grid-cols-2 gap-4"},W8t={class:"text-sm font-medium text-gray-900"},G8t={key:0,class:"text-xs text-gray-500"},Y8t={class:"flex items-center space-x-2"},K8t={class:"text-sm font-medium text-gray-900"},X8t={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Q8t={key:0},Z8t={class:"flex items-center justify-end space-x-2 mt-4 pt-4 border-t border-gray-200"},J8t={key:1,class:"overflow-x-auto"},eVt={class:"min-w-full divide-y divide-gray-200"},tVt={class:"bg-gray-50"},nVt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},rVt={class:"bg-white divide-y divide-gray-200"},sVt={class:"px-6 py-4 whitespace-nowrap"},iVt={class:"px-6 py-4 whitespace-nowrap"},aVt={class:"flex items-center"},oVt={class:"flex-shrink-0 h-10 w-10"},lVt={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},uVt={class:"ml-4"},dVt={class:"text-sm font-medium text-gray-900"},cVt={class:"px-6 py-4 whitespace-nowrap"},fVt={class:"text-sm font-medium text-gray-900"},pVt={class:"text-sm text-gray-500"},hVt={class:"px-6 py-4 whitespace-nowrap"},mVt={class:"px-6 py-4 whitespace-nowrap"},gVt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},vVt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},yVt={class:"px-6 py-4 whitespace-nowrap"},bVt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},xVt={class:"text-xs text-gray-500"},_Vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},wVt={class:"flex items-center"},kVt={class:"font-medium"},SVt={key:0,class:"text-xs text-gray-500 ml-1"},CVt={class:"px-6 py-4 whitespace-nowrap"},AVt={key:1,class:"text-sm text-gray-400"},TVt={class:"px-6 py-4 whitespace-nowrap"},$Vt={class:"flex items-center space-x-2"},MVt={class:"text-sm font-medium text-gray-900"},EVt={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},DVt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},RVt={class:"flex items-center space-x-2"},PVt={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},IVt={class:"flex items-center justify-between"},OVt={class:"text-sm text-gray-700"},LVt={class:"flex items-center space-x-2"},VVt={class:"text-sm text-gray-700"},NVt={key:0,class:"text-center py-12 bg-white rounded-xl border border-gray-200"},jVt={class:"mt-1 text-sm text-gray-500"},FVt={class:"mt-6"},BVt={class:"space-y-4"},zVt={class:"space-y-2"},UVt={class:"flex items-center space-x-2"},HVt={class:"flex items-center space-x-2"},qVt={class:"flex items-center space-x-2"},WVt={class:"flex items-center space-x-2"},GVt={class:"space-y-4"},YVt={class:"text-sm text-gray-600"},KVt={class:"space-y-3"},XVt={class:"flex items-center space-x-2"},QVt={class:"space-y-4"},ZVt={class:"grid grid-cols-2 gap-4"},JVt={class:"bg-blue-50 p-4 rounded-lg"},eNt={class:"text-2xl font-bold text-blue-600"},tNt={class:"bg-green-50 p-4 rounded-lg"},nNt={class:"text-2xl font-bold text-green-600"},rNt={class:"space-y-2"},sNt={class:"space-y-2 max-h-40 overflow-y-auto"},iNt={class:"text-sm"},aNt={class:"flex items-center space-x-2"},oNt={class:"w-20 bg-gray-200 rounded-full h-2"},lNt={class:"text-xs text-gray-600"},uNt={__name:"EngagementList",setup(t){const e=_n(),n=qo(),r=Q(!1),s=Q({search:"",status:"",type:"",auditor:"",approach:"",opinion:""}),i=Q([]),a=Q("period_start"),o=Q(1),l=Q(10),d=Q("table");Q(!1);const c=Q(!1),f=Q(!1),p=Q(!1),h=Q(!1),m=Q(!1),g=Q(!1),y=Q(""),x=Q(""),_=Q(""),k=Q(!1),w=Q(null),S=Z(()=>n.engagements),C=Z(()=>{let ne=S.value;return s.value.search&&(ne=ne.filter(ce=>{var oe,re;return((oe=ce.engagement_title)==null?void 0:oe.toLowerCase().includes(s.value.search.toLowerCase()))||((re=ce.engagement_id)==null?void 0:re.toLowerCase().includes(s.value.search.toLowerCase()))})),s.value.status&&(ne=ne.filter(ce=>ce.status===s.value.status)),s.value.type&&(ne=ne.filter(ce=>ce.audit_type===s.value.type)),s.value.approach&&(ne=ne.filter(ce=>ce.audit_approach===s.value.approach)),s.value.opinion&&(ne=ne.filter(ce=>ce.overall_audit_opinion===s.value.opinion)),ne}),A=[{label:"All Status",value:""},{label:"Planning",value:"Planning"},{label:"Fieldwork",value:"Fieldwork"},{label:"Reporting",value:"Reporting"},{label:"Management Review",value:"Management Review"},{label:"Quality Review",value:"Quality Review"},{label:"Finalized",value:"Finalized"},{label:"Issued",value:"Issued"}],M=Z(()=>{const ne=new Set;return S.value.forEach(ce=>{ce.lead_auditor&&ne.add(ce.lead_auditor)}),[{label:"All Auditors",value:""},...Array.from(ne).map(ce=>({label:ce,value:ce}))]}),E=Z({get:()=>C.value.length>0&&i.value.length===C.value.length,set:ne=>{ne?i.value=C.value.map(ce=>ce.name):i.value=[]}}),P=Z(()=>{const ne=(o.value-1)*l.value,ce=ne+l.value;return C.value.slice(ne,ce)}),I=Z(()=>Math.ceil(C.value.length/l.value));Z(()=>S.value.length);const F=Z(()=>S.value.filter(ne=>ne.status==="Fieldwork").length),L=Z(()=>S.value.filter(ne=>ne.status==="Reporting").length);Z(()=>S.value.filter(ne=>ne.status==="Issued"||ne.status==="Finalized").length),Z(()=>{if(S.value.length===0)return 0;const ne=S.value.reduce((ce,oe)=>ce+V(oe),0);return Math.round(ne/S.value.length)}),Z(()=>S.value.filter(ne=>ne.status==="Quality Review").length),Z(()=>{const ne=S.value.filter(oe=>oe.quality_score);if(ne.length===0)return 0;const ce=ne.reduce((oe,re)=>oe+(re.quality_score||0),0);return Math.round(ce/ne.length)});const z=Z(()=>F.value+L.value),N=Z(()=>Math.max(0,20-z.value)),q=Z(()=>{const ne={};return S.value.forEach(ce=>{ce.lead_auditor&&(ne[ce.lead_auditor]||(ne[ce.lead_auditor]={name:ce.lead_auditor,count:0}),ne[ce.lead_auditor].count++)}),Object.values(ne).map(ce=>ze(ge({},ce),{load:Math.min(100,Math.round(ce.count/5*100))}))}),V=ne=>{const ce=new Date,oe=ne.planning_start?new Date(ne.planning_start):null,re=ne.actual_completion_date?new Date(ne.actual_completion_date):ne.reporting_end?new Date(ne.reporting_end):ne.fieldwork_end?new Date(ne.fieldwork_end):null;if(!oe||!re||ce<oe)return 0;if(ce>re)return 100;const te=re-oe,K=ce-oe;return Math.round(K/te*100)},O=ne=>{e.push(`/engagements/${ne.name}`)},X=ne=>{e.push(`/engagements/${ne.name}/edit`)},j=ne=>{confirm("Are you sure you want to delete this engagement?")},U=()=>{w.value=null,g.value=!0},G=ne=>ue(this,null,function*(){g.value=!1,w.value=null,yield ie()}),ee=ne=>ue(this,null,function*(){g.value=!1,w.value=null,yield ie()}),ie=()=>ue(this,null,function*(){try{r.value=!0,yield n.fetchEngagements()}catch(ne){console.error("Error loading engagements:",ne)}finally{r.value=!1}});return yt(()=>{ie()}),(ne,ce)=>(T(),R("div",l8t,[u("div",u8t,[u("div",null,[u("div",d8t,[u("div",c8t,[b(v(vt),{class:"h-6 w-6 text-green-600"})]),ce[30]||(ce[30]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Engagements"),u("p",{class:"text-gray-600 mt-1"}," Manage and track audit engagements throughout their lifecycle ")],-1))])]),u("div",f8t,[u("div",p8t,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ne.exportEngagements,loading:p.value},{prefix:D(()=>[b(v(xn),{class:"h-3.5 w-3.5"})]),default:D(()=>[ce[31]||(ce[31]=W(" Export ",-1))]),_:1},8,["onClick","loading"])]),u("div",h8t,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ce[0]||(ce[0]=oe=>f.value=!0)},{prefix:D(()=>[b(v(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[ce[32]||(ce[32]=W(" Templates ",-1))]),_:1})]),u("div",m8t,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ne.refreshData,loading:r.value},{prefix:D(()=>[b(v(mn),{class:"h-3.5 w-3.5"})]),default:D(()=>[ce[33]||(ce[33]=W(" Refresh ",-1))]),_:1},8,["onClick","loading"])]),u("div",g8t,[b(v(J),{variant:"solid",theme:"green",size:"sm",onClick:U},{prefix:D(()=>[b(v(nt),{class:"h-3.5 w-3.5"})]),default:D(()=>[ce[34]||(ce[34]=W(" New Engagement ",-1))]),_:1})])])]),b(o8t,{engagements:S.value},null,8,["engagements"]),u("div",v8t,[u("div",y8t,[u("div",b8t,[u("div",x8t,[b(v(En),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),we(u("input",{"onUpdate:modelValue":ce[1]||(ce[1]=oe=>s.value.search=oe),type:"text",placeholder:"Search engagements...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,512),[[Rt,s.value.search]])]),u("div",_8t,[we(u("select",{"onUpdate:modelValue":ce[2]||(ce[2]=oe=>s.value.status=oe),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...ce[35]||(ce[35]=[fr('<option value="">All Status</option><option value="Planning">Planning</option><option value="Fieldwork">Fieldwork</option><option value="Reporting">Reporting</option><option value="Management Review">Management Review</option><option value="Quality Review">Quality Review</option><option value="Finalized">Finalized</option><option value="Issued">Issued</option>',8)])],512),[[vn,s.value.status]]),we(u("select",{"onUpdate:modelValue":ce[3]||(ce[3]=oe=>s.value.type=oe),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...ce[36]||(ce[36]=[fr('<option value="">All Types</option><option value="Financial">Financial</option><option value="Operational">Operational</option><option value="Compliance">Compliance</option><option value="IT">IT</option><option value="Integrated">Integrated</option><option value="Special Investigation">Special Investigation</option><option value="Follow-up">Follow-up</option><option value="Advisory">Advisory</option>',9)])],512),[[vn,s.value.type]]),we(u("select",{"onUpdate:modelValue":ce[4]||(ce[4]=oe=>s.value.auditor=oe),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[ce[37]||(ce[37]=u("option",{value:""},"All Auditors",-1)),(T(!0),R(xe,null,_e(Array.from(new Set(S.value.map(oe=>oe.lead_auditor).filter(Boolean))),oe=>(T(),R("option",{key:oe,value:oe},$(oe),9,w8t))),128))],512),[[vn,s.value.auditor]]),we(u("select",{"onUpdate:modelValue":ce[5]||(ce[5]=oe=>s.value.approach=oe),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...ce[38]||(ce[38]=[fr('<option value="">All Approaches</option><option value="Risk-Based">Risk-Based</option><option value="Controls-Based">Controls-Based</option><option value="Substantive">Substantive</option><option value="Compliance">Compliance</option><option value="Combined">Combined</option>',6)])],512),[[vn,s.value.approach]]),we(u("select",{"onUpdate:modelValue":ce[6]||(ce[6]=oe=>s.value.opinion=oe),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...ce[39]||(ce[39]=[fr('<option value="">All Opinions</option><option value="Satisfactory">Satisfactory</option><option value="Satisfactory with Minor Issues">Satisfactory with Minor Issues</option><option value="Needs Improvement">Needs Improvement</option><option value="Unsatisfactory">Unsatisfactory</option>',5)])],512),[[vn,s.value.opinion]])])]),u("div",k8t,[u("div",S8t,[u("button",{onClick:ce[7]||(ce[7]=oe=>d.value="table"),class:pe(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors",d.value==="table"?"bg-white text-green-700 shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(v(tR),{class:"h-4 w-4 inline mr-1"}),ce[40]||(ce[40]=W(" Table ",-1))],2),u("button",{onClick:ce[8]||(ce[8]=oe=>d.value="cards"),class:pe(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors",d.value==="cards"?"bg-white text-green-700 shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(v(SY),{class:"h-4 w-4 inline mr-1"}),ce[41]||(ce[41]=W(" Cards ",-1))],2)]),b(v(J),{onClick:ce[9]||(ce[9]=oe=>h.value=!0),variant:"outline",class:"flex items-center gap-2"},{default:D(()=>[b(v(vt),{class:"h-4 w-4"}),ce[42]||(ce[42]=W(" Templates ",-1))]),_:1}),b(v(J),{onClick:ce[10]||(ce[10]=oe=>m.value=!0),variant:"outline",class:"flex items-center gap-2",disabled:i.value.length===0},{default:D(()=>[b(v(Hc),{class:"h-4 w-4"}),ce[43]||(ce[43]=W(" Bulk Actions ",-1))]),_:1},8,["disabled"]),b(v(J),{onClick:U,variant:"solid",class:"flex items-center gap-2 bg-green-600 hover:bg-green-700"},{default:D(()=>[b(v(nt),{class:"h-4 w-4"}),ce[44]||(ce[44]=W(" New Engagement ",-1))]),_:1})])])]),u("div",C8t,[u("div",A8t,[u("div",T8t,[u("div",$8t,[b(v(St),{modelValue:E.value,"onUpdate:modelValue":ne.toggleSelectAll},null,8,["modelValue","onUpdate:modelValue"]),u("span",M8t,$(i.value.length)+" of "+$(C.value.length)+" selected ",1)]),u("div",E8t,[b(v(J),{variant:"outline",size:"sm",onClick:ce[11]||(ce[11]=oe=>a.value=a.value==="period_start"?"period_end":"period_start")},{default:D(()=>[b(v(Zu),{class:"h-4 w-4 mr-2"}),W(" Sort by "+$(a.value==="period_start"?"End Date":"Start Date"),1)]),_:1})])])]),d.value==="cards"?(T(),R("div",D8t,[u("div",R8t,[(T(!0),R(xe,null,_e(P.value,oe=>(T(),R("div",{key:oe.name,class:pe(["bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer",{"ring-2 ring-green-500":i.value.includes(oe.name)}]),onClick:re=>O(oe)},[u("div",I8t,[u("div",O8t,[u("h3",L8t,$(oe.engagement_title||"Untitled"),1),u("p",V8t,$(oe.engagement_id),1),u("div",N8t,[b(v(De),{theme:ne.getAuditTypeTheme(oe.audit_type)},{default:D(()=>[W($(oe.audit_type),1)]),_:2},1032,["theme"]),b(v(De),{theme:ne.getStatusTheme(oe.status)},{default:D(()=>[W($(oe.status),1)]),_:2},1032,["theme"])])]),b(v(St),{modelValue:i.value.includes(oe.name),"onUpdate:modelValue":re=>ne.toggleEngagementSelection(oe.name),onClick:ce[12]||(ce[12]=ut(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])]),u("div",j8t,[u("div",F8t,[u("div",null,[ce[45]||(ce[45]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Lead Auditor",-1)),u("p",B8t,$(oe.lead_auditor||"Unassigned"),1)]),u("div",null,[ce[46]||(ce[46]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Universe",-1)),u("p",z8t,$(oe.audit_universe||"N/A"),1)])]),u("div",U8t,[u("div",null,[ce[47]||(ce[47]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Period",-1)),u("p",H8t,$(ne.formatDate(oe.period_start))+" - "+$(ne.formatDate(oe.period_end)),1)]),u("div",null,[ce[48]||(ce[48]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Approach",-1)),b(v(De),{theme:"gray"},{default:D(()=>[W($(oe.audit_approach||"Not Set"),1)]),_:2},1024)])]),u("div",q8t,[u("div",null,[ce[49]||(ce[49]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Budget Hours",-1)),u("p",W8t,[W($(oe.budgeted_hours||0)+"h ",1),oe.actual_hours?(T(),R("span",G8t," ("+$(oe.actual_hours)+"h used) ",1)):se("",!0)])]),u("div",null,[ce[50]||(ce[50]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Findings",-1)),u("div",Y8t,[u("span",K8t,$(oe.findings_count||0),1),oe.high_risk_findings_count?(T(),R("span",X8t,$(oe.high_risk_findings_count)+" High ",1)):se("",!0)])])]),oe.overall_audit_opinion?(T(),R("div",Q8t,[ce[51]||(ce[51]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Opinion",-1)),b(v(De),{theme:ne.getOpinionTheme(oe.overall_audit_opinion)},{default:D(()=>[W($(oe.overall_audit_opinion),1)]),_:2},1032,["theme"])])):se("",!0)]),u("div",Z8t,[b(v(J),{variant:"ghost",size:"sm",onClick:ut(re=>O(oe),["stop"])},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(re=>X(oe),["stop"])},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(re=>j(),["stop"]),theme:"red"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])],10,P8t))),128))])])):se("",!0),d.value==="table"?(T(),R("div",J8t,[u("table",eVt,[u("thead",tVt,[u("tr",null,[u("th",nVt,[b(v(St),{modelValue:E.value,"onUpdate:modelValue":ne.toggleSelectAll},null,8,["modelValue","onUpdate:modelValue"])]),ce[52]||(ce[52]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Engagement ID ",-1)),ce[53]||(ce[53]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title ",-1)),ce[54]||(ce[54]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ",-1)),ce[55]||(ce[55]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),ce[56]||(ce[56]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Lead Auditor ",-1)),ce[57]||(ce[57]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Audit Universe ",-1)),ce[58]||(ce[58]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Approach ",-1)),ce[59]||(ce[59]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Period ",-1)),ce[60]||(ce[60]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Budget Hours ",-1)),ce[61]||(ce[61]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Opinion ",-1)),ce[62]||(ce[62]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Findings ",-1)),ce[63]||(ce[63]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",rVt,[(T(!0),R(xe,null,_e(P.value,oe=>(T(),R("tr",{key:oe.name,class:pe(["hover:bg-gray-50 transition-colors",{"bg-green-50":i.value.includes(oe.name)}])},[u("td",sVt,[b(v(St),{modelValue:i.value.includes(oe.name),"onUpdate:modelValue":re=>ne.toggleEngagementSelection(oe.name)},null,8,["modelValue","onUpdate:modelValue"])]),u("td",iVt,[u("div",aVt,[u("div",oVt,[u("div",lVt,[b(v(vt),{class:"h-5 w-5 text-gray-600"})])]),u("div",uVt,[u("div",dVt,$(oe.engagement_id),1)])])]),u("td",cVt,[u("div",fVt,$(oe.engagement_title||"Untitled"),1),u("div",pVt,$(oe.audit_universe||"No universe specified"),1)]),u("td",hVt,[b(v(De),{theme:ne.getAuditTypeTheme(oe.audit_type)},{default:D(()=>[W($(oe.audit_type),1)]),_:2},1032,["theme"])]),u("td",mVt,[b(v(De),{theme:ne.getStatusTheme(oe.status)},{default:D(()=>[W($(oe.status),1)]),_:2},1032,["theme"])]),u("td",gVt,$(oe.lead_auditor||"Unassigned"),1),u("td",vVt,$(oe.audit_universe||"N/A"),1),u("td",yVt,[b(v(De),{theme:"gray"},{default:D(()=>[W($(oe.audit_approach||"Not Set"),1)]),_:2},1024)]),u("td",bVt,[u("div",null,$(ne.formatDate(oe.period_start)),1),u("div",xVt,"to "+$(ne.formatDate(oe.period_end)),1)]),u("td",_Vt,[u("div",wVt,[u("span",kVt,$(oe.budgeted_hours||0)+"h",1),oe.actual_hours?(T(),R("span",SVt," ("+$(oe.actual_hours)+"h used) ",1)):se("",!0)])]),u("td",CVt,[oe.overall_audit_opinion?(T(),he(v(De),{key:0,theme:ne.getOpinionTheme(oe.overall_audit_opinion)},{default:D(()=>[W($(oe.overall_audit_opinion),1)]),_:2},1032,["theme"])):(T(),R("span",AVt,"Pending"))]),u("td",TVt,[u("div",$Vt,[u("span",MVt,$(oe.findings_count||0),1),oe.high_risk_findings_count?(T(),R("span",EVt,$(oe.high_risk_findings_count)+" High ",1)):se("",!0)])]),u("td",DVt,[u("div",RVt,[b(v(J),{variant:"ghost",size:"sm",onClick:re=>O(oe)},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:re=>X(oe)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:re=>j(),theme:"red"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2))),128))])])])):se("",!0),u("div",PVt,[u("div",IVt,[u("div",OVt," Showing "+$((o.value-1)*l.value+1)+" to "+$(Math.min(o.value*l.value,C.value.length))+" of "+$(C.value.length)+" results ",1),u("div",LVt,[b(v(J),{variant:"outline",size:"sm",disabled:o.value===1,onClick:ce[13]||(ce[13]=oe=>o.value--)},{default:D(()=>[b(v(gr),{class:"h-4 w-4"}),ce[64]||(ce[64]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",VVt," Page "+$(o.value)+" of "+$(I.value),1),b(v(J),{variant:"outline",size:"sm",disabled:o.value===I.value,onClick:ce[14]||(ce[14]=oe=>o.value++)},{default:D(()=>[ce[65]||(ce[65]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])]),C.value.length===0?(T(),R("div",NVt,[b(v(vt),{class:"mx-auto h-12 w-12 text-gray-400"}),ce[67]||(ce[67]=u("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No engagements found",-1)),u("p",jVt,$(s.value.search||s.value.status||s.value.type||s.value.auditor?"No engagements match your current filters.":"Get started by creating your first audit engagement."),1),u("div",FVt,[b(v(J),{onClick:U,class:"bg-green-600 hover:bg-green-700 text-white"},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),ce[66]||(ce[66]=W(" Create Engagement ",-1))]),_:1})])])):se("",!0),b(v(jt),{modelValue:h.value,"onUpdate:modelValue":ce[20]||(ce[20]=oe=>h.value=oe),options:{title:"Apply Template"}},{"body-content":D(()=>[u("div",BVt,[ce[72]||(ce[72]=u("p",{class:"text-sm text-gray-600"}," Select a template to apply to the selected engagements: ",-1)),u("div",zVt,[u("label",UVt,[we(u("input",{type:"radio","onUpdate:modelValue":ce[15]||(ce[15]=oe=>y.value=oe),value:"financial-audit",class:"text-blue-600"},null,512),[[Js,y.value]]),ce[68]||(ce[68]=u("span",{class:"text-sm"},"Financial Audit Template",-1))]),u("label",HVt,[we(u("input",{type:"radio","onUpdate:modelValue":ce[16]||(ce[16]=oe=>y.value=oe),value:"operational-audit",class:"text-blue-600"},null,512),[[Js,y.value]]),ce[69]||(ce[69]=u("span",{class:"text-sm"},"Operational Audit Template",-1))]),u("label",qVt,[we(u("input",{type:"radio","onUpdate:modelValue":ce[17]||(ce[17]=oe=>y.value=oe),value:"compliance-audit",class:"text-blue-600"},null,512),[[Js,y.value]]),ce[70]||(ce[70]=u("span",{class:"text-sm"},"Compliance Audit Template",-1))]),u("label",WVt,[we(u("input",{type:"radio","onUpdate:modelValue":ce[18]||(ce[18]=oe=>y.value=oe),value:"it-audit",class:"text-blue-600"},null,512),[[Js,y.value]]),ce[71]||(ce[71]=u("span",{class:"text-sm"},"IT Audit Template",-1))])])])]),actions:D(()=>[b(v(J),{variant:"ghost",onClick:ce[19]||(ce[19]=oe=>h.value=!1)},{default:D(()=>[...ce[73]||(ce[73]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:ne.applyTemplate,disabled:!y.value},{default:D(()=>[...ce[74]||(ce[74]=[W(" Apply Template ",-1)])]),_:1},8,["onClick","disabled"])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:m.value,"onUpdate:modelValue":ce[25]||(ce[25]=oe=>m.value=oe),options:{title:"Bulk Actions"}},{"body-content":D(()=>[u("div",GVt,[u("p",YVt," Apply bulk action to "+$(i.value.length)+" selected engagements: ",1),u("div",KVt,[u("div",null,[ce[75]||(ce[75]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Update Status ",-1)),b(v(Qe),{modelValue:x.value,"onUpdate:modelValue":ce[21]||(ce[21]=oe=>x.value=oe),options:A},null,8,["modelValue"])]),u("div",null,[ce[76]||(ce[76]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Assign Auditor ",-1)),b(v(Qe),{modelValue:_.value,"onUpdate:modelValue":ce[22]||(ce[22]=oe=>_.value=oe),options:M.value},null,8,["modelValue","options"])]),u("div",XVt,[b(v(St),{modelValue:k.value,"onUpdate:modelValue":ce[23]||(ce[23]=oe=>k.value=oe)},null,8,["modelValue"]),ce[77]||(ce[77]=u("span",{class:"text-sm text-red-600"}," Delete selected engagements (this action cannot be undone) ",-1))])])])]),actions:D(()=>[b(v(J),{variant:"ghost",onClick:ce[24]||(ce[24]=oe=>m.value=!1)},{default:D(()=>[...ce[78]||(ce[78]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:ne.applyBulkActions,disabled:!x.value&&!_.value&&!k.value},{default:D(()=>[...ce[79]||(ce[79]=[W(" Apply Changes ",-1)])]),_:1},8,["onClick","disabled"])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:c.value,"onUpdate:modelValue":ce[27]||(ce[27]=oe=>c.value=oe),options:{title:"Capacity Planning"}},{"body-content":D(()=>[u("div",QVt,[u("div",ZVt,[u("div",JVt,[ce[80]||(ce[80]=u("h4",{class:"font-medium text-blue-900"},"Current Capacity",-1)),u("p",eNt,$(z.value),1),ce[81]||(ce[81]=u("p",{class:"text-sm text-blue-700"},"Active engagements",-1))]),u("div",tNt,[ce[82]||(ce[82]=u("h4",{class:"font-medium text-green-900"},"Available Capacity",-1)),u("p",nNt,$(N.value),1),ce[83]||(ce[83]=u("p",{class:"text-sm text-green-700"},"Available slots",-1))])]),u("div",rNt,[ce[84]||(ce[84]=u("h4",{class:"font-medium"},"Auditor Workload",-1)),u("div",sNt,[(T(!0),R(xe,null,_e(q.value,oe=>(T(),R("div",{key:oe.name,class:"flex justify-between items-center p-2 bg-gray-50 rounded"},[u("span",iNt,$(oe.name),1),u("div",aNt,[u("div",oNt,[u("div",{class:"bg-blue-600 h-2 rounded-full",style:rt({width:`${oe.load}%`})},null,4)]),u("span",lNt,$(oe.load)+"%",1)])]))),128))])])])]),actions:D(()=>[b(v(J),{variant:"solid",onClick:ce[26]||(ce[26]=oe=>c.value=!1)},{default:D(()=>[...ce[85]||(ce[85]=[W(" Close ",-1)])]),_:1})]),_:1},8,["modelValue"]),b(RLt,{modelValue:g.value,"onUpdate:modelValue":ce[28]||(ce[28]=oe=>g.value=oe),engagement:w.value,onCreated:G,onUpdated:ee,onCancelled:ce[29]||(ce[29]=oe=>g.value=!1)},null,8,["modelValue","engagement"])]))}},dNt={class:"flex h-[calc(100vh-180px)] overflow-hidden"},cNt={class:"w-72 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0"},fNt={class:"mb-6"},pNt={class:"flex items-center justify-between mb-2"},hNt={class:"text-sm text-gray-500"},mNt={class:"w-full bg-gray-200 rounded-full h-2"},gNt={class:"space-y-1"},vNt=["onClick"],yNt={class:"flex-1 text-left"},bNt={key:0,class:"ml-2 flex-shrink-0"},xNt={key:1,class:"ml-2 flex-shrink-0"},_Nt={class:"mt-6 pt-4 border-t border-gray-200"},wNt={class:"flex items-center text-sm text-gray-500"},kNt={key:0},SNt={key:1},CNt={class:"flex-1 overflow-y-auto p-6"},ANt={class:"space-y-6"},TNt={class:"grid grid-cols-2 gap-6"},$Nt={class:"grid grid-cols-3 gap-6"},MNt={class:"grid grid-cols-2 gap-6"},ENt={class:"mt-6"},DNt={class:"space-y-6"},RNt={class:"space-y-6"},PNt={class:"space-y-6"},INt={class:"grid grid-cols-2 gap-6"},ONt={class:"space-y-6"},LNt={class:"grid grid-cols-2 gap-6"},VNt={class:"flex items-center space-x-4 mt-2"},NNt={class:"inline-flex items-center"},jNt={class:"inline-flex items-center"},FNt={class:"grid grid-cols-2 gap-6"},BNt={class:"space-y-6"},zNt={class:"grid grid-cols-2 gap-6"},UNt={class:"grid grid-cols-2 gap-6"},HNt={class:"space-y-6"},qNt={class:"grid grid-cols-2 gap-6"},WNt={class:"border-t border-gray-200 pt-6"},GNt={class:"grid grid-cols-3 gap-6"},YNt={class:"flex items-center space-x-4 mt-2"},KNt={class:"inline-flex items-center"},XNt={class:"inline-flex items-center"},QNt={class:"space-y-6"},ZNt={class:"grid grid-cols-2 gap-6"},JNt={class:"grid grid-cols-2 gap-6"},e7t={class:"space-y-6"},t7t={class:"bg-gray-50 rounded-lg p-4 mb-6"},n7t={class:"grid grid-cols-2 gap-6"},r7t={class:"grid grid-cols-2 gap-6 mt-4"},s7t={class:"mt-4"},i7t={class:"bg-blue-50 rounded-lg p-4"},a7t={class:"grid grid-cols-2 gap-4"},o7t={class:"inline-flex items-center"},l7t={class:"inline-flex items-center"},u7t={class:"inline-flex items-center"},d7t={class:"inline-flex items-center"},c7t={class:"mt-4"},f7t={class:"mt-6"},p7t={class:"bg-yellow-50 rounded-lg p-4 mt-6"},h7t={class:"grid grid-cols-2 gap-6"},m7t={class:"flex items-center space-x-4 mt-2"},g7t={class:"inline-flex items-center"},v7t={class:"inline-flex items-center"},y7t={class:"flex items-center justify-between w-full"},b7t={class:"flex items-center space-x-2"},x7t={class:"flex items-center space-x-3"},_7t={__name:"AuditFindingForm",props:{modelValue:{type:Boolean,default:!1},finding:{type:Object,default:null}},emits:["update:modelValue","saved","close"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.modelValue,set:le=>r("update:modelValue",le)}),i=Z(()=>{var le;return!!((le=n.finding)!=null&&le.name)}),a=Q(!1),o=Q(null),l={basic:{label:"Basic Information",icon:vt},details:{label:"Finding Details",icon:Ar},evidence:{label:"Evidence & Recommendation",icon:En},response:{label:"Management Response",icon:aa},action:{label:"Corrective Action Plan",icon:L0},followup:{label:"Follow-up & Status",icon:mn},verification:{label:"Verification",icon:Ds},closure:{label:"Closure & Reporting",icon:c2}},d={basic:["finding_id","engagement_reference","finding_title","finding_category"],details:["condition","criteria"],evidence:["recommendation"],response:[],action:[],followup:["finding_status"],verification:[],closure:[]},{activeSection:c,formProgress:f,setActiveSection:p,getSectionStatus:h,validateForm:m,prepareFormData:g}=nO(l),y=Jt({finding_id:"",engagement_reference:"",finding_title:"",finding_category:"",risk_rating:"",business_impact_rating:"",date_identified:"",source_document:"",affected_locations:[],condition:"",criteria:"",cause:"",effect:"",evidence:[],sample_size:null,exceptions_found:null,recommendation:"",management_agrees:null,management_comments:"",response_date:"",management_response_by:"",management_response_date:"",action_plan_description:"",responsible_person:"",target_date:"",revised_target_date:"",priority:"",milestones:[],finding_status:"Open",status_date:"",status_history:[],follow_up_required:0,follow_up_frequency:"",next_follow_up_date:"",follow_up_history:[],verification_date:"",verified_by:"",verification_method:"",verification_status:"",verification_results:"",closure_date:"",closed_by:"",closure_reason:"",final_disposition:"",closure_notes:"",include_in_report:!1,reported_to_management:!1,reported_to_audit_committee:!1,reported_to_board:!1,report_reference:"",related_findings:[],repeat_finding:0,previous_finding_reference:""}),x=[{label:"Control Weakness",value:"Control Weakness"},{label:"Process Inefficiency",value:"Process Inefficiency"},{label:"Compliance Gap",value:"Compliance Gap"},{label:"Policy Violation",value:"Policy Violation"},{label:"Documentation Issue",value:"Documentation Issue"},{label:"Fraud Indicator",value:"Fraud Indicator"},{label:"IT/System Issue",value:"IT/System Issue"},{label:"Operational Risk",value:"Operational Risk"}],_=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],k=[{label:"Severe",value:"Severe"},{label:"Major",value:"Major"},{label:"Moderate",value:"Moderate"},{label:"Minor",value:"Minor"},{label:"Insignificant",value:"Insignificant"}],w=[{label:"Open",value:"Open"},{label:"Action in Progress",value:"Action in Progress"},{label:"Pending Verification",value:"Pending Verification"},{label:"Closed",value:"Closed"},{label:"Accepted as Risk",value:"Accepted as Risk"},{label:"Management Override",value:"Management Override"}],S=[{label:"Urgent",value:"Urgent"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],C=[{label:"Weekly",value:"Weekly"},{label:"Bi-weekly",value:"Bi-weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Semi-annually",value:"Semi-annually"},{label:"Annually",value:"Annually"}],A=[{label:"Document Review",value:"Document Review"},{label:"Re-testing",value:"Re-testing"},{label:"Observation",value:"Observation"},{label:"Interview",value:"Interview"},{label:"Walkthrough",value:"Walkthrough"},{label:"Data Analysis",value:"Data Analysis"}],M=[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Verified - Effective",value:"Verified - Effective"},{label:"Verified - Partially Effective",value:"Verified - Partially Effective"},{label:"Verified - Not Effective",value:"Verified - Not Effective"}],E=[{label:"Corrective Action Implemented",value:"Corrective Action Implemented"},{label:"Risk Accepted",value:"Risk Accepted"},{label:"Duplicate Finding",value:"Duplicate Finding"},{label:"No Longer Applicable",value:"No Longer Applicable"},{label:"Management Override",value:"Management Override"}],P=[{label:"Resolved",value:"Resolved"},{label:"Partially Resolved",value:"Partially Resolved"},{label:"Transferred",value:"Transferred"},{label:"Deferred",value:"Deferred"}],I=Q([]),F=Q([]),L=Q([]),z=[{key:"location",label:"Location",fieldType:"text",required:!0,width:"200px"},{key:"extent",label:"Extent/Notes",fieldType:"text",width:"300px"}],N=[{key:"evidence_type",label:"Type",width:"120px"},{key:"description",label:"Description",width:"250px"},{key:"source",label:"Source",width:"150px"}],q=[{key:"evidence_type",label:"Evidence Type",type:"select",required:!0,options:[{label:"Document",value:"Document"},{label:"Photo",value:"Photo"},{label:"Data Analysis",value:"Data Analysis"},{label:"Interview",value:"Interview"},{label:"Observation",value:"Observation"},{label:"Confirmation",value:"Confirmation"}]},{key:"description",label:"Description",type:"text",required:!0},{key:"file",label:"Attachment",type:"attach"},{key:"source",label:"Source",type:"text"},{key:"reference",label:"Reference",type:"text"}],V=[{key:"milestone_description",label:"Description",width:"250px"},{key:"due_date",label:"Due Date",width:"120px"},{key:"status",label:"Status",width:"120px",component:"Badge"}],O=[{key:"milestone_description",label:"Milestone Description",type:"text",required:!0},{key:"due_date",label:"Due Date",type:"date",required:!0},{key:"status",label:"Status",type:"select",required:!0,options:[{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Delayed",value:"Delayed"}]},{key:"completion_date",label:"Completion Date",type:"date"},{key:"notes",label:"Notes",type:"textarea"}],X=[{key:"previous_status",label:"From",width:"120px"},{key:"new_status",label:"To",width:"120px"},{key:"changed_on",label:"Changed On",width:"150px"},{key:"changed_by",label:"Changed By",width:"150px"}],j=[{key:"previous_status",label:"Previous Status",type:"select",options:w},{key:"new_status",label:"New Status",type:"select",required:!0,options:w},{key:"changed_on",label:"Changed On",type:"datetime",required:!0},{key:"changed_by",label:"Changed By",type:"link",doctype:"User",required:!0},{key:"reason",label:"Reason",type:"textarea"}],U=[{key:"follow_up_date",label:"Date",width:"100px"},{key:"follow_up_type",label:"Type",width:"150px"},{key:"follow_up_by",label:"By",width:"150px"},{key:"status",label:"Status",width:"100px",component:"Badge"}],G=[{key:"follow_up_date",label:"Follow-up Date",type:"date",required:!0},{key:"follow_up_type",label:"Type",type:"select",required:!0,options:[{label:"Status Check",value:"Status Check"},{label:"Progress Review",value:"Progress Review"},{label:"Implementation Verification",value:"Implementation Verification"},{label:"Effectiveness Assessment",value:"Effectiveness Assessment"},{label:"Closure Review",value:"Closure Review"}]},{key:"follow_up_by",label:"Follow-up By",type:"link",doctype:"User",required:!0},{key:"findings",label:"Findings/Observations",type:"textarea"},{key:"actions_taken",label:"Actions Taken",type:"textarea"},{key:"next_follow_up_date",label:"Next Follow-up Date",type:"date"},{key:"status",label:"Status",type:"select",required:!0,options:[{label:"Open",value:"Open"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Overdue",value:"Overdue"}]}],ee=[{key:"related_finding",label:"Related Finding",width:"200px"},{key:"relationship_type",label:"Relationship",width:"150px"}],ie=[{key:"related_finding",label:"Related Finding",type:"link",doctype:"Audit Finding",required:!0},{key:"relationship_type",label:"Relationship Type",type:"select",required:!0,options:[{label:"Duplicate",value:"Duplicate"},{label:"Similar Issue",value:"Similar Issue"},{label:"Root Cause",value:"Root Cause"},{label:"Contributing Factor",value:"Contributing Factor"},{label:"Follow-up Action",value:"Follow-up Action"},{label:"Related Control",value:"Related Control"}]},{key:"description",label:"Description",type:"textarea"}],ne=()=>{const le=Object.keys(l),H=le.indexOf(c.value);H>0&&p(le[H-1])},ce=()=>{const le=Object.keys(l),H=le.indexOf(c.value);H<le.length-1&&p(le[H+1])},oe=le=>{if(!le)return"";const H=Math.floor((new Date-new Date(le))/1e3);if(H<60)return"just now";const Y=Math.floor(H/60);if(Y<60)return`${Y}m ago`;const B=Math.floor(Y/60);return B<24?`${B}h ago`:`${Math.floor(B/24)}d ago`},re=()=>ue(this,null,function*(){try{o.value=new Date}catch(le){console.error("Failed to save draft:",le)}}),te=()=>ue(this,null,function*(){const le=m(y);if(!le.isValid){if(console.error("Validation errors:",le.errors),le.errors.length>0){const H=Object.keys(d).find(Y=>d[Y].some(B=>le.errors.includes(B)));H&&p(H)}return}a.value=!0;try{const H=g(y,{evidence:"Finding Evidence",affected_locations:"Finding Affected Location",milestones:"Finding Action Milestone",status_history:"Finding Status Change",follow_up_history:"Finding Follow-up Activity",related_findings:"Finding Related Finding"});r("saved",H),K()}catch(H){console.error("Failed to save finding:",H)}finally{a.value=!1}}),K=()=>{s.value=!1,r("close")};return et(()=>n.finding,le=>{le&&Object.keys(y).forEach(H=>{le[H]!==void 0&&(y[H]=le[H])})},{immediate:!0,deep:!0}),et(y,()=>{},{deep:!0}),yt(()=>{}),(le,H)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":H[56]||(H[56]=Y=>s.value=Y),options:{size:"7xl",title:i.value?"Edit Audit Finding":"New Audit Finding"}},{body:D(()=>[u("div",dNt,[u("div",cNt,[u("div",fNt,[u("div",pNt,[H[57]||(H[57]=u("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),u("span",hNt,$(v(f))+"%",1)]),u("div",mNt,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${v(f)}%`})},null,4)])]),u("nav",gNt,[(T(),R(xe,null,_e(l,(Y,B)=>u("button",{key:B,onClick:ae=>v(p)(B),class:pe(["w-full flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors",[v(c)===B?"bg-blue-100 text-blue-700 border-l-4 border-blue-600":"text-gray-600 hover:bg-gray-100"]])},[(T(),he(At(Y.icon),{class:pe(["h-5 w-5 mr-3 flex-shrink-0",v(c)===B?"text-blue-600":"text-gray-400"])},null,8,["class"])),u("span",yNt,$(Y.label),1),v(h)(B)==="complete"?(T(),R("span",bNt,[b(v(ro),{class:"h-5 w-5 text-green-500"})])):v(h)(B)==="partial"?(T(),R("span",xNt,[b(v(qr),{class:"h-5 w-5 text-yellow-500"})])):se("",!0)],10,vNt)),64))]),u("div",_Nt,[u("div",wNt,[b(v(XD),{class:"h-4 w-4 mr-2"}),o.value?(T(),R("span",kNt,"Saved "+$(oe(o.value)),1)):(T(),R("span",SNt,"Not saved yet"))])])]),u("div",CNt,[we(u("div",ANt,[b(Vt,{title:"Basic Information",description:"Essential finding identification and classification details",icon:v(vt)},null,8,["icon"]),u("div",TNt,[b(v(ve),{label:"Finding ID",modelValue:y.finding_id,"onUpdate:modelValue":H[0]||(H[0]=Y=>y.finding_id=Y),type:"text",placeholder:"e.g., FND-2024-001",required:!0},null,8,["modelValue"]),b(v(ve),{label:"Engagement Reference",modelValue:y.engagement_reference,"onUpdate:modelValue":H[1]||(H[1]=Y=>y.engagement_reference=Y),type:"autocomplete",options:I.value,placeholder:"Select related engagement",required:!0},null,8,["modelValue","options"])]),b(v(ve),{label:"Finding Title",modelValue:y.finding_title,"onUpdate:modelValue":H[2]||(H[2]=Y=>y.finding_title=Y),type:"text",placeholder:"Enter a descriptive finding title",required:!0},null,8,["modelValue"]),u("div",$Nt,[b(v(ve),{label:"Finding Category",modelValue:y.finding_category,"onUpdate:modelValue":H[3]||(H[3]=Y=>y.finding_category=Y),type:"select",options:x,required:!0},null,8,["modelValue"]),b(v(ve),{label:"Risk Rating",modelValue:y.risk_rating,"onUpdate:modelValue":H[4]||(H[4]=Y=>y.risk_rating=Y),type:"select",options:_},null,8,["modelValue"]),b(v(ve),{label:"Business Impact Rating",modelValue:y.business_impact_rating,"onUpdate:modelValue":H[5]||(H[5]=Y=>y.business_impact_rating=Y),type:"select",options:k},null,8,["modelValue"])]),u("div",MNt,[b(v(ve),{label:"Date Identified",modelValue:y.date_identified,"onUpdate:modelValue":H[6]||(H[6]=Y=>y.date_identified=Y),type:"date"},null,8,["modelValue"]),b(v(ve),{label:"Source Document",modelValue:y.source_document,"onUpdate:modelValue":H[7]||(H[7]=Y=>y.source_document=Y),type:"text",placeholder:"Reference to source workpaper"},null,8,["modelValue"])]),u("div",ENt,[b(_0,{modelValue:y.affected_locations,"onUpdate:modelValue":H[8]||(H[8]=Y=>y.affected_locations=Y),title:"Affected Locations",columns:z,addButtonLabel:"Add Location"},null,8,["modelValue"])])],512),[[lt,v(c)==="basic"]]),we(u("div",DNt,[b(Vt,{title:"Finding Details",description:"Document the condition, criteria, cause, and effect of the finding",icon:v(Ar)},null,8,["icon"]),u("div",RNt,[u("div",null,[H[58]||(H[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Condition "),u("span",{class:"text-red-500"},"*")],-1)),H[59]||(H[59]=u("p",{class:"text-xs text-gray-500 mb-2"},"What is the actual situation or state observed?",-1)),b(v(an),{modelValue:y.condition,"onUpdate:modelValue":H[9]||(H[9]=Y=>y.condition=Y),placeholder:"Describe the current condition or situation found during the audit...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[H[60]||(H[60]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Criteria "),u("span",{class:"text-red-500"},"*")],-1)),H[61]||(H[61]=u("p",{class:"text-xs text-gray-500 mb-2"},"What should be the expected state or standard?",-1)),b(v(an),{modelValue:y.criteria,"onUpdate:modelValue":H[10]||(H[10]=Y=>y.criteria=Y),placeholder:"Describe the standard, policy, or expectation that should be met...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[H[62]||(H[62]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Cause ",-1)),H[63]||(H[63]=u("p",{class:"text-xs text-gray-500 mb-2"},"Why did the condition occur?",-1)),b(v(an),{modelValue:y.cause,"onUpdate:modelValue":H[11]||(H[11]=Y=>y.cause=Y),placeholder:"Describe the root cause or reason for the gap between condition and criteria...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",null,[H[64]||(H[64]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Effect ",-1)),H[65]||(H[65]=u("p",{class:"text-xs text-gray-500 mb-2"},"What is the impact or consequence?",-1)),b(v(an),{modelValue:y.effect,"onUpdate:modelValue":H[12]||(H[12]=Y=>y.effect=Y),placeholder:"Describe the actual or potential impact of this finding...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])])],512),[[lt,v(c)==="details"]]),we(u("div",PNt,[b(Vt,{title:"Evidence & Recommendation",description:"Supporting evidence and proposed corrective actions",icon:v(En)},null,8,["icon"]),b(da,{modelValue:y.evidence,"onUpdate:modelValue":H[13]||(H[13]=Y=>y.evidence=Y),title:"Supporting Evidence",columns:N,fields:q,modalTitle:"Evidence",emptyMessage:"No evidence documented yet",doctype:"Finding Evidence"},null,8,["modelValue"]),u("div",INt,[b(v(ve),{label:"Sample Size Tested",modelValue:y.sample_size,"onUpdate:modelValue":H[14]||(H[14]=Y=>y.sample_size=Y),type:"number",placeholder:"Number of items tested"},null,8,["modelValue"]),b(v(ve),{label:"Exceptions Found",modelValue:y.exceptions_found,"onUpdate:modelValue":H[15]||(H[15]=Y=>y.exceptions_found=Y),type:"number",placeholder:"Number of exceptions identified"},null,8,["modelValue"])]),u("div",null,[H[66]||(H[66]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Recommendation "),u("span",{class:"text-red-500"},"*")],-1)),b(v(an),{modelValue:y.recommendation,"onUpdate:modelValue":H[16]||(H[16]=Y=>y.recommendation=Y),placeholder:"Provide specific, actionable recommendations to address the finding...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])],512),[[lt,v(c)==="evidence"]]),we(u("div",ONt,[b(Vt,{title:"Management Response",description:"Management's agreement and response to the finding",icon:v(aa)},null,8,["icon"]),u("div",LNt,[u("div",null,[H[69]||(H[69]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Management Agrees",-1)),u("div",VNt,[u("label",NNt,[we(u("input",{type:"radio","onUpdate:modelValue":H[17]||(H[17]=Y=>y.management_agrees=Y),value:1,class:"form-radio h-4 w-4 text-blue-600"},null,512),[[Js,y.management_agrees]]),H[67]||(H[67]=u("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),u("label",jNt,[we(u("input",{type:"radio","onUpdate:modelValue":H[18]||(H[18]=Y=>y.management_agrees=Y),value:0,class:"form-radio h-4 w-4 text-blue-600"},null,512),[[Js,y.management_agrees]]),H[68]||(H[68]=u("span",{class:"ml-2 text-sm text-gray-700"},"No",-1))])])]),b(v(ve),{label:"Response Date",modelValue:y.response_date,"onUpdate:modelValue":H[19]||(H[19]=Y=>y.response_date=Y),type:"date"},null,8,["modelValue"])]),u("div",null,[H[70]||(H[70]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Management Comments ",-1)),b(v(an),{modelValue:y.management_comments,"onUpdate:modelValue":H[20]||(H[20]=Y=>y.management_comments=Y),placeholder:"Enter management's response and comments...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",FNt,[b(v(ve),{label:"Responding Manager",modelValue:y.management_response_by,"onUpdate:modelValue":H[21]||(H[21]=Y=>y.management_response_by=Y),type:"autocomplete",options:F.value,placeholder:"Select responding manager"},null,8,["modelValue","options"]),b(v(ve),{label:"Response Received On",modelValue:y.management_response_date,"onUpdate:modelValue":H[22]||(H[22]=Y=>y.management_response_date=Y),type:"date"},null,8,["modelValue"])])],512),[[lt,v(c)==="response"]]),we(u("div",BNt,[b(Vt,{title:"Corrective Action Plan",description:"Planned actions to address and resolve the finding",icon:v(L0)},null,8,["icon"]),u("div",null,[H[71]||(H[71]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Action Plan Description ",-1)),b(v(an),{modelValue:y.action_plan_description,"onUpdate:modelValue":H[23]||(H[23]=Y=>y.action_plan_description=Y),placeholder:"Describe the corrective action plan in detail...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])]),u("div",zNt,[b(v(ve),{label:"Responsible Person",modelValue:y.responsible_person,"onUpdate:modelValue":H[24]||(H[24]=Y=>y.responsible_person=Y),type:"autocomplete",options:F.value,placeholder:"Select person responsible for implementation"},null,8,["modelValue","options"]),b(v(ve),{label:"Target Completion Date",modelValue:y.target_date,"onUpdate:modelValue":H[25]||(H[25]=Y=>y.target_date=Y),type:"date"},null,8,["modelValue"])]),u("div",UNt,[b(v(ve),{label:"Revised Target Date",modelValue:y.revised_target_date,"onUpdate:modelValue":H[26]||(H[26]=Y=>y.revised_target_date=Y),type:"date"},null,8,["modelValue"]),b(v(ve),{label:"Priority",modelValue:y.priority,"onUpdate:modelValue":H[27]||(H[27]=Y=>y.priority=Y),type:"select",options:S},null,8,["modelValue"])]),b(da,{modelValue:y.milestones,"onUpdate:modelValue":H[28]||(H[28]=Y=>y.milestones=Y),title:"Action Milestones",columns:V,fields:O,modalTitle:"Milestone",emptyMessage:"No milestones defined yet",doctype:"Finding Action Milestone"},null,8,["modelValue"])],512),[[lt,v(c)==="action"]]),we(u("div",HNt,[b(Vt,{title:"Follow-up & Status",description:"Track finding status and follow-up activities",icon:v(mn)},null,8,["icon"]),u("div",qNt,[b(v(ve),{label:"Finding Status",modelValue:y.finding_status,"onUpdate:modelValue":H[29]||(H[29]=Y=>y.finding_status=Y),type:"select",options:w,required:!0},null,8,["modelValue"]),b(v(ve),{label:"Status Date",modelValue:y.status_date,"onUpdate:modelValue":H[30]||(H[30]=Y=>y.status_date=Y),type:"date"},null,8,["modelValue"])]),b(da,{modelValue:y.status_history,"onUpdate:modelValue":H[31]||(H[31]=Y=>y.status_history=Y),title:"Status History",columns:X,fields:j,modalTitle:"Status Change",emptyMessage:"No status changes recorded",doctype:"Finding Status Change"},null,8,["modelValue"]),u("div",WNt,[H[75]||(H[75]=u("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"Follow-up Settings",-1)),u("div",GNt,[u("div",null,[H[74]||(H[74]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Follow-up Required",-1)),u("div",YNt,[u("label",KNt,[we(u("input",{type:"radio","onUpdate:modelValue":H[32]||(H[32]=Y=>y.follow_up_required=Y),value:1,class:"form-radio h-4 w-4 text-blue-600"},null,512),[[Js,y.follow_up_required]]),H[72]||(H[72]=u("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),u("label",XNt,[we(u("input",{type:"radio","onUpdate:modelValue":H[33]||(H[33]=Y=>y.follow_up_required=Y),value:0,class:"form-radio h-4 w-4 text-blue-600"},null,512),[[Js,y.follow_up_required]]),H[73]||(H[73]=u("span",{class:"ml-2 text-sm text-gray-700"},"No",-1))])])]),b(v(ve),{label:"Follow-up Frequency",modelValue:y.follow_up_frequency,"onUpdate:modelValue":H[34]||(H[34]=Y=>y.follow_up_frequency=Y),type:"select",options:C,disabled:!y.follow_up_required},null,8,["modelValue","disabled"]),b(v(ve),{label:"Next Follow-up Date",modelValue:y.next_follow_up_date,"onUpdate:modelValue":H[35]||(H[35]=Y=>y.next_follow_up_date=Y),type:"date",disabled:!y.follow_up_required},null,8,["modelValue","disabled"])])]),b(da,{modelValue:y.follow_up_history,"onUpdate:modelValue":H[36]||(H[36]=Y=>y.follow_up_history=Y),title:"Follow-up History",columns:U,fields:G,modalTitle:"Follow-up Activity",emptyMessage:"No follow-up activities recorded",doctype:"Finding Follow-up Activity"},null,8,["modelValue"])],512),[[lt,v(c)==="followup"]]),we(u("div",QNt,[b(Vt,{title:"Verification",description:"Verification of corrective action implementation",icon:v(Ds)},null,8,["icon"]),u("div",ZNt,[b(v(ve),{label:"Verification Date",modelValue:y.verification_date,"onUpdate:modelValue":H[37]||(H[37]=Y=>y.verification_date=Y),type:"date"},null,8,["modelValue"]),b(v(ve),{label:"Verified By",modelValue:y.verified_by,"onUpdate:modelValue":H[38]||(H[38]=Y=>y.verified_by=Y),type:"autocomplete",options:F.value,placeholder:"Select verifier"},null,8,["modelValue","options"])]),u("div",JNt,[b(v(ve),{label:"Verification Method",modelValue:y.verification_method,"onUpdate:modelValue":H[39]||(H[39]=Y=>y.verification_method=Y),type:"select",options:A},null,8,["modelValue"]),b(v(ve),{label:"Verification Status",modelValue:y.verification_status,"onUpdate:modelValue":H[40]||(H[40]=Y=>y.verification_status=Y),type:"select",options:M},null,8,["modelValue"])]),u("div",null,[H[76]||(H[76]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Verification Results ",-1)),b(v(an),{modelValue:y.verification_results,"onUpdate:modelValue":H[41]||(H[41]=Y=>y.verification_results=Y),placeholder:"Document the results of the verification testing...",editorClass:"min-h-[150px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])],512),[[lt,v(c)==="verification"]]),we(u("div",e7t,[b(Vt,{title:"Closure & Reporting",description:"Finding closure details and reporting preferences",icon:v(c2)},null,8,["icon"]),u("div",t7t,[H[78]||(H[78]=u("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"Closure Information",-1)),u("div",n7t,[b(v(ve),{label:"Closure Date",modelValue:y.closure_date,"onUpdate:modelValue":H[42]||(H[42]=Y=>y.closure_date=Y),type:"date"},null,8,["modelValue"]),b(v(ve),{label:"Closed By",modelValue:y.closed_by,"onUpdate:modelValue":H[43]||(H[43]=Y=>y.closed_by=Y),type:"autocomplete",options:F.value,placeholder:"Select person closing the finding"},null,8,["modelValue","options"])]),u("div",r7t,[b(v(ve),{label:"Closure Reason",modelValue:y.closure_reason,"onUpdate:modelValue":H[44]||(H[44]=Y=>y.closure_reason=Y),type:"select",options:E},null,8,["modelValue"]),b(v(ve),{label:"Final Disposition",modelValue:y.final_disposition,"onUpdate:modelValue":H[45]||(H[45]=Y=>y.final_disposition=Y),type:"select",options:P},null,8,["modelValue"])]),u("div",s7t,[H[77]||(H[77]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Closure Notes ",-1)),b(v(an),{modelValue:y.closure_notes,"onUpdate:modelValue":H[46]||(H[46]=Y=>y.closure_notes=Y),placeholder:"Document any final notes or comments regarding the closure...",editorClass:"min-h-[100px] prose-sm",bubbleMenu:!0},null,8,["modelValue"])])]),u("div",i7t,[H[83]||(H[83]=u("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"Reporting Options",-1)),u("div",a7t,[u("label",o7t,[we(u("input",{type:"checkbox","onUpdate:modelValue":H[47]||(H[47]=Y=>y.include_in_report=Y),class:"form-checkbox h-4 w-4 text-blue-600 rounded"},null,512),[[Rn,y.include_in_report]]),H[79]||(H[79]=u("span",{class:"ml-2 text-sm text-gray-700"},"Include in Final Report",-1))]),u("label",l7t,[we(u("input",{type:"checkbox","onUpdate:modelValue":H[48]||(H[48]=Y=>y.reported_to_management=Y),class:"form-checkbox h-4 w-4 text-blue-600 rounded"},null,512),[[Rn,y.reported_to_management]]),H[80]||(H[80]=u("span",{class:"ml-2 text-sm text-gray-700"},"Reported to Management",-1))]),u("label",u7t,[we(u("input",{type:"checkbox","onUpdate:modelValue":H[49]||(H[49]=Y=>y.reported_to_audit_committee=Y),class:"form-checkbox h-4 w-4 text-blue-600 rounded"},null,512),[[Rn,y.reported_to_audit_committee]]),H[81]||(H[81]=u("span",{class:"ml-2 text-sm text-gray-700"},"Reported to Audit Committee",-1))]),u("label",d7t,[we(u("input",{type:"checkbox","onUpdate:modelValue":H[50]||(H[50]=Y=>y.reported_to_board=Y),class:"form-checkbox h-4 w-4 text-blue-600 rounded"},null,512),[[Rn,y.reported_to_board]]),H[82]||(H[82]=u("span",{class:"ml-2 text-sm text-gray-700"},"Reported to Board",-1))])]),u("div",c7t,[b(v(ve),{label:"Report Reference",modelValue:y.report_reference,"onUpdate:modelValue":H[51]||(H[51]=Y=>y.report_reference=Y),type:"text",placeholder:"Reference to the report containing this finding"},null,8,["modelValue"])])]),u("div",f7t,[b(da,{modelValue:y.related_findings,"onUpdate:modelValue":H[52]||(H[52]=Y=>y.related_findings=Y),title:"Related Findings",columns:ee,fields:ie,modalTitle:"Related Finding",emptyMessage:"No related findings linked",doctype:"Finding Related Finding"},null,8,["modelValue"])]),u("div",p7t,[H[87]||(H[87]=u("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"Repeat Finding Information",-1)),u("div",h7t,[u("div",null,[H[86]||(H[86]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Repeat Finding",-1)),u("div",m7t,[u("label",g7t,[we(u("input",{type:"radio","onUpdate:modelValue":H[53]||(H[53]=Y=>y.repeat_finding=Y),value:1,class:"form-radio h-4 w-4 text-yellow-600"},null,512),[[Js,y.repeat_finding]]),H[84]||(H[84]=u("span",{class:"ml-2 text-sm text-gray-700"},"Yes",-1))]),u("label",v7t,[we(u("input",{type:"radio","onUpdate:modelValue":H[54]||(H[54]=Y=>y.repeat_finding=Y),value:0,class:"form-radio h-4 w-4 text-yellow-600"},null,512),[[Js,y.repeat_finding]]),H[85]||(H[85]=u("span",{class:"ml-2 text-sm text-gray-700"},"No",-1))])])]),y.repeat_finding?(T(),he(v(ve),{key:0,label:"Previous Finding Reference",modelValue:y.previous_finding_reference,"onUpdate:modelValue":H[55]||(H[55]=Y=>y.previous_finding_reference=Y),type:"autocomplete",options:L.value,placeholder:"Link to previous finding"},null,8,["modelValue","options"])):se("",!0)])])],512),[[lt,v(c)==="closure"]])])])]),actions:D(()=>[u("div",y7t,[u("div",b7t,[b(v(J),{variant:"subtle",onClick:ne,disabled:v(c)==="basic"},{default:D(()=>[b(v(gr),{class:"h-4 w-4 mr-1"}),H[88]||(H[88]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(v(J),{variant:"subtle",onClick:ce,disabled:v(c)==="closure"},{default:D(()=>[H[89]||(H[89]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4 ml-1"})]),_:1},8,["disabled"])]),u("div",x7t,[b(v(J),{variant:"subtle",onClick:re},{default:D(()=>[...H[90]||(H[90]=[W(" Save as Draft ",-1)])]),_:1}),b(v(J),{variant:"outline",onClick:K},{default:D(()=>[...H[91]||(H[91]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{variant:"solid",theme:"blue",onClick:te,loading:a.value},{default:D(()=>[W($(i.value?"Update Finding":"Create Finding"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","options"]))}},w7t=It(_7t,[["__scopeId","data-v-905d7e19"]]),k7t={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6"},S7t={class:"flex flex-wrap items-center gap-4"},C7t={class:"flex-1 min-w-[200px]"},A7t={class:"relative"},T7t={class:"w-40"},$7t={class:"w-44"},M7t={class:"w-36"},E7t={class:"w-48"},D7t={class:"flex items-center gap-2"},R7t={key:0,class:"mt-4 pt-4 border-t border-gray-200"},P7t={class:"flex flex-wrap items-center gap-4"},I7t={class:"w-48"},O7t={class:"w-40"},L7t={class:"inline-flex items-center"},V7t={class:"inline-flex items-center"},N7t={class:"inline-flex items-center"},j7t={key:1,class:"mt-3 flex flex-wrap gap-2"},F7t={__name:"FindingsFilters",props:{modelValue:{type:Object,default:()=>({})},engagementOptions:{type:Array,default:()=>[]},userOptions:{type:Array,default:()=>[]}},emits:["update:modelValue","filter-change"],setup(t,{emit:e}){const n=t,r=e,s=Q(!1),i=Jt({search:"",status:"",category:"",riskRating:"",engagement:"",dateFrom:"",dateTo:"",responsiblePerson:"",followUpRequired:"",overdueOnly:!1,repeatFindingsOnly:!1,includeInReport:!1}),a=[{label:"All Statuses",value:""},{label:"Open",value:"Open"},{label:"Action in Progress",value:"Action in Progress"},{label:"Pending Verification",value:"Pending Verification"},{label:"Closed",value:"Closed"},{label:"Accepted as Risk",value:"Accepted as Risk"},{label:"Management Override",value:"Management Override"}],o=[{label:"All Categories",value:""},{label:"Control Weakness",value:"Control Weakness"},{label:"Process Inefficiency",value:"Process Inefficiency"},{label:"Compliance Gap",value:"Compliance Gap"},{label:"Policy Violation",value:"Policy Violation"},{label:"Documentation Issue",value:"Documentation Issue"},{label:"Fraud Indicator",value:"Fraud Indicator"},{label:"IT/System Issue",value:"IT/System Issue"},{label:"Operational Risk",value:"Operational Risk"}],l=[{label:"All Ratings",value:""},{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],d=[{label:"All",value:""},{label:"Required",value:"1"},{label:"Not Required",value:"0"}],c=Z(()=>Object.entries(i).some(([g,y])=>typeof y=="boolean"?y:y!=="")),f=Z(()=>{const g=[];return i.status&&g.push({key:"status",label:"Status",value:i.status}),i.category&&g.push({key:"category",label:"Category",value:i.category}),i.riskRating&&g.push({key:"riskRating",label:"Risk",value:i.riskRating}),i.engagement&&g.push({key:"engagement",label:"Engagement",value:i.engagement}),i.overdueOnly&&g.push({key:"overdueOnly",label:"Filter",value:"Overdue"}),i.repeatFindingsOnly&&g.push({key:"repeatFindingsOnly",label:"Filter",value:"Repeat"}),g}),p=()=>{r("update:modelValue",ge({},i)),r("filter-change",ge({},i))},h=()=>{Object.keys(i).forEach(g=>{typeof i[g]=="boolean"?i[g]=!1:i[g]=""}),p()},m=g=>{typeof i[g]=="boolean"?i[g]=!1:i[g]="",p()};return et(()=>n.modelValue,g=>{g&&Object.assign(i,g)},{immediate:!0,deep:!0}),(g,y)=>(T(),R("div",k7t,[u("div",S7t,[u("div",C7t,[u("div",A7t,[b(v(En),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),we(u("input",{"onUpdate:modelValue":y[0]||(y[0]=x=>i.search=x),type:"text",placeholder:"Search findings...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:p},null,544),[[Rt,i.search]])])]),u("div",T7t,[b(v(ve),{modelValue:i.status,"onUpdate:modelValue":y[1]||(y[1]=x=>i.status=x),type:"select",options:a,placeholder:"Status",onChange:p},null,8,["modelValue"])]),u("div",$7t,[b(v(ve),{modelValue:i.category,"onUpdate:modelValue":y[2]||(y[2]=x=>i.category=x),type:"select",options:o,placeholder:"Category",onChange:p},null,8,["modelValue"])]),u("div",M7t,[b(v(ve),{modelValue:i.riskRating,"onUpdate:modelValue":y[3]||(y[3]=x=>i.riskRating=x),type:"select",options:l,placeholder:"Risk Rating",onChange:p},null,8,["modelValue"])]),u("div",E7t,[b(v(ve),{modelValue:i.engagement,"onUpdate:modelValue":y[4]||(y[4]=x=>i.engagement=x),type:"autocomplete",options:t.engagementOptions,placeholder:"Engagement",onChange:p},null,8,["modelValue","options"])]),u("div",D7t,[b(v(ve),{modelValue:i.dateFrom,"onUpdate:modelValue":y[5]||(y[5]=x=>i.dateFrom=x),type:"date",placeholder:"From",class:"w-36",onChange:p},null,8,["modelValue"]),y[13]||(y[13]=u("span",{class:"text-gray-400"},"to",-1)),b(v(ve),{modelValue:i.dateTo,"onUpdate:modelValue":y[6]||(y[6]=x=>i.dateTo=x),type:"date",placeholder:"To",class:"w-36",onChange:p},null,8,["modelValue"])]),c.value?(T(),he(v(J),{key:0,variant:"subtle",onClick:h},{default:D(()=>[b(v(ht),{class:"h-4 w-4 mr-1"}),y[14]||(y[14]=W(" Clear ",-1))]),_:1})):se("",!0),b(v(J),{variant:"subtle",onClick:y[7]||(y[7]=x=>s.value=!s.value)},{default:D(()=>[b(v(eR),{class:"h-4 w-4 mr-1"}),W(" "+$(s.value?"Less":"More"),1)]),_:1})]),s.value?(T(),R("div",R7t,[u("div",P7t,[u("div",I7t,[b(v(ve),{modelValue:i.responsiblePerson,"onUpdate:modelValue":y[8]||(y[8]=x=>i.responsiblePerson=x),type:"autocomplete",options:t.userOptions,placeholder:"Responsible Person",onChange:p},null,8,["modelValue","options"])]),u("div",O7t,[b(v(ve),{modelValue:i.followUpRequired,"onUpdate:modelValue":y[9]||(y[9]=x=>i.followUpRequired=x),type:"select",options:d,placeholder:"Follow-up",onChange:p},null,8,["modelValue"])]),u("label",L7t,[we(u("input",{type:"checkbox","onUpdate:modelValue":y[10]||(y[10]=x=>i.overdueOnly=x),class:"form-checkbox h-4 w-4 text-blue-600 rounded",onChange:p},null,544),[[Rn,i.overdueOnly]]),y[15]||(y[15]=u("span",{class:"ml-2 text-sm text-gray-700"},"Overdue Only",-1))]),u("label",V7t,[we(u("input",{type:"checkbox","onUpdate:modelValue":y[11]||(y[11]=x=>i.repeatFindingsOnly=x),class:"form-checkbox h-4 w-4 text-yellow-600 rounded",onChange:p},null,544),[[Rn,i.repeatFindingsOnly]]),y[16]||(y[16]=u("span",{class:"ml-2 text-sm text-gray-700"},"Repeat Findings",-1))]),u("label",N7t,[we(u("input",{type:"checkbox","onUpdate:modelValue":y[12]||(y[12]=x=>i.includeInReport=x),class:"form-checkbox h-4 w-4 text-green-600 rounded",onChange:p},null,544),[[Rn,i.includeInReport]]),y[17]||(y[17]=u("span",{class:"ml-2 text-sm text-gray-700"},"Include in Report",-1))])])])):se("",!0),f.value.length>0?(T(),R("div",j7t,[(T(!0),R(xe,null,_e(f.value,x=>(T(),he(v(De),{key:x.key,variant:"subtle",theme:"blue",class:"cursor-pointer",onClick:_=>m(x.key)},{default:D(()=>[W($(x.label)+": "+$(x.value)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:2},1032,["onClick"]))),128))])):se("",!0)]))}},B7t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},z7t={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},U7t={class:"flex items-center justify-between"},H7t={class:"text-2xl font-bold text-gray-900 mt-1"},q7t={class:"p-3 bg-blue-50 rounded-lg"},W7t={class:"mt-3 flex items-center text-sm"},G7t={class:"text-gray-500"},Y7t={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},K7t={class:"flex items-center justify-between"},X7t={class:"text-2xl font-bold text-red-600 mt-1"},Q7t={class:"p-3 bg-red-50 rounded-lg"},Z7t={class:"mt-3 flex items-center text-sm"},J7t={class:"text-red-600 font-medium"},ejt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},tjt={class:"flex items-center justify-between"},njt={class:"text-2xl font-bold text-yellow-600 mt-1"},rjt={class:"p-3 bg-yellow-50 rounded-lg"},sjt={class:"mt-3 flex items-center text-sm"},ijt={class:"text-gray-500"},ajt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4"},ojt={class:"flex items-center justify-between"},ljt={class:"text-2xl font-bold text-green-600 mt-1"},ujt={class:"p-3 bg-green-50 rounded-lg"},djt={class:"mt-3 flex items-center text-sm"},cjt={class:"text-green-600 font-medium"},fjt={class:"col-span-1 md:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-4"},pjt={class:"flex items-center justify-between mb-4"},hjt={class:"grid grid-cols-4 gap-3"},mjt={class:"text-center p-3 bg-red-50 rounded-lg"},gjt={class:"text-xl font-bold text-red-700"},vjt={class:"text-center p-3 bg-orange-50 rounded-lg"},yjt={class:"text-xl font-bold text-orange-700"},bjt={class:"text-center p-3 bg-yellow-50 rounded-lg"},xjt={class:"text-xl font-bold text-yellow-700"},_jt={class:"text-center p-3 bg-green-50 rounded-lg"},wjt={class:"text-xl font-bold text-green-700"},kjt={class:"col-span-1 md:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-4"},Sjt={class:"flex items-center justify-between mb-4"},Cjt={class:"space-y-3"},Ajt={class:"flex items-center"},Tjt={class:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},$jt={class:"w-12 text-right text-sm font-medium text-gray-900"},Mjt={class:"flex items-center"},Ejt={class:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},Djt={class:"w-12 text-right text-sm font-medium text-gray-900"},Rjt={class:"flex items-center"},Pjt={class:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},Ijt={class:"w-12 text-right text-sm font-medium text-gray-900"},Ojt={class:"flex items-center"},Ljt={class:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},Vjt={class:"w-12 text-right text-sm font-medium text-gray-900"},Njt={__name:"FindingsStats",props:{stats:{type:Object,default:()=>({total:0,thisMonth:0,open:0,overdue:0,inProgress:0,pendingVerification:0,closed:0,closureRate:0,bySeverity:{critical:0,high:0,medium:0,low:0},aging:{days0to30:0,days31to60:0,days61to90:0,days90plus:0}})}},setup(t){const e=t,n=Z(()=>{const s=e.stats.aging||{};return(s.days0to30||0)+(s.days31to60||0)+(s.days61to90||0)+(s.days90plus||0)}),r=s=>n.value===0?0:Math.round(s/n.value*100);return(s,i)=>(T(),R("div",B7t,[u("div",z7t,[u("div",U7t,[u("div",null,[i[0]||(i[0]=u("p",{class:"text-sm font-medium text-gray-500"},"Total Findings",-1)),u("p",H7t,$(t.stats.total),1)]),u("div",q7t,[b(v(En),{class:"h-6 w-6 text-blue-600"})])]),u("div",W7t,[u("span",G7t,$(t.stats.thisMonth)+" this month",1)])]),u("div",Y7t,[u("div",K7t,[u("div",null,[i[1]||(i[1]=u("p",{class:"text-sm font-medium text-gray-500"},"Open Findings",-1)),u("p",X7t,$(t.stats.open),1)]),u("div",Q7t,[b(v(rn),{class:"h-6 w-6 text-red-600"})])]),u("div",Z7t,[u("span",J7t,$(t.stats.overdue)+" overdue",1)])]),u("div",ejt,[u("div",tjt,[u("div",null,[i[2]||(i[2]=u("p",{class:"text-sm font-medium text-gray-500"},"In Progress",-1)),u("p",njt,$(t.stats.inProgress),1)]),u("div",rjt,[b(v(Ns),{class:"h-6 w-6 text-yellow-600"})])]),u("div",sjt,[u("span",ijt,$(t.stats.pendingVerification)+" pending verification",1)])]),u("div",ajt,[u("div",ojt,[u("div",null,[i[3]||(i[3]=u("p",{class:"text-sm font-medium text-gray-500"},"Closed Findings",-1)),u("p",ljt,$(t.stats.closed),1)]),u("div",ujt,[b(v(ro),{class:"h-6 w-6 text-green-600"})])]),u("div",djt,[u("span",cjt,$(t.stats.closureRate)+"%",1),i[4]||(i[4]=u("span",{class:"text-gray-500 ml-1"},"closure rate",-1))])]),u("div",fjt,[u("div",pjt,[i[6]||(i[6]=u("h3",{class:"text-sm font-medium text-gray-900"},"Risk Distribution",-1)),b(v(De),{variant:"subtle",theme:"gray"},{default:D(()=>[...i[5]||(i[5]=[W("Open Findings",-1)])]),_:1})]),u("div",hjt,[u("div",mjt,[u("p",gjt,$(t.stats.bySeverity.critical),1),i[7]||(i[7]=u("p",{class:"text-xs text-red-600 mt-1"},"Critical",-1))]),u("div",vjt,[u("p",yjt,$(t.stats.bySeverity.high),1),i[8]||(i[8]=u("p",{class:"text-xs text-orange-600 mt-1"},"High",-1))]),u("div",bjt,[u("p",xjt,$(t.stats.bySeverity.medium),1),i[9]||(i[9]=u("p",{class:"text-xs text-yellow-600 mt-1"},"Medium",-1))]),u("div",_jt,[u("p",wjt,$(t.stats.bySeverity.low),1),i[10]||(i[10]=u("p",{class:"text-xs text-green-600 mt-1"},"Low",-1))])])]),u("div",kjt,[u("div",Sjt,[i[12]||(i[12]=u("h3",{class:"text-sm font-medium text-gray-900"},"Finding Aging",-1)),b(v(De),{variant:"subtle",theme:"gray"},{default:D(()=>[...i[11]||(i[11]=[W("Open Findings",-1)])]),_:1})]),u("div",Cjt,[u("div",Ajt,[i[13]||(i[13]=u("span",{class:"w-24 text-sm text-gray-600"},"0-30 days",-1)),u("div",Tjt,[u("div",{class:"h-full bg-green-500 rounded-full",style:rt({width:`${r(t.stats.aging.days0to30)}%`})},null,4)]),u("span",$jt,$(t.stats.aging.days0to30),1)]),u("div",Mjt,[i[14]||(i[14]=u("span",{class:"w-24 text-sm text-gray-600"},"31-60 days",-1)),u("div",Ejt,[u("div",{class:"h-full bg-yellow-500 rounded-full",style:rt({width:`${r(t.stats.aging.days31to60)}%`})},null,4)]),u("span",Djt,$(t.stats.aging.days31to60),1)]),u("div",Rjt,[i[15]||(i[15]=u("span",{class:"w-24 text-sm text-gray-600"},"61-90 days",-1)),u("div",Pjt,[u("div",{class:"h-full bg-orange-500 rounded-full",style:rt({width:`${r(t.stats.aging.days61to90)}%`})},null,4)]),u("span",Ijt,$(t.stats.aging.days61to90),1)]),u("div",Ojt,[i[16]||(i[16]=u("span",{class:"w-24 text-sm text-gray-600"},"90+ days",-1)),u("div",Ljt,[u("div",{class:"h-full bg-red-500 rounded-full",style:rt({width:`${r(t.stats.aging.days90plus)}%`})},null,4)]),u("span",Vjt,$(t.stats.aging.days90plus),1)])])])]))}},jjt={class:"space-y-6"},Fjt={class:"flex items-center justify-between"},Bjt={class:"flex items-center space-x-3"},zjt={class:"bg-white rounded-lg border border-gray-200"},Ujt={class:"p-6"},Hjt=["onClick"],qjt={class:"flex items-center"},Wjt={class:"flex items-center space-x-2"},Gjt={__name:"FindingsList",setup(t){const e=_n(),n=qo(),r=Q(!1),s=Q(!1),i=Q(null),a=Jt({search:"",status:"",category:"",riskRating:"",engagement:"",dateFrom:"",dateTo:"",responsiblePerson:"",followUpRequired:"",overdueOnly:!1,repeatFindingsOnly:!1,includeInReport:!1}),o=Q([]),l=Q([]),d=Z(()=>n.findings),c=Z(()=>{let F=[...d.value];if(a.search){const L=a.search.toLowerCase();F=F.filter(z=>{var N,q,V;return((N=z.finding_id)==null?void 0:N.toLowerCase().includes(L))||((q=z.finding_title)==null?void 0:q.toLowerCase().includes(L))||((V=z.condition)==null?void 0:V.toLowerCase().includes(L))})}return a.status&&(F=F.filter(L=>L.finding_status===a.status)),a.category&&(F=F.filter(L=>L.finding_category===a.category)),a.riskRating&&(F=F.filter(L=>L.risk_rating===a.riskRating)),a.engagement&&(F=F.filter(L=>L.engagement_reference===a.engagement)),a.overdueOnly&&(F=F.filter(L=>m(L.target_completion_date)&&L.finding_status!=="Closed")),a.repeatFindingsOnly&&(F=F.filter(L=>L.repeat_finding)),F}),f=Z(()=>{const F=d.value,L=new Date,z=new Date(L.getFullYear(),L.getMonth(),1),N=F.filter(ee=>ee.finding_status==="Open"),q=F.filter(ee=>ee.finding_status==="Action in Progress"),V=F.filter(ee=>ee.finding_status==="Pending Verification"),O=F.filter(ee=>ee.finding_status==="Closed"),X=F.filter(ee=>ee.finding_status!=="Closed"&&m(ee.target_completion_date)),j=F.filter(ee=>new Date(ee.creation)>=z),U={critical:N.filter(ee=>ee.risk_rating==="Critical").length,high:N.filter(ee=>ee.risk_rating==="High").length,medium:N.filter(ee=>ee.risk_rating==="Medium").length,low:N.filter(ee=>ee.risk_rating==="Low").length},G=h(F.filter(ee=>ee.finding_status!=="Closed"));return{total:F.length,thisMonth:j.length,open:N.length,overdue:X.length,inProgress:q.length,pendingVerification:V.length,closed:O.length,closureRate:F.length>0?Math.round(O.length/F.length*100):0,bySeverity:U,aging:G}}),p=[{key:"finding_id",label:"Finding ID",sortable:!0,width:"120px"},{key:"finding_title",label:"Finding Title",sortable:!0},{key:"risk_rating",label:"Risk Rating",sortable:!0,width:"100px"},{key:"finding_status",label:"Status",sortable:!0,width:"140px"},{key:"engagement_reference",label:"Engagement",sortable:!0,width:"150px"},{key:"responsible_person",label:"Responsible",sortable:!0,width:"150px"},{key:"target_completion_date",label:"Due Date",sortable:!0,width:"120px"},{key:"actions",label:"Actions",width:"100px"}],h=F=>{const L=new Date,z={days0to30:0,days31to60:0,days61to90:0,days90plus:0};return F.forEach(N=>{const q=new Date(N.creation),V=Math.floor((L-q)/(1e3*60*60*24));V<=30?z.days0to30++:V<=60?z.days31to60++:V<=90?z.days61to90++:z.days90plus++}),z},m=F=>F?new Date(F)<new Date:!1,g=F=>F?new Date(F).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",y=()=>ue(this,null,function*(){r.value=!0;try{const F=yield Ve({url:"frappe.client.get_list",params:{doctype:"Audit Finding",fields:["name","finding_id","finding_title","finding_status","finding_category","risk_rating","engagement_reference","responsible_person","responsible_department","target_completion_date","creation","modified","condition","effect","recommendation","repeat_finding","follow_up_required"],limit_page_length:1e3,order_by:"creation desc"}}).fetch();n.setFindings(F||[])}catch(F){console.error("Error loading findings:",F),n.setFindings([])}finally{r.value=!1}}),x=()=>ue(this,null,function*(){try{const F=yield Ve({url:"frappe.client.get_list",params:{doctype:"Audit Engagement",fields:["name","engagement_title"],limit_page_length:500}}).fetch();o.value=(F||[]).map(L=>({label:L.engagement_title||L.name,value:L.name}))}catch(F){console.error("Error loading engagements:",F)}try{const F=yield Ve({url:"frappe.client.get_list",params:{doctype:"User",fields:["name","full_name"],filters:{enabled:1},limit_page_length:500}}).fetch();l.value=(F||[]).map(L=>({label:L.full_name||L.name,value:L.name}))}catch(F){console.error("Error loading users:",F)}}),_=F=>({Critical:"red",High:"orange",Medium:"yellow",Low:"green"})[F]||"gray",k=F=>({Open:"red","Action in Progress":"yellow","Pending Verification":"blue",Closed:"green","Accepted as Risk":"gray","Management Override":"gray"})[F]||"gray",w=F=>{Object.assign(a,F)},S=F=>{e.push(`/findings/${F.name}`)},C=F=>{e.push(`/findings/${F.name}`)},A=F=>{i.value=F,s.value=!0},M=F=>{confirm("Are you sure you want to delete this finding?")},E=()=>{console.log("Exporting findings...")},P=F=>ue(this,null,function*(){yield y(),s.value=!1,i.value=null}),I=()=>{i.value=null};return yt(()=>ue(this,null,function*(){yield Promise.all([y(),x()])})),(F,L)=>(T(),R("div",jjt,[u("div",Fjt,[L[5]||(L[5]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Findings"),u("p",{class:"text-gray-600 mt-1"}," Review and manage audit findings and observations ")],-1)),u("div",Bjt,[b(v(J),{variant:"outline",onClick:E},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),L[3]||(L[3]=W(" Export ",-1))]),_:1}),b(v(J),{variant:"solid",theme:"blue",onClick:L[0]||(L[0]=z=>s.value=!0)},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),L[4]||(L[4]=W(" New Finding ",-1))]),_:1})])]),b(Njt,{stats:f.value},null,8,["stats"]),b(F7t,{modelValue:a,"onUpdate:modelValue":L[1]||(L[1]=z=>a=z),"engagement-options":o.value,"user-options":l.value,onFilterChange:w},null,8,["modelValue","engagement-options","user-options"]),u("div",zjt,[u("div",Ujt,[b(v(sO),{columns:p,data:c.value,loading:r.value,pagination:!0,sortable:!0,filterable:!1,onRowClick:S},{"column-finding_id":D(({row:z})=>[u("span",{class:"text-blue-600 font-medium cursor-pointer hover:underline",onClick:ut(N=>C(z),["stop"])},$(z.finding_id),9,Hjt)]),"column-risk_rating":D(({row:z})=>[b(v(De),{theme:_(z.risk_rating),variant:"subtle"},{default:D(()=>[W($(z.risk_rating||"Medium"),1)]),_:2},1032,["theme"])]),"column-finding_status":D(({row:z})=>[b(v(De),{theme:k(z.finding_status),variant:"subtle"},{default:D(()=>[W($(z.finding_status||"Open"),1)]),_:2},1032,["theme"])]),"column-target_completion_date":D(({row:z})=>[u("div",qjt,[u("span",{class:pe(m(z.target_completion_date)?"text-red-600 font-medium":"text-gray-600")},$(g(z.target_completion_date)),3),m(z.target_completion_date)&&z.finding_status!=="Closed"?(T(),he(v(qr),{key:0,class:"h-4 w-4 text-red-500 ml-1"})):se("",!0)])]),"column-actions":D(({row:z})=>[u("div",Wjt,[b(v(J),{variant:"ghost",size:"sm",onClick:ut(N=>C(z),["stop"]),title:"View"},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(N=>A(z),["stop"]),title:"Edit"},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(N=>M(z),["stop"]),title:"Delete"},{default:D(()=>[b(v(es),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]),_:1},8,["data","loading"])])]),b(w7t,{modelValue:s.value,"onUpdate:modelValue":L[2]||(L[2]=z=>s.value=z),finding:i.value,onSaved:P,onClose:I},null,8,["modelValue","finding"])]))}},Yjt={class:"flex h-[75vh]"},Kjt={class:"w-52 border-r bg-gray-50 p-4 flex flex-col"},Xjt={class:"space-y-1 flex-1"},Qjt=["onClick"],Zjt={class:"text-sm"},Jjt={class:"mt-4 pt-4 border-t"},e9t={class:"text-xs text-gray-500 mb-2"},t9t={class:"w-full bg-gray-200 rounded-full h-2"},n9t={class:"flex-1 flex flex-col overflow-hidden"},r9t={class:"flex-1 overflow-y-auto p-6"},s9t={class:"space-y-4"},i9t={class:"grid grid-cols-2 gap-4"},a9t={class:"grid grid-cols-3 gap-4"},o9t={class:"grid grid-cols-2 gap-4"},l9t={class:"space-y-4"},u9t={class:"grid grid-cols-2 gap-4"},d9t={class:"space-y-4"},c9t={class:"flex items-center justify-between mb-3"},f9t={class:"border rounded-lg overflow-hidden max-h-64 overflow-y-auto"},p9t={class:"min-w-full divide-y divide-gray-200"},h9t={class:"bg-white divide-y divide-gray-200"},m9t={class:"px-3 py-2"},g9t={class:"px-3 py-2"},v9t={class:"px-3 py-2"},y9t={class:"px-3 py-2"},b9t={class:"px-3 py-2"},x9t={key:0},_9t={class:"bg-gray-50 rounded-lg p-4"},w9t={class:"grid grid-cols-2 gap-4"},k9t={class:"space-y-4"},S9t={class:"grid grid-cols-3 gap-4"},C9t={class:"flex items-center gap-1 mt-2"},A9t=["onClick"],T9t={class:"flex items-center gap-1 mt-2"},$9t=["onClick"],M9t={class:"space-y-4"},E9t={class:"flex items-center gap-3 p-4 bg-orange-50 border border-orange-200 rounded-lg"},D9t={key:0,class:"space-y-4 p-4 bg-gray-50 rounded-lg"},R9t={class:"grid grid-cols-2 gap-4"},P9t={class:"space-y-4"},I9t={class:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg"},O9t={class:"grid grid-cols-3 gap-4"},L9t={class:"border-t bg-gray-50 px-6 py-4 flex items-center justify-between"},V9t={class:"flex items-center gap-2"},N9t={__name:"FollowUpForm",props:{show:{type:Boolean,default:!1},tracker:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.show,set:z=>r("update:show",z)}),i=Z(()=>{var z;return!!((z=n.tracker)!=null&&z.name)}),a=Q(!1),o=Q(0),l=[{id:"basic",title:"Basic Info",icon:YS,description:"Tracker identification and scheduling"},{id:"details",title:"Details",icon:vt,description:"Objectives and responsibility"},{id:"history",title:"Activities",icon:GS,description:"Follow-up activities and history"},{id:"progress",title:"Progress",icon:$l,description:"Progress assessment and ratings"},{id:"escalation",title:"Escalation",icon:rn,description:"Escalation management"},{id:"closure",title:"Closure",icon:ro,description:"Closure and final assessment"}],d=Jt({tracker_id:"",audit_finding:"",finding_title:"",status:"Active",follow_up_type:"",frequency:"",start_date:"",next_due_date:"",responsible_person:"",responsible_department:"",follow_up_objective:"",success_criteria:"",follow_up_activities:[],last_follow_up_date:"",last_follow_up_by:"",last_findings:"",next_steps:"",current_status:"",progress_rating:0,effectiveness_rating:0,issues_identified:"",recommendations:"",escalation_required:!1,escalation_level:"",escalation_reason:"",escalation_date:"",closure_criteria_met:!1,closure_date:"",closed_by:"",closure_reason:"",final_assessment:"",notes:""}),c=[{label:"Active",value:"Active"},{label:"Completed",value:"Completed"},{label:"On Hold",value:"On Hold"},{label:"Cancelled",value:"Cancelled"}],f=[{label:"Corrective Action Monitoring",value:"Corrective Action Monitoring"},{label:"Preventive Measure Verification",value:"Preventive Measure Verification"},{label:"Process Improvement Tracking",value:"Process Improvement Tracking"},{label:"Risk Mitigation Assessment",value:"Risk Mitigation Assessment"},{label:"Compliance Verification",value:"Compliance Verification"}],p=[{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"One-time",value:"One-time"},{label:"As Needed",value:"As Needed"}],h=[{label:"Review",value:"Review"},{label:"Meeting",value:"Meeting"},{label:"Document Request",value:"Document Request"},{label:"Testing",value:"Testing"},{label:"Observation",value:"Observation"},{label:"Other",value:"Other"}],m=[{label:"On Track",value:"On Track"},{label:"Behind Schedule",value:"Behind Schedule"},{label:"At Risk",value:"At Risk"},{label:"Off Track",value:"Off Track"},{label:"Completed Successfully",value:"Completed Successfully"}],g=[{label:"Manager",value:"Manager"},{label:"Senior Management",value:"Senior Management"},{label:"Audit Committee",value:"Audit Committee"},{label:"Board",value:"Board"}],y=[{label:"Successfully Completed",value:"Successfully Completed"},{label:"No Longer Required",value:"No Longer Required"},{label:"Alternative Solution Implemented",value:"Alternative Solution Implemented"},{label:"Management Decision",value:"Management Decision"}];et(()=>n.tracker,z=>{z?Object.keys(d).forEach(N=>{z[N]!==void 0&&(d[N]=z[N])}):I()},{immediate:!0});const x=Z(()=>[!!(d.tracker_id&&d.audit_finding&&d.status&&d.follow_up_type&&d.frequency&&d.start_date),!!(d.responsible_person&&d.responsible_department&&d.follow_up_objective),!0,!0,!0,!0]),_=Z(()=>x.value.filter(Boolean).length),k=Z(()=>Math.round(_.value/l.length*100));function w(z){return x.value[z]}function S(z){return o.value===z?"text-blue-600":w(z)?"text-green-500":"text-gray-400"}function C(z){o.value=z}function A(){o.value<l.length-1&&o.value++}function M(){o.value>0&&o.value--}function E(){d.follow_up_activities.push({activity_date:new Date().toISOString().split("T")[0],activity_type:"",description:"",performed_by:""})}function P(z){d.follow_up_activities.splice(z,1)}function I(){Object.keys(d).forEach(z=>{Array.isArray(d[z])?d[z]=[]:typeof d[z]=="boolean"?d[z]=!1:typeof d[z]=="number"?d[z]=0:d[z]=""}),d.status="Active",o.value=0}function F(){r("update:show",!1),I()}function L(){return ue(this,null,function*(){a.value=!0;try{console.log("Saving tracker:",d),r("saved",ge({},d)),F()}catch(z){console.error("Error saving tracker:",z)}finally{a.value=!1}})}return(z,N)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":N[29]||(N[29]=q=>s.value=q),options:{title:i.value?"Edit Follow-up Tracker":"Create Follow-up Tracker",size:"7xl"}},{"body-content":D(()=>{var q,V,O,X;return[u("div",Yjt,[u("div",Kjt,[u("div",Xjt,[(T(),R(xe,null,_e(l,(j,U)=>u("button",{key:j.id,onClick:G=>C(U),class:pe(["w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors",o.value===U?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"])},[(T(),he(At(j.icon),{class:pe(["h-4 w-4",S(U)])},null,8,["class"])),u("span",Zjt,$(j.title),1),w(U)?(T(),he(v(ro),{key:0,class:"h-4 w-4 ml-auto text-green-500"})):se("",!0)],10,Qjt)),64))]),u("div",Jjt,[u("div",e9t," Progress: "+$(_.value)+"/"+$(l.length)+" sections ",1),u("div",t9t,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:rt({width:`${k.value}%`})},null,4)])])]),u("div",n9t,[b(Vt,{icon:(q=l[o.value])==null?void 0:q.icon,title:(V=l[o.value])==null?void 0:V.title,description:(O=l[o.value])==null?void 0:O.description},null,8,["icon","title","description"]),u("div",r9t,[we(u("div",s9t,[u("div",i9t,[b(v(ve),{modelValue:d.tracker_id,"onUpdate:modelValue":N[0]||(N[0]=j=>d.tracker_id=j),label:"Tracker ID *",type:"text",placeholder:"e.g., FUT-2025-001"},null,8,["modelValue"]),u("div",null,[N[30]||(N[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Finding *",-1)),b(Mt,{modelValue:d.audit_finding,"onUpdate:modelValue":N[1]||(N[1]=j=>d.audit_finding=j),doctype:"Audit Finding",placeholder:"Select finding"},null,8,["modelValue"])])]),b(v(ve),{modelValue:d.finding_title,"onUpdate:modelValue":N[2]||(N[2]=j=>d.finding_title=j),label:"Finding Title",type:"text",disabled:""},null,8,["modelValue"]),u("div",a9t,[u("div",null,[N[31]||(N[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status *",-1)),b(v(Qe),{modelValue:d.status,"onUpdate:modelValue":N[3]||(N[3]=j=>d.status=j),options:c,placeholder:"Select status"},null,8,["modelValue"])]),u("div",null,[N[32]||(N[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Follow-up Type *",-1)),b(v(Qe),{modelValue:d.follow_up_type,"onUpdate:modelValue":N[4]||(N[4]=j=>d.follow_up_type=j),options:f,placeholder:"Select type"},null,8,["modelValue"])]),u("div",null,[N[33]||(N[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Frequency *",-1)),b(v(Qe),{modelValue:d.frequency,"onUpdate:modelValue":N[5]||(N[5]=j=>d.frequency=j),options:p,placeholder:"Select frequency"},null,8,["modelValue"])])]),u("div",o9t,[b(v(ve),{modelValue:d.start_date,"onUpdate:modelValue":N[6]||(N[6]=j=>d.start_date=j),label:"Start Date *",type:"date"},null,8,["modelValue"]),b(v(ve),{modelValue:d.next_due_date,"onUpdate:modelValue":N[7]||(N[7]=j=>d.next_due_date=j),label:"Next Due Date",type:"date"},null,8,["modelValue"])])],512),[[lt,o.value===0]]),we(u("div",l9t,[u("div",u9t,[u("div",null,[N[34]||(N[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Responsible Person *",-1)),b(Mt,{modelValue:d.responsible_person,"onUpdate:modelValue":N[8]||(N[8]=j=>d.responsible_person=j),doctype:"User",placeholder:"Select person"},null,8,["modelValue"])]),u("div",null,[N[35]||(N[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Responsible Department *",-1)),b(Mt,{modelValue:d.responsible_department,"onUpdate:modelValue":N[9]||(N[9]=j=>d.responsible_department=j),doctype:"Department",placeholder:"Select department"},null,8,["modelValue"])])]),u("div",null,[N[36]||(N[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Follow-up Objective *",-1)),b(v(an),{modelValue:d.follow_up_objective,"onUpdate:modelValue":N[10]||(N[10]=j=>d.follow_up_objective=j),content:d.follow_up_objective,placeholder:"Describe the objective of this follow-up...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[N[37]||(N[37]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Success Criteria",-1)),b(v(an),{modelValue:d.success_criteria,"onUpdate:modelValue":N[11]||(N[11]=j=>d.success_criteria=j),content:d.success_criteria,placeholder:"Define the criteria for successful completion...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[lt,o.value===1]]),we(u("div",d9t,[u("div",null,[u("div",c9t,[N[39]||(N[39]=u("h4",{class:"text-sm font-medium text-gray-700"},"Follow-up Activities",-1)),b(v(J),{size:"sm",onClick:E},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[N[38]||(N[38]=W(" Add Activity ",-1))]),_:1})]),u("div",f9t,[u("table",p9t,[N[41]||(N[41]=u("thead",{class:"bg-gray-50 sticky top-0"},[u("tr",null,[u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Date"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Activity Type"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"By"),u("th",{class:"px-3 py-2 w-12"})])],-1)),u("tbody",h9t,[(T(!0),R(xe,null,_e(d.follow_up_activities,(j,U)=>(T(),R("tr",{key:U},[u("td",m9t,[b(v(ve),{modelValue:j.activity_date,"onUpdate:modelValue":G=>j.activity_date=G,type:"date",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",g9t,[b(v(Qe),{modelValue:j.activity_type,"onUpdate:modelValue":G=>j.activity_type=G,options:h,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",v9t,[b(v(ve),{modelValue:j.description,"onUpdate:modelValue":G=>j.description=G,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",y9t,[b(v(ve),{modelValue:j.performed_by,"onUpdate:modelValue":G=>j.performed_by=G,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",b9t,[b(v(J),{variant:"ghost",size:"sm",onClick:G=>P(U)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(X=d.follow_up_activities)!=null&&X.length?se("",!0):(T(),R("tr",x9t,[...N[40]||(N[40]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No activities recorded. Click "Add Activity" to add one. ',-1)])]))])])])]),u("div",_9t,[N[43]||(N[43]=u("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Last Follow-up",-1)),u("div",w9t,[b(v(ve),{modelValue:d.last_follow_up_date,"onUpdate:modelValue":N[12]||(N[12]=j=>d.last_follow_up_date=j),label:"Date",type:"date",disabled:""},null,8,["modelValue"]),u("div",null,[N[42]||(N[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"By",-1)),b(Mt,{modelValue:d.last_follow_up_by,"onUpdate:modelValue":N[13]||(N[13]=j=>d.last_follow_up_by=j),doctype:"User",disabled:""},null,8,["modelValue"])])])]),u("div",null,[N[44]||(N[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Findings",-1)),b(v(an),{modelValue:d.last_findings,"onUpdate:modelValue":N[14]||(N[14]=j=>d.last_findings=j),content:d.last_findings,placeholder:"Findings from last follow-up...","editor-class":"prose-sm max-w-none min-h-[80px]",bubbleMenu:!0,disabled:""},null,8,["modelValue","content"])]),u("div",null,[N[45]||(N[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Next Steps",-1)),b(v(an),{modelValue:d.next_steps,"onUpdate:modelValue":N[15]||(N[15]=j=>d.next_steps=j),content:d.next_steps,placeholder:"Define next steps...","editor-class":"prose-sm max-w-none min-h-[80px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[lt,o.value===2]]),we(u("div",k9t,[u("div",S9t,[u("div",null,[N[46]||(N[46]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Current Status",-1)),b(v(Qe),{modelValue:d.current_status,"onUpdate:modelValue":N[16]||(N[16]=j=>d.current_status=j),options:m,placeholder:"Select status"},null,8,["modelValue"])]),u("div",null,[N[47]||(N[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Progress Rating",-1)),u("div",C9t,[(T(),R(xe,null,_e(5,j=>u("button",{key:j,onClick:U=>d.progress_rating=j,class:"focus:outline-none"},[b(v(f2),{class:pe(["h-6 w-6",j<=d.progress_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"])},null,8,["class"])],8,A9t)),64))])]),u("div",null,[N[48]||(N[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Effectiveness Rating",-1)),u("div",T9t,[(T(),R(xe,null,_e(5,j=>u("button",{key:j,onClick:U=>d.effectiveness_rating=j,class:"focus:outline-none"},[b(v(f2),{class:pe(["h-6 w-6",j<=d.effectiveness_rating?"text-green-400 fill-green-400":"text-gray-300"])},null,8,["class"])],8,$9t)),64))])])]),u("div",null,[N[49]||(N[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Issues Identified",-1)),b(v(an),{modelValue:d.issues_identified,"onUpdate:modelValue":N[17]||(N[17]=j=>d.issues_identified=j),content:d.issues_identified,placeholder:"Document any issues identified...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[N[50]||(N[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Recommendations",-1)),b(v(an),{modelValue:d.recommendations,"onUpdate:modelValue":N[18]||(N[18]=j=>d.recommendations=j),content:d.recommendations,placeholder:"Provide recommendations...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[lt,o.value===3]]),we(u("div",M9t,[u("div",E9t,[we(u("input",{type:"checkbox","onUpdate:modelValue":N[19]||(N[19]=j=>d.escalation_required=j),class:"rounded border-gray-300 h-5 w-5"},null,512),[[Rn,d.escalation_required]]),N[51]||(N[51]=u("div",null,[u("span",{class:"font-medium text-orange-800"},"Escalation Required"),u("p",{class:"text-sm text-orange-600"},"Check if this issue needs to be escalated to higher management.")],-1))]),d.escalation_required?(T(),R("div",D9t,[u("div",R9t,[u("div",null,[N[52]||(N[52]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Escalation Level",-1)),b(v(Qe),{modelValue:d.escalation_level,"onUpdate:modelValue":N[20]||(N[20]=j=>d.escalation_level=j),options:g,placeholder:"Select level"},null,8,["modelValue"])]),b(v(ve),{modelValue:d.escalation_date,"onUpdate:modelValue":N[21]||(N[21]=j=>d.escalation_date=j),label:"Escalation Date",type:"date"},null,8,["modelValue"])]),u("div",null,[N[53]||(N[53]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Escalation Reason",-1)),b(v(ve),{modelValue:d.escalation_reason,"onUpdate:modelValue":N[22]||(N[22]=j=>d.escalation_reason=j),type:"textarea",rows:3,placeholder:"Describe the reason for escalation..."},null,8,["modelValue"])])])):se("",!0)],512),[[lt,o.value===4]]),we(u("div",P9t,[u("div",I9t,[we(u("input",{type:"checkbox","onUpdate:modelValue":N[23]||(N[23]=j=>d.closure_criteria_met=j),class:"rounded border-gray-300 h-5 w-5"},null,512),[[Rn,d.closure_criteria_met]]),N[54]||(N[54]=u("div",null,[u("span",{class:"font-medium text-green-800"},"Closure Criteria Met"),u("p",{class:"text-sm text-green-600"},"Check if all success criteria have been satisfied.")],-1))]),u("div",O9t,[b(v(ve),{modelValue:d.closure_date,"onUpdate:modelValue":N[24]||(N[24]=j=>d.closure_date=j),label:"Closure Date",type:"date"},null,8,["modelValue"]),u("div",null,[N[55]||(N[55]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Closed By",-1)),b(Mt,{modelValue:d.closed_by,"onUpdate:modelValue":N[25]||(N[25]=j=>d.closed_by=j),doctype:"User",placeholder:"Select user"},null,8,["modelValue"])]),u("div",null,[N[56]||(N[56]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Closure Reason",-1)),b(v(Qe),{modelValue:d.closure_reason,"onUpdate:modelValue":N[26]||(N[26]=j=>d.closure_reason=j),options:y,placeholder:"Select reason"},null,8,["modelValue"])])]),u("div",null,[N[57]||(N[57]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Final Assessment",-1)),b(v(an),{modelValue:d.final_assessment,"onUpdate:modelValue":N[27]||(N[27]=j=>d.final_assessment=j),content:d.final_assessment,placeholder:"Provide final assessment...","editor-class":"prose-sm max-w-none min-h-[120px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[N[58]||(N[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),b(v(an),{modelValue:d.notes,"onUpdate:modelValue":N[28]||(N[28]=j=>d.notes=j),content:d.notes,placeholder:"Additional notes...","editor-class":"prose-sm max-w-none min-h-[80px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[lt,o.value===5]])]),u("div",L9t,[b(v(J),{variant:"outline",onClick:M,disabled:o.value===0},{prefix:D(()=>[b(v(gr),{class:"h-4 w-4"})]),default:D(()=>[N[59]||(N[59]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",V9t,[b(v(J),{variant:"outline",onClick:F},{default:D(()=>[...N[60]||(N[60]=[W("Cancel",-1)])]),_:1}),o.value<l.length-1?(T(),he(v(J),{key:0,variant:"solid",onClick:A},{suffix:D(()=>[b(v(sr),{class:"h-4 w-4"})]),default:D(()=>[N[61]||(N[61]=W(" Next ",-1))]),_:1})):(T(),he(v(J),{key:1,variant:"solid",theme:"green",onClick:L,loading:a.value},{prefix:D(()=>[b(v($r),{class:"h-4 w-4"})]),default:D(()=>[W(" "+$(i.value?"Update Tracker":"Create Tracker"),1)]),_:1},8,["loading"]))])])])])]}),_:1},8,["modelValue","options"]))}},j9t={class:"bg-white rounded-xl border p-4"},F9t={class:"flex flex-wrap items-center gap-4"},B9t={class:"flex-1 min-w-[200px] max-w-md"},z9t={class:"w-44"},U9t={class:"w-32"},H9t={class:"w-48"},q9t={class:"w-32"},W9t={class:"w-40"},G9t={class:"flex items-center gap-2 ml-auto"},Y9t={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},K9t={__name:"TrackerFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,s=Jt({search:"",auditFinding:"",status:"",followUpType:"",frequency:"",currentStatus:""});et(()=>n.filters,h=>{h&&Object.assign(s,h)},{immediate:!0,deep:!0});const i=[{label:"All Status",value:""},{label:"Active",value:"Active"},{label:"Completed",value:"Completed"},{label:"On Hold",value:"On Hold"},{label:"Cancelled",value:"Cancelled"}],a=[{label:"All Types",value:""},{label:"Corrective Action Monitoring",value:"Corrective Action Monitoring"},{label:"Preventive Measure Verification",value:"Preventive Measure Verification"},{label:"Process Improvement Tracking",value:"Process Improvement Tracking"},{label:"Risk Mitigation Assessment",value:"Risk Mitigation Assessment"},{label:"Compliance Verification",value:"Compliance Verification"}],o=[{label:"All Frequencies",value:""},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Semi-Annual",value:"Semi-Annual"},{label:"Annual",value:"Annual"},{label:"One-time",value:"One-time"},{label:"As Needed",value:"As Needed"}],l=[{label:"All Progress",value:""},{label:"On Track",value:"On Track"},{label:"Behind Schedule",value:"Behind Schedule"},{label:"At Risk",value:"At Risk"},{label:"Off Track",value:"Off Track"},{label:"Completed Successfully",value:"Completed Successfully"}],d=Z(()=>Object.values(s).some(h=>h!==""));function c(){r("update:filters",ge({},s))}function f(h){s[h]="",c()}function p(){Object.keys(s).forEach(h=>{s[h]=""}),c()}return(h,m)=>(T(),R("div",j9t,[u("div",F9t,[u("div",B9t,[b(v(ve),{modelValue:s.search,"onUpdate:modelValue":[m[0]||(m[0]=g=>s.search=g),c],type:"text",placeholder:"Search by tracker ID or finding...",debounce:300},{prefix:D(()=>[b(v(En),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",z9t,[b(Mt,{modelValue:s.auditFinding,"onUpdate:modelValue":[m[1]||(m[1]=g=>s.auditFinding=g),c],doctype:"Audit Finding",placeholder:"All Findings"},null,8,["modelValue"])]),u("div",U9t,[b(v(Qe),{modelValue:s.status,"onUpdate:modelValue":[m[2]||(m[2]=g=>s.status=g),c],options:i,placeholder:"All Status"},null,8,["modelValue"])]),u("div",H9t,[b(v(Qe),{modelValue:s.followUpType,"onUpdate:modelValue":[m[3]||(m[3]=g=>s.followUpType=g),c],options:a,placeholder:"All Types"},null,8,["modelValue"])]),u("div",q9t,[b(v(Qe),{modelValue:s.frequency,"onUpdate:modelValue":[m[4]||(m[4]=g=>s.frequency=g),c],options:o,placeholder:"Frequency"},null,8,["modelValue"])]),u("div",W9t,[b(v(Qe),{modelValue:s.currentStatus,"onUpdate:modelValue":[m[5]||(m[5]=g=>s.currentStatus=g),c],options:l,placeholder:"Current Status"},null,8,["modelValue"])]),u("div",G9t,[d.value?(T(),he(v(J),{key:0,variant:"outline",onClick:p},{prefix:D(()=>[b(v(ht),{class:"h-4 w-4"})]),default:D(()=>[m[14]||(m[14]=W(" Clear ",-1))]),_:1})):se("",!0),b(v(J),{variant:"outline",onClick:m[6]||(m[6]=g=>h.$emit("refresh"))},{prefix:D(()=>[b(v(mn),{class:"h-4 w-4"})]),default:D(()=>[m[15]||(m[15]=W(" Refresh ",-1))]),_:1}),b(v(J),{variant:"solid",onClick:m[7]||(m[7]=g=>h.$emit("create"))},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[m[16]||(m[16]=W(" New Tracker ",-1))]),_:1})])]),d.value?(T(),R("div",Y9t,[m[17]||(m[17]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),s.search?(T(),he(v(De),{key:0,theme:"blue",class:"cursor-pointer",onClick:m[8]||(m[8]=g=>f("search"))},{default:D(()=>[W(' Search: "'+$(s.search)+'" ',1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.auditFinding?(T(),he(v(De),{key:1,theme:"purple",class:"cursor-pointer",onClick:m[9]||(m[9]=g=>f("auditFinding"))},{default:D(()=>[W(" Finding: "+$(s.auditFinding)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.status?(T(),he(v(De),{key:2,theme:"green",class:"cursor-pointer",onClick:m[10]||(m[10]=g=>f("status"))},{default:D(()=>[W(" Status: "+$(s.status)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.followUpType?(T(),he(v(De),{key:3,theme:"indigo",class:"cursor-pointer",onClick:m[11]||(m[11]=g=>f("followUpType"))},{default:D(()=>[W(" Type: "+$(s.followUpType)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.frequency?(T(),he(v(De),{key:4,theme:"orange",class:"cursor-pointer",onClick:m[12]||(m[12]=g=>f("frequency"))},{default:D(()=>[W(" Frequency: "+$(s.frequency)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.currentStatus?(T(),he(v(De),{key:5,theme:"gray",class:"cursor-pointer",onClick:m[13]||(m[13]=g=>f("currentStatus"))},{default:D(()=>[W(" Progress: "+$(s.currentStatus)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0)])):se("",!0)]))}},X9t={class:"space-y-4"},Q9t={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4"},Z9t=["onClick"],J9t={class:"flex items-center gap-3"},eFt={class:"text-2xl font-bold text-gray-900"},tFt={class:"text-xs text-gray-500"},nFt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},rFt={class:"bg-white rounded-xl border p-4"},sFt={class:"space-y-3"},iFt=["onClick"],aFt={class:"flex-1 text-sm text-gray-600"},oFt={class:"bg-white rounded-xl border p-4"},lFt={class:"grid grid-cols-3 gap-3"},uFt={class:"text-2xl font-bold text-red-700"},dFt={class:"text-2xl font-bold text-yellow-700"},cFt={class:"text-2xl font-bold text-green-700"},fFt={class:"bg-white rounded-xl border p-4"},pFt={class:"space-y-3"},hFt={class:"flex items-center justify-between"},mFt={class:"flex items-center justify-between"},gFt={class:"mt-4 pt-4 border-t"},vFt={class:"space-y-1"},yFt={class:"text-gray-600"},bFt={class:"font-medium text-gray-700"},xFt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},_Ft={class:"bg-white rounded-xl border p-4"},wFt={class:"grid grid-cols-2 gap-6"},kFt={class:"text-center"},SFt={class:"flex items-center justify-center gap-1 mb-2"},CFt={class:"text-lg font-bold text-gray-900"},AFt={class:"text-center"},TFt={class:"flex items-center justify-center gap-1 mb-2"},$Ft={class:"text-lg font-bold text-gray-900"},MFt={class:"bg-white rounded-xl border p-4"},EFt={class:"space-y-2"},DFt=["onClick"],RFt={class:"flex-1"},PFt={class:"flex items-center justify-between mb-1"},IFt={class:"text-sm text-gray-600 truncate max-w-[180px]"},OFt={class:"text-sm font-medium text-gray-700"},LFt={class:"w-full bg-gray-100 rounded-full h-2"},VFt={__name:"TrackerStats",props:{trackers:{type:Array,default:()=>[]},activeFilter:{type:String,default:""}},emits:["filter"],setup(t){const e=t,n=Z(()=>{const h=e.trackers,m=h.length,g=h.filter(k=>k.status==="Active").length,y=h.filter(k=>k.status==="Completed").length,x=h.filter(k=>k.status==="On Hold").length,_=h.filter(k=>k.status==="Cancelled").length;return[{label:"Total Trackers",value:m,icon:AY,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:null,filterValue:null},{label:"Active",value:g,icon:Ns,bgColor:"bg-green-100",iconColor:"text-green-600",filterKey:"status",filterValue:"Active",active:e.activeFilter==="Active"},{label:"Completed",value:y,icon:Kt,bgColor:"bg-purple-100",iconColor:"text-purple-600",filterKey:"status",filterValue:"Completed",active:e.activeFilter==="Completed"},{label:"On Hold",value:x,icon:DY,bgColor:"bg-yellow-100",iconColor:"text-yellow-600",filterKey:"status",filterValue:"On Hold",active:e.activeFilter==="On Hold"},{label:"Cancelled",value:_,icon:Uc,bgColor:"bg-gray-100",iconColor:"text-gray-600",filterKey:"status",filterValue:"Cancelled",active:e.activeFilter==="Cancelled"}]}),r=Z(()=>{const h=e.trackers;return[{name:"On Track",dotColor:"bg-green-500",theme:"green"},{name:"Behind Schedule",dotColor:"bg-yellow-500",theme:"orange"},{name:"At Risk",dotColor:"bg-orange-500",theme:"orange"},{name:"Off Track",dotColor:"bg-red-500",theme:"red"},{name:"Completed Successfully",dotColor:"bg-blue-500",theme:"blue"}].map(g=>ze(ge({},g),{count:h.filter(y=>y.current_status===g.name).length})).filter(g=>g.count>0)}),s=Z(()=>{const h=new Date;return e.trackers.filter(m=>m.status!=="Active"||!m.next_due_date?!1:new Date(m.next_due_date)<h).length}),i=Z(()=>{const h=new Date,m=new Date(h.getTime()+7*24*60*60*1e3);return e.trackers.filter(g=>{if(g.status!=="Active"||!g.next_due_date)return!1;const y=new Date(g.next_due_date);return y>=h&&y<=m}).length}),a=Z(()=>{const h=new Date,m=new Date(h.getTime()+7*24*60*60*1e3);return e.trackers.filter(g=>g.status!=="Active"||!g.next_due_date?!1:new Date(g.next_due_date)>m).length}),o=Z(()=>e.trackers.filter(h=>h.escalation_required).length),l=Z(()=>e.trackers.filter(h=>!h.escalation_required&&h.status==="Active").length),d=Z(()=>["Manager","Senior Management","Audit Committee","Board"].map(m=>({name:m,count:e.trackers.filter(g=>g.escalation_level===m).length})).filter(m=>m.count>0)),c=Z(()=>{const h=e.trackers.filter(m=>m.progress_rating);return h.length?h.reduce((m,g)=>m+g.progress_rating,0)/h.length:0}),f=Z(()=>{const h=e.trackers.filter(m=>m.effectiveness_rating);return h.length?h.reduce((m,g)=>m+g.effectiveness_rating,0)/h.length:0}),p=Z(()=>{const h=e.trackers,m=h.length||1,g=["Corrective Action Monitoring","Preventive Measure Verification","Process Improvement Tracking","Risk Mitigation Assessment","Compliance Verification"],y=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-indigo-500"];return g.map((x,_)=>({name:x,count:h.filter(k=>k.follow_up_type===x).length,percentage:Math.round(h.filter(k=>k.follow_up_type===x).length/m*100),barColor:y[_]})).filter(x=>x.count>0)});return(h,m)=>(T(),R("div",X9t,[u("div",Q9t,[(T(!0),R(xe,null,_e(n.value,g=>(T(),R("div",{key:g.label,class:pe(["bg-white rounded-xl border p-4 hover:shadow-md transition-shadow cursor-pointer",g.active?"ring-2 ring-blue-500":""]),onClick:y=>h.$emit("filter",g.filterKey,g.filterValue)},[u("div",J9t,[u("div",{class:pe(["p-2 rounded-lg",g.bgColor])},[(T(),he(At(g.icon),{class:pe(["h-5 w-5",g.iconColor])},null,8,["class"]))],2),u("div",null,[u("div",eFt,$(g.value),1),u("div",tFt,$(g.label),1)])])],10,Z9t))),128))]),u("div",nFt,[u("div",rFt,[m[3]||(m[3]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Current Status",-1)),u("div",sFt,[(T(!0),R(xe,null,_e(r.value,g=>(T(),R("div",{key:g.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:y=>h.$emit("filter","current_status",g.name)},[u("div",{class:pe(["w-3 h-3 rounded-full",g.dotColor])},null,2),u("div",aFt,$(g.name),1),b(v(De),{theme:g.theme},{default:D(()=>[W($(g.count),1)]),_:2},1032,["theme"])],8,iFt))),128))])]),u("div",oFt,[m[7]||(m[7]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Due Date Status",-1)),u("div",lFt,[u("div",{class:"p-3 bg-red-50 border border-red-200 rounded-lg text-center cursor-pointer hover:shadow-sm",onClick:m[0]||(m[0]=g=>h.$emit("filter","overdue",!0))},[u("div",uFt,$(s.value),1),m[4]||(m[4]=u("div",{class:"text-xs text-red-600"},"Overdue",-1))]),u("div",{class:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-center cursor-pointer hover:shadow-sm",onClick:m[1]||(m[1]=g=>h.$emit("filter","due_soon",!0))},[u("div",dFt,$(i.value),1),m[5]||(m[5]=u("div",{class:"text-xs text-yellow-600"},"Due Soon",-1))]),u("div",{class:"p-3 bg-green-50 border border-green-200 rounded-lg text-center cursor-pointer hover:shadow-sm",onClick:m[2]||(m[2]=g=>h.$emit("filter","on_time",!0))},[u("div",cFt,$(a.value),1),m[6]||(m[6]=u("div",{class:"text-xs text-green-600"},"On Time",-1))])])]),u("div",fFt,[m[11]||(m[11]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Escalation Status",-1)),u("div",pFt,[u("div",hFt,[m[8]||(m[8]=u("span",{class:"text-sm text-gray-600"},"Escalation Required",-1)),b(v(De),{theme:"red"},{default:D(()=>[W($(o.value),1)]),_:1})]),u("div",mFt,[m[9]||(m[9]=u("span",{class:"text-sm text-gray-600"},"Not Escalated",-1)),b(v(De),{theme:"green"},{default:D(()=>[W($(l.value),1)]),_:1})]),u("div",gFt,[m[10]||(m[10]=u("div",{class:"text-xs text-gray-500 mb-2"},"Escalation by Level",-1)),u("div",vFt,[(T(!0),R(xe,null,_e(d.value,g=>(T(),R("div",{key:g.name,class:"flex items-center justify-between text-sm"},[u("span",yFt,$(g.name),1),u("span",bFt,$(g.count),1)]))),128))])])])])]),u("div",xFt,[u("div",_Ft,[m[14]||(m[14]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Average Ratings",-1)),u("div",wFt,[u("div",kFt,[u("div",SFt,[(T(),R(xe,null,_e(5,g=>b(v(f2),{key:g,class:pe(["h-5 w-5",g<=c.value?"text-yellow-400 fill-yellow-400":"text-gray-300"])},null,8,["class"])),64))]),u("div",CFt,$(c.value.toFixed(1)),1),m[12]||(m[12]=u("div",{class:"text-xs text-gray-500"},"Progress Rating",-1))]),u("div",AFt,[u("div",TFt,[(T(),R(xe,null,_e(5,g=>b(v(f2),{key:g,class:pe(["h-5 w-5",g<=f.value?"text-green-400 fill-green-400":"text-gray-300"])},null,8,["class"])),64))]),u("div",$Ft,$(f.value.toFixed(1)),1),m[13]||(m[13]=u("div",{class:"text-xs text-gray-500"},"Effectiveness Rating",-1))])])]),u("div",MFt,[m[15]||(m[15]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"By Follow-up Type",-1)),u("div",EFt,[(T(!0),R(xe,null,_e(p.value,g=>(T(),R("div",{key:g.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:y=>h.$emit("filter","follow_up_type",g.name)},[u("div",RFt,[u("div",PFt,[u("span",IFt,$(g.name),1),u("span",OFt,$(g.count),1)]),u("div",LFt,[u("div",{class:pe(["h-2 rounded-full",g.barColor]),style:rt({width:`${g.percentage}%`})},null,6)])])],8,DFt))),128))])])])]))}},NFt=Yl("followup",{state:()=>({trackers:[],selectedTracker:null,loading:!1,saving:!1,error:null,searchQuery:"",filters:{status:"",followUpType:"",frequency:"",currentStatus:"",responsiblePerson:"",auditFinding:""}}),getters:{filteredTrackers:t=>{let e=t.trackers;if(t.searchQuery){const n=t.searchQuery.toLowerCase();e=e.filter(r=>{var s,i,a;return((s=r.tracker_id)==null?void 0:s.toLowerCase().includes(n))||((i=r.finding_title)==null?void 0:i.toLowerCase().includes(n))||((a=r.description)==null?void 0:a.toLowerCase().includes(n))})}if(t.filters.status&&(e=e.filter(n=>n.status===t.filters.status)),t.filters.followUpType&&(e=e.filter(n=>n.follow_up_type===t.filters.followUpType)),t.filters.frequency&&(e=e.filter(n=>n.frequency===t.filters.frequency)),t.filters.currentStatus&&(e=e.filter(n=>n.current_status===t.filters.currentStatus)),t.filters.responsiblePerson){const n=t.filters.responsiblePerson.toLowerCase();e=e.filter(r=>{var s;return(s=r.responsible_person)==null?void 0:s.toLowerCase().includes(n)})}return t.filters.auditFinding&&(e=e.filter(n=>n.audit_finding===t.filters.auditFinding)),e},stats:t=>{const e=t.trackers.length,n=t.trackers.filter(c=>c.status==="Active").length,r=t.trackers.filter(c=>c.status==="Completed").length,s=t.trackers.filter(c=>c.status==="On Hold").length,i=new Date,a=t.trackers.filter(c=>!c.next_due_date||c.status!=="Active"?!1:new Date(c.next_due_date)<i).length,o=t.trackers.filter(c=>c.current_status==="At Risk"||c.current_status==="Off Track").length,l={Active:n,Completed:r,"On Hold":s,Cancelled:t.trackers.filter(c=>c.status==="Cancelled").length},d={};return t.trackers.forEach(c=>{const f=c.follow_up_type||"Other";d[f]||(d[f]={total:0,completed:0}),d[f].total++,c.status==="Completed"&&d[f].completed++}),{total:e,active:n,completed:r,onHold:s,overdue:a,atRisk:o,statusDistribution:l,progressByType:d}}},actions:{fetchTrackers(){return ue(this,null,function*(){try{this.loading=!0,this.error=null;const t=yield Ve({url:"frappe.client.get_list",params:{doctype:"Follow-up Tracker",fields:["name","tracker_id","audit_finding","finding_title","status","follow_up_type","frequency","start_date","next_due_date","last_follow_up_date","responsible_person","responsible_department","current_status","progress_rating","effectiveness_rating","escalation_required","escalation_level","closure_date","closure_criteria_met","closure_reason","creation","modified"],limit_page_length:0,order_by:"modified desc"}}).fetch();this.trackers=t||[]}catch(t){console.error("Error fetching follow-up trackers:",t),this.error=t.message||"Failed to fetch follow-up trackers",this.trackers=[]}finally{this.loading=!1}})},getTrackerDetails(t){return ue(this,null,function*(){try{this.loading=!0;const e=yield Ve({url:"frappe.client.get",params:{doctype:"Follow-up Tracker",name:t}}).fetch();return this.selectedTracker=e,e}catch(e){throw console.error("Error fetching tracker details:",e),e}finally{this.loading=!1}})},createTracker(t){return ue(this,null,function*(){try{this.saving=!0;const e=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Follow-up Tracker"},t)}}).fetch();return yield this.fetchTrackers(),e}catch(e){throw console.error("Error creating tracker:",e),e}finally{this.saving=!1}})},updateTracker(t,e){return ue(this,null,function*(){try{this.saving=!0;const n=yield Ve({url:"frappe.client.set_value",params:{doctype:"Follow-up Tracker",name:t,fieldname:e}}).fetch();return yield this.fetchTrackers(),n}catch(n){throw console.error("Error updating tracker:",n),n}finally{this.saving=!1}})},saveTracker(t){return ue(this,null,function*(){return t.name?this.updateTracker(t.name,t):this.createTracker(t)})},deleteTracker(t){return ue(this,null,function*(){try{this.saving=!0,yield Ve({url:"frappe.client.delete",params:{doctype:"Follow-up Tracker",name:t}}).fetch(),yield this.fetchTrackers()}catch(e){throw console.error("Error deleting tracker:",e),e}finally{this.saving=!1}})},addFollowUpActivity(t,e){return ue(this,null,function*(){try{this.saving=!0;const r=(yield this.getTrackerDetails(t)).follow_up_activities||[];r.push(ze(ge({},e),{activity_date:e.activity_date||new Date().toISOString().split("T")[0]})),yield Ve({url:"frappe.client.set_value",params:{doctype:"Follow-up Tracker",name:t,fieldname:{follow_up_activities:r,last_follow_up_date:new Date().toISOString().split("T")[0]}}}).fetch(),yield this.fetchTrackers()}catch(n){throw console.error("Error adding follow-up activity:",n),n}finally{this.saving=!1}})},setFilters(t){this.filters=ge(ge({},this.filters),t)},clearFilters(){this.searchQuery="",this.filters={status:"",followUpType:"",frequency:"",currentStatus:"",responsiblePerson:"",auditFinding:""}}}}),jFt={class:"space-y-6"},FFt={class:"flex items-center justify-between"},BFt={class:"flex items-center space-x-3"},zFt={class:"bg-white rounded-lg border border-gray-200"},UFt={class:"p-6"},HFt={class:"flex items-center space-x-2"},qFt={key:0,class:"text-sm text-gray-600"},WFt={class:"text-sm"},GFt={key:0,class:"text-gray-500 text-xs"},YFt={class:"flex items-center space-x-2"},KFt={__name:"FollowUpTracker",setup(t){_n();const e=NFt(),n=Q(!1),r=Q(!1),s=Q(null),i=Z(()=>e.loading),a=Z(()=>e.filteredTrackers),o=Z(()=>e.stats),l=Z({get:()=>e.searchQuery,set:I=>e.searchQuery=I}),d=Z({get:()=>e.filters.status,set:I=>e.filters.status=I}),c=Z({get:()=>e.filters.followUpType,set:I=>e.filters.followUpType=I}),f=Z({get:()=>e.filters.frequency,set:I=>e.filters.frequency=I}),p=Z({get:()=>e.filters.responsiblePerson,set:I=>e.filters.responsiblePerson=I}),h=[{key:"tracker_id",label:"Tracker ID",sortable:!0,width:"120px"},{key:"finding_title",label:"Finding Title",sortable:!0},{key:"status",label:"Status",sortable:!0,width:"100px"},{key:"follow_up_type",label:"Type",sortable:!0,width:"150px"},{key:"responsible_person",label:"Responsible",sortable:!0,width:"120px"},{key:"current_status",label:"Progress",sortable:!0,width:"120px"},{key:"next_due_date",label:"Next Due",sortable:!0,width:"100px"},{key:"last_follow_up_date",label:"Last Follow-up",sortable:!0,width:"120px"},{key:"actions",label:"Actions",width:"140px"}],m=()=>ue(this,null,function*(){yield e.fetchTrackers()}),g=I=>({Active:"success",Completed:"secondary","On Hold":"warning",Cancelled:"danger"})[I]||"secondary",y=I=>({"On Track":"success","Behind Schedule":"warning","At Risk":"danger","Off Track":"danger","Completed Successfully":"secondary"})[I]||"secondary",x=I=>{if(!I)return"text-gray-900";const F=new Date,z=new Date(I)-F,N=Math.ceil(z/(1e3*60*60*24));return N<0?"text-red-600 font-medium":N<=7?"text-yellow-600 font-medium":"text-gray-900"},_=I=>I?new Date(I).toLocaleDateString():"Not set",k=I=>{w(I)},w=I=>ue(this,null,function*(){try{s.value=yield e.getTrackerDetails(I.name),r.value=!0,n.value=!0}catch(F){console.error("Error fetching tracker details:",F)}}),S=I=>ue(this,null,function*(){try{s.value=yield e.getTrackerDetails(I.name),r.value=!0,n.value=!0}catch(F){console.error("Error fetching tracker details:",F)}}),C=I=>ue(this,null,function*(){try{s.value=yield e.getTrackerDetails(I.name),r.value=!0,n.value=!0}catch(F){console.error("Error fetching tracker details:",F)}}),A=I=>ue(this,null,function*(){if(confirm("Are you sure you want to delete this follow-up tracker?"))try{yield e.deleteTracker(I.name)}catch(F){console.error("Error deleting tracker:",F)}}),M=()=>{s.value=null,r.value=!1,n.value=!0},E=()=>ue(this,null,function*(){n.value=!1,yield m()}),P=()=>{console.log("Export trackers")};return yt(()=>ue(this,null,function*(){yield m()})),(I,F)=>(T(),R("div",jFt,[u("div",FFt,[F[8]||(F[8]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Follow-up Tracker"),u("p",{class:"text-gray-600 mt-1"}," Track and manage follow-up activities on audit findings ")],-1)),u("div",BFt,[b(v(J),{variant:"outline",onClick:P},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),F[6]||(F[6]=W(" Export ",-1))]),_:1}),b(v(J),{onClick:M},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),F[7]||(F[7]=W(" New Follow-up Tracker ",-1))]),_:1})])]),b(VFt,{stats:o.value},null,8,["stats"]),b(K9t,{searchQuery:l.value,"onUpdate:searchQuery":F[0]||(F[0]=L=>l.value=L),selectedStatus:d.value,"onUpdate:selectedStatus":F[1]||(F[1]=L=>d.value=L),selectedFollowUpType:c.value,"onUpdate:selectedFollowUpType":F[2]||(F[2]=L=>c.value=L),selectedFrequency:f.value,"onUpdate:selectedFrequency":F[3]||(F[3]=L=>f.value=L),selectedProgress:p.value,"onUpdate:selectedProgress":F[4]||(F[4]=L=>p.value=L)},null,8,["searchQuery","selectedStatus","selectedFollowUpType","selectedFrequency","selectedProgress"]),u("div",zFt,[u("div",UFt,[b(v(sO),{columns:h,data:a.value,loading:i.value,pagination:!0,sortable:!0,filterable:!0,onRowClick:k},{"column-status":D(({row:L})=>[b(v(De),{variant:g(L.status)},{default:D(()=>[W($(L.status||"Active"),1)]),_:2},1032,["variant"])]),"column-current_status":D(({row:L})=>[u("div",HFt,[b(v(De),{variant:y(L.current_status)},{default:D(()=>[W($(L.current_status||"On Track"),1)]),_:2},1032,["variant"]),L.progress_rating?(T(),R("span",qFt,$(L.progress_rating)+"/5 ",1)):se("",!0)])]),"column-next_due_date":D(({row:L})=>[u("div",WFt,[u("div",{class:pe(x(L.next_due_date))},$(_(L.next_due_date)),3),L.frequency?(T(),R("div",GFt,$(L.frequency),1)):se("",!0)])]),"column-actions":D(({row:L})=>[u("div",YFt,[b(v(J),{variant:"ghost",size:"sm",onClick:z=>w(L)},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:z=>S(L)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:z=>C(L)},{default:D(()=>[b(v(nt),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",color:"red",onClick:z=>A(L)},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:1},8,["data","loading"])])]),b(N9t,{show:n.value,"onUpdate:show":F[5]||(F[5]=L=>n.value=L),"tracker-data":s.value,"is-edit-mode":r.value,onSaved:E},null,8,["show","tracker-data","is-edit-mode"])]))}},XFt={class:"space-y-6"},QFt={class:"flex items-center justify-between"},ZFt={class:"flex items-center space-x-3"},JFt={class:"bg-white rounded-lg border border-gray-200"},eBt={class:"border-b border-gray-200"},tBt={class:"flex"},nBt={class:"p-6"},rBt={key:0,class:"text-center py-12"},sBt={class:"max-w-md mx-auto"},iBt={key:1,class:"text-center py-12"},aBt={class:"max-w-md mx-auto"},oBt={class:"text-gray-600 mb-6"},lBt={key:2,class:"text-center py-12"},uBt={class:"max-w-md mx-auto"},dBt={class:"text-gray-600 mb-6"},cBt={key:3,class:"text-center py-12"},fBt={class:"max-w-md mx-auto"},pBt={class:"text-gray-600 mb-6"},hBt={key:4,class:"text-center py-12"},mBt={class:"max-w-md mx-auto"},gBt={key:5,class:"text-center py-12"},vBt={class:"max-w-md mx-auto"},yBt={class:"text-gray-600 mb-6"},bBt={key:0},xBt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},_Bt={class:"flex flex-col items-center justify-center h-full"},wBt={class:"flex items-start justify-between mb-4"},kBt={class:"flex-1"},SBt={class:"text-lg font-medium text-gray-900 mb-1"},CBt={class:"text-sm text-gray-600 mb-2"},ABt={class:"flex items-center space-x-2"},TBt={class:"flex items-center space-x-2"},$Bt={class:"space-y-2 text-sm text-gray-500"},MBt={class:"flex justify-between"},EBt={class:"flex justify-between"},DBt={class:"flex justify-between"},RBt={key:1},PBt={class:"space-y-4"},IBt={class:"flex items-center justify-between"},OBt={class:"flex items-center space-x-3"},LBt={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},VBt={class:"min-w-full divide-y divide-gray-200"},NBt={class:"bg-white divide-y divide-gray-200"},jBt={class:"px-6 py-4 whitespace-nowrap"},FBt={class:"text-sm font-medium text-gray-900"},BBt={class:"text-sm text-gray-500"},zBt={class:"px-6 py-4 whitespace-nowrap"},UBt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},HBt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},qBt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},WBt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},GBt={key:2},YBt={class:"space-y-4"},KBt={class:"flex items-center justify-between"},XBt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},QBt={class:"flex items-start justify-between mb-4"},ZBt={class:"flex-1"},JBt={class:"text-lg font-medium text-gray-900 mb-1"},ezt={class:"text-sm text-gray-600 mb-2"},tzt={class:"flex items-center space-x-2"},nzt={class:"space-y-2 text-sm"},rzt={class:"flex justify-between"},szt={class:"font-medium"},izt={class:"flex justify-between"},azt={class:"font-medium"},ozt={class:"flex justify-between"},lzt={class:"font-medium"},uzt={class:"flex justify-between"},dzt={class:"font-medium"},czt={key:3},fzt={class:"space-y-6"},pzt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},hzt={class:"bg-white border border-gray-200 rounded-lg p-6"},mzt={class:"flex items-center"},gzt={class:"p-2 bg-blue-100 rounded-lg"},vzt={class:"ml-4"},yzt={class:"text-2xl font-bold text-gray-900"},bzt={class:"bg-white border border-gray-200 rounded-lg p-6"},xzt={class:"flex items-center"},_zt={class:"p-2 bg-green-100 rounded-lg"},wzt={class:"ml-4"},kzt={class:"text-2xl font-bold text-gray-900"},Szt={class:"bg-white border border-gray-200 rounded-lg p-6"},Czt={class:"flex items-center"},Azt={class:"p-2 bg-purple-100 rounded-lg"},Tzt={class:"ml-4"},$zt={class:"text-2xl font-bold text-gray-900"},Mzt={class:"bg-white border border-gray-200 rounded-lg p-6"},Ezt={class:"flex items-center"},Dzt={class:"p-2 bg-orange-100 rounded-lg"},Rzt={class:"ml-4"},Pzt={class:"text-2xl font-bold text-gray-900"},Izt={class:"bg-white border border-gray-200 rounded-lg p-6"},Ozt={class:"flex items-center justify-between mb-6"},Lzt={class:"flex items-center space-x-3"},Vzt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Nzt={class:"flex items-end"},jzt={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Fzt={class:"overflow-x-auto"},Bzt={class:"min-w-full divide-y divide-gray-200"},zzt={class:"bg-gray-50"},Uzt=["onClick"],Hzt={class:"flex items-center"},qzt={class:"bg-white divide-y divide-gray-200"},Wzt=["onClick"],Gzt={class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Yzt={class:"flex items-center justify-between"},Kzt={class:"text-sm text-gray-700"},Xzt={class:"flex items-center space-x-2"},Qzt={class:"text-sm text-gray-700"},Zzt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Jzt={class:"bg-white border border-gray-200 rounded-lg p-6"},eUt={class:"h-64"},tUt={class:"bg-white border border-gray-200 rounded-lg p-6"},nUt={class:"h-64"},rUt={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},sUt={class:"bg-white rounded-lg border border-gray-200 p-6"},iUt={class:"flex items-center"},aUt={class:"p-2 bg-blue-100 rounded-lg"},oUt={class:"ml-4"},lUt={class:"text-2xl font-bold text-gray-900"},uUt={class:"bg-white rounded-lg border border-gray-200 p-6"},dUt={class:"flex items-center"},cUt={class:"p-2 bg-green-100 rounded-lg"},fUt={class:"ml-4"},pUt={class:"text-2xl font-bold text-gray-900"},hUt={class:"bg-white rounded-lg border border-gray-200 p-6"},mUt={class:"flex items-center"},gUt={class:"p-2 bg-red-100 rounded-lg"},vUt={class:"ml-4"},yUt={class:"text-2xl font-bold text-gray-900"},bUt={class:"bg-white rounded-lg border border-gray-200 p-6"},xUt={class:"flex items-center"},_Ut={class:"p-2 bg-purple-100 rounded-lg"},wUt={class:"ml-4"},kUt={class:"text-2xl font-bold text-gray-900"},mu={__name:"ImportData",props:{defaultTab:{type:String,default:"imports"},mode:{type:String,default:null},importTypeId:{type:String,default:null},historyId:{type:String,default:null},mappingId:{type:String,default:null}},setup(t){const e=t;ia.register(wS,kS,A0,Ey,e2,ule,cle,ole);const n=_n(),r=TA(),s=Q(e.defaultTab),i=Q(""),a=Q(""),o=Q(!1),l=Q(null),d=Q(null),c=Q(""),f=Q({dateFrom:"",dateTo:"",search:""}),p=Q(""),h=Q("asc"),m=Q(1),g=Q(25),y=Q([]),x=Q({glEntries:0,customers:0,items:0,salesInvoices:0}),_=[{label:"All Status",value:""},{label:"Success",value:"Success"},{label:"Failed",value:"Failed"},{label:"Processing",value:"Processing"},{label:"Cancelled",value:"Cancelled"}],k=Z(()=>{let le=r.csvImportHistory;if(i.value){const H=i.value.toLowerCase();le=le.filter(Y=>{var B,ae,be;return((B=Y.import_type_name)==null?void 0:B.toLowerCase().includes(H))||((ae=Y.file_name)==null?void 0:ae.toLowerCase().includes(H))||((be=Y.status)==null?void 0:be.toLowerCase().includes(H))})}return a.value&&(le=le.filter(H=>H.status===a.value)),le}),w=Z(()=>r.csvImportHistory.filter(le=>le.status==="Success").length),S=Z(()=>r.csvImportHistory.filter(le=>le.status==="Failed").length),C=[{label:"GL Entries",value:"gl_entries"},{label:"Customers",value:"customers"},{label:"Items",value:"items"},{label:"Sales Invoices",value:"sales_invoices"},{label:"Purchase Invoices",value:"purchase_invoices"},{label:"Vendor Ledger",value:"vendor_ledger"}],A=Z(()=>({gl_entries:[{key:"posting_date",label:"Posting Date",type:"date"},{key:"document_no",label:"Document No",type:"string"},{key:"account_no",label:"Account No",type:"string"},{key:"description",label:"Description",type:"string"},{key:"debit_amount",label:"Debit",type:"currency"},{key:"credit_amount",label:"Credit",type:"currency"}],customers:[{key:"no",label:"Customer No",type:"string"},{key:"name",label:"Name",type:"string"},{key:"address",label:"Address",type:"string"},{key:"phone_no",label:"Phone",type:"string"},{key:"email",label:"Email",type:"string"}],items:[{key:"no",label:"Item No",type:"string"},{key:"description",label:"Description",type:"string"},{key:"unit_cost",label:"Unit Cost",type:"currency"},{key:"unit_price",label:"Unit Price",type:"currency"},{key:"inventory",label:"Inventory",type:"number"}],sales_invoices:[{key:"no",label:"Invoice No",type:"string"},{key:"posting_date",label:"Posting Date",type:"date"},{key:"sell_to_customer_no",label:"Customer No",type:"string"},{key:"sell_to_customer_name",label:"Customer Name",type:"string"},{key:"amount",label:"Amount",type:"currency"},{key:"status",label:"Status",type:"string"}]})[c.value]||[]),M=Z(()=>{let le=[...y.value];if(f.value.search){const H=f.value.search.toLowerCase();le=le.filter(Y=>Object.values(Y).some(B=>String(B).toLowerCase().includes(H)))}return f.value.dateFrom&&(le=le.filter(H=>new Date(H.posting_date||H.created_at)>=new Date(f.value.dateFrom))),f.value.dateTo&&(le=le.filter(H=>new Date(H.posting_date||H.created_at)<=new Date(f.value.dateTo))),p.value&&le.sort((H,Y)=>{const B=H[p.value],ae=Y[p.value];let be=0;return B<ae&&(be=-1),B>ae&&(be=1),h.value==="desc"?-be:be}),le}),E=Z(()=>{const le=(m.value-1)*g.value,H=le+g.value;return M.value.slice(le,H)}),P=Z(()=>Math.ceil(M.value.length/g.value)),I=Z(()=>e.mode==="new-import-type"?"new-import-type":e.mode==="edit-import-type"&&e.importTypeId?"edit-import-type":e.mode==="run-import"&&e.importTypeId?"run-import":e.mode==="view-history"&&e.historyId?"view-history":e.mode==="new-mapping"?"new-mapping":e.mode==="edit-mapping"&&e.mappingId?"edit-mapping":null),F=()=>ue(this,null,function*(){o.value=!0;try{yield Promise.all([r.fetchCsvImportTypes(),r.fetchCsvImportHistory()])}catch(le){console.error("Error loading import data:",le)}finally{o.value=!1}}),L=le=>({"Audit Data":"info","Financial Data":"success","Customer Data":"warning","Inventory Data":"secondary","Transaction Data":"info"})[le]||"secondary",z=le=>({Success:"success",Failed:"danger",Processing:"warning",Cancelled:"secondary"})[le]||"secondary",N=le=>le?new Date(le).toLocaleString():"N/A",q=()=>{n.push("/import-data/import-type/new")},V=le=>{n.push(`/import-data/import-type/${le.name}/edit`)},O=le=>{n.push(`/import-data/import-type/${le.name}/run`)},X=le=>{n.push(`/import-data/history/${le.name}`)},j=()=>{n.push("/import-data/mapping/new")},U=le=>{n.push(`/import-data/mapping/${le.name}/edit`)},G=()=>ue(this,null,function*(){if(c.value){o.value=!0;try{yield ee()}catch(le){console.error("Error loading BC data:",le)}finally{o.value=!1}}}),ee=()=>ue(this,null,function*(){const le={gl_entries:[{id:1,posting_date:"2024-01-15",document_no:"INV001",account_no:"4000",description:"Sales Revenue",debit_amount:0,credit_amount:15e3},{id:2,posting_date:"2024-01-15",document_no:"INV001",account_no:"1200",description:"Accounts Receivable",debit_amount:15e3,credit_amount:0}],customers:[{id:1,no:"CUST001",name:"ABC Company Ltd",address:"123 Main St, Nairobi",phone_no:"+254700000000",email:"info@abc.com"}],items:[{id:1,no:"ITEM001",description:"Office Chair",unit_cost:5e3,unit_price:7500,inventory:25}],sales_invoices:[{id:1,no:"SI001",posting_date:"2024-01-15",sell_to_customer_no:"CUST001",sell_to_customer_name:"ABC Company Ltd",amount:15e3,status:"Posted"}]};y.value=le[c.value]||[],x.value={glEntries:le.gl_entries.length,customers:le.customers.length,items:le.items.length,salesInvoices:le.sales_invoices.length},setTimeout(()=>{te(),K()},100)}),ie=()=>{m.value=1},ne=le=>{p.value===le?h.value=h.value==="asc"?"desc":"asc":(p.value=le,h.value="asc")},ce=(le,H)=>{if(!le)return"-";switch(H){case"currency":return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(le);case"date":return new Date(le).toLocaleDateString();case"number":return new Intl.NumberFormat().format(le);default:return String(le)}},oe=le=>{console.log("View record details:",le)},re=()=>{n.push("/data-management/import-wizard")},te=()=>{if(!l.value)return;const le=l.value.getContext("2d"),Y={type:"bar",data:{labels:["GL Entries","Customers","Items","Sales Invoices"],datasets:[{label:"Record Count",data:[x.value.glEntries,x.value.customers,x.value.items,x.value.salesInvoices],backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(139, 69, 19, 0.8)","rgba(245, 158, 11, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(139, 69, 19)","rgb(245, 158, 11)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Business Central Data Distribution"}}}};new ia(le,Y)},K=()=>{if(!d.value)return;const le=d.value.getContext("2d"),Y={type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"GL Entries",data:[120,150,180,200,170,190],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)"},{label:"Sales Invoices",data:[80,90,110,130,120,140],borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.5)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Monthly Trends"}}}};new ia(le,Y)};return yt(()=>ue(this,null,function*(){yield F()})),et(()=>e.defaultTab,le=>{s.value=le}),(le,H)=>{const Y=Vs("ChevronRightIcon");return T(),R("div",XFt,[u("div",QFt,[H[13]||(H[13]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Import Data"),u("p",{class:"text-gray-600 mt-1"}," Manage CSV imports and data import configurations ")],-1)),u("div",ZFt,[b(v(J),{variant:"outline"},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),H[11]||(H[11]=W(" Download Template ",-1))]),_:1}),b(v(J),{onClick:q},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),H[12]||(H[12]=W(" New Import Type ",-1))]),_:1})])]),u("div",JFt,[u("div",eBt,[u("nav",tBt,[u("button",{onClick:H[0]||(H[0]=B=>s.value="imports"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",s.value==="imports"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Import Types ",2),u("button",{onClick:H[1]||(H[1]=B=>s.value="history"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",s.value==="history"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Import History ",2),u("button",{onClick:H[2]||(H[2]=B=>s.value="bc-explorer"),class:pe(["px-6 py-3 text-sm font-medium border-b-2",s.value==="bc-explorer"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," BC Data Explorer ",2)])]),u("div",nBt,[I.value==="new-import-type"?(T(),R("div",rBt,[u("div",sBt,[b(v(nt),{class:"h-16 w-16 text-blue-500 mx-auto mb-4"}),H[15]||(H[15]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Create New Import Type",-1)),H[16]||(H[16]=u("p",{class:"text-gray-600 mb-6"}," This feature is under development. Please use the Import Types tab to create new import configurations. ",-1)),b(v(J),{onClick:re},{default:D(()=>[b(v(ss),{class:"h-4 w-4 mr-2"}),H[14]||(H[14]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="edit-import-type"?(T(),R("div",iBt,[u("div",aBt,[b(v(yn),{class:"h-16 w-16 text-green-500 mx-auto mb-4"}),H[18]||(H[18]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Edit Import Type",-1)),u("p",oBt," Editing import type: "+$(t.importTypeId)+". This feature is under development. ",1),b(v(J),{onClick:re},{default:D(()=>[b(v(ss),{class:"h-4 w-4 mr-2"}),H[17]||(H[17]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="run-import"?(T(),R("div",lBt,[u("div",uBt,[b(v(Ll),{class:"h-16 w-16 text-purple-500 mx-auto mb-4"}),H[20]||(H[20]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Run Import",-1)),u("p",dBt," Running import for type: "+$(t.importTypeId)+". This feature is under development. ",1),b(v(J),{onClick:re},{default:D(()=>[b(v(ss),{class:"h-4 w-4 mr-2"}),H[19]||(H[19]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="view-history"?(T(),R("div",cBt,[u("div",fBt,[b(v(GS),{class:"h-16 w-16 text-orange-500 mx-auto mb-4"}),H[22]||(H[22]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Import History Details",-1)),u("p",pBt," Viewing history for: "+$(t.historyId)+". This feature is under development. ",1),b(v(J),{onClick:re},{default:D(()=>[b(v(ss),{class:"h-4 w-4 mr-2"}),H[21]||(H[21]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="new-mapping"?(T(),R("div",hBt,[u("div",mBt,[b(v(QL),{class:"h-16 w-16 text-indigo-500 mx-auto mb-4"}),H[24]||(H[24]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Create New Field Mapping",-1)),H[25]||(H[25]=u("p",{class:"text-gray-600 mb-6"}," This feature is under development. Please use the Field Mappings tab to create new mappings. ",-1)),b(v(J),{onClick:re},{default:D(()=>[b(v(ss),{class:"h-4 w-4 mr-2"}),H[23]||(H[23]=W(" Back to Import Data ",-1))]),_:1})])])):I.value==="edit-mapping"?(T(),R("div",gBt,[u("div",vBt,[b(v(yn),{class:"h-16 w-16 text-teal-500 mx-auto mb-4"}),H[27]||(H[27]=u("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Edit Field Mapping",-1)),u("p",yBt," Editing mapping: "+$(t.mappingId)+". This feature is under development. ",1),b(v(J),{onClick:re},{default:D(()=>[b(v(ss),{class:"h-4 w-4 mr-2"}),H[26]||(H[26]=W(" Back to Import Data ",-1))]),_:1})])])):(T(),R(xe,{key:6},[s.value==="imports"?(T(),R("div",bBt,[u("div",xBt,[u("div",{class:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-400 hover:bg-blue-50 cursor-pointer transition-colors",onClick:q},[u("div",_Bt,[b(v(nt),{class:"h-12 w-12 text-gray-400 mb-4"}),H[28]||(H[28]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Create New Import Type",-1)),H[29]||(H[29]=u("p",{class:"text-sm text-gray-600 text-center"}," Define a new CSV import configuration ",-1))])]),(T(!0),R(xe,null,_e(v(r).csvImportTypes,B=>(T(),R("div",{key:B.name,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow"},[u("div",wBt,[u("div",kBt,[u("h3",SBt,$(B.import_type_name),1),u("p",CBt,$(B.description||"No description"),1),u("div",ABt,[b(v(De),{variant:B.is_active?"success":"secondary"},{default:D(()=>[W($(B.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),b(v(De),{variant:L(B.import_type)},{default:D(()=>[W($(B.import_type),1)]),_:2},1032,["variant"])])]),u("div",TBt,[b(v(J),{variant:"ghost",size:"sm",onClick:ut(ae=>V(B),["stop"])},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(ae=>O(B),["stop"])},{default:D(()=>[b(v(Ll),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),u("div",$Bt,[u("div",MBt,[H[30]||(H[30]=u("span",null,"Target DocType:",-1)),u("span",null,$(B.target_doctype),1)]),u("div",EBt,[H[31]||(H[31]=u("span",null,"Delimiter:",-1)),u("span",null,$(B.delimiter||","),1)]),u("div",DBt,[H[32]||(H[32]=u("span",null,"Has Header:",-1)),u("span",null,$(B.has_header?"Yes":"No"),1)])])]))),128))])])):se("",!0),s.value==="history"?(T(),R("div",RBt,[u("div",PBt,[u("div",IBt,[H[33]||(H[33]=u("h2",{class:"text-lg font-medium text-gray-900"},"Import History",-1)),u("div",OBt,[b(v($n),{modelValue:i.value,"onUpdate:modelValue":H[3]||(H[3]=B=>i.value=B),placeholder:"Search imports...",class:"w-64"},null,8,["modelValue"]),b(v(Qe),{modelValue:a.value,"onUpdate:modelValue":H[4]||(H[4]=B=>a.value=B),options:_,placeholder:"Filter by status",class:"w-40"},null,8,["modelValue"])])]),u("div",LBt,[u("table",VBt,[H[35]||(H[35]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Import Type "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Records "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Started "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Duration "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),u("tbody",NBt,[(T(!0),R(xe,null,_e(k.value,B=>(T(),R("tr",{key:B.name},[u("td",jBt,[u("div",FBt,$(B.import_type_name),1),u("div",BBt,$(B.file_name),1)]),u("td",zBt,[b(v(De),{variant:z(B.status)},{default:D(()=>[W($(B.status),1)]),_:2},1032,["variant"])]),u("td",UBt,$(B.records_processed)+" / "+$(B.total_records),1),u("td",HBt,$(N(B.started_at)),1),u("td",qBt,$(B.duration||"N/A"),1),u("td",WBt,[b(v(J),{variant:"ghost",size:"sm",onClick:ae=>X(B)},{default:D(()=>[...H[34]||(H[34]=[W(" View Details ",-1)])]),_:1},8,["onClick"])])]))),128))])])])])])):se("",!0),s.value==="mappings"?(T(),R("div",GBt,[u("div",YBt,[u("div",KBt,[H[37]||(H[37]=u("h2",{class:"text-lg font-medium text-gray-900"},"Field Mappings",-1)),b(v(J),{onClick:j},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),H[36]||(H[36]=W(" New Mapping ",-1))]),_:1})]),u("div",XBt,[(T(!0),R(xe,null,_e(v(r).csvImportFieldMappings,B=>(T(),R("div",{key:B.name,class:"bg-white border border-gray-200 rounded-lg p-6"},[u("div",QBt,[u("div",ZBt,[u("h3",JBt,$(B.import_type_name),1),u("p",ezt,$(B.description||"Field mapping configuration"),1),u("div",tzt,[b(v(De),{variant:B.is_active?"success":"secondary"},{default:D(()=>[W($(B.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),b(v(De),{variant:B.is_required?"warning":"secondary"},{default:D(()=>[W($(B.is_required?"Required":"Optional"),1)]),_:2},1032,["variant"])])]),b(v(J),{variant:"ghost",size:"sm",onClick:ae=>U(B)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",nzt,[u("div",rzt,[H[38]||(H[38]=u("span",{class:"text-gray-500"},"CSV Column:",-1)),u("span",szt,$(B.csv_column_name),1)]),u("div",izt,[H[39]||(H[39]=u("span",{class:"text-gray-500"},"Target Field:",-1)),u("span",azt,$(B.target_field_name),1)]),u("div",ozt,[H[40]||(H[40]=u("span",{class:"text-gray-500"},"Data Type:",-1)),u("span",lzt,$(B.data_type),1)]),u("div",uzt,[H[41]||(H[41]=u("span",{class:"text-gray-500"},"Default Value:",-1)),u("span",dzt,$(B.default_value||"None"),1)])])]))),128))])])])):se("",!0),s.value==="bc-explorer"?(T(),R("div",czt,[u("div",fzt,[u("div",pzt,[u("div",hzt,[u("div",mzt,[u("div",gzt,[b(v(Kr),{class:"h-6 w-6 text-blue-600"})]),u("div",vzt,[H[42]||(H[42]=u("p",{class:"text-sm font-medium text-gray-600"},"GL Entries",-1)),u("p",yzt,$(x.value.glEntries),1)])])]),u("div",bzt,[u("div",xzt,[u("div",_zt,[b(v(Jr),{class:"h-6 w-6 text-green-600"})]),u("div",wzt,[H[43]||(H[43]=u("p",{class:"text-sm font-medium text-gray-600"},"Customers",-1)),u("p",kzt,$(x.value.customers),1)])])]),u("div",Szt,[u("div",Czt,[u("div",Azt,[b(v(Qa),{class:"h-6 w-6 text-purple-600"})]),u("div",Tzt,[H[44]||(H[44]=u("p",{class:"text-sm font-medium text-gray-600"},"Items",-1)),u("p",$zt,$(x.value.items),1)])])]),u("div",Mzt,[u("div",Ezt,[u("div",Dzt,[b(v(QS),{class:"h-6 w-6 text-orange-600"})]),u("div",Rzt,[H[45]||(H[45]=u("p",{class:"text-sm font-medium text-gray-600"},"Sales Invoices",-1)),u("p",Pzt,$(x.value.salesInvoices),1)])])])]),u("div",Izt,[u("div",Ozt,[H[47]||(H[47]=u("h2",{class:"text-lg font-medium text-gray-900"},"Business Central Data Explorer",-1)),u("div",Lzt,[b(v(Qe),{modelValue:c.value,"onUpdate:modelValue":H[5]||(H[5]=B=>c.value=B),options:C,placeholder:"Select data type",class:"w-48"},null,8,["modelValue"]),b(v(J),{onClick:G,loading:o.value},{default:D(()=>[b(v(mn),{class:"h-4 w-4 mr-2"}),H[46]||(H[46]=W(" Refresh Data ",-1))]),_:1},8,["loading"])])]),u("div",Vzt,[b(v($n),{modelValue:f.value.dateFrom,"onUpdate:modelValue":H[6]||(H[6]=B=>f.value.dateFrom=B),type:"date",placeholder:"From Date",label:"From Date"},null,8,["modelValue"]),b(v($n),{modelValue:f.value.dateTo,"onUpdate:modelValue":H[7]||(H[7]=B=>f.value.dateTo=B),type:"date",placeholder:"To Date",label:"To Date"},null,8,["modelValue"]),b(v($n),{modelValue:f.value.search,"onUpdate:modelValue":H[8]||(H[8]=B=>f.value.search=B),placeholder:"Search...",label:"Search"},null,8,["modelValue"]),u("div",Nzt,[b(v(J),{onClick:ie,variant:"outline"},{default:D(()=>[b(v(kY),{class:"h-4 w-4 mr-2"}),H[48]||(H[48]=W(" Apply Filters ",-1))]),_:1})])]),u("div",jzt,[u("div",Fzt,[u("table",Bzt,[u("thead",zzt,[u("tr",null,[(T(!0),R(xe,null,_e(A.value,B=>(T(),R("th",{key:B.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:ae=>ne(B.key)},[u("div",Hzt,[W($(B.label)+" ",1),p.value===B.key&&h.value==="asc"?(T(),he(v(yY),{key:0,class:"h-4 w-4 ml-1"})):se("",!0),p.value===B.key&&h.value==="desc"?(T(),he(v(xo),{key:1,class:"h-4 w-4 ml-1"})):se("",!0)])],8,Uzt))),128))])]),u("tbody",qzt,[(T(!0),R(xe,null,_e(E.value,B=>(T(),R("tr",{key:B.id,class:"hover:bg-gray-50 cursor-pointer",onClick:ae=>oe(B)},[(T(!0),R(xe,null,_e(A.value,ae=>(T(),R("td",{key:ae.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},$(ce(B[ae.key],ae.type)),1))),128))],8,Wzt))),128))])])]),u("div",Gzt,[u("div",Yzt,[u("div",Kzt," Showing "+$((m.value-1)*g.value+1)+" to "+$(Math.min(m.value*g.value,M.value.length))+" of "+$(M.value.length)+" results ",1),u("div",Xzt,[b(v(J),{onClick:H[9]||(H[9]=B=>m.value--),disabled:m.value===1,variant:"outline",size:"sm"},{default:D(()=>[b(v(gr),{class:"h-4 w-4"})]),_:1},8,["disabled"]),u("span",Qzt," Page "+$(m.value)+" of "+$(P.value),1),b(v(J),{onClick:H[10]||(H[10]=B=>m.value++),disabled:m.value===P.value,variant:"outline",size:"sm"},{default:D(()=>[b(Y,{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])])]),u("div",Zzt,[u("div",Jzt,[H[49]||(H[49]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Data Distribution",-1)),u("div",eUt,[u("canvas",{ref_key:"distributionChart",ref:l},null,512)])]),u("div",tUt,[H[50]||(H[50]=u("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Trends Over Time",-1)),u("div",nUt,[u("canvas",{ref_key:"trendsChart",ref:d},null,512)])])])])])):se("",!0)],64))])]),u("div",rUt,[u("div",sUt,[u("div",iUt,[u("div",aUt,[b(v(vt),{class:"h-6 w-6 text-blue-600"})]),u("div",oUt,[H[51]||(H[51]=u("p",{class:"text-sm font-medium text-gray-600"},"Import Types",-1)),u("p",lUt,$(v(r).csvImportTypes.length),1)])])]),u("div",uUt,[u("div",dUt,[u("div",cUt,[b(v(Kt),{class:"h-6 w-6 text-green-600"})]),u("div",fUt,[H[52]||(H[52]=u("p",{class:"text-sm font-medium text-gray-600"},"Successful Imports",-1)),u("p",pUt,$(w.value),1)])])]),u("div",hUt,[u("div",mUt,[u("div",gUt,[b(v(qr),{class:"h-6 w-6 text-red-600"})]),u("div",vUt,[H[53]||(H[53]=u("p",{class:"text-sm font-medium text-gray-600"},"Failed Imports",-1)),u("p",yUt,$(S.value),1)])])]),u("div",bUt,[u("div",xUt,[u("div",_Ut,[b(v(QL),{class:"h-6 w-6 text-purple-600"})]),u("div",wUt,[H[54]||(H[54]=u("p",{class:"text-sm font-medium text-gray-600"},"Field Mappings",-1)),u("p",kUt,$(v(r).csvImportFieldMappings.length),1)])])])])])}}},SUt={class:"w-80 bg-white border-r border-gray-200 flex flex-col h-full"},CUt={class:"p-4 border-b border-gray-200"},AUt={class:"flex items-center justify-between"},TUt={class:"flex items-center space-x-2"},$Ut={key:0,class:"mt-3 flex items-center space-x-2 text-sm"},MUt={class:"flex items-center space-x-1 text-green-600"},EUt={class:"text-gray-500 text-xs truncate"},DUt={class:"flex border-b border-gray-200"},RUt=["onClick"],PUt={class:"flex items-center justify-center space-x-1"},IUt={class:"p-3 border-b border-gray-100"},OUt={class:"relative"},LUt=["value","placeholder"],VUt={class:"flex-1 overflow-y-auto"},NUt={key:0,class:"p-4 text-center"},jUt={key:1,class:"p-8 text-center"},FUt={key:2,class:"divide-y divide-gray-100"},BUt={key:0,class:"p-3 bg-gray-50"},zUt=["onClick"],UUt={class:"flex items-center space-x-3"},HUt={class:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white font-medium text-sm"},qUt={class:"flex-1 min-w-0"},WUt={class:"text-sm font-medium text-gray-900 truncate"},GUt={class:"p-3"},YUt=["onClick"],KUt={class:"flex items-center space-x-3"},XUt={class:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-medium text-sm"},QUt={class:"flex-1 min-w-0"},ZUt={class:"text-sm font-medium text-gray-900"},JUt={class:"text-xs text-gray-500"},eHt={key:0,class:"w-2 h-2 bg-green-500 rounded-full"},tHt={key:0,class:"p-4 text-center"},nHt={key:1,class:"p-8 text-center"},rHt={class:"text-sm font-medium text-gray-900 mb-1"},sHt={class:"text-xs text-gray-500 mb-4"},iHt={key:2,class:"divide-y divide-gray-100"},aHt=["onClick"],oHt={class:"flex items-start space-x-3"},lHt={class:"relative flex-shrink-0"},uHt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white font-medium text-sm"},dHt={key:0,class:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"},cHt={key:0,class:"absolute -top-1 -right-1"},fHt={class:"w-4 h-4 bg-purple-500 rounded-full flex items-center justify-center"},pHt={class:"flex-1 min-w-0"},hHt={class:"flex items-center justify-between"},mHt={class:"text-sm font-medium text-gray-900 truncate"},gHt={key:0,class:"text-xs text-gray-400"},vHt={key:0,class:"text-xs text-blue-600 mt-0.5 truncate"},yHt={class:"flex items-center space-x-2 mt-0.5"},bHt={class:"text-xs text-gray-500"},xHt={key:0,class:"text-xs text-blue-500 animate-pulse"},_Ht={class:"p-3 border-t border-gray-200"},wHt={__name:"ChatSidebar",props:{rooms:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]},selectedRoom:{type:Object,default:null},activeTab:{type:String,default:"all"},searchQuery:{type:String,default:""},loading:{type:Boolean,default:!1},usersLoading:{type:Boolean,default:!1},isAiEnabled:{type:Boolean,default:!1},selectedModel:{type:String,default:""},typingUsers:{type:Object,default:()=>({})},onlineUsers:{type:Array,default:()=>[]}},emits:["create-room","select-room","start-dm","update:activeTab","update:searchQuery"],setup(t){const e=t,n=Qn("currentUser",{value:""}),r=[{key:"all",label:"All",icon:aa},{key:"dm",label:"DMs",icon:Ji},{key:"engagement",label:"Engagements",icon:vt},{key:"group",label:"Groups",icon:Jr}],s=Z(()=>{var _,k;return{"meta-llama/llama-3.1-8b-instruct:free":"Llama 3.1","google/gemma-2-9b-it:free":"Gemma 2","qwen/qwen-2.5-7b-instruct:free":"Qwen 2.5"}[e.selectedModel]||((k=(_=e.selectedModel)==null?void 0:_.split("/").pop())==null?void 0:k.split(":")[0])||"AI"}),i=x=>x==="all"?e.rooms.length:x==="dm"?e.rooms.filter(_=>_.is_dm||_.room_type==="Private").length:x==="engagement"?e.rooms.filter(_=>_.room_type==="Engagement").length:x==="group"?e.rooms.filter(_=>_.room_type==="Group").length:0,a=x=>({Engagement:vt,Group:Jr,Direct:aa,Private:Ji,Department:Ol})[x]||aa,o=x=>({Engagement:"bg-blue-100 text-blue-600",Group:"bg-green-100 text-green-600",Direct:"bg-purple-100 text-purple-600",Private:"bg-purple-100 text-purple-600"})[x]||"bg-gray-100 text-gray-600",l=x=>{if(!x)return"";const _=new Date(x),w=new Date-_;return w<6e4?"now":w<36e5?`${Math.floor(w/6e4)}m`:w<864e5?`${Math.floor(w/36e5)}h`:_.toLocaleDateString([],{month:"short",day:"numeric"})},d=x=>{var _;return((_=e.typingUsers[x])==null?void 0:_.length)>0},c=x=>{if(!x.participants||!n.value)return"";const _=x.participants.find(k=>k.user!==n.value);return(_==null?void 0:_.user)||""},f=x=>{if(x.display_name)return x.display_name;if(!x.participants)return x.room_name;const _=x.participants.find(k=>k.user!==n.value);return(_==null?void 0:_.user_name)||(_==null?void 0:_.user)||x.room_name},p=x=>f(x).split(" ").map(k=>k[0]).join("").toUpperCase().slice(0,2)||"?",h=x=>e.onlineUsers.includes(x),m=Z(()=>e.rooms.filter(x=>x.is_dm||x.room_type==="Private")),g=Z(()=>{let x=e.users;if(e.searchQuery){const _=e.searchQuery.toLowerCase();x=x.filter(k=>{var w,S;return((w=k.full_name)==null?void 0:w.toLowerCase().includes(_))||((S=k.email)==null?void 0:S.toLowerCase().includes(_))})}return x}),y=x=>(x.full_name||x.email).split(" ").map(k=>k[0]).join("").toUpperCase().slice(0,2)||"?";return(x,_)=>{const k=Vs("router-link");return T(),R("div",SUt,[u("div",CUt,[u("div",AUt,[u("div",TUt,[b(v(aa),{class:"w-6 h-6 text-blue-600"}),_[3]||(_[3]=u("h1",{class:"text-xl font-semibold text-gray-900"},"Mkaguzi Chat",-1))]),b(v(J),{variant:"ghost",size:"sm",onClick:_[0]||(_[0]=w=>x.$emit("create-room"))},{default:D(()=>[b(v(nt),{class:"w-5 h-5"})]),_:1})]),t.isAiEnabled?(T(),R("div",$Ut,[u("div",MUt,[b(v(Mc),{class:"w-4 h-4"}),_[4]||(_[4]=u("span",null,"AI Enabled",-1))]),_[5]||(_[5]=u("span",{class:"text-gray-400"},"",-1)),u("span",EUt,$(s.value),1)])):se("",!0)]),u("div",DUt,[(T(),R(xe,null,_e(r,w=>u("button",{key:w.key,onClick:S=>x.$emit("update:activeTab",w.key),class:pe(["flex-1 py-2 text-sm font-medium transition-colors",t.activeTab===w.key?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"])},[u("div",PUt,[(T(),he(At(w.icon),{class:"w-4 h-4"})),u("span",null,$(w.label),1),i(w.key)?(T(),he(v(De),{key:0,variant:"subtle",size:"sm"},{default:D(()=>[W($(i(w.key)),1)]),_:2},1024)):se("",!0)])],10,RUt)),64))]),u("div",IUt,[u("div",OUt,[b(v(En),{class:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),u("input",{type:"text",value:t.searchQuery,onInput:_[1]||(_[1]=w=>x.$emit("update:searchQuery",w.target.value)),placeholder:t.activeTab==="dm"?"Search users...":"Search rooms...",class:"w-full pl-9 pr-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,40,LUt)])]),u("div",VUt,[t.activeTab==="dm"?(T(),R(xe,{key:0},[t.usersLoading?(T(),R("div",NUt,[b(v(N0),{class:"w-6 h-6 animate-spin text-blue-600 mx-auto"}),_[6]||(_[6]=u("p",{class:"text-sm text-gray-500 mt-2"},"Loading users...",-1))])):g.value.length===0&&!t.searchQuery?(T(),R("div",jUt,[b(v(Jr),{class:"w-12 h-12 text-gray-300 mx-auto mb-4"}),_[7]||(_[7]=u("h3",{class:"text-sm font-medium text-gray-900 mb-1"},"No users found",-1)),_[8]||(_[8]=u("p",{class:"text-xs text-gray-500"},"Try adjusting your search",-1))])):(T(),R("div",FUt,[m.value.length>0?(T(),R("div",BUt,[_[10]||(_[10]=u("h4",{class:"text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"},"Recent Conversations",-1)),(T(!0),R(xe,null,_e(m.value,w=>(T(),R("div",{key:w.name,onClick:S=>x.$emit("select-room",w),class:"p-2 rounded-lg hover:bg-white cursor-pointer mb-1"},[u("div",UUt,[u("div",HUt,$(p(w)),1),u("div",qUt,[u("p",WUt,$(f(w)),1),_[9]||(_[9]=u("p",{class:"text-xs text-gray-500"},"Direct message",-1))])])],8,zUt))),128))])):se("",!0),u("div",GUt,[_[11]||(_[11]=u("h4",{class:"text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"},"Start New Conversation",-1)),(T(!0),R(xe,null,_e(g.value,w=>(T(),R("div",{key:w.email,onClick:S=>x.$emit("start-dm",w),class:"p-2 rounded-lg hover:bg-gray-50 cursor-pointer mb-1"},[u("div",KUt,[u("div",XUt,$(y(w)),1),u("div",QUt,[u("p",ZUt,$(w.full_name||w.email),1),u("p",JUt,$(w.email),1)]),h(w.email)?(T(),R("div",eHt)):se("",!0)])],8,YUt))),128))])]))],64)):(T(),R(xe,{key:1},[t.loading?(T(),R("div",tHt,[b(v(N0),{class:"w-6 h-6 animate-spin text-blue-600 mx-auto"}),_[12]||(_[12]=u("p",{class:"text-sm text-gray-500 mt-2"},"Loading rooms...",-1))])):t.rooms.length===0?(T(),R("div",nHt,[b(v(aa),{class:"w-12 h-12 text-gray-300 mx-auto mb-4"}),u("h3",rHt,$(t.activeTab==="dm"?"No direct messages":"No chat rooms"),1),u("p",sHt,$(t.activeTab==="dm"?"Click on a participant to start a DM":"Create a new chat room to get started"),1),t.activeTab!=="dm"?(T(),he(v(J),{key:0,size:"sm",onClick:_[2]||(_[2]=w=>x.$emit("create-room"))},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-1"}),_[13]||(_[13]=W(" New Room ",-1))]),_:1})):se("",!0)])):(T(),R("div",iHt,[(T(!0),R(xe,null,_e(t.rooms,w=>{var S;return T(),R("div",{key:w.name,onClick:C=>x.$emit("select-room",w),class:pe(["p-3 cursor-pointer transition-colors",((S=t.selectedRoom)==null?void 0:S.name)===w.name?"bg-blue-50 border-l-3 border-blue-500":"hover:bg-gray-50"])},[u("div",oHt,[u("div",lHt,[w.is_dm?(T(),R(xe,{key:0},[u("div",uHt,$(p(w)),1),h(c(w))?(T(),R("div",dHt)):se("",!0)],64)):(T(),R(xe,{key:1},[u("div",{class:pe(["w-10 h-10 rounded-lg flex items-center justify-center",o(w.room_type)])},[(T(),he(At(a(w.room_type)),{class:"w-5 h-5"}))],2),w.is_ai_enabled?(T(),R("div",cHt,[u("div",fHt,[b(v(Mc),{class:"w-2.5 h-2.5 text-white"})])])):se("",!0)],64))]),u("div",pHt,[u("div",hHt,[u("h3",mHt,$(w.is_dm?f(w):w.room_name),1),w.last_message_time?(T(),R("span",gHt,$(l(w.last_message_time)),1)):se("",!0)]),w.linked_engagement&&!w.is_dm?(T(),R("p",vHt,[b(v(vt),{class:"w-3 h-3 inline mr-1"}),W(" "+$(w.engagement_title||w.linked_engagement),1)])):se("",!0),u("div",yHt,[u("p",bHt,$(w.is_dm?"Direct message":`${w.participant_count||0} members`),1),d(w.name)?(T(),R("span",xHt," typing... ")):se("",!0)])])])],10,aHt)}),128))]))],64))]),u("div",_Ht,[b(k,{to:"/settings/configuration?tab=ai",class:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-900 transition-colors"},{default:D(()=>[b(v(ha),{class:"w-4 h-4"}),_[14]||(_[14]=u("span",null,"AI Chat Settings",-1))]),_:1})])])}}},kHt=It(wHt,[["__scopeId","data-v-b0f8e0e6"]]),SHt={class:"bg-white border-b border-gray-200 p-4"},CHt={class:"flex items-center justify-between"},AHt={class:"flex items-center space-x-3"},THt={class:"flex items-center space-x-2"},$Ht={class:"text-lg font-semibold text-gray-900"},MHt={class:"text-sm text-gray-500"},EHt={key:0,class:"ml-2"},DHt={class:"text-blue-600"},RHt={class:"flex items-center space-x-2"},PHt={key:0,class:"flex items-center text-sm text-gray-500"},IHt={key:1,class:"text-sm text-blue-500 animate-pulse"},OHt={__name:"ChatHeader",props:{room:{type:Object,required:!0},isAiEnabled:{type:Boolean,default:!1},onlineCount:{type:Number,default:0},typingUsers:{type:Array,default:()=>[]},indexing:{type:Boolean,default:!1}},emits:["toggle-ai","open-settings","show-participants","index-documents"],setup(t){const e=t,n=Z(()=>({Engagement:vt,Group:Jr,Direct:aa,Private:Ji,Department:Ol})[e.room.room_type]||aa),r=Z(()=>({Engagement:"bg-blue-100 text-blue-600",Group:"bg-green-100 text-green-600",Direct:"bg-purple-100 text-purple-600",Private:"bg-purple-100 text-purple-600"})[e.room.room_type]||"bg-gray-100 text-gray-600");return(s,i)=>(T(),R("div",SHt,[u("div",CHt,[u("div",AHt,[u("div",{class:pe(["w-10 h-10 rounded-lg flex items-center justify-center",r.value])},[(T(),he(At(n.value),{class:"w-5 h-5"}))],2),u("div",null,[u("div",THt,[u("h2",$Ht,$(t.room.room_name),1),t.room.is_ai_enabled?(T(),he(v(De),{key:0,variant:"subtle",theme:"purple"},{default:D(()=>[b(v(Mc),{class:"w-3 h-3 mr-1"}),i[3]||(i[3]=W(" AI ",-1))]),_:1})):se("",!0)]),u("p",MHt,[W($(t.room.participant_count||0)+" members ",1),t.room.linked_engagement?(T(),R("span",EHt,[i[4]||(i[4]=W("  Linked to ",-1)),u("span",DHt,$(t.room.linked_engagement),1)])):se("",!0)])])]),u("div",RHt,[t.onlineCount>0?(T(),R("div",PHt,[i[5]||(i[5]=u("div",{class:"w-2 h-2 bg-green-500 rounded-full mr-1"},null,-1)),W(" "+$(t.onlineCount)+" online ",1)])):se("",!0),t.typingUsers.length>0?(T(),R("div",IHt,$(t.typingUsers.map(a=>a.full_name||a.user).join(", "))+" typing... ",1)):se("",!0),t.room.linked_engagement?(T(),he(v(J),{key:2,variant:"ghost",size:"sm",onClick:i[0]||(i[0]=a=>s.$emit("index-documents")),loading:t.indexing,title:"Index engagement documents for AI"},{default:D(()=>[b(v(Kr),{class:"w-4 h-4"})]),_:1},8,["loading"])):se("",!0),b(v(J),{variant:"ghost",size:"sm",onClick:i[1]||(i[1]=a=>s.$emit("show-participants"))},{default:D(()=>[b(v(Jr),{class:"w-4 h-4"})]),_:1}),b(v(J),{variant:"ghost",size:"sm",onClick:i[2]||(i[2]=a=>s.$emit("open-settings"))},{default:D(()=>[b(v(ha),{class:"w-4 h-4"})]),_:1})])])]))}},LHt={key:0,class:"max-w-2xl group"},VHt={class:"flex items-start space-x-3"},NHt={class:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0"},jHt={class:"flex-1"},FHt={class:"bg-purple-50 border border-purple-100 rounded-lg px-4 py-3 relative"},BHt={class:"absolute -top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},zHt={class:"flex items-center space-x-1 bg-white rounded-lg shadow-sm border px-1"},UHt={class:"flex items-center space-x-2 mb-2"},HHt={key:0,class:"text-xs text-purple-400"},qHt=["innerHTML"],WHt={key:0,class:"mt-3 pt-3 border-t border-purple-200"},GHt={class:"text-xs text-purple-600 mb-2 flex items-center"},YHt={class:"flex flex-wrap gap-1"},KHt=["onClick"],XHt={class:"text-xs text-gray-400 mt-1 block"},QHt={class:"relative"},ZHt={class:"flex items-center space-x-1 bg-white rounded-lg shadow-sm border px-1"},JHt={key:0,class:"text-xs opacity-75 mb-1"},eqt={key:1,class:"text-xs opacity-75 mb-2 pl-2 border-l-2 border-current"},tqt={class:"font-medium"},nqt={class:"truncate"},rqt=["innerHTML"],sqt={key:2,class:"text-xs opacity-50 ml-1"},iqt={__name:"ChatMessageItem",props:{message:{type:Object,required:!0},currentUser:{type:String,default:""},showSender:{type:Boolean,default:!0}},emits:["edit","delete","reply","view-source"],setup(t,{emit:e}){const n=t,r=Z(()=>n.message.sender===n.currentUser),s=Z(()=>n.message.is_ai_generated?"justify-start":r.value?"justify-end":"justify-start"),i=Z(()=>n.message.is_ai_generated?"bg-purple-50 border border-purple-100":r.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),a=Z(()=>{let f=n.message.content||"";return f=f.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),f=f.replace(/__(.*?)__/g,"<strong>$1</strong>"),f=f.replace(/\*(.*?)\*/g,"<em>$1</em>"),f=f.replace(/_(.*?)_/g,"<em>$1</em>"),f=f.replace(/`(.*?)`/g,'<code class="px-1 py-0.5 bg-gray-200 rounded text-sm">$1</code>'),f=f.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" class="text-blue-600 underline">$1</a>'),f=f.replace(/\n/g,"<br>"),f}),o=Z(()=>{if(!n.message.context_sources)return[];if(typeof n.message.context_sources=="string")try{return JSON.parse(n.message.context_sources)}catch(f){return[n.message.context_sources]}return n.message.context_sources}),l=f=>{var h;return{"meta-llama/llama-3.1-8b-instruct:free":"Llama 3.1","google/gemma-2-9b-it:free":"Gemma 2","qwen/qwen-2.5-7b-instruct:free":"Qwen 2.5"}[f]||((h=f==null?void 0:f.split("/").pop())==null?void 0:h.split(":")[0])||"AI"},d=f=>f?new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",c=()=>{navigator.clipboard.writeText(n.message.content)};return(f,p)=>(T(),R("div",{class:pe(["flex",s.value])},[t.message.is_ai_generated?(T(),R("div",LHt,[u("div",VHt,[u("div",NHt,[b(v(Mc),{class:"w-4 h-4 text-purple-600"})]),u("div",jHt,[u("div",FHt,[u("div",BHt,[u("div",zHt,[u("button",{onClick:c,class:"p-1 hover:bg-gray-100 rounded",title:"Copy"},[b(v(Yi),{class:"w-3.5 h-3.5 text-gray-500"})])])]),u("div",UHt,[p[3]||(p[3]=u("span",{class:"text-xs font-medium text-purple-600"},"AI Assistant",-1)),t.message.ai_model_used?(T(),R("span",HHt,$(l(t.message.ai_model_used)),1)):se("",!0)]),u("div",{class:"text-sm text-gray-800 prose prose-sm max-w-none",innerHTML:a.value},null,8,qHt),o.value.length>0?(T(),R("div",WHt,[u("p",GHt,[b(v(vt),{class:"w-3 h-3 mr-1"}),p[4]||(p[4]=W(" Sources: ",-1))]),u("div",YHt,[(T(!0),R(xe,null,_e(o.value,h=>(T(),R("span",{key:h,class:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded cursor-pointer hover:bg-purple-200",onClick:m=>f.$emit("view-source",h)},$(h),9,KHt))),128))])])):se("",!0)]),u("span",XHt,$(d(t.message.creation)),1)])])])):(T(),R("div",{key:1,class:pe(["max-w-md group",r.value?"order-2":""])},[u("div",QHt,[u("div",{class:pe(["absolute -top-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",r.value?"left-2":"right-2"])},[u("div",ZHt,[u("button",{onClick:c,class:"p-1 hover:bg-gray-100 rounded",title:"Copy"},[b(v(Yi),{class:"w-3.5 h-3.5 text-gray-500"})]),r.value&&!t.message.is_ai_generated?(T(),R("button",{key:0,onClick:p[0]||(p[0]=h=>f.$emit("edit",t.message)),class:"p-1 hover:bg-gray-100 rounded",title:"Edit"},[b(v(Ife),{class:"w-3.5 h-3.5 text-gray-500"})])):se("",!0),u("button",{onClick:p[1]||(p[1]=h=>f.$emit("reply",t.message)),class:"p-1 hover:bg-gray-100 rounded",title:"Reply"},[b(v(Ofe),{class:"w-3.5 h-3.5 text-gray-500"})]),r.value?(T(),R("button",{key:1,onClick:p[2]||(p[2]=h=>f.$emit("delete",t.message)),class:"p-1 hover:bg-red-100 rounded",title:"Delete"},[b(v(is),{class:"w-3.5 h-3.5 text-red-500"})])):se("",!0)])],2),u("div",{class:pe(["rounded-lg px-4 py-2",i.value])},[t.showSender&&!r.value?(T(),R("div",JHt,$(t.message.sender_name||t.message.sender),1)):se("",!0),t.message.reply_to?(T(),R("div",eqt,[u("span",tqt,$(t.message.reply_to_sender),1),u("p",nqt,$(t.message.reply_to_content),1)])):se("",!0),u("div",{class:"text-sm whitespace-pre-wrap",innerHTML:a.value},null,8,rqt),t.message.is_edited?(T(),R("span",sqt,"(edited)")):se("",!0)],2),u("div",{class:pe(["text-xs mt-1",r.value?"text-right text-gray-400":"text-gray-400"])},[W($(d(t.message.creation))+" ",1),r.value&&t.message.delivered?(T(),he(v(Fr),{key:0,class:"w-3 h-3 inline ml-1"})):se("",!0),r.value&&t.message.read?(T(),he(v(cfe),{key:1,class:"w-3 h-3 inline ml-1 text-blue-500"})):se("",!0)],2)])],2))],2))}},aqt=It(iqt,[["__scopeId","data-v-06683389"]]),oqt={class:"flex items-center space-x-2 text-sm text-gray-500"},lqt={class:"flex -space-x-1"},uqt=["title"],dqt={class:"text-xs font-medium text-blue-600"},cqt={class:"animate-pulse"},fqt={__name:"ChatTypingIndicator",props:{users:{type:Array,default:()=>[]}},setup(t){const e=t,n=Z(()=>e.users.map(a=>typeof a=="string"?a:a.full_name||a.user||"Someone")),r=Z(()=>n.value.slice(0,3)),s=Z(()=>{const a=n.value,o=a.length;return o===0?"":o===1?`${a[0]} is typing`:o===2?`${a[0]} and ${a[1]} are typing`:`${a[0]} and ${o-1} others are typing`}),i=a=>a?a.split(/[@\s]/).map(o=>o[0]).join("").toUpperCase().slice(0,2):"?";return(a,o)=>(T(),R("div",oqt,[u("div",lqt,[(T(!0),R(xe,null,_e(r.value,l=>(T(),R("div",{key:l,class:"w-6 h-6 rounded-full bg-blue-100 border-2 border-white flex items-center justify-center",title:l},[u("span",dqt,$(i(l)),1)],8,uqt))),128))]),u("span",cqt,$(s.value),1),o[0]||(o[0]=u("span",{class:"flex space-x-1"},[u("span",{class:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0ms"}}),u("span",{class:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"150ms"}}),u("span",{class:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"300ms"}})],-1))]))}},pqt={key:0,class:"text-center"},hqt={key:1,class:"text-center py-4"},mqt={key:2,class:"text-center py-12"},gqt={class:"text-gray-500 text-sm"},vqt={key:1,class:"flex justify-start"},yqt={class:"flex items-start space-x-3"},bqt={class:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center"},xqt={class:"bg-purple-50 border border-purple-100 rounded-lg px-4 py-3"},_qt={class:"flex items-center space-x-2"},wqt={__name:"ChatMessageList",props:{messages:{type:Array,default:()=>[]},currentUser:{type:String,default:""},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},isAiEnabled:{type:Boolean,default:!1},aiThinking:{type:Boolean,default:!1},typingUsers:{type:Array,default:()=>[]}},emits:["load-more","edit","delete","reply","add-reaction","scroll"],setup(t,{expose:e,emit:n}){const r=t,s=n,i=Q(null),a=Q(null),o=Q(!0),l=(f,p)=>{if(p===0)return!0;const h=r.messages[p-1];return h.sender!==f.sender||h.is_ai_generated!==f.is_ai_generated},d=(f=!0)=>{nr(()=>{a.value&&a.value.scrollIntoView({behavior:f?"smooth":"auto"})})},c=()=>{if(!i.value)return;const{scrollTop:f,scrollHeight:p,clientHeight:h}=i.value;o.value=p-f-h<100,s("scroll",{scrollTop:f,scrollHeight:p,clientHeight:h,isNearBottom:o.value})};return et(()=>r.messages.length,(f,p)=>{f>p&&o.value&&d()}),et(()=>r.aiThinking,f=>{f&&o.value&&d()}),yt(()=>{d(!1)}),e({scrollToBottom:d}),(f,p)=>(T(),R("div",{ref_key:"containerRef",ref:i,class:"flex-1 overflow-y-auto p-4 space-y-4",onScroll:c},[t.hasMore&&!t.loading?(T(),R("div",pqt,[b(v(J),{variant:"ghost",size:"sm",onClick:p[0]||(p[0]=h=>f.$emit("load-more"))},{default:D(()=>[b(v(ife),{class:"w-4 h-4 mr-1"}),p[1]||(p[1]=W(" Load older messages ",-1))]),_:1})])):se("",!0),t.loading?(T(),R("div",hqt,[b(v(N0),{class:"w-6 h-6 animate-spin text-blue-600 mx-auto"}),p[2]||(p[2]=u("p",{class:"text-sm text-gray-500 mt-2"},"Loading messages...",-1))])):t.messages.length===0?(T(),R("div",mqt,[b(v(aa),{class:"w-12 h-12 text-gray-300 mx-auto mb-4"}),p[3]||(p[3]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No messages yet",-1)),u("p",gqt," Start the conversation"+$(t.isAiEnabled?" or ask the AI assistant":""),1)])):(T(),R(xe,{key:3},[(T(!0),R(xe,null,_e(t.messages,(h,m)=>(T(),he(aqt,{key:h.name||m,message:h,"current-user":t.currentUser,"show-sender":l(h,m),onEdit:g=>f.$emit("edit",h),onDelete:g=>f.$emit("delete",h),onReply:g=>f.$emit("reply",h)},null,8,["message","current-user","show-sender","onEdit","onDelete","onReply"]))),128)),t.typingUsers.length>0?(T(),he(fqt,{key:0,users:t.typingUsers},null,8,["users"])):se("",!0),t.aiThinking?(T(),R("div",vqt,[u("div",yqt,[u("div",bqt,[b(v(Mc),{class:"w-4 h-4 text-purple-600 animate-pulse"})]),u("div",xqt,[u("div",_qt,[b(v(N0),{class:"w-4 h-4 animate-spin text-purple-600"}),p[4]||(p[4]=u("span",{class:"text-sm text-purple-600"},"AI is thinking...",-1))])])])])):se("",!0)],64)),u("div",{ref_key:"scrollAnchor",ref:a},null,512)],544))}},kqt={class:"bg-white border-t border-gray-200 p-4"},Sqt={key:0,class:"mb-3 p-2 bg-gray-50 rounded-lg border-l-4 border-blue-500 flex items-center justify-between"},Cqt={class:"flex-1 min-w-0"},Aqt={class:"text-xs text-blue-600 font-medium"},Tqt={class:"text-sm text-gray-600 truncate"},$qt={key:1,class:"mb-3 p-2 bg-yellow-50 rounded-lg border-l-4 border-yellow-500 flex items-center justify-between"},Mqt={class:"flex-1 min-w-0"},Eqt={class:"text-sm text-gray-600 truncate"},Dqt={class:"flex items-end space-x-3"},Rqt={class:"flex-1 relative"},Pqt={key:0,class:"absolute bottom-full left-0 mb-2 flex items-center space-x-1 bg-white border rounded-lg shadow-lg p-1 z-10"},Iqt={class:"border border-gray-200 rounded-lg focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-transparent overflow-hidden"},Oqt={key:1,class:"absolute bottom-1 right-2 text-xs text-gray-400"},Lqt={class:"flex items-center space-x-2"},Vqt={class:"mt-2 text-xs text-gray-400 flex items-center space-x-4"},Nqt={key:0},jqt={key:2,class:"absolute bottom-full mb-2 right-4 bg-white border rounded-lg shadow-lg p-3 z-20"},Fqt={class:"grid grid-cols-8 gap-1"},Bqt=["onClick"],zqt=null,Uqt={__name:"ChatMessageInput",props:{isAiEnabled:{type:Boolean,default:!1},aiThinking:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},replyingTo:{type:Object,default:null},editingMessage:{type:Object,default:null},placeholder:{type:String,default:"Type a message..."},maxLength:{type:Number,default:4e3}},emits:["send","ask-ai","cancel-reply","cancel-edit","typing","toggle-ai"],setup(t,{expose:e,emit:n}){const r=t,s=n,i=Q(!1),a=Q(!1),o=["","","","","","","","","","","","","","","",""],l=rCe({extensions:[_Z.configure({heading:!1,codeBlock:!1}),wZ.configure({placeholder:()=>r.editingMessage?"Edit your message...":r.isAiEnabled?"Type a message or ask AI...":r.placeholder})],editorProps:{attributes:{class:"focus:outline-none"},handleKeyDown:(m,g)=>g.key==="Enter"&&!g.shiftKey?(g.preventDefault(),f(),!0):!1},onUpdate:({editor:m})=>{m.getText().length>0&&s("typing")}}),d=Z(()=>{var m;return((m=l.value)==null?void 0:m.getText().trim().length)>0}),c=Z(()=>{var m;return((m=l.value)==null?void 0:m.getText().length)||0}),f=()=>{var y,x;if(!d.value||r.loading)return;const m=l.value.getHTML(),g=l.value.getText().trim();s("send",{content:g,html:m,replyTo:(y=r.replyingTo)==null?void 0:y.name,editId:(x=r.editingMessage)==null?void 0:x.name,isAiPrompt:!1}),l.value.commands.clearContent()},p=()=>{if(!d.value||r.aiThinking)return;const m=l.value.getText().trim();s("send",{content:m,isAiPrompt:!0}),l.value.commands.clearContent()},h=m=>{l.value.commands.insertContent(m),a.value=!1,l.value.commands.focus()};return et(()=>r.editingMessage,m=>{m&&l.value&&(l.value.commands.setContent(m.content),l.value.commands.focus("end"))},{immediate:!0}),yt(()=>{setTimeout(()=>{var m;return(m=l.value)==null?void 0:m.commands.focus()},100)}),Gl(()=>{var m;clearTimeout(zqt),(m=l.value)==null||m.destroy()}),e({editor:l,focus:()=>{var m;return(m=l.value)==null?void 0:m.commands.focus()}}),(m,g)=>(T(),R("div",kqt,[t.replyingTo?(T(),R("div",Sqt,[u("div",Cqt,[u("p",Aqt,"Replying to "+$(t.replyingTo.sender_name||t.replyingTo.sender),1),u("p",Tqt,$(t.replyingTo.content),1)]),u("button",{onClick:g[0]||(g[0]=y=>m.$emit("cancel-reply")),class:"p-1 hover:bg-gray-200 rounded"},[b(v(ht),{class:"w-4 h-4 text-gray-500"})])])):se("",!0),t.editingMessage?(T(),R("div",$qt,[u("div",Mqt,[g[10]||(g[10]=u("p",{class:"text-xs text-yellow-600 font-medium"},"Editing message",-1)),u("p",Eqt,$(t.editingMessage.content),1)]),u("button",{onClick:g[1]||(g[1]=y=>m.$emit("cancel-edit")),class:"p-1 hover:bg-yellow-100 rounded"},[b(v(ht),{class:"w-4 h-4 text-gray-500"})])])):se("",!0),u("div",Dqt,[u("div",Rqt,[v(l)&&i.value?(T(),R("div",Pqt,[u("button",{onClick:g[2]||(g[2]=y=>v(l).chain().focus().toggleBold().run()),class:pe(["p-1.5 rounded hover:bg-gray-100",{"bg-gray-200":v(l).isActive("bold")}]),title:"Bold (Ctrl+B)"},[b(v(ofe),{class:"w-4 h-4"})],2),u("button",{onClick:g[3]||(g[3]=y=>v(l).chain().focus().toggleItalic().run()),class:pe(["p-1.5 rounded hover:bg-gray-100",{"bg-gray-200":v(l).isActive("italic")}]),title:"Italic (Ctrl+I)"},[b(v(Cfe),{class:"w-4 h-4"})],2),u("button",{onClick:g[4]||(g[4]=y=>v(l).chain().focus().toggleStrike().run()),class:pe(["p-1.5 rounded hover:bg-gray-100",{"bg-gray-200":v(l).isActive("strike")}]),title:"Strikethrough"},[b(v(Vfe),{class:"w-4 h-4"})],2),u("button",{onClick:g[5]||(g[5]=y=>v(l).chain().focus().toggleCode().run()),class:pe(["p-1.5 rounded hover:bg-gray-100",{"bg-gray-200":v(l).isActive("code")}]),title:"Code"},[b(v(bY),{class:"w-4 h-4"})],2),g[11]||(g[11]=u("div",{class:"w-px h-5 bg-gray-300 mx-1"},null,-1)),u("button",{onClick:g[6]||(g[6]=y=>v(l).chain().focus().toggleBulletList().run()),class:pe(["p-1.5 rounded hover:bg-gray-100",{"bg-gray-200":v(l).isActive("bulletList")}]),title:"Bullet List"},[b(v(KS),{class:"w-4 h-4"})],2),u("button",{onClick:g[7]||(g[7]=y=>v(l).chain().focus().toggleOrderedList().run()),class:pe(["p-1.5 rounded hover:bg-gray-100",{"bg-gray-200":v(l).isActive("orderedList")}]),title:"Numbered List"},[b(v($fe),{class:"w-4 h-4"})],2)])):se("",!0),u("div",Iqt,[b(v(cZ),{editor:v(l),class:"prose prose-sm max-w-none px-4 py-3 min-h-[44px] max-h-[200px] overflow-y-auto focus:outline-none"},null,8,["editor"])]),c.value>0?(T(),R("div",Oqt,$(c.value)+"/"+$(t.maxLength),1)):se("",!0)]),u("div",Lqt,[b(v(J),{variant:"ghost",size:"sm",onClick:g[8]||(g[8]=y=>i.value=!i.value),class:pe({"bg-gray-100":i.value}),title:"Formatting"},{default:D(()=>[b(v(Ffe),{class:"w-4 h-4"})]),_:1},8,["class"]),b(v(J),{variant:"ghost",size:"sm",onClick:g[9]||(g[9]=y=>a.value=!a.value),title:"Emoji"},{default:D(()=>[b(v(Lfe),{class:"w-4 h-4"})]),_:1}),t.isAiEnabled?(T(),he(v(J),{key:0,variant:"outline",size:"sm",onClick:p,disabled:!d.value||t.aiThinking,title:"Ask AI Assistant",class:"flex items-center"},{default:D(()=>[b(v(Mc),{class:"w-4 h-4 mr-1"}),g[12]||(g[12]=W(" Ask AI ",-1))]),_:1},8,["disabled"])):se("",!0),b(v(J),{onClick:f,disabled:!d.value||r.loading,size:"sm",variant:"solid"},{default:D(()=>[b(v(PY),{class:"w-4 h-4"})]),_:1},8,["disabled"])])]),u("div",Vqt,[g[14]||(g[14]=u("span",null,[u("kbd",{class:"px-1 bg-gray-100 rounded"},"Enter"),W(" to send")],-1)),g[15]||(g[15]=u("span",null,[u("kbd",{class:"px-1 bg-gray-100 rounded"},"Shift+Enter"),W(" for new line")],-1)),i.value?(T(),R("span",Nqt,[...g[13]||(g[13]=[u("kbd",{class:"px-1 bg-gray-100 rounded"},"Ctrl+B",-1),W(" bold",-1)])])):se("",!0)]),a.value?(T(),R("div",jqt,[u("div",Fqt,[(T(),R(xe,null,_e(o,y=>u("button",{key:y,onClick:x=>h(y),class:"p-2 hover:bg-gray-100 rounded text-lg"},$(y),9,Bqt)),64))])])):se("",!0)]))}},Hqt={class:"w-72 bg-white border-l border-gray-200 flex flex-col h-full"},qqt={class:"p-4 border-b border-gray-200"},Wqt={class:"flex items-center justify-between"},Gqt={class:"flex border-b border-gray-100"},Yqt={class:"flex-1 overflow-y-auto p-4 space-y-3"},Kqt={class:"relative"},Xqt={class:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center"},Qqt={class:"text-xs font-medium text-gray-600"},Zqt={key:0,class:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white"},Jqt={class:"flex-1 min-w-0"},eWt={class:"text-sm font-medium text-gray-900 truncate"},tWt={class:"flex items-center space-x-2"},nWt={class:"text-xs text-gray-500 capitalize"},rWt={key:0,class:"text-xs text-blue-500 animate-pulse"},sWt={class:"opacity-0 group-hover:opacity-100 transition-opacity"},iWt={class:"p-1 hover:bg-gray-100 rounded"},aWt={key:0,class:"text-center py-8 text-sm text-gray-500"},oWt={class:"p-4 border-t border-gray-200"},lWt={__name:"ChatParticipants",props:{participants:{type:Array,default:()=>[]},onlineUsers:{type:Array,default:()=>[]},typingUsers:{type:Array,default:()=>[]},currentUser:{type:String,default:""},isAdmin:{type:Boolean,default:!1}},emits:["close","add-participant","remove-participant","make-admin","direct-message"],setup(t,{emit:e}){const n=t,r=e,s=Q("all"),i=Z(()=>n.participants.filter(f=>n.onlineUsers.includes(f.user)).length),a=Z(()=>s.value==="online"?n.participants.filter(f=>n.onlineUsers.includes(f.user)):n.participants),o=f=>n.onlineUsers.includes(f),l=f=>n.typingUsers.includes(f),d=f=>f?f.split(/[@\s]/).map(p=>p[0]).join("").toUpperCase().slice(0,2):"?",c=f=>{const p=[{label:"Send Message",icon:aa,onClick:()=>r("direct-message",f)}];return n.isAdmin&&f.user!==n.currentUser&&(p.push({label:f.role==="Admin"?"Remove Admin":"Make Admin",icon:pfe,onClick:()=>r("make-admin",f)}),p.push({label:"Remove from Room",icon:LY,onClick:()=>r("remove-participant",f)})),p};return(f,p)=>(T(),R("div",Hqt,[u("div",qqt,[u("div",Wqt,[p[4]||(p[4]=u("h3",{class:"text-sm font-semibold text-gray-900"},"Participants",-1)),u("button",{onClick:p[0]||(p[0]=h=>f.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[b(v(ht),{class:"w-4 h-4"})])])]),u("div",Gqt,[u("button",{onClick:p[1]||(p[1]=h=>s.value="all"),class:pe(["flex-1 py-2 text-xs font-medium",s.value==="all"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"])}," All ("+$(t.participants.length)+") ",3),u("button",{onClick:p[2]||(p[2]=h=>s.value="online"),class:pe(["flex-1 py-2 text-xs font-medium",s.value==="online"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"])}," Online ("+$(i.value)+") ",3)]),u("div",Yqt,[(T(!0),R(xe,null,_e(a.value,h=>(T(),R("div",{key:h.user,class:"flex items-center space-x-3 group"},[u("div",Kqt,[u("div",Xqt,[u("span",Qqt,$(d(h.user)),1)]),o(h.user)?(T(),R("div",Zqt)):se("",!0)]),u("div",Jqt,[u("p",eWt,$(h.user_name||h.user),1),u("div",tWt,[u("p",nWt,$(h.role||"member"),1),l(h.user)?(T(),R("span",rWt," typing... ")):se("",!0)])]),u("div",sWt,[b(v(H0),{options:c(h)},{default:D(()=>[u("button",iWt,[b(v(hfe),{class:"w-4 h-4 text-gray-400"})])]),_:1},8,["options"])])]))),128)),a.value.length===0?(T(),R("div",aWt," No "+$(s.value==="online"?"online ":"")+"participants ",1)):se("",!0)]),u("div",oWt,[b(v(J),{variant:"outline",class:"w-full",size:"sm",onClick:p[3]||(p[3]=h=>f.$emit("add-participant"))},{default:D(()=>[b(v(zfe),{class:"w-4 h-4 mr-2"}),p[5]||(p[5]=W(" Add Participant ",-1))]),_:1})])]))}};function uWt(t,e){const n=Q(!1),r=Q([]),s=Q([]);let i=0;const a=50,o={onMessageCreated:[],onMessageUpdated:[],onMessageDeleted:[],onReactionAdded:[],onReactionRemoved:[],onTypingStart:[],onTypingStop:[],onUserJoined:[],onUserLeft:[],onPresenceUpdate:[]};let l=null;const d=3e3,c=()=>{var M;if(console.log("useChatRealtime connect called"),!((M=window.frappe)!=null&&M.realtime)){if(i++,i>=a){console.error("Frappe realtime not available after maximum retries");return}console.warn(`Frappe realtime not available, retry ${i}/${a}`),setTimeout(()=>{c()},100);return}console.log("Frappe realtime available, setting up listeners"),n.value=!0,i=0,f()},f=()=>{var M;(M=window.frappe)!=null&&M.realtime&&(p(),window.frappe.realtime.on("mkaguzi_chat_message",E=>{console.log("Received mkaguzi_chat_message event:",E),o.onMessageCreated.forEach(P=>P(E))}),window.frappe.realtime.on("mkaguzi_message_updated",E=>{console.log("Received mkaguzi_message_updated event:",E),o.onMessageUpdated.forEach(P=>P(E))}),window.frappe.realtime.on("mkaguzi_message_deleted",E=>{console.log("Received mkaguzi_message_deleted event:",E),o.onMessageDeleted.forEach(P=>P(E))}),window.frappe.realtime.on("mkaguzi_reaction_added",E=>{o.onReactionAdded.forEach(P=>P(E))}),window.frappe.realtime.on("mkaguzi_reaction_removed",E=>{o.onReactionRemoved.forEach(P=>P(E))}),window.frappe.realtime.on("mkaguzi_typing_start",E=>{E.room===t.value&&E.user!==e.value&&(r.value.find(P=>P.user===E.user)||r.value.push({user:E.user,full_name:E.full_name}),o.onTypingStart.forEach(P=>P(E)),setTimeout(()=>{r.value=r.value.filter(P=>P.user!==E.user)},d))}),window.frappe.realtime.on("mkaguzi_typing_stop",E=>{E.room===t.value&&(r.value=r.value.filter(P=>P.user!==E.user),o.onTypingStop.forEach(P=>P(E)))}),window.frappe.realtime.on("mkaguzi_user_joined",E=>{E.room===t.value&&(s.value.includes(E.user)||s.value.push(E.user),o.onUserJoined.forEach(P=>P(E)))}),window.frappe.realtime.on("mkaguzi_user_left",E=>{E.room===t.value&&(s.value=s.value.filter(P=>P!==E.user),o.onUserLeft.forEach(P=>P(E)))}),window.frappe.realtime.on("mkaguzi_presence_update",E=>{E.room===t.value&&(s.value=E.online_users||[],o.onPresenceUpdate.forEach(P=>P(E)))}))},p=()=>{var M;(M=window.frappe)!=null&&M.realtime},h=()=>ue(this,null,function*(){if(!t.value){console.log("joinRoom called but no room name");return}console.log("Joining room:",t.value);try{yield Ke("mkaguzi.api.chat.join_room_realtime",{room_name:t.value}),console.log("Successfully joined room, setting up listeners"),f()}catch(M){console.error("Failed to join room:",M)}}),m=()=>ue(this,null,function*(){if(t.value)try{yield Ke("mkaguzi.api.chat.leave_room_realtime",{room_name:t.value})}catch(M){console.error("Failed to leave room:",M)}}),g=(M=!0)=>ue(this,null,function*(){if(t.value)try{M?(yield Ke("mkaguzi.api.chat.start_typing",{room_name:t.value}),l&&clearTimeout(l),l=setTimeout(()=>{g(!1)},d)):(yield Ke("mkaguzi.api.chat.stop_typing",{room_name:t.value}),l&&(clearTimeout(l),l=null))}catch(E){console.error("Failed to send typing indicator:",E)}}),y=M=>{},x=M=>{},_=M=>{},k=(M,E,P)=>{},w=(M,E,P)=>{},S=(M,E)=>{const P=`on${M.charAt(0).toUpperCase()}${M.slice(1)}`;return o[P]&&o[P].push(E),()=>C(M,E)},C=(M,E)=>{const P=`on${M.charAt(0).toUpperCase()}${M.slice(1)}`;o[P]&&(o[P]=o[P].filter(I=>I!==E))},A=()=>{var M;l&&clearTimeout(l),m(),(M=window.frappe)!=null&&M.realtime,n.value=!1,r.value=[],s.value=[]};return yt(()=>{c()}),et(t,(M,E)=>{M&&M!==E&&n.value&&f()}),ks(()=>{A()}),{isConnected:n,typingUsers:r,onlineUsers:s,connect:c,disconnect:A,joinRoom:h,leaveRoom:m,sendTyping:g,emitMessageCreated:y,emitMessageUpdated:x,emitMessageDeleted:_,emitReactionAdded:k,emitReactionRemoved:w,on:S,off:C}}const ms="mkaguzi.api.chat";function dWt(){const t=Q([]),e=Q(null),n=e,r=Q([]),s=Q([]),i=Q([]),a=Q(!1),o=Q(!1),l=Q(!1),d=Q(!1),c=Q(!1),f=Q(!1),p=Q(null),h=Q(null),m=Q(null),g=Q(""),y=Ve({url:`${ms}.get_rooms`,onSuccess:H=>{t.value=(H==null?void 0:H.rooms)||[]},onError:H=>{p.value=H.message||"Failed to load rooms",console.error("Failed to load rooms:",H)}}),x=Ve({url:`${ms}.get_chat_settings`,onSuccess:H=>{h.value=H},onError:H=>{console.error("Failed to load AI settings:",H)}}),_=Z(()=>t.value.filter(H=>H.room_type==="Engagement")),k=Z(()=>t.value.filter(H=>H.room_type==="Direct")),w=Z(()=>t.value.filter(H=>H.room_type==="Group")),S=Z(()=>{var H,Y;return((H=h.value)==null?void 0:H.enable_ai_chat)&&((Y=h.value)==null?void 0:Y.openrouter_api_key)}),C=Z(()=>{var H;return((H=h.value)==null?void 0:H.default_model)||"meta-llama/llama-3.1-8b-instruct:free"}),A=()=>ue(this,null,function*(){o.value=!0,p.value=null;try{yield y.fetch()}finally{o.value=!1}}),M=A,E=()=>ue(this,null,function*(){try{yield x.fetch()}catch(H){console.error("Failed to load settings:",H)}}),P=(H="",Y=50)=>ue(this,null,function*(){d.value=!0;try{const B=yield Ke(`${ms}.search_users`,{query:H,limit:Y});i.value=(B==null?void 0:B.message)||B||[]}catch(B){console.error("Failed to load users:",B),i.value=[]}finally{d.value=!1}}),I=H=>ue(this,null,function*(){a.value=!0,p.value=null;try{const Y=yield Ke(`${ms}.create_room`,{room_name:H.room_name,room_type:H.room_type||"Group",linked_engagement:H.linked_engagement||H.engagement||null,is_ai_enabled:H.is_ai_enabled!==!1,participants:H.participants||[]});if(Y)return yield A(),Y}catch(Y){throw p.value=Y.message||"Failed to create room",Y}finally{a.value=!1}}),F=H=>ue(this,null,function*(){const Y=typeof H=="string"?H:H==null?void 0:H.name;if(Y){l.value=!0,p.value=null;try{const B=yield Ke(`${ms}.get_room_details`,{room_name:Y});return B&&(e.value=B,s.value=B.participants||[],yield L(Y)),B}catch(B){throw p.value=B.message||"Failed to load room",B}finally{l.value=!1}}}),L=(H,Y=50,B=0)=>ue(this,null,function*(){var ae;try{const be=yield Ke(`${ms}.get_messages`,{room_name:H||((ae=e.value)==null?void 0:ae.name),limit:Y,offset:B});be&&(B===0?r.value=be||[]:r.value=[...be||[],...r.value],f.value=((be==null?void 0:be.length)||0)>=Y)}catch(be){throw p.value=be.message||"Failed to load messages",be}}),z=()=>ue(this,null,function*(){if(!e.value||!f.value)return;const H=r.value.length;yield L(e.value.name,50,H)}),N=(H,Y=null,B=!1,ae="User")=>ue(this,null,function*(){if(!e.value)throw new Error("No room selected");c.value=!0,p.value=null;try{const be=yield Ke(`${ms}.send_message`,{room_name:e.value.name,content:H,message_type:ae,reply_to:Y});if(be&&be.message)return r.value.push(be.message),B&&e.value.is_ai_enabled&&(yield j(H)),be.message}catch(be){throw p.value=be.message||"Failed to send message",be}finally{c.value=!1}}),q=(H,Y)=>ue(this,null,function*(){try{const B=yield Ke(`${ms}.edit_message`,{message_name:H,content:Y});if(B){const ae=r.value.findIndex(be=>be.name===H);return ae!==-1&&(r.value[ae]=ge(ge({},r.value[ae]),B)),B}}catch(B){throw p.value=B.message||"Failed to edit message",B}}),V=H=>ue(this,null,function*(){try{yield Ke(`${ms}.delete_message`,{message_name:H}),r.value=r.value.filter(Y=>Y.name!==H)}catch(Y){throw p.value=Y.message||"Failed to delete message",Y}}),O=(H,Y)=>ue(this,null,function*(){try{const B=yield Ke(`${ms}.add_reaction`,{message_name:H,emoji:Y}),ae=r.value.findIndex(be=>be.name===H);return ae!==-1&&B&&(r.value[ae].reactions=B.reactions),B}catch(B){throw p.value=B.message||"Failed to add reaction",B}}),X=(H,Y)=>ue(this,null,function*(){try{const B=yield Ke(`${ms}.remove_reaction`,{message_name:H,emoji:Y}),ae=r.value.findIndex(be=>be.name===H);return ae!==-1&&B&&(r.value[ae].reactions=B.reactions),B}catch(B){throw p.value=B.message||"Failed to remove reaction",B}}),j=H=>ue(this,null,function*(){if(!e.value)throw new Error("No room selected");if(!S.value)throw new Error("AI assistant is not enabled");p.value=null;try{const Y=yield Ke(`${ms}.get_ai_response`,{room_name:e.value.name,user_message:H,include_context:!0});if(Y)return Y.message&&r.value.push(Y.message),Y}catch(Y){throw p.value=Y.message||"Failed to get AI response",Y}}),U=()=>ue(this,null,function*(){try{return yield Ke(`${ms}.test_ai_connection`)}catch(H){throw p.value=H.message||"AI connection test failed",H}}),G=H=>ue(this,null,function*(){try{return yield Ke(`${ms}.index_documents`,{engagement_id:H})}catch(Y){throw p.value=Y.message||"Failed to index documents",Y}}),ee=()=>ue(this,null,function*(){try{const H=yield Ke(`${ms}.get_index_stats`);return m.value=H,H}catch(H){console.error("Failed to get index stats:",H)}}),ie=()=>ue(this,null,function*(){try{const H=yield Ke(`${ms}.get_active_engagements`);return(H==null?void 0:H.engagements)||[]}catch(H){return console.error("Failed to get engagements:",H),[]}}),ne=H=>ue(this,null,function*(){a.value=!0,p.value=null;try{const Y=yield Ke(`${ms}.get_or_create_dm`,{target_user:H});if(Y)return yield A(),Y}catch(Y){throw p.value=Y.message||"Failed to create direct message",Y}finally{a.value=!1}}),ce=H=>ue(this,null,function*(){try{const Y=yield ne(H);if(Y)return yield F(Y.name),Y}catch(Y){throw console.error("Failed to start DM:",Y),Y}}),oe=()=>ue(this,null,function*(){try{const H=yield Ke(`${ms}.get_user_dm_rooms`);return(H==null?void 0:H.rooms)||[]}catch(H){return console.error("Failed to get DM rooms:",H),[]}}),re=Z(()=>t.value.filter(H=>H.room_type==="Private"&&H.is_dm)),te=()=>ue(this,null,function*(){try{const H=yield Ke("frappe.auth.get_logged_user");g.value=(H==null?void 0:H.message)||H||"Administrator"}catch(H){g.value="Administrator"}}),K=()=>{typeof frappe!="undefined"&&frappe.realtime&&(frappe.realtime.on("mkaguzi_chat_message",H=>{e.value&&H.room===e.value.name&&!r.value.some(B=>{var ae;return B.name===((ae=H.message)==null?void 0:ae.name)})&&H.message&&r.value.push(H.message)}),frappe.realtime.on("mkaguzi_message_updated",H=>{if(e.value&&H.room===e.value.name){const Y=r.value.findIndex(B=>{var ae;return B.name===((ae=H.message)==null?void 0:ae.name)});Y!==-1&&H.message&&(r.value[Y]=ge(ge({},r.value[Y]),H.message))}}),frappe.realtime.on("mkaguzi_message_deleted",H=>{e.value&&H.room===e.value.name&&(r.value=r.value.filter(Y=>Y.name!==H.message_name))}))},le=()=>{typeof frappe!="undefined"&&frappe.realtime&&(frappe.realtime.off("mkaguzi_chat_message"),frappe.realtime.off("mkaguzi_message_updated"),frappe.realtime.off("mkaguzi_message_deleted"))};return te(),{rooms:t,selectedRoom:e,currentRoom:n,messages:r,participants:s,users:i,loading:a,roomsLoading:o,messagesLoading:l,usersLoading:d,sendingMessage:c,hasMoreMessages:f,error:p,aiSettings:h,indexStats:m,currentUser:g,engagementRooms:_,directRooms:k,groupRooms:w,dmRooms:re,isAiEnabled:S,selectedModel:C,fetchRooms:A,loadRooms:M,loadSettings:E,fetchUsers:P,createRoom:I,selectRoom:F,loadMessages:L,loadMoreMessages:z,sendMessage:N,editMessage:q,deleteMessage:V,addReaction:O,removeReaction:X,getAiResponse:j,testAiConnection:U,indexDocuments:G,getIndexStats:ee,getActiveEngagements:ie,getOrCreateDM:ne,startDirectMessage:ce,getUserDMRooms:oe,setupRealtime:K,cleanupRealtime:le}}const cWt={class:"flex h-full bg-gray-50"},fWt={class:"flex-1 flex flex-col bg-white"},pWt={class:"flex-1 flex overflow-hidden"},hWt={class:"flex-1 flex flex-col"},mWt={key:1,class:"flex-1 flex items-center justify-center text-gray-500"},gWt={class:"text-center"},vWt={class:"space-y-4"},yWt={class:"flex items-center space-x-3"},bWt={__name:"ChatContainer",props:{initialRoomName:{type:String,default:null},engagementFilter:{type:String,default:null}},emits:["room-changed"],setup(t,{emit:e}){const n=t,r=e,{rooms:s,selectedRoom:i,messages:a,participants:o,users:l,aiSettings:d,roomsLoading:c,messagesLoading:f,usersLoading:p,hasMoreMessages:h,sendingMessage:m,currentUser:g,fetchRooms:y,fetchUsers:x,selectRoom:_,sendMessage:k,loadMoreMessages:w,deleteMessage:S,editMessage:C,getOrCreateDM:A,isAiEnabled:M,loadSettings:E}=dWt(),P=Z(()=>{var Ce;return(Ce=i.value)==null?void 0:Ce.name}),I=Z(()=>g.value),{isConnected:F,typingUsers:L,onlineUsers:z,sendTyping:N,emitMessageCreated:q,emitMessageUpdated:V,emitMessageDeleted:O,on:X,joinRoom:j,leaveRoom:U}=uWt(P,I),G=Q(!1),ee=Q(!1),ie=Q(!1),ne=Q(!1),ce=Q(!1),oe=Q(null),re=Q("all"),te=Q(""),K=Q({room_name:"",description:"",is_ai_enabled:!0,engagement:null}),le=Q({user:"",role:"Member"}),H=Q({name:"",content:""}),Y=Q(!1),B=Q(!1),ae=Q(!1);Z(()=>{const Ce=new Map;return s.value.forEach(Le=>{Le.engagement&&Ce.set(Le.engagement,Le.engagement_name||Le.engagement)}),Array.from(Ce,([Le,Pt])=>({value:Le,label:Pt}))});const be=Z(()=>{if(!i.value||!g.value)return!1;const Ce=o.value.find(Le=>Le.user===g.value);return(Ce==null?void 0:Ce.role)==="Admin"||i.value.created_by===g.value}),fe=Z(()=>{var Ce;return M.value&&((Ce=i.value)==null?void 0:Ce.is_ai_enabled)!==!1}),me=Z(()=>{let Ce=s.value;if(re.value==="dm"?Ce=Ce.filter(Le=>Le.is_dm):re.value==="engagement"?Ce=Ce.filter(Le=>Le.room_type==="Engagement"):re.value==="group"&&(Ce=Ce.filter(Le=>Le.room_type==="Group")),te.value){const Le=te.value.toLowerCase();Ce=Ce.filter(Pt=>{var $e,Ae;return(($e=Pt.room_name)==null?void 0:$e.toLowerCase().includes(Le))||((Ae=Pt.linked_engagement)==null?void 0:Ae.toLowerCase().includes(Le))})}return Ce}),ye=Z(()=>{const Ce={};return i.value&&L.value.length>0&&(Ce[i.value.name]=L.value),Ce});_i("currentUser",g),_i("isConnected",F);const Ee=()=>{N(!0)},Re=Ce=>{oe.value=Ce},Ye=Ce=>{H.value={name:Ce.name,content:Ce.content},ne.value=!0},Xe=Ce=>ue(this,null,function*(){var Le;if(confirm("Are you sure you want to delete this message?"))try{yield S(Ce.name),O(Ce.name),(Le=window.frappe)==null||Le.show_alert("Message deleted",5,"green")}catch(Pt){toast({title:"Failed to delete message",variant:"error"})}}),st=Pt=>ue(this,[Pt],function*({content:Ce,isAiPrompt:Le}){var $e,Ae;if(Ce.trim()){N(!1);try{const ke=yield k(Ce,($e=oe.value)==null?void 0:$e.name,Le);oe.value=null,q(ke)}catch(ke){(Ae=window.frappe)==null||Ae.show_alert("Failed to send message",5,"red")}}}),it=()=>ue(this,null,function*(){var Ce,Le;if(H.value.content.trim()){ae.value=!0;try{const Pt=yield C(H.value.name,H.value.content);V(Pt),ne.value=!1,(Ce=window.frappe)==null||Ce.show_alert("Message updated",5,"green")}catch(Pt){(Le=window.frappe)==null||Le.show_alert("Failed to update message",5,"red")}finally{ae.value=!1}}}),Fe=()=>ue(this,null,function*(){var Ce,Le,Pt;if(!K.value.room_name.trim()){(Ce=window.frappe)==null||Ce.show_alert("Room name is required",5,"red");return}Y.value=!0;try{const $e=yield Ke("mkaguzi.mkaguzi.api.chat.create_room",K.value);yield y(),_($e.message),ee.value=!1,K.value={room_name:"",description:"",is_ai_enabled:!0,engagement:null},(Le=window.frappe)==null||Le.show_alert("Room created successfully",5,"green")}catch($e){(Pt=window.frappe)==null||Pt.show_alert($e.message||"Failed to create room",5,"red")}finally{Y.value=!1}}),Pe=()=>ue(this,null,function*(){var Ce,Le,Pt;if(!le.value.user){(Ce=window.frappe)==null||Ce.show_alert("User is required",5,"red");return}B.value=!0;try{yield Ke("mkaguzi.mkaguzi.api.chat.add_participant",{room_name:i.value.name,user:le.value.user,role:le.value.role}),yield _(i.value),ie.value=!1,le.value={user:"",role:"Member"},(Le=window.frappe)==null||Le.show_alert("Participant added",5,"green")}catch($e){(Pt=window.frappe)==null||Pt.show_alert($e.message||"Failed to add participant",5,"red")}finally{B.value=!1}}),je=Ce=>ue(this,null,function*(){var Le,Pt;if(confirm(`Remove ${Ce.user_name||Ce.user} from this room?`))try{yield Ke("mkaguzi.mkaguzi.api.chat.remove_participant",{room_name:i.value.name,user:Ce.user}),yield _(i.value),(Le=window.frappe)==null||Le.show_alert("Participant removed",5,"green")}catch($e){(Pt=window.frappe)==null||Pt.show_alert($e.message||"Failed to remove participant",5,"red")}}),Ie=Ce=>ue(this,null,function*(){var Pt,$e;const Le=Ce.role==="Admin"?"Member":"Admin";try{yield Ke("mkaguzi.mkaguzi.api.chat.update_participant_role",{room_name:i.value.name,user:Ce.user,role:Le}),yield _(i.value),(Pt=window.frappe)==null||Pt.show_alert(`${Ce.user_name||Ce.user} is now ${Le}`,5,"green")}catch(Ae){($e=window.frappe)==null||$e.show_alert(Ae.message||"Failed to update role",5,"red")}}),Se=Ce=>ue(this,null,function*(){var Pt,$e;const Le=Ce.email||Ce.user||Ce;if(!(!Le||Le===g.value))try{const Ae=yield A(Le);Ae&&(yield _(Ae),(Pt=window.frappe)==null||Pt.show_alert(`Direct message with ${Ce.full_name||Ce.user_name||Le}`,5,"green"))}catch(Ae){console.error("Failed to start DM:",Ae);const ke=(Ae==null?void 0:Ae.message)||(typeof Ae=="string"?Ae:"Failed to start direct message");($e=window.frappe)==null||$e.show_alert(ke,5,"red")}});return X("messageCreated",Ce=>{var Le;console.log("messageCreated callback called with data:",Ce),i.value&&Ce.room===i.value.name?(console.log("Message is for current room, adding to messages"),!a.value.some($e=>{var Ae;return $e.name===((Ae=Ce.message)==null?void 0:Ae.name)})&&Ce.message?(console.log("Adding message to messages array:",Ce.message),a.value.push(Ce.message)):console.log("Message already exists or no message data")):console.log("Message not for current room:",Ce.room,"current room:",(Le=i.value)==null?void 0:Le.name)}),X("messageUpdated",Ce=>{if(i.value&&Ce.room===i.value.name){const Le=a.value.findIndex(Pt=>{var $e;return Pt.name===(($e=Ce.message)==null?void 0:$e.name)});Le!==-1&&Ce.message&&(a.value[Le]=ge(ge({},a.value[Le]),Ce.message))}}),X("messageDeleted",Ce=>{i.value&&Ce.room===i.value.name&&(a.value=a.value.filter(Le=>Le.name!==Ce.message_name))}),et(i,(Ce,Le)=>ue(this,null,function*(){Ce&&(Le&&(yield U()),yield j(),r("room-changed",Ce))})),yt(()=>ue(this,null,function*(){if(yield y(),yield x(),yield E(),n.initialRoomName){const Ce=s.value.find(Le=>Le.name===n.initialRoomName);Ce&&_(Ce)}})),(Ce,Le)=>{var Pt;return T(),R("div",cWt,[b(v(kHt),{rooms:me.value,users:v(l),"selected-room":v(i),"active-tab":re.value,"search-query":te.value,loading:v(c),"users-loading":v(p),"is-ai-enabled":fe.value,"selected-model":(Pt=v(d))==null?void 0:Pt.selected_model,"typing-users":ye.value,"online-users":v(z),onSelectRoom:v(_),onStartDm:Se,onCreateRoom:Le[0]||(Le[0]=$e=>ee.value=!0),"onUpdate:activeTab":Le[1]||(Le[1]=$e=>re.value=$e),"onUpdate:searchQuery":Le[2]||(Le[2]=$e=>te.value=$e)},null,8,["rooms","users","selected-room","active-tab","search-query","loading","users-loading","is-ai-enabled","selected-model","typing-users","online-users","onSelectRoom"]),u("div",fWt,[v(i)?(T(),R(xe,{key:0},[b(v(OHt),{room:v(i),"is-ai-enabled":fe.value,"online-count":v(z).length,"typing-users":v(L),onOpenSettings:Le[3]||(Le[3]=$e=>ce.value=!0),onShowParticipants:Le[4]||(Le[4]=$e=>G.value=!G.value)},null,8,["room","is-ai-enabled","online-count","typing-users"]),u("div",pWt,[u("div",hWt,[b(v(wqt),{messages:v(a),"current-user":v(g),loading:v(f),"has-more":v(h),"typing-users":v(L),"is-ai-enabled":fe.value,onLoadMore:v(w),onReply:Re,onEdit:Ye,onDelete:Xe},null,8,["messages","current-user","loading","has-more","typing-users","is-ai-enabled","onLoadMore"]),b(v(Uqt),{"replying-to":oe.value,"is-ai-enabled":fe.value,loading:v(m),onSend:st,onCancelReply:Le[5]||(Le[5]=$e=>oe.value=null),onTyping:Ee},null,8,["replying-to","is-ai-enabled","loading"])]),b(zS,{name:"slide"},{default:D(()=>[G.value?(T(),he(v(lWt),{key:0,participants:v(o),"online-users":v(z),"typing-users":v(L).map($e=>$e.user),"current-user":v(g),"is-admin":be.value,onClose:Le[6]||(Le[6]=$e=>G.value=!1),onAddParticipant:Le[7]||(Le[7]=$e=>ie.value=!0),onRemoveParticipant:je,onMakeAdmin:Ie,onDirectMessage:Se},null,8,["participants","online-users","typing-users","current-user","is-admin"])):se("",!0)]),_:1})])],64)):(T(),R("div",mWt,[u("div",gWt,[b(v(EY),{class:"w-16 h-16 mx-auto mb-4 text-gray-300"}),Le[21]||(Le[21]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No room selected",-1)),Le[22]||(Le[22]=u("p",{class:"text-sm"},"Select a room from the sidebar or create a new one",-1))])]))]),b(v(jt),{modelValue:ee.value,"onUpdate:modelValue":Le[13]||(Le[13]=$e=>ee.value=$e),options:{title:"Create Chat Room"}},{"body-content":D(()=>[u("div",vWt,[b(v(ve),{modelValue:K.value.room_name,"onUpdate:modelValue":Le[8]||(Le[8]=$e=>K.value.room_name=$e),label:"Room Name",placeholder:"Enter room name",required:""},null,8,["modelValue"]),b(v(ve),{modelValue:K.value.description,"onUpdate:modelValue":Le[9]||(Le[9]=$e=>K.value.description=$e),label:"Description",type:"textarea",placeholder:"Optional description"},null,8,["modelValue"]),u("div",yWt,[b(v(St),{modelValue:K.value.is_ai_enabled,"onUpdate:modelValue":Le[10]||(Le[10]=$e=>K.value.is_ai_enabled=$e)},null,8,["modelValue"]),Le[23]||(Le[23]=u("span",{class:"text-sm text-gray-700"},"Enable AI Assistant",-1))]),b(v(ve),{modelValue:K.value.engagement,"onUpdate:modelValue":Le[11]||(Le[11]=$e=>K.value.engagement=$e),label:"Link to Engagement",type:"link",options:{doctype:"Audit Engagement"}},null,8,["modelValue"])])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:Le[12]||(Le[12]=$e=>ee.value=!1)},{default:D(()=>[...Le[24]||(Le[24]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:Fe,loading:Y.value},{default:D(()=>[...Le[25]||(Le[25]=[W("Create Room",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:ie.value,"onUpdate:modelValue":Le[17]||(Le[17]=$e=>ie.value=$e),options:{title:"Add Participant"}},{"body-content":D(()=>[b(v(ve),{modelValue:le.value.user,"onUpdate:modelValue":Le[14]||(Le[14]=$e=>le.value.user=$e),label:"User",type:"link",options:{doctype:"User"},required:""},null,8,["modelValue"]),b(v(ve),{modelValue:le.value.role,"onUpdate:modelValue":Le[15]||(Le[15]=$e=>le.value.role=$e),label:"Role",type:"select",options:["Member","Admin"],class:"mt-4"},null,8,["modelValue"])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:Le[16]||(Le[16]=$e=>ie.value=!1)},{default:D(()=>[...Le[26]||(Le[26]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:Pe,loading:B.value},{default:D(()=>[...Le[27]||(Le[27]=[W("Add",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:ne.value,"onUpdate:modelValue":Le[20]||(Le[20]=$e=>ne.value=$e),options:{title:"Edit Message"}},{"body-content":D(()=>[b(v(ve),{modelValue:H.value.content,"onUpdate:modelValue":Le[18]||(Le[18]=$e=>H.value.content=$e),type:"textarea",rows:"4"},null,8,["modelValue"])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:Le[19]||(Le[19]=$e=>ne.value=!1)},{default:D(()=>[...Le[28]||(Le[28]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:it,loading:ae.value},{default:D(()=>[...Le[29]||(Le[29]=[W("Save",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])])}}},xWt=It(bWt,[["__scopeId","data-v-09aede5d"]]),_Wt={class:"chat-page-container"},wWt={__name:"MkaguziChat",setup(t){const e=ta(),n=_n(),r=Z(()=>e.params.roomId||e.query.room||null),s=Z(()=>e.query.engagement||null),i=a=>{a!=null&&a.name&&n.replace({name:"MkaguziChatRoom",params:{roomId:a.name},query:e.query.engagement?{engagement:e.query.engagement}:void 0})};return yt(()=>{document.title="Chat - Mkaguzi"}),(a,o)=>(T(),R("div",_Wt,[b(v(xWt),{"initial-room-name":r.value,"engagement-filter":s.value,onRoomChanged:i},null,8,["initial-room-name","engagement-filter"])]))}},vW=It(wWt,[["__scopeId","data-v-c9a5857c"]]),kWt={class:"regulatory-calendar-page"},SWt={class:"page-header"},CWt={class:"header-content"},AWt={class:"page-title"},TWt={class:"header-actions"},$Wt={class:"notice-section"},MWt={class:"notice-card"},EWt={class:"calendar-navigation"},DWt={class:"nav-controls"},RWt={class:"current-month"},PWt={class:"month-selector"},IWt={class:"calendar-container"},OWt={class:"calendar-header"},LWt={class:"calendar-body"},VWt=["onClick"],NWt={class:"day-number"},jWt={class:"day-events"},FWt=["title"],BWt={key:0,class:"event-more"},zWt={key:0,class:"day-details-section"},UWt={class:"day-details-header"},HWt={key:0,class:"no-events"},qWt={key:1,class:"events-list"},WWt={class:"event-header"},GWt={class:"event-icon"},YWt={class:"event-meta"},KWt={class:"event-description"},XWt={key:0,class:"event-details"},QWt={__name:"RegulatoryCalendar",setup(t){const e=Q(new Date().getMonth()),n=Q(null),r=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=Q([{id:1,month:0,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for December 2024",details:["Monthly PAYE returns","PAYE tax payments"]},{id:2,month:0,day:9,type:"Social",title:"NSSF Payments",description:"NSSF payments for December 2024"},{id:3,month:0,day:9,type:"Levy",title:"SHIF Payments",description:"SHIF payments for December 2024"},{id:4,month:0,day:9,type:"Levy",title:"Catering Levy",description:"Catering levy returns and payment for December 2024"},{id:5,month:0,day:9,type:"Levy",title:"NITA Levy",description:"NITA Levy for December 2024"},{id:6,month:0,day:13,type:"Levy",title:"AHL Payments",description:"Affordable Housing Levy (AHL) payments for December 2024"},{id:7,month:0,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for December 2024"},{id:8,month:0,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for December 2024"},{id:9,month:0,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments (for relevant year-ends)"},{id:10,month:0,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for July 2024 year-ends"},{id:11,month:0,day:31,type:"Corporate",title:"Transfer Pricing Documents",description:"Submit Transfer Pricing Master/Local File for July 2024 year-ends"},{id:12,month:0,day:31,type:"Corporate",title:"CbC Report",description:"Submit Country by Country (CbC) Report for January 2024 year-ends"},{id:13,month:0,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for September 2024 year-ends"},{id:14,month:1,day:7,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for January 2025"},{id:15,month:1,day:7,type:"Social",title:"SHIF, NSSF & Levies",description:"SHIF, NSSF, Catering levy, and NITA Levy for January 2025"},{id:16,month:1,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for January 2025"},{id:17,month:1,day:14,type:"HELB",title:"HELB Payments",description:"HELB payments for January 2025"},{id:18,month:1,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:19,month:1,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for January 2025"},{id:20,month:1,day:28,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax Returns for August 2024 year-ends"},{id:21,month:1,day:28,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:22,month:1,day:28,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for October 2024 year-ends"},{id:23,month:2,day:7,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for February 2025"},{id:24,month:2,day:7,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for February 2025"},{id:25,month:2,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for February 2025"},{id:26,month:2,day:14,type:"HELB",title:"HELB Payments",description:"HELB payments for February 2025"},{id:27,month:2,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:28,month:2,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for February 2025"},{id:29,month:2,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for September 2024 year-ends"},{id:30,month:2,day:31,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:31,month:2,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for November 2024 year-ends"},{id:32,month:3,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for March 2025"},{id:33,month:3,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for March 2025"},{id:34,month:3,day:11,type:"Levy",title:"AHL Payments",description:"AHL payments for March 2025"},{id:35,month:3,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for March 2025"},{id:36,month:3,day:17,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for March 2025"},{id:37,month:3,day:17,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:38,month:3,day:17,type:"PAYE",title:"Individual Instalment Tax",description:"First instalment tax payment for individuals (2025 year of income)"},{id:39,month:3,day:30,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for October 2024 year-ends"},{id:40,month:3,day:30,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:41,month:3,day:30,type:"PAYE",title:"Individual Tax Balance",description:"Individuals: Pay balance of tax for 2024 year of income"},{id:42,month:4,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for April 2025"},{id:43,month:4,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for April 2025"},{id:44,month:4,day:14,type:"Levy",title:"AHL Payments",description:"AHL payments for April 2025"},{id:45,month:4,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for April 2025"},{id:46,month:4,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:47,month:4,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for April 2025"},{id:48,month:4,day:30,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax Returns for November 2024 year-ends"},{id:49,month:4,day:30,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:50,month:4,day:30,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for January 2025 year-ends"},{id:51,month:5,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for May 2025"},{id:52,month:5,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for May 2025"},{id:53,month:5,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for May 2025"},{id:54,month:5,day:13,type:"HELB",title:"HELB Payments",description:"HELB payments for May 2025"},{id:55,month:5,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:56,month:5,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for May 2025"},{id:57,month:5,day:20,type:"PAYE",title:"Individual Instalment Tax",description:"Second instalment tax payment for individuals (2025 year of income)"},{id:58,month:5,day:30,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax Returns for December 2024 year-ends"},{id:59,month:5,day:30,type:"PAYE",title:"Individual Income Tax Returns",description:"Individuals: Submit income tax returns for year 2024"},{id:60,month:5,day:30,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:61,month:5,day:30,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for February 2025 year-ends"},{id:62,month:6,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for June 2025"},{id:63,month:6,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for June 2025"},{id:64,month:6,day:11,type:"Levy",title:"AHL Payments",description:"AHL payments for June 2025"},{id:65,month:6,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for June 2025"},{id:66,month:6,day:18,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for June 2025"},{id:67,month:6,day:18,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments (for relevant year-ends)"},{id:68,month:6,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for January 2025 year-ends"},{id:69,month:6,day:31,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:70,month:6,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for March 2025 year-ends"},{id:71,month:7,day:8,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for July 2025"},{id:72,month:7,day:8,type:"Social",title:"SHIF, NSSF & Levies",description:"SHIF, NSSF, Catering levy, and NITA Levy for July 2025"},{id:73,month:7,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for July 2025"},{id:74,month:7,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for July 2025"},{id:75,month:7,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:76,month:7,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for July 2025"},{id:77,month:7,day:29,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for February 2025 year-ends"},{id:78,month:7,day:29,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:79,month:7,day:29,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for April 2025 year-ends"},{id:80,month:8,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for August 2025"},{id:81,month:8,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for August 2025"},{id:82,month:8,day:11,type:"Levy",title:"AHL Payments",description:"AHL payments for August 2025"},{id:83,month:8,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for August 2025"},{id:84,month:8,day:19,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:85,month:8,day:19,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for August 2025"},{id:86,month:8,day:19,type:"PAYE",title:"Individual Instalment Tax",description:"Third instalment tax payment for individuals (2025 year of income)"},{id:87,month:8,day:30,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for March 2025 year-ends"},{id:88,month:8,day:30,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:89,month:8,day:30,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for May 2025 year-ends"},{id:90,month:9,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for September 2025"},{id:91,month:9,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for September 2025"},{id:92,month:9,day:14,type:"Levy",title:"AHL Payments",description:"AHL payments for September 2025"},{id:93,month:9,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for September 2025"},{id:94,month:9,day:17,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:95,month:9,day:17,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for September 2025"},{id:96,month:9,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for April 2025 year-ends"},{id:97,month:9,day:31,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:98,month:9,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for June 2025 year-ends"},{id:99,month:10,day:7,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for October 2025"},{id:100,month:10,day:7,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for October 2025"},{id:101,month:10,day:13,type:"Levy",title:"AHL Payments",description:"AHL payments for October 2025"},{id:102,month:10,day:14,type:"HELB",title:"HELB Payments",description:"HELB payments for October 2025"},{id:103,month:10,day:20,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:104,month:10,day:20,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for October 2025"},{id:105,month:10,day:28,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for May 2025 year-ends"},{id:106,month:10,day:28,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:107,month:10,day:28,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for July 2025 year-ends"},{id:108,month:11,day:9,type:"PAYE",title:"PAYE Payments & Returns",description:"PAYE payments and returns for November 2025"},{id:109,month:11,day:9,type:"Social",title:"NSSF, SHIF & Levies",description:"NSSF, SHIF, Catering levy, and NITA Levy for November 2025"},{id:110,month:11,day:11,type:"Levy",title:"AHL Payments",description:"AHL payments for November 2025"},{id:111,month:11,day:15,type:"HELB",title:"HELB Payments",description:"HELB payments for November 2025"},{id:112,month:11,day:19,type:"Corporate",title:"Instalment Tax Payments",description:"Instalment tax payments"},{id:113,month:11,day:19,type:"VAT",title:"VAT & Tax Returns",description:"Submit returns and pay VAT, Excise Duty, RRI, SEPT, and Turnover tax for November 2025"},{id:114,month:11,day:19,type:"PAYE",title:"Individual Instalment Tax",description:"Fourth instalment tax payment for individuals (2025 year of income)"},{id:115,month:11,day:31,type:"Corporate",title:"Corporate Income Tax Returns",description:"Submit Corporate Income Tax returns for June 2025 year-ends"},{id:116,month:11,day:31,type:"Corporate",title:"Transfer Pricing/CbC",description:"Submit Transfer Pricing/CbC documents for relevant year-ends"},{id:117,month:11,day:31,type:"Corporate",title:"Tax Balance Payment",description:"Pay balance of tax for August 2025 year-ends"}]),a=Z(()=>new Date(2025,e.value+1,0).getDate()),o=Z(()=>new Date(2025,e.value,1).getDay()),l=Z(()=>i.value.filter(S=>S.month===e.value)),d=Z(()=>r.map((S,C)=>({label:`${S} 2025`,value:C}))),c=S=>l.value.filter(C=>C.day===S),f=S=>{n.value=n.value===S?null:S},p=S=>{const C=new Date;return C.getFullYear()===2025&&C.getMonth()===e.value&&C.getDate()===S},h=()=>{e.value>0&&(e.value--,n.value=null)},m=()=>{e.value<11&&(e.value++,n.value=null)},g=()=>{n.value=null},y=S=>({PAYE:"paye",VAT:"vat",Corporate:"corporate",Social:"social",Levy:"levy",HELB:"helb"})[S]||"default",x=S=>({PAYE:"blue",VAT:"green",Corporate:"purple",Social:"orange",Levy:"gray",HELB:"red"})[S]||"gray",_=S=>({PAYE:rb,VAT:ab,Corporate:Ol,Social:Jr,Levy:vt,HELB:Ns})[S]||vt,k=()=>{console.log("Export calendar functionality")},w=()=>{window.print()};return yt(()=>{const S=new Date;S.getFullYear()===2025&&(e.value=S.getMonth())}),(S,C)=>(T(),R("div",kWt,[u("div",SWt,[u("div",CWt,[u("h1",AWt,[b(v(rr),{class:"title-icon"}),C[2]||(C[2]=W(" Regulatory Calendar 2025 ",-1))]),C[3]||(C[3]=u("p",{class:"page-description"}," Comprehensive Kenyan tax compliance calendar with all statutory deadlines and payment requirements ",-1))]),u("div",TWt,[b(v(J),{variant:"outline",onClick:k},{default:D(()=>[b(v(xn)),C[4]||(C[4]=W(" Export Calendar ",-1))]),_:1}),b(v(J),{variant:"outline",onClick:w},{default:D(()=>[b(v(JD)),C[5]||(C[5]=W(" Print Calendar ",-1))]),_:1})])]),u("div",$Wt,[u("div",MWt,[b(v(rn),{class:"notice-icon"}),C[6]||(C[6]=u("div",{class:"notice-content"},[u("h3",null,"General Ongoing Rule"),u("p",null,[u("strong",null,"DAT, WHT, and WH VAT:"),W(" Payments must be made within 5 working days after making the deduction or accrual.")])],-1))])]),u("div",EWt,[u("div",DWt,[b(v(J),{variant:"outline",size:"sm",onClick:h,disabled:e.value===0},{default:D(()=>[b(v(gr)),C[7]||(C[7]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("h2",RWt,$(r[e.value])+" 2025",1),b(v(J),{variant:"outline",size:"sm",onClick:m,disabled:e.value===11},{default:D(()=>[C[8]||(C[8]=W(" Next ",-1)),b(v(sr))]),_:1},8,["disabled"])]),u("div",PWt,[b(v(Qe),{modelValue:e.value,"onUpdate:modelValue":C[0]||(C[0]=A=>e.value=A),options:d.value,onChange:g},null,8,["modelValue","options"])])]),u("div",IWt,[u("div",OWt,[(T(),R(xe,null,_e(s,A=>u("div",{key:A,class:"header-day"},$(A),1)),64))]),u("div",LWt,[(T(!0),R(xe,null,_e(o.value,A=>(T(),R("div",{key:"empty-"+A,class:"calendar-day empty"}))),128)),(T(!0),R(xe,null,_e(a.value,A=>(T(),R("div",{key:A,class:pe(["calendar-day",{"has-events":c(A).length>0},{today:p(A)}]),onClick:M=>f(A)},[u("div",NWt,$(A),1),u("div",jWt,[(T(!0),R(xe,null,_e(c(A).slice(0,2),M=>(T(),R("div",{key:M.id,class:pe(["event-item",y(M.type)]),title:M.description},$(M.title),11,FWt))),128)),c(A).length>2?(T(),R("div",BWt," +"+$(c(A).length-2)+" more ",1)):se("",!0)])],10,VWt))),128))])]),n.value?(T(),R("div",zWt,[u("div",UWt,[u("h3",null,$(r[e.value])+" "+$(n.value)+", 2025",1),b(v(J),{variant:"ghost",onClick:C[1]||(C[1]=A=>n.value=null)},{default:D(()=>[b(v(ht))]),_:1})]),c(n.value).length===0?(T(),R("div",HWt,[b(v(rr),{class:"no-events-icon"}),C[9]||(C[9]=u("p",null,"No regulatory deadlines on this date",-1))])):(T(),R("div",qWt,[(T(!0),R(xe,null,_e(c(n.value),A=>(T(),R("div",{key:A.id,class:pe(["event-detail-card",y(A.type)])},[u("div",WWt,[u("div",GWt,[(T(),he(At(_(A.type))))]),u("div",YWt,[u("h4",null,$(A.title),1),b(v(De),{variant:x(A.type)},{default:D(()=>[W($(A.type),1)]),_:2},1032,["variant"])])]),u("div",KWt,$(A.description),1),A.details?(T(),R("div",XWt,[(T(!0),R(xe,null,_e(A.details,M=>(T(),R("div",{key:M,class:"event-detail-item"},"  "+$(M),1))),128))])):se("",!0)],2))),128))]))])):se("",!0),C[10]||(C[10]=fr('<div class="legend-section" data-v-bd898967><h3 data-v-bd898967>Legend</h3><div class="legend-grid" data-v-bd898967><div class="legend-item" data-v-bd898967><div class="legend-color paye" data-v-bd898967></div><span data-v-bd898967>PAYE</span></div><div class="legend-item" data-v-bd898967><div class="legend-color vat" data-v-bd898967></div><span data-v-bd898967>VAT &amp; Other Taxes</span></div><div class="legend-item" data-v-bd898967><div class="legend-color corporate" data-v-bd898967></div><span data-v-bd898967>Corporate Income Tax</span></div><div class="legend-item" data-v-bd898967><div class="legend-color social" data-v-bd898967></div><span data-v-bd898967>Social Security &amp; NSSF</span></div><div class="legend-item" data-v-bd898967><div class="legend-color levy" data-v-bd898967></div><span data-v-bd898967>Levies &amp; Other</span></div><div class="legend-item" data-v-bd898967><div class="legend-color helb" data-v-bd898967></div><span data-v-bd898967>HELB</span></div></div></div>',1))]))}},ZWt=It(QWt,[["__scopeId","data-v-bd898967"]]),JWt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},eGt={class:"bg-white p-4 rounded-lg border shadow-sm"},tGt={class:"flex items-center justify-between"},nGt={class:"text-2xl font-bold"},rGt={class:"bg-white p-4 rounded-lg border shadow-sm"},sGt={class:"flex items-center justify-between"},iGt={class:"text-2xl font-bold"},aGt={class:"bg-white p-4 rounded-lg border shadow-sm"},oGt={class:"flex items-center justify-between"},lGt={class:"text-2xl font-bold"},uGt={class:"bg-white p-4 rounded-lg border shadow-sm"},dGt={class:"flex items-center justify-between"},cGt={__name:"ReportsStats",props:{activeAuditReports:{type:Array,default:()=>[]},activeBoardReports:{type:Array,default:()=>[]},activeDashboards:{type:Array,default:()=>[]},complianceScore:{type:Number,default:0}},setup(t){const e=n=>n>=80?"text-green-600":n>=60?"text-yellow-600":"text-red-600";return(n,r)=>(T(),R("div",JWt,[u("div",eGt,[u("div",tGt,[u("div",null,[r[0]||(r[0]=u("p",{class:"text-sm text-gray-600"},"Audit Reports",-1)),u("p",nGt,$(t.activeAuditReports.length),1)]),b(v(vt),{class:"w-8 h-8 text-blue-500"})])]),u("div",rGt,[u("div",sGt,[u("div",null,[r[1]||(r[1]=u("p",{class:"text-sm text-gray-600"},"Board Reports",-1)),u("p",iGt,$(t.activeBoardReports.length),1)]),b(v(Jr),{class:"w-8 h-8 text-green-500"})])]),u("div",aGt,[u("div",oGt,[u("div",null,[r[2]||(r[2]=u("p",{class:"text-sm text-gray-600"},"Active Dashboards",-1)),u("p",lGt,$(t.activeDashboards.length),1)]),b(v(hr),{class:"w-8 h-8 text-purple-500"})])]),u("div",uGt,[u("div",dGt,[u("div",null,[r[3]||(r[3]=u("p",{class:"text-sm text-gray-600"},"Avg Compliance Score",-1)),u("p",{class:pe(["text-2xl font-bold",e(t.complianceScore)])},$(Math.round(t.complianceScore))+"% ",3)]),b(v($l),{class:"w-8 h-8 text-orange-500"})])])]))}},fGt={class:"p-6"},pGt={class:"flex justify-between items-center mb-6"},hGt={class:"flex gap-2"},mGt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},gGt={class:"bg-white rounded-lg border shadow-sm"},vGt={class:"p-4 border-b"},yGt={class:"flex justify-between items-center"},bGt={class:"p-4"},xGt={class:"space-y-3"},_Gt={class:"font-medium"},wGt={class:"text-sm text-gray-600"},kGt={class:"flex items-center gap-2"},SGt={key:0,class:"text-center py-4 text-gray-500"},CGt={class:"bg-white rounded-lg border shadow-sm"},AGt={class:"p-4 border-b"},TGt={class:"flex justify-between items-center"},$Gt={class:"p-4"},MGt={class:"space-y-3"},EGt={class:"font-medium"},DGt={class:"text-sm text-gray-600"},RGt={class:"flex items-center gap-2"},PGt={key:0,class:"text-center py-4 text-gray-500"},IGt={class:"bg-white rounded-lg border shadow-sm mb-6"},OGt={class:"p-4 border-b"},LGt={class:"flex justify-between items-center"},VGt={class:"flex gap-2"},NGt={class:"p-4"},jGt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},FGt={class:"flex items-center justify-between mb-3"},BGt={class:"flex items-center gap-2"},zGt={class:"font-medium"},UGt={class:"space-y-2 text-sm"},HGt={class:"text-gray-600"},qGt={class:"grid grid-cols-2 gap-2"},WGt={class:"font-medium"},GGt={class:"font-medium"},YGt={class:"font-medium"},KGt={class:"font-medium text-xs"},XGt={key:0,class:"col-span-full text-center py-8 text-gray-500"},QGt={class:"bg-white rounded-lg border shadow-sm"},ZGt={class:"p-4 border-b"},JGt={class:"flex justify-between items-center"},eYt={class:"p-4"},tYt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},nYt={class:"flex items-center justify-between mb-2"},rYt={class:"font-medium"},sYt={class:"text-sm text-gray-600 mb-2"},iYt={class:"text-xs text-gray-500"},aYt={key:0,class:"col-span-full text-center py-8 text-gray-500"},oYt={class:"space-y-4"},lYt={class:"space-y-4"},uYt={class:"flex items-center gap-2"},dYt={__name:"Reports",setup(t){const e=_oe(),n=Q(!1),r=Q(!1),s=Q(!1),i=Q({type:"audit",engagement:"",period:"",title:"",description:""}),a=Q({type:"Management Overview",title:"",description:"",timePeriod:"Current Month",isDefault:!1}),o=Z(()=>e.activeAuditReports),l=Z(()=>e.activeBoardReports),d=Z(()=>e.activeDashboards),c=Z(()=>e.dashboardKPIs),f=Z(()=>e.reportTemplates),p=Z(()=>e.loading),h=[{label:"Audit Report",value:"audit"},{label:"Board Report",value:"board"}],m=[{label:"Q1",value:"Q1"},{label:"Q2",value:"Q2"},{label:"Q3",value:"Q3"},{label:"Q4",value:"Q4"},{label:"Annual",value:"Annual"}],g=[{label:"Management Overview",value:"Management Overview"},{label:"Compliance Dashboard",value:"Compliance Dashboard"},{label:"Risk Dashboard",value:"Risk Dashboard"},{label:"Operational Dashboard",value:"Operational Dashboard"},{label:"Executive Summary",value:"Executive Summary"}],y=[{label:"Current Month",value:"Current Month"},{label:"Last Month",value:"Last Month"},{label:"Current Quarter",value:"Current Quarter"},{label:"Last Quarter",value:"Last Quarter"},{label:"Current Year",value:"Current Year"},{label:"Last Year",value:"Last Year"}],x=()=>ue(this,null,function*(){try{s.value=!0,console.log("Create audit report")}catch(L){console.error("Error creating audit report:",L)}finally{s.value=!1}}),_=()=>ue(this,null,function*(){try{s.value=!0,console.log("Create board report")}catch(L){console.error("Error creating board report:",L)}finally{s.value=!1}}),k=()=>ue(this,null,function*(){try{s.value=!0,i.value.type==="audit"?yield e.createAuditReport({engagement_reference:i.value.engagement,report_title:i.value.title,report_type:"Full Audit Report",report_status:"Draft"}):i.value.type==="board"&&(yield e.createBoardReport({report_title:i.value.title,reporting_period:i.value.period,report_type:"Board Report",report_status:"Draft",is_active:1})),n.value=!1,i.value={type:"audit",engagement:"",period:"",title:"",description:""}}catch(L){console.error("Error creating report:",L)}finally{s.value=!1}}),w=()=>ue(this,null,function*(){try{s.value=!0,yield e.createManagementDashboard({dashboard_title:a.value.title,dashboard_type:a.value.type,description:a.value.description,time_period:a.value.timePeriod,is_default:a.value.isDefault,is_active:1,kpi_section:1,compliance_section:1,chart_configuration:1}),r.value=!1,a.value={type:"Management Overview",title:"",description:"",timePeriod:"Current Month",isDefault:!1}}catch(L){console.error("Error creating dashboard:",L)}finally{s.value=!1}}),S=()=>ue(this,null,function*(){try{s.value=!0,yield e.createDefaultDashboards()}catch(L){console.error("Error creating default dashboards:",L)}finally{s.value=!1}}),C=()=>ue(this,null,function*(){try{for(const L of d.value)yield e.refreshDashboard(L.name)}catch(L){console.error("Error refreshing dashboards:",L)}}),A=()=>ue(this,null,function*(){yield e.fetchReportTemplates()}),M=L=>{console.log("View audit report:",L)},E=L=>{console.log("View board report:",L)},P=L=>{console.log("View dashboard:",L)},I=L=>({Draft:"secondary","Under Review":"warning",Approved:"success",Finalized:"success",Issued:"success",Presented:"success",Archived:"secondary"})[L]||"secondary",F=L=>L?new Date(L).toLocaleDateString():"";return yt(()=>ue(this,null,function*(){yield e.fetchAuditReports(),yield e.fetchBoardReports(),yield e.fetchManagementDashboards(),yield e.fetchDataAnalyticsDashboards(),yield e.fetchReportTemplates()})),(L,z)=>(T(),R("div",fGt,[u("div",pGt,[z[18]||(z[18]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Reports & Analytics"),u("p",{class:"text-gray-600"},"Comprehensive reporting and dashboard analytics")],-1)),u("div",hGt,[b(v(J),{onClick:z[0]||(z[0]=N=>n.value=!0),class:"flex items-center gap-2"},{default:D(()=>[b(v(nt),{class:"w-4 h-4"}),z[16]||(z[16]=W(" Create Report ",-1))]),_:1}),b(v(J),{onClick:z[1]||(z[1]=N=>r.value=!0),variant:"outline",class:"flex items-center gap-2"},{default:D(()=>[b(v(hr),{class:"w-4 h-4"}),z[17]||(z[17]=W(" Create Dashboard ",-1))]),_:1})])]),b(cGt,{"active-audit-reports":o.value,"active-board-reports":l.value,"active-dashboards":d.value,"compliance-score":c.value.complianceScore},null,8,["active-audit-reports","active-board-reports","active-dashboards","compliance-score"]),u("div",mGt,[u("div",gGt,[u("div",vGt,[u("div",yGt,[z[20]||(z[20]=u("h2",{class:"text-lg font-semibold"},"Audit Reports",-1)),b(v(J),{onClick:x,loading:s.value,variant:"outline",size:"sm"},{default:D(()=>[...z[19]||(z[19]=[W(" New Audit Report ",-1)])]),_:1},8,["loading"])])]),u("div",bGt,[u("div",xGt,[(T(!0),R(xe,null,_e(o.value.slice(0,5),N=>(T(),R("div",{key:N.name,class:"flex items-center justify-between p-3 border rounded"},[u("div",null,[u("h4",_Gt,$(N.report_title),1),u("p",wGt,$(N.report_type)+"  "+$(F(N.report_date)),1)]),u("div",kGt,[b(v(De),{variant:I(N.report_status)},{default:D(()=>[W($(N.report_status),1)]),_:2},1032,["variant"]),b(v(J),{onClick:q=>M(N),variant:"ghost",size:"sm"},{default:D(()=>[b(v(lr),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128)),o.value.length===0?(T(),R("div",SGt,[b(v(vt),{class:"w-8 h-8 mx-auto mb-2 text-gray-300"}),z[21]||(z[21]=u("p",null,"No audit reports found",-1))])):se("",!0)])])]),u("div",CGt,[u("div",AGt,[u("div",TGt,[z[23]||(z[23]=u("h2",{class:"text-lg font-semibold"},"Board Reports",-1)),b(v(J),{onClick:_,loading:s.value,variant:"outline",size:"sm"},{default:D(()=>[...z[22]||(z[22]=[W(" New Board Report ",-1)])]),_:1},8,["loading"])])]),u("div",$Gt,[u("div",MGt,[(T(!0),R(xe,null,_e(l.value.slice(0,5),N=>(T(),R("div",{key:N.name,class:"flex items-center justify-between p-3 border rounded"},[u("div",null,[u("h4",EGt,$(N.report_title),1),u("p",DGt,$(N.reporting_period)+"  "+$(N.report_type),1)]),u("div",RGt,[b(v(De),{variant:I(N.report_status)},{default:D(()=>[W($(N.report_status),1)]),_:2},1032,["variant"]),b(v(J),{onClick:q=>E(N),variant:"ghost",size:"sm"},{default:D(()=>[b(v(lr),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128)),l.value.length===0?(T(),R("div",PGt,[b(v(Jr),{class:"w-8 h-8 mx-auto mb-2 text-gray-300"}),z[24]||(z[24]=u("p",null,"No board reports found",-1))])):se("",!0)])])])]),u("div",IGt,[u("div",OGt,[u("div",LGt,[z[26]||(z[26]=u("h2",{class:"text-lg font-semibold"},"Management Dashboards",-1)),u("div",VGt,[b(v(J),{onClick:S,loading:s.value,variant:"outline",size:"sm"},{default:D(()=>[...z[25]||(z[25]=[W(" Create Defaults ",-1)])]),_:1},8,["loading"]),b(v(J),{onClick:C,loading:p.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"])])])]),u("div",NGt,[u("div",jGt,[(T(!0),R(xe,null,_e(d.value,N=>(T(),R("div",{key:N.name,class:"border rounded-lg p-4 hover:shadow-md transition-shadow"},[u("div",FGt,[u("div",BGt,[b(v(hr),{class:"w-5 h-5 text-purple-500"}),u("h4",zGt,$(N.dashboard_title),1),N.is_default?(T(),he(v(De),{key:0,variant:"success",size:"sm"},{default:D(()=>[...z[27]||(z[27]=[W("Default",-1)])]),_:1})):se("",!0)]),b(v(J),{onClick:q=>P(N),variant:"ghost",size:"sm"},{default:D(()=>[b(v(lr),{class:"w-4 h-4"})]),_:1},8,["onClick"])]),u("div",UGt,[u("p",HGt,$(N.dashboard_type),1),u("div",qGt,[u("div",null,[z[28]||(z[28]=u("span",{class:"text-gray-500"},"Engagements:",-1)),u("span",WGt,$(N.total_engagements||0),1)]),u("div",null,[z[29]||(z[29]=u("span",{class:"text-gray-500"},"Findings:",-1)),u("span",GGt,$(N.total_findings||0),1)]),u("div",null,[z[30]||(z[30]=u("span",{class:"text-gray-500"},"Compliance:",-1)),u("span",YGt,$(Math.round(N.compliance_score||0))+"%",1)]),u("div",null,[z[31]||(z[31]=u("span",{class:"text-gray-500"},"Updated:",-1)),u("span",KGt,$(F(N.last_updated)),1)])])])]))),128)),d.value.length===0?(T(),R("div",XGt,[b(v(hr),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),z[33]||(z[33]=u("p",{class:"text-lg font-medium mb-2"},"No dashboards found",-1)),z[34]||(z[34]=u("p",{class:"mb-4"},"Create default dashboards to get started with analytics",-1)),b(v(J),{onClick:S,loading:s.value},{default:D(()=>[...z[32]||(z[32]=[W(" Create Default Dashboards ",-1)])]),_:1},8,["loading"])])):se("",!0)])])]),u("div",QGt,[u("div",ZGt,[u("div",JGt,[z[35]||(z[35]=u("h2",{class:"text-lg font-semibold"},"Report Templates",-1)),b(v(J),{onClick:A,loading:p.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"])])]),u("div",eYt,[u("div",tYt,[(T(!0),R(xe,null,_e(f.value.filter(N=>N.is_active),N=>(T(),R("div",{key:N.name,class:"border rounded-lg p-4"},[u("div",nYt,[u("h4",rYt,$(N.template_name),1),N.is_default?(T(),he(v(De),{key:0,variant:"success",size:"sm"},{default:D(()=>[...z[36]||(z[36]=[W("Default",-1)])]),_:1})):se("",!0)]),u("p",sYt,$(N.template_type),1),u("p",iYt,$(N.description),1)]))),128)),f.value.filter(N=>N.is_active).length===0?(T(),R("div",aYt,[b(v(vt),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),z[37]||(z[37]=u("p",null,"No active report templates found",-1))])):se("",!0)])])]),b(v(jt),{modelValue:n.value,"onUpdate:modelValue":z[8]||(z[8]=N=>n.value=N),options:{title:"Create New Report"}},{"body-content":D(()=>[u("div",oYt,[b(v(ve),{label:"Report Type",modelValue:i.value.type,"onUpdate:modelValue":z[2]||(z[2]=N=>i.value.type=N),type:"select",options:h,required:""},null,8,["modelValue"]),i.value.type==="audit"?(T(),he(v(ve),{key:0,label:"Audit Engagement",modelValue:i.value.engagement,"onUpdate:modelValue":z[3]||(z[3]=N=>i.value.engagement=N),type:"link",doctype:"Audit Engagement",required:""},null,8,["modelValue"])):se("",!0),i.value.type==="board"?(T(),he(v(ve),{key:1,label:"Reporting Period",modelValue:i.value.period,"onUpdate:modelValue":z[4]||(z[4]=N=>i.value.period=N),type:"select",options:m,required:""},null,8,["modelValue"])):se("",!0),b(v(ve),{label:"Report Title",modelValue:i.value.title,"onUpdate:modelValue":z[5]||(z[5]=N=>i.value.title=N),type:"text",placeholder:"Enter report title",required:""},null,8,["modelValue"]),b(v(ve),{label:"Description",modelValue:i.value.description,"onUpdate:modelValue":z[6]||(z[6]=N=>i.value.description=N),type:"textarea",placeholder:"Optional description"},null,8,["modelValue"])])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:z[7]||(z[7]=N=>n.value=!1)},{default:D(()=>[...z[38]||(z[38]=[W("Cancel",-1)])]),_:1}),b(v(J),{onClick:k,loading:s.value},{default:D(()=>[...z[39]||(z[39]=[W("Create Report",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:r.value,"onUpdate:modelValue":z[15]||(z[15]=N=>r.value=N),options:{title:"Create New Dashboard"}},{"body-content":D(()=>[u("div",lYt,[b(v(ve),{label:"Dashboard Type",modelValue:a.value.type,"onUpdate:modelValue":z[9]||(z[9]=N=>a.value.type=N),type:"select",options:g,required:""},null,8,["modelValue"]),b(v(ve),{label:"Dashboard Title",modelValue:a.value.title,"onUpdate:modelValue":z[10]||(z[10]=N=>a.value.title=N),type:"text",placeholder:"Enter dashboard title",required:""},null,8,["modelValue"]),b(v(ve),{label:"Description",modelValue:a.value.description,"onUpdate:modelValue":z[11]||(z[11]=N=>a.value.description=N),type:"textarea",placeholder:"Optional description"},null,8,["modelValue"]),b(v(ve),{label:"Time Period",modelValue:a.value.timePeriod,"onUpdate:modelValue":z[12]||(z[12]=N=>a.value.timePeriod=N),type:"select",options:y,required:""},null,8,["modelValue"]),u("div",uYt,[we(u("input",{type:"checkbox","onUpdate:modelValue":z[13]||(z[13]=N=>a.value.isDefault=N),class:"rounded"},null,512),[[Rn,a.value.isDefault]]),z[40]||(z[40]=u("label",{class:"text-sm"},"Set as default dashboard",-1))])])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:z[14]||(z[14]=N=>r.value=!1)},{default:D(()=>[...z[41]||(z[41]=[W("Cancel",-1)])]),_:1}),b(v(J),{onClick:w,loading:s.value},{default:D(()=>[...z[42]||(z[42]=[W("Create Dashboard",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])]))}},cYt={class:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm"},fYt={class:"flex flex-wrap items-center justify-between gap-4"},pYt={class:"flex flex-wrap items-center gap-4"},hYt={class:"flex items-center space-x-2"},mYt={class:"relative"},gYt=["value"],vYt={class:"flex items-center space-x-2"},yYt={class:"p-1"},bYt={class:"p-1"},xYt={class:"p-1"},_Yt={class:"flex items-center space-x-2 text-sm text-gray-600"},wYt={__name:"RiskAssessmentFilters",props:{searchQuery:{type:String,default:""},filterStatus:{type:String,default:""},filterPeriod:{type:String,default:""},filterYear:{type:String,default:""},viewMode:{type:String,default:"table"},selectedCount:{type:Number,default:0},filteredCount:{type:Number,default:0},totalCount:{type:Number,default:0}},emits:["update:searchQuery","update:filterStatus","update:filterPeriod","update:filterYear","bulk-action","show-analytics","toggle-view","clear-filters"],setup(t){const e=t,n=[{label:"Annual",value:"Annual"},{label:"Mid-Year",value:"Mid-Year"},{label:"Quarterly",value:"Quarterly"},{label:"Ad-hoc",value:"Ad-hoc"}],r=[{label:"Planning",value:"Planning"},{label:"In Progress",value:"In Progress"},{label:"Review",value:"Review"},{label:"Finalized",value:"Finalized"},{label:"Approved",value:"Approved"}],s=new Date().getFullYear(),i=[];for(let c=s-2;c<=s+2;c++)i.push({label:c.toString(),value:c.toString()});const a=Z(()=>[{label:"All Statuses",value:""},...r]),o=Z(()=>[{label:"All Periods",value:""},...n]),l=Z(()=>[{label:"All Years",value:""},...i]),d=Z(()=>e.searchQuery||e.filterStatus||e.filterPeriod||e.filterYear);return(c,f)=>(T(),R("div",cYt,[u("div",fYt,[u("div",pYt,[f[8]||(f[8]=u("h3",{class:"text-sm font-semibold text-gray-900"},"Quick Actions",-1)),u("div",hYt,[u("div",mYt,[b(v(En),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u("input",{value:t.searchQuery,onInput:f[0]||(f[0]=p=>c.$emit("update:searchQuery",p.target.value)),type:"text",placeholder:"Search assessments...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm w-48"},null,40,gYt)]),b(v(Qe),{modelValue:t.filterStatus,"onUpdate:modelValue":f[1]||(f[1]=p=>c.$emit("update:filterStatus",p)),options:a.value,class:"min-w-36"},null,8,["modelValue","options"]),b(v(Qe),{modelValue:t.filterPeriod,"onUpdate:modelValue":f[2]||(f[2]=p=>c.$emit("update:filterPeriod",p)),options:o.value,class:"min-w-36"},null,8,["modelValue","options"]),b(v(Qe),{modelValue:t.filterYear,"onUpdate:modelValue":f[3]||(f[3]=p=>c.$emit("update:filterYear",p)),options:l.value,class:"min-w-28"},null,8,["modelValue","options"])])]),u("div",vYt,[u("div",yYt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:f[4]||(f[4]=p=>c.$emit("bulk-action")),disabled:t.selectedCount===0},{prefix:D(()=>[b(v(Hc),{class:"h-3.5 w-3.5"})]),default:D(()=>[W(" Bulk Actions ("+$(t.selectedCount)+") ",1)]),_:1},8,["disabled"])]),u("div",bYt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:f[5]||(f[5]=p=>c.$emit("show-analytics"))},{prefix:D(()=>[b(v(hr),{class:"h-3.5 w-3.5"})]),default:D(()=>[f[9]||(f[9]=W(" Risk Analytics ",-1))]),_:1})]),u("div",xYt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:f[6]||(f[6]=p=>c.$emit("toggle-view"))},{prefix:D(()=>[(T(),he(At(t.viewMode==="table"?v(ZD):v(tR)),{class:"h-3.5 w-3.5"}))]),default:D(()=>[W(" "+$(t.viewMode==="table"?"Card View":"Table View"),1)]),_:1})])]),u("div",_Yt,[u("span",null,"Showing "+$(t.filteredCount)+" of "+$(t.totalCount)+" assessments",1),d.value?(T(),he(v(J),{key:0,variant:"ghost",size:"sm",onClick:f[7]||(f[7]=p=>c.$emit("clear-filters"))},{default:D(()=>[b(v(ht),{class:"h-3.5 w-3.5 mr-1"}),f[10]||(f[10]=W(" Clear ",-1))]),_:1})):se("",!0)])])]))}},kYt={class:"risk-heatmap"},SYt={class:"heatmap-container"},CYt={class:"impact-labels"},AYt=["title"],TYt={class:"label-text"},$Yt={class:"label-number"},MYt={class:"matrix-grid"},EYt=["onClick"],DYt={class:"cell-content"},RYt={class:"risk-count"},PYt={key:0,class:"risk-indicators"},IYt=["title","onClick"],OYt=["title"],LYt={class:"cell-tooltip"},VYt={class:"tooltip-header"},NYt={key:0,class:"tooltip-risks"},jYt={class:"tooltip-risk-count"},FYt={key:0},BYt={key:1,class:"no-risks"},zYt={class:"likelihood-labels"},UYt=["title"],HYt={class:"label-number"},qYt={class:"label-text"},WYt={key:0,class:"risk-detail-panel"},GYt={class:"panel-header"},YYt={class:"cell-coordinates"},KYt={class:"panel-content"},XYt={key:0,class:"risks-list"},QYt=["onClick"],ZYt={class:"risk-info"},JYt={class:"risk-title"},eKt={class:"risk-meta"},tKt={class:"category"},nKt={class:"owner"},rKt={class:"status"},sKt={class:"risk-actions"},iKt=["checked","onChange"],aKt={key:1,class:"no-risks-message"},oKt={__name:"RiskHeatMap",props:{matrixData:{type:Array,default:()=>[]},likelihoodLevels:{type:Array,default:()=>[]},impactLevels:{type:Array,default:()=>[]},selectedRisks:{type:Array,default:()=>[]}},emits:["cell-click","risk-click","risk-select","create-risk"],setup(t,{emit:e}){const n=t,r=e,s=Q(null),i=Z(()=>[...n.impactLevels].reverse()),a={operational:ha,financial:ab,compliance:Ju,strategic:ei,reputational:rn,technology:Dfe},o=m=>a[m]||rn,l=m=>({operational:"Operational",financial:"Financial",compliance:"Compliance",strategic:"Strategic",reputational:"Reputational",technology:"Technology"})[m]||m,d=m=>m.some(g=>n.selectedRisks.includes(g.name)),c=m=>{s.value=m,r("cell-click",m)},f=m=>{r("risk-click",m)},p=m=>{r("risk-select",m)},h=m=>{r("create-risk",{likelihood:m.likelihood,impact:m.impact})};return(m,g)=>(T(),R("div",kYt,[g[7]||(g[7]=fr('<div class="heatmap-legend" data-v-ac904a79><h4 data-v-ac904a79>Risk Level Legend</h4><div class="legend-items" data-v-ac904a79><div class="legend-item critical" data-v-ac904a79><div class="legend-color" data-v-ac904a79></div><span data-v-ac904a79>Critical (16-25)</span></div><div class="legend-item high" data-v-ac904a79><div class="legend-color" data-v-ac904a79></div><span data-v-ac904a79>High (13-20)</span></div><div class="legend-item medium" data-v-ac904a79><div class="legend-color" data-v-ac904a79></div><span data-v-ac904a79>Medium (6-12)</span></div><div class="legend-item low" data-v-ac904a79><div class="legend-color" data-v-ac904a79></div><span data-v-ac904a79>Low (1-5)</span></div></div></div>',1)),u("div",SYt,[g[2]||(g[2]=u("div",{class:"y-axis-label"},[u("span",null,"Impact")],-1)),u("div",CYt,[(T(!0),R(xe,null,_e(i.value,y=>(T(),R("div",{key:y.id,class:"impact-label",title:y.description},[u("span",TYt,$(y.label),1),u("span",$Yt,$(y.id),1)],8,AYt))),128))]),u("div",MYt,[(T(!0),R(xe,null,_e(t.matrixData,(y,x)=>(T(),R("div",{key:x,class:"matrix-row"},[(T(!0),R(xe,null,_e(y,(_,k)=>(T(),R("div",{key:`${x}-${k}`,class:pe(["matrix-cell",[`risk-${_.level.toLowerCase()}`,{"has-risks":_.count>0,selected:d(_.risks)}]]),style:rt({backgroundColor:_.color+"20",borderColor:_.color}),onClick:w=>c(_)},[u("div",DYt,[u("div",RYt,$(_.count),1),_.count>0?(T(),R("div",PYt,[(T(!0),R(xe,null,_e(_.risks.slice(0,3),w=>(T(),R("div",{key:w.name,class:pe(["risk-indicator",{selected:t.selectedRisks.includes(w.name)}]),title:w.title,onClick:ut(S=>f(w),["stop"])},[(T(),he(At(o(w.category)),{class:"h-3 w-3"}))],10,IYt))),128)),_.count>3?(T(),R("div",{key:0,class:"risk-indicator more",title:`+${_.count-3} more risks`}," +"+$(_.count-3),9,OYt)):se("",!0)])):se("",!0)]),u("div",LYt,[u("div",VYt,[u("strong",null,$(_.level)+" Risk",1),u("span",null,"(L:"+$(_.likelihood)+", I:"+$(_.impact)+")",1)]),_.count>0?(T(),R("div",NYt,[u("div",jYt,$(_.count)+" risk(s)",1),u("ul",null,[(T(!0),R(xe,null,_e(_.risks.slice(0,5),w=>(T(),R("li",{key:w.name},$(w.title),1))),128)),_.count>5?(T(),R("li",FYt," ...and "+$(_.count-5)+" more ",1)):se("",!0)])])):(T(),R("div",BYt,"No risks in this category"))])],14,EYt))),128))]))),128))]),u("div",zYt,[(T(!0),R(xe,null,_e(t.likelihoodLevels,y=>(T(),R("div",{key:y.id,class:"likelihood-label",title:y.description},[u("span",HYt,$(y.id),1),u("span",qYt,$(y.label),1)],8,UYt))),128))]),g[3]||(g[3]=u("div",{class:"x-axis-label"},[u("span",null,"Likelihood")],-1))]),s.value?(T(),R("div",WYt,[u("div",GYt,[u("h4",null,$(s.value.level)+" Risk Cell",1),u("div",YYt," Likelihood: "+$(s.value.likelihood)+", Impact: "+$(s.value.impact),1),b(v(J),{variant:"ghost",size:"sm",onClick:g[0]||(g[0]=y=>s.value=null)},{default:D(()=>[b(v(ht),{class:"h-4 w-4"})]),_:1})]),u("div",KYt,[s.value.count>0?(T(),R("div",XYt,[(T(!0),R(xe,null,_e(s.value.risks,y=>(T(),R("div",{key:y.name,class:pe(["risk-item",{selected:t.selectedRisks.includes(y.name)}]),onClick:x=>p(y.name)},[u("div",ZYt,[u("div",JYt,$(y.title),1),u("div",eKt,[u("span",tKt,$(l(y.category)),1),u("span",nKt,$(y.risk_owner),1),u("span",rKt,$(y.status),1)])]),u("div",sKt,[b(v(J),{variant:"outline",size:"sm",onClick:ut(x=>f(y),["stop"])},{default:D(()=>[...g[4]||(g[4]=[W(" View ",-1)])]),_:1},8,["onClick"]),u("input",{type:"checkbox",checked:t.selectedRisks.includes(y.name),onChange:x=>m.$emit("risk-select",y.name)},null,40,iKt)])],10,QYt))),128))])):(T(),R("div",aKt,[b(v(qr),{class:"h-8 w-8 text-gray-300"}),g[6]||(g[6]=u("p",null,"No risks in this category",-1)),b(v(J),{variant:"outline",size:"sm",onClick:g[1]||(g[1]=y=>h(s.value))},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-1"}),g[5]||(g[5]=W(" Add Risk Here ",-1))]),_:1})]))])])):se("",!0)]))}},lKt=It(oKt,[["__scopeId","data-v-ac904a79"]]),uKt={class:"flex h-[85vh] overflow-hidden bg-gray-50 -m-4"},dKt={class:"w-72 bg-white border-r border-gray-200 flex flex-col"},cKt={class:"p-6 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50"},fKt={class:"flex items-center gap-3"},pKt={class:"h-12 w-12 rounded-xl bg-gradient-to-br from-red-500 to-orange-500 flex items-center justify-center shadow-lg"},hKt={class:"text-lg font-bold text-gray-900"},mKt={class:"text-sm text-gray-600"},gKt={class:"mt-4 h-2 bg-gray-200 rounded-full overflow-hidden"},vKt={class:"flex-1 overflow-y-auto p-4"},yKt={class:"space-y-1"},bKt=["onClick"],xKt={key:2},_Kt={class:"flex-1 min-w-0"},wKt={class:"font-medium truncate"},kKt={class:"text-xs text-gray-500 truncate"},SKt={class:"p-4 border-t border-gray-200 bg-gray-50 space-y-2"},CKt={class:"text-xs text-center text-gray-500"},AKt={class:"flex-1 flex flex-col overflow-hidden"},TKt={class:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},$Kt={class:"flex items-center gap-4"},MKt={class:"text-sm text-gray-600"},EKt={class:"flex items-center gap-2"},DKt={class:"flex-1 overflow-y-auto p-6"},RKt={class:"space-y-6 max-w-4xl"},PKt={class:"bg-white rounded-xl border border-gray-200 p-6 space-y-6"},IKt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},OKt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},LKt={class:"space-y-6 max-w-4xl"},VKt={class:"bg-white rounded-xl border border-gray-200 p-6 space-y-6"},NKt={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},jKt=["value"],FKt={class:"text-sm font-medium text-gray-700"},BKt={class:"space-y-6 max-w-4xl"},zKt={class:"bg-white rounded-xl border border-gray-200 p-6"},UKt={class:"space-y-6 max-w-5xl"},HKt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},qKt={class:"bg-red-50 rounded-xl border border-red-200 p-4"},WKt={class:"text-2xl font-bold text-red-900"},GKt={class:"bg-orange-50 rounded-xl border border-orange-200 p-4"},YKt={class:"text-2xl font-bold text-orange-900"},KKt={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-4"},XKt={class:"text-2xl font-bold text-yellow-900"},QKt={class:"bg-green-50 rounded-xl border border-green-200 p-4"},ZKt={class:"text-2xl font-bold text-green-900"},JKt={class:"bg-white rounded-xl border border-gray-200 p-6"},eXt={key:0,class:"bg-white rounded-xl border border-gray-200 p-6"},tXt={class:"space-y-6 max-w-5xl"},nXt={class:"bg-white rounded-xl border border-gray-200 p-6"},rXt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},sXt={class:"bg-gray-50 rounded-xl border border-gray-200 p-4"},iXt={class:"text-2xl font-bold text-gray-900"},aXt={class:"bg-blue-50 rounded-xl border border-blue-200 p-4"},oXt={class:"text-2xl font-bold text-blue-900"},lXt={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-4"},uXt={class:"text-2xl font-bold text-yellow-900"},dXt={class:"bg-green-50 rounded-xl border border-green-200 p-4"},cXt={class:"text-2xl font-bold text-green-900"},fXt={class:"space-y-6 max-w-4xl"},pXt={class:"bg-white rounded-xl border border-gray-200 p-6 space-y-6"},hXt={class:"bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-6 border border-red-200"},mXt={class:"flex items-center justify-between mb-4"},gXt={class:"text-right"},vXt={class:"h-3 bg-gray-200 rounded-full overflow-hidden"},yXt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},bXt={key:0,class:"bg-white rounded-xl border border-gray-200 p-6"},xXt={class:"space-y-3"},_Xt={class:"flex-1"},wXt={class:"font-medium text-gray-900"},kXt={class:"text-sm text-gray-600"},SXt={class:"space-y-6 max-w-4xl"},CXt={class:"bg-white rounded-xl border border-gray-200 p-6 space-y-6"},AXt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},TXt={class:"border-t border-gray-200 pt-6"},$Xt={class:"relative"},MXt={class:"space-y-6"},EXt={class:"relative flex items-start gap-4"},DXt={class:"h-8 w-8 rounded-full bg-green-100 border-2 border-green-500 flex items-center justify-center z-10"},RXt={class:"text-sm text-gray-600"},PXt={class:"relative flex items-start gap-4"},IXt={class:"text-sm text-gray-600"},OXt={class:"relative flex items-start gap-4"},LXt={class:"text-sm text-gray-600"},VXt={class:"bg-white border-t border-gray-200 px-6 py-4"},NXt={class:"flex items-center justify-between"},jXt={class:"flex items-center gap-2"},FXt={class:"text-sm text-gray-500"},BXt={class:"flex items-center gap-3"},zXt={__name:"RiskAssessmentForm",props:{modelValue:{type:Boolean,default:!1},assessment:{type:Object,default:null},mode:{type:String,default:"create"}},emits:["update:modelValue","submit","cancel","save-draft"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.modelValue,set:Ie=>r("update:modelValue",Ie)}),i=Z(()=>n.mode==="edit"),a=Jt({assessment_id:"",assessment_name:"",assessment_date:new Date().toISOString().split("T")[0],fiscal_year:"",assessment_period:"Annual",status:"Planning",assessment_scope:"",methodology:"",assessment_team:[],risk_register:[],action_plan:[],top_risks:[],overall_risk_score:0,overall_risk_rating:"",assessment_summary:"",recommendations:"",prepared_by:"",reviewed_by:"",approved_by:""}),o=Q([]),l=[{id:"basic",label:"Basic Information",description:"Assessment details",requiredFields:["assessment_name","assessment_date","fiscal_year","assessment_period"]},{id:"scope",label:"Scope & Methodology",description:"Assessment scope",requiredFields:["assessment_scope"]},{id:"team",label:"Assessment Team",description:"Team members",requiredFields:[]},{id:"risks",label:"Risk Register",description:"Identified risks",requiredFields:[]},{id:"actions",label:"Action Plan",description:"Mitigation actions",requiredFields:[]},{id:"summary",label:"Summary",description:"Assessment summary",requiredFields:[]},{id:"approvals",label:"Approvals",description:"Review & approval",requiredFields:[]}],d={assessment_team:"Assessment Team Member",risk_register:"Risk Assessment Register",action_plan:"Risk Assessment Action"},c=(Ie,Se)=>{const Ce={},Le=l.find(Pt=>Pt.id===Ie);if(!Le)return Ce;for(const Pt of Le.requiredFields||[]){const $e=Se[Pt];(!$e||Array.isArray($e)&&$e.length===0)&&(Ce[Pt]=`${Pt.replace(/_/g," ")} is required`)}return Ce},{activeSection:f,errors:p,isSaving:h,isSavingDraft:m,hasUnsavedChanges:g,completedSections:y,formProgress:x,isFormValid:_,isFirstSection:k,isLastSection:w,currentSectionIndex:S,getSectionStatus:C,getSectionStatusClass:A,navigateToSection:M,nextSection:E,prevSection:P,clearError:I,prepareFormData:F,loadFormData:L}=nO({sections:l,form:a,validateSection:c,childTables:d}),z=[{label:"Annual",value:"Annual"},{label:"Mid-Year",value:"Mid-Year"},{label:"Quarterly",value:"Quarterly"},{label:"Ad-hoc",value:"Ad-hoc"}],N=[{label:"Planning",value:"Planning"},{label:"In Progress",value:"In Progress"},{label:"Review",value:"Review"},{label:"Finalized",value:"Finalized"},{label:"Approved",value:"Approved"}],q=[{label:"Interview",value:"Interview"},{label:"Workshop",value:"Workshop"},{label:"Survey",value:"Survey"},{label:"Document Review",value:"Document Review"},{label:"Data Analysis",value:"Data Analysis"},{label:"Self-Assessment",value:"Self-Assessment"}],V=[{key:"team_member",label:"Team Member",type:"link",doctype:"User"},{key:"role",label:"Role",type:"select",options:["Lead","Member","Observer","SME"]}],O={team_member:"",role:"Member"},X=[{key:"risk_id",label:"Risk ID",width:"100px"},{key:"risk_title",label:"Risk Title"},{key:"risk_category",label:"Category",width:"120px"},{key:"likelihood_score",label:"Likelihood",width:"90px"},{key:"impact_score",label:"Impact",width:"80px"},{key:"inherent_risk_score",label:"Score",width:"80px",computed:!0},{key:"inherent_risk_rating",label:"Rating",width:"100px"}],j=[{key:"risk_id",label:"Risk ID",type:"text",required:!0},{key:"risk_title",label:"Risk Title",type:"text",required:!0},{key:"risk_description",label:"Risk Description",type:"textarea",required:!0},{key:"risk_category",label:"Category",type:"select",options:["Strategic","Operational","Financial","Compliance","Technology","Reputational"],required:!0},{key:"risk_subcategory",label:"Subcategory",type:"text"},{key:"auditable_entity",label:"Auditable Entity",type:"link",doctype:"Audit Universe Entity"},{key:"threat_source",label:"Threat Source",type:"text"},{key:"vulnerability",label:"Vulnerability",type:"textarea"},{key:"likelihood_score",label:"Likelihood Score (1-5)",type:"rating",required:!0},{key:"likelihood_rationale",label:"Likelihood Rationale",type:"textarea"},{key:"impact_score",label:"Impact Score (1-5)",type:"rating",required:!0},{key:"impact_rationale",label:"Impact Rationale",type:"textarea"},{key:"control_effectiveness",label:"Control Effectiveness",type:"select",options:["Strong","Adequate","Weak","Non-existent"]},{key:"existing_controls",label:"Existing Controls",type:"textarea"},{key:"residual_likelihood",label:"Residual Likelihood (1-5)",type:"rating"},{key:"residual_impact",label:"Residual Impact (1-5)",type:"rating"},{key:"risk_owner",label:"Risk Owner",type:"link",doctype:"User"},{key:"risk_response",label:"Risk Response",type:"select",options:["Accept","Mitigate","Transfer","Avoid"]},{key:"target_risk_score",label:"Target Risk Score",type:"number"},{key:"risk_velocity",label:"Risk Velocity",type:"select",options:["Very Slow","Slow","Medium","Fast","Very Fast"]},{key:"risk_trend",label:"Risk Trend",type:"select",options:["Increasing","Stable","Decreasing"]},{key:"last_review_date",label:"Last Review Date",type:"date"},{key:"next_review_date",label:"Next Review Date",type:"date"},{key:"notes",label:"Notes",type:"textarea"}],U={risk_id:"",risk_title:"",risk_description:"",risk_category:"",risk_subcategory:"",auditable_entity:"",threat_source:"",vulnerability:"",likelihood_score:3,likelihood_rationale:"",impact_score:3,impact_rationale:"",inherent_risk_score:9,inherent_risk_rating:"Medium",control_effectiveness:"Adequate",existing_controls:"",residual_likelihood:0,residual_impact:0,residual_risk_score:0,residual_risk_rating:"",risk_owner:"",risk_response:"Mitigate",target_risk_score:0,risk_velocity:"Medium",risk_trend:"Stable",last_review_date:"",next_review_date:"",notes:""},G=[{key:"action_id",label:"Action ID",width:"100px"},{key:"action_description",label:"Description"},{key:"responsible_party",label:"Responsible",width:"150px"},{key:"target_completion_date",label:"Due Date",width:"120px"},{key:"priority",label:"Priority",width:"100px"},{key:"status",label:"Status",width:"120px"}],ee=[{key:"action_id",label:"Action ID",type:"text",required:!0},{key:"action_description",label:"Action Description",type:"textarea",required:!0},{key:"action_type",label:"Action Type",type:"select",options:["Process Improvement","Control Enhancement","Training","System Enhancement","Policy Update"]},{key:"priority",label:"Priority",type:"select",options:["Low","Medium","High","Critical"],required:!0},{key:"responsible_party",label:"Responsible Party",type:"link",doctype:"User",required:!0},{key:"target_completion_date",label:"Target Completion Date",type:"date",required:!0},{key:"estimated_cost",label:"Estimated Cost",type:"currency"},{key:"resource_required",label:"Resources Required",type:"text"},{key:"status",label:"Status",type:"select",options:["Planned","In Progress","Completed","Overdue","Cancelled"]},{key:"actual_completion_date",label:"Actual Completion Date",type:"date"},{key:"effectiveness_review_date",label:"Effectiveness Review Date",type:"date"},{key:"review_notes",label:"Review Notes",type:"textarea"}],ie={action_id:"",action_description:"",action_type:"",priority:"Medium",responsible_party:"",target_completion_date:"",estimated_cost:0,resource_required:"",status:"Planned",actual_completion_date:"",effectiveness_review_date:"",review_notes:""},ne=[{id:1,label:"Rare",description:"Unlikely to occur"},{id:2,label:"Unlikely",description:"Could occur occasionally"},{id:3,label:"Possible",description:"Might occur sometime"},{id:4,label:"Likely",description:"Will probably occur"},{id:5,label:"Almost Certain",description:"Expected to occur"}],ce=[{id:1,label:"Negligible",description:"Minimal impact"},{id:2,label:"Minor",description:"Some minor issues"},{id:3,label:"Moderate",description:"Noticeable impact"},{id:4,label:"Major",description:"Significant impact"},{id:5,label:"Catastrophic",description:"Severe impact"}],oe=Q(null),re=Z(()=>{if(!oe.value)return"not yet saved";const Ie=Date.now()-oe.value;return Ie<6e4?"just now":Ie<36e5?`${Math.floor(Ie/6e4)} minutes ago`:"over an hour ago"}),te=Z(()=>{const Ie={critical:0,high:0,medium:0,low:0};return a.risk_register.forEach(Se=>{const Ce=Se.inherent_risk_score||Se.likelihood_score*Se.impact_score;Ce>=20?Ie.critical++:Ce>=15?Ie.high++:Ce>=10?Ie.medium++:Ie.low++}),Ie}),K=Z(()=>{const Ie={planned:0,inProgress:0,completed:0};return a.action_plan.forEach(Se=>{Se.status==="Planned"?Ie.planned++:Se.status==="In Progress"?Ie.inProgress++:Se.status==="Completed"&&Ie.completed++}),Ie}),le=Z(()=>[...a.risk_register].map(Ie=>ze(ge({},Ie),{inherent_risk_score:Ie.inherent_risk_score||Ie.likelihood_score*Ie.impact_score})).sort((Ie,Se)=>Se.inherent_risk_score-Ie.inherent_risk_score).slice(0,5)),H=Z(()=>{const Ie=[];for(let Se=5;Se>=1;Se--){const Ce=[];for(let Le=1;Le<=5;Le++){const Pt=a.risk_register.filter(Ue=>Ue.likelihood_score===Le&&Ue.impact_score===Se),$e=Se*Le;let Ae="Low",ke="#22c55e";$e>=20?(Ae="Critical",ke="#ef4444"):$e>=15?(Ae="High",ke="#f97316"):$e>=10&&(Ae="Medium",ke="#eab308"),Ce.push({likelihood:Le,impact:Se,level:Ae,color:ke,count:Pt.length,risks:Pt})}Ie.push(Ce)}return Ie}),Y=Z(()=>{const Ie=a.overall_risk_score||fe();return Ie>=20?"text-red-600":Ie>=15?"text-orange-600":Ie>=10?"text-yellow-600":"text-green-600"}),B=Z(()=>{const Ie=a.overall_risk_score||fe();return Ie>=20?"destructive":Ie>=15?"warning":Ie>=10?"secondary":"success"}),ae=Z(()=>{const Ie=a.overall_risk_score||fe();return Ie>=20?"bg-red-500":Ie>=15?"bg-orange-500":Ie>=10?"bg-yellow-500":"bg-green-500"}),be=Ie=>o.value.includes(Ie),fe=()=>{if(a.risk_register.length===0)return 0;const Ie=a.risk_register.reduce((Se,Ce)=>Se+(Ce.inherent_risk_score||Ce.likelihood_score*Ce.impact_score),0);return Math.round(Ie/a.risk_register.length)},me=()=>{const Ie=fe();return Ie>=20?"Critical":Ie>=15?"High":Ie>=10?"Medium":"Low"},ye=Ie=>Ie>=20?"destructive":Ie>=15?"warning":Ie>=10?"secondary":"success",Ee=Ie=>Ie>=20?"border-red-200 bg-red-50":Ie>=15?"border-orange-200 bg-orange-50":Ie>=10?"border-yellow-200 bg-yellow-50":"border-green-200 bg-green-50",Re=Ie=>Ie>=20?"bg-red-500":Ie>=15?"bg-orange-500":Ie>=10?"bg-yellow-500":"bg-green-500",Ye=Ie=>Ie?new Date(Ie).toLocaleDateString():null,Xe=Ie=>{console.log("Risk clicked:",Ie)},st=Ie=>{console.log("Heat map risk clicked:",Ie)},it=()=>ue(this,null,function*(){m.value=!0;try{a.methodology=o.value.join(", ");const Ie=F();r("save-draft",Ie),oe.value=Date.now()}catch(Ie){console.error("Error saving draft:",Ie)}finally{m.value=!1}}),Fe=()=>ue(this,null,function*(){h.value=!0;try{a.methodology=o.value.join(", "),a.risk_register.forEach(Se=>{Se.inherent_risk_score=Se.likelihood_score*Se.impact_score,Se.inherent_risk_rating=Pe(Se.inherent_risk_score),Se.residual_likelihood&&Se.residual_impact&&(Se.residual_risk_score=Se.residual_likelihood*Se.residual_impact,Se.residual_risk_rating=Pe(Se.residual_risk_score))}),a.overall_risk_score=fe(),a.overall_risk_rating=me(),a.top_risks=le.value.map(Se=>({risk_description:Se.risk_title,inherent_risk_score:Se.inherent_risk_score}));const Ie=F();r("submit",Ie),s.value=!1}catch(Ie){console.error("Error submitting form:",Ie)}finally{h.value=!1}}),Pe=Ie=>Ie>=20?"Critical":Ie>=15?"High":Ie>=10?"Medium":"Low",je=()=>{g.value?confirm("You have unsaved changes. Are you sure you want to close?")&&(r("cancel"),s.value=!1):(r("cancel"),s.value=!1)};return et(()=>n.assessment,Ie=>{Ie&&(L(Ie),Ie.methodology&&(o.value=Ie.methodology.split(", ").filter(Boolean)))},{immediate:!0}),et(o,Ie=>{a.methodology=Ie.join(", ")},{deep:!0}),(Ie,Se)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":Se[18]||(Se[18]=Ce=>s.value=Ce),options:{title:"",size:"7xl"}},{body:D(()=>[u("div",uKt,[u("div",dKt,[u("div",cKt,[u("div",fKt,[u("div",pKt,[b(v(rn),{class:"h-6 w-6 text-white"})]),u("div",null,[u("h2",hKt,$(i.value?"Edit Risk Assessment":"New Risk Assessment"),1),u("p",mKt,$(v(x))+"% Complete",1)])]),u("div",gKt,[u("div",{class:"h-full bg-gradient-to-r from-red-500 to-orange-500 transition-all duration-500",style:rt({width:`${v(x)}%`})},null,4)])]),u("nav",vKt,[u("div",yKt,[(T(),R(xe,null,_e(l,(Ce,Le)=>u("button",{key:Ce.id,onClick:Pt=>v(M)(Ce.id),class:pe(["w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all duration-200",{"bg-red-50 text-red-700 border-2 border-red-200 shadow-sm":v(f)===Ce.id,"hover:bg-gray-50 text-gray-700":v(f)!==Ce.id}])},[u("div",{class:pe(["flex-shrink-0 h-8 w-8 rounded-lg flex items-center justify-center text-sm font-semibold transition-colors",v(A)(Ce.id)])},[v(C)(Ce.id)==="complete"?(T(),he(At(v(Fr)),{key:0,class:"h-4 w-4"})):v(C)(Ce.id)==="error"?(T(),he(At(v(qr)),{key:1,class:"h-4 w-4"})):(T(),R("span",xKt,$(Le+1),1))],2),u("div",_Kt,[u("div",wKt,$(Ce.label),1),u("div",kKt,$(Ce.description),1)]),v(f)===Ce.id?(T(),he(v(sr),{key:0,class:"h-4 w-4 text-red-500 flex-shrink-0"})):se("",!0)],10,bKt)),64))])]),u("div",SKt,[b(v(J),{variant:"outline",class:"w-full justify-center",onClick:it,loading:v(m)},{default:D(()=>[b(v($r),{class:"h-4 w-4 mr-2"}),Se[19]||(Se[19]=W(" Save Draft ",-1))]),_:1},8,["loading"]),u("div",CKt," Draft saved "+$(re.value),1)])]),u("div",AKt,[u("div",TKt,[u("div",$Kt,[b(v(J),{variant:"ghost",size:"sm",onClick:v(P),disabled:v(k)},{default:D(()=>[b(v(gr),{class:"h-4 w-4 mr-1"}),Se[20]||(Se[20]=W(" Previous ",-1))]),_:1},8,["onClick","disabled"]),u("span",MKt," Step "+$(v(S))+" of "+$(l.length),1),b(v(J),{variant:"ghost",size:"sm",onClick:v(E),disabled:v(w)},{default:D(()=>[Se[21]||(Se[21]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4 ml-1"})]),_:1},8,["onClick","disabled"])]),u("div",EKt,[b(v(J),{variant:"ghost",size:"sm",onClick:je},{default:D(()=>[b(v(ht),{class:"h-4 w-4 mr-1"}),Se[22]||(Se[22]=W(" Cancel ",-1))]),_:1}),b(v(J),{variant:"solid",theme:"red",size:"sm",onClick:Fe,loading:v(h),disabled:!v(_)},{default:D(()=>[b(v(Kt),{class:"h-4 w-4 mr-2"}),W(" "+$(i.value?"Update Assessment":"Create Assessment"),1)]),_:1},8,["loading","disabled"])])]),u("div",DKt,[we(u("div",RKt,[b(Vt,{title:"Basic Information",description:"Provide essential details about the risk assessment",icon:"Info"}),u("div",PKt,[u("div",IKt,[b(v(ve),{label:"Assessment Name",modelValue:a.assessment_name,"onUpdate:modelValue":Se[0]||(Se[0]=Ce=>a.assessment_name=Ce),required:"",placeholder:"Enter assessment name",error:v(p).assessment_name,onInput:Se[1]||(Se[1]=Ce=>v(I)("assessment_name"))},null,8,["modelValue","error"]),b(v(ve),{label:"Assessment Date",type:"date",modelValue:a.assessment_date,"onUpdate:modelValue":Se[2]||(Se[2]=Ce=>a.assessment_date=Ce),required:"",error:v(p).assessment_date,onInput:Se[3]||(Se[3]=Ce=>v(I)("assessment_date"))},null,8,["modelValue","error"])]),u("div",OKt,[u("div",null,[Se[23]||(Se[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Fiscal Year "),u("span",{class:"text-red-500"},"*")],-1)),b(Mt,{modelValue:a.fiscal_year,"onUpdate:modelValue":Se[4]||(Se[4]=Ce=>a.fiscal_year=Ce),doctype:"Fiscal Year",placeholder:"Select fiscal year",error:v(p).fiscal_year},null,8,["modelValue","error"])]),u("div",null,[Se[24]||(Se[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Assessment Period "),u("span",{class:"text-red-500"},"*")],-1)),b(v(Qe),{modelValue:a.assessment_period,"onUpdate:modelValue":Se[5]||(Se[5]=Ce=>a.assessment_period=Ce),options:z,placeholder:"Select period"},null,8,["modelValue"])]),u("div",null,[Se[25]||(Se[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Status ",-1)),b(v(Qe),{modelValue:a.status,"onUpdate:modelValue":Se[6]||(Se[6]=Ce=>a.status=Ce),options:N,placeholder:"Select status"},null,8,["modelValue"])])])])],512),[[lt,v(f)==="basic"]]),we(u("div",LKt,[b(Vt,{title:"Scope & Methodology",description:"Define the assessment scope and methodologies to be used",icon:"Target"}),u("div",VKt,[b(v(ve),{label:"Assessment Scope",type:"textarea",modelValue:a.assessment_scope,"onUpdate:modelValue":Se[7]||(Se[7]=Ce=>a.assessment_scope=Ce),placeholder:"Describe the scope of this risk assessment...",rows:"4",error:v(p).assessment_scope,onInput:Se[8]||(Se[8]=Ce=>v(I)("assessment_scope"))},null,8,["modelValue","error"]),u("div",null,[Se[26]||(Se[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Assessment Methodology ",-1)),u("div",NKt,[(T(),R(xe,null,_e(q,Ce=>u("label",{key:Ce.value,class:pe(["flex items-center gap-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",{"bg-red-50 border-red-200":be(Ce.value)}])},[we(u("input",{type:"checkbox",value:Ce.value,"onUpdate:modelValue":Se[9]||(Se[9]=Le=>o.value=Le),class:"rounded border-gray-300 text-red-600 focus:ring-red-500"},null,8,jKt),[[Rn,o.value]]),u("span",FKt,$(Ce.label),1)],2)),64))])])])],512),[[lt,v(f)==="scope"]]),we(u("div",BKt,[b(Vt,{title:"Assessment Team",description:"Add team members who will participate in this assessment",icon:"Users"}),u("div",zKt,[b(_0,{modelValue:a.assessment_team,"onUpdate:modelValue":Se[10]||(Se[10]=Ce=>a.assessment_team=Ce),title:"Team Members",columns:V,defaultRow:O,addButtonLabel:"Add Team Member"},null,8,["modelValue"])])],512),[[lt,v(f)==="team"]]),we(u("div",UKt,[b(Vt,{title:"Risk Register",description:"Identify and assess risks in this assessment",icon:"AlertTriangle"}),u("div",HKt,[u("div",qKt,[Se[27]||(Se[27]=u("p",{class:"text-xs font-semibold text-red-700 uppercase"},"Critical",-1)),u("p",WKt,$(te.value.critical),1)]),u("div",GKt,[Se[28]||(Se[28]=u("p",{class:"text-xs font-semibold text-orange-700 uppercase"},"High",-1)),u("p",YKt,$(te.value.high),1)]),u("div",KKt,[Se[29]||(Se[29]=u("p",{class:"text-xs font-semibold text-yellow-700 uppercase"},"Medium",-1)),u("p",XKt,$(te.value.medium),1)]),u("div",QKt,[Se[30]||(Se[30]=u("p",{class:"text-xs font-semibold text-green-700 uppercase"},"Low",-1)),u("p",ZKt,$(te.value.low),1)])]),u("div",JKt,[b(da,{modelValue:a.risk_register,"onUpdate:modelValue":Se[11]||(Se[11]=Ce=>a.risk_register=Ce),title:"Risk Register",columns:X,formFields:j,defaultRow:U,addButtonLabel:"Add Risk",modalTitle:"Risk Entry",onRowClick:Xe},null,8,["modelValue"])]),a.risk_register.length>0?(T(),R("div",eXt,[Se[31]||(Se[31]=u("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Heat Map",-1)),b(lKt,{matrixData:H.value,likelihoodLevels:ne,impactLevels:ce,selectedRisks:[],onRiskClick:st},null,8,["matrixData"])])):se("",!0)],512),[[lt,v(f)==="risks"]]),we(u("div",tXt,[b(Vt,{title:"Action Plan",description:"Define mitigation actions for identified risks",icon:"ListChecks"}),u("div",nXt,[b(da,{modelValue:a.action_plan,"onUpdate:modelValue":Se[12]||(Se[12]=Ce=>a.action_plan=Ce),title:"Mitigation Actions",columns:G,formFields:ee,defaultRow:ie,addButtonLabel:"Add Action",modalTitle:"Action Item"},null,8,["modelValue"])]),u("div",rXt,[u("div",sXt,[Se[32]||(Se[32]=u("p",{class:"text-xs font-semibold text-gray-600 uppercase"},"Total Actions",-1)),u("p",iXt,$(a.action_plan.length),1)]),u("div",aXt,[Se[33]||(Se[33]=u("p",{class:"text-xs font-semibold text-blue-700 uppercase"},"Planned",-1)),u("p",oXt,$(K.value.planned),1)]),u("div",lXt,[Se[34]||(Se[34]=u("p",{class:"text-xs font-semibold text-yellow-700 uppercase"},"In Progress",-1)),u("p",uXt,$(K.value.inProgress),1)]),u("div",dXt,[Se[35]||(Se[35]=u("p",{class:"text-xs font-semibold text-green-700 uppercase"},"Completed",-1)),u("p",cXt,$(K.value.completed),1)])])],512),[[lt,v(f)==="actions"]]),we(u("div",fXt,[b(Vt,{title:"Summary & Recommendations",description:"Provide overall assessment summary and key recommendations",icon:"FileText"}),u("div",pXt,[u("div",hXt,[u("div",mXt,[Se[36]||(Se[36]=u("div",null,[u("h4",{class:"text-lg font-semibold text-gray-900"},"Overall Risk Score"),u("p",{class:"text-sm text-gray-600"},"Based on identified risks")],-1)),u("div",gXt,[u("p",{class:pe(["text-3xl font-bold",Y.value])},$(a.overall_risk_score||fe()),3),b(v(De),{variant:B.value,size:"sm"},{default:D(()=>[W($(a.overall_risk_rating||me()),1)]),_:1},8,["variant"])])]),u("div",vXt,[u("div",{class:pe(["h-full transition-all duration-500",ae.value]),style:rt({width:`${(a.overall_risk_score||fe())*4}%`})},null,6)])]),u("div",yXt,[b(v(ve),{label:"Assessment Summary",type:"textarea",modelValue:a.assessment_summary,"onUpdate:modelValue":Se[13]||(Se[13]=Ce=>a.assessment_summary=Ce),placeholder:"Summarize the key findings and conclusions...",rows:"6"},null,8,["modelValue"]),b(v(ve),{label:"Recommendations",type:"textarea",modelValue:a.recommendations,"onUpdate:modelValue":Se[14]||(Se[14]=Ce=>a.recommendations=Ce),placeholder:"Provide key recommendations based on the assessment...",rows:"6"},null,8,["modelValue"])])]),le.value.length>0?(T(),R("div",bXt,[Se[37]||(Se[37]=u("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Top Risks",-1)),u("div",xXt,[(T(!0),R(xe,null,_e(le.value,(Ce,Le)=>(T(),R("div",{key:Ce.risk_id,class:pe(["flex items-center gap-4 p-4 rounded-lg border",Ee(Ce.inherent_risk_score)])},[u("div",{class:pe(["h-8 w-8 rounded-lg flex items-center justify-center text-white font-bold text-sm",Re(Ce.inherent_risk_score)])},$(Le+1),3),u("div",_Xt,[u("p",wXt,$(Ce.risk_title),1),u("p",kXt,$(Ce.risk_category),1)]),b(v(De),{variant:ye(Ce.inherent_risk_score),size:"sm"},{default:D(()=>[W(" Score: "+$(Ce.inherent_risk_score),1)]),_:2},1032,["variant"])],2))),128))])])):se("",!0)],512),[[lt,v(f)==="summary"]]),we(u("div",SXt,[b(Vt,{title:"Approvals",description:"Track preparation, review, and approval of the assessment",icon:"UserCheck"}),u("div",CXt,[u("div",AXt,[u("div",null,[Se[38]||(Se[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Prepared By ",-1)),b(Mt,{modelValue:a.prepared_by,"onUpdate:modelValue":Se[15]||(Se[15]=Ce=>a.prepared_by=Ce),doctype:"User",placeholder:"Select preparer"},null,8,["modelValue"])]),u("div",null,[Se[39]||(Se[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Reviewed By ",-1)),b(Mt,{modelValue:a.reviewed_by,"onUpdate:modelValue":Se[16]||(Se[16]=Ce=>a.reviewed_by=Ce),doctype:"User",placeholder:"Select reviewer"},null,8,["modelValue"])]),u("div",null,[Se[40]||(Se[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Approved By ",-1)),b(Mt,{modelValue:a.approved_by,"onUpdate:modelValue":Se[17]||(Se[17]=Ce=>a.approved_by=Ce),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])])]),u("div",TXt,[Se[45]||(Se[45]=u("h4",{class:"text-sm font-semibold text-gray-700 mb-4"},"Approval Timeline",-1)),u("div",$Xt,[Se[44]||(Se[44]=u("div",{class:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"},null,-1)),u("div",MXt,[u("div",EXt,[u("div",DXt,[b(v(Fr),{class:"h-4 w-4 text-green-600"})]),u("div",null,[Se[41]||(Se[41]=u("p",{class:"font-medium text-gray-900"},"Created",-1)),u("p",RXt,$(Ye(a.creation)||"Pending"),1)])]),u("div",PXt,[u("div",{class:pe(["h-8 w-8 rounded-full border-2 flex items-center justify-center z-10",a.reviewed_by?"bg-green-100 border-green-500":"bg-gray-100 border-gray-300"])},[(T(),he(At(a.reviewed_by?v(Fr):v(Ns)),{class:pe(["h-4 w-4",a.reviewed_by?"text-green-600":"text-gray-400"])},null,8,["class"]))],2),u("div",null,[Se[42]||(Se[42]=u("p",{class:"font-medium text-gray-900"},"Reviewed",-1)),u("p",IXt,$(a.reviewed_by||"Awaiting review"),1)])]),u("div",OXt,[u("div",{class:pe(["h-8 w-8 rounded-full border-2 flex items-center justify-center z-10",a.approved_by?"bg-green-100 border-green-500":"bg-gray-100 border-gray-300"])},[(T(),he(At(a.approved_by?v(Fr):v(Ns)),{class:pe(["h-4 w-4",a.approved_by?"text-green-600":"text-gray-400"])},null,8,["class"]))],2),u("div",null,[Se[43]||(Se[43]=u("p",{class:"font-medium text-gray-900"},"Approved",-1)),u("p",LXt,$(a.approved_by||"Awaiting approval"),1)])])])])])])],512),[[lt,v(f)==="approvals"]])]),u("div",VXt,[u("div",NXt,[b(v(J),{variant:"outline",onClick:v(P),disabled:v(k)},{default:D(()=>[b(v(gr),{class:"h-4 w-4 mr-2"}),Se[46]||(Se[46]=W(" Previous ",-1))]),_:1},8,["onClick","disabled"]),u("div",jXt,[u("span",FXt,$(v(y))+" of "+$(l.length)+" sections complete ",1)]),u("div",BXt,[v(w)?(T(),he(v(J),{key:1,variant:"solid",theme:"red",onClick:Fe,loading:v(h),disabled:!v(_)},{default:D(()=>[b(v(Kt),{class:"h-4 w-4 mr-2"}),W(" "+$(i.value?"Update Assessment":"Create Assessment"),1)]),_:1},8,["loading","disabled"])):(T(),he(v(J),{key:0,variant:"solid",theme:"gray",onClick:v(E)},{default:D(()=>[Se[47]||(Se[47]=W(" Next Section ",-1)),b(v(sr),{class:"h-4 w-4 ml-2"})]),_:1},8,["onClick"]))])])])])])]),_:1},8,["modelValue"]))}},UXt=It(zXt,[["__scopeId","data-v-7c73861b"]]),HXt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4"},qXt={class:"bg-blue-50 rounded-xl border border-blue-200 p-6 hover:shadow-lg transition-shadow"},WXt={class:"flex items-center justify-between"},GXt={class:"text-3xl font-bold text-blue-900 mt-1"},YXt={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},KXt={class:"bg-red-50 rounded-xl border border-red-200 p-6 hover:shadow-lg transition-shadow"},XXt={class:"flex items-center justify-between"},QXt={class:"text-3xl font-bold text-red-900 mt-1"},ZXt={class:"p-3 bg-red-500 rounded-xl shadow-sm"},JXt={class:"bg-orange-50 rounded-xl border border-orange-200 p-6 hover:shadow-lg transition-shadow"},eQt={class:"flex items-center justify-between"},tQt={class:"text-3xl font-bold text-orange-900 mt-1"},nQt={class:"p-3 bg-orange-500 rounded-xl shadow-sm"},rQt={class:"bg-green-50 rounded-xl border border-green-200 p-6 hover:shadow-lg transition-shadow"},sQt={class:"flex items-center justify-between"},iQt={class:"text-3xl font-bold text-green-900 mt-1"},aQt={class:"p-3 bg-green-500 rounded-xl shadow-sm"},oQt={class:"bg-purple-50 rounded-xl border border-purple-200 p-6 hover:shadow-lg transition-shadow"},lQt={class:"flex items-center justify-between"},uQt={class:"text-3xl font-bold text-purple-900 mt-1"},dQt={class:"w-full bg-purple-200 rounded-full h-2 mt-2"},cQt={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},fQt={__name:"RiskAssessmentStats",props:{stats:{type:Object,required:!0,default:()=>({total:0,criticalRisks:0,highRisks:0,approved:0,averageRiskScore:0})}},setup(t){return(e,n)=>(T(),R("div",HXt,[u("div",qXt,[u("div",WXt,[u("div",null,[n[0]||(n[0]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Total Assessments",-1)),u("p",GXt,$(t.stats.total),1),n[1]||(n[1]=u("p",{class:"text-xs text-blue-600 mt-1"},"Active assessments",-1))]),u("div",YXt,[b(v(vt),{class:"h-7 w-7 text-white"})])])]),u("div",KXt,[u("div",XXt,[u("div",null,[n[2]||(n[2]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Critical Risks",-1)),u("p",QXt,$(t.stats.criticalRisks),1),n[3]||(n[3]=u("p",{class:"text-xs text-red-600 mt-1"},"High priority items",-1))]),u("div",ZXt,[b(v(rn),{class:"h-7 w-7 text-white"})])])]),u("div",JXt,[u("div",eQt,[u("div",null,[n[4]||(n[4]=u("p",{class:"text-sm font-semibold text-orange-700 uppercase tracking-wide"},"High Risks",-1)),u("p",tQt,$(t.stats.highRisks),1),n[5]||(n[5]=u("p",{class:"text-xs text-orange-600 mt-1"},"Medium priority items",-1))]),u("div",nQt,[b(v(qr),{class:"h-7 w-7 text-white"})])])]),u("div",rQt,[u("div",sQt,[u("div",null,[n[6]||(n[6]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Approved",-1)),u("p",iQt,$(t.stats.approved),1),n[7]||(n[7]=u("p",{class:"text-xs text-green-600 mt-1"},"Completed assessments",-1))]),u("div",aQt,[b(v(Kt),{class:"h-7 w-7 text-white"})])])]),u("div",oQt,[u("div",lQt,[u("div",null,[n[8]||(n[8]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Avg Risk Score",-1)),u("p",uQt,$(t.stats.averageRiskScore),1),u("div",dQt,[u("div",{class:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${Math.min(t.stats.averageRiskScore,25)*4}%`})},null,4)])]),u("div",cQt,[b(v(hr),{class:"h-7 w-7 text-white"})])])])]))}},pQt={class:"space-y-6"},hQt={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},mQt={class:"flex items-center space-x-3"},gQt={class:"p-2 bg-red-100 rounded-lg"},vQt={class:"flex flex-wrap items-center gap-3"},yQt={class:"flex items-center space-x-2"},bQt={class:"p-1"},xQt={class:"p-1"},_Qt={class:"p-1"},wQt={class:"p-1"},kQt={class:"bg-white rounded-xl border border-gray-200 shadow-sm"},SQt={class:"px-6 py-4 border-b border-gray-200"},CQt={class:"flex items-center justify-between"},AQt={class:"flex items-center space-x-2"},TQt={key:0,class:"p-1"},$Qt={key:0,class:"overflow-x-auto"},MQt={class:"min-w-full divide-y divide-gray-200"},EQt={class:"bg-gray-50"},DQt={class:"px-6 py-3 text-left"},RQt=["checked"],PQt={class:"flex items-center space-x-1"},IQt={class:"flex items-center space-x-1"},OQt={class:"bg-white divide-y divide-gray-200"},LQt={class:"px-6 py-4"},VQt=["checked","onChange"],NQt={class:"px-6 py-4 whitespace-nowrap"},jQt={class:"flex items-center"},FQt={class:"flex-shrink-0 h-10 w-10"},BQt={class:"h-10 w-10 rounded-lg bg-red-500 flex items-center justify-center text-white font-bold text-sm"},zQt={class:"ml-4"},UQt={class:"text-sm font-semibold text-gray-900"},HQt={class:"text-sm text-gray-500"},qQt={class:"px-6 py-4"},WQt={class:"text-sm font-medium text-gray-900"},GQt={class:"text-sm text-gray-500"},YQt={class:"px-6 py-4 whitespace-nowrap"},KQt={class:"text-sm font-medium text-gray-900"},XQt={class:"px-6 py-4 whitespace-nowrap"},QQt={class:"flex items-center"},ZQt={class:"text-sm font-medium text-gray-900"},JQt={class:"ml-2 w-12 bg-gray-200 rounded-full h-1.5"},eZt={class:"px-6 py-4 whitespace-nowrap"},tZt={class:"flex items-center space-x-2"},nZt={class:"text-sm font-medium text-gray-900"},rZt={class:"px-6 py-4 whitespace-nowrap"},sZt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},iZt={class:"flex items-center space-x-1"},aZt={key:1,class:"p-6"},oZt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},lZt=["onClick"],uZt={class:"flex items-start justify-between mb-4"},dZt={class:"flex items-center space-x-3"},cZt={class:"h-12 w-12 rounded-xl bg-red-500 flex items-center justify-center text-white font-bold"},fZt={class:"text-lg font-semibold text-gray-900 group-hover:text-red-900"},pZt={class:"text-sm text-gray-600"},hZt={class:"space-y-3"},mZt={class:"flex justify-between items-center mb-1"},gZt={class:"text-sm font-medium"},vZt={class:"w-full bg-gray-200 rounded-full h-2"},yZt={class:"flex justify-between items-center"},bZt={class:"text-sm font-medium"},xZt={class:"flex justify-between items-center"},_Zt={class:"text-sm font-medium"},wZt={class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200"},kZt={class:"flex items-center space-x-1"},SZt={class:"text-xs text-gray-500"},CZt={key:2,class:"px-6 py-20 text-center"},AZt={class:"mx-auto h-20 w-20 rounded-2xl bg-red-50 border-2 border-red-100 flex items-center justify-center mb-8 shadow-sm"},TZt={class:"max-w-md mx-auto"},$Zt={class:"flex flex-col sm:flex-row justify-center gap-3"},MZt={key:3,class:"px-6 py-12 text-center"},EZt={class:"p-1"},DZt={class:"space-y-6 p-6 bg-gray-50"},RZt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6"},PZt={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-red-300 cursor-pointer transition-all duration-200 group"},IZt={class:"flex items-start space-x-4 mb-5"},OZt={class:"flex-shrink-0 p-3 bg-red-50 rounded-xl group-hover:bg-red-100 transition-colors"},LZt={class:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-orange-300 cursor-pointer transition-all duration-200 group"},VZt={class:"flex items-start space-x-4 mb-5"},NZt={class:"flex-shrink-0 p-3 bg-orange-50 rounded-xl group-hover:bg-orange-100 transition-colors"},jZt={class:"space-y-6"},FZt={class:"bg-red-50 border border-red-200 rounded-lg p-4"},BZt={class:"text-red-800"},zZt={class:"font-semibold"},UZt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},HZt={class:"p-1"},qZt={class:"flex flex-col items-center justify-center space-y-2"},WZt={class:"p-1"},GZt={class:"flex flex-col items-center justify-center space-y-2"},YZt={class:"p-1"},KZt={class:"flex flex-col items-center justify-center space-y-2"},XZt={class:"p-1"},QZt={class:"flex flex-col items-center justify-center space-y-2"},ZZt={class:"space-y-6"},JZt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},eJt={class:"bg-red-50 rounded-lg p-6"},tJt={class:"space-y-3"},nJt={class:"flex justify-between"},rJt={class:"font-medium text-red-900"},sJt={class:"flex justify-between"},iJt={class:"font-medium text-red-900"},aJt={class:"flex justify-between"},oJt={class:"font-medium text-red-900"},lJt={class:"bg-orange-50 rounded-lg p-6"},uJt={class:"space-y-3"},dJt={class:"flex justify-between"},cJt={class:"font-medium text-orange-900"},fJt={class:"flex justify-between"},pJt={class:"font-medium text-orange-900"},hJt={class:"flex justify-between"},mJt={class:"font-medium text-orange-900"},gJt={class:"bg-purple-50 rounded-lg p-6"},vJt={class:"space-y-3"},yJt={class:"flex justify-between"},bJt={class:"font-medium text-purple-900"},xJt={class:"flex justify-between"},_Jt={class:"font-medium text-purple-900"},wJt={class:"flex justify-between"},kJt={class:"font-medium text-purple-900"},SJt={__name:"RiskAssessments",setup(t){const e=_n(),n=qo(),r=Q(!1),s=Q(!1),i=Q(!1),a=Q(!1),o=Q(!1),l=Q(!1);Q(!1);const d=Q(!1),c=Q(null),f=Q("create"),p=Q("table"),h=Q(""),m=Q(""),g=Q(""),y=Q(""),x=Q([]),_=Q("assessment_id"),k=Q("asc"),w=Z(()=>n.riskAssessments||[]),S=Z(()=>w.value.reduce((fe,me)=>{var ye;return fe+(((ye=me.top_risks)==null?void 0:ye.filter(Ee=>Ee.inherent_risk_score>=20).length)||0)},0)),C=Z(()=>w.value.reduce((fe,me)=>{var ye;return fe+(((ye=me.top_risks)==null?void 0:ye.filter(Ee=>Ee.inherent_risk_score>=15&&Ee.inherent_risk_score<20).length)||0)},0)),A=Z(()=>w.value.filter(fe=>fe.status==="Approved").length),M=Z(()=>{const fe=w.value;if(fe.length===0)return 0;const me=fe.reduce((ye,Ee)=>ye+U(Ee),0);return Math.round(me/fe.length)}),E=Z(()=>({total:w.value.length,criticalRisks:S.value,highRisks:C.value,approved:A.value,averageRiskScore:M.value})),P=Z(()=>w.value.reduce((fe,me)=>{var ye;return fe+(((ye=me.top_risks)==null?void 0:ye.filter(Ee=>Ee.inherent_risk_score>=10&&Ee.inherent_risk_score<15).length)||0)},0)),I=Z(()=>w.value.filter(fe=>fe.status==="In Progress").length),F=Z(()=>w.value.filter(fe=>fe.status==="Planning").length),L=Z(()=>M.value>15?"Increasing":"Stable"),z=Z(()=>"Operational");Z(()=>{const fe=new Date().getFullYear(),me=[];for(let ye=fe-2;ye<=fe+2;ye++)me.push({label:ye.toString(),value:ye.toString()});return me});const N=Z(()=>{let fe=w.value;if(h.value){const me=h.value.toLowerCase();fe=fe.filter(ye=>{var Ee,Re,Ye;return((Ee=ye.assessment_id)==null?void 0:Ee.toLowerCase().includes(me))||((Re=ye.assessment_name)==null?void 0:Re.toLowerCase().includes(me))||((Ye=ye.assessment_period)==null?void 0:Ye.toLowerCase().includes(me))})}return m.value&&(fe=fe.filter(me=>me.status===m.value)),g.value&&(fe=fe.filter(me=>me.assessment_period===g.value)),y.value&&(fe=fe.filter(me=>me.fiscal_year===y.value)),fe}),q=()=>{h.value="",m.value="",g.value="",y.value=""},V=()=>{i.value=!0;try{const fe=N.value.map(Ye=>{var Xe,st;return{"Assessment ID":Ye.assessment_id,"Assessment Name":Ye.assessment_name,Period:Ye.assessment_period,Year:Ye.fiscal_year,Date:ae(Ye.assessment_date),Status:Ye.status,"Total Risks":((Xe=Ye.risk_register)==null?void 0:Xe.length)||0,"Critical Risks":((st=Ye.top_risks)==null?void 0:st.length)||0,"Average Risk Score":U(Ye)}}),me=[Object.keys(fe[0]).join(","),...fe.map(Ye=>Object.values(Ye).map(Xe=>`"${Xe}"`).join(","))].join(`
`),ye=new Blob([me],{type:"text/csv"}),Ee=window.URL.createObjectURL(ye),Re=document.createElement("a");Re.href=Ee,Re.download=`risk-assessments-${new Date().toISOString().split("T")[0]}.csv`,Re.click(),window.URL.revokeObjectURL(Ee)}finally{i.value=!1}},O=()=>{x.value.length===N.value.length?x.value=[]:x.value=N.value.map(fe=>fe.name)},X=fe=>{const me=x.value.indexOf(fe);me>-1?x.value.splice(me,1):x.value.push(fe)},j=fe=>{_.value===fe?k.value=k.value==="asc"?"desc":"asc":(_.value=fe,k.value="asc")},U=fe=>{if(!fe.top_risks||fe.top_risks.length===0)return 0;const me=fe.top_risks.reduce((ye,Ee)=>ye+(Ee.inherent_risk_score||0),0);return Math.round(me/fe.top_risks.length)},G=fe=>fe>=20?"bg-red-500":fe>=15?"bg-orange-500":fe>=10?"bg-yellow-500":"bg-green-500",ee=(fe,me)=>{console.log("Show menu for assessment:",fe.name)},ie=()=>{console.log("Bulk update status for selected assessments")},ne=()=>{console.log("Bulk export selected assessments")},ce=()=>{console.log("Generate reports for selected assessments")},oe=()=>{console.log("Bulk delete selected assessments")},re=()=>{c.value=null,f.value="create",d.value=!0},te=fe=>{e.push(`/audit-planning/risk-assessment/${fe.name}`)},K=fe=>{c.value=fe,f.value="edit",d.value=!0},le=fe=>ue(this,null,function*(){try{s.value=!0,f.value==="create"?yield n.createRiskAssessment(fe):yield n.updateRiskAssessment(c.value.name,fe),d.value=!1,yield Y()}catch(me){console.error("Error saving assessment:",me)}finally{s.value=!1}}),H=()=>{d.value=!1,c.value=null},Y=()=>ue(this,null,function*(){r.value=!0;try{yield n.fetchRiskAssessments()}catch(fe){console.error("Error refreshing data:",fe)}finally{r.value=!1}}),B=fe=>ue(this,null,function*(){try{(yield n.fetchRiskAssessmentDetails(fe.name))&&e.push("/audit-planning/risk-assessment/new")}catch(me){console.error("Error duplicating assessment:",me)}}),ae=fe=>fe?new Date(fe).toLocaleDateString():"",be=fe=>({Planning:"secondary","In Progress":"warning",Review:"info",Finalized:"success",Approved:"success"})[fe]||"secondary";return et(N,()=>{x.value=[]}),et(h,()=>{}),et(m,()=>{x.value=[]}),et(g,()=>{x.value=[]}),et(y,()=>{x.value=[]}),(fe,me)=>(T(),R("div",pQt,[u("div",hQt,[u("div",null,[u("div",mQt,[u("div",gQt,[b(v(rn),{class:"h-6 w-6 text-red-600"})]),me[15]||(me[15]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Risk Assessments"),u("p",{class:"text-gray-600 mt-1"}," Conduct and manage comprehensive risk assessments with advanced analytics ")],-1))])]),u("div",vQt,[u("div",yQt,[u("div",bQt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:V,loading:i.value},{prefix:D(()=>[b(v(xn),{class:"h-3.5 w-3.5"})]),default:D(()=>[me[16]||(me[16]=W(" Export ",-1))]),_:1},8,["loading"])]),u("div",xQt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:me[0]||(me[0]=ye=>a.value=!0)},{prefix:D(()=>[b(v(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[me[17]||(me[17]=W(" Templates ",-1))]),_:1})]),u("div",_Qt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:Y,loading:r.value},{prefix:D(()=>[b(v(mn),{class:"h-3.5 w-3.5"})]),default:D(()=>[me[18]||(me[18]=W(" Refresh ",-1))]),_:1},8,["loading"])]),u("div",wQt,[b(v(J),{variant:"solid",theme:"red",size:"sm",onClick:re},{prefix:D(()=>[b(v(nt),{class:"h-3.5 w-3.5"})]),default:D(()=>[me[19]||(me[19]=W(" New Assessment ",-1))]),_:1})])])])]),b(fQt,{stats:E.value},null,8,["stats"]),b(wYt,{searchQuery:h.value,"onUpdate:searchQuery":me[1]||(me[1]=ye=>h.value=ye),filterStatus:m.value,"onUpdate:filterStatus":me[2]||(me[2]=ye=>m.value=ye),filterPeriod:g.value,"onUpdate:filterPeriod":me[3]||(me[3]=ye=>g.value=ye),filterYear:y.value,"onUpdate:filterYear":me[4]||(me[4]=ye=>y.value=ye),viewMode:p.value,selectedCount:x.value.length,filteredCount:N.value.length,totalCount:w.value.length,onBulkAction:me[5]||(me[5]=ye=>o.value=!0),onShowAnalytics:me[6]||(me[6]=ye=>l.value=!0),onToggleView:me[7]||(me[7]=ye=>p.value=p.value==="table"?"cards":"table"),onClearFilters:q},null,8,["searchQuery","filterStatus","filterPeriod","filterYear","viewMode","selectedCount","filteredCount","totalCount"]),u("div",kQt,[u("div",SQt,[u("div",CQt,[me[20]||(me[20]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Risk Assessments",-1)),u("div",AQt,[p.value==="table"&&N.value.length>0?(T(),R("div",TQt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:O},{default:D(()=>[W($(x.value.length===N.value.length?"Deselect All":"Select All"),1)]),_:1})])):se("",!0)])])]),p.value==="table"?(T(),R("div",$Qt,[u("table",MQt,[u("thead",EQt,[u("tr",null,[u("th",DQt,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-red-600 focus:ring-red-500",checked:x.value.length===N.value.length&&N.value.length>0,onChange:O},null,40,RQt)]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:me[8]||(me[8]=ye=>j("assessment_id"))},[u("div",PQt,[me[21]||(me[21]=u("span",null,"Assessment ID",-1)),b(v(Zu),{class:"h-3 w-3"})])]),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:me[9]||(me[9]=ye=>j("assessment_name"))},[u("div",IQt,[me[22]||(me[22]=u("span",null,"Name",-1)),b(v(Zu),{class:"h-3 w-3"})])]),me[23]||(me[23]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Period ",-1)),me[24]||(me[24]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Risk Score ",-1)),me[25]||(me[25]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Critical Risks ",-1)),me[26]||(me[26]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),me[27]||(me[27]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",OQt,[(T(!0),R(xe,null,_e(N.value,ye=>{var Ee,Re,Ye;return T(),R("tr",{key:ye.name,class:pe(["hover:bg-gray-50 transition-colors",{"bg-red-50":x.value.includes(ye.name)}])},[u("td",LQt,[u("input",{type:"checkbox",class:"rounded border-gray-300 text-red-600 focus:ring-red-500",checked:x.value.includes(ye.name),onChange:Xe=>X(ye.name)},null,40,VQt)]),u("td",NQt,[u("div",jQt,[u("div",FQt,[u("div",BQt,$(((Re=(Ee=ye.assessment_id)==null?void 0:Ee.charAt(0))==null?void 0:Re.toUpperCase())||"R"),1)]),u("div",zQt,[u("div",UQt,$(ye.assessment_id),1),u("div",HQt,$(ae(ye.assessment_date)),1)])])]),u("td",qQt,[u("div",WQt,$(ye.assessment_name),1),u("div",GQt,$(ye.fiscal_year),1)]),u("td",YQt,[u("div",KQt,$(ye.assessment_period),1)]),u("td",XQt,[u("div",QQt,[u("span",ZQt,$(U(ye)),1),u("div",JQt,[u("div",{class:pe(["h-1.5 rounded-full transition-all duration-300",G(U(ye))]),style:rt({width:`${Math.min(U(ye),25)*4}%`})},null,6)])])]),u("td",eZt,[u("div",tZt,[u("span",nZt,$(((Ye=ye.top_risks)==null?void 0:Ye.length)||0),1),me[28]||(me[28]=u("span",{class:"text-xs text-red-600"},"critical",-1))])]),u("td",rZt,[b(v(De),{variant:be(ye.status),size:"sm",class:"font-medium"},{default:D(()=>[W($(ye.status),1)]),_:2},1032,["variant"])]),u("td",sZt,[u("div",iZt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:Xe=>te(ye),class:"!p-1.5"},{default:D(()=>[b(v(lr),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:Xe=>K(ye),class:"!p-1.5"},{default:D(()=>[b(v(yn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:Xe=>B(ye),class:"!p-1.5"},{default:D(()=>[b(v(Yi),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:Xe=>ee(ye),class:"!p-1.5"},{default:D(()=>[b(v(V0),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"])])])],2)}),128))])])])):(T(),R("div",aZt,[u("div",oZt,[(T(!0),R(xe,null,_e(N.value,ye=>{var Ee,Re,Ye,Xe;return T(),R("div",{key:ye.name,class:pe(["bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",{"ring-2 ring-red-500 bg-red-50":x.value.includes(ye.name)}]),onClick:st=>X(ye.name)},[u("div",uZt,[u("div",dZt,[u("div",cZt,$(((Re=(Ee=ye.assessment_id)==null?void 0:Ee.charAt(0))==null?void 0:Re.toUpperCase())||"R"),1),u("div",null,[u("h3",fZt,$(ye.assessment_name),1),u("p",pZt,$(ye.assessment_period)+" "+$(ye.fiscal_year),1)])]),b(v(De),{variant:be(ye.status),size:"sm",class:"font-medium"},{default:D(()=>[W($(ye.status),1)]),_:2},1032,["variant"])]),u("div",hZt,[u("div",null,[u("div",mZt,[me[29]||(me[29]=u("span",{class:"text-sm text-gray-600"},"Risk Score",-1)),u("span",gZt,$(U(ye)),1)]),u("div",vZt,[u("div",{class:"bg-red-500 h-2 rounded-full transition-all duration-300",style:rt({width:`${Math.min(U(ye),25)*4}%`})},null,4)])]),u("div",yZt,[me[30]||(me[30]=u("span",{class:"text-sm text-gray-600"},"Critical Risks",-1)),u("span",bZt,$(((Ye=ye.top_risks)==null?void 0:Ye.length)||0),1)]),u("div",xZt,[me[31]||(me[31]=u("span",{class:"text-sm text-gray-600"},"Total Risks",-1)),u("span",_Zt,$(((Xe=ye.risk_register)==null?void 0:Xe.length)||0),1)])]),u("div",wZt,[u("div",kZt,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ut(st=>te(ye),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(lr),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ut(st=>K(ye),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(yn),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"]),b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:ut(st=>B(ye),["stop"]),class:"!p-1.5"},{default:D(()=>[b(v(Yi),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"])]),u("div",SZt,$(ae(ye.modified)),1)])],10,lZt)}),128))])])),N.value.length===0&&w.value.length===0?(T(),R("div",CZt,[u("div",AZt,[b(v(rn),{class:"h-10 w-10 text-red-500"})]),u("div",TZt,[me[34]||(me[34]=u("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"Welcome to Risk Assessments",-1)),me[35]||(me[35]=u("p",{class:"text-gray-600 mb-8 leading-relaxed"}," Conduct comprehensive risk assessments to identify, evaluate, and prioritize organizational risks. Build a robust risk management framework. ",-1)),u("div",$Zt,[b(v(J),{variant:"solid",theme:"red",size:"lg",onClick:re,class:"shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(v(nt),{class:"h-5 w-5"})]),default:D(()=>[me[32]||(me[32]=W(" Create Your First Assessment ",-1))]),_:1}),b(v(J),{variant:"outline",theme:"gray",size:"lg",onClick:me[10]||(me[10]=ye=>a.value=!0),class:"border-gray-300 hover:border-gray-400"},{prefix:D(()=>[b(v(vt),{class:"h-5 w-5"})]),default:D(()=>[me[33]||(me[33]=W(" Browse Templates ",-1))]),_:1})])]),me[36]||(me[36]=fr('<div class="mt-12 max-w-2xl mx-auto"><div class="bg-gray-50 border border-gray-200 rounded-xl p-6"><h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center"><div class="h-2 w-2 bg-red-500 rounded-full mr-3"></div> Quick Start Tips </h4><div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-red-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-red-600 font-semibold text-xs">1</span></div><div><p class="font-medium text-gray-900">Define Scope</p><p class="text-gray-600">Set clear assessment boundaries and objectives</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-orange-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-orange-600 font-semibold text-xs">2</span></div><div><p class="font-medium text-gray-900">Identify Risks</p><p class="text-gray-600">Use multiple methodologies to identify risks</p></div></div><div class="flex items-start space-x-3"><div class="flex-shrink-0 h-6 w-6 bg-green-100 rounded-lg flex items-center justify-center mt-0.5"><span class="text-green-600 font-semibold text-xs">3</span></div><div><p class="font-medium text-gray-900">Assess &amp; Prioritize</p><p class="text-gray-600">Evaluate impact and likelihood for prioritization</p></div></div></div></div></div>',1))])):N.value.length===0?(T(),R("div",MZt,[b(v(En),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),me[38]||(me[38]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No assessments found",-1)),me[39]||(me[39]=u("p",{class:"text-gray-600 mb-6"}," Try adjusting your search or filter criteria to find the assessments you're looking for. ",-1)),u("div",EZt,[b(v(J),{variant:"solid",theme:"gray",onClick:q},{default:D(()=>[...me[37]||(me[37]=[W(" Clear Filters ",-1)])]),_:1})])])):se("",!0)]),b(v(jt),{modelValue:a.value,"onUpdate:modelValue":me[11]||(me[11]=ye=>a.value=ye),title:"Assessment Templates",options:{size:"custom",width:"70vw"}},{body:D(()=>[u("div",DZt,[me[46]||(me[46]=u("div",{class:"bg-red-50 border border-red-200 rounded-lg p-4"},[u("p",{class:"text-red-800 text-sm"},[W("  "),u("strong",null,"Pro Tip:"),W(" Templates provide a structured starting point with predefined risk categories and assessment methodologies. ")])],-1)),u("div",RZt,[u("div",PZt,[u("div",IZt,[u("div",OZt,[b(v(rn),{class:"h-6 w-6 text-red-600"})]),me[40]||(me[40]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-red-900 transition-colors"},"Comprehensive Risk Assessment"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Complete risk assessment covering all major risk categories")],-1))]),me[42]||(me[42]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-red-400 rounded-full"}),u("span",null,"Strategic risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-red-400 rounded-full"}),u("span",null,"Operational risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-red-400 rounded-full"}),u("span",null,"Financial risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-red-400 rounded-full"}),u("span",null,"Compliance risks")])])],-1)),b(v(J),{variant:"solid",theme:"red",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow"},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[me[41]||(me[41]=W(" Use This Template ",-1))]),_:1})]),u("div",LZt,[u("div",VZt,[u("div",NZt,[b(v(hr),{class:"h-6 w-6 text-orange-600"})]),me[43]||(me[43]=u("div",{class:"flex-1"},[u("h3",{class:"font-bold text-gray-900 text-lg mb-2 group-hover:text-orange-900 transition-colors"},"IT Risk Assessment"),u("p",{class:"text-gray-600 text-sm leading-relaxed"},"Technology-focused risk assessment with cybersecurity emphasis")],-1))]),me[45]||(me[45]=u("div",{class:"mb-6"},[u("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Includes:"),u("ul",{class:"text-sm text-gray-600 space-y-2"},[u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-orange-400 rounded-full"}),u("span",null,"Cybersecurity risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-orange-400 rounded-full"}),u("span",null,"Data privacy risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-orange-400 rounded-full"}),u("span",null,"System availability risks")]),u("li",{class:"flex items-center space-x-2"},[u("div",{class:"h-1.5 w-1.5 bg-orange-400 rounded-full"}),u("span",null,"Technology change risks")])])],-1)),b(v(J),{variant:"solid",theme:"gray",size:"md",class:"w-full shadow-sm hover:shadow-md transition-shadow bg-orange-500 hover:bg-orange-600 text-white border-orange-500"},{prefix:D(()=>[b(v(hr),{class:"h-4 w-4"})]),default:D(()=>[me[44]||(me[44]=W(" Use This Template ",-1))]),_:1})])])])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:o.value,"onUpdate:modelValue":me[12]||(me[12]=ye=>o.value=ye),title:"Bulk Actions",size:"xl"},{body:D(()=>[u("div",jZt,[u("div",FZt,[u("p",BZt,[u("span",zZt,$(x.value.length),1),me[47]||(me[47]=W(" assessment(s) selected for bulk action. ",-1))])]),u("div",UZt,[u("div",HZt,[b(v(J),{variant:"solid",theme:"green",class:"h-20 w-full",onClick:ie},{default:D(()=>[u("div",qZt,[b(v(Kt),{class:"h-5 w-5"}),me[48]||(me[48]=u("span",{class:"text-sm font-medium"},"Update Status",-1))])]),_:1})]),u("div",WZt,[b(v(J),{variant:"solid",theme:"blue",class:"h-20 w-full",onClick:ne},{default:D(()=>[u("div",GZt,[b(v(xn),{class:"h-5 w-5"}),me[49]||(me[49]=u("span",{class:"text-sm font-medium"},"Export Selected",-1))])]),_:1})]),u("div",YZt,[b(v(J),{variant:"solid",theme:"purple",class:"h-20 w-full",onClick:ce},{default:D(()=>[u("div",KZt,[b(v(vt),{class:"h-5 w-5"}),me[50]||(me[50]=u("span",{class:"text-sm font-medium"},"Generate Reports",-1))])]),_:1})]),u("div",XZt,[b(v(J),{variant:"solid",theme:"red",class:"h-20 w-full",onClick:oe},{default:D(()=>[u("div",QZt,[b(v(es),{class:"h-5 w-5"}),me[51]||(me[51]=u("span",{class:"text-sm font-medium"},"Delete Selected",-1))])]),_:1})])])])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:l.value,"onUpdate:modelValue":me[13]||(me[13]=ye=>l.value=ye),title:"Risk Analytics Dashboard",size:"5xl"},{body:D(()=>[u("div",ZZt,[u("div",JZt,[u("div",eJt,[me[55]||(me[55]=u("h3",{class:"text-lg font-semibold text-red-900 mb-4"},"Risk Distribution",-1)),u("div",tJt,[u("div",nJt,[me[52]||(me[52]=u("span",{class:"text-red-700"},"Critical Risks",-1)),u("span",rJt,$(S.value),1)]),u("div",sJt,[me[53]||(me[53]=u("span",{class:"text-red-700"},"High Risks",-1)),u("span",iJt,$(C.value),1)]),u("div",aJt,[me[54]||(me[54]=u("span",{class:"text-red-700"},"Medium Risks",-1)),u("span",oJt,$(P.value),1)])])]),u("div",lJt,[me[59]||(me[59]=u("h3",{class:"text-lg font-semibold text-orange-900 mb-4"},"Assessment Progress",-1)),u("div",uJt,[u("div",dJt,[me[56]||(me[56]=u("span",{class:"text-orange-700"},"Completed",-1)),u("span",cJt,$(A.value),1)]),u("div",fJt,[me[57]||(me[57]=u("span",{class:"text-orange-700"},"In Progress",-1)),u("span",pJt,$(I.value),1)]),u("div",hJt,[me[58]||(me[58]=u("span",{class:"text-orange-700"},"Planning",-1)),u("span",mJt,$(F.value),1)])])]),u("div",gJt,[me[63]||(me[63]=u("h3",{class:"text-lg font-semibold text-purple-900 mb-4"},"Risk Trends",-1)),u("div",vJt,[u("div",yJt,[me[60]||(me[60]=u("span",{class:"text-purple-700"},"Average Score",-1)),u("span",bJt,$(M.value),1)]),u("div",xJt,[me[61]||(me[61]=u("span",{class:"text-purple-700"},"Trend",-1)),u("span",_Jt,$(L.value),1)]),u("div",wJt,[me[62]||(me[62]=u("span",{class:"text-purple-700"},"Top Category",-1)),u("span",kJt,$(z.value),1)])])])]),me[64]||(me[64]=u("div",{class:"bg-white border border-gray-200 rounded-lg p-6"},[u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Risk Heat Map"),u("div",{class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},[u("p",{class:"text-gray-500"},"Risk heat map visualization would be displayed here")])],-1))])]),_:1},8,["modelValue"]),b(UXt,{modelValue:d.value,"onUpdate:modelValue":me[14]||(me[14]=ye=>d.value=ye),assessment:c.value,mode:f.value,onSubmit:le,onCancel:H},null,8,["modelValue","assessment","mode"])]))}},CJt={class:"space-y-6"},AJt={class:"flex items-center justify-between"},TJt={class:"flex items-center space-x-3"},$Jt={class:"bg-white rounded-lg border border-gray-200"},MJt={class:"border-b border-gray-200"},EJt={class:"flex overflow-x-auto"},DJt=["onClick"],RJt={class:"p-6"},PJt={key:0,class:"flex items-center justify-center py-12"},IJt={key:1},OJt={key:0,class:"space-y-6"},LJt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},VJt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},NJt={class:"space-y-4"},jJt={class:"space-y-4"},FJt={class:"flex flex-wrap gap-2"},BJt={key:1,class:"space-y-6"},zJt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},UJt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},HJt={class:"space-y-4"},qJt={class:"space-y-2"},WJt={class:"flex items-center justify-between"},GJt={class:"flex items-center justify-between"},YJt={class:"flex items-center justify-between"},KJt={class:"space-y-4"},XJt={class:"flex items-center justify-between"},QJt={key:2,class:"space-y-6"},ZJt={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},JJt={class:"space-y-6"},een={class:"p-4 border border-gray-200 rounded-lg bg-gray-50"},ten={class:"space-y-4"},nen={class:"flex space-x-2"},ren={class:"flex items-center justify-between"},sen={class:"p-4 border border-gray-200 rounded-lg"},ien={class:"space-y-4"},aen={class:"flex items-center justify-between"},oen={key:0,class:"space-y-4 pl-4 border-l-2 border-blue-200"},len={class:"p-4 border border-gray-200 rounded-lg"},uen={class:"grid grid-cols-2 gap-4"},den={class:"flex items-center space-x-2"},cen={class:"flex items-center space-x-2"},fen={class:"flex items-center space-x-2"},pen={class:"flex items-center space-x-2"},hen={class:"flex items-center space-x-2"},men={class:"flex items-center space-x-2"},gen={class:"mt-4 pt-4 border-t border-gray-200"},ven={class:"flex items-center justify-between"},yen={class:"text-xs text-gray-500"},ben={key:3,class:"space-y-6"},xen={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},_en={class:"space-y-6"},wen={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ken={class:"space-y-4"},Sen={class:"flex items-center justify-between"},Cen={class:"space-y-4"},Aen={class:"flex items-center justify-between"},Ten={class:"border-t pt-6"},$en={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Men={class:"space-y-4"},Een={class:"space-y-4"},Den={class:"flex items-center justify-between"},Ren={key:4,class:"space-y-6"},Pen={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},Ien={class:"space-y-6"},Oen={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Len={class:"flex items-center space-x-3"},Ven={class:"p-2 bg-blue-100 rounded-lg"},Nen={class:"text-sm font-medium text-gray-900"},jen={class:"text-xs text-gray-500"},Fen={class:"border-t pt-6"},Ben={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},zen={class:"border-t pt-6"},Uen={class:"space-y-4"},Hen={class:"flex items-center justify-between"},qen={class:"flex items-center space-x-2"},Wen={key:1,class:"text-sm text-gray-600"},Gen={class:"flex items-center justify-between"},Yen={class:"flex items-center justify-between"},Ken={key:5,class:"space-y-6"},Xen={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},Qen={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zen={class:"space-y-4"},Jen={class:"space-y-4"},etn={class:"flex items-center justify-between"},ttn={class:"flex items-center justify-between"},ntn={class:"flex items-center justify-between"},rtn={class:"flex items-center justify-between"},stn={key:6,class:"space-y-6"},itn={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},atn={class:"space-y-6"},otn={class:"space-y-4"},ltn={class:"flex items-center justify-between"},utn={class:"flex items-center space-x-2"},dtn={class:"space-y-2"},ctn={class:"flex items-center justify-between"},ftn={class:"flex items-center space-x-2"},ptn={class:"flex items-center space-x-2"},htn={class:"flex items-center space-x-2"},mtn={class:"border-t pt-6"},gtn={class:"space-y-4"},vtn={class:"flex items-center justify-between"},ytn={class:"flex items-center justify-between"},btn={class:"flex items-center space-x-2"},xtn={key:1,class:"text-sm text-gray-600"},_tn={key:7,class:"space-y-6"},wtn={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},ktn={class:"space-y-4"},Stn={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},Ctn={class:"flex items-center space-x-3"},Atn={class:"p-2 bg-blue-100 rounded-lg"},Ttn={class:"flex items-center space-x-2"},$tn={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},Mtn={class:"flex items-center space-x-3"},Etn={class:"p-2 bg-green-100 rounded-lg"},Dtn={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},Rtn={class:"flex items-center space-x-3"},Ptn={class:"p-2 bg-purple-100 rounded-lg"},Itn={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},Otn={class:"flex items-center space-x-3"},Ltn={class:"p-2 bg-orange-100 rounded-lg"},Vtn={class:"flex items-center space-x-2"},Ntn={key:8,class:"space-y-6"},jtn={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},Ftn={class:"space-y-6"},Btn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ztn={class:"space-y-4"},Utn={class:"flex items-center justify-between"},Htn={class:"space-y-4"},qtn={class:"flex items-center justify-between"},Wtn={class:"border-t pt-6"},Gtn={class:"space-y-3"},Ytn={class:"flex items-center space-x-3"},Ktn={class:"text-sm font-medium text-gray-900"},Xtn={class:"text-xs text-gray-500"},Qtn={class:"flex items-center space-x-2"},Ztn={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},Jtn={class:"flex justify-between items-center"},enn={class:"text-sm text-gray-600"},tnn={class:"flex space-x-3"},yW={__name:"Settings",props:{defaultTab:{type:String,default:"general"}},setup(t){const n=Q(t.defaultTab),r=Q(!1),s=Q(!1),i=Q(!1),a=Q(!1),o=Q({totalDocuments:0}),l=Q(!0),d=Q({systemName:"Internal Audit Management System",organizationName:"",dateFormat:"MM/dd/yyyy",timezone:"UTC",auditYearStart:"January",currency:"KES",workingDays:["monday","tuesday","wednesday","thursday","friday"],riskThresholds:{high:80,medium:50},auditPlanningPeriod:"quarterly",autoAssignTasks:!1,defaultFindingSeverity:"medium",followUpReminderDays:30,requireManagementResponse:!0,openrouterApiKey:"",selectedModel:"meta-llama/llama-3.1-8b-instruct:free",enableAiAssistant:!0,ragEnabled:!0,maxContextChunks:5,embeddingModel:"all-MiniLM-L6-v2",indexAuditFindings:!0,indexWorkingPapers:!0,indexAuditPrograms:!0,indexTestExecutions:!0,indexRiskAssessments:!0,indexComplianceRequirements:!0,defaultImportType:"csv",csvDelimiter:",",autoDetectEncoding:!0,maxFileSize:50,importBatchSize:1e3,validateOnImport:!0,bcApiEndpoint:"",bcCompanyName:"",bcSyncFrequency:"daily",bcAutoSync:!1,enabledRegulatoryBodies:["kra","cmak"],taxFilingPeriod:"annually",auditReportPeriod:"annually",complianceReviewPeriod:"quarterly",deadlineAlerts:!0,deadlineAlertDays:7,violationAlerts:!0,escalationAlerts:!0,theme:"light",language:"en",dashboardLayout:"grid",emailNotifications:!0,pushNotifications:!1,autoSave:!0,compactMode:!1,twoFactorEnabled:!1,sessionTimeout:"30",passwordPolicy:{minLength:8,requireUppercase:!0,requireNumbers:!0,requireSpecialChars:!1},auditDataEncryption:!0,dataRetentionEnabled:!0,dataRetentionYears:7,accessLogging:"detailed",bcIntegration:!1,apiAccess:!1,defaultReportFormat:"pdf",chartLibrary:"chartjs",autoGenerateReports:!1,reportRetentionPeriod:"1year",dashboardRefreshRate:"5min",exportRawData:!1,lastUpdated:new Date().toISOString()}),c=[{id:"general",name:"General",icon:ha},{id:"audit",name:"Audit",icon:dw},{id:"ai",name:"AI Chat",icon:Mc},{id:"data-import",name:"Data Import",icon:Kr},{id:"compliance",name:"Compliance",icon:Ds},{id:"preferences",name:"Preferences",icon:Ji},{id:"security",name:"Security",icon:Ju},{id:"integrations",name:"Integrations",icon:XL},{id:"reports",name:"Reports",icon:hr}],f=[{label:"MM/DD/YYYY",value:"MM/dd/yyyy"},{label:"DD/MM/YYYY",value:"dd/MM/yyyy"},{label:"YYYY-MM-DD",value:"yyyy-MM-dd"}],p=[{label:"UTC",value:"UTC"},{label:"EAT (UTC+3)",value:"EAT"},{label:"EST (UTC-5)",value:"EST"},{label:"PST (UTC-8)",value:"PST"},{label:"GMT",value:"GMT"}],h=[{label:"January",value:"January"},{label:"February",value:"February"},{label:"March",value:"March"},{label:"April",value:"April"},{label:"May",value:"May"},{label:"June",value:"June"},{label:"July",value:"July"},{label:"August",value:"August"},{label:"September",value:"September"},{label:"October",value:"October"},{label:"November",value:"November"},{label:"December",value:"December"}],m=[{label:"Kenyan Shilling (KES)",value:"KES"},{label:"US Dollar (USD)",value:"USD"},{label:"Euro (EUR)",value:"EUR"},{label:"British Pound (GBP)",value:"GBP"}],g=[{value:"monday",label:"Mon"},{value:"tuesday",label:"Tue"},{value:"wednesday",label:"Wed"},{value:"thursday",label:"Thu"},{value:"friday",label:"Fri"},{value:"saturday",label:"Sat"},{value:"sunday",label:"Sun"}],y=[{label:"Monthly",value:"monthly"},{label:"Quarterly",value:"quarterly"},{label:"Semi-annually",value:"semi-annual"},{label:"Annually",value:"annually"}],x=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Critical",value:"critical"}],_=[{label:"Llama 3.1 8B (Free)",value:"meta-llama/llama-3.1-8b-instruct:free"},{label:"Gemma 2 9B (Free)",value:"google/gemma-2-9b-it:free"},{label:"Qwen 2.5 7B (Free)",value:"qwen/qwen-2.5-7b-instruct:free"}],k=[{label:"all-MiniLM-L6-v2 (Recommended)",value:"all-MiniLM-L6-v2"},{label:"all-mpnet-base-v2 (Higher quality)",value:"all-mpnet-base-v2"}],w=[{label:"CSV",value:"csv"},{label:"Excel",value:"excel"},{label:"JSON",value:"json"},{label:"XML",value:"xml"}],S=[{label:"Comma (,)",value:","},{label:"Semicolon (;)",value:";"},{label:"Tab",value:"	"},{label:"Pipe (|)",value:"|"}],C=[{label:"Real-time",value:"realtime"},{label:"Hourly",value:"hourly"},{label:"Daily",value:"daily"},{label:"Weekly",value:"weekly"}],A=[{id:"kra",name:"Kenya Revenue Authority",description:"Tax collection and administration",icon:Ds},{id:"cmak",name:"CMA Kenya",description:"Capital Markets Authority",icon:Ds},{id:"cbk",name:"Central Bank of Kenya",description:"Financial sector regulation",icon:Ds},{id:"ira",name:"Insurance Regulatory Authority",description:"Insurance sector oversight",icon:Ds},{id:"rba",name:"Retirement Benefits Authority",description:"Pension schemes regulation",icon:Ds},{id:"ppra",name:"Public Procurement Regulatory Authority",description:"Public procurement oversight",icon:Ds}],M=[{label:"Monthly",value:"monthly"},{label:"Quarterly",value:"quarterly"},{label:"Semi-annually",value:"semi-annual"},{label:"Annually",value:"annually"}],E=[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"Auto",value:"auto"}],P=[{label:"English",value:"en"},{label:"Swahili",value:"sw"},{label:"Spanish",value:"es"},{label:"French",value:"fr"}],I=[{label:"Grid",value:"grid"},{label:"List",value:"list"},{label:"Cards",value:"cards"}],F=[{label:"15 minutes",value:"15"},{label:"30 minutes",value:"30"},{label:"1 hour",value:"60"},{label:"4 hours",value:"240"},{label:"8 hours",value:"480"}],L=[{label:"None",value:"none"},{label:"Basic",value:"basic"},{label:"Detailed",value:"detailed"},{label:"Full Audit",value:"full"}],z=[{label:"PDF",value:"pdf"},{label:"Excel",value:"excel"},{label:"Word",value:"word"},{label:"HTML",value:"html"}],N=[{label:"Chart.js",value:"chartjs"},{label:"D3.js",value:"d3"},{label:"Highcharts",value:"highcharts"}],q=[{label:"6 months",value:"6months"},{label:"1 year",value:"1year"},{label:"2 years",value:"2years"},{label:"5 years",value:"5years"},{label:"10 years",value:"10years"}],V=[{label:"30 seconds",value:"30sec"},{label:"1 minute",value:"1min"},{label:"5 minutes",value:"5min"},{label:"15 minutes",value:"15min"},{label:"1 hour",value:"1hour"}],O=[{id:"audit-summary",name:"Audit Summary Report",description:"Comprehensive audit findings and recommendations",icon:dw,enabled:!0},{id:"compliance-status",name:"Compliance Status Report",description:"Regulatory compliance status and gaps",icon:Ds,enabled:!0},{id:"risk-assessment",name:"Risk Assessment Report",description:"Risk analysis and mitigation strategies",icon:hr,enabled:!0},{id:"financial-audit",name:"Financial Audit Report",description:"Financial controls and transaction reviews",icon:Kr,enabled:!1}];yt(()=>ue(this,null,function*(){yield X()}));const X=()=>ue(this,null,function*(){try{l.value=!0;const te=yield Ke("mkaguzi.api.chat.get_chat_settings");te&&(d.value.enableAiAssistant=te.enable_ai_chat||!1,d.value.openrouterApiKey=te.openrouter_api_key||"",d.value.selectedModel=te.default_model||"meta-llama/llama-3.1-8b-instruct:free",d.value.ragEnabled=te.enable_rag||!1,d.value.maxContextChunks=te.max_context_chunks||5,d.value.embeddingModel=te.embedding_model||"all-MiniLM-L6-v2",d.value.indexAuditFindings=te.index_audit_findings||!1,d.value.indexWorkingPapers=te.index_working_papers||!1,d.value.indexAuditPrograms=te.index_audit_programs||!1,d.value.indexTestExecutions=te.index_test_executions||!1,d.value.indexRiskAssessments=te.index_risk_assessments||!1,d.value.indexComplianceRequirements=te.index_compliance_requirements||!1,d.value.lastUpdated=te.modified||new Date().toISOString())}catch(te){console.error("Error loading settings:",te)}finally{l.value=!1}}),j=()=>{d.value.twoFactorEnabled=!d.value.twoFactorEnabled},U=()=>{d.value.bcIntegration=!d.value.bcIntegration},G=()=>{d.value.apiAccess=!d.value.apiAccess},ee=()=>ue(this,null,function*(){if(!d.value.openrouterApiKey){alert("Please enter an API key first");return}i.value=!0;try{yield ne();const te=yield Ke("mkaguzi.api.chat.test_ai_connection");te!=null&&te.success?alert(" AI connection successful! Available models: "+(te.free_models_count||0)):alert(" Connection failed: "+((te==null?void 0:te.error)||"Unknown error"))}catch(te){alert(" Connection test failed: "+te.message)}finally{i.value=!1}}),ie=()=>ue(this,null,function*(){if(confirm("This will rebuild the entire RAG index. This may take a few minutes. Continue?")){a.value=!0;try{yield Ke("mkaguzi.chat_system.chat_service.rebuild_rag_index");const te=yield Ke("mkaguzi.api.chat.get_index_stats");te&&(o.value=te),alert(" Index rebuilt successfully!")}catch(te){alert(" Index rebuild failed: "+te.message)}finally{a.value=!1}}}),ne=()=>ue(this,null,function*(){const te={enable_ai_chat:d.value.enableAiAssistant,openrouter_api_key:d.value.openrouterApiKey,default_model:d.value.selectedModel,enable_rag:d.value.ragEnabled,max_context_chunks:d.value.maxContextChunks,embedding_model:d.value.embeddingModel,index_audit_findings:d.value.indexAuditFindings,index_working_papers:d.value.indexWorkingPapers,index_audit_programs:d.value.indexAuditPrograms,index_test_executions:d.value.indexTestExecutions,index_risk_assessments:d.value.indexRiskAssessments,index_compliance_requirements:d.value.indexComplianceRequirements};return yield Ke("mkaguzi.api.chat.save_chat_settings",{settings_data:te})}),ce=()=>ue(this,null,function*(){r.value=!0;try{d.value.lastUpdated=new Date().toISOString(),yield ne(),alert("Settings saved successfully!")}catch(te){console.error("Error saving settings:",te),alert("Error saving settings. Please try again.")}finally{r.value=!1}}),oe=()=>{confirm("Are you sure you want to reset all settings to defaults? This action cannot be undone.")&&console.log("Resetting to defaults")},re=te=>te?new Date(te).toLocaleString():"Never";return(te,K)=>(T(),R("div",CJt,[u("div",AJt,[K[69]||(K[69]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"System Settings"),u("p",{class:"text-gray-600 mt-1"}," Configure audit system preferences, data imports, and compliance settings ")],-1)),u("div",TJt,[b(v(J),{variant:"outline"},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),K[67]||(K[67]=W(" Export Settings ",-1))]),_:1}),b(v(J),{variant:"outline"},{default:D(()=>[b(v(xa),{class:"h-4 w-4 mr-2"}),K[68]||(K[68]=W(" Import Settings ",-1))]),_:1})])]),u("div",$Jt,[u("div",MJt,[u("nav",EJt,[(T(),R(xe,null,_e(c,le=>u("button",{key:le.id,class:pe(["px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors",n.value===le.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]),onClick:H=>n.value=le.id},[(T(),he(At(le.icon),{class:"h-4 w-4 mr-2 inline"})),W(" "+$(le.name),1)],10,DJt)),64))])]),u("div",RJt,[l.value?(T(),R("div",PJt,[...K[70]||(K[70]=[u("div",{class:"text-center"},[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),u("p",{class:"mt-2 text-sm text-gray-600"},"Loading settings...")],-1)])])):(T(),R("div",IJt,[n.value==="general"?(T(),R("div",OJt,[u("div",null,[u("h3",LJt,[b(v(ha),{class:"h-5 w-5 mr-2"}),K[71]||(K[71]=W(" General Settings ",-1))]),u("div",VJt,[u("div",NJt,[u("div",null,[K[72]||(K[72]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"System Name",-1)),b(v($n),{modelValue:d.value.systemName,"onUpdate:modelValue":K[0]||(K[0]=le=>d.value.systemName=le),placeholder:"Internal Audit Management System",class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[73]||(K[73]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organization Name",-1)),b(v($n),{modelValue:d.value.organizationName,"onUpdate:modelValue":K[1]||(K[1]=le=>d.value.organizationName=le),placeholder:"Your Organization Name",class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[74]||(K[74]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Date Format",-1)),b(v(Qe),{modelValue:d.value.dateFormat,"onUpdate:modelValue":K[2]||(K[2]=le=>d.value.dateFormat=le),options:f,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[75]||(K[75]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Timezone",-1)),b(v(Qe),{modelValue:d.value.timezone,"onUpdate:modelValue":K[3]||(K[3]=le=>d.value.timezone=le),options:p,class:"w-full"},null,8,["modelValue"])])]),u("div",jJt,[u("div",null,[K[76]||(K[76]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Audit Year Start",-1)),b(v(Qe),{modelValue:d.value.auditYearStart,"onUpdate:modelValue":K[4]||(K[4]=le=>d.value.auditYearStart=le),options:h,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[77]||(K[77]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Currency",-1)),b(v(Qe),{modelValue:d.value.currency,"onUpdate:modelValue":K[5]||(K[5]=le=>d.value.currency=le),options:m,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[78]||(K[78]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Working Days",-1)),u("div",FJt,[(T(),R(xe,null,_e(g,le=>b(v(St),{key:le.value,modelValue:d.value.workingDays,"onUpdate:modelValue":K[6]||(K[6]=H=>d.value.workingDays=H),value:le.value,label:le.label,class:"text-sm"},null,8,["modelValue","value","label"])),64))])])])])])])):se("",!0),n.value==="audit"?(T(),R("div",BJt,[u("div",null,[u("h3",zJt,[b(v(dw),{class:"h-5 w-5 mr-2"}),K[79]||(K[79]=W(" Audit Configuration ",-1))]),u("div",UJt,[u("div",HJt,[u("div",null,[K[84]||(K[84]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Risk Assessment Thresholds",-1)),u("div",qJt,[u("div",WJt,[K[80]||(K[80]=u("span",{class:"text-sm text-gray-600"},"High Risk",-1)),b(v($n),{modelValue:d.value.riskThresholds.high,"onUpdate:modelValue":K[7]||(K[7]=le=>d.value.riskThresholds.high=le),type:"number",min:"0",max:"100",class:"w-20"},null,8,["modelValue"]),K[81]||(K[81]=u("span",{class:"text-sm text-gray-600"},"%",-1))]),u("div",GJt,[K[82]||(K[82]=u("span",{class:"text-sm text-gray-600"},"Medium Risk",-1)),b(v($n),{modelValue:d.value.riskThresholds.medium,"onUpdate:modelValue":K[8]||(K[8]=le=>d.value.riskThresholds.medium=le),type:"number",min:"0",max:"100",class:"w-20"},null,8,["modelValue"]),K[83]||(K[83]=u("span",{class:"text-sm text-gray-600"},"%",-1))])])]),u("div",null,[K[85]||(K[85]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Audit Planning Period",-1)),b(v(Qe),{modelValue:d.value.auditPlanningPeriod,"onUpdate:modelValue":K[9]||(K[9]=le=>d.value.auditPlanningPeriod=le),options:y,class:"w-full"},null,8,["modelValue"])]),u("div",YJt,[K[86]||(K[86]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-assign Audit Tasks"),u("p",{class:"text-sm text-gray-500"},"Automatically assign tasks based on workload")],-1)),b(v(St),{modelValue:d.value.autoAssignTasks,"onUpdate:modelValue":K[10]||(K[10]=le=>d.value.autoAssignTasks=le)},null,8,["modelValue"])])]),u("div",KJt,[u("div",null,[K[87]||(K[87]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Finding Severity",-1)),b(v(Qe),{modelValue:d.value.defaultFindingSeverity,"onUpdate:modelValue":K[11]||(K[11]=le=>d.value.defaultFindingSeverity=le),options:x,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[88]||(K[88]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Follow-up Reminder Days",-1)),b(v($n),{modelValue:d.value.followUpReminderDays,"onUpdate:modelValue":K[12]||(K[12]=le=>d.value.followUpReminderDays=le),type:"number",min:"1",max:"365",class:"w-full"},null,8,["modelValue"])]),u("div",XJt,[K[89]||(K[89]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Require Management Response"),u("p",{class:"text-sm text-gray-500"},"Management must respond to all findings")],-1)),b(v(St),{modelValue:d.value.requireManagementResponse,"onUpdate:modelValue":K[13]||(K[13]=le=>d.value.requireManagementResponse=le)},null,8,["modelValue"])])])])])])):se("",!0),n.value==="ai"?(T(),R("div",QJt,[u("div",null,[u("h3",ZJt,[b(v(Mc),{class:"h-5 w-5 mr-2"}),K[90]||(K[90]=W(" AI Chat Configuration ",-1))]),u("div",JJt,[u("div",een,[K[97]||(K[97]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"OpenRouter API",-1)),u("div",ten,[u("div",null,[K[92]||(K[92]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"API Key",-1)),u("div",nen,[b(v($n),{type:s.value?"text":"password",modelValue:d.value.openrouterApiKey,"onUpdate:modelValue":K[14]||(K[14]=le=>d.value.openrouterApiKey=le),placeholder:"sk-or-v1-...",class:"flex-1"},null,8,["type","modelValue"]),b(v(J),{variant:"outline",size:"sm",onClick:K[15]||(K[15]=le=>s.value=!s.value)},{default:D(()=>[W($(s.value?"Hide":"Show"),1)]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:ee,loading:i.value},{default:D(()=>[...K[91]||(K[91]=[W(" Test ",-1)])]),_:1},8,["loading"])]),K[93]||(K[93]=u("p",{class:"text-xs text-gray-500 mt-1"},[W(" Get your free API key from "),u("a",{href:"https://openrouter.ai",target:"_blank",class:"text-blue-600 hover:underline"},"openrouter.ai")],-1))]),u("div",null,[K[94]||(K[94]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"AI Model",-1)),b(v(Qe),{modelValue:d.value.selectedModel,"onUpdate:modelValue":K[16]||(K[16]=le=>d.value.selectedModel=le),options:_,class:"w-full"},null,8,["modelValue"]),K[95]||(K[95]=u("p",{class:"text-xs text-gray-500 mt-1"},"Free tier models with good performance",-1))]),u("div",ren,[K[96]||(K[96]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Enable AI Assistant"),u("p",{class:"text-sm text-gray-500"},"Allow AI-powered responses in chat rooms")],-1)),b(v(St),{modelValue:d.value.enableAiAssistant,"onUpdate:modelValue":K[17]||(K[17]=le=>d.value.enableAiAssistant=le)},null,8,["modelValue"])])])]),u("div",sen,[K[102]||(K[102]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"RAG (Retrieval-Augmented Generation)",-1)),u("div",ien,[u("div",aen,[K[98]||(K[98]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Enable RAG"),u("p",{class:"text-sm text-gray-500"},"Use audit documents as context for AI responses")],-1)),b(v(St),{modelValue:d.value.ragEnabled,"onUpdate:modelValue":K[18]||(K[18]=le=>d.value.ragEnabled=le)},null,8,["modelValue"])]),d.value.ragEnabled?(T(),R("div",oen,[u("div",null,[K[99]||(K[99]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Max Context Chunks",-1)),b(v($n),{modelValue:d.value.maxContextChunks,"onUpdate:modelValue":K[19]||(K[19]=le=>d.value.maxContextChunks=le),type:"number",min:"1",max:"20",class:"w-32"},null,8,["modelValue"]),K[100]||(K[100]=u("p",{class:"text-xs text-gray-500 mt-1"},"Number of relevant document sections to include",-1))]),u("div",null,[K[101]||(K[101]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Embedding Model",-1)),b(v(Qe),{modelValue:d.value.embeddingModel,"onUpdate:modelValue":K[20]||(K[20]=le=>d.value.embeddingModel=le),options:k,class:"w-full"},null,8,["modelValue"])])])):se("",!0)])]),u("div",len,[K[111]||(K[111]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Document Indexing",-1)),K[112]||(K[112]=u("p",{class:"text-sm text-gray-500 mb-4"},"Select which document types to index for AI context",-1)),u("div",uen,[u("div",den,[b(v(St),{modelValue:d.value.indexAuditFindings,"onUpdate:modelValue":K[21]||(K[21]=le=>d.value.indexAuditFindings=le)},null,8,["modelValue"]),K[103]||(K[103]=u("span",{class:"text-sm text-gray-700"},"Audit Findings",-1))]),u("div",cen,[b(v(St),{modelValue:d.value.indexWorkingPapers,"onUpdate:modelValue":K[22]||(K[22]=le=>d.value.indexWorkingPapers=le)},null,8,["modelValue"]),K[104]||(K[104]=u("span",{class:"text-sm text-gray-700"},"Working Papers",-1))]),u("div",fen,[b(v(St),{modelValue:d.value.indexAuditPrograms,"onUpdate:modelValue":K[23]||(K[23]=le=>d.value.indexAuditPrograms=le)},null,8,["modelValue"]),K[105]||(K[105]=u("span",{class:"text-sm text-gray-700"},"Audit Programs",-1))]),u("div",pen,[b(v(St),{modelValue:d.value.indexTestExecutions,"onUpdate:modelValue":K[24]||(K[24]=le=>d.value.indexTestExecutions=le)},null,8,["modelValue"]),K[106]||(K[106]=u("span",{class:"text-sm text-gray-700"},"Test Executions",-1))]),u("div",hen,[b(v(St),{modelValue:d.value.indexRiskAssessments,"onUpdate:modelValue":K[25]||(K[25]=le=>d.value.indexRiskAssessments=le)},null,8,["modelValue"]),K[107]||(K[107]=u("span",{class:"text-sm text-gray-700"},"Risk Assessments",-1))]),u("div",men,[b(v(St),{modelValue:d.value.indexComplianceRequirements,"onUpdate:modelValue":K[26]||(K[26]=le=>d.value.indexComplianceRequirements=le)},null,8,["modelValue"]),K[108]||(K[108]=u("span",{class:"text-sm text-gray-700"},"Compliance Requirements",-1))])]),u("div",gen,[u("div",ven,[u("div",null,[K[109]||(K[109]=u("p",{class:"text-sm font-medium text-gray-700"},"Index Statistics",-1)),u("p",yen,$(o.value.totalDocuments||0)+" documents indexed",1)]),b(v(J),{variant:"outline",size:"sm",onClick:ie,loading:a.value},{default:D(()=>[...K[110]||(K[110]=[W(" Rebuild Index ",-1)])]),_:1},8,["loading"])])])])])])])):se("",!0),n.value==="data-import"?(T(),R("div",ben,[u("div",null,[u("h3",xen,[b(v(Kr),{class:"h-5 w-5 mr-2"}),K[113]||(K[113]=W(" Data Import Configuration ",-1))]),u("div",_en,[u("div",wen,[u("div",ken,[u("div",null,[K[114]||(K[114]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Import Type",-1)),b(v(Qe),{modelValue:d.value.defaultImportType,"onUpdate:modelValue":K[27]||(K[27]=le=>d.value.defaultImportType=le),options:w,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[115]||(K[115]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"CSV Delimiter",-1)),b(v(Qe),{modelValue:d.value.csvDelimiter,"onUpdate:modelValue":K[28]||(K[28]=le=>d.value.csvDelimiter=le),options:S,class:"w-full"},null,8,["modelValue"])]),u("div",Sen,[K[116]||(K[116]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-detect Encoding"),u("p",{class:"text-sm text-gray-500"},"Automatically detect file encoding")],-1)),b(v(St),{modelValue:d.value.autoDetectEncoding,"onUpdate:modelValue":K[29]||(K[29]=le=>d.value.autoDetectEncoding=le)},null,8,["modelValue"])])]),u("div",Cen,[u("div",null,[K[117]||(K[117]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Max File Size (MB)",-1)),b(v($n),{modelValue:d.value.maxFileSize,"onUpdate:modelValue":K[30]||(K[30]=le=>d.value.maxFileSize=le),type:"number",min:"1",max:"100",class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[118]||(K[118]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Import Batch Size",-1)),b(v($n),{modelValue:d.value.importBatchSize,"onUpdate:modelValue":K[31]||(K[31]=le=>d.value.importBatchSize=le),type:"number",min:"100",max:"10000",class:"w-full"},null,8,["modelValue"])]),u("div",Aen,[K[119]||(K[119]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Validate Data on Import"),u("p",{class:"text-sm text-gray-500"},"Perform data validation during import")],-1)),b(v(St),{modelValue:d.value.validateOnImport,"onUpdate:modelValue":K[32]||(K[32]=le=>d.value.validateOnImport=le)},null,8,["modelValue"])])])]),u("div",Ten,[K[124]||(K[124]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Business Central Integration",-1)),u("div",$en,[u("div",Men,[u("div",null,[K[120]||(K[120]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"BC API Endpoint",-1)),b(v($n),{modelValue:d.value.bcApiEndpoint,"onUpdate:modelValue":K[33]||(K[33]=le=>d.value.bcApiEndpoint=le),placeholder:"https://api.businesscentral.dynamics.com",class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[121]||(K[121]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Company Name",-1)),b(v($n),{modelValue:d.value.bcCompanyName,"onUpdate:modelValue":K[34]||(K[34]=le=>d.value.bcCompanyName=le),placeholder:"CRONUS International Ltd.",class:"w-full"},null,8,["modelValue"])])]),u("div",Een,[u("div",null,[K[122]||(K[122]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sync Frequency",-1)),b(v(Qe),{modelValue:d.value.bcSyncFrequency,"onUpdate:modelValue":K[35]||(K[35]=le=>d.value.bcSyncFrequency=le),options:C,class:"w-full"},null,8,["modelValue"])]),u("div",Den,[K[123]||(K[123]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-sync Enabled"),u("p",{class:"text-sm text-gray-500"},"Automatically sync data from BC")],-1)),b(v(St),{modelValue:d.value.bcAutoSync,"onUpdate:modelValue":K[36]||(K[36]=le=>d.value.bcAutoSync=le)},null,8,["modelValue"])])])])])])])])):se("",!0),n.value==="compliance"?(T(),R("div",Ren,[u("div",null,[u("h3",Pen,[b(v(Ds),{class:"h-5 w-5 mr-2"}),K[125]||(K[125]=W(" Compliance Settings ",-1))]),u("div",Ien,[u("div",null,[K[126]||(K[126]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Kenyan Regulatory Bodies",-1)),u("div",Oen,[(T(),R(xe,null,_e(A,le=>u("div",{key:le.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},[u("div",Len,[u("div",Ven,[(T(),he(At(le.icon),{class:"h-4 w-4 text-blue-600"}))]),u("div",null,[u("p",Nen,$(le.name),1),u("p",jen,$(le.description),1)])]),b(v(St),{modelValue:d.value.enabledRegulatoryBodies,"onUpdate:modelValue":K[37]||(K[37]=H=>d.value.enabledRegulatoryBodies=H),value:le.id},null,8,["modelValue","value"])])),64))])]),u("div",Fen,[K[130]||(K[130]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Compliance Periods",-1)),u("div",Ben,[u("div",null,[K[127]||(K[127]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tax Filing Period",-1)),b(v(Qe),{modelValue:d.value.taxFilingPeriod,"onUpdate:modelValue":K[38]||(K[38]=le=>d.value.taxFilingPeriod=le),options:M,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[128]||(K[128]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Audit Report Period",-1)),b(v(Qe),{modelValue:d.value.auditReportPeriod,"onUpdate:modelValue":K[39]||(K[39]=le=>d.value.auditReportPeriod=le),options:M,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[129]||(K[129]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Compliance Review Period",-1)),b(v(Qe),{modelValue:d.value.complianceReviewPeriod,"onUpdate:modelValue":K[40]||(K[40]=le=>d.value.complianceReviewPeriod=le),options:M,class:"w-full"},null,8,["modelValue"])])])]),u("div",zen,[K[134]||(K[134]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Compliance Alerts",-1)),u("div",Uen,[u("div",Hen,[K[131]||(K[131]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Deadline Alerts"),u("p",{class:"text-sm text-gray-500"},"Send alerts before compliance deadlines")],-1)),u("div",qen,[b(v(St),{modelValue:d.value.deadlineAlerts,"onUpdate:modelValue":K[41]||(K[41]=le=>d.value.deadlineAlerts=le)},null,8,["modelValue"]),d.value.deadlineAlerts?(T(),he(v($n),{key:0,modelValue:d.value.deadlineAlertDays,"onUpdate:modelValue":K[42]||(K[42]=le=>d.value.deadlineAlertDays=le),type:"number",min:"1",max:"30",class:"w-16",placeholder:"7"},null,8,["modelValue"])):se("",!0),d.value.deadlineAlerts?(T(),R("span",Wen,"days before")):se("",!0)])]),u("div",Gen,[K[132]||(K[132]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Violation Alerts"),u("p",{class:"text-sm text-gray-500"},"Alert on compliance violations")],-1)),b(v(St),{modelValue:d.value.violationAlerts,"onUpdate:modelValue":K[43]||(K[43]=le=>d.value.violationAlerts=le)},null,8,["modelValue"])]),u("div",Yen,[K[133]||(K[133]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Escalation Alerts"),u("p",{class:"text-sm text-gray-500"},"Escalate unresolved compliance issues")],-1)),b(v(St),{modelValue:d.value.escalationAlerts,"onUpdate:modelValue":K[44]||(K[44]=le=>d.value.escalationAlerts=le)},null,8,["modelValue"])])])])])])])):se("",!0),n.value==="preferences"?(T(),R("div",Ken,[u("div",null,[u("h3",Xen,[b(v(Ji),{class:"h-5 w-5 mr-2"}),K[135]||(K[135]=W(" User Preferences ",-1))]),u("div",Qen,[u("div",Zen,[u("div",null,[K[136]||(K[136]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Theme",-1)),b(v(Qe),{modelValue:d.value.theme,"onUpdate:modelValue":K[45]||(K[45]=le=>d.value.theme=le),options:E,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[137]||(K[137]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Language",-1)),b(v(Qe),{modelValue:d.value.language,"onUpdate:modelValue":K[46]||(K[46]=le=>d.value.language=le),options:P,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[138]||(K[138]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dashboard Layout",-1)),b(v(Qe),{modelValue:d.value.dashboardLayout,"onUpdate:modelValue":K[47]||(K[47]=le=>d.value.dashboardLayout=le),options:I,class:"w-full"},null,8,["modelValue"])])]),u("div",Jen,[u("div",etn,[K[139]||(K[139]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Email Notifications"),u("p",{class:"text-sm text-gray-500"},"Receive email notifications")],-1)),b(v(St),{modelValue:d.value.emailNotifications,"onUpdate:modelValue":K[48]||(K[48]=le=>d.value.emailNotifications=le)},null,8,["modelValue"])]),u("div",ttn,[K[140]||(K[140]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Push Notifications"),u("p",{class:"text-sm text-gray-500"},"Receive browser push notifications")],-1)),b(v(St),{modelValue:d.value.pushNotifications,"onUpdate:modelValue":K[49]||(K[49]=le=>d.value.pushNotifications=le)},null,8,["modelValue"])]),u("div",ntn,[K[141]||(K[141]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-save"),u("p",{class:"text-sm text-gray-500"},"Automatically save changes")],-1)),b(v(St),{modelValue:d.value.autoSave,"onUpdate:modelValue":K[50]||(K[50]=le=>d.value.autoSave=le)},null,8,["modelValue"])]),u("div",rtn,[K[142]||(K[142]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Compact Mode"),u("p",{class:"text-sm text-gray-500"},"Use compact UI elements")],-1)),b(v(St),{modelValue:d.value.compactMode,"onUpdate:modelValue":K[51]||(K[51]=le=>d.value.compactMode=le)},null,8,["modelValue"])])])])])])):se("",!0),n.value==="security"?(T(),R("div",stn,[u("div",null,[u("h3",itn,[b(v(Ju),{class:"h-5 w-5 mr-2"}),K[143]||(K[143]=W(" Security Settings ",-1))]),u("div",atn,[u("div",null,[K[151]||(K[151]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Authentication",-1)),u("div",otn,[u("div",ltn,[K[144]||(K[144]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Two-Factor Authentication"),u("p",{class:"text-sm text-gray-500"},"Enable 2FA for enhanced security")],-1)),u("div",utn,[b(v(De),{variant:d.value.twoFactorEnabled?"success":"secondary"},{default:D(()=>[W($(d.value.twoFactorEnabled?"Enabled":"Disabled"),1)]),_:1},8,["variant"]),b(v(J),{variant:"outline",size:"sm",onClick:j},{default:D(()=>[W($(d.value.twoFactorEnabled?"Disable":"Enable"),1)]),_:1})])]),u("div",null,[K[145]||(K[145]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Session Timeout",-1)),b(v(Qe),{modelValue:d.value.sessionTimeout,"onUpdate:modelValue":K[52]||(K[52]=le=>d.value.sessionTimeout=le),options:F,class:"w-full md:w-64"},null,8,["modelValue"])]),u("div",null,[K[150]||(K[150]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Password Policy",-1)),u("div",dtn,[u("div",ctn,[K[146]||(K[146]=u("span",{class:"text-sm text-gray-600"},"Minimum Length",-1)),b(v($n),{modelValue:d.value.passwordPolicy.minLength,"onUpdate:modelValue":K[53]||(K[53]=le=>d.value.passwordPolicy.minLength=le),type:"number",min:"8",max:"32",class:"w-20"},null,8,["modelValue"])]),u("div",ftn,[b(v(St),{modelValue:d.value.passwordPolicy.requireUppercase,"onUpdate:modelValue":K[54]||(K[54]=le=>d.value.passwordPolicy.requireUppercase=le)},null,8,["modelValue"]),K[147]||(K[147]=u("span",{class:"text-sm text-gray-600"},"Require uppercase",-1))]),u("div",ptn,[b(v(St),{modelValue:d.value.passwordPolicy.requireNumbers,"onUpdate:modelValue":K[55]||(K[55]=le=>d.value.passwordPolicy.requireNumbers=le)},null,8,["modelValue"]),K[148]||(K[148]=u("span",{class:"text-sm text-gray-600"},"Require numbers",-1))]),u("div",htn,[b(v(St),{modelValue:d.value.passwordPolicy.requireSpecialChars,"onUpdate:modelValue":K[56]||(K[56]=le=>d.value.passwordPolicy.requireSpecialChars=le)},null,8,["modelValue"]),K[149]||(K[149]=u("span",{class:"text-sm text-gray-600"},"Require special characters",-1))])])])])]),u("div",mtn,[K[155]||(K[155]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Data Security",-1)),u("div",gtn,[u("div",vtn,[K[152]||(K[152]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Audit Data Encryption"),u("p",{class:"text-sm text-gray-500"},"Encrypt sensitive audit data at rest")],-1)),b(v(St),{modelValue:d.value.auditDataEncryption,"onUpdate:modelValue":K[57]||(K[57]=le=>d.value.auditDataEncryption=le)},null,8,["modelValue"])]),u("div",ytn,[K[153]||(K[153]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Data Retention Policy"),u("p",{class:"text-sm text-gray-500"},"Automatically delete old audit data")],-1)),u("div",btn,[b(v(St),{modelValue:d.value.dataRetentionEnabled,"onUpdate:modelValue":K[58]||(K[58]=le=>d.value.dataRetentionEnabled=le)},null,8,["modelValue"]),d.value.dataRetentionEnabled?(T(),he(v($n),{key:0,modelValue:d.value.dataRetentionYears,"onUpdate:modelValue":K[59]||(K[59]=le=>d.value.dataRetentionYears=le),type:"number",min:"1",max:"10",class:"w-16",placeholder:"7"},null,8,["modelValue"])):se("",!0),d.value.dataRetentionEnabled?(T(),R("span",xtn,"years")):se("",!0)])]),u("div",null,[K[154]||(K[154]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Access Logging",-1)),b(v(Qe),{modelValue:d.value.accessLogging,"onUpdate:modelValue":K[60]||(K[60]=le=>d.value.accessLogging=le),options:L,class:"w-full md:w-64"},null,8,["modelValue"])])])])])])])):se("",!0),n.value==="integrations"?(T(),R("div",_tn,[u("div",null,[u("h3",wtn,[b(v(XL),{class:"h-5 w-5 mr-2"}),K[156]||(K[156]=W(" Integrations ",-1))]),u("div",ktn,[u("div",Stn,[u("div",Ctn,[u("div",Atn,[b(v(Kr),{class:"h-5 w-5 text-blue-600"})]),K[157]||(K[157]=u("div",null,[u("h4",{class:"text-sm font-medium text-gray-900"},"Microsoft Business Central"),u("p",{class:"text-sm text-gray-500"},"Connect to Dynamics 365 Business Central for financial data")],-1))]),u("div",Ttn,[b(v(De),{variant:d.value.bcIntegration?"success":"secondary"},{default:D(()=>[W($(d.value.bcIntegration?"Connected":"Disconnected"),1)]),_:1},8,["variant"]),b(v(J),{variant:"outline",size:"sm",onClick:U},{default:D(()=>[W($(d.value.bcIntegration?"Disconnect":"Connect"),1)]),_:1})])]),u("div",$tn,[u("div",Mtn,[u("div",Etn,[b(v(Mfe),{class:"h-5 w-5 text-green-600"})]),K[158]||(K[158]=u("div",null,[u("h4",{class:"text-sm font-medium text-gray-900"},"Email Service"),u("p",{class:"text-sm text-gray-500"},"Configure email notifications and reports")],-1))]),b(v(J),{variant:"outline",size:"sm"},{default:D(()=>[...K[159]||(K[159]=[W(" Configure ",-1)])]),_:1})]),u("div",Dtn,[u("div",Rtn,[u("div",Ptn,[b(v(XD),{class:"h-5 w-5 text-purple-600"})]),K[160]||(K[160]=u("div",null,[u("h4",{class:"text-sm font-medium text-gray-900"},"Cloud Storage"),u("p",{class:"text-sm text-gray-500"},"Store audit files and backups in the cloud")],-1))]),b(v(J),{variant:"outline",size:"sm"},{default:D(()=>[...K[161]||(K[161]=[W(" Configure ",-1)])]),_:1})]),u("div",Itn,[u("div",Otn,[u("div",Ltn,[b(v(bY),{class:"h-5 w-5 text-orange-600"})]),K[162]||(K[162]=u("div",null,[u("h4",{class:"text-sm font-medium text-gray-900"},"API Access"),u("p",{class:"text-sm text-gray-500"},"Enable API access for external integrations")],-1))]),u("div",Vtn,[b(v(De),{variant:d.value.apiAccess?"success":"secondary"},{default:D(()=>[W($(d.value.apiAccess?"Enabled":"Disabled"),1)]),_:1},8,["variant"]),b(v(J),{variant:"outline",size:"sm",onClick:G},{default:D(()=>[W($(d.value.apiAccess?"Disable":"Enable"),1)]),_:1})])])])])])):se("",!0),n.value==="reports"?(T(),R("div",Ntn,[u("div",null,[u("h3",jtn,[b(v(hr),{class:"h-5 w-5 mr-2"}),K[163]||(K[163]=W(" Reports & Analytics ",-1))]),u("div",Ftn,[u("div",Btn,[u("div",ztn,[u("div",null,[K[164]||(K[164]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Report Format",-1)),b(v(Qe),{modelValue:d.value.defaultReportFormat,"onUpdate:modelValue":K[61]||(K[61]=le=>d.value.defaultReportFormat=le),options:z,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[165]||(K[165]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chart Library",-1)),b(v(Qe),{modelValue:d.value.chartLibrary,"onUpdate:modelValue":K[62]||(K[62]=le=>d.value.chartLibrary=le),options:N,class:"w-full"},null,8,["modelValue"])]),u("div",Utn,[K[166]||(K[166]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto-generate Reports"),u("p",{class:"text-sm text-gray-500"},"Automatically generate periodic reports")],-1)),b(v(St),{modelValue:d.value.autoGenerateReports,"onUpdate:modelValue":K[63]||(K[63]=le=>d.value.autoGenerateReports=le)},null,8,["modelValue"])])]),u("div",Htn,[u("div",null,[K[167]||(K[167]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Report Retention Period",-1)),b(v(Qe),{modelValue:d.value.reportRetentionPeriod,"onUpdate:modelValue":K[64]||(K[64]=le=>d.value.reportRetentionPeriod=le),options:q,class:"w-full"},null,8,["modelValue"])]),u("div",null,[K[168]||(K[168]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dashboard Refresh Rate",-1)),b(v(Qe),{modelValue:d.value.dashboardRefreshRate,"onUpdate:modelValue":K[65]||(K[65]=le=>d.value.dashboardRefreshRate=le),options:V,class:"w-full"},null,8,["modelValue"])]),u("div",qtn,[K[169]||(K[169]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Export Raw Data"),u("p",{class:"text-sm text-gray-500"},"Allow exporting raw audit data")],-1)),b(v(St),{modelValue:d.value.exportRawData,"onUpdate:modelValue":K[66]||(K[66]=le=>d.value.exportRawData=le)},null,8,["modelValue"])])])]),u("div",Wtn,[K[171]||(K[171]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Report Templates",-1)),u("div",Gtn,[(T(),R(xe,null,_e(O,le=>u("div",{key:le.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},[u("div",Ytn,[(T(),he(At(le.icon),{class:"h-4 w-4 text-gray-600"})),u("div",null,[u("p",Ktn,$(le.name),1),u("p",Xtn,$(le.description),1)])]),u("div",Qtn,[b(v(De),{variant:le.enabled?"success":"secondary",size:"sm"},{default:D(()=>[W($(le.enabled?"Enabled":"Disabled"),1)]),_:2},1032,["variant"]),b(v(J),{variant:"ghost",size:"sm"},{default:D(()=>[...K[170]||(K[170]=[W(" Configure ",-1)])]),_:1})])])),64))])])])])])):se("",!0)]))]),u("div",Ztn,[u("div",Jtn,[u("div",enn," Last updated: "+$(re(d.value.lastUpdated)),1),u("div",tnn,[b(v(J),{variant:"outline",onClick:oe},{default:D(()=>[...K[172]||(K[172]=[W(" Reset to Defaults ",-1)])]),_:1}),b(v(J),{onClick:ce,loading:r.value},{default:D(()=>[b(v($r),{class:"h-4 w-4 mr-2"}),K[173]||(K[173]=W(" Save Changes ",-1))]),_:1},8,["loading"])])])])])]))}},nnn={class:"flex h-[75vh]"},rnn={class:"w-56 border-r pr-4 flex-shrink-0"},snn={class:"space-y-1 sticky top-0"},inn=["onClick"],ann={class:"flex-1"},onn={class:"mt-6 pt-6 border-t"},lnn={class:"w-full bg-gray-200 rounded-full h-2"},unn={class:"text-xs text-gray-500 mt-1"},dnn={class:"flex-1 pl-6 overflow-y-auto"},cnn={class:"space-y-6"},fnn={class:"grid grid-cols-2 gap-6"},pnn={class:"space-y-6"},hnn={class:"grid grid-cols-3 gap-6"},mnn={class:"border rounded-lg p-4 bg-gray-50"},gnn={class:"grid grid-cols-2 gap-6"},vnn={class:"flex items-center gap-3"},ynn={class:"grid grid-cols-2 gap-6 mt-4"},bnn={class:"grid grid-cols-2 gap-6 mt-4"},xnn={class:"mt-4"},_nn={class:"border-2 border-dashed rounded-lg p-4 text-center"},wnn={class:"space-y-6"},knn={class:"grid grid-cols-2 gap-6"},Snn={class:"flex items-center gap-3 pt-6"},Cnn={class:"grid grid-cols-3 gap-6"},Ann={class:"space-y-6"},Tnn={class:"grid grid-cols-2 gap-6"},$nn={class:"grid grid-cols-2 gap-6"},Mnn={class:"border rounded-lg p-4 bg-blue-50"},Enn={class:"flex items-center justify-between"},Dnn={class:"text-xl font-bold text-blue-800"},Rnn={class:"grid grid-cols-3 gap-6"},Pnn={class:"flex items-center gap-3"},Inn={class:"space-y-6"},Onn={class:"border rounded-lg p-4"},Lnn={class:"font-medium text-gray-700 mb-4 flex items-center gap-2"},Vnn={class:"grid grid-cols-3 gap-6"},Nnn={class:"grid grid-cols-2 gap-6 mt-4"},jnn={class:"flex items-center gap-3"},Fnn={class:"border rounded-lg p-4"},Bnn={class:"font-medium text-gray-700 mb-4 flex items-center gap-2"},znn={class:"grid grid-cols-2 gap-6"},Unn={class:"flex items-center gap-3 mt-4"},Hnn={class:"space-y-6"},qnn={class:"border rounded-lg p-6 bg-gradient-to-r from-blue-50 to-purple-50"},Wnn={class:"flex items-center justify-between mb-4"},Gnn={class:"w-full bg-gray-200 rounded-full h-3"},Ynn={class:"border rounded-lg overflow-hidden"},Knn={class:"bg-gray-50 px-4 py-3 border-b flex items-center justify-between"},Xnn={class:"divide-y max-h-64 overflow-y-auto"},Qnn={class:"grid grid-cols-12 gap-4 items-start"},Znn={class:"col-span-2"},Jnn={class:"col-span-4"},ern={class:"col-span-2"},trn={class:"col-span-2"},nrn={class:"col-span-2 flex justify-end"},rrn={key:0,class:"mt-3"},srn={key:0,class:"p-8 text-center text-gray-500"},irn={class:"flex items-center justify-between w-full"},arn={class:"flex items-center gap-2"},orn={class:"flex items-center gap-2"},lrn={__name:"TaxComplianceForm",props:{show:{type:Boolean,default:!1},tracker:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.show,set:P=>r("update:show",P)}),i=Z(()=>{var P;return!!((P=n.tracker)!=null&&P.name)}),a=Q(!1),o=Q("basic"),l=[{id:"basic",label:"Basic Info",icon:vt},{id:"vat",label:"VAT",icon:QS},{id:"paye",label:"PAYE",icon:WS},{id:"wht",label:"Withholding Tax",icon:XS},{id:"statutory",label:"Statutory",icon:Ol},{id:"issues",label:"Issues",icon:qr}],d=Jt({tracker_id:"",tax_period:"",vat_on_sales:0,vat_on_purchases:0,net_vat_payable:0,vat_return_filed:!1,vat_return_reference:"",vat_filing_date:"",vat_payment_date:"",vat_payment_amount:0,vat_payment_reference:"",vat_reconciliation:"",total_paye:0,paye_return_filed:!1,paye_filing_date:"",paye_payment_date:"",paye_payment_reference:"",wht_on_services:0,wht_on_rent:0,wht_on_professional_fees:0,other_wht:0,total_wht:0,wht_return_filed:!1,wht_filing_date:"",wht_payment_date:"",employee_contributions:0,employer_contributions:0,total_nssf:0,nssf_return_filed:!1,nssf_payment_date:"",total_nhif:0,nhif_return_filed:!1,nhif_payment_date:"",compliance_score:0,issues_identified:[]}),c=[{label:"Late Filing",value:"Late Filing"},{label:"Late Payment",value:"Late Payment"},{label:"Underpayment",value:"Underpayment"},{label:"Documentation",value:"Documentation"},{label:"Other",value:"Other"}],f=[{label:"Open",value:"Open"},{label:"Resolved",value:"Resolved"}];et(()=>n.tracker,P=>{P&&Object.keys(d).forEach(I=>{P[I]!==void 0&&(d[I]=P[I])})},{immediate:!0}),et(()=>n.show,P=>{P&&!n.tracker&&(Object.keys(d).forEach(I=>{I==="issues_identified"?d[I]=[]:typeof d[I]=="boolean"?d[I]=!1:typeof d[I]=="number"?d[I]=0:d[I]=""}),o.value="basic")});function p(){d.net_vat_payable=(d.vat_on_sales||0)-(d.vat_on_purchases||0)}function h(){d.total_wht=(d.wht_on_services||0)+(d.wht_on_rent||0)+(d.wht_on_professional_fees||0)+(d.other_wht||0)}function m(){d.total_nssf=(d.employee_contributions||0)+(d.employer_contributions||0)}function g(){d.issues_identified.push({issue_type:"",description:"",financial_impact:0,resolution_status:"Open",resolution_notes:""})}function y(P){d.issues_identified.splice(P,1)}const x=Z(()=>l.findIndex(P=>P.id===o.value));function _(){x.value<l.length-1&&(o.value=l[x.value+1].id)}function k(){x.value>0&&(o.value=l[x.value-1].id)}function w(P){switch(P){case"basic":return!!d.tracker_id&&!!d.tax_period;case"vat":return d.vat_return_filed;case"paye":return d.paye_return_filed;case"wht":return d.wht_return_filed;case"statutory":return d.nssf_return_filed&&d.nhif_return_filed;case"issues":return!0;default:return!1}}const S=Z(()=>{const P=l.filter(I=>w(I.id)).length;return Math.round(P/l.length*100)});function C(P){return new Intl.NumberFormat("en-KE").format(P)}function A(P){return P>=90?"green":P>=70?"blue":P>=50?"orange":"red"}function M(P){return P>=90?"bg-green-500":P>=70?"bg-blue-500":P>=50?"bg-orange-500":"bg-red-500"}function E(){return ue(this,null,function*(){a.value=!0;try{yield new Promise(P=>setTimeout(P,1e3)),r("saved",ge({},d)),s.value=!1}catch(P){console.error("Failed to save tracker:",P)}finally{a.value=!1}})}return(P,I)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":I[32]||(I[32]=F=>s.value=F),options:{size:"7xl",title:i.value?"Edit Tax Compliance Tracker":"New Tax Compliance Tracker"}},{"body-content":D(()=>{var F;return[u("div",nnn,[u("div",rnn,[u("nav",snn,[(T(),R(xe,null,_e(l,(L,z)=>u("button",{key:L.id,onClick:N=>o.value=L.id,class:pe(["w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",o.value===L.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50"])},[(T(),he(At(L.icon),{class:pe(["h-4 w-4",o.value===L.id?"text-blue-600":"text-gray-400"])},null,8,["class"])),u("span",ann,$(L.label),1),w(L.id)?(T(),he(v(Kt),{key:0,class:"h-4 w-4 text-green-500"})):se("",!0)],10,inn)),64))]),u("div",onn,[I[33]||(I[33]=u("div",{class:"text-xs font-medium text-gray-500 mb-2"},"Completion",-1)),u("div",lnn,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:rt({width:`${S.value}%`})},null,4)]),u("div",unn,$(S.value)+"% complete",1)])]),u("div",dnn,[we(u("div",cnn,[b(Vt,{title:"Basic Information",description:"Tracker identification and tax period details"}),u("div",fnn,[b(v(ve),{modelValue:d.tracker_id,"onUpdate:modelValue":I[0]||(I[0]=L=>d.tracker_id=L),label:"Tracker ID",type:"text",required:!0,placeholder:"Auto-generated if left empty"},null,8,["modelValue"]),b(Mt,{modelValue:d.tax_period,"onUpdate:modelValue":I[1]||(I[1]=L=>d.tax_period=L),label:"Tax Period",doctype:"Data Period",required:!0,placeholder:"Select tax period"},null,8,["modelValue"])])],512),[[lt,o.value==="basic"]]),we(u("div",pnn,[b(Vt,{title:"VAT Compliance",description:"Value Added Tax calculations and filings"}),u("div",hnn,[b(v(ve),{modelValue:d.vat_on_sales,"onUpdate:modelValue":I[2]||(I[2]=L=>d.vat_on_sales=L),label:"VAT on Sales",type:"number",placeholder:"0.00",onChange:p},null,8,["modelValue"]),b(v(ve),{modelValue:d.vat_on_purchases,"onUpdate:modelValue":I[3]||(I[3]=L=>d.vat_on_purchases=L),label:"VAT on Purchases",type:"number",placeholder:"0.00",onChange:p},null,8,["modelValue"]),b(v(ve),{modelValue:d.net_vat_payable,"onUpdate:modelValue":I[4]||(I[4]=L=>d.net_vat_payable=L),label:"Net VAT Payable",type:"number",disabled:!0},null,8,["modelValue"])]),u("div",mnn,[I[38]||(I[38]=u("h4",{class:"font-medium text-gray-700 mb-4"},"VAT Filing Details",-1)),u("div",gnn,[u("div",vnn,[we(u("input",{type:"checkbox","onUpdate:modelValue":I[5]||(I[5]=L=>d.vat_return_filed=L),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[Rn,d.vat_return_filed]]),I[34]||(I[34]=u("label",{class:"text-sm text-gray-700"},"VAT Return Filed",-1))]),b(v(ve),{modelValue:d.vat_return_reference,"onUpdate:modelValue":I[6]||(I[6]=L=>d.vat_return_reference=L),label:"Return Reference",type:"text",placeholder:"Enter reference number"},null,8,["modelValue"])]),u("div",ynn,[b(v(ve),{modelValue:d.vat_filing_date,"onUpdate:modelValue":I[7]||(I[7]=L=>d.vat_filing_date=L),label:"Filing Date",type:"date"},null,8,["modelValue"]),b(v(ve),{modelValue:d.vat_payment_date,"onUpdate:modelValue":I[8]||(I[8]=L=>d.vat_payment_date=L),label:"Payment Date",type:"date"},null,8,["modelValue"])]),u("div",bnn,[b(v(ve),{modelValue:d.vat_payment_amount,"onUpdate:modelValue":I[9]||(I[9]=L=>d.vat_payment_amount=L),label:"Payment Amount",type:"number",placeholder:"0.00"},null,8,["modelValue"]),b(v(ve),{modelValue:d.vat_payment_reference,"onUpdate:modelValue":I[10]||(I[10]=L=>d.vat_payment_reference=L),label:"Payment Reference",type:"text",placeholder:"Enter payment reference"},null,8,["modelValue"])]),u("div",xnn,[I[37]||(I[37]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," VAT Reconciliation Document ",-1)),u("div",_nn,[b(v(xa),{class:"h-8 w-8 text-gray-400 mx-auto mb-2"}),I[35]||(I[35]=u("p",{class:"text-sm text-gray-600"},[u("span",{class:"text-blue-600 cursor-pointer hover:underline"}," Click to upload "),W(" or drag and drop ")],-1)),I[36]||(I[36]=u("p",{class:"text-xs text-gray-500 mt-1"},"PDF, XLS, XLSX up to 10MB",-1))])])])],512),[[lt,o.value==="vat"]]),we(u("div",wnn,[b(Vt,{title:"PAYE Compliance",description:"Pay As You Earn tax calculations and filings"}),u("div",knn,[b(v(ve),{modelValue:d.total_paye,"onUpdate:modelValue":I[11]||(I[11]=L=>d.total_paye=L),label:"Total PAYE",type:"number",placeholder:"0.00"},null,8,["modelValue"]),u("div",Snn,[we(u("input",{type:"checkbox","onUpdate:modelValue":I[12]||(I[12]=L=>d.paye_return_filed=L),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[Rn,d.paye_return_filed]]),I[39]||(I[39]=u("label",{class:"text-sm text-gray-700"},"PAYE Return Filed",-1))])]),u("div",Cnn,[b(v(ve),{modelValue:d.paye_filing_date,"onUpdate:modelValue":I[13]||(I[13]=L=>d.paye_filing_date=L),label:"Filing Date",type:"date"},null,8,["modelValue"]),b(v(ve),{modelValue:d.paye_payment_date,"onUpdate:modelValue":I[14]||(I[14]=L=>d.paye_payment_date=L),label:"Payment Date",type:"date"},null,8,["modelValue"]),b(v(ve),{modelValue:d.paye_payment_reference,"onUpdate:modelValue":I[15]||(I[15]=L=>d.paye_payment_reference=L),label:"Payment Reference",type:"text",placeholder:"Enter reference"},null,8,["modelValue"])])],512),[[lt,o.value==="paye"]]),we(u("div",Ann,[b(Vt,{title:"Withholding Tax Compliance",description:"WHT calculations and filings"}),u("div",Tnn,[b(v(ve),{modelValue:d.wht_on_services,"onUpdate:modelValue":I[16]||(I[16]=L=>d.wht_on_services=L),label:"WHT on Services",type:"number",placeholder:"0.00",onChange:h},null,8,["modelValue"]),b(v(ve),{modelValue:d.wht_on_rent,"onUpdate:modelValue":I[17]||(I[17]=L=>d.wht_on_rent=L),label:"WHT on Rent",type:"number",placeholder:"0.00",onChange:h},null,8,["modelValue"])]),u("div",$nn,[b(v(ve),{modelValue:d.wht_on_professional_fees,"onUpdate:modelValue":I[18]||(I[18]=L=>d.wht_on_professional_fees=L),label:"WHT on Professional Fees",type:"number",placeholder:"0.00",onChange:h},null,8,["modelValue"]),b(v(ve),{modelValue:d.other_wht,"onUpdate:modelValue":I[19]||(I[19]=L=>d.other_wht=L),label:"Other WHT",type:"number",placeholder:"0.00",onChange:h},null,8,["modelValue"])]),u("div",Mnn,[u("div",Enn,[I[40]||(I[40]=u("span",{class:"font-medium text-blue-700"},"Total Withholding Tax",-1)),u("span",Dnn," KES "+$(C(d.total_wht||0)),1)])]),u("div",Rnn,[u("div",Pnn,[we(u("input",{type:"checkbox","onUpdate:modelValue":I[20]||(I[20]=L=>d.wht_return_filed=L),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[Rn,d.wht_return_filed]]),I[41]||(I[41]=u("label",{class:"text-sm text-gray-700"},"WHT Return Filed",-1))]),b(v(ve),{modelValue:d.wht_filing_date,"onUpdate:modelValue":I[21]||(I[21]=L=>d.wht_filing_date=L),label:"Filing Date",type:"date"},null,8,["modelValue"]),b(v(ve),{modelValue:d.wht_payment_date,"onUpdate:modelValue":I[22]||(I[22]=L=>d.wht_payment_date=L),label:"Payment Date",type:"date"},null,8,["modelValue"])])],512),[[lt,o.value==="wht"]]),we(u("div",Inn,[b(Vt,{title:"Statutory Deductions",description:"NSSF and NHIF contributions and filings"}),u("div",Onn,[u("h4",Lnn,[b(v(Ol),{class:"h-5 w-5 text-blue-500"}),I[42]||(I[42]=W(" NSSF Compliance ",-1))]),u("div",Vnn,[b(v(ve),{modelValue:d.employee_contributions,"onUpdate:modelValue":I[23]||(I[23]=L=>d.employee_contributions=L),label:"Employee Contributions",type:"number",placeholder:"0.00",onChange:m},null,8,["modelValue"]),b(v(ve),{modelValue:d.employer_contributions,"onUpdate:modelValue":I[24]||(I[24]=L=>d.employer_contributions=L),label:"Employer Contributions",type:"number",placeholder:"0.00",onChange:m},null,8,["modelValue"]),b(v(ve),{modelValue:d.total_nssf,"onUpdate:modelValue":I[25]||(I[25]=L=>d.total_nssf=L),label:"Total NSSF",type:"number",disabled:!0},null,8,["modelValue"])]),u("div",Nnn,[u("div",jnn,[we(u("input",{type:"checkbox","onUpdate:modelValue":I[26]||(I[26]=L=>d.nssf_return_filed=L),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[Rn,d.nssf_return_filed]]),I[43]||(I[43]=u("label",{class:"text-sm text-gray-700"},"NSSF Return Filed",-1))]),b(v(ve),{modelValue:d.nssf_payment_date,"onUpdate:modelValue":I[27]||(I[27]=L=>d.nssf_payment_date=L),label:"Payment Date",type:"date"},null,8,["modelValue"])])]),u("div",Fnn,[u("h4",Bnn,[b(v(kfe),{class:"h-5 w-5 text-red-500"}),I[44]||(I[44]=W(" NHIF Compliance ",-1))]),u("div",znn,[b(v(ve),{modelValue:d.total_nhif,"onUpdate:modelValue":I[28]||(I[28]=L=>d.total_nhif=L),label:"Total NHIF",type:"number",placeholder:"0.00"},null,8,["modelValue"]),b(v(ve),{modelValue:d.nhif_payment_date,"onUpdate:modelValue":I[29]||(I[29]=L=>d.nhif_payment_date=L),label:"Payment Date",type:"date"},null,8,["modelValue"])]),u("div",Unn,[we(u("input",{type:"checkbox","onUpdate:modelValue":I[30]||(I[30]=L=>d.nhif_return_filed=L),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[Rn,d.nhif_return_filed]]),I[45]||(I[45]=u("label",{class:"text-sm text-gray-700"},"NHIF Return Filed",-1))])])],512),[[lt,o.value==="statutory"]]),we(u("div",Hnn,[b(Vt,{title:"Issues & Compliance Score",description:"Identified issues and overall compliance status"}),u("div",qnn,[u("div",Wnn,[I[46]||(I[46]=u("h4",{class:"font-medium text-gray-700"},"Overall Compliance Score",-1)),b(v(De),{theme:A(d.compliance_score),size:"lg"},{default:D(()=>[W($(d.compliance_score||0)+"% ",1)]),_:1},8,["theme"])]),u("div",Gnn,[u("div",{class:pe(["h-3 rounded-full transition-all",M(d.compliance_score)]),style:rt({width:`${d.compliance_score||0}%`})},null,6)])]),u("div",Ynn,[u("div",Knn,[I[48]||(I[48]=u("h4",{class:"font-medium text-gray-700"},"Issues Identified",-1)),b(v(J),{size:"sm",variant:"outline",onClick:g},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[I[47]||(I[47]=W(" Add Issue ",-1))]),_:1})]),u("div",Xnn,[(T(!0),R(xe,null,_e(d.issues_identified,(L,z)=>(T(),R("div",{key:z,class:"p-4"},[u("div",Qnn,[u("div",Znn,[b(v(Qe),{modelValue:L.issue_type,"onUpdate:modelValue":N=>L.issue_type=N,options:c,placeholder:"Issue Type"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",Jnn,[b(v(ve),{modelValue:L.description,"onUpdate:modelValue":N=>L.description=N,type:"textarea",rows:2,placeholder:"Describe the issue..."},null,8,["modelValue","onUpdate:modelValue"])]),u("div",ern,[b(v(ve),{modelValue:L.financial_impact,"onUpdate:modelValue":N=>L.financial_impact=N,type:"number",placeholder:"Impact"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",trn,[b(v(Qe),{modelValue:L.resolution_status,"onUpdate:modelValue":N=>L.resolution_status=N,options:f,placeholder:"Status"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",nrn,[b(v(J),{size:"sm",variant:"ghost",theme:"red",onClick:N=>y(z)},{default:D(()=>[b(v(is),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),L.resolution_notes||L.resolution_status==="Resolved"?(T(),R("div",rrn,[b(v(ve),{modelValue:L.resolution_notes,"onUpdate:modelValue":N=>L.resolution_notes=N,type:"textarea",rows:2,placeholder:"Resolution notes..."},null,8,["modelValue","onUpdate:modelValue"])])):se("",!0)]))),128)),(F=d.issues_identified)!=null&&F.length?se("",!0):(T(),R("div",srn,[b(v(qr),{class:"h-8 w-8 mx-auto mb-2 text-gray-400"}),I[49]||(I[49]=u("p",null,"No issues identified",-1)),I[50]||(I[50]=u("p",{class:"text-sm mt-1"},'Click "Add Issue" to record any compliance issues',-1))]))])])],512),[[lt,o.value==="issues"]])])])]}),actions:D(()=>[u("div",irn,[u("div",arn,[o.value!=="basic"?(T(),he(v(J),{key:0,variant:"outline",onClick:k},{prefix:D(()=>[b(v(gr),{class:"h-4 w-4"})]),default:D(()=>[I[51]||(I[51]=W(" Previous ",-1))]),_:1})):se("",!0)]),u("div",orn,[b(v(J),{variant:"outline",onClick:I[31]||(I[31]=F=>s.value=!1)},{default:D(()=>[...I[52]||(I[52]=[W("Cancel",-1)])]),_:1}),o.value!=="issues"?(T(),he(v(J),{key:0,variant:"solid",onClick:_},{suffix:D(()=>[b(v(sr),{class:"h-4 w-4"})]),default:D(()=>[I[53]||(I[53]=W(" Next ",-1))]),_:1})):(T(),he(v(J),{key:1,variant:"solid",theme:"green",loading:a.value,onClick:E},{prefix:D(()=>[b(v($r),{class:"h-4 w-4"})]),default:D(()=>[W(" "+$(i.value?"Update Tracker":"Create Tracker"),1)]),_:1},8,["loading"]))])])]),_:1},8,["modelValue","options"]))}},urn={class:"bg-white rounded-xl border p-4"},drn={class:"flex flex-wrap items-center gap-4"},crn={class:"flex-1 min-w-[200px] max-w-md"},frn={class:"w-44"},prn={class:"w-36"},hrn={class:"w-36"},mrn={class:"w-40"},grn={class:"w-32"},vrn={class:"flex items-center gap-2 ml-auto"},yrn={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},brn={__name:"TaxFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,s=Jt({search:"",taxPeriod:"",taxType:"",filingStatus:"",scoreRange:"",hasIssues:""});et(()=>n.filters,h=>{h&&Object.assign(s,h)},{immediate:!0,deep:!0});const i=[{label:"All Tax Types",value:""},{label:"VAT",value:"VAT"},{label:"PAYE",value:"PAYE"},{label:"Withholding Tax",value:"WHT"},{label:"NSSF",value:"NSSF"},{label:"NHIF",value:"NHIF"}],a=[{label:"All Status",value:""},{label:"All Filed",value:"filed"},{label:"Pending Filing",value:"pending"},{label:"Overdue",value:"overdue"}],o=[{label:"All Scores",value:""},{label:"Excellent (90-100%)",value:"90-100"},{label:"Good (70-89%)",value:"70-89"},{label:"Fair (50-69%)",value:"50-69"},{label:"Poor (0-49%)",value:"0-49"}],l=[{label:"All",value:""},{label:"Has Issues",value:"yes"},{label:"No Issues",value:"no"}],d=Z(()=>Object.values(s).some(h=>h!==""));function c(){r("update:filters",ge({},s))}function f(h){s[h]="",c()}function p(){Object.keys(s).forEach(h=>{s[h]=""}),c()}return(h,m)=>(T(),R("div",urn,[u("div",drn,[u("div",crn,[b(v(ve),{modelValue:s.search,"onUpdate:modelValue":[m[0]||(m[0]=g=>s.search=g),c],type:"text",placeholder:"Search by tracker ID...",debounce:300},{prefix:D(()=>[b(v(En),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",frn,[b(Mt,{modelValue:s.taxPeriod,"onUpdate:modelValue":[m[1]||(m[1]=g=>s.taxPeriod=g),c],doctype:"Data Period",placeholder:"All Periods"},null,8,["modelValue"])]),u("div",prn,[b(v(Qe),{modelValue:s.taxType,"onUpdate:modelValue":[m[2]||(m[2]=g=>s.taxType=g),c],options:i,placeholder:"Tax Type"},null,8,["modelValue"])]),u("div",hrn,[b(v(Qe),{modelValue:s.filingStatus,"onUpdate:modelValue":[m[3]||(m[3]=g=>s.filingStatus=g),c],options:a,placeholder:"Filing Status"},null,8,["modelValue"])]),u("div",mrn,[b(v(Qe),{modelValue:s.scoreRange,"onUpdate:modelValue":[m[4]||(m[4]=g=>s.scoreRange=g),c],options:o,placeholder:"Score Range"},null,8,["modelValue"])]),u("div",grn,[b(v(Qe),{modelValue:s.hasIssues,"onUpdate:modelValue":[m[5]||(m[5]=g=>s.hasIssues=g),c],options:l,placeholder:"Issues"},null,8,["modelValue"])]),u("div",vrn,[d.value?(T(),he(v(J),{key:0,variant:"outline",onClick:p},{prefix:D(()=>[b(v(ht),{class:"h-4 w-4"})]),default:D(()=>[m[14]||(m[14]=W(" Clear ",-1))]),_:1})):se("",!0),b(v(J),{variant:"outline",onClick:m[6]||(m[6]=g=>h.$emit("refresh"))},{prefix:D(()=>[b(v(mn),{class:"h-4 w-4"})]),default:D(()=>[m[15]||(m[15]=W(" Refresh ",-1))]),_:1}),b(v(J),{variant:"solid",onClick:m[7]||(m[7]=g=>h.$emit("create"))},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[m[16]||(m[16]=W(" New Tracker ",-1))]),_:1})])]),d.value?(T(),R("div",yrn,[m[17]||(m[17]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),s.search?(T(),he(v(De),{key:0,theme:"blue",class:"cursor-pointer",onClick:m[8]||(m[8]=g=>f("search"))},{default:D(()=>[W(' Search: "'+$(s.search)+'" ',1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.taxPeriod?(T(),he(v(De),{key:1,theme:"purple",class:"cursor-pointer",onClick:m[9]||(m[9]=g=>f("taxPeriod"))},{default:D(()=>[W(" Period: "+$(s.taxPeriod)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.taxType?(T(),he(v(De),{key:2,theme:"green",class:"cursor-pointer",onClick:m[10]||(m[10]=g=>f("taxType"))},{default:D(()=>[W(" Type: "+$(s.taxType)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.filingStatus?(T(),he(v(De),{key:3,theme:"indigo",class:"cursor-pointer",onClick:m[11]||(m[11]=g=>f("filingStatus"))},{default:D(()=>[W(" Status: "+$(s.filingStatus)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.scoreRange?(T(),he(v(De),{key:4,theme:"orange",class:"cursor-pointer",onClick:m[12]||(m[12]=g=>f("scoreRange"))},{default:D(()=>[W(" Score: "+$(s.scoreRange)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.hasIssues?(T(),he(v(De),{key:5,theme:"red",class:"cursor-pointer",onClick:m[13]||(m[13]=g=>f("hasIssues"))},{default:D(()=>[W($(s.hasIssues==="yes"?"Has Issues":"No Issues")+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0)])):se("",!0)]))}},xrn={class:"grid grid-cols-5 gap-4"},_rn={class:"bg-white rounded-xl border p-4"},wrn={class:"flex items-center justify-between"},krn={class:"text-2xl font-bold text-gray-900"},Srn={class:"h-10 w-10 rounded-lg bg-blue-50 flex items-center justify-center"},Crn={class:"mt-2 flex items-center gap-1 text-xs"},Arn={class:"text-gray-500"},Trn={class:"bg-white rounded-xl border p-4"},$rn={class:"flex items-center justify-between"},Mrn={class:"text-2xl font-bold text-green-600"},Ern={class:"h-10 w-10 rounded-lg bg-green-50 flex items-center justify-center"},Drn={class:"mt-2"},Rrn={class:"flex items-center justify-between text-xs"},Prn={class:"font-medium text-green-600"},Irn={class:"w-full bg-gray-100 rounded-full h-1.5 mt-1"},Orn={class:"bg-white rounded-xl border p-4"},Lrn={class:"flex items-center justify-between"},Vrn={class:"text-2xl font-bold text-purple-600"},Nrn={class:"h-10 w-10 rounded-lg bg-purple-50 flex items-center justify-center"},jrn={class:"mt-2"},Frn={class:"flex items-center justify-between text-xs"},Brn={class:"font-medium text-purple-600"},zrn={class:"w-full bg-gray-100 rounded-full h-1.5 mt-1"},Urn={class:"bg-white rounded-xl border p-4"},Hrn={class:"flex items-center justify-between"},qrn={class:"text-2xl font-bold text-indigo-600"},Wrn={class:"h-10 w-10 rounded-lg bg-indigo-50 flex items-center justify-center"},Grn={class:"mt-2 flex items-center gap-2 text-xs"},Yrn={class:"text-gray-500"},Krn={class:"text-gray-500"},Xrn={class:"bg-white rounded-xl border p-4"},Qrn={class:"flex items-center justify-between"},Zrn={class:"mt-2 flex items-center justify-between text-xs"},Jrn={class:"grid grid-cols-4 gap-4 mt-4"},esn={class:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-4 text-white"},tsn={class:"flex items-center justify-between"},nsn={class:"text-xl font-bold"},rsn={class:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-4 text-white"},ssn={class:"flex items-center justify-between"},isn={class:"text-xl font-bold"},asn={class:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-4 text-white"},osn={class:"flex items-center justify-between"},lsn={class:"text-xl font-bold"},usn={class:"bg-gradient-to-r from-teal-500 to-teal-600 rounded-xl p-4 text-white"},dsn={class:"flex items-center justify-between"},csn={class:"text-xl font-bold"},fsn={__name:"TaxStats",props:{trackers:{type:Array,default:()=>[]}},setup(t){const e=t,n=Z(()=>{const i=e.trackers.length,a=e.trackers.filter(A=>A.vat_return_filed).length,o=e.trackers.filter(A=>A.paye_return_filed).length,l=e.trackers.filter(A=>A.wht_return_filed).length,d=e.trackers.filter(A=>A.nssf_return_filed).length,c=e.trackers.filter(A=>A.nhif_return_filed).length,f=i>0?Math.round(a/i*100):0,p=i>0?Math.round(o/i*100):0,h=e.trackers.reduce((A,M)=>A+(M.net_vat_payable||0),0),m=e.trackers.reduce((A,M)=>A+(M.total_paye||0),0),g=e.trackers.reduce((A,M)=>A+(M.total_wht||0),0),y=e.trackers.reduce((A,M)=>A+(M.total_nssf||0),0),x=e.trackers.reduce((A,M)=>A+(M.total_nhif||0),0),_=y+x,k=e.trackers.reduce((A,M)=>{var E;return A+(((E=M.issues_identified)==null?void 0:E.filter(P=>P.resolution_status==="Open").length)||0)},0),w=e.trackers.filter(A=>A.compliance_score!==null&&A.compliance_score!==void 0),S=w.length>0?Math.round(w.reduce((A,M)=>A+(M.compliance_score||0),0)/w.length):0,C=new Set(e.trackers.map(A=>A.tax_period)).size;return{total:i,vatFiled:a,payeFiled:o,whtFiled:l,nssfFiled:d,nhifFiled:c,statutoryFiled:Math.min(d,c),vatRate:f,payeRate:p,totalVatPayable:h,totalPaye:m,totalWht:g,totalStatutory:_,openIssues:k,avgScore:S,periodsCount:C}});function r(i){return new Intl.NumberFormat("en-KE").format(i||0)}function s(i){return i>=90?"green":i>=70?"blue":i>=50?"orange":"red"}return(i,a)=>(T(),R(xe,null,[u("div",xrn,[u("div",_rn,[u("div",wrn,[u("div",null,[a[0]||(a[0]=u("p",{class:"text-sm text-gray-500"},"Total Trackers",-1)),u("p",krn,$(n.value.total),1)]),u("div",Srn,[b(v(vt),{class:"h-5 w-5 text-blue-600"})])]),u("div",Crn,[u("span",Arn,$(n.value.periodsCount)+" periods covered",1)])]),u("div",Trn,[u("div",$rn,[u("div",null,[a[1]||(a[1]=u("p",{class:"text-sm text-gray-500"},"VAT Filed",-1)),u("p",Mrn,$(n.value.vatFiled),1)]),u("div",Ern,[b(v(QS),{class:"h-5 w-5 text-green-600"})])]),u("div",Drn,[u("div",Rrn,[a[2]||(a[2]=u("span",{class:"text-gray-500"},"Compliance Rate",-1)),u("span",Prn,$(n.value.vatRate)+"%",1)]),u("div",Irn,[u("div",{class:"bg-green-500 h-1.5 rounded-full",style:rt({width:`${n.value.vatRate}%`})},null,4)])])]),u("div",Orn,[u("div",Lrn,[u("div",null,[a[3]||(a[3]=u("p",{class:"text-sm text-gray-500"},"PAYE Filed",-1)),u("p",Vrn,$(n.value.payeFiled),1)]),u("div",Nrn,[b(v(WS),{class:"h-5 w-5 text-purple-600"})])]),u("div",jrn,[u("div",Frn,[a[4]||(a[4]=u("span",{class:"text-gray-500"},"Compliance Rate",-1)),u("span",Brn,$(n.value.payeRate)+"%",1)]),u("div",zrn,[u("div",{class:"bg-purple-500 h-1.5 rounded-full",style:rt({width:`${n.value.payeRate}%`})},null,4)])])]),u("div",Urn,[u("div",Hrn,[u("div",null,[a[5]||(a[5]=u("p",{class:"text-sm text-gray-500"},"Statutory Filed",-1)),u("p",qrn,$(n.value.statutoryFiled),1)]),u("div",Wrn,[b(v(Ol),{class:"h-5 w-5 text-indigo-600"})])]),u("div",Grn,[u("span",Yrn,"NSSF: "+$(n.value.nssfFiled),1),a[6]||(a[6]=u("span",{class:"text-gray-300"},"|",-1)),u("span",Krn,"NHIF: "+$(n.value.nhifFiled),1)])]),u("div",Xrn,[u("div",Qrn,[u("div",null,[a[7]||(a[7]=u("p",{class:"text-sm text-gray-500"},"Open Issues",-1)),u("p",{class:pe(["text-2xl font-bold",n.value.openIssues>0?"text-red-600":"text-green-600"])},$(n.value.openIssues),3)]),u("div",{class:pe(["h-10 w-10 rounded-lg flex items-center justify-center",n.value.openIssues>0?"bg-red-50":"bg-green-50"])},[b(v(qr),{class:pe(["h-5 w-5",n.value.openIssues>0?"text-red-600":"text-green-600"])},null,8,["class"])],2)]),u("div",Zrn,[a[8]||(a[8]=u("span",{class:"text-gray-500"},"Avg Score",-1)),b(v(De),{theme:s(n.value.avgScore),size:"sm"},{default:D(()=>[W($(n.value.avgScore)+"% ",1)]),_:1},8,["theme"])])])]),u("div",Jrn,[u("div",esn,[u("div",tsn,[u("div",null,[a[9]||(a[9]=u("p",{class:"text-sm text-blue-100"},"Total VAT Payable",-1)),u("p",nsn,"KES "+$(r(n.value.totalVatPayable)),1)]),b(v(ab),{class:"h-8 w-8 text-blue-200"})])]),u("div",rsn,[u("div",ssn,[u("div",null,[a[10]||(a[10]=u("p",{class:"text-sm text-purple-100"},"Total PAYE",-1)),u("p",isn,"KES "+$(r(n.value.totalPaye)),1)]),b(v(Jr),{class:"h-8 w-8 text-purple-200"})])]),u("div",asn,[u("div",osn,[u("div",null,[a[11]||(a[11]=u("p",{class:"text-sm text-orange-100"},"Total WHT",-1)),u("p",lsn,"KES "+$(r(n.value.totalWht)),1)]),b(v(XS),{class:"h-8 w-8 text-orange-200"})])]),u("div",usn,[u("div",dsn,[u("div",null,[a[12]||(a[12]=u("p",{class:"text-sm text-teal-100"},"Total Statutory",-1)),u("p",csn,"KES "+$(r(n.value.totalStatutory)),1)]),b(v(Ju),{class:"h-8 w-8 text-teal-200"})])])])],64))}},psn={class:"p-6"},hsn={class:"flex justify-between items-center mb-6"},msn={class:"bg-white rounded-lg border shadow-sm"},gsn={class:"p-4 border-b"},vsn={class:"flex justify-between items-center"},ysn={class:"flex gap-2"},bsn={class:"overflow-x-auto"},xsn={class:"w-full"},_sn={class:"divide-y divide-gray-200"},wsn={class:"px-4 py-3"},ksn={class:"font-medium"},Ssn={class:"text-sm text-gray-500"},Csn={class:"px-4 py-3"},Asn={class:"px-4 py-3"},Tsn={class:"px-4 py-3"},$sn={class:"flex items-center gap-1"},Msn={class:"px-4 py-3"},Esn={class:"flex items-center gap-1"},Dsn={class:"px-4 py-3"},Rsn={class:"flex items-center gap-1"},Psn={class:"px-4 py-3"},Isn={class:"flex items-center gap-1"},Osn={class:"px-4 py-3"},Lsn={class:"flex items-center gap-1"},Vsn={class:"px-4 py-3"},Nsn={class:"flex gap-1"},jsn={key:0,class:"p-8 text-center text-gray-500"},Fsn={__name:"TaxCompliance",setup(t){const e=rO(),n=Q(!1),r=Q(!1),s=Q(null),i=Z(()=>e.loading),a=Z(()=>e.taxComplianceTrackers),o=Q(""),l=Q(""),d=Q(""),c=Q(""),f=Q(""),p=Z(()=>{const k=a.value,w=k.length,S=w>0?Math.round(k.reduce((E,P)=>E+(P.compliance_score||0),0)/w):0,C=k.filter(E=>E.vat_return_filed).length,A=k.filter(E=>E.paye_return_filed).length,M=k.filter(E=>(E.compliance_score||0)>=80).length;return{total:w,avgScore:S,vatFiled:C,payeFiled:A,compliant:M}}),h=()=>ue(this,null,function*(){yield e.fetchTaxComplianceTrackers()}),m=()=>{s.value=null,r.value=!1,n.value=!0},g=k=>ue(this,null,function*(){try{s.value=yield e.getTaxTrackerDetails(k.name),r.value=!0,n.value=!0}catch(w){console.error("Error fetching tracker details:",w)}}),y=k=>ue(this,null,function*(){try{s.value=yield e.getTaxTrackerDetails(k.name),r.value=!0,n.value=!0}catch(w){console.error("Error fetching tracker details:",w)}}),x=()=>ue(this,null,function*(){n.value=!1,yield h()}),_=k=>k>=80?"green":k>=60?"yellow":"red";return yt(()=>ue(this,null,function*(){yield h()})),(k,w)=>(T(),R("div",psn,[u("div",hsn,[w[7]||(w[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Tax Compliance"),u("p",{class:"text-gray-600"},"Track tax compliance, filings, and payments across all tax types.")],-1)),b(v(J),{onClick:m,class:"flex items-center gap-2"},{default:D(()=>[b(v(nt),{class:"w-4 h-4"}),w[6]||(w[6]=W(" Create Tracker ",-1))]),_:1})]),b(fsn,{stats:p.value},null,8,["stats"]),b(brn,{searchQuery:o.value,"onUpdate:searchQuery":w[0]||(w[0]=S=>o.value=S),selectedTaxPeriod:l.value,"onUpdate:selectedTaxPeriod":w[1]||(w[1]=S=>l.value=S),selectedComplianceScore:d.value,"onUpdate:selectedComplianceScore":w[2]||(w[2]=S=>d.value=S),selectedVatStatus:c.value,"onUpdate:selectedVatStatus":w[3]||(w[3]=S=>c.value=S),selectedPayeStatus:f.value,"onUpdate:selectedPayeStatus":w[4]||(w[4]=S=>f.value=S)},null,8,["searchQuery","selectedTaxPeriod","selectedComplianceScore","selectedVatStatus","selectedPayeStatus"]),u("div",msn,[u("div",gsn,[u("div",vsn,[w[8]||(w[8]=u("h2",{class:"text-lg font-semibold"},"Tax Compliance Trackers",-1)),u("div",ysn,[b(v(J),{onClick:h,loading:i.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"])])])]),u("div",bsn,[u("table",xsn,[w[14]||(w[14]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tracker ID"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tax Period"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Compliance Score"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"VAT"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"PAYE"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"WHT"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"NSSF"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"NHIF"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",_sn,[(T(!0),R(xe,null,_e(a.value,S=>(T(),R("tr",{key:S.name,class:"hover:bg-gray-50"},[u("td",wsn,[u("div",ksn,$(S.tracker_id),1),u("div",Ssn,$(S.name),1)]),u("td",Csn,[u("div",null,$(S.tax_period),1)]),u("td",Asn,[b(v(De),{variant:_(S.compliance_score)},{default:D(()=>[W($(S.compliance_score||0)+"% ",1)]),_:2},1032,["variant"])]),u("td",Tsn,[u("div",$sn,[S.vat_return_filed?(T(),he(v(Kt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(v(ht),{key:1,class:"w-4 h-4 text-red-500"})),w[9]||(w[9]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",Msn,[u("div",Esn,[S.paye_return_filed?(T(),he(v(Kt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(v(ht),{key:1,class:"w-4 h-4 text-red-500"})),w[10]||(w[10]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",Dsn,[u("div",Rsn,[S.wht_return_filed?(T(),he(v(Kt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(v(ht),{key:1,class:"w-4 h-4 text-red-500"})),w[11]||(w[11]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",Psn,[u("div",Isn,[S.nssf_return_filed?(T(),he(v(Kt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(v(ht),{key:1,class:"w-4 h-4 text-red-500"})),w[12]||(w[12]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",Osn,[u("div",Lsn,[S.nhif_return_filed?(T(),he(v(Kt),{key:0,class:"w-4 h-4 text-green-500"})):(T(),he(v(ht),{key:1,class:"w-4 h-4 text-red-500"})),w[13]||(w[13]=u("span",{class:"text-xs"},"Filed",-1))])]),u("td",Vsn,[u("div",Nsn,[b(v(J),{onClick:C=>g(S),variant:"outline",size:"sm"},{default:D(()=>[b(v(lr),{class:"w-4 h-4"})]),_:1},8,["onClick"]),b(v(J),{onClick:C=>y(S),variant:"outline",size:"sm"},{default:D(()=>[b(v(yn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])])]))),128))])])]),a.value.length===0&&!i.value?(T(),R("div",jsn,[b(v(QS),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),w[16]||(w[16]=u("p",null,"No tax compliance trackers found.",-1)),b(v(J),{onClick:m,class:"mt-4"},{default:D(()=>[...w[15]||(w[15]=[W(" Create Your First Tracker ",-1)])]),_:1})])):se("",!0)]),b(lrn,{show:n.value,"onUpdate:show":w[5]||(w[5]=S=>n.value=S),"tracker-data":s.value,"is-edit-mode":r.value,onSaved:x},null,8,["show","tracker-data","is-edit-mode"])]))}},Bsn={class:"bg-white rounded-xl border p-4"},zsn={class:"flex flex-wrap items-center gap-4"},Usn={class:"flex-1 min-w-[200px] max-w-md"},Hsn={class:"w-48"},qsn={class:"w-36"},Wsn={class:"w-32"},Gsn={class:"w-36"},Ysn={class:"w-40"},Ksn={class:"w-40"},Xsn={class:"flex items-center gap-2 ml-auto"},Qsn={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},Zsn={__name:"ExecutionFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,s=Jt({search:"",testLibrary:"",executionType:"",priority:"",status:"",dateFrom:"",dateTo:""});et(()=>n.filters,p=>{p&&Object.assign(s,p)},{immediate:!0,deep:!0});const i=[{label:"All Types",value:""},{label:"Manual",value:"Manual"},{label:"Scheduled",value:"Scheduled"},{label:"Batch",value:"Batch"},{label:"API",value:"API"}],a=[{label:"All Priorities",value:""},{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],o=[{label:"All Status",value:""},{label:"Pending",value:"Pending"},{label:"Queued",value:"Queued"},{label:"Running",value:"Running"},{label:"Completed",value:"Completed"},{label:"Failed",value:"Failed"},{label:"Cancelled",value:"Cancelled"},{label:"Paused",value:"Paused"}],l=Z(()=>Object.values(s).some(p=>p!==""));function d(){r("update:filters",ge({},s))}function c(p){p==="dateRange"?(s.dateFrom="",s.dateTo=""):s[p]="",d()}function f(){Object.keys(s).forEach(p=>{s[p]=""}),d()}return(p,h)=>(T(),R("div",Bsn,[u("div",zsn,[u("div",Usn,[b(v(ve),{modelValue:s.search,"onUpdate:modelValue":[h[0]||(h[0]=m=>s.search=m),d],type:"text",placeholder:"Search by name, ID, or test...",debounce:300},{prefix:D(()=>[b(v(En),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",Hsn,[b(Mt,{modelValue:s.testLibrary,"onUpdate:modelValue":[h[1]||(h[1]=m=>s.testLibrary=m),d],doctype:"Audit Test Library",placeholder:"All Tests"},null,8,["modelValue"])]),u("div",qsn,[b(v(Qe),{modelValue:s.executionType,"onUpdate:modelValue":[h[2]||(h[2]=m=>s.executionType=m),d],options:i,placeholder:"All Types"},null,8,["modelValue"])]),u("div",Wsn,[b(v(Qe),{modelValue:s.priority,"onUpdate:modelValue":[h[3]||(h[3]=m=>s.priority=m),d],options:a,placeholder:"Priority"},null,8,["modelValue"])]),u("div",Gsn,[b(v(Qe),{modelValue:s.status,"onUpdate:modelValue":[h[4]||(h[4]=m=>s.status=m),d],options:o,placeholder:"All Status"},null,8,["modelValue"])]),u("div",Ysn,[b(v(ve),{modelValue:s.dateFrom,"onUpdate:modelValue":[h[5]||(h[5]=m=>s.dateFrom=m),d],type:"date",placeholder:"From date"},null,8,["modelValue"])]),u("div",Ksn,[b(v(ve),{modelValue:s.dateTo,"onUpdate:modelValue":[h[6]||(h[6]=m=>s.dateTo=m),d],type:"date",placeholder:"To date"},null,8,["modelValue"])]),u("div",Xsn,[l.value?(T(),he(v(J),{key:0,variant:"outline",onClick:f},{prefix:D(()=>[b(v(ht),{class:"h-4 w-4"})]),default:D(()=>[h[15]||(h[15]=W(" Clear ",-1))]),_:1})):se("",!0),b(v(J),{variant:"outline",onClick:h[7]||(h[7]=m=>p.$emit("refresh"))},{prefix:D(()=>[b(v(mn),{class:"h-4 w-4"})]),default:D(()=>[h[16]||(h[16]=W(" Refresh ",-1))]),_:1}),b(v(J),{variant:"solid",onClick:h[8]||(h[8]=m=>p.$emit("create"))},{prefix:D(()=>[b(v(Ll),{class:"h-4 w-4"})]),default:D(()=>[h[17]||(h[17]=W(" New Execution ",-1))]),_:1})])]),l.value?(T(),R("div",Qsn,[h[18]||(h[18]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),s.search?(T(),he(v(De),{key:0,theme:"blue",class:"cursor-pointer",onClick:h[9]||(h[9]=m=>c("search"))},{default:D(()=>[W(' Search: "'+$(s.search)+'" ',1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.testLibrary?(T(),he(v(De),{key:1,theme:"purple",class:"cursor-pointer",onClick:h[10]||(h[10]=m=>c("testLibrary"))},{default:D(()=>[W(" Test: "+$(s.testLibrary)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.executionType?(T(),he(v(De),{key:2,theme:"indigo",class:"cursor-pointer",onClick:h[11]||(h[11]=m=>c("executionType"))},{default:D(()=>[W(" Type: "+$(s.executionType)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.priority?(T(),he(v(De),{key:3,theme:"orange",class:"cursor-pointer",onClick:h[12]||(h[12]=m=>c("priority"))},{default:D(()=>[W(" Priority: "+$(s.priority)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.status?(T(),he(v(De),{key:4,theme:"green",class:"cursor-pointer",onClick:h[13]||(h[13]=m=>c("status"))},{default:D(()=>[W(" Status: "+$(s.status)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.dateFrom||s.dateTo?(T(),he(v(De),{key:5,theme:"gray",class:"cursor-pointer",onClick:h[14]||(h[14]=m=>c("dateRange"))},{default:D(()=>[W(" Date: "+$(s.dateFrom||"*")+" - "+$(s.dateTo||"*")+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0)])):se("",!0)]))}},Jsn={class:"space-y-4"},ein={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4"},tin=["onClick"],nin={class:"flex items-center gap-3"},rin={class:"text-2xl font-bold text-gray-900"},sin={class:"text-xs text-gray-500"},iin={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ain={class:"bg-white rounded-xl border p-4"},oin={class:"space-y-3"},lin=["onClick"],uin={class:"flex-1 text-sm text-gray-600"},din={class:"text-sm font-medium text-gray-700"},cin={class:"w-20 bg-gray-100 rounded-full h-2"},fin={class:"bg-white rounded-xl border p-4"},pin={class:"flex items-center justify-center"},hin={class:"relative h-40 w-40"},min={viewBox:"0 0 36 36",class:"transform -rotate-90"},gin=["stroke-dasharray"],vin=["stroke-dasharray","stroke-dashoffset"],yin={class:"absolute inset-0 flex flex-col items-center justify-center"},bin={class:"text-2xl font-bold text-gray-900"},xin={class:"flex justify-center gap-6 mt-4"},_in={class:"flex items-center gap-2"},win={class:"text-sm text-gray-600"},kin={class:"flex items-center gap-2"},Sin={class:"text-sm text-gray-600"},Cin={class:"flex items-center gap-2"},Ain={class:"text-sm text-gray-600"},Tin={class:"bg-white rounded-xl border p-4"},$in={class:"space-y-4"},Min={class:"flex items-center justify-between"},Ein={class:"flex items-center gap-2"},Din={class:"text-sm font-semibold text-gray-900"},Rin={class:"flex items-center justify-between"},Pin={class:"flex items-center gap-2"},Iin={class:"text-sm font-semibold text-gray-900"},Oin={class:"flex items-center justify-between"},Lin={class:"flex items-center gap-2"},Vin={class:"text-sm font-semibold text-red-600"},Nin={class:"flex items-center justify-between"},jin={class:"flex items-center gap-2"},Fin={class:"text-sm font-semibold text-gray-900"},Bin={class:"bg-white rounded-xl border p-4"},zin={class:"flex items-center gap-2 overflow-x-auto pb-2"},Uin=["onClick"],Hin={class:"flex items-center justify-between mb-2"},qin={class:"text-xs text-gray-500"},Win={class:"text-sm font-medium text-gray-800 truncate"},Gin={class:"text-xs text-gray-500 mt-1"},Yin={key:0,class:"text-sm text-gray-500 py-4"},Kin={__name:"ExecutionStats",props:{executions:{type:Array,default:()=>[]},activeFilter:{type:String,default:""}},emits:["filter","select"],setup(t){const e=t,n=Z(()=>{const k=e.executions,w=k.length,S=k.filter(I=>I.status==="Pending").length,C=k.filter(I=>I.status==="Running").length,A=k.filter(I=>I.status==="Completed").length,M=k.filter(I=>I.status==="Failed").length,E=k.filter(I=>I.status==="Queued").length,P=k.filter(I=>I.status==="Paused").length;return[{label:"Total",value:w,icon:Ll,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:null,filterValue:null},{label:"Pending",value:S,icon:Ns,bgColor:"bg-gray-100",iconColor:"text-gray-600",filterKey:"status",filterValue:"Pending",active:e.activeFilter==="Pending"},{label:"Queued",value:E,icon:TY,bgColor:"bg-indigo-100",iconColor:"text-indigo-600",filterKey:"status",filterValue:"Queued",active:e.activeFilter==="Queued"},{label:"Running",value:C,icon:Ll,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:"status",filterValue:"Running",active:e.activeFilter==="Running"},{label:"Completed",value:A,icon:Kt,bgColor:"bg-green-100",iconColor:"text-green-600",filterKey:"status",filterValue:"Completed",active:e.activeFilter==="Completed"},{label:"Failed",value:M,icon:Uc,bgColor:"bg-red-100",iconColor:"text-red-600",filterKey:"status",filterValue:"Failed",active:e.activeFilter==="Failed"},{label:"Paused",value:P,icon:DY,bgColor:"bg-yellow-100",iconColor:"text-yellow-600",filterKey:"status",filterValue:"Paused",active:e.activeFilter==="Paused"}]}),r=Z(()=>{const k=e.executions,w=k.length||1,S=["Pending","Queued","Running","Completed","Failed","Cancelled","Paused"],C={Pending:{dot:"bg-gray-400",bar:"bg-gray-400"},Queued:{dot:"bg-indigo-400",bar:"bg-indigo-400"},Running:{dot:"bg-blue-500",bar:"bg-blue-500"},Completed:{dot:"bg-green-500",bar:"bg-green-500"},Failed:{dot:"bg-red-500",bar:"bg-red-500"},Cancelled:{dot:"bg-gray-500",bar:"bg-gray-500"},Paused:{dot:"bg-yellow-500",bar:"bg-yellow-500"}};return S.map(A=>{var M,E;return{name:A,count:k.filter(P=>P.status===A).length,percentage:Math.round(k.filter(P=>P.status===A).length/w*100),dotColor:((M=C[A])==null?void 0:M.dot)||"bg-gray-400",barColor:((E=C[A])==null?void 0:E.bar)||"bg-gray-400"}}).filter(A=>A.count>0)}),s=Z(()=>e.executions.reduce((k,w)=>k+(w.total_tests||0),0)),i=Z(()=>e.executions.reduce((k,w)=>k+(w.passed_tests||0),0)),a=Z(()=>e.executions.reduce((k,w)=>k+(w.failed_tests||0),0)),o=Z(()=>e.executions.reduce((k,w)=>k+(w.warning_tests||0),0)),l=Z(()=>s.value?Math.round(i.value/s.value*100):0),d=Z(()=>s.value?Math.round(a.value/s.value*100):0),c=Z(()=>{const k=e.executions.filter(S=>S.execution_time_ms);if(!k.length)return"0ms";const w=k.reduce((S,C)=>S+C.execution_time_ms,0)/k.length;return w<1e3?`${Math.round(w)}ms`:w<6e4?`${(w/1e3).toFixed(1)}s`:`${(w/6e4).toFixed(1)}m`}),f=Z(()=>{const k=e.executions.filter(w=>w.records_per_second);return k.length?Math.round(k.reduce((w,S)=>w+S.records_per_second,0)/k.length):0}),p=Z(()=>e.executions.reduce((k,w)=>k+(w.exceptions_found||0),0)),h=Z(()=>e.executions.reduce((k,w)=>k+(w.total_records_processed||0),0)),m=Z(()=>[...e.executions].sort((k,w)=>new Date(w.creation)-new Date(k.creation)).slice(0,5));function g(k){return k>=1e6?`${(k/1e6).toFixed(1)}M`:k>=1e3?`${(k/1e3).toFixed(1)}K`:k.toString()}function y(k){return k?new Date(k).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}function x(k){return{Pending:"gray",Queued:"blue",Running:"blue",Completed:"green",Failed:"red",Cancelled:"gray",Paused:"orange"}[k]||"gray"}function _(k){return{Pending:"bg-gray-50 border-gray-200",Queued:"bg-indigo-50 border-indigo-200",Running:"bg-blue-50 border-blue-200",Completed:"bg-green-50 border-green-200",Failed:"bg-red-50 border-red-200",Cancelled:"bg-gray-50 border-gray-200",Paused:"bg-yellow-50 border-yellow-200"}[k]||"bg-gray-50 border-gray-200"}return(k,w)=>(T(),R("div",Jsn,[u("div",ein,[(T(!0),R(xe,null,_e(n.value,S=>(T(),R("div",{key:S.label,class:pe(["bg-white rounded-xl border p-4 hover:shadow-md transition-shadow cursor-pointer",S.active?"ring-2 ring-blue-500":""]),onClick:C=>k.$emit("filter",S.filterKey,S.filterValue)},[u("div",nin,[u("div",{class:pe(["p-2 rounded-lg",S.bgColor])},[(T(),he(At(S.icon),{class:pe(["h-5 w-5",S.iconColor])},null,8,["class"]))],2),u("div",null,[u("div",rin,$(S.value),1),u("div",sin,$(S.label),1)])])],10,tin))),128))]),u("div",iin,[u("div",ain,[w[0]||(w[0]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Status Distribution",-1)),u("div",oin,[(T(!0),R(xe,null,_e(r.value,S=>(T(),R("div",{key:S.name,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-1 rounded",onClick:C=>k.$emit("filter","status",S.name)},[u("div",{class:pe(["w-3 h-3 rounded-full",S.dotColor])},null,2),u("div",uin,$(S.name),1),u("div",din,$(S.count),1),u("div",cin,[u("div",{class:pe(["h-2 rounded-full",S.barColor]),style:rt({width:`${S.percentage}%`})},null,6)])],8,lin))),128))])]),u("div",fin,[w[6]||(w[6]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Test Results Summary",-1)),u("div",pin,[u("div",hin,[(T(),R("svg",min,[w[1]||(w[1]=u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:"#E5E7EB","stroke-width":"3"},null,-1)),u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:"#22C55E","stroke-width":"3","stroke-dasharray":`${l.value} ${100-l.value}`,"stroke-linecap":"round"},null,8,gin),u("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:"#EF4444","stroke-width":"3","stroke-dasharray":`${d.value} ${100-d.value}`,"stroke-dashoffset":`${-l.value}`,"stroke-linecap":"round"},null,8,vin)])),u("div",yin,[u("div",bin,$(s.value),1),w[2]||(w[2]=u("div",{class:"text-xs text-gray-500"},"Total Tests",-1))])])]),u("div",xin,[u("div",_in,[w[3]||(w[3]=u("div",{class:"w-3 h-3 rounded-full bg-green-500"},null,-1)),u("span",win,"Pass: "+$(i.value),1)]),u("div",kin,[w[4]||(w[4]=u("div",{class:"w-3 h-3 rounded-full bg-red-500"},null,-1)),u("span",Sin,"Fail: "+$(a.value),1)]),u("div",Cin,[w[5]||(w[5]=u("div",{class:"w-3 h-3 rounded-full bg-yellow-500"},null,-1)),u("span",Ain,"Warn: "+$(o.value),1)])])]),u("div",Tin,[w[11]||(w[11]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Performance Overview",-1)),u("div",$in,[u("div",Min,[u("div",Ein,[b(v(Ns),{class:"h-4 w-4 text-gray-400"}),w[7]||(w[7]=u("span",{class:"text-sm text-gray-600"},"Avg Duration",-1))]),u("span",Din,$(c.value),1)]),u("div",Rin,[u("div",Pin,[b(v(VY),{class:"h-4 w-4 text-gray-400"}),w[8]||(w[8]=u("span",{class:"text-sm text-gray-600"},"Throughput",-1))]),u("span",Iin,$(f.value)+" rec/s",1)]),u("div",Oin,[u("div",Lin,[b(v(rn),{class:"h-4 w-4 text-gray-400"}),w[9]||(w[9]=u("span",{class:"text-sm text-gray-600"},"Total Exceptions",-1))]),u("span",Vin,$(p.value),1)]),u("div",Nin,[u("div",jin,[b(v(Kr),{class:"h-4 w-4 text-gray-400"}),w[10]||(w[10]=u("span",{class:"text-sm text-gray-600"},"Records Processed",-1))]),u("span",Fin,$(g(h.value)),1)])])])]),u("div",Bin,[w[12]||(w[12]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Recent Executions",-1)),u("div",zin,[(T(!0),R(xe,null,_e(m.value,S=>(T(),R("div",{key:S.name,class:pe(["flex-shrink-0 p-3 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow min-w-[200px]",_(S.status)]),onClick:C=>k.$emit("select",S)},[u("div",Hin,[b(v(De),{theme:x(S.status)},{default:D(()=>[W($(S.status),1)]),_:2},1032,["theme"]),u("span",qin,$(y(S.creation)),1)]),u("div",Win,$(S.execution_name),1),u("div",Gin,$(S.test_library_reference),1)],10,Uin))),128)),m.value.length?se("",!0):(T(),R("div",Yin," No recent executions "))])])]))}},Xin={class:"flex h-[75vh]"},Qin={class:"w-56 border-r bg-gray-50 p-4 flex flex-col"},Zin={class:"space-y-1 flex-1"},Jin=["onClick"],ean={class:"text-sm"},tan={class:"mt-4 pt-4 border-t"},nan={class:"text-xs text-gray-500 mb-2"},ran={class:"w-full bg-gray-200 rounded-full h-2"},san={class:"flex-1 flex flex-col overflow-hidden"},ian={class:"flex-1 overflow-y-auto p-6"},aan={class:"space-y-4"},oan={class:"grid grid-cols-3 gap-4"},lan={class:"grid grid-cols-3 gap-4"},uan={class:"space-y-4"},dan={class:"grid grid-cols-2 gap-4"},can={class:"grid grid-cols-2 gap-4"},fan={class:"grid grid-cols-2 gap-4"},pan={class:"flex items-center gap-3"},han={class:"flex-1 bg-gray-200 rounded-full h-3"},man={class:"text-sm font-medium"},gan={class:"space-y-4"},van={class:"flex items-center justify-between mb-3"},yan={class:"border rounded-lg overflow-hidden"},ban={class:"min-w-full divide-y divide-gray-200"},xan={class:"bg-white divide-y divide-gray-200"},_an={class:"px-4 py-2"},wan={class:"px-4 py-2"},kan={class:"px-4 py-2"},San={class:"px-4 py-2"},Can={class:"px-4 py-2"},Aan={key:0},Tan={class:"space-y-4"},$an={class:"grid grid-cols-4 gap-4"},Man={class:"p-4 bg-blue-50 rounded-lg border border-blue-200"},Ean={class:"text-2xl font-bold text-blue-700"},Dan={class:"p-4 bg-green-50 rounded-lg border border-green-200"},Ran={class:"text-2xl font-bold text-green-700"},Pan={class:"p-4 bg-red-50 rounded-lg border border-red-200"},Ian={class:"text-2xl font-bold text-red-700"},Oan={class:"p-4 bg-yellow-50 rounded-lg border border-yellow-200"},Lan={class:"text-2xl font-bold text-yellow-700"},Van={class:"grid grid-cols-3 gap-4"},Nan={class:"mt-6"},jan={class:"flex items-center justify-between mb-3"},Fan={class:"border rounded-lg overflow-hidden max-h-64 overflow-y-auto"},Ban={class:"min-w-full divide-y divide-gray-200"},zan={class:"bg-white divide-y divide-gray-200"},Uan={class:"px-3 py-2"},Han={class:"px-3 py-2"},qan={class:"px-3 py-2"},Wan={class:"px-3 py-2"},Gan={class:"px-3 py-2"},Yan={key:0},Kan={class:"space-y-4"},Xan={class:"flex items-center justify-between mb-3"},Qan={class:"border rounded-lg overflow-hidden max-h-80 overflow-y-auto bg-gray-900"},Zan={class:"min-w-full"},Jan={class:"divide-y divide-gray-700"},eon={class:"px-3 py-2 text-xs text-gray-400 font-mono"},ton={class:"px-3 py-2"},non={class:"px-3 py-2 text-sm text-gray-300 font-mono"},ron={class:"px-3 py-2"},son={key:0},ion={class:"mt-4"},aon={class:"space-y-4"},oon={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},lon={class:"flex items-start gap-3"},uon={class:"grid grid-cols-3 gap-4"},don={class:"p-4 bg-white rounded-lg border"},con={class:"flex items-center gap-2 mb-2"},fon={class:"text-2xl font-bold text-gray-900"},pon={class:"p-4 bg-white rounded-lg border"},hon={class:"flex items-center gap-2 mb-2"},mon={class:"text-2xl font-bold text-gray-900"},gon={class:"p-4 bg-white rounded-lg border"},von={class:"flex items-center gap-2 mb-2"},yon={class:"text-2xl font-bold text-gray-900"},bon={class:"grid grid-cols-2 gap-4"},xon={class:"p-4 bg-white rounded-lg border"},_on={class:"flex items-center gap-2 mb-2"},won={class:"text-2xl font-bold text-gray-900"},kon={class:"p-4 bg-white rounded-lg border"},Son={class:"flex items-center gap-2 mb-2"},Con={class:"text-2xl font-bold text-gray-900"},Aon={class:"space-y-4"},Ton={class:"grid grid-cols-2 gap-4"},$on={class:"grid grid-cols-2 gap-4"},Mon={class:"grid grid-cols-2 gap-4"},Eon={class:"border-t bg-gray-50 px-6 py-4 flex items-center justify-between"},Don={class:"flex items-center gap-2"},Ron={__name:"TestExecutionForm",props:{show:{type:Boolean,default:!1},execution:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.show,set:X=>r("update:show",X)}),i=Z(()=>{var X;return!!((X=n.execution)!=null&&X.name)}),a=Q(!1),o=Q(0),l=[{id:"basic",title:"Basic Information",icon:YS,description:"Execution identification and configuration"},{id:"schedule",title:"Schedule",icon:rr,description:"Execution timing and progress"},{id:"parameters",title:"Parameters",icon:eR,description:"Test execution parameters"},{id:"results",title:"Results",icon:hr,description:"Test results and findings"},{id:"logs",title:"Logs",icon:vt,description:"Execution logs and errors"},{id:"performance",title:"Performance",icon:KL,description:"Performance metrics"},{id:"audit",title:"Audit Trail",icon:Ar,description:"Audit information and notes"}],d=Jt({execution_id:"",execution_name:"",test_library_reference:"",execution_type:"Manual",priority:"Medium",status:"Pending",scheduled_start_date:"",scheduled_end_date:"",actual_start_date:"",actual_end_date:"",duration_seconds:0,progress_percentage:0,execution_parameters:[],test_results:[],result_summary:!0,total_tests:0,passed_tests:0,failed_tests:0,warning_tests:0,total_records_processed:0,exceptions_found:0,critical_findings:0,execution_logs:[],error_details:"",performance_metrics:!0,execution_time_ms:0,memory_usage_mb:0,cpu_usage_percent:0,records_per_second:0,queries_executed:0,created_by:"",creation_date:"",approved_by:"",approval_date:"",last_modified_by:"",last_modified_date:"",notes:""}),c=[{label:"Manual",value:"Manual"},{label:"Scheduled",value:"Scheduled"},{label:"Batch",value:"Batch"},{label:"API",value:"API"}],f=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],p=[{label:"Pending",value:"Pending"},{label:"Queued",value:"Queued"},{label:"Running",value:"Running"},{label:"Completed",value:"Completed"},{label:"Failed",value:"Failed"},{label:"Cancelled",value:"Cancelled"},{label:"Paused",value:"Paused"}],h=[{label:"String",value:"String"},{label:"Integer",value:"Integer"},{label:"Float",value:"Float"},{label:"Date",value:"Date"},{label:"Boolean",value:"Boolean"}],m=[{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"},{label:"Warning",value:"Warning"},{label:"Skipped",value:"Skipped"}];et(()=>n.execution,X=>{X?Object.keys(d).forEach(j=>{X[j]!==void 0&&(d[j]=X[j])}):q()},{immediate:!0});const g=Z(()=>[!!(d.execution_name&&d.test_library_reference&&d.execution_type&&d.status),!0,!0,!0,!0,!0,!0]),y=Z(()=>g.value.filter(Boolean).length),x=Z(()=>Math.round(y.value/l.length*100));function _(X){return g.value[X]}function k(X){return o.value===X?"text-blue-600":_(X)?"text-green-500":"text-gray-400"}function w(X){o.value=X}function S(){o.value<l.length-1&&o.value++}function C(){o.value>0&&o.value--}function A(X){return X>=100?"bg-green-500":X>=50?"bg-blue-500":X>0?"bg-yellow-500":"bg-gray-300"}function M(X){return{INFO:"blue",WARNING:"orange",ERROR:"red",DEBUG:"gray",SUCCESS:"green"}[X]||"gray"}function E(X){return X?X<1e3?`${X}ms`:X<6e4?`${(X/1e3).toFixed(2)}s`:`${(X/6e4).toFixed(2)}m`:"0ms"}function P(){d.execution_parameters.push({parameter_name:"",parameter_value:"",parameter_type:"String",description:""})}function I(X){d.execution_parameters.splice(X,1)}function F(){d.test_results.push({test_name:"",status:"Pass",exception_count:0,message:""})}function L(X){d.test_results.splice(X,1)}function z(){d.execution_logs.push({timestamp:new Date().toISOString(),level:"INFO",message:""})}function N(X){d.execution_logs.splice(X,1)}function q(){Object.keys(d).forEach(X=>{Array.isArray(d[X])?d[X]=[]:typeof d[X]=="number"?d[X]=0:typeof d[X]=="boolean"?d[X]=!0:d[X]=""}),d.execution_type="Manual",d.priority="Medium",d.status="Pending",o.value=0}function V(){r("update:show",!1),q()}function O(){return ue(this,null,function*(){a.value=!0;try{console.log("Saving execution:",d),r("saved",ge({},d)),V()}catch(X){console.error("Error saving execution:",X)}finally{a.value=!1}})}return(X,j)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":j[22]||(j[22]=U=>s.value=U),options:{title:i.value?"Edit Test Execution":"New Test Execution",size:"7xl"}},{"body-content":D(()=>{var U,G,ee,ie,ne,ce;return[u("div",Xin,[u("div",Qin,[u("div",Zin,[(T(),R(xe,null,_e(l,(oe,re)=>u("button",{key:oe.id,onClick:te=>w(re),class:pe(["w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors",o.value===re?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"])},[(T(),he(At(oe.icon),{class:pe(["h-4 w-4",k(re)])},null,8,["class"])),u("span",ean,$(oe.title),1),_(re)?(T(),he(v(ro),{key:0,class:"h-4 w-4 ml-auto text-green-500"})):se("",!0)],10,Jin)),64))]),u("div",tan,[u("div",nan," Progress: "+$(y.value)+"/"+$(l.length)+" sections ",1),u("div",ran,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:rt({width:`${x.value}%`})},null,4)])])]),u("div",san,[b(Vt,{icon:(U=l[o.value])==null?void 0:U.icon,title:(G=l[o.value])==null?void 0:G.title,description:(ee=l[o.value])==null?void 0:ee.description},null,8,["icon","title","description"]),u("div",ian,[we(u("div",aan,[u("div",oan,[b(v(ve),{modelValue:d.execution_id,"onUpdate:modelValue":j[0]||(j[0]=oe=>d.execution_id=oe),label:"Execution ID",type:"text",placeholder:"Auto-generated",disabled:""},null,8,["modelValue"]),b(v(ve),{modelValue:d.execution_name,"onUpdate:modelValue":j[1]||(j[1]=oe=>d.execution_name=oe),label:"Execution Name *",type:"text",placeholder:"Enter execution name"},null,8,["modelValue"]),u("div",null,[j[23]||(j[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Test Library *",-1)),b(Mt,{modelValue:d.test_library_reference,"onUpdate:modelValue":j[2]||(j[2]=oe=>d.test_library_reference=oe),doctype:"Audit Test Library",placeholder:"Select test"},null,8,["modelValue"])])]),u("div",lan,[u("div",null,[j[24]||(j[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Execution Type *",-1)),b(v(Qe),{modelValue:d.execution_type,"onUpdate:modelValue":j[3]||(j[3]=oe=>d.execution_type=oe),options:c,placeholder:"Select type"},null,8,["modelValue"])]),u("div",null,[j[25]||(j[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),b(v(Qe),{modelValue:d.priority,"onUpdate:modelValue":j[4]||(j[4]=oe=>d.priority=oe),options:f,placeholder:"Select priority"},null,8,["modelValue"])]),u("div",null,[j[26]||(j[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status *",-1)),b(v(Qe),{modelValue:d.status,"onUpdate:modelValue":j[5]||(j[5]=oe=>d.status=oe),options:p,placeholder:"Select status"},null,8,["modelValue"])])])],512),[[lt,o.value===0]]),we(u("div",uan,[u("div",dan,[b(v(ve),{modelValue:d.scheduled_start_date,"onUpdate:modelValue":j[6]||(j[6]=oe=>d.scheduled_start_date=oe),label:"Scheduled Start Date",type:"datetime-local"},null,8,["modelValue"]),b(v(ve),{modelValue:d.scheduled_end_date,"onUpdate:modelValue":j[7]||(j[7]=oe=>d.scheduled_end_date=oe),label:"Scheduled End Date",type:"datetime-local"},null,8,["modelValue"])]),u("div",can,[b(v(ve),{modelValue:d.actual_start_date,"onUpdate:modelValue":j[8]||(j[8]=oe=>d.actual_start_date=oe),label:"Actual Start Date",type:"datetime-local",disabled:""},null,8,["modelValue"]),b(v(ve),{modelValue:d.actual_end_date,"onUpdate:modelValue":j[9]||(j[9]=oe=>d.actual_end_date=oe),label:"Actual End Date",type:"datetime-local",disabled:""},null,8,["modelValue"])]),u("div",fan,[b(v(ve),{modelValue:d.duration_seconds,"onUpdate:modelValue":j[10]||(j[10]=oe=>d.duration_seconds=oe),label:"Duration (Seconds)",type:"number",disabled:""},null,8,["modelValue"]),u("div",null,[j[27]||(j[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Progress",-1)),u("div",pan,[u("div",han,[u("div",{class:pe(["h-3 rounded-full transition-all",A(d.progress_percentage)]),style:rt({width:`${d.progress_percentage||0}%`})},null,6)]),u("span",man,$(d.progress_percentage||0)+"%",1)])])])],512),[[lt,o.value===1]]),we(u("div",gan,[u("div",van,[j[29]||(j[29]=u("h4",{class:"text-sm font-medium text-gray-700"},"Parameters",-1)),b(v(J),{size:"sm",onClick:P},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[j[28]||(j[28]=W(" Add Parameter ",-1))]),_:1})]),u("div",yan,[u("table",ban,[j[31]||(j[31]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Parameter Name"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Value"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Type"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",xan,[(T(!0),R(xe,null,_e(d.execution_parameters,(oe,re)=>(T(),R("tr",{key:re},[u("td",_an,[b(v(ve),{modelValue:oe.parameter_name,"onUpdate:modelValue":te=>oe.parameter_name=te,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",wan,[b(v(ve),{modelValue:oe.parameter_value,"onUpdate:modelValue":te=>oe.parameter_value=te,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",kan,[b(v(Qe),{modelValue:oe.parameter_type,"onUpdate:modelValue":te=>oe.parameter_type=te,options:h,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",San,[b(v(ve),{modelValue:oe.description,"onUpdate:modelValue":te=>oe.description=te,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Can,[b(v(J),{variant:"ghost",size:"sm",onClick:te=>I(re)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(ie=d.execution_parameters)!=null&&ie.length?se("",!0):(T(),R("tr",Aan,[...j[30]||(j[30]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No parameters defined. Click "Add Parameter" to configure test parameters. ',-1)])]))])])])],512),[[lt,o.value===2]]),we(u("div",Tan,[u("div",$an,[u("div",Man,[u("div",Ean,$(d.total_tests||0),1),j[32]||(j[32]=u("div",{class:"text-sm text-blue-600"},"Total Tests",-1))]),u("div",Dan,[u("div",Ran,$(d.passed_tests||0),1),j[33]||(j[33]=u("div",{class:"text-sm text-green-600"},"Passed",-1))]),u("div",Pan,[u("div",Ian,$(d.failed_tests||0),1),j[34]||(j[34]=u("div",{class:"text-sm text-red-600"},"Failed",-1))]),u("div",Oan,[u("div",Lan,$(d.warning_tests||0),1),j[35]||(j[35]=u("div",{class:"text-sm text-yellow-600"},"Warnings",-1))])]),u("div",Van,[b(v(ve),{modelValue:d.total_records_processed,"onUpdate:modelValue":j[11]||(j[11]=oe=>d.total_records_processed=oe),label:"Records Processed",type:"number",disabled:""},null,8,["modelValue"]),b(v(ve),{modelValue:d.exceptions_found,"onUpdate:modelValue":j[12]||(j[12]=oe=>d.exceptions_found=oe),label:"Exceptions Found",type:"number",disabled:""},null,8,["modelValue"]),b(v(ve),{modelValue:d.critical_findings,"onUpdate:modelValue":j[13]||(j[13]=oe=>d.critical_findings=oe),label:"Critical Findings",type:"number",disabled:""},null,8,["modelValue"])]),u("div",Nan,[u("div",jan,[j[37]||(j[37]=u("h4",{class:"text-sm font-medium text-gray-700"},"Detailed Results",-1)),b(v(J),{size:"sm",variant:"outline",onClick:F},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[j[36]||(j[36]=W(" Add Result ",-1))]),_:1})]),u("div",Fan,[u("table",Ban,[j[39]||(j[39]=u("thead",{class:"bg-gray-50 sticky top-0"},[u("tr",null,[u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Test Name"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Status"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Exceptions"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500"},"Message"),u("th",{class:"px-3 py-2 w-12"})])],-1)),u("tbody",zan,[(T(!0),R(xe,null,_e(d.test_results,(oe,re)=>(T(),R("tr",{key:re},[u("td",Uan,[b(v(ve),{modelValue:oe.test_name,"onUpdate:modelValue":te=>oe.test_name=te,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Han,[b(v(Qe),{modelValue:oe.status,"onUpdate:modelValue":te=>oe.status=te,options:m,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",qan,[b(v(ve),{modelValue:oe.exception_count,"onUpdate:modelValue":te=>oe.exception_count=te,type:"number",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Wan,[b(v(ve),{modelValue:oe.message,"onUpdate:modelValue":te=>oe.message=te,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Gan,[b(v(J),{variant:"ghost",size:"sm",onClick:te=>L(re)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(ne=d.test_results)!=null&&ne.length?se("",!0):(T(),R("tr",Yan,[...j[38]||(j[38]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"}," No results yet. Results will appear after execution. ",-1)])]))])])])])],512),[[lt,o.value===3]]),we(u("div",Kan,[u("div",Xan,[j[41]||(j[41]=u("h4",{class:"text-sm font-medium text-gray-700"},"Execution Logs",-1)),b(v(J),{size:"sm",variant:"outline",onClick:z},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[j[40]||(j[40]=W(" Add Log ",-1))]),_:1})]),u("div",Qan,[u("table",Zan,[j[43]||(j[43]=u("thead",{class:"bg-gray-800 sticky top-0"},[u("tr",null,[u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-400 w-40"},"Timestamp"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-400 w-24"},"Level"),u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-400"},"Message"),u("th",{class:"px-3 py-2 w-12"})])],-1)),u("tbody",Jan,[(T(!0),R(xe,null,_e(d.execution_logs,(oe,re)=>(T(),R("tr",{key:re},[u("td",eon,$(oe.timestamp||new Date().toISOString()),1),u("td",ton,[b(v(De),{theme:M(oe.level)},{default:D(()=>[W($(oe.level),1)]),_:2},1032,["theme"])]),u("td",non,$(oe.message),1),u("td",ron,[b(v(J),{variant:"ghost",size:"sm",onClick:te=>N(re)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-400"})]),_:1},8,["onClick"])])]))),128)),(ce=d.execution_logs)!=null&&ce.length?se("",!0):(T(),R("tr",son,[...j[42]||(j[42]=[u("td",{colspan:"4",class:"px-4 py-8 text-center text-gray-500 text-sm"}," No logs recorded yet. ",-1)])]))])])]),u("div",ion,[j[44]||(j[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Error Details",-1)),b(v(an),{modelValue:d.error_details,"onUpdate:modelValue":j[14]||(j[14]=oe=>d.error_details=oe),content:d.error_details,placeholder:"Error details will appear here if any errors occur...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[lt,o.value===4]]),we(u("div",aon,[u("div",oon,[u("div",lon,[b(v(KL),{class:"h-5 w-5 text-blue-600 mt-0.5"}),j[45]||(j[45]=u("div",{class:"text-sm text-blue-700"},[u("p",{class:"font-medium"},"Performance Metrics"),u("p",null,"These metrics are automatically captured during test execution.")],-1))])]),u("div",uon,[u("div",don,[u("div",con,[b(v(Ns),{class:"h-5 w-5 text-gray-400"}),j[46]||(j[46]=u("span",{class:"text-sm text-gray-600"},"Execution Time",-1))]),u("div",fon,$(E(d.execution_time_ms)),1)]),u("div",pon,[u("div",hon,[b(v(_fe),{class:"h-5 w-5 text-gray-400"}),j[47]||(j[47]=u("span",{class:"text-sm text-gray-600"},"Memory Usage",-1))]),u("div",mon,$(d.memory_usage_mb||0)+" MB ",1)]),u("div",gon,[u("div",von,[b(v(ffe),{class:"h-5 w-5 text-gray-400"}),j[48]||(j[48]=u("span",{class:"text-sm text-gray-600"},"CPU Usage",-1))]),u("div",yon,$(d.cpu_usage_percent||0)+"% ",1)])]),u("div",bon,[u("div",xon,[u("div",_on,[b(v(VY),{class:"h-5 w-5 text-gray-400"}),j[49]||(j[49]=u("span",{class:"text-sm text-gray-600"},"Throughput",-1))]),u("div",won,[W($(d.records_per_second||0)+" ",1),j[50]||(j[50]=u("span",{class:"text-sm font-normal text-gray-500"},"records/sec",-1))])]),u("div",kon,[u("div",Son,[b(v(Kr),{class:"h-5 w-5 text-gray-400"}),j[51]||(j[51]=u("span",{class:"text-sm text-gray-600"},"Queries Executed",-1))]),u("div",Con,$(d.queries_executed||0),1)])])],512),[[lt,o.value===5]]),we(u("div",Aon,[u("div",Ton,[u("div",null,[j[52]||(j[52]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Created By",-1)),b(Mt,{modelValue:d.created_by,"onUpdate:modelValue":j[15]||(j[15]=oe=>d.created_by=oe),doctype:"User",placeholder:"Auto-filled",disabled:""},null,8,["modelValue"])]),b(v(ve),{modelValue:d.creation_date,"onUpdate:modelValue":j[16]||(j[16]=oe=>d.creation_date=oe),label:"Creation Date",type:"datetime-local",disabled:""},null,8,["modelValue"])]),u("div",$on,[u("div",null,[j[53]||(j[53]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved By",-1)),b(Mt,{modelValue:d.approved_by,"onUpdate:modelValue":j[17]||(j[17]=oe=>d.approved_by=oe),doctype:"User",placeholder:"Select approver"},null,8,["modelValue"])]),b(v(ve),{modelValue:d.approval_date,"onUpdate:modelValue":j[18]||(j[18]=oe=>d.approval_date=oe),label:"Approval Date",type:"datetime-local"},null,8,["modelValue"])]),u("div",Mon,[u("div",null,[j[54]||(j[54]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Modified By",-1)),b(Mt,{modelValue:d.last_modified_by,"onUpdate:modelValue":j[19]||(j[19]=oe=>d.last_modified_by=oe),doctype:"User",placeholder:"Auto-filled",disabled:""},null,8,["modelValue"])]),b(v(ve),{modelValue:d.last_modified_date,"onUpdate:modelValue":j[20]||(j[20]=oe=>d.last_modified_date=oe),label:"Last Modified Date",type:"datetime-local",disabled:""},null,8,["modelValue"])]),u("div",null,[j[55]||(j[55]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),b(v(an),{modelValue:d.notes,"onUpdate:modelValue":j[21]||(j[21]=oe=>d.notes=oe),content:d.notes,placeholder:"Additional notes...","editor-class":"prose-sm max-w-none min-h-[120px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[lt,o.value===6]])]),u("div",Eon,[b(v(J),{variant:"outline",onClick:C,disabled:o.value===0},{prefix:D(()=>[b(v(gr),{class:"h-4 w-4"})]),default:D(()=>[j[56]||(j[56]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",Don,[b(v(J),{variant:"outline",onClick:V},{default:D(()=>[...j[57]||(j[57]=[W("Cancel",-1)])]),_:1}),o.value<l.length-1?(T(),he(v(J),{key:0,variant:"solid",onClick:S},{suffix:D(()=>[b(v(sr),{class:"h-4 w-4"})]),default:D(()=>[j[58]||(j[58]=W(" Next ",-1))]),_:1})):(T(),he(v(J),{key:1,variant:"solid",theme:"green",onClick:O,loading:a.value},{prefix:D(()=>[b(v($r),{class:"h-4 w-4"})]),default:D(()=>[W(" "+$(i.value?"Update Execution":"Create Execution"),1)]),_:1},8,["loading"]))])])])])]}),_:1},8,["modelValue","options"]))}},Pon=Yl("testExecution",()=>{const t=Q([]),e=Q([]),n=Q([]),r=Q([]),s=Q([]),i=Q(null),a=Q(!1),o=Q(""),l=Q([]),d=Q([]),c=Q({status:"",testLibrary:"",executionType:"",priority:"",dateFrom:"",dateTo:""}),f=Q({pending:0,running:0,completed:0,failed:0,cancelled:0}),p=Z(()=>t.value.filter(ie=>ie.execution_status==="Running"||ie.execution_status==="Pending")),h=Z(()=>t.value.filter(ie=>ie.execution_status==="Completed")),m=Z(()=>t.value.filter(ie=>ie.execution_status==="Failed")),g=Z(()=>{const ie={};return t.value.forEach(ne=>{const ce=ne.execution_status||"Unknown";ie[ce]||(ie[ce]=[]),ie[ce].push(ne)}),ie}),y=Z(()=>{if(!i.value)return 0;const ie=i.value.total_tests||1,ne=i.value.completed_tests||0;return Math.round(ne/ie*100)}),x=Z(()=>{let ie=t.value;if(o.value){const ne=o.value.toLowerCase();ie=ie.filter(ce=>{var oe,re,te;return((oe=ce.execution_name)==null?void 0:oe.toLowerCase().includes(ne))||((re=ce.execution_id)==null?void 0:re.toLowerCase().includes(ne))||((te=ce.test_library_name)==null?void 0:te.toLowerCase().includes(ne))})}return c.value.status&&(ie=ie.filter(ne=>ne.execution_status===c.value.status)),c.value.testLibrary&&(ie=ie.filter(ne=>ne.test_library_id===c.value.testLibrary)),c.value.executionType&&(ie=ie.filter(ne=>ne.execution_type===c.value.executionType)),c.value.priority&&(ie=ie.filter(ne=>ne.priority_level===c.value.priority)),c.value.dateFrom&&(ie=ie.filter(ne=>new Date(ne.creation)>=new Date(c.value.dateFrom))),c.value.dateTo&&(ie=ie.filter(ne=>new Date(ne.creation)<=new Date(c.value.dateTo))),ie}),_=ie=>{o.value=ie},k=()=>{o.value=""},w=ie=>{Object.assign(c.value,ie)},S=()=>{c.value={status:"",testLibrary:"",executionType:"",priority:"",dateFrom:"",dateTo:""}},C=(...ne)=>ue(void 0,[...ne],function*(ie={}){a.value=!0;try{const ce=yield Ve({url:"frappe.client.get_list",params:{doctype:"Test Execution",fields:["name","execution_id","execution_name","test_library_reference","execution_type","priority","status","actual_start_date","actual_end_date","duration_seconds","progress_percentage","total_tests","passed_tests","failed_tests","warning_tests","total_records_processed","exceptions_found","critical_findings","created_by","creation","modified"],filters:ie,limit_page_length:1e3,order_by:"actual_start_date desc"}}).fetch();t.value=ce||[],X()}catch(ce){console.error("Error fetching test executions:",ce),t.value=[]}finally{a.value=!1}}),A=ie=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.get",params:{doctype:"Test Execution",name:ie}}).fetch();return i.value=ne,ne}catch(ne){return console.error("Error fetching test execution details:",ne),null}}),M=ie=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.insert",params:{doc:ge({doctype:"Test Execution"},ie)}}).fetch();return yield C(),ne}catch(ne){throw console.error("Error creating test execution:",ne),ne}}),E=(ie,ne)=>ue(void 0,null,function*(){try{const ce=yield Ve({url:"frappe.client.set_value",params:{doctype:"Test Execution",name:ie,fieldname:ne}}).fetch();return yield C(),ce}catch(ce){throw console.error("Error updating test execution:",ce),ce}}),P=ie=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"mkaguzi.api.test_execution.start_execution",params:{execution_id:ie}}).fetch();return yield A(ie),yield C(),ne}catch(ne){throw console.error("Error starting test execution:",ne),ne}}),I=ie=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"mkaguzi.api.test_execution.stop_execution",params:{execution_id:ie}}).fetch();return yield A(ie),yield C(),ne}catch(ne){throw console.error("Error stopping test execution:",ne),ne}}),F=ie=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.get_list",params:{doctype:"Test Result",filters:{test_execution:ie},fields:["name","test_id","test_name","result_status","actual_value","expected_value","variance","threshold_met","exception_count","result_summary","execution_time","started_at","completed_at"],limit_page_length:1e3,order_by:"started_at desc"}}).fetch();return e.value=ne||[],ne}catch(ne){return console.error("Error fetching test results:",ne),e.value=[],[]}}),L=ie=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.get_list",params:{doctype:"Test Parameter",filters:{parent:ie,parenttype:"Audit Test Library"},fields:["name","parameter_name","parameter_type","default_value","is_required","description","validation_rule"],limit_page_length:1e3}}).fetch();return n.value=ne||[],ne}catch(ne){return console.error("Error fetching test parameters:",ne),n.value=[],[]}}),z=ie=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.get_list",params:{doctype:"Test Threshold",filters:{parent:ie,parenttype:"Audit Test Library"},fields:["name","threshold_name","threshold_type","operator","threshold_value","warning_threshold","critical_threshold","description"],limit_page_length:1e3}}).fetch();return r.value=ne||[],ne}catch(ne){return console.error("Error fetching test thresholds:",ne),r.value=[],[]}}),N=ie=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.get_list",params:{doctype:"Execution Log",filters:{parent:ie,parenttype:"Test Execution"},fields:["name","timestamp","log_level","message","step_name","duration_ms"],limit_page_length:1e3,order_by:"timestamp desc"}}).fetch();return s.value=ne||[],ne}catch(ne){return console.error("Error fetching execution logs:",ne),s.value=[],[]}}),q=ie=>ue(void 0,null,function*(){try{const ne=yield Ve({url:"frappe.client.get_list",params:{doctype:"Analytical Procedure Result",filters:{test_execution:ie},fields:["name","procedure_name","procedure_type","current_value","prior_value","budget_value","variance_amount","variance_percentage","significance_level","investigation_required","conclusion","completed_at"],limit_page_length:1e3}}).fetch();return d.value=ne||[],ne}catch(ne){return console.error("Error fetching analytical procedure results:",ne),d.value=[],[]}}),V=ie=>ue(void 0,null,function*(){try{return yield Ve({url:"mkaguzi.api.test_execution.run_analytical_procedure",params:ie}).fetch()}catch(ne){throw console.error("Error running analytical procedure:",ne),ne}}),O=(ie,ne="excel")=>ue(void 0,null,function*(){try{return yield Ve({url:"mkaguzi.api.test_execution.export_results",params:{execution_id:ie,format:ne}}).fetch()}catch(ce){throw console.error("Error exporting test results:",ce),ce}}),X=()=>{const ie={pending:0,running:0,completed:0,failed:0,cancelled:0};t.value.forEach(ne=>{var oe;const ce=((oe=ne.status)==null?void 0:oe.toLowerCase())||"pending";ie.hasOwnProperty(ce)&&ie[ce]++}),f.value=ie};return{testExecutions:t,testResults:e,testParameters:n,testThresholds:r,executionLogs:s,currentExecution:i,loading:a,searchQuery:o,filters:c,testLibraryTests:l,analyticalProcedures:d,executionStatuses:f,activeExecutions:p,completedExecutions:h,failedExecutions:m,executionsByStatus:g,executionProgress:y,filteredExecutions:x,setSearchQuery:_,clearSearchQuery:k,setFilters:w,clearFilters:S,fetchTestExecutions:C,fetchTestExecutionDetails:A,createTestExecution:M,updateTestExecution:E,startTestExecution:P,stopTestExecution:I,fetchTestResults:F,fetchTestParameters:L,fetchTestThresholds:z,fetchExecutionLogs:N,fetchAnalyticalProcedureResults:q,runAnalyticalProcedure:V,exportTestResults:O,getExecutionById:ie=>t.value.find(ne=>ne.name===ie),getExecutionsByEngagement:ie=>t.value.filter(ne=>ne.audit_engagement===ie),clearCurrentExecution:()=>{i.value=null,e.value=[],s.value=[],d.value=[]},calculateExecutionMetrics:ie=>{if(!ie)return null;const ne=ie.total_tests||0,ce=ie.completed_tests||0,oe=ie.failed_tests||0,re=ce-oe;return{totalTests:ne,completedTests:ce,failedTests:oe,successfulTests:re,successRate:ne>0?Math.round(re/ne*100):0,completionRate:ne>0?Math.round(ce/ne*100):0,failureRate:ce>0?Math.round(oe/ce*100):0}}}}),Ion={class:"test-execution-page"},Oon={class:"page-header"},Lon={class:"header-content"},Von={class:"page-title"},Non={class:"my-6"},jon={class:"executions-section"},Fon={class:"table-container"},Bon={class:"executions-table"},zon={class:"checkbox-column"},Uon={class:"checkbox-column"},Hon={class:"execution-id"},qon={class:"test-name"},Won={class:"category"},Gon={class:"status"},Yon={class:"start-time"},Kon={class:"duration"},Xon={class:"executed-by"},Qon={class:"actions"},Zon={class:"action-buttons"},Jon={key:0,class:"empty-state"},eln={key:1,class:"loading-state"},tln={key:0,class:"pagination-section"},nln={class:"pagination-info"},rln={class:"pagination-controls"},sln={class:"page-indicator"},iln={key:0,class:"execution-details"},aln={class:"details-grid"},oln={class:"detail-section"},lln={class:"detail-rows"},uln={class:"detail-row"},dln={class:"detail-value"},cln={class:"detail-row"},fln={class:"detail-value"},pln={class:"detail-row"},hln={class:"detail-row"},mln={class:"detail-value"},gln={class:"detail-row"},vln={class:"detail-value"},yln={class:"detail-row"},bln={class:"detail-value"},xln={class:"detail-row"},_ln={class:"detail-value"},wln={class:"detail-section"},kln={key:0,class:"results-list"},Sln={class:"result-header"},Cln={class:"result-description"},Aln={key:0,class:"result-error"},Tln={key:1,class:"no-results"},$ln={__name:"TestExecution",setup(t){const e=Pon();qo();const n=Q([]),r=Q([]),s=Q(!1);Q(!1);const i=Q(!1),a=Q(!1),o=Q(!1),l=Q(null),d=Q(null),c=Q([]),f=Q({status:"",search:"",testLibrary:"",executionType:"",priority:"",dateFrom:"",dateTo:""});Q({type:"Manual",scheduleTime:"",priority:"Normal"});const p=Q(1),h=Q(20),m=Q(0),g=Q(0);Z(()=>({running:e.executionStatuses.running,completed:e.executionStatuses.completed,failed:e.executionStatuses.failed,total:e.testExecutions.length}));const y=Z(()=>{let j=e.testExecutions;if(f.value.status&&(j=j.filter(U=>U.status===f.value.status)),f.value.category&&(j=j.filter(U=>U.execution_type===f.value.category)),f.value.search){const U=f.value.search.toLowerCase();j=j.filter(G=>{var ee,ie;return((ee=G.execution_name)==null?void 0:ee.toLowerCase().includes(U))||((ie=G.execution_id)==null?void 0:ie.toLowerCase().includes(U))})}return j}),x=Z(()=>e.testLibraryTests);Z(()=>x.value.filter(j=>r.value.includes(j.name)));const _=Z(()=>e.loading),k=()=>ue(this,null,function*(){yield e.fetchTestExecutions()}),w=()=>ue(this,null,function*(){console.log("Loading available tests...")}),S=j=>{Object.assign(f.value,j),p.value=1,k()},C=(j,U)=>{j&&U&&(f.value[j]=U,p.value=1,k())},A=j=>ue(this,null,function*(){var U;try{(U=d.value)!=null&&U.name?yield e.updateTestExecution(d.value.name,j):yield e.createTestExecution(j),o.value=!1,d.value=null,yield k()}catch(G){console.error("Failed to save execution:",G)}}),M=()=>{s.value?n.value=y.value.map(j=>j.name):n.value=[]},E=j=>ue(this,null,function*(){l.value=j,a.value=!0;try{const U=yield e.fetchTestResults(j.name);c.value=U,yield e.fetchExecutionLogs(j.name)}catch(U){console.error("Failed to load execution results:",U),c.value=[]}}),P=j=>ue(this,null,function*(){try{yield e.stopTestExecution(j.name)}catch(U){console.error("Failed to cancel execution:",U)}}),I=j=>ue(this,null,function*(){try{const U=yield e.exportTestResults(j.name,"excel");U.download_url&&window.open(U.download_url,"_blank")}catch(U){console.error("Failed to download results:",U)}}),F=()=>{console.log("Download detailed results")},L=()=>ue(this,null,function*(){yield k()}),z=j=>{p.value=j,k()},N=j=>({Pending:"secondary",Running:"info",Completed:"success",Failed:"danger",Cancelled:"secondary"})[j]||"secondary",q=j=>({"Financial Controls":"blue","Operational Controls":"green",Compliance:"orange","Data Integrity":"purple",Performance:"cyan"})[j]||"gray",V=j=>({Passed:"green",Failed:"red",Warning:"orange"})[j]||"gray",O=j=>j?new Date(j).toLocaleString():"N/A",X=j=>{if(!j.actual_start_date)return"N/A";const U=new Date(j.actual_start_date),ee=(j.actual_end_date?new Date(j.actual_end_date):new Date)-U,ie=Math.floor(ee/6e4),ne=Math.floor(ee%6e4/1e3);return ie>0?`${ie}m ${ne}s`:`${ne}s`};return et(n,()=>{s.value=n.value.length===y.value.length&&y.value.length>0}),yt(()=>ue(this,null,function*(){yield Promise.all([k(),w()])})),(j,U)=>(T(),R("div",Ion,[u("div",Oon,[u("div",Lon,[u("h1",Von,[b(v(ib),{class:"title-icon"}),U[9]||(U[9]=W(" Test Execution ",-1))]),U[10]||(U[10]=u("p",{class:"page-description"}," Execute and monitor audit tests with real-time results and detailed reporting ",-1))])]),b(Zsn,{filters:f.value,"onUpdate:filters":S,onRefresh:L,onCreate:U[0]||(U[0]=G=>o.value=!0)},null,8,["filters"]),u("div",Non,[b(Kin,{executions:y.value,activeFilter:f.value.status,onFilter:C,onSelect:E},null,8,["executions","activeFilter"])]),u("div",jon,[u("div",Fon,[u("table",Bon,[u("thead",null,[u("tr",null,[u("th",zon,[b(v(St),{modelValue:s.value,"onUpdate:modelValue":U[1]||(U[1]=G=>s.value=G),onChange:M},null,8,["modelValue"])]),U[11]||(U[11]=u("th",null,"Execution ID",-1)),U[12]||(U[12]=u("th",null,"Test Name",-1)),U[13]||(U[13]=u("th",null,"Category",-1)),U[14]||(U[14]=u("th",null,"Status",-1)),U[15]||(U[15]=u("th",null,"Start Time",-1)),U[16]||(U[16]=u("th",null,"Duration",-1)),U[17]||(U[17]=u("th",null,"Executed By",-1)),U[18]||(U[18]=u("th",null,"Actions",-1))])]),u("tbody",null,[(T(!0),R(xe,null,_e(y.value,G=>(T(),R("tr",{key:G.name,class:pe({"selected-row":n.value.includes(G.name)})},[u("td",Uon,[b(v(St),{modelValue:n.value,"onUpdate:modelValue":U[2]||(U[2]=ee=>n.value=ee),value:G.name},null,8,["modelValue","value"])]),u("td",Hon,$(G.execution_id),1),u("td",qon,$(G.execution_name),1),u("td",Won,[b(v(De),{variant:q(G.execution_type)},{default:D(()=>[W($(G.execution_type),1)]),_:2},1032,["variant"])]),u("td",Gon,[b(v(De),{variant:N(G.status)},{default:D(()=>[W($(G.status),1)]),_:2},1032,["variant"])]),u("td",Yon,$(O(G.actual_start_date)),1),u("td",Kon,$(X(G)),1),u("td",Xon,$(G.created_by),1),u("td",Qon,[u("div",Zon,[b(v(J),{variant:"ghost",size:"sm",onClick:ee=>E(G),title:"View Details"},{default:D(()=>[b(v(lr))]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ee=>I(G),disabled:G.status!=="Completed",title:"Download Results"},{default:D(()=>[b(v(xn))]),_:1},8,["onClick","disabled"]),b(v(J),{variant:"ghost",size:"sm",onClick:ee=>P(G),disabled:G.status!=="Running",title:"Cancel Execution"},{default:D(()=>[b(v(ht))]),_:1},8,["onClick","disabled"])])])],2))),128))])]),!y.value.length&&!_.value?(T(),R("div",Jon,[b(v(l$),{class:"empty-icon"}),U[20]||(U[20]=u("h3",null,"No Test Executions Found",-1)),U[21]||(U[21]=u("p",null,"Execute some tests to see results here.",-1)),b(v(J),{variant:"solid",onClick:U[3]||(U[3]=G=>i.value=!0)},{default:D(()=>[b(v(Ll)),U[19]||(U[19]=W(" Execute Tests ",-1))]),_:1})])):se("",!0),_.value?(T(),R("div",eln,[b(v(N0),{class:"loading-icon"}),U[22]||(U[22]=u("p",null,"Loading test executions...",-1))])):se("",!0)]),y.value.length?(T(),R("div",tln,[u("div",nln," Showing "+$((p.value-1)*h.value+1)+" to "+$(Math.min(p.value*h.value,m.value))+" of "+$(m.value)+" executions ",1),u("div",rln,[b(v(J),{variant:"outline",size:"sm",disabled:p.value===1,onClick:U[4]||(U[4]=G=>z(p.value-1))},{default:D(()=>[b(v(gr)),U[23]||(U[23]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",sln,"Page "+$(p.value)+" of "+$(g.value),1),b(v(J),{variant:"outline",size:"sm",disabled:p.value===g.value,onClick:U[5]||(U[5]=G=>z(p.value+1))},{default:D(()=>[U[24]||(U[24]=W(" Next ",-1)),b(v(sr))]),_:1},8,["disabled"])])])):se("",!0)]),b(v(jt),{modelValue:a.value,"onUpdate:modelValue":U[7]||(U[7]=G=>a.value=G),size:"large"},{title:D(()=>{var G;return[b(v(lr)),W(" Execution Details: "+$((G=l.value)==null?void 0:G.execution_id),1)]}),actions:D(()=>[b(v(J),{variant:"outline",onClick:U[6]||(U[6]=G=>a.value=!1)},{default:D(()=>[...U[35]||(U[35]=[W(" Close ",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:F,disabled:!c.value.length},{default:D(()=>[b(v(xn)),U[36]||(U[36]=W(" Download Results ",-1))]),_:1},8,["disabled"])]),default:D(()=>[l.value?(T(),R("div",iln,[u("div",aln,[u("div",oln,[U[32]||(U[32]=u("h4",null,"Execution Information",-1)),u("div",lln,[u("div",uln,[U[25]||(U[25]=u("span",{class:"detail-label"},"Test Name:",-1)),u("span",dln,$(l.value.execution_name),1)]),u("div",cln,[U[26]||(U[26]=u("span",{class:"detail-label"},"Category:",-1)),u("span",fln,$(l.value.execution_type),1)]),u("div",pln,[U[27]||(U[27]=u("span",{class:"detail-label"},"Status:",-1)),b(v(De),{variant:N(l.value.status)},{default:D(()=>[W($(l.value.status),1)]),_:1},8,["variant"])]),u("div",hln,[U[28]||(U[28]=u("span",{class:"detail-label"},"Start Time:",-1)),u("span",mln,$(O(l.value.actual_start_date)),1)]),u("div",gln,[U[29]||(U[29]=u("span",{class:"detail-label"},"End Time:",-1)),u("span",vln,$(O(l.value.actual_end_date)),1)]),u("div",yln,[U[30]||(U[30]=u("span",{class:"detail-label"},"Duration:",-1)),u("span",bln,$(X(l.value)),1)]),u("div",xln,[U[31]||(U[31]=u("span",{class:"detail-label"},"Executed By:",-1)),u("span",_ln,$(l.value.created_by),1)])])]),u("div",wln,[U[34]||(U[34]=u("h4",null,"Test Results",-1)),c.value.length?(T(),R("div",kln,[(T(!0),R(xe,null,_e(c.value,G=>(T(),R("div",{key:G.name,class:"result-item"},[u("div",Sln,[b(v(De),{variant:V(G.status)},{default:D(()=>[W($(G.status),1)]),_:2},1032,["variant"]),u("span",Cln,$(G.description),1)]),G.error_message?(T(),R("div",Aln,$(G.error_message),1)):se("",!0)]))),128))])):(T(),R("div",Tln,[b(v(l$)),U[33]||(U[33]=u("span",null,"No results available",-1))]))])])])):se("",!0)]),_:1},8,["modelValue"]),b(Ron,{show:o.value,execution:d.value,"onUpdate:show":U[8]||(U[8]=G=>o.value=G),onSaved:A},null,8,["show","execution"])]))}},Mln=It($ln,[["__scopeId","data-v-b1b9d317"]]),Eln={class:"bg-white rounded-xl border p-4"},Dln={class:"flex flex-wrap items-center gap-4"},Rln={class:"flex-1 min-w-[200px] max-w-md"},Pln={class:"w-48"},Iln={class:"w-40"},Oln={class:"w-44"},Lln={class:"w-36"},Vln={class:"flex items-center gap-2 ml-auto"},Nln={key:0,class:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t"},jln={__name:"TestFilters",props:{filters:{type:Object,default:()=>({})}},emits:["update:filters","refresh","create"],setup(t,{emit:e}){const n=t,r=e,s=Jt({search:"",category:"",testType:"",logicType:"",status:""});et(()=>n.filters,h=>{h&&Object.assign(s,h)},{immediate:!0,deep:!0});const i=[{label:"All Categories",value:""},{label:"Duplicate Detection",value:"Duplicate Detection"},{label:"Outlier Analysis",value:"Outlier Analysis"},{label:"Trend Analysis",value:"Trend Analysis"},{label:"Ratio Analysis",value:"Ratio Analysis"},{label:"Completeness Check",value:"Completeness Check"},{label:"Validity Check",value:"Validity Check"},{label:"Accuracy Check",value:"Accuracy Check"},{label:"Timeliness Check",value:"Timeliness Check"},{label:"Consistency Check",value:"Consistency Check"},{label:"Custom Analysis",value:"Custom Analysis"}],a=[{label:"All Types",value:""},{label:"Substantive",value:"Substantive"},{label:"Controls",value:"Controls"},{label:"Analytical",value:"Analytical"},{label:"Compliance",value:"Compliance"}],o=[{label:"All Logic Types",value:""},{label:"SQL Query",value:"SQL Query"},{label:"Python Script",value:"Python Script"},{label:"Built-in Function",value:"Built-in Function"}],l=[{label:"All Status",value:""},{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"},{label:"Under Review",value:"Under Review"}],d=Z(()=>Object.values(s).some(h=>h!==""));function c(){r("update:filters",ge({},s))}function f(h){s[h]="",c()}function p(){Object.keys(s).forEach(h=>{s[h]=""}),c()}return(h,m)=>(T(),R("div",Eln,[u("div",Dln,[u("div",Rln,[b(v(ve),{modelValue:s.search,"onUpdate:modelValue":[m[0]||(m[0]=g=>s.search=g),c],type:"text",placeholder:"Search tests by name, ID, or description...",debounce:300},{prefix:D(()=>[b(v(En),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",Pln,[b(v(Qe),{modelValue:s.category,"onUpdate:modelValue":[m[1]||(m[1]=g=>s.category=g),c],options:i,placeholder:"All Categories"},null,8,["modelValue"])]),u("div",Iln,[b(v(Qe),{modelValue:s.testType,"onUpdate:modelValue":[m[2]||(m[2]=g=>s.testType=g),c],options:a,placeholder:"All Types"},null,8,["modelValue"])]),u("div",Oln,[b(v(Qe),{modelValue:s.logicType,"onUpdate:modelValue":[m[3]||(m[3]=g=>s.logicType=g),c],options:o,placeholder:"All Logic Types"},null,8,["modelValue"])]),u("div",Lln,[b(v(Qe),{modelValue:s.status,"onUpdate:modelValue":[m[4]||(m[4]=g=>s.status=g),c],options:l,placeholder:"All Status"},null,8,["modelValue"])]),u("div",Vln,[d.value?(T(),he(v(J),{key:0,variant:"outline",onClick:p},{prefix:D(()=>[b(v(ht),{class:"h-4 w-4"})]),default:D(()=>[m[12]||(m[12]=W(" Clear ",-1))]),_:1})):se("",!0),b(v(J),{variant:"outline",onClick:m[5]||(m[5]=g=>h.$emit("refresh"))},{prefix:D(()=>[b(v(mn),{class:"h-4 w-4"})]),default:D(()=>[m[13]||(m[13]=W(" Refresh ",-1))]),_:1}),b(v(J),{variant:"solid",onClick:m[6]||(m[6]=g=>h.$emit("create"))},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[m[14]||(m[14]=W(" New Test ",-1))]),_:1})])]),d.value?(T(),R("div",Nln,[m[15]||(m[15]=u("span",{class:"text-xs text-gray-500"},"Active filters:",-1)),s.search?(T(),he(v(De),{key:0,theme:"blue",class:"cursor-pointer",onClick:m[7]||(m[7]=g=>f("search"))},{default:D(()=>[W(' Search: "'+$(s.search)+'" ',1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.category?(T(),he(v(De),{key:1,theme:"purple",class:"cursor-pointer",onClick:m[8]||(m[8]=g=>f("category"))},{default:D(()=>[W(" Category: "+$(s.category)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.testType?(T(),he(v(De),{key:2,theme:"indigo",class:"cursor-pointer",onClick:m[9]||(m[9]=g=>f("testType"))},{default:D(()=>[W(" Type: "+$(s.testType)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.logicType?(T(),he(v(De),{key:3,theme:"orange",class:"cursor-pointer",onClick:m[10]||(m[10]=g=>f("logicType"))},{default:D(()=>[W(" Logic: "+$(s.logicType)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0),s.status?(T(),he(v(De),{key:4,theme:"green",class:"cursor-pointer",onClick:m[11]||(m[11]=g=>f("status"))},{default:D(()=>[W(" Status: "+$(s.status)+" ",1),b(v(ht),{class:"h-3 w-3 ml-1"})]),_:1})):se("",!0)])):se("",!0)]))}},Fln={class:"flex h-[75vh]"},Bln={class:"w-56 border-r bg-gray-50 p-4 flex flex-col"},zln={class:"space-y-1 flex-1"},Uln=["onClick"],Hln={class:"text-sm"},qln={class:"mt-4 pt-4 border-t"},Wln={class:"text-xs text-gray-500 mb-2"},Gln={class:"w-full bg-gray-200 rounded-full h-2"},Yln={class:"flex-1 flex flex-col overflow-hidden"},Kln={class:"flex-1 overflow-y-auto p-6"},Xln={class:"space-y-4"},Qln={class:"grid grid-cols-3 gap-4"},Zln={class:"grid grid-cols-3 gap-4"},Jln={class:"space-y-4"},eun={class:"grid grid-cols-2 gap-4"},tun={class:"mt-6"},nun={class:"flex items-center justify-between mb-3"},run={class:"border rounded-lg overflow-hidden"},sun={class:"min-w-full divide-y divide-gray-200"},iun={class:"bg-white divide-y divide-gray-200"},aun={class:"px-4 py-2"},oun={class:"px-4 py-2"},lun={class:"px-4 py-2 text-center"},uun=["onUpdate:modelValue"],dun={class:"px-4 py-2"},cun={class:"px-4 py-2"},fun={key:0},pun={class:"mt-6"},hun={class:"flex items-center justify-between mb-3"},mun={class:"border rounded-lg overflow-hidden"},gun={class:"min-w-full divide-y divide-gray-200"},vun={class:"bg-white divide-y divide-gray-200"},yun={class:"px-4 py-2"},bun={class:"px-4 py-2"},xun={class:"px-4 py-2"},_un={class:"px-4 py-2 text-center"},wun=["onUpdate:modelValue"],kun={class:"px-4 py-2"},Sun={key:0},Cun={class:"space-y-4"},Aun={class:"grid grid-cols-2 gap-4"},Tun={key:0,class:"mt-4"},$un={class:"block text-sm font-medium text-gray-700 mb-2"},Mun={class:"border rounded-lg overflow-hidden"},Eun={class:"bg-gray-800 px-3 py-2 text-xs text-gray-400 flex items-center justify-between"},Dun={key:1,class:"mt-4"},Run={class:"block text-sm font-medium text-gray-700 mb-2"},Pun={class:"border rounded-lg overflow-hidden"},Iun={class:"bg-gray-800 px-3 py-2 text-xs text-gray-400 flex items-center justify-between"},Oun={class:"flex gap-2"},Lun={class:"mt-6"},Vun={class:"flex items-center justify-between mb-3"},Nun={class:"border rounded-lg overflow-hidden"},jun={class:"min-w-full divide-y divide-gray-200"},Fun={class:"bg-white divide-y divide-gray-200"},Bun={class:"px-4 py-2"},zun={class:"px-4 py-2"},Uun={class:"px-4 py-2"},Hun={class:"px-4 py-2"},qun={class:"px-4 py-2"},Wun={key:0},Gun={class:"space-y-4"},Yun={class:"mt-6"},Kun={class:"flex items-center justify-between mb-3"},Xun={class:"border rounded-lg overflow-hidden"},Qun={class:"min-w-full divide-y divide-gray-200"},Zun={class:"bg-white divide-y divide-gray-200"},Jun={class:"px-4 py-2"},edn={class:"px-4 py-2"},tdn={class:"px-4 py-2"},ndn={class:"px-4 py-2"},rdn={class:"px-4 py-2"},sdn={key:0},idn={class:"space-y-4"},adn={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},odn={class:"flex items-start gap-3"},ldn={class:"mt-4"},udn={class:"flex items-center justify-between mb-3"},ddn={class:"border rounded-lg overflow-hidden"},cdn={class:"min-w-full divide-y divide-gray-200"},fdn={class:"bg-white divide-y divide-gray-200"},pdn={class:"px-4 py-2"},hdn={class:"px-4 py-2"},mdn={class:"px-4 py-2"},gdn={class:"px-4 py-2"},vdn={class:"px-4 py-2"},ydn={class:"px-4 py-2"},bdn={key:0},xdn={class:"space-y-4"},_dn={class:"grid grid-cols-3 gap-4"},wdn={class:"grid grid-cols-2 gap-4"},kdn={class:"mt-6 bg-gray-50 rounded-lg p-4"},Sdn={class:"grid grid-cols-3 gap-4"},Cdn={class:"bg-white rounded-lg p-4 border"},Adn={class:"text-2xl font-bold text-blue-600"},Tdn={class:"bg-white rounded-lg p-4 border"},$dn={class:"text-2xl font-bold text-green-600"},Mdn={class:"bg-white rounded-lg p-4 border"},Edn={class:"text-2xl font-bold text-gray-600"},Ddn={class:"border-t bg-gray-50 px-6 py-4 flex items-center justify-between"},Rdn={class:"flex items-center gap-2"},Pdn={__name:"TestLibraryForm",props:{show:{type:Boolean,default:!1},test:{type:Object,default:null}},emits:["update:show","saved"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.show,set:oe=>r("update:show",oe)}),i=Z(()=>{var oe;return!!((oe=n.test)!=null&&oe.name)}),a=Q(!1),o=Q(0),l=[{id:"basic",title:"Basic Information",icon:YS,description:"Test identification and classification"},{id:"data",title:"Data Source",icon:Kr,description:"Define data requirements and filters"},{id:"logic",title:"Test Logic",icon:o$,description:"Configure SQL query or Python script"},{id:"results",title:"Expected Results",icon:ei,description:"Define expected outcomes and interpretations"},{id:"thresholds",title:"Thresholds",icon:eR,description:"Set warning and critical thresholds"},{id:"status",title:"Status & Usage",icon:gY,description:"Status, versioning, and usage tracking"}],d=Jt({test_id:"",test_name:"",test_category:"",sub_category:"",test_type:"",risk_area:"",description:"",objective:"",data_source:"",data_doctype:"",required_data_fields:[],data_filters:[],test_logic_type:"",sql_query:"",python_script:"",builtin_function:"",test_parameters:[],expected_result:"",interpretation_guide:"",expected_results:[],threshold_settings:[],status:"Active",version:"1.0.0",last_updated:"",created_by:"",reviewed_by:"",usage_count:0,success_rate:0,last_execution:"",notes:""}),c=[{label:"Duplicate Detection",value:"Duplicate Detection"},{label:"Outlier Analysis",value:"Outlier Analysis"},{label:"Trend Analysis",value:"Trend Analysis"},{label:"Ratio Analysis",value:"Ratio Analysis"},{label:"Completeness Check",value:"Completeness Check"},{label:"Validity Check",value:"Validity Check"},{label:"Accuracy Check",value:"Accuracy Check"},{label:"Timeliness Check",value:"Timeliness Check"},{label:"Consistency Check",value:"Consistency Check"},{label:"Custom Analysis",value:"Custom Analysis"}],f=[{label:"Substantive",value:"Substantive"},{label:"Controls",value:"Controls"},{label:"Analytical",value:"Analytical"},{label:"Compliance",value:"Compliance"}],p=[{label:"SQL Query",value:"SQL Query"},{label:"Python Script",value:"Python Script"},{label:"Built-in Function",value:"Built-in Function"}],h=[{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"},{label:"Under Review",value:"Under Review"}],m=[{label:"Data",value:"Data"},{label:"Int",value:"Int"},{label:"Float",value:"Float"},{label:"Currency",value:"Currency"},{label:"Date",value:"Date"},{label:"Datetime",value:"Datetime"},{label:"Link",value:"Link"},{label:"Select",value:"Select"}],g=[{label:"Equals (=)",value:"="},{label:"Not Equals (!=)",value:"!="},{label:"Greater Than (>)",value:">"},{label:"Less Than (<)",value:"<"},{label:"Like",value:"like"},{label:"In",value:"in"},{label:"Between",value:"between"}],y=[{label:"String",value:"String"},{label:"Integer",value:"Integer"},{label:"Float",value:"Float"},{label:"Date",value:"Date"},{label:"Boolean",value:"Boolean"},{label:"List",value:"List"}],x=[{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"},{label:"Warning",value:"Warning"}],_=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],k=[{label:"Greater Than (>)",value:">"},{label:"Greater Than or Equal (>=)",value:">="},{label:"Less Than (<)",value:"<"},{label:"Less Than or Equal (<=)",value:"<="},{label:"Equals (=)",value:"="},{label:"Not Equals (!=)",value:"!="}];et(()=>n.test,oe=>{oe?Object.keys(d).forEach(re=>{oe[re]!==void 0&&(d[re]=oe[re])}):ie()},{immediate:!0});const w=Z(()=>[!!(d.test_name&&d.test_category),!0,!!d.test_logic_type,!0,!0,!!d.status]),S=Z(()=>w.value.filter(Boolean).length),C=Z(()=>Math.round(S.value/l.length*100));function A(oe){return w.value[oe]}function M(oe){return o.value===oe?"text-blue-600":A(oe)?"text-green-500":"text-gray-400"}function E(oe){o.value=oe}function P(){o.value<l.length-1&&o.value++}function I(){o.value>0&&o.value--}function F(){d.required_data_fields.push({field_name:"",field_type:"Data",is_required:!0,description:""})}function L(oe){d.required_data_fields.splice(oe,1)}function z(){d.data_filters.push({filter_field:"",operator:"=",default_value:"",is_dynamic:!1})}function N(oe){d.data_filters.splice(oe,1)}function q(){d.test_parameters.push({parameter_name:"",parameter_type:"String",default_value:"",description:""})}function V(oe){d.test_parameters.splice(oe,1)}function O(){d.expected_results.push({condition:"",result_status:"Pass",severity:"Low",action_required:""})}function X(oe){d.expected_results.splice(oe,1)}function j(){d.threshold_settings.push({metric_name:"",operator:">",warning_threshold:null,critical_threshold:null,description:""})}function U(oe){d.threshold_settings.splice(oe,1)}function G(){d.sql_query&&(d.sql_query=d.sql_query.replace(/\bSELECT\b/gi,`
SELECT`).replace(/\bFROM\b/gi,`
FROM`).replace(/\bWHERE\b/gi,`
WHERE`).replace(/\bAND\b/gi,`
  AND`).replace(/\bOR\b/gi,`
  OR`).replace(/\bGROUP BY\b/gi,`
GROUP BY`).replace(/\bORDER BY\b/gi,`
ORDER BY`).replace(/\bHAVING\b/gi,`
HAVING`).replace(/\bLEFT JOIN\b/gi,`
LEFT JOIN`).replace(/\bRIGHT JOIN\b/gi,`
RIGHT JOIN`).replace(/\bINNER JOIN\b/gi,`
INNER JOIN`).trim())}function ee(){d.python_script=`def execute(data, params):
    '''
    Execute the audit test logic.
    
    Args:
        data: List of records from data source
        params: Test parameters dictionary
        
    Returns:
        dict: {
            'status': 'Pass' | 'Fail' | 'Warning',
            'exceptions': list of exception records,
            'summary': summary statistics dict
        }
    '''
    exceptions = []
    summary = {
        'total_records': len(data),
        'exceptions_found': 0,
        'pass_rate': 100.0
    }
    
    for record in data:
        # Add your test logic here
        # Example: Check for specific conditions
        if some_condition(record):
            exceptions.append({
                'record': record,
                'reason': 'Description of exception'
            })
    
    summary['exceptions_found'] = len(exceptions)
    summary['pass_rate'] = round((1 - len(exceptions) / len(data)) * 100, 2) if data else 100
    
    return {
        'status': 'Pass' if not exceptions else 'Fail',
        'exceptions': exceptions,
        'summary': summary
    }

def some_condition(record):
    '''Helper function to check condition'''
    # Implement your condition logic
    return False
`}function ie(){Object.keys(d).forEach(oe=>{Array.isArray(d[oe])?d[oe]=[]:typeof d[oe]=="number"?d[oe]=0:d[oe]=""}),d.status="Active",d.version="1.0.0",o.value=0}function ne(){r("update:show",!1),ie()}function ce(){return ue(this,null,function*(){a.value=!0;try{console.log("Saving test:",d),r("saved",ge({},d)),ne()}catch(oe){console.error("Error saving test:",oe)}finally{a.value=!1}})}return(oe,re)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":re[22]||(re[22]=te=>s.value=te),options:{title:i.value?"Edit Test":"Create Audit Test",size:"7xl"}},{"body-content":D(()=>{var te,K,le,H,Y,B,ae,be;return[u("div",Fln,[u("div",Bln,[u("div",zln,[(T(),R(xe,null,_e(l,(fe,me)=>u("button",{key:fe.id,onClick:ye=>E(me),class:pe(["w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors",o.value===me?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"])},[(T(),he(At(fe.icon),{class:pe(["h-4 w-4",M(me)])},null,8,["class"])),u("span",Hln,$(fe.title),1),A(me)?(T(),he(v(ro),{key:0,class:"h-4 w-4 ml-auto text-green-500"})):se("",!0)],10,Uln)),64))]),u("div",qln,[u("div",Wln," Progress: "+$(S.value)+"/"+$(l.length)+" sections ",1),u("div",Gln,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:rt({width:`${C.value}%`})},null,4)])])]),u("div",Yln,[b(Vt,{icon:(te=l[o.value])==null?void 0:te.icon,title:(K=l[o.value])==null?void 0:K.title,description:(le=l[o.value])==null?void 0:le.description},null,8,["icon","title","description"]),u("div",Kln,[we(u("div",Xln,[u("div",Qln,[b(v(ve),{modelValue:d.test_id,"onUpdate:modelValue":re[0]||(re[0]=fe=>d.test_id=fe),label:"Test ID",type:"text",placeholder:"Auto-generated",disabled:""},null,8,["modelValue"]),b(v(ve),{modelValue:d.test_name,"onUpdate:modelValue":re[1]||(re[1]=fe=>d.test_name=fe),label:"Test Name *",type:"text",placeholder:"Enter test name"},null,8,["modelValue"]),u("div",null,[re[23]||(re[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Test Category *",-1)),b(v(Qe),{modelValue:d.test_category,"onUpdate:modelValue":re[2]||(re[2]=fe=>d.test_category=fe),options:c,placeholder:"Select category"},null,8,["modelValue"])])]),u("div",Zln,[b(v(ve),{modelValue:d.sub_category,"onUpdate:modelValue":re[3]||(re[3]=fe=>d.sub_category=fe),label:"Sub Category",type:"text",placeholder:"Enter sub-category"},null,8,["modelValue"]),u("div",null,[re[24]||(re[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Risk Area",-1)),b(Mt,{modelValue:d.risk_area,"onUpdate:modelValue":re[4]||(re[4]=fe=>d.risk_area=fe),doctype:"Risk Type",placeholder:"Select risk area"},null,8,["modelValue"])]),u("div",null,[re[25]||(re[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Type",-1)),b(v(Qe),{modelValue:d.test_type,"onUpdate:modelValue":re[5]||(re[5]=fe=>d.test_type=fe),options:f,placeholder:"Select type"},null,8,["modelValue"])])]),u("div",null,[re[26]||(re[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),b(v(an),{modelValue:d.description,"onUpdate:modelValue":re[6]||(re[6]=fe=>d.description=fe),content:d.description,placeholder:"Describe the test...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[re[27]||(re[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Objective",-1)),b(v(an),{modelValue:d.objective,"onUpdate:modelValue":re[7]||(re[7]=fe=>d.objective=fe),content:d.objective,placeholder:"What is the objective of this test?","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[lt,o.value===0]]),we(u("div",Jln,[u("div",eun,[u("div",null,[re[28]||(re[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Data Source",-1)),b(Mt,{modelValue:d.data_source,"onUpdate:modelValue":re[8]||(re[8]=fe=>d.data_source=fe),doctype:"BC Data Source",placeholder:"Select data source"},null,8,["modelValue"])]),u("div",null,[re[29]||(re[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Data DocType",-1)),b(Mt,{modelValue:d.data_doctype,"onUpdate:modelValue":re[9]||(re[9]=fe=>d.data_doctype=fe),doctype:"DocType",placeholder:"Select DocType"},null,8,["modelValue"])])]),u("div",tun,[u("div",nun,[re[31]||(re[31]=u("h4",{class:"text-sm font-medium text-gray-700"},"Required Data Fields",-1)),b(v(J),{size:"sm",onClick:F},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[re[30]||(re[30]=W(" Add Field ",-1))]),_:1})]),u("div",run,[u("table",sun,[re[33]||(re[33]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Field Name"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Field Type"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Required"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",iun,[(T(!0),R(xe,null,_e(d.required_data_fields,(fe,me)=>(T(),R("tr",{key:me},[u("td",aun,[b(v(ve),{modelValue:fe.field_name,"onUpdate:modelValue":ye=>fe.field_name=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",oun,[b(v(Qe),{modelValue:fe.field_type,"onUpdate:modelValue":ye=>fe.field_type=ye,options:m,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",lun,[we(u("input",{type:"checkbox","onUpdate:modelValue":ye=>fe.is_required=ye,class:"rounded border-gray-300"},null,8,uun),[[Rn,fe.is_required]])]),u("td",dun,[b(v(ve),{modelValue:fe.description,"onUpdate:modelValue":ye=>fe.description=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",cun,[b(v(J),{variant:"ghost",size:"sm",onClick:ye=>L(me)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(H=d.required_data_fields)!=null&&H.length?se("",!0):(T(),R("tr",fun,[...re[32]||(re[32]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No required fields defined. Click "Add Field" to add one. ',-1)])]))])])])]),u("div",pun,[u("div",hun,[re[35]||(re[35]=u("h4",{class:"text-sm font-medium text-gray-700"},"Data Filters",-1)),b(v(J),{size:"sm",onClick:z},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[re[34]||(re[34]=W(" Add Filter ",-1))]),_:1})]),u("div",mun,[u("table",gun,[re[37]||(re[37]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Filter Field"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Operator"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Default Value"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Dynamic"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",vun,[(T(!0),R(xe,null,_e(d.data_filters,(fe,me)=>(T(),R("tr",{key:me},[u("td",yun,[b(v(ve),{modelValue:fe.filter_field,"onUpdate:modelValue":ye=>fe.filter_field=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",bun,[b(v(Qe),{modelValue:fe.operator,"onUpdate:modelValue":ye=>fe.operator=ye,options:g,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",xun,[b(v(ve),{modelValue:fe.default_value,"onUpdate:modelValue":ye=>fe.default_value=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",_un,[we(u("input",{type:"checkbox","onUpdate:modelValue":ye=>fe.is_dynamic=ye,class:"rounded border-gray-300"},null,8,wun),[[Rn,fe.is_dynamic]])]),u("td",kun,[b(v(J),{variant:"ghost",size:"sm",onClick:ye=>N(me)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(Y=d.data_filters)!=null&&Y.length?se("",!0):(T(),R("tr",Sun,[...re[36]||(re[36]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No filters defined. Click "Add Filter" to add one. ',-1)])]))])])])])],512),[[lt,o.value===1]]),we(u("div",Cun,[u("div",Aun,[u("div",null,[re[38]||(re[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Test Logic Type *",-1)),b(v(Qe),{modelValue:d.test_logic_type,"onUpdate:modelValue":re[10]||(re[10]=fe=>d.test_logic_type=fe),options:p,placeholder:"Select logic type"},null,8,["modelValue"])]),u("div",null,[re[39]||(re[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Built-in Function",-1)),b(Mt,{modelValue:d.builtin_function,"onUpdate:modelValue":re[11]||(re[11]=fe=>d.builtin_function=fe),doctype:"Built In Function",placeholder:"Select function",disabled:d.test_logic_type!=="Built-in Function"},null,8,["modelValue","disabled"])])]),d.test_logic_type==="SQL Query"?(T(),R("div",Tun,[u("label",$un,[b(v(Kr),{class:"h-4 w-4 inline mr-1"}),re[40]||(re[40]=W(" SQL Query ",-1))]),u("div",Mun,[u("div",Eun,[re[42]||(re[42]=u("span",null,"SQL",-1)),b(v(J),{variant:"ghost",size:"sm",class:"text-gray-400 hover:text-white",onClick:G},{default:D(()=>[...re[41]||(re[41]=[W(" Format ",-1)])]),_:1})]),we(u("textarea",{"onUpdate:modelValue":re[12]||(re[12]=fe=>d.sql_query=fe),class:"w-full h-64 p-4 font-mono text-sm bg-gray-900 text-green-400 focus:outline-none resize-none",placeholder:`-- Enter your SQL query here
SELECT 
    field1,
    field2,
    COUNT(*) as count
FROM \`tabDocType\`
WHERE condition = 'value'
GROUP BY field1, field2
HAVING COUNT(*) > 1;`},null,512),[[Rt,d.sql_query]])])])):se("",!0),d.test_logic_type==="Python Script"?(T(),R("div",Dun,[u("label",Run,[b(v(o$),{class:"h-4 w-4 inline mr-1"}),re[43]||(re[43]=W(" Python Script ",-1))]),u("div",Pun,[u("div",Iun,[re[45]||(re[45]=u("span",null,"Python",-1)),u("div",Oun,[b(v(J),{variant:"ghost",size:"sm",class:"text-gray-400 hover:text-white",onClick:ee},{default:D(()=>[...re[44]||(re[44]=[W(" Insert Template ",-1)])]),_:1})])]),we(u("textarea",{"onUpdate:modelValue":re[13]||(re[13]=fe=>d.python_script=fe),class:"w-full h-64 p-4 font-mono text-sm bg-gray-900 text-yellow-300 focus:outline-none resize-none",placeholder:`# Enter your Python script here
def execute(data, params):
    '''
    Args:
        data: List of records from data source
        params: Test parameters dictionary
    Returns:
        dict: {
            'status': 'Pass'/'Fail'/'Warning',
            'exceptions': list,
            'summary': dict
        }
    '''
    exceptions = []
    
    for record in data:
        # Your test logic here
        pass
    
    return {
        'status': 'Pass' if not exceptions else 'Fail',
        'exceptions': exceptions,
        'summary': {'total': len(data), 'exceptions': len(exceptions)}
    }`},null,512),[[Rt,d.python_script]])])])):se("",!0),u("div",Lun,[u("div",Vun,[re[47]||(re[47]=u("h4",{class:"text-sm font-medium text-gray-700"},"Test Parameters",-1)),b(v(J),{size:"sm",onClick:q},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[re[46]||(re[46]=W(" Add Parameter ",-1))]),_:1})]),u("div",Nun,[u("table",jun,[re[49]||(re[49]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Parameter Name"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Type"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Default Value"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",Fun,[(T(!0),R(xe,null,_e(d.test_parameters,(fe,me)=>(T(),R("tr",{key:me},[u("td",Bun,[b(v(ve),{modelValue:fe.parameter_name,"onUpdate:modelValue":ye=>fe.parameter_name=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",zun,[b(v(Qe),{modelValue:fe.parameter_type,"onUpdate:modelValue":ye=>fe.parameter_type=ye,options:y,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Uun,[b(v(ve),{modelValue:fe.default_value,"onUpdate:modelValue":ye=>fe.default_value=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Hun,[b(v(ve),{modelValue:fe.description,"onUpdate:modelValue":ye=>fe.description=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",qun,[b(v(J),{variant:"ghost",size:"sm",onClick:ye=>V(me)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(B=d.test_parameters)!=null&&B.length?se("",!0):(T(),R("tr",Wun,[...re[48]||(re[48]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No parameters defined. Click "Add Parameter" to add one. ',-1)])]))])])])])],512),[[lt,o.value===2]]),we(u("div",Gun,[u("div",null,[re[50]||(re[50]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Expected Result Description",-1)),b(v(an),{modelValue:d.expected_result,"onUpdate:modelValue":re[14]||(re[14]=fe=>d.expected_result=fe),content:d.expected_result,placeholder:"Describe the expected results...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",null,[re[51]||(re[51]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Interpretation Guidelines",-1)),b(v(an),{modelValue:d.interpretation_guide,"onUpdate:modelValue":re[15]||(re[15]=fe=>d.interpretation_guide=fe),content:d.interpretation_guide,placeholder:"How should results be interpreted?","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])]),u("div",Yun,[u("div",Kun,[re[53]||(re[53]=u("h4",{class:"text-sm font-medium text-gray-700"},"Expected Result Conditions",-1)),b(v(J),{size:"sm",onClick:O},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[re[52]||(re[52]=W(" Add Condition ",-1))]),_:1})]),u("div",Xun,[u("table",Qun,[re[55]||(re[55]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Condition"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Result Status"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Severity"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Action Required"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",Zun,[(T(!0),R(xe,null,_e(d.expected_results,(fe,me)=>(T(),R("tr",{key:me},[u("td",Jun,[b(v(ve),{modelValue:fe.condition,"onUpdate:modelValue":ye=>fe.condition=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",edn,[b(v(Qe),{modelValue:fe.result_status,"onUpdate:modelValue":ye=>fe.result_status=ye,options:x,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",tdn,[b(v(Qe),{modelValue:fe.severity,"onUpdate:modelValue":ye=>fe.severity=ye,options:_,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",ndn,[b(v(ve),{modelValue:fe.action_required,"onUpdate:modelValue":ye=>fe.action_required=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",rdn,[b(v(J),{variant:"ghost",size:"sm",onClick:ye=>X(me)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(ae=d.expected_results)!=null&&ae.length?se("",!0):(T(),R("tr",sdn,[...re[54]||(re[54]=[u("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No conditions defined. Click "Add Condition" to add one. ',-1)])]))])])])])],512),[[lt,o.value===3]]),we(u("div",idn,[u("div",adn,[u("div",odn,[b(v(qr),{class:"h-5 w-5 text-blue-600 mt-0.5"}),re[56]||(re[56]=u("div",{class:"text-sm text-blue-700"},[u("p",{class:"font-medium"},"Configure Thresholds"),u("p",null,"Define thresholds to automatically classify test results as Pass, Warning, or Fail based on metrics.")],-1))])]),u("div",ldn,[u("div",udn,[re[58]||(re[58]=u("h4",{class:"text-sm font-medium text-gray-700"},"Threshold Configurations",-1)),b(v(J),{size:"sm",onClick:j},{prefix:D(()=>[b(v(nt),{class:"h-4 w-4"})]),default:D(()=>[re[57]||(re[57]=W(" Add Threshold ",-1))]),_:1})]),u("div",ddn,[u("table",cdn,[re[60]||(re[60]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Metric"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Operator"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Warning"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Critical"),u("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500"},"Description"),u("th",{class:"px-4 py-2 w-16"})])],-1)),u("tbody",fdn,[(T(!0),R(xe,null,_e(d.threshold_settings,(fe,me)=>(T(),R("tr",{key:me},[u("td",pdn,[b(v(ve),{modelValue:fe.metric_name,"onUpdate:modelValue":ye=>fe.metric_name=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",hdn,[b(v(Qe),{modelValue:fe.operator,"onUpdate:modelValue":ye=>fe.operator=ye,options:k,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",mdn,[b(v(ve),{modelValue:fe.warning_threshold,"onUpdate:modelValue":ye=>fe.warning_threshold=ye,type:"number",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",gdn,[b(v(ve),{modelValue:fe.critical_threshold,"onUpdate:modelValue":ye=>fe.critical_threshold=ye,type:"number",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",vdn,[b(v(ve),{modelValue:fe.description,"onUpdate:modelValue":ye=>fe.description=ye,type:"text",size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",ydn,[b(v(J),{variant:"ghost",size:"sm",onClick:ye=>U(me)},{default:D(()=>[b(v(is),{class:"h-4 w-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),(be=d.threshold_settings)!=null&&be.length?se("",!0):(T(),R("tr",bdn,[...re[59]||(re[59]=[u("td",{colspan:"6",class:"px-4 py-8 text-center text-gray-500 text-sm"},' No thresholds defined. Click "Add Threshold" to add one. ',-1)])]))])])])])],512),[[lt,o.value===4]]),we(u("div",xdn,[u("div",_dn,[u("div",null,[re[61]||(re[61]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status *",-1)),b(v(Qe),{modelValue:d.status,"onUpdate:modelValue":re[16]||(re[16]=fe=>d.status=fe),options:h,placeholder:"Select status"},null,8,["modelValue"])]),b(v(ve),{modelValue:d.version,"onUpdate:modelValue":re[17]||(re[17]=fe=>d.version=fe),label:"Version",type:"text",placeholder:"e.g., 1.0.0"},null,8,["modelValue"]),b(v(ve),{modelValue:d.last_updated,"onUpdate:modelValue":re[18]||(re[18]=fe=>d.last_updated=fe),label:"Last Updated",type:"date",disabled:""},null,8,["modelValue"])]),u("div",wdn,[u("div",null,[re[62]||(re[62]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Created By",-1)),b(Mt,{modelValue:d.created_by,"onUpdate:modelValue":re[19]||(re[19]=fe=>d.created_by=fe),doctype:"User",placeholder:"Select user",disabled:""},null,8,["modelValue"])]),u("div",null,[re[63]||(re[63]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reviewed By",-1)),b(Mt,{modelValue:d.reviewed_by,"onUpdate:modelValue":re[20]||(re[20]=fe=>d.reviewed_by=fe),doctype:"User",placeholder:"Select reviewer"},null,8,["modelValue"])])]),u("div",kdn,[re[67]||(re[67]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Usage Statistics",-1)),u("div",Sdn,[u("div",Cdn,[u("div",Adn,$(d.usage_count||0),1),re[64]||(re[64]=u("div",{class:"text-sm text-gray-500"},"Total Executions",-1))]),u("div",Tdn,[u("div",$dn,$(d.success_rate||0)+"%",1),re[65]||(re[65]=u("div",{class:"text-sm text-gray-500"},"Success Rate",-1))]),u("div",Mdn,[u("div",Edn,$(d.last_execution||"Never"),1),re[66]||(re[66]=u("div",{class:"text-sm text-gray-500"},"Last Execution",-1))])])]),u("div",null,[re[68]||(re[68]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),b(v(an),{modelValue:d.notes,"onUpdate:modelValue":re[21]||(re[21]=fe=>d.notes=fe),content:d.notes,placeholder:"Additional notes...","editor-class":"prose-sm max-w-none min-h-[100px]",bubbleMenu:!0},null,8,["modelValue","content"])])],512),[[lt,o.value===5]])]),u("div",Ddn,[b(v(J),{variant:"outline",onClick:I,disabled:o.value===0},{prefix:D(()=>[b(v(gr),{class:"h-4 w-4"})]),default:D(()=>[re[69]||(re[69]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("div",Rdn,[b(v(J),{variant:"outline",onClick:ne},{default:D(()=>[...re[70]||(re[70]=[W("Cancel",-1)])]),_:1}),o.value<l.length-1?(T(),he(v(J),{key:0,variant:"solid",onClick:P},{suffix:D(()=>[b(v(sr),{class:"h-4 w-4"})]),default:D(()=>[re[71]||(re[71]=W(" Next ",-1))]),_:1})):(T(),he(v(J),{key:1,variant:"solid",theme:"green",onClick:ce,loading:a.value},{prefix:D(()=>[b(v($r),{class:"h-4 w-4"})]),default:D(()=>[W(" "+$(i.value?"Update Test":"Create Test"),1)]),_:1},8,["loading"]))])])])])]}),_:1},8,["modelValue","options"]))}},Idn={class:"space-y-4"},Odn={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},Ldn=["onClick"],Vdn={class:"flex items-center gap-3"},Ndn={class:"text-2xl font-bold text-gray-900"},jdn={class:"text-xs text-gray-500"},Fdn={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Bdn={class:"bg-white rounded-xl border p-4"},zdn={class:"space-y-3"},Udn={class:"w-32 text-sm text-gray-600 truncate"},Hdn={class:"flex-1 bg-gray-100 rounded-full h-4 overflow-hidden"},qdn={class:"w-16 text-right text-sm font-medium text-gray-700"},Wdn={class:"text-gray-400 text-xs"},Gdn={class:"bg-white rounded-xl border p-4"},Ydn={class:"grid grid-cols-2 gap-4"},Kdn=["onClick"],Xdn={class:"text-sm text-gray-600"},Qdn={class:"text-xs text-gray-400 mt-1"},Zdn={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Jdn={class:"bg-white rounded-xl border p-4"},ecn={class:"flex items-center justify-center"},tcn={class:"relative h-32 w-32"},ncn={class:"transform -rotate-90",viewBox:"0 0 36 36"},rcn=["stroke","stroke-dasharray"],scn={class:"absolute inset-0 flex items-center justify-center"},icn={class:"text-center"},acn={class:"text-2xl font-bold text-gray-900"},ocn={class:"bg-white rounded-xl border p-4"},lcn={class:"space-y-3"},ucn=["onClick"],dcn={class:"flex items-center gap-2"},ccn={class:"text-sm text-gray-700"},fcn={class:"bg-white rounded-xl border p-4"},pcn={class:"space-y-4"},hcn={class:"flex items-center justify-between"},mcn={class:"text-lg font-semibold text-gray-900"},gcn={class:"flex items-center justify-between"},vcn={class:"text-sm font-medium text-blue-600 truncate max-w-[150px]"},ycn={class:"flex items-center justify-between"},bcn={class:"text-lg font-semibold text-gray-900"},xcn={class:"flex items-center justify-between"},_cn={__name:"TestStats",props:{tests:{type:Array,default:()=>[]},activeFilter:{type:String,default:""}},emits:["filter"],setup(t){const e=t,n=Z(()=>{const h=e.tests,m=h.length,g=h.filter(w=>w.status==="Active").length,y=h.filter(w=>w.status==="Inactive").length,x=h.filter(w=>w.status==="Under Review").length,_=h.filter(w=>w.test_type==="Substantive").length,k=h.filter(w=>w.test_type==="Controls").length;return[{label:"Total Tests",value:m,icon:bfe,bgColor:"bg-blue-100",iconColor:"text-blue-600",filterKey:null,filterValue:null},{label:"Active",value:g,icon:Kt,bgColor:"bg-green-100",iconColor:"text-green-600",filterKey:"status",filterValue:"Active",active:e.activeFilter==="Active"},{label:"Inactive",value:y,icon:Uc,bgColor:"bg-gray-100",iconColor:"text-gray-600",filterKey:"status",filterValue:"Inactive",active:e.activeFilter==="Inactive"},{label:"Under Review",value:x,icon:rn,bgColor:"bg-orange-100",iconColor:"text-orange-600",filterKey:"status",filterValue:"Under Review",active:e.activeFilter==="Under Review"},{label:"Substantive",value:_,icon:ei,bgColor:"bg-purple-100",iconColor:"text-purple-600",filterKey:"test_type",filterValue:"Substantive",active:e.activeFilter==="Substantive"},{label:"Controls",value:k,icon:Ju,bgColor:"bg-indigo-100",iconColor:"text-indigo-600",filterKey:"test_type",filterValue:"Controls",active:e.activeFilter==="Controls"}]}),r=Z(()=>{const h=e.tests,m={};h.forEach(x=>{const _=x.test_category||"Uncategorized";m[_]=(m[_]||0)+1});const g=h.length||1,y=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-red-500","bg-yellow-500","bg-cyan-500"];return Object.entries(m).map(([x,_],k)=>({name:x,count:_,percentage:Math.round(_/g*100),color:y[k%y.length]})).sort((x,_)=>_.count-x.count).slice(0,6)}),s=Z(()=>{const h=e.tests,m=h.length||1;return[{name:"Substantive",count:h.filter(g=>g.test_type==="Substantive").length,icon:ei,bgColor:"bg-purple-50 border-purple-200",iconColor:"text-purple-600",textColor:"text-purple-700",percentage:Math.round(h.filter(g=>g.test_type==="Substantive").length/m*100)},{name:"Controls",count:h.filter(g=>g.test_type==="Controls").length,icon:Ju,bgColor:"bg-indigo-50 border-indigo-200",iconColor:"text-indigo-600",textColor:"text-indigo-700",percentage:Math.round(h.filter(g=>g.test_type==="Controls").length/m*100)},{name:"Analytical",count:h.filter(g=>g.test_type==="Analytical").length,icon:hr,bgColor:"bg-blue-50 border-blue-200",iconColor:"text-blue-600",textColor:"text-blue-700",percentage:Math.round(h.filter(g=>g.test_type==="Analytical").length/m*100)},{name:"Compliance",count:h.filter(g=>g.test_type==="Compliance").length,icon:Hc,bgColor:"bg-green-50 border-green-200",iconColor:"text-green-600",textColor:"text-green-700",percentage:Math.round(h.filter(g=>g.test_type==="Compliance").length/m*100)}]}),i=Z(()=>{const h=e.tests;return[{name:"SQL Query",count:h.filter(m=>m.test_logic_type==="SQL Query").length,icon:Kr,iconColor:"text-blue-600",theme:"blue"},{name:"Python Script",count:h.filter(m=>m.test_logic_type==="Python Script").length,icon:o$,iconColor:"text-yellow-600",theme:"orange"},{name:"Built-in Function",count:h.filter(m=>m.test_logic_type==="Built-in Function").length,icon:xY,iconColor:"text-gray-600",theme:"gray"}]}),a=Z(()=>{const h=e.tests.filter(g=>g.success_rate!==void 0&&g.success_rate!==null);if(!h.length)return 0;const m=h.reduce((g,y)=>g+(y.success_rate||0),0);return Math.round(m/h.length)}),o=Z(()=>{const h=a.value;return h>=80?"#22C55E":h>=60?"#F59E0B":"#EF4444"}),l=Z(()=>e.tests.reduce((h,m)=>h+(m.usage_count||0),0)),d=Z(()=>{var m;return e.tests.length&&((m=[...e.tests].sort((g,y)=>(y.usage_count||0)-(g.usage_count||0))[0])==null?void 0:m.test_name)||"N/A"}),c=Z(()=>e.tests.length?Math.round(l.value/e.tests.length):0),f=Z(()=>e.tests.filter(h=>h.status==="Under Review").length);function p(h){return h>=1e6?`${(h/1e6).toFixed(1)}M`:h>=1e3?`${(h/1e3).toFixed(1)}K`:h.toString()}return(h,m)=>(T(),R("div",Idn,[u("div",Odn,[(T(!0),R(xe,null,_e(n.value,g=>(T(),R("div",{key:g.label,class:pe(["bg-white rounded-xl border p-4 hover:shadow-md transition-shadow cursor-pointer",g.active?"ring-2 ring-blue-500":""]),onClick:y=>h.$emit("filter",g.filterKey,g.filterValue)},[u("div",Vdn,[u("div",{class:pe(["p-2 rounded-lg",g.bgColor])},[(T(),he(At(g.icon),{class:pe(["h-5 w-5",g.iconColor])},null,8,["class"]))],2),u("div",null,[u("div",Ndn,$(g.value),1),u("div",jdn,$(g.label),1)])])],10,Ldn))),128))]),u("div",Fdn,[u("div",Bdn,[m[0]||(m[0]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Tests by Category",-1)),u("div",zdn,[(T(!0),R(xe,null,_e(r.value,g=>(T(),R("div",{key:g.name,class:"flex items-center gap-3"},[u("div",Udn,$(g.name),1),u("div",Hdn,[u("div",{class:pe(["h-full rounded-full transition-all",g.color]),style:rt({width:`${g.percentage}%`})},null,6)]),u("div",qdn,[W($(g.count)+" ",1),u("span",Wdn,"("+$(g.percentage)+"%)",1)])]))),128))])]),u("div",Gdn,[m[1]||(m[1]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Tests by Type",-1)),u("div",Ydn,[(T(!0),R(xe,null,_e(s.value,g=>(T(),R("div",{key:g.name,class:pe(["p-4 rounded-lg border text-center hover:shadow-sm transition-shadow cursor-pointer",g.bgColor]),onClick:y=>h.$emit("filter","test_type",g.name)},[(T(),he(At(g.icon),{class:pe(["h-8 w-8 mx-auto mb-2",g.iconColor])},null,8,["class"])),u("div",{class:pe(["text-2xl font-bold",g.textColor])},$(g.count),3),u("div",Xdn,$(g.name),1),u("div",Qdn,$(g.percentage)+"% of total",1)],10,Kdn))),128))])])]),u("div",Zdn,[u("div",Jdn,[m[4]||(m[4]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Average Success Rate",-1)),u("div",ecn,[u("div",tcn,[(T(),R("svg",ncn,[m[2]||(m[2]=u("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#E5E7EB","stroke-width":"3"},null,-1)),u("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:o.value,"stroke-width":"3","stroke-dasharray":`${a.value}, 100`,"stroke-linecap":"round"},null,8,rcn)])),u("div",scn,[u("div",icn,[u("div",acn,$(a.value)+"%",1),m[3]||(m[3]=u("div",{class:"text-xs text-gray-500"},"Success",-1))])])])])]),u("div",ocn,[m[5]||(m[5]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Test Logic Types",-1)),u("div",lcn,[(T(!0),R(xe,null,_e(i.value,g=>(T(),R("div",{key:g.name,class:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:y=>h.$emit("filter","test_logic_type",g.name)},[u("div",dcn,[(T(),he(At(g.icon),{class:pe(["h-5 w-5",g.iconColor])},null,8,["class"])),u("span",ccn,$(g.name),1)]),b(v(De),{theme:g.theme},{default:D(()=>[W($(g.count),1)]),_:2},1032,["theme"])],8,ucn))),128))])]),u("div",fcn,[m[10]||(m[10]=u("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Usage Statistics",-1)),u("div",pcn,[u("div",hcn,[m[6]||(m[6]=u("span",{class:"text-sm text-gray-600"},"Total Executions",-1)),u("span",mcn,$(p(l.value)),1)]),u("div",gcn,[m[7]||(m[7]=u("span",{class:"text-sm text-gray-600"},"Most Used Test",-1)),u("span",vcn,$(d.value),1)]),u("div",ycn,[m[8]||(m[8]=u("span",{class:"text-sm text-gray-600"},"Avg. Executions/Test",-1)),u("span",bcn,$(c.value),1)]),u("div",xcn,[m[9]||(m[9]=u("span",{class:"text-sm text-gray-600"},"Under Review",-1)),b(v(De),{theme:"orange"},{default:D(()=>[W($(f.value),1)]),_:1})])])])])]))}},wcn=Yl("testLibrary",()=>{const t=Q([]),e=Q(!1),n=Q(!1),r=Q(""),s=Q(""),i=Q(""),a=Q(""),o=Ve({url:"mkaguzi.api.test_library.get_tests",params:()=>({filters:{category:s.value,test_type:i.value,status:a.value},search:r.value}),auto:!1,onSuccess(S){t.value=S||[]}}),l=Z(()=>{let S=[...t.value];if(r.value){const C=r.value.toLowerCase();S=S.filter(A=>{var M,E,P,I;return((M=A.test_name)==null?void 0:M.toLowerCase().includes(C))||((E=A.description)==null?void 0:E.toLowerCase().includes(C))||((P=A.objective)==null?void 0:P.toLowerCase().includes(C))||((I=A.test_category)==null?void 0:I.toLowerCase().includes(C))})}return s.value&&(S=S.filter(C=>C.test_category===s.value)),i.value&&(S=S.filter(C=>C.test_logic_type===i.value)),a.value&&(S=S.filter(C=>C.status===a.value)),S}),d=Z(()=>{const S={};return l.value.forEach(C=>{const A=C.test_category||"Uncategorized";S[A]||(S[A]=[]),S[A].push(C)}),Object.keys(S).map(C=>({name:C,tests:S[C]})).sort((C,A)=>C.name.localeCompare(A.name))}),c=Z(()=>{const S={total:t.value.length,active:0,substantive:0,controls:0,analytical:0};return t.value.forEach(C=>{C.status==="Active"&&S.active++;const A=C.test_logic_type;A==="SQL Query"?S.substantive++:A==="Python Script"?S.controls++:A==="Built-in Function"&&S.analytical++}),S}),f=()=>ue(void 0,null,function*(){e.value=!0;try{yield o.reload()}catch(S){console.error("Error fetching tests:",S)}finally{e.value=!1}});return{tests:t,loading:e,saving:n,searchQuery:r,selectedCategory:s,selectedTestType:i,selectedStatus:a,filteredTests:l,groupedTests:d,stats:c,fetchTests:f,createTest:S=>ue(void 0,null,function*(){n.value=!0;try{const C=yield Ve({url:"mkaguzi.api.test_library.create_test",method:"POST",params:S}).submit();return yield f(),C}catch(C){throw console.error("Error creating test:",C),C}finally{n.value=!1}}),updateTest:(S,C)=>ue(void 0,null,function*(){n.value=!0;try{const A=yield Ve({url:"mkaguzi.api.test_library.update_test",method:"PUT",params:ge({name:S},C)}).submit();return yield f(),A}catch(A){throw console.error("Error updating test:",A),A}finally{n.value=!1}}),deleteTest:S=>ue(void 0,null,function*(){try{yield Ve({url:"mkaguzi.api.test_library.delete_test",method:"DELETE",params:{name:S}}).submit(),yield f()}catch(C){throw console.error("Error deleting test:",C),C}}),executeTest:(A,...M)=>ue(void 0,[A,...M],function*(S,C={}){try{return yield Ve({url:"mkaguzi.api.test_library.execute_test",method:"POST",params:{test_name:S,parameters:C}}).submit()}catch(E){throw console.error("Error executing test:",E),E}}),getTestDetails:S=>ue(void 0,null,function*(){try{return yield Ve({url:"mkaguzi.api.test_library.get_test_details",params:{name:S}}).submit()}catch(C){throw console.error("Error fetching test details:",C),C}}),getTestHistory:S=>ue(void 0,null,function*(){try{return yield Ve({url:"mkaguzi.api.test_library.get_test_history",params:{test_name:S}}).submit()}catch(C){throw console.error("Error fetching test history:",C),C}}),importTests:S=>ue(void 0,null,function*(){try{const C=new FormData;C.append("file",S);const A=yield Ve({url:"mkaguzi.api.test_library.import_tests",method:"POST",params:C}).submit();return yield f(),A}catch(C){throw console.error("Error importing tests:",C),C}}),exportTests:(...C)=>ue(void 0,[...C],function*(S={}){try{return yield Ve({url:"mkaguzi.api.test_library.export_tests",params:S}).submit()}catch(A){throw console.error("Error exporting tests:",A),A}}),resetFilters:()=>{r.value="",s.value="",i.value="",a.value=""}}}),kcn={class:"p-6"},Scn={class:"flex justify-between items-center mb-6"},Ccn={class:"flex gap-2"},Acn={class:"bg-white rounded-lg border shadow-sm"},Tcn={key:0,class:"divide-y divide-gray-200"},$cn={class:"flex items-center justify-between mb-4"},Mcn={class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},Ecn={class:"space-y-3"},Dcn=["onClick"],Rcn={class:"flex items-start justify-between"},Pcn={class:"flex-1 min-w-0"},Icn={class:"flex items-center gap-3 mb-2"},Ocn={class:"font-medium text-gray-900"},Lcn={class:"text-sm text-gray-600 mb-2 line-clamp-2"},Vcn={class:"flex items-center gap-6 text-sm text-gray-500"},Ncn={class:"flex items-center gap-1"},jcn={class:"flex items-center gap-1"},Fcn={class:"flex items-center gap-1"},Bcn={class:"flex items-center gap-3 ml-4"},zcn={class:"text-right text-sm"},Ucn={class:"text-gray-900 font-medium"},Hcn={key:0,class:"mt-3 pt-3 border-t border-gray-100"},qcn={class:"flex items-center gap-2 mb-2"},Wcn={class:"text-sm font-medium text-gray-700"},Gcn={class:"grid grid-cols-1 md:grid-cols-3 gap-2 text-xs text-gray-600"},Ycn={class:"w-4 h-4 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs"},Kcn={class:"truncate"},Xcn={key:0,class:"flex items-center gap-1 text-gray-500"},Qcn={key:1,class:"mt-3 pt-3 border-t border-gray-100"},Zcn={class:"flex items-center justify-between mb-2"},Jcn={class:"flex items-center gap-2"},efn={class:"flex items-center gap-4"},tfn={class:"text-xs text-gray-600"},nfn={key:1,class:"p-12 text-center text-gray-500"},rfn={class:"text-gray-600 mb-6"},sfn={__name:"TestLibrary",setup(t){const e=wcn(),n=Z(()=>e.loading);Z(()=>e.saving);const r=Z({get:()=>e.searchQuery,set:q=>e.searchQuery=q}),s=Z({get:()=>e.selectedCategory,set:q=>e.selectedCategory=q}),i=Z({get:()=>e.selectedTestType,set:q=>e.selectedTestType=q}),a=Z({get:()=>e.selectedStatus,set:q=>e.selectedStatus=q}),o=Q([]),l=Q(!1),d=Q(!1),c=Q(null),f=Q(""),p=Z(()=>e.filteredTests),h=Z(()=>e.groupedTests);Z(()=>e.stats);const m=()=>ue(this,null,function*(){yield e.fetchTests()}),g=()=>ue(this,null,function*(){yield e.fetchTests()}),y=()=>{c.value=null,d.value=!1,l.value=!0},x=()=>ue(this,null,function*(){l.value=!1,yield e.fetchTests()}),_=()=>{console.log("Import tests")},k=q=>ue(this,null,function*(){try{c.value=yield e.getTestDetails(q),d.value=!0,l.value=!0}catch(V){console.error("Error fetching test details:",V)}}),w=q=>{console.log("View test history:",q)},S=q=>{const V=o.value.indexOf(q);V>-1?o.value.splice(V,1):o.value.push(q)},C=q=>[{label:"Execute Test",value:"execute",handler:()=>A(q)},{label:"Edit Test",value:"edit",handler:()=>M(q)},{label:"Clone Test",value:"clone",handler:()=>E(q)},{label:"Export",value:"export",handler:()=>P(q)},{label:"Archive",value:"archive",handler:()=>I(q)}],A=q=>{console.log("Execute test:",q.name)},M=q=>ue(this,null,function*(){try{c.value=yield e.getTestDetails(q.name),d.value=!0,l.value=!0}catch(V){console.error("Error fetching test details:",V)}}),E=q=>{console.log("Clone test:",q.name)},P=q=>{console.log("Export test:",q.name)},I=q=>{console.log("Archive test:",q.name)},F=q=>({"SQL Query":"blue","Python Script":"green","Built-in Function":"purple"})[q]||"gray",L=q=>({Active:"green",Draft:"gray","Under Review":"blue",Archived:"red"})[q]||"gray",z=q=>({Pass:"bg-green-500",Fail:"bg-red-500",Inconclusive:"bg-yellow-500","N/A":"bg-gray-500"})[q]||"bg-gray-500",N=(q,V)=>{q==="status"?a.value=V:(q==="test_type"||q==="test_logic_type")&&(i.value=V),f.value=V};return yt(()=>ue(this,null,function*(){yield m()})),(q,V)=>(T(),R("div",kcn,[u("div",Scn,[V[6]||(V[6]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Test Library"),u("p",{class:"text-gray-600"},"Manage standardized audit tests and procedures")],-1)),u("div",Ccn,[b(v(J),{onClick:g,loading:n.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(v(J),{onClick:_,variant:"outline",size:"sm"},{default:D(()=>[b(v(xa),{class:"w-4 h-4"})]),_:1}),b(v(J),{onClick:y},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),V[5]||(V[5]=W(" New Test ",-1))]),_:1})])]),b(jln,{searchQuery:r.value,"onUpdate:searchQuery":V[0]||(V[0]=O=>r.value=O),selectedCategory:s.value,"onUpdate:selectedCategory":V[1]||(V[1]=O=>s.value=O),selectedTestType:i.value,"onUpdate:selectedTestType":V[2]||(V[2]=O=>i.value=O),selectedStatus:a.value,"onUpdate:selectedStatus":V[3]||(V[3]=O=>a.value=O),onRefresh:g,onCreate:y},null,8,["searchQuery","selectedCategory","selectedTestType","selectedStatus"]),b(_cn,{tests:p.value,"active-filter":f.value,onFilter:N},null,8,["tests","active-filter"]),u("div",Acn,[p.value.length>0?(T(),R("div",Tcn,[(T(!0),R(xe,null,_e(h.value,O=>(T(),R("div",{key:O.name,class:"p-4"},[u("div",$cn,[u("h3",Mcn,[b(v(vt),{class:"w-5 h-5"}),u("span",null,$(O.name),1),b(v(De),{variant:"gray",size:"sm"},{default:D(()=>[W($(O.tests.length),1)]),_:2},1024)]),b(v(J),{onClick:X=>S(O.name),variant:"ghost",size:"sm"},{default:D(()=>[o.value.includes(O.name)?(T(),he(v(xo),{key:0,class:"w-4 h-4"})):(T(),he(v(sr),{key:1,class:"w-4 h-4"}))]),_:2},1032,["onClick"])]),we(u("div",Ecn,[(T(!0),R(xe,null,_e(O.tests,X=>{var j,U;return T(),R("div",{key:X.name,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:G=>k(X.name)},[u("div",Rcn,[u("div",Pcn,[u("div",Icn,[u("h4",Ocn,$(X.test_name),1),b(v(De),{variant:F(X.test_logic_type)},{default:D(()=>[W($(X.test_logic_type),1)]),_:2},1032,["variant"]),b(v(De),{variant:L(X.status),size:"sm"},{default:D(()=>[W($(X.status),1)]),_:2},1032,["variant"])]),u("p",Lcn,$(X.description),1),u("div",Vcn,[u("div",Ncn,[b(v(ei),{class:"w-4 h-4"}),u("span",null,$(X.objective||"No objective"),1)]),u("div",jcn,[b(v(Kr),{class:"w-4 h-4"}),u("span",null,$(X.data_source||"No data source"),1)]),u("div",Fcn,[b(v(Ns),{class:"w-4 h-4"}),u("span",null,$(X.estimated_time||0)+" mins",1)])])]),u("div",Bcn,[u("div",zcn,[u("p",Ucn,$(X.usage_count||0),1),V[7]||(V[7]=u("p",{class:"text-gray-500"},"executions",-1))]),b(v(H0),{options:C(X)},{default:D(({open:G})=>[b(v(J),{variant:"ghost",size:"sm"},{default:D(()=>[b(v(V0),{class:"w-4 h-4"})]),_:1})]),_:1},8,["options"])])]),(j=X.test_steps)!=null&&j.length?(T(),R("div",Hcn,[u("div",qcn,[b(v(KS),{class:"w-4 h-4 text-gray-400"}),u("span",Wcn,"Test Steps ("+$(X.test_steps.length)+")",1)]),u("div",Gcn,[(T(!0),R(xe,null,_e(X.test_steps.slice(0,3),(G,ee)=>(T(),R("div",{key:ee,class:"flex items-center gap-1"},[u("span",Ycn,$(ee+1),1),u("span",Kcn,$(G.description||G.step_description),1)]))),128)),X.test_steps.length>3?(T(),R("div",Xcn,[u("span",null,"+"+$(X.test_steps.length-3)+" more steps",1)])):se("",!0)])])):se("",!0),(U=X.recent_executions)!=null&&U.length?(T(),R("div",Qcn,[u("div",Zcn,[u("div",Jcn,[b(v(gY),{class:"w-4 h-4 text-gray-400"}),V[8]||(V[8]=u("span",{class:"text-sm font-medium text-gray-700"},"Recent Executions",-1))]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(G=>w(X.name),["stop"])},{default:D(()=>[...V[9]||(V[9]=[W(" View All ",-1)])]),_:1},8,["onClick"])]),u("div",efn,[(T(!0),R(xe,null,_e(X.recent_executions.slice(0,3),G=>(T(),R("div",{key:G.name,class:"flex items-center gap-2"},[u("div",{class:pe(["w-3 h-3 rounded-full",z(G.result)])},null,2),u("span",tfn,$(q.formatDate(G.execution_date)),1)]))),128))])])):se("",!0)],8,Dcn)}),128))],512),[[lt,o.value.includes(O.name)]])]))),128))])):(T(),R("div",nfn,[b(v(Kr),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),V[11]||(V[11]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No tests found",-1)),u("p",rfn,$(r.value||s.value||i.value?"Try adjusting your filters":"Create your first audit test to get started"),1),b(v(J),{onClick:y},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),V[10]||(V[10]=W(" Create Test ",-1))]),_:1})]))]),b(Pdn,{show:l.value,"onUpdate:show":V[4]||(V[4]=O=>l.value=O),"test-data":c.value,"is-edit-mode":d.value,onSaved:x},null,8,["show","test-data","is-edit-mode"])]))}},ifn=It(sfn,[["__scopeId","data-v-e3f9acf4"]]),afn={class:"space-y-6"},ofn={class:"flex items-center justify-between"},lfn={class:"flex items-center space-x-3"},ufn={class:"bg-white rounded-lg border border-gray-200 p-4"},dfn={class:"flex flex-col sm:flex-row gap-4"},cfn={class:"flex-1"},ffn={class:"flex gap-2"},pfn={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},hfn={class:"overflow-x-auto"},mfn={class:"min-w-full divide-y divide-gray-200"},gfn={class:"bg-white divide-y divide-gray-200"},vfn={class:"px-6 py-4 whitespace-nowrap"},yfn={class:"flex items-center"},bfn={class:"flex-shrink-0 h-10 w-10"},xfn={class:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center"},_fn={class:"ml-4"},wfn={class:"text-sm font-medium text-gray-900"},kfn={class:"text-sm text-gray-500"},Sfn={class:"px-6 py-4 whitespace-nowrap"},Cfn={class:"text-sm text-gray-900"},Afn={class:"px-6 py-4 whitespace-nowrap"},Tfn={class:"flex flex-wrap gap-1"},$fn={class:"px-6 py-4 whitespace-nowrap"},Mfn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Efn={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Dfn={class:"flex items-center space-x-2"},Rfn={class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Pfn={class:"flex items-center justify-between"},Ifn={class:"text-sm text-gray-700"},Ofn={class:"flex items-center space-x-2"},Lfn={class:"flex items-center justify-between mb-4"},Vfn={class:"text-lg font-medium text-gray-900"},Nfn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jfn={key:0},Ffn={class:"flex items-center space-x-2"},Bfn={class:"flex justify-end space-x-3 pt-4"},zfn={__name:"UserManagement",setup(t){const e=Q(""),n=Q(""),r=Q(""),s=Q(1),i=Q(10),a=Q(!1),o=Q(!1),l=Q(!1),d=Q([]),c=Q({name:"",full_name:"",username:"",email:"",role_profile_name:"",password:"",enabled:!0}),f=Z(()=>{let E=d.value;if(e.value){const P=e.value.toLowerCase();E=E.filter(I=>{var F,L,z,N;return((F=I.full_name)==null?void 0:F.toLowerCase().includes(P))||((L=I.email)==null?void 0:L.toLowerCase().includes(P))||((z=I.username)==null?void 0:z.toLowerCase().includes(P))||((N=I.roles)==null?void 0:N.some(q=>q.toLowerCase().includes(P)))})}if(n.value&&(E=E.filter(P=>{var I;return(I=P.roles)==null?void 0:I.includes(n.value)})),r.value){const P=r.value==="active";E=E.filter(I=>I.enabled===P)}return E}),p=Z(()=>f.value.length),h=Z(()=>Math.ceil(p.value/i.value)),m=[{label:"All Roles",value:""},{label:"System Manager",value:"System Manager"},{label:"Audit Manager",value:"Audit Manager"},{label:"Auditor",value:"Auditor"},{label:"Compliance Officer",value:"Compliance Officer"},{label:"Guest",value:"Guest"}],g=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],y=[{label:"System Manager",value:"System Manager"},{label:"Audit Manager",value:"Audit Manager"},{label:"Auditor",value:"Auditor"},{label:"Compliance Officer",value:"Compliance Officer"},{label:"Guest",value:"Guest"}],x=()=>ue(this,null,function*(){try{d.value=[{name:"Administrator",full_name:"Administrator",username:"Administrator",email:"admin@example.com",roles:["System Manager"],enabled:!0,last_login:new Date().toISOString()},{name:"Guest",full_name:"Guest",username:"Guest",email:"guest@example.com",roles:["Guest"],enabled:!0,last_login:null},{name:"john_doe",full_name:"John Doe",username:"john_doe",email:"john.doe@example.com",roles:["Audit Manager"],enabled:!0,last_login:new Date(Date.now()-864e5).toISOString()},{name:"jane_smith",full_name:"Jane Smith",username:"jane_smith",email:"jane.smith@example.com",roles:["Auditor"],enabled:!0,last_login:new Date(Date.now()-36e5).toISOString()},{name:"mike_johnson",full_name:"Mike Johnson",username:"mike_johnson",email:"mike.johnson@example.com",roles:["Compliance Officer"],enabled:!1,last_login:new Date(Date.now()-6048e5).toISOString()}]}catch(E){console.error("Error fetching users:",E)}}),_=E=>({"System Manager":"destructive","Audit Manager":"default",Auditor:"secondary","Compliance Officer":"outline",Guest:"secondary"})[E]||"secondary",k=E=>{c.value=ge({},E),o.value=!0},w=E=>ue(this,null,function*(){try{E.enabled=!E.enabled,console.log(`User ${E.name} ${E.enabled?"enabled":"disabled"}`)}catch(P){console.error("Error toggling user status:",P)}}),S=E=>ue(this,null,function*(){if(confirm(`Are you sure you want to reset the password for ${E.full_name}?`))try{console.log(`Password reset for user ${E.name}`),alert("Password reset email sent successfully!")}catch(P){console.error("Error resetting password:",P),alert("Error resetting password. Please try again.")}}),C=()=>ue(this,null,function*(){l.value=!0;try{if(o.value){const E=d.value.findIndex(P=>P.name===c.value.name);E!==-1&&(d.value[E]=ge({},c.value))}else d.value.push(ze(ge({},c.value),{name:c.value.username,last_login:null}));A(),console.log("User saved successfully")}catch(E){console.error("Error saving user:",E),alert("Error saving user. Please try again.")}finally{l.value=!1}}),A=()=>{a.value=!1,o.value=!1,c.value={name:"",full_name:"",username:"",email:"",role_profile_name:"",password:"",enabled:!0}},M=E=>E?new Date(E).toLocaleString():"Never";return yt(()=>{x()}),(E,P)=>(T(),R("div",afn,[u("div",ofn,[P[15]||(P[15]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"User Management"),u("p",{class:"text-gray-600 mt-1"}," Manage system users, roles, and permissions ")],-1)),u("div",lfn,[b(v(J),{variant:"outline"},{default:D(()=>[b(v(xn),{class:"h-4 w-4 mr-2"}),P[13]||(P[13]=W(" Export Users ",-1))]),_:1}),b(v(J),{onClick:P[0]||(P[0]=I=>a.value=!0)},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),P[14]||(P[14]=W(" Add User ",-1))]),_:1})])]),u("div",ufn,[u("div",dfn,[u("div",cfn,[b(v($n),{modelValue:e.value,"onUpdate:modelValue":P[1]||(P[1]=I=>e.value=I),placeholder:"Search users by name, email, or role...",class:"w-full"},{default:D(()=>[b(v(En),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])]),u("div",ffn,[b(v(Qe),{modelValue:n.value,"onUpdate:modelValue":P[2]||(P[2]=I=>n.value=I),options:m,placeholder:"All Roles",class:"w-40"},null,8,["modelValue"]),b(v(Qe),{modelValue:r.value,"onUpdate:modelValue":P[3]||(P[3]=I=>r.value=I),options:g,placeholder:"All Status",class:"w-40"},null,8,["modelValue"])])])]),u("div",pfn,[u("div",hfn,[u("table",mfn,[P[16]||(P[16]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Login "),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),u("tbody",gfn,[(T(!0),R(xe,null,_e(f.value,I=>(T(),R("tr",{key:I.name,class:"hover:bg-gray-50"},[u("td",vfn,[u("div",yfn,[u("div",bfn,[u("div",xfn,[b(v(Ji),{class:"h-5 w-5 text-white"})])]),u("div",_fn,[u("div",wfn,$(I.full_name||I.name),1),u("div",kfn,$(I.username),1)])])]),u("td",Sfn,[u("div",Cfn,$(I.email),1)]),u("td",Afn,[u("div",Tfn,[(T(!0),R(xe,null,_e(I.roles,F=>(T(),he(v(De),{key:F,variant:_(F),size:"sm"},{default:D(()=>[W($(F),1)]),_:2},1032,["variant"]))),128))])]),u("td",$fn,[b(v(De),{variant:I.enabled?"success":"secondary"},{default:D(()=>[W($(I.enabled?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),u("td",Mfn,$(M(I.last_login)),1),u("td",Efn,[u("div",Dfn,[b(v(J),{variant:"ghost",size:"sm",onClick:F=>k(I)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:F=>w(I)},{default:D(()=>[(T(),he(At(I.enabled?v(afe):v(Kt)),{class:pe(["h-4 w-4",I.enabled?"text-red-500":"text-green-500"])},null,8,["class"]))]),_:2},1032,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:F=>S(I)},{default:D(()=>[b(v(Afe),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128))])])]),u("div",Rfn,[u("div",Pfn,[u("div",Ifn," Showing "+$((s.value-1)*i.value+1)+" to "+$(Math.min(s.value*i.value,p.value))+" of "+$(p.value)+" users ",1),u("div",Ofn,[b(v(J),{variant:"outline",size:"sm",disabled:s.value===1,onClick:P[4]||(P[4]=I=>s.value--)},{default:D(()=>[b(v(gr),{class:"h-4 w-4"}),P[17]||(P[17]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(v(J),{variant:"outline",size:"sm",disabled:s.value===h.value,onClick:P[5]||(P[5]=I=>s.value++)},{default:D(()=>[P[18]||(P[18]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])]),a.value||o.value?(T(),R("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:A},[u("div",{class:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",onClick:P[12]||(P[12]=ut(()=>{},["stop"]))},[u("div",Lfn,[u("h3",Vfn,$(o.value?"Edit User":"Add New User"),1),b(v(J),{variant:"ghost",onClick:A},{default:D(()=>[b(v(ht),{class:"h-5 w-5"})]),_:1})]),u("form",{onSubmit:ut(C,["prevent"]),class:"space-y-4"},[u("div",Nfn,[u("div",null,[P[19]||(P[19]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name",-1)),b(v($n),{modelValue:c.value.full_name,"onUpdate:modelValue":P[6]||(P[6]=I=>c.value.full_name=I),placeholder:"Enter full name",required:"",class:"w-full"},null,8,["modelValue"])]),u("div",null,[P[20]||(P[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Username",-1)),b(v($n),{modelValue:c.value.username,"onUpdate:modelValue":P[7]||(P[7]=I=>c.value.username=I),placeholder:"Enter username",required:"",class:"w-full"},null,8,["modelValue"])]),u("div",null,[P[21]||(P[21]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),b(v($n),{modelValue:c.value.email,"onUpdate:modelValue":P[8]||(P[8]=I=>c.value.email=I),type:"email",placeholder:"Enter email address",required:"",class:"w-full"},null,8,["modelValue"])]),u("div",null,[P[22]||(P[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),b(v(Qe),{modelValue:c.value.role_profile_name,"onUpdate:modelValue":P[9]||(P[9]=I=>c.value.role_profile_name=I),options:y,placeholder:"Select role",required:"",class:"w-full"},null,8,["modelValue"])])]),o.value?se("",!0):(T(),R("div",jfn,[P[23]||(P[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Password",-1)),b(v($n),{modelValue:c.value.password,"onUpdate:modelValue":P[10]||(P[10]=I=>c.value.password=I),type:"password",placeholder:"Enter password",required:"",class:"w-full"},null,8,["modelValue"])])),u("div",Ffn,[b(v(St),{modelValue:c.value.enabled,"onUpdate:modelValue":P[11]||(P[11]=I=>c.value.enabled=I)},null,8,["modelValue"]),P[24]||(P[24]=u("label",{class:"text-sm text-gray-700"},"User is active",-1))]),u("div",Bfn,[b(v(J),{variant:"outline",onClick:A},{default:D(()=>[...P[25]||(P[25]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{type:"submit",loading:l.value},{default:D(()=>[W($(o.value?"Update User":"Create User"),1)]),_:1},8,["loading"])])],32)])])):se("",!0)]))}},Ufn={class:"flex items-center space-x-4 mb-6"},Hfn={class:"flex-shrink-0"},qfn={class:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center"},Wfn={class:"flex-1"},Gfn={class:"flex items-center space-x-3"},Yfn={class:"text-xl font-bold text-gray-900"},Kfn={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Xfn={class:"text-gray-600 mt-1"},nw={__name:"SectionHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,default:"file-text"},step:{type:[String,Number],required:!0}},setup(t){const e=t,n=Z(()=>({"file-text":vt,"clipboard-list":Ar,users:Jr,"check-circle":Kt})[e.icon]||vt);return(r,s)=>(T(),R("div",Ufn,[u("div",Hfn,[u("div",qfn,[(T(),he(At(n.value),{class:"h-6 w-6 text-purple-600"}))])]),u("div",Wfn,[u("div",Gfn,[u("h3",Yfn,$(t.title),1),u("span",Kfn," Step "+$(t.step),1)]),u("p",Xfn,$(t.description),1)])]))}},Qfn={class:"h-[80vh] flex"},Zfn={class:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0 overflow-y-auto"},Jfn={class:"p-5"},epn={class:"space-y-1"},tpn=["onClick"],npn={key:1},rpn={class:"flex-1 min-w-0"},spn={class:"text-sm font-medium truncate"},ipn={class:"text-xs text-gray-500"},apn={class:"mt-6 p-4 bg-white rounded-lg border border-gray-200"},opn={class:"flex items-center justify-between mb-2"},lpn={class:"text-sm font-bold text-purple-600"},upn={class:"w-full bg-gray-200 rounded-full h-2"},dpn={class:"text-xs text-gray-500 mt-2"},cpn={class:"flex-1 overflow-y-auto"},fpn={class:"p-6 max-w-5xl mx-auto"},ppn={class:"space-y-6"},hpn={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6"},mpn={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},gpn={key:0,class:"mt-1 text-xs text-red-500"},vpn={key:1,class:"mt-1 text-xs text-gray-500"},ypn=["value"],bpn=["value"],xpn={key:0,class:"mt-1 text-xs text-red-500"},_pn={class:"mt-6"},wpn={key:0,class:"mt-1 text-xs text-red-500"},kpn={class:"mt-6"},Spn={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6"},Cpn={class:"space-y-6"},Apn={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},Tpn={key:0,class:"mt-1 text-xs text-red-500"},$pn={class:"space-y-6"},Mpn={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},Epn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Dpn={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Rpn={key:0,class:"mt-1 text-xs text-red-500"},Ppn={class:"space-y-6"},Ipn={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 space-y-6"},Opn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Lpn={class:"border-t border-gray-200 pt-6"},Vpn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Npn={class:"border-t border-gray-200 pt-6"},jpn={class:"flex items-center justify-between w-full"},Fpn={class:"flex items-center space-x-4"},Bpn={class:"flex items-center space-x-2"},zpn={class:"flex items-center space-x-2"},Upn={class:"flex items-center space-x-3"},Hpn={__name:"WorkingPapersForm",props:{modelValue:{type:Boolean,default:!1},workingPaper:{type:Object,default:null}},emits:["update:modelValue","created","updated","cancelled"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.modelValue,set:L=>r("update:modelValue",L)}),i=Z(()=>{var L;return!!((L=n.workingPaper)!=null&&L.name)}),a=[{id:"basic",label:"Basic Information",description:"Core details",icon:"file-text"},{id:"content",label:"Content & Work",description:"Documentation",icon:"clipboard-list"},{id:"assignment",label:"Assignment",description:"Team & timeline",icon:"users"},{id:"quality",label:"Quality Control",description:"Review & docs",icon:"check-circle"}],o=Q("basic"),l=Jt({working_paper_id:"",wp_title:"",wp_reference_no:"",wp_type:"",engagement_reference:"",procedure_reference:"",work_performed:"",objective:"",scope:"",prepared_by:"",reviewed_by:"",preparation_date:"",review_date:"",due_date:"",review_status:"Not Reviewed",quality_score:"",review_comments:"",supporting_documents:"",attachments:[],notes:""}),d=Jt({}),c=Q(!1),f=Q(!1),p=[{label:"Not Reviewed",value:"Not Reviewed"},{label:"Under Review",value:"Under Review"},{label:"Review Complete",value:"Review Complete"},{label:"Revision Required",value:"Revision Required"}],h=[{label:"Planning Memo",value:"Planning Memo"},{label:"Risk Assessment",value:"Risk Assessment"},{label:"Walkthrough",value:"Walkthrough"},{label:"Test of Controls",value:"Test of Controls"},{label:"Substantive Test",value:"Substantive Test"},{label:"Analytical Review",value:"Analytical Review"},{label:"Data Analytics",value:"Data Analytics"},{label:"Summary",value:"Summary"},{label:"Other",value:"Other"}],m=Z(()=>a.findIndex(L=>L.id===o.value)),g=L=>{switch(L){case"basic":return l.wp_title&&l.wp_type&&l.engagement_reference?"complete":l.wp_title||l.wp_type?"partial":"incomplete";case"content":return l.work_performed?"complete":"incomplete";case"assignment":return l.prepared_by&&l.preparation_date?"complete":l.prepared_by||l.preparation_date?"partial":"incomplete";case"quality":return"complete";default:return"incomplete"}},y=L=>{const z=g(L);return z==="complete"?"bg-purple-500 text-white":z==="partial"?"bg-amber-500 text-white":"bg-gray-300 text-gray-600"},x=Z(()=>a.filter(L=>g(L.id)==="complete").length),_=Z(()=>Math.round(x.value/a.length*100)),k=Z(()=>!!(l.wp_title&&l.wp_type&&l.engagement_reference&&l.work_performed&&l.prepared_by&&l.preparation_date)),w=()=>{const L=m.value;L>0&&(o.value=a[L-1].id)},S=()=>{const L=m.value;L<a.length-1&&(o.value=a[L+1].id)},C=()=>{const L={};return l.wp_title||(L.wp_title="Working paper title is required"),l.wp_type||(L.wp_type="Type is required"),l.engagement_reference||(L.engagement_reference="Engagement reference is required"),l.work_performed||(L.work_performed="Work performed is required"),l.prepared_by||(L.prepared_by="Prepared by is required"),l.preparation_date||(L.preparation_date="Preparation date is required"),Object.assign(d,L),Object.keys(L).length===0},A=()=>ze(ge({},l),{attachments:Array.isArray(l.attachments)?l.attachments:[]}),M=()=>ue(this,null,function*(){if(!C()){const L=a.find(z=>g(z.id)!=="complete");L&&(o.value=L.id);return}try{c.value=!0;const L=A();i.value?r("updated",ze(ge({},L),{name:n.workingPaper.name})):r("created",L),s.value=!1}catch(L){console.error("Error saving working paper:",L)}finally{c.value=!1}}),E=()=>ue(this,null,function*(){try{f.value=!0;const L=A();r("created",ze(ge({},L),{review_status:"Not Reviewed"})),s.value=!1}catch(L){console.error("Error saving draft:",L)}finally{f.value=!1}}),P=()=>{r("cancelled"),s.value=!1},I=()=>{Object.keys(l).forEach(L=>{Array.isArray(l[L])?l[L]=[]:typeof l[L]=="number"?l[L]=null:l[L]=""}),l.review_status="Not Reviewed",Object.keys(d).forEach(L=>delete d[L]),o.value="basic"},F=L=>{L&&Object.keys(l).forEach(z=>{L[z]!==void 0&&(l[z]=L[z])})};return et(()=>n.modelValue,L=>{L&&(n.workingPaper?F(n.workingPaper):I())}),et(()=>n.workingPaper,L=>{L&&n.modelValue&&F(L)},{deep:!0}),(L,z)=>(T(),he(v(jt),{modelValue:s.value,"onUpdate:modelValue":z[20]||(z[20]=N=>s.value=N),options:{title:i.value?"Edit Working Paper":"Create New Working Paper",size:"full"}},{"body-content":D(()=>[u("div",Qfn,[u("div",Zfn,[u("div",Jfn,[z[22]||(z[22]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Form Sections",-1)),u("nav",epn,[(T(),R(xe,null,_e(a,(N,q)=>u("button",{key:N.id,onClick:V=>o.value=N.id,class:pe(["w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-left transition-all",[o.value===N.id?"bg-purple-100 border border-purple-300 text-purple-800":"hover:bg-gray-100 text-gray-700"]])},[u("div",{class:pe(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold flex-shrink-0",y(N.id)])},[g(N.id)==="complete"?(T(),he(v(Fr),{key:0,class:"h-3 w-3"})):(T(),R("span",npn,$(q+1),1))],2),u("div",rpn,[u("div",spn,$(N.label),1),u("div",ipn,$(N.description),1)])],10,tpn)),64))]),u("div",apn,[u("div",opn,[z[21]||(z[21]=u("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),u("span",lpn,$(_.value)+"%",1)]),u("div",upn,[u("div",{class:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:rt({width:`${_.value}%`})},null,4)]),u("p",dpn,$(x.value)+" of "+$(a.length)+" sections complete ",1)])])]),u("div",cpn,[u("div",fpn,[we(u("div",ppn,[b(nw,{title:"Basic Information",description:"Essential working paper details and identification",icon:"file-text",step:"1"}),u("div",hpn,[u("div",mpn,[u("div",null,[z[23]||(z[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Working Paper ID "),u("span",{class:"text-red-500"},"*")],-1)),we(u("input",{"onUpdate:modelValue":z[0]||(z[0]=N=>l.working_paper_id=N),type:"text",placeholder:"Auto-generated if left blank",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",d.working_paper_id?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.working_paper_id]]),d.working_paper_id?(T(),R("p",gpn,$(d.working_paper_id),1)):(T(),R("p",vpn,"Format: WP-YYYY-XXX"))]),u("div",null,[z[24]||(z[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Review Status "),u("span",{class:"text-red-500"},"*")],-1)),we(u("select",{"onUpdate:modelValue":z[1]||(z[1]=N=>l.review_status=N),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[(T(),R(xe,null,_e(p,N=>u("option",{key:N.value,value:N.value},$(N.label),9,ypn)),64))],512),[[vn,l.review_status]])]),u("div",null,[z[26]||(z[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Type "),u("span",{class:"text-red-500"},"*")],-1)),we(u("select",{"onUpdate:modelValue":z[2]||(z[2]=N=>l.wp_type=N),class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",d.wp_type?"border-red-300":"border-gray-300"])},[z[25]||(z[25]=u("option",{value:""},"Select type",-1)),(T(),R(xe,null,_e(h,N=>u("option",{key:N.value,value:N.value},$(N.label),9,bpn)),64))],2),[[vn,l.wp_type]]),d.wp_type?(T(),R("p",xpn,$(d.wp_type),1)):se("",!0)])]),u("div",_pn,[z[27]||(z[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Title "),u("span",{class:"text-red-500"},"*")],-1)),we(u("input",{"onUpdate:modelValue":z[3]||(z[3]=N=>l.wp_title=N),type:"text",placeholder:"Enter working paper title",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",d.wp_title?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.wp_title]]),d.wp_title?(T(),R("p",wpn,$(d.wp_title),1)):se("",!0)]),u("div",kpn,[z[28]||(z[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Reference Number ",-1)),we(u("input",{"onUpdate:modelValue":z[4]||(z[4]=N=>l.wp_reference_no=N),type:"text",placeholder:"REF-001",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Rt,l.wp_reference_no]])]),u("div",Spn,[u("div",null,[z[29]||(z[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Engagement Reference "),u("span",{class:"text-red-500"},"*")],-1)),b(Mt,{modelValue:l.engagement_reference,"onUpdate:modelValue":z[5]||(z[5]=N=>l.engagement_reference=N),doctype:"Audit Engagement",placeholder:"Select audit engagement",required:!0,error:d.engagement_reference},null,8,["modelValue","error"])]),u("div",null,[z[30]||(z[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Procedure Reference ",-1)),b(Mt,{modelValue:l.procedure_reference,"onUpdate:modelValue":z[6]||(z[6]=N=>l.procedure_reference=N),doctype:"Audit Procedure",placeholder:"Link to audit procedure"},null,8,["modelValue"])])])])],512),[[lt,o.value==="basic"]]),we(u("div",Cpn,[b(nw,{title:"Content & Work Performed",description:"Document the work performed and findings",icon:"clipboard-list",step:"2"}),u("div",Apn,[u("div",null,[z[31]||(z[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Work Performed "),u("span",{class:"text-red-500"},"*")],-1)),we(u("textarea",{"onUpdate:modelValue":z[7]||(z[7]=N=>l.work_performed=N),rows:"6",placeholder:"Describe the work performed, procedures followed, and methodology used...",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",d.work_performed?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.work_performed]]),d.work_performed?(T(),R("p",Tpn,$(d.work_performed),1)):se("",!0)]),u("div",null,[z[32]||(z[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Objective ",-1)),we(u("textarea",{"onUpdate:modelValue":z[8]||(z[8]=N=>l.objective=N),rows:"3",placeholder:"What was the objective of this working paper?",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Rt,l.objective]])]),u("div",null,[z[33]||(z[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Scope ",-1)),we(u("textarea",{"onUpdate:modelValue":z[9]||(z[9]=N=>l.scope=N),rows:"3",placeholder:"Define the scope and boundaries of this working paper...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Rt,l.scope]])])])],512),[[lt,o.value==="content"]]),we(u("div",$pn,[b(nw,{title:"Assignment & Timeline",description:"Assign team members and track progress",icon:"users",step:"3"}),u("div",Mpn,[u("div",Epn,[u("div",null,[z[34]||(z[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Prepared By "),u("span",{class:"text-red-500"},"*")],-1)),b(Mt,{modelValue:l.prepared_by,"onUpdate:modelValue":z[10]||(z[10]=N=>l.prepared_by=N),doctype:"User",filters:{enabled:1},placeholder:"Select preparer",required:!0,error:d.prepared_by},null,8,["modelValue","error"])]),u("div",null,[z[35]||(z[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Reviewed By ",-1)),b(Mt,{modelValue:l.reviewed_by,"onUpdate:modelValue":z[11]||(z[11]=N=>l.reviewed_by=N),doctype:"User",filters:{enabled:1},placeholder:"Select reviewer"},null,8,["modelValue"])])]),u("div",Dpn,[u("div",null,[z[36]||(z[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[W(" Preparation Date "),u("span",{class:"text-red-500"},"*")],-1)),we(u("input",{"onUpdate:modelValue":z[12]||(z[12]=N=>l.preparation_date=N),type:"date",class:pe(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",d.preparation_date?"border-red-300":"border-gray-300"])},null,2),[[Rt,l.preparation_date]]),d.preparation_date?(T(),R("p",Rpn,$(d.preparation_date),1)):se("",!0)]),u("div",null,[z[37]||(z[37]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Review Date ",-1)),we(u("input",{"onUpdate:modelValue":z[13]||(z[13]=N=>l.review_date=N),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Rt,l.review_date]])]),u("div",null,[z[38]||(z[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Due Date ",-1)),we(u("input",{"onUpdate:modelValue":z[14]||(z[14]=N=>l.due_date=N),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Rt,l.due_date]])])])])],512),[[lt,o.value==="assignment"]]),we(u("div",Ppn,[b(nw,{title:"Quality Control & Documentation",description:"Quality assessment and documentation references",icon:"check-circle",step:"4"}),u("div",Ipn,[u("div",Opn,[u("div",null,[z[40]||(z[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Quality Score ",-1)),we(u("select",{"onUpdate:modelValue":z[15]||(z[15]=N=>l.quality_score=N),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...z[39]||(z[39]=[u("option",{value:""},"Select score",-1),u("option",{value:"1"},"1 - Poor",-1),u("option",{value:"2"},"2 - Below Average",-1),u("option",{value:"3"},"3 - Average",-1),u("option",{value:"4"},"4 - Good",-1),u("option",{value:"5"},"5 - Excellent",-1)])],512),[[vn,l.quality_score]])]),u("div",null,[z[41]||(z[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Review Comments ",-1)),we(u("textarea",{"onUpdate:modelValue":z[16]||(z[16]=N=>l.review_comments=N),rows:"3",placeholder:"Reviewer feedback and comments...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Rt,l.review_comments]])])]),u("div",Lpn,[z[44]||(z[44]=u("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"Documentation References",-1)),u("div",Vpn,[u("div",null,[z[42]||(z[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Supporting Documents ",-1)),we(u("textarea",{"onUpdate:modelValue":z[17]||(z[17]=N=>l.supporting_documents=N),rows:"3",placeholder:"List supporting documents, references, and evidence...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Rt,l.supporting_documents]])]),u("div",null,[z[43]||(z[43]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," File Attachments ",-1)),b(wCt,{modelValue:l.attachments,"onUpdate:modelValue":z[18]||(z[18]=N=>l.attachments=N),multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",placeholder:"Upload working paper files"},null,8,["modelValue"])])])]),u("div",Npn,[z[45]||(z[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"}," Additional Notes ",-1)),we(u("textarea",{"onUpdate:modelValue":z[19]||(z[19]=N=>l.notes=N),rows:"3",placeholder:"Any additional notes or observations...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Rt,l.notes]])])])],512),[[lt,o.value==="quality"]])])])])]),actions:D(()=>[u("div",jpn,[u("div",Fpn,[u("div",Bpn,[u("div",{class:pe(["w-3 h-3 rounded-full",k.value?"bg-green-500":"bg-amber-500"])},null,2),u("span",{class:pe(["text-sm font-medium",k.value?"text-green-700":"text-amber-700"])},$(k.value?"Ready to save":"Complete required fields"),3)]),u("div",zpn,[b(v(J),{variant:"ghost",size:"sm",disabled:m.value===0,onClick:w},{default:D(()=>[b(v(gr),{class:"h-4 w-4 mr-1"}),z[46]||(z[46]=W(" Previous ",-1))]),_:1},8,["disabled"]),b(v(J),{variant:"ghost",size:"sm",disabled:m.value===a.length-1,onClick:S},{default:D(()=>[z[47]||(z[47]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4 ml-1"})]),_:1},8,["disabled"])])]),u("div",Upn,[b(v(J),{variant:"outline",onClick:P,disabled:c.value},{default:D(()=>[...z[48]||(z[48]=[W(" Cancel ",-1)])]),_:1},8,["disabled"]),i.value?se("",!0):(T(),he(v(J),{key:0,variant:"outline",theme:"gray",onClick:E,loading:f.value,disabled:c.value},{default:D(()=>[...z[49]||(z[49]=[W(" Save as Draft ",-1)])]),_:1},8,["loading","disabled"])),b(v(J),{variant:"solid",theme:"purple",onClick:M,loading:c.value},{prefix:D(()=>[i.value?(T(),he(v(Fr),{key:1,class:"h-4 w-4"})):(T(),he(v(nt),{key:0,class:"h-4 w-4"}))]),default:D(()=>[W(" "+$(i.value?"Update Working Paper":"Create Working Paper"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","options"]))}},qpn={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-6 gap-4"},Wpn={class:"bg-purple-50 rounded-xl border border-purple-200 p-6 hover:shadow-lg transition-shadow"},Gpn={class:"flex items-center justify-between"},Ypn={class:"text-3xl font-bold text-purple-900 mt-1"},Kpn={class:"p-3 bg-purple-500 rounded-xl shadow-sm"},Xpn={class:"bg-green-50 rounded-xl border border-green-200 p-6 hover:shadow-lg transition-shadow"},Qpn={class:"flex items-center justify-between"},Zpn={class:"text-3xl font-bold text-green-900 mt-1"},Jpn={class:"text-xs text-green-600 mt-1"},ehn={class:"p-3 bg-green-500 rounded-xl shadow-sm"},thn={class:"bg-yellow-50 rounded-xl border border-yellow-200 p-6 hover:shadow-lg transition-shadow"},nhn={class:"flex items-center justify-between"},rhn={class:"text-3xl font-bold text-yellow-900 mt-1"},shn={class:"p-3 bg-yellow-500 rounded-xl shadow-sm"},ihn={class:"bg-red-50 rounded-xl border border-red-200 p-6 hover:shadow-lg transition-shadow"},ahn={class:"flex items-center justify-between"},ohn={class:"text-3xl font-bold text-red-900 mt-1"},lhn={class:"p-3 bg-red-500 rounded-xl shadow-sm"},uhn={class:"bg-blue-50 rounded-xl border border-blue-200 p-6 hover:shadow-lg transition-shadow"},dhn={class:"flex items-center justify-between"},chn={class:"text-3xl font-bold text-blue-900 mt-1"},fhn={class:"w-full bg-blue-200 rounded-full h-2 mt-2"},phn={class:"p-3 bg-blue-500 rounded-xl shadow-sm"},hhn={class:"bg-indigo-50 rounded-xl border border-indigo-200 p-6 hover:shadow-lg transition-shadow"},mhn={class:"flex items-center justify-between"},ghn={class:"text-3xl font-bold text-indigo-900 mt-1"},vhn={class:"p-3 bg-indigo-500 rounded-xl shadow-sm"},yhn={__name:"WorkingPapersStats",props:{workingPapers:{type:Array,default:()=>[]}},setup(t){const e=t,n=Z(()=>e.workingPapers.length),r=Z(()=>e.workingPapers.filter(l=>l.review_status==="Review Complete").length),s=Z(()=>e.workingPapers.filter(l=>l.review_status==="Under Review").length),i=Z(()=>e.workingPapers.filter(l=>l.review_status==="Revision Required").length),a=Z(()=>{const l=e.workingPapers.filter(c=>c.review_date&&c.preparation_date);if(l.length===0)return 0;const d=l.reduce((c,f)=>{const p=new Date(f.preparation_date),h=new Date(f.review_date),m=Math.abs(h-p),g=Math.ceil(m/(1e3*60*60*24));return c+g},0);return Math.round(d/l.length)}),o=Z(()=>{const l=e.workingPapers.filter(c=>c.quality_score);if(l.length===0)return 0;const d=l.reduce((c,f)=>c+(f.quality_score||0),0);return Math.round(d/l.length)});return(l,d)=>(T(),R("div",qpn,[u("div",Wpn,[u("div",Gpn,[u("div",null,[d[0]||(d[0]=u("p",{class:"text-sm font-semibold text-purple-700 uppercase tracking-wide"},"Total Papers",-1)),u("p",Ypn,$(n.value),1),d[1]||(d[1]=u("p",{class:"text-xs text-purple-600 mt-1"},"Active documentation",-1))]),u("div",Kpn,[b(v(vt),{class:"h-7 w-7 text-white"})])])]),u("div",Xpn,[u("div",Qpn,[u("div",null,[d[2]||(d[2]=u("p",{class:"text-sm font-semibold text-green-700 uppercase tracking-wide"},"Review Complete",-1)),u("p",Zpn,$(r.value),1),u("p",Jpn,$((r.value/Math.max(n.value,1)*100).toFixed(0))+"% of total",1)]),u("div",ehn,[b(v(Kt),{class:"h-7 w-7 text-white"})])])]),u("div",thn,[u("div",nhn,[u("div",null,[d[3]||(d[3]=u("p",{class:"text-sm font-semibold text-yellow-700 uppercase tracking-wide"},"Under Review",-1)),u("p",rhn,$(s.value),1),d[4]||(d[4]=u("p",{class:"text-xs text-yellow-600 mt-1"},"Pending approval",-1))]),u("div",shn,[b(v(Ns),{class:"h-7 w-7 text-white"})])])]),u("div",ihn,[u("div",ahn,[u("div",null,[d[5]||(d[5]=u("p",{class:"text-sm font-semibold text-red-700 uppercase tracking-wide"},"Revision Required",-1)),u("p",ohn,$(i.value),1),d[6]||(d[6]=u("p",{class:"text-xs text-red-600 mt-1"},"Needs updates",-1))]),u("div",lhn,[b(v(rn),{class:"h-7 w-7 text-white"})])])]),u("div",uhn,[u("div",dhn,[u("div",null,[d[7]||(d[7]=u("p",{class:"text-sm font-semibold text-blue-700 uppercase tracking-wide"},"Avg. Review Time",-1)),u("p",chn,$(a.value)+" days",1),u("div",fhn,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${Math.min(a.value/14*100,100)}%`})},null,4)])]),u("div",phn,[b(v(sb),{class:"h-7 w-7 text-white"})])])]),u("div",hhn,[u("div",mhn,[u("div",null,[d[8]||(d[8]=u("p",{class:"text-sm font-semibold text-indigo-700 uppercase tracking-wide"},"Quality Score",-1)),u("p",ghn,$(o.value)+"%",1),d[9]||(d[9]=u("p",{class:"text-xs text-indigo-600 mt-1"},"Scored papers",-1))]),u("div",vhn,[b(v(hr),{class:"h-7 w-7 text-white"})])])])]))}},bhn={class:"space-y-6"},xhn={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},_hn={class:"flex items-center space-x-3"},whn={class:"p-2 bg-purple-100 rounded-lg"},khn={class:"flex flex-wrap items-center gap-3"},Shn={class:"p-1"},Chn={class:"p-1"},Ahn={class:"p-1"},Thn={class:"p-1"},$hn={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Mhn={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},Ehn={class:"flex flex-col sm:flex-row gap-4 flex-1"},Dhn={class:"relative flex-1 max-w-md"},Rhn={class:"flex gap-2"},Phn=["value"],Ihn=["value"],Ohn=["value"],Lhn={class:"flex items-center gap-3"},Vhn={class:"flex items-center bg-gray-100 rounded-lg p-1"},Nhn={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},jhn={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},Fhn={class:"flex items-center justify-between"},Bhn={class:"flex items-center space-x-3"},zhn={class:"text-sm font-medium text-gray-700"},Uhn={class:"flex items-center space-x-2"},Hhn={key:0},qhn={class:"overflow-x-auto"},Whn={class:"min-w-full divide-y divide-gray-200"},Ghn={class:"bg-gray-50"},Yhn={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Khn={class:"bg-white divide-y divide-gray-200"},Xhn={class:"px-6 py-4 whitespace-nowrap"},Qhn={class:"px-6 py-4 whitespace-nowrap"},Zhn={class:"flex items-center"},Jhn={class:"flex-shrink-0 h-10 w-10"},emn={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},tmn={class:"ml-4"},nmn={class:"text-sm font-medium text-gray-900"},rmn={class:"px-6 py-4 whitespace-nowrap"},smn={class:"text-sm font-medium text-gray-900"},imn={class:"text-sm text-gray-500"},amn={class:"px-6 py-4 whitespace-nowrap"},omn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lmn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},umn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},dmn={class:"px-6 py-4 whitespace-nowrap"},cmn={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},fmn={class:"flex items-center space-x-2"},pmn={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},hmn={class:"flex items-center justify-between"},mmn={class:"text-sm text-gray-700"},gmn={class:"flex items-center space-x-2"},vmn={class:"text-sm text-gray-700"},ymn={key:1,class:"p-6"},bmn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},xmn=["onClick"],_mn={class:"flex items-start justify-between mb-4"},wmn={class:"flex items-center space-x-3"},kmn={class:"flex-shrink-0"},Smn={class:"h-12 w-12 rounded-lg bg-purple-100 flex items-center justify-center"},Cmn={class:"text-lg font-semibold text-gray-900"},Amn={class:"text-sm text-gray-500"},Tmn={class:"space-y-3 mb-4"},$mn={class:"flex items-center justify-between"},Mmn={class:"flex items-center justify-between"},Emn={class:"flex items-center justify-between"},Dmn={class:"text-sm text-gray-900"},Rmn={class:"flex items-center justify-between"},Pmn={class:"text-sm text-gray-900"},Imn={class:"flex items-center justify-between"},Omn={class:"text-sm text-gray-900"},Lmn={class:"flex items-center justify-between pt-4 border-t border-gray-200"},Vmn={class:"flex space-x-2"},Nmn={class:"mt-6 flex items-center justify-between"},jmn={class:"text-sm text-gray-700"},Fmn={class:"flex items-center space-x-2"},Bmn={class:"text-sm text-gray-700"},zmn={key:0,class:"bg-white rounded-xl border border-gray-200 p-12 text-center"},Umn={class:"max-w-md mx-auto"},Hmn={class:"mx-auto h-24 w-24 text-gray-400 mb-4"},qmn={class:"text-gray-600 mb-6"},Wmn={class:"space-y-3"},Gmn={class:"space-y-4"},Ymn={class:"space-y-2"},Kmn={class:"flex items-center space-x-2"},Xmn={class:"flex items-center space-x-2"},Qmn={class:"flex items-center space-x-2"},Zmn={class:"flex items-center space-x-2"},Jmn={class:"flex items-center space-x-2"},egn={class:"space-y-4"},tgn={class:"text-sm text-gray-600"},ngn={class:"space-y-3"},rgn={class:"flex items-center space-x-2"},sgn={class:"space-y-4"},ign={class:"grid grid-cols-2 gap-4"},agn={class:"bg-purple-50 p-4 rounded-lg"},ogn={class:"text-2xl font-bold text-purple-600"},lgn={class:"bg-green-50 p-4 rounded-lg"},ugn={class:"text-2xl font-bold text-green-600"},dgn={class:"space-y-2"},cgn={class:"space-y-2 max-h-40 overflow-y-auto"},fgn={class:"text-sm"},pgn={class:"flex items-center space-x-2"},hgn={class:"w-20 bg-gray-200 rounded-full h-2"},mgn={class:"text-xs text-gray-600"},ggn={__name:"WorkingPapers",setup(t){const e=_n(),n=qo(),r=Q(!1),s=Q(!1),i=Q(!1),a=Q(null),o=Q(!1),l=Q([]),d=Q("preparation_date"),c=Q(1),f=Q(10),p=Q("table"),h=Q(!1),m=Q(!1),g=Q(!1),y=Q(""),x=Q(""),_=Q(""),k=Q(!1),w=Q({search:"",engagement:"",type:"",status:"",preparedBy:""}),S=Q({working_paper_id:"",wp_title:"",wp_reference_no:"",wp_type:"Planning Memo",engagement_reference:"",procedure_reference:"",prepared_by:"",preparation_date:"",reviewed_by:"",review_date:"",review_status:"Not Reviewed",work_performed:"",objective:"",scope:""}),C=Z(()=>n.workingPapers),A=Z(()=>{let Y=C.value;return w.value.search&&(Y=Y.filter(B=>{var ae,be;return((ae=B.wp_title)==null?void 0:ae.toLowerCase().includes(w.value.search.toLowerCase()))||((be=B.working_paper_id)==null?void 0:be.toLowerCase().includes(w.value.search.toLowerCase()))})),w.value.engagement&&(Y=Y.filter(B=>B.engagement_reference===w.value.engagement)),w.value.type&&(Y=Y.filter(B=>B.wp_type===w.value.type)),w.value.status&&(Y=Y.filter(B=>B.review_status===w.value.status)),w.value.preparedBy&&(Y=Y.filter(B=>B.prepared_by===w.value.preparedBy)),Y}),M=Z({get:()=>A.value.length>0&&l.value.length===A.value.length,set:Y=>{Y?l.value=A.value.map(B=>B.name):l.value=[]}}),E=Z(()=>{const Y=(c.value-1)*f.value,B=Y+f.value;return A.value.slice(Y,B)}),P=Z(()=>Math.ceil(A.value.length/f.value));Z(()=>C.value.length),Z(()=>C.value.filter(Y=>Y.review_status==="Review Complete").length);const I=Z(()=>C.value.filter(Y=>Y.review_status==="Under Review").length);Z(()=>C.value.filter(Y=>Y.review_status==="Revision Required").length),Z(()=>C.value.filter(Y=>Y.review_status==="Not Reviewed").length),Z(()=>{const Y=C.value.filter(ae=>ae.review_date&&ae.preparation_date);if(Y.length===0)return 0;const B=Y.reduce((ae,be)=>{const fe=new Date(be.preparation_date),me=new Date(be.review_date),ye=Math.abs(me-fe),Ee=Math.ceil(ye/(1e3*60*60*24));return ae+Ee},0);return Math.round(B/Y.length)}),Z(()=>{const Y=C.value.filter(ae=>ae.quality_score);if(Y.length===0)return 0;const B=Y.reduce((ae,be)=>ae+(be.quality_score||0),0);return Math.round(B/Y.length)});const F=Z(()=>{const Y={};return C.value.forEach(B=>{B.reviewed_by&&(Y[B.reviewed_by]||(Y[B.reviewed_by]={name:B.reviewed_by,count:0}),Y[B.reviewed_by].count++)}),Object.values(Y).map(B=>ze(ge({},B),{load:Math.min(100,Math.round(B.count/10*100))}))});Z(()=>{const Y=n.engagements;return[{label:"All Engagements",value:""},...Y.map(B=>({label:B.engagement_title,value:B.name}))]});const L=[{label:"All Status",value:""},{label:"Not Reviewed",value:"Not Reviewed"},{label:"Under Review",value:"Under Review"},{label:"Review Complete",value:"Review Complete"},{label:"Revision Required",value:"Revision Required"}];Z(()=>{const Y=new Set;return C.value.forEach(B=>{B.prepared_by&&Y.add(B.prepared_by)}),[{label:"All Preparers",value:""},...Array.from(Y).map(B=>({label:B,value:B}))]});const z=L.slice(1);Z(()=>[{label:"Select Procedure",value:""}]);const N=Z(()=>[{label:"Select User",value:""},{label:"John Doe",value:"john.doe@example.com"},{label:"Jane Smith",value:"jane.smith@example.com"}]),q=Y=>({"Planning Memo":"blue","Risk Assessment":"red",Walkthrough:"green","Test of Controls":"purple","Substantive Test":"orange","Analytical Review":"yellow","Data Analytics":"indigo",Summary:"gray",Other:"gray"})[Y]||"gray",V=Y=>({"Not Reviewed":"gray","Under Review":"yellow","Review Complete":"green","Revision Required":"red"})[Y]||"gray",O=Y=>{const B=n.engagements.find(ae=>ae.name===Y);return B?B.engagement_title:"Unknown Engagement"},X=Y=>Y?new Date(Y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",j=Y=>{e.push(`/working-papers/${Y.name}`)},U=Y=>{a.value=Y,i.value=!0,s.value=!0},G=Y=>{a.value=null,i.value=!1,S.value={working_paper_id:"",wp_title:`${Y.wp_title} (Copy)`,wp_reference_no:"",wp_type:Y.wp_type||"Planning Memo",engagement_reference:Y.engagement_reference||"",procedure_reference:Y.procedure_reference||"",prepared_by:"",preparation_date:new Date().toISOString().split("T")[0],reviewed_by:"",review_date:"",review_status:"Not Reviewed",work_performed:Y.work_performed||"",objective:Y.objective||"",scope:Y.scope||""},s.value=!0},ee=Y=>{confirm("Are you sure you want to delete this working paper?")&&n.fetchWorkingPapers()},ie=()=>{a.value=null,i.value=!1,s.value=!0},ne=Y=>ue(this,null,function*(){s.value=!1,a.value=null,i.value=!1,yield te()}),ce=Y=>ue(this,null,function*(){s.value=!1,a.value=null,i.value=!1,yield te()}),oe=Y=>{Y?l.value=A.value.map(B=>B.name):l.value=[]},re=Y=>{const B=l.value.indexOf(Y);B>-1?l.value.splice(B,1):l.value.push(Y)},te=()=>ue(this,null,function*(){r.value=!0;try{yield n.fetchWorkingPapers(),yield n.fetchEngagements()}catch(Y){console.error("Error loading data:",Y)}finally{r.value=!1}}),K=()=>ue(this,null,function*(){o.value=!0;try{console.log("Exporting working papers data...")}finally{o.value=!1}}),le=()=>ue(this,null,function*(){if(y.value)try{console.log("Applying template:",y.value,"to working papers:",l.value),g.value=!1,y.value="",l.value=[],yield te()}catch(Y){console.error("Error applying template:",Y)}}),H=()=>ue(this,null,function*(){try{x.value&&console.log("Updating status to:",x.value,"for working papers:",l.value),_.value&&console.log("Assigning reviewer:",_.value,"to working papers:",l.value),k.value&&confirm(`Are you sure you want to delete ${l.value.length} working papers? This action cannot be undone.`)&&console.log("Deleting working papers:",l.value),h.value=!1,x.value="",_.value="",k.value=!1,l.value=[],yield te()}catch(Y){console.error("Error applying bulk actions:",Y)}});return yt(()=>ue(this,null,function*(){r.value=!0;try{yield n.fetchEngagements(),yield n.fetchWorkingPapers()}catch(Y){console.error("Error loading data:",Y)}finally{r.value=!1}})),(Y,B)=>(T(),R("div",bhn,[u("div",xhn,[u("div",null,[u("div",_hn,[u("div",whn,[b(v(vt),{class:"h-6 w-6 text-purple-600"})]),B[34]||(B[34]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Working Papers"),u("p",{class:"text-gray-600 mt-1"}," Manage audit working papers and documentation with advanced tracking ")],-1))])]),u("div",khn,[u("div",Shn,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:K,loading:o.value},{prefix:D(()=>[b(v(xn),{class:"h-3.5 w-3.5"})]),default:D(()=>[B[35]||(B[35]=W(" Export ",-1))]),_:1},8,["loading"])]),u("div",Chn,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:B[0]||(B[0]=ae=>g.value=!0)},{prefix:D(()=>[b(v(vt),{class:"h-3.5 w-3.5"})]),default:D(()=>[B[36]||(B[36]=W(" Templates ",-1))]),_:1})]),u("div",Ahn,[b(v(J),{variant:"solid",theme:"gray",size:"sm",onClick:te,loading:r.value},{prefix:D(()=>[b(v(mn),{class:"h-3.5 w-3.5"})]),default:D(()=>[B[37]||(B[37]=W(" Refresh ",-1))]),_:1},8,["loading"])]),u("div",Thn,[b(v(J),{variant:"solid",theme:"purple",size:"sm",onClick:ie},{prefix:D(()=>[b(v(nt),{class:"h-3.5 w-3.5"})]),default:D(()=>[B[38]||(B[38]=W(" New Working Paper ",-1))]),_:1})])])]),b(yhn,{"working-papers":C.value},null,8,["working-papers"]),u("div",$hn,[u("div",Mhn,[u("div",Ehn,[u("div",Dhn,[b(v(En),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),we(u("input",{"onUpdate:modelValue":B[1]||(B[1]=ae=>w.value.search=ae),type:"text",placeholder:"Search working papers...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[Rt,w.value.search]])]),u("div",Rhn,[we(u("select",{"onUpdate:modelValue":B[2]||(B[2]=ae=>w.value.engagement=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[B[39]||(B[39]=u("option",{value:""},"All Engagements",-1)),(T(!0),R(xe,null,_e(v(n).engagements,ae=>(T(),R("option",{key:ae.name,value:ae.name},$(ae.engagement_title),9,Phn))),128))],512),[[vn,w.value.engagement]]),we(u("select",{"onUpdate:modelValue":B[3]||(B[3]=ae=>w.value.type=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...B[40]||(B[40]=[fr('<option value="">All Types</option><option value="Planning Memo">Planning Memo</option><option value="Risk Assessment">Risk Assessment</option><option value="Walkthrough">Walkthrough</option><option value="Test of Controls">Test of Controls</option><option value="Substantive Test">Substantive Test</option><option value="Analytical Review">Analytical Review</option><option value="Data Analytics">Data Analytics</option><option value="Summary">Summary</option><option value="Other">Other</option>',10)])],512),[[vn,w.value.type]]),we(u("select",{"onUpdate:modelValue":B[4]||(B[4]=ae=>w.value.status=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...B[41]||(B[41]=[fr('<option value="">All Status</option><option value="Not Reviewed">Not Reviewed</option><option value="Under Review">Under Review</option><option value="Review Complete">Review Complete</option><option value="Revision Required">Revision Required</option>',5)])],512),[[vn,w.value.status]]),we(u("select",{"onUpdate:modelValue":B[5]||(B[5]=ae=>w.value.preparedBy=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[B[42]||(B[42]=u("option",{value:""},"All Preparers",-1)),(T(!0),R(xe,null,_e(Array.from(new Set(C.value.map(ae=>ae.prepared_by).filter(Boolean))),ae=>(T(),R("option",{key:ae,value:ae},$(ae),9,Ihn))),128))],512),[[vn,w.value.preparedBy]]),we(u("select",{"onUpdate:modelValue":B[6]||(B[6]=ae=>w.value.reviewer=ae),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[B[43]||(B[43]=u("option",{value:""},"All Reviewers",-1)),(T(!0),R(xe,null,_e(Array.from(new Set(C.value.map(ae=>ae.reviewed_by).filter(Boolean))),ae=>(T(),R("option",{key:ae,value:ae},$(ae),9,Ohn))),128))],512),[[vn,w.value.reviewer]])])]),u("div",Lhn,[u("div",Vhn,[u("button",{onClick:B[7]||(B[7]=ae=>p.value="table"),class:pe(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors",p.value==="table"?"bg-white text-purple-700 shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(v(tR),{class:"h-4 w-4 inline mr-1"}),B[44]||(B[44]=W(" Table ",-1))],2),u("button",{onClick:B[8]||(B[8]=ae=>p.value="cards"),class:pe(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors",p.value==="cards"?"bg-white text-purple-700 shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(v(SY),{class:"h-4 w-4 inline mr-1"}),B[45]||(B[45]=W(" Cards ",-1))],2)]),b(v(J),{onClick:B[9]||(B[9]=ae=>Y.showTemplatesModal=!0),variant:"outline",class:"flex items-center gap-2"},{default:D(()=>[b(v(vt),{class:"h-4 w-4"}),B[46]||(B[46]=W(" Templates ",-1))]),_:1}),b(v(J),{onClick:B[10]||(B[10]=ae=>Y.showBulkActionsModal=!0),variant:"outline",class:"flex items-center gap-2",disabled:l.value.length===0},{default:D(()=>[b(v(Hc),{class:"h-4 w-4"}),B[47]||(B[47]=W(" Bulk Actions ",-1))]),_:1},8,["disabled"]),b(v(J),{onClick:B[11]||(B[11]=ae=>m.value=!0),variant:"solid",class:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700"},{default:D(()=>[b(v(hr),{class:"h-4 w-4"}),B[48]||(B[48]=W(" Capacity ",-1))]),_:1}),b(v(J),{onClick:ie,variant:"solid",class:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700"},{default:D(()=>[b(v(nt),{class:"h-4 w-4"}),B[49]||(B[49]=W(" New Paper ",-1))]),_:1})])])]),u("div",Nhn,[u("div",jhn,[u("div",Fhn,[u("div",Bhn,[b(v(St),{modelValue:M.value,"onUpdate:modelValue":oe},null,8,["modelValue"]),u("span",zhn,$(l.value.length)+" of "+$(A.value.length)+" selected ",1)]),u("div",Uhn,[b(v(J),{variant:"outline",size:"sm",onClick:B[12]||(B[12]=ae=>d.value=d.value==="preparation_date"?"wp_title":"preparation_date")},{default:D(()=>[b(v(Zu),{class:"h-4 w-4 mr-2"}),W(" Sort by "+$(d.value==="preparation_date"?"Title":"Date"),1)]),_:1})])])]),p.value==="table"?(T(),R("div",Hhn,[u("div",qhn,[u("table",Whn,[u("thead",Ghn,[u("tr",null,[u("th",Yhn,[b(v(St),{modelValue:M.value,"onUpdate:modelValue":oe},null,8,["modelValue"])]),B[50]||(B[50]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," WP ID ",-1)),B[51]||(B[51]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title ",-1)),B[52]||(B[52]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ",-1)),B[53]||(B[53]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Engagement ",-1)),B[54]||(B[54]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Prepared By ",-1)),B[55]||(B[55]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date ",-1)),B[56]||(B[56]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),B[57]||(B[57]=u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),u("tbody",Khn,[(T(!0),R(xe,null,_e(E.value,ae=>(T(),R("tr",{key:ae.name,class:pe(["hover:bg-gray-50 transition-colors",{"bg-purple-50":l.value.includes(ae.name)}])},[u("td",Xhn,[b(v(St),{modelValue:l.value.includes(ae.name),"onUpdate:modelValue":be=>re(ae.name)},null,8,["modelValue","onUpdate:modelValue"])]),u("td",Qhn,[u("div",Zhn,[u("div",Jhn,[u("div",emn,[b(v(vt),{class:"h-5 w-5 text-gray-600"})])]),u("div",tmn,[u("div",nmn,$(ae.working_paper_id),1)])])]),u("td",rmn,[u("div",smn,$(ae.wp_title||"Untitled"),1),u("div",imn,$(ae.wp_reference_no||"No reference"),1)]),u("td",amn,[b(v(De),{theme:q(ae.wp_type)},{default:D(()=>[W($(ae.wp_type),1)]),_:2},1032,["theme"])]),u("td",omn,$(O(ae.engagement_reference)),1),u("td",lmn,$(ae.prepared_by||"Unassigned"),1),u("td",umn,$(X(ae.preparation_date)),1),u("td",dmn,[b(v(De),{theme:V(ae.review_status)},{default:D(()=>[W($(ae.review_status),1)]),_:2},1032,["theme"])]),u("td",cmn,[u("div",fmn,[b(v(J),{variant:"ghost",size:"sm",onClick:be=>j(ae)},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:be=>U(ae)},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:be=>G(ae),theme:"blue"},{default:D(()=>[b(v(Yi),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:be=>ee(),theme:"red"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])],2))),128))])])]),u("div",pmn,[u("div",hmn,[u("div",mmn," Showing "+$((c.value-1)*f.value+1)+" to "+$(Math.min(c.value*f.value,A.value.length))+" of "+$(A.value.length)+" results ",1),u("div",gmn,[b(v(J),{variant:"outline",size:"sm",disabled:c.value===1,onClick:B[13]||(B[13]=ae=>c.value--)},{default:D(()=>[b(v(gr),{class:"h-4 w-4"}),B[58]||(B[58]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",vmn," Page "+$(c.value)+" of "+$(P.value),1),b(v(J),{variant:"outline",size:"sm",disabled:c.value===P.value,onClick:B[14]||(B[14]=ae=>c.value++)},{default:D(()=>[B[59]||(B[59]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])])):(T(),R("div",ymn,[u("div",bmn,[(T(!0),R(xe,null,_e(E.value,ae=>(T(),R("div",{key:ae.name,class:pe(["bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer",{"ring-2 ring-purple-500 bg-purple-50":l.value.includes(ae.name)}]),onClick:be=>re(ae.name)},[u("div",_mn,[u("div",wmn,[u("div",kmn,[u("div",Smn,[b(v(vt),{class:"h-6 w-6 text-purple-600"})])]),u("div",null,[u("h3",Cmn,$(ae.wp_title||"Untitled"),1),u("p",Amn,$(ae.working_paper_id),1)])]),b(v(St),{modelValue:l.value.includes(ae.name),"onUpdate:modelValue":be=>re(ae.name),onClick:B[15]||(B[15]=ut(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])]),u("div",Tmn,[u("div",$mn,[B[60]||(B[60]=u("span",{class:"text-sm text-gray-600"},"Type:",-1)),b(v(De),{theme:q(ae.wp_type)},{default:D(()=>[W($(ae.wp_type),1)]),_:2},1032,["theme"])]),u("div",Mmn,[B[61]||(B[61]=u("span",{class:"text-sm text-gray-600"},"Status:",-1)),b(v(De),{theme:V(ae.review_status)},{default:D(()=>[W($(ae.review_status),1)]),_:2},1032,["theme"])]),u("div",Emn,[B[62]||(B[62]=u("span",{class:"text-sm text-gray-600"},"Engagement:",-1)),u("span",Dmn,$(O(ae.engagement_reference)),1)]),u("div",Rmn,[B[63]||(B[63]=u("span",{class:"text-sm text-gray-600"},"Prepared By:",-1)),u("span",Pmn,$(ae.prepared_by||"Unassigned"),1)]),u("div",Imn,[B[64]||(B[64]=u("span",{class:"text-sm text-gray-600"},"Date:",-1)),u("span",Omn,$(X(ae.preparation_date)),1)])]),u("div",Lmn,[u("div",Vmn,[b(v(J),{variant:"ghost",size:"sm",onClick:ut(be=>j(ae),["stop"])},{default:D(()=>[b(v(lr),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(be=>U(ae),["stop"])},{default:D(()=>[b(v(yn),{class:"h-4 w-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(be=>G(ae),["stop"]),theme:"blue"},{default:D(()=>[b(v(Yi),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),b(v(J),{variant:"ghost",size:"sm",onClick:ut(be=>ee(),["stop"]),theme:"red"},{default:D(()=>[b(v(es),{class:"h-4 w-4"})]),_:1},8,["onClick"])])],10,xmn))),128))]),u("div",Nmn,[u("div",jmn," Showing "+$((c.value-1)*f.value+1)+" to "+$(Math.min(c.value*f.value,A.value.length))+" of "+$(A.value.length)+" results ",1),u("div",Fmn,[b(v(J),{variant:"outline",size:"sm",disabled:c.value===1,onClick:B[16]||(B[16]=ae=>c.value--)},{default:D(()=>[b(v(gr),{class:"h-4 w-4"}),B[65]||(B[65]=W(" Previous ",-1))]),_:1},8,["disabled"]),u("span",Bmn," Page "+$(c.value)+" of "+$(P.value),1),b(v(J),{variant:"outline",size:"sm",disabled:c.value===P.value,onClick:B[17]||(B[17]=ae=>c.value++)},{default:D(()=>[B[66]||(B[66]=W(" Next ",-1)),b(v(sr),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])]))]),A.value.length===0?(T(),R("div",zmn,[u("div",Umn,[u("div",Hmn,[b(v(vt),{class:"h-24 w-24"})]),B[69]||(B[69]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No working papers found",-1)),u("p",qmn,$(w.value.search||w.value.engagement||w.value.type||w.value.status?"Try adjusting your filters or search terms to find what you're looking for.":"Get started by creating your first working paper for audit documentation."),1),u("div",Wmn,[b(v(J),{onClick:ie,variant:"solid",class:"bg-purple-600 hover:bg-purple-700"},{default:D(()=>[b(v(nt),{class:"h-4 w-4 mr-2"}),B[67]||(B[67]=W(" Create Working Paper ",-1))]),_:1}),B[68]||(B[68]=u("div",{class:"text-sm text-gray-500"},[u("p",{class:"mb-1"},[W(" "),u("strong",null,"Quick Tips:")]),u("ul",{class:"text-left space-y-1"},[u("li",null," Use templates to standardize your documentation"),u("li",null," Link working papers to specific audit engagements"),u("li",null," Track review status to ensure quality control")])],-1))])])])):se("",!0),b(Hpn,{modelValue:s.value,"onUpdate:modelValue":B[18]||(B[18]=ae=>s.value=ae),"working-paper":a.value,onCreated:ne,onUpdated:ce,onCancelled:B[19]||(B[19]=ae=>s.value=!1)},null,8,["modelValue","working-paper"]),b(v(jt),{modelValue:g.value,"onUpdate:modelValue":B[26]||(B[26]=ae=>g.value=ae),options:{title:"Apply Template"}},{"body-content":D(()=>[u("div",Gmn,[B[75]||(B[75]=u("p",{class:"text-sm text-gray-600"}," Select a template to apply to the selected working papers: ",-1)),u("div",Ymn,[u("label",Kmn,[we(u("input",{type:"radio","onUpdate:modelValue":B[20]||(B[20]=ae=>y.value=ae),value:"planning-memo",class:"text-blue-600"},null,512),[[Js,y.value]]),B[70]||(B[70]=u("span",{class:"text-sm"},"Planning Memo Template",-1))]),u("label",Xmn,[we(u("input",{type:"radio","onUpdate:modelValue":B[21]||(B[21]=ae=>y.value=ae),value:"test-of-controls",class:"text-blue-600"},null,512),[[Js,y.value]]),B[71]||(B[71]=u("span",{class:"text-sm"},"Test of Controls Template",-1))]),u("label",Qmn,[we(u("input",{type:"radio","onUpdate:modelValue":B[22]||(B[22]=ae=>y.value=ae),value:"substantive-test",class:"text-blue-600"},null,512),[[Js,y.value]]),B[72]||(B[72]=u("span",{class:"text-sm"},"Substantive Test Template",-1))]),u("label",Zmn,[we(u("input",{type:"radio","onUpdate:modelValue":B[23]||(B[23]=ae=>y.value=ae),value:"analytical-review",class:"text-blue-600"},null,512),[[Js,y.value]]),B[73]||(B[73]=u("span",{class:"text-sm"},"Analytical Review Template",-1))]),u("label",Jmn,[we(u("input",{type:"radio","onUpdate:modelValue":B[24]||(B[24]=ae=>y.value=ae),value:"summary-memo",class:"text-blue-600"},null,512),[[Js,y.value]]),B[74]||(B[74]=u("span",{class:"text-sm"},"Summary Memo Template",-1))])])])]),actions:D(()=>[b(v(J),{variant:"ghost",onClick:B[25]||(B[25]=ae=>g.value=!1)},{default:D(()=>[...B[76]||(B[76]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:le,disabled:!y.value},{default:D(()=>[...B[77]||(B[77]=[W(" Apply Template ",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:h.value,"onUpdate:modelValue":B[31]||(B[31]=ae=>h.value=ae),options:{title:"Bulk Actions"}},{"body-content":D(()=>[u("div",egn,[u("p",tgn," Apply bulk action to "+$(l.value.length)+" selected working papers: ",1),u("div",ngn,[u("div",null,[B[78]||(B[78]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Update Status ",-1)),b(v(Qe),{modelValue:x.value,"onUpdate:modelValue":B[27]||(B[27]=ae=>x.value=ae),options:v(z)},null,8,["modelValue","options"])]),u("div",null,[B[79]||(B[79]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Assign Reviewer ",-1)),b(v(Qe),{modelValue:_.value,"onUpdate:modelValue":B[28]||(B[28]=ae=>_.value=ae),options:N.value},null,8,["modelValue","options"])]),u("div",rgn,[b(v(St),{modelValue:k.value,"onUpdate:modelValue":B[29]||(B[29]=ae=>k.value=ae)},null,8,["modelValue"]),B[80]||(B[80]=u("span",{class:"text-sm text-red-600"}," Delete selected working papers (this action cannot be undone) ",-1))])])])]),actions:D(()=>[b(v(J),{variant:"ghost",onClick:B[30]||(B[30]=ae=>h.value=!1)},{default:D(()=>[...B[81]||(B[81]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:H,disabled:!x.value&&!_.value&&!k.value},{default:D(()=>[...B[82]||(B[82]=[W(" Apply Changes ",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:m.value,"onUpdate:modelValue":B[33]||(B[33]=ae=>m.value=ae),options:{title:"Review Capacity Planning"}},{"body-content":D(()=>[u("div",sgn,[u("div",ign,[u("div",agn,[B[83]||(B[83]=u("h4",{class:"font-medium text-purple-900"},"Papers Under Review",-1)),u("p",ogn,$(I.value),1),B[84]||(B[84]=u("p",{class:"text-sm text-purple-700"},"Pending approval",-1))]),u("div",lgn,[B[85]||(B[85]=u("h4",{class:"font-medium text-green-900"},"Review Capacity",-1)),u("p",ugn,$(Math.max(0,50-I.value)),1),B[86]||(B[86]=u("p",{class:"text-sm text-green-700"},"Available slots",-1))])]),u("div",dgn,[B[87]||(B[87]=u("h4",{class:"font-medium"},"Reviewer Workload",-1)),u("div",cgn,[(T(!0),R(xe,null,_e(F.value,ae=>(T(),R("div",{key:ae.name,class:"flex justify-between items-center p-2 bg-gray-50 rounded"},[u("span",fgn,$(ae.name),1),u("div",pgn,[u("div",hgn,[u("div",{class:"bg-purple-600 h-2 rounded-full",style:rt({width:`${ae.load}%`})},null,4)]),u("span",mgn,$(ae.load)+"%",1)])]))),128))])])])]),actions:D(()=>[b(v(J),{variant:"solid",onClick:B[32]||(B[32]=ae=>m.value=!1)},{default:D(()=>[...B[88]||(B[88]=[W(" Close ",-1)])]),_:1})]),_:1},8,["modelValue"])]))}},vgn={class:"signoff-section"},ygn={class:"text-sm font-medium text-gray-700 mb-3"},bgn={class:"space-y-3"},xgn={class:"flex items-center gap-3"},_gn={key:0,class:"text-xs text-gray-500"},wgn={key:1,class:"text-xs text-gray-400"},kgn={class:"flex items-center gap-3"},Sgn={key:0,class:"text-xs text-gray-500"},Cgn={key:1,class:"text-xs text-gray-400"},Agn={class:"flex items-center gap-3"},Tgn={key:0,class:"text-xs text-gray-500"},$gn={key:1,class:"text-xs text-gray-400"},Mgn={class:"mt-4"},Egn={class:"flex items-center justify-between text-xs text-gray-500 mb-1"},Dgn={class:"w-full bg-gray-200 rounded-full h-2"},Rgn={__name:"SignoffSection",props:{signoffs:{type:Object,required:!0,default:()=>({team_signoff:!1,team_signoff_by:null,team_signoff_date:null,supervisor_signoff:!1,supervisor_signoff_by:null,supervisor_signoff_date:null,auditor_signoff:!1,auditor_signoff_by:null,auditor_signoff_date:null})},readonly:{type:Boolean,default:!1},title:{type:String,default:"Signoff Status"},signingOff:{type:String,default:null},userRoles:{type:Array,default:()=>[]}},emits:["signoff"],setup(t){const e=t,n=Z(()=>{let o=0;return e.signoffs.team_signoff&&o++,e.signoffs.supervisor_signoff&&o++,e.signoffs.auditor_signoff&&o++,o}),r=Z(()=>n.value===3?"bg-green-500":n.value>=1?"bg-yellow-500":"bg-gray-300");function s(o){return e.signoffs[`${o}_signoff`]?"border-green-200 bg-green-50":o==="team"&&!e.signoffs.team_signoff||o==="supervisor"&&e.signoffs.team_signoff&&!e.signoffs.supervisor_signoff||o==="auditor"&&e.signoffs.supervisor_signoff&&!e.signoffs.auditor_signoff?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-gray-50"}function i(o){return o==="team"?e.userRoles.includes("Counter")||e.userRoles.includes("Team Lead")||e.userRoles.includes("System Manager"):o==="supervisor"?e.userRoles.includes("Supervisor")||e.userRoles.includes("System Manager"):o==="auditor"?e.userRoles.includes("Internal Auditor")||e.userRoles.includes("Auditor")||e.userRoles.includes("System Manager"):!1}function a(o){return o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}return(o,l)=>(T(),R("div",vgn,[u("h4",ygn,$(t.title||"Signoff Status"),1),u("div",bgn,[u("div",{class:pe(["flex items-center justify-between p-3 rounded-lg border",s("team")])},[u("div",xgn,[u("div",{class:pe(["w-8 h-8 rounded-full flex items-center justify-center",t.signoffs.team_signoff?"bg-green-100":"bg-gray-100"])},[t.signoffs.team_signoff?(T(),he(v(Kt),{key:0,class:"w-5 h-5 text-green-600"})):(T(),he(v(QA),{key:1,class:"w-5 h-5 text-gray-400"}))],2),u("div",null,[l[3]||(l[3]=u("p",{class:"text-sm font-medium text-gray-900"},"Team Lead",-1)),t.signoffs.team_signoff?(T(),R("p",_gn,$(t.signoffs.team_signoff_by_name||t.signoffs.team_signoff_by)+"  "+$(a(t.signoffs.team_signoff_date)),1)):(T(),R("p",wgn,"Pending"))])]),!t.signoffs.team_signoff&&!t.readonly&&i("team")?(T(),he(v(J),{key:0,size:"sm",variant:"outline",onClick:l[0]||(l[0]=d=>o.$emit("signoff","team")),loading:t.signingOff==="team"},{default:D(()=>[...l[4]||(l[4]=[W(" Sign Off ",-1)])]),_:1},8,["loading"])):se("",!0)],2),u("div",{class:pe(["flex items-center justify-between p-3 rounded-lg border",s("supervisor")])},[u("div",kgn,[u("div",{class:pe(["w-8 h-8 rounded-full flex items-center justify-center",t.signoffs.supervisor_signoff?"bg-green-100":"bg-gray-100"])},[t.signoffs.supervisor_signoff?(T(),he(v(Kt),{key:0,class:"w-5 h-5 text-green-600"})):(T(),he(v(QA),{key:1,class:"w-5 h-5 text-gray-400"}))],2),u("div",null,[l[5]||(l[5]=u("p",{class:"text-sm font-medium text-gray-900"},"Supervisor",-1)),t.signoffs.supervisor_signoff?(T(),R("p",Sgn,$(t.signoffs.supervisor_signoff_by_name||t.signoffs.supervisor_signoff_by)+"  "+$(a(t.signoffs.supervisor_signoff_date)),1)):(T(),R("p",Cgn,$(t.signoffs.team_signoff?"Pending":"Awaiting Team Signoff"),1))])]),!t.signoffs.supervisor_signoff&&t.signoffs.team_signoff&&!t.readonly&&i("supervisor")?(T(),he(v(J),{key:0,size:"sm",variant:"outline",onClick:l[1]||(l[1]=d=>o.$emit("signoff","supervisor")),loading:t.signingOff==="supervisor"},{default:D(()=>[...l[6]||(l[6]=[W(" Sign Off ",-1)])]),_:1},8,["loading"])):se("",!0)],2),u("div",{class:pe(["flex items-center justify-between p-3 rounded-lg border",s("auditor")])},[u("div",Agn,[u("div",{class:pe(["w-8 h-8 rounded-full flex items-center justify-center",t.signoffs.auditor_signoff?"bg-green-100":"bg-gray-100"])},[t.signoffs.auditor_signoff?(T(),he(v(Kt),{key:0,class:"w-5 h-5 text-green-600"})):(T(),he(v(QA),{key:1,class:"w-5 h-5 text-gray-400"}))],2),u("div",null,[l[7]||(l[7]=u("p",{class:"text-sm font-medium text-gray-900"},"Auditor",-1)),t.signoffs.auditor_signoff?(T(),R("p",Tgn,$(t.signoffs.auditor_signoff_by_name||t.signoffs.auditor_signoff_by)+"  "+$(a(t.signoffs.auditor_signoff_date)),1)):(T(),R("p",$gn,$(t.signoffs.supervisor_signoff?"Pending":"Awaiting Supervisor Signoff"),1))])]),!t.signoffs.auditor_signoff&&t.signoffs.supervisor_signoff&&!t.readonly&&i("auditor")?(T(),he(v(J),{key:0,size:"sm",variant:"outline",onClick:l[2]||(l[2]=d=>o.$emit("signoff","auditor")),loading:t.signingOff==="auditor"},{default:D(()=>[...l[8]||(l[8]=[W(" Sign Off ",-1)])]),_:1},8,["loading"])):se("",!0)],2)]),u("div",Mgn,[u("div",Egn,[l[9]||(l[9]=u("span",null,"Signoff Progress",-1)),u("span",null,$(n.value)+"/3",1)]),u("div",Dgn,[u("div",{class:pe(["h-2 rounded-full transition-all duration-300",r.value]),style:rt({width:`${n.value/3*100}%`})},null,6)])])]))}},Pgn=It(Rgn,[["__scopeId","data-v-f56ce7cf"]]),Ign={class:"team-member-table"},Ogn={class:"flex items-center justify-between mb-3"},Lgn={class:"text-sm font-medium text-gray-700"},Vgn={key:0,class:"text-center py-6 text-gray-500 bg-gray-50 rounded-lg"},Ngn={key:1,class:"space-y-2"},jgn={class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},Fgn={class:"text-sm font-medium text-blue-700"},Bgn={class:"flex-1 min-w-0"},zgn={key:1},Ugn={class:"text-sm font-medium text-gray-900 truncate"},Hgn={class:"w-32"},qgn={class:"flex items-center gap-1"},Wgn=["checked","disabled","onChange"],Ggn={key:2,class:"mt-3 flex items-center gap-4 text-xs text-gray-500"},Ygn={key:0},Kgn={key:1},fle={__name:"TeamMemberTable",props:{modelValue:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!1},title:{type:String,default:"Team Members"},roleOptions:{type:Array,default:()=>[{label:"Counter",value:"Counter"},{label:"Verifier",value:"Verifier"},{label:"Supervisor",value:"Supervisor"},{label:"Auditor",value:"Auditor"}]}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.modelValue||[],set:m=>r("update:modelValue",m)}),i=Q([]);yt(()=>ue(this,null,function*(){yield a()}));function a(){return ue(this,null,function*(){try{const m=yield Ke("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});i.value=m.map(g=>({label:g.full_name||g.name,value:g.name}))}catch(m){console.error("Error loading users:",m)}})}function o(){const m=[...s.value,{user:"",user_name:"",role:"Counter",is_lead:0}];r("update:modelValue",m)}function l(m){const g=s.value.filter((y,x)=>x!==m);r("update:modelValue",g)}function d(m,g){const y=i.value.find(x=>x.value===g);if(y){const x=[...s.value];x[m]=ze(ge({},x[m]),{user:g,user_name:y.label}),r("update:modelValue",x)}}function c(m){return m?m.split(" ").map(g=>g[0]).join("").toUpperCase().slice(0,2):"?"}function f(m){return{Counter:"blue",Verifier:"green",Supervisor:"yellow",Auditor:"purple"}[m]||"gray"}const p=Z(()=>s.value.filter(m=>m.is_lead).length),h=Z(()=>{const m={};return s.value.forEach(g=>{g.role&&(m[g.role]=(m[g.role]||0)+1)}),Object.entries(m).map(([g,y])=>`${y} ${g}${y!==1?"s":""}`).join(", ")});return(m,g)=>(T(),R("div",Ign,[u("div",Ogn,[u("h4",Lgn,$(t.title||"Team Members"),1),t.readonly?se("",!0):(T(),he(v(J),{key:0,size:"sm",variant:"outline",onClick:o},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-1"}),g[0]||(g[0]=W(" Add Member ",-1))]),_:1}))]),s.value.length===0?(T(),R("div",Vgn,[b(v(Jr),{class:"w-8 h-8 mx-auto mb-2 text-gray-300"}),g[2]||(g[2]=u("p",{class:"text-sm"},"No team members assigned",-1)),t.readonly?se("",!0):(T(),he(v(J),{key:0,size:"sm",variant:"ghost",class:"mt-2",onClick:o},{default:D(()=>[...g[1]||(g[1]=[W(" Add First Member ",-1)])]),_:1}))])):(T(),R("div",Ngn,[(T(!0),R(xe,null,_e(s.value,(y,x)=>(T(),R("div",{key:x,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg group"},[u("div",jgn,[u("span",Fgn,$(c(y.user_name||y.user)),1)]),u("div",Bgn,[t.readonly?(T(),R("div",zgn,[u("p",Ugn,$(y.user_name||y.user),1)])):(T(),he(v(ve),{key:0,type:"autocomplete",options:i.value,modelValue:y.user,"onUpdate:modelValue":_=>y.user=_,placeholder:"Select user...",onChange:_=>d(x,_)},null,8,["options","modelValue","onUpdate:modelValue","onChange"]))]),u("div",Hgn,[t.readonly?(T(),he(v(De),{key:1,variant:f(y.role)},{default:D(()=>[W($(y.role),1)]),_:2},1032,["variant"])):(T(),he(v(ve),{key:0,type:"select",options:t.roleOptions,modelValue:y.role,"onUpdate:modelValue":_=>y.role=_,placeholder:"Role"},null,8,["options","modelValue","onUpdate:modelValue"]))]),u("div",qgn,[u("input",{type:"checkbox",checked:y.is_lead,disabled:t.readonly,onChange:_=>y.is_lead=_.target.checked?1:0,class:"h-4 w-4 text-blue-600 rounded border-gray-300"},null,40,Wgn),g[3]||(g[3]=u("span",{class:"text-xs text-gray-500"},"Lead",-1))]),t.readonly?se("",!0):(T(),he(v(J),{key:0,size:"sm",variant:"ghost",class:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:_=>l(x)},{default:D(()=>[b(v(is),{class:"w-4 h-4 text-red-500"})]),_:1},8,["onClick"]))]))),128))])),s.value.length>0?(T(),R("div",Ggn,[u("span",null,$(s.value.length)+" member"+$(s.value.length!==1?"s":""),1),p.value>0?(T(),R("span",Ygn,$(p.value)+" lead"+$(p.value!==1?"s":""),1)):se("",!0),h.value?(T(),R("span",Kgn,$(h.value),1)):se("",!0)])):se("",!0)]))}},Xgn={class:"physical-count-table"},Qgn={class:"flex items-center justify-between mb-3"},Zgn={class:"text-sm font-medium text-gray-700"},Jgn={class:"text-xs text-gray-500"},evn={class:"flex items-center gap-2"},tvn={key:0,class:"grid grid-cols-4 gap-3 mb-4"},nvn={class:"bg-blue-50 rounded-lg p-3"},rvn={class:"text-lg font-bold text-blue-700"},svn={class:"bg-green-50 rounded-lg p-3"},ivn={class:"text-lg font-bold text-green-700"},avn={class:"bg-yellow-50 rounded-lg p-3"},ovn={class:"text-lg font-bold text-yellow-700"},lvn={class:"bg-red-50 rounded-lg p-3"},uvn={class:"text-lg font-bold text-red-700"},dvn={key:1,class:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg"},cvn={key:2,class:"overflow-x-auto border rounded-lg"},fvn={class:"min-w-full divide-y divide-gray-200"},pvn={class:"bg-gray-50"},hvn={key:0,class:"px-3 py-2 w-10"},mvn={class:"bg-white divide-y divide-gray-200"},gvn={class:"px-3 py-2 text-sm text-gray-500"},vvn={class:"px-3 py-2"},yvn=["onUpdate:modelValue"],bvn={key:1,class:"text-sm font-medium text-gray-900"},xvn={class:"px-3 py-2"},_vn=["onUpdate:modelValue"],wvn={key:1,class:"text-sm text-gray-600"},kvn={class:"px-3 py-2 text-right"},Svn=["onUpdate:modelValue","onChange"],Cvn={key:1,class:"text-sm text-gray-900"},Avn={class:"px-3 py-2 text-right"},Tvn=["onUpdate:modelValue","onChange"],$vn={key:1,class:"text-sm font-medium text-gray-900"},Mvn={class:"px-3 py-2 text-right"},Evn={class:"px-3 py-2 text-right"},Dvn={class:"px-3 py-2 text-center"},Rvn=["onUpdate:modelValue"],Pvn={class:"px-3 py-2"},Ivn=["onUpdate:modelValue"],Ovn={key:1,class:"text-sm text-gray-600"},Lvn={key:0,class:"px-3 py-2 text-center"},Vvn={key:3,class:"mt-3 flex items-center justify-end gap-6 text-sm"},ple={__name:"PhysicalCountTable",props:{modelValue:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!1},title:{type:String,default:"Count Items"},materialityThreshold:{type:Object,default:()=>({qty:0,amount:0,percent:5})},valuationRates:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,s=Z({get:()=>n.modelValue||[],set:S=>r("update:modelValue",S)}),i=Z(()=>s.value.filter(S=>S.variance_qty&&S.variance_qty!==0).length),a=Z(()=>s.value.filter(S=>!S.variance_qty||S.variance_qty===0).length),o=Z(()=>s.value.filter(S=>S.is_material).length),l=Z(()=>s.value.reduce((S,C)=>S+(C.variance_qty||0),0)),d=Z(()=>s.value.reduce((S,C)=>S+(C.variance_value||0),0));function c(){const S=[...s.value,{item_code:"",item_description:"",barcode:"",batch_no:"",serial_no:"",system_qty:0,counted_qty:0,variance_qty:0,variance_percent:0,variance_value:0,is_material:!1,condition:"",photo_attachment:"",remarks:""}];r("update:modelValue",S)}function f(S){const C=s.value.filter((A,M)=>M!==S);r("update:modelValue",C)}function p(S){const C=[...s.value],A=C[S],M=A.system_qty||0,E=A.counted_qty||0;A.variance_qty=E-M,M!==0?A.variance_percent=(E-M)/M*100:A.variance_percent=E!==0?100:0;const P=n.valuationRates[A.item_code]||0;A.variance_value=A.variance_qty*P,A.is_material=m(A),r("update:modelValue",C)}function h(){s.value.forEach((S,C)=>p(C))}function m(S){const{qty:C,amount:A,percent:M}=n.materialityThreshold;return!!(C&&Math.abs(S.variance_qty||0)>=C||A&&Math.abs(S.variance_value||0)>=A||M&&Math.abs(S.variance_percent||0)>=M)}function g(S){return S.is_material?"bg-red-50":S.variance_qty&&S.variance_qty!==0?"bg-yellow-50":""}function y(S){return!S||S===0?"text-gray-600":S>0?"text-green-600":"text-red-600"}function x(S){return{Good:"green",Damaged:"red",Expired:"red",Misplaced:"yellow","Zero Stock":"gray","Not Found":"red"}[S]||"gray"}function _(S){return S==null?"-":new Intl.NumberFormat().format(S)}function k(S){return S==null?"-":`${S.toFixed(1)}%`}function w(S){return S==null?"-":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(S)}return(S,C)=>(T(),R("div",Xgn,[u("div",Qgn,[u("div",null,[u("h4",Zgn,$(t.title||"Count Items"),1),u("p",Jgn,$(s.value.length)+" items  "+$(i.value)+" with variance",1)]),u("div",evn,[t.readonly?se("",!0):(T(),he(v(J),{key:0,size:"sm",variant:"outline",onClick:c},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-1"}),C[0]||(C[0]=W(" Add Item ",-1))]),_:1})),!t.readonly&&s.value.length>0?(T(),he(v(J),{key:1,size:"sm",variant:"outline",onClick:h},{default:D(()=>[b(v(rb),{class:"w-4 h-4 mr-1"}),C[1]||(C[1]=W(" Calculate Variances ",-1))]),_:1})):se("",!0)])]),s.value.length>0?(T(),R("div",tvn,[u("div",nvn,[C[2]||(C[2]=u("p",{class:"text-xs text-blue-600"},"Total Items",-1)),u("p",rvn,$(s.value.length),1)]),u("div",svn,[C[3]||(C[3]=u("p",{class:"text-xs text-green-600"},"No Variance",-1)),u("p",ivn,$(a.value),1)]),u("div",avn,[C[4]||(C[4]=u("p",{class:"text-xs text-yellow-600"},"With Variance",-1)),u("p",ovn,$(i.value),1)]),u("div",lvn,[C[5]||(C[5]=u("p",{class:"text-xs text-red-600"},"Material Variance",-1)),u("p",uvn,$(o.value),1)])])):se("",!0),s.value.length===0?(T(),R("div",dvn,[b(v(Qa),{class:"w-10 h-10 mx-auto mb-2 text-gray-300"}),C[7]||(C[7]=u("p",{class:"text-sm"},"No count items added",-1)),t.readonly?se("",!0):(T(),he(v(J),{key:0,size:"sm",variant:"ghost",class:"mt-2",onClick:c},{default:D(()=>[...C[6]||(C[6]=[W(" Add First Item ",-1)])]),_:1}))])):(T(),R("div",cvn,[u("table",fvn,[u("thead",pvn,[u("tr",null,[C[8]||(C[8]=u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-8"},"#",-1)),C[9]||(C[9]=u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Code",-1)),C[10]||(C[10]=u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description",-1)),C[11]||(C[11]=u("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"System Qty",-1)),C[12]||(C[12]=u("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"Counted Qty",-1)),C[13]||(C[13]=u("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"Variance",-1)),C[14]||(C[14]=u("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-20"},"Var %",-1)),C[15]||(C[15]=u("th",{class:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"Condition",-1)),C[16]||(C[16]=u("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Remarks",-1)),t.readonly?se("",!0):(T(),R("th",hvn))])]),u("tbody",mvn,[(T(!0),R(xe,null,_e(s.value,(A,M)=>(T(),R("tr",{key:M,class:pe(g(A))},[u("td",gvn,$(M+1),1),u("td",vvn,[t.readonly?(T(),R("span",bvn,$(A.item_code),1)):we((T(),R("input",{key:0,type:"text","onUpdate:modelValue":E=>A.item_code=E,class:"w-full px-2 py-1 text-sm border rounded focus:ring-1 focus:ring-blue-500",placeholder:"Item code"},null,8,yvn)),[[Rt,A.item_code]])]),u("td",xvn,[t.readonly?(T(),R("span",wvn,$(A.item_description),1)):we((T(),R("input",{key:0,type:"text","onUpdate:modelValue":E=>A.item_description=E,class:"w-full px-2 py-1 text-sm border rounded focus:ring-1 focus:ring-blue-500",placeholder:"Description"},null,8,_vn)),[[Rt,A.item_description]])]),u("td",kvn,[t.readonly?(T(),R("span",Cvn,$(_(A.system_qty)),1)):we((T(),R("input",{key:0,type:"number","onUpdate:modelValue":E=>A.system_qty=E,class:"w-full px-2 py-1 text-sm text-right border rounded focus:ring-1 focus:ring-blue-500",onChange:E=>p(M)},null,40,Svn)),[[Rt,A.system_qty,void 0,{number:!0}]])]),u("td",Avn,[t.readonly?(T(),R("span",$vn,$(_(A.counted_qty)),1)):we((T(),R("input",{key:0,type:"number","onUpdate:modelValue":E=>A.counted_qty=E,class:"w-full px-2 py-1 text-sm text-right border rounded focus:ring-1 focus:ring-blue-500 font-medium",onChange:E=>p(M)},null,40,Tvn)),[[Rt,A.counted_qty,void 0,{number:!0}]])]),u("td",Mvn,[u("span",{class:pe(["text-sm font-medium",y(A.variance_qty)])},$(_(A.variance_qty)),3)]),u("td",Evn,[u("span",{class:pe(["text-sm",y(A.variance_percent)])},$(k(A.variance_percent)),3),A.is_material?(T(),he(v(rn),{key:0,class:"inline w-4 h-4 ml-1 text-red-500",title:"Material Variance"})):se("",!0)]),u("td",Dvn,[t.readonly?A.condition?(T(),he(v(De),{key:1,variant:x(A.condition),size:"sm"},{default:D(()=>[W($(A.condition),1)]),_:2},1032,["variant"])):se("",!0):we((T(),R("select",{key:0,"onUpdate:modelValue":E=>A.condition=E,class:"px-2 py-1 text-xs border rounded focus:ring-1 focus:ring-blue-500"},[...C[17]||(C[17]=[fr('<option value="">-</option><option value="Good">Good</option><option value="Damaged">Damaged</option><option value="Expired">Expired</option><option value="Misplaced">Misplaced</option><option value="Zero Stock">Zero Stock</option><option value="Not Found">Not Found</option>',7)])],8,Rvn)),[[vn,A.condition]])]),u("td",Pvn,[t.readonly?(T(),R("span",Ovn,$(A.remarks),1)):we((T(),R("input",{key:0,type:"text","onUpdate:modelValue":E=>A.remarks=E,class:"w-full px-2 py-1 text-sm border rounded focus:ring-1 focus:ring-blue-500",placeholder:"Remarks"},null,8,Ivn)),[[Rt,A.remarks]])]),t.readonly?se("",!0):(T(),R("td",Lvn,[b(v(J),{size:"sm",variant:"ghost",onClick:E=>f(M)},{default:D(()=>[b(v(is),{class:"w-4 h-4 text-red-500"})]),_:1},8,["onClick"])]))],2))),128))])])])),s.value.length>0?(T(),R("div",Vvn,[u("div",null,[C[18]||(C[18]=u("span",{class:"text-gray-500"},"Total Variance Qty:",-1)),u("span",{class:pe(["ml-2 font-medium",y(l.value)])},$(_(l.value)),3)]),u("div",null,[C[19]||(C[19]=u("span",{class:"text-gray-500"},"Total Variance Value:",-1)),u("span",{class:pe(["ml-2 font-medium",y(d.value)])},$(w(d.value)),3)])])):se("",!0)]))}},tu=Yl("inventoryAudit",{state:()=>({items:[],activeItem:null,itemsLoading:!1,itemsTotalCount:0,itemsPage:1,itemsPageSize:50,plans:[],activePlan:null,plansLoading:!1,plansTotalCount:0,plansPage:1,plansPageSize:50,sessions:[],activeSession:null,sessionsLoading:!1,sessionsTotalCount:0,sessionsPage:1,sessionsPageSize:50,varianceCases:[],activeVarianceCase:null,varianceCasesLoading:!1,varianceCasesTotalCount:0,varianceCasesPage:1,varianceCasesPageSize:50,returnAudits:[],activeReturnAudit:null,returnAuditsLoading:!1,returnAuditsTotalCount:0,returnAuditsPage:1,returnAuditsPageSize:50,issues:[],activeIssue:null,issuesLoading:!1,issuesTotalCount:0,issuesPage:1,issuesPageSize:50,scorecards:[],activeScorecard:null,scorecardsLoading:!1,scorecardHistory:[],dashboardStats:{plans:{total:0,active:0,completed:0},sessions:{total:0,in_progress:0},variance_cases:{total:0,open:0,sla_breached:0},issues:{total:0,open:0},items:{total:0,active:0},avg_compliance_score:0},dashboardLoading:!1,filters:{plans:{},sessions:{},varianceCases:{},returnAudits:{},issues:{},items:{}},currentView:"dashboard",isLoading:!1,error:null,auditPeriodOptions:[{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"},{value:"Ad Hoc",label:"Ad Hoc"}],auditScopeOptions:[{value:"Full Warehouse",label:"Full Warehouse"},{value:"Category",label:"Category"},{value:"ABC Class",label:"ABC Class"},{value:"High Value Items",label:"High Value Items"},{value:"Fast Moving Items",label:"Fast Moving Items"},{value:"Random Sample",label:"Random Sample"}],countTypeOptions:[{value:"Full Physical Count",label:"Full Physical Count"},{value:"Cycle Count",label:"Cycle Count"},{value:"Random Sample",label:"Random Sample"},{value:"Spot Check",label:"Spot Check"}],rootCauseOptions:[{value:"Miscount",label:"Miscount"},{value:"Theft",label:"Theft"},{value:"Misplacement",label:"Misplacement"},{value:"Wrong UOM",label:"Wrong UOM"},{value:"Unrecorded Sales",label:"Unrecorded Sales"},{value:"Unrecorded Receiving",label:"Unrecorded Receiving"},{value:"Wrong Posting",label:"Wrong Posting"},{value:"Expired/Damaged Stock",label:"Expired/Damaged Stock"},{value:"System Error",label:"System Error"},{value:"Data Entry Error",label:"Data Entry Error"}],issueTypeOptions:[{value:"Count Discrepancy",label:"Count Discrepancy"},{value:"Missing Documentation",label:"Missing Documentation"},{value:"Process Violation",label:"Process Violation"},{value:"System Access Issue",label:"System Access Issue"},{value:"Equipment Failure",label:"Equipment Failure"},{value:"Staff Unavailability",label:"Staff Unavailability"},{value:"Location Access",label:"Location Access"},{value:"Item Identification",label:"Item Identification"},{value:"Condition Issue",label:"Condition Issue"},{value:"Other",label:"Other"}],statusColors:{Planned:"blue","In Progress":"yellow",Completed:"green","On Hold":"gray",Cancelled:"red",New:"blue","Under Investigation":"yellow","Resolution Proposed":"orange",Resolved:"green",Closed:"gray",Open:"yellow","Pending Approval":"orange",Approved:"green",Rejected:"red"},gradeColors:{A:"green",B:"blue",C:"yellow",D:"orange",F:"red"}}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.name===e),getActivePlans:t=>t.plans.filter(e=>["Planned","In Progress"].includes(e.status)),getSessionById:t=>e=>t.sessions.find(n=>n.name===e),getSessionsByPlan:t=>e=>t.sessions.filter(n=>n.audit_plan===e),getPendingSignoffSessions:t=>t.sessions.filter(e=>e.status==="Completed"&&(!e.team_signoff||!e.supervisor_signoff||!e.auditor_signoff)),getVarianceCaseById:t=>e=>t.varianceCases.find(n=>n.name===e),getOpenVarianceCases:t=>t.varianceCases.filter(e=>["New","Under Investigation","Resolution Proposed"].includes(e.status)),getSlaBreachedCases:t=>t.varianceCases.filter(e=>e.is_sla_breached),getIssueById:t=>e=>t.issues.find(n=>n.name===e),getOpenIssues:t=>t.issues.filter(e=>["Open","In Progress"].includes(e.status)),getScorecardById:t=>e=>t.scorecards.find(n=>n.name===e),getScorecardByPlan:t=>e=>t.scorecards.find(n=>n.audit_plan===e),getComplianceOverview:t=>{const e=t.scorecards;if(e.length===0)return{avgScore:0,gradeDistribution:{}};const n=e.reduce((s,i)=>s+(i.overall_compliance_score||0),0)/e.length,r=e.reduce((s,i)=>{const a=i.grade||"N/A";return s[a]=(s[a]||0)+1,s},{});return{avgScore:Math.round(n),gradeDistribution:r}}},actions:{loadDashboardStats(){return ue(this,null,function*(){this.dashboardLoading=!0,this.error=null;try{const t=yield Ke("mkaguzi.api.inventory_audit.get_inventory_dashboard_stats");this.dashboardStats=t}catch(t){this.error=`Failed to load dashboard stats: ${t.message}`,console.error("Error loading dashboard stats:",t)}finally{this.dashboardLoading=!1}})},loadItems(){return ue(this,arguments,function*(t={},e=1,n=50){this.itemsLoading=!0,this.error=null;try{const r=yield Ke("mkaguzi.api.inventory_audit.get_inventory_items",{filters:JSON.stringify(t),page:e,page_size:n});this.items=r.items,this.itemsTotalCount=r.total_count,this.itemsPage=r.page,this.itemsPageSize=r.page_size,this.filters.items=t}catch(r){this.error=`Failed to load items: ${r.message}`,console.error("Error loading items:",r)}finally{this.itemsLoading=!1}})},getItemImportTemplate(){return ue(this,null,function*(){try{return yield Ke("mkaguzi.api.inventory_audit.get_item_import_template")}catch(t){throw this.error=`Failed to get import template: ${t.message}`,t}})},importItemsFromCSV(t){return ue(this,null,function*(){try{const e=yield Ke("mkaguzi.api.inventory_audit.import_items_from_csv",{file_content:JSON.stringify({content:t})});return yield this.loadItems(this.filters.items),e}catch(e){throw this.error=`Failed to import items: ${e.message}`,e}})},loadPlans(){return ue(this,arguments,function*(t={},e=1,n=50){this.plansLoading=!0,this.error=null;try{const r=yield Ke("mkaguzi.api.inventory_audit.get_inventory_audit_plans",{filters:JSON.stringify(t),page:e,page_size:n});this.plans=r.plans,this.plansTotalCount=r.total_count,this.plansPage=r.page,this.plansPageSize=r.page_size,this.filters.plans=t}catch(r){this.error=`Failed to load plans: ${r.message}`,console.error("Error loading plans:",r)}finally{this.plansLoading=!1}})},createPlan(t){return ue(this,null,function*(){try{const e=yield Ke("frappe.client.insert",{doc:ge({doctype:"Inventory Audit Plan"},t)});return yield this.loadPlans(this.filters.plans),e}catch(e){throw this.error=`Failed to create plan: ${e.message}`,e}})},updatePlan(t,e){return ue(this,null,function*(){try{yield Ke("frappe.client.set_value",{doctype:"Inventory Audit Plan",name:t,fieldname:e}),yield this.loadPlans(this.filters.plans)}catch(n){throw this.error=`Failed to update plan: ${n.message}`,n}})},loadPlanDetail(t){return ue(this,null,function*(){this.plansLoading=!0,this.error=null;try{const e=yield Ke("frappe.client.get",{doctype:"Inventory Audit Plan",name:t});return this.activePlan=e,e}catch(e){throw this.error=`Failed to load plan: ${e.message}`,console.error("Error loading plan detail:",e),e}finally{this.plansLoading=!1}})},getSessionsByPlanId(t){return ue(this,null,function*(){try{return yield Ke("frappe.client.get_list",{doctype:"Stock Take Session",filters:{audit_plan:t},fields:["name","session_name","session_type","status","scheduled_date","warehouse"],order_by:"scheduled_date desc"})}catch(e){return console.error("Error loading sessions for plan:",e),[]}})},loadSessions(){return ue(this,arguments,function*(t={},e=1,n=50){this.sessionsLoading=!0,this.error=null;try{const r=yield Ke("mkaguzi.api.inventory_audit.get_stock_take_sessions",{filters:JSON.stringify(t),page:e,page_size:n});this.sessions=r.sessions,this.sessionsTotalCount=r.total_count,this.sessionsPage=r.page,this.sessionsPageSize=r.page_size,this.filters.sessions=t}catch(r){this.error=`Failed to load sessions: ${r.message}`,console.error("Error loading sessions:",r)}finally{this.sessionsLoading=!1}})},createSession(t){return ue(this,null,function*(){try{const e=yield Ke("frappe.client.insert",{doc:ge({doctype:"Stock Take Session"},t)});return yield this.loadSessions(this.filters.sessions),e}catch(e){throw this.error=`Failed to create session: ${e.message}`,e}})},calculateVariance(t){return ue(this,null,function*(){try{const e=yield Ke("mkaguzi.api.inventory_audit.calculate_count_variance",{session_name:t});return yield this.loadSessions(this.filters.sessions),e}catch(e){throw this.error=`Failed to calculate variance: ${e.message}`,e}})},loadSessionDetail(t){return ue(this,null,function*(){this.sessionsLoading=!0,this.error=null;try{const e=yield Ke("frappe.client.get",{doctype:"Stock Take Session",name:t});return this.activeSession=e,e}catch(e){throw this.error=`Failed to load session: ${e.message}`,console.error("Error loading session detail:",e),e}finally{this.sessionsLoading=!1}})},getVarianceCasesBySession(t){return ue(this,null,function*(){try{return yield Ke("frappe.client.get_list",{doctype:"Inventory Variance Case",filters:{stock_take_session:t},fields:["name","item_code","item_name","status","variance_qty","variance_value","priority"]})}catch(e){return console.error("Error loading variance cases for session:",e),[]}})},loadVarianceCases(){return ue(this,arguments,function*(t={},e=1,n=50){this.varianceCasesLoading=!0,this.error=null;try{const r=yield Ke("mkaguzi.api.inventory_audit.get_variance_cases",{filters:JSON.stringify(t),page:e,page_size:n});this.varianceCases=r.cases,this.varianceCasesTotalCount=r.total_count,this.varianceCasesPage=r.page,this.varianceCasesPageSize=r.page_size,this.filters.varianceCases=t}catch(r){this.error=`Failed to load variance cases: ${r.message}`,console.error("Error loading variance cases:",r)}finally{this.varianceCasesLoading=!1}})},updateVarianceCase(t,e){return ue(this,null,function*(){try{yield Ke("frappe.client.set_value",{doctype:"Variance Reconciliation Case",name:t,fieldname:e}),yield this.loadVarianceCases(this.filters.varianceCases)}catch(n){throw this.error=`Failed to update variance case: ${n.message}`,n}})},loadVarianceCaseDetail(t){return ue(this,null,function*(){this.varianceCasesLoading=!0,this.error=null;try{const e=yield Ke("frappe.client.get",{doctype:"Inventory Variance Case",name:t});return this.activeVarianceCase=e,e}catch(e){throw this.error=`Failed to load variance case: ${e.message}`,console.error("Error loading variance case detail:",e),e}finally{this.varianceCasesLoading=!1}})},createVarianceCaseFromSession(t,e){return ue(this,null,function*(){try{return yield Ke("mkaguzi.api.inventory_audit.create_variance_case_from_count",{session_name:t,count_item_idx:e})}catch(n){throw this.error=`Failed to create variance case: ${n.message}`,n}})},loadStockTakeAudits(){return ue(this,arguments,function*(t={},e=1,n=50){this.returnAuditsLoading=!0,this.error=null;try{const r=yield Ke("mkaguzi.api.inventory_audit.get_stock_take_audits",{filters:JSON.stringify(t),page:e,page_size:n});this.returnAudits=r.audits,this.returnAuditsTotalCount=r.total_count,this.returnAuditsPage=r.page,this.returnAuditsPageSize=r.page_size,this.filters.returnAudits=t}catch(r){this.error=`Failed to load stock take audits: ${r.message}`,console.error("Error loading stock take audits:",r)}finally{this.returnAuditsLoading=!1}})},createStockTakeAudit(t){return ue(this,null,function*(){try{const e=yield Ke("frappe.client.insert",{doc:ge({doctype:"Stock Take Audit"},t)});return yield this.loadStockTakeAudits(this.filters.returnAudits),e}catch(e){throw this.error=`Failed to create stock take audit: ${e.message}`,e}})},loadIssues(){return ue(this,arguments,function*(t={},e=1,n=50){this.issuesLoading=!0,this.error=null;try{const r=yield Ke("mkaguzi.api.inventory_audit.get_stock_take_issues",{filters:JSON.stringify(t),page:e,page_size:n});this.issues=r.issues,this.issuesTotalCount=r.total_count,this.issuesPage=r.page,this.issuesPageSize=r.page_size,this.filters.issues=t}catch(r){this.error=`Failed to load issues: ${r.message}`,console.error("Error loading issues:",r)}finally{this.issuesLoading=!1}})},createIssue(t){return ue(this,null,function*(){try{const e=yield Ke("frappe.client.insert",{doc:ge({doctype:"Stock Take Issue Log"},t)});return yield this.loadIssues(this.filters.issues),e}catch(e){throw this.error=`Failed to create issue: ${e.message}`,e}})},loadScorecards(){return ue(this,arguments,function*(t={}){this.scorecardsLoading=!0,this.error=null;try{this.scorecards=yield Ke("mkaguzi.api.inventory_audit.get_compliance_scorecards",{filters:JSON.stringify(t)})}catch(e){this.error=`Failed to load scorecards: ${e.message}`,console.error("Error loading scorecards:",e)}finally{this.scorecardsLoading=!1}})},loadScorecardHistory(t){return ue(this,null,function*(){try{this.scorecardHistory=yield Ke("mkaguzi.api.inventory_audit.get_scorecard_history",{scorecard:t})}catch(e){throw this.error=`Failed to load scorecard history: ${e.message}`,e}})},recalculateScorecard(t){return ue(this,null,function*(){try{const e=yield Ke("mkaguzi.api.inventory_audit.recalculate_scorecard",{audit_plan:t});return yield this.loadScorecards(),e}catch(e){throw this.error=`Failed to recalculate scorecard: ${e.message}`,e}})},setActiveItem(t){this.activeItem=t},setActivePlan(t){this.activePlan=t},setActiveSession(t){this.activeSession=t},setActiveVarianceCase(t){this.activeVarianceCase=t},setActiveReturnAudit(t){this.activeReturnAudit=t},setActiveIssue(t){this.activeIssue=t},setActiveScorecard(t){this.activeScorecard=t},setCurrentView(t){this.currentView=t},clearError(){this.error=null},clearFilters(){this.filters={plans:{},sessions:{},varianceCases:{},returnAudits:{},issues:{},items:{}}},getStatusColor(t){return this.statusColors[t]||"gray"},getGradeColor(t){return this.gradeColors[t]||"gray"},loadAllData(){return ue(this,null,function*(){this.isLoading=!0;try{yield Promise.all([this.loadDashboardStats(),this.loadPlans({},1,10),this.loadSessions({},1,10),this.loadVarianceCases({},1,10),this.loadIssues({},1,10),this.loadScorecards()])}catch(t){console.error("Error loading all data:",t)}finally{this.isLoading=!1}})}}}),Nvn={class:"p-6"},jvn={key:0,class:"flex items-center justify-center py-12"},Fvn={key:1,class:"text-center py-12"},Bvn={class:"text-gray-500 mb-4"},zvn={class:"flex items-start justify-between mb-6"},Uvn={class:"flex items-center gap-4"},Hvn={class:"flex items-center gap-3"},qvn={class:"text-2xl font-bold text-gray-900"},Wvn={class:"text-gray-500 mt-1"},Gvn={class:"flex items-center gap-2"},Yvn={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Kvn={class:"lg:col-span-2 space-y-6"},Xvn={class:"bg-white rounded-lg border p-6"},Qvn={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Zvn={class:"text-sm font-medium text-gray-900 mt-1"},Jvn={class:"text-sm font-medium text-gray-900 mt-1"},eyn={class:"text-sm font-medium text-gray-900 mt-1"},tyn={class:"text-sm font-medium text-gray-900 mt-1"},nyn={class:"text-sm font-medium text-gray-900 mt-1"},ryn={class:"text-sm font-medium text-gray-900 mt-1"},syn={class:"text-sm font-medium text-gray-900 mt-1"},iyn={class:"text-sm font-medium text-gray-900 mt-1"},ayn={class:"bg-white rounded-lg border p-6"},oyn={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},lyn={class:"bg-gray-50 rounded-lg p-4"},uyn={class:"text-lg font-semibold text-gray-900 mt-1"},dyn={class:"bg-blue-50 rounded-lg p-4"},cyn={class:"text-lg font-semibold text-blue-700 mt-1"},fyn={class:"bg-green-50 rounded-lg p-4"},pyn={class:"text-lg font-semibold text-green-700 mt-1"},hyn={class:"bg-yellow-50 rounded-lg p-4"},myn={class:"text-lg font-semibold text-yellow-700 mt-1"},gyn={class:"bg-white rounded-lg border p-6"},vyn={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},yyn={class:"text-sm font-medium text-gray-900 mt-1"},byn={class:"text-sm font-medium text-gray-900 mt-1"},xyn={class:"text-sm font-medium text-gray-900 mt-1"},_yn={class:"text-sm font-medium text-gray-900 mt-1"},wyn={class:"mt-4 pt-4 border-t"},kyn={class:"flex items-center justify-between"},Syn={class:"bg-white rounded-lg border p-6"},Cyn={class:"bg-white rounded-lg border p-6"},Ayn={class:"flex items-center justify-between mb-4"},Tyn={key:0,class:"text-center py-8 text-gray-500"},$yn={key:1,class:"space-y-3"},Myn=["onClick"],Eyn={class:"flex items-center gap-4"},Dyn={class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},Ryn={class:"font-medium text-gray-900"},Pyn={class:"text-sm text-gray-500"},Iyn={class:"flex items-center gap-3"},Oyn={class:"text-right"},Lyn={key:0,class:"text-sm text-orange-600"},Vyn={class:"text-xs text-gray-500"},Nyn={key:0,class:"bg-white rounded-lg border p-6"},jyn=["innerHTML"],Fyn={class:"space-y-6"},Byn={class:"bg-white rounded-lg border p-6"},zyn={class:"space-y-4"},Uyn={class:"flex items-center justify-between text-sm mb-1"},Hyn={class:"font-medium"},qyn={class:"w-full bg-gray-200 rounded-full h-2"},Wyn={class:"pt-4 border-t space-y-3"},Gyn={class:"flex items-center justify-between"},Yyn={class:"text-sm font-medium"},Kyn={class:"flex items-center justify-between"},Xyn={class:"text-sm font-medium text-orange-600"},Qyn={class:"flex items-center justify-between"},Zyn={class:"text-sm font-medium text-yellow-600"},Jyn={key:0,class:"bg-white rounded-lg border p-6"},e0n={class:"text-center"},t0n={class:"mt-4 space-y-2 text-sm"},n0n={class:"flex items-center justify-between"},r0n={class:"font-medium"},s0n={class:"flex items-center justify-between"},i0n={class:"font-medium"},a0n={class:"flex items-center justify-between"},o0n={class:"font-medium"},l0n={class:"bg-white rounded-lg border p-6"},u0n={class:"space-y-2"},d0n={class:"bg-white rounded-lg border p-6"},c0n={class:"space-y-4"},f0n={class:"flex gap-3"},p0n={class:"text-xs text-gray-500"},h0n={key:0,class:"flex gap-3"},m0n={class:"text-xs text-gray-500"},g0n={class:"flex gap-3"},v0n={class:"text-xs text-gray-500"},y0n={__name:"AuditPlanDetail",setup(t){const e=ta(),n=_n(),r=tu(),s=Q(!0),i=Q(null),a=Q(null),o=Q([]),l=Q(null),d=Q(0),c=Q(0),f=Z(()=>e.params.id);yt(()=>{p()});function p(){return ue(this,null,function*(){s.value=!0,i.value=null;try{a.value=yield Ke("frappe.client.get",{doctype:"Inventory Audit Plan",name:f.value});const V=yield Ke("frappe.client.get_list",{doctype:"Stock Take Session",filters:{audit_plan:f.value},fields:["name","session_title","status","count_type","start_datetime","total_items_counted","items_with_variance"],order_by:"creation desc"});o.value=V||[];const O=yield Ke("frappe.client.get_list",{doctype:"Audit Compliance Scorecard",filters:{audit_plan:f.value},fields:["name","overall_score","grade","completion_rate","accuracy_score","timeliness_score"],limit_page_length:1});l.value=(O==null?void 0:O[0])||null,d.value=yield Ke("frappe.client.get_count",{doctype:"Variance Reconciliation Case",filters:{audit_plan:f.value}}),c.value=yield Ke("frappe.client.get_count",{doctype:"Stock Take Issue Log",filters:{audit_plan:f.value,status:["in",["Open","In Progress"]]}})}catch(V){console.error("Error loading plan:",V),i.value=V.message||"Failed to load plan"}finally{s.value=!1}})}const h=Z(()=>o.value.filter(V=>V.status==="Completed").length),m=Z(()=>o.value.length===0?0:h.value/o.value.length*100),g=Z(()=>o.value.reduce((V,O)=>V+(O.total_items_counted||0),0));function y(){n.push("/inventory-audit/plans")}function x(){n.push(`/inventory-audit/plans/${f.value}/edit`)}function _(){n.push(`/inventory-audit/sessions/new?plan=${f.value}`)}function k(V){n.push(`/inventory-audit/sessions/${V}`)}function w(){n.push(`/inventory-audit/variance-cases?plan=${f.value}`)}function S(){n.push(`/inventory-audit/issues?plan=${f.value}`)}function C(){l.value&&n.push(`/inventory-audit/scorecards/${l.value.name}`)}function A(){return ue(this,null,function*(){try{yield Ke("frappe.client.set_value",{doctype:"Inventory Audit Plan",name:f.value,fieldname:{status:"In Progress",actual_start_date:new Date().toISOString().split("T")[0]}}),yield p()}catch(V){console.error("Error starting plan:",V)}})}function M(){return ue(this,null,function*(){try{yield r.recalculateScorecard(f.value),yield p()}catch(V){console.error("Error recalculating scorecard:",V)}})}function E(){console.log("Export plan")}function P(V){return{Planned:"blue","In Progress":"yellow",Completed:"green",Closed:"gray",Cancelled:"red",Draft:"gray","Counting Complete":"blue","Pending Review":"yellow",Reviewed:"green"}[V]||"gray"}function I(V){return V>=90?"border-green-500":V>=70?"border-yellow-500":V>=50?"border-orange-500":"border-red-500"}function F(V){return V>=90?"text-green-600":V>=70?"text-yellow-600":V>=50?"text-orange-600":"text-red-600"}function L(V){return{A:"text-green-600",B:"text-blue-600",C:"text-yellow-600",D:"text-orange-600",F:"text-red-600"}[V]||"text-gray-600"}function z(V){return V?new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}function N(V){return V?new Date(V).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function q(V){return V?new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(V):"KES 0"}return(V,O)=>(T(),R("div",Nvn,[s.value?(T(),R("div",jvn,[b(v(Tbe),{class:"w-8 h-8"})])):i.value?(T(),R("div",Fvn,[b(v(qr),{class:"w-12 h-12 mx-auto mb-4 text-red-400"}),O[2]||(O[2]=u("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Plan",-1)),u("p",Bvn,$(i.value),1),b(v(J),{onClick:p},{default:D(()=>[...O[1]||(O[1]=[W("Try Again",-1)])]),_:1})])):a.value?(T(),R(xe,{key:2},[u("div",zvn,[u("div",Uvn,[b(v(J),{variant:"ghost",onClick:y},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("div",Hvn,[u("h1",qvn,$(a.value.plan_title),1),b(v(De),{variant:P(a.value.status)},{default:D(()=>[W($(a.value.status),1)]),_:1},8,["variant"])]),u("p",Wvn,$(a.value.name),1)])]),u("div",Gvn,[b(v(J),{variant:"outline",onClick:E},{default:D(()=>[b(v(xn),{class:"w-4 h-4 mr-2"}),O[3]||(O[3]=W(" Export ",-1))]),_:1}),b(v(J),{variant:"outline",onClick:x},{default:D(()=>[b(v(yn),{class:"w-4 h-4 mr-2"}),O[4]||(O[4]=W(" Edit ",-1))]),_:1}),a.value.status==="Planned"?(T(),he(v(J),{key:0,variant:"solid",onClick:A},{default:D(()=>[b(v(Ll),{class:"w-4 h-4 mr-2"}),O[5]||(O[5]=W(" Start Audit ",-1))]),_:1})):se("",!0)])]),u("div",Yvn,[u("div",Kvn,[u("div",Xvn,[O[14]||(O[14]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Overview",-1)),u("div",Qvn,[u("div",null,[O[6]||(O[6]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Period",-1)),u("p",Zvn,$(a.value.audit_period),1)]),u("div",null,[O[7]||(O[7]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Scope",-1)),u("p",Jvn,$(a.value.audit_scope),1)]),u("div",null,[O[8]||(O[8]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Branch",-1)),u("p",eyn,$(a.value.branch||"-"),1)]),u("div",null,[O[9]||(O[9]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Warehouse",-1)),u("p",tyn,$(a.value.warehouse||"-"),1)]),u("div",null,[O[10]||(O[10]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Lead Auditor",-1)),u("p",nyn,$(a.value.lead_auditor_name||a.value.lead_auditor||"-"),1)]),u("div",null,[O[11]||(O[11]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Sampling Strategy",-1)),u("p",ryn,$(a.value.sampling_strategy||"-"),1)]),u("div",null,[O[12]||(O[12]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Audit Year",-1)),u("p",syn,$(a.value.audit_year||"-"),1)]),u("div",null,[O[13]||(O[13]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"SLA Days",-1)),u("p",iyn,$(a.value.sla_days||"-")+" days",1)])])]),u("div",ayn,[O[19]||(O[19]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Materiality Thresholds",-1)),u("div",oyn,[u("div",lyn,[O[15]||(O[15]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Type",-1)),u("p",uyn,$(a.value.materiality_type||"-"),1)]),u("div",dyn,[O[16]||(O[16]=u("p",{class:"text-xs text-blue-600 uppercase tracking-wide"},"Quantity Threshold",-1)),u("p",cyn,$(a.value.materiality_threshold_qty||0),1)]),u("div",fyn,[O[17]||(O[17]=u("p",{class:"text-xs text-green-600 uppercase tracking-wide"},"Amount Threshold",-1)),u("p",pyn,$(q(a.value.materiality_threshold_amount)),1)]),u("div",hyn,[O[18]||(O[18]=u("p",{class:"text-xs text-yellow-600 uppercase tracking-wide"},"Percent Threshold",-1)),u("p",myn,$(a.value.materiality_threshold_percent||0)+"%",1)])])]),u("div",gyn,[O[27]||(O[27]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",vyn,[u("div",null,[O[20]||(O[20]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Planned Start",-1)),u("p",yyn,$(z(a.value.planned_start_date)),1)]),u("div",null,[O[21]||(O[21]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Planned End",-1)),u("p",byn,$(z(a.value.planned_end_date)),1)]),u("div",null,[O[22]||(O[22]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Actual Start",-1)),u("p",xyn,$(z(a.value.actual_start_date)||"-"),1)]),u("div",null,[O[23]||(O[23]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Actual End",-1)),u("p",_yn,$(z(a.value.actual_end_date)||"-"),1)])]),u("div",wyn,[u("div",kyn,[u("div",null,[O[24]||(O[24]=u("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"SLA Due Date",-1)),u("p",{class:pe(["text-sm font-medium",a.value.is_overdue?"text-red-600":"text-gray-900"])},$(z(a.value.sla_due_date)),3)]),a.value.is_overdue?(T(),he(v(De),{key:0,variant:"red"},{default:D(()=>[b(v(rn),{class:"w-3 h-3 mr-1"}),O[25]||(O[25]=W(" Overdue ",-1))]),_:1})):a.value.sla_due_date?(T(),he(v(De),{key:1,variant:"green"},{default:D(()=>[...O[26]||(O[26]=[W("On Track",-1)])]),_:1})):se("",!0)])])]),u("div",Syn,[b(v(fle),{modelValue:a.value.team_members,"onUpdate:modelValue":O[0]||(O[0]=X=>a.value.team_members=X),title:"Audit Team",readonly:""},null,8,["modelValue"])]),u("div",Cyn,[u("div",Ayn,[O[29]||(O[29]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Stock Take Sessions",-1)),b(v(J),{size:"sm",variant:"outline",onClick:_},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-1"}),O[28]||(O[28]=W(" New Session ",-1))]),_:1})]),o.value.length===0?(T(),R("div",Tyn,[b(v(Ar),{class:"w-10 h-10 mx-auto mb-2 text-gray-300"}),O[30]||(O[30]=u("p",null,"No sessions created yet",-1))])):(T(),R("div",$yn,[(T(!0),R(xe,null,_e(o.value,X=>(T(),R("div",{key:X.name,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors",onClick:j=>k(X.name)},[u("div",Eyn,[u("div",Dyn,[b(v(Qa),{class:"w-5 h-5 text-blue-600"})]),u("div",null,[u("p",Ryn,$(X.session_title),1),u("p",Pyn,$(X.count_type)+"  "+$(X.total_items_counted||0)+" items",1)])]),u("div",Iyn,[u("div",Oyn,[X.items_with_variance?(T(),R("p",Lyn,$(X.items_with_variance)+" variances ",1)):se("",!0),u("p",Vyn,$(z(X.start_datetime)),1)]),b(v(De),{variant:P(X.status)},{default:D(()=>[W($(X.status),1)]),_:2},1032,["variant"]),b(v(sr),{class:"w-5 h-5 text-gray-400"})])],8,Myn))),128))]))]),a.value.notes?(T(),R("div",Nyn,[O[31]||(O[31]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),u("div",{class:"prose prose-sm max-w-none",innerHTML:a.value.notes},null,8,jyn)])):se("",!0)]),u("div",Fyn,[u("div",Byn,[O[36]||(O[36]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Progress",-1)),u("div",zyn,[u("div",null,[u("div",Uyn,[O[32]||(O[32]=u("span",{class:"text-gray-500"},"Sessions Completed",-1)),u("span",Hyn,$(h.value)+"/"+$(o.value.length),1)]),u("div",qyn,[u("div",{class:"bg-blue-500 h-2 rounded-full transition-all",style:rt({width:`${m.value}%`})},null,4)])]),u("div",Wyn,[u("div",Gyn,[O[33]||(O[33]=u("span",{class:"text-sm text-gray-500"},"Total Items Counted",-1)),u("span",Yyn,$(g.value),1)]),u("div",Kyn,[O[34]||(O[34]=u("span",{class:"text-sm text-gray-500"},"Variance Cases",-1)),u("span",Xyn,$(d.value),1)]),u("div",Qyn,[O[35]||(O[35]=u("span",{class:"text-sm text-gray-500"},"Open Issues",-1)),u("span",Zyn,$(c.value),1)])])])]),l.value?(T(),R("div",Jyn,[O[41]||(O[41]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Compliance Score",-1)),u("div",e0n,[u("div",{class:pe(["inline-flex items-center justify-center w-24 h-24 rounded-full border-4",I(l.value.overall_score)])},[u("div",null,[u("p",{class:pe(["text-2xl font-bold",F(l.value.overall_score)])},$(Math.round(l.value.overall_score||0))+"% ",3),u("p",{class:pe(["text-lg font-bold",L(l.value.grade)])},$(l.value.grade),3)])],2),u("div",t0n,[u("div",n0n,[O[37]||(O[37]=u("span",{class:"text-gray-500"},"Completion Rate",-1)),u("span",r0n,$(l.value.completion_rate||0)+"%",1)]),u("div",s0n,[O[38]||(O[38]=u("span",{class:"text-gray-500"},"Accuracy Score",-1)),u("span",i0n,$(l.value.accuracy_score||0)+"%",1)]),u("div",a0n,[O[39]||(O[39]=u("span",{class:"text-gray-500"},"Timeliness",-1)),u("span",o0n,$(l.value.timeliness_score||0)+"%",1)])]),b(v(J),{size:"sm",variant:"ghost",class:"mt-4",onClick:C},{default:D(()=>[...O[40]||(O[40]=[W(" View Full Scorecard ",-1)])]),_:1})])])):se("",!0),u("div",l0n,[O[46]||(O[46]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Quick Actions",-1)),u("div",u0n,[b(v(J),{variant:"outline",class:"w-full justify-start",onClick:_},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),O[42]||(O[42]=W(" Add Session ",-1))]),_:1}),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:w},{default:D(()=>[b(v(rn),{class:"w-4 h-4 mr-2"}),O[43]||(O[43]=W(" View Variance Cases ",-1))]),_:1}),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:S},{default:D(()=>[b(v(mfe),{class:"w-4 h-4 mr-2"}),O[44]||(O[44]=W(" View Issues ",-1))]),_:1}),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:M},{default:D(()=>[b(v(mn),{class:"w-4 h-4 mr-2"}),O[45]||(O[45]=W(" Recalculate Score ",-1))]),_:1})])]),u("div",d0n,[O[53]||(O[53]=u("h4",{class:"text-sm font-medium text-gray-700 mb-4"},"Recent Activity",-1)),u("div",c0n,[u("div",f0n,[O[48]||(O[48]=u("div",{class:"w-2 h-2 mt-2 rounded-full bg-blue-500"},null,-1)),u("div",null,[O[47]||(O[47]=u("p",{class:"text-sm text-gray-900"},"Plan created",-1)),u("p",p0n,$(N(a.value.creation)),1)])]),a.value.actual_start_date?(T(),R("div",h0n,[O[50]||(O[50]=u("div",{class:"w-2 h-2 mt-2 rounded-full bg-green-500"},null,-1)),u("div",null,[O[49]||(O[49]=u("p",{class:"text-sm text-gray-900"},"Audit started",-1)),u("p",m0n,$(z(a.value.actual_start_date)),1)])])):se("",!0),u("div",g0n,[O[52]||(O[52]=u("div",{class:"w-2 h-2 mt-2 rounded-full bg-gray-300"},null,-1)),u("div",null,[O[51]||(O[51]=u("p",{class:"text-sm text-gray-900"},"Last modified",-1)),u("p",v0n,$(N(a.value.modified)),1)])])])])])])],64)):se("",!0)]))}},b0n={class:"p-6"},x0n={class:"flex items-center justify-between mb-6"},_0n={class:"flex items-center gap-4"},w0n={class:"text-2xl font-bold text-gray-900"},k0n={class:"text-gray-500 mt-1"},S0n={class:"flex items-center gap-2"},C0n={class:"max-w-4xl"},A0n={class:"space-y-6"},T0n={class:"bg-white rounded-lg border p-6"},$0n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M0n={class:"md:col-span-2"},E0n={class:"bg-white rounded-lg border p-6"},D0n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},R0n={class:"bg-white rounded-lg border p-6"},P0n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},I0n={class:"bg-white rounded-lg border p-6"},O0n={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},L0n={class:"bg-white rounded-lg border p-6"},V0n={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},N0n={class:"bg-white rounded-lg border p-6"},j0n={class:"bg-white rounded-lg border p-6"},F0n={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},bW={__name:"AuditPlanForm",setup(t){const e=ta(),n=_n();tu();const r=Q(!1),s=Q([]),i=Z(()=>e.params.id&&e.params.id!=="new"),a=Q({plan_title:"",status:"Planned",audit_period:"Monthly",audit_scope:"Cycle Count",audit_year:new Date().getFullYear(),branch:"",warehouse:"",lead_auditor:"",sampling_strategy:"",materiality_type:"Combined",materiality_threshold_qty:0,materiality_threshold_amount:0,materiality_threshold_percent:5,planned_start_date:"",planned_end_date:"",sla_days:7,sla_due_date:"",team_members:[],notes:""});yt(()=>ue(this,null,function*(){yield o(),i.value&&(yield l())}));function o(){return ue(this,null,function*(){try{const y=yield Ke("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});s.value=y.map(x=>({label:x.full_name||x.name,value:x.name}))}catch(y){console.error("Error loading users:",y)}})}function l(){return ue(this,null,function*(){try{const y=yield Ke("frappe.client.get",{doctype:"Inventory Audit Plan",name:e.params.id});a.value={plan_title:y.plan_title||"",status:y.status||"Planned",audit_period:y.audit_period||"Monthly",audit_scope:y.audit_scope||"Cycle Count",audit_year:y.audit_year||new Date().getFullYear(),branch:y.branch||"",warehouse:y.warehouse||"",lead_auditor:y.lead_auditor||"",sampling_strategy:y.sampling_strategy||"",materiality_type:y.materiality_type||"Combined",materiality_threshold_qty:y.materiality_threshold_qty||0,materiality_threshold_amount:y.materiality_threshold_amount||0,materiality_threshold_percent:y.materiality_threshold_percent||5,planned_start_date:y.planned_start_date||"",planned_end_date:y.planned_end_date||"",sla_days:y.sla_days||7,sla_due_date:y.sla_due_date||"",team_members:y.team_members||[],notes:y.notes||""}}catch(y){console.error("Error loading plan:",y)}})}function d(){return ue(this,null,function*(){if(!a.value.plan_title){alert("Plan title is required");return}if(!a.value.audit_period){alert("Audit period is required");return}if(!a.value.audit_scope){alert("Audit scope is required");return}r.value=!0;try{if(i.value)yield Ke("frappe.client.set_value",{doctype:"Inventory Audit Plan",name:e.params.id,fieldname:a.value}),n.push(`/inventory-audit/plans/${e.params.id}`);else{const y=yield Ke("frappe.client.insert",{doc:ge({doctype:"Inventory Audit Plan"},a.value)});n.push(`/inventory-audit/plans/${y.name}`)}}catch(y){console.error("Error saving plan:",y),alert("Error saving plan: "+y.message)}finally{r.value=!1}})}function c(){i.value?n.push(`/inventory-audit/plans/${e.params.id}`):n.push("/inventory-audit/plans")}const f=[{label:"Planned",value:"Planned"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Closed",value:"Closed"},{label:"Cancelled",value:"Cancelled"}],p=[{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"},{label:"Quarterly",value:"Quarterly"},{label:"Ad Hoc",value:"Ad Hoc"}],h=[{label:"Cycle Count",value:"Cycle Count"},{label:"Full Count",value:"Full Count"},{label:"Sales Returns",value:"Sales Returns"},{label:"Damaged Stock",value:"Damaged Stock"},{label:"GRN Audit",value:"GRN Audit"},{label:"Dispatch Audit",value:"Dispatch Audit"}],m=[{label:"ABC Analysis",value:"ABC Analysis"},{label:"Velocity Based",value:"Velocity Based"},{label:"Risk Based",value:"Risk Based"},{label:"Random",value:"Random"},{label:"Full Population",value:"Full Population"}],g=[{label:"Quantity",value:"Quantity"},{label:"Amount",value:"Amount"},{label:"Percentage",value:"Percentage"},{label:"Combined",value:"Combined"}];return(y,x)=>(T(),R("div",b0n,[u("div",x0n,[u("div",_0n,[b(v(J),{variant:"ghost",onClick:c},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",w0n,$(i.value?"Edit Audit Plan":"New Audit Plan"),1),u("p",k0n,$(i.value?`Editing ${v(e).params.id}`:"Create a new inventory audit plan"),1)])]),u("div",S0n,[b(v(J),{variant:"outline",onClick:c},{default:D(()=>[...x[19]||(x[19]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:d,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(i.value?"Save Changes":"Create Plan"),1)]),_:1},8,["loading"])])]),u("div",C0n,[u("div",A0n,[u("div",T0n,[x[25]||(x[25]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),u("div",$0n,[u("div",M0n,[x[20]||(x[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Plan Title "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"text",modelValue:a.value.plan_title,"onUpdate:modelValue":x[0]||(x[0]=_=>a.value.plan_title=_),placeholder:"e.g., Q4 2025 Warehouse A Cycle Count"},null,8,["modelValue"])]),u("div",null,[x[21]||(x[21]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Period "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:a.value.audit_period,"onUpdate:modelValue":x[1]||(x[1]=_=>a.value.audit_period=_),options:p},null,8,["modelValue"])]),u("div",null,[x[22]||(x[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Scope "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:a.value.audit_scope,"onUpdate:modelValue":x[2]||(x[2]=_=>a.value.audit_scope=_),options:h},null,8,["modelValue"])]),u("div",null,[x[23]||(x[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(v(ve),{type:"select",modelValue:a.value.status,"onUpdate:modelValue":x[3]||(x[3]=_=>a.value.status=_),options:f},null,8,["modelValue"])]),u("div",null,[x[24]||(x[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Year",-1)),b(v(ve),{type:"number",modelValue:a.value.audit_year,"onUpdate:modelValue":x[4]||(x[4]=_=>a.value.audit_year=_),placeholder:"2025"},null,8,["modelValue"])])])]),u("div",E0n,[x[28]||(x[28]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Location",-1)),u("div",D0n,[u("div",null,[x[26]||(x[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Branch",-1)),b(v(ve),{type:"text",modelValue:a.value.branch,"onUpdate:modelValue":x[5]||(x[5]=_=>a.value.branch=_),placeholder:"e.g., Nairobi HQ"},null,8,["modelValue"])]),u("div",null,[x[27]||(x[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),b(v(ve),{type:"text",modelValue:a.value.warehouse,"onUpdate:modelValue":x[6]||(x[6]=_=>a.value.warehouse=_),placeholder:"e.g., Main Warehouse"},null,8,["modelValue"])])])]),u("div",R0n,[x[31]||(x[31]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Audit Configuration",-1)),u("div",P0n,[u("div",null,[x[29]||(x[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Lead Auditor",-1)),b(v(ve),{type:"autocomplete",modelValue:a.value.lead_auditor,"onUpdate:modelValue":x[7]||(x[7]=_=>a.value.lead_auditor=_),options:s.value,placeholder:"Select lead auditor"},null,8,["modelValue","options"])]),u("div",null,[x[30]||(x[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sampling Strategy",-1)),b(v(ve),{type:"select",modelValue:a.value.sampling_strategy,"onUpdate:modelValue":x[8]||(x[8]=_=>a.value.sampling_strategy=_),options:m},null,8,["modelValue"])])])]),u("div",I0n,[x[36]||(x[36]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Materiality Thresholds",-1)),x[37]||(x[37]=u("p",{class:"text-sm text-gray-500 mb-4"}," Define thresholds for identifying material variances during stock takes. ",-1)),u("div",O0n,[u("div",null,[x[32]||(x[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Materiality Type",-1)),b(v(ve),{type:"select",modelValue:a.value.materiality_type,"onUpdate:modelValue":x[9]||(x[9]=_=>a.value.materiality_type=_),options:g},null,8,["modelValue"])]),u("div",null,[x[33]||(x[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quantity Threshold",-1)),b(v(ve),{type:"number",modelValue:a.value.materiality_threshold_qty,"onUpdate:modelValue":x[10]||(x[10]=_=>a.value.materiality_threshold_qty=_),placeholder:"0"},null,8,["modelValue"])]),u("div",null,[x[34]||(x[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Amount Threshold (KES)",-1)),b(v(ve),{type:"number",modelValue:a.value.materiality_threshold_amount,"onUpdate:modelValue":x[11]||(x[11]=_=>a.value.materiality_threshold_amount=_),placeholder:"0"},null,8,["modelValue"])]),u("div",null,[x[35]||(x[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Percent Threshold (%)",-1)),b(v(ve),{type:"number",modelValue:a.value.materiality_threshold_percent,"onUpdate:modelValue":x[12]||(x[12]=_=>a.value.materiality_threshold_percent=_),placeholder:"5"},null,8,["modelValue"])])])]),u("div",L0n,[x[42]||(x[42]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",V0n,[u("div",null,[x[38]||(x[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Planned Start Date",-1)),b(v(ve),{type:"date",modelValue:a.value.planned_start_date,"onUpdate:modelValue":x[13]||(x[13]=_=>a.value.planned_start_date=_)},null,8,["modelValue"])]),u("div",null,[x[39]||(x[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Planned End Date",-1)),b(v(ve),{type:"date",modelValue:a.value.planned_end_date,"onUpdate:modelValue":x[14]||(x[14]=_=>a.value.planned_end_date=_)},null,8,["modelValue"])]),u("div",null,[x[40]||(x[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"SLA Days",-1)),b(v(ve),{type:"number",modelValue:a.value.sla_days,"onUpdate:modelValue":x[15]||(x[15]=_=>a.value.sla_days=_),placeholder:"e.g., 7"},null,8,["modelValue"])]),u("div",null,[x[41]||(x[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"SLA Due Date",-1)),b(v(ve),{type:"date",modelValue:a.value.sla_due_date,"onUpdate:modelValue":x[16]||(x[16]=_=>a.value.sla_due_date=_)},null,8,["modelValue"])])])]),u("div",N0n,[b(v(fle),{modelValue:a.value.team_members,"onUpdate:modelValue":x[17]||(x[17]=_=>a.value.team_members=_),title:"Audit Team Members"},null,8,["modelValue"])]),u("div",j0n,[x[43]||(x[43]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),b(v(ve),{type:"textarea",modelValue:a.value.notes,"onUpdate:modelValue":x[18]||(x[18]=_=>a.value.notes=_),placeholder:"Additional notes or instructions for this audit plan...",rows:4},null,8,["modelValue"])])]),u("div",F0n,[b(v(J),{variant:"outline",onClick:c},{default:D(()=>[...x[44]||(x[44]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:d,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(i.value?"Save Changes":"Create Plan"),1)]),_:1},8,["loading"])])])]))}},B0n={class:"p-6"},z0n={class:"flex justify-between items-center mb-6"},U0n={class:"flex gap-2"},H0n={class:"bg-white rounded-lg border p-4 mb-6"},q0n={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},W0n=["value"],G0n={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},Y0n={class:"bg-white rounded-lg border p-4"},K0n={class:"text-2xl font-bold"},X0n={class:"bg-white rounded-lg border p-4"},Q0n={class:"text-2xl font-bold text-blue-600"},Z0n={class:"bg-white rounded-lg border p-4"},J0n={class:"text-2xl font-bold text-yellow-600"},e1n={class:"bg-white rounded-lg border p-4"},t1n={class:"text-2xl font-bold text-green-600"},n1n={class:"bg-white rounded-lg border p-4"},r1n={class:"text-2xl font-bold text-purple-600"},s1n={class:"bg-white rounded-lg border shadow-sm"},i1n={key:0,class:"divide-y divide-gray-200"},a1n=["onClick"],o1n={class:"flex items-start justify-between"},l1n={class:"flex-1"},u1n={class:"flex items-center gap-3 mb-2"},d1n={class:"font-medium text-gray-900"},c1n={class:"text-sm text-gray-600 mb-2"},f1n={class:"flex items-center gap-6 text-sm text-gray-500"},p1n={class:"flex items-center gap-1"},h1n={class:"flex items-center gap-1"},m1n={key:0,class:"flex items-center gap-1"},g1n={key:1,class:"flex items-center gap-1"},v1n={class:"flex items-center gap-6 mt-3 text-sm"},y1n={class:"text-gray-500"},b1n={key:0,class:"text-orange-600"},x1n={key:1,class:"text-purple-600"},_1n={class:"text-right"},w1n={key:1,class:"p-12 text-center text-gray-500"},k1n={key:2,class:"px-4 py-3 border-t flex items-center justify-between"},S1n={class:"text-sm text-gray-500"},C1n={class:"flex gap-2"},A1n={__name:"AuditPlanList",setup(t){const e=_n(),n=tu(),r=Q(!1),s=Q({status:"",audit_period:"",branch:"",warehouse:""}),i=Z(()=>n.plans),a=Z(()=>n.plansTotalCount),o=Z(()=>n.plansPage),l=Z(()=>n.plansPageSize),d=Z(()=>Math.ceil(a.value/l.value)),c=Z(()=>{const S=i.value.filter(C=>C.compliance_score);return S.length===0?0:Math.round(S.reduce((C,A)=>C+A.compliance_score,0)/S.length)});yt(()=>ue(this,null,function*(){yield f()}));function f(){return ue(this,null,function*(){r.value=!0;try{const S=ge({},s.value);Object.keys(S).forEach(C=>{S[C]||delete S[C]}),yield n.loadPlans(S,o.value,l.value)}finally{r.value=!1}})}function p(){return ue(this,null,function*(){s.value={status:"",audit_period:"",branch:"",warehouse:""},yield f()})}let h=null;function m(){clearTimeout(h),h=setTimeout(()=>f(),300)}function g(S){return ue(this,null,function*(){yield n.loadPlans(s.value,S,l.value)})}function y(){e.push("/inventory-audit/plans/new")}function x(S){e.push(`/inventory-audit/plans/${S}`)}function _(S){return{Planned:"blue","In Progress":"yellow",Completed:"green","On Hold":"gray",Cancelled:"red"}[S]||"gray"}function k(S){return S?new Date(S).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function w(S){if(!S)return!1;const M=(new Date(S)-new Date)/(1e3*60*60*24);return M<=7&&M>=0}return(S,C)=>(T(),R("div",B0n,[u("div",z0n,[C[7]||(C[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Inventory Audit Plans"),u("p",{class:"text-gray-600"},"Manage audit cycles, scope, and materiality thresholds")],-1)),u("div",U0n,[b(v(J),{onClick:p,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(v(J),{onClick:y},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),C[6]||(C[6]=W(" New Plan ",-1))]),_:1})])]),u("div",H0n,[u("div",q0n,[u("div",null,[C[9]||(C[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),we(u("select",{"onUpdate:modelValue":C[0]||(C[0]=A=>s.value.status=A),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[...C[8]||(C[8]=[fr('<option value="">All Statuses</option><option value="Planned">Planned</option><option value="In Progress">In Progress</option><option value="Completed">Completed</option><option value="On Hold">On Hold</option><option value="Cancelled">Cancelled</option>',6)])],544),[[vn,s.value.status]])]),u("div",null,[C[11]||(C[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Period",-1)),we(u("select",{"onUpdate:modelValue":C[1]||(C[1]=A=>s.value.audit_period=A),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[C[10]||(C[10]=u("option",{value:""},"All Periods",-1)),(T(!0),R(xe,null,_e(v(n).auditPeriodOptions,A=>(T(),R("option",{key:A.value,value:A.value},$(A.label),9,W0n))),128))],544),[[vn,s.value.audit_period]])]),u("div",null,[C[12]||(C[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Branch",-1)),we(u("input",{"onUpdate:modelValue":C[2]||(C[2]=A=>s.value.branch=A),type:"text",placeholder:"Filter by branch",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:m},null,544),[[Rt,s.value.branch]])]),u("div",null,[C[13]||(C[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),we(u("input",{"onUpdate:modelValue":C[3]||(C[3]=A=>s.value.warehouse=A),type:"text",placeholder:"Filter by warehouse",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:m},null,544),[[Rt,s.value.warehouse]])])])]),u("div",G0n,[u("div",Y0n,[C[14]||(C[14]=u("p",{class:"text-sm text-gray-500"},"Total Plans",-1)),u("p",K0n,$(a.value),1)]),u("div",X0n,[C[15]||(C[15]=u("p",{class:"text-sm text-gray-500"},"Planned",-1)),u("p",Q0n,$(i.value.filter(A=>A.status==="Planned").length),1)]),u("div",Z0n,[C[16]||(C[16]=u("p",{class:"text-sm text-gray-500"},"In Progress",-1)),u("p",J0n,$(i.value.filter(A=>A.status==="In Progress").length),1)]),u("div",e1n,[C[17]||(C[17]=u("p",{class:"text-sm text-gray-500"},"Completed",-1)),u("p",t1n,$(i.value.filter(A=>A.status==="Completed").length),1)]),u("div",n1n,[C[18]||(C[18]=u("p",{class:"text-sm text-gray-500"},"Avg Compliance",-1)),u("p",r1n,$(c.value)+"%",1)])]),u("div",s1n,[i.value.length>0?(T(),R("div",i1n,[(T(!0),R(xe,null,_e(i.value,A=>(T(),R("div",{key:A.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:M=>x(A.name)},[u("div",o1n,[u("div",l1n,[u("div",u1n,[u("h4",d1n,$(A.plan_title),1),b(v(De),{variant:_(A.status)},{default:D(()=>[W($(A.status),1)]),_:2},1032,["variant"]),A.priority==="High"?(T(),he(v(De),{key:0,variant:"red"},{default:D(()=>[...C[19]||(C[19]=[W("High Priority",-1)])]),_:1})):se("",!0)]),u("p",c1n,$(A.plan_id),1),u("div",f1n,[u("span",p1n,[b(v(rr),{class:"w-4 h-4"}),W(" "+$(A.audit_period),1)]),u("span",h1n,[b(v(ei),{class:"w-4 h-4"}),W(" "+$(A.audit_scope),1)]),A.warehouse?(T(),R("span",m1n,[b(v(ob),{class:"w-4 h-4"}),W(" "+$(A.warehouse),1)])):se("",!0),A.lead_auditor?(T(),R("span",g1n,[b(v(Ji),{class:"w-4 h-4"}),W(" "+$(A.lead_auditor),1)])):se("",!0)]),u("div",v1n,[u("span",y1n,[C[20]||(C[20]=W(" Sessions: ",-1)),u("strong",null,$(A.completed_sessions_count||0)+"/"+$(A.sessions_count||0),1)]),A.variance_cases_count?(T(),R("span",b1n,[C[21]||(C[21]=W(" Variance Cases: ",-1)),u("strong",null,$(A.variance_cases_count),1)])):se("",!0),A.compliance_score?(T(),R("span",x1n,[C[22]||(C[22]=W(" Compliance: ",-1)),u("strong",null,$(A.compliance_score)+"%",1)])):se("",!0)])]),u("div",_1n,[C[23]||(C[23]=u("p",{class:"text-sm text-gray-500"},"Due Date",-1)),u("p",{class:pe(["font-medium",w(A.due_date)?"text-red-600":"text-gray-900"])},$(k(A.due_date)),3)])])],8,a1n))),128))])):r.value?se("",!0):(T(),R("div",w1n,[b(v(Ar),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),C[25]||(C[25]=u("p",null,"No audit plans found",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-2",onClick:y},{default:D(()=>[...C[24]||(C[24]=[W(" Create First Plan ",-1)])]),_:1})])),d.value>1?(T(),R("div",k1n,[u("p",S1n," Showing "+$((o.value-1)*l.value+1)+" - "+$(Math.min(o.value*l.value,a.value))+" of "+$(a.value),1),u("div",C1n,[b(v(J),{variant:"outline",size:"sm",disabled:o.value===1,onClick:C[4]||(C[4]=A=>g(o.value-1))},{default:D(()=>[...C[26]||(C[26]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(v(J),{variant:"outline",size:"sm",disabled:o.value===d.value,onClick:C[5]||(C[5]=A=>g(o.value+1))},{default:D(()=>[...C[27]||(C[27]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):se("",!0)])]))}},T1n={class:"p-6"},$1n={class:"flex items-center justify-between mb-6"},M1n={class:"flex items-center gap-4"},E1n={class:"text-gray-500 mt-1"},D1n={class:"flex items-center gap-2"},R1n={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},P1n={class:"lg:col-span-2 space-y-6"},I1n={class:"bg-white rounded-lg border p-6"},O1n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},L1n={class:"mt-1 text-sm text-gray-900"},V1n={class:"mt-1 text-sm text-gray-900"},N1n={class:"flex items-center gap-2"},j1n={class:"text-2xl font-bold text-blue-600"},F1n={class:"mt-1 text-sm text-gray-900"},B1n={class:"mt-1 text-sm text-gray-900"},z1n={class:"bg-white rounded-lg border p-6"},U1n={key:0,class:"space-y-4"},H1n={class:"flex items-center justify-between mb-3"},q1n={class:"font-medium text-gray-900"},W1n={class:"flex items-center gap-2"},G1n={class:"text-lg font-semibold text-blue-600"},Y1n={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},K1n={class:"font-medium ml-2"},X1n={class:"font-medium ml-2 text-green-600"},Q1n={class:"font-medium ml-2 text-red-600"},Z1n={class:"font-medium ml-2"},J1n={key:0,class:"mt-3"},ebn={class:"text-sm text-gray-700"},tbn={key:1,class:"text-center py-8 text-gray-500"},nbn={class:"bg-white rounded-lg border p-6"},rbn={class:"prose max-w-none"},sbn={class:"text-gray-700 whitespace-pre-wrap"},ibn={class:"bg-white rounded-lg border p-6"},abn={class:"prose max-w-none"},obn={class:"text-gray-700 whitespace-pre-wrap"},lbn={class:"space-y-6"},ubn={class:"bg-white rounded-lg border p-6"},dbn={class:"space-y-4"},cbn={class:"text-center"},fbn={class:"relative w-24 h-24 mx-auto mb-2"},pbn={class:"w-24 h-24 transform -rotate-90",viewBox:"0 0 24 24"},hbn=["stroke-dasharray"],mbn={class:"absolute inset-0 flex items-center justify-center"},gbn={class:"text-xl font-bold text-gray-900"},vbn={class:"space-y-2"},ybn={class:"flex justify-between text-sm"},bbn={class:"font-medium"},xbn={class:"flex justify-between text-sm"},_bn={class:"font-medium"},wbn={class:"flex justify-between text-sm"},kbn={class:"font-medium text-green-600"},Sbn={class:"flex justify-between text-sm"},Cbn={class:"font-medium text-red-600"},Abn={class:"bg-white rounded-lg border p-6"},Tbn={class:"space-y-2"},$bn={class:"bg-white rounded-lg border p-6"},Mbn={class:"space-y-3"},Ebn={key:0},Dbn={class:"bg-white rounded-lg border p-6"},Rbn={class:"space-y-3"},Pbn={class:"flex items-start gap-3"},Ibn={class:"flex-1"},Obn={class:"text-xs text-gray-500"},Lbn={key:0,class:"flex items-start gap-3"},Vbn={class:"flex-1"},Nbn={class:"text-xs text-gray-500"},jbn={__name:"ComplianceScorecardDetail",setup(t){const e=ta(),n=_n(),r=Q({}),s=Z(()=>{var k;return((k=r.value.compliance_categories)==null?void 0:k.reduce((w,S)=>w+(S.total_checks||0),0))||0}),i=Z(()=>{var k;return((k=r.value.compliance_categories)==null?void 0:k.reduce((w,S)=>w+(S.passed_checks||0),0))||0}),a=Z(()=>{var k;return((k=r.value.compliance_categories)==null?void 0:k.reduce((w,S)=>w+(S.failed_checks||0),0))||0});yt(()=>ue(this,null,function*(){yield o()}));function o(){return ue(this,null,function*(){try{const k=yield Ke("frappe.client.get",{doctype:"Compliance Scorecard",name:e.params.id});r.value=k}catch(k){console.error("Error loading scorecard:",k)}})}function l(k){return{Draft:"outline","In Progress":"secondary",Completed:"solid",Approved:"solid"}[k]||"outline"}function d(k){return k>=90?"solid":k>=70?"secondary":k>=50?"outline":"destructive"}function c(k){return k>=90?"Excellent":k>=80?"Good":k>=70?"Satisfactory":k>=60?"Needs Improvement":"Poor"}function f(k){return k?new Date(k).toLocaleDateString():"-"}function p(k){return k?new Date(k).toLocaleString():"-"}function h(){n.push("/inventory-audit/scorecards")}function m(){n.push(`/inventory-audit/scorecards/${e.params.id}/edit`)}function g(){alert("Report generation feature coming soon!")}function y(){n.push(`/inventory-audit/scorecards/new?duplicate=${e.params.id}`)}function x(){alert("Data export feature coming soon!")}function _(k){n.push(`/inventory-audit/plans/${k}`)}return(k,w)=>{var S;return T(),R("div",T1n,[u("div",$1n,[u("div",M1n,[b(v(J),{variant:"ghost",onClick:h},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[w[1]||(w[1]=u("h1",{class:"text-2xl font-bold text-gray-900"}," Compliance Scorecard ",-1)),u("p",E1n,$(r.value.name),1)])]),u("div",D1n,[b(v(J),{variant:"outline",onClick:m},{default:D(()=>[b(v(yn),{class:"w-4 h-4 mr-2"}),w[2]||(w[2]=W(" Edit Scorecard ",-1))]),_:1}),b(v(J),{variant:"solid",onClick:g},{default:D(()=>[b(v(vt),{class:"w-4 h-4 mr-2"}),w[3]||(w[3]=W(" Generate Report ",-1))]),_:1})])]),u("div",R1n,[u("div",P1n,[u("div",I1n,[w[10]||(w[10]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Scorecard Overview",-1)),u("div",O1n,[u("div",null,[w[4]||(w[4]=u("label",{class:"block text-sm font-medium text-gray-700"},"Audit Plan",-1)),u("p",L1n,$(r.value.audit_plan_name||r.value.audit_plan||"-"),1)]),u("div",null,[w[5]||(w[5]=u("label",{class:"block text-sm font-medium text-gray-700"},"Period",-1)),u("p",V1n,$(r.value.period||"-"),1)]),u("div",null,[w[6]||(w[6]=u("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),b(v(De),{variant:l(r.value.status)},{default:D(()=>[W($(r.value.status||"Draft"),1)]),_:1},8,["variant"])]),u("div",null,[w[7]||(w[7]=u("label",{class:"block text-sm font-medium text-gray-700"},"Overall Score",-1)),u("div",N1n,[u("div",j1n,$(r.value.overall_score||0)+"%",1),b(v(De),{variant:d(r.value.overall_score)},{default:D(()=>[W($(c(r.value.overall_score)),1)]),_:1},8,["variant"])])]),u("div",null,[w[8]||(w[8]=u("label",{class:"block text-sm font-medium text-gray-700"},"Created By",-1)),u("p",F1n,$(r.value.created_by||"-"),1)]),u("div",null,[w[9]||(w[9]=u("label",{class:"block text-sm font-medium text-gray-700"},"Created Date",-1)),u("p",B1n,$(f(r.value.creation)),1)])])]),u("div",z1n,[w[15]||(w[15]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Compliance Categories",-1)),r.value.compliance_categories&&r.value.compliance_categories.length>0?(T(),R("div",U1n,[(T(!0),R(xe,null,_e(r.value.compliance_categories,C=>(T(),R("div",{key:C.name,class:"border rounded-lg p-4"},[u("div",H1n,[u("h4",q1n,$(C.category_name),1),u("div",W1n,[u("span",G1n,$(C.score)+"%",1),b(v(De),{variant:d(C.score)},{default:D(()=>[W($(c(C.score)),1)]),_:2},1032,["variant"])])]),u("div",Y1n,[u("div",null,[w[11]||(w[11]=u("span",{class:"text-gray-500"},"Total Checks:",-1)),u("span",K1n,$(C.total_checks),1)]),u("div",null,[w[12]||(w[12]=u("span",{class:"text-gray-500"},"Passed:",-1)),u("span",X1n,$(C.passed_checks),1)]),u("div",null,[w[13]||(w[13]=u("span",{class:"text-gray-500"},"Failed:",-1)),u("span",Q1n,$(C.failed_checks),1)]),u("div",null,[w[14]||(w[14]=u("span",{class:"text-gray-500"},"Weight:",-1)),u("span",Z1n,$(C.weight)+"%",1)])]),C.findings?(T(),R("div",J1n,[u("p",ebn,$(C.findings),1)])):se("",!0)]))),128))])):(T(),R("div",tbn," No compliance categories defined. "))]),u("div",nbn,[w[16]||(w[16]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Key Findings",-1)),u("div",rbn,[u("p",sbn,$(r.value.key_findings||"No key findings recorded."),1)])]),u("div",ibn,[w[17]||(w[17]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Recommendations",-1)),u("div",abn,[u("p",obn,$(r.value.recommendations||"No recommendations provided."),1)])])]),u("div",lbn,[u("div",ubn,[w[24]||(w[24]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Score Summary",-1)),u("div",dbn,[u("div",cbn,[u("div",fbn,[(T(),R("svg",pbn,[w[18]||(w[18]=u("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none",class:"text-gray-200"},null,-1)),u("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-dasharray":`${(r.value.overall_score||0)*.628} 62.8`,class:"text-blue-600"},null,8,hbn)])),u("div",mbn,[u("span",gbn,$(r.value.overall_score||0)+"%",1)])]),w[19]||(w[19]=u("p",{class:"text-sm text-gray-600"},"Overall Compliance",-1))]),u("div",vbn,[u("div",ybn,[w[20]||(w[20]=u("span",{class:"text-gray-600"},"Categories Assessed:",-1)),u("span",bbn,$(((S=r.value.compliance_categories)==null?void 0:S.length)||0),1)]),u("div",xbn,[w[21]||(w[21]=u("span",{class:"text-gray-600"},"Total Checks:",-1)),u("span",_bn,$(s.value),1)]),u("div",wbn,[w[22]||(w[22]=u("span",{class:"text-gray-600"},"Passed Checks:",-1)),u("span",kbn,$(i.value),1)]),u("div",Sbn,[w[23]||(w[23]=u("span",{class:"text-gray-600"},"Failed Checks:",-1)),u("span",Cbn,$(a.value),1)])])])]),u("div",Abn,[w[29]||(w[29]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),u("div",Tbn,[b(v(J),{variant:"outline",class:"w-full justify-start",onClick:m},{default:D(()=>[b(v(yn),{class:"w-4 h-4 mr-2"}),w[25]||(w[25]=W(" Edit Scorecard ",-1))]),_:1}),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:g},{default:D(()=>[b(v(vt),{class:"w-4 h-4 mr-2"}),w[26]||(w[26]=W(" Generate Report ",-1))]),_:1}),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:y},{default:D(()=>[b(v(Yi),{class:"w-4 h-4 mr-2"}),w[27]||(w[27]=W(" Duplicate Scorecard ",-1))]),_:1}),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:x},{default:D(()=>[b(v(xn),{class:"w-4 h-4 mr-2"}),w[28]||(w[28]=W(" Export Data ",-1))]),_:1})])]),u("div",$bn,[w[31]||(w[31]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Related Records",-1)),u("div",Mbn,[r.value.audit_plan?(T(),R("div",Ebn,[w[30]||(w[30]=u("label",{class:"block text-sm font-medium text-gray-700"},"Audit Plan",-1)),b(v(J),{variant:"link",class:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:w[0]||(w[0]=C=>_(r.value.audit_plan))},{default:D(()=>[W($(r.value.audit_plan_name||r.value.audit_plan),1)]),_:1})])):se("",!0)])]),u("div",Dbn,[w[36]||(w[36]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",Rbn,[u("div",Pbn,[w[33]||(w[33]=u("div",{class:"w-2 h-2 bg-blue-500 rounded-full mt-2"},null,-1)),u("div",Ibn,[w[32]||(w[32]=u("p",{class:"text-sm font-medium text-gray-900"},"Scorecard Created",-1)),u("p",Obn,$(p(r.value.creation)),1)])]),r.value.modified!==r.value.creation?(T(),R("div",Lbn,[w[35]||(w[35]=u("div",{class:"w-2 h-2 bg-green-500 rounded-full mt-2"},null,-1)),u("div",Vbn,[w[34]||(w[34]=u("p",{class:"text-sm font-medium text-gray-900"},"Last Modified",-1)),u("p",Nbn,$(p(r.value.modified)),1)])])):se("",!0)])])])])])}}},Fbn={class:"p-6"},Bbn={class:"flex items-center justify-between mb-6"},zbn={class:"flex items-center gap-4"},Ubn={class:"text-2xl font-bold text-gray-900"},Hbn={class:"text-gray-500 mt-1"},qbn={class:"flex items-center gap-2"},Wbn={class:"max-w-4xl"},Gbn={class:"space-y-6"},Ybn={class:"bg-white rounded-lg border p-6"},Kbn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xbn={class:"bg-white rounded-lg border p-6"},Qbn={class:"flex items-center justify-between mb-4"},Zbn={class:"flex items-center gap-2"},Jbn={class:"overflow-x-auto"},exn={class:"min-w-full divide-y divide-gray-200"},txn={class:"bg-white divide-y divide-gray-200"},nxn={class:"px-4 py-4"},rxn={class:"px-4 py-4"},sxn={class:"px-4 py-4"},ixn={class:"px-4 py-4"},axn={class:"px-4 py-4"},oxn={class:"px-4 py-4"},lxn={class:"px-4 py-4"},uxn={class:"px-4 py-4"},dxn={class:"mt-4 pt-4 border-t"},cxn={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},fxn={class:"font-medium ml-2"},pxn={class:"font-medium ml-2"},hxn={class:"font-medium ml-2 text-blue-600"},mxn={class:"font-medium ml-2 text-green-600"},gxn={class:"bg-white rounded-lg border p-6"},vxn={class:"bg-white rounded-lg border p-6"},yxn={class:"bg-white rounded-lg border p-6"},bxn={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},xW={__name:"ComplianceScorecardForm",setup(t){const e=ta(),n=_n(),r=Q(!1),s=Q([]),i=Z(()=>e.params.id&&e.params.id!=="new"),a=Q({audit_plan:"",period:"",status:"Draft",overall_score:0,compliance_categories:[],key_findings:"",recommendations:"",notes:""}),o=Z(()=>a.value.compliance_categories.reduce((C,A)=>C+(A.weight||0),0)),l=Z(()=>{if(o.value===0)return 0;const C=a.value.compliance_categories.reduce((A,M)=>A+(M.score||0)*(M.weight||0),0);return Math.round(C/o.value)}),d=Z(()=>{if(a.value.compliance_categories.length===0)return 0;const C=a.value.compliance_categories.reduce((A,M)=>A+(M.score||0),0);return Math.round(C/a.value.compliance_categories.length)});yt(()=>ue(this,null,function*(){yield c(),i.value&&(yield f())}));function c(){return ue(this,null,function*(){try{const C=yield Ke("frappe.client.get_list",{doctype:"Audit Plan",fields:["name","plan_title"],limit_page_length:0});s.value=C.map(A=>({label:A.plan_title||A.name,value:A.name}))}catch(C){console.error("Error loading audit plans:",C)}})}function f(){return ue(this,null,function*(){try{const C=yield Ke("frappe.client.get",{doctype:"Compliance Scorecard",name:e.params.id});a.value={audit_plan:C.audit_plan||"",period:C.period||"",status:C.status||"Draft",overall_score:C.overall_score||0,compliance_categories:C.compliance_categories||[],key_findings:C.key_findings||"",recommendations:C.recommendations||"",notes:C.notes||""}}catch(C){console.error("Error loading scorecard:",C)}})}function p(){s.value.find(A=>A.value===a.value.audit_plan)&&a.value.period}function h(){a.value.compliance_categories.push({category_name:"",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:0,findings:""})}function m(C){a.value.compliance_categories.splice(C,1),x()}function g(C){const A=a.value.compliance_categories[C];A.total_checks&&A.passed_checks&&(A.failed_checks=A.total_checks-A.passed_checks,y(C))}function y(C){const A=a.value.compliance_categories[C];A.total_checks>0&&(A.score=Math.round(A.passed_checks/A.total_checks*100),x())}function x(){o.value>0?a.value.overall_score=l.value:a.value.overall_score=d.value}function _(){return ue(this,null,function*(){if(!a.value.audit_plan){alert("Please select an audit plan first");return}try{const C=yield Ke("frappe.client.get",{doctype:"Audit Plan",name:a.value.audit_plan}),A=[{category_name:"Planning & Preparation",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:20,findings:""},{category_name:"Execution & Documentation",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:25,findings:""},{category_name:"Quality Control",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:20,findings:""},{category_name:"Compliance & Standards",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:20,findings:""},{category_name:"Reporting & Follow-up",score:0,total_checks:0,passed_checks:0,failed_checks:0,weight:15,findings:""}];a.value.compliance_categories=A,x()}catch(C){console.error("Error loading from audit plan:",C)}})}function k(){return ue(this,null,function*(){if(!a.value.audit_plan){alert("Audit plan is required");return}r.value=!0;try{if(i.value)yield Ke("frappe.client.set_value",{doctype:"Compliance Scorecard",name:e.params.id,fieldname:a.value}),n.push(`/inventory-audit/scorecards/${e.params.id}`);else{const C=yield Ke("frappe.client.insert",{doc:ge({doctype:"Compliance Scorecard"},a.value)});n.push(`/inventory-audit/scorecards/${C.name}`)}}catch(C){console.error("Error saving scorecard:",C),alert("Error saving scorecard: "+C.message)}finally{r.value=!1}})}function w(){i.value?n.push(`/inventory-audit/scorecards/${e.params.id}`):n.push("/inventory-audit/scorecards")}const S=[{label:"Draft",value:"Draft"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"},{label:"Approved",value:"Approved"},{label:"Archived",value:"Archived"}];return(C,A)=>(T(),R("div",Fbn,[u("div",Bbn,[u("div",zbn,[b(v(J),{variant:"ghost",onClick:w},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",Ubn,$(i.value?"Edit Compliance Scorecard":"New Compliance Scorecard"),1),u("p",Hbn,$(i.value?`Editing ${v(e).params.id}`:"Create a new compliance scorecard"),1)])]),u("div",qbn,[b(v(J),{variant:"outline",onClick:w},{default:D(()=>[...A[7]||(A[7]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:k,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(i.value?"Save Changes":"Create Scorecard"),1)]),_:1},8,["loading"])])]),u("div",Wbn,[u("div",Gbn,[u("div",Ybn,[A[12]||(A[12]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),u("div",Kbn,[u("div",null,[A[8]||(A[8]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Audit Plan "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"autocomplete",modelValue:a.value.audit_plan,"onUpdate:modelValue":A[0]||(A[0]=M=>a.value.audit_plan=M),options:s.value,placeholder:"Select audit plan",onChange:p},null,8,["modelValue","options"])]),u("div",null,[A[9]||(A[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Period",-1)),b(v(ve),{type:"text",modelValue:a.value.period,"onUpdate:modelValue":A[1]||(A[1]=M=>a.value.period=M),placeholder:"e.g., Q4 2025"},null,8,["modelValue"])]),u("div",null,[A[10]||(A[10]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(v(ve),{type:"select",modelValue:a.value.status,"onUpdate:modelValue":A[2]||(A[2]=M=>a.value.status=M),options:S},null,8,["modelValue"])]),u("div",null,[A[11]||(A[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Overall Score (%)",-1)),b(v(ve),{type:"number",modelValue:a.value.overall_score,"onUpdate:modelValue":A[3]||(A[3]=M=>a.value.overall_score=M),placeholder:"0",min:"0",max:"100",onInput:x},null,8,["modelValue"])])])]),u("div",Xbn,[u("div",Qbn,[A[15]||(A[15]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Compliance Categories",-1)),u("div",Zbn,[b(v(J),{variant:"outline",size:"sm",onClick:_},{default:D(()=>[b(v(xn),{class:"w-4 h-4 mr-2"}),A[13]||(A[13]=W(" Load from Plan ",-1))]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:h},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),A[14]||(A[14]=W(" Add Category ",-1))]),_:1})])]),u("div",Jbn,[u("table",exn,[A[16]||(A[16]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category Name"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Score (%)"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total Checks"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Passed"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Failed"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Weight (%)"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Findings"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",txn,[(T(!0),R(xe,null,_e(a.value.compliance_categories,(M,E)=>(T(),R("tr",{key:E,class:"hover:bg-gray-50"},[u("td",nxn,[b(v(ve),{type:"text",modelValue:M.category_name,"onUpdate:modelValue":P=>M.category_name=P,placeholder:"Category name",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",rxn,[b(v(ve),{type:"number",modelValue:M.score,"onUpdate:modelValue":P=>M.score=P,placeholder:"0",min:"0",max:"100",class:"w-full",onInput:x},null,8,["modelValue","onUpdate:modelValue"])]),u("td",sxn,[b(v(ve),{type:"number",modelValue:M.total_checks,"onUpdate:modelValue":P=>M.total_checks=P,placeholder:"0",min:"0",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",ixn,[b(v(ve),{type:"number",modelValue:M.passed_checks,"onUpdate:modelValue":P=>M.passed_checks=P,placeholder:"0",min:"0",class:"w-full",onInput:P=>g(E)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),u("td",axn,[b(v(ve),{type:"number",modelValue:M.failed_checks,"onUpdate:modelValue":P=>M.failed_checks=P,placeholder:"0",min:"0",class:"w-full",onInput:P=>y(E)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),u("td",oxn,[b(v(ve),{type:"number",modelValue:M.weight,"onUpdate:modelValue":P=>M.weight=P,placeholder:"0",min:"0",max:"100",class:"w-full",onInput:x},null,8,["modelValue","onUpdate:modelValue"])]),u("td",lxn,[b(v(ve),{type:"text",modelValue:M.findings,"onUpdate:modelValue":P=>M.findings=P,placeholder:"Key findings",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",uxn,[b(v(J),{variant:"ghost",size:"sm",onClick:P=>m(E)},{default:D(()=>[b(v(is),{class:"w-4 h-4 text-red-600"})]),_:1},8,["onClick"])])]))),128))])])]),u("div",dxn,[u("div",cxn,[u("div",null,[A[17]||(A[17]=u("span",{class:"text-gray-500"},"Total Categories:",-1)),u("span",fxn,$(a.value.compliance_categories.length),1)]),u("div",null,[A[18]||(A[18]=u("span",{class:"text-gray-500"},"Total Weight:",-1)),u("span",pxn,$(o.value)+"%",1)]),u("div",null,[A[19]||(A[19]=u("span",{class:"text-gray-500"},"Weighted Score:",-1)),u("span",hxn,$(l.value)+"%",1)]),u("div",null,[A[20]||(A[20]=u("span",{class:"text-gray-500"},"Auto-calculated:",-1)),u("span",mxn,$(d.value)+"%",1)])])])]),u("div",gxn,[A[21]||(A[21]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Key Findings",-1)),b(v(ve),{type:"textarea",modelValue:a.value.key_findings,"onUpdate:modelValue":A[4]||(A[4]=M=>a.value.key_findings=M),placeholder:"Summarize the key findings from the compliance assessment...",rows:4},null,8,["modelValue"])]),u("div",vxn,[A[22]||(A[22]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Recommendations",-1)),b(v(ve),{type:"textarea",modelValue:a.value.recommendations,"onUpdate:modelValue":A[5]||(A[5]=M=>a.value.recommendations=M),placeholder:"Provide recommendations for improving compliance...",rows:4},null,8,["modelValue"])]),u("div",yxn,[A[23]||(A[23]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Additional Notes",-1)),b(v(ve),{type:"textarea",modelValue:a.value.notes,"onUpdate:modelValue":A[6]||(A[6]=M=>a.value.notes=M),placeholder:"Any additional notes or observations...",rows:3},null,8,["modelValue"])])]),u("div",bxn,[b(v(J),{variant:"outline",onClick:w},{default:D(()=>[...A[24]||(A[24]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:k,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(i.value?"Save Changes":"Create Scorecard"),1)]),_:1},8,["loading"])])])]))}},xxn={class:"p-6"},_xn={class:"flex justify-between items-center mb-6"},wxn={class:"flex gap-2"},kxn={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Sxn={class:"bg-white rounded-lg border p-4"},Cxn={class:"text-2xl font-bold"},Axn={class:"bg-white rounded-lg border p-4"},Txn={class:"bg-white rounded-lg border p-4"},$xn={class:"flex items-center gap-2 mt-1"},Mxn={class:"bg-white rounded-lg border p-4"},Exn={class:"text-lg font-medium"},Dxn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Rxn=["onClick"],Pxn={class:"px-4 py-3 border-b bg-gray-50 flex items-center justify-between"},Ixn={class:"font-medium text-gray-900"},Oxn={class:"text-sm text-gray-500"},Lxn={class:"text-right"},Vxn={class:"p-4"},Nxn={class:"text-center mb-4"},jxn={class:"w-full bg-gray-200 rounded-full h-3 mt-2"},Fxn={class:"space-y-3"},Bxn={class:"flex items-center justify-between text-sm"},zxn={class:"font-medium"},Uxn={class:"flex items-center justify-between text-sm"},Hxn={class:"font-medium"},qxn={class:"flex items-center justify-between text-sm"},Wxn={class:"font-medium"},Gxn={class:"flex items-center justify-between text-sm"},Yxn={class:"font-medium"},Kxn={class:"flex items-center justify-between text-sm"},Xxn={class:"font-medium"},Qxn={class:"mt-4 pt-4 border-t grid grid-cols-3 gap-2 text-center text-sm"},Zxn={class:"font-medium"},Jxn={class:"font-medium"},e_n={class:"font-medium"},t_n={class:"px-4 py-2 bg-gray-50 border-t flex items-center justify-between text-sm text-gray-500"},n_n={key:0,class:"bg-white rounded-lg border p-12 text-center text-gray-500"},r_n={__name:"ComplianceScorecardList",setup(t){const e=_n(),n=tu(),r=Q(!1),s=Q(!1),i=Z(()=>n.scorecards),a=Z(()=>i.value.length===0?0:Math.round(i.value.reduce((k,w)=>k+(w.overall_compliance_score||0),0)/i.value.length)),o=Z(()=>i.value.reduce((k,w)=>{const S=w.grade||"N/A";return k[S]=(k[S]||0)+1,k},{})),l=Z(()=>{if(i.value.length===0)return"-";const k=i.value.reduce((w,S)=>{const C=new Date(S.calculation_date||0);return C>w?C:w},new Date(0));return _(k.toISOString())});yt(()=>ue(this,null,function*(){yield d()}));function d(){return ue(this,null,function*(){r.value=!0;try{yield n.loadScorecards()}finally{r.value=!1}})}function c(){return ue(this,null,function*(){s.value=!0;try{for(const k of i.value)yield n.recalculateScorecard(k.audit_plan)}finally{s.value=!1}})}function f(k){return ue(this,null,function*(){yield n.recalculateScorecard(k)})}function p(k){return ue(this,null,function*(){e.push({name:"ComplianceScorecardDetail",params:{id:k}})})}function h(){e.push({name:"NewComplianceScorecard"})}function m(k){return k>=90?"text-green-600":k>=70?"text-blue-600":k>=50?"text-yellow-600":"text-red-600"}function g(k){return k>=90?"bg-green-500":k>=70?"bg-blue-500":k>=50?"bg-yellow-500":"bg-red-500"}function y(k){return{A:"text-green-600",B:"text-blue-600",C:"text-yellow-600",D:"text-orange-600",F:"text-red-600"}[k]||"text-gray-600"}function x(k){return{A:"bg-green-100 text-green-700",B:"bg-blue-100 text-blue-700",C:"bg-yellow-100 text-yellow-700",D:"bg-orange-100 text-orange-700",F:"bg-red-100 text-red-700"}[k]||"bg-gray-100 text-gray-700"}function _(k){return k?new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}return(k,w)=>(T(),R("div",xxn,[u("div",_xn,[w[2]||(w[2]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Compliance Scorecards"),u("p",{class:"text-gray-600"},"Track audit compliance metrics and performance grades")],-1)),u("div",wxn,[b(v(J),{onClick:d,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(v(J),{onClick:c,loading:s.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(rb),{class:"w-4 h-4 mr-2"}),w[0]||(w[0]=W(" Recalculate All ",-1))]),_:1},8,["loading"]),b(v(J),{onClick:h,variant:"solid",size:"sm"},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),w[1]||(w[1]=W(" New Scorecard ",-1))]),_:1})])]),u("div",kxn,[u("div",Sxn,[w[3]||(w[3]=u("p",{class:"text-sm text-gray-500"},"Total Scorecards",-1)),u("p",Cxn,$(i.value.length),1)]),u("div",Axn,[w[4]||(w[4]=u("p",{class:"text-sm text-gray-500"},"Average Score",-1)),u("p",{class:pe(["text-2xl font-bold",m(a.value)])},$(a.value)+"%",3)]),u("div",Txn,[w[5]||(w[5]=u("p",{class:"text-sm text-gray-500"},"Grade Distribution",-1)),u("div",$xn,[(T(!0),R(xe,null,_e(o.value,(S,C)=>(T(),R("span",{key:C,class:pe(["text-sm px-2 py-1 rounded-full",x(C)])},$(C)+": "+$(S),3))),128))])]),u("div",Mxn,[w[6]||(w[6]=u("p",{class:"text-sm text-gray-500"},"Last Updated",-1)),u("p",Exn,$(l.value),1)])]),u("div",Dxn,[(T(!0),R(xe,null,_e(i.value,S=>(T(),R("div",{key:S.name,class:"bg-white rounded-lg border shadow-sm overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:C=>p(S.name)},[u("div",Pxn,[u("div",null,[u("h4",Ixn,$(S.audit_plan_title),1),u("p",Oxn,$(S.scorecard_id),1)]),u("div",Lxn,[u("p",{class:pe(["text-3xl font-bold",y(S.grade)])},$(S.grade),3)])]),u("div",Vxn,[u("div",Nxn,[w[7]||(w[7]=u("p",{class:"text-sm text-gray-500"},"Overall Compliance Score",-1)),u("p",{class:pe(["text-4xl font-bold",m(S.overall_compliance_score)])},$(Math.round(S.overall_compliance_score||0))+"% ",3),u("div",jxn,[u("div",{class:pe(["h-full rounded-full transition-all duration-500",g(S.overall_compliance_score)]),style:rt({width:`${S.overall_compliance_score||0}%`})},null,6)])]),u("div",Fxn,[u("div",Bxn,[w[8]||(w[8]=u("span",{class:"text-gray-600"},"Completion Rate",-1)),u("span",zxn,$(Math.round(S.completion_rate||0))+"%",1)]),u("div",Uxn,[w[9]||(w[9]=u("span",{class:"text-gray-600"},"Accuracy Score",-1)),u("span",Hxn,$(Math.round(S.accuracy_score||0))+"%",1)]),u("div",qxn,[w[10]||(w[10]=u("span",{class:"text-gray-600"},"Timeliness Score",-1)),u("span",Wxn,$(Math.round(S.timeliness_score||0))+"%",1)]),u("div",Gxn,[w[11]||(w[11]=u("span",{class:"text-gray-600"},"SLA Compliance",-1)),u("span",Yxn,$(Math.round(S.sla_compliance_rate||0))+"%",1)]),u("div",Kxn,[w[12]||(w[12]=u("span",{class:"text-gray-600"},"Issue Resolution",-1)),u("span",Xxn,$(Math.round(S.issue_resolution_rate||0))+"%",1)])]),u("div",Qxn,[u("div",null,[w[13]||(w[13]=u("p",{class:"text-gray-500"},"Sessions",-1)),u("p",Zxn,$(S.completed_sessions||0)+"/"+$(S.total_sessions||0),1)]),u("div",null,[w[14]||(w[14]=u("p",{class:"text-gray-500"},"Cases",-1)),u("p",Jxn,$(S.resolved_variance_cases||0)+"/"+$(S.total_variance_cases||0),1)]),u("div",null,[w[15]||(w[15]=u("p",{class:"text-gray-500"},"Issues",-1)),u("p",e_n,$(S.resolved_issues||0)+"/"+$(S.total_issues||0),1)])])]),u("div",t_n,[u("span",null,"Last calculated: "+$(_(S.calculation_date)),1),b(v(J),{variant:"ghost",size:"sm",onClick:ut(C=>f(S.audit_plan),["stop"])},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])],8,Rxn))),128))]),i.value.length===0&&!r.value?(T(),R("div",n_n,[b(v(KD),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),w[16]||(w[16]=u("p",null,"No scorecards available",-1)),w[17]||(w[17]=u("p",{class:"text-sm mt-1"},"Scorecards are created automatically when audit plans are set up",-1))])):se("",!0)]))}},s_n={class:"p-6"},i_n={class:"flex justify-between items-center mb-6"},a_n={class:"flex gap-2"},o_n={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},l_n={class:"bg-white rounded-lg border p-4 shadow-sm"},u_n={class:"flex items-center justify-between"},d_n={class:"text-2xl font-bold text-gray-900"},c_n={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},f_n={class:"mt-2 flex items-center gap-4 text-sm"},p_n={class:"text-green-600"},h_n={class:"text-gray-500"},m_n={class:"bg-white rounded-lg border p-4 shadow-sm"},g_n={class:"flex items-center justify-between"},v_n={class:"text-2xl font-bold text-gray-900"},y_n={class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},b_n={class:"mt-2 flex items-center gap-4 text-sm"},x_n={class:"text-yellow-600"},__n={class:"bg-white rounded-lg border p-4 shadow-sm"},w_n={class:"flex items-center justify-between"},k_n={class:"text-2xl font-bold text-gray-900"},S_n={class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},C_n={class:"mt-2 flex items-center gap-4 text-sm"},A_n={class:"text-orange-600"},T_n={class:"text-red-600"},$_n={class:"bg-white rounded-lg border p-4 shadow-sm"},M_n={class:"flex items-center justify-between"},E_n={class:"text-2xl font-bold text-gray-900"},D_n={class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},R_n={class:"mt-2"},P_n={class:"w-full bg-gray-200 rounded-full h-2"},I_n={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},O_n={class:"bg-white rounded-lg border p-4 shadow-sm"},L_n={class:"flex items-center justify-between mb-4"},V_n={class:"flex items-center gap-8"},N_n={class:"text-center"},j_n={class:"text-3xl font-bold text-yellow-600"},F_n={class:"text-center"},B_n={class:"text-3xl font-bold text-gray-600"},z_n={class:"bg-white rounded-lg border p-4 shadow-sm"},U_n={class:"flex items-center justify-between mb-4"},H_n={class:"flex items-center gap-8"},q_n={class:"text-center"},W_n={class:"text-3xl font-bold text-blue-600"},G_n={class:"text-center"},Y_n={class:"text-3xl font-bold text-gray-600"},K_n={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},X_n={class:"bg-white rounded-lg border shadow-sm"},Q_n={class:"px-4 py-3 border-b flex items-center justify-between"},Z_n={key:0,class:"divide-y"},J_n=["onClick"],ewn={class:"flex items-center justify-between mb-2"},twn={class:"font-medium text-gray-900"},nwn={class:"flex items-center gap-4 text-sm text-gray-500"},rwn={class:"flex items-center gap-1"},swn={class:"flex items-center gap-1"},iwn={key:1,class:"p-8 text-center text-gray-500"},awn={class:"bg-white rounded-lg border shadow-sm"},own={class:"px-4 py-3 border-b flex items-center justify-between"},lwn={key:0,class:"divide-y"},uwn=["onClick"],dwn={class:"flex items-center justify-between mb-2"},cwn={class:"font-medium text-gray-900"},fwn={class:"flex items-center gap-4 text-sm text-gray-500"},pwn={class:"flex items-center gap-1"},hwn={key:0,class:"flex items-center gap-1 text-orange-600"},mwn={class:"mt-2 flex items-center gap-2"},gwn={key:0,class:"text-xs text-green-600"},vwn={key:1,class:"text-xs text-gray-400"},ywn={key:2,class:"text-xs text-green-600"},bwn={key:3,class:"text-xs text-gray-400"},xwn={key:4,class:"text-xs text-green-600"},_wn={key:5,class:"text-xs text-gray-400"},wwn={key:1,class:"p-8 text-center text-gray-500"},kwn={class:"bg-white rounded-lg border shadow-sm"},Swn={class:"px-4 py-3 border-b flex items-center justify-between"},Cwn={key:0,class:"divide-y"},Awn=["onClick"],Twn={class:"flex items-center justify-between mb-2"},$wn={class:"font-medium text-gray-900"},Mwn={class:"flex items-center gap-2"},Ewn={class:"flex items-center gap-4 text-sm text-gray-500"},Dwn={class:"flex items-center gap-1"},Rwn={class:"flex items-center gap-1"},Pwn={key:0,class:"flex items-center gap-1"},Iwn={key:1,class:"p-8 text-center text-gray-500"},Own={class:"bg-white rounded-lg border shadow-sm"},Lwn={class:"px-4 py-3 border-b flex items-center justify-between"},Vwn={key:0,class:"divide-y"},Nwn=["onClick"],jwn={class:"flex items-center justify-between mb-2"},Fwn={class:"font-medium text-gray-900"},Bwn={class:"flex items-center gap-2"},zwn={class:"text-gray-500"},Uwn={class:"w-full bg-gray-200 rounded-full h-2"},Hwn={key:1,class:"p-8 text-center text-gray-500"},qwn={__name:"InventoryAuditDashboard",setup(t){const e=_n(),n=tu(),r=Q(!1),s=Z(()=>n.dashboardStats),i=Z(()=>n.plans.slice(0,5)),a=Z(()=>n.sessions.slice(0,5)),o=Z(()=>n.getOpenVarianceCases.slice(0,5)),l=Z(()=>n.scorecards);yt(()=>ue(this,null,function*(){yield d()}));function d(){return ue(this,null,function*(){r.value=!0;try{yield n.loadAllData()}finally{r.value=!1}})}function c(P){return{Planned:"blue","In Progress":"yellow",Completed:"green","On Hold":"gray",Cancelled:"red",New:"blue","Under Investigation":"yellow","Resolution Proposed":"orange",Resolved:"green",Closed:"gray"}[P]||"gray"}function f(P){return{Critical:"red",High:"orange",Medium:"yellow",Low:"blue"}[P]||"gray"}function p(P){return P>=90?"bg-green-500":P>=70?"bg-yellow-500":P>=50?"bg-orange-500":"bg-red-500"}function h(P){return{A:"text-green-600",B:"text-blue-600",C:"text-yellow-600",D:"text-orange-600",F:"text-red-600"}[P]||"text-gray-600"}function m(P){return new Intl.NumberFormat().format(P||0)}function g(P){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(P||0)}function y(){e.push("/inventory-audit/plans")}function x(){e.push("/inventory-audit/sessions")}function _(){e.push("/inventory-audit/variance-cases")}function k(){e.push("/inventory-audit/scorecards")}function w(){e.push("/inventory-audit/issues")}function S(){e.push("/inventory-audit/items")}function C(P){e.push(`/inventory-audit/plans/${P}`)}function A(P){e.push(`/inventory-audit/sessions/${P}`)}function M(P){e.push(`/inventory-audit/variance-cases/${P}`)}function E(P){e.push(`/inventory-audit/scorecards/${P}`)}return(P,I)=>{var F,L,z,N,q,V,O,X,j,U,G,ee;return T(),R("div",s_n,[u("div",i_n,[I[1]||(I[1]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Inventory Audit Dashboard"),u("p",{class:"text-gray-600"},"Overview of stock take audits, variance analysis, and compliance metrics")],-1)),u("div",a_n,[b(v(J),{onClick:d,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(v(J),{onClick:y},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),I[0]||(I[0]=W(" New Audit Plan ",-1))]),_:1})])]),u("div",o_n,[u("div",l_n,[u("div",u_n,[u("div",null,[I[2]||(I[2]=u("p",{class:"text-sm text-gray-500"},"Audit Plans",-1)),u("p",d_n,$(((F=s.value.plans)==null?void 0:F.total)||0),1)]),u("div",c_n,[b(v(Ar),{class:"w-6 h-6 text-blue-600"})])]),u("div",f_n,[u("span",p_n,$(((L=s.value.plans)==null?void 0:L.active)||0)+" active",1),u("span",h_n,$(((z=s.value.plans)==null?void 0:z.completed)||0)+" completed",1)])]),u("div",m_n,[u("div",g_n,[u("div",null,[I[3]||(I[3]=u("p",{class:"text-sm text-gray-500"},"Stock Take Sessions",-1)),u("p",v_n,$(((N=s.value.sessions)==null?void 0:N.total)||0),1)]),u("div",y_n,[b(v(Qa),{class:"w-6 h-6 text-green-600"})])]),u("div",b_n,[u("span",x_n,$(((q=s.value.sessions)==null?void 0:q.in_progress)||0)+" in progress",1)])]),u("div",__n,[u("div",w_n,[u("div",null,[I[4]||(I[4]=u("p",{class:"text-sm text-gray-500"},"Variance Cases",-1)),u("p",k_n,$(((V=s.value.variance_cases)==null?void 0:V.total)||0),1)]),u("div",S_n,[b(v(rn),{class:"w-6 h-6 text-orange-600"})])]),u("div",C_n,[u("span",A_n,$(((O=s.value.variance_cases)==null?void 0:O.open)||0)+" open",1),u("span",T_n,$(((X=s.value.variance_cases)==null?void 0:X.sla_breached)||0)+" SLA breached",1)])]),u("div",$_n,[u("div",M_n,[u("div",null,[I[5]||(I[5]=u("p",{class:"text-sm text-gray-500"},"Avg Compliance Score",-1)),u("p",E_n,$(Math.round(s.value.avg_compliance_score||0))+"%",1)]),u("div",D_n,[b(v($l),{class:"w-6 h-6 text-purple-600"})])]),u("div",R_n,[u("div",P_n,[u("div",{class:pe(["h-2 rounded-full transition-all duration-300",p(s.value.avg_compliance_score)]),style:rt({width:`${s.value.avg_compliance_score||0}%`})},null,6)])])])]),u("div",I_n,[u("div",O_n,[u("div",L_n,[I[7]||(I[7]=u("h3",{class:"font-semibold text-gray-900"},"Stock Take Issues",-1)),b(v(J),{variant:"ghost",size:"sm",onClick:w},{default:D(()=>[...I[6]||(I[6]=[W("View All",-1)])]),_:1})]),u("div",V_n,[u("div",N_n,[u("p",j_n,$(((j=s.value.issues)==null?void 0:j.open)||0),1),I[8]||(I[8]=u("p",{class:"text-sm text-gray-500"},"Open Issues",-1))]),u("div",F_n,[u("p",B_n,$(((U=s.value.issues)==null?void 0:U.total)||0),1),I[9]||(I[9]=u("p",{class:"text-sm text-gray-500"},"Total Issues",-1))])])]),u("div",z_n,[u("div",U_n,[I[11]||(I[11]=u("h3",{class:"font-semibold text-gray-900"},"Inventory Items",-1)),b(v(J),{variant:"ghost",size:"sm",onClick:S},{default:D(()=>[...I[10]||(I[10]=[W("View All",-1)])]),_:1})]),u("div",H_n,[u("div",q_n,[u("p",W_n,$(((G=s.value.items)==null?void 0:G.active)||0),1),I[12]||(I[12]=u("p",{class:"text-sm text-gray-500"},"Active Items",-1))]),u("div",G_n,[u("p",Y_n,$(((ee=s.value.items)==null?void 0:ee.total)||0),1),I[13]||(I[13]=u("p",{class:"text-sm text-gray-500"},"Total Items",-1))])])])]),u("div",K_n,[u("div",X_n,[u("div",Q_n,[I[15]||(I[15]=u("h3",{class:"font-semibold text-gray-900"},"Recent Audit Plans",-1)),b(v(J),{variant:"ghost",size:"sm",onClick:y},{default:D(()=>[...I[14]||(I[14]=[W("View All",-1)])]),_:1})]),i.value.length>0?(T(),R("div",Z_n,[(T(!0),R(xe,null,_e(i.value,ie=>(T(),R("div",{key:ie.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:ne=>C(ie.name)},[u("div",ewn,[u("span",twn,$(ie.plan_title),1),b(v(De),{variant:c(ie.status)},{default:D(()=>[W($(ie.status),1)]),_:2},1032,["variant"])]),u("div",nwn,[u("span",rwn,[b(v(rr),{class:"w-4 h-4"}),W(" "+$(ie.audit_period),1)]),u("span",swn,[b(v(ob),{class:"w-4 h-4"}),W(" "+$(ie.warehouse||ie.branch||"All"),1)])])],8,J_n))),128))])):(T(),R("div",iwn,[b(v(Ar),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),I[17]||(I[17]=u("p",null,"No audit plans yet",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-2",onClick:y},{default:D(()=>[...I[16]||(I[16]=[W(" Create First Plan ",-1)])]),_:1})]))]),u("div",awn,[u("div",own,[I[19]||(I[19]=u("h3",{class:"font-semibold text-gray-900"},"Recent Stock Take Sessions",-1)),b(v(J),{variant:"ghost",size:"sm",onClick:x},{default:D(()=>[...I[18]||(I[18]=[W("View All",-1)])]),_:1})]),a.value.length>0?(T(),R("div",lwn,[(T(!0),R(xe,null,_e(a.value,ie=>(T(),R("div",{key:ie.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:ne=>A(ie.name)},[u("div",dwn,[u("span",cwn,$(ie.session_title),1),b(v(De),{variant:c(ie.status)},{default:D(()=>[W($(ie.status),1)]),_:2},1032,["variant"])]),u("div",fwn,[u("span",pwn,[b(v(Qa),{class:"w-4 h-4"}),W(" "+$(ie.total_items_counted||0)+" items ",1)]),ie.items_with_variance?(T(),R("span",hwn,[b(v(rn),{class:"w-4 h-4"}),W(" "+$(ie.items_with_variance)+" variances ",1)])):se("",!0)]),u("div",mwn,[ie.team_signoff?(T(),R("span",gwn," Team")):(T(),R("span",vwn," Team")),ie.supervisor_signoff?(T(),R("span",ywn," Supervisor")):(T(),R("span",bwn," Supervisor")),ie.auditor_signoff?(T(),R("span",xwn," Auditor")):(T(),R("span",_wn," Auditor"))])],8,uwn))),128))])):(T(),R("div",wwn,[b(v(Qa),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),I[21]||(I[21]=u("p",null,"No stock take sessions yet",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-2",onClick:x},{default:D(()=>[...I[20]||(I[20]=[W(" Start Session ",-1)])]),_:1})]))]),u("div",kwn,[u("div",Swn,[I[23]||(I[23]=u("h3",{class:"font-semibold text-gray-900"},"Open Variance Cases",-1)),b(v(J),{variant:"ghost",size:"sm",onClick:_},{default:D(()=>[...I[22]||(I[22]=[W("View All",-1)])]),_:1})]),o.value.length>0?(T(),R("div",Cwn,[(T(!0),R(xe,null,_e(o.value,ie=>(T(),R("div",{key:ie.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:ne=>M(ie.name)},[u("div",Twn,[u("span",$wn,$(ie.item_code),1),u("div",Mwn,[ie.is_sla_breached?(T(),he(v(De),{key:0,variant:"red"},{default:D(()=>[...I[24]||(I[24]=[W("SLA Breached",-1)])]),_:1})):se("",!0),b(v(De),{variant:f(ie.priority)},{default:D(()=>[W($(ie.priority),1)]),_:2},1032,["variant"])])]),u("div",Ewn,[u("span",Dwn,[b(v(wfe),{class:"w-4 h-4"}),W(" "+$(m(ie.variance_quantity))+" units ",1)]),u("span",Rwn,[b(v(ab),{class:"w-4 h-4"}),W(" "+$(g(ie.variance_value)),1)]),ie.root_cause?(T(),R("span",Pwn,[b(v(ei),{class:"w-4 h-4"}),W(" "+$(ie.root_cause),1)])):se("",!0)])],8,Awn))),128))])):(T(),R("div",Iwn,[b(v(Kt),{class:"w-12 h-12 mx-auto mb-3 text-green-300"}),I[25]||(I[25]=u("p",null,"No open variance cases",-1))]))]),u("div",Own,[u("div",Lwn,[I[27]||(I[27]=u("h3",{class:"font-semibold text-gray-900"},"Compliance Scorecards",-1)),b(v(J),{variant:"ghost",size:"sm",onClick:k},{default:D(()=>[...I[26]||(I[26]=[W("View All",-1)])]),_:1})]),l.value.length>0?(T(),R("div",Vwn,[(T(!0),R(xe,null,_e(l.value.slice(0,5),ie=>(T(),R("div",{key:ie.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:ne=>E(ie.name)},[u("div",jwn,[u("span",Fwn,$(ie.audit_plan_title),1),u("div",Bwn,[u("span",{class:pe(["text-lg font-bold",h(ie.grade)])},$(ie.grade),3),u("span",zwn,$(Math.round(ie.overall_compliance_score||0))+"%",1)])]),u("div",Uwn,[u("div",{class:pe(["h-2 rounded-full transition-all duration-300",p(ie.overall_compliance_score)]),style:rt({width:`${ie.overall_compliance_score||0}%`})},null,6)])],8,Nwn))),128))])):(T(),R("div",Hwn,[b(v(KD),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),I[28]||(I[28]=u("p",null,"No scorecards available",-1))]))])])])}}},Wwn={class:"p-6"},Gwn={class:"flex items-center justify-between mb-6"},Ywn={class:"flex items-center gap-4"},Kwn={class:"flex items-center gap-2"},Xwn={class:"bg-white rounded-lg border border-gray-200 mb-6"},Qwn={class:"border-b border-gray-200"},Zwn={class:"flex overflow-x-auto"},Jwn=["onClick"],e2n={class:"max-w-6xl"},t2n={class:"space-y-6"},n2n={key:0,class:"space-y-6"},r2n={class:"bg-white rounded-lg border p-6"},s2n={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},i2n={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},a2n={class:"space-y-4"},o2n={class:"flex items-center justify-between"},l2n={key:0},u2n={class:"flex items-center justify-between"},d2n={key:1},c2n={class:"space-y-4"},f2n={class:"flex items-center justify-between"},p2n={class:"flex items-center justify-between"},h2n={key:0},m2n={key:1,class:"space-y-6"},g2n={class:"bg-white rounded-lg border p-6"},v2n={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},y2n={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},b2n={class:"space-y-4"},x2n={class:"flex items-center justify-between"},_2n={key:0},w2n={class:"space-y-4"},k2n={class:"flex items-center justify-between"},S2n={class:"flex items-center justify-between"},C2n={key:2,class:"space-y-6"},A2n={class:"bg-white rounded-lg border p-6"},T2n={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},$2n={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},M2n={class:"space-y-4"},E2n={class:"flex items-center justify-between"},D2n={key:0},R2n={class:"space-y-4"},P2n={key:0,class:"flex items-center justify-between"},I2n={key:1},O2n={key:3,class:"space-y-6"},L2n={class:"bg-white rounded-lg border p-6"},V2n={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},N2n={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},j2n={class:"space-y-4"},F2n={class:"flex items-center justify-between"},B2n={class:"space-y-4"},z2n={class:"flex items-center justify-between"},U2n={key:0},H2n={key:4,class:"space-y-6"},q2n={class:"bg-white rounded-lg border p-6"},W2n={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},G2n={class:"space-y-6"},Y2n={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K2n={class:"mt-4"},X2n={class:"border-t pt-6"},Q2n={class:"mb-6"},Z2n={class:"space-y-3"},J2n={class:"text-sm font-medium text-gray-900"},ekn={class:"text-xs text-gray-500"},tkn={class:"flex items-center space-x-2"},nkn={class:"border-t pt-6"},rkn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},skn={class:"mt-4"},ikn={class:"space-y-2"},akn={class:"mt-4"},okn={__name:"InventoryAuditSettings",setup(t){const e=_n(),n=Q(!1),r=Q("general"),s=Q(!1),i=Q(!1),a=Q({enable_auto_warehouse_creation:!1,default_warehouse_type:"Store",auto_generate_warehouse_code:!0,warehouse_code_prefix:"WH-",default_counting_method:"Manual Count",allow_negative_variance:!1,enable_batch_processing:!0,max_batch_size:100,notify_on_variance_threshold:!0,variance_notification_threshold:5,notify_store_manager:!0,notify_hod_inventory:!0,require_hod_approval:!0,approval_workflow:"Single Level",auto_approve_below_threshold:!1,approval_threshold_amount:0,audit_retention_days:365,enable_audit_trail:!0,auto_archive_completed_audits:!0,archive_after_days:90}),o=[{id:"general",name:"General",icon:ha},{id:"notifications",name:"Notifications",icon:mp},{id:"approvals",name:"Approvals",icon:Kt},{id:"audit",name:"Audit Trail",icon:vt},{id:"warehouses",name:"Warehouses & Teams",icon:Jr}],l=Q({warehouse_code:"",warehouse_name:"",warehouse_type:"Store",branch:"",city:"",county:""}),d=Q({warehouse:"",team_lead:"",team_members:[]}),c=Q([]),f=Q([]),p=Q([]),h=[{label:"Store",value:"Store"},{label:"Warehouse",value:"Warehouse"},{label:"Distribution Center",value:"Distribution Center"},{label:"Returns Center",value:"Returns Center"}],m=[{label:"Manual Count",value:"Manual Count"},{label:"Barcode Scan",value:"Barcode Scan"},{label:"RFID",value:"RFID"},{label:"System Integration",value:"System Integration"}],g=[{label:"Single Level",value:"Single Level"},{label:"Multi Level",value:"Multi Level"}],y=[{label:"Counter",value:"Counter"},{label:"Supervisor",value:"Supervisor"},{label:"Auditor",value:"Auditor"}],x=Ve({url:"/api/method/mkaguzi.inventory_audit.doctype.inventory_audit_settings.inventory_audit_settings.get_settings",auto:!1}),_=Ve({url:"frappe.client.set_value",auto:!1});Ve({url:"/api/resource/Warehouse Master",auto:!1});const k=Ve({url:"/api/resource/Warehouse Master",method:"GET",auto:!1}),w=Ve({url:"/api/resource/User",method:"GET",auto:!1}),S=Ve({url:"/api/method/mkaguzi.inventory_audit.doctype.inventory_audit_settings.inventory_audit_settings.create_warehouse",auto:!1});Ve({url:"/api/method/mkaguzi.inventory_audit.doctype.inventory_audit_settings.inventory_audit_settings.create_sample_warehouse",auto:!1});const C=Ve({url:"/api/method/mkaguzi.inventory_audit.doctype.inventory_audit_settings.inventory_audit_settings.create_team_assignment",auto:!1}),A=()=>{e.push("/inventory-audit")},M=()=>ue(this,null,function*(){try{const V=yield x.fetch();V&&Object.assign(a.value,V)}catch(V){console.error("Error loading settings:",V)}}),E=()=>ue(this,null,function*(){n.value=!0;try{yield _.fetch({doctype:"Inventory Audit Settings",name:"Inventory Audit Settings",fieldname:a.value}),alert("Settings saved successfully!")}catch(V){console.error("Error saving settings:",V),alert("Error saving settings. Please try again.")}finally{n.value=!1}}),P=()=>{confirm("Are you sure you want to reset all settings to defaults? This action cannot be undone.")&&(a.value={enable_auto_warehouse_creation:!1,default_warehouse_type:"Store",auto_generate_warehouse_code:!0,warehouse_code_prefix:"WH-",default_counting_method:"Manual Count",allow_negative_variance:!1,enable_batch_processing:!0,max_batch_size:100,notify_on_variance_threshold:!0,variance_notification_threshold:5,notify_store_manager:!0,notify_hod_inventory:!0,require_hod_approval:!0,approval_workflow:"Single Level",auto_approve_below_threshold:!1,approval_threshold_amount:0,audit_retention_days:365,enable_audit_trail:!0,auto_archive_completed_audits:!0,archive_after_days:90})},I=()=>ue(this,null,function*(){if(!l.value.warehouse_code||!l.value.warehouse_name){alert("Please fill in warehouse code and name");return}s.value=!0;try{(yield S.fetch({warehouse_code:l.value.warehouse_code,warehouse_name:l.value.warehouse_name,warehouse_type:l.value.warehouse_type,branch:l.value.branch,city:l.value.city,county:l.value.county}))&&(alert(`Warehouse '${l.value.warehouse_code}' created successfully!`),l.value={warehouse_code:"",warehouse_name:"",warehouse_type:"Store",branch:"",city:"",county:""},q())}catch(V){console.error("Error creating warehouse:",V);const O=(V==null?void 0:V.exc_type)==="ValidationError"?V==null?void 0:V.message:(V==null?void 0:V.message)||(V==null?void 0:V._server_messages)||"Error creating warehouse. Please try again.";let X=O;if(V!=null&&V._server_messages)try{const j=JSON.parse(V._server_messages);j.length>0&&(X=JSON.parse(j[0]).message||O)}catch(j){}alert(X)}finally{s.value=!1}}),F=()=>{d.value.team_members.push({user:"",role:"Counter"})},L=V=>{d.value.team_members.splice(V,1)},z=()=>ue(this,null,function*(){if(!d.value.warehouse||!d.value.team_lead){alert("Please select a warehouse and team lead");return}if(d.value.team_members.length===0){alert("Please add at least one team member");return}i.value=!0;try{(yield C.fetch({warehouse:d.value.warehouse,team_lead:d.value.team_lead,team_members:JSON.stringify(d.value.team_members)}))&&(alert("Team assignment created successfully!"),d.value={warehouse:"",team_lead:"",team_members:[]},q())}catch(V){console.error("Error creating team assignment:",V),alert("Error creating team assignment. Please try again.")}finally{i.value=!1}}),N=V=>{alert(`Team management for ${V.warehouse_name} would be implemented here`)},q=()=>ue(this,null,function*(){try{const V=yield k.fetch({params:{fields:'["name","warehouse_name","warehouse_type"]',limit_page_length:100}});V&&V.data&&(f.value=V.data.map(X=>({label:`${X.warehouse_name} (${X.name})`,value:X.name})));const O=yield w.fetch({params:{fields:'["name","full_name"]',filters:'[["enabled","=","1"]]',limit_page_length:100}});O&&O.data&&(p.value=O.data.map(X=>({label:X.full_name||X.name,value:X.name}))),c.value=[{warehouse:"WH-001",warehouse_name:"Main Warehouse",warehouse_code:"WH-001",warehouse_type:"Warehouse",team_assigned:!0},{warehouse:"ST-001",warehouse_name:"Store A",warehouse_code:"ST-001",warehouse_type:"Store",team_assigned:!1}]}catch(V){console.error("Error loading warehouse data:",V)}});return yt(()=>{M(),q()}),(V,O)=>{const X=Vs("FormControl");return T(),R("div",Wwn,[u("div",Gwn,[u("div",Ywn,[b(v(J),{variant:"ghost",onClick:A},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),O[28]||(O[28]=u("div",null,[u("h1",{class:"text-2xl font-bold text-gray-900"},"Inventory Audit Settings"),u("p",{class:"text-gray-500 mt-1"}," Configure inventory audit module preferences and warehouse management ")],-1))]),u("div",Kwn,[b(v(J),{variant:"outline",onClick:P},{default:D(()=>[b(v(RY),{class:"w-4 h-4 mr-2"}),O[29]||(O[29]=W(" Reset to Defaults ",-1))]),_:1}),b(v(J),{variant:"solid",onClick:E,loading:n.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),O[30]||(O[30]=W(" Save Settings ",-1))]),_:1},8,["loading"])])]),u("div",Xwn,[u("div",Qwn,[u("nav",Zwn,[(T(),R(xe,null,_e(o,j=>u("button",{key:j.id,class:pe(["px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors",r.value===j.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]),onClick:U=>r.value=j.id},[(T(),he(At(j.icon),{class:"h-4 w-4 mr-2 inline"})),W(" "+$(j.name),1)],10,Jwn)),64))])])]),u("div",e2n,[u("div",t2n,[r.value==="general"?(T(),R("div",n2n,[u("div",r2n,[u("h3",s2n,[b(v(ha),{class:"w-5 h-5 mr-2"}),O[31]||(O[31]=W(" General Settings ",-1))]),u("div",i2n,[u("div",a2n,[u("div",o2n,[O[32]||(O[32]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto Warehouse Creation"),u("p",{class:"text-sm text-gray-500"},"Automatically create warehouse records when importing stock data")],-1)),b(v(St),{modelValue:a.value.enable_auto_warehouse_creation,"onUpdate:modelValue":O[0]||(O[0]=j=>a.value.enable_auto_warehouse_creation=j)},null,8,["modelValue"])]),a.value.enable_auto_warehouse_creation?(T(),R("div",l2n,[O[33]||(O[33]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Warehouse Type",-1)),b(X,{type:"select",modelValue:a.value.default_warehouse_type,"onUpdate:modelValue":O[1]||(O[1]=j=>a.value.default_warehouse_type=j),options:h},null,8,["modelValue"])])):se("",!0),u("div",u2n,[O[34]||(O[34]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto Generate Warehouse Code"),u("p",{class:"text-sm text-gray-500"},"Automatically generate warehouse codes using prefix")],-1)),b(v(St),{modelValue:a.value.auto_generate_warehouse_code,"onUpdate:modelValue":O[2]||(O[2]=j=>a.value.auto_generate_warehouse_code=j)},null,8,["modelValue"])]),a.value.auto_generate_warehouse_code?(T(),R("div",d2n,[O[35]||(O[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Code Prefix",-1)),b(X,{type:"text",modelValue:a.value.warehouse_code_prefix,"onUpdate:modelValue":O[3]||(O[3]=j=>a.value.warehouse_code_prefix=j),placeholder:"WH-, ST-, etc."},null,8,["modelValue"])])):se("",!0)]),u("div",c2n,[u("div",null,[O[36]||(O[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Counting Method",-1)),b(X,{type:"select",modelValue:a.value.default_counting_method,"onUpdate:modelValue":O[4]||(O[4]=j=>a.value.default_counting_method=j),options:m},null,8,["modelValue"])]),u("div",f2n,[O[37]||(O[37]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Allow Negative Variance"),u("p",{class:"text-sm text-gray-500"},"Allow negative variances in stock counts")],-1)),b(v(St),{modelValue:a.value.allow_negative_variance,"onUpdate:modelValue":O[5]||(O[5]=j=>a.value.allow_negative_variance=j)},null,8,["modelValue"])]),u("div",p2n,[O[38]||(O[38]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Enable Batch Processing"),u("p",{class:"text-sm text-gray-500"},"Process stock items in batches for performance")],-1)),b(v(St),{modelValue:a.value.enable_batch_processing,"onUpdate:modelValue":O[6]||(O[6]=j=>a.value.enable_batch_processing=j)},null,8,["modelValue"])]),a.value.enable_batch_processing?(T(),R("div",h2n,[O[39]||(O[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Max Batch Size",-1)),b(X,{type:"number",modelValue:a.value.max_batch_size,"onUpdate:modelValue":O[7]||(O[7]=j=>a.value.max_batch_size=j),min:"10",max:"1000"},null,8,["modelValue"])])):se("",!0)])])])])):se("",!0),r.value==="notifications"?(T(),R("div",m2n,[u("div",g2n,[u("h3",v2n,[b(v(mp),{class:"w-5 h-5 mr-2"}),O[40]||(O[40]=W(" Notification Settings ",-1))]),u("div",y2n,[u("div",b2n,[u("div",x2n,[O[41]||(O[41]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Notify on Variance Threshold"),u("p",{class:"text-sm text-gray-500"},"Send notifications when variance exceeds threshold")],-1)),b(v(St),{modelValue:a.value.notify_on_variance_threshold,"onUpdate:modelValue":O[8]||(O[8]=j=>a.value.notify_on_variance_threshold=j)},null,8,["modelValue"])]),a.value.notify_on_variance_threshold?(T(),R("div",_2n,[O[42]||(O[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Variance Notification Threshold (%)",-1)),b(X,{type:"number",modelValue:a.value.variance_notification_threshold,"onUpdate:modelValue":O[9]||(O[9]=j=>a.value.variance_notification_threshold=j),min:"0",max:"100",step:"0.1"},null,8,["modelValue"])])):se("",!0)]),u("div",w2n,[u("div",k2n,[O[43]||(O[43]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Notify Store Manager"),u("p",{class:"text-sm text-gray-500"},"Send notifications to store managers")],-1)),b(v(St),{modelValue:a.value.notify_store_manager,"onUpdate:modelValue":O[10]||(O[10]=j=>a.value.notify_store_manager=j)},null,8,["modelValue"])]),u("div",S2n,[O[44]||(O[44]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Notify HOD Inventory"),u("p",{class:"text-sm text-gray-500"},"Send notifications to HOD Inventory")],-1)),b(v(St),{modelValue:a.value.notify_hod_inventory,"onUpdate:modelValue":O[11]||(O[11]=j=>a.value.notify_hod_inventory=j)},null,8,["modelValue"])])])])])])):se("",!0),r.value==="approvals"?(T(),R("div",C2n,[u("div",A2n,[u("h3",T2n,[b(v(Kt),{class:"w-5 h-5 mr-2"}),O[45]||(O[45]=W(" Approval Settings ",-1))]),u("div",$2n,[u("div",M2n,[u("div",E2n,[O[46]||(O[46]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Require HOD Approval"),u("p",{class:"text-sm text-gray-500"},"Require HOD approval for stock take variances")],-1)),b(v(St),{modelValue:a.value.require_hod_approval,"onUpdate:modelValue":O[12]||(O[12]=j=>a.value.require_hod_approval=j)},null,8,["modelValue"])]),a.value.require_hod_approval?(T(),R("div",D2n,[O[47]||(O[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Approval Workflow",-1)),b(X,{type:"select",modelValue:a.value.approval_workflow,"onUpdate:modelValue":O[13]||(O[13]=j=>a.value.approval_workflow=j),options:g},null,8,["modelValue"])])):se("",!0)]),u("div",R2n,[a.value.require_hod_approval?(T(),R("div",P2n,[O[48]||(O[48]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto Approve Below Threshold"),u("p",{class:"text-sm text-gray-500"},"Auto-approve variances below threshold")],-1)),b(v(St),{modelValue:a.value.auto_approve_below_threshold,"onUpdate:modelValue":O[14]||(O[14]=j=>a.value.auto_approve_below_threshold=j)},null,8,["modelValue"])])):se("",!0),a.value.require_hod_approval&&a.value.auto_approve_below_threshold?(T(),R("div",I2n,[O[49]||(O[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Approval Threshold Amount",-1)),b(X,{type:"number",modelValue:a.value.approval_threshold_amount,"onUpdate:modelValue":O[15]||(O[15]=j=>a.value.approval_threshold_amount=j),min:"0",step:"0.01"},null,8,["modelValue"])])):se("",!0)])])])])):se("",!0),r.value==="audit"?(T(),R("div",O2n,[u("div",L2n,[u("h3",V2n,[b(v(vt),{class:"w-5 h-5 mr-2"}),O[50]||(O[50]=W(" Audit Trail Settings ",-1))]),u("div",N2n,[u("div",j2n,[u("div",null,[O[51]||(O[51]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Audit Retention Days",-1)),b(X,{type:"number",modelValue:a.value.audit_retention_days,"onUpdate:modelValue":O[16]||(O[16]=j=>a.value.audit_retention_days=j),min:"30",max:"3650"},null,8,["modelValue"])]),u("div",F2n,[O[52]||(O[52]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Enable Audit Trail"),u("p",{class:"text-sm text-gray-500"},"Enable detailed audit trail for all changes")],-1)),b(v(St),{modelValue:a.value.enable_audit_trail,"onUpdate:modelValue":O[17]||(O[17]=j=>a.value.enable_audit_trail=j)},null,8,["modelValue"])])]),u("div",B2n,[u("div",z2n,[O[53]||(O[53]=u("div",null,[u("label",{class:"text-sm font-medium text-gray-700"},"Auto Archive Completed Audits"),u("p",{class:"text-sm text-gray-500"},"Automatically archive completed audits")],-1)),b(v(St),{modelValue:a.value.auto_archive_completed_audits,"onUpdate:modelValue":O[18]||(O[18]=j=>a.value.auto_archive_completed_audits=j)},null,8,["modelValue"])]),a.value.auto_archive_completed_audits?(T(),R("div",U2n,[O[54]||(O[54]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Archive After Days",-1)),b(X,{type:"number",modelValue:a.value.archive_after_days,"onUpdate:modelValue":O[19]||(O[19]=j=>a.value.archive_after_days=j),min:"1",max:"365"},null,8,["modelValue"])])):se("",!0)])])])])):se("",!0),r.value==="warehouses"?(T(),R("div",H2n,[u("div",q2n,[u("h3",W2n,[b(v(Jr),{class:"w-5 h-5 mr-2"}),O[55]||(O[55]=W(" Warehouse & Team Assignment ",-1))]),u("div",G2n,[u("div",null,[O[63]||(O[63]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Create Warehouse",-1)),u("div",Y2n,[u("div",null,[O[56]||(O[56]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Code",-1)),b(X,{type:"text",modelValue:l.value.warehouse_code,"onUpdate:modelValue":O[20]||(O[20]=j=>l.value.warehouse_code=j),placeholder:"WH-001"},null,8,["modelValue"])]),u("div",null,[O[57]||(O[57]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Name",-1)),b(X,{type:"text",modelValue:l.value.warehouse_name,"onUpdate:modelValue":O[21]||(O[21]=j=>l.value.warehouse_name=j),placeholder:"Main Warehouse"},null,8,["modelValue"])]),u("div",null,[O[58]||(O[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Type",-1)),b(X,{type:"select",modelValue:l.value.warehouse_type,"onUpdate:modelValue":O[22]||(O[22]=j=>l.value.warehouse_type=j),options:h},null,8,["modelValue"])]),u("div",null,[O[59]||(O[59]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Branch",-1)),b(X,{type:"text",modelValue:l.value.branch,"onUpdate:modelValue":O[23]||(O[23]=j=>l.value.branch=j),placeholder:"Main Branch"},null,8,["modelValue"])]),u("div",null,[O[60]||(O[60]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"City",-1)),b(X,{type:"text",modelValue:l.value.city,"onUpdate:modelValue":O[24]||(O[24]=j=>l.value.city=j),placeholder:"Nairobi"},null,8,["modelValue"])]),u("div",null,[O[61]||(O[61]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"County",-1)),b(X,{type:"text",modelValue:l.value.county,"onUpdate:modelValue":O[25]||(O[25]=j=>l.value.county=j),placeholder:"Nairobi"},null,8,["modelValue"])])]),u("div",K2n,[b(v(J),{onClick:I,loading:s.value},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),O[62]||(O[62]=W(" Create Warehouse ",-1))]),_:1},8,["loading"])])]),u("div",X2n,[O[71]||(O[71]=u("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Assign Teams to Warehouses",-1)),u("div",Q2n,[O[64]||(O[64]=u("h5",{class:"text-sm font-medium text-gray-700 mb-3"},"Current Assignments",-1)),u("div",Z2n,[(T(!0),R(xe,null,_e(c.value,j=>(T(),R("div",{key:j.warehouse,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},[u("div",null,[u("p",J2n,$(j.warehouse_name),1),u("p",ekn,$(j.warehouse_code)+"  "+$(j.warehouse_type),1)]),u("div",tkn,[b(v(De),{variant:j.team_assigned?"success":"secondary"},{default:D(()=>[W($(j.team_assigned?"Assigned":"Unassigned"),1)]),_:2},1032,["variant"]),b(v(J),{variant:"outline",size:"sm",onClick:U=>N(j)},{default:D(()=>[W($(j.team_assigned?"Manage Team":"Assign Team"),1)]),_:2},1032,["onClick"])])]))),128))])]),u("div",nkn,[O[70]||(O[70]=u("h5",{class:"text-sm font-medium text-gray-700 mb-3"},"Create New Team Assignment",-1)),u("div",rkn,[u("div",null,[O[65]||(O[65]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Warehouse",-1)),b(X,{type:"select",modelValue:d.value.warehouse,"onUpdate:modelValue":O[26]||(O[26]=j=>d.value.warehouse=j),options:f.value,placeholder:"Choose warehouse"},null,8,["modelValue","options"])]),u("div",null,[O[66]||(O[66]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team Lead",-1)),b(X,{type:"select",modelValue:d.value.team_lead,"onUpdate:modelValue":O[27]||(O[27]=j=>d.value.team_lead=j),options:p.value,placeholder:"Select team lead"},null,8,["modelValue","options"])])]),u("div",skn,[O[68]||(O[68]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Team Members",-1)),u("div",ikn,[(T(!0),R(xe,null,_e(d.value.team_members,(j,U)=>(T(),R("div",{key:U,class:"flex items-center space-x-2"},[b(X,{type:"select",modelValue:j.user,"onUpdate:modelValue":G=>j.user=G,options:p.value,placeholder:"Select user",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","options"]),b(X,{type:"select",modelValue:j.role,"onUpdate:modelValue":G=>j.role=G,options:y,placeholder:"Role",class:"w-32"},null,8,["modelValue","onUpdate:modelValue"]),b(v(J),{variant:"outline",size:"sm",onClick:G=>L(U)},{default:D(()=>[b(v(ht),{class:"w-4 h-4"})]),_:1},8,["onClick"])]))),128))]),b(v(J),{variant:"outline",size:"sm",onClick:F,class:"mt-2"},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),O[67]||(O[67]=W(" Add Member ",-1))]),_:1})]),u("div",akn,[b(v(J),{onClick:z,loading:i.value},{default:D(()=>[b(v(Jr),{class:"w-4 h-4 mr-2"}),O[69]||(O[69]=W(" Create Team Assignment ",-1))]),_:1},8,["loading"])])])])])])])):se("",!0)])])])}}},lkn={class:"p-6"},ukn={class:"flex justify-between items-center mb-6"},dkn={class:"flex gap-2"},ckn={class:"bg-white rounded-lg border p-4 mb-6"},fkn={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},pkn=["value"],hkn={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},mkn={class:"bg-white rounded-lg border p-4"},gkn={class:"text-2xl font-bold"},vkn={class:"bg-white rounded-lg border p-4"},ykn={class:"text-2xl font-bold text-green-600"},bkn={class:"bg-white rounded-lg border p-4"},xkn={class:"text-2xl font-bold text-blue-600"},_kn={class:"bg-white rounded-lg border p-4"},wkn={class:"text-2xl font-bold text-red-600"},kkn={class:"bg-white rounded-lg border shadow-sm"},Skn={class:"overflow-x-auto"},Ckn={class:"min-w-full divide-y divide-gray-200"},Akn={class:"bg-white divide-y divide-gray-200"},Tkn=["onClick"],$kn={class:"px-4 py-3 whitespace-nowrap"},Mkn={class:"font-medium text-gray-900"},Ekn={class:"px-4 py-3"},Dkn={class:"text-gray-600 line-clamp-1"},Rkn={class:"px-4 py-3 whitespace-nowrap text-gray-500"},Pkn={class:"px-4 py-3 whitespace-nowrap text-gray-500"},Ikn={class:"px-4 py-3 whitespace-nowrap text-right text-gray-900"},Okn={class:"px-4 py-3 whitespace-nowrap text-gray-500"},Lkn={class:"px-4 py-3 whitespace-nowrap"},Vkn={class:"px-4 py-3 whitespace-nowrap"},Nkn={class:"px-4 py-3 whitespace-nowrap text-right"},jkn={key:0,class:"p-12 text-center text-gray-500"},Fkn={key:1,class:"px-4 py-3 border-t flex items-center justify-between"},Bkn={class:"text-sm text-gray-500"},zkn={class:"flex gap-2"},Ukn={class:"space-y-4"},Hkn={class:"text-sm text-gray-600 mb-4"},qkn={key:0,class:"mt-2 text-sm text-yellow-700"},Wkn={class:"font-medium"},Gkn={class:"list-disc list-inside mt-1"},Ykn={key:0},F5={__name:"InventoryItemMaster",setup(t){const e=_n(),n=tu(),r=Q(!1),s=Q(!1),i=Q(!1),a=Q(null),o=Q(null),l=Q(""),d=Q({category:"",abc_classification:"",is_active:""}),c=Q(["Electronics","Raw Materials","Finished Goods","Consumables","Packaging"]),f=Z(()=>n.items),p=Z(()=>n.itemsTotalCount),h=Z(()=>n.itemsPage),m=Z(()=>n.itemsPageSize),g=Z(()=>Math.ceil(p.value/m.value));yt(()=>ue(this,null,function*(){yield y()}));function y(){return ue(this,null,function*(){r.value=!0;try{const L=ge({},d.value);l.value&&(L.search=l.value),Object.keys(L).forEach(z=>{L[z]===""&&delete L[z]}),yield n.loadItems(L,h.value,m.value)}finally{r.value=!1}})}function x(){return ue(this,null,function*(){l.value="",d.value={category:"",abc_classification:"",is_active:""},yield y()})}let _=null;function k(){clearTimeout(_),_=setTimeout(()=>{y()},300)}function w(L){return ue(this,null,function*(){yield n.loadItems(d.value,L,m.value)})}function S(){return ue(this,null,function*(){try{const L=yield n.getItemImportTemplate(),z=new Blob([L.content],{type:"text/csv"}),N=URL.createObjectURL(z),q=document.createElement("a");q.href=N,q.download=L.filename,q.click(),URL.revokeObjectURL(N)}catch(L){console.error("Error downloading template:",L)}})}function C(L){a.value=L.target.files[0],o.value=null}function A(){return ue(this,null,function*(){var L;if(a.value){s.value=!0;try{const z=yield a.value.text();o.value=yield n.importItemsFromCSV(z),(L=o.value.errors)!=null&&L.length||(i.value=!1)}catch(z){console.error("Error importing items:",z)}finally{s.value=!1}}})}function M(){e.push("/inventory-audit/items/new")}function E(L){e.push(`/inventory-audit/items/${L}`)}function P(L){e.push(`/inventory-audit/items/${L.name}/edit`)}function I(L){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(L||0)}function F(L){return L!=null&&L.includes("A")?"red":L!=null&&L.includes("B")?"yellow":"gray"}return(L,z)=>(T(),R("div",lkn,[u("div",ukn,[z[12]||(z[12]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Inventory Item Master"),u("p",{class:"text-gray-600"},"Manage inventory items for stock take audits")],-1)),u("div",dkn,[b(v(J),{onClick:x,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(v(J),{onClick:S,variant:"outline",size:"sm"},{default:D(()=>[b(v(xn),{class:"w-4 h-4 mr-2"}),z[9]||(z[9]=W(" Template ",-1))]),_:1}),b(v(J),{onClick:z[0]||(z[0]=N=>i.value=!0),variant:"outline",size:"sm"},{default:D(()=>[b(v(xa),{class:"w-4 h-4 mr-2"}),z[10]||(z[10]=W(" Import ",-1))]),_:1}),b(v(J),{onClick:M},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),z[11]||(z[11]=W(" New Item ",-1))]),_:1})])]),u("div",ckn,[u("div",fkn,[u("div",null,[z[13]||(z[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),we(u("input",{"onUpdate:modelValue":z[1]||(z[1]=N=>l.value=N),type:"text",placeholder:"Search by item code...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:k},null,544),[[Rt,l.value]])]),u("div",null,[z[15]||(z[15]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),we(u("select",{"onUpdate:modelValue":z[2]||(z[2]=N=>d.value.category=N),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:y},[z[14]||(z[14]=u("option",{value:""},"All Categories",-1)),(T(!0),R(xe,null,_e(c.value,N=>(T(),R("option",{key:N,value:N},$(N),9,pkn))),128))],544),[[vn,d.value.category]])]),u("div",null,[z[17]||(z[17]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ABC Class",-1)),we(u("select",{"onUpdate:modelValue":z[3]||(z[3]=N=>d.value.abc_classification=N),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:y},[...z[16]||(z[16]=[u("option",{value:""},"All Classes",-1),u("option",{value:"A - High Value"},"A - High Value",-1),u("option",{value:"B - Medium Value"},"B - Medium Value",-1),u("option",{value:"C - Low Value"},"C - Low Value",-1)])],544),[[vn,d.value.abc_classification]])]),u("div",null,[z[19]||(z[19]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),we(u("select",{"onUpdate:modelValue":z[4]||(z[4]=N=>d.value.is_active=N),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:y},[...z[18]||(z[18]=[u("option",{value:""},"All",-1),u("option",{value:1},"Active",-1),u("option",{value:0},"Inactive",-1)])],544),[[vn,d.value.is_active]])])])]),u("div",hkn,[u("div",mkn,[z[20]||(z[20]=u("p",{class:"text-sm text-gray-500"},"Total Items",-1)),u("p",gkn,$(p.value),1)]),u("div",vkn,[z[21]||(z[21]=u("p",{class:"text-sm text-gray-500"},"Active Items",-1)),u("p",ykn,$(f.value.filter(N=>N.is_active).length),1)]),u("div",bkn,[z[22]||(z[22]=u("p",{class:"text-sm text-gray-500"},"A-Class Items",-1)),u("p",xkn,$(f.value.filter(N=>N.abc_classification==="A - High Value").length),1)]),u("div",_kn,[z[23]||(z[23]=u("p",{class:"text-sm text-gray-500"},"High Risk",-1)),u("p",wkn,$(f.value.filter(N=>N.risk_classification==="High Risk").length),1)])]),u("div",kkn,[u("div",Skn,[u("table",Ckn,[z[24]||(z[24]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Item Code"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"UOM"),u("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Valuation"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Warehouse"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ABC"),u("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),u("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),u("tbody",Akn,[(T(!0),R(xe,null,_e(f.value,N=>(T(),R("tr",{key:N.name,class:"hover:bg-gray-50 cursor-pointer",onClick:q=>E(N.name)},[u("td",$kn,[u("span",Mkn,$(N.item_code),1)]),u("td",Ekn,[u("span",Dkn,$(N.item_description),1)]),u("td",Rkn,$(N.category),1),u("td",Pkn,$(N.unit_of_measure),1),u("td",Ikn,$(I(N.valuation_rate)),1),u("td",Okn,$(N.warehouse),1),u("td",Lkn,[b(v(De),{variant:F(N.abc_classification)},{default:D(()=>{var q;return[W($(((q=N.abc_classification)==null?void 0:q.charAt(0))||"-"),1)]}),_:2},1032,["variant"])]),u("td",Vkn,[b(v(De),{variant:N.is_active?"green":"gray"},{default:D(()=>[W($(N.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),u("td",Nkn,[b(v(J),{variant:"ghost",size:"sm",onClick:ut(q=>P(N),["stop"])},{default:D(()=>[b(v(Pfe),{class:"w-4 h-4"})]),_:1},8,["onClick"])])],8,Tkn))),128))])])]),f.value.length===0&&!r.value?(T(),R("div",jkn,[b(v(Qa),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),z[26]||(z[26]=u("p",null,"No items found",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-2",onClick:M},{default:D(()=>[...z[25]||(z[25]=[W(" Add First Item ",-1)])]),_:1})])):se("",!0),g.value>1?(T(),R("div",Fkn,[u("p",Bkn," Showing "+$((h.value-1)*m.value+1)+" - "+$(Math.min(h.value*m.value,p.value))+" of "+$(p.value),1),u("div",zkn,[b(v(J),{variant:"outline",size:"sm",disabled:h.value===1,onClick:z[5]||(z[5]=N=>w(h.value-1))},{default:D(()=>[...z[27]||(z[27]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(v(J),{variant:"outline",size:"sm",disabled:h.value===g.value,onClick:z[6]||(z[6]=N=>w(h.value+1))},{default:D(()=>[...z[28]||(z[28]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):se("",!0)]),b(v(jt),{modelValue:i.value,"onUpdate:modelValue":z[8]||(z[8]=N=>i.value=N),options:{title:"Import Items from CSV"}},{"body-content":D(()=>{var N,q,V;return[u("div",Ukn,[u("div",null,[u("p",Hkn,[z[29]||(z[29]=W(" Upload a CSV file with your inventory items. ",-1)),u("a",{href:"#",onClick:ut(S,["prevent"]),class:"text-blue-600 hover:underline"}," Download the template "),z[30]||(z[30]=W(" to see the required format. ",-1))])]),u("div",null,[z[31]||(z[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"CSV File",-1)),u("input",{type:"file",accept:".csv",onChange:C,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),o.value?(T(),R("div",{key:0,class:pe(["p-4 rounded-lg",(N=o.value.errors)!=null&&N.length?"bg-yellow-50":"bg-green-50"])},[u("p",{class:pe(["font-medium",(q=o.value.errors)!=null&&q.length?"text-yellow-800":"text-green-800"])},$(o.value.imported)+" items imported successfully ",3),(V=o.value.errors)!=null&&V.length?(T(),R("div",qkn,[u("p",Wkn,"Errors ("+$(o.value.total_errors)+"):",1),u("ul",Gkn,[(T(!0),R(xe,null,_e(o.value.errors.slice(0,5),(O,X)=>(T(),R("li",{key:X},$(O),1))),128)),o.value.errors.length>5?(T(),R("li",Ykn,"...and "+$(o.value.errors.length-5)+" more",1)):se("",!0)])])):se("",!0)],2)):se("",!0)])]}),actions:D(()=>[b(v(J),{variant:"outline",onClick:z[7]||(z[7]=N=>i.value=!1)},{default:D(()=>[...z[32]||(z[32]=[W("Cancel",-1)])]),_:1}),b(v(J),{onClick:A,loading:s.value,disabled:!a.value},{default:D(()=>[...z[33]||(z[33]=[W("Import",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"])]))}},Kkn={class:"p-6"},Xkn={class:"flex items-center justify-between mb-6"},Qkn={class:"flex items-center gap-4"},Zkn={class:"text-gray-500 mt-1"},Jkn={class:"flex items-center gap-2"},eSn={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},tSn={class:"lg:col-span-2 space-y-6"},nSn={class:"bg-white rounded-lg border p-6"},rSn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},sSn={class:"mt-1 text-sm text-gray-900"},iSn={class:"mt-1 text-sm text-gray-900"},aSn={class:"mt-1 text-sm text-gray-900"},oSn={class:"mt-1 text-sm text-gray-900"},lSn={class:"mt-1 text-sm text-gray-900"},uSn={class:"bg-white rounded-lg border p-6"},dSn={class:"prose max-w-none"},cSn={class:"text-gray-700 whitespace-pre-wrap"},fSn={key:0,class:"bg-white rounded-lg border p-6"},pSn={class:"space-y-4"},hSn={class:"mt-1 text-sm text-gray-900 whitespace-pre-wrap"},mSn={class:"mt-1 text-sm text-gray-900"},gSn={class:"mt-1 text-sm text-gray-900"},vSn={class:"bg-white rounded-lg border p-6"},ySn={class:"flex items-center justify-between mb-4"},bSn={key:0,class:"text-center py-8 text-gray-500"},xSn={key:1,class:"space-y-4"},_Sn={class:"flex items-start justify-between"},wSn={class:"flex items-center gap-2"},kSn={class:"font-medium text-sm text-gray-900"},SSn={class:"text-xs text-gray-500"},CSn={class:"mt-2 text-sm text-gray-700 whitespace-pre-wrap"},ASn={class:"space-y-6"},TSn={class:"bg-white rounded-lg border p-6"},$Sn={class:"space-y-2"},MSn={class:"bg-white rounded-lg border p-6"},ESn={class:"space-y-3"},DSn={key:0},RSn={key:1},PSn={key:2},ISn={class:"bg-white rounded-lg border p-6"},OSn={class:"space-y-3"},LSn={class:"flex items-start gap-3"},VSn={class:"flex-1"},NSn={class:"text-xs text-gray-500"},jSn={key:0,class:"flex items-start gap-3"},FSn={class:"flex-1"},BSn={class:"text-xs text-gray-500"},zSn={class:"space-y-4"},USn={class:"space-y-4"},HSn={__name:"IssueLogDetail",setup(t){const e=ta(),n=_n(),r=Q({}),s=Q([]),i=Q(!1),a=Q(!1),o=Q(""),l=Q(""),d=Q(!1),c=Q(!1);yt(()=>ue(this,null,function*(){yield f(),yield p()}));function f(){return ue(this,null,function*(){try{const I=yield Ke("frappe.client.get",{doctype:"Issue Log",name:e.params.id});r.value=I}catch(I){console.error("Error loading issue:",I)}})}function p(){return ue(this,null,function*(){try{const I=yield Ke("frappe.client.get_list",{doctype:"Comment",filters:{reference_doctype:"Issue Log",reference_name:e.params.id},fields:["name","comment","user","creation"],order_by:"creation desc"});s.value=I}catch(I){console.error("Error loading comments:",I)}})}function h(I){return{Low:"outline",Medium:"secondary",High:"destructive",Critical:"destructive"}[I]||"secondary"}function m(I){return{Open:"secondary","In Progress":"outline",Resolved:"solid",Closed:"outline"}[I]||"secondary"}function g(I){return{Low:"outline",Medium:"secondary",High:"destructive",Urgent:"destructive"}[I]||"secondary"}function y(I){return I?new Date(I).toLocaleDateString():"-"}function x(I){return I?new Date(I).toLocaleString():"-"}function _(){n.push("/inventory-audit/issues")}function k(){n.push(`/inventory-audit/issues/${e.params.id}/edit`)}function w(){r.value.status!=="Resolved"&&(a.value=!0)}function S(){return ue(this,null,function*(){c.value=!0;try{yield Ke("frappe.client.set_value",{doctype:"Issue Log",name:e.params.id,fieldname:{status:"Resolved",resolution:l.value,resolved_by:frappe.session.user,resolved_date:new Date().toISOString().split("T")[0]}}),yield f(),a.value=!1,l.value=""}catch(I){console.error("Error resolving issue:",I)}finally{c.value=!1}})}function C(){return ue(this,null,function*(){if(o.value.trim()){d.value=!0;try{yield Ke("frappe.client.insert",{doc:{doctype:"Comment",reference_doctype:"Issue Log",reference_name:e.params.id,comment:o.value,comment_type:"Comment"}}),yield p(),i.value=!1,o.value=""}catch(I){console.error("Error adding comment:",I)}finally{d.value=!1}}})}function A(){n.push(`/inventory-audit/issues/new?duplicate=${e.params.id}`)}function M(I){n.push(`/inventory-audit/sessions/${I}`)}function E(I){n.push(`/inventory-audit/variance-cases/${I}`)}function P(I){n.push(`/inventory-audit/plans/${I}`)}return(I,F)=>(T(),R("div",Kkn,[u("div",Xkn,[u("div",Qkn,[b(v(J),{variant:"ghost",onClick:_},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[F[10]||(F[10]=u("h1",{class:"text-2xl font-bold text-gray-900"}," Issue Details ",-1)),u("p",Zkn,$(r.value.name),1)])]),u("div",Jkn,[b(v(J),{variant:"outline",onClick:k},{default:D(()=>[b(v(yn),{class:"w-4 h-4 mr-2"}),F[11]||(F[11]=W(" Edit Issue ",-1))]),_:1}),b(v(J),{variant:"solid",onClick:w,disabled:r.value.status==="Resolved"},{default:D(()=>[b(v(Kt),{class:"w-4 h-4 mr-2"}),W(" "+$(r.value.status==="Resolved"?"Resolved":"Mark Resolved"),1)]),_:1},8,["disabled"])])]),u("div",eSn,[u("div",tSn,[u("div",nSn,[F[20]||(F[20]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Issue Overview",-1)),u("div",rSn,[u("div",null,[F[12]||(F[12]=u("label",{class:"block text-sm font-medium text-gray-700"},"Issue Type",-1)),u("p",sSn,$(r.value.issue_type||"-"),1)]),u("div",null,[F[13]||(F[13]=u("label",{class:"block text-sm font-medium text-gray-700"},"Severity",-1)),b(v(De),{variant:h(r.value.severity)},{default:D(()=>[W($(r.value.severity||"Medium"),1)]),_:1},8,["variant"])]),u("div",null,[F[14]||(F[14]=u("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),b(v(De),{variant:m(r.value.status)},{default:D(()=>[W($(r.value.status||"Open"),1)]),_:1},8,["variant"])]),u("div",null,[F[15]||(F[15]=u("label",{class:"block text-sm font-medium text-gray-700"},"Priority",-1)),b(v(De),{variant:g(r.value.priority)},{default:D(()=>[W($(r.value.priority||"Medium"),1)]),_:1},8,["variant"])]),u("div",null,[F[16]||(F[16]=u("label",{class:"block text-sm font-medium text-gray-700"},"Reported By",-1)),u("p",iSn,$(r.value.reported_by||"-"),1)]),u("div",null,[F[17]||(F[17]=u("label",{class:"block text-sm font-medium text-gray-700"},"Assigned To",-1)),u("p",aSn,$(r.value.assigned_to||"-"),1)]),u("div",null,[F[18]||(F[18]=u("label",{class:"block text-sm font-medium text-gray-700"},"Reported Date",-1)),u("p",oSn,$(y(r.value.reported_date)),1)]),u("div",null,[F[19]||(F[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Due Date",-1)),u("p",lSn,$(y(r.value.due_date)),1)])])]),u("div",uSn,[F[21]||(F[21]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Issue Description",-1)),u("div",dSn,[u("p",cSn,$(r.value.description||"No description provided."),1)])]),r.value.status==="Resolved"?(T(),R("div",fSn,[F[25]||(F[25]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resolution Details",-1)),u("div",pSn,[u("div",null,[F[22]||(F[22]=u("label",{class:"block text-sm font-medium text-gray-700"},"Resolution",-1)),u("p",hSn,$(r.value.resolution||"-"),1)]),u("div",null,[F[23]||(F[23]=u("label",{class:"block text-sm font-medium text-gray-700"},"Resolved By",-1)),u("p",mSn,$(r.value.resolved_by||"-"),1)]),u("div",null,[F[24]||(F[24]=u("label",{class:"block text-sm font-medium text-gray-700"},"Resolved Date",-1)),u("p",gSn,$(y(r.value.resolved_date)),1)])])])):se("",!0),u("div",vSn,[u("div",ySn,[F[27]||(F[27]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Comments",-1)),b(v(J),{variant:"outline",size:"sm",onClick:F[0]||(F[0]=L=>i.value=!0)},{default:D(()=>[b(v(EY),{class:"w-4 h-4 mr-2"}),F[26]||(F[26]=W(" Add Comment ",-1))]),_:1})]),s.value.length===0?(T(),R("div",bSn," No comments yet. ")):(T(),R("div",xSn,[(T(!0),R(xe,null,_e(s.value,L=>(T(),R("div",{key:L.name,class:"border-l-4 border-blue-500 pl-4"},[u("div",_Sn,[u("div",wSn,[u("span",kSn,$(L.user),1),u("span",SSn,$(x(L.creation)),1)])]),u("p",CSn,$(L.comment),1)]))),128))]))])]),u("div",ASn,[u("div",TSn,[F[30]||(F[30]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),u("div",$Sn,[b(v(J),{variant:"outline",class:"w-full justify-start",onClick:k},{default:D(()=>[b(v(yn),{class:"w-4 h-4 mr-2"}),F[28]||(F[28]=W(" Edit Issue ",-1))]),_:1}),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:w,disabled:r.value.status==="Resolved"},{default:D(()=>[b(v(Kt),{class:"w-4 h-4 mr-2"}),W(" "+$(r.value.status==="Resolved"?"Already Resolved":"Mark Resolved"),1)]),_:1},8,["disabled"]),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:A},{default:D(()=>[b(v(Yi),{class:"w-4 h-4 mr-2"}),F[29]||(F[29]=W(" Duplicate Issue ",-1))]),_:1})])]),u("div",MSn,[F[34]||(F[34]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Related Records",-1)),u("div",ESn,[r.value.stock_take_session?(T(),R("div",DSn,[F[31]||(F[31]=u("label",{class:"block text-sm font-medium text-gray-700"},"Stock Take Session",-1)),b(v(J),{variant:"link",class:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:F[1]||(F[1]=L=>M(r.value.stock_take_session))},{default:D(()=>[W($(r.value.session_name||r.value.stock_take_session),1)]),_:1})])):se("",!0),r.value.variance_case?(T(),R("div",RSn,[F[32]||(F[32]=u("label",{class:"block text-sm font-medium text-gray-700"},"Variance Case",-1)),b(v(J),{variant:"link",class:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:F[2]||(F[2]=L=>E(r.value.variance_case))},{default:D(()=>[W($(r.value.case_name||r.value.variance_case),1)]),_:1})])):se("",!0),r.value.audit_plan?(T(),R("div",PSn,[F[33]||(F[33]=u("label",{class:"block text-sm font-medium text-gray-700"},"Audit Plan",-1)),b(v(J),{variant:"link",class:"p-0 h-auto text-blue-600 hover:text-blue-800",onClick:F[3]||(F[3]=L=>P(r.value.audit_plan))},{default:D(()=>[W($(r.value.plan_name||r.value.audit_plan),1)]),_:1})])):se("",!0)])]),u("div",ISn,[F[39]||(F[39]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",OSn,[u("div",LSn,[F[36]||(F[36]=u("div",{class:"w-2 h-2 bg-blue-500 rounded-full mt-2"},null,-1)),u("div",VSn,[F[35]||(F[35]=u("p",{class:"text-sm font-medium text-gray-900"},"Issue Created",-1)),u("p",NSn,$(x(r.value.creation)),1)])]),r.value.status==="Resolved"?(T(),R("div",jSn,[F[38]||(F[38]=u("div",{class:"w-2 h-2 bg-green-500 rounded-full mt-2"},null,-1)),u("div",FSn,[F[37]||(F[37]=u("p",{class:"text-sm font-medium text-gray-900"},"Issue Resolved",-1)),u("p",BSn,$(x(r.value.resolved_date)),1)])])):se("",!0)])])])]),b(v(jt),{modelValue:i.value,"onUpdate:modelValue":F[6]||(F[6]=L=>i.value=L),options:{title:"Add Comment"}},{"body-content":D(()=>[u("div",zSn,[b(v(ve),{type:"textarea",modelValue:o.value,"onUpdate:modelValue":F[4]||(F[4]=L=>o.value=L),placeholder:"Enter your comment...",rows:4},null,8,["modelValue"])])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:F[5]||(F[5]=L=>i.value=!1)},{default:D(()=>[...F[40]||(F[40]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:C,loading:d.value},{default:D(()=>[...F[41]||(F[41]=[W(" Add Comment ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),b(v(jt),{modelValue:a.value,"onUpdate:modelValue":F[9]||(F[9]=L=>a.value=L),options:{title:"Resolve Issue"}},{"body-content":D(()=>[u("div",USn,[b(v(ve),{type:"textarea",modelValue:l.value,"onUpdate:modelValue":F[7]||(F[7]=L=>l.value=L),placeholder:"Describe how this issue was resolved...",rows:4,label:"Resolution Details"},null,8,["modelValue"])])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:F[8]||(F[8]=L=>a.value=!1)},{default:D(()=>[...F[42]||(F[42]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:S,loading:c.value},{default:D(()=>[...F[43]||(F[43]=[W(" Resolve Issue ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])]))}},qSn={class:"p-6"},WSn={class:"flex items-center justify-between mb-6"},GSn={class:"flex items-center gap-4"},YSn={class:"text-2xl font-bold text-gray-900"},KSn={class:"text-gray-500 mt-1"},XSn={class:"flex items-center gap-2"},QSn={class:"max-w-4xl"},ZSn={class:"space-y-6"},JSn={class:"bg-white rounded-lg border p-6"},eCn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tCn={class:"bg-white rounded-lg border p-6"},nCn={class:"space-y-4"},rCn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},sCn={class:"bg-white rounded-lg border p-6"},iCn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},aCn={key:0,class:"bg-white rounded-lg border p-6"},oCn={class:"space-y-4"},lCn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uCn={class:"bg-white rounded-lg border p-6"},dCn={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},_W={__name:"IssueLogForm",setup(t){const e=ta(),n=_n(),r=Q(!1),s=Q([]),i=Q([]),a=Q([]),o=Q([]),l=Q([]),d=Z(()=>e.params.id&&e.params.id!=="new"),c=Q({issue_type:"",severity:"Medium",priority:"Medium",status:"Open",reported_by:"",assigned_to:"",reported_date:new Date().toISOString().split("T")[0],due_date:"",description:"",location:"",item_code:"",quantity_affected:0,stock_take_session:"",variance_case:"",audit_plan:"",resolution:"",resolved_by:"",resolved_date:"",notes:""});yt(()=>ue(this,null,function*(){yield Promise.all([f(),p(),h(),m(),g()]),d.value&&(yield y()),!d.value&&!c.value.reported_by&&(c.value.reported_by=frappe.session.user)}));function f(){return ue(this,null,function*(){try{const A=yield Ke("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});s.value=A.map(M=>({label:M.full_name||M.name,value:M.name}))}catch(A){console.error("Error loading users:",A)}})}function p(){return ue(this,null,function*(){try{const A=yield Ke("frappe.client.get_list",{doctype:"Item",fields:["name","item_name"],limit_page_length:0});i.value=A.map(M=>({label:`${M.name} - ${M.item_name}`,value:M.name}))}catch(A){console.error("Error loading items:",A)}})}function h(){return ue(this,null,function*(){try{const A=yield Ke("frappe.client.get_list",{doctype:"Stock Take Session",fields:["name","title"],limit_page_length:0});a.value=A.map(M=>({label:M.title||M.name,value:M.name}))}catch(A){console.error("Error loading sessions:",A)}})}function m(){return ue(this,null,function*(){try{const A=yield Ke("frappe.client.get_list",{doctype:"Variance Case",fields:["name","title"],limit_page_length:0});o.value=A.map(M=>({label:M.title||M.name,value:M.name}))}catch(A){console.error("Error loading variance cases:",A)}})}function g(){return ue(this,null,function*(){try{const A=yield Ke("frappe.client.get_list",{doctype:"Audit Plan",fields:["name","title"],limit_page_length:0});l.value=A.map(M=>({label:M.title||M.name,value:M.name}))}catch(A){console.error("Error loading audit plans:",A)}})}function y(){return ue(this,null,function*(){try{const A=yield Ke("frappe.client.get",{doctype:"Issue Log",name:e.params.id});c.value={issue_type:A.issue_type||"",severity:A.severity||"Medium",priority:A.priority||"Medium",status:A.status||"Open",reported_by:A.reported_by||"",assigned_to:A.assigned_to||"",reported_date:A.reported_date||"",due_date:A.due_date||"",description:A.description||"",location:A.location||"",item_code:A.item_code||"",quantity_affected:A.quantity_affected||0,stock_take_session:A.stock_take_session||"",variance_case:A.variance_case||"",audit_plan:A.audit_plan||"",resolution:A.resolution||"",resolved_by:A.resolved_by||"",resolved_date:A.resolved_date||"",notes:A.notes||""}}catch(A){console.error("Error loading issue:",A)}})}function x(){return ue(this,null,function*(){if(!c.value.issue_type){alert("Issue type is required");return}if(!c.value.description){alert("Description is required");return}r.value=!0;try{if(d.value)yield Ke("frappe.client.set_value",{doctype:"Issue Log",name:e.params.id,fieldname:c.value}),n.push(`/inventory-audit/issues/${e.params.id}`);else{const A=yield Ke("frappe.client.insert",{doc:ge({doctype:"Issue Log"},c.value)});n.push(`/inventory-audit/issues/${A.name}`)}}catch(A){console.error("Error saving issue:",A),alert("Error saving issue: "+A.message)}finally{r.value=!1}})}function _(){d.value?n.push(`/inventory-audit/issues/${e.params.id}`):n.push("/inventory-audit/issues")}const k=[{label:"Stock Discrepancy",value:"Stock Discrepancy"},{label:"Quality Issue",value:"Quality Issue"},{label:"Documentation Error",value:"Documentation Error"},{label:"Process Violation",value:"Process Violation"},{label:"System Error",value:"System Error"},{label:"Other",value:"Other"}],w=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Critical",value:"Critical"}],S=[{label:"Low",value:"Low"},{label:"Medium",value:"Medium"},{label:"High",value:"High"},{label:"Urgent",value:"Urgent"}],C=[{label:"Open",value:"Open"},{label:"In Progress",value:"In Progress"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}];return(A,M)=>(T(),R("div",qSn,[u("div",WSn,[u("div",GSn,[b(v(J),{variant:"ghost",onClick:_},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",YSn,$(d.value?"Edit Issue":"Log New Issue"),1),u("p",KSn,$(d.value?`Editing ${v(e).params.id}`:"Report a new stock take issue"),1)])]),u("div",XSn,[b(v(J),{variant:"outline",onClick:_},{default:D(()=>[...M[19]||(M[19]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:x,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(d.value?"Save Changes":"Log Issue"),1)]),_:1},8,["loading"])])]),u("div",QSn,[u("div",ZSn,[u("div",JSn,[M[28]||(M[28]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),u("div",eCn,[u("div",null,[M[20]||(M[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Issue Type "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:c.value.issue_type,"onUpdate:modelValue":M[0]||(M[0]=E=>c.value.issue_type=E),options:k},null,8,["modelValue"])]),u("div",null,[M[21]||(M[21]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Severity",-1)),b(v(ve),{type:"select",modelValue:c.value.severity,"onUpdate:modelValue":M[1]||(M[1]=E=>c.value.severity=E),options:w},null,8,["modelValue"])]),u("div",null,[M[22]||(M[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),b(v(ve),{type:"select",modelValue:c.value.priority,"onUpdate:modelValue":M[2]||(M[2]=E=>c.value.priority=E),options:S},null,8,["modelValue"])]),u("div",null,[M[23]||(M[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(v(ve),{type:"select",modelValue:c.value.status,"onUpdate:modelValue":M[3]||(M[3]=E=>c.value.status=E),options:C},null,8,["modelValue"])]),u("div",null,[M[24]||(M[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reported By",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.reported_by,"onUpdate:modelValue":M[4]||(M[4]=E=>c.value.reported_by=E),options:s.value,placeholder:"Select user"},null,8,["modelValue","options"])]),u("div",null,[M[25]||(M[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.assigned_to,"onUpdate:modelValue":M[5]||(M[5]=E=>c.value.assigned_to=E),options:s.value,placeholder:"Select assignee"},null,8,["modelValue","options"])]),u("div",null,[M[26]||(M[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reported Date",-1)),b(v(ve),{type:"date",modelValue:c.value.reported_date,"onUpdate:modelValue":M[6]||(M[6]=E=>c.value.reported_date=E)},null,8,["modelValue"])]),u("div",null,[M[27]||(M[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),b(v(ve),{type:"date",modelValue:c.value.due_date,"onUpdate:modelValue":M[7]||(M[7]=E=>c.value.due_date=E)},null,8,["modelValue"])])])]),u("div",tCn,[M[33]||(M[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Issue Details",-1)),u("div",nCn,[u("div",null,[M[29]||(M[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Description "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"textarea",modelValue:c.value.description,"onUpdate:modelValue":M[8]||(M[8]=E=>c.value.description=E),placeholder:"Describe the issue in detail...",rows:4},null,8,["modelValue"])]),u("div",null,[M[30]||(M[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),b(v(ve),{type:"text",modelValue:c.value.location,"onUpdate:modelValue":M[9]||(M[9]=E=>c.value.location=E),placeholder:"Where did this issue occur?"},null,8,["modelValue"])]),u("div",rCn,[u("div",null,[M[31]||(M[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Item Code",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.item_code,"onUpdate:modelValue":M[10]||(M[10]=E=>c.value.item_code=E),options:i.value,placeholder:"Select affected item"},null,8,["modelValue","options"])]),u("div",null,[M[32]||(M[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quantity Affected",-1)),b(v(ve),{type:"number",modelValue:c.value.quantity_affected,"onUpdate:modelValue":M[11]||(M[11]=E=>c.value.quantity_affected=E),placeholder:"0"},null,8,["modelValue"])])])])]),u("div",sCn,[M[37]||(M[37]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Related Records",-1)),u("div",iCn,[u("div",null,[M[34]||(M[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock Take Session",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.stock_take_session,"onUpdate:modelValue":M[12]||(M[12]=E=>c.value.stock_take_session=E),options:a.value,placeholder:"Link to session"},null,8,["modelValue","options"])]),u("div",null,[M[35]||(M[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Variance Case",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.variance_case,"onUpdate:modelValue":M[13]||(M[13]=E=>c.value.variance_case=E),options:o.value,placeholder:"Link to variance case"},null,8,["modelValue","options"])]),u("div",null,[M[36]||(M[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Plan",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.audit_plan,"onUpdate:modelValue":M[14]||(M[14]=E=>c.value.audit_plan=E),options:l.value,placeholder:"Link to audit plan"},null,8,["modelValue","options"])])])]),c.value.status==="Resolved"?(T(),R("div",aCn,[M[41]||(M[41]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resolution Details",-1)),u("div",oCn,[u("div",null,[M[38]||(M[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution",-1)),b(v(ve),{type:"textarea",modelValue:c.value.resolution,"onUpdate:modelValue":M[15]||(M[15]=E=>c.value.resolution=E),placeholder:"Describe how this issue was resolved...",rows:3},null,8,["modelValue"])]),u("div",lCn,[u("div",null,[M[39]||(M[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolved By",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.resolved_by,"onUpdate:modelValue":M[16]||(M[16]=E=>c.value.resolved_by=E),options:s.value,placeholder:"Select user"},null,8,["modelValue","options"])]),u("div",null,[M[40]||(M[40]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolved Date",-1)),b(v(ve),{type:"date",modelValue:c.value.resolved_date,"onUpdate:modelValue":M[17]||(M[17]=E=>c.value.resolved_date=E)},null,8,["modelValue"])])])])])):se("",!0),u("div",uCn,[M[42]||(M[42]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Additional Notes",-1)),b(v(ve),{type:"textarea",modelValue:c.value.notes,"onUpdate:modelValue":M[18]||(M[18]=E=>c.value.notes=E),placeholder:"Any additional notes or observations...",rows:3},null,8,["modelValue"])])]),u("div",dCn,[b(v(J),{variant:"outline",onClick:_},{default:D(()=>[...M[43]||(M[43]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:x,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(d.value?"Save Changes":"Log Issue"),1)]),_:1},8,["loading"])])])]))}},cCn={class:"p-6"},fCn={class:"flex justify-between items-center mb-6"},pCn={class:"flex gap-2"},hCn={class:"bg-white rounded-lg border p-4 mb-6"},mCn={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},gCn=["value"],vCn={class:"flex items-end"},yCn={class:"flex items-center gap-2"},bCn={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},xCn={class:"bg-white rounded-lg border p-4"},_Cn={class:"text-2xl font-bold"},wCn={class:"bg-white rounded-lg border p-4"},kCn={class:"text-2xl font-bold text-yellow-600"},SCn={class:"bg-white rounded-lg border p-4"},CCn={class:"text-2xl font-bold text-blue-600"},ACn={class:"bg-white rounded-lg border p-4"},TCn={class:"text-2xl font-bold text-red-600"},$Cn={class:"bg-white rounded-lg border p-4"},MCn={class:"text-2xl font-bold text-green-600"},ECn={class:"bg-white rounded-lg border shadow-sm"},DCn={key:0,class:"divide-y divide-gray-200"},RCn=["onClick"],PCn={class:"flex items-start justify-between"},ICn={class:"flex-1"},OCn={class:"flex items-center gap-3 mb-2"},LCn={class:"font-medium text-gray-900"},VCn={class:"text-sm text-gray-600 mb-2"},NCn={class:"flex items-center gap-6 text-sm text-gray-500"},jCn={class:"flex items-center gap-1"},FCn={key:0,class:"flex items-center gap-1"},BCn={key:1,class:"flex items-center gap-1"},zCn={class:"flex items-center gap-6 mt-3 text-sm"},UCn={key:0,class:"flex items-center gap-1 text-gray-700"},HCn={key:1,class:"flex items-center gap-1 text-gray-500"},qCn={class:"flex items-center gap-1 text-gray-500"},WCn={class:"text-right"},GCn={key:1,class:"p-12 text-center text-gray-500"},YCn={key:2,class:"px-4 py-3 border-t flex items-center justify-between"},KCn={class:"text-sm text-gray-500"},XCn={class:"flex gap-2"},QCn={__name:"IssueLogList",setup(t){const e=_n(),n=tu(),r=Q(!1),s=Q(!1),i=Q({status:"",priority:"",issue_type:"",assigned_to:""}),a=Z(()=>n.issues),o=Z(()=>n.issuesTotalCount),l=Z(()=>n.issuesPage),d=Z(()=>n.issuesPageSize),c=Z(()=>Math.ceil(o.value/d.value));yt(()=>ue(this,null,function*(){yield f()}));function f(){return ue(this,null,function*(){r.value=!0;try{const C=ge({},i.value);Object.keys(C).forEach(A=>{C[A]||delete C[A]}),yield n.loadIssues(C,l.value,d.value)}finally{r.value=!1}})}function p(){return ue(this,null,function*(){i.value={status:"",priority:"",issue_type:"",assigned_to:""},s.value=!1,yield f()})}let h=null;function m(){clearTimeout(h),h=setTimeout(()=>f(),300)}function g(C){return ue(this,null,function*(){yield n.loadIssues(i.value,C,d.value)})}function y(){e.push("/inventory-audit/issues/new")}function x(C){e.push(`/inventory-audit/issues/${C}`)}function _(C){return{Open:"yellow","In Progress":"blue",Resolved:"green",Closed:"gray"}[C]||"gray"}function k(C){return{Critical:"red",High:"orange",Medium:"yellow",Low:"blue"}[C]||"gray"}function w(C){return C.is_sla_breached?"text-red-600":"text-gray-900"}function S(C){return C?new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}return(C,A)=>(T(),R("div",cCn,[u("div",fCn,[A[8]||(A[8]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Stock Take Issue Log"),u("p",{class:"text-gray-600"},"Track and resolve operational issues during audits")],-1)),u("div",pCn,[b(v(J),{onClick:p,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(v(J),{onClick:y},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),A[7]||(A[7]=W(" Log Issue ",-1))]),_:1})])]),u("div",hCn,[u("div",mCn,[u("div",null,[A[10]||(A[10]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),we(u("select",{"onUpdate:modelValue":A[0]||(A[0]=M=>i.value.status=M),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[...A[9]||(A[9]=[fr('<option value="">All Statuses</option><option value="Open">Open</option><option value="In Progress">In Progress</option><option value="Resolved">Resolved</option><option value="Closed">Closed</option>',5)])],544),[[vn,i.value.status]])]),u("div",null,[A[12]||(A[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),we(u("select",{"onUpdate:modelValue":A[1]||(A[1]=M=>i.value.priority=M),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[...A[11]||(A[11]=[fr('<option value="">All Priorities</option><option value="Critical">Critical</option><option value="High">High</option><option value="Medium">Medium</option><option value="Low">Low</option>',5)])],544),[[vn,i.value.priority]])]),u("div",null,[A[14]||(A[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Issue Type",-1)),we(u("select",{"onUpdate:modelValue":A[2]||(A[2]=M=>i.value.issue_type=M),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:f},[A[13]||(A[13]=u("option",{value:""},"All Types",-1)),(T(!0),R(xe,null,_e(v(n).issueTypeOptions,M=>(T(),R("option",{key:M.value,value:M.value},$(M.label),9,gCn))),128))],544),[[vn,i.value.issue_type]])]),u("div",null,[A[15]||(A[15]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),we(u("input",{"onUpdate:modelValue":A[3]||(A[3]=M=>i.value.assigned_to=M),type:"text",placeholder:"Filter by assignee",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:m},null,544),[[Rt,i.value.assigned_to]])]),u("div",vCn,[u("label",yCn,[we(u("input",{type:"checkbox","onUpdate:modelValue":A[4]||(A[4]=M=>s.value=M),onChange:f,class:"rounded border-gray-300"},null,544),[[Rn,s.value]]),A[16]||(A[16]=u("span",{class:"text-sm text-gray-700"},"SLA Breached Only",-1))])])])]),u("div",bCn,[u("div",xCn,[A[17]||(A[17]=u("p",{class:"text-sm text-gray-500"},"Total Issues",-1)),u("p",_Cn,$(o.value),1)]),u("div",wCn,[A[18]||(A[18]=u("p",{class:"text-sm text-gray-500"},"Open",-1)),u("p",kCn,$(a.value.filter(M=>M.status==="Open").length),1)]),u("div",SCn,[A[19]||(A[19]=u("p",{class:"text-sm text-gray-500"},"In Progress",-1)),u("p",CCn,$(a.value.filter(M=>M.status==="In Progress").length),1)]),u("div",ACn,[A[20]||(A[20]=u("p",{class:"text-sm text-gray-500"},"SLA Breached",-1)),u("p",TCn,$(a.value.filter(M=>M.is_sla_breached).length),1)]),u("div",$Cn,[A[21]||(A[21]=u("p",{class:"text-sm text-gray-500"},"Resolved",-1)),u("p",MCn,$(a.value.filter(M=>M.status==="Resolved").length),1)])]),u("div",ECn,[a.value.length>0?(T(),R("div",DCn,[(T(!0),R(xe,null,_e(a.value,M=>(T(),R("div",{key:M.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:E=>x(M.name)},[u("div",PCn,[u("div",ICn,[u("div",OCn,[u("h4",LCn,$(M.issue_title),1),b(v(De),{variant:_(M.status)},{default:D(()=>[W($(M.status),1)]),_:2},1032,["variant"]),b(v(De),{variant:k(M.priority)},{default:D(()=>[W($(M.priority),1)]),_:2},1032,["variant"]),M.is_sla_breached?(T(),he(v(De),{key:0,variant:"red"},{default:D(()=>[b(v(rn),{class:"w-3 h-3 mr-1"}),A[22]||(A[22]=W(" SLA Breached ",-1))]),_:1})):se("",!0)]),u("p",VCn,$(M.issue_id),1),u("div",NCn,[u("span",jCn,[b(v(OY),{class:"w-4 h-4"}),W(" "+$(M.issue_type),1)]),M.warehouse?(T(),R("span",FCn,[b(v(ob),{class:"w-4 h-4"}),W(" "+$(M.warehouse),1)])):se("",!0),M.item_code?(T(),R("span",BCn,[b(v(Qa),{class:"w-4 h-4"}),W(" "+$(M.item_code),1)])):se("",!0)]),u("div",zCn,[M.assigned_to?(T(),R("span",UCn,[b(v(Ji),{class:"w-4 h-4"}),A[23]||(A[23]=W(" Assigned: ",-1)),u("strong",null,$(M.assigned_to),1)])):se("",!0),M.reported_by?(T(),R("span",HCn," Reported by: "+$(M.reported_by),1)):se("",!0),u("span",qCn,[b(v(rr),{class:"w-4 h-4"}),W(" "+$(S(M.reported_date)),1)])])]),u("div",WCn,[A[24]||(A[24]=u("p",{class:"text-sm text-gray-500"},"SLA Due",-1)),u("p",{class:pe(["font-medium",w(M)])},$(S(M.sla_due_date)),3)])])],8,RCn))),128))])):r.value?se("",!0):(T(),R("div",GCn,[b(v(Kt),{class:"w-12 h-12 mx-auto mb-3 text-green-300"}),A[26]||(A[26]=u("p",null,"No issues logged",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-2",onClick:y},{default:D(()=>[...A[25]||(A[25]=[W(" Log First Issue ",-1)])]),_:1})])),c.value>1?(T(),R("div",YCn,[u("p",KCn," Showing "+$((l.value-1)*d.value+1)+" - "+$(Math.min(l.value*d.value,o.value))+" of "+$(o.value),1),u("div",XCn,[b(v(J),{variant:"outline",size:"sm",disabled:l.value===1,onClick:A[5]||(A[5]=M=>g(l.value-1))},{default:D(()=>[...A[27]||(A[27]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(v(J),{variant:"outline",size:"sm",disabled:l.value===c.value,onClick:A[6]||(A[6]=M=>g(l.value+1))},{default:D(()=>[...A[28]||(A[28]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):se("",!0)])]))}},ZCn={class:"p-6"},JCn={class:"flex items-center justify-between mb-6"},eAn={class:"flex items-center gap-4"},tAn={class:"text-2xl font-bold text-gray-900"},nAn={class:"text-gray-500 mt-1"},rAn={class:"flex items-center gap-2"},sAn={class:"flex items-center gap-2 ml-auto"},iAn={key:0,class:"flex items-center justify-center py-20"},aAn={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},oAn={class:"lg:col-span-2 space-y-6"},lAn={key:0,class:"bg-white rounded-lg border p-6"},uAn={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},dAn={class:"flex items-start gap-3"},cAn={class:"space-y-4"},fAn={class:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors"},pAn={key:0,class:"space-y-2"},hAn={key:1,class:"space-y-2"},mAn={class:"text-xs text-gray-500"},gAn={class:"flex gap-2 justify-center"},vAn={class:"bg-gray-50 rounded-lg p-4"},yAn={class:"grid grid-cols-2 gap-4 text-sm"},bAn={class:"font-medium ml-2"},xAn={key:0,class:"mt-2 text-xs text-red-600"},_An={key:0},wAn={key:1},kAn={class:"bg-white rounded-lg border p-6"},SAn={class:"flex items-center justify-between mb-4"},CAn={class:"flex items-center gap-2"},AAn={class:"ml-2"},TAn={class:"text-xs text-gray-500"},$An={class:"flex-1 h-1 mx-4 bg-gray-200 rounded"},MAn={class:"flex items-center gap-2"},EAn={class:"ml-2"},DAn={class:"text-xs text-gray-500"},RAn={class:"flex-1 h-1 mx-4 bg-gray-200 rounded"},PAn={class:"flex items-center gap-2"},IAn={class:"ml-2"},OAn={class:"text-xs text-gray-500"},LAn={class:"flex-1 h-1 mx-4 bg-gray-200 rounded"},VAn={class:"flex items-center gap-2"},NAn={class:"ml-2"},jAn={class:"text-xs text-gray-500"},FAn={class:"flex items-center gap-3 pt-4 border-t"},BAn={key:3,class:"text-green-600 font-medium flex items-center"},zAn={class:"bg-white rounded-lg border p-6"},UAn={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},HAn={class:"text-center p-4 bg-gray-50 rounded-lg"},qAn={class:"text-2xl font-bold text-gray-900"},WAn={class:"text-center p-4 bg-yellow-50 rounded-lg"},GAn={class:"text-2xl font-bold text-yellow-600"},YAn={class:"text-center p-4 bg-green-50 rounded-lg"},KAn={class:"text-2xl font-bold text-green-600"},XAn={class:"text-center p-4 bg-red-50 rounded-lg"},QAn={class:"text-2xl font-bold text-red-600"},ZAn={class:"text-center p-4 bg-blue-50 rounded-lg"},JAn={class:"text-2xl font-bold text-blue-600"},e4n={class:"mt-4 pt-4 border-t text-center"},t4n={class:"bg-white rounded-lg border p-6"},n4n={class:"flex items-center justify-between mb-4"},r4n={class:"flex items-center gap-2"},s4n={key:0,class:"flex items-center justify-center"},i4n={key:1,class:"text-right"},a4n={class:"flex items-center gap-1"},o4n={key:1,class:"bg-white rounded-lg border p-6"},l4n=["innerHTML"],u4n={class:"space-y-6"},d4n={class:"bg-white rounded-lg border p-6"},c4n={class:"space-y-4"},f4n={key:0,class:"text-xs ml-2 bg-red-100 text-red-700 px-2 py-1 rounded"},p4n={class:"bg-white rounded-lg border p-6"},h4n={class:"space-y-3"},m4n={class:"flex justify-between"},g4n={class:"font-medium"},v4n={class:"flex justify-between"},y4n={class:"font-medium"},b4n={class:"flex justify-between"},x4n={class:"font-medium"},_4n={class:"flex justify-between"},w4n={class:"font-medium"},k4n={class:"bg-white rounded-lg border p-6"},S4n={class:"space-y-4"},C4n={key:0,class:"flex gap-3"},A4n={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},T4n={class:"text-xs text-gray-500"},$4n={class:"text-xs text-gray-400"},M4n={key:1,class:"flex gap-3"},E4n={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},D4n={class:"text-xs text-gray-500"},R4n={class:"text-xs text-gray-400"},P4n={key:2,class:"flex gap-3"},I4n={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},O4n={class:"text-xs text-gray-500"},L4n={class:"text-xs text-gray-400"},V4n={key:3,class:"flex gap-3"},N4n={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},j4n={class:"text-xs text-gray-500"},F4n={class:"text-xs text-gray-400"},B4n={key:4,class:"flex gap-3"},z4n={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},U4n={class:"text-xs text-gray-500"},H4n={key:5,class:"text-sm text-gray-500 text-center py-4"},q4n={class:"space-y-4"},W4n={class:"bg-gray-50 p-4 rounded-lg"},G4n={class:"text-sm"},Y4n={class:"text-sm"},K4n={class:"text-sm"},X4n={__name:"StockTakeDetail",setup(t){const e=ta(),n=_n(),r=Q(!0),s=Q(!1),i=Q(!1),a=Q(null),o=Q(""),l=Q(!1),d=Q(null),c=Q([]),f=Q({employee:"",reason:""}),p=Q(null),h=Q(null);yt(()=>ue(this,null,function*(){yield Promise.all([m(),g()])}));function m(){return ue(this,null,function*(){r.value=!0;try{const Y=yield Ke("frappe.client.get",{doctype:"Stock Take Audit",name:e.params.id});a.value=Y}catch(Y){console.error("Error loading audit:",Y)}finally{r.value=!1}})}function g(){return ue(this,null,function*(){try{const Y=yield Ke("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});c.value=Y.map(B=>({label:B.full_name||B.name,value:B.name}))}catch(Y){console.error("Error loading users:",Y)}})}const y=Z(()=>{var B;return{Draft:"subtle","Physical Count Submitted":"yellow","Analyst Reviewed":"blue","HOD Approved":"green","Under Investigation":"red"}[(B=a.value)==null?void 0:B.status]||"subtle"}),x=Z(()=>{var Y;return!["HOD Approved","Under Investigation"].includes((Y=a.value)==null?void 0:Y.status)}),_=Z(()=>{var ae;if(!((ae=a.value)!=null&&ae.stock_take_items))return!1;const Y=a.value.stock_take_items.every(be=>be.physical_quantity!==null),B=a.value.signed_stock_take_copy;return Y&&B}),k=Z(()=>{var Y;return((Y=a.value)==null?void 0:Y.status)==="Physical Count Submitted"}),w=Z(()=>{var Y;return((Y=a.value)==null?void 0:Y.status)==="Analyst Reviewed"}),S=Z(()=>{var Y,B;return((B=(Y=a.value)==null?void 0:Y.stock_take_items)==null?void 0:B.length)||0}),C=Z(()=>{var Y;return(Y=a.value)!=null&&Y.stock_take_items?a.value.stock_take_items.filter(B=>B.physical_quantity!==null&&B.physical_quantity!==void 0).length:0}),A=Z(()=>{var Y;return(Y=a.value)!=null&&Y.stock_take_items?a.value.stock_take_items.every(B=>B.physical_quantity!==null&&B.physical_quantity!==void 0):!1}),M=Z(()=>{var Y;return(Y=a.value)!=null&&Y.stock_take_items?o.value?a.value.stock_take_items.filter(B=>B.verification_status===o.value):a.value.stock_take_items:[]});function E(Y){var be,fe,me,ye;const B={1:((be=a.value)==null?void 0:be.status)!=="Draft",2:(fe=a.value)==null?void 0:fe.physical_count_submitted,3:(me=a.value)==null?void 0:me.analyst_reviewed,4:(ye=a.value)==null?void 0:ye.hod_approved};return B[Y]?"bg-green-500 text-white":(Y===1?!0:B[Y-1])&&!B[Y]?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}function P(Y){return{"Verified-Match":"green","Verified-Discrepancy":"red",Resolved:"blue",Pending:"yellow"}[Y]||"subtle"}function I(Y){return!Y||Y===0?"green":"red"}function F(Y){return{"Verified-Match":"bg-surface-green-3","Verified-Discrepancy":"bg-surface-red-5",Resolved:"bg-surface-blue-3",Pending:"bg-surface-yellow-3"}[Y]||"bg-surface-gray-3"}function L(Y){return{"Stock Amendment":"blue","Charge Staff":"red","Write-off":"gray","Under Investigation":"yellow"}[Y]||"gray"}function z(Y){return Y?new Date(Y)<new Date:!1}function N(Y){return Y?new Date(Y).toLocaleDateString():"-"}function q(Y){return Y?new Date(Y).toLocaleString():"-"}function V(Y){return Y==null?"KES 0":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(Y)}function O(){return ue(this,null,function*(){s.value=!0;try{yield Ke("run_doc_method",{dt:"Stock Take Audit",dn:e.params.id,method:"submit_physical_count"}),yield m()}catch(Y){console.error("Error:",Y),alert(Y.message)}finally{s.value=!1}})}function X(){return ue(this,null,function*(){s.value=!0;try{yield Ke("run_doc_method",{dt:"Stock Take Audit",dn:e.params.id,method:"analyst_review"}),yield m()}catch(Y){console.error("Error:",Y),alert(Y.message)}finally{s.value=!1}})}function j(){return ue(this,null,function*(){s.value=!0;try{yield Ke("run_doc_method",{dt:"Stock Take Audit",dn:e.params.id,method:"hod_approve"}),yield m()}catch(Y){console.error("Error:",Y),alert(Y.message)}finally{s.value=!1}})}function U(Y){d.value=Y,f.value={employee:"",reason:`Stock discrepancy for ${Y.item_code}`},l.value=!0}function G(){return ue(this,null,function*(){if(!f.value.employee){alert("Please select an employee");return}i.value=!0;try{yield Ke("run_doc_method",{dt:"Stock Take Audit",dn:e.params.id,method:"create_staff_charge",args:{item_row_name:d.value.name,employee:f.value.employee,charge_reason:f.value.reason}}),l.value=!1,yield m()}catch(Y){console.error("Error:",Y),alert(Y.message)}finally{i.value=!1}})}function ee(Y){window.open(`/app/staff-charge-record/${Y}`,"_blank")}function ie(){n.push("/inventory-audit/stock-take")}function ne(){n.push(`/inventory-audit/stock-take/${e.params.id}/edit`)}function ce(){window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=Stock Take Audit&name=${e.params.id}&format=Stock Take Audit Daily Summary`,"_blank")}function oe(){console.log("Export to Excel")}function re(Y){return ue(this,null,function*(){const B=Y.target.files[0];if(!B)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png"].includes(B.type)){alert("Please upload a PDF, DOC, DOCX, JPG, or PNG file");return}const be=10*1024*1024;if(B.size>be){alert("File size must be less than 10MB");return}try{const fe=new FormData;fe.append("file",B),fe.append("is_private","1"),fe.append("doctype","Stock Take Audit"),fe.append("docname",e.params.id),fe.append("fieldname","signed_stock_take_copy");const me=yield fetch("/api/method/upload_file",{method:"POST",body:fe,headers:{Accept:"application/json"}});if(!me.ok){const Ee=yield me.text();throw new Error(`Upload failed: ${me.status} ${Ee}`)}const ye=yield me.json();if(ye.message&&ye.message.file_url)yield Ke("frappe.client.set_value",{doctype:"Stock Take Audit",name:e.params.id,fieldname:"signed_stock_take_copy",value:ye.message.file_url}),yield m();else throw new Error("Invalid response from server")}catch(fe){console.error("Error uploading file:",fe),alert("Error uploading file: "+fe.message)}})}function te(Y){return Y?Y.split("/").pop():""}function K(Y){Y&&window.open(Y,"_blank")}function le(){return ue(this,null,function*(){if(confirm("Are you sure you want to remove the signed stock take copy?"))try{yield Ke("frappe.client.set_value",{doctype:"Stock Take Audit",name:e.params.id,fieldname:"signed_stock_take_copy",value:""}),yield m()}catch(Y){console.error("Error removing attachment:",Y),alert("Error removing attachment: "+Y.message)}})}function H(Y,B){return ue(this,null,function*(){if(!h.value){h.value=Y.name;try{yield Ke("frappe.client.set_value",{doctype:"Stock Take Audit Item",name:Y.name,fieldname:"physical_quantity",value:Number.parseFloat(B)||0}),yield m()}catch(ae){console.error("Error updating physical quantity:",ae),alert("Error updating physical quantity: "+ae.message)}finally{h.value=null}}})}return(Y,B)=>{var ae,be,fe,me;return T(),R("div",ZCn,[u("div",JCn,[u("div",eAn,[b(v(J),{variant:"ghost",onClick:ie,class:"p-2"},{default:D(()=>[b(v(ss),{class:"w-4 h-4"})]),_:1}),u("div",null,[u("h1",tAn,$(((ae=a.value)==null?void 0:ae.name)||"Loading..."),1),u("p",nAn,$((be=a.value)==null?void 0:be.stock_take_type)+" | "+$((fe=a.value)==null?void 0:fe.warehouse)+" | "+$(N((me=a.value)==null?void 0:me.audit_date)),1)])]),u("div",rAn,[b(v(De),{variant:y.value},{default:D(()=>{var ye;return[W($((ye=a.value)==null?void 0:ye.status),1)]}),_:1},8,["variant"]),u("div",sAn,[x.value?(T(),he(v(J),{key:0,variant:"outline",onClick:ne},{default:D(()=>[b(v(yn),{class:"w-4 h-4 mr-2"}),B[7]||(B[7]=W(" Edit ",-1))]),_:1})):se("",!0),b(v(J),{variant:"outline",onClick:ce},{default:D(()=>[b(v(JD),{class:"w-4 h-4 mr-2"}),B[8]||(B[8]=W(" Print ",-1))]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:oe},{default:D(()=>[b(v(xn),{class:"w-4 h-4 mr-2"}),B[9]||(B[9]=W(" Export ",-1))]),_:1})])])]),r.value?(T(),R("div",iAn,[...B[10]||(B[10]=[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):a.value?(T(),R("div",aAn,[u("div",oAn,[a.value.status==="Draft"?(T(),R("div",lAn,[B[22]||(B[22]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Stock Take Preparation",-1)),u("div",uAn,[u("div",dAn,[b(v(Kt),{class:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),B[11]||(B[11]=u("div",null,[u("h4",{class:"text-sm font-medium text-blue-900 mb-1"},"Stock Taker Tasks"),u("ul",{class:"text-sm text-blue-800 space-y-1"},[u("li",null," Enter physical quantities for all items in the table below"),u("li",null," Upload the manager-signed physical stock take copy"),u("li",null," Review and verify all counts are accurate"),u("li",null," Submit for analyst review once everything is complete")])],-1))])]),u("div",cAn,[u("div",null,[B[17]||(B[17]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Signed Stock Take Copy "),u("span",{class:"text-red-500"},"*")],-1)),u("div",fAn,[a.value.signed_stock_take_copy?(T(),R("div",hAn,[b(v(vt),{class:"w-8 h-8 text-green-500 mx-auto"}),u("div",null,[B[14]||(B[14]=u("p",{class:"text-sm font-medium text-green-700"},"Signed copy attached",-1)),u("p",mAn,$(te(a.value.signed_stock_take_copy)),1)]),u("div",gAn,[b(v(J),{variant:"outline",size:"sm",onClick:B[1]||(B[1]=ye=>K(a.value.signed_stock_take_copy))},{default:D(()=>[b(v(lr),{class:"w-4 h-4 mr-2"}),B[15]||(B[15]=W(" View ",-1))]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:le},{default:D(()=>[b(v(is),{class:"w-4 h-4 mr-2"}),B[16]||(B[16]=W(" Remove ",-1))]),_:1})])])):(T(),R("div",pAn,[b(v(xa),{class:"w-8 h-8 text-gray-400 mx-auto"}),B[13]||(B[13]=u("div",null,[u("p",{class:"text-sm text-gray-600"},"Upload the manager-signed physical stock take copy"),u("p",{class:"text-xs text-gray-500 mt-1"},"PDF, DOC, DOCX, JPG, PNG files accepted")],-1)),u("input",{type:"file",ref_key:"fileInput",ref:p,onChange:re,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",class:"hidden"},null,544),b(v(J),{variant:"outline",size:"sm",onClick:B[0]||(B[0]=ye=>Y.$refs.fileInput.click())},{default:D(()=>[b(v(xa),{class:"w-4 h-4 mr-2"}),B[12]||(B[12]=W(" Choose File ",-1))]),_:1})]))]),B[18]||(B[18]=u("p",{class:"text-xs text-gray-500 mt-2"}," This signed document is required before submitting the physical count for review. ",-1))]),u("div",vAn,[B[21]||(B[21]=u("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Physical Count Status",-1)),u("div",yAn,[u("div",null,[B[19]||(B[19]=u("span",{class:"text-gray-500"},"Items Counted:",-1)),u("span",bAn,$(C.value)+" / "+$(S.value),1)]),u("div",null,[B[20]||(B[20]=u("span",{class:"text-gray-500"},"Ready to Submit:",-1)),u("span",{class:pe([_.value?"text-green-600 font-medium":"text-red-600","ml-2"])},$(_.value?"Yes":"No"),3)])]),_.value?se("",!0):(T(),R("div",xAn,[A.value?se("",!0):(T(),R("p",_An," All items must have physical quantities entered")),a.value.signed_stock_take_copy?se("",!0):(T(),R("p",wAn," Signed stock take copy must be attached"))]))])])])):se("",!0),u("div",kAn,[B[35]||(B[35]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Approval Workflow",-1)),u("div",SAn,[u("div",CAn,[u("div",{class:pe([E(1),"w-10 h-10 rounded-full flex items-center justify-center"])},[...B[23]||(B[23]=[u("span",{class:"text-sm font-medium"},"1",-1)])],2),u("div",AAn,[B[24]||(B[24]=u("p",{class:"text-sm font-medium"},"Analyst",-1)),u("p",TAn,$(a.value.created_by||"Not assigned"),1)])]),u("div",$An,[u("div",{class:pe([a.value.status!=="Draft"?"bg-green-500":"bg-gray-200","h-full rounded"]),style:rt({width:a.value.status!=="Draft"?"100%":"0%"})},null,6)]),u("div",MAn,[u("div",{class:pe([E(2),"w-10 h-10 rounded-full flex items-center justify-center"])},[...B[25]||(B[25]=[u("span",{class:"text-sm font-medium"},"2",-1)])],2),u("div",EAn,[B[26]||(B[26]=u("p",{class:"text-sm font-medium"},"Stock Taker",-1)),u("p",DAn,$(a.value.physical_count_submitted_by||"Not assigned"),1)])]),u("div",RAn,[u("div",{class:pe([a.value.physical_count_submitted?"bg-green-500":"bg-gray-200","h-full rounded"]),style:rt({width:a.value.physical_count_submitted?"100%":"0%"})},null,6)]),u("div",PAn,[u("div",{class:pe([E(3),"w-10 h-10 rounded-full flex items-center justify-center"])},[...B[27]||(B[27]=[u("span",{class:"text-sm font-medium"},"3",-1)])],2),u("div",IAn,[B[28]||(B[28]=u("p",{class:"text-sm font-medium"},"Analyst Review",-1)),u("p",OAn,$(a.value.stock_analyst||"Not assigned"),1)])]),u("div",LAn,[u("div",{class:pe([a.value.analyst_reviewed?"bg-green-500":"bg-gray-200","h-full rounded"]),style:rt({width:a.value.analyst_reviewed?"100%":"0%"})},null,6)]),u("div",VAn,[u("div",{class:pe([E(4),"w-10 h-10 rounded-full flex items-center justify-center"])},[...B[29]||(B[29]=[u("span",{class:"text-sm font-medium"},"4",-1)])],2),u("div",NAn,[B[30]||(B[30]=u("p",{class:"text-sm font-medium"},"HOD",-1)),u("p",jAn,$(a.value.hod_approver||"Not assigned"),1)])])]),u("div",FAn,[a.value.status==="Draft"&&_.value?(T(),he(v(J),{key:0,variant:"solid",onClick:O,loading:s.value},{default:D(()=>[b(v(Kt),{class:"w-4 h-4 mr-2"}),B[31]||(B[31]=W(" Submit Physical Count ",-1))]),_:1},8,["loading"])):se("",!0),a.value.status==="Physical Count Submitted"&&k.value?(T(),he(v(J),{key:1,variant:"solid",onClick:X,loading:s.value},{default:D(()=>[b(v(Kt),{class:"w-4 h-4 mr-2"}),B[32]||(B[32]=W(" Analyst Review ",-1))]),_:1},8,["loading"])):se("",!0),a.value.status==="Analyst Reviewed"&&w.value?(T(),he(v(J),{key:2,variant:"solid",onClick:j,loading:s.value},{default:D(()=>[b(v(Kt),{class:"w-4 h-4 mr-2"}),B[33]||(B[33]=W(" HOD Approve ",-1))]),_:1},8,["loading"])):se("",!0),a.value.status==="HOD Approved"?(T(),R("span",BAn,[b(v(Kt),{class:"w-4 h-4 mr-2"}),B[34]||(B[34]=W(" Fully Approved ",-1))])):se("",!0)])]),u("div",zAn,[B[42]||(B[42]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Summary",-1)),u("div",UAn,[u("div",HAn,[u("p",qAn,$(a.value.total_items||0),1),B[36]||(B[36]=u("p",{class:"text-sm text-gray-500"},"Total Items",-1))]),u("div",WAn,[u("p",GAn,$(a.value.items_pending||0),1),B[37]||(B[37]=u("p",{class:"text-sm text-gray-500"},"Pending",-1))]),u("div",YAn,[u("p",KAn,$(a.value.items_verified_match||0),1),B[38]||(B[38]=u("p",{class:"text-sm text-gray-500"},"Matched",-1))]),u("div",XAn,[u("p",QAn,$(a.value.items_verified_discrepancy||0),1),B[39]||(B[39]=u("p",{class:"text-sm text-gray-500"},"Discrepancy",-1))]),u("div",ZAn,[u("p",JAn,$(a.value.items_resolved||0),1),B[40]||(B[40]=u("p",{class:"text-sm text-gray-500"},"Resolved",-1))])]),u("div",e4n,[B[41]||(B[41]=u("p",{class:"text-sm text-gray-500"},"Total Variance Value",-1)),u("p",{class:pe(["text-2xl font-bold",a.value.total_variance_value>0?"text-red-600":"text-green-600"])},$(V(a.value.total_variance_value||0)),3)])]),u("div",t4n,[u("div",n4n,[B[44]||(B[44]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Stock Take Items",-1)),u("div",r4n,[we(u("select",{"onUpdate:modelValue":B[2]||(B[2]=ye=>o.value=ye),class:"text-sm border rounded px-3 py-1.5"},[...B[43]||(B[43]=[fr('<option value="">All Items</option><option value="Pending">Pending</option><option value="Verified-Match">Matched</option><option value="Verified-Discrepancy">Discrepancy</option><option value="Resolved">Resolved</option>',5)])],512),[[vn,o.value]])])]),b(v(XIe),{columns:[{label:"#",key:"index",width:"60px"},{label:"Item",key:"item",width:"2fr"},{label:"System Qty",key:"system_quantity",width:"120px",align:"right"},{label:"Physical Qty",key:"physical_quantity",width:"140px",align:"right"},{label:"Variance",key:"variance",width:"120px",align:"right"},{label:"Status",key:"status",width:"140px"},{label:"Resolution",key:"resolution",width:"140px"},{label:"Actions",key:"actions",width:"120px"}],rows:M.value.map((ye,Ee)=>({id:ye.name,index:{label:(Ee+1).toString()},item:{label:ye.item_code,description:ye.item_description},system_quantity:{label:(ye.system_quantity||0).toString()},physical_quantity:{label:a.value.status==="Draft"?"":ye.physical_quantity!==null?ye.physical_quantity.toString():"-",editable:a.value.status==="Draft",value:ye.physical_quantity},variance:{label:(ye.variance_quantity||0).toString(),color:I(ye.variance_quantity)},status:{label:ye.verification_status||"Pending",bg_color:F(ye.verification_status)},resolution:{label:ye.resolution_type||"-",color:L(ye.resolution_type)},actions:{item:ye}})),options:{onRowClick:ye=>console.log(ye),selectable:!1,showTooltip:!0,resizeColumn:!1},"row-key":"id"},{physical_quantity:D(({item:ye})=>[a.value.status==="Draft"?(T(),R("div",s4n,[b(v(ve),{type:"number",modelValue:ye.value,"onUpdate:modelValue":Ee=>H(ye.item,Ee),placeholder:"Count",class:"w-20 text-right",disabled:h.value===ye.item.name},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(T(),R("div",i4n,$(ye.label),1))]),status:D(({item:ye})=>[b(v(De),{variant:P(ye.label)},{default:D(()=>[W($(ye.label),1)]),_:2},1032,["variant"])]),actions:D(({item:ye})=>[u("div",a4n,[ye.item.resolution_type==="Charge Staff"&&!ye.item.staff_charge_record?(T(),he(v(J),{key:0,variant:"ghost",size:"sm",onClick:Ee=>U(ye.item),title:"Create Staff Charge",class:"p-1"},{default:D(()=>[b(v(LY),{class:"w-4 h-4 text-red-600"})]),_:1},8,["onClick"])):se("",!0),ye.item.staff_charge_record?(T(),he(v(J),{key:1,variant:"ghost",size:"sm",onClick:Ee=>ee(ye.item.staff_charge_record),title:"View Staff Charge",class:"p-1"},{default:D(()=>[b(v(vt),{class:"w-4 h-4 text-blue-600"})]),_:1},8,["onClick"])):se("",!0)])]),"empty-state":D(()=>[...B[45]||(B[45]=[u("div",{class:"text-center py-8 text-gray-500"}," No items found ",-1)])]),_:1},8,["rows","options"])]),a.value.notes?(T(),R("div",o4n,[B[46]||(B[46]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),u("div",{class:"prose max-w-none text-gray-600",innerHTML:a.value.notes},null,8,l4n)])):se("",!0)]),u("div",u4n,[u("div",d4n,[B[49]||(B[49]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Deadlines",-1)),u("div",c4n,[u("div",null,[B[47]||(B[47]=u("p",{class:"text-sm text-gray-500"},"Resolution Deadline",-1)),u("p",{class:pe(["font-medium",z(a.value.resolution_deadline)?"text-red-600":""])},[W($(N(a.value.resolution_deadline))+" ",1),z(a.value.resolution_deadline)?(T(),R("span",f4n,"OVERDUE")):se("",!0)],2)]),u("div",null,[B[48]||(B[48]=u("p",{class:"text-sm text-gray-500"},"Investigation Deadline",-1)),u("p",{class:pe(["font-medium",z(a.value.investigation_deadline)?"text-red-600":""])},$(N(a.value.investigation_deadline)),3)])])]),u("div",p4n,[B[54]||(B[54]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Stock Take Info",-1)),u("div",h4n,[u("div",m4n,[B[50]||(B[50]=u("span",{class:"text-gray-500"},"Stock Take Type",-1)),u("span",g4n,$(a.value.stock_take_type),1)]),u("div",v4n,[B[51]||(B[51]=u("span",{class:"text-gray-500"},"Warehouse",-1)),u("span",y4n,$(a.value.warehouse),1)]),u("div",b4n,[B[52]||(B[52]=u("span",{class:"text-gray-500"},"Branch",-1)),u("span",x4n,$(a.value.branch||"-"),1)]),u("div",_4n,[B[53]||(B[53]=u("span",{class:"text-gray-500"},"Audit Date",-1)),u("span",w4n,$(N(a.value.audit_date)),1)])])]),u("div",k4n,[B[60]||(B[60]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Approval Timeline",-1)),u("div",S4n,[a.value.status!=="Draft"?(T(),R("div",C4n,[u("div",A4n,[b(v(Fr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[B[55]||(B[55]=u("p",{class:"font-medium text-sm"},"Data Imported",-1)),u("p",T4n,$(q(a.value.import_date)),1),u("p",$4n,$(a.value.created_by),1)])])):se("",!0),a.value.physical_count_submitted_date?(T(),R("div",M4n,[u("div",E4n,[b(v(Fr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[B[56]||(B[56]=u("p",{class:"font-medium text-sm"},"Physical Count Submitted",-1)),u("p",D4n,$(q(a.value.physical_count_submitted_date)),1),u("p",R4n,$(a.value.physical_count_submitted_by),1)])])):se("",!0),a.value.analyst_review_date?(T(),R("div",P4n,[u("div",I4n,[b(v(Fr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[B[57]||(B[57]=u("p",{class:"font-medium text-sm"},"Analyst Reviewed",-1)),u("p",O4n,$(q(a.value.analyst_review_date)),1),u("p",L4n,$(a.value.stock_analyst),1)])])):se("",!0),a.value.hod_approval_date?(T(),R("div",V4n,[u("div",N4n,[b(v(Fr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[B[58]||(B[58]=u("p",{class:"font-medium text-sm"},"HOD Approved",-1)),u("p",j4n,$(q(a.value.hod_approval_date)),1),u("p",F4n,$(a.value.hod_approver),1)])])):se("",!0),a.value.final_report_date?(T(),R("div",B4n,[u("div",z4n,[b(v(Fr),{class:"w-4 h-4 text-green-600"})]),u("div",null,[B[59]||(B[59]=u("p",{class:"font-medium text-sm"},"Report Generated",-1)),u("p",U4n,$(q(a.value.final_report_date)),1)])])):se("",!0),a.value.status==="Draft"&&!a.value.physical_count_submitted_date&&!a.value.analyst_review_date&&!a.value.hod_approval_date?(T(),R("div",H4n," No actions yet ")):se("",!0)])])])])):se("",!0),b(v(jt),{modelValue:l.value,"onUpdate:modelValue":B[6]||(B[6]=ye=>l.value=ye),options:{title:"Create Staff Charge"}},{"body-content":D(()=>{var ye,Ee,Re,Ye;return[u("div",q4n,[u("div",null,[B[61]||(B[61]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Employee to Charge",-1)),b(v(ve),{type:"select",modelValue:f.value.employee,"onUpdate:modelValue":B[3]||(B[3]=Xe=>f.value.employee=Xe),options:c.value,placeholder:"Select employee"},null,8,["modelValue","options"])]),u("div",null,[B[62]||(B[62]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Charge Reason",-1)),b(v(ve),{type:"textarea",modelValue:f.value.reason,"onUpdate:modelValue":B[4]||(B[4]=Xe=>f.value.reason=Xe),placeholder:"Reason for the charge...",rows:3},null,8,["modelValue"])]),u("div",W4n,[u("p",G4n,[B[63]||(B[63]=u("strong",null,"Item:",-1)),W(" "+$((ye=d.value)==null?void 0:ye.item_code)+" - "+$((Ee=d.value)==null?void 0:Ee.item_description),1)]),u("p",Y4n,[B[64]||(B[64]=u("strong",null,"Variance:",-1)),W(" "+$((Re=d.value)==null?void 0:Re.variance_quantity)+" units",1)]),u("p",K4n,[B[65]||(B[65]=u("strong",null,"Charge Amount:",-1)),W(" "+$(V(Math.abs(((Ye=d.value)==null?void 0:Ye.variance_value)||0))),1)])])])]}),actions:D(()=>[b(v(J),{variant:"outline",onClick:B[5]||(B[5]=ye=>l.value=!1)},{default:D(()=>[...B[66]||(B[66]=[W(" Cancel ",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:G,loading:i.value},{default:D(()=>[...B[67]||(B[67]=[W(" Create Charge ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])])}}},Q4n={class:"p-6"},Z4n={class:"flex items-center justify-between mb-6"},J4n={class:"flex items-center gap-4"},eTn={class:"text-2xl font-bold text-gray-900"},tTn={class:"text-gray-500 mt-1"},nTn={class:"flex items-center gap-2"},rTn={class:"flex items-center gap-2"},sTn={class:"max-w-6xl"},iTn={class:"space-y-6"},aTn={class:"bg-white rounded-lg border p-6"},oTn={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},lTn={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},uTn={class:"text-sm text-gray-600 bg-yellow-50 p-2 rounded"},dTn={class:"text-sm text-gray-600 bg-blue-50 p-2 rounded"},cTn={class:"bg-white rounded-lg border p-6"},fTn={class:"flex items-center justify-between mb-4"},pTn={class:"flex items-center gap-2"},hTn={class:"flex items-center gap-2"},mTn={class:"flex items-center gap-2"},gTn={class:"flex items-center gap-2"},vTn={class:"bg-white rounded-lg border p-6"},yTn={class:"flex items-center justify-between mb-4"},bTn={class:"text-lg font-semibold text-gray-900"},xTn={class:"flex items-center gap-4 text-sm"},_Tn={class:"text-gray-500"},wTn={class:"text-yellow-600"},kTn={class:"text-gray-500"},STn={class:"text-green-600"},CTn={class:"text-gray-500"},ATn={class:"text-red-600"},TTn={class:"overflow-x-auto"},$Tn={class:"min-w-full divide-y divide-gray-200"},MTn={class:"bg-white divide-y divide-gray-200"},ETn={class:"px-3 py-3 text-sm text-gray-500"},DTn={class:"px-3 py-3"},RTn={class:"px-3 py-3"},PTn={class:"px-3 py-3 text-right"},ITn={class:"px-3 py-3 text-right"},OTn={class:"px-3 py-3 text-right"},LTn={class:"px-3 py-3 text-right"},VTn={class:"px-3 py-3 text-right"},NTn={class:"px-3 py-3"},jTn={class:"px-3 py-3"},FTn={class:"px-3 py-3"},BTn={class:"flex items-center gap-1"},zTn={class:"px-3 py-3"},UTn={key:0},HTn={class:"mt-4 pt-4 border-t bg-gray-50 -mx-6 -mb-6 px-6 py-4 rounded-b-lg"},qTn={class:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm"},WTn={class:"font-semibold ml-2"},GTn={class:"font-semibold ml-2"},YTn={class:"font-semibold ml-2"},KTn={class:"font-semibold ml-2 text-red-600"},XTn={class:"bg-white rounded-lg border p-6"},QTn={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},ZTn={class:"flex items-center gap-2"},JTn={class:"space-y-4"},e3n={key:0,class:"border rounded p-3"},t3n={class:"overflow-x-auto text-xs"},n3n={class:"min-w-full"},r3n={class:"bg-gray-100"},wW={__name:"StockTakeForm",setup(t){const e=ta(),n=_n(),r=Q(!1),s=Q([]),i=Q(!1),a=Q([]),o=Q([]),l=Q(""),d=Z(()=>e.params.id&&e.params.id!=="new"),c=Q({stock_take_type:"Daily Stock Take",audit_date:new Date().toISOString().split("T")[0],warehouse:"",branch:"",status:"Draft",stock_take_items:[],notes:""}),f=Z(()=>{if(!c.value.audit_date)return"";const ee=new Date(c.value.audit_date),ie={"Sales Return":0,"Daily Stock Take":0,"Weekly Stock Take":2,"Monthly Stock Take":5}[c.value.stock_take_type]||0;return ee.setDate(ee.getDate()+ie),ee.toISOString().split("T")[0]}),p=Z(()=>{if(!c.value.audit_date)return"";const ee=new Date(c.value.audit_date);return ee.setDate(ee.getDate()+3),ee.toISOString().split("T")[0]}),h=Z(()=>c.value.stock_take_items.reduce((ee,ie)=>ee+(ie.system_quantity||0),0)),m=Z(()=>c.value.stock_take_items.reduce((ee,ie)=>ee+(ie.physical_quantity||0),0)),g=Z(()=>c.value.stock_take_items.reduce((ee,ie)=>ee+(ie.variance_quantity||0),0)),y=Z(()=>c.value.stock_take_items.reduce((ee,ie)=>ee+Math.abs(ie.variance_value||0),0)),x=Z(()=>c.value.stock_take_items.filter(ee=>!ee.verification_status||ee.verification_status==="Pending").length),_=Z(()=>c.value.stock_take_items.filter(ee=>ee.verification_status==="Verified-Match").length),k=Z(()=>c.value.stock_take_items.filter(ee=>ee.verification_status==="Verified-Discrepancy").length);yt(()=>ue(this,null,function*(){yield w(),d.value&&(yield S())}));function w(){return ue(this,null,function*(){try{const ee=yield Ke("frappe.client.get_list",{doctype:"Warehouse Master",filters:{is_active:1},fields:["name","warehouse_code","warehouse_name","branch"],limit_page_length:0});s.value=ee.map(ie=>({label:`${ie.warehouse_code} - ${ie.warehouse_name}`,value:ie.name,branch:ie.branch}))}catch(ee){console.error("Error loading warehouses:",ee),s.value=[]}})}function S(){return ue(this,null,function*(){try{const ee=yield Ke("frappe.client.get",{doctype:"Stock Take Audit",name:e.params.id});c.value={stock_take_type:ee.stock_take_type||"Daily Stock Take",audit_date:ee.audit_date||"",warehouse:ee.warehouse||"",branch:ee.branch||"",status:ee.status||"Draft",stock_take_items:ee.stock_take_items||[],notes:ee.notes||""}}catch(ee){console.error("Error loading audit:",ee)}})}function C(){const ee=s.value.find(ie=>ie.value===c.value.warehouse);ee&&(c.value.branch=ee.branch)}function A(){c.value.stock_take_items.push({item_code:"",item_description:"",system_quantity:0,unit_value:0,physical_quantity:null,pending_dispatch:0,variance_quantity:0,variance_value:0,reason_provided:"",verification_status:"Pending",resolution_type:""})}function M(ee){c.value.stock_take_items.splice(ee,1)}function E(ee){const ie=c.value.stock_take_items[ee];ie.physical_quantity!==null&&ie.physical_quantity!==void 0&&(ie.variance_quantity=(ie.system_quantity||0)-(ie.physical_quantity||0)-(ie.pending_dispatch||0),ie.variance_value=ie.variance_quantity*(ie.unit_value||0),ie.variance_quantity===0?ie.verification_status="Verified-Match":ie.verification_status="Verified-Discrepancy")}function P(ee,ie){const ne=c.value.stock_take_items[ee];ne.physical_quantity=ne.system_quantity,ne.pending_dispatch=0,ne.variance_quantity=0,ne.variance_value=0,ne.verification_status="Verified-Match"}function I(ee){return ee.verification_status==="Verified-Match"?"bg-green-50":ee.verification_status==="Verified-Discrepancy"?"bg-red-50":""}function F(ee){switch(ee){case"Verified-Match":return"bg-green-100 text-green-800";case"Verified-Discrepancy":return"bg-red-100 text-red-800";case"Resolved":return"bg-blue-100 text-blue-800";default:return"bg-yellow-100 text-yellow-800"}}function L(ee){const ie=ee.target.files[0];if(!ie)return;const ne=new FileReader;ne.onload=ce=>{l.value=ce.target.result,z(l.value)},ne.readAsText(ie)}function z(ee){const ie=ee.split(`
`).filter(ne=>ne.trim());ie.length<2||(o.value=ie[0].split(",").map(ne=>ne.trim().replace(/"/g,"")),a.value=ie.slice(1).map(ne=>{const ce=ne.split(",").map(re=>re.trim().replace(/"/g,"")),oe={};return o.value.forEach((re,te)=>{oe[re]=ce[te]||""}),oe}))}function N(){const ne=[["Item Code","Description","System Qty","Item Value","Physical Qty","Pending Dispatch","Reason Provided"],...[["ITEM001","Sample Item 1","100","150.00","95","3","Items in transit"],["ITEM002","Sample Item 2","50","200.00","52","0",""],["ITEM003","Sample Item 3","75","75.50","70","2","Damaged goods"]]].map(te=>te.map(K=>`"${K}"`).join(",")).join(`
`),ce=new Blob([ne],{type:"text/csv;charset=utf-8;"}),oe=document.createElement("a"),re=URL.createObjectURL(ce);oe.setAttribute("href",re),oe.setAttribute("download","stock_take_template.csv"),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)}function q(){a.value.length!==0&&(a.value.forEach(ee=>{const ie={item_code:ee["Item Code"]||"",item_description:ee.Description||"",system_quantity:Number.parseFloat(ee["System Qty"])||0,unit_value:Number.parseFloat(ee["Item Value"])||0,physical_quantity:Number.parseFloat(ee["Physical Qty"])||null,pending_dispatch:Number.parseFloat(ee["Pending Dispatch"])||0,reason_provided:ee["Reason Provided"]||"",variance_quantity:0,variance_value:0,verification_status:"Pending",resolution_type:""};ie.physical_quantity!==null&&ie.physical_quantity!==void 0&&(ie.variance_quantity=(ie.system_quantity||0)-(ie.physical_quantity||0)-(ie.pending_dispatch||0),ie.variance_value=ie.variance_quantity*(ie.unit_value||0),ie.variance_quantity===0?ie.verification_status="Verified-Match":ie.verification_status="Verified-Discrepancy"),c.value.stock_take_items.push(ie)}),i.value=!1,a.value=[],o.value=[],l.value="")}function V(ee){return ee==null?"KES 0":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(ee)}function O(){return ue(this,null,function*(){if(!c.value.audit_date){alert("Stock take date is required");return}if(!c.value.warehouse){alert("Warehouse is required");return}r.value=!0;try{const ee={doctype:"Stock Take Audit",stock_take_type:c.value.stock_take_type,audit_date:c.value.audit_date,warehouse:c.value.warehouse,branch:c.value.branch,notes:c.value.notes,stock_take_items:c.value.stock_take_items.map(ie=>({item_code:ie.item_code,item_description:ie.item_description,system_quantity:ie.system_quantity,physical_quantity:ie.physical_quantity,unit_value:ie.unit_value,pending_dispatch:ie.pending_dispatch,variance_quantity:ie.variance_quantity,variance_value:ie.variance_value,reason_provided:ie.reason_provided,verification_status:ie.verification_status,resolution_type:ie.resolution_type}))};if(d.value)yield Ke("frappe.client.set_value",{doctype:"Stock Take Audit",name:e.params.id,fieldname:ee}),n.push(`/inventory-audit/stock-take/${e.params.id}`);else{const ie=yield Ke("frappe.client.insert",{doc:ee});n.push(`/inventory-audit/stock-take/${ie.name}`)}}catch(ee){console.error("Error saving audit:",ee),alert("Error saving stock take: "+ee.message)}finally{r.value=!1}})}function X(){d.value?n.push(`/inventory-audit/stock-take/${e.params.id}`):n.push("/inventory-audit/stock-take")}const j=[{label:"Sales Return",value:"Sales Return"},{label:"Daily Stock Take",value:"Daily Stock Take"},{label:"Weekly Stock Take",value:"Weekly Stock Take"},{label:"Monthly Stock Take",value:"Monthly Stock Take"}],U=[{label:"Draft",value:"Draft"},{label:"Physical Count Submitted",value:"Physical Count Submitted"},{label:"Analyst Reviewed",value:"Analyst Reviewed"},{label:"HOD Approved",value:"HOD Approved"},{label:"Under Investigation",value:"Under Investigation"}],G=[{label:"Select Resolution...",value:""},{label:"Stock Amendment",value:"Stock Amendment"},{label:"Charge Staff",value:"Charge Staff"},{label:"Write-off",value:"Write-off"},{label:"Under Investigation",value:"Under Investigation"}];return(ee,ie)=>(T(),R("div",Q4n,[u("div",Z4n,[u("div",J4n,[b(v(J),{variant:"ghost",onClick:X},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",eTn,$(d.value?"Edit Stock Take":"New Stock Take"),1),u("p",tTn,$(d.value?`Editing ${v(e).params.id}`:"Stock take for physical verification"),1)])]),u("div",nTn,[b(v(J),{variant:"outline",onClick:X},{default:D(()=>[...ie[8]||(ie[8]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:O,loading:r.value},{default:D(()=>[u("div",rTn,[b(v($r),{class:"w-4 h-4"}),u("span",null,$(d.value?"Save Changes":"Create Stock Take"),1)])]),_:1},8,["loading"])])]),u("div",sTn,[u("div",iTn,[u("div",aTn,[ie[17]||(ie[17]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Stock Take Information",-1)),u("div",oTn,[u("div",null,[ie[9]||(ie[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Stock Take Type "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:c.value.stock_take_type,"onUpdate:modelValue":ie[0]||(ie[0]=ne=>c.value.stock_take_type=ne),options:j,disabled:d.value},null,8,["modelValue","disabled"])]),u("div",null,[ie[10]||(ie[10]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Stock Take Date "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"date",modelValue:c.value.audit_date,"onUpdate:modelValue":ie[1]||(ie[1]=ne=>c.value.audit_date=ne)},null,8,["modelValue"])]),u("div",null,[ie[11]||(ie[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Warehouse "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:c.value.warehouse,"onUpdate:modelValue":ie[2]||(ie[2]=ne=>c.value.warehouse=ne),options:s.value,placeholder:"Select warehouse",onChange:C},null,8,["modelValue","options"])]),u("div",null,[ie[12]||(ie[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(v(ve),{type:"select",modelValue:c.value.status,"onUpdate:modelValue":ie[3]||(ie[3]=ne=>c.value.status=ne),options:U,disabled:!0},null,8,["modelValue"])])]),u("div",lTn,[u("div",null,[ie[14]||(ie[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Deadline",-1)),u("div",uTn,[W($(f.value||"Deadline based on stock take type")+" ",1),ie[13]||(ie[13]=u("span",{class:"text-yellow-700 ml-2"},"(Resolution required)",-1))])]),u("div",null,[ie[16]||(ie[16]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Investigation Deadline",-1)),u("div",dTn,[W($(p.value||"3 days from stock take date")+" ",1),ie[15]||(ie[15]=u("span",{class:"text-blue-700 ml-2"},"(For items under investigation)",-1))])])])]),u("div",cTn,[u("div",fTn,[ie[21]||(ie[21]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Import Stock Items",-1)),u("div",pTn,[b(v(J),{variant:"outline",size:"sm",onClick:N},{default:D(()=>[u("div",hTn,[b(v(xn),{class:"w-4 h-4"}),ie[18]||(ie[18]=u("span",null,"Download Template",-1))])]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:ie[4]||(ie[4]=ne=>i.value=!0)},{default:D(()=>[u("div",mTn,[b(v(xa),{class:"w-4 h-4"}),ie[19]||(ie[19]=u("span",null,"Import from CSV",-1))])]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:A},{default:D(()=>[u("div",gTn,[b(v(nt),{class:"w-4 h-4"}),ie[20]||(ie[20]=u("span",null,"Add Item Manually",-1))])]),_:1})])]),ie[22]||(ie[22]=u("div",{class:"text-sm text-gray-500 mb-4"}," Import stock items from Business Central CSV export. Download the template to see the required format. Expected columns: Item Code, Description, System Qty, Item Value, Physical Qty, Pending Dispatch, Reason Provided ",-1))]),u("div",vTn,[u("div",yTn,[u("h3",bTn,"Stock Take Items ("+$(c.value.stock_take_items.length)+")",1),u("div",xTn,[u("span",_Tn,[ie[23]||(ie[23]=W("Pending: ",-1)),u("strong",wTn,$(x.value),1)]),u("span",kTn,[ie[24]||(ie[24]=W("Verified: ",-1)),u("strong",STn,$(_.value),1)]),u("span",CTn,[ie[25]||(ie[25]=W("Discrepancy: ",-1)),u("strong",ATn,$(k.value),1)])])]),u("div",TTn,[u("table",$Tn,[ie[27]||(ie[27]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"#"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Item Code"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"System Qty"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Item Value"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Physical Qty"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Pending Dispatch"),u("th",{class:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Variance"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Reason Provided"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Proposed Resolution"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Action"),u("th",{class:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status")])],-1)),u("tbody",MTn,[(T(!0),R(xe,null,_e(c.value.stock_take_items,(ne,ce)=>(T(),R("tr",{key:ce,class:pe([I(ne),"hover:bg-gray-50"])},[u("td",ETn,$(ce+1),1),u("td",DTn,[b(v(ve),{type:"text",modelValue:ne.item_code,"onUpdate:modelValue":oe=>ne.item_code=oe,placeholder:"Item code",class:"w-32"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",RTn,[b(v(ve),{type:"text",modelValue:ne.item_description,"onUpdate:modelValue":oe=>ne.item_description=oe,placeholder:"Description",class:"w-48"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",PTn,[b(v(ve),{type:"number",modelValue:ne.system_quantity,"onUpdate:modelValue":oe=>ne.system_quantity=oe,placeholder:"0",class:"w-20 text-right",disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),u("td",ITn,[b(v(ve),{type:"number",modelValue:ne.unit_value,"onUpdate:modelValue":oe=>ne.unit_value=oe,placeholder:"0.00",class:"w-20 text-right",step:"0.01"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",OTn,[b(v(ve),{type:"number",modelValue:ne.physical_quantity,"onUpdate:modelValue":oe=>ne.physical_quantity=oe,placeholder:"Count",class:"w-20 text-right",onChange:oe=>E(ce)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),u("td",LTn,[b(v(ve),{type:"number",modelValue:ne.pending_dispatch,"onUpdate:modelValue":oe=>ne.pending_dispatch=oe,placeholder:"0",class:"w-20 text-right",onChange:oe=>E(ce)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),u("td",VTn,[u("span",{class:pe(ne.variance_quantity!==0?"text-red-600 font-medium":"text-green-600")},$(ne.variance_quantity||0),3)]),u("td",NTn,[b(v(ve),{type:"text",modelValue:ne.reason_provided,"onUpdate:modelValue":oe=>ne.reason_provided=oe,placeholder:"Reason for variance",class:"w-40"},null,8,["modelValue","onUpdate:modelValue"])]),u("td",jTn,[b(v(ve),{type:"select",modelValue:ne.resolution_type,"onUpdate:modelValue":oe=>ne.resolution_type=oe,options:G,class:"w-36",disabled:ne.verification_status!=="Verified-Discrepancy"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),u("td",FTn,[u("div",BTn,[!ne.physical_quantity&&ne.physical_quantity!==0?(T(),he(v(J),{key:0,variant:"ghost",size:"sm",onClick:oe=>P(ce),title:"Mark as Match (Physical = System)"},{default:D(()=>[b(v(Fr),{class:"w-4 h-4 text-green-600"})]),_:1},8,["onClick"])):se("",!0),b(v(J),{variant:"ghost",size:"sm",onClick:oe=>M(ce),title:"Remove"},{default:D(()=>[b(v(is),{class:"w-4 h-4 text-red-600"})]),_:1},8,["onClick"])])]),u("td",zTn,[u("span",{class:pe([F(ne.verification_status),"px-2 py-1 text-xs rounded-full"])},$(ne.verification_status||"Pending"),3)])],2))),128)),c.value.stock_take_items.length===0?(T(),R("tr",UTn,[...ie[26]||(ie[26]=[u("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"}," No stock take items. Import from CSV or add items manually. ",-1)])])):se("",!0)])])]),u("div",HTn,[u("div",qTn,[u("div",null,[ie[28]||(ie[28]=u("span",{class:"text-gray-500"},"Total Items:",-1)),u("span",WTn,$(c.value.stock_take_items.length),1)]),u("div",null,[ie[29]||(ie[29]=u("span",{class:"text-gray-500"},"System Qty:",-1)),u("span",GTn,$(h.value),1)]),u("div",null,[ie[30]||(ie[30]=u("span",{class:"text-gray-500"},"Physical Qty:",-1)),u("span",YTn,$(m.value),1)]),u("div",null,[ie[31]||(ie[31]=u("span",{class:"text-gray-500"},"Total Variance:",-1)),u("span",{class:pe(["font-semibold ml-2",g.value!==0?"text-red-600":"text-green-600"])},$(g.value),3)]),u("div",null,[ie[32]||(ie[32]=u("span",{class:"text-gray-500"},"Variance Value:",-1)),u("span",KTn,$(V(y.value)),1)])])])]),u("div",XTn,[ie[33]||(ie[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),b(v(ve),{type:"textarea",modelValue:c.value.notes,"onUpdate:modelValue":ie[5]||(ie[5]=ne=>c.value.notes=ne),placeholder:"Additional notes or observations from the stock take...",rows:4},null,8,["modelValue"])])]),u("div",QTn,[b(v(J),{variant:"outline",onClick:X},{default:D(()=>[...ie[34]||(ie[34]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:O,loading:r.value},{default:D(()=>[u("div",ZTn,[b(v($r),{class:"w-4 h-4"}),u("span",null,$(d.value?"Save Changes":"Create Stock Take"),1)])]),_:1},8,["loading"])])]),b(v(jt),{modelValue:i.value,"onUpdate:modelValue":ie[7]||(ie[7]=ne=>i.value=ne),options:{title:"Import Stock Items from CSV"}},{"body-content":D(()=>[u("div",JTn,[u("div",null,[ie[35]||(ie[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Upload CSV File",-1)),u("input",{type:"file",accept:".csv",onChange:L,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),ie[37]||(ie[37]=u("div",{class:"text-sm text-gray-500 bg-gray-50 p-3 rounded"},[u("p",{class:"font-medium mb-1"},"Expected CSV columns:"),u("p",null,"Item Code, Description, System Qty, Item Value, Physical Qty, Pending Dispatch, Reason Provided")],-1)),a.value.length>0?(T(),R("div",e3n,[ie[36]||(ie[36]=u("p",{class:"text-sm font-medium mb-2"},"Preview (first 5 rows):",-1)),u("div",t3n,[u("table",n3n,[u("thead",null,[u("tr",r3n,[(T(!0),R(xe,null,_e(o.value,ne=>(T(),R("th",{key:ne,class:"px-2 py-1 text-left"},$(ne),1))),128))])]),u("tbody",null,[(T(!0),R(xe,null,_e(a.value.slice(0,5),(ne,ce)=>(T(),R("tr",{key:ce},[(T(!0),R(xe,null,_e(ne,(oe,re)=>(T(),R("td",{key:re,class:"px-2 py-1 border-t"},$(oe),1))),128))]))),128))])])])])):se("",!0)])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:ie[6]||(ie[6]=ne=>i.value=!1)},{default:D(()=>[...ie[38]||(ie[38]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:q,disabled:a.value.length===0},{default:D(()=>[W(" Import "+$(a.value.length)+" Items ",1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]))}},s3n={class:"min-h-screen bg-gray-50"},i3n={class:"bg-white border-b border-gray-200 px-6 py-4"},a3n={class:"flex justify-between items-center"},o3n={class:"flex gap-3"},l3n={class:"flex items-center gap-2"},u3n={class:"flex items-center gap-2"},d3n={key:0},c3n={class:"flex items-center gap-2"},f3n={class:"p-6 space-y-6"},p3n={class:"bg-white rounded-lg border border-gray-200 shadow-sm"},h3n={class:"p-6"},m3n={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},g3n=["value"],v3n={class:"flex items-end"},y3n={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer"},b3n={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},x3n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},_3n={class:"flex items-center justify-between"},w3n={class:"text-3xl font-bold text-gray-900 mt-1"},k3n={class:"bg-blue-100 p-3 rounded-full"},S3n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},C3n={class:"flex items-center justify-between"},A3n={class:"text-3xl font-bold text-yellow-600 mt-1"},T3n={class:"bg-yellow-100 p-3 rounded-full"},$3n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},M3n={class:"flex items-center justify-between"},E3n={class:"text-3xl font-bold text-red-600 mt-1"},D3n={class:"bg-red-100 p-3 rounded-full"},R3n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},P3n={class:"flex items-center justify-between"},I3n={class:"text-3xl font-bold text-orange-600 mt-1"},O3n={class:"bg-orange-100 p-3 rounded-full"},L3n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},V3n={class:"flex items-center justify-between"},N3n={class:"text-3xl font-bold text-green-600 mt-1"},j3n={class:"bg-green-100 p-3 rounded-full"},F3n={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"},B3n={class:"flex items-center justify-between"},z3n={class:"text-3xl font-bold text-red-600 mt-1"},U3n={class:"bg-red-100 p-3 rounded-full"},H3n={class:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden"},q3n={key:0,class:"p-12 text-center"},W3n={key:1,class:"divide-y divide-gray-200"},G3n=["onClick"],Y3n={class:"flex items-start justify-between"},K3n={class:"flex-1"},X3n={class:"flex items-center gap-3 mb-2"},Q3n={class:"font-medium text-gray-900"},Z3n={class:"flex items-center gap-6 text-sm text-gray-500"},J3n={class:"flex items-center gap-1"},e5n={key:0,class:"flex items-center gap-1"},t5n={class:"flex items-center gap-1"},n5n={class:"flex items-center gap-6 mt-3 text-sm"},r5n={class:"text-gray-700"},s5n={class:"text-yellow-600"},i5n={class:"text-green-600"},a5n={class:"text-red-600"},o5n={class:"text-blue-600"},l5n={class:"flex items-center gap-2 mt-3"},u5n={class:"text-right"},d5n={class:"text-xs text-gray-400 mt-1"},c5n={key:2,class:"p-16 text-center"},f5n={class:"bg-gray-100 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center"},p5n={class:"flex gap-4 justify-center"},h5n={class:"flex items-center gap-2"},m5n={class:"flex items-center gap-2"},g5n={key:3,class:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between"},v5n={class:"text-sm text-gray-700 font-medium"},y5n={class:"font-semibold"},b5n={class:"font-semibold"},x5n={class:"font-semibold"},_5n={class:"flex gap-3"},w5n={class:"space-y-4"},k5n=["value"],S5n={key:0,class:"border rounded p-3"},C5n={class:"text-sm font-medium mb-2"},A5n={class:"max-h-40 overflow-y-auto text-xs"},T5n={key:0,class:"py-1 text-gray-500"},$5n={__name:"StockTakeList",setup(t){const e=_n(),n=tu(),r=Q(!1),s=Q(!1),i=Q(!1),a=Q(!1),o=Q([]),l=Q([]),d=Q(0),c=Q(1),f=Q(20),p=Q({stock_take_type:"",status:"",warehouse:"",date_from:"",date_to:""}),h=Q({stock_take_type:"Daily Stock Take",warehouse:"",audit_date:new Date().toISOString().split("T")[0]}),m=Q([]),g=Q(""),y=Z(()=>Math.ceil(d.value/f.value)),x=Z(()=>o.value.filter(j=>["Draft","Physical Count Submitted"].includes(j.status)).length),_=Z(()=>o.value.filter(j=>(j.items_verified_discrepancy||0)>0).length),k=Z(()=>o.value.filter(j=>j.status==="Under Investigation").length),w=Z(()=>o.value.filter(j=>j.status==="HOD Approved").length),S=Z(()=>o.value.reduce((j,U)=>j+Math.abs(U.total_variance_value||0),0));yt(()=>ue(this,null,function*(){yield Promise.all([A(),C()])}));function C(){return ue(this,null,function*(){try{const j=yield Ke("frappe.client.get_list",{doctype:"Warehouse Master",filters:{is_active:1},fields:["name","warehouse_code","warehouse_name"],limit_page_length:0});l.value=j}catch(j){console.error("Error loading warehouses:",j)}})}function A(){return ue(this,null,function*(){r.value=!0;try{const j={};p.value.stock_take_type&&(j.stock_take_type=p.value.stock_take_type),p.value.status&&(j.status=p.value.status),p.value.warehouse&&(j.warehouse=p.value.warehouse),p.value.date_from&&(j.audit_date=[">=",p.value.date_from]),p.value.date_to&&(j.audit_date?j.audit_date=["between",[p.value.date_from,p.value.date_to]]:j.audit_date=["<=",p.value.date_to]),i.value&&(j.resolution_deadline=["<",new Date().toISOString().split("T")[0]],j.status=["not in",["Resolved","Closed"]]),yield n.loadStockTakeAudits(j,c.value,f.value),o.value=n.returnAudits,d.value=n.returnAuditsTotalCount}catch(j){console.error("Error loading stock takes:",j)}finally{r.value=!1}})}function M(){return ue(this,null,function*(){p.value={stock_take_type:"",status:"",warehouse:"",date_from:"",date_to:""},i.value=!1,c.value=1,yield A()})}function E(j){return ue(this,null,function*(){c.value=j,yield A()})}function P(){e.push("/inventory-audit/stock-take/new")}function I(j){e.push(`/inventory-audit/stock-take/${j}`)}function F(j){return!j.resolution_deadline||["HOD Approved","Under Investigation"].includes(j.status)?!1:new Date(j.resolution_deadline)<new Date}function L(j){return{"Sales Return":"orange","Daily Stock Take":"blue","Weekly Stock Take":"purple","Monthly Stock Take":"green"}[j]||"gray"}function z(j){return{Draft:"subtle","Physical Count Submitted":"yellow","Analyst Reviewed":"blue","HOD Approved":"green","Under Investigation":"red"}[j]||"gray"}function N(j){return j?new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function q(j){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(j||0)}function V(j){const U=j.target.files[0];if(!U)return;const G=new FileReader;G.onload=ee=>{g.value=ee.target.result,O(g.value)},G.readAsText(U)}function O(j){const U=j.split(`
`).filter(ee=>ee.trim());if(U.length<2)return;const G=U[0].split(",").map(ee=>ee.trim().replace(/"/g,""));m.value=U.slice(1).map(ee=>{const ie=ee.split(",").map(ce=>ce.trim().replace(/"/g,"")),ne={};return G.forEach((ce,oe)=>{ne[ce]=ie[oe]||""}),ne})}function X(){return ue(this,null,function*(){if(!h.value.warehouse){alert("Please select a warehouse");return}s.value=!0;try{const j=yield Ke("mkaguzi.inventory_audit.doctype.stock_take_audit.stock_take_audit.import_stock_take_from_csv",{file_content:g.value,warehouse:h.value.warehouse,stock_take_type:h.value.stock_take_type,audit_date:h.value.audit_date});alert(`Successfully created ${j.audits.length} stock take(s)`),a.value=!1,m.value=[],g.value="",yield A()}catch(j){console.error("Import error:",j),alert("Import failed: "+j.message)}finally{s.value=!1}})}return(j,U)=>(T(),R("div",s3n,[u("div",i3n,[u("div",a3n,[U[17]||(U[17]=u("div",null,[u("h1",{class:"text-3xl font-bold text-gray-900"},"Stock Take Management"),u("p",{class:"text-gray-600 mt-1"},"Comprehensive physical verification of stock items across all warehouses")],-1)),u("div",o3n,[b(v(J),{variant:"solid",size:"sm",onClick:U[0]||(U[0]=G=>a.value=!0),class:"bg-blue-600 hover:bg-blue-700 shadow-sm"},{default:D(()=>[u("div",l3n,[b(v(xa),{class:"w-4 h-4"}),U[15]||(U[15]=u("span",null,"Import CSV",-1))])]),_:1}),b(v(J),{variant:"solid",size:"sm",onClick:M,loading:r.value,class:"bg-gray-600 hover:bg-gray-700 shadow-sm"},{default:D(()=>[u("div",u3n,[b(v(mn),{class:"w-4 h-4"}),r.value?se("",!0):(T(),R("span",d3n,"Refresh"))])]),_:1},8,["loading"]),b(v(J),{variant:"solid",size:"sm",onClick:P,class:"bg-green-600 hover:bg-green-700 shadow-sm"},{default:D(()=>[u("div",c3n,[b(v(nt),{class:"w-4 h-4"}),U[16]||(U[16]=u("span",null,"New Stock Take",-1))])]),_:1})])])]),u("div",f3n,[u("div",p3n,[U[27]||(U[27]=u("div",{class:"px-6 py-4 border-b border-gray-200"},[u("h3",{class:"text-lg font-semibold text-gray-900"},"Filters & Search"),u("p",{class:"text-sm text-gray-600 mt-1"},"Filter stock takes by type, status, warehouse, and date range")],-1)),u("div",h3n,[u("div",m3n,[u("div",null,[U[19]||(U[19]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Stock Take Type",-1)),we(u("select",{"onUpdate:modelValue":U[1]||(U[1]=G=>p.value.stock_take_type=G),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},[...U[18]||(U[18]=[fr('<option value="">All Types</option><option value="Sales Return">Sales Return</option><option value="Daily Stock Take">Daily Stock Take</option><option value="Weekly Stock Take">Weekly Stock Take</option><option value="Monthly Stock Take">Monthly Stock Take</option>',5)])],544),[[vn,p.value.stock_take_type]])]),u("div",null,[U[21]||(U[21]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Status",-1)),we(u("select",{"onUpdate:modelValue":U[2]||(U[2]=G=>p.value.status=G),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},[...U[20]||(U[20]=[fr('<option value="">All Statuses</option><option value="Draft">Draft</option><option value="Physical Count Submitted">Physical Count Submitted</option><option value="Analyst Reviewed">Analyst Reviewed</option><option value="HOD Approved">HOD Approved</option><option value="Under Investigation">Under Investigation</option>',6)])],544),[[vn,p.value.status]])]),u("div",null,[U[23]||(U[23]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Warehouse",-1)),we(u("select",{"onUpdate:modelValue":U[3]||(U[3]=G=>p.value.warehouse=G),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},[U[22]||(U[22]=u("option",{value:""},"All Warehouses",-1)),(T(!0),R(xe,null,_e(l.value,G=>(T(),R("option",{key:G.name,value:G.name},$(G.warehouse_code)+" - "+$(G.warehouse_name),9,g3n))),128))],544),[[vn,p.value.warehouse]])]),u("div",null,[U[24]||(U[24]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Date From",-1)),we(u("input",{"onUpdate:modelValue":U[4]||(U[4]=G=>p.value.date_from=G),type:"date",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},null,544),[[Rt,p.value.date_from]])]),u("div",null,[U[25]||(U[25]=u("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Date To",-1)),we(u("input",{"onUpdate:modelValue":U[5]||(U[5]=G=>p.value.date_to=G),type:"date",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors",onChange:A},null,544),[[Rt,p.value.date_to]])]),u("div",v3n,[u("label",y3n,[we(u("input",{type:"checkbox","onUpdate:modelValue":U[6]||(U[6]=G=>i.value=G),onChange:A,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,544),[[Rn,i.value]]),U[26]||(U[26]=u("div",null,[u("span",{class:"text-sm font-medium text-gray-700"},"Overdue Only"),u("p",{class:"text-xs text-gray-500"},"Show only overdue stock takes")],-1))])])])])]),u("div",b3n,[u("div",x3n,[u("div",_3n,[u("div",null,[U[28]||(U[28]=u("p",{class:"text-sm font-medium text-gray-600"},"Total Stock Takes",-1)),u("p",w3n,$(d.value),1)]),u("div",k3n,[b(v(Ar),{class:"w-6 h-6 text-blue-600"})])])]),u("div",S3n,[u("div",C3n,[u("div",null,[U[29]||(U[29]=u("p",{class:"text-sm font-medium text-gray-600"},"Pending Count",-1)),u("p",A3n,$(x.value),1)]),u("div",T3n,[b(v(rn),{class:"w-6 h-6 text-yellow-600"})])])]),u("div",$3n,[u("div",M3n,[u("div",null,[U[30]||(U[30]=u("p",{class:"text-sm font-medium text-gray-600"},"With Discrepancy",-1)),u("p",E3n,$(_.value),1)]),u("div",D3n,[b(v(rn),{class:"w-6 h-6 text-red-600"})])])]),u("div",R3n,[u("div",P3n,[u("div",null,[U[31]||(U[31]=u("p",{class:"text-sm font-medium text-gray-600"},"Under Investigation",-1)),u("p",I3n,$(k.value),1)]),u("div",O3n,[b(v(rn),{class:"w-6 h-6 text-orange-600"})])])]),u("div",L3n,[u("div",V3n,[u("div",null,[U[32]||(U[32]=u("p",{class:"text-sm font-medium text-gray-600"},"Resolved",-1)),u("p",N3n,$(w.value),1)]),u("div",j3n,[b(v(Kt),{class:"w-6 h-6 text-green-600"})])])]),u("div",F3n,[u("div",B3n,[u("div",null,[U[33]||(U[33]=u("p",{class:"text-sm font-medium text-gray-600"},"Total Variance",-1)),u("p",z3n,$(q(S.value)),1)]),u("div",U3n,[b(v(rn),{class:"w-6 h-6 text-red-600"})])])])]),u("div",H3n,[U[52]||(U[52]=u("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[u("h3",{class:"text-lg font-semibold text-gray-900"},"Stock Take Records"),u("p",{class:"text-sm text-gray-600 mt-1"},"Click on any record to view details and manage the stock take process")],-1)),r.value?(T(),R("div",q3n,[...U[34]||(U[34]=[u("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),u("p",{class:"text-gray-500 mt-4 text-lg"},"Loading stock takes...",-1)])])):o.value.length>0?(T(),R("div",W3n,[(T(!0),R(xe,null,_e(o.value,G=>(T(),R("div",{key:G.name,class:"p-6 hover:bg-blue-50 cursor-pointer transition-all duration-200 hover:shadow-sm border-l-4 hover:border-l-blue-500",onClick:ee=>I(G.name)},[u("div",Y3n,[u("div",K3n,[u("div",X3n,[u("h4",Q3n,$(G.name),1),b(v(De),{variant:L(G.stock_take_type)},{default:D(()=>[W($(G.stock_take_type),1)]),_:2},1032,["variant"]),b(v(De),{variant:z(G.status)},{default:D(()=>[W($(G.status),1)]),_:2},1032,["variant"]),F(G)?(T(),he(v(De),{key:0,variant:"red"},{default:D(()=>[b(v(rn),{class:"w-3 h-3 mr-1"}),U[35]||(U[35]=W(" Overdue ",-1))]),_:1})):se("",!0)]),u("div",Z3n,[u("span",J3n,[b(v(Ufe),{class:"w-4 h-4"}),W(" "+$(G.warehouse),1)]),G.branch?(T(),R("span",e5n,[b(v(ob),{class:"w-4 h-4"}),W(" "+$(G.branch),1)])):se("",!0),u("span",t5n,[b(v(rr),{class:"w-4 h-4"}),W(" "+$(N(G.audit_date)),1)])]),u("div",n5n,[u("span",r5n,[U[36]||(U[36]=W(" Total Items: ",-1)),u("strong",null,$(G.total_items||0),1)]),u("span",s5n,[U[37]||(U[37]=W(" Pending: ",-1)),u("strong",null,$(G.items_pending||0),1)]),u("span",i5n,[U[38]||(U[38]=W(" Match: ",-1)),u("strong",null,$(G.items_verified_match||0),1)]),u("span",a5n,[U[39]||(U[39]=W(" Discrepancy: ",-1)),u("strong",null,$(G.items_verified_discrepancy||0),1)]),u("span",o5n,[U[40]||(U[40]=W(" Resolved: ",-1)),u("strong",null,$(G.items_resolved||0),1)])]),u("div",l5n,[u("span",{class:pe(["text-xs px-2 py-1 rounded-full",G.analyst_verified?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},$(G.analyst_verified?"":"")+" Analyst ",3),u("span",{class:pe(["text-xs px-2 py-1 rounded-full",G.taker_verified?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},$(G.taker_verified?"":"")+" Stock Taker ",3),u("span",{class:pe(["text-xs px-2 py-1 rounded-full",G.manager_confirmed?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},$(G.manager_confirmed?"":"")+" Manager ",3),u("span",{class:pe(["text-xs px-2 py-1 rounded-full",G.hod_approved?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},$(G.hod_approved?"":"")+" HOD ",3)])]),u("div",u5n,[U[41]||(U[41]=u("p",{class:"text-sm text-gray-500"},"Variance Value",-1)),u("p",{class:pe(["text-xl font-bold",(G.total_variance_value||0)>0?"text-red-600":"text-green-600"])},$(q(G.total_variance_value||0)),3),u("p",d5n," Deadline: "+$(N(G.resolution_deadline)),1)])])],8,G3n))),128))])):(T(),R("div",c5n,[u("div",f5n,[b(v(Ar),{class:"w-12 h-12 text-gray-400"})]),U[44]||(U[44]=u("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"No Stock Takes Found",-1)),U[45]||(U[45]=u("p",{class:"text-gray-600 mb-8 max-w-md mx-auto"},"Get started by importing stock data from CSV or creating a new stock take record to begin the physical verification process.",-1)),u("div",p5n,[b(v(J),{variant:"solid",size:"sm",onClick:U[7]||(U[7]=G=>a.value=!0),class:"bg-blue-600 hover:bg-blue-700 shadow-sm px-6 py-3"},{default:D(()=>[u("div",h5n,[b(v(xa),{class:"w-5 h-5"}),U[42]||(U[42]=u("span",null,"Import CSV",-1))])]),_:1}),b(v(J),{variant:"solid",size:"sm",onClick:P,class:"bg-green-600 hover:bg-green-700 shadow-sm px-6 py-3"},{default:D(()=>[u("div",m5n,[b(v(nt),{class:"w-5 h-5"}),U[43]||(U[43]=u("span",null,"New Stock Take",-1))])]),_:1})])])),y.value>1?(T(),R("div",g5n,[u("p",v5n,[U[46]||(U[46]=W(" Showing ",-1)),u("span",y5n,$((c.value-1)*f.value+1),1),U[47]||(U[47]=W(" - ",-1)),u("span",b5n,$(Math.min(c.value*f.value,d.value)),1),U[48]||(U[48]=W(" of ",-1)),u("span",x5n,$(d.value),1),U[49]||(U[49]=W(" stock takes ",-1))]),u("div",_5n,[b(v(J),{variant:"solid",size:"sm",disabled:c.value===1,onClick:U[8]||(U[8]=G=>E(c.value-1)),class:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-sm px-4 py-2"},{default:D(()=>[...U[50]||(U[50]=[u("span",null,"Previous",-1)])]),_:1},8,["disabled"]),b(v(J),{variant:"solid",size:"sm",disabled:c.value===y.value,onClick:U[9]||(U[9]=G=>E(c.value+1)),class:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-sm px-4 py-2"},{default:D(()=>[...U[51]||(U[51]=[u("span",null,"Next",-1)])]),_:1},8,["disabled"])])])):se("",!0)]),b(v(jt),{modelValue:a.value,"onUpdate:modelValue":U[14]||(U[14]=G=>a.value=G),options:{title:"Import Stock Take from CSV"}},{"body-content":D(()=>[u("div",w5n,[u("div",null,[U[54]||(U[54]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Stock Take Type "),u("span",{class:"text-red-500"},"*")],-1)),we(u("select",{"onUpdate:modelValue":U[10]||(U[10]=G=>h.value.stock_take_type=G),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...U[53]||(U[53]=[u("option",{value:"Daily Stock Take"},"Daily Stock Take",-1),u("option",{value:"Weekly Stock Take"},"Weekly Stock Take",-1),u("option",{value:"Monthly Stock Take"},"Monthly Stock Take",-1),u("option",{value:"Sales Return"},"Sales Return",-1)])],512),[[vn,h.value.stock_take_type]])]),u("div",null,[U[56]||(U[56]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Warehouse "),u("span",{class:"text-red-500"},"*")],-1)),we(u("select",{"onUpdate:modelValue":U[11]||(U[11]=G=>h.value.warehouse=G),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[U[55]||(U[55]=u("option",{value:""},"Select Warehouse",-1)),(T(!0),R(xe,null,_e(l.value,G=>(T(),R("option",{key:G.name,value:G.name},$(G.warehouse_code)+" - "+$(G.warehouse_name),9,k5n))),128))],512),[[vn,h.value.warehouse]])]),u("div",null,[U[57]||(U[57]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock Take Date",-1)),we(u("input",{"onUpdate:modelValue":U[12]||(U[12]=G=>h.value.audit_date=G),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[Rt,h.value.audit_date]])]),u("div",null,[U[58]||(U[58]=u("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Upload CSV File",-1)),u("input",{type:"file",accept:".csv",onChange:V,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),U[59]||(U[59]=u("div",{class:"text-sm text-gray-500 bg-gray-50 p-3 rounded"},[u("p",{class:"font-medium mb-1"},"Expected CSV columns:"),u("p",null,"Item Code, Description, System Qty, Value, Warehouse, Date")],-1)),m.value.length>0?(T(),R("div",S5n,[u("p",C5n,"Preview ("+$(m.value.length)+" items):",1),u("div",A5n,[(T(!0),R(xe,null,_e(m.value.slice(0,5),(G,ee)=>(T(),R("div",{key:ee,class:"py-1 border-b"},$(G["Item Code"])+" - "+$(G.Description)+" (Qty: "+$(G["System Qty"]||G["Return Qty"])+") ",1))),128)),m.value.length>5?(T(),R("div",T5n," ... and "+$(m.value.length-5)+" more items ",1)):se("",!0)])])):se("",!0)])]),actions:D(()=>[b(v(J),{variant:"solid",size:"sm",onClick:U[13]||(U[13]=G=>a.value=!1),class:"bg-gray-600 hover:bg-gray-700"},{default:D(()=>[...U[60]||(U[60]=[u("span",null,"Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",size:"sm",onClick:X,disabled:!h.value.warehouse||m.value.length===0,loading:s.value,class:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400"},{default:D(()=>[u("span",null,"Import "+$(m.value.length)+" Items",1)]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])])]))}},M5n={class:"p-6"},E5n={class:"flex items-center justify-between mb-6"},D5n={class:"flex items-center gap-4"},R5n={class:"text-2xl font-bold text-gray-900"},P5n={class:"flex items-center gap-2"},I5n={key:0,class:"flex items-center justify-center py-20"},O5n={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},L5n={class:"lg:col-span-2 space-y-6"},V5n={class:"bg-white rounded-lg border p-6"},N5n={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},j5n={class:"font-medium"},F5n={class:"font-medium"},B5n={class:"font-medium"},z5n={class:"font-medium"},U5n={class:"font-medium"},H5n={class:"font-medium"},q5n={class:"font-medium"},W5n={class:"font-medium text-green-600"},G5n={key:0,class:"bg-white rounded-lg border p-6"},Y5n={class:"flex items-center justify-between"},K5n={class:"flex items-center gap-3"},X5n={class:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center"},Q5n={class:"font-medium"},Z5n={class:"bg-white rounded-lg border p-6"},J5n={key:1,class:"bg-white rounded-lg border p-6"},e$n={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},t$n={class:"p-4 bg-yellow-50 rounded-lg border border-yellow-200"},n$n={class:"flex items-center gap-2 mb-2"},r$n={class:"text-2xl font-bold text-yellow-700"},s$n={class:"p-4 bg-red-50 rounded-lg border border-red-200"},i$n={class:"flex items-center gap-2 mb-2"},a$n={class:"text-2xl font-bold text-red-700"},o$n={class:"p-4 bg-green-50 rounded-lg border border-green-200"},l$n={class:"flex items-center gap-2 mb-2"},u$n={class:"text-2xl font-bold text-green-700"},d$n={class:"p-4 bg-purple-50 rounded-lg border border-purple-200"},c$n={class:"flex items-center gap-2 mb-2"},f$n={class:"text-2xl font-bold text-purple-700"},p$n={key:0,class:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg"},h$n={class:"flex items-start gap-3"},m$n={class:"font-medium text-red-800"},g$n={class:"bg-white rounded-lg border p-6"},v$n={class:"space-y-6"},y$n={class:"bg-white rounded-lg border p-6"},b$n={class:"space-y-4"},x$n={class:"flex items-center justify-between"},_$n={class:"font-medium"},w$n={class:"w-full bg-gray-200 rounded-full h-2"},k$n={class:"pt-2 space-y-3"},S$n={class:"flex items-center justify-between"},C$n={class:"font-medium text-yellow-600"},A$n={class:"flex items-center justify-between"},T$n={class:"font-medium text-green-600"},$$n={class:"bg-white rounded-lg border p-6"},M$n={class:"space-y-4"},E$n={class:"flex gap-3"},D$n={class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},R$n={class:"text-sm text-gray-500"},P$n={key:0,class:"flex gap-3"},I$n={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},O$n={class:"text-sm text-gray-500"},L$n={key:1,class:"flex gap-3"},V$n={class:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0"},N$n={class:"text-sm text-gray-500"},j$n={key:0,class:"bg-white rounded-lg border p-6"},F$n={class:"space-y-3"},B$n=["onClick"],z$n={class:"flex items-center justify-between mb-1"},U$n={class:"font-medium text-sm"},H$n={class:"text-sm text-gray-500"},q$n={class:"bg-white rounded-lg border p-6"},W$n={class:"space-y-2"},G$n={__name:"StockTakeSessionDetail",setup(t){const e=ta(),n=_n(),r=Q(!0),s=Q(null),i=Q([]);yt(()=>ue(this,null,function*(){yield a(),yield o()}));function a(){return ue(this,null,function*(){r.value=!0;try{const N=yield Ke("frappe.client.get",{doctype:"Stock Take Session",name:e.params.id});s.value=N}catch(N){console.error("Error loading session:",N)}finally{r.value=!1}})}function o(){return ue(this,null,function*(){try{const N=yield Ke("frappe.client.get_list",{doctype:"Inventory Variance Case",filters:{stock_take_session:e.params.id},fields:["name","item_code","item_name","status","variance_qty","variance_value"]});i.value=N}catch(N){console.error("Error loading variance cases:",N)}})}const l=Z(()=>{var q;return{Scheduled:"subtle","In Progress":"outline","Pending Review":"warning",Completed:"success",Approved:"success",Cancelled:"subtle"}[(q=s.value)==null?void 0:q.status]||"subtle"}),d=Z(()=>{var N,q;return((q=(N=s.value)==null?void 0:N.count_items)==null?void 0:q.length)||0}),c=Z(()=>{var N;return(N=s.value)!=null&&N.count_items?s.value.count_items.filter(q=>q.counted_qty!==null&&q.counted_qty!==void 0).length:0}),f=Z(()=>d.value===0?0:Math.round(c.value/d.value*100)),p=Z(()=>{var N;return(N=s.value)!=null&&N.count_items?s.value.count_items.filter(q=>q.condition&&q.condition!=="Good").length:0}),h=Z(()=>{var q,V;if(c.value===0)return 100;const N=((V=(q=s.value)==null?void 0:q.count_items)==null?void 0:V.filter(O=>O.variance_qty===0).length)||0;return Math.round(N/c.value*100)}),m=Z(()=>{var q;if(!((q=s.value)!=null&&q.count_items))return{totalVariances:0,shortages:0,overages:0,netVarianceValue:0,materialVariances:0};const N=s.value.count_items.filter(V=>V.variance_qty!==0);return{totalVariances:N.length,shortages:N.filter(V=>(V.variance_qty||0)<0).length,overages:N.filter(V=>(V.variance_qty||0)>0).length,netVarianceValue:N.reduce((V,O)=>V+(O.variance_value||0),0),materialVariances:N.filter(V=>V.is_material).length}});function g(N){return N?new Date(N).toLocaleDateString():"-"}function y(N){return N?new Date(N).toLocaleString():"-"}function x(N){return N==null?"-":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(N)}function _(N){return{Open:"warning","Under Investigation":"outline",Resolved:"success","Written Off":"subtle",Closed:"subtle"}[N]||"subtle"}function k(){n.push("/inventory-audit/sessions")}function w(){n.push(`/inventory-audit/sessions/${e.params.id}/edit`)}function S(){var N;(N=s.value)!=null&&N.audit_plan&&n.push(`/inventory-audit/plans/${s.value.audit_plan}`)}function C(N){n.push(`/inventory-audit/variance-cases/${N}`)}function A(){return ue(this,null,function*(){try{yield Ke("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:{status:"In Progress",start_time:new Date().toISOString()}}),yield a()}catch(N){console.error("Error starting count:",N)}})}function M(){return ue(this,null,function*(){try{yield Ke("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:{status:"Pending Review",end_time:new Date().toISOString()}}),yield a()}catch(N){console.error("Error submitting for review:",N)}})}function E(N){return ue(this,null,function*(){try{yield Ke("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:{count_items:N}})}catch(q){console.error("Error saving count items:",q)}})}function P(N){return ue(this,null,function*(){const q={team:{team_signoff:1,team_signoff_date:new Date().toISOString()},supervisor:{supervisor_signoff:1,supervisor_signoff_date:new Date().toISOString()},auditor:{auditor_signoff:1,auditor_signoff_date:new Date().toISOString()}};try{yield Ke("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:q[N]}),yield a()}catch(V){console.error("Error applying signoff:",V)}})}function I(){n.push(`/inventory-audit/sessions/${e.params.id}/create-variance-cases`)}function F(){window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=Stock Take Session&name=${e.params.id}&format=Count Sheet`,"_blank")}function L(){console.log("Export to Excel")}function z(){console.log("View Audit Log")}return(N,q)=>{var V,O,X,j;return T(),R("div",M5n,[u("div",E5n,[u("div",D5n,[b(v(J),{variant:"ghost",onClick:k},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",R5n,$(((V=s.value)==null?void 0:V.session_name)||((O=s.value)==null?void 0:O.name)||"Loading..."),1),q[1]||(q[1]=u("p",{class:"text-gray-500 mt-1"},"Stock Take Session",-1))])]),u("div",P5n,[b(v(De),{variant:l.value},{default:D(()=>{var U;return[W($((U=s.value)==null?void 0:U.status),1)]}),_:1},8,["variant"]),b(v(J),{variant:"outline",onClick:w},{default:D(()=>[b(v(yn),{class:"w-4 h-4 mr-2"}),q[2]||(q[2]=W(" Edit ",-1))]),_:1}),((X=s.value)==null?void 0:X.status)==="Scheduled"?(T(),he(v(J),{key:0,variant:"solid",onClick:A},{default:D(()=>[b(v(Ll),{class:"w-4 h-4 mr-2"}),q[3]||(q[3]=W(" Start Counting ",-1))]),_:1})):se("",!0),((j=s.value)==null?void 0:j.status)==="In Progress"?(T(),he(v(J),{key:1,variant:"solid",onClick:M},{default:D(()=>[b(v(Kt),{class:"w-4 h-4 mr-2"}),q[4]||(q[4]=W(" Submit for Review ",-1))]),_:1})):se("",!0)])]),r.value?(T(),R("div",I5n,[...q[5]||(q[5]=[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):s.value?(T(),R("div",O5n,[u("div",L5n,[u("div",V5n,[q[14]||(q[14]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Session Overview",-1)),u("div",N5n,[u("div",null,[q[6]||(q[6]=u("span",{class:"text-sm text-gray-500"},"Session Type",-1)),u("p",j5n,$(s.value.session_type),1)]),u("div",null,[q[7]||(q[7]=u("span",{class:"text-sm text-gray-500"},"Warehouse",-1)),u("p",F5n,$(s.value.warehouse||"-"),1)]),u("div",null,[q[8]||(q[8]=u("span",{class:"text-sm text-gray-500"},"Zone",-1)),u("p",B5n,$(s.value.zone||"-"),1)]),u("div",null,[q[9]||(q[9]=u("span",{class:"text-sm text-gray-500"},"Bin Location",-1)),u("p",z5n,$(s.value.bin_location||"-"),1)]),u("div",null,[q[10]||(q[10]=u("span",{class:"text-sm text-gray-500"},"Scheduled Date",-1)),u("p",U5n,$(g(s.value.scheduled_date)),1)]),u("div",null,[q[11]||(q[11]=u("span",{class:"text-sm text-gray-500"},"Assigned Counters",-1)),u("p",H5n,$(s.value.assigned_counters||"-"),1)]),u("div",null,[q[12]||(q[12]=u("span",{class:"text-sm text-gray-500"},"Total Items",-1)),u("p",q5n,$(d.value),1)]),u("div",null,[q[13]||(q[13]=u("span",{class:"text-sm text-gray-500"},"Items Counted",-1)),u("p",W5n,$(c.value),1)])])]),s.value.audit_plan?(T(),R("div",G5n,[q[17]||(q[17]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Linked Audit Plan",-1)),u("div",Y5n,[u("div",K5n,[u("div",X5n,[b(v(Ar),{class:"w-5 h-5 text-blue-600"})]),u("div",null,[u("p",Q5n,$(s.value.audit_plan),1),q[15]||(q[15]=u("p",{class:"text-sm text-gray-500"},"Inventory Audit Plan",-1))])]),b(v(J),{variant:"outline",size:"sm",onClick:S},{default:D(()=>[b(v(_Y),{class:"w-4 h-4 mr-1"}),q[16]||(q[16]=W(" View Plan ",-1))]),_:1})])])):se("",!0),u("div",Z5n,[b(v(ple),{modelValue:s.value.count_items,"onUpdate:modelValue":[q[0]||(q[0]=U=>s.value.count_items=U),E],readonly:s.value.status==="Completed"||s.value.status==="Approved"},null,8,["modelValue","readonly"])]),m.value.totalVariances>0?(T(),R("div",J5n,[q[24]||(q[24]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Variance Summary",-1)),u("div",e$n,[u("div",t$n,[u("div",n$n,[b(v(rn),{class:"w-5 h-5 text-yellow-600"}),q[18]||(q[18]=u("span",{class:"text-sm text-yellow-700"},"Total Variances",-1))]),u("p",r$n,$(m.value.totalVariances),1)]),u("div",s$n,[u("div",i$n,[b(v(Om),{class:"w-5 h-5 text-red-600"}),q[19]||(q[19]=u("span",{class:"text-sm text-red-700"},"Shortages",-1))]),u("p",a$n,$(m.value.shortages),1)]),u("div",o$n,[u("div",l$n,[b(v($l),{class:"w-5 h-5 text-green-600"}),q[20]||(q[20]=u("span",{class:"text-sm text-green-700"},"Overages",-1))]),u("p",u$n,$(m.value.overages),1)]),u("div",d$n,[u("div",c$n,[b(v(ab),{class:"w-5 h-5 text-purple-600"}),q[21]||(q[21]=u("span",{class:"text-sm text-purple-700"},"Net Variance Value",-1))]),u("p",f$n,$(x(m.value.netVarianceValue)),1)])]),m.value.materialVariances>0?(T(),R("div",p$n,[u("div",h$n,[b(v(qr),{class:"w-5 h-5 text-red-600 mt-0.5"}),u("div",null,[u("p",m$n,$(m.value.materialVariances)+" Material Variance(s) Detected ",1),q[23]||(q[23]=u("p",{class:"text-sm text-red-600 mt-1"}," These variances exceed the materiality thresholds and require investigation. ",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-2",onClick:I},{default:D(()=>[...q[22]||(q[22]=[W(" Create Variance Cases ",-1)])]),_:1})])])])):se("",!0)])):se("",!0),u("div",g$n,[b(v(Pgn),{teamSignoff:s.value.team_signoff,teamSignoffDate:s.value.team_signoff_date,supervisorSignoff:s.value.supervisor_signoff,supervisorSignoffDate:s.value.supervisor_signoff_date,auditorSignoff:s.value.auditor_signoff,auditorSignoffDate:s.value.auditor_signoff_date,readonly:s.value.status==="Approved",onSignoff:P},null,8,["teamSignoff","teamSignoffDate","supervisorSignoff","supervisorSignoffDate","auditorSignoff","auditorSignoffDate","readonly"])])]),u("div",v$n,[u("div",y$n,[q[28]||(q[28]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Stats",-1)),u("div",b$n,[u("div",x$n,[q[25]||(q[25]=u("span",{class:"text-gray-500"},"Progress",-1)),u("span",_$n,$(f.value)+"%",1)]),u("div",w$n,[u("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:rt({width:`${f.value}%`})},null,4)]),u("div",k$n,[u("div",S$n,[q[26]||(q[26]=u("span",{class:"text-gray-500"},"Items with Issues",-1)),u("span",C$n,$(p.value),1)]),u("div",A$n,[q[27]||(q[27]=u("span",{class:"text-gray-500"},"Accuracy Rate",-1)),u("span",T$n,$(h.value)+"%",1)])])])]),u("div",$$n,[q[32]||(q[32]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",M$n,[u("div",E$n,[u("div",D$n,[b(v(rr),{class:"w-4 h-4 text-blue-600"})]),u("div",null,[q[29]||(q[29]=u("p",{class:"font-medium"},"Scheduled",-1)),u("p",R$n,$(g(s.value.scheduled_date)),1)])]),s.value.start_time?(T(),R("div",P$n,[u("div",I$n,[b(v(Ll),{class:"w-4 h-4 text-green-600"})]),u("div",null,[q[30]||(q[30]=u("p",{class:"font-medium"},"Started",-1)),u("p",O$n,$(y(s.value.start_time)),1)])])):se("",!0),s.value.end_time?(T(),R("div",L$n,[u("div",V$n,[b(v(Kt),{class:"w-4 h-4 text-purple-600"})]),u("div",null,[q[31]||(q[31]=u("p",{class:"font-medium"},"Completed",-1)),u("p",N$n,$(y(s.value.end_time)),1)])])):se("",!0)])]),i.value.length>0?(T(),R("div",j$n,[q[33]||(q[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Variance Cases",-1)),u("div",F$n,[(T(!0),R(xe,null,_e(i.value,U=>(T(),R("div",{key:U.name,class:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",onClick:G=>C(U.name)},[u("div",z$n,[u("span",U$n,$(U.name),1),b(v(De),{variant:_(U.status),size:"sm"},{default:D(()=>[W($(U.status),1)]),_:2},1032,["variant"])]),u("p",H$n,$(U.item_code)+" - "+$(U.item_name),1)],8,B$n))),128))])])):se("",!0),u("div",q$n,[q[37]||(q[37]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Actions",-1)),u("div",W$n,[b(v(J),{variant:"outline",class:"w-full justify-start",onClick:F},{default:D(()=>[b(v(JD),{class:"w-4 h-4 mr-2"}),q[34]||(q[34]=W(" Print Count Sheet ",-1))]),_:1}),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:L},{default:D(()=>[b(v(xn),{class:"w-4 h-4 mr-2"}),q[35]||(q[35]=W(" Export to Excel ",-1))]),_:1}),b(v(J),{variant:"outline",class:"w-full justify-start",onClick:z},{default:D(()=>[b(v(GS),{class:"w-4 h-4 mr-2"}),q[36]||(q[36]=W(" View Audit Log ",-1))]),_:1})])])])])):se("",!0)])}}},Y$n={class:"p-6"},K$n={class:"flex items-center justify-between mb-6"},X$n={class:"flex items-center gap-4"},Q$n={class:"text-2xl font-bold text-gray-900"},Z$n={class:"text-gray-500 mt-1"},J$n={class:"flex items-center gap-2"},eMn={class:"max-w-4xl"},tMn={class:"space-y-6"},nMn={class:"bg-white rounded-lg border p-6"},rMn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},sMn={class:"md:col-span-2"},iMn={class:"bg-white rounded-lg border p-6"},aMn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},oMn={class:"bg-white rounded-lg border p-6"},lMn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uMn={class:"bg-white rounded-lg border p-6"},dMn={class:"flex items-center justify-between mb-4"},cMn={class:"flex items-center gap-2"},fMn={class:"bg-white rounded-lg border p-6"},pMn={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},hMn={class:"space-y-4"},mMn={key:0,class:"p-4 bg-gray-50 rounded-lg"},kW={__name:"StockTakeSessionForm",setup(t){const e=ta(),n=_n(),r=Q(!1),s=Q([]),i=Q([]),a=Q([]),o=Q([]),l=Q(!1),d=Q(""),c=Z(()=>e.params.id&&e.params.id!=="new"),f=Q({session_name:"",session_type:"Cycle Count",status:"Scheduled",audit_plan:"",scheduled_date:new Date().toISOString().split("T")[0],warehouse:"",zone:"",bin_location:"",assigned_counters:"",supervisor:"",count_items:[],notes:""});yt(()=>ue(this,null,function*(){yield Promise.all([p(),h(),m(),g()]),c.value&&(yield y())})),et(()=>f.value.audit_plan,E=>ue(this,null,function*(){if(E&&!c.value)try{const P=yield Ke("frappe.client.get_value",{doctype:"Inventory Audit Plan",filters:{name:E},fieldname:["warehouse"]});P.warehouse&&(f.value.warehouse=P.warehouse)}catch(P){console.error("Error loading plan details:",P)}}));function p(){return ue(this,null,function*(){try{const E=yield Ke("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});s.value=E.map(P=>({label:P.full_name||P.name,value:P.name}))}catch(E){console.error("Error loading users:",E)}})}function h(){return ue(this,null,function*(){try{const E=yield Ke("frappe.client.get_list",{doctype:"Inventory Audit Plan",filters:{status:["in",["Planned","In Progress"]]},fields:["name","plan_title"],limit_page_length:0});i.value=E.map(P=>({label:P.plan_title||P.name,value:P.name}))}catch(E){console.error("Error loading audit plans:",E)}})}function m(){return ue(this,null,function*(){try{const E=yield Ke("frappe.client.get_list",{doctype:"Warehouse",fields:["name","warehouse_name"],limit_page_length:0});a.value=E.map(P=>({label:P.warehouse_name||P.name,value:P.name}))}catch(E){console.error("Error loading warehouses:",E)}})}function g(){return ue(this,null,function*(){try{const E=yield Ke("frappe.client.get_list",{doctype:"Inventory Snapshot",filters:{status:"Active"},fields:["name","snapshot_date","warehouse"],limit_page_length:50,order_by:"snapshot_date desc"});o.value=E.map(P=>({label:`${P.name} - ${P.warehouse} (${P.snapshot_date})`,value:P.name}))}catch(E){console.error("Error loading snapshots:",E)}})}function y(){return ue(this,null,function*(){try{const E=yield Ke("frappe.client.get",{doctype:"Stock Take Session",name:e.params.id});f.value={session_name:E.session_name||"",session_type:E.session_type||"Cycle Count",status:E.status||"Scheduled",audit_plan:E.audit_plan||"",scheduled_date:E.scheduled_date||"",warehouse:E.warehouse||"",zone:E.zone||"",bin_location:E.bin_location||"",assigned_counters:E.assigned_counters||"",supervisor:E.supervisor||"",count_items:E.count_items||[],notes:E.notes||""}}catch(E){console.error("Error loading session:",E)}})}function x(){return ue(this,null,function*(){if(!f.value.session_type){alert("Session type is required");return}if(!f.value.scheduled_date){alert("Scheduled date is required");return}r.value=!0;try{if(c.value)yield Ke("frappe.client.set_value",{doctype:"Stock Take Session",name:e.params.id,fieldname:f.value}),n.push(`/inventory-audit/sessions/${e.params.id}`);else{const E=yield Ke("frappe.client.insert",{doc:ge({doctype:"Stock Take Session"},f.value)});n.push(`/inventory-audit/sessions/${E.name}`)}}catch(E){console.error("Error saving session:",E),alert("Error saving session: "+E.message)}finally{r.value=!1}})}function _(){return ue(this,null,function*(){if(!f.value.session_type||!f.value.scheduled_date){alert("Session type and scheduled date are required");return}r.value=!0;try{yield Ke("frappe.client.insert",{doc:ge({doctype:"Stock Take Session"},f.value)}),f.value={session_name:"",session_type:"Cycle Count",status:"Scheduled",audit_plan:f.value.audit_plan,scheduled_date:f.value.scheduled_date,warehouse:f.value.warehouse,zone:"",bin_location:"",assigned_counters:"",supervisor:"",count_items:[],notes:""}}catch(E){console.error("Error saving session:",E),alert("Error saving session: "+E.message)}finally{r.value=!1}})}function k(){f.value.count_items.push({item_code:"",item_name:"",system_qty:0,counted_qty:null,variance_qty:0,variance_value:0,uom:"Nos",condition:"Good",notes:""})}function w(){l.value=!0}function S(){return ue(this,null,function*(){if(d.value)try{const E=yield Ke("frappe.client.get",{doctype:"Inventory Snapshot",name:d.value});E.items&&E.items.length>0&&(f.value.count_items=E.items.map(P=>({item_code:P.item_code,item_name:P.item_name,system_qty:P.qty||0,counted_qty:null,variance_qty:0,variance_value:0,uom:P.uom||"Nos",condition:"Good",notes:""}))),E.warehouse&&(f.value.warehouse=E.warehouse),l.value=!1,d.value=""}catch(E){console.error("Error loading snapshot:",E),alert("Error loading snapshot: "+E.message)}})}function C(){c.value?n.push(`/inventory-audit/sessions/${e.params.id}`):n.push("/inventory-audit/sessions")}const A=[{label:"Cycle Count",value:"Cycle Count"},{label:"Full Count",value:"Full Count"},{label:"Spot Check",value:"Spot Check"},{label:"Blind Count",value:"Blind Count"},{label:"Verification",value:"Verification"}],M=[{label:"Scheduled",value:"Scheduled"},{label:"In Progress",value:"In Progress"},{label:"Pending Review",value:"Pending Review"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}];return(E,P)=>(T(),R("div",Y$n,[u("div",K$n,[u("div",X$n,[b(v(J),{variant:"ghost",onClick:C},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",Q$n,$(c.value?"Edit Session":"New Stock Take Session"),1),u("p",Z$n,$(c.value?`Editing ${v(e).params.id}`:"Create a new stock take session"),1)])]),u("div",J$n,[b(v(J),{variant:"outline",onClick:C},{default:D(()=>[...P[15]||(P[15]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:x,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(c.value?"Save Changes":"Create Session"),1)]),_:1},8,["loading"])])]),u("div",eMn,[u("div",tMn,[u("div",nMn,[P[21]||(P[21]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Basic Information",-1)),u("div",rMn,[u("div",sMn,[P[16]||(P[16]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Session Name ",-1)),b(v(ve),{type:"text",modelValue:f.value.session_name,"onUpdate:modelValue":P[0]||(P[0]=I=>f.value.session_name=I),placeholder:"e.g., Zone A Cycle Count - Week 48"},null,8,["modelValue"])]),u("div",null,[P[17]||(P[17]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Session Type "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"select",modelValue:f.value.session_type,"onUpdate:modelValue":P[1]||(P[1]=I=>f.value.session_type=I),options:A},null,8,["modelValue"])]),u("div",null,[P[18]||(P[18]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(v(ve),{type:"select",modelValue:f.value.status,"onUpdate:modelValue":P[2]||(P[2]=I=>f.value.status=I),options:M},null,8,["modelValue"])]),u("div",null,[P[19]||(P[19]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Linked Audit Plan ",-1)),b(v(ve),{type:"autocomplete",modelValue:f.value.audit_plan,"onUpdate:modelValue":P[3]||(P[3]=I=>f.value.audit_plan=I),options:i.value,placeholder:"Select audit plan"},null,8,["modelValue","options"])]),u("div",null,[P[20]||(P[20]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Scheduled Date "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"date",modelValue:f.value.scheduled_date,"onUpdate:modelValue":P[4]||(P[4]=I=>f.value.scheduled_date=I)},null,8,["modelValue"])])])]),u("div",iMn,[P[25]||(P[25]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Location",-1)),u("div",aMn,[u("div",null,[P[22]||(P[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),b(v(ve),{type:"autocomplete",modelValue:f.value.warehouse,"onUpdate:modelValue":P[5]||(P[5]=I=>f.value.warehouse=I),options:a.value,placeholder:"Select warehouse"},null,8,["modelValue","options"])]),u("div",null,[P[23]||(P[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Zone",-1)),b(v(ve),{type:"text",modelValue:f.value.zone,"onUpdate:modelValue":P[6]||(P[6]=I=>f.value.zone=I),placeholder:"e.g., Zone A"},null,8,["modelValue"])]),u("div",null,[P[24]||(P[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Bin Location",-1)),b(v(ve),{type:"text",modelValue:f.value.bin_location,"onUpdate:modelValue":P[7]||(P[7]=I=>f.value.bin_location=I),placeholder:"e.g., A-01-01"},null,8,["modelValue"])])])]),u("div",oMn,[P[29]||(P[29]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Assignment",-1)),u("div",lMn,[u("div",null,[P[26]||(P[26]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned Counters",-1)),b(v(ve),{type:"text",modelValue:f.value.assigned_counters,"onUpdate:modelValue":P[8]||(P[8]=I=>f.value.assigned_counters=I),placeholder:"e.g., John Doe, Jane Smith"},null,8,["modelValue"]),P[27]||(P[27]=u("p",{class:"text-xs text-gray-500 mt-1"},"Comma-separated list of counter names",-1))]),u("div",null,[P[28]||(P[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Supervisor",-1)),b(v(ve),{type:"autocomplete",modelValue:f.value.supervisor,"onUpdate:modelValue":P[9]||(P[9]=I=>f.value.supervisor=I),options:s.value,placeholder:"Select supervisor"},null,8,["modelValue","options"])])])]),u("div",uMn,[u("div",dMn,[P[32]||(P[32]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Items to Count",-1)),u("div",cMn,[b(v(J),{variant:"outline",size:"sm",onClick:w},{default:D(()=>[b(v(xn),{class:"w-4 h-4 mr-2"}),P[30]||(P[30]=W(" Load from Snapshot ",-1))]),_:1}),b(v(J),{variant:"outline",size:"sm",onClick:k},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),P[31]||(P[31]=W(" Add Item ",-1))]),_:1})])]),b(v(ple),{modelValue:f.value.count_items,"onUpdate:modelValue":P[10]||(P[10]=I=>f.value.count_items=I),readonly:!1},null,8,["modelValue"])]),u("div",fMn,[P[33]||(P[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes",-1)),b(v(ve),{type:"textarea",modelValue:f.value.notes,"onUpdate:modelValue":P[11]||(P[11]=I=>f.value.notes=I),placeholder:"Additional notes or instructions for this session...",rows:4},null,8,["modelValue"])])]),u("div",pMn,[b(v(J),{variant:"outline",onClick:C},{default:D(()=>[...P[34]||(P[34]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"outline",onClick:_,loading:r.value},{default:D(()=>[...P[35]||(P[35]=[W(" Save & Add Another ",-1)])]),_:1},8,["loading"]),b(v(J),{variant:"solid",onClick:x,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(c.value?"Save Changes":"Create Session"),1)]),_:1},8,["loading"])])]),b(v(jt),{modelValue:l.value,"onUpdate:modelValue":P[14]||(P[14]=I=>l.value=I),options:{title:"Load Items from Snapshot"}},{"body-content":D(()=>[u("div",hMn,[u("div",null,[P[36]||(P[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Select Snapshot",-1)),b(v(ve),{type:"autocomplete",modelValue:d.value,"onUpdate:modelValue":P[12]||(P[12]=I=>d.value=I),options:o.value,placeholder:"Search snapshots..."},null,8,["modelValue","options"])]),d.value?(T(),R("div",mMn,[...P[37]||(P[37]=[u("p",{class:"text-sm text-gray-600"}," This will load all items from the selected snapshot. Existing items will be replaced. ",-1)])])):se("",!0)])]),actions:D(()=>[b(v(J),{variant:"outline",onClick:P[13]||(P[13]=I=>l.value=!1)},{default:D(()=>[...P[38]||(P[38]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:S,disabled:!d.value},{default:D(()=>[...P[39]||(P[39]=[W(" Load Items ",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]))}},gMn={class:"p-6"},vMn={class:"flex justify-between items-center mb-6"},yMn={class:"flex gap-2"},bMn={class:"bg-white rounded-lg border p-4 mb-6"},xMn={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},_Mn=["value"],wMn={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},kMn={class:"bg-white rounded-lg border p-4"},SMn={class:"text-2xl font-bold"},CMn={class:"bg-white rounded-lg border p-4"},AMn={class:"text-2xl font-bold text-yellow-600"},TMn={class:"bg-white rounded-lg border p-4"},$Mn={class:"text-2xl font-bold text-orange-600"},MMn={class:"bg-white rounded-lg border p-4"},EMn={class:"text-2xl font-bold text-blue-600"},DMn={class:"bg-white rounded-lg border p-4"},RMn={class:"text-2xl font-bold text-red-600"},PMn={class:"bg-white rounded-lg border shadow-sm"},IMn={key:0,class:"divide-y divide-gray-200"},OMn=["onClick"],LMn={class:"flex items-start justify-between"},VMn={class:"flex-1"},NMn={class:"flex items-center gap-3 mb-2"},jMn={class:"font-medium text-gray-900"},FMn={class:"text-sm text-gray-600 mb-2"},BMn={class:"flex items-center gap-6 text-sm text-gray-500"},zMn={key:0,class:"flex items-center gap-1"},UMn={key:1,class:"flex items-center gap-1"},HMn={class:"flex items-center gap-6 mt-3 text-sm"},qMn={class:"text-gray-500"},WMn={key:0,class:"text-orange-600"},GMn={key:1,class:"text-red-600"},YMn={key:2,class:"text-red-700 font-medium"},KMn={class:"flex items-center gap-4 mt-3"},XMn={class:"text-right"},QMn={key:1,class:"text-sm text-gray-500"},ZMn={key:1,class:"p-12 text-center text-gray-500"},JMn={key:2,class:"px-4 py-3 border-t flex items-center justify-between"},eEn={class:"text-sm text-gray-500"},tEn={class:"flex gap-2"},nEn={__name:"StockTakeSessionList",setup(t){const e=_n(),n=tu(),r=Q(!1),s=Q({status:"",count_type:"",audit_plan:"",warehouse:""}),i=Z(()=>n.sessions),a=Z(()=>n.sessionsTotalCount),o=Z(()=>n.sessionsPage),l=Z(()=>n.sessionsPageSize),d=Z(()=>Math.ceil(a.value/l.value)),c=Z(()=>i.value.filter(M=>M.status==="Completed"&&(!M.team_signoff||!M.supervisor_signoff||!M.auditor_signoff)).length),f=Z(()=>i.value.reduce((M,E)=>M+(E.total_items_counted||0),0)),p=Z(()=>i.value.reduce((M,E)=>M+(E.items_with_variance||0),0));yt(()=>ue(this,null,function*(){yield h()}));function h(){return ue(this,null,function*(){r.value=!0;try{const M=ge({},s.value);Object.keys(M).forEach(E=>{M[E]||delete M[E]}),yield n.loadSessions(M,o.value,l.value)}finally{r.value=!1}})}function m(){return ue(this,null,function*(){s.value={status:"",count_type:"",audit_plan:"",warehouse:""},yield h()})}let g=null;function y(){clearTimeout(g),g=setTimeout(()=>h(),300)}function x(M){return ue(this,null,function*(){yield n.loadSessions(s.value,M,l.value)})}function _(){e.push("/inventory-audit/sessions/new")}function k(M){e.push(`/inventory-audit/sessions/${M}`)}function w(M){return{Planned:"blue","In Progress":"yellow",Completed:"green",Cancelled:"red"}[M]||"gray"}function S(M){return M>=90?"text-green-600":M>=70?"text-yellow-600":"text-red-600"}function C(M){return M?new Date(M).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function A(M){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(M||0)}return(M,E)=>(T(),R("div",gMn,[u("div",vMn,[E[7]||(E[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Stock Take Sessions"),u("p",{class:"text-gray-600"},"Manage physical count sessions and count teams")],-1)),u("div",yMn,[b(v(J),{onClick:m,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"]),b(v(J),{onClick:_},{default:D(()=>[b(v(nt),{class:"w-4 h-4 mr-2"}),E[6]||(E[6]=W(" New Session ",-1))]),_:1})])]),u("div",bMn,[u("div",xMn,[u("div",null,[E[9]||(E[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),we(u("select",{"onUpdate:modelValue":E[0]||(E[0]=P=>s.value.status=P),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:h},[...E[8]||(E[8]=[fr('<option value="">All Statuses</option><option value="Planned">Planned</option><option value="In Progress">In Progress</option><option value="Completed">Completed</option><option value="Cancelled">Cancelled</option>',5)])],544),[[vn,s.value.status]])]),u("div",null,[E[11]||(E[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Count Type",-1)),we(u("select",{"onUpdate:modelValue":E[1]||(E[1]=P=>s.value.count_type=P),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:h},[E[10]||(E[10]=u("option",{value:""},"All Types",-1)),(T(!0),R(xe,null,_e(v(n).countTypeOptions,P=>(T(),R("option",{key:P.value,value:P.value},$(P.label),9,_Mn))),128))],544),[[vn,s.value.count_type]])]),u("div",null,[E[12]||(E[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Plan",-1)),we(u("input",{"onUpdate:modelValue":E[2]||(E[2]=P=>s.value.audit_plan=P),type:"text",placeholder:"Filter by plan",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:y},null,544),[[Rt,s.value.audit_plan]])]),u("div",null,[E[13]||(E[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),we(u("input",{"onUpdate:modelValue":E[3]||(E[3]=P=>s.value.warehouse=P),type:"text",placeholder:"Filter by warehouse",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:y},null,544),[[Rt,s.value.warehouse]])])])]),u("div",wMn,[u("div",kMn,[E[14]||(E[14]=u("p",{class:"text-sm text-gray-500"},"Total Sessions",-1)),u("p",SMn,$(a.value),1)]),u("div",CMn,[E[15]||(E[15]=u("p",{class:"text-sm text-gray-500"},"In Progress",-1)),u("p",AMn,$(i.value.filter(P=>P.status==="In Progress").length),1)]),u("div",TMn,[E[16]||(E[16]=u("p",{class:"text-sm text-gray-500"},"Pending Signoff",-1)),u("p",$Mn,$(c.value),1)]),u("div",MMn,[E[17]||(E[17]=u("p",{class:"text-sm text-gray-500"},"Total Items Counted",-1)),u("p",EMn,$(f.value),1)]),u("div",DMn,[E[18]||(E[18]=u("p",{class:"text-sm text-gray-500"},"Items w/ Variance",-1)),u("p",RMn,$(p.value),1)])]),u("div",PMn,[i.value.length>0?(T(),R("div",IMn,[(T(!0),R(xe,null,_e(i.value,P=>(T(),R("div",{key:P.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:I=>k(P.name)},[u("div",LMn,[u("div",VMn,[u("div",NMn,[u("h4",jMn,$(P.session_title),1),b(v(De),{variant:w(P.status)},{default:D(()=>[W($(P.status),1)]),_:2},1032,["variant"]),b(v(De),{variant:"gray"},{default:D(()=>[W($(P.count_type),1)]),_:2},1024)]),u("p",FMn,$(P.session_id),1),u("div",BMn,[P.warehouse?(T(),R("span",zMn,[b(v(ob),{class:"w-4 h-4"}),W(" "+$(P.warehouse),1)])):se("",!0),P.start_datetime?(T(),R("span",UMn,[b(v(Ns),{class:"w-4 h-4"}),W(" "+$(C(P.start_datetime)),1)])):se("",!0)]),u("div",HMn,[u("span",qMn,[E[19]||(E[19]=W(" Items: ",-1)),u("strong",null,$(P.total_items_counted||0),1)]),P.items_with_variance?(T(),R("span",WMn,[E[20]||(E[20]=W(" Variances: ",-1)),u("strong",null,$(P.items_with_variance),1)])):se("",!0),P.total_variance_value?(T(),R("span",GMn,[E[21]||(E[21]=W(" Value: ",-1)),u("strong",null,$(A(P.total_variance_value)),1)])):se("",!0),P.materiality_breaches?(T(),R("span",YMn,[b(v(rn),{class:"w-4 h-4 inline"}),W(" "+$(P.materiality_breaches)+" material ",1)])):se("",!0)]),u("div",KMn,[u("span",{class:pe(["text-xs px-2 py-1 rounded-full",P.team_signoff?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},$(P.team_signoff?"":"")+" Team ",3),u("span",{class:pe(["text-xs px-2 py-1 rounded-full",P.supervisor_signoff?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},$(P.supervisor_signoff?"":"")+" Supervisor ",3),u("span",{class:pe(["text-xs px-2 py-1 rounded-full",P.auditor_signoff?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},$(P.auditor_signoff?"":"")+" Auditor ",3)])]),u("div",XMn,[P.session_compliance_score?(T(),R("p",{key:0,class:pe(["text-lg font-bold",S(P.session_compliance_score)])},$(P.session_compliance_score)+"% ",3)):se("",!0),P.variance_rate?(T(),R("p",QMn," Variance: "+$(P.variance_rate)+"% ",1)):se("",!0)])])],8,OMn))),128))])):r.value?se("",!0):(T(),R("div",ZMn,[b(v(Qa),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),E[23]||(E[23]=u("p",null,"No stock take sessions found",-1)),b(v(J),{variant:"outline",size:"sm",class:"mt-2",onClick:_},{default:D(()=>[...E[22]||(E[22]=[W(" Start First Session ",-1)])]),_:1})])),d.value>1?(T(),R("div",JMn,[u("p",eEn," Showing "+$((o.value-1)*l.value+1)+" - "+$(Math.min(o.value*l.value,a.value))+" of "+$(a.value),1),u("div",tEn,[b(v(J),{variant:"outline",size:"sm",disabled:o.value===1,onClick:E[4]||(E[4]=P=>x(o.value-1))},{default:D(()=>[...E[24]||(E[24]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(v(J),{variant:"outline",size:"sm",disabled:o.value===d.value,onClick:E[5]||(E[5]=P=>x(o.value+1))},{default:D(()=>[...E[25]||(E[25]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):se("",!0)])]))}},rEn={class:"p-6"},sEn={class:"flex items-center justify-between mb-6"},iEn={class:"flex items-center gap-4"},aEn={class:"text-2xl font-bold text-gray-900"},oEn={class:"flex items-center gap-2"},lEn={key:0,class:"flex items-center justify-center py-20"},uEn={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},dEn={class:"lg:col-span-2 space-y-6"},cEn={class:"bg-white rounded-lg border p-6"},fEn={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},pEn={class:"font-medium font-mono"},hEn={class:"font-medium"},mEn={class:"font-medium"},gEn={class:"font-medium"},vEn={class:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4"},yEn={class:"p-4 bg-blue-50 rounded-lg"},bEn={class:"text-2xl font-bold text-blue-800"},xEn={class:"p-4 bg-green-50 rounded-lg"},_En={class:"text-2xl font-bold text-green-800"},wEn={class:"mt-4 p-4 border rounded-lg"},kEn={class:"flex items-center gap-3"},SEn={class:"font-medium"},CEn={class:"text-sm text-gray-500"},AEn={class:"bg-white rounded-lg border p-6"},TEn={class:"space-y-4"},$En={class:"p-3 bg-gray-50 rounded-lg"},MEn={class:"p-3 bg-gray-50 rounded-lg whitespace-pre-wrap"},EEn={class:"grid grid-cols-2 gap-4"},DEn={class:"p-3 bg-gray-50 rounded-lg"},REn={class:"p-3 bg-gray-50 rounded-lg"},PEn={key:0,class:"bg-white rounded-lg border p-6"},IEn={class:"space-y-4"},OEn={class:"grid grid-cols-2 gap-4"},LEn={class:"font-medium"},VEn={class:"p-3 bg-gray-50 rounded-lg whitespace-pre-wrap"},NEn={key:0,class:"p-4 border rounded-lg"},jEn={class:"flex items-center justify-between"},FEn={class:"flex items-center gap-3"},BEn={class:"text-sm text-gray-500"},zEn={class:"bg-white rounded-lg border p-6"},UEn={class:"flex items-center justify-between mb-4"},HEn={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},qEn={class:"flex items-center gap-3 mb-2"},WEn={class:"text-sm font-medium truncate"},GEn={class:"flex items-center gap-2"},YEn={key:1,class:"text-center py-8 text-gray-500"},KEn={class:"bg-white rounded-lg border p-6"},XEn={key:0,class:"space-y-4"},QEn={class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},ZEn={class:"flex-1"},JEn={class:"flex items-center gap-2 mb-1"},eDn={class:"font-medium text-sm"},tDn={class:"text-xs text-gray-500"},nDn={class:"text-sm text-gray-700"},rDn={key:1,class:"text-center py-4 text-gray-500"},sDn={class:"mt-4 pt-4 border-t"},iDn={class:"flex gap-2"},aDn={class:"space-y-6"},oDn={class:"bg-white rounded-lg border p-6"},lDn={class:"space-y-2"},uDn={class:"bg-white rounded-lg border p-6"},dDn={class:"space-y-3"},cDn={class:"flex items-center gap-2"},fDn={class:"text-sm text-gray-500 mt-1"},pDn={class:"flex items-center gap-2"},hDn={class:"text-sm text-gray-500 mt-1"},mDn={class:"bg-white rounded-lg border p-6"},gDn={class:"space-y-4"},vDn={class:"flex gap-3"},yDn={class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},bDn={class:"text-xs text-gray-500"},xDn={key:0,class:"flex gap-3"},_Dn={class:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0"},wDn={class:"text-xs text-gray-500"},kDn={key:1,class:"flex gap-3"},SDn={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},CDn={class:"text-xs text-gray-500"},ADn={__name:"VarianceCaseDetail",setup(t){const e=ta(),n=_n(),r=Q(!0),s=Q(null),i=Q([]),a=Q([]),o=Q("");yt(()=>ue(this,null,function*(){yield Promise.all([l(),d(),c()])}));function l(){return ue(this,null,function*(){r.value=!0;try{const O=yield Ke("frappe.client.get",{doctype:"Inventory Variance Case",name:e.params.id});s.value=O}catch(O){console.error("Error loading variance case:",O)}finally{r.value=!1}})}function d(){return ue(this,null,function*(){try{const O=yield Ke("frappe.client.get_list",{doctype:"File",filters:{attached_to_doctype:"Inventory Variance Case",attached_to_name:e.params.id},fields:["name","file_name","file_url"]});i.value=O}catch(O){console.error("Error loading evidence:",O)}})}function c(){return ue(this,null,function*(){try{const O=yield Ke("frappe.client.get_list",{doctype:"Comment",filters:{reference_doctype:"Inventory Variance Case",reference_name:e.params.id,comment_type:"Comment"},fields:["name","content","comment_by","creation"],order_by:"creation desc"});a.value=O}catch(O){console.error("Error loading comments:",O)}})}const f=Z(()=>{var X;return{Open:"warning","Under Investigation":"outline",Resolved:"success","Written Off":"subtle",Closed:"subtle"}[(X=s.value)==null?void 0:X.status]||"subtle"}),p=Z(()=>{var X;return{Critical:"solid",High:"warning",Medium:"outline",Low:"subtle"}[(X=s.value)==null?void 0:X.priority]||"subtle"}),h=Z(()=>s.value?s.value.variance_qty<0?"bg-red-50":"bg-green-50":"bg-gray-50"),m=Z(()=>s.value?s.value.variance_qty<0?"text-red-700":"text-green-700":"text-gray-700"),g=Z(()=>s.value?s.value.variance_qty<0?"bg-red-100":"bg-green-100":"bg-gray-100");function y(O){return O?new Date(O).toLocaleDateString():"-"}function x(O){return O?new Date(O).toLocaleString():"-"}function _(O){return O==null?"-":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(O)}function k(O){return{Adjusted:"success","Written Off":"warning","No Action Required":"subtle",Transferred:"outline"}[O]||"subtle"}function w(O){return O?/\.(jpg|jpeg|png|gif|webp)$/i.test(O):!1}function S(){n.push("/inventory-audit/variance-cases")}function C(){n.push(`/inventory-audit/variance-cases/${e.params.id}/edit`)}function A(){var O;(O=s.value)!=null&&O.stock_take_session&&n.push(`/inventory-audit/sessions/${s.value.stock_take_session}`)}function M(){var O;(O=s.value)!=null&&O.audit_plan&&n.push(`/inventory-audit/plans/${s.value.audit_plan}`)}function E(){var O;(O=s.value)!=null&&O.adjustment_entry&&window.open(`/app/stock-entry/${s.value.adjustment_entry}`,"_blank")}function P(){return ue(this,null,function*(){try{yield Ke("frappe.client.set_value",{doctype:"Inventory Variance Case",name:e.params.id,fieldname:{status:"Under Investigation",investigation_start_date:new Date().toISOString().split("T")[0]}}),yield l()}catch(O){console.error("Error starting investigation:",O)}})}function I(){return ue(this,null,function*(){n.push(`/inventory-audit/variance-cases/${e.params.id}/resolve`)})}function F(){window.open(`/app/stock-entry/new-stock-entry-1?from_variance_case=${e.params.id}`,"_blank")}function L(){return ue(this,null,function*(){if(confirm("Are you sure you want to write off this variance?"))try{yield Ke("frappe.client.set_value",{doctype:"Inventory Variance Case",name:e.params.id,fieldname:{status:"Written Off",resolution_type:"Written Off",resolved_date:new Date().toISOString().split("T")[0]}}),yield l()}catch(O){console.error("Error writing off:",O)}})}function z(){console.log("Add evidence - implement file upload")}function N(O){window.open(O.file_url,"_blank")}function q(O){const X=document.createElement("a");X.href=O.file_url,X.download=O.file_name,X.click()}function V(){return ue(this,null,function*(){if(o.value.trim())try{yield Ke("frappe.client.insert",{doc:{doctype:"Comment",comment_type:"Comment",reference_doctype:"Inventory Variance Case",reference_name:e.params.id,content:o.value}}),o.value="",yield c()}catch(O){console.error("Error adding comment:",O)}})}return(O,X)=>{var j;return T(),R("div",rEn,[u("div",sEn,[u("div",iEn,[b(v(J),{variant:"ghost",onClick:S},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",aEn,$(((j=s.value)==null?void 0:j.name)||"Loading..."),1),X[1]||(X[1]=u("p",{class:"text-gray-500 mt-1"},"Inventory Variance Case",-1))])]),u("div",oEn,[b(v(De),{variant:f.value},{default:D(()=>{var U;return[W($((U=s.value)==null?void 0:U.status),1)]}),_:1},8,["variant"]),b(v(De),{variant:p.value},{default:D(()=>{var U;return[W($((U=s.value)==null?void 0:U.priority)+" Priority",1)]}),_:1},8,["variant"]),b(v(J),{variant:"outline",onClick:C},{default:D(()=>[b(v(yn),{class:"w-4 h-4 mr-2"}),X[2]||(X[2]=W(" Edit ",-1))]),_:1})])]),r.value?(T(),R("div",lEn,[...X[3]||(X[3]=[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):s.value?(T(),R("div",uEn,[u("div",dEn,[u("div",cEn,[X[10]||(X[10]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Variance Details",-1)),u("div",fEn,[u("div",null,[X[4]||(X[4]=u("span",{class:"text-sm text-gray-500"},"Item Code",-1)),u("p",pEn,$(s.value.item_code),1)]),u("div",null,[X[5]||(X[5]=u("span",{class:"text-sm text-gray-500"},"Item Name",-1)),u("p",hEn,$(s.value.item_name||"-"),1)]),u("div",null,[X[6]||(X[6]=u("span",{class:"text-sm text-gray-500"},"Warehouse",-1)),u("p",mEn,$(s.value.warehouse||"-"),1)]),u("div",null,[X[7]||(X[7]=u("span",{class:"text-sm text-gray-500"},"Branch",-1)),u("p",gEn,$(s.value.branch||"-"),1)])]),u("div",vEn,[u("div",yEn,[X[8]||(X[8]=u("span",{class:"text-sm text-blue-700"},"System Qty",-1)),u("p",bEn,$(s.value.system_qty||0),1)]),u("div",xEn,[X[9]||(X[9]=u("span",{class:"text-sm text-green-700"},"Counted Qty",-1)),u("p",_En,$(s.value.counted_qty||0),1)]),u("div",{class:pe(["p-4 rounded-lg",h.value])},[u("span",{class:pe(["text-sm",m.value])},"Variance Qty",2),u("p",{class:pe(["text-2xl font-bold",m.value])},$(s.value.variance_qty>0?"+":"")+$(s.value.variance_qty||0),3)],2),u("div",{class:pe(["p-4 rounded-lg",h.value])},[u("span",{class:pe(["text-sm",m.value])},"Variance Value",2),u("p",{class:pe(["text-2xl font-bold",m.value])},$(_(s.value.variance_value)),3)],2)]),u("div",wEn,[u("div",kEn,[u("div",{class:pe(["w-10 h-10 rounded-full flex items-center justify-center",g.value])},[s.value.variance_qty<0?(T(),he(v(Om),{key:0,class:"w-5 h-5 text-red-600"})):(T(),he(v($l),{key:1,class:"w-5 h-5 text-green-600"}))],2),u("div",null,[u("p",SEn,$(s.value.variance_qty<0?"Shortage":"Overage"),1),u("p",CEn,$(Math.abs(s.value.variance_qty))+" units "+$(s.value.variance_qty<0?"less":"more")+" than system ",1)])])])]),u("div",AEn,[X[15]||(X[15]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Investigation",-1)),u("div",TEn,[u("div",null,[X[11]||(X[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Root Cause",-1)),u("div",$En,$(s.value.root_cause||"Not yet determined"),1)]),u("div",null,[X[12]||(X[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Investigation Notes",-1)),u("div",MEn,$(s.value.investigation_notes||"No investigation notes"),1)]),u("div",EEn,[u("div",null,[X[13]||(X[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned Investigator",-1)),u("div",DEn,$(s.value.assigned_to||"Not assigned"),1)]),u("div",null,[X[14]||(X[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),u("div",REn,$(y(s.value.due_date)||"Not set"),1)])])])]),s.value.status==="Resolved"||s.value.resolution_type?(T(),R("div",PEn,[X[21]||(X[21]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resolution",-1)),u("div",IEn,[u("div",OEn,[u("div",null,[X[16]||(X[16]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Type",-1)),b(v(De),{variant:k(s.value.resolution_type)},{default:D(()=>[W($(s.value.resolution_type||"-"),1)]),_:1},8,["variant"])]),u("div",null,[X[17]||(X[17]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolved Date",-1)),u("p",LEn,$(y(s.value.resolved_date)||"-"),1)])]),u("div",null,[X[18]||(X[18]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Notes",-1)),u("div",VEn,$(s.value.resolution_notes||"No resolution notes"),1)]),s.value.adjustment_entry?(T(),R("div",NEn,[u("div",jEn,[u("div",FEn,[b(v(vt),{class:"w-5 h-5 text-blue-600"}),u("div",null,[X[19]||(X[19]=u("p",{class:"font-medium"},"Stock Adjustment Entry",-1)),u("p",BEn,$(s.value.adjustment_entry),1)])]),b(v(J),{variant:"outline",size:"sm",onClick:E},{default:D(()=>[b(v(_Y),{class:"w-4 h-4 mr-1"}),X[20]||(X[20]=W(" View ",-1))]),_:1})])])):se("",!0)])])):se("",!0),u("div",zEn,[u("div",UEn,[X[23]||(X[23]=u("h3",{class:"text-lg font-semibold text-gray-900"},"Evidence & Attachments",-1)),b(v(J),{variant:"outline",size:"sm",onClick:z},{default:D(()=>[b(v(xa),{class:"w-4 h-4 mr-2"}),X[22]||(X[22]=W(" Add Evidence ",-1))]),_:1})]),i.value.length>0?(T(),R("div",HEn,[(T(!0),R(xe,null,_e(i.value,U=>(T(),R("div",{key:U.name,class:"p-4 border rounded-lg"},[u("div",qEn,[w(U.file_url)?(T(),he(v(Sfe),{key:0,class:"w-5 h-5 text-gray-500"})):(T(),he(v(vt),{key:1,class:"w-5 h-5 text-gray-500"})),u("span",WEn,$(U.file_name),1)]),u("div",GEn,[b(v(J),{variant:"ghost",size:"sm",onClick:G=>N(U)},{default:D(()=>[b(v(lr),{class:"w-4 h-4"})]),_:1},8,["onClick"]),b(v(J),{variant:"ghost",size:"sm",onClick:G=>q(U)},{default:D(()=>[b(v(xn),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])):(T(),R("div",YEn,[b(v(ufe),{class:"w-12 h-12 mx-auto mb-3 text-gray-300"}),X[24]||(X[24]=u("p",null,"No evidence attached yet",-1))]))]),u("div",KEn,[X[26]||(X[26]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Activity",-1)),a.value.length>0?(T(),R("div",XEn,[(T(!0),R(xe,null,_e(a.value,U=>(T(),R("div",{key:U.name,class:"flex gap-3"},[u("div",QEn,[b(v(Ji),{class:"w-4 h-4 text-blue-600"})]),u("div",ZEn,[u("div",JEn,[u("span",eDn,$(U.comment_by),1),u("span",tDn,$(x(U.creation)),1)]),u("p",nDn,$(U.content),1)])]))),128))])):(T(),R("div",rDn,[...X[25]||(X[25]=[u("p",null,"No activity yet",-1)])])),u("div",sDn,[u("div",iDn,[b(v(ve),{type:"textarea",modelValue:o.value,"onUpdate:modelValue":X[0]||(X[0]=U=>o.value=U),placeholder:"Add a comment...",rows:2,class:"flex-1"},null,8,["modelValue"]),b(v(J),{variant:"solid",onClick:V,disabled:!o.value.trim()},{default:D(()=>[b(v(PY),{class:"w-4 h-4"})]),_:1},8,["disabled"])])])])]),u("div",aDn,[u("div",oDn,[X[31]||(X[31]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Actions",-1)),u("div",lDn,[s.value.status==="Open"?(T(),he(v(J),{key:0,variant:"solid",class:"w-full justify-start",onClick:P},{default:D(()=>[b(v(En),{class:"w-4 h-4 mr-2"}),X[27]||(X[27]=W(" Start Investigation ",-1))]),_:1})):se("",!0),s.value.status==="Under Investigation"?(T(),he(v(J),{key:1,variant:"solid",class:"w-full justify-start",onClick:I},{default:D(()=>[b(v(Kt),{class:"w-4 h-4 mr-2"}),X[28]||(X[28]=W(" Mark as Resolved ",-1))]),_:1})):se("",!0),s.value.status==="Under Investigation"?(T(),he(v(J),{key:2,variant:"outline",class:"w-full justify-start",onClick:F},{default:D(()=>[b(v(vt),{class:"w-4 h-4 mr-2"}),X[29]||(X[29]=W(" Create Stock Adjustment ",-1))]),_:1})):se("",!0),s.value.status==="Under Investigation"?(T(),he(v(J),{key:3,variant:"outline",class:"w-full justify-start text-orange-600",onClick:L},{default:D(()=>[b(v(rn),{class:"w-4 h-4 mr-2"}),X[30]||(X[30]=W(" Write Off ",-1))]),_:1})):se("",!0)])]),u("div",uDn,[X[34]||(X[34]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Linked Documents",-1)),u("div",dDn,[s.value.stock_take_session?(T(),R("div",{key:0,class:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",onClick:A},[u("div",cDn,[b(v(Ar),{class:"w-4 h-4 text-gray-500"}),X[32]||(X[32]=u("span",{class:"text-sm font-medium"},"Stock Take Session",-1))]),u("p",fDn,$(s.value.stock_take_session),1)])):se("",!0),s.value.audit_plan?(T(),R("div",{key:1,class:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",onClick:M},[u("div",pDn,[b(v(rr),{class:"w-4 h-4 text-gray-500"}),X[33]||(X[33]=u("span",{class:"text-sm font-medium"},"Audit Plan",-1))]),u("p",hDn,$(s.value.audit_plan),1)])):se("",!0)])]),u("div",mDn,[X[38]||(X[38]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Timeline",-1)),u("div",gDn,[u("div",vDn,[u("div",yDn,[b(v(nt),{class:"w-4 h-4 text-blue-600"})]),u("div",null,[X[35]||(X[35]=u("p",{class:"font-medium text-sm"},"Created",-1)),u("p",bDn,$(x(s.value.creation)),1)])]),s.value.investigation_start_date?(T(),R("div",xDn,[u("div",_Dn,[b(v(En),{class:"w-4 h-4 text-yellow-600"})]),u("div",null,[X[36]||(X[36]=u("p",{class:"font-medium text-sm"},"Investigation Started",-1)),u("p",wDn,$(y(s.value.investigation_start_date)),1)])])):se("",!0),s.value.resolved_date?(T(),R("div",kDn,[u("div",SDn,[b(v(Kt),{class:"w-4 h-4 text-green-600"})]),u("div",null,[X[37]||(X[37]=u("p",{class:"font-medium text-sm"},"Resolved",-1)),u("p",CDn,$(y(s.value.resolved_date)),1)])])):se("",!0)])])])])):se("",!0)])}}},TDn={class:"p-6"},$Dn={class:"flex items-center justify-between mb-6"},MDn={class:"flex items-center gap-4"},EDn={class:"text-2xl font-bold text-gray-900"},DDn={class:"text-gray-500 mt-1"},RDn={class:"flex items-center gap-2"},PDn={class:"max-w-4xl"},IDn={class:"space-y-6"},ODn={class:"bg-white rounded-lg border p-6"},LDn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},VDn={class:"bg-white rounded-lg border p-6"},NDn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},jDn={class:"bg-white rounded-lg border p-6"},FDn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},BDn={class:"bg-white rounded-lg border p-6"},zDn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},UDn={class:"bg-white rounded-lg border p-6"},HDn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qDn={key:0,class:"bg-white rounded-lg border p-6"},WDn={class:"space-y-4"},GDn={key:1,class:"bg-white rounded-lg border p-6"},YDn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},KDn={class:"md:col-span-2"},XDn={class:"bg-white rounded-lg border p-6"},QDn={class:"flex items-center justify-end gap-3 mt-6 pt-6 border-t"},SW={__name:"VarianceCaseForm",setup(t){const e=ta(),n=_n(),r=Q(!1),s=Q([]),i=Q([]),a=Q([]),o=Q([]),l=Q([]),d=Z(()=>e.params.id&&e.params.id!=="new"),c=Q({item_code:"",item_name:"",warehouse:"",branch:"",system_qty:0,counted_qty:0,variance_qty:0,unit_cost:0,variance_value:0,uom:"Nos",status:"Open",priority:"Medium",category:"",stock_take_session:"",audit_plan:"",assigned_to:"",due_date:"",root_cause:"",investigation_notes:"",resolution_type:"",resolved_date:"",resolution_notes:"",notes:""}),f=Z(()=>c.value.variance_qty===0?"bg-gray-100 text-gray-700":c.value.variance_qty<0?"bg-red-100 text-red-700":"bg-green-100 text-green-700");yt(()=>ue(this,null,function*(){yield Promise.all([p(),h(),m(),g(),y()]),d.value&&(yield x()),e.query.session&&(c.value.stock_take_session=e.query.session),e.query.item_code&&(c.value.item_code=e.query.item_code)}));function p(){return ue(this,null,function*(){try{const F=yield Ke("frappe.client.get_list",{doctype:"User",filters:{enabled:1,user_type:"System User"},fields:["name","full_name"],limit_page_length:0});s.value=F.map(L=>({label:L.full_name||L.name,value:L.name}))}catch(F){console.error("Error loading users:",F)}})}function h(){return ue(this,null,function*(){try{const F=yield Ke("frappe.client.get_list",{doctype:"Item",fields:["name","item_name","stock_uom","valuation_rate"],limit_page_length:0});i.value=F.map(L=>({label:`${L.name} - ${L.item_name}`,value:L.name,item_name:L.item_name,uom:L.stock_uom,cost:L.valuation_rate}))}catch(F){console.error("Error loading items:",F)}})}function m(){return ue(this,null,function*(){try{const F=yield Ke("frappe.client.get_list",{doctype:"Warehouse",fields:["name","warehouse_name"],limit_page_length:0});a.value=F.map(L=>({label:L.warehouse_name||L.name,value:L.name}))}catch(F){console.error("Error loading warehouses:",F)}})}function g(){return ue(this,null,function*(){try{const F=yield Ke("frappe.client.get_list",{doctype:"Stock Take Session",fields:["name","session_name","scheduled_date"],limit_page_length:50,order_by:"scheduled_date desc"});o.value=F.map(L=>({label:L.session_name||L.name,value:L.name}))}catch(F){console.error("Error loading sessions:",F)}})}function y(){return ue(this,null,function*(){try{const F=yield Ke("frappe.client.get_list",{doctype:"Inventory Audit Plan",filters:{status:["in",["Planned","In Progress"]]},fields:["name","plan_title"],limit_page_length:0});l.value=F.map(L=>({label:L.plan_title||L.name,value:L.name}))}catch(F){console.error("Error loading audit plans:",F)}})}function x(){return ue(this,null,function*(){try{const F=yield Ke("frappe.client.get",{doctype:"Inventory Variance Case",name:e.params.id});c.value={item_code:F.item_code||"",item_name:F.item_name||"",warehouse:F.warehouse||"",branch:F.branch||"",system_qty:F.system_qty||0,counted_qty:F.counted_qty||0,variance_qty:F.variance_qty||0,unit_cost:F.unit_cost||0,variance_value:F.variance_value||0,uom:F.uom||"Nos",status:F.status||"Open",priority:F.priority||"Medium",category:F.category||"",stock_take_session:F.stock_take_session||"",audit_plan:F.audit_plan||"",assigned_to:F.assigned_to||"",due_date:F.due_date||"",root_cause:F.root_cause||"",investigation_notes:F.investigation_notes||"",resolution_type:F.resolution_type||"",resolved_date:F.resolved_date||"",resolution_notes:F.resolution_notes||"",notes:F.notes||""}}catch(F){console.error("Error loading case:",F)}})}function _(F){const L=i.value.find(z=>z.value===F);L&&(c.value.item_name=L.item_name,c.value.uom=L.uom||"Nos",c.value.unit_cost=L.cost||0,k())}function k(){c.value.variance_qty=(c.value.counted_qty||0)-(c.value.system_qty||0),c.value.variance_value=c.value.variance_qty*(c.value.unit_cost||0);const F=Math.abs(c.value.variance_value);F>1e5?c.value.priority="Critical":F>5e4?c.value.priority="High":F>1e4?c.value.priority="Medium":c.value.priority="Low"}function w(F){return F==null?"KES 0":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(F)}function S(){return ue(this,null,function*(){if(!c.value.item_code){alert("Item code is required");return}r.value=!0;try{if(d.value)yield Ke("frappe.client.set_value",{doctype:"Inventory Variance Case",name:e.params.id,fieldname:c.value}),n.push(`/inventory-audit/variance-cases/${e.params.id}`);else{const F=yield Ke("frappe.client.insert",{doc:ge({doctype:"Inventory Variance Case"},c.value)});n.push(`/inventory-audit/variance-cases/${F.name}`)}}catch(F){console.error("Error saving case:",F),alert("Error saving case: "+F.message)}finally{r.value=!1}})}function C(){d.value?n.push(`/inventory-audit/variance-cases/${e.params.id}`):n.push("/inventory-audit/variance-cases")}const A=[{label:"Open",value:"Open"},{label:"Under Investigation",value:"Under Investigation"},{label:"Resolved",value:"Resolved"},{label:"Written Off",value:"Written Off"},{label:"Closed",value:"Closed"}],M=[{label:"Critical",value:"Critical"},{label:"High",value:"High"},{label:"Medium",value:"Medium"},{label:"Low",value:"Low"}],E=[{label:"Shortage",value:"Shortage"},{label:"Overage",value:"Overage"},{label:"Damaged",value:"Damaged"},{label:"Expired",value:"Expired"},{label:"Misplaced",value:"Misplaced"},{label:"Data Entry Error",value:"Data Entry Error"},{label:"Theft",value:"Theft"},{label:"Unknown",value:"Unknown"}],P=[{label:"Not Determined",value:""},{label:"Theft / Pilferage",value:"Theft / Pilferage"},{label:"Data Entry Error",value:"Data Entry Error"},{label:"Receiving Error",value:"Receiving Error"},{label:"Shipping Error",value:"Shipping Error"},{label:"Damage / Spoilage",value:"Damage / Spoilage"},{label:"Misplacement",value:"Misplacement"},{label:"System Error",value:"System Error"},{label:"Vendor Issue",value:"Vendor Issue"},{label:"Process Failure",value:"Process Failure"},{label:"Other",value:"Other"}],I=[{label:"Adjusted",value:"Adjusted"},{label:"Written Off",value:"Written Off"},{label:"No Action Required",value:"No Action Required"},{label:"Transferred",value:"Transferred"},{label:"Recovered",value:"Recovered"}];return(F,L)=>(T(),R("div",TDn,[u("div",$Dn,[u("div",MDn,[b(v(J),{variant:"ghost",onClick:C},{default:D(()=>[b(v(ss),{class:"w-5 h-5"})]),_:1}),u("div",null,[u("h1",EDn,$(d.value?"Edit Variance Case":"New Variance Case"),1),u("p",DDn,$(d.value?`Editing ${v(e).params.id}`:"Create a new inventory variance case"),1)])]),u("div",RDn,[b(v(J),{variant:"outline",onClick:C},{default:D(()=>[...L[21]||(L[21]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:S,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(d.value?"Save Changes":"Create Case"),1)]),_:1},8,["loading"])])]),u("div",PDn,[u("div",IDn,[u("div",ODn,[L[26]||(L[26]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Item Information",-1)),u("div",LDn,[u("div",null,[L[22]||(L[22]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Item Code "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.item_code,"onUpdate:modelValue":L[0]||(L[0]=z=>c.value.item_code=z),options:i.value,placeholder:"Select or search item",onChange:_},null,8,["modelValue","options"])]),u("div",null,[L[23]||(L[23]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Item Name",-1)),b(v(ve),{type:"text",modelValue:c.value.item_name,"onUpdate:modelValue":L[1]||(L[1]=z=>c.value.item_name=z),placeholder:"Item name",readonly:!0},null,8,["modelValue"])]),u("div",null,[L[24]||(L[24]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.warehouse,"onUpdate:modelValue":L[2]||(L[2]=z=>c.value.warehouse=z),options:a.value,placeholder:"Select warehouse"},null,8,["modelValue","options"])]),u("div",null,[L[25]||(L[25]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Branch",-1)),b(v(ve),{type:"text",modelValue:c.value.branch,"onUpdate:modelValue":L[3]||(L[3]=z=>c.value.branch=z),placeholder:"Branch location"},null,8,["modelValue"])])])]),u("div",VDn,[L[33]||(L[33]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Variance Details",-1)),u("div",NDn,[u("div",null,[L[27]||(L[27]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" System Qty "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"number",modelValue:c.value.system_qty,"onUpdate:modelValue":L[4]||(L[4]=z=>c.value.system_qty=z),placeholder:"0",onInput:k},null,8,["modelValue"])]),u("div",null,[L[28]||(L[28]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[W(" Counted Qty "),u("span",{class:"text-red-500"},"*")],-1)),b(v(ve),{type:"number",modelValue:c.value.counted_qty,"onUpdate:modelValue":L[5]||(L[5]=z=>c.value.counted_qty=z),placeholder:"0",onInput:k},null,8,["modelValue"])]),u("div",null,[L[29]||(L[29]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Variance Qty",-1)),u("div",{class:pe(["p-2 rounded-lg font-medium text-center",f.value])},$(c.value.variance_qty>0?"+":"")+$(c.value.variance_qty||0),3)]),u("div",null,[L[30]||(L[30]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Unit Cost",-1)),b(v(ve),{type:"number",modelValue:c.value.unit_cost,"onUpdate:modelValue":L[6]||(L[6]=z=>c.value.unit_cost=z),placeholder:"0.00",onInput:k},null,8,["modelValue"])]),u("div",null,[L[31]||(L[31]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Variance Value",-1)),u("div",{class:pe(["p-2 rounded-lg font-medium text-center",f.value])},$(w(c.value.variance_value)),3)]),u("div",null,[L[32]||(L[32]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"UOM",-1)),b(v(ve),{type:"text",modelValue:c.value.uom,"onUpdate:modelValue":L[7]||(L[7]=z=>c.value.uom=z),placeholder:"e.g., Nos, Kg"},null,8,["modelValue"])])])]),u("div",jDn,[L[37]||(L[37]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Classification",-1)),u("div",FDn,[u("div",null,[L[34]||(L[34]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(v(ve),{type:"select",modelValue:c.value.status,"onUpdate:modelValue":L[8]||(L[8]=z=>c.value.status=z),options:A},null,8,["modelValue"])]),u("div",null,[L[35]||(L[35]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),b(v(ve),{type:"select",modelValue:c.value.priority,"onUpdate:modelValue":L[9]||(L[9]=z=>c.value.priority=z),options:M},null,8,["modelValue"])]),u("div",null,[L[36]||(L[36]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),b(v(ve),{type:"select",modelValue:c.value.category,"onUpdate:modelValue":L[10]||(L[10]=z=>c.value.category=z),options:E},null,8,["modelValue"])])])]),u("div",BDn,[L[40]||(L[40]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Linked Documents",-1)),u("div",zDn,[u("div",null,[L[38]||(L[38]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock Take Session",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.stock_take_session,"onUpdate:modelValue":L[11]||(L[11]=z=>c.value.stock_take_session=z),options:o.value,placeholder:"Link to session"},null,8,["modelValue","options"])]),u("div",null,[L[39]||(L[39]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Audit Plan",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.audit_plan,"onUpdate:modelValue":L[12]||(L[12]=z=>c.value.audit_plan=z),options:l.value,placeholder:"Link to audit plan"},null,8,["modelValue","options"])])])]),u("div",UDn,[L[43]||(L[43]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Investigation Assignment",-1)),u("div",HDn,[u("div",null,[L[41]||(L[41]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),b(v(ve),{type:"autocomplete",modelValue:c.value.assigned_to,"onUpdate:modelValue":L[13]||(L[13]=z=>c.value.assigned_to=z),options:s.value,placeholder:"Assign investigator"},null,8,["modelValue","options"])]),u("div",null,[L[42]||(L[42]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),b(v(ve),{type:"date",modelValue:c.value.due_date,"onUpdate:modelValue":L[14]||(L[14]=z=>c.value.due_date=z)},null,8,["modelValue"])])])]),d.value?(T(),R("div",qDn,[L[46]||(L[46]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Investigation Details",-1)),u("div",WDn,[u("div",null,[L[44]||(L[44]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Root Cause",-1)),b(v(ve),{type:"select",modelValue:c.value.root_cause,"onUpdate:modelValue":L[15]||(L[15]=z=>c.value.root_cause=z),options:P},null,8,["modelValue"])]),u("div",null,[L[45]||(L[45]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Investigation Notes",-1)),b(v(ve),{type:"textarea",modelValue:c.value.investigation_notes,"onUpdate:modelValue":L[16]||(L[16]=z=>c.value.investigation_notes=z),placeholder:"Document investigation findings...",rows:4},null,8,["modelValue"])])])])):se("",!0),d.value&&(c.value.status==="Resolved"||c.value.status==="Written Off")?(T(),R("div",GDn,[L[50]||(L[50]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resolution",-1)),u("div",YDn,[u("div",null,[L[47]||(L[47]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Type",-1)),b(v(ve),{type:"select",modelValue:c.value.resolution_type,"onUpdate:modelValue":L[17]||(L[17]=z=>c.value.resolution_type=z),options:I},null,8,["modelValue"])]),u("div",null,[L[48]||(L[48]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolved Date",-1)),b(v(ve),{type:"date",modelValue:c.value.resolved_date,"onUpdate:modelValue":L[18]||(L[18]=z=>c.value.resolved_date=z)},null,8,["modelValue"])]),u("div",KDn,[L[49]||(L[49]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Resolution Notes",-1)),b(v(ve),{type:"textarea",modelValue:c.value.resolution_notes,"onUpdate:modelValue":L[19]||(L[19]=z=>c.value.resolution_notes=z),placeholder:"Document resolution details...",rows:3},null,8,["modelValue"])])])])):se("",!0),u("div",XDn,[L[51]||(L[51]=u("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Additional Notes",-1)),b(v(ve),{type:"textarea",modelValue:c.value.notes,"onUpdate:modelValue":L[20]||(L[20]=z=>c.value.notes=z),placeholder:"Any additional notes...",rows:3},null,8,["modelValue"])])]),u("div",QDn,[b(v(J),{variant:"outline",onClick:C},{default:D(()=>[...L[52]||(L[52]=[W("Cancel",-1)])]),_:1}),b(v(J),{variant:"solid",onClick:S,loading:r.value},{default:D(()=>[b(v($r),{class:"w-4 h-4 mr-2"}),W(" "+$(d.value?"Save Changes":"Create Case"),1)]),_:1},8,["loading"])])])]))}},ZDn={class:"p-6"},JDn={class:"flex justify-between items-center mb-6"},eRn={class:"flex gap-2"},tRn={class:"bg-white rounded-lg border p-4 mb-6"},nRn={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},rRn=["value"],sRn={class:"flex items-end"},iRn={class:"flex items-center gap-2"},aRn={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},oRn={class:"bg-white rounded-lg border p-4"},lRn={class:"text-2xl font-bold"},uRn={class:"bg-white rounded-lg border p-4"},dRn={class:"text-2xl font-bold text-blue-600"},cRn={class:"bg-white rounded-lg border p-4"},fRn={class:"text-2xl font-bold text-yellow-600"},pRn={class:"bg-white rounded-lg border p-4"},hRn={class:"text-2xl font-bold text-red-600"},mRn={class:"bg-white rounded-lg border p-4"},gRn={class:"text-2xl font-bold text-orange-600"},vRn={class:"bg-white rounded-lg border shadow-sm"},yRn={key:0,class:"divide-y divide-gray-200"},bRn=["onClick"],xRn={class:"flex items-start justify-between"},_Rn={class:"flex-1"},wRn={class:"flex items-center gap-3 mb-2"},kRn={class:"font-medium text-gray-900"},SRn={class:"text-sm text-gray-600 mb-2"},CRn={class:"flex items-center gap-6 text-sm text-gray-500"},ARn={class:"flex items-center gap-1"},TRn={key:0,class:"line-clamp-1"},$Rn={class:"flex items-center gap-6 mt-3 text-sm"},MRn={class:"text-gray-700"},ERn={class:"text-gray-700"},DRn={class:"text-gray-700"},RRn={class:"flex items-center gap-6 mt-3 text-sm"},PRn={key:0,class:"flex items-center gap-1 text-purple-600"},IRn={key:1,class:"flex items-center gap-1 text-gray-500"},ORn={class:"text-right"},LRn={key:0,class:"text-xs text-gray-500"},VRn={key:1,class:"p-12 text-center text-gray-500"},NRn={key:2,class:"px-4 py-3 border-t flex items-center justify-between"},jRn={class:"text-sm text-gray-500"},FRn={class:"flex gap-2"},BRn={__name:"VarianceCaseList",setup(t){const e=_n(),n=tu(),r=Q(!1),s=Q(!1),i=Q({status:"",priority:"",root_cause:"",investigator:""}),a=Z(()=>n.varianceCases),o=Z(()=>n.varianceCasesTotalCount),l=Z(()=>n.varianceCasesPage),d=Z(()=>n.varianceCasesPageSize),c=Z(()=>Math.ceil(o.value/d.value)),f=Z(()=>a.value.reduce((A,M)=>A+Math.abs(M.variance_value||0),0));yt(()=>ue(this,null,function*(){yield p()}));function p(){return ue(this,null,function*(){r.value=!0;try{const A=ge({},i.value);Object.keys(A).forEach(M=>{A[M]||delete A[M]}),yield n.loadVarianceCases(A,l.value,d.value)}finally{r.value=!1}})}function h(){return ue(this,null,function*(){i.value={status:"",priority:"",root_cause:"",investigator:""},s.value=!1,yield p()})}let m=null;function g(){clearTimeout(m),m=setTimeout(()=>p(),300)}function y(A){return ue(this,null,function*(){yield n.loadVarianceCases(i.value,A,d.value)})}function x(A){e.push(`/inventory-audit/variance-cases/${A}`)}function _(A){return{New:"blue","Under Investigation":"yellow","Resolution Proposed":"orange",Resolved:"green",Closed:"gray","No Variance":"gray"}[A]||"gray"}function k(A){return{Critical:"red",High:"orange",Medium:"yellow",Low:"blue"}[A]||"gray"}function w(A){return A.is_sla_breached?"text-red-600":A.sla_days_remaining!==void 0&&A.sla_days_remaining<=2?"text-orange-600":"text-gray-900"}function S(A){return A?new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function C(A){return new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(A||0)}return(A,M)=>(T(),R("div",ZDn,[u("div",JDn,[M[7]||(M[7]=u("div",null,[u("h1",{class:"text-2xl font-bold"},"Variance Reconciliation Cases"),u("p",{class:"text-gray-600"},"Investigate and resolve inventory discrepancies")],-1)),u("div",eRn,[b(v(J),{onClick:h,loading:r.value,variant:"outline",size:"sm"},{default:D(()=>[b(v(mn),{class:"w-4 h-4"})]),_:1},8,["loading"])])]),u("div",tRn,[u("div",nRn,[u("div",null,[M[9]||(M[9]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),we(u("select",{"onUpdate:modelValue":M[0]||(M[0]=E=>i.value.status=E),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:p},[...M[8]||(M[8]=[fr('<option value="">All Statuses</option><option value="New">New</option><option value="Under Investigation">Under Investigation</option><option value="Resolution Proposed">Resolution Proposed</option><option value="Resolved">Resolved</option><option value="Closed">Closed</option>',6)])],544),[[vn,i.value.status]])]),u("div",null,[M[11]||(M[11]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),we(u("select",{"onUpdate:modelValue":M[1]||(M[1]=E=>i.value.priority=E),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:p},[...M[10]||(M[10]=[fr('<option value="">All Priorities</option><option value="Critical">Critical</option><option value="High">High</option><option value="Medium">Medium</option><option value="Low">Low</option>',5)])],544),[[vn,i.value.priority]])]),u("div",null,[M[13]||(M[13]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Root Cause",-1)),we(u("select",{"onUpdate:modelValue":M[2]||(M[2]=E=>i.value.root_cause=E),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:p},[M[12]||(M[12]=u("option",{value:""},"All Causes",-1)),(T(!0),R(xe,null,_e(v(n).rootCauseOptions,E=>(T(),R("option",{key:E.value,value:E.value},$(E.label),9,rRn))),128))],544),[[vn,i.value.root_cause]])]),u("div",null,[M[14]||(M[14]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Investigator",-1)),we(u("input",{"onUpdate:modelValue":M[3]||(M[3]=E=>i.value.investigator=E),type:"text",placeholder:"Filter by investigator",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onInput:g},null,544),[[Rt,i.value.investigator]])]),u("div",sRn,[u("label",iRn,[we(u("input",{type:"checkbox","onUpdate:modelValue":M[4]||(M[4]=E=>s.value=E),onChange:p,class:"rounded border-gray-300"},null,544),[[Rn,s.value]]),M[15]||(M[15]=u("span",{class:"text-sm text-gray-700"},"SLA Breached Only",-1))])])])]),u("div",aRn,[u("div",oRn,[M[16]||(M[16]=u("p",{class:"text-sm text-gray-500"},"Total Cases",-1)),u("p",lRn,$(o.value),1)]),u("div",uRn,[M[17]||(M[17]=u("p",{class:"text-sm text-gray-500"},"New",-1)),u("p",dRn,$(a.value.filter(E=>E.status==="New").length),1)]),u("div",cRn,[M[18]||(M[18]=u("p",{class:"text-sm text-gray-500"},"Under Investigation",-1)),u("p",fRn,$(a.value.filter(E=>E.status==="Under Investigation").length),1)]),u("div",pRn,[M[19]||(M[19]=u("p",{class:"text-sm text-gray-500"},"SLA Breached",-1)),u("p",hRn,$(a.value.filter(E=>E.is_sla_breached).length),1)]),u("div",mRn,[M[20]||(M[20]=u("p",{class:"text-sm text-gray-500"},"Total Variance Value",-1)),u("p",gRn,$(C(f.value)),1)])]),u("div",vRn,[a.value.length>0?(T(),R("div",yRn,[(T(!0),R(xe,null,_e(a.value,E=>(T(),R("div",{key:E.name,class:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:P=>x(E.name)},[u("div",xRn,[u("div",_Rn,[u("div",wRn,[u("h4",kRn,$(E.case_title||E.item_code),1),b(v(De),{variant:_(E.status)},{default:D(()=>[W($(E.status),1)]),_:2},1032,["variant"]),b(v(De),{variant:k(E.priority)},{default:D(()=>[W($(E.priority),1)]),_:2},1032,["variant"]),E.is_sla_breached?(T(),he(v(De),{key:0,variant:"red"},{default:D(()=>[b(v(rn),{class:"w-3 h-3 mr-1"}),M[21]||(M[21]=W(" SLA Breached ",-1))]),_:1})):se("",!0)]),u("p",SRn,$(E.case_id),1),u("div",CRn,[u("span",ARn,[b(v(Qa),{class:"w-4 h-4"}),W(" "+$(E.item_code),1)]),E.item_description?(T(),R("span",TRn,$(E.item_description),1)):se("",!0)]),u("div",$Rn,[u("span",MRn,[M[22]||(M[22]=W(" Qty Variance: ",-1)),u("strong",{class:pe(E.variance_quantity>0?"text-green-600":"text-red-600")},$(E.variance_quantity>0?"+":"")+$(E.variance_quantity),3)]),u("span",ERn,[M[23]||(M[23]=W(" Value: ",-1)),u("strong",{class:pe(E.variance_value>0?"text-green-600":"text-red-600")},$(C(E.variance_value)),3)]),u("span",DRn,[M[24]||(M[24]=W(" Variance %: ",-1)),u("strong",null,$(Math.abs(E.variance_percent||0).toFixed(1))+"%",1)])]),u("div",RRn,[E.root_cause?(T(),R("span",PRn,[b(v(ei),{class:"w-4 h-4"}),W(" "+$(E.root_cause),1)])):se("",!0),E.investigator?(T(),R("span",IRn,[b(v(Ji),{class:"w-4 h-4"}),W(" "+$(E.investigator),1)])):se("",!0)])]),u("div",ORn,[M[25]||(M[25]=u("p",{class:"text-sm text-gray-500"},"SLA Due",-1)),u("p",{class:pe(["font-medium",w(E)])},$(S(E.sla_due_date)),3),E.sla_days_remaining!==void 0?(T(),R("p",LRn,$(E.sla_days_remaining>=0?`${E.sla_days_remaining} days left`:`${Math.abs(E.sla_days_remaining)} days overdue`),1)):se("",!0)])])],8,bRn))),128))])):r.value?se("",!0):(T(),R("div",VRn,[b(v(Kt),{class:"w-12 h-12 mx-auto mb-3 text-green-300"}),M[26]||(M[26]=u("p",null,"No variance cases found",-1))])),c.value>1?(T(),R("div",NRn,[u("p",jRn," Showing "+$((l.value-1)*d.value+1)+" - "+$(Math.min(l.value*d.value,o.value))+" of "+$(o.value),1),u("div",FRn,[b(v(J),{variant:"outline",size:"sm",disabled:l.value===1,onClick:M[5]||(M[5]=E=>y(l.value-1))},{default:D(()=>[...M[27]||(M[27]=[W(" Previous ",-1)])]),_:1},8,["disabled"]),b(v(J),{variant:"outline",size:"sm",disabled:l.value===c.value,onClick:M[6]||(M[6]=E=>y(l.value+1))},{default:D(()=>[...M[28]||(M[28]=[W(" Next ",-1)])]),_:1},8,["disabled"])])])):se("",!0)])]))}},zRn={class:"min-h-screen flex items-center justify-center bg-gray-50"},URn={class:"max-w-md w-full text-center"},HRn={class:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-gray-100"},qRn={class:"mt-6"},WRn={__name:"NotFound",setup(t){return(e,n)=>{const r=Vs("router-link");return T(),R("div",zRn,[u("div",URn,[u("div",HRn,[b(v(l$),{class:"h-6 w-6 text-gray-600"})]),n[1]||(n[1]=u("h1",{class:"mt-4 text-2xl font-bold text-gray-900"},"Page Not Found",-1)),n[2]||(n[2]=u("p",{class:"mt-2 text-gray-600"}," The page you're looking for doesn't exist. ",-1)),u("div",qRn,[b(r,{to:"/",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"},{default:D(()=>[...n[0]||(n[0]=[W(" Go to Dashboard ",-1)])]),_:1})])])])}}},GRn={class:"min-h-screen flex items-center justify-center bg-gray-50"},YRn={class:"max-w-md w-full text-center"},KRn={class:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-red-100"},XRn={class:"mt-6"},QRn={__name:"Unauthorized",setup(t){return(e,n)=>{const r=Vs("router-link");return T(),R("div",GRn,[u("div",YRn,[u("div",KRn,[b(v(Uc),{class:"h-6 w-6 text-red-600"})]),n[1]||(n[1]=u("h1",{class:"mt-4 text-2xl font-bold text-gray-900"},"Access Denied",-1)),n[2]||(n[2]=u("p",{class:"mt-2 text-gray-600"}," You don't have permission to access this page. ",-1)),u("div",XRn,[b(r,{to:"/",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"},{default:D(()=>[...n[0]||(n[0]=[W(" Go to Dashboard ",-1)])]),_:1})])])])}}},ZRn=[{path:"/",component:Grt,meta:{requiresAuth:!0},children:[{path:"",name:"Dashboard",component:LEt,meta:{title:"Dashboard",icon:"LayoutDashboard",breadcrumb:"Dashboard"}},{path:"audit-planning/universe",name:"AuditUniverse",component:nbt,meta:{title:"Audit Universe",icon:"Target",breadcrumb:"Audit Universe"}},{path:"audit-planning/universe/new",name:"NewAuditUniverse",component:()=>Fi(()=>import("./AuditUniverseDetail-HNBsQ9Fm.js"),[]),meta:{title:"New Audit Universe Entity",breadcrumb:"New Entity"},props:{mode:"new"}},{path:"audit-planning/universe/:id",name:"AuditUniverseDetail",component:()=>Fi(()=>import("./AuditUniverseDetail-HNBsQ9Fm.js"),[]),meta:{title:"Audit Universe Details",breadcrumb:"Entity Details"},props:t=>({entityId:t.params.id,mode:"view"})},{path:"audit-planning/universe/:id/edit",name:"EditAuditUniverse",component:()=>Fi(()=>import("./AuditUniverseDetail-HNBsQ9Fm.js"),[]),meta:{title:"Edit Audit Universe Entity",breadcrumb:"Edit Entity"},props:t=>({entityId:t.params.id,mode:"edit"})},{path:"audit-planning/risk-assessment",name:"RiskAssessments",component:SJt,meta:{title:"Risk Assessments",icon:"AlertTriangle",breadcrumb:"Risk Assessments"}},{path:"audit-planning/risk-assessment/new",name:"NewRiskAssessment",component:()=>Fi(()=>import("./RiskAssessmentDetail-D1a9iKZ8.js"),__vite__mapDeps([0,1])),meta:{title:"New Risk Assessment",breadcrumb:"New Assessment"},props:{mode:"new"}},{path:"audit-planning/risk-assessment/:id",name:"RiskAssessmentDetail",component:()=>Fi(()=>import("./RiskAssessmentDetail-D1a9iKZ8.js"),__vite__mapDeps([0,1])),meta:{title:"Risk Assessment Details",breadcrumb:"Risk Assessment Details"},props:!0},{path:"audit-planning/risk-assessment/:id/edit",name:"EditRiskAssessment",component:()=>Fi(()=>import("./RiskAssessmentDetail-D1a9iKZ8.js"),__vite__mapDeps([0,1])),meta:{title:"Edit Risk Assessment",breadcrumb:"Edit Assessment"},props:t=>({assessmentId:t.params.id,mode:"edit"})},{path:"audit-planning/annual-plan",name:"AnnualPlan",component:mlt,meta:{title:"Annual Audit Plan",icon:"Calendar",breadcrumb:"Annual Audit Plan"}},{path:"audit-planning/programs",name:"AuditPrograms",component:wgt,meta:{title:"Audit Programs",icon:"FileText",breadcrumb:"Audit Programs"}},{path:"audit-planning/calendar",name:"AuditCalendar",component:uft,meta:{title:"Audit Calendar",icon:"CalendarDays",breadcrumb:"Audit Calendar"}},{path:"audit-execution/engagements",name:"AuditEngagements",component:uNt,meta:{title:"Audit Engagements",icon:"ClipboardList",breadcrumb:"Audit Engagements"}},{path:"audit-execution/test-library",name:"TestLibrary",component:ifn,meta:{title:"Test Library",icon:"FileText",breadcrumb:"Test Library"}},{path:"audit-execution/test-execution",name:"TestExecution",component:Mln,meta:{title:"Test Execution",icon:"PlayCircle",breadcrumb:"Test Execution"}},{path:"audit-execution/working-papers",name:"WorkingPapers",component:ggn,meta:{title:"Working Papers",icon:"FileText",breadcrumb:"Working Papers"}},{path:"audit-execution/data-analytics",name:"DataAnalytics",component:$Dt,meta:{title:"Data Analytics",icon:"BarChart",breadcrumb:"Data Analytics"}},{path:"findings/list",name:"FindingsList",component:Gjt,meta:{title:"Audit Findings",icon:"Search",breadcrumb:"Audit Findings"}},{path:"findings/corrective-actions",name:"CorrectiveActions",component:wTt,meta:{title:"Corrective Actions",icon:"CheckCircle",breadcrumb:"Corrective Actions"}},{path:"findings/follow-up",name:"FollowUpTracker",component:KFt,meta:{title:"Follow-up Tracker",icon:"Clock",breadcrumb:"Follow-up Tracker"}},{path:"data-management/import-wizard",name:"ImportData",component:mu,meta:{title:"Import Data",icon:"Upload",breadcrumb:"Import Data"}},{path:"data-management/explorer",name:"BCDataExplorer",component:mu,meta:{title:"BC Data Explorer",icon:"Database",breadcrumb:"BC Data Explorer"},props:{defaultTab:"bc-explorer"}},{path:"data-management/import-history",name:"ImportHistory",component:mu,meta:{title:"Import History",icon:"History",breadcrumb:"Import History"},props:{defaultTab:"history"}},{path:"data-management/periods",name:"DataPeriods",component:D6t,meta:{title:"Data Periods",icon:"CalendarDays",breadcrumb:"Data Periods"}},{path:"data-management/quality",name:"DataQuality",component:dOt,meta:{title:"Data Quality",icon:"ShieldCheck",breadcrumb:"Data Quality"}},{path:"compliance/requirements",name:"ComplianceRequirements",component:SSt,meta:{title:"Compliance Requirements",icon:"FileCheck",breadcrumb:"Compliance Requirements"}},{path:"compliance/checklist",name:"ComplianceChecklist",component:K2t,meta:{title:"Compliance Checklist",icon:"CheckSquare",breadcrumb:"Compliance Checklist"}},{path:"compliance/tax-tracker",name:"TaxCompliance",component:Fsn,meta:{title:"Tax Tracker",icon:"Calculator",breadcrumb:"Tax Tracker"}},{path:"compliance/calendar",name:"RegulatoryCalendar",component:ZWt,meta:{title:"Regulatory Calendar",icon:"Calendar",breadcrumb:"Regulatory Calendar"}},{path:"reports/audit-reports",name:"AuditReports",component:dYt,meta:{title:"Audit Reports",icon:"FileBarChart",breadcrumb:"Audit Reports"}},{path:"reports/standard",name:"StandardReports",component:rq,meta:{title:"Standard Reports",icon:"Presentation",breadcrumb:"Standard Reports"}},{path:"reports/board-reports",name:"BoardReports",component:rq,meta:{title:"Board Reports",icon:"Presentation",breadcrumb:"Board Reports"}},{path:"settings/configuration",name:"Settings",component:yW,meta:{title:"Settings",icon:"Settings",breadcrumb:"Settings"}},{path:"settings/templates",name:"SettingsTemplates",component:yW,meta:{title:"Settings Templates",icon:"FileTemplate",breadcrumb:"Settings Templates"},props:{defaultTab:"reports"}},{path:"settings/users",name:"UserManagement",component:zfn,meta:{title:"User Management",icon:"Users",breadcrumb:"User Management"}},{path:"chat",name:"MkaguziChat",component:vW,meta:{title:"AI Chat",icon:"MessageCircle",breadcrumb:"Chat",fullHeight:!0}},{path:"chat/:roomId",name:"MkaguziChatRoom",component:vW,meta:{title:"AI Chat",icon:"MessageCircle",breadcrumb:"Chat Room",fullHeight:!0},props:!0},{path:"engagements/:id",name:"EngagementDetail",component:()=>Fi(()=>import("./EngagementDetail-C8mz0MJf.js"),[]),meta:{title:"Engagement Details",breadcrumb:"Engagement Details"},props:!0},{path:"findings/:id",name:"FindingDetail",component:()=>Fi(()=>import("./FindingDetail-CQYlxRMt.js"),[]),meta:{title:"Finding Details",breadcrumb:"Finding Details"},props:!0},{path:"import-data/import-type/new",name:"NewImportType",component:mu,meta:{title:"New Import Type",breadcrumb:"New Import Type"},props:{defaultTab:"imports",mode:"new-import-type"}},{path:"import-data/import-type/:id/edit",name:"EditImportType",component:mu,meta:{title:"Edit Import Type",breadcrumb:"Edit Import Type"},props:t=>({defaultTab:"imports",mode:"edit-import-type",importTypeId:t.params.id})},{path:"import-data/import-type/:id/run",name:"RunImport",component:mu,meta:{title:"Run Import",breadcrumb:"Run Import"},props:t=>({defaultTab:"imports",mode:"run-import",importTypeId:t.params.id})},{path:"import-data/history/:id",name:"ImportHistoryDetail",component:mu,meta:{title:"Import History",breadcrumb:"Import History"},props:t=>({defaultTab:"history",mode:"view-history",historyId:t.params.id})},{path:"import-data/mapping/new",name:"NewFieldMapping",component:mu,meta:{title:"New Field Mapping",breadcrumb:"New Field Mapping"},props:{defaultTab:"mappings",mode:"new-mapping"}},{path:"import-data/mapping/:id/edit",name:"EditFieldMapping",component:mu,meta:{title:"Edit Field Mapping",breadcrumb:"Edit Field Mapping"},props:t=>({defaultTab:"mappings",mode:"edit-mapping",mappingId:t.params.id})},{path:"inventory-audit",name:"InventoryAuditDashboard",component:qwn,meta:{title:"Inventory Audit Dashboard",icon:"Package",breadcrumb:"Inventory Audit"}},{path:"inventory-audit/settings",name:"InventoryAuditSettings",component:okn,meta:{title:"Inventory Audit Settings",icon:"Settings",breadcrumb:"Settings"}},{path:"inventory-audit/items",name:"InventoryItemMaster",component:F5,meta:{title:"Inventory Item Master",icon:"Package",breadcrumb:"Item Master"}},{path:"inventory-audit/items/new",name:"NewInventoryItem",component:F5,meta:{title:"New Inventory Item",breadcrumb:"New Item"},props:{mode:"new"}},{path:"inventory-audit/items/:id",name:"InventoryItemDetail",component:F5,meta:{title:"Item Details",breadcrumb:"Item Details"},props:!0},{path:"inventory-audit/plans",name:"AuditPlanList",component:A1n,meta:{title:"Audit Plans",icon:"ClipboardList",breadcrumb:"Audit Plans"}},{path:"inventory-audit/plans/new",name:"NewAuditPlan",component:bW,meta:{title:"New Audit Plan",breadcrumb:"New Plan"}},{path:"inventory-audit/plans/:id",name:"AuditPlanDetail",component:y0n,meta:{title:"Audit Plan Details",breadcrumb:"Plan Details"},props:!0},{path:"inventory-audit/plans/:id/edit",name:"EditAuditPlan",component:bW,meta:{title:"Edit Audit Plan",breadcrumb:"Edit Plan"},props:!0},{path:"inventory-audit/sessions",name:"StockTakeSessionList",component:nEn,meta:{title:"Stock Take Sessions",icon:"Clipboard",breadcrumb:"Stock Take Sessions"}},{path:"inventory-audit/sessions/new",name:"NewStockTakeSession",component:kW,meta:{title:"New Stock Take Session",breadcrumb:"New Session"}},{path:"inventory-audit/sessions/:id",name:"StockTakeSessionDetail",component:G$n,meta:{title:"Session Details",breadcrumb:"Session Details"},props:!0},{path:"inventory-audit/sessions/:id/edit",name:"EditStockTakeSession",component:kW,meta:{title:"Edit Session",breadcrumb:"Edit Session"},props:!0},{path:"inventory-audit/variance-cases",name:"VarianceCaseList",component:BRn,meta:{title:"Variance Cases",icon:"AlertTriangle",breadcrumb:"Variance Cases"}},{path:"inventory-audit/variance-cases/new",name:"NewVarianceCase",component:SW,meta:{title:"New Variance Case",breadcrumb:"New Case"}},{path:"inventory-audit/variance-cases/:id",name:"VarianceCaseDetail",component:ADn,meta:{title:"Variance Case Details",breadcrumb:"Case Details"},props:!0},{path:"inventory-audit/variance-cases/:id/edit",name:"EditVarianceCase",component:SW,meta:{title:"Edit Variance Case",breadcrumb:"Edit Case"},props:!0},{path:"inventory-audit/stock-take",name:"StockTakeList",component:$5n,meta:{title:"Stock Take Audits",icon:"Package",breadcrumb:"Stock Take"}},{path:"inventory-audit/stock-take/new",name:"NewStockTake",component:wW,meta:{title:"New Stock Take",breadcrumb:"New Stock Take"}},{path:"inventory-audit/stock-take/:id",name:"StockTakeDetail",component:X4n,meta:{title:"Stock Take Details",breadcrumb:"Stock Take Details"},props:!0},{path:"inventory-audit/stock-take/:id/edit",name:"EditStockTake",component:wW,meta:{title:"Edit Stock Take",breadcrumb:"Edit Stock Take"},props:!0},{path:"inventory-audit/issues",name:"IssueLogList",component:QCn,meta:{title:"Stock Take Issues",icon:"AlertCircle",breadcrumb:"Issues"}},{path:"inventory-audit/issues/new",name:"NewIssueLog",component:_W,meta:{title:"Log Issue",breadcrumb:"Log Issue"}},{path:"inventory-audit/issues/:id",name:"IssueLogDetail",component:HSn,meta:{title:"Issue Details",breadcrumb:"Issue Details"},props:!0},{path:"inventory-audit/issues/:id/edit",name:"EditIssueLog",component:_W,meta:{title:"Edit Issue",breadcrumb:"Edit Issue"},props:!0},{path:"inventory-audit/scorecards",name:"ComplianceScorecardList",component:r_n,meta:{title:"Compliance Scorecards",icon:"BarChart2",breadcrumb:"Scorecards"}},{path:"inventory-audit/scorecards/new",name:"NewComplianceScorecard",component:xW,meta:{title:"New Compliance Scorecard",breadcrumb:"New Scorecard"}},{path:"inventory-audit/scorecards/:id",name:"ComplianceScorecardDetail",component:jbn,meta:{title:"Scorecard Details",breadcrumb:"Scorecard Details"},props:!0},{path:"inventory-audit/scorecards/:id/edit",name:"EditComplianceScorecard",component:xW,meta:{title:"Edit Compliance Scorecard",breadcrumb:"Edit Scorecard"},props:!0}]},{path:"/unauthorized",name:"Unauthorized",component:QRn,meta:{requiresAuth:!1}},{path:"/:pathMatch(.*)*",name:"NotFound",component:WRn,meta:{requiresAuth:!1}}],wO=efe({history:Rce("/frontend"),routes:ZRn});wO.beforeEach((t,e,n)=>ue(void 0,null,function*(){const{session:r}=yield Fi(()=>ue(void 0,null,function*(){const{session:s}=yield Promise.resolve().then(()=>ePn);return{session:s}}),void 0);if(t.meta.requiresAuth!==!1){if(!r.isLoggedIn){window.location.href="/login";return}t.meta.permissions}t.meta.title&&(document.title=`${t.meta.title} - Internal Audit System`),n()}));wO.afterEach(()=>{window.scrollTo(0,0)});const JRn=Ve({url:"frappe.auth.get_logged_user",cache:"User"});function ED(){let e=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return e==="Guest"&&(e=null),e}const Xm=Jt({logout:Ve({url:"logout",onSuccess(){JRn.reset(),Xm.user=ED(),window.location.href="/login"}}),user:ED(),isLoggedIn:Z(()=>!!Xm.user)}),ePn=Object.freeze(Object.defineProperty({__proto__:null,session:Xm,sessionUser:ED},Symbol.toStringTag,{value:"Module"})),tPn={id:"app",class:"min-h-screen bg-gray-50"},nPn={__name:"App",setup(t){return yt(()=>{console.log("Internal Audit Management System initialized")}),(e,n)=>{const r=Vs("router-view");return T(),R("div",tPn,[b(r)])}}},CW={Button:J,TextInput:TR,Input:$n,FormControl:ve,ErrorMessage:nX,Dialog:jt,Alert:dpe,Badge:De},ev=qD(nPn),rPn=Bde();A1e("resourceFetcher",vtt);ev.use(rPn);ev.use(wO);ev.use(gtt);ev.use(ett);for(const t in CW)ev.component(t,CW[t]);const sPn=window.site_name||"ukaguzi",iPn=`http://localhost:9023/${sPn}`,AW=t=>{const n=`; ${document.cookie}`.split(`; ${t}=`);if(n.length===2)return n.pop().split(";").shift()},TW=AW("sid")||AW("user_id"),aPn=TW?{sid:TW}:{},oPn=Xw(iPn,{withCredentials:!0,auth:aPn,transports:["websocket","polling"]});window.frappe=window.frappe||{};window.frappe.realtime=oPn;ev.mount("#app");export{IK as $,ss as A,qe as B,rr as C,fr as D,lr as E,xe as F,jt as G,GS as H,$n as I,Kt as J,ve as K,we as L,Rn as M,$r as N,xn as O,nt as P,Tbe as Q,g0e as R,yn as S,es as T,rt as U,xa as V,Mfe as W,ht as X,Ve as Y,ul as Z,J as _,ta as a,Pn as a0,or as a1,Je as a2,Vy as a3,IDe as a4,zZ as a5,fTe as a6,sM as a7,BZ as a8,nM as a9,rM as aa,ks as ab,Ru as ac,nr as ad,R as b,Z as c,T as d,u as e,se as f,b as g,D as h,W as i,v as j,De as k,he as l,Qe as m,H1e as n,yt as o,pe as p,_e as q,Q as r,St as s,$ as t,_n as u,vt as v,et as w,It as x,CR as y,Vs as z};
//# sourceMappingURL=index-DHStq_S_.js.map
